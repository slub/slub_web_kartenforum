var vk2=(()=>{var N$e=Object.create;var yw=Object.defineProperty,k$e=Object.defineProperties,q$e=Object.getOwnPropertyDescriptor,F$e=Object.getOwnPropertyDescriptors,j$e=Object.getOwnPropertyNames,mM=Object.getOwnPropertySymbols,z$e=Object.getPrototypeOf,$F=Object.prototype.hasOwnProperty,tJ=Object.prototype.propertyIsEnumerable;var My=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),U$e=t=>{throw TypeError(t)},_w=Math.pow,GF=(t,e,r)=>e in t?yw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mt=(t,e)=>{for(var r in e||(e={}))$F.call(e,r)&&GF(t,r,e[r]);if(mM)for(var r of mM(e))tJ.call(e,r)&&GF(t,r,e[r]);return t},on=(t,e)=>k$e(t,F$e(e));var Oo=(t,e)=>{var r={};for(var n in t)$F.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&mM)for(var n of mM(t))e.indexOf(n)<0&&tJ.call(t,n)&&(r[n]=t[n]);return r};var B$e=(t,e)=>()=>(t&&(e=t(t=0)),e);var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),rJ=(t,e)=>{for(var r in e)yw(t,r,{get:e[r],enumerable:!0})},nJ=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of j$e(e))!$F.call(t,i)&&i!==r&&yw(t,i,{get:()=>e[i],enumerable:!(n=q$e(e,i))||n.enumerable});return t};var Fe=(t,e,r)=>(r=t!=null?N$e(z$e(t)):{},nJ(e||!t||!t.__esModule?yw(r,"default",{value:t,enumerable:!0}):r,t)),V$e=t=>nJ(yw({},"__esModule",{value:!0}),t);var oo=(t,e,r)=>GF(t,typeof e!="symbol"?e+"":e,r);var Pn=(t,e,r)=>new Promise((n,i)=>{var o=d=>{try{f(r.next(d))}catch(v){i(v)}},l=d=>{try{f(r.throw(d))}catch(v){i(v)}},f=d=>d.done?n(d.value):Promise.resolve(d.value).then(o,l);f((r=r.apply(t,e)).next())}),Jm=function(t,e){this[0]=t,this[1]=e},HF=(t,e,r)=>{var n=(l,f,d,v)=>{try{var x=r[l](f),b=(f=x.value)instanceof Jm,A=x.done;Promise.resolve(b?f[0]:f).then(P=>b?n(l==="return"?l:"next",f[1]?{done:P.done,value:P.value}:P,d,v):d({value:P,done:A})).catch(P=>n("throw",P,d,v))}catch(P){v(P)}},i=l=>o[l]=f=>new Promise((d,v)=>n(l,f,d,v)),o={};return r=r.apply(t,e),o[My("asyncIterator")]=()=>o,i("next"),i("throw"),i("return"),o},WF=t=>{var e=t[My("asyncIterator")],r=!1,n,i={};return e==null?(e=t[My("iterator")](),n=o=>i[o]=l=>e[o](l)):(e=e.call(t),n=o=>i[o]=l=>{if(r){if(r=!1,o==="throw")throw l;return l}return r=!0,{done:!1,value:new Jm(new Promise(f=>{var d=e[o](l);d instanceof Object||U$e("Object expected"),f(d)}),1)}}),i[My("iterator")]=()=>i,n("next"),"throw"in e?n("throw"):i.throw=o=>{throw o},"return"in e&&n("return"),i},iJ=(t,e,r)=>(e=t[My("asyncIterator")])?e.call(t):(t=t[My("iterator")](),e={},r=(n,i)=>(i=t[n])&&(e[n]=o=>new Promise((l,f,d)=>(o=i.call(t,o),d=o.done,Promise.resolve(o.value).then(v=>l({value:v,done:d}),f)))),r("next"),r("return"),e);var T,p=B$e(()=>{T={env:{}}});var ZF=R((Kcr,aJ)=>{"use strict";p();var oJ=Object.getOwnPropertySymbols,$$e=Object.prototype.hasOwnProperty,H$e=Object.prototype.propertyIsEnumerable;function W$e(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Z$e(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(o){return!1}}aJ.exports=Z$e()?Object.assign:function(t,e){for(var r,n=W$e(t),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var l in r)$$e.call(r,l)&&(n[l]=r[l]);if(oJ){i=oJ(r);for(var f=0;f<i.length;f++)H$e.call(r,i[f])&&(n[i[f]]=r[i[f]])}}return n}});var wJ=R(In=>{"use strict";p();var KF=ZF(),Cy=60103,uJ=60106;In.Fragment=60107;In.StrictMode=60108;In.Profiler=60114;var cJ=60109,fJ=60110,hJ=60112;In.Suspense=60113;var pJ=60115,dJ=60116;typeof Symbol=="function"&&Symbol.for&&($l=Symbol.for,Cy=$l("react.element"),uJ=$l("react.portal"),In.Fragment=$l("react.fragment"),In.StrictMode=$l("react.strict_mode"),In.Profiler=$l("react.profiler"),cJ=$l("react.provider"),fJ=$l("react.context"),hJ=$l("react.forward_ref"),In.Suspense=$l("react.suspense"),pJ=$l("react.memo"),dJ=$l("react.lazy"));var $l,sJ=typeof Symbol=="function"&&Symbol.iterator;function Y$e(t){return t===null||typeof t!="object"?null:(t=sJ&&t[sJ]||t["@@iterator"],typeof t=="function"?t:null)}function xw(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gJ={};function Py(t,e,r){this.props=t,this.context=e,this.refs=gJ,this.updater=r||mJ}Py.prototype.isReactComponent={};Py.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(xw(85));this.updater.enqueueSetState(this,t,e,"setState")};Py.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vJ(){}vJ.prototype=Py.prototype;function XF(t,e,r){this.props=t,this.context=e,this.refs=gJ,this.updater=r||mJ}var QF=XF.prototype=new vJ;QF.constructor=XF;KF(QF,Py.prototype);QF.isPureReactComponent=!0;var JF={current:null},yJ=Object.prototype.hasOwnProperty,_J={key:!0,ref:!0,__self:!0,__source:!0};function xJ(t,e,r){var n,i={},o=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)yJ.call(e,n)&&!_J.hasOwnProperty(n)&&(i[n]=e[n]);var f=arguments.length-2;if(f===1)i.children=r;else if(1<f){for(var d=Array(f),v=0;v<f;v++)d[v]=arguments[v+2];i.children=d}if(t&&t.defaultProps)for(n in f=t.defaultProps,f)i[n]===void 0&&(i[n]=f[n]);return{$$typeof:Cy,type:t,key:o,ref:l,props:i,_owner:JF.current}}function K$e(t,e){return{$$typeof:Cy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ej(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cy}function X$e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var lJ=/\/+/g;function YF(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X$e(""+t.key):e.toString(36)}function vM(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Cy:case uJ:l=!0}}if(l)return l=t,i=i(l),t=n===""?"."+YF(l,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace(lJ,"$&/")+"/"),vM(i,e,r,"",function(v){return v})):i!=null&&(ej(i)&&(i=K$e(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(lJ,"$&/")+"/")+t)),e.push(i)),1;if(l=0,n=n===""?".":n+":",Array.isArray(t))for(var f=0;f<t.length;f++){o=t[f];var d=n+YF(o,f);l+=vM(o,e,r,d,i)}else if(d=Y$e(t),typeof d=="function")for(t=d.call(t),f=0;!(o=t.next()).done;)o=o.value,d=n+YF(o,f++),l+=vM(o,e,r,d,i);else if(o==="object")throw e=""+t,Error(xw(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function gM(t,e,r){if(t==null)return t;var n=[],i=0;return vM(t,n,"","",function(o){return e.call(r,o,i++)}),n}function Q$e(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var bJ={current:null};function oh(){var t=bJ.current;if(t===null)throw Error(xw(321));return t}var J$e={ReactCurrentDispatcher:bJ,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:JF,IsSomeRendererActing:{current:!1},assign:KF};In.Children={map:gM,forEach:function(t,e,r){gM(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return gM(t,function(){e++}),e},toArray:function(t){return gM(t,function(e){return e})||[]},only:function(t){if(!ej(t))throw Error(xw(143));return t}};In.Component=Py;In.PureComponent=XF;In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J$e;In.cloneElement=function(t,e,r){if(t==null)throw Error(xw(267,t));var n=KF({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=JF.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(d in e)yJ.call(e,d)&&!_J.hasOwnProperty(d)&&(n[d]=e[d]===void 0&&f!==void 0?f[d]:e[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){f=Array(d);for(var v=0;v<d;v++)f[v]=arguments[v+2];n.children=f}return{$$typeof:Cy,type:t.type,key:i,ref:o,props:n,_owner:l}};In.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:fJ,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:cJ,_context:t},t.Consumer=t};In.createElement=xJ;In.createFactory=function(t){var e=xJ.bind(null,t);return e.type=t,e};In.createRef=function(){return{current:null}};In.forwardRef=function(t){return{$$typeof:hJ,render:t}};In.isValidElement=ej;In.lazy=function(t){return{$$typeof:dJ,_payload:{_status:-1,_result:t},_init:Q$e}};In.memo=function(t,e){return{$$typeof:pJ,type:t,compare:e===void 0?null:e}};In.useCallback=function(t,e){return oh().useCallback(t,e)};In.useContext=function(t,e){return oh().useContext(t,e)};In.useDebugValue=function(){};In.useEffect=function(t,e){return oh().useEffect(t,e)};In.useImperativeHandle=function(t,e,r){return oh().useImperativeHandle(t,e,r)};In.useLayoutEffect=function(t,e){return oh().useLayoutEffect(t,e)};In.useMemo=function(t,e){return oh().useMemo(t,e)};In.useReducer=function(t,e,r){return oh().useReducer(t,e,r)};In.useRef=function(t){return oh().useRef(t)};In.useState=function(t){return oh().useState(t)};In.version="17.0.2"});var Et=R((efr,EJ)=>{"use strict";p();EJ.exports=wJ()});var CJ=R(Gn=>{"use strict";p();var Oy,Ew,bM,sj;typeof performance=="object"&&typeof performance.now=="function"?(SJ=performance,Gn.unstable_now=function(){return SJ.now()}):(tj=Date,TJ=tj.now(),Gn.unstable_now=function(){return tj.now()-TJ});var SJ,tj,TJ;typeof window=="undefined"||typeof MessageChannel!="function"?(Ry=null,rj=null,nj=function(){if(Ry!==null)try{var t=Gn.unstable_now();Ry(!0,t),Ry=null}catch(e){throw setTimeout(nj,0),e}},Oy=function(t){Ry!==null?setTimeout(Oy,0,t):(Ry=t,setTimeout(nj,0))},Ew=function(t,e){rj=setTimeout(t,e)},bM=function(){clearTimeout(rj)},Gn.unstable_shouldYield=function(){return!1},sj=Gn.unstable_forceFrameRate=function(){}):(IJ=window.setTimeout,AJ=window.clearTimeout,typeof console!="undefined"&&(MJ=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof MJ!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),bw=!1,ww=null,yM=-1,ij=5,oj=0,Gn.unstable_shouldYield=function(){return Gn.unstable_now()>=oj},sj=function(){},Gn.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ij=0<t?Math.floor(1e3/t):5},aj=new MessageChannel,_M=aj.port2,aj.port1.onmessage=function(){if(ww!==null){var t=Gn.unstable_now();oj=t+ij;try{ww(!0,t)?_M.postMessage(null):(bw=!1,ww=null)}catch(e){throw _M.postMessage(null),e}}else bw=!1},Oy=function(t){ww=t,bw||(bw=!0,_M.postMessage(null))},Ew=function(t,e){yM=IJ(function(){t(Gn.unstable_now())},e)},bM=function(){AJ(yM),yM=-1});var Ry,rj,nj,IJ,AJ,MJ,bw,ww,yM,ij,oj,aj,_M;function lj(t,e){var r=t.length;t.push(e);e:for(;;){var n=r-1>>>1,i=t[n];if(i!==void 0&&0<xM(i,e))t[n]=e,t[r]=i,r=n;else break e}}function Wu(t){return t=t[0],t===void 0?null:t}function wM(t){var e=t[0];if(e!==void 0){var r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length;n<i;){var o=2*(n+1)-1,l=t[o],f=o+1,d=t[f];if(l!==void 0&&0>xM(l,r))d!==void 0&&0>xM(d,l)?(t[n]=d,t[f]=r,n=f):(t[n]=l,t[o]=r,n=o);else if(d!==void 0&&0>xM(d,r))t[n]=d,t[f]=r,n=f;else break e}}return e}return null}function xM(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}var Bc=[],Dp=[],eHe=1,Hl=null,Oa=3,EM=!1,eg=!1,Sw=!1;function uj(t){for(var e=Wu(Dp);e!==null;){if(e.callback===null)wM(Dp);else if(e.startTime<=t)wM(Dp),e.sortIndex=e.expirationTime,lj(Bc,e);else break;e=Wu(Dp)}}function cj(t){if(Sw=!1,uj(t),!eg)if(Wu(Bc)!==null)eg=!0,Oy(fj);else{var e=Wu(Dp);e!==null&&Ew(cj,e.startTime-t)}}function fj(t,e){eg=!1,Sw&&(Sw=!1,bM()),EM=!0;var r=Oa;try{for(uj(e),Hl=Wu(Bc);Hl!==null&&(!(Hl.expirationTime>e)||t&&!Gn.unstable_shouldYield());){var n=Hl.callback;if(typeof n=="function"){Hl.callback=null,Oa=Hl.priorityLevel;var i=n(Hl.expirationTime<=e);e=Gn.unstable_now(),typeof i=="function"?Hl.callback=i:Hl===Wu(Bc)&&wM(Bc),uj(e)}else wM(Bc);Hl=Wu(Bc)}if(Hl!==null)var o=!0;else{var l=Wu(Dp);l!==null&&Ew(cj,l.startTime-e),o=!1}return o}finally{Hl=null,Oa=r,EM=!1}}var tHe=sj;Gn.unstable_IdlePriority=5;Gn.unstable_ImmediatePriority=1;Gn.unstable_LowPriority=4;Gn.unstable_NormalPriority=3;Gn.unstable_Profiling=null;Gn.unstable_UserBlockingPriority=2;Gn.unstable_cancelCallback=function(t){t.callback=null};Gn.unstable_continueExecution=function(){eg||EM||(eg=!0,Oy(fj))};Gn.unstable_getCurrentPriorityLevel=function(){return Oa};Gn.unstable_getFirstCallbackNode=function(){return Wu(Bc)};Gn.unstable_next=function(t){switch(Oa){case 1:case 2:case 3:var e=3;break;default:e=Oa}var r=Oa;Oa=e;try{return t()}finally{Oa=r}};Gn.unstable_pauseExecution=function(){};Gn.unstable_requestPaint=tHe;Gn.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=Oa;Oa=t;try{return e()}finally{Oa=r}};Gn.unstable_scheduleCallback=function(t,e,r){var n=Gn.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:eHe++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,lj(Dp,t),Wu(Bc)===null&&t===Wu(Dp)&&(Sw?bM():Sw=!0,Ew(cj,r-n))):(t.sortIndex=i,lj(Bc,t),eg||EM||(eg=!0,Oy(fj))),t};Gn.unstable_wrapCallback=function(t){var e=Oa;return function(){var r=Oa;Oa=e;try{return t.apply(this,arguments)}finally{Oa=r}}}});var RJ=R((ifr,PJ)=>{"use strict";p();PJ.exports=CJ()});var vre=R(Ql=>{"use strict";p();var gC=Et(),Pi=ZF(),Zo=RJ();function qt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!gC)throw Error(qt(227));var Gee=new Set,e1={};function fg(t,e){Jy(t,e),Jy(t+"Capture",e)}function Jy(t,e){for(e1[t]=e,t=0;t<e.length;t++)Gee.add(e[t])}var fh=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),rHe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OJ=Object.prototype.hasOwnProperty,LJ={},DJ={};function nHe(t){return OJ.call(DJ,t)?!0:OJ.call(LJ,t)?!1:rHe.test(t)?DJ[t]=!0:(LJ[t]=!0,!1)}function iHe(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oHe(t,e,r,n){if(e===null||typeof e=="undefined"||iHe(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ss(t,e,r,n,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var pa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pa[t]=new ss(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pa[e]=new ss(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pa[t]=new ss(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pa[t]=new ss(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pa[t]=new ss(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pa[t]=new ss(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pa[t]=new ss(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pa[t]=new ss(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pa[t]=new ss(t,5,!1,t.toLowerCase(),null,!1,!1)});var xz=/[\-:]([a-z])/g;function bz(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xz,bz);pa[e]=new ss(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xz,bz);pa[e]=new ss(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xz,bz);pa[e]=new ss(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pa[t]=new ss(t,1,!1,t.toLowerCase(),null,!1,!1)});pa.xlinkHref=new ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pa[t]=new ss(t,1,!1,t.toLowerCase(),null,!0,!0)});function wz(t,e,r,n){var i=pa.hasOwnProperty(e)?pa[e]:null,o=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");o||(oHe(e,r,i,n)&&(r=null),n||i===null?nHe(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var hg=gC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qw=60103,rg=60106,kp=60107,Ez=60108,Bw=60114,Sz=60109,Tz=60110,vC=60112,Vw=60113,WM=60120,yC=60115,Iz=60116,Az=60121,Mz=60128,$ee=60129,Cz=60130,Dj=60131;typeof Symbol=="function"&&Symbol.for&&(Lo=Symbol.for,qw=Lo("react.element"),rg=Lo("react.portal"),kp=Lo("react.fragment"),Ez=Lo("react.strict_mode"),Bw=Lo("react.profiler"),Sz=Lo("react.provider"),Tz=Lo("react.context"),vC=Lo("react.forward_ref"),Vw=Lo("react.suspense"),WM=Lo("react.suspense_list"),yC=Lo("react.memo"),Iz=Lo("react.lazy"),Az=Lo("react.block"),Lo("react.scope"),Mz=Lo("react.opaque.id"),$ee=Lo("react.debug_trace_mode"),Cz=Lo("react.offscreen"),Dj=Lo("react.legacy_hidden"));var Lo,NJ=typeof Symbol=="function"&&Symbol.iterator;function Tw(t){return t===null||typeof t!="object"?null:(t=NJ&&t[NJ]||t["@@iterator"],typeof t=="function"?t:null)}var hj;function Fw(t){if(hj===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);hj=e&&e[1]||""}return`
`+hj+t}var pj=!1;function SM(t,e){if(!t||pj)return"";pj=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e){if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=n.stack.split(`
`),l=i.length-1,f=o.length-1;1<=l&&0<=f&&i[l]!==o[f];)f--;for(;1<=l&&0<=f;l--,f--)if(i[l]!==o[f]){if(l!==1||f!==1)do if(l--,f--,0>f||i[l]!==o[f])return`
`+i[l].replace(" at new "," at ");while(1<=l&&0<=f);break}}}finally{pj=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Fw(t):""}function aHe(t){switch(t.tag){case 5:return Fw(t.type);case 16:return Fw("Lazy");case 13:return Fw("Suspense");case 19:return Fw("SuspenseList");case 0:case 2:case 15:return t=SM(t.type,!1),t;case 11:return t=SM(t.type.render,!1),t;case 22:return t=SM(t.type._render,!1),t;case 1:return t=SM(t.type,!0),t;default:return""}}function Vy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kp:return"Fragment";case rg:return"Portal";case Bw:return"Profiler";case Ez:return"StrictMode";case Vw:return"Suspense";case WM:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tz:return(t.displayName||"Context")+".Consumer";case Sz:return(t._context.displayName||"Context")+".Provider";case vC:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case yC:return Vy(t.type);case Az:return Vy(t._render);case Iz:e=t._payload,t=t._init;try{return Vy(t(e))}catch(r){}}return null}function Zp(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Hee(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sHe(t){var e=Hee(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function TM(t){t._valueTracker||(t._valueTracker=sHe(t))}function Wee(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Hee(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ZM(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Nj(t,e){var r=e.checked;return Pi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:t._wrapperState.initialChecked})}function kJ(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Zp(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zee(t,e){e=e.checked,e!=null&&wz(t,"checked",e,!1)}function kj(t,e){Zee(t,e);var r=Zp(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qj(t,e.type,r):e.hasOwnProperty("defaultValue")&&qj(t,e.type,Zp(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qJ(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function qj(t,e,r){(e!=="number"||ZM(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function lHe(t){var e="";return gC.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function Fj(t,e){return t=Pi({children:void 0},e),(e=lHe(e.children))&&(t.children=e),t}function Gy(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Zp(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function jj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qt(91));return Pi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function FJ(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(qt(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(qt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Zp(r)}}function Yee(t,e){var r=Zp(e.value),n=Zp(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function jJ(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var zj={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Kee(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Kee(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var IM,Xee=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==zj.svg||"innerHTML"in t)t.innerHTML=e;else{for(IM=IM||document.createElement("div"),IM.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=IM.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function t1(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Gw={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uHe=["Webkit","ms","Moz","O"];Object.keys(Gw).forEach(function(t){uHe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gw[e]=Gw[t]})});function Qee(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Gw.hasOwnProperty(t)&&Gw[t]?(""+e).trim():e+"px"}function Jee(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Qee(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var cHe=Pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bj(t,e){if(e){if(cHe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qt(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(qt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qt(62))}}function Vj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Pz(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gj=null,$y=null,Hy=null;function zJ(t){if(t=m1(t)){if(typeof Gj!="function")throw Error(qt(280));var e=t.stateNode;e&&(e=SC(e),Gj(t.stateNode,t.type,e))}}function ete(t){$y?Hy?Hy.push(t):Hy=[t]:$y=t}function tte(){if($y){var t=$y,e=Hy;if(Hy=$y=null,zJ(t),e)for(t=0;t<e.length;t++)zJ(e[t])}}function Rz(t,e){return t(e)}function rte(t,e,r,n,i){return t(e,r,n,i)}function Oz(){}var nte=Rz,ng=!1,dj=!1;function Lz(){($y!==null||Hy!==null)&&(Oz(),tte())}function fHe(t,e,r){if(dj)return t(e,r);dj=!0;try{return nte(t,e,r)}finally{dj=!1,Lz()}}function r1(t,e){var r=t.stateNode;if(r===null)return null;var n=SC(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(qt(231,e,typeof r));return r}var $j=!1;if(fh)try{Ly={},Object.defineProperty(Ly,"passive",{get:function(){$j=!0}}),window.addEventListener("test",Ly,Ly),window.removeEventListener("test",Ly,Ly)}catch(t){$j=!1}var Ly;function hHe(t,e,r,n,i,o,l,f,d){var v=Array.prototype.slice.call(arguments,3);try{e.apply(r,v)}catch(x){this.onError(x)}}var $w=!1,YM=null,KM=!1,Hj=null,pHe={onError:function(t){$w=!0,YM=t}};function dHe(t,e,r,n,i,o,l,f,d){$w=!1,YM=null,hHe.apply(pHe,arguments)}function mHe(t,e,r,n,i,o,l,f,d){if(dHe.apply(this,arguments),$w){if($w){var v=YM;$w=!1,YM=null}else throw Error(qt(198));KM||(KM=!0,Hj=v)}}function pg(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function ite(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function UJ(t){if(pg(t)!==t)throw Error(qt(188))}function gHe(t){var e=t.alternate;if(!e){if(e=pg(t),e===null)throw Error(qt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return UJ(i),t;if(o===n)return UJ(i),e;o=o.sibling}throw Error(qt(188))}if(r.return!==n.return)r=i,n=o;else{for(var l=!1,f=i.child;f;){if(f===r){l=!0,r=i,n=o;break}if(f===n){l=!0,n=i,r=o;break}f=f.sibling}if(!l){for(f=o.child;f;){if(f===r){l=!0,r=o,n=i;break}if(f===n){l=!0,n=o,r=i;break}f=f.sibling}if(!l)throw Error(qt(189))}}if(r.alternate!==n)throw Error(qt(190))}if(r.tag!==3)throw Error(qt(188));return r.stateNode.current===r?t:e}function ote(t){if(t=gHe(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function BJ(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var ate,Dz,ste,lte,Wj=!1,Vc=[],zp=null,Up=null,Bp=null,n1=new Map,i1=new Map,Iw=[],VJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zj(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function GJ(t,e){switch(t){case"focusin":case"focusout":zp=null;break;case"dragenter":case"dragleave":Up=null;break;case"mouseover":case"mouseout":Bp=null;break;case"pointerover":case"pointerout":n1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":i1.delete(e.pointerId)}}function Aw(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t=Zj(e,r,n,i,o),e!==null&&(e=m1(e),e!==null&&Dz(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vHe(t,e,r,n,i){switch(e){case"focusin":return zp=Aw(zp,t,e,r,n,i),!0;case"dragenter":return Up=Aw(Up,t,e,r,n,i),!0;case"mouseover":return Bp=Aw(Bp,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return n1.set(o,Aw(n1.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,i1.set(o,Aw(i1.get(o)||null,t,e,r,n,i)),!0}return!1}function yHe(t){var e=ig(t.target);if(e!==null){var r=pg(e);if(r!==null){if(e=r.tag,e===13){if(e=ite(r),e!==null){t.blockedOn=e,lte(t.lanePriority,function(){Zo.unstable_runWithPriority(t.priority,function(){ste(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qM(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Fz(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=m1(r),e!==null&&Dz(e),t.blockedOn=r,!1;e.shift()}return!0}function $J(t,e,r){qM(t)&&r.delete(e)}function _He(){for(Wj=!1;0<Vc.length;){var t=Vc[0];if(t.blockedOn!==null){t=m1(t.blockedOn),t!==null&&ate(t);break}for(var e=t.targetContainers;0<e.length;){var r=Fz(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&Vc.shift()}zp!==null&&qM(zp)&&(zp=null),Up!==null&&qM(Up)&&(Up=null),Bp!==null&&qM(Bp)&&(Bp=null),n1.forEach($J),i1.forEach($J)}function Mw(t,e){t.blockedOn===e&&(t.blockedOn=null,Wj||(Wj=!0,Zo.unstable_scheduleCallback(Zo.unstable_NormalPriority,_He)))}function ute(t){function e(i){return Mw(i,t)}if(0<Vc.length){Mw(Vc[0],t);for(var r=1;r<Vc.length;r++){var n=Vc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(zp!==null&&Mw(zp,t),Up!==null&&Mw(Up,t),Bp!==null&&Mw(Bp,t),n1.forEach(e),i1.forEach(e),r=0;r<Iw.length;r++)n=Iw[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Iw.length&&(r=Iw[0],r.blockedOn===null);)yHe(r),r.blockedOn===null&&Iw.shift()}function AM(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var qy={animationend:AM("Animation","AnimationEnd"),animationiteration:AM("Animation","AnimationIteration"),animationstart:AM("Animation","AnimationStart"),transitionend:AM("Transition","TransitionEnd")},mj={},cte={};fh&&(cte=document.createElement("div").style,"AnimationEvent"in window||(delete qy.animationend.animation,delete qy.animationiteration.animation,delete qy.animationstart.animation),"TransitionEvent"in window||delete qy.transitionend.transition);function _C(t){if(mj[t])return mj[t];if(!qy[t])return t;var e=qy[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in cte)return mj[t]=e[r];return t}var fte=_C("animationend"),hte=_C("animationiteration"),pte=_C("animationstart"),dte=_C("transitionend"),mte=new Map,Nz=new Map,xHe=["abort","abort",fte,"animationEnd",hte,"animationIteration",pte,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",dte,"transitionEnd","waiting","waiting"];function kz(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Nz.set(n,e),mte.set(n,i),fg(i,[n])}}var bHe=Zo.unstable_now;bHe();var ci=8;function Ny(t){if((1&t)!==0)return ci=15,1;if((2&t)!==0)return ci=14,2;if((4&t)!==0)return ci=13,4;var e=24&t;return e!==0?(ci=12,e):(t&32)!==0?(ci=11,32):(e=192&t,e!==0?(ci=10,e):(t&256)!==0?(ci=9,256):(e=3584&t,e!==0?(ci=8,e):(t&4096)!==0?(ci=7,4096):(e=4186112&t,e!==0?(ci=6,e):(e=62914560&t,e!==0?(ci=5,e):t&67108864?(ci=4,67108864):(t&134217728)!==0?(ci=3,134217728):(e=805306368&t,e!==0?(ci=2,e):(1073741824&t)!==0?(ci=1,1073741824):(ci=8,t))))))}function wHe(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function EHe(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(qt(358,t))}}function o1(t,e){var r=t.pendingLanes;if(r===0)return ci=0;var n=0,i=0,o=t.expiredLanes,l=t.suspendedLanes,f=t.pingedLanes;if(o!==0)n=o,i=ci=15;else if(o=r&134217727,o!==0){var d=o&~l;d!==0?(n=Ny(d),i=ci):(f&=o,f!==0&&(n=Ny(f),i=ci))}else o=r&~l,o!==0?(n=Ny(o),i=ci):f!==0&&(n=Ny(f),i=ci);if(n===0)return 0;if(n=31-Yp(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&(e&l)===0){if(Ny(e),i<=ci)return e;ci=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Yp(e),i=1<<r,n|=t[r],e&=~i;return n}function gte(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XM(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=ky(24&~e),t===0?XM(10,e):t;case 10:return t=ky(192&~e),t===0?XM(8,e):t;case 8:return t=ky(3584&~e),t===0&&(t=ky(4186112&~e),t===0&&(t=512)),t;case 2:return e=ky(805306368&~e),e===0&&(e=268435456),e}throw Error(qt(358,t))}function ky(t){return t&-t}function gj(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function xC(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-Yp(e),t[e]=r}var Yp=Math.clz32?Math.clz32:IHe,SHe=Math.log,THe=Math.LN2;function IHe(t){return t===0?32:31-(SHe(t)/THe|0)|0}var AHe=Zo.unstable_UserBlockingPriority,MHe=Zo.unstable_runWithPriority,FM=!0;function CHe(t,e,r,n){ng||Oz();var i=qz,o=ng;ng=!0;try{rte(i,t,e,r,n)}finally{(ng=o)||Lz()}}function PHe(t,e,r,n){MHe(AHe,qz.bind(null,t,e,r,n))}function qz(t,e,r,n){if(FM){var i;if((i=(e&4)===0)&&0<Vc.length&&-1<VJ.indexOf(t))t=Zj(null,t,e,r,n),Vc.push(t);else{var o=Fz(t,e,r,n);if(o===null)i&&GJ(t,n);else{if(i){if(-1<VJ.indexOf(t)){t=Zj(o,t,e,r,n),Vc.push(t);return}if(vHe(o,t,e,r,n))return;GJ(t,n)}Cte(t,e,n,null,r)}}}}function Fz(t,e,r,n){var i=Pz(n);if(i=ig(i),i!==null){var o=pg(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=ite(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Cte(t,e,n,i,r),null}var qp=null,jz=null,jM=null;function vte(){if(jM)return jM;var t,e=jz,r=e.length,n,i="value"in qp?qp.value:qp.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var l=r-t;for(n=1;n<=l&&e[r-n]===i[o-n];n++);return jM=i.slice(t,1<n?1-n:void 0)}function zM(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function MM(){return!0}function HJ(){return!1}function El(t){function e(r,n,i,o,l){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(r=t[f],this[f]=r?r(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?MM:HJ,this.isPropagationStopped=HJ,this}return Pi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=MM)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=MM)},persist:function(){},isPersistent:MM}),e}var n_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zz=El(n_),d1=Pi({},n_,{view:0,detail:0}),RHe=El(d1),vj,yj,Cw,bC=Pi({},d1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uz,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cw&&(Cw&&t.type==="mousemove"?(vj=t.screenX-Cw.screenX,yj=t.screenY-Cw.screenY):yj=vj=0,Cw=t),vj)},movementY:function(t){return"movementY"in t?t.movementY:yj}}),WJ=El(bC),OHe=Pi({},bC,{dataTransfer:0}),LHe=El(OHe),DHe=Pi({},d1,{relatedTarget:0}),_j=El(DHe),NHe=Pi({},n_,{animationName:0,elapsedTime:0,pseudoElement:0}),kHe=El(NHe),qHe=Pi({},n_,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FHe=El(qHe),jHe=Pi({},n_,{data:0}),ZJ=El(jHe),zHe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UHe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BHe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VHe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BHe[t])?!!e[t]:!1}function Uz(){return VHe}var GHe=Pi({},d1,{key:function(t){if(t.key){var e=zHe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zM(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UHe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uz,charCode:function(t){return t.type==="keypress"?zM(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zM(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$He=El(GHe),HHe=Pi({},bC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YJ=El(HHe),WHe=Pi({},d1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uz}),ZHe=El(WHe),YHe=Pi({},n_,{propertyName:0,elapsedTime:0,pseudoElement:0}),KHe=El(YHe),XHe=Pi({},bC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QHe=El(XHe),JHe=[9,13,27,32],Bz=fh&&"CompositionEvent"in window,Hw=null;fh&&"documentMode"in document&&(Hw=document.documentMode);var eWe=fh&&"TextEvent"in window&&!Hw,yte=fh&&(!Bz||Hw&&8<Hw&&11>=Hw),KJ=" ",XJ=!1;function _te(t,e){switch(t){case"keyup":return JHe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xte(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fy=!1;function tWe(t,e){switch(t){case"compositionend":return xte(e);case"keypress":return e.which!==32?null:(XJ=!0,KJ);case"textInput":return t=e.data,t===KJ&&XJ?null:t;default:return null}}function rWe(t,e){if(Fy)return t==="compositionend"||!Bz&&_te(t,e)?(t=vte(),jM=jz=qp=null,Fy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yte&&e.locale!=="ko"?null:e.data;default:return null}}var nWe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QJ(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nWe[t.type]:e==="textarea"}function bte(t,e,r,n){ete(n),e=QM(e,"onChange"),0<e.length&&(r=new zz("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ww=null,a1=null;function iWe(t){Ite(t,0)}function wC(t){var e=zy(t);if(Wee(e))return t}function oWe(t,e){if(t==="change")return e}var wte=!1;fh&&(fh?(PM="oninput"in document,PM||(xj=document.createElement("div"),xj.setAttribute("oninput","return;"),PM=typeof xj.oninput=="function"),CM=PM):CM=!1,wte=CM&&(!document.documentMode||9<document.documentMode));var CM,PM,xj;function JJ(){Ww&&(Ww.detachEvent("onpropertychange",Ete),a1=Ww=null)}function Ete(t){if(t.propertyName==="value"&&wC(a1)){var e=[];if(bte(e,a1,t,Pz(t)),t=iWe,ng)t(e);else{ng=!0;try{Rz(t,e)}finally{ng=!1,Lz()}}}}function aWe(t,e,r){t==="focusin"?(JJ(),Ww=e,a1=r,Ww.attachEvent("onpropertychange",Ete)):t==="focusout"&&JJ()}function sWe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wC(a1)}function lWe(t,e){if(t==="click")return wC(e)}function uWe(t,e){if(t==="input"||t==="change")return wC(e)}function cWe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wl=typeof Object.is=="function"?Object.is:cWe,fWe=Object.prototype.hasOwnProperty;function s1(t,e){if(Wl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!fWe.call(e,r[n])||!Wl(t[r[n]],e[r[n]]))return!1;return!0}function eee(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tee(t,e){var r=eee(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=eee(r)}}function Ste(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ste(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ree(){for(var t=window,e=ZM();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch(n){r=!1}if(r)t=e.contentWindow;else break;e=ZM(t.document)}return e}function Yj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var hWe=fh&&"documentMode"in document&&11>=document.documentMode,jy=null,Kj=null,Zw=null,Xj=!1;function nee(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xj||jy==null||jy!==ZM(n)||(n=jy,"selectionStart"in n&&Yj(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Zw&&s1(Zw,n)||(Zw=n,n=QM(Kj,"onSelect"),0<n.length&&(e=new zz("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=jy)))}kz("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);kz("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);kz(xHe,2);for(bj="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),RM=0;RM<bj.length;RM++)Nz.set(bj[RM],0);var bj,RM;Jy("onMouseEnter",["mouseout","mouseover"]);Jy("onMouseLeave",["mouseout","mouseover"]);Jy("onPointerEnter",["pointerout","pointerover"]);Jy("onPointerLeave",["pointerout","pointerover"]);fg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fg("onBeforeInput",["compositionend","keypress","textInput","paste"]);fg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tte=new Set("cancel close invalid load scroll toggle".split(" ").concat(jw));function iee(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,mHe(n,e,void 0,t),t.currentTarget=null}function Ite(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var l=n.length-1;0<=l;l--){var f=n[l],d=f.instance,v=f.currentTarget;if(f=f.listener,d!==o&&i.isPropagationStopped())break e;iee(i,f,v),o=d}else for(l=0;l<n.length;l++){if(f=n[l],d=f.instance,v=f.currentTarget,f=f.listener,d!==o&&i.isPropagationStopped())break e;iee(i,f,v),o=d}}}if(KM)throw t=Hj,KM=!1,Hj=null,t}function Ei(t,e){var r=Rte(e),n=t+"__bubble";r.has(n)||(Mte(e,t,2,!1),r.add(n))}var oee="_reactListening"+Math.random().toString(36).slice(2);function Ate(t){t[oee]||(t[oee]=!0,Gee.forEach(function(e){Tte.has(e)||aee(e,!1,t,null),aee(e,!0,t,null)}))}function aee(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(t==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),n!==null&&!e&&Tte.has(t)){if(t!=="scroll")return;i|=2,o=n}var l=Rte(o),f=t+"__"+(e?"capture":"bubble");l.has(f)||(e&&(i|=4),Mte(o,t,i,e),l.add(f))}function Mte(t,e,r,n){var i=Nz.get(e);switch(i===void 0?2:i){case 0:i=CHe;break;case 1:i=PHe;break;default:i=qz}r=i.bind(null,e,r,t),i=void 0,!$j||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Cte(t,e,r,n,i){var o=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var f=n.stateNode.containerInfo;if(f===i||f.nodeType===8&&f.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;f!==null;){if(l=ig(f),l===null)return;if(d=l.tag,d===5||d===6){n=o=l;continue e}f=f.parentNode}}n=n.return}fHe(function(){var v=o,x=Pz(r),b=[];e:{var A=mte.get(t);if(A!==void 0){var P=zz,N=t;switch(t){case"keypress":if(zM(r)===0)break e;case"keydown":case"keyup":P=$He;break;case"focusin":N="focus",P=_j;break;case"focusout":N="blur",P=_j;break;case"beforeblur":case"afterblur":P=_j;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=WJ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=LHe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=ZHe;break;case fte:case hte:case pte:P=kHe;break;case dte:P=KHe;break;case"scroll":P=RHe;break;case"wheel":P=QHe;break;case"copy":case"cut":case"paste":P=FHe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=YJ}var j=(e&4)!==0,D=!j&&t==="scroll",F=j?A!==null?A+"Capture":null:A;j=[];for(var U=v,$;U!==null;){$=U;var Z=$.stateNode;if($.tag===5&&Z!==null&&($=Z,F!==null&&(Z=r1(U,F),Z!=null&&j.push(l1(U,Z,$)))),D)break;U=U.return}0<j.length&&(A=new P(A,N,null,r,x),b.push({event:A,listeners:j}))}}if((e&7)===0){e:{if(A=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",A&&(e&16)===0&&(N=r.relatedTarget||r.fromElement)&&(ig(N)||N[i_]))break e;if((P||A)&&(A=x.window===x?x:(A=x.ownerDocument)?A.defaultView||A.parentWindow:window,P?(N=r.relatedTarget||r.toElement,P=v,N=N?ig(N):null,N!==null&&(D=pg(N),N!==D||N.tag!==5&&N.tag!==6)&&(N=null)):(P=null,N=v),P!==N)){if(j=WJ,Z="onMouseLeave",F="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(j=YJ,Z="onPointerLeave",F="onPointerEnter",U="pointer"),D=P==null?A:zy(P),$=N==null?A:zy(N),A=new j(Z,U+"leave",P,r,x),A.target=D,A.relatedTarget=$,Z=null,ig(x)===v&&(j=new j(F,U+"enter",N,r,x),j.target=$,j.relatedTarget=D,Z=j),D=Z,P&&N)t:{for(j=P,F=N,U=0,$=j;$;$=Dy($))U++;for($=0,Z=F;Z;Z=Dy(Z))$++;for(;0<U-$;)j=Dy(j),U--;for(;0<$-U;)F=Dy(F),$--;for(;U--;){if(j===F||F!==null&&j===F.alternate)break t;j=Dy(j),F=Dy(F)}j=null}else j=null;P!==null&&see(b,A,P,j,!1),N!==null&&D!==null&&see(b,D,N,j,!0)}}e:{if(A=v?zy(v):window,P=A.nodeName&&A.nodeName.toLowerCase(),P==="select"||P==="input"&&A.type==="file")var ie=oWe;else if(QJ(A)){if(wte)ie=uWe;else{ie=sWe;var ne=aWe}}else(P=A.nodeName)&&P.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(ie=lWe);if(ie&&(ie=ie(t,v))){bte(b,ie,r,x);break e}ne&&ne(t,A,v),t==="focusout"&&(ne=A._wrapperState)&&ne.controlled&&A.type==="number"&&qj(A,"number",A.value)}switch(ne=v?zy(v):window,t){case"focusin":(QJ(ne)||ne.contentEditable==="true")&&(jy=ne,Kj=v,Zw=null);break;case"focusout":Zw=Kj=jy=null;break;case"mousedown":Xj=!0;break;case"contextmenu":case"mouseup":case"dragend":Xj=!1,nee(b,r,x);break;case"selectionchange":if(hWe)break;case"keydown":case"keyup":nee(b,r,x)}var ae;if(Bz)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Fy?_te(t,r)&&(ye="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ye="onCompositionStart");ye&&(yte&&r.locale!=="ko"&&(Fy||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Fy&&(ae=vte()):(qp=x,jz="value"in qp?qp.value:qp.textContent,Fy=!0)),ne=QM(v,ye),0<ne.length&&(ye=new ZJ(ye,t,null,r,x),b.push({event:ye,listeners:ne}),ae?ye.data=ae:(ae=xte(r),ae!==null&&(ye.data=ae)))),(ae=eWe?tWe(t,r):rWe(t,r))&&(v=QM(v,"onBeforeInput"),0<v.length&&(x=new ZJ("onBeforeInput","beforeinput",null,r,x),b.push({event:x,listeners:v}),x.data=ae))}Ite(b,e)})}function l1(t,e,r){return{instance:t,listener:e,currentTarget:r}}function QM(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=r1(t,r),o!=null&&n.unshift(l1(t,o,i)),o=r1(t,e),o!=null&&n.push(l1(t,o,i))),t=t.return}return n}function Dy(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function see(t,e,r,n,i){for(var o=e._reactName,l=[];r!==null&&r!==n;){var f=r,d=f.alternate,v=f.stateNode;if(d!==null&&d===n)break;f.tag===5&&v!==null&&(f=v,i?(d=r1(r,o),d!=null&&l.unshift(l1(r,d,f))):i||(d=r1(r,o),d!=null&&l.push(l1(r,d,f)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}function JM(){}var wj=null,Ej=null;function Pte(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Qj(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lee=typeof setTimeout=="function"?setTimeout:void 0,pWe=typeof clearTimeout=="function"?clearTimeout:void 0;function Vz(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Wy(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function uee(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Sj=0;function dWe(t){return{$$typeof:Mz,toString:t,valueOf:t}}var EC=Math.random().toString(36).slice(2),Fp="__reactFiber$"+EC,eC="__reactProps$"+EC,i_="__reactContainer$"+EC,cee="__reactEvents$"+EC;function ig(t){var e=t[Fp];if(e)return e;for(var r=t.parentNode;r;){if(e=r[i_]||r[Fp]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=uee(t);t!==null;){if(r=t[Fp])return r;t=uee(t)}return e}t=r,r=t.parentNode}return null}function m1(t){return t=t[Fp]||t[i_],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(qt(33))}function SC(t){return t[eC]||null}function Rte(t){var e=t[cee];return e===void 0&&(e=t[cee]=new Set),e}var Jj=[],Uy=-1;function Jp(t){return{current:t}}function Si(t){0>Uy||(t.current=Jj[Uy],Jj[Uy]=null,Uy--)}function Ki(t,e){Uy++,Jj[Uy]=t.current,t.current=e}var Kp={},ka=Jp(Kp),Os=Jp(!1),lg=Kp;function e_(t,e){var r=t.type.contextTypes;if(!r)return Kp;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ls(t){return t=t.childContextTypes,t!=null}function tC(){Si(Os),Si(ka)}function fee(t,e,r){if(ka.current!==Kp)throw Error(qt(168));Ki(ka,e),Ki(Os,r)}function Ote(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(qt(108,Vy(e)||"Unknown",i));return Pi({},r,n)}function UM(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kp,lg=ka.current,Ki(ka,t),Ki(Os,Os.current),!0}function hee(t,e,r){var n=t.stateNode;if(!n)throw Error(qt(169));r?(t=Ote(t,e,lg),n.__reactInternalMemoizedMergedChildContext=t,Si(Os),Si(ka),Ki(ka,t)):Si(Os),Ki(Os,r)}var Gz=null,sg=null,mWe=Zo.unstable_runWithPriority,$z=Zo.unstable_scheduleCallback,ez=Zo.unstable_cancelCallback,gWe=Zo.unstable_shouldYield,pee=Zo.unstable_requestPaint,tz=Zo.unstable_now,vWe=Zo.unstable_getCurrentPriorityLevel,TC=Zo.unstable_ImmediatePriority,Lte=Zo.unstable_UserBlockingPriority,Dte=Zo.unstable_NormalPriority,Nte=Zo.unstable_LowPriority,kte=Zo.unstable_IdlePriority,Tj={},yWe=pee!==void 0?pee:function(){},ah=null,BM=null,Ij=!1,dee=tz(),Da=1e4>dee?tz:function(){return tz()-dee};function t_(){switch(vWe()){case TC:return 99;case Lte:return 98;case Dte:return 97;case Nte:return 96;case kte:return 95;default:throw Error(qt(332))}}function qte(t){switch(t){case 99:return TC;case 98:return Lte;case 97:return Dte;case 96:return Nte;case 95:return kte;default:throw Error(qt(332))}}function ug(t,e){return t=qte(t),mWe(t,e)}function u1(t,e,r){return t=qte(t),$z(t,e,r)}function Zc(){if(BM!==null){var t=BM;BM=null,ez(t)}Fte()}function Fte(){if(!Ij&&ah!==null){Ij=!0;var t=0;try{var e=ah;ug(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),ah=null}catch(r){throw ah!==null&&(ah=ah.slice(t+1)),$z(TC,Zc),r}finally{Ij=!1}}}var _We=hg.ReactCurrentBatchConfig;function Zu(t,e){if(t&&t.defaultProps){e=Pi({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var rC=Jp(null),nC=null,By=null,iC=null;function Hz(){iC=By=nC=null}function Wz(t){var e=rC.current;Si(rC),t.type._context._currentValue=e}function jte(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function Zy(t,e){nC=t,iC=By=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Yu=!0),t.firstContext=null)}function Kl(t,e){if(iC!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(iC=t,e=1073741823),e={context:t,observedBits:e,next:null},By===null){if(nC===null)throw Error(qt(308));By=e,nC.dependencies={lanes:0,firstContext:e,responders:null}}else By=By.next=e;return t._currentValue}var Np=!1;function Zz(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function zte(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vp(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gp(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function mee(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function c1(t,e,r,n){var i=t.updateQueue;Np=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,f=i.shared.pending;if(f!==null){i.shared.pending=null;var d=f,v=d.next;d.next=null,l===null?o=v:l.next=v,l=d;var x=t.alternate;if(x!==null){x=x.updateQueue;var b=x.lastBaseUpdate;b!==l&&(b===null?x.firstBaseUpdate=v:b.next=v,x.lastBaseUpdate=d)}}if(o!==null){b=i.baseState,l=0,x=v=d=null;do{f=o.lane;var A=o.eventTime;if((n&f)===f){x!==null&&(x=x.next={eventTime:A,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var P=t,N=o;switch(f=e,A=r,N.tag){case 1:if(P=N.payload,typeof P=="function"){b=P.call(A,b,f);break e}b=P;break e;case 3:P.flags=P.flags&-4097|64;case 0:if(P=N.payload,f=typeof P=="function"?P.call(A,b,f):P,f==null)break e;b=Pi({},b,f);break e;case 2:Np=!0}}o.callback!==null&&(t.flags|=32,f=i.effects,f===null?i.effects=[o]:f.push(o))}else A={eventTime:A,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(v=x=A,d=b):x=x.next=A,l|=f;if(o=o.next,o===null){if(f=i.shared.pending,f===null)break;o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);x===null&&(d=b),i.baseState=d,i.firstBaseUpdate=v,i.lastBaseUpdate=x,v1|=l,t.lanes=l,t.memoizedState=b}}function gee(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(qt(191,i));i.call(n)}}}var Ute=new gC.Component().refs;function oC(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Pi({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var IC={isMounted:function(t){return(t=t._reactInternals)?pg(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=wl(),i=$p(t),o=Vp(n,i);o.payload=e,r!=null&&(o.callback=r),Gp(t,o),Hp(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=wl(),i=$p(t),o=Vp(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),Gp(t,o),Hp(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=wl(),n=$p(t),i=Vp(r,n);i.tag=2,e!=null&&(i.callback=e),Gp(t,i),Hp(t,n,r)}};function vee(t,e,r,n,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,l):e.prototype&&e.prototype.isPureReactComponent?!s1(r,n)||!s1(i,o):!0}function Bte(t,e,r){var n=!1,i=Kp,o=e.contextType;return typeof o=="object"&&o!==null?o=Kl(o):(i=Ls(e)?lg:ka.current,n=e.contextTypes,o=(n=n!=null)?e_(t,i):Kp),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=IC,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function yee(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&IC.enqueueReplaceState(e,e.state,null)}function rz(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Ute,Zz(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Kl(o):(o=Ls(e)?lg:ka.current,i.context=e_(t,o)),c1(t,r,i,n),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(oC(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&IC.enqueueReplaceState(i,i.state,null),c1(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var OM=Array.isArray;function Pw(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(qt(309));var n=r.stateNode}if(!n)throw Error(qt(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=n.refs;l===Ute&&(l=n.refs={}),o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(qt(284));if(!r._owner)throw Error(qt(290,t))}return t}function LM(t,e){if(t.type!=="textarea")throw Error(qt(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Vte(t){function e(D,F){if(t){var U=D.lastEffect;U!==null?(U.nextEffect=F,D.lastEffect=F):D.firstEffect=D.lastEffect=F,F.nextEffect=null,F.flags=8}}function r(D,F){if(!t)return null;for(;F!==null;)e(D,F),F=F.sibling;return null}function n(D,F){for(D=new Map;F!==null;)F.key!==null?D.set(F.key,F):D.set(F.index,F),F=F.sibling;return D}function i(D,F){return D=Qp(D,F),D.index=0,D.sibling=null,D}function o(D,F,U){return D.index=U,t?(U=D.alternate,U!==null?(U=U.index,U<F?(D.flags=2,F):U):(D.flags=2,F)):F}function l(D){return t&&D.alternate===null&&(D.flags=2),D}function f(D,F,U,$){return F===null||F.tag!==6?(F=Rj(U,D.mode,$),F.return=D,F):(F=i(F,U),F.return=D,F)}function d(D,F,U,$){return F!==null&&F.elementType===U.type?($=i(F,U.props),$.ref=Pw(D,F,U),$.return=D,$):($=HM(U.type,U.key,U.props,null,D.mode,$),$.ref=Pw(D,F,U),$.return=D,$)}function v(D,F,U,$){return F===null||F.tag!==4||F.stateNode.containerInfo!==U.containerInfo||F.stateNode.implementation!==U.implementation?(F=Oj(U,D.mode,$),F.return=D,F):(F=i(F,U.children||[]),F.return=D,F)}function x(D,F,U,$,Z){return F===null||F.tag!==7?(F=Qy(U,D.mode,$,Z),F.return=D,F):(F=i(F,U),F.return=D,F)}function b(D,F,U){if(typeof F=="string"||typeof F=="number")return F=Rj(""+F,D.mode,U),F.return=D,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case qw:return U=HM(F.type,F.key,F.props,null,D.mode,U),U.ref=Pw(D,null,F),U.return=D,U;case rg:return F=Oj(F,D.mode,U),F.return=D,F}if(OM(F)||Tw(F))return F=Qy(F,D.mode,U,null),F.return=D,F;LM(D,F)}return null}function A(D,F,U,$){var Z=F!==null?F.key:null;if(typeof U=="string"||typeof U=="number")return Z!==null?null:f(D,F,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case qw:return U.key===Z?U.type===kp?x(D,F,U.props.children,$,Z):d(D,F,U,$):null;case rg:return U.key===Z?v(D,F,U,$):null}if(OM(U)||Tw(U))return Z!==null?null:x(D,F,U,$,null);LM(D,U)}return null}function P(D,F,U,$,Z){if(typeof $=="string"||typeof $=="number")return D=D.get(U)||null,f(F,D,""+$,Z);if(typeof $=="object"&&$!==null){switch($.$$typeof){case qw:return D=D.get($.key===null?U:$.key)||null,$.type===kp?x(F,D,$.props.children,Z,$.key):d(F,D,$,Z);case rg:return D=D.get($.key===null?U:$.key)||null,v(F,D,$,Z)}if(OM($)||Tw($))return D=D.get(U)||null,x(F,D,$,Z,null);LM(F,$)}return null}function N(D,F,U,$){for(var Z=null,ie=null,ne=F,ae=F=0,ye=null;ne!==null&&ae<U.length;ae++){ne.index>ae?(ye=ne,ne=null):ye=ne.sibling;var ge=A(D,ne,U[ae],$);if(ge===null){ne===null&&(ne=ye);break}t&&ne&&ge.alternate===null&&e(D,ne),F=o(ge,F,ae),ie===null?Z=ge:ie.sibling=ge,ie=ge,ne=ye}if(ae===U.length)return r(D,ne),Z;if(ne===null){for(;ae<U.length;ae++)ne=b(D,U[ae],$),ne!==null&&(F=o(ne,F,ae),ie===null?Z=ne:ie.sibling=ne,ie=ne);return Z}for(ne=n(D,ne);ae<U.length;ae++)ye=P(ne,D,ae,U[ae],$),ye!==null&&(t&&ye.alternate!==null&&ne.delete(ye.key===null?ae:ye.key),F=o(ye,F,ae),ie===null?Z=ye:ie.sibling=ye,ie=ye);return t&&ne.forEach(function(de){return e(D,de)}),Z}function j(D,F,U,$){var Z=Tw(U);if(typeof Z!="function")throw Error(qt(150));if(U=Z.call(U),U==null)throw Error(qt(151));for(var ie=Z=null,ne=F,ae=F=0,ye=null,ge=U.next();ne!==null&&!ge.done;ae++,ge=U.next()){ne.index>ae?(ye=ne,ne=null):ye=ne.sibling;var de=A(D,ne,ge.value,$);if(de===null){ne===null&&(ne=ye);break}t&&ne&&de.alternate===null&&e(D,ne),F=o(de,F,ae),ie===null?Z=de:ie.sibling=de,ie=de,ne=ye}if(ge.done)return r(D,ne),Z;if(ne===null){for(;!ge.done;ae++,ge=U.next())ge=b(D,ge.value,$),ge!==null&&(F=o(ge,F,ae),ie===null?Z=ge:ie.sibling=ge,ie=ge);return Z}for(ne=n(D,ne);!ge.done;ae++,ge=U.next())ge=P(ne,D,ae,ge.value,$),ge!==null&&(t&&ge.alternate!==null&&ne.delete(ge.key===null?ae:ge.key),F=o(ge,F,ae),ie===null?Z=ge:ie.sibling=ge,ie=ge);return t&&ne.forEach(function(be){return e(D,be)}),Z}return function(D,F,U,$){var Z=typeof U=="object"&&U!==null&&U.type===kp&&U.key===null;Z&&(U=U.props.children);var ie=typeof U=="object"&&U!==null;if(ie)switch(U.$$typeof){case qw:e:{for(ie=U.key,Z=F;Z!==null;){if(Z.key===ie){switch(Z.tag){case 7:if(U.type===kp){r(D,Z.sibling),F=i(Z,U.props.children),F.return=D,D=F;break e}break;default:if(Z.elementType===U.type){r(D,Z.sibling),F=i(Z,U.props),F.ref=Pw(D,Z,U),F.return=D,D=F;break e}}r(D,Z);break}else e(D,Z);Z=Z.sibling}U.type===kp?(F=Qy(U.props.children,D.mode,$,U.key),F.return=D,D=F):($=HM(U.type,U.key,U.props,null,D.mode,$),$.ref=Pw(D,F,U),$.return=D,D=$)}return l(D);case rg:e:{for(Z=U.key;F!==null;){if(F.key===Z){if(F.tag===4&&F.stateNode.containerInfo===U.containerInfo&&F.stateNode.implementation===U.implementation){r(D,F.sibling),F=i(F,U.children||[]),F.return=D,D=F;break e}else{r(D,F);break}}else e(D,F);F=F.sibling}F=Oj(U,D.mode,$),F.return=D,D=F}return l(D)}if(typeof U=="string"||typeof U=="number")return U=""+U,F!==null&&F.tag===6?(r(D,F.sibling),F=i(F,U),F.return=D,D=F):(r(D,F),F=Rj(U,D.mode,$),F.return=D,D=F),l(D);if(OM(U))return N(D,F,U,$);if(Tw(U))return j(D,F,U,$);if(ie&&LM(D,U),typeof U=="undefined"&&!Z)switch(D.tag){case 1:case 22:case 0:case 11:case 15:throw Error(qt(152,Vy(D.type)||"Component"))}return r(D,F)}}var aC=Vte(!0),Gte=Vte(!1),g1={},Hc=Jp(g1),f1=Jp(g1),h1=Jp(g1);function og(t){if(t===g1)throw Error(qt(174));return t}function nz(t,e){switch(Ki(h1,e),Ki(f1,t),Ki(Hc,g1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uj(e,t)}Si(Hc),Ki(Hc,e)}function r_(){Si(Hc),Si(f1),Si(h1)}function _ee(t){og(h1.current);var e=og(Hc.current),r=Uj(e,t.type);e!==r&&(Ki(f1,t),Ki(Hc,r))}function Yz(t){f1.current===t&&(Si(Hc),Si(f1))}var Yi=Jp(0);function sC(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lh=null,jp=null,Wc=!1;function $te(t,e){var r=Zl(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function xee(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function iz(t){if(Wc){var e=jp;if(e){var r=e;if(!xee(t,e)){if(e=Wy(r.nextSibling),!e||!xee(t,e)){t.flags=t.flags&-1025|2,Wc=!1,lh=t;return}$te(lh,r)}lh=t,jp=Wy(e.firstChild)}else t.flags=t.flags&-1025|2,Wc=!1,lh=t}}function bee(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lh=t}function DM(t){if(t!==lh)return!1;if(!Wc)return bee(t),Wc=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Qj(e,t.memoizedProps))for(e=jp;e;)$te(t,e),e=Wy(e.nextSibling);if(bee(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(qt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){jp=Wy(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}jp=null}}else jp=lh?Wy(t.stateNode.nextSibling):null;return!0}function Aj(){jp=lh=null,Wc=!1}var Yy=[];function Kz(){for(var t=0;t<Yy.length;t++)Yy[t]._workInProgressVersionPrimary=null;Yy.length=0}var Yw=hg.ReactCurrentDispatcher,Yl=hg.ReactCurrentBatchConfig,p1=0,ao=null,La=null,fa=null,lC=!1,Kw=!1;function Ps(){throw Error(qt(321))}function Xz(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Wl(t[r],e[r]))return!1;return!0}function Qz(t,e,r,n,i,o){if(p1=o,ao=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yw.current=t===null||t.memoizedState===null?bWe:wWe,t=r(n,i),Kw){o=0;do{if(Kw=!1,!(25>o))throw Error(qt(301));o+=1,fa=La=null,e.updateQueue=null,Yw.current=EWe,t=r(n,i)}while(Kw)}if(Yw.current=hC,e=La!==null&&La.next!==null,p1=0,fa=La=ao=null,lC=!1,e)throw Error(qt(300));return t}function ag(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fa===null?ao.memoizedState=fa=t:fa=fa.next=t,fa}function dg(){if(La===null){var t=ao.alternate;t=t!==null?t.memoizedState:null}else t=La.next;var e=fa===null?ao.memoizedState:fa.next;if(e!==null)fa=e,La=t;else{if(t===null)throw Error(qt(310));La=t,t={memoizedState:La.memoizedState,baseState:La.baseState,baseQueue:La.baseQueue,queue:La.queue,next:null},fa===null?ao.memoizedState=fa=t:fa=fa.next=t}return fa}function Gc(t,e){return typeof e=="function"?e(t):e}function Rw(t){var e=dg(),r=e.queue;if(r===null)throw Error(qt(311));r.lastRenderedReducer=t;var n=La,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}n.baseQueue=i=o,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var f=l=o=null,d=i;do{var v=d.lane;if((p1&v)===v)f!==null&&(f=f.next={lane:0,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null}),n=d.eagerReducer===t?d.eagerState:t(n,d.action);else{var x={lane:v,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null};f===null?(l=f=x,o=n):f=f.next=x,ao.lanes|=v,v1|=v}d=d.next}while(d!==null&&d!==i);f===null?o=n:f.next=l,Wl(n,e.memoizedState)||(Yu=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=f,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function Ow(t){var e=dg(),r=e.queue;if(r===null)throw Error(qt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);Wl(o,e.memoizedState)||(Yu=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function wee(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(p1&t)===t)&&(e._workInProgressVersionPrimary=n,Yy.push(e))),t)return r(e._source);throw Yy.push(e),Error(qt(350))}function Hte(t,e,r,n){var i=as;if(i===null)throw Error(qt(349));var o=e._getVersion,l=o(e._source),f=Yw.current,d=f.useState(function(){return wee(i,e,r)}),v=d[1],x=d[0];d=fa;var b=t.memoizedState,A=b.refs,P=A.getSnapshot,N=b.source;b=b.subscribe;var j=ao;return t.memoizedState={refs:A,source:e,subscribe:n},f.useEffect(function(){A.getSnapshot=r,A.setSnapshot=v;var D=o(e._source);if(!Wl(l,D)){D=r(e._source),Wl(x,D)||(v(D),D=$p(j),i.mutableReadLanes|=D&i.pendingLanes),D=i.mutableReadLanes,i.entangledLanes|=D;for(var F=i.entanglements,U=D;0<U;){var $=31-Yp(U),Z=1<<$;F[$]|=D,U&=~Z}}},[r,e,n]),f.useEffect(function(){return n(e._source,function(){var D=A.getSnapshot,F=A.setSnapshot;try{F(D(e._source));var U=$p(j);i.mutableReadLanes|=U&i.pendingLanes}catch($){F(function(){throw $})}})},[e,n]),Wl(P,r)&&Wl(N,e)&&Wl(b,n)||(t={pending:null,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:x},t.dispatch=v=t4.bind(null,ao,t),d.queue=t,d.baseQueue=null,x=wee(i,e,r),d.memoizedState=d.baseState=x),x}function Wte(t,e,r){var n=dg();return Hte(n,t,e,r)}function Lw(t){var e=ag();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:t},t=t.dispatch=t4.bind(null,ao,t),[e.memoizedState,t]}function uC(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ao.updateQueue,e===null?(e={lastEffect:null},ao.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Eee(t){var e=ag();return t={current:t},e.memoizedState=t}function cC(){return dg().memoizedState}function oz(t,e,r,n){var i=ag();ao.flags|=t,i.memoizedState=uC(1|e,r,void 0,n===void 0?null:n)}function Jz(t,e,r,n){var i=dg();n=n===void 0?null:n;var o=void 0;if(La!==null){var l=La.memoizedState;if(o=l.destroy,n!==null&&Xz(n,l.deps)){uC(e,r,o,n);return}}ao.flags|=t,i.memoizedState=uC(1|e,r,o,n)}function See(t,e){return oz(516,4,t,e)}function fC(t,e){return Jz(516,4,t,e)}function Zte(t,e){return Jz(4,2,t,e)}function Yte(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kte(t,e,r){return r=r!=null?r.concat([t]):null,Jz(4,2,Yte.bind(null,e,t),r)}function e4(){}function Xte(t,e){var r=dg();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Xz(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Qte(t,e){var r=dg();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Xz(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function xWe(t,e){var r=t_();ug(98>r?98:r,function(){t(!0)}),ug(97<r?97:r,function(){var n=Yl.transition;Yl.transition=1;try{t(!1),e()}finally{Yl.transition=n}})}function t4(t,e,r){var n=wl(),i=$p(t),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},l=e.pending;if(l===null?o.next=o:(o.next=l.next,l.next=o),e.pending=o,l=t.alternate,t===ao||l!==null&&l===ao)Kw=lC=!0;else{if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,d=l(f,r);if(o.eagerReducer=l,o.eagerState=d,Wl(d,f))return}catch(v){}finally{}Hp(t,i,n)}}var hC={readContext:Kl,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useLayoutEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useMutableSource:Ps,useOpaqueIdentifier:Ps,unstable_isNewReconciler:!1},bWe={readContext:Kl,useCallback:function(t,e){return ag().memoizedState=[t,e===void 0?null:e],t},useContext:Kl,useEffect:See,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,oz(4,2,Yte.bind(null,e,t),r)},useLayoutEffect:function(t,e){return oz(4,2,t,e)},useMemo:function(t,e){var r=ag();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ag();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=t4.bind(null,ao,t),[n.memoizedState,t]},useRef:Eee,useState:Lw,useDebugValue:e4,useDeferredValue:function(t){var e=Lw(t),r=e[0],n=e[1];return See(function(){var i=Yl.transition;Yl.transition=1;try{n(t)}finally{Yl.transition=i}},[t]),r},useTransition:function(){var t=Lw(!1),e=t[0];return t=xWe.bind(null,t[1]),Eee(t),[t,e]},useMutableSource:function(t,e,r){var n=ag();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},Hte(n,t,e,r)},useOpaqueIdentifier:function(){if(Wc){var t=!1,e=dWe(function(){throw t||(t=!0,r("r:"+(Sj++).toString(36))),Error(qt(355))}),r=Lw(e)[1];return(ao.mode&2)===0&&(ao.flags|=516,uC(5,function(){r("r:"+(Sj++).toString(36))},void 0,null)),e}return e="r:"+(Sj++).toString(36),Lw(e),e},unstable_isNewReconciler:!1},wWe={readContext:Kl,useCallback:Xte,useContext:Kl,useEffect:fC,useImperativeHandle:Kte,useLayoutEffect:Zte,useMemo:Qte,useReducer:Rw,useRef:cC,useState:function(){return Rw(Gc)},useDebugValue:e4,useDeferredValue:function(t){var e=Rw(Gc),r=e[0],n=e[1];return fC(function(){var i=Yl.transition;Yl.transition=1;try{n(t)}finally{Yl.transition=i}},[t]),r},useTransition:function(){var t=Rw(Gc)[0];return[cC().current,t]},useMutableSource:Wte,useOpaqueIdentifier:function(){return Rw(Gc)[0]},unstable_isNewReconciler:!1},EWe={readContext:Kl,useCallback:Xte,useContext:Kl,useEffect:fC,useImperativeHandle:Kte,useLayoutEffect:Zte,useMemo:Qte,useReducer:Ow,useRef:cC,useState:function(){return Ow(Gc)},useDebugValue:e4,useDeferredValue:function(t){var e=Ow(Gc),r=e[0],n=e[1];return fC(function(){var i=Yl.transition;Yl.transition=1;try{n(t)}finally{Yl.transition=i}},[t]),r},useTransition:function(){var t=Ow(Gc)[0];return[cC().current,t]},useMutableSource:Wte,useOpaqueIdentifier:function(){return Ow(Gc)[0]},unstable_isNewReconciler:!1},SWe=hg.ReactCurrentOwner,Yu=!1;function Rs(t,e,r,n){e.child=t===null?Gte(e,null,r,n):aC(e,t.child,r,n)}function Tee(t,e,r,n,i){r=r.render;var o=e.ref;return Zy(e,i),n=Qz(t,e,r,n,o,i),t!==null&&!Yu?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,uh(t,e,i)):(e.flags|=1,Rs(t,e,n,i),e.child)}function Iee(t,e,r,n,i,o){if(t===null){var l=r.type;return typeof l=="function"&&!s4(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=l,Jte(t,e,l,n,i,o)):(t=HM(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}return l=t.child,(i&o)===0&&(i=l.memoizedProps,r=r.compare,r=r!==null?r:s1,r(i,n)&&t.ref===e.ref)?uh(t,e,o):(e.flags|=1,t=Qp(l,n),t.ref=e.ref,t.return=e,e.child=t)}function Jte(t,e,r,n,i,o){if(t!==null&&s1(t.memoizedProps,n)&&t.ref===e.ref)if(Yu=!1,(o&i)!==0)(t.flags&16384)!==0&&(Yu=!0);else return e.lanes=t.lanes,uh(t,e,o);return az(t,e,r,n,o)}function Mj(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if((e.mode&4)===0)e.memoizedState={baseLanes:0},kM(e,r);else if((r&1073741824)!==0)e.memoizedState={baseLanes:0},kM(e,o!==null?o.baseLanes:r);else return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},kM(e,t),null;}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,kM(e,n);return Rs(t,e,i,r),e.child}function ere(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function az(t,e,r,n,i){var o=Ls(r)?lg:ka.current;return o=e_(e,o),Zy(e,i),r=Qz(t,e,r,n,o,i),t!==null&&!Yu?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,uh(t,e,i)):(e.flags|=1,Rs(t,e,r,i),e.child)}function Aee(t,e,r,n,i){if(Ls(r)){var o=!0;UM(e)}else o=!1;if(Zy(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),Bte(e,r,n),rz(e,r,n,i),n=!0;else if(t===null){var l=e.stateNode,f=e.memoizedProps;l.props=f;var d=l.context,v=r.contextType;typeof v=="object"&&v!==null?v=Kl(v):(v=Ls(r)?lg:ka.current,v=e_(e,v));var x=r.getDerivedStateFromProps,b=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";b||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==n||d!==v)&&yee(e,l,n,v),Np=!1;var A=e.memoizedState;l.state=A,c1(e,n,l,i),d=e.memoizedState,f!==n||A!==d||Os.current||Np?(typeof x=="function"&&(oC(e,r,x,n),d=e.memoizedState),(f=Np||vee(e,r,f,n,A,d,v))?(b||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4)):(typeof l.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=d),l.props=n,l.state=d,l.context=v,n=f):(typeof l.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{l=e.stateNode,zte(t,e),f=e.memoizedProps,v=e.type===e.elementType?f:Zu(e.type,f),l.props=v,b=e.pendingProps,A=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=Kl(d):(d=Ls(r)?lg:ka.current,d=e_(e,d));var P=r.getDerivedStateFromProps;(x=typeof P=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==b||A!==d)&&yee(e,l,n,d),Np=!1,A=e.memoizedState,l.state=A,c1(e,n,l,i);var N=e.memoizedState;f!==b||A!==N||Os.current||Np?(typeof P=="function"&&(oC(e,r,P,n),N=e.memoizedState),(v=Np||vee(e,r,v,n,A,N,d))?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,N,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,N,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof l.componentDidUpdate!="function"||f===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&A===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=N),l.props=n,l.state=N,l.context=d,n=v):(typeof l.componentDidUpdate!="function"||f===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&A===t.memoizedState||(e.flags|=256),n=!1)}return sz(t,e,r,n,o,i)}function sz(t,e,r,n,i,o){ere(t,e);var l=(e.flags&64)!==0;if(!n&&!l)return i&&hee(e,r,!1),uh(t,e,o);n=e.stateNode,SWe.current=e;var f=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=aC(e,t.child,null,o),e.child=aC(e,null,f,o)):Rs(t,e,f,o),e.memoizedState=n.state,i&&hee(e,r,!0),e.child}function Mee(t){var e=t.stateNode;e.pendingContext?fee(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fee(t,e.context,!1),nz(t,e.containerInfo)}var NM={dehydrated:null,retryLane:0};function Cee(t,e,r){var n=e.pendingProps,i=Yi.current,o=!1,l;return(l=(e.flags&64)!==0)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Ki(Yi,i&1),t===null?(n.fallback!==void 0&&iz(e),t=n.children,i=n.fallback,o?(t=Pee(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=NM,t):typeof n.unstable_expectedLoadTime=="number"?(t=Pee(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=NM,e.lanes=33554432,t):(r=l4({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?o?(n=Oee(t,e,n.children,n.fallback,r),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=t.childLanes&~r,e.memoizedState=NM,n):(r=Ree(t,e,n.children,r),e.memoizedState=null,r):o?(n=Oee(t,e,n.children,n.fallback,r),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=t.childLanes&~r,e.memoizedState=NM,n):(r=Ree(t,e,n.children,r),e.memoizedState=null,r)}function Pee(t,e,r,n){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},(i&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=e):o=l4(e,i,0,null),r=Qy(r,i,n,null),o.return=t,r.return=t,o.sibling=r,t.child=o,r}function Ree(t,e,r,n){var i=t.child;return t=i.sibling,r=Qp(i,{mode:"visible",children:r}),(e.mode&2)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function Oee(t,e,r,n,i){var o=e.mode,l=t.child;t=l.sibling;var f={mode:"hidden",children:r};return(o&2)===0&&e.child!==l?(r=e.child,r.childLanes=0,r.pendingProps=f,l=r.lastEffect,l!==null?(e.firstEffect=r.firstEffect,e.lastEffect=l,l.nextEffect=null):e.firstEffect=e.lastEffect=null):r=Qp(l,f),t!==null?n=Qp(t,n):(n=Qy(n,o,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function Lee(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jte(t.return,e)}function Cj(t,e,r,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=i,l.lastEffect=o)}function Dee(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Rs(t,e,n.children,r),n=Yi.current,(n&2)!==0)n=n&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lee(t,r);else if(t.tag===19)Lee(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ki(Yi,n),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&sC(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Cj(e,!1,i,r,o,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sC(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Cj(e,!0,r,null,o,e.lastEffect);break;case"together":Cj(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function uh(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),v1|=e.lanes,(r&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(qt(153));if(e.child!==null){for(t=e.child,r=Qp(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Qp(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var tre,lz,rre,nre;tre=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lz=function(){};rre=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,og(Hc.current);var o=null;switch(r){case"input":i=Nj(t,i),n=Nj(t,n),o=[];break;case"option":i=Fj(t,i),n=Fj(t,n),o=[];break;case"select":i=Pi({},i,{value:void 0}),n=Pi({},n,{value:void 0}),o=[];break;case"textarea":i=jj(t,i),n=jj(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=JM)}Bj(r,n);var l;r=null;for(v in i)if(!n.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var f=i[v];for(l in f)f.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(e1.hasOwnProperty(v)?o||(o=[]):(o=o||[]).push(v,null));for(v in n){var d=n[v];if(f=i!=null?i[v]:void 0,n.hasOwnProperty(v)&&d!==f&&(d!=null||f!=null))if(v==="style"){if(f){for(l in f)!f.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&f[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(o||(o=[]),o.push(v,r)),r=d;}else v==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,f=f?f.__html:void 0,d!=null&&f!==d&&(o=o||[]).push(v,d)):v==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(v,""+d):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(e1.hasOwnProperty(v)?(d!=null&&v==="onScroll"&&Ei("scroll",t),o||f===d||(o=[])):typeof d=="object"&&d!==null&&d.$$typeof===Mz?d.toString():(o=o||[]).push(v,d))}r&&(o=o||[]).push("style",r);var v=o;(e.updateQueue=v)&&(e.flags|=4)}};nre=function(t,e,r,n){r!==n&&(e.flags|=4)};function Dw(t,e){if(!Wc)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function TWe(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ls(e.type)&&tC(),null;case 3:return r_(),Si(Os),Si(ka),Kz(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(DM(e)?e.flags|=4:n.hydrate||(e.flags|=256)),lz(e),null;case 5:Yz(e);var i=og(h1.current);if(r=e.type,t!==null&&e.stateNode!=null)rre(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(qt(166));return null}if(t=og(Hc.current),DM(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Fp]=e,n[eC]=o,r){case"dialog":Ei("cancel",n),Ei("close",n);break;case"iframe":case"object":case"embed":Ei("load",n);break;case"video":case"audio":for(t=0;t<jw.length;t++)Ei(jw[t],n);break;case"source":Ei("error",n);break;case"img":case"image":case"link":Ei("error",n),Ei("load",n);break;case"details":Ei("toggle",n);break;case"input":kJ(n,o),Ei("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ei("invalid",n);break;case"textarea":FJ(n,o),Ei("invalid",n)}Bj(r,o),t=null;for(var l in o)o.hasOwnProperty(l)&&(i=o[l],l==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):e1.hasOwnProperty(l)&&i!=null&&l==="onScroll"&&Ei("scroll",n));switch(r){case"input":TM(n),qJ(n,o,!0);break;case"textarea":TM(n),jJ(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=JM)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(l=i.nodeType===9?i:i.ownerDocument,t===zj.html&&(t=Kee(r)),t===zj.html?r==="script"?(t=l.createElement("div"),t.innerHTML="<script></script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),r==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[Fp]=e,t[eC]=n,tre(t,e,!1,!1),e.stateNode=t,l=Vj(r,n),r){case"dialog":Ei("cancel",t),Ei("close",t),i=n;break;case"iframe":case"object":case"embed":Ei("load",t),i=n;break;case"video":case"audio":for(i=0;i<jw.length;i++)Ei(jw[i],t);i=n;break;case"source":Ei("error",t),i=n;break;case"img":case"image":case"link":Ei("error",t),Ei("load",t),i=n;break;case"details":Ei("toggle",t),i=n;break;case"input":kJ(t,n),i=Nj(t,n),Ei("invalid",t);break;case"option":i=Fj(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Pi({},n,{value:void 0}),Ei("invalid",t);break;case"textarea":FJ(t,n),i=jj(t,n),Ei("invalid",t);break;default:i=n}Bj(r,i);var f=i;for(o in f)if(f.hasOwnProperty(o)){var d=f[o];o==="style"?Jee(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Xee(t,d)):o==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&t1(t,d):typeof d=="number"&&t1(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(e1.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Ei("scroll",t):d!=null&&wz(t,o,d,l))}switch(r){case"input":TM(t),qJ(t,n,!1);break;case"textarea":TM(t),jJ(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Zp(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Gy(t,!!n.multiple,o,!1):n.defaultValue!=null&&Gy(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=JM)}Pte(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)nre(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(qt(166));r=og(h1.current),og(Hc.current),DM(e)?(n=e.stateNode,r=e.memoizedProps,n[Fp]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Fp]=e,e.stateNode=n)}return null;case 13:return Si(Yi),n=e.memoizedState,(e.flags&64)!==0?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&DM(e):r=t.memoizedState!==null,n&&!r&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Yi.current&1)!==0?ha===0&&(ha=3):((ha===0||ha===3)&&(ha=4),as===null||(v1&134217727)===0&&(a_&134217727)===0||Ky(as,Na))),(n||r)&&(e.flags|=4),null);case 4:return r_(),lz(e),t===null&&Ate(e.stateNode.containerInfo),null;case 10:return Wz(e),null;case 17:return Ls(e.type)&&tC(),null;case 19:if(Si(Yi),n=e.memoizedState,n===null)return null;if(o=(e.flags&64)!==0,l=n.rendering,l===null){if(o)Dw(n,!1);else{if(ha!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(l=sC(t),l!==null){for(e.flags|=64,Dw(n,!1),o=l.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ki(Yi,Yi.current&1|2),e.child}t=t.sibling}n.tail!==null&&Da()>dz&&(e.flags|=64,o=!0,Dw(n,!1),e.lanes=33554432)}}else{if(!o)if(t=sC(l),t!==null){if(e.flags|=64,o=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Dw(n,!0),n.tail===null&&n.tailMode==="hidden"&&!l.alternate&&!Wc)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Da()-n.renderingStartTime>dz&&r!==1073741824&&(e.flags|=64,o=!0,Dw(n,!1),e.lanes=33554432);n.isBackwards?(l.sibling=e.child,e.child=l):(r=n.last,r!==null?r.sibling=l:e.child=l,n.last=l)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=Da(),r.sibling=null,e=Yi.current,Ki(Yi,o?e&1|2:e&1),r):null;case 23:case 24:return a4(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(qt(156,e.tag))}function IWe(t){switch(t.tag){case 1:Ls(t.type)&&tC();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(r_(),Si(Os),Si(ka),Kz(),e=t.flags,(e&64)!==0)throw Error(qt(285));return t.flags=e&-4097|64,t;case 5:return Yz(t),null;case 13:return Si(Yi),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Si(Yi),null;case 4:return r_(),null;case 10:return Wz(t),null;case 23:case 24:return a4(),null;default:return null}}function r4(t,e){try{var r="",n=e;do r+=aHe(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i}}function uz(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var AWe=typeof WeakMap=="function"?WeakMap:Map;function ire(t,e,r){r=Vp(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){dC||(dC=!0,mz=n),uz(t,e)},r}function ore(t,e,r){r=Vp(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return uz(t,e),n(i)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&($c===null?$c=new Set([this]):$c.add(this),uz(t,e));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}var MWe=typeof WeakSet=="function"?WeakSet:Set;function Nee(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){Wp(t,r)}else e.current=null}function CWe(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:Zu(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Vz(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(qt(163))}function PWe(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(dre(r,t),FWe(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:Zu(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&gee(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}gee(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&Pte(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&ute(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(qt(163))}function kee(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=Qee("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function qee(t,e){if(sg&&typeof sg.onCommitFiberUnmount=="function")try{sg.onCommitFiberUnmount(Gz,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)dre(e,r);else{n=e;try{i()}catch(o){Wp(n,o)}}r=r.next}while(r!==t)}break;case 1:if(Nee(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Wp(e,o)}break;case 5:Nee(e);break;case 4:are(t,e)}}function Fee(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function jee(t){return t.tag===5||t.tag===3||t.tag===4}function zee(t){e:{for(var e=t.return;e!==null;){if(jee(e))break e;e=e.return}throw Error(qt(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(qt(161))}r.flags&16&&(t1(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||jee(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?cz(t,r,e):fz(t,r,e)}function cz(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=JM));else if(n!==4&&(t=t.child,t!==null))for(cz(t,e,r),t=t.sibling;t!==null;)cz(t,e,r),t=t.sibling}function fz(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(fz(t,e,r),t=t.sibling;t!==null;)fz(t,e,r),t=t.sibling}function are(t,e){for(var r=e,n=!1,i,o;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(qt(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var l=t,f=r,d=f;;)if(qee(l,d),d.child!==null&&d.tag!==4)d.child.return=d,d=d.child;else{if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}o?(l=i,f=r.stateNode,l.nodeType===8?l.parentNode.removeChild(f):l.removeChild(f)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(qee(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function Pj(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,o!==null){for(r[eC]=n,t==="input"&&n.type==="radio"&&n.name!=null&&Zee(r,n),Vj(t,i),e=Vj(t,n),i=0;i<o.length;i+=2){var l=o[i],f=o[i+1];l==="style"?Jee(r,f):l==="dangerouslySetInnerHTML"?Xee(r,f):l==="children"?t1(r,f):wz(r,l,f,e)}switch(t){case"input":kj(r,n);break;case"textarea":Yee(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Gy(r,!!n.multiple,o,!1):t!==!!n.multiple&&(n.defaultValue!=null?Gy(r,!!n.multiple,n.defaultValue,!0):Gy(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(qt(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,ute(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(o4=Da(),kee(e.child,!0)),Uee(e);return;case 19:Uee(e);return;case 17:return;case 23:case 24:kee(e,e.memoizedState!==null);return}throw Error(qt(163))}function Uee(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new MWe),e.forEach(function(n){var i=UWe.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function RWe(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var OWe=Math.ceil,pC=hg.ReactCurrentDispatcher,n4=hg.ReactCurrentOwner,Fr=0,as=null,Do=null,Na=0,cg=0,hz=Jp(0),ha=0,AC=null,o_=0,v1=0,a_=0,i4=0,pz=null,o4=0,dz=1/0;function s_(){dz=Da()+500}var er=null,dC=!1,mz=null,$c=null,Xp=!1,Xw=null,zw=90,gz=[],vz=[],ch=null,Qw=0,yz=null,VM=-1,sh=0,GM=0,Jw=null,$M=!1;function wl(){return(Fr&48)!==0?Da():VM!==-1?VM:VM=Da()}function $p(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return t_()===99?1:2;if(sh===0&&(sh=o_),_We.transition!==0){GM!==0&&(GM=pz!==null?pz.pendingLanes:0),t=sh;var e=4186112&~GM;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=t_(),(Fr&4)!==0&&t===98?t=XM(12,sh):(t=wHe(t),t=XM(t,sh)),t}function Hp(t,e,r){if(50<Qw)throw Qw=0,yz=null,Error(qt(185));if(t=MC(t,e),t===null)return null;xC(t,e,r),t===as&&(a_|=e,ha===4&&Ky(t,Na));var n=t_();e===1?(Fr&8)!==0&&(Fr&48)===0?_z(t):(Xl(t,r),Fr===0&&(s_(),Zc())):((Fr&4)===0||n!==98&&n!==99||(ch===null?ch=new Set([t]):ch.add(t)),Xl(t,r)),pz=t}function MC(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function Xl(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-Yp(l),d=1<<f,v=o[f];if(v===-1){if((d&n)===0||(d&i)!==0){v=e,Ny(d);var x=ci;o[f]=10<=x?v+250:6<=x?v+5e3:-1}}else v<=e&&(t.expiredLanes|=d);l&=~d}if(n=o1(t,t===as?Na:0),e=ci,n===0)r!==null&&(r!==Tj&&ez(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==Tj&&ez(r)}e===15?(r=_z.bind(null,t),ah===null?(ah=[r],BM=$z(TC,Fte)):ah.push(r),r=Tj):e===14?r=u1(99,_z.bind(null,t)):(r=EHe(e),r=u1(r,sre.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function sre(t){if(VM=-1,GM=sh=0,(Fr&48)!==0)throw Error(qt(327));var e=t.callbackNode;if(ed()&&t.callbackNode!==e)return null;var r=o1(t,t===as?Na:0);if(r===0)return null;var n=r,i=Fr;Fr|=16;var o=fre();(as!==t||Na!==n)&&(s_(),Xy(t,n));do try{NWe();break}catch(f){cre(t,f)}while(!0);if(Hz(),pC.current=o,Fr=i,Do!==null?n=0:(as=null,Na=0,n=ha),(o_&a_)!==0)Xy(t,0);else if(n!==0){if(n===2&&(Fr|=64,t.hydrate&&(t.hydrate=!1,Vz(t.containerInfo)),r=gte(t),r!==0&&(n=Uw(t,r))),n===1)throw e=AC,Xy(t,0),Ky(t,r),Xl(t,Da()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(qt(345));case 2:tg(t);break;case 3:if(Ky(t,r),(r&62914560)===r&&(n=o4+500-Da(),10<n)){if(o1(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=lee(tg.bind(null,t),n);break}tg(t);break;case 4:if(Ky(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var l=31-Yp(r);o=1<<l,l=n[l],l>i&&(i=l),r&=~o}if(r=i,r=Da()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OWe(r/1960))-r,10<r){t.timeoutHandle=lee(tg.bind(null,t),r);break}tg(t);break;case 5:tg(t);break;default:throw Error(qt(329))}}return Xl(t,Da()),t.callbackNode===e?sre.bind(null,t):null}function Ky(t,e){for(e&=~i4,e&=~a_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Yp(e),n=1<<r;t[r]=-1,e&=~n}}function _z(t){if((Fr&48)!==0)throw Error(qt(327));if(ed(),t===as&&(t.expiredLanes&Na)!==0){var e=Na,r=Uw(t,e);(o_&a_)!==0&&(e=o1(t,e),r=Uw(t,e))}else e=o1(t,0),r=Uw(t,e);if(t.tag!==0&&r===2&&(Fr|=64,t.hydrate&&(t.hydrate=!1,Vz(t.containerInfo)),e=gte(t),e!==0&&(r=Uw(t,e))),r===1)throw r=AC,Xy(t,0),Ky(t,e),Xl(t,Da()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,tg(t),Xl(t,Da()),null}function LWe(){if(ch!==null){var t=ch;ch=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Xl(e,Da())})}Zc()}function lre(t,e){var r=Fr;Fr|=1;try{return t(e)}finally{Fr=r,Fr===0&&(s_(),Zc())}}function ure(t,e){var r=Fr;Fr&=-2,Fr|=8;try{return t(e)}finally{Fr=r,Fr===0&&(s_(),Zc())}}function kM(t,e){Ki(hz,cg),cg|=e,o_|=e}function a4(){cg=hz.current,Si(hz)}function Xy(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,pWe(r)),Do!==null)for(r=Do.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&tC();break;case 3:r_(),Si(Os),Si(ka),Kz();break;case 5:Yz(n);break;case 4:r_();break;case 13:Si(Yi);break;case 19:Si(Yi);break;case 10:Wz(n);break;case 23:case 24:a4()}r=r.return}as=t,Do=Qp(t.current,null),Na=cg=o_=e,ha=0,AC=null,i4=a_=v1=0}function cre(t,e){do{var r=Do;try{if(Hz(),Yw.current=hC,lC){for(var n=ao.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}lC=!1}if(p1=0,fa=La=ao=null,Kw=!1,n4.current=null,r===null||r.return===null){ha=1,AC=e,Do=null;break}e:{var o=t,l=r.return,f=r,d=e;if(e=Na,f.flags|=2048,f.firstEffect=f.lastEffect=null,d!==null&&typeof d=="object"&&typeof d.then=="function"){var v=d;if((f.mode&2)===0){var x=f.alternate;x?(f.updateQueue=x.updateQueue,f.memoizedState=x.memoizedState,f.lanes=x.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=(Yi.current&1)!==0,A=l;do{var P;if(P=A.tag===13){var N=A.memoizedState;if(N!==null)P=N.dehydrated!==null;else{var j=A.memoizedProps;P=j.fallback===void 0?!1:j.unstable_avoidThisFallback!==!0?!0:!b}}if(P){var D=A.updateQueue;if(D===null){var F=new Set;F.add(v),A.updateQueue=F}else D.add(v);if((A.mode&2)===0){if(A.flags|=64,f.flags|=16384,f.flags&=-2981,f.tag===1)if(f.alternate===null)f.tag=17;else{var U=Vp(-1,1);U.tag=2,Gp(f,U)}f.lanes|=1;break e}d=void 0,f=e;var $=o.pingCache;if($===null?($=o.pingCache=new AWe,d=new Set,$.set(v,d)):(d=$.get(v),d===void 0&&(d=new Set,$.set(v,d))),!d.has(f)){d.add(f);var Z=zWe.bind(null,o,v,f);v.then(Z,Z)}A.flags|=4096,A.lanes=e;break e}A=A.return}while(A!==null);d=Error((Vy(f.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}ha!==5&&(ha=2),d=r4(d,f),A=l;do{switch(A.tag){case 3:o=d,A.flags|=4096,e&=-e,A.lanes|=e;var ie=ire(A,o,e);mee(A,ie);break e;case 1:o=d;var ne=A.type,ae=A.stateNode;if((A.flags&64)===0&&(typeof ne.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&($c===null||!$c.has(ae)))){A.flags|=4096,e&=-e,A.lanes|=e;var ye=ore(A,o,e);mee(A,ye);break e}}A=A.return}while(A!==null)}pre(r)}catch(ge){e=ge,Do===r&&r!==null&&(Do=r=r.return);continue}break}while(!0)}function fre(){var t=pC.current;return pC.current=hC,t===null?hC:t}function Uw(t,e){var r=Fr;Fr|=16;var n=fre();as===t&&Na===e||Xy(t,e);do try{DWe();break}catch(i){cre(t,i)}while(!0);if(Hz(),Fr=r,pC.current=n,Do!==null)throw Error(qt(261));return as=null,Na=0,ha}function DWe(){for(;Do!==null;)hre(Do)}function NWe(){for(;Do!==null&&!gWe();)hre(Do)}function hre(t){var e=mre(t.alternate,t,cg);t.memoizedProps=t.pendingProps,e===null?pre(t):Do=e,n4.current=null}function pre(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&2048)===0){if(r=TWe(r,e,cg),r!==null){Do=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||(cg&1073741824)!==0||(r.mode&4)===0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(r=IWe(e),r!==null){r.flags&=2047,Do=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){Do=e;return}Do=e=t}while(e!==null);ha===0&&(ha=5)}function tg(t){var e=t_();return ug(99,kWe.bind(null,t,e)),null}function kWe(t,e){do ed();while(Xw!==null);if((Fr&48)!==0)throw Error(qt(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(qt(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var l=t.eventTimes,f=t.expirationTimes;0<o;){var d=31-Yp(o),v=1<<d;i[d]=0,l[d]=-1,f[d]=-1,o&=~v}if(ch!==null&&(n&24)===0&&ch.has(t)&&ch.delete(t),t===as&&(Do=as=null,Na=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=Fr,Fr|=32,n4.current=null,wj=FM,l=ree(),Yj(l)){if("selectionStart"in l)f={start:l.selectionStart,end:l.selectionEnd};else e:if(f=(f=l.ownerDocument)&&f.defaultView||window,(v=f.getSelection&&f.getSelection())&&v.rangeCount!==0){f=v.anchorNode,o=v.anchorOffset,d=v.focusNode,v=v.focusOffset;try{f.nodeType,d.nodeType}catch(ge){f=null;break e}var x=0,b=-1,A=-1,P=0,N=0,j=l,D=null;t:for(;;){for(var F;j!==f||o!==0&&j.nodeType!==3||(b=x+o),j!==d||v!==0&&j.nodeType!==3||(A=x+v),j.nodeType===3&&(x+=j.nodeValue.length),(F=j.firstChild)!==null;)D=j,j=F;for(;;){if(j===l)break t;if(D===f&&++P===o&&(b=x),D===d&&++N===v&&(A=x),(F=j.nextSibling)!==null)break;j=D,D=j.parentNode}j=F}f=b===-1||A===-1?null:{start:b,end:A}}else f=null;f=f||{start:0,end:0}}else f=null;Ej={focusedElem:l,selectionRange:f},FM=!1,Jw=null,$M=!1,er=n;do try{qWe()}catch(ge){if(er===null)throw Error(qt(330));Wp(er,ge),er=er.nextEffect}while(er!==null);Jw=null,er=n;do try{for(l=t;er!==null;){var U=er.flags;if(U&16&&t1(er.stateNode,""),U&128){var $=er.alternate;if($!==null){var Z=$.ref;Z!==null&&(typeof Z=="function"?Z(null):Z.current=null)}}switch(U&1038){case 2:zee(er),er.flags&=-3;break;case 6:zee(er),er.flags&=-3,Pj(er.alternate,er);break;case 1024:er.flags&=-1025;break;case 1028:er.flags&=-1025,Pj(er.alternate,er);break;case 4:Pj(er.alternate,er);break;case 8:f=er,are(l,f);var ie=f.alternate;Fee(f),ie!==null&&Fee(ie)}er=er.nextEffect}}catch(ge){if(er===null)throw Error(qt(330));Wp(er,ge),er=er.nextEffect}while(er!==null);if(Z=Ej,$=ree(),U=Z.focusedElem,l=Z.selectionRange,$!==U&&U&&U.ownerDocument&&Ste(U.ownerDocument.documentElement,U)){for(l!==null&&Yj(U)&&($=l.start,Z=l.end,Z===void 0&&(Z=$),"selectionStart"in U?(U.selectionStart=$,U.selectionEnd=Math.min(Z,U.value.length)):(Z=($=U.ownerDocument||document)&&$.defaultView||window,Z.getSelection&&(Z=Z.getSelection(),f=U.textContent.length,ie=Math.min(l.start,f),l=l.end===void 0?ie:Math.min(l.end,f),!Z.extend&&ie>l&&(f=l,l=ie,ie=f),f=tee(U,ie),o=tee(U,l),f&&o&&(Z.rangeCount!==1||Z.anchorNode!==f.node||Z.anchorOffset!==f.offset||Z.focusNode!==o.node||Z.focusOffset!==o.offset)&&($=$.createRange(),$.setStart(f.node,f.offset),Z.removeAllRanges(),ie>l?(Z.addRange($),Z.extend(o.node,o.offset)):($.setEnd(o.node,o.offset),Z.addRange($)))))),$=[],Z=U;Z=Z.parentNode;)Z.nodeType===1&&$.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<$.length;U++)Z=$[U],Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}FM=!!wj,Ej=wj=null,t.current=r,er=n;do try{for(U=t;er!==null;){var ne=er.flags;if(ne&36&&PWe(U,er.alternate,er),ne&128){$=void 0;var ae=er.ref;if(ae!==null){var ye=er.stateNode;switch(er.tag){case 5:$=ye;break;default:$=ye}typeof ae=="function"?ae($):ae.current=$}}er=er.nextEffect}}catch(ge){if(er===null)throw Error(qt(330));Wp(er,ge),er=er.nextEffect}while(er!==null);er=null,yWe(),Fr=i}else t.current=r;if(Xp)Xp=!1,Xw=t,zw=e;else for(er=n;er!==null;)e=er.nextEffect,er.nextEffect=null,er.flags&8&&(ne=er,ne.sibling=null,ne.stateNode=null),er=e;if(n=t.pendingLanes,n===0&&($c=null),n===1?t===yz?Qw++:(Qw=0,yz=t):Qw=0,r=r.stateNode,sg&&typeof sg.onCommitFiberRoot=="function")try{sg.onCommitFiberRoot(Gz,r,void 0,(r.current.flags&64)===64)}catch(ge){}if(Xl(t,Da()),dC)throw dC=!1,t=mz,mz=null,t;return(Fr&8)!==0||Zc(),null}function qWe(){for(;er!==null;){var t=er.alternate;$M||Jw===null||((er.flags&8)!==0?BJ(er,Jw)&&($M=!0):er.tag===13&&RWe(t,er)&&BJ(er,Jw)&&($M=!0));var e=er.flags;(e&256)!==0&&CWe(t,er),(e&512)===0||Xp||(Xp=!0,u1(97,function(){return ed(),null})),er=er.nextEffect}}function ed(){if(zw!==90){var t=97<zw?97:zw;return zw=90,ug(t,jWe)}return!1}function FWe(t,e){gz.push(e,t),Xp||(Xp=!0,u1(97,function(){return ed(),null}))}function dre(t,e){vz.push(e,t),Xp||(Xp=!0,u1(97,function(){return ed(),null}))}function jWe(){if(Xw===null)return!1;var t=Xw;if(Xw=null,(Fr&48)!==0)throw Error(qt(331));var e=Fr;Fr|=32;var r=vz;vz=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],l=i.destroy;if(i.destroy=void 0,typeof l=="function")try{l()}catch(d){if(o===null)throw Error(qt(330));Wp(o,d)}}for(r=gz,gz=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var f=i.create;i.destroy=f()}catch(d){if(o===null)throw Error(qt(330));Wp(o,d)}}for(f=t.current.firstEffect;f!==null;)t=f.nextEffect,f.nextEffect=null,f.flags&8&&(f.sibling=null,f.stateNode=null),f=t;return Fr=e,Zc(),!0}function Bee(t,e,r){e=r4(r,e),e=ire(t,e,1),Gp(t,e),e=wl(),t=MC(t,1),t!==null&&(xC(t,1,e),Xl(t,e))}function Wp(t,e){if(t.tag===3)Bee(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){Bee(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($c===null||!$c.has(n))){t=r4(e,t);var i=ore(r,t,1);if(Gp(r,i),i=wl(),r=MC(r,1),r!==null)xC(r,1,i),Xl(r,i);else if(typeof n.componentDidCatch=="function"&&($c===null||!$c.has(n)))try{n.componentDidCatch(e,t)}catch(o){}break}}r=r.return}}function zWe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=wl(),t.pingedLanes|=t.suspendedLanes&r,as===t&&(Na&r)===r&&(ha===4||ha===3&&(Na&62914560)===Na&&500>Da()-o4?Xy(t,0):i4|=r),Xl(t,e)}function UWe(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=t_()===99?1:2:(sh===0&&(sh=o_),e=ky(62914560&~sh),e===0&&(e=4194304))),r=wl(),t=MC(t,e),t!==null&&(xC(t,e,r),Xl(t,r))}var mre;mre=function(t,e,r){var n=e.lanes;if(t!==null){if(t.memoizedProps!==e.pendingProps||Os.current)Yu=!0;else if((r&n)!==0)Yu=(t.flags&16384)!==0;else{switch(Yu=!1,e.tag){case 3:Mee(e),Aj();break;case 5:_ee(e);break;case 1:Ls(e.type)&&UM(e);break;case 4:nz(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;Ki(rC,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return(r&e.child.childLanes)!==0?Cee(t,e,r):(Ki(Yi,Yi.current&1),e=uh(t,e,r),e!==null?e.sibling:null);Ki(Yi,Yi.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&64)!==0){if(n)return Dee(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ki(Yi,Yi.current),n)break;return null;case 23:case 24:return e.lanes=0,Mj(t,e,r)}return uh(t,e,r)}}else Yu=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=e_(e,ka.current),Zy(e,r),i=Qz(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ls(n)){var o=!0;UM(e)}else o=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zz(e);var l=n.getDerivedStateFromProps;typeof l=="function"&&oC(e,n,l,t),i.updater=IC,e.stateNode=i,i._reactInternals=e,rz(e,n,t,r),e=sz(null,e,n,!0,o,r)}else e.tag=0,Rs(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=VWe(i),t=Zu(i,t),o){case 0:e=az(null,e,i,t,r);break e;case 1:e=Aee(null,e,i,t,r);break e;case 11:e=Tee(null,e,i,t,r);break e;case 14:e=Iee(null,e,i,Zu(i.type,t),n,r);break e}throw Error(qt(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zu(n,i),az(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zu(n,i),Aee(t,e,n,i,r);case 3:if(Mee(e),n=e.updateQueue,t===null||n===null)throw Error(qt(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,zte(t,e),c1(e,n,null,r),n=e.memoizedState.element,n===i)Aj(),e=uh(t,e,r);else{if(i=e.stateNode,(o=i.hydrate)&&(jp=Wy(e.stateNode.containerInfo.firstChild),lh=e,o=Wc=!0),o){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)o=t[i],o._workInProgressVersionPrimary=t[i+1],Yy.push(o);for(r=Gte(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Rs(t,e,n,r),Aj();e=e.child}return e;case 5:return _ee(e),t===null&&iz(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,Qj(n,i)?l=null:o!==null&&Qj(n,o)&&(e.flags|=16),ere(t,e),Rs(t,e,l,r),e.child;case 6:return t===null&&iz(e),null;case 13:return Cee(t,e,r);case 4:return nz(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=aC(e,null,n,r):Rs(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zu(n,i),Tee(t,e,n,i,r);case 7:return Rs(t,e,e.pendingProps,r),e.child;case 8:return Rs(t,e,e.pendingProps.children,r),e.child;case 12:return Rs(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,l=e.memoizedProps,o=i.value;var f=e.type._context;if(Ki(rC,f._currentValue),f._currentValue=o,l!==null)if(f=l.value,o=Wl(f,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(f,o):1073741823)|0,o===0){if(l.children===i.children&&!Os.current){e=uh(t,e,r);break e}}else for(f=e.child,f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){l=f.child;for(var v=d.firstContext;v!==null;){if(v.context===n&&(v.observedBits&o)!==0){f.tag===1&&(v=Vp(-1,r&-r),v.tag=2,Gp(f,v)),f.lanes|=r,v=f.alternate,v!==null&&(v.lanes|=r),jte(f.return,r),d.lanes|=r;break}v=v.next}}else l=f.tag===10&&f.type===e.type?null:f.child;if(l!==null)l.return=f;else for(l=f;l!==null;){if(l===e){l=null;break}if(f=l.sibling,f!==null){f.return=l.return,l=f;break}l=l.return}f=l}Rs(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,n=o.children,Zy(e,r),i=Kl(i,o.unstable_observedBits),n=n(i),e.flags|=1,Rs(t,e,n,r),e.child;case 14:return i=e.type,o=Zu(i,e.pendingProps),o=Zu(i.type,o),Iee(t,e,i,o,n,r);case 15:return Jte(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zu(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ls(n)?(t=!0,UM(e)):t=!1,Zy(e,r),Bte(e,n,i),rz(e,n,i,r),sz(null,e,n,!0,t,r);case 19:return Dee(t,e,r);case 23:return Mj(t,e,r);case 24:return Mj(t,e,r)}throw Error(qt(156,e.tag))};function BWe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Zl(t,e,r,n){return new BWe(t,e,r,n)}function s4(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VWe(t){if(typeof t=="function")return s4(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vC)return 11;if(t===yC)return 14}return 2}function Qp(t,e){var r=t.alternate;return r===null?(r=Zl(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function HM(t,e,r,n,i,o){var l=2;if(n=t,typeof t=="function")s4(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case kp:return Qy(r.children,i,o,e);case $ee:l=8,i|=16;break;case Ez:l=8,i|=1;break;case Bw:return t=Zl(12,r,e,i|8),t.elementType=Bw,t.type=Bw,t.lanes=o,t;case Vw:return t=Zl(13,r,e,i),t.type=Vw,t.elementType=Vw,t.lanes=o,t;case WM:return t=Zl(19,r,e,i),t.elementType=WM,t.lanes=o,t;case Cz:return l4(r,i,o,e);case Dj:return t=Zl(24,r,e,i),t.elementType=Dj,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sz:l=10;break e;case Tz:l=9;break e;case vC:l=11;break e;case yC:l=14;break e;case Iz:l=16,n=null;break e;case Az:l=22;break e}throw Error(qt(130,t==null?t:typeof t,""))}return e=Zl(l,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Qy(t,e,r,n){return t=Zl(7,t,n,e),t.lanes=r,t}function l4(t,e,r,n){return t=Zl(23,t,n,e),t.elementType=Cz,t.lanes=r,t}function Rj(t,e,r){return t=Zl(6,t,null,e),t.lanes=r,t}function Oj(t,e,r){return e=Zl(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GWe(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=gj(0),this.expirationTimes=gj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gj(0),this.mutableSourceEagerHydrationData=null}function $We(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rg,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function mC(t,e,r,n){var i=e.current,o=wl(),l=$p(i);e:if(r){r=r._reactInternals;t:{if(pg(r)!==r||r.tag!==1)throw Error(qt(170));var f=r;do{switch(f.tag){case 3:f=f.stateNode.context;break t;case 1:if(Ls(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break t}}f=f.return}while(f!==null);throw Error(qt(171))}if(r.tag===1){var d=r.type;if(Ls(d)){r=Ote(r,d,f);break e}}r=f}else r=Kp;return e.context===null?e.context=r:e.pendingContext=r,e=Vp(o,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),Gp(i,e),Hp(i,l,o),l}function Lj(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vee(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function u4(t,e){Vee(t,e),(t=t.alternate)&&Vee(t,e)}function HWe(){return null}function c4(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new GWe(t,e,r!=null&&r.hydrate===!0),e=Zl(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,Zz(e),t[i_]=r.current,Ate(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}c4.prototype.render=function(t){mC(t,this._internalRoot,null,null)};c4.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;mC(null,t,null,function(){e[i_]=null})};function y1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function WWe(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new c4(t,0,e?{hydrate:!0}:void 0)}function CC(t,e,r,n,i){var o=r._reactRootContainer;if(o){var l=o._internalRoot;if(typeof i=="function"){var f=i;i=function(){var v=Lj(l);f.call(v)}}mC(e,l,t,i)}else{if(o=r._reactRootContainer=WWe(r,n),l=o._internalRoot,typeof i=="function"){var d=i;i=function(){var v=Lj(l);d.call(v)}}ure(function(){mC(e,l,t,i)})}return Lj(l)}ate=function(t){if(t.tag===13){var e=wl();Hp(t,4,e),u4(t,4)}};Dz=function(t){if(t.tag===13){var e=wl();Hp(t,67108864,e),u4(t,67108864)}};ste=function(t){if(t.tag===13){var e=wl(),r=$p(t);Hp(t,r,e),u4(t,r)}};lte=function(t,e){return e()};Gj=function(t,e,r){switch(e){case"input":if(kj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+"][type=\"radio\"]"),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=SC(n);if(!i)throw Error(qt(90));Wee(n),kj(n,i)}}}break;case"textarea":Yee(t,r);break;case"select":e=r.value,e!=null&&Gy(t,!!r.multiple,e,!1)}};Rz=lre;rte=function(t,e,r,n,i){var o=Fr;Fr|=4;try{return ug(98,t.bind(null,e,r,n,i))}finally{Fr=o,Fr===0&&(s_(),Zc())}};Oz=function(){(Fr&49)===0&&(LWe(),ed())};nte=function(t,e){var r=Fr;Fr|=2;try{return t(e)}finally{Fr=r,Fr===0&&(s_(),Zc())}};function gre(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y1(e))throw Error(qt(200));return $We(t,e,null,r)}var ZWe={Events:[m1,zy,SC,ete,tte,ed,{current:!1}]},Nw={findFiberByHostInstance:ig,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},YWe={bundleType:Nw.bundleType,version:Nw.version,rendererPackageName:Nw.rendererPackageName,rendererConfig:Nw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hg.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ote(t),t===null?null:t.stateNode},findFiberByHostInstance:Nw.findFiberByHostInstance||HWe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(kw=__REACT_DEVTOOLS_GLOBAL_HOOK__,!kw.isDisabled&&kw.supportsFiber))try{Gz=kw.inject(YWe),sg=kw}catch(t){}var kw;Ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZWe;Ql.createPortal=gre;Ql.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(qt(188)):Error(qt(268,Object.keys(t)));return t=ote(e),t=t===null?null:t.stateNode,t};Ql.flushSync=function(t,e){var r=Fr;if((r&48)!==0)return t(e);Fr|=1;try{if(t)return ug(99,t.bind(null,e))}finally{Fr=r,Zc()}};Ql.hydrate=function(t,e,r){if(!y1(e))throw Error(qt(200));return CC(null,t,e,!0,r)};Ql.render=function(t,e,r){if(!y1(e))throw Error(qt(200));return CC(null,t,e,!1,r)};Ql.unmountComponentAtNode=function(t){if(!y1(t))throw Error(qt(40));return t._reactRootContainer?(ure(function(){CC(null,null,t,!1,function(){t._reactRootContainer=null,t[i_]=null})}),!0):!1};Ql.unstable_batchedUpdates=lre;Ql.unstable_createPortal=function(t,e){return gre(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ql.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!y1(r))throw Error(qt(200));if(t==null||t._reactInternals===void 0)throw Error(qt(38));return CC(t,e,r,!1,n)};Ql.version="17.0.2"});var No=R((lfr,_re)=>{"use strict";p();function yre(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yre)}catch(t){console.error(t)}}yre(),_re.exports=vre()});var Ft=R((f4,xre)=>{"use strict";p();var _1=function(t){return t&&t.Math===Math&&t};xre.exports=_1(typeof globalThis=="object"&&globalThis)||_1(typeof window=="object"&&window)||_1(typeof self=="object"&&self)||_1(typeof global=="object"&&global)||_1(typeof f4=="object"&&f4)||function(){return this}()||Function("return this")()});var yt=R((ffr,bre)=>{"use strict";p();bre.exports=function(t){try{return!!t()}catch(e){return!0}}});var sr=R((pfr,wre)=>{"use strict";p();var KWe=yt();wre.exports=!KWe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var l_=R((mfr,Ere)=>{"use strict";p();var XWe=yt();Ere.exports=!XWe(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")})});var jt=R((vfr,Sre)=>{"use strict";p();var QWe=l_(),PC=Function.prototype.call;Sre.exports=QWe?PC.bind(PC):function(){return PC.apply(PC,arguments)}});var x1=R(Are=>{"use strict";p();var Tre={}.propertyIsEnumerable,Ire=Object.getOwnPropertyDescriptor,JWe=Ire&&!Tre.call({1:2},1);Are.f=JWe?function(e){var r=Ire(this,e);return!!r&&r.enumerable}:Tre});var Ds=R((bfr,Mre)=>{"use strict";p();Mre.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}});var ct=R((Efr,Rre)=>{"use strict";p();var Cre=l_(),Pre=Function.prototype,h4=Pre.call,e8e=Cre&&Pre.bind.bind(h4,h4);Rre.exports=Cre?e8e:function(t){return function(){return h4.apply(t,arguments)}}});var da=R((Tfr,Lre)=>{"use strict";p();var Ore=ct(),t8e=Ore({}.toString),r8e=Ore("".slice);Lre.exports=function(t){return r8e(t8e(t),8,-1)}});var hh=R((Afr,Dre)=>{"use strict";p();var n8e=ct(),i8e=yt(),o8e=da(),p4=Object,a8e=n8e("".split);Dre.exports=i8e(function(){return!p4("z").propertyIsEnumerable(0)})?function(t){return o8e(t)==="String"?a8e(t,""):p4(t)}:p4});var Ns=R((Cfr,Nre)=>{"use strict";p();Nre.exports=function(t){return t==null}});var oi=R((Rfr,kre)=>{"use strict";p();var s8e=Ns(),l8e=TypeError;kre.exports=function(t){if(s8e(t))throw new l8e("Can't call method on "+t);return t}});var _o=R((Lfr,qre)=>{"use strict";p();var u8e=hh(),c8e=oi();qre.exports=function(t){return u8e(c8e(t))}});var jr=R((Nfr,Fre)=>{"use strict";p();var d4=typeof document=="object"&&document.all;Fre.exports=typeof d4=="undefined"&&d4!==void 0?function(t){return typeof t=="function"||t===d4}:function(t){return typeof t=="function"}});var hr=R((qfr,jre)=>{"use strict";p();var f8e=jr();jre.exports=function(t){return typeof t=="object"?t!==null:f8e(t)}});var _r=R((jfr,zre)=>{"use strict";p();var m4=Ft(),h8e=jr(),p8e=function(t){return h8e(t)?t:void 0};zre.exports=function(t,e){return arguments.length<2?p8e(m4[t]):m4[t]&&m4[t][e]}});var ma=R((Ufr,Ure)=>{"use strict";p();var d8e=ct();Ure.exports=d8e({}.isPrototypeOf)});var Ku=R((Vfr,Gre)=>{"use strict";p();var m8e=Ft(),Bre=m8e.navigator,Vre=Bre&&Bre.userAgent;Gre.exports=Vre?String(Vre):""});var Qu=R(($fr,Kre)=>{"use strict";p();var Yre=Ft(),g4=Ku(),$re=Yre.process,Hre=Yre.Deno,Wre=$re&&$re.versions||Hre&&Hre.version,Zre=Wre&&Wre.v8,Xu,RC;Zre&&(Xu=Zre.split("."),RC=Xu[0]>0&&Xu[0]<4?1:+(Xu[0]+Xu[1]));!RC&&g4&&(Xu=g4.match(/Edge\/(\d+)/),(!Xu||Xu[1]>=74)&&(Xu=g4.match(/Chrome\/(\d+)/),Xu&&(RC=+Xu[1])));Kre.exports=RC});var td=R((Wfr,Qre)=>{"use strict";p();var Xre=Qu(),g8e=yt(),v8e=Ft(),y8e=v8e.String;Qre.exports=!!Object.getOwnPropertySymbols&&!g8e(function(){var t=Symbol("symbol detection");return!y8e(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Xre&&Xre<41})});var v4=R((Yfr,Jre)=>{"use strict";p();var _8e=td();Jre.exports=_8e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var ph=R((Xfr,ene)=>{"use strict";p();var x8e=_r(),b8e=jr(),w8e=ma(),E8e=v4(),S8e=Object;ene.exports=E8e?function(t){return typeof t=="symbol"}:function(t){var e=x8e("Symbol");return b8e(e)&&w8e(e.prototype,S8e(t))}});var rd=R((Jfr,tne)=>{"use strict";p();var T8e=String;tne.exports=function(t){try{return T8e(t)}catch(e){return"Object"}}});var xr=R((thr,rne)=>{"use strict";p();var I8e=jr(),A8e=rd(),M8e=TypeError;rne.exports=function(t){if(I8e(t))return t;throw new M8e(A8e(t)+" is not a function")}});var Xi=R((nhr,nne)=>{"use strict";p();var C8e=xr(),P8e=Ns();nne.exports=function(t,e){var r=t[e];return P8e(r)?void 0:C8e(r)}});var b4=R((ohr,ine)=>{"use strict";p();var y4=jt(),_4=jr(),x4=hr(),R8e=TypeError;ine.exports=function(t,e){var r,n;if(e==="string"&&_4(r=t.toString)&&!x4(n=y4(r,t))||_4(r=t.valueOf)&&!x4(n=y4(r,t))||e!=="string"&&_4(r=t.toString)&&!x4(n=y4(r,t)))return n;throw new R8e("Can't convert object to primitive value")}});var pn=R((shr,one)=>{"use strict";p();one.exports=!1});var OC=R((uhr,sne)=>{"use strict";p();var ane=Ft(),O8e=Object.defineProperty;sne.exports=function(t,e){try{O8e(ane,t,{value:e,configurable:!0,writable:!0})}catch(r){ane[t]=e}return e}});var b1=R((fhr,cne)=>{"use strict";p();var L8e=pn(),D8e=Ft(),N8e=OC(),lne="__core-js_shared__",une=cne.exports=D8e[lne]||N8e(lne,{});(une.versions||(une.versions=[])).push({version:"3.42.0",mode:L8e?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var dh=R((phr,hne)=>{"use strict";p();var fne=b1();hne.exports=function(t,e){return fne[t]||(fne[t]=e||{})}});var Yr=R((mhr,pne)=>{"use strict";p();var k8e=oi(),q8e=Object;pne.exports=function(t){return q8e(k8e(t))}});var Br=R((vhr,dne)=>{"use strict";p();var F8e=ct(),j8e=Yr(),z8e=F8e({}.hasOwnProperty);dne.exports=Object.hasOwn||function(e,r){return z8e(j8e(e),r)}});var nd=R((_hr,mne)=>{"use strict";p();var U8e=ct(),B8e=0,V8e=Math.random(),G8e=U8e(1 .toString);mne.exports=function(t){return"Symbol("+(t===void 0?"":t)+")_"+G8e(++B8e+V8e,36)}});var mr=R((bhr,vne)=>{"use strict";p();var $8e=Ft(),H8e=dh(),gne=Br(),W8e=nd(),Z8e=td(),Y8e=v4(),u_=$8e.Symbol,w4=H8e("wks"),K8e=Y8e?u_.for||u_:u_&&u_.withoutSetter||W8e;vne.exports=function(t){return gne(w4,t)||(w4[t]=Z8e&&gne(u_,t)?u_[t]:K8e("Symbol."+t)),w4[t]}});var w1=R((Ehr,xne)=>{"use strict";p();var X8e=jt(),yne=hr(),_ne=ph(),Q8e=Xi(),J8e=b4(),eZe=mr(),tZe=TypeError,rZe=eZe("toPrimitive");xne.exports=function(t,e){if(!yne(t)||_ne(t))return t;var r=Q8e(t,rZe),n;if(r){if(e===void 0&&(e="default"),n=X8e(r,t,e),!yne(n)||_ne(n))return n;throw new tZe("Can't convert object to primitive value")}return e===void 0&&(e="number"),J8e(t,e)}});var Yc=R((Thr,bne)=>{"use strict";p();var nZe=w1(),iZe=ph();bne.exports=function(t){var e=nZe(t,"string");return iZe(e)?e:e+""}});var E1=R((Ahr,Ene)=>{"use strict";p();var oZe=Ft(),wne=hr(),E4=oZe.document,aZe=wne(E4)&&wne(E4.createElement);Ene.exports=function(t){return aZe?E4.createElement(t):{}}});var S4=R((Chr,Sne)=>{"use strict";p();var sZe=sr(),lZe=yt(),uZe=E1();Sne.exports=!sZe&&!lZe(function(){return Object.defineProperty(uZe("div"),"a",{get:function(){return 7}}).a!==7})});var Yo=R(Ine=>{"use strict";p();var cZe=sr(),fZe=jt(),hZe=x1(),pZe=Ds(),dZe=_o(),mZe=Yc(),gZe=Br(),vZe=S4(),Tne=Object.getOwnPropertyDescriptor;Ine.f=cZe?Tne:function(e,r){if(e=dZe(e),r=mZe(r),vZe)try{return Tne(e,r)}catch(n){}if(gZe(e,r))return pZe(!fZe(hZe.f,e,r),e[r])}});var T4=R((Lhr,Ane)=>{"use strict";p();var yZe=sr(),_Ze=yt();Ane.exports=yZe&&_Ze(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Bt=R((Nhr,Mne)=>{"use strict";p();var xZe=hr(),bZe=String,wZe=TypeError;Mne.exports=function(t){if(xZe(t))return t;throw new wZe(bZe(t)+" is not an object")}});var ti=R(Pne=>{"use strict";p();var EZe=sr(),SZe=S4(),TZe=T4(),LC=Bt(),Cne=Yc(),IZe=TypeError,I4=Object.defineProperty,AZe=Object.getOwnPropertyDescriptor,A4="enumerable",M4="configurable",C4="writable";Pne.f=EZe?TZe?function(e,r,n){if(LC(e),r=Cne(r),LC(n),typeof e=="function"&&r==="prototype"&&"value"in n&&C4 in n&&!n[C4]){var i=AZe(e,r);i&&i[C4]&&(e[r]=n.value,n={configurable:M4 in n?n[M4]:i[M4],enumerable:A4 in n?n[A4]:i[A4],writable:!1})}return I4(e,r,n)}:I4:function(e,r,n){if(LC(e),r=Cne(r),LC(n),SZe)try{return I4(e,r,n)}catch(i){}if("get"in n||"set"in n)throw new IZe("Accessors not supported");return"value"in n&&(e[r]=n.value),e}});var xo=R((jhr,Rne)=>{"use strict";p();var MZe=sr(),CZe=ti(),PZe=Ds();Rne.exports=MZe?function(t,e,r){return CZe.f(t,e,PZe(1,r))}:function(t,e,r){return t[e]=r,t}});var mg=R((Uhr,Lne)=>{"use strict";p();var P4=sr(),RZe=Br(),One=Function.prototype,OZe=P4&&Object.getOwnPropertyDescriptor,R4=RZe(One,"name"),LZe=R4&&function(){}.name==="something",DZe=R4&&(!P4||P4&&OZe(One,"name").configurable);Lne.exports={EXISTS:R4,PROPER:LZe,CONFIGURABLE:DZe}});var S1=R((Vhr,Dne)=>{"use strict";p();var NZe=ct(),kZe=jr(),O4=b1(),qZe=NZe(Function.toString);kZe(O4.inspectSource)||(O4.inspectSource=function(t){return qZe(t)});Dne.exports=O4.inspectSource});var L4=R(($hr,kne)=>{"use strict";p();var FZe=Ft(),jZe=jr(),Nne=FZe.WeakMap;kne.exports=jZe(Nne)&&/native code/.test(String(Nne))});var T1=R((Whr,Fne)=>{"use strict";p();var zZe=dh(),UZe=nd(),qne=zZe("keys");Fne.exports=function(t){return qne[t]||(qne[t]=UZe(t))}});var c_=R((Yhr,jne)=>{"use strict";p();jne.exports={}});var Rn=R((Xhr,Bne)=>{"use strict";p();var BZe=L4(),Une=Ft(),VZe=hr(),GZe=xo(),D4=Br(),N4=b1(),$Ze=T1(),HZe=c_(),zne="Object already initialized",k4=Une.TypeError,WZe=Une.WeakMap,DC,I1,NC,ZZe=function(t){return NC(t)?I1(t):DC(t,{})},YZe=function(t){return function(e){var r;if(!VZe(e)||(r=I1(e)).type!==t)throw new k4("Incompatible receiver, "+t+" required");return r}};BZe||N4.state?(Ju=N4.state||(N4.state=new WZe),Ju.get=Ju.get,Ju.has=Ju.has,Ju.set=Ju.set,DC=function(t,e){if(Ju.has(t))throw new k4(zne);return e.facade=t,Ju.set(t,e),e},I1=function(t){return Ju.get(t)||{}},NC=function(t){return Ju.has(t)}):(gg=$Ze("state"),HZe[gg]=!0,DC=function(t,e){if(D4(t,gg))throw new k4(zne);return e.facade=t,GZe(t,gg,e),e},I1=function(t){return D4(t,gg)?t[gg]:{}},NC=function(t){return D4(t,gg)});var Ju,gg;Bne.exports={set:DC,get:I1,has:NC,enforce:ZZe,getterFor:YZe}});var A1=R((Jhr,$ne)=>{"use strict";p();var F4=ct(),KZe=yt(),XZe=jr(),kC=Br(),q4=sr(),QZe=mg().CONFIGURABLE,JZe=S1(),Gne=Rn(),eYe=Gne.enforce,tYe=Gne.get,Vne=String,qC=Object.defineProperty,rYe=F4("".slice),nYe=F4("".replace),iYe=F4([].join),oYe=q4&&!KZe(function(){return qC(function(){},"length",{value:8}).length!==8}),aYe=String(String).split("String"),sYe=$ne.exports=function(t,e,r){rYe(Vne(e),0,7)==="Symbol("&&(e="["+nYe(Vne(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!kC(t,"name")||QZe&&t.name!==e)&&(q4?qC(t,"name",{value:e,configurable:!0}):t.name=e),oYe&&r&&kC(r,"arity")&&t.length!==r.arity&&qC(t,"length",{value:r.arity});try{r&&kC(r,"constructor")&&r.constructor?q4&&qC(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var n=eYe(t);return kC(n,"source")||(n.source=iYe(aYe,typeof e=="string"?e:"")),t};Function.prototype.toString=sYe(function(){return XZe(this)&&tYe(this).source||JZe(this)},"toString")});var jn=R((tpr,Hne)=>{"use strict";p();var lYe=jr(),uYe=ti(),cYe=A1(),fYe=OC();Hne.exports=function(t,e,r,n){n||(n={});var i=n.enumerable,o=n.name!==void 0?n.name:e;if(lYe(r)&&cYe(r,o,n),n.global)i?t[e]=r:fYe(e,r);else{try{n.unsafe?t[e]&&(i=!0):delete t[e]}catch(l){}i?t[e]=r:uYe.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t}});var j4=R((npr,Wne)=>{"use strict";p();var hYe=Math.ceil,pYe=Math.floor;Wne.exports=Math.trunc||function(e){var r=+e;return(r>0?pYe:hYe)(r)}});var fi=R((opr,Zne)=>{"use strict";p();var dYe=j4();Zne.exports=function(t){var e=+t;return e!==e||e===0?0:dYe(e)}});var ec=R((spr,Yne)=>{"use strict";p();var mYe=fi(),gYe=Math.max,vYe=Math.min;Yne.exports=function(t,e){var r=mYe(t);return r<0?gYe(r+e,0):vYe(r,e)}});var ks=R((upr,Kne)=>{"use strict";p();var yYe=fi(),_Ye=Math.min;Kne.exports=function(t){var e=yYe(t);return e>0?_Ye(e,9007199254740991):0}});var ln=R((fpr,Xne)=>{"use strict";p();var xYe=ks();Xne.exports=function(t){return xYe(t.length)}});var f_=R((ppr,Jne)=>{"use strict";p();var bYe=_o(),wYe=ec(),EYe=ln(),Qne=function(t){return function(e,r,n){var i=bYe(e),o=EYe(i);if(o===0)return!t&&-1;var l=wYe(n,o),f;if(t&&r!==r){for(;o>l;)if(f=i[l++],f!==f)return!0}else for(;o>l;l++)if((t||l in i)&&i[l]===r)return t||l||0;return!t&&-1}};Jne.exports={includes:Qne(!0),indexOf:Qne(!1)}});var U4=R((mpr,tie)=>{"use strict";p();var SYe=ct(),z4=Br(),TYe=_o(),IYe=f_().indexOf,AYe=c_(),eie=SYe([].push);tie.exports=function(t,e){var r=TYe(t),n=0,i=[],o;for(o in r)!z4(AYe,o)&&z4(r,o)&&eie(i,o);for(;e.length>n;)z4(r,o=e[n++])&&(~IYe(i,o)||eie(i,o));return i}});var FC=R((vpr,rie)=>{"use strict";p();rie.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var id=R(nie=>{"use strict";p();var MYe=U4(),CYe=FC(),PYe=CYe.concat("length","prototype");nie.f=Object.getOwnPropertyNames||function(e){return MYe(e,PYe)}});var M1=R(iie=>{"use strict";p();iie.f=Object.getOwnPropertySymbols});var jC=R((Epr,oie)=>{"use strict";p();var RYe=_r(),OYe=ct(),LYe=id(),DYe=M1(),NYe=Bt(),kYe=OYe([].concat);oie.exports=RYe("Reflect","ownKeys")||function(e){var r=LYe.f(NYe(e)),n=DYe.f;return n?kYe(r,n(e)):r}});var vg=R((Tpr,sie)=>{"use strict";p();var aie=Br(),qYe=jC(),FYe=Yo(),jYe=ti();sie.exports=function(t,e,r){for(var n=qYe(e),i=jYe.f,o=FYe.f,l=0;l<n.length;l++){var f=n[l];!aie(t,f)&&!(r&&aie(r,f))&&i(t,f,o(e,f))}}});var h_=R((Apr,lie)=>{"use strict";p();var zYe=yt(),UYe=jr(),BYe=/#|\.prototype\./,C1=function(t,e){var r=GYe[VYe(t)];return r===HYe?!0:r===$Ye?!1:UYe(e)?zYe(e):!!e},VYe=C1.normalize=function(t){return String(t).replace(BYe,".").toLowerCase()},GYe=C1.data={},$Ye=C1.NATIVE="N",HYe=C1.POLYFILL="P";lie.exports=C1});var oe=R((Cpr,uie)=>{"use strict";p();var zC=Ft(),WYe=Yo().f,ZYe=xo(),YYe=jn(),KYe=OC(),XYe=vg(),QYe=h_();uie.exports=function(t,e){var r=t.target,n=t.global,i=t.stat,o,l,f,d,v,x;if(n?l=zC:i?l=zC[r]||KYe(r,{}):l=zC[r]&&zC[r].prototype,l)for(f in e){if(v=e[f],t.dontCallGetSet?(x=WYe(l,f),d=x&&x.value):d=l[f],o=QYe(n?f:r+(i?".":"#")+f,t.forced),!o&&d!==void 0){if(typeof v==typeof d)continue;XYe(v,d)}(t.sham||d&&d.sham)&&ZYe(v,"sham",!0),YYe(l,f,v,t)}}});var UC=R((Rpr,fie)=>{"use strict";p();var JYe=mr(),e9e=JYe("toStringTag"),cie={};cie[e9e]="z";fie.exports=String(cie)==="[object z]"});var ls=R((Lpr,hie)=>{"use strict";p();var t9e=UC(),r9e=jr(),BC=da(),n9e=mr(),i9e=n9e("toStringTag"),o9e=Object,a9e=BC(function(){return arguments}())==="Arguments",s9e=function(t,e){try{return t[e]}catch(r){}};hie.exports=t9e?BC:function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=s9e(e=o9e(t),i9e))=="string"?r:a9e?BC(e):(n=BC(e))==="Object"&&r9e(e.callee)?"Arguments":n}});var Mr=R((Npr,pie)=>{"use strict";p();var l9e=ls(),u9e=String;pie.exports=function(t){if(l9e(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return u9e(t)}});var yg=R((qpr,die)=>{"use strict";p();var c9e=U4(),f9e=FC();die.exports=Object.keys||function(e){return c9e(e,f9e)}});var VC=R(mie=>{"use strict";p();var h9e=sr(),p9e=T4(),d9e=ti(),m9e=Bt(),g9e=_o(),v9e=yg();mie.f=h9e&&!p9e?Object.defineProperties:function(e,r){m9e(e);for(var n=g9e(r),i=v9e(r),o=i.length,l=0,f;o>l;)d9e.f(e,f=i[l++],n[f]);return e}});var B4=R((Upr,gie)=>{"use strict";p();var y9e=_r();gie.exports=y9e("document","documentElement")});var Qi=R((Vpr,Eie)=>{"use strict";p();var _9e=Bt(),x9e=VC(),vie=FC(),b9e=c_(),w9e=B4(),E9e=E1(),S9e=T1(),yie=">",_ie="<",G4="prototype",$4="script",bie=S9e("IE_PROTO"),V4=function(){},wie=function(t){return _ie+$4+yie+t+_ie+"/"+$4+yie},xie=function(t){t.write(wie("")),t.close();var e=t.parentWindow.Object;return t=null,e},T9e=function(){var t=E9e("iframe"),e="java"+$4+":",r;return t.style.display="none",w9e.appendChild(t),t.src=String(e),r=t.contentWindow.document,r.open(),r.write(wie("document.F=Object")),r.close(),r.F},GC,$C=function(){try{GC=new ActiveXObject("htmlfile")}catch(e){}$C=typeof document!="undefined"?document.domain&&GC?xie(GC):T9e():xie(GC);for(var t=vie.length;t--;)delete $C[G4][vie[t]];return $C()};b9e[bie]=!0;Eie.exports=Object.create||function(e,r){var n;return e!==null?(V4[G4]=_9e(e),n=new V4,V4[G4]=null,n[bie]=e):n=$C(),r===void 0?n:x9e.f(n,r)}});var qs=R(($pr,Sie)=>{"use strict";p();var I9e=ct();Sie.exports=I9e([].slice)});var HC=R((Wpr,Aie)=>{"use strict";p();var A9e=da(),M9e=_o(),Tie=id().f,C9e=qs(),Iie=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],P9e=function(t){try{return Tie(t)}catch(e){return C9e(Iie)}};Aie.exports.f=function(e){return Iie&&A9e(e)==="Window"?P9e(e):Tie(M9e(e))}});var hi=R((Ypr,Cie)=>{"use strict";p();var Mie=A1(),R9e=ti();Cie.exports=function(t,e,r){return r.get&&Mie(r.get,e,{getter:!0}),r.set&&Mie(r.set,e,{setter:!0}),R9e.f(t,e,r)}});var H4=R(Pie=>{"use strict";p();var O9e=mr();Pie.f=O9e});var WC=R((Jpr,Rie)=>{"use strict";p();var L9e=Ft();Rie.exports=L9e});var Ri=R((tdr,Lie)=>{"use strict";p();var Oie=WC(),D9e=Br(),N9e=H4(),k9e=ti().f;Lie.exports=function(t){var e=Oie.Symbol||(Oie.Symbol={});D9e(e,t)||k9e(e,t,{value:N9e.f(t)})}});var W4=R((ndr,Die)=>{"use strict";p();var q9e=jt(),F9e=_r(),j9e=mr(),z9e=jn();Die.exports=function(){var t=F9e("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,n=j9e("toPrimitive");e&&!e[n]&&z9e(e,n,function(i){return q9e(r,this)},{arity:1})}});var us=R((odr,kie)=>{"use strict";p();var U9e=ti().f,B9e=Br(),V9e=mr(),Nie=V9e("toStringTag");kie.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!B9e(t,Nie)&&U9e(t,Nie,{configurable:!0,value:e})}});var od=R((sdr,qie)=>{"use strict";p();var G9e=da(),$9e=ct();qie.exports=function(t){if(G9e(t)==="Function")return $9e(t)}});var Wn=R((udr,jie)=>{"use strict";p();var Fie=od(),H9e=xr(),W9e=l_(),Z9e=Fie(Fie.bind);jie.exports=function(t,e){return H9e(t),e===void 0?t:W9e?Z9e(t,e):function(){return t.apply(e,arguments)}}});var tc=R((fdr,zie)=>{"use strict";p();var Y9e=da();zie.exports=Array.isArray||function(e){return Y9e(e)==="Array"}});var rc=R((pdr,$ie)=>{"use strict";p();var K9e=ct(),X9e=yt(),Uie=jr(),Q9e=ls(),J9e=_r(),eKe=S1(),Bie=function(){},Vie=J9e("Reflect","construct"),Z4=/^\s*(?:class|function)\b/,tKe=K9e(Z4.exec),rKe=!Z4.test(Bie),P1=function(e){if(!Uie(e))return!1;try{return Vie(Bie,[],e),!0}catch(r){return!1}},Gie=function(e){if(!Uie(e))return!1;switch(Q9e(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return rKe||!!tKe(Z4,eKe(e))}catch(r){return!0}};Gie.sham=!0;$ie.exports=!Vie||X9e(function(){var t;return P1(P1.call)||!P1(Object)||!P1(function(){t=!0})||t})?Gie:P1});var Yie=R((mdr,Zie)=>{"use strict";p();var Hie=tc(),nKe=rc(),iKe=hr(),oKe=mr(),aKe=oKe("species"),Wie=Array;Zie.exports=function(t){var e;return Hie(t)&&(e=t.constructor,nKe(e)&&(e===Wie||Hie(e.prototype))?e=void 0:iKe(e)&&(e=e[aKe],e===null&&(e=void 0))),e===void 0?Wie:e}});var p_=R((vdr,Kie)=>{"use strict";p();var sKe=Yie();Kie.exports=function(t,e){return new(sKe(t))(e===0?0:e)}});var Ji=R((_dr,Qie)=>{"use strict";p();var lKe=Wn(),uKe=ct(),cKe=hh(),fKe=Yr(),hKe=ln(),pKe=p_(),Xie=uKe([].push),ad=function(t){var e=t===1,r=t===2,n=t===3,i=t===4,o=t===6,l=t===7,f=t===5||o;return function(d,v,x,b){for(var A=fKe(d),P=cKe(A),N=hKe(P),j=lKe(v,x),D=0,F=b||pKe,U=e?F(d,N):r||l?F(d,0):void 0,$,Z;N>D;D++)if((f||D in P)&&($=P[D],Z=j($,D,A),t))if(e)U[D]=Z;else if(Z)switch(t){case 3:return!0;case 5:return $;case 6:return D;case 2:Xie(U,$)}else switch(t){case 4:return!1;case 7:Xie(U,$)}return o?-1:n||i?i:U}};Qie.exports={forEach:ad(0),map:ad(1),filter:ad(2),some:ad(3),every:ad(4),find:ad(5),findIndex:ad(6),filterReject:ad(7)}});var moe=R(()=>{"use strict";p();var ZC=oe(),L1=Ft(),nU=jt(),dKe=ct(),mKe=pn(),d_=sr(),m_=td(),gKe=yt(),Ko=Br(),vKe=ma(),Q4=Bt(),YC=_o(),iU=Yc(),yKe=Mr(),J4=Ds(),g_=Qi(),toe=yg(),_Ke=id(),roe=HC(),xKe=M1(),noe=Yo(),ioe=ti(),bKe=VC(),ooe=x1(),Y4=jn(),wKe=hi(),oU=dh(),EKe=T1(),aoe=c_(),Jie=nd(),SKe=mr(),TKe=H4(),IKe=Ri(),AKe=W4(),MKe=us(),soe=Rn(),KC=Ji().forEach,Fs=EKe("hidden"),XC="Symbol",O1="prototype",CKe=soe.set,eoe=soe.getterFor(XC),Jl=Object[O1],_g=L1.Symbol,R1=_g&&_g[O1],PKe=L1.RangeError,RKe=L1.TypeError,K4=L1.QObject,loe=noe.f,xg=ioe.f,uoe=roe.f,OKe=ooe.f,coe=dKe([].push),mh=oU("symbols"),D1=oU("op-symbols"),LKe=oU("wks"),eU=!K4||!K4[O1]||!K4[O1].findChild,foe=function(t,e,r){var n=loe(Jl,e);n&&delete Jl[e],xg(t,e,r),n&&t!==Jl&&xg(Jl,e,n)},tU=d_&&gKe(function(){return g_(xg({},"a",{get:function(){return xg(this,"a",{value:7}).a}})).a!==7})?foe:xg,X4=function(t,e){var r=mh[t]=g_(R1);return CKe(r,{type:XC,tag:t,description:e}),d_||(r.description=e),r},QC=function(e,r,n){e===Jl&&QC(D1,r,n),Q4(e);var i=iU(r);return Q4(n),Ko(mh,i)?(n.enumerable?(Ko(e,Fs)&&e[Fs][i]&&(e[Fs][i]=!1),n=g_(n,{enumerable:J4(0,!1)})):(Ko(e,Fs)||xg(e,Fs,J4(1,g_(null))),e[Fs][i]=!0),tU(e,i,n)):xg(e,i,n)},aU=function(e,r){Q4(e);var n=YC(r),i=toe(n).concat(doe(n));return KC(i,function(o){(!d_||nU(rU,n,o))&&QC(e,o,n[o])}),e},DKe=function(e,r){return r===void 0?g_(e):aU(g_(e),r)},rU=function(e){var r=iU(e),n=nU(OKe,this,r);return this===Jl&&Ko(mh,r)&&!Ko(D1,r)?!1:n||!Ko(this,r)||!Ko(mh,r)||Ko(this,Fs)&&this[Fs][r]?n:!0},hoe=function(e,r){var n=YC(e),i=iU(r);if(!(n===Jl&&Ko(mh,i)&&!Ko(D1,i))){var o=loe(n,i);return o&&Ko(mh,i)&&!(Ko(n,Fs)&&n[Fs][i])&&(o.enumerable=!0),o}},poe=function(e){var r=uoe(YC(e)),n=[];return KC(r,function(i){!Ko(mh,i)&&!Ko(aoe,i)&&coe(n,i)}),n},doe=function(t){var e=t===Jl,r=uoe(e?D1:YC(t)),n=[];return KC(r,function(i){Ko(mh,i)&&(!e||Ko(Jl,i))&&coe(n,mh[i])}),n};m_||(_g=function(){if(vKe(R1,this))throw new RKe("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:yKe(arguments[0]),r=Jie(e),n=function(i){var o=this===void 0?L1:this;o===Jl&&nU(n,D1,i),Ko(o,Fs)&&Ko(o[Fs],r)&&(o[Fs][r]=!1);var l=J4(1,i);try{tU(o,r,l)}catch(f){if(!(f instanceof PKe))throw f;foe(o,r,l)}};return d_&&eU&&tU(Jl,r,{configurable:!0,set:n}),X4(r,e)},R1=_g[O1],Y4(R1,"toString",function(){return eoe(this).tag}),Y4(_g,"withoutSetter",function(t){return X4(Jie(t),t)}),ooe.f=rU,ioe.f=QC,bKe.f=aU,noe.f=hoe,_Ke.f=roe.f=poe,xKe.f=doe,TKe.f=function(t){return X4(SKe(t),t)},d_&&(wKe(R1,"description",{configurable:!0,get:function(){return eoe(this).description}}),mKe||Y4(Jl,"propertyIsEnumerable",rU,{unsafe:!0})));ZC({global:!0,constructor:!0,wrap:!0,forced:!m_,sham:!m_},{Symbol:_g});KC(toe(LKe),function(t){IKe(t)});ZC({target:XC,stat:!0,forced:!m_},{useSetter:function(){eU=!0},useSimple:function(){eU=!1}});ZC({target:"Object",stat:!0,forced:!m_,sham:!d_},{create:DKe,defineProperty:QC,defineProperties:aU,getOwnPropertyDescriptor:hoe});ZC({target:"Object",stat:!0,forced:!m_},{getOwnPropertyNames:poe});AKe();MKe(_g,XC);aoe[Fs]=!0});var sU=R((Sdr,goe)=>{"use strict";p();var NKe=td();goe.exports=NKe&&!!Symbol.for&&!!Symbol.keyFor});var yoe=R(()=>{"use strict";p();var kKe=oe(),qKe=_r(),FKe=Br(),jKe=Mr(),voe=dh(),zKe=sU(),lU=voe("string-to-symbol-registry"),UKe=voe("symbol-to-string-registry");kKe({target:"Symbol",stat:!0,forced:!zKe},{for:function(t){var e=jKe(t);if(FKe(lU,e))return lU[e];var r=qKe("Symbol")(e);return lU[e]=r,UKe[r]=e,r}})});var xoe=R(()=>{"use strict";p();var BKe=oe(),VKe=Br(),GKe=ph(),$Ke=rd(),HKe=dh(),WKe=sU(),_oe=HKe("symbol-to-string-registry");BKe({target:"Symbol",stat:!0,forced:!WKe},{keyFor:function(e){if(!GKe(e))throw new TypeError($Ke(e)+" is not a symbol");if(VKe(_oe,e))return _oe[e]}})});var ga=R((Odr,Soe)=>{"use strict";p();var ZKe=l_(),Eoe=Function.prototype,boe=Eoe.apply,woe=Eoe.call;Soe.exports=typeof Reflect=="object"&&Reflect.apply||(ZKe?woe.bind(boe):function(){return woe.apply(boe,arguments)})});var uU=R((Ddr,Moe)=>{"use strict";p();var YKe=ct(),Toe=tc(),KKe=jr(),Ioe=da(),XKe=Mr(),Aoe=YKe([].push);Moe.exports=function(t){if(KKe(t))return t;if(Toe(t)){for(var e=t.length,r=[],n=0;n<e;n++){var i=t[n];typeof i=="string"?Aoe(r,i):(typeof i=="number"||Ioe(i)==="Number"||Ioe(i)==="String")&&Aoe(r,XKe(i))}var o=r.length,l=!0;return function(f,d){if(l)return l=!1,d;if(Toe(this))return d;for(var v=0;v<o;v++)if(r[v]===f)return d}}}});var cU=R(()=>{"use strict";p();var QKe=oe(),koe=_r(),qoe=ga(),JKe=jt(),N1=ct(),Foe=yt(),Coe=jr(),Poe=ph(),joe=qs(),e7e=uU(),t7e=td(),r7e=String,sd=koe("JSON","stringify"),JC=N1(/./.exec),Roe=N1("".charAt),n7e=N1("".charCodeAt),i7e=N1("".replace),o7e=N1(1 .toString),a7e=/[\uD800-\uDFFF]/g,Ooe=/^[\uD800-\uDBFF]$/,Loe=/^[\uDC00-\uDFFF]$/,Doe=!t7e||Foe(function(){var t=koe("Symbol")("stringify detection");return sd([t])!=="[null]"||sd({a:t})!=="{}"||sd(Object(t))!=="{}"}),Noe=Foe(function(){return sd("\uDF06\uD834")!=="\"\\udf06\\ud834\""||sd("\uDEAD")!=="\"\\udead\""}),s7e=function(t,e){var r=joe(arguments),n=e7e(e);if(!(!Coe(n)&&(t===void 0||Poe(t))))return r[1]=function(i,o){if(Coe(n)&&(o=JKe(n,this,r7e(i),o)),!Poe(o))return o},qoe(sd,null,r)},l7e=function(t,e,r){var n=Roe(r,e-1),i=Roe(r,e+1);return JC(Ooe,t)&&!JC(Loe,i)||JC(Loe,t)&&!JC(Ooe,n)?"\\u"+o7e(n7e(t,0),16):t};sd&&QKe({target:"JSON",stat:!0,arity:3,forced:Doe||Noe},{stringify:function(e,r,n){var i=joe(arguments),o=qoe(Doe?s7e:sd,null,i);return Noe&&typeof o=="string"?i7e(o,a7e,l7e):o}})});var Uoe=R(()=>{"use strict";p();var u7e=oe(),c7e=td(),f7e=yt(),zoe=M1(),h7e=Yr(),p7e=!c7e||f7e(function(){zoe.f(1)});u7e({target:"Object",stat:!0,forced:p7e},{getOwnPropertySymbols:function(e){var r=zoe.f;return r?r(h7e(e)):[]}})});var Boe=R(()=>{"use strict";p();moe();yoe();xoe();cU();Uoe()});var Yoe=R(()=>{"use strict";p();var d7e=oe(),m7e=sr(),g7e=Ft(),eP=ct(),v7e=Br(),y7e=jr(),_7e=ma(),x7e=Mr(),b7e=hi(),w7e=vg(),gh=g7e.Symbol,bg=gh&&gh.prototype;m7e&&y7e(gh)&&(!("description"in bg)||gh().description!==void 0)&&(fU={},k1=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:x7e(arguments[0]),r=_7e(bg,this)?new gh(e):e===void 0?gh():gh(e);return e===""&&(fU[r]=!0),r},w7e(k1,gh),k1.prototype=bg,bg.constructor=k1,Voe=String(gh("description detection"))==="Symbol(description detection)",Goe=eP(bg.valueOf),$oe=eP(bg.toString),Hoe=/^Symbol\((.*)\)[^)]+$/,Woe=eP("".replace),Zoe=eP("".slice),b7e(bg,"description",{configurable:!0,get:function(){var e=Goe(this);if(v7e(fU,e))return"";var r=$oe(e),n=Voe?Zoe(r,7,-1):Woe(r,Hoe,"$1");return n===""?void 0:n}}),d7e({global:!0,constructor:!0,forced:!0},{Symbol:k1}));var fU,k1,Voe,Goe,$oe,Hoe,Woe,Zoe});var Koe=R(()=>{"use strict";p();var E7e=Ri();E7e("asyncIterator")});var Xoe=R(()=>{"use strict";p();var S7e=Ri();S7e("hasInstance")});var Qoe=R(()=>{"use strict";p();var T7e=Ri();T7e("isConcatSpreadable")});var Joe=R(()=>{"use strict";p();var I7e=Ri();I7e("iterator")});var eae=R(()=>{"use strict";p();var A7e=Ri();A7e("match")});var tae=R(()=>{"use strict";p();var M7e=Ri();M7e("matchAll")});var rae=R(()=>{"use strict";p();var C7e=Ri();C7e("replace")});var nae=R(()=>{"use strict";p();var P7e=Ri();P7e("search")});var iae=R(()=>{"use strict";p();var R7e=Ri();R7e("species")});var oae=R(()=>{"use strict";p();var O7e=Ri();O7e("split")});var aae=R(()=>{"use strict";p();var L7e=Ri(),D7e=W4();L7e("toPrimitive");D7e()});var sae=R(()=>{"use strict";p();var N7e=_r(),k7e=Ri(),q7e=us();k7e("toStringTag");q7e(N7e("Symbol"),"Symbol")});var lae=R(()=>{"use strict";p();var F7e=Ri();F7e("unscopables")});var q1=R((Lmr,uae)=>{"use strict";p();var j7e=ct(),z7e=xr();uae.exports=function(t,e,r){try{return j7e(z7e(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(n){}}});var hU=R((Nmr,cae)=>{"use strict";p();var U7e=hr();cae.exports=function(t){return U7e(t)||t===null}});var pU=R((qmr,fae)=>{"use strict";p();var B7e=hU(),V7e=String,G7e=TypeError;fae.exports=function(t){if(B7e(t))return t;throw new G7e("Can't set "+V7e(t)+" as a prototype")}});var eu=R((jmr,hae)=>{"use strict";p();var $7e=q1(),H7e=hr(),W7e=oi(),Z7e=pU();hae.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,e={},r;try{r=$7e(Object.prototype,"__proto__","set"),r(e,[]),t=e instanceof Array}catch(n){}return function(i,o){return W7e(i),Z7e(o),H7e(i)&&(t?r(i,o):i.__proto__=o),i}}():void 0)});var dU=R((Umr,pae)=>{"use strict";p();var Y7e=ti().f;pae.exports=function(t,e,r){r in t||Y7e(t,r,{configurable:!0,get:function(){return e[r]},set:function(n){e[r]=n}})}});var ld=R((Vmr,mae)=>{"use strict";p();var K7e=jr(),X7e=hr(),dae=eu();mae.exports=function(t,e,r){var n,i;return dae&&K7e(n=e.constructor)&&n!==r&&X7e(i=n.prototype)&&i!==r.prototype&&dae(t,i),t}});var wg=R(($mr,gae)=>{"use strict";p();var Q7e=Mr();gae.exports=function(t,e){return t===void 0?arguments.length<2?"":e:Q7e(t)}});var mU=R((Wmr,vae)=>{"use strict";p();var J7e=hr(),eXe=xo();vae.exports=function(t,e){J7e(e)&&"cause"in e&&eXe(t,"cause",e.cause)}});var tP=R((Ymr,xae)=>{"use strict";p();var tXe=ct(),yae=Error,rXe=tXe("".replace),nXe=function(t){return String(new yae(t).stack)}("zxcasd"),_ae=/\n\s*at [^:]*:[^\n]*/,iXe=_ae.test(nXe);xae.exports=function(t,e){if(iXe&&typeof t=="string"&&!yae.prepareStackTrace)for(;e--;)t=rXe(t,_ae,"");return t}});var gU=R((Xmr,bae)=>{"use strict";p();var oXe=yt(),aXe=Ds();bae.exports=!oXe(function(){var t=new Error("a");return"stack"in t?(Object.defineProperty(t,"stack",aXe(1,7)),t.stack!==7):!0})});var rP=R((Jmr,Eae)=>{"use strict";p();var sXe=xo(),lXe=tP(),uXe=gU(),wae=Error.captureStackTrace;Eae.exports=function(t,e,r,n){uXe&&(wae?wae(t,e):sXe(t,"stack",lXe(r,n)))}});var vU=R((tgr,Pae)=>{"use strict";p();var Sae=_r(),cXe=Br(),Tae=xo(),fXe=ma(),Iae=eu(),Aae=vg(),Mae=dU(),hXe=ld(),pXe=wg(),dXe=mU(),mXe=rP(),gXe=sr(),Cae=pn();Pae.exports=function(t,e,r,n){var i="stackTraceLimit",o=n?2:1,l=t.split("."),f=l[l.length-1],d=Sae.apply(null,l);if(d){var v=d.prototype;if(!Cae&&cXe(v,"cause")&&delete v.cause,!r)return d;var x=Sae("Error"),b=e(function(A,P){var N=pXe(n?P:A,void 0),j=n?new d(A):new d;return N!==void 0&&Tae(j,"message",N),mXe(j,b,j.stack,2),this&&fXe(v,this)&&hXe(j,this,b),arguments.length>o&&dXe(j,arguments[o]),j});if(b.prototype=v,f!=="Error"?Iae?Iae(b,x):Aae(b,x,{name:!0}):gXe&&i in d&&(Mae(b,d,i),Mae(b,d,"prepareStackTrace")),Aae(b,d),!Cae)try{v.name!==f&&Tae(v,"name",f),v.constructor=b}catch(A){}return b}}});var Dae=R(()=>{"use strict";p();var Oae=oe(),vXe=Ft(),Kc=ga(),Lae=vU(),yU="WebAssembly",Rae=vXe[yU],nP=new Error("e",{cause:7}).cause!==7,Eg=function(t,e){var r={};r[t]=Lae(t,e,nP),Oae({global:!0,constructor:!0,arity:1,forced:nP},r)},_U=function(t,e){if(Rae&&Rae[t]){var r={};r[t]=Lae(yU+"."+t,e,nP),Oae({target:yU,stat:!0,constructor:!0,arity:1,forced:nP},r)}};Eg("Error",function(t){return function(r){return Kc(t,this,arguments)}});Eg("EvalError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("RangeError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("ReferenceError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("SyntaxError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("TypeError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("URIError",function(t){return function(r){return Kc(t,this,arguments)}});_U("CompileError",function(t){return function(r){return Kc(t,this,arguments)}});_U("LinkError",function(t){return function(r){return Kc(t,this,arguments)}});_U("RuntimeError",function(t){return function(r){return Kc(t,this,arguments)}})});var xU=R((agr,kae)=>{"use strict";p();var yXe=sr(),_Xe=yt(),xXe=Bt(),Nae=wg(),iP=Error.prototype.toString,bXe=_Xe(function(){if(yXe){var t=Object.create(Object.defineProperty({},"name",{get:function(){return this===t}}));if(iP.call(t)!=="true")return!0}return iP.call({message:1,name:2})!=="2: 1"||iP.call({})!=="Error"});kae.exports=bXe?function(){var e=xXe(this),r=Nae(e.name,"Error"),n=Nae(e.message);return r?n?r+": "+n:r:n}:iP});var jae=R(()=>{"use strict";p();var wXe=jn(),qae=xU(),Fae=Error.prototype;Fae.toString!==qae&&wXe(Fae,"toString",qae)});var oP=R((fgr,zae)=>{"use strict";p();var EXe=yt();zae.exports=!EXe(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})});var bo=R((pgr,Bae)=>{"use strict";p();var SXe=Br(),TXe=jr(),IXe=Yr(),AXe=T1(),MXe=oP(),Uae=AXe("IE_PROTO"),bU=Object,CXe=bU.prototype;Bae.exports=MXe?bU.getPrototypeOf:function(t){var e=IXe(t);if(SXe(e,Uae))return e[Uae];var r=e.constructor;return TXe(r)&&e instanceof r?r.prototype:e instanceof bU?CXe:null}});var Sg=R((mgr,Vae)=>{"use strict";p();Vae.exports={}});var aP=R((vgr,Gae)=>{"use strict";p();var PXe=mr(),RXe=Sg(),OXe=PXe("iterator"),LXe=Array.prototype;Gae.exports=function(t){return t!==void 0&&(RXe.Array===t||LXe[OXe]===t)}});var Xc=R((_gr,Hae)=>{"use strict";p();var DXe=ls(),$ae=Xi(),NXe=Ns(),kXe=Sg(),qXe=mr(),FXe=qXe("iterator");Hae.exports=function(t){if(!NXe(t))return $ae(t,FXe)||$ae(t,"@@iterator")||kXe[DXe(t)]}});var ud=R((bgr,Wae)=>{"use strict";p();var jXe=jt(),zXe=xr(),UXe=Bt(),BXe=rd(),VXe=Xc(),GXe=TypeError;Wae.exports=function(t,e){var r=arguments.length<2?VXe(t):e;if(zXe(r))return UXe(jXe(r,t));throw new GXe(BXe(t)+" is not iterable")}});var Xo=R((Egr,Yae)=>{"use strict";p();var $Xe=jt(),Zae=Bt(),HXe=Xi();Yae.exports=function(t,e,r){var n,i;Zae(t);try{if(n=HXe(t,"return"),!n){if(e==="throw")throw r;return r}n=$Xe(n,t)}catch(o){i=!0,n=o}if(e==="throw")throw r;if(i)throw n;return Zae(n),r}});var Oi=R((Tgr,Jae)=>{"use strict";p();var WXe=Wn(),ZXe=jt(),YXe=Bt(),KXe=rd(),XXe=aP(),QXe=ln(),Kae=ma(),JXe=ud(),eQe=Xc(),Xae=Xo(),tQe=TypeError,sP=function(t,e){this.stopped=t,this.result=e},Qae=sP.prototype;Jae.exports=function(t,e,r){var n=r&&r.that,i=!!(r&&r.AS_ENTRIES),o=!!(r&&r.IS_RECORD),l=!!(r&&r.IS_ITERATOR),f=!!(r&&r.INTERRUPTED),d=WXe(e,n),v,x,b,A,P,N,j,D=function(U){return v&&Xae(v,"normal",U),new sP(!0,U)},F=function(U){return i?(YXe(U),f?d(U[0],U[1],D):d(U[0],U[1])):f?d(U,D):d(U)};if(o)v=t.iterator;else if(l)v=t;else{if(x=eQe(t),!x)throw new tQe(KXe(t)+" is not iterable");if(XXe(x)){for(b=0,A=QXe(t);A>b;b++)if(P=F(t[b]),P&&Kae(Qae,P))return P;return new sP(!1)}v=JXe(t,x)}for(N=o?t.next:v.next;!(j=ZXe(N,v)).done;){try{P=F(j.value)}catch(U){Xae(v,"throw",U)}if(typeof P=="object"&&P&&Kae(Qae,P))return P}return new sP(!1)}});var tse=R(()=>{"use strict";p();var rQe=oe(),nQe=ma(),iQe=bo(),lP=eu(),oQe=vg(),ese=Qi(),wU=xo(),EU=Ds(),aQe=mU(),sQe=rP(),lQe=Oi(),uQe=wg(),cQe=mr(),fQe=cQe("toStringTag"),uP=Error,hQe=[].push,v_=function(e,r){var n=nQe(SU,this),i;lP?i=lP(new uP,n?iQe(this):SU):(i=n?this:ese(SU),wU(i,fQe,"Error")),r!==void 0&&wU(i,"message",uQe(r)),sQe(i,v_,i.stack,1),arguments.length>2&&aQe(i,arguments[2]);var o=[];return lQe(e,hQe,{that:o}),wU(i,"errors",o),i};lP?lP(v_,uP):oQe(v_,uP,{name:!0});var SU=v_.prototype=ese(uP.prototype,{constructor:EU(1,v_),message:EU(1,""),name:EU(1,"AggregateError")});rQe({global:!0,constructor:!0,arity:2},{AggregateError:v_})});var TU=R(()=>{"use strict";p();tse()});var ose=R(()=>{"use strict";p();var pQe=oe(),dQe=_r(),mQe=ga(),rse=yt(),gQe=vU(),IU="AggregateError",nse=dQe(IU),ise=!rse(function(){return nse([1]).errors[0]!==1})&&rse(function(){return nse([1],IU,{cause:7}).cause!==7});pQe({global:!0,constructor:!0,arity:2,forced:ise},{AggregateError:gQe(IU,function(t){return function(r,n){return mQe(t,this,arguments)}},ise,!0)})});var Li=R((kgr,ase)=>{"use strict";p();var vQe=mr(),yQe=Qi(),_Qe=ti().f,AU=vQe("unscopables"),MU=Array.prototype;MU[AU]===void 0&&_Qe(MU,AU,{configurable:!0,value:yQe(null)});ase.exports=function(t){MU[AU][t]=!0}});var CU=R(()=>{"use strict";p();var xQe=oe(),bQe=Yr(),wQe=ln(),EQe=fi(),SQe=Li();xQe({target:"Array",proto:!0},{at:function(e){var r=bQe(this),n=wQe(r),i=EQe(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:r[o]}});SQe("at")});var cd=R((Ugr,sse)=>{"use strict";p();var TQe=TypeError,IQe=9007199254740991;sse.exports=function(t){if(t>IQe)throw TQe("Maximum allowed index exceeded");return t}});var tu=R((Vgr,lse)=>{"use strict";p();var AQe=sr(),MQe=ti(),CQe=Ds();lse.exports=function(t,e,r){AQe?MQe.f(t,e,CQe(0,r)):t[e]=r}});var y_=R(($gr,use)=>{"use strict";p();var PQe=yt(),RQe=mr(),OQe=Qu(),LQe=RQe("species");use.exports=function(t){return OQe>=51||!PQe(function(){var e=[],r=e.constructor={};return r[LQe]=function(){return{foo:1}},e[t](Boolean).foo!==1})}});var pse=R(()=>{"use strict";p();var DQe=oe(),NQe=yt(),kQe=tc(),qQe=hr(),FQe=Yr(),jQe=ln(),cse=cd(),fse=tu(),zQe=p_(),UQe=y_(),BQe=mr(),VQe=Qu(),hse=BQe("isConcatSpreadable"),GQe=VQe>=51||!NQe(function(){var t=[];return t[hse]=!1,t.concat()[0]!==t}),$Qe=function(t){if(!qQe(t))return!1;var e=t[hse];return e!==void 0?!!e:kQe(t)},HQe=!GQe||!UQe("concat");DQe({target:"Array",proto:!0,arity:1,forced:HQe},{concat:function(e){var r=FQe(this),n=zQe(r,0),i=0,o,l,f,d,v;for(o=-1,f=arguments.length;o<f;o++)if(v=o===-1?r:arguments[o],$Qe(v))for(d=jQe(v),cse(i+d),l=0;l<d;l++,i++)l in v&&fse(n,i,v[l]);else cse(i+1),fse(n,i++,v);return n.length=i,n}})});var F1=R((Kgr,mse)=>{"use strict";p();var dse=rd(),WQe=TypeError;mse.exports=function(t,e){if(!delete t[e])throw new WQe("Cannot delete property "+dse(e)+" of "+dse(t))}});var RU=R((Qgr,gse)=>{"use strict";p();var ZQe=Yr(),PU=ec(),YQe=ln(),KQe=F1(),XQe=Math.min;gse.exports=[].copyWithin||function(e,r){var n=ZQe(this),i=YQe(n),o=PU(e,i),l=PU(r,i),f=arguments.length>2?arguments[2]:void 0,d=XQe((f===void 0?i:PU(f,i))-l,i-o),v=1;for(l<o&&o<l+d&&(v=-1,l+=d-1,o+=d-1);d-->0;)l in n?n[o]=n[l]:KQe(n,o),o+=v,l+=v;return n}});var vse=R(()=>{"use strict";p();var QQe=oe(),JQe=RU(),eJe=Li();QQe({target:"Array",proto:!0},{copyWithin:JQe});eJe("copyWithin")});var ru=R((nvr,yse)=>{"use strict";p();var tJe=yt();yse.exports=function(t,e){var r=[][t];return!!r&&tJe(function(){r.call(null,e||function(){return 1},1)})}});var _se=R(()=>{"use strict";p();var rJe=oe(),nJe=Ji().every,iJe=ru(),oJe=iJe("every");rJe({target:"Array",proto:!0,forced:!oJe},{every:function(e){return nJe(this,e,arguments.length>1?arguments[1]:void 0)}})});var cP=R((lvr,bse)=>{"use strict";p();var aJe=Yr(),xse=ec(),sJe=ln();bse.exports=function(e){for(var r=aJe(this),n=sJe(r),i=arguments.length,o=xse(i>1?arguments[1]:void 0,n),l=i>2?arguments[2]:void 0,f=l===void 0?n:xse(l,n);f>o;)r[o++]=e;return r}});var wse=R(()=>{"use strict";p();var lJe=oe(),uJe=cP(),cJe=Li();lJe({target:"Array",proto:!0},{fill:uJe});cJe("fill")});var Ese=R(()=>{"use strict";p();var fJe=oe(),hJe=Ji().filter,pJe=y_(),dJe=pJe("filter");fJe({target:"Array",proto:!0,forced:!dJe},{filter:function(e){return hJe(this,e,arguments.length>1?arguments[1]:void 0)}})});var Tse=R(()=>{"use strict";p();var mJe=oe(),gJe=Ji().find,vJe=Li(),OU="find",Sse=!0;OU in[]&&Array(1)[OU](function(){Sse=!1});mJe({target:"Array",proto:!0,forced:Sse},{find:function(e){return gJe(this,e,arguments.length>1?arguments[1]:void 0)}});vJe(OU)});var Ase=R(()=>{"use strict";p();var yJe=oe(),_Je=Ji().findIndex,xJe=Li(),LU="findIndex",Ise=!0;LU in[]&&Array(1)[LU](function(){Ise=!1});yJe({target:"Array",proto:!0,forced:Ise},{findIndex:function(e){return _Je(this,e,arguments.length>1?arguments[1]:void 0)}});xJe(LU)});var j1=R((wvr,Cse)=>{"use strict";p();var bJe=Wn(),wJe=hh(),EJe=Yr(),SJe=ln(),Mse=function(t){var e=t===1;return function(r,n,i){for(var o=EJe(r),l=wJe(o),f=SJe(l),d=bJe(n,i),v,x;f-->0;)if(v=l[f],x=d(v,f,o),x)switch(t){case 0:return v;case 1:return f}return e?-1:void 0}};Cse.exports={findLast:Mse(0),findLastIndex:Mse(1)}});var DU=R(()=>{"use strict";p();var TJe=oe(),IJe=j1().findLast,AJe=Li();TJe({target:"Array",proto:!0},{findLast:function(e){return IJe(this,e,arguments.length>1?arguments[1]:void 0)}});AJe("findLast")});var NU=R(()=>{"use strict";p();var MJe=oe(),CJe=j1().findLastIndex,PJe=Li();MJe({target:"Array",proto:!0},{findLastIndex:function(e){return CJe(this,e,arguments.length>1?arguments[1]:void 0)}});PJe("findLastIndex")});var kU=R((Pvr,Rse)=>{"use strict";p();var RJe=tc(),OJe=ln(),LJe=cd(),DJe=Wn(),Pse=function(t,e,r,n,i,o,l,f){for(var d=i,v=0,x=l?DJe(l,f):!1,b,A;v<n;)v in r&&(b=x?x(r[v],v,e):r[v],o>0&&RJe(b)?(A=OJe(b),d=Pse(t,e,b,A,d,o-1)-1):(LJe(d+1),t[d]=b),d++),v++;return d};Rse.exports=Pse});var Ose=R(()=>{"use strict";p();var NJe=oe(),kJe=kU(),qJe=Yr(),FJe=ln(),jJe=fi(),zJe=p_();NJe({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,r=qJe(this),n=FJe(r),i=zJe(r,0);return i.length=kJe(i,r,r,n,0,e===void 0?1:jJe(e)),i}})});var Lse=R(()=>{"use strict";p();var UJe=oe(),BJe=kU(),VJe=xr(),GJe=Yr(),$Je=ln(),HJe=p_();UJe({target:"Array",proto:!0},{flatMap:function(e){var r=GJe(this),n=$Je(r),i;return VJe(e),i=HJe(r,0),i.length=BJe(i,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),i}})});var qU=R((Fvr,Dse)=>{"use strict";p();var WJe=Ji().forEach,ZJe=ru(),YJe=ZJe("forEach");Dse.exports=YJe?[].forEach:function(e){return WJe(this,e,arguments.length>1?arguments[1]:void 0)}});var kse=R(()=>{"use strict";p();var KJe=oe(),Nse=qU();KJe({target:"Array",proto:!0,forced:[].forEach!==Nse},{forEach:Nse})});var fP=R((Vvr,qse)=>{"use strict";p();var XJe=Bt(),QJe=Xo();qse.exports=function(t,e,r,n){try{return n?e(XJe(r)[0],r[1]):e(r)}catch(i){QJe(t,"throw",i)}}});var FU=R(($vr,zse)=>{"use strict";p();var JJe=Wn(),eet=jt(),tet=Yr(),ret=fP(),net=aP(),iet=rc(),oet=ln(),Fse=tu(),aet=ud(),set=Xc(),jse=Array;zse.exports=function(e){var r=tet(e),n=iet(this),i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0;l&&(o=JJe(o,i>2?arguments[2]:void 0));var f=set(r),d=0,v,x,b,A,P,N;if(f&&!(this===jse&&net(f)))for(x=n?new this:[],A=aet(r,f),P=A.next;!(b=eet(P,A)).done;d++)N=l?ret(A,o,[b.value,d],!0):b.value,Fse(x,d,N);else for(v=oet(r),x=n?new this(v):jse(v);v>d;d++)N=l?o(r[d],d):r[d],Fse(x,d,N);return x.length=d,x}});var z1=R((Wvr,Gse)=>{"use strict";p();var uet=mr(),Bse=uet("iterator"),Vse=!1;try{Use=0,jU={next:function(){return{done:!!Use++}},return:function(){Vse=!0}},jU[Bse]=function(){return this},Array.from(jU,function(){throw 2})}catch(t){}var Use,jU;Gse.exports=function(t,e){try{if(!e&&!Vse)return!1}catch(i){return!1}var r=!1;try{var n={};n[Bse]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(i){}return r}});var $se=R(()=>{"use strict";p();var cet=oe(),fet=FU(),het=z1(),pet=!het(function(t){Array.from(t)});cet({target:"Array",stat:!0,forced:pet},{from:fet})});var Hse=R(()=>{"use strict";p();var det=oe(),met=f_().includes,get=yt(),vet=Li(),yet=get(function(){return!Array(1).includes()});det({target:"Array",proto:!0,forced:yet},{includes:function(e){return met(this,e,arguments.length>1?arguments[1]:void 0)}});vet("includes")});var Zse=R(()=>{"use strict";p();var _et=oe(),xet=od(),bet=f_().indexOf,wet=ru(),zU=xet([].indexOf),Wse=!!zU&&1/zU([1],1,-0)<0,Eet=Wse||!wet("indexOf");_et({target:"Array",proto:!0,forced:Eet},{indexOf:function(e){var r=arguments.length>1?arguments[1]:void 0;return Wse?zU(this,e,r)||0:bet(this,e,r)}})});var Yse=R(()=>{"use strict";p();var Tet=oe(),Iet=tc();Tet({target:"Array",stat:!0},{isArray:Iet})});var fd=R((syr,Qse)=>{"use strict";p();var Aet=yt(),Met=jr(),Cet=hr(),Pet=Qi(),Kse=bo(),Ret=jn(),Oet=mr(),Let=pn(),VU=Oet("iterator"),Xse=!1,vh,UU,BU;[].keys&&(BU=[].keys(),"next"in BU?(UU=Kse(Kse(BU)),UU!==Object.prototype&&(vh=UU)):Xse=!0);var Det=!Cet(vh)||Aet(function(){var t={};return vh[VU].call(t)!==t});Det?vh={}:Let&&(vh=Pet(vh));Met(vh[VU])||Ret(vh,VU,function(){return this});Qse.exports={IteratorPrototype:vh,BUGGY_SAFARI_ITERATORS:Xse}});var hd=R((uyr,Jse)=>{"use strict";p();var Net=fd().IteratorPrototype,ket=Qi(),qet=Ds(),Fet=us(),jet=Sg(),zet=function(){return this};Jse.exports=function(t,e,r,n){var i=e+" Iterator";return t.prototype=ket(Net,{next:qet(+!n,r)}),Fet(t,i,!1,!0),jet[i]=zet,t}});var dP=R((fyr,ule)=>{"use strict";p();var Uet=oe(),Bet=jt(),hP=pn(),sle=mg(),Vet=jr(),Get=hd(),ele=bo(),tle=eu(),$et=us(),Het=xo(),GU=jn(),Wet=mr(),rle=Sg(),lle=fd(),Zet=sle.PROPER,Yet=sle.CONFIGURABLE,nle=lle.IteratorPrototype,pP=lle.BUGGY_SAFARI_ITERATORS,U1=Wet("iterator"),ile="keys",B1="values",ole="entries",ale=function(){return this};ule.exports=function(t,e,r,n,i,o,l){Get(r,e,n);var f=function(F){if(F===i&&A)return A;if(!pP&&F&&F in x)return x[F];switch(F){case ile:return function(){return new r(this,F)};case B1:return function(){return new r(this,F)};case ole:return function(){return new r(this,F)}}return function(){return new r(this)}},d=e+" Iterator",v=!1,x=t.prototype,b=x[U1]||x["@@iterator"]||i&&x[i],A=!pP&&b||f(i),P=e==="Array"&&x.entries||b,N,j,D;if(P&&(N=ele(P.call(new t)),N!==Object.prototype&&N.next&&(!hP&&ele(N)!==nle&&(tle?tle(N,nle):Vet(N[U1])||GU(N,U1,ale)),$et(N,d,!0,!0),hP&&(rle[d]=ale))),Zet&&i===B1&&b&&b.name!==B1&&(!hP&&Yet?Het(x,"name",B1):(v=!0,A=function(){return Bet(b,this)})),i)if(j={values:f(B1),keys:o?A:f(ile),entries:f(ole)},l)for(D in j)(pP||v||!(D in x))&&GU(x,D,j[D]);else Uet({target:e,proto:!0,forced:pP||v},j);return(!hP||l)&&x[U1]!==A&&GU(x,U1,A,{name:i}),rle[e]=A,j}});var ko=R((pyr,cle)=>{"use strict";p();cle.exports=function(t,e){return{value:t,done:e}}});var V1=R((myr,mle)=>{"use strict";p();var Ket=_o(),$U=Li(),fle=Sg(),ple=Rn(),Xet=ti().f,Qet=dP(),mP=ko(),Jet=pn(),ett=sr(),dle="Array Iterator",ttt=ple.set,rtt=ple.getterFor(dle);mle.exports=Qet(Array,"Array",function(t,e){ttt(this,{type:dle,target:Ket(t),index:0,kind:e})},function(){var t=rtt(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,mP(void 0,!0);switch(t.kind){case"keys":return mP(r,!1);case"values":return mP(e[r],!1)}return mP([r,e[r]],!1)},"values");var hle=fle.Arguments=fle.Array;$U("keys");$U("values");$U("entries");if(!Jet&&ett&&hle.name!=="values")try{Xet(hle,"name",{value:"values"})}catch(t){}});var gle=R(()=>{"use strict";p();var ntt=oe(),itt=ct(),ott=hh(),att=_o(),stt=ru(),ltt=itt([].join),utt=ott!==Object,ctt=utt||!stt("join",",");ntt({target:"Array",proto:!0,forced:ctt},{join:function(e){return ltt(att(this),e===void 0?",":e)}})});var WU=R((xyr,yle)=>{"use strict";p();var ftt=ga(),htt=_o(),ptt=fi(),dtt=ln(),mtt=ru(),gtt=Math.min,HU=[].lastIndexOf,vle=!!HU&&1/[1].lastIndexOf(1,-0)<0,vtt=mtt("lastIndexOf"),ytt=vle||!vtt;yle.exports=ytt?function(e){if(vle)return ftt(HU,this,arguments)||0;var r=htt(this),n=dtt(r);if(n===0)return-1;var i=n-1;for(arguments.length>1&&(i=gtt(i,ptt(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in r&&r[i]===e)return i||0;return-1}:HU});var xle=R(()=>{"use strict";p();var _tt=oe(),_le=WU();_tt({target:"Array",proto:!0,forced:_le!==[].lastIndexOf},{lastIndexOf:_le})});var ble=R(()=>{"use strict";p();var xtt=oe(),btt=Ji().map,wtt=y_(),Ett=wtt("map");xtt({target:"Array",proto:!0,forced:!Ett},{map:function(e){return btt(this,e,arguments.length>1?arguments[1]:void 0)}})});var Ele=R(()=>{"use strict";p();var Stt=oe(),Ttt=yt(),Itt=rc(),Att=tu(),wle=Array,Mtt=Ttt(function(){function t(){}return!(wle.of.call(t)instanceof t)});Stt({target:"Array",stat:!0,forced:Mtt},{of:function(){for(var e=0,r=arguments.length,n=new(Itt(this)?this:wle)(r);r>e;)Att(n,e,arguments[e++]);return n.length=r,n}})});var gP=R((Ryr,Sle)=>{"use strict";p();var Ctt=sr(),Ptt=tc(),Rtt=TypeError,Ott=Object.getOwnPropertyDescriptor,Ltt=Ctt&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();Sle.exports=Ltt?function(t,e){if(Ptt(t)&&!Ott(t,"length").writable)throw new Rtt("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}});var Tle=R(()=>{"use strict";p();var Dtt=oe(),Ntt=Yr(),ktt=ln(),qtt=gP(),Ftt=cd(),jtt=yt(),ztt=jtt(function(){return[].push.call({length:4294967296},1)!==4294967297}),Utt=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},Btt=ztt||!Utt();Dtt({target:"Array",proto:!0,arity:1,forced:Btt},{push:function(e){var r=Ntt(this),n=ktt(r),i=arguments.length;Ftt(n+i);for(var o=0;o<i;o++)r[n]=arguments[o],n++;return qtt(r,n),n}})});var G1=R((kyr,Cle)=>{"use strict";p();var Vtt=xr(),Gtt=Yr(),$tt=hh(),Htt=ln(),Ile=TypeError,Ale="Reduce of empty array with no initial value",Mle=function(t){return function(e,r,n,i){var o=Gtt(e),l=$tt(o),f=Htt(o);if(Vtt(r),f===0&&n<2)throw new Ile(Ale);var d=t?f-1:0,v=t?-1:1;if(n<2)for(;;){if(d in l){i=l[d],d+=v;break}if(d+=v,t?d<0:f<=d)throw new Ile(Ale)}for(;t?d>=0:f>d;d+=v)d in l&&(i=r(i,l[d],d,o));return i}};Cle.exports={left:Mle(!1),right:Mle(!0)}});var H1=R((Fyr,Ple)=>{"use strict";p();var $1=Ft(),Wtt=Ku(),Ztt=da(),vP=function(t){return Wtt.slice(0,t.length)===t};Ple.exports=function(){return vP("Bun/")?"BUN":vP("Cloudflare-Workers")?"CLOUDFLARE":vP("Deno/")?"DENO":vP("Node.js/")?"NODE":$1.Bun&&typeof Bun.version=="string"?"BUN":$1.Deno&&typeof Deno.version=="object"?"DENO":Ztt($1.process)==="process"?"NODE":$1.window&&$1.document?"BROWSER":"REST"}()});var Tg=R((zyr,Rle)=>{"use strict";p();var Ytt=H1();Rle.exports=Ytt==="NODE"});var Lle=R(()=>{"use strict";p();var Ktt=oe(),Xtt=G1().left,Qtt=ru(),Ole=Qu(),Jtt=Tg(),ert=!Jtt&&Ole>79&&Ole<83,trt=ert||!Qtt("reduce");Ktt({target:"Array",proto:!0,forced:trt},{reduce:function(e){var r=arguments.length;return Xtt(this,e,r,r>1?arguments[1]:void 0)}})});var Nle=R(()=>{"use strict";p();var rrt=oe(),nrt=G1().right,irt=ru(),Dle=Qu(),ort=Tg(),art=!ort&&Dle>79&&Dle<83,srt=art||!irt("reduceRight");rrt({target:"Array",proto:!0,forced:srt},{reduceRight:function(e){return nrt(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var qle=R(()=>{"use strict";p();var lrt=oe(),urt=ct(),crt=tc(),frt=urt([].reverse),kle=[1,2];lrt({target:"Array",proto:!0,forced:String(kle)===String(kle.reverse())},{reverse:function(){return crt(this)&&(this.length=this.length),frt(this)}})});var zle=R(()=>{"use strict";p();var hrt=oe(),Fle=tc(),prt=rc(),drt=hr(),jle=ec(),mrt=ln(),grt=_o(),vrt=tu(),yrt=mr(),_rt=y_(),xrt=qs(),brt=_rt("slice"),wrt=yrt("species"),ZU=Array,Ert=Math.max;hrt({target:"Array",proto:!0,forced:!brt},{slice:function(e,r){var n=grt(this),i=mrt(n),o=jle(e,i),l=jle(r===void 0?i:r,i),f,d,v;if(Fle(n)&&(f=n.constructor,prt(f)&&(f===ZU||Fle(f.prototype))?f=void 0:drt(f)&&(f=f[wrt],f===null&&(f=void 0)),f===ZU||f===void 0))return xrt(n,o,l);for(d=new(f===void 0?ZU:f)(Ert(l-o,0)),v=0;o<l;o++,v++)o in n&&vrt(d,v,n[o]);return d.length=v,d}})});var Ule=R(()=>{"use strict";p();var Srt=oe(),Trt=Ji().some,Irt=ru(),Art=Irt("some");Srt({target:"Array",proto:!0,forced:!Art},{some:function(e){return Trt(this,e,arguments.length>1?arguments[1]:void 0)}})});var yP=R((n_r,Vle)=>{"use strict";p();var Ble=qs(),Mrt=Math.floor,YU=function(t,e){var r=t.length;if(r<8)for(var n=1,i,o;n<r;){for(o=n,i=t[n];o&&e(t[o-1],i)>0;)t[o]=t[--o];o!==n++&&(t[o]=i)}else for(var l=Mrt(r/2),f=YU(Ble(t,0,l),e),d=YU(Ble(t,l),e),v=f.length,x=d.length,b=0,A=0;b<v||A<x;)t[b+A]=b<v&&A<x?e(f[b],d[A])<=0?f[b++]:d[A++]:b<v?f[b++]:d[A++];return t};Vle.exports=YU});var KU=R((o_r,$le)=>{"use strict";p();var Crt=Ku(),Gle=Crt.match(/firefox\/(\d+)/i);$le.exports=!!Gle&&+Gle[1]});var XU=R((s_r,Hle)=>{"use strict";p();var Prt=Ku();Hle.exports=/MSIE|Trident/.test(Prt)});var _P=R((u_r,Zle)=>{"use strict";p();var Rrt=Ku(),Wle=Rrt.match(/AppleWebKit\/(\d+)\./);Zle.exports=!!Wle&&+Wle[1]});var nue=R(()=>{"use strict";p();var Ort=oe(),tue=ct(),Lrt=xr(),Drt=Yr(),Yle=ln(),Nrt=F1(),Kle=Mr(),QU=yt(),krt=yP(),qrt=ru(),Xle=KU(),Frt=XU(),Qle=Qu(),Jle=_P(),pd=[],eue=tue(pd.sort),jrt=tue(pd.push),zrt=QU(function(){pd.sort(void 0)}),Urt=QU(function(){pd.sort(null)}),Brt=qrt("sort"),rue=!QU(function(){if(Qle)return Qle<70;if(!(Xle&&Xle>3)){if(Frt)return!0;if(Jle)return Jle<603;var t="",e,r,n,i;for(e=65;e<76;e++){switch(r=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)pd.push({k:r+i,v:n})}for(pd.sort(function(o,l){return l.v-o.v}),i=0;i<pd.length;i++)r=pd[i].k.charAt(0),t.charAt(t.length-1)!==r&&(t+=r);return t!=="DGBEFHACIJK"}}),Vrt=zrt||!Urt||!Brt||!rue,Grt=function(t){return function(e,r){return r===void 0?-1:e===void 0?1:t!==void 0?+t(e,r)||0:Kle(e)>Kle(r)?1:-1}};Ort({target:"Array",proto:!0,forced:Vrt},{sort:function(e){e!==void 0&&Lrt(e);var r=Drt(this);if(rue)return e===void 0?eue(r):eue(r,e);var n=[],i=Yle(r),o,l;for(l=0;l<i;l++)l in r&&jrt(n,r[l]);for(krt(n,Grt(e)),o=Yle(n),l=0;l<o;)r[l]=n[l++];for(;l<i;)Nrt(r,l++);return r}})});var dd=R((d_r,oue)=>{"use strict";p();var $rt=_r(),Hrt=hi(),Wrt=mr(),Zrt=sr(),iue=Wrt("species");oue.exports=function(t){var e=$rt(t);Zrt&&e&&!e[iue]&&Hrt(e,iue,{configurable:!0,get:function(){return this}})}});var aue=R(()=>{"use strict";p();var Yrt=dd();Yrt("Array")});var sue=R(()=>{"use strict";p();var Krt=oe(),Xrt=Yr(),Qrt=ec(),Jrt=fi(),ent=ln(),tnt=gP(),rnt=cd(),nnt=p_(),int=tu(),JU=F1(),ont=y_(),ant=ont("splice"),snt=Math.max,lnt=Math.min;Krt({target:"Array",proto:!0,forced:!ant},{splice:function(e,r){var n=Xrt(this),i=ent(n),o=Qrt(e,i),l=arguments.length,f,d,v,x,b,A;for(l===0?f=d=0:l===1?(f=0,d=i-o):(f=l-2,d=lnt(snt(Jrt(r),0),i-o)),rnt(i+f-d),v=nnt(n,d),x=0;x<d;x++)b=o+x,b in n&&int(v,x,n[b]);if(v.length=d,f<d){for(x=o;x<i-d;x++)b=x+d,A=x+f,b in n?n[A]=n[b]:JU(n,A);for(x=i;x>i-d+f;x--)JU(n,x-1)}else if(f>d)for(x=i-d;x>o;x--)b=x+d-1,A=x+f-1,b in n?n[A]=n[b]:JU(n,A);for(x=0;x<f;x++)n[x+o]=arguments[x+2];return tnt(n,i-d+f),v}})});var eB=R((w_r,lue)=>{"use strict";p();var unt=ln();lue.exports=function(t,e){for(var r=unt(t),n=new e(r),i=0;i<r;i++)n[i]=t[r-i-1];return n}});var tB=R(()=>{"use strict";p();var cnt=oe(),fnt=eB(),hnt=_o(),pnt=Li(),dnt=Array;cnt({target:"Array",proto:!0},{toReversed:function(){return fnt(hnt(this),dnt)}});pnt("toReversed")});var yh=R((A_r,uue)=>{"use strict";p();var mnt=ln();uue.exports=function(t,e,r){for(var n=0,i=arguments.length>2?r:mnt(e),o=new t(i);i>n;)o[n]=e[n++];return o}});var rB=R((C_r,cue)=>{"use strict";p();var gnt=Ft();cue.exports=function(t,e){var r=gnt[t],n=r&&r.prototype;return n&&n[e]}});var nB=R(()=>{"use strict";p();var vnt=oe(),ynt=ct(),_nt=xr(),xnt=_o(),bnt=yh(),wnt=rB(),Ent=Li(),Snt=Array,Tnt=ynt(wnt("Array","sort"));vnt({target:"Array",proto:!0},{toSorted:function(e){e!==void 0&&_nt(e);var r=xnt(this),n=bnt(Snt,r);return Tnt(n,e)}});Ent("toSorted")});var iB=R(()=>{"use strict";p();var Int=oe(),Ant=Li(),Mnt=cd(),Cnt=ln(),Pnt=ec(),Rnt=_o(),Ont=fi(),Lnt=Array,Dnt=Math.max,Nnt=Math.min;Int({target:"Array",proto:!0},{toSpliced:function(e,r){var n=Rnt(this),i=Cnt(n),o=Pnt(e,i),l=arguments.length,f=0,d,v,x,b;for(l===0?d=v=0:l===1?(d=0,v=i-o):(d=l-2,v=Nnt(Dnt(Ont(r),0),i-o)),x=Mnt(i+d-v),b=Lnt(x);f<o;f++)b[f]=n[f];for(;f<o+d;f++)b[f]=arguments[f-o+2];for(;f<x;f++)b[f]=n[f+v-d];return b}});Ant("toSpliced")});var fue=R(()=>{"use strict";p();var knt=Li();knt("flat")});var hue=R(()=>{"use strict";p();var qnt=Li();qnt("flatMap")});var pue=R(()=>{"use strict";p();var Fnt=oe(),jnt=Yr(),znt=ln(),Unt=gP(),Bnt=F1(),Vnt=cd(),Gnt=[].unshift(0)!==1,$nt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},Hnt=Gnt||!$nt();Fnt({target:"Array",proto:!0,arity:1,forced:Hnt},{unshift:function(e){var r=jnt(this),n=znt(r),i=arguments.length;if(i){Vnt(n+i);for(var o=n;o--;){var l=o+i;o in r?r[l]=r[o]:Bnt(r,l)}for(var f=0;f<i;f++)r[f]=arguments[f]}return Unt(r,n+i)}})});var oB=R((H_r,due)=>{"use strict";p();var Wnt=ln(),Znt=fi(),Ynt=RangeError;due.exports=function(t,e,r,n){var i=Wnt(t),o=Znt(r),l=o<0?i+o:o;if(l>=i||l<0)throw new Ynt("Incorrect index");for(var f=new e(i),d=0;d<i;d++)f[d]=d===l?n:t[d];return f}});var aB=R(()=>{"use strict";p();var Knt=oe(),Xnt=oB(),Qnt=_o(),Jnt=Array;Knt({target:"Array",proto:!0},{with:function(t,e){return Xnt(Qnt(this),Jnt,t,e)}})});var W1=R((X_r,mue)=>{"use strict";p();mue.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var nu=R((J_r,gue)=>{"use strict";p();var eit=jn();gue.exports=function(t,e,r){for(var n in e)eit(t,n,e[n],r);return t}});var qa=R((t0r,vue)=>{"use strict";p();var tit=ma(),rit=TypeError;vue.exports=function(t,e){if(tit(e,t))return t;throw new rit("Incorrect invocation")}});var __=R((n0r,yue)=>{"use strict";p();var nit=fi(),iit=ks(),oit=RangeError;yue.exports=function(t){if(t===void 0)return 0;var e=nit(t),r=iit(e);if(e!==r)throw new oit("Wrong length or index");return r}});var xP=R((o0r,_ue)=>{"use strict";p();_ue.exports=Math.sign||function(e){var r=+e;return r===0||r!==r?r:r<0?-1:1}});var sB=R((s0r,bue)=>{"use strict";p();var ait=2220446049250313e-31,xue=1/ait;bue.exports=function(t){return t+xue-xue}});var lB=R((u0r,wue)=>{"use strict";p();var sit=xP(),lit=sB(),uit=Math.abs,cit=2220446049250313e-31;wue.exports=function(t,e,r,n){var i=+t,o=uit(i),l=sit(i);if(o<n)return l*lit(o/n/e)*n*e;var f=(1+e/cit)*o,d=f-(f-o);return d>r||d!==d?l*(1/0):l*d}});var bP=R((f0r,Eue)=>{"use strict";p();var fit=lB(),hit=1.1920928955078125e-7,pit=34028234663852886e22,dit=11754943508222875e-54;Eue.exports=Math.fround||function(e){return fit(e,hit,pit,dit)}});var Tue=R((p0r,Sue)=>{"use strict";p();var mit=Array,git=Math.abs,_h=Math.pow,vit=Math.floor,yit=Math.log,_it=Math.LN2,xit=function(t,e,r){var n=mit(r),i=r*8-e-1,o=(1<<i)-1,l=o>>1,f=e===23?_h(2,-24)-_h(2,-77):0,d=t<0||t===0&&1/t<0?1:0,v=0,x,b,A;for(t=git(t),t!==t||t===1/0?(b=t!==t?1:0,x=o):(x=vit(yit(t)/_it),A=_h(2,-x),t*A<1&&(x--,A*=2),x+l>=1?t+=f/A:t+=f*_h(2,1-l),t*A>=2&&(x++,A/=2),x+l>=o?(b=0,x=o):x+l>=1?(b=(t*A-1)*_h(2,e),x+=l):(b=t*_h(2,l-1)*_h(2,e),x=0));e>=8;)n[v++]=b&255,b/=256,e-=8;for(x=x<<e|b,i+=e;i>0;)n[v++]=x&255,x/=256,i-=8;return n[v-1]|=d*128,n},bit=function(t,e){var r=t.length,n=r*8-e-1,i=(1<<n)-1,o=i>>1,l=n-7,f=r-1,d=t[f--],v=d&127,x;for(d>>=7;l>0;)v=v*256+t[f--],l-=8;for(x=v&(1<<-l)-1,v>>=-l,l+=e;l>0;)x=x*256+t[f--],l-=8;if(v===0)v=1-o;else{if(v===i)return x?NaN:d?-1/0:1/0;x+=_h(2,e),v-=o}return(d?-1:1)*x*_h(2,v-e)};Sue.exports={pack:xit,unpack:bit}});var K1=R((m0r,Bue)=>{"use strict";p();var IP=Ft(),pB=ct(),uB=sr(),wit=W1(),que=mg(),Eit=xo(),Sit=hi(),Iue=nu(),cB=yt(),wP=qa(),Tit=fi(),Iit=ks(),SP=__(),Ait=bP(),Fue=Tue(),Mit=bo(),Aue=eu(),Cit=cP(),Pit=qs(),Rit=ld(),Oit=vg(),jue=us(),dB=Rn(),Lit=que.PROPER,Mue=que.CONFIGURABLE,b_="ArrayBuffer",AP="DataView",w_="prototype",Dit="Wrong length",zue="Wrong index",Cue=dB.getterFor(b_),Y1=dB.getterFor(AP),Pue=dB.set,nc=IP[b_],Sl=nc,x_=Sl&&Sl[w_],Qc=IP[AP],Ig=Qc&&Qc[w_],Rue=Object.prototype,Nit=IP.Array,TP=IP.RangeError,kit=pB(Cit),qit=pB([].reverse),Uue=Fue.pack,Oue=Fue.unpack,Lue=function(t){return[t&255]},Due=function(t){return[t&255,t>>8&255]},Nue=function(t){return[t&255,t>>8&255,t>>16&255,t>>24&255]},kue=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Fit=function(t){return Uue(Ait(t),23,4)},jit=function(t){return Uue(t,52,8)},EP=function(t,e,r){Sit(t[w_],e,{configurable:!0,get:function(){return r(this)[e]}})},md=function(t,e,r,n){var i=Y1(t),o=SP(r),l=!!n;if(o+e>i.byteLength)throw new TP(zue);var f=i.bytes,d=o+i.byteOffset,v=Pit(f,d,d+e);return l?v:qit(v)},gd=function(t,e,r,n,i,o){var l=Y1(t),f=SP(r),d=n(+i),v=!!o;if(f+e>l.byteLength)throw new TP(zue);for(var x=l.bytes,b=f+l.byteOffset,A=0;A<e;A++)x[b+A]=d[v?A:e-A-1]};wit?(fB=Lit&&nc.name!==b_,!cB(function(){nc(1)})||!cB(function(){new nc(-1)})||cB(function(){return new nc,new nc(1.5),new nc(NaN),nc.length!==1||fB&&!Mue})?(Sl=function(e){return wP(this,x_),Rit(new nc(SP(e)),this,Sl)},Sl[w_]=x_,x_.constructor=Sl,Oit(Sl,nc)):fB&&Mue&&Eit(nc,"name",b_),Aue&&Mit(Ig)!==Rue&&Aue(Ig,Rue),Z1=new Qc(new Sl(2)),hB=pB(Ig.setInt8),Z1.setInt8(0,2147483648),Z1.setInt8(1,2147483649),(Z1.getInt8(0)||!Z1.getInt8(1))&&Iue(Ig,{setInt8:function(e,r){hB(this,e,r<<24>>24)},setUint8:function(e,r){hB(this,e,r<<24>>24)}},{unsafe:!0})):(Sl=function(e){wP(this,x_);var r=SP(e);Pue(this,{type:b_,bytes:kit(Nit(r),0),byteLength:r}),uB||(this.byteLength=r,this.detached=!1)},x_=Sl[w_],Qc=function(e,r,n){wP(this,Ig),wP(e,x_);var i=Cue(e),o=i.byteLength,l=Tit(r);if(l<0||l>o)throw new TP("Wrong offset");if(n=n===void 0?o-l:Iit(n),l+n>o)throw new TP(Dit);Pue(this,{type:AP,buffer:e,byteLength:n,byteOffset:l,bytes:i.bytes}),uB||(this.buffer=e,this.byteLength=n,this.byteOffset=l)},Ig=Qc[w_],uB&&(EP(Sl,"byteLength",Cue),EP(Qc,"buffer",Y1),EP(Qc,"byteLength",Y1),EP(Qc,"byteOffset",Y1)),Iue(Ig,{getInt8:function(e){return md(this,1,e)[0]<<24>>24},getUint8:function(e){return md(this,1,e)[0]},getInt16:function(e){var r=md(this,2,e,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(e){var r=md(this,2,e,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(e){return kue(md(this,4,e,arguments.length>1?arguments[1]:!1))},getUint32:function(e){return kue(md(this,4,e,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(e){return Oue(md(this,4,e,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(e){return Oue(md(this,8,e,arguments.length>1?arguments[1]:!1),52)},setInt8:function(e,r){gd(this,1,e,Lue,r)},setUint8:function(e,r){gd(this,1,e,Lue,r)},setInt16:function(e,r){gd(this,2,e,Due,r,arguments.length>2?arguments[2]:!1)},setUint16:function(e,r){gd(this,2,e,Due,r,arguments.length>2?arguments[2]:!1)},setInt32:function(e,r){gd(this,4,e,Nue,r,arguments.length>2?arguments[2]:!1)},setUint32:function(e,r){gd(this,4,e,Nue,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(e,r){gd(this,4,e,Fit,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(e,r){gd(this,8,e,jit,r,arguments.length>2?arguments[2]:!1)}}));var fB,Z1,hB;jue(Sl,b_);jue(Qc,AP);Bue.exports={ArrayBuffer:Sl,DataView:Qc}});var Gue=R(()=>{"use strict";p();var zit=oe(),Uit=Ft(),Bit=K1(),Vit=dd(),mB="ArrayBuffer",Vue=Bit[mB],Git=Uit[mB];zit({global:!0,constructor:!0,forced:Git!==Vue},{ArrayBuffer:Vue});Vit(mB)});var Hr=R((x0r,ece)=>{"use strict";p();var $it=W1(),_B=sr(),cs=Ft(),Zue=jr(),PP=hr(),yd=Br(),xB=ls(),Hit=rd(),Wit=xo(),gB=jn(),Zit=hi(),Yit=ma(),RP=bo(),S_=eu(),Kit=mr(),Xit=nd(),Yue=Rn(),Kue=Yue.enforce,Qit=Yue.get,MP=cs.Int8Array,vB=MP&&MP.prototype,$ue=cs.Uint8ClampedArray,Hue=$ue&&$ue.prototype,Jc=MP&&RP(MP),ic=vB&&RP(vB),Jit=Object.prototype,bB=cs.TypeError,Wue=Kit("toStringTag"),yB=Xit("TYPED_ARRAY_TAG"),CP="TypedArrayConstructor",xh=$it&&!!S_&&xB(cs.opera)!=="Opera",Xue=!1,js,vd,E_,bh={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},wB={BigInt64Array:8,BigUint64Array:8},eot=function(e){if(!PP(e))return!1;var r=xB(e);return r==="DataView"||yd(bh,r)||yd(wB,r)},Que=function(t){var e=RP(t);if(PP(e)){var r=Qit(e);return r&&yd(r,CP)?r[CP]:Que(e)}},Jue=function(t){if(!PP(t))return!1;var e=xB(t);return yd(bh,e)||yd(wB,e)},tot=function(t){if(Jue(t))return t;throw new bB("Target is not a typed array")},rot=function(t){if(Zue(t)&&(!S_||Yit(Jc,t)))return t;throw new bB(Hit(t)+" is not a typed array constructor")},not=function(t,e,r,n){if(_B){if(r)for(var i in bh){var o=cs[i];if(o&&yd(o.prototype,t))try{delete o.prototype[t]}catch(l){try{o.prototype[t]=e}catch(f){}}}(!ic[t]||r)&&gB(ic,t,r?e:xh&&vB[t]||e,n)}},iot=function(t,e,r){var n,i;if(_B){if(S_){if(r){for(n in bh)if(i=cs[n],i&&yd(i,t))try{delete i[t]}catch(o){}}if(!Jc[t]||r)try{return gB(Jc,t,r?e:xh&&Jc[t]||e)}catch(o){}else return}for(n in bh)i=cs[n],i&&(!i[t]||r)&&gB(i,t,e)}};for(js in bh)vd=cs[js],E_=vd&&vd.prototype,E_?Kue(E_)[CP]=vd:xh=!1;for(js in wB)vd=cs[js],E_=vd&&vd.prototype,E_&&(Kue(E_)[CP]=vd);if((!xh||!Zue(Jc)||Jc===Function.prototype)&&(Jc=function(){throw new bB("Incorrect invocation")},xh))for(js in bh)cs[js]&&S_(cs[js],Jc);if((!xh||!ic||ic===Jit)&&(ic=Jc.prototype,xh))for(js in bh)cs[js]&&S_(cs[js].prototype,ic);xh&&RP(Hue)!==ic&&S_(Hue,ic);if(_B&&!yd(ic,Wue)){Xue=!0,Zit(ic,Wue,{configurable:!0,get:function(){return PP(this)?this[yB]:void 0}});for(js in bh)cs[js]&&Wit(cs[js],yB,js)}ece.exports={NATIVE_ARRAY_BUFFER_VIEWS:xh,TYPED_ARRAY_TAG:Xue&&yB,aTypedArray:tot,aTypedArrayConstructor:rot,exportTypedArrayMethod:not,exportTypedArrayStaticMethod:iot,getTypedArrayConstructor:Que,isView:eot,isTypedArray:Jue,TypedArray:Jc,TypedArrayPrototype:ic}});var rce=R(()=>{"use strict";p();var oot=oe(),tce=Hr(),aot=tce.NATIVE_ARRAY_BUFFER_VIEWS;oot({target:"ArrayBuffer",stat:!0,forced:!aot},{isView:tce.isView})});var lce=R(()=>{"use strict";p();var sot=oe(),SB=od(),lot=yt(),ace=K1(),nce=Bt(),ice=ec(),uot=ks(),TB=ace.ArrayBuffer,EB=ace.DataView,sce=EB.prototype,oce=SB(TB.prototype.slice),cot=SB(sce.getUint8),fot=SB(sce.setUint8),hot=lot(function(){return!new TB(2).slice(1,void 0).byteLength});sot({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:hot},{slice:function(e,r){if(oce&&r===void 0)return oce(nce(this),e);for(var n=nce(this).byteLength,i=ice(e,n),o=ice(r===void 0?n:r,n),l=new TB(uot(o-i)),f=new EB(this),d=new EB(l),v=0;i<o;)fot(d,v++,cot(f,i++));return l}})});var uce=R(()=>{"use strict";p();var pot=oe(),dot=K1(),mot=W1();pot({global:!0,constructor:!0,forced:!mot},{DataView:dot.DataView})});var cce=R(()=>{"use strict";p();uce()});var IB=R(()=>{"use strict";p();var got=oe(),vot=ct(),dce=Math.pow,fce=31,yot=1023,hce=dce(2,-24),pce=.0009765625,_ot=function(t){var e=t>>>15,r=t>>>10&fce,n=t&yot;return r===fce?n===0?e===0?1/0:-1/0:NaN:r===0?n*(e===0?hce:-hce):dce(2,r-15)*(e===0?1+n*pce:-1-n*pce)},xot=vot(DataView.prototype.getUint16);got({target:"DataView",proto:!0},{getFloat16:function(e){var r=xot(this,e,arguments.length>1?arguments[1]:!1);return _ot(r)}})});var AB=R((q0r,mce)=>{"use strict";p();var bot=ls(),wot=TypeError;mce.exports=function(t){if(bot(t)==="DataView")return t;throw new wot("Argument is not a DataView")}});var MB=R((j0r,gce)=>{"use strict";p();var Eot=Math.log,Sot=Math.LN2;gce.exports=Math.log2||function(e){return Eot(e)/Sot}});var PB=R(()=>{"use strict";p();var Tot=oe(),Iot=ct(),Aot=AB(),Mot=__(),Cot=MB(),vce=sB(),Pot=Math.pow,Rot=65520,Oot=61005353927612305e-21,Lot=16777216,CB=1024,Dot=function(t){if(t!==t)return 32256;if(t===0)return(1/t===-1/0)<<15;var e=t<0;if(e&&(t=-t),t>=Rot)return e<<15|31744;if(t<Oot)return e<<15|vce(t*Lot);var r=Cot(t)|0;if(r===-15)return e<<15|CB;var n=vce((t*Pot(2,-r)-1)*CB);return n===CB?e<<15|r+16<<10:e<<15|r+15<<10|n},Not=Iot(DataView.prototype.setUint16);Tot({target:"DataView",proto:!0},{setFloat16:function(e,r){Aot(this);var n=Mot(e),i=Dot(+r);return Not(this,n,i,arguments.length>2?arguments[2]:!1)}})});var RB=R((G0r,xce)=>{"use strict";p();var _ce=Ft(),kot=q1(),qot=da(),yce=_ce.ArrayBuffer,Fot=_ce.TypeError;xce.exports=yce&&kot(yce.prototype,"byteLength","get")||function(t){if(qot(t)!=="ArrayBuffer")throw new Fot("ArrayBuffer expected");return t.byteLength}});var OB=R((H0r,bce)=>{"use strict";p();var jot=Ft(),zot=W1(),Uot=RB(),Bot=jot.DataView;bce.exports=function(t){if(!zot||Uot(t)!==0)return!1;try{return new Bot(t),!1}catch(e){return!0}}});var LB=R(()=>{"use strict";p();var Vot=sr(),Got=hi(),$ot=OB(),wce=ArrayBuffer.prototype;Vot&&!("detached"in wce)&&Got(wce,"detached",{configurable:!0,get:function(){return $ot(this)}})});var T_=R((X0r,Ece)=>{"use strict";p();var Hot=OB(),Wot=TypeError;Ece.exports=function(t){if(Hot(t))throw new Wot("ArrayBuffer is detached");return t}});var DB=R((J0r,Sce)=>{"use strict";p();var Zot=Ft(),Yot=Tg();Sce.exports=function(t){if(Yot){try{return Zot.process.getBuiltinModule(t)}catch(e){}try{return Function("return require(\""+t+"\")")()}catch(e){}}}});var OP=R((txr,Ice)=>{"use strict";p();var Kot=Ft(),Xot=yt(),NB=Qu(),kB=H1(),Tce=Kot.structuredClone;Ice.exports=!!Tce&&!Xot(function(){if(kB==="DENO"&&NB>92||kB==="NODE"&&NB>94||kB==="BROWSER"&&NB>97)return!1;var t=new ArrayBuffer(8),e=Tce(t,{transfer:[t]});return t.byteLength!==0||e.byteLength!==8})});var UB=R((nxr,Cce)=>{"use strict";p();var zB=Ft(),Qot=DB(),Jot=OP(),eat=zB.structuredClone,Ace=zB.ArrayBuffer,LP=zB.MessageChannel,jB=!1,qB,Mce,DP,FB;if(Jot)jB=function(t){eat(t,{transfer:[t]})};else if(Ace)try{LP||(qB=Qot("worker_threads"),qB&&(LP=qB.MessageChannel)),LP&&(Mce=new LP,DP=new Ace(2),FB=function(t){Mce.port1.postMessage(null,[t])},DP.byteLength===2&&(FB(DP),DP.byteLength===0&&(jB=FB)))}catch(t){}Cce.exports=jB});var WB=R((oxr,kce)=>{"use strict";p();var GB=Ft(),$B=ct(),Lce=q1(),tat=__(),rat=T_(),nat=RB(),Pce=UB(),BB=OP(),iat=GB.structuredClone,Dce=GB.ArrayBuffer,VB=GB.DataView,oat=Math.min,HB=Dce.prototype,Nce=VB.prototype,aat=$B(HB.slice),Rce=Lce(HB,"resizable","get"),Oce=Lce(HB,"maxByteLength","get"),sat=$B(Nce.getInt8),lat=$B(Nce.setInt8);kce.exports=(BB||Pce)&&function(t,e,r){var n=nat(t),i=e===void 0?n:tat(e),o=!Rce||!Rce(t),l;if(rat(t),BB&&(t=iat(t,{transfer:[t]}),n===i&&(r||o)))return t;if(n>=i&&(!r||o))l=aat(t,0,i);else{var f=r&&!o&&Oce?{maxByteLength:Oce(t)}:void 0;l=new Dce(i,f);for(var d=new VB(t),v=new VB(l),x=oat(i,n),b=0;b<x;b++)lat(v,b,sat(d,b))}return BB||Pce(t),l}});var ZB=R(()=>{"use strict";p();var uat=oe(),qce=WB();qce&&uat({target:"ArrayBuffer",proto:!0},{transfer:function(){return qce(this,arguments.length?arguments[0]:void 0,!0)}})});var YB=R(()=>{"use strict";p();var cat=oe(),Fce=WB();Fce&&cat({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return Fce(this,arguments.length?arguments[0]:void 0,!1)}})});var jce=R(()=>{"use strict";p();var fat=oe(),hat=ct(),pat=yt(),dat=pat(function(){return new Date(16e11).getYear()!==120}),mat=hat(Date.prototype.getFullYear);fat({target:"Date",proto:!0,forced:dat},{getYear:function(){return mat(this)-1900}})});var Uce=R(()=>{"use strict";p();var gat=oe(),vat=ct(),zce=Date,yat=vat(zce.prototype.getTime);gat({target:"Date",stat:!0},{now:function(){return yat(new zce)}})});var Gce=R(()=>{"use strict";p();var _at=oe(),Bce=ct(),xat=fi(),Vce=Date.prototype,bat=Bce(Vce.getTime),wat=Bce(Vce.setFullYear);_at({target:"Date",proto:!0},{setYear:function(e){bat(this);var r=xat(e),n=r>=0&&r<=99?r+1900:r;return wat(this,n)}})});var $ce=R(()=>{"use strict";p();var Eat=oe();Eat({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var X1=R((Txr,Hce)=>{"use strict";p();var Sat=fi(),Tat=Mr(),Iat=oi(),Aat=RangeError;Hce.exports=function(e){var r=Tat(Iat(this)),n="",i=Sat(e);if(i<0||i===1/0)throw new Aat("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(r+=r))i&1&&(n+=r);return n}});var Q1=R((Axr,Kce)=>{"use strict";p();var Yce=ct(),Mat=ks(),Wce=Mr(),Cat=X1(),Pat=oi(),Rat=Yce(Cat),Oat=Yce("".slice),Lat=Math.ceil,Zce=function(t){return function(e,r,n){var i=Wce(Pat(e)),o=Mat(r),l=i.length,f=n===void 0?" ":Wce(n),d,v;return o<=l||f===""?i:(d=o-l,v=Rat(f,Lat(d/f.length)),v.length>d&&(v=Oat(v,0,d)),t?i+v:v+i)}};Kce.exports={start:Zce(!1),end:Zce(!0)}});var Jce=R((Cxr,Qce)=>{"use strict";p();var _d=ct(),Xce=yt(),Ag=Q1().start,Dat=RangeError,Nat=isFinite,kat=Math.abs,wh=Date.prototype,KB=wh.toISOString,qat=_d(wh.getTime),Fat=_d(wh.getUTCDate),jat=_d(wh.getUTCFullYear),zat=_d(wh.getUTCHours),Uat=_d(wh.getUTCMilliseconds),Bat=_d(wh.getUTCMinutes),Vat=_d(wh.getUTCMonth),Gat=_d(wh.getUTCSeconds);Qce.exports=Xce(function(){return KB.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!Xce(function(){KB.call(new Date(NaN))})?function(){if(!Nat(qat(this)))throw new Dat("Invalid time value");var e=this,r=jat(e),n=Uat(e),i=r<0?"-":r>9999?"+":"";return i+Ag(kat(r),i?6:4,0)+"-"+Ag(Vat(e)+1,2,0)+"-"+Ag(Fat(e),2,0)+"T"+Ag(zat(e),2,0)+":"+Ag(Bat(e),2,0)+":"+Ag(Gat(e),2,0)+"."+Ag(n,3,0)+"Z"}:KB});var tfe=R(()=>{"use strict";p();var $at=oe(),efe=Jce();$at({target:"Date",proto:!0,forced:Date.prototype.toISOString!==efe},{toISOString:efe})});var rfe=R(()=>{"use strict";p();var Hat=oe(),Wat=yt(),Zat=Yr(),Yat=w1(),Kat=Wat(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});Hat({target:"Date",proto:!0,arity:1,forced:Kat},{toJSON:function(e){var r=Zat(this),n=Yat(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var ife=R((qxr,nfe)=>{"use strict";p();var Xat=Bt(),Qat=b4(),Jat=TypeError;nfe.exports=function(t){if(Xat(this),t==="string"||t==="default")t="string";else if(t!=="number")throw new Jat("Incorrect hint");return Qat(this,t)}});var sfe=R(()=>{"use strict";p();var est=Br(),tst=jn(),rst=ife(),nst=mr(),ofe=nst("toPrimitive"),afe=Date.prototype;est(afe,ofe)||tst(afe,ofe,rst)});var ffe=R(()=>{"use strict";p();var ufe=ct(),ist=jn(),XB=Date.prototype,lfe="Invalid Date",cfe="toString",ost=ufe(XB[cfe]),ast=ufe(XB.getTime);String(new Date(NaN))!==lfe&&ist(XB,cfe,function(){var e=ast(this);return e===e?ost(this):lfe})});var pfe=R(()=>{"use strict";p();var sst=oe(),J1=ct(),lst=Mr(),ust=J1("".charAt),cst=J1("".charCodeAt),fst=J1(/./.exec),hst=J1(1 .toString),pst=J1("".toUpperCase),dst=/[\w*+\-./@]/,hfe=function(t,e){for(var r=hst(t,16);r.length<e;)r="0"+r;return r};sst({global:!0},{escape:function(e){for(var r=lst(e),n="",i=r.length,o=0,l,f;o<i;)l=ust(r,o++),fst(dst,l)?n+=l:(f=cst(l,0),f<256?n+="%"+hfe(f,2):n+="%u"+pst(hfe(f,4)));return n}})});var JB=R((Zxr,vfe)=>{"use strict";p();var mfe=ct(),mst=xr(),gst=hr(),vst=Br(),dfe=qs(),yst=l_(),gfe=Function,_st=mfe([].concat),xst=mfe([].join),QB={},bst=function(t,e,r){if(!vst(QB,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";QB[e]=gfe("C,a","return new C("+xst(n,",")+")")}return QB[e](t,r)};vfe.exports=yst?gfe.bind:function(e){var r=mst(this),n=r.prototype,i=dfe(arguments,1),o=function(){var f=_st(i,dfe(arguments));return this instanceof o?bst(r,f.length,f):r.apply(e,f)};return gst(n)&&(o.prototype=n),o}});var _fe=R(()=>{"use strict";p();var wst=oe(),yfe=JB();wst({target:"Function",proto:!0,forced:Function.bind!==yfe},{bind:yfe})});var wfe=R(()=>{"use strict";p();var Est=jr(),xfe=hr(),Sst=ti(),Tst=ma(),Ist=mr(),Ast=A1(),e3=Ist("hasInstance"),bfe=Function.prototype;e3 in bfe||Sst.f(bfe,e3,{value:Ast(function(t){if(!Est(this)||!xfe(t))return!1;var e=this.prototype;return xfe(e)?Tst(e,t):t instanceof this},e3)})});var Ife=R(()=>{"use strict";p();var Mst=sr(),Cst=mg().EXISTS,Efe=ct(),Pst=hi(),Sfe=Function.prototype,Rst=Efe(Sfe.toString),Tfe=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Ost=Efe(Tfe.exec),Lst="name";Mst&&!Cst&&Pst(Sfe,Lst,{configurable:!0,get:function(){try{return Ost(Tfe,Rst(this))[1]}catch(t){return""}}})});var r3=R(()=>{"use strict";p();var Dst=oe(),t3=Ft();Dst({global:!0,forced:t3.globalThis!==t3},{globalThis:t3})});var s3=R(()=>{"use strict";p();var Nst=oe(),kst=Ft(),qst=qa(),Fst=Bt(),jst=jr(),zst=bo(),Ust=hi(),Bst=tu(),Vst=yt(),o3=Br(),Gst=mr(),ef=fd().IteratorPrototype,$st=sr(),Hst=pn(),n3="constructor",Mfe="Iterator",Afe=Gst("toStringTag"),Cfe=TypeError,i3=kst[Mfe],Pfe=Hst||!jst(i3)||i3.prototype!==ef||!Vst(function(){i3({})}),a3=function(){if(qst(this,ef),zst(this)===ef)throw new Cfe("Abstract class Iterator not directly constructable")},Rfe=function(t,e){$st?Ust(ef,t,{configurable:!0,get:function(){return e},set:function(r){if(Fst(this),this===ef)throw new Cfe("You can't redefine this property");o3(this,t)?this[t]=r:Bst(this,t,r)}}):ef[t]=e};o3(ef,Afe)||Rfe(Afe,Mfe);(Pfe||!o3(ef,n3)||ef[n3]===Object)&&Rfe(n3,a3);a3.prototype=ef;Nst({global:!0,constructor:!0,forced:Pfe},{Iterator:a3})});var Ti=R((fbr,Ofe)=>{"use strict";p();Ofe.exports=function(t){return{iterator:t,next:t.next,done:!1}}});var I_=R((pbr,Lfe)=>{"use strict";p();var Wst=RangeError;Lfe.exports=function(t){if(t===t)return t;throw new Wst("NaN is not allowed")}});var A_=R((mbr,Dfe)=>{"use strict";p();var Zst=fi(),Yst=RangeError;Dfe.exports=function(t){var e=Zst(t);if(e<0)throw new Yst("The argument can't be less than 0");return e}});var xd=R((vbr,zfe)=>{"use strict";p();var Kst=jt(),Xst=Qi(),Qst=xo(),Jst=nu(),elt=mr(),Nfe=Rn(),tlt=Xi(),rlt=fd().IteratorPrototype,NP=ko(),l3=Xo(),nlt=elt("toStringTag"),kfe="IteratorHelper",qfe="WrapForValidIterator",ilt=Nfe.set,Ffe=function(t){var e=Nfe.getterFor(t?qfe:kfe);return Jst(Xst(rlt),{next:function(){var n=e(this);if(t)return n.nextHandler();if(n.done)return NP(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:NP(i,n.done)}catch(o){throw n.done=!0,o}},return:function(){var r=e(this),n=r.iterator;if(r.done=!0,t){var i=tlt(n,"return");return i?Kst(i,n):NP(void 0,!0)}if(r.inner)try{l3(r.inner.iterator,"normal")}catch(o){return l3(n,"throw",o)}return n&&l3(n,"normal"),NP(void 0,!0)}})},olt=Ffe(!0),jfe=Ffe(!1);Qst(jfe,nlt,"Iterator Helper");zfe.exports=function(t,e,r){var n=function(o,l){l?(l.iterator=o.iterator,l.next=o.next):l=o,l.type=e?qfe:kfe,l.returnHandlerResult=!!r,l.nextHandler=t,l.counter=0,l.done=!1,ilt(this,l)};return n.prototype=e?olt:jfe,n}});var oc=R((_br,Ufe)=>{"use strict";p();var alt=Ft();Ufe.exports=function(t,e){var r=alt.Iterator,n=r&&r.prototype,i=n&&n[t],o=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){o=!0}},-1)}catch(l){l instanceof e||(o=!1)}if(!o)return i}});var h3=R(()=>{"use strict";p();var slt=oe(),c3=jt(),f3=Bt(),llt=Ti(),ult=I_(),clt=A_(),flt=Xo(),hlt=xd(),plt=oc(),Bfe=pn(),u3=!Bfe&&plt("drop",RangeError),dlt=hlt(function(){for(var t=this.iterator,e=this.next,r,n;this.remaining;)if(this.remaining--,r=f3(c3(e,t)),n=this.done=!!r.done,n)return;if(r=f3(c3(e,t)),n=this.done=!!r.done,!n)return r.value});slt({target:"Iterator",proto:!0,real:!0,forced:Bfe||u3},{drop:function(e){f3(this);var r;try{r=clt(ult(+e))}catch(n){flt(this,"throw",n)}return u3?c3(u3,this,r):new dlt(llt(this),{remaining:r})}})});var d3=R(()=>{"use strict";p();var mlt=oe(),glt=jt(),vlt=Oi(),ylt=xr(),_lt=Bt(),xlt=Ti(),blt=Xo(),wlt=oc(),p3=wlt("every",TypeError);mlt({target:"Iterator",proto:!0,real:!0,forced:p3},{every:function(e){_lt(this);try{ylt(e)}catch(i){blt(this,"throw",i)}if(p3)return glt(p3,this,e);var r=xlt(this),n=0;return!vlt(r,function(i,o){if(!e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var g3=R(()=>{"use strict";p();var Elt=oe(),Vfe=jt(),Slt=xr(),Gfe=Bt(),Tlt=Ti(),Ilt=xd(),Alt=fP(),$fe=pn(),Mlt=Xo(),Clt=oc(),m3=!$fe&&Clt("filter",TypeError),Plt=Ilt(function(){for(var t=this.iterator,e=this.predicate,r=this.next,n,i,o;;){if(n=Gfe(Vfe(r,t)),i=this.done=!!n.done,i)return;if(o=n.value,Alt(t,e,[o,this.counter++],!0))return o}});Elt({target:"Iterator",proto:!0,real:!0,forced:$fe||m3},{filter:function(e){Gfe(this);try{Slt(e)}catch(r){Mlt(this,"throw",r)}return m3?Vfe(m3,this,e):new Plt(Tlt(this),{predicate:e})}})});var y3=R(()=>{"use strict";p();var Rlt=oe(),Olt=jt(),Llt=Oi(),Dlt=xr(),Nlt=Bt(),klt=Ti(),qlt=Xo(),Flt=oc(),v3=Flt("find",TypeError);Rlt({target:"Iterator",proto:!0,real:!0,forced:v3},{find:function(e){Nlt(this);try{Dlt(e)}catch(i){qlt(this,"throw",i)}if(v3)return Olt(v3,this,e);var r=klt(this),n=0;return Llt(r,function(i,o){if(e(i,n++))return o(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var _3=R((Lbr,Wfe)=>{"use strict";p();var jlt=jt(),Hfe=Bt(),zlt=Ti(),Ult=Xc();Wfe.exports=function(t,e){(!e||typeof t!="string")&&Hfe(t);var r=Ult(t);return zlt(Hfe(r!==void 0?jlt(r,t):t))}});var S3=R(()=>{"use strict";p();var Blt=oe(),b3=jt(),Vlt=xr(),w3=Bt(),Glt=Ti(),$lt=_3(),Hlt=xd(),E3=Xo(),Zfe=pn(),Wlt=oc(),x3=!Zfe&&Wlt("flatMap",TypeError),Zlt=Hlt(function(){for(var t=this.iterator,e=this.mapper,r,n;;){if(n=this.inner)try{if(r=w3(b3(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(i){E3(t,"throw",i)}if(r=w3(b3(this.next,t)),this.done=!!r.done)return;try{this.inner=$lt(e(r.value,this.counter++),!1)}catch(i){E3(t,"throw",i)}}});Blt({target:"Iterator",proto:!0,real:!0,forced:Zfe||x3},{flatMap:function(e){w3(this);try{Vlt(e)}catch(r){E3(this,"throw",r)}return x3?b3(x3,this,e):new Zlt(Glt(this),{mapper:e,inner:null})}})});var I3=R(()=>{"use strict";p();var Ylt=oe(),Klt=jt(),Xlt=Oi(),Qlt=xr(),Jlt=Bt(),eut=Ti(),tut=Xo(),rut=oc(),T3=rut("forEach",TypeError);Ylt({target:"Iterator",proto:!0,real:!0,forced:T3},{forEach:function(e){Jlt(this);try{Qlt(e)}catch(i){tut(this,"throw",i)}if(T3)return Klt(T3,this,e);var r=eut(this),n=0;Xlt(r,function(i){e(i,n++)},{IS_RECORD:!0})}})});var A3=R(()=>{"use strict";p();var nut=oe(),iut=jt(),out=Yr(),aut=ma(),sut=fd().IteratorPrototype,lut=xd(),uut=_3(),cut=pn(),fut=lut(function(){return iut(this.next,this.iterator)},!0);nut({target:"Iterator",stat:!0,forced:cut},{from:function(e){var r=uut(typeof e=="string"?out(e):e,!0);return aut(sut,r.iterator)?r.iterator:new fut(r)}})});var kP=R(()=>{"use strict";p();var hut=oe(),Yfe=jt(),put=xr(),Kfe=Bt(),dut=Ti(),mut=xd(),gut=fP(),vut=Xo(),yut=oc(),Xfe=pn(),M3=!Xfe&&yut("map",TypeError),_ut=mut(function(){var t=this.iterator,e=Kfe(Yfe(this.next,t)),r=this.done=!!e.done;if(!r)return gut(t,this.mapper,[e.value,this.counter++],!0)});hut({target:"Iterator",proto:!0,real:!0,forced:Xfe||M3},{map:function(e){Kfe(this);try{put(e)}catch(r){vut(this,"throw",r)}return M3?Yfe(M3,this,e):new _ut(dut(this),{mapper:e})}})});var P3=R(()=>{"use strict";p();var xut=oe(),but=Oi(),wut=xr(),Eut=Bt(),Sut=Ti(),Tut=Xo(),Iut=oc(),Aut=ga(),Mut=yt(),Qfe=TypeError,Jfe=Mut(function(){[].keys().reduce(function(){},void 0)}),C3=!Jfe&&Iut("reduce",Qfe);xut({target:"Iterator",proto:!0,real:!0,forced:Jfe||C3},{reduce:function(e){Eut(this);try{wut(e)}catch(l){Tut(this,"throw",l)}var r=arguments.length<2,n=r?void 0:arguments[1];if(C3)return Aut(C3,this,r?[e]:[e,n]);var i=Sut(this),o=0;if(but(i,function(l){r?(r=!1,n=l):n=e(n,l,o),o++},{IS_RECORD:!0}),r)throw new Qfe("Reduce of empty iterator with no initial value");return n}})});var O3=R(()=>{"use strict";p();var Cut=oe(),Put=jt(),Rut=Oi(),Out=xr(),Lut=Bt(),Dut=Ti(),Nut=Xo(),kut=oc(),R3=kut("some",TypeError);Cut({target:"Iterator",proto:!0,real:!0,forced:R3},{some:function(e){Lut(this);try{Out(e)}catch(i){Nut(this,"throw",i)}if(R3)return Put(R3,this,e);var r=Dut(this),n=0;return Rut(r,function(i,o){if(e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var D3=R(()=>{"use strict";p();var qut=oe(),ehe=jt(),the=Bt(),Fut=Ti(),jut=I_(),zut=A_(),Uut=xd(),rhe=Xo(),But=oc(),nhe=pn(),L3=!nhe&&But("take",RangeError),Vut=Uut(function(){var t=this.iterator;if(!this.remaining--)return this.done=!0,rhe(t,"normal",void 0);var e=the(ehe(this.next,t)),r=this.done=!!e.done;if(!r)return e.value});qut({target:"Iterator",proto:!0,real:!0,forced:nhe||L3},{take:function(e){the(this);var r;try{r=zut(jut(+e))}catch(n){rhe(this,"throw",n)}return L3?ehe(L3,this,r):new Vut(Fut(this),{remaining:r})}})});var N3=R(()=>{"use strict";p();var Gut=oe(),$ut=Bt(),Hut=Oi(),Wut=Ti(),Zut=[].push;Gut({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return Hut(Wut($ut(this)),Zut,{that:e,IS_RECORD:!0}),e}})});var ihe=R(()=>{"use strict";p();var Yut=Ft(),Kut=us();Kut(Yut.JSON,"JSON",!0)});var qP=R((lwr,ohe)=>{"use strict";p();var Xut=yt();ohe.exports=Xut(function(){if(typeof ArrayBuffer=="function"){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})});var jP=R((cwr,she)=>{"use strict";p();var Qut=yt(),Jut=hr(),ect=da(),ahe=qP(),FP=Object.isExtensible,tct=Qut(function(){FP(1)});she.exports=tct||ahe?function(e){return!Jut(e)||ahe&&ect(e)==="ArrayBuffer"?!1:FP?FP(e):!0}:FP});var Eh=R((hwr,lhe)=>{"use strict";p();var rct=yt();lhe.exports=!rct(function(){return Object.isExtensible(Object.preventExtensions({}))})});var bd=R((dwr,fhe)=>{"use strict";p();var nct=oe(),ict=ct(),oct=c_(),act=hr(),k3=Br(),sct=ti().f,uhe=id(),lct=HC(),q3=jP(),uct=nd(),cct=Eh(),che=!1,Sh=uct("meta"),fct=0,F3=function(t){sct(t,Sh,{value:{objectID:"O"+fct++,weakData:{}}})},hct=function(t,e){if(!act(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!k3(t,Sh)){if(!q3(t))return"F";if(!e)return"E";F3(t)}return t[Sh].objectID},pct=function(t,e){if(!k3(t,Sh)){if(!q3(t))return!0;if(!e)return!1;F3(t)}return t[Sh].weakData},dct=function(t){return cct&&che&&q3(t)&&!k3(t,Sh)&&F3(t),t},mct=function(){gct.enable=function(){},che=!0;var t=uhe.f,e=ict([].splice),r={};r[Sh]=1,t(r).length&&(uhe.f=function(n){for(var i=t(n),o=0,l=i.length;o<l;o++)if(i[o]===Sh){e(i,o,1);break}return i},nct({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:lct.f}))},gct=fhe.exports={enable:mct,fastKey:hct,getWeakData:pct,onFreeze:dct};oct[Sh]=!0});var eE=R((gwr,phe)=>{"use strict";p();var vct=oe(),yct=Ft(),_ct=ct(),hhe=h_(),xct=jn(),bct=bd(),wct=Oi(),Ect=qa(),Sct=jr(),Tct=Ns(),j3=hr(),z3=yt(),Ict=z1(),Act=us(),Mct=ld();phe.exports=function(t,e,r){var n=t.indexOf("Map")!==-1,i=t.indexOf("Weak")!==-1,o=n?"set":"add",l=yct[t],f=l&&l.prototype,d=l,v={},x=function(F){var U=_ct(f[F]);xct(f,F,F==="add"?function(Z){return U(this,Z===0?0:Z),this}:F==="delete"?function($){return i&&!j3($)?!1:U(this,$===0?0:$)}:F==="get"?function(Z){return i&&!j3(Z)?void 0:U(this,Z===0?0:Z)}:F==="has"?function(Z){return i&&!j3(Z)?!1:U(this,Z===0?0:Z)}:function(Z,ie){return U(this,Z===0?0:Z,ie),this})},b=hhe(t,!Sct(l)||!(i||f.forEach&&!z3(function(){new l().entries().next()})));if(b)d=r.getConstructor(e,t,n,o),bct.enable();else if(hhe(t,!0)){var A=new d,P=A[o](i?{}:-0,1)!==A,N=z3(function(){A.has(1)}),j=Ict(function(F){new l(F)}),D=!i&&z3(function(){for(var F=new l,U=5;U--;)F[o](U,U);return!F.has(-0)});j||(d=e(function(F,U){Ect(F,f);var $=Mct(new l,F,d);return Tct(U)||wct(U,$[o],{that:$,AS_ENTRIES:n}),$}),d.prototype=f,f.constructor=d),(N||D)&&(x("delete"),x("has"),n&&x("get")),(D||P)&&x(o),i&&f.clear&&delete f.clear}return v[t]=d,vct({global:!0,constructor:!0,forced:d!==l},v),Act(d,t),i||r.setStrong(d,t,n),d}});var B3=R((ywr,_he)=>{"use strict";p();var dhe=Qi(),Cct=hi(),mhe=nu(),Pct=Wn(),Rct=qa(),Oct=Ns(),Lct=Oi(),Dct=dP(),zP=ko(),Nct=dd(),tE=sr(),ghe=bd().fastKey,yhe=Rn(),vhe=yhe.set,U3=yhe.getterFor;_he.exports={getConstructor:function(t,e,r,n){var i=t(function(v,x){Rct(v,o),vhe(v,{type:e,index:dhe(null),first:null,last:null,size:0}),tE||(v.size=0),Oct(x)||Lct(x,v[n],{that:v,AS_ENTRIES:r})}),o=i.prototype,l=U3(e),f=function(v,x,b){var A=l(v),P=d(v,x),N,j;return P?P.value=b:(A.last=P={index:j=ghe(x,!0),key:x,value:b,previous:N=A.last,next:null,removed:!1},A.first||(A.first=P),N&&(N.next=P),tE?A.size++:v.size++,j!=="F"&&(A.index[j]=P)),v},d=function(v,x){var b=l(v),A=ghe(x),P;if(A!=="F")return b.index[A];for(P=b.first;P;P=P.next)if(P.key===x)return P};return mhe(o,{clear:function(){for(var x=this,b=l(x),A=b.first;A;)A.removed=!0,A.previous&&(A.previous=A.previous.next=null),A=A.next;b.first=b.last=null,b.index=dhe(null),tE?b.size=0:x.size=0},delete:function(v){var x=this,b=l(x),A=d(x,v);if(A){var P=A.next,N=A.previous;delete b.index[A.index],A.removed=!0,N&&(N.next=P),P&&(P.previous=N),b.first===A&&(b.first=P),b.last===A&&(b.last=N),tE?b.size--:x.size--}return!!A},forEach:function(x){for(var b=l(this),A=Pct(x,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:b.first;)for(A(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(x){return!!d(this,x)}}),mhe(o,r?{get:function(x){var b=d(this,x);return b&&b.value},set:function(x,b){return f(this,x===0?0:x,b)}}:{add:function(x){return f(this,x=x===0?0:x,x)}}),tE&&Cct(o,"size",{configurable:!0,get:function(){return l(this).size}}),i},setStrong:function(t,e,r){var n=e+" Iterator",i=U3(e),o=U3(n);Dct(t,e,function(l,f){vhe(this,{type:n,target:l,state:i(l),kind:f,last:null})},function(){for(var l=o(this),f=l.kind,d=l.last;d&&d.removed;)d=d.previous;return!l.target||!(l.last=d=d?d.next:l.state.first)?(l.target=null,zP(void 0,!0)):zP(f==="keys"?d.key:f==="values"?d.value:[d.key,d.value],!1)},r?"entries":"values",!r,!0),Nct(e)}}});var xhe=R(()=>{"use strict";p();var kct=eE(),qct=B3();kct("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},qct)});var UP=R(()=>{"use strict";p();xhe()});var qo=R((Iwr,bhe)=>{"use strict";p();var BP=ct(),rE=Map.prototype;bhe.exports={Map,set:BP(rE.set),get:BP(rE.get),has:BP(rE.has),remove:BP(rE.delete),proto:rE}});var V3=R(()=>{"use strict";p();var Fct=oe(),jct=ct(),zct=xr(),Uct=oi(),Bct=Oi(),VP=qo(),whe=pn(),Vct=yt(),Ehe=VP.Map,Gct=VP.has,$ct=VP.get,Hct=VP.set,Wct=jct([].push),Zct=whe||Vct(function(){return Ehe.groupBy("ab",function(t){return t}).get("a").length!==1});Fct({target:"Map",stat:!0,forced:whe||Zct},{groupBy:function(e,r){Uct(e),zct(r);var n=new Ehe,i=0;return Bct(e,function(o){var l=r(o,i++);Gct(n,l)?Wct($ct(n,l),o):Hct(n,l,[o])}),n}})});var G3=R((Rwr,She)=>{"use strict";p();var Yct=Math.log;She.exports=Math.log1p||function(e){var r=+e;return r>-1e-8&&r<1e-8?r-r*r/2:Yct(1+r)}});var Ihe=R(()=>{"use strict";p();var Kct=oe(),Xct=G3(),$3=Math.acosh,Qct=Math.log,The=Math.sqrt,Jct=Math.LN2,eft=!$3||Math.floor($3(Number.MAX_VALUE))!==710||$3(1/0)!==1/0;Kct({target:"Math",stat:!0,forced:eft},{acosh:function(e){var r=+e;return r<1?NaN:r>94906265.62425156?Qct(r)+Jct:Xct(r-1+The(r-1)*The(r+1))}})});var Che=R(()=>{"use strict";p();var tft=oe(),Ahe=Math.asinh,rft=Math.log,nft=Math.sqrt;function Mhe(t){var e=+t;return!isFinite(e)||e===0?e:e<0?-Mhe(-e):rft(e+nft(e*e+1))}var ift=!(Ahe&&1/Ahe(0)>0);tft({target:"Math",stat:!0,forced:ift},{asinh:Mhe})});var Rhe=R(()=>{"use strict";p();var oft=oe(),Phe=Math.atanh,aft=Math.log,sft=!(Phe&&1/Phe(-0)<0);oft({target:"Math",stat:!0,forced:sft},{atanh:function(e){var r=+e;return r===0?r:aft((1+r)/(1-r))/2}})});var Ohe=R(()=>{"use strict";p();var lft=oe(),uft=xP(),cft=Math.abs,fft=Math.pow;lft({target:"Math",stat:!0},{cbrt:function(e){var r=+e;return uft(r)*fft(cft(r),1/3)}})});var Lhe=R(()=>{"use strict";p();var hft=oe(),pft=Math.floor,dft=Math.log,mft=Math.LOG2E;hft({target:"Math",stat:!0},{clz32:function(e){var r=e>>>0;return r?31-pft(dft(r+.5)*mft):32}})});var iE=R((Zwr,Dhe)=>{"use strict";p();var nE=Math.expm1,gft=Math.exp;Dhe.exports=!nE||nE(10)>22025.465794806718||nE(10)<22025.465794806718||nE(-2e-17)!==-2e-17?function(e){var r=+e;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:gft(r)-1}:nE});var khe=R(()=>{"use strict";p();var vft=oe(),yft=iE(),Nhe=Math.cosh,_ft=Math.abs,H3=Math.E,xft=!Nhe||Nhe(710)===1/0;vft({target:"Math",stat:!0,forced:xft},{cosh:function(e){var r=yft(_ft(e)-1)+1;return(r+1/(r*H3*H3))*(H3/2)}})});var Fhe=R(()=>{"use strict";p();var bft=oe(),qhe=iE();bft({target:"Math",stat:!0,forced:qhe!==Math.expm1},{expm1:qhe})});var jhe=R(()=>{"use strict";p();var wft=oe(),Eft=bP();wft({target:"Math",stat:!0},{fround:Eft})});var W3=R(()=>{"use strict";p();var Sft=oe(),Tft=lB(),Ift=.0009765625,Aft=65504,Mft=6103515625e-14;Sft({target:"Math",stat:!0},{f16round:function(e){return Tft(e,Ift,Aft,Mft)}})});var Uhe=R(()=>{"use strict";p();var Cft=oe(),zhe=Math.hypot,Pft=Math.abs,Rft=Math.sqrt,Oft=!!zhe&&zhe(1/0,NaN)!==1/0;Cft({target:"Math",stat:!0,arity:2,forced:Oft},{hypot:function(e,r){for(var n=0,i=0,o=arguments.length,l=0,f,d;i<o;)f=Pft(arguments[i++]),l<f?(d=l/f,n=n*d*d+1,l=f):f>0?(d=f/l,n+=d*d):n+=f;return l===1/0?1/0:l*Rft(n)}})});var Vhe=R(()=>{"use strict";p();var Lft=oe(),Dft=yt(),Bhe=Math.imul,Nft=Dft(function(){return Bhe(4294967295,5)!==-5||Bhe.length!==2});Lft({target:"Math",stat:!0,forced:Nft},{imul:function(e,r){var n=65535,i=+e,o=+r,l=n&i,f=n&o;return 0|l*f+((n&i>>>16)*f+l*(n&o>>>16)<<16>>>0)}})});var Z3=R((d1r,Ghe)=>{"use strict";p();var kft=Math.log,qft=Math.LOG10E;Ghe.exports=Math.log10||function(e){return kft(e)*qft}});var $he=R(()=>{"use strict";p();var Fft=oe(),jft=Z3();Fft({target:"Math",stat:!0},{log10:jft})});var Hhe=R(()=>{"use strict";p();var zft=oe(),Uft=G3();zft({target:"Math",stat:!0},{log1p:Uft})});var Whe=R(()=>{"use strict";p();var Bft=oe(),Vft=MB();Bft({target:"Math",stat:!0},{log2:Vft})});var Zhe=R(()=>{"use strict";p();var Gft=oe(),$ft=xP();Gft({target:"Math",stat:!0},{sign:$ft})});var Xhe=R(()=>{"use strict";p();var Hft=oe(),Wft=yt(),Yhe=iE(),Zft=Math.abs,Khe=Math.exp,Yft=Math.E,Kft=Wft(function(){return Math.sinh(-2e-17)!==-2e-17});Hft({target:"Math",stat:!0,forced:Kft},{sinh:function(e){var r=+e;return Zft(r)<1?(Yhe(r)-Yhe(-r))/2:(Khe(r-1)-Khe(-r-1))*(Yft/2)}})});var epe=R(()=>{"use strict";p();var Xft=oe(),Qhe=iE(),Jhe=Math.exp;Xft({target:"Math",stat:!0},{tanh:function(e){var r=+e,n=Qhe(r),i=Qhe(-r);return n===1/0?1:i===1/0?-1:(n-i)/(Jhe(r)+Jhe(-r))}})});var tpe=R(()=>{"use strict";p();var Qft=us();Qft(Math,"Math",!0)});var rpe=R(()=>{"use strict";p();var Jft=oe(),eht=j4();Jft({target:"Math",stat:!0},{trunc:eht})});var oE=R((z1r,npe)=>{"use strict";p();var tht=ct();npe.exports=tht(1 .valueOf)});var Mg=R((B1r,ipe)=>{"use strict";p();ipe.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Cg=R((G1r,ape)=>{"use strict";p();var rht=ct(),nht=oi(),iht=Mr(),K3=Mg(),ope=rht("".replace),oht=RegExp("^["+K3+"]+"),aht=RegExp("(^|[^"+K3+"])["+K3+"]+$"),Y3=function(t){return function(e){var r=iht(nht(e));return t&1&&(r=ope(r,oht,"")),t&2&&(r=ope(r,aht,"$1")),r}};ape.exports={start:Y3(1),end:Y3(2),trim:Y3(3)}});var ppe=R(()=>{"use strict";p();var sht=oe(),X3=pn(),lht=sr(),upe=Ft(),Q3=WC(),cpe=ct(),uht=h_(),spe=Br(),cht=ld(),fht=ma(),hht=ph(),fpe=w1(),pht=yt(),dht=id().f,mht=Yo().f,ght=ti().f,vht=oE(),yht=Cg().trim,aE="Number",M_=upe[aE],lpe=Q3[aE],J3=M_.prototype,_ht=upe.TypeError,xht=cpe("".slice),GP=cpe("".charCodeAt),bht=function(t){var e=fpe(t,"number");return typeof e=="bigint"?e:wht(e)},wht=function(t){var e=fpe(t,"number"),r,n,i,o,l,f,d,v;if(hht(e))throw new _ht("Cannot convert a Symbol value to a number");if(typeof e=="string"&&e.length>2){if(e=yht(e),r=GP(e,0),r===43||r===45){if(n=GP(e,2),n===88||n===120)return NaN}else if(r===48){switch(GP(e,1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(l=xht(e,2),f=l.length,d=0;d<f;d++)if(v=GP(l,d),v<48||v>o)return NaN;return parseInt(l,i)}}return+e},e5=uht(aE,!M_(" 0o1")||!M_("0b1")||M_("+0x1")),Eht=function(t){return fht(J3,t)&&pht(function(){vht(t)})},$P=function(e){var r=arguments.length<1?0:M_(bht(e));return Eht(this)?cht(Object(r),this,$P):r};$P.prototype=J3;e5&&!X3&&(J3.constructor=$P);sht({global:!0,constructor:!0,wrap:!0,forced:e5},{Number:$P});var hpe=function(t,e){for(var r=lht?dht(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;r.length>n;n++)spe(e,i=r[n])&&!spe(t,i)&&ght(t,i,mht(e,i))};X3&&lpe&&hpe(Q3[aE],lpe);(e5||X3)&&hpe(Q3[aE],M_)});var dpe=R(()=>{"use strict";p();var Sht=oe();Sht({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var t5=R((Q1r,mpe)=>{"use strict";p();var Tht=Ft(),Iht=Tht.isFinite;mpe.exports=Number.isFinite||function(e){return typeof e=="number"&&Iht(e)}});var gpe=R(()=>{"use strict";p();var Aht=oe(),Mht=t5();Aht({target:"Number",stat:!0},{isFinite:Mht})});var HP=R((nEr,vpe)=>{"use strict";p();var Cht=hr(),Pht=Math.floor;vpe.exports=Number.isInteger||function(e){return!Cht(e)&&isFinite(e)&&Pht(e)===e}});var ype=R(()=>{"use strict";p();var Rht=oe(),Oht=HP();Rht({target:"Number",stat:!0},{isInteger:Oht})});var _pe=R(()=>{"use strict";p();var Lht=oe();Lht({target:"Number",stat:!0},{isNaN:function(e){return e!==e}})});var xpe=R(()=>{"use strict";p();var Dht=oe(),Nht=HP(),kht=Math.abs;Dht({target:"Number",stat:!0},{isSafeInteger:function(e){return Nht(e)&&kht(e)<=9007199254740991}})});var bpe=R(()=>{"use strict";p();var qht=oe();qht({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var wpe=R(()=>{"use strict";p();var Fht=oe();Fht({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var r5=R((xEr,Ipe)=>{"use strict";p();var Tpe=Ft(),jht=yt(),zht=ct(),Uht=Mr(),Bht=Cg().trim,Vht=Mg(),Ght=zht("".charAt),WP=Tpe.parseFloat,Epe=Tpe.Symbol,Spe=Epe&&Epe.iterator,$ht=1/WP(Vht+"-0")!==-1/0||Spe&&!jht(function(){WP(Object(Spe))});Ipe.exports=$ht?function(e){var r=Bht(Uht(e)),n=WP(r);return n===0&&Ght(r,0)==="-"?-0:n}:WP});var Mpe=R(()=>{"use strict";p();var Hht=oe(),Ape=r5();Hht({target:"Number",stat:!0,forced:Number.parseFloat!==Ape},{parseFloat:Ape})});var n5=R((TEr,Dpe)=>{"use strict";p();var Ope=Ft(),Wht=yt(),Zht=ct(),Yht=Mr(),Kht=Cg().trim,Cpe=Mg(),sE=Ope.parseInt,Ppe=Ope.Symbol,Rpe=Ppe&&Ppe.iterator,Lpe=/^[+-]?0x/i,Xht=Zht(Lpe.exec),Qht=sE(Cpe+"08")!==8||sE(Cpe+"0x16")!==22||Rpe&&!Wht(function(){sE(Object(Rpe))});Dpe.exports=Qht?function(e,r){var n=Kht(Yht(e));return sE(n,r>>>0||(Xht(Lpe,n)?16:10))}:sE});var kpe=R(()=>{"use strict";p();var Jht=oe(),Npe=n5();Jht({target:"Number",stat:!0,forced:Number.parseInt!==Npe},{parseInt:Npe})});var Upe=R(()=>{"use strict";p();var ept=oe(),o5=ct(),tpt=fi(),rpt=oE(),npt=X1(),ipt=Z3(),i5=yt(),opt=RangeError,qpe=String,apt=isFinite,spt=Math.abs,lpt=Math.floor,Fpe=Math.pow,upt=Math.round,tf=o5(1 .toExponential),cpt=o5(npt),jpe=o5("".slice),zpe=tf(-69e-12,4)==="-6.9000e-11"&&tf(1.255,2)==="1.25e+0"&&tf(12345,3)==="1.235e+4"&&tf(25,0)==="3e+1",fpt=function(){return i5(function(){tf(1,1/0)})&&i5(function(){tf(1,-1/0)})},hpt=function(){return!i5(function(){tf(1/0,1/0),tf(NaN,1/0)})},ppt=!zpe||!fpt()||!hpt();ept({target:"Number",proto:!0,forced:ppt},{toExponential:function(e){var r=rpt(this);if(e===void 0)return tf(r);var n=tpt(e);if(!apt(r))return String(r);if(n<0||n>20)throw new opt("Incorrect fraction digits");if(zpe)return tf(r,n);var i="",o,l,f,d;if(r<0&&(i="-",r=-r),r===0)l=0,o=cpt("0",n+1);else{var v=ipt(r);l=lpt(v);var x=Fpe(10,l-n),b=upt(r/x);2*r>=(2*b+1)*x&&(b+=1),b>=Fpe(10,n+1)&&(b/=10,l+=1),o=qpe(b)}return n!==0&&(o=jpe(o,0,1)+"."+jpe(o,1)),l===0?(f="+",d="0"):(f=l>0?"+":"-",d=qpe(spt(l))),o+="e"+f+d,i+o}})});var Wpe=R(()=>{"use strict";p();var dpt=oe(),l5=ct(),mpt=fi(),gpt=oE(),vpt=X1(),Bpe=yt(),ypt=RangeError,$pe=String,Hpe=Math.floor,s5=l5(vpt),Vpe=l5("".slice),lE=l5(1 .toFixed),P_=function(t,e,r){return e===0?r:e%2===1?P_(t,e-1,r*t):P_(t*t,e/2,r)},_pt=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e},C_=function(t,e,r){for(var n=-1,i=r;++n<6;)i+=e*t[n],t[n]=i%1e7,i=Hpe(i/1e7)},a5=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=Hpe(n/e),n=n%e*1e7},Gpe=function(t){for(var e=6,r="";--e>=0;)if(r!==""||e===0||t[e]!==0){var n=$pe(t[e]);r=r===""?n:r+s5("0",7-n.length)+n}return r},xpt=Bpe(function(){return lE(8e-5,3)!=="0.000"||lE(.9,0)!=="1"||lE(1.255,2)!=="1.25"||lE(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!Bpe(function(){lE({})});dpt({target:"Number",proto:!0,forced:xpt},{toFixed:function(e){var r=gpt(this),n=mpt(e),i=[0,0,0,0,0,0],o="",l="0",f,d,v,x;if(n<0||n>20)throw new ypt("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return $pe(r);if(r<0&&(o="-",r=-r),r>1e-21)if(f=_pt(r*P_(2,69,1))-69,d=f<0?r*P_(2,-f,1):r/P_(2,f,1),d*=4503599627370496,f=52-f,f>0){for(C_(i,0,d),v=n;v>=7;)C_(i,1e7,0),v-=7;for(C_(i,P_(10,v,1),0),v=f-1;v>=23;)a5(i,1<<23),v-=23;a5(i,1<<v),C_(i,1,1),a5(i,2),l=Gpe(i)}else C_(i,0,d),C_(i,1<<-f,0),l=Gpe(i)+s5("0",n);return n>0?(x=l.length,l=o+(x<=n?"0."+s5("0",n-x)+l:Vpe(l,0,x-n)+"."+Vpe(l,x-n))):l=o+l,l}})});var Kpe=R(()=>{"use strict";p();var bpt=oe(),wpt=ct(),Zpe=yt(),Ype=oE(),ZP=wpt(1 .toPrecision),Ept=Zpe(function(){return ZP(1,void 0)!=="1"})||!Zpe(function(){ZP({})});bpt({target:"Number",proto:!0,forced:Ept},{toPrecision:function(e){return e===void 0?ZP(Ype(this)):ZP(Ype(this),e)}})});var c5=R((jEr,Jpe)=>{"use strict";p();var Xpe=sr(),Spt=ct(),Tpt=jt(),Ipt=yt(),u5=yg(),Apt=M1(),Mpt=x1(),Cpt=Yr(),Ppt=hh(),R_=Object.assign,Qpe=Object.defineProperty,Rpt=Spt([].concat);Jpe.exports=!R_||Ipt(function(){if(Xpe&&R_({b:1},R_(Qpe({},"a",{enumerable:!0,get:function(){Qpe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},e={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(i){e[i]=i}),R_({},t)[r]!==7||u5(R_({},e)).join("")!==n})?function(e,r){for(var n=Cpt(e),i=arguments.length,o=1,l=Apt.f,f=Mpt.f;i>o;)for(var d=Ppt(arguments[o++]),v=l?Rpt(u5(d),l(d)):u5(d),x=v.length,b=0,A;x>b;)A=v[b++],(!Xpe||Tpt(f,d,A))&&(n[A]=d[A]);return n}:R_});var tde=R(()=>{"use strict";p();var Opt=oe(),ede=c5();Opt({target:"Object",stat:!0,arity:2,forced:Object.assign!==ede},{assign:ede})});var rde=R(()=>{"use strict";p();var Lpt=oe(),Dpt=sr(),Npt=Qi();Lpt({target:"Object",stat:!0,sham:!Dpt},{create:Npt})});var uE=R((WEr,ide)=>{"use strict";p();var kpt=pn(),qpt=Ft(),Fpt=yt(),nde=_P();ide.exports=kpt||!Fpt(function(){if(!(nde&&nde<535)){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete qpt[t]}})});var ode=R(()=>{"use strict";p();var jpt=oe(),zpt=sr(),Upt=uE(),Bpt=xr(),Vpt=Yr(),Gpt=ti();zpt&&jpt({target:"Object",proto:!0,forced:Upt},{__defineGetter__:function(e,r){Gpt.f(Vpt(this),e,{get:Bpt(r),enumerable:!0,configurable:!0})}})});var sde=R(()=>{"use strict";p();var $pt=oe(),Hpt=sr(),ade=VC().f;$pt({target:"Object",stat:!0,forced:Object.defineProperties!==ade,sham:!Hpt},{defineProperties:ade})});var ude=R(()=>{"use strict";p();var Wpt=oe(),Zpt=sr(),lde=ti().f;Wpt({target:"Object",stat:!0,forced:Object.defineProperty!==lde,sham:!Zpt},{defineProperty:lde})});var cde=R(()=>{"use strict";p();var Ypt=oe(),Kpt=sr(),Xpt=uE(),Qpt=xr(),Jpt=Yr(),edt=ti();Kpt&&Ypt({target:"Object",proto:!0,forced:Xpt},{__defineSetter__:function(e,r){edt.f(Jpt(this),e,{set:Qpt(r),enumerable:!0,configurable:!0})}})});var f5=R((sSr,mde)=>{"use strict";p();var hde=sr(),tdt=yt(),pde=ct(),rdt=bo(),ndt=yg(),idt=_o(),odt=x1().f,dde=pde(odt),adt=pde([].push),sdt=hde&&tdt(function(){var t=Object.create(null);return t[2]=2,!dde(t,2)}),fde=function(t){return function(e){for(var r=idt(e),n=ndt(r),i=sdt&&rdt(r)===null,o=n.length,l=0,f=[],d;o>l;)d=n[l++],(!hde||(i?d in r:dde(r,d)))&&adt(f,t?[d,r[d]]:r[d]);return f}};mde.exports={entries:fde(!0),values:fde(!1)}});var gde=R(()=>{"use strict";p();var ldt=oe(),udt=f5().entries;ldt({target:"Object",stat:!0},{entries:function(e){return udt(e)}})});var vde=R(()=>{"use strict";p();var cdt=oe(),fdt=Eh(),hdt=yt(),pdt=hr(),ddt=bd().onFreeze,h5=Object.freeze,mdt=hdt(function(){h5(1)});cdt({target:"Object",stat:!0,forced:mdt,sham:!fdt},{freeze:function(e){return h5&&pdt(e)?h5(ddt(e)):e}})});var yde=R(()=>{"use strict";p();var gdt=oe(),vdt=Oi(),ydt=tu();gdt({target:"Object",stat:!0},{fromEntries:function(e){var r={};return vdt(e,function(n,i){ydt(r,n,i)},{AS_ENTRIES:!0}),r}})});var bde=R(()=>{"use strict";p();var _dt=oe(),xdt=yt(),bdt=_o(),_de=Yo().f,xde=sr(),wdt=!xde||xdt(function(){_de(1)});_dt({target:"Object",stat:!0,forced:wdt,sham:!xde},{getOwnPropertyDescriptor:function(e,r){return _de(bdt(e),r)}})});var wde=R(()=>{"use strict";p();var Edt=oe(),Sdt=sr(),Tdt=jC(),Idt=_o(),Adt=Yo(),Mdt=tu();Edt({target:"Object",stat:!0,sham:!Sdt},{getOwnPropertyDescriptors:function(e){for(var r=Idt(e),n=Adt.f,i=Tdt(r),o={},l=0,f,d;i.length>l;)d=n(r,f=i[l++]),d!==void 0&&Mdt(o,f,d);return o}})});var Ede=R(()=>{"use strict";p();var Cdt=oe(),Pdt=yt(),Rdt=HC().f,Odt=Pdt(function(){return!Object.getOwnPropertyNames(1)});Cdt({target:"Object",stat:!0,forced:Odt},{getOwnPropertyNames:Rdt})});var Tde=R(()=>{"use strict";p();var Ldt=oe(),Ddt=yt(),Ndt=Yr(),Sde=bo(),kdt=oP(),qdt=Ddt(function(){Sde(1)});Ldt({target:"Object",stat:!0,forced:qdt,sham:!kdt},{getPrototypeOf:function(e){return Sde(Ndt(e))}})});var p5=R(()=>{"use strict";p();var Fdt=oe(),jdt=_r(),zdt=ct(),Udt=xr(),Bdt=oi(),Vdt=Yc(),Gdt=Oi(),$dt=yt(),Ide=Object.groupBy,Hdt=jdt("Object","create"),Wdt=zdt([].push),Zdt=!Ide||$dt(function(){return Ide("ab",function(t){return t}).a.length!==1});Fdt({target:"Object",stat:!0,forced:Zdt},{groupBy:function(e,r){Bdt(e),Udt(r);var n=Hdt(null),i=0;return Gdt(e,function(o){var l=Vdt(r(o,i++));l in n?Wdt(n[l],o):n[l]=[o]}),n}})});var d5=R(()=>{"use strict";p();var Ydt=oe(),Kdt=Br();Ydt({target:"Object",stat:!0},{hasOwn:Kdt})});var YP=R((kSr,Ade)=>{"use strict";p();Ade.exports=Object.is||function(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}});var Mde=R(()=>{"use strict";p();var Xdt=oe(),Qdt=YP();Xdt({target:"Object",stat:!0},{is:Qdt})});var Pde=R(()=>{"use strict";p();var Jdt=oe(),Cde=jP();Jdt({target:"Object",stat:!0,forced:Object.isExtensible!==Cde},{isExtensible:Cde})});var Ode=R(()=>{"use strict";p();var emt=oe(),tmt=yt(),rmt=hr(),nmt=da(),Rde=qP(),m5=Object.isFrozen,imt=Rde||tmt(function(){m5(1)});emt({target:"Object",stat:!0,forced:imt},{isFrozen:function(e){return!rmt(e)||Rde&&nmt(e)==="ArrayBuffer"?!0:m5?m5(e):!1}})});var Dde=R(()=>{"use strict";p();var omt=oe(),amt=yt(),smt=hr(),lmt=da(),Lde=qP(),g5=Object.isSealed,umt=Lde||amt(function(){g5(1)});omt({target:"Object",stat:!0,forced:umt},{isSealed:function(e){return!smt(e)||Lde&&lmt(e)==="ArrayBuffer"?!0:g5?g5(e):!1}})});var kde=R(()=>{"use strict";p();var cmt=oe(),fmt=Yr(),Nde=yg(),hmt=yt(),pmt=hmt(function(){Nde(1)});cmt({target:"Object",stat:!0,forced:pmt},{keys:function(e){return Nde(fmt(e))}})});var qde=R(()=>{"use strict";p();var dmt=oe(),mmt=sr(),gmt=uE(),vmt=Yr(),ymt=Yc(),_mt=bo(),xmt=Yo().f;mmt&&dmt({target:"Object",proto:!0,forced:gmt},{__lookupGetter__:function(e){var r=vmt(this),n=ymt(e),i;do if(i=xmt(r,n))return i.get;while(r=_mt(r))}})});var Fde=R(()=>{"use strict";p();var bmt=oe(),wmt=sr(),Emt=uE(),Smt=Yr(),Tmt=Yc(),Imt=bo(),Amt=Yo().f;wmt&&bmt({target:"Object",proto:!0,forced:Emt},{__lookupSetter__:function(e){var r=Smt(this),n=Tmt(e),i;do if(i=Amt(r,n))return i.set;while(r=Imt(r))}})});var jde=R(()=>{"use strict";p();var Mmt=oe(),Cmt=hr(),Pmt=bd().onFreeze,Rmt=Eh(),Omt=yt(),v5=Object.preventExtensions,Lmt=Omt(function(){v5(1)});Mmt({target:"Object",stat:!0,forced:Lmt,sham:!Rmt},{preventExtensions:function(e){return v5&&Cmt(e)?v5(Pmt(e)):e}})});var Gde=R(()=>{"use strict";p();var Dmt=sr(),Nmt=hi(),kmt=hr(),qmt=hU(),Fmt=Yr(),jmt=oi(),zde=Object.getPrototypeOf,Ude=Object.setPrototypeOf,Bde=Object.prototype,Vde="__proto__";if(Dmt&&zde&&Ude&&!(Vde in Bde))try{Nmt(Bde,Vde,{configurable:!0,get:function(){return zde(Fmt(this))},set:function(e){var r=jmt(this);qmt(e)&&kmt(r)&&Ude(r,e)}})}catch(t){}});var $de=R(()=>{"use strict";p();var zmt=oe(),Umt=hr(),Bmt=bd().onFreeze,Vmt=Eh(),Gmt=yt(),y5=Object.seal,$mt=Gmt(function(){y5(1)});zmt({target:"Object",stat:!0,forced:$mt,sham:!Vmt},{seal:function(e){return y5&&Umt(e)?y5(Bmt(e)):e}})});var Hde=R(()=>{"use strict";p();var Hmt=oe(),Wmt=eu();Hmt({target:"Object",stat:!0},{setPrototypeOf:Wmt})});var Zde=R((vTr,Wde)=>{"use strict";p();var Zmt=UC(),Ymt=ls();Wde.exports=Zmt?{}.toString:function(){return"[object "+Ymt(this)+"]"}});var Yde=R(()=>{"use strict";p();var Kmt=UC(),Xmt=jn(),Qmt=Zde();Kmt||Xmt(Object.prototype,"toString",Qmt,{unsafe:!0})});var Kde=R(()=>{"use strict";p();var Jmt=oe(),egt=f5().values;Jmt({target:"Object",stat:!0},{values:function(e){return egt(e)}})});var Qde=R(()=>{"use strict";p();var tgt=oe(),Xde=r5();tgt({global:!0,forced:parseFloat!==Xde},{parseFloat:Xde})});var eme=R(()=>{"use strict";p();var rgt=oe(),Jde=n5();rgt({global:!0,forced:parseInt!==Jde},{parseInt:Jde})});var cE=R((RTr,tme)=>{"use strict";p();var ngt=rc(),igt=rd(),ogt=TypeError;tme.exports=function(t){if(ngt(t))return t;throw new ogt(igt(t)+" is not a constructor")}});var fE=R((LTr,nme)=>{"use strict";p();var rme=Bt(),agt=cE(),sgt=Ns(),lgt=mr(),ugt=lgt("species");nme.exports=function(t,e){var r=rme(t).constructor,n;return r===void 0||sgt(n=rme(r)[ugt])?e:agt(n)}});var Tl=R((NTr,ime)=>{"use strict";p();var cgt=TypeError;ime.exports=function(t,e){if(t<e)throw new cgt("Not enough arguments");return t}});var _5=R((qTr,ome)=>{"use strict";p();var fgt=Ku();ome.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(fgt)});var dE=R((jTr,dme)=>{"use strict";p();var Il=Ft(),hgt=ga(),pgt=Wn(),ame=jr(),dgt=Br(),pme=yt(),sme=B4(),mgt=qs(),lme=E1(),ggt=Tl(),vgt=_5(),ygt=Tg(),T5=Il.setImmediate,I5=Il.clearImmediate,_gt=Il.process,x5=Il.Dispatch,xgt=Il.Function,ume=Il.MessageChannel,bgt=Il.String,b5=0,hE={},cme="onreadystatechange",pE,Pg,w5,E5;pme(function(){pE=Il.location});var A5=function(t){if(dgt(hE,t)){var e=hE[t];delete hE[t],e()}},S5=function(t){return function(){A5(t)}},fme=function(t){A5(t.data)},hme=function(t){Il.postMessage(bgt(t),pE.protocol+"//"+pE.host)};(!T5||!I5)&&(T5=function(e){ggt(arguments.length,1);var r=ame(e)?e:xgt(e),n=mgt(arguments,1);return hE[++b5]=function(){hgt(r,void 0,n)},Pg(b5),b5},I5=function(e){delete hE[e]},ygt?Pg=function(t){_gt.nextTick(S5(t))}:x5&&x5.now?Pg=function(t){x5.now(S5(t))}:ume&&!vgt?(w5=new ume,E5=w5.port2,w5.port1.onmessage=fme,Pg=pgt(E5.postMessage,E5)):Il.addEventListener&&ame(Il.postMessage)&&!Il.importScripts&&pE&&pE.protocol!=="file:"&&!pme(hme)?(Pg=hme,Il.addEventListener("message",fme,!1)):cme in lme("script")?Pg=function(t){sme.appendChild(lme("script"))[cme]=function(){sme.removeChild(this),A5(t)}}:Pg=function(t){setTimeout(S5(t),0)});dme.exports={set:T5,clear:I5}});var M5=R((UTr,gme)=>{"use strict";p();var mme=Ft(),wgt=sr(),Egt=Object.getOwnPropertyDescriptor;gme.exports=function(t){if(!wgt)return mme[t];var e=Egt(mme,t);return e&&e.value}});var C5=R((VTr,yme)=>{"use strict";p();var vme=function(){this.head=null,this.tail=null};vme.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t){var e=this.head=t.next;return e===null&&(this.tail=null),t.item}}};yme.exports=vme});var xme=R(($Tr,_me)=>{"use strict";p();var Sgt=Ku();_me.exports=/ipad|iphone|ipod/i.test(Sgt)&&typeof Pebble!="undefined"});var wme=R((WTr,bme)=>{"use strict";p();var Tgt=Ku();bme.exports=/web0s(?!.*chrome)/i.test(Tgt)});var N5=R((YTr,Mme)=>{"use strict";p();var L_=Ft(),Igt=M5(),Eme=Wn(),P5=dE().set,Agt=C5(),Mgt=_5(),Cgt=xme(),Pgt=wme(),R5=Tg(),Sme=L_.MutationObserver||L_.WebKitMutationObserver,Tme=L_.document,Ime=L_.process,KP=L_.Promise,D5=Igt("queueMicrotask"),O_,O5,L5,XP,Ame;D5||(mE=new Agt,gE=function(){var t,e;for(R5&&(t=Ime.domain)&&t.exit();e=mE.get();)try{e()}catch(r){throw mE.head&&O_(),r}t&&t.enter()},!Mgt&&!R5&&!Pgt&&Sme&&Tme?(O5=!0,L5=Tme.createTextNode(""),new Sme(gE).observe(L5,{characterData:!0}),O_=function(){L5.data=O5=!O5}):!Cgt&&KP&&KP.resolve?(XP=KP.resolve(void 0),XP.constructor=KP,Ame=Eme(XP.then,XP),O_=function(){Ame(gE)}):R5?O_=function(){Ime.nextTick(gE)}:(P5=Eme(P5,L_),O_=function(){P5(gE)}),D5=function(t){mE.head||O_(),mE.add(t)});var mE,gE;Mme.exports=D5});var k5=R((XTr,Cme)=>{"use strict";p();Cme.exports=function(t,e){try{arguments.length===1?console.error(t):console.error(t,e)}catch(r){}}});var wd=R((JTr,Pme)=>{"use strict";p();Pme.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}});var Rg=R((tIr,Rme)=>{"use strict";p();var Rgt=Ft();Rme.exports=Rgt.Promise});var D_=R((nIr,Nme)=>{"use strict";p();var Ogt=Ft(),vE=Rg(),Lgt=jr(),Dgt=h_(),Ngt=S1(),kgt=mr(),Ome=H1(),qgt=pn(),q5=Qu(),Lme=vE&&vE.prototype,Fgt=kgt("species"),F5=!1,Dme=Lgt(Ogt.PromiseRejectionEvent),jgt=Dgt("Promise",function(){var t=Ngt(vE),e=t!==String(vE);if(!e&&q5===66||qgt&&!(Lme.catch&&Lme.finally))return!0;if(!q5||q5<51||!/native code/.test(t)){var r=new vE(function(o){o(1)}),n=function(o){o(function(){},function(){})},i=r.constructor={};if(i[Fgt]=n,F5=r.then(function(){})instanceof n,!F5)return!0}return!e&&(Ome==="BROWSER"||Ome==="DENO")&&!Dme});Nme.exports={CONSTRUCTOR:jgt,REJECTION_EVENT:Dme,SUBCLASSING:F5}});var rf=R((oIr,qme)=>{"use strict";p();var kme=xr(),zgt=TypeError,Ugt=function(t){var e,r;this.promise=new t(function(n,i){if(e!==void 0||r!==void 0)throw new zgt("Bad Promise constructor");e=n,r=i}),this.resolve=kme(e),this.reject=kme(r)};qme.exports.f=function(t){return new Ugt(t)}});var rge=R(()=>{"use strict";p();var Bgt=oe(),Vgt=pn(),tR=Tg(),Ed=Ft(),F_=jt(),Fme=jn(),jme=eu(),Ggt=us(),$gt=dd(),Hgt=xr(),eR=jr(),Wgt=hr(),Zgt=qa(),Ygt=fE(),Gme=dE().set,V5=N5(),Kgt=k5(),Xgt=wd(),Qgt=C5(),$me=Rn(),rR=Rg(),G5=D_(),Hme=rf(),nR="Promise",Wme=G5.CONSTRUCTOR,Jgt=G5.REJECTION_EVENT,evt=G5.SUBCLASSING,j5=$me.getterFor(nR),tvt=$me.set,N_=rR&&rR.prototype,Og=rR,QP=N_,Zme=Ed.TypeError,z5=Ed.document,$5=Ed.process,U5=Hme.f,rvt=U5,nvt=!!(z5&&z5.createEvent&&Ed.dispatchEvent),Yme="unhandledrejection",ivt="rejectionhandled",zme=0,Kme=1,ovt=2,H5=1,Xme=2,JP,Ume,avt,Bme,Qme=function(t){var e;return Wgt(t)&&eR(e=t.then)?e:!1},Jme=function(t,e){var r=e.value,n=e.state===Kme,i=n?t.ok:t.fail,o=t.resolve,l=t.reject,f=t.domain,d,v,x;try{i?(n||(e.rejection===Xme&&lvt(e),e.rejection=H5),i===!0?d=r:(f&&f.enter(),d=i(r),f&&(f.exit(),x=!0)),d===t.promise?l(new Zme("Promise-chain cycle")):(v=Qme(d))?F_(v,d,o,l):o(d)):l(r)}catch(b){f&&!x&&f.exit(),l(b)}},ege=function(t,e){t.notified||(t.notified=!0,V5(function(){for(var r=t.reactions,n;n=r.get();)Jme(n,t);t.notified=!1,e&&!t.rejection&&svt(t)}))},tge=function(t,e,r){var n,i;nvt?(n=z5.createEvent("Event"),n.promise=e,n.reason=r,n.initEvent(t,!1,!0),Ed.dispatchEvent(n)):n={promise:e,reason:r},!Jgt&&(i=Ed["on"+t])?i(n):t===Yme&&Kgt("Unhandled promise rejection",r)},svt=function(t){F_(Gme,Ed,function(){var e=t.facade,r=t.value,n=Vme(t),i;if(n&&(i=Xgt(function(){tR?$5.emit("unhandledRejection",r,e):tge(Yme,e,r)}),t.rejection=tR||Vme(t)?Xme:H5,i.error))throw i.value})},Vme=function(t){return t.rejection!==H5&&!t.parent},lvt=function(t){F_(Gme,Ed,function(){var e=t.facade;tR?$5.emit("rejectionHandled",e):tge(ivt,e,t.value)})},k_=function(t,e,r){return function(n){t(e,n,r)}},q_=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=ovt,ege(t,!0))},B5=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new Zme("Promise can't be resolved itself");var n=Qme(e);n?V5(function(){var i={done:!1};try{F_(n,e,k_(B5,i,t),k_(q_,i,t))}catch(o){q_(i,o,t)}}):(t.value=e,t.state=Kme,ege(t,!1))}catch(i){q_({done:!1},i,t)}}};if(Wme&&(Og=function(e){Zgt(this,QP),Hgt(e),F_(JP,this);var r=j5(this);try{e(k_(B5,r),k_(q_,r))}catch(n){q_(r,n)}},QP=Og.prototype,JP=function(e){tvt(this,{type:nR,done:!1,notified:!1,parent:!1,reactions:new Qgt,rejection:!1,state:zme,value:null})},JP.prototype=Fme(QP,"then",function(e,r){var n=j5(this),i=U5(Ygt(this,Og));return n.parent=!0,i.ok=eR(e)?e:!0,i.fail=eR(r)&&r,i.domain=tR?$5.domain:void 0,n.state===zme?n.reactions.add(i):V5(function(){Jme(i,n)}),i.promise}),Ume=function(){var t=new JP,e=j5(t);this.promise=t,this.resolve=k_(B5,e),this.reject=k_(q_,e)},Hme.f=U5=function(t){return t===Og||t===avt?new Ume(t):rvt(t)},!Vgt&&eR(rR)&&N_!==Object.prototype)){Bme=N_.then,evt||Fme(N_,"then",function(e,r){var n=this;return new Og(function(i,o){F_(Bme,n,i,o)}).then(e,r)},{unsafe:!0});try{delete N_.constructor}catch(t){}jme&&jme(N_,QP)}Bgt({global:!0,constructor:!0,wrap:!0,forced:Wme},{Promise:Og});Ggt(Og,nR,!1,!0);$gt(nR)});var yE=R((cIr,nge)=>{"use strict";p();var uvt=Rg(),cvt=z1(),fvt=D_().CONSTRUCTOR;nge.exports=fvt||!cvt(function(t){uvt.all(t).then(void 0,function(){})})});var ige=R(()=>{"use strict";p();var hvt=oe(),pvt=jt(),dvt=xr(),mvt=rf(),gvt=wd(),vvt=Oi(),yvt=yE();hvt({target:"Promise",stat:!0,forced:yvt},{all:function(e){var r=this,n=mvt.f(r),i=n.resolve,o=n.reject,l=gvt(function(){var f=dvt(r.resolve),d=[],v=0,x=1;vvt(e,function(b){var A=v++,P=!1;x++,pvt(f,r,b).then(function(N){P||(P=!0,d[A]=N,--x||i(d))},o)}),--x||i(d)});return l.error&&o(l.value),n.promise}})});var age=R(()=>{"use strict";p();var _vt=oe(),xvt=pn(),bvt=D_().CONSTRUCTOR,Z5=Rg(),wvt=_r(),Evt=jr(),Svt=jn(),oge=Z5&&Z5.prototype;_vt({target:"Promise",proto:!0,forced:bvt,real:!0},{catch:function(t){return this.then(void 0,t)}});!xvt&&Evt(Z5)&&(W5=wvt("Promise").prototype.catch,oge.catch!==W5&&Svt(oge,"catch",W5,{unsafe:!0}));var W5});var sge=R(()=>{"use strict";p();var Tvt=oe(),Ivt=jt(),Avt=xr(),Mvt=rf(),Cvt=wd(),Pvt=Oi(),Rvt=yE();Tvt({target:"Promise",stat:!0,forced:Rvt},{race:function(e){var r=this,n=Mvt.f(r),i=n.reject,o=Cvt(function(){var l=Avt(r.resolve);Pvt(e,function(f){Ivt(l,r,f).then(n.resolve,i)})});return o.error&&i(o.value),n.promise}})});var lge=R(()=>{"use strict";p();var Ovt=oe(),Lvt=rf(),Dvt=D_().CONSTRUCTOR;Ovt({target:"Promise",stat:!0,forced:Dvt},{reject:function(e){var r=Lvt.f(this),n=r.reject;return n(e),r.promise}})});var Y5=R((SIr,uge)=>{"use strict";p();var Nvt=Bt(),kvt=hr(),qvt=rf();uge.exports=function(t,e){if(Nvt(t),kvt(e)&&e.constructor===t)return e;var r=qvt.f(t),n=r.resolve;return n(e),r.promise}});var hge=R(()=>{"use strict";p();var Fvt=oe(),jvt=_r(),cge=pn(),zvt=Rg(),fge=D_().CONSTRUCTOR,Uvt=Y5(),Bvt=jvt("Promise"),Vvt=cge&&!fge;Fvt({target:"Promise",stat:!0,forced:cge||fge},{resolve:function(e){return Uvt(Vvt&&this===Bvt?zvt:this,e)}})});var pge=R(()=>{"use strict";p();rge();ige();age();sge();lge();hge()});var K5=R(()=>{"use strict";p();var Gvt=oe(),$vt=jt(),Hvt=xr(),Wvt=rf(),Zvt=wd(),Yvt=Oi(),Kvt=yE();Gvt({target:"Promise",stat:!0,forced:Kvt},{allSettled:function(e){var r=this,n=Wvt.f(r),i=n.resolve,o=n.reject,l=Zvt(function(){var f=Hvt(r.resolve),d=[],v=0,x=1;Yvt(e,function(b){var A=v++,P=!1;x++,$vt(f,r,b).then(function(N){P||(P=!0,d[A]={status:"fulfilled",value:N},--x||i(d))},function(N){P||(P=!0,d[A]={status:"rejected",reason:N},--x||i(d))})}),--x||i(d)});return l.error&&o(l.value),n.promise}})});var X5=R(()=>{"use strict";p();var Xvt=oe(),Qvt=jt(),Jvt=xr(),eyt=_r(),tyt=rf(),ryt=wd(),nyt=Oi(),iyt=yE(),dge="No one promise resolved";Xvt({target:"Promise",stat:!0,forced:iyt},{any:function(e){var r=this,n=eyt("AggregateError"),i=tyt.f(r),o=i.resolve,l=i.reject,f=ryt(function(){var d=Jvt(r.resolve),v=[],x=0,b=1,A=!1;nyt(e,function(P){var N=x++,j=!1;b++,Qvt(d,r,P).then(function(D){j||A||(A=!0,o(D))},function(D){j||A||(j=!0,v[N]=D,--b||l(new n(v,dge)))})}),--b||l(new n(v,dge))});return f.error&&l(f.value),i.promise}})});var yge=R(()=>{"use strict";p();var oyt=oe(),ayt=pn(),iR=Rg(),syt=yt(),gge=_r(),vge=jr(),lyt=fE(),mge=Y5(),uyt=jn(),J5=iR&&iR.prototype,cyt=!!iR&&syt(function(){J5.finally.call({then:function(){}},function(){})});oyt({target:"Promise",proto:!0,real:!0,forced:cyt},{finally:function(t){var e=lyt(this,gge("Promise")),r=vge(t);return this.then(r?function(n){return mge(e,t()).then(function(){return n})}:t,r?function(n){return mge(e,t()).then(function(){throw n})}:t)}});!ayt&&vge(iR)&&(Q5=gge("Promise").prototype.finally,J5.finally!==Q5&&uyt(J5,"finally",Q5,{unsafe:!0}));var Q5});var tV=R(()=>{"use strict";p();var fyt=oe(),hyt=Ft(),pyt=ga(),dyt=qs(),myt=rf(),gyt=xr(),xge=wd(),eV=hyt.Promise,_ge=!1,vyt=!eV||!eV.try||xge(function(){eV.try(function(t){_ge=t===8},8)}).error||!_ge;fyt({target:"Promise",stat:!0,forced:vyt},{try:function(t){var e=arguments.length>1?dyt(arguments,1):[],r=myt.f(this),n=xge(function(){return pyt(gyt(t),void 0,e)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var rV=R(()=>{"use strict";p();var yyt=oe(),_yt=rf();yyt({target:"Promise",stat:!0},{withResolvers:function(){var e=_yt.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})});var bge=R(()=>{"use strict";p();var xyt=oe(),byt=ga(),wyt=xr(),Eyt=Bt(),Syt=yt(),Tyt=!Syt(function(){Reflect.apply(function(){})});xyt({target:"Reflect",stat:!0,forced:Tyt},{apply:function(e,r,n){return byt(wyt(e),r,Eyt(n))}})});var Mge=R(()=>{"use strict";p();var Iyt=oe(),Ayt=_r(),nV=ga(),Myt=JB(),wge=cE(),Cyt=Bt(),Ege=hr(),Pyt=Qi(),Tge=yt(),iV=Ayt("Reflect","construct"),Ryt=Object.prototype,Oyt=[].push,Ige=Tge(function(){function t(){}return!(iV(function(){},[],t)instanceof t)}),Age=!Tge(function(){iV(function(){})}),Sge=Ige||Age;Iyt({target:"Reflect",stat:!0,forced:Sge,sham:Sge},{construct:function(e,r){wge(e),Cyt(r);var n=arguments.length<3?e:wge(arguments[2]);if(Age&&!Ige)return iV(e,r,n);if(e===n){switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3])}var i=[null];return nV(Oyt,i,r),new(nV(Myt,e,i))}var o=n.prototype,l=Pyt(Ege(o)?o:Ryt),f=nV(e,l,r);return Ege(f)?f:l}})});var Rge=R(()=>{"use strict";p();var Lyt=oe(),Dyt=sr(),Cge=Bt(),Nyt=Yc(),Pge=ti(),kyt=yt(),qyt=kyt(function(){Reflect.defineProperty(Pge.f({},1,{value:1}),1,{value:2})});Lyt({target:"Reflect",stat:!0,forced:qyt,sham:!Dyt},{defineProperty:function(e,r,n){Cge(e);var i=Nyt(r);Cge(n);try{return Pge.f(e,i,n),!0}catch(o){return!1}}})});var Oge=R(()=>{"use strict";p();var Fyt=oe(),jyt=Bt(),zyt=Yo().f;Fyt({target:"Reflect",stat:!0},{deleteProperty:function(e,r){var n=zyt(jyt(e),r);return n&&!n.configurable?!1:delete e[r]}})});var oV=R((oAr,Dge)=>{"use strict";p();var Lge=Br();Dge.exports=function(t){return t!==void 0&&(Lge(t,"value")||Lge(t,"writable"))}});var kge=R(()=>{"use strict";p();var Uyt=oe(),Byt=jt(),Vyt=hr(),Gyt=Bt(),$yt=oV(),Hyt=Yo(),Wyt=bo();function Nge(t,e){var r=arguments.length<3?t:arguments[2],n,i;if(Gyt(t)===r)return t[e];if(n=Hyt.f(t,e),n)return $yt(n)?n.value:n.get===void 0?void 0:Byt(n.get,r);if(Vyt(i=Wyt(t)))return Nge(i,e,r)}Uyt({target:"Reflect",stat:!0},{get:Nge})});var qge=R(()=>{"use strict";p();var Zyt=oe(),Yyt=sr(),Kyt=Bt(),Xyt=Yo();Zyt({target:"Reflect",stat:!0,sham:!Yyt},{getOwnPropertyDescriptor:function(e,r){return Xyt.f(Kyt(e),r)}})});var Fge=R(()=>{"use strict";p();var Qyt=oe(),Jyt=Bt(),e_t=bo(),t_t=oP();Qyt({target:"Reflect",stat:!0,sham:!t_t},{getPrototypeOf:function(e){return e_t(Jyt(e))}})});var jge=R(()=>{"use strict";p();var r_t=oe();r_t({target:"Reflect",stat:!0},{has:function(e,r){return r in e}})});var zge=R(()=>{"use strict";p();var n_t=oe(),i_t=Bt(),o_t=jP();n_t({target:"Reflect",stat:!0},{isExtensible:function(e){return i_t(e),o_t(e)}})});var Uge=R(()=>{"use strict";p();var a_t=oe(),s_t=jC();a_t({target:"Reflect",stat:!0},{ownKeys:s_t})});var Bge=R(()=>{"use strict";p();var l_t=oe(),u_t=_r(),c_t=Bt(),f_t=Eh();l_t({target:"Reflect",stat:!0,sham:!f_t},{preventExtensions:function(e){c_t(e);try{var r=u_t("Object","preventExtensions");return r&&r(e),!0}catch(n){return!1}}})});var Wge=R(()=>{"use strict";p();var h_t=oe(),p_t=jt(),d_t=Bt(),Vge=hr(),m_t=oV(),g_t=yt(),aV=ti(),Gge=Yo(),v_t=bo(),$ge=Ds();function Hge(t,e,r){var n=arguments.length<4?t:arguments[3],i=Gge.f(d_t(t),e),o,l,f;if(!i){if(Vge(l=v_t(t)))return Hge(l,e,r,n);i=$ge(0)}if(m_t(i)){if(i.writable===!1||!Vge(n))return!1;if(o=Gge.f(n,e)){if(o.get||o.set||o.writable===!1)return!1;o.value=r,aV.f(n,e,o)}else aV.f(n,e,$ge(0,r))}else{if(f=i.set,f===void 0)return!1;p_t(f,n,r)}return!0}var y_t=g_t(function(){var t=function(){},e=aV.f(new t,"a",{configurable:!0});return Reflect.set(t.prototype,"a",1,e)!==!1});h_t({target:"Reflect",stat:!0,forced:y_t},{set:Hge})});var Yge=R(()=>{"use strict";p();var __t=oe(),x_t=Bt(),b_t=pU(),Zge=eu();Zge&&__t({target:"Reflect",stat:!0},{setPrototypeOf:function(e,r){x_t(e),b_t(r);try{return Zge(e,r),!0}catch(n){return!1}}})});var Kge=R(()=>{"use strict";p();var w_t=oe(),E_t=Ft(),S_t=us();w_t({global:!0},{Reflect:{}});S_t(E_t.Reflect,"Reflect",!0)});var _E=R((qAr,Xge)=>{"use strict";p();var T_t=hr(),I_t=da(),A_t=mr(),M_t=A_t("match");Xge.exports=function(t){var e;return T_t(t)&&((e=t[M_t])!==void 0?!!e:I_t(t)==="RegExp")}});var oR=R((jAr,Qge)=>{"use strict";p();var C_t=Bt();Qge.exports=function(){var t=C_t(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}});var j_=R((UAr,eve)=>{"use strict";p();var P_t=jt(),R_t=Br(),O_t=ma(),L_t=oR(),Jge=RegExp.prototype;eve.exports=function(t){var e=t.flags;return e===void 0&&!("flags"in Jge)&&!R_t(t,"flags")&&O_t(Jge,t)?P_t(L_t,t):e}});var xE=R((VAr,tve)=>{"use strict";p();var sV=yt(),D_t=Ft(),lV=D_t.RegExp,uV=sV(function(){var t=lV("a","y");return t.lastIndex=2,t.exec("abcd")!==null}),N_t=uV||sV(function(){return!lV("a","y").sticky}),k_t=uV||sV(function(){var t=lV("^r","gy");return t.lastIndex=2,t.exec("str")!==null});tve.exports={BROKEN_CARET:k_t,MISSED_STICKY:N_t,UNSUPPORTED_Y:uV}});var aR=R(($Ar,rve)=>{"use strict";p();var q_t=yt(),F_t=Ft(),j_t=F_t.RegExp;rve.exports=q_t(function(){var t=j_t(".","s");return!(t.dotAll&&t.test(`
`)&&t.flags==="s")})});var cV=R((WAr,nve)=>{"use strict";p();var z_t=yt(),U_t=Ft(),B_t=U_t.RegExp;nve.exports=z_t(function(){var t=B_t("(?<a>b)","g");return t.exec("b").groups.a!=="b"||"b".replace(t,"$<a>c")!=="bc"})});var pve=R(()=>{"use strict";p();var V_t=sr(),dV=Ft(),bE=ct(),G_t=h_(),$_t=ld(),H_t=xo(),W_t=Qi(),Z_t=id().f,ive=ma(),Y_t=_E(),ove=Mr(),K_t=j_(),uve=xE(),X_t=dU(),Q_t=jn(),J_t=yt(),e0t=Br(),t0t=Rn().enforce,r0t=dd(),n0t=mr(),cve=aR(),fve=cV(),i0t=n0t("match"),Td=dV.RegExp,z_=Td.prototype,o0t=dV.SyntaxError,a0t=bE(z_.exec),sR=bE("".charAt),ave=bE("".replace),sve=bE("".indexOf),lve=bE("".slice),s0t=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Lg=/a/g,fV=/a/g,l0t=new Td(Lg)!==Lg,hve=uve.MISSED_STICKY,u0t=uve.UNSUPPORTED_Y,c0t=V_t&&(!l0t||hve||cve||fve||J_t(function(){return fV[i0t]=!1,Td(Lg)!==Lg||Td(fV)===fV||String(Td(Lg,"i"))!=="/a/i"})),f0t=function(t){for(var e=t.length,r=0,n="",i=!1,o;r<=e;r++){if(o=sR(t,r),o==="\\"){n+=o+sR(t,++r);continue}!i&&o==="."?n+="[\\s\\S]":(o==="["?i=!0:o==="]"&&(i=!1),n+=o)}return n},h0t=function(t){for(var e=t.length,r=0,n="",i=[],o=W_t(null),l=!1,f=!1,d=0,v="",x;r<=e;r++){if(x=sR(t,r),x==="\\")x+=sR(t,++r);else if(x==="]")l=!1;else if(!l)switch(!0){case x==="[":l=!0;break;case x==="(":if(n+=x,lve(t,r+1,r+3)==="?:")continue;a0t(s0t,lve(t,r+1))&&(r+=2,f=!0),d++;continue;case x===">"&&f:if(v===""||e0t(o,v))throw new o0t("Invalid capture group name");o[v]=!0,i[i.length]=[v,d],f=!1,v="";continue}f?v+=x:n+=x}return[n,i]};if(G_t("RegExp",c0t)){for(Sd=function(e,r){var n=ive(z_,this),i=Y_t(e),o=r===void 0,l=[],f=e,d,v,x,b,A,P;if(!n&&i&&o&&e.constructor===Sd)return e;if((i||ive(z_,e))&&(e=e.source,o&&(r=K_t(f))),e=e===void 0?"":ove(e),r=r===void 0?"":ove(r),f=e,cve&&"dotAll"in Lg&&(v=!!r&&sve(r,"s")>-1,v&&(r=ave(r,/s/g,""))),d=r,hve&&"sticky"in Lg&&(x=!!r&&sve(r,"y")>-1,x&&u0t&&(r=ave(r,/y/g,""))),fve&&(b=h0t(e),e=b[0],l=b[1]),A=$_t(Td(e,r),n?this:z_,Sd),(v||x||l.length)&&(P=t0t(A),v&&(P.dotAll=!0,P.raw=Sd(f0t(e),d)),x&&(P.sticky=!0),l.length&&(P.groups=l)),e!==f)try{H_t(A,"source",f===""?"(?:)":f)}catch(N){}return A},hV=Z_t(Td),pV=0;hV.length>pV;)X_t(Sd,Td,hV[pV++]);z_.constructor=Sd,Sd.prototype=z_,Q_t(dV,"RegExp",Sd,{constructor:!0})}var Sd,hV,pV;r0t("RegExp")});var wE=R((QAr,dve)=>{"use strict";p();var p0t=TypeError;dve.exports=function(t){if(typeof t=="string")return t;throw new p0t("Argument is not a string")}});var yV=R(()=>{"use strict";p();var d0t=oe(),EE=ct(),m0t=wE(),g0t=Br(),mve=Q1().start,v0t=Mg(),y0t=Array,gve=RegExp.escape,vve=EE("".charAt),vV=EE("".charCodeAt),_0t=EE(1.1.toString),x0t=EE([].join),_ve=/^[0-9a-z]/i,b0t=/^[$()*+./?[\\\]^{|}]/,w0t=RegExp("^[!\"#%&',\\-:;<=>@`~"+v0t+"]"),mV=EE(_ve.exec),yve={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},gV=function(t){var e=_0t(vV(t,0),16);return e.length<3?"\\x"+mve(e,2,"0"):"\\u"+mve(e,4,"0")},E0t=!gve||gve("ab")!=="\\x61b";d0t({target:"RegExp",stat:!0,forced:E0t},{escape:function(e){m0t(e);for(var r=e.length,n=y0t(r),i=0;i<r;i++){var o=vve(e,i);if(i===0&&mV(_ve,o))n[i]=gV(o);else if(g0t(yve,o))n[i]="\\"+yve[o];else if(mV(b0t,o))n[i]="\\"+o;else if(mV(w0t,o))n[i]=gV(o);else{var l=vV(o,0);(l&63488)!==55296?n[i]=o:l>=56320||i+1>=r||(vV(e,i+1)&64512)!==56320?n[i]=gV(o):(n[i]=o,n[++i]=vve(e,i))}}return x0t(n,"")}})});var bve=R(()=>{"use strict";p();var S0t=sr(),T0t=aR(),I0t=da(),A0t=hi(),M0t=Rn().get,xve=RegExp.prototype,C0t=TypeError;S0t&&T0t&&A0t(xve,"dotAll",{configurable:!0,get:function(){if(this!==xve){if(I0t(this)==="RegExp")return!!M0t(this).dotAll;throw new C0t("Incompatible receiver, RegExp required")}}})});var cR=R((aMr,Eve)=>{"use strict";p();var U_=jt(),uR=ct(),P0t=Mr(),R0t=oR(),O0t=xE(),L0t=dh(),D0t=Qi(),N0t=Rn().get,k0t=aR(),q0t=cV(),F0t=L0t("native-string-replace",String.prototype.replace),lR=RegExp.prototype.exec,xV=lR,j0t=uR("".charAt),z0t=uR("".indexOf),U0t=uR("".replace),_V=uR("".slice),bV=function(){var t=/a/,e=/b*/g;return U_(lR,t,"a"),U_(lR,e,"a"),t.lastIndex!==0||e.lastIndex!==0}(),wve=O0t.BROKEN_CARET,wV=/()??/.exec("")[1]!==void 0,B0t=bV||wV||wve||k0t||q0t;B0t&&(xV=function(e){var r=this,n=N0t(r),i=P0t(e),o=n.raw,l,f,d,v,x,b,A;if(o)return o.lastIndex=r.lastIndex,l=U_(xV,o,i),r.lastIndex=o.lastIndex,l;var P=n.groups,N=wve&&r.sticky,j=U_(R0t,r),D=r.source,F=0,U=i;if(N&&(j=U0t(j,"y",""),z0t(j,"g")===-1&&(j+="g"),U=_V(i,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&j0t(i,r.lastIndex-1)!==`
`)&&(D="(?: "+D+")",U=" "+U,F++),f=new RegExp("^(?:"+D+")",j)),wV&&(f=new RegExp("^"+D+"$(?!\\s)",j)),bV&&(d=r.lastIndex),v=U_(lR,N?f:r,U),N?v?(v.input=_V(v.input,F),v[0]=_V(v[0],F),v.index=r.lastIndex,r.lastIndex+=v[0].length):r.lastIndex=0:bV&&v&&(r.lastIndex=r.global?v.index+v[0].length:d),wV&&v&&v.length>1&&U_(F0t,v[0],f,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(v[x]=void 0)}),v&&P)for(v.groups=b=D0t(null),x=0;x<P.length;x++)A=P[x],b[A[0]]=v[A[1]];return v});Eve.exports=xV});var fR=R(()=>{"use strict";p();var V0t=oe(),Sve=cR();V0t({target:"RegExp",proto:!0,forced:/./.exec!==Sve},{exec:Sve})});var Ave=R(()=>{"use strict";p();var G0t=Ft(),$0t=sr(),H0t=hi(),W0t=oR(),Z0t=yt(),Tve=G0t.RegExp,Ive=Tve.prototype,Y0t=$0t&&Z0t(function(){var t=!0;try{Tve(".","d")}catch(d){t=!1}var e={},r="",n=t?"dgimsy":"gimsy",i=function(d,v){Object.defineProperty(e,d,{get:function(){return r+=v,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};t&&(o.hasIndices="d");for(var l in o)i(l,o[l]);var f=Object.getOwnPropertyDescriptor(Ive,"flags").get.call(e);return f!==n||r!==n});Y0t&&H0t(Ive,"flags",{configurable:!0,get:W0t})});var Cve=R(()=>{"use strict";p();var K0t=sr(),X0t=xE().MISSED_STICKY,Q0t=da(),J0t=hi(),ext=Rn().get,Mve=RegExp.prototype,txt=TypeError;K0t&&X0t&&J0t(Mve,"sticky",{configurable:!0,get:function(){if(this!==Mve){if(Q0t(this)==="RegExp")return!!ext(this).sticky;throw new txt("Incompatible receiver, RegExp required")}}})});var Ove=R(()=>{"use strict";p();fR();var rxt=oe(),Pve=jt(),nxt=jr(),Rve=Bt(),ixt=Mr(),oxt=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},e.test("abc")===!0&&t}(),axt=/./.test;rxt({target:"RegExp",proto:!0,forced:!oxt},{test:function(t){var e=Rve(this),r=ixt(t),n=e.exec;if(!nxt(n))return Pve(axt,e,r);var i=Pve(n,e,r);return i===null?!1:(Rve(i),!0)}})});var kve=R(()=>{"use strict";p();var sxt=mg().PROPER,lxt=jn(),uxt=Bt(),Lve=Mr(),cxt=yt(),fxt=j_(),EV="toString",Dve=RegExp.prototype,Nve=Dve[EV],hxt=cxt(function(){return Nve.call({source:"a",flags:"b"})!=="/a/b"}),pxt=sxt&&Nve.name!==EV;(hxt||pxt)&&lxt(Dve,EV,function(){var e=uxt(this),r=Lve(e.source),n=Lve(fxt(e));return"/"+r+"/"+n},{unsafe:!0})});var qve=R(()=>{"use strict";p();var dxt=eE(),mxt=B3();dxt("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},mxt)});var Fve=R(()=>{"use strict";p();qve()});var Qo=R((CMr,jve)=>{"use strict";p();var SV=ct(),hR=Set.prototype;jve.exports={Set,add:SV(hR.add),has:SV(hR.has),remove:SV(hR.delete),proto:hR}});var va=R((RMr,zve)=>{"use strict";p();var gxt=Qo().has;zve.exports=function(t){return gxt(t),t}});var Th=R((LMr,Uve)=>{"use strict";p();var vxt=jt();Uve.exports=function(t,e,r){for(var n=r?t:t.iterator,i=t.next,o,l;!(o=vxt(i,n)).done;)if(l=e(o.value),l!==void 0)return l}});var zs=R((NMr,Hve)=>{"use strict";p();var Bve=ct(),yxt=Th(),Vve=Qo(),_xt=Vve.Set,Gve=Vve.proto,xxt=Bve(Gve.forEach),$ve=Bve(Gve.keys),bxt=$ve(new _xt).next;Hve.exports=function(t,e,r){return r?yxt({iterator:$ve(t),next:bxt},e):xxt(t,e)}});var pR=R((qMr,Zve)=>{"use strict";p();var Wve=Qo(),wxt=zs(),Ext=Wve.Set,Sxt=Wve.add;Zve.exports=function(t){var e=new Ext;return wxt(t,function(r){Sxt(e,r)}),e}});var B_=R((jMr,Yve)=>{"use strict";p();var Txt=q1(),Ixt=Qo();Yve.exports=Txt(Ixt.proto,"size","get")||function(t){return t.size}});var Id=R((UMr,tye)=>{"use strict";p();var Kve=xr(),Jve=Bt(),Xve=jt(),Axt=fi(),Mxt=Ti(),Qve="Invalid size",Cxt=RangeError,Pxt=TypeError,Rxt=Math.max,eye=function(t,e){this.set=t,this.size=Rxt(e,0),this.has=Kve(t.has),this.keys=Kve(t.keys)};eye.prototype={getIterator:function(){return Mxt(Jve(Xve(this.keys,this.set)))},includes:function(t){return Xve(this.has,this.set,t)}};tye.exports=function(t){Jve(t);var e=+t.size;if(e!==e)throw new Pxt(Qve);var r=Axt(e);if(r<0)throw new Cxt(Qve);return new eye(t,r)}});var TV=R((VMr,iye)=>{"use strict";p();var Oxt=va(),nye=Qo(),Lxt=pR(),Dxt=B_(),Nxt=Id(),kxt=zs(),qxt=Th(),Fxt=nye.has,rye=nye.remove;iye.exports=function(e){var r=Oxt(this),n=Nxt(e),i=Lxt(r);return Dxt(r)<=n.size?kxt(r,function(o){n.includes(o)&&rye(i,o)}):qxt(n.getIterator(),function(o){Fxt(r,o)&&rye(i,o)}),i}});var Ad=R(($Mr,sye)=>{"use strict";p();var jxt=_r(),oye=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},aye=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};sye.exports=function(t,e){var r=jxt("Set");try{new r()[t](oye(0));try{return new r()[t](oye(-1)),!1}catch(i){if(!e)return!0;try{return new r()[t](aye(-1/0)),!1}catch(o){var n=new r;return n.add(1),n.add(2),e(n[t](aye(1/0)))}}}catch(i){return!1}}});var IV=R(()=>{"use strict";p();var zxt=oe(),Uxt=TV(),Bxt=Ad(),Vxt=!Bxt("difference",function(t){return t.size===0});zxt({target:"Set",proto:!0,real:!0,forced:Vxt},{difference:Uxt})});var MV=R((KMr,uye)=>{"use strict";p();var Gxt=va(),AV=Qo(),$xt=B_(),Hxt=Id(),Wxt=zs(),Zxt=Th(),Yxt=AV.Set,lye=AV.add,Kxt=AV.has;uye.exports=function(e){var r=Gxt(this),n=Hxt(e),i=new Yxt;return $xt(r)>n.size?Zxt(n.getIterator(),function(o){Kxt(r,o)&&lye(i,o)}):Wxt(r,function(o){n.includes(o)&&lye(i,o)}),i}});var CV=R(()=>{"use strict";p();var Xxt=oe(),Qxt=yt(),Jxt=MV(),ebt=Ad(),tbt=!ebt("intersection",function(t){return t.size===2&&t.has(1)&&t.has(2)})||Qxt(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});Xxt({target:"Set",proto:!0,real:!0,forced:tbt},{intersection:Jxt})});var PV=R((tCr,cye)=>{"use strict";p();var rbt=va(),nbt=Qo().has,ibt=B_(),obt=Id(),abt=zs(),sbt=Th(),lbt=Xo();cye.exports=function(e){var r=rbt(this),n=obt(e);if(ibt(r)<=n.size)return abt(r,function(o){if(n.includes(o))return!1},!0)!==!1;var i=n.getIterator();return sbt(i,function(o){if(nbt(r,o))return lbt(i,"normal",!1)})!==!1}});var RV=R(()=>{"use strict";p();var ubt=oe(),cbt=PV(),fbt=Ad(),hbt=!fbt("isDisjointFrom",function(t){return!t});ubt({target:"Set",proto:!0,real:!0,forced:hbt},{isDisjointFrom:cbt})});var OV=R((aCr,fye)=>{"use strict";p();var pbt=va(),dbt=B_(),mbt=zs(),gbt=Id();fye.exports=function(e){var r=pbt(this),n=gbt(e);return dbt(r)>n.size?!1:mbt(r,function(i){if(!n.includes(i))return!1},!0)!==!1}});var LV=R(()=>{"use strict";p();var vbt=oe(),ybt=OV(),_bt=Ad(),xbt=!_bt("isSubsetOf",function(t){return t});vbt({target:"Set",proto:!0,real:!0,forced:xbt},{isSubsetOf:ybt})});var DV=R((fCr,hye)=>{"use strict";p();var bbt=va(),wbt=Qo().has,Ebt=B_(),Sbt=Id(),Tbt=Th(),Ibt=Xo();hye.exports=function(e){var r=bbt(this),n=Sbt(e);if(Ebt(r)<n.size)return!1;var i=n.getIterator();return Tbt(i,function(o){if(!wbt(r,o))return Ibt(i,"normal",!1)})!==!1}});var NV=R(()=>{"use strict";p();var Abt=oe(),Mbt=DV(),Cbt=Ad(),Pbt=!Cbt("isSupersetOf",function(t){return!t});Abt({target:"Set",proto:!0,real:!0,forced:Pbt},{isSupersetOf:Mbt})});var qV=R((gCr,pye)=>{"use strict";p();var Rbt=va(),kV=Qo(),Obt=pR(),Lbt=Id(),Dbt=Th(),Nbt=kV.add,kbt=kV.has,qbt=kV.remove;pye.exports=function(e){var r=Rbt(this),n=Lbt(e).getIterator(),i=Obt(r);return Dbt(n,function(o){kbt(r,o)?qbt(i,o):Nbt(i,o)}),i}});var FV=R(()=>{"use strict";p();var Fbt=oe(),jbt=qV(),zbt=Ad();Fbt({target:"Set",proto:!0,real:!0,forced:!zbt("symmetricDifference")},{symmetricDifference:jbt})});var jV=R((bCr,dye)=>{"use strict";p();var Ubt=va(),Bbt=Qo().add,Vbt=pR(),Gbt=Id(),$bt=Th();dye.exports=function(e){var r=Ubt(this),n=Gbt(e).getIterator(),i=Vbt(r);return $bt(n,function(o){Bbt(i,o)}),i}});var zV=R(()=>{"use strict";p();var Hbt=oe(),Wbt=jV(),Zbt=Ad();Hbt({target:"Set",proto:!0,real:!0,forced:!Zbt("union")},{union:Wbt})});var mye=R(()=>{"use strict";p();var Ybt=oe(),Kbt=ct(),Xbt=oi(),Qbt=fi(),Jbt=Mr(),ewt=yt(),twt=Kbt("".charAt),rwt=ewt(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});Ybt({target:"String",proto:!0,forced:rwt},{at:function(e){var r=Jbt(Xbt(this)),n=r.length,i=Qbt(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:twt(r,o)}})});var Dg=R((CCr,yye)=>{"use strict";p();var UV=ct(),nwt=fi(),iwt=Mr(),owt=oi(),awt=UV("".charAt),gye=UV("".charCodeAt),swt=UV("".slice),vye=function(t){return function(e,r){var n=iwt(owt(e)),i=nwt(r),o=n.length,l,f;return i<0||i>=o?t?"":void 0:(l=gye(n,i),l<55296||l>56319||i+1===o||(f=gye(n,i+1))<56320||f>57343?t?awt(n,i):l:t?swt(n,i,i+2):(l-55296<<10)+(f-56320)+65536)}};yye.exports={codeAt:vye(!1),charAt:vye(!0)}});var _ye=R(()=>{"use strict";p();var lwt=oe(),uwt=Dg().codeAt;lwt({target:"String",proto:!0},{codePointAt:function(e){return uwt(this,e)}})});var dR=R((DCr,xye)=>{"use strict";p();var cwt=_E(),fwt=TypeError;xye.exports=function(t){if(cwt(t))throw new fwt("The method doesn't accept regular expressions");return t}});var mR=R((kCr,bye)=>{"use strict";p();var hwt=mr(),pwt=hwt("match");bye.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[pwt]=!1,"/./"[t](e)}catch(n){}}return!1}});var Sye=R(()=>{"use strict";p();var dwt=oe(),mwt=od(),gwt=Yo().f,vwt=ks(),wye=Mr(),ywt=dR(),_wt=oi(),xwt=mR(),bwt=pn(),wwt=mwt("".slice),Ewt=Math.min,Eye=xwt("endsWith"),Swt=!bwt&&!Eye&&!!function(){var t=gwt(String.prototype,"endsWith");return t&&!t.writable}();dwt({target:"String",proto:!0,forced:!Swt&&!Eye},{endsWith:function(e){var r=wye(_wt(this));ywt(e);var n=arguments.length>1?arguments[1]:void 0,i=r.length,o=n===void 0?i:Ewt(vwt(n),i),l=wye(e);return wwt(r,o-l.length,o)===l}})});var BV=R(()=>{"use strict";p();var Twt=oe(),Iwt=ct(),Awt=ec(),Mwt=RangeError,Tye=String.fromCharCode,Iye=String.fromCodePoint,Cwt=Iwt([].join),Pwt=!!Iye&&Iye.length!==1;Twt({target:"String",stat:!0,arity:1,forced:Pwt},{fromCodePoint:function(e){for(var r=[],n=arguments.length,i=0,o;n>i;){if(o=+arguments[i++],Awt(o,1114111)!==o)throw new Mwt(o+" is not a valid code point");r[i]=o<65536?Tye(o):Tye(((o-=65536)>>10)+55296,o%1024+56320)}return Cwt(r,"")}})});var Mye=R(()=>{"use strict";p();var Rwt=oe(),Owt=ct(),Lwt=dR(),Dwt=oi(),Aye=Mr(),Nwt=mR(),kwt=Owt("".indexOf);Rwt({target:"String",proto:!0,forced:!Nwt("includes")},{includes:function(e){return!!~kwt(Aye(Dwt(this)),Aye(Lwt(e)),arguments.length>1?arguments[1]:void 0)}})});var VV=R(()=>{"use strict";p();var qwt=oe(),Fwt=ct(),jwt=oi(),zwt=Mr(),Cye=Fwt("".charCodeAt);qwt({target:"String",proto:!0},{isWellFormed:function(){for(var e=zwt(jwt(this)),r=e.length,n=0;n<r;n++){var i=Cye(e,n);if((i&63488)===55296&&(i>=56320||++n>=r||(Cye(e,n)&64512)!==56320))return!1}return!0}})});var GV=R(()=>{"use strict";p();var Uwt=Dg().charAt,Bwt=Mr(),Rye=Rn(),Vwt=dP(),Pye=ko(),Oye="String Iterator",Gwt=Rye.set,$wt=Rye.getterFor(Oye);Vwt(String,"String",function(t){Gwt(this,{type:Oye,string:Bwt(t),index:0})},function(){var e=$wt(this),r=e.string,n=e.index,i;return n>=r.length?Pye(void 0,!0):(i=Uwt(r,n),e.index+=i.length,Pye(i,!1))})});var SE=R((JCr,qye)=>{"use strict";p();fR();var Lye=jt(),Dye=jn(),Hwt=cR(),Nye=yt(),kye=mr(),Wwt=xo(),Zwt=kye("species"),$V=RegExp.prototype;qye.exports=function(t,e,r,n){var i=kye(t),o=!Nye(function(){var v={};return v[i]=function(){return 7},""[t](v)!==7}),l=o&&!Nye(function(){var v=!1,x=/a/;return t==="split"&&(x={},x.constructor={},x.constructor[Zwt]=function(){return x},x.flags="",x[i]=/./[i]),x.exec=function(){return v=!0,null},x[i](""),!v});if(!o||!l||r){var f=/./[i],d=e(i,""[t],function(v,x,b,A,P){var N=x.exec;return N===Hwt||N===$V.exec?o&&!P?{done:!0,value:Lye(f,x,b,A)}:{done:!0,value:Lye(v,b,x,A)}:{done:!1}});Dye(String.prototype,t,d[0]),Dye($V,i,d[1])}n&&Wwt($V[i],"sham",!0)}});var TE=R((tPr,Fye)=>{"use strict";p();var Ywt=Dg().charAt;Fye.exports=function(t,e,r){return e+(r?Ywt(t,e).length:1)}});var V_=R((nPr,zye)=>{"use strict";p();var jye=jt(),Kwt=Bt(),Xwt=jr(),Qwt=da(),Jwt=cR(),e1t=TypeError;zye.exports=function(t,e){var r=t.exec;if(Xwt(r)){var n=jye(r,t,e);return n!==null&&Kwt(n),n}if(Qwt(t)==="RegExp")return jye(Jwt,t,e);throw new e1t("RegExp#exec called on incompatible receiver")}});var Bye=R(()=>{"use strict";p();var t1t=jt(),r1t=SE(),n1t=Bt(),i1t=hr(),o1t=ks(),HV=Mr(),a1t=oi(),s1t=Xi(),l1t=TE(),Uye=V_();r1t("match",function(t,e,r){return[function(i){var o=a1t(this),l=i1t(i)?s1t(i,t):void 0;return l?t1t(l,i,o):new RegExp(i)[t](HV(o))},function(n){var i=n1t(this),o=HV(n),l=r(e,i,o);if(l.done)return l.value;if(!i.global)return Uye(i,o);var f=i.unicode;i.lastIndex=0;for(var d=[],v=0,x;(x=Uye(i,o))!==null;){var b=HV(x[0]);d[v]=b,b===""&&(i.lastIndex=l1t(o,o1t(i.lastIndex),f)),v++}return v===0?null:d}]})});var XV=R(()=>{"use strict";p();var u1t=oe(),Vye=jt(),Hye=od(),c1t=hd(),gR=ko(),Gye=oi(),Wye=ks(),IE=Mr(),f1t=Bt(),h1t=hr(),p1t=da(),d1t=_E(),Zye=j_(),m1t=Xi(),g1t=jn(),v1t=yt(),y1t=mr(),_1t=fE(),x1t=TE(),b1t=V_(),Yye=Rn(),ZV=pn(),vR=y1t("matchAll"),Kye="RegExp String",Xye=Kye+" Iterator",w1t=Yye.set,E1t=Yye.getterFor(Xye),$ye=RegExp.prototype,S1t=TypeError,YV=Hye("".indexOf),yR=Hye("".matchAll),WV=!!yR&&!v1t(function(){yR("a",/./)}),T1t=c1t(function(e,r,n,i){w1t(this,{type:Xye,regexp:e,string:r,global:n,unicode:i,done:!1})},Kye,function(){var e=E1t(this);if(e.done)return gR(void 0,!0);var r=e.regexp,n=e.string,i=b1t(r,n);return i===null?(e.done=!0,gR(void 0,!0)):e.global?(IE(i[0])===""&&(r.lastIndex=x1t(n,Wye(r.lastIndex),e.unicode)),gR(i,!1)):(e.done=!0,gR(i,!1))}),KV=function(t){var e=f1t(this),r=IE(t),n=_1t(e,RegExp),i=IE(Zye(e)),o,l,f;return o=new n(n===RegExp?e.source:e,i),l=!!~YV(i,"g"),f=!!~YV(i,"u"),o.lastIndex=Wye(e.lastIndex),new T1t(o,r,l,f)};u1t({target:"String",proto:!0,forced:WV},{matchAll:function(e){var r=Gye(this),n,i,o,l;if(h1t(e)){if(d1t(e)&&(n=IE(Gye(Zye(e))),!~YV(n,"g")))throw new S1t("`.matchAll` does not allow non-global regexes");if(WV)return yR(r,e);if(o=m1t(e,vR),o===void 0&&ZV&&p1t(e)==="RegExp"&&(o=KV),o)return Vye(o,e,r)}else if(WV)return yR(r,e);return i=IE(r),l=new RegExp(e,"g"),ZV?Vye(KV,l,i):l[vR](i)}});ZV||vR in $ye||g1t($ye,vR,KV)});var QV=R((fPr,Qye)=>{"use strict";p();var I1t=Ku();Qye.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(I1t)});var Jye=R(()=>{"use strict";p();var A1t=oe(),M1t=Q1().end,C1t=QV();A1t({target:"String",proto:!0,forced:C1t},{padEnd:function(e){return M1t(this,e,arguments.length>1?arguments[1]:void 0)}})});var e_e=R(()=>{"use strict";p();var P1t=oe(),R1t=Q1().start,O1t=QV();P1t({target:"String",proto:!0,forced:O1t},{padStart:function(e){return R1t(this,e,arguments.length>1?arguments[1]:void 0)}})});var i_e=R(()=>{"use strict";p();var L1t=oe(),n_e=ct(),D1t=_o(),N1t=Yr(),t_e=Mr(),k1t=ln(),r_e=n_e([].push),q1t=n_e([].join);L1t({target:"String",stat:!0},{raw:function(e){var r=D1t(N1t(e).raw),n=k1t(r);if(!n)return"";for(var i=arguments.length,o=[],l=0;;){if(r_e(o,t_e(r[l++])),l===n)return q1t(o,"");l<i&&r_e(o,t_e(arguments[l]))}}})});var o_e=R(()=>{"use strict";p();var F1t=oe(),j1t=X1();F1t({target:"String",proto:!0},{repeat:j1t})});var rG=R((TPr,a_e)=>{"use strict";p();var tG=ct(),z1t=Yr(),U1t=Math.floor,JV=tG("".charAt),B1t=tG("".replace),eG=tG("".slice),V1t=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,G1t=/\$([$&'`]|\d{1,2})/g;a_e.exports=function(t,e,r,n,i,o){var l=r+t.length,f=n.length,d=G1t;return i!==void 0&&(i=z1t(i),d=V1t),B1t(o,d,function(v,x){var b;switch(JV(x,0)){case"$":return"$";case"&":return t;case"`":return eG(e,0,r);case"'":return eG(e,l);case"<":b=i[eG(x,1,-1)];break;default:var A=+x;if(A===0)return v;if(A>f){var P=U1t(A/10);return P===0?v:P<=f?n[P-1]===void 0?JV(x,1):n[P-1]+JV(x,1):v}b=n[A-1]}return b===void 0?"":b})}});var f_e=R(()=>{"use strict";p();var $1t=ga(),s_e=jt(),_R=ct(),H1t=SE(),W1t=yt(),Z1t=Bt(),Y1t=jr(),K1t=hr(),X1t=fi(),Q1t=ks(),G_=Mr(),J1t=oi(),eEt=TE(),tEt=Xi(),rEt=rG(),nEt=V_(),iEt=mr(),iG=iEt("replace"),oEt=Math.max,aEt=Math.min,sEt=_R([].concat),nG=_R([].push),l_e=_R("".indexOf),u_e=_R("".slice),lEt=function(t){return t===void 0?t:String(t)},uEt=function(){return"a".replace(/./,"$0")==="$0"}(),c_e=function(){return /./[iG]?/./[iG]("a","$0")==="":!1}(),cEt=!W1t(function(){var t=/./;return t.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(t,"$<a>")!=="7"});H1t("replace",function(t,e,r){var n=c_e?"$":"$0";return[function(o,l){var f=J1t(this),d=K1t(o)?tEt(o,iG):void 0;return d?s_e(d,o,f,l):s_e(e,G_(f),o,l)},function(i,o){var l=Z1t(this),f=G_(i);if(typeof o=="string"&&l_e(o,n)===-1&&l_e(o,"$<")===-1){var d=r(e,l,f,o);if(d.done)return d.value}var v=Y1t(o);v||(o=G_(o));var x=l.global,b;x&&(b=l.unicode,l.lastIndex=0);for(var A=[],P;P=nEt(l,f),!(P===null||(nG(A,P),!x));){var N=G_(P[0]);N===""&&(l.lastIndex=eEt(f,Q1t(l.lastIndex),b))}for(var j="",D=0,F=0;F<A.length;F++){P=A[F];for(var U=G_(P[0]),$=oEt(aEt(X1t(P.index),f.length),0),Z=[],ie,ne=1;ne<P.length;ne++)nG(Z,lEt(P[ne]));var ae=P.groups;if(v){var ye=sEt([U],Z,$,f);ae!==void 0&&nG(ye,ae),ie=G_($1t(o,void 0,ye))}else ie=rEt(U,f,$,Z,ae,o);$>=D&&(j+=u_e(f,D,$)+ie,D=$+U.length)}return j+u_e(f,D)}]},!cEt||!uEt||c_e)});var sG=R(()=>{"use strict";p();var fEt=oe(),hEt=jt(),aG=ct(),h_e=oi(),pEt=jr(),dEt=hr(),mEt=_E(),$_=Mr(),gEt=Xi(),vEt=j_(),yEt=rG(),_Et=mr(),xEt=pn(),bEt=_Et("replace"),wEt=TypeError,oG=aG("".indexOf),EEt=aG("".replace),p_e=aG("".slice),SEt=Math.max;fEt({target:"String",proto:!0},{replaceAll:function(e,r){var n=h_e(this),i,o,l,f,d,v,x,b,A,P,N=0,j="";if(dEt(e)){if(i=mEt(e),i&&(o=$_(h_e(vEt(e))),!~oG(o,"g")))throw new wEt("`.replaceAll` does not allow non-global regexes");if(l=gEt(e,bEt),l)return hEt(l,e,n,r);if(xEt&&i)return EEt($_(n),e,r)}for(f=$_(n),d=$_(e),v=pEt(r),v||(r=$_(r)),x=d.length,b=SEt(1,x),A=oG(f,d);A!==-1;)P=v?$_(r(d,A,f)):yEt(d,f,A,[],void 0,r),j+=p_e(f,N,A)+P,N=A+x,A=A+b>f.length?-1:oG(f,d,A+b);return N<f.length&&(j+=p_e(f,N)),j}})});var g_e=R(()=>{"use strict";p();var TEt=jt(),IEt=SE(),AEt=Bt(),MEt=hr(),CEt=oi(),d_e=YP(),m_e=Mr(),PEt=Xi(),REt=V_();IEt("search",function(t,e,r){return[function(i){var o=CEt(this),l=MEt(i)?PEt(i,t):void 0;return l?TEt(l,i,o):new RegExp(i)[t](m_e(o))},function(n){var i=AEt(this),o=m_e(n),l=r(e,i,o);if(l.done)return l.value;var f=i.lastIndex;d_e(f,0)||(i.lastIndex=0);var d=REt(i,o);return d_e(i.lastIndex,f)||(i.lastIndex=f),d===null?-1:d.index}]})});var w_e=R(()=>{"use strict";p();var lG=jt(),b_e=ct(),OEt=SE(),LEt=Bt(),DEt=hr(),NEt=oi(),kEt=fE(),qEt=TE(),FEt=ks(),v_e=Mr(),jEt=Xi(),y_e=V_(),zEt=xE(),UEt=yt(),H_=zEt.UNSUPPORTED_Y,BEt=4294967295,VEt=Math.min,uG=b_e([].push),cG=b_e("".slice),GEt=!UEt(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),x_e="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;OEt("split",function(t,e,r){var n="0".split(void 0,0).length?function(i,o){return i===void 0&&o===0?[]:lG(e,this,i,o)}:e;return[function(o,l){var f=NEt(this),d=DEt(o)?jEt(o,t):void 0;return d?lG(d,o,f,l):lG(n,v_e(f),o,l)},function(i,o){var l=LEt(this),f=v_e(i);if(!x_e){var d=r(n,l,f,o,n!==e);if(d.done)return d.value}var v=kEt(l,RegExp),x=l.unicode,b=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(H_?"g":"y"),A=new v(H_?"^(?:"+l.source+")":l,b),P=o===void 0?BEt:o>>>0;if(P===0)return[];if(f.length===0)return y_e(A,f)===null?[f]:[];for(var N=0,j=0,D=[];j<f.length;){A.lastIndex=H_?0:j;var F=y_e(A,H_?cG(f,j):f),U;if(F===null||(U=VEt(FEt(A.lastIndex+(H_?j:0)),f.length))===N)j=qEt(f,j,x);else{if(uG(D,cG(f,N,j)),D.length===P)return D;for(var $=1;$<=F.length-1;$++)if(uG(D,F[$]),D.length===P)return D;j=N=U}}return uG(D,cG(f,N)),D}]},x_e||!GEt,H_)});var T_e=R(()=>{"use strict";p();var $Et=oe(),HEt=od(),WEt=Yo().f,ZEt=ks(),E_e=Mr(),YEt=dR(),KEt=oi(),XEt=mR(),QEt=pn(),JEt=HEt("".slice),eSt=Math.min,S_e=XEt("startsWith"),tSt=!QEt&&!S_e&&!!function(){var t=WEt(String.prototype,"startsWith");return t&&!t.writable}();$Et({target:"String",proto:!0,forced:!tSt&&!S_e},{startsWith:function(e){var r=E_e(KEt(this));YEt(e);var n=ZEt(eSt(arguments.length>1?arguments[1]:void 0,r.length)),i=E_e(e);return JEt(r,n,n+i.length)===i}})});var A_e=R(()=>{"use strict";p();var rSt=oe(),nSt=ct(),iSt=oi(),I_e=fi(),oSt=Mr(),aSt=nSt("".slice),sSt=Math.max,lSt=Math.min,uSt=!"".substr||"ab".substr(-1)!=="b";rSt({target:"String",proto:!0,forced:uSt},{substr:function(e,r){var n=oSt(iSt(this)),i=n.length,o=I_e(e),l,f;return o===1/0&&(o=0),o<0&&(o=sSt(i+o,0)),l=r===void 0?i:I_e(r),l<=0||l===1/0?"":(f=lSt(o+l,i),o>=f?"":aSt(n,o,f))}})});var dG=R(()=>{"use strict";p();var cSt=oe(),P_e=jt(),pG=ct(),fSt=oi(),hSt=Mr(),pSt=yt(),dSt=Array,fG=pG("".charAt),M_e=pG("".charCodeAt),mSt=pG([].join),hG="".toWellFormed,gSt="\uFFFD",C_e=hG&&pSt(function(){return P_e(hG,1)!=="1"});cSt({target:"String",proto:!0,forced:C_e},{toWellFormed:function(){var e=hSt(fSt(this));if(C_e)return P_e(hG,e);for(var r=e.length,n=dSt(r),i=0;i<r;i++){var o=M_e(e,i);(o&63488)!==55296?n[i]=fG(e,i):o>=56320||i+1>=r||(M_e(e,i+1)&64512)!==56320?n[i]=gSt:(n[i]=fG(e,i),n[++i]=fG(e,i))}return mSt(n,"")}})});var xR=R((ZPr,L_e)=>{"use strict";p();var vSt=mg().PROPER,ySt=yt(),R_e=Mg(),O_e="\u200B\x85\u180E";L_e.exports=function(t){return ySt(function(){return!!R_e[t]()||O_e[t]()!==O_e||vSt&&R_e[t].name!==t})}});var D_e=R(()=>{"use strict";p();var _St=oe(),xSt=Cg().trim,bSt=xR();_St({target:"String",proto:!0,forced:bSt("trim")},{trim:function(){return xSt(this)}})});var mG=R((JPr,N_e)=>{"use strict";p();var wSt=Cg().end,ESt=xR();N_e.exports=ESt("trimEnd")?function(){return wSt(this)}:"".trimEnd});var q_e=R(()=>{"use strict";p();var SSt=oe(),k_e=mG();SSt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==k_e},{trimRight:k_e})});var j_e=R(()=>{"use strict";p();q_e();var TSt=oe(),F_e=mG();TSt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==F_e},{trimEnd:F_e})});var gG=R((sRr,z_e)=>{"use strict";p();var ISt=Cg().start,ASt=xR();z_e.exports=ASt("trimStart")?function(){return ISt(this)}:"".trimStart});var B_e=R(()=>{"use strict";p();var MSt=oe(),U_e=gG();MSt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==U_e},{trimLeft:U_e})});var G_e=R(()=>{"use strict";p();B_e();var CSt=oe(),V_e=gG();CSt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==V_e},{trimStart:V_e})});var Us=R((mRr,H_e)=>{"use strict";p();var PSt=ct(),RSt=oi(),$_e=Mr(),OSt=/"/g,LSt=PSt("".replace);H_e.exports=function(t,e,r,n){var i=$_e(RSt(t)),o="<"+e;return r!==""&&(o+=" "+r+"=\""+LSt($_e(n),OSt,"&quot;")+"\""),o+">"+i+"</"+e+">"}});var Bs=R((vRr,W_e)=>{"use strict";p();var DSt=yt();W_e.exports=function(t){return DSt(function(){var e=""[t]("\"");return e!==e.toLowerCase()||e.split("\"").length>3})}});var Z_e=R(()=>{"use strict";p();var NSt=oe(),kSt=Us(),qSt=Bs();NSt({target:"String",proto:!0,forced:qSt("anchor")},{anchor:function(e){return kSt(this,"a","name",e)}})});var Y_e=R(()=>{"use strict";p();var FSt=oe(),jSt=Us(),zSt=Bs();FSt({target:"String",proto:!0,forced:zSt("big")},{big:function(){return jSt(this,"big","","")}})});var K_e=R(()=>{"use strict";p();var USt=oe(),BSt=Us(),VSt=Bs();USt({target:"String",proto:!0,forced:VSt("blink")},{blink:function(){return BSt(this,"blink","","")}})});var X_e=R(()=>{"use strict";p();var GSt=oe(),$St=Us(),HSt=Bs();GSt({target:"String",proto:!0,forced:HSt("bold")},{bold:function(){return $St(this,"b","","")}})});var Q_e=R(()=>{"use strict";p();var WSt=oe(),ZSt=Us(),YSt=Bs();WSt({target:"String",proto:!0,forced:YSt("fixed")},{fixed:function(){return ZSt(this,"tt","","")}})});var J_e=R(()=>{"use strict";p();var KSt=oe(),XSt=Us(),QSt=Bs();KSt({target:"String",proto:!0,forced:QSt("fontcolor")},{fontcolor:function(e){return XSt(this,"font","color",e)}})});var e0e=R(()=>{"use strict";p();var JSt=oe(),eTt=Us(),tTt=Bs();JSt({target:"String",proto:!0,forced:tTt("fontsize")},{fontsize:function(e){return eTt(this,"font","size",e)}})});var t0e=R(()=>{"use strict";p();var rTt=oe(),nTt=Us(),iTt=Bs();rTt({target:"String",proto:!0,forced:iTt("italics")},{italics:function(){return nTt(this,"i","","")}})});var r0e=R(()=>{"use strict";p();var oTt=oe(),aTt=Us(),sTt=Bs();oTt({target:"String",proto:!0,forced:sTt("link")},{link:function(e){return aTt(this,"a","href",e)}})});var n0e=R(()=>{"use strict";p();var lTt=oe(),uTt=Us(),cTt=Bs();lTt({target:"String",proto:!0,forced:cTt("small")},{small:function(){return uTt(this,"small","","")}})});var i0e=R(()=>{"use strict";p();var fTt=oe(),hTt=Us(),pTt=Bs();fTt({target:"String",proto:!0,forced:pTt("strike")},{strike:function(){return hTt(this,"strike","","")}})});var o0e=R(()=>{"use strict";p();var dTt=oe(),mTt=Us(),gTt=Bs();dTt({target:"String",proto:!0,forced:gTt("sub")},{sub:function(){return mTt(this,"sub","","")}})});var a0e=R(()=>{"use strict";p();var vTt=oe(),yTt=Us(),_Tt=Bs();vTt({target:"String",proto:!0,forced:_Tt("sup")},{sup:function(){return yTt(this,"sup","","")}})});var bR=R((iOr,l0e)=>{"use strict";p();var s0e=Ft(),vG=yt(),xTt=z1(),bTt=Hr().NATIVE_ARRAY_BUFFER_VIEWS,wTt=s0e.ArrayBuffer,Ng=s0e.Int8Array;l0e.exports=!bTt||!vG(function(){Ng(1)})||!vG(function(){new Ng(-1)})||!xTt(function(t){new Ng,new Ng(null),new Ng(1.5),new Ng(t)},!0)||vG(function(){return new Ng(new wTt(2),1,void 0).length!==1})});var yG=R((aOr,u0e)=>{"use strict";p();var ETt=A_(),STt=RangeError;u0e.exports=function(t,e){var r=ETt(t);if(r%e)throw new STt("Wrong offset");return r}});var _G=R((lOr,c0e)=>{"use strict";p();var TTt=Math.round;c0e.exports=function(t){var e=TTt(t);return e<0?0:e>255?255:e&255}});var wR=R((cOr,f0e)=>{"use strict";p();var ITt=ls();f0e.exports=function(t){var e=ITt(t);return e==="BigInt64Array"||e==="BigUint64Array"}});var AE=R((hOr,h0e)=>{"use strict";p();var ATt=w1(),MTt=TypeError;h0e.exports=function(t){var e=ATt(t,"number");if(typeof e=="number")throw new MTt("Can't convert number to bigint");return BigInt(e)}});var xG=R((dOr,p0e)=>{"use strict";p();var CTt=Wn(),PTt=jt(),RTt=cE(),OTt=Yr(),LTt=ln(),DTt=ud(),NTt=Xc(),kTt=aP(),qTt=wR(),FTt=Hr().aTypedArrayConstructor,jTt=AE();p0e.exports=function(e){var r=RTt(this),n=OTt(e),i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0,f=NTt(n),d,v,x,b,A,P,N,j;if(f&&!kTt(f))for(N=DTt(n,f),j=N.next,n=[];!(P=PTt(j,N)).done;)n.push(P.value);for(l&&i>2&&(o=CTt(o,arguments[2])),v=LTt(n),x=new(FTt(r))(v),b=qTt(x),d=0;v>d;d++)A=l?o(n[d],d):n[d],x[d]=b?jTt(A):+A;return x}});var nf=R((gOr,AG)=>{"use strict";p();var d0e=oe(),T0e=Ft(),m0e=jt(),zTt=sr(),UTt=bR(),RE=Hr(),I0e=K1(),g0e=qa(),BTt=Ds(),ME=xo(),VTt=HP(),GTt=ks(),v0e=__(),bG=yG(),$Tt=_G(),A0e=Yc(),CE=Br(),HTt=ls(),SG=hr(),WTt=ph(),ZTt=Qi(),YTt=ma(),ER=eu(),KTt=id().f,y0e=xG(),XTt=Ji().forEach,QTt=dd(),JTt=hi(),M0e=ti(),C0e=Yo(),_0e=yh(),MG=Rn(),eIt=ld(),TG=MG.get,tIt=MG.set,rIt=MG.enforce,P0e=M0e.f,nIt=C0e.f,wG=T0e.RangeError,R0e=I0e.ArrayBuffer,iIt=R0e.prototype,oIt=I0e.DataView,SR=RE.NATIVE_ARRAY_BUFFER_VIEWS,x0e=RE.TYPED_ARRAY_TAG,b0e=RE.TypedArray,PE=RE.TypedArrayPrototype,IG=RE.isTypedArray,TR="BYTES_PER_ELEMENT",EG="Wrong length",IR=function(t,e){JTt(t,e,{configurable:!0,get:function(){return TG(this)[e]}})},w0e=function(t){var e;return YTt(iIt,t)||(e=HTt(t))==="ArrayBuffer"||e==="SharedArrayBuffer"},O0e=function(t,e){return IG(t)&&!WTt(e)&&e in t&&VTt(+e)&&e>=0},E0e=function(e,r){return r=A0e(r),O0e(e,r)?BTt(2,e[r]):nIt(e,r)},S0e=function(e,r,n){return r=A0e(r),O0e(e,r)&&SG(n)&&CE(n,"value")&&!CE(n,"get")&&!CE(n,"set")&&!n.configurable&&(!CE(n,"writable")||n.writable)&&(!CE(n,"enumerable")||n.enumerable)?(e[r]=n.value,e):P0e(e,r,n)};zTt?(SR||(C0e.f=E0e,M0e.f=S0e,IR(PE,"buffer"),IR(PE,"byteOffset"),IR(PE,"byteLength"),IR(PE,"length")),d0e({target:"Object",stat:!0,forced:!SR},{getOwnPropertyDescriptor:E0e,defineProperty:S0e}),AG.exports=function(t,e,r){var n=t.match(/\d+/)[0]/8,i=t+(r?"Clamped":"")+"Array",o="get"+t,l="set"+t,f=T0e[i],d=f,v=d&&d.prototype,x={},b=function(j,D){var F=TG(j);return F.view[o](D*n+F.byteOffset,!0)},A=function(j,D,F){var U=TG(j);U.view[l](D*n+U.byteOffset,r?$Tt(F):F,!0)},P=function(j,D){P0e(j,D,{get:function(){return b(this,D)},set:function(F){return A(this,D,F)},enumerable:!0})};SR?UTt&&(d=e(function(j,D,F,U){return g0e(j,v),eIt(function(){return SG(D)?w0e(D)?U!==void 0?new f(D,bG(F,n),U):F!==void 0?new f(D,bG(F,n)):new f(D):IG(D)?_0e(d,D):m0e(y0e,d,D):new f(v0e(D))}(),j,d)}),ER&&ER(d,b0e),XTt(KTt(f),function(j){j in d||ME(d,j,f[j])}),d.prototype=v):(d=e(function(j,D,F,U){g0e(j,v);var $=0,Z=0,ie,ne,ae;if(!SG(D))ae=v0e(D),ne=ae*n,ie=new R0e(ne);else if(w0e(D)){ie=D,Z=bG(F,n);var ye=D.byteLength;if(U===void 0){if(ye%n)throw new wG(EG);if(ne=ye-Z,ne<0)throw new wG(EG)}else if(ne=GTt(U)*n,ne+Z>ye)throw new wG(EG);ae=ne/n}else return IG(D)?_0e(d,D):m0e(y0e,d,D);for(tIt(j,{buffer:ie,byteOffset:Z,byteLength:ne,length:ae,view:new oIt(ie)});$<ae;)P(j,$++)}),ER&&ER(d,b0e),v=d.prototype=ZTt(PE)),v.constructor!==d&&ME(v,"constructor",d),rIt(v).TypedArrayConstructor=d,x0e&&ME(v,x0e,i);var N=d!==f;x[i]=d,d0e({global:!0,constructor:!0,forced:N,sham:!SR},x),TR in d||ME(d,TR,n),TR in v||ME(v,TR,n),QTt(i)}):AG.exports=function(){}});var L0e=R(()=>{"use strict";p();var aIt=nf();aIt("Float32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var D0e=R(()=>{"use strict";p();var sIt=nf();sIt("Float64",function(t){return function(r,n,i){return t(this,r,n,i)}})});var N0e=R(()=>{"use strict";p();var lIt=nf();lIt("Int8",function(t){return function(r,n,i){return t(this,r,n,i)}})});var k0e=R(()=>{"use strict";p();var uIt=nf();uIt("Int16",function(t){return function(r,n,i){return t(this,r,n,i)}})});var q0e=R(()=>{"use strict";p();var cIt=nf();cIt("Int32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var F0e=R(()=>{"use strict";p();var fIt=nf();fIt("Uint8",function(t){return function(r,n,i){return t(this,r,n,i)}})});var j0e=R(()=>{"use strict";p();var hIt=nf();hIt("Uint8",function(t){return function(r,n,i){return t(this,r,n,i)}},!0)});var z0e=R(()=>{"use strict";p();var pIt=nf();pIt("Uint16",function(t){return function(r,n,i){return t(this,r,n,i)}})});var U0e=R(()=>{"use strict";p();var dIt=nf();dIt("Uint32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var CG=R(()=>{"use strict";p();var B0e=Hr(),mIt=ln(),gIt=fi(),vIt=B0e.aTypedArray,yIt=B0e.exportTypedArrayMethod;yIt("at",function(e){var r=vIt(this),n=mIt(r),i=gIt(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:r[o]})});var G0e=R(()=>{"use strict";p();var _It=ct(),V0e=Hr(),xIt=RU(),bIt=_It(xIt),wIt=V0e.aTypedArray,EIt=V0e.exportTypedArrayMethod;EIt("copyWithin",function(e,r){return bIt(wIt(this),e,r,arguments.length>2?arguments[2]:void 0)})});var H0e=R(()=>{"use strict";p();var $0e=Hr(),SIt=Ji().every,TIt=$0e.aTypedArray,IIt=$0e.exportTypedArrayMethod;IIt("every",function(e){return SIt(TIt(this),e,arguments.length>1?arguments[1]:void 0)})});var Z0e=R(()=>{"use strict";p();var W0e=Hr(),AIt=cP(),MIt=AE(),CIt=ls(),PIt=jt(),RIt=ct(),OIt=yt(),LIt=W0e.aTypedArray,DIt=W0e.exportTypedArrayMethod,NIt=RIt("".slice),kIt=OIt(function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),t!==1});DIt("fill",function(e){var r=arguments.length;LIt(this);var n=NIt(CIt(this),0,3)==="Big"?MIt(e):+e;return PIt(AIt,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},kIt)});var AR=R((nLr,Y0e)=>{"use strict";p();var qIt=yh(),FIt=Hr().getTypedArrayConstructor;Y0e.exports=function(t,e){return qIt(FIt(t),e)}});var X0e=R(()=>{"use strict";p();var K0e=Hr(),jIt=Ji().filter,zIt=AR(),UIt=K0e.aTypedArray,BIt=K0e.exportTypedArrayMethod;BIt("filter",function(e){var r=jIt(UIt(this),e,arguments.length>1?arguments[1]:void 0);return zIt(this,r)})});var J0e=R(()=>{"use strict";p();var Q0e=Hr(),VIt=Ji().find,GIt=Q0e.aTypedArray,$It=Q0e.exportTypedArrayMethod;$It("find",function(e){return VIt(GIt(this),e,arguments.length>1?arguments[1]:void 0)})});var txe=R(()=>{"use strict";p();var exe=Hr(),HIt=Ji().findIndex,WIt=exe.aTypedArray,ZIt=exe.exportTypedArrayMethod;ZIt("findIndex",function(e){return HIt(WIt(this),e,arguments.length>1?arguments[1]:void 0)})});var PG=R(()=>{"use strict";p();var rxe=Hr(),YIt=j1().findLast,KIt=rxe.aTypedArray,XIt=rxe.exportTypedArrayMethod;XIt("findLast",function(e){return YIt(KIt(this),e,arguments.length>1?arguments[1]:void 0)})});var RG=R(()=>{"use strict";p();var nxe=Hr(),QIt=j1().findLastIndex,JIt=nxe.aTypedArray,eAt=nxe.exportTypedArrayMethod;eAt("findLastIndex",function(e){return QIt(JIt(this),e,arguments.length>1?arguments[1]:void 0)})});var oxe=R(()=>{"use strict";p();var ixe=Hr(),tAt=Ji().forEach,rAt=ixe.aTypedArray,nAt=ixe.exportTypedArrayMethod;nAt("forEach",function(e){tAt(rAt(this),e,arguments.length>1?arguments[1]:void 0)})});var axe=R(()=>{"use strict";p();var iAt=bR(),oAt=Hr().exportTypedArrayStaticMethod,aAt=xG();oAt("from",aAt,iAt)});var lxe=R(()=>{"use strict";p();var sxe=Hr(),sAt=f_().includes,lAt=sxe.aTypedArray,uAt=sxe.exportTypedArrayMethod;uAt("includes",function(e){return sAt(lAt(this),e,arguments.length>1?arguments[1]:void 0)})});var cxe=R(()=>{"use strict";p();var uxe=Hr(),cAt=f_().indexOf,fAt=uxe.aTypedArray,hAt=uxe.exportTypedArrayMethod;hAt("indexOf",function(e){return cAt(fAt(this),e,arguments.length>1?arguments[1]:void 0)})});var mxe=R(()=>{"use strict";p();var pAt=Ft(),dAt=yt(),OG=ct(),hxe=Hr(),LG=V1(),mAt=mr(),DG=mAt("iterator"),fxe=pAt.Uint8Array,gAt=OG(LG.values),vAt=OG(LG.keys),yAt=OG(LG.entries),NG=hxe.aTypedArray,MR=hxe.exportTypedArrayMethod,W_=fxe&&fxe.prototype,CR=!dAt(function(){W_[DG].call([1])}),pxe=!!W_&&W_.values&&W_[DG]===W_.values&&W_.values.name==="values",dxe=function(){return gAt(NG(this))};MR("entries",function(){return yAt(NG(this))},CR);MR("keys",function(){return vAt(NG(this))},CR);MR("values",dxe,CR||!pxe,{name:"values"});MR(DG,dxe,CR||!pxe,{name:"values"})});var vxe=R(()=>{"use strict";p();var gxe=Hr(),_At=ct(),xAt=gxe.aTypedArray,bAt=gxe.exportTypedArrayMethod,wAt=_At([].join);bAt("join",function(e){return wAt(xAt(this),e)})});var _xe=R(()=>{"use strict";p();var yxe=Hr(),EAt=ga(),SAt=WU(),TAt=yxe.aTypedArray,IAt=yxe.exportTypedArrayMethod;IAt("lastIndexOf",function(e){var r=arguments.length;return EAt(SAt,TAt(this),r>1?[e,arguments[1]]:[e])})});var xxe=R(()=>{"use strict";p();var kG=Hr(),AAt=Ji().map,MAt=kG.aTypedArray,CAt=kG.getTypedArrayConstructor,PAt=kG.exportTypedArrayMethod;PAt("map",function(e){return AAt(MAt(this),e,arguments.length>1?arguments[1]:void 0,function(r,n){return new(CAt(r))(n)})})});var wxe=R(()=>{"use strict";p();var bxe=Hr(),RAt=bR(),OAt=bxe.aTypedArrayConstructor,LAt=bxe.exportTypedArrayStaticMethod;LAt("of",function(){for(var e=0,r=arguments.length,n=new(OAt(this))(r);r>e;)n[e]=arguments[e++];return n},RAt)});var Sxe=R(()=>{"use strict";p();var Exe=Hr(),DAt=G1().left,NAt=Exe.aTypedArray,kAt=Exe.exportTypedArrayMethod;kAt("reduce",function(e){var r=arguments.length;return DAt(NAt(this),e,r,r>1?arguments[1]:void 0)})});var Ixe=R(()=>{"use strict";p();var Txe=Hr(),qAt=G1().right,FAt=Txe.aTypedArray,jAt=Txe.exportTypedArrayMethod;jAt("reduceRight",function(e){var r=arguments.length;return qAt(FAt(this),e,r,r>1?arguments[1]:void 0)})});var Mxe=R(()=>{"use strict";p();var Axe=Hr(),zAt=Axe.aTypedArray,UAt=Axe.exportTypedArrayMethod,BAt=Math.floor;UAt("reverse",function(){for(var e=this,r=zAt(e).length,n=BAt(r/2),i=0,o;i<n;)o=e[i],e[i++]=e[--r],e[r]=o;return e})});var Dxe=R(()=>{"use strict";p();var Pxe=Ft(),Rxe=jt(),jG=Hr(),VAt=ln(),GAt=yG(),$At=Yr(),Oxe=yt(),HAt=Pxe.RangeError,qG=Pxe.Int8Array,Cxe=qG&&qG.prototype,Lxe=Cxe&&Cxe.set,WAt=jG.aTypedArray,ZAt=jG.exportTypedArrayMethod,FG=!Oxe(function(){var t=new Uint8ClampedArray(2);return Rxe(Lxe,t,{length:1,0:3},1),t[1]!==3}),YAt=FG&&jG.NATIVE_ARRAY_BUFFER_VIEWS&&Oxe(function(){var t=new qG(2);return t.set(1),t.set("2",1),t[0]!==0||t[1]!==2});ZAt("set",function(e){WAt(this);var r=GAt(arguments.length>1?arguments[1]:void 0,1),n=$At(e);if(FG)return Rxe(Lxe,this,n,r);var i=this.length,o=VAt(n),l=0;if(o+r>i)throw new HAt("Wrong length");for(;l<o;)this[r+l]=n[l++]},!FG||YAt)});var Nxe=R(()=>{"use strict";p();var zG=Hr(),KAt=yt(),XAt=qs(),QAt=zG.aTypedArray,JAt=zG.getTypedArrayConstructor,eMt=zG.exportTypedArrayMethod,tMt=KAt(function(){new Int8Array(1).slice()});eMt("slice",function(e,r){for(var n=XAt(QAt(this),e,r),i=JAt(this),o=0,l=n.length,f=new i(l);l>o;)f[o]=n[o++];return f},tMt)});var qxe=R(()=>{"use strict";p();var kxe=Hr(),rMt=Ji().some,nMt=kxe.aTypedArray,iMt=kxe.exportTypedArrayMethod;iMt("some",function(e){return rMt(nMt(this),e,arguments.length>1?arguments[1]:void 0)})});var Vxe=R(()=>{"use strict";p();var oMt=Ft(),aMt=od(),UG=yt(),sMt=xr(),lMt=yP(),Bxe=Hr(),Fxe=KU(),uMt=XU(),jxe=Qu(),zxe=_P(),cMt=Bxe.aTypedArray,fMt=Bxe.exportTypedArrayMethod,OE=oMt.Uint16Array,Z_=OE&&aMt(OE.prototype.sort),hMt=!!Z_&&!(UG(function(){Z_(new OE(2),null)})&&UG(function(){Z_(new OE(2),{})})),Uxe=!!Z_&&!UG(function(){if(jxe)return jxe<74;if(Fxe)return Fxe<67;if(uMt)return!0;if(zxe)return zxe<602;var t=new OE(516),e=Array(516),r,n;for(r=0;r<516;r++)n=r%4,t[r]=515-r,e[r]=r-2*n+3;for(Z_(t,function(i,o){return(i/4|0)-(o/4|0)}),r=0;r<516;r++)if(t[r]!==e[r])return!0}),pMt=function(t){return function(e,r){return t!==void 0?+t(e,r)||0:r!==r?-1:e!==e?1:e===0&&r===0?1/e>0&&1/r<0?1:-1:e>r}};fMt("sort",function(e){return e!==void 0&&sMt(e),Uxe?Z_(this,e):lMt(cMt(this),pMt(e))},!Uxe||hMt)});var $xe=R(()=>{"use strict";p();var BG=Hr(),dMt=ks(),Gxe=ec(),mMt=BG.aTypedArray,gMt=BG.getTypedArrayConstructor,vMt=BG.exportTypedArrayMethod;vMt("subarray",function(e,r){var n=mMt(this),i=n.length,o=Gxe(e,i),l=gMt(n);return new l(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,dMt((r===void 0?i:Gxe(r,i))-o))})});var Kxe=R(()=>{"use strict";p();var yMt=Ft(),_Mt=ga(),Zxe=Hr(),VG=yt(),Hxe=qs(),PR=yMt.Int8Array,Wxe=Zxe.aTypedArray,xMt=Zxe.exportTypedArrayMethod,Yxe=[].toLocaleString,bMt=!!PR&&VG(function(){Yxe.call(new PR(1))}),wMt=VG(function(){return[1,2].toLocaleString()!==new PR([1,2]).toLocaleString()})||!VG(function(){PR.prototype.toLocaleString.call([1,2])});xMt("toLocaleString",function(){return _Mt(Yxe,bMt?Hxe(Wxe(this)):Wxe(this),Hxe(arguments))},wMt)});var $G=R(()=>{"use strict";p();var EMt=eB(),GG=Hr(),SMt=GG.aTypedArray,TMt=GG.exportTypedArrayMethod,IMt=GG.getTypedArrayConstructor;TMt("toReversed",function(){return EMt(SMt(this),IMt(this))})});var HG=R(()=>{"use strict";p();var RR=Hr(),AMt=ct(),MMt=xr(),CMt=yh(),PMt=RR.aTypedArray,RMt=RR.getTypedArrayConstructor,OMt=RR.exportTypedArrayMethod,LMt=AMt(RR.TypedArrayPrototype.sort);OMt("toSorted",function(e){e!==void 0&&MMt(e);var r=PMt(this),n=CMt(RMt(r),r);return LMt(n,e)})});var Qxe=R(()=>{"use strict";p();var DMt=Hr().exportTypedArrayMethod,NMt=yt(),kMt=Ft(),qMt=ct(),Xxe=kMt.Uint8Array,FMt=Xxe&&Xxe.prototype||{},OR=[].toString,jMt=qMt([].join);NMt(function(){OR.call({})})&&(OR=function(){return jMt(this)});var zMt=FMt.toString!==OR;DMt("toString",OR,zMt)});var ZG=R(()=>{"use strict";p();var UMt=oB(),WG=Hr(),BMt=wR(),VMt=fi(),GMt=AE(),$Mt=WG.aTypedArray,HMt=WG.getTypedArrayConstructor,WMt=WG.exportTypedArrayMethod,ZMt=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return t===8}}();WMt("with",function(t,e){var r=$Mt(this),n=VMt(t),i=BMt(r)?GMt(e):+e;return UMt(r,HMt(r),n,i)},!ZMt)});var nbe=R(()=>{"use strict";p();var YMt=oe(),YG=ct(),KMt=Mr(),Jxe=String.fromCharCode,ebe=YG("".charAt),tbe=YG(/./.exec),rbe=YG("".slice),XMt=/^[\da-f]{2}$/i,QMt=/^[\da-f]{4}$/i;YMt({global:!0},{unescape:function(e){for(var r=KMt(e),n="",i=r.length,o=0,l,f;o<i;){if(l=ebe(r,o++),l==="%"){if(ebe(r,o)==="u"){if(f=rbe(r,o+1,o+5),tbe(QMt,f)){n+=Jxe(parseInt(f,16)),o+=5;continue}}else if(f=rbe(r,o,o+2),tbe(XMt,f)){n+=Jxe(parseInt(f,16)),o+=2;continue}}n+=l}return n}})});var QG=R((N2r,ube)=>{"use strict";p();var JMt=ct(),ibe=nu(),LR=bd().getWeakData,eCt=qa(),tCt=Bt(),rCt=Ns(),KG=hr(),nCt=Oi(),abe=Ji(),obe=Br(),sbe=Rn(),iCt=sbe.set,oCt=sbe.getterFor,aCt=abe.find,sCt=abe.findIndex,lCt=JMt([].splice),uCt=0,DR=function(t){return t.frozen||(t.frozen=new lbe)},lbe=function(){this.entries=[]},XG=function(t,e){return aCt(t.entries,function(r){return r[0]===e})};lbe.prototype={get:function(t){var e=XG(this,t);if(e)return e[1]},has:function(t){return!!XG(this,t)},set:function(t,e){var r=XG(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=sCt(this.entries,function(r){return r[0]===t});return~e&&lCt(this.entries,e,1),!!~e}};ube.exports={getConstructor:function(t,e,r,n){var i=t(function(d,v){eCt(d,o),iCt(d,{type:e,id:uCt++,frozen:null}),rCt(v)||nCt(v,d[n],{that:d,AS_ENTRIES:r})}),o=i.prototype,l=oCt(e),f=function(d,v,x){var b=l(d),A=LR(tCt(v),!0);return A===!0?DR(b).set(v,x):A[b.id]=x,d};return ibe(o,{delete:function(d){var v=l(this);if(!KG(d))return!1;var x=LR(d);return x===!0?DR(v).delete(d):x&&obe(x,v.id)&&delete x[v.id]},has:function(v){var x=l(this);if(!KG(v))return!1;var b=LR(v);return b===!0?DR(x).has(v):b&&obe(b,x.id)}}),ibe(o,r?{get:function(v){var x=l(this);if(KG(v)){var b=LR(v);if(b===!0)return DR(x).get(v);if(b)return b[x.id]}},set:function(v,x){return f(this,v,x)}}:{add:function(v){return f(this,v,!0)}}),i}}});var vbe=R(()=>{"use strict";p();var cCt=Eh(),cbe=Ft(),FR=ct(),fbe=nu(),fCt=bd(),hCt=eE(),hbe=QG(),NR=hr(),kR=Rn().enforce,pCt=yt(),dCt=L4(),NE=Object,mCt=Array.isArray,qR=NE.isExtensible,pbe=NE.isFrozen,gCt=NE.isSealed,dbe=NE.freeze,vCt=NE.seal,yCt=!cbe.ActiveXObject&&"ActiveXObject"in cbe,LE,mbe=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},gbe=hCt("WeakMap",mbe,hbe),Y_=gbe.prototype,jR=FR(Y_.set),_Ct=function(){return cCt&&pCt(function(){var t=dbe([]);return jR(new gbe,t,1),!pbe(t)})};dCt&&(yCt?(LE=hbe.getConstructor(mbe,"WeakMap",!0),fCt.enable(),JG=FR(Y_.delete),DE=FR(Y_.has),e6=FR(Y_.get),fbe(Y_,{delete:function(t){if(NR(t)&&!qR(t)){var e=kR(this);return e.frozen||(e.frozen=new LE),JG(this,t)||e.frozen.delete(t)}return JG(this,t)},has:function(e){if(NR(e)&&!qR(e)){var r=kR(this);return r.frozen||(r.frozen=new LE),DE(this,e)||r.frozen.has(e)}return DE(this,e)},get:function(e){if(NR(e)&&!qR(e)){var r=kR(this);return r.frozen||(r.frozen=new LE),DE(this,e)?e6(this,e):r.frozen.get(e)}return e6(this,e)},set:function(e,r){if(NR(e)&&!qR(e)){var n=kR(this);n.frozen||(n.frozen=new LE),DE(this,e)?jR(this,e,r):n.frozen.set(e,r)}else jR(this,e,r);return this}})):_Ct()&&fbe(Y_,{set:function(e,r){var n;return mCt(e)&&(pbe(e)?n=dbe:gCt(e)&&(n=vCt)),jR(this,e,r),n&&n(e),this}}));var JG,DE,e6});var zR=R(()=>{"use strict";p();vbe()});var ybe=R(()=>{"use strict";p();var xCt=eE(),bCt=QG();xCt("WeakSet",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},bCt)});var _be=R(()=>{"use strict";p();ybe()});var xbe=R(()=>{"use strict";p();TU()});var Ebe=R(()=>{"use strict";p();var wCt=oe(),ECt=Ft(),SCt=ma(),bbe=bo(),BR=eu(),TCt=vg(),wbe=Qi(),UR=xo(),t6=Ds(),ICt=rP(),ACt=wg(),MCt=mr(),CCt=yt(),PCt=pn(),K_=ECt.SuppressedError,RCt=MCt("toStringTag"),VR=Error,OCt=!!K_&&K_.length!==3,LCt=!!K_&&CCt(function(){return new K_(1,2,3,{cause:4}).cause===4}),GR=OCt||LCt,kg=function(e,r,n){var i=SCt(kE,this),o;return BR?o=GR&&(!i||bbe(this)===kE)?new K_:BR(new VR,i?bbe(this):kE):(o=i?this:wbe(kE),UR(o,RCt,"Error")),n!==void 0&&UR(o,"message",ACt(n)),ICt(o,kg,o.stack,1),UR(o,"error",e),UR(o,"suppressed",r),o};BR?BR(kg,VR):TCt(kg,VR,{name:!0});var kE=kg.prototype=GR?K_.prototype:wbe(VR.prototype,{constructor:t6(1,kg),message:t6(1,""),name:t6(1,"SuppressedError")});GR&&!PCt&&(kE.constructor=kg);wCt({global:!0,constructor:!0,arity:3,forced:GR},{SuppressedError:kg})});var X_=R((tDr,Rbe)=>{"use strict";p();var Mbe=Ft(),Cbe=b1(),Pbe=jr(),DCt=Qi(),$R=bo(),NCt=jn(),kCt=mr(),qCt=pn(),Sbe="USE_FUNCTION_CONSTRUCTOR",Tbe=kCt("asyncIterator"),Ibe=Mbe.AsyncIterator,Abe=Cbe.AsyncIteratorPrototype,of,r6;if(Abe)of=Abe;else if(Pbe(Ibe))of=Ibe.prototype;else if(Cbe[Sbe]||Mbe[Sbe])try{r6=$R($R($R(Function("return async function*(){}()")()))),$R(r6)===Object.prototype&&(of=r6)}catch(t){}of?qCt&&(of=DCt(of)):of={};Pbe(of[Tbe])||NCt(of,Tbe,function(){return this});Rbe.exports=of});var qE=R((nDr,zbe)=>{"use strict";p();var Obe=jt(),Lbe=Bt(),FCt=Qi(),jCt=Xi(),zCt=nu(),kbe=Rn(),UCt=Xo(),BCt=_r(),VCt=X_(),qbe=ko(),n6=BCt("Promise"),Fbe="AsyncFromSyncIterator",GCt=kbe.set,Dbe=kbe.getterFor(Fbe),Nbe=function(t,e,r,n,i){var o=t.done;n6.resolve(t.value).then(function(l){e(qbe(l,o))},function(l){if(!o&&i)try{UCt(n,"throw",l)}catch(f){l=f}r(l)})},jbe=function(e){e.type=Fbe,GCt(this,e)};jbe.prototype=zCt(FCt(VCt),{next:function(){var e=Dbe(this);return new n6(function(r,n){var i=Lbe(Obe(e.next,e.iterator));Nbe(i,r,n,e.iterator,!0)})},return:function(){var t=Dbe(this).iterator;return new n6(function(e,r){var n=jCt(t,"return");if(n===void 0)return e(qbe(void 0,!0));var i=Lbe(Obe(n,t));Nbe(i,e,r,t)})}});zbe.exports=jbe});var Bbe=R((oDr,Ube)=>{"use strict";p();var $Ct=jt(),HCt=qE(),WCt=Bt(),ZCt=ud(),YCt=Ti(),KCt=Xi(),XCt=mr(),QCt=XCt("asyncIterator");Ube.exports=function(t,e){var r=arguments.length<2?KCt(t,QCt):e;return r?WCt($Ct(r,t)):new HCt(YCt(ZCt(t)))}});var Q_=R((sDr,Vbe)=>{"use strict";p();var JCt=jt(),ePt=_r(),tPt=Xi();Vbe.exports=function(t,e,r,n){try{var i=tPt(t,"return");if(i)return ePt("Promise").resolve(JCt(i,t)).then(function(){e(r)},function(o){n(o)})}catch(o){return n(o)}e(r)}});var qg=R((uDr,Gbe)=>{"use strict";p();var rPt=jt(),nPt=xr(),i6=Bt(),iPt=hr(),oPt=cd(),aPt=_r(),sPt=Ti(),o6=Q_(),FE=function(t){var e=t===0,r=t===1,n=t===2,i=t===3;return function(o,l,f){i6(o);var d=l!==void 0;(d||!e)&&nPt(l);var v=sPt(o),x=aPt("Promise"),b=v.iterator,A=v.next,P=0;return new x(function(N,j){var D=function(U){o6(b,j,U,j)},F=function(){try{if(d)try{oPt(P)}catch(U){D(U)}x.resolve(i6(rPt(A,b))).then(function(U){try{if(i6(U).done)e?(f.length=P,N(f)):N(i?!1:n||void 0);else{var $=U.value;try{if(d){var Z=l($,P),ie=function(ne){if(r)F();else if(n)ne?F():o6(b,N,!1,j);else if(e)try{f[P++]=ne,F()}catch(ae){D(ae)}else ne?o6(b,N,i||$,j):F()};iPt(Z)?x.resolve(Z).then(ie,D):ie(Z)}else f[P++]=$,F()}catch(ne){D(ne)}}}catch(ne){j(ne)}},j)}catch(U){j(U)}};F()})}};Gbe.exports={toArray:FE(0),forEach:FE(1),every:FE(2),some:FE(3),find:FE(4)}});var a6=R((fDr,Zbe)=>{"use strict";p();var lPt=Wn(),$be=ct(),uPt=Yr(),cPt=rc(),fPt=Bbe(),hPt=ud(),pPt=Ti(),dPt=Xc(),mPt=Xi(),gPt=_r(),vPt=rB(),yPt=mr(),_Pt=qE(),xPt=qg().toArray,bPt=yPt("asyncIterator"),Hbe=$be(vPt("Array","values")),wPt=$be(Hbe([]).next),EPt=function(){return new Wbe(this)},Wbe=function(t){this.iterator=Hbe(t)};Wbe.prototype.next=function(){return wPt(this.iterator)};Zbe.exports=function(e){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(gPt("Promise"))(function(l){var f=uPt(e);i!==void 0&&(i=lPt(i,o));var d=mPt(f,bPt),v=d?void 0:dPt(f)||EPt,x=cPt(r)?new r:[],b=d?fPt(f,d):new _Pt(pPt(hPt(f,v)));l(xPt(b,i,x))})}});var Kbe=R(()=>{"use strict";p();var SPt=oe(),TPt=a6(),IPt=yt(),Ybe=Array.fromAsync,APt=!Ybe||IPt(function(){var t=0;return Ybe.call(function(){return t++,[]},{length:0}),t!==1});SPt({target:"Array",stat:!0,forced:APt},{fromAsync:TPt})});var Xbe=R(()=>{"use strict";p();CU()});var Qbe=R(()=>{"use strict";p();var MPt=oe(),CPt=Ji().filterReject,PPt=Li();MPt({target:"Array",proto:!0,forced:!0},{filterOut:function(e){return CPt(this,e,arguments.length>1?arguments[1]:void 0)}});PPt("filterOut")});var Jbe=R(()=>{"use strict";p();var RPt=oe(),OPt=Ji().filterReject,LPt=Li();RPt({target:"Array",proto:!0,forced:!0},{filterReject:function(e){return OPt(this,e,arguments.length>1?arguments[1]:void 0)}});LPt("filterReject")});var ewe=R(()=>{"use strict";p();DU()});var twe=R(()=>{"use strict";p();NU()});var HR=R((RDr,rwe)=>{"use strict";p();var DPt=Wn(),NPt=ct(),kPt=hh(),qPt=Yr(),FPt=Yc(),jPt=ln(),zPt=Qi(),UPt=yh(),BPt=Array,VPt=NPt([].push);rwe.exports=function(t,e,r,n){for(var i=qPt(t),o=kPt(i),l=DPt(e,r),f=zPt(null),d=jPt(o),v=0,x,b,A;d>v;v++)A=o[v],b=FPt(l(A,v,i)),b in f?VPt(f[b],A):f[b]=[A];if(n&&(x=n(i),x!==BPt))for(b in f)f[b]=UPt(x,f[b]);return f}});var nwe=R(()=>{"use strict";p();var GPt=oe(),$Pt=HR(),HPt=Li();GPt({target:"Array",proto:!0},{group:function(e){var r=arguments.length>1?arguments[1]:void 0;return $Pt(this,e,r)}});HPt("group")});var iwe=R(()=>{"use strict";p();var WPt=oe(),ZPt=HR(),YPt=ru(),KPt=Li();WPt({target:"Array",proto:!0,forced:!YPt("groupBy")},{groupBy:function(e){var r=arguments.length>1?arguments[1]:void 0;return ZPt(this,e,r)}});KPt("groupBy")});var s6=R((jDr,owe)=>{"use strict";p();var XPt=Wn(),QPt=ct(),JPt=hh(),eRt=Yr(),tRt=ln(),WR=qo(),rRt=WR.Map,nRt=WR.get,iRt=WR.has,oRt=WR.set,aRt=QPt([].push);owe.exports=function(e){for(var r=eRt(this),n=JPt(r),i=XPt(e,arguments.length>1?arguments[1]:void 0),o=new rRt,l=tRt(n),f=0,d,v;l>f;f++)v=n[f],d=i(v,f,r),iRt(o,d)?aRt(nRt(o,d),v):oRt(o,d,[v]);return o}});var awe=R(()=>{"use strict";p();var sRt=oe(),lRt=ru(),uRt=Li(),cRt=s6(),fRt=pn();sRt({target:"Array",proto:!0,name:"groupToMap",forced:fRt||!lRt("groupByToMap")},{groupByToMap:cRt});uRt("groupByToMap")});var swe=R(()=>{"use strict";p();var hRt=oe(),pRt=Li(),dRt=s6(),mRt=pn();hRt({target:"Array",proto:!0,forced:mRt},{groupToMap:dRt});pRt("groupToMap")});var cwe=R(()=>{"use strict";p();var gRt=oe(),vRt=tc(),lwe=Object.isFrozen,uwe=function(t,e){if(!lwe||!vRt(t)||!lwe(t))return!1;for(var r=0,n=t.length,i;r<n;)if(i=t[r++],!(typeof i=="string"||e&&i===void 0))return!1;return n!==0};gRt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(e){if(!uwe(e,!0))return!1;var r=e.raw;return r.length===e.length&&uwe(r,!1)}})});var fwe=R(()=>{"use strict";p();var yRt=sr(),_Rt=Li(),xRt=Yr(),bRt=ln(),wRt=hi();yRt&&(wRt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=xRt(this),r=bRt(e);return r===0?0:r-1}}),_Rt("lastIndex"))});var dwe=R(()=>{"use strict";p();var ERt=sr(),SRt=Li(),hwe=Yr(),pwe=ln(),TRt=hi();ERt&&(TRt(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=hwe(this),r=pwe(e);return r===0?void 0:e[r-1]},set:function(e){var r=hwe(this),n=pwe(r);return r[n===0?0:n-1]=e}}),SRt("lastItem"))});var mwe=R(()=>{"use strict";p();tB()});var gwe=R(()=>{"use strict";p();nB()});var vwe=R(()=>{"use strict";p();iB()});var iu=R((fNr,wwe)=>{"use strict";p();var ywe=ct(),IRt=Th(),_we=qo(),ARt=_we.Map,xwe=_we.proto,MRt=ywe(xwe.forEach),bwe=ywe(xwe.entries),CRt=bwe(new ARt).next;wwe.exports=function(t,e,r){return r?IRt({iterator:bwe(t),next:CRt},function(n){return e(n[1],n[0])}):MRt(t,e)}});var ZR=R((pNr,Ewe)=>{"use strict";p();var PRt=ct(),RRt=xr(),ORt=Ns(),LRt=ln(),DRt=Yr(),l6=qo(),NRt=iu(),kRt=l6.Map,qRt=l6.has,FRt=l6.set,jRt=PRt([].push);Ewe.exports=function(e){var r=DRt(this),n=LRt(r),i=[],o=new kRt,l=ORt(e)?function(x){return x}:RRt(e),f,d,v;for(f=0;f<n;f++)d=r[f],v=l(d),qRt(o,v)||FRt(o,v,d);return NRt(o,function(x){jRt(i,x)}),i}});var Swe=R(()=>{"use strict";p();var zRt=oe(),URt=Li(),BRt=ZR();zRt({target:"Array",proto:!0,forced:!0},{uniqueBy:BRt});URt("uniqueBy")});var Twe=R(()=>{"use strict";p();aB()});var Iwe=R(()=>{"use strict";p();LB()});var Awe=R(()=>{"use strict";p();ZB()});var Mwe=R(()=>{"use strict";p();YB()});var c6=R((PNr,Lwe)=>{"use strict";p();var VRt=_r(),GRt=jt(),$Rt=ct(),HRt=Wn(),WRt=Bt(),ZRt=xr(),Rwe=Ns(),u6=Xi(),Owe=mr(),YRt=Owe("asyncDispose"),Cwe=Owe("dispose"),KRt=$Rt([].push),XRt=function(t,e){if(e==="async-dispose"){var r=u6(t,YRt);return r!==void 0||(r=u6(t,Cwe),r===void 0)?r:function(){var n=this,i=VRt("Promise");return new i(function(o){GRt(r,n),o(void 0)})}}return u6(t,Cwe)},Pwe=function(t,e,r){return arguments.length<3&&!Rwe(t)&&(r=ZRt(XRt(WRt(t),e))),r===void 0?function(){}:HRt(r,t)};Lwe.exports=function(t,e,r,n){var i;if(arguments.length<4){if(Rwe(e)&&r==="sync-dispose")return;i=Pwe(e,r)}else i=Pwe(void 0,r,n);KRt(t.stack,i)}});var Uwe=R(()=>{"use strict";p();var QRt=oe(),KR=sr(),qwe=_r(),Dwe=xr(),JRt=qa(),Fwe=jn(),eOt=nu(),tOt=hi(),jwe=mr(),zwe=Rn(),f6=c6(),Nwe=Qu(),kwe=qwe("Promise"),rOt=qwe("SuppressedError"),nOt=ReferenceError,iOt=jwe("asyncDispose"),oOt=jwe("toStringTag"),QR="AsyncDisposableStack",aOt=zwe.set,XR=zwe.getterFor(QR),h6="async-dispose",jE="disposed",sOt="pending",YR=function(t){var e=XR(t);if(e.state===jE)throw new nOt(QR+" already disposed");return e},p6=function(){aOt(JRt(this,J_),{type:QR,state:sOt,stack:[]}),KR||(this.disposed=!1)},J_=p6.prototype;eOt(J_,{disposeAsync:function(){var e=this;return new kwe(function(r,n){var i=XR(e);if(i.state===jE)return r(void 0);i.state=jE,KR||(e.disposed=!0);var o=i.stack,l=o.length,f=!1,d,v=function(b){f?d=new rOt(b,d):(f=!0,d=b),x()},x=function(){if(l){var b=o[--l];o[l]=null;try{kwe.resolve(b()).then(x,v)}catch(A){v(A)}}else i.stack=null,f?n(d):r(void 0)};x()})},use:function(e){return f6(YR(this),e,h6),e},adopt:function(e,r){var n=YR(this);return Dwe(r),f6(n,void 0,h6,function(){return r(e)}),e},defer:function(e){var r=YR(this);Dwe(e),f6(r,void 0,h6,e)},move:function(){var e=YR(this),r=new p6;return XR(r).stack=e.stack,e.stack=[],e.state=jE,KR||(this.disposed=!0),r}});KR&&tOt(J_,"disposed",{configurable:!0,get:function(){return XR(this).state===jE}});Fwe(J_,iOt,J_.disposeAsync,{name:"disposeAsync"});Fwe(J_,oOt,QR,{nonWritable:!0});var lOt=Nwe&&Nwe<136;QRt({global:!0,constructor:!0,forced:lOt},{AsyncDisposableStack:p6})});var Hwe=R(()=>{"use strict";p();var uOt=oe(),cOt=qa(),fOt=bo(),Vwe=xo(),Gwe=Br(),hOt=mr(),Md=X_(),$we=pn(),Bwe=hOt("toStringTag"),pOt=TypeError,d6=function(){if(cOt(this,Md),fOt(this)===Md)throw new pOt("Abstract class AsyncIterator not directly constructable")};d6.prototype=Md;Gwe(Md,Bwe)||Vwe(Md,Bwe,"AsyncIterator");($we||!Gwe(Md,"constructor")||Md.constructor===Object)&&Vwe(Md,"constructor",d6);uOt({global:!0,constructor:!0,forced:$we},{AsyncIterator:d6})});var Fg=R((FNr,e1e)=>{"use strict";p();var dOt=jt(),JR=wd(),Wwe=Bt(),mOt=Qi(),gOt=xo(),vOt=nu(),yOt=mr(),Ywe=Rn(),_Ot=_r(),xOt=Xi(),bOt=X_(),m6=ko(),Zwe=Xo(),af=_Ot("Promise"),wOt=yOt("toStringTag"),Kwe="AsyncIteratorHelper",Xwe="WrapForValidAsyncIterator",EOt=Ywe.set,Qwe=function(t){var e=!t,r=Ywe.getterFor(t?Xwe:Kwe),n=function(i){var o=JR(function(){return r(i)}),l=o.error,f=o.value;return l||e&&f.done?{exit:!0,value:l?af.reject(f):af.resolve(m6(void 0,!0))}:{exit:!1,value:f}};return vOt(mOt(bOt),{next:function(){var o=n(this),l=o.value;if(o.exit)return l;var f=JR(function(){return Wwe(l.nextHandler(af))}),d=f.error,v=f.value;return d&&(l.done=!0),d?af.reject(v):af.resolve(v)},return:function(){var i=n(this),o=i.value;if(i.exit)return o;o.done=!0;var l=o.iterator,f,d,v=JR(function(){if(o.inner)try{Zwe(o.inner.iterator,"normal")}catch(x){return Zwe(l,"throw",x)}return xOt(l,"return")});return f=d=v.value,v.error?af.reject(d):f===void 0?af.resolve(m6(void 0,!0)):(v=JR(function(){return dOt(f,l)}),d=v.value,v.error?af.reject(d):t?af.resolve(d):af.resolve(d).then(function(x){return Wwe(x),m6(void 0,!0)}))}})},SOt=Qwe(!0),Jwe=Qwe(!1);gOt(Jwe,wOt,"Async Iterator Helper");e1e.exports=function(t,e){var r=function(i,o){o?(o.iterator=i.iterator,o.next=i.next):o=i,o.type=e?Xwe:Kwe,o.nextHandler=t,o.counter=0,o.done=!1,EOt(this,o)};return r.prototype=e?SOt:Jwe,r}});var v6=R((zNr,r1e)=>{"use strict";p();var TOt=jt(),IOt=xr(),g6=Bt(),AOt=hr(),MOt=Ti(),COt=Fg(),t1e=ko(),POt=Q_(),ROt=COt(function(t){var e=this,r=e.iterator,n=e.mapper;return new t(function(i,o){var l=function(d){e.done=!0,o(d)},f=function(d){POt(r,l,d,l)};t.resolve(g6(TOt(e.next,r))).then(function(d){try{if(g6(d).done)e.done=!0,i(t1e(void 0,!0));else{var v=d.value;try{var x=n(v,e.counter++),b=function(A){i(t1e(A,!1))};AOt(x)?t.resolve(x).then(b,f):b(x)}catch(A){f(A)}}}catch(A){l(A)}},l)})});r1e.exports=function(e){return g6(this),IOt(e),new ROt(MOt(this),{mapper:e})}});var y6=R((BNr,n1e)=>{"use strict";p();var OOt=jt(),LOt=v6(),DOt=function(t,e){return[e,t]};n1e.exports=function(){return OOt(LOt,this,DOt)}});var i1e=R(()=>{"use strict";p();var NOt=oe(),kOt=y6();NOt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:kOt})});var l1e=R(()=>{"use strict";p();var qOt=jt(),FOt=jn(),jOt=_r(),zOt=Xi(),UOt=Br(),BOt=mr(),o1e=X_(),a1e=BOt("asyncDispose"),s1e=jOt("Promise");UOt(o1e,a1e)||FOt(o1e,a1e,function(){var t=this;return new s1e(function(e,r){var n=zOt(t,"return");n?s1e.resolve(qOt(n,t)).then(function(){e(void 0)},r):e(void 0)})})});var c1e=R(()=>{"use strict";p();var VOt=oe(),GOt=jt(),_6=Bt(),$Ot=Ti(),HOt=I_(),WOt=A_(),ZOt=Fg(),u1e=ko(),YOt=ZOt(function(t){var e=this;return new t(function(r,n){var i=function(l){e.done=!0,n(l)},o=function(){try{t.resolve(_6(GOt(e.next,e.iterator))).then(function(l){try{_6(l).done?(e.done=!0,r(u1e(void 0,!0))):e.remaining?(e.remaining--,o()):r(u1e(l.value,!1))}catch(f){i(f)}},i)}catch(l){i(l)}};o()})});VOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(e){_6(this);var r=WOt(HOt(+e));return new YOt($Ot(this),{remaining:r})}})});var f1e=R(()=>{"use strict";p();var KOt=oe(),XOt=qg().every;KOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(e){return XOt(this,e)}})});var p1e=R(()=>{"use strict";p();var QOt=oe(),JOt=jt(),eLt=xr(),x6=Bt(),tLt=hr(),rLt=Ti(),nLt=Fg(),h1e=ko(),iLt=Q_(),oLt=nLt(function(t){var e=this,r=e.iterator,n=e.predicate;return new t(function(i,o){var l=function(v){e.done=!0,o(v)},f=function(v){iLt(r,l,v,l)},d=function(){try{t.resolve(x6(JOt(e.next,r))).then(function(v){try{if(x6(v).done)e.done=!0,i(h1e(void 0,!0));else{var x=v.value;try{var b=n(x,e.counter++),A=function(P){P?i(h1e(x,!1)):d()};tLt(b)?t.resolve(b).then(A,f):A(b)}catch(P){f(P)}}}catch(P){l(P)}},l)}catch(v){l(v)}};d()})});QOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(e){return x6(this),eLt(e),new oLt(rLt(this),{predicate:e})}})});var d1e=R(()=>{"use strict";p();var aLt=oe(),sLt=qg().find;aLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(e){return sLt(this,e)}})});var b6=R((lkr,v1e)=>{"use strict";p();var lLt=jt(),uLt=jr(),m1e=Bt(),g1e=Ti(),cLt=Xc(),fLt=Xi(),hLt=mr(),pLt=qE(),dLt=hLt("asyncIterator");v1e.exports=function(t){var e=m1e(t),r=!0,n=fLt(e,dLt),i;return uLt(n)||(n=cLt(e),r=!1),n!==void 0?i=lLt(n,e):(i=e,r=!0),m1e(i),g1e(r?i:new pLt(g1e(i)))}});var x1e=R(()=>{"use strict";p();var mLt=oe(),y1e=jt(),gLt=xr(),zE=Bt(),vLt=hr(),yLt=Ti(),_Lt=Fg(),_1e=ko(),xLt=b6(),bLt=Q_(),wLt=_Lt(function(t){var e=this,r=e.iterator,n=e.mapper;return new t(function(i,o){var l=function(x){e.done=!0,o(x)},f=function(x){bLt(r,l,x,l)},d=function(){try{t.resolve(zE(y1e(e.next,r))).then(function(x){try{if(zE(x).done)e.done=!0,i(_1e(void 0,!0));else{var b=x.value;try{var A=n(b,e.counter++),P=function(N){try{e.inner=xLt(N),v()}catch(j){f(j)}};vLt(A)?t.resolve(A).then(P,f):P(A)}catch(N){f(N)}}}catch(N){l(N)}},l)}catch(x){l(x)}},v=function(){var x=e.inner;if(x)try{t.resolve(zE(y1e(x.next,x.iterator))).then(function(b){try{zE(b).done?(e.inner=null,d()):i(_1e(b.value,!1))}catch(A){f(A)}},f)}catch(b){f(b)}else d()};v()})});mLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(e){return zE(this),gLt(e),new wLt(yLt(this),{mapper:e,inner:null})}})});var b1e=R(()=>{"use strict";p();var ELt=oe(),SLt=qg().forEach;ELt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(e){return SLt(this,e)}})});var w6=R((gkr,w1e)=>{"use strict";p();var TLt=jt(),ILt=Fg();w1e.exports=ILt(function(){return TLt(this.next,this.iterator)},!0)});var E1e=R(()=>{"use strict";p();var ALt=oe(),MLt=Yr(),CLt=ma(),PLt=b6(),RLt=X_(),OLt=w6();ALt({target:"AsyncIterator",stat:!0,forced:!0},{from:function(e){var r=PLt(typeof e=="string"?MLt(e):e);return CLt(RLt,r.iterator)?r.iterator:new OLt(r)}})});var S1e=R(()=>{"use strict";p();var LLt=oe(),DLt=y6();LLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:DLt})});var T1e=R(()=>{"use strict";p();var NLt=oe(),kLt=v6();NLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:kLt})});var I1e=R(()=>{"use strict";p();var qLt=oe(),FLt=jt(),jLt=xr(),E6=Bt(),zLt=hr(),ULt=_r(),BLt=Ti(),VLt=Q_(),S6=ULt("Promise"),GLt=TypeError;qLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(e){E6(this),jLt(e);var r=BLt(this),n=r.iterator,i=r.next,o=arguments.length<2,l=o?void 0:arguments[1],f=0;return new S6(function(d,v){var x=function(A){VLt(n,v,A,v)},b=function(){try{S6.resolve(E6(FLt(i,n))).then(function(A){try{if(E6(A).done)o?v(new GLt("Reduce of empty iterator with no initial value")):d(l);else{var P=A.value;if(o)o=!1,l=P,b();else try{var N=e(l,P,f),j=function(D){l=D,b()};zLt(N)?S6.resolve(N).then(j,x):j(N)}catch(D){x(D)}}f++}catch(D){v(D)}},v)}catch(A){v(A)}};b()})}})});var A1e=R(()=>{"use strict";p();var $Lt=oe(),HLt=qg().some;$Lt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(e){return HLt(this,e)}})});var P1e=R(()=>{"use strict";p();var WLt=oe(),M1e=jt(),C1e=Bt(),ZLt=Ti(),YLt=I_(),KLt=A_(),XLt=Fg(),T6=ko(),QLt=XLt(function(t){var e=this,r=e.iterator,n;if(!e.remaining--){var i=T6(void 0,!0);return e.done=!0,n=r.return,n!==void 0?t.resolve(M1e(n,r,void 0)).then(function(){return i}):i}return t.resolve(M1e(e.next,r)).then(function(o){return C1e(o).done?(e.done=!0,T6(void 0,!0)):T6(o.value,!1)}).then(null,function(o){throw e.done=!0,o})});WLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(e){C1e(this);var r=KLt(YLt(+e));return new QLt(ZLt(this),{remaining:r})}})});var R1e=R(()=>{"use strict";p();var JLt=oe(),e2t=qg().toArray;JLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return e2t(this,void 0,[])}})});var tO=R((jkr,q1e)=>{"use strict";p();var L1e=Rn(),t2t=hd(),I6=ko(),r2t=Ns(),n2t=hr(),i2t=hi(),D1e=sr(),UE="Incorrect Iterator.range arguments",M6="NumericRangeIterator",o2t=L1e.set,N1e=L1e.getterFor(M6),O1e=RangeError,A6=TypeError,k1e=t2t(function(e,r,n,i,o,l){if(typeof e!=i||r!==1/0&&r!==-1/0&&typeof r!=i)throw new A6(UE);if(e===1/0||e===-1/0)throw new O1e(UE);var f=r>e,d=!1,v;if(n===void 0)v=void 0;else if(n2t(n))v=n.step,d=!!n.inclusive;else if(typeof n==i)v=n;else throw new A6(UE);if(r2t(v)&&(v=f?l:-l),typeof v!=i)throw new A6(UE);if(v===1/0||v===-1/0||v===o&&e!==r)throw new O1e(UE);var x=e!==e||r!==r||v!==v||r>e!=v>o;o2t(this,{type:M6,start:e,end:r,step:v,inclusive:d,hitsEnd:x,currentCount:o,zero:o}),D1e||(this.start=e,this.end=r,this.step=v,this.inclusive=d)},M6,function(){var e=N1e(this);if(e.hitsEnd)return I6(void 0,!0);var r=e.start,n=e.end,i=e.step,o=r+i*e.currentCount++;o===n&&(e.hitsEnd=!0);var l=e.inclusive,f;return n>r?f=l?o>n:o>=n:f=l?n>o:n>=o,f?(e.hitsEnd=!0,I6(void 0,!0)):I6(o,!1)}),eO=function(t){i2t(k1e.prototype,t,{get:function(){return N1e(this)[t]},set:function(){},configurable:!0,enumerable:!1})};D1e&&(eO("start"),eO("end"),eO("inclusive"),eO("step"));q1e.exports=k1e});var F1e=R(()=>{"use strict";p();var a2t=oe(),s2t=tO();typeof BigInt=="function"&&a2t({target:"BigInt",stat:!0,forced:!0},{range:function(e,r,n){return new s2t(e,r,n,"bigint",BigInt(0),BigInt(1))}})});var C6=R((Gkr,B1e)=>{"use strict";p();UP();zR();var U1e=_r(),l2t=Qi(),j1e=hr(),u2t=Object,c2t=TypeError,f2t=U1e("Map"),h2t=U1e("WeakMap"),rO=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=l2t(null)};rO.prototype.get=function(t,e){return this[t]||(this[t]=e())};rO.prototype.next=function(t,e,r){var n=r?this.objectsByIndex[t]||(this.objectsByIndex[t]=new h2t):this.primitives||(this.primitives=new f2t),i=n.get(e);return i||n.set(e,i=new rO),i};var z1e=new rO;B1e.exports=function(){var t=z1e,e=arguments.length,r,n;for(r=0;r<e;r++)j1e(n=arguments[r])&&(t=t.next(r,n,!0));if(this===u2t&&t===z1e)throw new c2t("Composite keys must contain a non-primitive component");for(r=0;r<e;r++)j1e(n=arguments[r])||(t=t.next(r,n,!1));return t}});var G1e=R(()=>{"use strict";p();var p2t=oe(),d2t=ga(),m2t=C6(),g2t=_r(),V1e=Qi(),v2t=Object,y2t=function(){var t=g2t("Object","freeze");return t?t(V1e(null)):V1e(null)};p2t({global:!0,forced:!0},{compositeKey:function(){return d2t(m2t,v2t,arguments).get("object",y2t)}})});var H1e=R(()=>{"use strict";p();var _2t=oe(),x2t=C6(),$1e=_r(),b2t=ga();_2t({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?$1e("Symbol").for(arguments[0]):b2t(x2t,null,arguments).get("symbol",$1e("Symbol"))}})});var W1e=R(()=>{"use strict";p();IB()});var Z1e=R(()=>{"use strict";p();var w2t=oe(),E2t=ct(),S2t=E2t(DataView.prototype.getUint8);w2t({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(e){return S2t(this,e)}})});var Y1e=R(()=>{"use strict";p();PB()});var K1e=R(()=>{"use strict";p();var T2t=oe(),I2t=ct(),A2t=AB(),M2t=__(),C2t=_G(),P2t=I2t(DataView.prototype.setUint8);T2t({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(e,r){A2t(this);var n=M2t(e);return P2t(this,n,C2t(r))}})});var tEe=R(()=>{"use strict";p();var R2t=oe(),iO=sr(),O2t=_r(),X1e=xr(),L2t=qa(),Q1e=jn(),D2t=nu(),N2t=hi(),J1e=mr(),eEe=Rn(),P6=c6(),k2t=O2t("SuppressedError"),q2t=ReferenceError,F2t=J1e("dispose"),j2t=J1e("toStringTag"),aO="DisposableStack",z2t=eEe.set,oO=eEe.getterFor(aO),R6="sync-dispose",BE="disposed",U2t="pending",nO=function(t){var e=oO(t);if(e.state===BE)throw new q2t(aO+" already disposed");return e},O6=function(){z2t(L2t(this,e0),{type:aO,state:U2t,stack:[]}),iO||(this.disposed=!1)},e0=O6.prototype;D2t(e0,{dispose:function(){var e=oO(this);if(e.state!==BE){e.state=BE,iO||(this.disposed=!0);for(var r=e.stack,n=r.length,i=!1,o;n;){var l=r[--n];r[n]=null;try{l()}catch(f){i?o=new k2t(f,o):(i=!0,o=f)}}if(e.stack=null,i)throw o}},use:function(e){return P6(nO(this),e,R6),e},adopt:function(e,r){var n=nO(this);return X1e(r),P6(n,void 0,R6,function(){r(e)}),e},defer:function(e){var r=nO(this);X1e(e),P6(r,void 0,R6,e)},move:function(){var e=nO(this),r=new O6;return oO(r).stack=e.stack,e.stack=[],e.state=BE,iO||(this.disposed=!0),r}});iO&&N2t(e0,"disposed",{configurable:!0,get:function(){return oO(this).state===BE}});Q1e(e0,F2t,e0.dispose,{name:"dispose"});Q1e(e0,j2t,aO,{nonWritable:!0});R2t({global:!0,constructor:!0},{DisposableStack:O6})});var oEe=R(()=>{"use strict";p();var B2t=oe(),nEe=_r(),V2t=hr(),G2t=ls(),$2t=yt(),iEe="Error",D6="DOMException",H2t=Object.setPrototypeOf||{}.__proto__,rEe=nEe(D6),L6=Error,sO=L6.isError,W2t=!sO||!H2t||$2t(function(){return rEe&&!sO(new rEe(D6))||!sO(new L6(iEe,{cause:function(){}}))||sO(nEe("Object","create")(L6.prototype))});B2t({target:"Error",stat:!0,sham:!0,forced:W2t},{isError:function(e){if(!V2t(e))return!1;var r=G2t(e);return r===iEe||r===D6}})});var N6=R((gqr,aEe)=>{"use strict";p();var Z2t=ct(),Y2t=xr();aEe.exports=function(){return Z2t(Y2t(this))}});var sEe=R(()=>{"use strict";p();var K2t=oe(),X2t=N6();K2t({target:"Function",proto:!0,forced:!0},{demethodize:X2t})});var uEe=R(()=>{"use strict";p();var Q2t=oe(),J2t=ct(),eDt=jr(),tDt=S1(),rDt=Br(),nDt=sr(),iDt=Object.getOwnPropertyDescriptor,lEe=/^\s*class\b/,oDt=J2t(lEe.exec),aDt=function(t){try{if(!nDt||!oDt(lEe,tDt(t)))return!1}catch(r){}var e=iDt(t,"prototype");return!!e&&rDt(e,"writable")&&!e.writable};Q2t({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(e){return eDt(e)&&!aDt(e)}})});var cEe=R(()=>{"use strict";p();var sDt=oe(),lDt=rc();sDt({target:"Function",stat:!0,forced:!0},{isConstructor:lDt})});var pEe=R(()=>{"use strict";p();var uDt=mr(),cDt=ti().f,fEe=uDt("metadata"),hEe=Function.prototype;hEe[fEe]===void 0&&cDt(hEe,fEe,{value:null})});var dEe=R(()=>{"use strict";p();var fDt=oe(),hDt=N6();fDt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:hDt})});var mEe=R(()=>{"use strict";p();r3()});var gEe=R(()=>{"use strict";p();s3()});var k6=R((jqr,vEe)=>{"use strict";p();kP();var pDt=jt(),dDt=fd().IteratorPrototype.map,mDt=function(t,e){return[e,t]};vEe.exports=function(){return pDt(dDt,this,mDt)}});var yEe=R(()=>{"use strict";p();var gDt=oe(),vDt=k6();gDt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:vDt})});var bEe=R(()=>{"use strict";p();var yDt=oe(),_Ee=jt(),_Dt=xr(),xEe=Bt(),xDt=Xc(),bDt=xd(),wDt=ko(),EDt=Array,SDt=bDt(function(){for(;;){var t=this.iterator;if(!t){var e=this.nextIterableIndex++,r=this.iterables;if(e>=r.length)return this.done=!0,wDt(void 0,!0);var n=r[e];this.iterables[e]=null,t=this.iterator=_Ee(n.method,n.iterable),this.next=t.next}var i=xEe(_Ee(this.next,t));if(i.done){this.iterator=null,this.next=null;continue}return i}},!1,!0);yDt({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var e=arguments.length,r=EDt(e),n=0;n<e;n++){var i=xEe(arguments[n]);r[n]={iterable:i,method:_Dt(xDt(i))}}return new SDt({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var SEe=R(()=>{"use strict";p();var TDt=jt(),IDt=jn(),ADt=Xi(),MDt=Br(),CDt=mr(),wEe=fd().IteratorPrototype,EEe=CDt("dispose");MDt(wEe,EEe)||IDt(wEe,EEe,function(){var t=ADt(this,"return");t&&TDt(t,this)})});var TEe=R(()=>{"use strict";p();h3()});var IEe=R(()=>{"use strict";p();d3()});var AEe=R(()=>{"use strict";p();g3()});var MEe=R(()=>{"use strict";p();y3()});var CEe=R(()=>{"use strict";p();S3()});var PEe=R(()=>{"use strict";p();I3()});var REe=R(()=>{"use strict";p();A3()});var OEe=R(()=>{"use strict";p();var PDt=oe(),RDt=k6();PDt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:RDt})});var LEe=R(()=>{"use strict";p();kP()});var NEe=R(()=>{"use strict";p();var ODt=oe(),DEe=tO(),LDt=TypeError;ODt({target:"Iterator",stat:!0,forced:!0},{range:function(e,r,n){if(typeof e=="number")return new DEe(e,r,n,"number",0,1);if(typeof e=="bigint")return new DEe(e,r,n,"bigint",BigInt(0),BigInt(1));throw new LDt("Incorrect Iterator.range arguments")}})});var kEe=R(()=>{"use strict";p();P3()});var qEe=R(()=>{"use strict";p();O3()});var FEe=R(()=>{"use strict";p();D3()});var jEe=R(()=>{"use strict";p();N3()});var UEe=R(()=>{"use strict";p();var DDt=oe(),NDt=Bt(),kDt=qE(),qDt=w6(),zEe=Ti();DDt({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new qDt(zEe(new kDt(zEe(NDt(this)))))}})});var q6=R((UFr,BEe)=>{"use strict";p();var FDt=yt();BEe.exports=!FDt(function(){var t="9007199254740993",e=JSON.rawJSON(t);return!JSON.isRawJSON(e)||JSON.stringify(e)!==t})});var F6=R((VFr,VEe)=>{"use strict";p();var jDt=hr(),zDt=Rn().get;VEe.exports=function(e){if(!jDt(e))return!1;var r=zDt(e);return!!r&&r.type==="RawJSON"}});var GEe=R(()=>{"use strict";p();var UDt=oe(),BDt=q6(),VDt=F6();UDt({target:"JSON",stat:!0,forced:!BDt},{isRawJSON:VDt})});var z6=R((ZFr,ZEe)=>{"use strict";p();var j6=ct(),GDt=Br(),lO=SyntaxError,$Dt=parseInt,HDt=String.fromCharCode,WDt=j6("".charAt),$Ee=j6("".slice),HEe=j6(/./.exec),WEe={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},ZDt=/^[\da-f]{4}$/i,YDt=/^[\u0000-\u001F]$/;ZEe.exports=function(t,e){for(var r=!0,n="";e<t.length;){var i=WDt(t,e);if(i==="\\"){var o=$Ee(t,e,e+2);if(GDt(WEe,o))n+=WEe[o],e+=2;else if(o==="\\u"){e+=2;var l=$Ee(t,e,e+4);if(!HEe(ZDt,l))throw new lO("Bad Unicode escape at: "+e);n+=HDt($Dt(l,16)),e+=4}else throw new lO("Unknown escape sequence: \""+o+"\"")}else if(i==="\""){r=!1,e++;break}else{if(HEe(YDt,i))throw new lO("Bad control character in string literal at: "+e);n+=i,e++}}if(r)throw new lO("Unterminated string at: "+e);return{value:n,end:e}}});var rSe=R(()=>{"use strict";p();var KDt=oe(),XDt=sr(),Z6=Ft(),QDt=_r(),uO=ct(),JDt=jt(),eSe=jr(),eNt=hr(),tNt=tc(),rNt=Br(),nNt=Mr(),YEe=ln(),$6=tu(),tSe=yt(),iNt=z6(),oNt=td(),KEe=Z6.JSON,aNt=Z6.Number,t0=Z6.SyntaxError,Y6=KEe&&KEe.parse,sNt=QDt("Object","keys"),lNt=Object.getOwnPropertyDescriptor,ya=uO("".charAt),U6=uO("".slice),B6=uO(/./.exec),XEe=uO([].push),V6=/^\d$/,uNt=/^[1-9]$/,cNt=/^[\d-]$/,VE=/^[\t\n\r ]$/,G6=0,QEe=1,fNt=function(t,e){t=nNt(t);var r=new W6(t,0,""),n=r.parse(),i=n.value,o=r.skip(VE,n.end);if(o<t.length)throw new t0("Unexpected extra character: \""+ya(t,o)+"\" after the parsed data at: "+o);return eSe(e)?H6({"":i},"",e,n):i},H6=function(t,e,r,n){var i=t[e],o=n&&i===n.value,l=o&&typeof n.source=="string"?{source:n.source}:{},f,d,v,x,b;if(eNt(i)){var A=tNt(i),P=o?n.nodes:A?[]:{};if(A)for(f=P.length,v=YEe(i),x=0;x<v;x++)JEe(i,x,H6(i,""+x,r,x<f?P[x]:void 0));else for(d=sNt(i),v=YEe(d),x=0;x<v;x++)b=d[x],JEe(i,b,H6(i,b,r,rNt(P,b)?P[b]:void 0))}return JDt(r,t,e,i,l)},JEe=function(t,e,r){if(XDt){var n=lNt(t,e);if(n&&!n.configurable)return}r===void 0?delete t[e]:$6(t,e,r)},hNt=function(t,e,r,n){this.value=t,this.end=e,this.source=r,this.nodes=n},W6=function(t,e){this.source=t,this.index=e};W6.prototype={fork:function(t){return new W6(this.source,t)},parse:function(){var t=this.source,e=this.skip(VE,this.index),r=this.fork(e),n=ya(t,e);if(B6(cNt,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null)}throw new t0("Unexpected character: \""+n+"\" at: "+e)},node:function(t,e,r,n,i){return new hNt(e,n,t?null:U6(this.source,r,n),i)},object:function(){for(var t=this.source,e=this.index+1,r=!1,n={},i={};e<t.length;){if(e=this.until(["\"","}"],e),ya(t,e)==="}"&&!r){e++;break}var o=this.fork(e).string(),l=o.value;e=o.end,e=this.until([":"],e)+1,e=this.skip(VE,e),o=this.fork(e).parse(),$6(i,l,o),$6(n,l,o.value),e=this.until([",","}"],o.end);var f=ya(t,e);if(f===",")r=!0,e++;else if(f==="}"){e++;break}}return this.node(QEe,n,this.index,e,i)},array:function(){for(var t=this.source,e=this.index+1,r=!1,n=[],i=[];e<t.length;){if(e=this.skip(VE,e),ya(t,e)==="]"&&!r){e++;break}var o=this.fork(e).parse();if(XEe(i,o),XEe(n,o.value),e=this.until([",","]"],o.end),ya(t,e)===",")r=!0,e++;else if(ya(t,e)==="]"){e++;break}}return this.node(QEe,n,this.index,e,i)},string:function(){var t=this.index,e=iNt(this.source,this.index+1);return this.node(G6,e.value,t,e.end)},number:function(){var t=this.source,e=this.index,r=e;if(ya(t,r)==="-"&&r++,ya(t,r)==="0")r++;else if(B6(uNt,ya(t,r)))r=this.skip(V6,r+1);else throw new t0("Failed to parse number at: "+r);if(ya(t,r)==="."&&(r=this.skip(V6,r+1)),ya(t,r)==="e"||ya(t,r)==="E"){r++,(ya(t,r)==="+"||ya(t,r)==="-")&&r++;var n=r;if(r=this.skip(V6,r),n===r)throw new t0("Failed to parse number's exponent value at: "+r)}return this.node(G6,aNt(U6(t,e,r)),e,r)},keyword:function(t){var e=""+t,r=this.index,n=r+e.length;if(U6(this.source,r,n)!==e)throw new t0("Failed to parse value at: "+r);return this.node(G6,t,r,n)},skip:function(t,e){for(var r=this.source;e<r.length&&B6(t,ya(r,e));e++);return e},until:function(t,e){e=this.skip(VE,e);for(var r=ya(this.source,e),n=0;n<t.length;n++)if(t[n]===r)return e;throw new t0("Unexpected character: \""+r+"\" at: "+e)}};var pNt=tSe(function(){var t="9007199254740993",e;return Y6(t,function(r,n,i){e=i.source}),e!==t}),dNt=oNt&&!tSe(function(){return 1/Y6("-0 \t")!==-1/0});KDt({target:"JSON",stat:!0,forced:pNt},{parse:function(e,r){return dNt&&!eSe(r)?Y6(e):fNt(e,r)}})});var cSe=R(()=>{"use strict";p();var lSe=oe(),mNt=Eh(),uSe=q6(),cO=_r(),gNt=jt(),J6=ct(),vNt=jr(),yNt=F6(),_Nt=Mr(),xNt=tu(),bNt=z6(),wNt=uU(),ENt=nd(),SNt=Rn().set,TNt=String,nSe=SyntaxError,INt=cO("JSON","parse"),iSe=cO("JSON","stringify"),ANt=cO("Object","create"),MNt=cO("Object","freeze"),X6=J6("".charAt),K6=J6("".slice),CNt=J6([].push),Q6=ENt(),oSe=Q6.length,aSe="Unacceptable as raw JSON",sSe=function(t){return t===" "||t==="\t"||t===`
`||t==="\r"};lSe({target:"JSON",stat:!0,forced:!uSe},{rawJSON:function(e){var r=_Nt(e);if(r===""||sSe(X6(r,0))||sSe(X6(r,r.length-1)))throw new nSe(aSe);var n=INt(r);if(typeof n=="object"&&n!==null)throw new nSe(aSe);var i=ANt(null);return SNt(i,{type:"RawJSON"}),xNt(i,"rawJSON",r),mNt?MNt(i):i}});iSe&&lSe({target:"JSON",stat:!0,arity:3,forced:!uSe},{stringify:function(e,r,n){var i=wNt(r),o=[],l=iSe(e,function(P,N){var j=vNt(i)?gNt(i,this,TNt(P),N):N;return yNt(j)?Q6+(CNt(o,j.rawJSON)-1):j},n);if(typeof l!="string")return l;for(var f="",d=l.length,v=0;v<d;v++){var x=X6(l,v);if(x==="\""){var b=bNt(l,++v).end-1,A=K6(l,v,b);f+=K6(A,0,oSe)===Q6?o[K6(A,oSe)]:"\""+A+"\"",v=b}else f+=x}return f}})});var _a=R((rjr,fSe)=>{"use strict";p();var PNt=qo().has;fSe.exports=function(t){return PNt(t),t}});var hSe=R(()=>{"use strict";p();var RNt=oe(),ONt=_a(),LNt=qo().remove;RNt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=ONt(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=LNt(e,arguments[i]),r=r&&n;return!!r}})});var dSe=R(()=>{"use strict";p();var DNt=oe(),NNt=_a(),e$=qo(),kNt=e$.get,qNt=e$.has,pSe=e$.set;DNt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(e,r){var n=NNt(this),i,o;return qNt(n,e)?(i=kNt(n,e),"update"in r&&(i=r.update(i,e,n),pSe(n,e,i)),i):(o=r.insert(e,n),pSe(n,e,o),o)}})});var mSe=R(()=>{"use strict";p();var FNt=oe(),jNt=Wn(),zNt=_a(),UNt=iu();FNt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var r=zNt(this),n=jNt(e,arguments.length>1?arguments[1]:void 0);return UNt(r,function(i,o){if(!n(i,o,r))return!1},!0)!==!1}})});var vSe=R(()=>{"use strict";p();var BNt=oe(),VNt=Wn(),GNt=_a(),gSe=qo(),$Nt=iu(),HNt=gSe.Map,WNt=gSe.set;BNt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var r=GNt(this),n=VNt(e,arguments.length>1?arguments[1]:void 0),i=new HNt;return $Nt(r,function(o,l){n(o,l,r)&&WNt(i,l,o)}),i}})});var ySe=R(()=>{"use strict";p();var ZNt=oe(),YNt=Wn(),KNt=_a(),XNt=iu();ZNt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var r=KNt(this),n=YNt(e,arguments.length>1?arguments[1]:void 0),i=XNt(r,function(o,l){if(n(o,l,r))return{value:o}},!0);return i&&i.value}})});var _Se=R(()=>{"use strict";p();var QNt=oe(),JNt=Wn(),ekt=_a(),tkt=iu();QNt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var r=ekt(this),n=JNt(e,arguments.length>1?arguments[1]:void 0),i=tkt(r,function(o,l){if(n(o,l,r))return{key:l}},!0);return i&&i.key}})});var GE=R((wjr,xSe)=>{"use strict";p();var rkt=Wn(),nkt=Bt(),ikt=Yr(),okt=Oi();xSe.exports=function(t,e,r){return function(i){var o=ikt(i),l=arguments.length,f=l>1?arguments[1]:void 0,d=f!==void 0,v=d?rkt(f,l>2?arguments[2]:void 0):void 0,x=new t,b=0;return okt(o,function(A){var P=d?v(A,b++):A;r?e(x,nkt(P)[0],P[1]):e(x,P)}),x}}});var wSe=R(()=>{"use strict";p();var akt=oe(),bSe=qo(),skt=GE();akt({target:"Map",stat:!0,forced:!0},{from:skt(bSe.Map,bSe.set,!0)})});var ESe=R(()=>{"use strict";p();var lkt=oe(),ukt=_a(),t$=qo(),ckt=t$.get,fkt=t$.has,hkt=t$.set;lkt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(e,r){return fkt(ukt(this),e)?ckt(this,e):(hkt(this,e,r),r)}})});var SSe=R(()=>{"use strict";p();var pkt=oe(),dkt=xr(),mkt=_a(),r$=qo(),gkt=r$.get,vkt=r$.has,ykt=r$.set;pkt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(e,r){if(mkt(this),dkt(r),vkt(this,e))return gkt(this,e);e===0&&1/e===-1/0&&(e=0);var n=r(e);return ykt(this,e,n),n}})});var TSe=R(()=>{"use strict";p();V3()});var ASe=R((kjr,ISe)=>{"use strict";p();ISe.exports=function(t,e){return t===e||t!==t&&e!==e}});var MSe=R(()=>{"use strict";p();var _kt=oe(),xkt=ASe(),bkt=_a(),wkt=iu();_kt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return wkt(bkt(this),function(r){if(xkt(r,e))return!0},!0)===!0}})});var PSe=R(()=>{"use strict";p();var Ekt=oe(),Skt=jt(),Tkt=Oi(),Ikt=jr(),CSe=xr(),Akt=qo().Map;Ekt({target:"Map",stat:!0,forced:!0},{keyBy:function(e,r){var n=Ikt(this)?this:Akt,i=new n;CSe(r);var o=CSe(i.set);return Tkt(e,function(l){Skt(o,i,r(l),l)}),i}})});var RSe=R(()=>{"use strict";p();var Mkt=oe(),Ckt=_a(),Pkt=iu();Mkt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var r=Pkt(Ckt(this),function(n,i){if(n===e)return{key:i}},!0);return r&&r.key}})});var LSe=R(()=>{"use strict";p();var Rkt=oe(),Okt=Wn(),Lkt=_a(),OSe=qo(),Dkt=iu(),Nkt=OSe.Map,kkt=OSe.set;Rkt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var r=Lkt(this),n=Okt(e,arguments.length>1?arguments[1]:void 0),i=new Nkt;return Dkt(r,function(o,l){kkt(i,n(o,l,r),o)}),i}})});var NSe=R(()=>{"use strict";p();var qkt=oe(),Fkt=Wn(),jkt=_a(),DSe=qo(),zkt=iu(),Ukt=DSe.Map,Bkt=DSe.set;qkt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var r=jkt(this),n=Fkt(e,arguments.length>1?arguments[1]:void 0),i=new Ukt;return zkt(r,function(o,l){Bkt(i,l,n(o,l,r))}),i}})});var kSe=R(()=>{"use strict";p();var Vkt=oe(),Gkt=_a(),$kt=Oi(),Hkt=qo().set;Vkt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var r=Gkt(this),n=arguments.length,i=0;i<n;)$kt(arguments[i++],function(o,l){Hkt(r,o,l)},{AS_ENTRIES:!0});return r}})});var $E=R((rzr,qSe)=>{"use strict";p();var Wkt=Bt();qSe.exports=function(t,e,r){return function(){for(var i=new t,o=arguments.length,l=0;l<o;l++){var f=arguments[l];r?e(i,Wkt(f)[0],f[1]):e(i,f)}return i}}});var jSe=R(()=>{"use strict";p();var Zkt=oe(),FSe=qo(),Ykt=$E();Zkt({target:"Map",stat:!0,forced:!0},{of:Ykt(FSe.Map,FSe.set,!0)})});var zSe=R(()=>{"use strict";p();var Kkt=oe(),Xkt=xr(),Qkt=_a(),Jkt=iu(),eqt=TypeError;Kkt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var r=Qkt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(Xkt(e),Jkt(r,function(o,l){n?(n=!1,i=o):i=e(i,o,l,r)}),n)throw new eqt("Reduce of empty map with no initial value");return i}})});var USe=R(()=>{"use strict";p();var tqt=oe(),rqt=Wn(),nqt=_a(),iqt=iu();tqt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var r=nqt(this),n=rqt(e,arguments.length>1?arguments[1]:void 0);return iqt(r,function(i,o){if(n(i,o,r))return!0},!0)===!0}})});var VSe=R(()=>{"use strict";p();var oqt=oe(),BSe=xr(),aqt=_a(),n$=qo(),sqt=TypeError,lqt=n$.get,uqt=n$.has,cqt=n$.set;oqt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,r){var n=aqt(this),i=arguments.length;BSe(r);var o=uqt(n,e);if(!o&&i<3)throw new sqt("Updating absent value");var l=o?lqt(n,e):BSe(i>2?arguments[2]:void 0)(e,n);return cqt(n,e,r(l,e,n)),n}})});var pO=R((gzr,GSe)=>{"use strict";p();var fO=jt(),i$=xr(),hO=jr(),fqt=Bt(),hqt=TypeError;GSe.exports=function(e,r){var n=fqt(this),i=i$(n.get),o=i$(n.has),l=i$(n.set),f=arguments.length>2?arguments[2]:void 0,d;if(!hO(r)&&!hO(f))throw new hqt("At least one callback required");return fO(o,n,e)?(d=fO(i,n,e),hO(r)&&(d=r(d),fO(l,n,e,d))):hO(f)&&(d=f(),fO(l,n,e,d)),d}});var $Se=R(()=>{"use strict";p();var pqt=oe(),dqt=pO();pqt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:dqt})});var HSe=R(()=>{"use strict";p();var mqt=oe(),gqt=pO();mqt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:gqt})});var ZSe=R((Szr,WSe)=>{"use strict";p();var vqt=TypeError;WSe.exports=function(t){if(typeof t=="number")return t;throw new vqt("Argument is not a number")}});var XSe=R(()=>{"use strict";p();var yqt=oe(),o$=ZSe(),YSe=I_(),KSe=YP(),_qt=RangeError,xqt=Math.min,bqt=Math.max;yqt({target:"Math",stat:!0,forced:!0},{clamp:function(e,r,n){if(o$(e),YSe(o$(r)),YSe(o$(n)),KSe(r,0)&&KSe(n,-0)||r>n)throw new _qt("`min` should be smaller than `max`");return xqt(n,bqt(r,e))}})});var QSe=R(()=>{"use strict";p();var wqt=oe();wqt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var JSe=R(()=>{"use strict";p();var Eqt=oe(),Sqt=180/Math.PI;Eqt({target:"Math",stat:!0,forced:!0},{degrees:function(e){return e*Sqt}})});var a$=R((Nzr,eTe)=>{"use strict";p();eTe.exports=function(e,r,n,i,o){var l=+e,f=+r,d=+n,v=+i,x=+o;return l!==l||f!==f||d!==d||v!==v||x!==x?NaN:l===1/0||l===-1/0?l:(l-f)*(x-v)/(d-f)+v}});var tTe=R(()=>{"use strict";p();var Tqt=oe(),Iqt=a$(),Aqt=bP();Tqt({target:"Math",stat:!0,forced:!0},{fscale:function(e,r,n,i,o){return Aqt(Iqt(e,r,n,i,o))}})});var rTe=R(()=>{"use strict";p();W3()});var nTe=R(()=>{"use strict";p();var Mqt=oe();Mqt({target:"Math",stat:!0,forced:!0},{iaddh:function(e,r,n,i){var o=e>>>0,l=r>>>0,f=n>>>0;return l+(i>>>0)+((o&f|(o|f)&~(o+f>>>0))>>>31)|0}})});var iTe=R(()=>{"use strict";p();var Cqt=oe();Cqt({target:"Math",stat:!0,forced:!0},{imulh:function(e,r){var n=65535,i=+e,o=+r,l=i&n,f=o&n,d=i>>16,v=o>>16,x=(d*f>>>0)+(l*f>>>16);return d*v+(x>>16)+((l*v>>>0)+(x&n)>>16)}})});var oTe=R(()=>{"use strict";p();var Pqt=oe();Pqt({target:"Math",stat:!0,forced:!0},{isubh:function(e,r,n,i){var o=e>>>0,l=r>>>0,f=n>>>0;return l-(i>>>0)-((~o&f|~(o^f)&o-f>>>0)>>>31)|0}})});var aTe=R(()=>{"use strict";p();var Rqt=oe();Rqt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var sTe=R(()=>{"use strict";p();var Oqt=oe(),Lqt=Math.PI/180;Oqt({target:"Math",stat:!0,forced:!0},{radians:function(e){return e*Lqt}})});var lTe=R(()=>{"use strict";p();var Dqt=oe(),Nqt=a$();Dqt({target:"Math",stat:!0,forced:!0},{scale:Nqt})});var hTe=R(()=>{"use strict";p();var kqt=oe(),qqt=Bt(),Fqt=t5(),jqt=hd(),zqt=ko(),uTe=Rn(),cTe="Seeded Random",fTe=cTe+" Generator",Uqt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",Bqt=uTe.set,Vqt=uTe.getterFor(fTe),Gqt=TypeError,$qt=jqt(function(e){Bqt(this,{type:fTe,seed:e%2147483647})},cTe,function(){var e=Vqt(this),r=e.seed=(e.seed*1103515245+12345)%2147483647;return zqt((r&1073741823)/1073741823,!1)});kqt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(e){var r=qqt(e).seed;if(!Fqt(r))throw new Gqt(Uqt);return new $qt(r)}})});var pTe=R(()=>{"use strict";p();var Hqt=oe();Hqt({target:"Math",stat:!0,forced:!0},{signbit:function(e){var r=+e;return r===r&&r===0?1/r===-1/0:r<0}})});var yTe=R(()=>{"use strict";p();var Wqt=oe(),Zqt=ct(),Yqt=Oi(),Kqt=RangeError,Xqt=TypeError,ou=1/0,Qqt=NaN,jg=Math.abs,c$=Math.pow,dTe=Zqt([].push),HE=c$(2,1023),Jqt=c$(2,53)-1,mTe=Number.MAX_VALUE,gTe=c$(2,971),WE={},s$={},l$={},u$={},vTe={},dO=function(t,e){var r=t+e,n=e-(r-t);return{hi:r,lo:n}};Wqt({target:"Math",stat:!0},{sumPrecise:function(e){var r=[],n=0,i=u$;switch(Yqt(e,function($){if(++n>=Jqt)throw new Kqt("Maximum allowed index exceeded");if(typeof $!="number")throw new Xqt("Value is not a number");i!==WE&&($!==$?i=WE:$===ou?i=i===s$?WE:l$:$===-ou?i=i===l$?WE:s$:($!==0||1/$===ou)&&(i===u$||i===vTe)&&(i=vTe,dTe(r,$)))}),i){case WE:return Qqt;case s$:return-ou;case l$:return ou;case u$:return-0}for(var o=[],l=0,f,d,v,x,b,A,P=0;P<r.length;P++){f=r[P];for(var N=0,j=0;j<o.length;j++){if(d=o[j],jg(f)<jg(d)&&(A=f,f=d,d=A),v=dO(f,d),x=v.hi,b=v.lo,jg(x)===ou){var D=x===ou?1:-1;l+=D,f=f-D*HE-D*HE,jg(f)<jg(d)&&(A=f,f=d,d=A),v=dO(f,d),x=v.hi,b=v.lo}b!==0&&(o[N++]=b),f=x}o.length=N,f!==0&&dTe(o,f)}var F=o.length-1;if(x=0,b=0,l!==0){var U=F>=0?o[F]:0;if(F--,jg(l)>1||l>0&&U>0||l<0&&U<0)return l>0?ou:-ou;if(v=dO(l*HE,U/2),x=v.hi,b=v.lo,b*=2,jg(2*x)===ou)return x>0?x===HE&&b===-(gTe/2)&&F>=0&&o[F]<0?mTe:ou:x===-HE&&b===gTe/2&&F>=0&&o[F]>0?-mTe:-ou;b!==0&&(o[++F]=b,b=0),x*=2}for(;F>=0&&(v=dO(x,o[F--]),x=v.hi,b=v.lo,b===0););return F>=0&&(b<0&&o[F]<0||b>0&&o[F]>0)&&(d=b*2,f=x+d,d===f-x&&(x=f)),x}})});var _Te=R(()=>{"use strict";p();var eFt=oe();eFt({target:"Math",stat:!0,forced:!0},{umulh:function(e,r){var n=65535,i=+e,o=+r,l=i&n,f=o&n,d=i>>>16,v=o>>>16,x=(d*f>>>0)+(l*f>>>16);return d*v+(x>>>16)+((l*v>>>0)+(x&n)>>>16)}})});var wTe=R(()=>{"use strict";p();var tFt=oe(),YE=ct(),rFt=fi(),ZE="Invalid number representation",nFt="Invalid radix",iFt=RangeError,mO=SyntaxError,oFt=TypeError,xTe=parseInt,aFt=Math.pow,bTe=/^[\d.a-z]+$/,sFt=YE("".charAt),lFt=YE(bTe.exec),uFt=YE(1 .toString),cFt=YE("".slice),fFt=YE("".split);tFt({target:"Number",stat:!0,forced:!0},{fromString:function(e,r){var n=1;if(typeof e!="string")throw new oFt(ZE);if(!e.length)throw new mO(ZE);if(sFt(e,0)==="-"&&(n=-1,e=cFt(e,1),!e.length))throw new mO(ZE);var i=r===void 0?10:rFt(r);if(i<2||i>36)throw new iFt(nFt);if(!lFt(bTe,e))throw new mO(ZE);var o=fFt(e,"."),l=xTe(o[0],i);if(o.length>1&&(l+=xTe(o[1],i)/aFt(i,o[1].length)),i===10&&uFt(l,i)!==e)throw new mO(ZE);return n*l}})});var ETe=R(()=>{"use strict";p();var hFt=oe(),pFt=tO();hFt({target:"Number",stat:!0,forced:!0},{range:function(e,r,n){return new pFt(e,r,n,"number",0,1)}})});var STe=R(()=>{"use strict";p();d5()});var vO=R((M4r,ATe)=>{"use strict";p();var TTe=Rn(),dFt=hd(),gO=ko(),mFt=Br(),gFt=yg(),vFt=Yr(),ITe="Object Iterator",yFt=TTe.set,_Ft=TTe.getterFor(ITe);ATe.exports=dFt(function(e,r){var n=vFt(e);yFt(this,{type:ITe,mode:r,object:n,keys:gFt(n),index:0})},"Object",function(){for(var e=_Ft(this),r=e.keys;;){if(r===null||e.index>=r.length)return e.object=e.keys=null,gO(void 0,!0);var n=r[e.index++],i=e.object;if(mFt(i,n)){switch(e.mode){case"keys":return gO(n,!1);case"values":return gO(i[n],!1)}return gO([n,i[n]],!1)}}})});var MTe=R(()=>{"use strict";p();var xFt=oe(),bFt=vO();xFt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(e){return new bFt(e,"entries")}})});var CTe=R(()=>{"use strict";p();var wFt=oe(),EFt=vO();wFt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(e){return new EFt(e,"keys")}})});var PTe=R(()=>{"use strict";p();var SFt=oe(),TFt=vO();SFt({target:"Object",stat:!0,forced:!0},{iterateValues:function(e){return new TFt(e,"values")}})});var RTe=R(()=>{"use strict";p();p5()});var UTe=R(()=>{"use strict";p();var IFt=oe(),yO=jt(),KE=sr(),AFt=dd(),OTe=xr(),MFt=Bt(),CFt=qa(),LTe=jr(),PFt=Ns(),RFt=hr(),_O=Xi(),OFt=jn(),f$=nu(),DTe=hi(),r0=k5(),LFt=mr(),NTe=Rn(),DFt=LFt("observable"),h$="Observable",kTe="Subscription",qTe="SubscriptionObserver",p$=NTe.getterFor,d$=NTe.set,NFt=p$(h$),FTe=p$(kTe),xO=p$(qTe),jTe=function(t){this.observer=MFt(t),this.cleanup=null,this.subscriptionObserver=null};jTe.prototype={type:kTe,clean:function(){var t=this.cleanup;if(t){this.cleanup=null;try{t()}catch(e){r0(e)}}},close:function(){if(!KE){var t=this.facade,e=this.subscriptionObserver;t.closed=!0,e&&(e.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var m$=function(t,e){var r=d$(this,new jTe(t)),n;KE||(this.closed=!1);try{(n=_O(t,"start"))&&yO(n,t,this)}catch(f){r0(f)}if(!r.isClosed()){var i=r.subscriptionObserver=new g$(r);try{var o=e(i),l=o;PFt(o)||(r.cleanup=LTe(o.unsubscribe)?function(){l.unsubscribe()}:OTe(o))}catch(f){i.error(f);return}r.isClosed()&&r.clean()}};m$.prototype=f$({},{unsubscribe:function(){var e=FTe(this);e.isClosed()||(e.close(),e.clean())}});KE&&DTe(m$.prototype,"closed",{configurable:!0,get:function(){return FTe(this).isClosed()}});var g$=function(t){d$(this,{type:qTe,subscriptionState:t}),KE||(this.closed=!1)};g$.prototype=f$({},{next:function(e){var r=xO(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var i=_O(n,"next");i&&yO(i,n,e)}catch(o){r0(o)}}},error:function(e){var r=xO(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var i=_O(n,"error");i?yO(i,n,e):r0(e)}catch(o){r0(o)}r.clean()}},complete:function(){var e=xO(this).subscriptionState;if(!e.isClosed()){var r=e.observer;e.close();try{var n=_O(r,"complete");n&&yO(n,r)}catch(i){r0(i)}e.clean()}}});KE&&DTe(g$.prototype,"closed",{configurable:!0,get:function(){return xO(this).subscriptionState.isClosed()}});var zTe=function(e){CFt(this,v$),d$(this,{type:h$,subscriber:OTe(e)})},v$=zTe.prototype;f$(v$,{subscribe:function(e){var r=arguments.length;return new m$(LTe(e)?{next:e,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:RFt(e)?e:{},NFt(this).subscriber)}});OFt(v$,DFt,function(){return this});IFt({global:!0,constructor:!0,forced:!0},{Observable:zTe});AFt(h$)});var VTe=R(()=>{"use strict";p();var kFt=oe(),qFt=_r(),FFt=jt(),BTe=Bt(),jFt=rc(),zFt=ud(),UFt=Xi(),BFt=Oi(),VFt=mr(),GFt=VFt("observable");kFt({target:"Observable",stat:!0,forced:!0},{from:function(e){var r=jFt(this)?this:qFt("Observable"),n=UFt(BTe(e),GFt);if(n){var i=BTe(FFt(n,e));return i.constructor===r?i:new r(function(l){return i.subscribe(l)})}var o=zFt(e);return new r(function(l){BFt(o,function(f,d){if(l.next(f),l.closed)return d()},{IS_ITERATOR:!0,INTERRUPTED:!0}),l.complete()})}})});var $Te=R(()=>{"use strict";p();var $Ft=oe(),GTe=_r(),HFt=rc(),WFt=GTe("Array");$Ft({target:"Observable",stat:!0,forced:!0},{of:function(){for(var e=HFt(this)?this:GTe("Observable"),r=arguments.length,n=WFt(r),i=0;i<r;)n[i]=arguments[i++];return new e(function(o){for(var l=0;l<r;l++)if(o.next(n[l]),o.closed)return;o.complete()})}})});var HTe=R(()=>{"use strict";p();UTe();VTe();$Te()});var WTe=R(()=>{"use strict";p();K5()});var ZTe=R(()=>{"use strict";p();X5()});var YTe=R(()=>{"use strict";p();tV()});var KTe=R(()=>{"use strict";p();rV()});var sf=R((hUr,eIe)=>{"use strict";p();UP();zR();var JTe=_r(),ZFt=ct(),YFt=dh(),XTe=JTe("Map"),KFt=JTe("WeakMap"),XFt=ZFt([].push),QTe=YFt("metadata"),y$=QTe.store||(QTe.store=new KFt),XE=function(t,e,r){var n=y$.get(t);if(!n){if(!r)return;y$.set(t,n=new XTe)}var i=n.get(e);if(!i){if(!r)return;n.set(e,i=new XTe)}return i},QFt=function(t,e,r){var n=XE(e,r,!1);return n===void 0?!1:n.has(t)},JFt=function(t,e,r){var n=XE(e,r,!1);return n===void 0?void 0:n.get(t)},ejt=function(t,e,r,n){XE(r,n,!0).set(t,e)},tjt=function(t,e){var r=XE(t,e,!1),n=[];return r&&r.forEach(function(i,o){XFt(n,o)}),n},rjt=function(t){return t===void 0||typeof t=="symbol"?t:String(t)};eIe.exports={store:y$,getMap:XE,has:QFt,get:JFt,set:ejt,keys:tjt,toKey:rjt}});var rIe=R(()=>{"use strict";p();var njt=oe(),tIe=sf(),ijt=Bt(),ojt=tIe.toKey,ajt=tIe.set;njt({target:"Reflect",stat:!0},{defineMetadata:function(e,r,n){var i=arguments.length<4?void 0:ojt(arguments[3]);ajt(e,r,ijt(n),i)}})});var iIe=R(()=>{"use strict";p();var sjt=oe(),_$=sf(),ljt=Bt(),ujt=_$.toKey,cjt=_$.getMap,nIe=_$.store;sjt({target:"Reflect",stat:!0},{deleteMetadata:function(e,r){var n=arguments.length<3?void 0:ujt(arguments[2]),i=cjt(ljt(r),n,!1);if(i===void 0||!i.delete(e))return!1;if(i.size)return!0;var o=nIe.get(r);return o.delete(n),!!o.size||nIe.delete(r)}})});var aIe=R(()=>{"use strict";p();var fjt=oe(),x$=sf(),hjt=Bt(),pjt=bo(),djt=x$.has,mjt=x$.get,gjt=x$.toKey,oIe=function(t,e,r){var n=djt(t,e,r);if(n)return mjt(t,e,r);var i=pjt(e);return i!==null?oIe(t,i,r):void 0};fjt({target:"Reflect",stat:!0},{getMetadata:function(e,r){var n=arguments.length<3?void 0:gjt(arguments[2]);return oIe(e,hjt(r),n)}})});var cIe=R(()=>{"use strict";p();var vjt=oe(),sIe=ct(),lIe=sf(),yjt=Bt(),_jt=bo(),xjt=ZR(),bjt=sIe(xjt),wjt=sIe([].concat),Ejt=lIe.keys,Sjt=lIe.toKey,uIe=function(t,e){var r=Ejt(t,e),n=_jt(t);if(n===null)return r;var i=uIe(n,e);return i.length?r.length?bjt(wjt(r,i)):i:r};vjt({target:"Reflect",stat:!0},{getMetadataKeys:function(e){var r=arguments.length<2?void 0:Sjt(arguments[1]);return uIe(yjt(e),r)}})});var hIe=R(()=>{"use strict";p();var Tjt=oe(),fIe=sf(),Ijt=Bt(),Ajt=fIe.get,Mjt=fIe.toKey;Tjt({target:"Reflect",stat:!0},{getOwnMetadata:function(e,r){var n=arguments.length<3?void 0:Mjt(arguments[2]);return Ajt(e,Ijt(r),n)}})});var dIe=R(()=>{"use strict";p();var Cjt=oe(),pIe=sf(),Pjt=Bt(),Rjt=pIe.keys,Ojt=pIe.toKey;Cjt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(e){var r=arguments.length<2?void 0:Ojt(arguments[1]);return Rjt(Pjt(e),r)}})});var vIe=R(()=>{"use strict";p();var Ljt=oe(),mIe=sf(),Djt=Bt(),Njt=bo(),kjt=mIe.has,qjt=mIe.toKey,gIe=function(t,e,r){var n=kjt(t,e,r);if(n)return!0;var i=Njt(e);return i!==null?gIe(t,i,r):!1};Ljt({target:"Reflect",stat:!0},{hasMetadata:function(e,r){var n=arguments.length<3?void 0:qjt(arguments[2]);return gIe(e,Djt(r),n)}})});var _Ie=R(()=>{"use strict";p();var Fjt=oe(),yIe=sf(),jjt=Bt(),zjt=yIe.has,Ujt=yIe.toKey;Fjt({target:"Reflect",stat:!0},{hasOwnMetadata:function(e,r){var n=arguments.length<3?void 0:Ujt(arguments[2]);return zjt(e,jjt(r),n)}})});var bIe=R(()=>{"use strict";p();var Bjt=oe(),xIe=sf(),Vjt=Bt(),Gjt=xIe.toKey,$jt=xIe.set;Bjt({target:"Reflect",stat:!0},{metadata:function(e,r){return function(i,o){$jt(e,r,Vjt(i),Gjt(o))}}})});var wIe=R(()=>{"use strict";p();yV()});var EIe=R(()=>{"use strict";p();var Hjt=oe(),Wjt=va(),Zjt=Qo().add;Hjt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=Wjt(this),r=0,n=arguments.length;r<n;r++)Zjt(e,arguments[r]);return e}})});var SIe=R(()=>{"use strict";p();var Yjt=oe(),Kjt=va(),Xjt=Qo().remove;Yjt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=Kjt(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=Xjt(e,arguments[i]),r=r&&n;return!!r}})});var TIe=R(()=>{"use strict";p();IV()});var AIe=R((JUr,IIe)=>{"use strict";p();var Qjt=ls(),Jjt=Br(),ezt=Ns(),tzt=mr(),rzt=Sg(),nzt=tzt("iterator"),izt=Object;IIe.exports=function(t){if(ezt(t))return!1;var e=izt(t);return e[nzt]!==void 0||"@@iterator"in e||Jjt(rzt,Qjt(e))}});var Cd=R((tBr,CIe)=>{"use strict";p();var ozt=_r(),MIe=jr(),azt=AIe(),szt=hr(),lzt=ozt("Set"),uzt=function(t){return szt(t)&&typeof t.size=="number"&&MIe(t.has)&&MIe(t.keys)};CIe.exports=function(t){return uzt(t)?t:azt(t)?new lzt(t):t}});var PIe=R(()=>{"use strict";p();var czt=oe(),fzt=jt(),hzt=Cd(),pzt=TV();czt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return fzt(pzt,this,hzt(e))}})});var RIe=R(()=>{"use strict";p();var dzt=oe(),mzt=Wn(),gzt=va(),vzt=zs();dzt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var r=gzt(this),n=mzt(e,arguments.length>1?arguments[1]:void 0);return vzt(r,function(i){if(!n(i,i,r))return!1},!0)!==!1}})});var LIe=R(()=>{"use strict";p();var yzt=oe(),_zt=Wn(),xzt=va(),OIe=Qo(),bzt=zs(),wzt=OIe.Set,Ezt=OIe.add;yzt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var r=xzt(this),n=_zt(e,arguments.length>1?arguments[1]:void 0),i=new wzt;return bzt(r,function(o){n(o,o,r)&&Ezt(i,o)}),i}})});var DIe=R(()=>{"use strict";p();var Szt=oe(),Tzt=Wn(),Izt=va(),Azt=zs();Szt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var r=Izt(this),n=Tzt(e,arguments.length>1?arguments[1]:void 0),i=Azt(r,function(o){if(n(o,o,r))return{value:o}},!0);return i&&i.value}})});var kIe=R(()=>{"use strict";p();var Mzt=oe(),NIe=Qo(),Czt=GE();Mzt({target:"Set",stat:!0,forced:!0},{from:Czt(NIe.Set,NIe.add,!1)})});var qIe=R(()=>{"use strict";p();CV()});var FIe=R(()=>{"use strict";p();var Pzt=oe(),Rzt=jt(),Ozt=Cd(),Lzt=MV();Pzt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return Rzt(Lzt,this,Ozt(e))}})});var jIe=R(()=>{"use strict";p();RV()});var zIe=R(()=>{"use strict";p();var Dzt=oe(),Nzt=jt(),kzt=Cd(),qzt=PV();Dzt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return Nzt(qzt,this,kzt(e))}})});var UIe=R(()=>{"use strict";p();LV()});var BIe=R(()=>{"use strict";p();var Fzt=oe(),jzt=jt(),zzt=Cd(),Uzt=OV();Fzt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return jzt(Uzt,this,zzt(e))}})});var VIe=R(()=>{"use strict";p();NV()});var GIe=R(()=>{"use strict";p();var Bzt=oe(),Vzt=jt(),Gzt=Cd(),$zt=DV();Bzt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return Vzt($zt,this,Gzt(e))}})});var HIe=R(()=>{"use strict";p();var Hzt=oe(),$Ie=ct(),Wzt=va(),Zzt=zs(),Yzt=Mr(),Kzt=$Ie([].join),Xzt=$Ie([].push);Hzt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var r=Wzt(this),n=e===void 0?",":Yzt(e),i=[];return Zzt(r,function(o){Xzt(i,o)}),Kzt(i,n)}})});var ZIe=R(()=>{"use strict";p();var Qzt=oe(),Jzt=Wn(),e4t=va(),WIe=Qo(),t4t=zs(),r4t=WIe.Set,n4t=WIe.add;Qzt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var r=e4t(this),n=Jzt(e,arguments.length>1?arguments[1]:void 0),i=new r4t;return t4t(r,function(o){n4t(i,n(o,o,r))}),i}})});var KIe=R(()=>{"use strict";p();var i4t=oe(),YIe=Qo(),o4t=$E();i4t({target:"Set",stat:!0,forced:!0},{of:o4t(YIe.Set,YIe.add,!1)})});var XIe=R(()=>{"use strict";p();var a4t=oe(),s4t=xr(),l4t=va(),u4t=zs(),c4t=TypeError;a4t({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var r=l4t(this),n=arguments.length<2,i=n?void 0:arguments[1];if(s4t(e),u4t(r,function(o){n?(n=!1,i=o):i=e(i,o,o,r)}),n)throw new c4t("Reduce of empty set with no initial value");return i}})});var QIe=R(()=>{"use strict";p();var f4t=oe(),h4t=Wn(),p4t=va(),d4t=zs();f4t({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var r=p4t(this),n=h4t(e,arguments.length>1?arguments[1]:void 0);return d4t(r,function(i){if(n(i,i,r))return!0},!0)===!0}})});var JIe=R(()=>{"use strict";p();FV()});var eAe=R(()=>{"use strict";p();var m4t=oe(),g4t=jt(),v4t=Cd(),y4t=qV();m4t({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return g4t(y4t,this,v4t(e))}})});var tAe=R(()=>{"use strict";p();zV()});var rAe=R(()=>{"use strict";p();var _4t=oe(),x4t=jt(),b4t=Cd(),w4t=jV();_4t({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return x4t(w4t,this,b4t(e))}})});var nAe=R(()=>{"use strict";p();var E4t=oe(),S4t=Dg().charAt,T4t=oi(),I4t=fi(),A4t=Mr();E4t({target:"String",proto:!0,forced:!0},{at:function(e){var r=A4t(T4t(this)),n=r.length,i=I4t(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:S4t(r,o)}})});var b$=R((y3r,sAe)=>{"use strict";p();var aAe=ct(),M4t=_o(),iAe=Mr(),C4t=ln(),P4t=TypeError,oAe=aAe([].push),R4t=aAe([].join);sAe.exports=function(e){var r=M4t(e),n=C4t(r);if(!n)return"";for(var i=arguments.length,o=[],l=0;;){var f=r[l++];if(f===void 0)throw new P4t("Incorrect template");if(oAe(o,iAe(f)),l===n)return R4t(o,"");l<i&&oAe(o,iAe(arguments[l]))}}});var lAe=R(()=>{"use strict";p();var O4t=oe(),L4t=b$();O4t({target:"String",stat:!0,forced:!0},{cooked:L4t})});var pAe=R(()=>{"use strict";p();var D4t=oe(),N4t=hd(),uAe=ko(),k4t=oi(),q4t=Mr(),cAe=Rn(),fAe=Dg(),F4t=fAe.codeAt,j4t=fAe.charAt,hAe="String Iterator",z4t=cAe.set,U4t=cAe.getterFor(hAe),B4t=N4t(function(e){z4t(this,{type:hAe,string:e,index:0})},"String",function(){var e=U4t(this),r=e.string,n=e.index,i;return n>=r.length?uAe(void 0,!0):(i=j4t(r,n),e.index+=i.length,uAe({codePoint:F4t(i,0),position:n},!1))});D4t({target:"String",proto:!0,forced:!0},{codePoints:function(){return new B4t(q4t(k4t(this)))}})});var lf=R((I3r,dAe)=>{"use strict";p();var bO=ct(),wO=WeakMap.prototype;dAe.exports={WeakMap,set:bO(wO.set),get:bO(wO.get),has:bO(wO.has),remove:bO(wO.delete)}});var EAe=R((M3r,wAe)=>{"use strict";p();var V4t=_r(),EO=ct(),G4t=String.fromCharCode,$4t=V4t("String","fromCodePoint"),w$=EO("".charAt),xAe=EO("".charCodeAt),mAe=EO("".indexOf),gAe=EO("".slice),S$=48,bAe=57,vAe=97,H4t=102,yAe=65,W4t=70,_Ae=function(t,e){var r=xAe(t,e);return r>=S$&&r<=bAe},E$=function(t,e,r){if(r>=t.length)return-1;for(var n=0;e<r;e++){var i=Z4t(xAe(t,e));if(i===-1)return-1;n=n*16+i}return n},Z4t=function(t){return t>=S$&&t<=bAe?t-S$:t>=vAe&&t<=H4t?t-vAe+10:t>=yAe&&t<=W4t?t-yAe+10:-1};wAe.exports=function(t){for(var e="",r=0,n=0,i;(n=mAe(t,"\\",n))>-1;){if(e+=gAe(t,r,n),++n===t.length)return;var o=w$(t,n++);switch(o){case"b":e+="\b";break;case"t":e+="\t";break;case"n":e+=`
`;break;case"v":e+="\x0B";break;case"f":e+="\f";break;case"r":e+="\r";break;case"\r":n<t.length&&w$(t,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(_Ae(t,n))return;e+="\0";break;case"x":if(i=E$(t,n,n+2),i===-1)return;n+=2,e+=G4t(i);break;case"u":if(n<t.length&&w$(t,n)==="{"){var l=mAe(t,"}",++n);if(l===-1)return;i=E$(t,n,l),n=l+1}else i=E$(t,n,n+4),n+=4;if(i===-1||i>1114111)return;e+=$4t(i);break;default:if(_Ae(o,0))return;e+=o}r=n}return e+gAe(t,r)}});var LAe=R(()=>{"use strict";p();var Y4t=Eh(),K4t=oe(),X4t=A1(),SO=ct(),MAe=ga(),CAe=Bt(),Q4t=Yr(),J4t=jr(),eUt=ln(),tUt=ti().f,rUt=qs(),TO=lf(),nUt=b$(),iUt=EAe(),PAe=Mg(),T$=new TO.WeakMap,oUt=TO.get,aUt=TO.has,sUt=TO.set,I$=Array,QE=TypeError,SAe=Object.freeze||Object,lUt=Object.isFrozen,uUt=Math.min,TAe=SO("".charAt),RAe=SO("".slice),cUt=SO("".split),IAe=SO(/./.exec),fUt=/([\n\u2028\u2029]|\r\n?)/g,hUt=RegExp("^["+PAe+"]*"),pUt=RegExp("[^"+PAe+"]"),AAe="Invalid tag",dUt="Invalid opening line",mUt="Invalid closing line",gUt=function(t){var e=t.raw;if(Y4t&&!lUt(e))throw new QE("Raw template should be frozen");if(aUt(T$,e))return oUt(T$,e);var r=vUt(e),n=_Ut(r);return tUt(n,"raw",{value:SAe(r)}),SAe(n),sUt(T$,e,n),n},vUt=function(t){var e=Q4t(t),r=eUt(e),n=I$(r),i=I$(r),o=0,l,f,d,v;if(!r)throw new QE(AAe);for(;o<r;o++){var x=e[o];if(typeof x=="string")n[o]=cUt(x,fUt);else throw new QE(AAe)}for(o=0;o<r;o++){var b=o+1===r;if(l=n[o],o===0){if(l.length===1||l[0].length>0)throw new QE(dUt);l[1]=""}if(b){if(l.length===1||IAe(pUt,l[l.length-1]))throw new QE(mUt);l[l.length-2]="",l[l.length-1]=""}for(var A=2;A<l.length;A+=2){var P=l[A],N=A+1===l.length&&!b,j=IAe(hUt,P)[0];if(!N&&j.length===P.length){l[A]="";continue}f=yUt(j,f)}}var D=f?f.length:0;for(o=0;o<r;o++){for(l=n[o],d=l[0],v=1;v<l.length;v+=2)d+=l[v]+RAe(l[v+1],D);i[o]=d}return i},yUt=function(t,e){if(e===void 0||t===e)return t;for(var r=0,n=uUt(t.length,e.length);r<n&&TAe(t,r)===TAe(e,r);r++);return RAe(t,0,r)},_Ut=function(t){for(var e=0,r=t.length,n=I$(r);e<r;e++)n[e]=iUt(t[e]);return n},OAe=function(t){return X4t(function(e){var r=rUt(arguments);return r[0]=gUt(CAe(e)),MAe(t,this,r)},"")},xUt=OAe(nUt);K4t({target:"String",stat:!0,forced:!0},{dedent:function(e){return CAe(e),J4t(e)?OAe(e):MAe(xUt,this,arguments)}})});var DAe=R(()=>{"use strict";p();VV()});var NAe=R(()=>{"use strict";p();XV()});var kAe=R(()=>{"use strict";p();sG()});var qAe=R(()=>{"use strict";p();dG()});var FAe=R(()=>{"use strict";p();var bUt=Ft(),wUt=Ri(),EUt=ti().f,SUt=Yo().f,A$=bUt.Symbol;wUt("asyncDispose");A$&&(JE=SUt(A$,"asyncDispose"),JE.enumerable&&JE.configurable&&JE.writable&&EUt(A$,"asyncDispose",{value:JE.value,enumerable:!1,configurable:!1,writable:!1}));var JE});var jAe=R(()=>{"use strict";p();var TUt=Ri();TUt("customMatcher")});var zAe=R(()=>{"use strict";p();var IUt=Ft(),AUt=Ri(),MUt=ti().f,CUt=Yo().f,M$=IUt.Symbol;AUt("dispose");M$&&(eS=CUt(M$,"dispose"),eS.enumerable&&eS.configurable&&eS.writable&&MUt(M$,"dispose",{value:eS.value,enumerable:!1,configurable:!1,writable:!1}));var eS});var P$=R((e5r,UAe)=>{"use strict";p();var PUt=_r(),RUt=ct(),C$=PUt("Symbol"),OUt=C$.keyFor,LUt=RUt(C$.prototype.valueOf);UAe.exports=C$.isRegisteredSymbol||function(e){try{return OUt(LUt(e))!==void 0}catch(r){return!1}}});var BAe=R(()=>{"use strict";p();var DUt=oe(),NUt=P$();DUt({target:"Symbol",stat:!0},{isRegisteredSymbol:NUt})});var VAe=R(()=>{"use strict";p();var kUt=oe(),qUt=P$();kUt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:qUt})});var L$=R((l5r,YAe)=>{"use strict";p();var FUt=dh(),WAe=_r(),jUt=ct(),zUt=ph(),UUt=mr(),AO=WAe("Symbol"),GAe=AO.isWellKnownSymbol,ZAe=WAe("Object","getOwnPropertyNames"),BUt=jUt(AO.prototype.valueOf),$Ae=FUt("wks");for(IO=0,R$=ZAe(AO),HAe=R$.length;IO<HAe;IO++)try{O$=R$[IO],zUt(AO[O$])&&UUt(O$)}catch(t){}var O$,IO,R$,HAe;YAe.exports=function(e){if(GAe&&GAe(e))return!0;try{for(var r=BUt(e),n=0,i=ZAe($Ae),o=i.length;n<o;n++)if($Ae[i[n]]==r)return!0}catch(l){}return!1}});var KAe=R(()=>{"use strict";p();var VUt=oe(),GUt=L$();VUt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:GUt})});var XAe=R(()=>{"use strict";p();var $Ut=oe(),HUt=L$();$Ut({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:HUt})});var QAe=R(()=>{"use strict";p();var WUt=Ri();WUt("matcher")});var JAe=R(()=>{"use strict";p();var ZUt=Ri();ZUt("metadata")});var eMe=R(()=>{"use strict";p();var YUt=Ri();YUt("metadataKey")});var tMe=R(()=>{"use strict";p();var KUt=Ri();KUt("observable")});var rMe=R(()=>{"use strict";p();var XUt=Ri();XUt("patternMatch")});var nMe=R(()=>{"use strict";p();var QUt=Ri();QUt("replaceAll")});var oMe=R(()=>{"use strict";p();var JUt=_r(),eBt=cE(),tBt=a6(),iMe=Hr(),rBt=yh(),nBt=iMe.aTypedArrayConstructor,iBt=iMe.exportTypedArrayStaticMethod;iBt("fromAsync",function(e){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(JUt("Promise"))(function(l){eBt(r),l(tBt(e,i,o))}).then(function(l){return rBt(nBt(r),l)})},!0)});var aMe=R(()=>{"use strict";p();CG()});var lMe=R(()=>{"use strict";p();var sMe=Hr(),oBt=Ji().filterReject,aBt=AR(),sBt=sMe.aTypedArray,lBt=sMe.exportTypedArrayMethod;lBt("filterOut",function(e){var r=oBt(sBt(this),e,arguments.length>1?arguments[1]:void 0);return aBt(this,r)},!0)});var cMe=R(()=>{"use strict";p();var uMe=Hr(),uBt=Ji().filterReject,cBt=AR(),fBt=uMe.aTypedArray,hBt=uMe.exportTypedArrayMethod;hBt("filterReject",function(e){var r=uBt(fBt(this),e,arguments.length>1?arguments[1]:void 0);return cBt(this,r)},!0)});var fMe=R(()=>{"use strict";p();PG()});var hMe=R(()=>{"use strict";p();RG()});var pMe=R(()=>{"use strict";p();var D$=Hr(),pBt=HR(),dBt=D$.aTypedArray,mBt=D$.getTypedArrayConstructor,gBt=D$.exportTypedArrayMethod;gBt("groupBy",function(e){var r=arguments.length>1?arguments[1]:void 0;return pBt(dBt(this),e,r,mBt)},!0)});var dMe=R(()=>{"use strict";p();$G()});var mMe=R(()=>{"use strict";p();HG()});var gMe=R(()=>{"use strict";p();var N$=Hr(),vBt=ln(),yBt=wR(),_Bt=ec(),xBt=AE(),bBt=fi(),wBt=N$.aTypedArray,EBt=N$.getTypedArrayConstructor,SBt=N$.exportTypedArrayMethod,TBt=Math.max,IBt=Math.min;SBt("toSpliced",function(e,r){var n=wBt(this),i=EBt(n),o=vBt(n),l=_Bt(e,o),f=arguments.length,d=0,v,x,b,A,P,N,j;if(f===0)v=x=0;else if(f===1)v=0,x=o-l;else if(x=IBt(TBt(bBt(r),0),o-l),v=f-2,v){A=new i(v),b=yBt(A);for(var D=2;D<f;D++)P=arguments[D],A[D-2]=b?xBt(P):+P}for(N=o+v-x,j=new i(N);d<l;d++)j[d]=n[d];for(;d<l+v;d++)j[d]=A[d-l];for(;d<N;d++)j[d]=n[d+x-v];return j},!0)});var vMe=R(()=>{"use strict";p();var ABt=ct(),k$=Hr(),MBt=yh(),CBt=ZR(),PBt=k$.aTypedArray,RBt=k$.getTypedArrayConstructor,OBt=k$.exportTypedArrayMethod,LBt=ABt(CBt);OBt("uniqueBy",function(e){return PBt(this),MBt(RBt(this),LBt(this,e))},!0)});var yMe=R(()=>{"use strict";p();ZG()});var q$=R((gVr,_Me)=>{"use strict";p();var DBt=hr(),NBt=String,kBt=TypeError;_Me.exports=function(t){if(t===void 0||DBt(t))return t;throw new kBt(NBt(t)+" is not an object or undefined")}});var tS=R((yVr,SMe)=>{"use strict";p();var EMe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",xMe=EMe+"+/",bMe=EMe+"-_",wMe=function(t){for(var e={},r=0;r<64;r++)e[t.charAt(r)]=r;return e};SMe.exports={i2c:xMe,c2i:wMe(xMe),i2cUrl:bMe,c2iUrl:wMe(bMe)}});var F$=R((xVr,TMe)=>{"use strict";p();var qBt=TypeError;TMe.exports=function(t){var e=t&&t.alphabet;if(e===void 0||e==="base64"||e==="base64url")return e||"base64";throw new qBt("Incorrect `alphabet` option")}});var B$=R((wVr,MMe)=>{"use strict";p();var IMe=Ft(),FBt=ct(),jBt=q$(),zBt=wE(),UBt=Br(),AMe=tS(),BBt=F$(),VBt=T_(),GBt=AMe.c2i,$Bt=AMe.c2iUrl,Pd=IMe.SyntaxError,HBt=IMe.TypeError,zg=FBt("".charAt),j$=function(t,e){for(var r=t.length;e<r;e++){var n=zg(t,e);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return e},z$=function(t,e,r){var n=t.length;n<4&&(t+=n===2?"AA":"A");var i=(e[zg(t,0)]<<18)+(e[zg(t,1)]<<12)+(e[zg(t,2)]<<6)+e[zg(t,3)],o=[i>>16&255,i>>8&255,i&255];if(n===2){if(r&&o[1]!==0)throw new Pd("Extra bits");return[o[0]]}if(n===3){if(r&&o[2]!==0)throw new Pd("Extra bits");return[o[0],o[1]]}return o},U$=function(t,e,r){for(var n=e.length,i=0;i<n;i++)t[r+i]=e[i];return r+n};MMe.exports=function(t,e,r,n){zBt(t),jBt(e);var i=BBt(e)==="base64"?GBt:$Bt,o=e?e.lastChunkHandling:void 0;if(o===void 0&&(o="loose"),o!=="loose"&&o!=="strict"&&o!=="stop-before-partial")throw new HBt("Incorrect `lastChunkHandling` option");r&&VBt(r.buffer);var l=r||[],f=0,d=0,v="",x=0;if(n)for(;;){if(x=j$(t,x),x===t.length){if(v.length>0){if(o==="stop-before-partial")break;if(o==="loose"){if(v.length===1)throw new Pd("Malformed padding: exactly one additional character");f=U$(l,z$(v,i,!1),f)}else throw new Pd("Missing padding")}d=t.length;break}var b=zg(t,x);if(++x,b==="="){if(v.length<2)throw new Pd("Padding is too early");if(x=j$(t,x),v.length===2){if(x===t.length){if(o==="stop-before-partial")break;throw new Pd("Malformed padding: only one =")}zg(t,x)==="="&&(++x,x=j$(t,x))}if(x<t.length)throw new Pd("Unexpected character after padding");f=U$(l,z$(v,i,o==="strict"),f),d=t.length;break}if(!UBt(i,b))throw new Pd("Unexpected character");var A=n-f;if(A===1&&v.length===2||A===2&&v.length===3||(v+=b,v.length===4&&(f=U$(l,z$(v,i,!1),f),v="",d=x,f===n)))break}return{bytes:l,read:d,written:f}}});var PMe=R(()=>{"use strict";p();var WBt=oe(),ZBt=Ft(),YBt=yh(),KBt=B$(),CMe=ZBt.Uint8Array;CMe&&WBt({target:"Uint8Array",stat:!0},{fromBase64:function(e){var r=KBt(e,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return YBt(CMe,r.bytes)}})});var G$=R((AVr,DMe)=>{"use strict";p();var V$=Ft(),OMe=ct(),XBt=V$.Uint8Array,RMe=V$.SyntaxError,QBt=V$.parseInt,JBt=Math.min,LMe=/[^\da-f]/i,e3t=OMe(LMe.exec),t3t=OMe("".slice);DMe.exports=function(t,e){var r=t.length;if(r%2!==0)throw new RMe("String should be an even number of characters");for(var n=e?JBt(e.length,r/2):r/2,i=e||new XBt(n),o=0,l=0;l<n;){var f=t3t(t,o,o+=2);if(e3t(LMe,f))throw new RMe("String should only contain hex characters");i[l++]=QBt(f,16)}return{bytes:i,read:o}}});var NMe=R(()=>{"use strict";p();var r3t=oe(),n3t=Ft(),i3t=wE(),o3t=G$();n3t.Uint8Array&&r3t({target:"Uint8Array",stat:!0},{fromHex:function(e){return o3t(i3t(e)).bytes}})});var rS=R((OVr,kMe)=>{"use strict";p();var a3t=ls(),s3t=TypeError;kMe.exports=function(t){if(a3t(t)==="Uint8Array")return t;throw new s3t("Argument is not an Uint8Array")}});var qMe=R(()=>{"use strict";p();var l3t=oe(),u3t=Ft(),c3t=B$(),f3t=rS(),MO=u3t.Uint8Array,h3t=!MO||!MO.prototype.setFromBase64||!function(){var t=new MO([255,255,255,255,255]);try{t.setFromBase64("MjYyZg===")}catch(e){return t[0]===50&&t[1]===54&&t[2]===50&&t[3]===255&&t[4]===255}}();MO&&l3t({target:"Uint8Array",proto:!0,forced:h3t},{setFromBase64:function(e){f3t(this);var r=c3t(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var FMe=R(()=>{"use strict";p();var p3t=oe(),d3t=Ft(),m3t=wE(),g3t=rS(),v3t=T_(),y3t=G$();d3t.Uint8Array&&p3t({target:"Uint8Array",proto:!0},{setFromHex:function(e){g3t(this),m3t(e),v3t(this.buffer);var r=y3t(e,this).read;return{read:r,written:r/2}}})});var zMe=R(()=>{"use strict";p();var _3t=oe(),x3t=Ft(),b3t=ct(),w3t=q$(),E3t=rS(),S3t=T_(),jMe=tS(),T3t=F$(),I3t=jMe.i2c,A3t=jMe.i2cUrl,M3t=b3t("".charAt);x3t.Uint8Array&&_3t({target:"Uint8Array",proto:!0},{toBase64:function(){var e=E3t(this),r=arguments.length?w3t(arguments[0]):void 0,n=T3t(r)==="base64"?I3t:A3t,i=!!r&&!!r.omitPadding;S3t(this.buffer);for(var o="",l=0,f=e.length,d,v=function(x){return M3t(n,d>>6*x&63)};l+2<f;l+=3)d=(e[l]<<16)+(e[l+1]<<8)+e[l+2],o+=v(3)+v(2)+v(1)+v(0);return l+2===f?(d=(e[l]<<16)+(e[l+1]<<8),o+=v(3)+v(2)+v(1)+(i?"":"=")):l+1===f&&(d=e[l]<<16,o+=v(3)+v(2)+(i?"":"==")),o}})});var UMe=R(()=>{"use strict";p();var C3t=oe(),P3t=Ft(),R3t=ct(),O3t=rS(),L3t=T_(),D3t=R3t(1 .toString);P3t.Uint8Array&&C3t({target:"Uint8Array",proto:!0},{toHex:function(){O3t(this),L3t(this.buffer);for(var e="",r=0,n=this.length;r<n;r++){var i=D3t(this[r],16);e+=i.length===1?"0"+i:i}return e}})});var nS=R((HVr,BMe)=>{"use strict";p();var N3t=lf().has;BMe.exports=function(t){return N3t(t),t}});var VMe=R(()=>{"use strict";p();var k3t=oe(),q3t=nS(),F3t=lf().remove;k3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=q3t(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=F3t(e,arguments[i]),r=r&&n;return!!r}})});var $Me=R(()=>{"use strict";p();var j3t=oe(),GMe=lf(),z3t=GE();j3t({target:"WeakMap",stat:!0,forced:!0},{from:z3t(GMe.WeakMap,GMe.set,!0)})});var WMe=R(()=>{"use strict";p();var U3t=oe(),HMe=lf(),B3t=$E();U3t({target:"WeakMap",stat:!0,forced:!0},{of:B3t(HMe.WeakMap,HMe.set,!0)})});var YMe=R(()=>{"use strict";p();var V3t=oe(),G3t=nS(),$$=lf(),$3t=$$.get,H3t=$$.has,ZMe=$$.set;V3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(e,r){var n=G3t(this),i,o;return H3t(n,e)?(i=$3t(n,e),"update"in r&&(i=r.update(i,e,n),ZMe(n,e,i)),i):(o=r.insert(e,n),ZMe(n,e,o),o)}})});var KMe=R(()=>{"use strict";p();var W3t=oe(),Z3t=nS(),H$=lf(),Y3t=H$.get,K3t=H$.has,X3t=H$.set;W3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(e,r){return K3t(Z3t(this),e)?Y3t(this,e):(X3t(this,e,r),r)}})});var JMe=R((uGr,QMe)=>{"use strict";p();var W$=lf(),XMe=new W$.WeakMap,Q3t=W$.set,J3t=W$.remove;QMe.exports=function(t){return Q3t(XMe,t,1),J3t(XMe,t),t}});var eCe=R(()=>{"use strict";p();var e5t=oe(),t5t=xr(),r5t=nS(),n5t=JMe(),Z$=lf(),i5t=Z$.get,o5t=Z$.has,a5t=Z$.set;e5t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(e,r){if(r5t(this),n5t(e),t5t(r),o5t(this,e))return i5t(this,e);var n=r(e);return a5t(this,e,n),n}})});var tCe=R(()=>{"use strict";p();var s5t=oe(),l5t=pO();s5t({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:l5t})});var n0=R((vGr,rCe)=>{"use strict";p();var Y$=ct(),K$=WeakSet.prototype;rCe.exports={WeakSet,add:Y$(K$.add),has:Y$(K$.has),remove:Y$(K$.delete)}});var X$=R((_Gr,nCe)=>{"use strict";p();var u5t=n0().has;nCe.exports=function(t){return u5t(t),t}});var iCe=R(()=>{"use strict";p();var c5t=oe(),f5t=X$(),h5t=n0().add;c5t({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=f5t(this),r=0,n=arguments.length;r<n;r++)h5t(e,arguments[r]);return e}})});var oCe=R(()=>{"use strict";p();var p5t=oe(),d5t=X$(),m5t=n0().remove;p5t({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=d5t(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=m5t(e,arguments[i]),r=r&&n;return!!r}})});var sCe=R(()=>{"use strict";p();var g5t=oe(),aCe=n0(),v5t=GE();g5t({target:"WeakSet",stat:!0,forced:!0},{from:v5t(aCe.WeakSet,aCe.add,!1)})});var uCe=R(()=>{"use strict";p();var y5t=oe(),lCe=n0(),_5t=$E();y5t({target:"WeakSet",stat:!0,forced:!0},{of:_5t(lCe.WeakSet,lCe.add,!1)})});var gCe=R(()=>{"use strict";p();var x5t=oe(),b5t=Ft(),hCe=_r(),Q$=ct(),w5t=jt(),CO=yt(),E5t=Mr(),S5t=Tl(),cCe=tS().c2i,pCe=/[^\d+/a-z]/i,T5t=/[\t\n\f\r ]+/g,I5t=/[=]{1,2}$/,Ug=hCe("atob"),A5t=String.fromCharCode,M5t=Q$("".charAt),fCe=Q$("".replace),C5t=Q$(pCe.exec),i0=!!Ug&&!CO(function(){return Ug("aGk=")!=="hi"}),dCe=i0&&CO(function(){return Ug(" ")!==""}),mCe=i0&&!CO(function(){Ug("a")}),P5t=i0&&!CO(function(){Ug()}),R5t=i0&&Ug.length!==1,O5t=!i0||dCe||mCe||P5t||R5t;x5t({global:!0,bind:!0,enumerable:!0,forced:O5t},{atob:function(e){if(S5t(arguments.length,1),i0&&!dCe&&!mCe)return w5t(Ug,b5t,e);var r=fCe(E5t(e),T5t,""),n="",i=0,o=0,l,f,d;if(r.length%4===0&&(r=fCe(r,I5t,"")),l=r.length,l%4===1||C5t(pCe,r))throw new(hCe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;i<l;)f=M5t(r,i++),d=o%4?d*64+cCe[f]:cCe[f],o++%4&&(n+=A5t(255&d>>(-2*o&6)));return n}})});var bCe=R(()=>{"use strict";p();var L5t=oe(),D5t=Ft(),_Ce=_r(),xCe=ct(),N5t=jt(),J$=yt(),vCe=Mr(),k5t=Tl(),q5t=tS().i2c,o0=_Ce("btoa"),yCe=xCe("".charAt),F5t=xCe("".charCodeAt),iS=!!o0&&!J$(function(){return o0("hi")!=="aGk="}),j5t=iS&&!J$(function(){o0()}),z5t=iS&&J$(function(){return o0(null)!=="bnVsbA=="}),U5t=iS&&o0.length!==1;L5t({global:!0,bind:!0,enumerable:!0,forced:!iS||j5t||z5t||U5t},{btoa:function(e){if(k5t(arguments.length,1),iS)return N5t(o0,D5t,vCe(e));for(var r=vCe(e),n="",i=0,o=q5t,l,f;yCe(r,i)||(o="=",i%1);){if(f=F5t(r,i+=3/4),f>255)throw new(_Ce("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");l=l<<8|f,n+=yCe(o,63&l>>8-i%1*8)}return n}})});var eH=R((jGr,wCe)=>{"use strict";p();wCe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var rH=R((UGr,SCe)=>{"use strict";p();var B5t=E1(),tH=B5t("span").classList,ECe=tH&&tH.constructor&&tH.constructor.prototype;SCe.exports=ECe===Object.prototype?void 0:ECe});var MCe=R(()=>{"use strict";p();var TCe=Ft(),ICe=eH(),V5t=rH(),nH=qU(),G5t=xo(),ACe=function(t){if(t&&t.forEach!==nH)try{G5t(t,"forEach",nH)}catch(e){t.forEach=nH}};for(PO in ICe)ICe[PO]&&ACe(TCe[PO]&&TCe[PO].prototype);var PO;ACe(V5t)});var LCe=R(()=>{"use strict";p();var CCe=Ft(),RCe=eH(),$5t=rH(),oS=V1(),PCe=xo(),H5t=us(),W5t=mr(),iH=W5t("iterator"),oH=oS.values,OCe=function(t,e){if(t){if(t[iH]!==oH)try{PCe(t,iH,oH)}catch(n){t[iH]=oH}if(H5t(t,e,!0),RCe[e]){for(var r in oS)if(t[r]!==oS[r])try{PCe(t,r,oS[r])}catch(n){t[r]=oS[r]}}}};for(RO in RCe)OCe(CCe[RO]&&CCe[RO].prototype,RO);var RO;OCe($5t,"DOMTokenList")});var aH=R((YGr,DCe)=>{"use strict";p();DCe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var $Ce=R(()=>{"use strict";p();var Z5t=oe(),DO=_r(),Y5t=DB(),hH=yt(),K5t=Qi(),pH=Ds(),NO=ti().f,X5t=jn(),OO=hi(),LO=Br(),Q5t=qa(),J5t=Bt(),qCe=xU(),NCe=wg(),a0=aH(),eVt=tP(),FCe=Rn(),dH=sr(),jCe=pn(),s0="DOMException",fH="DATA_CLONE_ERR",qO=DO("Error"),Ih=DO(s0)||function(){try{var t=DO("MessageChannel")||Y5t("worker_threads").MessageChannel;new t().port1.postMessage(new WeakMap)}catch(e){if(e.name===fH&&e.code===25)return e.constructor}}(),tVt=Ih&&Ih.prototype,zCe=qO.prototype,rVt=FCe.set,nVt=FCe.getterFor(s0),iVt="stack"in new qO(s0),UCe=function(t){return LO(a0,t)&&a0[t].m?a0[t].c:0},mH=function(){Q5t(this,sS);var e=arguments.length,r=NCe(e<1?void 0:arguments[0]),n=NCe(e<2?void 0:arguments[1],"Error"),i=UCe(n);if(rVt(this,{type:s0,name:n,message:r,code:i}),dH||(this.name=n,this.message=r,this.code=i),iVt){var o=new qO(r);o.name=s0,NO(this,"stack",pH(1,eVt(o.stack,1)))}},sS=mH.prototype=K5t(zCe),BCe=function(t){return{enumerable:!0,configurable:!0,get:t}},sH=function(t){return BCe(function(){return nVt(this)[t]})};dH&&(OO(sS,"code",sH("code")),OO(sS,"message",sH("message")),OO(sS,"name",sH("name")));NO(sS,"constructor",pH(1,mH));var FO=hH(function(){return!(new Ih instanceof qO)}),VCe=FO||hH(function(){return zCe.toString!==qCe||String(new Ih(1,2))!=="2: 1"}),GCe=FO||hH(function(){return new Ih(1,"DataCloneError").code!==25}),oVt=FO||Ih[fH]!==25||tVt[fH]!==25,kCe=jCe?VCe||GCe||oVt:FO;Z5t({global:!0,constructor:!0,forced:kCe},{DOMException:kCe?mH:Ih});var lS=DO(s0),kO=lS.prototype;VCe&&(jCe||Ih===lS)&&X5t(kO,"toString",qCe);GCe&&dH&&Ih===lS&&OO(kO,"code",BCe(function(){return UCe(J5t(this).name)}));for(lH in a0)LO(a0,lH)&&(uH=a0[lH],aS=uH.s,cH=pH(6,uH.c),LO(lS,aS)||NO(lS,aS,cH),LO(kO,aS)||NO(kO,aS,cH));var uH,aS,cH,lH});var QCe=R(()=>{"use strict";p();var aVt=oe(),sVt=Ft(),EH=_r(),bH=Ds(),wH=ti().f,HCe=Br(),lVt=qa(),uVt=ld(),WCe=wg(),gH=aH(),cVt=tP(),fVt=sr(),KCe=pn(),cS="DOMException",XCe=EH("Error"),fS=EH(cS),SH=function(){lVt(this,hVt);var e=arguments.length,r=WCe(e<1?void 0:arguments[0]),n=WCe(e<2?void 0:arguments[1],"Error"),i=new fS(r,n),o=new XCe(r);return o.name=cS,wH(i,"stack",bH(1,cVt(o.stack,1))),uVt(i,this,SH),i},hVt=SH.prototype=fS.prototype,pVt="stack"in new XCe(cS),dVt="stack"in new fS(1,2),vH=fS&&fVt&&Object.getOwnPropertyDescriptor(sVt,cS),mVt=!!vH&&!(vH.writable&&vH.configurable),ZCe=pVt&&!mVt&&!dVt;aVt({global:!0,constructor:!0,forced:KCe||ZCe},{DOMException:ZCe?SH:fS});var uS=EH(cS),YCe=uS.prototype;if(YCe.constructor!==uS){KCe||wH(YCe,"constructor",bH(1,uS));for(yH in gH)HCe(gH,yH)&&(_H=gH[yH],xH=_H.s,HCe(uS,xH)||wH(uS,xH,bH(6,_H.c)))}var _H,xH,yH});var ePe=R(()=>{"use strict";p();var gVt=_r(),vVt=us(),JCe="DOMException";vVt(gVt(JCe),JCe)});var rPe=R(()=>{"use strict";p();var yVt=oe(),_Vt=Ft(),tPe=dE().clear;yVt({global:!0,bind:!0,enumerable:!0,forced:_Vt.clearImmediate!==tPe},{clearImmediate:tPe})});var jO=R((u6r,iPe)=>{"use strict";p();var nPe=Ft(),xVt=ga(),bVt=jr(),wVt=H1(),EVt=Ku(),SVt=qs(),TVt=Tl(),IVt=nPe.Function,AVt=/MSIE .\./.test(EVt)||wVt==="BUN"&&function(){var t=nPe.Bun.version.split(".");return t.length<3||t[0]==="0"&&(t[1]<3||t[1]==="3"&&t[2]==="0")}();iPe.exports=function(t,e){var r=e?2:1;return AVt?function(n,i){var o=TVt(arguments.length,1)>r,l=bVt(n)?n:IVt(n),f=o?SVt(arguments,r):[],d=o?function(){xVt(l,this,f)}:l;return e?t(d,i):t(d)}:t}});var lPe=R(()=>{"use strict";p();var MVt=oe(),sPe=Ft(),oPe=dE().set,CVt=jO(),aPe=sPe.setImmediate?CVt(oPe,!1):oPe;MVt({global:!0,bind:!0,enumerable:!0,forced:sPe.setImmediate!==aPe},{setImmediate:aPe})});var uPe=R(()=>{"use strict";p();rPe();lPe()});var cPe=R(()=>{"use strict";p();var PVt=oe(),RVt=Ft(),OVt=N5(),LVt=xr(),DVt=Tl(),NVt=yt(),kVt=sr(),qVt=NVt(function(){return kVt&&Object.getOwnPropertyDescriptor(RVt,"queueMicrotask").value.length!==1});PVt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:qVt},{queueMicrotask:function(e){DVt(arguments.length,1),OVt(LVt(e))}})});var hPe=R(()=>{"use strict";p();var FVt=oe(),Rd=Ft(),jVt=hi(),zVt=sr(),UVt=TypeError,BVt=Object.defineProperty,fPe=Rd.self!==Rd;try{zVt?(zO=Object.getOwnPropertyDescriptor(Rd,"self"),(fPe||!zO||!zO.get||!zO.enumerable)&&jVt(Rd,"self",{get:function(){return Rd},set:function(e){if(this!==Rd)throw new UVt("Illegal invocation");BVt(Rd,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):FVt({global:!0,simple:!0,forced:fPe},{self:Rd})}catch(t){}var zO});var EPe=R(()=>{"use strict";p();var VVt=pn(),GVt=oe(),ba=Ft(),pS=_r(),mS=ct(),PH=yt(),$Vt=nd(),u0=jr(),HVt=rc(),WVt=Ns(),$O=hr(),ZVt=ph(),YVt=Oi(),mPe=Bt(),VO=ls(),KVt=Br(),XVt=tu(),TH=xo(),UO=ln(),QVt=Tl(),JVt=j_(),HO=qo(),RH=Qo(),eGt=zs(),pPe=UB(),tGt=gU(),OH=OP(),hS=ba.Object,rGt=ba.Array,gPe=ba.Date,vPe=ba.Error,nGt=ba.TypeError,iGt=ba.PerformanceMark,Bg=pS("DOMException"),MH=HO.Map,LH=HO.has,yPe=HO.get,GO=HO.set,_Pe=RH.Set,xPe=RH.add,oGt=RH.has,aGt=pS("Object","keys"),sGt=mS([].push),lGt=mS((!0).valueOf),uGt=mS(1 .valueOf),cGt=mS("".valueOf),fGt=mS(gPe.prototype.getTime),CH=$Vt("structuredClone"),dS="DataCloneError",BO="Transferring",bPe=function(t){return!PH(function(){var e=new ba.Set([7]),r=t(e),n=t(hS(7));return r===e||!r.has(7)||!$O(n)||+n!=7})&&t},dPe=function(t,e){return!PH(function(){var r=new e,n=t({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof e&&n.a.stack===r.stack)})},hGt=function(t){return!PH(function(){var e=t(new ba.AggregateError([1],CH,{cause:3}));return e.name!=="AggregateError"||e.errors[0]!==1||e.message!==CH||e.cause!==3})},l0=ba.structuredClone,pGt=VVt||!dPe(l0,vPe)||!dPe(l0,Bg)||!hGt(l0),dGt=!l0&&bPe(function(t){return new iGt(CH,{detail:t}).detail}),Ah=bPe(l0)||dGt,IH=function(t){throw new Bg("Uncloneable type: "+t,dS)},Vs=function(t,e){throw new Bg((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",dS)},AH=function(t,e){return Ah||Vs(e),Ah(t)},mGt=function(){var t;try{t=new ba.DataTransfer}catch(e){try{t=new ba.ClipboardEvent("").clipboardData}catch(r){}}return t&&t.items&&t.files?t:null},wPe=function(t,e,r){if(LH(e,t))return yPe(e,t);var n=r||VO(t),i,o,l,f,d,v;if(n==="SharedArrayBuffer")Ah?i=Ah(t):i=t;else{var x=ba.DataView;!x&&!u0(t.slice)&&Vs("ArrayBuffer");try{if(u0(t.slice)&&!t.resizable)i=t.slice(0);else for(o=t.byteLength,l=("maxByteLength"in t)?{maxByteLength:t.maxByteLength}:void 0,i=new ArrayBuffer(o,l),f=new x(t),d=new x(i),v=0;v<o;v++)d.setUint8(v,f.getUint8(v))}catch(b){throw new Bg("ArrayBuffer is detached",dS)}}return GO(e,t,i),i},gGt=function(t,e,r,n,i){var o=ba[e];return $O(o)||Vs(e),new o(wPe(t.buffer,i),r,n)},xa=function(t,e){if(ZVt(t)&&IH("Symbol"),!$O(t))return t;if(e){if(LH(e,t))return yPe(e,t)}else e=new MH;var r=VO(t),n,i,o,l,f,d,v,x;switch(r){case"Array":o=rGt(UO(t));break;case"Object":o={};break;case"Map":o=new MH;break;case"Set":o=new _Pe;break;case"RegExp":o=new RegExp(t.source,JVt(t));break;case"Error":switch(i=t.name,i){case"AggregateError":o=new(pS(i))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":o=new(pS(i));break;case"CompileError":case"LinkError":case"RuntimeError":o=new(pS("WebAssembly",i));break;default:o=new vPe}break;case"DOMException":o=new Bg(t.message,t.name);break;case"ArrayBuffer":case"SharedArrayBuffer":o=wPe(t,e,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":d=r==="DataView"?t.byteLength:t.length,o=gGt(t,r,t.byteOffset,d,e);break;case"DOMQuad":try{o=new DOMQuad(xa(t.p1,e),xa(t.p2,e),xa(t.p3,e),xa(t.p4,e))}catch(b){o=AH(t,r)}break;case"File":if(Ah)try{o=Ah(t),VO(o)!==r&&(o=void 0)}catch(b){}if(!o)try{o=new File([t],t.name,t)}catch(b){}o||Vs(r);break;case"FileList":if(l=mGt(),l){for(f=0,d=UO(t);f<d;f++)l.items.add(xa(t[f],e));o=l.files}else o=AH(t,r);break;case"ImageData":try{o=new ImageData(xa(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch(b){o=AH(t,r)}break;default:if(Ah)o=Ah(t);else switch(r){case"BigInt":o=hS(t.valueOf());break;case"Boolean":o=hS(lGt(t));break;case"Number":o=hS(uGt(t));break;case"String":o=hS(cGt(t));break;case"Date":o=new gPe(fGt(t));break;case"Blob":try{o=t.slice(0,t.size,t.type)}catch(b){Vs(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=ba[r];try{o=n.fromPoint?n.fromPoint(t):new n(t.x,t.y,t.z,t.w)}catch(b){Vs(r)}break;case"DOMRect":case"DOMRectReadOnly":n=ba[r];try{o=n.fromRect?n.fromRect(t):new n(t.x,t.y,t.width,t.height)}catch(b){Vs(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=ba[r];try{o=n.fromMatrix?n.fromMatrix(t):new n(t)}catch(b){Vs(r)}break;case"AudioData":case"VideoFrame":u0(t.clone)||Vs(r);try{o=t.clone()}catch(b){IH(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Vs(r);default:IH(r)}}switch(GO(e,t,o),r){case"Array":case"Object":for(v=aGt(t),f=0,d=UO(v);f<d;f++)x=v[f],XVt(o,x,xa(t[x],e));break;case"Map":t.forEach(function(b,A){GO(o,xa(A,e),xa(b,e))});break;case"Set":t.forEach(function(b){xPe(o,xa(b,e))});break;case"Error":TH(o,"message",xa(t.message,e)),KVt(t,"cause")&&TH(o,"cause",xa(t.cause,e)),i==="AggregateError"?o.errors=xa(t.errors,e):i==="SuppressedError"&&(o.error=xa(t.error,e),o.suppressed=xa(t.suppressed,e));case"DOMException":tGt&&TH(o,"stack",xa(t.stack,e))}return o},vGt=function(t,e){if(!$O(t))throw new nGt("Transfer option cannot be converted to a sequence");var r=[];YVt(t,function(A){sGt(r,mPe(A))});for(var n=0,i=UO(r),o=new _Pe,l,f,d,v,x,b;n<i;){if(l=r[n++],f=VO(l),f==="ArrayBuffer"?oGt(o,l):LH(e,l))throw new Bg("Duplicate transferable",dS);if(f==="ArrayBuffer"){xPe(o,l);continue}if(OH)v=l0(l,{transfer:[l]});else switch(f){case"ImageBitmap":d=ba.OffscreenCanvas,HVt(d)||Vs(f,BO);try{x=new d(l.width,l.height),b=x.getContext("bitmaprenderer"),b.transferFromImageBitmap(l),v=x.transferToImageBitmap()}catch(A){}break;case"AudioData":case"VideoFrame":(!u0(l.clone)||!u0(l.close))&&Vs(f,BO);try{v=l.clone(),l.close()}catch(A){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Vs(f,BO)}if(v===void 0)throw new Bg("This object cannot be transferred: "+f,dS);GO(e,l,v)}return o},yGt=function(t){eGt(t,function(e){OH?Ah(e,{transfer:[e]}):u0(e.transfer)?e.transfer():pPe?pPe(e):Vs("ArrayBuffer",BO)})};GVt({global:!0,enumerable:!0,sham:!OH,forced:pGt},{structuredClone:function(e){var r=QVt(arguments.length,1)>1&&!WVt(arguments[1])?mPe(arguments[1]):void 0,n=r?r.transfer:void 0,i,o;n!==void 0&&(i=new MH,o=vGt(n,i));var l=xa(e,i);return o&&yGt(o),l}})});var IPe=R(()=>{"use strict";p();var _Gt=oe(),TPe=Ft(),xGt=jO(),SPe=xGt(TPe.setInterval,!0);_Gt({global:!0,bind:!0,forced:TPe.setInterval!==SPe},{setInterval:SPe})});var CPe=R(()=>{"use strict";p();var bGt=oe(),MPe=Ft(),wGt=jO(),APe=wGt(MPe.setTimeout,!0);bGt({global:!0,bind:!0,forced:MPe.setTimeout!==APe},{setTimeout:APe})});var PPe=R(()=>{"use strict";p();IPe();CPe()});var gS=R((N6r,OPe)=>{"use strict";p();var EGt=yt(),SGt=mr(),TGt=sr(),RPe=pn(),IGt=SGt("iterator");OPe.exports=!EGt(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach(function(i,o){e.delete("b"),n+=o+i}),r.delete("a",2),r.delete("b",void 0),RPe&&(!t.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!e.size&&(RPe||!TGt)||!e.sort||t.href!=="https://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[IGt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var UPe=R((q6r,zPe)=>{"use strict";p();var Vg=ct(),DH=2147483647,vS=36,qPe=1,qH=26,AGt=38,MGt=700,CGt=72,PGt=128,RGt="-",OGt=/[^\0-\u007E]/,FPe=/[.\u3002\uFF0E\uFF61]/g,LPe="Overflow: input needs wider integers to process",NH=vS-qPe,DPe=RangeError,LGt=Vg(FPe.exec),c0=Math.floor,kH=String.fromCharCode,NPe=Vg("".charCodeAt),jPe=Vg([].join),Od=Vg([].push),DGt=Vg("".replace),NGt=Vg("".split),kGt=Vg("".toLowerCase),qGt=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=NPe(t,r++);if(i>=55296&&i<=56319&&r<n){var o=NPe(t,r++);(o&64512)===56320?Od(e,((i&1023)<<10)+(o&1023)+65536):(Od(e,i),r--)}else Od(e,i)}return e},kPe=function(t){return t+22+75*(t<26)},FGt=function(t,e,r){var n=0;for(t=r?c0(t/MGt):t>>1,t+=c0(t/e);t>NH*qH>>1;)t=c0(t/NH),n+=vS;return c0(n+(NH+1)*t/(t+AGt))},jGt=function(t){var e=[];t=qGt(t);var r=t.length,n=PGt,i=0,o=CGt,l,f;for(l=0;l<t.length;l++)f=t[l],f<128&&Od(e,kH(f));var d=e.length,v=d;for(d&&Od(e,RGt);v<r;){var x=DH;for(l=0;l<t.length;l++)f=t[l],f>=n&&f<x&&(x=f);var b=v+1;if(x-n>c0((DH-i)/b))throw new DPe(LPe);for(i+=(x-n)*b,n=x,l=0;l<t.length;l++){if(f=t[l],f<n&&++i>DH)throw new DPe(LPe);if(f===n){for(var A=i,P=vS;;){var N=P<=o?qPe:P>=o+qH?qH:P-o;if(A<N)break;var j=A-N,D=vS-N;Od(e,kH(kPe(N+j%D))),A=c0(j/D),P+=vS}Od(e,kH(kPe(A))),o=FGt(i,b,v===d),i=0,v++}}i++,n++}return jPe(e,"")};zPe.exports=function(t){var e=[],r=NGt(DGt(kGt(t),FPe,"."),"."),n,i;for(n=0;n<r.length;n++)i=r[n],Od(e,LGt(OGt,i)?"xn--"+jGt(i):i);return jPe(e,".")}});var HH=R((j6r,cRe)=>{"use strict";p();V1();BV();var VH=oe(),eRe=Ft(),GH=M5(),zGt=_r(),WO=jt(),ac=ct(),yS=sr(),tRe=gS(),rRe=jn(),UGt=hi(),BGt=nu(),VGt=us(),GGt=hd(),$H=Rn(),nRe=qa(),FH=jr(),$Gt=Br(),HGt=Wn(),WGt=ls(),ZGt=Bt(),iRe=hr(),fs=Mr(),YGt=Qi(),BPe=Ds(),VPe=ud(),KGt=Xc(),ZO=ko(),f0=Tl(),XGt=mr(),QGt=yP(),JGt=XGt("iterator"),p0="URLSearchParams",oRe=p0+"Iterator",aRe=$H.set,au=$H.getterFor(p0),e6t=$H.getterFor(oRe),GPe=GH("fetch"),XO=GH("Request"),_S=GH("Headers"),jH=XO&&XO.prototype,$Pe=_S&&_S.prototype,t6t=eRe.TypeError,r6t=eRe.encodeURIComponent,n6t=String.fromCharCode,i6t=zGt("String","fromCodePoint"),o6t=parseInt,KO=ac("".charAt),HPe=ac([].join),Ld=ac([].push),sRe=ac("".replace),a6t=ac([].shift),WPe=ac([].splice),ZPe=ac("".split),lRe=ac("".slice),s6t=ac(/./.exec),l6t=/\+/g,zH="\uFFFD",u6t=/^[0-9a-f]+$/i,YPe=function(t,e){var r=lRe(t,e,e+2);return s6t(u6t,r)?o6t(r,16):NaN},c6t=function(t){for(var e=0,r=128;r>0&&(t&r)!==0;r>>=1)e++;return e},f6t=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(t[0]&31)<<6|t[1]&63;break;case 3:e=(t[0]&15)<<12|(t[1]&63)<<6|t[2]&63;break;case 4:e=(t[0]&7)<<18|(t[1]&63)<<12|(t[2]&63)<<6|t[3]&63;break}return e>1114111?null:e},KPe=function(t){t=sRe(t,l6t," ");for(var e=t.length,r="",n=0;n<e;){var i=KO(t,n);if(i==="%"){if(KO(t,n+1)==="%"||n+3>e){r+="%",n++;continue}var o=YPe(t,n+1);if(o!==o){r+=i,n++;continue}n+=2;var l=c6t(o);if(l===0)i=n6t(o);else{if(l===1||l>4){r+=zH,n++;continue}for(var f=[o],d=1;d<l&&(n++,!(n+3>e||KO(t,n)!=="%"));){var v=YPe(t,n+1);if(v!==v){n+=3;break}if(v>191||v<128)break;Ld(f,v),n+=2,d++}if(f.length!==l){r+=zH;continue}var x=f6t(f);x===null?r+=zH:i=i6t(x)}}r+=i,n++}return r},h6t=/[!'()~]|%20/g,p6t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},d6t=function(t){return p6t[t]},XPe=function(t){return sRe(r6t(t),h6t,d6t)},UH=GGt(function(e,r){aRe(this,{type:oRe,target:au(e).entries,index:0,kind:r})},p0,function(){var e=e6t(this),r=e.target,n=e.index++;if(!r||n>=r.length)return e.target=null,ZO(void 0,!0);var i=r[n];switch(e.kind){case"keys":return ZO(i.key,!1);case"values":return ZO(i.value,!1)}return ZO([i.key,i.value],!1)},!0),uRe=function(t){this.entries=[],this.url=null,t!==void 0&&(iRe(t)?this.parseObject(t):this.parseQuery(typeof t=="string"?KO(t,0)==="?"?lRe(t,1):t:fs(t)))};uRe.prototype={type:p0,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e=this.entries,r=KGt(t),n,i,o,l,f,d,v;if(r)for(n=VPe(t,r),i=n.next;!(o=WO(i,n)).done;){if(l=VPe(ZGt(o.value)),f=l.next,(d=WO(f,l)).done||(v=WO(f,l)).done||!WO(f,l).done)throw new t6t("Expected sequence with length 2");Ld(e,{key:fs(d.value),value:fs(v.value)})}else for(var x in t)$Gt(t,x)&&Ld(e,{key:x,value:fs(t[x])})},parseQuery:function(t){if(t)for(var e=this.entries,r=ZPe(t,"&"),n=0,i,o;n<r.length;)i=r[n++],i.length&&(o=ZPe(i,"="),Ld(e,{key:KPe(a6t(o)),value:KPe(HPe(o,"="))}))},serialize:function(){for(var t=this.entries,e=[],r=0,n;r<t.length;)n=t[r++],Ld(e,XPe(n.key)+"="+XPe(n.value));return HPe(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var QO=function(){nRe(this,h0);var e=arguments.length>0?arguments[0]:void 0,r=aRe(this,new uRe(e));yS||(this.size=r.entries.length)},h0=QO.prototype;BGt(h0,{append:function(e,r){var n=au(this);f0(arguments.length,2),Ld(n.entries,{key:fs(e),value:fs(r)}),yS||this.length++,n.updateURL()},delete:function(t){for(var e=au(this),r=f0(arguments.length,1),n=e.entries,i=fs(t),o=r<2?void 0:arguments[1],l=o===void 0?o:fs(o),f=0;f<n.length;){var d=n[f];if(d.key===i&&(l===void 0||d.value===l)){if(WPe(n,f,1),l!==void 0)break}else f++}yS||(this.size=n.length),e.updateURL()},get:function(e){var r=au(this).entries;f0(arguments.length,1);for(var n=fs(e),i=0;i<r.length;i++)if(r[i].key===n)return r[i].value;return null},getAll:function(e){var r=au(this).entries;f0(arguments.length,1);for(var n=fs(e),i=[],o=0;o<r.length;o++)r[o].key===n&&Ld(i,r[o].value);return i},has:function(e){for(var r=au(this).entries,n=f0(arguments.length,1),i=fs(e),o=n<2?void 0:arguments[1],l=o===void 0?o:fs(o),f=0;f<r.length;){var d=r[f++];if(d.key===i&&(l===void 0||d.value===l))return!0}return!1},set:function(e,r){var n=au(this);f0(arguments.length,1);for(var i=n.entries,o=!1,l=fs(e),f=fs(r),d=0,v;d<i.length;d++)v=i[d],v.key===l&&(o?WPe(i,d--,1):(o=!0,v.value=f));o||Ld(i,{key:l,value:f}),yS||(this.size=i.length),n.updateURL()},sort:function(){var e=au(this);QGt(e.entries,function(r,n){return r.key>n.key?1:-1}),e.updateURL()},forEach:function(e){for(var r=au(this).entries,n=HGt(e,arguments.length>1?arguments[1]:void 0),i=0,o;i<r.length;)o=r[i++],n(o.value,o.key,this)},keys:function(){return new UH(this,"keys")},values:function(){return new UH(this,"values")},entries:function(){return new UH(this,"entries")}},{enumerable:!0});rRe(h0,JGt,h0.entries,{name:"entries"});rRe(h0,"toString",function(){return au(this).serialize()},{enumerable:!0});yS&&UGt(h0,"size",{get:function(){return au(this).entries.length},configurable:!0,enumerable:!0});VGt(QO,p0);VH({global:!0,constructor:!0,forced:!tRe},{URLSearchParams:QO});!tRe&&FH(_S)&&(QPe=ac($Pe.has),JPe=ac($Pe.set),BH=function(t){if(iRe(t)){var e=t.body,r;if(WGt(e)===p0)return r=t.headers?new _S(t.headers):new _S,QPe(r,"content-type")||JPe(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),YGt(t,{body:BPe(0,fs(e)),headers:BPe(0,r)})}return t},FH(GPe)&&VH({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return GPe(e,arguments.length>1?BH(arguments[1]):{})}}),FH(XO)&&(YO=function(e){return nRe(this,jH),new XO(e,arguments.length>1?BH(arguments[1]):{})},jH.constructor=YO,YO.prototype=jH,VH({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:YO})));var QPe,JPe,BH,YO;cRe.exports={URLSearchParams:QO,getState:au}});var MRe=R(()=>{"use strict";p();GV();var m6t=oe(),uW=sr(),g6t=gS(),cW=Ft(),fRe=Wn(),fu=ct(),nL=jn(),su=hi(),v6t=qa(),aW=Br(),fW=c5(),d0=FU(),sc=qs(),y6t=Dg().codeAt,_6t=UPe(),Ch=Mr(),x6t=us(),b6t=Tl(),wRe=HH(),ERe=Rn(),w6t=ERe.set,iL=ERe.getterFor("URL"),E6t=wRe.URLSearchParams,S6t=wRe.getState,xS=cW.URL,sW=cW.TypeError,oL=cW.parseInt,T6t=Math.floor,hRe=Math.pow,cu=fu("".charAt),lc=fu(/./.exec),wS=fu([].join),I6t=fu(1 .toString),A6t=fu([].pop),g0=fu([].push),WH=fu("".replace),M6t=fu([].shift),C6t=fu("".split),SS=fu("".slice),aL=fu("".toLowerCase),P6t=fu([].unshift),R6t="Invalid authority",ZH="Invalid scheme",Gg="Invalid host",pRe="Invalid port",SRe=/[a-z]/i,O6t=/[\d+-.a-z]/i,lW=/\d/,L6t=/^0x/i,D6t=/^[0-7]+$/,N6t=/^\d+$/,TRe=/^[\da-f]+$/i,k6t=/[\0\t\n\r #%/:<>?@[\\\]^|]/,q6t=/[\0\t\n\r #/:<>?@[\\\]^|]/,F6t=/^[\u0000-\u0020]+/,j6t=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,z6t=/[\t\n\r]/g,lu,U6t=function(t){var e=C6t(t,"."),r,n,i,o,l,f,d;if(e.length&&e[e.length-1]===""&&e.length--,r=e.length,r>4)return t;for(n=[],i=0;i<r;i++){if(o=e[i],o==="")return t;if(l=10,o.length>1&&cu(o,0)==="0"&&(l=lc(L6t,o)?16:8,o=SS(o,l===8?1:2)),o==="")f=0;else{if(!lc(l===10?N6t:l===8?D6t:TRe,o))return t;f=oL(o,l)}g0(n,f)}for(i=0;i<r;i++)if(f=n[i],i===r-1){if(f>=hRe(256,5-r))return null}else if(f>255)return null;for(d=A6t(n),i=0;i<n.length;i++)d+=n[i]*hRe(256,3-i);return d},B6t=function(t){var e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0,o,l,f,d,v,x,b,A=function(){return cu(t,i)};if(A()===":"){if(cu(t,1)!==":")return;i+=2,r++,n=r}for(;A();){if(r===8)return;if(A()===":"){if(n!==null)return;i++,r++,n=r;continue}for(o=l=0;l<4&&lc(TRe,A());)o=o*16+oL(A(),16),i++,l++;if(A()==="."){if(l===0||(i-=l,r>6))return;for(f=0;A();){if(d=null,f>0)if(A()==="."&&f<4)i++;else return;if(!lc(lW,A()))return;for(;lc(lW,A());){if(v=oL(A(),10),d===null)d=v;else{if(d===0)return;d=d*10+v}if(d>255)return;i++}e[r]=e[r]*256+d,f++,(f===2||f===4)&&r++}if(f!==4)return;break}else if(A()===":"){if(i++,!A())return}else if(A())return;e[r++]=o}if(n!==null)for(x=r-n,r=7;r!==0&&x>0;)b=e[r],e[r--]=e[n+x-1],e[n+--x]=b;else if(r!==8)return;return e},V6t=function(t){for(var e=null,r=1,n=null,i=0,o=0;o<8;o++)t[o]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=o),++i);return i>r?n:e},bS=function(t){var e,r,n,i;if(typeof t=="number"){for(e=[],r=0;r<4;r++)P6t(e,t%256),t=T6t(t/256);return wS(e,".")}if(typeof t=="object"){for(e="",n=V6t(t),r=0;r<8;r++)i&&t[r]===0||(i&&(i=!1),n===r?(e+=r?":":"::",i=!0):(e+=I6t(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},rL={},IRe=fW({},rL,{" ":1,"\"":1,"<":1,">":1,"`":1}),ARe=fW({},IRe,{"#":1,"?":1,"{":1,"}":1}),YH=fW({},ARe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Dd=function(t,e){var r=y6t(t,0);return r>32&&r<127&&!aW(e,t)?t:encodeURIComponent(t)},JO={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ES=function(t,e){var r;return t.length===2&&lc(SRe,cu(t,0))&&((r=cu(t,1))===":"||!e&&r==="|")},dRe=function(t){var e;return t.length>1&&ES(SS(t,0,2))&&(t.length===2||(e=cu(t,2))==="/"||e==="\\"||e==="?"||e==="#")},G6t=function(t){return t==="."||aL(t)==="%2e"},$6t=function(t){return t=aL(t),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"},KH={},mRe={},XH={},gRe={},vRe={},QH={},yRe={},_Re={},eL={},tL={},JH={},eW={},tW={},rW={},xRe={},nW={},m0={},uf={},bRe={},$g={},Mh={},hW=function(t,e,r){var n=Ch(t),i,o,l;if(e){if(o=this.parse(n),o)throw new sW(o);this.searchParams=null}else{if(r!==void 0&&(i=new hW(r,!0)),o=this.parse(n,null,i),o)throw new sW(o);l=S6t(new E6t),l.bindURL(this),this.searchParams=l}};hW.prototype={type:"URL",parse:function(t,e,r){var n=this,i=e||KH,o=0,l="",f=!1,d=!1,v=!1,x,b,A,P;for(t=Ch(t),e||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,t=WH(t,F6t,""),t=WH(t,j6t,"$1")),t=WH(t,z6t,""),x=d0(t);o<=x.length;){switch(b=x[o],i){case KH:if(b&&lc(SRe,b))l+=aL(b),i=mRe;else{if(e)return ZH;i=XH;continue}break;case mRe:if(b&&(lc(O6t,b)||b==="+"||b==="-"||b==="."))l+=aL(b);else if(b===":"){if(e&&(n.isSpecial()!==aW(JO,l)||l==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=l,e){n.isSpecial()&&JO[n.scheme]===n.port&&(n.port=null);return}l="",n.scheme==="file"?i=rW:n.isSpecial()&&r&&r.scheme===n.scheme?i=gRe:n.isSpecial()?i=_Re:x[o+1]==="/"?(i=vRe,o++):(n.cannotBeABaseURL=!0,g0(n.path,""),i=bRe)}else{if(e)return ZH;l="",i=XH,o=0;continue}break;case XH:if(!r||r.cannotBeABaseURL&&b!=="#")return ZH;if(r.cannotBeABaseURL&&b==="#"){n.scheme=r.scheme,n.path=sc(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,i=Mh;break}i=r.scheme==="file"?rW:QH;continue;case gRe:if(b==="/"&&x[o+1]==="/")i=eL,o++;else{i=QH;continue}break;case vRe:if(b==="/"){i=tL;break}else{i=uf;continue}case QH:if(n.scheme=r.scheme,b===lu)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=sc(r.path),n.query=r.query;else if(b==="/"||b==="\\"&&n.isSpecial())i=yRe;else if(b==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=sc(r.path),n.query="",i=$g;else if(b==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=sc(r.path),n.query=r.query,n.fragment="",i=Mh;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=sc(r.path),n.path.length--,i=uf;continue}break;case yRe:if(n.isSpecial()&&(b==="/"||b==="\\"))i=eL;else if(b==="/")i=tL;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,i=uf;continue}break;case _Re:if(i=eL,b!=="/"||cu(l,o+1)!=="/")continue;o++;break;case eL:if(b!=="/"&&b!=="\\"){i=tL;continue}break;case tL:if(b==="@"){f&&(l="%40"+l),f=!0,A=d0(l);for(var N=0;N<A.length;N++){var j=A[N];if(j===":"&&!v){v=!0;continue}var D=Dd(j,YH);v?n.password+=D:n.username+=D}l=""}else if(b===lu||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()){if(f&&l==="")return R6t;o-=d0(l).length+1,l="",i=JH}else l+=b;break;case JH:case eW:if(e&&n.scheme==="file"){i=nW;continue}else if(b===":"&&!d){if(l==="")return Gg;if(P=n.parseHost(l),P)return P;if(l="",i=tW,e===eW)return}else if(b===lu||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()){if(n.isSpecial()&&l==="")return Gg;if(e&&l===""&&(n.includesCredentials()||n.port!==null))return;if(P=n.parseHost(l),P)return P;if(l="",i=m0,e)return;continue}else b==="["?d=!0:b==="]"&&(d=!1),l+=b;break;case tW:if(lc(lW,b))l+=b;else if(b===lu||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()||e){if(l!==""){var F=oL(l,10);if(F>65535)return pRe;n.port=n.isSpecial()&&F===JO[n.scheme]?null:F,l=""}if(e)return;i=m0;continue}else return pRe;break;case rW:if(n.scheme="file",b==="/"||b==="\\")i=xRe;else if(r&&r.scheme==="file")switch(b){case lu:n.host=r.host,n.path=sc(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=sc(r.path),n.query="",i=$g;break;case"#":n.host=r.host,n.path=sc(r.path),n.query=r.query,n.fragment="",i=Mh;break;default:dRe(wS(sc(x,o),""))||(n.host=r.host,n.path=sc(r.path),n.shortenPath()),i=uf;continue}else{i=uf;continue}break;case xRe:if(b==="/"||b==="\\"){i=nW;break}r&&r.scheme==="file"&&!dRe(wS(sc(x,o),""))&&(ES(r.path[0],!0)?g0(n.path,r.path[0]):n.host=r.host),i=uf;continue;case nW:if(b===lu||b==="/"||b==="\\"||b==="?"||b==="#"){if(!e&&ES(l))i=uf;else if(l===""){if(n.host="",e)return;i=m0}else{if(P=n.parseHost(l),P)return P;if(n.host==="localhost"&&(n.host=""),e)return;l="",i=m0}continue}else l+=b;break;case m0:if(n.isSpecial()){if(i=uf,b!=="/"&&b!=="\\")continue}else if(!e&&b==="?")n.query="",i=$g;else if(!e&&b==="#")n.fragment="",i=Mh;else if(b!==lu&&(i=uf,b!=="/"))continue;break;case uf:if(b===lu||b==="/"||b==="\\"&&n.isSpecial()||!e&&(b==="?"||b==="#")){if($6t(l)?(n.shortenPath(),b!=="/"&&!(b==="\\"&&n.isSpecial())&&g0(n.path,"")):G6t(l)?b!=="/"&&!(b==="\\"&&n.isSpecial())&&g0(n.path,""):(n.scheme==="file"&&!n.path.length&&ES(l)&&(n.host&&(n.host=""),l=cu(l,0)+":"),g0(n.path,l)),l="",n.scheme==="file"&&(b===lu||b==="?"||b==="#"))for(;n.path.length>1&&n.path[0]==="";)M6t(n.path);b==="?"?(n.query="",i=$g):b==="#"&&(n.fragment="",i=Mh)}else l+=Dd(b,ARe);break;case bRe:b==="?"?(n.query="",i=$g):b==="#"?(n.fragment="",i=Mh):b!==lu&&(n.path[0]+=Dd(b,rL));break;case $g:!e&&b==="#"?(n.fragment="",i=Mh):b!==lu&&(b==="'"&&n.isSpecial()?n.query+="%27":b==="#"?n.query+="%23":n.query+=Dd(b,rL));break;case Mh:b!==lu&&(n.fragment+=Dd(b,IRe));break}o++}},parseHost:function(t){var e,r,n;if(cu(t,0)==="["){if(cu(t,t.length-1)!=="]"||(e=B6t(SS(t,1,-1)),!e))return Gg;this.host=e}else if(this.isSpecial()){if(t=_6t(t),lc(k6t,t)||(e=U6t(t),e===null))return Gg;this.host=e}else{if(lc(q6t,t))return Gg;for(e="",r=d0(t),n=0;n<r.length;n++)e+=Dd(r[n],rL);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return aW(JO,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;e&&(this.scheme!=="file"||e!==1||!ES(t[0],!0))&&t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,i=t.host,o=t.port,l=t.path,f=t.query,d=t.fragment,v=e+":";return i!==null?(v+="//",t.includesCredentials()&&(v+=r+(n?":"+n:"")+"@"),v+=bS(i),o!==null&&(v+=":"+o)):e==="file"&&(v+="//"),v+=t.cannotBeABaseURL?l[0]:l.length?"/"+wS(l,"/"):"",f!==null&&(v+="?"+f),d!==null&&(v+="#"+d),v},setHref:function(t){var e=this.parse(t);if(e)throw new sW(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if(t==="blob")try{return new v0(t.path[0]).origin}catch(r){return"null"}return t==="file"||!this.isSpecial()?"null":t+"://"+bS(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(Ch(t)+":",KH)},getUsername:function(){return this.username},setUsername:function(t){var e=d0(Ch(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=Dd(e[r],YH)}},getPassword:function(){return this.password},setPassword:function(t){var e=d0(Ch(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=Dd(e[r],YH)}},getHost:function(){var t=this.host,e=this.port;return t===null?"":e===null?bS(t):bS(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,JH)},getHostname:function(){var t=this.host;return t===null?"":bS(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,eW)},getPort:function(){var t=this.port;return t===null?"":Ch(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(t=Ch(t),t===""?this.port=null:this.parse(t,tW))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+wS(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,m0))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){t=Ch(t),t===""?this.query=null:(cu(t,0)==="?"&&(t=SS(t,1)),this.query="",this.parse(t,$g)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){if(t=Ch(t),t===""){this.fragment=null;return}cu(t,0)==="#"&&(t=SS(t,1)),this.fragment="",this.parse(t,Mh)},update:function(){this.query=this.searchParams.serialize()||null}};var v0=function(e){var r=v6t(this,hs),n=b6t(arguments.length,1)>1?arguments[1]:void 0,i=w6t(r,new hW(e,!1,n));uW||(r.href=i.serialize(),r.origin=i.getOrigin(),r.protocol=i.getProtocol(),r.username=i.getUsername(),r.password=i.getPassword(),r.host=i.getHost(),r.hostname=i.getHostname(),r.port=i.getPort(),r.pathname=i.getPathname(),r.search=i.getSearch(),r.searchParams=i.getSearchParams(),r.hash=i.getHash())},hs=v0.prototype,uu=function(t,e){return{get:function(){return iL(this)[t]()},set:e&&function(r){return iL(this)[e](r)},configurable:!0,enumerable:!0}};uW&&(su(hs,"href",uu("serialize","setHref")),su(hs,"origin",uu("getOrigin")),su(hs,"protocol",uu("getProtocol","setProtocol")),su(hs,"username",uu("getUsername","setUsername")),su(hs,"password",uu("getPassword","setPassword")),su(hs,"host",uu("getHost","setHost")),su(hs,"hostname",uu("getHostname","setHostname")),su(hs,"port",uu("getPort","setPort")),su(hs,"pathname",uu("getPathname","setPathname")),su(hs,"search",uu("getSearch","setSearch")),su(hs,"searchParams",uu("getSearchParams")),su(hs,"hash",uu("getHash","setHash")));nL(hs,"toJSON",function(){return iL(this).serialize()},{enumerable:!0});nL(hs,"toString",function(){return iL(this).serialize()},{enumerable:!0});xS&&(iW=xS.createObjectURL,oW=xS.revokeObjectURL,iW&&nL(v0,"createObjectURL",fRe(iW,xS)),oW&&nL(v0,"revokeObjectURL",fRe(oW,xS)));var iW,oW;x6t(v0,"URL");m6t({global:!0,constructor:!0,forced:!g6t,sham:!uW},{URL:v0})});var CRe=R(()=>{"use strict";p();MRe()});var ORe=R(()=>{"use strict";p();var H6t=oe(),W6t=_r(),RRe=yt(),Z6t=Tl(),PRe=Mr(),Y6t=gS(),pW=W6t("URL"),K6t=Y6t&&RRe(function(){pW.canParse()}),X6t=RRe(function(){return pW.canParse.length!==1});H6t({target:"URL",stat:!0,forced:!K6t||X6t},{canParse:function(e){var r=Z6t(arguments.length,1),n=PRe(e),i=r<2||arguments[1]===void 0?void 0:PRe(arguments[1]);try{return!!new pW(n,i)}catch(o){return!1}}})});var DRe=R(()=>{"use strict";p();var Q6t=oe(),J6t=_r(),e$t=Tl(),LRe=Mr(),t$t=gS(),r$t=J6t("URL");Q6t({target:"URL",stat:!0,forced:!t$t},{parse:function(e){var r=e$t(arguments.length,1),n=LRe(e),i=r<2||arguments[1]===void 0?void 0:LRe(arguments[1]);try{return new r$t(n,i)}catch(o){return null}}})});var NRe=R(()=>{"use strict";p();var n$t=oe(),i$t=jt();n$t({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i$t(URL.prototype.toString,this)}})});var kRe=R(()=>{"use strict";p();HH()});var zRe=R(()=>{"use strict";p();var o$t=jn(),sL=ct(),qRe=Mr(),a$t=Tl(),jRe=URLSearchParams,lL=jRe.prototype,s$t=sL(lL.append),FRe=sL(lL.delete),l$t=sL(lL.forEach),u$t=sL([].push),dW=new jRe("a=1&a=2&b=3");dW.delete("a",1);dW.delete("b",void 0);dW+""!="a=2"&&o$t(lL,"delete",function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&r===void 0)return FRe(this,t);var n=[];l$t(this,function(b,A){u$t(n,{key:A,value:b})}),a$t(e,1);for(var i=qRe(t),o=qRe(r),l=0,f=0,d=!1,v=n.length,x;l<v;)x=n[l++],d||x.key===i?(d=!0,FRe(this,x.key)):f++;for(;f<v;)x=n[f++],x.key===i&&x.value===o||s$t(this,x.key,x.value)},{enumerable:!0,unsafe:!0})});var GRe=R(()=>{"use strict";p();var c$t=jn(),BRe=ct(),f$t=Mr(),h$t=Tl(),VRe=URLSearchParams,mW=VRe.prototype,p$t=BRe(mW.getAll),d$t=BRe(mW.has),URe=new VRe("a=1");(URe.has("a",2)||!URe.has("a",void 0))&&c$t(mW,"has",function(e){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return d$t(this,e);var i=p$t(this,e);h$t(r,1);for(var o=f$t(n),l=0;l<i.length;)if(i[l++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})});var $Re=R(()=>{"use strict";p();var m$t=sr(),g$t=ct(),v$t=hi(),gW=URLSearchParams.prototype,y$t=g$t(gW.forEach);m$t&&!("size"in gW)&&v$t(gW,"size",{get:function(){var e=0;return y$t(this,function(){e++}),e},configurable:!0,enumerable:!0})});var WRe=R((d$r,HRe)=>{"use strict";p();Boe();Yoe();Koe();Xoe();Qoe();Joe();eae();tae();rae();nae();iae();oae();aae();sae();lae();Dae();jae();TU();ose();CU();pse();vse();_se();wse();Ese();Tse();Ase();DU();NU();Ose();Lse();kse();$se();Hse();Zse();Yse();V1();gle();xle();ble();Ele();Tle();Lle();Nle();qle();zle();Ule();nue();aue();sue();tB();nB();iB();fue();hue();pue();aB();Gue();rce();lce();cce();IB();PB();LB();ZB();YB();jce();Uce();Gce();$ce();tfe();rfe();sfe();ffe();pfe();_fe();wfe();Ife();r3();s3();h3();d3();g3();y3();S3();I3();A3();kP();P3();O3();D3();N3();cU();ihe();UP();V3();Ihe();Che();Rhe();Ohe();Lhe();khe();Fhe();jhe();W3();Uhe();Vhe();$he();Hhe();Whe();Zhe();Xhe();epe();tpe();rpe();ppe();dpe();gpe();ype();_pe();xpe();bpe();wpe();Mpe();kpe();Upe();Wpe();Kpe();tde();rde();ode();sde();ude();cde();gde();vde();yde();bde();wde();Ede();Tde();p5();d5();Mde();Pde();Ode();Dde();kde();qde();Fde();jde();Gde();$de();Hde();Yde();Kde();Qde();eme();pge();K5();X5();yge();tV();rV();bge();Mge();Rge();Oge();kge();qge();Fge();jge();zge();Uge();Bge();Wge();Yge();Kge();pve();yV();bve();fR();Ave();Cve();Ove();kve();Fve();IV();CV();RV();LV();NV();FV();zV();mye();_ye();Sye();BV();Mye();VV();GV();Bye();XV();Jye();e_e();i_e();o_e();f_e();sG();g_e();w_e();T_e();A_e();dG();D_e();j_e();G_e();Z_e();Y_e();K_e();X_e();Q_e();J_e();e0e();t0e();r0e();n0e();i0e();o0e();a0e();L0e();D0e();N0e();k0e();q0e();F0e();j0e();z0e();U0e();CG();G0e();H0e();Z0e();X0e();J0e();txe();PG();RG();oxe();axe();lxe();cxe();mxe();vxe();_xe();xxe();wxe();Sxe();Ixe();Mxe();Dxe();Nxe();qxe();Vxe();$xe();Kxe();$G();HG();Qxe();ZG();nbe();zR();_be();xbe();Ebe();Kbe();Xbe();Qbe();Jbe();ewe();twe();nwe();iwe();awe();swe();cwe();fwe();dwe();mwe();gwe();vwe();Swe();Twe();Iwe();Awe();Mwe();Uwe();Hwe();i1e();l1e();c1e();f1e();p1e();d1e();x1e();b1e();E1e();S1e();T1e();I1e();A1e();P1e();R1e();F1e();G1e();H1e();W1e();Z1e();Y1e();K1e();tEe();oEe();sEe();uEe();cEe();pEe();dEe();mEe();gEe();yEe();bEe();SEe();TEe();IEe();AEe();MEe();CEe();PEe();REe();OEe();LEe();NEe();kEe();qEe();FEe();jEe();UEe();GEe();rSe();cSe();hSe();dSe();mSe();vSe();ySe();_Se();wSe();ESe();SSe();TSe();MSe();PSe();RSe();LSe();NSe();kSe();jSe();zSe();USe();VSe();$Se();HSe();XSe();QSe();JSe();tTe();rTe();nTe();iTe();oTe();aTe();sTe();lTe();hTe();pTe();yTe();_Te();wTe();ETe();STe();MTe();CTe();PTe();RTe();HTe();WTe();ZTe();YTe();KTe();rIe();iIe();aIe();cIe();hIe();dIe();vIe();_Ie();bIe();wIe();EIe();SIe();TIe();PIe();RIe();LIe();DIe();kIe();qIe();FIe();jIe();zIe();UIe();BIe();VIe();GIe();HIe();ZIe();KIe();XIe();QIe();JIe();eAe();tAe();rAe();nAe();lAe();pAe();LAe();DAe();NAe();kAe();qAe();FAe();jAe();zAe();BAe();VAe();KAe();XAe();QAe();JAe();eMe();tMe();rMe();nMe();oMe();aMe();lMe();cMe();fMe();hMe();pMe();dMe();mMe();gMe();vMe();yMe();PMe();NMe();qMe();FMe();zMe();UMe();VMe();$Me();WMe();YMe();KMe();eCe();tCe();iCe();oCe();sCe();uCe();gCe();bCe();MCe();LCe();$Ce();QCe();ePe();uPe();cPe();hPe();EPe();PPe();CRe();ORe();DRe();NRe();kRe();zRe();GRe();$Re();HRe.exports=WC()});var YRe=R((g$r,ZRe)=>{"use strict";p();ZRe.exports=WRe()});var SL=R((UW,BW)=>{p();(function(t,e){typeof UW=="object"&&typeof BW!="undefined"?BW.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self,t.maplibregl=e())})(UW,function(){"use strict";var t={},e={};function r(i,o,l){if(e[i]=l,i==="index"){var f="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",d={};return e.shared(d),e.index(t,d),typeof window!="undefined"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"}))),t}}r("shared",["exports"],function(i){"use strict";function o(c,s,u,m){return new(u||(u=Promise))(function(y,S){function I(q){try{O(m.next(q))}catch(z){S(z)}}function C(q){try{O(m.throw(q))}catch(z){S(z)}}function O(q){var z;q.done?y(q.value):(z=q.value,z instanceof u?z:new u(function(G){G(z)})).then(I,C)}O((m=m.apply(c,s||[])).next())})}function l(c,s){this.x=c,this.y=s}function f(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var d,v;typeof SuppressedError=="function"&&SuppressedError,l.prototype={clone(){return new l(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,s){return this.clone()._rotateAround(c,s)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){let s=c.x-this.x,u=c.y-this.y;return s*s+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult(c){let s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){let c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){let s=Math.cos(c),u=Math.sin(c),m=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=m,this},_rotateAround(c,s){let u=Math.cos(c),m=Math.sin(c),y=s.y+m*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-m*(this.y-s.y),this.y=y,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:l},l.convert=function(c){if(c instanceof l)return c;if(Array.isArray(c))return new l(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new l(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var x=function(){if(v)return d;function c(s,u,m,y){this.cx=3*s,this.bx=3*(m-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(y-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=m,this.p2y=y}return v=1,d=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var m=s,y=0;y<8;y++){var S=this.sampleCurveX(m)-s;if(Math.abs(S)<u)return m;var I=this.sampleCurveDerivativeX(m);if(Math.abs(I)<1e-6)break;m-=S/I}var C=0,O=1;for(m=s,y=0;y<20&&(S=this.sampleCurveX(m),!(Math.abs(S-s)<u));y++)s>S?C=m:O=m,m=.5*(O-C)+C;return m},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},d}(),b=f(x);let A,P;function N(){return A==null&&(A=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),A}function j(){if(P==null&&(P=!1,N())){let s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let m=0;m<5*5;m++){let y=4*m;s.fillStyle=`rgb(${y},${y+1},${y+2})`,s.fillRect(m%5,Math.floor(m/5),1,1)}let u=s.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&u[m]!==m){P=!0;break}}}return P||!1}var D=1e-6,F=typeof Float32Array!="undefined"?Float32Array:Array;function U(){var c=new F(9);return F!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function $(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Z(){var c=new F(3);return F!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function ie(c){var s=c[0],u=c[1],m=c[2];return Math.sqrt(s*s+u*u+m*m)}function ne(c,s,u){var m=new F(3);return m[0]=c,m[1]=s,m[2]=u,m}function ae(c,s,u){return c[0]=s[0]+u[0],c[1]=s[1]+u[1],c[2]=s[2]+u[2],c}function ye(c,s,u){return c[0]=s[0]*u,c[1]=s[1]*u,c[2]=s[2]*u,c}function ge(c,s,u){var m=s[0],y=s[1],S=s[2],I=u[0],C=u[1],O=u[2];return c[0]=y*O-S*C,c[1]=S*I-m*O,c[2]=m*C-y*I,c}var de,be=ie;function Ne(c,s,u){var m=s[0],y=s[1],S=s[2],I=s[3];return c[0]=u[0]*m+u[4]*y+u[8]*S+u[12]*I,c[1]=u[1]*m+u[5]*y+u[9]*S+u[13]*I,c[2]=u[2]*m+u[6]*y+u[10]*S+u[14]*I,c[3]=u[3]*m+u[7]*y+u[11]*S+u[15]*I,c}function Me(){var c=new F(4);return F!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function ke(c,s,u,m){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",S=Math.PI/360;s*=S,m*=S,u*=S;var I=Math.sin(s),C=Math.cos(s),O=Math.sin(u),q=Math.cos(u),z=Math.sin(m),G=Math.cos(m);switch(y){case"xyz":c[0]=I*q*G+C*O*z,c[1]=C*O*G-I*q*z,c[2]=C*q*z+I*O*G,c[3]=C*q*G-I*O*z;break;case"xzy":c[0]=I*q*G-C*O*z,c[1]=C*O*G-I*q*z,c[2]=C*q*z+I*O*G,c[3]=C*q*G+I*O*z;break;case"yxz":c[0]=I*q*G+C*O*z,c[1]=C*O*G-I*q*z,c[2]=C*q*z-I*O*G,c[3]=C*q*G+I*O*z;break;case"yzx":c[0]=I*q*G+C*O*z,c[1]=C*O*G+I*q*z,c[2]=C*q*z-I*O*G,c[3]=C*q*G-I*O*z;break;case"zxy":c[0]=I*q*G-C*O*z,c[1]=C*O*G+I*q*z,c[2]=C*q*z+I*O*G,c[3]=C*q*G-I*O*z;break;case"zyx":c[0]=I*q*G-C*O*z,c[1]=C*O*G+I*q*z,c[2]=C*q*z-I*O*G,c[3]=C*q*G+I*O*z;break;default:throw new Error("Unknown angle order "+y)}return c}function He(){var c=new F(2);return F!=Float32Array&&(c[0]=0,c[1]=0),c}function Ke(c,s){var u=new F(2);return u[0]=c,u[1]=s,u}Z(),de=new F(4),F!=Float32Array&&(de[0]=0,de[1]=0,de[2]=0,de[3]=0),Z(),ne(1,0,0),ne(0,1,0),Me(),Me(),U(),He();let Je=8192;function We(c,s,u){return s*(Je/(c.tileSize*Math.pow(2,u-c.tileID.overscaledZ)))}function lt(c,s){return(c%s+s)%s}function pt(c,s,u){return c*(1-u)+s*u}function dt(c){if(c<=0)return 0;if(c>=1)return 1;let s=c*c,u=s*c;return 4*(c<.5?u:3*(c-s)+u-.75)}function ze(c,s,u,m){let y=new b(c,s,u,m);return S=>y.solve(S)}let Dt=ze(.25,.1,.25,1);function Ot(c,s,u){return Math.min(u,Math.max(s,c))}function Ue(c,s,u){let m=u-s,y=((c-s)%m+m)%m+s;return y===s?u:y}function nt(c,...s){for(let u of s)for(let m in u)c[m]=u[m];return c}let Ze=1;function rt(c,s,u){let m={};for(let y in c)m[y]=s.call(this,c[y],y,c);return m}function at(c,s,u){let m={};for(let y in c)s.call(this,c[y],y,c)&&(m[y]=c[y]);return m}function ot(c){return Array.isArray(c)?c.map(ot):typeof c=="object"&&c?rt(c,ot):c}let Lt={};function zt(c){Lt[c]||(typeof console!="undefined"&&console.warn(c),Lt[c]=!0)}function Pt(c,s,u){return(u.y-c.y)*(s.x-c.x)>(s.y-c.y)*(u.x-c.x)}function $t(c){return typeof WorkerGlobalScope!="undefined"&&c!==void 0&&c instanceof WorkerGlobalScope}let Xt=null;function Gt(c){return typeof ImageBitmap!="undefined"&&c instanceof ImageBitmap}let Sr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function zr(c,s,u,m,y){return o(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let S=new VideoFrame(c,{timestamp:0});try{let I=S==null?void 0:S.format;if(!I||!I.startsWith("BGR")&&!I.startsWith("RGB"))throw new Error(`Unrecognized format ${I}`);let C=I.startsWith("BGR"),O=new Uint8ClampedArray(m*y*4);if(yield S.copyTo(O,function(q,z,G,Y,X){let Q=4*Math.max(-z,0),re=(Math.max(0,G)-G)*Y*4+Q,le=4*Y,me=Math.max(0,z),qe=Math.max(0,G);return{rect:{x:me,y:qe,width:Math.min(q.width,z+Y)-me,height:Math.min(q.height,G+X)-qe},layout:[{offset:re,stride:le}]}}(c,s,u,m,y)),C)for(let q=0;q<O.length;q+=4){let z=O[q];O[q]=O[q+2],O[q+2]=z}return O}finally{S.close()}})}let vr,pr;function dr(c,s,u,m){return c.addEventListener(s,u,m),{unsubscribe:()=>{c.removeEventListener(s,u,m)}}}function wr(c){return c*Math.PI/180}function un(c){return c/Math.PI*180}let Sn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Nn={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},_i="AbortError";function De(){return new Error(_i)}let J={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function te(c){return J.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}let se="global-dispatcher";class _e extends Error{constructor(s,u,m,y){super(`AJAXError: ${u} (${s}): ${m}`),this.status=s,this.statusText=u,this.url=m,this.body=y}}let Ae=()=>$t(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Le=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){let m=te(c.url);if(m)return m(c,s);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:se},s)}if(!(/^file:/.test(u=c.url)||/^file:/.test(Ae())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,y){return o(this,void 0,void 0,function*(){let S=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:Ae(),signal:y.signal}),I,C;m.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{I=yield fetch(S)}catch(q){throw new _e(0,q.message,m.url,new Blob())}if(!I.ok){let q=yield I.blob();throw new _e(I.status,I.statusText,m.url,q)}C=m.type==="arrayBuffer"||m.type==="image"?I.arrayBuffer():m.type==="json"?I.json():I.text();let O=yield C;if(y.signal.aborted)throw De();return{data:O,cacheControl:I.headers.get("Cache-Control"),expires:I.headers.get("Expires")}})}(c,s);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:se},s)}var u;return function(m,y){return new Promise((S,I)=>{var C;let O=new XMLHttpRequest;O.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(O.responseType="arraybuffer");for(let q in m.headers)O.setRequestHeader(q,m.headers[q]);m.type==="json"&&(O.responseType="text",!((C=m.headers)===null||C===void 0)&&C.Accept||O.setRequestHeader("Accept","application/json")),O.withCredentials=m.credentials==="include",O.onerror=()=>{I(new Error(O.statusText))},O.onload=()=>{if(!y.signal.aborted)if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let q=O.response;if(m.type==="json")try{q=JSON.parse(O.response)}catch(z){return void I(z)}S({data:q,cacheControl:O.getResponseHeader("Cache-Control"),expires:O.getResponseHeader("Expires")})}else{let q=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});I(new _e(O.status,O.statusText,m.url,q))}},y.signal.addEventListener("abort",()=>{O.abort(),I(De())}),O.send(m.body)})}(c,s)};function Be(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;let s=new URL(c),u=window.location;return s.protocol===u.protocol&&s.host===u.host}function Oe(c,s,u){u[c]&&u[c].indexOf(s)!==-1||(u[c]=u[c]||[],u[c].push(s))}function he(c,s,u){if(u&&u[c]){let m=u[c].indexOf(s);m!==-1&&u[c].splice(m,1)}}class pe{constructor(s,u={}){nt(this,u),this.type=s}}class Re extends pe{constructor(s,u={}){super("error",nt({error:s},u))}}class tt{on(s,u){return this._listeners=this._listeners||{},Oe(s,u,this._listeners),{unsubscribe:()=>{this.off(s,u)}}}off(s,u){return he(s,u,this._listeners),he(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Oe(s,u,this._oneTimeListeners),this):new Promise(m=>this.once(s,m))}fire(s,u){typeof s=="string"&&(s=new pe(s,u||{}));let m=s.type;if(this.listens(m)){s.target=this;let y=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(let C of y)C.call(this,s);let S=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(let C of S)he(m,C,this._oneTimeListeners),C.call(this,s);let I=this._eventedParent;I&&(nt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(s))}else s instanceof Re&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}var xe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function It(c,s){let u={};for(let m in c)m!=="ref"&&(u[m]=c[m]);return ut.forEach(m=>{m in s&&(u[m]=s[m])}),u}function ft(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let u=0;u<c.length;u++)if(!ft(c[u],s[u]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(let u in c)if(!ft(c[u],s[u]))return!1;return!0}return c===s}function _t(c,s){c.push(s)}function Wt(c,s,u){_t(u,{command:"addSource",args:[c,s[c]]})}function Tr(c,s,u){_t(s,{command:"removeSource",args:[c]}),u[c]=!0}function rn(c,s,u,m){Tr(c,u,m),Wt(c,s,u)}function Pr(c,s,u){let m;for(m in c[u])if(Object.prototype.hasOwnProperty.call(c[u],m)&&m!=="data"&&!ft(c[u][m],s[u][m]))return!1;for(m in s[u])if(Object.prototype.hasOwnProperty.call(s[u],m)&&m!=="data"&&!ft(c[u][m],s[u][m]))return!1;return!0}function ar(c,s,u,m,y,S){c=c||{},s=s||{};for(let I in c)Object.prototype.hasOwnProperty.call(c,I)&&(ft(c[I],s[I])||u.push({command:S,args:[m,I,s[I],y]}));for(let I in s)Object.prototype.hasOwnProperty.call(s,I)&&!Object.prototype.hasOwnProperty.call(c,I)&&(ft(c[I],s[I])||u.push({command:S,args:[m,I,s[I],y]}))}function ur(c){return c.id}function Mn(c,s){return c[s.id]=s,c}class gt{constructor(s,u,m,y){this.message=(s?`${s}: `:"")+m,y&&(this.identifier=y),u!=null&&u.__line__&&(this.line=u.__line__)}}function si(c,...s){for(let u of s)for(let m in u)c[m]=u[m];return c}class Tn extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}class Ia{constructor(s,u=[]){this.parent=s,this.bindings={};for(let[m,y]of u)this.bindings[m]=y}concat(s){return new Ia(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}let Ss={kind:"null"},wt={kind:"number"},Rr={kind:"string"},Er={kind:"boolean"},_n={kind:"color"},Vi={kind:"projectionDefinition"},Ts={kind:"object"},Ir={kind:"value"},qf={kind:"collator"},Cc={kind:"formatted"},Mv={kind:"padding"},jl={kind:"colorArray"},ap={kind:"numberArray"},Ai={kind:"resolvedImage"},Cv={kind:"variableAnchorOffsetCollection"};function Aa(c,s){return{kind:"array",itemType:c,N:s}}function Un(c){if(c.kind==="array"){let s=Un(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}let oA=[Ss,wt,Rr,Er,_n,Vi,Cc,Ts,Aa(Ir),Mv,ap,jl,Ai,Cv];function _m(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!_m(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(let u of oA)if(!_m(u,s))return null}}return`Expected ${Un(c)} but found ${Un(s)} instead.`}function lb(c,s){return s.some(u=>u.kind===c.kind)}function Pc(c,s){return s.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}function Rc(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}let ub=.96422,aA=.82521,sA=4/29,sp=6/29,lA=3*sp*sp,Pq=sp*sp*sp,Rq=Math.PI/180,Oq=180/Math.PI;function cb(c){return(c%=360)<0&&(c+=360),c}function lp([c,s,u,m]){let y,S,I=hb((.2225045*(c=fb(c))+.7168786*(s=fb(s))+.0606169*(u=fb(u)))/1);c===s&&s===u?y=S=I:(y=hb((.4360747*c+.3850649*s+.1430804*u)/ub),S=hb((.0139322*c+.0971045*s+.7141733*u)/aA));let C=116*I-16;return[C<0?0:C,500*(y-I),200*(I-S),m]}function fb(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function hb(c){return c>Pq?Math.pow(c,1/3):c/lA+sA}function up([c,s,u,m]){let y=(c+16)/116,S=isNaN(s)?y:y+s/500,I=isNaN(u)?y:y-u/200;return y=1*db(y),S=ub*db(S),I=aA*db(I),[pb(3.1338561*S-1.6168667*y-.4906146*I),pb(-.9787684*S+1.9161415*y+.033454*I),pb(.0719453*S-.2289914*y+1.4052427*I),m]}function pb(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function db(c){return c>sp?c*c*c:lA*(c-sA)}let Lq=Object.hasOwn||function(c,s){return Object.prototype.hasOwnProperty.call(c,s)};function cp(c,s){return Lq(c,s)?c[s]:void 0}function xm(c){return parseInt(c.padEnd(2,c),16)/255}function sl(c,s){return Gr(s?c/100:c,0,1)}function Gr(c,s,u){return Math.min(Math.max(s,c),u)}function Ff(c){return!c.some(Number.isNaN)}let Oc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function qu(c,s,u){return c+u*(s-c)}function jf(c,s,u){return c.map((m,y)=>qu(m,s[y],u))}class $r{constructor(s,u,m,y=1,S=!0){this.r=s,this.g=u,this.b=m,this.a=y,S||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[s,u,m,y]))}static parse(s){if(s instanceof $r)return s;if(typeof s!="string")return;let u=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];let y=cp(Oc,m);if(y){let[I,C,O]=y;return[I/255,C/255,O/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){let I=m.length<6?1:2,C=1;return[xm(m.slice(C,C+=I)),xm(m.slice(C,C+=I)),xm(m.slice(C,C+=I)),xm(m.slice(C,C+I)||"ff")]}if(m.startsWith("rgb")){let I=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){let[C,O,q,z,G,Y,X,Q,re,le,me,qe]=I,Te=[z||" ",X||" ",le].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){let Ce=[q,Y,re].join(""),$e=Ce==="%%%"?100:Ce===""?255:0;if($e){let et=[Gr(+O/$e,0,1),Gr(+G/$e,0,1),Gr(+Q/$e,0,1),me?sl(+me,qe):1];if(Ff(et))return et}}return}}let S=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){let[I,C,O,q,z,G,Y,X,Q]=S,re=[O||" ",z||" ",Y].join("");if(re==="  "||re==="  /"||re===",,"||re===",,,"){let le=[+C,Gr(+q,0,100),Gr(+G,0,100),X?sl(+X,Q):1];if(Ff(le))return function([me,qe,Te,Ce]){function $e(et){let ht=(et+me/30)%12,Rt=qe*Math.min(Te,1-Te);return Te-Rt*Math.max(-1,Math.min(ht-3,9-ht,1))}return me=cb(me),qe/=100,Te/=100,[$e(0),$e(8),$e(4),Ce]}(le)}}}(s);return u?new $r(...u,!1):void 0}get rgb(){let{r:s,g:u,b:m,a:y}=this,S=y||1/0;return this.overwriteGetter("rgb",[s/S,u/S,m/S,y])}get hcl(){return this.overwriteGetter("hcl",function(s){let[u,m,y,S]=lp(s),I=Math.sqrt(m*m+y*y);return[Math.round(1e4*I)?cb(Math.atan2(y,m)*Oq):NaN,I,u,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",lp(this.rgb))}overwriteGetter(s,u){return Object.defineProperty(this,s,{value:u}),u}toString(){let[s,u,m,y]=this.rgb;return`rgba(${[s,u,m].map(S=>Math.round(255*S)).join(",")},${y})`}static interpolate(s,u,m,y="rgb"){switch(y){case"rgb":{let[S,I,C,O]=jf(s.rgb,u.rgb,m);return new $r(S,I,C,O,!1)}case"hcl":{let[S,I,C,O]=s.hcl,[q,z,G,Y]=u.hcl,X,Q;if(isNaN(S)||isNaN(q))isNaN(S)?isNaN(q)?X=NaN:(X=q,C!==1&&C!==0||(Q=z)):(X=S,G!==1&&G!==0||(Q=I));else{let Te=q-S;q>S&&Te>180?Te-=360:q<S&&S-q>180&&(Te+=360),X=S+m*Te}let[re,le,me,qe]=function([Te,Ce,$e,et]){return Te=isNaN(Te)?0:Te*Rq,up([$e,Math.cos(Te)*Ce,Math.sin(Te)*Ce,et])}([X,Q!=null?Q:qu(I,z,m),qu(C,G,m),qu(O,Y,m)]);return new $r(re,le,me,qe,!1)}case"lab":{let[S,I,C,O]=up(jf(s.lab,u.lab,m));return new $r(S,I,C,O,!1)}}}}$r.black=new $r(0,0,0,1),$r.white=new $r(1,1,1,1),$r.transparent=new $r(0,0,0,0),$r.red=new $r(1,0,0,1);class zf{constructor(s,u,m){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let Pv=["bottom","center","top"];class Rv{constructor(s,u,m,y,S,I){this.text=s,this.image=u,this.scale=m,this.fontStack=y,this.textColor=S,this.verticalAlign=I}}class ia{constructor(s){this.sections=s}static fromString(s){return new ia([new Rv(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof ia?s:ia.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class co{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof co)return s;if(typeof s=="number")return new co([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(let u of s)if(typeof u!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new co(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,m){return new co(jf(s.values,u.values,m))}}class oa{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof oa)return s;if(typeof s=="number")return new oa([s]);if(Array.isArray(s)){for(let u of s)if(typeof u!="number")return;return new oa(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,m){return new oa(jf(s.values,u.values,m))}}class Gi{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Gi)return s;if(typeof s=="string"){let m=$r.parse(s);return m?new Gi([m]):void 0}if(!Array.isArray(s))return;let u=[];for(let m of s){if(typeof m!="string")return;let y=$r.parse(m);if(!y)return;u.push(y)}return new Gi(u)}toString(){return JSON.stringify(this.values)}static interpolate(s,u,m,y="rgb"){let S=[];if(s.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let I=0;I<s.values.length;I++)S.push($r.interpolate(s.values[I],u.values[I],m,y));return new Gi(S)}}class Bn extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}let uA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class aa{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof aa)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let u=0;u<s.length;u+=2){let m=s[u],y=s[u+1];if(typeof m!="string"||!uA.has(m)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new aa(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,m){let y=s.values,S=u.values;if(y.length!==S.length)throw new Bn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${u.toString()}`);let I=[];for(let C=0;C<y.length;C+=2){if(y[C]!==S[C])throw new Bn(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${y[C]}, to[${C}]: ${S[C]}`);I.push(y[C]);let[O,q]=y[C+1],[z,G]=S[C+1];I.push([qu(O,z,m),qu(q,G,m)])}return new aa(I)}}class es{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new es({name:s,available:!1}):null}}class Go{constructor(s,u,m){this.from=s,this.to=u,this.transition=m}static interpolate(s,u,m){return new Go(s,u,m)}static parse(s){return s instanceof Go?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new Go(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new Go(s.from,s.to,s.transition):typeof s=="string"?new Go(s,s,1):void 0}}function Jn(c,s,u,m){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof u=="number"&&u>=0&&u<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,s,u,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,s,u,m]:[c,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Uf(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Go||c instanceof $r||c instanceof zf||c instanceof ia||c instanceof co||c instanceof oa||c instanceof Gi||c instanceof aa||c instanceof es)return!0;if(Array.isArray(c)){for(let s of c)if(!Uf(s))return!1;return!0}if(typeof c=="object"){for(let s in c)if(!Uf(c[s]))return!1;return!0}return!1}function cr(c){if(c===null)return Ss;if(typeof c=="string")return Rr;if(typeof c=="boolean")return Er;if(typeof c=="number")return wt;if(c instanceof $r)return _n;if(c instanceof Go)return Vi;if(c instanceof zf)return qf;if(c instanceof ia)return Cc;if(c instanceof co)return Mv;if(c instanceof oa)return ap;if(c instanceof Gi)return jl;if(c instanceof aa)return Cv;if(c instanceof es)return Ai;if(Array.isArray(c)){let s=c.length,u;for(let m of c){let y=cr(m);if(u){if(u===y)continue;u=Ir;break}u=y}return Aa(u||Ir,s)}return Ts}function Ar(c){let s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof $r||c instanceof Go||c instanceof ia||c instanceof co||c instanceof oa||c instanceof Gi||c instanceof aa||c instanceof es?c.toString():JSON.stringify(c)}class Fu{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(s.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Uf(s[1]))return u.error("invalid value");let m=s[1],y=cr(m),S=u.expectedType;return y.kind!=="array"||y.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(y=S),new Fu(y,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let nn={string:Rr,number:wt,boolean:Er,object:Ts};class ts{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let m,y=1,S=s[0];if(S==="array"){let C,O;if(s.length>2){let q=s[1];if(typeof q!="string"||!(q in nn)||q==="object")return u.error("The item type argument of \"array\" must be one of string, number, boolean",1);C=nn[q],y++}else C=Ir;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return u.error("The length argument to \"array\" must be a positive integer literal",2);O=s[2],y++}m=Aa(C,O)}else{if(!nn[S])throw new Error(`Types doesn't contain name = ${S}`);m=nn[S]}let I=[];for(;y<s.length;y++){let C=u.parse(s[y],y,Ir);if(!C)return null;I.push(C)}return new ts(m,I)}evaluate(s){for(let u=0;u<this.args.length;u++){let m=this.args[u].evaluate(s);if(!_m(this.type,cr(m)))return m;if(u===this.args.length-1)throw new Bn(`Expected value to be of type ${Un(this.type)}, but found ${Un(cr(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let zl={"to-boolean":Er,"to-color":_n,"to-number":wt,"to-string":Rr};class Ul{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let m=s[0];if(!zl[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&s.length!==2)return u.error("Expected one argument.");let y=zl[m],S=[];for(let I=1;I<s.length;I++){let C=u.parse(s[I],I,Ir);if(!C)return null;S.push(C)}return new Ul(y,S)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let u,m;for(let y of this.args){if(u=y.evaluate(s),m=null,u instanceof $r)return u;if(typeof u=="string"){let S=s.parseColor(u);if(S)return S}else if(Array.isArray(u)&&(m=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Jn(u[0],u[1],u[2],u[3]),!m))return new $r(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Bn(m||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(let m of this.args){u=m.evaluate(s);let y=co.parse(u);if(y)return y}throw new Bn(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(let m of this.args){u=m.evaluate(s);let y=oa.parse(u);if(y)return y}throw new Bn(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(let m of this.args){u=m.evaluate(s);let y=Gi.parse(u);if(y)return y}throw new Bn(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(let m of this.args){u=m.evaluate(s);let y=aa.parse(u);if(y)return y}throw new Bn(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(let m of this.args){if(u=m.evaluate(s),u===null)return 0;let y=Number(u);if(!isNaN(y))return y}throw new Bn(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return ia.fromString(Ar(this.args[0].evaluate(s)));case"resolvedImage":return es.fromString(Ar(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return Ar(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let Ov=["Unknown","Point","LineString","Polygon"];class mb{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ov[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let u=this._parseColorCache.get(s);return u||(u=$r.parse(s),this._parseColorCache.set(s,u)),u}}class fp{constructor(s,u,m=[],y,S=new Ia,I=[]){this.registry=s,this.path=m,this.key=m.map(C=>`[${C}]`).join(""),this.scope=S,this.errors=I,this.expectedType=y,this._isConstant=u}parse(s,u,m,y,S={}){return u?this.concat(u,m,y)._parse(s,S):this._parse(s,S)}_parse(s,u){function m(y,S,I){return I==="assert"?new ts(S,[y]):I==="coerce"?new Ul(S,[y]):y}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let y=s[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let S=this.registry[y];if(S){let I=S.parse(s,this);if(!I)return null;if(this.expectedType){let C=this.expectedType,O=I.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||O.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(O.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(O.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(O.kind)||C.kind==="colorArray"&&["value","string","array"].includes(O.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(O.kind))I=m(I,C,u.typeAnnotation||"coerce");else if(this.checkSubtype(C,O))return null}else I=m(I,C,u.typeAnnotation||"assert")}if(!(I instanceof Fu)&&I.type.kind!=="resolvedImage"&&this._isConstant(I)){let C=new mb;try{I=new Fu(I.type,I.evaluate(C))}catch(O){return this.error(O.message),null}}return I}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof s} instead.`)}concat(s,u,m){let y=typeof s=="number"?this.path.concat(s):this.path,S=m?this.scope.concat(m):this.scope;return new fp(this.registry,this._isConstant,y,u||null,S,this.errors)}error(s,...u){let m=`${this.key}${u.map(y=>`[${y}]`).join("")}`;this.errors.push(new Tn(m,s))}checkSubtype(s,u){let m=_m(s,u);return m&&this.error(m),m}}class bm{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(let u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);let m=[];for(let S=1;S<s.length-1;S+=2){let I=s[S];if(typeof I!="string")return u.error(`Expected string, but found ${typeof I} instead.`,S);if(/[^a-zA-Z0-9_]/.test(I))return u.error("Variable names must contain only alphanumeric characters or '_'.",S);let C=u.parse(s[S+1],S+1);if(!C)return null;m.push([I,C])}let y=u.parse(s[s.length-1],s.length-1,u.expectedType,m);return y?new bm(m,y):null}outputDefined(){return this.result.outputDefined()}}class Lv{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(s.length!==2||typeof s[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");let m=s[1];return u.scope.has(m)?new Lv(m,u.scope.get(m)):u.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Dv{constructor(s,u,m){this.type=s,this.index=u,this.input=m}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let m=u.parse(s[1],1,wt),y=u.parse(s[2],2,Aa(u.expectedType||Ir));return m&&y?new Dv(y.type.itemType,m,y):null}evaluate(s){let u=this.index.evaluate(s),m=this.input.evaluate(s);if(u<0)throw new Bn(`Array index out of bounds: ${u} < 0.`);if(u>=m.length)throw new Bn(`Array index out of bounds: ${u} > ${m.length-1}.`);if(u!==Math.floor(u))throw new Bn(`Array index must be an integer, but found ${u} instead.`);return m[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Nv{constructor(s,u){this.type=Er,this.needle=s,this.haystack=u}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let m=u.parse(s[1],1,Ir),y=u.parse(s[2],2,Ir);return m&&y?lb(m.type,[Er,Rr,wt,Ss,Ir])?new Nv(m,y):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Un(m.type)} instead`):null}evaluate(s){let u=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!Pc(u,["boolean","string","number","null"]))throw new Bn(`Expected first argument to be of type boolean, string, number or null, but found ${Un(cr(u))} instead.`);if(!Pc(m,["string","array"]))throw new Bn(`Expected second argument to be of type array or string, but found ${Un(cr(m))} instead.`);return m.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class ll{constructor(s,u,m){this.type=wt,this.needle=s,this.haystack=u,this.fromIndex=m}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let m=u.parse(s[1],1,Ir),y=u.parse(s[2],2,Ir);if(!m||!y)return null;if(!lb(m.type,[Er,Rr,wt,Ss,Ir]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Un(m.type)} instead`);if(s.length===4){let S=u.parse(s[3],3,wt);return S?new ll(m,y,S):null}return new ll(m,y)}evaluate(s){let u=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!Pc(u,["boolean","string","number","null"]))throw new Bn(`Expected first argument to be of type boolean, string, number or null, but found ${Un(cr(u))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(s)),Pc(m,["string"])){let S=m.indexOf(u,y);return S===-1?-1:[...m.slice(0,S)].length}if(Pc(m,["array"]))return m.indexOf(u,y);throw new Bn(`Expected second argument to be of type array or string, but found ${Un(cr(m))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class fo{constructor(s,u,m,y,S,I){this.inputType=s,this.type=u,this.input=m,this.cases=y,this.outputs=S,this.otherwise=I}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let m,y;u.expectedType&&u.expectedType.kind!=="value"&&(y=u.expectedType);let S={},I=[];for(let q=2;q<s.length-1;q+=2){let z=s[q],G=s[q+1];Array.isArray(z)||(z=[z]);let Y=u.concat(q);if(z.length===0)return Y.error("Expected at least one branch label.");for(let Q of z){if(typeof Q!="number"&&typeof Q!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Y.error("Numeric branch labels must be integer values.");if(m){if(Y.checkSubtype(m,cr(Q)))return null}else m=cr(Q);if(S[String(Q)]!==void 0)return Y.error("Branch labels must be unique.");S[String(Q)]=I.length}let X=u.parse(G,q,y);if(!X)return null;y=y||X.type,I.push(X)}let C=u.parse(s[1],1,Ir);if(!C)return null;let O=u.parse(s[s.length-1],s.length-1,y);return O?C.type.kind!=="value"&&u.concat(1).checkSubtype(m,C.type)?null:new fo(m,y,C,S,I,O):null}evaluate(s){let u=this.input.evaluate(s);return(cr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class hp{constructor(s,u,m){this.type=s,this.branches=u,this.otherwise=m}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);let y=[];for(let I=1;I<s.length-1;I+=2){let C=u.parse(s[I],I,Er);if(!C)return null;let O=u.parse(s[I+1],I+1,m);if(!O)return null;y.push([C,O]),m=m||O.type}let S=u.parse(s[s.length-1],s.length-1,m);if(!S)return null;if(!m)throw new Error("Can't infer output type");return new hp(m,y,S)}evaluate(s){for(let[u,m]of this.branches)if(u.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(let[u,m]of this.branches)s(u),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class wm{constructor(s,u,m,y){this.type=s,this.input=u,this.beginIndex=m,this.endIndex=y}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let m=u.parse(s[1],1,Ir),y=u.parse(s[2],2,wt);if(!m||!y)return null;if(!lb(m.type,[Aa(Ir),Rr,Ir]))return u.error(`Expected first argument to be of type array or string, but found ${Un(m.type)} instead`);if(s.length===4){let S=u.parse(s[3],3,wt);return S?new wm(m.type,m,y,S):null}return new wm(m.type,m,y)}evaluate(s){let u=this.input.evaluate(s),m=this.beginIndex.evaluate(s),y;if(this.endIndex&&(y=this.endIndex.evaluate(s)),Pc(u,["string"]))return[...u].slice(m,y).join("");if(Pc(u,["array"]))return u.slice(m,y);throw new Bn(`Expected first argument to be of type array or string, but found ${Un(cr(u))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Bf(c,s){let u=c.length-1,m,y,S=0,I=u,C=0;for(;S<=I;)if(C=Math.floor((S+I)/2),m=c[C],y=c[C+1],m<=s){if(C===u||s<y)return C;S=C+1}else{if(!(m>s))throw new Bn("Input is not a number.");I=C-1}return 0}class Mi{constructor(s,u,m){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(let[y,S]of m)this.labels.push(y),this.outputs.push(S)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");let m=u.parse(s[1],1,wt);if(!m)return null;let y=[],S=null;u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);for(let I=1;I<s.length;I+=2){let C=I===1?-1/0:s[I],O=s[I+1],q=I,z=I+1;if(typeof C!="number")return u.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",q);if(y.length&&y[y.length-1][0]>=C)return u.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",q);let G=u.parse(O,z,S);if(!G)return null;S=S||G.type,y.push([C,G])}return new Mi(S,m,y)}evaluate(s){let u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(s);let y=this.input.evaluate(s);if(y<=u[0])return m[0].evaluate(s);let S=u.length;return y>=u[S-1]?m[S-1].evaluate(s):m[Bf(u,y)].evaluate(s)}eachChild(s){s(this.input);for(let u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function cA(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Em,gb,Dq=function(){if(gb)return Em;function c(s,u,m,y){this.cx=3*s,this.bx=3*(m-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(y-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=m,this.p2y=y}return gb=1,Em=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var m=s,y=0;y<8;y++){var S=this.sampleCurveX(m)-s;if(Math.abs(S)<u)return m;var I=this.sampleCurveDerivativeX(m);if(Math.abs(I)<1e-6)break;m-=S/I}var C=0,O=1;for(m=s,y=0;y<20&&(S=this.sampleCurveX(m),!(Math.abs(S-s)<u));y++)s>S?C=m:O=m,m=.5*(O-C)+C;return m},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},Em}(),pp=cA(Dq);class Mo{constructor(s,u,m,y,S){this.type=s,this.operator=u,this.interpolation=m,this.input=y,this.labels=[],this.outputs=[];for(let[I,C]of S)this.labels.push(I),this.outputs.push(C)}static interpolationFactor(s,u,m,y){let S=0;if(s.name==="exponential")S=Sm(u,s.base,m,y);else if(s.name==="linear")S=Sm(u,1,m,y);else if(s.name==="cubic-bezier"){let I=s.controlPoints;S=new pp(I[0],I[1],I[2],I[3]).solve(Sm(u,1,m,y))}return S}static parse(s,u){let[m,y,S,...I]=s;if(!Array.isArray(y)||y.length===0)return u.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){let q=y[1];if(typeof q!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:q}}else{if(y[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(y[0])}`,1,0);{let q=y.slice(1);if(q.length!==4||q.some(z=>typeof z!="number"||z<0||z>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:q}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(S=u.parse(S,2,wt),!S)return null;let C=[],O=null;m!=="interpolate-hcl"&&m!=="interpolate-lab"||u.expectedType==jl?u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType):O=_n;for(let q=0;q<I.length;q+=2){let z=I[q],G=I[q+1],Y=q+3,X=q+4;if(typeof z!="number")return u.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",Y);if(C.length&&C[C.length-1][0]>=z)return u.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",Y);let Q=u.parse(G,X,O);if(!Q)return null;O=O||Q.type,C.push([z,Q])}return Rc(O,wt)||Rc(O,Vi)||Rc(O,_n)||Rc(O,Mv)||Rc(O,ap)||Rc(O,jl)||Rc(O,Cv)||Rc(O,Aa(wt))?new Mo(O,m,y,S,C):u.error(`Type ${Un(O)} is not interpolatable.`)}evaluate(s){let u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(s);let y=this.input.evaluate(s);if(y<=u[0])return m[0].evaluate(s);let S=u.length;if(y>=u[S-1])return m[S-1].evaluate(s);let I=Bf(u,y),C=Mo.interpolationFactor(this.interpolation,y,u[I],u[I+1]),O=m[I].evaluate(s),q=m[I+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return qu(O,q,C);case"color":return $r.interpolate(O,q,C);case"padding":return co.interpolate(O,q,C);case"colorArray":return Gi.interpolate(O,q,C);case"numberArray":return oa.interpolate(O,q,C);case"variableAnchorOffsetCollection":return aa.interpolate(O,q,C);case"array":return jf(O,q,C);case"projectionDefinition":return Go.interpolate(O,q,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return $r.interpolate(O,q,C,"hcl");case"colorArray":return Gi.interpolate(O,q,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return $r.interpolate(O,q,C,"lab");case"colorArray":return Gi.interpolate(O,q,C,"lab")}}}eachChild(s){s(this.input);for(let u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Sm(c,s,u,m){let y=m-u,S=c-u;return y===0?0:s===1?S/y:(Math.pow(s,S)-1)/(Math.pow(s,y)-1)}let Bl={color:$r.interpolate,number:qu,padding:co.interpolate,numberArray:oa.interpolate,colorArray:Gi.interpolate,variableAnchorOffsetCollection:aa.interpolate,array:jf};class Tm{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let m=null,y=u.expectedType;y&&y.kind!=="value"&&(m=y);let S=[];for(let C of s.slice(1)){let O=u.parse(C,1+S.length,m,void 0,{typeAnnotation:"omit"});if(!O)return null;m=m||O.type,S.push(O)}if(!m)throw new Error("No output type");let I=y&&S.some(C=>_m(y,C.type));return new Tm(I?Ir:m,S)}evaluate(s){let u,m=null,y=0;for(let S of this.args)if(y++,m=S.evaluate(s),m&&m instanceof es&&!m.available&&(u||(u=m.name),m=null,y===this.args.length&&(m=u)),m!==null)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function Im(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Am(c,s,u,m){return m.compare(s,u)===0}function $o(c,s,u){let m=c!=="=="&&c!=="!=";return class DOe{constructor(S,I,C){this.type=Er,this.lhs=S,this.rhs=I,this.collator=C,this.hasUntypedArgument=S.type.kind==="value"||I.type.kind==="value"}static parse(S,I){if(S.length!==3&&S.length!==4)return I.error("Expected two or three arguments.");let C=S[0],O=I.parse(S[1],1,Ir);if(!O)return null;if(!Im(C,O.type))return I.concat(1).error(`"${C}" comparisons are not supported for type '${Un(O.type)}'.`);let q=I.parse(S[2],2,Ir);if(!q)return null;if(!Im(C,q.type))return I.concat(2).error(`"${C}" comparisons are not supported for type '${Un(q.type)}'.`);if(O.type.kind!==q.type.kind&&O.type.kind!=="value"&&q.type.kind!=="value")return I.error(`Cannot compare types '${Un(O.type)}' and '${Un(q.type)}'.`);m&&(O.type.kind==="value"&&q.type.kind!=="value"?O=new ts(q.type,[O]):O.type.kind!=="value"&&q.type.kind==="value"&&(q=new ts(O.type,[q])));let z=null;if(S.length===4){if(O.type.kind!=="string"&&q.type.kind!=="string"&&O.type.kind!=="value"&&q.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(z=I.parse(S[3],3,qf),!z)return null}return new DOe(O,q,z)}evaluate(S){let I=this.lhs.evaluate(S),C=this.rhs.evaluate(S);if(m&&this.hasUntypedArgument){let O=cr(I),q=cr(C);if(O.kind!==q.kind||O.kind!=="string"&&O.kind!=="number")throw new Bn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${O.kind}, ${q.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){let O=cr(I),q=cr(C);if(O.kind!=="string"||q.kind!=="string")return s(S,I,C)}return this.collator?u(S,I,C,this.collator.evaluate(S)):s(S,I,C)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}let fA=$o("==",function(c,s,u){return s===u},Am),kv=$o("!=",function(c,s,u){return s!==u},function(c,s,u,m){return!Am(0,s,u,m)}),Nq=$o("<",function(c,s,u){return s<u},function(c,s,u,m){return m.compare(s,u)<0}),vb=$o(">",function(c,s,u){return s>u},function(c,s,u,m){return m.compare(s,u)>0}),kq=$o("<=",function(c,s,u){return s<=u},function(c,s,u,m){return m.compare(s,u)<=0}),qq=$o(">=",function(c,s,u){return s>=u},function(c,s,u,m){return m.compare(s,u)>=0});class qv{constructor(s,u,m){this.type=qf,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(s.length!==2)return u.error("Expected one argument.");let m=s[1];if(typeof m!="object"||Array.isArray(m))return u.error("Collator options argument must be an object.");let y=u.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Er);if(!y)return null;let S=u.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Er);if(!S)return null;let I=null;return m.locale&&(I=u.parse(m.locale,1,Rr),!I)?null:new qv(y,S,I)}evaluate(s){return new zf(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class yb{constructor(s,u,m,y,S){this.type=Rr,this.number=s,this.locale=u,this.currency=m,this.minFractionDigits=y,this.maxFractionDigits=S}static parse(s,u){if(s.length!==3)return u.error("Expected two arguments.");let m=u.parse(s[1],1,wt);if(!m)return null;let y=s[2];if(typeof y!="object"||Array.isArray(y))return u.error("NumberFormat options argument must be an object.");let S=null;if(y.locale&&(S=u.parse(y.locale,1,Rr),!S))return null;let I=null;if(y.currency&&(I=u.parse(y.currency,1,Rr),!I))return null;let C=null;if(y["min-fraction-digits"]&&(C=u.parse(y["min-fraction-digits"],1,wt),!C))return null;let O=null;return y["max-fraction-digits"]&&(O=u.parse(y["max-fraction-digits"],1,wt),!O)?null:new yb(m,S,I,C,O)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Vf{constructor(s){this.type=Cc,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let m=s[1];if(!Array.isArray(m)&&typeof m=="object")return u.error("First argument must be an image or text section.");let y=[],S=!1;for(let I=1;I<=s.length-1;++I){let C=s[I];if(S&&typeof C=="object"&&!Array.isArray(C)){S=!1;let O=null;if(C["font-scale"]&&(O=u.parse(C["font-scale"],1,wt),!O))return null;let q=null;if(C["text-font"]&&(q=u.parse(C["text-font"],1,Aa(Rr)),!q))return null;let z=null;if(C["text-color"]&&(z=u.parse(C["text-color"],1,_n),!z))return null;let G=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!Pv.includes(C["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(G=u.parse(C["vertical-align"],1,Rr),!G)return null}let Y=y[y.length-1];Y.scale=O,Y.font=q,Y.textColor=z,Y.verticalAlign=G}else{let O=u.parse(s[I],1,Ir);if(!O)return null;let q=O.type.kind;if(q!=="string"&&q!=="value"&&q!=="null"&&q!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,y.push({content:O,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Vf(y)}evaluate(s){return new ia(this.sections.map(u=>{let m=u.content.evaluate(s);return cr(m)===Ai?new Rv("",m,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(s):null):new Rv(Ar(m),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null,u.verticalAlign?u.verticalAlign.evaluate(s):null)}))}eachChild(s){for(let u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor),u.verticalAlign&&s(u.verticalAlign)}outputDefined(){return!1}}class _b{constructor(s){this.type=Ai,this.input=s}static parse(s,u){if(s.length!==2)return u.error("Expected two arguments.");let m=u.parse(s[1],1,Rr);return m?new _b(m):u.error("No image name provided.")}evaluate(s){let u=this.input.evaluate(s),m=es.fromString(u);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(u)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class Fv{constructor(s){this.type=wt,this.input=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);let m=u.parse(s[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Un(m.type)} instead.`):new Fv(m):null}evaluate(s){let u=this.input.evaluate(s);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new Bn(`Expected value to be of type string or array, but found ${Un(cr(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}let ul=8192;function Fq(c,s){let u=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,y=Math.pow(2,s.z);return[Math.round(u*y*ul),Math.round(m*y*ul)]}function jv(c,s){let u=Math.pow(2,s.z);return[(y=(c[0]/ul+s.x)/u,360*y-180),(m=(c[1]/ul+s.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,y}function Mm(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Cm(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function jq(c,s,u){let m=c[0]-s[0],y=c[1]-s[1],S=c[0]-u[0],I=c[1]-u[1];return m*I-S*y==0&&m*S<=0&&y*I<=0}function zv(c,s,u,m){return(y=[m[0]-u[0],m[1]-u[1]])[0]*(S=[s[0]-c[0],s[1]-c[1]])[1]-y[1]*S[0]!=0&&!(!pA(c,s,u,m)||!pA(u,m,c,s));var y,S}function zq(c,s,u){for(let m of u)for(let y=0;y<m.length-1;++y)if(zv(c,s,m[y],m[y+1]))return!0;return!1}function Gf(c,s,u=!1){let m=!1;for(let C of s)for(let O=0;O<C.length-1;O++){if(jq(c,C[O],C[O+1]))return u;(S=C[O])[1]>(y=c)[1]!=(I=C[O+1])[1]>y[1]&&y[0]<(I[0]-S[0])*(y[1]-S[1])/(I[1]-S[1])+S[0]&&(m=!m)}var y,S,I;return m}function hA(c,s){for(let u of s)if(Gf(c,u))return!0;return!1}function xb(c,s){for(let u of c)if(!Gf(u,s))return!1;for(let u=0;u<c.length-1;++u)if(zq(c[u],c[u+1],s))return!1;return!0}function Uq(c,s){for(let u of s)if(xb(c,u))return!0;return!1}function pA(c,s,u,m){let y=m[0]-u[0],S=m[1]-u[1],I=(c[0]-u[0])*S-y*(c[1]-u[1]),C=(s[0]-u[0])*S-y*(s[1]-u[1]);return I>0&&C<0||I<0&&C>0}function bb(c,s,u){let m=[];for(let y=0;y<c.length;y++){let S=[];for(let I=0;I<c[y].length;I++){let C=Fq(c[y][I],u);Mm(s,C),S.push(C)}m.push(S)}return m}function dA(c,s,u){let m=[];for(let y=0;y<c.length;y++){let S=bb(c[y],s,u);m.push(S)}return m}function Uv(c,s,u,m){if(c[0]<u[0]||c[0]>u[2]){let y=.5*m,S=c[0]-u[0]>y?-m:u[0]-c[0]>y?m:0;S===0&&(S=c[0]-u[2]>y?-m:u[2]-c[0]>y?m:0),c[0]+=S}Mm(s,c)}function mA(c,s,u,m){let y=Math.pow(2,m.z)*ul,S=[m.x*ul,m.y*ul],I=[];for(let C of c)for(let O of C){let q=[O.x+S[0],O.y+S[1]];Uv(q,s,u,y),I.push(q)}return I}function gA(c,s,u,m){let y=Math.pow(2,m.z)*ul,S=[m.x*ul,m.y*ul],I=[];for(let O of c){let q=[];for(let z of O){let G=[z.x+S[0],z.y+S[1]];Mm(s,G),q.push(G)}I.push(q)}if(s[2]-s[0]<=y/2){(C=s)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(let O of I)for(let q of O)Uv(q,s,u,y)}var C;return I}class $f{constructor(s,u){this.type=Er,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Uf(s[1])){let m=s[1];if(m.type==="FeatureCollection"){let y=[];for(let S of m.features){let{type:I,coordinates:C}=S.geometry;I==="Polygon"&&y.push(C),I==="MultiPolygon"&&y.push(...C)}if(y.length)return new $f(m,{type:"MultiPolygon",coordinates:y})}else if(m.type==="Feature"){let y=m.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new $f(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new $f(m,m)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,m){let y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(m.type==="Polygon"){let C=bb(m.coordinates,S,I),O=mA(u.geometry(),y,S,I);if(!Cm(y,S))return!1;for(let q of O)if(!Gf(q,C))return!1}if(m.type==="MultiPolygon"){let C=dA(m.coordinates,S,I),O=mA(u.geometry(),y,S,I);if(!Cm(y,S))return!1;for(let q of O)if(!hA(q,C))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,m){let y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(m.type==="Polygon"){let C=bb(m.coordinates,S,I),O=gA(u.geometry(),y,S,I);if(!Cm(y,S))return!1;for(let q of O)if(!xb(q,C))return!1}if(m.type==="MultiPolygon"){let C=dA(m.coordinates,S,I),O=gA(u.geometry(),y,S,I);if(!Cm(y,S))return!1;for(let q of O)if(!Uq(q,C))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let wb=class{constructor(c=[],s=(u,m)=>u<m?-1:u>m?1:0){if(this.data=c,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;let c=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),c}peek(){return this.data[0]}_up(c){let{data:s,compare:u}=this,m=s[c];for(;c>0;){let y=c-1>>1,S=s[y];if(u(m,S)>=0)break;s[c]=S,c=y}s[c]=m}_down(c){let{data:s,compare:u}=this,m=this.length>>1,y=s[c];for(;c<m;){let S=1+(c<<1),I=S+1;if(I<this.length&&u(s[I],s[S])<0&&(S=I),u(s[S],y)>=0)break;s[c]=s[S],c=S}s[c]=y}};function Eb(c,s,u=0,m=c.length-1,y=Bq){for(;m>u;){if(m-u>600){let O=m-u+1,q=s-u+1,z=Math.log(O),G=.5*Math.exp(2*z/3),Y=.5*Math.sqrt(z*G*(O-G)/O)*(q-O/2<0?-1:1);Eb(c,s,Math.max(u,Math.floor(s-q*G/O+Y)),Math.min(m,Math.floor(s+(O-q)*G/O+Y)),y)}let S=c[s],I=u,C=m;for(Pm(c,u,s),y(c[m],S)>0&&Pm(c,u,m);I<C;){for(Pm(c,I,C),I++,C--;y(c[I],S)<0;)I++;for(;y(c[C],S)>0;)C--}y(c[u],S)===0?Pm(c,u,C):(C++,Pm(c,C,m)),C<=s&&(u=C+1),s<=C&&(m=C-1)}}function Pm(c,s,u){let m=c[s];c[s]=c[u],c[u]=m}function Bq(c,s){return c<s?-1:c>s?1:0}function Rm(c,s){if(c.length<=1)return[c];let u=[],m,y;for(let S of c){let I=Vq(S);I!==0&&(S.area=Math.abs(I),y===void 0&&(y=I<0),y===I<0?(m&&u.push(m),m=[S]):m.push(S))}if(m&&u.push(m),s>1)for(let S=0;S<u.length;S++)u[S].length<=s||(Eb(u[S],s,1,u[S].length-1,vA),u[S]=u[S].slice(0,s));return u}function vA(c,s){return s.area-c.area}function Vq(c){let s=0;for(let u,m,y=0,S=c.length,I=S-1;y<S;I=y++)u=c[y],m=c[I],s+=(m.x-u.x)*(u.y+m.y);return s}let yA=1/298.257223563,_A=yA*(2-yA),Sb=Math.PI/180;class Tb{constructor(s){let u=6378.137*Sb*1e3,m=Math.cos(s*Sb),y=1/(1-_A*(1-m*m)),S=Math.sqrt(y);this.kx=u*S*m,this.ky=u*S*y*(1-_A)}distance(s,u){let m=this.wrap(s[0]-u[0])*this.kx,y=(s[1]-u[1])*this.ky;return Math.sqrt(m*m+y*y)}pointOnLine(s,u){let m,y,S,I,C=1/0;for(let O=0;O<s.length-1;O++){let q=s[O][0],z=s[O][1],G=this.wrap(s[O+1][0]-q)*this.kx,Y=(s[O+1][1]-z)*this.ky,X=0;G===0&&Y===0||(X=(this.wrap(u[0]-q)*this.kx*G+(u[1]-z)*this.ky*Y)/(G*G+Y*Y),X>1?(q=s[O+1][0],z=s[O+1][1]):X>0&&(q+=G/this.kx*X,z+=Y/this.ky*X)),G=this.wrap(u[0]-q)*this.kx,Y=(u[1]-z)*this.ky;let Q=G*G+Y*Y;Q<C&&(C=Q,m=q,y=z,S=O,I=X)}return{point:[m,y],index:S,t:Math.max(0,Math.min(1,I))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function xA(c,s){return s[0]-c[0]}function Bv(c){return c[1]-c[0]+1}function ju(c,s){return c[1]>=c[0]&&c[1]<s}function fn(c,s){if(c[0]>c[1])return[null,null];let u=Bv(c);if(s){if(u===2)return[c,null];let y=Math.floor(u/2);return[[c[0],c[0]+y],[c[0]+y,c[1]]]}if(u===1)return[c,null];let m=Math.floor(u/2)-1;return[[c[0],c[0]+m],[c[0]+m+1,c[1]]]}function Ib(c,s){if(!ju(s,c.length))return[1/0,1/0,-1/0,-1/0];let u=[1/0,1/0,-1/0,-1/0];for(let m=s[0];m<=s[1];++m)Mm(u,c[m]);return u}function Ab(c){let s=[1/0,1/0,-1/0,-1/0];for(let u of c)for(let m of u)Mm(s,m);return s}function bA(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function Mb(c,s,u){if(!bA(c)||!bA(s))return NaN;let m=0,y=0;return c[2]<s[0]&&(m=s[0]-c[2]),c[0]>s[2]&&(m=c[0]-s[2]),c[1]>s[3]&&(y=c[1]-s[3]),c[3]<s[1]&&(y=s[1]-c[3]),u.distance([0,0],[m,y])}function Hf(c,s,u){let m=u.pointOnLine(s,c);return u.distance(c,m.point)}function Cb(c,s,u,m,y){let S=Math.min(Hf(c,[u,m],y),Hf(s,[u,m],y)),I=Math.min(Hf(u,[c,s],y),Hf(m,[c,s],y));return Math.min(S,I)}function Gq(c,s,u,m,y){if(!ju(s,c.length)||!ju(m,u.length))return 1/0;let S=1/0;for(let I=s[0];I<s[1];++I){let C=c[I],O=c[I+1];for(let q=m[0];q<m[1];++q){let z=u[q],G=u[q+1];if(zv(C,O,z,G))return 0;S=Math.min(S,Cb(C,O,z,G,y))}}return S}function $q(c,s,u,m,y){if(!ju(s,c.length)||!ju(m,u.length))return NaN;let S=1/0;for(let I=s[0];I<=s[1];++I)for(let C=m[0];C<=m[1];++C)if(S=Math.min(S,y.distance(c[I],u[C])),S===0)return S;return S}function Hq(c,s,u){if(Gf(c,s,!0))return 0;let m=1/0;for(let y of s){let S=y[0],I=y[y.length-1];if(S!==I&&(m=Math.min(m,Hf(c,[I,S],u)),m===0))return m;let C=u.pointOnLine(y,c);if(m=Math.min(m,u.distance(c,C.point)),m===0)return m}return m}function Wq(c,s,u,m){if(!ju(s,c.length))return NaN;for(let S=s[0];S<=s[1];++S)if(Gf(c[S],u,!0))return 0;let y=1/0;for(let S=s[0];S<s[1];++S){let I=c[S],C=c[S+1];for(let O of u)for(let q=0,z=O.length,G=z-1;q<z;G=q++){let Y=O[G],X=O[q];if(zv(I,C,Y,X))return 0;y=Math.min(y,Cb(I,C,Y,X,m))}}return y}function wA(c,s){for(let u of c)for(let m of u)if(Gf(m,s,!0))return!0;return!1}function Zq(c,s,u,m=1/0){let y=Ab(c),S=Ab(s);if(m!==1/0&&Mb(y,S,u)>=m)return m;if(Cm(y,S)){if(wA(c,s))return 0}else if(wA(s,c))return 0;let I=1/0;for(let C of c)for(let O=0,q=C.length,z=q-1;O<q;z=O++){let G=C[z],Y=C[O];for(let X of s)for(let Q=0,re=X.length,le=re-1;Q<re;le=Q++){let me=X[le],qe=X[Q];if(zv(G,Y,me,qe))return 0;I=Math.min(I,Cb(G,Y,me,qe,u))}}return I}function EA(c,s,u,m,y,S){if(!S)return;let I=Mb(Ib(m,S),y,u);I<s&&c.push([I,S,[0,0]])}function Vv(c,s,u,m,y,S,I){if(!S||!I)return;let C=Mb(Ib(m,S),Ib(y,I),u);C<s&&c.push([C,S,I])}function Gv(c,s,u,m,y=1/0){let S=Math.min(m.distance(c[0],u[0][0]),y);if(S===0)return S;let I=new wb([[0,[0,c.length-1],[0,0]]],xA),C=Ab(u);for(;I.length>0;){let O=I.pop();if(O[0]>=S)continue;let q=O[1],z=s?50:100;if(Bv(q)<=z){if(!ju(q,c.length))return NaN;if(s){let G=Wq(c,q,u,m);if(isNaN(G)||G===0)return G;S=Math.min(S,G)}else for(let G=q[0];G<=q[1];++G){let Y=Hq(c[G],u,m);if(S=Math.min(S,Y),S===0)return 0}}else{let G=fn(q,s);EA(I,S,m,c,C,G[0]),EA(I,S,m,c,C,G[1])}}return S}function $v(c,s,u,m,y,S=1/0){let I=Math.min(S,y.distance(c[0],u[0]));if(I===0)return I;let C=new wb([[0,[0,c.length-1],[0,u.length-1]]],xA);for(;C.length>0;){let O=C.pop();if(O[0]>=I)continue;let q=O[1],z=O[2],G=s?50:100,Y=m?50:100;if(Bv(q)<=G&&Bv(z)<=Y){if(!ju(q,c.length)&&ju(z,u.length))return NaN;let X;if(s&&m)X=Gq(c,q,u,z,y),I=Math.min(I,X);else if(s&&!m){let Q=c.slice(q[0],q[1]+1);for(let re=z[0];re<=z[1];++re)if(X=Hf(u[re],Q,y),I=Math.min(I,X),I===0)return I}else if(!s&&m){let Q=u.slice(z[0],z[1]+1);for(let re=q[0];re<=q[1];++re)if(X=Hf(c[re],Q,y),I=Math.min(I,X),I===0)return I}else X=$q(c,q,u,z,y),I=Math.min(I,X)}else{let X=fn(q,s),Q=fn(z,m);Vv(C,I,y,c,u,X[0],Q[0]),Vv(C,I,y,c,u,X[0],Q[1]),Vv(C,I,y,c,u,X[1],Q[0]),Vv(C,I,y,c,u,X[1],Q[1])}}return I}function Pb(c){return c.type==="MultiPolygon"?c.coordinates.map(s=>({type:"Polygon",coordinates:s})):c.type==="MultiLineString"?c.coordinates.map(s=>({type:"LineString",coordinates:s})):c.type==="MultiPoint"?c.coordinates.map(s=>({type:"Point",coordinates:s})):[c]}class Wf{constructor(s,u){this.type=wt,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Uf(s[1])){let m=s[1];if(m.type==="FeatureCollection")return new Wf(m,m.features.map(y=>Pb(y.geometry)).flat());if(m.type==="Feature")return new Wf(m,Pb(m.geometry));if("type"in m&&"coordinates"in m)return new Wf(m,Pb(m))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,m){let y=u.geometry(),S=y.flat().map(O=>jv([O.x,O.y],u.canonical));if(y.length===0)return NaN;let I=new Tb(S[0][1]),C=1/0;for(let O of m){switch(O.type){case"Point":C=Math.min(C,$v(S,!1,[O.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,$v(S,!1,O.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,Gv(S,!1,O.coordinates,I,C))}if(C===0)return C}return C}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,m){let y=u.geometry(),S=y.flat().map(O=>jv([O.x,O.y],u.canonical));if(y.length===0)return NaN;let I=new Tb(S[0][1]),C=1/0;for(let O of m){switch(O.type){case"Point":C=Math.min(C,$v(S,!0,[O.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,$v(S,!0,O.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,Gv(S,!0,O.coordinates,I,C))}if(C===0)return C}return C}(s,this.geometries);if(s.geometryType()==="Polygon")return function(u,m){let y=u.geometry();if(y.length===0||y[0].length===0)return NaN;let S=Rm(y,0).map(O=>O.map(q=>q.map(z=>jv([z.x,z.y],u.canonical)))),I=new Tb(S[0][0][0][1]),C=1/0;for(let O of m)for(let q of S){switch(O.type){case"Point":C=Math.min(C,Gv([O.coordinates],!1,q,I,C));break;case"LineString":C=Math.min(C,Gv(O.coordinates,!0,q,I,C));break;case"Polygon":C=Math.min(C,Zq(q,O.coordinates,I,C))}if(C===0)return C}return C}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Om{constructor(s){this.type=Ir,this.key=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);let m=s[1];return m==null?u.error("Global state property must be defined."):typeof m!="string"?u.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new Om(m)}evaluate(s){var u;let m=(u=s.globals)===null||u===void 0?void 0:u.globalState;return m&&Object.keys(m).length!==0?cp(m,this.key):null}eachChild(){}outputDefined(){return!1}}let dp={"==":fA,"!=":kv,">":vb,"<":Nq,">=":qq,"<=":kq,array:ts,at:Dv,boolean:ts,case:hp,coalesce:Tm,collator:qv,format:Vf,image:_b,in:Nv,"index-of":ll,interpolate:Mo,"interpolate-hcl":Mo,"interpolate-lab":Mo,length:Fv,let:bm,literal:Fu,match:fo,number:ts,"number-format":yb,object:ts,slice:wm,step:Mi,string:ts,"to-boolean":Ul,"to-color":Ul,"to-number":Ul,"to-string":Ul,var:Lv,within:$f,distance:Wf,"global-state":Om};class Is{constructor(s,u,m,y){this.name=s,this.type=u,this._evaluate=m,this.args=y}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,u){let m=s[0],y=Is.definitions[m];if(!y)return u.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);let S=Array.isArray(y)?y[0]:y.type,I=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,C=I.filter(([q])=>!Array.isArray(q)||q.length===s.length-1),O=null;for(let[q,z]of C){O=new fp(u.registry,Hv,u.path,null,u.scope);let G=[],Y=!1;for(let X=1;X<s.length;X++){let Q=s[X],re=Array.isArray(q)?q[X-1]:q.type,le=O.parse(Q,1+G.length,re);if(!le){Y=!0;break}G.push(le)}if(!Y)if(Array.isArray(q)&&q.length!==G.length)O.error(`Expected ${q.length} arguments, but found ${G.length} instead.`);else{for(let X=0;X<G.length;X++){let Q=Array.isArray(q)?q[X]:q.type,re=G[X];O.concat(X+1).checkSubtype(Q,re.type)}if(O.errors.length===0)return new Is(m,S,z,G)}}if(C.length===1)u.errors.push(...O.errors);else{let q=(C.length?C:I).map(([G])=>{return Y=G,Array.isArray(Y)?`(${Y.map(Un).join(", ")})`:`(${Un(Y.type)}...)`;var Y}).join(" | "),z=[];for(let G=1;G<s.length;G++){let Y=u.parse(s[G],1+z.length);if(!Y)return null;z.push(Un(Y.type))}u.error(`Expected arguments of type ${q}, but found (${z.join(", ")}) instead.`)}return null}static register(s,u){Is.definitions=u;for(let m in u)s[m]=Is}}function SA(c,[s,u,m,y]){s=s.evaluate(c),u=u.evaluate(c),m=m.evaluate(c);let S=y?y.evaluate(c):1,I=Jn(s,u,m,S);if(I)throw new Bn(I);return new $r(s/255,u/255,m/255,S,!1)}function TA(c,s){return c in s}function Rb(c,s){let u=s[c];return u===void 0?null:u}function Zf(c){return{type:c}}function Hv(c){if(c instanceof Lv)return Hv(c.boundExpression);if(c instanceof Is&&c.name==="error"||c instanceof qv||c instanceof $f||c instanceof Wf||c instanceof Om)return!1;let s=c instanceof Ul||c instanceof ts,u=!0;return c.eachChild(m=>{u=s?u&&Hv(m):u&&m instanceof Fu}),!!u&&Wv(c)&&Zv(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Wv(c){if(c instanceof Is&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof $f||c instanceof Wf)return!1;let s=!0;return c.eachChild(u=>{s&&!Wv(u)&&(s=!1)}),s}function Lm(c){if(c instanceof Is&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(u=>{s&&!Lm(u)&&(s=!1)}),s}function Zv(c,s){if(c instanceof Is&&s.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(m=>{u&&!Zv(m,s)&&(u=!1)}),u}function IA(c){return{result:"success",value:c}}function mp(c){return{result:"error",value:c}}function Lc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function AA(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Ob(c){return!!c.expression&&c.expression.interpolated}function Zr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Dm(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&cr(c)===Ts}function Yq(c){return c}function MA(c,s){let u=c.stops&&typeof c.stops[0][0]=="object",m=u||!(u||c.property!==void 0),y=c.type||(Ob(s)?"exponential":"interval"),S=function(z){switch(z.type){case"color":return $r.parse;case"padding":return co.parse;case"numberArray":return oa.parse;case"colorArray":return Gi.parse;default:return null}}(s);if(S&&((c=si({},c)).stops&&(c.stops=c.stops.map(z=>[z[0],S(z[1])])),c.default=S(c.default?c.default:s.default)),c.colorSpace&&(I=c.colorSpace)!=="rgb"&&I!=="hcl"&&I!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var I;let C=function(z){switch(z){case"exponential":return PA;case"interval":return Kq;case"categorical":return CA;case"identity":return Xq;default:throw new Error(`Unknown function type "${z}"`)}}(y),O,q;if(y==="categorical"){O=Object.create(null);for(let z of c.stops)O[z[0]]=z[1];q=typeof c.stops[0][0]}if(u){let z={},G=[];for(let Q=0;Q<c.stops.length;Q++){let re=c.stops[Q],le=re[0].zoom;z[le]===void 0&&(z[le]={zoom:le,type:c.type,property:c.property,default:c.default,stops:[]},G.push(le)),z[le].stops.push([re[0].value,re[1]])}let Y=[];for(let Q of G)Y.push([z[Q].zoom,MA(z[Q],s)]);let X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:Mo.interpolationFactor.bind(void 0,X),zoomStops:Y.map(Q=>Q[0]),evaluate:({zoom:Q},re)=>PA({stops:Y,base:c.base},s,Q).evaluate(Q,re)}}if(m){let z=y==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Mo.interpolationFactor.bind(void 0,z),zoomStops:c.stops.map(G=>G[0]),evaluate:({zoom:G})=>C(c,s,G,O,q)}}return{kind:"source",evaluate(z,G){let Y=G&&G.properties?G.properties[c.property]:void 0;return Y===void 0?Dc(c.default,s.default):C(c,s,Y,O,q)}}}function Dc(c,s,u){return c!==void 0?c:s!==void 0?s:u!==void 0?u:void 0}function CA(c,s,u,m,y){return Dc(typeof u===y?m[u]:void 0,c.default,s.default)}function Kq(c,s,u){if(Zr(u)!=="number")return Dc(c.default,s.default);let m=c.stops.length;if(m===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[m-1][0])return c.stops[m-1][1];let y=Bf(c.stops.map(S=>S[0]),u);return c.stops[y][1]}function PA(c,s,u){let m=c.base!==void 0?c.base:1;if(Zr(u)!=="number")return Dc(c.default,s.default);let y=c.stops.length;if(y===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[y-1][0])return c.stops[y-1][1];let S=Bf(c.stops.map(z=>z[0]),u),I=function(z,G,Y,X){let Q=X-Y,re=z-Y;return Q===0?0:G===1?re/Q:(Math.pow(G,re)-1)/(Math.pow(G,Q)-1)}(u,m,c.stops[S][0],c.stops[S+1][0]),C=c.stops[S][1],O=c.stops[S+1][1],q=Bl[s.type]||Yq;return typeof C.evaluate=="function"?{evaluate(...z){let G=C.evaluate.apply(void 0,z),Y=O.evaluate.apply(void 0,z);if(G!==void 0&&Y!==void 0)return q(G,Y,I,c.colorSpace)}}:q(C,O,I,c.colorSpace)}function Xq(c,s,u){switch(s.type){case"color":u=$r.parse(u);break;case"formatted":u=ia.fromString(u.toString());break;case"resolvedImage":u=es.fromString(u.toString());break;case"padding":u=co.parse(u);break;case"colorArray":u=Gi.parse(u);break;case"numberArray":u=oa.parse(u);break;default:Zr(u)===s.type||s.type==="enum"&&s.values[u]||(u=void 0)}return Dc(u,c.default,s.default)}Is.register(dp,{error:[{kind:"error"},[Rr],(c,[s])=>{throw new Bn(s.evaluate(c))}],typeof:[Rr,[Ir],(c,[s])=>Un(cr(s.evaluate(c)))],"to-rgba":[Aa(wt,4),[_n],(c,[s])=>{let[u,m,y,S]=s.evaluate(c).rgb;return[255*u,255*m,255*y,S]}],rgb:[_n,[wt,wt,wt],SA],rgba:[_n,[wt,wt,wt,wt],SA],has:{type:Er,overloads:[[[Rr],(c,[s])=>TA(s.evaluate(c),c.properties())],[[Rr,Ts],(c,[s,u])=>TA(s.evaluate(c),u.evaluate(c))]]},get:{type:Ir,overloads:[[[Rr],(c,[s])=>Rb(s.evaluate(c),c.properties())],[[Rr,Ts],(c,[s,u])=>Rb(s.evaluate(c),u.evaluate(c))]]},"feature-state":[Ir,[Rr],(c,[s])=>Rb(s.evaluate(c),c.featureState||{})],properties:[Ts,[],c=>c.properties()],"geometry-type":[Rr,[],c=>c.geometryType()],id:[Ir,[],c=>c.id()],zoom:[wt,[],c=>c.globals.zoom],"heatmap-density":[wt,[],c=>c.globals.heatmapDensity||0],elevation:[wt,[],c=>c.globals.elevation||0],"line-progress":[wt,[],c=>c.globals.lineProgress||0],accumulated:[Ir,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[wt,Zf(wt),(c,s)=>{let u=0;for(let m of s)u+=m.evaluate(c);return u}],"*":[wt,Zf(wt),(c,s)=>{let u=1;for(let m of s)u*=m.evaluate(c);return u}],"-":{type:wt,overloads:[[[wt,wt],(c,[s,u])=>s.evaluate(c)-u.evaluate(c)],[[wt],(c,[s])=>-s.evaluate(c)]]},"/":[wt,[wt,wt],(c,[s,u])=>s.evaluate(c)/u.evaluate(c)],"%":[wt,[wt,wt],(c,[s,u])=>s.evaluate(c)%u.evaluate(c)],ln2:[wt,[],()=>Math.LN2],pi:[wt,[],()=>Math.PI],e:[wt,[],()=>Math.E],"^":[wt,[wt,wt],(c,[s,u])=>Math.pow(s.evaluate(c),u.evaluate(c))],sqrt:[wt,[wt],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[wt,[wt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[wt,[wt],(c,[s])=>Math.log(s.evaluate(c))],log2:[wt,[wt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[wt,[wt],(c,[s])=>Math.sin(s.evaluate(c))],cos:[wt,[wt],(c,[s])=>Math.cos(s.evaluate(c))],tan:[wt,[wt],(c,[s])=>Math.tan(s.evaluate(c))],asin:[wt,[wt],(c,[s])=>Math.asin(s.evaluate(c))],acos:[wt,[wt],(c,[s])=>Math.acos(s.evaluate(c))],atan:[wt,[wt],(c,[s])=>Math.atan(s.evaluate(c))],min:[wt,Zf(wt),(c,s)=>Math.min(...s.map(u=>u.evaluate(c)))],max:[wt,Zf(wt),(c,s)=>Math.max(...s.map(u=>u.evaluate(c)))],abs:[wt,[wt],(c,[s])=>Math.abs(s.evaluate(c))],round:[wt,[wt],(c,[s])=>{let u=s.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[wt,[wt],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[wt,[wt],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Er,[Rr,Ir],(c,[s,u])=>c.properties()[s.value]===u.value],"filter-id-==":[Er,[Ir],(c,[s])=>c.id()===s.value],"filter-type-==":[Er,[Rr],(c,[s])=>c.geometryType()===s.value],"filter-<":[Er,[Rr,Ir],(c,[s,u])=>{let m=c.properties()[s.value],y=u.value;return typeof m==typeof y&&m<y}],"filter-id-<":[Er,[Ir],(c,[s])=>{let u=c.id(),m=s.value;return typeof u==typeof m&&u<m}],"filter->":[Er,[Rr,Ir],(c,[s,u])=>{let m=c.properties()[s.value],y=u.value;return typeof m==typeof y&&m>y}],"filter-id->":[Er,[Ir],(c,[s])=>{let u=c.id(),m=s.value;return typeof u==typeof m&&u>m}],"filter-<=":[Er,[Rr,Ir],(c,[s,u])=>{let m=c.properties()[s.value],y=u.value;return typeof m==typeof y&&m<=y}],"filter-id-<=":[Er,[Ir],(c,[s])=>{let u=c.id(),m=s.value;return typeof u==typeof m&&u<=m}],"filter->=":[Er,[Rr,Ir],(c,[s,u])=>{let m=c.properties()[s.value],y=u.value;return typeof m==typeof y&&m>=y}],"filter-id->=":[Er,[Ir],(c,[s])=>{let u=c.id(),m=s.value;return typeof u==typeof m&&u>=m}],"filter-has":[Er,[Ir],(c,[s])=>s.value in c.properties()],"filter-has-id":[Er,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Er,[Aa(Rr)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Er,[Aa(Ir)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Er,[Rr,Aa(Ir)],(c,[s,u])=>u.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Er,[Rr,Aa(Ir)],(c,[s,u])=>function(m,y,S,I){for(;S<=I;){let C=S+I>>1;if(y[C]===m)return!0;y[C]>m?I=C-1:S=C+1}return!1}(c.properties()[s.value],u.value,0,u.value.length-1)],all:{type:Er,overloads:[[[Er,Er],(c,[s,u])=>s.evaluate(c)&&u.evaluate(c)],[Zf(Er),(c,s)=>{for(let u of s)if(!u.evaluate(c))return!1;return!0}]]},any:{type:Er,overloads:[[[Er,Er],(c,[s,u])=>s.evaluate(c)||u.evaluate(c)],[Zf(Er),(c,s)=>{for(let u of s)if(u.evaluate(c))return!0;return!1}]]},"!":[Er,[Er],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Er,[Rr],(c,[s])=>{let u=c.globals&&c.globals.isSupportedScript;return!u||u(s.evaluate(c))}],upcase:[Rr,[Rr],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[Rr,[Rr],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[Rr,Zf(Ir),(c,s)=>s.map(u=>Ar(u.evaluate(c))).join("")],"resolved-locale":[Rr,[qf],(c,[s])=>s.evaluate(c).resolvedLocale()]});class Lb{constructor(s,u){this.expression=s,this._warningHistory={},this._evaluator=new mb,this._defaultValue=u?function(m){if(m.type==="color"&&Dm(m.default))return new $r(0,0,0,0);switch(m.type){case"color":return $r.parse(m.default)||null;case"padding":return co.parse(m.default)||null;case"numberArray":return oa.parse(m.default)||null;case"colorArray":return Gi.parse(m.default)||null;case"variableAnchorOffsetCollection":return aa.parse(m.default)||null;case"projectionDefinition":return Go.parse(m.default)||null;default:return m.default===void 0?null:m.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(s,u,m,y,S,I){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=m,this._evaluator.canonical=y,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(s,u,m,y,S,I){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=m||null,this._evaluator.canonical=y,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I||null;try{let C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Bn(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console!="undefined"&&console.warn(C.message)),this._defaultValue}}}function Yv(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in dp}function Nm(c,s){let u=new fp(dp,Hv,[],s?function(y){let S={color:_n,string:Rr,number:wt,enum:Rr,boolean:Er,formatted:Cc,padding:Mv,numberArray:ap,colorArray:jl,projectionDefinition:Vi,resolvedImage:Ai,variableAnchorOffsetCollection:Cv};return y.type==="array"?Aa(S[y.value]||Ir,y.length):S[y.type]}(s):void 0),m=u.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?IA(new Lb(m,s)):mp(u.errors)}class km{constructor(s,u){this.kind=s,this._styleExpression=u,this.isStateDependent=s!=="constant"&&!Lm(u.expression),this.globalStateRefs=jm(u.expression)}evaluateWithoutErrorHandling(s,u,m,y,S,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,m,y,S,I)}evaluate(s,u,m,y,S,I){return this._styleExpression.evaluate(s,u,m,y,S,I)}}class Db{constructor(s,u,m,y){this.kind=s,this.zoomStops=m,this._styleExpression=u,this.isStateDependent=s!=="camera"&&!Lm(u.expression),this.globalStateRefs=jm(u.expression),this.interpolationType=y}evaluateWithoutErrorHandling(s,u,m,y,S,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,m,y,S,I)}evaluate(s,u,m,y,S,I){return this._styleExpression.evaluate(s,u,m,y,S,I)}interpolationFactor(s,u,m){return this.interpolationType?Mo.interpolationFactor(this.interpolationType,s,u,m):0}}function RA(c,s){let u=Nm(c,s);if(u.result==="error")return u;let m=u.value.expression,y=Wv(m);if(!y&&!Lc(s))return mp([new Tn("","data expressions not supported")]);let S=Zv(m,["zoom"]);if(!S&&!AA(s))return mp([new Tn("","zoom expressions not supported")]);let I=Fm(m);return I||S?I instanceof Tn?mp([I]):I instanceof Mo&&!Ob(s)?mp([new Tn("","\"interpolate\" expressions cannot be used with this property")]):IA(I?new Db(y?"camera":"composite",u.value,I.labels,I instanceof Mo?I.interpolation:void 0):new km(y?"constant":"source",u.value)):mp([new Tn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class qm{constructor(s,u){this._parameters=s,this._specification=u,si(this,MA(this._parameters,this._specification))}static deserialize(s){return new qm(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Fm(c){let s=null;if(c instanceof bm)s=Fm(c.result);else if(c instanceof Tm){for(let u of c.args)if(s=Fm(u),s)break}else(c instanceof Mi||c instanceof Mo)&&c.input instanceof Is&&c.input.name==="zoom"&&(s=c);return s instanceof Tn||c.eachChild(u=>{let m=Fm(u);m instanceof Tn?s=m:!s&&m?s=new Tn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):s&&m&&s!==m&&(s=new Tn("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),s}function jm(c,s=new Set){return c instanceof Om&&s.add(c.key),c.eachChild(u=>{jm(u,s)}),s}function Kv(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(let s of c.slice(1))if(!Kv(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}let Nb={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Yf(c){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Kv(c)||(c=Kf(c));let s=Nm(c,Nb);if(s.result==="error")throw new Error(s.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,m,y)=>s.value.evaluate(u,m,{},y),needGeometry:Xv(c),getGlobalStateRefs:()=>jm(s.value.expression)}}function kb(c,s){return c<s?-1:c>s?1:0}function Xv(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let s=1;s<c.length;s++)if(Xv(c[s]))return!0;return!1}function Kf(c){if(!c)return!0;let s=c[0];return c.length<=1?s!=="any":s==="=="?qb(c[1],c[2],"=="):s==="!="?Qv(qb(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?qb(c[1],c[2],s):s==="any"?(u=c.slice(1),["any"].concat(u.map(Kf))):s==="all"?["all"].concat(c.slice(1).map(Kf)):s==="none"?["all"].concat(c.slice(1).map(Kf).map(Qv)):s==="in"?OA(c[1],c.slice(2)):s==="!in"?Qv(OA(c[1],c.slice(2))):s==="has"?LA(c[1]):s!=="!has"||Qv(LA(c[1]));var u}function qb(c,s,u){switch(c){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,c,s]}}function OA(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",c,["literal",s.sort(kb)]]:["filter-in-small",c,["literal",s]]}}function LA(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Qv(c){return["!",c]}function Fb(c){let s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let y="[";for(let S of c)y+=`${Fb(S)},`;return`${y}]`}let u=Object.keys(c).sort(),m="{";for(let y=0;y<u.length;y++)m+=`${JSON.stringify(u[y])}:${Fb(c[u[y]])},`;return`${m}}`}function Qq(c){let s="";for(let u of ut)s+=`/${Fb(c[u])}`;return s}function jb(c){let s=c.value;return s?[new gt(c.key,s,"constants have been deprecated as of v8")]:[]}function xi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Vl(c){if(Array.isArray(c))return c.map(Vl);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){let s={};for(let u in c)s[u]=Vl(c[u]);return s}return xi(c)}function As(c){let s=c.key,u=c.value,m=c.valueSpec||{},y=c.objectElementValidators||{},S=c.style,I=c.styleSpec,C=c.validateSpec,O=[],q=Zr(u);if(q!=="object")return[new gt(s,u,`object expected, ${q} found`)];for(let z in u){let G=z.split(".")[0],Y=cp(m,G)||m["*"],X;if(cp(y,G))X=y[G];else if(cp(m,G))X=C;else if(y["*"])X=y["*"];else{if(!m["*"]){O.push(new gt(s,u[z],`unknown property "${z}"`));continue}X=C}O=O.concat(X({key:(s&&`${s}.`)+z,value:u[z],valueSpec:Y,style:S,styleSpec:I,object:u,objectKey:z,validateSpec:C},u))}for(let z in m)y[z]||m[z].required&&m[z].default===void 0&&u[z]===void 0&&O.push(new gt(s,u,`missing required property "${z}"`));return O}function Jv(c){let s=c.value,u=c.valueSpec,m=c.style,y=c.styleSpec,S=c.key,I=c.arrayElementValidator||c.validateSpec;if(Zr(s)!=="array")return[new gt(S,s,`array expected, ${Zr(s)} found`)];if(u.length&&s.length!==u.length)return[new gt(S,s,`array length ${u.length} expected, length ${s.length} found`)];if(u["min-length"]&&s.length<u["min-length"])return[new gt(S,s,`array length at least ${u["min-length"]} expected, length ${s.length} found`)];let C={type:u.value,values:u.values};y.$version<7&&(C.function=u.function),Zr(u.value)==="object"&&(C=u.value);let O=[];for(let q=0;q<s.length;q++)O=O.concat(I({array:s,arrayIndex:q,value:s[q],valueSpec:C,validateSpec:c.validateSpec,style:m,styleSpec:y,key:`${S}[${q}]`}));return O}function zm(c){let s=c.key,u=c.value,m=c.valueSpec,y=Zr(u);return y==="number"&&u!=u&&(y="NaN"),y!=="number"?[new gt(s,u,`number expected, ${y} found`)]:"minimum"in m&&u<m.minimum?[new gt(s,u,`${u} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&u>m.maximum?[new gt(s,u,`${u} is greater than the maximum value ${m.maximum}`)]:[]}function DA(c){let s=c.valueSpec,u=xi(c.value.type),m,y,S,I={},C=u!=="categorical"&&c.value.property===void 0,O=!C,q=Zr(c.value.stops)==="array"&&Zr(c.value.stops[0])==="array"&&Zr(c.value.stops[0][0])==="object",z=As({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(X){if(u==="identity")return[new gt(X.key,X.value,"identity function may not have a \"stops\" property")];let Q=[],re=X.value;return Q=Q.concat(Jv({key:X.key,value:re,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:G})),Zr(re)==="array"&&re.length===0&&Q.push(new gt(X.key,re,"array must have at least one stop")),Q},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:s,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return u==="identity"&&C&&z.push(new gt(c.key,c.value,"missing required property \"property\"")),u==="identity"||c.value.stops||z.push(new gt(c.key,c.value,"missing required property \"stops\"")),u==="exponential"&&c.valueSpec.expression&&!Ob(c.valueSpec)&&z.push(new gt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(O&&!Lc(c.valueSpec)?z.push(new gt(c.key,c.value,"property functions not supported")):C&&!AA(c.valueSpec)&&z.push(new gt(c.key,c.value,"zoom functions not supported"))),u!=="categorical"&&!q||c.value.property!==void 0||z.push(new gt(c.key,c.value,"\"property\" property is required")),z;function G(X){let Q=[],re=X.value,le=X.key;if(Zr(re)!=="array")return[new gt(le,re,`array expected, ${Zr(re)} found`)];if(re.length!==2)return[new gt(le,re,`array length 2 expected, length ${re.length} found`)];if(q){if(Zr(re[0])!=="object")return[new gt(le,re,`object expected, ${Zr(re[0])} found`)];if(re[0].zoom===void 0)return[new gt(le,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new gt(le,re,"object stop key must have value")];if(S&&S>xi(re[0].zoom))return[new gt(le,re[0].zoom,"stop zoom values must appear in ascending order")];xi(re[0].zoom)!==S&&(S=xi(re[0].zoom),y=void 0,I={}),Q=Q.concat(As({key:`${le}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:zm,value:Y}}))}else Q=Q.concat(Y({key:`${le}[0]`,value:re[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},re));return Yv(Vl(re[1]))?Q.concat([new gt(`${le}[1]`,re[1],"expressions are not allowed in function stops.")]):Q.concat(X.validateSpec({key:`${le}[1]`,value:re[1],valueSpec:s,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function Y(X,Q){let re=Zr(X.value),le=xi(X.value),me=X.value!==null?X.value:Q;if(m){if(re!==m)return[new gt(X.key,me,`${re} stop domain type must match previous stop domain type ${m}`)]}else m=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new gt(X.key,me,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&u!=="categorical"){let qe=`number expected, ${re} found`;return Lc(s)&&u===void 0&&(qe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new gt(X.key,me,qe)]}return u!=="categorical"||re!=="number"||isFinite(le)&&Math.floor(le)===le?u!=="categorical"&&re==="number"&&y!==void 0&&le<y?[new gt(X.key,me,"stop domain values must appear in ascending order")]:(y=le,u==="categorical"&&le in I?[new gt(X.key,me,"stop domain values must be unique")]:(I[le]=!0,[])):[new gt(X.key,me,`integer expected, found ${le}`)]}}function Xf(c){let s=(c.expressionContext==="property"?RA:Nm)(Vl(c.value),c.valueSpec);if(s.result==="error")return s.value.map(m=>new gt(`${c.key}${m.key}`,c.value,m.message));let u=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!u.outputDefined())return[new gt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Lm(u))return[new gt(c.key,c.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(c.expressionContext==="filter"&&!Lm(u))return[new gt(c.key,c.value,"\"feature-state\" data expressions are not supported with filters.")];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Zv(u,["zoom","feature-state"]))return[new gt(c.key,c.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(c.expressionContext==="cluster-initial"&&!Wv(u))return[new gt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ey(c){let s=c.key,u=c.value,m=Zr(u);return m!=="string"?[new gt(s,u,`color expected, ${m} found`)]:$r.parse(String(u))?[]:[new gt(s,u,`color expected, "${u}" found`)]}function zu(c){let s=c.key,u=c.value,m=c.valueSpec,y=[];return Array.isArray(m.values)?m.values.indexOf(xi(u))===-1&&y.push(new gt(s,u,`expected one of [${m.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(m.values).indexOf(xi(u))===-1&&y.push(new gt(s,u,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(u)} found`)),y}function zb(c){return Kv(Vl(c.value))?Xf(si({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):NA(c)}function NA(c){let s=c.value,u=c.key;if(Zr(s)!=="array")return[new gt(u,s,`array expected, ${Zr(s)} found`)];let m=c.styleSpec,y,S=[];if(s.length<1)return[new gt(u,s,"filter array must have at least 1 element")];switch(S=S.concat(zu({key:`${u}[0]`,value:s[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),xi(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&xi(s[1])==="$type"&&S.push(new gt(u,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&S.push(new gt(u,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(y=Zr(s[1]),y!=="string"&&S.push(new gt(`${u}[1]`,s[1],`string expected, ${y} found`)));for(let I=2;I<s.length;I++)y=Zr(s[I]),xi(s[1])==="$type"?S=S.concat(zu({key:`${u}[${I}]`,value:s[I],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&S.push(new gt(`${u}[${I}]`,s[I],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let I=1;I<s.length;I++)S=S.concat(NA({key:`${u}[${I}]`,value:s[I],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":y=Zr(s[1]),s.length!==2?S.push(new gt(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):y!=="string"&&S.push(new gt(`${u}[1]`,s[1],`string expected, ${y} found`))}return S}function kA(c,s){let u=c.key,m=c.validateSpec,y=c.style,S=c.styleSpec,I=c.value,C=c.objectKey,O=S[`${s}_${c.layerType}`];if(!O)return[];let q=C.match(/^(.*)-transition$/);if(s==="paint"&&q&&O[q[1]]&&O[q[1]].transition)return m({key:u,value:I,valueSpec:S.transition,style:y,styleSpec:S});let z=c.valueSpec||O[C];if(!z)return[new gt(u,I,`unknown property "${C}"`)];let G;if(Zr(I)==="string"&&Lc(z)&&!z.tokens&&(G=/^{([^}]+)}$/.exec(I)))return[new gt(u,I,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];let Y=[];return c.layerType==="symbol"&&(C==="text-field"&&y&&!y.glyphs&&Y.push(new gt(u,I,"use of \"text-field\" requires a style \"glyphs\" property")),C==="text-font"&&Dm(Vl(I))&&xi(I.type)==="identity"&&Y.push(new gt(u,I,"\"text-font\" does not support identity functions"))),Y.concat(m({key:c.key,value:I,valueSpec:z,style:y,styleSpec:S,expressionContext:"property",propertyType:s,propertyKey:C}))}function qA(c){return kA(c,"paint")}function FA(c){return kA(c,"layout")}function jA(c){let s=[],u=c.value,m=c.key,y=c.style,S=c.styleSpec;if(Zr(u)!=="object")return[new gt(m,u,`object expected, ${Zr(u)} found`)];u.type||u.ref||s.push(new gt(m,u,"either \"type\" or \"ref\" is required"));let I=xi(u.type),C=xi(u.ref);if(u.id){let O=xi(u.id);for(let q=0;q<c.arrayIndex;q++){let z=y.layers[q];xi(z.id)===O&&s.push(new gt(m,u.id,`duplicate layer id "${u.id}", previously used at line ${z.id.__line__}`))}}if("ref"in u){let O;["type","source","source-layer","filter","layout"].forEach(q=>{q in u&&s.push(new gt(m,u[q],`"${q}" is prohibited for ref layers`))}),y.layers.forEach(q=>{xi(q.id)===C&&(O=q)}),O?O.ref?s.push(new gt(m,u.ref,"ref cannot reference another ref layer")):I=xi(O.type):s.push(new gt(m,u.ref,`ref layer "${C}" not found`))}else if(I!=="background")if(u.source){let O=y.sources&&y.sources[u.source],q=O&&xi(O.type);O?q==="vector"&&I==="raster"?s.push(new gt(m,u.source,`layer "${u.id}" requires a raster source`)):q!=="raster-dem"&&I==="hillshade"||q!=="raster-dem"&&I==="color-relief"?s.push(new gt(m,u.source,`layer "${u.id}" requires a raster-dem source`)):q==="raster"&&I!=="raster"?s.push(new gt(m,u.source,`layer "${u.id}" requires a vector source`)):q!=="vector"||u["source-layer"]?q==="raster-dem"&&I!=="hillshade"&&I!=="color-relief"?s.push(new gt(m,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):I!=="line"||!u.paint||!u.paint["line-gradient"]||q==="geojson"&&O.lineMetrics||s.push(new gt(m,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new gt(m,u,`layer "${u.id}" must specify a "source-layer"`)):s.push(new gt(m,u.source,`source "${u.source}" not found`))}else s.push(new gt(m,u,"missing required property \"source\""));return s=s.concat(As({key:m,value:u,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:u.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:u,objectKey:"type"}),filter:zb,layout:O=>As({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":q=>FA(si({layerType:I},q))}}),paint:O=>As({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":q=>qA(si({layerType:I},q))}})}})),s}function cl(c){let s=c.value,u=c.key,m=Zr(s);return m!=="string"?[new gt(u,s,`string expected, ${m} found`)]:[]}let gp={promoteId:function({key:c,value:s}){if(Zr(s)==="string")return cl({key:c,value:s});{let u=[];for(let m in s)u.push(...cl({key:`${c}.${m}`,value:s[m]}));return u}}};function Ma(c){let s=c.value,u=c.key,m=c.styleSpec,y=c.style,S=c.validateSpec;if(!s.type)return[new gt(u,s,"\"type\" is required")];let I=xi(s.type),C;switch(I){case"vector":case"raster":return C=As({key:u,value:s,valueSpec:m[`source_${I.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:gp,validateSpec:S}),C;case"raster-dem":return C=function(O){var q;let z=(q=O.sourceName)!==null&&q!==void 0?q:"",G=O.value,Y=O.styleSpec,X=Y.source_raster_dem,Q=O.style,re=[],le=Zr(G);if(G===void 0)return re;if(le!=="object")return re.push(new gt("source_raster_dem",G,`object expected, ${le} found`)),re;let me=xi(G.encoding)==="custom",qe=["redFactor","greenFactor","blueFactor","baseShift"],Te=O.value.encoding?`"${O.value.encoding}"`:"Default";for(let Ce in G)!me&&qe.includes(Ce)?re.push(new gt(Ce,G[Ce],`In "${z}": "${Ce}" is only valid when "encoding" is set to "custom". ${Te} encoding found`)):X[Ce]?re=re.concat(O.validateSpec({key:Ce,value:G[Ce],valueSpec:X[Ce],validateSpec:O.validateSpec,style:Q,styleSpec:Y})):re.push(new gt(Ce,G[Ce],`unknown property "${Ce}"`));return re}({sourceName:u,value:s,style:c.style,styleSpec:m,validateSpec:S}),C;case"geojson":if(C=As({key:u,value:s,valueSpec:m.source_geojson,style:y,styleSpec:m,validateSpec:S,objectElementValidators:gp}),s.cluster)for(let O in s.clusterProperties){let[q,z]=s.clusterProperties[O],G=typeof q=="string"?[q,["accumulated"],["get",O]]:q;C.push(...Xf({key:`${u}.${O}.map`,value:z,expressionContext:"cluster-map"})),C.push(...Xf({key:`${u}.${O}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return C;case"video":return As({key:u,value:s,valueSpec:m.source_video,style:y,validateSpec:S,styleSpec:m});case"image":return As({key:u,value:s,valueSpec:m.source_image,style:y,validateSpec:S,styleSpec:m});case"canvas":return[new gt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zu({key:`${u}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function vp(c){let s=c.value,u=c.styleSpec,m=u.light,y=c.style,S=[],I=Zr(s);if(s===void 0)return S;if(I!=="object")return S=S.concat([new gt("light",s,`object expected, ${I} found`)]),S;for(let C in s){let O=C.match(/^(.*)-transition$/);S=S.concat(O&&m[O[1]]&&m[O[1]].transition?c.validateSpec({key:C,value:s[C],valueSpec:u.transition,validateSpec:c.validateSpec,style:y,styleSpec:u}):m[C]?c.validateSpec({key:C,value:s[C],valueSpec:m[C],validateSpec:c.validateSpec,style:y,styleSpec:u}):[new gt(C,s[C],`unknown property "${C}"`)])}return S}function Ub(c){let s=c.value,u=c.styleSpec,m=u.sky,y=c.style,S=Zr(s);if(s===void 0)return[];if(S!=="object")return[new gt("sky",s,`object expected, ${S} found`)];let I=[];for(let C in s)I=I.concat(m[C]?c.validateSpec({key:C,value:s[C],valueSpec:m[C],style:y,styleSpec:u}):[new gt(C,s[C],`unknown property "${C}"`)]);return I}function zA(c){let s=c.value,u=c.styleSpec,m=u.terrain,y=c.style,S=[],I=Zr(s);if(s===void 0)return S;if(I!=="object")return S=S.concat([new gt("terrain",s,`object expected, ${I} found`)]),S;for(let C in s)S=S.concat(m[C]?c.validateSpec({key:C,value:s[C],valueSpec:m[C],validateSpec:c.validateSpec,style:y,styleSpec:u}):[new gt(C,s[C],`unknown property "${C}"`)]);return S}function UA(c){let s=[],u=c.value,m=c.key;if(Array.isArray(u)){let y=[],S=[];for(let I in u)u[I].id&&y.includes(u[I].id)&&s.push(new gt(m,u,`all the sprites' ids must be unique, but ${u[I].id} is duplicated`)),y.push(u[I].id),u[I].url&&S.includes(u[I].url)&&s.push(new gt(m,u,`all the sprites' URLs must be unique, but ${u[I].url} is duplicated`)),S.push(u[I].url),s=s.concat(As({key:`${m}[${I}]`,value:u[I],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return cl({key:m,value:u})}function yp(c){return s=c.value,s&&s.constructor===Object?[]:[new gt(c.key,c.value,`object expected, ${Zr(c.value)} found`)];var s}let Bb={"*":()=>[],array:Jv,boolean:function(c){let s=c.value,u=c.key,m=Zr(s);return m!=="boolean"?[new gt(u,s,`boolean expected, ${m} found`)]:[]},number:zm,color:ey,constants:jb,enum:zu,filter:zb,function:DA,layer:jA,object:As,source:Ma,light:vp,sky:Ub,terrain:zA,projection:function(c){let s=c.value,u=c.styleSpec,m=u.projection,y=c.style,S=Zr(s);if(s===void 0)return[];if(S!=="object")return[new gt("projection",s,`object expected, ${S} found`)];let I=[];for(let C in s)I=I.concat(m[C]?c.validateSpec({key:C,value:s[C],valueSpec:m[C],style:y,styleSpec:u}):[new gt(C,s[C],`unknown property "${C}"`)]);return I},projectionDefinition:function(c){let s=c.key,u=c.value;u=u instanceof String?u.valueOf():u;let m=Zr(u);return m!=="array"||function(y){return Array.isArray(y)&&y.length===3&&typeof y[0]=="string"&&typeof y[1]=="string"&&typeof y[2]=="number"}(u)||function(y){return!!["interpolate","step","literal"].includes(y[0])}(u)?["array","string"].includes(m)?[]:[new gt(s,u,`projection expected, invalid type "${m}" found`)]:[new gt(s,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:cl,formatted:function(c){return cl(c).length===0?[]:Xf(c)},resolvedImage:function(c){return cl(c).length===0?[]:Xf(c)},padding:function(c){let s=c.key,u=c.value;if(Zr(u)==="array"){if(u.length<1||u.length>4)return[new gt(s,u,`padding requires 1 to 4 values; ${u.length} values found`)];let m={type:"number"},y=[];for(let S=0;S<u.length;S++)y=y.concat(c.validateSpec({key:`${s}[${S}]`,value:u[S],validateSpec:c.validateSpec,valueSpec:m}));return y}return zm({key:s,value:u,valueSpec:{}})},numberArray:function(c){let s=c.key,u=c.value;if(Zr(u)==="array"){let m={type:"number"};if(u.length<1)return[new gt(s,u,"array length at least 1 expected, length 0 found")];let y=[];for(let S=0;S<u.length;S++)y=y.concat(c.validateSpec({key:`${s}[${S}]`,value:u[S],validateSpec:c.validateSpec,valueSpec:m}));return y}return zm({key:s,value:u,valueSpec:{}})},colorArray:function(c){let s=c.key,u=c.value;if(Zr(u)==="array"){if(u.length<1)return[new gt(s,u,"array length at least 1 expected, length 0 found")];let m=[];for(let y=0;y<u.length;y++)m=m.concat(ey({key:`${s}[${y}]`,value:u[y]}));return m}return ey({key:s,value:u})},variableAnchorOffsetCollection:function(c){let s=c.key,u=c.value,m=Zr(u),y=c.styleSpec;if(m!=="array"||u.length<1||u.length%2!=0)return[new gt(s,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let I=0;I<u.length;I+=2)S=S.concat(zu({key:`${s}[${I}]`,value:u[I],valueSpec:y.layout_symbol["text-anchor"]})),S=S.concat(Jv({key:`${s}[${I+1}]`,value:u[I+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:y}));return S},sprite:UA,state:yp};function _p(c){let s=c.value,u=c.valueSpec,m=c.styleSpec;return c.validateSpec=_p,u.expression&&Dm(xi(s))?DA(c):u.expression&&Yv(Vl(s))?Xf(c):u.type&&Bb[u.type]?Bb[u.type](c):As(si({},c,{valueSpec:u.type?m[u.type]:u}))}function BA(c){let s=c.value,u=c.key,m=cl(c);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new gt(u,s,"\"glyphs\" url must include a \"{fontstack}\" token")),s.indexOf("{range}")===-1&&m.push(new gt(u,s,"\"glyphs\" url must include a \"{range}\" token"))),m}function Ca(c,s=xe){let u=[];return u=u.concat(_p({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:_p,objectElementValidators:{glyphs:BA,"*":()=>[]}})),c.constants&&(u=u.concat(jb({key:"constants",value:c.constants}))),xp(u)}function fl(c){return function(s){return c(on(mt({},s),{validateSpec:_p}))}}function xp(c){return[].concat(c).sort((s,u)=>s.line-u.line)}function hl(c){return function(...s){return xp(c.apply(this,s))}}Ca.source=hl(fl(Ma)),Ca.sprite=hl(fl(UA)),Ca.glyphs=hl(fl(BA)),Ca.light=hl(fl(vp)),Ca.sky=hl(fl(Ub)),Ca.terrain=hl(fl(zA)),Ca.state=hl(fl(yp)),Ca.layer=hl(fl(jA)),Ca.filter=hl(fl(zb)),Ca.paintProperty=hl(fl(qA)),Ca.layoutProperty=hl(fl(FA));let bp=Ca,Jq=bp.light,Um=bp.sky,eF=bp.paintProperty,tF=bp.layoutProperty;function Bm(c,s){let u=!1;if(s&&s.length)for(let m of s)c.fire(new Re(new Error(m.message))),u=!0;return u}class Vm{constructor(s,u,m){let y=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;let I=new Int32Array(this.arrayBuffer);s=I[0],this.d=(u=I[1])+2*(m=I[2]);for(let O=0;O<this.d*this.d;O++){let q=I[3+O],z=I[3+O+1];y.push(q===z?null:I.subarray(q,z))}let C=I[3+y.length+1];this.keys=I.subarray(I[3+y.length],C),this.bboxes=I.subarray(C),this.insert=this._insertReadonly}else{this.d=u+2*m;for(let I=0;I<this.d*this.d;I++)y.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=s,this.padding=m,this.scale=u/s,this.uid=0;let S=m/u*s;this.min=-S,this.max=s+S}insert(s,u,m,y,S){this._forEachCell(u,m,y,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,u,m,y,S,I){this.cells[S].push(I)}query(s,u,m,y,S){let I=this.min,C=this.max;if(s<=I&&u<=I&&C<=m&&C<=y&&!S)return Array.prototype.slice.call(this.keys);{let O=[];return this._forEachCell(s,u,m,y,this._queryCell,O,{},S),O}}_queryCell(s,u,m,y,S,I,C,O){let q=this.cells[S];if(q!==null){let z=this.keys,G=this.bboxes;for(let Y=0;Y<q.length;Y++){let X=q[Y];if(C[X]===void 0){let Q=4*X;(O?O(G[Q+0],G[Q+1],G[Q+2],G[Q+3]):s<=G[Q+2]&&u<=G[Q+3]&&m>=G[Q+0]&&y>=G[Q+1])?(C[X]=!0,I.push(z[X])):C[X]=!1}}}}_forEachCell(s,u,m,y,S,I,C,O){let q=this._convertToCellCoord(s),z=this._convertToCellCoord(u),G=this._convertToCellCoord(m),Y=this._convertToCellCoord(y);for(let X=q;X<=G;X++)for(let Q=z;Q<=Y;Q++){let re=this.d*Q+X;if((!O||O(this._convertFromCellCoord(X),this._convertFromCellCoord(Q),this._convertFromCellCoord(X+1),this._convertFromCellCoord(Q+1)))&&S.call(this,s,u,m,y,re,I,C,O))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let s=this.cells,u=3+this.cells.length+1+1,m=0;for(let I=0;I<this.cells.length;I++)m+=this.cells[I].length;let y=new Int32Array(u+m+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let S=u;for(let I=0;I<s.length;I++){let C=s[I];y[3+I]=S,y.set(C,S),S+=C.length}return y[3+s.length]=S,y.set(this.keys,S),S+=this.keys.length,y[3+s.length+1]=S,y.set(this.bboxes,S),S+=this.bboxes.length,y.buffer}static serialize(s,u){let m=s.toArrayBuffer();return u&&u.push(m),{buffer:m}}static deserialize(s){return new Vm(s.buffer)}}let pl={};function Ut(c,s,u={}){if(pl[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),pl[c]={klass:s,omit:u.omit||[],shallow:u.shallow||[]}}Ut("Object",Object),Ut("Set",Set),Ut("TransferableGridIndex",Vm),Ut("Color",$r),Ut("Error",Error),Ut("AJAXError",_e),Ut("ResolvedImage",es),Ut("StylePropertyFunction",qm),Ut("StyleExpression",Lb,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",Db),Ut("ZoomConstantExpression",km),Ut("CompoundExpression",Is,{omit:["_evaluate"]});for(let c in dp)dp[c]._classRegistryKey||Ut(`Expression_${c}`,dp[c]);function Vb(c){return c&&typeof ArrayBuffer!="undefined"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function ty(c){return c.$name||c.constructor._classRegistryKey}function Gb(c){return!function(s){if(s===null||typeof s!="object")return!1;let u=ty(s);return!(!u||u==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Vb(c)||Gt(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function wp(c,s){if(Gb(c))return(Vb(c)||Gt(c))&&s&&s.push(c),ArrayBuffer.isView(c)&&s&&s.push(c.buffer),c instanceof ImageData&&s&&s.push(c.data.buffer),c;if(Array.isArray(c)){let S=[];for(let I of c)S.push(wp(I,s));return S}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);let u=ty(c);if(!u)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!pl[u])throw new Error(`${u} is not registered.`);let{klass:m}=pl[u],y=m.serialize?m.serialize(c,s):{};if(m.serialize){if(s&&y===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let S in c){if(!c.hasOwnProperty(S)||pl[u].omit.indexOf(S)>=0)continue;let I=c[S];y[S]=pl[u].shallow.indexOf(S)>=0?I:wp(I,s)}c instanceof Error&&(y.message=c.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(y.$name=u),y}function Qf(c){if(Gb(c))return c;if(Array.isArray(c))return c.map(Qf);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);let s=ty(c)||"Object";if(!pl[s])throw new Error(`can't deserialize unregistered class ${s}`);let{klass:u}=pl[s];if(!u)throw new Error(`can't deserialize unregistered class ${s}`);if(u.deserialize)return u.deserialize(c);let m=Object.create(u.prototype);for(let y of Object.keys(c)){if(y==="$name")continue;let S=c[y];m[y]=pl[s].shallow.indexOf(y)>=0?S:Qf(S)}return m}class ry{constructor(){this.first=!0}update(s,u){let m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=u),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}let Jr={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function ny(c){for(let s of c)if(Hb(s.charCodeAt(0)))return!0;return!1}function rF(c){for(let s of c)if(!VA(s.charCodeAt(0)))return!1;return!0}function iy(c){let s=c.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch(m){return null}}).filter(u=>u);return new RegExp(s.join("|"),"u")}let nF=iy(["Arab","Dupl","Mong","Ougr","Syrc"]);function VA(c){return!nF.test(String.fromCodePoint(c))}let $b=iy(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Hb(c){return!(c!==746&&c!==747&&(c<4352||!(Jr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Jr["CJK Compatibility"](c)||Jr["CJK Strokes"](c)||!(!Jr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Jr["Enclosed CJK Letters and Months"](c)||Jr["Ideographic Description Characters"](c)||Jr.Kanbun(c)||Jr.Katakana(c)&&c!==12540||!(!Jr["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Jr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Jr["Vertical Forms"](c)||Jr["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||$b.test(String.fromCodePoint(c)))))}function GA(c){return!(Hb(c)||function(s){return!!(Jr["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Jr["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Jr["Letterlike Symbols"](s)||Jr["Number Forms"](s)||Jr["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Jr["Control Pictures"](s)&&s!==9251||Jr["Optical Character Recognition"](s)||Jr["Enclosed Alphanumerics"](s)||Jr["Geometric Shapes"](s)||Jr["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Jr["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Jr["CJK Symbols and Punctuation"](s)||Jr.Katakana(s)||Jr["Private Use Area"](s)||Jr["CJK Compatibility Forms"](s)||Jr["Small Form Variants"](s)||Jr["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}let $A=iy(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Wb(c){return $A.test(String.fromCodePoint(c))}function HA(c,s){return!(!s&&Wb(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Jr.Khmer(c))}function WA(c){for(let s of c)if(Wb(s.charCodeAt(0)))return!0;return!1}let dl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(dl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,s){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;let u=c.pluginURL,m=new Promise(S=>{this.loadScriptResolve=S});s(u);let y=new Promise(S=>setTimeout(()=>S(),this.TIMEOUT));if(yield Promise.race([m,y]),this.isParsed()){let S={pluginStatus:"loaded",pluginURL:u};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class Vn{constructor(s,u){this.zoom=s,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new ry,this.transition=u.transition||{},this.globalState=u.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ry,this.transition={},this.globalState={})}isSupportedScript(s){return function(u,m){for(let y of u)if(!HA(y.charCodeAt(0),m))return!1;return!0}(s,dl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let s=this.zoom,u=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*u}}}class Ep{constructor(s,u){this.property=s,this.value=u,this.expression=function(m,y){if(Dm(m))return new qm(m,y);if(Yv(m)){let S=RA(m,y);if(S.result==="error")throw new Error(S.value.map(I=>`${I.key}: ${I.message}`).join(", "));return S.value}{let S=m;return y.type==="color"&&typeof m=="string"?S=$r.parse(m):y.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?y.type!=="numberArray"||typeof m!="number"&&!Array.isArray(m)?y.type!=="colorArray"||typeof m!="string"&&!Array.isArray(m)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(m)?S=aa.parse(m):y.type==="projectionDefinition"&&typeof m=="string"&&(S=Go.parse(m)):S=Gi.parse(m):S=oa.parse(m):S=co.parse(m),{globalStateRefs:new Set,kind:"constant",evaluate:()=>S}}}(u===void 0?s.specification.default:u,s.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(s,u,m){return this.property.possiblyEvaluate(this,s,u,m)}setGlobalState(s){this.expression.evaluate=(u,m,y,S,I,C)=>(u.globalState=s,this._evaluate.call(this.expression,u,m,y,S,I,C))}}class Zb{constructor(s){this.property=s,this.value=new Ep(s,void 0)}transitioned(s,u){return new Yb(this.property,this.value,u,nt({},s.transition,this.transition),s.now)}untransitioned(){return new Yb(this.property,this.value,null,{},0)}}class ZA{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return ot(this._values[s].value.value)}setValue(s,u){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Zb(this._values[s].property)),this._values[s].value=new Ep(this._values[s].property,u===null?void 0:ot(u))}getTransition(s){return ot(this._values[s].transition)}setTransition(s,u){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Zb(this._values[s].property)),this._values[s].transition=ot(u)||void 0}serialize(){let s={};for(let u of Object.keys(this._values)){let m=this.getValue(u);m!==void 0&&(s[u]=m);let y=this.getTransition(u);y!==void 0&&(s[`${u}-transition`]=y)}return s}transitioned(s,u){let m=new Kb(this._properties);for(let y of Object.keys(this._values))m._values[y]=this._values[y].transitioned(s,u._values[y]);return m}untransitioned(){let s=new Kb(this._properties);for(let u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class Yb{constructor(s,u,m,y,S){this.property=s,this.value=u,this.begin=S+y.delay||0,this.end=this.begin+y.duration||0,s.specification.transition&&(y.delay||y.duration)&&(this.prior=m)}possiblyEvaluate(s,u,m){let y=s.now||0,S=this.value.possiblyEvaluate(s,u,m),I=this.prior;if(I){if(y>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(y<this.begin)return I.possiblyEvaluate(s,u,m);{let C=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(s,u,m),S,dt(C))}}return S}}class Kb{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,m){let y=new oy(this._properties);for(let S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(s,u,m);return y}hasTransition(){for(let s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class YA{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._globalState={}}hasValue(s){return this._values[s].value!==void 0}getValue(s){return ot(this._values[s].value)}setValue(s,u){this._values[s]=new Ep(this._values[s].property,u===null?void 0:ot(u)),this._values[s].setGlobalState(this._globalState)}serialize(){let s={};for(let u of Object.keys(this._values)){let m=this.getValue(u);m!==void 0&&(s[u]=m)}return s}possiblyEvaluate(s,u,m){let y=new oy(this._properties);for(let S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(s,u,m);return y}setGlobalState(s){this._globalState=s;for(let u of Object.values(this._values))u.setGlobalState(s)}}class Gl{constructor(s,u,m){this.property=s,this.value=u,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,u,m,y){return this.property.evaluate(this.value,this.parameters,s,u,m,y)}}class oy{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Kt{constructor(s){this.specification=s}possiblyEvaluate(s,u){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(u)}interpolate(s,u,m){let y=Bl[this.specification.type];return y?y(s,u,m):s}}class lr{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,m,y){return new Gl(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(u,null,{},m,y)}:s.expression,u)}interpolate(s,u,m){if(s.value.kind!=="constant"||u.value.kind!=="constant")return s;if(s.value.value===void 0||u.value.value===void 0)return new Gl(this,{kind:"constant",value:void 0},s.parameters);let y=Bl[this.specification.type];if(y){let S=y(s.value.value,u.value.value,m);return new Gl(this,{kind:"constant",value:S},s.parameters)}return s}evaluate(s,u,m,y,S,I){return s.kind==="constant"?s.value:s.evaluate(u,m,y,S,I)}}class ay extends lr{possiblyEvaluate(s,u,m,y){if(s.value===void 0)return new Gl(this,{kind:"constant",value:void 0},u);if(s.expression.kind==="constant"){let S=s.expression.evaluate(u,null,{},m,y),I=s.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,C=this._calculate(I,I,I,u);return new Gl(this,{kind:"constant",value:C},u)}if(s.expression.kind==="camera"){let S=this._calculate(s.expression.evaluate({zoom:u.zoom-1}),s.expression.evaluate({zoom:u.zoom}),s.expression.evaluate({zoom:u.zoom+1}),u);return new Gl(this,{kind:"constant",value:S},u)}return new Gl(this,s.expression,u)}evaluate(s,u,m,y,S,I){if(s.kind==="source"){let C=s.evaluate(u,m,y,S,I);return this._calculate(C,C,C,u)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(u.zoom)-1},m,y),s.evaluate({zoom:Math.floor(u.zoom)},m,y),s.evaluate({zoom:Math.floor(u.zoom)+1},m,y),u):s.value}_calculate(s,u,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:m,to:u}}interpolate(s){return s}}class Nc{constructor(s){this.specification=s}possiblyEvaluate(s,u,m,y){if(s.value!==void 0){if(s.expression.kind==="constant"){let S=s.expression.evaluate(u,null,{},m,y);return this._calculate(S,S,S,u)}return this._calculate(s.expression.evaluate(new Vn(Math.floor(u.zoom-1),u)),s.expression.evaluate(new Vn(Math.floor(u.zoom),u)),s.expression.evaluate(new Vn(Math.floor(u.zoom+1),u)),u)}}_calculate(s,u,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:m,to:u}}interpolate(s){return s}}class sy{constructor(s){this.specification=s}possiblyEvaluate(s,u,m,y){return!!s.expression.evaluate(u,null,{},m,y)}interpolate(){return!1}}class sa{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let u in s){let m=s[u];m.specification.overridable&&this.overridableProperties.push(u);let y=this.defaultPropertyValues[u]=new Ep(m,void 0),S=this.defaultTransitionablePropertyValues[u]=new Zb(m);this.defaultTransitioningPropertyValues[u]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=y.possiblyEvaluate({})}}}Ut("DataDrivenProperty",lr),Ut("DataConstantProperty",Kt),Ut("CrossFadedDataDrivenProperty",ay),Ut("CrossFadedProperty",Nc),Ut("ColorRampProperty",sy);let KA="-transition";class Ms extends tt{constructor(s,u){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,this._globalState={},s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter,this._featureFilter=Yf(s.filter)),u.layout&&(this._unevaluatedLayout=new YA(u.layout)),u.paint)){this._transitionablePaint=new ZA(u.paint);for(let m in s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(let m in s.layout)this.setLayoutProperty(m,s.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new oy(u.paint)}}setFilter(s){this.filter=s,this._featureFilter=Yf(s)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}getLayoutAffectingGlobalStateRefs(){let s=new Set;if(this._unevaluatedLayout)for(let u in this._unevaluatedLayout._values){let m=this._unevaluatedLayout._values[u];for(let y of m.getGlobalStateRefs())s.add(y)}for(let u of this._featureFilter.getGlobalStateRefs())s.add(u);return s}getPaintAffectingGlobalStateRefs(){var s;let u=new globalThis.Map;if(this._transitionablePaint)for(let m in this._transitionablePaint._values){let y=this._transitionablePaint._values[m].value;for(let S of y.getGlobalStateRefs()){let I=(s=u.get(S))!==null&&s!==void 0?s:[];I.push({name:m,value:y.value}),u.set(S,I)}}return u}setLayoutProperty(s,u,m={}){u!=null&&this._validate(tF,`layers.${this.id}.layout.${s}`,s,u,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,u):this.visibility=u)}getPaintProperty(s){return s.endsWith(KA)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u,m={}){if(u!=null&&this._validate(eF,`layers.${this.id}.paint.${s}`,s,u,m))return!1;if(s.endsWith(KA))return this._transitionablePaint.setTransition(s.slice(0,-11),u||void 0),!1;{let y=this._transitionablePaint._values[s],S=y.property.specification["property-type"]==="cross-faded-data-driven",I=y.value.isDataDriven(),C=y.value;this._transitionablePaint.setValue(s,u),this._handleSpecialPaintPropertyUpdate(s);let O=this._transitionablePaint._values[s].value;return O.isDataDriven()||I||S||this._handleOverridablePaintPropertyUpdate(s,C,O)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,u,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){s.globalState=this._globalState,s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}setGlobalState(s){this._globalState=s,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(s)}serialize(){let s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),at(s,(u,m)=>!(u===void 0||m==="layout"&&!Object.keys(u).length||m==="paint"&&!Object.keys(u).length))}_validate(s,u,m,y,S={}){return(!S||S.validate!==!1)&&Bm(this,s.call(bp,{key:u,layerType:this.type,objectKey:m,value:y,styleSpec:xe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let s in this.paint._values){let u=this.paint.get(s);if(u instanceof Gl&&Lc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}let iF={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Gm{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class kn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){let u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ci(c,s=1){let u=0,m=0;return{members:c.map(y=>{let S=iF[y.type].BYTES_PER_ELEMENT,I=u=ly(u,Math.max(s,S)),C=y.components||1;return m=Math.max(m,S),u+=S*C,{name:y.name,type:y.type,components:C,offset:I}}),size:ly(u,Math.max(m,s)),alignment:s}}function ly(c,s){return Math.ceil(c/s)*s}class Sp extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){let m=this.length;return this.resize(m+1),this.emplace(m,s,u)}emplace(s,u,m){let y=2*s;return this.int16[y+0]=u,this.int16[y+1]=m,s}}Sp.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",Sp);class Tp extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=3*s;return this.int16[S+0]=u,this.int16[S+1]=m,this.int16[S+2]=y,s}}Tp.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",Tp);class Xb extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y){let S=this.length;return this.resize(S+1),this.emplace(S,s,u,m,y)}emplace(s,u,m,y,S){let I=4*s;return this.int16[I+0]=u,this.int16[I+1]=m,this.int16[I+2]=y,this.int16[I+3]=S,s}}Xb.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",Xb);class Ip extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,s,u,m,y,S,I)}emplace(s,u,m,y,S,I,C){let O=6*s;return this.int16[O+0]=u,this.int16[O+1]=m,this.int16[O+2]=y,this.int16[O+3]=S,this.int16[O+4]=I,this.int16[O+5]=C,s}}Ip.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",Ip);class Jf extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,s,u,m,y,S,I)}emplace(s,u,m,y,S,I,C){let O=4*s,q=8*s;return this.int16[O+0]=u,this.int16[O+1]=m,this.uint8[q+4]=y,this.uint8[q+5]=S,this.uint8[q+6]=I,this.uint8[q+7]=C,s}}Jf.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",Jf);class $m extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){let m=this.length;return this.resize(m+1),this.emplace(m,s,u)}emplace(s,u,m){let y=2*s;return this.float32[y+0]=u,this.float32[y+1]=m,s}}$m.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",$m);class uy extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q,z){let G=this.length;return this.resize(G+1),this.emplace(G,s,u,m,y,S,I,C,O,q,z)}emplace(s,u,m,y,S,I,C,O,q,z,G){let Y=10*s;return this.uint16[Y+0]=u,this.uint16[Y+1]=m,this.uint16[Y+2]=y,this.uint16[Y+3]=S,this.uint16[Y+4]=I,this.uint16[Y+5]=C,this.uint16[Y+6]=O,this.uint16[Y+7]=q,this.uint16[Y+8]=z,this.uint16[Y+9]=G,s}}uy.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",uy);class eh extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q,z,G,Y){let X=this.length;return this.resize(X+1),this.emplace(X,s,u,m,y,S,I,C,O,q,z,G,Y)}emplace(s,u,m,y,S,I,C,O,q,z,G,Y,X){let Q=12*s;return this.int16[Q+0]=u,this.int16[Q+1]=m,this.int16[Q+2]=y,this.int16[Q+3]=S,this.uint16[Q+4]=I,this.uint16[Q+5]=C,this.uint16[Q+6]=O,this.uint16[Q+7]=q,this.int16[Q+8]=z,this.int16[Q+9]=G,this.int16[Q+10]=Y,this.int16[Q+11]=X,s}}eh.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",eh);class Qb extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=3*s;return this.float32[S+0]=u,this.float32[S+1]=m,this.float32[S+2]=y,s}}Qb.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",Qb);class Jb extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}Jb.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",Jb);class cy extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q){let z=this.length;return this.resize(z+1),this.emplace(z,s,u,m,y,S,I,C,O,q)}emplace(s,u,m,y,S,I,C,O,q,z){let G=10*s,Y=5*s;return this.int16[G+0]=u,this.int16[G+1]=m,this.int16[G+2]=y,this.int16[G+3]=S,this.int16[G+4]=I,this.int16[G+5]=C,this.uint32[Y+3]=O,this.uint16[G+8]=q,this.uint16[G+9]=z,s}}cy.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",cy);class ew extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,s,u,m,y,S,I)}emplace(s,u,m,y,S,I,C){let O=6*s;return this.int16[O+0]=u,this.int16[O+1]=m,this.int16[O+2]=y,this.int16[O+3]=S,this.int16[O+4]=I,this.int16[O+5]=C,s}}ew.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",ew);class w extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S){let I=this.length;return this.resize(I+1),this.emplace(I,s,u,m,y,S)}emplace(s,u,m,y,S,I){let C=4*s,O=8*s;return this.float32[C+0]=u,this.float32[C+1]=m,this.float32[C+2]=y,this.int16[O+6]=S,this.int16[O+7]=I,s}}w.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",w);class a extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,s,u,m,y,S,I)}emplace(s,u,m,y,S,I,C){let O=16*s,q=4*s,z=8*s;return this.uint8[O+0]=u,this.uint8[O+1]=m,this.float32[q+1]=y,this.float32[q+2]=S,this.int16[z+6]=I,this.int16[z+7]=C,s}}a.prototype.bytesPerElement=16,Ut("StructArrayLayout2ub2f2i16",a);class h extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=3*s;return this.uint16[S+0]=u,this.uint16[S+1]=m,this.uint16[S+2]=y,s}}h.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",h);class g extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,me){let qe=this.length;return this.resize(qe+1),this.emplace(qe,s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,me)}emplace(s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,me,qe){let Te=24*s,Ce=12*s,$e=48*s;return this.int16[Te+0]=u,this.int16[Te+1]=m,this.uint16[Te+2]=y,this.uint16[Te+3]=S,this.uint32[Ce+2]=I,this.uint32[Ce+3]=C,this.uint32[Ce+4]=O,this.uint16[Te+10]=q,this.uint16[Te+11]=z,this.uint16[Te+12]=G,this.float32[Ce+7]=Y,this.float32[Ce+8]=X,this.uint8[$e+36]=Q,this.uint8[$e+37]=re,this.uint8[$e+38]=le,this.uint32[Ce+10]=me,this.int16[Te+22]=qe,s}}g.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",g);class _ extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,me,qe,Te,Ce,$e,et,ht,Rt,xt,At,Jt,Tt){let Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,me,qe,Te,Ce,$e,et,ht,Rt,xt,At,Jt,Tt)}emplace(s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,me,qe,Te,Ce,$e,et,ht,Rt,xt,At,Jt,Tt,Mt){let it=32*s,fr=16*s;return this.int16[it+0]=u,this.int16[it+1]=m,this.int16[it+2]=y,this.int16[it+3]=S,this.int16[it+4]=I,this.int16[it+5]=C,this.int16[it+6]=O,this.int16[it+7]=q,this.uint16[it+8]=z,this.uint16[it+9]=G,this.uint16[it+10]=Y,this.uint16[it+11]=X,this.uint16[it+12]=Q,this.uint16[it+13]=re,this.uint16[it+14]=le,this.uint16[it+15]=me,this.uint16[it+16]=qe,this.uint16[it+17]=Te,this.uint16[it+18]=Ce,this.uint16[it+19]=$e,this.uint16[it+20]=et,this.uint16[it+21]=ht,this.uint16[it+22]=Rt,this.uint32[fr+12]=xt,this.float32[fr+13]=At,this.float32[fr+14]=Jt,this.uint16[it+30]=Tt,this.uint16[it+31]=Mt,s}}_.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",_);class E extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}E.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",E);class M extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=3*s;return this.uint16[6*s+0]=u,this.float32[S+1]=m,this.float32[S+2]=y,s}}M.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",M);class L extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=4*s;return this.uint32[2*s+0]=u,this.uint16[S+2]=m,this.uint16[S+3]=y,s}}L.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",L);class k extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){let m=this.length;return this.resize(m+1),this.emplace(m,s,u)}emplace(s,u,m){let y=2*s;return this.uint16[y+0]=u,this.uint16[y+1]=m,s}}k.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",k);class B extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}B.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",B);class V extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m,y){let S=this.length;return this.resize(S+1),this.emplace(S,s,u,m,y)}emplace(s,u,m,y,S){let I=4*s;return this.float32[I+0]=u,this.float32[I+1]=m,this.float32[I+2]=y,this.float32[I+3]=S,s}}V.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",V);class W extends Gm{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new l(this.anchorPointX,this.anchorPointY)}}W.prototype.size=20;class H extends cy{get(s){return new W(this,s)}}Ut("CollisionBoxArray",H);class K extends Gm{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}K.prototype.size=48;class ee extends g{get(s){return new K(this,s)}}Ut("PlacedSymbolArray",ee);class ce extends Gm{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ce.prototype.size=64;class ue extends _{get(s){return new ce(this,s)}}Ut("SymbolInstanceArray",ue);class fe extends E{getoffsetX(s){return this.float32[1*s+0]}}Ut("GlyphOffsetArray",fe);class ve extends Tp{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Ut("SymbolLineVertexArray",ve);class Se extends Gm{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Se.prototype.size=12;class we extends M{get(s){return new Se(this,s)}}Ut("TextAnchorOffsetArray",we);class Ie extends Gm{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ie.prototype.size=8;class Pe extends L{get(s){return new Ie(this,s)}}Ut("FeatureIndexArray",Pe);class Ee extends Sp{}class je extends Sp{}class Qe extends Sp{}class Ve extends Ip{}class Ge extends Jf{}class Xe extends $m{}class vt extends uy{}class bt extends eh{}class st extends Qb{}class Zt extends Jb{}class Nr extends ew{}class hn extends a{}class qn extends h{}class Cn extends k{}let li=Ci([{name:"a_pos",components:2,type:"Int16"}],4),{members:bi}=li;class Or{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,u,m,y){let S=this.segments[this.segments.length-1];return s>Or.MAX_VERTEX_ARRAY_LENGTH&&zt(`Max vertices per segment is ${Or.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Or.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+s>Or.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==y?this.createNewSegment(u,m,y):S}createNewSegment(s,u,m){let y={vertexOffset:s.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return m!==void 0&&(y.sortKey=m),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(y),y}getOrCreateLatestSegment(s,u,m){return this.prepareSegment(0,s,u,m)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let s of this.segments)for(let u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,m,y){return new Or([{vertexOffset:s,primitiveOffset:u,vertexLength:m,primitiveLength:y,vaos:{},sortKey:0}])}}function Fn(c,s){return 256*(c=Ot(Math.floor(c),0,255))+Ot(Math.floor(s),0,255)}Or.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",Or);let $i=Ci([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var to,ho,la,ml={exports:{}},kc={exports:{}},qc={exports:{}},Ap=function(){if(la)return ml.exports;la=1;var c=(to||(to=1,kc.exports=function(u,m){var y,S,I,C,O,q,z,G;for(S=u.length-(y=3&u.length),I=m,O=3432918353,q=461845907,G=0;G<S;)z=255&u.charCodeAt(G)|(255&u.charCodeAt(++G))<<8|(255&u.charCodeAt(++G))<<16|(255&u.charCodeAt(++G))<<24,++G,I=27492+(65535&(C=5*(65535&(I=(I^=z=(65535&(z=(z=(65535&z)*O+(((z>>>16)*O&65535)<<16)&4294967295)<<15|z>>>17))*q+(((z>>>16)*q&65535)<<16)&4294967295)<<13|I>>>19))+((5*(I>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(z=0,y){case 3:z^=(255&u.charCodeAt(G+2))<<16;case 2:z^=(255&u.charCodeAt(G+1))<<8;case 1:I^=z=(65535&(z=(z=(65535&(z^=255&u.charCodeAt(G)))*O+(((z>>>16)*O&65535)<<16)&4294967295)<<15|z>>>17))*q+(((z>>>16)*q&65535)<<16)&4294967295}return I^=u.length,I=2246822507*(65535&(I^=I>>>16))+((2246822507*(I>>>16)&65535)<<16)&4294967295,I=3266489909*(65535&(I^=I>>>13))+((3266489909*(I>>>16)&65535)<<16)&4294967295,(I^=I>>>16)>>>0}),kc.exports),s=(ho||(ho=1,qc.exports=function(u,m){for(var y,S=u.length,I=m^S,C=0;S>=4;)y=1540483477*(65535&(y=255&u.charCodeAt(C)|(255&u.charCodeAt(++C))<<8|(255&u.charCodeAt(++C))<<16|(255&u.charCodeAt(++C))<<24))+((1540483477*(y>>>16)&65535)<<16),I=1540483477*(65535&I)+((1540483477*(I>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),S-=4,++C;switch(S){case 3:I^=(255&u.charCodeAt(C+2))<<16;case 2:I^=(255&u.charCodeAt(C+1))<<8;case 1:I=1540483477*(65535&(I^=255&u.charCodeAt(C)))+((1540483477*(I>>>16)&65535)<<16)}return I=1540483477*(65535&(I^=I>>>13))+((1540483477*(I>>>16)&65535)<<16),(I^=I>>>15)>>>0}),qc.exports);return ml.exports=c,ml.exports.murmur3=c,ml.exports.murmur2=s,ml.exports}(),Mp=f(Ap);class th{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,u,m,y){this.ids.push(rh(s)),this.positions.push(u,m,y)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let u=rh(s),m=0,y=this.ids.length-1;for(;m<y;){let I=m+y>>1;this.ids[I]>=u?y=I:m=I+1}let S=[];for(;this.ids[m]===u;)S.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return S}static serialize(s,u){let m=new Float64Array(s.ids),y=new Uint32Array(s.positions);return Pa(m,y,0,m.length-1),u&&u.push(m.buffer,y.buffer),{ids:m,positions:y}}static deserialize(s){let u=new th;return u.ids=s.ids,u.positions=s.positions,u.indexed=!0,u}}function rh(c){let s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Mp(String(c))}function Pa(c,s,u,m){for(;u<m;){let y=c[u+m>>1],S=u-1,I=m+1;for(;;){do S++;while(c[S]<y);do I--;while(c[I]>y);if(S>=I)break;gl(c,S,I),gl(s,3*S,3*I),gl(s,3*S+1,3*I+1),gl(s,3*S+2,3*I+2)}I-u<m-I?(Pa(c,s,u,I),u=I+1):(Pa(c,s,I+1,m),m=I)}}function gl(c,s,u){let m=c[s];c[s]=c[u],c[u]=m}Ut("FeaturePositionMap",th);class ua{constructor(s,u){this.gl=s.gl,this.location=u}}class Fc extends ua{constructor(s,u){super(s,u),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Hi extends ua{constructor(s,u){super(s,u),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class ro extends ua{constructor(s,u){super(s,u),this.current=$r.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}let Cs=new Float32Array(16);function Wi(c){return[Fn(255*c.r,255*c.g),Fn(255*c.b,255*c.a)]}class Hm{constructor(s,u,m){this.value=s,this.uniformNames=u.map(y=>`u_${y}`),this.type=m}setUniform(s,u,m){s.set(m.constantOr(this.value))}getBinding(s,u,m){return this.type==="color"?new ro(s,u):new Fc(s,u)}}class Cp{constructor(s,u){this.uniformNames=u.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=s.tlbr}setUniform(s,u,m,y){let S=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&s.set(S)}getBinding(s,u,m){return m.substr(0,9)==="u_pattern"?new Hi(s,u):new Fc(s,u)}}class Uu{constructor(s,u,m,y){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=u.map(S=>({name:`a_${S}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(s,u,m){let y=this.paintVertexArray.length,S=this.expression.evaluate(new Vn(0,m),u,{},m.canonical,[],m.formattedSection);this.paintVertexArray.resize(s),this._setPaintValue(y,s,S)}updatePaintArray(s,u,m,y,S){let I=this.expression.evaluate(new Vn(0,S),m,y);this._setPaintValue(s,u,I)}_setPaintValue(s,u,m){if(this.type==="color"){let y=Wi(m);for(let S=s;S<u;S++)this.paintVertexArray.emplace(S,y[0],y[1])}else{for(let y=s;y<u;y++)this.paintVertexArray.emplace(y,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vl{constructor(s,u,m,y,S,I){this.expression=s,this.uniformNames=u.map(C=>`u_${C}_t`),this.type=m,this.useIntegerZoom=y,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=u.map(C=>({name:`a_${C}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(s,u,m){let y=this.expression.evaluate(new Vn(this.zoom,m),u,{},m.canonical,[],m.formattedSection),S=this.expression.evaluate(new Vn(this.zoom+1,m),u,{},m.canonical,[],m.formattedSection),I=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(I,s,y,S)}updatePaintArray(s,u,m,y,S){let I=this.expression.evaluate(new Vn(this.zoom,S),m,y),C=this.expression.evaluate(new Vn(this.zoom+1,S),m,y);this._setPaintValue(s,u,I,C)}_setPaintValue(s,u,m,y){if(this.type==="color"){let S=Wi(m),I=Wi(y);for(let C=s;C<u;C++)this.paintVertexArray.emplace(C,S[0],S[1],I[0],I[1])}else{for(let S=s;S<u;S++)this.paintVertexArray.emplace(S,m,y);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u){let m=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,y=Ot(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(y)}getBinding(s,u,m){return new Fc(s,u)}}class jc{constructor(s,u,m,y,S,I){this.expression=s,this.type=u,this.useIntegerZoom=m,this.zoom=y,this.layerId=I,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(s,u,m){let y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(y,s,u.patterns&&u.patterns[this.layerId],m.imagePositions)}updatePaintArray(s,u,m,y,S){this._setPaintValues(s,u,m.patterns&&m.patterns[this.layerId],S.imagePositions)}_setPaintValues(s,u,m,y){if(!y||!m)return;let{min:S,mid:I,max:C}=m,O=y[S],q=y[I],z=y[C];if(O&&q&&z)for(let G=s;G<u;G++)this.zoomInPaintVertexArray.emplace(G,q.tl[0],q.tl[1],q.br[0],q.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],q.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,q.tl[0],q.tl[1],q.br[0],q.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],q.pixelRatio,z.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,$i.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,$i.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class XA{constructor(s,u,m){this.binders={},this._buffers=[];let y=[];for(let S in s.paint._values){if(!m(S))continue;let I=s.paint.get(S);if(!(I instanceof Gl&&Lc(I.property.specification)))continue;let C=QA(S,s.type),O=I.value,q=I.property.specification.type,z=I.property.useIntegerZoom,G=I.property.specification["property-type"],Y=G==="cross-faded"||G==="cross-faded-data-driven";if(O.kind==="constant")this.binders[S]=Y?new Cp(O.value,C):new Hm(O.value,C,q),y.push(`/u_${S}`);else if(O.kind==="source"||Y){let X=tw(S,q,"source");this.binders[S]=Y?new jc(O,q,z,u,X,s.id):new Uu(O,C,q,X),y.push(`/a_${S}`)}else{let X=tw(S,q,"composite");this.binders[S]=new vl(O,C,q,z,u,X),y.push(`/z_${S}`)}}this.cacheKey=y.sort().join("")}getMaxValue(s){let u=this.binders[s];return u instanceof Uu||u instanceof vl?u.maxValue:0}populatePaintArrays(s,u,m){for(let y in this.binders){let S=this.binders[y];(S instanceof Uu||S instanceof vl||S instanceof jc)&&S.populatePaintArray(s,u,m)}}setConstantPatternPositions(s,u){for(let m in this.binders){let y=this.binders[m];y instanceof Cp&&y.setConstantPatternPositions(s,u)}}updatePaintArrays(s,u,m,y,S){let I=!1;for(let C in s){let O=u.getPositions(C);for(let q of O){let z=m.feature(q.index);for(let G in this.binders){let Y=this.binders[G];if((Y instanceof Uu||Y instanceof vl||Y instanceof jc)&&Y.expression.isStateDependent===!0){let X=y.paint.get(G);Y.expression=X.value,Y.updatePaintArray(q.start,q.end,z,s[C],S),I=!0}}}}return I}defines(){let s=[];for(let u in this.binders){let m=this.binders[u];(m instanceof Hm||m instanceof Cp)&&s.push(...m.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return s}getBinderAttributes(){let s=[];for(let u in this.binders){let m=this.binders[u];if(m instanceof Uu||m instanceof vl)for(let y=0;y<m.paintVertexAttributes.length;y++)s.push(m.paintVertexAttributes[y].name);else if(m instanceof jc)for(let y=0;y<$i.members.length;y++)s.push($i.members[y].name)}return s}getBinderUniforms(){let s=[];for(let u in this.binders){let m=this.binders[u];if(m instanceof Hm||m instanceof Cp||m instanceof vl)for(let y of m.uniformNames)s.push(y)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,u){let m=[];for(let y in this.binders){let S=this.binders[y];if(S instanceof Hm||S instanceof Cp||S instanceof vl){for(let I of S.uniformNames)if(u[I]){let C=S.getBinding(s,u[I],I);m.push({name:I,property:y,binding:C})}}}return m}setUniforms(s,u,m,y){for(let{name:S,property:I,binding:C}of u)this.binders[I].setUniform(C,y,m.get(I),S)}updatePaintBuffers(s){this._buffers=[];for(let u in this.binders){let m=this.binders[u];if(s&&m instanceof jc){let y=s.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(m instanceof Uu||m instanceof vl)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(let u in this.binders){let m=this.binders[u];(m instanceof Uu||m instanceof vl||m instanceof jc)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(let s in this.binders){let u=this.binders[s];(u instanceof Uu||u instanceof vl||u instanceof jc)&&u.destroy()}}}class rs{constructor(s,u,m=()=>!0){this.programConfigurations={};for(let y of s)this.programConfigurations[y.id]=new XA(y,u,m);this.needsUpload=!1,this._featureMap=new th,this._bufferOffset=0}populatePaintArrays(s,u,m,y){for(let S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(s,u,y);u.id!==void 0&&this._featureMap.add(u.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,m,y){for(let S of m)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(s,this._featureMap,u,S,y)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(let u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(let s in this.programConfigurations)this.programConfigurations[s].destroy()}}function QA(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function tw(c,s,u){let m={color:{source:$m,composite:V},number:{source:E,composite:$m}},y=function(S){return{"line-pattern":{source:vt,composite:vt},"fill-pattern":{source:vt,composite:vt},"fill-extrusion-pattern":{source:vt,composite:vt}}[S]}(c);return y&&y[u]||m[s][u]}Ut("ConstantBinder",Hm),Ut("CrossFadedConstantBinder",Cp),Ut("SourceExpressionBinder",Uu),Ut("CrossFadedCompositeBinder",jc),Ut("CompositeExpressionBinder",vl),Ut("ProgramConfiguration",XA,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",rs);let fy=Math.pow(2,14)-1,hy=-fy-1;function zc(c){let s=Je/c.extent,u=c.loadGeometry();for(let m=0;m<u.length;m++){let y=u[m];for(let S=0;S<y.length;S++){let I=y[S],C=Math.round(I.x*s),O=Math.round(I.y*s);I.x=Ot(C,hy,fy),I.y=Ot(O,hy,fy),(C<I.x||C>I.x+1||O<I.y||O>I.y+1)&&zt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Bu(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?zc(c):[]}}let bX=-32768;function UGe(c,s,u,m,y){c.emplaceBack(bX+8*s+m,bX+8*u+y)}class oF{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new je,this.indexArray=new qn,this.segments=new Or,this.programConfigurations=new rs(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,m){let y=this.layers[0],S=[],I=null,C=!1,O=y.type==="heatmap";if(y.type==="circle"){let z=y;I=z.layout.get("circle-sort-key"),C=!I.isConstant(),O=O||z.paint.get("circle-pitch-alignment")==="map"}let q=O?u.subdivisionGranularity.circle:1;for(let{feature:z,id:G,index:Y,sourceLayerIndex:X}of s){let Q=this.layers[0]._featureFilter.needGeometry,re=Bu(z,Q);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom,{globalState:this.globalState}),re,m))continue;let le=C?I.evaluate(re,{},m):void 0,me={id:G,properties:z.properties,type:z.type,sourceLayerIndex:X,index:Y,geometry:Q?re.geometry:zc(z),patterns:{},sortKey:le};S.push(me)}C&&S.sort((z,G)=>z.sortKey-G.sortKey);for(let z of S){let{geometry:G,index:Y,sourceLayerIndex:X}=z,Q=s[Y].feature;this.addFeature(z,G,Y,m,q),u.featureIndex.insert(Q,G,Y,X,this.index)}}update(s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,{imagePositions:m,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,bi),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,m,y,S=1){let I;switch(S){case 1:I=[0,7];break;case 3:I=[0,2,5,7];break;case 5:I=[0,1,3,4,6,7];break;case 7:I=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}let C=I.length;for(let O of u)for(let q of O){let z=q.x,G=q.y;if(z<0||z>=Je||G<0||G>=Je)continue;let Y=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,s.sortKey),X=Y.vertexLength;for(let Q=0;Q<C;Q++)for(let re=0;re<C;re++)UGe(this.layoutVertexArray,z,G,I[re],I[Q]);for(let Q=0;Q<C-1;Q++)for(let re=0;re<C-1;re++){let le=X+Q*C+re,me=X+(Q+1)*C+re;this.indexArray.emplaceBack(le,me+1,le+1),this.indexArray.emplaceBack(le,me,me+1)}Y.vertexLength+=C*C,Y.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:{},canonical:y,globalState:this.globalState})}}function wX(c,s){for(let u=0;u<c.length;u++)if(py(s,c[u]))return!0;for(let u=0;u<s.length;u++)if(py(c,s[u]))return!0;return!!aF(c,s)}function BGe(c,s,u){return!!py(c,s)||!!sF(s,c,u)}function EX(c,s){if(c.length===1)return TX(s,c[0]);for(let u=0;u<s.length;u++){let m=s[u];for(let y=0;y<m.length;y++)if(py(c,m[y]))return!0}for(let u=0;u<c.length;u++)if(TX(s,c[u]))return!0;for(let u=0;u<s.length;u++)if(aF(c,s[u]))return!0;return!1}function VGe(c,s,u){if(c.length>1){if(aF(c,s))return!0;for(let m=0;m<s.length;m++)if(sF(s[m],c,u))return!0}for(let m=0;m<c.length;m++)if(sF(c[m],s,u))return!0;return!1}function aF(c,s){if(c.length===0||s.length===0)return!1;for(let u=0;u<c.length-1;u++){let m=c[u],y=c[u+1];for(let S=0;S<s.length-1;S++)if(GGe(m,y,s[S],s[S+1]))return!0}return!1}function GGe(c,s,u,m){return Pt(c,u,m)!==Pt(s,u,m)&&Pt(c,s,u)!==Pt(c,s,m)}function sF(c,s,u){let m=u*u;if(s.length===1)return c.distSqr(s[0])<m;for(let y=1;y<s.length;y++)if(SX(c,s[y-1],s[y])<m)return!0;return!1}function SX(c,s,u){let m=s.distSqr(u);if(m===0)return c.distSqr(s);let y=((c.x-s.x)*(u.x-s.x)+(c.y-s.y)*(u.y-s.y))/m;return c.distSqr(y<0?s:y>1?u:u.sub(s)._mult(y)._add(s))}function TX(c,s){let u,m,y,S=!1;for(let I=0;I<c.length;I++){u=c[I];for(let C=0,O=u.length-1;C<u.length;O=C++)m=u[C],y=u[O],m.y>s.y!=y.y>s.y&&s.x<(y.x-m.x)*(s.y-m.y)/(y.y-m.y)+m.x&&(S=!S)}return S}function py(c,s){let u=!1;for(let m=0,y=c.length-1;m<c.length;y=m++){let S=c[m],I=c[y];S.y>s.y!=I.y>s.y&&s.x<(I.x-S.x)*(s.y-S.y)/(I.y-S.y)+S.x&&(u=!u)}return u}function $Ge(c,s,u){let m=u[0],y=u[2];if(c.x<m.x&&s.x<m.x||c.x>y.x&&s.x>y.x||c.y<m.y&&s.y<m.y||c.y>y.y&&s.y>y.y)return!1;let S=Pt(c,s,u[0]);return S!==Pt(c,s,u[1])||S!==Pt(c,s,u[2])||S!==Pt(c,s,u[3])}function rw(c,s,u){let m=s.paint.get(c).value;return m.kind==="constant"?m.value:u.programConfigurations.get(s.id).getMaxValue(c)}function JA(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function eM(c,s,u,m,y){if(!s[0]&&!s[1])return c;let S=l.convert(s)._mult(y);u==="viewport"&&S._rotate(-m);let I=[];for(let C=0;C<c.length;C++)I.push(c[C].sub(S));return I}let IX,AX;Ut("CircleBucket",oF,{omit:["layers"]});var HGe={get paint(){return AX=AX||new sa({"circle-radius":new lr(xe.paint_circle["circle-radius"]),"circle-color":new lr(xe.paint_circle["circle-color"]),"circle-blur":new lr(xe.paint_circle["circle-blur"]),"circle-opacity":new lr(xe.paint_circle["circle-opacity"]),"circle-translate":new Kt(xe.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new lr(xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new lr(xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new lr(xe.paint_circle["circle-stroke-opacity"])})},get layout(){return IX=IX||new sa({"circle-sort-key":new lr(xe.layout_circle["circle-sort-key"])})}};class WGe extends Ms{constructor(s){super(s,HGe)}createBucket(s){return new oF(s)}queryRadius(s){let u=s;return rw("circle-radius",this,u)+rw("circle-stroke-width",this,u)+JA(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:m,geometry:y,transform:S,pixelsToTileUnits:I,unwrappedTileID:C,getElevation:O}){let q=eM(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,I),z=this.paint.get("circle-radius").evaluate(u,m)+this.paint.get("circle-stroke-width").evaluate(u,m),G=this.paint.get("circle-pitch-alignment")==="map",Y=G?q:function(Q,re,le,me){return Q.map(qe=>MX(qe,re,le,me))}(q,S,C,O),X=G?z*I:z;for(let Q of y)for(let re of Q){let le=G?re:MX(re,S,C,O),me=X,qe=S.projectTileCoordinates(re.x,re.y,C,O).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?me*=qe/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(me*=S.cameraToCenterDistance/qe),BGe(Y,le,me))return!0}return!1}}function MX(c,s,u,m){let y=s.projectTileCoordinates(c.x,c.y,u,m).point;return new l((.5*y.x+.5)*s.width,(.5*-y.y+.5)*s.height)}class CX extends oF{}let PX;Ut("HeatmapBucket",CX,{omit:["layers"]});var ZGe={get paint(){return PX=PX||new sa({"heatmap-radius":new lr(xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new lr(xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new sy(xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(xe.paint_heatmap["heatmap-opacity"])})}};function lF(c,{width:s,height:u},m,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==s*u*m)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${s*u*m}`)}else y=new Uint8Array(s*u*m);return c.width=s,c.height=u,c.data=y,c}function RX(c,{width:s,height:u},m){if(s===c.width&&u===c.height)return;let y=lF({},{width:s,height:u},m);uF(c,y,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,u)},m),c.width=s,c.height=u,c.data=y.data}function uF(c,s,u,m,y,S){if(y.width===0||y.height===0)return s;if(y.width>c.width||y.height>c.height||u.x>c.width-y.width||u.y>c.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>s.width||y.height>s.height||m.x>s.width-y.width||m.y>s.height-y.height)throw new RangeError("out of range destination coordinates for image copy");let I=c.data,C=s.data;if(I===C)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<y.height;O++){let q=((u.y+O)*c.width+u.x)*S,z=((m.y+O)*s.width+m.x)*S;for(let G=0;G<y.width*S;G++)C[z+G]=I[q+G]}return s}class nw{constructor(s,u){lF(this,s,1,u)}resize(s){RX(this,s,1)}clone(){return new nw({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,m,y,S){uF(s,u,m,y,S,1)}}class ns{constructor(s,u){lF(this,s,4,u)}resize(s){RX(this,s,4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new ns({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,m,y,S){uF(s,u,m,y,S,4)}setPixel(s,u,m){let y=4*(s*this.width+u);this.data[y+0]=Math.round(255*m.r/m.a),this.data[y+1]=Math.round(255*m.g/m.a),this.data[y+2]=Math.round(255*m.b/m.a),this.data[y+3]=Math.round(255*m.a)}}function OX(c){let s={},u=c.resolution||256,m=c.clips?c.clips.length:1,y=c.image||new ns({width:u,height:m});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);let S=(I,C,O)=>{s[c.evaluationKey]=O;let q=c.expression.evaluate(s);y.setPixel(I/4/u,C/4,q)};if(c.clips)for(let I=0,C=0;I<m;++I,C+=4*u)for(let O=0,q=0;O<u;O++,q+=4){let z=O/(u-1),{start:G,end:Y}=c.clips[I];S(C,q,G*(1-z)+Y*z)}else for(let I=0,C=0;I<u;I++,C+=4)S(0,C,I/(u-1));return y}Ut("AlphaImage",nw),Ut("RGBAImage",ns);let cF="big-fb";class YGe extends Ms{createBucket(s){return new CX(s)}constructor(s){super(s,ZGe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=OX({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(cF)&&this.heatmapFbos.delete(cF)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let LX;var KGe={get paint(){return LX=LX||new sa({"hillshade-illumination-direction":new Kt(xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Kt(xe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Kt(xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(xe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Kt(xe.paint_hillshade["hillshade-method"])})}};class XGe extends Ms{constructor(s){super(s,KGe),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,m=this.paint.get("hillshade-highlight-color").values,y=this.paint.get("hillshade-shadow-color").values,S=Math.max(s.length,u.length,m.length,y.length);s=s.concat(Array(S-s.length).fill(s.at(-1))),u=u.concat(Array(S-u.length).fill(u.at(-1))),m=m.concat(Array(S-m.length).fill(m.at(-1))),y=y.concat(Array(S-y.length).fill(y.at(-1)));let I=u.map(wr);return{directionRadians:s.map(wr),altitudeRadians:I,shadowColor:y,highlightColor:m}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let DX;var QGe={get paint(){return DX=DX||new sa({"color-relief-opacity":new Kt(xe["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new sy(xe["paint_color-relief"]["color-relief-color"])})}};class fF{constructor(s,u,m,y){this.context=s,this.format=m,this.texture=s.gl.createTexture(),this.update(u,y)}update(s,u,m){let{width:y,height:S}=s,I=!(this.size&&this.size[0]===y&&this.size[1]===S||m),{context:C}=this,{gl:O}=C;if(this.useMipmap=!!(u&&u.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!u||u.premultiply!==!1)),I)this.size=[y,S],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||Gt(s)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,s):O.texImage2D(O.TEXTURE_2D,0,this.format,y,S,0,this.format,O.UNSIGNED_BYTE,s.data);else{let{x:q,y:z}=m||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||Gt(s)?O.texSubImage2D(O.TEXTURE_2D,0,q,z,O.RGBA,O.UNSIGNED_BYTE,s):O.texSubImage2D(O.TEXTURE_2D,0,q,z,y,S,O.RGBA,O.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,u,m){let{context:y}=this,{gl:S}=y;S.bindTexture(S.TEXTURE_2D,this.texture),m!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=S.LINEAR),s!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,s),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,m||s),this.filter=s),u!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class NX{constructor(s,u,m,y=1,S=1,I=1,C=0){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void zt(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;let O=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=S,this.blueFactor=I,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let q=0;q<O;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(O,q)]=this.data[this._idx(O-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,O)]=this.data[this._idx(q,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<O;q++)for(let z=0;z<O;z++){let G=this.get(q,z);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(s,u){let m=new Uint8Array(this.data.buffer),y=4*this._idx(s,u);return this.unpack(m[y],m[y+1],m[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}unpack(s,u,m){return s*this.redFactor+u*this.greenFactor+m*this.blueFactor-this.baseShift}pack(s){return kX(s,this.getUnpackVector())}getPixels(){return new ns({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,u,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let y=u*this.dim,S=u*this.dim+this.dim,I=m*this.dim,C=m*this.dim+this.dim;switch(u){case-1:y=S-1;break;case 1:S=y+1}switch(m){case-1:I=C-1;break;case 1:C=I+1}let O=-u*this.dim,q=-m*this.dim;for(let z=I;z<C;z++)for(let G=y;G<S;G++)this.data[this._idx(G,z)]=s.data[this._idx(G+O,z+q)]}}function kX(c,s){let u=s[0],m=s[1],y=s[2],S=s[3],I=Math.min(u,m,y),C=Math.round((c+S)/I);return{r:Math.floor(C*I/u)%256,g:Math.floor(C*I/m)%256,b:Math.floor(C*I/y)%256}}Ut("DEMData",NX);class JGe extends Ms{constructor(s){super(s,QGe)}_createColorRamp(s){let u={elevationStops:[],colorStops:[]},m=this._transitionablePaint._values["color-relief-color"].value.expression;if(m instanceof km&&m._styleExpression.expression instanceof Mo){this.colorRampExpression=m;let I=m._styleExpression.expression;u.elevationStops=I.labels,u.colorStops=[];for(let C of u.elevationStops)u.colorStops.push(I.evaluate({globals:{elevation:C}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[$r.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=s)return u;let y={elevationStops:[],colorStops:[]},S=(u.elevationStops.length-1)/(s-1);for(let I=0;I<u.elevationStops.length-.5;I+=S)y.elevationStops.push(u.elevationStops[Math.round(I)]),y.colorStops.push(u.colorStops[Math.round(I)]);return zt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),y}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(s,u,m){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let y=this._createColorRamp(u),S=new ns({width:y.colorStops.length,height:1}),I=new ns({width:y.colorStops.length,height:1});for(let C=0;C<y.elevationStops.length;C++){let O=kX(y.elevationStops[C],m);I.setPixel(0,C,new $r(O.r/255,O.g/255,O.b/255,1)),S.setPixel(0,C,y.colorStops[C])}return this.colorRampTextures={elevationTexture:new fF(s,I,s.gl.RGBA),colorTexture:new fF(s,S,s.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}let e6e=Ci([{name:"a_pos",components:2,type:"Int16"}],4),{members:t6e}=e6e;function hF(c,s,u){let m=u.patternDependencies,y=!1;for(let S of s){let I=S.paint.get(`${c}-pattern`);I.isConstant()||(y=!0);let C=I.constantOr(null);C&&(y=!0,m[C.to]=!0,m[C.from]=!0)}return y}function pF(c,s,u,m,y){let{zoom:S,globalState:I}=m,C=y.patternDependencies;for(let O of s){let q=O.paint.get(`${c}-pattern`).value;if(q.kind!=="constant"){let z=q.evaluate({zoom:S-1,globalState:I},u,{},y.availableImages),G=q.evaluate({zoom:S,globalState:I},u,{},y.availableImages),Y=q.evaluate({zoom:S+1,globalState:I},u,{},y.availableImages);z=z&&z.name?z.name:z,G=G&&G.name?G.name:G,Y=Y&&Y.name?Y.name:Y,C[z]=!0,C[G]=!0,C[Y]=!0,u.patterns[O.id]={min:z,mid:G,max:Y}}}return u}function qX(c,s,u,m,y){let S;if(y===function(I,C,O,q){let z=0;for(let G=C,Y=O-q;G<O;G+=q)z+=(I[Y]-I[G])*(I[G+1]+I[Y+1]),Y=G;return z}(c,s,u,m)>0)for(let I=s;I<u;I+=m)S=UX(I/m|0,c[I],c[I+1],S);else for(let I=u-m;I>=s;I-=m)S=UX(I/m|0,c[I],c[I+1],S);return S&&dy(S,S.next)&&(sw(S),S=S.next),S}function Wm(c,s){if(!c)return c;s||(s=c);let u,m=c;do if(u=!1,m.steiner||!dy(m,m.next)&&Fi(m.prev,m,m.next)!==0)m=m.next;else{if(sw(m),m=s=m.prev,m===m.next)break;u=!0}while(u||m!==s);return s}function iw(c,s,u,m,y,S,I){if(!c)return;!I&&S&&function(O,q,z,G){let Y=O;do Y.z===0&&(Y.z=dF(Y.x,Y.y,q,z,G)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==O);Y.prevZ.nextZ=null,Y.prevZ=null,function(X){let Q,re=1;do{let le,me=X;X=null;let qe=null;for(Q=0;me;){Q++;let Te=me,Ce=0;for(let et=0;et<re&&(Ce++,Te=Te.nextZ,Te);et++);let $e=re;for(;Ce>0||$e>0&&Te;)Ce!==0&&($e===0||!Te||me.z<=Te.z)?(le=me,me=me.nextZ,Ce--):(le=Te,Te=Te.nextZ,$e--),qe?qe.nextZ=le:X=le,le.prevZ=qe,qe=le;me=Te}qe.nextZ=null,re*=2}while(Q>1)}(Y)}(c,m,y,S);let C=c;for(;c.prev!==c.next;){let O=c.prev,q=c.next;if(S?n6e(c,m,y,S):r6e(c))s.push(O.i,c.i,q.i),sw(c),c=q.next,C=q.next;else if((c=q)===C){I?I===1?iw(c=i6e(Wm(c),s),s,u,m,y,S,2):I===2&&o6e(c,s,u,m,y,S):iw(Wm(c),s,u,m,y,S,1);break}}}function r6e(c){let s=c.prev,u=c,m=c.next;if(Fi(s,u,m)>=0)return!1;let y=s.x,S=u.x,I=m.x,C=s.y,O=u.y,q=m.y,z=Math.min(y,S,I),G=Math.min(C,O,q),Y=Math.max(y,S,I),X=Math.max(C,O,q),Q=m.next;for(;Q!==s;){if(Q.x>=z&&Q.x<=Y&&Q.y>=G&&Q.y<=X&&ow(y,C,S,O,I,q,Q.x,Q.y)&&Fi(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function n6e(c,s,u,m){let y=c.prev,S=c,I=c.next;if(Fi(y,S,I)>=0)return!1;let C=y.x,O=S.x,q=I.x,z=y.y,G=S.y,Y=I.y,X=Math.min(C,O,q),Q=Math.min(z,G,Y),re=Math.max(C,O,q),le=Math.max(z,G,Y),me=dF(X,Q,s,u,m),qe=dF(re,le,s,u,m),Te=c.prevZ,Ce=c.nextZ;for(;Te&&Te.z>=me&&Ce&&Ce.z<=qe;){if(Te.x>=X&&Te.x<=re&&Te.y>=Q&&Te.y<=le&&Te!==y&&Te!==I&&ow(C,z,O,G,q,Y,Te.x,Te.y)&&Fi(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,Ce.x>=X&&Ce.x<=re&&Ce.y>=Q&&Ce.y<=le&&Ce!==y&&Ce!==I&&ow(C,z,O,G,q,Y,Ce.x,Ce.y)&&Fi(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;Te&&Te.z>=me;){if(Te.x>=X&&Te.x<=re&&Te.y>=Q&&Te.y<=le&&Te!==y&&Te!==I&&ow(C,z,O,G,q,Y,Te.x,Te.y)&&Fi(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;Ce&&Ce.z<=qe;){if(Ce.x>=X&&Ce.x<=re&&Ce.y>=Q&&Ce.y<=le&&Ce!==y&&Ce!==I&&ow(C,z,O,G,q,Y,Ce.x,Ce.y)&&Fi(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function i6e(c,s){let u=c;do{let m=u.prev,y=u.next.next;!dy(m,y)&&jX(m,u,u.next,y)&&aw(m,y)&&aw(y,m)&&(s.push(m.i,u.i,y.i),sw(u),sw(u.next),u=c=y),u=u.next}while(u!==c);return Wm(u)}function o6e(c,s,u,m,y,S){let I=c;do{let C=I.next.next;for(;C!==I.prev;){if(I.i!==C.i&&c6e(I,C)){let O=zX(I,C);return I=Wm(I,I.next),O=Wm(O,O.next),iw(I,s,u,m,y,S,0),void iw(O,s,u,m,y,S,0)}C=C.next}I=I.next}while(I!==c)}function a6e(c,s){let u=c.x-s.x;return u===0&&(u=c.y-s.y,u===0)&&(u=(c.next.y-c.y)/(c.next.x-c.x)-(s.next.y-s.y)/(s.next.x-s.x)),u}function s6e(c,s){let u=function(y,S){let I=S,C=y.x,O=y.y,q,z=-1/0;if(dy(y,I))return I;do{if(dy(y,I.next))return I.next;if(O<=I.y&&O>=I.next.y&&I.next.y!==I.y){let re=I.x+(O-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(re<=C&&re>z&&(z=re,q=I.x<I.next.x?I:I.next,re===C))return q}I=I.next}while(I!==S);if(!q)return null;let G=q,Y=q.x,X=q.y,Q=1/0;I=q;do{if(C>=I.x&&I.x>=Y&&C!==I.x&&FX(O<X?C:z,O,Y,X,O<X?z:C,O,I.x,I.y)){let re=Math.abs(O-I.y)/(C-I.x);aw(I,y)&&(re<Q||re===Q&&(I.x>q.x||I.x===q.x&&l6e(q,I)))&&(q=I,Q=re)}I=I.next}while(I!==G);return q}(c,s);if(!u)return s;let m=zX(u,c);return Wm(m,m.next),Wm(u,u.next)}function l6e(c,s){return Fi(c.prev,c,s.prev)<0&&Fi(s.next,c,c.next)<0}function dF(c,s,u,m,y){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*y|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function u6e(c){let s=c,u=c;do(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next;while(s!==c);return u}function FX(c,s,u,m,y,S,I,C){return(y-I)*(s-C)>=(c-I)*(S-C)&&(c-I)*(m-C)>=(u-I)*(s-C)&&(u-I)*(S-C)>=(y-I)*(m-C)}function ow(c,s,u,m,y,S,I,C){return!(c===I&&s===C)&&FX(c,s,u,m,y,S,I,C)}function c6e(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(u,m){let y=u;do{if(y.i!==u.i&&y.next.i!==u.i&&y.i!==m.i&&y.next.i!==m.i&&jX(y,y.next,u,m))return!0;y=y.next}while(y!==u);return!1}(c,s)&&(aw(c,s)&&aw(s,c)&&function(u,m){let y=u,S=!1,I=(u.x+m.x)/2,C=(u.y+m.y)/2;do y.y>C!=y.next.y>C&&y.next.y!==y.y&&I<(y.next.x-y.x)*(C-y.y)/(y.next.y-y.y)+y.x&&(S=!S),y=y.next;while(y!==u);return S}(c,s)&&(Fi(c.prev,c,s.prev)||Fi(c,s.prev,s))||dy(c,s)&&Fi(c.prev,c,c.next)>0&&Fi(s.prev,s,s.next)>0)}function Fi(c,s,u){return(s.y-c.y)*(u.x-s.x)-(s.x-c.x)*(u.y-s.y)}function dy(c,s){return c.x===s.x&&c.y===s.y}function jX(c,s,u,m){let y=rM(Fi(c,s,u)),S=rM(Fi(c,s,m)),I=rM(Fi(u,m,c)),C=rM(Fi(u,m,s));return y!==S&&I!==C||!(y!==0||!tM(c,u,s))||!(S!==0||!tM(c,m,s))||!(I!==0||!tM(u,c,m))||!(C!==0||!tM(u,s,m))}function tM(c,s,u){return s.x<=Math.max(c.x,u.x)&&s.x>=Math.min(c.x,u.x)&&s.y<=Math.max(c.y,u.y)&&s.y>=Math.min(c.y,u.y)}function rM(c){return c>0?1:c<0?-1:0}function aw(c,s){return Fi(c.prev,c,c.next)<0?Fi(c,s,c.next)>=0&&Fi(c,c.prev,s)>=0:Fi(c,s,c.prev)<0||Fi(c,c.next,s)<0}function zX(c,s){let u=mF(c.i,c.x,c.y),m=mF(s.i,s.x,s.y),y=c.next,S=s.prev;return c.next=s,s.prev=c,u.next=y,y.prev=u,m.next=u,u.prev=m,S.next=m,m.prev=S,m}function UX(c,s,u,m){let y=mF(c,s,u);return m?(y.next=m.next,y.prev=m,m.next.prev=y,m.next=y):(y.prev=y,y.next=y),y}function sw(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function mF(c,s,u){return{i:c,x:s,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class my{constructor(s,u){if(u>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=u}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class nM{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}nM.noSubdivision=new nM({fill:new my(0,0),line:new my(0,0),tile:new my(0,0),stencil:new my(0,0),circle:1}),Ut("SubdivisionGranularityExpression",my),Ut("SubdivisionGranularitySetting",nM);let gy=-32768,lw=32767;class f6e{constructor(s,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=Je/s,this._canonical=u}_getKey(s,u){return(s+=32768)<<16|u+32768}_vertexToIndex(s,u){if(s<-32768||u<-32768||s>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let m=0|Math.round(s),y=0|Math.round(u),S=this._getKey(m,y);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);let I=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,I),this._vertexBuffer.push(m,y),I}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(y,S){let I=[];for(let C=0;C<S.length;C+=3){let O=S[C],q=S[C+1],z=S[C+2],G=y[2*O],Y=y[2*O+1];(y[2*q]-G)*(y[2*z+1]-Y)-(y[2*q+1]-Y)*(y[2*z]-G)>0?(I.push(O),I.push(z),I.push(q)):(I.push(O),I.push(q),I.push(z))}return I}(this._vertexBuffer,s);let u=[],m=s.length;for(let y=0;y<m;y+=3){let S=[s[y+0],s[y+1],s[y+2]],I=[this._vertexBuffer[2*s[y+0]+0],this._vertexBuffer[2*s[y+0]+1],this._vertexBuffer[2*s[y+1]+0],this._vertexBuffer[2*s[y+1]+1],this._vertexBuffer[2*s[y+2]+0],this._vertexBuffer[2*s[y+2]+1]],C=1/0,O=1/0,q=-1/0,z=-1/0;for(let re=0;re<3;re++){let le=I[2*re],me=I[2*re+1];C=Math.min(C,le),q=Math.max(q,le),O=Math.min(O,me),z=Math.max(z,me)}if(C===q||O===z)continue;let G=Math.floor(C/this._granularityCellSize),Y=Math.ceil(q/this._granularityCellSize),X=Math.floor(O/this._granularityCellSize),Q=Math.ceil(z/this._granularityCellSize);if(G!==Y||X!==Q)for(let re=X;re<Q;re++){let le=this._scanlineGenerateVertexRingForCellRow(re,I,S);h6e(this._vertexBuffer,le,u)}else u.push(...S)}return u}_scanlineGenerateVertexRingForCellRow(s,u,m){let y=s*this._granularityCellSize,S=y+this._granularityCellSize,I=[];for(let C=0;C<3;C++){let O=u[2*C],q=u[2*C+1],z=u[2*(C+1)%6],G=u[(2*(C+1)+1)%6],Y=u[2*(C+2)%6],X=u[(2*(C+2)+1)%6],Q=z-O,re=G-q,le=Q===0,me=re===0,qe=(y-q)/re,Te=(S-q)/re,Ce=Math.min(qe,Te),$e=Math.max(qe,Te);if(!me&&(Ce>=1||$e<=0)||me&&(q<y||q>S)){G>=y&&G<=S&&I.push(m[(C+1)%3]);continue}!me&&Ce>0&&I.push(this._vertexToIndex(O+Q*Ce,q+re*Ce));let et=O+Q*Math.max(Ce,0),ht=O+Q*Math.min($e,1);le||this._generateIntraEdgeVertices(I,O,q,z,G,et,ht),!me&&$e<1&&I.push(this._vertexToIndex(O+Q*$e,q+re*$e)),(me||G>=y&&G<=S)&&I.push(m[(C+1)%3]),!me&&(G<=y||G>=S)&&this._generateInterEdgeVertices(I,O,q,z,G,Y,X,ht,y,S)}return I}_generateIntraEdgeVertices(s,u,m,y,S,I,C){let O=y-u,q=S-m,z=q===0,G=z?Math.min(u,y):Math.min(I,C),Y=z?Math.max(u,y):Math.max(I,C),X=Math.floor(G/this._granularityCellSize)+1,Q=Math.ceil(Y/this._granularityCellSize)-1;if(z?u<y:I<C)for(let re=X;re<=Q;re++){let le=re*this._granularityCellSize;s.push(this._vertexToIndex(le,m+q*(le-u)/O))}else for(let re=Q;re>=X;re--){let le=re*this._granularityCellSize;s.push(this._vertexToIndex(le,m+q*(le-u)/O))}}_generateInterEdgeVertices(s,u,m,y,S,I,C,O,q,z){let G=S-m,Y=I-y,X=C-S,Q=(q-S)/X,re=(z-S)/X,le=Math.min(Q,re),me=Math.max(Q,re),qe=y+Y*le,Te=Math.floor(Math.min(qe,O)/this._granularityCellSize)+1,Ce=Math.ceil(Math.max(qe,O)/this._granularityCellSize)-1,$e=O<qe,et=X===0;if(et&&(C===q||C===z))return;if(et||le>=1||me<=0){let Rt=m-C,xt=I+(u-I)*Math.min((q-C)/Rt,(z-C)/Rt);Te=Math.floor(Math.min(xt,O)/this._granularityCellSize)+1,Ce=Math.ceil(Math.max(xt,O)/this._granularityCellSize)-1,$e=O<xt}let ht=G>0?z:q;if($e)for(let Rt=Te;Rt<=Ce;Rt++)s.push(this._vertexToIndex(Rt*this._granularityCellSize,ht));else for(let Rt=Ce;Rt>=Te;Rt--)s.push(this._vertexToIndex(Rt*this._granularityCellSize,ht))}_generateOutline(s){let u=[];for(let m of s){let y=Zm(m,this._granularity,!0),S=this._pointArrayToIndices(y),I=[];for(let C=1;C<S.length;C++)I.push(S[C-1]),I.push(S[C]);u.push(I)}return u}_handlePoles(s){let u=!1,m=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(m=!0)),(u||m)&&this._fillPoles(s,u,m)}_ensureNoPoleVertices(){let s=this._vertexBuffer;for(let u=0;u<s.length;u+=2){let m=s[u+1];m===gy&&(s[u+1]=-32767),m===lw&&(s[u+1]=32766)}}_generatePoleQuad(s,u,m,y,S,I){y>S!=(I===gy)?(s.push(u),s.push(m),s.push(this._vertexToIndex(y,I)),s.push(m),s.push(this._vertexToIndex(S,I)),s.push(this._vertexToIndex(y,I))):(s.push(m),s.push(u),s.push(this._vertexToIndex(y,I)),s.push(this._vertexToIndex(S,I)),s.push(m),s.push(this._vertexToIndex(y,I)))}_fillPoles(s,u,m){let y=this._vertexBuffer,S=Je,I=s.length;for(let C=2;C<I;C+=3){let O=s[C-2],q=s[C-1],z=s[C],G=y[2*O],Y=y[2*O+1],X=y[2*q],Q=y[2*q+1],re=y[2*z],le=y[2*z+1];u&&(Y===0&&Q===0&&this._generatePoleQuad(s,O,q,G,X,gy),Q===0&&le===0&&this._generatePoleQuad(s,q,z,X,re,gy),le===0&&Y===0&&this._generatePoleQuad(s,z,O,re,G,gy)),m&&(Y===S&&Q===S&&this._generatePoleQuad(s,O,q,G,X,lw),Q===S&&le===S&&this._generatePoleQuad(s,q,z,X,re,lw),le===S&&Y===S&&this._generatePoleQuad(s,z,O,re,G,lw))}}_initializeVertices(s){for(let u=0;u<s.length;u+=2)this._vertexToIndex(s[u],s[u+1])}subdividePolygonInternal(s,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:m,holeIndices:y}=function(C){let O=[],q=[];for(let z of C)if(z.length!==0){z!==C[0]&&O.push(q.length/2);for(let G=0;G<z.length;G++)q.push(z[G].x),q.push(z[G].y)}return{flattened:q,holeIndices:O}}(s),S;this._initializeVertices(m);try{let C=function(q,z,G=2){let Y=z&&z.length,X=Y?z[0]*G:q.length,Q=qX(q,0,X,G,!0),re=[];if(!Q||Q.next===Q.prev)return re;let le,me,qe;if(Y&&(Q=function(Te,Ce,$e,et){let ht=[];for(let Rt=0,xt=Ce.length;Rt<xt;Rt++){let At=qX(Te,Ce[Rt]*et,Rt<xt-1?Ce[Rt+1]*et:Te.length,et,!1);At===At.next&&(At.steiner=!0),ht.push(u6e(At))}ht.sort(a6e);for(let Rt=0;Rt<ht.length;Rt++)$e=s6e(ht[Rt],$e);return $e}(q,z,Q,G)),q.length>80*G){le=q[0],me=q[1];let Te=le,Ce=me;for(let $e=G;$e<X;$e+=G){let et=q[$e],ht=q[$e+1];et<le&&(le=et),ht<me&&(me=ht),et>Te&&(Te=et),ht>Ce&&(Ce=ht)}qe=Math.max(Te-le,Ce-me),qe=qe!==0?32767/qe:0}return iw(Q,re,G,le,me,qe,0),re}(m,y),O=this._convertIndices(m,C);S=this._subdivideTrianglesScanline(O)}catch(C){console.error(C)}let I=[];return u&&(I=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:I}}_convertIndices(s,u){let m=[];for(let y=0;y<u.length;y++)m.push(this._vertexToIndex(s[2*u[y]],s[2*u[y]+1]));return m}_pointArrayToIndices(s){let u=[];for(let m=0;m<s.length;m++){let y=s[m];u.push(this._vertexToIndex(y.x,y.y))}return u}}function BX(c,s,u,m=!0){return new f6e(u,s).subdividePolygonInternal(c,m)}function Zm(c,s,u=!1){if(!c||c.length<1)return[];if(c.length<2)return[];let m=c[0],y=c[c.length-1],S=u&&(m.x!==y.x||m.y!==y.y);if(s<2)return S?[...c,c[0]]:[...c];let I=Math.floor(Je/s),C=[];C.push(new l(c[0].x,c[0].y));let O=c.length,q=S?O:O-1;for(let z=0;z<q;z++){let G=c[z],Y=z<O-1?c[z+1]:c[0],X=G.x,Q=G.y,re=Y.x,le=Y.y,me=X!==re,qe=Q!==le;if(!me&&!qe)continue;let Te=re-X,Ce=le-Q,$e=Math.abs(Te),et=Math.abs(Ce),ht=X,Rt=Q;for(;;){let At=Te>0?(Math.floor(ht/I)+1)*I:(Math.ceil(ht/I)-1)*I,Jt=Ce>0?(Math.floor(Rt/I)+1)*I:(Math.ceil(Rt/I)-1)*I,Tt=Math.abs(ht-At),Mt=Math.abs(Rt-Jt),it=Math.abs(ht-re),fr=Math.abs(Rt-le),yr=me?Tt/$e:Number.POSITIVE_INFINITY,nr=qe?Mt/et:Number.POSITIVE_INFINITY;if((it<=Tt||!me)&&(fr<=Mt||!qe))break;if(yr<nr&&me||!qe){ht=At,Rt+=Ce*yr;let Yt=new l(ht,Math.round(Rt));C[C.length-1].x===Yt.x&&C[C.length-1].y===Yt.y||C.push(Yt)}else{ht+=Te*nr,Rt=Jt;let Yt=new l(Math.round(ht),Rt);C[C.length-1].x===Yt.x&&C[C.length-1].y===Yt.y||C.push(Yt)}}let xt=new l(re,le);C[C.length-1].x===xt.x&&C[C.length-1].y===xt.y||C.push(xt)}return C}function h6e(c,s,u){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let m=0,y=c[2*s[0]];for(let O=1;O<s.length;O++){let q=c[2*s[O]];q<y&&(y=q,m=O)}let S=s.length,I=m,C=(I+1)%S;for(;;){let O=I-1>=0?I-1:S-1,q=(C+1)%S,z=c[2*s[O]],G=c[2*s[q]],Y=c[2*s[I]],X=c[2*s[I]+1],Q=c[2*s[C]+1],re=!1;if(z<G)re=!0;else if(z>G)re=!1;else{let le=Q-X,me=-(c[2*s[C]]-Y),qe=X<Q?1:-1;((z-Y)*le+(c[2*s[O]+1]-X)*me)*qe>((G-Y)*le+(c[2*s[q]+1]-X)*me)*qe&&(re=!0)}if(re){let le=s[O],me=s[I],qe=s[C];le!==me&&le!==qe&&me!==qe&&u.push(qe,me,le),I--,I<0&&(I=S-1)}else{let le=s[q],me=s[I],qe=s[C];le!==me&&le!==qe&&me!==qe&&u.push(qe,me,le),C++,C>=S&&(C=0)}if(O===q)break}}function VX(c,s,u,m,y,S,I,C,O){let q=y.length/2,z=I&&C&&O;if(q<Or.MAX_VERTEX_ARRAY_LENGTH){let G=s.prepareSegment(q,u,m),Y=G.vertexLength;for(let re=0;re<S.length;re+=3)m.emplaceBack(Y+S[re],Y+S[re+1],Y+S[re+2]);let X,Q;G.vertexLength+=q,G.primitiveLength+=S.length/3,z&&(Q=I.prepareSegment(q,u,C),X=Q.vertexLength,Q.vertexLength+=q);for(let re=0;re<y.length;re+=2)c(y[re],y[re+1]);if(z)for(let re=0;re<O.length;re++){let le=O[re];for(let me=1;me<le.length;me+=2)C.emplaceBack(X+le[me-1],X+le[me]);Q.primitiveLength+=le.length/2}}else(function(G,Y,X,Q,re,le){let me=[];for(let et=0;et<Q.length/2;et++)me.push(-1);let qe={count:0},Te=0,Ce=G.getOrCreateLatestSegment(Y,X),$e=Ce.vertexLength;for(let et=2;et<re.length;et+=3){let ht=re[et-2],Rt=re[et-1],xt=re[et],At=me[ht]<Te,Jt=me[Rt]<Te,Tt=me[xt]<Te;Ce.vertexLength+((At?1:0)+(Jt?1:0)+(Tt?1:0))>Or.MAX_VERTEX_ARRAY_LENGTH&&(Ce=G.createNewSegment(Y,X),Te=qe.count,At=!0,Jt=!0,Tt=!0,$e=0);let Mt=uw(me,Q,le,qe,ht,At,Ce),it=uw(me,Q,le,qe,Rt,Jt,Ce),fr=uw(me,Q,le,qe,xt,Tt,Ce);X.emplaceBack($e+Mt-Te,$e+it-Te,$e+fr-Te),Ce.primitiveLength++}})(s,u,m,y,S,c),z&&function(G,Y,X,Q,re,le){let me=[];for(let et=0;et<Q.length/2;et++)me.push(-1);let qe={count:0},Te=0,Ce=G.getOrCreateLatestSegment(Y,X),$e=Ce.vertexLength;for(let et=0;et<re.length;et++){let ht=re[et];for(let Rt=1;Rt<re[et].length;Rt+=2){let xt=ht[Rt-1],At=ht[Rt],Jt=me[xt]<Te,Tt=me[At]<Te;Ce.vertexLength+((Jt?1:0)+(Tt?1:0))>Or.MAX_VERTEX_ARRAY_LENGTH&&(Ce=G.createNewSegment(Y,X),Te=qe.count,Jt=!0,Tt=!0,$e=0);let Mt=uw(me,Q,le,qe,xt,Jt,Ce),it=uw(me,Q,le,qe,At,Tt,Ce);X.emplaceBack($e+Mt-Te,$e+it-Te),Ce.primitiveLength++}}}(I,u,C,y,O,c),s.forceNewSegmentOnNextPrepare(),I==null||I.forceNewSegmentOnNextPrepare()}function uw(c,s,u,m,y,S,I){if(S){let C=m.count;return u(s[2*y],s[2*y+1]),c[y]=m.count,m.count++,I.vertexLength++,C}return c[y]}class gF{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qe,this.indexArray=new qn,this.indexArray2=new Cn,this.programConfigurations=new rs(s.layers,s.zoom),this.segments=new Or,this.segments2=new Or,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,m){this.hasPattern=hF("fill",this.layers,u);let y=this.layers[0].layout.get("fill-sort-key"),S=!y.isConstant(),I=[];for(let{feature:C,id:O,index:q,sourceLayerIndex:z}of s){let G=this.layers[0]._featureFilter.needGeometry,Y=Bu(C,G);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom,{globalState:this.globalState}),Y,m))continue;let X=S?y.evaluate(Y,{},m,u.availableImages):void 0,Q={id:O,properties:C.properties,type:C.type,sourceLayerIndex:z,index:q,geometry:G?Y.geometry:zc(C),patterns:{},sortKey:X};I.push(Q)}S&&I.sort((C,O)=>C.sortKey-O.sortKey);for(let C of I){let{geometry:O,index:q,sourceLayerIndex:z}=C;if(this.hasPattern){let G=pF("fill",this.layers,C,{zoom:this.zoom,globalState:this.globalState},u);this.patternFeatures.push(G)}else this.addFeature(C,O,q,m,{},u.subdivisionGranularity);u.featureIndex.insert(s[q].feature,O,q,z,this.index)}}update(s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,{imagePositions:m,globalState:this.globalState})}addFeatures(s,u,m){for(let y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,u,m,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,t6e),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,u,m,y,S,I){for(let C of Rm(u,500)){let O=BX(C,y,I.fill.getGranularityForZoomLevel(y.z)),q=this.layoutVertexArray;VX((z,G)=>{q.emplaceBack(z,G)},this.segments,this.layoutVertexArray,this.indexArray,O.verticesFlattened,O.indicesTriangles,this.segments2,this.indexArray2,O.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:S,canonical:y,globalState:this.globalState})}}let GX,$X;Ut("FillBucket",gF,{omit:["layers","patternFeatures"]});var p6e={get paint(){return $X=$X||new sa({"fill-antialias":new Kt(xe.paint_fill["fill-antialias"]),"fill-opacity":new lr(xe.paint_fill["fill-opacity"]),"fill-color":new lr(xe.paint_fill["fill-color"]),"fill-outline-color":new lr(xe.paint_fill["fill-outline-color"]),"fill-translate":new Kt(xe.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new ay(xe.paint_fill["fill-pattern"])})},get layout(){return GX=GX||new sa({"fill-sort-key":new lr(xe.layout_fill["fill-sort-key"])})}};class d6e extends Ms{constructor(s){super(s,p6e)}recalculate(s,u){super.recalculate(s,u);let m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new gF(s)}queryRadius(){return JA(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:u,transform:m,pixelsToTileUnits:y}){return EX(eM(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-m.bearingInRadians,y),u)}isTileClipped(){return!0}}let m6e=Ci([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),g6e=Ci([{name:"a_centroid",components:2,type:"Int16"}],4),{members:v6e}=m6e;class vy{constructor(s,u,m,y,S){this.properties={},this.extent=m,this.type=0,this.id=void 0,this._pbf=s,this._geometry=-1,this._keys=y,this._values=S,s.readFields(y6e,this,u)}loadGeometry(){let s=this._pbf;s.pos=this._geometry;let u=s.readVarint()+s.pos,m=[],y,S=1,I=0,C=0,O=0;for(;s.pos<u;){if(I<=0){let q=s.readVarint();S=7&q,I=q>>3}if(I--,S===1||S===2)C+=s.readSVarint(),O+=s.readSVarint(),S===1&&(y&&m.push(y),y=[]),y&&y.push(new l(C,O));else{if(S!==7)throw new Error(`unknown command ${S}`);y&&y.push(y[0].clone())}}return y&&m.push(y),m}bbox(){let s=this._pbf;s.pos=this._geometry;let u=s.readVarint()+s.pos,m=1,y=0,S=0,I=0,C=1/0,O=-1/0,q=1/0,z=-1/0;for(;s.pos<u;){if(y<=0){let G=s.readVarint();m=7&G,y=G>>3}if(y--,m===1||m===2)S+=s.readSVarint(),I+=s.readSVarint(),S<C&&(C=S),S>O&&(O=S),I<q&&(q=I),I>z&&(z=I);else if(m!==7)throw new Error(`unknown command ${m}`)}return[C,q,O,z]}toGeoJSON(s,u,m){let y=this.extent*Math.pow(2,m),S=this.extent*s,I=this.extent*u,C=this.loadGeometry();function O(Y){return[360*(Y.x+S)/y-180,360/Math.PI*Math.atan(Math.exp((1-2*(Y.y+I)/y)*Math.PI))-90]}function q(Y){return Y.map(O)}let z;if(this.type===1){let Y=[];for(let Q of C)Y.push(Q[0]);let X=q(Y);z=Y.length===1?{type:"Point",coordinates:X[0]}:{type:"MultiPoint",coordinates:X}}else if(this.type===2){let Y=C.map(q);z=Y.length===1?{type:"LineString",coordinates:Y[0]}:{type:"MultiLineString",coordinates:Y}}else{if(this.type!==3)throw new Error("unknown feature type");{let Y=function(Q){let re=Q.length;if(re<=1)return[Q];let le=[],me,qe;for(let Te=0;Te<re;Te++){let Ce=_6e(Q[Te]);Ce!==0&&(qe===void 0&&(qe=Ce<0),qe===Ce<0?(me&&le.push(me),me=[Q[Te]]):me&&me.push(Q[Te]))}return me&&le.push(me),le}(C),X=[];for(let Q of Y)X.push(Q.map(q));z=X.length===1?{type:"Polygon",coordinates:X[0]}:{type:"MultiPolygon",coordinates:X}}}let G={type:"Feature",geometry:z,properties:this.properties};return this.id!=null&&(G.id=this.id),G}}function y6e(c,s,u){c===1?s.id=u.readVarint():c===2?function(m,y){let S=m.readVarint()+m.pos;for(;m.pos<S;){let I=y._keys[m.readVarint()],C=y._values[m.readVarint()];y.properties[I]=C}}(u,s):c===3?s.type=u.readVarint():c===4&&(s._geometry=u.pos)}function _6e(c){let s=0;for(let u,m,y=0,S=c.length,I=S-1;y<S;I=y++)u=c[y],m=c[I],s+=(m.x-u.x)*(u.y+m.y);return s}vy.types=["Unknown","Point","LineString","Polygon"];class HX{constructor(s,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(x6e,this,u),this.length=this._features.length}feature(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];let u=this._pbf.readVarint()+this._pbf.pos;return new vy(this._pbf,u,this.extent,this._keys,this._values)}}function x6e(c,s,u){c===15?s.version=u.readVarint():c===1?s.name=u.readString():c===5?s.extent=u.readVarint():c===2?s._features.push(u.pos):c===3?s._keys.push(u.readString()):c===4&&s._values.push(function(m){let y=null,S=m.readVarint()+m.pos;for(;m.pos<S;){let I=m.readVarint()>>3;y=I===1?m.readString():I===2?m.readFloat():I===3?m.readDouble():I===4?m.readVarint64():I===5?m.readVarint():I===6?m.readSVarint():I===7?m.readBoolean():null}if(y==null)throw new Error("unknown feature value");return y}(u))}class WX{constructor(s,u){this.layers=s.readFields(b6e,{},u)}}function b6e(c,s,u){if(c===3){let m=new HX(u,u.readVarint()+u.pos);m.length&&(s[m.name]=m)}}let vF=Math.pow(2,13);function cw(c,s,u,m,y,S,I,C){c.emplaceBack(s,u,2*Math.floor(m*vF)+I,y*vF*2,S*vF*2,Math.round(C))}class yF{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Ve,this.centroidVertexArray=new Ee,this.indexArray=new qn,this.programConfigurations=new rs(s.layers,s.zoom),this.segments=new Or,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,m){this.features=[],this.hasPattern=hF("fill-extrusion",this.layers,u);for(let{feature:y,id:S,index:I,sourceLayerIndex:C}of s){let O=this.layers[0]._featureFilter.needGeometry,q=Bu(y,O);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom,{globalState:this.globalState}),q,m))continue;let z={id:S,sourceLayerIndex:C,index:I,geometry:O?q.geometry:zc(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(pF("fill-extrusion",this.layers,z,{zoom:this.zoom,globalState:this.globalState},u)):this.addFeature(z,z.geometry,I,m,{},u.subdivisionGranularity),u.featureIndex.insert(y,z.geometry,I,C,this.index,!0)}}addFeatures(s,u,m){for(let y of this.features){let{geometry:S}=y;this.addFeature(y,S,y.index,u,m,s.subdivisionGranularity)}}update(s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,{imagePositions:m,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,v6e),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,g6e.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,u,m,y,S,I){for(let C of Rm(u,500)){let O={x:0,y:0,sampleCount:0},q=this.layoutVertexArray.length;this.processPolygon(O,y,s,C,I);let z=this.layoutVertexArray.length-q,G=Math.floor(O.x/O.sampleCount),Y=Math.floor(O.y/O.sampleCount);for(let X=0;X<z;X++)this.centroidVertexArray.emplaceBack(G,Y)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:S,canonical:y,globalState:this.globalState})}processPolygon(s,u,m,y,S){if(y.length<1||ZX(y[0]))return;for(let G of y)G.length!==0&&w6e(s,G);let I={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=S.fill.getGranularityForZoomLevel(u.z),O=vy.types[m.type]==="Polygon";for(let G of y){if(G.length===0||ZX(G))continue;let Y=Zm(G,C,O);this._generateSideFaces(Y,I)}if(!O)return;let q=BX(y,u,C,!1),z=this.layoutVertexArray;VX((G,Y)=>{cw(z,G,Y,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,q.verticesFlattened,q.indicesTriangles)}_generateSideFaces(s,u){let m=0;for(let y=1;y<s.length;y++){let S=s[y],I=s[y-1];if(E6e(S,I))continue;u.segment.vertexLength+4>Or.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let C=S.sub(I)._perp()._unit(),O=I.dist(S);m+O>32768&&(m=0),cw(this.layoutVertexArray,S.x,S.y,C.x,C.y,0,0,m),cw(this.layoutVertexArray,S.x,S.y,C.x,C.y,0,1,m),m+=O,cw(this.layoutVertexArray,I.x,I.y,C.x,C.y,0,0,m),cw(this.layoutVertexArray,I.x,I.y,C.x,C.y,0,1,m);let q=u.segment.vertexLength;this.indexArray.emplaceBack(q,q+2,q+1),this.indexArray.emplaceBack(q+1,q+2,q+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function w6e(c,s){for(let u=0;u<s.length;u++){let m=s[u];u===s.length-1&&s[0].x===m.x&&s[0].y===m.y||(c.x+=m.x,c.y+=m.y,c.sampleCount++)}}function E6e(c,s){return c.x===s.x&&(c.x<0||c.x>Je)||c.y===s.y&&(c.y<0||c.y>Je)}function ZX(c){return c.every(s=>s.x<0)||c.every(s=>s.x>Je)||c.every(s=>s.y<0)||c.every(s=>s.y>Je)}let YX;Ut("FillExtrusionBucket",yF,{omit:["layers","features"]});var S6e={get paint(){return YX=YX||new sa({"fill-extrusion-opacity":new Kt(xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new lr(xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ay(xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new lr(xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new lr(xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kt(xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class T6e extends Ms{constructor(s){super(s,S6e)}createBucket(s){return new yF(s)}queryRadius(){return JA(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:m,geometry:y,transform:S,pixelsToTileUnits:I,pixelPosMatrix:C}){let O=eM(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,I),q=this.paint.get("fill-extrusion-height").evaluate(u,m),z=this.paint.get("fill-extrusion-base").evaluate(u,m),G=function(X,Q){let re=[];for(let le of X){let me=[le.x,le.y,0,1];Ne(me,me,Q),re.push(new l(me[0]/me[3],me[1]/me[3]))}return re}(O,C),Y=function(X,Q,re,le){let me=[],qe=[],Te=le[8]*Q,Ce=le[9]*Q,$e=le[10]*Q,et=le[11]*Q,ht=le[8]*re,Rt=le[9]*re,xt=le[10]*re,At=le[11]*re;for(let Jt of X){let Tt=[],Mt=[];for(let it of Jt){let fr=it.x,yr=it.y,nr=le[0]*fr+le[4]*yr+le[12],Yt=le[1]*fr+le[5]*yr+le[13],en=le[2]*fr+le[6]*yr+le[14],wi=le[3]*fr+le[7]*yr+le[15],no=en+$e,Wo=wi+et,_l=nr+ht,is=Yt+Rt,Co=en+xt,ui=wi+At,mo=new l((nr+Te)/Wo,(Yt+Ce)/Wo);mo.z=no/Wo,Tt.push(mo);let Po=new l(_l/ui,is/ui);Po.z=Co/ui,Mt.push(Po)}me.push(Tt),qe.push(Mt)}return[me,qe]}(y,z,q,C);return function(X,Q,re){let le=1/0;EX(re,Q)&&(le=KX(re,Q[0]));for(let me=0;me<Q.length;me++){let qe=Q[me],Te=X[me];for(let Ce=0;Ce<qe.length-1;Ce++){let $e=qe[Ce],et=[$e,qe[Ce+1],Te[Ce+1],Te[Ce],$e];wX(re,et)&&(le=Math.min(le,KX(re,et)))}}return le!==1/0&&le}(Y[0],Y[1],G)}}function fw(c,s){return c.x*s.x+c.y*s.y}function KX(c,s){if(c.length===1){let u=0,m=s[u++],y;for(;!y||m.equals(y);)if(y=s[u++],!y)return 1/0;for(;u<s.length;u++){let S=s[u],I=c[0],C=y.sub(m),O=S.sub(m),q=I.sub(m),z=fw(C,C),G=fw(C,O),Y=fw(O,O),X=fw(q,C),Q=fw(q,O),re=z*Y-G*G,le=(Y*X-G*Q)/re,me=(z*Q-G*X)/re,qe=m.z*(1-le-me)+y.z*le+S.z*me;if(isFinite(qe))return qe}return 1/0}{let u=1/0;for(let m of s)u=Math.min(u,m.z);return u}}let I6e=Ci([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:A6e}=I6e,M6e=Ci([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:C6e}=M6e,P6e=Math.cos(Math.PI/180*37.5),XX=Math.pow(2,14)/.5;class _F{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Ge,this.layoutVertexArray2=new Xe,this.indexArray=new qn,this.programConfigurations=new rs(s.layers,s.zoom),this.segments=new Or,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,m){this.hasPattern=hF("line",this.layers,u);let y=this.layers[0].layout.get("line-sort-key"),S=!y.isConstant(),I=[];for(let{feature:C,id:O,index:q,sourceLayerIndex:z}of s){let G=this.layers[0]._featureFilter.needGeometry,Y=Bu(C,G);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom,{globalState:this.globalState}),Y,m))continue;let X=S?y.evaluate(Y,{},m):void 0,Q={id:O,properties:C.properties,type:C.type,sourceLayerIndex:z,index:q,geometry:G?Y.geometry:zc(C),patterns:{},sortKey:X};I.push(Q)}S&&I.sort((C,O)=>C.sortKey-O.sortKey);for(let C of I){let{geometry:O,index:q,sourceLayerIndex:z}=C;if(this.hasPattern){let G=pF("line",this.layers,C,{zoom:this.zoom,globalState:this.globalState},u);this.patternFeatures.push(G)}else this.addFeature(C,O,q,m,{},u.subdivisionGranularity);u.featureIndex.insert(s[q].feature,O,q,z,this.index)}}update(s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,{imagePositions:m,globalState:this.globalState})}addFeatures(s,u,m){for(let y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,u,m,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,C6e)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,A6e),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,m,y,S,I){let C=this.layers[0].layout,O=C.get("line-join").evaluate(s,{}),q=C.get("line-cap"),z=C.get("line-miter-limit"),G=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(let Y of u)this.addLine(Y,s,O,q,z,G,y,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:S,canonical:y,globalState:this.globalState})}addLine(s,u,m,y,S,I,C,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=Zm(s,C?O.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Te=0;Te<s.length-1;Te++)this.totalDistance+=s[Te].dist(s[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let q=vy.types[u.type]==="Polygon",z=s.length;for(;z>=2&&s[z-1].equals(s[z-2]);)z--;let G=0;for(;G<z-1&&s[G].equals(s[G+1]);)G++;if(z<(q?3:2))return;m==="bevel"&&(S=1.05);let Y=this.overscaling<=16?122880/(512*this.overscaling):0,X=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray),Q,re,le,me,qe;this.e1=this.e2=-1,q&&(Q=s[z-2],qe=s[G].sub(Q)._unit()._perp());for(let Te=G;Te<z;Te++){if(le=Te===z-1?q?s[G+1]:void 0:s[Te+1],le&&s[Te].equals(le))continue;qe&&(me=qe),Q&&(re=Q),Q=s[Te],qe=le?le.sub(Q)._unit()._perp():me,me=me||qe;let Ce=me.add(qe);Ce.x===0&&Ce.y===0||Ce._unit();let $e=me.x*qe.x+me.y*qe.y,et=Ce.x*qe.x+Ce.y*qe.y,ht=et!==0?1/et:1/0,Rt=2*Math.sqrt(2-2*et),xt=et<P6e&&re&&le,At=me.x*qe.y-me.y*qe.x>0;if(xt&&Te>G){let Mt=Q.dist(re);if(Mt>2*Y){let it=Q.sub(Q.sub(re)._mult(Y/Mt)._round());this.updateDistance(re,it),this.addCurrentVertex(it,me,0,0,X),re=it}}let Jt=re&&le,Tt=Jt?m:q?"butt":y;if(Jt&&Tt==="round"&&(ht<I?Tt="miter":ht<=2&&(Tt="fakeround")),Tt==="miter"&&ht>S&&(Tt="bevel"),Tt==="bevel"&&(ht>2&&(Tt="flipbevel"),ht<S&&(Tt="miter")),re&&this.updateDistance(re,Q),Tt==="miter")Ce._mult(ht),this.addCurrentVertex(Q,Ce,0,0,X);else if(Tt==="flipbevel"){if(ht>100)Ce=qe.mult(-1);else{let Mt=ht*me.add(qe).mag()/me.sub(qe).mag();Ce._perp()._mult(Mt*(At?-1:1))}this.addCurrentVertex(Q,Ce,0,0,X),this.addCurrentVertex(Q,Ce.mult(-1),0,0,X)}else if(Tt==="bevel"||Tt==="fakeround"){let Mt=-Math.sqrt(ht*ht-1),it=At?Mt:0,fr=At?0:Mt;if(re&&this.addCurrentVertex(Q,me,it,fr,X),Tt==="fakeround"){let yr=Math.round(180*Rt/Math.PI/20);for(let nr=1;nr<yr;nr++){let Yt=nr/yr;if(Yt!==.5){let wi=Yt-.5;Yt+=Yt*wi*(Yt-1)*((1.0904+$e*($e*(3.55645-1.43519*$e)-3.2452))*wi*wi+(.848013+$e*(.215638*$e-1.06021)))}let en=qe.sub(me)._mult(Yt)._add(me)._unit()._mult(At?-1:1);this.addHalfVertex(Q,en.x,en.y,!1,At,0,X)}}le&&this.addCurrentVertex(Q,qe,-it,-fr,X)}else if(Tt==="butt")this.addCurrentVertex(Q,Ce,0,0,X);else if(Tt==="square"){let Mt=re?1:-1;this.addCurrentVertex(Q,Ce,Mt,Mt,X)}else Tt==="round"&&(re&&(this.addCurrentVertex(Q,me,0,0,X),this.addCurrentVertex(Q,me,1,1,X,!0)),le&&(this.addCurrentVertex(Q,qe,-1,-1,X,!0),this.addCurrentVertex(Q,qe,0,0,X)));if(xt&&Te<z-1){let Mt=Q.dist(le);if(Mt>2*Y){let it=Q.add(le.sub(Q)._mult(Y/Mt)._round());this.updateDistance(Q,it),this.addCurrentVertex(it,qe,0,0,X),Q=it}}}}addCurrentVertex(s,u,m,y,S,I=!1){let C=u.y*y-u.x,O=-u.y-u.x*y;this.addHalfVertex(s,u.x+u.y*m,u.y-u.x*m,I,!1,m,S),this.addHalfVertex(s,C,O,I,!0,-y,S),this.distance>XX/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,u,m,y,S,I))}addHalfVertex({x:s,y:u},m,y,S,I,C,O){let q=.5*(this.lineClips?this.scaledDistance*(XX-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(S?1:0),(u<<1)+(I?1:0),Math.round(63*m)+128,Math.round(63*y)+128,1+(C===0?0:C<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let z=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,z,this.e2),O.primitiveLength++),I?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,u){this.distance+=s.dist(u),this.updateScaledDistance()}}let QX,JX;Ut("LineBucket",_F,{omit:["layers","patternFeatures"]});var eQ={get paint(){return JX=JX||new sa({"line-opacity":new lr(xe.paint_line["line-opacity"]),"line-color":new lr(xe.paint_line["line-color"]),"line-translate":new Kt(xe.paint_line["line-translate"]),"line-translate-anchor":new Kt(xe.paint_line["line-translate-anchor"]),"line-width":new lr(xe.paint_line["line-width"]),"line-gap-width":new lr(xe.paint_line["line-gap-width"]),"line-offset":new lr(xe.paint_line["line-offset"]),"line-blur":new lr(xe.paint_line["line-blur"]),"line-dasharray":new Nc(xe.paint_line["line-dasharray"]),"line-pattern":new ay(xe.paint_line["line-pattern"]),"line-gradient":new sy(xe.paint_line["line-gradient"])})},get layout(){return QX=QX||new sa({"line-cap":new Kt(xe.layout_line["line-cap"]),"line-join":new lr(xe.layout_line["line-join"]),"line-miter-limit":new Kt(xe.layout_line["line-miter-limit"]),"line-round-limit":new Kt(xe.layout_line["line-round-limit"]),"line-sort-key":new lr(xe.layout_line["line-sort-key"])})}};class R6e extends lr{possiblyEvaluate(s,u){return u=new Vn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(s,u)}evaluate(s,u,m,y){return u=nt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(s,u,m,y)}}let iM;class O6e extends Ms{constructor(s){super(s,eQ),this.gradientVersion=0,iM||(iM=new R6e(eQ.paint.properties["line-width"].specification),iM.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){let u=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Mi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,u){super.recalculate(s,u),this.paint._values["line-floorwidth"]=iM.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new _F(s)}queryRadius(s){let u=s,m=tQ(rw("line-width",this,u),rw("line-gap-width",this,u)),y=rw("line-offset",this,u);return m/2+Math.abs(y)+JA(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:m,geometry:y,transform:S,pixelsToTileUnits:I}){let C=eM(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,I),O=I/2*tQ(this.paint.get("line-width").evaluate(u,m),this.paint.get("line-gap-width").evaluate(u,m)),q=this.paint.get("line-offset").evaluate(u,m);return q&&(y=function(z,G){let Y=[];for(let X=0;X<z.length;X++){let Q=z[X],re=[];for(let le=0;le<Q.length;le++){let me=Q[le-1],qe=Q[le],Te=Q[le+1],Ce=le===0?new l(0,0):qe.sub(me)._unit()._perp(),$e=le===Q.length-1?new l(0,0):Te.sub(qe)._unit()._perp(),et=Ce._add($e)._unit(),ht=et.x*$e.x+et.y*$e.y;ht!==0&&et._mult(1/ht),re.push(et._mult(G)._add(qe))}Y.push(re)}return Y}(y,q*I)),function(z,G,Y){for(let X=0;X<G.length;X++){let Q=G[X];if(z.length>=3){for(let re=0;re<Q.length;re++)if(py(z,Q[re]))return!0}if(VGe(z,Q,Y))return!0}return!1}(C,y,O)}isTileClipped(){return!0}}function tQ(c,s){return s>0?s+2*c:c}let L6e=Ci([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),D6e=Ci([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ci([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let N6e=Ci([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ci([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let rQ=Ci([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),k6e=Ci([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function q6e(c,s,u){return c.sections.forEach(m=>{m.text=function(y,S,I){let C=S.layout.get("text-transform").evaluate(I,{});return C==="uppercase"?y=y.toLocaleUpperCase():C==="lowercase"&&(y=y.toLocaleLowerCase()),dl.applyArabicShaping&&(y=dl.applyArabicShaping(y)),y}(m.text,s,u)}),c}Ci([{name:"triangle",components:3,type:"Uint16"}]),Ci([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ci([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ci([{type:"Float32",name:"offsetX"}]),Ci([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ci([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let hw={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var po=24;let xF=4294967296,nQ=1/xF,iQ=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class bF{constructor(s=new Uint8Array(16)){this.buf=ArrayBuffer.isView(s)?s:new Uint8Array(s),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(s,u,m=this.length){for(;this.pos<m;){let y=this.readVarint(),S=y>>3,I=this.pos;this.type=7&y,s(S,u,this),this.pos===I&&this.skip(y)}return u}readMessage(s,u){return this.readFields(s,u,this.readVarint()+this.pos)}readFixed32(){let s=this.dataView.getUint32(this.pos,!0);return this.pos+=4,s}readSFixed32(){let s=this.dataView.getInt32(this.pos,!0);return this.pos+=4,s}readFixed64(){let s=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*xF;return this.pos+=8,s}readSFixed64(){let s=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*xF;return this.pos+=8,s}readFloat(){let s=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,s}readDouble(){let s=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,s}readVarint(s){let u=this.buf,m,y;return y=u[this.pos++],m=127&y,y<128?m:(y=u[this.pos++],m|=(127&y)<<7,y<128?m:(y=u[this.pos++],m|=(127&y)<<14,y<128?m:(y=u[this.pos++],m|=(127&y)<<21,y<128?m:(y=u[this.pos],m|=(15&y)<<28,function(S,I,C){let O=C.buf,q,z;if(z=O[C.pos++],q=(112&z)>>4,z<128||(z=O[C.pos++],q|=(127&z)<<3,z<128)||(z=O[C.pos++],q|=(127&z)<<10,z<128)||(z=O[C.pos++],q|=(127&z)<<17,z<128)||(z=O[C.pos++],q|=(127&z)<<24,z<128)||(z=O[C.pos++],q|=(1&z)<<31,z<128))return yy(S,q,I);throw new Error("Expected varint not more than 10 bytes")}(m,s,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let s=this.readVarint();return s%2==1?(s+1)/-2:s/2}readBoolean(){return!!this.readVarint()}readString(){let s=this.readVarint()+this.pos,u=this.pos;return this.pos=s,s-u>=12&&iQ?iQ.decode(this.buf.subarray(u,s)):function(m,y,S){let I="",C=y;for(;C<S;){let O=m[C],q,z,G,Y=null,X=O>239?4:O>223?3:O>191?2:1;if(C+X>S)break;X===1?O<128&&(Y=O):X===2?(q=m[C+1],(192&q)==128&&(Y=(31&O)<<6|63&q,Y<=127&&(Y=null))):X===3?(q=m[C+1],z=m[C+2],(192&q)==128&&(192&z)==128&&(Y=(15&O)<<12|(63&q)<<6|63&z,(Y<=2047||Y>=55296&&Y<=57343)&&(Y=null))):X===4&&(q=m[C+1],z=m[C+2],G=m[C+3],(192&q)==128&&(192&z)==128&&(192&G)==128&&(Y=(15&O)<<18|(63&q)<<12|(63&z)<<6|63&G,(Y<=65535||Y>=1114112)&&(Y=null))),Y===null?(Y=65533,X=1):Y>65535&&(Y-=65536,I+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),I+=String.fromCharCode(Y),C+=X}return I}(this.buf,u,s)}readBytes(){let s=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,s);return this.pos=s,u}readPackedVarint(s=[],u){let m=this.readPackedEnd();for(;this.pos<m;)s.push(this.readVarint(u));return s}readPackedSVarint(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readSVarint());return s}readPackedBoolean(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readBoolean());return s}readPackedFloat(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readFloat());return s}readPackedDouble(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readDouble());return s}readPackedFixed32(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readFixed32());return s}readPackedSFixed32(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readSFixed32());return s}readPackedFixed64(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readFixed64());return s}readPackedSFixed64(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readSFixed64());return s}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(s){let u=7&s;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(s,u){this.writeVarint(s<<3|u)}realloc(s){let u=this.length||16;for(;u<this.pos+s;)u*=2;if(u!==this.length){let m=new Uint8Array(u);m.set(this.buf),this.buf=m,this.dataView=new DataView(m.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeSFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*nQ),!0),this.pos+=8}writeSFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*nQ),!0),this.pos+=8}writeVarint(s){(s=+s||0)>268435455||s<0?function(u,m){let y,S;if(u>=0?(y=u%4294967296|0,S=u/4294967296|0):(y=~(-u%4294967296),S=~(-u/4294967296),4294967295^y?y=y+1|0:(y=0,S=S+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(I,C,O){O.buf[O.pos++]=127&I|128,I>>>=7,O.buf[O.pos++]=127&I|128,I>>>=7,O.buf[O.pos++]=127&I|128,I>>>=7,O.buf[O.pos++]=127&I|128,O.buf[O.pos]=127&(I>>>=7)}(y,0,m),function(I,C){let O=(7&I)<<4;C.buf[C.pos++]|=O|((I>>>=3)?128:0),I&&(C.buf[C.pos++]=127&I|((I>>>=7)?128:0),I&&(C.buf[C.pos++]=127&I|((I>>>=7)?128:0),I&&(C.buf[C.pos++]=127&I|((I>>>=7)?128:0),I&&(C.buf[C.pos++]=127&I|((I>>>=7)?128:0),I&&(C.buf[C.pos++]=127&I)))))}(S,m)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))}writeSVarint(s){this.writeVarint(s<0?2*-s-1:2*s)}writeBoolean(s){this.writeVarint(+s)}writeString(s){s=String(s),this.realloc(4*s.length),this.pos++;let u=this.pos;this.pos=function(y,S,I){for(let C,O,q=0;q<S.length;q++){if(C=S.charCodeAt(q),C>55295&&C<57344){if(!O){C>56319||q+1===S.length?(y[I++]=239,y[I++]=191,y[I++]=189):O=C;continue}if(C<56320){y[I++]=239,y[I++]=191,y[I++]=189,O=C;continue}C=O-55296<<10|C-56320|65536,O=null}else O&&(y[I++]=239,y[I++]=191,y[I++]=189,O=null);C<128?y[I++]=C:(C<2048?y[I++]=C>>6|192:(C<65536?y[I++]=C>>12|224:(y[I++]=C>>18|240,y[I++]=C>>12&63|128),y[I++]=C>>6&63|128),y[I++]=63&C|128)}return I}(this.buf,s,this.pos);let m=this.pos-u;m>=128&&oQ(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m}writeFloat(s){this.realloc(4),this.dataView.setFloat32(this.pos,s,!0),this.pos+=4}writeDouble(s){this.realloc(8),this.dataView.setFloat64(this.pos,s,!0),this.pos+=8}writeBytes(s){let u=s.length;this.writeVarint(u),this.realloc(u);for(let m=0;m<u;m++)this.buf[this.pos++]=s[m]}writeRawMessage(s,u){this.pos++;let m=this.pos;s(u,this);let y=this.pos-m;y>=128&&oQ(m,y,this),this.pos=m-1,this.writeVarint(y),this.pos+=y}writeMessage(s,u,m){this.writeTag(s,2),this.writeRawMessage(u,m)}writePackedVarint(s,u){u.length&&this.writeMessage(s,F6e,u)}writePackedSVarint(s,u){u.length&&this.writeMessage(s,j6e,u)}writePackedBoolean(s,u){u.length&&this.writeMessage(s,B6e,u)}writePackedFloat(s,u){u.length&&this.writeMessage(s,z6e,u)}writePackedDouble(s,u){u.length&&this.writeMessage(s,U6e,u)}writePackedFixed32(s,u){u.length&&this.writeMessage(s,V6e,u)}writePackedSFixed32(s,u){u.length&&this.writeMessage(s,G6e,u)}writePackedFixed64(s,u){u.length&&this.writeMessage(s,$6e,u)}writePackedSFixed64(s,u){u.length&&this.writeMessage(s,H6e,u)}writeBytesField(s,u){this.writeTag(s,2),this.writeBytes(u)}writeFixed32Field(s,u){this.writeTag(s,5),this.writeFixed32(u)}writeSFixed32Field(s,u){this.writeTag(s,5),this.writeSFixed32(u)}writeFixed64Field(s,u){this.writeTag(s,1),this.writeFixed64(u)}writeSFixed64Field(s,u){this.writeTag(s,1),this.writeSFixed64(u)}writeVarintField(s,u){this.writeTag(s,0),this.writeVarint(u)}writeSVarintField(s,u){this.writeTag(s,0),this.writeSVarint(u)}writeStringField(s,u){this.writeTag(s,2),this.writeString(u)}writeFloatField(s,u){this.writeTag(s,5),this.writeFloat(u)}writeDoubleField(s,u){this.writeTag(s,1),this.writeDouble(u)}writeBooleanField(s,u){this.writeVarintField(s,+u)}}function yy(c,s,u){return u?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function oQ(c,s,u){let m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));u.realloc(m);for(let y=u.pos-1;y>=c;y--)u.buf[y+m]=u.buf[y]}function F6e(c,s){for(let u=0;u<c.length;u++)s.writeVarint(c[u])}function j6e(c,s){for(let u=0;u<c.length;u++)s.writeSVarint(c[u])}function z6e(c,s){for(let u=0;u<c.length;u++)s.writeFloat(c[u])}function U6e(c,s){for(let u=0;u<c.length;u++)s.writeDouble(c[u])}function B6e(c,s){for(let u=0;u<c.length;u++)s.writeBoolean(c[u])}function V6e(c,s){for(let u=0;u<c.length;u++)s.writeFixed32(c[u])}function G6e(c,s){for(let u=0;u<c.length;u++)s.writeSFixed32(c[u])}function $6e(c,s){for(let u=0;u<c.length;u++)s.writeFixed64(c[u])}function H6e(c,s){for(let u=0;u<c.length;u++)s.writeSFixed64(c[u])}function W6e(c,s,u){c===1&&u.readMessage(Z6e,s)}function Z6e(c,s,u){if(c===3){let{id:m,bitmap:y,width:S,height:I,left:C,top:O,advance:q}=u.readMessage(Y6e,{});s.push({id:m,bitmap:new nw({width:S+6,height:I+6},y),metrics:{width:S,height:I,left:C,top:O,advance:q}})}}function Y6e(c,s,u){c===1?s.id=u.readVarint():c===2?s.bitmap=u.readBytes():c===3?s.width=u.readVarint():c===4?s.height=u.readVarint():c===5?s.left=u.readSVarint():c===6?s.top=u.readSVarint():c===7&&(s.advance=u.readVarint())}function aQ(c){let s=0,u=0;for(let I of c)s+=I.w*I.h,u=Math.max(u,I.w);c.sort((I,C)=>C.h-I.h);let m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}],y=0,S=0;for(let I of c)for(let C=m.length-1;C>=0;C--){let O=m[C];if(!(I.w>O.w||I.h>O.h)){if(I.x=O.x,I.y=O.y,S=Math.max(S,I.y+I.h),y=Math.max(y,I.x+I.w),I.w===O.w&&I.h===O.h){let q=m.pop();q&&C<m.length&&(m[C]=q)}else I.h===O.h?(O.x+=I.w,O.w-=I.w):I.w===O.w?(O.y+=I.h,O.h-=I.h):(m.push({x:O.x+I.w,y:O.y,w:O.w-I.w,h:I.h}),O.y+=I.h,O.h-=I.h);break}}return{w:y,h:S,fill:s/(y*S)||0}}class wF{constructor(s,{pixelRatio:u,version:m,stretchX:y,stretchY:S,content:I,textFitWidth:C,textFitHeight:O}){this.paddedRect=s,this.pixelRatio=u,this.stretchX=y,this.stretchY=S,this.content=I,this.version=m,this.textFitWidth=C,this.textFitHeight=O}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class sQ{constructor(s,u){let m={},y={};this.haveRenderCallbacks=[];let S=[];this.addImages(s,m,S),this.addImages(u,y,S);let{w:I,h:C}=aQ(S),O=new ns({width:I||1,height:C||1});for(let q in s){let z=s[q],G=m[q].paddedRect;ns.copy(z.data,O,{x:0,y:0},{x:G.x+1,y:G.y+1},z.data)}for(let q in u){let z=u[q],G=y[q].paddedRect,Y=G.x+1,X=G.y+1,Q=z.data.width,re=z.data.height;ns.copy(z.data,O,{x:0,y:0},{x:Y,y:X},z.data),ns.copy(z.data,O,{x:0,y:re-1},{x:Y,y:X-1},{width:Q,height:1}),ns.copy(z.data,O,{x:0,y:0},{x:Y,y:X+re},{width:Q,height:1}),ns.copy(z.data,O,{x:Q-1,y:0},{x:Y-1,y:X},{width:1,height:re}),ns.copy(z.data,O,{x:0,y:0},{x:Y+Q,y:X},{width:1,height:re})}this.image=O,this.iconPositions=m,this.patternPositions=y}addImages(s,u,m){for(let y in s){let S=s[y],I={x:0,y:0,w:S.data.width+2,h:S.data.height+2};m.push(I),u[y]=new wF(I,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(s,u){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),u),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),u)}patchUpdatedImage(s,u,m){if(!s||!u||s.version===u.version)return;s.version=u.version;let[y,S]=s.tl;m.update(u.data,void 0,{x:y,y:S})}}var Pp;Ut("ImagePosition",wF),Ut("ImageAtlas",sQ),i.ao=void 0,(Pp=i.ao||(i.ao={}))[Pp.none=0]="none",Pp[Pp.horizontal=1]="horizontal",Pp[Pp.vertical=2]="vertical",Pp[Pp.horizontalOnly=3]="horizontalOnly";class pw{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,u,m){let y=new pw;return y.scale=s||1,y.fontStack=u,y.verticalAlign=m||"bottom",y}static forImage(s,u){let m=new pw;return m.imageName=s,m.verticalAlign=u||"bottom",m}}class _y{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u){let m=new _y;for(let y=0;y<s.sections.length;y++){let S=s.sections[y];S.image?m.addImageSection(S):m.addTextSection(S,u)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let u="";for(let m=0;m<s.length;m++){let y=s.charCodeAt(m+1)||null,S=s.charCodeAt(m-1)||null;u+=y&&GA(y)&&!hw[s[m+1]]||S&&GA(S)&&!hw[s[m-1]]||!hw[s[m]]?s[m]:hw[s[m]]}return u}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&aM[this.text.charCodeAt(m)];m++)s++;let u=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&aM[this.text.charCodeAt(m)];m--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){let m=new _y;return m.text=this.text.substring(s,u),m.sectionIndex=this.sectionIndex.slice(s,u),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}getMaxImageSize(s){let u=0,m=0;for(let y=0;y<this.length();y++){let S=this.getSection(y);if(S.imageName){let I=s[S.imageName];if(!I)continue;let C=I.displaySize;u=Math.max(u,C[0]),m=Math.max(m,C[1])}}return{maxImageWidth:u,maxImageHeight:m}}addTextSection(s,u){this.text+=s.text,this.sections.push(pw.forText(s.scale,s.fontStack||u,s.verticalAlign));let m=this.sections.length-1;for(let y=0;y<s.text.length;++y)this.sectionIndex.push(m)}addImageSection(s){let u=s.image?s.image.name:"";if(u.length===0)return void zt("Can't add FormattedSection with an empty image.");let m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(pw.forImage(u,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):zt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function oM(c,s,u,m,y,S,I,C,O,q,z,G,Y,X,Q){let re=_y.fromFeature(c,y),le;G===i.ao.vertical&&re.verticalizePunctuation();let{processBidirectionalText:me,processStyledBidirectionalText:qe}=dl;if(me&&re.sections.length===1){le=[];let $e=me(re.toString(),EF(re,q,S,s,m,X));for(let et of $e){let ht=new _y;ht.text=et,ht.sections=re.sections;for(let Rt=0;Rt<et.length;Rt++)ht.sectionIndex.push(0);le.push(ht)}}else if(qe){le=[];let $e=qe(re.text,re.sectionIndex,EF(re,q,S,s,m,X));for(let et of $e){let ht=new _y;ht.text=et[0],ht.sectionIndex=et[1],ht.sections=re.sections,le.push(ht)}}else le=function($e,et){let ht=[],Rt=$e.text,xt=0;for(let At of et)ht.push($e.substring(xt,At)),xt=At;return xt<Rt.length&&ht.push($e.substring(xt,Rt.length)),ht}(re,EF(re,q,S,s,m,X));let Te=[],Ce={positionedLines:Te,text:re.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function($e,et,ht,Rt,xt,At,Jt,Tt,Mt,it,fr,yr){let nr=0,Yt=0,en=0,wi=0,no=Tt==="right"?1:Tt==="left"?0:.5,Wo=po/yr,_l=0;for(let ui of xt){ui.trim();let mo=ui.getMaxScale(),Po={positionedGlyphs:[],lineOffset:0};$e.positionedLines[_l]=Po;let Ro=Po.positionedGlyphs,Ra=0;if(!ui.length()){Yt+=At,++_l;continue}let xl=J6e(Rt,ui,Wo);for(let os=0;os<ui.length();os++){let io=ui.getSection(os),vo=ui.getSectionIndex(os),yo=ui.getCharCode(os),Zi=e$e(Mt,fr,yo),ei;if(io.imageName){if($e.iconsInText=!0,io.scale=io.scale*Wo,ei=r$e(io,Zi,mo,xl,Rt),!ei)continue;Ra=Math.max(Ra,ei.imageOffset)}else if(ei=t$e(io,yo,Zi,xl,et,ht),!ei)continue;let{rect:Vu,metrics:Ey,baselineOffset:Gu}=ei;Ro.push({glyph:yo,imageName:io.imageName,x:nr,y:Yt+Gu+-17,vertical:Zi,scale:io.scale,fontStack:io.fontStack,sectionIndex:vo,metrics:Ey,rect:Vu}),Zi?($e.verticalizable=!0,nr+=(io.imageName?Ey.advance:po)*io.scale+it):nr+=Ey.advance*io.scale+it}Ro.length!==0&&(en=Math.max(nr-it,en),n$e(Ro,0,Ro.length-1,no)),nr=0,Po.lineOffset=Math.max(Ra,(mo-1)*po);let go=At*mo+Ra;Yt+=go,wi=Math.max(go,wi),++_l}let{horizontalAlign:is,verticalAlign:Co}=SF(Jt);(function(ui,mo,Po,Ro,Ra,xl,go,os,io){let vo=(mo-Po)*Ra,yo=0;yo=xl!==go?-os*Ro- -17:-Ro*io*go+.5*go;for(let Zi of ui)for(let ei of Zi.positionedGlyphs)ei.x+=vo,ei.y+=yo})($e.positionedLines,no,is,Co,en,wi,At,Yt,xt.length),$e.top+=-Co*Yt,$e.bottom=$e.top+Yt,$e.left+=-is*en,$e.right=$e.left+en}(Ce,s,u,m,le,I,C,O,G,q,Y,Q),!function($e){for(let et of $e)if(et.positionedGlyphs.length!==0)return!1;return!0}(Te)&&Ce}let aM={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},K6e={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},X6e={40:!0};function lQ(c,s,u,m,y,S){if(s.imageName){let I=m[s.imageName];return I?I.displaySize[0]*s.scale*po/S+y:0}{let I=u[s.fontStack],C=I&&I[c];return C?C.metrics.advance*s.scale+y:0}}function uQ(c,s,u,m){let y=Math.pow(c-s,2);return m?c<s?y/2:2*y:y+Math.abs(u)*u}function Q6e(c,s,u){let m=0;return c===10&&(m-=1e4),u&&(m+=150),c!==40&&c!==65288||(m+=50),s!==41&&s!==65289||(m+=50),m}function cQ(c,s,u,m,y,S){let I=null,C=uQ(s,u,y,S);for(let O of m){let q=uQ(s-O.x,u,y,S)+O.badness;q<=C&&(I=O,C=q)}return{index:c,x:s,priorBreak:I,badness:C}}function fQ(c){return c?fQ(c.priorBreak).concat(c.index):[]}function EF(c,s,u,m,y,S){if(!c)return[];let I=[],C=function(G,Y,X,Q,re,le){let me=0;for(let qe=0;qe<G.length();qe++){let Te=G.getSection(qe);me+=lQ(G.getCharCode(qe),Te,Q,re,Y,le)}return me/Math.max(1,Math.ceil(me/X))}(c,s,u,m,y,S),O=c.text.indexOf("\u200B")>=0,q=0;for(let G=0;G<c.length();G++){let Y=c.getSection(G),X=c.getCharCode(G);if(aM[X]||(q+=lQ(X,Y,m,y,s,S)),G<c.length()-1){let Q=!((z=X)<11904)&&(!!Jr["CJK Compatibility Forms"](z)||!!Jr["CJK Compatibility"](z)||!!Jr["CJK Strokes"](z)||!!Jr["CJK Symbols and Punctuation"](z)||!!Jr["Enclosed CJK Letters and Months"](z)||!!Jr["Halfwidth and Fullwidth Forms"](z)||!!Jr["Ideographic Description Characters"](z)||!!Jr["Vertical Forms"](z)||$b.test(String.fromCodePoint(z)));(K6e[X]||Q||Y.imageName||G!==c.length()-2&&X6e[c.getCharCode(G+1)])&&I.push(cQ(G+1,q,C,I,Q6e(X,c.getCharCode(G+1),Q&&O),!1))}}var z;return fQ(cQ(c.length(),q,C,I,0,!0))}function SF(c){let s=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function J6e(c,s,u){let m=s.getMaxScale()*po,{maxImageWidth:y,maxImageHeight:S}=s.getMaxImageSize(c),I=Math.max(m,S*u);return{verticalLineContentWidth:Math.max(m,y*u),horizontalLineContentHeight:I}}function hQ(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function e$e(c,s,u){return!(c===i.ao.horizontal||!s&&!Hb(u)||s&&(aM[u]||(m=u,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(m)))));var m}function t$e(c,s,u,m,y,S){let I=S[c.fontStack],C=function(q,z,G,Y){if(q&&q.rect)return q;let X=z[G.fontStack],Q=X&&X[Y];return Q?{rect:null,metrics:Q.metrics}:null}(I&&I[s],y,c,s);if(C===null)return null;let O;if(u)O=m.verticalLineContentWidth-c.scale*po;else{let q=hQ(c.verticalAlign);O=(m.horizontalLineContentHeight-c.scale*po)*q}return{rect:C.rect,metrics:C.metrics,baselineOffset:O}}function r$e(c,s,u,m,y){let S=y[c.imageName];if(!S)return null;let I=S.paddedRect,C=S.displaySize,O={width:C[0],height:C[1],left:1,top:-3,advance:s?C[1]:C[0]},q;if(s)q=m.verticalLineContentWidth-C[1]*c.scale;else{let z=hQ(c.verticalAlign);q=(m.horizontalLineContentHeight-C[1]*c.scale)*z}return{rect:I,metrics:O,baselineOffset:q,imageOffset:(s?C[0]:C[1])*c.scale-po*u}}function n$e(c,s,u,m){if(m===0)return;let y=c[u],S=(c[u].x+y.metrics.advance*y.scale)*m;for(let I=s;I<=u;I++)c[I].x-=S}function i$e(c,s,u){let{horizontalAlign:m,verticalAlign:y}=SF(u),S=s[0]-c.displaySize[0]*m,I=s[1]-c.displaySize[1]*y;return{image:c,top:I,bottom:I+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function pQ(c){var s,u;let m=c.left,y=c.top,S=c.right-m,I=c.bottom-y,C=(s=c.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",O=(u=c.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",q=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(O==="proportional"){if(C==="stretchOnly"&&S/I<q||C==="proportional"){let z=Math.ceil(I*q);m*=z/S,S=z}}else if(C==="proportional"&&O==="stretchOnly"&&q!==0&&S/I>q){let z=Math.ceil(S/q);y*=z/I,I=z}return{x1:m,y1:y,x2:m+S,y2:y+I}}function dQ(c,s,u,m,y,S){let I=c.image,C;if(I.content){let le=I.content,me=I.pixelRatio||1;C=[le[0]/me,le[1]/me,I.displaySize[0]-le[2]/me,I.displaySize[1]-le[3]/me]}let O=s.left*S,q=s.right*S,z,G,Y,X;u==="width"||u==="both"?(X=y[0]+O-m[3],G=y[0]+q+m[1]):(X=y[0]+(O+q-I.displaySize[0])/2,G=X+I.displaySize[0]);let Q=s.top*S,re=s.bottom*S;return u==="height"||u==="both"?(z=y[1]+Q-m[0],Y=y[1]+re+m[2]):(z=y[1]+(Q+re-I.displaySize[1])/2,Y=z+I.displaySize[1]),{image:I,top:z,right:G,bottom:Y,left:X,collisionPadding:C}}let nh=128,Rp=32640;function mQ(c,s){let{expression:u}=s;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Vn(c+1))};if(u.kind==="source")return{kind:"source"};{let{zoomStops:m,interpolationType:y}=u,S=0;for(;S<m.length&&m[S]<=c;)S++;S=Math.max(0,S-1);let I=S;for(;I<m.length&&m[I]<c+1;)I++;I=Math.min(m.length-1,I);let C=m[S],O=m[I];return u.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:O,interpolationType:y}:{kind:"camera",minZoom:C,maxZoom:O,minSize:u.evaluate(new Vn(C)),maxSize:u.evaluate(new Vn(O)),interpolationType:y}}}function TF(c,s,u){let m="never",y=c.get(s);return y?m=y:c.get(u)&&(m="always"),m}let o$e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sM(c,s,u,m,y,S,I,C,O,q,z,G,Y){let X=C?Math.min(Rp,Math.round(C[0])):0,Q=C?Math.min(Rp,Math.round(C[1])):0;c.emplaceBack(s,u,Math.round(32*m),Math.round(32*y),S,I,(X<<1)+(O?1:0),Q,16*q,16*z,256*G,256*Y)}function IF(c,s,u){c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u)}function a$e(c){for(let s of c.sections)if(WA(s.text))return!0;return!1}class AF{constructor(s){this.layoutVertexArray=new bt,this.indexArray=new qn,this.programConfigurations=s,this.segments=new Or,this.dynamicLayoutVertexArray=new st,this.opacityVertexArray=new Zt,this.hasVisibleVertices=!1,this.placedSymbolArray=new ee}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,u,m,y){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,L6e.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,D6e.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,o$e,!0),this.opacityVertexBuffer.itemSize=1),(m||y)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",AF);class MF{constructor(s,u,m){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new m,this.segments=new Or,this.collisionVertexArray=new hn}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,N6e.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",MF);class xy{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(I=>I.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=mQ(this.zoom,u["text-size"]),this.iconSizeData=mQ(this.zoom,u["icon-size"]);let m=this.layers[0].layout,y=m.get("symbol-sort-key"),S=m.get("symbol-z-order");this.canOverlap=TF(m,"text-overlap","text-allow-overlap")!=="never"||TF(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(I=>i.ao[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=s.sourceID}createArrays(){this.text=new AF(new rs(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new AF(new rs(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new fe,this.lineVertexArray=new ve,this.symbolInstances=new ue,this.textAnchorOffsets=new we}calculateGlyphDependencies(s,u,m,y,S){for(let I=0;I<s.length;I++)if(u[s.charCodeAt(I)]=!0,(m||y)&&S){let C=hw[s.charAt(I)];C&&(u[C.charCodeAt(0)]=!0)}}populate(s,u,m){let y=this.layers[0],S=y.layout,I=S.get("text-font"),C=S.get("text-field"),O=S.get("icon-image"),q=(C.value.kind!=="constant"||C.value.value instanceof ia&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),z=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,G=S.get("symbol-sort-key");if(this.features=[],!q&&!z)return;let Y=u.iconDependencies,X=u.glyphDependencies,Q=u.availableImages,re=new Vn(this.zoom,{globalState:this.globalState});for(let{feature:le,id:me,index:qe,sourceLayerIndex:Te}of s){let Ce=y._featureFilter.needGeometry,$e=Bu(le,Ce);if(!y._featureFilter.filter(re,$e,m))continue;let et,ht;if(Ce||($e.geometry=zc(le)),q){let xt=y.getValueAndResolveTokens("text-field",$e,m,Q),At=ia.factory(xt),Jt=this.hasRTLText=this.hasRTLText||a$e(At);(!Jt||dl.getRTLTextPluginStatus()==="unavailable"||Jt&&dl.isParsed())&&(et=q6e(At,y,$e))}if(z){let xt=y.getValueAndResolveTokens("icon-image",$e,m,Q);ht=xt instanceof es?xt:es.fromString(xt)}if(!et&&!ht)continue;let Rt=this.sortFeaturesByKey?G.evaluate($e,{},m):void 0;if(this.features.push({id:me,text:et,icon:ht,index:qe,sourceLayerIndex:Te,geometry:$e.geometry,properties:le.properties,type:vy.types[le.type],sortKey:Rt}),ht&&(Y[ht.name]=!0),et){let xt=I.evaluate($e,{},m).join(","),At=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.ao.vertical)>=0;for(let Jt of et.sections)if(Jt.image)Y[Jt.image.name]=!0;else{let Tt=ny(et.toString()),Mt=Jt.fontStack||xt,it=X[Mt]=X[Mt]||{};this.calculateGlyphDependencies(Jt.text,it,At,this.allowVerticalPlacement,Tt)}}}S.get("symbol-placement")==="line"&&(this.features=function(le){let me={},qe={},Te=[],Ce=0;function $e(xt){Te.push(le[xt]),Ce++}function et(xt,At,Jt){let Tt=qe[xt];return delete qe[xt],qe[At]=Tt,Te[Tt].geometry[0].pop(),Te[Tt].geometry[0]=Te[Tt].geometry[0].concat(Jt[0]),Tt}function ht(xt,At,Jt){let Tt=me[At];return delete me[At],me[xt]=Tt,Te[Tt].geometry[0].shift(),Te[Tt].geometry[0]=Jt[0].concat(Te[Tt].geometry[0]),Tt}function Rt(xt,At,Jt){let Tt=Jt?At[0][At[0].length-1]:At[0][0];return`${xt}:${Tt.x}:${Tt.y}`}for(let xt=0;xt<le.length;xt++){let At=le[xt],Jt=At.geometry,Tt=At.text?At.text.toString():null;if(!Tt){$e(xt);continue}let Mt=Rt(Tt,Jt),it=Rt(Tt,Jt,!0);if(Mt in qe&&it in me&&qe[Mt]!==me[it]){let fr=ht(Mt,it,Jt),yr=et(Mt,it,Te[fr].geometry);delete me[Mt],delete qe[it],qe[Rt(Tt,Te[yr].geometry,!0)]=yr,Te[fr].geometry=null}else Mt in qe?et(Mt,it,Jt):it in me?ht(Mt,it,Jt):($e(xt),me[Mt]=Ce-1,qe[it]=Ce-1)}return Te.filter(xt=>xt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,me)=>le.sortKey-me.sortKey)}update(s,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,u,this.layers,{imagePositions:m,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(s,u,this.layers,{imagePositions:m,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){let m=this.lineVertexArray.length;if(s.segment!==void 0){let y=s.dist(u[s.segment+1]),S=s.dist(u[s.segment]),I={};for(let C=s.segment+1;C<u.length;C++)I[C]={x:u[C].x,y:u[C].y,tileUnitDistanceFromAnchor:y},C<u.length-1&&(y+=u[C+1].dist(u[C]));for(let C=s.segment||0;C>=0;C--)I[C]={x:u[C].x,y:u[C].y,tileUnitDistanceFromAnchor:S},C>0&&(S+=u[C-1].dist(u[C]));for(let C=0;C<u.length;C++){let O=I[C];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,u,m,y,S,I,C,O,q,z,G,Y){let X=s.indexArray,Q=s.layoutVertexArray,re=s.segments.prepareSegment(4*u.length,Q,X,this.canOverlap?I.sortKey:void 0),le=this.glyphOffsetArray.length,me=re.vertexLength,qe=this.allowVerticalPlacement&&C===i.ao.vertical?Math.PI/2:0,Te=I.text&&I.text.sections;for(let Ce=0;Ce<u.length;Ce++){let{tl:$e,tr:et,bl:ht,br:Rt,tex:xt,pixelOffsetTL:At,pixelOffsetBR:Jt,minFontScaleX:Tt,minFontScaleY:Mt,glyphOffset:it,isSDF:fr,sectionIndex:yr}=u[Ce],nr=re.vertexLength,Yt=it[1];sM(Q,O.x,O.y,$e.x,Yt+$e.y,xt.x,xt.y,m,fr,At.x,At.y,Tt,Mt),sM(Q,O.x,O.y,et.x,Yt+et.y,xt.x+xt.w,xt.y,m,fr,Jt.x,At.y,Tt,Mt),sM(Q,O.x,O.y,ht.x,Yt+ht.y,xt.x,xt.y+xt.h,m,fr,At.x,Jt.y,Tt,Mt),sM(Q,O.x,O.y,Rt.x,Yt+Rt.y,xt.x+xt.w,xt.y+xt.h,m,fr,Jt.x,Jt.y,Tt,Mt),IF(s.dynamicLayoutVertexArray,O,qe),X.emplaceBack(nr,nr+2,nr+1),X.emplaceBack(nr+1,nr+2,nr+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(it[0]),Ce!==u.length-1&&yr===u[Ce+1].sectionIndex||s.programConfigurations.populatePaintArrays(Q.length,I,I.index,{imagePositions:{},canonical:Y,formattedSection:Te&&Te[yr],globalState:this.globalState})}s.placedSymbolArray.emplaceBack(O.x,O.y,le,this.glyphOffsetArray.length-le,me,q,z,O.segment,m?m[0]:0,m?m[1]:0,y[0],y[1],C,0,!1,0,G)}_addCollisionDebugVertex(s,u,m,y,S,I){return u.emplaceBack(0,0),s.emplaceBack(m.x,m.y,y,S,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(s,u,m,y,S,I,C){let O=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),q=O.vertexLength,z=S.layoutVertexArray,G=S.collisionVertexArray,Y=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(z,G,I,Y,X,new l(s,u)),this._addCollisionDebugVertex(z,G,I,Y,X,new l(m,u)),this._addCollisionDebugVertex(z,G,I,Y,X,new l(m,y)),this._addCollisionDebugVertex(z,G,I,Y,X,new l(s,y)),O.vertexLength+=4;let Q=S.indexArray;Q.emplaceBack(q,q+1),Q.emplaceBack(q+1,q+2),Q.emplaceBack(q+2,q+3),Q.emplaceBack(q+3,q),O.primitiveLength+=4}addDebugCollisionBoxes(s,u,m,y){for(let S=s;S<u;S++){let I=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,y?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new MF(Nr,rQ.members,Cn),this.iconCollisionBox=new MF(Nr,rQ.members,Cn);for(let s=0;s<this.symbolInstances.length;s++){let u=this.symbolInstances.get(s);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(s,u,m,y,S,I,C,O,q){let z={};for(let G=u;G<m;G++){let Y=s.get(G);z.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.textFeatureIndex=Y.featureIndex;break}for(let G=y;G<S;G++){let Y=s.get(G);z.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.verticalTextFeatureIndex=Y.featureIndex;break}for(let G=I;G<C;G++){let Y=s.get(G);z.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.iconFeatureIndex=Y.featureIndex;break}for(let G=O;G<q;G++){let Y=s.get(G);z.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.verticalIconFeatureIndex=Y.featureIndex;break}return z}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){let m=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,u){let m=s.placedSymbolArray.get(u),y=m.vertexStartIndex+4*m.numGlyphs;for(let S=m.vertexStartIndex;S<y;S+=4)s.indexArray.emplaceBack(S,S+2,S+1),s.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let u=Math.sin(s),m=Math.cos(s),y=[],S=[],I=[];for(let C=0;C<this.symbolInstances.length;++C){I.push(C);let O=this.symbolInstances.get(C);y.push(0|Math.round(u*O.anchorX+m*O.anchorY)),S.push(O.featureIndex)}return I.sort((C,O)=>y[C]-y[O]||S[O]-S[C]),I}addToSortKeyRanges(s,u){let m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===u?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let u of this.symbolInstanceIndexes){let m=this.symbolInstances.get(u);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((y,S,I)=>{y>=0&&I.indexOf(y)===S&&this.addIndicesForPlacedSymbol(this.text,y)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let gQ,vQ;Ut("SymbolBucket",xy,{omit:["layers","collisionBoxArray","features","compareText"]}),xy.MAX_GLYPHS=65535,xy.addDynamicAttributes=IF;var CF={get paint(){return vQ=vQ||new sa({"icon-opacity":new lr(xe.paint_symbol["icon-opacity"]),"icon-color":new lr(xe.paint_symbol["icon-color"]),"icon-halo-color":new lr(xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new lr(xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new lr(xe.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new lr(xe.paint_symbol["text-opacity"]),"text-color":new lr(xe.paint_symbol["text-color"],{runtimeType:_n,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new lr(xe.paint_symbol["text-halo-color"]),"text-halo-width":new lr(xe.paint_symbol["text-halo-width"]),"text-halo-blur":new lr(xe.paint_symbol["text-halo-blur"]),"text-translate":new Kt(xe.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(xe.paint_symbol["text-translate-anchor"])})},get layout(){return gQ=gQ||new sa({"symbol-placement":new Kt(xe.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new lr(xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kt(xe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kt(xe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kt(xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new lr(xe.layout_symbol["icon-size"]),"icon-text-fit":new Kt(xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kt(xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new lr(xe.layout_symbol["icon-image"]),"icon-rotate":new lr(xe.layout_symbol["icon-rotate"]),"icon-padding":new lr(xe.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(xe.layout_symbol["icon-keep-upright"]),"icon-offset":new lr(xe.layout_symbol["icon-offset"]),"icon-anchor":new lr(xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(xe.layout_symbol["text-rotation-alignment"]),"text-field":new lr(xe.layout_symbol["text-field"]),"text-font":new lr(xe.layout_symbol["text-font"]),"text-size":new lr(xe.layout_symbol["text-size"]),"text-max-width":new lr(xe.layout_symbol["text-max-width"]),"text-line-height":new Kt(xe.layout_symbol["text-line-height"]),"text-letter-spacing":new lr(xe.layout_symbol["text-letter-spacing"]),"text-justify":new lr(xe.layout_symbol["text-justify"]),"text-radial-offset":new lr(xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(xe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new lr(xe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new lr(xe.layout_symbol["text-anchor"]),"text-max-angle":new Kt(xe.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(xe.layout_symbol["text-writing-mode"]),"text-rotate":new lr(xe.layout_symbol["text-rotate"]),"text-padding":new Kt(xe.layout_symbol["text-padding"]),"text-keep-upright":new Kt(xe.layout_symbol["text-keep-upright"]),"text-transform":new lr(xe.layout_symbol["text-transform"]),"text-offset":new lr(xe.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(xe.layout_symbol["text-allow-overlap"]),"text-overlap":new Kt(xe.layout_symbol["text-overlap"]),"text-ignore-placement":new Kt(xe.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(xe.layout_symbol["text-optional"])})}};class yQ{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Ss,this.defaultValue=s}evaluate(s){if(s.formattedSection){let u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",yQ,{omit:["defaultValue"]});class lM extends Ms{constructor(s){super(s,CF)}recalculate(s,u){if(super.recalculate(s,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let m=this.layout.get("text-writing-mode");if(m){let y=[];for(let S of m)y.indexOf(S)<0&&y.push(S);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,u,m,y){let S=this.layout.get(s).evaluate(u,{},m,y),I=this._unevaluatedLayout._values[s];return I.isDataDriven()||Yv(I.value)||!S?S:function(C,O){return O.replace(/{([^{}]+)}/g,(q,z)=>C&&z in C?String(C[z]):"")}(u.properties,S)}createBucket(s){return new xy(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let s of CF.paint.overridableProperties){if(!lM.hasPaintOverride(this.layout,s))continue;let u=this.paint.get(s),m=new yQ(u),y=new Lb(m,u.property.specification),S=null;S=u.value.kind==="constant"||u.value.kind==="source"?new km("source",y):new Db("composite",y,u.value.zoomStops),this.paint._values[s]=new Gl(u.property,S,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,m){return!(!this.layout||u.isDataDriven()||m.isDataDriven())&&lM.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){let m=s.get("text-field"),y=CF.paint.properties[u],S=!1,I=C=>{for(let O of C)if(y.overrides&&y.overrides.hasOverride(O))return void(S=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ia)I(m.value.value.sections);else if(m.value.kind==="source"||m.value.kind==="composite"){let C=q=>{S||(q instanceof Fu&&cr(q.value)===Cc?I(q.value.sections):q instanceof Vf?I(q.sections):q.eachChild(C))},O=m.value;O._styleExpression&&C(O._styleExpression.expression)}return S}}let _Q;var s$e={get paint(){return _Q=_Q||new sa({"background-color":new Kt(xe.paint_background["background-color"]),"background-pattern":new Nc(xe.paint_background["background-pattern"]),"background-opacity":new Kt(xe.paint_background["background-opacity"])})}};class l$e extends Ms{constructor(s){super(s,s$e)}}let xQ;var u$e={get paint(){return xQ=xQ||new sa({"raster-opacity":new Kt(xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kt(xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(xe.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(xe.paint_raster["raster-saturation"]),"raster-contrast":new Kt(xe.paint_raster["raster-contrast"]),"raster-resampling":new Kt(xe.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(xe.paint_raster["raster-fade-duration"])})}};class c$e extends Ms{constructor(s){super(s,u$e)}}class f$e extends Ms{constructor(s){super(s,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class h$e{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let p$e={once:!0},PF=6371008.8;class Op{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Op(Ue(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){let u=Math.PI/180,m=this.lat*u,y=s.lat*u,S=Math.sin(m)*Math.sin(y)+Math.cos(m)*Math.cos(y)*Math.cos((s.lng-this.lng)*u);return PF*Math.acos(Math.min(S,1))}static convert(s){if(s instanceof Op)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Op(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Op(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let bQ=2*Math.PI*PF;function wQ(c){return bQ*Math.cos(c*Math.PI/180)}function EQ(c){return(180+c)/360}function SQ(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function TQ(c,s){return c/wQ(s)}function RF(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function IQ(c,s){return c*wQ(RF(s))}class dw{constructor(s,u,m=0){this.x=+s,this.y=+u,this.z=+m}static fromLngLat(s,u=0){let m=Op.convert(s);return new dw(EQ(m.lng),SQ(m.lat),TQ(u,m.lat))}toLngLat(){return new Op(360*this.x-180,RF(this.y))}toAltitude(){return IQ(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/bQ*(s=RF(this.y),1/Math.cos(s*Math.PI/180));var s}}function AQ(c,s,u){var m=2*Math.PI*6378137/256/Math.pow(2,u);return[c*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class OF{constructor(s,u,m){if(!function(y,S,I){return!(y<0||y>25||I<0||I>=Math.pow(2,y)||S<0||S>=Math.pow(2,y))}(s,u,m))throw new Error(`x=${u}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=u,this.y=m,this.key=by(0,s,s,u,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u,m){let y=(I=this.y,C=this.z,O=AQ(256*(S=this.x),256*(I=Math.pow(2,C)-I-1),C),q=AQ(256*(S+1),256*(I+1),C),O[0]+","+O[1]+","+q[0]+","+q[1]);var S,I,C,O,q;let z=function(G,Y,X){let Q,re="";for(let le=G;le>0;le--)Q=1<<le-1,re+=(Y&Q?1:0)+(X&Q?2:0);return re}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,y)}isChildOf(s){let u=this.z-s.z;return u>0&&s.x===this.x>>u&&s.y===this.y>>u}getTilePoint(s){let u=Math.pow(2,this.z);return new l((s.x*u-this.x)*Je,(s.y*u-this.y)*Je)}toString(){return`${this.z}/${this.x}/${this.y}`}}class MQ{constructor(s,u){this.wrap=s,this.canonical=u,this.key=by(s,u.z,u.z,u.x,u.y)}}class yl{constructor(s,u,m,y,S){if(this.terrainRttPosMatrix32f=null,s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=u,this.canonical=new OF(m,+y,+S),this.key=by(u,s,m,y,S)}clone(){return new yl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let u=this.canonical.z-s;return s>this.canonical.z?new yl(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new yl(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let m=this.canonical.z-s;return s>this.canonical.z?by(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y):by(this.wrap*+u,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap)return!1;let u=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new yl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let u=this.canonical.z+1,m=2*this.canonical.x,y=2*this.canonical.y;return[new yl(u,this.wrap,u,m,y),new yl(u,this.wrap,u,m+1,y),new yl(u,this.wrap,u,m,y+1),new yl(u,this.wrap,u,m+1,y+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new yl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new yl(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new MQ(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new dw(s.x-this.wrap,s.y))}}function by(c,s,u,m,y){(c*=2)<0&&(c=-1*c-1);let S=1<<u;return(S*S*c+S*y+m).toString(36)+u.toString(36)+s.toString(36)}function mw(c,s){return s?c.properties[s]:c.id}Ut("CanonicalTileID",OF),Ut("OverscaledTileID",yl,{omit:["terrainRttPosMatrix32f"]});class Ym{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(s){return this.minX=Math.min(this.minX,s.x),this.minY=Math.min(this.minY,s.y),this.maxX=Math.max(this.maxX,s.x),this.maxY=Math.max(this.maxY,s.y),this}expandBy(s){return this.minX-=s,this.minY-=s,this.maxX+=s,this.maxY+=s,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(s){return this.expandBy(-s)}map(s){let u=new Ym;return u.extend(s(new l(this.minX,this.minY))),u.extend(s(new l(this.maxX,this.minY))),u.extend(s(new l(this.minX,this.maxY))),u.extend(s(new l(this.maxX,this.maxY))),u}static fromPoints(s){let u=new Ym;for(let m of s)u.extend(m);return u}contains(s){return s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(s){return!this.empty()&&!s.empty()&&s.minX>=this.minX&&s.maxX<=this.maxX&&s.minY>=this.minY&&s.maxY<=this.maxY}intersects(s){return!this.empty()&&!s.empty()&&s.minX<=this.maxX&&s.maxX>=this.minX&&s.minY<=this.maxY&&s.maxY>=this.minY}}class CQ{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){let m=s[u];this._stringToNumber[m]=u,this._numberToString[u]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class PQ{constructor(s,u,m,y,S){this.type="Feature",this._vectorTileFeature=s,s._z=u,s._x=m,s._y=y,this.properties=s.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){let s={geometry:this.geometry};for(let u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(s[u]=this[u]);return s}}class RQ{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Vm(Je,16,0),this.grid3D=new Vm(Je,16,0),this.featureIndexArray=new Pe,this.promoteId=u}insert(s,u,m,y,S,I){let C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,y,S);let O=I?this.grid3D:this.grid;for(let q=0;q<u.length;q++){let z=u[q],G=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<z.length;Y++){let X=z[Y];G[0]=Math.min(G[0],X.x),G[1]=Math.min(G[1],X.y),G[2]=Math.max(G[2],X.x),G[3]=Math.max(G[3],X.y)}G[0]<Je&&G[1]<Je&&G[2]>=0&&G[3]>=0&&O.insert(C,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new WX(new bF(this.rawTileData)).layers,this.sourceLayerCoder=new CQ(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,u,m,y){this.loadVTLayers();let S=s.params,I=Je/s.tileSize/s.scale,C=Yf(S.filter),O=s.queryGeometry,q=s.queryPadding*I,z=Ym.fromPoints(O),G=this.grid.query(z.minX-q,z.minY-q,z.maxX+q,z.maxY+q),Y=Ym.fromPoints(s.cameraQueryGeometry).expandBy(q),X=this.grid3D.query(Y.minX,Y.minY,Y.maxX,Y.maxY,(le,me,qe,Te)=>function(Ce,$e,et,ht,Rt){for(let At of Ce)if($e<=At.x&&et<=At.y&&ht>=At.x&&Rt>=At.y)return!0;let xt=[new l($e,et),new l($e,Rt),new l(ht,Rt),new l(ht,et)];if(Ce.length>2){for(let At of xt)if(py(Ce,At))return!0}for(let At=0;At<Ce.length-1;At++)if($Ge(Ce[At],Ce[At+1],xt))return!0;return!1}(s.cameraQueryGeometry,le-q,me-q,qe+q,Te+q));for(let le of X)G.push(le);G.sort(d$e);let Q={},re;for(let le=0;le<G.length;le++){let me=G[le];if(me===re)continue;re=me;let qe=this.featureIndexArray.get(me),Te=null;this.loadMatchingFeature(Q,qe.bucketIndex,qe.sourceLayerIndex,qe.featureIndex,C,S.layers,S.availableImages,u,m,y,(Ce,$e,et)=>(Te||(Te=zc(Ce)),$e.queryIntersectsFeature({queryGeometry:O,feature:Ce,featureState:et,geometry:Te,zoom:this.z,transform:s.transform,pixelsToTileUnits:I,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return Q}loadMatchingFeature(s,u,m,y,S,I,C,O,q,z,G){let Y=this.bucketLayerIDs[u];if(I&&!Y.some(le=>I.has(le)))return;let X=this.sourceLayerCoder.decode(m),Q=this.vtLayers[X].feature(y);if(S.needGeometry){let le=Bu(Q,!0);if(!S.filter(new Vn(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!S.filter(new Vn(this.tileID.overscaledZ),Q))return;let re=this.getId(Q,X);for(let le=0;le<Y.length;le++){let me=Y[le];if(I&&!I.has(me))continue;let qe=O[me];if(!qe)continue;let Te={};re&&z&&(Te=z.getState(qe.sourceLayer||"_geojsonTileLayer",re));let Ce=nt({},q[me]);Ce.paint=OQ(Ce.paint,qe.paint,Q,Te,C),Ce.layout=OQ(Ce.layout,qe.layout,Q,Te,C);let $e=!G||G(Q,qe,Te);if(!$e)continue;let et=new PQ(Q,this.z,this.x,this.y,re);et.layer=Ce;let ht=s[me];ht===void 0&&(ht=s[me]=[]),ht.push({featureIndex:y,feature:et,intersectionZ:$e})}}lookupSymbolFeatures(s,u,m,y,S,I,C,O){let q={};this.loadVTLayers();let z=Yf(S);for(let G of s)this.loadMatchingFeature(q,m,y,G,z,I,C,O,u);return q}hasLayer(s){for(let u of this.bucketLayerIDs)for(let m of u)if(s===m)return!0;return!1}getId(s,u){var m;let y=s.id;return this.promoteId&&(y=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof y=="boolean"&&(y=Number(y)),y===void 0&&!((m=s.properties)===null||m===void 0)&&m.cluster&&this.promoteId&&(y=Number(s.properties.cluster_id))),y}}function OQ(c,s,u,m,y){return rt(c,(S,I)=>{let C=s instanceof oy?s.get(I):null;return C&&C.evaluate?C.evaluate(u,m,y):C})}function d$e(c,s){return s-c}function LQ(c,s,u,m,y){let S=[];for(let I=0;I<c.length;I++){let C=c[I],O;for(let q=0;q<C.length-1;q++){let z=C[q],G=C[q+1];z.x<s&&G.x<s||(z.x<s?z=new l(s,z.y+(s-z.x)/(G.x-z.x)*(G.y-z.y))._round():G.x<s&&(G=new l(s,z.y+(s-z.x)/(G.x-z.x)*(G.y-z.y))._round()),z.y<u&&G.y<u||(z.y<u?z=new l(z.x+(u-z.y)/(G.y-z.y)*(G.x-z.x),u)._round():G.y<u&&(G=new l(z.x+(u-z.y)/(G.y-z.y)*(G.x-z.x),u)._round()),z.x>=m&&G.x>=m||(z.x>=m?z=new l(m,z.y+(m-z.x)/(G.x-z.x)*(G.y-z.y))._round():G.x>=m&&(G=new l(m,z.y+(m-z.x)/(G.x-z.x)*(G.y-z.y))._round()),z.y>=y&&G.y>=y||(z.y>=y?z=new l(z.x+(y-z.y)/(G.y-z.y)*(G.x-z.x),y)._round():G.y>=y&&(G=new l(z.x+(y-z.y)/(G.y-z.y)*(G.x-z.x),y)._round()),O&&z.equals(O[O.length-1])||(O=[z],S.push(O)),O.push(G)))))}}return S}Ut("FeatureIndex",RQ,{omit:["rawTileData","sourceLayerCoder"]});class Lp extends l{constructor(s,u,m,y){super(s,u),this.angle=m,y!==void 0&&(this.segment=y)}clone(){return new Lp(this.x,this.y,this.angle,this.segment)}}function DQ(c,s,u,m,y){if(s.segment===void 0||u===0)return!0;let S=s,I=s.segment+1,C=0;for(;C>-u/2;){if(I--,I<0)return!1;C-=c[I].dist(S),S=c[I]}C+=c[I].dist(c[I+1]),I++;let O=[],q=0;for(;C<u/2;){let z=c[I],G=c[I+1];if(!G)return!1;let Y=c[I-1].angleTo(z)-z.angleTo(G);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:C,angleDelta:Y}),q+=Y;C-O[0].distance>m;)q-=O.shift().angleDelta;if(q>y)return!1;I++,C+=z.dist(G)}return!0}function NQ(c){let s=0;for(let u=0;u<c.length-1;u++)s+=c[u].dist(c[u+1]);return s}function kQ(c,s,u){return c?.6*s*u:0}function qQ(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function m$e(c,s,u,m,y,S){let I=kQ(u,y,S),C=qQ(u,m)*S,O=0,q=NQ(c)/2;for(let z=0;z<c.length-1;z++){let G=c[z],Y=c[z+1],X=G.dist(Y);if(O+X>q){let Q=(q-O)/X,re=Bl.number(G.x,Y.x,Q),le=Bl.number(G.y,Y.y,Q),me=new Lp(re,le,Y.angleTo(G),z);return me._round(),!I||DQ(c,me,C,I,s)?me:void 0}O+=X}}function g$e(c,s,u,m,y,S,I,C,O){let q=kQ(m,S,I),z=qQ(m,y),G=z*I,Y=c[0].x===0||c[0].x===O||c[0].y===0||c[0].y===O;return s-G<s/4&&(s=G+s/4),FQ(c,Y?s/2*C%s:(z/2+2*S)*I*C%s,s,q,u,G,Y,!1,O)}function FQ(c,s,u,m,y,S,I,C,O){let q=S/2,z=NQ(c),G=0,Y=s-u,X=[];for(let Q=0;Q<c.length-1;Q++){let re=c[Q],le=c[Q+1],me=re.dist(le),qe=le.angleTo(re);for(;Y+u<G+me;){Y+=u;let Te=(Y-G)/me,Ce=Bl.number(re.x,le.x,Te),$e=Bl.number(re.y,le.y,Te);if(Ce>=0&&Ce<O&&$e>=0&&$e<O&&Y-q>=0&&Y+q<=z){let et=new Lp(Ce,$e,qe,Q);et._round(),m&&!DQ(c,et,S,m,y)||X.push(et)}}G+=me}return C||X.length||I||(X=FQ(c,G/2,u,m,y,S,I,!0,O)),X}function jQ(c,s,u,m){let y=[],S=c.image,I=S.pixelRatio,C=S.paddedRect.w-2,O=S.paddedRect.h-2,q={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom},z=S.stretchX||[[0,C]],G=S.stretchY||[[0,O]],Y=(it,fr)=>it+fr[1]-fr[0],X=z.reduce(Y,0),Q=G.reduce(Y,0),re=C-X,le=O-Q,me=0,qe=X,Te=0,Ce=Q,$e=0,et=re,ht=0,Rt=le;if(S.content&&m){let it=S.content,fr=it[2]-it[0],yr=it[3]-it[1];(S.textFitWidth||S.textFitHeight)&&(q=pQ(c)),me=uM(z,0,it[0]),Te=uM(G,0,it[1]),qe=uM(z,it[0],it[2]),Ce=uM(G,it[1],it[3]),$e=it[0]-me,ht=it[1]-Te,et=fr-qe,Rt=yr-Ce}let xt=q.x1,At=q.y1,Jt=q.x2-xt,Tt=q.y2-At,Mt=(it,fr,yr,nr)=>{let Yt=cM(it.stretch-me,qe,Jt,xt),en=fM(it.fixed-$e,et,it.stretch,X),wi=cM(fr.stretch-Te,Ce,Tt,At),no=fM(fr.fixed-ht,Rt,fr.stretch,Q),Wo=cM(yr.stretch-me,qe,Jt,xt),_l=fM(yr.fixed-$e,et,yr.stretch,X),is=cM(nr.stretch-Te,Ce,Tt,At),Co=fM(nr.fixed-ht,Rt,nr.stretch,Q),ui=new l(Yt,wi),mo=new l(Wo,wi),Po=new l(Wo,is),Ro=new l(Yt,is),Ra=new l(en/I,no/I),xl=new l(_l/I,Co/I),go=s*Math.PI/180;if(go){let vo=Math.sin(go),yo=Math.cos(go),Zi=[yo,-vo,vo,yo];ui._matMult(Zi),mo._matMult(Zi),Ro._matMult(Zi),Po._matMult(Zi)}let os=it.stretch+it.fixed,io=fr.stretch+fr.fixed;return{tl:ui,tr:mo,bl:Ro,br:Po,tex:{x:S.paddedRect.x+1+os,y:S.paddedRect.y+1+io,w:yr.stretch+yr.fixed-os,h:nr.stretch+nr.fixed-io},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ra,pixelOffsetBR:xl,minFontScaleX:et/I/Jt,minFontScaleY:Rt/I/Tt,isSDF:u}};if(m&&(S.stretchX||S.stretchY)){let it=zQ(z,re,X),fr=zQ(G,le,Q);for(let yr=0;yr<it.length-1;yr++){let nr=it[yr],Yt=it[yr+1];for(let en=0;en<fr.length-1;en++)y.push(Mt(nr,fr[en],Yt,fr[en+1]))}}else y.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:O+1}));return y}function uM(c,s,u){let m=0;for(let y of c)m+=Math.max(s,Math.min(u,y[1]))-Math.max(s,Math.min(u,y[0]));return m}function zQ(c,s,u){let m=[{fixed:-1,stretch:0}];for(let[y,S]of c){let I=m[m.length-1];m.push({fixed:y-I.stretch,stretch:I.stretch}),m.push({fixed:y-I.stretch,stretch:I.stretch+(S-y)})}return m.push({fixed:s+1,stretch:u}),m}function cM(c,s,u,m){return c/s*u+m}function fM(c,s,u,m){return c-s*u/m}Ut("Anchor",Lp);class hM{constructor(s,u,m,y,S,I,C,O,q,z){var G;if(this.boxStartIndex=s.length,q){let Y=I.top,X=I.bottom,Q=I.collisionPadding;Q&&(Y-=Q[1],X+=Q[3]);let re=X-Y;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let Y=!((G=I.image)===null||G===void 0)&&G.content&&(I.image.textFitWidth||I.image.textFitHeight)?pQ(I):{x1:I.left,y1:I.top,x2:I.right,y2:I.bottom};Y.y1=Y.y1*C-O[0],Y.y2=Y.y2*C+O[2],Y.x1=Y.x1*C-O[3],Y.x2=Y.x2*C+O[1];let X=I.collisionPadding;if(X&&(Y.x1-=X[0]*C,Y.y1-=X[1]*C,Y.x2+=X[2]*C,Y.y2+=X[3]*C),z){let Q=new l(Y.x1,Y.y1),re=new l(Y.x2,Y.y1),le=new l(Y.x1,Y.y2),me=new l(Y.x2,Y.y2),qe=z*Math.PI/180;Q._rotate(qe),re._rotate(qe),le._rotate(qe),me._rotate(qe),Y.x1=Math.min(Q.x,re.x,le.x,me.x),Y.x2=Math.max(Q.x,re.x,le.x,me.x),Y.y1=Math.min(Q.y,re.y,le.y,me.y),Y.y2=Math.max(Q.y,re.y,le.y,me.y)}s.emplaceBack(u.x,u.y,Y.x1,Y.y1,Y.x2,Y.y2,m,y,S)}this.boxEndIndex=s.length}}class v$e{constructor(s=[],u=(m,y)=>m<y?-1:m>y?1:0){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:u,compare:m}=this,y=u[s];for(;s>0;){let S=s-1>>1,I=u[S];if(m(y,I)>=0)break;u[s]=I,s=S}u[s]=y}_down(s){let{data:u,compare:m}=this,y=this.length>>1,S=u[s];for(;s<y;){let I=1+(s<<1),C=I+1;if(C<this.length&&m(u[C],u[I])<0&&(I=C),m(u[I],S)>=0)break;u[s]=u[I],s=I}u[s]=S}}function y$e(c,s=1,u=!1){let m=Ym.fromPoints(c[0]),y=Math.min(m.width(),m.height()),S=y/2,I=new v$e([],_$e),{minX:C,minY:O,maxX:q,maxY:z}=m;if(y===0)return new l(C,O);for(let X=C;X<q;X+=y)for(let Q=O;Q<z;Q+=y)I.push(new wy(X+S,Q+S,S,c));let G=function(X){let Q=0,re=0,le=0,me=X[0];for(let qe=0,Te=me.length,Ce=Te-1;qe<Te;Ce=qe++){let $e=me[qe],et=me[Ce],ht=$e.x*et.y-et.x*$e.y;re+=($e.x+et.x)*ht,le+=($e.y+et.y)*ht,Q+=3*ht}return new wy(re/Q,le/Q,0,X)}(c),Y=I.length;for(;I.length;){let X=I.pop();(X.d>G.d||!G.d)&&(G=X,u&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,Y)),X.max-G.d<=s||(S=X.h/2,I.push(new wy(X.p.x-S,X.p.y-S,S,c)),I.push(new wy(X.p.x+S,X.p.y-S,S,c)),I.push(new wy(X.p.x-S,X.p.y+S,S,c)),I.push(new wy(X.p.x+S,X.p.y+S,S,c)),Y+=4)}return u&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${G.d}`)),G.p}function _$e(c,s){return s.max-c.max}function wy(c,s,u,m){this.p=new l(c,s),this.h=u,this.d=function(y,S){let I=!1,C=1/0;for(let O=0;O<S.length;O++){let q=S[O];for(let z=0,G=q.length,Y=G-1;z<G;Y=z++){let X=q[z],Q=q[Y];X.y>y.y!=Q.y>y.y&&y.x<(Q.x-X.x)*(y.y-X.y)/(Q.y-X.y)+X.x&&(I=!I),C=Math.min(C,SX(y,X,Q))}}return(I?1:-1)*Math.sqrt(C)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Ho;i.aE=void 0,(Ho=i.aE||(i.aE={}))[Ho.center=1]="center",Ho[Ho.left=2]="left",Ho[Ho.right=3]="right",Ho[Ho.top=4]="top",Ho[Ho.bottom=5]="bottom",Ho[Ho["top-left"]=6]="top-left",Ho[Ho["top-right"]=7]="top-right",Ho[Ho["bottom-left"]=8]="bottom-left",Ho[Ho["bottom-right"]=9]="bottom-right";let LF=Number.POSITIVE_INFINITY;function UQ(c,s){return s[1]!==LF?function(u,m,y){let S=0,I=0;switch(m=Math.abs(m),y=Math.abs(y),u){case"top-right":case"top-left":case"top":I=y-7;break;case"bottom-right":case"bottom-left":case"bottom":I=7-y}switch(u){case"top-right":case"bottom-right":case"right":S=-m;break;case"top-left":case"bottom-left":case"left":S=m}return[S,I]}(c,s[0],s[1]):function(u,m){let y=0,S=0;m<0&&(m=0);let I=m/Math.SQRT2;switch(u){case"top-right":case"top-left":S=I-7;break;case"bottom-right":case"bottom-left":S=7-I;break;case"bottom":S=7-m;break;case"top":S=m-7}switch(u){case"top-right":case"bottom-right":y=-I;break;case"top-left":case"bottom-left":y=I;break;case"left":y=m;break;case"right":y=-m}return[y,S]}(c,s[0])}function BQ(c,s,u){var m;let y=c.layout,S=(m=y.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(s,{},u);if(S){let C=S.values,O=[];for(let q=0;q<C.length;q+=2){let z=O[q]=C[q],G=C[q+1].map(Y=>Y*po);z.startsWith("top")?G[1]-=7:z.startsWith("bottom")&&(G[1]+=7),O[q+1]=G}return new aa(O)}let I=y.get("text-variable-anchor");if(I){let C;C=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(s,{},u)*po,LF]:y.get("text-offset").evaluate(s,{},u).map(q=>q*po);let O=[];for(let q of I)O.push(q,UQ(q,C));return new aa(O)}return null}function DF(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function x$e(c,s,u,m,y,S,I,C,O,q,z,G){let Y=S.textMaxSize.evaluate(s,{});Y===void 0&&(Y=I);let X=c.layers[0].layout,Q=X.get("icon-offset").evaluate(s,{},z),re=GQ(u.horizontal),le=I/24,me=c.tilePixelRatio*le,qe=c.tilePixelRatio*Y/24,Te=c.tilePixelRatio*C,Ce=c.tilePixelRatio*X.get("symbol-spacing"),$e=X.get("text-padding")*c.tilePixelRatio,et=function(yr,nr,Yt,en=1){let wi=yr.get("icon-padding").evaluate(nr,{},Yt),no=wi&&wi.values;return[no[0]*en,no[1]*en,no[2]*en,no[3]*en]}(X,s,z,c.tilePixelRatio),ht=X.get("text-max-angle")/180*Math.PI,Rt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",xt=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",At=X.get("symbol-placement"),Jt=Ce/2,Tt=X.get("icon-text-fit"),Mt;m&&Tt!=="none"&&(c.allowVerticalPlacement&&u.vertical&&(Mt=dQ(m,u.vertical,Tt,X.get("icon-text-fit-padding"),Q,le)),re&&(m=dQ(m,re,Tt,X.get("icon-text-fit-padding"),Q,le)));let it=z?G.line.getGranularityForZoomLevel(z.z):1,fr=(yr,nr)=>{nr.x<0||nr.x>=Je||nr.y<0||nr.y>=Je||function(Yt,en,wi,no,Wo,_l,is,Co,ui,mo,Po,Ro,Ra,xl,go,os,io,vo,yo,Zi,ei,Vu,Ey,Gu,E$e){let Sy=Yt.addToLineVertexArray(en,wi),Km,Ty,Iy,Ay,ZQ=0,YQ=0,KQ=0,XQ=0,BF=-1,VF=-1,ih={},QQ=Mp("");if(Yt.allowVerticalPlacement&&no.vertical){let ca=Co.layout.get("text-rotate").evaluate(ei,{},Gu)+90;Iy=new hM(ui,en,mo,Po,Ro,no.vertical,Ra,xl,go,ca),is&&(Ay=new hM(ui,en,mo,Po,Ro,is,io,vo,go,ca))}if(Wo){let ca=Co.layout.get("icon-rotate").evaluate(ei,{}),bl=Co.layout.get("icon-text-fit")!=="none",Xm=jQ(Wo,ca,Ey,bl),Hu=is?jQ(is,ca,Ey,bl):void 0;Ty=new hM(ui,en,mo,Po,Ro,Wo,io,vo,!1,ca),ZQ=4*Xm.length;let Qm=Yt.iconSizeData,Uc=null;Qm.kind==="source"?(Uc=[nh*Co.layout.get("icon-size").evaluate(ei,{})],Uc[0]>Rp&&zt(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Qm.kind==="composite"&&(Uc=[nh*Vu.compositeIconSizes[0].evaluate(ei,{},Gu),nh*Vu.compositeIconSizes[1].evaluate(ei,{},Gu)],(Uc[0]>Rp||Uc[1]>Rp)&&zt(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Yt.addSymbols(Yt.icon,Xm,Uc,Zi,yo,ei,i.ao.none,en,Sy.lineStartIndex,Sy.lineLength,-1,Gu),BF=Yt.icon.placedSymbolArray.length-1,Hu&&(YQ=4*Hu.length,Yt.addSymbols(Yt.icon,Hu,Uc,Zi,yo,ei,i.ao.vertical,en,Sy.lineStartIndex,Sy.lineLength,-1,Gu),VF=Yt.icon.placedSymbolArray.length-1)}let JQ=Object.keys(no.horizontal);for(let ca of JQ){let bl=no.horizontal[ca];if(!Km){QQ=Mp(bl.text);let Hu=Co.layout.get("text-rotate").evaluate(ei,{},Gu);Km=new hM(ui,en,mo,Po,Ro,bl,Ra,xl,go,Hu)}let Xm=bl.positionedLines.length===1;if(KQ+=VQ(Yt,en,bl,_l,Co,go,ei,os,Sy,no.vertical?i.ao.horizontal:i.ao.horizontalOnly,Xm?JQ:[ca],ih,BF,Vu,Gu),Xm)break}no.vertical&&(XQ+=VQ(Yt,en,no.vertical,_l,Co,go,ei,os,Sy,i.ao.vertical,["vertical"],ih,VF,Vu,Gu));let S$e=Km?Km.boxStartIndex:Yt.collisionBoxArray.length,T$e=Km?Km.boxEndIndex:Yt.collisionBoxArray.length,I$e=Iy?Iy.boxStartIndex:Yt.collisionBoxArray.length,A$e=Iy?Iy.boxEndIndex:Yt.collisionBoxArray.length,M$e=Ty?Ty.boxStartIndex:Yt.collisionBoxArray.length,C$e=Ty?Ty.boxEndIndex:Yt.collisionBoxArray.length,P$e=Ay?Ay.boxStartIndex:Yt.collisionBoxArray.length,R$e=Ay?Ay.boxEndIndex:Yt.collisionBoxArray.length,$u=-1,dM=(ca,bl)=>ca&&ca.circleDiameter?Math.max(ca.circleDiameter,bl):bl;$u=dM(Km,$u),$u=dM(Iy,$u),$u=dM(Ty,$u),$u=dM(Ay,$u);let eJ=$u>-1?1:0;eJ&&($u*=E$e/po),Yt.glyphOffsetArray.length>=xy.MAX_GLYPHS&&zt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ei.sortKey!==void 0&&Yt.addToSortKeyRanges(Yt.symbolInstances.length,ei.sortKey);let O$e=BQ(Co,ei,Gu),[L$e,D$e]=function(ca,bl){let Xm=ca.length,Hu=bl==null?void 0:bl.values;if((Hu==null?void 0:Hu.length)>0)for(let Qm=0;Qm<Hu.length;Qm+=2){let Uc=Hu[Qm+1];ca.emplaceBack(i.aE[Hu[Qm]],Uc[0],Uc[1])}return[Xm,ca.length]}(Yt.textAnchorOffsets,O$e);Yt.symbolInstances.emplaceBack(en.x,en.y,ih.right>=0?ih.right:-1,ih.center>=0?ih.center:-1,ih.left>=0?ih.left:-1,ih.vertical||-1,BF,VF,QQ,S$e,T$e,I$e,A$e,M$e,C$e,P$e,R$e,mo,KQ,XQ,ZQ,YQ,eJ,0,Ra,$u,L$e,D$e)}(c,nr,yr,u,m,y,Mt,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,me,[$e,$e,$e,$e],Rt,O,Te,et,xt,Q,s,S,q,z,I)};if(At==="line")for(let yr of LQ(s.geometry,0,0,Je,Je)){let nr=Zm(yr,it),Yt=g$e(nr,Ce,ht,u.vertical||re,m,24,qe,c.overscaling,Je);for(let en of Yt)re&&b$e(c,re.text,Jt,en)||fr(nr,en)}else if(At==="line-center"){for(let yr of s.geometry)if(yr.length>1){let nr=Zm(yr,it),Yt=m$e(nr,ht,u.vertical||re,m,24,qe);Yt&&fr(nr,Yt)}}else if(s.type==="Polygon")for(let yr of Rm(s.geometry,0)){let nr=y$e(yr,16);fr(Zm(yr[0],it,!0),new Lp(nr.x,nr.y,0))}else if(s.type==="LineString")for(let yr of s.geometry){let nr=Zm(yr,it);fr(nr,new Lp(nr[0].x,nr[0].y,0))}else if(s.type==="Point")for(let yr of s.geometry)for(let nr of yr)fr([nr],new Lp(nr.x,nr.y,0))}function VQ(c,s,u,m,y,S,I,C,O,q,z,G,Y,X,Q){let re=function(qe,Te,Ce,$e,et,ht,Rt,xt){let At=$e.layout.get("text-rotate").evaluate(ht,{})*Math.PI/180,Jt=[];for(let Tt of Te.positionedLines)for(let Mt of Tt.positionedGlyphs){if(!Mt.rect)continue;let it=Mt.rect||{},fr=4,yr=!0,nr=1,Yt=0,en=(et||xt)&&Mt.vertical,wi=Mt.metrics.advance*Mt.scale/2;if(xt&&Te.verticalizable&&(Yt=Tt.lineOffset/2-(Mt.imageName?-(po-Mt.metrics.width*Mt.scale)/2:(Mt.scale-1)*po)),Mt.imageName){let vo=Rt[Mt.imageName];yr=vo.sdf,nr=vo.pixelRatio,fr=1/nr}let no=et?[Mt.x+wi,Mt.y]:[0,0],Wo=et?[0,0]:[Mt.x+wi+Ce[0],Mt.y+Ce[1]-Yt],_l=[0,0];en&&(_l=Wo,Wo=[0,0]);let is=Mt.metrics.isDoubleResolution?2:1,Co=(Mt.metrics.left-fr)*Mt.scale-wi+Wo[0],ui=(-Mt.metrics.top-fr)*Mt.scale+Wo[1],mo=Co+it.w/is*Mt.scale/nr,Po=ui+it.h/is*Mt.scale/nr,Ro=new l(Co,ui),Ra=new l(mo,ui),xl=new l(Co,Po),go=new l(mo,Po);if(en){let vo=new l(-wi,wi- -17),yo=-Math.PI/2,Zi=12-wi,ei=new l(22-Zi,-(Mt.imageName?Zi:0)),Vu=new l(..._l);Ro._rotateAround(yo,vo)._add(ei)._add(Vu),Ra._rotateAround(yo,vo)._add(ei)._add(Vu),xl._rotateAround(yo,vo)._add(ei)._add(Vu),go._rotateAround(yo,vo)._add(ei)._add(Vu)}if(At){let vo=Math.sin(At),yo=Math.cos(At),Zi=[yo,-vo,vo,yo];Ro._matMult(Zi),Ra._matMult(Zi),xl._matMult(Zi),go._matMult(Zi)}let os=new l(0,0),io=new l(0,0);Jt.push({tl:Ro,tr:Ra,bl:xl,br:go,tex:it,writingMode:Te.writingMode,glyphOffset:no,sectionIndex:Mt.sectionIndex,isSDF:yr,pixelOffsetTL:os,pixelOffsetBR:io,minFontScaleX:0,minFontScaleY:0})}return Jt}(0,u,C,y,S,I,m,c.allowVerticalPlacement),le=c.textSizeData,me=null;le.kind==="source"?(me=[nh*y.layout.get("text-size").evaluate(I,{})],me[0]>Rp&&zt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):le.kind==="composite"&&(me=[nh*X.compositeTextSizes[0].evaluate(I,{},Q),nh*X.compositeTextSizes[1].evaluate(I,{},Q)],(me[0]>Rp||me[1]>Rp)&&zt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,re,me,C,S,I,q,s,O.lineStartIndex,O.lineLength,Y,Q);for(let qe of z)G[qe]=c.text.placedSymbolArray.length-1;return 4*re.length}function GQ(c){for(let s in c)return c[s];return null}function b$e(c,s,u,m){let y=c.compareText;if(s in y){let S=y[s];for(let I=S.length-1;I>=0;I--)if(m.dist(S[I])<u)return!0}else y[s]=[];return y[s].push(m),!1}let $Q=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class NF{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[u,m]=new Uint8Array(s,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");let y=m>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);let S=$Q[15&m];if(!S)throw new Error("Unrecognized array type.");let[I]=new Uint16Array(s,2,1),[C]=new Uint32Array(s,4,1);return new NF(C,I,S,s)}constructor(s,u=64,m=Float64Array,y){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=m,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;let S=$Q.indexOf(this.ArrayType),I=2*s*this.ArrayType.BYTES_PER_ELEMENT,C=s*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-C%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${m}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+O,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+I+C+O),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+O,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){let m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=s,this.coords[this._pos++]=u,m}finish(){let s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return kF(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,m,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:S,coords:I,nodeSize:C}=this,O=[0,S.length-1,0],q=[];for(;O.length;){let z=O.pop()||0,G=O.pop()||0,Y=O.pop()||0;if(G-Y<=C){for(let le=Y;le<=G;le++){let me=I[2*le],qe=I[2*le+1];me>=s&&me<=m&&qe>=u&&qe<=y&&q.push(S[le])}continue}let X=Y+G>>1,Q=I[2*X],re=I[2*X+1];Q>=s&&Q<=m&&re>=u&&re<=y&&q.push(S[X]),(z===0?s<=Q:u<=re)&&(O.push(Y),O.push(X-1),O.push(1-z)),(z===0?m>=Q:y>=re)&&(O.push(X+1),O.push(G),O.push(1-z))}return q}within(s,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:y,coords:S,nodeSize:I}=this,C=[0,y.length-1,0],O=[],q=m*m;for(;C.length;){let z=C.pop()||0,G=C.pop()||0,Y=C.pop()||0;if(G-Y<=I){for(let le=Y;le<=G;le++)WQ(S[2*le],S[2*le+1],s,u)<=q&&O.push(y[le]);continue}let X=Y+G>>1,Q=S[2*X],re=S[2*X+1];WQ(Q,re,s,u)<=q&&O.push(y[X]),(z===0?s-m<=Q:u-m<=re)&&(C.push(Y),C.push(X-1),C.push(1-z)),(z===0?s+m>=Q:u+m>=re)&&(C.push(X+1),C.push(G),C.push(1-z))}return O}}function kF(c,s,u,m,y,S){if(y-m<=u)return;let I=m+y>>1;HQ(c,s,I,m,y,S),kF(c,s,u,m,I-1,1-S),kF(c,s,u,I+1,y,1-S)}function HQ(c,s,u,m,y,S){for(;y>m;){if(y-m>600){let q=y-m+1,z=u-m+1,G=Math.log(q),Y=.5*Math.exp(2*G/3),X=.5*Math.sqrt(G*Y*(q-Y)/q)*(z-q/2<0?-1:1);HQ(c,s,u,Math.max(m,Math.floor(u-z*Y/q+X)),Math.min(y,Math.floor(u+(q-z)*Y/q+X)),S)}let I=s[2*u+S],C=m,O=y;for(gw(c,s,m,u),s[2*y+S]>I&&gw(c,s,m,y);C<O;){for(gw(c,s,C,O),C++,O--;s[2*C+S]<I;)C++;for(;s[2*O+S]>I;)O--}s[2*m+S]===I?gw(c,s,m,O):(O++,gw(c,s,O,y)),O<=u&&(m=O+1),u<=O&&(y=O-1)}}function gw(c,s,u,m){qF(c,u,m),qF(s,2*u,2*m),qF(s,2*u+1,2*m+1)}function qF(c,s,u){let m=c[s];c[s]=c[u],c[u]=m}function WQ(c,s,u,m){let y=c-u,S=s-m;return y*y+S*S}var FF;i.cx=void 0,(FF=i.cx||(i.cx={})).create="create",FF.load="load",FF.fullLoad="fullLoad";let pM=null,vw=[],jF=1e3/60,zF="loadTime",UF="fullLoadTime",w$e={mark(c){performance.mark(c)},frame(c){let s=c;pM!=null&&vw.push(s-pM),pM=s},clearMetrics(){pM=null,vw=[],performance.clearMeasures(zF),performance.clearMeasures(UF);for(let c in i.cx)performance.clearMarks(i.cx[c])},getPerformanceMetrics(){performance.measure(zF,i.cx.create,i.cx.load),performance.measure(UF,i.cx.create,i.cx.fullLoad);let c=performance.getEntriesByName(zF)[0].duration,s=performance.getEntriesByName(UF)[0].duration,u=vw.length,m=1/(vw.reduce((S,I)=>S+I,0)/u/1e3),y=vw.filter(S=>S>jF).reduce((S,I)=>S+(I-jF)/jF,0);return{loadTime:c,fullLoadTime:s,fps:m,percentDroppedFrames:y/(u+y)*100,totalFrames:u}}};i.$=Je,i.A=F,i.B=function([c,s,u]){return s+=90,s*=Math.PI/180,u*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(u),y:c*Math.sin(s)*Math.sin(u),z:c*Math.cos(u)}},i.C=Bl,i.D=Kt,i.E=tt,i.F=Vn,i.G=Um,i.H=function(c){if(Xt==null){let s=c.navigator?c.navigator.userAgent:null;Xt=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Xt},i.I=wF,i.J=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new h$e(()=>this.process()),this.subscription=dr(this.target,"message",u=>this.receive(u),!1),this.globalScope=$t(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((u,m)=>{let y=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=s?dr(s.signal,"abort",()=>{S==null||S.unsubscribe(),delete this.resolveRejects[y];let O={id:y,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(O)},p$e):null;this.resolveRejects[y]={resolve:O=>{S==null||S.unsubscribe(),u(O)},reject:O=>{S==null||S.unsubscribe(),m(O)}};let I=[],C=Object.assign(Object.assign({},c),{id:y,sourceMapId:this.mapId,origin:location.origin,data:wp(c.data,I)});this.target.postMessage(C,{transfer:I})})}receive(c){let s=c.data,u=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[u];let m=this.abortControllers[u];return delete this.abortControllers[u],void(m&&m.abort())}if($t(self)||s.mustQueue)return this.tasks[u]=s,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,s)}}process(){if(this.taskQueue.length===0)return;let c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return o(this,void 0,void 0,function*(){if(s.type==="<response>"){let y=this.resolveRejects[c];return delete this.resolveRejects[c],y?void(s.error?y.reject(Qf(s.error)):y.resolve(Qf(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let u=Qf(s.data),m=new AbortController;this.abortControllers[c]=m;try{let y=yield this.messageHandlers[s.type](s.sourceMapId,u,m);this.completeTask(c,null,y)}catch(y){this.completeTask(c,y)}})}completeTask(c,s,u){let m=[];delete this.abortControllers[c];let y={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?wp(s):null,data:wp(u,m)};this.target.postMessage(y,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.K=se,i.L=function(){var c=new F(16);return F!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},i.M=function(c,s,u){var m,y,S,I,C,O,q,z,G,Y,X,Q,re=u[0],le=u[1],me=u[2];return s===c?(c[12]=s[0]*re+s[4]*le+s[8]*me+s[12],c[13]=s[1]*re+s[5]*le+s[9]*me+s[13],c[14]=s[2]*re+s[6]*le+s[10]*me+s[14],c[15]=s[3]*re+s[7]*le+s[11]*me+s[15]):(y=s[1],S=s[2],I=s[3],C=s[4],O=s[5],q=s[6],z=s[7],G=s[8],Y=s[9],X=s[10],Q=s[11],c[0]=m=s[0],c[1]=y,c[2]=S,c[3]=I,c[4]=C,c[5]=O,c[6]=q,c[7]=z,c[8]=G,c[9]=Y,c[10]=X,c[11]=Q,c[12]=m*re+C*le+G*me+s[12],c[13]=y*re+O*le+Y*me+s[13],c[14]=S*re+q*le+X*me+s[14],c[15]=I*re+z*le+Q*me+s[15]),c},i.N=function(c,s,u){var m=u[0],y=u[1],S=u[2];return c[0]=s[0]*m,c[1]=s[1]*m,c[2]=s[2]*m,c[3]=s[3]*m,c[4]=s[4]*y,c[5]=s[5]*y,c[6]=s[6]*y,c[7]=s[7]*y,c[8]=s[8]*S,c[9]=s[9]*S,c[10]=s[10]*S,c[11]=s[11]*S,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},i.O=function(c,s,u){var m=s[0],y=s[1],S=s[2],I=s[3],C=s[4],O=s[5],q=s[6],z=s[7],G=s[8],Y=s[9],X=s[10],Q=s[11],re=s[12],le=s[13],me=s[14],qe=s[15],Te=u[0],Ce=u[1],$e=u[2],et=u[3];return c[0]=Te*m+Ce*C+$e*G+et*re,c[1]=Te*y+Ce*O+$e*Y+et*le,c[2]=Te*S+Ce*q+$e*X+et*me,c[3]=Te*I+Ce*z+$e*Q+et*qe,c[4]=(Te=u[4])*m+(Ce=u[5])*C+($e=u[6])*G+(et=u[7])*re,c[5]=Te*y+Ce*O+$e*Y+et*le,c[6]=Te*S+Ce*q+$e*X+et*me,c[7]=Te*I+Ce*z+$e*Q+et*qe,c[8]=(Te=u[8])*m+(Ce=u[9])*C+($e=u[10])*G+(et=u[11])*re,c[9]=Te*y+Ce*O+$e*Y+et*le,c[10]=Te*S+Ce*q+$e*X+et*me,c[11]=Te*I+Ce*z+$e*Q+et*qe,c[12]=(Te=u[12])*m+(Ce=u[13])*C+($e=u[14])*G+(et=u[15])*re,c[13]=Te*y+Ce*O+$e*Y+et*le,c[14]=Te*S+Ce*q+$e*X+et*me,c[15]=Te*I+Ce*z+$e*Q+et*qe,c},i.P=l,i.Q=function(c,s){let u={};for(let m=0;m<s.length;m++){let y=s[m];y in c&&(u[y]=c[y])}return u},i.R=ns,i.S=Op,i.T=fF,i.U=SQ,i.V=EQ,i.W=N,i.X=j,i.Y=zr,i.Z=yl,i._=o,i.a=J,i.a$=be,i.a0=function(c,s){var u,m,y,S,I;if(!c)return s!=null?s:{};if(!s)return c;let C=Object.assign({},c);if(s.removeAll&&(C={removeAll:!0}),s.remove){let O=new Set(s.remove);C.add&&(C.add=C.add.filter(z=>!O.has(z.id))),C.update&&(C.update=C.update.filter(z=>!O.has(z.id)));let q=new Set(((u=c.add)!==null&&u!==void 0?u:[]).map(z=>z.id));s.remove=s.remove.filter(z=>!q.has(z))}if(s.remove){let O=new Set(C.remove?C.remove.concat(s.remove):s.remove);C.remove=Array.from(O.values())}if(s.add){let O=C.add?C.add.concat(s.add):s.add,q=new Map(O.map(z=>[z.id,z]));C.add=Array.from(q.values())}if(s.update){let O=new Map((m=C.update)===null||m===void 0?void 0:m.map(q=>[q.id,q]));for(let q of s.update){let z=(y=O.get(q.id))!==null&&y!==void 0?y:{id:q.id};q.newGeometry&&(z.newGeometry=q.newGeometry),q.addOrUpdateProperties&&(z.addOrUpdateProperties=((S=z.addOrUpdateProperties)!==null&&S!==void 0?S:[]).concat(q.addOrUpdateProperties)),q.removeProperties&&(z.removeProperties=((I=z.removeProperties)!==null&&I!==void 0?I:[]).concat(q.removeProperties)),q.removeAllProperties&&(z.removeAllProperties=!0),O.set(q.id,z)}C.update=Array.from(O.values())}return C.remove&&C.add&&(C.remove=C.remove.filter(O=>C.add.findIndex(q=>q.id===O)===-1)),C},i.a1=dw,i.a2=Ym,i.a3=25,i.a4=OF,i.a5=c=>{let s=window.document.createElement("video");return s.muted=!0,new Promise(u=>{s.onloadstart=()=>{u(s)};for(let m of c){let y=window.document.createElement("source");Be(m)||(s.crossOrigin="Anonymous"),y.src=m,s.appendChild(y)}})},i.a6=gt,i.a7=function(){return Ze++},i.a8=H,i.a9=xy,i.aA=function(c){let s=1/0,u=1/0,m=-1/0,y=-1/0;for(let S of c)s=Math.min(s,S.x),u=Math.min(u,S.y),m=Math.max(m,S.x),y=Math.max(y,S.y);return[s,u,m,y]},i.aB=po,i.aC=We,i.aD=function(c,s,u,m,y=!1){if(!u[0]&&!u[1])return[0,0];let S=y?m==="map"?-c.bearingInRadians:0:m==="viewport"?c.bearingInRadians:0;if(S){let I=Math.sin(S),C=Math.cos(S);u=[u[0]*C-u[1]*I,u[0]*I+u[1]*C]}return[y?u[0]:We(s,u[0],c.zoom),y?u[1]:We(s,u[1],c.zoom)]},i.aF=TF,i.aG=DF,i.aH=SF,i.aI=NF,i.aJ=Ci,i.aK=nM,i.aL=Ee,i.aM=Or,i.aN=qn,i.aO=Ue,i.aP=un,i.aQ=IQ,i.aR=ye,i.aS=ae,i.aT=function(c){var s=new F(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},i.aU=function(c,s,u){return c[0]=s[0]-u[0],c[1]=s[1]-u[1],c[2]=s[2]-u[2],c},i.aV=function(c,s){var u=s[0],m=s[1],y=s[2],S=u*u+m*m+y*y;return S>0&&(S=1/Math.sqrt(S)),c[0]=s[0]*S,c[1]=s[1]*S,c[2]=s[2]*S,c},i.aW=ge,i.aX=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},i.aY=function(c,s,u){return c[0]=s[0]*u[0],c[1]=s[1]*u[1],c[2]=s[2]*u[2],c[3]=s[3]*u[3],c},i.aZ=ie,i.a_=function(c,s,u){let m=s[0]*u[0]+s[1]*u[1]+s[2]*u[2];return m===0?null:(-(c[0]*u[0]+c[1]*u[1]+c[2]*u[2])-u[3])/m},i.aa=Yf,i.ab=Bu,i.ac=PQ,i.ad=function(c){let s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,m,y,S)=>{let I=y||S;return s[m]=!I||I.toLowerCase(),""}),s["max-age"]){let u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s},i.ae=wr,i.af=function(c){return Math.pow(2,c)},i.ag=$,i.ah=Ot,i.ai=85.051129,i.aj=TQ,i.ak=function(c){return Math.log(c)/Math.LN2},i.al=function(c){var s=c[0],u=c[1];return s*s+u*u},i.am=function(c,s){let u=[];for(let m in c)m in s||u.push(m);return u},i.an=function(c,s){let u=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){let{interpolationType:y,minZoom:S,maxZoom:I}=c,C=y?Ot(Mo.interpolationFactor(y,s,S,I),0,1):0;c.kind==="camera"?m=Bl.number(c.minSize,c.maxSize,C):u=C}return{uSizeT:u,uSize:m}},i.ap=function(c,{uSize:s,uSizeT:u},{lowerSize:m,upperSize:y}){return c.kind==="source"?m/nh:c.kind==="composite"?Bl.number(m/nh,y/nh,u):s},i.aq=function(c,s){var u=s[0],m=s[1],y=s[2],S=s[3],I=s[4],C=s[5],O=s[6],q=s[7],z=s[8],G=s[9],Y=s[10],X=s[11],Q=s[12],re=s[13],le=s[14],me=s[15],qe=u*C-m*I,Te=u*O-y*I,Ce=u*q-S*I,$e=m*O-y*C,et=m*q-S*C,ht=y*q-S*O,Rt=z*re-G*Q,xt=z*le-Y*Q,At=z*me-X*Q,Jt=G*le-Y*re,Tt=G*me-X*re,Mt=Y*me-X*le,it=qe*Mt-Te*Tt+Ce*Jt+$e*At-et*xt+ht*Rt;return it?(c[0]=(C*Mt-O*Tt+q*Jt)*(it=1/it),c[1]=(y*Tt-m*Mt-S*Jt)*it,c[2]=(re*ht-le*et+me*$e)*it,c[3]=(Y*et-G*ht-X*$e)*it,c[4]=(O*At-I*Mt-q*xt)*it,c[5]=(u*Mt-y*At+S*xt)*it,c[6]=(le*Ce-Q*ht-me*Te)*it,c[7]=(z*ht-Y*Ce+X*Te)*it,c[8]=(I*Tt-C*At+q*Rt)*it,c[9]=(m*At-u*Tt-S*Rt)*it,c[10]=(Q*et-re*Ce+me*qe)*it,c[11]=(G*Ce-z*et-X*qe)*it,c[12]=(C*xt-I*Jt-O*Rt)*it,c[13]=(u*Jt-m*xt+y*Rt)*it,c[14]=(re*Te-Q*$e-le*qe)*it,c[15]=(z*$e-G*Te+Y*qe)*it,c):null},i.ar=He,i.as=function(c){var s=c[0],u=c[1];return Math.sqrt(s*s+u*u)},i.at=function(c){return c[0]=0,c[1]=0,c},i.au=function(c,s,u){return c[0]=s[0]*u,c[1]=s[1]*u,c},i.av=IF,i.aw=Ne,i.ax=function(c,s,u,m){let y=s.y-c.y,S=s.x-c.x,I=m.y-u.y,C=m.x-u.x,O=I*S-C*y;if(O===0)return null;let q=(C*(c.y-u.y)-I*(c.x-u.x))/O;return new l(c.x+q*S,c.y+q*y)},i.ay=LQ,i.az=wX,i.b=Gt,i.b$=class extends w{},i.b0=function(c,s,u){return c[0]=s[0]*u,c[1]=s[1]*u,c[2]=s[2]*u,c[3]=s[3]*u,c},i.b1=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]},i.b2=MQ,i.b3=by,i.b4=function(c,s,u,m,y){var S=1/Math.tan(s/2);if(c[0]=S/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=S,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,y!=null&&y!==1/0){var I=1/(m-y);c[10]=(y+m)*I,c[14]=2*y*m*I}else c[10]=-1,c[14]=-2*m;return c},i.b5=function(c){var s=new F(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},i.b6=function(c,s,u){var m=Math.sin(u),y=Math.cos(u),S=s[0],I=s[1],C=s[2],O=s[3],q=s[4],z=s[5],G=s[6],Y=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=S*y+q*m,c[1]=I*y+z*m,c[2]=C*y+G*m,c[3]=O*y+Y*m,c[4]=q*y-S*m,c[5]=z*y-I*m,c[6]=G*y-C*m,c[7]=Y*y-O*m,c},i.b7=function(c,s,u){var m=Math.sin(u),y=Math.cos(u),S=s[4],I=s[5],C=s[6],O=s[7],q=s[8],z=s[9],G=s[10],Y=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=S*y+q*m,c[5]=I*y+z*m,c[6]=C*y+G*m,c[7]=O*y+Y*m,c[8]=q*y-S*m,c[9]=z*y-I*m,c[10]=G*y-C*m,c[11]=Y*y-O*m,c},i.b8=function(){let c=new Float32Array(16);return $(c),c},i.b9=function(){let c=new Float64Array(16);return $(c),c},i.bA=function(c,s){let u=lt(c,360),m=lt(s,360),y=m-u,S=m>u?y-360:y+360;return Math.abs(y)<Math.abs(S)?y:S},i.bB=function(c){return c[0]=0,c[1]=0,c[2]=0,c},i.bC=function(c,s,u,m){let y=Math.sqrt(c*c+s*s),S=Math.sqrt(u*u+m*m);c/=y,s/=y,u/=S,m/=S;let I=Math.acos(c*u+s*m);return-s*u+c*m>0?I:-I},i.bD=function(c,s){let u=lt(c,2*Math.PI),m=lt(s,2*Math.PI);return Math.min(Math.abs(u-m),Math.abs(u-m+2*Math.PI),Math.abs(u-m-2*Math.PI))},i.bE=function(){let c={},s=xe.$version;for(let u in xe.$root){let m=xe.$root[u];if(m.required){let y=null;y=u==="version"?s:m.type==="array"?[]:{},y!=null&&(c[u]=y)}}return c},i.bF=ry,i.bG=Ae,i.bH=function c(s,u){if(Array.isArray(s)){if(!Array.isArray(u)||s.length!==u.length)return!1;for(let m=0;m<s.length;m++)if(!c(s[m],u[m]))return!1;return!0}if(typeof s=="object"&&s!==null&&u!==null){if(typeof u!="object"||Object.keys(s).length!==Object.keys(u).length)return!1;for(let m in s)if(!c(s[m],u[m]))return!1;return!0}return s===u},i.bI=function(c){c=c.slice();let s=Object.create(null);for(let u=0;u<c.length;u++)s[c[u].id]=c[u];for(let u=0;u<c.length;u++)"ref"in c[u]&&(c[u]=It(c[u],s[c[u].ref]));return c},i.bJ=function(c){if(c.type==="custom")return new f$e(c);switch(c.type){case"background":return new l$e(c);case"circle":return new WGe(c);case"color-relief":return new JGe(c);case"fill":return new d6e(c);case"fill-extrusion":return new T6e(c);case"heatmap":return new YGe(c);case"hillshade":return new XGe(c);case"line":return new O6e(c);case"raster":return new c$e(c);case"symbol":return new lM(c)}},i.bK=ot,i.bL=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let u=[];try{if(!ft(c.version,s.version))return[{command:"setStyle",args:[s]}];ft(c.center,s.center)||u.push({command:"setCenter",args:[s.center]}),ft(c.state,s.state)||u.push({command:"setGlobalState",args:[s.state]}),ft(c.centerAltitude,s.centerAltitude)||u.push({command:"setCenterAltitude",args:[s.centerAltitude]}),ft(c.zoom,s.zoom)||u.push({command:"setZoom",args:[s.zoom]}),ft(c.bearing,s.bearing)||u.push({command:"setBearing",args:[s.bearing]}),ft(c.pitch,s.pitch)||u.push({command:"setPitch",args:[s.pitch]}),ft(c.roll,s.roll)||u.push({command:"setRoll",args:[s.roll]}),ft(c.sprite,s.sprite)||u.push({command:"setSprite",args:[s.sprite]}),ft(c.glyphs,s.glyphs)||u.push({command:"setGlyphs",args:[s.glyphs]}),ft(c.transition,s.transition)||u.push({command:"setTransition",args:[s.transition]}),ft(c.light,s.light)||u.push({command:"setLight",args:[s.light]}),ft(c.terrain,s.terrain)||u.push({command:"setTerrain",args:[s.terrain]}),ft(c.sky,s.sky)||u.push({command:"setSky",args:[s.sky]}),ft(c.projection,s.projection)||u.push({command:"setProjection",args:[s.projection]});let m={},y=[];(function(I,C,O,q){let z;for(z in C=C||{},I=I||{})Object.prototype.hasOwnProperty.call(I,z)&&(Object.prototype.hasOwnProperty.call(C,z)||Tr(z,O,q));for(z in C)Object.prototype.hasOwnProperty.call(C,z)&&(Object.prototype.hasOwnProperty.call(I,z)?ft(I[z],C[z])||(I[z].type==="geojson"&&C[z].type==="geojson"&&Pr(I,C,z)?_t(O,{command:"setGeoJSONSourceData",args:[z,C[z].data]}):rn(z,C,O,q)):Wt(z,C,O))})(c.sources,s.sources,y,m);let S=[];c.layers&&c.layers.forEach(I=>{"source"in I&&m[I.source]?u.push({command:"removeLayer",args:[I.id]}):S.push(I)}),u=u.concat(y),function(I,C,O){C=C||[];let q=(I=I||[]).map(ur),z=C.map(ur),G=I.reduce(Mn,{}),Y=C.reduce(Mn,{}),X=q.slice(),Q=Object.create(null),re,le,me,qe,Te;for(let Ce=0,$e=0;Ce<q.length;Ce++)re=q[Ce],Object.prototype.hasOwnProperty.call(Y,re)?$e++:(_t(O,{command:"removeLayer",args:[re]}),X.splice(X.indexOf(re,$e),1));for(let Ce=0,$e=0;Ce<z.length;Ce++)re=z[z.length-1-Ce],X[X.length-1-Ce]!==re&&(Object.prototype.hasOwnProperty.call(G,re)?(_t(O,{command:"removeLayer",args:[re]}),X.splice(X.lastIndexOf(re,X.length-$e),1)):$e++,qe=X[X.length-Ce],_t(O,{command:"addLayer",args:[Y[re],qe]}),X.splice(X.length-Ce,0,re),Q[re]=!0);for(let Ce=0;Ce<z.length;Ce++)if(re=z[Ce],le=G[re],me=Y[re],!Q[re]&&!ft(le,me))if(ft(le.source,me.source)&&ft(le["source-layer"],me["source-layer"])&&ft(le.type,me.type)){for(Te in ar(le.layout,me.layout,O,re,null,"setLayoutProperty"),ar(le.paint,me.paint,O,re,null,"setPaintProperty"),ft(le.filter,me.filter)||_t(O,{command:"setFilter",args:[re,me.filter]}),ft(le.minzoom,me.minzoom)&&ft(le.maxzoom,me.maxzoom)||_t(O,{command:"setLayerZoomRange",args:[re,me.minzoom,me.maxzoom]}),le)Object.prototype.hasOwnProperty.call(le,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ar(le[Te],me[Te],O,re,Te.slice(6),"setPaintProperty"):ft(le[Te],me[Te])||_t(O,{command:"setLayerProperty",args:[re,Te,me[Te]]}));for(Te in me)Object.prototype.hasOwnProperty.call(me,Te)&&!Object.prototype.hasOwnProperty.call(le,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ar(le[Te],me[Te],O,re,Te.slice(6),"setPaintProperty"):ft(le[Te],me[Te])||_t(O,{command:"setLayerProperty",args:[re,Te,me[Te]]}))}else _t(O,{command:"removeLayer",args:[re]}),qe=X[X.lastIndexOf(re)+1],_t(O,{command:"addLayer",args:[me,qe]})}(S,s.layers,u)}catch(m){console.warn("Unable to compute style diff:",m),u=[{command:"setStyle",args:[s]}]}return u},i.bM=function(c){let s=[],u=c.id;return u===void 0&&s.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},i.bN=rt,i.bO=at,i.bP=class extends ua{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},i.bQ=ro,i.bR=class extends ua{constructor(c,s){super(c,s),this.current=Cs}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},i.bS=Hi,i.bT=class extends ua{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},i.bU=class extends ua{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},i.bV=U,i.bW=function(c,s){var u=Math.sin(s),m=Math.cos(s);return c[0]=m,c[1]=u,c[2]=0,c[3]=-u,c[4]=m,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},i.bX=function(c,s,u){var m=s[0],y=s[1],S=s[2];return c[0]=m*u[0]+y*u[3]+S*u[6],c[1]=m*u[1]+y*u[4]+S*u[7],c[2]=m*u[2]+y*u[5]+S*u[8],c},i.bY=function(c,s,u,m,y,S,I){var C=1/(s-u),O=1/(m-y),q=1/(S-I);return c[0]=-2*C,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*O,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*q,c[11]=0,c[12]=(s+u)*C,c[13]=(y+m)*O,c[14]=(I+S)*q,c[15]=1,c},i.bZ=class extends ua{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;let s=new Float32Array(4*c.length);for(let u=0;u<c.length;u++)s[4*u]=c[u].r,s[4*u+1]=c[u].g,s[4*u+2]=c[u].b,s[4*u+3]=c[u].a;this.gl.uniform4fv(this.location,s)}}},i.b_=class extends ua{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;let s=new Float32Array(c);this.gl.uniform1fv(this.location,s)}}},i.ba=function(){return new Float64Array(16)},i.bb=function(c,s,u){let m=new Float64Array(4);return ke(m,c,s-90,u),m},i.bc=function(c,s,u,m){var y,S,I,C,O,q=s[0],z=s[1],G=s[2],Y=s[3],X=u[0],Q=u[1],re=u[2],le=u[3];return(S=q*X+z*Q+G*re+Y*le)<0&&(S=-S,X=-X,Q=-Q,re=-re,le=-le),1-S>D?(y=Math.acos(S),I=Math.sin(y),C=Math.sin((1-m)*y)/I,O=Math.sin(m*y)/I):(C=1-m,O=m),c[0]=C*q+O*X,c[1]=C*z+O*Q,c[2]=C*G+O*re,c[3]=C*Y+O*le,c},i.bd=function(c){let s=new Float64Array(9);var u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,me,qe,Te;G=(y=(m=c)[0])*(O=y+y),Y=(S=m[1])*O,Q=(I=m[2])*O,re=I*(q=S+S),me=(C=m[3])*O,qe=C*q,Te=C*(z=I+I),(u=s)[0]=1-(X=S*q)-(le=I*z),u[3]=Y-Te,u[6]=Q+qe,u[1]=Y+Te,u[4]=1-G-le,u[7]=re-me,u[2]=Q-qe,u[5]=re+me,u[8]=1-G-X;let Ce=un(-Math.asin(Ot(s[2],-1,1))),$e,et;return Math.hypot(s[5],s[8])<.001?($e=0,et=-un(Math.atan2(s[3],s[4]))):($e=un(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),et=un(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:$e,pitch:Ce+90,bearing:et}},i.be=function(c,s){return c.roll==s.roll&&c.pitch==s.pitch&&c.bearing==s.bearing},i.bf=$r,i.bg=Fc,i.bh=gy,i.bi=lw,i.bj=my,i.bk=pt,i.bl=dt,i.bm=Go,i.bn=function(c,s,u,m,y){return pt(m,y,Ot((c-s)/(u-s),0,1))},i.bo=lt,i.bp=function(){return new Float64Array(3)},i.bq=function(c,s,u,m){return c[0]=s[0]+u[0]*m,c[1]=s[1]+u[1]*m,c[2]=s[2]+u[2]*m,c},i.br=ke,i.bs=function(c,s,u){var m=u[0],y=u[1],S=u[2],I=u[3],C=s[0],O=s[1],q=s[2],z=y*q-S*O,G=S*C-m*q,Y=m*O-y*C;return c[0]=C+I*(z+=z)+y*(Y+=Y)-S*(G+=G),c[1]=O+I*G+S*z-m*Y,c[2]=q+I*Y+m*G-y*z,c},i.bt=function(c,s,u){let m=(y=[c[0],c[1],c[2],s[0],s[1],s[2],u[0],u[1],u[2]])[0]*((z=y[8])*(I=y[4])-(C=y[5])*(q=y[7]))+y[1]*(-z*(S=y[3])+C*(O=y[6]))+y[2]*(q*S-I*O);var y,S,I,C,O,q,z;if(m===0)return null;let G=ge([],[s[0],s[1],s[2]],[u[0],u[1],u[2]]),Y=ge([],[u[0],u[1],u[2]],[c[0],c[1],c[2]]),X=ge([],[c[0],c[1],c[2]],[s[0],s[1],s[2]]),Q=ye([],G,-c[3]);return ae(Q,Q,ye([],Y,-s[3])),ae(Q,Q,ye([],X,-u[3])),ye(Q,Q,1/m),Q},i.bu=PF,i.bv=function(){return new Float64Array(4)},i.bw=function(c,s,u,m){var y=[],S=[];return y[0]=s[0]-u[0],y[1]=s[1]-u[1],y[2]=s[2]-u[2],S[0]=y[0]*Math.cos(m)-y[1]*Math.sin(m),S[1]=y[0]*Math.sin(m)+y[1]*Math.cos(m),S[2]=y[2],c[0]=S[0]+u[0],c[1]=S[1]+u[1],c[2]=S[2]+u[2],c},i.bx=function(c,s,u,m){var y=[],S=[];return y[0]=s[0]-u[0],y[1]=s[1]-u[1],y[2]=s[2]-u[2],S[0]=y[0],S[1]=y[1]*Math.cos(m)-y[2]*Math.sin(m),S[2]=y[1]*Math.sin(m)+y[2]*Math.cos(m),c[0]=S[0]+u[0],c[1]=S[1]+u[1],c[2]=S[2]+u[2],c},i.by=function(c,s,u,m){var y=[],S=[];return y[0]=s[0]-u[0],y[1]=s[1]-u[1],y[2]=s[2]-u[2],S[0]=y[2]*Math.sin(m)+y[0]*Math.cos(m),S[1]=y[1],S[2]=y[2]*Math.cos(m)-y[0]*Math.sin(m),c[0]=S[0]+u[0],c[1]=S[1]+u[1],c[2]=S[2]+u[2],c},i.bz=function(c,s,u){var m=Math.sin(u),y=Math.cos(u),S=s[0],I=s[1],C=s[2],O=s[3],q=s[8],z=s[9],G=s[10],Y=s[11];return s!==c&&(c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=S*y-q*m,c[1]=I*y-z*m,c[2]=C*y-G*m,c[3]=O*y-Y*m,c[8]=S*m+q*y,c[9]=I*m+z*y,c[10]=C*m+G*y,c[11]=O*m+Y*y,c},i.c=De,i.c0=k6e,i.c1=class extends h{},i.c2=cF,i.c3=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},i.c4=OX,i.c5=function(c,s,u){var m=s[0],y=s[1],S=s[2],I=u[3]*m+u[7]*y+u[11]*S+u[15];return c[0]=(u[0]*m+u[4]*y+u[8]*S+u[12])/(I=I||1),c[1]=(u[1]*m+u[5]*y+u[9]*S+u[13])/I,c[2]=(u[2]*m+u[6]*y+u[10]*S+u[14])/I,c},i.c6=class extends Xb{},i.c7=class extends B{},i.c8=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},i.c9=function(c,s){var u=c[0],m=c[1],y=c[2],S=c[3],I=c[4],C=c[5],O=c[6],q=c[7],z=c[8],G=c[9],Y=c[10],X=c[11],Q=c[12],re=c[13],le=c[14],me=c[15],qe=s[0],Te=s[1],Ce=s[2],$e=s[3],et=s[4],ht=s[5],Rt=s[6],xt=s[7],At=s[8],Jt=s[9],Tt=s[10],Mt=s[11],it=s[12],fr=s[13],yr=s[14],nr=s[15];return Math.abs(u-qe)<=D*Math.max(1,Math.abs(u),Math.abs(qe))&&Math.abs(m-Te)<=D*Math.max(1,Math.abs(m),Math.abs(Te))&&Math.abs(y-Ce)<=D*Math.max(1,Math.abs(y),Math.abs(Ce))&&Math.abs(S-$e)<=D*Math.max(1,Math.abs(S),Math.abs($e))&&Math.abs(I-et)<=D*Math.max(1,Math.abs(I),Math.abs(et))&&Math.abs(C-ht)<=D*Math.max(1,Math.abs(C),Math.abs(ht))&&Math.abs(O-Rt)<=D*Math.max(1,Math.abs(O),Math.abs(Rt))&&Math.abs(q-xt)<=D*Math.max(1,Math.abs(q),Math.abs(xt))&&Math.abs(z-At)<=D*Math.max(1,Math.abs(z),Math.abs(At))&&Math.abs(G-Jt)<=D*Math.max(1,Math.abs(G),Math.abs(Jt))&&Math.abs(Y-Tt)<=D*Math.max(1,Math.abs(Y),Math.abs(Tt))&&Math.abs(X-Mt)<=D*Math.max(1,Math.abs(X),Math.abs(Mt))&&Math.abs(Q-it)<=D*Math.max(1,Math.abs(Q),Math.abs(it))&&Math.abs(re-fr)<=D*Math.max(1,Math.abs(re),Math.abs(fr))&&Math.abs(le-yr)<=D*Math.max(1,Math.abs(le),Math.abs(yr))&&Math.abs(me-nr)<=D*Math.max(1,Math.abs(me),Math.abs(nr))},i.cA=function(c,s){J.REGISTERED_PROTOCOLS[c]=s},i.cB=function(c){delete J.REGISTERED_PROTOCOLS[c]},i.cC=function(c,s){let u={};for(let y=0;y<c.length;y++){let S=s&&s[c[y].id]||Qq(c[y]);s&&(s[c[y].id]=S);let I=u[S];I||(I=u[S]=[]),I.push(c[y])}let m=[];for(let y in u)m.push(u[y]);return m},i.cD=Ut,i.cE=CQ,i.cF=RQ,i.cG=sQ,i.cH=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Je/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;let s=c.bucket.layers[0],u=s.layout,m=s._unevaluatedLayout._values,y={layoutIconSize:m["icon-size"].possiblyEvaluate(new Vn(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Vn(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Vn(18))};if(c.bucket.textSizeData.kind==="composite"){let{minZoom:q,maxZoom:z}=c.bucket.textSizeData;y.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Vn(q),c.canonical),m["text-size"].possiblyEvaluate(new Vn(z),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){let{minZoom:q,maxZoom:z}=c.bucket.iconSizeData;y.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Vn(q),c.canonical),m["icon-size"].possiblyEvaluate(new Vn(z),c.canonical)]}let S=u.get("text-line-height")*po,I=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",C=u.get("text-keep-upright"),O=u.get("text-size");for(let q of c.bucket.features){let z=u.get("text-font").evaluate(q,{},c.canonical).join(","),G=O.evaluate(q,{},c.canonical),Y=y.layoutTextSize.evaluate(q,{},c.canonical),X=y.layoutIconSize.evaluate(q,{},c.canonical),Q={horizontal:{},vertical:void 0},re=q.text,le,me=[0,0];if(re){let Ce=re.toString(),$e=u.get("text-letter-spacing").evaluate(q,{},c.canonical)*po,et=rF(Ce)?$e:0,ht=u.get("text-anchor").evaluate(q,{},c.canonical),Rt=BQ(s,q,c.canonical);if(!Rt){let Tt=u.get("text-radial-offset").evaluate(q,{},c.canonical);me=Tt?UQ(ht,[Tt*po,LF]):u.get("text-offset").evaluate(q,{},c.canonical).map(Mt=>Mt*po)}let xt=I?"center":u.get("text-justify").evaluate(q,{},c.canonical),At=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(q,{},c.canonical)*po:1/0,Jt=()=>{c.bucket.allowVerticalPlacement&&ny(Ce)&&(Q.vertical=oM(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,At,S,ht,"left",et,me,i.ao.vertical,!0,Y,G))};if(!I&&Rt){let Tt=new Set;if(xt==="auto")for(let it=0;it<Rt.values.length;it+=2)Tt.add(DF(Rt.values[it]));else Tt.add(xt);let Mt=!1;for(let it of Tt)if(!Q.horizontal[it])if(Mt)Q.horizontal[it]=Q.horizontal[0];else{let fr=oM(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,At,S,"center",it,et,me,i.ao.horizontal,!1,Y,G);fr&&(Q.horizontal[it]=fr,Mt=fr.positionedLines.length===1)}Jt()}else{xt==="auto"&&(xt=DF(ht));let Tt=oM(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,At,S,ht,xt,et,me,i.ao.horizontal,!1,Y,G);Tt&&(Q.horizontal[xt]=Tt),Jt(),ny(Ce)&&I&&C&&(Q.vertical=oM(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,At,S,ht,xt,et,me,i.ao.vertical,!1,Y,G))}}let qe=!1;if(q.icon&&q.icon.name){let Ce=c.imageMap[q.icon.name];Ce&&(le=i$e(c.imagePositions[q.icon.name],u.get("icon-offset").evaluate(q,{},c.canonical),u.get("icon-anchor").evaluate(q,{},c.canonical)),qe=!!Ce.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=qe:c.bucket.sdfIcons!==qe&&zt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==c.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}let Te=GQ(Q.horizontal)||Q.vertical;c.bucket.iconsInText=!!Te&&Te.iconsInText,(Te||le)&&x$e(c.bucket,q,Q,le,c.imageMap,y,Y,X,me,qe,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},i.cI=_F,i.cJ=gF,i.cK=yF,i.cL=WX,i.cM=bF,i.cN=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},i.cO=function(c,s,u,m,y){return o(this,void 0,void 0,function*(){if(j())try{return yield zr(c,s,u,m,y)}catch(S){}return function(S,I,C,O,q){let z=S.width,G=S.height;vr&&pr||(vr=new OffscreenCanvas(z,G),pr=vr.getContext("2d",{willReadFrequently:!0})),vr.width=z,vr.height=G,pr.drawImage(S,0,0,z,G);let Y=pr.getImageData(I,C,O,q);return pr.clearRect(0,0,z,G),Y.data}(c,s,u,m,y)})},i.cP=NX,i.cQ=f,i.cR=HX,i.cS=vy,i.cT=Nm,i.cU=function(c,s){let u=new Map;if(c!=null)if(c.type==="Feature")u.set(mw(c,s),c);else for(let m of c.features)u.set(mw(m,s),m);return u},i.cV=function(c,s){if(c==null)return!0;if(c.type==="Feature")return mw(c,s)!=null;if(c.type==="FeatureCollection"){let u=new Set;for(let m of c.features){let y=mw(m,s);if(y==null||u.has(y))return!1;u.add(y)}return!0}return!1},i.cW=function(c,s,u){var m,y,S,I;if(s.removeAll&&c.clear(),s.remove)for(let C of s.remove)c.delete(C);if(s.add)for(let C of s.add){let O=mw(C,u);O!=null&&c.set(O,C)}if(s.update)for(let C of s.update){let O=c.get(C.id);if(O==null)continue;let q=!C.removeAllProperties&&(((m=C.removeProperties)===null||m===void 0?void 0:m.length)>0||((y=C.addOrUpdateProperties)===null||y===void 0?void 0:y.length)>0);if((C.newGeometry||C.removeAllProperties||q)&&(O=Object.assign({},O),c.set(C.id,O),q&&(O.properties=Object.assign({},O.properties))),C.newGeometry&&(O.geometry=C.newGeometry),C.removeAllProperties)O.properties={};else if(((S=C.removeProperties)===null||S===void 0?void 0:S.length)>0)for(let z of C.removeProperties)Object.prototype.hasOwnProperty.call(O.properties,z)&&delete O.properties[z];if(((I=C.addOrUpdateProperties)===null||I===void 0?void 0:I.length)>0)for(let{key:z,value:G}of C.addOrUpdateProperties)O.properties[z]=G}},i.cX=dl,i.ca=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},i.cb=c=>c.type==="symbol",i.cc=c=>c.type==="circle",i.cd=c=>c.type==="heatmap",i.ce=c=>c.type==="line",i.cf=c=>c.type==="fill",i.cg=c=>c.type==="fill-extrusion",i.ch=c=>c.type==="hillshade",i.ci=c=>c.type==="color-relief",i.cj=c=>c.type==="raster",i.ck=c=>c.type==="background",i.cl=c=>c.type==="custom",i.cm=ze,i.cn=function(c,s,u){let m=Ke(s.x-u.x,s.y-u.y),y=Ke(c.x-u.x,c.y-u.y);var S,I;return un(Math.atan2(m[0]*y[1]-m[1]*y[0],(S=m)[0]*(I=y)[0]+S[1]*I[1]))},i.co=Dt,i.cp=function(c,s){return Nn[s]&&(c instanceof MouseEvent||c instanceof WheelEvent)},i.cq=function(c,s){return Sn[s]&&"touches"in c},i.cr=function(c){return Sn[c]||Nn[c]},i.cs=function(c,s,u){var m=s[0],y=s[1];return c[0]=u[0]*m+u[4]*y+u[12],c[1]=u[1]*m+u[5]*y+u[13],c},i.ct=function(c,s){let{x:u,y:m}=dw.fromLngLat(s);return!(c<0||c>25||m<0||m>=1||u<0||u>=1)},i.cu=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},i.cv=class extends Tp{},i.cw=w$e,i.cy=function(c){return c.message===_i},i.cz=_e,i.d=Be,i.e=nt,i.f=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));let s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),i.g=te,i.h=c=>new Promise((s,u)=>{let m=new Image;m.onload=()=>{s(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Sr})},m.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let y=new Blob([new Uint8Array(c)],{type:"image/png"});m.src=c.byteLength?URL.createObjectURL(y):Sr}),i.i=$t,i.j=(c,s)=>Le(nt(c,{type:"json"}),s),i.k=Re,i.l=pe,i.m=Le,i.n=(c,s)=>Le(nt(c,{type:"arrayBuffer"}),s),i.o=function(c){return new bF(c).readFields(W6e,[])},i.p=aQ,i.q=nw,i.r=sa,i.s=dr,i.t=ZA,i.u=Jr,i.v=xe,i.w=zt,i.x=Jq,i.y=Bm,i.z=bp}),r("worker",["./shared"],function(i){"use strict";class o{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,te){for(let _e of J){this._layerConfigs[_e.id]=_e;let Ae=this._layers[_e.id]=i.bJ(_e);Ae._featureFilter=i.aa(Ae.filter),this.keyCache[_e.id]&&delete this.keyCache[_e.id]}for(let _e of te)delete this.keyCache[_e],delete this._layerConfigs[_e],delete this._layers[_e];this.familiesBySource={};let se=i.cC(Object.values(this._layerConfigs),this.keyCache);for(let _e of se){let Ae=_e.map(Re=>this._layers[Re.id]),Le=Ae[0];if(Le.visibility==="none")continue;let Be=Le.source||"",Oe=this.familiesBySource[Be];Oe||(Oe=this.familiesBySource[Be]={});let he=Le.sourceLayer||"_geojsonTileLayer",pe=Oe[he];pe||(pe=Oe[he]=[]),pe.push(Ae)}}}class l{constructor(J){let te={},se=[];for(let Be in J){let Oe=J[Be],he=te[Be]={};for(let pe in Oe){let Re=Oe[+pe];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;let tt={x:0,y:0,w:Re.bitmap.width+2,h:Re.bitmap.height+2};se.push(tt),he[pe]={rect:tt,metrics:Re.metrics}}}let{w:_e,h:Ae}=i.p(se),Le=new i.q({width:_e||1,height:Ae||1});for(let Be in J){let Oe=J[Be];for(let he in Oe){let pe=Oe[+he];if(!pe||pe.bitmap.width===0||pe.bitmap.height===0)continue;let Re=te[Be][he].rect;i.q.copy(pe.bitmap,Le,{x:0,y:0},{x:Re.x+1,y:Re.y+1},pe.bitmap)}}this.image=Le,this.positions=te}}i.cD("GlyphAtlas",l);class f{constructor(J){this.tileID=new i.Z(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[],this.globalState=J.globalState}parse(J,te,se,_e,Ae){return i._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new i.a8;let Le=new i.cE(Object.keys(J.layers).sort()),Be=new i.cF(this.tileID,this.promoteId);Be.bucketLayerIDs=[];let Oe={},he={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:se,subdivisionGranularity:Ae},pe=te.familiesBySource[this.source];for(let ar in pe){let ur=J.layers[ar];if(!ur)continue;ur.version===1&&i.w(`Vector tile source "${this.source}" layer "${ar}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Mn=Le.encode(ar),gt=[];for(let si=0;si<ur.length;si++){let Tn=ur.feature(si),Ia=Be.getId(Tn,ar);gt.push({feature:Tn,id:Ia,index:si,sourceLayerIndex:Mn})}for(let si of pe[ar]){let Tn=si[0];Tn.source!==this.source&&i.w(`layer.source = ${Tn.source} does not equal this.source = ${this.source}`),Tn.minzoom&&this.zoom<Math.floor(Tn.minzoom)||Tn.maxzoom&&this.zoom>=Tn.maxzoom||Tn.visibility!=="none"&&(d(si,this.zoom,se,this.globalState),(Oe[Tn.id]=Tn.createBucket({index:Be.bucketLayerIDs.length,layers:si,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mn,sourceID:this.source,globalState:this.globalState})).populate(gt,he,this.tileID.canonical),Be.bucketLayerIDs.push(si.map(Ia=>Ia.id)))}}let Re=i.bN(he.glyphDependencies,ar=>Object.keys(ar).map(Number));this.inFlightDependencies.forEach(ar=>ar==null?void 0:ar.abort()),this.inFlightDependencies=[];let tt=Promise.resolve({});if(Object.keys(Re).length){let ar=new AbortController;this.inFlightDependencies.push(ar),tt=_e.sendAsync({type:"GG",data:{stacks:Re,source:this.source,tileID:this.tileID,type:"glyphs"}},ar)}let xe=Object.keys(he.iconDependencies),ut=Promise.resolve({});if(xe.length){let ar=new AbortController;this.inFlightDependencies.push(ar),ut=_e.sendAsync({type:"GI",data:{icons:xe,source:this.source,tileID:this.tileID,type:"icons"}},ar)}let It=Object.keys(he.patternDependencies),ft=Promise.resolve({});if(It.length){let ar=new AbortController;this.inFlightDependencies.push(ar),ft=_e.sendAsync({type:"GI",data:{icons:It,source:this.source,tileID:this.tileID,type:"patterns"}},ar)}let[_t,Wt,Tr]=yield Promise.all([tt,ut,ft]),rn=new l(_t),Pr=new i.cG(Wt,Tr);for(let ar in Oe){let ur=Oe[ar];ur instanceof i.a9?(d(ur.layers,this.zoom,se,this.globalState),i.cH({bucket:ur,glyphMap:_t,glyphPositions:rn.positions,imageMap:Wt,imagePositions:Pr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:he.subdivisionGranularity})):ur.hasPattern&&(ur instanceof i.cI||ur instanceof i.cJ||ur instanceof i.cK)&&(d(ur.layers,this.zoom,se,this.globalState),ur.addFeatures(he,this.tileID.canonical,Pr.patternPositions))}return this.status="done",{buckets:Object.values(Oe).filter(ar=>!ar.isEmpty()),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:rn.image,imageAtlas:Pr,glyphMap:this.returnDependencies?_t:null,iconMap:this.returnDependencies?Wt:null,glyphPositions:this.returnDependencies?rn.positions:null}})}}function d(De,J,te,se){let _e=new i.F(J);for(let Ae of De)Ae.setGlobalState(se),Ae.recalculate(_e,te)}class v{constructor(J,te,se){this.actor=J,this.layerIndex=te,this.availableImages=se,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,te){return i._(this,void 0,void 0,function*(){let se=yield i.n(J.request,te);try{return{vectorTile:new i.cL(new i.cM(se.data)),rawData:se.data,cacheControl:se.cacheControl,expires:se.expires}}catch(_e){let Ae=new Uint8Array(se.data),Le=`Unable to parse the tile at ${J.request.url}, `;throw Le+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${_e.message}`,new Error(Le)}})}loadTile(J){return i._(this,void 0,void 0,function*(){let te=J.uid,se=!!(J&&J.request&&J.request.collectResourceTiming)&&new i.cN(J.request),_e=new f(J);this.loading[te]=_e;let Ae=new AbortController;_e.abort=Ae;try{let Le=yield this.loadVectorTile(J,Ae);if(delete this.loading[te],!Le)return null;let Be=Le.rawData,Oe={};Le.expires&&(Oe.expires=Le.expires),Le.cacheControl&&(Oe.cacheControl=Le.cacheControl);let he={};if(se){let Re=se.finish();Re&&(he.resourceTiming=JSON.parse(JSON.stringify(Re)))}_e.vectorTile=Le.vectorTile;let pe=_e.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);this.loaded[te]=_e,this.fetching[te]={rawTileData:Be,cacheControl:Oe,resourceTiming:he};try{let Re=yield pe;return i.e({rawTileData:Be.slice(0)},Re,Oe,he)}finally{delete this.fetching[te]}}catch(Le){throw delete this.loading[te],_e.status="done",this.loaded[te]=_e,Le}})}reloadTile(J){return i._(this,void 0,void 0,function*(){let te=J.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let se=this.loaded[te];if(se.showCollisionBoxes=J.showCollisionBoxes,se.globalState=J.globalState,se.status==="parsing"){let _e=yield se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity),Ae;if(this.fetching[te]){let{rawTileData:Le,cacheControl:Be,resourceTiming:Oe}=this.fetching[te];delete this.fetching[te],Ae=i.e({rawTileData:Le.slice(0)},_e,Be,Oe)}else Ae=_e;return Ae}if(se.status==="done"&&se.vectorTile)return se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity)})}abortTile(J){return i._(this,void 0,void 0,function*(){let te=this.loading,se=J.uid;te&&te[se]&&te[se].abort&&(te[se].abort.abort(),delete te[se])})}removeTile(J){return i._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class x{constructor(){this.loaded={}}loadTile(J){return i._(this,void 0,void 0,function*(){let{uid:te,encoding:se,rawImageData:_e,redFactor:Ae,greenFactor:Le,blueFactor:Be,baseShift:Oe}=J,he=_e.width+2,pe=_e.height+2,Re=i.b(_e)?new i.R({width:he,height:pe},yield i.cO(_e,-1,-1,he,pe)):_e,tt=new i.cP(te,Re,se,Ae,Le,Be,Oe);return this.loaded=this.loaded||{},this.loaded[te]=tt,tt})}removeTile(J){let te=this.loaded,se=J.uid;te&&te[se]&&delete te[se]}}var b,A,P=function(){if(A)return b;function De(te,se){if(te.length!==0){J(te[0],se);for(var _e=1;_e<te.length;_e++)J(te[_e],!se)}}function J(te,se){for(var _e=0,Ae=0,Le=0,Be=te.length,Oe=Be-1;Le<Be;Oe=Le++){var he=(te[Le][0]-te[Oe][0])*(te[Oe][1]+te[Le][1]),pe=_e+he;Ae+=Math.abs(_e)>=Math.abs(he)?_e-pe+he:he-pe+_e,_e=pe}_e+Ae>=0!=!!se&&te.reverse()}return A=1,b=function te(se,_e){var Ae,Le=se&&se.type;if(Le==="FeatureCollection")for(Ae=0;Ae<se.features.length;Ae++)te(se.features[Ae],_e);else if(Le==="GeometryCollection")for(Ae=0;Ae<se.geometries.length;Ae++)te(se.geometries[Ae],_e);else if(Le==="Feature")te(se.geometry,_e);else if(Le==="Polygon")De(se.coordinates,_e);else if(Le==="MultiPolygon")for(Ae=0;Ae<se.coordinates.length;Ae++)De(se.coordinates[Ae],_e);return se}}(),N=i.cQ(P);class j extends i.cS{constructor(J,te){super(new i.cM,0,te,[],[]),this.feature=J,this.type=J.type,this.properties=J.tags?J.tags:{},"id"in J&&(typeof J.id=="string"?this.id=parseInt(J.id,10):typeof J.id!="number"||isNaN(J.id)||(this.id=J.id))}loadGeometry(){let J=[],te=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let se of te){let _e=[];for(let Ae of se)_e.push(new i.P(Ae[0],Ae[1]));J.push(_e)}return J}}class D extends i.cR{constructor(J,te){super(new i.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=te?te.version:1,this.extent=te?te.extent:4096,this.length=J.length,this.features=J}feature(J){return new j(this.features[J],this.extent)}}function F(De,J){J.writeVarintField(15,De.version||1),J.writeStringField(1,De.name||""),J.writeVarintField(5,De.extent||4096);let te={keys:[],values:[],keycache:{},valuecache:{}};for(let Ae=0;Ae<De.length;Ae++)te.feature=De.feature(Ae),J.writeMessage(2,U,te);let se=te.keys;for(let Ae of se)J.writeStringField(3,Ae);let _e=te.values;for(let Ae of _e)J.writeMessage(4,ae,Ae)}function U(De,J){if(!De.feature)return;let te=De.feature;te.id!==void 0&&J.writeVarintField(1,te.id),J.writeMessage(2,$,De),J.writeVarintField(3,te.type),J.writeMessage(4,ne,te)}function $(De,J){var te;for(let se in(te=De.feature)==null?void 0:te.properties){let _e=De.feature.properties[se],Ae=De.keycache[se];if(_e===null)continue;Ae===void 0&&(De.keys.push(se),Ae=De.keys.length-1,De.keycache[se]=Ae),J.writeVarint(Ae),typeof _e!="string"&&typeof _e!="boolean"&&typeof _e!="number"&&(_e=JSON.stringify(_e));let Le=typeof _e+":"+_e,Be=De.valuecache[Le];Be===void 0&&(De.values.push(_e),Be=De.values.length-1,De.valuecache[Le]=Be),J.writeVarint(Be)}}function Z(De,J){return(J<<3)+(7&De)}function ie(De){return De<<1^De>>31}function ne(De,J){let te=De.loadGeometry(),se=De.type,_e=0,Ae=0;for(let Le of te){let Be=1;se===1&&(Be=Le.length),J.writeVarint(Z(1,Be));let Oe=se===3?Le.length-1:Le.length;for(let he=0;he<Oe;he++){he===1&&se!==1&&J.writeVarint(Z(2,Oe-1));let pe=Le[he].x-_e,Re=Le[he].y-Ae;J.writeVarint(ie(pe)),J.writeVarint(ie(Re)),_e+=pe,Ae+=Re}De.type===3&&J.writeVarint(Z(7,1))}}function ae(De,J){let te=typeof De;te==="string"?J.writeStringField(1,De):te==="boolean"?J.writeBooleanField(7,De):te==="number"&&(De%1!=0?J.writeDoubleField(3,De):De<0?J.writeSVarintField(6,De):J.writeVarintField(5,De))}let ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:De=>De},ge=Math.fround||(de=new Float32Array(1),De=>(de[0]=+De,de[0]));var de;class be{constructor(J){this.options=Object.assign(Object.create(ye),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){let{log:te,minZoom:se,maxZoom:_e}=this.options;te&&console.time("total time");let Ae=`prepare ${J.length} points`;te&&console.time(Ae),this.points=J;let Le=[];for(let Oe=0;Oe<J.length;Oe++){let he=J[Oe];if(!he.geometry)continue;let[pe,Re]=he.geometry.coordinates,tt=ge(ke(pe)),xe=ge(He(Re));Le.push(tt,xe,1/0,Oe,-1,1),this.options.reduce&&Le.push(0)}let Be=this.trees[_e+1]=this._createTree(Le);te&&console.timeEnd(Ae);for(let Oe=_e;Oe>=se;Oe--){let he=+Date.now();Be=this.trees[Oe]=this._createTree(this._cluster(Be,Oe)),te&&console.log("z%d: %d clusters in %dms",Oe,Be.numItems,+Date.now()-he)}return te&&console.timeEnd("total time"),this}getClusters(J,te){let se=((J[0]+180)%360+360)%360-180,_e=Math.max(-90,Math.min(90,J[1])),Ae=J[2]===180?180:((J[2]+180)%360+360)%360-180,Le=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)se=-180,Ae=180;else if(se>Ae){let Re=this.getClusters([se,_e,180,Le],te),tt=this.getClusters([-180,_e,Ae,Le],te);return Re.concat(tt)}let Be=this.trees[this._limitZoom(te)],Oe=Be.range(ke(se),He(Le),ke(Ae),He(_e)),he=Be.data,pe=[];for(let Re of Oe){let tt=this.stride*Re;pe.push(he[tt+5]>1?Ne(he,tt,this.clusterProps):this.points[he[tt+3]])}return pe}getChildren(J){let te=this._getOriginId(J),se=this._getOriginZoom(J),_e="No cluster with the specified id.",Ae=this.trees[se];if(!Ae)throw new Error(_e);let Le=Ae.data;if(te*this.stride>=Le.length)throw new Error(_e);let Be=this.options.radius/(this.options.extent*Math.pow(2,se-1)),Oe=Ae.within(Le[te*this.stride],Le[te*this.stride+1],Be),he=[];for(let pe of Oe){let Re=pe*this.stride;Le[Re+4]===J&&he.push(Le[Re+5]>1?Ne(Le,Re,this.clusterProps):this.points[Le[Re+3]])}if(he.length===0)throw new Error(_e);return he}getLeaves(J,te,se){let _e=[];return this._appendLeaves(_e,J,te=te||10,se=se||0,0),_e}getTile(J,te,se){let _e=this.trees[this._limitZoom(J)],Ae=Math.pow(2,J),{extent:Le,radius:Be}=this.options,Oe=Be/Le,he=(se-Oe)/Ae,pe=(se+1+Oe)/Ae,Re={features:[]};return this._addTileFeatures(_e.range((te-Oe)/Ae,he,(te+1+Oe)/Ae,pe),_e.data,te,se,Ae,Re),te===0&&this._addTileFeatures(_e.range(1-Oe/Ae,he,1,pe),_e.data,Ae,se,Ae,Re),te===Ae-1&&this._addTileFeatures(_e.range(0,he,Oe/Ae,pe),_e.data,-1,se,Ae,Re),Re.features.length?Re:null}getClusterExpansionZoom(J){let te=this._getOriginZoom(J)-1;for(;te<=this.options.maxZoom;){let se=this.getChildren(J);if(te++,se.length!==1)break;J=se[0].properties.cluster_id}return te}_appendLeaves(J,te,se,_e,Ae){let Le=this.getChildren(te);for(let Be of Le){let Oe=Be.properties;if(Oe&&Oe.cluster?Ae+Oe.point_count<=_e?Ae+=Oe.point_count:Ae=this._appendLeaves(J,Oe.cluster_id,se,_e,Ae):Ae<_e?Ae++:J.push(Be),J.length===se)break}return Ae}_createTree(J){let te=new i.aI(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<J.length;se+=this.stride)te.add(J[se],J[se+1]);return te.finish(),te.data=J,te}_addTileFeatures(J,te,se,_e,Ae,Le){for(let Be of J){let Oe=Be*this.stride,he=te[Oe+5]>1,pe,Re,tt;if(he)pe=Me(te,Oe,this.clusterProps),Re=te[Oe],tt=te[Oe+1];else{let It=this.points[te[Oe+3]];pe=It.properties;let[ft,_t]=It.geometry.coordinates;Re=ke(ft),tt=He(_t)}let xe={type:1,geometry:[[Math.round(this.options.extent*(Re*Ae-se)),Math.round(this.options.extent*(tt*Ae-_e))]],tags:pe},ut;ut=he||this.options.generateId?te[Oe+3]:this.points[te[Oe+3]].id,ut!==void 0&&(xe.id=ut),Le.features.push(xe)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,te){let{radius:se,extent:_e,reduce:Ae,minPoints:Le}=this.options,Be=se/(_e*Math.pow(2,te)),Oe=J.data,he=[],pe=this.stride;for(let Re=0;Re<Oe.length;Re+=pe){if(Oe[Re+2]<=te)continue;Oe[Re+2]=te;let tt=Oe[Re],xe=Oe[Re+1],ut=J.within(Oe[Re],Oe[Re+1],Be),It=Oe[Re+5],ft=It;for(let _t of ut){let Wt=_t*pe;Oe[Wt+2]>te&&(ft+=Oe[Wt+5])}if(ft>It&&ft>=Le){let _t,Wt=tt*It,Tr=xe*It,rn=-1,Pr=(Re/pe<<5)+(te+1)+this.points.length;for(let ar of ut){let ur=ar*pe;if(Oe[ur+2]<=te)continue;Oe[ur+2]=te;let Mn=Oe[ur+5];Wt+=Oe[ur]*Mn,Tr+=Oe[ur+1]*Mn,Oe[ur+4]=Pr,Ae&&(_t||(_t=this._map(Oe,Re,!0),rn=this.clusterProps.length,this.clusterProps.push(_t)),Ae(_t,this._map(Oe,ur)))}Oe[Re+4]=Pr,he.push(Wt/ft,Tr/ft,1/0,Pr,-1,ft),Ae&&he.push(rn)}else{for(let _t=0;_t<pe;_t++)he.push(Oe[Re+_t]);if(ft>1)for(let _t of ut){let Wt=_t*pe;if(!(Oe[Wt+2]<=te)){Oe[Wt+2]=te;for(let Tr=0;Tr<pe;Tr++)he.push(Oe[Wt+Tr])}}}}return he}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,te,se){if(J[te+5]>1){let Le=this.clusterProps[J[te+6]];return se?Object.assign({},Le):Le}let _e=this.points[J[te+3]].properties,Ae=this.options.map(_e);return se&&Ae===_e?Object.assign({},Ae):Ae}}function Ne(De,J,te){return{type:"Feature",id:De[J+3],properties:Me(De,J,te),geometry:{type:"Point",coordinates:[(se=De[J],360*(se-.5)),Ke(De[J+1])]}};var se}function Me(De,J,te){let se=De[J+5],_e=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,Ae=De[J+6],Le=Ae===-1?{}:Object.assign({},te[Ae]);return Object.assign(Le,{cluster:!0,cluster_id:De[J+3],point_count:se,point_count_abbreviated:_e})}function ke(De){return De/360+.5}function He(De){let J=Math.sin(De*Math.PI/180),te=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return te<0?0:te>1?1:te}function Ke(De){let J=(180-360*De)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function Je(De,J,te,se){let _e=se,Ae=J+(te-J>>1),Le,Be=te-J,Oe=De[J],he=De[J+1],pe=De[te],Re=De[te+1];for(let tt=J+3;tt<te;tt+=3){let xe=We(De[tt],De[tt+1],Oe,he,pe,Re);if(xe>_e)Le=tt,_e=xe;else if(xe===_e){let ut=Math.abs(tt-Ae);ut<Be&&(Le=tt,Be=ut)}}_e>se&&(Le-J>3&&Je(De,J,Le,se),De[Le+2]=_e,te-Le>3&&Je(De,Le,te,se))}function We(De,J,te,se,_e,Ae){let Le=_e-te,Be=Ae-se;if(Le!==0||Be!==0){let Oe=((De-te)*Le+(J-se)*Be)/(Le*Le+Be*Be);Oe>1?(te=_e,se=Ae):Oe>0&&(te+=Le*Oe,se+=Be*Oe)}return Le=De-te,Be=J-se,Le*Le+Be*Be}function lt(De,J,te,se){let _e={id:De==null?null:De,type:J,geometry:te,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")pt(_e,te);else if(J==="Polygon")pt(_e,te[0]);else if(J==="MultiLineString")for(let Ae of te)pt(_e,Ae);else if(J==="MultiPolygon")for(let Ae of te)pt(_e,Ae[0]);return _e}function pt(De,J){for(let te=0;te<J.length;te+=3)De.minX=Math.min(De.minX,J[te]),De.minY=Math.min(De.minY,J[te+1]),De.maxX=Math.max(De.maxX,J[te]),De.maxY=Math.max(De.maxY,J[te+1])}function dt(De,J,te,se){if(!J.geometry)return;let _e=J.geometry.coordinates;if(_e&&_e.length===0)return;let Ae=J.geometry.type,Le=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),Be=[],Oe=J.id;if(te.promoteId?Oe=J.properties[te.promoteId]:te.generateId&&(Oe=se||0),Ae==="Point")ze(_e,Be);else if(Ae==="MultiPoint")for(let he of _e)ze(he,Be);else if(Ae==="LineString")Dt(_e,Be,Le,!1);else if(Ae==="MultiLineString"){if(te.lineMetrics){for(let he of _e)Be=[],Dt(he,Be,Le,!1),De.push(lt(Oe,"LineString",Be,J.properties));return}Ot(_e,Be,Le,!1)}else if(Ae==="Polygon")Ot(_e,Be,Le,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(let he of J.geometry.geometries)dt(De,{id:Oe,geometry:he,properties:J.properties},te,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let he of _e){let pe=[];Ot(he,pe,Le,!0),Be.push(pe)}}De.push(lt(Oe,Ae,Be,J.properties))}function ze(De,J){J.push(Ue(De[0]),nt(De[1]),0)}function Dt(De,J,te,se){let _e,Ae,Le=0;for(let Oe=0;Oe<De.length;Oe++){let he=Ue(De[Oe][0]),pe=nt(De[Oe][1]);J.push(he,pe,0),Oe>0&&(Le+=se?(_e*pe-he*Ae)/2:Math.sqrt(Math.pow(he-_e,2)+Math.pow(pe-Ae,2))),_e=he,Ae=pe}let Be=J.length-3;J[2]=1,Je(J,0,Be,te),J[Be+2]=1,J.size=Math.abs(Le),J.start=0,J.end=J.size}function Ot(De,J,te,se){for(let _e=0;_e<De.length;_e++){let Ae=[];Dt(De[_e],Ae,te,se),J.push(Ae)}}function Ue(De){return De/360+.5}function nt(De){let J=Math.sin(De*Math.PI/180),te=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return te<0?0:te>1?1:te}function Ze(De,J,te,se,_e,Ae,Le,Be){if(se/=J,Ae>=(te/=J)&&Le<se)return De;if(Le<te||Ae>=se)return null;let Oe=[];for(let he of De){let pe=he.geometry,Re=he.type,tt=_e===0?he.minX:he.minY,xe=_e===0?he.maxX:he.maxY;if(tt>=te&&xe<se){Oe.push(he);continue}if(xe<te||tt>=se)continue;let ut=[];if(Re==="Point"||Re==="MultiPoint")rt(pe,ut,te,se,_e);else if(Re==="LineString")at(pe,ut,te,se,_e,!1,Be.lineMetrics);else if(Re==="MultiLineString")Lt(pe,ut,te,se,_e,!1);else if(Re==="Polygon")Lt(pe,ut,te,se,_e,!0);else if(Re==="MultiPolygon")for(let It of pe){let ft=[];Lt(It,ft,te,se,_e,!0),ft.length&&ut.push(ft)}if(ut.length){if(Be.lineMetrics&&Re==="LineString"){for(let It of ut)Oe.push(lt(he.id,Re,It,he.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(ut.length===1?(Re="LineString",ut=ut[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=ut.length===3?"Point":"MultiPoint"),Oe.push(lt(he.id,Re,ut,he.tags))}}return Oe.length?Oe:null}function rt(De,J,te,se,_e){for(let Ae=0;Ae<De.length;Ae+=3){let Le=De[Ae+_e];Le>=te&&Le<=se&&zt(J,De[Ae],De[Ae+1],De[Ae+2])}}function at(De,J,te,se,_e,Ae,Le){let Be=ot(De),Oe=_e===0?Pt:$t,he,pe,Re=De.start;for(let ft=0;ft<De.length-3;ft+=3){let _t=De[ft],Wt=De[ft+1],Tr=De[ft+2],rn=De[ft+3],Pr=De[ft+4],ar=_e===0?_t:Wt,ur=_e===0?rn:Pr,Mn=!1;Le&&(he=Math.sqrt(Math.pow(_t-rn,2)+Math.pow(Wt-Pr,2))),ar<te?ur>te&&(pe=Oe(Be,_t,Wt,rn,Pr,te),Le&&(Be.start=Re+he*pe)):ar>se?ur<se&&(pe=Oe(Be,_t,Wt,rn,Pr,se),Le&&(Be.start=Re+he*pe)):zt(Be,_t,Wt,Tr),ur<te&&ar>=te&&(pe=Oe(Be,_t,Wt,rn,Pr,te),Mn=!0),ur>se&&ar<=se&&(pe=Oe(Be,_t,Wt,rn,Pr,se),Mn=!0),!Ae&&Mn&&(Le&&(Be.end=Re+he*pe),J.push(Be),Be=ot(De)),Le&&(Re+=he)}let tt=De.length-3,xe=De[tt],ut=De[tt+1],It=_e===0?xe:ut;It>=te&&It<=se&&zt(Be,xe,ut,De[tt+2]),tt=Be.length-3,Ae&&tt>=3&&(Be[tt]!==Be[0]||Be[tt+1]!==Be[1])&&zt(Be,Be[0],Be[1],Be[2]),Be.length&&J.push(Be)}function ot(De){let J=[];return J.size=De.size,J.start=De.start,J.end=De.end,J}function Lt(De,J,te,se,_e,Ae){for(let Le of De)at(Le,J,te,se,_e,Ae,!1)}function zt(De,J,te,se){De.push(J,te,se)}function Pt(De,J,te,se,_e,Ae){let Le=(Ae-J)/(se-J);return zt(De,Ae,te+(_e-te)*Le,1),Le}function $t(De,J,te,se,_e,Ae){let Le=(Ae-te)/(_e-te);return zt(De,J+(se-J)*Le,Ae,1),Le}function Xt(De,J){let te=[];for(let se=0;se<De.length;se++){let _e=De[se],Ae=_e.type,Le;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")Le=Gt(_e.geometry,J);else if(Ae==="MultiLineString"||Ae==="Polygon"){Le=[];for(let Be of _e.geometry)Le.push(Gt(Be,J))}else if(Ae==="MultiPolygon"){Le=[];for(let Be of _e.geometry){let Oe=[];for(let he of Be)Oe.push(Gt(he,J));Le.push(Oe)}}te.push(lt(_e.id,Ae,Le,_e.tags))}return te}function Gt(De,J){let te=[];te.size=De.size,De.start!==void 0&&(te.start=De.start,te.end=De.end);for(let se=0;se<De.length;se+=3)te.push(De[se]+J,De[se+1],De[se+2]);return te}function Sr(De,J){if(De.transformed)return De;let te=1<<De.z,se=De.x,_e=De.y;for(let Ae of De.features){let Le=Ae.geometry,Be=Ae.type;if(Ae.geometry=[],Be===1)for(let Oe=0;Oe<Le.length;Oe+=2)Ae.geometry.push(zr(Le[Oe],Le[Oe+1],J,te,se,_e));else for(let Oe=0;Oe<Le.length;Oe++){let he=[];for(let pe=0;pe<Le[Oe].length;pe+=2)he.push(zr(Le[Oe][pe],Le[Oe][pe+1],J,te,se,_e));Ae.geometry.push(he)}}return De.transformed=!0,De}function zr(De,J,te,se,_e,Ae){return[Math.round(te*(De*se-_e)),Math.round(te*(J*se-Ae))]}function vr(De,J,te,se,_e){let Ae=J===_e.maxZoom?0:_e.tolerance/((1<<J)*_e.extent),Le={features:[],numPoints:0,numSimplified:0,numFeatures:De.length,source:null,x:te,y:se,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Be of De)pr(Le,Be,Ae,_e);return Le}function pr(De,J,te,se){let _e=J.geometry,Ae=J.type,Le=[];if(De.minX=Math.min(De.minX,J.minX),De.minY=Math.min(De.minY,J.minY),De.maxX=Math.max(De.maxX,J.maxX),De.maxY=Math.max(De.maxY,J.maxY),Ae==="Point"||Ae==="MultiPoint")for(let Be=0;Be<_e.length;Be+=3)Le.push(_e[Be],_e[Be+1]),De.numPoints++,De.numSimplified++;else if(Ae==="LineString")dr(Le,_e,De,te,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let Be=0;Be<_e.length;Be++)dr(Le,_e[Be],De,te,Ae==="Polygon",Be===0);else if(Ae==="MultiPolygon")for(let Be=0;Be<_e.length;Be++){let Oe=_e[Be];for(let he=0;he<Oe.length;he++)dr(Le,Oe[he],De,te,!0,he===0)}if(Le.length){let Be=J.tags||null;if(Ae==="LineString"&&se.lineMetrics){Be={};for(let he in J.tags)Be[he]=J.tags[he];Be.mapbox_clip_start=_e.start/_e.size,Be.mapbox_clip_end=_e.end/_e.size}let Oe={geometry:Le,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:Be};J.id!==null&&(Oe.id=J.id),De.features.push(Oe)}}function dr(De,J,te,se,_e,Ae){let Le=se*se;if(se>0&&J.size<(_e?Le:se))return void(te.numPoints+=J.length/3);let Be=[];for(let Oe=0;Oe<J.length;Oe+=3)(se===0||J[Oe+2]>Le)&&(te.numSimplified++,Be.push(J[Oe],J[Oe+1])),te.numPoints++;_e&&function(Oe,he){let pe=0;for(let Re=0,tt=Oe.length,xe=tt-2;Re<tt;xe=Re,Re+=2)pe+=(Oe[Re]-Oe[xe])*(Oe[Re+1]+Oe[xe+1]);if(pe>0===he)for(let Re=0,tt=Oe.length;Re<tt/2;Re+=2){let xe=Oe[Re],ut=Oe[Re+1];Oe[Re]=Oe[tt-2-Re],Oe[Re+1]=Oe[tt-1-Re],Oe[tt-2-Re]=xe,Oe[tt-1-Re]=ut}}(Be,Ae),De.push(Be)}let wr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class un{constructor(J,te){let se=(te=this.options=function(Ae,Le){for(let Be in Le)Ae[Be]=Le[Be];return Ae}(Object.create(wr),te)).debug;if(se&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let _e=function(Ae,Le){let Be=[];if(Ae.type==="FeatureCollection")for(let Oe=0;Oe<Ae.features.length;Oe++)dt(Be,Ae.features[Oe],Le,Oe);else dt(Be,Ae.type==="Feature"?Ae:{geometry:Ae},Le);return Be}(J,te);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=function(Ae,Le){let Be=Le.buffer/Le.extent,Oe=Ae,he=Ze(Ae,1,-1-Be,Be,0,-1,2,Le),pe=Ze(Ae,1,1-Be,2+Be,0,-1,2,Le);return(he||pe)&&(Oe=Ze(Ae,1,-Be,1+Be,0,-1,2,Le)||[],he&&(Oe=Xt(he,1).concat(Oe)),pe&&(Oe=Oe.concat(Xt(pe,-1)))),Oe}(_e,te),_e.length&&this.splitTile(_e,0,0,0),se&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,te,se,_e,Ae,Le,Be){let Oe=[J,te,se,_e],he=this.options,pe=he.debug;for(;Oe.length;){_e=Oe.pop(),se=Oe.pop(),te=Oe.pop(),J=Oe.pop();let Re=1<<te,tt=Sn(te,se,_e),xe=this.tiles[tt];if(!xe&&(pe>1&&console.time("creation"),xe=this.tiles[tt]=vr(J,te,se,_e,he),this.tileCoords.push({z:te,x:se,y:_e}),pe)){pe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,se,_e,xe.numFeatures,xe.numPoints,xe.numSimplified),console.timeEnd("creation"));let Mn=`z${te}`;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(xe.source=J,Ae==null){if(te===he.indexMaxZoom||xe.numPoints<=he.indexMaxPoints)continue}else{if(te===he.maxZoom||te===Ae)continue;if(Ae!=null){let Mn=Ae-te;if(se!==Le>>Mn||_e!==Be>>Mn)continue}}if(xe.source=null,J.length===0)continue;pe>1&&console.time("clipping");let ut=.5*he.buffer/he.extent,It=.5-ut,ft=.5+ut,_t=1+ut,Wt=null,Tr=null,rn=null,Pr=null,ar=Ze(J,Re,se-ut,se+ft,0,xe.minX,xe.maxX,he),ur=Ze(J,Re,se+It,se+_t,0,xe.minX,xe.maxX,he);J=null,ar&&(Wt=Ze(ar,Re,_e-ut,_e+ft,1,xe.minY,xe.maxY,he),Tr=Ze(ar,Re,_e+It,_e+_t,1,xe.minY,xe.maxY,he),ar=null),ur&&(rn=Ze(ur,Re,_e-ut,_e+ft,1,xe.minY,xe.maxY,he),Pr=Ze(ur,Re,_e+It,_e+_t,1,xe.minY,xe.maxY,he),ur=null),pe>1&&console.timeEnd("clipping"),Oe.push(Wt||[],te+1,2*se,2*_e),Oe.push(Tr||[],te+1,2*se,2*_e+1),Oe.push(rn||[],te+1,2*se+1,2*_e),Oe.push(Pr||[],te+1,2*se+1,2*_e+1)}}getTile(J,te,se){J=+J,te=+te,se=+se;let _e=this.options,{extent:Ae,debug:Le}=_e;if(J<0||J>24)return null;let Be=1<<J,Oe=Sn(J,te=te+Be&Be-1,se);if(this.tiles[Oe])return Sr(this.tiles[Oe],Ae);Le>1&&console.log("drilling down to z%d-%d-%d",J,te,se);let he,pe=J,Re=te,tt=se;for(;!he&&pe>0;)pe--,Re>>=1,tt>>=1,he=this.tiles[Sn(pe,Re,tt)];return he&&he.source?(Le>1&&(console.log("found parent tile z%d-%d-%d",pe,Re,tt),console.time("drilling down")),this.splitTile(he.source,pe,Re,tt,J,te,se),Le>1&&console.timeEnd("drilling down"),this.tiles[Oe]?Sr(this.tiles[Oe],Ae):null):null}}function Sn(De,J,te){return 32*((1<<De)*te+J)+De}class Nn extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,te){return i._(this,void 0,void 0,function*(){let se=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let _e=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!_e)return null;let Ae=new D(_e.features,{version:2,extent:i.$}),Le=function(Be){let Oe=new i.cM;return function(he,pe){for(let Re in he.layers)pe.writeMessage(3,F,he.layers[Re])}(Be,Oe),Oe.finish()}(Ae);return Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),{vectorTile:Ae,rawData:Le.buffer}})}loadData(J){return i._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();let se=!!(J&&J.request&&J.request.collectResourceTiming)&&new i.cN(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest);let _e=yield this._pendingData;this._geoJSONIndex=J.cluster?new be(function({superclusterOptions:Le,clusterProperties:Be}){if(!Be||!Le)return Le;let Oe={},he={},pe={accumulated:null,zoom:0},Re={properties:null},tt=Object.keys(Be);for(let xe of tt){let[ut,It]=Be[xe],ft=i.cT(It),_t=i.cT(typeof ut=="string"?[ut,["accumulated"],["get",xe]]:ut);Oe[xe]=ft.value,he[xe]=_t.value}return Le.map=xe=>{Re.properties=xe;let ut={};for(let It of tt)ut[It]=Oe[It].evaluate(pe,Re);return ut},Le.reduce=(xe,ut)=>{Re.properties=ut;for(let It of tt)pe.accumulated=xe[It],xe[It]=he[It].evaluate(pe,Re)},Le}(J)).load(_e.features):function(Le,Be){return new un(Le,Be)}(_e,J.geojsonVtOptions),this.loaded={};let Ae={data:_e};if(se){let Le=se.finish();Le&&(Ae.resourceTiming={},Ae.resourceTiming[J.source]=JSON.parse(JSON.stringify(Le)))}return Ae}catch(_e){if(delete this._pendingRequest,i.cy(_e))return{abandoned:!0};throw _e}})}getData(){return i._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){let te=this.loaded;return te&&te[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,te){return i._(this,void 0,void 0,function*(){let se=yield this.loadGeoJSON(J,te);if(delete this._pendingRequest,typeof se!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(N(se,!0),J.filter){let _e=i.cT(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));se={type:"FeatureCollection",features:se.features.filter(Le=>_e.value.evaluate({zoom:0},Le))}}return se})}loadGeoJSON(J,te){return i._(this,void 0,void 0,function*(){let{promoteId:se}=J;if(J.request){let _e=yield i.j(J.request,te);return this._dataUpdateable=i.cV(_e.data,se)?i.cU(_e.data,se):void 0,_e.data}if(typeof J.data=="string")try{let _e=JSON.parse(J.data);return this._dataUpdateable=i.cV(_e,se)?i.cU(_e,se):void 0,_e}catch(_e){throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return i.cW(this._dataUpdateable,J.dataDiff,se),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return i._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class _i{constructor(J){this.self=J,this.actor=new i.J(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,se)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=se},this.self.addProtocol=i.cA,this.self.removeProtocol=i.cB,this.self.registerRTLTextPlugin=te=>{i.cX.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,se)=>this._getDEMWorkerSource(te,se.source).loadTile(se)),this.actor.registerMessageHandler("RDT",(te,se)=>i._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,se.source).removeTile(se)})),this.actor.registerMessageHandler("GCEZ",(te,se)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(te,se.type,se.source).getClusterExpansionZoom(se)})),this.actor.registerMessageHandler("GCC",(te,se)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(te,se.type,se.source).getClusterChildren(se)})),this.actor.registerMessageHandler("GCL",(te,se)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(te,se.type,se.source).getClusterLeaves(se)})),this.actor.registerMessageHandler("LD",(te,se)=>this._getWorkerSource(te,se.type,se.source).loadData(se)),this.actor.registerMessageHandler("GD",(te,se)=>this._getWorkerSource(te,se.type,se.source).getData()),this.actor.registerMessageHandler("LT",(te,se)=>this._getWorkerSource(te,se.type,se.source).loadTile(se)),this.actor.registerMessageHandler("RT",(te,se)=>this._getWorkerSource(te,se.type,se.source).reloadTile(se)),this.actor.registerMessageHandler("AT",(te,se)=>this._getWorkerSource(te,se.type,se.source).abortTile(se)),this.actor.registerMessageHandler("RMT",(te,se)=>this._getWorkerSource(te,se.type,se.source).removeTile(se)),this.actor.registerMessageHandler("RS",(te,se)=>i._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][se.type]||!this.workerSources[te][se.type][se.source])return;let _e=this.workerSources[te][se.type][se.source];delete this.workerSources[te][se.type][se.source],_e.removeSource!==void 0&&_e.removeSource(se)})),this.actor.registerMessageHandler("RM",te=>i._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})),this.actor.registerMessageHandler("SR",(te,se)=>i._(this,void 0,void 0,function*(){this.referrer=se})),this.actor.registerMessageHandler("SRPS",(te,se)=>this._syncRTLPluginState(te,se)),this.actor.registerMessageHandler("IS",(te,se)=>i._(this,void 0,void 0,function*(){this.self.importScripts(se)})),this.actor.registerMessageHandler("SI",(te,se)=>this._setImages(te,se)),this.actor.registerMessageHandler("UL",(te,se)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(se.layers,se.removedIds)})),this.actor.registerMessageHandler("SL",(te,se)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(se)}))}_setImages(J,te){return i._(this,void 0,void 0,function*(){this.availableImages[J]=te;for(let se in this.workerSources[J]){let _e=this.workerSources[J][se];for(let Ae in _e)_e[Ae].availableImages=te}})}_syncRTLPluginState(J,te){return i._(this,void 0,void 0,function*(){return yield i.cX.syncState(te,this.self.importScripts)})}_getAvailableImages(J){let te=this.availableImages[J];return te||(te=[]),te}_getLayerIndex(J){let te=this.layerIndexes[J];return te||(te=this.layerIndexes[J]=new o),te}_getWorkerSource(J,te,se){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][te]||(this.workerSources[J][te]={}),!this.workerSources[J][te][se]){let _e={sendAsync:(Ae,Le)=>(Ae.targetMapId=J,this.actor.sendAsync(Ae,Le))};switch(te){case"vector":this.workerSources[J][te][se]=new v(_e,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][te][se]=new Nn(_e,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][te][se]=new this.externalWorkerSourceTypes[te](_e,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][te][se]}_getDEMWorkerSource(J,te){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][te]||(this.demWorkerSources[J][te]=new x),this.demWorkerSources[J][te]}}return i.i(self)&&(self.worker=new _i(self)),_i}),r("index",["exports","./shared"],function(i,o){"use strict";var l="5.7.1";function f(){var w=new o.A(4);return o.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let d,v,x={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,a,h){let g=requestAnimationFrame(E=>{_(),a(E)}),{unsubscribe:_}=o.s(w.signal,"abort",()=>{_(),cancelAnimationFrame(g),h(o.c())},!1)},frameAsync(w){return new Promise((a,h)=>{this.frame(w,a,h)})},getImageData(w,a=0){return this.getImageCanvasContext(w).getImageData(-a,-a,w.width+2*a,w.height+2*a)},getImageCanvasContext(w){let a=window.document.createElement("canvas"),h=a.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return a.width=w.width,a.height=w.height,h.drawImage(w,0,0,w.width,w.height),h},resolveURL:w=>(d||(d=document.createElement("a")),d.href=w,d.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class b{static testProp(a){if(!b.docStyle)return a[0];for(let h=0;h<a.length;h++)if(a[h]in b.docStyle)return a[h];return a[0]}static create(a,h,g){let _=window.document.createElement(a);return h!==void 0&&(_.className=h),g&&g.appendChild(_),_}static createNS(a,h){return window.document.createElementNS(a,h)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(a,h){a.style[b.transformProp]=h}static addEventListener(a,h,g,_={}){a.addEventListener(h,g,"passive"in _?_:_.capture)}static removeEventListener(a,h,g,_={}){a.removeEventListener(h,g,"passive"in _?_:_.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static getScale(a){let h=a.getBoundingClientRect();return{x:h.width/a.offsetWidth||1,y:h.height/a.offsetHeight||1,boundingClientRect:h}}static getPoint(a,h,g){let _=h.boundingClientRect;return new o.P((g.clientX-_.left)/h.x-a.clientLeft,(g.clientY-_.top)/h.y-a.clientTop)}static mousePos(a,h){let g=b.getScale(a);return b.getPoint(a,g,h)}static touchPos(a,h){let g=[],_=b.getScale(a);for(let E=0;E<h.length;E++)g.push(b.getPoint(a,_,h[E]));return g}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){let h=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),g=h.querySelectorAll("script");for(let _ of g)_.remove();return b.clean(h),h.innerHTML}static isPossiblyDangerous(a,h){let g=h.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!g.includes("javascript:")&&!g.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){let h=a.children;for(let g of h)b.removeAttributes(g),b.clean(g)}static removeAttributes(a){for(let{name:h,value:g}of a.attributes)b.isPossiblyDangerous(h,g)&&a.removeAttribute(h)}}b.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);let A={supported:!1,testSupport:function(w){!j&&N&&(D?F(w):P=w)}},P,N,j=!1,D=!1;function F(w){let a=w.createTexture();w.bindTexture(w.TEXTURE_2D,a);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,N),w.isContextLost())return;A.supported=!0}catch(h){}w.deleteTexture(a),j=!0}var U;typeof document!="undefined"&&(N=document.createElement("img"),N.onload=()=>{P&&F(P),P=null,D=!0},N.onerror=()=>{j=!0,P=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let a,h,g,_;w.resetRequestQueue=()=>{a=[],h=0,g=0,_={}},w.addThrottleControl=k=>{let B=g++;return _[B]=k,B},w.removeThrottleControl=k=>{delete _[k],M()},w.getImage=(k,B,V=!0)=>new Promise((W,H)=>{A.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),o.e(k,{type:"image"}),a.push({abortController:B,requestParameters:k,supportImageRefresh:V,state:"queued",onError:K=>{H(K)},onSuccess:K=>{W(K)}}),M()});let E=k=>o._(this,void 0,void 0,function*(){k.state="running";let{requestParameters:B,supportImageRefresh:V,onError:W,onSuccess:H,abortController:K}=k,ee=V===!1&&!o.i(self)&&!o.g(B.url)&&(!B.headers||Object.keys(B.headers).reduce((fe,ve)=>fe&&ve==="accept",!0));h++;let ce=ee?L(B,K):o.m(B,K);try{let fe=yield ce;delete k.abortController,k.state="completed",fe.data instanceof HTMLImageElement||o.b(fe.data)?H(fe):fe.data&&H({data:yield(ue=fe.data,typeof createImageBitmap=="function"?o.f(ue):o.h(ue)),cacheControl:fe.cacheControl,expires:fe.expires})}catch(fe){delete k.abortController,W(fe)}finally{h--,M()}var ue}),M=()=>{let k=(()=>{for(let B of Object.keys(_))if(_[B]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=h;B<k&&a.length>0;B++){let V=a.shift();V.abortController.signal.aborted?B--:E(V)}},L=(k,B)=>new Promise((V,W)=>{let H=new Image,K=k.url,ee=k.credentials;ee&&ee==="include"?H.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!o.d(K))&&(H.crossOrigin="anonymous"),B.signal.addEventListener("abort",()=>{H.src="",W(o.c())}),H.fetchPriority="high",H.onload=()=>{H.onerror=H.onload=null,V({data:H})},H.onerror=()=>{H.onerror=H.onload=null,B.signal.aborted||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},H.src=K})}(U||(U={})),U.resetRequestQueue();class ${constructor(a){this._transformRequestFn=a!=null?a:null}transformRequest(a,h){return this._transformRequestFn&&this._transformRequestFn(a,h)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function Z(w){let a=[];if(typeof w=="string")a.push({id:"default",url:w});else if(w&&w.length>0){let h=[];for(let{id:g,url:_}of w){let E=`${g}${_}`;h.indexOf(E)===-1&&(h.push(E),a.push({id:g,url:_}))}}return a}function ie(w,a,h){try{let g=new URL(w);return g.pathname+=`${a}${h}`,g.toString()}catch(g){throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ne(w){let{userImage:a}=w;return!!(a&&a.render&&a.render())&&(w.data.replace(new Uint8Array(a.data.buffer)),!0)}class ae extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(let{ids:h,promiseResolve:g}of this.requestors)g(this._getImagesForIds(h));this.requestors=[]}}getImage(a){let h=this.images[a];if(h&&!h.data&&h.spriteData){let g=h.spriteData;h.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),h.spriteData=null}return h}addImage(a,h){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,h)&&(this.images[a]=h)}_validate(a,h){let g=!0,_=h.data||h.spriteData;return this._validateStretch(h.stretchX,_&&_.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),g=!1),this._validateStretch(h.stretchY,_&&_.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),g=!1),this._validateContent(h.content,h)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),g=!1),g}_validateStretch(a,h){if(!a)return!0;let g=0;for(let _ of a){if(_[0]<g||_[1]<_[0]||h<_[1])return!1;g=_[1]}return!0}_validateContent(a,h){if(!a)return!0;if(a.length!==4)return!1;let g=h.spriteData,_=g&&g.width||h.data.width,E=g&&g.height||h.data.height;return!(a[0]<0||_<a[0]||a[1]<0||E<a[1]||a[2]<0||_<a[2]||a[3]<0||E<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,h,g=!0){let _=this.getImage(a);if(g&&(_.data.width!==h.data.width||_.data.height!==h.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=_.version+1,this.images[a]=h,this.updatedImages[a]=!0}removeImage(a){let h=this.images[a];delete this.images[a],delete this.patterns[a],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((h,g)=>{let _=!0;if(!this.isLoaded())for(let E of a)this.images[E]||(_=!1);this.isLoaded()||_?h(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:h})})}_getImagesForIds(a){let h={};for(let g of a){let _=this.getImage(g);_||(this.fire(new o.l("styleimagemissing",{id:g})),_=this.getImage(g)),_?h[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){let{width:a,height:h}=this.atlasImage;return{width:a,height:h}}getPattern(a){let h=this.patterns[a],g=this.getImage(a);if(!g)return null;if(h&&h.position.version===g.version)return h.position;if(h)h.position.version=g.version;else{let _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},E=new o.I(_,g);this.patterns[a]={bin:_,position:E}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){let h=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(a,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){let a=[];for(let E in this.patterns)a.push(this.patterns[E].bin);let{w:h,h:g}=o.p(a),_=this.atlasImage;_.resize({width:h||1,height:g||1});for(let E in this.patterns){let{bin:M}=this.patterns[E],L=M.x+1,k=M.y+1,B=this.getImage(E).data,V=B.width,W=B.height;o.R.copy(B,_,{x:0,y:0},{x:L,y:k},{width:V,height:W}),o.R.copy(B,_,{x:0,y:W-1},{x:L,y:k-1},{width:V,height:1}),o.R.copy(B,_,{x:0,y:0},{x:L,y:k+W},{width:V,height:1}),o.R.copy(B,_,{x:V-1,y:0},{x:L-1,y:k},{width:1,height:W}),o.R.copy(B,_,{x:0,y:0},{x:L+V,y:k},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(let h of a){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;let g=this.getImage(h);g||o.w(`Image with ID: "${h}" was not found`),ne(g)&&this.updateImage(h,g)}}}let ye=1e20;function ge(w,a,h,g,_,E,M,L,k){for(let B=a;B<a+g;B++)de(w,h*E+B,E,_,M,L,k);for(let B=h;B<h+_;B++)de(w,B*E+a,1,g,M,L,k)}function de(w,a,h,g,_,E,M){E[0]=0,M[0]=-ye,M[1]=ye,_[0]=w[a];for(let L=1,k=0,B=0;L<g;L++){_[L]=w[a+L*h];let V=L*L;do{let W=E[k];B=(_[L]-_[W]+V-W*W)/(L-W)/2}while(B<=M[k]&&--k>-1);k++,E[k]=L,M[k]=B,M[k+1]=ye}for(let L=0,k=0;L<g;L++){for(;M[k+1]<L;)k++;let B=E[k],V=L-B;w[a+L*h]=_[B]+V*V}}class be{constructor(a,h,g){this.requestManager=a,this.localIdeographFontFamily=h,this.entries={},this.lang=g}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){let h=[];for(let E in a)for(let M of a[E])h.push(this._getAndCacheGlyphsPromise(E,M));let g=yield Promise.all(h),_={};for(let{stack:E,id:M,glyph:L}of g)_[E]||(_[E]={}),_[E][M]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};return _})}_getAndCacheGlyphsPromise(a,h){return o._(this,void 0,void 0,function*(){let g=this.entries[a];g||(g=this.entries[a]={glyphs:{},requests:{},ranges:{}});let _=g.glyphs[h];if(_!==void 0)return{stack:a,id:h,glyph:_};if(_=this._tinySDF(g,a,h),_)return g.glyphs[h]=_,{stack:a,id:h,glyph:_};let E=Math.floor(h/256);if(256*E>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[E])return{stack:a,id:h,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[E]){let L=be.loadGlyphRange(a,E,this.url,this.requestManager);g.requests[E]=L}let M=yield g.requests[E];for(let L in M)this._doesCharSupportLocalGlyph(+L)||(g.glyphs[+L]=M[+L]);return g.ranges[E]=!0,{stack:a,id:h,glyph:M[h]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,h,g){let _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(g))return;let E=a.tinySDF;if(!E){let L="400";/bold/i.test(h)?L="900":/medium/i.test(h)?L="500":/light/i.test(h)&&(L="200"),E=a.tinySDF=new be.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:L})}let M=E.draw(String.fromCharCode(g));return{id:g,bitmap:new o.q({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}be.loadGlyphRange=function(w,a,h,g){return o._(this,void 0,void 0,function*(){let _=256*a,E=_+255,M=g.transformRequest(h.replace("{fontstack}",w).replace("{range}",`${_}-${E}`),"Glyphs"),L=yield o.n(M,new AbortController);if(!L||!L.data)throw new Error(`Could not load glyph range. range: ${a}, ${_}-${E}`);let k={};for(let B of o.o(L.data))k[B.id]=B;return k})},be.TinySDF=class{constructor({fontSize:w=24,buffer:a=3,radius:h=8,cutoff:g=.25,fontFamily:_="sans-serif",fontWeight:E="normal",fontStyle:M="normal",lang:L=null}={}){this.buffer=a,this.cutoff=g,this.radius=h,this.lang=L;let k=this.size=w+4*a,B=this._createCanvas(k),V=this.ctx=B.getContext("2d",{willReadFrequently:!0});V.font=`${M} ${E} ${w}px ${_}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(w){let a=document.createElement("canvas");return a.width=a.height=w,a}draw(w){let{width:a,actualBoundingBoxAscent:h,actualBoundingBoxDescent:g,actualBoundingBoxLeft:_,actualBoundingBoxRight:E}=this.ctx.measureText(w),M=Math.ceil(h),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-_))),k=Math.min(this.size-this.buffer,M+Math.ceil(g)),B=L+2*this.buffer,V=k+2*this.buffer,W=Math.max(B*V,0),H=new Uint8ClampedArray(W),K={data:H,width:B,height:V,glyphWidth:L,glyphHeight:k,glyphTop:M,glyphLeft:0,glyphAdvance:a};if(L===0||k===0)return K;let{ctx:ee,buffer:ce,gridInner:ue,gridOuter:fe}=this;this.lang&&(ee.lang=this.lang),ee.clearRect(ce,ce,L,k),ee.fillText(w,ce,ce+M);let ve=ee.getImageData(ce,ce,L,k);fe.fill(ye,0,W),ue.fill(0,0,W);for(let Se=0;Se<k;Se++)for(let we=0;we<L;we++){let Ie=ve.data[4*(Se*L+we)+3]/255;if(Ie===0)continue;let Pe=(Se+ce)*B+we+ce;if(Ie===1)fe[Pe]=0,ue[Pe]=ye;else{let Ee=.5-Ie;fe[Pe]=Ee>0?Ee*Ee:0,ue[Pe]=Ee<0?Ee*Ee:0}}ge(fe,0,0,B,V,B,this.f,this.v,this.z),ge(ue,ce,ce,L,k,B,this.f,this.v,this.z);for(let Se=0;Se<W;Se++){let we=Math.sqrt(fe[Se])-Math.sqrt(ue[Se]);H[Se]=Math.round(255-255*(we/this.radius+this.cutoff))}return K}};class Ne{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,h){return o.B(a.expression.evaluate(h))}interpolate(a,h,g){return{x:o.C.number(a.x,h.x,g),y:o.C.number(a.y,h.y,g),z:o.C.number(a.z,h.z,g)}}}let Me;class ke extends o.E{constructor(a){super(),Me=Me||new o.r({anchor:new o.D(o.v.light.anchor),position:new Ne,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(Me),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,h={}){if(!this._validate(o.x,a,h))for(let g in a){let _=a[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,g){return(!g||g.validate!==!1)&&o.y(this,a.call(o.z,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let He=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Ke extends o.E{constructor(a){super(),this._transitionable=new o.t(He),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(a,h={}){if(!this._validate(o.G,a,h)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let g in a){let _=a[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,g={}){return(g==null?void 0:g.validate)!==!1&&o.y(this,a.call(o.z,o.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Je{constructor(a,h){this.width=a,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,h){let g=a.join(",")+String(h);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(a,h)),this.dashEntry[g]}getDashRanges(a,h,g){let _=[],E=a.length%2==1?-a[a.length-1]*g:0,M=a[0]*g,L=!0;_.push({left:E,right:M,isDash:L,zeroLength:a[0]===0});let k=a[0];for(let B=1;B<a.length;B++){L=!L;let V=a[B];E=k*g,k+=V,M=k*g,_.push({left:E,right:M,isDash:L,zeroLength:V===0})}return _}addRoundDash(a,h,g){let _=h/2;for(let E=-g;E<=g;E++){let M=this.width*(this.nextRow+g+E),L=0,k=a[L];for(let B=0;B<this.width;B++){B/k.right>1&&(k=a[++L]);let V=Math.abs(B-k.left),W=Math.abs(B-k.right),H=Math.min(V,W),K,ee=E/g*(_+1);if(k.isDash){let ce=_-Math.abs(ee);K=Math.sqrt(H*H+ce*ce)}else K=_-Math.sqrt(H*H+ee*ee);this.data[M+B]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(a){for(let L=a.length-1;L>=0;--L){let k=a[L],B=a[L+1];k.zeroLength?a.splice(L,1):B&&B.isDash===k.isDash&&(B.left=k.left,a.splice(L,1))}let h=a[0],g=a[a.length-1];h.isDash===g.isDash&&(h.left=g.left-this.width,g.right=h.right+this.width);let _=this.width*this.nextRow,E=0,M=a[E];for(let L=0;L<this.width;L++){L/M.right>1&&(M=a[++E]);let k=Math.abs(L-M.left),B=Math.abs(L-M.right),V=Math.min(k,B);this.data[_+L]=Math.max(0,Math.min(255,(M.isDash?V:-V)+128))}}addDash(a,h){let g=h?7:0,_=2*g+1;if(this.nextRow+_>this.height)return o.w("LineAtlas out of space"),null;let E=0;for(let L=0;L<a.length;L++)E+=a[L];if(E!==0){let L=this.width/E,k=this.getDashRanges(a,this.width,L);h?this.addRoundDash(k,L,g):this.addRegularDash(k)}let M={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:E};return this.nextRow+=_,this.dirty=!0,M}bind(a){let h=a.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}let We="maplibre_preloaded_worker_pool";class lt{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[We]}numActive(){return Object.keys(this.active).length}}let pt=Math.floor(x.hardwareConcurrency/2),dt,ze;function Dt(){return dt||(dt=new lt),dt}lt.workerCount=o.H(globalThis)?Math.max(Math.min(pt,3),1):1;class Ot{constructor(a,h){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=h;let g=this.workerPool.acquire(h);for(let _=0;_<g.length;_++){let E=new o.J(g[_],h);E.name=`Worker ${_}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,h){let g=[];for(let _ of this.actors)g.push(_.sendAsync({type:a,data:h}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,h){for(let g of this.actors)g.registerMessageHandler(a,h)}}function Ue(){return ze||(ze=new Ot(Dt(),o.K),ze.registerMessageHandler("GR",(w,a,h)=>o.m(a,h))),ze}function nt(w,a){let h=o.L();return o.M(h,h,[1,1,0]),o.N(h,h,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?o.O(h,h,w.calculatePosMatrix(a.toUnwrapped())):h}function Ze(w,a,h,g,_,E,M){var L;let k=function(H,K,ee){if(H)for(let ce of H){let ue=K[ce];if(ue&&ue.source===ee&&ue.type==="fill-extrusion")return!0}else for(let ce in K){let ue=K[ce];if(ue.source===ee&&ue.type==="fill-extrusion")return!0}return!1}((L=_==null?void 0:_.layers)!==null&&L!==void 0?L:null,a,w.id),B=E.maxPitchScaleFactor(),V=w.tilesIn(g,B,k);V.sort(rt);let W=[];for(let H of V)W.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(a,h,w._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,_,E,B,nt(w.transform,H.tileID),M?(K,ee)=>M(H.tileID,K,ee):void 0)});return function(H,K){for(let ee in H)for(let ce of H[ee])at(ce,K);return H}(function(H){let K={},ee={};for(let ce of H){let ue=ce.queryResults,fe=ce.wrappedTileID,ve=ee[fe]=ee[fe]||{};for(let Se in ue){let we=ue[Se],Ie=ve[Se]=ve[Se]||{},Pe=K[Se]=K[Se]||[];for(let Ee of we)Ie[Ee.featureIndex]||(Ie[Ee.featureIndex]=!0,Pe.push(Ee))}}return K}(W),w)}function rt(w,a){let h=w.tileID,g=a.tileID;return h.overscaledZ-g.overscaledZ||h.canonical.y-g.canonical.y||h.wrap-g.wrap||h.canonical.x-g.canonical.x}function at(w,a){let h=w.feature,g=a.getFeatureState(h.layer["source-layer"],h.id);h.source=h.layer.source,h.layer["source-layer"]&&(h.sourceLayer=h.layer["source-layer"]),h.state=g}function ot(w,a,h){return o._(this,void 0,void 0,function*(){let g=w;if(w.url?g=(yield o.j(a.transformRequest(w.url,"Source"),h)).data:yield x.frameAsync(h),!g)return null;let _=o.Q(o.e(g,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(_.vectorLayerIds=g.vector_layers.map(E=>E.id)),_})}class Lt{constructor(a,h){a&&(h?this.setSouthWest(a).setNorthEast(h):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.S?new o.S(a.lng,a.lat):o.S.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.S?new o.S(a.lng,a.lat):o.S.convert(a),this}extend(a){let h=this._sw,g=this._ne,_,E;if(a instanceof o.S)_=a,E=a;else{if(!(a instanceof Lt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Lt.convert(a)):this.extend(o.S.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.S.convert(a)):this;if(_=a._sw,E=a._ne,!_||!E)return this}return h||g?(h.lng=Math.min(_.lng,h.lng),h.lat=Math.min(_.lat,h.lat),g.lng=Math.max(E.lng,g.lng),g.lat=Math.max(E.lat,g.lat)):(this._sw=new o.S(_.lng,_.lat),this._ne=new o.S(E.lng,E.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){let{lng:h,lat:g}=o.S.convert(a),_=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&_}static convert(a){return a instanceof Lt?a:a&&new Lt(a)}static fromLngLat(a,h=0){let g=360*h/40075017,_=g/Math.cos(Math.PI/180*a.lat);return new Lt(new o.S(a.lng-_,a.lat-g),new o.S(a.lng+_,a.lat+g))}adjustAntiMeridian(){let a=new o.S(this._sw.lng,this._sw.lat),h=new o.S(this._ne.lng,this._ne.lat);return new Lt(a,a.lng>h.lng?new o.S(h.lng+360,h.lat):h)}}class zt{constructor(a,h,g){this.bounds=Lt.convert(this.validateBounds(a)),this.minzoom=h||0,this.maxzoom=g||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){let h=Math.pow(2,a.z),g=Math.floor(o.V(this.bounds.getWest())*h),_=Math.floor(o.U(this.bounds.getNorth())*h),E=Math.ceil(o.V(this.bounds.getEast())*h),M=Math.ceil(o.U(this.bounds.getSouth())*h);return a.x>=g&&a.x<E&&a.y>=_&&a.y<M}}class Pt extends o.E{constructor(a,h,g,_){if(super(),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(h,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let a=yield ot(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new zt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){let h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(h,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};g.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((E,M)=>{a.reloadPromise={resolve:E,reject:M}})}else a.actor=this.dispatcher.getActor(),_="LT";a.abortController=new AbortController;try{let E=yield a.actor.sendAsync({type:_,data:g},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,E)}catch(E){if(delete a.abortController,a.aborted)return;if(E&&E.status!==404)throw E;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,h){if(h&&h.resourceTiming&&(a.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&a.setExpiryData(h),a.loadVectorData(h,this.map.painter),a.reloadPromise){let g=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(g.resolve).catch(g.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class $t extends o.E{constructor(a,h,g,_){super(),this.id=a,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},h),o.e(this,o.Q(h,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let h=yield ot(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,h&&(o.e(this,h),h.bounds&&(this.tileBounds=new zt(h.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(h){this._tileJSONRequest=null,this.fire(new o.k(h))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){let h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{let g=yield U.getImage(this.map._requestManager.transformRequest(h,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&(g.cacheControl||g.expires)&&a.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});let _=this.map.painter.context,E=_.gl,M=g.data;a.texture=this.map.painter.getTileTexture(M.width),a.texture?a.texture.update(M,{useMipmap:!0}):(a.texture=new o.T(_,M,E.RGBA,{useMipmap:!0}),a.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(g){if(delete a.abortController,a.aborted)a.state="unloaded";else if(g)throw a.state="errored",g}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class Xt extends $t{constructor(a,h,g,_){super(a,h,g,_),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){let h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(h,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{let _=yield U.getImage(g,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(_&&_.data){let E=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&a.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});let M=o.b(E)&&o.W()?E:yield this.readImageNow(E),L={type:this.type,uid:a.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();let k=yield a.actor.sendAsync({type:"LDT",data:L});a.dem=k,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(_){if(delete a.abortController,a.aborted)a.state="unloaded";else if(_)throw a.state="errored",_}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&o.X()){let h=a.width+2,g=a.height+2;try{return new o.R({width:h,height:g},yield o.Y(a,-1,-1,h,g))}catch(_){}}return x.getImageData(a,1)})}_getNeighboringTiles(a){let h=a.canonical,g=Math.pow(2,h.z),_=(h.x-1+g)%g,E=h.x===0?a.wrap-1:a.wrap,M=(h.x+1+g)%g,L=h.x+1===g?a.wrap+1:a.wrap,k={};return k[new o.Z(a.overscaledZ,E,h.z,_,h.y).key]={backfilled:!1},k[new o.Z(a.overscaledZ,L,h.z,M,h.y).key]={backfilled:!1},h.y>0&&(k[new o.Z(a.overscaledZ,E,h.z,_,h.y-1).key]={backfilled:!1},k[new o.Z(a.overscaledZ,a.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},k[new o.Z(a.overscaledZ,L,h.z,M,h.y-1).key]={backfilled:!1}),h.y+1<g&&(k[new o.Z(a.overscaledZ,E,h.z,_,h.y+1).key]={backfilled:!1},k[new o.Z(a.overscaledZ,a.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},k[new o.Z(a.overscaledZ,L,h.z,M,h.y+1).key]={backfilled:!1}),k}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class Gt extends o.E{constructor(a,h,g,_){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:h.data},this.actor=g.getActor(),this.setEventedParent(_),this._data=h.data,this._options=o.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId,h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(h.buffer!==void 0?h.buffer:128),tolerance:this._pixelsToTileUnits(h.tolerance!==void 0?h.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(h.clusterMaxZoom),minPoints:Math.max(2,h.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(h.clusterRadius||50),log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.$/this.tileSize)}_getClusterMaxZoom(a){let h=a?Math.round(a):this.maxzoom-1;return Number.isInteger(a)||a===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${a}" rounded to "${h}"`),h}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._pendingWorkerUpdate={data:a},this._updateWorkerData(),this}updateData(a){return this._pendingWorkerUpdate.diff=o.a0(this._pendingWorkerUpdate.diff,a),this._updateWorkerData(),this}getData(){return o._(this,void 0,void 0,function*(){let a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}getCoordinatesFromGeometry(a){return a.type==="GeometryCollection"?a.geometries.map(h=>h.coordinates).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){let a=new Lt,h=yield this.getData(),g;switch(h.type){case"FeatureCollection":g=h.features.map(_=>this.getCoordinatesFromGeometry(_.geometry)).flat(1/0);break;case"Feature":g=this.getCoordinatesFromGeometry(h.geometry);break;default:g=this.getCoordinatesFromGeometry(h)}if(g.length==0)return a;for(let _=0;_<g.length-1;_+=2)a.extend([g[_],g[_+1]]);return a})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(a.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,h,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:h,offset:g}})}_updateWorkerData(){return o._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;let{data:a,diff:h}=this._pendingWorkerUpdate;if(!a&&!h)return void o.w(`No data or diff provided to GeoJSONSource ${this.id}.`);let g=o.e({type:this.type},this.workerOptions);a?(typeof a=="string"?(g.request=this.map._requestManager.transformRequest(x.resolveURL(a),"Source"),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(a),this._pendingWorkerUpdate.data=void 0):h&&(g.dataDiff=h,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{let _=yield this.actor.sendAsync({type:"LD",data:g});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));this._data=_.data;let E=null;_.resourceTiming&&_.resourceTiming[this.id]&&(E=_.resourceTiming[this.id].slice(0));let M={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&o.e(M,{resourceTiming:E}),this.fire(new o.l("data",Object.assign(Object.assign({},M),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},M),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(a){return o._(this,void 0,void 0,function*(){let h=a.actor?"RT":"LT";a.actor=this.actor;let g={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};a.abortController=new AbortController;let _=yield this.actor.sendAsync({type:h,data:g},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(_,this.map.painter,h==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Sr extends o.E{constructor(a,h,g,_){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=g,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=h}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let h=yield U.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,a&&(this.coordinates=a),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,this.fire(new o.k(h))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;let h=a.map(o.a1.fromLngLat);var g;return this.tileID=function(_){let E=o.a2.fromPoints(_),M=E.width(),L=E.height(),k=Math.max(M,L),B=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),V=Math.pow(2,B);return new o.a4(B,Math.floor((E.minX+E.maxX)/2*V),Math.floor((E.minY+E.maxY)/2*V))}(h),this.terrainTileRanges=this._getOverlappingTileRanges(h),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=h.map(_=>this.tileID.getTilePoint(_)._round()),this.flippedWindingOrder=((g=this.tileCoords)[1].x-g[0].x)*(g[2].y-g[0].y)-(g[1].y-g[0].y)*(g[2].x-g[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let a=this.map.painter.context,h=a.gl;this.texture||(this.texture=new o.T(a,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let g=!1;for(let _ in this.tiles){let E=this.tiles[_];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){let{minX:h,minY:g,maxX:_,maxY:E}=o.a2.fromPoints(a),M={};for(let L=0;L<=o.a3;L++){let k=Math.pow(2,L),B=Math.floor(h*k),V=Math.floor(g*k),W=Math.floor(_*k),H=Math.floor(E*k);M[L]={minTileX:B,minTileY:V,maxTileX:W,maxTileY:H}}return M}}class zr extends Sr{constructor(a,h,g,_){super(a,h,g,_),this.roundZoom=!0,this.type="video",this.options=h}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;let a=this.options;this.urls=[];for(let h of a.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{let h=yield o.a5(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new o.k(h))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){let h=this.video.seekable;a<h.start(0)||a>h.end(0)?this.fire(new o.k(new o.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let a=this.map.painter.context,h=a.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(a,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let g=!1;for(let _ in this.tiles){let E=this.tiles[_];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class vr extends Sr{constructor(a,h,g,_){super(a,h,g,_),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(M=>typeof M!="number"))||this.fire(new o.k(new o.a6(`sources.${a}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new o.k(new o.a6(`sources.${a}`,null,"missing required property \"coordinates\""))),h.animate&&typeof h.animate!="boolean"&&this.fire(new o.k(new o.a6(`sources.${a}`,null,"optional \"animate\" property must be a boolean value"))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a6(`sources.${a}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new o.k(new o.a6(`sources.${a}`,null,"missing required property \"canvas\""))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let h=this.map.painter.context,g=h.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(h,this.canvas,g.RGBA,{premultiply:!0});let _=!1;for(let E in this.tiles){let M=this.tiles[E];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,_=!0)}_&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}let pr={},dr=w=>{switch(w){case"geojson":return Gt;case"image":return Sr;case"raster":return $t;case"raster-dem":return Xt;case"vector":return Pt;case"video":return zr;case"canvas":return vr}return pr[w]},wr="RTLPluginLoaded";class un extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ue()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(h=>{throw this.status="error",h})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(h,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(wr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Sn=null;function Nn(){return Sn||(Sn=new un),Sn}class _i{constructor(a,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a7(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){let h=a+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,h,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(_,E){let M={};if(!E)return M;for(let L of _){let k=L.layerIds.map(B=>E.getLayer(B)).filter(Boolean);if(k.length!==0){L.layers=k,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(B=>k.filter(V=>V.id===B)[0]));for(let B of k)M[B.id]=L}}return M}(a.buckets,h==null?void 0:h.style),this.hasSymbolBuckets=!1;for(let _ in this.buckets){let E=this.buckets[_];if(E instanceof o.a9){if(this.hasSymbolBuckets=!0,!g)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let _ in this.buckets){let E=this.buckets[_];if(E instanceof o.a9&&E.hasRTLText){this.hasRTLText=!0,Nn().lazyLoad();break}}this.queryPadding=0;for(let _ in this.buckets){let E=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(_).queryRadius(E))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a8}unloadVectorData(){for(let a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(let g in this.buckets){let _=this.buckets[g];_.uploadPending()&&_.upload(a)}let h=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(a,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(a,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,h,g,_,E,M,L,k,B,V,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:E,scale:M,tileSize:this.tileSize,pixelPosMatrix:V,transform:k,params:L,queryPadding:this.queryPadding*B,getElevation:W},a,h,g):{}}querySourceFeatures(a,h){let g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;let _=g.loadVTLayers(),E=h&&h.sourceLayer?h.sourceLayer:"",M=_._geojsonTileLayer||_[E];if(!M)return;let L=o.aa(h&&h.filter),{z:k,x:B,y:V}=this.tileID.canonical,W={z:k,x:B,y:V};for(let H=0;H<M.length;H++){let K=M.feature(H);if(L.needGeometry){let ue=o.ab(K,!0);if(!L.filter(new o.F(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!L.filter(new o.F(this.tileID.overscaledZ),K))continue;let ee=g.getId(K,E),ce=new o.ac(K,k,B,V,ee);ce.tile=W,a.push(ce)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){let h=this.expirationTime;if(a.cacheControl){let g=o.ad(a.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){let g=Date.now(),_=!1;if(this.expirationTime>g)_=!1;else if(h){if(this.expirationTime<h)_=!0;else{let E=this.expirationTime-h;E?this.expirationTime=g+Math.max(E,3e4):_=!0}}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;let g=this.latestFeatureIndex.loadVTLayers();for(let _ in this.buckets){if(!h.style.hasLayer(_))continue;let E=this.buckets[_],M=E.layers[0].sourceLayer||"_geojsonTileLayer",L=g[M],k=a[M];if(!L||!k||Object.keys(k).length===0)continue;E.update(k,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});let B=h&&h.style&&h.style.getLayer(_);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<x.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=x.now()+a}setDependencies(a,h){let g={};for(let _ of h)g[_]=!0;this.dependencies[a]=g}hasDependency(a,h){for(let g of a){let _=this.dependencies[g];if(_){for(let E of h)if(_[E])return!0}}return!1}}class De{constructor(a,h){this.max=a,this.onRemove=h,this.reset()}reset(){for(let a in this.data)for(let h of this.data[a])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(a,h,g){let _=a.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);let E={value:h,timeout:void 0};if(g!==void 0&&(E.timeout=setTimeout(()=>{this.remove(a,E)},g)),this.data[_].push(E),this.order.push(_),this.order.length>this.max){let M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){let h=this.data[a].shift();return h.timeout&&clearTimeout(h.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),h.value}getByKey(a){let h=this.data[a];return h?h[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,h){if(!this.has(a))return this;let g=a.wrapped().key,_=h===void 0?0:this.data[g].indexOf(h),E=this.data[g][_];return this.data[g].splice(_,1),E.timeout&&clearTimeout(E.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(E.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){let h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(a){let h=[];for(let g in this.data)for(let _ of this.data[g])a(_.value)||h.push(_);for(let g of h)this.remove(g.value.tileID,g)}}class J{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,h,g){let _=String(h);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][_]=this.stateChanges[a][_]||{},o.e(this.stateChanges[a][_],g),this.deletedStates[a]===null){this.deletedStates[a]={};for(let E in this.state[a])E!==_&&(this.deletedStates[a][E]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][_]===null){this.deletedStates[a][_]={};for(let E in this.state[a][_])g[E]||(this.deletedStates[a][_][E]=null)}else for(let E in g)this.deletedStates[a]&&this.deletedStates[a][_]&&this.deletedStates[a][_][E]===null&&delete this.deletedStates[a][_][E]}removeFeatureState(a,h,g){if(this.deletedStates[a]===null)return;let _=String(h);if(this.deletedStates[a]=this.deletedStates[a]||{},g&&h!==void 0)this.deletedStates[a][_]!==null&&(this.deletedStates[a][_]=this.deletedStates[a][_]||{},this.deletedStates[a][_][g]=null);else if(h!==void 0){if(this.stateChanges[a]&&this.stateChanges[a][_])for(g in this.deletedStates[a][_]={},this.stateChanges[a][_])this.deletedStates[a][_][g]=null;else this.deletedStates[a][_]=null;}else this.deletedStates[a]=null}getState(a,h){let g=String(h),_=o.e({},(this.state[a]||{})[g],(this.stateChanges[a]||{})[g]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){let E=this.deletedStates[a][h];if(E===null)return{};for(let M in E)delete _[M]}return _}initializeTileState(a,h){a.setFeatureState(this.state,h)}coalesceChanges(a,h){let g={};for(let _ in this.stateChanges){this.state[_]=this.state[_]||{};let E={};for(let M in this.stateChanges[_])this.state[_][M]||(this.state[_][M]={}),o.e(this.state[_][M],this.stateChanges[_][M]),E[M]=this.state[_][M];g[_]=E}for(let _ in this.deletedStates){this.state[_]=this.state[_]||{};let E={};if(this.deletedStates[_]===null)for(let M in this.state[_])E[M]={},this.state[_][M]={};else for(let M in this.deletedStates[_]){if(this.deletedStates[_][M]===null)this.state[_][M]={};else for(let L of Object.keys(this.deletedStates[_][M]))delete this.state[_][M][L];E[M]=this.state[_][M]}g[_]=g[_]||{},o.e(g[_],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(let _ in a)a[_].setFeatureState(g,h)}}let te=89.25;function se(w,a){let h=o.ah(a.lat,-o.ai,o.ai);return new o.P(o.V(a.lng)*w,o.U(h)*w)}function _e(w,a){return new o.a1(a.x/w,a.y/w).toLngLat()}function Ae(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(o.ae(90-w.pitch)),Math.tan(o.ae(te-w.pitch)))}function Le(w,a){let h=w.canonical,g=a/o.af(h.z),_=h.x+Math.pow(2,h.z)*w.wrap,E=o.ag(new Float64Array(16));return o.M(E,E,[_*g,h.y*g,0]),o.N(E,E,[g/o.$,g/o.$,1]),E}function Be(w,a,h,g,_){let E=o.a1.fromLngLat(w,a),M=_*o.aj(1,w.lat),L=M*Math.cos(o.ae(h)),k=Math.sqrt(M*M-L*L),B=k*Math.sin(o.ae(-g)),V=k*Math.cos(o.ae(-g));return new o.a1(E.x+B,E.y+V,E.z+L)}function Oe(w,a,h){let g=a.intersectsFrustum(w);if(!h||g===0)return g;let _=a.intersectsPlane(h);return _===0?0:g===2&&_===2?2:1}function he(w,a,h){let g=0,_=(h-a)/10;for(let E=0;E<10;E++)g+=_*Math.pow(Math.cos(a+(E+.5)/10*(h-a)),w);return g}function pe(w,a){return function(h,g,_,E,M){let L=2*((w-1)/o.ak(Math.cos(o.ae(te-M))/Math.cos(o.ae(te)))-1),k=Math.acos(_/E),B=2*he(L-1,0,o.ae(M/2)),V=Math.min(o.ae(te),k+o.ae(M/2)),W=he(L-1,Math.min(V,k-o.ae(M/2)),V),H=Math.atan(g/_),K=Math.hypot(g,_),ee=h;return ee+=o.ak(E/K/Math.max(.5,Math.cos(o.ae(M/2)))),ee+=L*o.ak(Math.cos(H))/2,ee-=o.ak(Math.max(1,W/B/a))/2,ee}}let Re=pe(9.314,3);function tt(w,a){let h=(a.roundZoom?Math.round:Math.floor)(w.zoom+o.ak(w.tileSize/a.tileSize));return Math.max(0,h)}function xe(w,a){let h=w.getCameraFrustum(),g=w.getClippingPlane(),_=w.screenPointToMercatorCoordinate(w.getCameraPoint()),E=o.a1.fromLngLat(w.center,w.elevation);_.z=E.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;let M=w.getCoveringTilesDetailsProvider(),L=M.allowVariableZoom(w,a),k=tt(w,a),B=a.minzoom||0,V=a.maxzoom!==void 0?a.maxzoom:w.maxZoom,W=Math.min(Math.max(0,k),V),H=Math.pow(2,W),K=[H*_.x,H*_.y,0],ee=[H*E.x,H*E.y,0],ce=Math.hypot(E.x-_.x,E.y-_.y),ue=Math.abs(E.z-_.z),fe=Math.hypot(ce,ue),ve=Ie=>({zoom:0,x:0,y:0,wrap:Ie,fullyVisible:!1}),Se=[],we=[];if(w.renderWorldCopies&&M.allowWorldCopies())for(let Ie=1;Ie<=3;Ie++)Se.push(ve(-Ie)),Se.push(ve(Ie));for(Se.push(ve(0));Se.length>0;){let Ie=Se.pop(),Pe=Ie.x,Ee=Ie.y,je=Ie.fullyVisible,Qe={x:Pe,y:Ee,z:Ie.zoom},Ve=M.getTileBoundingVolume(Qe,Ie.wrap,w.elevation,a);if(!je){let bt=Oe(h,Ve,g);if(bt===0)continue;je=bt===2}let Ge=M.distanceToTile2d(_.x,_.y,Qe,Ve),Xe=k;L&&(Xe=(a.calculateTileZoom||Re)(w.zoom+o.ak(w.tileSize/a.tileSize),Ge,ue,fe,w.fov)),Xe=(a.roundZoom?Math.round:Math.floor)(Xe),Xe=Math.max(0,Xe);let vt=Math.min(Xe,V);if(Ie.wrap=M.getWrap(E,Qe,Ie.wrap),Ie.zoom>=vt){if(Ie.zoom<B)continue;let bt=W-Ie.zoom,st=K[0]-.5-(Pe<<bt),Zt=K[1]-.5-(Ee<<bt),Nr=a.reparseOverscaled?Math.max(Ie.zoom,Xe):Ie.zoom;we.push({tileID:new o.Z(Ie.zoom===V?Nr:Ie.zoom,Ie.wrap,Ie.zoom,Pe,Ee),distanceSq:o.al([ee[0]-.5-Pe,ee[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(st*st+Zt*Zt)})}else for(let bt=0;bt<4;bt++)Se.push({zoom:Ie.zoom+1,x:(Pe<<1)+bt%2,y:(Ee<<1)+(bt>>1),wrap:Ie.wrap,fullyVisible:je})}return we.sort((Ie,Pe)=>Ie.distanceSq-Pe.distanceSq).map(Ie=>Ie.tileID)}let ut=o.a2.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class It extends o.E{constructor(a,h,g){super(),this.id=a,this.dispatcher=g,this.on("data",_=>this._dataHandler(_)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,E,M,L)=>{let k=new(dr(E.type))(_,E,M,L);if(k.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${k.id}`);return k})(a,h,g,this),this._tiles={},this._cache=new De(0,_=>this._unloadTile(_)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new J,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let a in this._tiles){let h=this._tiles[a];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,h,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,h,g)}catch(_){a.state="errored",_.status!==404?this._source.fire(new o.k(_,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let h in this._tiles){let g=this._tiles[h];g.upload(a),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(ft).map(a=>a.key)}getRenderableIds(a){let h=[];for(let g in this._tiles)this._isIdRenderable(g,a)&&h.push(this._tiles[g]);return a?h.sort((g,_)=>{let E=g.tileID,M=_.tileID,L=new o.P(E.canonical.x,E.canonical.y)._rotate(-this.transform.bearingInRadians),k=new o.P(M.canonical.x,M.canonical.y)._rotate(-this.transform.bearingInRadians);return E.overscaledZ-M.overscaledZ||k.y-L.y||k.x-L.x}).map(g=>g.tileID.key):h.map(g=>g.tileID).sort(ft).map(g=>g.key)}hasRenderableParent(a){let h=this.findLoadedParent(a,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(a,h){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(h||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let h in this._tiles)a?this._reloadTile(h,"expired"):this._tiles[h].state!=="errored"&&this._reloadTile(h,"reloading")}}_reloadTile(a,h){return o._(this,void 0,void 0,function*(){let g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=h),yield this._loadTile(g,a,h))})}_tileLoaded(a,h,g){a.timeAdded=x.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(h,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){let h=this.getRenderableIds();for(let _=0;_<h.length;_++){let E=h[_];if(a.neighboringTiles&&a.neighboringTiles[E]){let M=this.getTileByID(E);g(a,M),g(M,a)}}function g(_,E){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let M=E.tileID.canonical.x-_.tileID.canonical.x,L=E.tileID.canonical.y-_.tileID.canonical.y,k=Math.pow(2,_.tileID.canonical.z),B=E.tileID.key;M===0&&L===0||Math.abs(L)>1||(Math.abs(M)>1&&(Math.abs(M+k)===1?M+=k:Math.abs(M-k)===1&&(M-=k)),E.dem&&_.dem&&(_.dem.backfillBorder(E.dem,M,L),_.neighboringTiles&&_.neighboringTiles[B]&&(_.neighboringTiles[B].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,h,g,_){for(let E in this._tiles){let M=this._tiles[E];if(_[E]||!M.hasData()||M.tileID.overscaledZ<=h||M.tileID.overscaledZ>g)continue;let L=M.tileID;for(;M&&M.tileID.overscaledZ>h+1;){let B=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[B.key],M&&M.hasData()&&(L=B)}let k=L;for(;k.overscaledZ>h;)if(k=k.scaledTo(k.overscaledZ-1),a[k.key]||a[k.canonical.key]){_[L.key]=L;break}}}findLoadedParent(a,h){if(a.key in this._loadedParentTiles){let g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=h?g:null}for(let g=a.overscaledZ-1;g>=h;g--){let _=a.scaledTo(g),E=this._getLoadedTile(_);if(E)return E}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){let h=this._tiles[a.key];return h&&h.hasData()?h:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){let h=Math.ceil(a.width/this._source.tileSize)+1,g=Math.ceil(a.height/this._source.tileSize)+1,_=Math.floor(h*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(E)}handleWrapJump(a){let h=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,h){let g={};for(let _ in this._tiles){let E=this._tiles[_];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+h),g[E.tileID.key]=E}this._tiles=g;for(let _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(let _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(a,h,g,_,E,M){let L={},k={},B=Object.keys(a),V=x.now();for(let W of B){let H=a[W],K=this._tiles[W];if(!K||K.fadeEndTime!==0&&K.fadeEndTime<=V)continue;let ee=this.findLoadedParent(H,h),ce=this.findLoadedSibling(H),ue=ee||ce||null;ue&&(this._addTile(ue.tileID),L[ue.tileID.key]=ue.tileID),k[W]=H}this._retainLoadedChildren(k,_,g,a);for(let W in L)a[W]||(this._coveredTiles[W]=!0,a[W]=L[W]);if(M){let W={},H={};for(let K of E)this._tiles[K.key].hasData()?W[K.key]=K:H[K.key]=K;for(let K in H){let ee=H[K].children(this._source.maxzoom);this._tiles[ee[0].key]&&this._tiles[ee[1].key]&&this._tiles[ee[2].key]&&this._tiles[ee[3].key]&&(W[ee[0].key]=a[ee[0].key]=ee[0],W[ee[1].key]=a[ee[1].key]=ee[1],W[ee[2].key]=a[ee[2].key]=ee[2],W[ee[3].key]=a[ee[3].key]=ee[3],delete H[K])}for(let K in H){let ee=H[K],ce=this.findLoadedParent(ee,this._source.minzoom),ue=this.findLoadedSibling(ee),fe=ce||ue||null;if(fe){W[fe.tileID.key]=a[fe.tileID.key]=fe.tileID;for(let ve in W)W[ve].isChildOf(fe.tileID)&&delete W[ve]}}for(let K in this._tiles)W[K]||(this._coveredTiles[K]=!0)}}update(a,h){if(!this._sourceLoaded||this._paused)return;let g;this.transform=a,this.terrain=h,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new o.Z(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(g=xe(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(g=g.filter(V=>this._source.hasTile(V)))):g=[];let _=tt(a,this._source),E=Math.max(_-It.maxOverzooming,this._source.minzoom),M=Math.max(_+It.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let V={};for(let W of g)if(W.canonical.z>this._source.minzoom){let H=W.scaledTo(W.canonical.z-1);V[H.key]=H;let K=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));V[K.key]=K}g=g.concat(Object.values(V))}let L=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,L&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let k=this._updateRetainedTiles(g,_);_t(this._source.type)&&this._updateCoveredAndRetainedTiles(k,E,M,_,g,h);for(let V in k)this._tiles[V].clearFadeHold();let B=o.am(this._tiles,k);for(let V of B){let W=this._tiles[V];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,h){var g;let _={},E={},M=Math.max(h-It.maxOverzooming,this._source.minzoom),L=Math.max(h+It.maxUnderzooming,this._source.minzoom),k={};for(let B of a){let V=this._addTile(B);_[B.key]=B,V.hasData()||h<this._source.maxzoom&&(k[B.key]=B)}this._retainLoadedChildren(k,h,L,_);for(let B of a){let V=this._tiles[B.key];if(V.hasData())continue;if(h+1>this._source.maxzoom){let H=B.children(this._source.maxzoom)[0],K=this.getTile(H);if(K&&K.hasData()){_[H.key]=H;continue}}else{let H=B.children(this._source.maxzoom);if(_[H[0].key]&&_[H[1].key]&&_[H[2].key]&&_[H[3].key])continue}let W=V.wasRequested();for(let H=B.overscaledZ-1;H>=M;--H){let K=B.scaledTo(H);if(E[K.key])break;if(E[K.key]=!0,V=this.getTile(K),!V&&W&&(V=this._addTile(K)),V){let ee=V.hasData();if((ee||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||W)&&(_[K.key]=K),W=V.wasRequested(),ee)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let a in this._tiles){let h=[],g,_=this._tiles[a].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){g=this._loadedParentTiles[_.key];break}h.push(_.key);let E=_.scaledTo(_.overscaledZ-1);if(g=this._getLoadedTile(E),g)break;_=E}for(let E of h)this._loadedParentTiles[E]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let a in this._tiles){let h=this._tiles[a].tileID,g=this._getLoadedTile(h);this._loadedSiblingTiles[h.key]=g}}_addTile(a){let h=this._tiles[a.key];if(h)return h;h=this._cache.getAndRemove(a),h&&(this._setTileReloadTimer(a.key,h),h.tileID=a,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,h)));let g=h;return h||(h=new _i(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(h,a.key,h.state)),h.uses++,this._tiles[a.key]=h,g||this._source.fire(new o.l("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(a,h){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);let g=h.getExpiryTimeout();g&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},g))}refreshTiles(a){for(let h in this._tiles)(this._isIdRenderable(h)||this._tiles[h].state=="errored")&&a.some(g=>g.equals(this._tiles[h].tileID.canonical))&&this._reloadTile(h,"expired")}_removeTile(a){let h=this._tiles[a];h&&(h.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(a){let h=a.sourceDataType;a.dataType==="source"&&h==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&h==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,h,g){let _=[],E=this.transform;if(!E)return _;let M=E.getCoveringTilesDetailsProvider().allowWorldCopies(),L=g?E.getCameraQueryGeometry(a):a,k=K=>E.screenPointToMercatorCoordinate(K,this.terrain),B=this.transformBbox(a,k,!M),V=this.transformBbox(L,k,!M),W=this.getIds(),H=o.a2.fromPoints(V);for(let K=0;K<W.length;K++){let ee=this._tiles[W[K]];if(ee.holdingForFade())continue;let ce=M?[ee.tileID]:[ee.tileID.unwrapTo(-1),ee.tileID.unwrapTo(0)],ue=Math.pow(2,E.zoom-ee.tileID.overscaledZ),fe=h*ee.queryPadding*o.$/ee.tileSize/ue;for(let ve of ce){let Se=H.map(we=>ve.getTilePoint(new o.a1(we.x,we.y)));if(Se.expandBy(fe),Se.intersects(ut)){let we=B.map(Pe=>ve.getTilePoint(Pe)),Ie=V.map(Pe=>ve.getTilePoint(Pe));_.push({tile:ee,tileID:M?ve:ve.unwrapTo(0),queryGeometry:we,cameraQueryGeometry:Ie,scale:ue})}}}return _}transformBbox(a,h,g){let _=a.map(h);if(g){let E=o.a2.fromPoints(a);E.shrinkBy(.001*Math.min(E.width(),E.height()));let M=E.map(h);o.a2.fromPoints(_).covers(M)||(_=_.map(L=>L.x>.5?new o.a1(L.x-1,L.y,L.z):L))}return _}getVisibleCoordinates(a){let h=this.getRenderableIds(a).map(g=>this._tiles[g].tileID);return this.transform&&this.transform.populateCache(h),h}hasTransition(){if(this._source.hasTransition())return!0;if(_t(this._source.type)){let a=x.now();for(let h in this._tiles)if(this._tiles[h].fadeEndTime>=a)return!0}return!1}setFeatureState(a,h,g){this._state.updateState(a=a||"_geojsonTileLayer",h,g)}removeFeatureState(a,h,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",h,g)}getFeatureState(a,h){return this._state.getState(a=a||"_geojsonTileLayer",h)}setDependencies(a,h,g){let _=this._tiles[a];_&&_.setDependencies(h,g)}reloadTilesForDependencies(a,h){for(let g in this._tiles)this._tiles[g].hasDependency(a,h)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(a,h))}}function ft(w,a){let h=Math.abs(2*w.wrap)-+(w.wrap<0),g=Math.abs(2*a.wrap)-+(a.wrap<0);return w.overscaledZ-a.overscaledZ||g-h||a.canonical.y-w.canonical.y||a.canonical.x-w.canonical.x}function _t(w){return w==="raster"||w==="image"||w==="video"}It.maxOverzooming=10,It.maxUnderzooming=3;class Wt{constructor(a,h){this.reset(a,h)}reset(a,h){this.points=a||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ah(a,0,1);let h=1,g=this._distances[h],_=a*this.paddedLength+this.padding;for(;g<_&&h<this._distances.length;)g=this._distances[++h];let E=h-1,M=this._distances[E],L=g-M,k=L>0?(_-M)/L:0;return this.points[E].mult(1-k).add(this.points[h].mult(k))}}function Tr(w,a){let h=!0;return w==="always"||w!=="never"&&a!=="never"||(h=!1),h}class rn{constructor(a,h,g){let _=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(a/g),this.yCellCount=Math.ceil(h/g);for(let M=0;M<this.xCellCount*this.yCellCount;M++)_.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=h,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,h,g,_,E){this._forEachCell(h,g,_,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(E)}insertCircle(a,h,g,_){this._forEachCell(h-_,g-_,h+_,g+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(h),this.circles.push(g),this.circles.push(_)}_insertBoxCell(a,h,g,_,E,M){this.boxCells[E].push(M)}_insertCircleCell(a,h,g,_,E,M){this.circleCells[E].push(M)}_query(a,h,g,_,E,M,L){if(g<0||a>this.width||_<0||h>this.height)return[];let k=[];if(a<=0&&h<=0&&this.width<=g&&this.height<=_){if(E)return[{key:null,x1:a,y1:h,x2:g,y2:_}];for(let B=0;B<this.boxKeys.length;B++)k.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){let V=this.circles[3*B],W=this.circles[3*B+1],H=this.circles[3*B+2];k.push({key:this.circleKeys[B],x1:V-H,y1:W-H,x2:V+H,y2:W+H})}}else this._forEachCell(a,h,g,_,this._queryCell,k,{hitTest:E,overlapMode:M,seenUids:{box:{},circle:{}}},L);return k}query(a,h,g,_){return this._query(a,h,g,_,!1,null)}hitTest(a,h,g,_,E,M){return this._query(a,h,g,_,!0,E,M).length>0}hitTestCircle(a,h,g,_,E){let M=a-g,L=a+g,k=h-g,B=h+g;if(L<0||M>this.width||B<0||k>this.height)return!1;let V=[];return this._forEachCell(M,k,L,B,this._queryCellCircle,V,{hitTest:!0,overlapMode:_,circle:{x:a,y:h,radius:g},seenUids:{box:{},circle:{}}},E),V.length>0}_queryCell(a,h,g,_,E,M,L,k){let{seenUids:B,hitTest:V,overlapMode:W}=L,H=this.boxCells[E];if(H!==null){let ee=this.bboxes;for(let ce of H)if(!B.box[ce]){B.box[ce]=!0;let ue=4*ce,fe=this.boxKeys[ce];if(a<=ee[ue+2]&&h<=ee[ue+3]&&g>=ee[ue+0]&&_>=ee[ue+1]&&(!k||k(fe))&&(!V||!Tr(W,fe.overlapMode))&&(M.push({key:fe,x1:ee[ue],y1:ee[ue+1],x2:ee[ue+2],y2:ee[ue+3]}),V))return!0}}let K=this.circleCells[E];if(K!==null){let ee=this.circles;for(let ce of K)if(!B.circle[ce]){B.circle[ce]=!0;let ue=3*ce,fe=this.circleKeys[ce];if(this._circleAndRectCollide(ee[ue],ee[ue+1],ee[ue+2],a,h,g,_)&&(!k||k(fe))&&(!V||!Tr(W,fe.overlapMode))){let ve=ee[ue],Se=ee[ue+1],we=ee[ue+2];if(M.push({key:fe,x1:ve-we,y1:Se-we,x2:ve+we,y2:Se+we}),V)return!0}}}return!1}_queryCellCircle(a,h,g,_,E,M,L,k){let{circle:B,seenUids:V,overlapMode:W}=L,H=this.boxCells[E];if(H!==null){let ee=this.bboxes;for(let ce of H)if(!V.box[ce]){V.box[ce]=!0;let ue=4*ce,fe=this.boxKeys[ce];if(this._circleAndRectCollide(B.x,B.y,B.radius,ee[ue+0],ee[ue+1],ee[ue+2],ee[ue+3])&&(!k||k(fe))&&!Tr(W,fe.overlapMode))return M.push(!0),!0}}let K=this.circleCells[E];if(K!==null){let ee=this.circles;for(let ce of K)if(!V.circle[ce]){V.circle[ce]=!0;let ue=3*ce,fe=this.circleKeys[ce];if(this._circlesCollide(ee[ue],ee[ue+1],ee[ue+2],B.x,B.y,B.radius)&&(!k||k(fe))&&!Tr(W,fe.overlapMode))return M.push(!0),!0}}}_forEachCell(a,h,g,_,E,M,L,k){let B=this._convertToXCellCoord(a),V=this._convertToYCellCoord(h),W=this._convertToXCellCoord(g),H=this._convertToYCellCoord(_);for(let K=B;K<=W;K++)for(let ee=V;ee<=H;ee++)if(E.call(this,a,h,g,_,this.xCellCount*ee+K,M,L,k))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,h,g,_,E,M){let L=_-a,k=E-h,B=g+M;return B*B>L*L+k*k}_circleAndRectCollide(a,h,g,_,E,M,L){let k=(M-_)/2,B=Math.abs(a-(_+k));if(B>k+g)return!1;let V=(L-E)/2,W=Math.abs(h-(E+V));if(W>V+g)return!1;if(B<=k||W<=V)return!0;let H=B-k,K=W-V;return H*H+K*K<=g*g}}function Pr(w,a,h){let g=o.L();if(!w){let{vecSouth:W,vecEast:H}=ur(a),K=f();K[0]=H[0],K[1]=H[1],K[2]=W[0],K[3]=W[1],_=K,(V=(M=(E=K)[0])*(B=E[3])-(k=E[2])*(L=E[1]))&&(_[0]=B*(V=1/V),_[1]=-L*V,_[2]=-k*V,_[3]=M*V),g[0]=K[0],g[1]=K[1],g[4]=K[2],g[5]=K[3]}var _,E,M,L,k,B,V;return o.N(g,g,[1/h,1/h,1]),g}function ar(w,a,h,g){if(w){let _=o.L();if(!a){let{vecSouth:E,vecEast:M}=ur(h);_[0]=M[0],_[1]=M[1],_[4]=E[0],_[5]=E[1]}return o.N(_,_,[g,g,1]),_}return h.pixelsToClipSpaceMatrix}function ur(w){let a=Math.cos(w.rollInRadians),h=Math.sin(w.rollInRadians),g=Math.cos(w.pitchInRadians),_=Math.cos(w.bearingInRadians),E=Math.sin(w.bearingInRadians),M=o.ar();M[0]=-_*g*h-E*a,M[1]=-E*g*h+_*a;let L=o.as(M);L<1e-9?o.at(M):o.au(M,M,1/L);let k=o.ar();k[0]=_*g*a-E*h,k[1]=E*g*a+_*h;let B=o.as(k);return B<1e-9?o.at(k):o.au(k,k,1/B),{vecEast:k,vecSouth:M}}function Mn(w,a,h,g){let _;g?(_=[w,a,g(w,a),1],o.aw(_,_,h)):(_=[w,a,0,1],ap(_,_,h));let E=_[3];return{point:new o.P(_[0]/E,_[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}function gt(w,a){return .5+w/a*.5}function si(w,a){return w.x>=-a[0]&&w.x<=a[0]&&w.y>=-a[1]&&w.y<=a[1]}function Tn(w,a,h,g,_,E,M,L,k,B,V,W,H){let K=h?w.textSizeData:w.iconSizeData,ee=o.an(K,a.transform.zoom),ce=[256/a.width*2+1,256/a.height*2+1],ue=h?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ue.clear();let fe=w.lineVertexArray,ve=h?w.text.placedSymbolArray:w.icon.placedSymbolArray,Se=a.transform.width/a.transform.height,we=!1;for(let Ie=0;Ie<ve.length;Ie++){let Pe=ve.get(Ie);if(Pe.hidden||Pe.writingMode===o.ao.vertical&&!we){jl(Pe.numGlyphs,ue);continue}we=!1;let Ee=new o.P(Pe.anchorX,Pe.anchorY),je={getElevation:H,pitchedLabelPlaneMatrix:g,lineVertexArray:fe,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:Ee,unwrappedTileID:k,width:B,height:V,translation:W},Qe=Ts(Pe.anchorX,Pe.anchorY,je);if(!si(Qe.point,ce)){jl(Pe.numGlyphs,ue);continue}let Ve=gt(a.transform.cameraToCenterDistance,Qe.signedDistanceFromCamera),Ge=o.ap(K,ee,Pe),Xe=E?Ge*a.transform.getPitchedTextCorrection(Pe.anchorX,Pe.anchorY,k)/Ve:Ge*Ve,vt=wt({projectionContext:je,pitchedLabelPlaneMatrixInverse:_,symbol:Pe,fontSize:Xe,flip:!1,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ue,aspectRatio:Se,rotateToLine:L});we=vt.useVertical,(vt.notEnoughRoom||we||vt.needsFlipping&&wt({projectionContext:je,pitchedLabelPlaneMatrixInverse:_,symbol:Pe,fontSize:Xe,flip:!0,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ue,aspectRatio:Se,rotateToLine:L}).notEnoughRoom)&&jl(Pe.numGlyphs,ue)}h?w.text.dynamicLayoutVertexBuffer.updateData(ue):w.icon.dynamicLayoutVertexBuffer.updateData(ue)}function Ia(w,a,h,g,_,E,M,L){let k=E.glyphStartIndex+E.numGlyphs,B=E.lineStartIndex,V=E.lineStartIndex+E.lineLength,W=a.getoffsetX(E.glyphStartIndex),H=a.getoffsetX(k-1),K=Cc(w*W,h,g,_,E.segment,B,V,L,M);if(!K)return null;let ee=Cc(w*H,h,g,_,E.segment,B,V,L,M);return ee?L.projectionCache.anyProjectionOccluded?null:{first:K,last:ee}:null}function Ss(w,a,h,g){return w===o.ao.horizontal&&Math.abs(h.y-a.y)>Math.abs(h.x-a.x)*g?{useVertical:!0}:(w===o.ao.vertical?a.y<h.y:a.x>h.x)?{needsFlipping:!0}:null}function wt(w){let{projectionContext:a,pitchedLabelPlaneMatrixInverse:h,symbol:g,fontSize:_,flip:E,keepUpright:M,glyphOffsetArray:L,dynamicLayoutVertexArray:k,aspectRatio:B,rotateToLine:V}=w,W=_/24,H=g.lineOffsetX*W,K=g.lineOffsetY*W,ee;if(g.numGlyphs>1){let ce=g.glyphStartIndex+g.numGlyphs,ue=g.lineStartIndex,fe=g.lineStartIndex+g.lineLength,ve=Ia(W,L,H,K,E,g,V,a);if(!ve)return{notEnoughRoom:!0};let Se=Vi(ve.first.point.x,ve.first.point.y,a,h),we=Vi(ve.last.point.x,ve.last.point.y,a,h);if(M&&!E){let Ie=Ss(g.writingMode,Se,we,B);if(Ie)return Ie}ee=[ve.first];for(let Ie=g.glyphStartIndex+1;Ie<ce-1;Ie++){let Pe=Cc(W*L.getoffsetX(Ie),H,K,E,g.segment,ue,fe,a,V);if(!Pe)return{notEnoughRoom:!0};ee.push(Pe)}ee.push(ve.last)}else{if(M&&!E){let ue=_n(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,fe=g.lineStartIndex+g.segment+1,ve=new o.P(a.lineVertexArray.getx(fe),a.lineVertexArray.gety(fe)),Se=_n(ve.x,ve.y,a),we=Se.signedDistanceFromCamera>0?Se.point:Rr(a.tileAnchorPoint,ve,ue,1,a),Ie=Vi(ue.x,ue.y,a,h),Pe=Vi(we.x,we.y,a,h),Ee=Ss(g.writingMode,Ie,Pe,B);if(Ee)return Ee}let ce=Cc(W*L.getoffsetX(g.glyphStartIndex),H,K,E,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,a,V);if(!ce||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[ce]}for(let ce of ee)o.av(k,ce.point,ce.angle);return{}}function Rr(w,a,h,g,_){let E=w.add(w.sub(a)._unit()),M=_n(E.x,E.y,_).point,L=h.sub(M);return h.add(L._mult(g/L.mag()))}function Er(w,a,h){let g=a.projectionCache;if(g.projections[w])return g.projections[w];let _=new o.P(a.lineVertexArray.getx(w),a.lineVertexArray.gety(w)),E=_n(_.x,_.y,a);if(E.signedDistanceFromCamera>0)return g.projections[w]=E.point,g.anyProjectionOccluded=g.anyProjectionOccluded||E.isOccluded,E.point;let M=w-h.direction;return Rr(h.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(M),a.lineVertexArray.gety(M)),_,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,a)}function _n(w,a,h){let g=w+h.translation[0],_=a+h.translation[1],E;return h.pitchWithMap?(E=Mn(g,_,h.pitchedLabelPlaneMatrix,h.getElevation),E.isOccluded=!1):(E=h.transform.projectTileCoordinates(g,_,h.unwrappedTileID,h.getElevation),E.point.x=(.5*E.point.x+.5)*h.width,E.point.y=(.5*-E.point.y+.5)*h.height),E}function Vi(w,a,h,g){if(h.pitchWithMap){let _=[w,a,0,1];return o.aw(_,_,g),h.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],h.unwrappedTileID,h.getElevation).point}return{x:w/h.width*2-1,y:1-a/h.height*2}}function Ts(w,a,h){return h.transform.projectTileCoordinates(w,a,h.unwrappedTileID,h.getElevation)}function Ir(w,a,h){return w._unit()._perp()._mult(a*h)}function qf(w,a,h,g,_,E,M,L,k){if(L.projectionCache.offsets[w])return L.projectionCache.offsets[w];let B=h.add(a);if(w+k.direction<g||w+k.direction>=_)return L.projectionCache.offsets[w]=B,B;let V=Er(w+k.direction,L,k),W=Ir(V.sub(h),M,k.direction),H=h.add(W),K=V.add(W);return L.projectionCache.offsets[w]=o.ax(E,B,H,K)||B,L.projectionCache.offsets[w]}function Cc(w,a,h,g,_,E,M,L,k){let B=g?w-a:w+a,V=B>0?1:-1,W=0;g&&(V*=-1,W=Math.PI),V<0&&(W+=Math.PI);let H,K=V>0?E+_:E+_+1;L.projectionCache.cachedAnchorPoint?H=L.projectionCache.cachedAnchorPoint:(H=_n(L.tileAnchorPoint.x,L.tileAnchorPoint.y,L).point,L.projectionCache.cachedAnchorPoint=H);let ee,ce,ue=H,fe=H,ve=0,Se=0,we=Math.abs(B),Ie=[],Pe;for(;ve+Se<=we;){if(K+=V,K<E||K>=M)return null;ve+=Se,fe=ue,ce=ee;let Qe={absOffsetX:we,direction:V,distanceFromAnchor:ve,previousVertex:fe};if(ue=Er(K,L,Qe),h===0)Ie.push(fe),Pe=ue.sub(fe);else{let Ve,Ge=ue.sub(fe);Ve=Ge.mag()===0?Ir(Er(K+V,L,Qe).sub(ue),h,V):Ir(Ge,h,V),ce||(ce=fe.add(Ve)),ee=qf(K,Ve,ue,E,M,ce,h,L,Qe),Ie.push(ce),Pe=ee.sub(ce)}Se=Pe.mag()}let Ee=Pe._mult((we-ve)/Se)._add(ce||fe),je=W+Math.atan2(ue.y-fe.y,ue.x-fe.x);return Ie.push(Ee),{point:Ee,angle:k?je:0,path:Ie}}let Mv=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function jl(w,a){for(let h=0;h<w;h++){let g=a.length;a.resize(g+4),a.float32.set(Mv,3*g)}}function ap(w,a,h){let g=a[0],_=a[1];return w[0]=h[0]*g+h[4]*_+h[12],w[1]=h[1]*g+h[5]*_+h[13],w[3]=h[3]*g+h[7]*_+h[15],w}let Ai=100;class Cv{constructor(a,h=new rn(a.width+200,a.height+200,25),g=new rn(a.width+200,a.height+200,25)){this.transform=a,this.grid=h,this.ignoredGrid=g,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Ai,this.screenBottomBoundary=a.height+Ai,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,h,g,_,E,M,L,k,B,V,W,H){let K=this.projectAndGetPerspectiveRatio(a.anchorPointX+k[0],a.anchorPointY+k[1],E,V,H),ee=g*K.perspectiveRatio,ce;if(M||L)ce=this._projectCollisionBox(a,ee,_,E,M,L,k,K,V,W,H);else{let Pe=K.x+(W?W.x*ee:0),Ee=K.y+(W?W.y*ee:0);ce={allPointsOccluded:!1,box:[Pe+a.x1*ee,Ee+a.y1*ee,Pe+a.x2*ee,Ee+a.y2*ee]}}let[ue,fe,ve,Se]=ce.box,we=M?ce.allPointsOccluded:K.isOccluded,Ie=we;return Ie||(Ie=K.perspectiveRatio<this.perspectiveRatioCutoff),Ie||(Ie=!this.isInsideGrid(ue,fe,ve,Se)),Ie||h!=="always"&&this.grid.hitTest(ue,fe,ve,Se,h,B)?{box:[ue,fe,ve,Se],placeable:!1,offscreen:!1,occluded:we}:{box:[ue,fe,ve,Se],placeable:!0,offscreen:this.isOffscreen(ue,fe,ve,Se),occluded:we}}placeCollisionCircles(a,h,g,_,E,M,L,k,B,V,W,H,K,ee){let ce=[],ue=new o.P(h.anchorX,h.anchorY),fe=this.getPerspectiveRatio(ue.x,ue.y,M,ee),ve=(B?E*this.transform.getPitchedTextCorrection(h.anchorX,h.anchorY,M)/fe:E*fe)/o.aB,Se={getElevation:ee,pitchedLabelPlaneMatrix:L,lineVertexArray:g,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ue,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:K},we=Ia(ve,_,h.lineOffsetX*ve,h.lineOffsetY*ve,!1,h,!1,Se),Ie=!1,Pe=!1,Ee=!0;if(we){let je=.5*W*fe+H,Qe=new o.P(-100,-100),Ve=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Ge=new Wt,Xe=we.first,vt=we.last,bt=[];for(let Nr=Xe.path.length-1;Nr>=1;Nr--)bt.push(Xe.path[Nr]);for(let Nr=1;Nr<vt.path.length;Nr++)bt.push(vt.path[Nr]);let st=2.5*je;if(B){let Nr=this.projectPathToScreenSpace(bt,Se);bt=Nr.some(hn=>hn.signedDistanceFromCamera<=0)?[]:Nr.map(hn=>hn.point)}let Zt=[];if(bt.length>0){let Nr=bt[0].clone(),hn=bt[0].clone();for(let qn=1;qn<bt.length;qn++)Nr.x=Math.min(Nr.x,bt[qn].x),Nr.y=Math.min(Nr.y,bt[qn].y),hn.x=Math.max(hn.x,bt[qn].x),hn.y=Math.max(hn.y,bt[qn].y);Zt=Nr.x>=Qe.x&&hn.x<=Ve.x&&Nr.y>=Qe.y&&hn.y<=Ve.y?[bt]:hn.x<Qe.x||Nr.x>Ve.x||hn.y<Qe.y||Nr.y>Ve.y?[]:o.ay([bt],Qe.x,Qe.y,Ve.x,Ve.y)}for(let Nr of Zt){Ge.reset(Nr,.25*je);let hn=0;hn=Ge.length<=.5*je?1:Math.ceil(Ge.paddedLength/st)+1;for(let qn=0;qn<hn;qn++){let Cn=qn/Math.max(hn-1,1),li=Ge.lerp(Cn),bi=li.x+Ai,Or=li.y+Ai;ce.push(bi,Or,je,0);let Fn=bi-je,$i=Or-je,to=bi+je,ho=Or+je;if(Ee=Ee&&this.isOffscreen(Fn,$i,to,ho),Pe=Pe||this.isInsideGrid(Fn,$i,to,ho),a!=="always"&&this.grid.hitTestCircle(bi,Or,je,a,V)&&(Ie=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Ie}}}}return{circles:!k&&Ie||!Pe||fe<this.perspectiveRatioCutoff?[]:ce,offscreen:Ee,collisionDetected:Ie}}projectPathToScreenSpace(a,h){let g=function(_,E){let M=o.L();return o.aq(M,E.pitchedLabelPlaneMatrix),_.map(L=>{let k=Mn(L.x,L.y,M,E.getElevation),B=E.transform.projectTileCoordinates(k.point.x,k.point.y,E.unwrappedTileID,E.getElevation);return B.point.x=(.5*B.point.x+.5)*E.width,B.point.y=(.5*-B.point.y+.5)*E.height,B})}(a,h);return function(_){let E=0,M=0,L=0,k=0;for(let B=0;B<_.length;B++)_[B].isOccluded?(L=B+1,k=0):(k++,k>M&&(M=k,E=L));return _.slice(E,E+M)}(g)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let h=[],g=new o.a2;for(let W of a){let H=new o.P(W.x+Ai,W.y+Ai);g.extend(H),h.push(H)}let{minX:_,minY:E,maxX:M,maxY:L}=g,k=this.grid.query(_,E,M,L).concat(this.ignoredGrid.query(_,E,M,L)),B={},V={};for(let W of k){let H=W.key;if(B[H.bucketInstanceId]===void 0&&(B[H.bucketInstanceId]={}),B[H.bucketInstanceId][H.featureIndex])continue;let K=[new o.P(W.x1,W.y1),new o.P(W.x2,W.y1),new o.P(W.x2,W.y2),new o.P(W.x1,W.y2)];o.az(h,K)&&(B[H.bucketInstanceId][H.featureIndex]=!0,V[H.bucketInstanceId]===void 0&&(V[H.bucketInstanceId]=[]),V[H.bucketInstanceId].push(H.featureIndex))}return V}insertCollisionBox(a,h,g,_,E,M){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:E,collisionGroupID:M,overlapMode:h},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,h,g,_,E,M){let L=g?this.ignoredGrid:this.grid,k={bucketInstanceId:_,featureIndex:E,collisionGroupID:M,overlapMode:h};for(let B=0;B<a.length;B+=4)L.insertCircle(k,a[B],a[B+1],a[B+2])}projectAndGetPerspectiveRatio(a,h,g,_,E){if(E){let M;_?(M=[a,h,_(a,h),1],o.aw(M,M,E)):(M=[a,h,0,1],ap(M,M,E));let L=M[3];return{x:(M[0]/L+1)/2*this.transform.width+Ai,y:(-M[1]/L+1)/2*this.transform.height+Ai,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L*.5,isOccluded:!1,signedDistanceFromCamera:L}}{let M=this.transform.projectTileCoordinates(a,h,g,_);return{x:(M.point.x+1)/2*this.transform.width+Ai,y:(1-M.point.y)/2*this.transform.height+Ai,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(a,h,g,_){let E=this.transform.projectTileCoordinates(a,h,g,_);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(a,h,g,_){return g<Ai||a>=this.screenRightBoundary||_<Ai||h>this.screenBottomBoundary}isInsideGrid(a,h,g,_){return g>=0&&a<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}getViewportMatrix(){let a=o.ag([]);return o.M(a,a,[-100,-100,0]),a}_projectCollisionBox(a,h,g,_,E,M,L,k,B,V,W){let H=1,K=0,ee=0,ce=1,ue=a.anchorPointX+L[0],fe=a.anchorPointY+L[1];if(M&&!E){let bt=this.projectAndGetPerspectiveRatio(ue+1,fe,_,B,W),st=bt.x-k.x,Zt=Math.atan((bt.y-k.y)/st)+(st<0?Math.PI:0),Nr=Math.sin(Zt),hn=Math.cos(Zt);H=hn,K=Nr,ee=-Nr,ce=hn}else if(!M&&E){let bt=ur(this.transform);H=bt.vecEast[0],K=bt.vecEast[1],ee=bt.vecSouth[0],ce=bt.vecSouth[1]}let ve=k.x,Se=k.y,we=h;E&&(ve=ue,Se=fe,we=Math.pow(2,-(this.transform.zoom-g.overscaledZ)),we*=this.transform.getPitchedTextCorrection(ue,fe,_),V||(we*=o.ah(.5+k.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(ve+=H*V.x*we+ee*V.y*we,Se+=K*V.x*we+ce*V.y*we);let Ie=a.x1*we,Pe=a.x2*we,Ee=(Ie+Pe)/2,je=a.y1*we,Qe=a.y2*we,Ve=(je+Qe)/2,Ge=[{offsetX:Ie,offsetY:je},{offsetX:Ee,offsetY:je},{offsetX:Pe,offsetY:je},{offsetX:Pe,offsetY:Ve},{offsetX:Pe,offsetY:Qe},{offsetX:Ee,offsetY:Qe},{offsetX:Ie,offsetY:Qe},{offsetX:Ie,offsetY:Ve}],Xe=[];for(let{offsetX:bt,offsetY:st}of Ge)Xe.push(new o.P(ve+H*bt+ee*st,Se+K*bt+ce*st));let vt=!1;if(E){let bt=Xe.map(st=>this.projectAndGetPerspectiveRatio(st.x,st.y,_,B,W));vt=bt.some(st=>!st.isOccluded),Xe=bt.map(st=>new o.P(st.x,st.y))}else vt=!0;return{box:o.aA(Xe),allPointsOccluded:!vt}}}class Aa{constructor(a,h,g,_){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?h:-h))):_&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Un{constructor(a,h,g,_,E){this.text=new Aa(a?a.text:null,h,g,E),this.icon=new Aa(a?a.icon:null,h,_,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class oA{constructor(a,h,g){this.text=a,this.icon=h,this.skipFade=g}}class _m{constructor(a,h,g,_,E){this.bucketInstanceId=a,this.featureIndex=h,this.sourceLayerIndex=g,this.bucketIndex=_,this.tileID=E}}class lb{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){let h=++this.maxGroupID;this.collisionGroups[a]={ID:h,predicate:g=>g.collisionGroupID===h}}return this.collisionGroups[a]}}function Pc(w,a,h,g,_){let{horizontalAlign:E,verticalAlign:M}=o.aH(w);return new o.P(-(E-.5)*a+g[0]*_,-(M-.5)*h+g[1]*_)}class Rc{constructor(a,h,g,_,E){this.transform=a.clone(),this.terrain=h,this.collisionIndex=new Cv(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new lb(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){let h=this.terrain;return h?(g,_)=>h.getElevation(a,g,_):null}getBucketParts(a,h,g,_){let E=g.getBucket(h),M=g.latestFeatureIndex;if(!E||!M||h.id!==E.layerIds[0])return;let L=g.collisionBoxArray,k=E.layers[0].layout,B=E.layers[0].paint,V=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),W=g.tileSize/o.$,H=g.tileID.toUnwrapped(),K=k.get("text-rotation-alignment")==="map",ee=o.aC(g,1,this.transform.zoom),ce=o.aD(this.collisionIndex.transform,g,B.get("text-translate"),B.get("text-translate-anchor")),ue=o.aD(this.collisionIndex.transform,g,B.get("icon-translate"),B.get("icon-translate-anchor")),fe=Pr(K,this.transform,ee);this.retainedQueryData[E.bucketInstanceId]=new _m(E.bucketInstanceId,M,E.sourceLayerIndex,E.index,g.tileID);let ve={bucket:E,layout:k,translationText:ce,translationIcon:ue,unwrappedTileID:H,pitchedLabelPlaneMatrix:fe,scale:V,textPixelRatio:W,holdingForFade:g.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.an(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(_)for(let Se of E.sortKeyRanges){let{sortKey:we,symbolInstanceStart:Ie,symbolInstanceEnd:Pe}=Se;a.push({sortKey:we,symbolInstanceStart:Ie,symbolInstanceEnd:Pe,parameters:ve})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(a,h,g,_,E,M,L,k,B,V,W,H,K,ee,ce,ue,fe,ve,Se,we){let Ie=o.aE[a.textAnchor],Pe=[a.textOffset0,a.textOffset1],Ee=Pc(Ie,g,_,Pe,E),je=this.collisionIndex.placeCollisionBox(h,H,k,B,V,L,M,ue,W.predicate,Se,Ee,we);if((!ve||this.collisionIndex.placeCollisionBox(ve,H,k,B,V,L,M,fe,W.predicate,Se,Ee,we).placeable)&&je.placeable){let Qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(Qe=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Pe,width:g,height:_,anchor:Ie,textBoxScale:E,prevAnchor:Qe},this.markUsedJustification(ee,Ie,K,ce),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,ce,K),this.placedOrientations[K.crossTileID]=ce),{shift:Ee,placedGlyphBoxes:je}}}placeLayerBucketPart(a,h,g){let{bucket:_,layout:E,translationText:M,translationIcon:L,unwrappedTileID:k,pitchedLabelPlaneMatrix:B,textPixelRatio:V,holdingForFade:W,collisionBoxArray:H,partiallyEvaluatedTextSize:K,collisionGroup:ee}=a.parameters,ce=E.get("text-optional"),ue=E.get("icon-optional"),fe=o.aF(E,"text-overlap","text-allow-overlap"),ve=fe==="always",Se=o.aF(E,"icon-overlap","icon-allow-overlap"),we=Se==="always",Ie=E.get("text-rotation-alignment")==="map",Pe=E.get("text-pitch-alignment")==="map",Ee=E.get("icon-text-fit")!=="none",je=E.get("symbol-z-order")==="viewport-y",Qe=ve&&(we||!_.hasIconData()||ue),Ve=we&&(ve||!_.hasTextData()||ce);!_.collisionArrays&&H&&_.deserializeCollisionBoxes(H);let Ge=this.retainedQueryData[_.bucketInstanceId].tileID,Xe=this._getTerrainElevationFunc(Ge),vt=this.transform.getFastPathSimpleProjectionMatrix(Ge),bt=(st,Zt,Nr)=>{var hn,qn;if(h[st.crossTileID])return;if(W)return void(this.placements[st.crossTileID]=new oA(!1,!1,!1));let Cn=!1,li=!1,bi=!0,Or=null,Fn={box:null,placeable:!1,offscreen:null,occluded:!1},$i={placeable:!1},to=null,ho=null,la=null,ml=0,kc=0,qc=0;Zt.textFeatureIndex?ml=Zt.textFeatureIndex:st.useRuntimeCollisionCircles&&(ml=st.featureIndex),Zt.verticalTextFeatureIndex&&(kc=Zt.verticalTextFeatureIndex);let Ap=Zt.textBox;if(Ap){let Pa=Hi=>{let ro=o.ao.horizontal;if(_.allowVerticalPlacement&&!Hi&&this.prevPlacement){let Cs=this.prevPlacement.placedOrientations[st.crossTileID];Cs&&(this.placedOrientations[st.crossTileID]=Cs,ro=Cs,this.markUsedOrientation(_,ro,st))}return ro},gl=(Hi,ro)=>{if(_.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&Zt.verticalTextBox){for(let Cs of _.writingModes)if(Cs===o.ao.vertical?(Fn=ro(),$i=Fn):Fn=Hi(),Fn&&Fn.placeable)break}else Fn=Hi()},ua=st.textAnchorOffsetStartIndex,Fc=st.textAnchorOffsetEndIndex;if(Fc===ua){let Hi=(ro,Cs)=>{let Wi=this.collisionIndex.placeCollisionBox(ro,fe,V,Ge,k,Pe,Ie,M,ee.predicate,Xe,void 0,vt);return Wi&&Wi.placeable&&(this.markUsedOrientation(_,Cs,st),this.placedOrientations[st.crossTileID]=Cs),Wi};gl(()=>Hi(Ap,o.ao.horizontal),()=>{let ro=Zt.verticalTextBox;return _.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&ro?Hi(ro,o.ao.vertical):{box:null,offscreen:null}}),Pa(Fn&&Fn.placeable)}else{let Hi=o.aE[(qn=(hn=this.prevPlacement)===null||hn===void 0?void 0:hn.variableOffsets[st.crossTileID])===null||qn===void 0?void 0:qn.anchor],ro=(Wi,Hm,Cp)=>{let Uu=Wi.x2-Wi.x1,vl=Wi.y2-Wi.y1,jc=st.textBoxScale,XA=Ee&&Se==="never"?Hm:null,rs=null,QA=fe==="never"?1:2,tw="never";Hi&&QA++;for(let fy=0;fy<QA;fy++){for(let hy=ua;hy<Fc;hy++){let zc=_.textAnchorOffsets.get(hy);if(Hi&&zc.textAnchor!==Hi)continue;let Bu=this.attemptAnchorPlacement(zc,Wi,Uu,vl,jc,Ie,Pe,V,Ge,k,ee,tw,st,_,Cp,M,L,XA,Xe);if(Bu&&(rs=Bu.placedGlyphBoxes,rs&&rs.placeable))return Cn=!0,Or=Bu.shift,rs}Hi?Hi=null:tw=fe}return g&&!rs&&(rs={box:this.collisionIndex.placeCollisionBox(Ap,"always",V,Ge,k,Pe,Ie,M,ee.predicate,Xe,void 0,vt).box,offscreen:!1,placeable:!1,occluded:!1}),rs};gl(()=>ro(Ap,Zt.iconBox,o.ao.horizontal),()=>{let Wi=Zt.verticalTextBox;return _.allowVerticalPlacement&&(!Fn||!Fn.placeable)&&st.numVerticalGlyphVertices>0&&Wi?ro(Wi,Zt.verticalIconBox,o.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Fn&&(Cn=Fn.placeable,bi=Fn.offscreen);let Cs=Pa(Fn&&Fn.placeable);if(!Cn&&this.prevPlacement){let Wi=this.prevPlacement.variableOffsets[st.crossTileID];Wi&&(this.variableOffsets[st.crossTileID]=Wi,this.markUsedJustification(_,Wi.anchor,st,Cs))}}}if(to=Fn,Cn=to&&to.placeable,bi=to&&to.offscreen,st.useRuntimeCollisionCircles){let Pa=_.text.placedSymbolArray.get(st.centerJustifiedTextSymbolIndex),gl=o.ap(_.textSizeData,K,Pa),ua=E.get("text-padding");ho=this.collisionIndex.placeCollisionCircles(fe,Pa,_.lineVertexArray,_.glyphOffsetArray,gl,k,B,g,Pe,ee.predicate,st.collisionCircleDiameter,ua,M,Xe),ho.circles.length&&ho.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),Cn=ve||ho.circles.length>0&&!ho.collisionDetected,bi=bi&&ho.offscreen}if(Zt.iconFeatureIndex&&(qc=Zt.iconFeatureIndex),Zt.iconBox){let Pa=gl=>this.collisionIndex.placeCollisionBox(gl,Se,V,Ge,k,Pe,Ie,L,ee.predicate,Xe,Ee&&Or?Or:void 0,vt);$i&&$i.placeable&&Zt.verticalIconBox?(la=Pa(Zt.verticalIconBox),li=la.placeable):(la=Pa(Zt.iconBox),li=la.placeable),bi=bi&&la.offscreen}let Mp=ce||st.numHorizontalGlyphVertices===0&&st.numVerticalGlyphVertices===0,th=ue||st.numIconVertices===0;Mp||th?th?Mp||(li=li&&Cn):Cn=li&&Cn:li=Cn=li&&Cn;let rh=li&&la.placeable;if(Cn&&to.placeable&&this.collisionIndex.insertCollisionBox(to.box,fe,E.get("text-ignore-placement"),_.bucketInstanceId,$i&&$i.placeable&&kc?kc:ml,ee.ID),rh&&this.collisionIndex.insertCollisionBox(la.box,Se,E.get("icon-ignore-placement"),_.bucketInstanceId,qc,ee.ID),ho&&Cn&&this.collisionIndex.insertCollisionCircles(ho.circles,fe,E.get("text-ignore-placement"),_.bucketInstanceId,ml,ee.ID),g&&this.storeCollisionData(_.bucketInstanceId,Nr,Zt,to,la,ho),st.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[st.crossTileID]=new oA((Cn||Qe)&&!(to!=null&&to.occluded),(li||Ve)&&!(la!=null&&la.occluded),bi||_.justReloaded),h[st.crossTileID]=!0};if(je){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let st=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Zt=st.length-1;Zt>=0;--Zt){let Nr=st[Zt];bt(_.symbolInstances.get(Nr),_.collisionArrays[Nr],Nr)}}else for(let st=a.symbolInstanceStart;st<a.symbolInstanceEnd;st++)bt(_.symbolInstances.get(st),_.collisionArrays[st],st);_.justReloaded=!1}storeCollisionData(a,h,g,_,E,M){if(g.textBox||g.iconBox){let L,k;this.collisionBoxArrays.has(a)?L=this.collisionBoxArrays.get(a):(L=new Map,this.collisionBoxArrays.set(a,L)),L.has(h)?k=L.get(h):(k={text:null,icon:null},L.set(h,k)),g.textBox&&(k.text=_.box),g.iconBox&&(k.icon=E.box)}if(M){let L=this.collisionCircleArrays[a];L===void 0&&(L=this.collisionCircleArrays[a]=[]);for(let k=0;k<M.circles.length;k+=4)L.push(M.circles[k+0]-Ai),L.push(M.circles[k+1]-Ai),L.push(M.circles[k+2]),L.push(M.collisionDetected?1:0)}}markUsedJustification(a,h,g,_){let E;E=_===o.ao.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.aG(h)];let M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(let L of M)L>=0&&(a.text.placedSymbolArray.get(L).crossTileID=E>=0&&L!==E?0:g.crossTileID)}markUsedOrientation(a,h,g){let _=h===o.ao.horizontal||h===o.ao.horizontalOnly?h:0,E=h===o.ao.vertical?h:0,M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(let L of M)a.text.placedSymbolArray.get(L).placedOrientation=_;g.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;let h=this.prevPlacement,g=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;let _=h?h.symbolFadeChange(a):1,E=h?h.opacities:{},M=h?h.variableOffsets:{},L=h?h.placedOrientations:{};for(let k in this.placements){let B=this.placements[k],V=E[k];V?(this.opacities[k]=new Un(V,_,B.text,B.icon),g=g||B.text!==V.text.placed||B.icon!==V.icon.placed):(this.opacities[k]=new Un(null,_,B.text,B.icon,B.skipFade),g=g||B.text||B.icon)}for(let k in E){let B=E[k];if(!this.opacities[k]){let V=new Un(B,_,!1,!1);V.isHidden()||(this.opacities[k]=V,g=g||B.text.placed||B.icon.placed)}}for(let k in M)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=M[k]);for(let k in L)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=L[k]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:a)}updateLayerOpacities(a,h){let g={};for(let _ of h){let E=_.getBucket(a);E&&_.latestFeatureIndex&&a.id===E.layerIds[0]&&this.updateBucketOpacities(E,_.tileID,g,_.collisionBoxArray)}}updateBucketOpacities(a,h,g,_){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();let E=a.layers[0],M=E.layout,L=new Un(null,0,!1,!1,!0),k=M.get("text-allow-overlap"),B=M.get("icon-allow-overlap"),V=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=M.get("text-rotation-alignment")==="map",H=M.get("text-pitch-alignment")==="map",K=M.get("icon-text-fit")!=="none",ee=new Un(null,0,k&&(B||!a.hasIconData()||M.get("icon-optional")),B&&(k||!a.hasTextData()||M.get("text-optional")),!0);!a.collisionArrays&&_&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(_);let ce=(fe,ve,Se)=>{for(let we=0;we<ve/4;we++)fe.opacityVertexArray.emplaceBack(Se);fe.hasVisibleVertices=fe.hasVisibleVertices||Se!==lp},ue=this.collisionBoxArrays.get(a.bucketInstanceId);for(let fe=0;fe<a.symbolInstances.length;fe++){let ve=a.symbolInstances.get(fe),{numHorizontalGlyphVertices:Se,numVerticalGlyphVertices:we,crossTileID:Ie}=ve,Pe=this.opacities[Ie];g[Ie]?Pe=L:Pe||(Pe=ee,this.opacities[Ie]=Pe),g[Ie]=!0;let Ee=ve.numIconVertices>0,je=this.placedOrientations[ve.crossTileID],Qe=je===o.ao.vertical,Ve=je===o.ao.horizontal||je===o.ao.horizontalOnly;if(Se>0||we>0){let Xe=cb(Pe.text);ce(a.text,Se,Qe?lp:Xe),ce(a.text,we,Ve?lp:Xe);let vt=Pe.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(Zt=>{Zt>=0&&(a.text.placedSymbolArray.get(Zt).hidden=vt||Qe?1:0)}),ve.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=vt||Ve?1:0);let bt=this.variableOffsets[ve.crossTileID];bt&&this.markUsedJustification(a,bt.anchor,ve,je);let st=this.placedOrientations[ve.crossTileID];st&&(this.markUsedJustification(a,"left",ve,st),this.markUsedOrientation(a,st,ve))}if(Ee){let Xe=cb(Pe.icon),vt=!(K&&ve.verticalPlacedIconSymbolIndex&&Qe);ve.placedIconSymbolIndex>=0&&(ce(a.icon,ve.numIconVertices,vt?Xe:lp),a.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(ce(a.icon,ve.numVerticalIconVertices,vt?lp:Xe),a.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}let Ge=ue&&ue.has(fe)?ue.get(fe):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){let Xe=a.collisionArrays[fe];if(Xe){let vt=new o.P(0,0);if(Xe.textBox||Xe.verticalTextBox){let bt=!0;if(V){let st=this.variableOffsets[Ie];st?(vt=Pc(st.anchor,st.width,st.height,st.textOffset,st.textBoxScale),W&&vt._rotate(H?-this.transform.bearingInRadians:this.transform.bearingInRadians)):bt=!1}if(Xe.textBox||Xe.verticalTextBox){let st;Xe.textBox&&(st=Qe),Xe.verticalTextBox&&(st=Ve),ub(a.textCollisionBox.collisionVertexArray,Pe.text.placed,!bt||st,Ge.text,vt.x,vt.y)}}if(Xe.iconBox||Xe.verticalIconBox){let bt=!!(!Ve&&Xe.verticalIconBox),st;Xe.iconBox&&(st=bt),Xe.verticalIconBox&&(st=!bt),ub(a.iconCollisionBox.collisionVertexArray,Pe.icon.placed,st,Ge.icon,K?vt.x:0,K?vt.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,h){let g=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*g>a}setStale(){this.stale=!0}}function ub(w,a,h,g,_,E){g&&g.length!==0||(g=[0,0,0,0]);let M=g[0]-Ai,L=g[1]-Ai,k=g[2]-Ai,B=g[3]-Ai;w.emplaceBack(a?1:0,h?1:0,_||0,E||0,M,L),w.emplaceBack(a?1:0,h?1:0,_||0,E||0,k,L),w.emplaceBack(a?1:0,h?1:0,_||0,E||0,k,B),w.emplaceBack(a?1:0,h?1:0,_||0,E||0,M,B)}let aA=Math.pow(2,25),sA=Math.pow(2,24),sp=Math.pow(2,17),lA=Math.pow(2,16),Pq=Math.pow(2,9),Rq=Math.pow(2,8),Oq=Math.pow(2,1);function cb(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;let a=w.placed?1:0,h=Math.floor(127*w.opacity);return h*aA+a*sA+h*sp+a*lA+h*Pq+a*Rq+h*Oq+a}let lp=0;class fb{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,h,g,_,E){let M=this._bucketParts;for(;this._currentTileIndex<a.length;)if(h.getBucketParts(M,_,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((L,k)=>L.sortKey-k.sortKey));this._currentPartIndex<M.length;)if(h.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,E())return!0;return!1}}class hb{constructor(a,h,g,_,E,M,L,k){this.placement=new Rc(a,h,M,L,k),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(a,h,g){let _=x.now(),E=()=>!this._forceFullPlacement&&x.now()-_>2;for(;this._currentPlacementIndex>=0;){let M=h[a[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=L)&&(!M.maxzoom||M.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new fb(M)),this._inProgressLayer.continuePlacement(g[M.source],this.placement,this._showCollisionBoxes,M,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}let up=512/o.$/2;class pb{constructor(a,h,g){this.tileID=a,this.bucketInstanceId=g,this._symbolsByKey={};let _=new Map;for(let E=0;E<h.length;E++){let M=h.get(E),L=M.key,k=_.get(L);k?k.push(M):_.set(L,[M])}for(let[E,M]of _){let L={positions:M.map(k=>({x:Math.floor(k.anchorX*up),y:Math.floor(k.anchorY*up)})),crossTileIDs:M.map(k=>k.crossTileID)};if(L.positions.length>128){let k=new o.aI(L.positions.length,16,Uint16Array);for(let{x:B,y:V}of L.positions)k.add(B,V);k.finish(),delete L.positions,L.index=k}this._symbolsByKey[E]=L}}getScaledCoordinates(a,h){let{x:g,y:_,z:E}=this.tileID.canonical,{x:M,y:L,z:k}=h.canonical,B=up/Math.pow(2,k-E),V=(L*o.$+a.anchorY)*B,W=_*o.$*up;return{x:Math.floor((M*o.$+a.anchorX)*B-g*o.$*up),y:Math.floor(V-W)}}findMatches(a,h,g){let _=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let E=0;E<a.length;E++){let M=a.get(E);if(M.crossTileID)continue;let L=this._symbolsByKey[M.key];if(!L)continue;let k=this.getScaledCoordinates(M,h);if(L.index){let B=L.index.range(k.x-_,k.y-_,k.x+_,k.y+_).sort();for(let V of B){let W=L.crossTileIDs[V];if(!g[W]){g[W]=!0,M.crossTileID=W;break}}}else if(L.positions)for(let B=0;B<L.positions.length;B++){let V=L.positions[B],W=L.crossTileIDs[B];if(Math.abs(V.x-k.x)<=_&&Math.abs(V.y-k.y)<=_&&!g[W]){g[W]=!0,M.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class db{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Lq{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){let h=Math.round((a-this.lng)/360);if(h!==0)for(let g in this.indexes){let _=this.indexes[g],E={};for(let M in _){let L=_[M];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+h),E[L.tileID.key]=L}this.indexes[g]=E}this.lng=a}addBucket(a,h,g){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let E=0;E<h.symbolInstances.length;E++)h.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});let _=this.usedCrossTileIDs[a.overscaledZ];for(let E in this.indexes){let M=this.indexes[E];if(Number(E)>a.overscaledZ)for(let L in M){let k=M[L];k.tileID.isChildOf(a)&&k.findMatches(h.symbolInstances,a,_)}else{let L=M[a.scaledTo(Number(E)).key];L&&L.findMatches(h.symbolInstances,a,_)}}for(let E=0;E<h.symbolInstances.length;E++){let M=h.symbolInstances.get(E);M.crossTileID||(M.crossTileID=g.generate(),_[M.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new pb(a,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(a,h){for(let g of h.getCrossTileIDsLists())for(let _ of g)delete this.usedCrossTileIDs[a][_]}removeStaleBuckets(a){let h=!1;for(let g in this.indexes){let _=this.indexes[g];for(let E in _)a[_[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,_[E]),delete _[E],h=!0)}return h}}class cp{constructor(){this.layerIndexes={},this.crossTileIDs=new db,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,h,g){let _=this.layerIndexes[a.id];_===void 0&&(_=this.layerIndexes[a.id]=new Lq);let E=!1,M={};_.handleWrapJump(g);for(let L of h){let k=L.getBucket(a);k&&a.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(L.tileID,k,this.crossTileIDs)&&(E=!0),M[k.bucketInstanceId]=!0)}return _.removeStaleBuckets(M)&&(E=!0),E}pruneUnusedLayers(a){let h={};a.forEach(g=>{h[g]=!0});for(let g in this.layerIndexes)h[g]||delete this.layerIndexes[g]}}var xm="void main() {fragColor=vec4(1.0);}";let sl={prelude:Gr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Gr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Gr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Gr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Gr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Gr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Gr(xm,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Gr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Gr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Gr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Gr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Gr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Gr(xm,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Gr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Gr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Gr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Gr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Gr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Gr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Gr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Gr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Gr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Gr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Gr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Gr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Gr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Gr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Gr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Gr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Gr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Gr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Gr(w,a){let h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=a.match(/in ([\w]+) ([\w]+)/g),_=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=E?E.concat(_):_,L={};return{fragmentSource:w=w.replace(h,(k,B,V,W,H)=>(L[H]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${V} ${W} ${H};
#else
uniform ${V} ${W} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${V} ${W} ${H} = u_${H};
#endif
`)),vertexSource:a=a.replace(h,(k,B,V,W,H)=>{let K=W==="float"?"vec2":"vec4",ee=H.match(/color/)?"color":K;return L[H]?B==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${V} ${K} a_${H};
out ${V} ${W} ${H};
#else
uniform ${V} ${W} u_${H};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${V} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${ee}(a_${H}, u_${H}_t);
#else
    ${V} ${W} ${H} = u_${H};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${V} ${K} a_${H};
#else
uniform ${V} ${W} u_${H};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${V} ${W} ${H} = a_${H};
#else
    ${V} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${V} ${W} ${H} = unpack_mix_${ee}(a_${H}, u_${H}_t);
#else
    ${V} ${W} ${H} = u_${H};
#endif
`}),staticAttributes:g,staticUniforms:M}}class Ff{constructor(a,h,g){this.vertexBuffer=a,this.indexBuffer=h,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Oc=o.aJ([{name:"a_pos",type:"Int16",components:2}]);let qu="#define PROJECTION_MERCATOR",jf="mercator";class $r{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return jf}get shaderDefine(){return qu}get shaderPreludeCode(){return sl.projectionMercator}get vertexShaderPreludeCode(){return sl.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,h,g,_,E){if(this._cachedMesh)return this._cachedMesh;let M=new o.aL;M.emplaceBack(0,0),M.emplaceBack(o.$,0),M.emplaceBack(0,o.$),M.emplaceBack(o.$,o.$);let L=a.createVertexBuffer(M,Oc.members),k=o.aM.simpleSegment(0,0,4,2),B=new o.aN;B.emplaceBack(1,0,2),B.emplaceBack(1,2,3);let V=a.createIndexBuffer(B);return this._cachedMesh=new Ff(L,V,k),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class zf{constructor(a=0,h=0,g=0,_=0){if(isNaN(a)||a<0||isNaN(h)||h<0||isNaN(g)||g<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=h,this.left=g,this.right=_}interpolate(a,h,g){return h.top!=null&&a.top!=null&&(this.top=o.C.number(a.top,h.top,g)),h.bottom!=null&&a.bottom!=null&&(this.bottom=o.C.number(a.bottom,h.bottom,g)),h.left!=null&&a.left!=null&&(this.left=o.C.number(a.left,h.left,g)),h.right!=null&&a.right!=null&&(this.right=o.C.number(a.right,h.right,g)),this}getCenter(a,h){let g=o.ah((this.left+a-this.right)/2,0,a),_=o.ah((this.top+h-this.bottom)/2,0,h);return new o.P(g,_)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new zf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Pv(w,a){if(!w.renderWorldCopies||w.lngRange)return;let h=a.lng-w.center.lng;a.lng+=h>180?-360:h<-180?360:0}function Rv(w){return Math.max(0,Math.floor(w))}class ia{constructor(a,h,g,_,E,M){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=M===void 0||!!M,this._minZoom=h||0,this._maxZoom=g||22,this._minPitch=_==null?0:_,this._maxPitch=E==null?60:E,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Rv(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new zf,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,h,g){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=Rv(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new zf(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!g&&a.autoCalculateNearFarZ,h&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){let h=o.aO(a,-180,180)*Math.PI/180;var g,_,E,M,L,k,B,V,W;this._bearingInRadians!==h&&(this._unmodified=!1,this._bearingInRadians=h,this._calcMatrices(),this._rotationMatrix=f(),g=this._rotationMatrix,E=-this._bearingInRadians,M=(_=this._rotationMatrix)[0],L=_[1],k=_[2],B=_[3],V=Math.sin(E),W=Math.cos(E),g[0]=M*W+k*V,g[1]=L*W+B*V,g[2]=M*-V+k*W,g[3]=L*-V+B*W)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){let h=o.ah(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==h&&(this._unmodified=!1,this._pitchInRadians=h,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){let h=a/180*Math.PI;this._rollInRadians!==h&&(this._unmodified=!1,this._rollInRadians=h,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aP(this._fovInRadians)}setFov(a){a=o.ah(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ae(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){let h=this.getConstrained(this._center,a).zoom;this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this._tileZoom=Math.max(0,Math.floor(h)),this._scale=o.af(h),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,h){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=h,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,h,g){this._unmodified=!1,this._edgeInsets.interpolate(a,h,g),this._constrain(),this._calcMatrices()}resize(a,h,g=!0){this._width=a,this._height=h,g&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Lt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ai,o.ai])}getConstrained(a,h){return this._callbacks.getConstrained(a,h)}getCameraQueryGeometry(a,h){if(h.length===1)return[h[0],a];{let{minX:g,minY:_,maxX:E,maxY:M}=o.a2.fromPoints(h).extend(a);return[new o.P(g,_),new o.P(E,_),new o.P(E,M),new o.P(g,M),new o.P(g,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let a=this._unmodified,{center:h,zoom:g}=this.getConstrained(this.center,this.zoom);this.setCenter(h),this.setZoom(g),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ag(new Float64Array(16));o.N(a,a,[this._width/2,-this._height/2,1]),o.M(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ag(new Float64Array(16)),o.N(a,a,[1,-1,1]),o.M(a,a,[-1,-1,0]),o.N(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,h,g,_){let E=g!==void 0?g:this.bearing,M=_=_!==void 0?_:this.pitch,L=o.a1.fromLngLat(a,h),k=-Math.cos(o.ae(M)),B=Math.sin(o.ae(M)),V=B*Math.sin(o.ae(E)),W=-B*Math.cos(o.ae(E)),H=this.elevation,K=h-H,ee;k*K>=0||Math.abs(k)<.1?(ee=1e4,H=h+ee*k):ee=-K/k;let ce,ue,fe=o.aQ(1,L.y),ve=0;do{if(ve+=1,ve>10)break;ue=ee/fe,ce=new o.a1(L.x+V*ue,L.y+W*ue),fe=1/ce.meterInMercatorCoordinateUnits()}while(Math.abs(ee-ue*fe)>1e-12);return{center:ce.toLngLat(),elevation:H,zoom:o.ak(this.height/2/Math.tan(this.fovInRadians/2)/ue/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;let h=o.aj(1,this.center.lat)*this.worldSize,g=this.cameraToCenterDistance/h,_=o.a1.fromLngLat(this.center,this.elevation),E=Be(this.center,this.elevation,this.pitch,this.bearing,g);this._elevation=a;let M=this.calculateCenterFromCameraLngLatAlt(E.toLngLat(),o.aQ(E.z,_.y),this.bearing,this.pitch);this._elevation=M.elevation,this._center=M.center,this.setZoom(M.zoom)}getCameraPoint(){let a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let a=o.aj(1,this.center.lat)*this.worldSize;return Be(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];let h=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/h,a.canonical.y/h,1/h/o.$,1/h/o.$]}}class co{constructor(a,h){this.min=a,this.max=h,this.center=o.aR([],o.aS([],this.min,this.max),.5)}quadrant(a){let h=[a%2==0,a<2],g=o.aT(this.min),_=o.aT(this.max);for(let E=0;E<h.length;E++)g[E]=h[E]?this.min[E]:this.center[E],_[E]=h[E]?this.center[E]:this.max[E];return _[2]=this.max[2],new co(g,_)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let h=!0;for(let g=0;g<a.planes.length;g++){let _=this.intersectsPlane(a.planes[g]);if(_===0)return 0;_===1&&(h=!1)}return h?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let h=a[3],g=a[3];for(let _=0;_<3;_++)a[_]>0?(h+=a[_]*this.min[_],g+=a[_]*this.max[_]):(g+=a[_]*this.min[_],h+=a[_]*this.max[_]);return h>=0?2:g<0?0:1}}class oa{distanceToTile2d(a,h,g,_){let E=_.distanceX([a,h]),M=_.distanceY([a,h]);return Math.hypot(E,M)}getWrap(a,h,g){return g}getTileBoundingVolume(a,h,g,_){var E,M;let L=0,k=0;if(_!=null&&_.terrain){let V=new o.Z(a.z,h,a.z,a.x,a.y),W=_.terrain.getMinMaxElevation(V);L=(E=W.minElevation)!==null&&E!==void 0?E:Math.min(0,g),k=(M=W.maxElevation)!==null&&M!==void 0?M:Math.max(0,g)}let B=1<<a.z;return new co([h+a.x/B,a.y/B,L],[h+(a.x+1)/B,(a.y+1)/B,k])}allowVariableZoom(a,h){let g=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,_=o.ah(78.5-g/2,0,60);return!!h.terrain||a.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Gi{constructor(a,h,g){this.points=a,this.planes=h,this.aabb=g}static fromInvProjectionMatrix(a,h=1,g=0,_,E){let M=E?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],L=Math.pow(2,g),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>function(K,ee,ce,ue){let fe=o.aw([],K,ee),ve=1/fe[3]/ce*ue;return o.aY(fe,fe,[ve,ve,1/fe[3],ve])}(H,a,h,L));_&&function(H,K,ee,ce){let ue=ce?4:0,fe=ce?0:4,ve=0,Se=[],we=[];for(let Ee=0;Ee<4;Ee++){let je=o.aU([],H[Ee+fe],H[Ee+ue]),Qe=o.aZ(je);o.aR(je,je,1/Qe),Se.push(Qe),we.push(je)}for(let Ee=0;Ee<4;Ee++){let je=o.a_(H[Ee+ue],we[Ee],ee);ve=je!==null&&je>=0?Math.max(ve,je):Math.max(ve,Se[Ee])}let Ie=function(Ee,je){let Qe=o.aU([],Ee[je[0]],Ee[je[1]]),Ve=o.aU([],Ee[je[2]],Ee[je[1]]),Ge=[0,0,0,0];return o.aV(Ge,o.aW([],Qe,Ve)),Ge[3]=-o.aX(Ge,Ee[je[0]]),Ge}(H,K),Pe=function(Ee,je){let Qe=o.a$(Ee),Ve=o.b0([],Ee,1/Qe),Ge=o.aU([],je,o.aR([],Ve,o.aX(je,Ve))),Xe=o.a$(Ge);if(Xe>0){let vt=Math.sqrt(1-Ve[3]*Ve[3]),bt=o.aR([],Ve,-Ve[3]),st=o.aS([],bt,o.aR([],Ge,vt/Xe));return o.b1(je,st)}return null}(ee,Ie);if(Pe!==null){let Ee=Pe/o.aX(we[0],Ie);ve=Math.min(ve,Ee)}for(let Ee=0;Ee<4;Ee++){let je=Math.min(ve,Se[Ee]);H[Ee+fe]=[H[Ee+ue][0]+we[Ee][0]*je,H[Ee+ue][1]+we[Ee][1]*je,H[Ee+ue][2]+we[Ee][2]*je,1]}}(k,M[0],_,E);let B=M.map(H=>{let K=o.aU([],k[H[0]],k[H[1]]),ee=o.aU([],k[H[2]],k[H[1]]),ce=o.aV([],o.aW([],K,ee)),ue=-o.aX(ce,k[H[1]]);return ce.concat(ue)}),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],W=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let H of k)for(let K=0;K<3;K++)V[K]=Math.min(V[K],H[K]),W[K]=Math.max(W[K],H[K]);return new Gi(k,B,new co(V,W))}}class Bn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,h,g){return this._helper.interpolatePadding(a,h,g)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,h,g=!0){this._helper.resize(a,h,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,h){this._helper.overrideNearFarZ(a,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,h){}constructor(a,h,g,_,E){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new ia({calcMatrices:()=>{this._calcMatrices()},getConstrained:(M,L)=>this.getConstrained(M,L)},a,h,g,_,E),this._coveringTilesDetailsProvider=new oa}clone(){let a=new Bn;return a.apply(this),a}apply(a,h,g){this._helper.apply(a,h,g)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){let h=[new o.b2(0,a)];if(this._helper._renderWorldCopies){let g=this.screenPointToMercatorCoordinate(new o.P(0,0)),_=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),E=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),L=Math.floor(Math.min(g.x,_.x,E.x,M.x)),k=Math.floor(Math.max(g.x,_.x,E.x,M.x)),B=1;for(let V=L-B;V<=k+B;V++)V!==0&&h.push(new o.b2(V,a))}return h}getCameraFrustum(){return Gi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){let h=this.screenPointToLocation(this.centerPoint,a),g=a?a.getElevationForLngLatZoom(h,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(g)}setLocationAtPoint(a,h){let g=o.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(h,g),E=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,g),M=o.a1.fromLngLat(a),L=new o.a1(M.x-(_.x-E.x),M.y-(_.y-E.y));this.setCenter(L==null?void 0:L.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,h){return h?this.coordinatePoint(o.a1.fromLngLat(a),h.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a1.fromLngLat(a))}screenPointToLocation(a,h){var g;return(g=this.screenPointToMercatorCoordinate(a,h))===null||g===void 0?void 0:g.toLngLat()}screenPointToMercatorCoordinate(a,h){if(h){let g=h.pointCoordinate(a);if(g!=null)return g}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,h){let g=h||0,_=[a.x,a.y,0,1],E=[a.x,a.y,1,1];o.aw(_,_,this._pixelMatrixInverse),o.aw(E,E,this._pixelMatrixInverse);let M=_[3],L=E[3],k=_[1]/M,B=E[1]/L,V=_[2]/M,W=E[2]/L,H=V===W?0:(g-V)/(W-V);return new o.a1(o.C.number(_[0]/M,E[0]/L,H)/this.worldSize,o.C.number(k,B,H)/this.worldSize,g)}coordinatePoint(a,h=0,g=this._pixelMatrix){let _=[a.x*this.worldSize,a.y*this.worldSize,h,1];return o.aw(_,_,g),new o.P(_[0]/_[3],_[1]/_[3])}getBounds(){let a=Math.max(0,this._helper._height/2-Ae(this));return new Lt().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,h){return h?h.pointCoordinate(a)!=null:a.y>this.height/2-Ae(this)}calculatePosMatrix(a,h=!1,g){var _;let E=(_=a.key)!==null&&_!==void 0?_:o.b3(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),M=h?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(E)){let B=M.get(E);return g?B.f32:B.f64}let L=Le(a,this.worldSize);o.O(L,h?this._alignedProjMatrix:this._viewProjMatrix,L);let k={f64:L,f32:new Float32Array(L)};return M.set(E,k),g?k.f32:k.f64}calculateFogMatrix(a){let h=a.key,g=this._fogMatrixCacheF32;if(g.has(h))return g.get(h);let _=Le(a,this.worldSize);return o.O(_,this._fogMatrix,_),g.set(h,new Float32Array(_)),g.get(h)}getConstrained(a,h){h=o.ah(+h,this.minZoom,this.maxZoom);let g={center:new o.S(a.lng,a.lat),zoom:h},_=this._helper._lngRange;if(!this._helper._renderWorldCopies&&_===null){let Se=179.9999999999;_=[-Se,Se]}let E=this.tileSize*o.af(g.zoom),M=0,L=E,k=0,B=E,V=0,W=0,{x:H,y:K}=this.size;if(this._helper._latRange){let Se=this._helper._latRange;M=o.U(Se[1])*E,L=o.U(Se[0])*E,L-M<K&&(V=K/(L-M))}_&&(k=o.aO(o.V(_[0])*E,0,E),B=o.aO(o.V(_[1])*E,0,E),B<k&&(B+=E),B-k<H&&(W=H/(B-k)));let{x:ee,y:ce}=se(E,a),ue,fe,ve=Math.max(W||0,V||0);if(ve){let Se=new o.P(W?(B+k)/2:ee,V?(L+M)/2:ce);return g.center=_e(E,Se).wrap(),g.zoom+=o.ak(ve),g}if(this._helper._latRange){let Se=K/2;ce-Se<M&&(fe=M+Se),ce+Se>L&&(fe=L-Se)}if(_){let Se=(k+B)/2,we=ee;this._helper._renderWorldCopies&&(we=o.aO(ee,Se-E/2,Se+E/2));let Ie=H/2;we-Ie<k&&(ue=k+Ie),we+Ie>B&&(ue=B-Ie)}if(ue!==void 0||fe!==void 0){let Se=new o.P(ue!=null?ue:ee,fe!=null?fe:ce);g.center=_e(E,Se).wrap()}return g}calculateCenterFromCameraLngLatAlt(a,h,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(a,h,g,_)}_calculateNearFarZIfNeeded(a,h,g){if(!this._helper.autoCalculateNearFarZ)return;let _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),E=a-_*this._helper._pixelPerMeter/Math.cos(h),M=_<0?E:a,L=Math.PI/2+this.pitchInRadians,k=o.ae(this.fov)*(Math.abs(Math.cos(o.ae(this.roll)))*this.height+Math.abs(Math.sin(o.ae(this.roll)))*this.width)/this.height*(.5+g.y/this.height),B=Math.sin(k)*M/Math.sin(o.ah(Math.PI-L-k,.01,Math.PI-.01)),V=Ae(this),W=Math.atan(V/this._helper.cameraToCenterDistance),H=o.ae(.75),K=W>H?2*W*(.5+g.y/(2*V)):H,ee=Math.sin(K)*M/Math.sin(o.ah(Math.PI-L-K,.01,Math.PI-.01)),ce=Math.min(B,ee);this._helper._farZ=1.01*(Math.cos(Math.PI/2-h)*ce+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let a=this.centerOffset,h=se(this.worldSize,this.center),g=h.x,_=h.y;this._helper._pixelPerMeter=o.aj(1,this.center.lat)*this.worldSize;let E=o.ae(Math.min(this.pitch,te)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(E)),L;this._calculateNearFarZIfNeeded(M,E,a),L=new Float64Array(16),o.b4(L,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aq(this._invProjMatrix,L),L[8]=2*-a.x/this._helper._width,L[9]=2*a.y/this._helper._height,this._projectionMatrix=o.b5(L),o.N(L,L,[1,-1,1]),o.M(L,L,[0,0,-this._helper.cameraToCenterDistance]),o.b6(L,L,-this.rollInRadians),o.b7(L,L,this.pitchInRadians),o.b6(L,L,-this.bearingInRadians),o.M(L,L,[-g,-_,0]),this._mercatorMatrix=o.N([],L,[this.worldSize,this.worldSize,this.worldSize]),o.N(L,L,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,L),o.M(L,L,[0,0,-this.elevation]),this._viewProjMatrix=L,this._invViewProjMatrix=o.aq([],L);let k=[0,0,-1,1];o.aw(k,k,this._invViewProjMatrix),this._cameraPosition=[k[0]/k[3],k[1]/k[3],k[2]/k[3]],this._fogMatrix=new Float64Array(16),o.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-g,-_,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,L);let B=this._helper._width%2/2,V=this._helper._height%2/2,W=Math.cos(this.bearingInRadians),H=Math.sin(-this.bearingInRadians),K=g-Math.round(g)+W*B+H*V,ee=_-Math.round(_)+W*V+H*B,ce=new Float64Array(L);if(o.M(ce,ce,[K>.5?K-1:K,ee>.5?ee-1:ee,0]),this._alignedProjMatrix=ce,L=o.aq(new Float64Array(16),this._pixelMatrix),!L)throw new Error("failed to invert matrix");this._pixelMatrixInverse=L,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let a=this.screenPointToMercatorCoordinate(new o.P(0,0)),h=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.aw(h,h,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let a=o.aj(1,this.center.lat)*this.worldSize;return Be(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,h){let g=o.a1.fromLngLat(a),_=[g.x*this.worldSize,g.y*this.worldSize,h,1];return o.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(a){let{overscaledTileID:h,aligned:g,applyTerrainMatrix:_}=a,E=this._helper.getMercatorTileCoordinates(h),M=h?this.calculatePosMatrix(h,g,!0):null,L;return L=h&&h.terrainRttPosMatrix32f&&_?h.terrainRttPosMatrix32f:M||o.b8(),{mainMatrix:L,tileMercatorCoords:E,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:L}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,h,g){return 1}transformLightDirection(a){return o.aT(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,h,g,_){let E=this.calculatePosMatrix(g),M;_?(M=[a,h,_(a,h),1],o.aw(M,M,E)):(M=[a,h,0,1],ap(M,M,E));let L=M[3];return{point:new o.P(M[0]/L,M[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}populateCache(a){for(let h of a)this.calculatePosMatrix(h)}getMatrixForModel(a,h){let g=o.a1.fromLngLat(a,h),_=g.meterInMercatorCoordinateUnits(),E=o.b9();return o.M(E,E,[g.x,g.y,g.z]),o.b6(E,E,Math.PI),o.b7(E,E,Math.PI/2),o.N(E,E,[-_,_,_]),E}getProjectionDataForCustomLayer(a=!0){let h=new o.Z(0,0,0,0,0),g=this.getProjectionData({overscaledTileID:h,applyGlobeMatrix:a}),_=Le(h,this.worldSize);o.O(_,this._viewProjMatrix,_),g.tileMercatorCoords=[0,0,1,1];let E=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],M=o.ba();return o.N(M,_,E),g.fallbackMatrix=M,g.mainMatrix=M,g}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function uA(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function aa(w){if(w.useSlerp){if(w.k<1){let a=o.bb(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),h=o.bb(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),g=new Float64Array(4);o.bc(g,a,h,w.k);let _=o.bd(g);w.tr.setRoll(_.roll),w.tr.setPitch(_.pitch),w.tr.setBearing(_.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);}else w.tr.setRoll(o.C.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(o.C.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(o.C.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function es(w,a,h,g,_){let E=_.padding,M=se(_.worldSize,h.getNorthWest()),L=se(_.worldSize,h.getNorthEast()),k=se(_.worldSize,h.getSouthEast()),B=se(_.worldSize,h.getSouthWest()),V=o.ae(-g),W=M.rotate(V),H=L.rotate(V),K=k.rotate(V),ee=B.rotate(V),ce=new o.P(Math.max(W.x,H.x,ee.x,K.x),Math.max(W.y,H.y,ee.y,K.y)),ue=new o.P(Math.min(W.x,H.x,ee.x,K.x),Math.min(W.y,H.y,ee.y,K.y)),fe=ce.sub(ue),ve=(_.width-(E.left+E.right+a.left+a.right))/fe.x,Se=(_.height-(E.top+E.bottom+a.top+a.bottom))/fe.y;if(Se<0||ve<0)return void uA();let we=Math.min(o.ak(_.scale*Math.min(ve,Se)),w.maxZoom),Ie=o.P.convert(w.offset),Pe=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ae(g)),Ee=Ie.add(Pe).mult(_.scale/o.af(we));return{center:_e(_.worldSize,M.add(k).div(2).sub(Ee)),zoom:we,bearing:g}}class Go{get useGlobeControls(){return!1}handlePanInertia(a,h){let g=a.mag(),_=Math.abs(Ae(h));return{easingOffset:a.mult(Math.min(.75*_/g,1)),easingCenter:h.center}}handleMapControlsRollPitchBearingZoom(a,h){a.bearingDelta&&h.setBearing(h.bearing+a.bearingDelta),a.pitchDelta&&h.setPitch(h.pitch+a.pitchDelta),a.rollDelta&&h.setRoll(h.roll+a.rollDelta),a.zoomDelta&&h.setZoom(h.zoom+a.zoomDelta)}handleMapControlsPan(a,h,g){a.around.distSqr(h.centerPoint)<.01||h.setLocationAtPoint(g,a.around)}cameraForBoxAndBearing(a,h,g,_,E){return es(a,h,g,_,E)}handleJumpToCenterZoom(a,h){a.zoom!==(h.zoom!==void 0?+h.zoom:a.zoom)&&a.setZoom(+h.zoom),h.center!==void 0&&a.setCenter(o.S.convert(h.center))}handleEaseTo(a,h){let g=a.zoom,_=a.padding,E={roll:a.roll,pitch:a.pitch,bearing:a.bearing},M={roll:h.roll===void 0?a.roll:h.roll,pitch:h.pitch===void 0?a.pitch:h.pitch,bearing:h.bearing===void 0?a.bearing:h.bearing},L=h.zoom!==void 0,k=!a.isPaddingEqual(h.padding),B=!1,V=L?+h.zoom:a.zoom,W=a.centerPoint.add(h.offsetAsPoint),H=a.screenPointToLocation(W),{center:K,zoom:ee}=a.getConstrained(o.S.convert(h.center||H),V!=null?V:g);Pv(a,K);let ce=se(a.worldSize,H),ue=se(a.worldSize,K).sub(ce),fe=o.af(ee-g);return B=ee!==g,{easeFunc:ve=>{if(B&&a.setZoom(o.C.number(g,ee,ve)),o.be(E,M)||aa({startEulerAngles:E,endEulerAngles:M,tr:a,k:ve,useSlerp:E.roll!=M.roll}),k&&(a.interpolatePadding(_,h.padding,ve),W=a.centerPoint.add(h.offsetAsPoint)),h.around)a.setLocationAtPoint(h.around,h.aroundPoint);else{let Se=o.af(a.zoom-g),we=ee>g?Math.min(2,fe):Math.max(.5,fe),Ie=Math.pow(we,1-ve),Pe=_e(a.worldSize,ce.add(ue.mult(ve*Ie)).mult(Se));a.setLocationAtPoint(a.renderWorldCopies?Pe.wrap():Pe,W)}},isZooming:B,elevationCenter:K}}handleFlyTo(a,h){let g=h.zoom!==void 0,_=a.zoom,E=a.getConstrained(o.S.convert(h.center||h.locationAtOffset),g?+h.zoom:_),M=E.center,L=E.zoom;Pv(a,M);let k=se(a.worldSize,h.locationAtOffset),B=se(a.worldSize,M).sub(k),V=B.mag(),W=o.af(L-_),H;if(h.minZoom!==void 0){let K=Math.min(+h.minZoom,_,L),ee=a.getConstrained(M,K).zoom;H=o.af(ee-_)}return{easeFunc:(K,ee,ce,ue)=>{a.setZoom(K===1?L:_+o.ak(ee));let fe=K===1?M:_e(a.worldSize,k.add(B.mult(ce)).mult(ee));a.setLocationAtPoint(a.renderWorldCopies?fe.wrap():fe,ue)},scaleOfZoom:W,targetCenter:M,scaleOfMinZoom:H,pixelPathLength:V}}}class Jn{constructor(a,h,g){this.blendFunction=a,this.blendColor=h,this.mask=g}}Jn.Replace=[1,0],Jn.disabled=new Jn(Jn.Replace,o.bf.transparent,[!1,!1,!1,!1]),Jn.unblended=new Jn(Jn.Replace,o.bf.transparent,[!0,!0,!0,!0]),Jn.alphaBlended=new Jn([1,771],o.bf.transparent,[!0,!0,!0,!0]);let Uf=2305;class cr{constructor(a,h,g){this.enable=a,this.mode=h,this.frontFace=g}}cr.disabled=new cr(!1,1029,Uf),cr.backCCW=new cr(!0,1029,Uf),cr.frontCCW=new cr(!0,1028,Uf);class Ar{constructor(a,h,g){this.func=a,this.mask=h,this.range=g}}Ar.ReadOnly=!1,Ar.ReadWrite=!0,Ar.disabled=new Ar(519,Ar.ReadOnly,[0,1]);let Fu=7680;class nn{constructor(a,h,g,_,E,M){this.test=a,this.ref=h,this.mask=g,this.fail=_,this.depthFail=E,this.pass=M}}nn.disabled=new nn({func:519,mask:0},0,0,Fu,Fu,Fu);let ts=new WeakMap;function zl(w){var a;if(ts.has(w))return ts.get(w);{let h=(a=w.getParameter(w.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return ts.set(w,h),h}}class Ul{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;let h=a.context,g=h.gl;this._texFormat=g.RGBA,this._texType=g.UNSIGNED_BYTE;let _=new o.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);let E=new o.aN;E.emplaceBack(0,1,2),this._fullscreenTriangle=new Ff(h.createVertexBuffer(_,Oc.members),h.createIndexBuffer(E),o.aM.simpleSegment(0,0,_.length,E.length)),this._resultBuffer=new Uint8Array(4),h.activeTexture.set(g.TEXTURE1);let M=g.createTexture();g.bindTexture(g.TEXTURE_2D,M),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texImage2D(g.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=h.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),zl(g)&&(this._pbo=g.createBuffer(),g.bindBuffer(g.PIXEL_PACK_BUFFER,this._pbo),g.bufferData(g.PIXEL_PACK_BUFFER,4,g.STREAM_READ),g.bindBuffer(g.PIXEL_PACK_BUFFER,null))}destroy(){let a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,h){let g=this._updateCount;return this._readbackQueue?g>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():g>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,h),this._updateCount++,this._measuredError}_bindFramebuffer(){let a=this._cachedRenderContext.context,h=a.gl;a.activeTexture.set(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,h){let g=this._cachedRenderContext.context,_=g.gl;if(this._bindFramebuffer(),g.viewport.set([0,0,this._texWidth,this._texHeight]),g.clear({color:o.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(g,_.TRIANGLES,Ar.disabled,nn.disabled,Jn.unblended,cr.disabled,((E,M)=>({u_input:E,u_output_expected:M}))(a,h),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&zl(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);let E=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:E}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&zl(a)){let h=a.clientWaitSync(this._readbackQueue.sync,0,0);if(h===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(h===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ul._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let h=0;return h+=a[0]/256,h+=a[1]/65536,h+=a[2]/16777216,a[3]<127&&(h=-h),h/128}}let Ov=o.$/128;function mb(w,a){let h=w.granularity!==void 0?Math.max(w.granularity,1):1,g=h+(w.generateBorders?2:0),_=h+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),E=g+1,M=_+1,L=w.generateBorders?-1:0,k=w.generateBorders||w.extendToNorthPole?-1:0,B=h+(w.generateBorders?1:0),V=h+(w.generateBorders||w.extendToSouthPole?1:0),W=E*M,H=g*_*6,K=E*M>65536;if(K&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let ee=K||a==="32bit",ce=new Int16Array(2*W),ue=0;for(let Se=k;Se<=V;Se++)for(let we=L;we<=B;we++){let Ie=we/h*o.$;we===-1&&(Ie=-Ov),we===h+1&&(Ie=o.$+Ov);let Pe=Se/h*o.$;Se===-1&&(Pe=w.extendToNorthPole?o.bh:-Ov),Se===h+1&&(Pe=w.extendToSouthPole?o.bi:o.$+Ov),ce[ue++]=Ie,ce[ue++]=Pe}let fe=ee?new Uint32Array(H):new Uint16Array(H),ve=0;for(let Se=0;Se<_;Se++)for(let we=0;we<g;we++){let Ie=we+1+Se*E,Pe=we+(Se+1)*E,Ee=we+1+(Se+1)*E;fe[ve++]=we+Se*E,fe[ve++]=Pe,fe[ve++]=Ie,fe[ve++]=Ie,fe[ve++]=Pe,fe[ve++]=Ee}return{vertices:ce.buffer.slice(0),indices:fe.buffer.slice(0),uses32bitIndices:ee}}let fp=new o.aK({fill:new o.bj(128,2),line:new o.bj(512,0),tile:new o.bj(128,32),stencil:new o.bj(128,1),circle:3});class bm{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return sl.projectionGlobe}get vertexShaderPreludeCode(){return sl.projectionMercator.vertexSource}get subdivisionGranularity(){return fp}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new Ul(a));let h=o.U(this._errorQueryLatitudeDegrees),g=2*Math.atan(Math.exp(Math.PI-h*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(h,g),E=x.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=E);let M=Math.min(Math.max((E-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bl(M))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,h,g,_,E){let M=(E==="stencil"?fp.stencil:fp.tile).getGranularityForZoomLevel(h.z);return this._getMesh(a,{granularity:M,generateBorders:g,extendToNorthPole:h.y===0&&_,extendToSouthPole:h.y===(1<<h.z)-1&&_})}_getMesh(a,h){let g=this._getMeshKey(h);if(g in this._tileMeshCache)return this._tileMeshCache[g];let _=function(E,M){let L=mb(M,"16bit"),k=o.aL.deserialize({arrayBuffer:L.vertices,length:L.vertices.byteLength/2/2}),B=o.aN.deserialize({arrayBuffer:L.indices,length:L.indices.byteLength/2/3});return new Ff(E.createVertexBuffer(k,Oc.members),E.createIndexBuffer(B),o.aM.simpleSegment(0,0,k.length,B.length))}(a,h);return this._tileMeshCache[g]=_,_}recalculate(a){}hasTransition(){let a=x.now(),h=!1;return h=h||(a-this._errorMeasurementLastChangeTime)/1e3<.7,h=h||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,h}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}let Lv=new o.r({type:new o.D(o.v.projection.type)});class Dv extends o.E{constructor(a){super(),this._transitionable=new o.t(Lv),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new $r,this._verticalPerspectiveProjection=new bm}get transitionState(){let a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.bm){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,h,g,_,E){return this.currentProjection.getMeshFromTileID(a,h,g,_,E)}setProjection(a){this._transitionable.setValue("type",(a==null?void 0:a.type)||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function Nv(w){let a=hp(w.worldSize,w.center.lat);return 2*Math.PI*a}function ll(w,a,h,g,_){let E=1/(1<<_),M=a/o.$*E+g*E,L=o.bo((w/o.$*E+h*E)*Math.PI*2+Math.PI,2*Math.PI),k=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,B=Math.cos(k),V=new Float64Array(3);return V[0]=Math.sin(L)*B,V[1]=Math.sin(k),V[2]=Math.cos(L)*B,V}function fo(w){return function(a,h){let g=Math.cos(h),_=new Float64Array(3);return _[0]=Math.sin(a)*g,_[1]=Math.sin(h),_[2]=Math.cos(a)*g,_}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function hp(w,a){return w/(2*Math.PI)/Math.cos(a*Math.PI/180)}function wm(w){let a=Math.asin(w[1])/Math.PI*180,h=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(h>1e-6){let g=w[0]/h,_=Math.acos(w[2]/h),E=(g>0?_:-_)/Math.PI*180;return new o.S(o.aO(E,-180,180),a)}return new o.S(0,a)}function Bf(w){return Math.cos(w*Math.PI/180)}function Mi(w,a){let h=Bf(w),g=Bf(a);return o.ak(g/h)}function cA(w,a){let h=w.rotate(a.bearingInRadians),g=a.zoom+Mi(a.center.lat,0),_=o.bk(1/Bf(a.center.lat),1/Bf(Math.min(Math.abs(a.center.lat),60)),o.bn(g,7,3,0,1)),E=360/Nv({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.S(a.center.lng-h.x*E*_,o.ah(a.center.lat+h.y*E,-o.ai,o.ai))}function Em(w){let a=.5*w,h=Math.sin(a),g=Math.cos(a);return Math.log(h+g)-Math.log(g-h)}function gb(w,a,h,g){let _=w.lat+h*g;if(Math.abs(h)>1){let E=(Math.sign(w.lat+h)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,M=Math.abs(w.lat+h)*Math.PI/180,L=Em(E+g*(M-E)),k=Em(E),B=Em(M);return new o.S(w.lng+a*((L-k)/(B-k)),_)}return new o.S(w.lng+a*g,_)}class Dq{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=a}swapBuffers(){if(!this._hadAnyChanges)return;let a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(a,h,g,_){let E=`${a.z}_${a.x}_${a.y}_${_!=null&&_.terrain?"t":""}`,M=this._cache.get(E);if(M)return M;let L=this._cachePrevious.get(E);if(L)return this._cache.set(E,L),L;let k=this._boundingVolumeFactory(a,h,g,_);return this._cache.set(E,k),this._hadAnyChanges=!0,k}}class pp{constructor(a,h,g,_){this.min=g,this.max=_,this.points=a,this.planes=h}static fromAabb(a,h){let g=[];for(let _=0;_<8;_++)g.push([1&~_?a[0]:h[0],(_>>1&1)==1?h[1]:a[1],(_>>2&1)==1?h[2]:a[2]]);return new pp(g,[[-1,0,0,h[0]],[1,0,0,-a[0]],[0,-1,0,h[1]],[0,1,0,-a[1]],[0,0,-1,h[2]],[0,0,1,-a[2]]],a,h)}static fromCenterSizeAngles(a,h,g){let _=o.br([],g[0],g[1],g[2]),E=o.bs([],[h[0],0,0],_),M=o.bs([],[0,h[1],0],_),L=o.bs([],[0,0,h[2]],_),k=[...a],B=[...a];for(let W=0;W<8;W++)for(let H=0;H<3;H++){let K=a[H]+E[H]*(1&~W?-1:1)+M[H]*((W>>1&1)==1?1:-1)+L[H]*((W>>2&1)==1?1:-1);k[H]=Math.min(k[H],K),B[H]=Math.max(B[H],K)}let V=[];for(let W=0;W<8;W++){let H=[...a];o.aS(H,H,o.aR([],E,1&~W?-1:1)),o.aS(H,H,o.aR([],M,(W>>1&1)==1?1:-1)),o.aS(H,H,o.aR([],L,(W>>2&1)==1?1:-1)),V.push(H)}return new pp(V,[[...E,-o.aX(E,V[0])],[...M,-o.aX(M,V[0])],[...L,-o.aX(L,V[0])],[-E[0],-E[1],-E[2],-o.aX(E,V[7])],[-M[0],-M[1],-M[2],-o.aX(M,V[7])],[-L[0],-L[1],-L[2],-o.aX(L,V[7])]],k,B)}intersectsFrustum(a){let h=!0,g=this.points.length,_=this.planes.length,E=a.planes.length,M=a.points.length;for(let L=0;L<E;L++){let k=a.planes[L],B=0;for(let V=0;V<g;V++){let W=this.points[V];k[0]*W[0]+k[1]*W[1]+k[2]*W[2]+k[3]>=0&&B++}if(B===0)return 0;B<g&&(h=!1)}if(h)return 2;for(let L=0;L<_;L++){let k=this.planes[L],B=0;for(let V=0;V<M;V++){let W=a.points[V];k[0]*W[0]+k[1]*W[1]+k[2]*W[2]+k[3]>=0&&B++}if(B===0)return 0}return 1}intersectsPlane(a){let h=this.points.length,g=0;for(let _=0;_<h;_++){let E=this.points[_];a[0]*E[0]+a[1]*E[1]+a[2]*E[2]+a[3]>=0&&g++}return g===h?2:g===0?0:1}}function Mo(w,a,h){let g=w-a;return g<0?-g:Math.max(0,g-h)}function Sm(w,a,h,g,_){let E=w-h,M;return M=E<0?Math.min(-E,1+E-_):E>1?Math.min(Math.max(E-_,0),1-E):0,Math.max(M,Mo(a,g,_))}class Bl{constructor(){this._boundingVolumeCache=new Dq(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(a,h,g,_){let E=1<<g.z,M=1/E,L=g.x/E,k=g.y/E,B=2;return B=Math.min(B,Sm(a,h,L,k,M)),B=Math.min(B,Sm(a,h,L+.5,-k-M,M)),B=Math.min(B,Sm(a,h,L+.5,2-k-M,M)),B}getWrap(a,h,g){let _=1<<h.z,E=1/_,M=h.x/_,L=Mo(a.x,M,E),k=Mo(a.x,M-1,E),B=Mo(a.x,M+1,E),V=Math.min(L,k,B);return V===B?1:V===k?-1:0}allowVariableZoom(a,h){return tt(a,h)>4}allowWorldCopies(){return!1}getTileBoundingVolume(a,h,g,_){return this._boundingVolumeCache.getTileBoundingVolume(a,h,g,_)}_computeTileBoundingVolume(a,h,g,_){var E,M;let L=0,k=0;if(_!=null&&_.terrain){let B=new o.Z(a.z,h,a.z,a.x,a.y),V=_.terrain.getMinMaxElevation(B);L=(E=V.minElevation)!==null&&E!==void 0?E:Math.min(0,g),k=(M=V.maxElevation)!==null&&M!==void 0?M:Math.max(0,g)}if(L/=o.bu,k/=o.bu,L+=1,k+=1,a.z<=0)return pp.fromAabb([-k,-k,-k],[k,k,k]);if(a.z===1)return pp.fromAabb([a.x===0?-k:0,a.y===0?0:-k,-k],[a.x===0?0:k,a.y===0?k:0,k]);{let B=[ll(0,0,a.x,a.y,a.z),ll(o.$,0,a.x,a.y,a.z),ll(o.$,o.$,a.x,a.y,a.z),ll(0,o.$,a.x,a.y,a.z)],V=[];for(let Ge of B)V.push(o.aR([],Ge,k));if(k!==L)for(let Ge of B)V.push(o.aR([],Ge,L));a.y===0&&V.push([0,1,0]),a.y===(1<<a.z)-1&&V.push([0,-1,0]);let W=[1,1,1],H=[-1,-1,-1];for(let Ge of V)for(let Xe=0;Xe<3;Xe++)W[Xe]=Math.min(W[Xe],Ge[Xe]),H[Xe]=Math.max(H[Xe],Ge[Xe]);let K=ll(o.$/2,o.$/2,a.x,a.y,a.z),ee=o.aW([],[0,1,0],K);o.aV(ee,ee);let ce=o.aW([],K,ee);o.aV(ce,ce);let ue=o.aW([],B[2],B[1]);o.aV(ue,ue);let fe=o.aW([],B[0],B[3]);o.aV(fe,fe),V.push(o.aR([],K,k)),a.y>=(1<<a.z)/2&&V.push(o.aR([],ll(o.$/2,0,a.x,a.y,a.z),k)),a.y<(1<<a.z)/2&&V.push(o.aR([],ll(o.$/2,o.$,a.x,a.y,a.z),k));let ve=Tm(K,V),Se=Tm(ce,V),we=[-K[0],-K[1],-K[2],ve.max],Ie=[K[0],K[1],K[2],-ve.min],Pe=[-ce[0],-ce[1],-ce[2],Se.max],Ee=[ce[0],ce[1],ce[2],-Se.min],je=[...ue,0],Qe=[...fe,0],Ve=[];return a.y===0?Ve.push(o.bt(Qe,je,we),o.bt(Qe,je,Ie)):Ve.push(o.bt(Pe,je,we),o.bt(Pe,je,Ie),o.bt(Pe,Qe,we),o.bt(Pe,Qe,Ie)),a.y===(1<<a.z)-1?Ve.push(o.bt(Qe,je,we),o.bt(Qe,je,Ie)):Ve.push(o.bt(Ee,je,we),o.bt(Ee,je,Ie),o.bt(Ee,Qe,we),o.bt(Ee,Qe,Ie)),new pp(Ve,[we,Ie,Pe,Ee,je,Qe],W,H)}}}function Tm(w,a){let h=1/0,g=-1/0;for(let _ of a){let E=o.aX(w,_);h=Math.min(h,E),g=Math.max(g,E)}return{min:h,max:g}}class Im{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,h,g){return this._helper.interpolatePadding(a,h,g)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,h){this._helper.resize(a,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,h){this._helper.overrideNearFarZ(a,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bv(),this._projectionMatrix=o.b9(),this._globeViewProjMatrix32f=o.b8(),this._globeViewProjMatrixNoCorrection=o.b9(),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),this._globeProjMatrixInverted=o.b9(),this._cameraPosition=o.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new ia({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,h)=>this.getConstrained(a,h)}),this._coveringTilesDetailsProvider=new Bl}clone(){let a=new Im;return a.apply(this),a}apply(a,h){this._globeLatitudeErrorCorrectionRadians=h||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let a=o.bp();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){let{overscaledTileID:h,applyGlobeMatrix:g}=a,_=this._helper.getMercatorTileCoordinates(h);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:g?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){let h=this.pitchInRadians,g=this.cameraToCenterDistance/a,_=Math.sin(h)*g,E=Math.cos(h)*g+1,M=1/Math.sqrt(_*_+E*E)*1,L=-_,k=E,B=Math.sqrt(L*L+k*k);L/=B,k/=B;let V=[0,L,k];o.bw(V,V,[0,0,0],-this.bearingInRadians),o.bx(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),o.by(V,V,[0,0,0],this.center.lng*Math.PI/180);let W=1/o.aZ(V);return o.aR(V,V,W),[...V,-M*W]}isLocationOccluded(a){return!this.isSurfacePointVisible(fo(a))}transformLightDirection(a){let h=this._helper._center.lng*Math.PI/180,g=this._helper._center.lat*Math.PI/180,_=Math.cos(g),E=[Math.sin(h)*_,Math.sin(g),Math.cos(h)*_],M=[E[2],0,-E[0]],L=[0,0,0];o.aW(L,M,E),o.aV(M,M),o.aV(L,L);let k=[0,0,0];return o.aV(k,[M[0]*a[0]+L[0]*a[1]+E[0]*a[2],M[1]*a[0]+L[1]*a[1]+E[1]*a[2],M[2]*a[0]+L[2]*a[1]+E[2]*a[2]]),k}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,h,g){let _=function(L,k,B){let V=1/(1<<B.z);return new o.a1(L/o.$*V+B.x*V,k/o.$*V+B.y*V)}(a,h,g.canonical),E=(M=_.y,[o.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(E[1])}projectTileCoordinates(a,h,g,_){let E=g.canonical,M=ll(a,h,E.x,E.y,E.z),L=1+(_?_(a,h):0)/o.bu,k=[M[0]*L,M[1]*L,M[2]*L,1];o.aw(k,k,this._globeViewProjMatrixNoCorrection);let B=this._cachedClippingPlane,V=B[0]*M[0]+B[1]*M[1]+B[2]*M[2]+B[3]<0;return{point:new o.P(k[0]/k[3],k[1]/k[3]),signedDistanceFromCamera:k[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let a=hp(this.worldSize,this.center.lat),h=o.ba(),g=o.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.b4(h,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let _=this.centerOffset;h[8]=2*-_.x/this._helper._width,h[9]=2*_.y/this._helper._height,this._projectionMatrix=o.b5(h),this._globeProjMatrixInverted=o.ba(),o.aq(this._globeProjMatrixInverted,h),o.M(h,h,[0,0,-this.cameraToCenterDistance]),o.b6(h,h,this.rollInRadians),o.b7(h,h,-this.pitchInRadians),o.b6(h,h,this.bearingInRadians),o.M(h,h,[0,0,-a]);let E=o.bp();E[0]=a,E[1]=a,E[2]=a,o.b7(g,h,this.center.lat*Math.PI/180),o.bz(g,g,-this.center.lng*Math.PI/180),o.N(g,g,E),this._globeViewProjMatrixNoCorrection=g,o.b7(h,h,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bz(h,h,-this.center.lng*Math.PI/180),o.N(h,h,E),this._globeViewProjMatrix32f=new Float32Array(h),this._globeViewProjMatrixNoCorrectionInverted=o.ba(),o.aq(this._globeViewProjMatrixNoCorrectionInverted,g);let M=o.bp();this._cameraPosition=o.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bw(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),o.bx(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),o.bw(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),o.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bx(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),o.by(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);let L=o.b5(this._globeViewProjMatrixNoCorrectionInverted);o.N(L,L,[1,1,-1]),this._cachedFrustum=Gi.fromInvProjectionMatrix(L,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");let h=o.ba();return o.ag(h),h}getVisibleUnwrappedCoordinates(a){return[new o.b2(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,h){if(!this._globeViewProjMatrixNoCorrection)return 1;let g=fo(a);o.aR(g,g,1+h/o.bu);let _=o.bv();return o.aw(_,[g[0],g[1],g[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(a){}getBounds(){let a=.5*this.width,h=.5*this.height,g=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,h),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,h)],_=[];for(let W of g)_.push(this.unprojectScreenPoint(W));let E=0,M=0,L=0,k=0,B=this.center;for(let W of _){let H=o.bA(B.lng,W.lng),K=o.bA(B.lat,W.lat);H<M&&(M=H),H>E&&(E=H),K<k&&(k=K),K>L&&(L=K)}let V=[B.lng+M,B.lat+k,B.lng+E,B.lat+L];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new Lt(V)}getConstrained(a,h){let g=o.ah(a.lat,-o.ai,o.ai),_=o.ah(+h,this.minZoom+Mi(0,g),this.maxZoom);return{center:new o.S(a.lng,g),zoom:_}}calculateCenterFromCameraLngLatAlt(a,h,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(a,h,g,_)}setLocationAtPoint(a,h){let g=fo(this.unprojectScreenPoint(h)),_=fo(a),E=o.bp();o.bB(E);let M=o.bp();o.by(M,g,E,-this.center.lng*Math.PI/180),o.bx(M,M,E,this.center.lat*Math.PI/180);let L=_[0]*_[0]+_[2]*_[2],k=M[0]*M[0];if(L<k)return;let B=Math.sqrt(L-k),V=-B,W=o.bC(_[0],_[2],M[0],B),H=o.bC(_[0],_[2],M[0],V),K=o.bp();o.by(K,_,E,-W);let ee=o.bC(K[1],K[2],M[1],M[2]),ce=o.bp();o.by(ce,_,E,-H);let ue=o.bC(ce[1],ce[2],M[1],M[2]),fe=.5*Math.PI,ve=ee>=-fe&&ee<=fe,Se=ue>=-fe&&ue<=fe,we,Ie;if(ve&&Se){let Qe=this.center.lng*Math.PI/180,Ve=this.center.lat*Math.PI/180;o.bD(W,Qe)+o.bD(ee,Ve)<o.bD(H,Qe)+o.bD(ue,Ve)?(we=W,Ie=ee):(we=H,Ie=ue)}else if(ve)we=W,Ie=ee;else{if(!Se)return;we=H,Ie=ue}let Pe=we/Math.PI*180,Ee=Ie/Math.PI*180,je=this.center.lat;this.setCenter(new o.S(Pe,o.ah(Ee,-90,90))),this.setZoom(this.zoom+Mi(je,this.center.lat))}locationToScreenPoint(a,h){let g=fo(a);if(h){let _=h.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aR(g,g,1+_/o.bu)}return this._projectSurfacePointToScreen(g)}_projectSurfacePointToScreen(a){let h=o.bv();return o.aw(h,[...a,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],new o.P((.5*h[0]+.5)*this.width,(.5*-h[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,h){if(h){let g=h.pointCoordinate(a);if(g)return g}return o.a1.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,h){var g;return(g=this.screenPointToMercatorCoordinate(a,h))===null||g===void 0?void 0:g.toLngLat()}isPointOnMapSurface(a,h){let g=this._cameraPosition,_=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(g,_)}getRayDirectionFromPixel(a){let h=o.bv();h[0]=a.x/this.width*2-1,h[1]=-1*(a.y/this.height*2-1),h[2]=1,h[3]=1,o.aw(h,h,this._globeViewProjMatrixNoCorrectionInverted),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3];let g=o.bp();g[0]=h[0]-this._cameraPosition[0],g[1]=h[1]-this._cameraPosition[1],g[2]=h[2]-this._cameraPosition[2];let _=o.bp();return o.aV(_,g),_}isSurfacePointVisible(a){let h=this._cachedClippingPlane;return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]+h[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;let h=o.bv();return o.aw(h,[...a,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3],h[0]>-1&&h[0]<1&&h[1]>-1&&h[1]<1&&h[2]>-1&&h[2]<1}rayPlanetIntersection(a,h){let g=o.aX(a,h),_=o.bp(),E=o.bp();o.aR(E,h,g),o.aU(_,a,E);let M=1-o.aX(_,_);if(M<0)return null;let L=o.aX(a,a)-1,k=-g+(g<0?1:-1)*Math.sqrt(M),B=L/k,V=k;return{tMin:Math.min(B,V),tMax:Math.max(B,V)}}unprojectScreenPoint(a){let h=this._cameraPosition,g=this.getRayDirectionFromPixel(a),_=this.rayPlanetIntersection(h,g);if(_){let V=o.bp();o.aS(V,h,[g[0]*_.tMin,g[1]*_.tMin,g[2]*_.tMin]);let W=o.bp();return o.aV(W,V),wm(W)}let E=this._cachedClippingPlane,M=E[0]*g[0]+E[1]*g[1]+E[2]*g[2],L=-o.b1(E,h)/M,k=o.bp();if(L>0)o.aS(k,h,[g[0]*L,g[1]*L,g[2]*L]);else{let V=o.bp();o.aS(V,h,[2*g[0],2*g[1],2*g[2]]);let W=o.b1(this._cachedClippingPlane,V);o.aU(k,V,[this._cachedClippingPlane[0]*W,this._cachedClippingPlane[1]*W,this._cachedClippingPlane[2]*W])}let B=function(V){let W=o.bp();return W[0]=V[0]*-V[3],W[1]=V[1]*-V[3],W[2]=V[2]*-V[3],{center:W,radius:Math.sqrt(1-V[3]*V[3])}}(E);return wm(function(V,W,H){let K=o.bp();o.aU(K,H,V);let ee=o.bp();return o.bq(ee,V,K,W/o.a$(K)),ee}(B.center,B.radius,k))}getMatrixForModel(a,h){let g=o.S.convert(a),_=1/o.bu,E=o.b9();return o.bz(E,E,g.lng/180*Math.PI),o.b7(E,E,-g.lat/180*Math.PI),o.M(E,E,[0,0,1+h/o.bu]),o.b7(E,E,.5*Math.PI),o.N(E,E,[_,_,_]),E}getProjectionDataForCustomLayer(a=!0){let h=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:a});return h.tileMercatorCoords=[0,0,1,1],h}getFastPathSimpleProjectionMatrix(a){}}class Am{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,h,g){return this._helper.interpolatePadding(a,h,g)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,h,g=!0){this._helper.resize(a,h,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,h){this._helper.overrideNearFarZ(a,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,h){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=h,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new ia({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,h)=>this.getConstrained(a,h)}),this._globeness=1,this._mercatorTransform=new Bn,this._verticalPerspectiveTransform=new Im}clone(){let a=new Am;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){let h=this._mercatorTransform.getProjectionData(a),g=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?g.mainMatrix:h.mainMatrix,clippingPlane:g.clippingPlane,tileMercatorCoords:g.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:h.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,h,g){let _=this._mercatorTransform.getPitchedTextCorrection(a,h,g),E=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,h,g);return o.bk(_,E,this._globeness)}projectTileCoordinates(a,h,g,_){return this.currentTransform.projectTileCoordinates(a,h,g,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,h){return this.currentTransform.lngLatToCameraDepth(a,h)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,h){return this.currentTransform.getConstrained(a,h)}calculateCenterFromCameraLngLatAlt(a,h,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(a,h,g,_)}setLocationAtPoint(a,h){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,h),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,h),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,h){return this.currentTransform.locationToScreenPoint(a,h)}screenPointToMercatorCoordinate(a,h){return this.currentTransform.screenPointToMercatorCoordinate(a,h)}screenPointToLocation(a,h){return this.currentTransform.screenPointToLocation(a,h)}isPointOnMapSurface(a,h){return this.currentTransform.isPointOnMapSurface(a,h)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,h){return this.currentTransform.getMatrixForModel(a,h)}getProjectionDataForCustomLayer(a=!0){let h=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return h;let g=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return g.fallbackMatrix=h.mainMatrix,g}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class $o{get useGlobeControls(){return!0}handlePanInertia(a,h){let g=cA(a,h);return Math.abs(g.lng-h.center.lng)>180&&(g.lng=h.center.lng+179.5*Math.sign(g.lng-h.center.lng)),{easingCenter:g,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,h){let g=a.around,_=h.screenPointToLocation(g);a.bearingDelta&&h.setBearing(h.bearing+a.bearingDelta),a.pitchDelta&&h.setPitch(h.pitch+a.pitchDelta),a.rollDelta&&h.setRoll(h.roll+a.rollDelta);let E=h.zoom;a.zoomDelta&&h.setZoom(h.zoom+a.zoomDelta);let M=h.zoom-E;if(M===0)return;let L=o.bA(h.center.lng,_.lng),k=L/(Math.abs(L/180)+1),B=o.bA(h.center.lat,_.lat),V=h.getRayDirectionFromPixel(g),W=h.cameraPosition,H=-1*o.aX(W,V),K=o.bp();o.aS(K,W,[V[0]*H,V[1]*H,V[2]*H]);let ee=o.aZ(K)-1,ce=Math.exp(.5*-Math.max(ee-.3,0)),ue=hp(h.worldSize,h.center.lat)/Math.min(h.width,h.height),fe=o.bn(ue,.9,.5,1,.25),ve=(1-o.af(-M))*Math.min(ce,fe),Se=h.center.lat,we=h.zoom,Ie=new o.S(h.center.lng+k*ve,o.ah(h.center.lat+B*ve,-o.ai,o.ai));h.setLocationAtPoint(_,g);let Pe=h.center,Ee=o.bn(Math.abs(L),45,85,0,1),je=o.bn(ue,.75,.35,0,1),Qe=Math.pow(Math.max(Ee,je),.25),Ve=o.bA(Pe.lng,Ie.lng),Ge=o.bA(Pe.lat,Ie.lat);h.setCenter(new o.S(Pe.lng+Ve*Qe,Pe.lat+Ge*Qe).wrap()),h.setZoom(we+Mi(Se,h.center.lat))}handleMapControlsPan(a,h,g){if(!a.panDelta)return;let _=h.center.lat,E=h.zoom;h.setCenter(cA(a.panDelta,h).wrap()),h.setZoom(E+Mi(_,h.center.lat))}cameraForBoxAndBearing(a,h,g,_,E){let M=es(a,h,g,_,E),L=h.left/E.width*2-1,k=(E.width-h.right)/E.width*2-1,B=h.top/E.height*-2+1,V=(E.height-h.bottom)/E.height*-2+1,W=o.bA(g.getWest(),g.getEast())<0,H=W?g.getEast():g.getWest(),K=W?g.getWest():g.getEast(),ee=Math.max(g.getNorth(),g.getSouth()),ce=Math.min(g.getNorth(),g.getSouth()),ue=H+.5*o.bA(H,K),fe=ee+.5*o.bA(ee,ce),ve=E.clone();ve.setCenter(M.center),ve.setBearing(M.bearing),ve.setPitch(0),ve.setRoll(0),ve.setZoom(M.zoom);let Se=ve.modelViewProjectionMatrix,we=[fo(g.getNorthWest()),fo(g.getNorthEast()),fo(g.getSouthWest()),fo(g.getSouthEast()),fo(new o.S(K,fe)),fo(new o.S(H,fe)),fo(new o.S(ue,ee)),fo(new o.S(ue,ce))],Ie=fo(M.center),Pe=Number.POSITIVE_INFINITY;for(let Ee of we)L<0&&(Pe=$o.getLesserNonNegativeNonNull(Pe,$o.solveVectorScale(Ee,Ie,Se,"x",L))),k>0&&(Pe=$o.getLesserNonNegativeNonNull(Pe,$o.solveVectorScale(Ee,Ie,Se,"x",k))),B>0&&(Pe=$o.getLesserNonNegativeNonNull(Pe,$o.solveVectorScale(Ee,Ie,Se,"y",B))),V<0&&(Pe=$o.getLesserNonNegativeNonNull(Pe,$o.solveVectorScale(Ee,Ie,Se,"y",V)));if(Number.isFinite(Pe)&&Pe!==0)return M.zoom=ve.zoom+o.ak(Pe),M;uA()}handleJumpToCenterZoom(a,h){let g=a.center.lat,_=a.getConstrained(h.center?o.S.convert(h.center):a.center,a.zoom).center;a.setCenter(_.wrap());let E=h.zoom!==void 0?+h.zoom:a.zoom+Mi(g,_.lat);a.zoom!==E&&a.setZoom(E)}handleEaseTo(a,h){let g=a.zoom,_=a.center,E=a.padding,M={roll:a.roll,pitch:a.pitch,bearing:a.bearing},L={roll:h.roll===void 0?a.roll:h.roll,pitch:h.pitch===void 0?a.pitch:h.pitch,bearing:h.bearing===void 0?a.bearing:h.bearing},k=h.zoom!==void 0,B=!a.isPaddingEqual(h.padding),V=!1,W=h.center?o.S.convert(h.center):_,H=a.getConstrained(W,g).center;Pv(a,H);let K=a.clone();K.setCenter(H),K.setZoom(k?+h.zoom:g+Mi(_.lat,W.lat)),K.setBearing(h.bearing);let ee=new o.P(o.ah(a.centerPoint.x+h.offsetAsPoint.x,0,a.width),o.ah(a.centerPoint.y+h.offsetAsPoint.y,0,a.height));K.setLocationAtPoint(H,ee);let ce=(h.offset&&h.offsetAsPoint.mag())>0?K.center:H,ue=k?+h.zoom:g+Mi(_.lat,ce.lat),fe=g+Mi(_.lat,0),ve=ue+Mi(ce.lat,0),Se=o.bA(_.lng,ce.lng),we=o.bA(_.lat,ce.lat),Ie=o.af(ve-fe);return V=ue!==g,{easeFunc:Pe=>{if(o.be(M,L)||aa({startEulerAngles:M,endEulerAngles:L,tr:a,k:Pe,useSlerp:M.roll!=L.roll}),B&&a.interpolatePadding(E,h.padding,Pe),h.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(h.around,h.aroundPoint);else{let Ee=ve>fe?Math.min(2,Ie):Math.max(.5,Ie),je=Math.pow(Ee,1-Pe),Qe=gb(_,Se,we,Pe*je);a.setCenter(Qe.wrap())}if(V){let Ee=o.C.number(fe,ve,Pe)+Mi(0,a.center.lat);a.setZoom(Ee)}},isZooming:V,elevationCenter:ce}}handleFlyTo(a,h){let g=h.zoom!==void 0,_=a.center,E=a.zoom,M=a.padding,L=!a.isPaddingEqual(h.padding),k=a.getConstrained(o.S.convert(h.center||h.locationAtOffset),E).center,B=g?+h.zoom:a.zoom+Mi(a.center.lat,k.lat),V=a.clone();V.setCenter(k),V.setZoom(B),V.setBearing(h.bearing);let W=new o.P(o.ah(a.centerPoint.x+h.offsetAsPoint.x,0,a.width),o.ah(a.centerPoint.y+h.offsetAsPoint.y,0,a.height));V.setLocationAtPoint(k,W);let H=V.center;Pv(a,H);let K=function(we,Ie,Pe){let Ee=fo(Ie),je=fo(Pe),Qe=o.aX(Ee,je),Ve=Math.acos(Qe),Ge=Nv(we);return Ve/(2*Math.PI)*Ge}(a,_,H),ee=E+Mi(_.lat,0),ce=B+Mi(H.lat,0),ue=o.af(ce-ee),fe;if(typeof h.minZoom=="number"){let we=+h.minZoom+Mi(H.lat,0),Ie=Math.min(we,ee,ce)+Mi(0,H.lat),Pe=a.getConstrained(H,Ie).zoom+Mi(H.lat,0);fe=o.af(Pe-ee)}let ve=o.bA(_.lng,H.lng),Se=o.bA(_.lat,H.lat);return{easeFunc:(we,Ie,Pe,Ee)=>{let je=gb(_,ve,Se,Pe);L&&a.interpolatePadding(M,h.padding,we);let Qe=we===1?H:je;a.setCenter(Qe.wrap());let Ve=ee+o.ak(Ie);a.setZoom(we===1?B:Ve+Mi(0,Qe.lat))},scaleOfZoom:ue,targetCenter:H,scaleOfMinZoom:fe,pixelPathLength:K}}static solveVectorScale(a,h,g,_,E){let M=_==="x"?[g[0],g[4],g[8],g[12]]:[g[1],g[5],g[9],g[13]],L=[g[3],g[7],g[11],g[15]],k=a[0]*M[0]+a[1]*M[1]+a[2]*M[2],B=a[0]*L[0]+a[1]*L[1]+a[2]*L[2],V=h[0]*M[0]+h[1]*M[1]+h[2]*M[2],W=h[0]*L[0]+h[1]*L[1]+h[2]*L[2];return V+E*B===k+E*W||L[3]*(k-V)+M[3]*(W-B)+k*W==V*B?null:(V+M[3]-E*W-E*L[3])/(V-k-E*W+E*B)}static getLesserNonNegativeNonNull(a,h){return h!==null&&h>=0&&h<a?h:a}}class fA{constructor(a){this._globe=a,this._mercatorCameraHelper=new Go,this._verticalPerspectiveCameraHelper=new $o}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,h){return this.currentHelper.handlePanInertia(a,h)}handleMapControlsRollPitchBearingZoom(a,h){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,h)}handleMapControlsPan(a,h,g){this.currentHelper.handleMapControlsPan(a,h,g)}cameraForBoxAndBearing(a,h,g,_,E){return this.currentHelper.cameraForBoxAndBearing(a,h,g,_,E)}handleJumpToCenterZoom(a,h){this.currentHelper.handleJumpToCenterZoom(a,h)}handleEaseTo(a,h){return this.currentHelper.handleEaseTo(a,h)}handleFlyTo(a,h){return this.currentHelper.handleFlyTo(a,h)}}let kv=(w,a)=>o.y(w,a&&a.filter(h=>h.identifier!=="source.canvas")),Nq=o.bE();class vb extends o.E{constructor(a,h={}){var g,_;super(),this._rtlPluginLoaded=()=>{for(let M in this.sourceCaches){let L=this.sourceCaches[M].getSource().type;L!=="vector"&&L!=="geojson"||this.sourceCaches[M].reload()}},this.map=a,this.dispatcher=new Ot(Dt(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(M,L)=>this.getGlyphs(M,L)),this.dispatcher.registerMessageHandler("GI",(M,L)=>this.getImages(M,L)),this.imageManager=new ae,this.imageManager.setEventedParent(this);let E=((g=a._container)===null||g===void 0?void 0:g.lang)||typeof document!="undefined"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new be(a._requestManager,h.localIdeographFontFamily,E),this.lineAtlas=new Je(256,512),this.crossTileSymbolIndex=new cp,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bG()),Nn().on(wr,this._rtlPluginLoaded),this.on("data",M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;let L=this.sourceCaches[M.sourceId];if(!L)return;let k=L.getSource();if(k&&k.vectorLayerIds)for(let B in this._layers){let V=this._layers[B];V.source===k.id&&this._validateLayer(V)}})}setGlobalStateProperty(a,h){var g,_,E;this._checkLoaded();let M=h===null?(E=(_=(g=this.stylesheet.state)===null||g===void 0?void 0:g[a])===null||_===void 0?void 0:_.default)!==null&&E!==void 0?E:null:h;if(o.bH(M,this._globalState[a]))return this;this._globalState[a]=M,this._applyGlobalStateChanges([a])}getGlobalState(){return this._globalState}setGlobalState(a){this._checkLoaded();let h=[];for(let g in a)!o.bH(this._globalState[g],a[g].default)&&(h.push(g),this._globalState[g]=a[g].default);this._applyGlobalStateChanges(h)}_applyGlobalStateChanges(a){if(a.length===0)return;let h=new Set;for(let g in this._layers){let _=this._layers[g],E=_.getLayoutAffectingGlobalStateRefs(),M=_.getPaintAffectingGlobalStateRefs();for(let L of a)if(E.has(L)&&h.add(_.source),M.has(L))for(let{name:k,value:B}of M.get(L))this._updatePaintProperty(_,k,B)}for(let g in this.sourceCaches)h.has(g)&&(this._reloadSource(g),this._changed=!0)}loadURL(a,h={},g){this.fire(new o.l("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;let _=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;let E=this._loadStyleRequest;o.j(_,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,h,g)}).catch(M=>{this._loadStyleRequest=null,M&&!E.signal.aborted&&this.fire(new o.k(M))})}loadJSON(a,h={},g){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(a,h,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Nq,{validate:!1})}_load(a,h,g){var _,E;let M=h.transformStyle?h.transformStyle(g,a):a;if(!h.validate||!kv(this,o.z(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(let L in M.sources)this.addSource(L,M.sources[L],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new ke(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new Ke(this.stylesheet.sky),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var a;let h=o.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",h),this._order=h.map(g=>g.id),this._layers={},this.setGlobalState((a=this.stylesheet.state)!==null&&a!==void 0?a:null),this._serializedLayers=null;for(let g of h){let _=o.bJ(g);_.setEventedParent(this,{layer:{id:g.id}}),_.setGlobalState(this._globalState),this._layers[g.id]=_}}_loadSprite(a,h=!1,g=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(E,M,L,k){return o._(this,void 0,void 0,function*(){let B=Z(E),V=L>1?"@2x":"",W={},H={};for(let{id:K,url:ee}of B){let ce=M.transformRequest(ie(ee,V,".json"),"SpriteJSON");W[K]=o.j(ce,k);let ue=M.transformRequest(ie(ee,V,".png"),"SpriteImage");H[K]=U.getImage(ue,k)}return yield Promise.all([...Object.values(W),...Object.values(H)]),function(K,ee){return o._(this,void 0,void 0,function*(){let ce={};for(let ue in K){ce[ue]={};let fe=x.getImageCanvasContext((yield ee[ue]).data),ve=(yield K[ue]).data;for(let Se in ve){let{width:we,height:Ie,x:Pe,y:Ee,sdf:je,pixelRatio:Qe,stretchX:Ve,stretchY:Ge,content:Xe,textFitWidth:vt,textFitHeight:bt}=ve[Se];ce[ue][Se]={data:null,pixelRatio:Qe,sdf:je,stretchX:Ve,stretchY:Ge,content:Xe,textFitWidth:vt,textFitHeight:bt,spriteData:{width:we,height:Ie,x:Pe,y:Ee,context:fe}}}}return ce})}(W,H)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(E=>{if(this._spriteRequest=null,E)for(let M in E){this._spritesImagesIds[M]=[];let L=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(k=>!(k in E)):[];for(let k of L)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(let k in E[M]){let B=M==="default"?k:`${M}:${k}`;this._spritesImagesIds[M].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,E[M][k],!1):this.imageManager.addImage(B,E[M][k]),h&&(this._changedImages[B]=!0)}}}).catch(E=>{this._spriteRequest=null,_=E,this.fire(new o.k(_))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),g&&g(_)})}_unloadSprite(){for(let a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){let h=this.sourceCaches[a.source];if(!h)return;let g=a.sourceLayer;if(!g)return;let _=h.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.k(new Error(`Source layer "${g}" does not exist on source "${_.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,h=!1){let g=this._serializedAllLayers();if(!a||a.length===0)return Object.values(h?o.bK(g):g);let _=[];for(let E of a)if(g[E]){let M=h?o.bK(g[E]):g[E];_.push(M)}return _}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};let h=Object.keys(this._layers);for(let g of h){let _=this._layers[g];_.type!=="custom"&&(a[g]=_.serialize())}return a}hasTransitions(){var a,h,g;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((h=this.sky)===null||h===void 0)&&h.hasTransition()||!((g=this.projection)===null||g===void 0)&&g.hasTransition())return!0;for(let _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(let _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;let h=this._changed;if(h){let _=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(_.length||E.length)&&this._updateWorkerLayers(_,E);for(let M in this._updatedSources){let L=this._updatedSources[M];if(L==="reload")this._reloadSource(M);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let M in this._updatedPaintProps)this._layers[M].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}let g={};for(let _ in this.sourceCaches){let E=this.sourceCaches[_];g[_]=E.used,E.used=!1}for(let _ of this._order){let E=this._layers[_];E.recalculate(a,this._availableImages),!E.isHidden(a.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(let _ in g){let E=this.sourceCaches[_];!!g[_]!=!!E.used&&E.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,h&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let a=Object.keys(this._changedImages);if(a.length){for(let h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,h={}){var g;this._checkLoaded();let _=this.serialize();if(a=h.transformStyle?h.transformStyle(_,a):a,((g=h.validate)===null||g===void 0||g)&&kv(this,o.z(a)))return!1;(a=o.bK(a)).layers=o.bI(a.layers);let E=o.bL(_,a),M=this._getOperationsToPerform(E);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(let L of M.operations)L();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){let h=[],g=[];for(let _ of a)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":h.push(()=>this.addLayer.apply(this,_.args));break;case"removeLayer":h.push(()=>this.removeLayer.apply(this,_.args));break;case"setPaintProperty":h.push(()=>this.setPaintProperty.apply(this,_.args));break;case"setLayoutProperty":h.push(()=>this.setLayoutProperty.apply(this,_.args));break;case"setFilter":h.push(()=>this.setFilter.apply(this,_.args));break;case"addSource":h.push(()=>this.addSource.apply(this,_.args));break;case"removeSource":h.push(()=>this.removeSource.apply(this,_.args));break;case"setLayerZoomRange":h.push(()=>this.setLayerZoomRange.apply(this,_.args));break;case"setLight":h.push(()=>this.setLight.apply(this,_.args));break;case"setGeoJSONSourceData":h.push(()=>this.setGeoJSONSourceData.apply(this,_.args));break;case"setGlyphs":h.push(()=>this.setGlyphs.apply(this,_.args));break;case"setSprite":h.push(()=>this.setSprite.apply(this,_.args));break;case"setTerrain":h.push(()=>this.map.setTerrain.apply(this,_.args));break;case"setSky":h.push(()=>this.setSky.apply(this,_.args));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":h.push(()=>this.setGlobalState.apply(this,_.args));break;case"setTransition":h.push(()=>{});break;default:g.push(_.command)}return{operations:h,unimplemented:g}}addImage(a,h){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,h),this._afterImageUpdated(a)}updateImage(a,h){this.imageManager.updateImage(a,h)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,h,g={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(o.z.source,`sources.${a}`,h,null,g))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);let _=this.sourceCaches[a]=new It(a,h,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:a})),_.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(let g in this._layers)if(this._layers[g].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${g}" is using it.`)));let h=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],h.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,h){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);let g=this.sourceCaches[a].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(h),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,h,g={}){this._checkLoaded();let _=a.id;if(this.getLayer(_))return void this.fire(new o.k(new Error(`Layer "${_}" already exists on this map.`)));let E;if(a.type==="custom"){if(kv(this,o.bM(a)))return;E=o.bJ(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(_,a.source),a=o.bK(a),a=o.e(a,{source:_})),this._validate(o.z.layer,`layers.${_}`,a,{arrayIndex:-1},g))return;E=o.bJ(a),this._validateLayer(E),E.setEventedParent(this,{layer:{id:_}})}let M=h?this._order.indexOf(h):this._order.length;if(h&&M===-1)this.fire(new o.k(new Error(`Cannot add layer "${_}" before non-existing layer "${h}".`)));else{if(this._order.splice(M,0,_),this._layerOrderChanged=!0,this._layers[_]=E,this._removedLayers[_]&&E.source&&E.type!=="custom"){let L=this._removedLayers[_];delete this._removedLayers[_],L.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(a,h){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===h)return;let g=this._order.indexOf(a);this._order.splice(g,1);let _=h?this._order.indexOf(h):this._order.length;h&&_===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${h}".`))):(this._order.splice(_,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();let h=this._layers[a];if(!h)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));h.setEventedParent(null);let g=this._order.indexOf(a);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=h,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],h.onRemove&&h.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,h,g){this._checkLoaded();let _=this.getLayer(a);_?_.minzoom===h&&_.maxzoom===g||(h!=null&&(_.minzoom=h),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,h,g={}){this._checkLoaded();let _=this.getLayer(a);if(_){if(!o.bH(_.filter,h))return h==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(o.z.filter,`layers.${_.id}.filter`,h,null,g)||(_.setFilter(o.bK(h)),this._updateLayer(_)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bK(this.getLayer(a).filter)}setLayoutProperty(a,h,g,_={}){this._checkLoaded();let E=this.getLayer(a);E?o.bH(E.getLayoutProperty(h),g)||(E.setLayoutProperty(h,g,_),this._updateLayer(E)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,h){let g=this.getLayer(a);if(g)return g.getLayoutProperty(h);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,h,g,_={}){this._checkLoaded();let E=this.getLayer(a);E?o.bH(E.getPaintProperty(h),g)||this._updatePaintProperty(E,h,g,_):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}_updatePaintProperty(a,h,g,_={}){a.setPaintProperty(h,g,_)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[a.id]=!0,this._serializedLayers=null}getPaintProperty(a,h){return this.getLayer(a).getPaintProperty(h)}setFeatureState(a,h){this._checkLoaded();let g=a.source,_=a.sourceLayer,E=this.sourceCaches[g];if(E===void 0)return void this.fire(new o.k(new Error(`The source '${g}' does not exist in the map's style.`)));let M=E.getSource().type;M==="geojson"&&_?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||_?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),E.setFeatureState(_,a.id,h)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,h){this._checkLoaded();let g=a.source,_=this.sourceCaches[g];if(_===void 0)return void this.fire(new o.k(new Error(`The source '${g}' does not exist in the map's style.`)));let E=_.getSource().type,M=E==="vector"?a.sourceLayer:void 0;E!=="vector"||M?h&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(M,a.id,h):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();let h=a.source,g=a.sourceLayer,_=this.sourceCaches[h];if(_!==void 0)return _.getSource().type!=="vector"||g?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(g,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let a=o.bN(this.sourceCaches,E=>E.serialize()),h=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,_=this.stylesheet;return o.bO({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:a,layers:h,terrain:g},E=>E!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){let h=M=>this._layers[M].type==="fill-extrusion",g={},_=[];for(let M=this._order.length-1;M>=0;M--){let L=this._order[M];if(h(L)){g[L]=M;for(let k of a){let B=k[L];if(B)for(let V of B)_.push(V)}}}_.sort((M,L)=>L.intersectionZ-M.intersectionZ);let E=[];for(let M=this._order.length-1;M>=0;M--){let L=this._order[M];if(h(L))for(let k=_.length-1;k>=0;k--){let B=_[k].feature;if(g[B.layer.id]<M)break;E.push(B),_.pop()}else for(let k of a){let B=k[L];if(B)for(let V of B)E.push(V.feature)}}return E}queryRenderedFeatures(a,h,g){h&&h.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",h.filter,null,h);let _={};if(h&&h.layers){if(!(Array.isArray(h.layers)||h.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let B of h.layers){let V=this._layers[B];if(!V)return this.fire(new o.k(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];_[V.source]=!0}}let E=[];h.availableImages=this._availableImages;let M=this._serializedAllLayers(),L=h.layers instanceof Set?h.layers:Array.isArray(h.layers)?new Set(h.layers):null,k=Object.assign(Object.assign({},h),{layers:L});for(let B in this.sourceCaches)h.layers&&!_[B]||E.push(Ze(this.sourceCaches[B],this._layers,M,a,k,g,this.map.terrain?(V,W,H)=>this.map.terrain.getElevation(V,W,H):void 0));return this.placement&&E.push(function(B,V,W,H,K,ee,ce){let ue={},fe=ee.queryRenderedSymbols(H),ve=[];for(let Se of Object.keys(fe).map(Number))ve.push(ce[Se]);ve.sort(rt);for(let Se of ve){let we=Se.featureIndex.lookupSymbolFeatures(fe[Se.bucketInstanceId],V,Se.bucketIndex,Se.sourceLayerIndex,K.filter,K.layers,K.availableImages,B);for(let Ie in we){let Pe=ue[Ie]=ue[Ie]||[],Ee=we[Ie];Ee.sort((je,Qe)=>{let Ve=Se.featureSortOrder;if(Ve){let Ge=Ve.indexOf(je.featureIndex);return Ve.indexOf(Qe.featureIndex)-Ge}return Qe.featureIndex-je.featureIndex});for(let je of Ee)Pe.push(je)}}return function(Se,we,Ie){for(let Pe in Se)for(let Ee of Se[Pe])at(Ee,Ie[we[Pe].source]);return Se}(ue,B,W)}(this._layers,M,this.sourceCaches,a,k,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(a,h){h&&h.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",h.filter,null,h);let g=this.sourceCaches[a];return g?function(_,E){let M=_.getRenderableIds().map(B=>_.getTileByID(B)),L=[],k={};for(let B=0;B<M.length;B++){let V=M[B],W=V.tileID.canonical.key;k[W]||(k[W]=!0,V.querySourceFeatures(L,E))}return L}(g,h):[]}getLight(){return this.light.getLight()}setLight(a,h={}){this._checkLoaded();let g=this.light.getLight(),_=!1;for(let M in a)if(!o.bH(a[M],g[M])){_=!0;break}if(!_)return;let E={now:x.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,h),this.light.updateTransitions(E)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,h={}){this._checkLoaded();let g=this.getSky(),_=!1;if(!a&&!g)return;if(a&&!g)_=!0;else if(!a&&g)_=!0;else for(let M in a)if(!o.bH(a[M],g[M])){_=!0;break}if(!_)return;let E={now:x.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,h),this.sky.updateTransitions(E)}_setProjectionInternal(a){let h=function(g){if(Array.isArray(g)){let _=new Dv({type:g});return{projection:_,transform:new Am,cameraHelper:new fA(_)}}switch(g){case"mercator":return{projection:new $r,transform:new Bn,cameraHelper:new Go};case"globe":{let _=new Dv({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new Am,cameraHelper:new fA(_)}}case"vertical-perspective":return{projection:new bm,transform:new Im,cameraHelper:new $o};default:return o.w(`Unknown projection name: ${g}. Falling back to mercator projection.`),{projection:new $r,transform:new Bn,cameraHelper:new Go}}}(a);this.projection=h.projection,this.map.migrateProjection(h.transform,h.cameraHelper);for(let g in this.sourceCaches)this.sourceCaches[g].reload()}_validate(a,h,g,_,E={}){return(!E||E.validate!==!1)&&kv(this,a.call(o.z,o.e({key:h,style:this.serialize(),value:g,styleSpec:o.v},_)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Nn().off(wr,this._rtlPluginLoaded);for(let h in this._layers)this._layers[h].setEventedParent(null);for(let h in this.sourceCaches){let g=this.sourceCaches[h];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(let h in this.sourceCaches)this.sourceCaches[h].update(a,this.map.terrain)}_generateCollisionBoxes(){for(let a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,h,g,_,E=!1){let M=!1,L=!1,k={};for(let B of this._order){let V=this._layers[B];if(V.type!=="symbol")continue;if(!k[V.source]){let H=this.sourceCaches[V.source];k[V.source]=H.getRenderableIds(!0).map(K=>H.getTileByID(K)).sort((K,ee)=>ee.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(ee.tileID)?-1:1))}let W=this.crossTileSymbolIndex.addLayer(V,k[V.source],a.center.lng);M=M||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(x.now(),a.zoom))&&(this.pauseablePlacement=new hb(a,this.map.terrain,this._order,E,h,g,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(x.now()),L=!0),M&&this.pauseablePlacement.placement.setStale()),L||M)for(let B of this._order){let V=this._layers[B];V.type==="symbol"&&this.placement.updateLayerOpacities(V,k[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(x.now())}_releaseSymbolFadeTiles(){for(let a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,h){return o._(this,void 0,void 0,function*(){let g=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();let _=this.sourceCaches[h.source];return _&&_.setDependencies(h.tileID.key,h.type,h.icons),g})}getGlyphs(a,h){return o._(this,void 0,void 0,function*(){let g=yield this.glyphManager.getGlyphs(h.stacks),_=this.sourceCaches[h.source];return _&&_.setDependencies(h.tileID.key,h.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,h={}){this._checkLoaded(),a&&this._validate(o.z.glyphs,"glyphs",a,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,h,g={},_){this._checkLoaded();let E=[{id:a,url:h}],M=[...Z(this.stylesheet.sprite),...E];this._validate(o.z.sprite,"sprite",M,null,g)||(this.stylesheet.sprite=M,this._loadSprite(E,!0,_))}removeSprite(a){this._checkLoaded();let h=Z(this.stylesheet.sprite);if(h.find(g=>g.id===a)){if(this._spritesImagesIds[a])for(let g of this._spritesImagesIds[a])this.imageManager.removeImage(g),this._changedImages[g]=!0;h.splice(h.findIndex(g=>g.id===a),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return Z(this.stylesheet.sprite)}setSprite(a,h={},g){this._checkLoaded(),a&&this._validate(o.z.sprite,"sprite",a,null,h)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,g):(this._unloadSprite(),g&&g(null)))}}var kq=o.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class qq{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,h,g,_,E,M,L,k,B){this.context=a;let V=this.boundPaintVertexBuffers.length!==_.length;for(let W=0;!V&&W<_.length;W++)this.boundPaintVertexBuffers[W]!==_[W]&&(V=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==g||V||this.boundIndexBuffer!==E||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==B?this.freshBind(h,g,_,E,M,L,k,B):(a.bindVertexArray.set(this.vao),L&&L.bind(),E&&E.dynamicDraw&&E.bind(),k&&k.bind(),B&&B.bind())}freshBind(a,h,g,_,E,M,L,k){let B=a.numAttributes,V=this.context,W=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=_,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=k,h.enableAttributes(W,a);for(let H of g)H.enableAttributes(W,a);M&&M.enableAttributes(W,a),L&&L.enableAttributes(W,a),k&&k.enableAttributes(W,a),h.bind(),h.setVertexAttribPointers(W,a,E);for(let H of g)H.bind(),H.setVertexAttribPointers(W,a,E);M&&(M.bind(),M.setVertexAttribPointers(W,a,E)),_&&_.bind(),L&&(L.bind(),L.setVertexAttribPointers(W,a,E)),k&&(k.bind(),k.setVertexAttribPointers(W,a,E)),V.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let qv=(w,a,h,g,_)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:a,u_fog_color:h?h.properties.get("fog-color"):o.bf.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:h?h.calculateFogBlendOpacity(g):0,u_horizon_color:h?h.properties.get("horizon-color"):o.bf.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),yb={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Vf(w){let a=[];for(let h=0;h<w.length;h++){if(w[h]===null)continue;let g=w[h].split(" ");a.push(g.pop())}return a}class _b{constructor(a,h,g,_,E,M,L,k,B=[]){let V=a.gl;this.program=V.createProgram();let W=Vf(h.staticAttributes),H=g?g.getBinderAttributes():[],K=W.concat(H),ee=sl.prelude.staticUniforms?Vf(sl.prelude.staticUniforms):[],ce=L.staticUniforms?Vf(L.staticUniforms):[],ue=h.staticUniforms?Vf(h.staticUniforms):[],fe=g?g.getBinderUniforms():[],ve=ee.concat(ce).concat(ue).concat(fe),Se=[];for(let Ve of ve)Se.indexOf(Ve)<0&&Se.push(Ve);let we=g?g.defines():[];zl(V)&&we.unshift("#version 300 es"),E&&we.push("#define OVERDRAW_INSPECTOR;"),M&&we.push("#define TERRAIN3D;"),k&&we.push(k),B&&we.push(...B);let Ie=we.concat(sl.prelude.fragmentSource,L.fragmentSource,h.fragmentSource).join(`
`),Pe=we.concat(sl.prelude.vertexSource,L.vertexSource,h.vertexSource).join(`
`);zl(V)||(Ie=function(Ve){return Ve.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ie),Pe=function(Ve){return Ve.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Pe));let Ee=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ee,Ie),V.compileShader(Ee),!V.getShaderParameter(Ee,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(Ee)}`);V.attachShader(this.program,Ee);let je=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(je,Pe),V.compileShader(je),!V.getShaderParameter(je,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(je)}`);V.attachShader(this.program,je),this.attributes={};let Qe={};this.numAttributes=K.length;for(let Ve=0;Ve<this.numAttributes;Ve++)K[Ve]&&(V.bindAttribLocation(this.program,Ve,K[Ve]),this.attributes[K[Ve]]=Ve);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(je),V.deleteShader(Ee);for(let Ve=0;Ve<Se.length;Ve++){let Ge=Se[Ve];if(Ge&&!Qe[Ge]){let Xe=V.getUniformLocation(this.program,Ge);Xe&&(Qe[Ge]=Xe)}}this.fixedUniforms=_(a,Qe),this.terrainUniforms=((Ve,Ge)=>({u_depth:new o.bP(Ve,Ge.u_depth),u_terrain:new o.bP(Ve,Ge.u_terrain),u_terrain_dim:new o.bg(Ve,Ge.u_terrain_dim),u_terrain_matrix:new o.bR(Ve,Ge.u_terrain_matrix),u_terrain_unpack:new o.bS(Ve,Ge.u_terrain_unpack),u_terrain_exaggeration:new o.bg(Ve,Ge.u_terrain_exaggeration)}))(a,Qe),this.projectionUniforms=((Ve,Ge)=>({u_projection_matrix:new o.bR(Ve,Ge.u_projection_matrix),u_projection_tile_mercator_coords:new o.bS(Ve,Ge.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bS(Ve,Ge.u_projection_clipping_plane),u_projection_transition:new o.bg(Ve,Ge.u_projection_transition),u_projection_fallback_matrix:new o.bR(Ve,Ge.u_projection_fallback_matrix)}))(a,Qe),this.binderUniforms=g?g.getUniforms(a,Qe):[]}draw(a,h,g,_,E,M,L,k,B,V,W,H,K,ee,ce,ue,fe,ve,Se){let we=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(g),a.setStencilMode(_),a.setColorMode(E),a.setCullFace(M),k){a.activeTexture.set(we.TEXTURE2),we.bindTexture(we.TEXTURE_2D,k.depthTexture),a.activeTexture.set(we.TEXTURE3),we.bindTexture(we.TEXTURE_2D,k.texture);for(let Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(k[Pe])}if(B)for(let Pe in B)this.projectionUniforms[yb[Pe]].set(B[Pe]);if(L)for(let Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(L[Pe]);ue&&ue.setUniforms(a,this.binderUniforms,ee,{zoom:ce});let Ie=0;switch(h){case we.LINES:Ie=2;break;case we.TRIANGLES:Ie=3;break;case we.LINE_STRIP:Ie=1}for(let Pe of K.get()){let Ee=Pe.vaos||(Pe.vaos={});(Ee[V]||(Ee[V]=new qq)).bind(a,this,W,ue?ue.getPaintVertexBuffers():[],H,Pe.vertexOffset,fe,ve,Se),we.drawElements(h,Pe.primitiveLength*Ie,we.UNSIGNED_SHORT,Pe.primitiveOffset*Ie*2)}}}function Fv(w,a,h){let g=1/o.aC(h,1,a.transform.tileZoom),_=Math.pow(2,h.tileID.overscaledZ),E=h.tileSize*Math.pow(2,a.transform.tileZoom)/_,M=E*(h.tileID.canonical.x+h.tileID.wrap*_),L=E*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[g,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[M>>16,L>>16],u_pixel_coord_lower:[65535&M,65535&L]}}let ul=(w,a,h,g)=>{let _=w.style.light,E=_.properties.get("position"),M=[E.x,E.y,E.z],L=o.bV();_.properties.get("anchor")==="viewport"&&o.bW(L,w.transform.bearingInRadians),o.bX(M,M,L);let k=w.transform.transformLightDirection(M),B=_.properties.get("color");return{u_lightpos:M,u_lightpos_globe:k,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+a,u_opacity:h,u_fill_translate:g}},Fq=(w,a,h,g,_,E,M)=>o.e(ul(w,a,h,g),Fv(E,w,M),{u_height_factor:-Math.pow(2,_.overscaledZ)/M.tileSize/8}),jv=(w,a,h,g)=>o.e(Fv(a,w,h),{u_fill_translate:g}),Mm=(w,a)=>({u_world:w,u_fill_translate:a}),Cm=(w,a,h,g,_)=>o.e(jv(w,a,h,_),{u_world:g}),jq=(w,a,h,g,_)=>{let E=w.transform,M,L,k=0;if(h.paint.get("circle-pitch-alignment")==="map"){let B=o.aC(a,1,E.zoom);M=!0,L=[B,B],k=B/(o.$*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*_}else M=!1,L=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:L,u_globe_extrude_scale:k,u_translate:g}},zv=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),zq=w=>({u_viewport_size:[w.width,w.height]}),Gf=(w,a=1)=>({u_color:w,u_overlay:0,u_overlay_scale:a}),hA=(w,a,h,g)=>{let _=o.aC(w,1,a)/(o.$*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*g;return{u_extrude_scale:o.aC(w,1,a),u_intensity:h,u_globe_extrude_scale:_}},xb=(w,a,h,g)=>{let _=o.L();o.bY(_,0,w.width,w.height,0,0,1);let E=w.context.gl;return{u_matrix:_,u_world:[E.drawingBufferWidth,E.drawingBufferHeight],u_image:h,u_color_ramp:g,u_opacity:a.paint.get("heatmap-opacity")}},Uq=(w,a,h)=>{let g=h.paint.get("hillshade-accent-color"),_;switch(h.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}let E=h.getIlluminationProperties();for(let M=0;M<E.directionRadians.length;M++)h.paint.get("hillshade-illumination-anchor")==="viewport"&&(E.directionRadians[M]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:bb(0,a.tileID),u_exaggeration:h.paint.get("hillshade-exaggeration"),u_altitudes:E.altitudeRadians,u_azimuths:E.directionRadians,u_accent:g,u_method:_,u_highlights:E.highlightColor,u_shadows:E.shadowColor}},pA=(w,a)=>{let h=a.stride,g=o.L();return o.bY(g,0,o.$,-o.$,0,0,1),o.M(g,g,[0,-o.$,0]),{u_matrix:g,u_image:1,u_dimension:[h,h],u_zoom:w.overscaledZ,u_unpack:a.getUnpackVector()}};function bb(w,a){let h=Math.pow(2,a.canonical.z),g=a.canonical.y;return[new o.a1(0,g/h).toLngLat().lat,new o.a1(0,(g+1)/h).toLngLat().lat]}let dA=(w,a,h=0)=>({u_image:0,u_unpack:a.getUnpackVector(),u_dimension:[a.stride,a.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:h,u_opacity:w.paint.get("color-relief-opacity")}),Uv=(w,a,h,g)=>{let _=w.transform;return{u_translation:Eb(w,a,h),u_ratio:g/o.aC(a,1,_.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},mA=(w,a,h,g,_)=>o.e(Uv(w,a,h,g),{u_image:0,u_image_height:_}),gA=(w,a,h,g,_)=>{let E=w.transform,M=wb(a,E);return{u_translation:Eb(w,a,h),u_texsize:a.imageAtlasTexture.size,u_ratio:g/o.aC(a,1,E.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[M,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},$f=(w,a,h,g,_,E)=>{let M=w.lineAtlas,L=wb(a,w.transform),k=h.layout.get("line-cap")==="round",B=M.getDash(_.from,k),V=M.getDash(_.to,k),W=B.width*E.fromScale,H=V.width*E.toScale;return o.e(Uv(w,a,h,g),{u_patternscale_a:[L/W,-B.height/2],u_patternscale_b:[L/H,-V.height/2],u_sdfgamma:M.width/(256*Math.min(W,H)*w.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:V.y,u_mix:E.t})};function wb(w,a){return 1/o.aC(w,1,a.tileZoom)}function Eb(w,a,h){return o.aD(w.transform,a,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}let Pm=(w,a,h,g,_)=>{return{u_tl_parent:w,u_scale_parent:a,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(M=g.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(E=g.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Bq(g.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var E,M};function Bq(w){w*=Math.PI/180;let a=Math.sin(w),h=Math.cos(w);return[(2*h+1)/3,(-Math.sqrt(3)*a-h+1)/3,(Math.sqrt(3)*a-h+1)/3]}let Rm=(w,a,h,g,_,E,M,L,k,B,V,W,H)=>{let K=M.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:K.width/K.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:L,u_coord_matrix:k,u_is_text:+V,u_pitch_with_map:+g,u_is_along_line:_,u_is_variable_anchor:E,u_texsize:W,u_texture:0,u_translation:B,u_pitched_scale:H}},vA=(w,a,h,g,_,E,M,L,k,B,V,W,H,K)=>{let ee=M.transform;return o.e(Rm(w,a,h,g,_,E,M,L,k,B,V,W,K),{u_gamma_scale:g?Math.cos(ee.pitch*Math.PI/180)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},Vq=(w,a,h,g,_,E,M,L,k,B,V,W,H)=>o.e(vA(w,a,h,g,_,E,M,L,k,B,!0,V,0,H),{u_texsize_icon:W,u_texture_icon:1}),yA=(w,a)=>({u_opacity:w,u_color:a}),_A=(w,a,h,g,_)=>o.e(function(E,M,L,k){let B=L.imageManager.getPattern(E.from.toString()),V=L.imageManager.getPattern(E.to.toString()),{width:W,height:H}=L.imageManager.getPixelSize(),K=Math.pow(2,k.tileID.overscaledZ),ee=k.tileSize*Math.pow(2,L.transform.tileZoom)/K,ce=ee*(k.tileID.canonical.x+k.tileID.wrap*K),ue=ee*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[W,H],u_mix:M.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/o.aC(k,1,L.transform.tileZoom),u_pixel_coord_upper:[ce>>16,ue>>16],u_pixel_coord_lower:[65535&ce,65535&ue]}}(h,_,a,g),{u_opacity:w}),Sb=(w,a)=>{},Tb={fillExtrusion:(w,a)=>({u_lightpos:new o.bT(w,a.u_lightpos),u_lightpos_globe:new o.bT(w,a.u_lightpos_globe),u_lightintensity:new o.bg(w,a.u_lightintensity),u_lightcolor:new o.bT(w,a.u_lightcolor),u_vertical_gradient:new o.bg(w,a.u_vertical_gradient),u_opacity:new o.bg(w,a.u_opacity),u_fill_translate:new o.bU(w,a.u_fill_translate)}),fillExtrusionPattern:(w,a)=>({u_lightpos:new o.bT(w,a.u_lightpos),u_lightpos_globe:new o.bT(w,a.u_lightpos_globe),u_lightintensity:new o.bg(w,a.u_lightintensity),u_lightcolor:new o.bT(w,a.u_lightcolor),u_vertical_gradient:new o.bg(w,a.u_vertical_gradient),u_height_factor:new o.bg(w,a.u_height_factor),u_opacity:new o.bg(w,a.u_opacity),u_fill_translate:new o.bU(w,a.u_fill_translate),u_image:new o.bP(w,a.u_image),u_texsize:new o.bU(w,a.u_texsize),u_pixel_coord_upper:new o.bU(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(w,a.u_pixel_coord_lower),u_scale:new o.bT(w,a.u_scale),u_fade:new o.bg(w,a.u_fade)}),fill:(w,a)=>({u_fill_translate:new o.bU(w,a.u_fill_translate)}),fillPattern:(w,a)=>({u_image:new o.bP(w,a.u_image),u_texsize:new o.bU(w,a.u_texsize),u_pixel_coord_upper:new o.bU(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(w,a.u_pixel_coord_lower),u_scale:new o.bT(w,a.u_scale),u_fade:new o.bg(w,a.u_fade),u_fill_translate:new o.bU(w,a.u_fill_translate)}),fillOutline:(w,a)=>({u_world:new o.bU(w,a.u_world),u_fill_translate:new o.bU(w,a.u_fill_translate)}),fillOutlinePattern:(w,a)=>({u_world:new o.bU(w,a.u_world),u_image:new o.bP(w,a.u_image),u_texsize:new o.bU(w,a.u_texsize),u_pixel_coord_upper:new o.bU(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(w,a.u_pixel_coord_lower),u_scale:new o.bT(w,a.u_scale),u_fade:new o.bg(w,a.u_fade),u_fill_translate:new o.bU(w,a.u_fill_translate)}),circle:(w,a)=>({u_camera_to_center_distance:new o.bg(w,a.u_camera_to_center_distance),u_scale_with_map:new o.bP(w,a.u_scale_with_map),u_pitch_with_map:new o.bP(w,a.u_pitch_with_map),u_extrude_scale:new o.bU(w,a.u_extrude_scale),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.bg(w,a.u_globe_extrude_scale),u_translate:new o.bU(w,a.u_translate)}),collisionBox:(w,a)=>({u_pixel_extrude_scale:new o.bU(w,a.u_pixel_extrude_scale)}),collisionCircle:(w,a)=>({u_viewport_size:new o.bU(w,a.u_viewport_size)}),debug:(w,a)=>({u_color:new o.bQ(w,a.u_color),u_overlay:new o.bP(w,a.u_overlay),u_overlay_scale:new o.bg(w,a.u_overlay_scale)}),depth:Sb,clippingMask:Sb,heatmap:(w,a)=>({u_extrude_scale:new o.bg(w,a.u_extrude_scale),u_intensity:new o.bg(w,a.u_intensity),u_globe_extrude_scale:new o.bg(w,a.u_globe_extrude_scale)}),heatmapTexture:(w,a)=>({u_matrix:new o.bR(w,a.u_matrix),u_world:new o.bU(w,a.u_world),u_image:new o.bP(w,a.u_image),u_color_ramp:new o.bP(w,a.u_color_ramp),u_opacity:new o.bg(w,a.u_opacity)}),hillshade:(w,a)=>({u_image:new o.bP(w,a.u_image),u_latrange:new o.bU(w,a.u_latrange),u_exaggeration:new o.bg(w,a.u_exaggeration),u_altitudes:new o.b_(w,a.u_altitudes),u_azimuths:new o.b_(w,a.u_azimuths),u_accent:new o.bQ(w,a.u_accent),u_method:new o.bP(w,a.u_method),u_shadows:new o.bZ(w,a.u_shadows),u_highlights:new o.bZ(w,a.u_highlights)}),hillshadePrepare:(w,a)=>({u_matrix:new o.bR(w,a.u_matrix),u_image:new o.bP(w,a.u_image),u_dimension:new o.bU(w,a.u_dimension),u_zoom:new o.bg(w,a.u_zoom),u_unpack:new o.bS(w,a.u_unpack)}),colorRelief:(w,a)=>({u_image:new o.bP(w,a.u_image),u_unpack:new o.bS(w,a.u_unpack),u_dimension:new o.bU(w,a.u_dimension),u_elevation_stops:new o.bP(w,a.u_elevation_stops),u_color_stops:new o.bP(w,a.u_color_stops),u_color_ramp_size:new o.bP(w,a.u_color_ramp_size),u_opacity:new o.bg(w,a.u_opacity)}),line:(w,a)=>({u_translation:new o.bU(w,a.u_translation),u_ratio:new o.bg(w,a.u_ratio),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(w,a.u_units_to_pixels)}),lineGradient:(w,a)=>({u_translation:new o.bU(w,a.u_translation),u_ratio:new o.bg(w,a.u_ratio),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(w,a.u_units_to_pixels),u_image:new o.bP(w,a.u_image),u_image_height:new o.bg(w,a.u_image_height)}),linePattern:(w,a)=>({u_translation:new o.bU(w,a.u_translation),u_texsize:new o.bU(w,a.u_texsize),u_ratio:new o.bg(w,a.u_ratio),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_image:new o.bP(w,a.u_image),u_units_to_pixels:new o.bU(w,a.u_units_to_pixels),u_scale:new o.bT(w,a.u_scale),u_fade:new o.bg(w,a.u_fade)}),lineSDF:(w,a)=>({u_translation:new o.bU(w,a.u_translation),u_ratio:new o.bg(w,a.u_ratio),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(w,a.u_units_to_pixels),u_patternscale_a:new o.bU(w,a.u_patternscale_a),u_patternscale_b:new o.bU(w,a.u_patternscale_b),u_sdfgamma:new o.bg(w,a.u_sdfgamma),u_image:new o.bP(w,a.u_image),u_tex_y_a:new o.bg(w,a.u_tex_y_a),u_tex_y_b:new o.bg(w,a.u_tex_y_b),u_mix:new o.bg(w,a.u_mix)}),raster:(w,a)=>({u_tl_parent:new o.bU(w,a.u_tl_parent),u_scale_parent:new o.bg(w,a.u_scale_parent),u_buffer_scale:new o.bg(w,a.u_buffer_scale),u_fade_t:new o.bg(w,a.u_fade_t),u_opacity:new o.bg(w,a.u_opacity),u_image0:new o.bP(w,a.u_image0),u_image1:new o.bP(w,a.u_image1),u_brightness_low:new o.bg(w,a.u_brightness_low),u_brightness_high:new o.bg(w,a.u_brightness_high),u_saturation_factor:new o.bg(w,a.u_saturation_factor),u_contrast_factor:new o.bg(w,a.u_contrast_factor),u_spin_weights:new o.bT(w,a.u_spin_weights),u_coords_top:new o.bS(w,a.u_coords_top),u_coords_bottom:new o.bS(w,a.u_coords_bottom)}),symbolIcon:(w,a)=>({u_is_size_zoom_constant:new o.bP(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(w,a.u_is_size_feature_constant),u_size_t:new o.bg(w,a.u_size_t),u_size:new o.bg(w,a.u_size),u_camera_to_center_distance:new o.bg(w,a.u_camera_to_center_distance),u_pitch:new o.bg(w,a.u_pitch),u_rotate_symbol:new o.bP(w,a.u_rotate_symbol),u_aspect_ratio:new o.bg(w,a.u_aspect_ratio),u_fade_change:new o.bg(w,a.u_fade_change),u_label_plane_matrix:new o.bR(w,a.u_label_plane_matrix),u_coord_matrix:new o.bR(w,a.u_coord_matrix),u_is_text:new o.bP(w,a.u_is_text),u_pitch_with_map:new o.bP(w,a.u_pitch_with_map),u_is_along_line:new o.bP(w,a.u_is_along_line),u_is_variable_anchor:new o.bP(w,a.u_is_variable_anchor),u_texsize:new o.bU(w,a.u_texsize),u_texture:new o.bP(w,a.u_texture),u_translation:new o.bU(w,a.u_translation),u_pitched_scale:new o.bg(w,a.u_pitched_scale)}),symbolSDF:(w,a)=>({u_is_size_zoom_constant:new o.bP(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(w,a.u_is_size_feature_constant),u_size_t:new o.bg(w,a.u_size_t),u_size:new o.bg(w,a.u_size),u_camera_to_center_distance:new o.bg(w,a.u_camera_to_center_distance),u_pitch:new o.bg(w,a.u_pitch),u_rotate_symbol:new o.bP(w,a.u_rotate_symbol),u_aspect_ratio:new o.bg(w,a.u_aspect_ratio),u_fade_change:new o.bg(w,a.u_fade_change),u_label_plane_matrix:new o.bR(w,a.u_label_plane_matrix),u_coord_matrix:new o.bR(w,a.u_coord_matrix),u_is_text:new o.bP(w,a.u_is_text),u_pitch_with_map:new o.bP(w,a.u_pitch_with_map),u_is_along_line:new o.bP(w,a.u_is_along_line),u_is_variable_anchor:new o.bP(w,a.u_is_variable_anchor),u_texsize:new o.bU(w,a.u_texsize),u_texture:new o.bP(w,a.u_texture),u_gamma_scale:new o.bg(w,a.u_gamma_scale),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_is_halo:new o.bP(w,a.u_is_halo),u_translation:new o.bU(w,a.u_translation),u_pitched_scale:new o.bg(w,a.u_pitched_scale)}),symbolTextAndIcon:(w,a)=>({u_is_size_zoom_constant:new o.bP(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(w,a.u_is_size_feature_constant),u_size_t:new o.bg(w,a.u_size_t),u_size:new o.bg(w,a.u_size),u_camera_to_center_distance:new o.bg(w,a.u_camera_to_center_distance),u_pitch:new o.bg(w,a.u_pitch),u_rotate_symbol:new o.bP(w,a.u_rotate_symbol),u_aspect_ratio:new o.bg(w,a.u_aspect_ratio),u_fade_change:new o.bg(w,a.u_fade_change),u_label_plane_matrix:new o.bR(w,a.u_label_plane_matrix),u_coord_matrix:new o.bR(w,a.u_coord_matrix),u_is_text:new o.bP(w,a.u_is_text),u_pitch_with_map:new o.bP(w,a.u_pitch_with_map),u_is_along_line:new o.bP(w,a.u_is_along_line),u_is_variable_anchor:new o.bP(w,a.u_is_variable_anchor),u_texsize:new o.bU(w,a.u_texsize),u_texsize_icon:new o.bU(w,a.u_texsize_icon),u_texture:new o.bP(w,a.u_texture),u_texture_icon:new o.bP(w,a.u_texture_icon),u_gamma_scale:new o.bg(w,a.u_gamma_scale),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_is_halo:new o.bP(w,a.u_is_halo),u_translation:new o.bU(w,a.u_translation),u_pitched_scale:new o.bg(w,a.u_pitched_scale)}),background:(w,a)=>({u_opacity:new o.bg(w,a.u_opacity),u_color:new o.bQ(w,a.u_color)}),backgroundPattern:(w,a)=>({u_opacity:new o.bg(w,a.u_opacity),u_image:new o.bP(w,a.u_image),u_pattern_tl_a:new o.bU(w,a.u_pattern_tl_a),u_pattern_br_a:new o.bU(w,a.u_pattern_br_a),u_pattern_tl_b:new o.bU(w,a.u_pattern_tl_b),u_pattern_br_b:new o.bU(w,a.u_pattern_br_b),u_texsize:new o.bU(w,a.u_texsize),u_mix:new o.bg(w,a.u_mix),u_pattern_size_a:new o.bU(w,a.u_pattern_size_a),u_pattern_size_b:new o.bU(w,a.u_pattern_size_b),u_scale_a:new o.bg(w,a.u_scale_a),u_scale_b:new o.bg(w,a.u_scale_b),u_pixel_coord_upper:new o.bU(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(w,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bg(w,a.u_tile_units_to_pixels)}),terrain:(w,a)=>({u_texture:new o.bP(w,a.u_texture),u_ele_delta:new o.bg(w,a.u_ele_delta),u_fog_matrix:new o.bR(w,a.u_fog_matrix),u_fog_color:new o.bQ(w,a.u_fog_color),u_fog_ground_blend:new o.bg(w,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bg(w,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bQ(w,a.u_horizon_color),u_horizon_fog_blend:new o.bg(w,a.u_horizon_fog_blend),u_is_globe_mode:new o.bg(w,a.u_is_globe_mode)}),terrainDepth:(w,a)=>({u_ele_delta:new o.bg(w,a.u_ele_delta)}),terrainCoords:(w,a)=>({u_texture:new o.bP(w,a.u_texture),u_terrain_coords_id:new o.bg(w,a.u_terrain_coords_id),u_ele_delta:new o.bg(w,a.u_ele_delta)}),projectionErrorMeasurement:(w,a)=>({u_input:new o.bg(w,a.u_input),u_output_expected:new o.bg(w,a.u_output_expected)}),atmosphere:(w,a)=>({u_sun_pos:new o.bT(w,a.u_sun_pos),u_atmosphere_blend:new o.bg(w,a.u_atmosphere_blend),u_globe_position:new o.bT(w,a.u_globe_position),u_globe_radius:new o.bg(w,a.u_globe_radius),u_inv_proj_matrix:new o.bR(w,a.u_inv_proj_matrix)}),sky:(w,a)=>({u_sky_color:new o.bQ(w,a.u_sky_color),u_horizon_color:new o.bQ(w,a.u_horizon_color),u_horizon:new o.bU(w,a.u_horizon),u_horizon_normal:new o.bU(w,a.u_horizon_normal),u_sky_horizon_blend:new o.bg(w,a.u_sky_horizon_blend),u_sky_blend:new o.bg(w,a.u_sky_blend)})};class xA{constructor(a,h,g){this.context=a;let _=a.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){let h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Bv={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ju{constructor(a,h,g,_){this.length=h.length,this.attributes=g,this.itemSize=h.bytesPerElement,this.dynamicDraw=_,this.context=a;let E=a.gl;this.buffer=E.createBuffer(),a.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);let h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,h){for(let g=0;g<this.attributes.length;g++){let _=h.attributes[this.attributes[g].name];_!==void 0&&a.enableVertexAttribArray(_)}}setVertexAttribPointers(a,h,g){for(let _=0;_<this.attributes.length;_++){let E=this.attributes[_],M=h.attributes[E.name];M!==void 0&&a.vertexAttribPointer(M,E.components,a[Bv[E.type]],!1,this.itemSize,E.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class fn{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ib extends fn{getDefault(){return o.bf.transparent}set(a){let h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Ab extends fn{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class bA extends fn{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Mb extends fn{getDefault(){return[!0,!0,!0,!0]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Hf extends fn{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Cb extends fn{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Gq extends fn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){let h=this.current;(a.func!==h.func||a.ref!==h.ref||a.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class $q extends fn{getDefault(){let a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Hq extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;a?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=a,this.dirty=!1}}class Wq extends fn{getDefault(){return[0,1]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class wA extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;a?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=a,this.dirty=!1}}class Zq extends fn{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class EA extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;a?h.enable(h.BLEND):h.disable(h.BLEND),this.current=a,this.dirty=!1}}class Vv extends fn{getDefault(){let a=this.gl;return[a.ONE,a.ZERO]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Gv extends fn{getDefault(){return o.bf.transparent}set(a){let h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class $v extends fn{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Pb extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;a?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=a,this.dirty=!1}}class Wf extends fn{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Om extends fn{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class dp extends fn{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Is extends fn{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class SA extends fn{getDefault(){let a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class TA extends fn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Rb extends fn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Zf extends fn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.bindTexture(h.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Hv extends fn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Wv extends fn{getDefault(){return null}set(a){let h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Lm extends fn{getDefault(){return null}set(a){var h;if(a===this.current&&!this.dirty)return;let g=this.gl;zl(g)?g.bindVertexArray(a):(h=g.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class Zv extends fn{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class IA extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class mp extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Lc extends fn{constructor(a,h){super(a),this.context=a,this.parent=h}getDefault(){return null}}class AA extends Lc{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Ob extends Lc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Zr extends Lc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}let Dm="Framebuffer is not complete";class Yq{constructor(a,h,g,_,E){this.context=a,this.width=h,this.height=g;let M=a.gl,L=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new AA(a,L),_)this.depthAttachment=E?new Zr(a,L):new Ob(a,L);else if(E)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(Dm)}destroy(){let a=this.context.gl,h=this.colorAttachment.get();if(h&&a.deleteTexture(h),this.depthAttachment){let g=this.depthAttachment.get();g&&a.deleteRenderbuffer(g)}a.deleteFramebuffer(this.framebuffer)}}class MA{constructor(a){var h,g;if(this.gl=a,this.clearColor=new Ib(this),this.clearDepth=new Ab(this),this.clearStencil=new bA(this),this.colorMask=new Mb(this),this.depthMask=new Hf(this),this.stencilMask=new Cb(this),this.stencilFunc=new Gq(this),this.stencilOp=new $q(this),this.stencilTest=new Hq(this),this.depthRange=new Wq(this),this.depthTest=new wA(this),this.depthFunc=new Zq(this),this.blend=new EA(this),this.blendFunc=new Vv(this),this.blendColor=new Gv(this),this.blendEquation=new $v(this),this.cullFace=new Pb(this),this.cullFaceSide=new Wf(this),this.frontFace=new Om(this),this.program=new dp(this),this.activeTexture=new Is(this),this.viewport=new SA(this),this.bindFramebuffer=new TA(this),this.bindRenderbuffer=new Rb(this),this.bindTexture=new Zf(this),this.bindVertexBuffer=new Hv(this),this.bindElementBuffer=new Wv(this),this.bindVertexArray=new Lm(this),this.pixelStoreUnpack=new Zv(this),this.pixelStoreUnpackPremultiplyAlpha=new IA(this),this.pixelStoreUnpackFlipY=new mp(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),zl(a)){this.HALF_FLOAT=a.HALF_FLOAT;let _=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=a.RGBA16F)!==null&&h!==void 0?h:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(g=a.RGB16F)!==null&&g!==void 0?g:_==null?void 0:_.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");let _=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,h){return new xA(this,a,h)}createVertexBuffer(a,h,g){return new ju(this,a,h,g)}createRenderbuffer(a,h,g){let _=this.gl,E=_.createRenderbuffer();return this.bindRenderbuffer.set(E),_.renderbufferStorage(_.RENDERBUFFER,a,h,g),this.bindRenderbuffer.set(null),E}createFramebuffer(a,h,g,_){return new Yq(this,a,h,g,_)}clear({color:a,depth:h,stencil:g}){let _=this.gl,E=0;a&&(E|=_.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(E|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),g!==void 0&&(E|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),_.clear(E)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bH(a.blendFunction,Jn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return zl(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var h;return zl(this.gl)?this.gl.deleteVertexArray(a):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let Dc;function CA(w,a,h,g,_){let E=w.context,M=w.transform,L=E.gl,k=w.useProgram("collisionBox"),B=[],V=0,W=0;for(let fe=0;fe<g.length;fe++){let ve=g[fe],Se=a.getTile(ve).getBucket(h);if(!Se)continue;let we=_?Se.textCollisionBox:Se.iconCollisionBox,Ie=Se.collisionCircleArray;Ie.length>0&&(B.push({circleArray:Ie,circleOffset:W,coord:ve}),V+=Ie.length/4,W=V),we&&k.draw(E,L.LINES,Ar.disabled,nn.disabled,w.colorModeForRenderPass(),cr.disabled,zv(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve),M.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,null,w.transform.zoom,null,null,we.collisionVertexBuffer)}if(!_||!B.length)return;let H=w.useProgram("collisionCircle"),K=new o.b$;K.resize(4*V),K._trim();let ee=0;for(let fe of B)for(let ve=0;ve<fe.circleArray.length/4;ve++){let Se=4*ve,we=fe.circleArray[Se+0],Ie=fe.circleArray[Se+1],Pe=fe.circleArray[Se+2],Ee=fe.circleArray[Se+3];K.emplace(ee++,we,Ie,Pe,Ee,0),K.emplace(ee++,we,Ie,Pe,Ee,1),K.emplace(ee++,we,Ie,Pe,Ee,2),K.emplace(ee++,we,Ie,Pe,Ee,3)}(!Dc||Dc.length<2*V)&&(Dc=function(fe){let ve=2*fe,Se=new o.c1;Se.resize(ve),Se._trim();for(let we=0;we<ve;we++){let Ie=6*we;Se.uint16[Ie+0]=4*we+0,Se.uint16[Ie+1]=4*we+1,Se.uint16[Ie+2]=4*we+2,Se.uint16[Ie+3]=4*we+2,Se.uint16[Ie+4]=4*we+3,Se.uint16[Ie+5]=4*we+0}return Se}(V));let ce=E.createIndexBuffer(Dc,!0),ue=E.createVertexBuffer(K,o.c0.members,!0);for(let fe of B){let ve=zq(w.transform);H.draw(E,L.TRIANGLES,Ar.disabled,nn.disabled,w.colorModeForRenderPass(),cr.disabled,ve,w.style.map.terrain&&w.style.map.terrain.getTerrainData(fe.coord),null,h.id,ue,ce,o.aM.simpleSegment(0,2*fe.circleOffset,fe.circleArray.length,fe.circleArray.length/2),null,w.transform.zoom,null,null,null)}ue.destroy(),ce.destroy()}let Kq=o.ag(new Float32Array(16));function PA(w,a,h,g,_,E){let{horizontalAlign:M,verticalAlign:L}=o.aH(w);return new o.P((-(M-.5)*a/_+g[0])*E,(-(L-.5)*h/_+g[1])*E)}function Xq(w,a,h,g,_,E){let M=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let L=g.mult(E);h||(L=L.rotate(-_));let k=M.add(L);return Mn(k.x,k.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(h){let L=_n(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(w),k=Math.atan(L.y/L.x)+(L.x<0?Math.PI:0);return w.add(g.rotate(k))}return w.add(g)}function Lb(w,a,h,g,_,E,M,L,k,B,V,W){let H=w.text.placedSymbolArray,K=w.text.dynamicLayoutVertexArray,ee=w.icon.dynamicLayoutVertexArray,ce={};K.clear();for(let ue=0;ue<H.length;ue++){let fe=H.get(ue),ve=fe.hidden||!fe.crossTileID||w.allowVerticalPlacement&&!fe.placedOrientation?null:g[fe.crossTileID];if(ve){let Se=new o.P(fe.anchorX,fe.anchorY),we={getElevation:W,width:_.width,height:_.height,pitchedLabelPlaneMatrix:E,pitchWithMap:h,transform:_,tileAnchorPoint:Se,translation:B,unwrappedTileID:V},Ie=h?Ts(Se.x,Se.y,we):_n(Se.x,Se.y,we),Pe=gt(_.cameraToCenterDistance,Ie.signedDistanceFromCamera),Ee=o.ap(w.textSizeData,L,fe)*Pe/o.aB;h&&(Ee*=w.tilePixelRatio/M);let{width:je,height:Qe,anchor:Ve,textOffset:Ge,textBoxScale:Xe}=ve,vt=PA(Ve,je,Qe,Ge,Xe,Ee),bt=_.getPitchedTextCorrection(Se.x+B[0],Se.y+B[1],V),st=Xq(Ie.point,we,a,vt,-_.bearingInRadians,bt),Zt=w.allowVerticalPlacement&&fe.placedOrientation===o.ao.vertical?Math.PI/2:0;for(let Nr=0;Nr<fe.numGlyphs;Nr++)o.av(K,st,Zt);k&&fe.associatedIconIndex>=0&&(ce[fe.associatedIconIndex]={shiftedAnchor:st,angle:Zt})}else jl(fe.numGlyphs,K)}if(k){ee.clear();let ue=w.icon.placedSymbolArray;for(let fe=0;fe<ue.length;fe++){let ve=ue.get(fe);if(ve.hidden)jl(ve.numGlyphs,ee);else{let Se=ce[fe];if(Se)for(let we=0;we<ve.numGlyphs;we++)o.av(ee,Se.shiftedAnchor,Se.angle);else jl(ve.numGlyphs,ee)}}w.icon.dynamicLayoutVertexBuffer.updateData(ee)}w.text.dynamicLayoutVertexBuffer.updateData(K)}function Yv(w,a,h){return h.iconsInText&&a?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Nm(w,a,h,g,_,E,M,L,k,B,V,W,H){let K=w.context,ee=K.gl,ce=w.transform,ue=L==="map",fe=k==="map",ve=L!=="viewport"&&h.layout.get("symbol-placement")!=="point",Se=ue&&!fe&&!ve,we=!h.layout.get("symbol-sort-key").isConstant(),Ie=!1,Pe=w.getDepthModeForSublayer(0,Ar.ReadOnly),Ee=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),je=[],Qe=ce.getCircleRadiusCorrection();for(let Ve of g){let Ge=a.getTile(Ve),Xe=Ge.getBucket(h);if(!Xe)continue;let vt=_?Xe.text:Xe.icon;if(!vt||!vt.segments.get().length||!vt.hasVisibleVertices)continue;let bt=vt.programConfigurations.get(h.id),st=_||Xe.sdfIcons,Zt=_?Xe.textSizeData:Xe.iconSizeData,Nr=fe||ce.pitch!==0,hn=w.useProgram(Yv(st,_,Xe),bt),qn=o.an(Zt,ce.zoom),Cn=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ve),li,bi,Or,Fn,$i=[0,0],to=null;if(_)bi=Ge.glyphAtlasTexture,Or=ee.LINEAR,li=Ge.glyphAtlasTexture.size,Xe.iconsInText&&($i=Ge.imageAtlasTexture.size,to=Ge.imageAtlasTexture,Fn=Nr||w.options.rotating||w.options.zooming||Zt.kind==="composite"||Zt.kind==="camera"?ee.LINEAR:ee.NEAREST);else{let Hi=h.layout.get("icon-size").constantOr(0)!==1||Xe.iconsNeedLinear;bi=Ge.imageAtlasTexture,Or=st||w.options.rotating||w.options.zooming||Hi||Nr?ee.LINEAR:ee.NEAREST,li=Ge.imageAtlasTexture.size}let ho=o.aC(Ge,1,w.transform.zoom),la=Pr(ue,w.transform,ho),ml=o.L();o.aq(ml,la);let kc=ar(fe,ue,w.transform,ho),qc=o.aD(ce,Ge,E,M),Ap=ce.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Mp=Ee&&Xe.hasTextData(),th=h.layout.get("icon-text-fit")!=="none"&&Mp&&Xe.hasIconData();if(ve){let Hi=w.style.map.terrain?(Cs,Wi)=>w.style.map.terrain.getElevation(Ve,Cs,Wi):null,ro=h.layout.get("text-rotation-alignment")==="map";Tn(Xe,w,_,la,ml,fe,B,ro,Ve.toUnwrapped(),ce.width,ce.height,qc,Hi)}let rh=_&&Ee||th,Pa=ve||rh?Kq:fe?la:w.transform.clipSpaceToPixelsMatrix,gl=st&&h.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ua;ua=st?Xe.iconsInText?Vq(Zt.kind,qn,Se,fe,ve,rh,w,Pa,kc,qc,li,$i,Qe):vA(Zt.kind,qn,Se,fe,ve,rh,w,Pa,kc,qc,_,li,0,Qe):Rm(Zt.kind,qn,Se,fe,ve,rh,w,Pa,kc,qc,_,li,Qe);let Fc={program:hn,buffers:vt,uniformValues:ua,projectionData:Ap,atlasTexture:bi,atlasTextureIcon:to,atlasInterpolation:Or,atlasInterpolationIcon:Fn,isSDF:st,hasHalo:gl};if(we&&Xe.canOverlap){Ie=!0;let Hi=vt.segments.get();for(let ro of Hi)je.push({segments:new o.aM([ro]),sortKey:ro.sortKey,state:Fc,terrainData:Cn})}else je.push({segments:vt.segments,sortKey:0,state:Fc,terrainData:Cn})}Ie&&je.sort((Ve,Ge)=>Ve.sortKey-Ge.sortKey);for(let Ve of je){let Ge=Ve.state;if(K.activeTexture.set(ee.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,ee.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(K.activeTexture.set(ee.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Ge.isSDF){let Xe=Ge.uniformValues;Ge.hasHalo&&(Xe.u_is_halo=1,km(Ge.buffers,Ve.segments,h,w,Ge.program,Pe,V,W,Xe,Ge.projectionData,Ve.terrainData)),Xe.u_is_halo=0}km(Ge.buffers,Ve.segments,h,w,Ge.program,Pe,V,W,Ge.uniformValues,Ge.projectionData,Ve.terrainData)}}function km(w,a,h,g,_,E,M,L,k,B,V){let W=g.context;_.draw(W,W.gl.TRIANGLES,E,M,L,cr.backCCW,k,V,B,h.id,w.layoutVertexBuffer,w.indexBuffer,a,h.paint,g.transform.zoom,w.programConfigurations.get(h.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Db(w,a,h,g,_){let E=w.context,M=E.gl,L=nn.disabled,k=new Jn([M.ONE,M.ONE],o.bf.transparent,[!0,!0,!0,!0]),B=a.getBucket(h);if(!B)return;let V=g.key,W=h.heatmapFbos.get(V);W||(W=qm(E,a.tileSize,a.tileSize),h.heatmapFbos.set(V,W)),E.bindFramebuffer.set(W.framebuffer),E.viewport.set([0,0,a.tileSize,a.tileSize]),E.clear({color:o.bf.transparent});let H=B.programConfigurations.get(h.id),K=w.useProgram("heatmap",H,!_),ee=w.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ce=w.style.map.terrain.getTerrainData(g);K.draw(E,M.TRIANGLES,Ar.disabled,L,k,cr.disabled,hA(a,w.transform.zoom,h.paint.get("heatmap-intensity"),1),ce,ee,h.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,h.paint,w.transform.zoom,H)}function RA(w,a,h,g,_){let E=w.context,M=E.gl,L=w.transform;E.setColorMode(w.colorModeForRenderPass());let k=Fm(E,a),B=h.key,V=a.heatmapFbos.get(B);if(!V)return;E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,V.colorAttachment.get()),E.activeTexture.set(M.TEXTURE1),k.bind(M.LINEAR,M.CLAMP_TO_EDGE);let W=L.getProjectionData({overscaledTileID:h,applyTerrainMatrix:_,applyGlobeMatrix:!g});w.useProgram("heatmapTexture").draw(E,M.TRIANGLES,Ar.disabled,nn.disabled,w.colorModeForRenderPass(),cr.disabled,xb(w,a,0,1),null,W,a.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,a.paint,L.zoom),V.destroy(),a.heatmapFbos.delete(B)}function qm(w,a,h){var g,_;let E=w.gl,M=E.createTexture();E.bindTexture(E.TEXTURE_2D,M),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR);let L=(g=w.HALF_FLOAT)!==null&&g!==void 0?g:E.UNSIGNED_BYTE,k=(_=w.RGBA16F)!==null&&_!==void 0?_:E.RGBA;E.texImage2D(E.TEXTURE_2D,0,k,a,h,0,E.RGBA,L,null);let B=w.createFramebuffer(a,h,!1,!1);return B.colorAttachment.set(M),B}function Fm(w,a){return a.colorRampTexture||(a.colorRampTexture=new o.T(w,a.colorRamp,w.gl.RGBA)),a.colorRampTexture}function jm(w,a,h,g,_){if(!h||!g||!g.imageAtlas)return;let E=g.imageAtlas.patternPositions,M=E[h.to.toString()],L=E[h.from.toString()];if(!M&&L&&(M=L),!L&&M&&(L=M),!M||!L){let k=_.getPaintProperty(a);M=E[k],L=E[k]}M&&L&&w.setConstantPatternPositions(M,L)}function Kv(w,a,h,g,_,E,M,L){let k=w.context.gl,B="fill-pattern",V=h.paint.get(B),W=V&&V.constantOr(1),H=h.getCrossfadeParameters(),K,ee,ce,ue,fe,ve=w.transform,Se=h.paint.get("fill-translate"),we=h.paint.get("fill-translate-anchor");M?(ee=W&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=k.LINES):(ee=W?"fillPattern":"fill",K=k.TRIANGLES);let Ie=V.constantOr(null);for(let Pe of g){let Ee=a.getTile(Pe);if(W&&!Ee.patternsLoaded())continue;let je=Ee.getBucket(h);if(!je)continue;let Qe=je.programConfigurations.get(h.id),Ve=w.useProgram(ee,Qe),Ge=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Pe);W&&(w.context.activeTexture.set(k.TEXTURE0),Ee.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Qe.updatePaintBuffers(H)),jm(Qe,B,Ie,Ee,h);let Xe=ve.getProjectionData({overscaledTileID:Pe,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),vt=o.aD(ve,Ee,Se,we);if(M){ue=je.indexBuffer2,fe=je.segments2;let st=[k.drawingBufferWidth,k.drawingBufferHeight];ce=ee==="fillOutlinePattern"&&W?Cm(w,H,Ee,st,vt):Mm(st,vt)}else ue=je.indexBuffer,fe=je.segments,ce=W?jv(w,H,Ee,vt):{u_fill_translate:vt};let bt=w.stencilModeForClipping(Pe);Ve.draw(w.context,K,_,bt,E,cr.backCCW,ce,Ge,Xe,h.id,je.layoutVertexBuffer,ue,fe,h.paint,w.transform.zoom,Qe)}}function Nb(w,a,h,g,_,E,M,L){let k=w.context,B=k.gl,V="fill-extrusion-pattern",W=h.paint.get(V),H=W.constantOr(1),K=h.getCrossfadeParameters(),ee=h.paint.get("fill-extrusion-opacity"),ce=W.constantOr(null),ue=w.transform;for(let fe of g){let ve=a.getTile(fe),Se=ve.getBucket(h);if(!Se)continue;let we=w.style.map.terrain&&w.style.map.terrain.getTerrainData(fe),Ie=Se.programConfigurations.get(h.id),Pe=w.useProgram(H?"fillExtrusionPattern":"fillExtrusion",Ie);H&&(w.context.activeTexture.set(B.TEXTURE0),ve.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ie.updatePaintBuffers(K));let Ee=ue.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!L,applyTerrainMatrix:!0});jm(Ie,V,ce,ve,h);let je=o.aD(ue,ve,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Qe=h.paint.get("fill-extrusion-vertical-gradient"),Ve=H?Fq(w,Qe,ee,je,fe,K,ve):ul(w,Qe,ee,je);Pe.draw(k,k.gl.TRIANGLES,_,E,M,cr.backCCW,Ve,we,Ee,h.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,h.paint,w.transform.zoom,Ie,w.style.map.terrain&&Se.centroidVertexBuffer)}}function Yf(w,a,h,g,_,E,M,L,k){var B;let V=w.style.projection,W=w.context,H=w.transform,K=W.gl,ee=[`#define NUM_ILLUMINATION_SOURCES ${h.paint.get("hillshade-highlight-color").values.length}`],ce=w.useProgram("hillshade",null,!1,ee),ue=!w.options.moving;for(let fe of g){let ve=a.getTile(fe),Se=ve.fbo;if(!Se)continue;let we=V.getMeshFromTileID(W,fe.canonical,L,!0,"raster"),Ie=(B=w.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(fe);W.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Se.colorAttachment.get());let Pe=H.getProjectionData({overscaledTileID:fe,aligned:ue,applyGlobeMatrix:!k,applyTerrainMatrix:!0});ce.draw(W,K.TRIANGLES,E,_[fe.overscaledZ],M,cr.backCCW,Uq(w,ve,h),Ie,Pe,h.id,we.vertexBuffer,we.indexBuffer,we.segments)}}function kb(w,a,h,g,_,E,M,L,k){var B;let V=w.style.projection,W=w.context,H=w.transform,K=W.gl,ee=w.useProgram("colorRelief"),ce=!w.options.moving,ue=!0,fe=0;for(let ve of g){let Se=a.getTile(ve),we=Se.dem;if(ue){let Ve=K.getParameter(K.MAX_TEXTURE_SIZE),{elevationTexture:Ge,colorTexture:Xe}=h.getColorRampTextures(W,Ve,we.getUnpackVector());W.activeTexture.set(K.TEXTURE1),Ge.bind(K.NEAREST,K.CLAMP_TO_EDGE),W.activeTexture.set(K.TEXTURE4),Xe.bind(K.LINEAR,K.CLAMP_TO_EDGE),ue=!1,fe=Ge.size[0]}if(!we||!we.data)continue;let Ie=we.stride,Pe=we.getPixels();if(W.activeTexture.set(K.TEXTURE0),W.pixelStoreUnpackPremultiplyAlpha.set(!1),Se.demTexture=Se.demTexture||w.getTileTexture(Ie),Se.demTexture){let Ve=Se.demTexture;Ve.update(Pe,{premultiply:!1}),Ve.bind(K.LINEAR,K.CLAMP_TO_EDGE)}else Se.demTexture=new o.T(W,Pe,K.RGBA,{premultiply:!1}),Se.demTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);let Ee=V.getMeshFromTileID(W,ve.canonical,L,!0,"raster"),je=(B=w.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(ve),Qe=H.getProjectionData({overscaledTileID:ve,aligned:ce,applyGlobeMatrix:!k,applyTerrainMatrix:!0});ee.draw(W,K.TRIANGLES,E,_[ve.overscaledZ],M,cr.backCCW,dA(h,Se.dem,fe),je,Qe,h.id,Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}}let Xv=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function Kf(w,a,h,g,_,E,M,L,k=!1,B=!1){let V=g[g.length-1].overscaledZ,W=w.context,H=W.gl,K=w.useProgram("raster"),ee=w.transform,ce=w.style.projection,ue=w.colorModeForRenderPass(),fe=!w.options.moving;for(let ve of g){let Se=w.getDepthModeForSublayer(ve.overscaledZ-V,h.paint.get("raster-opacity")===1?Ar.ReadWrite:Ar.ReadOnly,H.LESS),we=a.getTile(ve);we.registerFadeDuration(h.paint.get("raster-fade-duration"));let Ie=a.findLoadedParent(ve,0),Pe=a.findLoadedSibling(ve),Ee=qb(we,Ie||Pe||null,a,h,w.transform,w.style.map.terrain),je,Qe,Ve=h.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;W.activeTexture.set(H.TEXTURE0),we.texture.bind(Ve,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(H.TEXTURE1),Ie?(Ie.texture.bind(Ve,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),je=Math.pow(2,Ie.tileID.overscaledZ-we.tileID.overscaledZ),Qe=[we.tileID.canonical.x*je%1,we.tileID.canonical.y*je%1]):we.texture.bind(Ve,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),we.texture.useMipmap&&W.extTextureFilterAnisotropic&&w.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);let Ge=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve),Xe=ee.getProjectionData({overscaledTileID:ve,aligned:fe,applyGlobeMatrix:!B,applyTerrainMatrix:!0}),vt=Pm(Qe||[0,0],je||1,Ee,h,L),bt=ce.getMeshFromTileID(W,ve.canonical,E,M,"raster");K.draw(W,H.TRIANGLES,Se,_?_[ve.overscaledZ]:nn.disabled,ue,k?cr.frontCCW:cr.backCCW,vt,Ge,Xe,h.id,bt.vertexBuffer,bt.indexBuffer,bt.segments)}}function qb(w,a,h,g,_,E){let M=g.paint.get("raster-fade-duration");if(!E&&M>0){let L=x.now(),k=(L-w.timeAdded)/M,B=a?(L-a.timeAdded)/M:-1,V=h.getSource(),W=tt(_,{tileSize:V.tileSize,roundZoom:V.roundZoom}),H=!a||Math.abs(a.tileID.overscaledZ-W)>Math.abs(w.tileID.overscaledZ-W),K=H&&w.refreshedUponExpiration?1:o.ah(H?k:1-B,0,1);return w.refreshedUponExpiration&&k>=1&&(w.refreshedUponExpiration=!1),a?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}let OA=new o.bf(1,0,0,1),LA=new o.bf(0,1,0,1),Qv=new o.bf(0,0,1,1),Fb=new o.bf(1,0,1,1),Qq=new o.bf(0,1,1,1);function jb(w,a,h,g){Vl(w,0,a+h/2,w.transform.width,h,g)}function xi(w,a,h,g){Vl(w,a-h/2,0,h,w.transform.height,g)}function Vl(w,a,h,g,_,E){let M=w.context,L=M.gl;L.enable(L.SCISSOR_TEST),L.scissor(a*w.pixelRatio,h*w.pixelRatio,g*w.pixelRatio,_*w.pixelRatio),M.clear({color:E}),L.disable(L.SCISSOR_TEST)}function As(w,a,h){let g=w.context,_=g.gl,E=w.useProgram("debug"),M=Ar.disabled,L=nn.disabled,k=w.colorModeForRenderPass(),B="$debug",V=w.style.map.terrain&&w.style.map.terrain.getTerrainData(h);g.activeTexture.set(_.TEXTURE0);let W=a.getTileByID(h.key).latestRawTileData,H=Math.floor((W&&W.byteLength||0)/1024),K=a.getTile(h).tileSize,ee=512/Math.min(K,512)*(h.overscaledZ/w.transform.zoom)*.5,ce=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(ce+=` => ${h.overscaledZ}`),function(fe,ve){fe.initDebugOverlayCanvas();let Se=fe.debugOverlayCanvas,we=fe.context.gl,Ie=fe.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,Se.width,Se.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(ve,5,5),Ie.strokeText(ve,5,5),fe.debugOverlayTexture.update(Se),fe.debugOverlayTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE)}(w,`${ce} ${H}kB`);let ue=w.transform.getProjectionData({overscaledTileID:h,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(g,_.TRIANGLES,M,L,Jn.alphaBlended,cr.disabled,Gf(o.bf.transparent,ee),null,ue,B,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),E.draw(g,_.LINE_STRIP,M,L,k,cr.disabled,Gf(o.bf.red),V,ue,B,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Jv(w,a,h,g){let{isRenderingGlobe:_}=g,E=w.context,M=E.gl,L=w.transform,k=w.colorModeForRenderPass(),B=w.getDepthModeFor3D(),V=w.useProgram("terrain");E.bindFramebuffer.set(null),E.viewport.set([0,0,w.width,w.height]);for(let W of h){let H=a.getTerrainMesh(W.tileID),K=w.renderToTexture.getTexture(W),ee=a.getTerrainData(W.tileID);E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,K.texture);let ce=a.getMeshFrameDelta(L.zoom),ue=L.calculateFogMatrix(W.tileID.toUnwrapped()),fe=qv(ce,ue,w.style.sky,L.pitch,_),ve=L.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(E,M.TRIANGLES,B,nn.disabled,k,cr.backCCW,fe,ee,ve,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}function zm(w,a){if(!a.mesh){let h=new o.aL;h.emplaceBack(-1,-1),h.emplaceBack(1,-1),h.emplaceBack(1,1),h.emplaceBack(-1,1);let g=new o.aN;g.emplaceBack(0,1,2),g.emplaceBack(0,2,3),a.mesh=new Ff(w.createVertexBuffer(h,Oc.members),w.createIndexBuffer(g),o.aM.simpleSegment(0,0,h.length,g.length))}return a.mesh}class DA{constructor(a,h){this.context=new MA(a),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=It.maxUnderzooming+It.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new cp}resize(a,h,g){if(this.width=Math.floor(a*g),this.height=Math.floor(h*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let _ of this.style._order)this.style._layers[_].resize()}setup(){let a=this.context,h=new o.aL;h.emplaceBack(0,0),h.emplaceBack(o.$,0),h.emplaceBack(0,o.$),h.emplaceBack(o.$,o.$),this.tileExtentBuffer=a.createVertexBuffer(h,Oc.members),this.tileExtentSegments=o.aM.simpleSegment(0,0,4,2);let g=new o.aL;g.emplaceBack(0,0),g.emplaceBack(o.$,0),g.emplaceBack(0,o.$),g.emplaceBack(o.$,o.$),this.debugBuffer=a.createVertexBuffer(g,Oc.members),this.debugSegments=o.aM.simpleSegment(0,0,4,5);let _=new o.c6;_.emplaceBack(0,0,0,0),_.emplaceBack(o.$,0,o.$,0),_.emplaceBack(0,o.$,0,o.$),_.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=a.createVertexBuffer(_,kq.members),this.rasterBoundsSegments=o.aM.simpleSegment(0,0,4,2);let E=new o.aL;E.emplaceBack(0,0),E.emplaceBack(o.$,0),E.emplaceBack(0,o.$),E.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(E,Oc.members),this.rasterBoundsSegmentsPosOnly=o.aM.simpleSegment(0,0,4,5);let M=new o.aL;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(M,Oc.members),this.viewportSegments=o.aM.simpleSegment(0,0,4,2);let L=new o.c7;L.emplaceBack(0),L.emplaceBack(1),L.emplaceBack(3),L.emplaceBack(2),L.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(L);let k=new o.aN;k.emplaceBack(1,0,2),k.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(k);let B=this.context.gl;this.stencilClearMode=new nn({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.tileExtentMesh=new Ff(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let a=this.context,h=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let g=o.L();o.bY(g,0,this.width,this.height,0,0,1),o.N(g,g,[h.drawingBufferWidth,h.drawingBufferHeight,0]);let _={mainMatrix:g,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:g};this.useProgram("clippingMask",null,!0).draw(a,h.TRIANGLES,Ar.disabled,this.stencilClearMode,Jn.disabled,cr.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,h,g){if(this.currentStencilSource===a.source||!a.isTileClipped()||!h||!h.length)return;this.currentStencilSource=a.source,this.nextStencilID+h.length>256&&this.clearStencil();let _=this.context;_.setColorMode(Jn.disabled),_.setDepthMode(Ar.disabled);let E={};for(let M of h)E[M.key]=this.nextStencilID++;this._renderTileMasks(E,h,g,!0),this._renderTileMasks(E,h,g,!1),this._tileClippingMaskIDs=E}_renderTileMasks(a,h,g,_){let E=this.context,M=E.gl,L=this.style.projection,k=this.transform,B=this.useProgram("clippingMask");for(let V of h){let W=a[V.key],H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),K=L.getMeshFromTileID(this.context,V.canonical,_,!0,"stencil"),ee=k.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!g,applyTerrainMatrix:!0});B.draw(E,M.TRIANGLES,Ar.disabled,new nn({func:M.ALWAYS,mask:0},W,255,M.KEEP,M.KEEP,M.REPLACE),Jn.disabled,g?cr.disabled:cr.backCCW,null,H,ee,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){let a=this.context,h=a.gl,g=this.style.projection,_=this.transform,E=this.useProgram("depth"),M=this.getDepthModeFor3D(),L=xe(_,{tileSize:_.tileSize});for(let k of L){let B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k),V=g.getMeshFromTileID(this.context,k.canonical,!0,!0,"raster"),W=_.getProjectionData({overscaledTileID:k,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(a,h.TRIANGLES,M,nn.disabled,Jn.disabled,cr.backCCW,null,B,W,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let a=this.nextStencilID++,h=this.context.gl;return new nn({func:h.NOTEQUAL,mask:255},a,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(a){let h=this.context.gl;return new nn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,h.KEEP,h.KEEP,h.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){let h=this.context.gl,g=a.sort((M,L)=>L.overscaledZ-M.overscaledZ),_=g[g.length-1].overscaledZ,E=g[0].overscaledZ-_+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();let M={};for(let L=0;L<E;L++)M[L+_]=new nn({func:h.GEQUAL,mask:255},L+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=E,[M,g]}return[{[_]:nn.disabled},g]}stencilConfigForOverlapTwoPass(a){let h=this.context.gl,g=a.sort((M,L)=>L.overscaledZ-M.overscaledZ),_=g[g.length-1].overscaledZ,E=g[0].overscaledZ-_+1;if(this.clearStencil(),E>1){let M={},L={};for(let k=0;k<E;k++)M[k+_]=new nn({func:h.GREATER,mask:255},E+1+k,255,h.KEEP,h.KEEP,h.REPLACE),L[k+_]=new nn({func:h.GREATER,mask:255},1+k,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID=2*E+1,[M,L,g]}return this.nextStencilID=3,[{[_]:new nn({func:h.GREATER,mask:255},2,255,h.KEEP,h.KEEP,h.REPLACE)},{[_]:new nn({func:h.GREATER,mask:255},1,255,h.KEEP,h.KEEP,h.REPLACE)},g]}colorModeForRenderPass(){let a=this.context.gl;return this._showOverdrawInspector?new Jn([a.CONSTANT_COLOR,a.ONE],new o.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jn.unblended:Jn.alphaBlended}getDepthModeForSublayer(a,h,g){if(!this.opaquePassEnabledForLayer())return Ar.disabled;let _=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Ar(g||this.context.gl.LEQUAL,h,[_,_])}getDepthModeFor3D(){return new Ar(this.context.gl.LEQUAL,Ar.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,h){var g,_;this.style=a,this.options=h,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(x.now()),this.imageManager.beginFrame();let E=this.style._order,M=this.style.sourceCaches,L={},k={},B={},V={isRenderingToTexture:!1,isRenderingGlobe:((g=a.projection)===null||g===void 0?void 0:g.transitionState)>0};for(let H in M){let K=M[H];K.used&&K.prepare(this.context),L[H]=K.getVisibleCoordinates(!1),k[H]=L[H].slice().reverse(),B[H]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<E.length;H++)if(this.style._layers[E[H]].is3D()){this.opaquePassCutoff=H;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let H of E){let K=this.style._layers[H];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;let ee=k[K.source];(K.type==="custom"||ee.length)&&this.renderLayer(this,M[K.source],K,ee,V)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:H=>this.useProgram(H)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?o.bf.black:o.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(H,K){let ee=H.context,ce=ee.gl,ue=((Pe,Ee,je)=>{let Qe=Math.cos(Ee.rollInRadians),Ve=Math.sin(Ee.rollInRadians),Ge=Ae(Ee),Xe=Ee.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Pe.properties.get("sky-color"),u_horizon_color:Pe.properties.get("horizon-color"),u_horizon:[(Ee.width/2-Ge*Ve)*je,(Ee.height/2+Ge*Qe)*je],u_horizon_normal:[-Ve,Qe],u_sky_horizon_blend:Pe.properties.get("sky-horizon-blend")*Ee.height/2*je,u_sky_blend:Xe}})(K,H.style.map.transform,H.pixelRatio),fe=new Ar(ce.LEQUAL,Ar.ReadWrite,[0,1]),ve=nn.disabled,Se=H.colorModeForRenderPass(),we=H.useProgram("sky"),Ie=zm(ee,K);we.draw(ee,ce.TRIANGLES,fe,ve,Se,cr.disabled,ue,null,void 0,"sky",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){let H=this.style._layers[E[this.currentLayer]],K=M[H.source],ee=L[H.source];this._renderTileClippingMasks(H,ee,!1),this.renderLayer(this,K,H,ee,V)}this.renderPass="translucent";let W=!1;for(this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){let H=this.style._layers[E[this.currentLayer]],K=M[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H,V))continue;this.opaquePassEnabledForLayer()||W||(W=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let ee=(H.type==="symbol"?B:k)[H.source];this._renderTileClippingMasks(H,L[H.source],!!this.renderToTexture),this.renderLayer(this,K,H,ee,V)}if(V.isRenderingGlobe&&function(H,K,ee){let ce=H.context,ue=ce.gl,fe=H.useProgram("atmosphere"),ve=new Ar(ue.LEQUAL,Ar.ReadOnly,[0,1]),Se=H.transform,we=function(Xe,vt){let bt=Xe.properties.get("position"),st=[-bt.x,-bt.y,-bt.z],Zt=o.ag(new Float64Array(16));return Xe.properties.get("anchor")==="map"&&(o.b6(Zt,Zt,vt.rollInRadians),o.b7(Zt,Zt,-vt.pitchInRadians),o.b6(Zt,Zt,vt.bearingInRadians),o.b7(Zt,Zt,vt.center.lat*Math.PI/180),o.bz(Zt,Zt,-vt.center.lng*Math.PI/180)),o.c5(st,st,Zt),st}(ee,H.transform),Ie=Se.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Pe=K.properties.get("atmosphere-blend")*Ie.projectionTransition;if(Pe===0)return;let Ee=hp(Se.worldSize,Se.center.lat),je=Se.inverseProjectionMatrix,Qe=new Float64Array(4);Qe[3]=1,o.aw(Qe,Qe,Se.modelViewProjectionMatrix),Qe[0]/=Qe[3],Qe[1]/=Qe[3],Qe[2]/=Qe[3],Qe[3]=1,o.aw(Qe,Qe,je),Qe[0]/=Qe[3],Qe[1]/=Qe[3],Qe[2]/=Qe[3],Qe[3]=1;let Ve=((Xe,vt,bt,st,Zt)=>({u_sun_pos:Xe,u_atmosphere_blend:vt,u_globe_position:bt,u_globe_radius:st,u_inv_proj_matrix:Zt}))(we,Pe,[Qe[0],Qe[1],Qe[2]],Ee,je),Ge=zm(ce,K);fe.draw(ce,ue.TRIANGLES,ve,nn.disabled,Jn.alphaBlended,cr.disabled,Ve,null,null,"atmosphere",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let H=function(K,ee){let ce=null,ue=Object.values(K._layers).flatMap(we=>we.source&&!we.isHidden(ee)?[K.sourceCaches[we.source]]:[]),fe=ue.filter(we=>we.getSource().type==="vector"),ve=ue.filter(we=>we.getSource().type!=="vector"),Se=we=>{(!ce||ce.getSource().maxzoom<we.getSource().maxzoom)&&(ce=we)};return fe.forEach(we=>Se(we)),ce||ve.forEach(we=>Se(we)),ce}(this.style,this.transform.zoom);H&&function(K,ee,ce){for(let ue=0;ue<ce.length;ue++)As(K,ee,ce[ue])}(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){let K=H.transform.padding;jb(H,H.transform.height-(K.top||0),3,OA),jb(H,K.bottom||0,3,LA),xi(H,K.left||0,3,Qv),xi(H,H.transform.width-(K.right||0),3,Fb);let ee=H.transform.centerPoint;(function(ce,ue,fe,ve){Vl(ce,ue-1,fe-10,2,20,ve),Vl(ce,ue-10,fe-1,20,2,ve)})(H,ee.x,H.transform.height-ee.y,Qq)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;let h=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix,_=this.terrainFacilitator.dirty;_||(_=a?!o.c8(h,g):!o.c9(h,g)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(o.ca(h,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(E,M){let L=E.context,k=L.gl,B=E.transform,V=Jn.unblended,W=new Ar(k.LEQUAL,Ar.ReadWrite,[0,1]),H=M.sourceCache.getRenderableTiles(),K=E.useProgram("terrainDepth");L.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),L.clear({color:o.bf.transparent,depth:1});for(let ee of H){let ce=M.getTerrainMesh(ee.tileID),ue=M.getTerrainData(ee.tileID),fe=B.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ve={u_ele_delta:M.getMeshFrameDelta(B.zoom)};K.draw(L,k.TRIANGLES,W,nn.disabled,V,cr.backCCW,ve,ue,fe,"terrain",ce.vertexBuffer,ce.indexBuffer,ce.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,E.width,E.height])}(this,this.style.map.terrain),function(E,M){let L=E.context,k=L.gl,B=E.transform,V=Jn.unblended,W=new Ar(k.LEQUAL,Ar.ReadWrite,[0,1]),H=M.getCoordsTexture(),K=M.sourceCache.getRenderableTiles(),ee=E.useProgram("terrainCoords");L.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),L.clear({color:o.bf.transparent,depth:1}),M.coordsIndex=[];for(let ce of K){let ue=M.getTerrainMesh(ce.tileID),fe=M.getTerrainData(ce.tileID);L.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,H.texture);let ve={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(B.zoom)},Se=B.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ee.draw(L,k.TRIANGLES,W,nn.disabled,V,cr.backCCW,ve,fe,Se,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments),M.coordsIndex.push(ce.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,E.width,E.height])}(this,this.style.map.terrain))}renderLayer(a,h,g,_,E){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||(_||[]).length)&&(this.id=g.id,o.cb(g)?function(M,L,k,B,V,W){if(M.renderPass!=="translucent")return;let{isRenderingToTexture:H}=W,K=nn.disabled,ee=M.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ce,ue,fe,ve,Se,we,Ie,Pe,Ee){let je=ue.transform,Qe=ue.style.map.terrain,Ve=Se==="map",Ge=we==="map";for(let Xe of ce){let vt=ve.getTile(Xe),bt=vt.getBucket(fe);if(!bt||!bt.text||!bt.text.segments.get().length)continue;let st=o.an(bt.textSizeData,je.zoom),Zt=o.aC(vt,1,ue.transform.zoom),Nr=Pr(Ve,ue.transform,Zt),hn=fe.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(st){let qn=Math.pow(2,je.zoom-vt.tileID.overscaledZ),Cn=Qe?(li,bi)=>Qe.getElevation(Xe,li,bi):null;Lb(bt,Ve,Ge,Ee,je,Nr,qn,st,hn,o.aD(je,vt,Ie,Pe),Xe.toUnwrapped(),Cn)}}}(B,M,k,L,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),V),k.paint.get("icon-opacity").constantOr(1)!==0&&Nm(M,L,k,B,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),K,ee,H),k.paint.get("text-opacity").constantOr(1)!==0&&Nm(M,L,k,B,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),K,ee,H),L.map.showCollisionBoxes&&(CA(M,L,k,B,!0),CA(M,L,k,B,!1))}(a,h,g,_,this.style.placement.variableOffsets,E):o.cc(g)?function(M,L,k,B,V){if(M.renderPass!=="translucent")return;let{isRenderingToTexture:W}=V,H=k.paint.get("circle-opacity"),K=k.paint.get("circle-stroke-width"),ee=k.paint.get("circle-stroke-opacity"),ce=!k.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(K.constantOr(1)===0||ee.constantOr(1)===0))return;let ue=M.context,fe=ue.gl,ve=M.transform,Se=M.getDepthModeForSublayer(0,Ar.ReadOnly),we=nn.disabled,Ie=M.colorModeForRenderPass(),Pe=[],Ee=ve.getCircleRadiusCorrection();for(let je=0;je<B.length;je++){let Qe=B[je],Ve=L.getTile(Qe),Ge=Ve.getBucket(k);if(!Ge)continue;let Xe=k.paint.get("circle-translate"),vt=k.paint.get("circle-translate-anchor"),bt=o.aD(ve,Ve,Xe,vt),st=Ge.programConfigurations.get(k.id),Zt=M.useProgram("circle",st),Nr=Ge.layoutVertexBuffer,hn=Ge.indexBuffer,qn=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Qe),Cn={programConfiguration:st,program:Zt,layoutVertexBuffer:Nr,indexBuffer:hn,uniformValues:jq(M,Ve,k,bt,Ee),terrainData:qn,projectionData:ve.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!W,applyTerrainMatrix:!0})};if(ce){let li=Ge.segments.get();for(let bi of li)Pe.push({segments:new o.aM([bi]),sortKey:bi.sortKey,state:Cn})}else Pe.push({segments:Ge.segments,sortKey:0,state:Cn})}ce&&Pe.sort((je,Qe)=>je.sortKey-Qe.sortKey);for(let je of Pe){let{programConfiguration:Qe,program:Ve,layoutVertexBuffer:Ge,indexBuffer:Xe,uniformValues:vt,terrainData:bt,projectionData:st}=je.state;Ve.draw(ue,fe.TRIANGLES,Se,we,Ie,cr.backCCW,vt,bt,st,k.id,Ge,Xe,je.segments,k.paint,M.transform.zoom,Qe)}}(a,h,g,_,E):o.cd(g)?function(M,L,k,B,V){if(k.paint.get("heatmap-opacity")===0)return;let W=M.context,{isRenderingToTexture:H,isRenderingGlobe:K}=V;if(M.style.map.terrain){for(let ee of B){let ce=L.getTile(ee);L.hasRenderableParent(ee)||(M.renderPass==="offscreen"?Db(M,ce,k,ee,K):M.renderPass==="translucent"&&RA(M,k,ee,H,K))}W.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?function(ee,ce,ue,fe){let ve=ee.context,Se=ve.gl,we=ee.transform,Ie=nn.disabled,Pe=new Jn([Se.ONE,Se.ONE],o.bf.transparent,[!0,!0,!0,!0]);(function(Ee,je,Qe){let Ve=Ee.gl;Ee.activeTexture.set(Ve.TEXTURE1),Ee.viewport.set([0,0,je.width/4,je.height/4]);let Ge=Qe.heatmapFbos.get(o.c2);Ge?(Ve.bindTexture(Ve.TEXTURE_2D,Ge.colorAttachment.get()),Ee.bindFramebuffer.set(Ge.framebuffer)):(Ge=qm(Ee,je.width/4,je.height/4),Qe.heatmapFbos.set(o.c2,Ge))})(ve,ee,ue),ve.clear({color:o.bf.transparent});for(let Ee=0;Ee<fe.length;Ee++){let je=fe[Ee];if(ce.hasRenderableParent(je))continue;let Qe=ce.getTile(je),Ve=Qe.getBucket(ue);if(!Ve)continue;let Ge=Ve.programConfigurations.get(ue.id),Xe=ee.useProgram("heatmap",Ge),vt=we.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),bt=we.getCircleRadiusCorrection();Xe.draw(ve,Se.TRIANGLES,Ar.disabled,Ie,Pe,cr.backCCW,hA(Qe,we.zoom,ue.paint.get("heatmap-intensity"),bt),null,vt,ue.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,ue.paint,we.zoom,Ge)}ve.viewport.set([0,0,ee.width,ee.height])}(M,L,k,B):M.renderPass==="translucent"&&function(ee,ce){let ue=ee.context,fe=ue.gl;ue.setColorMode(ee.colorModeForRenderPass());let ve=ce.heatmapFbos.get(o.c2);ve&&(ue.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,ve.colorAttachment.get()),ue.activeTexture.set(fe.TEXTURE1),Fm(ue,ce).bind(fe.LINEAR,fe.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(ue,fe.TRIANGLES,Ar.disabled,nn.disabled,ee.colorModeForRenderPass(),cr.disabled,xb(ee,ce,0,1),null,null,ce.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,ce.paint,ee.transform.zoom))}(M,k)}(a,h,g,_,E):o.ce(g)?function(M,L,k,B,V){if(M.renderPass!=="translucent")return;let{isRenderingToTexture:W}=V,H=k.paint.get("line-opacity"),K=k.paint.get("line-width");if(H.constantOr(1)===0||K.constantOr(1)===0)return;let ee=M.getDepthModeForSublayer(0,Ar.ReadOnly),ce=M.colorModeForRenderPass(),ue=k.paint.get("line-dasharray"),fe=k.paint.get("line-pattern"),ve=fe.constantOr(1),Se=k.paint.get("line-gradient"),we=k.getCrossfadeParameters(),Ie=ve?"linePattern":ue?"lineSDF":Se?"lineGradient":"line",Pe=M.context,Ee=Pe.gl,je=M.transform,Qe=!0;for(let Ve of B){let Ge=L.getTile(Ve);if(ve&&!Ge.patternsLoaded())continue;let Xe=Ge.getBucket(k);if(!Xe)continue;let vt=Xe.programConfigurations.get(k.id),bt=M.context.program.get(),st=M.useProgram(Ie,vt),Zt=Qe||st.program!==bt,Nr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Ve),hn=fe.constantOr(null);if(hn&&Ge.imageAtlas){let Or=Ge.imageAtlas,Fn=Or.patternPositions[hn.to.toString()],$i=Or.patternPositions[hn.from.toString()];Fn&&$i&&vt.setConstantPatternPositions(Fn,$i)}let qn=je.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),Cn=je.getPixelScale(),li=ve?gA(M,Ge,k,Cn,we):ue?$f(M,Ge,k,Cn,ue,we):Se?mA(M,Ge,k,Cn,Xe.lineClipsArray.length):Uv(M,Ge,k,Cn);if(ve)Pe.activeTexture.set(Ee.TEXTURE0),Ge.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),vt.updatePaintBuffers(we);else if(ue&&(Zt||M.lineAtlas.dirty))Pe.activeTexture.set(Ee.TEXTURE0),M.lineAtlas.bind(Pe);else if(Se){let Or=Xe.gradients[k.id],Fn=Or.texture;if(k.gradientVersion!==Or.version){let $i=256;if(k.stepInterpolant){let to=L.getSource().maxzoom,ho=Ve.canonical.z===to?Math.ceil(1<<M.transform.maxZoom-Ve.canonical.z):1;$i=o.ah(o.c3(Xe.maxLineLength/o.$*1024*ho),256,Pe.maxTextureSize)}Or.gradient=o.c4({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:$i,image:Or.gradient||void 0,clips:Xe.lineClipsArray}),Or.texture?Or.texture.update(Or.gradient):Or.texture=new o.T(Pe,Or.gradient,Ee.RGBA),Or.version=k.gradientVersion,Fn=Or.texture}Pe.activeTexture.set(Ee.TEXTURE0),Fn.bind(k.stepInterpolant?Ee.NEAREST:Ee.LINEAR,Ee.CLAMP_TO_EDGE)}let bi=M.stencilModeForClipping(Ve);st.draw(Pe,Ee.TRIANGLES,ee,bi,ce,cr.disabled,li,Nr,qn,k.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,k.paint,M.transform.zoom,vt,Xe.layoutVertexBuffer2),Qe=!1}}(a,h,g,_,E):o.cf(g)?function(M,L,k,B,V){let W=k.paint.get("fill-color"),H=k.paint.get("fill-opacity");if(H.constantOr(1)===0)return;let{isRenderingToTexture:K}=V,ee=M.colorModeForRenderPass(),ce=k.paint.get("fill-pattern"),ue=M.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&W.constantOr(o.bf.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===ue){let fe=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?Ar.ReadWrite:Ar.ReadOnly);Kv(M,L,k,B,fe,ee,!1,K)}if(M.renderPass==="translucent"&&k.paint.get("fill-antialias")){let fe=M.getDepthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,Ar.ReadOnly);Kv(M,L,k,B,fe,ee,!0,K)}}(a,h,g,_,E):o.cg(g)?function(M,L,k,B,V){let W=k.paint.get("fill-extrusion-opacity");if(W===0)return;let{isRenderingToTexture:H}=V;if(M.renderPass==="translucent"){let K=new Ar(M.context.gl.LEQUAL,Ar.ReadWrite,M.depthRangeFor3D);if(W!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Nb(M,L,k,B,K,nn.disabled,Jn.disabled,H),Nb(M,L,k,B,K,M.stencilModeFor3D(),M.colorModeForRenderPass(),H);else{let ee=M.colorModeForRenderPass();Nb(M,L,k,B,K,nn.disabled,ee,H)}}}(a,h,g,_,E):o.ch(g)?function(M,L,k,B,V){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;let{isRenderingToTexture:W}=V,H=M.context,K=M.style.projection.useSubdivision,ee=M.getDepthModeForSublayer(0,Ar.ReadOnly),ce=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(ue,fe,ve,Se,we,Ie,Pe){let Ee=ue.context,je=Ee.gl;for(let Qe of ve){let Ve=fe.getTile(Qe),Ge=Ve.dem;if(!Ge||!Ge.data||!Ve.needsHillshadePrepare)continue;let Xe=Ge.dim,vt=Ge.stride,bt=Ge.getPixels();if(Ee.activeTexture.set(je.TEXTURE1),Ee.pixelStoreUnpackPremultiplyAlpha.set(!1),Ve.demTexture=Ve.demTexture||ue.getTileTexture(vt),Ve.demTexture){let Zt=Ve.demTexture;Zt.update(bt,{premultiply:!1}),Zt.bind(je.NEAREST,je.CLAMP_TO_EDGE)}else Ve.demTexture=new o.T(Ee,bt,je.RGBA,{premultiply:!1}),Ve.demTexture.bind(je.NEAREST,je.CLAMP_TO_EDGE);Ee.activeTexture.set(je.TEXTURE0);let st=Ve.fbo;if(!st){let Zt=new o.T(Ee,{width:Xe,height:Xe,data:null},je.RGBA);Zt.bind(je.LINEAR,je.CLAMP_TO_EDGE),st=Ve.fbo=Ee.createFramebuffer(Xe,Xe,!0,!1),st.colorAttachment.set(Zt.texture)}Ee.bindFramebuffer.set(st.framebuffer),Ee.viewport.set([0,0,Xe,Xe]),ue.useProgram("hillshadePrepare").draw(Ee,je.TRIANGLES,we,Ie,Pe,cr.disabled,pA(Ve.tileID,Ge),null,null,Se.id,ue.rasterBoundsBuffer,ue.quadTriangleIndexBuffer,ue.rasterBoundsSegments),Ve.needsHillshadePrepare=!1}})(M,L,B,k,ee,nn.disabled,ce),H.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(K){let[ue,fe,ve]=M.stencilConfigForOverlapTwoPass(B);Yf(M,L,k,ve,ue,ee,ce,!1,W),Yf(M,L,k,ve,fe,ee,ce,!0,W)}else{let[ue,fe]=M.getStencilConfigForOverlapAndUpdateStencilID(B);Yf(M,L,k,fe,ue,ee,ce,!1,W)}}(a,h,g,_,E):o.ci(g)?function(M,L,k,B,V){if(M.renderPass!=="translucent"||!B.length)return;let{isRenderingToTexture:W}=V,H=M.style.projection.useSubdivision,K=M.getDepthModeForSublayer(0,Ar.ReadOnly),ee=M.colorModeForRenderPass();if(H){let[ce,ue,fe]=M.stencilConfigForOverlapTwoPass(B);kb(M,L,k,fe,ce,K,ee,!1,W),kb(M,L,k,fe,ue,K,ee,!0,W)}else{let[ce,ue]=M.getStencilConfigForOverlapAndUpdateStencilID(B);kb(M,L,k,ue,ce,K,ee,!1,W)}}(a,h,g,_,E):o.cj(g)?function(M,L,k,B,V){if(M.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!B.length)return;let{isRenderingToTexture:W}=V,H=L.getSource(),K=M.style.projection.useSubdivision;if(H instanceof Sr)Kf(M,L,k,B,null,!1,!1,H.tileCoords,H.flippedWindingOrder,W);else if(K){let[ee,ce,ue]=M.stencilConfigForOverlapTwoPass(B);Kf(M,L,k,ue,ee,!1,!0,Xv,!1,W),Kf(M,L,k,ue,ce,!0,!0,Xv,!1,W)}else{let[ee,ce]=M.getStencilConfigForOverlapAndUpdateStencilID(B);Kf(M,L,k,ce,ee,!1,!0,Xv,!1,W)}}(a,h,g,_,E):o.ck(g)?function(M,L,k,B,V){let W=k.paint.get("background-color"),H=k.paint.get("background-opacity");if(H===0)return;let{isRenderingToTexture:K}=V,ee=M.context,ce=ee.gl,ue=M.style.projection,fe=M.transform,ve=fe.tileSize,Se=k.paint.get("background-pattern");if(M.isPatternMissing(Se))return;let we=!Se&&W.a===1&&H===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==we)return;let Ie=nn.disabled,Pe=M.getDepthModeForSublayer(0,we==="opaque"?Ar.ReadWrite:Ar.ReadOnly),Ee=M.colorModeForRenderPass(),je=M.useProgram(Se?"backgroundPattern":"background"),Qe=B||xe(fe,{tileSize:ve,terrain:M.style.map.terrain});Se&&(ee.activeTexture.set(ce.TEXTURE0),M.imageManager.bind(M.context));let Ve=k.getCrossfadeParameters();for(let Ge of Qe){let Xe=fe.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),vt=Se?_A(H,M,Se,{tileID:Ge,tileSize:ve},Ve):yA(H,W),bt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Ge),st=ue.getMeshFromTileID(ee,Ge.canonical,!1,!0,"raster");je.draw(ee,ce.TRIANGLES,Pe,Ie,Ee,cr.backCCW,vt,bt,Xe,k.id,st.vertexBuffer,st.indexBuffer,st.segments)}}(a,0,g,_,E):o.cl(g)&&function(M,L,k,B){let{isRenderingGlobe:V}=B,W=M.context,H=k.implementation,K=M.style.projection,ee=M.transform,ce=ee.getProjectionDataForCustomLayer(V),ue={farZ:ee.farZ,nearZ:ee.nearZ,fov:ee.fov*Math.PI/180,modelViewProjectionMatrix:ee.modelViewProjectionMatrix,projectionMatrix:ee.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:ce},fe=H.renderingMode?H.renderingMode:"2d";if(M.renderPass==="offscreen"){let ve=H.prerender;ve&&(M.setCustomLayerDefaults(),W.setColorMode(M.colorModeForRenderPass()),ve.call(H,W.gl,ue),W.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),W.setColorMode(M.colorModeForRenderPass()),W.setStencilMode(nn.disabled);let ve=fe==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,Ar.ReadOnly);W.setDepthMode(ve),H.render(W.gl,ue),W.setDirty(),M.setBaseState(),W.bindFramebuffer.set(null)}}(a,0,g,E))}saveTileTexture(a){let h=this._tileTextures[a.size[0]];h?h.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){let h=this._tileTextures[a];return h&&h.length>0?h.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;let h=this.imageManager.getPattern(a.from.toString()),g=this.imageManager.getPattern(a.to.toString());return!h||!g}useProgram(a,h,g=!1,_=[]){this.cache=this.cache||{};let E=!!this.style.map.terrain,M=this.style.projection,L=g?sl.projectionMercator:M.shaderPreludeCode,k=g?qu:M.shaderDefine,B=a+(h?h.cacheKey:"")+`/${g?jf:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(E?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[B]||(this.cache[B]=new _b(this.context,sl[a],h,Tb[a],this._showOverdrawInspector,E,L,k,_)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:a,drawingBufferHeight:h}=this.context.gl;return this.width!==a||this.height!==h}}function Xf(w,a){let h,g=!1,_=null,E=null,M=()=>{_=null,g&&(w.apply(E,h),_=setTimeout(M,a),g=!1)};return(...L)=>(g=!0,E=this,h=L,_||M(),_)}class ey{constructor(a){this._getCurrentHash=()=>{let h=window.location.hash.replace("#","");if(this._hashName){let g;return h.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(g=_)}),(g&&g[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{let h=this._getCurrentHash();if(!this._isValidHash(h))return!1;let g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:g,pitch:+(h[4]||0)}),!0},this._updateHashUnthrottled=()=>{let h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{let h=this._getCurrentHash();if(h.length===0)return;let g=h.join("/"),_=g;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${g}`);let E=window.location.hash.replace(_,"");E.startsWith("#&")?E=E.slice(0,1)+E.slice(2):E==="#"&&(E="");let M=window.location.href.replace(/(#.+)?$/,E);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=Xf(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){let h=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,_=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,_),M=Math.round(h.lng*E)/E,L=Math.round(h.lat*E)/E,k=this._map.getBearing(),B=this._map.getPitch(),V="";if(V+=a?`/${M}/${L}/${g}`:`${g}/${L}/${M}`,(k||B)&&(V+="/"+Math.round(10*k)/10),B&&(V+=`/${Math.round(B)}`),this._hashName){let W=this._hashName,H=!1,K=window.location.hash.slice(1).split("&").map(ee=>{let ce=ee.split("=")[0];return ce===W?(H=!0,`${ce}=${V}`):ee}).filter(ee=>ee);return H||K.push(`${W}=${V}`),`#${K.join("&")}`}return`#${V}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.S(+a[2],+a[1])}catch(E){return!1}let h=+a[0],g=+(a[3]||0),_=+(a[4]||0);return h>=this._map.getMinZoom()&&h<=this._map.getMaxZoom()&&g>=-180&&g<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}let zu={linearity:.3,easing:o.cm(0,0,.3,1)},zb=o.e({deceleration:2500,maxSpeed:1400},zu),NA=o.e({deceleration:20,maxSpeed:1400},zu),kA=o.e({deceleration:1e3,maxSpeed:360},zu),qA=o.e({deceleration:1e3,maxSpeed:90},zu),FA=o.e({deceleration:1e3,maxSpeed:360},zu);class jA{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:x.now(),settings:a})}_drainInertiaBuffer(){let a=this._inertiaBuffer,h=x.now();for(;a.length>0&&h-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let h={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:E}of this._inertiaBuffer)h.zoom+=E.zoomDelta||0,h.bearing+=E.bearingDelta||0,h.pitch+=E.pitchDelta||0,h.roll+=E.rollDelta||0,E.panDelta&&h.pan._add(E.panDelta),E.around&&(h.around=E.around),E.pinchAround&&(h.pinchAround=E.pinchAround);let g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(h.pan.mag()){let E=gp(h.pan.mag(),g,o.e({},zb,a||{})),M=h.pan.mult(E.amount/h.pan.mag()),L=this._map.cameraHelper.handlePanInertia(M,this._map.transform);_.center=L.easingCenter,_.offset=L.easingOffset,cl(_,E)}if(h.zoom){let E=gp(h.zoom,g,NA);_.zoom=this._map.transform.zoom+E.amount,cl(_,E)}if(h.bearing){let E=gp(h.bearing,g,kA);_.bearing=this._map.transform.bearing+o.ah(E.amount,-179,179),cl(_,E)}if(h.pitch){let E=gp(h.pitch,g,qA);_.pitch=this._map.transform.pitch+E.amount,cl(_,E)}if(h.roll){let E=gp(h.roll,g,FA);_.roll=this._map.transform.roll+o.ah(E.amount,-179,179),cl(_,E)}if(_.zoom||_.bearing){let E=h.pinchAround===void 0?h.around:h.pinchAround;_.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),o.e(_,{noMoveStart:!0})}}function cl(w,a){(!w.duration||w.duration<a.duration)&&(w.duration=a.duration,w.easing=a.easing)}function gp(w,a,h){let{maxSpeed:g,linearity:_,deceleration:E}=h,M=o.ah(w*_/(a/1e3),-g,g),L=Math.abs(M)/(E*_);return{easing:h.easing,duration:1e3*L,amount:M*(L/2)}}class Ma extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g,_={}){g=g instanceof MouseEvent?g:new MouseEvent(a,g);let E=b.mousePos(h.getCanvas(),g),M=h.unproject(E);super(a,o.e({point:E,lngLat:M,originalEvent:g},_)),this._defaultPrevented=!1,this.target=h}}class vp extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g){let _=a==="touchend"?g.changedTouches:g.touches,E=b.touchPos(h.getCanvasContainer(),_),M=E.map(k=>h.unproject(k)),L=E.reduce((k,B,V,W)=>k.add(B.div(W.length)),new o.P(0,0));super(a,{points:E,point:L,lngLats:M,lngLat:h.unproject(L),originalEvent:g}),this._defaultPrevented=!1}}class Ub extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g){super(a,{originalEvent:g}),this._defaultPrevented=!1}}class zA{constructor(a,h){this._map=a,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Ub(a.type,this._map,a))}mousedown(a,h){return this._mousedownPos=h,this._firePreventable(new Ma(a.type,this._map,a))}mouseup(a){this._map.fire(new Ma(a.type,this._map,a))}click(a,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Ma(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Ma(a.type,this._map,a))}mouseover(a){this._map.fire(new Ma(a.type,this._map,a))}mouseout(a){this._map.fire(new Ma(a.type,this._map,a))}touchstart(a){return this._firePreventable(new vp(a.type,this._map,a))}touchmove(a){this._map.fire(new vp(a.type,this._map,a))}touchend(a){this._map.fire(new vp(a.type,this._map,a))}touchcancel(a){this._map.fire(new vp(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class UA{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Ma(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ma("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Ma(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yp{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class Bb{constructor(a,h){this._map=a,this._tr=new yp(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,h){this.isEnabled()&&a.shiftKey&&a.button===0&&(b.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(a,h){if(!this._active)return;let g=h;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;let _=this._startPos;this._lastPos=g,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));let E=Math.min(_.x,g.x),M=Math.max(_.x,g.x),L=Math.min(_.y,g.y),k=Math.max(_.y,g.y);b.setTransform(this._box,`translate(${E}px,${L}px)`),this._box.style.width=M-E+"px",this._box.style.height=k-L+"px"}mouseupWindow(a,h){if(!this._active||a.button!==0)return;let g=this._startPos,_=h;if(this.reset(),b.suppressClick(),g.x!==_.x||g.y!==_.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:E=>E.fitScreenCoordinates(g,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,h){return this._map.fire(new o.l(a,{originalEvent:h}))}}function _p(w,a){if(w.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${a.length}`);let h={};for(let g=0;g<w.length;g++)h[w[g].identifier]=a[g];return h}class BA{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,h,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),g.length===this.numTouches&&(this.centroid=function(_){let E=new o.P(0,0);for(let M of _)E._add(M);return E.div(_.length)}(h),this.touches=_p(g,h)))}touchmove(a,h,g){if(this.aborted||!this.centroid)return;let _=_p(g,h);for(let E in this.touches){let M=_[E];(!M||M.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(a,h,g){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){let _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Ca{constructor(a){this.singleTap=new BA(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,h,g){this.singleTap.touchstart(a,h,g)}touchmove(a,h,g){this.singleTap.touchmove(a,h,g)}touchend(a,h,g){let _=this.singleTap.touchend(a,h,g);if(_){let E=a.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(_)<30;if(E&&M||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class fl{constructor(a){this._tr=new yp(a),this._zoomIn=new Ca({numTouches:1,numTaps:2}),this._zoomOut=new Ca({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,h,g){this._zoomIn.touchstart(a,h,g),this._zoomOut.touchstart(a,h,g)}touchmove(a,h,g){this._zoomIn.touchmove(a,h,g),this._zoomOut.touchmove(a,h,g)}touchend(a,h,g){let _=this._zoomIn.touchend(a,h,g),E=this._zoomOut.touchend(a,h,g),M=this._tr;return _?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(_)},{originalEvent:a})}):E?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(E)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xp{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){let h=this._moveFunction(...a);if(h.bearingDelta||h.pitchDelta||h.rollDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(a,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(h)?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,h){if(!this.isEnabled())return;let g=this._lastPoint;if(!g)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);let _=Array.isArray(h)?h[0]:h;return!this._moved&&_.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(g,_))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&b.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let hl=0,bp=2,Jq={[hl]:1,[bp]:2};class Um{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){let h=b.mouseButton(a);this._eventButton=h}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(h,g){let _=Jq[g];return h.buttons===void 0||(h.buttons&_)!==_}(a,this._eventButton)}isValidEndEvent(a){return b.mouseButton(a)===this._eventButton}}class eF{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class tF{constructor(a=new Um({checkCorrectEvent:()=>!0}),h=new eF){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=h}_executeRelevantHandler(a,h,g){return a instanceof MouseEvent?h(a):typeof TouchEvent!="undefined"&&a instanceof TouchEvent?g(a):void 0}startMove(a){this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.startMove(h),h=>this.oneFingerTouchMoveStateManager.startMove(h))}endMove(a){this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.endMove(h),h=>this.oneFingerTouchMoveStateManager.endMove(h))}isValidStartEvent(a){return this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.isValidStartEvent(h),h=>this.oneFingerTouchMoveStateManager.isValidStartEvent(h))}isValidMoveEvent(a){return this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.isValidMoveEvent(h),h=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(h))}isValidEndEvent(a){return this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.isValidEndEvent(h),h=>this.oneFingerTouchMoveStateManager.isValidEndEvent(h))}}let Bm=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=a=>{a.preventDefault()}};class Vm{constructor(a,h){this._clickTolerance=a.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,h,g){return this._calculateTransform(a,h,g)}touchmove(a,h,g){if(this._active){if(!this._shouldBePrevented(g.length))return a.preventDefault(),this._calculateTransform(a,h,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,h,g){this._calculateTransform(a,h,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,h,g){g.length>0&&(this._active=!0);let _=_p(g,h),E=new o.P(0,0),M=new o.P(0,0),L=0;for(let B in _){let V=_[B],W=this._touches[B];W&&(E._add(V),M._add(V.sub(W)),L++,_[B]=V)}if(this._touches=_,this._shouldBePrevented(L)||!M.mag())return;let k=M.div(L);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(L),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,h,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([h[0],h[1]]))}touchmove(a,h,g){if(!this._firstTwoTouches)return;a.preventDefault();let[_,E]=this._firstTwoTouches,M=Ut(g,h,_),L=Ut(g,h,E);if(!M||!L)return;let k=this._aroundCenter?null:M.add(L).div(2);return this._move([M,L],k,a)}touchend(a,h,g){if(!this._firstTwoTouches)return;let[_,E]=this._firstTwoTouches,M=Ut(g,h,_),L=Ut(g,h,E);M&&L||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ut(w,a,h){for(let g=0;g<w.length;g++)if(w[g].identifier===h)return a[g]}function Vb(w,a){return Math.log(w/a)/Math.LN2}class ty extends pl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,h){let g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Vb(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vb(this._distance,g),pinchAround:h}}}function Gb(w,a){return 180*w.angleWith(a)/Math.PI}class wp extends pl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,h,g){let _=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gb(this._vector,_),pinchAround:h}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());let h=25/(Math.PI*this._minDiameter)*360,g=Gb(a,this._startVector);return Math.abs(g)<h}}function Qf(w){return Math.abs(w.y)>Math.abs(w.x)}class ry extends pl{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,h,g){super.touchstart(a,h,g),this._currentTouchCount=g.length}_start(a){this._lastPoints=a,Qf(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,h,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let _=a[0].sub(this._lastPoints[0]),E=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,E,g.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(_.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(a,h,g){if(this._valid!==void 0)return this._valid;let _=a.mag()>=2,E=h.mag()>=2;if(!_&&!E)return;if(!_||!E)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;let M=a.y>0==h.y>0;return Qf(a)&&Qf(h)&&M}}let Jr={panStep:100,bearingStep:15,pitchStep:10};class ny{constructor(a){this._tr=new yp(a);let h=Jr;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let h=0,g=0,_=0,E=0,M=0;switch(a.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:a.shiftKey?g=-1:(a.preventDefault(),E=-1);break;case 39:a.shiftKey?g=1:(a.preventDefault(),E=1);break;case 38:a.shiftKey?_=1:(a.preventDefault(),M=-1);break;case 40:a.shiftKey?_=-1:(a.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(g=0,_=0),{cameraAnimation:L=>{let k=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:rF,zoom:h?Math.round(k.zoom)+h*(a.shiftKey?2:1):k.zoom,bearing:k.bearing+g*this._bearingStep,pitch:k.pitch+_*this._pitchStep,offset:[-E*this._panStep,-M*this._panStep],center:k.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rF(w){return w*(2-w)}let iy=4.000244140625,nF=1/450;class VA{constructor(a,h){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=a,this._tr=new yp(a),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=nF}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let h=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,g=x.now(),_=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,h!==0&&h%iy==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(_*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),a.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=a,this._delta-=h,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let h=b.mousePos(this._map.getCanvas(),a),g=this._tr;this._aroundPoint=this._aroundCenter?g.transform.locationToScreenPoint(o.S.convert(g.center)):h,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let L=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=L),typeof this._targetZoom=="number"&&(this._targetZoom+=L)}if(this._delta!==0){let L=this._type==="wheel"&&Math.abs(this._delta)>iy?this._wheelZoomRate:this._defaultZoomRate,k=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&k!==0&&(k=1/k);let B=typeof this._targetZoom!="number"?a.scale:o.af(this._targetZoom);this._targetZoom=a.getConstrained(a.getCameraLngLat(),o.ak(B*k)).zoom,this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let h=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,g=this._startZoom,_=this._easing,E,M=!1;if(this._type==="wheel"&&g&&_){let L=x.now()-this._lastWheelEventTime,k=Math.min((L+5)/200,1),B=_(k);E=o.C.number(g,h,B),k<1?this._frameId||(this._frameId=!0):M=!0}else E=h,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=E,{noInertia:!0,needsRenderFrame:!M,zoomDelta:E-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let h=o.co;if(this._prevEase){let g=this._prevEase,_=(x.now()-g.start)/g.duration,E=g.easing(_+.01)-g.easing(_),M=.27/Math.sqrt(E*E+1e-4)*.01,L=Math.sqrt(.0729-M*M);h=o.cm(M,L,.25,1)}return this._prevEase={start:x.now(),duration:a,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class $b{constructor(a,h){this._clickZoom=a,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Hb{constructor(a){this._tr=new yp(a),this.reset()}reset(){this._active=!1}dblclick(a,h){return a.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class GA{constructor(){this._tap=new Ca({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,h,g){if(!this._swipePoint)if(this._tapTime){let _=h[0],E=a.timeStamp-this._tapTime<500,M=this._tapPoint.dist(_)<30;E&&M?g.length>0&&(this._swipePoint=_,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(a,h,g)}touchmove(a,h,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;let _=h[0],E=_.y-this._swipePoint.y;return this._swipePoint=_,a.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(a,h,g)}touchend(a,h,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{let _=this._tap.touchend(a,h,g);_&&(this._tapTime=a.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $A{constructor(a,h,g){this._el=a,this._mousePan=h,this._touchPan=g}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Wb{constructor(a,h,g,_){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=h,this._mousePitch=g,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class HA{constructor(a,h,g,_){this._el=a,this._touchZoom=h,this._touchRotate=g,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class WA{constructor(a,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",a);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=h,this._container.appendChild(_);let E=document.createElement("div");E.className="maplibregl-mobile-message",E.textContent=g,this._container.appendChild(E),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,h){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let dl=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class Vn extends o.l{}function Ep(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Zb{constructor(a,h){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,E)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let M=_.type==="renderFrame"?void 0:_,L={needsRenderFrame:!1},k={},B={};for(let{handlerName:H,handler:K,allowed:ee}of this._handlers){if(!K.isEnabled())continue;let ce;if(this._blockedByActive(B,ee,H))K.reset();else if(K[E||_.type]){if(o.cp(_,E||_.type)){let ue=b.mousePos(this._map.getCanvas(),_);ce=K[E||_.type](_,ue)}else if(o.cq(_,E||_.type)){let ue=this._getMapTouches(_.touches),fe=b.touchPos(this._map.getCanvas(),ue);ce=K[E||_.type](_,fe,ue)}else o.cr(E||_.type)||(ce=K[E||_.type](_));this.mergeHandlerResult(L,k,ce,H,M),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()}(ce||K.isActive())&&(B[H]=K)}let V={};for(let H in this._previousActiveHandlers)B[H]||(V[H]=M);this._previousActiveHandlers=B,(Object.keys(V).length||Ep(L))&&(this._changes.push([L,k,V]),this._triggerRenderFrame()),(Object.keys(B).length||Ep(L))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:W}=L;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jA(a),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);let g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(let[_,E,M]of this._listeners)b.addEventListener(_,E,_===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(let[a,h,g]of this._listeners)b.removeEventListener(a,h,a===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(a){let h=this._map,g=h.getCanvasContainer();this._add("mapEvent",new zA(h,a));let _=h.boxZoom=new Bb(h,a);this._add("boxZoom",_),a.interactive&&a.boxZoom&&_.enable();let E=h.cooperativeGestures=new WA(h,a.cooperativeGestures);this._add("cooperativeGestures",E),a.cooperativeGestures&&E.enable();let M=new fl(h),L=new Hb(h);h.doubleClickZoom=new $b(L,M),this._add("tapZoom",M),this._add("clickZoom",L),a.interactive&&a.doubleClickZoom&&h.doubleClickZoom.enable();let k=new GA;this._add("tapDragZoom",k);let B=h.touchPitch=new ry(h);this._add("touchPitch",B),a.interactive&&a.touchPitch&&h.touchPitch.enable(a.touchPitch);let V=()=>h.project(h.getCenter()),W=function({enable:we,clickTolerance:Ie,aroundCenter:Pe=!0,minPixelCenterThreshold:Ee=100,rotateDegreesPerPixelMoved:je=.8},Qe){let Ve=new Um({checkCorrectEvent:Ge=>b.mouseButton(Ge)===0&&Ge.ctrlKey||b.mouseButton(Ge)===2&&!Ge.ctrlKey});return new xp({clickTolerance:Ie,move:(Ge,Xe)=>{let vt=Qe();if(Pe&&Math.abs(vt.y-Ge.y)>Ee)return{bearingDelta:o.cn(new o.P(Ge.x,Xe.y),Xe,vt)};let bt=(Xe.x-Ge.x)*je;return Pe&&Xe.y<vt.y&&(bt=-bt),{bearingDelta:bt}},moveStateManager:Ve,enable:we,assignEvents:Bm})}(a,V),H=function({enable:we,clickTolerance:Ie,pitchDegreesPerPixelMoved:Pe=-.5}){let Ee=new Um({checkCorrectEvent:je=>b.mouseButton(je)===0&&je.ctrlKey||b.mouseButton(je)===2});return new xp({clickTolerance:Ie,move:(je,Qe)=>({pitchDelta:(Qe.y-je.y)*Pe}),moveStateManager:Ee,enable:we,assignEvents:Bm})}(a),K=function({enable:we,clickTolerance:Ie,rollDegreesPerPixelMoved:Pe=.3},Ee){let je=new Um({checkCorrectEvent:Qe=>b.mouseButton(Qe)===2&&Qe.ctrlKey});return new xp({clickTolerance:Ie,move:(Qe,Ve)=>{let Ge=Ee(),Xe=(Ve.x-Qe.x)*Pe;return Ve.y<Ge.y&&(Xe=-Xe),{rollDelta:Xe}},moveStateManager:je,enable:we,assignEvents:Bm})}(a,V);h.dragRotate=new Wb(a,W,H,K),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",H,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),a.interactive&&a.dragRotate&&h.dragRotate.enable();let ee=function({enable:we,clickTolerance:Ie}){let Pe=new Um({checkCorrectEvent:Ee=>b.mouseButton(Ee)===0&&!Ee.ctrlKey});return new xp({clickTolerance:Ie,move:(Ee,je)=>({around:je,panDelta:je.sub(Ee)}),activateOnStart:!0,moveStateManager:Pe,enable:we,assignEvents:Bm})}(a),ce=new Vm(a,h);h.dragPan=new $A(g,ee,ce),this._add("mousePan",ee),this._add("touchPan",ce,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&h.dragPan.enable(a.dragPan);let ue=new wp,fe=new ty;h.touchZoomRotate=new HA(g,fe,ue,k),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&h.touchZoomRotate.enable(a.touchZoomRotate);let ve=h.scrollZoom=new VA(h,()=>this._triggerRenderFrame());this._add("scrollZoom",ve,["mousePan"]),a.interactive&&a.scrollZoom&&h.scrollZoom.enable(a.scrollZoom);let Se=h.keyboard=new ny(h);this._add("keyboard",Se),a.interactive&&a.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new UA(h))}_add(a,h,g){this._handlers.push({handlerName:a,handler:h,allowed:g}),this._handlersById[a]=h}stop(a){if(!this._updatingCamera){for(let{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(let{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!dl(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,h,g){for(let _ in a)if(_!==g&&(!h||h.indexOf(_)<0))return!0;return!1}_getMapTouches(a){let h=[];for(let g of a)this._el.contains(g.target)&&h.push(g);return h}mergeHandlerResult(a,h,g,_,E){if(!g)return;o.e(a,g);let M={handlerName:_,originalEvent:g.originalEvent||E};g.zoomDelta!==void 0&&(h.zoom=M),g.panDelta!==void 0&&(h.drag=M),g.rollDelta!==void 0&&(h.roll=M),g.pitchDelta!==void 0&&(h.pitch=M),g.bearingDelta!==void 0&&(h.rotate=M)}_applyChanges(){let a={},h={},g={};for(let[_,E,M]of this._changes)_.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(_.panDelta)),_.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(a.rollDelta=(a.rollDelta||0)+_.rollDelta),_.around!==void 0&&(a.around=_.around),_.pinchAround!==void 0&&(a.pinchAround=_.pinchAround),_.noInertia&&(a.noInertia=_.noInertia),o.e(h,E),o.e(g,M);this._updateMapTransform(a,h,g),this._changes=[]}_updateMapTransform(a,h,g){let _=this._map,E=_._getTransformForUpdate(),M=_.terrain;if(!(Ep(a)||M&&this._terrainMovement))return this._fireEvents(h,g,!0);_._stop(!0);let{panDelta:L,zoomDelta:k,bearingDelta:B,pitchDelta:V,rollDelta:W,around:H,pinchAround:K}=a;K!==void 0&&(H=K),H=H||_.transform.centerPoint,M&&!E.isPointOnMapSurface(H)&&(H=E.centerPoint);let ee={panDelta:L,zoomDelta:k,rollDelta:W,pitchDelta:V,bearingDelta:B,around:H};this._map.cameraHelper.useGlobeControls&&!E.isPointOnMapSurface(H)&&(H=E.centerPoint);let ce=H.distSqr(E.centerPoint)<.01?E.center:E.screenPointToLocation(L?H.sub(L):H);M?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,E),this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?E.setCenter(E.screenPointToLocation(E.centerPoint.sub(L))):this._map.cameraHelper.handleMapControlsPan(ee,E,ce):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ee,E,ce))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,E),this._map.cameraHelper.handleMapControlsPan(ee,E,ce)),_._applyUpdatedTransform(E),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(h,g,!0)}_fireEvents(a,h,g){let _=dl(this._eventsInProgress),E=dl(a),M={};for(let W in a){let{originalEvent:H}=a[W];this._eventsInProgress[W]||(M[`${W}start`]=H),this._eventsInProgress[W]=a[W]}!_&&E&&this._fireEvent("movestart",E.originalEvent);for(let W in M)this._fireEvent(W,M[W]);E&&this._fireEvent("move",E.originalEvent);for(let W in a){let{originalEvent:H}=a[W];this._fireEvent(W,H)}let L={},k;for(let W in this._eventsInProgress){let{handlerName:H,originalEvent:K}=this._eventsInProgress[W];this._handlersById[H].isActive()||(delete this._eventsInProgress[W],k=h[H]||K,L[`${W}end`]=k)}for(let W in L)this._fireEvent(W,L[W]);let B=dl(this._eventsInProgress),V=(_||E)&&!B;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let W=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&W.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(W)}if(g&&V){this._updatingCamera=!0;let W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!W||!W.essential&&x.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:k})),H(this._map.getBearing())&&this._map.resetNorth()):(H(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(a,h){this._map.fire(new o.l(a,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new Vn("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ZA extends o.E{constructor(a,h,g){super(),this._renderFrameCallback=()=>{let _=Math.min((x.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=g.bearingSnap,this.cameraHelper=h,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,h){a.apply(this.transform),this.transform=a,this.cameraHelper=h}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(a,h){return this.jumpTo({center:a},h)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,h){return this.jumpTo({elevation:a},h),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,h,g){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},h),g)}panTo(a,h,g){return this.easeTo(o.e({center:a},h),g)}getZoom(){return this.transform.zoom}setZoom(a,h){return this.jumpTo({zoom:a},h),this}zoomTo(a,h,g){return this.easeTo(o.e({zoom:a},h),g)}zoomIn(a,h){return this.zoomTo(this.getZoom()+1,a,h),this}zoomOut(a,h){return this.zoomTo(this.getZoom()-1,a,h),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,h){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",h)).fire(new o.l("move",h)).fire(new o.l("moveend",h))),this}getBearing(){return this.transform.bearing}setBearing(a,h){return this.jumpTo({bearing:a},h),this}getPadding(){return this.transform.padding}setPadding(a,h){return this.jumpTo({padding:a},h),this}rotateTo(a,h,g){return this.easeTo(o.e({bearing:a},h),g)}resetNorth(a,h){return this.rotateTo(0,o.e({duration:1e3},a),h),this}resetNorthPitch(a,h){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),h),this}snapToNorth(a,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,h):this}getPitch(){return this.transform.pitch}setPitch(a,h){return this.jumpTo({pitch:a},h),this}getRoll(){return this.transform.roll}setRoll(a,h){return this.jumpTo({roll:a},h),this}cameraForBounds(a,h){a=Lt.convert(a).adjustAntiMeridian();let g=h&&h.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),g,h)}_cameraForBoxAndBearing(a,h,g,_){let E={top:0,bottom:0,right:0,left:0};if(typeof(_=o.e({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){let B=_.padding;_.padding={top:B,bottom:B,right:B,left:B}}let M=o.e(E,_.padding);_.padding=M;let L=this.transform,k=new Lt(a,h);return this.cameraHelper.cameraForBoxAndBearing(_,M,k,g,L)}fitBounds(a,h,g){return this._fitInternal(this.cameraForBounds(a,h),h,g)}fitScreenCoordinates(a,h,g,_,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(h)),g,_),_,E)}_fitInternal(a,h,g){return a?(delete(h=o.e(a,h)).padding,h.linear?this.easeTo(h,g):this.flyTo(h,g)):this}jumpTo(a,h){this.stop();let g=this._getTransformForUpdate(),_=!1,E=!1,M=!1,L=g.zoom;this.cameraHelper.handleJumpToCenterZoom(g,a);let k=g.zoom!==L;return"elevation"in a&&g.elevation!==+a.elevation&&g.setElevation(+a.elevation),"bearing"in a&&g.bearing!==+a.bearing&&(_=!0,g.setBearing(+a.bearing)),"pitch"in a&&g.pitch!==+a.pitch&&(E=!0,g.setPitch(+a.pitch)),"roll"in a&&g.roll!==+a.roll&&(M=!0,g.setRoll(+a.roll)),a.padding==null||g.isPaddingEqual(a.padding)||g.setPadding(a.padding),this._applyUpdatedTransform(g),this.fire(new o.l("movestart",h)).fire(new o.l("move",h)),k&&this.fire(new o.l("zoomstart",h)).fire(new o.l("zoom",h)).fire(new o.l("zoomend",h)),_&&this.fire(new o.l("rotatestart",h)).fire(new o.l("rotate",h)).fire(new o.l("rotateend",h)),E&&this.fire(new o.l("pitchstart",h)).fire(new o.l("pitch",h)).fire(new o.l("pitchend",h)),M&&this.fire(new o.l("rollstart",h)).fire(new o.l("roll",h)).fire(new o.l("rollend",h)),this.fire(new o.l("moveend",h))}calculateCameraOptionsFromTo(a,h,g,_=0){let E=o.a1.fromLngLat(a,h),M=o.a1.fromLngLat(g,_),L=M.x-E.x,k=M.y-E.y,B=M.z-E.z,V=Math.hypot(L,k,B);if(V===0)throw new Error("Can't calculate camera options with same From and To");let W=Math.hypot(L,k),H=o.ak(this.transform.cameraToCenterDistance/V/this.transform.tileSize),K=180*Math.atan2(L,-k)/Math.PI,ee=180*Math.acos(W/V)/Math.PI;return ee=B<0?90-ee:90+ee,{center:M.toLngLat(),elevation:_,zoom:H,pitch:ee,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(a,h,g,_,E){let M=this.transform.calculateCenterFromCameraLngLatAlt(a,h,g,_);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:g,pitch:_,roll:E}}easeTo(a,h){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.co},a)).animate===!1||!a.essential&&x.prefersReducedMotion)&&(a.duration=0);let g=this._getTransformForUpdate(),_=this.getBearing(),E=g.pitch,M=g.roll,L="bearing"in a?this._normalizeBearing(a.bearing,_):_,k="pitch"in a?+a.pitch:E,B="roll"in a?this._normalizeBearing(a.roll,M):M,V="padding"in a?a.padding:g.padding,W=o.P.convert(a.offset),H,K;a.around&&(H=o.S.convert(a.around),K=g.locationToScreenPoint(H));let ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ce=this.cameraHelper.handleEaseTo(g,{bearing:L,pitch:k,roll:B,padding:V,around:H,aroundPoint:K,offsetAsPoint:W,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||_!==L,this._pitching=this._pitching||k!==E,this._rolling=this._rolling||B!==M,this._padding=!g.isPaddingEqual(V),this._zooming=this._zooming||ce.isZooming,this._easeId=a.easeId,this._prepareEase(h,a.noMoveStart,ee),this.terrain&&this._prepareElevation(ce.elevationCenter),this._ease(ue=>{ce.easeFunc(ue),this.terrain&&!a.freezeElevation&&this._updateElevation(ue),this._applyUpdatedTransform(g),this._fireMoveEvents(h)},ue=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(h,ue)},a),this}_prepareEase(a,h,g={}){this._moving=!0,h||g.moving||this.fire(new o.l("movestart",a)),this._zooming&&!g.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!g.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&h!==this._elevationTarget){let g=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(g-(h-(g*a+this._elevationStart))/(1-a)),this._elevationTarget=h}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};let h=a.getCameraLngLat(),g=a.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(h,a.zoom):0;if(g<_){let E=this.calculateCameraOptionsFromTo(h,_,a.center,a.elevation);return{pitch:E.pitch,zoom:E.zoom}}return{}}_applyUpdatedTransform(a){let h=[];if(h.push(_=>this._elevateCameraIfInsideTerrain(_)),this.transformCameraUpdate&&h.push(_=>this.transformCameraUpdate(_)),!h.length)return;let g=a.clone();for(let _ of h){let E=g.clone(),{center:M,zoom:L,roll:k,pitch:B,bearing:V,elevation:W}=_(E);M&&E.setCenter(M),W!==void 0&&E.setElevation(W),L!==void 0&&E.setZoom(L),k!==void 0&&E.setRoll(k),B!==void 0&&E.setPitch(B),V!==void 0&&E.setBearing(V),g.apply(E)}this.transform.apply(g)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;let g=this._zooming,_=this._rotating,E=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,g&&this.fire(new o.l("zoomend",a)),_&&this.fire(new o.l("rotateend",a)),E&&this.fire(new o.l("pitchend",a)),M&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,h){if(!a.essential&&x.prefersReducedMotion){let Xe=o.Q(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Xe,h)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.co},a);let g=this._getTransformForUpdate(),_=g.bearing,E=g.pitch,M=g.roll,L=g.padding,k="bearing"in a?this._normalizeBearing(a.bearing,_):_,B="pitch"in a?+a.pitch:E,V="roll"in a?this._normalizeBearing(a.roll,M):M,W="padding"in a?a.padding:g.padding,H=o.P.convert(a.offset),K=g.centerPoint.add(H),ee=g.screenPointToLocation(K),ce=this.cameraHelper.handleFlyTo(g,{bearing:k,pitch:B,roll:V,padding:W,locationAtOffset:ee,offsetAsPoint:H,center:a.center,minZoom:a.minZoom,zoom:a.zoom}),ue=a.curve,fe=Math.max(g.width,g.height),ve=fe/ce.scaleOfZoom,Se=ce.pixelPathLength;typeof ce.scaleOfMinZoom=="number"&&(ue=Math.sqrt(fe/ce.scaleOfMinZoom/Se*2));let we=ue*ue;function Ie(Xe){let vt=(ve*ve-fe*fe+(Xe?-1:1)*we*we*Se*Se)/(2*(Xe?ve:fe)*we*Se);return Math.log(Math.sqrt(vt*vt+1)-vt)}function Pe(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function Ee(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}let je=Ie(!1),Qe=function(Xe){return Ee(je)/Ee(je+ue*Xe)},Ve=function(Xe){return fe*((Ee(je)*(Pe(vt=je+ue*Xe)/Ee(vt))-Pe(je))/we)/Se;var vt},Ge=(Ie(!0)-je)/ue;if(Math.abs(Se)<2e-6||!isFinite(Ge)){if(Math.abs(fe-ve)<1e-6)return this.easeTo(a,h);let Xe=ve<fe?-1:1;Ge=Math.abs(Math.log(ve/fe))/ue,Ve=()=>0,Qe=vt=>Math.exp(Xe*ue*vt)}return a.duration="duration"in a?+a.duration:1e3*Ge/("screenSpeed"in a?+a.screenSpeed/ue:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=_!==k,this._pitching=B!==E,this._rolling=V!==M,this._padding=!g.isPaddingEqual(W),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(ce.targetCenter),this._ease(Xe=>{let vt=Xe*Ge,bt=1/Qe(vt),st=Ve(vt);this._rotating&&g.setBearing(o.C.number(_,k,Xe)),this._pitching&&g.setPitch(o.C.number(E,B,Xe)),this._rolling&&g.setRoll(o.C.number(M,V,Xe)),this._padding&&(g.interpolatePadding(L,W,Xe),K=g.centerPoint.add(H)),ce.easeFunc(Xe,bt,st,K),this.terrain&&!a.freezeElevation&&this._updateElevation(Xe),this._applyUpdatedTransform(g),this._fireMoveEvents(h)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(h)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,h){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,h)}return a||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(a,h,g){g.animate===!1||g.duration===0?(a(1),h()):(this._easeStart=x.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,h){a=o.aO(a,-180,180);let g=Math.abs(a-h);return Math.abs(a-360-h)<g&&(a-=360),Math.abs(a+360-h)<g&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(a),this.transform.tileZoom):null}}let Yb={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Kb{constructor(a=Yb){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,h){let g=this._map._getUIString(`AttributionControl.${h}`);a.title=g,a.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){let _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}let h=this._map.style.sourceCaches;for(let _ in h){let E=h[_];if(E.used||E.usedForTerrain){let M=E.getSource();M.attribution&&a.indexOf(M.attribution)<0&&a.push(M.attribution)}}a=a.filter(_=>String(_).trim()),a.sort((_,E)=>_.length-E.length),a=a.filter((_,E)=>{for(let M=E+1;M<a.length;M++)if(a[M].indexOf(_)>=0)return!1;return!0});let g=a.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,a.length?(this._innerContainer.innerHTML=b.sanitize(g),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class YA{constructor(a={}){this._updateCompact=()=>{let h=this._container.children;if(h.length){let g=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");let h=b.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Gl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){let h=++this._id;return this._queue.push({callback:a,id:h,cancelled:!1}),h}remove(a){let h=this._currentlyRunning,g=h?this._queue.concat(h):this._queue;for(let _ of g)if(_.id===a)return void(_.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let h=this._currentlyRunning=this._queue;this._queue=[];for(let g of h)if(!g.cancelled&&(g.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var oy=o.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Kt extends o.E{constructor(a){super(),this._lastTilesetChange=x.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*_w(2,this.deltaZoom),a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,h){this.sourceCache.update(a,h),this._renderableTilesKeys=[];let g={};for(let _ of xe(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))g[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),o.bY(_.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[_.key]=new _i(_,this.tileSize),this._lastTilesetChange=x.now());for(let _ in this._tiles)g[_]||delete this._tiles[_]}freeRtt(a){for(let h in this._tiles){let g=this._tiles[h];(!a||g.tileID.equals(a)||g.tileID.isChildOf(a)||a.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,h){return h?this._getTerrainCoordsForTileRanges(a,h):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){let h={};for(let g of this._renderableTilesKeys){let _=this._tiles[g].tileID,E=a.clone(),M=o.ba();if(_.canonical.equals(a.canonical))o.bY(M,0,o.$,o.$,0,0,1);else if(_.canonical.isChildOf(a.canonical)){let L=_.canonical.z-a.canonical.z,k=_.canonical.x-(_.canonical.x>>L<<L),B=_.canonical.y-(_.canonical.y>>L<<L),V=o.$>>L;o.bY(M,0,V,V,0,0,1),o.M(M,M,[-k*V,-B*V,0])}else{if(!a.canonical.isChildOf(_.canonical))continue;{let L=a.canonical.z-_.canonical.z,k=a.canonical.x-(a.canonical.x>>L<<L),B=a.canonical.y-(a.canonical.y>>L<<L),V=o.$>>L;o.bY(M,0,o.$,o.$,0,0,1),o.M(M,M,[k*V,B*V,0]),o.N(M,M,[1/_w(2,L),1/_w(2,L),0])}}E.terrainRttPosMatrix32f=new Float32Array(M),h[g]=E}return h}_getTerrainCoordsForTileRanges(a,h){let g={};for(let _ of this._renderableTilesKeys){let E=this._tiles[_].tileID;if(!this._isWithinTileRanges(E,h))continue;let M=a.clone(),L=o.ba();if(E.canonical.z===a.canonical.z){let k=a.canonical.x-E.canonical.x,B=a.canonical.y-E.canonical.y;o.bY(L,0,o.$,o.$,0,0,1),o.M(L,L,[k*o.$,B*o.$,0])}else if(E.canonical.z>a.canonical.z){let k=E.canonical.z-a.canonical.z,B=E.canonical.x-(E.canonical.x>>k<<k),V=E.canonical.y-(E.canonical.y>>k<<k),W=a.canonical.x-(E.canonical.x>>k),H=a.canonical.y-(E.canonical.y>>k),K=o.$>>k;o.bY(L,0,K,K,0,0,1),o.M(L,L,[-B*K+W*o.$,-V*K+H*o.$,0])}else{let k=a.canonical.z-E.canonical.z,B=a.canonical.x-(a.canonical.x>>k<<k),V=a.canonical.y-(a.canonical.y>>k<<k),W=(a.canonical.x>>k)-E.canonical.x,H=(a.canonical.y>>k)-E.canonical.y,K=o.$<<k;o.bY(L,0,K,K,0,0,1),o.M(L,L,[B*o.$+W*K,V*o.$+H*K,0])}M.terrainRttPosMatrix32f=new Float32Array(L),g[_]=M}return g}getSourceTile(a,h){let g=this.sourceCache._source,_=a.overscaledZ-this.deltaZoom;if(_>g.maxzoom&&(_=g.maxzoom),_<g.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(_).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!E||!E.dem)&&h)for(;_>=g.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(a.scaledTo(_--).key);return E}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,h){return h[a.canonical.z]&&a.canonical.x>=h[a.canonical.z].minTileX&&a.canonical.x<=h[a.canonical.z].maxTileX&&a.canonical.y>=h[a.canonical.z].minTileY&&a.canonical.y<=h[a.canonical.z].maxTileY}}class lr{constructor(a,h,g){this._meshCache={},this.painter=a,this.sourceCache=new Kt(h),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,h,g,_=o.$){var E;if(!(h>=0&&h<_&&g>=0&&g<_))return 0;let M=this.getTerrainData(a),L=(E=M.tile)===null||E===void 0?void 0:E.dem;if(!L)return 0;let k=o.cs([],[h/_*o.$,g/_*o.$],M.u_terrain_matrix),B=[k[0]*L.dim,k[1]*L.dim],V=Math.floor(B[0]),W=Math.floor(B[1]),H=B[0]-V,K=B[1]-W;return L.get(V,W)*(1-H)*(1-K)+L.get(V+1,W)*H*(1-K)+L.get(V,W+1)*(1-H)*K+L.get(V+1,W+1)*H*K}getElevationForLngLatZoom(a,h){if(!o.ct(h,a.wrap()))return 0;let{tileID:g,mercatorX:_,mercatorY:E}=this._getOverscaledTileIDFromLngLatZoom(a,h);return this.getElevation(g,_%o.$,E%o.$,o.$)}getElevation(a,h,g,_=o.$){return this.getDEMElevation(a,h,g,_)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){let _=this.painter.context,E=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(_,E,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(_,new o.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ag([])}let h=this.sourceCache.getSourceTile(a,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){let _=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new o.T(_,h.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),h.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}let g=h&&h+h.tileID.key+a.key;if(g&&!this._demMatrixCache[g]){let _=this.sourceCache.sourceCache._source.maxzoom,E=a.canonical.z-h.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=_?E=a.canonical.z-_:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let M=a.canonical.x-(a.canonical.x>>E<<E),L=a.canonical.y-(a.canonical.y>>E<<E),k=o.cu(new Float64Array(16),[1/(o.$<<E),1/(o.$<<E),0]);o.M(k,k,[M*o.$,L*o.$,0]),this._demMatrixCache[a.key]={matrix:k,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(a){let h=this.painter,g=h.width/devicePixelRatio,_=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(h.context,{width:g,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(h.context,{width:g,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(g,_,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,g,_))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,M=0;E<this._coordsTextureSize;E++)for(let L=0;L<this._coordsTextureSize;L++,M+=4)h[M+0]=255&L,h[M+1]=255&E,h[M+2]=L>>8<<4|E>>8,h[M+3]=0;let g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),_=new o.T(a,g,a.gl.RGBA,{premultiply:!1});return _.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);let h=new Uint8Array(4),g=this.painter.context,_=g.gl,E=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),L=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(E,L-M-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),g.bindFramebuffer.set(null);let k=h[0]+(h[2]>>4<<8),B=h[1]+((15&h[2])<<8),V=this.coordsIndex[255-h[3]],W=V&&this.sourceCache.getTileByID(V);if(!W)return null;let H=this._coordsTextureSize,K=(1<<W.tileID.canonical.z)*H;return new o.a1((W.tileID.canonical.x*H+k)/K+W.tileID.wrap,(W.tileID.canonical.y*H+B)/K,this.getElevation(W.tileID,k,B,H))}depthAtPoint(a){let h=new Uint8Array(4),g=this.painter.context,_=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),g.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(a){var h;let g=((h=this.painter.style.projection)===null||h===void 0?void 0:h.transitionState)>0,_=g&&a.canonical.y===0,E=g&&a.canonical.y===(1<<a.canonical.z)-1,M=`m_${_?"n":""}_${E?"s":""}`;if(this._meshCache[M])return this._meshCache[M];let L=this.painter.context,k=new o.cv,B=new o.aN,V=this.meshSize,W=o.$/V,H=V*V;for(let Ee=0;Ee<=V;Ee++)for(let je=0;je<=V;je++)k.emplaceBack(je*W,Ee*W,0);for(let Ee=0;Ee<H;Ee+=V+1)for(let je=0;je<V;je++)B.emplaceBack(je+Ee,V+je+Ee+1,V+je+Ee+2),B.emplaceBack(je+Ee,V+je+Ee+2,je+Ee+1);let K=k.length,ee=K+(V+1),ce=(V+1)*V,ue=_?o.bh:0,fe=_?0:1,ve=E?o.bi:o.$,Se=E?0:1;for(let Ee=0;Ee<=V;Ee++)k.emplaceBack(Ee*W,ue,fe);for(let Ee=0;Ee<=V;Ee++)k.emplaceBack(Ee*W,ve,Se);for(let Ee=0;Ee<V;Ee++)B.emplaceBack(ce+Ee,ee+Ee,ee+Ee+1),B.emplaceBack(ce+Ee,ee+Ee+1,ce+Ee+1),B.emplaceBack(0+Ee,K+Ee+1,K+Ee),B.emplaceBack(0+Ee,0+Ee+1,K+Ee+1);let we=k.length,Ie=we+2*(V+1);for(let Ee of[0,1])for(let je=0;je<=V;je++)for(let Qe of[0,1])k.emplaceBack(Ee*o.$,je*W,Qe);for(let Ee=0;Ee<2*V;Ee+=2)B.emplaceBack(we+Ee,we+Ee+1,we+Ee+3),B.emplaceBack(we+Ee,we+Ee+3,we+Ee+2),B.emplaceBack(Ie+Ee,Ie+Ee+3,Ie+Ee+1),B.emplaceBack(Ie+Ee,Ie+Ee+2,Ie+Ee+3);let Pe=new Ff(L.createVertexBuffer(k,oy.members),L.createIndexBuffer(B),o.aM.simpleSegment(0,0,k.length,B.length));return this._meshCache[M]=Pe,Pe}getMeshFrameDelta(a){return 2*Math.PI*o.bu/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,h){var g;let{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(a,h);return(g=this.getMinMaxElevation(_).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(a){let h=this.getTerrainData(a).tile,g={minElevation:null,maxElevation:null};return h&&h.dem&&(g.minElevation=h.dem.min*this.exaggeration,g.maxElevation=h.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(a,h){let g=o.a1.fromLngLat(a.wrap()),_=(1<<h)*o.$,E=g.x*_,M=g.y*_,L=Math.floor(E/o.$),k=Math.floor(M/o.$);return{tileID:new o.Z(h,0,h,L,k),mercatorX:E,mercatorY:M}}}class ay{constructor(a,h,g){this._context=a,this._size=h,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){let h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(g.texture),{id:a,fbo:h,texture:g,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>a.id!==h),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(let h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(let a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}let Nc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class sy{constructor(a,h){this.painter=a,this.terrain=h,this.pool=new ay(a.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(g=>!a._layers[g].isHidden(h)),this._coordsAscending={};for(let g in a.sourceCaches){this._coordsAscending[g]={};let _=a.sourceCaches[g].getVisibleCoordinates(),E=a.sourceCaches[g].getSource(),M=E instanceof Sr?E.terrainTileRanges:null;for(let L of _){let k=this.terrain.sourceCache.getTerrainCoords(L,M);for(let B in k)this._coordsAscending[g][B]||(this._coordsAscending[g][B]=[]),this._coordsAscending[g][B].push(k[B])}}this._coordsAscendingStr={};for(let g of a._order){let _=a._layers[g],E=_.source;if(Nc[_.type]&&!this._coordsAscendingStr[E]){this._coordsAscendingStr[E]={};for(let M in this._coordsAscending[E])this._coordsAscendingStr[E][M]=this._coordsAscending[E][M].map(L=>L.key).sort().join()}}for(let g of this._renderableTiles)for(let _ in this._coordsAscendingStr){let E=this._coordsAscendingStr[_][g.tileID.key];E&&E!==g.rttCoords[_]&&(g.rtt=[])}}renderLayer(a,h){if(a.isHidden(this.painter.transform.zoom))return!1;let g=Object.assign(Object.assign({},h),{isRenderingToTexture:!0}),_=a.type,E=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Nc[_]&&(this._prevType&&Nc[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(a.id),!M))return!0;if(Nc[this._prevType]||Nc[_]&&M){this._prevType=_;let L=this._stacks.length-1,k=this._stacks[L]||[];for(let B of this._renderableTiles){if(this.pool.isFull()&&(Jv(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[L]){let W=this.pool.getObjectForId(B.rtt[L].id);if(W.stamp===B.rtt[L].stamp){this.pool.useObject(W);continue}}let V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),B.rtt[L]={id:V.id,stamp:V.stamp},E.context.bindFramebuffer.set(V.fbo.framebuffer),E.context.clear({color:o.bf.transparent,stencil:0}),E.currentStencilSource=void 0;for(let W=0;W<k.length;W++){let H=E.style._layers[k[W]],K=H.source?this._coordsAscending[H.source][B.tileID.key]:[B.tileID];E.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),E._renderTileClippingMasks(H,K,!0),E.renderLayer(E,E.style.sourceCaches[H.source],H,K,g),H.source&&(B.rttCoords[H.source]=this._coordsAscendingStr[H.source][B.tileID.key])}}return Jv(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects(),Nc[_]}return!1}}let sa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},KA=l,Ms={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Yb,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},iF={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Gm{constructor(a,h,g=!1){this.mousedown=E=>{this.startMove(E,b.mousePos(this.element,E)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.move(E,b.mousePos(this.element,E))},this.mouseup=E=>{this._rotatePitchHandler.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.startMove(E,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.move(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=h;let _=new tF;this._rotatePitchHandler=new xp({clickTolerance:3,move:(E,M)=>{let L=h.getBoundingClientRect(),k=new o.P((L.bottom-L.top)/2,(L.right-L.left)/2);return{bearingDelta:o.cn(new o.P(E.x,M.y),M,k),pitchDelta:g?-.5*(M.y-E.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=a,b.addEventListener(h,"mousedown",this.mousedown),b.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(h,"touchcancel",this.reset)}startMove(a,h){this._rotatePitchHandler.dragStart(a,h),b.disableDrag()}move(a,h){let g=this.map,{bearingDelta:_,pitchDelta:E}=this._rotatePitchHandler.dragMove(a,h)||{};_&&g.setBearing(g.getBearing()+_),E&&g.setPitch(g.getPitch()+E)}off(){let a=this.element;b.removeEventListener(a,"mousedown",this.mousedown),b.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let kn;function Ci(w,a,h,g=!1){if(g||!h.getCoveringTilesDetailsProvider().allowWorldCopies())return w==null?void 0:w.wrap();let _=new o.S(w.lng,w.lat);if(w=new o.S(w.lng,w.lat),a){let E=new o.S(w.lng-360,w.lat),M=new o.S(w.lng+360,w.lat),L=h.locationToScreenPoint(w).distSqr(a);h.locationToScreenPoint(E).distSqr(a)<L?w=E:h.locationToScreenPoint(M).distSqr(a)<L&&(w=M)}for(;Math.abs(w.lng-h.center.lng)>180;){let E=h.locationToScreenPoint(w);if(E.x>=0&&E.y>=0&&E.x<=h.width&&E.y<=h.height)break;w.lng>h.center.lng?w.lng-=360:w.lng+=360}return w.lng!==_.lng&&h.isPointOnMapSurface(h.locationToScreenPoint(w))?w:_}let ly={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Sp(w,a,h){let g=w.classList;for(let _ in ly)g.remove(`maplibregl-${h}-anchor-${_}`);g.add(`maplibregl-${h}-anchor-${a}`)}class Tp extends o.E{constructor(a){if(super(),this._onKeyPress=h=>{let g=h.code,_=h.charCode||h.keyCode;g!=="Space"&&g!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=h=>{let g=h.originalEvent.target,_=this._element;this._popup&&(g===_||_.contains(g))&&this.togglePopup()},this._update=h=>{if(!this._map)return;let g=this._map.loaded()&&!this._map.isMoving();((h==null?void 0:h.type)==="terrain"||(h==null?void 0:h.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=Ci(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${ly[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${_}`),x.frameAsync(new AbortController).then(()=>{this._updateOpacity(h&&h.type==="moveend")}).catch(()=>{})},this._onMove=h=>{if(!this._isDragging){let g=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");let h=b.createNS("http://www.w3.org/2000/svg","svg"),g=41,_=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${g}px`),h.setAttributeNS(null,"width",`${_}px`),h.setAttributeNS(null,"viewBox",`0 0 ${_} ${g}`);let E=b.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");let M=b.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");let L=b.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");let k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let fe of k){let ve=b.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",fe.rx),ve.setAttributeNS(null,"ry",fe.ry),L.appendChild(ve)}let B=b.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);let V=b.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(V);let W=b.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");let H=b.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(H);let K=b.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");let ee=b.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ce=b.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");let ue=b.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ce),ee.appendChild(ue),M.appendChild(L),M.appendChild(B),M.appendChild(W),M.appendChild(K),M.appendChild(ee),h.appendChild(M),h.setAttributeNS(null,"height",g*this._scale+"px"),h.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(h),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Sp(this._element,this._anchor,"marker"),a&&a.className)for(let h of a.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.S.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){let _=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){let a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var h,g;let _=(h=this._map)===null||h===void 0?void 0:h.terrain,E=this._map.transform.isLocationOccluded(this._lngLat);if(!_||E){let K=E?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let M=this._map,L=M.terrain.depthAtPoint(this._pos),k=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,k)-L<.006)return void(this._element.style.opacity=this._opacity);let B=-this._offset.y/M.transform.pixelsPerMeter,V=Math.sin(M.getPitch()*Math.PI/180)*B,W=M.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),H=M.transform.lngLatToCameraDepth(this._lngLat,k+V)-W>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,h){return(this._opacity===void 0||a===void 0&&h===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}let Xb={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ip=0,Jf=!1,$m={maxWidth:100,unit:"metric"};function uy(w,a,h){let g=h&&h.maxWidth||100,_=w._container.clientHeight/2,E=w._container.clientWidth/2,M=w.unproject([E-g/2,_]),L=w.unproject([E+g/2,_]),k=Math.round(w.project(L).x-w.project(M).x),B=Math.min(g,k,w._container.clientWidth),V=M.distanceTo(L);if(h&&h.unit==="imperial"){let W=3.2808*V;W>5280?eh(a,B,W/5280,w._getUIString("ScaleControl.Miles")):eh(a,B,W,w._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?eh(a,B,V/1852,w._getUIString("ScaleControl.NauticalMiles")):V>=1e3?eh(a,B,V/1e3,w._getUIString("ScaleControl.Kilometers")):eh(a,B,V,w._getUIString("ScaleControl.Meters"))}function eh(w,a,h,g){let _=function(E){let M=Math.pow(10,`${Math.floor(E)}`.length-1),L=E/M;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(k){let B=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*B)/B}(L),M*L}(h);w.style.width=a*(_/h)+"px",w.innerHTML=`${_}&nbsp;${g}`}let Qb={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Jb=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function cy(w){if(w){if(typeof w=="number"){let a=Math.round(Math.abs(w)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,w),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-w),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(w,0),right:new o.P(-w,0)}}if(w instanceof o.P||Array.isArray(w)){let a=o.P.convert(w);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(w.center||[0,0]),top:o.P.convert(w.top||[0,0]),"top-left":o.P.convert(w["top-left"]||[0,0]),"top-right":o.P.convert(w["top-right"]||[0,0]),bottom:o.P.convert(w.bottom||[0,0]),"bottom-left":o.P.convert(w["bottom-left"]||[0,0]),"bottom-right":o.P.convert(w["bottom-right"]||[0,0]),left:o.P.convert(w.left||[0,0]),right:o.P.convert(w.right||[0,0])}}return cy(new o.P(0,0))}let ew=l;i.AJAXError=o.cz,i.Event=o.l,i.Evented=o.E,i.LngLat=o.S,i.MercatorCoordinate=o.a1,i.Point=o.P,i.addProtocol=o.cA,i.config=o.a,i.removeProtocol=o.cB,i.AttributionControl=Kb,i.BoxZoomHandler=Bb,i.CanvasSource=vr,i.CooperativeGesturesHandler=WA,i.DoubleClickZoomHandler=$b,i.DragPanHandler=$A,i.DragRotateHandler=Wb,i.EdgeInsets=zf,i.FullscreenControl=class extends o.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var a;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=h==null?void 0:h.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let w=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=Gt,i.GeolocateControl=class extends o.E{constructor(w){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{let h=new o.S(a.coords.longitude,a.coords.latitude),g=a.coords.accuracy,_=this._map.getBearing(),E=o.e({bearing:_},this.options.fitBoundsOptions),M=Lt.fromLngLat(h,g);this._map.fitBounds(M,E,{geolocateSource:!0})},this._updateMarker=a=>{if(a){let h=new o.S(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=a.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=a=>{if(this._map){if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Jf)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");let h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{let h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Tp({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Tp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{let g=(h==null?void 0:h[0])instanceof ResizeObserverEntry;h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||g||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Xb,w)}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(kn!==void 0&&!a)return kn;if(window.navigator.permissions===void 0)return kn=!!window.navigator.geolocation,kn;try{kn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(h){kn=!!window.navigator.geolocation}return kn})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Ip=0,Jf=!1}_isOutOfMapMaxBounds(w){let a=this._map.getMaxBounds(),h=w.coords;return a&&(h.longitude<a.getWest()||h.longitude>a.getEast()||h.latitude<a.getSouth()||h.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;let a=this._map.project(w),h=this._map.unproject([a.x+100,a.y]),g=w.distanceTo(h)/100,_=2*this._accuracy/g;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ip--,Jf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ip++,Ip>1?(w={maximumAge:6e5,timeout:0},Jf=!0):(w=this.options.positionOptions,Jf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},i.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;let a=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=b.create("button","maplibregl-ctrl-globe",this._container),b.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},i.Hash=ey,i.ImageSource=Sr,i.KeyboardHandler=ny,i.LngLatBounds=Lt,i.LogoControl=YA,i.Map=class extends ZA{constructor(w){var a,h;o.cw.mark(o.cx.create);let g=Object.assign(Object.assign(Object.assign({},Ms),w),{canvasContextAttributes:Object.assign(Object.assign({},Ms.canvasContextAttributes),w.canvasContextAttributes)});if(g.minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let _=new Bn,E=new Go;if(g.minZoom!==void 0&&_.setMinZoom(g.minZoom),g.maxZoom!==void 0&&_.setMaxZoom(g.maxZoom),g.minPitch!==void 0&&_.setMinPitch(g.minPitch),g.maxPitch!==void 0&&_.setMaxPitch(g.maxPitch),g.renderWorldCopies!==void 0&&_.setRenderWorldCopies(g.renderWorldCopies),super(_,E,{bearingSnap:g.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Gl,this._controls=[],this._mapId=o.a7(),this._contextLost=L=>{L.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:L}))},this._contextRestored=L=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:L}))},this._onMapScroll=L=>{if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},g.canvasContextAttributes),this._trackResize=g.trackResize===!0,this._bearingSnap=g.bearingSnap,this._centerClampedToGround=g.centerClampedToGround,this._refreshExpiredTiles=g.refreshExpiredTiles===!0,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions===!0,this._collectResourceTiming=g.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},sa),g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=g.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=U.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let L=!1,k=Xf(B=>{this._trackResize&&!this._removed&&(this.resize(B),this.redraw())},50);this._resizeObserver=new ResizeObserver(B=>{L?k(B):L=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Zb(this,g),this._hash=g.hash&&new ey(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,elevation:g.elevation,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,roll:g.roll}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,o.e({},g.fitBoundsOptions,{duration:0}))));let M=typeof g.style=="string"||((h=(a=g.style)===null||a===void 0?void 0:a.projection)===null||h===void 0?void 0:h.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Kb(typeof g.attributionControl=="boolean"?void 0:g.attributionControl)),g.maplibreLogo&&this.addControl(new YA,g.logoPosition),this.on("style.load",()=>{if(M||this._resizeTransform(),this.transform.unmodified){let L=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(L)}}),this.on("data",L=>{this._update(L.dataType==="style"),this.fire(new o.l(`${L.dataType}data`,L))}),this.on("dataloading",L=>{this.fire(new o.l(`${L.dataType}dataloading`,L))}),this.on("dataabort",L=>{this.fire(new o.l("sourcedataabort",L))})}_getMapId(){return this._mapId}setGlobalStateProperty(w,a){return this.style.setGlobalStateProperty(w,a),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,a){if(a===void 0&&(a=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let h=w.onAdd(this);this._controls.push(w);let g=this._controlPositions[a];return a.indexOf("bottom")!==-1?g.insertBefore(h,g.firstChild):g.appendChild(h),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let a=this._controls.indexOf(w);return a>-1&&this._controls.splice(a,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return xe(this.transform,w)}calculateCameraOptionsFromTo(w,a,h,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,a,h,g)}resize(w,a=!0){let[h,g]=this._containerDimensions(),_=this._getClampedPixelRatio(h,g);if(this._resizeCanvas(h,g,_),this.painter.resize(h,g,_),this.painter.overLimit()){let M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];let L=this._getClampedPixelRatio(h,g);this._resizeCanvas(h,g,L),this.painter.resize(h,g,L)}this._resizeTransform(a);let E=!this._moving;return E&&(this.stop(),this.fire(new o.l("movestart",w)).fire(new o.l("move",w))),this.fire(new o.l("resize",w)),E&&this.fire(new o.l("moveend",w)),this}_resizeTransform(w=!0){var a;let[h,g]=this._containerDimensions();this.transform.resize(h,g,w),(a=this._requestedCameraState)===null||a===void 0||a.resize(h,g,w)}_getClampedPixelRatio(w,a){let{0:h,1:g}=this._maxCanvasSize,_=this.getPixelRatio(),E=w*_,M=a*_;return Math.min(E>h?h/E:1,M>g?g/M:1)*_}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Lt.convert(w)),this._update()}setMinZoom(w){if((w=w==null?-2:w)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w==null?22:w)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w==null?0:w)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w==null?60:w)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(o.S.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(o.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,a,h){if(w==="mouseenter"||w==="mouseover"){let g=!1;return{layers:a,listener:h,delegates:{mousemove:E=>{let M=a.filter(k=>this.getLayer(k)),L=M.length!==0?this.queryRenderedFeatures(E.point,{layers:M}):[];L.length?g||(g=!0,h.call(this,new Ma(w,this,E.originalEvent,{features:L}))):g=!1},mouseout:()=>{g=!1}}}}if(w==="mouseleave"||w==="mouseout"){let g=!1;return{layers:a,listener:h,delegates:{mousemove:M=>{let L=a.filter(k=>this.getLayer(k));(L.length!==0?this.queryRenderedFeatures(M.point,{layers:L}):[]).length?g=!0:g&&(g=!1,h.call(this,new Ma(w,this,M.originalEvent)))},mouseout:M=>{g&&(g=!1,h.call(this,new Ma(w,this,M.originalEvent)))}}}}{let g=_=>{let E=a.filter(L=>this.getLayer(L)),M=E.length!==0?this.queryRenderedFeatures(_.point,{layers:E}):[];M.length&&(_.features=M,h.call(this,_),delete _.features)};return{layers:a,listener:h,delegates:{[w]:g}}}}_saveDelegatedListener(w,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(a)}_removeDelegatedListener(w,a,h){if(!this._delegatedListeners||!this._delegatedListeners[w])return;let g=this._delegatedListeners[w];for(let _=0;_<g.length;_++){let E=g[_];if(E.listener===h&&E.layers.length===a.length&&E.layers.every(M=>a.includes(M))){for(let M in E.delegates)this.off(M,E.delegates[M]);return void g.splice(_,1)}}}on(w,a,h){if(h===void 0)return super.on(w,a);let g=typeof a=="string"?[a]:a,_=this._createDelegatedListener(w,g,h);this._saveDelegatedListener(w,_);for(let E in _.delegates)this.on(E,_.delegates[E]);return{unsubscribe:()=>{this._removeDelegatedListener(w,g,h)}}}once(w,a,h){if(h===void 0)return super.once(w,a);let g=typeof a=="string"?[a]:a,_=this._createDelegatedListener(w,g,h);for(let E in _.delegates){let M=_.delegates[E];_.delegates[E]=(...L)=>{this._removeDelegatedListener(w,g,h),M(...L)}}this._saveDelegatedListener(w,_);for(let E in _.delegates)this.once(E,_.delegates[E]);return this}off(w,a,h){return h===void 0?super.off(w,a):(this._removeDelegatedListener(w,typeof a=="string"?[a]:a,h),this)}queryRenderedFeatures(w,a){if(!this.style)return[];let h,g=w instanceof o.P||Array.isArray(w),_=g?w:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(g?{}:w)||{},_ instanceof o.P||typeof _[0]=="number")h=[o.P.convert(_)];else{let E=o.P.convert(_[0]),M=o.P.convert(_[1]);h=[E,new o.P(M.x,E.y),M,new o.P(E.x,M.y),E]}return this.style.queryRenderedFeatures(h,a,this.transform)}querySourceFeatures(w,a){return this.style.querySourceFeatures(w,a)}setStyle(w,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(w,a))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){let a=this._locale[w];if(a==null)throw new Error(`Missing UI string '${w}'`);return a}_updateStyle(w,a){var h,g;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,a));let _=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new vb(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,a,_):this.style.loadJSON(w,a,_),this):((g=(h=this.style)===null||h===void 0?void 0:h.projection)===null||g===void 0||g.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new vb(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,a){if(typeof w=="string"){let h=this._requestManager.transformRequest(w,"Style");o.j(h,new AbortController).then(g=>{this._updateDiff(g.data,a)}).catch(g=>{g&&this.fire(new o.k(g))})}else typeof w=="object"&&this._updateDiff(w,a)}_updateDiff(w,a){try{this.style.setState(w,a)&&this._update(!0)}catch(h){o.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(w,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(w,a){return this._lazyInitEmptyStyle(),this.style.addSource(w,a),this._update(!0)}isSourceLoaded(w){let a=this.style&&this.style.sourceCaches[w];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){let a=this.style.sourceCaches[w.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&a.reload();for(let h in this.style._layers){let g=this.style._layers[h];g.type==="hillshade"&&g.source===w.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),g.type==="color-relief"&&g.source===w.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lr(this.painter,a,w),this.painter.renderToTexture=new sy(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=h=>{var g;h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((g=h.source)===null||g===void 0?void 0:g.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:w})),this}getTerrain(){var w,a;return(a=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&a!==void 0?a:null}areTilesLoaded(){let w=this.style&&this.style.sourceCaches;for(let a in w){let h=w[a]._tiles;for(let g in h){let _=h[g];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,a,h){if(h){let g=this.getSource(h);if(!g)throw new Error(`There is no source with ID "${h}", cannot set LOD parameters`);g.calculateTileZoom=pe(Math.max(1,w),Math.max(1,a))}else for(let g in this.style.sourceCaches)this.style.sourceCaches[g].getSource().calculateTileZoom=pe(Math.max(1,w),Math.max(1,a));return this._update(!0),this}refreshTiles(w,a){let h=this.style.sourceCaches[w];if(!h)throw new Error(`There is no source cache with ID "${w}", cannot refresh tile`);a===void 0?h.reload(!0):h.refreshTiles(a.map(g=>new o.a4(g.z,g.x,g.y)))}addImage(w,a,h={}){let{pixelRatio:g=1,sdf:_=!1,stretchX:E,stretchY:M,content:L,textFitWidth:k,textFitHeight:B}=h;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:V,height:W,data:H}=a,K=a;return this.style.addImage(w,{data:new o.R({width:V,height:W},new Uint8Array(H)),pixelRatio:g,stretchX:E,stretchY:M,content:L,textFitWidth:k,textFitHeight:B,sdf:_,version:0,userImage:K}),K.onAdd&&K.onAdd(this,w),this}}{let{width:V,height:W,data:H}=x.getImageData(a);this.style.addImage(w,{data:new o.R({width:V,height:W},H),pixelRatio:g,stretchX:E,stretchY:M,content:L,textFitWidth:k,textFitHeight:B,sdf:_,version:0})}}updateImage(w,a){let h=this.style.getImage(w);if(!h)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let g=a instanceof HTMLImageElement||o.b(a)?x.getImageData(a):a,{width:_,height:E,data:M}=g;if(_===void 0||E===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==h.data.width||E!==h.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let L=!(a instanceof HTMLImageElement||o.b(a));return h.data.replace(M,L),this.style.updateImage(w,h),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return U.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,a){return this._lazyInitEmptyStyle(),this.style.addLayer(w,a),this._update(!0)}moveLayer(w,a){return this.style.moveLayer(w,a),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,a,h){return this.style.setLayerZoomRange(w,a,h),this._update(!0)}setFilter(w,a,h={}){return this.style.setFilter(w,a,h),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,a,h,g={}){return this.style.setPaintProperty(w,a,h,g),this._update(!0)}getPaintProperty(w,a){return this.style.getPaintProperty(w,a)}setLayoutProperty(w,a,h,g={}){return this.style.setLayoutProperty(w,a,h,g),this._update(!0)}getLayoutProperty(w,a){return this.style.getLayoutProperty(w,a)}setGlyphs(w,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,a,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,a,h,g=>{g||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,a,h=>{h||this._update(!0)}),this}setLight(w,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,a){return this.style.setFeatureState(w,a),this._update()}removeFeatureState(w,a){return this.style.removeFeatureState(w,a),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,a=0;return this._container&&(w=this._container.clientWidth||400,a=this._container.clientHeight||300),[w,a]}_setupContainer(){let w=this._container;w.classList.add("maplibregl-map");let a=this._canvasContainer=b.create("div","maplibregl-canvas-container",w);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let h=this._containerDimensions(),g=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],g);let _=this._controlContainer=b.create("div","maplibregl-control-container",w),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{E[M]=b.create("div",`maplibregl-ctrl-${M} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,a,h){this._canvas.width=Math.floor(h*w),this._canvas.height=Math.floor(h*a),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${a}px`}_setupPainter(){let w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),a=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{a={requestedAttributes:w},g&&(a.statusMessage=g.statusMessage,a.type=g.type)},{once:!0});let h=null;if(h=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!h){let g="Failed to initialize WebGL";throw a?(a.message=g,new Error(JSON.stringify(a))):new Error(g)}this.painter=new DA(h,this.transform),A.testSupport(h)}migrateProjection(w,a){super.migrateProjection(w,a),this.painter.transform=w,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var a,h,g,_,E;let M=this._idleTriggered?this._fadeDuration:0,L=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let W=this.transform.zoom,H=x.now();this.style.zoomHistory.update(W,H);let K=new o.F(W,{now:H,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),ee=K.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(k=!0,this._crossFadingFactor=ee),this.style.update(K)}let B=((h=this.style.projection)===null||h===void 0?void 0:h.transitionState)>0!==L;(g=this.style.projection)===null||g===void 0||g.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(E=this.style.projection)===null||E===void 0?void 0:E.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||B)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,B),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cw.mark(o.cx.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,o.cw.mark(o.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(let h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();let a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cw.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frame(this._frameRequest,w=>{o.cw.frame(w),this._frameRequest=null;try{this._render(w)}catch(a){if(!o.cy(a)&&!function(h){return h.message===Dm}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return KA}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},i.MapMouseEvent=Ma,i.MapTouchEvent=vp,i.MapWheelEvent=Ub,i.Marker=Tp,i.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{let a=this._map.getZoom(),h=a===this._map.getMaxZoom(),g=a===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,h)=>{let g=this._map._getUIString(`NavigationControl.${h}`);a.title=g,a.setAttribute("aria-label",g)},this.options=o.e({},iF,w),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,a){let h=b.create("button",w,this._container);return h.type="button",h.addEventListener("click",a),h}},i.Popup=class extends o.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Ci(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;let h=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let g=this.options.anchor,_=cy(this.options.offset);if(!g){let M=this._container.offsetWidth,L=this._container.offsetHeight,k;k=h.y+_.bottom.y<L?["top"]:h.y>this._map.transform.height-L?["bottom"]:[],h.x<M/2?k.push("left"):h.x>this._map.transform.width-M/2&&k.push("right"),g=k.length===0?"bottom":k.join("-")}let E=h.add(_[g]);this.options.subpixelPositioning||(E=E.round()),b.setTransform(this._container,`${ly[g]} translate(${E.x}px,${E.y}px)`),Sp(this._container,g,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Qb),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=o.S.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){let a=document.createDocumentFragment(),h=document.createElement("body"),g;for(h.innerHTML=w;g=h.firstChild,g;)a.appendChild(g);return this.setDOMContent(a)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let w=this._container.querySelector(Jb);w&&w.focus()}},i.RasterDEMTileSource=Xt,i.RasterTileSource=$t,i.ScaleControl=class{constructor(w){this._onMove=()=>{uy(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,uy(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},$m),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},i.ScrollZoomHandler=VA,i.Style=vb,i.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=ry,i.TwoFingersTouchRotateHandler=wp,i.TwoFingersTouchZoomHandler=ty,i.TwoFingersTouchZoomRotateHandler=HA,i.VectorTileSource=Pt,i.VideoSource=zr,i.addSourceType=(w,a)=>o._(void 0,void 0,void 0,function*(){if(dr(w))throw new Error(`A source type called "${w}" already exists.`);((h,g)=>{pr[h]=g})(w,a)}),i.clearPrewarmedResources=function(){let w=dt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(We),dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.createTileMesh=mb,i.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return Nn().getRTLTextPluginStatus()},i.getVersion=function(){return ew},i.getWorkerCount=function(){return lt.workerCount},i.getWorkerUrl=function(){return o.a.WORKER_URL},i.importScriptInWorkers=function(w){return Ue().broadcast("IS",w)},i.prewarm=function(){Dt().acquire(We)},i.setMaxParallelImageRequests=function(w){o.a.MAX_PARALLEL_IMAGE_REQUESTS=w},i.setRTLTextPlugin=function(w,a){return Nn().setRTLTextPlugin(w,a)},i.setWorkerCount=function(w){lt.workerCount=w},i.setWorkerUrl=function(w){o.a.WORKER_URL=w}});var n=t;return n})});var TL=R((hYr,VOe)=>{p();var VW=1/0,LHt=17976931348623157e292,NOe=NaN,DHt="[object Symbol]",NHt=/^\s+|\s+$/g,kHt=/^[-+]0x[0-9a-f]+$/i,qHt=/^0b[01]+$/i,FHt=/^0o[0-7]+$/i,jHt=parseInt,zHt=typeof global=="object"&&global&&global.Object===Object&&global,UHt=typeof self=="object"&&self&&self.Object===Object&&self,BHt=zHt||UHt||Function("return this")(),VHt=Object.prototype,GHt=VHt.toString,kOe=BHt.Symbol,$Ht=Math.min,qOe=kOe?kOe.prototype:void 0,FOe=qOe?qOe.toString:void 0;function HHt(t){if(typeof t=="string")return t;if(UOe(t))return FOe?FOe.call(t):"";var e=t+"";return e=="0"&&1/t==-VW?"-0":e}function WHt(t){var e=Math[t];return function(r,n){if(r=BOe(r),n=$Ht(KHt(n),292),n){var i=(zOe(r)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+n));return i=(zOe(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(r)}}function jOe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ZHt(t){return!!t&&typeof t=="object"}function UOe(t){return typeof t=="symbol"||ZHt(t)&&GHt.call(t)==DHt}function YHt(t){if(!t)return t===0?t:0;if(t=BOe(t),t===VW||t===-VW){var e=t<0?-1:1;return e*LHt}return t===t?t:0}function KHt(t){var e=YHt(t),r=e%1;return e===e?r?e-r:e:0}function BOe(t){if(typeof t=="number")return t;if(UOe(t))return NOe;if(jOe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=jOe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(NHt,"");var r=qHt.test(t);return r||FHt.test(t)?jHt(t.slice(2),r?2:8):kHt.test(t)?NOe:+t}function zOe(t){return t==null?"":HHt(t)}var XHt=WHt("round");VOe.exports=XHt});var u2e=R((W9r,l2e)=>{"use strict";p();l2e.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var d2e=R((Y9r,p2e)=>{"use strict";p();var h2e="%[a-f0-9]{2}",c2e=new RegExp("("+h2e+")|([^%]+?)","gi"),f2e=new RegExp("("+h2e+")+","gi");function D8(t,e){try{return[decodeURIComponent(t.join(""))]}catch(i){}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],D8(r),D8(n))}function wKt(t){try{return decodeURIComponent(t)}catch(n){for(var e=t.match(c2e)||[],r=1;r<e.length;r++)t=D8(e,r).join(""),e=t.match(c2e)||[];return t}}function EKt(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=f2e.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(f){var n=wKt(r[0]);n!==r[0]&&(e[r[0]]=n)}r=f2e.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),o=0;o<i.length;o++){var l=i[o];t=t.replace(new RegExp(l,"g"),e[l])}return t}p2e.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return EKt(t)}}});var g2e=R((X9r,m2e)=>{"use strict";p();m2e.exports=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];let r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]}});var y2e=R((J9r,v2e)=>{"use strict";p();v2e.exports=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),o=0;o<n.length;o++){var l=n[o],f=t[l];(i?e.indexOf(l)!==-1:e(l,f,t))&&(r[l]=f)}return r}});var k8=R(Hs=>{"use strict";p();var SKt=u2e(),TKt=d2e(),x2e=g2e(),IKt=y2e(),AKt=t=>t==null,N8=Symbol("encodeFragmentIdentifier");function MKt(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{let i=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[lo(e,t),"[",i,"]"].join("")]:[...r,[lo(e,t),"[",lo(i,t),"]=",lo(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[lo(e,t),"[]"].join("")]:[...r,[lo(e,t),"[]=",lo(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[lo(e,t),":list="].join("")]:[...r,[lo(e,t),":list=",lo(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[lo(r,t),e,lo(i,t)].join("")]:[[n,lo(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,lo(e,t)]:[...r,[lo(e,t),"=",lo(n,t)].join("")]}}function CKt(t){let e;switch(t.arrayFormat){case"index":return(r,n,i)=>{if(e=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!e){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][e[1]]=n};case"bracket":return(r,n,i)=>{if(e=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"colon-list-separator":return(r,n,i)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"comma":case"separator":return(r,n,i)=>{let o=typeof n=="string"&&n.includes(t.arrayFormatSeparator),l=typeof n=="string"&&!o&&Rh(n,t).includes(t.arrayFormatSeparator);n=l?Rh(n,t):n;let f=o||l?n.split(t.arrayFormatSeparator).map(d=>Rh(d,t)):n===null?n:Rh(n,t);i[r]=f};case"bracket-separator":return(r,n,i)=>{let o=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!o){i[r]=n&&Rh(n,t);return}let l=n===null?[]:n.split(t.arrayFormatSeparator).map(f=>Rh(f,t));if(i[r]===void 0){i[r]=l;return}i[r]=[].concat(i[r],l)};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[].concat(i[r],n)}}}function b2e(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function lo(t,e){return e.encode?e.strict?SKt(t):encodeURIComponent(t):t}function Rh(t,e){return e.decode?TKt(t):t}function w2e(t){return Array.isArray(t)?t.sort():typeof t=="object"?w2e(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function E2e(t){let e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function PKt(t){let e="",r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function S2e(t){t=E2e(t);let e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function _2e(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function T2e(t,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),b2e(e.arrayFormatSeparator);let r=CKt(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(let i of t.split("&")){if(i==="")continue;let[o,l]=x2e(e.decode?i.replace(/\+/g," "):i,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?l:Rh(l,e),r(Rh(o,e),l,n)}for(let i of Object.keys(n)){let o=n[i];if(typeof o=="object"&&o!==null)for(let l of Object.keys(o))o[l]=_2e(o[l],e);else n[i]=_2e(o,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,o)=>{let l=n[o];return l&&typeof l=="object"&&!Array.isArray(l)?i[o]=w2e(l):i[o]=l,i},Object.create(null))}Hs.extract=S2e;Hs.parse=T2e;Hs.stringify=(t,e)=>{if(!t)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),b2e(e.arrayFormatSeparator);let r=l=>e.skipNull&&AKt(t[l])||e.skipEmptyString&&t[l]==="",n=MKt(e),i={};for(let l of Object.keys(t))r(l)||(i[l]=t[l]);let o=Object.keys(i);return e.sort!==!1&&o.sort(e.sort),o.map(l=>{let f=t[l];return f===void 0?"":f===null?lo(l,e):Array.isArray(f)?f.length===0&&e.arrayFormat==="bracket-separator"?lo(l,e)+"[]":f.reduce(n(l),[]).join("&"):lo(l,e)+"="+lo(f,e)}).filter(l=>l.length>0).join("&")};Hs.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[r,n]=x2e(t,"#");return Object.assign({url:r.split("?")[0]||"",query:T2e(S2e(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Rh(n,e)}:{})};Hs.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0,[N8]:!0},e);let r=E2e(t.url).split("?")[0]||"",n=Hs.extract(t.url),i=Hs.parse(n,{sort:!1}),o=Object.assign(i,t.query),l=Hs.stringify(o,e);l&&(l=`?${l}`);let f=PKt(t.url);return t.fragmentIdentifier&&(f=`#${e[N8]?lo(t.fragmentIdentifier,e):t.fragmentIdentifier}`),`${r}${l}${f}`};Hs.pick=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[N8]:!1},r);let{url:n,query:i,fragmentIdentifier:o}=Hs.parseUrl(t,r);return Hs.stringifyUrl({url:n,query:IKt(i,e),fragmentIdentifier:o},r)};Hs.exclude=(t,e,r)=>{let n=Array.isArray(e)?i=>!e.includes(i):(i,o)=>!e(i,o);return Hs.pick(t,n,r)}});var R2e=R((vKr,P2e)=>{"use strict";p();var RKt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";P2e.exports=RKt});var N2e=R((_Kr,D2e)=>{"use strict";p();var OKt=R2e();function O2e(){}function L2e(){}L2e.resetWarningCache=O2e;D2e.exports=function(){function t(n,i,o,l,f,d){if(d!==OKt){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:L2e,resetWarningCache:O2e};return r.PropTypes=r,r}});var an=R((EKr,k2e)=>{p();k2e.exports=N2e()();var bKr,wKr});var O0=R((VKr,B2e)=>{p();var DKt=B2e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=DKt)});var df=R(($Kr,V2e)=>{p();var NKt=V2e.exports={version:"2.6.12"};typeof __e=="number"&&(__e=NKt)});var $2e=R((WKr,G2e)=>{p();G2e.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}});var c2=R((YKr,H2e)=>{p();var kKt=$2e();H2e.exports=function(t,e,r){if(kKt(t),e===void 0)return t;switch(r){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}});var eT=R((XKr,W2e)=>{p();W2e.exports=function(t){return typeof t=="object"?t!==null:typeof t=="function"}});var L0=R((JKr,Z2e)=>{p();var qKt=eT();Z2e.exports=function(t){if(!qKt(t))throw TypeError(t+" is not an object!");return t}});var f2=R((t7r,Y2e)=>{p();Y2e.exports=function(t){try{return!!t()}catch(e){return!0}}});var zd=R((n7r,K2e)=>{p();K2e.exports=!f2()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var j8=R((o7r,Q2e)=>{p();var X2e=eT(),F8=O0().document,FKt=X2e(F8)&&X2e(F8.createElement);Q2e.exports=function(t){return FKt?F8.createElement(t):{}}});var z8=R((s7r,J2e)=>{p();J2e.exports=!zd()&&!f2()(function(){return Object.defineProperty(j8()("div"),"a",{get:function(){return 7}}).a!=7})});var U8=R((u7r,eDe)=>{p();var h2=eT();eDe.exports=function(t,e){if(!h2(t))return t;var r,n;if(e&&typeof(r=t.toString)=="function"&&!h2(n=r.call(t))||typeof(r=t.valueOf)=="function"&&!h2(n=r.call(t))||!e&&typeof(r=t.toString)=="function"&&!h2(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}});var tT=R(rDe=>{p();var tDe=L0(),jKt=z8(),zKt=U8(),UKt=Object.defineProperty;rDe.f=zd()?Object.defineProperty:function(e,r,n){if(tDe(e),r=zKt(r,!0),tDe(n),jKt)try{return UKt(e,r,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[r]=n.value),e}});var rT=R((p7r,nDe)=>{p();nDe.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}});var nT=R((m7r,iDe)=>{p();var BKt=tT(),VKt=rT();iDe.exports=zd()?function(t,e,r){return BKt.f(t,e,VKt(1,r))}:function(t,e,r){return t[e]=r,t}});var D0=R((v7r,oDe)=>{p();var GKt={}.hasOwnProperty;oDe.exports=function(t,e){return GKt.call(t,e)}});var Ud=R((_7r,sDe)=>{p();var p2=O0(),B8=df(),aDe=c2(),$Kt=nT(),HKt=D0(),d2="prototype",ja=function(t,e,r){var n=t&ja.F,i=t&ja.G,o=t&ja.S,l=t&ja.P,f=t&ja.B,d=t&ja.W,v=i?B8:B8[e]||(B8[e]={}),x=v[d2],b=i?p2:o?p2[e]:(p2[e]||{})[d2],A,P,N;i&&(r=e);for(A in r)P=!n&&b&&b[A]!==void 0,!(P&&HKt(v,A))&&(N=P?b[A]:r[A],v[A]=i&&typeof b[A]!="function"?r[A]:f&&P?aDe(N,p2):d&&b[A]==N?function(j){var D=function(F,U,$){if(this instanceof j){switch(arguments.length){case 0:return new j;case 1:return new j(F);case 2:return new j(F,U)}return new j(F,U,$)}return j.apply(this,arguments)};return D[d2]=j[d2],D}(N):l&&typeof N=="function"?aDe(Function.call,N):N,l&&((v.virtual||(v.virtual={}))[A]=N,t&ja.R&&x&&!x[A]&&$Kt(x,A,N)))};ja.F=1;ja.G=2;ja.S=4;ja.P=8;ja.B=16;ja.W=32;ja.U=64;ja.R=128;sDe.exports=ja});var V8=R((b7r,lDe)=>{p();var WKt={}.toString;lDe.exports=function(t){return WKt.call(t).slice(8,-1)}});var G8=R((E7r,uDe)=>{p();var ZKt=V8();uDe.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return ZKt(t)=="String"?t.split(""):Object(t)}});var m2=R((T7r,cDe)=>{p();cDe.exports=function(t){if(t==null)throw TypeError("Can't call method on  "+t);return t}});var iT=R((A7r,fDe)=>{p();var YKt=G8(),KKt=m2();fDe.exports=function(t){return YKt(KKt(t))}});var g2=R((C7r,hDe)=>{p();var XKt=Math.ceil,QKt=Math.floor;hDe.exports=function(t){return isNaN(t=+t)?0:(t>0?QKt:XKt)(t)}});var $8=R((R7r,pDe)=>{p();var JKt=g2(),e7t=Math.min;pDe.exports=function(t){return t>0?e7t(JKt(t),9007199254740991):0}});var mDe=R((L7r,dDe)=>{p();var t7t=g2(),r7t=Math.max,n7t=Math.min;dDe.exports=function(t,e){return t=t7t(t),t<0?r7t(t+e,0):n7t(t,e)}});var vDe=R((N7r,gDe)=>{p();var i7t=iT(),o7t=$8(),a7t=mDe();gDe.exports=function(t){return function(e,r,n){var i=i7t(e),o=o7t(i.length),l=a7t(n,o),f;if(t&&r!=r){for(;o>l;)if(f=i[l++],f!=f)return!0}else for(;o>l;l++)if((t||l in i)&&i[l]===r)return t||l||0;return!t&&-1}}});var H8=R((q7r,yDe)=>{p();yDe.exports=!0});var W8=R((j7r,wDe)=>{p();var s7t=df(),_De=O0(),xDe="__core-js_shared__",bDe=_De[xDe]||(_De[xDe]={});(wDe.exports=function(t,e){return bDe[t]||(bDe[t]=e!==void 0?e:{})})("versions",[]).push({version:s7t.version,mode:H8()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var Z8=R((U7r,EDe)=>{p();var l7t=0,u7t=Math.random();EDe.exports=function(t){return"Symbol(".concat(t===void 0?"":t,")_",(++l7t+u7t).toString(36))}});var v2=R((V7r,TDe)=>{p();var SDe=W8()("keys"),c7t=Z8();TDe.exports=function(t){return SDe[t]||(SDe[t]=c7t(t))}});var MDe=R(($7r,ADe)=>{p();var IDe=D0(),f7t=iT(),h7t=vDe()(!1),p7t=v2()("IE_PROTO");ADe.exports=function(t,e){var r=f7t(t),n=0,i=[],o;for(o in r)o!=p7t&&IDe(r,o)&&i.push(o);for(;e.length>n;)IDe(r,o=e[n++])&&(~h7t(i,o)||i.push(o));return i}});var Y8=R((W7r,CDe)=>{p();CDe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var y2=R((Y7r,PDe)=>{p();var d7t=MDe(),m7t=Y8();PDe.exports=Object.keys||function(e){return d7t(e,m7t)}});var ODe=R(RDe=>{p();RDe.f=Object.getOwnPropertySymbols});var _2=R(LDe=>{p();LDe.f={}.propertyIsEnumerable});var x2=R((tXr,DDe)=>{p();var g7t=m2();DDe.exports=function(t){return Object(g7t(t))}});var qDe=R((nXr,kDe)=>{"use strict";p();var v7t=zd(),NDe=y2(),y7t=ODe(),_7t=_2(),x7t=x2(),b7t=G8(),b2=Object.assign;kDe.exports=!b2||f2()(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(i){e[i]=i}),b2({},t)[r]!=7||Object.keys(b2({},e)).join("")!=n})?function(e,r){for(var n=x7t(e),i=arguments.length,o=1,l=y7t.f,f=_7t.f;i>o;)for(var d=b7t(arguments[o++]),v=l?NDe(d).concat(l(d)):NDe(d),x=v.length,b=0,A;x>b;)A=v[b++],(!v7t||f.call(d,A))&&(n[A]=d[A]);return n}:b2});var FDe=R(()=>{p();var K8=Ud();K8(K8.S+K8.F,"Object",{assign:qDe()})});var zDe=R((lXr,jDe)=>{p();FDe();jDe.exports=df().Object.assign});var BDe=R((hXr,UDe)=>{p();var w7t=tT(),E7t=L0(),S7t=y2();UDe.exports=zd()?Object.defineProperties:function(e,r){E7t(e);for(var n=S7t(r),i=n.length,o=0,l;i>o;)w7t.f(e,l=n[o++],r[l]);return e}});var $De=R((dXr,GDe)=>{p();var VDe=O0().document;GDe.exports=VDe&&VDe.documentElement});var eZ=R((gXr,WDe)=>{p();var T7t=L0(),I7t=BDe(),HDe=Y8(),A7t=v2()("IE_PROTO"),Q8=function(){},J8="prototype",w2=function(){var t=j8()("iframe"),e=HDe.length,r="<",n=">",i;for(t.style.display="none",$De().appendChild(t),t.src="javascript:",i=t.contentWindow.document,i.open(),i.write(r+"script"+n+"document.F=Object"+r+"/script"+n),i.close(),w2=i.F;e--;)delete w2[J8][HDe[e]];return w2()};WDe.exports=Object.create||function(e,r){var n;return e!==null?(Q8[J8]=T7t(e),n=new Q8,Q8[J8]=null,n[A7t]=e):n=w2(),r===void 0?n:I7t(n,r)}});var YDe=R(()=>{p();var ZDe=Ud();ZDe(ZDe.S,"Object",{create:eZ()})});var XDe=R((bXr,KDe)=>{p();YDe();var M7t=df().Object;KDe.exports=function(e,r){return M7t.create(e,r)}});var eNe=R(JDe=>{p();var C7t=_2(),P7t=rT(),R7t=iT(),O7t=U8(),L7t=D0(),D7t=z8(),QDe=Object.getOwnPropertyDescriptor;JDe.f=zd()?QDe:function(e,r){if(e=R7t(e),r=O7t(r,!0),D7t)try{return QDe(e,r)}catch(n){}if(L7t(e,r))return P7t(!C7t.f.call(e,r),e[r])}});var nNe=R((TXr,rNe)=>{p();var N7t=eT(),k7t=L0(),tNe=function(t,e){if(k7t(t),!N7t(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};rNe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=c2()(Function.call,eNe().f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(i,o){return tNe(i,o),e?i.__proto__=o:r(i,o),i}}({},!1):void 0),check:tNe}});var oNe=R(()=>{p();var iNe=Ud();iNe(iNe.S,"Object",{setPrototypeOf:nNe().set})});var sNe=R((PXr,aNe)=>{p();oNe();aNe.exports=df().Object.setPrototypeOf});var pi=R((jXr,S2)=>{p();(function(){"use strict";var t={}.hasOwnProperty;function e(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=n(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return e.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)t.call(i,l)&&i[l]&&(o=n(o,l));return o}function n(i,o){return o?i?i+" "+o:i+o:i}typeof S2!="undefined"&&S2.exports?(e.default=e,S2.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var T2=R(($Xr,uNe)=>{"use strict";p();var q7t=function(t,e,r,n,i,o,l,f){if(!t){var d;if(e===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=[r,n,i,o,l,f],x=0;d=new Error(e.replace(/%s/g,function(){return v[x++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};uNe.exports=q7t});var oZ=R(iZ=>{"use strict";p();Object.defineProperty(iZ,"__esModule",{value:!0});function dNe(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function mNe(t){function e(r){var n=this.constructor.getDerivedStateFromProps(t,r);return n!=null?n:null}this.setState(e.bind(this))}function gNe(t,e){try{var r=this.props,n=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}dNe.__suppressDeprecationWarning=!0;mNe.__suppressDeprecationWarning=!0;gNe.__suppressDeprecationWarning=!0;function j7t(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var r=null,n=null,i=null;if(typeof e.componentWillMount=="function"?r="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var o=t.displayName||t.name,l=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+l+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=dNe,e.componentWillReceiveProps=mNe),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=gNe;var f=e.componentDidUpdate;e.componentDidUpdate=function(v,x,b){var A=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:b;f.call(this,v,x,A)}}return t}iZ.polyfill=j7t});var aZ=R((yQr,_Ne)=>{p();var U7t=zd(),B7t=y2(),V7t=iT(),G7t=_2().f;_Ne.exports=function(t){return function(e){for(var r=V7t(e),n=B7t(r),i=n.length,o=0,l=[],f;i>o;)f=n[o++],(!U7t||G7t.call(r,f))&&l.push(t?[f,r[f]]:r[f]);return l}}});var bNe=R(()=>{p();var xNe=Ud(),$7t=aZ()(!0);xNe(xNe.S,"Object",{entries:function(e){return $7t(e)}})});var ENe=R((EQr,wNe)=>{p();bNe();wNe.exports=df().Object.entries});var sZ=R((TQr,SNe)=>{p();SNe.exports=ENe()});var lT=R((M2,PNe)=>{"use strict";p();Object.defineProperty(M2,"__esModule",{value:!0});M2.default=eXt;function eXt(t){function e(n,i,o,l,f,d){var v=l||"<<anonymous>>",x=d||o;if(i[o]==null)return n?new Error("Required "+f+" `"+x+"` was not specified "+("in `"+v+"`.")):null;for(var b=arguments.length,A=Array(b>6?b-6:0),P=6;P<b;P++)A[P-6]=arguments[P];return t.apply(void 0,[i,o,v,f,x].concat(A))}var r=e.bind(null,!1);return r.isRequired=e.bind(null,!0),r}PNe.exports=M2.default});var DNe=R(()=>{p();var LNe=Ud(),tXt=aZ()(!1);LNe(LNe.S,"Object",{values:function(e){return tXt(e)}})});var kNe=R((VQr,NNe)=>{p();DNe();NNe.exports=df().Object.values});var FNe=R(($Qr,qNe)=>{p();qNe.exports=kNe()});var UNe=R(Zn=>{"use strict";p();var ea=typeof Symbol=="function"&&Symbol.for,dZ=ea?Symbol.for("react.element"):60103,mZ=ea?Symbol.for("react.portal"):60106,P2=ea?Symbol.for("react.fragment"):60107,R2=ea?Symbol.for("react.strict_mode"):60108,O2=ea?Symbol.for("react.profiler"):60114,L2=ea?Symbol.for("react.provider"):60109,D2=ea?Symbol.for("react.context"):60110,gZ=ea?Symbol.for("react.async_mode"):60111,N2=ea?Symbol.for("react.concurrent_mode"):60111,k2=ea?Symbol.for("react.forward_ref"):60112,q2=ea?Symbol.for("react.suspense"):60113,iXt=ea?Symbol.for("react.suspense_list"):60120,F2=ea?Symbol.for("react.memo"):60115,j2=ea?Symbol.for("react.lazy"):60116,oXt=ea?Symbol.for("react.block"):60121,aXt=ea?Symbol.for("react.fundamental"):60117,sXt=ea?Symbol.for("react.responder"):60118,lXt=ea?Symbol.for("react.scope"):60119;function Ml(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case dZ:switch(t=t.type,t){case gZ:case N2:case P2:case O2:case R2:case q2:return t;default:switch(t=t&&t.$$typeof,t){case D2:case k2:case j2:case F2:case L2:return t;default:return e}}case mZ:return e}}}function zNe(t){return Ml(t)===N2}Zn.AsyncMode=gZ;Zn.ConcurrentMode=N2;Zn.ContextConsumer=D2;Zn.ContextProvider=L2;Zn.Element=dZ;Zn.ForwardRef=k2;Zn.Fragment=P2;Zn.Lazy=j2;Zn.Memo=F2;Zn.Portal=mZ;Zn.Profiler=O2;Zn.StrictMode=R2;Zn.Suspense=q2;Zn.isAsyncMode=function(t){return zNe(t)||Ml(t)===gZ};Zn.isConcurrentMode=zNe;Zn.isContextConsumer=function(t){return Ml(t)===D2};Zn.isContextProvider=function(t){return Ml(t)===L2};Zn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===dZ};Zn.isForwardRef=function(t){return Ml(t)===k2};Zn.isFragment=function(t){return Ml(t)===P2};Zn.isLazy=function(t){return Ml(t)===j2};Zn.isMemo=function(t){return Ml(t)===F2};Zn.isPortal=function(t){return Ml(t)===mZ};Zn.isProfiler=function(t){return Ml(t)===O2};Zn.isStrictMode=function(t){return Ml(t)===R2};Zn.isSuspense=function(t){return Ml(t)===q2};Zn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===P2||t===N2||t===O2||t===R2||t===q2||t===iXt||typeof t=="object"&&t!==null&&(t.$$typeof===j2||t.$$typeof===F2||t.$$typeof===L2||t.$$typeof===D2||t.$$typeof===k2||t.$$typeof===aXt||t.$$typeof===sXt||t.$$typeof===lXt||t.$$typeof===oXt)};Zn.typeOf=Ml});var VNe=R((eJr,BNe)=>{"use strict";p();BNe.exports=UNe()});var Lh=R((z2,$Ne)=>{"use strict";p();Object.defineProperty(z2,"__esModule",{value:!0});var uXt=Et(),cXt=GNe(uXt),fXt=VNe(),hXt=lT(),pXt=GNe(hXt);function GNe(t){return t&&t.__esModule?t:{default:t}}function dXt(t,e,r,n,i){var o=t[e];return cXt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,fXt.isValidElementType)(o)?null:new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}z2.default=(0,pXt.default)(dXt);$Ne.exports=z2.default});var V2=R((B2,KNe)=>{"use strict";p();Object.defineProperty(B2,"__esModule",{value:!0});B2.default=EXt;var xXt=lT(),bXt=wXt(xXt);function wXt(t){return t&&t.__esModule?t:{default:t}}function EXt(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];function n(){for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];var f=null;return e.forEach(function(d){if(f==null){var v=d.apply(void 0,o);v!=null&&(f=v)}}),f}return(0,bXt.default)(n)}KNe.exports=B2.default});var TZ=R((DJr,nke)=>{"use strict";p();var AXt=function(){};nke.exports=AXt});var Ua=R((kJr,cT)=>{p();function MXt(t){return t&&t.__esModule?t:{default:t}}cT.exports=MXt,cT.exports.__esModule=!0,cT.exports.default=cT.exports});var oke=R(($2,ike)=>{"use strict";p();$2.__esModule=!0;$2.default=PXt;var CXt=/-(.)/g;function PXt(t){return t.replace(CXt,function(e,r){return r.toUpperCase()})}ike.exports=$2.default});var IZ=R((H2,ake)=>{"use strict";p();var RXt=Ua();H2.__esModule=!0;H2.default=DXt;var OXt=RXt(oke()),LXt=/^-ms-/;function DXt(t){return(0,OXt.default)(t.replace(LXt,"ms-"))}ake.exports=H2.default});var lke=R((W2,ske)=>{"use strict";p();W2.__esModule=!0;W2.default=kXt;var NXt=/([A-Z])/g;function kXt(t){return t.replace(NXt,"-$1").toLowerCase()}ske.exports=W2.default});var cke=R((Z2,uke)=>{"use strict";p();var qXt=Ua();Z2.__esModule=!0;Z2.default=zXt;var FXt=qXt(lke()),jXt=/^ms-/;function zXt(t){return(0,FXt.default)(t).replace(jXt,"-ms-")}uke.exports=Z2.default});var hke=R((Y2,fke)=>{"use strict";p();var UXt=Ua();Y2.__esModule=!0;Y2.default=$Xt;var BXt=UXt(IZ()),VXt=/^(top|right|bottom|left)$/,GXt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function $Xt(t){if(!t)throw new TypeError("No Element passed to `getComputedStyle()`");var e=t.ownerDocument;return"defaultView"in e?e.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):window.getComputedStyle(t,null):{getPropertyValue:function(n){var i=t.style;n=(0,BXt.default)(n),n=="float"&&(n="styleFloat");var o=t.currentStyle[n]||null;if(o==null&&i&&i[n]&&(o=i[n]),GXt.test(o)&&!VXt.test(n)){var l=i.left,f=t.runtimeStyle,d=f&&f.left;d&&(f.left=t.currentStyle.left),i.left=n==="fontSize"?"1em":o,o=i.pixelLeft+"px",i.left=l,d&&(f.left=d)}return o}}}fke.exports=Y2.default});var dke=R((K2,pke)=>{"use strict";p();K2.__esModule=!0;K2.default=HXt;function HXt(t,e){return"removeProperty"in t.style?t.style.removeProperty(e):t.style.removeAttribute(e)}pke.exports=K2.default});var gf=R((fT,mke)=>{"use strict";p();fT.__esModule=!0;fT.default=void 0;var WXt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);fT.default=WXt;mke.exports=fT.default});var bke=R(cn=>{"use strict";p();var ZXt=Ua();cn.__esModule=!0;cn.default=cn.animationEnd=cn.animationDelay=cn.animationTiming=cn.animationDuration=cn.animationName=cn.transitionEnd=cn.transitionDuration=cn.transitionDelay=cn.transitionTiming=cn.transitionProperty=cn.transform=void 0;var YXt=ZXt(gf()),Q2="transform";cn.transform=Q2;var vf,AZ,gke;cn.animationEnd=gke;cn.transitionEnd=AZ;var MZ,CZ,PZ,RZ;cn.transitionDelay=RZ;cn.transitionTiming=PZ;cn.transitionDuration=CZ;cn.transitionProperty=MZ;var vke,yke,_ke,xke;cn.animationDelay=xke;cn.animationTiming=_ke;cn.animationDuration=yke;cn.animationName=vke;YXt.default&&(X2=XXt(),vf=X2.prefix,cn.transitionEnd=AZ=X2.transitionEnd,cn.animationEnd=gke=X2.animationEnd,cn.transform=Q2=vf+"-"+Q2,cn.transitionProperty=MZ=vf+"-transition-property",cn.transitionDuration=CZ=vf+"-transition-duration",cn.transitionDelay=RZ=vf+"-transition-delay",cn.transitionTiming=PZ=vf+"-transition-timing-function",cn.animationName=vke=vf+"-animation-name",cn.animationDuration=yke=vf+"-animation-duration",cn.animationTiming=_ke=vf+"-animation-delay",cn.animationDelay=xke=vf+"-animation-timing-function");var X2,KXt={transform:Q2,end:AZ,property:MZ,timing:PZ,delay:RZ,duration:CZ};cn.default=KXt;function XXt(){for(var t=document.createElement("div").style,e={O:function(v){return"o"+v.toLowerCase()},Moz:function(v){return v.toLowerCase()},Webkit:function(v){return"webkit"+v},ms:function(v){return"MS"+v}},r=Object.keys(e),n,i,o="",l=0;l<r.length;l++){var f=r[l];if(f+"TransitionProperty"in t){o="-"+f.toLowerCase(),n=e[f]("TransitionEnd"),i=e[f]("AnimationEnd");break}}return!n&&"transitionProperty"in t&&(n="transitionend"),!i&&"animationName"in t&&(i="animationend"),t=null,{animationEnd:i,transitionEnd:n,prefix:o}}});var Eke=R((J2,wke)=>{"use strict";p();J2.__esModule=!0;J2.default=JXt;var QXt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function JXt(t){return!!(t&&QXt.test(t))}wke.exports=J2.default});var Tke=R((eD,Ske)=>{"use strict";p();var hT=Ua();eD.__esModule=!0;eD.default=oQt;var eQt=hT(IZ()),OZ=hT(cke()),tQt=hT(hke()),rQt=hT(dke()),nQt=bke(),iQt=hT(Eke());function oQt(t,e,r){var n="",i="",o=e;if(typeof e=="string"){if(r===void 0)return t.style[(0,eQt.default)(e)]||(0,tQt.default)(t).getPropertyValue((0,OZ.default)(e));(o={})[e]=r}Object.keys(o).forEach(function(l){var f=o[l];!f&&f!==0?(0,rQt.default)(t,(0,OZ.default)(l)):(0,iQt.default)(l)?i+=l+"("+f+") ":n+=(0,OZ.default)(l)+": "+f+";"}),i&&(n+=nQt.transform+": "+i+";"),t.style.cssText+=";"+n}Ske.exports=eD.default});var Ike=R(z0=>{"use strict";p();z0.__esModule=!0;z0.classNamesShape=z0.timeoutsShape=void 0;var YJr=aQt(an());function aQt(t){return t&&t.__esModule?t:{default:t}}var sQt=null;z0.timeoutsShape=sQt;var lQt=null;z0.classNamesShape=lQt});var Mke=R(Zs=>{"use strict";p();Zs.__esModule=!0;Zs.default=Zs.EXITING=Zs.ENTERED=Zs.ENTERING=Zs.EXITED=Zs.UNMOUNTED=void 0;var uQt=hQt(an()),LZ=Ake(Et()),cQt=Ake(No()),fQt=oZ(),QJr=Ike();function Ake(t){return t&&t.__esModule?t:{default:t}}function hQt(t){if(t&&t.__esModule)return t;var e={};if(t!=null){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}}return e.default=t,e}function pQt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function dQt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var pT="unmounted";Zs.UNMOUNTED=pT;var ev="exited";Zs.EXITED=ev;var tv="entering";Zs.ENTERING=tv;var B0="entered";Zs.ENTERED=B0;var DZ="exiting";Zs.EXITING=DZ;var yf=function(t){dQt(e,t);function e(n,i){var o;o=t.call(this,n,i)||this;var l=i.transitionGroup,f=l&&!l.isMounting?n.enter:n.appear,d;return o.appearStatus=null,n.in?f?(d=ev,o.appearStatus=tv):d=B0:n.unmountOnExit||n.mountOnEnter?d=pT:d=ev,o.state={status:d},o.nextCallback=null,o}var r=e.prototype;return r.getChildContext=function(){return{transitionGroup:null}},e.getDerivedStateFromProps=function(i,o){var l=i.in;return l&&o.status===pT?{status:ev}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==tv&&l!==B0&&(o=tv):(l===tv||l===B0)&&(o=DZ)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,l,f;return o=l=f=i,i!=null&&typeof i!="number"&&(o=i.exit,l=i.enter,f=i.appear!==void 0?i.appear:l),{exit:o,enter:l,appear:f}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null){this.cancelNextCallback();var l=cQt.default.findDOMNode(this);o===tv?this.performEnter(l,i):this.performExit(l)}else this.props.unmountOnExit&&this.state.status===ev&&this.setState({status:pT})},r.performEnter=function(i,o){var l=this,f=this.props.enter,d=this.context.transitionGroup?this.context.transitionGroup.isMounting:o,v=this.getTimeouts(),x=d?v.appear:v.enter;if(!o&&!f){this.safeSetState({status:B0},function(){l.props.onEntered(i)});return}this.props.onEnter(i,d),this.safeSetState({status:tv},function(){l.props.onEntering(i,d),l.onTransitionEnd(i,x,function(){l.safeSetState({status:B0},function(){l.props.onEntered(i,d)})})})},r.performExit=function(i){var o=this,l=this.props.exit,f=this.getTimeouts();if(!l){this.safeSetState({status:ev},function(){o.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:DZ},function(){o.props.onExiting(i),o.onTransitionEnd(i,f.exit,function(){o.safeSetState({status:ev},function(){o.props.onExited(i)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,l=!0;return this.nextCallback=function(f){l&&(l=!1,o.nextCallback=null,i(f))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(i,o,l){this.setNextCallback(l);var f=o==null&&!this.props.addEndListener;if(!i||f){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(i,this.nextCallback),o!=null&&setTimeout(this.nextCallback,o)},r.render=function(){var i=this.state.status;if(i===pT)return null;var o=this.props,l=o.children,f=pQt(o,["children"]);if(delete f.in,delete f.mountOnEnter,delete f.unmountOnExit,delete f.appear,delete f.enter,delete f.exit,delete f.timeout,delete f.addEndListener,delete f.onEnter,delete f.onEntering,delete f.onEntered,delete f.onExit,delete f.onExiting,delete f.onExited,typeof l=="function")return l(i,f);var d=LZ.default.Children.only(l);return LZ.default.cloneElement(d,f)},e}(LZ.default.Component);yf.contextTypes={transitionGroup:uQt.object};yf.childContextTypes={transitionGroup:function(){}};yf.propTypes={};function U0(){}yf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:U0,onEntering:U0,onEntered:U0,onExit:U0,onExiting:U0,onExited:U0};yf.UNMOUNTED=0;yf.EXITED=1;yf.ENTERING=2;yf.ENTERED=3;yf.EXITING=4;var mQt=(0,fQt.polyfill)(yf);Zs.default=mQt});var dT=R((tD,Cke)=>{"use strict";p();tD.__esModule=!0;tD.default=gQt;function gQt(t){return t&&t.ownerDocument||document}Cke.exports=tD.default});var NZ=R((rD,Pke)=>{"use strict";p();var vQt=Ua();rD.__esModule=!0;rD.default=_Qt;var yQt=vQt(dT());function _Qt(t){t===void 0&&(t=(0,yQt.default)());try{return t.activeElement}catch(e){}}Pke.exports=rD.default});var gT=R((mT,Oke)=>{"use strict";p();var xQt=Ua();mT.__esModule=!0;mT.default=void 0;var bQt=xQt(gf()),wQt=function(){return bQt.default?function(t,e){return t.contains?t.contains(e):t.compareDocumentPosition?t===e||!!(t.compareDocumentPosition(e)&16):Rke(t,e)}:Rke}();mT.default=wQt;function Rke(t,e){if(e)do if(e===t)return!0;while(e=e.parentNode);return!1}Oke.exports=mT.default});var qZ=R((rv,Nke)=>{p();function Lke(t){if(t&&typeof t=="object"){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if(typeof t=="number")return Dke[t];var r=String(t),n=Nh[r.toLowerCase()];if(n)return n;var n=nD[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}Lke.isEventKey=function(e,r){if(e&&typeof e=="object"){var n=e.which||e.keyCode||e.charCode;if(n==null)return!1;if(typeof r=="string"){var i=Nh[r.toLowerCase()];if(i)return i===n;var i=nD[r.toLowerCase()];if(i)return i===n}else if(typeof r=="number")return r===n;return!1}};rv=Nke.exports=Lke;var Nh=rv.code=rv.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},nD=rv.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(zi=97;zi<123;zi++)Nh[String.fromCharCode(zi)]=zi-32;for(zi=48;zi<58;zi++)Nh[zi-48]=zi;var zi;for(zi=1;zi<13;zi++)Nh["f"+zi]=zi+111;for(zi=0;zi<10;zi++)Nh["numpad "+zi]=zi+96;var Dke=rv.names=rv.title={};for(zi in Nh)Dke[Nh[zi]]=zi;for(kZ in nD)Nh[kZ]=nD[kZ];var kZ});var qke=R((iD,kke)=>{"use strict";p();Object.defineProperty(iD,"__esModule",{value:!0});iD.default=EQt;function EQt(t){return function(r,n,i,o,l){var f=i||"<<anonymous>>",d=l||n;if(r[n]==null)return new Error("The "+o+" `"+d+"` is required to make "+("`"+f+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var v=arguments.length,x=Array(v>5?v-5:0),b=5;b<v;b++)x[b-5]=arguments[b];return t.apply(void 0,[r,n,i,o,l].concat(x))}}kke.exports=iD.default});var jke=R((aen,Fke)=>{p();var SQt=g2(),TQt=m2();Fke.exports=function(t){return function(e,r){var n=String(TQt(e)),i=SQt(r),o=n.length,l,f;return i<0||i>=o?t?"":void 0:(l=n.charCodeAt(i),l<55296||l>56319||i+1===o||(f=n.charCodeAt(i+1))<56320||f>57343?t?n.charAt(i):l:t?n.slice(i,i+2):(l-55296<<10)+(f-56320)+65536)}}});var Uke=R((len,zke)=>{p();zke.exports=nT()});var oD=R((cen,Bke)=>{p();Bke.exports={}});var Vd=R((hen,Gke)=>{p();var FZ=W8()("wks"),IQt=Z8(),jZ=O0().Symbol,Vke=typeof jZ=="function",AQt=Gke.exports=function(t){return FZ[t]||(FZ[t]=Vke&&jZ[t]||(Vke?jZ:IQt)("Symbol."+t))};AQt.store=FZ});var zZ=R((den,Hke)=>{p();var MQt=tT().f,CQt=D0(),$ke=Vd()("toStringTag");Hke.exports=function(t,e,r){t&&!CQt(t=r?t:t.prototype,$ke)&&MQt(t,$ke,{configurable:!0,value:e})}});var Yke=R((gen,Zke)=>{"use strict";p();var PQt=eZ(),RQt=rT(),OQt=zZ(),Wke={};nT()(Wke,Vd()("iterator"),function(){return this});Zke.exports=function(t,e,r){t.prototype=PQt(Wke,{next:RQt(1,r)}),OQt(t,e+" Iterator")}});var Qke=R((yen,Xke)=>{p();var LQt=D0(),DQt=x2(),Kke=v2()("IE_PROTO"),NQt=Object.prototype;Xke.exports=Object.getPrototypeOf||function(t){return t=DQt(t),LQt(t,Kke)?t[Kke]:typeof t.constructor=="function"&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?NQt:null}});var oqe=R((xen,iqe)=>{"use strict";p();var Jke=H8(),UZ=Ud(),kQt=Uke(),eqe=nT(),tqe=oD(),qQt=Yke(),FQt=zZ(),jQt=Qke(),vT=Vd()("iterator"),BZ=!([].keys&&"next"in[].keys()),zQt="@@iterator",rqe="keys",aD="values",nqe=function(){return this};iqe.exports=function(t,e,r,n,i,o,l){qQt(r,e,n);var f=function($){if(!BZ&&$ in b)return b[$];switch($){case rqe:return function(){return new r(this,$)};case aD:return function(){return new r(this,$)}}return function(){return new r(this,$)}},d=e+" Iterator",v=i==aD,x=!1,b=t.prototype,A=b[vT]||b[zQt]||i&&b[i],P=A||f(i),N=i?v?f("entries"):P:void 0,j=e=="Array"&&b.entries||A,D,F,U;if(j&&(U=jQt(j.call(new t)),U!==Object.prototype&&U.next&&(FQt(U,d,!0),!Jke&&typeof U[vT]!="function"&&eqe(U,vT,nqe))),v&&A&&A.name!==aD&&(x=!0,P=function(){return A.call(this)}),(!Jke||l)&&(BZ||x||!b[vT])&&eqe(b,vT,P),tqe[e]=P,tqe[d]=nqe,i)if(D={values:v?P:f(aD),keys:o?P:f(rqe),entries:N},l)for(F in D)F in b||kQt(b,F,D[F]);else UZ(UZ.P+UZ.F*(BZ||x),e,D);return D}});var aqe=R(()=>{"use strict";p();var UQt=jke()(!0);oqe()(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,e=this._i,r;return e>=t.length?{value:void 0,done:!0}:(r=UQt(t,e),this._i+=r.length,{value:r,done:!1})})});var uqe=R((Ten,lqe)=>{p();var sqe=L0();lqe.exports=function(t,e,r,n){try{return n?e(sqe(r)[0],r[1]):e(r)}catch(o){var i=t.return;throw i!==void 0&&sqe(i.call(t)),o}}});var fqe=R((Aen,cqe)=>{p();var BQt=oD(),VQt=Vd()("iterator"),GQt=Array.prototype;cqe.exports=function(t){return t!==void 0&&(BQt.Array===t||GQt[VQt]===t)}});var pqe=R((Cen,hqe)=>{"use strict";p();var $Qt=tT(),HQt=rT();hqe.exports=function(t,e,r){e in t?$Qt.f(t,e,HQt(0,r)):t[e]=r}});var mqe=R((Ren,dqe)=>{p();var VZ=V8(),WQt=Vd()("toStringTag"),ZQt=VZ(function(){return arguments}())=="Arguments",YQt=function(t,e){try{return t[e]}catch(r){}};dqe.exports=function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=YQt(e=Object(t),WQt))=="string"?r:ZQt?VZ(e):(n=VZ(e))=="Object"&&typeof e.callee=="function"?"Arguments":n}});var vqe=R((Len,gqe)=>{p();var KQt=mqe(),XQt=Vd()("iterator"),QQt=oD();gqe.exports=df().getIteratorMethod=function(t){if(t!=null)return t[XQt]||t["@@iterator"]||QQt[KQt(t)]}});var xqe=R((Nen,_qe)=>{p();var $Z=Vd()("iterator"),yqe=!1;try{GZ=[7][$Z](),GZ.return=function(){yqe=!0},Array.from(GZ,function(){throw 2})}catch(t){}var GZ;_qe.exports=function(t,e){if(!e&&!yqe)return!1;var r=!1;try{var n=[7],i=n[$Z]();i.next=function(){return{done:r=!0}},n[$Z]=function(){return i},t(n)}catch(o){}return r}});var wqe=R(()=>{"use strict";p();var JQt=c2(),HZ=Ud(),eJt=x2(),tJt=uqe(),rJt=fqe(),nJt=$8(),bqe=pqe(),iJt=vqe();HZ(HZ.S+HZ.F*!xqe()(function(t){Array.from(t)}),"Array",{from:function(e){var r=eJt(e),n=typeof this=="function"?this:Array,i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0,f=0,d=iJt(r),v,x,b,A;if(l&&(o=JQt(o,i>2?arguments[2]:void 0,2)),d!=null&&!(n==Array&&rJt(d)))for(A=d.call(r),x=new n;!(b=A.next()).done;f++)bqe(x,f,l?tJt(A,o,[b.value,f],!0):b.value);else for(v=nJt(r.length),x=new n(v);v>f;f++)bqe(x,f,l?o(r[f],f):r[f]);return x.length=f,x}})});var Sqe=R((zen,Eqe)=>{p();aqe();wqe();Eqe.exports=df().Array.from});var Iqe=R((Ben,Tqe)=>{p();Tqe.exports=Sqe()});var sD=R((yT,Mqe)=>{"use strict";p();var oJt=Ua();yT.__esModule=!0;yT.default=void 0;var aJt=oJt(gf()),Aqe=function(){};aJt.default&&(Aqe=function(){if(document.addEventListener)return function(t,e,r,n){return t.addEventListener(e,r,n||!1)};if(document.attachEvent)return function(t,e,r){return t.attachEvent("on"+e,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=t,r.call(t,n)})}}());var sJt=Aqe;yT.default=sJt;Mqe.exports=yT.default});var lD=R((_T,Pqe)=>{"use strict";p();var lJt=Ua();_T.__esModule=!0;_T.default=void 0;var uJt=lJt(gf()),Cqe=function(){};uJt.default&&(Cqe=function(){if(document.addEventListener)return function(t,e,r,n){return t.removeEventListener(e,r,n||!1)};if(document.attachEvent)return function(t,e,r){return t.detachEvent("on"+e,r)}}());var cJt=Cqe;_T.default=cJt;Pqe.exports=_T.default});var WZ=R((uD,Oqe)=>{"use strict";p();uD.__esModule=!0;uD.default=function(t,e,r,n){return(0,hJt.default)(t,e,r,n),{remove:function(){(0,dJt.default)(t,e,r,n)}}};var fJt=sD(),hJt=Rqe(fJt),pJt=lD(),dJt=Rqe(pJt);function Rqe(t){return t&&t.__esModule?t:{default:t}}Oqe.exports=uD.default});var xT=R((cD,Dqe)=>{"use strict";p();cD.__esModule=!0;cD.default=function(t){return(0,yJt.default)(gJt.default.findDOMNode(t))};var mJt=No(),gJt=Lqe(mJt),vJt=dT(),yJt=Lqe(vJt);function Lqe(t){return t&&t.__esModule?t:{default:t}}Dqe.exports=cD.default});var kqe=R((pD,Nqe)=>{"use strict";p();pD.__esModule=!0;var _Jt=gT(),xJt=V0(_Jt),bJt=an(),fD=V0(bJt),wJt=Et(),EJt=V0(wJt),SJt=No(),TJt=V0(SJt),IJt=WZ(),ZZ=V0(IJt),AJt=xT(),MJt=V0(AJt);function V0(t){return t&&t.__esModule?t:{default:t}}function CJt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PJt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function RJt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var OJt=27;function LJt(t){return t.button===0}function DJt(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var hD=function(t){RJt(e,t);function e(r,n){CJt(this,e);var i=PJt(this,t.call(this,r,n));return i.addEventListeners=function(){i.currentEvent=window.event;var o=i.props.event,l=(0,MJt.default)(i);i.documentMouseCaptureListener=(0,ZZ.default)(l,o,i.handleMouseCapture,!0),i.documentMouseListener=(0,ZZ.default)(l,o,i.handleMouse),i.documentKeyupListener=(0,ZZ.default)(l,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(o){i.preventMouseRootClose=DJt(o)||!LJt(o)||(0,xJt.default)(TJt.default.findDOMNode(i),o.target)},i.handleMouse=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(o)},i.handleKeyUp=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}o.keyCode===OJt&&i.props.onRootClose&&i.props.onRootClose(o)},i.preventMouseRootClose=!1,i}return e.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},e.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},e.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},e.prototype.render=function(){return this.props.children},e}(EJt.default.Component);hD.displayName="RootCloseWrapper";hD.propTypes={onRootClose:fD.default.func,children:fD.default.element,disabled:fD.default.bool,event:fD.default.oneOf(["click","mousedown"])};hD.defaultProps={event:"click"};pD.default=hD;Nqe.exports=pD.default});var Jqe=R((xD,Qqe)=>{"use strict";p();xD.__esModule=!0;xD.default=WJt;var HJt=/^[\w-]*$/,sY=Function.prototype.bind.call(Function.prototype.call,[].slice);function WJt(t,e){var r=e[0]==="#",n=e[0]===".",i=r||n?e.slice(1):e,o=HJt.test(i),l;return o?r?(t=t.getElementById?t:document,(l=t.getElementById(i))?[l]:[]):t.getElementsByClassName&&n?sY(t.getElementsByClassName(i)):sY(t.getElementsByTagName(e)):sY(t.querySelectorAll(e))}Qqe.exports=xD.default});var rFe=R((bD,tFe)=>{"use strict";p();var eFe=Ua();bD.__esModule=!0;bD.default=KJt;var ZJt=eFe(gT()),YJt=eFe(Jqe());function KJt(t,e){return function(n){var i=n.currentTarget,o=n.target,l=(0,YJt.default)(i,t);l.some(function(f){return(0,ZJt.default)(f,o)})&&e.call(this,n)}}tFe.exports=bD.default});var oFe=R((TT,iFe)=>{"use strict";p();var lY=Ua();TT.__esModule=!0;TT.default=void 0;var XJt=lY(gf()),QJt=lY(sD()),JJt=lY(lD()),nFe=function(){};XJt.default&&(nFe=function(e,r,n,i){return(0,QJt.default)(e,r,n,i),function(){(0,JJt.default)(e,r,n,i)}});var eer=nFe;TT.default=eer;iFe.exports=TT.default});var cFe=R(Gd=>{"use strict";p();var wD=Ua();Gd.__esModule=!0;Gd.default=void 0;var aFe=wD(sD());Gd.on=aFe.default;var sFe=wD(lD());Gd.off=sFe.default;var lFe=wD(rFe());Gd.filter=lFe.default;var uFe=wD(oFe());Gd.listen=uFe.default;var ter={on:aFe.default,off:sFe.default,filter:lFe.default,listen:uFe.default};Gd.default=ter});var uY=R((SD,fFe)=>{"use strict";p();var rer=Ua();SD.__esModule=!0;SD.default=ier;var ner=rer(gf()),ED;function ier(t){if((!ED&&ED!==0||t)&&ner.default){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),ED=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ED}fFe.exports=SD.default});var ID=R((TD,pFe)=>{"use strict";p();Object.defineProperty(TD,"__esModule",{value:!0});var oer=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aer=Et(),ser=hFe(aer),ler=lT(),uer=hFe(ler);function hFe(t){return t&&t.__esModule?t:{default:t}}function cer(t,e,r,n,i){var o=t[e],l=typeof o=="undefined"?"undefined":oer(o);return ser.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(l!=="object"||typeof o.render!="function")&&o.nodeType!==1?new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}TD.default=(0,uer.default)(cer);pFe.exports=TD.default});var vFe=R((Xtn,gFe)=>{"use strict";p();var fer=!1,mFe=function(){};fer&&(dFe=function(e,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var i=1;i<n;i++)r[i-1]=arguments[i];var o=0,l="Warning: "+e.replace(/%s/g,function(){return r[o++]});typeof console!="undefined"&&console.error(l);try{throw new Error(l)}catch(f){}},mFe=function(t,e,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var i=2;i<n;i++)r[i-2]=arguments[i];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");t||dFe.apply(null,[e].concat(r))});var dFe;gFe.exports=mFe});var xFe=R((AD,_Fe)=>{"use strict";p();Object.defineProperty(AD,"__esModule",{value:!0});AD.default=yFe;var her=vFe(),per=der(her);function der(t){return t&&t.__esModule?t:{default:t}}var cY={};function yFe(t,e){return function(n,i,o,l,f){var d=o||"<<anonymous>>",v=f||i;if(n[i]!=null){var x=o+"."+i;(0,per.default)(cY[x],"The "+l+" `"+v+"` of "+("`"+d+"` is deprecated. "+e+".")),cY[x]=!0}for(var b=arguments.length,A=Array(b>5?b-5:0),P=5;P<b;P++)A[P-5]=arguments[P];return t.apply(void 0,[n,i,o,l,f].concat(A))}}function mer(){cY={}}yFe._resetWarned=mer;_Fe.exports=AD.default});var fY=R((MD,bFe)=>{"use strict";p();MD.__esModule=!0;MD.default=ger;function ger(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}bFe.exports=MD.default});var EFe=R((CD,wFe)=>{"use strict";p();var ver=Ua();CD.__esModule=!0;CD.default=_er;var yer=ver(fY());function _er(t,e){t.classList?t.classList.add(e):(0,yer.default)(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}wFe.exports=CD.default});var IFe=R((rrn,TFe)=>{"use strict";p();function SFe(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}TFe.exports=function(e,r){e.classList?e.classList.remove(r):typeof e.className=="string"?e.className=SFe(e.className,r):e.setAttribute("class",SFe(e.className&&e.className.baseVal||"",r))}});var PFe=R(nv=>{"use strict";p();var hY=Ua();nv.__esModule=!0;nv.default=void 0;var AFe=hY(EFe());nv.addClass=AFe.default;var MFe=hY(IFe());nv.removeClass=MFe.default;var CFe=hY(fY());nv.hasClass=CFe.default;var xer={addClass:AFe.default,removeClass:MFe.default,hasClass:CFe.default};nv.default=xer});var OFe=R((PD,RFe)=>{"use strict";p();PD.__esModule=!0;PD.default=ber;function ber(t){return t===t.window?t:t.nodeType===9?t.defaultView||t.parentWindow:!1}RFe.exports=PD.default});var pY=R((RD,NFe)=>{"use strict";p();RD.__esModule=!0;RD.default=Aer;var wer=OFe(),LFe=DFe(wer),Eer=dT(),Ser=DFe(Eer);function DFe(t){return t&&t.__esModule?t:{default:t}}function Ter(t){return t&&t.tagName.toLowerCase()==="body"}function Ier(t){var e=(0,Ser.default)(t),r=(0,LFe.default)(e),n=r.innerWidth;if(!n){var i=e.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return e.body.clientWidth<n}function Aer(t){var e=(0,LFe.default)(t);return e||Ter(t)?Ier(t):t.scrollHeight>t.clientHeight}NFe.exports=RD.default});var qFe=R(IT=>{"use strict";p();IT.__esModule=!0;IT.ariaHidden=dY;IT.hideSiblings=Per;IT.showSiblings=Rer;var Mer=["template","script","style"],Cer=function(e){var r=e.nodeType,n=e.tagName;return r===1&&Mer.indexOf(n.toLowerCase())===-1},kFe=function(e,r,n){r=[].concat(r),[].forEach.call(e.children,function(i){r.indexOf(i)===-1&&Cer(i)&&n(i)})};function dY(t,e){e&&(t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))}function Per(t,e){kFe(t,e,function(r){return dY(!0,r)})}function Rer(t,e){kFe(t,e,function(r){return dY(!1,r)})}});var UFe=R((LD,zFe)=>{"use strict";p();LD.__esModule=!0;var Oer=PFe(),FFe=OD(Oer),Ler=Tke(),jFe=OD(Ler),Der=uY(),Ner=OD(Der),ker=pY(),qer=OD(ker),mY=qFe();function OD(t){return t&&t.__esModule?t:{default:t}}function Fer(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jer(t,e){var r=-1;return t.some(function(n,i){if(e(n,i))return r=i,!0}),r}function zer(t,e){return jer(t,function(r){return r.modals.indexOf(e)!==-1})}function Uer(t,e){var r={overflow:"hidden"};t.style={overflow:e.style.overflow,paddingRight:e.style.paddingRight},t.overflowing&&(r.paddingRight=parseInt((0,jFe.default)(e,"paddingRight")||0,10)+(0,Ner.default)()+"px"),(0,jFe.default)(e,r)}function Ber(t,e){var r=t.style;Object.keys(r).forEach(function(n){return e.style[n]=r[n]})}var Ver=function t(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,i=n===void 0?!0:n,o=r.handleContainerOverflow,l=o===void 0?!0:o;Fer(this,t),this.add=function(f,d,v){var x=e.modals.indexOf(f),b=e.containers.indexOf(d);if(x!==-1)return x;if(x=e.modals.length,e.modals.push(f),e.hideSiblingNodes&&(0,mY.hideSiblings)(d,f.modalNode),b!==-1)return e.data[b].modals.push(f),x;var A={modals:[f],classes:v?v.split(/\s+/):[],overflowing:(0,qer.default)(d)};return e.handleContainerOverflow&&Uer(A,d),A.classes.forEach(FFe.default.addClass.bind(null,d)),e.containers.push(d),e.data.push(A),x},this.remove=function(f){var d=e.modals.indexOf(f);if(d!==-1){var v=zer(e.data,f),x=e.data[v],b=e.containers[v];x.modals.splice(x.modals.indexOf(f),1),e.modals.splice(d,1),x.modals.length===0?(x.classes.forEach(FFe.default.removeClass.bind(null,b)),e.handleContainerOverflow&&Ber(x,b),e.hideSiblingNodes&&(0,mY.showSiblings)(b,f.modalNode),e.containers.splice(v,1),e.data.splice(v,1)):e.hideSiblingNodes&&(0,mY.ariaHidden)(!1,x.modals[x.modals.length-1].modalNode)}},this.isTopModal=function(f){return!!e.modals.length&&e.modals[e.modals.length-1]===f},this.hideSiblingNodes=i,this.handleContainerOverflow=l,this.modals=[],this.containers=[],this.data=[]};LD.default=Ver;zFe.exports=LD.default});var ND=R((DD,BFe)=>{"use strict";p();DD.__esModule=!0;DD.default=Wer;var Ger=No(),$er=Her(Ger);function Her(t){return t&&t.__esModule?t:{default:t}}function Wer(t,e){return t=typeof t=="function"?t():t,$er.default.findDOMNode(t)||e}BFe.exports=DD.default});var YFe=R((kD,ZFe)=>{"use strict";p();kD.__esModule=!0;var Zer=an(),gY=W0(Zer),Yer=ID(),Ker=W0(Yer),Xer=Et(),VFe=W0(Xer),Qer=No(),GFe=W0(Qer),Jer=ND(),$Fe=W0(Jer),etr=xT(),HFe=W0(etr);function W0(t){return t&&t.__esModule?t:{default:t}}function ttr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WFe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function rtr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vY=function(t){rtr(e,t);function e(){var r,n,i;ttr(this,e);for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];return i=(r=(n=WFe(this,t.call.apply(t,[this].concat(l))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,$Fe.default)(n.props.container,(0,HFe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var d=n.props.children?VFe.default.Children.only(n.props.children):null;if(d!==null){n._mountOverlayTarget();var v=!n._overlayInstance;n._overlayInstance=GFe.default.unstable_renderSubtreeIntoContainer(n,d,n._overlayTarget,function(){v&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(GFe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),WFe(n,i)}return e.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},e.prototype.componentDidUpdate=function(){this._renderOverlay()},e.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,$Fe.default)(n.container,(0,HFe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},e.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},e.prototype.render=function(){return null},e}(VFe.default.Component);vY.displayName="Portal";vY.propTypes={container:gY.default.oneOfType([Ker.default,gY.default.func]),onRendered:gY.default.func};kD.default=vY;ZFe.exports=kD.default});var QFe=R((qD,XFe)=>{"use strict";p();qD.__esModule=!0;var ntr=gf(),itr=$d(ntr),otr=an(),yY=$d(otr),atr=ID(),str=$d(atr),ltr=Et(),utr=$d(ltr),ctr=No(),_Y=$d(ctr),ftr=ND(),htr=$d(ftr),ptr=xT(),dtr=$d(ptr),mtr=YFe(),gtr=$d(mtr);function $d(t){return t&&t.__esModule?t:{default:t}}function vtr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KFe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ytr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var xY=function(t){ytr(e,t);function e(){var r,n,i;vtr(this,e);for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];return i=(r=(n=KFe(this,t.call.apply(t,[this].concat(l))),n),n.getMountNode=function(){return n._portalContainerNode},r),KFe(n,i)}return e.prototype.UNSAFE_componentWillMount=function(){if(itr.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!_Y.default.findDOMNode(n))&&this.setContainer(n)}},e.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},e.prototype.componentWillUnmount=function(){this._portalContainerNode=null},e.prototype.setContainer=function(n){this._portalContainerNode=(0,htr.default)(n,(0,dtr.default)(this).body)},e.prototype.render=function(){return this.props.children&&this._portalContainerNode?_Y.default.createPortal(this.props.children,this._portalContainerNode):null},e}(utr.default.Component);xY.displayName="Portal";xY.propTypes={container:yY.default.oneOfType([str.default,yY.default.func]),onRendered:yY.default.func};qD.default=_Y.default.createPortal?xY:gtr.default;XFe.exports=qD.default});var rje=R((FD,tje)=>{"use strict";p();FD.__esModule=!0;var _tr=an(),xtr=JFe(_tr),btr=Et(),wtr=JFe(btr);function JFe(t){return t&&t.__esModule?t:{default:t}}function Etr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Str(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ttr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Itr={children:xtr.default.node},eje=function(t){Ttr(e,t);function e(){return Etr(this,e),Str(this,t.apply(this,arguments))}return e.prototype.render=function(){return this.props.children},e}(wtr.default.Component);eje.propTypes=Itr;FD.default=eje;tje.exports=FD.default});var ije=R((jD,nje)=>{"use strict";p();jD.__esModule=!0;jD.default=Atr;function Atr(t){var e=!document.addEventListener,r=void 0;return e?(document.attachEvent("onfocusin",t),r=function(){return document.detachEvent("onfocusin",t)}):(document.addEventListener("focus",t,!0),r=function(){return document.removeEventListener("focus",t,!0)}),{remove:r}}nje.exports=jD.default});var dje=R((UD,pje)=>{"use strict";p();UD.__esModule=!0;var lje=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mtr=NZ(),bY=Ea(Mtr),Ctr=gT(),uje=Ea(Ctr),Ptr=gf(),Rtr=Ea(Ptr),Otr=an(),gi=Ea(Otr),Ltr=ID(),Dtr=Ea(Ltr),Ntr=xFe(),ktr=Ea(Ntr),qtr=Lh(),oje=Ea(qtr),cje=Et(),Hd=Ea(cje),Ftr=No(),jtr=Ea(Ftr),ztr=TZ(),Utr=Ea(ztr),Btr=UFe(),fje=Ea(Btr),Vtr=QFe(),hje=Ea(Vtr),Gtr=rje(),$tr=Ea(Gtr),Htr=WZ(),aje=Ea(Htr),Wtr=ije(),Ztr=Ea(Wtr),Ytr=ND(),Ktr=Ea(Ytr),Xtr=xT(),wY=Ea(Xtr);function Ea(t){return t&&t.__esModule?t:{default:t}}function Qtr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sje(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Jtr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var err=new fje.default,zD=function(t){Jtr(e,t);function e(){var r,n,i;Qtr(this,e);for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];return i=(r=(n=sje(this,t.call.apply(t,[this].concat(l))),n),trr.call(n),r),sje(n,i)}return e.prototype.omitProps=function(n,i){var o=Object.keys(n),l={};return o.map(function(f){Object.prototype.hasOwnProperty.call(i,f)||(l[f]=n[f])}),l},e.prototype.render=function(){var n=this.props,i=n.show,o=n.container,l=n.children,f=n.transition,d=n.backdrop,v=n.className,x=n.style,b=n.onExit,A=n.onExiting,P=n.onEnter,N=n.onEntering,j=n.onEntered,D=Hd.default.Children.only(l),F=this.omitProps(this.props,e.propTypes),U=i||f&&!this.state.exited;if(!U)return null;var $=D.props,Z=$.role,ie=$.tabIndex;return(Z===void 0||ie===void 0)&&(D=(0,cje.cloneElement)(D,{role:Z===void 0?"document":Z,tabIndex:ie==null?"-1":ie})),f&&(D=Hd.default.createElement(f,{appear:!0,unmountOnExit:!0,in:i,onExit:b,onExiting:A,onExited:this.handleHidden,onEnter:P,onEntering:N,onEntered:j},D)),Hd.default.createElement(hje.default,{ref:this.setMountNode,container:o,onRendered:this.onPortalRendered},Hd.default.createElement("div",lje({ref:this.setModalNodeRef,role:Z||"dialog"},F,{style:x,className:v}),d&&this.renderBackdrop(),Hd.default.createElement($tr.default,{ref:this.setDialogRef},D)))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},e.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},e.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},e.prototype.componentDidUpdate=function(n){var i=this.props.transition;n.show&&!this.props.show&&!i?this.onHide():!n.show&&this.props.show&&this.onShow()},e.prototype.componentWillUnmount=function(){var n=this.props,i=n.show,o=n.transition;this._isMounted=!1,(i||o&&!this.state.exited)&&this.onHide()},e.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),i=(0,bY.default)((0,wY.default)(this));n&&!(0,uje.default)(n,i)&&(this.lastFocus=i,n.hasAttribute("tabIndex")||((0,Utr.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},e.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},e.prototype.getDialogElement=function(){return jtr.default.findDOMNode(this.dialog)},e.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},e}(Hd.default.Component);zD.propTypes=lje({},hje.default.propTypes,{show:gi.default.bool,container:gi.default.oneOfType([Dtr.default,gi.default.func]),onShow:gi.default.func,onHide:gi.default.func,backdrop:gi.default.oneOfType([gi.default.bool,gi.default.oneOf(["static"])]),renderBackdrop:gi.default.func,onEscapeKeyDown:gi.default.func,onEscapeKeyUp:(0,ktr.default)(gi.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:gi.default.func,backdropStyle:gi.default.object,backdropClassName:gi.default.string,containerClassName:gi.default.string,keyboard:gi.default.bool,transition:oje.default,backdropTransition:oje.default,autoFocus:gi.default.bool,enforceFocus:gi.default.bool,restoreFocus:gi.default.bool,onEnter:gi.default.func,onEntering:gi.default.func,onEntered:gi.default.func,onExit:gi.default.func,onExiting:gi.default.func,onExited:gi.default.func,manager:gi.default.object.isRequired});zD.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:err,renderBackdrop:function(e){return Hd.default.createElement("div",e)}};var trr=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=e.props,n=r.backdropStyle,i=r.backdropClassName,o=r.renderBackdrop,l=r.backdropTransition,f=function(x){return e.backdrop=x},d=o({ref:f,style:n,className:i,onClick:e.handleBackdropClick});return l&&(d=Hd.default.createElement(l,{appear:!0,in:e.props.show},d)),d},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var r=(0,wY.default)(e),n=(0,Ktr.default)(e.props.container,r.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,aje.default)(r,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,aje.default)(r,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,Ztr.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(r){e.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){e.modalNode=r},this.setDialogRef=function(r){e.dialog=r},this.handleHidden=function(){if(e.setState({exited:!0}),e.onHide(),e.props.onExited){var r;(r=e.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(r),e.props.backdrop===!0&&e.props.onHide())},this.handleDocumentKeyDown=function(r){e.props.keyboard&&r.keyCode===27&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(r),e.props.onHide())},this.handleDocumentKeyUp=function(r){e.props.keyboard&&r.keyCode===27&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(r)},this.checkForFocus=function(){Rtr.default&&(e.lastFocus=(0,bY.default)())},this.enforceFocus=function(){if(!(!e.props.enforceFocus||!e._isMounted||!e.isTopModal())){var r=e.getDialogElement(),n=(0,bY.default)((0,wY.default)(e));r&&!(0,uje.default)(r,n)&&r.focus()}}};zD.Manager=fje.default;UD.default=zD;pje.exports=UD.default});var _9=R((v9,y9)=>{p();(function(t,e){typeof v9=="object"&&typeof y9!="undefined"?y9.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self).RBush=e()})(v9,function(){"use strict";function t(D,F,U,$,Z){(function ie(ne,ae,ye,ge,de){for(;ge>ye;){if(ge-ye>600){var be=ge-ye+1,Ne=ae-ye+1,Me=Math.log(be),ke=.5*Math.exp(2*Me/3),He=.5*Math.sqrt(Me*ke*(be-ke)/be)*(Ne-be/2<0?-1:1),Ke=Math.max(ye,Math.floor(ae-Ne*ke/be+He)),Je=Math.min(ge,Math.floor(ae+(be-Ne)*ke/be+He));ie(ne,ae,Ke,Je,de)}var We=ne[ae],lt=ye,pt=ge;for(e(ne,ye,ae),de(ne[ge],We)>0&&e(ne,ye,ge);lt<pt;){for(e(ne,lt,pt),lt++,pt--;de(ne[lt],We)<0;)lt++;for(;de(ne[pt],We)>0;)pt--}de(ne[ye],We)===0?e(ne,ye,pt):e(ne,++pt,ge),pt<=ae&&(ye=pt+1),ae<=pt&&(ge=pt-1)}})(D,F,U||0,$||D.length-1,Z||r)}function e(D,F,U){var $=D[F];D[F]=D[U],D[U]=$}function r(D,F){return D<F?-1:D>F?1:0}var n=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(D,F,U){if(!U)return F.indexOf(D);for(var $=0;$<F.length;$++)if(U(D,F[$]))return $;return-1}function o(D,F){l(D,0,D.children.length,F,D)}function l(D,F,U,$,Z){Z||(Z=N(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var ie=F;ie<U;ie++){var ne=D.children[ie];f(Z,D.leaf?$(ne):ne)}return Z}function f(D,F){return D.minX=Math.min(D.minX,F.minX),D.minY=Math.min(D.minY,F.minY),D.maxX=Math.max(D.maxX,F.maxX),D.maxY=Math.max(D.maxY,F.maxY),D}function d(D,F){return D.minX-F.minX}function v(D,F){return D.minY-F.minY}function x(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function b(D){return D.maxX-D.minX+(D.maxY-D.minY)}function A(D,F){return D.minX<=F.minX&&D.minY<=F.minY&&F.maxX<=D.maxX&&F.maxY<=D.maxY}function P(D,F){return F.minX<=D.maxX&&F.minY<=D.maxY&&F.maxX>=D.minX&&F.maxY>=D.minY}function N(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function j(D,F,U,$,Z){for(var ie=[F,U];ie.length;)if(!((U=ie.pop())-(F=ie.pop())<=$)){var ne=F+Math.ceil((U-F)/$/2)*$;t(D,ne,F,U,Z),ie.push(F,ne,ne,U)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(D){var F=this.data,U=[];if(!P(D,F))return U;for(var $=this.toBBox,Z=[];F;){for(var ie=0;ie<F.children.length;ie++){var ne=F.children[ie],ae=F.leaf?$(ne):ne;P(D,ae)&&(F.leaf?U.push(ne):A(D,ae)?this._all(ne,U):Z.push(ne))}F=Z.pop()}return U},n.prototype.collides=function(D){var F=this.data;if(!P(D,F))return!1;for(var U=[];F;){for(var $=0;$<F.children.length;$++){var Z=F.children[$],ie=F.leaf?this.toBBox(Z):Z;if(P(D,ie)){if(F.leaf||A(D,ie))return!0;U.push(Z)}}F=U.pop()}return!1},n.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var F=0;F<D.length;F++)this.insert(D[F]);return this}var U=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length){if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var $=this.data;this.data=U,U=$}this._insert(U,this.data.height-U.height-1,!0)}}else this.data=U;return this},n.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},n.prototype.clear=function(){return this.data=N([]),this},n.prototype.remove=function(D,F){if(!D)return this;for(var U,$,Z,ie=this.data,ne=this.toBBox(D),ae=[],ye=[];ie||ae.length;){if(ie||(ie=ae.pop(),$=ae[ae.length-1],U=ye.pop(),Z=!0),ie.leaf){var ge=i(D,ie.children,F);if(ge!==-1)return ie.children.splice(ge,1),ae.push(ie),this._condense(ae),this}Z||ie.leaf||!A(ie,ne)?$?(U++,ie=$.children[U],Z=!1):ie=null:(ae.push(ie),ye.push(U),U=0,$=ie,ie=ie.children[0])}return this},n.prototype.toBBox=function(D){return D},n.prototype.compareMinX=function(D,F){return D.minX-F.minX},n.prototype.compareMinY=function(D,F){return D.minY-F.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(D){return this.data=D,this},n.prototype._all=function(D,F){for(var U=[];D;)D.leaf?F.push.apply(F,D.children):U.push.apply(U,D.children),D=U.pop();return F},n.prototype._build=function(D,F,U,$){var Z,ie=U-F+1,ne=this._maxEntries;if(ie<=ne)return o(Z=N(D.slice(F,U+1)),this.toBBox),Z;$||($=Math.ceil(Math.log(ie)/Math.log(ne)),ne=Math.ceil(ie/Math.pow(ne,$-1))),(Z=N([])).leaf=!1,Z.height=$;var ae=Math.ceil(ie/ne),ye=ae*Math.ceil(Math.sqrt(ne));j(D,F,U,ye,this.compareMinX);for(var ge=F;ge<=U;ge+=ye){var de=Math.min(ge+ye-1,U);j(D,ge,de,ae,this.compareMinY);for(var be=ge;be<=de;be+=ae){var Ne=Math.min(be+ae-1,de);Z.children.push(this._build(D,be,Ne,$-1))}}return o(Z,this.toBBox),Z},n.prototype._chooseSubtree=function(D,F,U,$){for(;$.push(F),!F.leaf&&$.length-1!==U;){for(var Z=1/0,ie=1/0,ne=void 0,ae=0;ae<F.children.length;ae++){var ye=F.children[ae],ge=x(ye),de=(be=D,Ne=ye,(Math.max(Ne.maxX,be.maxX)-Math.min(Ne.minX,be.minX))*(Math.max(Ne.maxY,be.maxY)-Math.min(Ne.minY,be.minY))-ge);de<ie?(ie=de,Z=ge<Z?ge:Z,ne=ye):de===ie&&ge<Z&&(Z=ge,ne=ye)}F=ne||F.children[0]}var be,Ne;return F},n.prototype._insert=function(D,F,U){var $=U?D:this.toBBox(D),Z=[],ie=this._chooseSubtree($,this.data,F,Z);for(ie.children.push(D),f(ie,$);F>=0&&Z[F].children.length>this._maxEntries;)this._split(Z,F),F--;this._adjustParentBBoxes($,Z,F)},n.prototype._split=function(D,F){var U=D[F],$=U.children.length,Z=this._minEntries;this._chooseSplitAxis(U,Z,$);var ie=this._chooseSplitIndex(U,Z,$),ne=N(U.children.splice(ie,U.children.length-ie));ne.height=U.height,ne.leaf=U.leaf,o(U,this.toBBox),o(ne,this.toBBox),F?D[F-1].children.push(ne):this._splitRoot(U,ne)},n.prototype._splitRoot=function(D,F){this.data=N([D,F]),this.data.height=D.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(D,F,U){for(var $,Z,ie,ne,ae,ye,ge,de=1/0,be=1/0,Ne=F;Ne<=U-F;Ne++){var Me=l(D,0,Ne,this.toBBox),ke=l(D,Ne,U,this.toBBox),He=(Z=Me,ie=ke,ne=void 0,ae=void 0,ye=void 0,ge=void 0,ne=Math.max(Z.minX,ie.minX),ae=Math.max(Z.minY,ie.minY),ye=Math.min(Z.maxX,ie.maxX),ge=Math.min(Z.maxY,ie.maxY),Math.max(0,ye-ne)*Math.max(0,ge-ae)),Ke=x(Me)+x(ke);He<de?(de=He,$=Ne,be=Ke<be?Ke:be):He===de&&Ke<be&&(be=Ke,$=Ne)}return $||U-F},n.prototype._chooseSplitAxis=function(D,F,U){var $=D.leaf?this.compareMinX:d,Z=D.leaf?this.compareMinY:v;this._allDistMargin(D,F,U,$)<this._allDistMargin(D,F,U,Z)&&D.children.sort($)},n.prototype._allDistMargin=function(D,F,U,$){D.children.sort($);for(var Z=this.toBBox,ie=l(D,0,F,Z),ne=l(D,U-F,U,Z),ae=b(ie)+b(ne),ye=F;ye<U-F;ye++){var ge=D.children[ye];f(ie,D.leaf?Z(ge):ge),ae+=b(ie)}for(var de=U-F-1;de>=F;de--){var be=D.children[de];f(ne,D.leaf?Z(be):be),ae+=b(ne)}return ae},n.prototype._adjustParentBBoxes=function(D,F,U){for(var $=U;$>=0;$--)f(F[$],D)},n.prototype._condense=function(D){for(var F=D.length-1,U=void 0;F>=0;F--)D[F].children.length===0?F>0?(U=D[F-1].children).splice(U.indexOf(D[F]),1):this.clear():o(D[F],this.toBBox)},n})});var M3e=R(Qn=>{"use strict";p();var zK=Symbol.for("react.element"),UK=Symbol.for("react.portal"),Ak=Symbol.for("react.fragment"),Mk=Symbol.for("react.strict_mode"),Ck=Symbol.for("react.profiler"),Pk=Symbol.for("react.provider"),Rk=Symbol.for("react.context"),blr=Symbol.for("react.server_context"),Ok=Symbol.for("react.forward_ref"),Lk=Symbol.for("react.suspense"),Dk=Symbol.for("react.suspense_list"),Nk=Symbol.for("react.memo"),kk=Symbol.for("react.lazy"),wlr=Symbol.for("react.offscreen"),A3e;A3e=Symbol.for("react.module.reference");function Ru(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case zK:switch(t=t.type,t){case Ak:case Ck:case Mk:case Lk:case Dk:return t;default:switch(t=t&&t.$$typeof,t){case blr:case Rk:case Ok:case kk:case Nk:case Pk:return t;default:return e}}case UK:return e}}}Qn.ContextConsumer=Rk;Qn.ContextProvider=Pk;Qn.Element=zK;Qn.ForwardRef=Ok;Qn.Fragment=Ak;Qn.Lazy=kk;Qn.Memo=Nk;Qn.Portal=UK;Qn.Profiler=Ck;Qn.StrictMode=Mk;Qn.Suspense=Lk;Qn.SuspenseList=Dk;Qn.isAsyncMode=function(){return!1};Qn.isConcurrentMode=function(){return!1};Qn.isContextConsumer=function(t){return Ru(t)===Rk};Qn.isContextProvider=function(t){return Ru(t)===Pk};Qn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===zK};Qn.isForwardRef=function(t){return Ru(t)===Ok};Qn.isFragment=function(t){return Ru(t)===Ak};Qn.isLazy=function(t){return Ru(t)===kk};Qn.isMemo=function(t){return Ru(t)===Nk};Qn.isPortal=function(t){return Ru(t)===UK};Qn.isProfiler=function(t){return Ru(t)===Ck};Qn.isStrictMode=function(t){return Ru(t)===Mk};Qn.isSuspense=function(t){return Ru(t)===Lk};Qn.isSuspenseList=function(t){return Ru(t)===Dk};Qn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ak||t===Ck||t===Mk||t===Lk||t===Dk||t===wlr||typeof t=="object"&&t!==null&&(t.$$typeof===kk||t.$$typeof===Nk||t.$$typeof===Pk||t.$$typeof===Rk||t.$$typeof===Ok||t.$$typeof===A3e||t.getModuleId!==void 0)};Qn.typeOf=Ru});var P3e=R((TRn,C3e)=>{"use strict";p();C3e.exports=M3e()});var LVe=R(ai=>{"use strict";p();var _q=60103,xq=60106,GI=60107,$I=60108,HI=60114,WI=60109,ZI=60110,YI=60112,KI=60113,M7=60120,XI=60115,QI=60116,MVe=60121,CVe=60122,PVe=60117,RVe=60129,OVe=60131;typeof Symbol=="function"&&Symbol.for&&(na=Symbol.for,_q=na("react.element"),xq=na("react.portal"),GI=na("react.fragment"),$I=na("react.strict_mode"),HI=na("react.profiler"),WI=na("react.provider"),ZI=na("react.context"),YI=na("react.forward_ref"),KI=na("react.suspense"),M7=na("react.suspense_list"),XI=na("react.memo"),QI=na("react.lazy"),MVe=na("react.block"),CVe=na("react.server.block"),PVe=na("react.fundamental"),RVe=na("react.debug_trace_mode"),OVe=na("react.legacy_hidden"));var na;function Mc(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case _q:switch(t=t.type,t){case GI:case HI:case $I:case KI:case M7:return t;default:switch(t=t&&t.$$typeof,t){case ZI:case YI:case QI:case XI:case WI:return t;default:return e}}case xq:return e}}}var ncr=WI,icr=_q,ocr=YI,acr=GI,scr=QI,lcr=XI,ucr=xq,ccr=HI,fcr=$I,hcr=KI;ai.ContextConsumer=ZI;ai.ContextProvider=ncr;ai.Element=icr;ai.ForwardRef=ocr;ai.Fragment=acr;ai.Lazy=scr;ai.Memo=lcr;ai.Portal=ucr;ai.Profiler=ccr;ai.StrictMode=fcr;ai.Suspense=hcr;ai.isAsyncMode=function(){return!1};ai.isConcurrentMode=function(){return!1};ai.isContextConsumer=function(t){return Mc(t)===ZI};ai.isContextProvider=function(t){return Mc(t)===WI};ai.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_q};ai.isForwardRef=function(t){return Mc(t)===YI};ai.isFragment=function(t){return Mc(t)===GI};ai.isLazy=function(t){return Mc(t)===QI};ai.isMemo=function(t){return Mc(t)===XI};ai.isPortal=function(t){return Mc(t)===xq};ai.isProfiler=function(t){return Mc(t)===HI};ai.isStrictMode=function(t){return Mc(t)===$I};ai.isSuspense=function(t){return Mc(t)===KI};ai.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===GI||t===HI||t===RVe||t===$I||t===KI||t===M7||t===OVe||typeof t=="object"&&t!==null&&(t.$$typeof===QI||t.$$typeof===XI||t.$$typeof===WI||t.$$typeof===ZI||t.$$typeof===YI||t.$$typeof===PVe||t.$$typeof===MVe||t[0]===CVe)};ai.typeOf=Mc});var NVe=R((wFn,DVe)=>{"use strict";p();DVe.exports=LVe()});var Wcr={};rJ(Wcr,{SettingsProvider:()=>$cr,renderGeoreferenceApp:()=>Hcr});p();var jGe=Fe(Et(),1),zGe=Fe(No(),1),dzn=Fe(YRe(),1);p();p();p();p();p();function TS(t,e){return function(){return t.apply(e,arguments)}}var{toString:_$t}=Object.prototype,{getPrototypeOf:yW}=Object,{iterator:cL,toStringTag:XRe}=Symbol,fL=(t=>e=>{let r=_$t.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),uc=t=>(t=t.toLowerCase(),e=>fL(e)===t),hL=t=>e=>typeof e===t,{isArray:_0}=Array,y0=hL("undefined");function IS(t){return t!==null&&!y0(t)&&t.constructor!==null&&!y0(t.constructor)&&Gs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var QRe=uc("ArrayBuffer");function x$t(t){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&QRe(t.buffer),e}var b$t=hL("string"),Gs=hL("function"),JRe=hL("number"),AS=t=>t!==null&&typeof t=="object",w$t=t=>t===!0||t===!1,uL=t=>{if(fL(t)!=="object")return!1;let e=yW(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(XRe in t)&&!(cL in t)},E$t=t=>{if(!AS(t)||IS(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(e){return!1}},S$t=uc("Date"),T$t=uc("File"),I$t=uc("Blob"),A$t=uc("FileList"),M$t=t=>AS(t)&&Gs(t.pipe),C$t=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Gs(t.append)&&((e=fL(t))==="formdata"||e==="object"&&Gs(t.toString)&&t.toString()==="[object FormData]"))},P$t=uc("URLSearchParams"),[R$t,O$t,L$t,D$t]=["ReadableStream","Request","Response","Headers"].map(uc),N$t=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function MS(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t=="undefined")return;let n,i;if(typeof t!="object"&&(t=[t]),_0(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(IS(t))return;let o=r?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length,f;for(n=0;n<l;n++)f=o[n],e.call(null,t[f],f,t)}}function eOe(t,e){if(IS(t))return null;e=e.toLowerCase();let r=Object.keys(t),n=r.length,i;for(;n-->0;)if(i=r[n],e===i.toLowerCase())return i;return null}var Hg=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,tOe=t=>!y0(t)&&t!==Hg;function vW(){let{caseless:t,skipUndefined:e}=tOe(this)&&this||{},r={},n=(i,o)=>{let l=t&&eOe(r,o)||o;uL(r[l])&&uL(i)?r[l]=vW(r[l],i):uL(i)?r[l]=vW({},i):_0(i)?r[l]=i.slice():(!e||!y0(i))&&(r[l]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&MS(arguments[i],n);return r}var k$t=(t,e,r,{allOwnKeys:n}={})=>(MS(e,(i,o)=>{r&&Gs(i)?t[o]=TS(i,r):t[o]=i},{allOwnKeys:n}),t),q$t=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),F$t=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},j$t=(t,e,r,n)=>{let i,o,l,f={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-->0;)l=i[o],(!n||n(l,t,e))&&!f[l]&&(e[l]=t[l],f[l]=!0);t=r!==!1&&yW(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},z$t=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},U$t=t=>{if(!t)return null;if(_0(t))return t;let e=t.length;if(!JRe(e))return null;let r=new Array(e);for(;e-->0;)r[e]=t[e];return r},B$t=(t=>e=>t&&e instanceof t)(typeof Uint8Array!="undefined"&&yW(Uint8Array)),V$t=(t,e)=>{let n=(t&&t[cL]).call(t),i;for(;(i=n.next())&&!i.done;){let o=i.value;e.call(t,o[0],o[1])}},G$t=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},$$t=uc("HTMLFormElement"),H$t=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),KRe=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),W$t=uc("RegExp"),rOe=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};MS(r,(i,o)=>{let l;(l=e(i,o,t))!==!1&&(n[o]=l||i)}),Object.defineProperties(t,n)},Z$t=t=>{rOe(t,(e,r)=>{if(Gs(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(Gs(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Y$t=(t,e)=>{let r={},n=i=>{i.forEach(o=>{r[o]=!0})};return _0(t)?n(t):n(String(t).split(e)),r},K$t=()=>{},X$t=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Q$t(t){return!!(t&&Gs(t.append)&&t[XRe]==="FormData"&&t[cL])}var J$t=t=>{let e=new Array(10),r=(n,i)=>{if(AS(n)){if(e.indexOf(n)>=0)return;if(IS(n))return n;if(!("toJSON"in n)){e[i]=n;let o=_0(n)?[]:{};return MS(n,(l,f)=>{let d=r(l,i+1);!y0(d)&&(o[f]=d)}),e[i]=void 0,o}}return n};return r(t,0)},eHt=uc("AsyncFunction"),tHt=t=>t&&(AS(t)||Gs(t))&&Gs(t.then)&&Gs(t.catch),nOe=((t,e)=>t?setImmediate:e?((r,n)=>(Hg.addEventListener("message",({source:i,data:o})=>{i===Hg&&o===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Hg.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Gs(Hg.postMessage)),rHt=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Hg):typeof T!="undefined"&&T.nextTick||nOe,nHt=t=>t!=null&&Gs(t[cL]),Ye={isArray:_0,isArrayBuffer:QRe,isBuffer:IS,isFormData:C$t,isArrayBufferView:x$t,isString:b$t,isNumber:JRe,isBoolean:w$t,isObject:AS,isPlainObject:uL,isEmptyObject:E$t,isReadableStream:R$t,isRequest:O$t,isResponse:L$t,isHeaders:D$t,isUndefined:y0,isDate:S$t,isFile:T$t,isBlob:I$t,isRegExp:W$t,isFunction:Gs,isStream:M$t,isURLSearchParams:P$t,isTypedArray:B$t,isFileList:A$t,forEach:MS,merge:vW,extend:k$t,trim:N$t,stripBOM:q$t,inherits:F$t,toFlatObject:j$t,kindOf:fL,kindOfTest:uc,endsWith:z$t,toArray:U$t,forEachEntry:V$t,matchAll:G$t,isHTMLForm:$$t,hasOwnProperty:KRe,hasOwnProp:KRe,reduceDescriptors:rOe,freezeMethods:Z$t,toObjectSet:Y$t,toCamelCase:H$t,noop:K$t,toFiniteNumber:X$t,findKey:eOe,global:Hg,isContextDefined:tOe,isSpecCompliantForm:Q$t,toJSONObject:J$t,isAsyncFn:eHt,isThenable:tHt,setImmediate:nOe,asap:rHt,isIterable:nHt};p();p();p();p();p();function x0(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(x0,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});var iOe=x0.prototype,oOe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{oOe[t]={value:t}});Object.defineProperties(x0,oOe);Object.defineProperty(iOe,"isAxiosError",{value:!0});x0.from=(t,e,r,n,i,o)=>{let l=Object.create(iOe);Ye.toFlatObject(t,l,function(x){return x!==Error.prototype},v=>v!=="isAxiosError");let f=t&&t.message?t.message:"Error",d=e==null&&t?t.code:e;return x0.call(l,f,d,r,n,i),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",o&&Object.assign(l,o),l};var kr=x0;p();var pL=null;function _W(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function sOe(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function aOe(t,e,r){return t?t.concat(e).map(function(i,o){return i=sOe(i),!r&&o?"["+i+"]":i}).join(r?".":""):e}function iHt(t){return Ye.isArray(t)&&!t.some(_W)}var oHt=Ye.toFlatObject(Ye,{},null,function(e){return /^is[A-Z]/.test(e)});function aHt(t,e,r){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new(pL||FormData),r=Ye.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,D){return!Ye.isUndefined(D[j])});let n=r.metaTokens,i=r.visitor||x,o=r.dots,l=r.indexes,d=(r.Blob||typeof Blob!="undefined"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function v(N){if(N===null)return"";if(Ye.isDate(N))return N.toISOString();if(Ye.isBoolean(N))return N.toString();if(!d&&Ye.isBlob(N))throw new kr("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(N)||Ye.isTypedArray(N)?d&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function x(N,j,D){let F=N;if(N&&!D&&typeof N=="object"){if(Ye.endsWith(j,"{}"))j=n?j:j.slice(0,-2),N=JSON.stringify(N);else if(Ye.isArray(N)&&iHt(N)||(Ye.isFileList(N)||Ye.endsWith(j,"[]"))&&(F=Ye.toArray(N)))return j=sOe(j),F.forEach(function($,Z){!(Ye.isUndefined($)||$===null)&&e.append(l===!0?aOe([j],Z,o):l===null?j:j+"[]",v($))}),!1}return _W(N)?!0:(e.append(aOe(D,j,o),v(N)),!1)}let b=[],A=Object.assign(oHt,{defaultVisitor:x,convertValue:v,isVisitable:_W});function P(N,j){if(!Ye.isUndefined(N)){if(b.indexOf(N)!==-1)throw Error("Circular reference detected in "+j.join("."));b.push(N),Ye.forEach(N,function(F,U){(!(Ye.isUndefined(F)||F===null)&&i.call(e,F,Ye.isString(U)?U.trim():U,j,A))===!0&&P(F,j?j.concat(U):[U])}),b.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return P(t),e}var Nd=aHt;function lOe(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function uOe(t,e){this._pairs=[],t&&Nd(t,this,e)}var cOe=uOe.prototype;cOe.append=function(e,r){this._pairs.push([e,r])};cOe.toString=function(e){let r=e?function(n){return e.call(this,n,lOe)}:lOe;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};var dL=uOe;function sHt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function CS(t,e,r){if(!e)return t;let n=r&&r.encode||sHt;Ye.isFunction(r)&&(r={serialize:r});let i=r&&r.serialize,o;if(i?o=i(e,r):o=Ye.isURLSearchParams(e)?e.toString():new dL(e,r).toString(n),o){let l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}p();var xW=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(n){n!==null&&e(n)})}},bW=xW;p();p();p();p();var mL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};p();p();p();p();var fOe=typeof URLSearchParams!="undefined"?URLSearchParams:dL;p();var hOe=typeof FormData!="undefined"?FormData:null;p();var pOe=typeof Blob!="undefined"?Blob:null;var dOe={isBrowser:!0,classes:{URLSearchParams:fOe,FormData:hOe,Blob:pOe},protocols:["http","https","file","blob","url","data"]};var SW={};rJ(SW,{hasBrowserEnv:()=>EW,hasStandardBrowserEnv:()=>lHt,hasStandardBrowserWebWorkerEnv:()=>uHt,navigator:()=>wW,origin:()=>cHt});p();var EW=typeof window!="undefined"&&typeof document!="undefined",wW=typeof navigator=="object"&&navigator||void 0,lHt=EW&&(!wW||["ReactNative","NativeScript","NS"].indexOf(wW.product)<0),uHt=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",cHt=EW&&window.location.href||"http://localhost";var ji=mt(mt({},SW),dOe);function TW(t,e){return Nd(t,new ji.classes.URLSearchParams,mt({visitor:function(r,n,i,o){return ji.isNode&&Ye.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}p();function fHt(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hHt(t){let e={},r=Object.keys(t),n,i=r.length,o;for(n=0;n<i;n++)o=r[n],e[o]=t[o];return e}function pHt(t){function e(r,n,i,o){let l=r[o++];if(l==="__proto__")return!0;let f=Number.isFinite(+l),d=o>=r.length;return l=!l&&Ye.isArray(i)?i.length:l,d?(Ye.hasOwnProp(i,l)?i[l]=[i[l],n]:i[l]=n,!f):((!i[l]||!Ye.isObject(i[l]))&&(i[l]=[]),e(r,n,i[l],o)&&Ye.isArray(i[l])&&(i[l]=hHt(i[l])),!f)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){let r={};return Ye.forEachEntry(t,(n,i)=>{e(fHt(n),i,r,0)}),r}return null}var gL=pHt;function dHt(t,e,r){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var IW={transitional:mL,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){let n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=Ye.isObject(e);if(o&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(gL(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return TW(e,this.formSerializer).toString();if((f=Ye.isFileList(e))||n.indexOf("multipart/form-data")>-1){let d=this.env&&this.env.FormData;return Nd(f?{"files[]":e}:e,d&&new d,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),dHt(e)):e}],transformResponse:[function(e){let r=this.transitional||IW.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(n&&!this.responseType||i)){let l=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(f){if(l)throw f.name==="SyntaxError"?kr.from(f,kr.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ji.classes.FormData,Blob:ji.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{IW.headers[t]={}});var b0=IW;p();p();var mHt=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mOe=t=>{let e={},r,n,i;return t&&t.split(`
`).forEach(function(l){i=l.indexOf(":"),r=l.substring(0,i).trim().toLowerCase(),n=l.substring(i+1).trim(),!(!r||e[r]&&mHt[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};var gOe=Symbol("internals");function PS(t){return t&&String(t).trim().toLowerCase()}function vL(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(vL):String(t)}function gHt(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}var vHt=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function AW(t,e,r,n,i){if(Ye.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!Ye.isString(e)){if(Ye.isString(n))return e.indexOf(n)!==-1;if(Ye.isRegExp(n))return n.test(e)}}function yHt(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function _Ht(t,e){let r=Ye.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,o,l){return this[n].call(this,e,i,o,l)},configurable:!0})})}var w0=class{constructor(e){e&&this.set(e)}set(e,r,n){let i=this;function o(f,d,v){let x=PS(d);if(!x)throw new Error("header name must be a non-empty string");let b=Ye.findKey(i,x);(!b||i[b]===void 0||v===!0||v===void 0&&i[b]!==!1)&&(i[b||d]=vL(f))}let l=(f,d)=>Ye.forEach(f,(v,x)=>o(v,x,d));if(Ye.isPlainObject(e)||e instanceof this.constructor)l(e,r);else if(Ye.isString(e)&&(e=e.trim())&&!vHt(e))l(mOe(e),r);else if(Ye.isObject(e)&&Ye.isIterable(e)){let f={},d,v;for(let x of e){if(!Ye.isArray(x))throw TypeError("Object iterator must return a key-value pair");f[v=x[0]]=(d=f[v])?Ye.isArray(d)?[...d,x[1]]:[d,x[1]]:x[1]}l(f,r)}else e!=null&&o(r,e,n);return this}get(e,r){if(e=PS(e),e){let n=Ye.findKey(this,e);if(n){let i=this[n];if(!r)return i;if(r===!0)return gHt(i);if(Ye.isFunction(r))return r.call(this,i,n);if(Ye.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=PS(e),e){let n=Ye.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||AW(this,this[n],n,r)))}return!1}delete(e,r){let n=this,i=!1;function o(l){if(l=PS(l),l){let f=Ye.findKey(n,l);f&&(!r||AW(n,n[f],f,r))&&(delete n[f],i=!0)}}return Ye.isArray(e)?e.forEach(o):o(e),i}clear(e){let r=Object.keys(this),n=r.length,i=!1;for(;n--;){let o=r[n];(!e||AW(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){let r=this,n={};return Ye.forEach(this,(i,o)=>{let l=Ye.findKey(n,o);if(l){r[l]=vL(i),delete r[o];return}let f=e?yHt(o):String(o).trim();f!==o&&delete r[o],r[f]=vL(i),n[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return Ye.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&Ye.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){let n=(this[gOe]=this[gOe]={accessors:{}}).accessors,i=this.prototype;function o(l){let f=PS(l);n[f]||(_Ht(i,l),n[f]=!0)}return Ye.isArray(e)?e.forEach(o):o(e),this}};w0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(w0.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Ye.freezeMethods(w0);var Fo=w0;function RS(t,e){let r=this||b0,n=e||r,i=Fo.from(n.headers),o=n.data;return Ye.forEach(t,function(f){o=f.call(r,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}p();function OS(t){return!!(t&&t.__CANCEL__)}p();function vOe(t,e,r){kr.call(this,t==null?"canceled":t,kr.ERR_CANCELED,e,r),this.name="CanceledError"}Ye.inherits(vOe,kr,{__CANCEL__:!0});var cf=vOe;p();p();p();function LS(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new kr("Request failed with status code "+r.status,[kr.ERR_BAD_REQUEST,kr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}p();function MW(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}p();p();function xHt(t,e){t=t||10;let r=new Array(t),n=new Array(t),i=0,o=0,l;return e=e!==void 0?e:1e3,function(d){let v=Date.now(),x=n[o];l||(l=v),r[i]=d,n[i]=v;let b=o,A=0;for(;b!==i;)A+=r[b++],b=b%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),v-l<e)return;let P=x&&v-x;return P?Math.round(A*1e3/P):void 0}}var yOe=xHt;p();function bHt(t,e){let r=0,n=1e3/e,i,o,l=(v,x=Date.now())=>{r=x,i=null,o&&(clearTimeout(o),o=null),t(...v)};return[(...v)=>{let x=Date.now(),b=x-r;b>=n?l(v,x):(i=v,o||(o=setTimeout(()=>{o=null,l(i)},n-b)))},()=>i&&l(i)]}var _Oe=bHt;var E0=(t,e,r=3)=>{let n=0,i=yOe(50,250);return _Oe(o=>{let l=o.loaded,f=o.lengthComputable?o.total:void 0,d=l-n,v=i(d),x=l<=f;n=l;let b={loaded:l,total:f,progress:f?l/f:void 0,bytes:d,rate:v||void 0,estimated:v&&f&&x?(f-l)/v:void 0,event:o,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(b)},r)},CW=(t,e)=>{let r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},PW=t=>(...e)=>Ye.asap(()=>t(...e));p();p();var xOe=ji.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,ji.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(ji.origin),ji.navigator&&/(msie|trident)/i.test(ji.navigator.userAgent)):()=>!0;p();var bOe=ji.hasStandardBrowserEnv?{write(t,e,r,n,i,o){let l=[t+"="+encodeURIComponent(e)];Ye.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Ye.isString(n)&&l.push("path="+n),Ye.isString(i)&&l.push("domain="+i),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){let e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};p();p();function RW(t){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}p();function OW(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function DS(t,e,r){let n=!RW(e);return t&&(n||r==!1)?OW(t,e):e}p();var wOe=t=>t instanceof Fo?mt({},t):t;function cc(t,e){e=e||{};let r={};function n(v,x,b,A){return Ye.isPlainObject(v)&&Ye.isPlainObject(x)?Ye.merge.call({caseless:A},v,x):Ye.isPlainObject(x)?Ye.merge({},x):Ye.isArray(x)?x.slice():x}function i(v,x,b,A){if(Ye.isUndefined(x)){if(!Ye.isUndefined(v))return n(void 0,v,b,A)}else return n(v,x,b,A)}function o(v,x){if(!Ye.isUndefined(x))return n(void 0,x)}function l(v,x){if(Ye.isUndefined(x)){if(!Ye.isUndefined(v))return n(void 0,v)}else return n(void 0,x)}function f(v,x,b){if(b in e)return n(v,x);if(b in t)return n(void 0,v)}let d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(v,x,b)=>i(wOe(v),wOe(x),b,!0)};return Ye.forEach(Object.keys(mt(mt({},t),e)),function(x){let b=d[x]||i,A=b(t[x],e[x],x);Ye.isUndefined(A)&&b!==f||(r[x]=A)}),r}var yL=t=>{let e=cc({},t),{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:l,auth:f}=e;if(e.headers=l=Fo.from(l),e.url=CS(DS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),Ye.isFormData(r)){if(ji.hasStandardBrowserEnv||ji.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(Ye.isFunction(r.getHeaders)){let d=r.getHeaders(),v=["content-type","content-length"];Object.entries(d).forEach(([x,b])=>{v.includes(x.toLowerCase())&&l.set(x,b)})}}if(ji.hasStandardBrowserEnv&&(n&&Ye.isFunction(n)&&(n=n(e)),n||n!==!1&&xOe(e.url))){let d=i&&o&&bOe.read(o);d&&l.set(i,d)}return e};var wHt=typeof XMLHttpRequest!="undefined",EOe=wHt&&function(t){return new Promise(function(r,n){let i=yL(t),o=i.data,l=Fo.from(i.headers).normalize(),{responseType:f,onUploadProgress:d,onDownloadProgress:v}=i,x,b,A,P,N;function j(){P&&P(),N&&N(),i.cancelToken&&i.cancelToken.unsubscribe(x),i.signal&&i.signal.removeEventListener("abort",x)}let D=new XMLHttpRequest;D.open(i.method.toUpperCase(),i.url,!0),D.timeout=i.timeout;function F(){if(!D)return;let $=Fo.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ie={data:!f||f==="text"||f==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:$,config:t,request:D};LS(function(ae){r(ae),j()},function(ae){n(ae),j()},ie),D=null}"onloadend"in D?D.onloadend=F:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(F)},D.onabort=function(){D&&(n(new kr("Request aborted",kr.ECONNABORTED,t,D)),D=null)},D.onerror=function(Z){let ie=Z&&Z.message?Z.message:"Network Error",ne=new kr(ie,kr.ERR_NETWORK,t,D);ne.event=Z||null,n(ne),D=null},D.ontimeout=function(){let Z=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",ie=i.transitional||mL;i.timeoutErrorMessage&&(Z=i.timeoutErrorMessage),n(new kr(Z,ie.clarifyTimeoutError?kr.ETIMEDOUT:kr.ECONNABORTED,t,D)),D=null},o===void 0&&l.setContentType(null),"setRequestHeader"in D&&Ye.forEach(l.toJSON(),function(Z,ie){D.setRequestHeader(ie,Z)}),Ye.isUndefined(i.withCredentials)||(D.withCredentials=!!i.withCredentials),f&&f!=="json"&&(D.responseType=i.responseType),v&&([A,N]=E0(v,!0),D.addEventListener("progress",A)),d&&D.upload&&([b,P]=E0(d),D.upload.addEventListener("progress",b),D.upload.addEventListener("loadend",P)),(i.cancelToken||i.signal)&&(x=$=>{D&&(n(!$||$.type?new cf(null,t,D):$),D.abort(),D=null)},i.cancelToken&&i.cancelToken.subscribe(x),i.signal&&(i.signal.aborted?x():i.signal.addEventListener("abort",x)));let U=MW(i.url);if(U&&ji.protocols.indexOf(U)===-1){n(new kr("Unsupported protocol "+U+":",kr.ERR_BAD_REQUEST,t));return}D.send(o||null)})};p();p();var EHt=(t,e)=>{let{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i,o=function(v){if(!i){i=!0,f();let x=v instanceof Error?v:this.reason;n.abort(x instanceof kr?x:new cf(x instanceof Error?x.message:x))}},l=e&&setTimeout(()=>{l=null,o(new kr(`timeout ${e} of ms exceeded`,kr.ETIMEDOUT))},e),f=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(v=>{v.unsubscribe?v.unsubscribe(o):v.removeEventListener("abort",o)}),t=null)};t.forEach(v=>v.addEventListener("abort",o));let{signal:d}=n;return d.unsubscribe=()=>Ye.asap(f),d}},SOe=EHt;p();var SHt=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},THt=function(t,e){return HF(this,null,function*(){try{for(var r=iJ(IHt(t)),n,i,o;n=!(i=yield new Jm(r.next())).done;n=!1){let l=i.value;yield*WF(SHt(l,e))}}catch(i){o=[i]}finally{try{n&&(i=r.return)&&(yield new Jm(i.call(r)))}finally{if(o)throw o[0]}}})},IHt=function(t){return HF(this,null,function*(){if(t[Symbol.asyncIterator]){yield*WF(t);return}let e=t.getReader();try{for(;;){let{done:r,value:n}=yield new Jm(e.read());if(r)break;yield n}}finally{yield new Jm(e.cancel())}})},LW=(t,e,r,n)=>{let i=THt(t,e),o=0,l,f=v=>{l||(l=!0,n&&n(v))};return new ReadableStream({pull(v){return Pn(this,null,function*(){try{let{done:x,value:b}=yield i.next();if(x){f(),v.close();return}let A=b.byteLength;if(r){let P=o+=A;r(P)}v.enqueue(new Uint8Array(b))}catch(x){throw f(x),x}})},cancel(v){return f(v),i.return()}},{highWaterMark:2})};var TOe=64*1024,{isFunction:_L}=Ye,AHt=(({Request:t,Response:e})=>({Request:t,Response:e}))(Ye.global),{ReadableStream:IOe,TextEncoder:AOe}=Ye.global,MOe=(t,...e)=>{try{return!!t(...e)}catch(r){return!1}},MHt=t=>{t=Ye.merge.call({skipUndefined:!0},AHt,t);let{fetch:e,Request:r,Response:n}=t,i=e?_L(e):typeof fetch=="function",o=_L(r),l=_L(n);if(!i)return!1;let f=i&&_L(IOe),d=i&&(typeof AOe=="function"?(N=>j=>N.encode(j))(new AOe):N=>Pn(null,null,function*(){return new Uint8Array(yield new r(N).arrayBuffer())})),v=o&&f&&MOe(()=>{let N=!1,j=new r(ji.origin,{body:new IOe,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!j}),x=l&&f&&MOe(()=>Ye.isReadableStream(new n("").body)),b={stream:x&&(N=>N.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!b[N]&&(b[N]=(j,D)=>{let F=j&&j[N];if(F)return F.call(j);throw new kr(`Response type '${N}' is not supported`,kr.ERR_NOT_SUPPORT,D)})});let A=N=>Pn(null,null,function*(){if(N==null)return 0;if(Ye.isBlob(N))return N.size;if(Ye.isSpecCompliantForm(N))return(yield new r(ji.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(N)||Ye.isArrayBuffer(N))return N.byteLength;if(Ye.isURLSearchParams(N)&&(N=N+""),Ye.isString(N))return(yield d(N)).byteLength}),P=(N,j)=>Pn(null,null,function*(){let D=Ye.toFiniteNumber(N.getContentLength());return D==null?A(j):D});return N=>Pn(null,null,function*(){let{url:j,method:D,data:F,signal:U,cancelToken:$,timeout:Z,onDownloadProgress:ie,onUploadProgress:ne,responseType:ae,headers:ye,withCredentials:ge="same-origin",fetchOptions:de}=yL(N),be=e||fetch;ae=ae?(ae+"").toLowerCase():"text";let Ne=SOe([U,$&&$.toAbortSignal()],Z),Me=null,ke=Ne&&Ne.unsubscribe&&(()=>{Ne.unsubscribe()}),He;try{if(ne&&v&&D!=="get"&&D!=="head"&&(He=yield P(ye,F))!==0){let dt=new r(j,{method:"POST",body:F,duplex:"half"}),ze;if(Ye.isFormData(F)&&(ze=dt.headers.get("content-type"))&&ye.setContentType(ze),dt.body){let[Dt,Ot]=CW(He,E0(PW(ne)));F=LW(dt.body,TOe,Dt,Ot)}}Ye.isString(ge)||(ge=ge?"include":"omit");let Ke=o&&"credentials"in r.prototype,Je=on(mt({},de),{signal:Ne,method:D.toUpperCase(),headers:ye.normalize().toJSON(),body:F,duplex:"half",credentials:Ke?ge:void 0});Me=o&&new r(j,Je);let We=yield o?be(Me,de):be(j,Je),lt=x&&(ae==="stream"||ae==="response");if(x&&(ie||lt&&ke)){let dt={};["status","statusText","headers"].forEach(Ue=>{dt[Ue]=We[Ue]});let ze=Ye.toFiniteNumber(We.headers.get("content-length")),[Dt,Ot]=ie&&CW(ze,E0(PW(ie),!0))||[];We=new n(LW(We.body,TOe,Dt,()=>{Ot&&Ot(),ke&&ke()}),dt)}ae=ae||"text";let pt=yield b[Ye.findKey(b,ae)||"text"](We,N);return!lt&&ke&&ke(),yield new Promise((dt,ze)=>{LS(dt,ze,{data:pt,headers:Fo.from(We.headers),status:We.status,statusText:We.statusText,config:N,request:Me})})}catch(Ke){throw ke&&ke(),Ke&&Ke.name==="TypeError"&&/Load failed|fetch/i.test(Ke.message)?Object.assign(new kr("Network Error",kr.ERR_NETWORK,N,Me),{cause:Ke.cause||Ke}):kr.from(Ke,Ke&&Ke.code,N,Me)}})},CHt=new Map,DW=t=>{let e=t?t.env:{},{fetch:r,Request:n,Response:i}=e,o=[n,i,r],l=o.length,f=l,d,v,x=CHt;for(;f--;)d=o[f],v=x.get(d),v===void 0&&x.set(d,v=f?new Map:MHt(e)),x=v;return v},u8r=DW();var NW={http:pL,xhr:EOe,fetch:{get:DW}};Ye.forEach(NW,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(r){}Object.defineProperty(t,"adapterName",{value:e})}});var COe=t=>`- ${t}`,RHt=t=>Ye.isFunction(t)||t===null||t===!1,xL={getAdapter:(t,e)=>{t=Ye.isArray(t)?t:[t];let{length:r}=t,n,i,o={};for(let l=0;l<r;l++){n=t[l];let f;if(i=n,!RHt(n)&&(i=NW[(f=String(n)).toLowerCase()],i===void 0))throw new kr(`Unknown adapter '${f}'`);if(i&&(Ye.isFunction(i)||(i=i.get(e))))break;o[f||"#"+l]=i}if(!i){let l=Object.entries(o).map(([d,v])=>`adapter ${d} `+(v===!1?"is not supported by the environment":"is not available in the build")),f=r?l.length>1?`since :
`+l.map(COe).join(`
`):" "+COe(l[0]):"as no adapter specified";throw new kr("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return i},adapters:NW};function kW(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new cf(null,t)}function bL(t){return kW(t),t.headers=Fo.from(t.headers),t.data=RS.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xL.getAdapter(t.adapter||b0.adapter,t)(t).then(function(n){return kW(t),n.data=RS.call(t,t.transformResponse,n),n.headers=Fo.from(n.headers),n},function(n){return OS(n)||(kW(t),n&&n.response&&(n.response.data=RS.call(t,t.transformResponse,n.response),n.response.headers=Fo.from(n.response.headers))),Promise.reject(n)})}p();p();var wL="1.12.2";var EL={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{EL[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var POe={};EL.transitional=function(e,r,n){function i(o,l){return"[Axios v"+wL+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,f)=>{if(e===!1)throw new kr(i(l," has been removed"+(r?" in "+r:"")),kr.ERR_DEPRECATED);return r&&!POe[l]&&(POe[l]=!0,console.warn(i(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,l,f):!0}};EL.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function OHt(t,e,r){if(typeof t!="object")throw new kr("options must be an object",kr.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),i=n.length;for(;i-->0;){let o=n[i],l=e[o];if(l){let f=t[o],d=f===void 0||l(f,o,t);if(d!==!0)throw new kr("option "+o+" must be "+d,kr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new kr("Unknown option "+o,kr.ERR_BAD_OPTION)}}var NS={assertOptions:OHt,validators:EL};var ff=NS.validators,S0=class{constructor(e){this.defaults=e||{},this.interceptors={request:new bW,response:new bW}}request(e,r){return Pn(this,null,function*(){try{return yield this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;let o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch(l){}}throw n}})}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=cc(this.defaults,r);let{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&NS.assertOptions(n,{silentJSONParsing:ff.transitional(ff.boolean),forcedJSONParsing:ff.transitional(ff.boolean),clarifyTimeoutError:ff.transitional(ff.boolean)},!1),i!=null&&(Ye.isFunction(i)?r.paramsSerializer={serialize:i}:NS.assertOptions(i,{encode:ff.function,serialize:ff.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),NS.assertOptions(r,{baseUrl:ff.spelling("baseURL"),withXsrfToken:ff.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&Ye.merge(o.common,o[r.method]);o&&Ye.forEach(["delete","get","head","post","put","patch","common"],N=>{delete o[N]}),r.headers=Fo.concat(l,o);let f=[],d=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(d=d&&j.synchronous,f.unshift(j.fulfilled,j.rejected))});let v=[];this.interceptors.response.forEach(function(j){v.push(j.fulfilled,j.rejected)});let x,b=0,A;if(!d){let N=[bL.bind(this),void 0];for(N.unshift(...f),N.push(...v),A=N.length,x=Promise.resolve(r);b<A;)x=x.then(N[b++],N[b++]);return x}A=f.length;let P=r;for(;b<A;){let N=f[b++],j=f[b++];try{P=N(P)}catch(D){j.call(this,D);break}}try{x=bL.call(this,P)}catch(N){return Promise.reject(N)}for(b=0,A=v.length;b<A;)x=x.then(v[b++],v[b++]);return x}getUri(e){e=cc(this.defaults,e);let r=DS(e.baseURL,e.url,e.allowAbsoluteUrls);return CS(r,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){S0.prototype[e]=function(r,n){return this.request(cc(n||{},{method:e,url:r,data:(n||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function r(n){return function(o,l,f){return this.request(cc(f||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}S0.prototype[e]=r(),S0.prototype[e+"Form"]=r(!0)});var kS=S0;p();var qW=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});let n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-->0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o,l=new Promise(f=>{n.subscribe(f),o=f}).then(i);return l.cancel=function(){n.unsubscribe(o)},l},e(function(o,l,f){n.reason||(n.reason=new cf(o,l,f),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){let e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new t(function(i){e=i}),cancel:e}}},ROe=qW;p();function FW(t){return function(r){return t.apply(null,r)}}p();function jW(t){return Ye.isObject(t)&&t.isAxiosError===!0}p();var zW={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zW).forEach(([t,e])=>{zW[e]=t});var OOe=zW;function LOe(t){let e=new kS(t),r=TS(kS.prototype.request,e);return Ye.extend(r,kS.prototype,e,{allOwnKeys:!0}),Ye.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return LOe(cc(t,i))},r}var wo=LOe(b0);wo.Axios=kS;wo.CanceledError=cf;wo.CancelToken=ROe;wo.isCancel=OS;wo.VERSION=wL;wo.toFormData=Nd;wo.AxiosError=kr;wo.Cancel=wo.CanceledError;wo.all=function(e){return Promise.all(e)};wo.spread=FW;wo.isAxiosError=jW;wo.mergeConfig=cc;wo.AxiosHeaders=Fo;wo.formToJSON=t=>gL(Ye.isHTMLForm(t)?new FormData(t):t);wo.getAdapter=xL.getAdapter;wo.HttpStatusCode=OOe;wo.default=wo;var hf=wo;var{Axios:_Zr,AxiosError:xZr,CanceledError:bZr,isCancel:wZr,CancelToken:EZr,VERSION:SZr,all:TZr,Cancel:IZr,isAxiosError:AZr,spread:MZr,toFormData:CZr,AxiosHeaders:PZr,HttpStatusCode:RZr,formToJSON:OZr,getAdapter:LZr,mergeConfig:DZr}=hf;p();var qS=Fe(SL(),1);p();p();var QHt=Fe(TL(),1);p();var GW=(t,e="control-feedback-container")=>{let r=document.getElementById(e);if(r===null){let n=t.getCanvasContainer();r=document.createElement("div"),r.id=e,n.appendChild(r)}return r};p();p();p();p();p();var GOe={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"};p();var eWt=Fe(SL(),1);function dn(t){return t!=null}function Wg(t){return typeof t=="string"||t instanceof String}function Lr(t){let e=Di.getLanguageDict();if(e===void 0)throw new Error("Dictionary is undefined.");let r=e[t];return r===void 0?(console.warn(`Translation for key "${t}" was not found in dictionary.`),""):r}var $Oe={EN:"en",DE:"de"},tWt=dn(T.env.DEV_MODE_SECRET)&&T.env.DEV_MODE_SECRET!==""&&dn(T.env.DEV_MODE_NAME)&&T.env.DEV_MODE_NAME!=="",IL=()=>({"Dev-Mode-Secret":T.env.DEV_MODE_SECRET,"Dev-Mode-Name":T.env.DEV_MODE_NAME}),ps={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:$Oe.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},Di={axiosApiInstance:null,appendSettings(t){ps=Object.assign({},ps,t)},isDebug(){var t;return!!((t=T==null?void 0:T.env)!=null&&t.VKF_DEBUG)},getSettings(){return ps},getBaseMaps(){return ps.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},ps.MAPVIEW_PARAMS)},getLanguageDict(){return ps.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return ps.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},ps.TERRAIN_TILES)},getUsername(){return ps.USERNAME},isUserAuthenticated(){return ps.USER_ISAUTHENTICATED===!0},updateSettings(t){ps=t},_initAxiosApiInstance(){let t=ps.API_GEOREFERENCE_BASEURL,e=Wg(t)&&t.length===0;if(!dn(t)||e)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:t,withCredentials:!0},tWt?{headers:{get:IL(),post:IL(),put:IL(),delete:IL()}}:{});this.axiosApiInstance=hf.create(r)},getGeoreferenceApiClient(){return dn(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let t=ps.MARKER_URL;if(!dn(t))throw new Error("The marker icon url is not set.");return{id:ps.MARKER_IMAGE_ID,url:t}},getUserRole(){return ps.USER_ROLE}};p();var Av=Fe(Et(),1);p();var Fa=Fe(Et()),uLe=Fe(No());function rWt(t){return!!t&&typeof t.then=="function"}var so=rWt;function nWt(t,e){if(t!=null)return t;throw new Error(e!=null?e:"Got unexpected null or undefined")}var $n=nWt,RL=class{},iWt=new RL,f8={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(t){return t.state===this.state&&t.contents===this.contents},map(t){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let r=t(this.contents);return so(r)?I0(r.then(n=>({__value:n}))):h8(r)}catch(r){return so(r)?I0(r.next(()=>t(this.contents))):p8(r)}if(this.state==="loading")return I0(this.contents.then(r=>({__value:t(r.__value)})).catch(r=>{if(so(r))return r.then(()=>t(this.contents));throw r}));throw new Error("Invalid Loadable state")}};function h8(t){return Object.freeze(on(mt({state:"hasValue",contents:t},f8),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function p8(t){return Object.freeze(on(mt({state:"hasError",contents:t},f8),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function I0(t){return Object.freeze(on(mt({state:"loading",contents:t},f8),{getValue(){throw this.contents.then(({__value:e})=>e)},toPromise(){return this.contents.then(({__value:e})=>e)},promiseMaybe(){return this.contents.then(({__value:e})=>e)},promiseOrThrow(){return this.contents.then(({__value:e})=>e)}}))}function oWt(){return I0(new Promise(()=>{}))}function aWt(t){return t.every(e=>e.state==="hasValue")?h8(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?p8($n(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):I0(Promise.all(t.map(e=>e.contents)).then(e=>({__value:e})))}var YS={loadableWithValue:h8,loadableWithError:p8,loadableWithPromise:I0,loadableLoading:oWt,loadableAll:aWt,Canceled:RL,CANCELED:iWt},$W,cLe=($W=Fa.default.useMutableSource)!==null&&$W!==void 0?$W:Fa.default.unstable_useMutableSource;function sWt(){return cLe&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var fLe={mutableSourceExists:sWt,useMutableSource:cLe},{mutableSourceExists:lWt}=fLe,d8=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function m8(t){var e;return t==="recoil_early_rendering_2021"&&!lWt()?!1:(e=d8.get(t))!==null&&e!==void 0?e:!1}m8.setPass=t=>{d8.set(t,!0)};m8.setFail=t=>{d8.set(t,!1)};var ri=m8;function uWt(t,e,{error:r}={}){return null}var cWt=uWt,pf=cWt;function fWt(t,e){let r=new Set(t);return r.add(e),r}function hWt(t,e){let r=new Set(t);return r.delete(e),r}function pWt(t,e,r){let n=new Map(t);return n.set(e,r),n}function dWt(t,e,r){let n=new Map(t);return n.set(e,r(n.get(e))),n}function mWt(t,e){let r=new Map(t);return r.delete(e),r}function gWt(t,e){let r=new Map(t);return e.forEach(n=>r.delete(n)),r}var hLe={setByAddingToSet:fWt,setByDeletingFromSet:hWt,mapBySettingInMap:pWt,mapByUpdatingInMap:dWt,mapByDeletingFromMap:mWt,mapByDeletingMultipleFromMap:gWt};function*vWt(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}var pLe=vWt;function yWt(t,e){return function*(){let r=0;for(let n of t)yield e(n,r++)}()}var dLe=yWt;function _Wt(t,...e){}var xWt=_Wt,g8=xWt;function xn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var HS=class{constructor(e){xn(this,"key",void 0),this.key=e}},OL=class extends HS{},LL=class extends HS{};function bWt(t){return t instanceof OL||t instanceof LL}var GL={AbstractRecoilValue:HS,RecoilState:OL,RecoilValueReadOnly:LL,isRecoilValue:bWt},wWt=GL.AbstractRecoilValue,EWt=GL.RecoilState,SWt=GL.RecoilValueReadOnly,TWt=GL.isRecoilValue,qd=Object.freeze({__proto__:null,AbstractRecoilValue:wWt,RecoilState:EWt,RecoilValueReadOnly:SWt,isRecoilValue:TWt}),DL=class{},IWt=new DL,YW=class extends Error{constructor(e){super(`Tried to set the value of Recoil selector ${e} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},Yg=new Map,v8=new Map;function AWt(t){return dLe(t,e=>$n(v8.get(e)))}function MWt(t){if(Yg.has(t.key)){let r=`Duplicate atom key "${t.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(r)}Yg.set(t.key,t);let e=t.set==null?new qd.RecoilValueReadOnly(t.key):new qd.RecoilState(t.key);return v8.set(t.key,e),e}var NL=class extends Error{};function CWt(t){let e=Yg.get(t);if(e==null)throw new NL(`Missing definition for RecoilValue: "${t}""`);return e}function PWt(t){return Yg.get(t)}var kL=new Map;function RWt(t){var e;if(!ri("recoil_memory_managament_2020"))return;let r=Yg.get(t);if(!(r==null||(e=r.shouldDeleteConfigOnRelease)===null||e===void 0)&&e.call(r)){var n;Yg.delete(t),(n=mLe(t))===null||n===void 0||n(),kL.delete(t)}}function OWt(t,e){ri("recoil_memory_managament_2020")&&(e===void 0?kL.delete(t):kL.set(t,e))}function mLe(t){return kL.get(t)}var hu={nodes:Yg,recoilValues:v8,registerNode:MWt,getNode:CWt,getNodeMaybe:PWt,deleteNodeConfigIfPossible:RWt,setConfigDeletionHandler:OWt,getConfigDeletionHandler:mLe,recoilValuesForKeys:AWt,NodeMissingError:NL,DefaultValue:DL,DEFAULT_VALUE:IWt,RecoilValueNotReady:YW},qL=class{};function LWt(){return new qL}var $L={RetentionZone:qL,retentionZone:LWt},{setByAddingToSet:DWt}=hLe,{getNode:HL,getNodeMaybe:NWt,recoilValuesForKeys:HOe}=hu,{RetentionZone:WOe}=$L,kWt=Object.freeze(new Set),KW=class extends Error{};function qWt(t,e,r){if(!ri("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=t.getState().retention;function i(o){let l=n.get(o);l||n.set(o,l=new Set),l.add(e)}if(r instanceof WOe)i(r);else if(Array.isArray(r))for(let o of r)i(o);return()=>{if(!ri("recoil_memory_managament_2020"))return;let o=t.getState().retention.nodesRetainedByZone;function l(f){let d=o.get(f);d&&d.delete(e),d&&d.size===0&&o.delete(f)}if(r instanceof WOe)l(r);else if(Array.isArray(r))for(let f of r)l(f)}}function y8(t,e,r,n){let i=t.getState();if(i.nodeCleanupFunctions.has(r))return;let o=HL(r),l=qWt(t,r,o.retainedBy),f=o.init(t,e,n);i.nodeCleanupFunctions.set(r,()=>{f(),l()})}function FWt(t,e){var r;let n=t.getState();(r=n.nodeCleanupFunctions.get(e))===null||r===void 0||r(),n.nodeCleanupFunctions.delete(e)}function jWt(t,e,r){return y8(t,e,r,"get"),HL(r).get(t,e)}function gLe(t,e,r){return HL(r).peek(t,e)}function zWt(t,e,r){var n;let i=NWt(e);return i==null||(n=i.invalidate)===null||n===void 0||n.call(i,t),on(mt({},t),{atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,r),dirtyAtoms:DWt(t.dirtyAtoms,e)})}function UWt(t,e,r,n){let i=HL(r);if(i.set==null)throw new KW(`Attempt to set read-only RecoilValue: ${r}`);let o=i.set;return y8(t,e,r,"set"),o(t,e,n)}function BWt(t,e,r){var n,i,o;let l=t.getState(),f=t.getGraph(e.version),d=l.knownAtoms.has(r)?"atom":l.knownSelectors.has(r)?"selector":void 0,v=pLe(vLe(t,e,new Set([r])),x=>x!==r);return{loadable:gLe(t,e,r),isActive:l.knownAtoms.has(r)||l.knownSelectors.has(r),isSet:d==="selector"?!1:e.atomValues.has(r),isModified:e.dirtyAtoms.has(r),type:d,deps:HOe((n=f.nodeDeps.get(r))!==null&&n!==void 0?n:[]),subscribers:{nodes:HOe(v),components:dLe((i=(o=l.nodeToComponentSubscriptions.get(r))===null||o===void 0?void 0:o.values())!==null&&i!==void 0?i:[],([x])=>({name:x}))}}}function vLe(t,e,r){let n=new Set,i=Array.from(r),o=t.getGraph(e.version);for(let f=i.pop();f;f=i.pop()){var l;n.add(f);let d=(l=o.nodeToNodeSubscriptions.get(f))!==null&&l!==void 0?l:kWt;for(let v of d)n.has(v)||i.push(v)}return n}var P0={getNodeLoadable:jWt,peekNodeLoadable:gLe,setNodeValue:UWt,cleanUpNode:FWt,setUnvalidatedAtomValue_DEPRECATED:zWt,peekNodeInfo:BWt,getDownstreamNodes:vLe,initializeNodeIfNewToStore:y8},{CANCELED:VWt}=YS,{getDownstreamNodes:GWt,getNodeLoadable:yLe,setNodeValue:$Wt}=P0,{getNodeMaybe:_Le}=hu,{DefaultValue:_8,RecoilValueNotReady:HWt}=hu,{AbstractRecoilValue:WWt,RecoilState:ZWt,RecoilValueReadOnly:YWt,isRecoilValue:KWt}=qd;function XWt(t,{key:e},r=t.getState().currentTree){var n,i;let o=t.getState();r.version===o.currentTree.version||r.version===((n=o.nextTree)===null||n===void 0?void 0:n.version)||r.version===((i=o.previousTree)===null||i===void 0?void 0:i.version)||pf("Tried to read from a discarded tree");let l=yLe(t,r,e);return l.state==="loading"&&l.contents.catch(()=>VWt),l}function QWt(t,e){let r=t.clone();return e.forEach((n,i)=>{n.state==="hasValue"&&n.contents instanceof _8?r.delete(i):r.set(i,n)}),r}function JWt(t,e,{key:r},n){if(typeof n=="function"){let i=yLe(t,e,r);if(i.state==="loading")throw new HWt(r);if(i.state==="hasError")throw i.contents;return n(i.contents)}else return n}function e8t(t,e,r){if(r.type==="set"){let{recoilValue:i,valueOrUpdater:o}=r,l=JWt(t,e,i,o),f=$Wt(t,e,i.key,l);for(let[d,v]of f.entries())XW(e,d,v)}else if(r.type==="setLoadable"){let{recoilValue:{key:i},loadable:o}=r;XW(e,i,o)}else if(r.type==="markModified"){let{recoilValue:{key:i}}=r;e.dirtyAtoms.add(i)}else if(r.type==="setUnvalidated"){var n;let{recoilValue:{key:i},unvalidatedValue:o}=r,l=_Le(i);l==null||(n=l.invalidate)===null||n===void 0||n.call(l,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,o),e.dirtyAtoms.add(i)}else pf(`Unknown action ${r.type}`)}function XW(t,e,r){r.state==="hasValue"&&r.contents instanceof _8?t.atomValues.delete(e):t.atomValues.set(e,r),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function xLe(t,e){t.replaceState(r=>{let n=bLe(r);for(let i of e)e8t(t,n,i);return QW(t,n),n})}function WL(t,e){if(GS.length){let r=GS[GS.length-1],n=r.get(t);n||r.set(t,n=[]),n.push(e)}else xLe(t,[e])}var GS=[];function t8t(){let t=new Map;return GS.push(t),()=>{for(let[r,n]of t)xLe(r,n);GS.pop()!==t&&pf("Incorrect order of batch popping")}}function bLe(t){return on(mt({},t),{atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)})}function QW(t,e){let r=GWt(t,e,e.dirtyAtoms);for(let o of r){var n,i;(n=_Le(o))===null||n===void 0||(i=n.invalidate)===null||i===void 0||i.call(n,e)}}function wLe(t,e,r){WL(t,{type:"set",recoilValue:e,valueOrUpdater:r})}function r8t(t,e,r){if(r instanceof _8)return wLe(t,e,r);WL(t,{type:"setLoadable",recoilValue:e,loadable:r})}function n8t(t,e){WL(t,{type:"markModified",recoilValue:e})}function i8t(t,e,r){WL(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:r})}var o8t=0;function a8t(t,{key:e},r,n=null){let i=o8t++,o=t.getState();if(o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),$n(o.nodeToComponentSubscriptions.get(e)).set(i,[n!=null?n:"<not captured>",r]),ri("recoil_early_rendering_2021")){let l=t.getState().nextTree;l&&l.dirtyAtoms.has(e)&&r(l)}return{release:()=>{let l=t.getState(),f=l.nodeToComponentSubscriptions.get(e);if(f===void 0||!f.has(i)){pf(`Subscription missing at release time for atom ${e}. This is a bug in Recoil.`);return}f.delete(i),f.size===0&&l.nodeToComponentSubscriptions.delete(e)}}}var Kg={RecoilValueReadOnly:YWt,AbstractRecoilValue:WWt,RecoilState:ZWt,getRecoilValueAsLoadable:XWt,setRecoilValue:wLe,setRecoilValueLoadable:r8t,markRecoilValueModified:n8t,setUnvalidatedRecoilValue:i8t,subscribeToRecoilValue:a8t,isRecoilValue:KWt,applyAtomValueWrites:QWt,batchStart:t8t,writeLoadableToTreeState:XW,invalidateDownstreams:QW,copyTreeState:bLe,invalidateDownstreams_FOR_TESTING:QW},{unstable_batchedUpdates:s8t}=uLe.default,l8t={unstable_batchedUpdates:s8t},{unstable_batchedUpdates:u8t}=l8t,c8t={unstable_batchedUpdates:u8t},{batchStart:f8t}=Kg,{unstable_batchedUpdates:h8t}=c8t,x8=h8t,p8t=t=>{x8=t},d8t=()=>x8,m8t=t=>{x8(()=>{let e=()=>{};try{e=f8t(),t()}finally{e()}})},b8={getBatcher:d8t,setBatcher:p8t,batchUpdates:m8t};function g8t(t,e){e()}var v8t={enqueueExecution:g8t};function y8t(t,...e){let r=new Set;e:for(let n of t){for(let i of e)if(i.has(n))continue e;r.add(n)}return r}var FL=y8t;function _8t(t,e){let r=new Map;return t.forEach((n,i)=>{r.set(i,e(n,i))}),r}var jL=_8t;function x8t(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function b8t(t){return{nodeDeps:jL(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:jL(t.nodeToNodeSubscriptions,e=>new Set(e))}}function HW(t,e,r){let{nodeDeps:n,nodeToNodeSubscriptions:i}=e;t.forEach((o,l)=>{let f=n.get(l);if(f&&r&&f!==r.nodeDeps.get(l))return;n.set(l,new Set(o)),(f==null?o:FL(o,f)).forEach(v=>{i.has(v)||i.set(v,new Set),$n(i.get(v)).add(l)}),f&&FL(f,o).forEach(x=>{if(!i.has(x))return;let b=$n(i.get(x));b.delete(l),b.size===0&&i.delete(x)})})}function w8t(t,e,r){var n,i,o,l;let f=e.getState();r===f.currentTree.version||r===((n=f.nextTree)===null||n===void 0?void 0:n.version)||r===((i=f.previousTree)===null||i===void 0?void 0:i.version)||pf("Tried to save dependencies to a discarded tree");let d=e.getGraph(r);if(HW(t,d),r===((o=f.previousTree)===null||o===void 0?void 0:o.version)){let x=e.getGraph(f.currentTree.version);HW(t,x,d)}if(r===((l=f.previousTree)===null||l===void 0?void 0:l.version)||r===f.currentTree.version){var v;let x=(v=f.nextTree)===null||v===void 0?void 0:v.version;if(x!==void 0){let b=e.getGraph(x);HW(t,b,d)}}}function E8t(t,e){t.forEach((r,n)=>{e.has(n)||e.set(n,new Set);let i=$n(e.get(n));r.forEach(o=>i.add(o))})}function S8t(t,e,r){r.has(t)||r.set(t,new Set),$n(r.get(t)).add(e)}var KS={addToDependencyMap:S8t,cloneGraph:b8t,graph:x8t,mergeDepsIntoDependencyMap:E8t,saveDependencyMapToStore:w8t};function T8t(t,e){return e={exports:{}},t(e,e.exports),e.exports}var I8t=T8t(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},r={},n=5,i=Math.pow(2,n),o=i-1,l=i/2,f=i/4,d={},v=function(pe){return function(){return pe}},x=r.hash=function(he){var pe=typeof he=="undefined"?"undefined":e(he);if(pe==="number")return he;pe!=="string"&&(he+="");for(var Re=0,tt=0,xe=he.length;tt<xe;++tt){var ut=he.charCodeAt(tt);Re=(Re<<5)-Re+ut|0}return Re},b=function(pe){return pe-=pe>>1&1431655765,pe=(pe&858993459)+(pe>>2&858993459),pe=pe+(pe>>4)&252645135,pe+=pe>>8,pe+=pe>>16,pe&127},A=function(pe,Re){return Re>>>pe&o},P=function(pe){return 1<<pe},N=function(pe,Re){return b(pe&Re-1)},j=function(pe,Re,tt,xe){var ut=xe;if(!pe){var It=xe.length;ut=new Array(It);for(var ft=0;ft<It;++ft)ut[ft]=xe[ft]}return ut[Re]=tt,ut},D=function(pe,Re,tt){var xe=tt.length-1,ut=0,It=0,ft=tt;if(pe)ut=It=Re;else for(ft=new Array(xe);ut<Re;)ft[It++]=tt[ut++];for(++ut;ut<=xe;)ft[It++]=tt[ut++];return pe&&(ft.length=xe),ft},F=function(pe,Re,tt,xe){var ut=xe.length;if(pe){for(var It=ut;It>=Re;)xe[It--]=xe[It];return xe[Re]=tt,xe}for(var ft=0,_t=0,Wt=new Array(ut+1);ft<Re;)Wt[_t++]=xe[ft++];for(Wt[Re]=tt;ft<ut;)Wt[++_t]=xe[ft++];return Wt},U=1,$=2,Z=3,ie=4,ne={__hamt_isEmpty:!0},ae=function(pe){return pe===ne||pe&&pe.__hamt_isEmpty},ye=function(pe,Re,tt,xe){return{type:U,edit:pe,hash:Re,key:tt,value:xe,_modify:We}},ge=function(pe,Re,tt){return{type:$,edit:pe,hash:Re,children:tt,_modify:lt}},de=function(pe,Re,tt){return{type:Z,edit:pe,mask:Re,children:tt,_modify:pt}},be=function(pe,Re,tt){return{type:ie,edit:pe,size:Re,children:tt,_modify:dt}},Ne=function(pe){return pe===ne||pe.type===U||pe.type===$},Me=function(pe,Re,tt,xe,ut){for(var It=[],ft=xe,_t=0,Wt=0;ft;++Wt)ft&1&&(It[Wt]=ut[_t++]),ft>>>=1;return It[Re]=tt,be(pe,_t+1,It)},ke=function(pe,Re,tt,xe){for(var ut=new Array(Re-1),It=0,ft=0,_t=0,Wt=xe.length;_t<Wt;++_t)if(_t!==tt){var Tr=xe[_t];Tr&&!ae(Tr)&&(ut[It++]=Tr,ft|=1<<_t)}return de(pe,ft,ut)},He=function he(pe,Re,tt,xe,ut,It){if(tt===ut)return ge(pe,tt,[It,xe]);var ft=A(Re,tt),_t=A(Re,ut);return de(pe,P(ft)|P(_t),ft===_t?[he(pe,Re+n,tt,xe,ut,It)]:ft<_t?[xe,It]:[It,xe])},Ke=function(pe,Re,tt,xe,ut,It,ft,_t){for(var Wt=ut.length,Tr=0;Tr<Wt;++Tr){var rn=ut[Tr];if(tt(ft,rn.key)){var Pr=rn.value,ar=It(Pr);return ar===Pr?ut:ar===d?(--_t.value,D(pe,Tr,ut)):j(pe,Tr,ye(Re,xe,ft,ar),ut)}}var ur=It();return ur===d?ut:(++_t.value,j(pe,Wt,ye(Re,xe,ft,ur),ut))},Je=function(pe,Re){return pe===Re.edit},We=function(pe,Re,tt,xe,ut,It,ft){if(Re(It,this.key)){var _t=xe(this.value);return _t===this.value?this:_t===d?(--ft.value,ne):Je(pe,this)?(this.value=_t,this):ye(pe,ut,It,_t)}var Wt=xe();return Wt===d?this:(++ft.value,He(pe,tt,this.hash,this,ut,ye(pe,ut,It,Wt)))},lt=function(pe,Re,tt,xe,ut,It,ft){if(ut===this.hash){var _t=Je(pe,this),Wt=Ke(_t,pe,Re,this.hash,this.children,xe,It,ft);return Wt===this.children?this:Wt.length>1?ge(pe,this.hash,Wt):Wt[0]}var Tr=xe();return Tr===d?this:(++ft.value,He(pe,tt,this.hash,this,ut,ye(pe,ut,It,Tr)))},pt=function(pe,Re,tt,xe,ut,It,ft){var _t=this.mask,Wt=this.children,Tr=A(tt,ut),rn=P(Tr),Pr=N(_t,rn),ar=_t&rn,ur=ar?Wt[Pr]:ne,Mn=ur._modify(pe,Re,tt+n,xe,ut,It,ft);if(ur===Mn)return this;var gt=Je(pe,this),si=_t,Tn=void 0;if(ar&&ae(Mn)){if(si&=~rn,!si)return ne;if(Wt.length<=2&&Ne(Wt[Pr^1]))return Wt[Pr^1];Tn=D(gt,Pr,Wt)}else if(!ar&&!ae(Mn)){if(Wt.length>=l)return Me(pe,Tr,Mn,_t,Wt);si|=rn,Tn=F(gt,Pr,Mn,Wt)}else Tn=j(gt,Pr,Mn,Wt);return gt?(this.mask=si,this.children=Tn,this):de(pe,si,Tn)},dt=function(pe,Re,tt,xe,ut,It,ft){var _t=this.size,Wt=this.children,Tr=A(tt,ut),rn=Wt[Tr],Pr=(rn||ne)._modify(pe,Re,tt+n,xe,ut,It,ft);if(rn===Pr)return this;var ar=Je(pe,this),ur=void 0;if(ae(rn)&&!ae(Pr))++_t,ur=j(ar,Tr,Pr,Wt);else if(!ae(rn)&&ae(Pr)){if(--_t,_t<=f)return ke(pe,_t,Tr,Wt);ur=j(ar,Tr,ne,Wt)}else ur=j(ar,Tr,Pr,Wt);return ar?(this.size=_t,this.children=ur,this):be(pe,_t,ur)};ne._modify=function(he,pe,Re,tt,xe,ut,It){var ft=tt();return ft===d?ne:(++It.value,ye(he,xe,ut,ft))};function ze(he,pe,Re,tt,xe){this._editable=he,this._edit=pe,this._config=Re,this._root=tt,this._size=xe}ze.prototype.setTree=function(he,pe){return this._editable?(this._root=he,this._size=pe,this):he===this._root?this:new ze(this._editable,this._edit,this._config,he,pe)};var Dt=r.tryGetHash=function(he,pe,Re,tt){for(var xe=tt._root,ut=0,It=tt._config.keyEq;;)switch(xe.type){case U:return It(Re,xe.key)?xe.value:he;case $:{if(pe===xe.hash)for(var ft=xe.children,_t=0,Wt=ft.length;_t<Wt;++_t){var Tr=ft[_t];if(It(Re,Tr.key))return Tr.value}return he}case Z:{var rn=A(ut,pe),Pr=P(rn);if(xe.mask&Pr){xe=xe.children[N(xe.mask,Pr)],ut+=n;break}return he}case ie:{if(xe=xe.children[A(ut,pe)],xe){ut+=n;break}return he}default:return he}};ze.prototype.tryGetHash=function(he,pe,Re){return Dt(he,pe,Re,this)};var Ot=r.tryGet=function(he,pe,Re){return Dt(he,Re._config.hash(pe),pe,Re)};ze.prototype.tryGet=function(he,pe){return Ot(he,pe,this)};var Ue=r.getHash=function(he,pe,Re){return Dt(void 0,he,pe,Re)};ze.prototype.getHash=function(he,pe){return Ue(he,pe,this)};var nt=r.get=function(he,pe){return Dt(void 0,pe._config.hash(he),he,pe)};ze.prototype.get=function(he,pe){return Ot(pe,he,this)};var Ze=r.has=function(he,pe,Re){return Dt(d,he,pe,Re)!==d};ze.prototype.hasHash=function(he,pe){return Ze(he,pe,this)};var rt=r.has=function(he,pe){return Ze(pe._config.hash(he),he,pe)};ze.prototype.has=function(he){return rt(he,this)};var at=function(pe,Re){return pe===Re};r.make=function(he){return new ze(0,0,{keyEq:he&&he.keyEq||at,hash:he&&he.hash||x},ne,0)},r.empty=r.make();var ot=r.isEmpty=function(he){return he&&!!ae(he._root)};ze.prototype.isEmpty=function(){return ot(this)};var Lt=r.modifyHash=function(he,pe,Re,tt){var xe={value:tt._size},ut=tt._root._modify(tt._editable?tt._edit:NaN,tt._config.keyEq,0,he,pe,Re,xe);return tt.setTree(ut,xe.value)};ze.prototype.modifyHash=function(he,pe,Re){return Lt(Re,he,pe,this)};var zt=r.modify=function(he,pe,Re){return Lt(he,Re._config.hash(pe),pe,Re)};ze.prototype.modify=function(he,pe){return zt(pe,he,this)};var Pt=r.setHash=function(he,pe,Re,tt){return Lt(v(Re),he,pe,tt)};ze.prototype.setHash=function(he,pe,Re){return Pt(he,pe,Re,this)};var $t=r.set=function(he,pe,Re){return Pt(Re._config.hash(he),he,pe,Re)};ze.prototype.set=function(he,pe){return $t(he,pe,this)};var Xt=v(d),Gt=r.removeHash=function(he,pe,Re){return Lt(Xt,he,pe,Re)};ze.prototype.removeHash=ze.prototype.deleteHash=function(he,pe){return Gt(he,pe,this)};var Sr=r.remove=function(he,pe){return Gt(pe._config.hash(he),he,pe)};ze.prototype.remove=ze.prototype.delete=function(he){return Sr(he,this)};var zr=r.beginMutation=function(he){return new ze(he._editable+1,he._edit+1,he._config,he._root,he._size)};ze.prototype.beginMutation=function(){return zr(this)};var vr=r.endMutation=function(he){return he._editable=he._editable&&he._editable-1,he};ze.prototype.endMutation=function(){return vr(this)};var pr=r.mutate=function(he,pe){var Re=zr(pe);return he(Re),vr(Re)};ze.prototype.mutate=function(he){return pr(he,this)};var dr=function(pe){return pe&&wr(pe[0],pe[1],pe[2],pe[3],pe[4])},wr=function(pe,Re,tt,xe,ut){for(;tt<pe;){var It=Re[tt++];if(It&&!ae(It))return un(It,xe,[pe,Re,tt,xe,ut])}return dr(ut)},un=function(pe,Re,tt){switch(pe.type){case U:return{value:Re(pe),rest:tt};case $:case ie:case Z:var xe=pe.children;return wr(xe.length,xe,0,Re,tt);default:return dr(tt)}},Sn={done:!0};function Nn(he){this.v=he}Nn.prototype.next=function(){if(!this.v)return Sn;var he=this.v;return this.v=dr(he.rest),he},Nn.prototype[Symbol.iterator]=function(){return this};var _i=function(pe,Re){return new Nn(un(pe._root,Re))},De=function(pe){return[pe.key,pe.value]},J=r.entries=function(he){return _i(he,De)};ze.prototype.entries=ze.prototype[Symbol.iterator]=function(){return J(this)};var te=function(pe){return pe.key},se=r.keys=function(he){return _i(he,te)};ze.prototype.keys=function(){return se(this)};var _e=function(pe){return pe.value},Ae=r.values=ze.prototype.values=function(he){return _i(he,_e)};ze.prototype.values=function(){return Ae(this)};var Le=r.fold=function(he,pe,Re){var tt=Re._root;if(tt.type===U)return he(pe,tt.value,tt.key);for(var xe=[tt.children],ut=void 0;ut=xe.pop();)for(var It=0,ft=ut.length;It<ft;){var _t=ut[It++];_t&&_t.type&&(_t.type===U?pe=he(pe,_t.value,_t.key):xe.push(_t.children))}return pe};ze.prototype.fold=function(he,pe){return Le(he,pe,this)};var Be=r.forEach=function(he,pe){return Le(function(Re,tt,xe){return he(tt,xe,pe)},null,pe)};ze.prototype.forEach=function(he){return Be(he,this)};var Oe=r.count=function(he){return he._size};ze.prototype.count=function(){return Oe(this)},Object.defineProperty(ze.prototype,"size",{get:ze.prototype.count}),t.exports?t.exports=r:(void 0).hamt=r}),JW=class{constructor(e){xn(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,r){return this._map.set(e,r),this}delete(e){return this._map.delete(e),this}clone(){return w8(this)}toMap(){return new Map(this._map)}},e8=class t{constructor(e){if(xn(this,"_hamt",I8t.empty.beginMutation()),e instanceof t){let r=e._hamt.endMutation();e._hamt=r.beginMutation(),this._hamt=r.beginMutation()}else if(e)for(let[r,n]of e.entries())this._hamt.set(r,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,r){return this._hamt.set(e,r),this}delete(e){return this._hamt.delete(e),this}clone(){return w8(this)}toMap(){return new Map(this._hamt)}};function w8(t){return ri("recoil_hamt_2020")?new e8(t):new JW(t)}var A8t={persistentMap:w8},M8t=A8t.persistentMap,C8t=Object.freeze({__proto__:null,persistentMap:M8t}),{graph:P8t}=KS,{persistentMap:ZOe}=C8t,R8t=0,ELe=()=>R8t++;function SLe(){let t=ELe();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:ZOe(),nonvalidatedAtoms:ZOe()}}function O8t(){let t=SLe();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,P8t()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var TLe={makeEmptyTreeState:SLe,makeEmptyStoreState:O8t,getNextTreeStateVersion:ELe};function L8t(...t){let e=new Set;for(let r of t)for(let n of r)e.add(n);return e}var D8t=L8t;function N8t(t,e,r){let n=t.entries(),i=n.next();for(;!i.done;){let o=i.value;if(e.call(r,o[1],o[0],t))return!0;i=n.next()}return!1}var k8t=N8t,{cleanUpNode:q8t}=P0,{deleteNodeConfigIfPossible:F8t,getNode:ILe}=hu,{RetentionZone:ALe}=$L,MLe=new Set;function CLe(t,e){let r=t.getState(),n=r.currentTree;if(r.nextTree){pf("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let i=new Set;for(let l of e)if(l instanceof ALe)for(let f of B8t(r,l))i.add(f);else i.add(l);let o=j8t(t,i);for(let l of o)U8t(t,n,l)}function j8t(t,e){let r=t.getState(),n=r.currentTree,i=t.getGraph(n.version),o=new Set,l=new Set;return f(e),o;function f(d){let v=new Set,x=z8t(t,n,d,o,l);for(let N of x){var b;if(ILe(N).retainedBy==="recoilRoot"){l.add(N);continue}if(((b=r.retention.referenceCounts.get(N))!==null&&b!==void 0?b:0)>0){l.add(N);continue}if(PLe(N).some(D=>r.retention.referenceCounts.get(D))){l.add(N);continue}let j=i.nodeToNodeSubscriptions.get(N);if(j&&k8t(j,D=>l.has(D))){l.add(N);continue}o.add(N),v.add(N)}let A=new Set;for(let N of v)for(let j of(P=i.nodeDeps.get(N))!==null&&P!==void 0?P:MLe){var P;o.has(j)||A.add(j)}A.size&&f(A)}}function z8t(t,e,r,n,i){let o=t.getGraph(e.version),l=[],f=new Set;for(;r.size>0;)d($n(r.values().next().value));return l;function d(v){if(n.has(v)||i.has(v)){r.delete(v);return}if(f.has(v))return;let x=o.nodeToNodeSubscriptions.get(v);if(x)for(let b of x)d(b);f.add(v),r.delete(v),l.push(v)}}function U8t(t,e,r){if(!ri("recoil_memory_managament_2020"))return;q8t(t,r);let n=t.getState();n.knownAtoms.delete(r),n.knownSelectors.delete(r),n.nodeTransactionSubscriptions.delete(r),n.retention.referenceCounts.delete(r);let i=PLe(r);for(let d of i){var o;(o=n.retention.nodesRetainedByZone.get(d))===null||o===void 0||o.delete(r)}e.atomValues.delete(r),e.dirtyAtoms.delete(r),e.nonvalidatedAtoms.delete(r);let l=n.graphsByVersion.get(e.version);if(l){let d=l.nodeDeps.get(r);if(d!==void 0){l.nodeDeps.delete(r);for(let v of d){var f;(f=l.nodeToNodeSubscriptions.get(v))===null||f===void 0||f.delete(r)}}l.nodeToNodeSubscriptions.delete(r)}F8t(r)}function B8t(t,e){var r;return(r=t.retention.nodesRetainedByZone.get(e))!==null&&r!==void 0?r:MLe}function PLe(t){let e=ILe(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof ALe?[e]:e}function V8t(t,e){let r=t.getState();r.nextTree?r.retention.retainablesToCheckForRelease.add(e):CLe(t,new Set([e]))}function G8t(t,e,r){var n;if(!ri("recoil_memory_managament_2020"))return;let i=t.getState().retention.referenceCounts,o=((n=i.get(e))!==null&&n!==void 0?n:0)+r;o===0?RLe(t,e):i.set(e,o)}function RLe(t,e){if(!ri("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),V8t(t,e)}function $8t(t){if(!ri("recoil_memory_managament_2020"))return;let e=t.getState();CLe(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function H8t(t){return t===void 0?"recoilRoot":t}var XS={updateRetainCount:G8t,updateRetainCountToZero:RLe,releaseScheduledRetainablesNow:$8t,retainedByOptionWithDefault:H8t};function*W8t(t){for(let e of t)for(let r of e)yield r}var Z8t=W8t,Y8t=typeof window=="undefined",K8t=typeof navigator!="undefined"&&navigator.product==="ReactNative",E8={isSSR:Y8t,isReactNative:K8t},{isSSR:X8t}=E8,{batchUpdates:t8}=b8,{initializeNodeIfNewToStore:Q8t,peekNodeInfo:J8t}=P0,{graph:eZt}=KS,{DEFAULT_VALUE:tZt,recoilValues:YOe,recoilValuesForKeys:KOe}=hu,{AbstractRecoilValue:rZt,getRecoilValueAsLoadable:nZt,setRecoilValue:XOe,setUnvalidatedRecoilValue:iZt}=Kg,{updateRetainCount:PL}=XS,{getNextTreeStateVersion:oZt,makeEmptyStoreState:aZt}=TLe;var M0=class{constructor(e){xn(this,"_store",void 0),xn(this,"_refCount",0),xn(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),nZt(this._store,r))),xn(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),xn(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];let o=this._store.getState().currentTree;return KOe(o.dirtyAtoms)}let n=this._store.getState().knownAtoms,i=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?YOe.values():r.isInitialized===!0?KOe(Z8t([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):pLe(YOe.values(),({key:o})=>!n.has(o)&&!i.has(o))}),xn(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),J8t(this._store,this._store.getState().currentTree,r))),xn(this,"map",r=>{this.checkRefCount_INTERNAL();let n=new WS(this,t8);return r(n),r8(n.getStore_INTERNAL())}),xn(this,"asyncMap",r=>Pn(this,null,function*(){this.checkRefCount_INTERNAL();let n=new WS(this,t8);return yield r(n),r8(n.getStore_INTERNAL())})),this._store={getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{let n=e.graphsByVersion;if(n.has(r))return $n(n.get(r));let i=eZt();return n.set(r,i),i},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let r of this._store.getState().nodeCleanupFunctions.keys())Q8t(this._store,e.currentTree,r,"get"),PL(this._store,r,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!ri("recoil_memory_managament_2020"))return()=>{};this._refCount++;let e=!1;return()=>{e||(e=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){ri("recoil_memory_managament_2020")&&(X8t||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){ri("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){ri("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function OLe(t,e,r=!1){let n=t.getState(),i=r?oZt():e.version;return{currentTree:r?{version:i,stateID:i,transactionMetadata:mt({},e.transactionMetadata),dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()}:e,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function sZt(t){let e=new M0(aZt());return t!=null?e.map(t):e}function r8(t,e="current"){let r=t.getState(),n=e==="current"?r.currentTree:$n(r.previousTree);return new M0(OLe(t,n))}var WS=class extends M0{constructor(e,r){super(OLe(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0)),xn(this,"_batch",void 0),xn(this,"set",(n,i)=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{PL(o,n.key,1),XOe(this.getStore_INTERNAL(),n,i)})}),xn(this,"reset",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{PL(i,n.key,1),XOe(this.getStore_INTERNAL(),n,tZt)})}),xn(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();t8(()=>{for(let[o,l]of n.entries())PL(i,o,1),iZt(i,new rZt(o),l)})}),this._batch=r}},ZL={Snapshot:M0,MutableSnapshot:WS,freshSnapshot:sZt,cloneSnapshot:r8},lZt=ZL.Snapshot,uZt=ZL.MutableSnapshot,cZt=ZL.freshSnapshot,fZt=ZL.cloneSnapshot,YL=Object.freeze({__proto__:null,Snapshot:lZt,MutableSnapshot:uZt,freshSnapshot:cZt,cloneSnapshot:fZt}),{getNextTreeStateVersion:hZt,makeEmptyStoreState:LLe}=TLe,{cleanUpNode:pZt,getDownstreamNodes:dZt,setNodeValue:mZt,setUnvalidatedAtomValue_DEPRECATED:gZt}=P0,{graph:vZt}=KS,{cloneGraph:yZt}=KS,{applyAtomValueWrites:_Zt}=Kg,{releaseScheduledRetainablesNow:DLe}=XS,{freshSnapshot:xZt}=YL,{useCallback:bZt,useContext:NLe,useEffect:n8,useMemo:wZt,useRef:WW,useState:EZt}=Fa.default;function FS(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var kLe=Object.freeze({getState:FS,replaceState:FS,getGraph:FS,subscribeToTransactions:FS,addTransactionMetadata:FS}),i8=!1;function QOe(t){if(i8)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let e=t.getState();if(e.nextTree===null){ri("recoil_memory_managament_2020")&&ri("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&DLe(t);let r=e.currentTree.version,n=hZt();e.nextTree=on(mt({},e.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),e.graphsByVersion.set(n,yZt($n(e.graphsByVersion.get(r))))}}var qLe=Fa.default.createContext({current:kLe}),S8=()=>NLe(qLe),FLe=Fa.default.createContext(null);function SZt(){let t=NLe(FLe);return t==null&&g8("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),t}function T8(t,e,r){let n=dZt(t,r,r.dirtyAtoms);for(let i of n){let o=e.nodeToComponentSubscriptions.get(i);if(o)for(let[l,[f,d]]of o)d(r)}}function jLe(t){let e=t.getState(),r=e.currentTree,n=r.dirtyAtoms;if(n.size){for(let[i,o]of e.nodeTransactionSubscriptions)if(n.has(i))for(let[l,f]of o)f(t);for(let[i,o]of e.transactionSubscriptions)o(t);(!ri("recoil_early_rendering_2021")||e.suspendedComponentResolvers.size)&&(T8(t,e,r),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(r)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function TZt(t){let e=t.current.getState();e.commitDepth++;try{let{nextTree:r}=e;if(r===null)return;e.previousTree=e.currentTree,e.currentTree=r,e.nextTree=null,jLe(t.current),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):pf("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,ri("recoil_memory_managament_2020")&&DLe(t.current)}finally{e.commitDepth--}}function IZt({setNotifyBatcherOfChange:t}){let e=S8(),[r,n]=EZt([]);return t(()=>n({})),n8(()=>{v8t.enqueueExecution("Batcher",()=>{TZt(e)})}),n8(()=>()=>{t(()=>{})},[t]),null}function AZt(t,e){let r=LLe();return e({set:(n,i)=>{let o=r.currentTree,l=mZt(t,o,n.key,i),f=new Set(l.keys()),d=o.nonvalidatedAtoms.clone();for(let v of f)d.delete(v);r.currentTree=on(mt({},o),{dirtyAtoms:D8t(o.dirtyAtoms,f),atomValues:_Zt(o.atomValues,l),nonvalidatedAtoms:d})},setUnvalidatedAtomValues:n=>{n.forEach((i,o)=>{r.currentTree=gZt(r.currentTree,o,i)})}}),r}function MZt(t){return xZt().map(t).getStore_INTERNAL().getState()}var JOe=0;function CZt({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:r,children:n}){var i;let o,l=D=>{let F=o.current.graphsByVersion;if(F.has(D))return $n(F.get(D));let U=vZt();return F.set(D,U),U},f=(D,F)=>{if(F==null){let{transactionSubscriptions:U}=N.current.getState(),$=JOe++;return U.set($,D),{release:()=>{U.delete($)}}}else{let{nodeTransactionSubscriptions:U}=N.current.getState();U.has(F)||U.set(F,new Map);let $=JOe++;return $n(U.get(F)).set($,D),{release:()=>{let Z=U.get(F);Z&&(Z.delete($),Z.size===0&&U.delete(F))}}}},d=D=>{QOe(N.current);for(let F of Object.keys(D))$n(N.current.getState().nextTree).transactionMetadata[F]=D[F]},v=D=>{let F=N.current.getState();QOe(N.current);let U=$n(F.nextTree),$;try{i8=!0,$=D(U)}finally{i8=!1}$!==U&&(F.nextTree=$,ri("recoil_early_rendering_2021")&&T8(P,F,$),$n(x.current)())},x=WW(null),b=bZt(D=>{x.current=D},[x]),A=(i=Fa.default.createMutableSource)!==null&&i!==void 0?i:Fa.default.unstable_createMutableSource,P=r!=null?r:{getState:()=>o.current,replaceState:v,getGraph:l,subscribeToTransactions:f,addTransactionMetadata:d},N=WW(P);o=WW(t!=null?AZt(P,t):e!=null?MZt(e):LLe());let j=wZt(()=>A?A(o,()=>o.current.currentTree.version):null,[A,o]);return n8(()=>()=>{for(let D of N.current.getState().knownAtoms)pZt(N.current,D)},[]),Fa.default.createElement(qLe.Provider,{value:N},Fa.default.createElement(FLe.Provider,{value:j},Fa.default.createElement(IZt,{setNotifyBatcherOfChange:b}),n))}function PZt(t){let i=t,{override:e}=i,r=Oo(i,["override"]),n=S8();return e===!1&&n.current!==kLe?t.children:Fa.default.createElement(CZt,r)}var KL={useStoreRef:S8,useRecoilMutableSource:SZt,RecoilRoot:PZt,notifyComponents_FOR_TESTING:T8,sendEndOfBatchNotifications_FOR_TESTING:jLe},{loadableWithValue:RZt}=YS,{DEFAULT_VALUE:OZt,getNode:LZt}=hu,{copyTreeState:DZt,getRecoilValueAsLoadable:NZt,invalidateDownstreams:kZt,writeLoadableToTreeState:qZt}=Kg;function eLe(t){return LZt(t.key).nodeType==="atom"}var o8=class{constructor(e,r){xn(this,"_store",void 0),xn(this,"_treeState",void 0),xn(this,"_changes",void 0),xn(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!eLe(n))throw new Error("Reading selectors within atomicUpdate is not supported");let i=NZt(this._store,n,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),xn(this,"set",(n,i)=>{if(!eLe(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){let o=this.get(n);this._changes.set(n.key,i(o))}else this._changes.set(n.key,i)}),xn(this,"reset",n=>{this.set(n,OZt)}),this._store=e,this._treeState=r,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let e=DZt(this._treeState);for(let[r,n]of this._changes)qZt(e,r,RZt(n));return kZt(this._store,e),e}};function FZt(t){return e=>{t.replaceState(r=>{let n=new o8(t,r);return e(n),n.newTreeState_INTERNAL()})}}var jZt={atomicUpdater:FZt},zZt=jZt.atomicUpdater,UZt=Object.freeze({__proto__:null,atomicUpdater:zZt});function BZt(t,e){let r=new Map;for(let[n,i]of t)e(i,n)&&r.set(n,i);return r}var VZt=BZt;function GZt(t,e){let r=new Set;for(let n of t)e(n)&&r.add(n);return r}var $Zt=GZt;function HZt(t,e){if(!t)throw new Error(e)}var WZt=HZt,zL=WZt;function ZZt(...t){let e=new Map;for(let r=0;r<t.length;r++){let n=t[r].keys(),i;for(;!(i=n.next()).done;)e.set(i.value,t[r].get(i.value))}return e}var YZt=ZZt;function KZt(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}var XZt=KZt;var{useRef:QZt}=Fa.default;function JZt(){let t=QZt();if(0&&ri("recoil_infer_component_names"))var e;return"<component name not available>"}var I8=JZt,{atomicUpdater:zLe}=UZt,{batchUpdates:A8}=b8,{DEFAULT_VALUE:XL,getNode:ULe,nodes:eYt}=hu,{useRecoilMutableSource:tYt,useStoreRef:Al}=KL,{isRecoilValue:h9r}=qd,{AbstractRecoilValue:M8,getRecoilValueAsLoadable:$S,setRecoilValue:C0,setRecoilValueLoadable:rYt,setUnvalidatedRecoilValue:nYt,subscribeToRecoilValue:C8}=Kg,{updateRetainCount:jS}=XS,{RetentionZone:iYt}=$L,{Snapshot:p9r,cloneSnapshot:ZS}=YL,{setByAddingToSet:oYt}=hLe,{isSSR:UL}=E8,{mutableSourceExists:aYt,useMutableSource:sYt}=fLe,{useCallback:hc,useEffect:Ph,useMemo:BLe,useRef:kd,useState:P8}=Fa.default,VLe=12e4;function GLe(t,e,r){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{r.current.getState().suspendedComponentResolvers.add(i)}):t.state==="hasError"?t.contents:new Error(`Invalid value of loadable atom "${e.key}"`)}function lYt(){let t=Al(),[e,r]=P8([]),n=kd(new Set);n.current=new Set;let i=kd(new Set),o=kd(new Map),l=hc(d=>{let v=o.current.get(d);v&&(v.release(),o.current.delete(d))},[o]),f=I8();return Ph(()=>{let d=t.current;function v(x,b){o.current.has(b)&&r([])}FL(n.current,i.current).forEach(x=>{if(o.current.has(x)){g8(`Double subscription to RecoilValue "${x}"`);return}let b=C8(d,new M8(x),P=>{v(P,x)},f);o.current.set(x,b),d.getState().nextTree?d.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{v(d.getState(),x)}):v(d.getState(),x)}),FL(i.current,n.current).forEach(x=>{l(x)}),i.current=n.current}),Ph(()=>{let d=o.current;return()=>d.forEach((v,x)=>l(x))},[l]),BLe(()=>{function d(N){return j=>{C0(t.current,N,j)}}function v(N){return()=>C0(t.current,N,XL)}function x(N){var j;n.current.has(N.key)||(n.current=oYt(n.current,N.key));let D=t.current.getState();return $S(t.current,N,ri("recoil_early_rendering_2021")&&(j=D.nextTree)!==null&&j!==void 0?j:D.currentTree)}function b(N){let j=x(N);return GLe(j,N,t)}function A(N){return[b(N),d(N)]}function P(N){return[x(N),d(N)]}return{getRecoilValue:b,getRecoilValueLoadable:x,getRecoilState:A,getRecoilStateLoadable:P,getSetRecoilState:d,getResetRecoilState:v}},[n,t])}var uYt={current:0};function cYt(t){let e=Al(),r=hc(()=>{var v;let x=e.current,b=x.getState(),A=ri("recoil_early_rendering_2021")&&(v=b.nextTree)!==null&&v!==void 0?v:b.currentTree;return $S(x,t,A)},[e,t]),n=hc(()=>r(),[r]),i=I8(),o=hc((v,x)=>{let b=e.current;return C8(b,t,()=>{if(!ri("recoil_suppress_rerender_in_callback"))return x();let P=r();d.current.is(P)||x(),d.current=P},i).release},[e,t,i,r]),l=tYt(),f=sYt(l,n,o),d=kd(f);return Ph(()=>{d.current=f}),f}function fYt(t){let e=Al(),[r,n]=P8([]),i=I8();Ph(()=>{let f=e.current,d=f.getState(),v=C8(f,t,b=>{var A;if(!ri("recoil_suppress_rerender_in_callback"))return n([]);let P=$S(f,t,f.getState().currentTree);!((A=l.current)===null||A===void 0)&&A.is(P)||n(P),l.current=P},i);if(d.nextTree)f.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{l.current=null,n([])});else{var x;if(!ri("recoil_suppress_rerender_in_callback"))return n([]);let b=$S(f,t,f.getState().currentTree);!((x=l.current)===null||x===void 0)&&x.is(b)||n(b),l.current=b}return v.release},[i,t,e]);let o=$S(e.current,t),l=kd(o);return Ph(()=>{l.current=o}),o}function R8(t){return ri("recoil_memory_managament_2020")&&ZLe(t),aYt()?cYt(t):fYt(t)}function $Le(t){let e=Al(),r=R8(t);return GLe(r,t,e)}function O8(t){let e=Al();return hc(r=>{C0(e.current,t,r)},[e,t])}function hYt(t){let e=Al();return hc(()=>{C0(e.current,t,XL)},[e,t])}function pYt(t){return[$Le(t),O8(t)]}function dYt(t){return[R8(t),O8(t)]}function QL(t){let e=Al();Ph(()=>e.current.subscribeToTransactions(t).release,[t,e])}function tLe(t){let e=t.atomValues.toMap(),r=jL(VZt(e,(n,i)=>{let l=ULe(i).persistence_UNSTABLE;return l!=null&&l.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return YZt(t.nonvalidatedAtoms.toMap(),r)}function mYt(t){QL(hc(e=>{let r=e.getState().previousTree,n=e.getState().currentTree;r||(pf("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),r=e.getState().currentTree);let i=tLe(n),o=tLe(r),l=jL(eYt,d=>{var v,x,b,A;return{persistence_UNSTABLE:{type:(v=(x=d.persistence_UNSTABLE)===null||x===void 0?void 0:x.type)!==null&&v!==void 0?v:"none",backButton:(b=(A=d.persistence_UNSTABLE)===null||A===void 0?void 0:A.backButton)!==null&&b!==void 0?b:!1}}}),f=$Zt(n.dirtyAtoms,d=>i.has(d)||o.has(d));t({atomValues:i,previousAtomValues:o,atomInfo:l,modifiedAtoms:f,transactionMetadata:mt({},n.transactionMetadata)})},[t]))}function gYt(t){QL(hc(e=>{let r=ZS(e,"current"),n=ZS(e,"previous");t({snapshot:r,previousSnapshot:n})},[t]))}function HLe(t){let e=kd();return Ph(()=>{e.current=t}),e.current}function vYt(){let t=Al(),[e,r]=P8(()=>ZS(t.current)),n=HLe(e),i=kd();return Ph(()=>(i.current&&!UL&&window.clearTimeout(i.current),e.retain()),[e]),QL(hc(o=>r(ZS(o)),[])),n!==e&&!UL&&(i.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(i.current)),e.retain(),i.current=window.setTimeout(()=>{e.release_INTERNAL(),i.current=null},VLe)),e}function WLe(){let t=Al();return hc(e=>{var r;let n=t.current.getState(),i=(r=n.nextTree)!==null&&r!==void 0?r:n.currentTree,o=e.getStore_INTERNAL().getState().currentTree;A8(()=>{let l=new Set;for(let v of[i.atomValues.keys(),o.atomValues.keys()])for(let x of v){var f,d;((f=i.atomValues.get(x))===null||f===void 0?void 0:f.contents)!==((d=o.atomValues.get(x))===null||d===void 0?void 0:d.contents)&&ULe(x).shouldRestoreFromSnapshots&&l.add(x)}l.forEach(v=>{rYt(t.current,new M8(v),o.atomValues.has(v)?$n(o.atomValues.get(v)):XL)}),t.current.replaceState(v=>on(mt({},v),{stateID:e.getID_INTERNAL()}))})},[t])}function yYt(){let t=Al();return(e,r={})=>{A8(()=>{t.current.addTransactionMetadata(r),e.forEach((n,i)=>nYt(t.current,new M8(i),n))})}}var BL=class{},_Yt=new BL;function xYt(t,e){let r=Al(),n=WLe();return hc((...i)=>{function o(x,b){C0(r.current,x,b)}function l(x){C0(r.current,x,XL)}let f=ZS(r.current),d=zLe(r.current),v=_Yt;return A8(()=>{let x="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof t!="function")throw new Error(x);let b=t({set:o,reset:l,snapshot:f,gotoSnapshot:n,transact_UNSTABLE:d});if(typeof b!="function")throw new Error(x);v=b(...i)}),v instanceof BL&&zL(!1),v},e!=null?[...e,r]:void 0)}function ZLe(t){if(ri("recoil_memory_managament_2020"))return bYt(t)}function bYt(t){let r=(Array.isArray(t)?t:[t]).map(l=>l instanceof iYt?l:l.key),n=Al();Ph(()=>{if(!ri("recoil_memory_managament_2020"))return;let l=n.current;if(i.current&&!UL)window.clearTimeout(i.current),i.current=null;else for(let f of r)jS(l,f,1);return()=>{for(let f of r)jS(l,f,-1)}},[n,...r]);let i=kd(),o=HLe(r);if(!UL&&(o===void 0||!XZt(o,r))){let l=n.current;for(let f of r)jS(l,f,1);if(o)for(let f of o)jS(l,f,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(let f of r)jS(l,f,-1)},VLe)}}function wYt(t,e){let r=Al();return BLe(()=>(...n)=>{zLe(r.current)(o=>{t(o)(...n)})},e!=null?[...e,r]:void 0)}var EYt={recoilComponentGetRecoilValueCount_FOR_TESTING:uYt,useGotoRecoilSnapshot:WLe,useRecoilCallback:xYt,useRecoilInterface:lYt,useRecoilSnapshot:vYt,useRecoilState:pYt,useRecoilStateLoadable:dYt,useRecoilTransaction:wYt,useRecoilTransactionObserver:gYt,useRecoilValue:$Le,useRecoilValueLoadable:R8,useRetain:ZLe,useResetRecoilState:hYt,useSetRecoilState:O8,useSetUnvalidatedAtomValues:yYt,useTransactionObservation_DEPRECATED:mYt,useTransactionSubscription_DEPRECATED:QL},{peekNodeInfo:SYt}=P0,{useStoreRef:TYt}=KL;function IYt(){let t=TYt();return({key:e})=>SYt(t.current,t.current.getState().currentTree,e)}var AYt=IYt,{RecoilRoot:MYt,useStoreRef:CYt}=KL,{useMemo:PYt}=Fa.default;function RYt(){let t=CYt().current;return PYt(()=>{function e({children:r}){return Fa.default.createElement(MYt,{store_INTERNAL:t},r)}return e},[t])}var OYt=RYt;var{isReactNative:d9r,isSSR:m9r}=E8;function fc(t,e,r){if(typeof t=="string"&&!t.includes("\"")&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var n;return(n=JSON.stringify(t))!==null&&n!==void 0?n:""}if(so(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,o)=>fc(i,e,o.toString()))}]`;if(typeof t.toJSON=="function")return fc(t.toJSON(r),e,r);if(t instanceof Map){let i={};for(let[o,l]of t)i[typeof o=="string"?o:fc(o,e)]=l;return fc(i,e,r)}return t instanceof Set?fc(Array.from(t).sort((i,o)=>fc(i,e).localeCompare(fc(o,e))),e,r):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?fc(Array.from(t),e,r):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${fc(i,e)}:${fc(t[i],e,i)}`).join(",")}}`}function LYt(t,e={allowFunctions:!1}){return fc(t,e)}var JL=LYt,a8=class{constructor(e){var r,n,i;xn(this,"_numLeafs",void 0),xn(this,"_root",void 0),xn(this,"_onHit",void 0),xn(this,"_onSet",void 0),xn(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(r=e==null?void 0:e.onHit)!==null&&r!==void 0?r:()=>{},this._onSet=(n=e==null?void 0:e.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,r){var n;return(n=this.getLeafNode(e,r))===null||n===void 0?void 0:n.value}getLeafNode(e,r){return YLe(this.root(),n=>this._mapNodeValue(e(n)),{onNodeVisit:n=>{r==null||r.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(e,r,n){let i,o=s8(this.root(),e.map(([l,f])=>[l,this._mapNodeValue(f)]),null,r,null,{onNodeVisit:l=>{n==null||n.onNodeVisit(l),l.type==="leaf"&&(i=l)}});this.root()||(this._root=o),this._numLeafs++,this._onSet($n(i))}delete(e){if(!this.root())return!1;let r=$n(this.root());return DYt(r,e,e.parent)?e===r||r.type==="branch"&&!r.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=XLe(e),!0):!1}clear(){this._numLeafs=0,this._root=null}},YLe=(t,e,r)=>{var n;if(t==null)return;if(r==null||(n=r.onNodeVisit)===null||n===void 0||n.call(r,t),t.type==="leaf")return t;let i=e(t.nodeKey);return YLe(t.branches.get(i),e,r)},s8=(t,e,r,n,i,o)=>{var l;let f;if(t==null){if(e.length===0)f={type:"leaf",value:n,parent:r,branchKey:i};else{let[d,...v]=e,[x,b]=d;f={type:"branch",nodeKey:x,parent:r,branches:new Map,branchKey:i},f.branches.set(b,s8(null,v,f,n,b,o))}}else if(f=t,e.length){let[d,...v]=e,[x,b]=d;t.type==="branch"&&t.nodeKey===x||zL(!1),t.branches.set(b,s8(t.branches.get(b),v,t,n,b,o))}return o==null||(l=o.onNodeVisit)===null||l===void 0||l.call(o,f),f},DYt=(t,e,r)=>r?(r.branches.delete(e.branchKey),KLe(t,r,r.parent)):t===e,KLe=(t,e,r)=>r?(e.branches.size===0&&r.branches.delete(e.branchKey),KLe(t,r,r.parent)):t===e,XLe=t=>t.type==="leaf"?1:Array.from(t.branches.values()).reduce((e,r)=>e+XLe(r),0),NYt={TreeCache:a8},kYt=NYt.TreeCache,QLe=Object.freeze({__proto__:null,TreeCache:kYt}),l8=class{constructor(e){var r;xn(this,"_maxSize",void 0),xn(this,"_size",void 0),xn(this,"_head",void 0),xn(this,"_tail",void 0),xn(this,"_map",void 0),xn(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(r=e.mapKey)!==null&&r!==void 0?r:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){let r=this._keyMapper(e),n=this._map.get(r);if(n)return this.set(e,n.value),n.value}set(e,r){let n=this._keyMapper(e);this._map.get(n)&&this.delete(e);let o=this.head(),l={key:e,right:o,left:null,value:r};o?o.left=l:this._tail=l,this._map.set(n,l),this._head=l,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let e=this.tail();e&&this.delete(e.key)}delete(e){let r=this._keyMapper(e);if(!this._size||!this._map.has(r))return;let n=$n(this._map.get(r)),i=n.right,o=n.left;i&&(i.left=n.left),o&&(o.right=n.right),n===this.head()&&(this._head=i),n===this.tail()&&(this._tail=o),this._map.delete(r),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},qYt={LRUCache:l8},FYt=qYt.LRUCache,JLe=Object.freeze({__proto__:null,LRUCache:FYt}),{LRUCache:jYt}=JLe,{TreeCache:zYt}=QLe;function UYt(t,e=r=>r){let r=new jYt({maxSize:t}),n=new zYt({mapNodeValue:e,onHit:i=>{r.set(i,!0)},onSet:i=>{let o=r.tail();r.set(i,!0),o&&n.size()>t&&n.delete(o.key)}});return n}var rLe=UYt,{TreeCache:BYt}=QLe,AL={equality:"reference",eviction:"keep-all",maxSize:1/0};function VYt({equality:t=AL.equality,eviction:e=AL.eviction,maxSize:r=AL.maxSize}=AL){let n=GYt(t);return $Yt(e,r,n)}function GYt(t){switch(t){case"reference":return e=>e;case"value":return e=>JL(e)}throw new Error(`Unrecognized equality policy ${t}`)}function $Yt(t,e,r){switch(t){case"keep-all":return new BYt({mapNodeValue:r});case"lru":return rLe($n(e),r);case"most-recent":return rLe(1,r)}throw new Error(`Unrecognized eviction policy ${t}`)}var HYt=VYt;function WYt(t){return()=>null}var ZYt={startPerfBlock:WYt},{CANCELED:zS,Canceled:YYt,loadableWithError:US,loadableWithPromise:KYt,loadableWithValue:ZW}=YS,{getNodeLoadable:nLe,peekNodeLoadable:XYt,setNodeValue:QYt}=P0,{saveDependencyMapToStore:JYt}=KS,{DEFAULT_VALUE:e9t,RecoilValueNotReady:t9t,getConfigDeletionHandler:r9t,registerNode:iLe}=hu,{isRecoilValue:n9t}=qd,{AbstractRecoilValue:i9t}=qd,{setRecoilValueLoadable:o9t}=Kg,{retainedByOptionWithDefault:a9t}=XS,{cloneSnapshot:s9t}=YL,{startPerfBlock:l9t}=ZYt,BS=[],ML=new Map,u9t=(()=>{let t=0;return()=>t++})();function c9t(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function f9t(t){let{key:e,get:r,cachePolicy_UNSTABLE:n}=t,i=t.set!=null?t.set:void 0,o=HYt(n!=null?n:{equality:"reference",eviction:"keep-all"}),l=a9t(t.retainedBy_UNSTABLE),f=new Map,d=0;function v(){return!ri("recoil_memory_managament_2020")||d>0}function x(Ue){return f.has(Ue)||f.set(Ue,c9t()),$n(f.get(Ue))}function b(Ue){return d++,Ue.getState().knownSelectors.add(e),()=>{d--,Ue.getState().knownSelectors.delete(e),f.delete(Ue)}}function A(){return r9t(e)!==void 0&&!v()}function P(Ue,nt,Ze){if(nt.state==="loading"){let rt=ML.get(Ze);rt==null&&ML.set(Ze,rt=new Set),rt.add(Ue)}}function N(Ue,nt){let Ze=ML.get(nt);if(Ze!==void 0){for(let rt of Ze)o9t(rt,new i9t(e),Ue);ML.delete(nt)}}function j(Ue,nt,Ze){let rt=Ue.getState().knownSelectors.has(Ze);if(rt&&nt.atomValues.has(Ze))return $n(nt.atomValues.get(Ze));let at=nLe(Ue,nt,Ze);return at.state!=="loading"&&rt&&nt.atomValues.set(Ze,at),at}function D(Ue,nt,Ze,rt,at){return nt.then(ot=>{if(!v())return Ke(Ue,at),zS;let Lt=ZW(ot);return pt(Ze,ae(rt),Lt),$(Ue,Ze,new Set(rt.keys()),at),U(Ue,Lt,at),{__value:ot,__key:e}}).catch(ot=>{if(!v())return Ke(Ue,at),zS;if(Je(Ue,at)&&He(rt,Ue,at),so(ot))return F(Ue,ot,Ze,rt,at);let Lt=US(ot);throw pt(Ze,ae(rt),Lt),$(Ue,Ze,new Set(rt.keys()),at),U(Ue,Lt,at),ot})}function F(Ue,nt,Ze,rt,at){return nt.then(ot=>{if(!v())return Ke(Ue,at),zS;if(ot instanceof YYt)return pf("Selector was released while it had dependencies"),zS;let{__key:Lt,__value:zt}=ot!=null?ot:{},Pt=!0;Lt!=null&&(Ze.atomValues.set(Lt,ZW(zt)),Pt=!1);let $t=ne(Ue,Ze);if($t&&$t.state==="hasValue")return Me($t,Ue),{__value:$t.contents,__key:e};if(!Je(Ue,at)){var Xt;let zr=de(Ze);if((zr==null||(Xt=zr.latestLoadable)===null||Xt===void 0?void 0:Xt.state)==="loading")return zr.latestLoadable.contents}let[Gt,Sr]=ie(Ue,Ze,at,Pt);if(Je(Ue,at)&&He(Sr,Ue,at),We(Gt),Gt.state!=="loading"&&(pt(Ze,ae(Sr),Gt),$(Ue,Ze,new Set(Sr.keys()),at),U(Ue,Gt,at)),Gt.state==="hasError")throw Gt.contents;return Gt.state==="hasValue"?{__value:Gt.contents,__key:e}:Gt.contents}).catch(ot=>{if(!v())return Ke(Ue,at),zS;let Lt=US(ot);throw pt(Ze,ae(rt),US(ot)),$(Ue,Ze,new Set(rt.keys()),at),U(Ue,Lt,at),ot})}function U(Ue,nt,Ze){Je(Ue,Ze)&&(Me(nt,Ue),N(nt,Ze))}function $(Ue,nt,Ze,rt){var at,ot,Lt,zt;if(Je(Ue,rt)||nt.version===((at=Ue.getState())===null||at===void 0||(ot=at.currentTree)===null||ot===void 0?void 0:ot.version)||nt.version===((Lt=Ue.getState())===null||Lt===void 0||(zt=Lt.nextTree)===null||zt===void 0?void 0:zt.version)){var Pt,$t,Xt;JYt(new Map([[e,Ze]]),Ue,(Pt=($t=Ue.getState())===null||$t===void 0||(Xt=$t.nextTree)===null||Xt===void 0?void 0:Xt.version)!==null&&Pt!==void 0?Pt:Ue.getState().currentTree.version)}}function Z(Ue,nt,Ze,rt,at){Ze.add(rt),$(Ue,nt,Ze,at)}function ie(Ue,nt,Ze,rt=!1){let at=l9t(e),ot,Lt=!1,zt,Pt=new Map,$t=new Set;$(Ue,nt,$t,Ze);function Xt(zr){let{key:vr}=zr;Z(Ue,nt,$t,vr,Ze);let pr=rt?nLe(Ue,nt,vr):j(Ue,nt,vr);if(We(pr),Pt.set(vr,pr),pr.state==="hasValue")return pr.contents;throw pr.contents}let Gt=!1,Sr=zr=>(...vr)=>{if(!Gt)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let pr=s9t(Ue),dr=zr({snapshot:pr});if(typeof dr!="function")throw new Error("getCallback() expects a function that returns a function.");return dr(...vr)};try{ot=r({get:Xt,getCallback:Sr}),ot=n9t(ot)?Xt(ot):ot,Gt=!0,so(ot)?ot=D(Ue,ot,nt,Pt,Ze).finally(at):at()}catch(zr){ot=zr,so(ot)?ot=F(Ue,ot,nt,Pt,Ze).finally(at):(Lt=!0,at())}return Lt?zt=US(ot):so(ot)?zt=KYt(ot):zt=ZW(ot),We(zt),[zt,Pt]}function ne(Ue,nt){let Ze=new Set,rt=x(Ue),at=o.get(ot=>(typeof ot!="string"&&zL(!1),j(Ue,nt,ot).contents),{onNodeVisit:ot=>{ot.type==="branch"&&ot.nodeKey!==e&&typeof ot.nodeKey=="string"&&Ze.add(ot.nodeKey)}});return at&&$(Ue,nt,Ze,rt.latestExecutionId),at}function ae(Ue){return Array.from(Ue.entries()).map(([nt,Ze])=>[nt,Ze.contents])}function ye(Ue,nt){let Ze=u9t(),[rt,at]=ie(Ue,nt,Ze);return Me(rt,Ue,at,Ze,nt),ke(nt,ae(at),rt),P(Ue,rt,Ze),rt}function ge(Ue,nt){let Ze=ne(Ue,nt);if(Ze!=null)return Me(Ze,Ue),Ze;let rt=de(nt);if(rt){let at=rt;return P(Ue,$n(at.latestLoadable),$n(at.latestExecutionId)),$n(at.latestLoadable)}return ye(Ue,nt)}function de(Ue){var nt;let[,Ze]=(nt=Array.from(f.entries()).find(([rt,at])=>at.latestLoadable!=null&&at.latestExecutionId!=null&&!Ne(rt,Ue)))!==null&&nt!==void 0?nt:[];return Ze}let be=new Map;function Ne(Ue,nt){var Ze,rt;let at=x(Ue),ot=(Ze=at.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&Ze!==void 0?Ze:new Map,Lt=Array(((rt=be.get(nt.version))!==null&&rt!==void 0?rt:new Map).entries()),zt=be.has(nt.version)&&Lt.length===ot.size&&Lt.every(([Pt,$t])=>ot.get(Pt)===$t);return ot==null||nt.version===at.stateVersion||zt?!1:(be.set(nt.version,new Map(ot)),Array.from(ot).some(([Pt,$t])=>j(Ue,nt,Pt).contents!==$t.contents))}function Me(Ue,nt,Ze,rt,at){let ot=x(nt);Ue.state==="loading"?(ot.depValuesDiscoveredSoFarDuringAsyncWork=Ze,ot.latestExecutionId=rt,ot.latestLoadable=Ue,ot.stateVersion=at==null?void 0:at.version):(ot.depValuesDiscoveredSoFarDuringAsyncWork=null,ot.latestExecutionId=null,ot.latestLoadable=null,ot.stateVersion=null)}function ke(Ue,nt,Ze){Ze.state!=="loading"&&pt(Ue,nt,Ze)}function He(Ue,nt,Ze){let rt=x(nt);Je(nt,Ze)&&(rt.depValuesDiscoveredSoFarDuringAsyncWork=Ue)}function Ke(Ue,nt){Je(Ue,nt)&&f.delete(Ue)}function Je(Ue,nt){let Ze=x(Ue);return nt===Ze.latestExecutionId}function We(Ue){Ue.state!=="loading"&&(Ue.contents,void 0)}function lt(Ue){}function pt(Ue,nt,Ze){Ue.atomValues.set(e,Ze),o.set(nt,Ze)}function dt(Ue){if(BS.includes(e)){let nt=`Recoil selector has circular dependencies: ${BS.slice(BS.indexOf(e)).join(" \u2192 ")}`;return US(new Error(nt))}BS.push(e);try{return Ue()}finally{BS.pop()}}function ze(Ue,nt){return o.get(rt=>{typeof rt!="string"&&zL(!1);let at=XYt(Ue,nt,rt);return at==null?void 0:at.contents})}function Dt(Ue,nt){return dt(()=>ge(Ue,nt))}function Ot(Ue){Ue.atomValues.delete(e)}return i!=null?iLe({key:e,nodeType:"selector",peek:ze,get:Dt,set:(nt,Ze,rt)=>{let at=!1,ot=new Map;function Lt({key:Xt}){if(at)throw new Error("Recoil: Async selector sets are not currently supported.");let Gt=j(nt,Ze,Xt);if(We(Gt),Gt.state==="hasValue")return Gt.contents;throw Gt.state==="loading"?new t9t(Xt):Gt.contents}function zt(Xt,Gt){if(at)throw new Error("Recoil: Async selector sets are not currently supported.");let Sr=typeof Gt=="function"?Gt(Lt(Xt)):Gt;QYt(nt,Ze,Xt.key,Sr).forEach((vr,pr)=>ot.set(pr,vr))}function Pt(Xt){zt(Xt,e9t)}let $t=i({set:zt,get:Lt,reset:Pt},rt);if($t!==void 0)throw so($t)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return at=!0,ot},init:b,invalidate:Ot,shouldDeleteConfigOnRelease:A,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):iLe({key:e,nodeType:"selector",peek:ze,get:Dt,init:b,invalidate:Ot,shouldDeleteConfigOnRelease:A,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}var VL=f9t,{loadableWithError:oLe,loadableWithPromise:aLe,loadableWithValue:VS}=YS,{DEFAULT_VALUE:Zg,DefaultValue:T0,getConfigDeletionHandler:e2e,registerNode:h9t,setConfigDeletionHandler:p9t}=hu,{isRecoilValue:d9t}=qd,{markRecoilValueModified:m9t,setRecoilValue:sLe,setRecoilValueLoadable:g9t}=Kg,{retainedByOptionWithDefault:v9t}=XS;function y9t(t){let{key:e,persistence_UNSTABLE:r}=t,n=v9t(t.retainedBy_UNSTABLE),i=0,o=so(t.default)?aLe(t.default.then(D=>(o=VS(D),{__key:e,__value:D})).catch(D=>{throw o=oLe(D),D})):VS(t.default),l,f=new Map;function d(D,F){let U=F.then($=>{var Z,ie;return((ie=((Z=D.getState().nextTree)!==null&&Z!==void 0?Z:D.getState().currentTree).atomValues.get(e))===null||ie===void 0?void 0:ie.contents)===U&&sLe(D,j,$),{__key:e,__value:$}}).catch($=>{var Z,ie;throw((ie=((Z=D.getState().nextTree)!==null&&Z!==void 0?Z:D.getState().currentTree).atomValues.get(e))===null||ie===void 0?void 0:ie.contents)===U&&g9t(D,j,oLe($)),$});return U}function v(D,F,U){i++;let $=D.getState().knownAtoms.has(e);if(D.getState().knownAtoms.add(e),o.state==="loading"){let ge=()=>{var de;((de=D.getState().nextTree)!==null&&de!==void 0?de:D.getState().currentTree).atomValues.has(e)||m9t(D,j)};o.contents.then(ge).catch(ge)}let Z=Zg,ie=null;if(t.effects_UNSTABLE!=null&&!$){let ge=!0,de=Me=>ke=>{if(ge){let He=Z instanceof T0||so(Z)?o.state==="hasValue"?o.contents:Zg:Z;Z=typeof ke=="function"?ke(He):ke,so(Z)&&(Z=Z.then(Ke=>(ie={effect:Me,value:Ke},Ke)))}else{if(so(ke))throw new Error("Setting atoms to async values is not implemented.");typeof ke!="function"&&(ie={effect:Me,value:ke}),sLe(D,j,typeof ke=="function"?He=>{let Ke=ke(He);return ie={effect:Me,value:Ke},Ke}:ke)}},be=Me=>()=>de(Me)(Zg),Ne=Me=>ke=>{D.subscribeToTransactions(He=>{var Ke;let{currentTree:Je,previousTree:We}=He.getState();We||(pf("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),We=Je);let lt=(Ke=Je.atomValues.get(e))!==null&&Ke!==void 0?Ke:o;if(lt.state==="hasValue"){var pt,dt,ze,Dt;let Ot=lt.contents,Ue=(pt=We.atomValues.get(e))!==null&&pt!==void 0?pt:o,nt=Ue.state==="hasValue"?Ue.contents:Zg;((dt=ie)===null||dt===void 0?void 0:dt.effect)!==Me||((ze=ie)===null||ze===void 0?void 0:ze.value)!==Ot?ke(Ot,nt):((Dt=ie)===null||Dt===void 0?void 0:Dt.effect)===Me&&(ie=null)}},e)};for(let Me of(ne=t.effects_UNSTABLE)!==null&&ne!==void 0?ne:[]){var ne;let ke=Me({node:j,trigger:U,setSelf:de(Me),resetSelf:be(Me),onSet:Ne(Me)});if(ke!=null){var ae;f.set(D,[...((ae=f.get(D))!==null&&ae!==void 0?ae:[]),ke])}}ge=!1}if(!(Z instanceof T0)){var ye;let ge=so(Z)?aLe(d(D,Z)):VS(Z);F.atomValues.set(e,ge),(ye=D.getState().nextTree)===null||ye===void 0||ye.atomValues.set(e,ge)}return()=>{var ge;i--,(ge=f.get(D))===null||ge===void 0||ge.forEach(de=>de()),f.delete(D),D.getState().knownAtoms.delete(e)}}function x(D,F){var U,$,Z;return(U=($=F.atomValues.get(e))!==null&&$!==void 0?$:(Z=l)===null||Z===void 0?void 0:Z[1])!==null&&U!==void 0?U:o}function b(D,F){if(F.atomValues.has(e))return $n(F.atomValues.get(e));if(F.nonvalidatedAtoms.has(e)){if(l!=null)return l;if(r==null)return g8(`Tried to restore a persisted value for atom ${e} but it has no persistence settings.`),o;let U=F.nonvalidatedAtoms.get(e),$=r.validator(U,Zg);return l=$ instanceof T0?o:VS($),l}else return o}function A(){l=void 0}function P(D,F,U){if(F.atomValues.has(e)){let $=$n(F.atomValues.get(e));if($.state==="hasValue"&&U===$.contents)return new Map}else if(!F.nonvalidatedAtoms.has(e)&&U instanceof T0)return new Map;return l=void 0,new Map().set(e,VS(U))}function N(){return e2e(e)!==void 0&&i<=0}let j=h9t({key:e,nodeType:"atom",peek:x,get:b,set:P,init:v,invalidate:A,shouldDeleteConfigOnRelease:N,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return j}function t2e(t){let n=t,{default:e}=n,r=Oo(n,["default"]);return d9t(e)?_9t(on(mt({},r),{default:e})):y9t(on(mt({},r),{default:e}))}function _9t(t){let e=t2e(on(mt({},t),{default:Zg,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:on(mt({},t.persistence_UNSTABLE),{validator:n=>n instanceof T0?n:$n(t.persistence_UNSTABLE).validator(n,Zg)}),effects_UNSTABLE:t.effects_UNSTABLE})),r=VL({key:`${t.key}__withFallback`,get:({get:n})=>{let i=n(e);return i instanceof T0?t.default:i},set:({set:n},i)=>n(e,i),dangerouslyAllowMutability:t.dangerouslyAllowMutability});return p9t(r.key,e2e(t.key)),r}var r2e=t2e,u8=class{constructor(e){var r;xn(this,"_map",void 0),xn(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(r=e==null?void 0:e.mapKey)!==null&&r!==void 0?r:n=>n}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,r){this._map.set(this._keyMapper(e),r)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}},x9t={MapCache:u8},b9t=x9t.MapCache,w9t=Object.freeze({__proto__:null,MapCache:b9t}),{LRUCache:lLe}=JLe,{MapCache:E9t}=w9t,CL={equality:"reference",eviction:"none",maxSize:1/0};function S9t({equality:t=CL.equality,eviction:e=CL.eviction,maxSize:r=CL.maxSize}=CL){let n=T9t(t);return I9t(e,r,n)}function T9t(t){switch(t){case"reference":return e=>e;case"value":return e=>JL(e)}throw new Error(`Unrecognized equality policy ${t}`)}function I9t(t,e,r){switch(t){case"keep-all":return new E9t({mapKey:r});case"lru":return new lLe({mapKey:r,maxSize:$n(e)});case"most-recent":return new lLe({mapKey:r,maxSize:1})}throw new Error(`Unrecognized eviction policy ${t}`)}var n2e=S9t,{setConfigDeletionHandler:A9t}=hu;function M9t(t){var e,r;let n=n2e({equality:(e=(r=t.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let l=n.get(i);if(l!=null)return l;let x=t,{cachePolicyForParams_UNSTABLE:f}=x,d=Oo(x,["cachePolicyForParams_UNSTABLE"]),v=r2e(on(mt({},d),{key:`${t.key}__${(o=JL(i))!==null&&o!==void 0?o:"void"}`,default:typeof t.default=="function"?t.default(i):t.default,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects_UNSTABLE:typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):t.effects_UNSTABLE}));return n.set(i,v),A9t(v.key,()=>{n.delete(i)}),v}}var C9t=M9t,{setConfigDeletionHandler:P9t}=hu,R9t=0;function O9t(t){var e,r;let n=n2e({equality:(e=(r=t.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let l=n.get(i);if(l!=null)return l;let f=`${t.key}__selectorFamily/${(o=JL(i,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${R9t++}`,d=A=>t.get(i)(A),v=t.cachePolicy_UNSTABLE,x=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,b;if(t.set!=null){let A=t.set;b=VL({key:f,get:d,set:(N,j)=>A(i)(N,j),cachePolicy_UNSTABLE:v,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:x})}else b=VL({key:f,get:d,cachePolicy_UNSTABLE:v,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:x});return n.set(i,b),P9t(b.key,()=>{n.delete(i)}),b}}var Fd=O9t,L9t=Fd({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function D9t(t){return L9t(t)}var N9t=D9t,k9t=Fd({key:"__error",get:t=>()=>{throw new Error(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function q9t(t){return k9t(t)}var F9t=q9t;function j9t(t){return t}var z9t=j9t,{loadableWithError:i2e,loadableWithPromise:o2e,loadableWithValue:a2e}=YS;function e2(t,e){let r=Array(e.length).fill(void 0),n=Array(e.length).fill(void 0);for(let[i,o]of e.entries())try{r[i]=t(o)}catch(l){n[i]=l}return[r,n]}function U9t(t){return t!=null&&!so(t)}function t2(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function L8(t){return t!=null&&typeof t=="object"&&t.hasOwnProperty("__value")?t.__value:t}function c8(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((r,n,i)=>on(mt({},r),{[n]:e[i]}),{})}function A0(t,e,r){let n=r.map((i,o)=>i==null?a2e(e[o]):so(i)?o2e(i):i2e(i));return c8(t,n)}function B9t(t,e){return e.map((r,n)=>r===void 0?t[n]:r)}var V9t=Fd({key:"__waitForNone",get:t=>({get:e})=>{let r=t2(t),[n,i]=e2(e,r);return A0(t,n,i)},dangerouslyAllowMutability:!0}),G9t=Fd({key:"__waitForAny",get:t=>({get:e})=>{let r=t2(t),[n,i]=e2(e,r);return i.some(o=>!so(o))?A0(t,n,i):new Promise(o=>{for(let[l,f]of i.entries())so(f)&&f.then(d=>{n[l]=L8(d),i[l]=void 0,o(A0(t,n,i))}).catch(d=>{i[l]=d,o(A0(t,n,i))})})},dangerouslyAllowMutability:!0}),$9t=Fd({key:"__waitForAll",get:t=>({get:e})=>{let r=t2(t),[n,i]=e2(e,r);if(i.every(l=>l==null))return c8(t,n);let o=i.find(U9t);if(o!=null)throw o;return Promise.all(i).then(l=>c8(t,B9t(n,l).map(L8)))},dangerouslyAllowMutability:!0}),H9t=Fd({key:"__waitForAllSettled",get:t=>({get:e})=>{let r=t2(t),[n,i]=e2(e,r);return i.every(o=>!so(o))?A0(t,n,i):Promise.all(i.map((o,l)=>so(o)?o.then(f=>{n[l]=L8(f),i[l]=void 0}).catch(f=>{n[l]=void 0,i[l]=f}):null)).then(()=>A0(t,n,i))},dangerouslyAllowMutability:!0}),W9t=Fd({key:"__noWait",get:t=>({get:e})=>{try{return a2e(e(t))}catch(r){return so(r)?o2e(r):i2e(r)}},dangerouslyAllowMutability:!0}),Z9t={waitForNone:V9t,waitForAny:G9t,waitForAll:$9t,waitForAllSettled:H9t,noWait:W9t},{batchUpdates:Y9t,setBatcher:K9t}=b8,{DefaultValue:X9t}=hu,{RecoilRoot:Q9t}=KL,{isRecoilValue:J9t}=qd,{retentionZone:eKt}=$L,{freshSnapshot:tKt}=YL,{useGotoRecoilSnapshot:rKt,useRecoilCallback:nKt,useRecoilSnapshot:iKt,useRecoilState:oKt,useRecoilStateLoadable:aKt,useRecoilTransaction:sKt,useRecoilTransactionObserver:lKt,useRecoilValue:uKt,useRecoilValueLoadable:cKt,useResetRecoilState:fKt,useRetain:hKt,useSetRecoilState:pKt,useSetUnvalidatedAtomValues:dKt,useTransactionObservation_DEPRECATED:mKt}=EYt,{noWait:gKt,waitForAll:vKt,waitForAllSettled:yKt,waitForAny:_Kt,waitForNone:xKt}=Z9t,mn={DefaultValue:X9t,RecoilRoot:Q9t,useRecoilBridgeAcrossReactRoots_UNSTABLE:OYt,atom:r2e,selector:VL,retentionZone:eKt,atomFamily:C9t,selectorFamily:Fd,constSelector:N9t,errorSelector:F9t,readOnlySelector:z9t,useRecoilValue:uKt,useRecoilValueLoadable:cKt,useRecoilState:oKt,useRecoilStateLoadable:aKt,useSetRecoilState:pKt,useResetRecoilState:fKt,useGetRecoilValueInfo_UNSTABLE:AYt,useRetain:hKt,useRecoilCallback:nKt,useRecoilTransaction_UNSTABLE:sKt,useGotoRecoilSnapshot:rKt,useRecoilSnapshot:iKt,useRecoilTransactionObserver_UNSTABLE:lKt,useTransactionObservation_UNSTABLE:mKt,useSetUnvalidatedAtomValues_UNSTABLE:dKt,noWait:gKt,waitForNone:xKt,waitForAny:_Kt,waitForAll:vKt,waitForAllSettled:yKt,isRecoilValue:J9t,batchUpdates:Y9t,setBatcher:K9t,snapshot_UNSTABLE:tKt},g9r=mn.DefaultValue,s2e=mn.RecoilRoot,v9r=mn.useRecoilBridgeAcrossReactRoots_UNSTABLE,Kr=mn.atom,Xg=mn.selector,y9r=mn.retentionZone,_9r=mn.atomFamily,x9r=mn.selectorFamily,b9r=mn.constSelector,w9r=mn.errorSelector,E9r=mn.readOnlySelector,$s=mn.useRecoilValue,S9r=mn.useRecoilValueLoadable,r2=mn.useRecoilState,T9r=mn.useRecoilStateLoadable,pu=mn.useSetRecoilState,I9r=mn.useResetRecoilState,A9r=mn.useGetRecoilValueInfo_UNSTABLE,M9r=mn.useRetain,bKt=mn.useRecoilCallback,C9r=mn.useRecoilTransaction_UNSTABLE,P9r=mn.useGotoRecoilSnapshot,R9r=mn.useRecoilSnapshot,O9r=mn.useRecoilTransactionObserver_UNSTABLE,L9r=mn.useTransactionObservation_UNSTABLE,D9r=mn.useSetUnvalidatedAtomValues_UNSTABLE,N9r=mn.noWait,k9r=mn.waitForNone,q9r=mn.waitForAny,F9r=mn.waitForAll,j9r=mn.waitForAllSettled,z9r=mn.isRecoilValue,U9r=mn.batchUpdates,B9r=mn.setBatcher,V9r=mn.snapshot_UNSTABLE;p();var eo=Fe(Et(),1);var bUe=Fe(k8(),1);p();function I2e(t){return Pn(this,null,function*(){let e=Di.getGeoreferenceApiClient(),r="/transformations/",n={map_id:t,additional_properties:!0},i=yield e.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given map_id.")})}function A2e(t,e){return Pn(this,null,function*(){let r=Di.getGeoreferenceApiClient(),n="/transformations/",i={dry_run:!1},o=on(mt({},e),{map_id:t}),l=yield r.post(n,o,{params:i});if(l.status===200)return l.data;console.error("Something went wrong while trying to confirm transformation for given map_id and params.")})}function M2e(t,e,r){return Pn(this,null,function*(){let n=Di.getGeoreferenceApiClient(),i="/transformations/",o=Object.assign({map_id:t,params:e,overwrites:0},r!==void 0?{clip:r}:{}),l={dry_run:!0},f=yield n.post(i,o,{params:l});if(f.status===200)return f.data;console.error("Something went wrong while trying to fetch transformation for given map_id and params.")})}function C2e(t){return Pn(this,null,function*(){let e=Di.getGeoreferenceApiClient(),r="/transformations/",n={transformation_id:t},i={dry_run:!0},o=yield e.post(r,n,{params:i});if(o.status===200)return o.data;console.error("Something went wrong while trying to fetch transformation preview for given transformation_id.")})}p();var jd=Kr({key:"notificationState",default:null});p();p();var fKr=Kr({key:"helperMessageState",default:null}),n2=Kr({key:"isLoadingState",default:!1}),i2=Kr({key:"mapMetadataState",default:null}),o2=Kr({key:"rectifiedImageParamsState",default:null}),a2=Kr({key:"sourceViewParamsState",default:null,dangerouslyAllowMutability:!0}),s2=Kr({key:"targetViewParamsState",default:null,dangerouslyAllowMutability:!0}),l2=Kr({key:"transformationState",default:null});p();p();var JS=Fe(Et(),1),Oh=Fe(an(),1);p();function q2e(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=q2e(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function LKt(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=q2e(t))&&(n&&(n+=" "),n+=e);return n}var Ws=LKt;p();p();var q8=Fe(Et(),1),u2=Fe(an(),1);var F2e=({name:t,color:e,size:r})=>q8.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${t}`,fill:e,width:r,height:r},q8.default.createElement("use",{xlinkHref:`${Di.getSettings().ICON_SPRITE}#${t}`}));F2e.propTypes={name:u2.default.string.isRequired,color:u2.default.string,size:u2.default.number};var j2e=F2e;var QS=j2e;var z2e=t=>{let{activeControl:e=null,className:r="",disabled:n=!1,iconClassName:i="",IconComponent:o,id:l="unknown",onClick:f,title:d="unknown"}=t;return JS.default.createElement("button",{onClick:()=>{f(l)},className:Ws("vkf-control-button",r,e===l&&"active",n&&"disabled"),disabled:n},o===void 0?JS.default.createElement(QS,{name:i,size:24}):JS.default.createElement(o,{glyph:i}),JS.default.createElement("span",{className:"text"},d))};z2e.propTypes={activeControl:Oh.default.string,className:Oh.default.string,disabled:Oh.default.bool,id:Oh.default.string.isRequired,iconClassName:Oh.default.string,IconComponent:Oh.default.elementType,onClick:Oh.default.func.isRequired,title:Oh.default.string};var U2e=z2e;var R0=U2e;p();p();var pc=Fe(Et(),1),Ys=Fe(an(),1);p();p();var X8=Fe(zDe(),1);function br(){return br=X8.default?X8.default.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},br.apply(null,arguments)}p();var lNe=Fe(XDe(),1);p();var tZ=Fe(sNe(),1);function E2(t,e){return E2=tZ.default?tZ.default.bind():function(r,n){return r.__proto__=n,r},E2(t,e)}function On(t,e){t.prototype=(0,lNe.default)(e.prototype),t.prototype.constructor=t,E2(t,e)}p();function Ln(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}p();p();p();function gn(){return gn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gn.apply(null,arguments)}p();function oT(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var nZ=Fe(Et());p();var WXr=Fe(T2()),F7t=function(){};function cNe(t,e){var r={};return Object.keys(t).forEach(function(n){if(r[N0(n)]=F7t,0)var i}),r}function rZ(t,e){return t[e]!==void 0}function N0(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function fNe(t){return!!t&&(typeof t!="function"||t.prototype&&t.prototype.isReactComponent)}p();p();p();function k0(t,e){return k0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},k0(t,e)}function pNe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,k0(t,e)}var q0=Fe(Et()),vNe=Fe(oZ()),yNe=Fe(T2());var z7t="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function aT(t,e,r){r===void 0&&(r=[]);var n=t.displayName||t.name||"Component",i=fNe(t),o=Object.keys(e),l=o.map(N0);i||!r.length||(0,yNe.default)(!1);var f=function(v){pNe(x,v);function x(){for(var A,P=arguments.length,N=new Array(P),j=0;j<P;j++)N[j]=arguments[j];A=v.call.apply(v,[this].concat(N))||this,A.handlers=Object.create(null),o.forEach(function(F){var U=e[F],$=function(ie){if(A.props[U]){var ne;A._notifying=!0;for(var ae=arguments.length,ye=new Array(ae>1?ae-1:0),ge=1;ge<ae;ge++)ye[ge-1]=arguments[ge];(ne=A.props)[U].apply(ne,[ie].concat(ye)),A._notifying=!1}A.unmounted||A.setState(function(de){var be,Ne=de.values;return{values:gn(Object.create(null),Ne,(be={},be[F]=ie,be))}})};A.handlers[U]=$}),r.length&&(A.attachRef=function(F){A.inner=F});var D=Object.create(null);return o.forEach(function(F){D[F]=A.props[N0(F)]}),A.state={values:D,prevProps:{}},A}var b=x.prototype;return b.shouldComponentUpdate=function(){return!this._notifying},x.getDerivedStateFromProps=function(P,N){var j=N.values,D=N.prevProps,F={values:gn(Object.create(null),j),prevProps:{}};return o.forEach(function(U){F.prevProps[U]=P[U],!rZ(P,U)&&rZ(D,U)&&(F.values[U]=P[N0(U)])}),F},b.componentWillUnmount=function(){this.unmounted=!0},b.render=function(){var P=this,N=this.props,j=N.innerRef,D=oT(N,["innerRef"]);l.forEach(function(U){delete D[U]});var F={};return o.forEach(function(U){var $=P.props[U];F[U]=$!==void 0?$:P.state.values[U]}),q0.default.createElement(t,gn({},D,F,this.handlers,{ref:j||this.attachRef}))},x}(q0.default.Component);(0,vNe.polyfill)(f),f.displayName="Uncontrolled("+n+")",f.propTypes=gn({innerRef:function(){}},cNe(e,n)),r.forEach(function(v){f.prototype[v]=function(){var b;return(b=this.inner)[v].apply(b,arguments)}});var d=f;return q0.default.forwardRef&&(d=q0.default.forwardRef(function(v,x){return q0.default.createElement(f,gn({},v,{innerRef:x,__source:{fileName:z7t,lineNumber:128},__self:this}))}),d.propTypes=f.propTypes),d.ControlledComponent=t,d.deferControlTo=function(v,x,b){return x===void 0&&(x={}),aT(v,gn({},e,x),b)},d}p();var uZ=Fe(sZ());var INe=Fe(T2()),I2=Fe(an());p();var mf={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},lZ={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var TNe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},sT={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function cZ(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[r.length-1];return typeof i=="function"?t.apply(void 0,r):function(o){return t.apply(void 0,r.concat([o]))}}}function di(t,e){var r=(t.bsClass||"").trim();return r==null&&(0,INe.default)(!1),r+(e?"-"+e:"")}var mi=cZ(function(t,e){var r=e.propTypes||(e.propTypes={}),n=e.defaultProps||(e.defaultProps={});return r.bsClass=I2.default.string,n.bsClass=t,e}),ANe=cZ(function(t,e,r){typeof e!="string"&&(r=e,e=void 0);var n=r.STYLES||[],i=r.propTypes||{};t.forEach(function(f){n.indexOf(f)===-1&&n.push(f)});var o=I2.default.oneOf(n);if(r.STYLES=n,o._values=n,r.propTypes=br({},i,{bsStyle:o}),e!==void 0){var l=r.defaultProps||(r.defaultProps={});l.bsStyle=e}return r}),F0=cZ(function(t,e,r){typeof e!="string"&&(r=e,e=void 0);var n=r.SIZES||[],i=r.propTypes||{};t.forEach(function(f){n.indexOf(f)===-1&&n.push(f)});var o=[];n.forEach(function(f){var d=lZ[f];d&&d!==f&&o.push(d),o.push(f)});var l=I2.default.oneOf(o);return l._values=o,r.SIZES=n,r.propTypes=br({},i,{bsSize:l}),e!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=e),r});function Jo(t){var e,r=(e={},e[di(t)]=!0,e);if(t.bsSize){var n=lZ[t.bsSize]||t.bsSize;r[di(t,n)]=!0}return t.bsStyle&&(r[di(t,t.bsStyle)]=!0),r}function MNe(t){return{bsClass:t.bsClass,bsSize:t.bsSize,bsStyle:t.bsStyle,bsRole:t.bsRole}}function CNe(t){return t==="bsClass"||t==="bsSize"||t==="bsStyle"||t==="bsRole"}function za(t){var e={};return(0,uZ.default)(t).forEach(function(r){var n=r[0],i=r[1];CNe(n)||(e[n]=i)}),[MNe(t),e]}function A2(t,e){var r={};e.forEach(function(i){r[i]=!0});var n={};return(0,uZ.default)(t).forEach(function(i){var o=i[0],l=i[1];!CNe(o)&&!r[o]&&(n[o]=l)}),[MNe(t),n]}p();var wa=Fe(Et());function H7t(t,e,r){var n=0;return wa.default.Children.map(t,function(i){return wa.default.isValidElement(i)?e.call(r,i,n++):i})}function W7t(t,e,r){var n=0;wa.default.Children.forEach(t,function(i){wa.default.isValidElement(i)&&e.call(r,i,n++)})}function Z7t(t){var e=0;return wa.default.Children.forEach(t,function(r){wa.default.isValidElement(r)&&++e}),e}function Y7t(t,e,r){var n=0,i=[];return wa.default.Children.forEach(t,function(o){wa.default.isValidElement(o)&&e.call(r,o,n++)&&i.push(o)}),i}function K7t(t,e,r){var n=0,i;return wa.default.Children.forEach(t,function(o){i||wa.default.isValidElement(o)&&e.call(r,o,n++)&&(i=o)}),i}function X7t(t,e,r){var n=0,i=!0;return wa.default.Children.forEach(t,function(o){i&&wa.default.isValidElement(o)&&(e.call(r,o,n++)||(i=!1))}),i}function Q7t(t,e,r){var n=0,i=!1;return wa.default.Children.forEach(t,function(o){i||wa.default.isValidElement(o)&&e.call(r,o,n++)&&(i=!0)}),i}function J7t(t){var e=[];return wa.default.Children.forEach(t,function(r){wa.default.isValidElement(r)&&e.push(r)}),e}var Qg={map:H7t,forEach:W7t,count:Z7t,find:K7t,filter:Y7t,every:X7t,some:Q7t,toArray:J7t};p();var C2=Fe(an()),fZ=Fe(lT());var qQr=C2.default.oneOfType([C2.default.string,C2.default.number]);function RNe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,fZ.default)(function(n,i,o){var l;return e.every(function(f){return Qg.some(n.children,function(d){return d.props.bsRole===f})?!0:(l=f,!1)}),l?new Error("(children) "+o+" - Missing a required child with bsRole: "+(l+". "+o+" must have at least one child of each of ")+("the following bsRoles: "+e.join(", "))):null})}function ONe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,fZ.default)(function(n,i,o){var l;return e.every(function(f){var d=Qg.filter(n.children,function(v){return v.props.bsRole===f});return d.length>1?(l=f,!1):!0}),l?new Error("(children) "+o+" - Duplicate children detected of bsRole: "+(l+". Only one child each allowed with the following ")+("bsRoles: "+e.join(", "))):null})}p();var hZ=Fe(an()),uT=Fe(Et()),rXt={label:hZ.default.string.isRequired,onClick:hZ.default.func},nXt={label:"Close"},pZ=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.label,l=i.onClick;return uT.default.createElement("button",{type:"button",className:"close",onClick:l},uT.default.createElement("span",{"aria-hidden":"true"},"\xD7"),uT.default.createElement("span",{className:"sr-only"},o))},e}(uT.default.Component);pZ.propTypes=rXt;pZ.defaultProps=nXt;var jNe=pZ;p();p();function zn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var vZ=Fe(Et()),Dh=Fe(an()),WNe=Fe(Lh());p();function mXt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var l=arguments.length,f=new Array(l),d=0;d<l;d++)f[d]=arguments[d];n.apply(this,f),i.apply(this,f)}},null)}var jo=mXt;var gXt={href:Dh.default.string,onClick:Dh.default.func,onKeyDown:Dh.default.func,disabled:Dh.default.bool,role:Dh.default.string,tabIndex:Dh.default.oneOfType([Dh.default.number,Dh.default.string]),componentClass:WNe.default},vXt={componentClass:"a"};function HNe(t){return!t||t.trim()==="#"}var yZ=function(t){On(e,t);function e(n,i){var o;return o=t.call(this,n,i)||this,o.handleClick=o.handleClick.bind(zn(zn(o))),o.handleKeyDown=o.handleKeyDown.bind(zn(zn(o))),o}var r=e.prototype;return r.handleClick=function(i){var o=this.props,l=o.disabled,f=o.href,d=o.onClick;if((l||HNe(f))&&i.preventDefault(),l){i.stopPropagation();return}d&&d(i)},r.handleKeyDown=function(i){i.key===" "&&(i.preventDefault(),this.handleClick(i))},r.render=function(){var i=this.props,o=i.componentClass,l=i.disabled,f=i.onKeyDown,d=Ln(i,["componentClass","disabled","onKeyDown"]);return HNe(d.href)&&(d.role=d.role||"button",d.href=d.href||"#"),l&&(d.tabIndex=-1,d.style=br({pointerEvents:"none"},d.style)),vZ.default.createElement(o,br({},d,{onClick:this.handleClick,onKeyDown:jo(this.handleKeyDown,f)}))},e}(vZ.default.Component);yZ.propTypes=gXt;yZ.defaultProps=vXt;var j0=yZ;p();var ZNe=Fe(FNe());var _Z=Fe(pi()),U2=Fe(Et()),Jg=Fe(an()),YNe=Fe(Lh());var yXt={active:Jg.default.bool,disabled:Jg.default.bool,block:Jg.default.bool,onClick:Jg.default.func,componentClass:YNe.default,href:Jg.default.string,type:Jg.default.oneOf(["button","reset","submit"])},_Xt={active:!1,block:!1,disabled:!1},xZ=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.renderAnchor=function(i,o){return U2.default.createElement(j0,br({},i,{className:(0,_Z.default)(o,i.disabled&&"disabled")}))},r.renderButton=function(i,o){var l=i.componentClass,f=Ln(i,["componentClass"]),d=l||"button";return U2.default.createElement(d,br({},f,{type:f.type||"button",className:o}))},r.render=function(){var i,o=this.props,l=o.active,f=o.block,d=o.className,v=Ln(o,["active","block","className"]),x=za(v),b=x[0],A=x[1],P=br({},Jo(b),(i={active:l},i[di(b,"block")]=f,i)),N=(0,_Z.default)(d,P);return A.href?this.renderAnchor(A,N):this.renderButton(A,N)},e}(U2.default.Component);xZ.propTypes=yXt;xZ.defaultProps=_Xt;var Bd=mi("btn",F0([mf.LARGE,mf.SMALL,mf.XSMALL],ANe((0,ZNe.default)(TNe).concat([sT.DEFAULT,sT.PRIMARY,sT.LINK]),sT.DEFAULT,xZ)));p();var XNe=Fe(pi()),bZ=Fe(Et()),G2=Fe(an()),QNe=Fe(V2());var SXt={vertical:G2.default.bool,justified:G2.default.bool,block:(0,QNe.default)(G2.default.bool,function(t){var e=t.block,r=t.vertical;return e&&!r?new Error("`block` requires `vertical` to be set to have any effect"):null})},TXt={block:!1,justified:!1,vertical:!1},wZ=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i,o=this.props,l=o.block,f=o.justified,d=o.vertical,v=o.className,x=Ln(o,["block","justified","vertical","className"]),b=za(x),A=b[0],P=b[1],N=br({},Jo(A),(i={},i[di(A)]=!d,i[di(A,"vertical")]=d,i[di(A,"justified")]=f,i[di(Bd.defaultProps,"block")]=l,i));return bZ.default.createElement("div",br({},P,{className:(0,XNe.default)(v,N)}))},e}(bZ.default.Component);wZ.propTypes=SXt;wZ.defaultProps=TXt;var JNe=mi("btn-group",wZ);p();var eke=Fe(pi()),EZ=Fe(Et()),tke=Fe(an());var IXt={glyph:tke.default.string.isRequired},rke=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i,o=this.props,l=o.glyph,f=o.className,d=Ln(o,["glyph","className"]),v=za(d),x=v[0],b=v[1],A=br({},Jo(x),(i={},i[di(x,l)]=!0,i));return EZ.default.createElement("span",br({},b,{className:(0,eke.default)(f,A)}))},e}(EZ.default.Component);rke.propTypes=IXt;var SZ=mi("glyphicon",rke);p();var Bqe=Fe(pi()),Vqe=Fe(NZ()),Gqe=Fe(gT()),mD=Fe(qZ()),G0=Fe(Et()),ds=Fe(an()),JZ=Fe(No()),$qe=Fe(V2()),Hqe=Fe(Lh()),Wqe=Fe(qke());var vtn=Fe(TZ());p();var qqe=Fe(Iqe());var Fqe=Fe(pi()),bT=Fe(qZ()),wT=Fe(Et()),kh=Fe(an()),jqe=Fe(No()),zqe=Fe(kqe());var NJt={open:kh.default.bool,pullRight:kh.default.bool,onClose:kh.default.func,labelledBy:kh.default.oneOfType([kh.default.string,kh.default.number]),onSelect:kh.default.func,rootCloseEvent:kh.default.oneOf(["click","mousedown"])},kJt={bsRole:"menu",pullRight:!1},YZ=function(t){On(e,t);function e(n){var i;return i=t.call(this,n)||this,i.handleRootClose=i.handleRootClose.bind(zn(zn(i))),i.handleKeyDown=i.handleKeyDown.bind(zn(zn(i))),i}var r=e.prototype;return r.getFocusableMenuItems=function(){var i=jqe.default.findDOMNode(this);return i?(0,qqe.default)(i.querySelectorAll("[tabIndex=\"-1\"]")):[]},r.getItemsAndActiveIndex=function(){var i=this.getFocusableMenuItems(),o=i.indexOf(document.activeElement);return{items:i,activeIndex:o}},r.focusNext=function(){var i=this.getItemsAndActiveIndex(),o=i.items,l=i.activeIndex;if(o.length!==0){var f=l===o.length-1?0:l+1;o[f].focus()}},r.focusPrevious=function(){var i=this.getItemsAndActiveIndex(),o=i.items,l=i.activeIndex;if(o.length!==0){var f=l===0?o.length-1:l-1;o[f].focus()}},r.handleKeyDown=function(i){switch(i.keyCode){case bT.default.codes.down:this.focusNext(),i.preventDefault();break;case bT.default.codes.up:this.focusPrevious(),i.preventDefault();break;case bT.default.codes.esc:case bT.default.codes.tab:this.props.onClose(i,{source:"keydown"});break;default:}},r.handleRootClose=function(i){this.props.onClose(i,{source:"rootClose"})},r.render=function(){var i,o=this,l=this.props,f=l.open,d=l.pullRight,v=l.labelledBy,x=l.onSelect,b=l.className,A=l.rootCloseEvent,P=l.children,N=Ln(l,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),j=A2(N,["onClose"]),D=j[0],F=j[1],U=br({},Jo(D),(i={},i[di(D,"right")]=d,i));return wT.default.createElement(zqe.default,{disabled:!f,onRootClose:this.handleRootClose,event:A},wT.default.createElement("ul",br({},F,{role:"menu",className:(0,Fqe.default)(b,U),"aria-labelledby":v}),Qg.map(P,function($){return wT.default.cloneElement($,{onKeyDown:jo($.props.onKeyDown,o.handleKeyDown),onSelect:jo($.props.onSelect,x)})})))},e}(wT.default.Component);YZ.propTypes=NJt;YZ.defaultProps=kJt;var KZ=mi("dropdown-menu",YZ);p();var dD=Fe(Et()),ET=Fe(an()),Uqe=Fe(pi());var qJt={noCaret:ET.default.bool,open:ET.default.bool,title:ET.default.string,useAnchor:ET.default.bool},FJt={open:!1,useAnchor:!1,bsRole:"toggle"},XZ=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.noCaret,l=i.open,f=i.useAnchor,d=i.bsClass,v=i.className,x=i.children,b=Ln(i,["noCaret","open","useAnchor","bsClass","className","children"]);delete b.bsRole;var A=f?j0:Bd,P=!o;return dD.default.createElement(A,br({},b,{role:"button",className:(0,Uqe.default)(v,d),"aria-haspopup":!0,"aria-expanded":l}),x||b.title,P&&" ",P&&dD.default.createElement("span",{className:"caret"}))},e}(dD.default.Component);XZ.propTypes=qJt;XZ.defaultProps=FJt;var QZ=mi("dropdown-toggle",XZ);var Zqe=QZ.defaultProps.bsRole,eY=KZ.defaultProps.bsRole,jJt={dropup:ds.default.bool,id:(0,Wqe.default)(ds.default.oneOfType([ds.default.string,ds.default.number])),componentClass:Hqe.default,children:(0,$qe.default)(RNe(Zqe,eY),ONe(eY)),disabled:ds.default.bool,pullRight:ds.default.bool,open:ds.default.bool,defaultOpen:ds.default.bool,onToggle:ds.default.func,onSelect:ds.default.func,role:ds.default.string,rootCloseEvent:ds.default.oneOf(["click","mousedown"]),onMouseEnter:ds.default.func,onMouseLeave:ds.default.func},zJt={componentClass:JNe},gD=function(t){On(e,t);function e(n,i){var o;return o=t.call(this,n,i)||this,o.handleClick=o.handleClick.bind(zn(zn(o))),o.handleKeyDown=o.handleKeyDown.bind(zn(zn(o))),o.handleClose=o.handleClose.bind(zn(zn(o))),o._focusInDropdown=!1,o.lastOpenEventType=null,o}var r=e.prototype;return r.componentDidMount=function(){this.focusNextOnOpen()},r.UNSAFE_componentWillUpdate=function(i){!i.open&&this.props.open&&(this._focusInDropdown=(0,Gqe.default)(JZ.default.findDOMNode(this.menu),(0,Vqe.default)(document)))},r.componentDidUpdate=function(i){var o=this.props.open,l=i.open;o&&!l&&this.focusNextOnOpen(),!o&&l&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},r.focus=function(){var i=JZ.default.findDOMNode(this.toggle);i&&i.focus&&i.focus()},r.focusNextOnOpen=function(){var i=this.menu;!i||!i.focusNext||(this.lastOpenEventType==="keydown"||this.props.role==="menuitem")&&i.focusNext()},r.handleClick=function(i){this.props.disabled||this.toggleOpen(i,{source:"click"})},r.handleClose=function(i,o){this.props.open&&this.toggleOpen(i,o)},r.handleKeyDown=function(i){if(!this.props.disabled)switch(i.keyCode){case mD.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(i,{source:"keydown"}),i.preventDefault();break;case mD.default.codes.esc:case mD.default.codes.tab:this.handleClose(i,{source:"keydown"});break;default:}},r.toggleOpen=function(i,o){var l=!this.props.open;l&&(this.lastOpenEventType=o.source),this.props.onToggle&&this.props.onToggle(l,i,o)},r.renderMenu=function(i,o){var l=this,f=o.id,d=o.onSelect,v=o.rootCloseEvent,x=Ln(o,["id","onSelect","rootCloseEvent"]),b=function(P){l.menu=P};return typeof i.ref=="string"||(b=jo(i.ref,b)),(0,G0.cloneElement)(i,br({},x,{ref:b,labelledBy:f,bsClass:di(x,"menu"),onClose:jo(i.props.onClose,this.handleClose),onSelect:jo(i.props.onSelect,d,function(A,P){return l.handleClose(P,{source:"select"})}),rootCloseEvent:v}))},r.renderToggle=function(i,o){var l=this,f=function(v){l.toggle=v};return typeof i.ref=="string"||(f=jo(i.ref,f)),(0,G0.cloneElement)(i,br({},o,{ref:f,bsClass:di(o,"toggle"),onClick:jo(i.props.onClick,this.handleClick),onKeyDown:jo(i.props.onKeyDown,this.handleKeyDown)}))},r.render=function(){var i,o=this,l=this.props,f=l.componentClass,d=l.id,v=l.dropup,x=l.disabled,b=l.pullRight,A=l.open,P=l.onSelect,N=l.role,j=l.bsClass,D=l.className,F=l.rootCloseEvent,U=l.children,$=Ln(l,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete $.onToggle;var Z=(i={},i[j]=!0,i.open=A,i.disabled=x,i);return v&&(Z[j]=!1,Z.dropup=!0),G0.default.createElement(f,br({},$,{className:(0,Bqe.default)(D,Z)}),Qg.map(U,function(ie){switch(ie.props.bsRole){case Zqe:return o.renderToggle(ie,{id:d,disabled:x,open:A,role:N,bsClass:j});case eY:return o.renderMenu(ie,{id:d,open:A,pullRight:b,bsClass:j,onSelect:P,rootCloseEvent:F});default:return ie}}))},e}(G0.default.Component);gD.propTypes=jJt;gD.defaultProps=zJt;mi("dropdown",gD);var tY=aT(gD,{open:"onToggle"});tY.Toggle=QZ;tY.Menu=KZ;var ST=tY;p();var Yqe=Fe(sZ());function rY(t,e){var r=e.propTypes,n={},i={};return(0,Yqe.default)(t).forEach(function(o){var l=o[0],f=o[1];r[l]?n[l]=f:i[l]=f}),[n,i]}p();var Kqe=Fe(pi()),yD=Fe(Et()),du=Fe(an()),$0=Fe(Mke()),vD,UJt={in:du.default.bool,mountOnEnter:du.default.bool,unmountOnExit:du.default.bool,appear:du.default.bool,timeout:du.default.number,onEnter:du.default.func,onEntering:du.default.func,onEntered:du.default.func,onExit:du.default.func,onExiting:du.default.func,onExited:du.default.func},BJt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},VJt=(vD={},vD[$0.ENTERING]="in",vD[$0.ENTERED]="in",vD),nY=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.className,l=i.children,f=Ln(i,["className","children"]);return yD.default.createElement($0.default,f,function(d,v){return yD.default.cloneElement(l,br({},v,{className:(0,Kqe.default)("fade",o,l.props.className,VJt[d])}))})},e}(yD.default.Component);nY.propTypes=UJt;nY.defaultProps=BJt;var iY=nY;p();var _D=Fe(pi()),H0=Fe(Et()),qh=Fe(an()),Xqe=Fe(V2());var GJt={active:qh.default.bool,disabled:qh.default.bool,divider:(0,Xqe.default)(qh.default.bool,function(t){var e=t.divider,r=t.children;return e&&r?new Error("Children will not be rendered for dividers"):null}),eventKey:qh.default.any,header:qh.default.bool,href:qh.default.string,onClick:qh.default.func,onSelect:qh.default.func},$Jt={divider:!1,disabled:!1,header:!1},oY=function(t){On(e,t);function e(n,i){var o;return o=t.call(this,n,i)||this,o.handleClick=o.handleClick.bind(zn(zn(o))),o}var r=e.prototype;return r.handleClick=function(i){var o=this.props,l=o.href,f=o.disabled,d=o.onSelect,v=o.eventKey;(!l||f)&&i.preventDefault(),!f&&d&&d(v,i)},r.render=function(){var i=this.props,o=i.active,l=i.disabled,f=i.divider,d=i.header,v=i.onClick,x=i.className,b=i.style,A=Ln(i,["active","disabled","divider","header","onClick","className","style"]),P=A2(A,["eventKey","onSelect"]),N=P[0],j=P[1];return f?(j.children=void 0,H0.default.createElement("li",br({},j,{role:"separator",className:(0,_D.default)(x,"divider"),style:b}))):d?H0.default.createElement("li",br({},j,{role:"heading",className:(0,_D.default)(x,di(N,"header")),style:b})):H0.default.createElement("li",{role:"presentation",className:(0,_D.default)(x,{active:o,disabled:l}),style:b},H0.default.createElement(j0,br({},j,{role:"menuitem",tabIndex:"-1",onClick:jo(v,this.handleClick)})))},e}(H0.default.Component);oY.propTypes=GJt;oY.defaultProps=$Jt;var aY=mi("dropdown",oY);p();var PY=Fe(pi()),RY=Fe(cFe()),Mje=Fe(dT()),Cje=Fe(gf()),OY=Fe(uY()),Y0=Fe(Et()),ta=Fe(an()),Pje=Fe(No()),K0=Fe(dje()),Rje=Fe(pY()),Oje=Fe(Lh());p();var mje=Fe(pi()),EY=Fe(Et()),gje=Fe(Lh());var rrr={componentClass:gje.default},nrr={componentClass:"div"},SY=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.componentClass,l=i.className,f=Ln(i,["componentClass","className"]),d=za(f),v=d[0],x=d[1],b=Jo(v);return EY.default.createElement(o,br({},x,{className:(0,mje.default)(l,b)}))},e}(EY.default.Component);SY.propTypes=rrr;SY.defaultProps=nrr;var vje=mi("modal-body",SY);p();var TY=Fe(pi()),AT=Fe(Et()),yje=Fe(an());var irr={dialogClassName:yje.default.string},_je=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i,o=this.props,l=o.dialogClassName,f=o.className,d=o.style,v=o.children,x=o.onMouseDownDialog,b=Ln(o,["dialogClassName","className","style","children","onMouseDownDialog"]),A=za(b),P=A[0],N=A[1],j=di(P),D=br({display:"block"},d),F=br({},Jo(P),(i={},i[j]=!1,i[di(P,"dialog")]=!0,i));return AT.default.createElement("div",br({},N,{tabIndex:"-1",role:"dialog",style:D,className:(0,TY.default)(f,j)}),AT.default.createElement("div",{className:(0,TY.default)(l,F),onMouseDown:x},AT.default.createElement("div",{className:di(P,"content"),role:"document"},v)))},e}(AT.default.Component);_je.propTypes=irr;var BD=mi("modal",F0([mf.LARGE,mf.SMALL],_je));p();var xje=Fe(pi()),IY=Fe(Et()),bje=Fe(Lh());var orr={componentClass:bje.default},arr={componentClass:"div"},AY=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.componentClass,l=i.className,f=Ln(i,["componentClass","className"]),d=za(f),v=d[0],x=d[1],b=Jo(v);return IY.default.createElement(o,br({},x,{className:(0,xje.default)(l,b)}))},e}(IY.default.Component);AY.propTypes=orr;AY.defaultProps=arr;var wje=mi("modal-footer",AY);p();var Eje=Fe(pi()),Z0=Fe(an()),VD=Fe(Et());var srr={closeLabel:Z0.default.string,closeButton:Z0.default.bool,onHide:Z0.default.func},lrr={closeLabel:"Close",closeButton:!1},urr={$bs_modal:Z0.default.shape({onHide:Z0.default.func})},GD=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.closeLabel,l=i.closeButton,f=i.onHide,d=i.className,v=i.children,x=Ln(i,["closeLabel","closeButton","onHide","className","children"]),b=this.context.$bs_modal,A=za(x),P=A[0],N=A[1],j=Jo(P);return VD.default.createElement("div",br({},N,{className:(0,Eje.default)(d,j)}),l&&VD.default.createElement(jNe,{label:o,onClick:jo(b&&b.onHide,f)}),v)},e}(VD.default.Component);GD.propTypes=srr;GD.defaultProps=lrr;GD.contextTypes=urr;var Sje=mi("modal-header",GD);p();var Tje=Fe(pi()),MY=Fe(Et()),Ije=Fe(Lh());var crr={componentClass:Ije.default},frr={componentClass:"h4"},CY=function(t){On(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.componentClass,l=i.className,f=Ln(i,["componentClass","className"]),d=za(f),v=d[0],x=d[1],b=Jo(v);return MY.default.createElement(o,br({},x,{className:(0,Tje.default)(l,b)}))},e}(MY.default.Component);CY.propTypes=crr;CY.defaultProps=frr;var Aje=mi("modal-title",CY);var hrr=br({},K0.default.propTypes,BD.propTypes,{backdrop:ta.default.oneOf(["static",!0,!1]),backdropClassName:ta.default.string,keyboard:ta.default.bool,animation:ta.default.bool,dialogComponentClass:Oje.default,autoFocus:ta.default.bool,enforceFocus:ta.default.bool,restoreFocus:ta.default.bool,show:ta.default.bool,onHide:ta.default.func,onEnter:ta.default.func,onEntering:ta.default.func,onEntered:ta.default.func,onExit:ta.default.func,onExiting:ta.default.func,onExited:ta.default.func,container:K0.default.propTypes.container}),prr=br({},K0.default.defaultProps,{animation:!0,dialogComponentClass:BD}),drr={$bs_modal:ta.default.shape({onHide:ta.default.func})};function mrr(t){return Y0.default.createElement(iY,br({},t,{timeout:Cl.TRANSITION_DURATION}))}function grr(t){return Y0.default.createElement(iY,br({},t,{timeout:Cl.BACKDROP_TRANSITION_DURATION}))}var Cl=function(t){On(e,t);function e(n,i){var o;return o=t.call(this,n,i)||this,o.handleDialogBackdropMouseDown=function(){o._waitingForMouseUp=!0},o.handleMouseUp=function(l){var f=o._modal.getDialogElement();o._waitingForMouseUp&&l.target===f&&(o._ignoreBackdropClick=!0),o._waitingForMouseUp=!1},o.handleEntering=o.handleEntering.bind(zn(zn(o))),o.handleExited=o.handleExited.bind(zn(zn(o))),o.handleWindowResize=o.handleWindowResize.bind(zn(zn(o))),o.handleDialogClick=o.handleDialogClick.bind(zn(zn(o))),o.setModalRef=o.setModalRef.bind(zn(zn(o))),o.state={style:{}},o}var r=e.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(i){this._modal=i},r.handleDialogClick=function(i){if(this._ignoreBackdropClick||i.target!==i.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){RY.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){RY.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(Cje.default){var i=this._modal.getDialogElement(),o=i.scrollHeight,l=(0,Mje.default)(i),f=(0,Rje.default)(Pje.default.findDOMNode(this.props.container||l.body)),d=o>l.documentElement.clientHeight;this.setState({style:{paddingRight:f&&!d?(0,OY.default)():void 0,paddingLeft:!f&&d?(0,OY.default)():void 0}})}},r.render=function(){var i=this.props,o=i.backdrop,l=i.backdropClassName,f=i.animation,d=i.show,v=i.dialogComponentClass,x=i.className,b=i.style,A=i.children,P=i.onEntering,N=i.onExited,j=Ln(i,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),D=rY(j,K0.default),F=D[0],U=D[1],$=d&&!f&&"in";return Y0.default.createElement(K0.default,br({},F,{ref:this.setModalRef,show:d,containerClassName:di(j,"open"),transition:f?mrr:void 0,backdrop:o,backdropTransition:f?grr:void 0,backdropClassName:(0,PY.default)(di(j,"backdrop"),l,$),onEntering:jo(P,this.handleEntering),onExited:jo(N,this.handleExited),onMouseUp:this.handleMouseUp}),Y0.default.createElement(v,br({},U,{style:br({},this.state.style,b),className:(0,PY.default)(x,$),onClick:o===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),A))},e}(Y0.default.Component);Cl.propTypes=hrr;Cl.defaultProps=prr;Cl.childContextTypes=drr;Cl.Body=vje;Cl.Header=Sje;Cl.Title=Aje;Cl.Footer=wje;Cl.Dialog=BD;Cl.TRANSITION_DURATION=300;Cl.BACKDROP_TRANSITION_DURATION=150;var iv=mi("modal",F0([mf.LARGE,mf.SMALL],Cl));var LY={NONE:"control-none-gcp",ADD:"control-add-gcp",MOVE:"control-move-gcp",DEL:"control-del-gcp"},Lje=t=>{let{id:e,activeControl:r,className:n="",parentIconClassName:i,defaultTitle:o="unknown",disableActiveBehavior:l=!1,IconComponent:f,options:d=[{id:LY.ADD,title:Lr("georef-setgcp"),iconClassName:"icon-point-add"},{id:LY.MOVE,title:Lr("georef-movegcp"),iconClassName:"icon-point-move"},{id:LY.DEL,title:Lr("georef-delgcp"),iconClassName:"icon-point-remove"}],onClick:v}=t,x=d.find(A=>A.id===r),b=A=>{v(A)};return pc.default.createElement("div",{className:Ws("vkf-control-dropdown",x&&!l?"active":"",n)},pc.default.createElement(ST,{id:e,className:"btn-dropdown-vkf-control",bsStyle:"default",key:x?x.id:null},pc.default.createElement(ST.Toggle,null,f===void 0?pc.default.createElement(QS,{name:i,size:24}):pc.default.createElement(f,{glyph:i}),x?x.title:o),pc.default.createElement(ST.Menu,null,d.map(A=>pc.default.createElement(aY,{key:A.id,eventKey:A.id,onClick:()=>b(A.id),className:Ws("control-option",A.id)},f===void 0?pc.default.createElement(QS,{name:`${A.iconClassName}`,size:24}):pc.default.createElement(f,{glyph:A.iconClassName}),pc.default.createElement("span",{className:"text"},A.title))))))};Lje.propTypes={activeControl:Ys.default.string,className:Ys.default.string,defaultTitle:Ys.default.string,disableActiveBehavior:Ys.default.bool,IconComponent:Ys.default.elementType,id:Ys.default.string,parentIconClassName:Ys.default.string,options:Ys.default.arrayOf(Ys.default.shape({id:Ys.default.string.isRequired,title:Ys.default.string.isRequired,iconClassName:Ys.default.string.isRequired})),onClick:Ys.default.func.isRequired};var Dje=Lje;var DY=Dje;p();p();var mu=Fe(Et(),1);var NY=Fe(an(),1);var Nje=t=>{let{onClose:e,onSubmit:r}=t,n=()=>{e()},i=()=>{r()};return mu.default.createElement(mu.default.Fragment,null,mu.default.createElement(iv,{className:"vkf-dialog-confirm",show:!0,onHide:n},mu.default.createElement(iv.Header,null,mu.default.createElement(iv.Title,null,Lr("georef-dialog-title"))),mu.default.createElement(iv.Body,null,mu.default.createElement("div",{className:"dialog-content"},mu.default.createElement("p",null,Lr("georef-dialog-content")))),mu.default.createElement(iv.Footer,null,mu.default.createElement(Bd,{onClick:n},Lr("georef-dialog-btn-cancel")),mu.default.createElement(Bd,{onClick:i,bsStyle:"primary"},Lr("georef-dialog-btn-submit")))))};Nje.propTypes={onClose:NY.default.func.isRequired,onSubmit:NY.default.func.isRequired};var kje=Nje;var qje=kje;p();var J0=Fe(Et(),1);p();p();p();var Fje={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},jje={NONE:0,METADATA:1},zje={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},Uje={STANDARD:"STANDARD",DRAW:"DRAW",VECTOR_MAP_EXTERNAL:"VECTOR_MAP_EXTERNAL"};p();p();p();p();p();p();var Eo={id:"id",timeChanged:"time_changed",title:"title",thumbnailUrl:"thumb_url",bounds:"bounds",hasGeoReference:"has_georeference",tmsUrls:"tms_urls",onlineResources:"online_resources",mapScale:"map_scale",rawMapIds:"raw_map_ids",name:"name",description:"description",timePeriod:"time_period",externalContentUrl:"external_content_url",externalContentType:"external_content_type",type:"type",vectorMapId:"vector_map_id",version:"version",userRole:"user_role"};var MT={VKF:"vkf:geojson-spec-v1",IDOHIST:"idohist:idohist-v1"};p();p();var HD=Fe(Et(),1);p();p();var CT=Fe(Et(),1);var $D=Fe(an(),1);var Bje=(t,{sourceId:e,fillId:r,outlineId:n})=>{t.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:r,type:"fill",source:e,paint:{"fill-color":"#ff0000","fill-opacity":.2}}),t.addLayer({id:n,type:"line",source:e,paint:{"line-color":"#ff0000","line-width":1}})},vrr=(t,{sourceId:e,fillId:r,outlineId:n})=>{t.getLayer(r)&&t.removeLayer(r),t.getLayer(n)&&t.removeLayer(n),t.getSource(e)&&t.removeSource(e)},Vje=t=>{let e=$s(kY);return(0,CT.useEffect)(()=>{if(dn(e)){let r=()=>{Bje(e,mt({},t))};return e._loaded?Bje(e,mt({},t)):e.once("load",r),()=>{vrr(e,mt({},t)),e.off("load",r)}}},[e]),CT.default.createElement(CT.default.Fragment,null)};Vje.propTypes={sourceId:$D.default.string.isRequired,fillId:$D.default.string.isRequired,outlineId:$D.default.string.isRequired};var Gje=Vje;var $je=Gje;var yrr="vkf-map-overlay-source",PT="vkf-map-overlay-fill",_rr="vkf-map-overlay-outline";var xrr=()=>HD.default.createElement(HD.default.Fragment,null,HD.default.createElement($je,{sourceId:yrr,fillId:PT,outlineId:_rr}));xrr.propTypes={};p();p();p();p();p();p();p();var WD=class extends Date{constructor(){super(),this.setTime(arguments.length===0?Date.now():arguments.length===1?typeof arguments[0]=="string"?+new Date(arguments[0]):arguments[0]:Date.UTC(...arguments))}getTimezoneOffset(){return 0}},Wje=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(Wje.test(t)){let e=Date.prototype[t.replace(Wje,"$1UTC")];e&&(WD.prototype[t]=e)}});var Cin=new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"UTC"}),Pin=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),Rin=new Intl.DateTimeFormat("en-GB",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC"});p();p();p();var Dr={SYMBOL:"symbol",LINE:"line",FILL:"fill",OUTLINE:"outline"},Zje={[Dr.LINE]:"line-opacity",[Dr.FILL]:"fill-opacity",[Dr.OUTLINE]:"outline-opacity"},Err={[Dr.LINE]:"stroke-opacity",[Dr.FILL]:"fill-opacity",[Dr.OUTLINE]:"stroke-opacity"};var bn={[Dr.SYMBOL]:{COLOR:"#0000FF"},[Dr.LINE]:{COLOR:"#00FF00",WIDTH:3,OPACITY:1},[Dr.OUTLINE]:{COLOR:"#0000FF",WIDTH:1,OPACITY:1},[Dr.FILL]:{COLOR:"#FFFF00",OPACITY:.27}},Srr={[Dr.SYMBOL]:{type:"symbol",layout:{"icon-image":Di.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["feature-state","marker"],["get","marker"],bn[Dr.SYMBOL].COLOR],"icon-halo-color":"#FFF","icon-halo-width":1},filter:["==",["geometry-type"],"Point"]},[Dr.LINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],bn[Dr.LINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],bn[Dr.LINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],bn[Dr.LINE].OPACITY]},filter:["==",["geometry-type"],"LineString"]},[Dr.OUTLINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],bn[Dr.OUTLINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],bn[Dr.OUTLINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],bn[Dr.OUTLINE].OPACITY]},filter:["==",["geometry-type"],"Polygon"]},[Dr.FILL]:{type:"fill",paint:{"fill-color":["coalesce",["feature-state","fill"],["get","fill"],bn[Dr.FILL].COLOR],"fill-opacity":["coalesce",["feature-state","fill-opacity"],["get","fill-opacity"],bn[Dr.FILL].OPACITY]},filter:["==",["geometry-type"],"Polygon"]}};var X0={imgLink:"img_link",title:"title",description:"description",time:"time",marker:"marker",fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity"};var ton={Point:{marker:bn[Dr.SYMBOL].COLOR},MultiPoint:{marker:bn[Dr.SYMBOL].COLOR},Polygon:{fill:bn[Dr.FILL].COLOR,"fill-opacity":bn[Dr.FILL].OPACITY,stroke:bn[Dr.OUTLINE].COLOR,"stroke-opacity":bn[Dr.OUTLINE].OPACITY,"stroke-width":bn[Dr.OUTLINE].WIDTH},MultiPolygon:{fill:bn[Dr.FILL].COLOR,"fill-opacity":bn[Dr.FILL].OPACITY,stroke:bn[Dr.OUTLINE].COLOR,"stroke-opacity":bn[Dr.OUTLINE].OPACITY,"stroke-width":bn[Dr.OUTLINE].WIDTH},LineString:{stroke:bn[Dr.LINE].COLOR,"stroke-opacity":bn[Dr.LINE].OPACITY,"stroke-width":bn[Dr.LINE].WIDTH},MultiLineString:{stroke:bn[Dr.LINE].COLOR,"stroke-opacity":bn[Dr.LINE].OPACITY,"stroke-width":bn[Dr.LINE].WIDTH},GeometryCollection:{fill:bn[Dr.FILL].COLOR,"fill-opacity":bn[Dr.FILL].OPACITY,stroke:bn[Dr.LINE].COLOR,"stroke-opacity":bn[Dr.LINE].OPACITY,"stroke-width":bn[Dr.LINE].WIDTH}},Trr={marker:{type:"color"},fill:{type:"color"},"fill-opacity":{step:.05,min:0,max:1,type:"number"},stroke:{type:"color"},"stroke-opacity":{max:1,min:0,step:.05,type:"number"},"stroke-width":{step:.1,min:0,max:20,type:"number"}},ron=Object.keys(Trr),non=[X0.time,X0.title,X0.imgLink,X0.description];p();p();p();p();p();var Lrr=Fe(SL(),1);p();p();p();var BY="#00b19e",ZD="#00927E",Q0={fill:.4,line:1},UY=["all",["==",["geometry-type"],"Polygon"],["==",["id"],"NON_EXISTING_ID"]],Yje={fill:{type:"fill",paint:{"fill-color":["coalesce",["get","idohist_light_color"],BY],"fill-opacity":Q0.fill},filter:UY},outline:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],ZD],"line-width":2,"line-opacity":Q0.line},filter:UY}},Rrr={line:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],ZD],"line-width":2,"line-opacity":Q0.line},filter:["==",["geometry-type"],"LineString"]},fill:{type:"fill",paint:{"fill-color":["coalesce",["get","idohist_light_color"],BY],"fill-opacity":Q0.fill},filter:["==",["geometry-type"],"Polygon"]},outline:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],ZD],"line-width":2,"line-opacity":Q0.line},filter:["==",["geometry-type"],"Polygon"]}};p();var RT={},VY="http://www.w3.org/2000/svg";typeof document!="undefined"&&(RT.svg=document.createElementNS(VY,"svg"),RT.arcs=document.createElementNS(VY,"g"),RT.arcs.classList.add("arcs"),RT.circle=document.createElementNS(VY,"circle"),RT.circle.classList.add("circle"));var Drr=Symbol("vkf:feature-properties");var Jon=typeof document!="undefined"?document.createElement("div"):{};p();p();var Nrr=`${Eo.timePeriod}_start`,krr=`${Eo.timePeriod}_end`;var msn=[{label:"VKF",value:MT.VKF},{label:"IDOHIST",value:MT.IDOHIST}],Xje=t=>({[Eo.title]:t[Eo.title],[Eo.timePeriod]:t[Eo.timePeriod],[Eo.description]:t[Eo.description],[Eo.externalContentUrl]:t[Eo.externalContentUrl],[Eo.externalContentType]:t[Eo.externalContentType],[Eo.thumbnailUrl]:t[Eo.thumbnailUrl]});var Ssn=Kr({key:"activeBasemapId",default:Di.getSettings().BASEMAPS[0].id}),Tsn=Kr({key:"currentApplicationState",default:void 0}),qrr=Kr({key:"elementScreenSize",default:{map:{height:0,width:0}}});var Isn=Kr({key:"facetState",default:{facets:[],georeference:!1}}),Asn=Kr({key:"layoutState",default:zje.VERTICAL}),Msn=Kr({key:"horizontalLayoutModeState",default:Uje.STANDARD}),kY=Kr({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),Csn=Kr({key:"map3dState",default:!1}),Psn=Kr({key:"mapCountState",default:10}),Rsn=Kr({key:"searchIsLoadingState",default:!1}),Frr=Kr({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),Osn=Kr({key:"selectedOriginalMapIdState",default:void 0}),jrr=Kr({key:"selectedGeoJsonLayerIdState",default:void 0}),zrr=Kr({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),Lsn=Xg({key:"selectedGeoJsonLayerState",get:({get:t})=>{let e=t(jrr),r=t(Frr),n=t(zrr);return{selectedLayer:r.find(o=>o.getId()===e),lastUpdated:n}},dangerouslyAllowMutability:!0}),Kje=Kr({key:"selectedGeoJsonFeatureIdentifierState",default:null}),Dsn=Xg({key:"isGeoJsonFeatureSelectedState",get:({get:t})=>{let e=t(Kje);if(!dn(e))return!1;let{featureId:r,sourceId:n}=e;return dn(r)&&dn(n)}}),Nsn=Kr({key:"timeExtentState",default:[1850,1970]}),Urr=[1850,1970],ksn=Kr({key:"timeRangeState",default:Urr}),qsn=Kr({key:"baseMapStyleLayersState",default:[]}),Fsn=Kr({key:"activeDialogState",default:GOe.None}),jsn=Kr({key:"drawState",default:void 0}),zsn=Kr({key:"editedGeojsonState",default:null}),Usn=Kr({key:"metadataDrawState",default:null}),Bsn=Kr({key:"vectorMapState",default:null}),Brr=Kr({key:"vectorMapActiveVersionDrawState",default:null}),Vsn=Xg({key:"isActiveVectorMapVersionDifferentState",get:({get:t})=>t(Brr)!==null}),Gsn=Kr({key:"showDropZoneState",default:!1}),$sn=Kr({key:"addedFileState",default:null}),Hsn=Kr({key:"addGeoJsonDialogState",default:!1}),Wsn=Kr({key:"drawModePanelState",default:Fje.NONE}),Zsn=Kr({key:"vectorMapExternalModePanelState",default:jje.NONE}),GY=Kr({key:"layerExternalVectorMapState",default:null,dangerouslyAllowMutability:!0}),Qje=Kr({key:"forceUpdateLayerExternalVectorMapState",default:0}),Ysn=Xg({key:"metadataExternalVectorMapState",get:({get:t})=>{t(Qje);let e=t(GY);return dn(e)?Xje(e.getMetadata()):null},dangerouslyAllowMutability:!0}),Ksn=Xg({key:"geojsonExternalVectorMapState",get:({get:t})=>{t(Qje);let e=t(GY);return dn(e)?e.getGeoJson():null},dangerouslyAllowMutability:!0}),Xsn=Xg({key:"layerIdExternalVectorMapState",get:({get:t})=>{let e=t(GY);return dn(e)?e.getId():null},dangerouslyAllowMutability:!0});function YD(t){let[e,r]=(0,J0.useState)(t);return(0,J0.useEffect)(()=>{r(t)},[t]),e}p();p();p();p();function ir(){return function(){throw new Error("Unimplemented abstract method.")}()}var Vrr=0;function tr(t){return t.ol_uid||(t.ol_uid=String(++Vrr))}var KD="6.15.1";var Grr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$rr=function(t){Grr(e,t);function e(r){var n=this,i=KD==="latest"?KD:"v"+KD.split("-")[0],o="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+r+" for details.";return n=t.call(this,o)||this,n.code=r,n.name="AssertionError",n.message=o,n}return e}(Error),XD=$rr;p();p();var Hrr=function(){function t(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();var Ni=Hrr;p();var dc={PROPERTYCHANGE:"propertychange"};p();p();p();var Wrr=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}(),Wd=Wrr;p();p();function Jje(t,e,r){for(var n,i,o=r||Pl,l=0,f=t.length,d=!1;l<f;)n=l+(f-l>>1),i=+o(t[n],e),i<0?l=n+1:(f=n,d=!i);return d?l:~l}function Pl(t,e){return t>e?1:t<e?-1:0}function ex(t,e){return t.indexOf(e)>=0}function tx(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return typeof r=="function"?r(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return n-1}function eze(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function ra(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]}function Ba(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function tze(t,e,r){var n=e||Pl;return t.every(function(i,o){if(o===0)return!0;var l=n(t[o-1],i);return!(l>0||r&&l===0)})}function ms(){return!0}function gu(){return!1}function Rl(){}function rze(t){var e=!1,r,n,i;return function(){var o=Array.prototype.slice.call(arguments);return(!e||this!==i||!Ba(o,n))&&(e=!0,i=this,n=o,r=t.apply(this,arguments)),r}}p();var Xr=typeof Object.assign=="function"?Object.assign:function(t,e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(o!=null)for(var l in o)o.hasOwnProperty(l)&&(r[l]=o[l])}return r};function Ks(t){for(var e in t)delete t[e]}var QD=typeof Object.values=="function"?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};function mc(t){var e;for(e in t)return!1;return!e}var Zrr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yrr=function(t){Zrr(e,t);function e(r){var n=t.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return e.prototype.addEventListener=function(r,n){if(!(!r||!n)){var i=this.listeners_||(this.listeners_={}),o=i[r]||(i[r]=[]);o.indexOf(n)===-1&&o.push(n)}},e.prototype.dispatchEvent=function(r){var n=typeof r=="string",i=n?r:r.type,o=this.listeners_&&this.listeners_[i];if(o){var l=n?new Ni(r):r;l.target||(l.target=this.eventTarget_||this);var f=this.dispatching_||(this.dispatching_={}),d=this.pendingRemovals_||(this.pendingRemovals_={});i in f||(f[i]=0,d[i]=0),++f[i];for(var v,x=0,b=o.length;x<b;++x)if("handleEvent"in o[x]?v=o[x].handleEvent(l):v=o[x].call(this,l),v===!1||l.propagationStopped){v=!1;break}if(--f[i]===0){var A=d[i];for(delete d[i];A--;)this.removeEventListener(i,Rl);delete f[i]}return v}},e.prototype.disposeInternal=function(){this.listeners_&&Ks(this.listeners_)},e.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},e.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(r,n){var i=this.listeners_&&this.listeners_[r];if(i){var o=i.indexOf(n);o!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(i[o]=Rl,++this.pendingRemovals_[r]):(i.splice(o,1),i.length===0&&delete this.listeners_[r]))}},e}(Wd),Xs=Yrr;p();var Vt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};p();function qr(t,e,r,n,i){if(n&&n!==t&&(r=r.bind(n)),i){var o=r;r=function(){t.removeEventListener(e,r),o.apply(this,arguments)}}var l={target:t,type:e,listener:r};return t.addEventListener(e,r),l}function rx(t,e,r,n){return qr(t,e,r,n,!0)}function sn(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Ks(t))}var Krr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JD=function(t){Krr(e,t);function e(){var r=t.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Vt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var i=r.length,o=new Array(i),l=0;l<i;++l)o[l]=qr(this,r[l],n);return o}else return qr(this,r,n)},e.prototype.onceInternal=function(r,n){var i;if(Array.isArray(r)){var o=r.length;i=new Array(o);for(var l=0;l<o;++l)i[l]=rx(this,r[l],n)}else i=rx(this,r,n);return n.ol_key=i,i},e.prototype.unInternal=function(r,n){var i=n.ol_key;if(i)Xrr(i);else if(Array.isArray(r))for(var o=0,l=r.length;o<l;++o)this.removeEventListener(r[o],n);else this.removeEventListener(r,n)},e}(Xs);JD.prototype.on;JD.prototype.once;JD.prototype.un;function Xrr(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)sn(t[e]);else sn(t)}var eN=JD;var ize=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nze=function(t){ize(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.key=n,o.oldValue=i,o}return e}(Ni);var Qrr=function(t){ize(e,t);function e(r){var n=t.call(this)||this;return n.on,n.once,n.un,tr(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return e.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Xr({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(r,n){var i;i="change:".concat(r),this.hasListener(i)&&this.dispatchEvent(new nze(i,r,n)),i=dc.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new nze(i,r,n))},e.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},e.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},e.prototype.set=function(r,n,i){var o=this.values_||(this.values_={});if(i)o[r]=n;else{var l=o[r];o[r]=n,l!==n&&this.notify(r,l)}},e.prototype.setProperties=function(r,n){for(var i in r)this.set(i,r[i],n)},e.prototype.applyProperties=function(r){r.values_&&Xr(this.values_||(this.values_={}),r.values_)},e.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var i=this.values_[r];delete this.values_[r],mc(this.values_)&&(this.values_=null),n||this.notify(r,i)}},e}(eN),So=Qrr;p();var vi={ADD:"add",REMOVE:"remove"};var aze=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oze={LENGTH:"length"},tN=function(t){aze(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.element=n,o.index=i,o}return e}(Ni);var Jrr=function(t){aze(e,t);function e(r,n){var i=t.call(this)||this;i.on,i.once,i.un;var o=n||{};if(i.unique_=!!o.unique,i.array_=r||[],i.unique_)for(var l=0,f=i.array_.length;l<f;++l)i.assertUnique_(i.array_[l],l);return i.updateLength_(),i}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(r){for(var n=0,i=r.length;n<i;++n)this.push(r[n]);return this},e.prototype.forEach=function(r){for(var n=this.array_,i=0,o=n.length;i<o;++i)r(n[i],i,n)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(r){return this.array_[r]},e.prototype.getLength=function(){return this.get(oze.LENGTH)},e.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new tN(vi.ADD,n,r))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},e.prototype.remove=function(r){for(var n=this.array_,i=0,o=n.length;i<o;++i)if(n[i]===r)return this.removeAt(i)},e.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new tN(vi.REMOVE,n,r)),n},e.prototype.setAt=function(r,n){var i=this.getLength();if(r<i){this.unique_&&this.assertUnique_(n,r);var o=this.array_[r];this.array_[r]=n,this.dispatchEvent(new tN(vi.REMOVE,o,r)),this.dispatchEvent(new tN(vi.ADD,n,r))}else{for(var l=i;l<r;++l)this.insertAt(l,void 0);this.insertAt(r,n)}},e.prototype.updateLength_=function(){this.set(oze.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(r,n){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===r&&i!==n)throw new XD(58)},e}(So),ni=Jrr;p();p();function or(t,e){if(!t)throw new XD(e)}var enr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tnr=function(t){enr(e,t);function e(r){var n=t.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),r)if(typeof r.getSimplifiedGeometry=="function"){var i=r;n.setGeometry(i)}else{var o=r;n.setProperties(o)}return n}return e.prototype.clone=function(){var r=new e(this.hasProperties()?this.getProperties():null);r.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&r.setGeometry(n.clone());var i=this.getStyle();return i&&r.setStyle(i),r},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(sn(this.geometryChangeKey_),this.geometryChangeKey_=null);var r=this.getGeometry();r&&(this.geometryChangeKey_=qr(r,Vt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(r){this.set(this.geometryName_,r)},e.prototype.setStyle=function(r){this.style_=r,this.styleFunction_=r?rnr(r):void 0,this.changed()},e.prototype.setId=function(r){this.id_=r,this.changed()},e.prototype.setGeometryName=function(r){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=r,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(So);function rnr(t){if(typeof t=="function")return t;var e;if(Array.isArray(t))e=t;else{or(typeof t.getZIndex=="function",41);var r=t;e=[r]}return function(){return e}}var Ol=tnr;p();p();p();p();var gc={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},fun={9001:gc.METERS,9002:gc.FEET,9003:gc.USFEET,9101:gc.RADIANS,9102:gc.DEGREES};var Va={};Va[gc.RADIANS]=6370997/(2*Math.PI);Va[gc.DEGREES]=2*Math.PI*6370997/360;Va[gc.FEET]=.3048;Va[gc.METERS]=1;Va[gc.USFEET]=1200/3937;var Ga=gc;p();p();var Zd=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",sze=Zd.indexOf("firefox")!==-1,nnr=Zd.indexOf("safari")!==-1&&Zd.indexOf("chrom")==-1,lze=nnr&&!!(Zd.indexOf("version/15.4")>=0||Zd.match(/cpu (os|iphone os) 15_4 like mac os x/)),uze=Zd.indexOf("webkit")!==-1&&Zd.indexOf("edge")==-1,cze=Zd.indexOf("macintosh")!==-1,rN=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,Yd=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,fze=typeof Image!="undefined"&&Image.prototype.decode,nN=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(r){}return t}();var $Y=new Array(6);function Ui(){return[1,0,0,1,0,0]}function nx(t){return OT(t,1,0,0,1,0,0)}function HY(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],l=t[4],f=t[5],d=e[0],v=e[1],x=e[2],b=e[3],A=e[4],P=e[5];return t[0]=r*d+i*v,t[1]=n*d+o*v,t[2]=r*x+i*b,t[3]=n*x+o*b,t[4]=r*A+i*P+l,t[5]=n*A+o*P+f,t}function OT(t,e,r,n,i,o,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=l,t}function pze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Hn(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function iN(t,e){var r=Math.cos(e),n=Math.sin(e);return HY(t,OT($Y,r,n,-n,r,0,0))}function LT(t,e,r){return HY(t,OT($Y,e,0,0,r,0,0))}function dze(t,e,r){return OT(t,e,0,0,r,0,0)}function mze(t,e,r){return HY(t,OT($Y,1,0,0,1,e,r))}function To(t,e,r,n,i,o,l,f){var d=Math.sin(o),v=Math.cos(o);return t[0]=n*v,t[1]=i*d,t[2]=-n*d,t[3]=i*v,t[4]=l*n*v-f*n*d+e,t[5]=l*i*d+f*i*v+r,t}function ix(t,e){var r=inr(e);or(r!==0,32);var n=e[0],i=e[1],o=e[2],l=e[3],f=e[4],d=e[5];return t[0]=l/r,t[1]=-i/r,t[2]=-o/r,t[3]=n/r,t[4]=(o*d-l*f)/r,t[5]=-(n*d-i*f)/r,t}function inr(t){return t[0]*t[3]-t[1]*t[2]}var hze;function oN(t){var e="matrix("+t.join(", ")+")";if(Yd)return e;var r=hze||(hze=document.createElement("div"));return r.style.transform=e,r.style.transform}p();p();var Io={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Sa(t){for(var e=Bi(),r=0,n=t.length;r<n;++r)ov(e,t[r]);return e}function onr(t,e,r){var n=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),l=Math.max.apply(null,e);return $a(n,i,o,l,r)}function vc(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function sN(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Qs(t,e,r){var n,i;return e<t[0]?n=t[0]-e:t[2]<e?n=e-t[2]:n=0,r<t[1]?i=t[1]-r:t[3]<r?i=r-t[3]:i=0,n*n+i*i}function gs(t,e){return DT(t,e[0],e[1])}function Fh(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function DT(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function aN(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],l=e[0],f=e[1],d=Io.UNKNOWN;return l<r?d=d|Io.LEFT:l>i&&(d=d|Io.RIGHT),f<n?d=d|Io.BELOW:f>o&&(d=d|Io.ABOVE),d===Io.UNKNOWN&&(d=Io.INTERSECTING),d}function Bi(){return[1/0,1/0,-1/0,-1/0]}function $a(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function Kd(t){return $a(1/0,1/0,-1/0,-1/0,t)}function ox(t,e){var r=t[0],n=t[1];return $a(r,n,r,n,e)}function lN(t,e,r,n,i){var o=Kd(i);return WY(o,t,e,r,n)}function jh(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function uN(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function ov(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function WY(t,e,r,n,i){for(;r<n;r+=i)anr(t,e[r],e[r+1]);return t}function anr(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function ax(t,e){var r;return r=e(sx(t)),r||(r=e(lx(t)),r)||(r=e(ux(t)),r)||(r=e(yu(t)),r)?r:!1}function NT(t){var e=0;return av(t)||(e=vn(t)*zo(t)),e}function sx(t){return[t[0],t[1]]}function lx(t){return[t[2],t[1]]}function Js(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function gze(t,e){var r;return e==="bottom-left"?r=sx(t):e==="bottom-right"?r=lx(t):e==="top-left"?r=yu(t):e==="top-right"?r=ux(t):or(!1,13),r}function kT(t,e,r,n,i){var o=cN(t,e,r,n),l=o[0],f=o[1],d=o[2],v=o[3],x=o[4],b=o[5],A=o[6],P=o[7];return $a(Math.min(l,d,x,A),Math.min(f,v,b,P),Math.max(l,d,x,A),Math.max(f,v,b,P),i)}function cN(t,e,r,n){var i=e*n[0]/2,o=e*n[1]/2,l=Math.cos(r),f=Math.sin(r),d=i*l,v=i*f,x=o*l,b=o*f,A=t[0],P=t[1];return[A-d+b,P-v-x,A-d-b,P-v+x,A+d-b,P+v+x,A+d+b,P+v-x,A-d+b,P-v-x]}function zo(t){return t[3]-t[1]}function vu(t,e,r){var n=r||Bi();return ki(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Kd(n),n}function yu(t){return[t[0],t[3]]}function ux(t){return[t[2],t[3]]}function vn(t){return t[2]-t[0]}function ki(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function av(t){return t[2]<t[0]||t[3]<t[1]}function vze(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function yze(t,e,r){var n=!1,i=aN(t,e),o=aN(t,r);if(i===Io.INTERSECTING||o===Io.INTERSECTING)n=!0;else{var l=t[0],f=t[1],d=t[2],v=t[3],x=e[0],b=e[1],A=r[0],P=r[1],N=(P-b)/(A-x),j=void 0,D=void 0;o&Io.ABOVE&&!(i&Io.ABOVE)&&(j=A-(P-v)/N,n=j>=l&&j<=d),!n&&o&Io.RIGHT&&!(i&Io.RIGHT)&&(D=P-(A-d)*N,n=D>=f&&D<=v),!n&&o&Io.BELOW&&!(i&Io.BELOW)&&(j=A-(P-f)/N,n=j>=l&&j<=d),!n&&o&Io.LEFT&&!(i&Io.LEFT)&&(D=P-(A-l)*N,n=D>=f&&D<=v)}return n}function _ze(t,e,r,n){var i=[];if(n>1)for(var o=t[2]-t[0],l=t[3]-t[1],f=0;f<n;++f)i.push(t[0]+o*f/n,t[1],t[2],t[1]+l*f/n,t[2]-o*f/n,t[3],t[0],t[3]-l*f/n);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var d=[],v=[],f=0,x=i.length;f<x;f+=2)d.push(i[f]),v.push(i[f+1]);return onr(d,v,r)}function ZY(t,e){var r=e.getExtent(),n=Js(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=vn(r),o=Math.floor((n[0]-r[0])/i),l=o*i;t[0]-=l,t[2]-=l}return t}function xze(t,e){if(e.canWrapX()){var r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];ZY(t,e);var n=vn(r);if(vn(t)>n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+n,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-n,t[3]]]}return[t]}p();p();var snr=function(){function t(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Va[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},t.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},t.prototype.setWorldExtent=function(e){this.worldExtent_=e},t.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),fN=snr;p();p();function Yn(t,e,r){return Math.min(Math.max(t,e),r)}var bze=function(){var t;return"cosh"in Math?t=Math.cosh:t=function(e){var r=Math.exp(e);return(r+1/r)/2},t}(),hN=function(){var t;return"log2"in Math?t=Math.log2:t=function(e){return Math.log(e)*Math.LOG2E},t}();function wze(t,e,r,n,i,o){var l=i-r,f=o-n;if(l!==0||f!==0){var d=((t-r)*l+(e-n)*f)/(l*l+f*f);d>1?(r=i,n=o):d>0&&(r+=l*d,n+=f*d)}return yc(t,e,r,n)}function yc(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function Eze(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var l=Math.abs(t[o][r]);l>i&&(i=l,n=o)}if(i===0)return null;var f=t[n];t[n]=t[r],t[r]=f;for(var d=r+1;d<e;d++)for(var v=-t[d][r]/t[r][r],x=r;x<e+1;x++)r==x?t[d][x]=0:t[d][x]+=v*t[r][x]}for(var b=new Array(e),A=e-1;A>=0;A--){b[A]=t[A][e]/t[A][A];for(var P=A-1;P>=0;P--)t[P][e]-=t[P][A]*b[A]}return b}function cx(t){return t*Math.PI/180}function Ll(t,e){var r=t%e;return r*e<0?r+e:r}function _u(t,e,r){return t+r*(e-t)}function Sze(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}function qT(t,e){return Math.floor(Sze(t,e))}function FT(t,e){return Math.ceil(Sze(t,e))}var lnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jT=6378137,hx=Math.PI*jT,unr=[-hx,-hx,hx,hx],cnr=[-180,-85,180,85],pN=jT*Math.log(Math.tan(Math.PI/2)),fx=function(t){lnr(e,t);function e(r){return t.call(this,{code:r,units:Ga.METERS,extent:unr,global:!0,worldExtent:cnr,getPointResolution:function(n,i){return n/bze(i[1]/jT)}})||this}return e}(fN),YY=[new fx("EPSG:3857"),new fx("EPSG:102100"),new fx("EPSG:102113"),new fx("EPSG:900913"),new fx("http://www.opengis.net/def/crs/EPSG/0/3857"),new fx("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Tze(t,e,r){var n=t.length,i=r>1?r:2,o=e;o===void 0&&(i>2?o=t.slice():o=new Array(n));for(var l=0;l<n;l+=i){o[l]=hx*t[l]/180;var f=jT*Math.log(Math.tan(Math.PI*(+t[l+1]+90)/360));f>pN?f=pN:f<-pN&&(f=-pN),o[l+1]=f}return o}function Ize(t,e,r){var n=t.length,i=r>1?r:2,o=e;o===void 0&&(i>2?o=t.slice():o=new Array(n));for(var l=0;l<n;l+=i)o[l]=180*t[l]/hx,o[l+1]=360*Math.atan(Math.exp(t[l+1]/jT))/Math.PI-90;return o}p();var fnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hnr=6378137,Aze=[-180,-90,180,90],pnr=Math.PI*hnr/180,sv=function(t){fnr(e,t);function e(r,n){return t.call(this,{code:r,units:Ga.DEGREES,extent:Aze,axisOrientation:n,global:!0,metersPerUnit:pnr,worldExtent:Aze})||this}return e}(fN),KY=[new sv("CRS:84"),new sv("EPSG:4326","neu"),new sv("urn:ogc:def:crs:OGC:1.3:CRS84"),new sv("urn:ogc:def:crs:OGC:2:84"),new sv("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new sv("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new sv("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];p();var XY={};function Mze(t){return XY[t]||XY[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Cze(t,e){XY[t]=e}p();var px={};function zT(t,e,r){var n=t.getCode(),i=e.getCode();n in px||(px[n]={}),px[n][i]=r}function Pze(t,e){var r;return t in px&&e in px[t]&&(r=px[t][e]),r}p();p();function Rze(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),l=parseInt(n[i]||"0",10);if(o>l)return 1;if(l>o)return-1}return 0}function Oze(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function QY(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],l=i[0],f=i[1],d=o[0],v=o[1],x=d-l,b=v-f,A=x===0&&b===0?0:(x*(r-l)+b*(n-f))/(x*x+b*b||0),P,N;return A<=0?(P=l,N=f):A>=1?(P=d,N=v):(P=l+A*x,N=f+A*b),[P,N]}function vs(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function dx(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t}function Lze(t,e){return t[0]*=e,t[1]*=e,t}function Xd(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function JY(t,e){return Math.sqrt(Xd(t,e))}function Dze(t,e){return Xd(t,QY(t,e))}function dN(t,e){if(e.canWrapX()){var r=vn(e.getExtent()),n=Nze(t,e,r);n&&(t[0]-=n*r)}return t}function Nze(t,e,r){var n=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])){var o=r||vn(n);i=Math.floor((t[0]-n[0])/o)}return i}p();var dnr=6371008.8;function e9(t,e,r){var n=r||dnr,i=cx(t[1]),o=cx(e[1]),l=(o-i)/2,f=cx(e[0]-t[0])/2,d=Math.sin(l)*Math.sin(l)+Math.sin(f)*Math.sin(f)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}var t9=!0;function qze(t){var e=t===void 0?!0:t;t9=!e}function r9(t,e,r){var n;if(e!==void 0){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];n=e}else n=t.slice();return n}function Fze(t,e,r){if(e!==void 0&&t!==e){for(var n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function mnr(t){Cze(t.getCode(),t),zT(t,t,r9)}function gnr(t){t.forEach(mnr)}function ii(t){return typeof t=="string"?Mze(t):t||null}function n9(t,e,r,n){t=ii(t);var i,o=t.getPointResolutionFunc();if(o){if(i=o(e,r),n&&n!==t.getUnits()){var l=t.getMetersPerUnit();l&&(i=i*l/Va[n])}}else{var f=t.getUnits();if(f==Ga.DEGREES&&!n||n==Ga.DEGREES)i=e;else{var d=UT(t,ii("EPSG:4326"));if(d===Fze&&f!==Ga.DEGREES)i=e*t.getMetersPerUnit();else{var v=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];v=d(v,v,2);var x=e9(v.slice(0,2),v.slice(2,4)),b=e9(v.slice(4,6),v.slice(6,8));i=(x+b)/2}var l=n?Va[n]:t.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function kze(t){gnr(t),t.forEach(function(e){t.forEach(function(r){e!==r&&zT(e,r,r9)})})}function vnr(t,e,r,n){t.forEach(function(i){e.forEach(function(o){zT(i,o,r),zT(o,i,n)})})}function mN(t,e){return t?typeof t=="string"?ii(t):t:ii(e)}function _f(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return r;var n=UT(t,e);return n===r9&&r}function UT(t,e){var r=t.getCode(),n=e.getCode(),i=Pze(r,n);return i||(i=Fze),i}function lv(t,e){var r=ii(t),n=ii(e);return UT(r,n)}function xc(t,e,r){var n=lv(e,r);return n(t,void 0,t.length)}function uv(t,e,r,n){var i=lv(e,r);return _ze(t,i,void 0,n)}var _c=null;function xu(){return _c}function Qd(t,e){return _c?xc(t,e,_c):t}function Ii(t,e){return _c?xc(t,_c,e):(t9&&!vs(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(t9=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Jd(t,e){return _c?uv(t,e,_c):t}function Ha(t,e){return _c?uv(t,_c,e):t}function jze(t,e){if(!_c)return t;var r=ii(e).getUnits(),n=_c.getUnits();return r&&n?t*Va[r]/Va[n]:t}function ynr(){kze(YY),kze(KY),vnr(KY,YY,Tze,Ize)}ynr();p();function bu(t,e,r,n,i,o){for(var l=o||[],f=0,d=e;d<r;d+=n){var v=t[d],x=t[d+1];l[f++]=i[0]*v+i[2]*x+i[4],l[f++]=i[1]*v+i[3]*x+i[5]}return o&&l.length!=f&&(l.length=f),l}function mx(t,e,r,n,i,o,l){for(var f=l||[],d=Math.cos(i),v=Math.sin(i),x=o[0],b=o[1],A=0,P=e;P<r;P+=n){var N=t[P]-x,j=t[P+1]-b;f[A++]=x+N*d-j*v,f[A++]=b+N*v+j*d;for(var D=P+2;D<P+n;++D)f[A++]=t[D]}return l&&f.length!=A&&(f.length=A),f}function zze(t,e,r,n,i,o,l,f){for(var d=f||[],v=l[0],x=l[1],b=0,A=e;A<r;A+=n){var P=t[A]-v,N=t[A+1]-x;d[b++]=v+i*P,d[b++]=x+o*N;for(var j=A+2;j<A+n;++j)d[b++]=t[j]}return f&&d.length!=b&&(d.length=b),d}function gN(t,e,r,n,i,o,l){for(var f=l||[],d=0,v=e;v<r;v+=n){f[d++]=t[v]+i,f[d++]=t[v+1]+o;for(var x=v+2;x<v+n;++x)f[d++]=t[x]}return l&&f.length!=d&&(f.length=d),f}var _nr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uze=Ui(),xnr=function(t){_nr(e,t);function e(){var r=t.call(this)||this;return r.extent_=Bi(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=rze(function(n,i,o){if(!o)return this.getSimplifiedGeometry(i);var l=this.clone();return l.applyTransform(o),l.getSimplifiedGeometry(i)}),r}return e.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},e.prototype.clone=function(){return ir()},e.prototype.closestPointXY=function(r,n,i,o){return ir()},e.prototype.containsXY=function(r,n){var i=this.getClosestPoint([r,n]);return i[0]===r&&i[1]===n},e.prototype.getClosestPoint=function(r,n){var i=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],i,1/0),i},e.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},e.prototype.computeExtent=function(r){return ir()},e.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Kd(n),this.extentRevision_=this.getRevision()}return vze(this.extent_,r)},e.prototype.rotate=function(r,n){ir()},e.prototype.scale=function(r,n,i){ir()},e.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},e.prototype.getSimplifiedGeometry=function(r){return ir()},e.prototype.getType=function(){return ir()},e.prototype.applyTransform=function(r){ir()},e.prototype.intersectsExtent=function(r){return ir()},e.prototype.translate=function(r,n){ir()},e.prototype.transform=function(r,n){var i=ii(r),o=i.getUnits()==Ga.TILE_PIXELS?function(l,f,d){var v=i.getExtent(),x=i.getWorldExtent(),b=zo(x)/zo(v);return To(Uze,x[0],x[3],b,-b,0,0,0),bu(l,0,l.length,d,Uze,f),lv(i,n)(l,f,d)}:lv(i,n);return this.applyTransform(o),this},e}(So),vN=xnr;var bnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wnr=function(t){bnr(e,t);function e(r){var n=t.call(this)||this;return n.geometries_=r||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(sn),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var r=0,n=this.geometries_.length;r<n;++r)this.changeEventsKeys_.push(qr(this.geometries_[r],Vt.CHANGE,this.changed,this))},e.prototype.clone=function(){var r=new e(null);return r.setGeometries(this.geometries_),r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){if(o<Qs(this.getExtent(),r,n))return o;for(var l=this.geometries_,f=0,d=l.length;f<d;++f)o=l[f].closestPointXY(r,n,i,o);return o},e.prototype.containsXY=function(r,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)if(i[o].containsXY(r,n))return!0;return!1},e.prototype.computeExtent=function(r){Kd(r);for(var n=this.geometries_,i=0,o=n.length;i<o;++i)uN(r,n[i].getExtent());return r},e.prototype.getGeometries=function(){return Bze(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var r=[],n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].getType()===this.getType()?r=r.concat(n[i].getGeometriesArrayRecursive()):r.push(n[i]);return r},e.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],i=this.geometries_,o=!1,l=0,f=i.length;l<f;++l){var d=i[l],v=d.getSimplifiedGeometry(r);n.push(v),v!==d&&(o=!0)}if(o){var x=new e(null);return x.setGeometriesArray(n),x}else return this.simplifiedGeometryMaxMinSquaredTolerance=r,this},e.prototype.getType=function(){return"GeometryCollection"},e.prototype.intersectsExtent=function(r){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)if(n[i].intersectsExtent(r))return!0;return!1},e.prototype.isEmpty=function(){return this.geometries_.length===0},e.prototype.rotate=function(r,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)i[o].rotate(r,n);this.changed()},e.prototype.scale=function(r,n,i){var o=i;o||(o=Js(this.getExtent()));for(var l=this.geometries_,f=0,d=l.length;f<d;++f)l[f].scale(r,n,o);this.changed()},e.prototype.setGeometries=function(r){this.setGeometriesArray(Bze(r))},e.prototype.setGeometriesArray=function(r){this.unlistenGeometriesChange_(),this.geometries_=r,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(r){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].applyTransform(r);this.changed()},e.prototype.translate=function(r,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)i[o].translate(r,n);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(vN);function Bze(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}var Vze=wnr;p();p();var Enr=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(e,r){var n;if(r){var i=r.dataProjection?ii(r.dataProjection):this.readProjection(e);r.extent&&i&&i.getUnits()===Ga.TILE_PIXELS&&(i=ii(i),i.setWorldExtent(r.extent)),n={dataProjection:i,featureProjection:r.featureProjection}}return this.adaptOptions(n)},t.prototype.adaptOptions=function(e){return Xr({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},t.prototype.getType=function(){return ir()},t.prototype.readFeature=function(e,r){return ir()},t.prototype.readFeatures=function(e,r){return ir()},t.prototype.readGeometry=function(e,r){return ir()},t.prototype.readProjection=function(e){return ir()},t.prototype.writeFeature=function(e,r){return ir()},t.prototype.writeFeatures=function(e,r){return ir()},t.prototype.writeGeometry=function(e,r){return ir()},t}(),Gze=Enr;function i9(t,e,r){var n=r?ii(r.featureProjection):null,i=r?ii(r.dataProjection):null,o;if(n&&i&&!_f(n,i)?o=(e?t.clone():t).transform(e?n:i,e?i:n):o=t,e&&r&&r.decimals!==void 0){var l=Math.pow(10,r.decimals),f=function(d){for(var v=0,x=d.length;v<x;++v)d[v]=Math.round(d[v]*l)/l;return d};o===t&&(o=t.clone()),o.applyTransform(f)}return o}var Snr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tnr=function(t){Snr(e,t);function e(){return t.call(this)||this}return e.prototype.getType=function(){return"json"},e.prototype.readFeature=function(r,n){return this.readFeatureFromObject(yN(r),this.getReadOptions(r,n))},e.prototype.readFeatures=function(r,n){return this.readFeaturesFromObject(yN(r),this.getReadOptions(r,n))},e.prototype.readFeatureFromObject=function(r,n){return ir()},e.prototype.readFeaturesFromObject=function(r,n){return ir()},e.prototype.readGeometry=function(r,n){return this.readGeometryFromObject(yN(r),this.getReadOptions(r,n))},e.prototype.readGeometryFromObject=function(r,n){return ir()},e.prototype.readProjection=function(r){return this.readProjectionFromObject(yN(r))},e.prototype.readProjectionFromObject=function(r){return ir()},e.prototype.writeFeature=function(r,n){return JSON.stringify(this.writeFeatureObject(r,n))},e.prototype.writeFeatureObject=function(r,n){return ir()},e.prototype.writeFeatures=function(r,n){return JSON.stringify(this.writeFeaturesObject(r,n))},e.prototype.writeFeaturesObject=function(r,n){return ir()},e.prototype.writeGeometry=function(r,n){return JSON.stringify(this.writeGeometryObject(r,n))},e.prototype.writeGeometryObject=function(r,n){return ir()},e}(Gze);function yN(t){if(typeof t=="string"){var e=JSON.parse(t);return e||null}else return t!==null?t:null}var $ze=Tnr;p();p();var Kn={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};p();var Inr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Anr=function(t){Inr(e,t);function e(){var r=t.call(this)||this;return r.layout=Kn.XY,r.stride=2,r.flatCoordinates=null,r}return e.prototype.computeExtent=function(r){return lN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},e.prototype.getCoordinates=function(){return ir()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},e.prototype.getSimplifiedGeometryInternal=function(r){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(r,n){this.stride=BT(r),this.layout=r,this.flatCoordinates=n},e.prototype.setCoordinates=function(r,n){ir()},e.prototype.setLayout=function(r,n,i){var o;if(r)o=BT(r);else{for(var l=0;l<i;++l)if(n.length===0){this.layout=Kn.XY,this.stride=2;return}else n=n[0];o=n.length,r=Mnr(o)}this.layout=r,this.stride=o},e.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(r,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();mx(i,0,i.length,o,r,n,i),this.changed()}},e.prototype.scale=function(r,n,i){var o=n;o===void 0&&(o=r);var l=i;l||(l=Js(this.getExtent()));var f=this.getFlatCoordinates();if(f){var d=this.getStride();zze(f,0,f.length,d,r,o,l,f),this.changed()}},e.prototype.translate=function(r,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();gN(i,0,i.length,o,r,n,i),this.changed()}},e}(vN);function Mnr(t){var e;return t==2?e=Kn.XY:t==3?e=Kn.XYZ:t==4&&(e=Kn.XYZM),e}function BT(t){var e;return t==Kn.XY?e=2:t==Kn.XYZ||t==Kn.XYM?e=3:t==Kn.XYZM&&(e=4),e}function Hze(t,e,r){var n=t.getFlatCoordinates();if(n){var i=t.getStride();return bu(n,0,n.length,i,e,r)}else return null}var Wa=Anr;p();function Wze(t,e,r,n,i,o,l){var f=t[e],d=t[e+1],v=t[r]-f,x=t[r+1]-d,b;if(v===0&&x===0)b=e;else{var A=((i-f)*v+(o-d)*x)/(v*v+x*x);if(A>1)b=r;else if(A>0){for(var P=0;P<n;++P)l[P]=_u(t[e+P],t[r+P],A);l.length=n;return}else b=e}for(var P=0;P<n;++P)l[P]=t[b+P];l.length=n}function VT(t,e,r,n,i){var o=t[e],l=t[e+1];for(e+=n;e<r;e+=n){var f=t[e],d=t[e+1],v=yc(o,l,f,d);v>i&&(i=v),o=f,l=d}return i}function GT(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){var f=r[o];i=VT(t,e,f,n,i),e=f}return i}function Zze(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){var f=r[o];i=GT(t,e,f,n,i),e=f[f.length-1]}return i}function $T(t,e,r,n,i,o,l,f,d,v,x){if(e==r)return v;var b,A;if(i===0)if(A=yc(l,f,t[e],t[e+1]),A<v){for(b=0;b<n;++b)d[b]=t[e+b];return d.length=n,A}else return v;for(var P=x||[NaN,NaN],N=e+n;N<r;)if(Wze(t,N-n,N,n,l,f,P),A=yc(l,f,P[0],P[1]),A<v){for(v=A,b=0;b<n;++b)d[b]=P[b];d.length=n,N+=n}else N+=n*Math.max((Math.sqrt(A)-Math.sqrt(v))/i|0,1);if(o&&(Wze(t,r-n,e,n,l,f,P),A=yc(l,f,P[0],P[1]),A<v)){for(v=A,b=0;b<n;++b)d[b]=P[b];d.length=n}return v}function HT(t,e,r,n,i,o,l,f,d,v,x){for(var b=x||[NaN,NaN],A=0,P=r.length;A<P;++A){var N=r[A];v=$T(t,e,N,n,i,o,l,f,d,v,b),e=N}return v}function Yze(t,e,r,n,i,o,l,f,d,v,x){for(var b=x||[NaN,NaN],A=0,P=r.length;A<P;++A){var N=r[A];v=HT(t,e,N,n,i,o,l,f,d,v,b),e=N[N.length-1]}return v}p();function _N(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e}function cv(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var l=r[i],f=0;f<n;++f)t[e++]=l[f];return e}function WT(t,e,r,n,i){for(var o=i||[],l=0,f=0,d=r.length;f<d;++f){var v=cv(t,e,r[f],n);o[l++]=v,e=v}return o.length=l,o}function Kze(t,e,r,n,i){for(var o=i||[],l=0,f=0,d=r.length;f<d;++f){var v=WT(t,e,r[f],n,o[l]);o[l++]=v,e=v[v.length-1]}return o.length=l,o}p();function ZT(t,e,r,n,i,o,l){var f=(r-e)/n;if(f<3){for(;e<r;e+=n)o[l++]=t[e],o[l++]=t[e+1];return l}var d=new Array(f);d[0]=1,d[f-1]=1;for(var v=[e,r-n],x=0;v.length>0;){for(var b=v.pop(),A=v.pop(),P=0,N=t[A],j=t[A+1],D=t[b],F=t[b+1],U=A+n;U<b;U+=n){var $=t[U],Z=t[U+1],ie=wze($,Z,N,j,D,F);ie>P&&(x=U,P=ie)}P>i&&(d[(x-e)/n]=1,A+n<x&&v.push(A,x),x+n<b&&v.push(x,b))}for(var U=0;U<f;++U)d[U]&&(o[l++]=t[e+U*n],o[l++]=t[e+U*n+1]);return l}function Xze(t,e,r,n,i,o,l,f){for(var d=0,v=r.length;d<v;++d){var x=r[d];l=ZT(t,e,x,n,i,o,l),f.push(l),e=x}return l}function em(t,e){return e*Math.round(t/e)}function Cnr(t,e,r,n,i,o,l){if(e==r)return l;var f=em(t[e],i),d=em(t[e+1],i);e+=n,o[l++]=f,o[l++]=d;var v,x;do if(v=em(t[e],i),x=em(t[e+1],i),e+=n,e==r)return o[l++]=v,o[l++]=x,l;while(v==f&&x==d);for(;e<r;){var b=em(t[e],i),A=em(t[e+1],i);if(e+=n,!(b==v&&A==x)){var P=v-f,N=x-d,j=b-f,D=A-d;if(P*D==N*j&&(P<0&&j<P||P==j||P>0&&j>P)&&(N<0&&D<N||N==D||N>0&&D>N)){v=b,x=A;continue}o[l++]=v,o[l++]=x,f=v,d=x,v=b,x=A}}return o[l++]=v,o[l++]=x,l}function o9(t,e,r,n,i,o,l,f){for(var d=0,v=r.length;d<v;++d){var x=r[d];l=Cnr(t,e,x,n,i,o,l),f.push(l),e=x}return l}function Qze(t,e,r,n,i,o,l,f){for(var d=0,v=r.length;d<v;++d){var x=r[d],b=[];l=o9(t,e,x,n,i,o,l,b),f.push(b),e=x[x.length-1]}return l}p();function xN(t,e,r,n,i){var o;for(e+=n;e<r;e+=n)if(o=i(t.slice(e-n,e),t.slice(e,e+n)),o)return o;return!1}p();function wu(t,e,r,n,i){for(var o=i!==void 0?i:[],l=0,f=e;f<r;f+=n)o[l++]=t.slice(f,f+n);return o.length=l,o}function tm(t,e,r,n,i){for(var o=i!==void 0?i:[],l=0,f=0,d=r.length;f<d;++f){var v=r[f];o[l++]=wu(t,e,v,n,o[l]),e=v}return o.length=l,o}function YT(t,e,r,n,i){for(var o=i!==void 0?i:[],l=0,f=0,d=r.length;f<d;++f){var v=r[f];o[l++]=tm(t,e,v,n,o[l]),e=v[v.length-1]}return o.length=l,o}p();function wN(t,e,r,n,i,o,l){var f,d,v=(r-e)/n;if(v===1)f=e;else if(v===2)f=e,d=i;else if(v!==0){for(var x=t[e],b=t[e+1],A=0,P=[0],N=e+n;N<r;N+=n){var j=t[N],D=t[N+1];A+=Math.sqrt((j-x)*(j-x)+(D-b)*(D-b)),P.push(A),x=j,b=D}var F=i*A,U=Jje(P,F);U<0?(d=(F-P[-U-2])/(P[-U-1]-P[-U-2]),f=e+(-U-2)*n):f=e+U*n}for(var $=l>1?l:2,Z=o||new Array($),N=0;N<$;++N)Z[N]=f===void 0?NaN:d===void 0?t[f+N]:_u(t[f+N],t[f+n+N],d);return Z}function bN(t,e,r,n,i,o){if(r==e)return null;var l;if(i<t[e+n-1])return o?(l=t.slice(e,e+n),l[n-1]=i,l):null;if(t[r-1]<i)return o?(l=t.slice(r-n,r),l[n-1]=i,l):null;if(i==t[e+n-1])return t.slice(e,e+n);for(var f=e/n,d=r/n;f<d;){var v=f+d>>1;i<t[(v+1)*n-1]?d=v:f=v+1}var x=t[f*n-1];if(i==x)return t.slice((f-1)*n,(f-1)*n+n);var b=t[(f+1)*n-1],A=(i-x)/(b-x);l=[];for(var P=0;P<n-1;++P)l.push(_u(t[(f-1)*n+P],t[f*n+P],A));return l.push(i),l}function Jze(t,e,r,n,i,o,l){if(l)return bN(t,e,r[r.length-1],n,i,o);var f;if(i<t[n-1])return o?(f=t.slice(0,n),f[n-1]=i,f):null;if(t[t.length-1]<i)return o?(f=t.slice(t.length-n),f[n-1]=i,f):null;for(var d=0,v=r.length;d<v;++d){var x=r[d];if(e!=x){if(i<t[e+n-1])return null;if(i<=t[x-1])return bN(t,e,x,n,i,!1);e=x}}return null}p();p();function e4e(t,e,r,n,i){var o=ax(i,function(l){return!rm(t,e,r,n,l[0],l[1])});return!o}function rm(t,e,r,n,i,o){for(var l=0,f=t[r-n],d=t[r-n+1];e<r;e+=n){var v=t[e],x=t[e+1];d<=o?x>o&&(v-f)*(o-d)-(i-f)*(x-d)>0&&l++:x<=o&&(v-f)*(o-d)-(i-f)*(x-d)<0&&l--,f=v,d=x}return l!==0}function KT(t,e,r,n,i,o){if(r.length===0||!rm(t,e,r[0],n,i,o))return!1;for(var l=1,f=r.length;l<f;++l)if(rm(t,r[l-1],r[l],n,i,o))return!1;return!0}function t4e(t,e,r,n,i,o){if(r.length===0)return!1;for(var l=0,f=r.length;l<f;++l){var d=r[l];if(KT(t,e,d,n,i,o))return!0;e=d[d.length-1]}return!1}function XT(t,e,r,n,i){var o=WY(Bi(),t,e,r,n);return ki(i,o)?Fh(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:xN(t,e,r,n,function(l,f){return yze(i,l,f)}):!1}function r4e(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){if(XT(t,e,r[o],n,i))return!0;e=r[o]}return!1}function a9(t,e,r,n,i){return!!(XT(t,e,r,n,i)||rm(t,e,r,n,i[0],i[1])||rm(t,e,r,n,i[0],i[3])||rm(t,e,r,n,i[2],i[1])||rm(t,e,r,n,i[2],i[3]))}function s9(t,e,r,n,i){if(!a9(t,e,r[0],n,i))return!1;if(r.length===1)return!0;for(var o=1,l=r.length;o<l;++o)if(e4e(t,r[o-1],r[o],n,i)&&!XT(t,r[o-1],r[o],n,i))return!1;return!0}function n4e(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){var f=r[o];if(s9(t,e,f,n,i))return!0;e=f[f.length-1]}return!1}p();function EN(t,e,r,n){for(var i=t[e],o=t[e+1],l=0,f=e+n;f<r;f+=n){var d=t[f],v=t[f+1];l+=Math.sqrt((d-i)*(d-i)+(v-o)*(v-o)),i=d,o=v}return l}var Pnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rnr=function(t){Pnr(e,t);function e(r,n){var i=t.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return e.prototype.appendCoordinate=function(r){this.flatCoordinates?ra(this.flatCoordinates,r):this.flatCoordinates=r.slice(),this.changed()},e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(VT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$T(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,r,n,i,o))},e.prototype.forEachSegment=function(r){return xN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},e.prototype.getCoordinateAtM=function(r,n){if(this.layout!=Kn.XYM&&this.layout!=Kn.XYZM)return null;var i=n!==void 0?n:!1;return bN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,i)},e.prototype.getCoordinates=function(){return wu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(r,n){return wN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,this.stride)},e.prototype.getLength=function(){return EN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=ZT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new e(n,Kn.XY)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(r){return XT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cv(this.flatCoordinates,0,r,this.stride),this.changed()},e}(Wa),zh=Rnr;p();var Onr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lnr=function(t){Onr(e,t);function e(r,n,i){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(r[0]))o.setCoordinates(r,n);else if(n!==void 0&&i)o.setFlatCoordinates(n,r),o.ends_=i;else{for(var l=o.getLayout(),f=r,d=[],v=[],x=0,b=f.length;x<b;++x){var A=f[x];x===0&&(l=A.getLayout()),ra(d,A.getFlatCoordinates()),v.push(d.length)}o.setFlatCoordinates(l,d),o.ends_=v}return o}return e.prototype.appendLineString=function(r){this.flatCoordinates?ra(this.flatCoordinates,r.getFlatCoordinates().slice()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(GT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HT(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,r,n,i,o))},e.prototype.getCoordinateAtM=function(r,n,i){if(this.layout!=Kn.XYM&&this.layout!=Kn.XYZM||this.flatCoordinates.length===0)return null;var o=n!==void 0?n:!1,l=i!==void 0?i:!1;return Jze(this.flatCoordinates,0,this.ends_,this.stride,r,o,l)},e.prototype.getCoordinates=function(){return tm(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(r){return r<0||this.ends_.length<=r?null:new zh(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},e.prototype.getLineStrings=function(){for(var r=this.flatCoordinates,n=this.ends_,i=this.layout,o=[],l=0,f=0,d=n.length;f<d;++f){var v=n[f],x=new zh(r.slice(l,v),i);o.push(x),l=v}return o},e.prototype.getFlatMidpoints=function(){for(var r=[],n=this.flatCoordinates,i=0,o=this.ends_,l=this.stride,f=0,d=o.length;f<d;++f){var v=o[f],x=wN(n,i,v,l,.5);ra(r,x),i=v}return r},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=Xze(this.flatCoordinates,0,this.ends_,this.stride,r,n,0,i),new e(n,Kn.XY,i)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(r){return r4e(this.flatCoordinates,0,this.ends_,this.stride,r)},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=WT(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Wa),SN=Lnr;p();p();var Dnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nnr=function(t){Dnr(e,t);function e(r,n){var i=t.call(this)||this;return i.setCoordinates(r,n),i}return e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){var l=this.flatCoordinates,f=yc(r,n,l[0],l[1]);if(f<o){for(var d=this.stride,v=0;v<d;++v)i[v]=l[v];return i.length=d,f}else return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(r){return ox(this.flatCoordinates,r)},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(r){return DT(r,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_N(this.flatCoordinates,0,r,this.stride),this.changed()},e}(Wa),Za=Nnr;var knr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qnr=function(t){knr(e,t);function e(r,n){var i=t.call(this)||this;return n&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return e.prototype.appendPoint=function(r){this.flatCoordinates?ra(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){if(o<Qs(this.getExtent(),r,n))return o;for(var l=this.flatCoordinates,f=this.stride,d=0,v=l.length;d<v;d+=f){var x=yc(r,n,l[d],l[d+1]);if(x<o){o=x;for(var b=0;b<f;++b)i[b]=l[d+b];i.length=f}}return o},e.prototype.getCoordinates=function(){return wu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(r){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return r<0||n<=r?null:new Za(this.flatCoordinates.slice(r*this.stride,(r+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var r=this.flatCoordinates,n=this.layout,i=this.stride,o=[],l=0,f=r.length;l<f;l+=i){var d=new Za(r.slice(l,l+i),n);o.push(d)}return o},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(r){for(var n=this.flatCoordinates,i=this.stride,o=0,l=n.length;o<l;o+=i){var f=n[o],d=n[o+1];if(DT(r,f,d))return!0}return!1},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cv(this.flatCoordinates,0,r,this.stride),this.changed()},e}(Wa),gx=qnr;p();p();p();p();function l9(t,e,r,n){for(var i=0,o=t[r-n],l=t[r-n+1];e<r;e+=n){var f=t[e],d=t[e+1];i+=l*f-o*d,o=f,l=d}return i/2}function u9(t,e,r,n){for(var i=0,o=0,l=r.length;o<l;++o){var f=r[o];i+=l9(t,e,f,n),e=f}return i}function i4e(t,e,r,n){for(var i=0,o=0,l=r.length;o<l;++o){var f=r[o];i+=u9(t,e,f,n),e=f[f.length-1]}return i}var Fnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jnr=function(t){Fnr(e,t);function e(r,n){var i=t.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(VT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$T(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,i,o))},e.prototype.getArea=function(){return l9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return wu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=ZT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new e(n,Kn.XY)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(r){return!1},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cv(this.flatCoordinates,0,r,this.stride),this.changed()},e}(Wa),c9=jnr;p();function f9(t,e,r,n,i,o,l){for(var f,d,v,x,b,A,P,N=i[o+1],j=[],D=0,F=r.length;D<F;++D){var U=r[D];for(x=t[U-n],A=t[U-n+1],f=e;f<U;f+=n)b=t[f],P=t[f+1],(N<=A&&P<=N||A<=N&&N<=P)&&(v=(N-A)/(P-A)*(b-x)+x,j.push(v)),x=b,A=P}var $=NaN,Z=-1/0;for(j.sort(Pl),x=j[0],f=1,d=j.length;f<d;++f){b=j[f];var ie=Math.abs(b-x);ie>Z&&(v=(x+b)/2,KT(t,e,r,n,v,N)&&($=v,Z=ie)),x=b}return isNaN($)&&($=i[o]),l?(l.push($,N,Z),l):[$,N,Z]}function o4e(t,e,r,n,i){for(var o=[],l=0,f=r.length;l<f;++l){var d=r[l];o=f9(t,e,d,n,i,2*l,o),e=d[d.length-1]}return o}p();p();function a4e(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}function s4e(t,e,r,n){for(var i=0,o=t[r-n],l=t[r-n+1];e<r;e+=n){var f=t[e],d=t[e+1];i+=(f-o)*(d+l),o=f,l=d}return i===0?void 0:i>0}function h9(t,e,r,n,i){for(var o=i!==void 0?i:!1,l=0,f=r.length;l<f;++l){var d=r[l],v=s4e(t,e,d,n);if(l===0){if(o&&v||!o&&!v)return!1}else if(o&&!v||!o&&v)return!1;e=d}return!0}function l4e(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){var f=r[o];if(!h9(t,e,f,n,i))return!1;f.length&&(e=f[f.length-1])}return!0}function TN(t,e,r,n,i){for(var o=i!==void 0?i:!1,l=0,f=r.length;l<f;++l){var d=r[l],v=s4e(t,e,d,n),x=l===0?o&&v||!o&&!v:o&&!v||!o&&v;x&&a4e(t,e,d,n),e=d}return e}function p9(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o)e=TN(t,e,r[o],n,i);return e}var znr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d9=function(t){znr(e,t);function e(r,n,i){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,n!==void 0&&i?(o.setFlatCoordinates(n,r),o.ends_=i):o.setCoordinates(r,n),o}return e.prototype.appendLinearRing=function(r){this.flatCoordinates?ra(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(GT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HT(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,i,o))},e.prototype.containsXY=function(r,n){return KT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},e.prototype.getArea=function(){return u9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),TN(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,tm(n,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Js(this.getExtent());this.flatInteriorPoint_=f9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Za(this.getFlatInteriorPoint(),Kn.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new c9(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},e.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,i=this.ends_,o=[],l=0,f=0,d=i.length;f<d;++f){var v=i[f],x=new c9(n.slice(l,v),r);o.push(x),l=v}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;h9(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=TN(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=o9(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,i),new e(n,Kn.XY,i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(r){return s9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=WT(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Wa),bc=d9;function QT(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=[e,r,e,i,n,i,n,r,e,r];return new d9(o,Kn.XY,[o.length])}function IN(t,e,r){for(var n=e||32,i=t.getStride(),o=t.getLayout(),l=t.getCenter(),f=i*(n+1),d=new Array(f),v=0;v<f;v+=i){d[v]=0,d[v+1]=0;for(var x=2;x<i;x++)d[v+x]=l[x]}var b=[d.length],A=new d9(d,o,b);return u4e(A,l,t.getRadius(),r),A}function u4e(t,e,r,n){for(var i=t.getFlatCoordinates(),o=t.getStride(),l=i.length/o-1,f=n||0,d=0;d<=l;++d){var v=d*o,x=f+Ll(d,l)*2*Math.PI/l;i[v]=e[0]+r*Math.cos(x),i[v+1]=e[1]+r*Math.sin(x)}t.changed()}p();function c4e(t,e,r,n){for(var i=[],o=Bi(),l=0,f=r.length;l<f;++l){var d=r[l];o=lN(t,e,d[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=d[d.length-1]}return i}var Unr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bnr=function(t){Unr(e,t);function e(r,n,i){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(r[0])){for(var l=o.getLayout(),f=r,d=[],v=[],x=0,b=f.length;x<b;++x){var A=f[x];x===0&&(l=A.getLayout());for(var P=d.length,N=A.getEnds(),j=0,D=N.length;j<D;++j)N[j]+=P;ra(d,A.getFlatCoordinates()),v.push(N)}n=l,r=d,i=v}return n!==void 0&&i?(o.setFlatCoordinates(n,r),o.endss_=i):o.setCoordinates(r,n),o}return e.prototype.appendPolygon=function(r){var n;if(!this.flatCoordinates)this.flatCoordinates=r.getFlatCoordinates().slice(),n=r.getEnds().slice(),this.endss_.push();else{var i=this.flatCoordinates.length;ra(this.flatCoordinates,r.getFlatCoordinates()),n=r.getEnds().slice();for(var o=0,l=n.length;o<l;++o)n[o]+=i}this.endss_.push(n),this.changed()},e.prototype.clone=function(){for(var r=this.endss_.length,n=new Array(r),i=0;i<r;++i)n[i]=this.endss_[i].slice();var o=new e(this.flatCoordinates.slice(),this.layout,n);return o.applyProperties(this),o},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zze(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Yze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,r,n,i,o))},e.prototype.containsXY=function(r,n){return t4e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r,n)},e.prototype.getArea=function(){return i4e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),p9(n,0,this.endss_,this.stride,r)):n=this.flatCoordinates,YT(n,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var r=c4e(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=o4e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new gx(this.getFlatInteriorPoints().slice(),Kn.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;l4e(r,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=p9(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=Qze(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(r),n,0,i),new e(n,Kn.XY,i)},e.prototype.getPolygon=function(r){if(r<0||this.endss_.length<=r)return null;var n;if(r===0)n=0;else{var i=this.endss_[r-1];n=i[i.length-1]}var o=this.endss_[r].slice(),l=o[o.length-1];if(n!==0)for(var f=0,d=o.length;f<d;++f)o[f]-=n;return new bc(this.flatCoordinates.slice(n,l),this.layout,o)},e.prototype.getPolygons=function(){for(var r=this.layout,n=this.flatCoordinates,i=this.endss_,o=[],l=0,f=0,d=i.length;f<d;++f){var v=i[f].slice(),x=v[v.length-1];if(l!==0)for(var b=0,A=v.length;b<A;++b)v[b]-=l;var P=new bc(n.slice(l,x),r,v);o.push(P),l=x}return o},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(r){return n4e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r)},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Kze(this.flatCoordinates,0,r,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()},e}(Wa),AN=Bnr;var Vnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gnr=function(t){Vnr(e,t);function e(r){var n=this,i=r||{};return n=t.call(this)||this,n.dataProjection=ii(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(n.defaultFeatureProjection=ii(i.featureProjection)),n.geometryName_=i.geometryName,n.extractGeometryName_=i.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return e.prototype.readFeatureFromObject=function(r,n){var i=null;r.type==="Feature"?i=r:i={type:"Feature",geometry:r,properties:null};var o=m9(i.geometry,n),l=new Ol;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&l.setGeometryName(i.geometry_name),l.setGeometry(o),"id"in i&&l.setId(i.id),i.properties&&l.setProperties(i.properties,!0),l},e.prototype.readFeaturesFromObject=function(r,n){var i=r,o=null;if(i.type==="FeatureCollection"){var l=r;o=[];for(var f=l.features,d=0,v=f.length;d<v;++d)o.push(this.readFeatureFromObject(f[d],n))}else o=[this.readFeatureFromObject(r,n)];return o},e.prototype.readGeometryFromObject=function(r,n){return m9(r,n)},e.prototype.readProjectionFromObject=function(r){var n=r.crs,i;return n?n.type=="name"?i=ii(n.properties.name):n.type==="EPSG"?i=ii("EPSG:"+n.properties.code):or(!1,36):i=this.dataProjection,i},e.prototype.writeFeatureObject=function(r,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},o=r.getId();if(o!==void 0&&(i.id=o),!r.hasProperties())return i;var l=r.getProperties(),f=r.getGeometry();return f&&(i.geometry=g9(f,n),delete l[r.getGeometryName()]),mc(l)||(i.properties=l),i},e.prototype.writeFeaturesObject=function(r,n){n=this.adaptOptions(n);for(var i=[],o=0,l=r.length;o<l;++o)i.push(this.writeFeatureObject(r[o],n));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(r,n){return g9(r,this.adaptOptions(n))},e}($ze);function m9(t,e){if(!t)return null;var r;switch(t.type){case"Point":{r=Hnr(t);break}case"LineString":{r=Wnr(t);break}case"Polygon":{r=Xnr(t);break}case"MultiPoint":{r=Ynr(t);break}case"MultiLineString":{r=Znr(t);break}case"MultiPolygon":{r=Knr(t);break}case"GeometryCollection":{r=$nr(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return i9(r,!1,e)}function $nr(t,e){var r=t.geometries.map(function(n){return m9(n,e)});return new Vze(r)}function Hnr(t){return new Za(t.coordinates)}function Wnr(t){return new zh(t.coordinates)}function Znr(t){return new SN(t.coordinates)}function Ynr(t){return new gx(t.coordinates)}function Knr(t){return new AN(t.coordinates)}function Xnr(t){return new bc(t.coordinates)}function g9(t,e){t=i9(t,!0,e);var r=t.getType(),n;switch(r){case"Point":{n=nir(t,e);break}case"LineString":{n=Jnr(t,e);break}case"Polygon":{n=iir(t,e);break}case"MultiPoint":{n=tir(t,e);break}case"MultiLineString":{n=eir(t,e);break}case"MultiPolygon":{n=rir(t,e);break}case"GeometryCollection":{n=Qnr(t,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+r)}return n}function Qnr(t,e){var r=t.getGeometriesArray().map(function(n){var i=Xr({},e);return delete i.featureProjection,g9(n,i)});return{type:"GeometryCollection",geometries:r}}function Jnr(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function eir(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function tir(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function rir(t,e){var r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}function nir(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function iir(t,e){var r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}var JT=Gnr;p();p();p();p();p();var yn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var oir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),air=function(t){oir(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var i=Xr({},r);return typeof r.properties=="object"&&(delete i.properties,Xr(i,r.properties)),i[yn.OPACITY]=r.opacity!==void 0?r.opacity:1,or(typeof i[yn.OPACITY]=="number",64),i[yn.VISIBLE]=r.visible!==void 0?r.visible:!0,i[yn.Z_INDEX]=r.zIndex,i[yn.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,i[yn.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,i[yn.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,i[yn.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},i=this.getZIndex();return n.opacity=Yn(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},e.prototype.getLayersArray=function(r){return ir()},e.prototype.getLayerStatesArray=function(r){return ir()},e.prototype.getExtent=function(){return this.get(yn.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(yn.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(yn.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(yn.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(yn.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(yn.OPACITY)},e.prototype.getSourceState=function(){return ir()},e.prototype.getVisible=function(){return this.get(yn.VISIBLE)},e.prototype.getZIndex=function(){return this.get(yn.Z_INDEX)},e.prototype.setBackground=function(r){this.background_=r,this.changed()},e.prototype.setExtent=function(r){this.set(yn.EXTENT,r)},e.prototype.setMaxResolution=function(r){this.set(yn.MAX_RESOLUTION,r)},e.prototype.setMinResolution=function(r){this.set(yn.MIN_RESOLUTION,r)},e.prototype.setMaxZoom=function(r){this.set(yn.MAX_ZOOM,r)},e.prototype.setMinZoom=function(r){this.set(yn.MIN_ZOOM,r)},e.prototype.setOpacity=function(r){or(typeof r=="number",64),this.set(yn.OPACITY,r)},e.prototype.setVisible=function(r){this.set(yn.VISIBLE,r)},e.prototype.setZIndex=function(r){this.set(yn.Z_INDEX,r)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(So),MN=air;p();var Uo={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var sir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lir=function(t){sir(e,t);function e(r){var n=this,i=Xr({},r);delete i.source,n=t.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(yn.SOURCE,n.handleSourcePropertyChange_);var o=r.source?r.source:null;return n.setSource(o),n}return e.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},e.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},e.prototype.getSource=function(){return this.get(yn.SOURCE)||null},e.prototype.getRenderSource=function(){return this.getSource()},e.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(sn(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=qr(r,Vt.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},e.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},e.prototype.render=function(r,n){var i=this.getRenderer();if(i.prepareFrame(r))return this.rendered=!0,i.renderFrame(r,n)},e.prototype.unrender=function(){this.rendered=!1},e.prototype.setMapInternal=function(r){r||this.unrender(),this.set(yn.MAP,r)},e.prototype.getMapInternal=function(){return this.get(yn.MAP)},e.prototype.setMap=function(r){this.mapPrecomposeKey_&&(sn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(sn(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=qr(r,Uo.PRECOMPOSE,function(n){var i=n,o=i.frameState.layerStatesArray,l=this.getLayerState(!1);or(!o.some(function(f){return f.layer===l.layer}),67),o.push(l)},this),this.mapRenderKey_=qr(this,Vt.CHANGE,r.render,r),this.changed())},e.prototype.setSource=function(r){this.set(yn.SOURCE,r)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(MN);function fv(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var hv=lir;var M4e=Fe(_9(),1);p();p();p();p();var Dn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};p();p();function x9(t,e,r){return r===void 0&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function b9(t){return t[0]>0&&t[1]>0}function CN(t,e,r){return r===void 0&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function Xn(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}var uir=function(){function t(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Xn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getDeclutterMode=function(){return this.declutterMode_},t.prototype.getAnchor=function(){return ir()},t.prototype.getImage=function(e){return ir()},t.prototype.getHitDetectionImage=function(){return ir()},t.prototype.getPixelRatio=function(e){return 1},t.prototype.getImageState=function(){return ir()},t.prototype.getImageSize=function(){return ir()},t.prototype.getOrigin=function(){return ir()},t.prototype.getSize=function(){return ir()},t.prototype.setDisplacement=function(e){this.displacement_=e},t.prototype.setOpacity=function(e){this.opacity_=e},t.prototype.setRotateWithView=function(e){this.rotateWithView_=e},t.prototype.setRotation=function(e){this.rotation_=e},t.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Xn(e)},t.prototype.listenImageChange=function(e){ir()},t.prototype.load=function(){ir()},t.prototype.unlistenImageChange=function(e){ir()},t}(),PN=uir;p();var h4e=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,p4e=/^([a-z]*)$|^hsla?\(.*\)$/i;function RN(t){return typeof t=="string"?t:E9(t)}function d4e(t){var e=document.createElement("div");if(e.style.color=t,e.style.color!==""){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}else return""}var w9=function(){var t=1024,e={},r=0;return function(n){var i;if(e.hasOwnProperty(n))i=e[n];else{if(r>=t){var o=0;for(var l in e)(o++&3)===0&&(delete e[l],--r)}i=cir(n),e[n]=i,++r}return i}}();function Uh(t){return Array.isArray(t)?t:w9(t)}function cir(t){var e,r,n,i,o;if(p4e.exec(t)&&(t=d4e(t)),h4e.exec(t)){var l=t.length-1,f=void 0;l<=4?f=1:f=2;var d=l===4||l===8;e=parseInt(t.substr(1+0*f,f),16),r=parseInt(t.substr(1+1*f,f),16),n=parseInt(t.substr(1+2*f,f),16),d?i=parseInt(t.substr(1+3*f,f),16):i=255,f==1&&(e=(e<<4)+e,r=(r<<4)+r,n=(n<<4)+n,d&&(i=(i<<4)+i)),o=[e,r,n,i/255]}else t.indexOf("rgba(")==0?(o=t.slice(5,-1).split(",").map(Number),f4e(o)):t.indexOf("rgb(")==0?(o=t.slice(4,-1).split(",").map(Number),o.push(1),f4e(o)):or(!1,14);return o}function f4e(t){return t[0]=Yn(t[0]+.5|0,0,255),t[1]=Yn(t[1]+.5|0,0,255),t[2]=Yn(t[2]+.5|0,0,255),t[3]=Yn(t[3],0,1),t}function E9(t){var e=t[0];e!=(e|0)&&(e=e+.5|0);var r=t[1];r!=(r|0)&&(r=r+.5|0);var n=t[2];n!=(n|0)&&(n=n+.5|0);var i=t[3]===void 0?1:Math.round(t[3]*100)/100;return"rgba("+e+","+r+","+n+","+i+")"}function m4e(t){return p4e.test(t)&&(t=d4e(t)),h4e.test(t)||t.indexOf("rgba(")===0||t.indexOf("rgb(")===0}p();function el(t){return Array.isArray(t)?E9(t):t}p();function qi(t,e,r,n){var i;return r&&r.length?i=r.shift():Yd?i=new OffscreenCanvas(t||300,e||300):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",n)}function ON(t){var e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function vx(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function eI(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function g4e(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function v4e(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;if(i!==o){if(!i){t.appendChild(o);continue}if(!o){t.removeChild(i),--n;continue}t.insertBefore(o,i)}}}p();p();var tI="ol-hidden";var Eu="ol-unselectable",S9="ol-unsupported",xf="ol-control",T9="ol-collapsed",fir=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),y4e=["style","variant","weight","size","lineHeight","family"],I9=function(t){var e=t.match(fir);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=y4e.length;n<i;++n){var o=e[n+1];o!==void 0&&(r[y4e[n]]=o)}return r.families=r.family.split(/,\s?/),r};var DN="10px sans-serif",tl="#000",pv="round",Bh=[],Vh=0,wf="round",Gh=10,$h="#000",nm="center",dv="middle",Hh=[0,0,0,0],Wh=1,bf=new So,hir=new Xs;hir.setSize=function(){console.warn("labelCache is deprecated.")};var yx=null,A9,M9={},_4e=function(){var t=100,e="32px ",r=["monospace","serif"],n=r.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",o,l;function f(v,x,b){for(var A=!0,P=0;P<n;++P){var N=r[P];if(l=LN(v+" "+x+" "+e+N,i),b!=N){var j=LN(v+" "+x+" "+e+b+","+N,i);A=A&&j!=l}}return!!A}function d(){for(var v=!0,x=bf.getKeys(),b=0,A=x.length;b<A;++b){var P=x[b];bf.get(P)<t&&(f.apply(this,P.split(`
`))?(Ks(M9),yx=null,A9=void 0,bf.set(P,t)):(bf.set(P,bf.get(P)+1,!0),v=!1))}v&&(clearInterval(o),o=void 0)}return function(v){var x=I9(v);if(x)for(var b=x.families,A=0,P=b.length;A<P;++A){var N=b[A],j=x.style+`
`+x.weight+`
`+N;bf.get(j)===void 0&&(bf.set(j,t,!0),f(x.style,x.weight,N)||(bf.set(j,0,!0),o===void 0&&(o=setInterval(d,32))))}}}(),pir=function(){var t;return function(e){var r=M9[e];if(r==null){if(Yd){var n=I9(e),i=x4e(e,"\u017Dg"),o=isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight);r=o*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),r=t.offsetHeight,document.body.removeChild(t);M9[e]=r}return r}}();function x4e(t,e){return yx||(yx=qi(1,1)),t!=A9&&(yx.font=t,A9=yx.font),yx.measureText(e)}function LN(t,e){return x4e(t,e).width}function C9(t,e,r){if(e in r)return r[e];var n=e.split(`
`).reduce(function(i,o){return Math.max(i,LN(t,o))},0);return r[e]=n,n}function b4e(t,e){for(var r=[],n=[],i=[],o=0,l=0,f=0,d=0,v=0,x=e.length;v<=x;v+=2){var b=e[v];if(b===`
`||v===x){o=Math.max(o,l),i.push(l),l=0,f+=d;continue}var A=e[v+1]||t.font,P=LN(A,b);r.push(P),l+=P;var N=pir(A);n.push(N),d=Math.max(d,N)}return{width:o,height:f,widths:r,heights:n,lineWidths:i}}function w4e(t,e,r,n,i,o,l,f,d,v,x){t.save(),r!==1&&(t.globalAlpha*=r),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(d,v),t.scale(x[0],x[1]),dir(n,t)):x[0]<0||x[1]<0?(t.translate(d,v),t.scale(x[0],x[1]),t.drawImage(n,i,o,l,f,0,0,l,f)):t.drawImage(n,i,o,l,f,d,v,l*x[0],f*x[1]),t.restore()}function dir(t,e){for(var r=t.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}var mir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gir=function(t){mir(e,t);function e(r){var n=this,i=r.rotateWithView!==void 0?r.rotateWithView:!1;return n=t.call(this,{opacity:1,rotateWithView:i,rotation:r.rotation!==void 0?r.rotation:0,scale:r.scale!==void 0?r.scale:1,displacement:r.displacement!==void 0?r.displacement:[0,0],declutterMode:r.declutterMode})||this,n.canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=r.fill!==void 0?r.fill:null,n.origin_=[0,0],n.points_=r.points,n.radius_=r.radius!==void 0?r.radius:r.radius1,n.radius2_=r.radius2,n.angle_=r.angle!==void 0?r.angle:0,n.stroke_=r.stroke!==void 0?r.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return e.prototype.clone=function(){var r=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(r)?r.slice():r,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var r=this.size_;if(!r)return null;var n=this.getDisplacement();return[r[0]/2-n[0],r[1]/2+n[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(r){this.fill_=r,this.render()},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(r){var n=this.canvas_[r];if(!n){var i=this.renderOptions_,o=qi(i.size*r,i.size*r);this.draw_(i,o,r),n=o.canvas,this.canvas_[r]=n}return n},e.prototype.getPixelRatio=function(r){return r},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return Dn.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(r){this.stroke_=r,this.render()},e.prototype.listenImageChange=function(r){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(r){},e.prototype.calculateLineJoinSize_=function(r,n,i){if(n===0||this.points_===1/0||r!=="bevel"&&r!=="miter")return n;var o=this.radius_,l=this.radius2_===void 0?o:this.radius2_;if(o<l){var f=o;o=l,l=f}var d=this.radius2_===void 0?this.points_:this.points_*2,v=2*Math.PI/d,x=l*Math.sin(v),b=Math.sqrt(l*l-x*x),A=o-b,P=Math.sqrt(x*x+A*A),N=P/x;if(r==="miter"&&N<=i)return N*n;var j=n/2/N,D=n/2*(A/P),F=Math.sqrt((o+j)*(o+j)+D*D),U=F-o;if(this.radius2_===void 0||r==="bevel")return U*2;var $=o*Math.sin(v),Z=Math.sqrt(o*o-$*$),ie=l-Z,ne=Math.sqrt($*$+ie*ie),ae=ne/$;if(ae<=i){var ye=ae*n/2-l-o;return 2*Math.max(U,ye)}return U*2},e.prototype.createRenderOptions=function(){var r=wf,n=0,i=null,o=0,l,f=0;this.stroke_&&(l=this.stroke_.getColor(),l===null&&(l=$h),l=el(l),f=this.stroke_.getWidth(),f===void 0&&(f=Wh),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),r=this.stroke_.getLineJoin(),r===void 0&&(r=wf),n=this.stroke_.getMiterLimit(),n===void 0&&(n=Gh));var d=this.calculateLineJoinSize_(r,f,n),v=Math.max(this.radius_,this.radius2_||0),x=Math.ceil(2*v+d);return{strokeStyle:l,strokeWidth:f,size:x,lineDash:i,lineDashOffset:o,lineJoin:r,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var r=this.renderOptions_.size;this.canvas_={},this.size_=[r,r]},e.prototype.draw_=function(r,n,i){if(n.scale(i,i),n.translate(r.size/2,r.size/2),this.createPath_(n),this.fill_){var o=this.fill_.getColor();o===null&&(o=tl),n.fillStyle=el(o),n.fill()}this.stroke_&&(n.strokeStyle=r.strokeStyle,n.lineWidth=r.strokeWidth,n.setLineDash&&r.lineDash&&(n.setLineDash(r.lineDash),n.lineDashOffset=r.lineDashOffset),n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit,n.stroke())},e.prototype.createHitDetectionCanvas_=function(r){if(this.fill_){var n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=Uh(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){var o=qi(r.size,r.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(r,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(r){var n=this.points_,i=this.radius_;if(n===1/0)r.arc(0,0,i,0,2*Math.PI);else{var o=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);for(var l=this.angle_-Math.PI/2,f=2*Math.PI/n,d=0;d<n;d++){var v=l+d*f,x=d%2===0?i:o;r.lineTo(x*Math.cos(v),x*Math.sin(v))}r.closePath()}},e.prototype.drawHitDetectionCanvas_=function(r,n){n.translate(r.size/2,r.size/2),this.createPath_(n),n.fillStyle=tl,n.fill(),this.stroke_&&(n.strokeStyle=r.strokeStyle,n.lineWidth=r.strokeWidth,r.lineDash&&(n.setLineDash(r.lineDash),n.lineDashOffset=r.lineDashOffset),n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit,n.stroke())},e}(PN),E4e=gir;var vir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yir=function(t){vir(e,t);function e(r){var n=r||{};return t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:n.scale!==void 0?n.scale:1,rotation:n.rotation!==void 0?n.rotation:0,rotateWithView:n.rotateWithView!==void 0?n.rotateWithView:!1,displacement:n.displacement!==void 0?n.displacement:[0,0],declutterMode:n.declutterMode})||this}return e.prototype.clone=function(){var r=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(r)?r.slice():r,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(r){this.radius_=r,this.render()},e}(E4e),mv=yir;p();var _ir=function(){function t(e){var r=e||{};this.color_=r.color!==void 0?r.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(e){this.color_=e},t}(),Dl=_ir;p();var xir=function(){function t(e){var r=e||{};this.color_=r.color!==void 0?r.color:null,this.lineCap_=r.lineCap,this.lineDash_=r.lineDash!==void 0?r.lineDash:null,this.lineDashOffset_=r.lineDashOffset,this.lineJoin_=r.lineJoin,this.miterLimit_=r.miterLimit,this.width_=r.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(e){this.color_=e},t.prototype.setLineCap=function(e){this.lineCap_=e},t.prototype.setLineDash=function(e){this.lineDash_=e},t.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},t.prototype.setLineJoin=function(e){this.lineJoin_=e},t.prototype.setMiterLimit=function(e){this.miterLimit_=e},t.prototype.setWidth=function(e){this.width_=e},t}(),wc=xir;var _x=function(){function t(e){var r=e||{};this.geometry_=null,this.geometryFunction_=S4e,r.geometry!==void 0&&this.setGeometry(r.geometry),this.fill_=r.fill!==void 0?r.fill:null,this.image_=r.image!==void 0?r.image:null,this.renderer_=r.renderer!==void 0?r.renderer:null,this.hitDetectionRenderer_=r.hitDetectionRenderer!==void 0?r.hitDetectionRenderer:null,this.stroke_=r.stroke!==void 0?r.stroke:null,this.text_=r.text!==void 0?r.text:null,this.zIndex_=r.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(e){this.renderer_=e},t.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(e){this.fill_=e},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(e){this.image_=e},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(e){this.stroke_=e},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(e){this.text_=e},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(r){return r.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=S4e,this.geometry_=e},t.prototype.setZIndex=function(e){this.zIndex_=e},t}();function T4e(t){var e;if(typeof t=="function")e=t;else{var r;if(Array.isArray(t))r=t;else{or(typeof t.getZIndex=="function",41);var n=t;r=[n]}e=function(){return r}}return e}var P9=null;function I4e(t,e){if(!P9){var r=new Dl({color:"rgba(255,255,255,0.4)"}),n=new wc({color:"#3399CC",width:1.25});P9=[new _x({image:new mv({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return P9}function xx(){var t={},e=[255,255,255,1],r=[0,153,255,1],n=3;return t.Polygon=[new _x({fill:new Dl({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new _x({stroke:new wc({color:e,width:n+2})}),new _x({stroke:new wc({color:r,width:n})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new _x({image:new mv({radius:n*2,fill:new Dl({color:r}),stroke:new wc({color:e,width:n/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function S4e(t){return t.getGeometry()}var NN=_x;var bir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A4e={RENDER_ORDER:"renderOrder"},wir=function(t){bir(e,t);function e(r){var n=this,i=r||{},o=Xr({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,n=t.call(this,o)||this,n.declutter_=i.declutter!==void 0?i.declutter:!1,n.renderBuffer_=i.renderBuffer!==void 0?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=i.updateWhileAnimating!==void 0?i.updateWhileAnimating:!1,n.updateWhileInteracting_=i.updateWhileInteracting!==void 0?i.updateWhileInteracting:!1,n}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(r){return t.prototype.getFeatures.call(this,r)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(A4e.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(r){r.declutterTree||(r.declutterTree=new M4e.default(9)),this.getRenderer().renderDeclutter(r)},e.prototype.setRenderOrder=function(r){this.set(A4e.RENDER_ORDER,r)},e.prototype.setStyle=function(r){this.style_=r!==void 0?r:I4e,this.styleFunction_=r===null?void 0:T4e(this.style_),this.changed()},e}(hv),C4e=wir;p();p();p();p();var rI={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},nI=[rI.FILL],Ef=[rI.STROKE],Zh=[rI.BEGIN_PATH],R9=[rI.CLOSE_PATH],gr=rI;p();var Eir=function(){function t(){}return t.prototype.drawCustom=function(e,r,n,i){},t.prototype.drawGeometry=function(e){},t.prototype.setStyle=function(e){},t.prototype.drawCircle=function(e,r){},t.prototype.drawFeature=function(e,r){},t.prototype.drawGeometryCollection=function(e,r){},t.prototype.drawLineString=function(e,r){},t.prototype.drawMultiLineString=function(e,r){},t.prototype.drawMultiPoint=function(e,r){},t.prototype.drawMultiPolygon=function(e,r){},t.prototype.drawPoint=function(e,r){},t.prototype.drawPolygon=function(e,r){},t.prototype.drawText=function(e,r){},t.prototype.setFillStrokeStyle=function(e,r){},t.prototype.setImageStyle=function(e,r){},t.prototype.setTextStyle=function(e,r){},t}(),kN=Eir;var Sir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tir=function(t){Sir(e,t);function e(r,n,i,o){var l=t.call(this)||this;return l.tolerance=r,l.maxExtent=n,l.pixelRatio=o,l.maxLineWidth=0,l.resolution=i,l.beginGeometryInstruction1_=null,l.beginGeometryInstruction2_=null,l.bufferedMaxExtent_=null,l.instructions=[],l.coordinates=[],l.tmpCoordinate_=[],l.hitDetectionInstructions=[],l.state={},l}return e.prototype.applyPixelRatio=function(r){var n=this.pixelRatio;return n==1?r:r.map(function(i){return i*n})},e.prototype.appendFlatPointCoordinates=function(r,n){for(var i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,l=this.coordinates,f=l.length,d=0,v=r.length;d<v;d+=n)o[0]=r[d],o[1]=r[d+1],gs(i,o)&&(l[f++]=o[0],l[f++]=o[1]);return f},e.prototype.appendFlatLineCoordinates=function(r,n,i,o,l,f){var d=this.coordinates,v=d.length,x=this.getBufferedMaxExtent();f&&(n+=o);var b=r[n],A=r[n+1],P=this.tmpCoordinate_,N=!0,j,D,F;for(j=n+o;j<i;j+=o)P[0]=r[j],P[1]=r[j+1],F=aN(x,P),F!==D?(N&&(d[v++]=b,d[v++]=A,N=!1),d[v++]=P[0],d[v++]=P[1]):F===Io.INTERSECTING?(d[v++]=P[0],d[v++]=P[1],N=!1):N=!0,b=P[0],A=P[1],D=F;return(l&&N||j===n+o)&&(d[v++]=b,d[v++]=A),v},e.prototype.drawCustomCoordinates_=function(r,n,i,o,l){for(var f=0,d=i.length;f<d;++f){var v=i[f],x=this.appendFlatLineCoordinates(r,n,v,o,!1,!1);l.push(x),n=v}return n},e.prototype.drawCustom=function(r,n,i,o){this.beginGeometry(r,n);var l=r.getType(),f=r.getStride(),d=this.coordinates.length,v,x,b,A,P;switch(l){case"MultiPolygon":v=r.getOrientedFlatCoordinates(),A=[];var N=r.getEndss();P=0;for(var j=0,D=N.length;j<D;++j){var F=[];P=this.drawCustomCoordinates_(v,P,N[j],f,F),A.push(F)}this.instructions.push([gr.CUSTOM,d,A,r,i,YT]),this.hitDetectionInstructions.push([gr.CUSTOM,d,A,r,o||i,YT]);break;case"Polygon":case"MultiLineString":b=[],v=l=="Polygon"?r.getOrientedFlatCoordinates():r.getFlatCoordinates(),P=this.drawCustomCoordinates_(v,0,r.getEnds(),f,b),this.instructions.push([gr.CUSTOM,d,b,r,i,tm]),this.hitDetectionInstructions.push([gr.CUSTOM,d,b,r,o||i,tm]);break;case"LineString":case"Circle":v=r.getFlatCoordinates(),x=this.appendFlatLineCoordinates(v,0,v.length,f,!1,!1),this.instructions.push([gr.CUSTOM,d,x,r,i,wu]),this.hitDetectionInstructions.push([gr.CUSTOM,d,x,r,o||i,wu]);break;case"MultiPoint":v=r.getFlatCoordinates(),x=this.appendFlatPointCoordinates(v,f),x>d&&(this.instructions.push([gr.CUSTOM,d,x,r,i,wu]),this.hitDetectionInstructions.push([gr.CUSTOM,d,x,r,o||i,wu]));break;case"Point":v=r.getFlatCoordinates(),this.coordinates.push(v[0],v[1]),x=this.coordinates.length,this.instructions.push([gr.CUSTOM,d,x,r,i]),this.hitDetectionInstructions.push([gr.CUSTOM,d,x,r,o||i]);break;default:}this.endGeometry(n)},e.prototype.beginGeometry=function(r,n){this.beginGeometryInstruction1_=[gr.BEGIN_GEOMETRY,n,0,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[gr.BEGIN_GEOMETRY,n,0,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var r=this.hitDetectionInstructions;r.reverse();var n,i=r.length,o,l,f=-1;for(n=0;n<i;++n)o=r[n],l=o[0],l==gr.END_GEOMETRY?f=n:l==gr.BEGIN_GEOMETRY&&(o[2]=n,eze(this.hitDetectionInstructions,f,n),f=-1)},e.prototype.setFillStrokeStyle=function(r,n){var i=this.state;if(r){var o=r.getColor();i.fillStyle=el(o||tl)}else i.fillStyle=void 0;if(n){var l=n.getColor();i.strokeStyle=el(l||$h);var f=n.getLineCap();i.lineCap=f!==void 0?f:pv;var d=n.getLineDash();i.lineDash=d?d.slice():Bh;var v=n.getLineDashOffset();i.lineDashOffset=v||Vh;var x=n.getLineJoin();i.lineJoin=x!==void 0?x:wf;var b=n.getWidth();i.lineWidth=b!==void 0?b:Wh;var A=n.getMiterLimit();i.miterLimit=A!==void 0?A:Gh,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(r){var n=r.fillStyle,i=[gr.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i},e.prototype.applyStroke=function(r){this.instructions.push(this.createStroke(r))},e.prototype.createStroke=function(r){return[gr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth*this.pixelRatio,r.lineCap,r.lineJoin,r.miterLimit,this.applyPixelRatio(r.lineDash),r.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(r,n){var i=r.fillStyle;(typeof i!="string"||r.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,r)),r.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(r,n){var i=r.strokeStyle,o=r.lineCap,l=r.lineDash,f=r.lineDashOffset,d=r.lineJoin,v=r.lineWidth,x=r.miterLimit;(r.currentStrokeStyle!=i||r.currentLineCap!=o||l!=r.currentLineDash&&!Ba(r.currentLineDash,l)||r.currentLineDashOffset!=f||r.currentLineJoin!=d||r.currentLineWidth!=v||r.currentMiterLimit!=x)&&(i!==void 0&&n.call(this,r),r.currentStrokeStyle=i,r.currentLineCap=o,r.currentLineDash=l,r.currentLineDashOffset=f,r.currentLineJoin=d,r.currentLineWidth=v,r.currentMiterLimit=x)},e.prototype.endGeometry=function(r){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[gr.END_GEOMETRY,r];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=sN(this.maxExtent),this.maxLineWidth>0)){var r=this.resolution*(this.maxLineWidth+1)/2;vc(this.bufferedMaxExtent_,r,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(kN),Sf=Tir;p();var Iir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Air=function(t){Iir(e,t);function e(r,n,i,o){var l=t.call(this,r,n,i,o)||this;return l.hitDetectionImage_=null,l.image_=null,l.imagePixelRatio_=void 0,l.anchorX_=void 0,l.anchorY_=void 0,l.height_=void 0,l.opacity_=void 0,l.originX_=void 0,l.originY_=void 0,l.rotateWithView_=void 0,l.rotation_=void 0,l.scale_=void 0,l.width_=void 0,l.declutterMode_=void 0,l.declutterImageWithText_=void 0,l}return e.prototype.drawPoint=function(r,n){if(this.image_){this.beginGeometry(r,n);var i=r.getFlatCoordinates(),o=r.getStride(),l=this.coordinates.length,f=this.appendFlatPointCoordinates(i,o);this.instructions.push([gr.DRAW_IMAGE,l,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([gr.DRAW_IMAGE,l,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.drawMultiPoint=function(r,n){if(this.image_){this.beginGeometry(r,n);var i=r.getFlatCoordinates(),o=r.getStride(),l=this.coordinates.length,f=this.appendFlatPointCoordinates(i,o);this.instructions.push([gr.DRAW_IMAGE,l,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([gr.DRAW_IMAGE,l,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(r,n){var i=r.getAnchor(),o=r.getSize(),l=r.getOrigin();this.imagePixelRatio_=r.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=r.getHitDetectionImage(),this.image_=r.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=r.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=r.getRotateWithView(),this.rotation_=r.getRotation(),this.scale_=r.getScaleArray(),this.width_=o[0],this.declutterMode_=r.getDeclutterMode(),this.declutterImageWithText_=n},e}(Sf),P4e=Air;p();var Mir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cir=function(t){Mir(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.drawFlatCoordinates_=function(r,n,i,o){var l=this.coordinates.length,f=this.appendFlatLineCoordinates(r,n,i,o,!1,!1),d=[gr.MOVE_TO_LINE_TO,l,f];return this.instructions.push(d),this.hitDetectionInstructions.push(d),i},e.prototype.drawLineString=function(r,n){var i=this.state,o=i.strokeStyle,l=i.lineWidth;if(!(o===void 0||l===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(r,n),this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Bh,Vh],Zh);var f=r.getFlatCoordinates(),d=r.getStride();this.drawFlatCoordinates_(f,0,f.length,d),this.hitDetectionInstructions.push(Ef),this.endGeometry(n)}},e.prototype.drawMultiLineString=function(r,n){var i=this.state,o=i.strokeStyle,l=i.lineWidth;if(!(o===void 0||l===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(r,n),this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Zh);for(var f=r.getEnds(),d=r.getFlatCoordinates(),v=r.getStride(),x=0,b=0,A=f.length;b<A;++b)x=this.drawFlatCoordinates_(d,x,f[b],v);this.hitDetectionInstructions.push(Ef),this.endGeometry(n)}},e.prototype.finish=function(){var r=this.state;return r.lastStroke!=null&&r.lastStroke!=this.coordinates.length&&this.instructions.push(Ef),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(r){r.lastStroke!=null&&r.lastStroke!=this.coordinates.length&&(this.instructions.push(Ef),r.lastStroke=this.coordinates.length),r.lastStroke=0,t.prototype.applyStroke.call(this,r),this.instructions.push(Zh)},e}(Sf),R4e=Cir;p();var Pir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rir=function(t){Pir(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.drawFlatCoordinatess_=function(r,n,i,o){var l=this.state,f=l.fillStyle!==void 0,d=l.strokeStyle!==void 0,v=i.length;this.instructions.push(Zh),this.hitDetectionInstructions.push(Zh);for(var x=0;x<v;++x){var b=i[x],A=this.coordinates.length,P=this.appendFlatLineCoordinates(r,n,b,o,!0,!d),N=[gr.MOVE_TO_LINE_TO,A,P];this.instructions.push(N),this.hitDetectionInstructions.push(N),d&&(this.instructions.push(R9),this.hitDetectionInstructions.push(R9)),n=b}return f&&(this.instructions.push(nI),this.hitDetectionInstructions.push(nI)),d&&(this.instructions.push(Ef),this.hitDetectionInstructions.push(Ef)),n},e.prototype.drawCircle=function(r,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,tl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var f=r.getFlatCoordinates(),d=r.getStride(),v=this.coordinates.length;this.appendFlatLineCoordinates(f,0,f.length,d,!1,!1);var x=[gr.CIRCLE,v];this.instructions.push(Zh,x),this.hitDetectionInstructions.push(Zh,x),i.fillStyle!==void 0&&(this.instructions.push(nI),this.hitDetectionInstructions.push(nI)),i.strokeStyle!==void 0&&(this.instructions.push(Ef),this.hitDetectionInstructions.push(Ef)),this.endGeometry(n)}},e.prototype.drawPolygon=function(r,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,tl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var f=r.getEnds(),d=r.getOrientedFlatCoordinates(),v=r.getStride();this.drawFlatCoordinatess_(d,0,f,v),this.endGeometry(n)}},e.prototype.drawMultiPolygon=function(r,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,tl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var f=r.getEndss(),d=r.getOrientedFlatCoordinates(),v=r.getStride(),x=0,b=0,A=f.length;b<A;++b)x=this.drawFlatCoordinatess_(d,x,f[b],v);this.endGeometry(n)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var r=this.tolerance;if(r!==0)for(var n=this.coordinates,i=0,o=n.length;i<o;++i)n[i]=em(n[i],r);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var r=this.state,n=r.fillStyle;n!==void 0&&this.updateFillStyle(r,this.createFill),r.strokeStyle!==void 0&&this.updateStrokeStyle(r,this.applyStroke)},e}(Sf),O9=Rir;p();p();var qN={POINT:"point",LINE:"line"};p();function O4e(t,e,r,n,i){var o=r,l=r,f=0,d=0,v=r,x,b,A,P,N,j,D,F,U,$;for(b=r;b<n;b+=i){var Z=e[b],ie=e[b+1];N!==void 0&&(U=Z-N,$=ie-j,P=Math.sqrt(U*U+$*$),D!==void 0&&(d+=A,x=Math.acos((D*U+F*$)/(A*P)),x>t&&(d>f&&(f=d,o=v,l=b),d=0,v=b-i)),A=P,D=U,F=$),N=Z,j=ie}return d+=P,d>f?[v,b]:[o,l]}var Oir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bx={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Lir=function(t){Oir(e,t);function e(r,n,i,o){var l=t.call(this,r,n,i,o)||this;return l.labels_=null,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=void 0,l.textRotation_=0,l.textFillState_=null,l.fillStates={},l.textStrokeState_=null,l.strokeStates={},l.textState_={},l.textStates={},l.textKey_="",l.fillKey_="",l.strokeKey_="",l.declutterImageWithText_=void 0,l}return e.prototype.finish=function(){var r=t.prototype.finish.call(this);return r.textStates=this.textStates,r.fillStates=this.fillStates,r.strokeStates=this.strokeStates,r},e.prototype.drawText=function(r,n){var i=this.textFillState_,o=this.textStrokeState_,l=this.textState_;if(!(this.text_===""||!l||!i&&!o)){var f=this.coordinates,d=f.length,v=r.getType(),x=null,b=r.getStride();if(l.placement===qN.LINE&&(v=="LineString"||v=="MultiLineString"||v=="Polygon"||v=="MultiPolygon")){if(!ki(this.getBufferedMaxExtent(),r.getExtent()))return;var A=void 0;if(x=r.getFlatCoordinates(),v=="LineString")A=[x.length];else if(v=="MultiLineString")A=r.getEnds();else if(v=="Polygon")A=r.getEnds().slice(0,1);else if(v=="MultiPolygon"){var P=r.getEndss();A=[];for(var N=0,j=P.length;N<j;++N)A.push(P[N][0])}this.beginGeometry(r,n);for(var D=l.textAlign,F=0,U=void 0,$=0,Z=A.length;$<Z;++$){if(D==null){var ie=O4e(l.maxAngle,x,F,A[$],b);F=ie[0],U=ie[1]}else U=A[$];for(var N=F;N<U;N+=b)f.push(x[N],x[N+1]);var ne=f.length;F=A[$],this.drawChars_(d,ne),d=ne}this.endGeometry(n)}else{var ae=l.overflow?null:[];switch(v){case"Point":case"MultiPoint":x=r.getFlatCoordinates();break;case"LineString":x=r.getFlatMidpoint();break;case"Circle":x=r.getCenter();break;case"MultiLineString":x=r.getFlatMidpoints(),b=2;break;case"Polygon":x=r.getFlatInteriorPoint(),l.overflow||ae.push(x[2]/this.resolution),b=3;break;case"MultiPolygon":var ye=r.getFlatInteriorPoints();x=[];for(var N=0,j=ye.length;N<j;N+=3)l.overflow||ae.push(ye[N+2]/this.resolution),x.push(ye[N],ye[N+1]);if(x.length===0)return;b=2;break;default:}var ne=this.appendFlatPointCoordinates(x,b);if(ne===d)return;if(ae&&(ne-d)/2!==x.length/b){var ge=d/2;ae=ae.filter(function(We,lt){var pt=f[(ge+lt)*2]===x[lt*b]&&f[(ge+lt)*2+1]===x[lt*b+1];return pt||--ge,pt})}this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(r,n);var de=l.padding;if(de!=Hh&&(l.scale[0]<0||l.scale[1]<0)){var be=l.padding[0],Ne=l.padding[1],Me=l.padding[2],ke=l.padding[3];l.scale[0]<0&&(Ne=-Ne,ke=-ke),l.scale[1]<0&&(be=-be,Me=-Me),de=[be,Ne,Me,ke]}var He=this.pixelRatio;this.instructions.push([gr.DRAW_IMAGE,d,ne,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,de==Hh?Hh:de.map(function(We){return We*He}),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ae]);var Ke=1/He;this.hitDetectionInstructions.push([gr.DRAW_IMAGE,d,ne,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Ke,Ke],NaN,void 0,this.declutterImageWithText_,de,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ae]),this.endGeometry(n)}}},e.prototype.saveTextStates_=function(){var r=this.textStrokeState_,n=this.textState_,i=this.textFillState_,o=this.strokeKey_;r&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var l=this.textKey_;l in this.textStates||(this.textStates[l]={font:n.font,textAlign:n.textAlign||nm,justify:n.justify,textBaseline:n.textBaseline||dv,scale:n.scale});var f=this.fillKey_;i&&(f in this.fillStates||(this.fillStates[f]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(r,n){var i=this.textStrokeState_,o=this.textState_,l=this.strokeKey_,f=this.textKey_,d=this.fillKey_;this.saveTextStates_();var v=this.pixelRatio,x=bx[o.textBaseline],b=this.textOffsetY_*v,A=this.text_,P=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([gr.DRAW_CHARS,r,n,x,o.overflow,d,o.maxAngle,v,b,l,P*v,A,f,1]),this.hitDetectionInstructions.push([gr.DRAW_CHARS,r,n,x,o.overflow,d,o.maxAngle,1,b,l,P,A,f,1/v])},e.prototype.setTextStyle=function(r,n){var i,o,l;if(!r)this.text_="";else{var f=r.getFill();f?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=el(f.getColor()||tl)):(o=null,this.textFillState_=o);var d=r.getStroke();if(!d)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);var v=d.getLineDash(),x=d.getLineDashOffset(),b=d.getWidth(),A=d.getMiterLimit();l.lineCap=d.getLineCap()||pv,l.lineDash=v?v.slice():Bh,l.lineDashOffset=x===void 0?Vh:x,l.lineJoin=d.getLineJoin()||wf,l.lineWidth=b===void 0?Wh:b,l.miterLimit=A===void 0?Gh:A,l.strokeStyle=el(d.getColor()||$h)}i=this.textState_;var P=r.getFont()||DN;_4e(P);var N=r.getScaleArray();i.overflow=r.getOverflow(),i.font=P,i.maxAngle=r.getMaxAngle(),i.placement=r.getPlacement(),i.textAlign=r.getTextAlign(),i.justify=r.getJustify(),i.textBaseline=r.getTextBaseline()||dv,i.backgroundFill=r.getBackgroundFill(),i.backgroundStroke=r.getBackgroundStroke(),i.padding=r.getPadding()||Hh,i.scale=N===void 0?[1,1]:N;var j=r.getOffsetX(),D=r.getOffsetY(),F=r.getRotateWithView(),U=r.getRotation();this.text_=r.getText()||"",this.textOffsetX_=j===void 0?0:j,this.textOffsetY_=D===void 0?0:D,this.textRotateWithView_=F===void 0?!1:F,this.textRotation_=U===void 0?0:U,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:tr(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+tr(o.fillStyle):""}this.declutterImageWithText_=n},e}(Sf),L4e=Lir;var Dir={Circle:O9,Default:Sf,Image:P4e,LineString:R4e,Polygon:O9,Text:L4e},Nir=function(){function t(e,r,n,i){this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}return t.prototype.finish=function(){var e={};for(var r in this.buildersByZIndex_){e[r]=e[r]||{};var n=this.buildersByZIndex_[r];for(var i in n){var o=n[i].finish();e[r][i]=o}}return e},t.prototype.getBuilder=function(e,r){var n=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);var o=i[r];if(o===void 0){var l=Dir[r];o=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[r]=o}return o},t}(),L9=Nir;p();p();var kir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qir=function(t){kir(e,t);function e(r){var n=t.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return e.prototype.getFeatures=function(r){return ir()},e.prototype.getData=function(r){return null},e.prototype.prepareFrame=function(r){return ir()},e.prototype.renderFrame=function(r,n){return ir()},e.prototype.loadedTileCallback=function(r,n,i){r[n]||(r[n]={}),r[n][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(r,n,i){return function(o,l){var f=this.loadedTileCallback.bind(this,i,o);return r.forEachLoadedTile(n,o,l,f)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(r,n,i,o,l){},e.prototype.getDataAtPixel=function(r,n,i){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===Dn.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(r){var n=r.getState();return n!=Dn.LOADED&&n!=Dn.ERROR&&r.addEventListener(Vt.CHANGE,this.boundHandleImageChange_),n==Dn.IDLE&&(r.load(),n=r.getState()),n==Dn.LOADED},e.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},e.prototype.disposeInternal=function(){delete this.layer_,t.prototype.disposeInternal.call(this)},e}(eN),FN=qir;p();var Fir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jir=function(t){Fir(e,t);function e(r,n,i,o){var l=t.call(this,r)||this;return l.inversePixelTransform=n,l.frameState=i,l.context=o,l}return e}(Ni),im=jir;var zir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D9=[],wx=null;function Uir(){var t=document.createElement("canvas");t.width=1,t.height=1,wx=t.getContext("2d")}var Bir=function(t){zir(e,t);function e(r){var n=t.call(this,r)||this;return n.container=null,n.renderedResolution,n.tempTransform=Ui(),n.pixelTransform=Ui(),n.inversePixelTransform=Ui(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return e.prototype.getImageData=function(r,n,i){wx||Uir(),wx.clearRect(0,0,1,1);var o;try{wx.drawImage(r,n,i,1,1,0,0,1,1),o=wx.getImageData(0,0,1,1).data}catch(l){return wx=null,null}return o},e.prototype.getBackground=function(r){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(r.viewState.resolution)),i||void 0},e.prototype.useContainer=function(r,n,i){var o=this.getLayer().getClassName(),l,f;if(r&&r.className===o&&(!i||r&&r.style.backgroundColor&&Ba(Uh(r.style.backgroundColor),Uh(i)))){var d=r.firstElementChild;d instanceof HTMLCanvasElement&&(f=d.getContext("2d"))}if(f&&f.canvas.style.transform===n?(this.container=r,this.context=f,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){l=document.createElement("div"),l.className=o;var v=l.style;v.position="absolute",v.width="100%",v.height="100%",f=qi();var d=f.canvas;l.appendChild(d),v=d.style,v.position="absolute",v.left="0",v.transformOrigin="top left",this.container=l,this.context=f}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)},e.prototype.clipUnrotated=function(r,n,i){var o=yu(i),l=ux(i),f=lx(i),d=sx(i);Hn(n.coordinateToPixelTransform,o),Hn(n.coordinateToPixelTransform,l),Hn(n.coordinateToPixelTransform,f),Hn(n.coordinateToPixelTransform,d);var v=this.inversePixelTransform;Hn(v,o),Hn(v,l),Hn(v,f),Hn(v,d),r.save(),r.beginPath(),r.moveTo(Math.round(o[0]),Math.round(o[1])),r.lineTo(Math.round(l[0]),Math.round(l[1])),r.lineTo(Math.round(f[0]),Math.round(f[1])),r.lineTo(Math.round(d[0]),Math.round(d[1])),r.clip()},e.prototype.dispatchRenderEvent_=function(r,n,i){var o=this.getLayer();if(o.hasListener(r)){var l=new im(r,this.inversePixelTransform,i,n);o.dispatchEvent(l)}},e.prototype.preRender=function(r,n){this.frameState=n,this.dispatchRenderEvent_(Uo.PRERENDER,r,n)},e.prototype.postRender=function(r,n){this.dispatchRenderEvent_(Uo.POSTRENDER,r,n)},e.prototype.getRenderTransform=function(r,n,i,o,l,f,d){var v=l/2,x=f/2,b=o/n,A=-b,P=-r[0]+d,N=-r[1];return To(this.tempTransform,v,x,b,A,-i,P,N)},e.prototype.getDataAtPixel=function(r,n,i){var o=Hn(this.inversePixelTransform,r.slice()),l=this.context,f=this.getLayer(),d=f.getExtent();if(d){var v=Hn(n.pixelToCoordinateTransform,r.slice());if(!gs(d,v))return null}var x=Math.round(o[0]),b=Math.round(o[1]),A=this.pixelContext_;if(!A){var P=document.createElement("canvas");P.width=1,P.height=1,A=P.getContext("2d"),this.pixelContext_=A}A.clearRect(0,0,1,1);var N;try{A.drawImage(l.canvas,x,b,1,1,0,0,1,1),N=A.getImageData(0,0,1,1).data}catch(j){return j.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):N}return N[3]===0?null:N},e.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},e}(FN),jN=Bir;p();p();p();function D4e(t,e,r,n,i,o,l,f,d,v,x,b){var A=t[e],P=t[e+1],N=0,j=0,D=0,F=0;function U(){N=A,j=P,e+=n,A=t[e],P=t[e+1],F+=D,D=Math.sqrt((A-N)*(A-N)+(P-j)*(P-j))}do U();while(e<r-n&&F+D<o);for(var $=D===0?0:(o-F)/D,Z=_u(N,A,$),ie=_u(j,P,$),ne=e-n,ae=F,ye=o+f*d(v,i,x);e<r-n&&F+D<ye;)U();$=D===0?0:(ye-F)/D;var ge=_u(N,A,$),de=_u(j,P,$),be;if(b){var Ne=[Z,ie,ge,de];mx(Ne,0,4,2,b,Ne,Ne),be=Ne[0]>Ne[2]}else be=Z>ge;var Me=Math.PI,ke=[],He=ne+n===e;e=ne,D=0,F=ae,A=t[e],P=t[e+1];var Ke;if(He){U(),Ke=Math.atan2(P-j,A-N),be&&(Ke+=Ke>0?-Me:Me);var Je=(ge+Z)/2,We=(de+ie)/2;return ke[0]=[Je,We,(ye-o)/2,Ke,i],ke}i=i.replace(/\n/g," ");for(var lt=0,pt=i.length;lt<pt;){U();var dt=Math.atan2(P-j,A-N);if(be&&(dt+=dt>0?-Me:Me),Ke!==void 0){var ze=dt-Ke;if(ze+=ze>Me?-2*Me:ze<-Me?2*Me:0,Math.abs(ze)>l)return null}Ke=dt;for(var Dt=lt,Ot=0;lt<pt;++lt){var Ue=be?pt-lt-1:lt,nt=f*d(v,i[Ue],x);if(e+n<r&&F+D<o+Ot+nt/2)break;Ot+=nt}if(lt!==Dt){var Ze=be?i.substring(pt-Dt,pt-lt):i.substring(Dt,lt);$=D===0?0:(o+Ot/2-F)/D;var Je=_u(N,A,$),We=_u(j,P,$);ke.push([Je,We,Ot/2,dt,Ze]),o+=Ot}}return ke}var Ex=Bi(),om=[],Yh=[],Kh=[],am=[];function N4e(t){return t[3].declutterBox}var Vir=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function k4e(t,e){return(e==="start"||e==="end")&&!Vir.test(t)&&(e=e==="start"?"left":"right"),bx[e]}function Gir(t,e,r){return r>0&&t.push(`
`,""),t.push(e,""),t}var $ir=function(){function t(e,r,n,i){this.overlaps=n,this.pixelRatio=r,this.resolution=e,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Ui(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(e,r,n,i){var o=e+r+n+i;if(this.labels_[o])return this.labels_[o];var l=i?this.strokeStates[i]:null,f=n?this.fillStates[n]:null,d=this.textStates[r],v=this.pixelRatio,x=[d.scale[0]*v,d.scale[1]*v],b=Array.isArray(e),A=d.justify?bx[d.justify]:k4e(Array.isArray(e)?e[0]:e,d.textAlign||nm),P=i&&l.lineWidth?l.lineWidth:0,N=b?e:e.split(`
`).reduce(Gir,[]),j=b4e(d,N),D=j.width,F=j.height,U=j.widths,$=j.heights,Z=j.lineWidths,ie=D+P,ne=[],ae=(ie+2)*x[0],ye=(F+P)*x[1],ge={width:ae<0?Math.floor(ae):Math.ceil(ae),height:ye<0?Math.floor(ye):Math.ceil(ye),contextInstructions:ne};if((x[0]!=1||x[1]!=1)&&ne.push("scale",x),i){ne.push("strokeStyle",l.strokeStyle),ne.push("lineWidth",P),ne.push("lineCap",l.lineCap),ne.push("lineJoin",l.lineJoin),ne.push("miterLimit",l.miterLimit);var de=Yd?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;de.prototype.setLineDash&&(ne.push("setLineDash",[l.lineDash]),ne.push("lineDashOffset",l.lineDashOffset))}n&&ne.push("fillStyle",f.fillStyle),ne.push("textBaseline","middle"),ne.push("textAlign","center");for(var be=.5-A,Ne=A*ie+be*P,Me=[],ke=[],He=0,Ke=0,Je=0,We=0,lt,pt=0,dt=N.length;pt<dt;pt+=2){var ze=N[pt];if(ze===`
`){Ke+=He,He=0,Ne=A*ie+be*P,++We;continue}var Dt=N[pt+1]||d.font;Dt!==lt&&(i&&Me.push("font",Dt),n&&ke.push("font",Dt),lt=Dt),He=Math.max(He,$[Je]);var Ot=[ze,Ne+be*U[Je]+A*(U[Je]-Z[We]),.5*(P+He)+Ke];Ne+=U[Je],i&&Me.push("strokeText",Ot),n&&ke.push("fillText",Ot),++Je}return Array.prototype.push.apply(ne,Me),Array.prototype.push.apply(ne,ke),this.labels_[o]=ge,ge},t.prototype.replayTextBackground_=function(e,r,n,i,o,l,f){e.beginPath(),e.moveTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,r),l&&(this.alignFill_=l[2],this.fill_(e)),f&&(this.setStrokeStyle_(e,f),e.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(e,r,n,i,o,l,f,d,v,x,b,A,P,N,j,D){f*=A[0],d*=A[1];var F=n-f,U=i-d,$=o+v>e?e-v:o,Z=l+x>r?r-x:l,ie=N[3]+$*A[0]+N[1],ne=N[0]+Z*A[1]+N[2],ae=F-N[3],ye=U-N[0];(j||b!==0)&&(om[0]=ae,am[0]=ae,om[1]=ye,Yh[1]=ye,Yh[0]=ae+ie,Kh[0]=Yh[0],Kh[1]=ye+ne,am[1]=Kh[1]);var ge;return b!==0?(ge=To(Ui(),n,i,1,1,b,-n,-i),Hn(ge,om),Hn(ge,Yh),Hn(ge,Kh),Hn(ge,am),$a(Math.min(om[0],Yh[0],Kh[0],am[0]),Math.min(om[1],Yh[1],Kh[1],am[1]),Math.max(om[0],Yh[0],Kh[0],am[0]),Math.max(om[1],Yh[1],Kh[1],am[1]),Ex)):$a(Math.min(ae,ae+ie),Math.min(ye,ye+ne),Math.max(ae,ae+ie),Math.max(ye,ye+ne),Ex),P&&(F=Math.round(F),U=Math.round(U)),{drawImageX:F,drawImageY:U,drawImageW:$,drawImageH:Z,originX:v,originY:x,declutterBox:{minX:Ex[0],minY:Ex[1],maxX:Ex[2],maxY:Ex[3],value:D},canvasTransform:ge,scale:A}},t.prototype.replayImageOrLabel_=function(e,r,n,i,o,l,f){var d=!!(l||f),v=i.declutterBox,x=e.canvas,b=f?f[2]*i.scale[0]/2:0,A=v.minX-b<=x.width/r&&v.maxX+b>=0&&v.minY-b<=x.height/r&&v.maxY+b>=0;return A&&(d&&this.replayTextBackground_(e,om,Yh,Kh,am,l,f),w4e(e,i.canvasTransform,o,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},t.prototype.fill_=function(e){if(this.alignFill_){var r=Hn(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(r[0]%n,r[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},t.prototype.setStrokeStyle_=function(e,r){e.strokeStyle=r[1],e.lineWidth=r[2],e.lineCap=r[3],e.lineJoin=r[4],e.miterLimit=r[5],e.setLineDash&&(e.lineDashOffset=r[7],e.setLineDash(r[6]))},t.prototype.drawLabelWithPointPlacement_=function(e,r,n,i){var o=this.textStates[r],l=this.createLabel(e,r,i,n),f=this.strokeStates[n],d=this.pixelRatio,v=k4e(Array.isArray(e)?e[0]:e,o.textAlign||nm),x=bx[o.textBaseline||dv],b=f&&f.lineWidth?f.lineWidth:0,A=l.width/d-2*o.scale[0],P=v*A+2*(.5-v)*b,N=x*l.height/d+2*(.5-x)*b;return{label:l,anchorX:P,anchorY:N}},t.prototype.execute_=function(e,r,n,i,o,l,f,d){var v;this.pixelCoordinates_&&Ba(n,this.renderedTransform_)?v=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),v=bu(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),pze(this.renderedTransform_,n));for(var x=0,b=i.length,A=0,P,N,j,D,F,U,$,Z,ie,ne,ae,ye,ge=0,de=0,be=null,Ne=null,Me=this.coordinateCache_,ke=this.viewRotation_,He=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,Ke={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ke},Je=this.instructions!=i||this.overlaps?0:200,We,lt,pt,dt;x<b;){var ze=i[x],Dt=ze[0];switch(Dt){case gr.BEGIN_GEOMETRY:We=ze[1],dt=ze[3],We.getGeometry()?f!==void 0&&!ki(f,dt.getExtent())?x=ze[2]+1:++x:x=ze[2];break;case gr.BEGIN_PATH:ge>Je&&(this.fill_(e),ge=0),de>Je&&(e.stroke(),de=0),!ge&&!de&&(e.beginPath(),D=NaN,F=NaN),++x;break;case gr.CIRCLE:A=ze[1];var Ot=v[A],Ue=v[A+1],nt=v[A+2],Ze=v[A+3],rt=nt-Ot,at=Ze-Ue,ot=Math.sqrt(rt*rt+at*at);e.moveTo(Ot+ot,Ue),e.arc(Ot,Ue,ot,0,2*Math.PI,!0),++x;break;case gr.CLOSE_PATH:e.closePath(),++x;break;case gr.CUSTOM:A=ze[1],P=ze[2];var Lt=ze[3],zt=ze[4],Pt=ze.length==6?ze[5]:void 0;Ke.geometry=Lt,Ke.feature=We,x in Me||(Me[x]=[]);var $t=Me[x];Pt?Pt(v,A,P,2,$t):($t[0]=v[A],$t[1]=v[A+1],$t.length=2),zt($t,Ke),++x;break;case gr.DRAW_IMAGE:A=ze[1],P=ze[2],Z=ze[3],N=ze[4],j=ze[5];var Xt=ze[6],Gt=ze[7],Sr=ze[8],zr=ze[9],vr=ze[10],pr=ze[11],dr=ze[12],wr=ze[13],un=ze[14],Sn=ze[15];if(!Z&&ze.length>=20){ie=ze[19],ne=ze[20],ae=ze[21],ye=ze[22];var Nn=this.drawLabelWithPointPlacement_(ie,ne,ae,ye);Z=Nn.label,ze[3]=Z;var _i=ze[23];N=(Nn.anchorX-_i)*this.pixelRatio,ze[4]=N;var De=ze[24];j=(Nn.anchorY-De)*this.pixelRatio,ze[5]=j,Xt=Z.height,ze[6]=Xt,wr=Z.width,ze[13]=wr}var J=void 0;ze.length>25&&(J=ze[25]);var te=void 0,se=void 0,_e=void 0;ze.length>17?(te=ze[16],se=ze[17],_e=ze[18]):(te=Hh,se=!1,_e=!1),vr&&He?pr+=ke:!vr&&!He&&(pr-=ke);for(var Ae=0;A<P;A+=2)if(!(J&&J[Ae++]<wr/this.pixelRatio)){var Le=this.calculateImageOrLabelDimensions_(Z.width,Z.height,v[A],v[A+1],wr,Xt,N,j,Sr,zr,pr,dr,o,te,se||_e,We),Be=[e,r,Z,Le,Gt,se?be:null,_e?Ne:null];if(d){if(un==="none")continue;if(un==="obstacle"){d.insert(Le.declutterBox);continue}else{var Oe=void 0,he=void 0;if(Sn){var pe=P-A;if(!Sn[pe]){Sn[pe]=Be;continue}if(Oe=Sn[pe],delete Sn[pe],he=N4e(Oe),d.collides(he))continue}if(d.collides(Le.declutterBox))continue;Oe&&(d.insert(he),this.replayImageOrLabel_.apply(this,Oe)),d.insert(Le.declutterBox)}}this.replayImageOrLabel_.apply(this,Be)}++x;break;case gr.DRAW_CHARS:var Re=ze[1],tt=ze[2],xe=ze[3],ut=ze[4];ye=ze[5];var It=ze[6],ft=ze[7],_t=ze[8];ae=ze[9];var Wt=ze[10];ie=ze[11],ne=ze[12];var Tr=[ze[13],ze[13]],rn=this.textStates[ne],Pr=rn.font,ar=[rn.scale[0]*ft,rn.scale[1]*ft],ur=void 0;Pr in this.widths_?ur=this.widths_[Pr]:(ur={},this.widths_[Pr]=ur);var Mn=EN(v,Re,tt,2),gt=Math.abs(ar[0])*C9(Pr,ie,ur);if(ut||gt<=Mn){var si=this.textStates[ne].textAlign,Tn=(Mn-gt)*bx[si],Ia=D4e(v,Re,tt,2,ie,Tn,It,Math.abs(ar[0]),C9,Pr,ur,He?0:this.viewRotation_);e:if(Ia){var Ss=[],wt=void 0,Rr=void 0,Er=void 0,_n=void 0,Vi=void 0;if(ae)for(wt=0,Rr=Ia.length;wt<Rr;++wt){Vi=Ia[wt],Er=Vi[4],_n=this.createLabel(Er,ne,"",ae),N=Vi[2]+(ar[0]<0?-Wt:Wt),j=xe*_n.height+(.5-xe)*2*Wt*ar[1]/ar[0]-_t;var Le=this.calculateImageOrLabelDimensions_(_n.width,_n.height,Vi[0],Vi[1],_n.width,_n.height,N,j,0,0,Vi[3],Tr,!1,Hh,!1,We);if(d&&d.collides(Le.declutterBox))break e;Ss.push([e,r,_n,Le,1,null,null])}if(ye)for(wt=0,Rr=Ia.length;wt<Rr;++wt){Vi=Ia[wt],Er=Vi[4],_n=this.createLabel(Er,ne,ye,""),N=Vi[2],j=xe*_n.height-_t;var Le=this.calculateImageOrLabelDimensions_(_n.width,_n.height,Vi[0],Vi[1],_n.width,_n.height,N,j,0,0,Vi[3],Tr,!1,Hh,!1,We);if(d&&d.collides(Le.declutterBox))break e;Ss.push([e,r,_n,Le,1,null,null])}d&&d.load(Ss.map(N4e));for(var Ts=0,Ir=Ss.length;Ts<Ir;++Ts)this.replayImageOrLabel_.apply(this,Ss[Ts])}}++x;break;case gr.END_GEOMETRY:if(l!==void 0){We=ze[1];var qf=l(We,dt);if(qf)return qf}++x;break;case gr.FILL:Je?ge++:this.fill_(e),++x;break;case gr.MOVE_TO_LINE_TO:for(A=ze[1],P=ze[2],lt=v[A],pt=v[A+1],U=lt+.5|0,$=pt+.5|0,(U!==D||$!==F)&&(e.moveTo(lt,pt),D=U,F=$),A+=2;A<P;A+=2)lt=v[A],pt=v[A+1],U=lt+.5|0,$=pt+.5|0,(A==P-2||U!==D||$!==F)&&(e.lineTo(lt,pt),D=U,F=$);++x;break;case gr.SET_FILL_STYLE:be=ze,this.alignFill_=ze[2],ge&&(this.fill_(e),ge=0,de&&(e.stroke(),de=0)),e.fillStyle=ze[1],++x;break;case gr.SET_STROKE_STYLE:Ne=ze,de&&(e.stroke(),de=0),this.setStrokeStyle_(e,ze),++x;break;case gr.STROKE:Je?de++:e.stroke(),++x;break;default:++x;break}}ge&&this.fill_(e),de&&e.stroke()},t.prototype.execute=function(e,r,n,i,o,l){this.viewRotation_=i,this.execute_(e,r,n,this.instructions,o,void 0,void 0,l)},t.prototype.executeHitDetection=function(e,r,n,i,o){return this.viewRotation_=n,this.execute_(e,1,r,this.hitDetectionInstructions,!0,i,o)},t}(),q4e=$ir;var N9=["Polygon","Circle","LineString","Image","Text","Default"],Hir=function(){function t(e,r,n,i,o,l){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ui(),this.createExecutors_(o)}return t.prototype.clip=function(e,r){var n=this.getClipCoords(r);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()},t.prototype.createExecutors_=function(e){for(var r in e){var n=this.executorsByZIndex_[r];n===void 0&&(n={},this.executorsByZIndex_[r]=n);var i=e[r];for(var o in i){var l=i[o];n[o]=new q4e(this.resolution_,this.pixelRatio_,this.overlaps_,l)}}},t.prototype.hasExecutors=function(e){for(var r in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[r],i=0,o=e.length;i<o;++i)if(e[i]in n)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(e,r,n,i,o,l){i=Math.round(i);var f=i*2+1,d=To(this.hitDetectionTransform_,i+.5,i+.5,1/r,-1/r,-n,-e[0],-e[1]),v=!this.hitDetectionContext_;v&&(this.hitDetectionContext_=qi(f,f));var x=this.hitDetectionContext_;x.canvas.width!==f||x.canvas.height!==f?(x.canvas.width=f,x.canvas.height=f):v||x.clearRect(0,0,f,f);var b;this.renderBuffer_!==void 0&&(b=Bi(),ov(b,e),vc(b,r*(this.renderBuffer_+i),b));var A=Wir(i),P;function N(ne,ae){for(var ye=x.getImageData(0,0,f,f).data,ge=0,de=A.length;ge<de;ge++)if(ye[A[ge]]>0){if(!l||P!=="Image"&&P!=="Text"||l.indexOf(ne)!==-1){var be=(A[ge]-3)/4,Ne=i-be%f,Me=i-(be/f|0),ke=o(ne,ae,Ne*Ne+Me*Me);if(ke)return ke}x.clearRect(0,0,f,f);break}}var j=Object.keys(this.executorsByZIndex_).map(Number);j.sort(Pl);var D,F,U,$,Z;for(D=j.length-1;D>=0;--D){var ie=j[D].toString();for(U=this.executorsByZIndex_[ie],F=N9.length-1;F>=0;--F)if(P=N9[F],$=U[P],$!==void 0&&(Z=$.executeHitDetection(x,d,n,N,b),Z))return Z}},t.prototype.getClipCoords=function(e){var r=this.maxExtent_;if(!r)return null;var n=r[0],i=r[1],o=r[2],l=r[3],f=[n,i,n,l,o,l,o,i];return bu(f,0,8,2,e,f),f},t.prototype.isEmpty=function(){return mc(this.executorsByZIndex_)},t.prototype.execute=function(e,r,n,i,o,l,f){var d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(Pl),this.maxExtent_&&(e.save(),this.clip(e,n));var v=l||N9,x,b,A,P,N,j;for(f&&d.reverse(),x=0,b=d.length;x<b;++x){var D=d[x].toString();for(N=this.executorsByZIndex_[D],A=0,P=v.length;A<P;++A){var F=v[A];j=N[F],j!==void 0&&j.execute(e,r,n,i,o,f)}}this.maxExtent_&&e.restore()},t}(),k9={};function Wir(t){if(k9[t]!==void 0)return k9[t];for(var e=t*2+1,r=t*t,n=new Array(r+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var l=i*i+o*o;if(l>r)break;var f=n[l];f||(f=[],n[l]=f),f.push(((t+i)*e+(t+o))*4+3),i>0&&f.push(((t-i)*e+(t+o))*4+3),o>0&&(f.push(((t+i)*e+(t-o))*4+3),i>0&&f.push(((t-i)*e+(t-o))*4+3))}for(var d=[],i=0,v=n.length;i<v;++i)n[i]&&d.push.apply(d,n[i]);return k9[t]=d,d}var q9=Hir;p();var Bo={ANIMATING:0,INTERACTING:1};p();p();var Zir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yir=function(t){Zir(e,t);function e(r,n,i,o,l,f,d){var v=t.call(this)||this;return v.context_=r,v.pixelRatio_=n,v.extent_=i,v.transform_=o,v.viewRotation_=l,v.squaredTolerance_=f,v.userTransform_=d,v.contextFillState_=null,v.contextStrokeState_=null,v.contextTextState_=null,v.fillState_=null,v.strokeState_=null,v.image_=null,v.imageAnchorX_=0,v.imageAnchorY_=0,v.imageHeight_=0,v.imageOpacity_=0,v.imageOriginX_=0,v.imageOriginY_=0,v.imageRotateWithView_=!1,v.imageRotation_=0,v.imageScale_=[0,0],v.imageWidth_=0,v.text_="",v.textOffsetX_=0,v.textOffsetY_=0,v.textRotateWithView_=!1,v.textRotation_=0,v.textScale_=[0,0],v.textFillState_=null,v.textStrokeState_=null,v.textState_=null,v.pixelCoordinates_=[],v.tmpLocalTransform_=Ui(),v}return e.prototype.drawImages_=function(r,n,i,o){if(this.image_){var l=bu(r,n,i,o,this.transform_,this.pixelCoordinates_),f=this.context_,d=this.tmpLocalTransform_,v=f.globalAlpha;this.imageOpacity_!=1&&(f.globalAlpha=v*this.imageOpacity_);var x=this.imageRotation_;this.imageRotateWithView_&&(x+=this.viewRotation_);for(var b=0,A=l.length;b<A;b+=2){var P=l[b]-this.imageAnchorX_,N=l[b+1]-this.imageAnchorY_;if(x!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var j=P+this.imageAnchorX_,D=N+this.imageAnchorY_;To(d,j,D,1,1,x,-j,-D),f.setTransform.apply(f,d),f.translate(j,D),f.scale(this.imageScale_[0],this.imageScale_[1]),f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),f.setTransform(1,0,0,1,0,0)}else f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,P,N,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(f.globalAlpha=v)}},e.prototype.drawText_=function(r,n,i,o){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var l=bu(r,n,i,o,this.transform_,this.pixelCoordinates_),f=this.context_,d=this.textRotation_;for(this.textRotateWithView_&&(d+=this.viewRotation_);n<i;n+=o){var v=l[n]+this.textOffsetX_,x=l[n+1]+this.textOffsetY_;if(d!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var b=To(this.tmpLocalTransform_,v,x,1,1,d,-v,-x);f.setTransform.apply(f,b),f.translate(v,x),f.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&f.strokeText(this.text_,0,0),this.textFillState_&&f.fillText(this.text_,0,0),f.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&f.strokeText(this.text_,v,x),this.textFillState_&&f.fillText(this.text_,v,x)}}},e.prototype.moveToLineTo_=function(r,n,i,o,l){var f=this.context_,d=bu(r,n,i,o,this.transform_,this.pixelCoordinates_);f.moveTo(d[0],d[1]);var v=d.length;l&&(v-=2);for(var x=2;x<v;x+=2)f.lineTo(d[x],d[x+1]);return l&&f.closePath(),i},e.prototype.drawRings_=function(r,n,i,o){for(var l=0,f=i.length;l<f;++l)n=this.moveToLineTo_(r,n,i[l],o,!0);return n},e.prototype.drawCircle=function(r){if(ki(this.extent_,r.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=Hze(r,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],o=n[3]-n[1],l=Math.sqrt(i*i+o*o),f=this.context_;f.beginPath(),f.arc(n[0],n[1],l,0,2*Math.PI),this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}this.text_!==""&&this.drawText_(r.getCenter(),0,2,2)}},e.prototype.setStyle=function(r){this.setFillStrokeStyle(r.getFill(),r.getStroke()),this.setImageStyle(r.getImage()),this.setTextStyle(r.getText())},e.prototype.setTransform=function(r){this.transform_=r},e.prototype.drawGeometry=function(r){var n=r.getType();switch(n){case"Point":this.drawPoint(r);break;case"LineString":this.drawLineString(r);break;case"Polygon":this.drawPolygon(r);break;case"MultiPoint":this.drawMultiPoint(r);break;case"MultiLineString":this.drawMultiLineString(r);break;case"MultiPolygon":this.drawMultiPolygon(r);break;case"GeometryCollection":this.drawGeometryCollection(r);break;case"Circle":this.drawCircle(r);break;default:}},e.prototype.drawFeature=function(r,n){var i=n.getGeometryFunction()(r);!i||!ki(this.extent_,i.getExtent())||(this.setStyle(n),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(r){for(var n=r.getGeometriesArray(),i=0,o=n.length;i<o;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=r.getFlatCoordinates(),i=r.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawMultiPoint=function(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=r.getFlatCoordinates(),i=r.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawLineString=function(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ki(this.extent_,r.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=r.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,r.getStride(),!1),n.stroke()}if(this.text_!==""){var o=r.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=r.getExtent();if(ki(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=r.getFlatCoordinates(),l=0,f=r.getEnds(),d=r.getStride();i.beginPath();for(var v=0,x=f.length;v<x;++v)l=this.moveToLineTo_(o,l,f[v],d,!1);i.stroke()}if(this.text_!==""){var b=r.getFlatMidpoints();this.drawText_(b,0,b.length,2)}}},e.prototype.drawPolygon=function(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ki(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(r.getOrientedFlatCoordinates(),0,r.getEnds(),r.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var i=r.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ki(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=r.getOrientedFlatCoordinates(),o=0,l=r.getEndss(),f=r.getStride();n.beginPath();for(var d=0,v=l.length;d<v;++d){var x=l[d];o=this.drawRings_(i,o,x,f)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var b=r.getFlatInteriorPoints();this.drawText_(b,0,b.length,2)}}},e.prototype.setContextFillState_=function(r){var n=this.context_,i=this.contextFillState_;i?i.fillStyle!=r.fillStyle&&(i.fillStyle=r.fillStyle,n.fillStyle=r.fillStyle):(n.fillStyle=r.fillStyle,this.contextFillState_={fillStyle:r.fillStyle})},e.prototype.setContextStrokeState_=function(r){var n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=r.lineCap&&(i.lineCap=r.lineCap,n.lineCap=r.lineCap),n.setLineDash&&(Ba(i.lineDash,r.lineDash)||n.setLineDash(i.lineDash=r.lineDash),i.lineDashOffset!=r.lineDashOffset&&(i.lineDashOffset=r.lineDashOffset,n.lineDashOffset=r.lineDashOffset)),i.lineJoin!=r.lineJoin&&(i.lineJoin=r.lineJoin,n.lineJoin=r.lineJoin),i.lineWidth!=r.lineWidth&&(i.lineWidth=r.lineWidth,n.lineWidth=r.lineWidth),i.miterLimit!=r.miterLimit&&(i.miterLimit=r.miterLimit,n.miterLimit=r.miterLimit),i.strokeStyle!=r.strokeStyle&&(i.strokeStyle=r.strokeStyle,n.strokeStyle=r.strokeStyle)):(n.lineCap=r.lineCap,n.setLineDash&&(n.setLineDash(r.lineDash),n.lineDashOffset=r.lineDashOffset),n.lineJoin=r.lineJoin,n.lineWidth=r.lineWidth,n.miterLimit=r.miterLimit,n.strokeStyle=r.strokeStyle,this.contextStrokeState_={lineCap:r.lineCap,lineDash:r.lineDash,lineDashOffset:r.lineDashOffset,lineJoin:r.lineJoin,lineWidth:r.lineWidth,miterLimit:r.miterLimit,strokeStyle:r.strokeStyle})},e.prototype.setContextTextState_=function(r){var n=this.context_,i=this.contextTextState_,o=r.textAlign?r.textAlign:nm;i?(i.font!=r.font&&(i.font=r.font,n.font=r.font),i.textAlign!=o&&(i.textAlign=o,n.textAlign=o),i.textBaseline!=r.textBaseline&&(i.textBaseline=r.textBaseline,n.textBaseline=r.textBaseline)):(n.font=r.font,n.textAlign=o,n.textBaseline=r.textBaseline,this.contextTextState_={font:r.font,textAlign:o,textBaseline:r.textBaseline})},e.prototype.setFillStrokeStyle=function(r,n){var i=this;if(!r)this.fillState_=null;else{var o=r.getColor();this.fillState_={fillStyle:el(o||tl)}}if(!n)this.strokeState_=null;else{var l=n.getColor(),f=n.getLineCap(),d=n.getLineDash(),v=n.getLineDashOffset(),x=n.getLineJoin(),b=n.getWidth(),A=n.getMiterLimit(),P=d||Bh;this.strokeState_={lineCap:f!==void 0?f:pv,lineDash:this.pixelRatio_===1?P:P.map(function(N){return N*i.pixelRatio_}),lineDashOffset:(v||Vh)*this.pixelRatio_,lineJoin:x!==void 0?x:wf,lineWidth:(b!==void 0?b:Wh)*this.pixelRatio_,miterLimit:A!==void 0?A:Gh,strokeStyle:el(l||$h)}}},e.prototype.setImageStyle=function(r){var n;if(!r||!(n=r.getSize())){this.image_=null;return}var i=r.getAnchor(),o=r.getOrigin();this.image_=r.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=r.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=r.getRotateWithView(),this.imageRotation_=r.getRotation(),this.imageScale_=r.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_},e.prototype.setTextStyle=function(r){if(!r)this.text_="";else{var n=r.getFill();if(!n)this.textFillState_=null;else{var i=n.getColor();this.textFillState_={fillStyle:el(i||tl)}}var o=r.getStroke();if(!o)this.textStrokeState_=null;else{var l=o.getColor(),f=o.getLineCap(),d=o.getLineDash(),v=o.getLineDashOffset(),x=o.getLineJoin(),b=o.getWidth(),A=o.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:pv,lineDash:d||Bh,lineDashOffset:v||Vh,lineJoin:x!==void 0?x:wf,lineWidth:b!==void 0?b:Wh,miterLimit:A!==void 0?A:Gh,strokeStyle:el(l||$h)}}var P=r.getFont(),N=r.getOffsetX(),j=r.getOffsetY(),D=r.getRotateWithView(),F=r.getRotation(),U=r.getScaleArray(),$=r.getText(),Z=r.getTextAlign(),ie=r.getTextBaseline();this.textState_={font:P!==void 0?P:DN,textAlign:Z!==void 0?Z:nm,textBaseline:ie!==void 0?ie:dv},this.text_=$!==void 0?Array.isArray($)?$.reduce(function(ne,ae,ye){return ne+=ye%2?" ":ae},""):$:"",this.textOffsetX_=N!==void 0?this.pixelRatio_*N:0,this.textOffsetY_=j!==void 0?this.pixelRatio_*j:0,this.textRotateWithView_=D!==void 0?D:!1,this.textRotation_=F!==void 0?F:0,this.textScale_=[this.pixelRatio_*U[0],this.pixelRatio_*U[1]]}},e}(kN),F4e=Yir;p();var Tf={FRACTION:"fraction",PIXELS:"pixels"};p();p();p();var Nl={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};p();p();var Kir=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var r in this.cache_){var n=this.cache_[r];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},t.prototype.get=function(e,r,n){var i=j4e(e,r,n);return i in this.cache_?this.cache_[i]:null},t.prototype.set=function(e,r,n,i){var o=j4e(e,r,n);this.cache_[o]=i,++this.cacheSize_},t.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},t}();function j4e(t,e,r){var n=r?RN(r):"null";return e+":"+t+":"+n}var Sx=new Kir;p();p();var Xir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qir=function(t){Xir(e,t);function e(r,n,i,o){var l=t.call(this)||this;return l.extent=r,l.pixelRatio_=i,l.resolution=n,l.state=o,l}return e.prototype.changed=function(){this.dispatchEvent(Vt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return ir()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){ir()},e}(Xs),z4e=Qir;var Jir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dvn=function(t){Jir(e,t);function e(r,n,i,o,l,f){var d=t.call(this,r,n,i,Dn.IDLE)||this;return d.src_=o,d.image_=new Image,l!==null&&(d.image_.crossOrigin=l),d.unlisten_=null,d.state=Dn.IDLE,d.imageLoadFunction_=f,d}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=Dn.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=zo(this.extent)/this.image_.height),this.state=Dn.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==Dn.IDLE||this.state==Dn.ERROR)&&(this.state=Dn.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=iI(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(r){this.image_=r,this.resolution=zo(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(z4e);function iI(t,e,r){var n=t,i=!0,o=!1,l=!1,f=[rx(n,Vt.LOAD,function(){l=!0,o||e()})];return n.src&&fze?(o=!0,n.decode().then(function(){i&&e()}).catch(function(d){i&&(l?e():r())})):f.push(rx(n,Vt.ERROR,r)),function(){i=!1,f.forEach(sn)}}var eor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oI=null,tor=function(t){eor(e,t);function e(r,n,i,o,l,f){var d=t.call(this)||this;return d.hitDetectionImage_=null,d.image_=r||new Image,o!==null&&(d.image_.crossOrigin=o),d.canvas_={},d.color_=f,d.unlisten_=null,d.imageState_=l,d.size_=i,d.src_=n,d.tainted_,d}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===Dn.LOADED){oI||(oI=qi(1,1)),oI.drawImage(this.image_,0,0);try{oI.getImageData(0,0,1,1),this.tainted_=!1}catch(r){oI=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Vt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=Dn.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Dn.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(r){return this.replaceColor_(r),this.canvas_[r]?this.canvas_[r]:this.image_},e.prototype.getPixelRatio=function(r){return this.replaceColor_(r),this.canvas_[r]?r:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var r=this.size_[0],n=this.size_[1],i=qi(r,n);i.fillRect(0,0,r,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Dn.IDLE){this.imageState_=Dn.LOADING;try{this.image_.src=this.src_}catch(r){this.handleImageError_()}this.unlisten_=iI(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(r){if(!(!this.color_||this.canvas_[r]||this.imageState_!==Dn.LOADED)){var n=document.createElement("canvas");this.canvas_[r]=n,n.width=Math.ceil(this.image_.width*r),n.height=Math.ceil(this.image_.height*r);var i=n.getContext("2d");if(i.scale(r,r),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply",i.globalCompositeOperation==="multiply"||this.isTainted_())i.fillStyle=RN(this.color_),i.fillRect(0,0,n.width/r,n.height/r),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var o=i.getImageData(0,0,n.width,n.height),l=o.data,f=this.color_[0]/255,d=this.color_[1]/255,v=this.color_[2]/255,x=this.color_[3],b=0,A=l.length;b<A;b+=4)l[b]*=f,l[b+1]*=d,l[b+2]*=v,l[b+3]*=x;i.putImageData(o,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Xs);function U4e(t,e,r,n,i,o){var l=Sx.get(e,n,o);return l||(l=new tor(t,e,r,n,i,o),Sx.set(e,n,o,l)),l}var ror=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nor=function(t){ror(e,t);function e(r){var n=this,i=r||{},o=i.opacity!==void 0?i.opacity:1,l=i.rotation!==void 0?i.rotation:0,f=i.scale!==void 0?i.scale:1,d=i.rotateWithView!==void 0?i.rotateWithView:!1;n=t.call(this,{opacity:o,rotation:l,scale:f,displacement:i.displacement!==void 0?i.displacement:[0,0],rotateWithView:d,declutterMode:i.declutterMode})||this,n.anchor_=i.anchor!==void 0?i.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=i.anchorOrigin!==void 0?i.anchorOrigin:Nl.TOP_LEFT,n.anchorXUnits_=i.anchorXUnits!==void 0?i.anchorXUnits:Tf.FRACTION,n.anchorYUnits_=i.anchorYUnits!==void 0?i.anchorYUnits:Tf.FRACTION,n.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null;var v=i.img!==void 0?i.img:null;n.imgSize_=i.imgSize;var x=i.src;or(!(x!==void 0&&v),4),or(!v||v&&n.imgSize_,5),(x===void 0||x.length===0)&&v&&(x=v.src||tr(v)),or(x!==void 0&&x.length>0,6);var b=i.src!==void 0?Dn.IDLE:Dn.LOADED;return n.color_=i.color!==void 0?Uh(i.color):null,n.iconImage_=U4e(v,x,n.imgSize_!==void 0?n.imgSize_:null,n.crossOrigin_,b,n.color_),n.offset_=i.offset!==void 0?i.offset:[0,0],n.offsetOrigin_=i.offsetOrigin!==void 0?i.offsetOrigin:Nl.TOP_LEFT,n.origin_=null,n.size_=i.size!==void 0?i.size:null,n}return e.prototype.clone=function(){var r=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(r)?r.slice():r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},e.prototype.getAnchor=function(){var r=this.normalizedAnchor_;if(!r){r=this.anchor_;var n=this.getSize();if(this.anchorXUnits_==Tf.FRACTION||this.anchorYUnits_==Tf.FRACTION){if(!n)return null;r=this.anchor_.slice(),this.anchorXUnits_==Tf.FRACTION&&(r[0]*=n[0]),this.anchorYUnits_==Tf.FRACTION&&(r[1]*=n[1])}if(this.anchorOrigin_!=Nl.TOP_LEFT){if(!n)return null;r===this.anchor_&&(r=this.anchor_.slice()),(this.anchorOrigin_==Nl.TOP_RIGHT||this.anchorOrigin_==Nl.BOTTOM_RIGHT)&&(r[0]=-r[0]+n[0]),(this.anchorOrigin_==Nl.BOTTOM_LEFT||this.anchorOrigin_==Nl.BOTTOM_RIGHT)&&(r[1]=-r[1]+n[1])}this.normalizedAnchor_=r}var i=this.getDisplacement();return[r[0]-i[0],r[1]+i[1]]},e.prototype.setAnchor=function(r){this.anchor_=r,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(r){return this.iconImage_.getImage(r)},e.prototype.getPixelRatio=function(r){return this.iconImage_.getPixelRatio(r)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var r=this.offset_;if(this.offsetOrigin_!=Nl.TOP_LEFT){var n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;r=r.slice(),(this.offsetOrigin_==Nl.TOP_RIGHT||this.offsetOrigin_==Nl.BOTTOM_RIGHT)&&(r[0]=i[0]-n[0]-r[0]),(this.offsetOrigin_==Nl.BOTTOM_LEFT||this.offsetOrigin_==Nl.BOTTOM_RIGHT)&&(r[1]=i[1]-n[1]-r[1])}return this.origin_=r,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(r){this.iconImage_.addEventListener(Vt.CHANGE,r)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(r){this.iconImage_.removeEventListener(Vt.CHANGE,r)},e}(PN),F9=nor;p();var ior="#333",oor=function(){function t(e){var r=e||{};this.font_=r.font,this.rotation_=r.rotation,this.rotateWithView_=r.rotateWithView,this.scale_=r.scale,this.scaleArray_=Xn(r.scale!==void 0?r.scale:1),this.text_=r.text,this.textAlign_=r.textAlign,this.justify_=r.justify,this.textBaseline_=r.textBaseline,this.fill_=r.fill!==void 0?r.fill:new Dl({color:ior}),this.maxAngle_=r.maxAngle!==void 0?r.maxAngle:Math.PI/4,this.placement_=r.placement!==void 0?r.placement:qN.POINT,this.overflow_=!!r.overflow,this.stroke_=r.stroke!==void 0?r.stroke:null,this.offsetX_=r.offsetX!==void 0?r.offsetX:0,this.offsetY_=r.offsetY!==void 0?r.offsetY:0,this.backgroundFill_=r.backgroundFill?r.backgroundFill:null,this.backgroundStroke_=r.backgroundStroke?r.backgroundStroke:null,this.padding_=r.padding===void 0?null:r.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getJustify=function(){return this.justify_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(e){this.overflow_=e},t.prototype.setFont=function(e){this.font_=e},t.prototype.setMaxAngle=function(e){this.maxAngle_=e},t.prototype.setOffsetX=function(e){this.offsetX_=e},t.prototype.setOffsetY=function(e){this.offsetY_=e},t.prototype.setPlacement=function(e){this.placement_=e},t.prototype.setRotateWithView=function(e){this.rotateWithView_=e},t.prototype.setFill=function(e){this.fill_=e},t.prototype.setRotation=function(e){this.rotation_=e},t.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Xn(e!==void 0?e:1)},t.prototype.setStroke=function(e){this.stroke_=e},t.prototype.setText=function(e){this.text_=e},t.prototype.setTextAlign=function(e){this.textAlign_=e},t.prototype.setJustify=function(e){this.justify_=e},t.prototype.setTextBaseline=function(e){this.textBaseline_=e},t.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},t.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},t.prototype.setPadding=function(e){this.padding_=e},t}(),j9=oor;var Ec=.5;function B4e(t,e,r,n,i,o,l){var f=t[0]*Ec,d=t[1]*Ec,v=qi(f,d);v.imageSmoothingEnabled=!1;for(var x=v.canvas,b=new F4e(v,Ec,i,null,l),A=r.length,P=Math.floor((256*256*256-1)/A),N={},j=1;j<=A;++j){var D=r[j-1],F=D.getStyleFunction()||n;if(n){var U=F(D,o);if(U){Array.isArray(U)||(U=[U]);for(var $=j*P,Z="#"+("000000"+$.toString(16)).slice(-6),ie=0,ne=U.length;ie<ne;++ie){var ae=U[ie],ye=ae.getGeometryFunction()(D);if(!(!ye||!ki(i,ye.getExtent()))){var ge=ae.clone(),de=ge.getFill();de&&de.setColor(Z);var be=ge.getStroke();be&&(be.setColor(Z),be.setLineDash(null)),ge.setText(void 0);var Ne=ae.getImage();if(Ne&&Ne.getOpacity()!==0){var Me=Ne.getImageSize();if(!Me)continue;var ke=qi(Me[0],Me[1],void 0,{alpha:!1}),He=ke.canvas;ke.fillStyle=Z,ke.fillRect(0,0,He.width,He.height),ge.setImage(new F9({img:He,imgSize:Me,anchor:Ne.getAnchor(),anchorXUnits:Tf.PIXELS,anchorYUnits:Tf.PIXELS,offset:Ne.getOrigin(),opacity:1,size:Ne.getSize(),scale:Ne.getScale(),rotation:Ne.getRotation(),rotateWithView:Ne.getRotateWithView()}))}var Ke=ge.getZIndex()||0,Je=N[Ke];Je||(Je={},N[Ke]=Je,Je.Polygon=[],Je.Circle=[],Je.LineString=[],Je.Point=[]),Je[ye.getType().replace("Multi","")].push(ye,ge)}}}}}for(var We=Object.keys(N).map(Number).sort(Pl),j=0,lt=We.length;j<lt;++j){var Je=N[We[j]];for(var pt in Je)for(var dt=Je[pt],ie=0,ne=dt.length;ie<ne;ie+=2){b.setStyle(dt[ie+1]);for(var ze=0,Dt=e.length;ze<Dt;++ze)b.setTransform(e[ze]),b.drawGeometry(dt[ie])}}return v.getImageData(0,0,x.width,x.height)}function V4e(t,e,r){var n=[];if(r){var i=Math.floor(Math.round(t[0])*Ec),o=Math.floor(Math.round(t[1])*Ec),l=(Yn(i,0,r.width-1)+Yn(o,0,r.height-1)*r.width)*4,f=r.data[l],d=r.data[l+1],v=r.data[l+2],x=v+256*(d+256*f),b=Math.floor((256*256*256-1)/e.length);x&&x%b===0&&n.push(e[x/b-1])}return n}p();var aor=.5,G4e={Point:dor,LineString:cor,Polygon:gor,MultiPoint:mor,MultiLineString:hor,MultiPolygon:por,GeometryCollection:uor,Circle:sor};function $4e(t,e){return parseInt(tr(t),10)-parseInt(tr(e),10)}function H4e(t,e){var r=zN(t,e);return r*r}function zN(t,e){return aor*t/e}function sor(t,e,r,n,i){var o=r.getFill(),l=r.getStroke();if(o||l){var f=t.getBuilder(r.getZIndex(),"Circle");f.setFillStrokeStyle(o,l),f.drawCircle(e,n)}var d=r.getText();if(d&&d.getText()){var v=(i||t).getBuilder(r.getZIndex(),"Text");v.setTextStyle(d),v.drawText(e,n)}}function z9(t,e,r,n,i,o,l){var f=!1,d=r.getImage();if(d){var v=d.getImageState();v==Dn.LOADED||v==Dn.ERROR?d.unlistenImageChange(i):(v==Dn.IDLE&&d.load(),d.listenImageChange(i),f=!0)}return lor(t,e,r,n,o,l),f}function lor(t,e,r,n,i,o){var l=r.getGeometryFunction()(e);if(l){var f=l.simplifyTransformed(n,i),d=r.getRenderer();if(d)W4e(t,f,r,e);else{var v=G4e[f.getType()];v(t,f,r,e,o)}}}function W4e(t,e,r,n){if(e.getType()=="GeometryCollection"){for(var i=e.getGeometries(),o=0,l=i.length;o<l;++o)W4e(t,i[o],r,n);return}var f=t.getBuilder(r.getZIndex(),"Default");f.drawCustom(e,n,r.getRenderer(),r.getHitDetectionRenderer())}function uor(t,e,r,n,i){var o=e.getGeometriesArray(),l,f;for(l=0,f=o.length;l<f;++l){var d=G4e[o[l].getType()];d(t,o[l],r,n,i)}}function cor(t,e,r,n,i){var o=r.getStroke();if(o){var l=t.getBuilder(r.getZIndex(),"LineString");l.setFillStrokeStyle(null,o),l.drawLineString(e,n)}var f=r.getText();if(f&&f.getText()){var d=(i||t).getBuilder(r.getZIndex(),"Text");d.setTextStyle(f),d.drawText(e,n)}}function hor(t,e,r,n,i){var o=r.getStroke();if(o){var l=t.getBuilder(r.getZIndex(),"LineString");l.setFillStrokeStyle(null,o),l.drawMultiLineString(e,n)}var f=r.getText();if(f&&f.getText()){var d=(i||t).getBuilder(r.getZIndex(),"Text");d.setTextStyle(f),d.drawText(e,n)}}function por(t,e,r,n,i){var o=r.getFill(),l=r.getStroke();if(l||o){var f=t.getBuilder(r.getZIndex(),"Polygon");f.setFillStrokeStyle(o,l),f.drawMultiPolygon(e,n)}var d=r.getText();if(d&&d.getText()){var v=(i||t).getBuilder(r.getZIndex(),"Text");v.setTextStyle(d),v.drawText(e,n)}}function dor(t,e,r,n,i){var o=r.getImage(),l=r.getText(),f;if(o){if(o.getImageState()!=Dn.LOADED)return;var d=t;if(i){var v=o.getDeclutterMode();if(v!=="none")if(d=i,v==="obstacle"){var x=t.getBuilder(r.getZIndex(),"Image");x.setImageStyle(o,f),x.drawPoint(e,n)}else l&&l.getText()&&(f={})}var b=d.getBuilder(r.getZIndex(),"Image");b.setImageStyle(o,f),b.drawPoint(e,n)}if(l&&l.getText()){var A=t;i&&(A=i);var P=A.getBuilder(r.getZIndex(),"Text");P.setTextStyle(l,f),P.drawText(e,n)}}function mor(t,e,r,n,i){var o=r.getImage(),l=r.getText(),f;if(o){if(o.getImageState()!=Dn.LOADED)return;var d=t;if(i){var v=o.getDeclutterMode();if(v!=="none")if(d=i,v==="obstacle"){var x=t.getBuilder(r.getZIndex(),"Image");x.setImageStyle(o,f),x.drawMultiPoint(e,n)}else l&&l.getText()&&(f={})}var b=d.getBuilder(r.getZIndex(),"Image");b.setImageStyle(o,f),b.drawMultiPoint(e,n)}if(l&&l.getText()){var A=t;i&&(A=i);var P=A.getBuilder(r.getZIndex(),"Text");P.setTextStyle(l,f),P.drawText(e,n)}}function gor(t,e,r,n,i){var o=r.getFill(),l=r.getStroke();if(o||l){var f=t.getBuilder(r.getZIndex(),"Polygon");f.setFillStrokeStyle(o,l),f.drawPolygon(e,n)}var d=r.getText();if(d&&d.getText()){var v=(i||t).getBuilder(r.getZIndex(),"Text");v.setTextStyle(d),v.drawText(e,n)}}var vor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yor=function(t){vor(e,t);function e(r){var n=t.call(this,r)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=Bi(),n.wrappedRenderedExtent_=Bi(),n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n.compositionContext_=null,n.opacity_=1,n}return e.prototype.renderWorlds=function(r,n,i){var o=n.extent,l=n.viewState,f=l.center,d=l.resolution,v=l.projection,x=l.rotation,b=v.getExtent(),A=this.getLayer().getSource(),P=n.pixelRatio,N=n.viewHints,j=!(N[Bo.ANIMATING]||N[Bo.INTERACTING]),D=this.compositionContext_,F=Math.round(n.size[0]*P),U=Math.round(n.size[1]*P),$=A.getWrapX()&&v.canWrapX(),Z=$?vn(b):null,ie=$?Math.ceil((o[2]-b[2])/Z)+1:1,ne=$?Math.floor((o[0]-b[0])/Z):0;do{var ae=this.getRenderTransform(f,d,x,P,F,U,ne*Z);r.execute(D,1,ae,x,j,void 0,i)}while(++ne<ie)},e.prototype.setupCompositionContext_=function(){if(this.opacity_!==1){var r=qi(this.context.canvas.width,this.context.canvas.height,D9);this.compositionContext_=r}else this.compositionContext_=this.context},e.prototype.releaseCompositionContext_=function(){if(this.opacity_!==1){var r=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=r,ON(this.compositionContext_),D9.push(this.compositionContext_.canvas),this.compositionContext_=null}},e.prototype.renderDeclutter=function(r){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,r,r.declutterTree),this.releaseCompositionContext_())},e.prototype.renderFrame=function(r,n){var i=r.pixelRatio,o=r.layerStatesArray[r.layerIndex];dze(this.pixelTransform,1/i,1/i),ix(this.inversePixelTransform,this.pixelTransform);var l=oN(this.pixelTransform);this.useContainer(n,l,this.getBackground(r));var f=this.context,d=f.canvas,v=this.replayGroup_,x=this.declutterExecutorGroup;if((!v||v.isEmpty())&&(!x||x.isEmpty()))return null;var b=Math.round(r.size[0]*i),A=Math.round(r.size[1]*i);d.width!=b||d.height!=A?(d.width=b,d.height=A,d.style.transform!==l&&(d.style.transform=l)):this.containerReused||f.clearRect(0,0,b,A),this.preRender(f,r);var P=r.viewState,N=P.projection;this.opacity_=o.opacity,this.setupCompositionContext_();var j=!1,D=!0;if(o.extent&&this.clipping){var F=Ha(o.extent,N);D=ki(F,r.extent),j=D&&!Fh(F,r.extent),j&&this.clipUnrotated(this.compositionContext_,r,F)}return D&&this.renderWorlds(v,r),j&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(f,r),this.renderedRotation_!==P.rotation&&(this.renderedRotation_=P.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(r){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];Hn(this.pixelTransform,i);var o=this.renderedCenter_,l=this.renderedResolution_,f=this.renderedRotation_,d=this.renderedProjection_,v=this.wrappedRenderedExtent_,x=this.getLayer(),b=[],A=i[0]*Ec,P=i[1]*Ec;b.push(this.getRenderTransform(o,l,f,Ec,A,P,0).slice());var N=x.getSource(),j=d.getExtent();if(N.getWrapX()&&d.canWrapX()&&!Fh(j,v)){for(var D=v[0],F=vn(j),U=0,$=void 0;D<j[0];)--U,$=F*U,b.push(this.getRenderTransform(o,l,f,Ec,A,P,$).slice()),D+=F;for(U=0,D=v[2];D>j[2];)++U,$=F*U,b.push(this.getRenderTransform(o,l,f,Ec,A,P,$).slice()),D-=F}this.hitDetectionImageData_=B4e(i,b,this.renderedFeatures_,x.getStyleFunction(),v,l,f)}n(V4e(r,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(r,n,i,o,l){var f=this;if(this.replayGroup_){var d=n.viewState.resolution,v=n.viewState.rotation,x=this.getLayer(),b={},A=function(j,D,F){var U=tr(j),$=b[U];if($){if($!==!0&&F<$.distanceSq){if(F===0)return b[U]=!0,l.splice(l.lastIndexOf($),1),o(j,x,D);$.geometry=D,$.distanceSq=F}}else{if(F===0)return b[U]=!0,o(j,x,D);l.push(b[U]={feature:j,layer:x,geometry:D,distanceSq:F,callback:o})}},P,N=[this.replayGroup_];return this.declutterExecutorGroup&&N.push(this.declutterExecutorGroup),N.some(function(j){return P=j.forEachFeatureAtCoordinate(r,d,v,i,A,j===f.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(D){return D.value}):null)}),P}},e.prototype.handleFontsChanged=function(){var r=this.getLayer();r.getVisible()&&this.replayGroup_&&r.changed()},e.prototype.handleStyleImageChange_=function(r){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(r){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var o=r.viewHints[Bo.ANIMATING],l=r.viewHints[Bo.INTERACTING],f=n.getUpdateWhileAnimating(),d=n.getUpdateWhileInteracting();if(this.ready&&!f&&o||!d&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var v=r.extent,x=r.viewState,b=x.projection,A=x.resolution,P=r.pixelRatio,N=n.getRevision(),j=n.getRenderBuffer(),D=n.getRenderOrder();D===void 0&&(D=$4e);var F=x.center.slice(),U=vc(v,j*A),$=U.slice(),Z=[U.slice()],ie=b.getExtent();if(i.getWrapX()&&b.canWrapX()&&!Fh(ie,r.extent)){var ne=vn(ie),ae=Math.max(vn(U)/2,ne);U[0]=ie[0]-ae,U[2]=ie[2]+ae,dN(F,b);var ye=ZY(Z[0],b);ye[0]<ie[0]&&ye[2]<ie[2]?Z.push([ye[0]+ne,ye[1],ye[2]+ne,ye[3]]):ye[0]>ie[0]&&ye[2]>ie[2]&&Z.push([ye[0]-ne,ye[1],ye[2]-ne,ye[3]])}if(this.ready&&this.renderedResolution_==A&&this.renderedRevision_==N&&this.renderedRenderOrder_==D&&Fh(this.wrappedRenderedExtent_,U))return Ba(this.renderedExtent_,$)||(this.hitDetectionImageData_=null,this.renderedExtent_=$),this.renderedCenter_=F,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var ge=new L9(zN(A,P),U,A,P),de;this.getLayer().getDeclutter()&&(de=new L9(zN(A,P),U,A,P));var be=xu(),Ne;if(be){for(var Me=0,ke=Z.length;Me<ke;++Me){var He=Z[Me],Ke=Jd(He,b);i.loadFeatures(Ke,jze(A,b),be)}Ne=UT(be,b)}else for(var Me=0,ke=Z.length;Me<ke;++Me)i.loadFeatures(Z[Me],A,b);var Je=H4e(A,P),We=!0,lt=function(Ot){var Ue,nt=Ot.getStyleFunction()||n.getStyleFunction();if(nt&&(Ue=nt(Ot,A)),Ue){var Ze=this.renderFeature(Ot,Je,Ue,ge,Ne,de);We=We&&!Ze}}.bind(this),pt=Jd(U,b),dt=i.getFeaturesInExtent(pt);D&&dt.sort(D);for(var Me=0,ke=dt.length;Me<ke;++Me)lt(dt[Me]);this.renderedFeatures_=dt,this.ready=We;var ze=ge.finish(),Dt=new q9(U,A,P,i.getOverlaps(),ze,n.getRenderBuffer());return de&&(this.declutterExecutorGroup=new q9(U,A,P,i.getOverlaps(),de.finish(),n.getRenderBuffer())),this.renderedResolution_=A,this.renderedRevision_=N,this.renderedRenderOrder_=D,this.renderedExtent_=$,this.wrappedRenderedExtent_=U,this.renderedCenter_=F,this.renderedProjection_=b,this.replayGroup_=Dt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(r,n,i,o,l,f){if(!i)return!1;var d=!1;if(Array.isArray(i))for(var v=0,x=i.length;v<x;++v)d=z9(o,r,i[v],n,this.boundHandleStyleImageChange_,l,f)||d;else d=z9(o,r,i,n,this.boundHandleStyleImageChange_,l,f);return d},e}(jN),Z4e=yor;var _or=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xor=function(t){_or(e,t);function e(r){return t.call(this,r)||this}return e.prototype.createRenderer=function(){return new Z4e(this)},e}(C4e),Su=xor;p();p();var Y4e=Fe(_9(),1);var bor=function(){function t(e){this.rbush_=new Y4e.default(e),this.items_={}}return t.prototype.insert=function(e,r){var n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:r};this.rbush_.insert(n),this.items_[tr(r)]=n},t.prototype.load=function(e,r){for(var n=new Array(r.length),i=0,o=r.length;i<o;i++){var l=e[i],f=r[i],d={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:f};n[i]=d,this.items_[tr(f)]=d}this.rbush_.load(n)},t.prototype.remove=function(e){var r=tr(e),n=this.items_[r];return delete this.items_[r],this.rbush_.remove(n)!==null},t.prototype.update=function(e,r){var n=this.items_[tr(r)],i=[n.minX,n.minY,n.maxX,n.maxY];jh(i,e)||(this.remove(r),this.insert(e,r))},t.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(r){return r.value})},t.prototype.getInExtent=function(e){var r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},n=this.rbush_.search(r);return n.map(function(i){return i.value})},t.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},t.prototype.forEachInExtent=function(e,r){return this.forEach_(this.getInExtent(e),r)},t.prototype.forEach_=function(e,r){for(var n,i=0,o=e.length;i<o;i++)if(n=r(e[i]),n)return n;return n},t.prototype.isEmpty=function(){return mc(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(e){var r=this.rbush_.toJSON();return $a(r.minX,r.minY,r.maxX,r.maxY,e)},t.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var r in e.items_)this.items_[r]=e.items_[r]},t}(),aI=bor;p();var wor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eor=function(t){wor(e,t);function e(r){var n=t.call(this)||this;n.projection=ii(r.projection),n.attributions_=K4e(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(o,l){i.viewResolver=o,i.viewRejector=l}),n}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return ir()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(r){this.attributions_=K4e(r),this.changed()},e.prototype.setState=function(r){this.state_=r,this.changed()},e}(So);function K4e(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}var UN=Eor;p();var ys={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};p();function X4e(t,e){return[[-1/0,-1/0,1/0,1/0]]}p();var Sor=!1;function Tor(t,e,r,n,i,o,l){var f=new XMLHttpRequest;f.open("GET",typeof t=="function"?t(r,n,i):t,!0),e.getType()=="arraybuffer"&&(f.responseType="arraybuffer"),f.withCredentials=Sor,f.onload=function(d){if(!f.status||f.status>=200&&f.status<300){var v=e.getType(),x=void 0;v=="json"||v=="text"?x=f.responseText:v=="xml"?(x=f.responseXML,x||(x=new DOMParser().parseFromString(f.responseText,"application/xml"))):v=="arraybuffer"&&(x=f.response),x?o(e.readFeatures(x,{extent:r,featureProjection:i}),e.readProjection(x)):l()}else l()},f.onerror=l,f.send()}function U9(t,e){return function(r,n,i,o,l){var f=this;Tor(t,e,r,n,i,function(d,v){f.addFeatures(d),o!==void 0&&o(d)},l||Rl)}}var Q4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sm=function(t){Q4e(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.feature=n,o.features=i,o}return e}(Ni);var Ior=function(t){Q4e(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{attributions:i.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:i.wrapX!==void 0?i.wrapX:!0})||this,n.on,n.once,n.un,n.loader_=Rl,n.format_=i.format,n.overlaps_=i.overlaps===void 0?!0:i.overlaps,n.url_=i.url,i.loader!==void 0?n.loader_=i.loader:n.url_!==void 0&&(or(n.format_,7),n.loader_=U9(n.url_,n.format_)),n.strategy_=i.strategy!==void 0?i.strategy:X4e;var o=i.useSpatialIndex!==void 0?i.useSpatialIndex:!0;n.featuresRtree_=o?new aI:null,n.loadedExtentsRtree_=new aI,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null;var l,f;return Array.isArray(i.features)?f=i.features:i.features&&(l=i.features,f=l.getArray()),!o&&l===void 0&&(l=new ni(f)),f!==void 0&&n.addFeaturesInternal(f),l!==void 0&&n.bindFeaturesCollection_(l),n}return e.prototype.addFeature=function(r){this.addFeatureInternal(r),this.changed()},e.prototype.addFeatureInternal=function(r){var n=tr(r);if(!this.addToIndex_(n,r)){this.featuresCollection_&&this.featuresCollection_.remove(r);return}this.setupChangeEvents_(n,r);var i=r.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,r)}else this.nullGeometryFeatures_[n]=r;this.dispatchEvent(new sm(ys.ADDFEATURE,r))},e.prototype.setupChangeEvents_=function(r,n){this.featureChangeKeys_[r]=[qr(n,Vt.CHANGE,this.handleFeatureChange_,this),qr(n,dc.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(r,n){var i=!0,o=n.getId();return o!==void 0&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=n),i&&(or(!(r in this.uidIndex_),30),this.uidIndex_[r]=n),i},e.prototype.addFeatures=function(r){this.addFeaturesInternal(r),this.changed()},e.prototype.addFeaturesInternal=function(r){for(var n=[],i=[],o=[],l=0,f=r.length;l<f;l++){var d=r[l],v=tr(d);this.addToIndex_(v,d)&&i.push(d)}for(var l=0,x=i.length;l<x;l++){var d=i[l],v=tr(d);this.setupChangeEvents_(v,d);var b=d.getGeometry();if(b){var A=b.getExtent();n.push(A),o.push(d)}else this.nullGeometryFeatures_[v]=d}if(this.featuresRtree_&&this.featuresRtree_.load(n,o),this.hasListener(ys.ADDFEATURE))for(var l=0,P=i.length;l<P;l++)this.dispatchEvent(new sm(ys.ADDFEATURE,i[l]))},e.prototype.bindFeaturesCollection_=function(r){var n=!1;this.addEventListener(ys.ADDFEATURE,function(i){n||(n=!0,r.push(i.feature),n=!1)}),this.addEventListener(ys.REMOVEFEATURE,function(i){n||(n=!0,r.remove(i.feature),n=!1)}),r.addEventListener(vi.ADD,function(i){n||(n=!0,this.addFeature(i.element),n=!1)}.bind(this)),r.addEventListener(vi.REMOVE,function(i){n||(n=!0,this.removeFeature(i.element),n=!1)}.bind(this)),this.featuresCollection_=r},e.prototype.clear=function(r){if(r){for(var n in this.featureChangeKeys_){var i=this.featureChangeKeys_[n];i.forEach(sn)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var o=function(d){this.removeFeatureInternal(d)}.bind(this);this.featuresRtree_.forEach(o);for(var l in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[l])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var f=new sm(ys.CLEAR);this.dispatchEvent(f),this.changed()},e.prototype.forEachFeature=function(r){if(this.featuresRtree_)return this.featuresRtree_.forEach(r);this.featuresCollection_&&this.featuresCollection_.forEach(r)},e.prototype.forEachFeatureAtCoordinateDirect=function(r,n){var i=[r[0],r[1],r[0],r[1]];return this.forEachFeatureInExtent(i,function(o){var l=o.getGeometry();if(l.intersectsCoordinate(r))return n(o)})},e.prototype.forEachFeatureInExtent=function(r,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(r,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},e.prototype.forEachFeatureIntersectingExtent=function(r,n){return this.forEachFeatureInExtent(r,function(i){var o=i.getGeometry();if(o.intersectsExtent(r)){var l=n(i);if(l)return l}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var r;return this.featuresCollection_?r=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(r=this.featuresRtree_.getAll(),mc(this.nullGeometryFeatures_)||ra(r,QD(this.nullGeometryFeatures_))),r},e.prototype.getFeaturesAtCoordinate=function(r){var n=[];return this.forEachFeatureAtCoordinateDirect(r,function(i){n.push(i)}),n},e.prototype.getFeaturesInExtent=function(r,n){var i=this;if(this.featuresRtree_){var o=n&&n.canWrapX()&&this.getWrapX();if(!o)return this.featuresRtree_.getInExtent(r);var l=xze(r,n);return[].concat.apply([],l.map(function(f){return i.featuresRtree_.getInExtent(f)}))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(r,n){var i=r[0],o=r[1],l=null,f=[NaN,NaN],d=1/0,v=[-1/0,-1/0,1/0,1/0],x=n||ms;return this.featuresRtree_.forEachInExtent(v,function(b){if(x(b)){var A=b.getGeometry(),P=d;if(d=A.closestPointXY(i,o,f,d),d<P){l=b;var N=Math.sqrt(d);v[0]=i-N,v[1]=o-N,v[2]=i+N,v[3]=o+N}}}),l},e.prototype.getExtent=function(r){return this.featuresRtree_.getExtent(r)},e.prototype.getFeatureById=function(r){var n=this.idIndex_[r.toString()];return n!==void 0?n:null},e.prototype.getFeatureByUid=function(r){var n=this.uidIndex_[r];return n!==void 0?n:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(r){var n=r.target,i=tr(n),o=n.getGeometry();if(!o)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{var l=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(l,n)):this.featuresRtree_&&this.featuresRtree_.update(l,n)}var f=n.getId();if(f!==void 0){var d=f.toString();this.idIndex_[d]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[d]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new sm(ys.CHANGEFEATURE,n))},e.prototype.hasFeature=function(r){var n=r.getId();return n!==void 0?n in this.idIndex_:tr(r)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&mc(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0},e.prototype.loadFeatures=function(r,n,i){for(var o=this.loadedExtentsRtree_,l=this.strategy_(r,n,i),f=function(b,A){var P=l[b],N=o.forEachInExtent(P,function(j){return Fh(j.extent,P)});N||(++d.loadingExtentsCount_,d.dispatchEvent(new sm(ys.FEATURESLOADSTART)),d.loader_.call(d,P,n,i,function(j){--this.loadingExtentsCount_,this.dispatchEvent(new sm(ys.FEATURESLOADEND,void 0,j))}.bind(d),function(){--this.loadingExtentsCount_,this.dispatchEvent(new sm(ys.FEATURESLOADERROR))}.bind(d)),o.insert(P,{extent:P.slice()}))},d=this,v=0,x=l.length;v<x;++v)f(v,x);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(r){var n=this.loadedExtentsRtree_,i;n.forEachInExtent(r,function(o){if(jh(o.extent,r))return i=o,!0}),i&&n.remove(i)},e.prototype.removeFeature=function(r){if(r){var n=tr(r);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(r);var i=this.removeFeatureInternal(r);i&&this.changed()}},e.prototype.removeFeatureInternal=function(r){var n=tr(r),i=this.featureChangeKeys_[n];if(i){i.forEach(sn),delete this.featureChangeKeys_[n];var o=r.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[n],this.dispatchEvent(new sm(ys.REMOVEFEATURE,r)),r}},e.prototype.removeFromIdIndex_=function(r){var n=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===r){delete this.idIndex_[i],n=!0;break}return n},e.prototype.setLoader=function(r){this.loader_=r},e.prototype.setUrl=function(r){or(this.format_,7),this.url_=r,this.setLoader(U9(r,this.format_))},e}(UN),If=Ior;var Y9=Fe(TL(),1);p();var B9=class{constructor(){this.listeners_=[]}on(e,r){this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push(r)}off(e,r){let n=this.listeners_[e];if(n){let i=n.indexOf(r);i>-1&&this.listeners_[e].slice(i,1)}}dispatch(e,r){let n=this.listeners_[e];if(n)for(let i=0,o=n.length;i<o;++i)n[i].call({},r)}},J4e=B9;p();function eUe(){return new NN({fill:new Dl({color:"rgba(255, 255, 255, 0.2)"}),stroke:new wc({color:"#ffcc33",width:2}),image:new mv({radius:7,fill:new Dl({color:"#ffcc33"})})})}function lm(t){let r=2*Math.PI*8/6;return new NN({image:new mv({radius:8,fill:new Dl({color:"rgba(255,255,255,0.6)"}),stroke:new wc({color:"rgba(49,159,211,0.5)",width:15,lineDash:[0,r,r,r,r,r,r]})}),text:Wg(t)?new j9({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:t,fill:new Dl({color:"#aa3300"}),stroke:new wc({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}function BN(t){let r=2*Math.PI*8/6;return new NN({image:new mv({radius:8,fill:new Dl({color:"rgba(255,128,0,0.6)"}),stroke:new wc({color:"rgba(240,0,0,0.5)",width:15,lineDash:[0,r,r,r,r,r,r]})}),text:Wg(t)?new j9({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:t,fill:new Dl({color:"#aa3300"}),stroke:new wc({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}p();var cI=Fe(TL(),1);p();p();var Aor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tUe=function(t){Aor(e,t);function e(r,n,i){var o=t.call(this)||this;if(i!==void 0&&n===void 0)o.setFlatCoordinates(i,r);else{var l=n||0;o.setCenterAndRadius(r,l,i)}return o}return e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),void 0,this.layout);return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){var l=this.flatCoordinates,f=r-l[0],d=n-l[1],v=f*f+d*d;if(v<o){if(v===0)for(var x=0;x<this.stride;++x)i[x]=l[x];else{var b=this.getRadius()/Math.sqrt(v);i[0]=l[0]+b*f,i[1]=l[1]+b*d;for(var x=2;x<this.stride;++x)i[x]=l[x]}return i.length=this.stride,v}else return o},e.prototype.containsXY=function(r,n){var i=this.flatCoordinates,o=r-i[0],l=n-i[1];return o*o+l*l<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(r){var n=this.flatCoordinates,i=n[this.stride]-n[0];return $a(n[0]-i,n[1]-i,n[0]+i,n[1]+i,r)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var r=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return r*r+n*n},e.prototype.getType=function(){return"Circle"},e.prototype.intersectsExtent=function(r){var n=this.getExtent();if(ki(r,n)){var i=this.getCenter();return r[0]<=i[0]&&r[2]>=i[0]||r[1]<=i[1]&&r[3]>=i[1]?!0:ax(r,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(r){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],o=r.slice();o[n]=o[0]+i;for(var l=1;l<n;++l)o[n+l]=r[l];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(r,n,i){this.setLayout(i,r,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,l=_N(o,0,r,this.stride);o[l++]=o[0]+n;for(var f=1,d=this.stride;f<d;++f)o[l++]=o[f];o.length=l,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(r,n){},e.prototype.setRadius=function(r){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+r,this.changed()},e.prototype.rotate=function(r,n){var i=this.getCenter(),o=this.getStride();this.setCenter(mx(i,0,i.length,o,r,n,i)),this.changed()},e.prototype.translate=function(r,n){var i=this.getCenter(),o=this.getStride();this.setCenter(gN(i,0,i.length,o,r,n,i)),this.changed()},e}(Wa);tUe.prototype.transform;var rUe=tUe;p();var sI={ACTIVE:"active"};p();p();var Mor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cor=function(t){Mor(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.map=n,o.frameState=i!==void 0?i:null,o}return e}(Ni),um=Cor;var Por=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ror=function(t){Por(e,t);function e(r,n,i,o,l,f){var d=t.call(this,r,n,l)||this;return d.originalEvent=i,d.pixel_=null,d.coordinate_=null,d.dragging=o!==void 0?o:!1,d.activePointers=f,d}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(um),Tu=Ror;p();var Qr={SINGLECLICK:"singleclick",CLICK:Vt.CLICK,DBLCLICK:Vt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};p();p();p();function V9(t){return Math.pow(t,3)}function Iu(t){return 1-V9(1-t)}function nUe(t){return 3*t*t-2*t*t*t}function iUe(t){return t}var Oor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lor=function(t){Oor(e,t);function e(r){var n=t.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return e.prototype.getActive=function(){return this.get(sI.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(r){return!0},e.prototype.setActive=function(r){this.set(sI.ACTIVE,r)},e.prototype.setMap=function(r){this.map_=r},e}(So);function oUe(t,e,r){var n=t.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:r!==void 0?r:250,easing:iUe,center:t.getConstrainedCenter(i)})}}function Tx(t,e,r,n){var i=t.getZoom();if(i!==void 0){var o=t.getConstrainedZoom(i+e),l=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:l,anchor:r,duration:n!==void 0?n:250,easing:Iu})}}var Au=Lor;var Dor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nor=function(t){Dor(e,t);function e(r){var n=this,i=r||{};return n=t.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(r){return!1},e.prototype.handleDragEvent=function(r){},e.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==Qr.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==Qr.POINTERUP){var i=this.handleUpEvent(r);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(r.type==Qr.POINTERDOWN){var o=this.handleDownEvent(r);this.handlingDownUpSequence=o,n=this.stopDown(o)}else r.type==Qr.POINTERMOVE&&this.handleMoveEvent(r);return!n},e.prototype.handleMoveEvent=function(r){},e.prototype.handleUpEvent=function(r){return!1},e.prototype.stopDown=function(r){return r},e.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},e}(Au);function Ix(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return[r/e,n/e]}var rl=Nor;p();function lI(t){var e=arguments;return function(r){for(var n=!0,i=0,o=e.length;i<o&&(n=n&&e[i](r),!!n);++i);return n}}var aUe=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},sUe=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},kor=function(t){var e=t.map.getTargetElement(),r=t.map.getOwnerDocument().activeElement;return e.contains(r)},VN=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?kor(t):!0},Ax=ms;var GN=function(t){var e=t.originalEvent;return e.button==0&&!(uze&&cze&&e.ctrlKey)},G9=gu;var Mx=function(t){return t.type==Qr.SINGLECLICK};var Cx=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var cm=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$N=function(t){var e=t.originalEvent,r=e.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!e.target.isContentEditable},HN=function(t){var e=t.originalEvent;return or(e!==void 0,56),e.pointerType=="mouse"};var WN=function(t){var e=t.originalEvent;return or(e!==void 0,56),e.isPrimary&&e.button===0};var lUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),An={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},ZN={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},YN=function(t){lUe(e,t);function e(r,n){var i=t.call(this,r)||this;return i.feature=n,i}return e}(Ni);var qor=function(t){lUe(e,t);function e(r){var n=this,i=r;i.stopDown||(i.stopDown=gu),n=t.call(this,i)||this,n.on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=r.source?r.source:null,n.features_=r.features?r.features:null,n.snapTolerance_=r.snapTolerance?r.snapTolerance:12,n.type_=r.type,n.mode_=jor(n.type_),n.stopClick_=!!r.stopClick,n.minPoints_=r.minPoints?r.minPoints:n.mode_===An.POLYGON?3:2,n.maxPoints_=n.mode_===An.CIRCLE?2:r.maxPoints?r.maxPoints:1/0,n.finishCondition_=r.finishCondition?r.finishCondition:ms,n.geometryLayout_=r.geometryLayout?r.geometryLayout:Kn.XY;var o=r.geometryFunction;if(!o){var l=n.mode_;if(l===An.CIRCLE)o=function(d,v,x){var b=v||new rUe([NaN,NaN]),A=Ii(d[0],x),P=Xd(A,Ii(d[d.length-1],x));b.setCenterAndRadius(A,Math.sqrt(P),this.geometryLayout_);var N=xu();return N&&b.transform(x,N),b};else{var f;l===An.POINT?f=Za:l===An.LINE_STRING?f=zh:l===An.POLYGON&&(f=bc),o=function(d,v,x){return v?l===An.POLYGON?d[0].length?v.setCoordinates([d[0].concat([d[0][0]])],this.geometryLayout_):v.setCoordinates([],this.geometryLayout_):v.setCoordinates(d,this.geometryLayout_):v=new f(d,this.geometryLayout_),v}}}return n.geometryFunction_=o,n.dragVertexDelay_=r.dragVertexDelay!==void 0?r.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=r.clickTolerance?r.clickTolerance*r.clickTolerance:36,n.overlay_=new Su({source:new If({useSpatialIndex:!1,wrapX:r.wrapX?r.wrapX:!1}),style:r.style?r.style:For(),updateWhileInteracting:!0}),n.geometryName_=r.geometryName,n.condition_=r.condition?r.condition:Cx,n.freehandCondition_,r.freehand?n.freehandCondition_=Ax:n.freehandCondition_=r.freehandCondition?r.freehandCondition:cm,n.addChangeListener(sI.ACTIVE,n.updateState_),n}return e.prototype.setMap=function(r){t.prototype.setMap.call(this,r),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(r){r.originalEvent.type===Vt.CONTEXTMENU&&r.originalEvent.preventDefault(),this.freehand_=this.mode_!==An.POINT&&this.freehandCondition_(r);var n=r.type===Qr.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&r.type===Qr.POINTERDRAG){var o=Date.now();o-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=r.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&r.type===Qr.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(r.coordinate),i=!1):this.freehand_&&r.type===Qr.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=r.type===Qr.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(r),this.shouldHandle_&&r.originalEvent.preventDefault()):(r.originalEvent.pointerType==="mouse"||r.type===Qr.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(r)):r.type===Qr.DBLCLICK&&(i=!1),t.prototype.handleEvent.call(this,r)&&i},e.prototype.handleDownEvent=function(r){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=r.pixel,this.finishCoordinate_||this.startDrawing_(r.coordinate),!0):this.condition_(r)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Tu(Qr.POINTERMOVE,r.map,r.originalEvent,!1,r.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=r.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(r){var n=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(r),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(r.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===An.POINT)&&(this.atFinish_(r.pixel)?this.finishCondition_(r)&&this.finishDrawing():this.addToDrawing_(r.coordinate)),n=!1}else this.freehand_&&this.abortDrawing();return!n&&this.stopClick_&&r.preventDefault(),n},e.prototype.handlePointerMove_=function(r){if(this.pointerType_=r.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var n=this.downPx_,i=r.pixel,o=n[0]-i[0],l=n[1]-i[1],f=o*o+l*l;if(this.shouldHandle_=this.freehand_?f>this.squaredClickTolerance_:f<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(r.coordinate):this.createOrUpdateSketchPoint_(r.coordinate.slice())},e.prototype.atFinish_=function(r){var n=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_],l=this.mode_;if(l===An.POINT)n=!0;else if(l===An.CIRCLE)n=this.sketchCoords_.length===2;else if(l===An.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(l===An.POLYGON){var f=this.sketchCoords_;i=f[0].length>this.minPoints_,o=[f[0][0],f[0][f[0].length-2]]}if(i)for(var d=this.getMap(),v=0,x=o.length;v<x;v++){var b=o[v],A=d.getPixelFromCoordinate(b),P=r[0]-A[0],N=r[1]-A[1],j=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(P*P+N*N)<=j,n){this.finishCoordinate_=b;break}}}return n},e.prototype.createOrUpdateSketchPoint_=function(r){if(!this.sketchPoint_)this.sketchPoint_=new Ol(new Za(r)),this.updateSketchFeatures_();else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(r)}},e.prototype.createOrUpdateCustomSketchLine_=function(r){this.sketchLine_||(this.sketchLine_=new Ol);var n=r.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new zh(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(i))},e.prototype.startDrawing_=function(r){for(var n=this.getMap().getView().getProjection(),i=BT(this.geometryLayout_);r.length<i;)r.push(0);this.finishCoordinate_=r,this.mode_===An.POINT?this.sketchCoords_=r.slice():this.mode_===An.POLYGON?(this.sketchCoords_=[[r.slice(),r.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[r.slice(),r.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ol(new zh(this.sketchLineCoords_)));var o=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new Ol,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new YN(ZN.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(r){for(var n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),l=BT(this.geometryLayout_),f,d;r.length<l;)r.push(0);if(this.mode_===An.POINT?d=this.sketchCoords_:this.mode_===An.POLYGON?(f=this.sketchCoords_[0],d=f[f.length-1],this.atFinish_(n.getPixelFromCoordinate(r))&&(r=this.finishCoordinate_.slice())):(f=this.sketchCoords_,d=f[f.length-1]),d[0]=r[0],d[1]=r[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_){var v=this.sketchPoint_.getGeometry();v.setCoordinates(r)}if(i.getType()==="Polygon"&&this.mode_!==An.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var x=this.sketchLine_.getGeometry();x.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(r){var n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o,l,f=this.mode_;f===An.LINE_STRING||f===An.CIRCLE?(this.finishCoordinate_=r.slice(),l=this.sketchCoords_,l.length>=this.maxPoints_&&(this.freehand_?l.pop():o=!0),l.push(r.slice()),this.geometryFunction_(l,n,i)):f===An.POLYGON&&(l=this.sketchCoords_[0],l.length>=this.maxPoints_&&(this.freehand_?l.pop():o=!0),l.push(r.slice()),o&&(this.finishCoordinate_=l[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(r.slice()),this.updateSketchFeatures_(),o&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var r=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i,o=this.mode_;if(o===An.LINE_STRING||o===An.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var l=this.finishCoordinate_.slice();i[i.length-1]=l,this.createOrUpdateSketchPoint_(l)}this.geometryFunction_(i,r,n),r.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(r)}else if(o===An.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var f=this.sketchLine_.getGeometry();if(i.length>=2){var l=i[i.length-2].slice();i[i.length-1]=l,this.createOrUpdateSketchPoint_(l)}f.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,r,n)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var r=this.abortDrawing_();if(r){var n=this.sketchCoords_,i=r.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===An.LINE_STRING?(n.pop(),this.geometryFunction_(n,i,o)):this.mode_===An.POLYGON&&(n[0].pop(),this.geometryFunction_(n,i,o),n=i.getCoordinates()),this.type_==="MultiPoint"?r.setGeometry(new gx([n])):this.type_==="MultiLineString"?r.setGeometry(new SN([n])):this.type_==="MultiPolygon"&&r.setGeometry(new AN([n])),this.dispatchEvent(new YN(ZN.DRAWEND,r)),this.features_&&this.features_.push(r),this.source_&&this.source_.addFeature(r)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var r=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),r},e.prototype.abortDrawing=function(){var r=this.abortDrawing_();r&&this.dispatchEvent(new YN(ZN.DRAWABORT,r))},e.prototype.appendCoordinates=function(r){var n=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(r[0]);var o;if(n===An.LINE_STRING||n===An.CIRCLE)o=this.sketchCoords_;else if(n===An.POLYGON)o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&o.shift(),o.pop();for(var l=0;l<r.length;l++)this.addToDrawing_(r[l]);var f=r[r.length-1];this.addToDrawing_(f),this.modifyDrawing_(f)},e.prototype.extend=function(r){var n=r.getGeometry(),i=n;this.sketchFeature_=r,this.sketchCoords_=i.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new Ol(new Za(o)),this.updateSketchFeatures_(),this.dispatchEvent(new YN(ZN.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var r=[];this.sketchFeature_&&r.push(this.sketchFeature_),this.sketchLine_&&r.push(this.sketchLine_),this.sketchPoint_&&r.push(this.sketchPoint_);var n=this.overlay_.getSource();n.clear(!0),n.addFeatures(r)},e.prototype.updateState_=function(){var r=this.getMap(),n=this.getActive();(!r||!n)&&this.abortDrawing(),this.overlay_.setMap(n?r:null)},e}(rl);function For(){var t=xx();return function(e,r){return t[e.getGeometry().getType()]}}function jor(t){switch(t){case"Point":case"MultiPoint":return An.POINT;case"LineString":case"MultiLineString":return An.LINE_STRING;case"Polygon":case"MultiPolygon":return An.POLYGON;case"Circle":return An.CIRCLE;default:throw new Error("Invalid type: "+t)}}var KN=qor;p();var pUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uUe=0,uI=1,cUe=[0,0,0,0],Px=[],$9={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},H9=function(t){pUe(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.features=n,o.mapBrowserEvent=i,o}return e}(Ni);var zor=function(t){pUe(e,t);function e(r){var n=t.call(this,r)||this;n.on,n.once,n.un,n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(n),n.condition_=r.condition?r.condition:WN,n.defaultDeleteCondition_=function(o){return aUe(o)&&Mx(o)},n.deleteCondition_=r.deleteCondition?r.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=r.insertVertexCondition?r.insertVertexCondition:Ax,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.featuresBeingModified_=null,n.rBush_=new aI,n.pixelTolerance_=r.pixelTolerance!==void 0?r.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new Su({source:new If({useSpatialIndex:!1,wrapX:!!r.wrapX}),style:r.style?r.style:Bor(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n)},n.source_=null,n.hitDetection_=null;var i;if(r.features?i=r.features:r.source&&(n.source_=r.source,i=new ni(n.source_.getFeatures()),n.source_.addEventListener(ys.ADDFEATURE,n.handleSourceAdd_.bind(n)),n.source_.addEventListener(ys.REMOVEFEATURE,n.handleSourceRemove_.bind(n))),!i)throw new Error("The modify interaction requires features, a source or a layer");return r.hitDetection&&(n.hitDetection_=r.hitDetection),n.features_=i,n.features_.forEach(n.addFeature_.bind(n)),n.features_.addEventListener(vi.ADD,n.handleFeatureAdd_.bind(n)),n.features_.addEventListener(vi.REMOVE,n.handleFeatureRemove_.bind(n)),n.lastPointerEvent_=null,n.delta_=[0,0],n.snapToPointer_=r.snapToPointer===void 0?!n.hitDetection_:r.snapToPointer,n}return e.prototype.addFeature_=function(r){var n=r.getGeometry();if(n){var i=this.SEGMENT_WRITERS_[n.getType()];i&&i(r,n)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),r.addEventListener(Vt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(r,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new ni;for(var i=this.featuresBeingModified_.getArray(),o=0,l=n.length;o<l;++o)for(var f=n[o],d=0,v=f.length;d<v;++d){var x=f[d].feature;x&&i.indexOf(x)===-1&&this.featuresBeingModified_.push(x)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new H9($9.MODIFYSTART,this.featuresBeingModified_,r))}},e.prototype.removeFeature_=function(r){this.removeFeatureSegmentData_(r),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.removeEventListener(Vt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(r){var n=this.rBush_,i=[];n.forEach(function(d){r===d.feature&&i.push(d)});for(var o=i.length-1;o>=0;--o){for(var l=i[o],f=this.dragSegments_.length-1;f>=0;--f)this.dragSegments_[f][0]===l&&this.dragSegments_.splice(f,1);n.remove(l)}},e.prototype.setActive=function(r){this.vertexFeature_&&!r&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,r)},e.prototype.setMap=function(r){this.overlay_.setMap(r),t.prototype.setMap.call(this,r)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(r){r.feature&&this.features_.push(r.feature)},e.prototype.handleSourceRemove_=function(r){r.feature&&this.features_.remove(r.feature)},e.prototype.handleFeatureAdd_=function(r){this.addFeature_(r.element)},e.prototype.handleFeatureChange_=function(r){if(!this.changingFeature_){var n=r.target;this.removeFeature_(n),this.addFeature_(n)}},e.prototype.handleFeatureRemove_=function(r){var n=r.element;this.removeFeature_(n)},e.prototype.writePointGeometry_=function(r,n){var i=n.getCoordinates(),o={feature:r,geometry:n,segment:[i,i]};this.rBush_.insert(n.getExtent(),o)},e.prototype.writeMultiPointGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o){var f=i[o],d={feature:r,geometry:n,depth:[o],index:o,segment:[f,f]};this.rBush_.insert(n.getExtent(),d)}},e.prototype.writeLineStringGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length-1;o<l;++o){var f=i.slice(o,o+2),d={feature:r,geometry:n,index:o,segment:f};this.rBush_.insert(Sa(f),d)}},e.prototype.writeMultiLineStringGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var f=i[o],d=0,v=f.length-1;d<v;++d){var x=f.slice(d,d+2),b={feature:r,geometry:n,depth:[o],index:d,segment:x};this.rBush_.insert(Sa(x),b)}},e.prototype.writePolygonGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var f=i[o],d=0,v=f.length-1;d<v;++d){var x=f.slice(d,d+2),b={feature:r,geometry:n,depth:[o],index:d,segment:x};this.rBush_.insert(Sa(x),b)}},e.prototype.writeMultiPolygonGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var f=i[o],d=0,v=f.length;d<v;++d)for(var x=f[d],b=0,A=x.length-1;b<A;++b){var P=x.slice(b,b+2),N={feature:r,geometry:n,depth:[d,o],index:b,segment:P};this.rBush_.insert(Sa(P),N)}},e.prototype.writeCircleGeometry_=function(r,n){var i=n.getCenter(),o={feature:r,geometry:n,index:uUe,segment:[i,i]},l={feature:r,geometry:n,index:uI,segment:[i,i]},f=[o,l];o.featureSegments=f,l.featureSegments=f,this.rBush_.insert(ox(i),o);var d=n,v=xu();if(v&&this.getMap()){var x=this.getMap().getView().getProjection();d=d.clone().transform(v,x),d=IN(d).transform(x,v)}this.rBush_.insert(d.getExtent(),l)},e.prototype.writeGeometryCollectionGeometry_=function(r,n){for(var i=n.getGeometriesArray(),o=0;o<i.length;++o){var l=i[o],f=this.SEGMENT_WRITERS_[l.getType()];f(r,l)}},e.prototype.createOrUpdateVertexFeature_=function(r,n,i){var o=this.vertexFeature_;if(!o)o=new Ol(new Za(r)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o);else{var l=o.getGeometry();l.setCoordinates(r)}return o.set("features",n),o.set("geometries",i),o},e.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;this.lastPointerEvent_=r;var n;return!r.map.getView().getInteracting()&&r.type==Qr.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(r),this.vertexFeature_&&this.deleteCondition_(r)&&(r.type!=Qr.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),r.type==Qr.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,r)&&!n},e.prototype.handleDragEvent=function(r){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(r,this.dragSegments_);for(var n=[r.coordinate[0]+this.delta_[0],r.coordinate[1]+this.delta_[1]],i=[],o=[],l=0,f=this.dragSegments_.length;l<f;++l){var d=this.dragSegments_[l],v=d[0],x=v.feature;i.indexOf(x)===-1&&i.push(x);var b=v.geometry;o.indexOf(b)===-1&&o.push(b);for(var A=v.depth,P=void 0,N=v.segment,j=d[1];n.length<b.getStride();)n.push(N[j][n.length]);switch(b.getType()){case"Point":P=n,N[0]=n,N[1]=n;break;case"MultiPoint":P=b.getCoordinates(),P[v.index]=n,N[0]=n,N[1]=n;break;case"LineString":P=b.getCoordinates(),P[v.index+j]=n,N[j]=n;break;case"MultiLineString":P=b.getCoordinates(),P[A[0]][v.index+j]=n,N[j]=n;break;case"Polygon":P=b.getCoordinates(),P[A[0]][v.index+j]=n,N[j]=n;break;case"MultiPolygon":P=b.getCoordinates(),P[A[1]][A[0]][v.index+j]=n,N[j]=n;break;case"Circle":if(N[0]=n,N[1]=n,v.index===uUe)this.changingFeature_=!0,b.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0;var D=r.map.getView().getProjection(),F=JY(Ii(b.getCenter(),D),Ii(n,D)),U=xu();if(U){var $=b.clone().transform(U,D);$.setRadius(F),F=$.transform(D,U).getRadius()}b.setRadius(F),this.changingFeature_=!1}break;default:}P&&this.setGeometryCoordinates_(b,P)}this.createOrUpdateVertexFeature_(n,i,o)},e.prototype.handleDownEvent=function(r){if(!this.condition_(r))return!1;var n=r.coordinate;this.handlePointerAtPixel_(r.pixel,r.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;var i=this.vertexFeature_;if(i){var o=r.map.getView().getProjection(),l=[],f=i.getGeometry().getCoordinates(),d=Sa([f]),v=this.rBush_.getInExtent(d),x={};v.sort(Uor);for(var b=0,A=v.length;b<A;++b){var P=v[b],N=P.segment,j=tr(P.geometry),D=P.depth;if(D&&(j+="-"+D.join("-")),x[j]||(x[j]=new Array(2)),P.geometry.getType()==="Circle"&&P.index===uI){var F=hUe(n,P,o);vs(F,f)&&!x[j][0]&&(this.dragSegments_.push([P,0]),x[j][0]=P);continue}if(vs(N[0],f)&&!x[j][0]){this.dragSegments_.push([P,0]),x[j][0]=P;continue}if(vs(N[1],f)&&!x[j][1]){if(x[j][0]&&x[j][0].index===0){var U=P.geometry.getCoordinates();switch(P.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":U=U[D[1]];case"Polygon":if(P.index!==U[D[0]].length-2)continue;break;default:}}this.dragSegments_.push([P,1]),x[j][1]=P;continue}tr(N)in this.vertexSegments_&&!x[j][0]&&!x[j][1]&&this.insertVertexCondition_(r)&&l.push(P)}l.length&&this.willModifyFeatures_(r,[l]);for(var $=l.length-1;$>=0;--$)this.insertVertex_(l[$],f)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(r){for(var n=this.dragSegments_.length-1;n>=0;--n){var i=this.dragSegments_[n][0],o=i.geometry;if(o.getType()==="Circle"){var l=o.getCenter(),f=i.featureSegments[0],d=i.featureSegments[1];f.segment[0]=l,f.segment[1]=l,d.segment[0]=l,d.segment[1]=l,this.rBush_.update(ox(l),f);var v=o,x=xu();if(x){var b=r.map.getView().getProjection();v=v.clone().transform(x,b),v=IN(v).transform(b,x)}this.rBush_.update(v.getExtent(),d)}else this.rBush_.update(Sa(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new H9($9.MODIFYEND,this.featuresBeingModified_,r)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(r){this.lastPixel_=r.pixel,this.handlePointerAtPixel_(r.pixel,r.map,r.coordinate)},e.prototype.handlePointerAtPixel_=function(r,n,i){var o=this,l=i||n.getCoordinateFromPixel(r),f=n.getView().getProjection(),d=function(ke,He){return fUe(l,ke,f)-fUe(l,He,f)},v,x;if(this.hitDetection_){var b=typeof this.hitDetection_=="object"?function(ke){return ke===o.hitDetection_}:void 0;n.forEachFeatureAtPixel(r,function(ke,He,Ke){if(Ke=Ke||ke.getGeometry(),Ke.getType()==="Point"&&ex(o.features_.getArray(),ke)){x=Ke;var Je=Ke.getFlatCoordinates().slice(0,2);v=[{feature:ke,geometry:Ke,segment:[Je,Je]}]}return!0},{layerFilter:b})}if(!v){var A=Ha(ox(l,cUe),f),P=n.getView().getResolution()*this.pixelTolerance_,N=Jd(vc(A,P,cUe),f);v=this.rBush_.getInExtent(N)}if(v&&v.length>0){var j=v.sort(d)[0],D=j.segment,F=hUe(l,j,f),U=n.getPixelFromCoordinate(F),$=JY(r,U);if(x||$<=this.pixelTolerance_){var Z={};if(Z[tr(D)]=!0,this.snapToPointer_||(this.delta_[0]=F[0]-l[0],this.delta_[1]=F[1]-l[1]),j.geometry.getType()==="Circle"&&j.index===uI)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(F,[j.feature],[j.geometry]);else{var ie=n.getPixelFromCoordinate(D[0]),ne=n.getPixelFromCoordinate(D[1]),ae=Xd(U,ie),ye=Xd(U,ne);$=Math.sqrt(Math.min(ae,ye)),this.snappedToVertex_=$<=this.pixelTolerance_,this.snappedToVertex_&&(F=ae>ye?D[1]:D[0]),this.createOrUpdateVertexFeature_(F,[j.feature],[j.geometry]);var ge={};ge[tr(j.geometry)]=!0;for(var de=1,be=v.length;de<be;++de){var Ne=v[de].segment;if(vs(D[0],Ne[0])&&vs(D[1],Ne[1])||vs(D[0],Ne[1])&&vs(D[1],Ne[0])){var Me=tr(v[de].geometry);Me in ge||(ge[Me]=!0,Z[tr(Ne)]=!0)}else break}}this.vertexSegments_=Z;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(r,n){for(var i=r.segment,o=r.feature,l=r.geometry,f=r.depth,d=r.index,v;n.length<l.getStride();)n.push(0);switch(l.getType()){case"MultiLineString":v=l.getCoordinates(),v[f[0]].splice(d+1,0,n);break;case"Polygon":v=l.getCoordinates(),v[f[0]].splice(d+1,0,n);break;case"MultiPolygon":v=l.getCoordinates(),v[f[1]][f[0]].splice(d+1,0,n);break;case"LineString":v=l.getCoordinates(),v.splice(d+1,0,n);break;default:return}this.setGeometryCoordinates_(l,v);var x=this.rBush_;x.remove(r),this.updateSegmentIndices_(l,d,f,1);var b={segment:[i[0],n],feature:o,geometry:l,depth:f,index:d};x.insert(Sa(b.segment),b),this.dragSegments_.push([b,1]);var A={segment:[n,i[1]],feature:o,geometry:l,depth:f,index:d+1};x.insert(Sa(A.segment),A),this.dragSegments_.push([A,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Qr.POINTERDRAG){var r=this.lastPointerEvent_;this.willModifyFeatures_(r,this.dragSegments_);var n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new H9($9.MODIFYEND,this.featuresBeingModified_,r)),this.featuresBeingModified_=null,n}return!1},e.prototype.removeVertex_=function(){var r=this.dragSegments_,n={},i=!1,o,l,f,d,v,x,b,A,P,N,j;for(v=r.length-1;v>=0;--v)f=r[v],N=f[0],j=tr(N.feature),N.depth&&(j+="-"+N.depth.join("-")),j in n||(n[j]={}),f[1]===0?(n[j].right=N,n[j].index=N.index):f[1]==1&&(n[j].left=N,n[j].index=N.index+1);for(j in n){switch(P=n[j].right,b=n[j].left,x=n[j].index,A=x-1,b!==void 0?N=b:N=P,A<0&&(A=0),d=N.geometry,l=d.getCoordinates(),o=l,i=!1,d.getType()){case"MultiLineString":l[N.depth[0]].length>2&&(l[N.depth[0]].splice(x,1),i=!0);break;case"LineString":l.length>2&&(l.splice(x,1),i=!0);break;case"MultiPolygon":o=o[N.depth[1]];case"Polygon":o=o[N.depth[0]],o.length>4&&(x==o.length-1&&(x=0),o.splice(x,1),i=!0,x===0&&(o.pop(),o.push(o[0]),A=o.length-1));break;default:}if(i){this.setGeometryCoordinates_(d,l);var D=[];if(b!==void 0&&(this.rBush_.remove(b),D.push(b.segment[0])),P!==void 0&&(this.rBush_.remove(P),D.push(P.segment[1])),b!==void 0&&P!==void 0){var F={depth:N.depth,feature:N.feature,geometry:N.geometry,index:A,segment:D};this.rBush_.insert(Sa(F.segment),F)}this.updateSegmentIndices_(d,x,N.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.length=0}}return i},e.prototype.setGeometryCoordinates_=function(r,n){this.changingFeature_=!0,r.setCoordinates(n),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(r,n,i,o){this.rBush_.forEachInExtent(r.getExtent(),function(l){l.geometry===r&&(i===void 0||l.depth===void 0||Ba(l.depth,i))&&l.index>n&&(l.index+=o)})},e}(rl);function Uor(t,e){return t.index-e.index}function fUe(t,e,r){var n=e.geometry;if(n.getType()==="Circle"){var i=n;if(e.index===uI){var o=xu();o&&(i=i.clone().transform(o,r));var l=Xd(i.getCenter(),Ii(t,r)),f=Math.sqrt(l)-i.getRadius();return f*f}}var d=Ii(t,r);return Px[0]=Ii(e.segment[0],r),Px[1]=Ii(e.segment[1],r),Dze(d,Px)}function hUe(t,e,r){var n=e.geometry;if(n.getType()==="Circle"&&e.index===uI){var i=n,o=xu();return o&&(i=i.clone().transform(o,r)),Qd(i.getClosestPoint(Ii(t,r)),r)}var l=Ii(t,r);return Px[0]=Ii(e.segment[0],r),Px[1]=Ii(e.segment[1],r),Qd(QY(l,Px),r)}function Bor(){var t=xx();return function(e,r){return t.Point}}var XN=zor;p();var dUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vor={SELECT:"select"},Gor=function(t){dUe(e,t);function e(r,n,i,o){var l=t.call(this,r)||this;return l.selected=n,l.deselected=i,l.mapBrowserEvent=o,l}return e}(Ni);var QN={},$or=function(t){dUe(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un;var i=r||{};n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=i.condition?i.condition:Mx,n.addCondition_=i.addCondition?i.addCondition:G9,n.removeCondition_=i.removeCondition?i.removeCondition:G9,n.toggleCondition_=i.toggleCondition?i.toggleCondition:cm,n.multi_=i.multi?i.multi:!1,n.filter_=i.filter?i.filter:ms,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.style_=i.style!==void 0?i.style:Hor(),n.features_=i.features||new ni;var o;if(i.layers){if(typeof i.layers=="function")o=i.layers;else{var l=i.layers;o=function(f){return ex(l,f)}}}else o=ms;return n.layerFilter_=o,n.featureLayerAssociation_={},n}return e.prototype.addFeatureLayerAssociation_=function(r,n){this.featureLayerAssociation_[tr(r)]=n},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(r){return this.featureLayerAssociation_[tr(r)]},e.prototype.setHitTolerance=function(r){this.hitTolerance_=r},e.prototype.setMap=function(r){var n=this.getMap();n&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,r),r?(this.features_.addEventListener(vi.ADD,this.boundAddFeature_),this.features_.addEventListener(vi.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(vi.ADD,this.boundAddFeature_),this.features_.removeEventListener(vi.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(r){var n=r.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find(function(o){if(o instanceof Su&&o.getSource()&&o.getSource().hasFeature(n))return o});i&&this.addFeatureLayerAssociation_(n,i)}},e.prototype.removeFeature_=function(r){var n=r.element;this.style_&&this.restorePreviousStyle_(n)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(r){var n=tr(r);n in QN||(QN[n]=r.getStyle()),r.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(r){for(var n=this.getMap().getInteractions().getArray(),i=n.length-1;i>=0;--i){var o=n[i];if(o!==this&&o instanceof e&&o.getStyle()&&o.getFeatures().getArray().lastIndexOf(r)!==-1){r.setStyle(o.getStyle());return}}var l=tr(r);r.setStyle(QN[l]),delete QN[l]},e.prototype.removeFeatureLayerAssociation_=function(r){delete this.featureLayerAssociation_[tr(r)]},e.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=this.addCondition_(r),i=this.removeCondition_(r),o=this.toggleCondition_(r),l=!n&&!i&&!o,f=r.map,d=this.getFeatures(),v=[],x=[];if(l){Ks(this.featureLayerAssociation_),f.forEachFeatureAtPixel(r.pixel,function(j,D){if(this.filter_(j,D))return this.addFeatureLayerAssociation_(j,D),x.push(j),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var b=d.getLength()-1;b>=0;--b){var A=d.item(b),P=x.indexOf(A);P>-1?x.splice(P,1):(d.remove(A),v.push(A))}x.length!==0&&d.extend(x)}else{f.forEachFeatureAtPixel(r.pixel,function(j,D){if(this.filter_(j,D))return(n||o)&&!ex(d.getArray(),j)?(this.addFeatureLayerAssociation_(j,D),x.push(j)):(i||o)&&ex(d.getArray(),j)&&(v.push(j),this.removeFeatureLayerAssociation_(j)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var N=v.length-1;N>=0;--N)d.remove(v[N]);d.extend(x)}return(x.length>0||v.length>0)&&this.dispatchEvent(new Gor(Vor.SELECT,x,v,r)),!0},e}(Au);function Hor(){var t=xx();return ra(t.Polygon,t.LineString),ra(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var W9=$or;function Z9(t,e,r){r!==void 0&&r(),t.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let n=o=>{o.target.getTargetElement().style.cursor="grabbing"},i=o=>{o.target.getTargetElement().style.cursor="grab"};return t.on("movestart",n),t.on("moveend",i),e.on("movestart",n),e.on("moveend",i),{disable:()=>{t.un("movestart",n),t.un("moveend",i),e.un("movestart",n),e.un("moveend",i)}}}function mUe(t,e,r,n,i,o,l,f){let d="activateAddGcpAction";f!==void 0&&f();let v={START:"Erzeugen Sie einen Passpunkt und setzen Sie daf\xFCr einen Punkt in der originalen Ansicht oder der georeferenzierten Ansicht.",SET_SRC:"Setzen Sie jetzt einen weiteren Punkt in der originalen Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab.",SET_TRG:"Setzen Sie jetzt einen weiteren Punkt in der georeferenzierten Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab."};t.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let x=new KN({source:i,type:"Point",style:lm}),b=new KN({source:o,type:"Point",style:lm});t.addInteraction(x),e.addInteraction(b),i.georeference_id="src",o.georeference_id="trg";let A=()=>{let N=r.getFeatures().length+1,j=i.getFeatures()[0];j.setStyle(lm(`${N}`)),j.setId(N),r.addFeature(j);let D=o.getFeatures()[0];D.setStyle(lm(`${N}`)),D.setId(N),n.addFeature(D),i.clear(),o.clear()},P=N=>{let j=N.target,D=N.feature;(j.georeference_id==="src"&&o.getFeatures().length===1||j.georeference_id==="trg"&&i.getFeatures().length===1)&&setTimeout(A,100),j.getFeatures().length>1&&j.removeFeature(D),j.georeference_id==="src"?l(v.SET_TRG,d):l(v.SET_SRC,d),D.setStyle(BN())};return i.on("addfeature",P),o.on("addfeature",P),l(v.START,d),{disable:()=>{l(null,d),i.clear(),o.clear(),t.removeInteraction(x),e.removeInteraction(b),i.un("addfeature",P),o.un("addfeature",P)}}}function gUe(t,e,r,n,i,o){let l="activateMoveGcpAction";o!==void 0&&o();let f={START:"Klicken Sie auf Passpunkt und verschieben Sie diesen mittels Drag&Drop."};t.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let d=new XN({source:r,pixelTolerance:10,style:BN}),v=new XN({source:n,pixelTolerance:10,style:BN});t.addInteraction(d),e.addInteraction(v);let x=A=>{A.target.getMap().getTargetElement().style.cursor="grabbing"},b=A=>{A.target.getMap().getTargetElement().style.cursor="grab"};return d.on("modifystart",x),d.on("modifyend",b),v.on("modifystart",x),v.on("modifyend",b),i(f.START,l),{disable:()=>{i(null,l),d.un("modifystart",x),d.un("modifyend",b),v.un("modifystart",x),v.un("modifyend",b),t.removeInteraction(d),e.removeInteraction(v)}}}function vUe(t,e,r,n,i,o,l,f){let d="activateDelGcpAction";f!==void 0&&f();let v={START:"Klicken Sie auf Passpunkt um diesen zu l\xF6schen."};t.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let x=P=>{if(P.getId()===void 0)return;let j=r.getFeatureById(P.getId()),D=n.getFeatureById(P.getId());j!==null&&D!==null&&(r.removeFeature(j),n.removeFeature(D))},b=new W9({layer:i,hitTolerance:5,condition:P=>{P.type==="click"&&P.map.forEachFeatureAtPixel(P.pixel,x)}}),A=new W9({layer:o,hitTolerance:5,condition:P=>{P.type==="click"&&P.map.forEachFeatureAtPixel(P.pixel,x)}});return t.addInteraction(b),e.addInteraction(A),l(v.START,d),{disable:()=>{l(null,d),t.removeInteraction(b),e.removeInteraction(A)}}}function yUe(t,e,r,n){let i="activateDrawClipAction";n!==void 0&&n();let o={START:"Klicken Sie auf einen Punkt der georeferenzierten Karte und fangen Sie an das Clip-Polygon zu zeichnen oder zu editieren."};t.getTargetElement().style.cursor="default";let l,f=new KN({features:e.getFeaturesCollection(),type:"Polygon",minPoints:5,condition:v=>{let x=v.coordinate;return!(l!==void 0&&(0,cI.default)(l[0],4)===(0,cI.default)(x[0],4)&&(0,cI.default)(l[1],4)===(0,cI.default)(x[1],4))&&e.getFeatures().length===0}}),d=new XN({features:e.getFeaturesCollection(),deleteCondition:v=>{let x=e.getFeatures().length>=1?e.getFeatures()[0].getGeometry().getCoordinates()[0]:void 0;return x!==void 0&&x.length>5&&cm(v)&&Mx(event)}});return f.on("drawstart",()=>{e.getFeatures().length>=1&&this.abortDrawing()}),t.addInteraction(f),t.addInteraction(d),r(o.START,i),{disable:()=>{r(null,i),t.removeInteraction(f),t.removeInteraction(d)}}}p();var gv="EPSG:4326";function _Ue(t){let{params:e,clip:r}=t,n=[...e.gcps.map(i=>i.target),...(r!=null?r.coordinates[0]:[])];return n.length>0?Sa(n):null}function xUe(t){return new JT().readGeometry(t,{dataProjection:gv,featureProjection:gv}).getExtent()}function Wor(t){return[Math.round(t[0]),Math.round(-1*t[1])]}function Zor(t){return[Math.round(t[0]),Math.round(-1*t[1])]}var JN=class extends J4e{constructor(e){var n;super(),this.srcMap_=e.sourceMap,this.trgMap_=e.targetMap,this.params_=e.params,this.clip_=(n=e.clip)!=null?n:null,this.onSetHelperMsg_=e.onSetHelperMsg,this.clipVectorSource_=new If({features:new ni});let r=new Su({source:this.clipVectorSource_,style:eUe(),zIndex:2});r.set("key","clip"),this.trgMap_.addLayer(r),this.srcVectorSource_=new If({features:new ni}),this.trgVectorSource_=new If({features:new ni}),this.srcVectorLayer_=new Su({source:this.srcVectorSource_}),this.srcMap_.addLayer(this.srcVectorLayer_),this.trgVectorLayer_=new Su({source:this.trgVectorSource_,zIndex:3}),this.trgMap_.addLayer(this.trgVectorLayer_),this.editSrcVectorSource_=new If({features:new ni}),this.editTrgVectorSource_=new If({features:new ni}),this.srcMap_.addLayer(new Su({source:this.editSrcVectorSource_})),this.trgMap_.addLayer(new Su({source:this.editTrgVectorSource_,zIndex:4})),this._loadData()}_loadData(){if(this.params_.gcps.length>0)for(let e=0,r=this.params_.gcps.length;e<r;e++){let n=e+1,i=new Ol(new Za(Wor(this.params_.gcps[e].source)));i.setId(n),i.setStyle(lm(`${n}`)),this.srcVectorSource_.addFeature(i);let o=new Ol(new Za(xc(this.params_.gcps[e].target,gv,this.trgMap_.getView().getProjection())));o.setId(n),o.setStyle(lm(`${n}`)),this.trgVectorSource_.addFeature(o)}if(dn(this.clip_)){let e=new JT().readFeature(this.clip_,{dataProjection:gv,featureProjection:this.trgMap_.getView().getProjection()});this.clipVectorSource_.addFeature(e)}}activateAddAction(e){return mUe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.editSrcVectorSource_,this.editTrgVectorSource_,this.onSetHelperMsg_,e)}activateMoveAction(e){return gUe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.onSetHelperMsg_,e)}activateDelAction(e){return vUe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.srcVectorLayer_,this.trgVectorLayer_,this.onSetHelperMsg_,e)}activateDrawClipAction(e){return yUe(this.trgMap_,this.clipVectorSource_,this.onSetHelperMsg_,e)}getParams(){let e=this.srcVectorSource_.getFeatures(),r=[];for(let n=0,i=e.length;n<i;n++){let o=e[n],l=this.trgVectorSource_.getFeatureById(o.getId());r.push({source:Zor(o.getGeometry().getCoordinates()),target:xc(l.getGeometry().getCoordinates(),this.trgMap_.getView().getProjection(),gv)})}return Object.assign({},this.params_,{gcps:r})}getClip(){let e=this.clipVectorSource_.getFeatures().length>0?this.clipVectorSource_.getFeatures()[0]:void 0;return dn(e)?new JT().writeGeometryObject(e.getGeometry(),{dataProjection:gv,featureProjection:"EPSG:3857",decimals:9}):this.clip_}removeClip(){this.clipVectorSource_.clear(),this.clip_=null}hasParamsOrClipChanged(){let r=f=>Object.assign({},f,{target:[(0,Y9.default)(f.target[0],6),(0,Y9.default)(f.target[1],6)]}),n=this.params_.gcps.map(r),i=this.getParams().gcps.map(r),o=JSON.stringify(n)===JSON.stringify(i),l=JSON.stringify(this.clip_)===JSON.stringify(this.getClip());return!o||!l}};var Sc={ZOOM_PAN:"control-zoom-pan",ADD_GCP:"control-add-gcp",MOVE_GCP:"control-move-gcp",DEL_GCP:"control-del-gcp",DRAW_CLIP:"control-draw-clip"},ek={AFFINE:"affine",POLYNOM:"polynom",TPS:"tps"};function Yor(){return[{id:Sc.ADD_GCP,title:Lr("georef-setgcp"),iconClassName:"icon-point-add"},{id:Sc.MOVE_GCP,title:Lr("georef-movegcp"),iconClassName:"icon-point-move"},{id:Sc.DEL_GCP,title:Lr("georef-delgcp"),iconClassName:"icon-point-remove"}]}function Kor(){return[{id:ek.AFFINE,title:"Affine",iconClassName:"icon-layercalc"},{id:ek.POLYNOM,title:"Polynom",iconClassName:"icon-layercalc"},{id:ek.TPS,title:"TPS",iconClassName:"icon-layercalc"}]}var Xor=()=>{let t=$s(l2),e=$s(a2),r=$s(s2),n=pu(jd),i=pu(o2),[o,l]=r2(n2),[f,d]=(0,eo.useState)(null),[v,x]=(0,eo.useState)(null),[b,A]=(0,eo.useState)(null),P=YD(v),[N,j]=(0,eo.useState)(ek.AFFINE),D=(0,eo.useRef)(null),F=Yor(),U=Kor(),$=ge=>{x(ge)},Z=ge=>{j(ge)},ie=()=>Pn(null,null,function*(){let ge=(be,Ne)=>Pn(null,null,function*(){let Me=D.current.hasParamsOrClipChanged()||N!==t.params.algorithm||(t==null?void 0:t.overwrites)===void 0||t.overwrites===0?yield M2e(be,Ne):yield C2e(t.overwrites);i(Me)});if(o)return;let de=Object.assign(D.current.getParams(),{algorithm:N});if(de.gcps.length<4){n({id:"toolbar-info",type:"warning",text:Lr("georef-confirm-warn-gcp")});return}l(!0);try{yield ge(t.map_id,de)}catch(be){n({id:"toolbar-info",type:"danger",text:be.message}),console.error(be)}finally{l(!1)}}),ne=()=>{if(D.current!==null){let ge={clip:D.current.getClip(),params:Object.assign(D.current.getParams(),{algorithm:N}),overwrites:t.overwrites};ge.params.gcps.length<4?n({id:"toolbar-info",type:"warning",text:Lr("georef-confirm-warn-gcp")}):d({map_id:t.map_id,params:ge})}},ae=()=>Pn(null,null,function*(){if(!dn(f))return;let ge=(de,be)=>Pn(null,null,function*(){let Ne=yield A2e(de,be);if(dn(Ne.error_code))throw new Error(Ne.error_message);let Me=bUe.default.parse(location.search),ke=Me.redirect!==void 0?Me.redirect:"/";window.location.href=`${window.location.origin}${ke}`});try{l(!0),d(null),yield ge(f.map_id,f.params)}catch(de){n({id:"toolbar-info",type:"danger",text:de.message}),console.error(de)}finally{l(!1)}}),ye=()=>{$(),dn(D.current)&&D.current.removeClip()};return(0,eo.useEffect)(()=>{t!==null&&D.current===null&&e!==null&&r!==null&&(D.current=new JN({clip:(t==null?void 0:t.clip)!==void 0&&(t==null?void 0:t.clip)!==null?{type:t.clip.type,coordinates:t.clip.coordinates}:void 0,onSetHelperMsg:ge=>{n({id:"toolbar-info",type:"info",text:ge})},params:{algorithm:t.params.algorithm,gcps:t.params.gcps},sourceMap:e.map,targetMap:r.map}),x(Sc.ZOOM_PAN),A(Z9(e.map,r.map,()=>{})),j(t.params.algorithm))},[t,e,r,x,A,n]),(0,eo.useEffect)(()=>{b!==void 0&&v!==P&&(v===Sc.ZOOM_PAN?A(Z9(e.map,r.map,b.disable)):D.current!==null&&v===Sc.ADD_GCP?A(D.current.activateAddAction(b.disable)):D.current!==null&&v===Sc.MOVE_GCP?A(D.current.activateMoveAction(b.disable)):D.current!==null&&v===Sc.DEL_GCP?A(D.current.activateDelAction(b.disable)):D.current!==null&&v===Sc.DRAW_CLIP?A(D.current.activateDrawClipAction(b.disable)):b.disable())},[v,P,b,A]),eo.default.createElement("div",{className:"vk-georeference-toolbar"},eo.default.createElement("div",null,eo.default.createElement(R0,{activeControl:v,id:Sc.ZOOM_PAN,iconClassName:"icon-move",onClick:$,title:Lr("georef-movemap")}),eo.default.createElement(DY,{id:"control-toggle-gcp-action",activeControl:v,defaultTitle:Lr("georef-editgcp"),options:F,onClick:$,parentIconClassName:"icon-points"}),eo.default.createElement(R0,{activeControl:v,id:Sc.DRAW_CLIP,iconClassName:"icon-draw",onClick:$,title:Lr("georef-drawclip")}),eo.default.createElement(R0,{id:"remove-clip",iconClassName:"remove",onClick:ye,title:Lr("georef-removeclip"),IconComponent:SZ})),eo.default.createElement("div",null,eo.default.createElement(DY,{id:"control-toggle-transformation",activeControl:N,className:"control-toggle-transformations",parentIconClassName:"icon-layercalc",disableActiveBehavior:!0,options:U,onClick:Z}),eo.default.createElement(R0,{id:"get-rectified-image",iconClassName:"icon-reload",onClick:ie,title:Lr("georef-validate")}),eo.default.createElement(R0,{id:"confirm-rectified-image",iconClassName:"icon-save",className:"save",onClick:ne,title:Lr("georef-confirm")})),f!==null&&eo.default.createElement(qje,{onClose:()=>d(null),onSubmit:ae}))},wUe=Xor;p();var ku=Fe(Et(),1),Mq=Fe(an(),1);var OGe=Fe(k8(),1);p();p();var Ya=Fe(Et(),1);var Qor=()=>Ya.default.createElement("div",{className:"vkf-loading-indicator"},Ya.default.createElement("svg",{className:"loading-icon",version:"1.1",id:"Layer_1",x:"0",y:"0",viewBox:"0 0 70 100"},Ya.default.createElement("rect",{fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 3 50)"},Ya.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite"}),Ya.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1.2s",values:"0;60;0",repeatCount:"indefinite"})),Ya.default.createElement("rect",{x:"17",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 20 50)"},Ya.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.1s"}),Ya.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:".5s",values:"0;5;0",repeatCount:"indefinite"})),Ya.default.createElement("rect",{x:"40",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 40 50)"},Ya.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.3s"}),Ya.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"2s",values:"0;30;0",repeatCount:"indefinite",begin:"0.6s"})),Ya.default.createElement("rect",{x:"60",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 58 50)"},Ya.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.5s"}),Ya.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1s",values:"0;60;0",repeatCount:"indefinite",begin:".3s"}))),Ya.default.createElement("div",{className:"loading-text"},"Loading\u2026")),EUe=Qor;var SUe=EUe;p();var S7=Fe(Et(),1);p();p();var rb=Fe(Et(),1);var UI=Fe(an(),1);p();p();p();var Jor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ear=function(t){Jor(e,t);function e(r){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(r[0],n[0])+i,o.top=Math.min(r[1],n[1])+i,o.width=Math.abs(n[0]-r[0])+i,o.height=Math.abs(n[1]-r[1])+i},e.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,i=[r,[r[0],n[1]],n,[n[0],r[1]]],o=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new bc([o])},e.prototype.getGeometry=function(){return this.geometry_},e}(Wd),TUe=ear;var IUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tk={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},K9=function(t){IUe(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.coordinate=n,o.mapBrowserEvent=i,o}return e}(Ni);var tar=function(t){IUe(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un;var i=r||{};return n.box_=new TUe(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:GN,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return e.prototype.defaultBoxEndCondition=function(r,n,i){var o=i[0]-n[0],l=i[1]-n[1];return o*o+l*l>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new K9(tk.BOXDRAG,r.coordinate,r))},e.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new K9(n?tk.BOXEND:tk.BOXCANCEL,r.coordinate,r)),!1},e.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new K9(tk.BOXSTART,r.coordinate,r)),!0):!1},e.prototype.onBoxEnd=function(r){},e}(rl),AUe=tar;var rar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nar=function(t){rar(e,t);function e(r){var n=this,i=r||{},o=i.condition?i.condition:cm;return n=t.call(this,{condition:o,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return e.prototype.onBoxEnd=function(r){var n=this.getMap(),i=n.getView(),o=this.getGeometry();if(this.out_){var l=i.rotatedExtentForGeometry(o),f=i.getResolutionForExtentInternal(l),d=i.getResolution()/f;o=o.clone(),o.scale(d*d)}i.fitInternal(o,{duration:this.duration_,easing:Iu})},e}(AUe),Rx=nar;p();p();p();var Af={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var iar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oar=function(t){iar(e,t);function e(r){var n=t.call(this)||this,i=r.element;return i&&!r.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return e.prototype.disposeInternal=function(){eI(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(r){this.map_&&eI(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)sn(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var o=this.target_?this.target_:r.getOverlayContainerStopEvent();o.appendChild(this.element),this.render!==Rl&&this.listenerKeys.push(qr(r,Af.POSTRENDER,this.render,this)),r.render()}},e.prototype.render=function(r){},e.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},e}(So),_s=oar;p();var Ao={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var aar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MUe=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],CUe={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},sar=function(t){aar(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var o=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof o=="string"?document.createTextNode(o):o;var l=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof l=="string"?document.createTextNode(l):l;var f=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=f,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(Vt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(Eu," ").concat(xf),n.element.appendChild(n.button_),n}return e.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(PUe(n))if(RUe(n))uar(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=r.getTargetElement(),this.keys_?lar(i):OUe(i)}}},e.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=RUe(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(vx(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(CUe.ENTERFULLSCREEN)):(vx(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(CUe.LEAVEFULLSCREEN)),r.updateSize())}},e.prototype.setClassName_=function(r,n){var i,o,l,f;n?((i=r.classList).remove.apply(i,this.inactiveClassName_),(o=r.classList).add.apply(o,this.activeClassName_)):((l=r.classList).remove.apply(l,this.activeClassName_),(f=r.classList).add.apply(f,this.inactiveClassName_))},e.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(Ao.TARGET,this.boundHandleMapTargetChange_),t.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(Ao.TARGET,this.boundHandleMapTargetChange_)},e.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,i=r.length;n<i;++n)sn(r[n]);r.length=0;var o=this.getMap();if(o){var l=o.getOwnerDocument();PUe(l)?this.element.classList.remove(S9):this.element.classList.add(S9);for(var n=0,i=MUe.length;n<i;++n)r.push(qr(l,MUe[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},e}(_s);function PUe(t){var e=t.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&t.msFullscreenEnabled||e.requestFullscreen&&t.fullscreenEnabled)}function RUe(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function OUe(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}function lar(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():OUe(t)}function uar(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}var rk=sar;p();p();var car=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),far=function(t){car(e,t);function e(r){var n=t.call(this)||this,i=r||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleEvent=function(r){var n=!1;if(r.type==Qr.DBLCLICK){var i=r.originalEvent,o=r.map,l=r.coordinate,f=i.shiftKey?-this.delta_:this.delta_,d=o.getView();Tx(d,f,l,this.duration_),i.preventDefault(),n=!0}return!n},e}(Au),LUe=far;p();var har=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),par=function(t){har(e,t);function e(r){var n=t.call(this,{stopDown:gu})||this,i=r||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var o=i.condition?i.condition:lI(Cx,WN);return n.condition_=i.onFocusOnly?lI(VN,o):o,n.noKinetic_=!1,n}return e.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=Ix(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],l=r.map,f=l.getView();Lze(o,f.getResolution()),dx(o,f.getRotation()),f.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(r){var n=r.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),f=i.getCenterInternal(),d=n.getPixelFromCoordinateInternal(f),v=n.getCoordinateFromPixelInternal([d[0]-o*Math.cos(l),d[1]-o*Math.sin(l)]);i.animateInternal({center:i.getConstrainedCenter(v),duration:500,easing:Iu})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(rl),DUe=par;p();p();function Ox(t){if(t!==void 0)return 0}function X9(t){if(t!==void 0)return t}function NUe(t){var e=2*Math.PI/t;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/e+.5)*e,r}}function kUe(t){var e=t||cx(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=e?0:r}}var dar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mar=function(t){dar(e,t);function e(r){var n=this,i=r||{};return n=t.call(this,{stopDown:gu})||this,n.condition_=i.condition?i.condition:sUe,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(r){if(HN(r)){var n=r.map,i=n.getView();if(i.getConstraints().rotation!==Ox){var o=n.getSize(),l=r.pixel,f=Math.atan2(o[1]/2-l[1],l[0]-o[0]/2);if(this.lastAngle_!==void 0){var d=f-this.lastAngle_;i.adjustRotationInternal(-d)}this.lastAngle_=f}}},e.prototype.handleUpEvent=function(r){if(!HN(r))return!0;var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(r){if(!HN(r))return!1;if(GN(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(rl),qUe=mar;p();p();var fm={LEFT:37,UP:38,RIGHT:39,DOWN:40};var gar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yar=function(t){gar(e,t);function e(r){var n=t.call(this)||this,i=r||{};return n.defaultCondition_=function(o){return Cx(o)&&$N(o)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return e.prototype.handleEvent=function(r){var n=!1;if(r.type==Vt.KEYDOWN){var i=r.originalEvent,o=i.keyCode;if(this.condition_(r)&&(o==fm.DOWN||o==fm.LEFT||o==fm.RIGHT||o==fm.UP)){var l=r.map,f=l.getView(),d=f.getResolution()*this.pixelDelta_,v=0,x=0;o==fm.DOWN?x=-d:o==fm.LEFT?v=-d:o==fm.RIGHT?v=d:x=d;var b=[v,x];dx(b,f.getRotation()),oUe(f,b,this.duration_),i.preventDefault(),n=!0}}return!n},e}(Au),FUe=yar;p();var _ar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xar=function(t){_ar(e,t);function e(r){var n=t.call(this)||this,i=r||{};return n.condition_=i.condition?i.condition:$N,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return e.prototype.handleEvent=function(r){var n=!1;if(r.type==Vt.KEYDOWN||r.type==Vt.KEYPRESS){var i=r.originalEvent,o=i.charCode;if(this.condition_(r)&&(o==43||o==45)){var l=r.map,f=o==43?this.delta_:-this.delta_,d=l.getView();Tx(d,f,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},e}(Au),jUe=xar;p();var bar=function(){function t(e,r,n){this.decay_=e,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(e,r){this.points_.push(e,r,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<e)return!1;for(var n=r-3;n>0&&this.points_[n+2]>e;)n-=3;var i=this.points_[r+2]-this.points_[n+2];if(i<16.666666666666668)return!1;var o=this.points_[r]-this.points_[n],l=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(l,o),this.initialVelocity_=Math.sqrt(o*o+l*l)/i,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),zUe=bar;p();var war=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q9={TRACKPAD:"trackpad",WHEEL:"wheel"},Ear=function(t){war(e,t);function e(r){var n=this,i=r||{};n=t.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var o=i.condition?i.condition:Ax;return n.condition_=i.onFocusOnly?lI(VN,o):o,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},e.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==Vt.WHEEL)return!0;var i=r.map,o=r.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var l;if(r.type==Vt.WHEEL&&(l=o.deltaY,sze&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=rN),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;var f=Date.now();this.startTime_===void 0&&(this.startTime_=f),(!this.mode_||f-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?Q9.TRACKPAD:Q9.WHEEL);var d=i.getView();if(this.mode_===Q9.TRACKPAD&&!(d.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(d.getAnimating()&&d.cancelAnimations(),d.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),d.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=f,!1;this.totalDelta_+=l;var v=Math.max(this.timeout_-(f-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),v),!1},e.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var i=-Yn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Tx(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},e}(Au),UUe=Ear;p();var Sar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tar=function(t){Sar(e,t);function e(r){var n=this,i=r||{},o=i;return o.stopDown||(o.stopDown=gu),n=t.call(this,o)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(r){var n=0,i=this.targetPointers[0],o=this.targetPointers[1],l=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){var f=l-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=f}this.lastAngle_=l;var d=r.map,v=d.getView();if(v.getConstraints().rotation!==Ox){var x=d.getViewport().getBoundingClientRect(),b=Ix(this.targetPointers);b[0]-=x.left,b[1]-=x.top,this.anchor_=d.getCoordinateFromPixelInternal(b),this.rotating_&&(d.render(),v.adjustRotationInternal(n,this.anchor_))}},e.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(rl),BUe=Tar;p();var Iar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Aar=function(t){Iar(e,t);function e(r){var n=this,i=r||{},o=i;return o.stopDown||(o.stopDown=gu),n=t.call(this,o)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return e.prototype.handleDragEvent=function(r){var n=1,i=this.targetPointers[0],o=this.targetPointers[1],l=i.clientX-o.clientX,f=i.clientY-o.clientY,d=Math.sqrt(l*l+f*f);this.lastDistance_!==void 0&&(n=this.lastDistance_/d),this.lastDistance_=d;var v=r.map,x=v.getView();n!=1&&(this.lastScaleDelta_=n);var b=v.getViewport().getBoundingClientRect(),A=Ix(this.targetPointers);A[0]-=b.left,A[1]-=b.top,this.anchor_=v.getCoordinateFromPixelInternal(A),v.render(),x.adjustResolutionInternal(n,this.anchor_)},e.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}else return!0},e.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(rl),VUe=Aar;function Lx(t){var e=t||{},r=new ni,n=new zUe(-.005,.05,100),i=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;i&&r.push(new qUe);var o=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;o&&r.push(new LUe({delta:e.zoomDelta,duration:e.zoomDuration}));var l=e.dragPan!==void 0?e.dragPan:!0;l&&r.push(new DUe({onFocusOnly:e.onFocusOnly,kinetic:n}));var f=e.pinchRotate!==void 0?e.pinchRotate:!0;f&&r.push(new BUe);var d=e.pinchZoom!==void 0?e.pinchZoom:!0;d&&r.push(new VUe({duration:e.zoomDuration}));var v=e.keyboard!==void 0?e.keyboard:!0;v&&(r.push(new FUe),r.push(new jUe({delta:e.zoomDelta,duration:e.zoomDuration})));var x=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;x&&r.push(new UUe({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var b=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return b&&r.push(new Rx({duration:e.zoomDuration})),r}p();p();p();var Mar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Car=function(t){Mar(e,t);function e(r){var n=t.call(this)||this;return n.map_=r,n}return e.prototype.dispatchRenderEvent=function(r,n){ir()},e.prototype.calculateMatrices2D=function(r){var n=r.viewState,i=r.coordinateToPixelTransform,o=r.pixelToCoordinateTransform;To(i,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),ix(o,i)},e.prototype.forEachFeatureAtCoordinate=function(r,n,i,o,l,f,d,v){var x,b=n.viewState;function A(He,Ke,Je,We){return l.call(f,Ke,He?Je:null,We)}var P=b.projection,N=dN(r.slice(),P),j=[[0,0]];if(P.canWrapX()&&o){var D=P.getExtent(),F=vn(D);j.push([-F,0],[F,0])}for(var U=n.layerStatesArray,$=U.length,Z=[],ie=[],ne=0;ne<j.length;ne++)for(var ae=$-1;ae>=0;--ae){var ye=U[ae],ge=ye.layer;if(ge.hasRenderer()&&fv(ye,b)&&d.call(v,ge)){var de=ge.getRenderer(),be=ge.getSource();if(de&&be){var Ne=be.getWrapX()?N:r,Me=A.bind(null,ye.managed);ie[0]=Ne[0]+j[ne][0],ie[1]=Ne[1]+j[ne][1],x=de.forEachFeatureAtCoordinate(ie,n,i,Me,Z)}if(x)return x}}if(Z.length!==0){var ke=1/Z.length;return Z.forEach(function(He,Ke){return He.distanceSq+=Ke*ke}),Z.sort(function(He,Ke){return He.distanceSq-Ke.distanceSq}),Z.some(function(He){return x=He.callback(He.feature,He.layer,He.geometry)}),x}},e.prototype.forEachLayerAtPixel=function(r,n,i,o,l){return ir()},e.prototype.hasFeatureAtCoordinate=function(r,n,i,o,l,f){var d=this.forEachFeatureAtCoordinate(r,n,i,o,ms,this,l,f);return d!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(r){ir()},e.prototype.scheduleExpireIconCache=function(r){Sx.canExpireCache()&&r.postRenderFunctions.push(Par)},e}(Wd);function Par(t,e){Sx.expire()}var GUe=Car;var Rar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oar=function(t){Rar(e,t);function e(r){var n=t.call(this,r)||this;n.fontChangeListenerKey_=qr(bf,dc.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=Eu+" ol-layers";var o=r.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return e.prototype.dispatchRenderEvent=function(r,n){var i=this.getMap();if(i.hasListener(r)){var o=new im(r,void 0,n);i.dispatchEvent(o)}},e.prototype.disposeInternal=function(){sn(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(Uo.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(P,N){return P.zIndex-N.zIndex}),i=r.viewState;this.children_.length=0;for(var o=[],l=null,f=0,d=n.length;f<d;++f){var v=n[f];r.layerIndex=f;var x=v.layer,b=x.getSourceState();if(!fv(v,i)||b!="ready"&&b!="undefined"){x.unrender();continue}var A=x.render(r,l);A&&(A!==l&&(this.children_.push(A),l=A),"getDeclutter"in x&&o.push(x))}for(var f=o.length-1;f>=0;--f)o[f].renderDeclutter(r);v4e(this.element_,this.children_),this.dispatchRenderEvent(Uo.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},e.prototype.forEachLayerAtPixel=function(r,n,i,o,l){for(var f=n.viewState,d=n.layerStatesArray,v=d.length,x=v-1;x>=0;--x){var b=d[x],A=b.layer;if(A.hasRenderer()&&fv(b,f)&&l(A)){var P=A.getRenderer(),N=P.getDataAtPixel(r,n,i);if(N){var j=o(A,N);if(j)return j}}}},e}(GUe),$Ue=Oar;p();p();var HUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xh=function(t){HUe(e,t);function e(r,n){var i=t.call(this,r)||this;return i.layer=n,i}return e}(Ni);var J9={LAYERS:"layers"},Lar=function(t){HUe(e,t);function e(r){var n=this,i=r||{},o=Xr({},i);delete o.layers;var l=i.layers;return n=t.call(this,o)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(J9.LAYERS,n.handleLayersChanged_),l?Array.isArray(l)?l=new ni(l.slice(),{unique:!0}):or(typeof l.getArray=="function",43):l=new ni(void 0,{unique:!0}),n.setLayers(l),n}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(sn),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(qr(r,vi.ADD,this.handleLayersAdd_,this),qr(r,vi.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(sn);Ks(this.listenerKeys_);for(var i=r.getArray(),o=0,l=i.length;o<l;o++){var f=i[o];this.registerLayerListeners_(f),this.dispatchEvent(new Xh("addlayer",f))}this.changed()},e.prototype.registerLayerListeners_=function(r){var n=[qr(r,dc.PROPERTYCHANGE,this.handleLayerChange_,this),qr(r,Vt.CHANGE,this.handleLayerChange_,this)];r instanceof e&&n.push(qr(r,"addlayer",this.handleLayerGroupAdd_,this),qr(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[tr(r)]=n},e.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new Xh("addlayer",r.layer))},e.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new Xh("removelayer",r.layer))},e.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new Xh("addlayer",n)),this.changed()},e.prototype.handleLayersRemove_=function(r){var n=r.element,i=tr(n);this.listenerKeys_[i].forEach(sn),delete this.listenerKeys_[i],this.dispatchEvent(new Xh("removelayer",n)),this.changed()},e.prototype.getLayers=function(){return this.get(J9.LAYERS)},e.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var i=n.getArray(),o=0,l=i.length;o<l;++o)this.dispatchEvent(new Xh("removelayer",i[o]));this.set(J9.LAYERS,r)},e.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},e.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],i=n.length;this.getLayers().forEach(function(x){x.getLayerStatesArray(n)});var o=this.getLayerState(),l=o.zIndex;!r&&o.zIndex===void 0&&(l=0);for(var f=i,d=n.length;f<d;f++){var v=n[f];v.opacity*=o.opacity,v.visible=v.visible&&o.visible,v.maxResolution=Math.min(v.maxResolution,o.maxResolution),v.minResolution=Math.max(v.minResolution,o.minResolution),v.minZoom=Math.max(v.minZoom,o.minZoom),v.maxZoom=Math.min(v.maxZoom,o.maxZoom),o.extent!==void 0&&(v.extent!==void 0?v.extent=vu(v.extent,o.extent):v.extent=o.extent),v.zIndex===void 0&&(v.zIndex=l)}return n},e.prototype.getSourceState=function(){return"ready"},e}(MN),fI=Lar;p();p();var hI={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Dar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nar=function(t){Dar(e,t);function e(r,n){var i=t.call(this,r)||this;i.map_=r,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=qr(o,hI.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=qr(o,hI.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(Vt.TOUCHMOVE,i.boundHandleTouchMove_,nN?{passive:!1}:!1),i}return e.prototype.emulateClick_=function(r){var n=new Tu(Qr.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Tu(Qr.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new Tu(Qr.SINGLECLICK,this.map_,r);this.dispatchEvent(i)}.bind(this),250)},e.prototype.updateActivePointers_=function(r){var n=r,i=n.pointerId;if(n.type==Qr.POINTERUP||n.type==Qr.POINTERCANCEL){delete this.trackedTouches_[i];for(var o in this.trackedTouches_)if(this.trackedTouches_[o].target!==n.target){delete this.trackedTouches_[o];break}}else(n.type==Qr.POINTERDOWN||n.type==Qr.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=QD(this.trackedTouches_)},e.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new Tu(Qr.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(sn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(r){return r.button===0},e.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new Tu(Qr.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var i in r){var o=r[i];this.down_[i]=typeof o=="function"?Rl:o}if(this.dragListenerKeys_.length===0){var l=this.map_.getOwnerDocument();this.dragListenerKeys_.push(qr(l,Qr.POINTERMOVE,this.handlePointerMove_,this),qr(l,Qr.POINTERUP,this.handlePointerUp_,this),qr(this.element_,Qr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==l&&this.dragListenerKeys_.push(qr(this.element_.getRootNode(),Qr.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new Tu(Qr.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},e.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new Tu(Qr.POINTERMOVE,this.map_,r,n))},e.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},e.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(sn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Vt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(sn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(sn),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(Xs),WUe=Nar;p();p();var pI=1/0,kar=function(){function t(e,r){this.priorityFunction_=e,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Ks(this.queuedElements_)},t.prototype.dequeue=function(){var e=this.elements_,r=this.priorities_,n=e[0];e.length==1?(e.length=0,r.length=0):(e[0]=e.pop(),r[0]=r.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},t.prototype.enqueue=function(e){or(!(this.keyFunction_(e)in this.queuedElements_),31);var r=this.priorityFunction_(e);return r!=pI?(this.elements_.push(e),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(e){return e*2+1},t.prototype.getRightChildIndex_=function(e){return e*2+2},t.prototype.getParentIndex_=function(e){return e-1>>1},t.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},t.prototype.isEmpty=function(){return this.elements_.length===0},t.prototype.isKeyQueued=function(e){return e in this.queuedElements_},t.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},t.prototype.siftUp_=function(e){for(var r=this.elements_,n=this.priorities_,i=r.length,o=r[e],l=n[e],f=e;e<i>>1;){var d=this.getLeftChildIndex_(e),v=this.getRightChildIndex_(e),x=v<i&&n[v]<n[d]?v:d;r[e]=r[x],n[e]=n[x],e=x}r[e]=o,n[e]=l,this.siftDown_(f,e)},t.prototype.siftDown_=function(e,r){for(var n=this.elements_,i=this.priorities_,o=n[r],l=i[r];r>e;){var f=this.getParentIndex_(r);if(i[f]>l)n[r]=n[f],i[r]=i[f],r=f;else break}n[r]=o,i[r]=l},t.prototype.reprioritize=function(){var e=this.priorityFunction_,r=this.elements_,n=this.priorities_,i=0,o=r.length,l,f,d;for(f=0;f<o;++f)l=r[f],d=e(l),d==pI?delete this.queuedElements_[this.keyFunction_(l)]:(n[i]=d,r[i++]=l);r.length=i,n.length=i,this.heapify_()},t}(),ZUe=kar;p();var Ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var qar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Far=function(t){qar(e,t);function e(r,n){var i=t.call(this,function(o){return r.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return e.prototype.enqueue=function(r){var n=t.prototype.enqueue.call(this,r);if(n){var i=r[0];i.addEventListener(Vt.CHANGE,this.boundHandleTileChange_)}return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(r){var n=r.target,i=n.getState();if(i===Ht.LOADED||i===Ht.ERROR||i===Ht.EMPTY){n.removeEventListener(Vt.CHANGE,this.boundHandleTileChange_);var o=n.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(r,n){for(var i=0,o,l,f;this.tilesLoading_<r&&i<n&&this.getCount()>0;)l=this.dequeue()[0],f=l.getKey(),o=l.getState(),o===Ht.IDLE&&!(f in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[f]=!0,++this.tilesLoading_,++i,l.load())},e}(ZUe),YUe=Far;function KUe(t,e,r,n,i){if(!t||!(r in t.wantedTiles))return pI;if(!t.wantedTiles[r][e.getKey()])return pI;var o=t.viewState.center,l=n[0]-o[0],f=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(l*l+f*f)/i}p();p();var Mu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};p();var XUe=42,hm=256;p();function eK(t,e,r){return function(n,i,o,l,f){if(n){if(!i&&!e)return n;var d=e?0:o[0]*i,v=e?0:o[1]*i,x=f?f[0]:0,b=f?f[1]:0,A=t[0]+d/2+x,P=t[2]-d/2+x,N=t[1]+v/2+b,j=t[3]-v/2+b;A>P&&(A=(P+A)/2,P=A),N>j&&(N=(j+N)/2,j=N);var D=Yn(n[0],A,P),F=Yn(n[1],N,j);if(l&&r&&i){var U=30*i;D+=-U*Math.log(1+Math.max(0,A-n[0])/U)+U*Math.log(1+Math.max(0,n[0]-P)/U),F+=-U*Math.log(1+Math.max(0,N-n[1])/U)+U*Math.log(1+Math.max(0,n[1]-j)/U)}return[D,F]}}}function QUe(t){return t}p();function tK(t,e,r,n){var i=vn(e)/r[0],o=zo(e)/r[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function rK(t,e,r){var n=Math.min(t,e),i=50;return n*=Math.log(1+i*Math.max(0,t/e-1))/i+1,r&&(n=Math.max(n,r),n/=Math.log(1+i*Math.max(0,r/t-1))/i+1),Yn(n,r/2,e*2)}function JUe(t,e,r,n){return function(i,o,l,f){if(i!==void 0){var d=t[0],v=t[t.length-1],x=r?tK(d,r,l,n):d;if(f){var b=e!==void 0?e:!0;return b?rK(i,x,v):Yn(i,v,x)}var A=Math.min(x,i),P=Math.floor(tx(t,A,o));return t[P]>x&&P<t.length-1?t[P+1]:t[P]}else return}}function eBe(t,e,r,n,i,o){return function(l,f,d,v){if(l!==void 0){var x=i?tK(e,i,d,o):e,b=r!==void 0?r:0;if(v){var A=n!==void 0?n:!0;return A?rK(l,x,b):Yn(l,b,x)}var P=1e-9,N=Math.ceil(Math.log(e/x)/Math.log(t)-P),j=-f*(.5-P)+.5,D=Math.min(x,l),F=Math.floor(Math.log(e/D)/Math.log(t)+j),U=Math.max(N,F),$=e/Math.pow(t,U);return Yn($,b,x)}else return}}function nK(t,e,r,n,i){return function(o,l,f,d){if(o!==void 0){var v=n?tK(t,n,f,i):t,x=r!==void 0?r:!0;return!x||!d?Yn(o,e,v):rK(o,v,e)}else return}}var jar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iK=0,zar=function(t){jar(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un;var i=Xr({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=mN(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&qze(),i.center&&(i.center=Ii(i.center,n.projection_)),i.extent&&(i.extent=Ha(i.extent,n.projection_)),n.applyOptions_(i),n}return e.prototype.applyOptions_=function(r){var n=Xr({},r);for(var i in Mu)delete n[i];this.setProperties(n,!0);var o=Bar(r);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=o.minZoom;var l=Uar(r),f=o.constraint,d=Var(r);this.constraints_={center:l,resolution:f,rotation:d},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var i=this.getCenter();if(i){var o=r||[0,0,0,0];n=n||[0,0,0,0];var l=this.getResolution(),f=l/2*(o[3]-n[3]+n[1]-o[1]),d=l/2*(o[0]-n[0]+n[2]-o[2]);this.setCenterInternal([i[0]+f,i[1]-d])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Xr({},n,r)},e.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var o=arguments[i];o.center&&(o=Xr({},o),o.center=Ii(o.center,this.getProjection())),o.anchor&&(o=Xr({},o),o.anchor=Ii(o.anchor,this.getProjection())),n[i]=o}this.animateInternal.apply(this,n)},e.prototype.animateInternal=function(r){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var l=arguments[o];l.center&&this.setCenterInternal(l.center),l.zoom!==void 0?this.setZoom(l.zoom):l.resolution&&this.setResolution(l.resolution),l.rotation!==void 0&&this.setRotation(l.rotation)}if(o===n){i&&nk(i,!0);return}for(var f=Date.now(),d=this.targetCenter_.slice(),v=this.targetResolution_,x=this.targetRotation_,b=[];o<n;++o){var A=arguments[o],P={start:f,complete:!1,anchor:A.anchor,duration:A.duration!==void 0?A.duration:1e3,easing:A.easing||nUe,callback:i};if(A.center&&(P.sourceCenter=d,P.targetCenter=A.center.slice(),d=P.targetCenter),A.zoom!==void 0?(P.sourceResolution=v,P.targetResolution=this.getResolutionForZoom(A.zoom),v=P.targetResolution):A.resolution&&(P.sourceResolution=v,P.targetResolution=A.resolution,v=P.targetResolution),A.rotation!==void 0){P.sourceRotation=x;var N=Ll(A.rotation-x+Math.PI,2*Math.PI)-Math.PI;P.targetRotation=x+N,x=P.targetRotation}Gar(P)?P.complete=!0:f+=P.duration,b.push(P)}this.animations_.push(b),this.setHint(Bo.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Bo.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[Bo.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(Bo.ANIMATING,-this.hints_[Bo.ANIMATING]);for(var r,n=0,i=this.animations_.length;n<i;++n){var o=this.animations_[n];if(o[0].callback&&nk(o[0].callback,!1),!r)for(var l=0,f=o.length;l<f;++l){var d=o[l];if(!d.complete){r=d.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],l=!0,f=0,d=o.length;f<d;++f){var v=o[f];if(!v.complete){var x=r-v.start,b=v.duration>0?x/v.duration:1;b>=1?(v.complete=!0,b=1):l=!1;var A=v.easing(b);if(v.sourceCenter){var P=v.sourceCenter[0],N=v.sourceCenter[1],j=v.targetCenter[0],D=v.targetCenter[1];this.nextCenter_=v.targetCenter;var F=P+A*(j-P),U=N+A*(D-N);this.targetCenter_=[F,U]}if(v.sourceResolution&&v.targetResolution){var $=A===1?v.targetResolution:v.sourceResolution+A*(v.targetResolution-v.sourceResolution);if(v.anchor){var Z=this.getViewportSize_(this.getRotation()),ie=this.constraints_.resolution($,0,Z,!0);this.targetCenter_=this.calculateCenterZoom(ie,v.anchor)}this.nextResolution_=v.targetResolution,this.targetResolution_=$,this.applyTargetState_(!0)}if(v.sourceRotation!==void 0&&v.targetRotation!==void 0){var ne=A===1?Ll(v.targetRotation+Math.PI,2*Math.PI)-Math.PI:v.sourceRotation+A*(v.targetRotation-v.sourceRotation);if(v.anchor){var ae=this.constraints_.rotation(ne,!0);this.targetCenter_=this.calculateCenterRotate(ae,v.anchor)}this.nextRotation_=v.targetRotation,this.targetRotation_=ne}if(this.applyTargetState_(!0),n=!0,!v.complete)break}}if(l){this.animations_[i]=null,this.setHint(Bo.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var ye=o[0].callback;ye&&nk(ye,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(r,n){var i,o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-n[0],o[1]-n[1]],dx(i,r-this.getRotation()),Oze(i,n)),i},e.prototype.calculateCenterZoom=function(r,n){var i,o=this.getCenterInternal(),l=this.getResolution();if(o!==void 0&&l!==void 0){var f=n[0]-r*(n[0]-o[0])/l,d=n[1]-r*(n[1]-o[1])/l;i=[f,d]}return i},e.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var i=n[0],o=n[1];return[Math.abs(i*Math.cos(r))+Math.abs(o*Math.sin(r)),Math.abs(i*Math.sin(r))+Math.abs(o*Math.cos(r))]}else return n},e.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&Qd(r,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(Mu.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},e.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return Jd(n,this.getProjection())},e.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();or(i,1);var o=this.getResolution();or(o!==void 0,2);var l=this.getRotation();return or(l!==void 0,3),kT(i,o,l,n)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},e.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(Mu.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(Ha(r,this.getProjection()),n)},e.prototype.getResolutionForExtentInternal=function(r,n){var i=n||this.getViewportSizeMinusPadding_(),o=vn(r)/i[0],l=zo(r)/i[1];return Math.max(o,l)},e.prototype.getResolutionForValueFunction=function(r){var n=r||2,i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(i/o)/Math.log(n);return function(f){var d=i/Math.pow(n,f*l);return d}},e.prototype.getRotation=function(){return this.get(Mu.ROTATION)},e.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(i/o)/n;return function(f){var d=Math.log(i/f)/n/l;return d}},e.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},e.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),l=this.padding_;if(l){var f=this.getViewportSizeMinusPadding_();o=oK(o,this.getViewportSize_(),[f[0]/2+l[3],f[1]/2+l[0]],n,i)}return{center:o.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},e.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,i,o;if(this.resolutions_){var l=tx(this.resolutions_,r,1);n=l,i=this.resolutions_[l],l==this.resolutions_.length-1?o=2:o=i/this.resolutions_[l+1]}else i=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(i/r)/Math.log(o)},e.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Yn(Math.floor(r),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Yn(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},e.prototype.fit=function(r,n){var i;if(or(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){or(!av(r),25);var o=Ha(r,this.getProjection());i=QT(o)}else if(r.getType()==="Circle"){var o=Ha(r.getExtent(),this.getProjection());i=QT(o),i.rotate(this.getRotation(),Js(o))}else{var l=xu();l?i=r.clone().transform(l,this.getProjection()):i=r}this.fitInternal(i,n)},e.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),i=Math.cos(n),o=Math.sin(-n),l=r.getFlatCoordinates(),f=r.getStride(),d=1/0,v=1/0,x=-1/0,b=-1/0,A=0,P=l.length;A<P;A+=f){var N=l[A]*i-l[A+1]*o,j=l[A]*o+l[A+1]*i;d=Math.min(d,N),v=Math.min(v,j),x=Math.max(x,N),b=Math.max(b,j)}return[d,v,x,b]},e.prototype.fitInternal=function(r,n){var i=n||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var l=i.padding!==void 0?i.padding:[0,0,0,0],f=i.nearest!==void 0?i.nearest:!1,d;i.minResolution!==void 0?d=i.minResolution:i.maxZoom!==void 0?d=this.getResolutionForZoom(i.maxZoom):d=0;var v=this.rotatedExtentForGeometry(r),x=this.getResolutionForExtentInternal(v,[o[0]-l[1]-l[3],o[1]-l[0]-l[2]]);x=isNaN(x)?d:Math.max(x,d),x=this.getConstrainedResolution(x,f?0:1);var b=this.getRotation(),A=Math.sin(b),P=Math.cos(b),N=Js(v);N[0]+=(l[1]-l[3])/2*x,N[1]+=(l[0]-l[2])/2*x;var j=N[0]*P-N[1]*A,D=N[1]*P+N[0]*A,F=this.getConstrainedCenter([j,D],x),U=i.callback?i.callback:Rl;i.duration!==void 0?this.animateInternal({resolution:x,center:F,duration:i.duration,easing:i.easing},U):(this.targetResolution_=x,this.targetCenter_=F,this.applyTargetState_(!1,!0),nk(U,!0))},e.prototype.centerOn=function(r,n,i){this.centerOnInternal(Ii(r,this.getProjection()),n,i)},e.prototype.centerOnInternal=function(r,n,i){this.setCenterInternal(oK(r,n,i,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(r,n,i,o){var l,f=this.padding_;if(f&&r){var d=this.getViewportSizeMinusPadding_(-i),v=oK(r,o,[d[0]/2+f[3],d[1]/2+f[0]],n,i);l=[r[0]-v[0],r[1]-v[1]]}return l},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(r){var n=Qd(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},e.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},e.prototype.adjustResolution=function(r,n){var i=n&&Ii(n,this.getProjection());this.adjustResolutionInternal(r,i)},e.prototype.adjustResolutionInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*r,0,o,i);n&&(this.targetCenter_=this.calculateCenterZoom(l,n)),this.targetResolution_*=r,this.applyTargetState_()},e.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},e.prototype.adjustRotation=function(r,n){n&&(n=Ii(n,this.getProjection())),this.adjustRotationInternal(r,n)},e.prototype.adjustRotationInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+r,i);n&&(this.targetCenter_=this.calculateCenterRotate(o,n)),this.targetRotation_+=r,this.applyTargetState_()},e.prototype.setCenter=function(r){this.setCenterInternal(r&&Ii(r,this.getProjection()))},e.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},e.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},e.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},e.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},e.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},e.prototype.applyTargetState_=function(r,n){var i=this.getAnimating()||this.getInteracting()||n,o=this.constraints_.rotation(this.targetRotation_,i),l=this.getViewportSize_(o),f=this.constraints_.resolution(this.targetResolution_,0,l,i),d=this.constraints_.center(this.targetCenter_,f,l,i,this.calculateCenterShift(this.targetCenter_,f,o,l));this.get(Mu.ROTATION)!==o&&this.set(Mu.ROTATION,o),this.get(Mu.RESOLUTION)!==f&&(this.set(Mu.RESOLUTION,f),this.set("zoom",this.getZoom(),!0)),(!d||!this.get(Mu.CENTER)||!vs(this.get(Mu.CENTER),d))&&this.set(Mu.CENTER,d),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(r,n,i){var o=r!==void 0?r:200,l=n||0,f=this.constraints_.rotation(this.targetRotation_),d=this.getViewportSize_(f),v=this.constraints_.resolution(this.targetResolution_,l,d),x=this.constraints_.center(this.targetCenter_,v,d,!1,this.calculateCenterShift(this.targetCenter_,v,f,d));if(o===0&&!this.cancelAnchor_){this.targetResolution_=v,this.targetRotation_=f,this.targetCenter_=x,this.applyTargetState_();return}var b=i||(o===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==v||this.getRotation()!==f||!this.getCenterInternal()||!vs(this.getCenterInternal(),x))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:f,center:x,resolution:v,duration:o,easing:Iu,anchor:b}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Bo.INTERACTING,1)},e.prototype.endInteraction=function(r,n,i){var o=i&&Ii(i,this.getProjection());this.endInteractionInternal(r,n,o)},e.prototype.endInteractionInternal=function(r,n,i){this.setHint(Bo.INTERACTING,-1),this.resolveConstraints(r,n,i)},e.prototype.getConstrainedCenter=function(r,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(r,n){var i=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},e.prototype.getConstrainedResolution=function(r,n){var i=n||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,i,o)},e}(So);function nk(t,e){setTimeout(function(){t(e)},0)}function Uar(t){if(t.extent!==void 0){var e=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return eK(t.extent,t.constrainOnlyCenter,e)}var r=mN(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,eK(n,!1,!1)}return QUe}function Bar(t){var e,r,n,i=28,o=2,l=t.minZoom!==void 0?t.minZoom:iK,f=t.maxZoom!==void 0?t.maxZoom:i,d=t.zoomFactor!==void 0?t.zoomFactor:o,v=t.multiWorld!==void 0?t.multiWorld:!1,x=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,b=t.showFullExtent!==void 0?t.showFullExtent:!1,A=mN(t.projection,"EPSG:3857"),P=A.getExtent(),N=t.constrainOnlyCenter,j=t.extent;if(!v&&!j&&A.isGlobal()&&(N=!1,j=P),t.resolutions!==void 0){var D=t.resolutions;r=D[l],n=D[f]!==void 0?D[f]:D[D.length-1],t.constrainResolution?e=JUe(D,x,!N&&j,b):e=nK(r,n,x,!N&&j,b)}else{var F=P?Math.max(vn(P),zo(P)):360*Va[Ga.DEGREES]/A.getMetersPerUnit(),U=F/hm/Math.pow(o,iK),$=U/Math.pow(o,i-iK);r=t.maxResolution,r!==void 0?l=0:r=U/Math.pow(d,l),n=t.minResolution,n===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?n=r/Math.pow(d,f):n=U/Math.pow(d,f):n=$),f=l+Math.floor(Math.log(r/n)/Math.log(d)),n=r/Math.pow(d,f-l),t.constrainResolution?e=eBe(d,r,n,x,!N&&j,b):e=nK(r,n,x,!N&&j,b)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:l,zoomFactor:d}}function Var(t){var e=t.enableRotation!==void 0?t.enableRotation:!0;if(e){var r=t.constrainRotation;return r===void 0||r===!0?kUe():r===!1?X9:typeof r=="number"?NUe(r):X9}else return Ox}function Gar(t){return!(t.sourceCenter&&t.targetCenter&&!vs(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function oK(t,e,r,n,i){var o=Math.cos(-i),l=Math.sin(-i),f=t[0]*o-t[1]*l,d=t[1]*o+t[0]*l;f+=(e[0]/2-r[0])*n,d+=(r[1]-e[1]/2)*n,l=-l;var v=f*o-d*l,x=d*o+f*l;return[v,x]}var Cu=zar;var $ar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function tBe(t){if(t instanceof hv){t.setMapInternal(null);return}t instanceof fI&&t.getLayers().forEach(tBe)}function rBe(t,e){if(t instanceof hv){t.setMapInternal(e);return}if(t instanceof fI)for(var r=t.getLayers().getArray(),n=0,i=r.length;n<i;++n)rBe(r[n],e)}var Har=function(t){$ar(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un;var i=War(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:rN,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Ui(),n.pixelToCoordinateTransform_=Ui(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new ni,n.interactions=i.interactions||new ni,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new YUe(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Ao.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(Ao.VIEW,n.handleViewChanged_),n.addChangeListener(Ao.SIZE,n.handleSizeChanged_),n.addChangeListener(Ao.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var o=n;return r.view&&!(r.view instanceof Cu)&&r.view.then(function(l){o.setView(new Cu(l))}),n.controls.addEventListener(vi.ADD,function(l){l.element.setMap(this)}.bind(n)),n.controls.addEventListener(vi.REMOVE,function(l){l.element.setMap(null)}.bind(n)),n.interactions.addEventListener(vi.ADD,function(l){l.element.setMap(this)}.bind(n)),n.interactions.addEventListener(vi.REMOVE,function(l){l.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(vi.ADD,function(l){this.addOverlayInternal_(l.element)}.bind(n)),n.overlays_.addEventListener(vi.REMOVE,function(l){var f=l.element,d=f.getId();d!==void 0&&delete this.overlayIdIndex_[d.toString()],l.element.setMap(null)}.bind(n)),n.controls.forEach(function(l){l.setMap(this)}.bind(n)),n.interactions.forEach(function(l){l.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(r){this.getControls().push(r)},e.prototype.addInteraction=function(r){this.getInteractions().push(r)},e.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},e.prototype.handleLayerAdd_=function(r){rBe(r.layer,this)},e.prototype.addOverlay=function(r){this.getOverlays().push(r)},e.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},e.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var o=this.getCoordinateFromPixelInternal(r);i=i!==void 0?i:{};var l=i.hitTolerance!==void 0?i.hitTolerance:0,f=i.layerFilter!==void 0?i.layerFilter:ms,d=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,l,d,n,null,f,null)}},e.prototype.getFeaturesAtPixel=function(r,n){var i=[];return this.forEachFeatureAtPixel(r,function(o){i.push(o)},n),i},e.prototype.getAllLayers=function(){var r=[];function n(i){i.forEach(function(o){o instanceof fI?n(o.getLayers()):r.push(o)})}return n(this.getLayers()),r},e.prototype.forEachLayerAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var o=i||{},l=o.hitTolerance!==void 0?o.hitTolerance:0,f=o.layerFilter||ms;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,l,n,f)}},e.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var o=n.layerFilter!==void 0?n.layerFilter:ms,l=n.hitTolerance!==void 0?n.hitTolerance:0,f=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,l,f,o,null)},e.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},e.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},e.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in r?r.changedTouches[0]:r;return[i.clientX-n.left,i.clientY-n.top]},e.prototype.getTarget=function(){return this.get(Ao.TARGET)},e.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},e.prototype.getCoordinateFromPixel=function(r){return Qd(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?Hn(n.pixelToCoordinateTransform,r.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ao.LAYERGROUP)},e.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof ni){n.setLayers(r);return}var i=n.getLayers();i.clear(),i.extend(r)},e.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},e.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var o=r[n];if(o.visible){var l=o.layer.getRenderer();if(l&&!l.ready)return!0;var f=o.layer.getSource();if(f&&f.loading)return!0}}return!1},e.prototype.getPixelFromCoordinate=function(r){var n=Ii(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},e.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?Hn(n.coordinateToPixelTransform,r.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Ao.SIZE)},e.prototype.getView=function(){return this.get(Ao.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},e.prototype.getTilePriority=function(r,n,i,o){return KUe(this.frameState_,r,n,i,o)},e.prototype.handleBrowserEvent=function(r,n){var i=n||r.type,o=new Tu(i,this,r);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,i=n.type;if(i===hI.POINTERDOWN||i===Vt.WHEEL||i===Vt.KEYDOWN){var o=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():o,f=n.target;if(this.overlayContainerStopEvent_.contains(f)||!(l===o?o.documentElement:l).contains(f))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var d=this.getInteractions().getArray().slice(),v=d.length-1;v>=0;v--){var x=d[v];if(!(x.getMap()!==this||!x.getActive()||!this.getTargetElement())){var b=x.handleEvent(r);if(!b||r.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,o=i;if(r){var l=r.viewHints;if(l[Bo.ANIMATING]||l[Bo.INTERACTING]){var f=Date.now()-r.time>8;i=f?0:8,o=f?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,o))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(Uo.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Uo.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new um(Af.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new um(Af.LOADSTART,this,r))));for(var d=this.postRenderFunctions_,v=0,x=d.length;v<x;++v)d[v](this,r);d.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)sn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Vt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Vt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,eI(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new WUe(this,this.moveTolerance_);for(var o in Qr)this.mapBrowserEventHandler_.addEventListener(Qr[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Vt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Vt.WHEEL,this.boundHandleBrowserEvent_,nN?{passive:!1}:!1);var l=this.getOwnerDocument().defaultView,f=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[qr(f,Vt.KEYDOWN,this.handleBrowserEvent,this),qr(f,Vt.KEYPRESS,this.handleBrowserEvent,this),qr(l,Vt.RESIZE,this.updateSize,this)]}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(sn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(sn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=qr(r,dc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=qr(r,Vt.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(sn),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new Xh("addlayer",r)),this.layerGroupPropertyListenerKeys_=[qr(r,dc.PROPERTYCHANGE,this.render,this),qr(r,Vt.CHANGE,this.render,this),qr(r,"addlayer",this.handleLayerAdd_,this),qr(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var o=r[n].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(r){return this.getControls().remove(r)},e.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},e.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},e.prototype.handleLayerRemove_=function(r){tBe(r.layer)},e.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},e.prototype.renderFrame_=function(r){var n=this,i=this.getSize(),o=this.getView(),l=this.frameState_,f=null;if(i!==void 0&&b9(i)&&o&&o.isDef()){var d=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),v=o.getState();if(f={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:kT(v.center,v.resolution,v.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:v,viewHints:d,wantedTiles:{},mapId:tr(this),renderTargets:{}},v.nextCenter&&v.nextResolution){var x=isNaN(v.nextRotation)?v.rotation:v.nextRotation;f.nextExtent=kT(v.nextCenter,v.nextResolution,x,i)}}if(this.frameState_=f,this.renderer_.renderFrame(f),f){if(f.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,f.postRenderFunctions),l){var b=!this.previousExtent_||!av(this.previousExtent_)&&!jh(f.extent,this.previousExtent_);b&&(this.dispatchEvent(new um(Af.MOVESTART,this,l)),this.previousExtent_=Kd(this.previousExtent_))}var A=this.previousExtent_&&!f.viewHints[Bo.ANIMATING]&&!f.viewHints[Bo.INTERACTING]&&!jh(f.extent,this.previousExtent_);A&&(this.dispatchEvent(new um(Af.MOVEEND,this,f)),sN(f.extent,this.previousExtent_))}this.dispatchEvent(new um(Af.POSTRENDER,this,f)),this.renderComplete_=this.hasListener(Af.LOADSTART)||this.hasListener(Af.LOADEND)||this.hasListener(Uo.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},e.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new Xh("removelayer",n)),this.set(Ao.LAYERGROUP,r)},e.prototype.setSize=function(r){this.set(Ao.SIZE,r)},e.prototype.setTarget=function(r){this.set(Ao.TARGET,r)},e.prototype.setView=function(r){if(!r||r instanceof Cu){this.set(Ao.VIEW,r);return}this.set(Ao.VIEW,new Cu);var n=this;r.then(function(i){n.setView(new Cu(i))})},e.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var i=getComputedStyle(r),o=r.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),l=r.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(l)&&(n=[o,l],!b9(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),r.setViewportSize(n)}},e}(So);function War(t){var e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r={},n=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new fI({layers:t.layers});r[Ao.LAYERGROUP]=n,r[Ao.TARGET]=t.target,r[Ao.VIEW]=t.view instanceof Cu?t.view:new Cu;var i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new ni(t.controls.slice()):(or(typeof t.controls.getArray=="function",47),i=t.controls));var o;t.interactions!==void 0&&(Array.isArray(t.interactions)?o=new ni(t.interactions.slice()):(or(typeof t.interactions.getArray=="function",48),o=t.interactions));var l;return t.overlays!==void 0?Array.isArray(t.overlays)?l=new ni(t.overlays.slice()):(or(typeof t.overlays.getArray=="function",49),l=t.overlays):l=new ni,{controls:i,interactions:o,keyboardEventTarget:e,overlays:l,values:r}}var nBe=Har;p();p();var Zar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yar=function(t){Zar(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var o=i.className!==void 0?i.className:"ol-attribution",l=i.tipLabel!==void 0?i.tipLabel:"Attributions",f=i.expandClassName!==void 0?i.expandClassName:o+"-expand",d=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",v=i.collapseClassName!==void 0?i.collapseClassName:o+"-collapse";typeof d=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=d,n.collapseLabel_.className=v):n.collapseLabel_=d;var x=i.label!==void 0?i.label:"i";typeof x=="string"?(n.label_=document.createElement("span"),n.label_.textContent=x,n.label_.className=f):n.label_=x;var b=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=l,n.toggleButton_.appendChild(b),n.toggleButton_.addEventListener(Vt.CLICK,n.handleClick_.bind(n),!1);var A=o+" "+Eu+" "+xf+(n.collapsed_&&n.collapsible_?" "+T9:"")+(n.collapsible_?"":" ol-uncollapsible"),P=n.element;return P.className=A,P.appendChild(n.toggleButton_),P.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return e.prototype.collectSourceAttributions_=function(r){for(var n={},i=[],o=!0,l=r.layerStatesArray,f=0,d=l.length;f<d;++f){var v=l[f];if(fv(v,r.viewState)){var x=v.layer.getSource();if(x){var b=x.getAttributions();if(b){var A=b(r);if(A)if(o=o&&x.getAttributionsCollapsible()!==!1,Array.isArray(A))for(var P=0,N=A.length;P<N;++P)A[P]in n||(i.push(A[P]),n[A[P]]=!0);else A in n||(i.push(A),n[A]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},e.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Ba(n,this.renderedAttributions_)){g4e(this.ulElement_);for(var o=0,l=n.length;o<l;++o){var f=document.createElement("li");f.innerHTML=n[o],this.ulElement_.appendChild(f)}this.renderedAttributions_=n}},e.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(T9),this.collapsed_?vx(this.collapseLabel_,this.label_):vx(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(r){this.updateElement_(r.frameState)},e}(_s),iBe=Yar;p();var Kar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xar=function(t){Kar(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=i.className!==void 0?i.className:"ol-rotate",l=i.label!==void 0?i.label:"\u21E7",f=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof l=="string"?(n.label_=document.createElement("span"),n.label_.className=f,n.label_.textContent=l):(n.label_=l,n.label_.classList.add(f));var d=i.tipLabel?i.tipLabel:"Reset rotation",v=document.createElement("button");v.className=o+"-reset",v.setAttribute("type","button"),v.title=d,v.appendChild(n.label_),v.addEventListener(Vt.CLICK,n.handleClick_.bind(n),!1);var x=o+" "+Eu+" "+xf,b=n.element;return b.className=x,b.appendChild(v),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(tI),n}return e.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Iu}):n.setRotation(0))}},e.prototype.render=function(r){var n=r.frameState;if(n){var i=n.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var l=this.element.classList.contains(tI);!l&&i===0?this.element.classList.add(tI):l&&i!==0&&this.element.classList.remove(tI)}this.label_.style.transform=o}this.rotation_=i}},e}(_s),oBe=Xar;p();var Qar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jar=function(t){Qar(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),target:i.target})||this;var o=i.className!==void 0?i.className:"ol-zoom",l=i.delta!==void 0?i.delta:1,f=i.zoomInClassName!==void 0?i.zoomInClassName:o+"-in",d=i.zoomOutClassName!==void 0?i.zoomOutClassName:o+"-out",v=i.zoomInLabel!==void 0?i.zoomInLabel:"+",x=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",b=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",A=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",P=document.createElement("button");P.className=f,P.setAttribute("type","button"),P.title=b,P.appendChild(typeof v=="string"?document.createTextNode(v):v),P.addEventListener(Vt.CLICK,n.handleClick_.bind(n,l),!1);var N=document.createElement("button");N.className=d,N.setAttribute("type","button"),N.title=A,N.appendChild(typeof x=="string"?document.createTextNode(x):x),N.addEventListener(Vt.CLICK,n.handleClick_.bind(n,-l),!1);var j=o+" "+Eu+" "+xf,D=n.element;return D.className=j,D.appendChild(P),D.appendChild(N),n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},e.prototype.zoomByDelta_=function(r){var n=this.getMap(),i=n.getView();if(i){var o=i.getZoom();if(o!==void 0){var l=i.getConstrainedZoom(o+r);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:l,duration:this.duration_,easing:Iu})):i.setZoom(l)}}},e}(_s),Dx=Jar;p();var esr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tsr=function(t){esr(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),target:i.target})||this,n.extent=i.extent?i.extent:null;var o=i.className!==void 0?i.className:"ol-zoom-extent",l=i.label!==void 0?i.label:"E",f=i.tipLabel!==void 0?i.tipLabel:"Fit to extent",d=document.createElement("button");d.setAttribute("type","button"),d.title=f,d.appendChild(typeof l=="string"?document.createTextNode(l):l),d.addEventListener(Vt.CLICK,n.handleClick_.bind(n),!1);var v=o+" "+Eu+" "+xf,x=n.element;return x.className=v,x.appendChild(d),n}return e.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(QT(i))},e}(_s),ik=tsr;function aBe(t){var e=t||{},r=new ni,n=e.zoom!==void 0?e.zoom:!0;n&&r.push(new Dx(e.zoomOptions));var i=e.rotate!==void 0?e.rotate:!0;i&&r.push(new oBe(e.rotateOptions));var o=e.attribution!==void 0?e.attribution:!0;return o&&r.push(new iBe(e.attributionOptions)),r}var rsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nsr=function(t){rsr(e,t);function e(r){return r=Xr({},r),r.controls||(r.controls=aBe()),r.interactions||(r.interactions=Lx({onFocusOnly:!0})),t.call(this,r)||this}return e.prototype.createRenderer=function(){return new $Ue(this)},e}(nBe),Nx=nsr;p();p();p();var dI={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var isr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),osr=function(t){isr(e,t);function e(r){var n=this,i=r||{},o=Xr({},i);return delete o.preload,delete o.useInterimTilesOnError,n=t.call(this,o)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return e.prototype.getPreload=function(){return this.get(dI.PRELOAD)},e.prototype.setPreload=function(r){this.set(dI.PRELOAD,r)},e.prototype.getUseInterimTilesOnError=function(){return this.get(dI.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(r){this.set(dI.USE_INTERIM_TILES_ON_ERROR,r)},e.prototype.getData=function(r){return t.prototype.getData.call(this,r)},e}(hv),ok=osr;p();p();var asr=function(){function t(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},t.prototype.forEach=function(e){for(var r=this.oldest_;r;)e(r.value_,r.key_,this),r=r.newer},t.prototype.get=function(e,r){var n=this.entries_[e];return or(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(e){var r=this.entries_[e];return or(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[e],--this.count_,r.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var e=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)e[r++]=n.key_;return e},t.prototype.getValues=function(){var e=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)e[r++]=n.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.peek=function(e){if(this.containsKey(e))return this.entries_[e].value_},t.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},t.prototype.replace=function(e,r){this.get(e),this.entries_[e].value_=r},t.prototype.set=function(e,r){or(!(e in this.entries_),16);var n={key_:e,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_},t.prototype.setSize=function(e){this.highWaterMark=e},t}(),ak=asr;p();var sBe=function(){function t(e,r,n,i){this.minX=e,this.maxX=r,this.minY=n,this.maxY=i}return t.prototype.contains=function(e){return this.containsXY(e[1],e[2])},t.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},t.prototype.containsXY=function(e,r){return this.minX<=e&&e<=this.maxX&&this.minY<=r&&r<=this.maxY},t.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},t.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},t}();function vv(t,e,r,n,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new sBe(t,e,r,n)}var kx=sBe;p();p();p();var ssr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lsr=function(t){ssr(e,t);function e(r,n,i){var o=t.call(this)||this,l=i||{};return o.tileCoord=r,o.state=n,o.interimTile=null,o.key="",o.transition_=l.transition===void 0?250:l.transition,o.transitionStarts_={},o.interpolate=!!l.interpolate,o}return e.prototype.changed=function(){this.dispatchEvent(Vt.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==Ht.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==Ht.LOADED){r.interimTile=null;break}else r.getState()==Ht.LOADING?n=r:r.getState()==Ht.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(r){if(this.state!==Ht.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},e.prototype.load=function(){ir()},e.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var i=this.transitionStarts_[r];if(!i)i=n,this.transitionStarts_[r]=i;else if(i===-1)return 1;var o=n-i+1e3/60;return o>=this.transition_?1:V9(o/this.transition_)},e.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},e.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},e}(Xs),qx=lsr;var usr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),csr=function(t){usr(e,t);function e(r){var n=this,i=Ht.IDLE;return n=t.call(this,r.tileCoord,i,{transition:r.transition,interpolate:r.interpolate})||this,n.loader_=r.loader,n.data_=null,n.error_=null,n.size_=r.size||[256,256],n}return e.prototype.getSize=function(){return this.size_},e.prototype.getData=function(){return this.data_},e.prototype.getError=function(){return this.error_},e.prototype.load=function(){if(!(this.state!==Ht.IDLE&&this.state!==Ht.ERROR)){this.state=Ht.LOADING,this.changed();var r=this;this.loader_().then(function(n){r.data_=n,r.state=Ht.LOADED,r.changed()}).catch(function(n){r.error_=n,r.state=Ht.ERROR,r.changed()})}},e}(qx),lBe=csr;p();var fsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hsr=function(t){fsr(e,t);function e(r,n,i,o,l,f){var d=t.call(this,r,n,f)||this;return d.crossOrigin_=o,d.src_=i,d.key=i,d.image_=new Image,o!==null&&(d.image_.crossOrigin=o),d.unlisten_=null,d.tileLoadFunction_=l,d}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(r){this.image_=r,this.state=Ht.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=Ht.ERROR,this.unlistenImage_(),this.image_=psr(),this.changed()},e.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=Ht.LOADED:this.state=Ht.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Ht.ERROR&&(this.state=Ht.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ht.IDLE&&(this.state=Ht.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=iI(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(qx);function psr(){var t=qi(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Qh=hsr;p();p();var uBe=.5,Mf=!0;p();var dsr=10,cBe=.25,msr=function(){function t(e,r,n,i,o,l){this.sourceProj_=e,this.targetProj_=r;var f={},d=lv(this.targetProj_,this.sourceProj_);this.transformInv_=function($){var Z=$[0]+"/"+$[1];return f[Z]||(f[Z]=d($)),f[Z]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&vn(i)==vn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?vn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?vn(this.targetProj_.getExtent()):null;var v=yu(n),x=ux(n),b=lx(n),A=sx(n),P=this.transformInv_(v),N=this.transformInv_(x),j=this.transformInv_(b),D=this.transformInv_(A),F=dsr+(l?Math.max(0,Math.ceil(hN(NT(n)/(l*l*256*256)))):0);if(this.addQuad_(v,x,b,A,P,N,j,D,F),this.wrapsXInSource_){var U=1/0;this.triangles_.forEach(function($,Z,ie){U=Math.min(U,$.source[0][0],$.source[1][0],$.source[2][0])}),this.triangles_.forEach(function($){if(Math.max($.source[0][0],$.source[1][0],$.source[2][0])-U>this.sourceWorldWidth_/2){var Z=[[$.source[0][0],$.source[0][1]],[$.source[1][0],$.source[1][1]],[$.source[2][0],$.source[2][1]]];Z[0][0]-U>this.sourceWorldWidth_/2&&(Z[0][0]-=this.sourceWorldWidth_),Z[1][0]-U>this.sourceWorldWidth_/2&&(Z[1][0]-=this.sourceWorldWidth_),Z[2][0]-U>this.sourceWorldWidth_/2&&(Z[2][0]-=this.sourceWorldWidth_);var ie=Math.min(Z[0][0],Z[1][0],Z[2][0]),ne=Math.max(Z[0][0],Z[1][0],Z[2][0]);ne-ie<this.sourceWorldWidth_/2&&($.source=Z)}}.bind(this))}f={}}return t.prototype.addTriangle_=function(e,r,n,i,o,l){this.triangles_.push({source:[i,o,l],target:[e,r,n]})},t.prototype.addQuad_=function(e,r,n,i,o,l,f,d,v){var x=Sa([o,l,f,d]),b=this.sourceWorldWidth_?vn(x)/this.sourceWorldWidth_:null,A=this.sourceWorldWidth_,P=this.sourceProj_.canWrapX()&&b>.5&&b<1,N=!1;if(v>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var j=Sa([e,r,n,i]),D=vn(j)/this.targetWorldWidth_;N=D>cBe||N}!P&&this.sourceProj_.isGlobal()&&b&&(N=b>cBe||N)}if(!(!N&&this.maxSourceExtent_&&isFinite(x[0])&&isFinite(x[1])&&isFinite(x[2])&&isFinite(x[3])&&!ki(x,this.maxSourceExtent_))){var F=0;if(!N&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(f[0])||!isFinite(f[1])||!isFinite(d[0])||!isFinite(d[1]))){if(v>0)N=!0;else if(F=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(f[0])||!isFinite(f[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),F!=1&&F!=2&&F!=4&&F!=8)return}if(v>0){if(!N){var U=[(e[0]+n[0])/2,(e[1]+n[1])/2],$=this.transformInv_(U),Z=void 0;if(P){var ie=(Ll(o[0],A)+Ll(f[0],A))/2;Z=ie-Ll($[0],A)}else Z=(o[0]+f[0])/2-$[0];var ne=(o[1]+f[1])/2-$[1],ae=Z*Z+ne*ne;N=ae>this.errorThresholdSquared_}if(N){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){var ye=[(r[0]+n[0])/2,(r[1]+n[1])/2],ge=this.transformInv_(ye),de=[(i[0]+e[0])/2,(i[1]+e[1])/2],be=this.transformInv_(de);this.addQuad_(e,r,ye,de,o,l,ge,be,v-1),this.addQuad_(de,ye,n,i,be,ge,f,d,v-1)}else{var Ne=[(e[0]+r[0])/2,(e[1]+r[1])/2],Me=this.transformInv_(Ne),ke=[(n[0]+i[0])/2,(n[1]+i[1])/2],He=this.transformInv_(ke);this.addQuad_(e,Ne,ke,i,o,Me,He,d,v-1),this.addQuad_(Ne,r,n,ke,Me,l,f,He,v-1)}return}}if(P){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(F&11)==0&&this.addTriangle_(e,n,i,o,f,d),(F&14)==0&&this.addTriangle_(e,n,r,o,f,l),F&&((F&13)==0&&this.addTriangle_(r,i,e,l,d,o),(F&7)==0&&this.addTriangle_(r,i,n,l,d,f))}},t.prototype.calculateSourceExtent=function(){var e=Bi();return this.triangles_.forEach(function(r,n,i){var o=r.source;ov(e,o[0]),ov(e,o[1]),ov(e,o[2])}),e},t.prototype.getTriangles=function(){return this.triangles_},t}(),fBe=msr;p();p();var mI={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},hBe={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var aK,lK=[];function pBe(t,e,r,n,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,i)),t.restore()}function sK(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function gsr(){if(aK===void 0){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",pBe(t,4,5,4,0),pBe(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;aK=sK(e,0)||sK(e,4)||sK(e,8)}return aK}function sk(t,e,r,n){var i=xc(r,e,t),o=n9(e,n,r),l=e.getMetersPerUnit();l!==void 0&&(o*=l);var f=t.getMetersPerUnit();f!==void 0&&(o/=f);var d=t.getExtent();if(!d||gs(d,i)){var v=n9(t,o,i)/o;isFinite(v)&&v>0&&(o/=v)}return o}function dBe(t,e,r,n){var i=Js(r),o=sk(t,e,i,n);return(!isFinite(o)||o<=0)&&ax(r,function(l){return o=sk(t,e,l,n),isFinite(o)&&o>0}),o}function mBe(t,e,r,n,i,o,l,f,d,v,x,b){var A=qi(Math.round(r*t),Math.round(r*e),lK);if(b||Xr(A,mI),d.length===0)return A.canvas;A.scale(r,r);function P(Z){return Math.round(Z*r)/r}A.globalCompositeOperation="lighter";var N=Bi();d.forEach(function(Z,ie,ne){uN(N,Z.extent)});var j=vn(N),D=zo(N),F=qi(Math.round(r*j/n),Math.round(r*D/n));b||Xr(F,mI);var U=r/n;d.forEach(function(Z,ie,ne){var ae=Z.extent[0]-N[0],ye=-(Z.extent[3]-N[3]),ge=vn(Z.extent),de=zo(Z.extent);Z.image.width>0&&Z.image.height>0&&F.drawImage(Z.image,v,v,Z.image.width-2*v,Z.image.height-2*v,ae*U,ye*U,ge*U,de*U)});var $=yu(l);return f.getTriangles().forEach(function(Z,ie,ne){var ae=Z.source,ye=Z.target,ge=ae[0][0],de=ae[0][1],be=ae[1][0],Ne=ae[1][1],Me=ae[2][0],ke=ae[2][1],He=P((ye[0][0]-$[0])/o),Ke=P(-(ye[0][1]-$[1])/o),Je=P((ye[1][0]-$[0])/o),We=P(-(ye[1][1]-$[1])/o),lt=P((ye[2][0]-$[0])/o),pt=P(-(ye[2][1]-$[1])/o),dt=ge,ze=de;ge=0,de=0,be-=dt,Ne-=ze,Me-=dt,ke-=ze;var Dt=[[be,Ne,0,0,Je-He],[Me,ke,0,0,lt-He],[0,0,be,Ne,We-Ke],[0,0,Me,ke,pt-Ke]],Ot=Eze(Dt);if(Ot){if(A.save(),A.beginPath(),gsr()||!b){A.moveTo(Je,We);for(var Ue=4,nt=He-Je,Ze=Ke-We,rt=0;rt<Ue;rt++)A.lineTo(Je+P((rt+1)*nt/Ue),We+P(rt*Ze/(Ue-1))),rt!=Ue-1&&A.lineTo(Je+P((rt+1)*nt/Ue),We+P((rt+1)*Ze/(Ue-1)));A.lineTo(lt,pt)}else A.moveTo(Je,We),A.lineTo(He,Ke),A.lineTo(lt,pt);A.clip(),A.transform(Ot[0],Ot[2],Ot[1],Ot[3],He,Ke),A.translate(N[0]-dt,N[3]-ze),A.scale(n/r,-n/r),A.drawImage(F.canvas,0,0),A.restore()}}),x&&(A.save(),A.globalCompositeOperation="source-over",A.strokeStyle="black",A.lineWidth=1,f.getTriangles().forEach(function(Z,ie,ne){var ae=Z.target,ye=(ae[0][0]-$[0])/o,ge=-(ae[0][1]-$[1])/o,de=(ae[1][0]-$[0])/o,be=-(ae[1][1]-$[1])/o,Ne=(ae[2][0]-$[0])/o,Me=-(ae[2][1]-$[1])/o;A.beginPath(),A.moveTo(de,be),A.lineTo(ye,ge),A.lineTo(Ne,Me),A.closePath(),A.stroke()}),A.restore()),A.canvas}var vsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ysr=function(t){vsr(e,t);function e(r,n,i,o,l,f,d,v,x,b,A,P){var N=t.call(this,l,Ht.IDLE,{interpolate:!!P})||this;N.renderEdges_=A!==void 0?A:!1,N.pixelRatio_=d,N.gutter_=v,N.canvas_=null,N.sourceTileGrid_=n,N.targetTileGrid_=o,N.wrappedTileCoord_=f||l,N.sourceTiles_=[],N.sourcesListenerKeys_=null,N.sourceZ_=0;var j=o.getTileCoordExtent(N.wrappedTileCoord_),D=N.targetTileGrid_.getExtent(),F=N.sourceTileGrid_.getExtent(),U=D?vu(j,D):j;if(NT(U)===0)return N.state=Ht.EMPTY,N;var $=r.getExtent();$&&(F?F=vu(F,$):F=$);var Z=o.getResolution(N.wrappedTileCoord_[0]),ie=dBe(r,i,U,Z);if(!isFinite(ie)||ie<=0)return N.state=Ht.EMPTY,N;var ne=b!==void 0?b:uBe;if(N.triangulation_=new fBe(r,i,U,F,ie*ne,Z),N.triangulation_.getTriangles().length===0)return N.state=Ht.EMPTY,N;N.sourceZ_=n.getZForResolution(ie);var ae=N.triangulation_.calculateSourceExtent();if(F&&(r.canWrapX()?(ae[1]=Yn(ae[1],F[1],F[3]),ae[3]=Yn(ae[3],F[1],F[3])):ae=vu(ae,F)),!NT(ae))N.state=Ht.EMPTY;else{for(var ye=n.getTileRangeForExtentAndZ(ae,N.sourceZ_),ge=ye.minX;ge<=ye.maxX;ge++)for(var de=ye.minY;de<=ye.maxY;de++){var be=x(N.sourceZ_,ge,de,d);be&&N.sourceTiles_.push(be)}N.sourceTiles_.length===0&&(N.state=Ht.EMPTY)}return N}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(x,b,A){x&&x.getState()==Ht.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(x.tileCoord),image:x.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=Ht.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),o=typeof i=="number"?i:i[0],l=typeof i=="number"?i:i[1],f=this.targetTileGrid_.getResolution(n),d=this.sourceTileGrid_.getResolution(this.sourceZ_),v=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=mBe(o,l,this.pixelRatio_,d,this.sourceTileGrid_.getExtent(),f,v,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ht.LOADED}this.changed()},e.prototype.load=function(){if(this.state==Ht.IDLE){this.state=Ht.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,o){var l=n.getState();if(l==Ht.IDLE||l==Ht.LOADING){r++;var f=qr(n,Vt.CHANGE,function(d){var v=n.getState();(v==Ht.LOADED||v==Ht.ERROR||v==Ht.EMPTY)&&(sn(f),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(f)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,o){var l=n.getState();l==Ht.IDLE&&n.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(sn),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&(ON(this.canvas_.getContext("2d")),lK.push(this.canvas_),this.canvas_=null),t.prototype.release.call(this)},e}(qx),Fx=ysr;p();p();var gI=34962,vI=34963,vBe=35040,jx=35044,yBe=35048,_Be=5121,xBe=5123,bBe=5125,uK=5126,gBe=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function cK(t,e){for(var r=Xr({preserveDrawingBuffer:!0,antialias:!lze},e),n=gBe.length,i=0;i<n;++i)try{var o=t.getContext(gBe[i],r);if(o)return o}catch(l){}return null}var _sr={STATIC_DRAW:jx,STREAM_DRAW:vBe,DYNAMIC_DRAW:yBe},xsr=function(){function t(e,r){this.array=null,this.type=e,or(e===gI||e===vI,62),this.usage=r!==void 0?r:_sr.STATIC_DRAW}return t.prototype.ofSize=function(e){this.array=new(fK(this.type))(e)},t.prototype.fromArray=function(e){var r=fK(this.type);this.array=r.from?r.from(e):new r(e)},t.prototype.fromArrayBuffer=function(e){this.array=new(fK(this.type))(e)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}();function fK(t){switch(t){case gI:return Float32Array;case vI:return Uint32Array;default:return Float32Array}}var lk=xsr;var bsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function EBe(t,e,r){var n=r?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function wsr(t,e,r,n){EBe(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}function wBe(t,e,r,n,i,o){var l=t.getGL(),f,d;if(r instanceof Float32Array){f=l.FLOAT,t.getExtension("OES_texture_float");var v=t.getExtension("OES_texture_float_linear");d=v!==null}else f=l.UNSIGNED_BYTE,d=!0;EBe(l,e,o&&d);var x=r.byteLength/n[1],b=1;x%8===0?b=8:x%4===0?b=4:x%2===0&&(b=2);var A;switch(i){case 1:{A=l.LUMINANCE;break}case 2:{A=l.LUMINANCE_ALPHA;break}case 3:{A=l.RGB;break}case 4:{A=l.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(i))}var P=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,b),l.texImage2D(l.TEXTURE_2D,0,A,n[0],n[1],0,A,f,r),l.pixelStorei(l.UNPACK_ALIGNMENT,P)}var zx=null;function Esr(){var t=document.createElement("canvas");t.width=1,t.height=1,zx=t.getContext("2d")}var Ssr=function(t){bsr(e,t);function e(r){var n=t.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=Xn(r.grid.getTileSize(r.tile.tileCoord[0])),n.gutter_=r.gutter||0,n.bandCount=NaN,n.helper_=r.helper;var i=new lk(gI,jx);return i.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(i),n.coords=i,n.setTile(r.tile),n}return e.prototype.setTile=function(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(Vt.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===Ht.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof Qh){var n=r.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}r.addEventListener(Vt.CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var r=this.helper_,n=r.getGL(),i=this.tile;if(i instanceof Qh||i instanceof Fx){var o=n.createTexture();this.textures.push(o),this.bandCount=4,wsr(n,o,i.getImage(),i.interpolate);return}var l=i.getSize(),f=[l[0]+2*this.gutter_,l[1]+2*this.gutter_],d=i.getData(),v=d instanceof Float32Array,x=f[0]*f[1],b=v?Float32Array:Uint8Array,A=b.BYTES_PER_ELEMENT,P=d.byteLength/f[1];this.bandCount=Math.floor(P/A/f[0]);var N=Math.ceil(this.bandCount/4);if(N===1){var o=n.createTexture();this.textures.push(o),wBe(r,o,d,f,this.bandCount,i.interpolate);return}for(var j=new Array(N),D=0;D<N;++D){var o=n.createTexture();this.textures.push(o);var F=D<N-1?4:this.bandCount%4;j[D]=new b(x*F)}for(var U=0,$=0,Z=f[0]*this.bandCount,ie=0;ie<f[1];++ie){for(var ne=0;ne<Z;++ne){var ae=d[$+ne],ye=Math.floor(U/this.bandCount),ge=ne%this.bandCount,D=Math.floor(ge/4),de=j[D],F=de.length/x,be=ge%4;de[ye*F+be]=ae,++U}$+=P/A}for(var D=0;D<N;++D){var o=this.textures[D],de=j[D],F=de.length/x;wBe(r,o,de,f,F,i.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===Ht.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(Vt.CHANGE))},e.prototype.disposeInternal=function(){var r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n]);this.tile.removeEventListener(Vt.CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(r,n){if(!this.loaded)return null;var i=this.renderSize_[0],o=this.renderSize_[1],l=this.gutter_;if(this.tile instanceof lBe){var f=this.tile.getSize(),d=f[0],v=f[1],x=d+2*l,b=v+2*l,A=l+Math.floor(d*(r/i)),P=l+Math.floor(v*(n/o)),N=this.tile.getData();if(N instanceof DataView){var j=N.byteLength/(x*b),D=j*(P*x+A),F=N.buffer.slice(D,D+j);return new DataView(F)}var U=this.bandCount*(P*x+A);return N.slice(U,U+this.bandCount)}zx||Esr(),zx.clearRect(0,0,1,1);var $=this.tile.getImage(),Z=$.width,ie=$.height,ne=Z-2*l,ae=ie-2*l,ye=l+Math.floor(ne*(r/i)),ge=l+Math.floor(ae*(n/o)),de;try{zx.drawImage($,ye,ge,1,1,0,0,1,1),de=zx.getImageData(0,0,1,1).data}catch(be){return zx=null,null}return de},e}(Xs),SBe=Ssr;p();p();p();var yI={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};p();var Tsr=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Isr=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,Asr=function(){function t(e){this.gl_=e.webGlContext;var r=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=r.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=r.createFramebuffer();var n=r.createShader(r.VERTEX_SHADER);r.shaderSource(n,e.vertexShader||Tsr),r.compileShader(n);var i=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(i,e.fragmentShader||Isr),r.compileShader(i),this.renderTargetProgram_=r.createProgram(),r.attachShader(this.renderTargetProgram_,n),r.attachShader(this.renderTargetProgram_,i),r.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=r.createBuffer();var o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.bufferData(r.ARRAY_BUFFER,new Float32Array(o),r.STATIC_DRAW),this.renderTargetAttribLocation_=r.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(l){this.uniforms_.push({value:e.uniforms[l],location:r.getUniformLocation(this.renderTargetProgram_,l)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(e){var r=this.getGL(),n=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var i=0,o=r.RGBA,l=0,f=r.RGBA,d=r.UNSIGNED_BYTE,v=null;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,i,o,n[0],n[1],l,f,d,v),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(e,r,n,i){var o=this.getGL(),l=e.size;if(o.bindFramebuffer(o.FRAMEBUFFER,r?r.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!r){var f=tr(o.canvas);if(!e.renderTargets[f]){var d=o.getContextAttributes();d&&d.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),e.renderTargets[f]=!0}}o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,l[0],l[1]),o.uniform1i(this.renderTargetTextureLocation_,0);var v=e.layerStatesArray[e.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,v),this.applyUniforms(e),n&&n(o,e),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,e)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(e){var r=this.getGL(),n,i=1;this.uniforms_.forEach(function(o){if(n=typeof o.value=="function"?o.value(e):o.value,n instanceof HTMLCanvasElement||n instanceof ImageData)o.texture||(o.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(i)]),r.bindTexture(r.TEXTURE_2D,o.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,n.width,n.height,0,r.UNSIGNED_BYTE,new Uint8Array(n.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.uniform1i(o.location,i++);else if(Array.isArray(n))switch(n.length){case 2:r.uniform2f(o.location,n[0],n[1]);return;case 3:r.uniform3f(o.location,n[0],n[1],n[2]);return;case 4:r.uniform4f(o.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&r.uniform1f(o.location,n)})},t}(),hK=Asr;p();function uk(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ux(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var Msr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var _I={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},Bx={UNSIGNED_BYTE:_Be,UNSIGNED_SHORT:xBe,UNSIGNED_INT:bBe,FLOAT:uK},ck={};function TBe(t){return"shared/"+t}var IBe=0;function Csr(){var t="unique/"+IBe;return IBe+=1,t}function Psr(t){var e=ck[t];if(!e){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",e={users:0,canvas:r},ck[t]=e}return e.users+=1,e.canvas}function Rsr(t){var e=ck[t];if(e&&(e.users-=1,!(e.users>0))){var r=e.canvas,n=cK(r),i=n.getExtension("WEBGL_lose_context");i&&i.loseContext(),delete ck[t]}}var Osr=function(t){Msr(e,t);function e(r){var n=t.call(this)||this,i=r||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=i.canvasCacheKey?TBe(i.canvasCacheKey):Csr(),n.canvas_=Psr(n.canvasCacheKey_),n.gl_=cK(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(yI.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(yI.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Ui(),n.offsetScaleMatrix_=Ui(),n.tmpMat4_=uk(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],i.uniforms&&n.setUniforms(i.uniforms);var o=n.getGL();return n.postProcessPasses_=i.postProcesses?i.postProcesses.map(function(l){return new hK({webGlContext:o,scaleRatio:l.scaleRatio,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,uniforms:l.uniforms})}):[new hK({webGlContext:o})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return e.prototype.setUniforms=function(r){this.uniforms_=[];for(var n in r)this.uniforms_.push({name:n,value:r[n]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(r){return this.canvasCacheKey_===TBe(r)},e.prototype.getExtension=function(r){if(r in this.extensionCache_)return this.extensionCache_[r];var n=this.gl_.getExtension(r);return this.extensionCache_[r]=n,n},e.prototype.bindBuffer=function(r){var n=this.getGL(),i=tr(r),o=this.bufferCache_[i];if(!o){var l=n.createBuffer();o={buffer:r,webGlBuffer:l},this.bufferCache_[i]=o}n.bindBuffer(r.getType(),o.webGlBuffer)},e.prototype.flushBufferData=function(r){var n=this.getGL();this.bindBuffer(r),n.bufferData(r.getType(),r.getArray(),r.getUsage())},e.prototype.deleteBuffer=function(r){var n=this.getGL(),i=tr(r),o=this.bufferCache_[i];o&&!n.isContextLost()&&n.deleteBuffer(o.webGlBuffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(yI.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(yI.RESTORED,this.boundHandleWebGLContextRestored_),Rsr(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(r,n){var i=this.getGL(),o=this.getCanvas(),l=r.size,f=r.pixelRatio;o.width=l[0]*f,o.height=l[1]*f,o.style.width=l[0]+"px",o.style.height=l[1]+"px",i.useProgram(this.currentProgram_);for(var d=this.postProcessPasses_.length-1;d>=0;d--)this.postProcessPasses_[d].init(r);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},e.prototype.prepareDrawToRenderTarget=function(r,n,i){var o=this.getGL(),l=n.getSize();o.bindFramebuffer(o.FRAMEBUFFER,n.getFramebuffer()),o.viewport(0,0,l[0],l[1]),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,i?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},e.prototype.drawElements=function(r,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var o=i.UNSIGNED_INT,l=4,f=n-r,d=r*l;i.drawElements(i.TRIANGLES,f,o,d)},e.prototype.finalizeDraw=function(r,n,i){for(var o=0,l=this.postProcessPasses_.length;o<l;o++)o===l-1?this.postProcessPasses_[o].apply(r,null,n,i):this.postProcessPasses_[o].apply(r,this.postProcessPasses_[o+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(r){var n=r.size,i=r.viewState.rotation,o=nx(this.offsetScaleMatrix_);LT(o,2/n[0],2/n[1]);var l=nx(this.offsetRotateMatrix_);i!==0&&iN(l,-i),this.setUniformMatrixValue(_I.OFFSET_SCALE_MATRIX,Ux(this.tmpMat4_,o)),this.setUniformMatrixValue(_I.OFFSET_ROTATION_MATRIX,Ux(this.tmpMat4_,l)),this.setUniformFloatValue(_I.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(_I.ZOOM,r.viewState.zoom),this.setUniformFloatValue(_I.RESOLUTION,r.viewState.resolution)},e.prototype.applyUniforms=function(r){var n=this.getGL(),i,o=0;this.uniforms_.forEach(function(l){if(i=typeof l.value=="function"?l.value(r):l.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData){l.texture||(l.prevValue=void 0,l.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(o)]),n.bindTexture(n.TEXTURE_2D,l.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var f=!(i instanceof HTMLImageElement)||i.complete;f&&l.prevValue!==i&&(l.prevValue=i,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i)),n.uniform1i(this.getUniformLocation(l.name),o++)}else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(l.name,Ux(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:n.uniform2f(this.getUniformLocation(l.name),i[0],i[1]);return;case 3:n.uniform3f(this.getUniformLocation(l.name),i[0],i[1],i[2]);return;case 4:n.uniform4f(this.getUniformLocation(l.name),i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&n.uniform1f(this.getUniformLocation(l.name),i)}.bind(this))},e.prototype.useProgram=function(r){if(r==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(r),this.currentProgram_=r,this.uniformLocations_={},this.attribLocations_={},!0},e.prototype.compileShader=function(r,n){var i=this.getGL(),o=i.createShader(n);return i.shaderSource(o,r),i.compileShader(o),o},e.prototype.getProgram=function(r,n){var i=this.getGL(),o=this.compileShader(r,i.FRAGMENT_SHADER),l=this.compileShader(n,i.VERTEX_SHADER),f=i.createProgram();if(i.attachShader(f,o),i.attachShader(f,l),i.linkProgram(f),!i.getShaderParameter(o,i.COMPILE_STATUS)){var d="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(o));throw new Error(d)}if(i.deleteShader(o),!i.getShaderParameter(l,i.COMPILE_STATUS)){var d="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(l));throw new Error(d)}if(i.deleteShader(l),!i.getProgramParameter(f,i.LINK_STATUS)){var d="GL program linking failed: ".concat(i.getShaderInfoLog(l));throw new Error(d)}return f},e.prototype.getUniformLocation=function(r){return this.uniformLocations_[r]===void 0&&(this.uniformLocations_[r]=this.getGL().getUniformLocation(this.currentProgram_,r)),this.uniformLocations_[r]},e.prototype.getAttributeLocation=function(r){return this.attribLocations_[r]===void 0&&(this.attribLocations_[r]=this.getGL().getAttribLocation(this.currentProgram_,r)),this.attribLocations_[r]},e.prototype.makeProjectionTransform=function(r,n){var i=r.size,o=r.viewState.rotation,l=r.viewState.resolution,f=r.viewState.center;return nx(n),To(n,0,0,2/(l*i[0]),2/(l*i[1]),-o,-f[0],-f[1]),n},e.prototype.setUniformFloatValue=function(r,n){this.getGL().uniform1f(this.getUniformLocation(r),n)},e.prototype.setUniformFloatVec4=function(r,n){this.getGL().uniform4fv(this.getUniformLocation(r),n)},e.prototype.setUniformMatrixValue=function(r,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(r),!1,n)},e.prototype.enableAttributeArray_=function(r,n,i,o,l){var f=this.getAttributeLocation(r);f<0||(this.getGL().enableVertexAttribArray(f),this.getGL().vertexAttribPointer(f,n,i,!1,o,l))},e.prototype.enableAttributes=function(r){for(var n=Lsr(r),i=0,o=0;o<r.length;o++){var l=r[o];this.enableAttributeArray_(l.name,l.size,l.type||uK,n,i),i+=l.size*ABe(l.type)}},e.prototype.handleWebGLContextLost=function(){Ks(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(r,n,i){var o=this.getGL(),l=i||o.createTexture(),f=0,d=o.RGBA,v=0,x=o.RGBA,b=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,l),n?o.texImage2D(o.TEXTURE_2D,f,d,x,b,n):o.texImage2D(o.TEXTURE_2D,f,d,r[0],r[1],v,x,b,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),l},e}(Wd);function Lsr(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*ABe(n.type)}return e}function ABe(t){switch(t){case Bx.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Bx.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Bx.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Bx.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var MBe=Osr;var Dsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Nsr=function(t){Dsr(e,t);function e(r,n){var i=t.call(this,r)||this,o=n||{};return i.inversePixelTransform_=Ui(),i.pixelContext_=null,i.postProcesses_=o.postProcesses,i.uniforms_=o.uniforms,i.helper,r.addChangeListener(yn.MAP,i.removeHelper.bind(i)),i.dispatchPreComposeEvent=i.dispatchPreComposeEvent.bind(i),i.dispatchPostComposeEvent=i.dispatchPostComposeEvent.bind(i),i}return e.prototype.dispatchPreComposeEvent=function(r,n){var i=this.getLayer();if(i.hasListener(Uo.PRECOMPOSE)){var o=new im(Uo.PRECOMPOSE,void 0,n,r);i.dispatchEvent(o)}},e.prototype.dispatchPostComposeEvent=function(r,n){var i=this.getLayer();if(i.hasListener(Uo.POSTCOMPOSE)){var o=new im(Uo.POSTCOMPOSE,void 0,n,r);i.dispatchEvent(o)}},e.prototype.reset=function(r){this.uniforms_=r.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},e.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(r){if(this.getLayer().getRenderSource()){for(var n=!0,i=-1,o=void 0,l=0,f=r.layerStatesArray.length;l<f;l++){var d=r.layerStatesArray[l].layer,v=d.getRenderer();if(!(v instanceof e)){n=!0;continue}var x=d.getClassName();if((n||x!==o)&&(i+=1,n=!1),o=x,v===this)break}var b="map/"+r.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(b))&&(this.removeHelper(),this.helper=new MBe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:b}),o&&(this.helper.getCanvas().className=o),this.afterHelperCreated())}return this.prepareFrameInternal(r)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(r){return!0},e.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},e.prototype.dispatchRenderEvent_=function(r,n,i){var o=this.getLayer();if(o.hasListener(r)){To(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var l=new im(r,this.inversePixelTransform_,i,n);o.dispatchEvent(l)}},e.prototype.preRender=function(r,n){this.dispatchRenderEvent_(Uo.PRERENDER,r,n)},e.prototype.postRender=function(r,n){this.dispatchRenderEvent_(Uo.POSTRENDER,r,n)},e.prototype.getDataAtPixel=function(r,n,i){var o=Hn([n.pixelRatio,0,0,n.pixelRatio,0,0],r.slice()),l=this.helper.getGL();if(!l)return null;var f=this.getLayer(),d=f.getExtent();if(d){var v=Hn(n.pixelToCoordinateTransform,r.slice());if(!gs(d,v))return null}var x=l.getContextAttributes();if(!x||!x.preserveDrawingBuffer)return new Uint8Array;var b=Math.round(o[0]),A=Math.round(o[1]),P=this.pixelContext_;if(!P){var N=document.createElement("canvas");N.width=1,N.height=1,P=N.getContext("2d"),this.pixelContext_=P}P.clearRect(0,0,1,1);var j;try{P.drawImage(l.canvas,b,A,1,1,0,0,1,1),j=P.getImageData(0,0,1,1).data}catch(D){return j}return j[3]===0?null:j},e}(FN);var CBe=Nsr;p();function Vx(t,e,r,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function yv(t,e,r){return t+"/"+e+"/"+r}function pm(t){return yv(t[0],t[1],t[2])}function PBe(t){return t.split("/").map(Number)}function fk(t){return(t[1]<<t[0])+t[2]}function RBe(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o=e.getFullTileRange(r);return o?o.containsXY(n,i):!0}var ksr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ur={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},xI={TEXTURE_COORD:"a_textureCoord"},qsr=[{name:xI.TEXTURE_COORD,size:2,type:Bx.FLOAT}],Fsr={};function jsr(t){return 2*(1-1/(t+1))-1}function OBe(t,e,r){r in t||(t[r]=[]),t[r].push(e)}function pK(t,e){var r=t.layerStatesArray[t.layerIndex];r.extent&&(e=vu(e,Ha(r.extent,t.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=vu(e,i))}return e}function dK(t,e){return"".concat(t.getKey(),",").concat(pm(e))}var zsr=function(t){ksr(e,t);function e(r,n){var i=t.call(this,r,{uniforms:n.uniforms})||this;i.renderComplete=!1,i.tileTransform_=Ui(),i.tempMat4_=uk(),i.tempTileRange_=new kx(0,0,0,0),i.tempTileCoord_=Vx(0,0,0),i.tempSize_=[0,0],i.program_,i.vertexShader_=n.vertexShader,i.fragmentShader_=n.fragmentShader,i.indices_=new lk(vI,jx),i.indices_.fromArray([0,1,3,1,2,3]);var o=n.cacheSize!==void 0?n.cacheSize:512;return i.tileTextureCache_=new ak(o),i.paletteTextures_=n.paletteTextures||[],i.frameState_=null,i}return e.prototype.reset=function(r){t.prototype.reset.call(this,{uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(r){var n=this.getLayer(),i=r.getState(),o=n.getUseInterimTilesOnError();return i==Ht.LOADED||i==Ht.EMPTY||i==Ht.ERROR&&!o},e.prototype.prepareFrameInternal=function(r){var n=this.getLayer(),i=n.getRenderSource();return!i||av(pK(r,r.extent))?!1:i.getState()==="ready"},e.prototype.enqueueTiles=function(r,n,i,o){var l=r.viewState,f=this.getLayer(),d=f.getRenderSource(),v=d.getTileGridForProjection(l.projection),x=d.getGutterForProjection(l.projection),b=tr(d);b in r.wantedTiles||(r.wantedTiles[b]={});for(var A=r.wantedTiles[b],P=this.tileTextureCache_,N=Math.max(i-f.getPreload(),v.getMinZoom(),f.getMinZoom()),j=i;j>=N;--j)for(var D=v.getTileRangeForExtentAndZ(n,j,this.tempTileRange_),F=v.getResolution(j),U=D.minX;U<=D.maxX;++U)for(var $=D.minY;$<=D.maxY;++$){var Z=Vx(j,U,$,this.tempTileCoord_),ie=dK(d,Z),ne=void 0,ae=void 0;if(P.containsKey(ie)&&(ne=P.get(ie),ae=ne.tile),!ne||ne.tile.key!==d.getKey())if(ae=d.getTile(j,U,$,r.pixelRatio,l.projection),!ne)ne=new SBe({tile:ae,grid:v,helper:this.helper,gutter:x}),P.set(ie,ne);else if(this.isDrawableTile_(ae))ne.setTile(ae);else{var ye=ae.getInterimTile();ne.setTile(ye)}OBe(o,ne,j);var ge=ae.getKey();A[ge]=!0,ae.getState()===Ht.IDLE&&(r.tileQueue.isKeyQueued(ge)||r.tileQueue.enqueue([ae,b,v.getTileCoordCenter(Z),F]))}},e.prototype.renderFrame=function(r){this.frameState_=r,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,r);var i=r.viewState,o=this.getLayer(),l=o.getRenderSource(),f=l.getTileGridForProjection(i.projection),d=l.getGutterForProjection(i.projection),v=pK(r,r.extent),x=f.getZForResolution(i.resolution,l.zDirection),b={};if(r.nextExtent){var A=f.getZForResolution(i.nextResolution,l.zDirection),P=pK(r,r.nextExtent);this.enqueueTiles(r,P,A,b)}this.enqueueTiles(r,v,x,b);for(var N={},j=tr(this),D=r.time,F=!1,U=b[x],$=0,Z=U.length;$<Z;++$){var ie=U[$],ne=ie.tile,ae=ne.tileCoord;if(ie.loaded){var ye=ne.getAlpha(j,D);if(ye===1){ne.endTransition(j);continue}F=!0;var ge=pm(ae);N[ge]=ye}this.renderComplete=!1;var de=this.findAltTiles_(f,ae,x+1,b);if(!de)for(var be=f.getMinZoom(),Ne=x-1;Ne>=be;--Ne){var Me=this.findAltTiles_(f,ae,Ne,b);if(Me)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(r,!F);for(var ke=Object.keys(b).map(Number).sort(Pl),He=i.center[0],Ke=i.center[1],Je=0,We=ke.length;Je<We;++Je)for(var lt=ke[Je],pt=f.getResolution(lt),dt=Xn(f.getTileSize(lt),this.tempSize_),ze=f.getOrigin(lt),Dt=dt[0]+2*d,Ot=dt[1]+2*d,Ue=Dt/Ot,nt=(He-ze[0])/(dt[0]*pt),Ze=(ze[1]-Ke)/(dt[1]*pt),rt=i.resolution/pt,at=jsr(lt),ot=b[lt],$=0,Z=ot.length;$<Z;++$){var ie=ot[$];if(ie.loaded){var ne=ie.tile,ae=ne.tileCoord,ge=pm(ae),Lt=ae[1],zt=ae[2];nx(this.tileTransform_),LT(this.tileTransform_,2/(r.size[0]*rt/Dt),-2/(r.size[1]*rt/Dt)),iN(this.tileTransform_,i.rotation),LT(this.tileTransform_,1,1/Ue),mze(this.tileTransform_,(dt[0]*(Lt-nt)-d)/Dt,(dt[1]*(zt-Ze)-d)/Ot),this.helper.setUniformMatrixValue(Ur.TILE_TRANSFORM,Ux(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(ie.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(qsr);for(var Pt=0;Pt<ie.textures.length;){var $t="TEXTURE"+Pt,Xt="".concat(Ur.TILE_TEXTURE_ARRAY,"[").concat(Pt,"]");n.activeTexture(n[$t]),n.bindTexture(n.TEXTURE_2D,ie.textures[Pt]),n.uniform1i(this.helper.getUniformLocation(Xt),Pt),++Pt}for(var Gt=0;Gt<this.paletteTextures_.length;++Gt){var Sr=this.paletteTextures_[Gt];n.activeTexture(n["TEXTURE"+Pt]);var zr=Sr.getTexture(n);n.bindTexture(n.TEXTURE_2D,zr),n.uniform1i(this.helper.getUniformLocation(Sr.name),Pt),++Pt}var ye=ge in N?N[ge]:1;ye<1&&(r.animate=!0),this.helper.setUniformFloatValue(Ur.TRANSITION_ALPHA,ye),this.helper.setUniformFloatValue(Ur.DEPTH,at),this.helper.setUniformFloatValue(Ur.TEXTURE_PIXEL_WIDTH,Dt),this.helper.setUniformFloatValue(Ur.TEXTURE_PIXEL_HEIGHT,Ot),this.helper.setUniformFloatValue(Ur.TEXTURE_RESOLUTION,pt),this.helper.setUniformFloatValue(Ur.TEXTURE_ORIGIN_X,ze[0]+Lt*dt[0]*pt-d*pt),this.helper.setUniformFloatValue(Ur.TEXTURE_ORIGIN_Y,ze[1]-zt*dt[1]*pt+d*pt);var vr=v;d>0&&(vr=f.getTileCoordExtent(ae),vu(vr,v,vr)),this.helper.setUniformFloatVec4(Ur.RENDER_EXTENT,vr),this.helper.setUniformFloatValue(Ur.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Ur.ZOOM,i.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var pr=this.helper.getCanvas(),dr=this.tileTextureCache_;dr.canExpireCache();){var ie=dr.pop();ie.dispose()}var wr=function(un,Sn){l.expireCache(Sn.viewState.projection,Fsr)};return r.postRenderFunctions.push(wr),this.postRender(n,r),pr},e.prototype.getData=function(r){var n=this.helper.getGL();if(!n)return null;var i=this.frameState_;if(!i)return null;var o=this.getLayer(),l=Hn(i.pixelToCoordinateTransform,r.slice()),f=i.viewState,d=o.getExtent();if(d&&!gs(Ha(d,f.projection),l))return null;var v=o.getSources(Sa([l]),f.resolution),x,b,A;for(x=v.length-1;x>=0;--x)if(b=v[x],b.getState()==="ready"){if(A=b.getTileGridForProjection(f.projection),b.getWrapX())break;var P=A.getExtent();if(!P||gs(P,l))break}if(x<0)return null;for(var N=this.tileTextureCache_,j=A.getZForResolution(f.resolution);j>=A.getMinZoom();--j){var D=A.getTileCoordForCoordAndZ(l,j),F=dK(b,D);if(N.containsKey(F)){var U=N.get(F);if(U.loaded){var $=A.getOrigin(j),Z=Xn(A.getTileSize(j)),ie=A.getResolution(j),ne=(l[0]-$[0])/ie-D[1]*Z[0],ae=($[1]-l[1])/ie-D[2]*Z[1];return U.getPixelData(ne,ae)}}}return null},e.prototype.findAltTiles_=function(r,n,i,o){var l=r.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!l)return!1;for(var f=!0,d=this.tileTextureCache_,v=this.getLayer().getRenderSource(),x=l.minX;x<=l.maxX;++x)for(var b=l.minY;b<=l.maxY;++b){var A=dK(v,[i,x,b]),P=!1;if(d.containsKey(A)){var N=d.get(A);N.loaded&&(OBe(o,N,i),P=!0)}P||(f=!1)}return f},e.prototype.removeHelper=function(){if(this.helper){var r=this.tileTextureCache_;r.forEach(function(n){return n.dispose()}),r.clear()}t.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var r=this.helper;if(r){var n=r.getGL();n.deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)}t.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},e}(CBe),LBe=zsr;p();p();var Usr=function(){function t(e,r){this.name=e,this.data=r,this.texture_=null}return t.prototype.getTexture=function(e){if(!this.texture_){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=r}return this.texture_},t}(),DBe=Usr;var Qt={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},tn={};function Cf(t){if(typeof t=="number")return Qt.NUMBER;if(typeof t=="boolean")return Qt.BOOLEAN;if(typeof t=="string")return m4e(t)?Qt.COLOR|Qt.STRING:Qt.STRING;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var e=t,r=e.every(function(i){return typeof i=="number"});if(r)return e.length===3||e.length===4?Qt.COLOR|Qt.NUMBER_ARRAY:Qt.NUMBER_ARRAY;if(typeof e[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var n=tn[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.getReturnType(e.slice(1))}function Bsr(t){return hN(t)%1===0}function hk(t){var e=t.toString();return e.indexOf(".")===-1?e+".0":e}function NBe(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(hk).join(", "),")")}function Vsr(t){var e=Uh(t).slice();return e.length<4&&e.push(1),NBe(e.map(function(r,n){return n<3?r/255:r}))}function gK(t,e){return t.stringLiteralsMap[e]===void 0&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function Gsr(t,e){return hk(gK(t,e))}function rr(t,e,r){if(Array.isArray(e)&&typeof e[0]=="string"){var n=tn[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.toGlsl(t,e.slice(1),r)}var i=Cf(e);if((i&Qt.NUMBER)>0)return hk(e);if((i&Qt.BOOLEAN)>0)return e.toString();if((i&Qt.STRING)>0&&(r===void 0||r==Qt.STRING))return Gsr(t,e.toString());if((i&Qt.COLOR)>0&&(r===void 0||r==Qt.COLOR))return Vsr(e);if((i&Qt.NUMBER_ARRAY)>0)return NBe(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(r,")"))}function kBe(t){if(!(Cf(t)&Qt.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function uo(t){for(var e=0;e<t.length;e++)kBe(t[e])}function qBe(t){if(!(Cf(t)&Qt.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function vK(t){if(!(Cf(t)&Qt.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function yi(t,e){if(t.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function dm(t,e){if(t.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function pk(t,e){if(t.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function FBe(t){if(t.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function $sr(t){if(t.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}function yK(t,e){if(!Bsr(e))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}tn.get={getReturnType:function(t){return Qt.ANY},toGlsl:function(t,e){yi(e,1),qBe(e[0]);var r=e[0].toString();t.attributes.indexOf(r)===-1&&t.attributes.push(r);var n=t.inFragmentShader?"v_":"a_";return n+r}};function _K(t){return"u_var_"+t}tn.var={getReturnType:function(t){return Qt.ANY},toGlsl:function(t,e){yi(e,1),qBe(e[0]);var r=e[0].toString();return t.variables.indexOf(r)===-1&&t.variables.push(r),_K(r)}};var xK="u_paletteTextures";tn.palette={getReturnType:function(t){return Qt.COLOR},toGlsl:function(t,e){yi(e,2),kBe(e[0]);var r=rr(t,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=n.length,o=new Uint8Array(i*4),l=0;l<i;l++){var f=n[l],d=void 0;if(typeof f=="string")d=w9(f);else{if(!Array.isArray(f))throw new Error("The second argument of palette must be an array of strings or colors");var v=f.length;if(v===4)d=f;else{if(v!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(v));d=[f[0],f[1],f[2],1]}}var x=l*4;o[x]=d[0],o[x+1]=d[1],o[x+2]=d[2],o[x+3]=d[3]*255}t.paletteTextures||(t.paletteTextures=[]);var b="".concat(xK,"[").concat(t.paletteTextures.length,"]"),A=new DBe(b,o);return t.paletteTextures.push(A),"texture2D(".concat(b,", vec2((").concat(r," + 0.5) / ").concat(i,".0, 0.5))")}};var mK="getBandValue";tn.band={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){dm(e,1),pk(e,3);var r=e[0];if(!(mK in t.functions)){for(var n="",i=t.bandCount||1,o=0;o<i;o++){var l=Math.floor(o/4),f=o%4;f===i-1&&f===1&&(f=3);var d="".concat(Ur.TILE_TEXTURE_ARRAY,"[").concat(l,"]");n+=`
          if (band == `.concat(o+1,`.0) {
            return texture2D(`).concat(d,", v_textureCoord + vec2(dx, dy))[").concat(f,`];
          }
        `)}t.functions[mK]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(Ur.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(Ur.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var v=rr(t,r),x=rr(t,e[1]||0),b=rr(t,e[2]||0);return"".concat(mK,"(").concat(v,", ").concat(x,", ").concat(b,")")}};tn.time={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,0),"u_time"}};tn.zoom={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,0),"u_zoom"}};tn.resolution={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,0),"u_resolution"}};tn["*"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,2),uo(e),"(".concat(rr(t,e[0])," * ").concat(rr(t,e[1]),")")}};tn["/"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,2),uo(e),"(".concat(rr(t,e[0])," / ").concat(rr(t,e[1]),")")}};tn["+"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,2),uo(e),"(".concat(rr(t,e[0])," + ").concat(rr(t,e[1]),")")}};tn["-"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,2),uo(e),"(".concat(rr(t,e[0])," - ").concat(rr(t,e[1]),")")}};tn.clamp={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){yi(e,3),uo(e);var r=rr(t,e[1]),n=rr(t,e[2]);return"clamp(".concat(rr(t,e[0]),", ").concat(r,", ").concat(n,")")}};tn["%"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,2),uo(e),"mod(".concat(rr(t,e[0]),", ").concat(rr(t,e[1]),")")}};tn["^"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,2),uo(e),"pow(".concat(rr(t,e[0]),", ").concat(rr(t,e[1]),")")}};tn.abs={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,1),uo(e),"abs(".concat(rr(t,e[0]),")")}};tn.floor={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,1),uo(e),"floor(".concat(rr(t,e[0]),")")}};tn.round={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,1),uo(e),"floor(".concat(rr(t,e[0])," + 0.5)")}};tn.ceil={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,1),uo(e),"ceil(".concat(rr(t,e[0]),")")}};tn.sin={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,1),uo(e),"sin(".concat(rr(t,e[0]),")")}};tn.cos={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return yi(e,1),uo(e),"cos(".concat(rr(t,e[0]),")")}};tn.atan={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return dm(e,1),pk(e,2),uo(e),e.length===2?"atan(".concat(rr(t,e[0]),", ").concat(rr(t,e[1]),")"):"atan(".concat(rr(t,e[0]),")")}};tn[">"]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return yi(e,2),uo(e),"(".concat(rr(t,e[0])," > ").concat(rr(t,e[1]),")")}};tn[">="]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return yi(e,2),uo(e),"(".concat(rr(t,e[0])," >= ").concat(rr(t,e[1]),")")}};tn["<"]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return yi(e,2),uo(e),"(".concat(rr(t,e[0])," < ").concat(rr(t,e[1]),")")}};tn["<="]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return yi(e,2),uo(e),"(".concat(rr(t,e[0])," <= ").concat(rr(t,e[1]),")")}};function jBe(t){return{getReturnType:function(e){return Qt.BOOLEAN},toGlsl:function(e,r){yi(r,2);for(var n=Qt.ANY,i=0;i<r.length;i++)n&=Cf(r[i]);if(n===Qt.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~Qt.COLOR,"(".concat(rr(e,r[0],n)," ").concat(t," ").concat(rr(e,r[1],n),")")}}}tn["=="]=jBe("==");tn["!="]=jBe("!=");tn["!"]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return yi(e,1),vK(e[0]),"(!".concat(rr(t,e[0]),")")}};function zBe(t){return{getReturnType:function(e){return Qt.BOOLEAN},toGlsl:function(e,r){dm(r,2);for(var n=0;n<r.length;n++)vK(r[n]);var i="";return i=r.map(function(o){return rr(e,o)}).join(" ".concat(t," ")),i="(".concat(i,")"),i}}}tn.all=zBe("&&");tn.any=zBe("||");tn.between={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){yi(e,3),uo(e);var r=rr(t,e[1]),n=rr(t,e[2]),i=rr(t,e[0]);return"(".concat(i," >= ").concat(r," && ").concat(i," <= ").concat(n,")")}};tn.array={getReturnType:function(t){return Qt.NUMBER_ARRAY},toGlsl:function(t,e){dm(e,2),pk(e,4),uo(e);var r=e.map(function(n){return rr(t,n,Qt.NUMBER)});return"vec".concat(e.length,"(").concat(r.join(", "),")")}};tn.color={getReturnType:function(t){return Qt.COLOR},toGlsl:function(t,e){dm(e,3),pk(e,4),uo(e);var r=e;e.length===3&&r.push(1);var n=e.map(function(i,o){return rr(t,i,Qt.NUMBER)+(o<3?" / 255.0":"")});return"vec".concat(e.length,"(").concat(n.join(", "),")")}};tn.interpolate={getReturnType:function(t){for(var e=Qt.COLOR|Qt.NUMBER,r=3;r<t.length;r+=2)e=e&Cf(t[r]);return e},toGlsl:function(t,e,r){FBe(e),dm(e,6);var n=e[0],i;switch(n[0]){case"linear":i=1;break;case"exponential":i=n[1];break;default:i=null}if(!i)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var o=r!==void 0?r:Qt.ANY,l=tn.interpolate.getReturnType(e)&o;yK(e,l);for(var f=rr(t,e[1]),d=hk(i),v="",x=2;x<e.length-2;x+=2){var b=rr(t,e[x]),A=v||rr(t,e[x+1],l),P=rr(t,e[x+2]),N=rr(t,e[x+3],l);v="mix(".concat(A,", ").concat(N,", pow(clamp((").concat(f," - ").concat(b,") / (").concat(P," - ").concat(b,"), 0.0, 1.0), ").concat(d,"))")}return v}};tn.match={getReturnType:function(t){for(var e=Qt.ANY,r=2;r<t.length;r+=2)e=e&Cf(t[r]);return e=e&Cf(t[t.length-1]),e},toGlsl:function(t,e,r){FBe(e),dm(e,4);var n=r!==void 0?r:Qt.ANY,i=tn.match.getReturnType(e)&n;yK(e,i);for(var o=rr(t,e[0]),l=rr(t,e[e.length-1],i),f=null,d=e.length-3;d>=1;d-=2){var v=rr(t,e[d]),x=rr(t,e[d+1],i);f="(".concat(o," == ").concat(v," ? ").concat(x," : ").concat(f||l,")")}return f}};tn.case={getReturnType:function(t){for(var e=Qt.ANY,r=1;r<t.length;r+=2)e=e&Cf(t[r]);return e=e&Cf(t[t.length-1]),e},toGlsl:function(t,e,r){$sr(e),dm(e,3);var n=r!==void 0?r:Qt.ANY,i=tn.case.getReturnType(e)&n;yK(e,i);for(var o=0;o<e.length-1;o+=2)vK(e[o]);for(var l=rr(t,e[e.length-1],i),f=null,o=e.length-3;o>=0;o-=2){var d=rr(t,e[o]),v=rr(t,e[o+1],i);f="(".concat(d," ? ").concat(v," : ").concat(f||l,")")}return f}};var Hsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function UBe(t,e){var r=`
    attribute vec2 `.concat(xI.TEXTURE_COORD,`;
    uniform mat4 `).concat(Ur.TILE_TRANSFORM,`;
    uniform float `).concat(Ur.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Ur.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Ur.TEXTURE_RESOLUTION,`;
    uniform float `).concat(Ur.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(Ur.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(Ur.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(xI.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(Ur.TEXTURE_ORIGIN_X," + ").concat(Ur.TEXTURE_RESOLUTION," * ").concat(Ur.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(Ur.TEXTURE_ORIGIN_Y," - ").concat(Ur.TEXTURE_RESOLUTION," * ").concat(Ur.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(Ur.TILE_TRANSFORM," * vec4(").concat(xI.TEXTURE_COORD,", ").concat(Ur.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},i=[];if(t.color!==void 0){var o=rr(n,t.color,Qt.COLOR);i.push("color = ".concat(o,";"))}if(t.contrast!==void 0){var l=rr(n,t.contrast,Qt.NUMBER);i.push("color.rgb = clamp((".concat(l," + 1.0) * color.rgb - (").concat(l," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(t.exposure!==void 0){var f=rr(n,t.exposure,Qt.NUMBER);i.push("color.rgb = clamp((".concat(f," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(t.saturation!==void 0){var d=rr(n,t.saturation,Qt.NUMBER);i.push(`
      float saturation = `.concat(d,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(t.gamma!==void 0){var v=rr(n,t.gamma,Qt.NUMBER);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(v,"));"))}if(t.brightness!==void 0){var x=rr(n,t.brightness,Qt.NUMBER);i.push("color.rgb = clamp(color.rgb + ".concat(x,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var b={},A=n.variables.length;if(A>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var P=function($){var Z=n.variables[$];if(!(Z in t.variables))throw new Error("Missing '".concat(Z,"' in style variables"));var ie=_K(Z);b[ie]=function(){var ne=t.variables[Z];return typeof ne=="string"&&(ne=gK(n,ne)),ne!==void 0?ne:-9999999}},N=0;N<A;++N)P(N);var j=Object.keys(b).map(function($){return"uniform float ".concat($,";")}),D=Math.ceil(e/4);j.push("uniform sampler2D ".concat(Ur.TILE_TEXTURE_ARRAY,"[").concat(D,"];")),n.paletteTextures&&j.push("uniform sampler2D ".concat(xK,"[").concat(n.paletteTextures.length,"];"));var F=Object.keys(n.functions).map(function($){return n.functions[$]}),U=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(Ur.RENDER_EXTENT,`;
    uniform float `).concat(Ur.TRANSITION_ALPHA,`;
    uniform float `).concat(Ur.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Ur.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Ur.RESOLUTION,`;
    uniform float `).concat(Ur.ZOOM,`;

    `).concat(j.join(`
`),`

    `).concat(F.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(Ur.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(Ur.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(Ur.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(Ur.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(Ur.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(i.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(Ur.TRANSITION_ALPHA,`;
    }`);return{vertexShader:r,fragmentShader:U,uniforms:b,paletteTextures:n.paletteTextures}}var BBe=function(t){Hsr(e,t);function e(r){var n=this,i=r?Xr({},r):{},o=i.style||{};delete i.style;var l=i.cacheSize;return delete i.cacheSize,n=t.call(this,i)||this,n.sources_=i.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=o,n.cacheSize_=l,n.styleVariables_=n.style_.variables||{},n.addChangeListener(yn.SOURCE,n.handleSourceUpdate_),n}return e.prototype.getSources=function(r,n){var i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(r,n):this.sources_:i?[i]:[]},e.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},e.prototype.getSourceState=function(){var r=this.getRenderSource();return r?r.getState():"undefined"},e.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},e.prototype.getSourceBandCount_=function(){var r=Number.MAX_SAFE_INTEGER,n=this.getSources([-r,-r,r,r],r);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},e.prototype.createRenderer=function(){var r=UBe(this.style_,this.getSourceBandCount_());return new LBe(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})},e.prototype.renderSources=function(r,n){for(var i=this.getRenderer(),o,l=0,f=n.length;l<f;++l)this.renderedSource_=n[l],i.prepareFrame(r)&&(o=i.renderFrame(r));return o},e.prototype.render=function(r,n){var i=this;this.rendered=!0;for(var o=r.viewState,l=this.getSources(r.extent,o.resolution),f=!0,d=function(P,N){var j=l[P],D=j.getState();if(D=="loading"){var F=function(){j.getState()=="ready"&&(j.removeEventListener("change",F),i.changed())};j.addEventListener("change",F)}f=f&&D=="ready"},v=0,x=l.length;v<x;++v)d(v,x);var b=this.renderSources(r,l);if(this.getRenderer().renderComplete&&f)return this.renderedResolution_=o.resolution,b;if(this.renderedResolution_>.5*o.resolution){var A=this.getSources(r.extent,this.renderedResolution_).filter(function(P){return!l.includes(P)});if(A.length>0)return this.renderSources(r,A)}return b},e.prototype.setStyle=function(r){this.styleVariables_=r.variables||{},this.style_=r;var n=UBe(this.style_,this.getSourceBandCount_()),i=this.getRenderer();i.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(r){Xr(this.styleVariables_,r),this.changed()},e}(ok);BBe.prototype.dispose;var VBe=BBe;p();p();var Wsr=[0,0,0],mm=5,Zsr=function(){function t(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,or(tze(this.resolutions_,function(l,f){return f-l},!0),17);var r;if(!e.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,or(this.origins_.length==this.resolutions_.length,20));var o=e.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=yu(o)),or(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,or(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:hm,or(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(l,f){var d=new kx(Math.min(0,l[0]),Math.max(l[0]-1,-1),Math.min(0,l[1]),Math.max(l[1]-1,-1));if(o){var v=this.getTileRangeForExtentAndZ(o,f);d.minX=Math.max(v.minX,d.minX),d.maxX=Math.min(v.maxX,d.maxX),d.minY=Math.max(v.minY,d.minY),d.maxY=Math.min(v.maxY,d.maxY)}return d},this):o&&this.calculateTileRanges_(o)}return t.prototype.forEachTileCoord=function(e,r,n){for(var i=this.getTileRangeForExtentAndZ(e,r),o=i.minX,l=i.maxX;o<=l;++o)for(var f=i.minY,d=i.maxY;f<=d;++f)n([r,o,f])},t.prototype.forEachTileCoordParentTileRange=function(e,r,n,i){var o,l,f,d=null,v=e[0]-1;for(this.zoomFactor_===2?(l=e[1],f=e[2]):d=this.getTileCoordExtent(e,i);v>=this.minZoom;){if(this.zoomFactor_===2?(l=Math.floor(l/2),f=Math.floor(f/2),o=vv(l,l,f,f,n)):o=this.getTileRangeForExtentAndZ(d,v,n),r(v,o))return!0;--v}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},t.prototype.getResolution=function(e){return this.resolutions_[e]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(e,r,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var i=e[1]*2,o=e[2]*2;return vv(i,i+1,o,o+1,r)}var l=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,e[0]+1,r)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(e,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var i=e[0],o=e[1],l=e[2];if(r===i)return vv(o,l,o,l,n);if(this.zoomFactor_){var f=Math.pow(this.zoomFactor_,r-i),d=Math.floor(o*f),v=Math.floor(l*f);if(r<i)return vv(d,d,v,v,n);var x=Math.floor(f*(o+1))-1,b=Math.floor(f*(l+1))-1;return vv(d,x,v,b,n)}var A=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(A,r,n)},t.prototype.getTileRangeExtent=function(e,r,n){var i=this.getOrigin(e),o=this.getResolution(e),l=Xn(this.getTileSize(e),this.tmpSize_),f=i[0]+r.minX*l[0]*o,d=i[0]+(r.maxX+1)*l[0]*o,v=i[1]+r.minY*l[1]*o,x=i[1]+(r.maxY+1)*l[1]*o;return $a(f,v,d,x,n)},t.prototype.getTileRangeForExtentAndZ=function(e,r,n){var i=Wsr;this.getTileCoordForXYAndZ_(e[0],e[3],r,!1,i);var o=i[1],l=i[2];return this.getTileCoordForXYAndZ_(e[2],e[1],r,!0,i),vv(o,i[1],l,i[2],n)},t.prototype.getTileCoordCenter=function(e){var r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=Xn(this.getTileSize(e[0]),this.tmpSize_);return[r[0]+(e[1]+.5)*i[0]*n,r[1]-(e[2]+.5)*i[1]*n]},t.prototype.getTileCoordExtent=function(e,r){var n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=Xn(this.getTileSize(e[0]),this.tmpSize_),l=n[0]+e[1]*o[0]*i,f=n[1]-(e[2]+1)*o[1]*i,d=l+o[0]*i,v=f+o[1]*i;return $a(l,f,d,v,r)},t.prototype.getTileCoordForCoordAndResolution=function(e,r,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],r,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(e,r,n,i,o){var l=this.getZForResolution(n),f=n/this.getResolution(l),d=this.getOrigin(l),v=Xn(this.getTileSize(l),this.tmpSize_),x=f*(e-d[0])/n/v[0],b=f*(d[1]-r)/n/v[1];return i?(x=FT(x,mm)-1,b=FT(b,mm)-1):(x=qT(x,mm),b=qT(b,mm)),Vx(l,x,b,o)},t.prototype.getTileCoordForXYAndZ_=function(e,r,n,i,o){var l=this.getOrigin(n),f=this.getResolution(n),d=Xn(this.getTileSize(n),this.tmpSize_),v=(e-l[0])/f/d[0],x=(l[1]-r)/f/d[1];return i?(v=FT(v,mm)-1,x=FT(x,mm)-1):(v=qT(v,mm),x=qT(x,mm)),Vx(n,v,x,o)},t.prototype.getTileCoordForCoordAndZ=function(e,r,n){return this.getTileCoordForXYAndZ_(e[0],e[1],r,!1,n)},t.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},t.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},t.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},t.prototype.getZForResolution=function(e,r){var n=tx(this.resolutions_,e,r||0);return Yn(n,this.minZoom,this.maxZoom)},t.prototype.tileCoordIntersectsViewport=function(e,r){return a9(r,0,r.length,2,this.getTileCoordExtent(e))},t.prototype.calculateTileRanges_=function(e){for(var r=this.resolutions_.length,n=new Array(r),i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n},t}(),bI=Zsr;p();p();var Ysr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ksr=function(t){Ysr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=PBe(r),i=n[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(pm(o.tileCoord)),o.release())}.bind(this))}},e}(ak),dk=Ksr;p();p();var mk={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};p();p();function gk(t){var e=t.getDefaultTileGrid();return e||(e=Qsr(t),t.setDefaultTileGrid(e)),e}function GBe(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),o=vk(r);if(gs(o,i))return e;var l=vn(o),f=Math.ceil((o[0]-i[0])/l);return i[0]+=l*f,t.getTileCoordForCoordAndZ(i,n)}function Xsr(t,e,r,n){var i=n!==void 0?n:"top-left",o=HBe(t,e,r);return new bI({extent:t,origin:gze(t,i),resolutions:o,tileSize:r})}function $Be(t){var e=t||{},r=e.extent||ii("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:HBe(r,e.maxZoom,e.tileSize,e.maxResolution)};return new bI(n)}function HBe(t,e,r,n){for(var i=e!==void 0?e:XUe,o=zo(t),l=vn(t),f=Xn(r!==void 0?r:hm),d=n>0?n:Math.max(l/f[0],o/f[1]),v=i+1,x=new Array(v),b=0;b<v;++b)x[b]=d/Math.pow(2,b);return x}function Qsr(t,e,r,n){var i=vk(t);return Xsr(i,e,r,n)}function vk(t){t=ii(t);var e=t.getExtent();if(!e){var r=180*Va[Ga.DEGREES]/t.getMetersPerUnit();e=$a(-r,-r,r,r)}return e}var WBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jsr=function(t){WBe(e,t);function e(r){var n=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var i=[256,256];return n.tileGrid&&Xn(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new dk(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(r,n){var i=this.getTileCacheForProjection(r);i&&i.expireCache(n)},e.prototype.forEachLoadedTile=function(r,n,i,o){var l=this.getTileCacheForProjection(r);if(!l)return!1;for(var f=!0,d,v,x,b=i.minX;b<=i.maxX;++b)for(var A=i.minY;A<=i.maxY;++A)v=yv(n,b,A),x=!1,l.containsKey(v)&&(d=l.get(v),x=d.getState()===Ht.LOADED,x&&(x=o(d)!==!1)),x||(f=!1);return f},e.prototype.getGutterForProjection=function(r){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},e.prototype.getOpaque=function(r){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(r,n,i,o,l){return ir()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:gk(r)},e.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return or(n===null||_f(n,r),68),this.tileCache},e.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(r,n,i){var o=this.getTileGridForProjection(i),l=this.getTilePixelRatio(n),f=Xn(o.getTileSize(r),this.tmpSize);return l==1?f:CN(f,l,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(r,n){var i=n!==void 0?n:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(r=GBe(o,r,i)),RBe(r,o)?r:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(r,n){var i=this.getTileCacheForProjection(n);r>i.highWaterMark&&(i.highWaterMark=r)},e.prototype.useTile=function(r,n,i,o){},e}(UN),ZBe=function(t){WBe(e,t);function e(r,n){var i=t.call(this,r)||this;return i.tile=n,i}return e}(Ni);var YBe=Jsr;p();function elr(t,e){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(l,f,d){if(l)return t.replace(r,l[0].toString()).replace(n,l[1].toString()).replace(i,l[2].toString()).replace(o,function(){var v=l[0],x=e.getFullTileRange(v);or(x,55);var b=x.getHeight()-l[2]-1;return b.toString()})}}function KBe(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=elr(t[i],e);return bK(n)}function bK(t){return t.length===1?t[0]:function(e,r,n){if(e){var i=fk(e),o=Ll(i,t.length);return t[o](e,r,n)}else return}}function yk(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t),r){for(var l=parseInt(r[2],10),f=parseInt(r[1],10);f<=l;f++)e.push(t.replace(r[0],f.toString()));return e}return e.push(t),e}var tlr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rlr=function(t){tlr(e,t);function e(r){var n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(r){var n=r.target,i=tr(n),o=n.getState(),l;o==Ht.LOADING?(this.tileLoadingKeys_[i]=!0,l=mk.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],l=o==Ht.ERROR?mk.TILELOADERROR:o==Ht.LOADED?mk.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new ZBe(l,n))},e.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},e.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},e.prototype.setUrl=function(r){var n=yk(r);this.urls=n,this.setUrls(n)},e.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(KBe(r,this.tileGrid),n):this.setKey(n)},e.prototype.tileUrlFunction=function(r,n,i){},e.prototype.useTile=function(r,n,i){var o=yv(r,n,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(YBe),XBe=rlr;var nlr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ilr=function(t){nlr(e,t);function e(r){var n=this,i=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(i=r.interpolate),n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:olr,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:i,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:Qh,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return e.prototype.canExpireCache=function(){if(!Mf)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},e.prototype.expireCache=function(r,n){if(!Mf){t.prototype.expireCache.call(this,r,n);return}var i=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==i?n:{});for(var o in this.tileCacheForProjection){var l=this.tileCacheForProjection[o];l.expireCache(l==i?n:{})}},e.prototype.getGutterForProjection=function(r){return Mf&&this.getProjection()&&r&&!_f(this.getProjection(),r)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var r=t.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},e.prototype.getOpaque=function(r){return Mf&&this.getProjection()&&r&&!_f(this.getProjection(),r)?!1:t.prototype.getOpaque.call(this,r)},e.prototype.getTileGridForProjection=function(r){if(!Mf)return t.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||_f(n,r)))return this.tileGrid;var i=tr(r);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=gk(r)),this.tileGridForProjection[i]},e.prototype.getTileCacheForProjection=function(r){if(!Mf)return t.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||_f(n,r))return this.tileCache;var i=tr(r);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new dk(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(r,n,i,o,l,f){var d=[r,n,i],v=this.getTileCoordForTileUrlFunction(d,l),x=v?this.tileUrlFunction(v,o,l):void 0,b=new this.tileClass(d,x!==void 0?Ht.IDLE:Ht.EMPTY,x!==void 0?x:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return b.key=f,b.addEventListener(Vt.CHANGE,this.handleTileChange.bind(this)),b},e.prototype.getTile=function(r,n,i,o,l){var f=this.getProjection();if(!Mf||!f||!l||_f(f,l))return this.getTileInternal(r,n,i,o,f||l);var d=this.getTileCacheForProjection(l),v=[r,n,i],x=void 0,b=pm(v);d.containsKey(b)&&(x=d.get(b));var A=this.getKey();if(x&&x.key==A)return x;var P=this.getTileGridForProjection(f),N=this.getTileGridForProjection(l),j=this.getTileCoordForTileUrlFunction(v,l),D=new Fx(f,P,l,N,v,j,this.getTilePixelRatio(o),this.getGutter(),function(F,U,$,Z){return this.getTileInternal(F,U,$,Z,f)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return D.key=A,x?(D.interimTile=x,D.refreshInterimChain(),d.replace(b,D)):d.set(b,D),D},e.prototype.getTileInternal=function(r,n,i,o,l){var f=null,d=yv(r,n,i),v=this.getKey();if(!this.tileCache.containsKey(d))f=this.createTile_(r,n,i,o,l,v),this.tileCache.set(d,f);else if(f=this.tileCache.get(d),f.key!=v){var x=f;f=this.createTile_(r,n,i,o,l,v),x.getState()==Ht.IDLE?f.interimTile=x.interimTile:f.interimTile=x,f.refreshInterimChain(),this.tileCache.replace(d,f)}return f},e.prototype.setRenderReprojectionEdges=function(r){if(!(!Mf||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},e.prototype.setTileGridForProjection=function(r,n){if(Mf){var i=ii(r);if(i){var o=tr(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}},e}(XBe);function olr(t,e){t.getImage().src=e}var Gx=ilr;var QBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wK={DEFAULT:"default",TRUNCATED:"truncated"},alr=function(t){QBe(e,t);function e(r,n,i,o,l,f,d){var v=t.call(this,n,i,o,l,f,d)||this;return v.zoomifyImage_=null,v.tileSize_=r,v}return e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var r=t.prototype.getImage.call(this);if(this.state==Ht.LOADED){var n=this.tileSize_;if(r.width==n[0]&&r.height==n[1])return this.zoomifyImage_=r,r;var i=qi(n[0],n[1]);return i.drawImage(r,0,0),this.zoomifyImage_=i.canvas,i.canvas}else return r},e}(Qh);var slr=function(t){QBe(e,t);function e(r){var n=this,i=r,o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.size,f=i.tierSizeCalculation!==void 0?i.tierSizeCalculation:wK.DEFAULT,d=i.tilePixelRatio||1,v=l[0],x=l[1],b=[],A=i.tileSize||hm,P=A*d;switch(f){case wK.DEFAULT:for(;v>P||x>P;)b.push([Math.ceil(v/P),Math.ceil(x/P)]),P+=P;break;case wK.TRUNCATED:for(var N=v,j=x;N>P||j>P;)b.push([Math.ceil(N/P),Math.ceil(j/P)]),N>>=1,j>>=1;break;default:or(!1,53);break}b.push([1,1]),b.reverse();for(var D=[d],F=[0],U=1,$=b.length;U<$;U++)D.push(d<<U),F.push(b[U-1][0]*b[U-1][1]+F[U-1]);D.reverse();var Z=new bI({tileSize:A,extent:i.extent||[0,-x,v,0],resolutions:D}),ie=i.url;ie&&ie.indexOf("{TileGroup}")==-1&&ie.indexOf("{tileIndex}")==-1&&(ie+="{TileGroup}/{z}-{x}-{y}.jpg");var ne=yk(ie),ae=A*d;function ye(ke){return function(He,Ke,Je){if(He){var We=He[0],lt=He[1],pt=He[2],dt=lt+pt*b[We][0],ze=(dt+F[We])/ae|0,Dt={z:We,x:lt,y:pt,tileIndex:dt,TileGroup:"TileGroup"+ze};return ke.replace(/\{(\w+?)\}/g,function(Ot,Ue){return Dt[Ue]})}else return}}var ge=bK(ne.map(ye)),de=alr.bind(null,Xn(A*d));n=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,projection:i.projection,tilePixelRatio:d,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:de,tileGrid:Z,tileUrlFunction:ge,transition:i.transition})||this,n.zDirection=i.zDirection;var be=Z.getTileCoordForCoordAndResolution(Js(Z.getExtent()),D[D.length-1]),Ne=ge(be,1,null),Me=new Image;return Me.addEventListener("error",function(){ae=A,this.changed()}.bind(n)),Me.src=Ne,n}return e}(Gx),JBe=slr;p();var al=Fe(Et(),1),hVe=Fe(No(),1),op=Fe(an(),1);p();p();p();p();p();p();function wn(t){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(t)}p();function e3e(t,e){if(wn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(wn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _k(t){var e=e3e(t,"string");return wn(e)=="symbol"?e:e+""}function St(t,e,r){return(e=_k(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t3e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t3e(Object(r),!0).forEach(function(n){St(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t3e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}p();function Ka(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}p();function r3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_k(n.key),n)}}function Xa(t,e,r){return e&&r3e(t.prototype,e),r&&r3e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}p();function Qa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k0(t,e)}p();p();function Tc(t){return Tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tc(t)}p();function EK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(EK=function(){return!!t})()}p();p();function Wr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n3e(t,e){if(e&&(wn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wr(t)}function Ja(t){var e=EK();return function(){var r,n=Tc(t);if(e){var i=Tc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return n3e(this,r)}}var DK=Fe(Et());p();var SK={},llr=[],ulr=function(e){llr.push(e)};function clr(t,e){if(0)var r}function flr(t,e){if(0)var r}function hlr(){SK={}}function i3e(t,e,r){!e&&!SK[r]&&(t(!1,r),SK[r]=!0)}function xk(t,e){i3e(clr,t,e)}function plr(t,e){i3e(flr,t,e)}xk.preMessage=ulr;xk.resetWarned=hlr;xk.noteOnce=plr;var Pf=xk;p();var o3e=Fe(Et()),dlr=function(e){var r,n,i=e.className,o=e.included,l=e.vertical,f=e.style,d=e.length,v=e.offset,x=e.reverse;d<0&&(x=!x,d=Math.abs(d),v=100-v);var b=l?(r={},St(r,x?"top":"bottom","".concat(v,"%")),St(r,x?"bottom":"top","auto"),St(r,"height","".concat(d,"%")),r):(n={},St(n,x?"right":"left","".concat(v,"%")),St(n,x?"left":"right","auto"),St(n,"width","".concat(d,"%")),n),A=Nt(Nt({},f),b);return o?o3e.default.createElement("div",{className:i,style:A}):null},bk=dlr;p();p();function xs(t,e){if(t==null)return{};var r,n,i=oT(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}p();p();p();function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function a3e(t){if(Array.isArray(t))return wI(t)}p();function TK(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}p();function EI(t,e){if(t){if(typeof t=="string")return wI(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wI(t,e):void 0}}p();function s3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pu(t){return a3e(t)||TK(t)||EI(t)||s3e()}p();p();function l3e(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=Tc(t))!==null;);return t}function $x(){return $x=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=l3e(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},$x.apply(null,arguments)}var Wx=Fe(Et());p();var IK=Fe(No());function bs(t,e,r,n){var i=IK.default.unstable_batchedUpdates?function(l){IK.default.unstable_batchedUpdates(r,l)}:r;return t!=null&&t.addEventListener&&t.addEventListener(e,i,n),{remove:function(){t!=null&&t.removeEventListener&&t.removeEventListener(e,i,n)}}}var v3e=Fe(pi());p();var AK=Fe(Et()),u3e=Fe(pi());var mlr=function(e,r,n,i,o,l){Pf(n?i>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var f=Object.keys(r).map(parseFloat).sort(function(v,x){return v-x});if(n&&i)for(var d=o;d<=l;d+=i)f.indexOf(d)===-1&&f.push(d);return f},glr=function(e){var r=e.prefixCls,n=e.vertical,i=e.reverse,o=e.marks,l=e.dots,f=e.step,d=e.included,v=e.lowerBound,x=e.upperBound,b=e.max,A=e.min,P=e.dotStyle,N=e.activeDotStyle,j=b-A,D=mlr(n,o,l,f,A,b).map(function(F){var U,$="".concat(Math.abs(F-A)/j*100,"%"),Z=!d&&F===x||d&&F<=x&&F>=v,ie=n?Nt(Nt({},P),{},St({},i?"top":"bottom",$)):Nt(Nt({},P),{},St({},i?"right":"left",$));Z&&(ie=Nt(Nt({},ie),N));var ne=(0,u3e.default)((U={},St(U,"".concat(r,"-dot"),!0),St(U,"".concat(r,"-dot-active"),Z),St(U,"".concat(r,"-dot-reverse"),i),U));return AK.default.createElement("span",{className:ne,style:ie,key:F})});return AK.default.createElement("div",{className:"".concat(r,"-step")},D)},c3e=glr;p();var wk=Fe(Et()),f3e=Fe(pi()),vlr=function(e){var r=e.className,n=e.vertical,i=e.reverse,o=e.marks,l=e.included,f=e.upperBound,d=e.lowerBound,v=e.max,x=e.min,b=e.onClickLabel,A=Object.keys(o),P=v-x,N=A.map(parseFloat).sort(function(j,D){return j-D}).map(function(j){var D,F=o[j],U=wn(F)==="object"&&!wk.default.isValidElement(F),$=U?F.label:F;if(!$&&$!==0)return null;var Z=!l&&j===f||l&&j<=f&&j>=d,ie=(0,f3e.default)((D={},St(D,"".concat(r,"-text"),!0),St(D,"".concat(r,"-text-active"),Z),D)),ne=St({marginBottom:"-50%"},i?"top":"bottom","".concat((j-x)/P*100,"%")),ae=St({transform:"translateX(".concat(i?"50%":"-50%",")"),msTransform:"translateX(".concat(i?"50%":"-50%",")")},i?"right":"left","".concat((j-x)/P*100,"%")),ye=n?ne:ae,ge=U?Nt(Nt({},ye),F.style):ye;return wk.default.createElement("span",{className:ie,style:ge,key:j,onMouseDown:function(be){return b(be,j)},onTouchStart:function(be){return b(be,j)}},$)});return wk.default.createElement("div",{className:r},N)},h3e=vlr;p();var MK=Fe(Et()),p3e=Fe(pi());var Hx=function(t){Qa(r,t);var e=Ja(r);function r(){var n;return Ka(this,r),n=e.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(i){n.handle=i},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(i){i.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return Xa(r,[{key:"componentDidMount",value:function(){this.onMouseUpListener=bs(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(i){this.setState({clickFocused:i})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var i,o,l=this.props,f=l.prefixCls,d=l.vertical,v=l.reverse,x=l.offset,b=l.style,A=l.disabled,P=l.min,N=l.max,j=l.value,D=l.tabIndex,F=l.ariaLabel,U=l.ariaLabelledBy,$=l.ariaValueTextFormatter,Z=xs(l,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),ie=(0,p3e.default)(this.props.className,St({},"".concat(f,"-handle-click-focused"),this.state.clickFocused)),ne=d?(i={},St(i,v?"top":"bottom","".concat(x,"%")),St(i,v?"bottom":"top","auto"),St(i,"transform",v?null:"translateY(+50%)"),i):(o={},St(o,v?"right":"left","".concat(x,"%")),St(o,v?"left":"right","auto"),St(o,"transform","translateX(".concat(v?"+":"-","50%)")),o),ae=Nt(Nt({},b),ne),ye=D||0;(A||D===null)&&(ye=null);var ge;return $&&(ge=$(j)),MK.default.createElement("div",gn({ref:this.setHandleRef,tabIndex:ye},Z,{className:ie,style:ae,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":P,"aria-valuemax":N,"aria-valuenow":j,"aria-disabled":!!A,"aria-label":F,"aria-labelledby":U,"aria-valuetext":ge}))}}]),r}(MK.default.Component);p();var m3e=Fe(No());p();var Cr={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var r=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||r>=Cr.F1&&r<=Cr.F12)return!1;switch(r){case Cr.ALT:case Cr.CAPS_LOCK:case Cr.CONTEXT_MENU:case Cr.CTRL:case Cr.DOWN:case Cr.END:case Cr.ESC:case Cr.HOME:case Cr.INSERT:case Cr.LEFT:case Cr.MAC_FF_META:case Cr.META:case Cr.NUMLOCK:case Cr.NUM_CENTER:case Cr.PAGE_DOWN:case Cr.PAGE_UP:case Cr.PAUSE:case Cr.PRINT_SCREEN:case Cr.RIGHT:case Cr.SHIFT:case Cr.UP:case Cr.WIN_KEY:case Cr.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Cr.ZERO&&e<=Cr.NINE||e>=Cr.NUM_ZERO&&e<=Cr.NUM_MULTIPLY||e>=Cr.A&&e<=Cr.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Cr.SPACE:case Cr.QUESTION_MARK:case Cr.NUM_PLUS:case Cr.NUM_MINUS:case Cr.NUM_PERIOD:case Cr.NUM_DIVISION:case Cr.SEMICOLON:case Cr.DASH:case Cr.EQUALS:case Cr.COMMA:case Cr.PERIOD:case Cr.SLASH:case Cr.APOSTROPHE:case Cr.SINGLE_QUOTE:case Cr.OPEN_SQUARE_BRACKET:case Cr.BACKSLASH:case Cr.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Jh=Cr;function Ek(t,e){try{return Object.keys(e).some(function(r){return t.target===(0,m3e.findDOMNode)(e[r])})}catch(r){return!1}}function Sk(t,e){var r=e.min,n=e.max;return t<r||t>n}function CK(t){return t.touches.length>1||t.type.toLowerCase()==="touchend"&&t.touches.length>0}function d3e(t,e){var r=e.marks,n=e.step,i=e.min,o=e.max,l=Object.keys(r).map(parseFloat);if(n!==null){var f=Math.pow(10,g3e(n)),d=Math.floor((o*f-i*f)/(n*f)),v=Math.min((t-i)/n,d),x=Math.round(v)*n+i;l.push(x)}var b=l.map(function(A){return Math.abs(t-A)});return l[b.indexOf(Math.min.apply(Math,Pu(b)))]}function g3e(t){var e=t.toString(),r=0;return e.indexOf(".")>=0&&(r=e.length-e.indexOf(".")-1),r}function PK(t,e){return t?e.clientY:e.pageX}function RK(t,e){return t?e.touches[0].clientY:e.touches[0].pageX}function OK(t,e){var r=e.getBoundingClientRect();return t?r.top+r.height*.5:window.pageXOffset+r.left+r.width*.5}function SI(t,e){var r=e.max,n=e.min;return t<=n?n:t>=r?r:t}function Tk(t,e){var r=e.step,n=isFinite(d3e(t,e))?d3e(t,e):0;return r===null?n:parseFloat(n.toFixed(g3e(r)))}function ep(t){t.stopPropagation(),t.preventDefault()}function ylr(t,e,r){var n={increase:function(f,d){return f+d},decrease:function(f,d){return f-d}},i=n[t](Object.keys(r.marks).indexOf(JSON.stringify(e)),1),o=Object.keys(r.marks)[i];return r.step?n[t](e,r.step):Object.keys(r.marks).length&&r.marks[o]?r.marks[o]:e}function Ik(t,e,r){var n="increase",i="decrease",o=n;switch(t.keyCode){case Jh.UP:o=e&&r?i:n;break;case Jh.RIGHT:o=!e&&r?i:n;break;case Jh.DOWN:o=e&&r?n:i;break;case Jh.LEFT:o=!e&&r?n:i;break;case Jh.END:return function(l,f){return f.max};case Jh.HOME:return function(l,f){return f.min};case Jh.PAGE_UP:return function(l,f){return l+f.step*2};case Jh.PAGE_DOWN:return function(l,f){return l-f.step*2};default:return}return function(l,f){return ylr(o,l,f)}}function Rf(){}function TI(t){var e;return e=function(r){Qa(i,r);var n=Ja(i);function i(o){var l;Ka(this,i),l=n.call(this,o),l.onDown=function(b,A){var P=A,N=l.props,j=N.draggableTrack,D=N.vertical,F=l.state.bounds,U=j&&l.positionGetValue?l.positionGetValue(P)||[]:[],$=Ek(b,l.handlesRefs);if(l.dragTrack=j&&F.length>=2&&!$&&!U.map(function(ie,ne){var ae=ne?!0:ie>=F[ne];return ne===U.length-1?ie<=F[ne]:ae}).some(function(ie){return!ie}),l.dragTrack)l.dragOffset=P,l.startBounds=Pu(F);else{if(!$)l.dragOffset=0;else{var Z=OK(D,b.target);l.dragOffset=P-Z,P=Z}l.onStart(P)}},l.onMouseDown=function(b){if(b.button===0){l.removeDocumentEvents();var A=l.props.vertical,P=PK(A,b);l.onDown(b,P),l.addDocumentMouseEvents()}},l.onTouchStart=function(b){if(!CK(b)){var A=l.props.vertical,P=RK(A,b);l.onDown(b,P),l.addDocumentTouchEvents(),ep(b)}},l.onFocus=function(b){var A=l.props,P=A.onFocus,N=A.vertical;if(Ek(b,l.handlesRefs)&&!l.dragTrack){var j=OK(N,b.target);l.dragOffset=0,l.onStart(j),ep(b),P&&P(b)}},l.onBlur=function(b){var A=l.props.onBlur;l.dragTrack||l.onEnd(),A&&A(b)},l.onMouseUp=function(){l.handlesRefs[l.prevMovedHandleIndex]&&l.handlesRefs[l.prevMovedHandleIndex].clickFocus()},l.onMouseMove=function(b){if(!l.sliderRef){l.onEnd();return}var A=PK(l.props.vertical,b);l.onMove(b,A-l.dragOffset,l.dragTrack,l.startBounds)},l.onTouchMove=function(b){if(CK(b)||!l.sliderRef){l.onEnd();return}var A=RK(l.props.vertical,b);l.onMove(b,A-l.dragOffset,l.dragTrack,l.startBounds)},l.onKeyDown=function(b){l.sliderRef&&Ek(b,l.handlesRefs)&&l.onKeyboard(b)},l.onClickMarkLabel=function(b,A){b.stopPropagation(),l.onChange({value:A}),l.setState({value:A},function(){return l.onEnd(!0)})},l.saveSlider=function(b){l.sliderRef=b};var f=o.step,d=o.max,v=o.min,x=isFinite(d-v)?(d-v)%f===0:!0;return Pf(f&&Math.floor(f)===f?x:!0,"Slider[max] - Slider[min] (".concat(d-v,") should be a multiple of Slider[step] (").concat(f,")")),l.handlesRefs={},l}return Xa(i,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var l=this.props,f=l.autoFocus,d=l.disabled;f&&!d&&this.focus()}},{key:"componentWillUnmount",value:function(){$x(Tc(i.prototype),"componentWillUnmount",this)&&$x(Tc(i.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var l=this.sliderRef,f=this.props,d=f.vertical,v=f.reverse,x=l.getBoundingClientRect();return d?v?x.bottom:x.top:window.pageXOffset+(v?x.right:x.left)}},{key:"getSliderLength",value:function(){var l=this.sliderRef;if(!l)return 0;var f=l.getBoundingClientRect();return this.props.vertical?f.height:f.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=bs(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=bs(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=bs(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=bs(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var l;this.props.disabled||(l=this.handlesRefs[0])===null||l===void 0||l.focus()}},{key:"blur",value:function(){var l=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(f){var d,v;(d=l.handlesRefs[f])===null||d===void 0||(v=d.blur)===null||v===void 0||v.call(d)})}},{key:"calcValue",value:function(l){var f=this.props,d=f.vertical,v=f.min,x=f.max,b=Math.abs(Math.max(l,0)/this.getSliderLength()),A=d?(1-b)*(x-v)+v:b*(x-v)+v;return A}},{key:"calcValueByPos",value:function(l){var f=this.props.reverse?-1:1,d=f*(l-this.getSliderStart()),v=this.trimAlignValue(this.calcValue(d));return v}},{key:"calcOffset",value:function(l){var f=this.props,d=f.min,v=f.max,x=(l-d)/(v-d);return Math.max(0,x*100)}},{key:"saveHandle",value:function(l,f){this.handlesRefs[l]=f}},{key:"render",value:function(){var l,f=this.props,d=f.prefixCls,v=f.className,x=f.marks,b=f.dots,A=f.step,P=f.included,N=f.disabled,j=f.vertical,D=f.reverse,F=f.min,U=f.max,$=f.children,Z=f.maximumTrackStyle,ie=f.style,ne=f.railStyle,ae=f.dotStyle,ye=f.activeDotStyle,ge=$x(Tc(i.prototype),"render",this).call(this),de=ge.tracks,be=ge.handles,Ne=(0,v3e.default)(d,(l={},St(l,"".concat(d,"-with-marks"),Object.keys(x).length),St(l,"".concat(d,"-disabled"),N),St(l,"".concat(d,"-vertical"),j),St(l,v,v),l));return Wx.default.createElement("div",{ref:this.saveSlider,className:Ne,onTouchStart:N?Rf:this.onTouchStart,onMouseDown:N?Rf:this.onMouseDown,onMouseUp:N?Rf:this.onMouseUp,onKeyDown:N?Rf:this.onKeyDown,onFocus:N?Rf:this.onFocus,onBlur:N?Rf:this.onBlur,style:ie},Wx.default.createElement("div",{className:"".concat(d,"-rail"),style:Nt(Nt({},Z),ne)}),de,Wx.default.createElement(c3e,{prefixCls:d,vertical:j,reverse:D,marks:x,dots:b,step:A,included:P,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:U,min:F,dotStyle:ae,activeDotStyle:ye}),be,Wx.default.createElement(h3e,{className:"".concat(d,"-mark"),onClickLabel:N?Rf:this.onClickMarkLabel,vertical:j,marks:x,included:P,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:U,min:F,reverse:D}),$)}}]),i}(t),e.displayName="ComponentEnhancer(".concat(t.displayName,")"),e.defaultProps=Nt(Nt({},t.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var i=n.index,o=xs(n,["index"]);return delete o.dragging,o.value===null?null:Wx.default.createElement(Hx,gn({},o,{key:i}))},onBeforeChange:Rf,onChange:Rf,onAfterChange:Rf,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),e}var _lr=function(t){Qa(r,t);var e=Ja(r);function r(n){var i;Ka(this,r),i=e.call(this,n),i.positionGetValue=function(f){return[]},i.onEnd=function(f){var d=i.state.dragging;i.removeDocumentEvents(),(d||f)&&i.props.onAfterChange(i.getValue()),i.setState({dragging:!1})};var o=n.defaultValue!==void 0?n.defaultValue:n.min,l=n.value!==void 0?n.value:o;return i.state={value:i.trimAlignValue(l),dragging:!1},Pf(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),Pf(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),i}return Xa(r,[{key:"calcValueByPos",value:function(i){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var l=this.props,f=l.min,d=l.max,v=l.value,x=l.onChange;if("min"in this.props||"max"in this.props){var b=v!==void 0?v:o.value,A=this.trimAlignValue(b,this.props);A!==o.value&&(this.setState({value:A}),!(f===i.min&&d===i.max)&&Sk(b,this.props)&&x(A))}}},{key:"onChange",value:function(i){var o=this.props,l=!("value"in o),f=i.value>this.props.max?Nt(Nt({},i),{},{value:this.props.max}):i;l&&this.setState(f);var d=f.value;o.onChange(d)}},{key:"onStart",value:function(i){this.setState({dragging:!0});var o=this.props,l=this.getValue();o.onBeforeChange(l);var f=this.calcValueByPos(i);this.startValue=f,this.startPosition=i,f!==l&&(this.prevMovedHandleIndex=0,this.onChange({value:f}))}},{key:"onMove",value:function(i,o){ep(i);var l=this.state.value,f=this.calcValueByPos(o);f!==l&&this.onChange({value:f})}},{key:"onKeyboard",value:function(i){var o=this.props,l=o.reverse,f=o.vertical,d=Ik(i,f,l);if(d){ep(i);var v=this.state,x=v.value,b=d(x,this.props),A=this.trimAlignValue(b);if(A===x)return;this.onChange({value:A}),this.props.onAfterChange(A),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var i=this.props.startPoint||this.props.min;return this.state.value>i?i:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i===null)return null;var l=Nt(Nt({},this.props),o),f=SI(i,l);return Tk(f,l)}},{key:"render",value:function(){var i=this,o=this.props,l=o.prefixCls,f=o.vertical,d=o.included,v=o.disabled,x=o.minimumTrackStyle,b=o.trackStyle,A=o.handleStyle,P=o.tabIndex,N=o.ariaLabelForHandle,j=o.ariaLabelledByForHandle,D=o.ariaValueTextFormatterForHandle,F=o.min,U=o.max,$=o.startPoint,Z=o.reverse,ie=o.handle,ne=this.state,ae=ne.value,ye=ne.dragging,ge=this.calcOffset(ae),de=ie({className:"".concat(l,"-handle"),prefixCls:l,vertical:f,offset:ge,value:ae,dragging:ye,disabled:v,min:F,max:U,reverse:Z,index:0,tabIndex:P,ariaLabel:N,ariaLabelledBy:j,ariaValueTextFormatter:D,style:A[0]||A,ref:function(He){return i.saveHandle(0,He)}}),be=$!==void 0?this.calcOffset($):0,Ne=b[0]||b,Me=DK.default.createElement(bk,{className:"".concat(l,"-track"),vertical:f,included:d,offset:be,reverse:Z,length:ge-be,style:Nt(Nt({},x),Ne)});return{tracks:Me,handles:de}}}]),r}(DK.default.Component),y3e=TI(_lr);p();var NK=Fe(Et()),kK=Fe(pi());var II=function(e){var r=e.value,n=e.handle,i=e.bounds,o=e.props,l=o.allowCross,f=o.pushable,d=Number(f),v=SI(r,o),x=v;return!l&&n!=null&&i!==void 0&&(n>0&&v<=i[n-1]+d&&(x=i[n-1]+d),n<i.length-1&&v>=i[n+1]-d&&(x=i[n+1]-d)),Tk(x,o)},qK=function(t){Qa(r,t);var e=Ja(r);function r(n){var i;Ka(this,r),i=e.call(this,n),i.positionGetValue=function(P){var N=i.getValue(),j=i.calcValueByPos(P),D=i.getClosestBound(j),F=i.getBoundNeedMoving(j,D),U=N[F];if(j===U)return null;var $=Pu(N);return $[F]=j,$},i.onEnd=function(P){var N=i.state.handle;i.removeDocumentEvents(),N||(i.dragTrack=!1),(N!==null||P)&&i.props.onAfterChange(i.getValue()),i.setState({handle:null})};var o=n.count,l=n.min,f=n.max,d=Array.apply(void 0,Pu(Array(o+1))).map(function(){return l}),v="defaultValue"in n?n.defaultValue:d,x=n.value!==void 0?n.value:v,b=x.map(function(P,N){return II({value:P,handle:N,props:n})}),A=b[0]===f?0:b.length-1;return i.state={handle:null,recent:A,bounds:b},i}return Xa(r,[{key:"calcValueByPos",value:function(i){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var l=this,f=this.props,d=f.onChange,v=f.value,x=f.min,b=f.max;if(("min"in this.props||"max"in this.props)&&!(x===i.min&&b===i.max)){var A=v||o.bounds;if(A.some(function(N){return Sk(N,l.props)})){var P=A.map(function(N){return SI(N,l.props)});d(P)}}}},{key:"onChange",value:function(i){var o=this.props,l=!("value"in o);if(l)this.setState(i);else{var f={};["handle","recent"].forEach(function(x){i[x]!==void 0&&(f[x]=i[x])}),Object.keys(f).length&&this.setState(f)}var d=Nt(Nt({},this.state),i),v=d.bounds;o.onChange(v)}},{key:"onStart",value:function(i){var o=this.props,l=this.state,f=this.getValue();o.onBeforeChange(f);var d=this.calcValueByPos(i);this.startValue=d,this.startPosition=i;var v=this.getClosestBound(d);this.prevMovedHandleIndex=this.getBoundNeedMoving(d,v),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var x=f[this.prevMovedHandleIndex];if(d!==x){var b=Pu(l.bounds);b[this.prevMovedHandleIndex]=d,this.onChange({bounds:b})}}},{key:"onMove",value:function(i,o,l,f){ep(i);var d=this.state,v=this.props,x=v.max||100,b=v.min||0;if(l){var A=v.vertical?-o:o;A=v.reverse?-A:A;var P=x-Math.max.apply(Math,Pu(f)),N=b-Math.min.apply(Math,Pu(f)),j=Math.min(Math.max(A/(this.getSliderLength()/(x-b)),N),P),D=f.map(function($){return Math.floor(Math.max(Math.min($+j,x),b))});d.bounds.map(function($,Z){return $===D[Z]}).some(function($){return!$})&&this.onChange({bounds:D});return}var F=this.calcValueByPos(o),U=d.bounds[d.handle];F!==U&&this.moveTo(F)}},{key:"onKeyboard",value:function(i){var o=this.props,l=o.reverse,f=o.vertical,d=Ik(i,f,l);if(d){ep(i);var v=this.state,x=this.props,b=v.bounds,A=v.handle,P=b[A===null?v.recent:A],N=d(P,x),j=II({value:N,handle:A,bounds:v.bounds,props:x});if(j===P)return;var D=!0;this.moveTo(j,D)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(i){for(var o=this.state.bounds,l=0,f=1;f<o.length-1;f+=1)i>=o[f]&&(l=f);return Math.abs(o[l+1]-i)<Math.abs(o[l]-i)&&(l+=1),l}},{key:"getBoundNeedMoving",value:function(i,o){var l=this.state,f=l.bounds,d=l.recent,v=o,x=f[o+1]===f[o];return x&&f[d]===f[o]&&(v=d),x&&i!==f[o+1]&&(v=i<f[o+1]?o:o+1),v}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var i=this.state.bounds;return i[i.length-1]}},{key:"getPoints",value:function(){var i=this.props,o=i.marks,l=i.step,f=i.min,d=i.max,v=this.internalPointsCache;if(!v||v.marks!==o||v.step!==l){var x=Nt({},o);if(l!==null)for(var b=f;b<=d;b+=l)x[b]=b;var A=Object.keys(x).map(parseFloat);A.sort(function(P,N){return P-N}),this.internalPointsCache={marks:o,step:l,points:A}}return this.internalPointsCache.points}},{key:"moveTo",value:function(i,o){var l=this,f=this.state,d=this.props,v=Pu(f.bounds),x=f.handle===null?f.recent:f.handle;v[x]=i;var b=x;d.pushable!==!1?this.pushSurroundingHandles(v,b):d.allowCross&&(v.sort(function(A,P){return A-P}),b=v.indexOf(i)),this.onChange({recent:b,handle:b,bounds:v}),o&&(this.props.onAfterChange(v),this.setState({},function(){l.handlesRefs[b].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(i,o){var l=i[o],f=this.props.pushable,d=Number(f),v=0;if(i[o+1]-l<d&&(v=1),l-i[o-1]<d&&(v=-1),v!==0){var x=o+v,b=v*(i[x]-l);this.pushHandle(i,x,v,d-b)||(i[o]=i[x]-v*d)}}},{key:"pushHandle",value:function(i,o,l,f){for(var d=i[o],v=i[o];l*(v-d)<f;){if(!this.pushHandleOnePoint(i,o,l))return i[o]=d,!1;v=i[o]}return!0}},{key:"pushHandleOnePoint",value:function(i,o,l){var f=this.getPoints(),d=f.indexOf(i[o]),v=d+l;if(v>=f.length||v<0)return!1;var x=o+l,b=f[v],A=this.props.pushable,P=Number(A),N=l*(i[x]-b);return this.pushHandle(i,x,l,P-N)?(i[o]=b,!0):!1}},{key:"trimAlignValue",value:function(i){var o=this.state,l=o.handle,f=o.bounds;return II({value:i,handle:l,bounds:f,props:this.props})}},{key:"render",value:function(){var i=this,o=this.state,l=o.handle,f=o.bounds,d=this.props,v=d.prefixCls,x=d.vertical,b=d.included,A=d.disabled,P=d.min,N=d.max,j=d.reverse,D=d.handle,F=d.trackStyle,U=d.handleStyle,$=d.tabIndex,Z=d.ariaLabelGroupForHandles,ie=d.ariaLabelledByGroupForHandles,ne=d.ariaValueTextFormatterGroupForHandles,ae=f.map(function(be){return i.calcOffset(be)}),ye="".concat(v,"-handle"),ge=f.map(function(be,Ne){var Me,ke=$[Ne]||0;(A||$[Ne]===null)&&(ke=null);var He=l===Ne;return D({className:(0,kK.default)((Me={},St(Me,ye,!0),St(Me,"".concat(ye,"-").concat(Ne+1),!0),St(Me,"".concat(ye,"-dragging"),He),Me)),prefixCls:v,vertical:x,dragging:He,offset:ae[Ne],value:be,index:Ne,tabIndex:ke,min:P,max:N,reverse:j,disabled:A,style:U[Ne],ref:function(Je){return i.saveHandle(Ne,Je)},ariaLabel:Z[Ne],ariaLabelledBy:ie[Ne],ariaValueTextFormatter:ne[Ne]})}),de=f.slice(0,-1).map(function(be,Ne){var Me,ke=Ne+1,He=(0,kK.default)((Me={},St(Me,"".concat(v,"-track"),!0),St(Me,"".concat(v,"-track-").concat(ke),!0),Me));return NK.default.createElement(bk,{className:He,vertical:x,reverse:j,included:b,offset:ae[ke-1],length:ae[ke]-ae[ke-1],style:F[Ne],key:ke})});return{tracks:de,handles:ge}}}],[{key:"getDerivedStateFromProps",value:function(i,o){if(!("value"in i||"min"in i||"max"in i))return null;var l=i.value||o.bounds,f=l.map(function(d,v){return II({value:d,handle:v,bounds:o.bounds,props:i})});if(o.bounds.length===f.length){if(f.every(function(d,v){return d===o.bounds[v]}))return null}else f=l.map(function(d,v){return II({value:d,handle:v,props:i})});return Nt(Nt({},o),{},{bounds:f})}}]),r}(NK.default.Component);qK.displayName="Range";qK.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var _3e=TI(qK);p();var jI=Fe(Et());p();var ip=Fe(Et());p();p();var x7=Fe(Et()),tb=Fe(Et());p();var ql=Fe(Et()),oVe=Fe(No());p();var b3e=function(e){return+setTimeout(e,16)},w3e=function(e){return clearTimeout(e)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(b3e=function(e){return window.requestAnimationFrame(e)},w3e=function(e){return window.cancelAnimationFrame(e)});var x3e=0,FK=new Map;function E3e(t){FK.delete(t)}var S3e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;x3e+=1;var n=x3e;function i(o){if(o===0)E3e(n),e();else{var l=b3e(function(){i(o-1)});FK.set(n,l)}}return i(r),n};S3e.cancel=function(t){var e=FK.get(t);return E3e(t),w3e(e)};var nl=S3e;p();function _v(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var r=e;r;){if(r===t)return!0;r=r.parentNode}return!1}p();var I3e=Fe(Et()),jK=Fe(No());function T3e(t){return t instanceof HTMLElement||t instanceof SVGElement}function xlr(t){return t&&wn(t)==="object"&&T3e(t.nativeElement)?t.nativeElement:T3e(t)?t:null}function AI(t){var e=xlr(t);if(e)return e;if(t instanceof I3e.default.Component){var r;return(r=jK.default.findDOMNode)===null||r===void 0?void 0:r.call(jK.default,t)}return null}p();var qk=Fe(Et()),MI=Fe(P3e());p();var Elr=Fe(Et());p();var Slr=Symbol.for("react.element"),Tlr=Symbol.for("react.transitional.element"),Ilr=Symbol.for("react.fragment");function BK(t){return t&&wn(t)==="object"&&(t.$$typeof===Slr||t.$$typeof===Tlr)&&t.type===Ilr}var Alr=Number(qk.version.split(".")[0]),VK=function(e,r){typeof e=="function"?e(r):wn(e)==="object"&&e&&"current"in e&&(e.current=r)},Zx=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);return i.length<=1?i[0]:function(o){r.forEach(function(l){VK(l,o)})}};var CI=function(e){var r,n;if(!e)return!1;if(R3e(e)&&Alr>=19)return!0;var i=(0,MI.isMemo)(e)?e.type.type:e.type;return!(typeof i=="function"&&!((r=i.prototype)!==null&&r!==void 0&&r.render)&&i.$$typeof!==MI.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==MI.ForwardRef)};function R3e(t){return(0,qk.isValidElement)(t)&&!BK(t)}var O3e=function(e){if(e&&R3e(e)){var r=e;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null};p();var Ic=Fe(Et()),L3e=Fe(No());p();function Of(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var Mlr=(0,Ic.forwardRef)(function(t,e){var r=t.didUpdate,n=t.getContainer,i=t.children,o=(0,Ic.useRef)(),l=(0,Ic.useRef)();(0,Ic.useImperativeHandle)(e,function(){return{}});var f=(0,Ic.useRef)(!1);return!f.current&&Of()&&(l.current=n(),o.current=l.current.parentNode,f.current=!0),(0,Ic.useEffect)(function(){r==null||r(t)}),(0,Ic.useEffect)(function(){return l.current.parentNode===null&&o.current!==null&&o.current.appendChild(l.current),function(){var d;(d=l.current)===null||d===void 0||(d=d.parentNode)===null||d===void 0||d.removeChild(l.current)}},[]),l.current?L3e.default.createPortal(i,l.current):null}),D3e=Mlr;var aVe=Fe(pi());p();function Clr(t,e,r){return r?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function N3e(t,e,r){var n=t[e]||{};return Nt(Nt({},n),r)}function k3e(t,e,r,n){for(var i=r.points,o=Object.keys(t),l=0;l<o.length;l+=1){var f=o[l];if(Clr(t[f].points,i,n))return"".concat(e,"-placement-").concat(f)}return""}p();p();p();function GK(t){if(Array.isArray(t))return t}p();function q3e(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,l,f=[],d=!0,v=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=o.call(r)).done)&&(f.push(n.value),f.length!==e);d=!0);}catch(x){v=!0,i=x}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(v)throw i}}return f}}p();function $K(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function En(t,e){return GK(t)||q3e(t,e)||EI(t,e)||$K()}var Ev=Fe(Et()),FI=Fe(Et());p();var F3e=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};p();var t7=Fe(Et()),i5e=Fe(pi());p();p();var r5e=Fe(pi());var ol=Fe(Et()),e7=Fe(Et());p();var HK=Fe(Et());var j3e=HK.createContext({});p();var z3e=Fe(Et()),Plr=function(t){Qa(r,t);var e=Ja(r);function r(){return Ka(this,r),e.apply(this,arguments)}return Xa(r,[{key:"render",value:function(){return this.props.children}}]),r}(z3e.Component),U3e=Plr;p();p();p();var Fk=Fe(Et());function gm(t){var e=Fk.useRef();e.current=t;var r=Fk.useCallback(function(){for(var n,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(o))},[]);return r}p();p();var Yx=Fe(Et());var B3e=Of()?Yx.useLayoutEffect:Yx.useEffect,Rlr=function(e,r){var n=Yx.useRef(!0);B3e(function(){return e(n.current)},r),B3e(function(){return n.current=!1,function(){n.current=!0}},[])};var PI=Rlr;p();var Kx=Fe(Et());function tp(t){var e=Kx.useRef(!1),r=Kx.useState(t),n=En(r,2),i=n[0],o=n[1];Kx.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function l(f,d){d&&e.current||o(f)}return[i,l]}p();p();p();p();var jk=Fe(Et());function WK(t){var e=jk.useReducer(function(f){return f+1},0),r=En(e,2),n=r[1],i=jk.useRef(t),o=gm(function(){return i.current}),l=gm(function(f){i.current=typeof f=="function"?f(i.current):f,n()});return[o,l]}var Zk=Fe(Et()),np=Fe(Et());p();var Lf="none",RI="appear",OI="enter",LI="leave",ZK="none",il="prepare",rp="start",vm="active",zk="end",Uk="prepared";p();var Y3e=Fe(Et()),K3e=Fe(Et());p();function V3e(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit".concat(t)]="webkit".concat(e),r["Moz".concat(t)]="moz".concat(e),r["ms".concat(t)]="MS".concat(e),r["O".concat(t)]="o".concat(e.toLowerCase()),r}function Llr(t,e){var r={animationend:V3e("Animation","AnimationEnd"),transitionend:V3e("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete r.animationend.animation,"TransitionEvent"in e||delete r.transitionend.transition),r}var Dlr=Llr(Of(),typeof window!="undefined"?window:{}),$3e={};Of()&&(G3e=document.createElement("div"),$3e=G3e.style);var G3e,Bk={};function H3e(t){if(Bk[t])return Bk[t];var e=Dlr[t];if(e)for(var r=Object.keys(e),n=r.length,i=0;i<n;i+=1){var o=r[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in $3e)return Bk[t]=e[o],Bk[t]}return""}var W3e=H3e("animationend"),Z3e=H3e("transitionend"),Vk=!!(W3e&&Z3e),YK=W3e||"animationend",KK=Z3e||"transitionend";function XK(t,e){if(!t)return null;if(wn(t)==="object"){var r=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return t[r]}return"".concat(t,"-").concat(e)}var X3e=function(t){var e=(0,K3e.useRef)();function r(i){i&&(i.removeEventListener(KK,t),i.removeEventListener(YK,t))}function n(i){e.current&&e.current!==i&&r(e.current),i&&i!==e.current&&(i.addEventListener(KK,t),i.addEventListener(YK,t),e.current=i)}return Y3e.useEffect(function(){return function(){r(e.current)}},[]),[n,r]};p();var Gk=Fe(Et()),Nlr=Of()?Gk.useLayoutEffect:Gk.useEffect,$k=Nlr;p();var J3e=Fe(Et());p();var Hk=Fe(Et()),Q3e=function(){var t=Hk.useRef(null);function e(){nl.cancel(t.current)}function r(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=nl(function(){i<=1?n({isCanceled:function(){return o!==t.current}}):r(n,i-1)});t.current=o}return Hk.useEffect(function(){return function(){e()}},[]),[r,e]};var klr=[il,rp,vm,zk],qlr=[il,Uk],QK=!1,e5e=!0;function Wk(t){return t===vm||t===zk}var t5e=function(t,e,r){var n=tp(ZK),i=En(n,2),o=i[0],l=i[1],f=Q3e(),d=En(f,2),v=d[0],x=d[1];function b(){l(il,!0)}var A=e?qlr:klr;return $k(function(){if(o!==ZK&&o!==zk){var P=A.indexOf(o),N=A[P+1],j=r(o);j===QK?l(N,!0):N&&v(function(D){function F(){D.isCanceled()||l(N,!0)}j===!0?F():Promise.resolve(j).then(F)})}},[t,o]),J3e.useEffect(function(){return function(){x()}},[]),[b,o]};function JK(t,e,r,n){var i=n.motionEnter,o=i===void 0?!0:i,l=n.motionAppear,f=l===void 0?!0:l,d=n.motionLeave,v=d===void 0?!0:d,x=n.motionDeadline,b=n.motionLeaveImmediately,A=n.onAppearPrepare,P=n.onEnterPrepare,N=n.onLeavePrepare,j=n.onAppearStart,D=n.onEnterStart,F=n.onLeaveStart,U=n.onAppearActive,$=n.onEnterActive,Z=n.onLeaveActive,ie=n.onAppearEnd,ne=n.onEnterEnd,ae=n.onLeaveEnd,ye=n.onVisibleChanged,ge=tp(),de=En(ge,2),be=de[0],Ne=de[1],Me=WK(Lf),ke=En(Me,2),He=ke[0],Ke=ke[1],Je=tp(null),We=En(Je,2),lt=We[0],pt=We[1],dt=He(),ze=(0,np.useRef)(!1),Dt=(0,np.useRef)(null);function Ot(){return r()}var Ue=(0,np.useRef)(!1);function nt(){Ke(Lf),pt(null,!0)}var Ze=gm(function(dr){var wr=He();if(wr!==Lf){var un=Ot();if(!(dr&&!dr.deadline&&dr.target!==un)){var Sn=Ue.current,Nn;wr===RI&&Sn?Nn=ie==null?void 0:ie(un,dr):wr===OI&&Sn?Nn=ne==null?void 0:ne(un,dr):wr===LI&&Sn&&(Nn=ae==null?void 0:ae(un,dr)),Sn&&Nn!==!1&&nt()}}}),rt=X3e(Ze),at=En(rt,1),ot=at[0],Lt=function(wr){switch(wr){case RI:return St(St(St({},il,A),rp,j),vm,U);case OI:return St(St(St({},il,P),rp,D),vm,$);case LI:return St(St(St({},il,N),rp,F),vm,Z);default:return{}}},zt=Zk.useMemo(function(){return Lt(dt)},[dt]),Pt=t5e(dt,!t,function(dr){if(dr===il){var wr=zt[il];return wr?wr(Ot()):QK}if(Gt in zt){var un;pt(((un=zt[Gt])===null||un===void 0?void 0:un.call(zt,Ot(),null))||null)}return Gt===vm&&dt!==Lf&&(ot(Ot()),x>0&&(clearTimeout(Dt.current),Dt.current=setTimeout(function(){Ze({deadline:!0})},x))),Gt===Uk&&nt(),e5e}),$t=En(Pt,2),Xt=$t[0],Gt=$t[1],Sr=Wk(Gt);Ue.current=Sr;var zr=(0,np.useRef)(null);$k(function(){if(!(ze.current&&zr.current===e)){Ne(e);var dr=ze.current;ze.current=!0;var wr;!dr&&e&&f&&(wr=RI),dr&&e&&o&&(wr=OI),(dr&&!e&&v||!dr&&b&&!e&&v)&&(wr=LI);var un=Lt(wr);wr&&(t||un[il])?(Ke(wr),Xt()):Ke(Lf),zr.current=e}},[e]),(0,np.useEffect)(function(){(dt===RI&&!f||dt===OI&&!o||dt===LI&&!v)&&Ke(Lf)},[f,o,v]),(0,np.useEffect)(function(){return function(){ze.current=!1,clearTimeout(Dt.current)}},[]);var vr=Zk.useRef(!1);(0,np.useEffect)(function(){be&&(vr.current=!0),be!==void 0&&dt===Lf&&((vr.current||be)&&(ye==null||ye(be)),vr.current=!0)},[be,dt]);var pr=lt;return zt[il]&&Gt===rp&&(pr=Nt({transition:"none"},pr)),[dt,Gt,pr,be!=null?be:e]}function Flr(t){var e=t;wn(t)==="object"&&(e=t.transitionSupport);function r(i,o){return!!(i.motionName&&e&&o!==!1)}var n=ol.forwardRef(function(i,o){var l=i.visible,f=l===void 0?!0:l,d=i.removeOnLeave,v=d===void 0?!0:d,x=i.forceRender,b=i.children,A=i.motionName,P=i.leavedClassName,N=i.eventProps,j=ol.useContext(j3e),D=j.motion,F=r(i,D),U=(0,e7.useRef)(),$=(0,e7.useRef)();function Z(){try{return U.current instanceof HTMLElement?U.current:AI($.current)}catch(We){return null}}var ie=JK(F,f,Z,i),ne=En(ie,4),ae=ne[0],ye=ne[1],ge=ne[2],de=ne[3],be=ol.useRef(de);de&&(be.current=!0);var Ne=ol.useCallback(function(We){U.current=We,VK(o,We)},[o]),Me,ke=Nt(Nt({},N),{},{visible:f});if(!b)Me=null;else if(ae===Lf)de?Me=b(Nt({},ke),Ne):!v&&be.current&&P?Me=b(Nt(Nt({},ke),{},{className:P}),Ne):x||!v&&!P?Me=b(Nt(Nt({},ke),{},{style:{display:"none"}}),Ne):Me=null;else{var He;ye===il?He="prepare":Wk(ye)?He="active":ye===rp&&(He="start");var Ke=XK(A,"".concat(ae,"-").concat(He));Me=b(Nt(Nt({},ke),{},{className:(0,r5e.default)(XK(A,ae),St(St({},Ke,Ke&&He),A,typeof A=="string")),style:ge}),Ne)}if(ol.isValidElement(Me)&&CI(Me)){var Je=O3e(Me);Je||(Me=ol.cloneElement(Me,{ref:Ne}))}return ol.createElement(U3e,{ref:$},Me)});return n.displayName="CSSMotion",n}var Yk=Flr(Vk);p();var xv=Fe(Et());p();var Kk="add",Xk="keep",Qk="remove",eq="removed";function jlr(t){var e;return t&&wn(t)==="object"&&"key"in t?e=t:e={key:t},Nt(Nt({},e),{},{key:String(e.key)})}function Jk(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(jlr)}function n5e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],n=0,i=e.length,o=Jk(t),l=Jk(e);o.forEach(function(v){for(var x=!1,b=n;b<i;b+=1){var A=l[b];if(A.key===v.key){n<b&&(r=r.concat(l.slice(n,b).map(function(P){return Nt(Nt({},P),{},{status:Kk})})),n=b),r.push(Nt(Nt({},A),{},{status:Xk})),n+=1,x=!0;break}}x||r.push(Nt(Nt({},v),{},{status:Qk}))}),n<i&&(r=r.concat(l.slice(n).map(function(v){return Nt(Nt({},v),{},{status:Kk})})));var f={};r.forEach(function(v){var x=v.key;f[x]=(f[x]||0)+1});var d=Object.keys(f).filter(function(v){return f[v]>1});return d.forEach(function(v){r=r.filter(function(x){var b=x.key,A=x.status;return b!==v||A!==Qk}),r.forEach(function(x){x.key===v&&(x.status=Xk)})}),r}var zlr=["component","children","onVisibleChanged","onAllRemoved"],Ulr=["status"],Blr=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Vlr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yk,r=function(n){Qa(o,n);var i=Ja(o);function o(){var l;Ka(this,o);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return l=i.call.apply(i,[this].concat(d)),St(Wr(l),"state",{keyEntities:[]}),St(Wr(l),"removeKey",function(x){l.setState(function(b){var A=b.keyEntities.map(function(P){return P.key!==x?P:Nt(Nt({},P),{},{status:eq})});return{keyEntities:A}},function(){var b=l.state.keyEntities,A=b.filter(function(P){var N=P.status;return N!==eq}).length;A===0&&l.props.onAllRemoved&&l.props.onAllRemoved()})}),l}return Xa(o,[{key:"render",value:function(){var f=this,d=this.state.keyEntities,v=this.props,x=v.component,b=v.children,A=v.onVisibleChanged,P=v.onAllRemoved,N=xs(v,zlr),j=x||xv.Fragment,D={};return Blr.forEach(function(F){D[F]=N[F],delete N[F]}),delete N.keys,xv.createElement(j,N,d.map(function(F,U){var $=F.status,Z=xs(F,Ulr),ie=$===Kk||$===Xk;return xv.createElement(e,gn({},D,{key:Z.key,visible:ie,eventProps:Z,onVisibleChanged:function(ae){A==null||A(ae,{key:Z.key}),ae||f.removeKey(Z.key)}}),function(ne,ae){return b(Nt(Nt({},ne),{},{index:U}),ae)})}))}}],[{key:"getDerivedStateFromProps",value:function(f,d){var v=f.keys,x=d.keyEntities,b=Jk(v),A=n5e(x,b);return{keyEntities:A.filter(function(P){var N=x.find(function(j){var D=j.key;return P.key===D});return!(N&&N.status===eq&&P.status===Qk)})}}}]),o}(xv.Component);return St(r,"defaultProps",{component:"div"}),r}var Glr=Vlr(Vk);var Xx=Yk;p();function tq(t){var e=t.prefixCls,r=t.motion,n=t.animation,i=t.transitionName;return r||(n?{motionName:"".concat(e,"-").concat(n)}:i?{motionName:i}:null)}function r7(t){var e=t.prefixCls,r=t.visible,n=t.zIndex,i=t.mask,o=t.maskMotion,l=t.maskAnimation,f=t.maskTransitionName;if(!i)return null;var d={};return(o||f||l)&&(d=Nt({motionAppear:!0},tq({motion:o,prefixCls:e,transitionName:f,animation:l}))),t7.createElement(Xx,gn({},d,{visible:r,removeOnLeave:!0}),function(v){var x=v.className;return t7.createElement("div",{style:{zIndex:n},className:(0,i5e.default)("".concat(e,"-mask"),x)})})}p();var kl=Fe(Et()),wv=Fe(Et());p();p();p();function o5e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function a5e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o5e(Object(r),!0).forEach(function(n){$lr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o5e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s7(t){"@babel/helpers - typeof";return s7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s7(t)}function $lr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var DI,Hlr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function aq(){if(DI!==void 0)return DI;DI="";var t=document.createElement("p").style,e="Transform";for(var r in Hlr)r+e in t&&(DI=r);return DI}function _5e(){return aq()?"".concat(aq(),"TransitionProperty"):"transitionProperty"}function sq(){return aq()?"".concat(aq(),"Transform"):"transform"}function s5e(t,e){var r=_5e();r&&(t.style[r]=e,r!=="transitionProperty"&&(t.style.transitionProperty=e))}function n7(t,e){var r=sq();r&&(t.style[r]=e,r!=="transform"&&(t.style.transform=e))}function Wlr(t){return t.style.transitionProperty||t.style[_5e()]}function Zlr(t){var e=window.getComputedStyle(t,null),r=e.getPropertyValue("transform")||e.getPropertyValue(sq());if(r&&r!=="none"){var n=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var Ylr=/matrix\((.*)\)/,Klr=/matrix3d\((.*)\)/;function Xlr(t,e){var r=window.getComputedStyle(t,null),n=r.getPropertyValue("transform")||r.getPropertyValue(sq());if(n&&n!=="none"){var i,o=n.match(Ylr);if(o)o=o[1],i=o.split(",").map(function(f){return parseFloat(f,10)}),i[4]=e.x,i[5]=e.y,n7(t,"matrix(".concat(i.join(","),")"));else{var l=n.match(Klr)[1];i=l.split(",").map(function(f){return parseFloat(f,10)}),i[12]=e.x,i[13]=e.y,n7(t,"matrix3d(".concat(i.join(","),")"))}}else n7(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var Qlr=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,qI;function l5e(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function Qx(t,e,r){var n=r;if(s7(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&Qx(t,i,e[i]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),t.style[e]=n;return}return qI(t,e)}function Jlr(t){var e,r,n,i=t.ownerDocument,o=i.body,l=i&&i.documentElement;return e=t.getBoundingClientRect(),r=Math.floor(e.left),n=Math.floor(e.top),r-=l.clientLeft||o.clientLeft||0,n-=l.clientTop||o.clientTop||0,{left:r,top:n}}function x5e(t,e){var r=t["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof r!="number"){var i=t.document;r=i.documentElement[n],typeof r!="number"&&(r=i.body[n])}return r}function b5e(t){return x5e(t)}function w5e(t){return x5e(t,!0)}function kI(t){var e=Jlr(t),r=t.ownerDocument,n=r.defaultView||r.parentWindow;return e.left+=b5e(n),e.top+=w5e(n),e}function f7(t){return t!=null&&t==t.window}function E5e(t){return f7(t)?t.document:t.nodeType===9?t:t.ownerDocument}function eur(t,e,r){var n=r,i="",o=E5e(t);return n=n||o.defaultView.getComputedStyle(t,null),n&&(i=n.getPropertyValue(e)||n[e]),i}var tur=new RegExp("^(".concat(Qlr,")(?!px)[a-z%]+$"),"i"),rur=/^(top|right|bottom|left)$/,i7="currentStyle",o7="runtimeStyle",bv="left",nur="px";function iur(t,e){var r=t[i7]&&t[i7][e];if(tur.test(r)&&!rur.test(e)){var n=t.style,i=n[bv],o=t[o7][bv];t[o7][bv]=t[i7][bv],n[bv]=e==="fontSize"?"1em":r||0,r=n.pixelLeft+nur,n[bv]=i,t[o7][bv]=o}return r===""?"auto":r}typeof window!="undefined"&&(qI=window.getComputedStyle?eur:iur);function rq(t,e){return t==="left"?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function u5e(t){if(t==="left")return"right";if(t==="right")return"left";if(t==="top")return"bottom";if(t==="bottom")return"top"}function c5e(t,e,r){Qx(t,"position")==="static"&&(t.style.position="relative");var n=-999,i=-999,o=rq("left",r),l=rq("top",r),f=u5e(o),d=u5e(l);o!=="left"&&(n=999),l!=="top"&&(i=999);var v="",x=kI(t);("left"in e||"top"in e)&&(v=Wlr(t)||"",s5e(t,"none")),"left"in e&&(t.style[f]="",t.style[o]="".concat(n,"px")),"top"in e&&(t.style[d]="",t.style[l]="".concat(i,"px")),l5e(t);var b=kI(t),A={};for(var P in e)if(e.hasOwnProperty(P)){var N=rq(P,r),j=P==="left"?n:i,D=x[P]-b[P];N===P?A[N]=j+D:A[N]=j-D}Qx(t,A),l5e(t),("left"in e||"top"in e)&&s5e(t,v);var F={};for(var U in e)if(e.hasOwnProperty(U)){var $=rq(U,r),Z=e[U]-x[U];U===$?F[$]=A[$]+Z:F[$]=A[$]-Z}Qx(t,F)}function our(t,e){var r=kI(t),n=Zlr(t),i={x:n.x,y:n.y};"left"in e&&(i.x=n.x+e.left-r.left),"top"in e&&(i.y=n.y+e.top-r.top),Xlr(t,i)}function aur(t,e,r){if(r.ignoreShake){var n=kI(t),i=n.left.toFixed(0),o=n.top.toFixed(0),l=e.left.toFixed(0),f=e.top.toFixed(0);if(i===l&&o===f)return}r.useCssRight||r.useCssBottom?c5e(t,e,r):r.useCssTransform&&sq()in document.body.style?our(t,e):c5e(t,e,r)}function h7(t,e){for(var r=0;r<t.length;r++)e(t[r])}function S5e(t){return qI(t,"boxSizing")==="border-box"}var sur=["margin","border","padding"],l7=-1,lur=2,u7=1,uur=0;function cur(t,e,r){var n={},i=t.style,o;for(o in e)e.hasOwnProperty(o)&&(n[o]=i[o],i[o]=e[o]);r.call(t);for(o in e)e.hasOwnProperty(o)&&(i[o]=n[o])}function NI(t,e,r){var n=0,i,o,l;for(o=0;o<e.length;o++)if(i=e[o],i)for(l=0;l<r.length;l++){var f=void 0;i==="border"?f="".concat(i).concat(r[l],"Width"):f=i+r[l],n+=parseFloat(qI(t,f))||0}return n}var Df={getParent:function(e){var r=e;do r.nodeType===11&&r.host?r=r.host:r=r.parentNode;while(r&&r.nodeType!==1&&r.nodeType!==9);return r}};h7(["Width","Height"],function(t){Df["doc".concat(t)]=function(e){var r=e.document;return Math.max(r.documentElement["scroll".concat(t)],r.body["scroll".concat(t)],Df["viewport".concat(t)](r))},Df["viewport".concat(t)]=function(e){var r="client".concat(t),n=e.document,i=n.body,o=n.documentElement,l=o[r];return n.compatMode==="CSS1Compat"&&l||i&&i[r]||l}});function f5e(t,e,r){var n=r;if(f7(t))return e==="width"?Df.viewportWidth(t):Df.viewportHeight(t);if(t.nodeType===9)return e==="width"?Df.docWidth(t):Df.docHeight(t);var i=e==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(e==="width"?t.getBoundingClientRect().width:t.getBoundingClientRect().height),l=S5e(t),f=0;(o==null||o<=0)&&(o=void 0,f=qI(t,e),(f==null||Number(f)<0)&&(f=t.style[e]||0),f=Math.floor(parseFloat(f))||0),n===void 0&&(n=l?u7:l7);var d=o!==void 0||l,v=o||f;return n===l7?d?v-NI(t,["border","padding"],i):f:d?n===u7?v:v+(n===lur?-NI(t,["border"],i):NI(t,["margin"],i)):f+NI(t,sur.slice(n),i)}var fur={position:"absolute",visibility:"hidden",display:"block"};function h5e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=e[0];return i.offsetWidth!==0?n=f5e.apply(void 0,e):cur(i,fur,function(){n=f5e.apply(void 0,e)}),n}h7(["width","height"],function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);Df["outer".concat(e)]=function(n,i){return n&&h5e(n,t,i?uur:u7)};var r=t==="width"?["Left","Right"]:["Top","Bottom"];Df[t]=function(n,i){var o=i;if(o!==void 0){if(n){var l=S5e(n);return l&&(o+=NI(n,["padding","border"],r)),Qx(n,t,o)}return}return n&&h5e(n,t,l7)}});function T5e(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var Vr={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var r=e.ownerDocument||e;return r.defaultView||r.parentWindow},getDocument:E5e,offset:function(e,r,n){if(typeof r!="undefined")aur(e,r,n||{});else return kI(e)},isWindow:f7,each:h7,css:Qx,clone:function(e){var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);var i=e.overflow;if(i)for(r in e)e.hasOwnProperty(r)&&(n.overflow[r]=e.overflow[r]);return n},mix:T5e,getWindowScrollLeft:function(e){return b5e(e)},getWindowScrollTop:function(e){return w5e(e)},merge:function(){for(var e={},r=0;r<arguments.length;r++)Vr.mix(e,r<0||arguments.length<=r?void 0:arguments[r]);return e},viewportWidth:0,viewportHeight:0};T5e(Vr,Df);var a7=Vr.getParent;function c7(t){if(Vr.isWindow(t)||t.nodeType===9)return null;var e=Vr.getDocument(t),r=e.body,n,i=Vr.css(t,"position"),o=i==="fixed"||i==="absolute";if(!o)return t.nodeName.toLowerCase()==="html"?null:a7(t);for(n=a7(t);n&&n!==r&&n.nodeType!==9;n=a7(n))if(i=Vr.css(n,"position"),i!=="static")return n;return null}var p5e=Vr.getParent;function hur(t){if(Vr.isWindow(t)||t.nodeType===9)return!1;var e=Vr.getDocument(t),r=e.body,n=null;for(n=p5e(t);n&&n!==r&&n!==e;n=p5e(n)){var i=Vr.css(n,"position");if(i==="fixed")return!0}return!1}function p7(t,e){for(var r={left:0,right:1/0,top:0,bottom:1/0},n=c7(t),i=Vr.getDocument(t),o=i.defaultView||i.parentWindow,l=i.body,f=i.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==l&&n!==f&&Vr.css(n,"overflow")!=="visible"){var d=Vr.offset(n);d.left+=n.clientLeft,d.top+=n.clientTop,r.top=Math.max(r.top,d.top),r.right=Math.min(r.right,d.left+n.clientWidth),r.bottom=Math.min(r.bottom,d.top+n.clientHeight),r.left=Math.max(r.left,d.left)}else if(n===l||n===f)break;n=c7(n)}var v=null;if(!Vr.isWindow(t)&&t.nodeType!==9){v=t.style.position;var x=Vr.css(t,"position");x==="absolute"&&(t.style.position="fixed")}var b=Vr.getWindowScrollLeft(o),A=Vr.getWindowScrollTop(o),P=Vr.viewportWidth(o),N=Vr.viewportHeight(o),j=f.scrollWidth,D=f.scrollHeight,F=window.getComputedStyle(l);if(F.overflowX==="hidden"&&(j=o.innerWidth),F.overflowY==="hidden"&&(D=o.innerHeight),t.style&&(t.style.position=v),e||hur(t))r.left=Math.max(r.left,b),r.top=Math.max(r.top,A),r.right=Math.min(r.right,b+P),r.bottom=Math.min(r.bottom,A+N);else{var U=Math.max(j,b+P);r.right=Math.min(r.right,U);var $=Math.max(D,A+N);r.bottom=Math.min(r.bottom,$)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function pur(t,e,r,n){var i=Vr.clone(t),o={width:e.width,height:e.height};return n.adjustX&&i.left<r.left&&(i.left=r.left),n.resizeWidth&&i.left>=r.left&&i.left+o.width>r.right&&(o.width-=i.left+o.width-r.right),n.adjustX&&i.left+o.width>r.right&&(i.left=Math.max(r.right-o.width,r.left)),n.adjustY&&i.top<r.top&&(i.top=r.top),n.resizeHeight&&i.top>=r.top&&i.top+o.height>r.bottom&&(o.height-=i.top+o.height-r.bottom),n.adjustY&&i.top+o.height>r.bottom&&(i.top=Math.max(r.bottom-o.height,r.top)),Vr.mix(i,o)}function d7(t){var e,r,n;if(!Vr.isWindow(t)&&t.nodeType!==9)e=Vr.offset(t),r=Vr.outerWidth(t),n=Vr.outerHeight(t);else{var i=Vr.getWindow(t);e={left:Vr.getWindowScrollLeft(i),top:Vr.getWindowScrollTop(i)},r=Vr.viewportWidth(i),n=Vr.viewportHeight(i)}return e.width=r,e.height=n,e}function d5e(t,e){var r=e.charAt(0),n=e.charAt(1),i=t.width,o=t.height,l=t.left,f=t.top;return r==="c"?f+=o/2:r==="b"&&(f+=o),n==="c"?l+=i/2:n==="r"&&(l+=i),{left:l,top:f}}function nq(t,e,r,n,i){var o=d5e(e,r[1]),l=d5e(t,r[0]),f=[l.left-o.left,l.top-o.top];return{left:Math.round(t.left-f[0]+n[0]-i[0]),top:Math.round(t.top-f[1]+n[1]-i[1])}}function m5e(t,e,r){return t.left<r.left||t.left+e.width>r.right}function g5e(t,e,r){return t.top<r.top||t.top+e.height>r.bottom}function dur(t,e,r){return t.left>r.right||t.left+e.width<r.left}function mur(t,e,r){return t.top>r.bottom||t.top+e.height<r.top}function iq(t,e,r){var n=[];return Vr.each(t,function(i){n.push(i.replace(e,function(o){return r[o]}))}),n}function oq(t,e){return t[e]=-t[e],t}function v5e(t,e){var r;return /%$/.test(t)?r=parseInt(t.substring(0,t.length-1),10)/100*e:r=parseInt(t,10),r||0}function y5e(t,e){t[0]=v5e(t[0],e.width),t[1]=v5e(t[1],e.height)}function I5e(t,e,r,n){var i=r.points,o=r.offset||[0,0],l=r.targetOffset||[0,0],f=r.overflow,d=r.source||t;o=[].concat(o),l=[].concat(l),f=f||{};var v={},x=0,b=!!(f&&f.alwaysByViewport),A=p7(d,b),P=d7(d);y5e(o,P),y5e(l,e);var N=nq(P,e,i,o,l),j=Vr.merge(P,N);if(A&&(f.adjustX||f.adjustY)&&n){if(f.adjustX&&m5e(N,P,A)){var D=iq(i,/[lr]/gi,{l:"r",r:"l"}),F=oq(o,0),U=oq(l,0),$=nq(P,e,D,F,U);dur($,P,A)||(x=1,i=D,o=F,l=U)}if(f.adjustY&&g5e(N,P,A)){var Z=iq(i,/[tb]/gi,{t:"b",b:"t"}),ie=oq(o,1),ne=oq(l,1),ae=nq(P,e,Z,ie,ne);mur(ae,P,A)||(x=1,i=Z,o=ie,l=ne)}x&&(N=nq(P,e,i,o,l),Vr.mix(j,N));var ye=m5e(N,P,A),ge=g5e(N,P,A);if(ye||ge){var de=i;ye&&(de=iq(i,/[lr]/gi,{l:"r",r:"l"})),ge&&(de=iq(i,/[tb]/gi,{t:"b",b:"t"})),i=de,o=r.offset||[0,0],l=r.targetOffset||[0,0]}v.adjustX=f.adjustX&&ye,v.adjustY=f.adjustY&&ge,(v.adjustX||v.adjustY)&&(j=pur(N,P,A,v))}return j.width!==P.width&&Vr.css(d,"width",Vr.width(d)+j.width-P.width),j.height!==P.height&&Vr.css(d,"height",Vr.height(d)+j.height-P.height),Vr.offset(d,{left:j.left,top:j.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:i,offset:o,targetOffset:l,overflow:v}}function gur(t,e){var r=p7(t,e),n=d7(t);return!r||n.left+n.width<=r.left||n.top+n.height<=r.top||n.left>=r.right||n.top>=r.bottom}function lq(t,e,r){var n=r.target||e,i=d7(n),o=!gur(n,r.overflow&&r.overflow.alwaysByViewport);return I5e(t,i,r,o)}lq.__getOffsetParent=c7;lq.__getVisibleRectForElement=p7;function A5e(t,e,r){var n,i,o=Vr.getDocument(t),l=o.defaultView||o.parentWindow,f=Vr.getWindowScrollLeft(l),d=Vr.getWindowScrollTop(l),v=Vr.viewportWidth(l),x=Vr.viewportHeight(l);"pageX"in e?n=e.pageX:n=f+e.clientX,"pageY"in e?i=e.pageY:i=d+e.clientY;var b={left:n,top:i,width:0,height:0},A=n>=0&&n<=f+v&&i>=0&&i<=d+x,P=[r.points[0],"cc"];return I5e(t,b,a5e(a5e({},r),{},{points:P}),A)}p();function vur(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function i(o,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=n.has(o);if(Pf(!d,"Warning: There may be circular references"),d)return!1;if(o===l)return!0;if(r&&f>1)return!1;n.add(o);var v=f+1;if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(var x=0;x<o.length;x++)if(!i(o[x],l[x],v))return!1;return!0}if(o&&l&&wn(o)==="object"&&wn(l)==="object"){var b=Object.keys(o);return b.length!==Object.keys(l).length?!1:b.every(function(A){return i(o[A],l[A],v)})}return!1}return i(t,e)}var M5e=vur;p();var C5e=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),r=e.width,n=e.height;if(r||n)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),o=i.width,l=i.height;if(o||l)return!0}}return!1};var Ta=Fe(Et());p();var m7=Fe(Et()),P5e=function(t,e){var r=m7.default.useRef(!1),n=m7.default.useRef(null);function i(){window.clearTimeout(n.current)}function o(l){if(i(),!r.current||l===!0){if(t(l)===!1)return;r.current=!0,n.current=window.setTimeout(function(){r.current=!1},e)}else n.current=window.setTimeout(function(){r.current=!1,o()},e)}return[o,function(){r.current=!1,i()}]};p();p();var O5e=function(){if(typeof Map!="undefined")return Map;function t(e,r){var n=-1;return e.some(function(i,o){return i[0]===r?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var n=t(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(r,n){var i=t(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},e.prototype.delete=function(r){var n=this.__entries__,i=t(n,r);~i&&n.splice(i,1)},e.prototype.has=function(r){return!!~t(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,o=this.__entries__;i<o.length;i++){var l=o[i];r.call(n,l[1],l[0])}},e}()}(),g7=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,uq=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),yur=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(uq):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),_ur=2;function xur(t,e){var r=!1,n=!1,i=0;function o(){r&&(r=!1,t()),n&&f()}function l(){yur(o)}function f(){var d=Date.now();if(r){if(d-i<_ur)return;n=!0}else r=!0,n=!1,setTimeout(l,e);i=d}return f}var bur=20,wur=["top","right","bottom","left","width","height","size","weight"],Eur=typeof MutationObserver!="undefined",Sur=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=xur(this.refresh.bind(this),bur)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var r=this.observers_,n=r.indexOf(e);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!g7||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Eur?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!g7||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var r=e.propertyName,n=r===void 0?"":r,i=wur.some(function(o){return!!~n.indexOf(o)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),L5e=function(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Jx=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||uq},D5e=fq(0,0,0,0);function cq(t){return parseFloat(t)||0}function R5e(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(n,i){var o=t["border-"+i+"-width"];return n+cq(o)},0)}function Tur(t){for(var e=["top","right","bottom","left"],r={},n=0,i=e;n<i.length;n++){var o=i[n],l=t["padding-"+o];r[o]=cq(l)}return r}function Iur(t){var e=t.getBBox();return fq(0,0,e.width,e.height)}function Aur(t){var e=t.clientWidth,r=t.clientHeight;if(!e&&!r)return D5e;var n=Jx(t).getComputedStyle(t),i=Tur(n),o=i.left+i.right,l=i.top+i.bottom,f=cq(n.width),d=cq(n.height);if(n.boxSizing==="border-box"&&(Math.round(f+o)!==e&&(f-=R5e(n,"left","right")+o),Math.round(d+l)!==r&&(d-=R5e(n,"top","bottom")+l)),!Cur(t)){var v=Math.round(f+o)-e,x=Math.round(d+l)-r;Math.abs(v)!==1&&(f-=v),Math.abs(x)!==1&&(d-=x)}return fq(i.left,i.top,f,d)}var Mur=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof Jx(t).SVGGraphicsElement}:function(t){return t instanceof Jx(t).SVGElement&&typeof t.getBBox=="function"}}();function Cur(t){return t===Jx(t).document.documentElement}function Pur(t){return g7?Mur(t)?Iur(t):Aur(t):D5e}function Rur(t){var e=t.x,r=t.y,n=t.width,i=t.height,o=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return L5e(l,{x:e,y:r,width:n,height:i,top:r,right:e+n,bottom:i+r,left:e}),l}function fq(t,e,r,n){return{x:t,y:e,width:r,height:n}}var Our=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=fq(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=Pur(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),Lur=function(){function t(e,r){var n=Rur(r);L5e(this,{target:e,contentRect:n})}return t}(),Dur=function(){function t(e,r,n){if(this.activeObservations_=[],this.observations_=new O5e,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=n}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Jx(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(e)||(r.set(e,new Our(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Jx(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Lur(n.target,n.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),N5e=typeof WeakMap!="undefined"?new WeakMap:new O5e,k5e=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Sur.getInstance(),n=new Dur(e,r,this);N5e.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){k5e.prototype[t]=function(){var e;return(e=N5e.get(this))[t].apply(e,arguments)}});var Nur=function(){return typeof uq.ResizeObserver!="undefined"?uq.ResizeObserver:k5e}(),q5e=Nur;function F5e(t,e){return t===e?!0:!t||!e?!1:"pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e?t.clientX===e.clientX&&t.clientY===e.clientY:!1}function j5e(t,e){t!==document.activeElement&&_v(e,t)&&typeof t.focus=="function"&&t.focus()}function v7(t,e){var r=null,n=null;function i(l){var f=En(l,1),d=f[0].target;if(document.documentElement.contains(d)){var v=d.getBoundingClientRect(),x=v.width,b=v.height,A=Math.floor(x),P=Math.floor(b);(r!==A||n!==P)&&Promise.resolve().then(function(){e({width:A,height:P})}),r=A,n=P}}var o=new q5e(i);return t&&o.observe(t),function(){o.disconnect()}}function z5e(t){return typeof t!="function"?null:t()}function U5e(t){return wn(t)!=="object"||!t?null:t}var kur=function(e,r){var n=e.children,i=e.disabled,o=e.target,l=e.align,f=e.onAlign,d=e.monitorWindowResize,v=e.monitorBufferTime,x=v===void 0?0:v,b=Ta.default.useRef({}),A=Ta.default.useRef(),P=Ta.default.Children.only(n),N=Ta.default.useRef({});N.current.disabled=i,N.current.target=o,N.current.align=l,N.current.onAlign=f;var j=P5e(function(){var be=N.current,Ne=be.disabled,Me=be.target,ke=be.align,He=be.onAlign,Ke=A.current;if(!Ne&&Me&&Ke){var Je,We=z5e(Me),lt=U5e(Me);b.current.element=We,b.current.point=lt,b.current.align=ke;var pt=document,dt=pt.activeElement;return We&&C5e(We)?Je=lq(Ke,We,ke):lt&&(Je=A5e(Ke,lt,ke)),j5e(dt,Ke),He&&Je&&He(Ke,Je),!0}return!1},x),D=En(j,2),F=D[0],U=D[1],$=Ta.default.useState(),Z=En($,2),ie=Z[0],ne=Z[1],ae=Ta.default.useState(),ye=En(ae,2),ge=ye[0],de=ye[1];return PI(function(){ne(z5e(o)),de(U5e(o))}),Ta.default.useEffect(function(){(b.current.element!==ie||!F5e(b.current.point,ge)||!M5e(b.current.align,l))&&F()}),Ta.default.useEffect(function(){var be=v7(A.current,F);return be},[A.current]),Ta.default.useEffect(function(){var be=v7(ie,F);return be},[ie]),Ta.default.useEffect(function(){i?U():F()},[i]),Ta.default.useEffect(function(){if(d){var be=bs(window,"resize",F);return be.remove}},[d]),Ta.default.useEffect(function(){return function(){U()}},[]),Ta.default.useImperativeHandle(r,function(){return{forceAlign:function(){return F(!0)}}}),Ta.default.isValidElement(P)&&(P=Ta.default.cloneElement(P,{ref:Zx(P.ref,A)})),P},B5e=Ta.default.forwardRef(kur);B5e.displayName="Align";var V5e=B5e;var G5e=V5e;var K5e=Fe(pi());p();p();function hq(){"use strict";hq=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",f=i.toStringTag||"@@toStringTag";function d(de,be,Ne,Me){return Object.defineProperty(de,be,{value:Ne,enumerable:!Me,configurable:!Me,writable:!Me})}try{d({},"")}catch(de){d=function(Ne,Me,ke){return Ne[Me]=ke}}function v(de,be,Ne,Me){var ke=be&&be.prototype instanceof A?be:A,He=Object.create(ke.prototype);return d(He,"_invoke",function(Ke,Je,We){var lt=1;return function(pt,dt){if(lt===3)throw Error("Generator is already running");if(lt===4){if(pt==="throw")throw dt;return{value:t,done:!0}}for(We.method=pt,We.arg=dt;;){var ze=We.delegate;if(ze){var Dt=ie(ze,We);if(Dt){if(Dt===b)continue;return Dt}}if(We.method==="next")We.sent=We._sent=We.arg;else if(We.method==="throw"){if(lt===1)throw lt=4,We.arg;We.dispatchException(We.arg)}else We.method==="return"&&We.abrupt("return",We.arg);lt=3;var Ot=x(Ke,Je,We);if(Ot.type==="normal"){if(lt=We.done?4:2,Ot.arg===b)continue;return{value:Ot.arg,done:We.done}}Ot.type==="throw"&&(lt=4,We.method="throw",We.arg=Ot.arg)}}}(de,Ne,new ye(Me||[])),!0),He}function x(de,be,Ne){try{return{type:"normal",arg:de.call(be,Ne)}}catch(Me){return{type:"throw",arg:Me}}}e.wrap=v;var b={};function A(){}function P(){}function N(){}var j={};d(j,o,function(){return this});var D=Object.getPrototypeOf,F=D&&D(D(ge([])));F&&F!==r&&n.call(F,o)&&(j=F);var U=N.prototype=A.prototype=Object.create(j);function $(de){["next","throw","return"].forEach(function(be){d(de,be,function(Ne){return this._invoke(be,Ne)})})}function Z(de,be){function Ne(ke,He,Ke,Je){var We=x(de[ke],de,He);if(We.type!=="throw"){var lt=We.arg,pt=lt.value;return pt&&wn(pt)=="object"&&n.call(pt,"__await")?be.resolve(pt.__await).then(function(dt){Ne("next",dt,Ke,Je)},function(dt){Ne("throw",dt,Ke,Je)}):be.resolve(pt).then(function(dt){lt.value=dt,Ke(lt)},function(dt){return Ne("throw",dt,Ke,Je)})}Je(We.arg)}var Me;d(this,"_invoke",function(ke,He){function Ke(){return new be(function(Je,We){Ne(ke,He,Je,We)})}return Me=Me?Me.then(Ke,Ke):Ke()},!0)}function ie(de,be){var Ne=be.method,Me=de.i[Ne];if(Me===t)return be.delegate=null,Ne==="throw"&&de.i.return&&(be.method="return",be.arg=t,ie(de,be),be.method==="throw")||Ne!=="return"&&(be.method="throw",be.arg=new TypeError("The iterator does not provide a '"+Ne+"' method")),b;var ke=x(Me,de.i,be.arg);if(ke.type==="throw")return be.method="throw",be.arg=ke.arg,be.delegate=null,b;var He=ke.arg;return He?He.done?(be[de.r]=He.value,be.next=de.n,be.method!=="return"&&(be.method="next",be.arg=t),be.delegate=null,b):He:(be.method="throw",be.arg=new TypeError("iterator result is not an object"),be.delegate=null,b)}function ne(de){this.tryEntries.push(de)}function ae(de){var be=de[4]||{};be.type="normal",be.arg=t,de[4]=be}function ye(de){this.tryEntries=[[-1]],de.forEach(ne,this),this.reset(!0)}function ge(de){if(de!=null){var be=de[o];if(be)return be.call(de);if(typeof de.next=="function")return de;if(!isNaN(de.length)){var Ne=-1,Me=function ke(){for(;++Ne<de.length;)if(n.call(de,Ne))return ke.value=de[Ne],ke.done=!1,ke;return ke.value=t,ke.done=!0,ke};return Me.next=Me}}throw new TypeError(wn(de)+" is not iterable")}return P.prototype=N,d(U,"constructor",N),d(N,"constructor",P),P.displayName=d(N,f,"GeneratorFunction"),e.isGeneratorFunction=function(de){var be=typeof de=="function"&&de.constructor;return!!be&&(be===P||(be.displayName||be.name)==="GeneratorFunction")},e.mark=function(de){return Object.setPrototypeOf?Object.setPrototypeOf(de,N):(de.__proto__=N,d(de,f,"GeneratorFunction")),de.prototype=Object.create(U),de},e.awrap=function(de){return{__await:de}},$(Z.prototype),d(Z.prototype,l,function(){return this}),e.AsyncIterator=Z,e.async=function(de,be,Ne,Me,ke){ke===void 0&&(ke=Promise);var He=new Z(v(de,be,Ne,Me),ke);return e.isGeneratorFunction(be)?He:He.next().then(function(Ke){return Ke.done?Ke.value:He.next()})},$(U),d(U,f,"Generator"),d(U,o,function(){return this}),d(U,"toString",function(){return"[object Generator]"}),e.keys=function(de){var be=Object(de),Ne=[];for(var Me in be)Ne.unshift(Me);return function ke(){for(;Ne.length;)if((Me=Ne.pop())in be)return ke.value=Me,ke.done=!1,ke;return ke.done=!0,ke}},e.values=ge,ye.prototype={constructor:ye,reset:function(be){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(ae),!be)for(var Ne in this)Ne.charAt(0)==="t"&&n.call(this,Ne)&&!isNaN(+Ne.slice(1))&&(this[Ne]=t)},stop:function(){this.done=!0;var be=this.tryEntries[0][4];if(be.type==="throw")throw be.arg;return this.rval},dispatchException:function(be){if(this.done)throw be;var Ne=this;function Me(pt){Ke.type="throw",Ke.arg=be,Ne.next=pt}for(var ke=Ne.tryEntries.length-1;ke>=0;--ke){var He=this.tryEntries[ke],Ke=He[4],Je=this.prev,We=He[1],lt=He[2];if(He[0]===-1)return Me("end"),!1;if(!We&&!lt)throw Error("try statement without catch or finally");if(He[0]!=null&&He[0]<=Je){if(Je<We)return this.method="next",this.arg=t,Me(We),!0;if(Je<lt)return Me(lt),!1}}},abrupt:function(be,Ne){for(var Me=this.tryEntries.length-1;Me>=0;--Me){var ke=this.tryEntries[Me];if(ke[0]>-1&&ke[0]<=this.prev&&this.prev<ke[2]){var He=ke;break}}He&&(be==="break"||be==="continue")&&He[0]<=Ne&&Ne<=He[2]&&(He=null);var Ke=He?He[4]:{};return Ke.type=be,Ke.arg=Ne,He?(this.method="next",this.next=He[2],b):this.complete(Ke)},complete:function(be,Ne){if(be.type==="throw")throw be.arg;return be.type==="break"||be.type==="continue"?this.next=be.arg:be.type==="return"?(this.rval=this.arg=be.arg,this.method="return",this.next="end"):be.type==="normal"&&Ne&&(this.next=Ne),b},finish:function(be){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Me=this.tryEntries[Ne];if(Me[2]===be)return this.complete(Me[4],Me[3]),ae(Me),b}},catch:function(be){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Me=this.tryEntries[Ne];if(Me[0]===be){var ke=Me[4];if(ke.type==="throw"){var He=ke.arg;ae(Me)}return He}}throw Error("illegal catch attempt")},delegateYield:function(be,Ne,Me){return this.delegate={i:ge(be),r:Ne,n:Me},this.method==="next"&&(this.arg=t),b}},e}p();function $5e(t,e,r,n,i,o,l){try{var f=t[o](l),d=f.value}catch(v){return void r(v)}f.done?e(d):Promise.resolve(d).then(n,i)}function H5e(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function l(d){$5e(o,n,i,l,f,"next",d)}function f(d){$5e(o,n,i,l,f,"throw",d)}l(void 0)})}}var eb=Fe(Et());var W5e=["measure","alignPre","align",null,"motion"],Z5e=function(t,e){var r=tp(null),n=En(r,2),i=n[0],o=n[1],l=(0,eb.useRef)();function f(x){o(x,!0)}function d(){nl.cancel(l.current)}function v(x){d(),l.current=nl(function(){f(function(b){switch(i){case"align":return"motion";case"motion":return"stable";default:}return b}),x==null||x()})}return(0,eb.useEffect)(function(){f("measure")},[t]),(0,eb.useEffect)(function(){switch(i){case"measure":e();break;default:}i&&(l.current=nl(H5e(hq().mark(function x(){var b,A;return hq().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:b=W5e.indexOf(i),A=W5e[b+1],A&&b!==-1&&f(A);case 3:case"end":return N.stop()}},x)}))))},[i]),(0,eb.useEffect)(function(){return function(){d()}},[]),[i,v]};p();var pq=Fe(Et()),Y5e=function(t){var e=pq.useState({width:0,height:0}),r=En(e,2),n=r[0],i=r[1];function o(f){var d=f.offsetWidth,v=f.offsetHeight,x=f.getBoundingClientRect(),b=x.width,A=x.height;Math.abs(d-b)<1&&Math.abs(v-A)<1&&(d=b,v=A),i({width:d,height:v})}var l=pq.useMemo(function(){var f={};if(t){var d=n.width,v=n.height;t.indexOf("height")!==-1&&v?f.height=v:t.indexOf("minHeight")!==-1&&v&&(f.minHeight=v),t.indexOf("width")!==-1&&d?f.width=d:t.indexOf("minWidth")!==-1&&d&&(f.minWidth=d)}return f},[t,n]);return[l,o]};var X5e=kl.forwardRef(function(t,e){var r=t.visible,n=t.prefixCls,i=t.className,o=t.style,l=t.children,f=t.zIndex,d=t.stretch,v=t.destroyPopupOnHide,x=t.forceRender,b=t.align,A=t.point,P=t.getRootDomNode,N=t.getClassNameFromAlign,j=t.onAlign,D=t.onMouseEnter,F=t.onMouseLeave,U=t.onMouseDown,$=t.onTouchStart,Z=t.onClick,ie=(0,wv.useRef)(),ne=(0,wv.useRef)(),ae=(0,wv.useState)(),ye=En(ae,2),ge=ye[0],de=ye[1],be=Y5e(d),Ne=En(be,2),Me=Ne[0],ke=Ne[1];function He(){d&&ke(P())}var Ke=Z5e(r,He),Je=En(Ke,2),We=Je[0],lt=Je[1],pt=(0,wv.useState)(0),dt=En(pt,2),ze=dt[0],Dt=dt[1],Ot=(0,wv.useRef)();PI(function(){We==="alignPre"&&Dt(0)},[We]);function Ue(){return A||P}function nt(){var Pt;(Pt=ie.current)===null||Pt===void 0||Pt.forceAlign()}function Ze(Pt,$t){var Xt=N($t);ge!==Xt&&de(Xt),Dt(function(Gt){return Gt+1}),We==="align"&&(j==null||j(Pt,$t))}PI(function(){We==="align"&&(ze<3?nt():lt(function(){var Pt;(Pt=Ot.current)===null||Pt===void 0||Pt.call(Ot)}))},[ze]);var rt=Nt({},tq(t));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Pt){var $t=rt[Pt];rt[Pt]=function(Xt,Gt){return lt(),$t==null?void 0:$t(Xt,Gt)}});function at(){return new Promise(function(Pt){Ot.current=Pt})}kl.useEffect(function(){!rt.motionName&&We==="motion"&&lt()},[rt.motionName,We]),kl.useImperativeHandle(e,function(){return{forceAlign:nt,getElement:function(){return ne.current}}});var ot=Nt(Nt({},Me),{},{zIndex:f,opacity:We==="motion"||We==="stable"||!r?void 0:0,pointerEvents:!r&&We!=="stable"?"none":void 0},o),Lt=!0;b!=null&&b.points&&(We==="align"||We==="stable")&&(Lt=!1);var zt=l;return kl.Children.count(l)>1&&(zt=kl.createElement("div",{className:"".concat(n,"-content")},l)),kl.createElement(Xx,gn({visible:r,ref:ne,leavedClassName:"".concat(n,"-hidden")},rt,{onAppearPrepare:at,onEnterPrepare:at,removeOnLeave:v,forceRender:x}),function(Pt,$t){var Xt=Pt.className,Gt=Pt.style,Sr=(0,K5e.default)(n,i,ge,Xt);return kl.createElement(G5e,{target:Ue(),key:"popup",ref:ie,monitorWindowResize:!0,disabled:Lt,align:b,onAlign:Ze},kl.createElement("div",{ref:$t,className:Sr,onMouseEnter:D,onMouseLeave:F,onMouseDownCapture:U,onTouchStartCapture:$,onClick:Z,style:Nt(Nt({},Gt),ot)},zt))})});X5e.displayName="PopupInner";var Q5e=X5e;p();var Ou=Fe(Et());var J5e=Fe(pi()),eVe=Ou.forwardRef(function(t,e){var r=t.prefixCls,n=t.visible,i=t.zIndex,o=t.children,l=t.mobile;l=l===void 0?{}:l;var f=l.popupClassName,d=l.popupStyle,v=l.popupMotion,x=v===void 0?{}:v,b=l.popupRender,A=t.onClick,P=Ou.useRef();Ou.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return P.current}}});var N=Nt({zIndex:i},d),j=o;return Ou.Children.count(o)>1&&(j=Ou.createElement("div",{className:"".concat(r,"-content")},o)),b&&(j=b(j)),Ou.createElement(Xx,gn({visible:n,ref:P,removeOnLeave:!0},x),function(D,F){var U=D.className,$=D.style,Z=(0,J5e.default)(r,f,U);return Ou.createElement("div",{ref:F,className:Z,onClick:A,style:Nt(Nt({},$),N)},j)})});eVe.displayName="MobilePopupInner";var tVe=eVe;var qur=["visible","mobile"],rVe=Ev.forwardRef(function(t,e){var r=t.visible,n=t.mobile,i=xs(t,qur),o=(0,FI.useState)(r),l=En(o,2),f=l[0],d=l[1],v=(0,FI.useState)(!1),x=En(v,2),b=x[0],A=x[1],P=Nt(Nt({},i),{},{visible:f});(0,FI.useEffect)(function(){d(r),r&&n&&A(F3e())},[r,n]);var N=b?Ev.createElement(tVe,gn({},P,{mobile:n,ref:e})):Ev.createElement(Q5e,gn({},P,{ref:e}));return Ev.createElement("div",null,Ev.createElement(r7,P),N)});rVe.displayName="Popup";var nVe=rVe;p();var iVe=Fe(Et()),Fur=iVe.createContext(null),y7=Fur;function _7(){}function jur(){return""}function zur(t){return t?t.ownerDocument:window.document}var Uur=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Bur(t){var e=function(r){Qa(i,r);var n=Ja(i);function i(o){var l;Ka(this,i),l=n.call(this,o),St(Wr(l),"popupRef",ql.createRef()),St(Wr(l),"triggerRef",ql.createRef()),St(Wr(l),"portalContainer",void 0),St(Wr(l),"attachId",void 0),St(Wr(l),"clickOutsideHandler",void 0),St(Wr(l),"touchOutsideHandler",void 0),St(Wr(l),"contextMenuOutsideHandler1",void 0),St(Wr(l),"contextMenuOutsideHandler2",void 0),St(Wr(l),"mouseDownTimeout",void 0),St(Wr(l),"focusTime",void 0),St(Wr(l),"preClickTime",void 0),St(Wr(l),"preTouchTime",void 0),St(Wr(l),"delayTimer",void 0),St(Wr(l),"hasPopupMouseDown",void 0),St(Wr(l),"onMouseEnter",function(d){var v=l.props.mouseEnterDelay;l.fireEvents("onMouseEnter",d),l.delaySetPopupVisible(!0,v,v?null:d)}),St(Wr(l),"onMouseMove",function(d){l.fireEvents("onMouseMove",d),l.setPoint(d)}),St(Wr(l),"onMouseLeave",function(d){l.fireEvents("onMouseLeave",d),l.delaySetPopupVisible(!1,l.props.mouseLeaveDelay)}),St(Wr(l),"onPopupMouseEnter",function(){l.clearDelayTimer()}),St(Wr(l),"onPopupMouseLeave",function(d){var v;d.relatedTarget&&!d.relatedTarget.setTimeout&&_v((v=l.popupRef.current)===null||v===void 0?void 0:v.getElement(),d.relatedTarget)||l.delaySetPopupVisible(!1,l.props.mouseLeaveDelay)}),St(Wr(l),"onFocus",function(d){l.fireEvents("onFocus",d),l.clearDelayTimer(),l.isFocusToShow()&&(l.focusTime=Date.now(),l.delaySetPopupVisible(!0,l.props.focusDelay))}),St(Wr(l),"onMouseDown",function(d){l.fireEvents("onMouseDown",d),l.preClickTime=Date.now()}),St(Wr(l),"onTouchStart",function(d){l.fireEvents("onTouchStart",d),l.preTouchTime=Date.now()}),St(Wr(l),"onBlur",function(d){l.fireEvents("onBlur",d),l.clearDelayTimer(),l.isBlurToHide()&&l.delaySetPopupVisible(!1,l.props.blurDelay)}),St(Wr(l),"onContextMenu",function(d){d.preventDefault(),l.fireEvents("onContextMenu",d),l.setPopupVisible(!0,d)}),St(Wr(l),"onContextMenuClose",function(){l.isContextMenuToShow()&&l.close()}),St(Wr(l),"onClick",function(d){if(l.fireEvents("onClick",d),l.focusTime){var v;if(l.preClickTime&&l.preTouchTime?v=Math.min(l.preClickTime,l.preTouchTime):l.preClickTime?v=l.preClickTime:l.preTouchTime&&(v=l.preTouchTime),Math.abs(v-l.focusTime)<20)return;l.focusTime=0}l.preClickTime=0,l.preTouchTime=0,l.isClickToShow()&&(l.isClickToHide()||l.isBlurToHide())&&d&&d.preventDefault&&d.preventDefault();var x=!l.state.popupVisible;(l.isClickToHide()&&!x||x&&l.isClickToShow())&&l.setPopupVisible(!l.state.popupVisible,d)}),St(Wr(l),"onPopupMouseDown",function(){if(l.hasPopupMouseDown=!0,clearTimeout(l.mouseDownTimeout),l.mouseDownTimeout=window.setTimeout(function(){l.hasPopupMouseDown=!1},0),l.context){var d;(d=l.context).onPopupMouseDown.apply(d,arguments)}}),St(Wr(l),"onDocumentClick",function(d){if(!(l.props.mask&&!l.props.maskClosable)){var v=d.target,x=l.getRootDomNode(),b=l.getPopupDomNode();(!_v(x,v)||l.isContextMenuOnly())&&!_v(b,v)&&!l.hasPopupMouseDown&&l.close()}}),St(Wr(l),"getRootDomNode",function(){var d=l.props.getTriggerDOMNode;if(d)return d(l.triggerRef.current);try{var v=AI(l.triggerRef.current);if(v)return v}catch(x){}return oVe.default.findDOMNode(Wr(l))}),St(Wr(l),"getPopupClassNameFromAlign",function(d){var v=[],x=l.props,b=x.popupPlacement,A=x.builtinPlacements,P=x.prefixCls,N=x.alignPoint,j=x.getPopupClassNameFromAlign;return b&&A&&v.push(k3e(A,P,d,N)),j&&v.push(j(d)),v.join(" ")}),St(Wr(l),"getComponent",function(){var d=l.props,v=d.prefixCls,x=d.destroyPopupOnHide,b=d.popupClassName,A=d.onPopupAlign,P=d.popupMotion,N=d.popupAnimation,j=d.popupTransitionName,D=d.popupStyle,F=d.mask,U=d.maskAnimation,$=d.maskTransitionName,Z=d.maskMotion,ie=d.zIndex,ne=d.popup,ae=d.stretch,ye=d.alignPoint,ge=d.mobile,de=d.forceRender,be=d.onPopupClick,Ne=l.state,Me=Ne.popupVisible,ke=Ne.point,He=l.getPopupAlign(),Ke={};return l.isMouseEnterToShow()&&(Ke.onMouseEnter=l.onPopupMouseEnter),l.isMouseLeaveToHide()&&(Ke.onMouseLeave=l.onPopupMouseLeave),Ke.onMouseDown=l.onPopupMouseDown,Ke.onTouchStart=l.onPopupMouseDown,ql.createElement(nVe,gn({prefixCls:v,destroyPopupOnHide:x,visible:Me,point:ye&&ke,className:b,align:He,onAlign:A,animation:N,getClassNameFromAlign:l.getPopupClassNameFromAlign},Ke,{stretch:ae,getRootDomNode:l.getRootDomNode,style:D,mask:F,zIndex:ie,transitionName:j,maskAnimation:U,maskTransitionName:$,maskMotion:Z,ref:l.popupRef,motion:P,mobile:ge,forceRender:de,onClick:be}),typeof ne=="function"?ne():ne)}),St(Wr(l),"attachParent",function(d){nl.cancel(l.attachId);var v=l.props,x=v.getPopupContainer,b=v.getDocument,A=l.getRootDomNode(),P;x?(A||x.length===0)&&(P=x(A)):P=b(l.getRootDomNode()).body,P?P.appendChild(d):l.attachId=nl(function(){l.attachParent(d)})}),St(Wr(l),"getContainer",function(){if(!l.portalContainer){var d=l.props.getDocument,v=d(l.getRootDomNode()).createElement("div");v.style.position="absolute",v.style.top="0",v.style.left="0",v.style.width="100%",l.portalContainer=v}return l.attachParent(l.portalContainer),l.portalContainer}),St(Wr(l),"setPoint",function(d){var v=l.props.alignPoint;!v||!d||l.setState({point:{pageX:d.pageX,pageY:d.pageY}})}),St(Wr(l),"handlePortalUpdate",function(){l.state.prevPopupVisible!==l.state.popupVisible&&l.props.afterPopupVisibleChange(l.state.popupVisible)}),St(Wr(l),"triggerContextValue",{onPopupMouseDown:l.onPopupMouseDown});var f;return"popupVisible"in o?f=!!o.popupVisible:f=!!o.defaultPopupVisible,l.state={prevPopupVisible:f,popupVisible:f},Uur.forEach(function(d){l["fire".concat(d)]=function(v){l.fireEvents(d,v)}}),l}return Xa(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var l=this.props,f=this.state;if(f.popupVisible){var d;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(d=l.getDocument(this.getRootDomNode()),this.clickOutsideHandler=bs(d,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(d=d||l.getDocument(this.getRootDomNode()),this.touchOutsideHandler=bs(d,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(d=d||l.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=bs(d,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=bs(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),nl.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var l;return((l=this.popupRef.current)===null||l===void 0?void 0:l.getElement())||null}},{key:"getPopupAlign",value:function(){var l=this.props,f=l.popupPlacement,d=l.popupAlign,v=l.builtinPlacements;return f&&v?N3e(v,f,d):d}},{key:"setPopupVisible",value:function(l,f){var d=this.props.alignPoint,v=this.state.popupVisible;this.clearDelayTimer(),v!==l&&("popupVisible"in this.props||this.setState({popupVisible:l,prevPopupVisible:v}),this.props.onPopupVisibleChange(l)),d&&f&&l&&this.setPoint(f)}},{key:"delaySetPopupVisible",value:function(l,f,d){var v=this,x=f*1e3;if(this.clearDelayTimer(),x){var b=d?{pageX:d.pageX,pageY:d.pageY}:null;this.delayTimer=window.setTimeout(function(){v.setPopupVisible(l,b),v.clearDelayTimer()},x)}else this.setPopupVisible(l,d)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(l){var f=this.props.children.props,d=this.props;return f[l]&&d[l]?this["fire".concat(l)]:f[l]||d[l]}},{key:"isClickToShow",value:function(){var l=this.props,f=l.action,d=l.showAction;return f.indexOf("click")!==-1||d.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var l=this.props.action;return l==="contextMenu"||l.length===1&&l[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var l=this.props,f=l.action,d=l.showAction;return f.indexOf("contextMenu")!==-1||d.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var l=this.props,f=l.action,d=l.hideAction;return f.indexOf("click")!==-1||d.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var l=this.props,f=l.action,d=l.showAction;return f.indexOf("hover")!==-1||d.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var l=this.props,f=l.action,d=l.hideAction;return f.indexOf("hover")!==-1||d.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var l=this.props,f=l.action,d=l.showAction;return f.indexOf("focus")!==-1||d.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var l=this.props,f=l.action,d=l.hideAction;return f.indexOf("focus")!==-1||d.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var l;(l=this.popupRef.current)===null||l===void 0||l.forceAlign()}}},{key:"fireEvents",value:function(l,f){var d=this.props.children.props[l];d&&d(f);var v=this.props[l];v&&v(f)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var l=this.state.popupVisible,f=this.props,d=f.children,v=f.forceRender,x=f.alignPoint,b=f.className,A=f.autoDestroy,P=ql.Children.only(d),N={key:"trigger"};this.isContextMenuToShow()?N.onContextMenu=this.onContextMenu:N.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(N.onClick=this.onClick,N.onMouseDown=this.onMouseDown,N.onTouchStart=this.onTouchStart):(N.onClick=this.createTwoChains("onClick"),N.onMouseDown=this.createTwoChains("onMouseDown"),N.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(N.onMouseEnter=this.onMouseEnter,x&&(N.onMouseMove=this.onMouseMove)):N.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?N.onMouseLeave=this.onMouseLeave:N.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(N.onFocus=this.onFocus,N.onBlur=this.onBlur):(N.onFocus=this.createTwoChains("onFocus"),N.onBlur=this.createTwoChains("onBlur"));var j=(0,aVe.default)(P&&P.props&&P.props.className,b);j&&(N.className=j);var D=Nt({},N);CI(P)&&(D.ref=Zx(this.triggerRef,P.ref));var F=ql.cloneElement(P,D),U;return(l||this.popupRef.current||v)&&(U=ql.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!l&&A&&(U=null),ql.createElement(y7.Provider,{value:this.triggerContextValue},F,U)}}],[{key:"getDerivedStateFromProps",value:function(l,f){var d=l.popupVisible,v={};return d!==void 0&&f.popupVisible!==d&&(v.popupVisible=d,v.prevPopupVisible=f.popupVisible),v}}]),i}(ql.Component);return St(e,"contextType",y7),St(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:jur,getDocument:zur,onPopupVisibleChange:_7,afterPopupVisibleChange:_7,onPopupAlign:_7,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}var sVe=Bur(D3e);p();var Lu={adjustX:1,adjustY:1},Du=[0,0],lVe={left:{points:["cr","cl"],overflow:Lu,offset:[-4,0],targetOffset:Du},right:{points:["cl","cr"],overflow:Lu,offset:[4,0],targetOffset:Du},top:{points:["bc","tc"],overflow:Lu,offset:[0,-4],targetOffset:Du},bottom:{points:["tc","bc"],overflow:Lu,offset:[0,4],targetOffset:Du},topLeft:{points:["bl","tl"],overflow:Lu,offset:[0,-4],targetOffset:Du},leftTop:{points:["tr","tl"],overflow:Lu,offset:[-4,0],targetOffset:Du},topRight:{points:["br","tr"],overflow:Lu,offset:[0,-4],targetOffset:Du},rightTop:{points:["tl","tr"],overflow:Lu,offset:[4,0],targetOffset:Du},bottomRight:{points:["tr","br"],overflow:Lu,offset:[0,4],targetOffset:Du},rightBottom:{points:["bl","br"],overflow:Lu,offset:[4,0],targetOffset:Du},bottomLeft:{points:["tl","bl"],overflow:Lu,offset:[0,4],targetOffset:Du},leftBottom:{points:["br","bl"],overflow:Lu,offset:[-4,0],targetOffset:Du}};p();var dq=Fe(Et()),uVe=Fe(pi());function mq(t){var e=t.showArrow,r=t.arrowContent,n=t.children,i=t.prefixCls,o=t.id,l=t.overlayInnerStyle,f=t.className,d=t.style;return dq.createElement("div",{className:(0,uVe.default)("".concat(i,"-content"),f),style:d},e!==!1&&dq.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},r),dq.createElement("div",{className:"".concat(i,"-inner"),id:o,role:"tooltip",style:l},typeof n=="function"?n():n))}var Vur=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Gur=function(e,r){var n=e.overlayClassName,i=e.trigger,o=i===void 0?["hover"]:i,l=e.mouseEnterDelay,f=l===void 0?0:l,d=e.mouseLeaveDelay,v=d===void 0?.1:d,x=e.overlayStyle,b=e.prefixCls,A=b===void 0?"rc-tooltip":b,P=e.children,N=e.onVisibleChange,j=e.afterVisibleChange,D=e.transitionName,F=e.animation,U=e.motion,$=e.placement,Z=$===void 0?"right":$,ie=e.align,ne=ie===void 0?{}:ie,ae=e.destroyTooltipOnHide,ye=ae===void 0?!1:ae,ge=e.defaultVisible,de=e.getTooltipContainer,be=e.overlayInnerStyle,Ne=e.arrowContent,Me=e.overlay,ke=e.id,He=e.showArrow,Ke=He===void 0?!0:He,Je=xs(e,Vur),We=(0,tb.useRef)(null);(0,tb.useImperativeHandle)(r,function(){return We.current});var lt=Nt({},Je);"visible"in e&&(lt.popupVisible=e.visible);var pt=function(){return x7.createElement(mq,{showArrow:Ke,arrowContent:Ne,key:"content",prefixCls:A,id:ke,overlayInnerStyle:be},Me)},dt=!1,ze=!1;if(typeof ye=="boolean")dt=ye;else if(ye&&wn(ye)==="object"){var Dt=ye.keepParent;dt=Dt===!0,ze=Dt===!1}return x7.createElement(sVe,gn({popupClassName:n,prefixCls:A,popup:pt,action:o,builtinPlacements:lVe,popupPlacement:Z,ref:We,popupAlign:ne,getPopupContainer:de,onPopupVisibleChange:N,afterPopupVisibleChange:j,popupTransitionName:D,popupAnimation:F,popupMotion:U,defaultPopupVisible:ge,destroyPopupOnHide:dt,autoDestroy:ze,mouseLeaveDelay:v,popupStyle:x,mouseEnterDelay:f},lt),P)},cVe=(0,tb.forwardRef)(Gur);var fVe=cVe;var $ur=ip.forwardRef(function(t,e){var r=t.visible,n=t.overlay,i=ip.useRef(null),o=Zx(e,i),l=ip.useRef(null);function f(){nl.cancel(l.current)}function d(){l.current=nl(function(){var v;(v=i.current)===null||v===void 0||v.forcePopupAlign()})}return ip.useEffect(function(){return r?d():f(),f},[r,n]),ip.createElement(fVe,gn({ref:o},t))}),b7=$ur;function w7(t){var e;return e=function(r){Qa(i,r);var n=Ja(i);function i(){var o;return Ka(this,i),o=n.apply(this,arguments),o.state={visibles:{}},o.handleTooltipVisibleChange=function(l,f){o.setState(function(d){return{visibles:Nt(Nt({},d.visibles),{},St({},l,f))}})},o.handleWithTooltip=function(l){var f=l.value,d=l.dragging,v=l.index,x=l.disabled,b=xs(l,["value","dragging","index","disabled"]),A=o.props,P=A.tipFormatter,N=A.tipProps,j=A.handleStyle,D=A.getTooltipContainer,F=N.prefixCls,U=F===void 0?"rc-slider-tooltip":F,$=N.overlay,Z=$===void 0?P(f):$,ie=N.placement,ne=ie===void 0?"top":ie,ae=N.visible,ye=ae===void 0?!1:ae,ge=xs(N,["prefixCls","overlay","placement","visible"]),de;return Array.isArray(j)?de=j[v]||j[0]:de=j,jI.default.createElement(b7,gn({},ge,{getTooltipContainer:D,prefixCls:U,overlay:Z,placement:ne,visible:!x&&(o.state.visibles[v]||d)||ye,key:v}),jI.default.createElement(Hx,gn({},b,{style:Nt({},de),value:f,onMouseEnter:function(){return o.handleTooltipVisibleChange(v,!0)},onMouseLeave:function(){return o.handleTooltipVisibleChange(v,!1)}})))},o}return Xa(i,[{key:"render",value:function(){return jI.default.createElement(t,gn({},this.props,{handle:this.handleWithTooltip}))}}]),i}(jI.default.Component),e.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},e}var gq=y3e;gq.Range=_3e;gq.Handle=Hx;gq.createSliderWithTooltip=w7;var vq=gq;var zI={brightness:0,contrast:0,saturation:0},yq=t=>{let{max:e=1,min:r=0,onChange:n=()=>console.warn("onChange is not implemented."),step:i=.01,type:o="",value:l=.5,tooltip:f}=t,d=v=>{n(o,v)};return al.default.createElement("div",{className:"filter-slider",title:f},al.default.createElement("span",{className:Ws("slider-icon",o),title:f}),al.default.createElement("div",null,al.default.createElement(vq,{title:f,ariaLabelForHandle:f,max:e,min:r,onChange:d,step:i,value:l})),al.default.createElement("span",{className:"slider-tooltip",title:f},l))};yq.propTypes={max:op.default.number,min:op.default.number,onChange:op.default.func,step:op.default.number,tooltip:op.default.string,type:op.default.string,value:op.default.number};var pVe=t=>{let{layer:e}=t,[r,n]=(0,al.useState)(mt({},zI)),i=(l,f)=>{let d=Object.assign({},r,{[l]:f});n(d),e.updateStyleVariables(d)},o=()=>{n(mt({},zI)),e.updateStyleVariables(mt({},zI))};return al.default.createElement("div",null,al.default.createElement(yq,{max:1,min:-1,onChange:i,step:.01,type:"contrast",value:r.contrast,tooltip:Lr("control-imagemanipulation-contrast")}),al.default.createElement(yq,{max:1,min:-1,onChange:i,step:.01,type:"saturation",value:r.saturation,tooltip:Lr("control-imagemanipulation-saturation")}),al.default.createElement(yq,{max:1,min:-1,onChange:i,step:.01,type:"brightness",value:r.brightness,tooltip:Lr("control-imagemanipulation-brightness")}),al.default.createElement("button",{className:"btn-reset",title:Lr("control-imagemanipulation-reset"),onClick:o},Lr("control-imagemanipulation-reset")))};pVe.propTypes={layer:op.default.object};var E7=class extends _s{constructor(e){let r="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=r;let i=document.createElement("button");i.title=Lr("control-imagemanipulation-open"),i.innerHTML="I",i.type="button",n.appendChild(i);let o=document.createElement("div");o.className="content-container",o.style.display="none",n.appendChild(o);let l=()=>{let f=o.style.display==="block";n.className=f?r:`${r} active`,o.style.display=f?"none":"block"};hVe.default.render(al.default.createElement(pVe,{layer:e.layer}),o),i.addEventListener("click",l,!1),i.addEventListener("touchstart",l,!1),super({element:n,target:e.target})}},dVe=E7;function Hur(t){return Pn(this,null,function*(){try{let e=yield hf.get(t);if(e.status===200){let n=new DOMParser().parseFromString(e.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:t.substring(0,t.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(e){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(e)}})}var mVe=t=>{let{className:e="",onLoad:r,urlImageProperties:n,withImageManipulation:i=!1}=t,o=(0,rb.useRef)(null);return(0,rb.useEffect)(()=>{Pn(null,null,function*(){let d=yield Hur(n),v=new JBe({url:d.url,size:[d.width,d.height],crossOrigin:"anonymous",zDirection:-1}),x=v.getTileGrid().getExtent(),b=new VBe({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:mt({},zI)},source:v}),A=new Cu({resolutions:b.getSource().getTileGrid().getResolutions(),extent:x,constrainOnlyCenter:!0}),P=new Nx({controls:[new rk({tipLabel:Lr("control-fullscreen-title")}),new Dx({zoomInTipLabel:Lr("control-zoom-in"),zoomOutTipLabel:Lr("control-zoom-in")})],interactions:Lx().extend([new Rx]),layers:[b],target:o.current,view:A});A.fit(x,{padding:[50,50,50,50]});let N=P.getSize();P.addControl(new ik({tipLabel:Lr("control-zoomtoextent-title"),extent:A.calculateExtent([N[0]+50,N[1]+50])})),i&&P.addControl(new dVe({layer:b})),r&&r({layer:b,map:P,source:v,zoomifyProps:d})})},[n]),rb.default.createElement("div",{className:Ws("vk-mapview-zoomify",e),ref:o})};mVe.propTypes={className:UI.default.string,onLoad:UI.default.func,urlImageProperties:UI.default.string.isRequired,withImageManipulation:UI.default.bool};var gVe=mVe;var vVe=gVe;var Wur=()=>{let t=$s(i2),e=pu(a2),r=n=>{e(n)};return S7.default.createElement("div",{className:"vkf-mapview-source"},t!==null&&S7.default.createElement(vVe,{urlImageProperties:t.zoomify_url,onLoad:r}))},yVe=Wur;p();var kf=Fe(Et(),1);var sb=Fe(an(),1);p();p();var nb=Fe(Et(),1),Ac=Fe(an(),1);p();p();var Zur=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yur=function(t){Zur(e,t);function e(r){var n=t.call(this,r)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=Bi(),n.tmpTileRange_=new kx(0,0,0,0),n}return e.prototype.isDrawableTile=function(r){var n=this.getLayer(),i=r.getState(),o=n.getUseInterimTilesOnError();return i==Ht.LOADED||i==Ht.EMPTY||i==Ht.ERROR&&!o},e.prototype.getTile=function(r,n,i,o){var l=o.pixelRatio,f=o.viewState.projection,d=this.getLayer(),v=d.getSource(),x=v.getTile(r,n,i,l,f);return x.getState()==Ht.ERROR&&(d.getUseInterimTilesOnError()?d.getPreload()>0&&(this.newTiles_=!0):x.setState(Ht.LOADED)),this.isDrawableTile(x)||(x=x.getInterimTile()),x},e.prototype.getData=function(r){var n=this.frameState;if(!n)return null;var i=this.getLayer(),o=Hn(n.pixelToCoordinateTransform,r.slice()),l=i.getExtent();if(l&&!gs(l,o))return null;for(var f=n.pixelRatio,d=n.viewState.projection,v=n.viewState,x=i.getRenderSource(),b=x.getTileGridForProjection(v.projection),A=x.getTilePixelRatio(n.pixelRatio),P=b.getZForResolution(v.resolution);P>=b.getMinZoom();--P){var N=b.getTileCoordForCoordAndZ(o,P),j=x.getTile(P,N[1],N[2],f,d);if(!(j instanceof Qh||j instanceof Fx))return null;if(j.getState()===Ht.LOADED){var D=b.getOrigin(P),F=Xn(b.getTileSize(P)),U=b.getResolution(P),$=Math.floor(A*((o[0]-D[0])/U-N[1]*F[0])),Z=Math.floor(A*((D[1]-o[1])/U-N[2]*F[1])),ie=Math.round(A*x.getGutterForProjection(v.projection));return this.getImageData(j.getImage(),$+ie,Z+ie)}}return null},e.prototype.loadedTileCallback=function(r,n,i){return this.isDrawableTile(i)?t.prototype.loadedTileCallback.call(this,r,n,i):!1},e.prototype.prepareFrame=function(r){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(r,n){var i=r.layerStatesArray[r.layerIndex],o=r.viewState,l=o.projection,f=o.resolution,d=o.center,v=o.rotation,x=r.pixelRatio,b=this.getLayer(),A=b.getSource(),P=A.getRevision(),N=A.getTileGridForProjection(l),j=N.getZForResolution(f,A.zDirection),D=N.getResolution(j),F=r.extent,U=r.viewState.resolution,$=A.getTilePixelRatio(x),Z=Math.round(vn(F)/U*x),ie=Math.round(zo(F)/U*x),ne=i.extent&&Ha(i.extent,l);ne&&(F=vu(F,Ha(i.extent,l)));var ae=D*Z/2/$,ye=D*ie/2/$,ge=[d[0]-ae,d[1]-ye,d[0]+ae,d[1]+ye],de=N.getTileRangeForExtentAndZ(F,j),be={};be[j]={};var Ne=this.createLoadedTileFinder(A,l,be),Me=this.tmpExtent,ke=this.tmpTileRange_;this.newTiles_=!1;for(var He=v?cN(o.center,U,v,r.size):void 0,Ke=de.minX;Ke<=de.maxX;++Ke)for(var Je=de.minY;Je<=de.maxY;++Je)if(!(v&&!N.tileCoordIntersectsViewport([j,Ke,Je],He))){var We=this.getTile(j,Ke,Je,r);if(this.isDrawableTile(We)){var lt=tr(this);if(We.getState()==Ht.LOADED){be[j][We.tileCoord.toString()]=We;var pt=We.inTransition(lt);pt&&i.opacity!==1&&(We.endTransition(lt),pt=!1),!this.newTiles_&&(pt||this.renderedTiles.indexOf(We)===-1)&&(this.newTiles_=!0)}if(We.getAlpha(lt,r.time)===1)continue}var dt=N.getTileCoordChildTileRange(We.tileCoord,ke,Me),ze=!1;dt&&(ze=Ne(j+1,dt)),ze||N.forEachTileCoordParentTileRange(We.tileCoord,Ne,ke,Me)}var Dt=D/f*x/$;To(this.pixelTransform,r.size[0]/2,r.size[1]/2,1/x,1/x,v,-Z/2,-ie/2);var Ot=oN(this.pixelTransform);this.useContainer(n,Ot,this.getBackground(r));var Ue=this.context,nt=Ue.canvas;ix(this.inversePixelTransform,this.pixelTransform),To(this.tempTransform,Z/2,ie/2,Dt,Dt,0,-Z/2,-ie/2),nt.width!=Z||nt.height!=ie?(nt.width=Z,nt.height=ie):this.containerReused||Ue.clearRect(0,0,Z,ie),ne&&this.clipUnrotated(Ue,r,ne),A.getInterpolate()||Xr(Ue,mI),this.preRender(Ue,r),this.renderedTiles.length=0;var Ze=Object.keys(be).map(Number);Ze.sort(Pl);var rt,at,ot;i.opacity===1&&(!this.containerReused||A.getOpaque(r.viewState.projection))?Ze=Ze.reverse():(rt=[],at=[]);for(var Lt=Ze.length-1;Lt>=0;--Lt){var zt=Ze[Lt],Pt=A.getTilePixelSize(zt,x,l),$t=N.getResolution(zt),Xt=$t/D,Gt=Pt[0]*Xt*Dt,Sr=Pt[1]*Xt*Dt,zr=N.getTileCoordForCoordAndZ(yu(ge),zt),vr=N.getTileCoordExtent(zr),pr=Hn(this.tempTransform,[$*(vr[0]-ge[0])/D,$*(ge[3]-vr[3])/D]),dr=$*A.getGutterForProjection(l),wr=be[zt];for(var un in wr){var We=wr[un],Sn=We.tileCoord,Nn=zr[1]-Sn[1],_i=Math.round(pr[0]-(Nn-1)*Gt),De=zr[2]-Sn[2],J=Math.round(pr[1]-(De-1)*Sr),Ke=Math.round(pr[0]-Nn*Gt),Je=Math.round(pr[1]-De*Sr),te=_i-Ke,se=J-Je,_e=j===zt,pt=_e&&We.getAlpha(tr(this),r.time)!==1,Ae=!1;if(!pt)if(rt){ot=[Ke,Je,Ke+te,Je,Ke+te,Je+se,Ke,Je+se];for(var Le=0,Be=rt.length;Le<Be;++Le)if(j!==zt&&zt<at[Le]){var Oe=rt[Le];ki([Ke,Je,Ke+te,Je+se],[Oe[0],Oe[3],Oe[4],Oe[7]])&&(Ae||(Ue.save(),Ae=!0),Ue.beginPath(),Ue.moveTo(ot[0],ot[1]),Ue.lineTo(ot[2],ot[3]),Ue.lineTo(ot[4],ot[5]),Ue.lineTo(ot[6],ot[7]),Ue.moveTo(Oe[6],Oe[7]),Ue.lineTo(Oe[4],Oe[5]),Ue.lineTo(Oe[2],Oe[3]),Ue.lineTo(Oe[0],Oe[1]),Ue.clip())}rt.push(ot),at.push(zt)}else Ue.clearRect(Ke,Je,te,se);this.drawTileImage(We,r,Ke,Je,te,se,dr,_e),rt&&!pt?(Ae&&Ue.restore(),this.renderedTiles.unshift(We)):this.renderedTiles.push(We),this.updateUsedTiles(r.usedTiles,A,We)}}return this.renderedRevision=P,this.renderedResolution=D,this.extentChanged=!this.renderedExtent_||!jh(this.renderedExtent_,ge),this.renderedExtent_=ge,this.renderedPixelRatio=x,this.renderedProjection=l,this.manageTilePyramid(r,A,N,x,l,F,j,b.getPreload()),this.scheduleExpireCache(r,A),this.postRender(Ue,r),i.extent&&Ue.restore(),Xr(Ue,hBe),Ot!==nt.style.transform&&(nt.style.transform=Ot),this.container},e.prototype.drawTileImage=function(r,n,i,o,l,f,d,v){var x=this.getTileImage(r);if(x){var b=tr(this),A=n.layerStatesArray[n.layerIndex],P=A.opacity*(v?r.getAlpha(b,n.time):1),N=P!==this.context.globalAlpha;N&&(this.context.save(),this.context.globalAlpha=P),this.context.drawImage(x,d,d,x.width-2*d,x.height-2*d,i,o,l,f),N&&this.context.restore(),P!==A.opacity?n.animate=!0:v&&r.endTransition(b)}},e.prototype.getImage=function(){var r=this.context;return r?r.canvas:null},e.prototype.getTileImage=function(r){return r.getImage()},e.prototype.scheduleExpireCache=function(r,n){if(n.canExpireCache()){var i=function(o,l,f){var d=tr(o);d in f.usedTiles&&o.expireCache(f.viewState.projection,f.usedTiles[d])}.bind(null,n);r.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(r,n,i){var o=tr(n);o in r||(r[o]={}),r[o][i.getKey()]=!0},e.prototype.manageTilePyramid=function(r,n,i,o,l,f,d,v,x){var b=tr(n);b in r.wantedTiles||(r.wantedTiles[b]={});var A=r.wantedTiles[b],P=r.tileQueue,N=i.getMinZoom(),j=r.viewState.rotation,D=j?cN(r.viewState.center,r.viewState.resolution,j,r.size):void 0,F=0,U,$,Z,ie,ne,ae;for(ae=N;ae<=d;++ae)for($=i.getTileRangeForExtentAndZ(f,ae,$),Z=i.getResolution(ae),ie=$.minX;ie<=$.maxX;++ie)for(ne=$.minY;ne<=$.maxY;++ne)j&&!i.tileCoordIntersectsViewport([ae,ie,ne],D)||(d-ae<=v?(++F,U=n.getTile(ae,ie,ne,o,l),U.getState()==Ht.IDLE&&(A[U.getKey()]=!0,P.isKeyQueued(U.getKey())||P.enqueue([U,b,i.getTileCoordCenter(U.tileCoord),Z])),x!==void 0&&x(U)):n.useTile(ae,ie,ne,l));n.updateCacheSize(F,l)},e}(jN),_Ve=Yur;var Kur=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xur=function(t){Kur(e,t);function e(r){return t.call(this,r)||this}return e.prototype.createRenderer=function(){return new _Ve(this)},e}(ok),Sv=Xur;p();var Qur=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jur=function(t){Qur(e,t);function e(r){var n=this,i=r||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.projection!==void 0?i.projection:"EPSG:3857",f=i.tileGrid!==void 0?i.tileGrid:$Be({extent:vk(l),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:i.opaque,projection:l,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:f,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n}return e.prototype.getGutter=function(){return this.gutter_},e}(Gx),T7=Jur;p();var I7=class extends _s{constructor(r){let n=r||{},i=document.createElement("div");i.className="ol-layerspy ol-unselectable ol-control";let o=document.createElement("button");o.title=Lr("control-layerspy-title"),o.type="button",i.appendChild(o);super({element:i,target:n.target});oo(this,"mousePosition",null);oo(this,"activate",()=>{this.layers===void 0&&(this.layers=this.getMap().getLayers()),this.getMap().addLayer(this.layer),this.layer.on("prerender",this.handlePrecompose,this),this.layer.on("postrender",this.handlePostcompose,this);let r=this.getMap().getViewport();r.addEventListener("mousemove",this.handleMouseMove),r.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("keydown",this.handleKeyPress),this.layers.on("add",this.handleAddedLayer),this.containerEl.classList.add("active"),this.renderRadiusbox&&this.renderTargetElement()});oo(this,"changeLayer",r=>{this.containerEl.classList.contains("active")?(this.deactivate(),this.layer=r,this.activate()):this.layer=r});oo(this,"deactivate",()=>{this.layer.un("prerender",this.handlePrecompose),this.layer.un("postrender",this.handlePostcompose);let r=this.getMap().getViewport();r.removeEventListener("mousemove",this.handleMouseMove),r.removeEventListener("mouseout",this.handleMouseOut),document.removeEventListener("keydown",this.handleKeyPress),this.layers.un("add",this.handleAddedLayer),this.getMap().removeLayer(this.layer),this.containerEl.classList.remove("active"),this.renderRadiusbox&&this.renderTargetElement()});oo(this,"handlePostcompose",r=>{r.context.restore()});oo(this,"handlePrecompose",r=>{let n=r.context,i=1;n.save(),n.beginPath();let o=this.mousePosition;if(o){let l=this.getMap().getLayers().getArray().find(v=>v.vkf_id===this.refActiveBasemapId.current).renderer_.context.canvas.style.transform,f=new DOMPoint(o[0],o[1]),d=new DOMMatrix(l);f=f.matrixTransform(d.invertSelf()),n.arc(f.x*i,f.y*i,this.clipRadius*i,0,2*Math.PI),n.lineWidth=5*i,n.strokeStyle="rgba(0,0,0,0.5)",n.stroke()}n.clip()});oo(this,"handleMouseMove",r=>{this.mousePosition=this.getMap().getEventPixel(r),this.getMap().render()});oo(this,"handleMouseOut",()=>{this.mousePosition=null,this.getMap().render()});oo(this,"handleKeyPress",r=>{r.target.tagName.toLowerCase()!=="input"&&(r.key.toLowerCase()==="y"||r.keyCode==="KeyY"?(this.clipRadius=Math.min(this.clipRadius+5,150),this.getMap().render()):(r.key.toLowerCase()==="x"||r.keyCode==="KeyX")&&(this.clipRadius=Math.max(this.clipRadius-5,25),this.getMap().render()),this.updateClipRadiusDisplay())});oo(this,"handleAddedLayer",r=>{r.target.getArray()[r.target.getLength()-1]!==this.layer&&(this.getMap().removeLayer(this.layer),this.getMap().addLayer(this.layer))});oo(this,"handleExternal3dStateUpdate",r=>{this.containerEl.disabled=r,r?this.containerEl.classList.add("disabled"):this.containerEl.classList.remove("disabled")});oo(this,"updateClipRadiusDisplay",()=>{let r=this.targetEl;r.innerHTML=`<strong>Radius: ${this.clipRadius}px</strong> (${Lr("control-layerspy-radius-tooltip")})`});oo(this,"renderTargetElement",()=>{let r=this.targetEl,n=GW(this.getMap());this.targetEl===void 0&&(r=document.createElement("div"),r.className="ol-control ol-layerspy-radius-box",r.innerHTML="",n.appendChild(r),this.targetEl=r),this.targetEl.classList.toggle("active"),n.classList.toggle("layerspy-active"),this.updateClipRadiusDisplay()});this.clipRadius=dn(n.radius)?parseInt(n.radius,0):75,n.refSpyLayer!==void 0&&(n.refSpyLayer.current=this),this.refActiveBasemapId=n.refActiveBasemapId,this.containerEl=o,this.renderRadiusbox=r.renderRadiusBox===void 0?!0:r.renderRadiusBox,o.addEventListener("click",l=>{l.preventDefault(),this.containerEl.classList.contains("active")?this.deactivate():this.activate()}),dn(n.spyLayer)&&this.changeLayer(n.spyLayer)}},xVe=I7;var bVe=t=>{let{children:e,extent:r,onLoad:n=()=>console.log("No onLoad function was passed to component Map2D."),urlsOsmBaseMap:i}=t,o=(0,nb.useRef)(null);return(0,nb.useEffect)(()=>{let l=()=>Pn(null,null,function*(){let f=new Sv({source:new T7({urls:i,crossOrigin:"*",maxZoom:18})});f.vkf_id="slub-osm";let d=new Nx({controls:[new rk({tipLabel:Lr("control-fullscreen-title")}),new Dx({zoomInTipLabel:Lr("control-zoom-in"),zoomOutTipLabel:Lr("control-zoom-in")})],interactions:Lx().extend([new Rx]),layers:[f],target:o.current,view:new Cu({projection:"EPSG:3857",center:[871713,6396955],zoom:4.3})});if(n({map:d}),r!=null){let x=uv(r,"EPSG:4326",d.getView().getProjection());d.getView().fit(x,{padding:[100,100,100,100]}),d.addControl(new ik({tipLabel:Lr("control-zoomtoextent-title"),extent:x}))}let v=new Sv({zIndex:10,attribution:void 0,source:new T7({urls:i,crossOrigin:"*",attributions:[]})});v.vkf_id="slub-osm",d.addControl(new xVe({spyLayer:v,refActiveBasemapId:{current:f.vkf_id}}))});o.current!==null&&l()},[]),nb.default.createElement("div",{className:"map-container",ref:o},e)};bVe.propTypes={extent:Ac.default.arrayOf(Ac.default.number),onLoad:Ac.default.func,urlNominatim:Ac.default.string,urlsOsmBaseMap:Ac.default.arrayOf(Ac.default.string),children:Ac.default.oneOfType([Ac.default.arrayOf(Ac.default.node),Ac.default.node])};var wVe=bVe;var EVe=wVe;p();p();var VI=Fe(Et(),1),ib=Fe(an(),1);p();p();var BI="1.3.0";p();function A7(t,e){var r=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&r.push(i+"="+encodeURIComponent(e[i]))});var n=r.join("&");return t=t.replace(/[?&]$/,""),t=t.indexOf("?")===-1?t+"?":t+"&",t+n}var ecr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tcr=function(t){ecr(e,t);function e(r){var n=this,i=r||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.params||{},f="TRANSPARENT"in l?l.TRANSPARENT:!0;return n=t.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:!f,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n.params_=l,n.v13_=!0,n.serverType_=i.serverType,n.hidpi_=i.hidpi!==void 0?i.hidpi:!0,n.tmpExtent_=Bi(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return e.prototype.getFeatureInfoUrl=function(r,n,i,o){var l=ii(i),f=this.getProjection(),d=this.getTileGrid();d||(d=this.getTileGridForProjection(l));var v=d.getZForResolution(n,this.zDirection),x=d.getTileCoordForCoordAndZ(r,v);if(!(d.getResolutions().length<=x[0])){var b=d.getResolution(x[0]),A=d.getTileCoordExtent(x,this.tmpExtent_),P=Xn(d.getTileSize(x[0]),this.tmpSize),N=this.gutter_;N!==0&&(P=x9(P,N,this.tmpSize),A=vc(A,b*N,A)),f&&f!==l&&(b=sk(f,l,r,b),A=uv(A,l,f),r=xc(r,l,f));var j={SERVICE:"WMS",VERSION:BI,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Xr(j,this.params_,o);var D=Math.floor((r[0]-A[0])/b),F=Math.floor((A[3]-r[1])/b);return j[this.v13_?"I":"X"]=D,j[this.v13_?"J":"Y"]=F,this.getRequestUrl_(x,P,A,1,f||l,j)}},e.prototype.getLegendUrl=function(r,n){if(this.urls[0]!==void 0){var i={SERVICE:"WMS",VERSION:BI,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var o=this.params_.LAYERS,l=!Array.isArray(o)||o.length===1;if(!l)return;i.LAYER=o}if(r!==void 0){var f=this.getProjection()?this.getProjection().getMetersPerUnit():1,d=28e-5;i.SCALE=r*f/d}return Xr(i,n),A7(this.urls[0],i)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(r,n,i,o,l,f){var d=this.urls;if(d){if(f.WIDTH=n[0],f.HEIGHT=n[1],f[this.v13_?"CRS":"SRS"]=l.getCode(),"STYLES"in this.params_||(f.STYLES=""),o!=1)switch(this.serverType_){case"geoserver":var v=90*o+.5|0;"FORMAT_OPTIONS"in f?f.FORMAT_OPTIONS+=";dpi:"+v:f.FORMAT_OPTIONS="dpi:"+v;break;case"mapserver":f.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":f.DPI=90*o;break;default:or(!1,52);break}var x=l.getAxisOrientation(),b=i;if(this.v13_&&x.substr(0,2)=="ne"){var A=void 0;A=i[0],b[0]=i[1],b[1]=A,A=i[2],b[2]=i[3],b[3]=A}f.BBOX=b.join(",");var P;if(d.length==1)P=d[0];else{var N=Ll(fk(r),d.length);P=d[N]}return A7(P,f)}},e.prototype.getTilePixelRatio=function(r){return!this.hidpi_||this.serverType_===void 0?1:r},e.prototype.getKeyForParams_=function(){var r=0,n=[];for(var i in this.params_)n[r++]=i+"-"+this.params_[i];return n.join("/")},e.prototype.updateParams=function(r){Xr(this.params_,r),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var r=this.params_.VERSION||BI;this.v13_=Rze(r,"1.3")>=0},e.prototype.tileUrlFunction=function(r,n,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=r[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var l=o.getResolution(r[0]),f=o.getTileCoordExtent(r,this.tmpExtent_),d=Xn(o.getTileSize(r[0]),this.tmpSize),v=this.gutter_;v!==0&&(d=x9(d,v,this.tmpSize),f=vc(f,l*v,f)),n!=1&&(d=CN(d,n,this.tmpSize));var x={SERVICE:"WMS",VERSION:BI,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Xr(x,this.params_),this.getRequestUrl_(r,d,f,n,i,x)}},e}(Gx),SVe=tcr;function rcr(t,e){return t.getCoordinates()[0].map(r=>e.getPixelFromCoordinate(r))}var TVe=t=>{let{map:e,layerName:r,onLoad:n=()=>{},wmsUrl:i}=t;return(0,VI.useEffect)(()=>{let o=new Sv({source:new SVe({url:i,params:{LAYERS:r,VERSION:"1.1.1"},projection:e.getView().getProjection()}),preload:1/0,zIndex:1});e.addLayer(o),n(o);let l=d=>{let v=e.getLayers().getArray().find(x=>x.get("key")==="clip");if(v!==void 0&&v.getSource().getFeatures().length>0){let x=rcr(v.getSource().getFeatures()[0].getGeometry(),e),b=1,A=d.context;A.save(),A.beginPath(),A.moveTo(x[0][0]*b,x[0][1]*b);for(let P=1;P<x.length;P++)A.lineTo(x[P][0]*b,x[P][1]*b);A.closePath(),A.clip()}},f=d=>{d.context.restore()};return o.on("prerender",l),o.on("postrender",f),()=>{o.un("prerender",l),o.un("postrender",f),e.removeLayer(o)}},[]),VI.default.createElement(VI.default.Fragment,null)};TVe.propTypes={clipPolygon:ib.default.instanceOf(bc),layerName:ib.default.string.isRequired,map:ib.default.instanceOf(Nx).isRequired,onLoad:ib.default.func,wmsUrl:ib.default.string.isRequired};var IVe=TVe;var AVe=IVe;p();var Iv=Fe(Et(),1),xX=Fe(an(),1);p();var Es=Fe(Et(),1);p();var kt=Fe(an()),Ct=Fe(Et()),pcr=Fe(NVe());p();function kVe(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function qVe(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function C7(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return qVe(r.overflowY,e)||qVe(r.overflowX,e)||function(n){var i=function(o){if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch(l){return null}}(n);return!!i&&(i.clientHeight<n.scrollHeight||i.clientWidth<n.scrollWidth)}(t)}return!1}function bq(t,e,r,n,i,o,l,f){return o<t&&l>e||o>t&&l<e?0:o<=t&&f<=r||l>=e&&f>=r?o-t-n:l>e&&f<r||o<t&&f>r?l-e+i:0}var FVe=function(t,e){var r=window,n=e.scrollMode,i=e.block,o=e.inline,l=e.boundary,f=e.skipOverflowHiddenElements,d=typeof l=="function"?l:function($t){return $t!==l};if(!kVe(t))throw new TypeError("Invalid target");for(var v,x,b=document.scrollingElement||document.documentElement,A=[],P=t;kVe(P)&&d(P);){if((P=(x=(v=P).parentElement)==null?v.getRootNode().host||null:x)===b){A.push(P);break}P!=null&&P===document.body&&C7(P)&&!C7(document.documentElement)||P!=null&&C7(P,f)&&A.push(P)}for(var N=r.visualViewport?r.visualViewport.width:innerWidth,j=r.visualViewport?r.visualViewport.height:innerHeight,D=window.scrollX||pageXOffset,F=window.scrollY||pageYOffset,U=t.getBoundingClientRect(),$=U.height,Z=U.width,ie=U.top,ne=U.right,ae=U.bottom,ye=U.left,ge=i==="start"||i==="nearest"?ie:i==="end"?ae:ie+$/2,de=o==="center"?ye+Z/2:o==="end"?ne:ye,be=[],Ne=0;Ne<A.length;Ne++){var Me=A[Ne],ke=Me.getBoundingClientRect(),He=ke.height,Ke=ke.width,Je=ke.top,We=ke.right,lt=ke.bottom,pt=ke.left;if(n==="if-needed"&&ie>=0&&ye>=0&&ae<=j&&ne<=N&&ie>=Je&&ae<=lt&&ye>=pt&&ne<=We)return be;var dt=getComputedStyle(Me),ze=parseInt(dt.borderLeftWidth,10),Dt=parseInt(dt.borderTopWidth,10),Ot=parseInt(dt.borderRightWidth,10),Ue=parseInt(dt.borderBottomWidth,10),nt=0,Ze=0,rt="offsetWidth"in Me?Me.offsetWidth-Me.clientWidth-ze-Ot:0,at="offsetHeight"in Me?Me.offsetHeight-Me.clientHeight-Dt-Ue:0,ot="offsetWidth"in Me?Me.offsetWidth===0?0:Ke/Me.offsetWidth:0,Lt="offsetHeight"in Me?Me.offsetHeight===0?0:He/Me.offsetHeight:0;if(b===Me)nt=i==="start"?ge:i==="end"?ge-j:i==="nearest"?bq(F,F+j,j,Dt,Ue,F+ge,F+ge+$,$):ge-j/2,Ze=o==="start"?de:o==="center"?de-N/2:o==="end"?de-N:bq(D,D+N,N,ze,Ot,D+de,D+de+Z,Z),nt=Math.max(0,nt+F),Ze=Math.max(0,Ze+D);else{nt=i==="start"?ge-Je-Dt:i==="end"?ge-lt+Ue+at:i==="nearest"?bq(Je,lt,He,Dt,Ue+at,ge,ge+$,$):ge-(Je+He/2)+at/2,Ze=o==="start"?de-pt-ze:o==="center"?de-(pt+Ke/2)+rt/2:o==="end"?de-We+Ot+rt:bq(pt,We,Ke,ze,Ot+rt,de,de+Z,Z);var zt=Me.scrollLeft,Pt=Me.scrollTop;ge+=Pt-(nt=Math.max(0,Math.min(Pt+nt/Lt,Me.scrollHeight-He/Lt+at))),de+=zt-(Ze=Math.max(0,Math.min(zt+Ze/ot,Me.scrollWidth-Ke/ot+rt)))}be.push({el:Me,top:nt,left:Ze})}return be};p();var JI=function(){return JI=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},JI.apply(this,arguments)};var dcr=0;function iA(){}function mcr(t,e){if(!t)return;FVe(t,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:i,top:o,left:l}=n;i.scrollTop=o,i.scrollLeft=l})}function jVe(t,e,r){return t===e||e instanceof r.Node&&t.contains&&t.contains(e)}function R7(t,e){let r;function n(){r&&clearTimeout(r)}function i(){for(var o=arguments.length,l=new Array(o),f=0;f<o;f++)l[f]=arguments[f];n(),r=setTimeout(()=>{r=null,t(...l)},e)}return i.cancel=n,i}function Vo(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return e.some(f=>(f&&f(n,...o),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function Nf(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n=>{e.forEach(i=>{typeof i=="function"?i(n):i&&(i.current=n)})}}function gcr(){return String(dcr++)}function vcr(t){let{isOpen:e,resultCount:r,previousResultCount:n}=t;return e?r?r!==n?`${r} result${r===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function wq(t,e){return Object.keys(t).reduce((r,n)=>(r[n]=HVe(e,n)?e[n]:t[n],r),{})}function HVe(t,e){return t[e]!==void 0}function rA(t){let{key:e,keyCode:r}=t;return r>=37&&r<=40&&e.indexOf("Arrow")!==0?`Arrow${e}`:e}function nA(t,e,r,n,i){if(i===void 0&&(i=!0),r===0)return-1;let o=r-1;(typeof e!="number"||e<0||e>=r)&&(e=t>0?-1:o+1);let l=e+t;l<0?l=i?o:0:l>o&&(l=i?0:o);let f=Tv(t,l,r,n,i);return f===-1?e>=r?-1:e:f}function Tv(t,e,r,n,i){let o=n(e);if(!o||!o.hasAttribute("disabled"))return e;if(t>0){for(let l=e+1;l<r;l++)if(!n(l).hasAttribute("disabled"))return l}else for(let l=e-1;l>=0;l--)if(!n(l).hasAttribute("disabled"))return l;return i?t>0?Tv(1,0,r,n,!1):Tv(-1,r-1,r,n,!1):-1}function zVe(t,e,r,n){return n===void 0&&(n=!0),e.some(i=>i&&(jVe(i,t,r)||n&&jVe(i,r.document.activeElement,r)))}var ycr=R7(t=>{ZVe(t).textContent=""},500);function WVe(t,e){let r=ZVe(e);t&&(r.textContent=t,ycr(e))}function ZVe(t){t===void 0&&(t=document);let e=t.getElementById("a11y-status-message");return e||(e=t.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var YVe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function _cr(t,e,r){let{props:n,type:i}=t,o={};Object.keys(e).forEach(l=>{xcr(l,t,e,r),r[l]!==e[l]&&(o[l]=r[l])}),n.onStateChange&&Object.keys(o).length&&n.onStateChange(mt({type:i},o))}function xcr(t,e,r,n){let{props:i,type:o}=e,l=`on${L7(t)}Change`;i[l]&&n[t]!==void 0&&n[t]!==r[t]&&i[l](mt({type:o},n))}function bcr(t,e){return e.changes}function wcr(t){let{selectedItem:e,itemToString:r}=t;return e?`${r(e)} has been selected.`:""}var Ecr=R7((t,e)=>{WVe(t(),e)},200),Scr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?Ct.useLayoutEffect:Ct.useEffect;function KVe(t){let{id:e=`downshift-${gcr()}`,labelId:r,menuId:n,getItemId:i,toggleButtonId:o,inputId:l}=t;return(0,Ct.useRef)({labelId:r||`${e}-label`,menuId:n||`${e}-menu`,getItemId:i||(d=>`${e}-item-${d}`),toggleButtonId:o||`${e}-toggle-button`,inputId:l||`${e}-input`}).current}function O7(t,e,r){return t!==void 0?t:r.length===0?-1:r.indexOf(e)}function Tcr(t){return t?String(t):""}function UVe(t){return /^\S{1}$/.test(t)}function L7(t){return`${t.slice(0,1).toUpperCase()}${t.slice(1)}`}function Iq(t){let e=(0,Ct.useRef)(t);return e.current=t,e}function XVe(t,e,r){let n=(0,Ct.useRef)(),i=(0,Ct.useRef)(),o=(0,Ct.useCallback)((b,A)=>{i.current=A,b=wq(b,A.props);let P=t(b,A);return A.props.stateReducer(b,on(mt({},A),{changes:P}))},[t]),[l,f]=(0,Ct.useReducer)(o,e),d=Iq(r),v=(0,Ct.useCallback)(b=>f(mt({props:d.current},b)),[d]),x=i.current;return(0,Ct.useEffect)(()=>{x&&n.current&&n.current!==l&&_cr(x,wq(n.current,x.props),l),n.current=l},[l,r,x]),[l,v]}function QVe(t,e,r){let[n,i]=XVe(t,e,r);return[wq(n,r),i]}var tA={itemToString:Tcr,stateReducer:bcr,getA11ySelectionMessage:wcr,scrollIntoView:mcr,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function ws(t,e,r){r===void 0&&(r=YVe);let n=t[`default${L7(e)}`];return n!==void 0?n:r[e]}function eA(t,e,r){r===void 0&&(r=YVe);let n=t[e];if(n!==void 0)return n;let i=t[`initial${L7(e)}`];return i!==void 0?i:ws(t,e,r)}function JVe(t){let e=eA(t,"selectedItem"),r=eA(t,"isOpen"),n=eA(t,"highlightedIndex"),i=eA(t,"inputValue");return{highlightedIndex:n<0&&e&&r?t.items.indexOf(e):n,isOpen:r,selectedItem:e,inputValue:i}}function ob(t,e,r,n){let{items:i,initialHighlightedIndex:o,defaultHighlightedIndex:l}=t,{selectedItem:f,highlightedIndex:d}=e;return i.length===0?-1:o!==void 0&&d===o?o:l!==void 0?l:f?r===0?i.indexOf(f):nA(r,i.indexOf(f),i.length,n,!1):r===0?-1:r<0?i.length-1:0}function eGe(t,e,r,n){let i=(0,Ct.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,Ct.useEffect)(()=>{let o=()=>{i.current.isMouseDown=!0},l=x=>{i.current.isMouseDown=!1,t&&!zVe(x.target,e.map(b=>b.current),r)&&n()},f=()=>{i.current.isTouchMove=!1},d=()=>{i.current.isTouchMove=!0},v=x=>{t&&!i.current.isTouchMove&&!zVe(x.target,e.map(b=>b.current),r,!1)&&n()};return r.addEventListener("mousedown",o),r.addEventListener("mouseup",l),r.addEventListener("touchstart",f),r.addEventListener("touchmove",d),r.addEventListener("touchend",v),function(){r.removeEventListener("mousedown",o),r.removeEventListener("mouseup",l),r.removeEventListener("touchstart",f),r.removeEventListener("touchmove",d),r.removeEventListener("touchend",v)}},[t,r]),i}var D7=()=>iA;function Eq(t,e,r){let d=r,{isInitialMount:n,highlightedIndex:i,items:o,environment:l}=d,f=Oo(d,["isInitialMount","highlightedIndex","items","environment"]);(0,Ct.useEffect)(()=>{n||Ecr(()=>t(mt({highlightedIndex:i,highlightedItem:o[i],resultCount:o.length},f)),l.document)},e)}function tGe(t){let{highlightedIndex:e,isOpen:r,itemRefs:n,getItemNodeFromIndex:i,menuElement:o,scrollIntoView:l}=t,f=(0,Ct.useRef)(!0);return Scr(()=>{e<0||!r||!Object.keys(n.current).length||(f.current===!1?f.current=!0:l(i(e),o))},[e]),f}var N7=iA;function rGe(t,e,r){let{type:n,props:i}=e,o;switch(n){case r.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case r.MenuMouseLeave:o={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:o={isOpen:!t.isOpen,highlightedIndex:t.isOpen?-1:ob(i,t,0)};break;case r.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:ob(i,t,0)};break;case r.FunctionCloseMenu:o={isOpen:!1};break;case r.FunctionSetHighlightedIndex:o={highlightedIndex:e.highlightedIndex};break;case r.FunctionSetInputValue:o={inputValue:e.inputValue};break;case r.FunctionReset:o={highlightedIndex:ws(i,"highlightedIndex"),isOpen:ws(i,"isOpen"),selectedItem:ws(i,"selectedItem"),inputValue:ws(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return mt(mt({},t),o)}function BVe(t){for(var e=t.keysSoFar,r=t.highlightedIndex,n=t.items,i=t.itemToString,o=t.getItemNodeFromIndex,l=e.toLowerCase(),f=0;f<n.length;f++){var d=(f+r+1)%n.length,v=n[d];if(v!==void 0&&i(v).toLowerCase().startsWith(l)){var x=o(d);if(!(x!=null&&x.hasAttribute("disabled")))return d}}return r}var PFn={items:kt.default.array.isRequired,itemToString:kt.default.func,getA11yStatusMessage:kt.default.func,getA11ySelectionMessage:kt.default.func,circularNavigation:kt.default.bool,highlightedIndex:kt.default.number,defaultHighlightedIndex:kt.default.number,initialHighlightedIndex:kt.default.number,isOpen:kt.default.bool,defaultIsOpen:kt.default.bool,initialIsOpen:kt.default.bool,selectedItem:kt.default.any,initialSelectedItem:kt.default.any,defaultSelectedItem:kt.default.any,id:kt.default.string,labelId:kt.default.string,menuId:kt.default.string,getItemId:kt.default.func,toggleButtonId:kt.default.string,stateReducer:kt.default.func,onSelectedItemChange:kt.default.func,onHighlightedIndexChange:kt.default.func,onStateChange:kt.default.func,onIsOpenChange:kt.default.func,environment:kt.default.shape({addEventListener:kt.default.func,removeEventListener:kt.default.func,document:kt.default.shape({getElementById:kt.default.func,activeElement:kt.default.any,body:kt.default.any})})};function Icr(t){var e=t.isOpen,r=t.resultCount,n=t.previousResultCount;return e?r?r!==n?"".concat(r," result").concat(r===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var Acr=JI(JI({},tA),{getA11yStatusMessage:Icr}),Mcr=iA,k7=0,q7=1,F7=2,j7=3,z7=4,U7=5,B7=6,V7=7,Sq=8,nGe=9,iGe=10,G7=11,oGe=12,$7=13,H7=14,W7=15,aGe=16,sGe=17,lGe=18,uGe=19,Z7=20,P7=21,cGe=22,fGe=Object.freeze({__proto__:null,MenuKeyDownArrowDown:k7,MenuKeyDownArrowUp:q7,MenuKeyDownEscape:F7,MenuKeyDownHome:j7,MenuKeyDownEnd:z7,MenuKeyDownEnter:U7,MenuKeyDownSpaceButton:B7,MenuKeyDownCharacter:V7,MenuBlur:Sq,MenuMouseLeave:nGe,ItemMouseMove:iGe,ItemClick:G7,ToggleButtonClick:oGe,ToggleButtonKeyDownArrowDown:$7,ToggleButtonKeyDownArrowUp:H7,ToggleButtonKeyDownCharacter:W7,FunctionToggleMenu:aGe,FunctionOpenMenu:sGe,FunctionCloseMenu:lGe,FunctionSetHighlightedIndex:uGe,FunctionSelectItem:Z7,FunctionSetInputValue:P7,FunctionReset:cGe});function Ccr(t,e){let{type:r,props:n,shiftKey:i}=e,o;switch(r){case G7:o={isOpen:ws(n,"isOpen"),highlightedIndex:ws(n,"highlightedIndex"),selectedItem:n.items[e.index]};break;case W7:{let l=e.key,f=`${t.inputValue}${l}`,d=BVe({keysSoFar:f,highlightedIndex:t.selectedItem?n.items.indexOf(t.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=mt({inputValue:f},d>=0&&{selectedItem:n.items[d]})}break;case $7:o={highlightedIndex:ob(n,t,1,e.getItemNodeFromIndex),isOpen:!0};break;case H7:o={highlightedIndex:ob(n,t,-1,e.getItemNodeFromIndex),isOpen:!0};break;case U7:case B7:o=mt({isOpen:ws(n,"isOpen"),highlightedIndex:ws(n,"highlightedIndex")},t.highlightedIndex>=0&&{selectedItem:n.items[t.highlightedIndex]});break;case j7:o={highlightedIndex:Tv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case z7:o={highlightedIndex:Tv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case F7:o={isOpen:!1,highlightedIndex:-1};break;case Sq:o={isOpen:!1,highlightedIndex:-1};break;case V7:{let l=e.key,f=`${t.inputValue}${l}`,d=BVe({keysSoFar:f,highlightedIndex:t.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=mt({inputValue:f},d>=0&&{highlightedIndex:d})}break;case k7:o={highlightedIndex:nA(i?5:1,t.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case q7:o={highlightedIndex:nA(i?-5:-1,t.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case Z7:o={selectedItem:e.selectedItem};break;default:return rGe(t,e,fGe)}return mt(mt({},t),o)}hGe.stateChangeTypes=fGe;function hGe(t){t===void 0&&(t={}),Mcr(t,hGe);let e=mt(mt({},Acr),t),{items:r,scrollIntoView:n,environment:i,initialIsOpen:o,defaultIsOpen:l,itemToString:f,getA11ySelectionMessage:d,getA11yStatusMessage:v}=e,x=JVe(e),[b,A]=QVe(Ccr,x,e),{isOpen:P,highlightedIndex:N,selectedItem:j,inputValue:D}=b,F=(0,Ct.useRef)(null),U=(0,Ct.useRef)(null),$=(0,Ct.useRef)({}),Z=(0,Ct.useRef)(!0),ie=(0,Ct.useRef)(null),ne=KVe(e),ae=(0,Ct.useRef)(),ye=(0,Ct.useRef)(!0),ge=Iq({state:b,props:e}),de=(0,Ct.useCallback)(Ze=>$.current[ne.getItemId(Ze)],[ne]);Eq(v,[P,N,D,r],mt({isInitialMount:ye.current,previousResultCount:ae.current,items:r,environment:i,itemToString:f},b)),Eq(d,[j],mt({isInitialMount:ye.current,previousResultCount:ae.current,items:r,environment:i,itemToString:f},b));let be=tGe({menuElement:U.current,highlightedIndex:N,isOpen:P,itemRefs:$,scrollIntoView:n,getItemNodeFromIndex:de});(0,Ct.useEffect)(()=>(ie.current=R7(Ze=>{Ze({type:P7,inputValue:""})},500),()=>{ie.current.cancel()}),[]),(0,Ct.useEffect)(()=>{D&&ie.current(A)},[A,D]),N7({isInitialMount:ye.current,props:e,state:b}),(0,Ct.useEffect)(()=>{if(ye.current){(o||l||P)&&U.current&&U.current.focus();return}if(P){U.current&&U.current.focus();return}i.document.activeElement===U.current&&F.current&&(Z.current=!1,F.current.focus())},[P]),(0,Ct.useEffect)(()=>{ye.current||(ae.current=r.length)});let Ne=eGe(P,[U,F],i,()=>{A({type:Sq})}),Me=D7("getMenuProps","getToggleButtonProps");(0,Ct.useEffect)(()=>{ye.current=!1},[]),(0,Ct.useEffect)(()=>{P||($.current={})},[P]);let ke=(0,Ct.useMemo)(()=>({ArrowDown(Ze){Ze.preventDefault(),A({type:$7,getItemNodeFromIndex:de,shiftKey:Ze.shiftKey})},ArrowUp(Ze){Ze.preventDefault(),A({type:H7,getItemNodeFromIndex:de,shiftKey:Ze.shiftKey})}}),[A,de]),He=(0,Ct.useMemo)(()=>({ArrowDown(Ze){Ze.preventDefault(),A({type:k7,getItemNodeFromIndex:de,shiftKey:Ze.shiftKey})},ArrowUp(Ze){Ze.preventDefault(),A({type:q7,getItemNodeFromIndex:de,shiftKey:Ze.shiftKey})},Home(Ze){Ze.preventDefault(),A({type:j7,getItemNodeFromIndex:de})},End(Ze){Ze.preventDefault(),A({type:z7,getItemNodeFromIndex:de})},Escape(){A({type:F7})},Enter(Ze){Ze.preventDefault(),A({type:U7})}," "(Ze){Ze.preventDefault(),A({type:B7})}}),[A,de]),Ke=(0,Ct.useCallback)(()=>{A({type:aGe})},[A]),Je=(0,Ct.useCallback)(()=>{A({type:lGe})},[A]),We=(0,Ct.useCallback)(()=>{A({type:sGe})},[A]),lt=(0,Ct.useCallback)(Ze=>{A({type:uGe,highlightedIndex:Ze})},[A]),pt=(0,Ct.useCallback)(Ze=>{A({type:Z7,selectedItem:Ze})},[A]),dt=(0,Ct.useCallback)(()=>{A({type:cGe})},[A]),ze=(0,Ct.useCallback)(Ze=>{A({type:P7,inputValue:Ze})},[A]),Dt=(0,Ct.useCallback)(Ze=>mt({id:ne.labelId,htmlFor:ne.toggleButtonId},Ze),[ne]),Ot=(0,Ct.useCallback)(function(Ze,rt){let pr=Ze===void 0?{}:Ze,{onMouseLeave:at,refKey:ot="ref",onKeyDown:Lt,onBlur:zt,ref:Pt}=pr,$t=Oo(pr,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:Xt=!1}=rt===void 0?{}:rt,Gt=ge.current.state,Sr=dr=>{let wr=rA(dr);wr&&He[wr]?He[wr](dr):UVe(wr)&&A({type:V7,key:wr,getItemNodeFromIndex:de})},zr=()=>{if(Z.current===!1){Z.current=!0;return}!Ne.current.isMouseDown&&A({type:Sq})},vr=()=>{A({type:nGe})};return Me("getMenuProps",Xt,ot,U),mt(on(mt({[ot]:Nf(Pt,dr=>{U.current=dr}),id:ne.menuId,role:"listbox","aria-labelledby":ne.labelId,tabIndex:-1},Gt.isOpen&&Gt.highlightedIndex>-1&&{"aria-activedescendant":ne.getItemId(Gt.highlightedIndex)}),{onMouseLeave:Vo(at,vr),onKeyDown:Vo(Lt,Sr),onBlur:Vo(zt,zr)}),$t)},[A,ge,He,Ne,Me,ne,de]),Ue=(0,Ct.useCallback)(function(Ze,rt){let zr=Ze===void 0?{}:Ze,{onClick:at,onKeyDown:ot,refKey:Lt="ref",ref:zt}=zr,Pt=Oo(zr,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:$t=!1}=rt===void 0?{}:rt,Xt=()=>{A({type:oGe})},Gt=vr=>{let pr=rA(vr);pr&&ke[pr]?ke[pr](vr):UVe(pr)&&A({type:W7,key:pr,getItemNodeFromIndex:de})},Sr=mt({[Lt]:Nf(zt,vr=>{F.current=vr}),id:ne.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":ge.current.state.isOpen,"aria-labelledby":`${ne.labelId} ${ne.toggleButtonId}`},Pt);return Pt.disabled||(Sr.onClick=Vo(at,Xt),Sr.onKeyDown=Vo(ot,Gt)),Me("getToggleButtonProps",$t,Lt,F),Sr},[A,ge,ke,Me,ne,de]),nt=(0,Ct.useCallback)(function(Ze){let wr=Ze===void 0?{}:Ze,{item:rt,index:at,onMouseMove:ot,onClick:Lt,refKey:zt="ref",ref:Pt,disabled:$t}=wr,Xt=Oo(wr,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Gt,props:Sr}=ge.current,zr=()=>{at!==Gt.highlightedIndex&&(be.current=!1,A({type:iGe,index:at,disabled:$t}))},vr=()=>{A({type:G7,index:at})},pr=O7(at,rt,Sr.items);if(pr<0)throw new Error("Pass either item or item index in getItemProps!");let dr=mt({disabled:$t,role:"option","aria-selected":`${pr===Gt.highlightedIndex}`,id:ne.getItemId(pr),[zt]:Nf(Pt,un=>{un&&($.current[ne.getItemId(pr)]=un)})},Xt);return $t||(dr.onClick=Vo(Lt,vr)),dr.onMouseMove=Vo(ot,zr),dr},[A,ge,be,ne]);return{getToggleButtonProps:Ue,getLabelProps:Dt,getMenuProps:Ot,getItemProps:nt,toggleMenu:Ke,openMenu:We,closeMenu:Je,setHighlightedIndex:lt,selectItem:pt,reset:dt,setInputValue:ze,highlightedIndex:N,isOpen:P,selectedItem:j,inputValue:D}}var Y7=0,K7=1,X7=2,Q7=3,J7=4,eX=5,tX=6,Tq=7,pGe=8,dGe=9,rX=10,mGe=11,gGe=12,vGe=13,yGe=14,_Ge=15,nX=16,xGe=17,bGe=18,iX=19,wGe=Object.freeze({__proto__:null,InputKeyDownArrowDown:Y7,InputKeyDownArrowUp:K7,InputKeyDownEscape:X7,InputKeyDownHome:Q7,InputKeyDownEnd:J7,InputKeyDownEnter:eX,InputChange:tX,InputBlur:Tq,MenuMouseLeave:pGe,ItemMouseMove:dGe,ItemClick:rX,ToggleButtonClick:mGe,FunctionToggleMenu:gGe,FunctionOpenMenu:vGe,FunctionCloseMenu:yGe,FunctionSetHighlightedIndex:_Ge,FunctionSelectItem:nX,FunctionSetInputValue:xGe,FunctionReset:bGe,ControlledPropUpdatedSelectedItem:iX});function Pcr(t){let e=JVe(t),{selectedItem:r}=e,{inputValue:n}=e;return n===""&&r&&t.defaultInputValue===void 0&&t.initialInputValue===void 0&&t.inputValue===void 0&&(n=t.itemToString(r)),on(mt({},e),{inputValue:n})}var RFn={items:kt.default.array.isRequired,itemToString:kt.default.func,getA11yStatusMessage:kt.default.func,getA11ySelectionMessage:kt.default.func,circularNavigation:kt.default.bool,highlightedIndex:kt.default.number,defaultHighlightedIndex:kt.default.number,initialHighlightedIndex:kt.default.number,isOpen:kt.default.bool,defaultIsOpen:kt.default.bool,initialIsOpen:kt.default.bool,selectedItem:kt.default.any,initialSelectedItem:kt.default.any,defaultSelectedItem:kt.default.any,inputValue:kt.default.string,defaultInputValue:kt.default.string,initialInputValue:kt.default.string,id:kt.default.string,labelId:kt.default.string,menuId:kt.default.string,getItemId:kt.default.func,inputId:kt.default.string,toggleButtonId:kt.default.string,stateReducer:kt.default.func,onSelectedItemChange:kt.default.func,onHighlightedIndexChange:kt.default.func,onStateChange:kt.default.func,onIsOpenChange:kt.default.func,onInputValueChange:kt.default.func,environment:kt.default.shape({addEventListener:kt.default.func,removeEventListener:kt.default.func,document:kt.default.shape({getElementById:kt.default.func,activeElement:kt.default.any,body:kt.default.any})})};function Rcr(t,e,r){let n=(0,Ct.useRef)(),[i,o]=XVe(t,e,r);return(0,Ct.useEffect)(()=>{HVe(r,"selectedItem")&&(n.current!==r.selectedItem&&o({type:iX,inputValue:r.itemToString(r.selectedItem)}),n.current=i.selectedItem===n.current?r.selectedItem:i.selectedItem)}),[wq(i,r),o]}var Ocr=iA,Lcr=on(mt({},tA),{getA11yStatusMessage:vcr,circularNavigation:!0});function Dcr(t,e){let{type:r,props:n,shiftKey:i}=e,o;switch(r){case rX:o={isOpen:ws(n,"isOpen"),highlightedIndex:ws(n,"highlightedIndex"),selectedItem:n.items[e.index],inputValue:n.itemToString(n.items[e.index])};break;case Y7:t.isOpen?o={highlightedIndex:nA(i?5:1,t.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:ob(n,t,1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case K7:t.isOpen?o={highlightedIndex:nA(i?-5:-1,t.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:ob(n,t,-1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case eX:o=mt({},t.isOpen&&t.highlightedIndex>=0&&{selectedItem:n.items[t.highlightedIndex],isOpen:ws(n,"isOpen"),highlightedIndex:ws(n,"highlightedIndex"),inputValue:n.itemToString(n.items[t.highlightedIndex])});break;case X7:o=mt({isOpen:!1,highlightedIndex:-1},!t.isOpen&&{selectedItem:null,inputValue:""});break;case Q7:o={highlightedIndex:Tv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case J7:o={highlightedIndex:Tv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case Tq:o=mt({isOpen:!1,highlightedIndex:-1},t.highlightedIndex>=0&&e.selectItem&&{selectedItem:n.items[t.highlightedIndex],inputValue:n.itemToString(n.items[t.highlightedIndex])});break;case tX:o={isOpen:!0,highlightedIndex:ws(n,"highlightedIndex"),inputValue:e.inputValue};break;case nX:o={selectedItem:e.selectedItem,inputValue:n.itemToString(e.selectedItem)};break;case iX:o={inputValue:e.inputValue};break;default:return rGe(t,e,wGe)}return mt(mt({},t),o)}Aq.stateChangeTypes=wGe;function Aq(t){t===void 0&&(t={}),Ocr(t,Aq);let e=mt(mt({},Lcr),t),{initialIsOpen:r,defaultIsOpen:n,items:i,scrollIntoView:o,environment:l,getA11yStatusMessage:f,getA11ySelectionMessage:d,itemToString:v}=e,x=Pcr(e),[b,A]=Rcr(Dcr,x,e),{isOpen:P,highlightedIndex:N,selectedItem:j,inputValue:D}=b,F=(0,Ct.useRef)(null),U=(0,Ct.useRef)({}),$=(0,Ct.useRef)(null),Z=(0,Ct.useRef)(null),ie=(0,Ct.useRef)(null),ne=(0,Ct.useRef)(!0),ae=KVe(e),ye=(0,Ct.useRef)(),ge=Iq({state:b,props:e}),de=(0,Ct.useCallback)(rt=>U.current[ae.getItemId(rt)],[ae]);Eq(f,[P,N,D,i],mt({isInitialMount:ne.current,previousResultCount:ye.current,items:i,environment:l,itemToString:v},b)),Eq(d,[j],mt({isInitialMount:ne.current,previousResultCount:ye.current,items:i,environment:l,itemToString:v},b));let be=tGe({menuElement:F.current,highlightedIndex:N,isOpen:P,itemRefs:U,scrollIntoView:o,getItemNodeFromIndex:de});N7({isInitialMount:ne.current,props:e,state:b}),(0,Ct.useEffect)(()=>{(r||n||P)&&$.current&&$.current.focus()},[]),(0,Ct.useEffect)(()=>{ne.current||(ye.current=i.length)});let Ne=eGe(P,[ie,F,Z],l,()=>{A({type:Tq,selectItem:!1})}),Me=D7("getInputProps","getComboboxProps","getMenuProps");(0,Ct.useEffect)(()=>{ne.current=!1},[]),(0,Ct.useEffect)(()=>{P||(U.current={})},[P]);let ke=(0,Ct.useMemo)(()=>({ArrowDown(rt){rt.preventDefault(),A({type:Y7,shiftKey:rt.shiftKey,getItemNodeFromIndex:de})},ArrowUp(rt){rt.preventDefault(),A({type:K7,shiftKey:rt.shiftKey,getItemNodeFromIndex:de})},Home(rt){ge.current.state.isOpen&&(rt.preventDefault(),A({type:Q7,getItemNodeFromIndex:de}))},End(rt){ge.current.state.isOpen&&(rt.preventDefault(),A({type:J7,getItemNodeFromIndex:de}))},Escape(rt){let at=ge.current.state;(at.isOpen||at.inputValue||at.selectedItem||at.highlightedIndex>-1)&&(rt.preventDefault(),A({type:X7}))},Enter(rt){let at=ge.current.state;!at.isOpen||at.highlightedIndex<0||rt.which===229||(rt.preventDefault(),A({type:eX,getItemNodeFromIndex:de}))}}),[A,ge,de]),He=(0,Ct.useCallback)(rt=>mt({id:ae.labelId,htmlFor:ae.inputId},rt),[ae]),Ke=(0,Ct.useCallback)(function(rt,at){let Xt=rt===void 0?{}:rt,{onMouseLeave:ot,refKey:Lt="ref",ref:zt}=Xt,Pt=Oo(Xt,["onMouseLeave","refKey","ref"]),{suppressRefError:$t=!1}=at===void 0?{}:at;return Me("getMenuProps",$t,Lt,F),mt({[Lt]:Nf(zt,Gt=>{F.current=Gt}),id:ae.menuId,role:"listbox","aria-labelledby":ae.labelId,onMouseLeave:Vo(ot,()=>{A({type:pGe})})},Pt)},[A,Me,ae]),Je=(0,Ct.useCallback)(function(rt){let De=rt===void 0?{}:rt,{item:at,index:ot,refKey:Lt="ref",ref:zt,onMouseMove:Pt,onMouseDown:$t,onClick:Xt,onPress:Gt,disabled:Sr}=De,zr=Oo(De,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:vr,state:pr}=ge.current,dr=O7(ot,at,vr.items);if(dr<0)throw new Error("Pass either item or item index in getItemProps!");let wr="onClick",un=Xt,Sn=()=>{ot!==pr.highlightedIndex&&(be.current=!1,A({type:dGe,index:ot,disabled:Sr}))},Nn=()=>{A({type:rX,index:ot})},_i=J=>J.preventDefault();return mt(on(mt({[Lt]:Nf(zt,J=>{J&&(U.current[ae.getItemId(dr)]=J)}),disabled:Sr,role:"option","aria-selected":`${dr===pr.highlightedIndex}`,id:ae.getItemId(dr)},!Sr&&{[wr]:Vo(un,Nn)}),{onMouseMove:Vo(Pt,Sn),onMouseDown:Vo($t,_i)}),zr)},[A,ge,be,ae]),We=(0,Ct.useCallback)(function(rt){let Xt=rt===void 0?{}:rt,{onClick:at,onPress:ot,refKey:Lt="ref",ref:zt}=Xt,Pt=Oo(Xt,["onClick","onPress","refKey","ref"]),$t=()=>{A({type:mGe}),!ge.current.state.isOpen&&$.current&&$.current.focus()};return mt(mt({[Lt]:Nf(zt,Gt=>{Z.current=Gt}),id:ae.toggleButtonId,tabIndex:-1},!Pt.disabled&&{onClick:Vo(at,$t)}),Pt)},[A,ge,ae]),lt=(0,Ct.useCallback)(function(rt,at){let Nn=rt===void 0?{}:rt,{onKeyDown:ot,onChange:Lt,onInput:zt,onBlur:Pt,onChangeText:$t,refKey:Xt="ref",ref:Gt}=Nn,Sr=Oo(Nn,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:zr=!1}=at===void 0?{}:at;Me("getInputProps",zr,Xt,$);let vr=ge.current.state,pr=_i=>{let De=rA(_i);De&&ke[De]&&ke[De](_i)},dr=_i=>{A({type:tX,inputValue:_i.target.value})},wr=()=>{vr.isOpen&&!Ne.current.isMouseDown&&A({type:Tq,selectItem:!0})},un="onChange",Sn={};return Sr.disabled||(Sn={[un]:Vo(Lt,zt,dr),onKeyDown:Vo(ot,pr),onBlur:Vo(Pt,wr)}),mt(mt(on(mt({[Xt]:Nf(Gt,_i=>{$.current=_i}),id:ae.inputId,"aria-autocomplete":"list","aria-controls":ae.menuId},vr.isOpen&&vr.highlightedIndex>-1&&{"aria-activedescendant":ae.getItemId(vr.highlightedIndex)}),{"aria-labelledby":ae.labelId,autoComplete:"off",value:vr.inputValue}),Sn),Sr)},[A,ke,ge,Ne,Me,ae]),pt=(0,Ct.useCallback)(function(rt,at){let $t=rt===void 0?{}:rt,{refKey:ot="ref",ref:Lt}=$t,zt=Oo($t,["refKey","ref"]),{suppressRefError:Pt=!1}=at===void 0?{}:at;return Me("getComboboxProps",Pt,ot,ie),mt({[ot]:Nf(Lt,Xt=>{ie.current=Xt}),role:"combobox","aria-haspopup":"listbox","aria-owns":ae.menuId,"aria-expanded":ge.current.state.isOpen},zt)},[ge,Me,ae]),dt=(0,Ct.useCallback)(()=>{A({type:gGe})},[A]),ze=(0,Ct.useCallback)(()=>{A({type:yGe})},[A]),Dt=(0,Ct.useCallback)(()=>{A({type:vGe})},[A]),Ot=(0,Ct.useCallback)(rt=>{A({type:_Ge,highlightedIndex:rt})},[A]),Ue=(0,Ct.useCallback)(rt=>{A({type:nX,selectedItem:rt})},[A]),nt=(0,Ct.useCallback)(rt=>{A({type:xGe,inputValue:rt})},[A]),Ze=(0,Ct.useCallback)(()=>{A({type:bGe})},[A]);return{getItemProps:Je,getLabelProps:He,getMenuProps:Ke,getInputProps:lt,getComboboxProps:pt,getToggleButtonProps:We,toggleMenu:dt,openMenu:Dt,closeMenu:ze,setHighlightedIndex:Ot,setInputValue:nt,selectItem:Ue,reset:Ze,highlightedIndex:N,isOpen:P,selectedItem:j,inputValue:D}}var EGe={activeIndex:-1,selectedItems:[]};function VVe(t,e){return eA(t,e,EGe)}function GVe(t,e){return ws(t,e,EGe)}function Ncr(t){let e=VVe(t,"activeIndex"),r=VVe(t,"selectedItems");return{activeIndex:e,selectedItems:r}}function $Ve(t){if(t.shiftKey||t.metaKey||t.ctrlKey||t.altKey)return!1;let e=t.target;return!(e instanceof HTMLInputElement&&e.value!==""&&(e.selectionStart!==0||e.selectionEnd!==0))}function kcr(t){let{removedSelectedItem:e,itemToString:r}=t;return`${r(e)} has been removed.`}var OFn={selectedItems:kt.default.array,initialSelectedItems:kt.default.array,defaultSelectedItems:kt.default.array,itemToString:kt.default.func,getA11yRemovalMessage:kt.default.func,stateReducer:kt.default.func,activeIndex:kt.default.number,initialActiveIndex:kt.default.number,defaultActiveIndex:kt.default.number,onActiveIndexChange:kt.default.func,onSelectedItemsChange:kt.default.func,keyNavigationNext:kt.default.string,keyNavigationPrevious:kt.default.string,environment:kt.default.shape({addEventListener:kt.default.func,removeEventListener:kt.default.func,document:kt.default.shape({getElementById:kt.default.func,activeElement:kt.default.any,body:kt.default.any})})},qcr={itemToString:tA.itemToString,stateReducer:tA.stateReducer,environment:tA.environment,getA11yRemovalMessage:kcr,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},Fcr=iA,oX=0,aX=1,sX=2,lX=3,uX=4,cX=5,fX=6,hX=7,pX=8,dX=9,mX=10,gX=11,vX=12,jcr=Object.freeze({__proto__:null,SelectedItemClick:oX,SelectedItemKeyDownDelete:aX,SelectedItemKeyDownBackspace:sX,SelectedItemKeyDownNavigationNext:lX,SelectedItemKeyDownNavigationPrevious:uX,DropdownKeyDownNavigationPrevious:cX,DropdownKeyDownBackspace:fX,DropdownClick:hX,FunctionAddSelectedItem:pX,FunctionRemoveSelectedItem:dX,FunctionSetSelectedItems:mX,FunctionSetActiveIndex:gX,FunctionReset:vX});function zcr(t,e){let{type:r,index:n,props:i,selectedItem:o}=e,{activeIndex:l,selectedItems:f}=t,d;switch(r){case oX:d={activeIndex:n};break;case uX:d={activeIndex:l-1<0?0:l-1};break;case lX:d={activeIndex:l+1>=f.length?-1:l+1};break;case sX:case aX:{let v=l;f.length===1?v=-1:l===f.length-1&&(v=f.length-2),d={selectedItems:[...f.slice(0,l),...f.slice(l+1)],activeIndex:v};break}case cX:d={activeIndex:f.length-1};break;case fX:d={selectedItems:f.slice(0,f.length-1)};break;case pX:d={selectedItems:[...f,o]};break;case hX:d={activeIndex:-1};break;case dX:{let v=l,x=f.indexOf(o);x>=0&&(f.length===1?v=-1:x===f.length-1&&(v=f.length-2),d={selectedItems:[...f.slice(0,x),...f.slice(x+1)],activeIndex:v});break}case mX:{let{selectedItems:v}=e;d={selectedItems:v};break}case gX:{let{activeIndex:v}=e;d={activeIndex:v};break}case vX:d={activeIndex:GVe(i,"activeIndex"),selectedItems:GVe(i,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return mt(mt({},t),d)}SGe.stateChangeTypes=jcr;function SGe(t){t===void 0&&(t={}),Fcr(t,SGe);let e=mt(mt({},qcr),t),{getA11yRemovalMessage:r,itemToString:n,environment:i,keyNavigationNext:o,keyNavigationPrevious:l}=e,[f,d]=QVe(zcr,Ncr(e),e),{activeIndex:v,selectedItems:x}=f,b=(0,Ct.useRef)(!0),A=(0,Ct.useRef)(null),P=(0,Ct.useRef)(x),N=(0,Ct.useRef)();N.current=[];let j=Iq({state:f,props:e});(0,Ct.useEffect)(()=>{if(!b.current){if(x.length<P.current.length){let de=P.current.find(be=>x.indexOf(be)<0);WVe(r({itemToString:n,resultCount:x.length,removedSelectedItem:de,activeIndex:v,activeSelectedItem:x[v]}),i.document)}P.current=x}},[x.length]),(0,Ct.useEffect)(()=>{b.current||(v===-1&&A.current?A.current.focus():N.current[v]&&N.current[v].focus())},[v]),N7({isInitialMount:b.current,props:e,state:f});let D=D7("getDropdownProps");(0,Ct.useEffect)(()=>{b.current=!1},[]);let F=(0,Ct.useMemo)(()=>({[l](){d({type:uX})},[o](){d({type:lX})},Delete(){d({type:aX})},Backspace(){d({type:sX})}}),[d,o,l]),U=(0,Ct.useMemo)(()=>({[l](de){$Ve(de)&&d({type:cX})},Backspace(de){$Ve(de)&&d({type:fX})}}),[d,l]),$=(0,Ct.useCallback)(function(de){let ze=de===void 0?{}:de,{refKey:be="ref",ref:Ne,onClick:Me,onKeyDown:ke,selectedItem:He,index:Ke}=ze,Je=Oo(ze,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:We}=j.current;if(O7(Ke,He,We.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let pt=()=>{d({type:oX,index:Ke})},dt=Dt=>{let Ot=rA(Dt);Ot&&F[Ot]&&F[Ot](Dt)};return mt({[be]:Nf(Ne,Dt=>{Dt&&N.current.push(Dt)}),tabIndex:Ke===We.activeIndex?0:-1,onClick:Vo(Me,pt),onKeyDown:Vo(ke,dt)},Je)},[d,j,F]),Z=(0,Ct.useCallback)(function(de,be){let dt=de===void 0?{}:de,{refKey:Ne="ref",ref:Me,onKeyDown:ke,onClick:He,preventKeyAction:Ke=!1}=dt,Je=Oo(dt,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:We=!1}=be===void 0?{}:be;D("getDropdownProps",We,Ne,A);let lt=ze=>{let Dt=rA(ze);Dt&&U[Dt]&&U[Dt](ze)},pt=()=>{d({type:hX})};return mt(mt({[Ne]:Nf(Me,ze=>{ze&&(A.current=ze)})},!Ke&&{onKeyDown:Vo(ke,lt),onClick:Vo(He,pt)}),Je)},[d,U,D]),ie=(0,Ct.useCallback)(de=>{d({type:pX,selectedItem:de})},[d]),ne=(0,Ct.useCallback)(de=>{d({type:dX,selectedItem:de})},[d]),ae=(0,Ct.useCallback)(de=>{d({type:mX,selectedItems:de})},[d]),ye=(0,Ct.useCallback)(de=>{d({type:gX,activeIndex:de})},[d]),ge=(0,Ct.useCallback)(()=>{d({type:vX})},[d]);return{getSelectedItemProps:$,getDropdownProps:Z,addSelectedItem:ie,removeSelectedItem:ne,setSelectedItems:ae,setActiveIndex:ye,reset:ge,selectedItems:x,activeIndex:v}}var ym=Fe(an(),1);function yX({buttonProps:t,fetchInputItems:e,label:r,itemToString:n,inputProps:i,onSelectedItemChange:o,timeout:l=300}){let[f,d]=(0,Es.useState)([]),[v,x]=(0,Es.useState)(void 0),b=(0,Es.useRef)(),A=(0,Es.useRef)(null),P=ke=>{clearTimeout(A.current),A.current=setTimeout(()=>{e(ke).then(He=>d(He))},l)},N=({inputValue:ke})=>{v!==void 0&&x(void 0),P(ke)},j=({selectedItem:ke})=>{o!==void 0&&o(ke),x(ke)},{isOpen:D,getToggleButtonProps:F,getLabelProps:U,getMenuProps:$,getInputProps:Z,getComboboxProps:ie,getItemProps:ne,highlightedIndex:ae}=Aq({items:f,itemToString:n,onInputValueChange:N,onSelectedItemChange:j}),Ne=t!=null?t:{},{onClick:ye}=Ne,ge=Oo(Ne,["onClick"]),Me=Z(),{ref:de}=Me,be=Oo(Me,["ref"]);return Es.default.createElement("div",{className:"vkf-autocomplete-container"},Es.default.createElement("label",on(mt({},U()),{id:be["aria-labelledby"],className:"visually-hidden"}),r!==void 0?r:i.placeholder),Es.default.createElement("div",mt({className:"form-group"},ie()),Es.default.createElement("input",mt(on(mt({},be),{ref:ke=>{de(ke),b.current=ke},type:"text"}),i)),Es.default.createElement("button",mt(mt(on(mt({type:"button"},F()),{"aria-label":"toggle menu"}),ge),ye!==void 0?{onClick:()=>{ye(v,b.current!==null?b.current.value:"")}}:{}),"\u2193")),Es.default.createElement("div",{className:"autocomplete-dropdown"},Es.default.createElement("ul",on(mt({className:"autocomplete-result-list"},$()),{id:be["aria-controls"]}),D&&f.map((ke,He)=>Es.default.createElement("li",mt({className:Ws("ui-menu-item",ae===He&&"highlighted",v===ke&&"selected"),key:`${ke.label}${He}`},ne({item:ke,index:He})),ke.label)))))}yX.propTypes={buttonProps:ym.default.object,fetchInputItems:ym.default.func,label:ym.default.string,inputProps:ym.default.object,itemToString:ym.default.func,onSelectedItemChange:ym.default.func,timeout:ym.default.number};p();var _X=(t,e,r)=>{let n=t+"?format=json&q="+e;return hf.get(n).then(i=>{let l=i.data.map(f=>({label:f.display_name,value:f.display_name,lonlat:{x:parseFloat(f.lon),y:parseFloat(f.lat)},type:f.type}));return r!==void 0&&r(),l})};var Ucr=t=>t?t.label:"",TGe=t=>{let{onSelectPosition:e,searchUrl:r}=t,[n,i]=(0,Iv.useState)(!1),o=pu(jd),l=(0,Iv.useCallback)(d=>(i(!0),_X(r,d,()=>{i(!1)})),[r]),f=(d,v)=>{d!==void 0?e(d):_X(r,v).then(x=>{if(x.length>0)e(x[0]);else throw new Error(Lr("placenamesearch-unknown-placename"))}).catch(()=>{o({id:"placenamesearch",type:"warning",text:Lr("placenamesearch-unknown-placename")})})};return Iv.default.createElement("div",{className:"gazetteersearch-container"},Iv.default.createElement(yX,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:f,"aria-label":Lr("placenamesearch-submit"),title:Lr("placenamesearch-submit")},fetchInputItems:l,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:Lr("placenamesearch-placeholder")},itemToString:Ucr,onSelectedItemChange:f}))};TGe.propTypes={onSelectPosition:xX.default.func.isRequired,searchUrl:xX.default.string.isRequired};var IGe=TGe;p();var Nu=Fe(Et(),1),ab=Fe(an(),1);var AGe=t=>{let{onEndDrag:e,onStartDrag:r,orientation:n="horizontal",layer:i}=t,[o,l]=(0,Nu.useState)(i.getOpacity()*100),f=(0,Nu.useRef)(null),d=0,v=100,x=(P,N)=>{if(n==="vertical"){var j=100-(P-d)/(v-d)*100;N.style.top=j+"%",N.innerHTML=P.toFixed(0)+"%";return}let D=(P-d)/(v-d)*100;N.style.left=D+"%",N.innerHTML=P+"%"},b=P=>{let N=P.target.getOpacity()*100;l(N)},A=P=>{l(P),i.setOpacity(P/100)};return(0,Nu.useEffect)(()=>{x(Math.round(o),f.current)},[o]),(0,Nu.useEffect)(()=>(i.on("change:opacity",b),()=>{i.un("change:opacity",b)})),Nu.default.createElement("div",{className:"opacity-container"},Nu.default.createElement("div",{className:"slider-container"},Nu.default.createElement(vq,{onAfterChange:e,onBeforeChange:r,onChange:A,value:o,vertical:n==="vertical"}),Nu.default.createElement("div",{className:"tooltip value",ref:f},"100%")))};AGe.propTypes={onEndDrag:ab.default.func,onStartDrag:ab.default.func,layer:ab.default.oneOfType([ab.default.instanceOf(Sv)]),orientation:ab.default.oneOf(["horizontal","vertical"])};var MGe=AGe;var CGe=t=>{let{extent:e,urlNominatim:r,urlsOsmBaseMap:n}=t,i=$s(o2),[o,l]=(0,kf.useState)(null),[f,d]=r2(s2);return kf.default.createElement("div",{className:"vkf-mapview-target"},kf.default.createElement(EVe,{extent:e,onLoad:x=>d(x),urlNominatim:r,urlsOsmBaseMap:n},f!==null&&kf.default.createElement("div",null,kf.default.createElement("div",{className:"placenamesearch-container"},kf.default.createElement(IGe,{onSelectPosition:x=>{let[b,A]=[x.lonlat.x,x.lonlat.y],j=xc([parseFloat(b),parseFloat(A)],"EPSG:4326","EPSG:3857");if(f!=null&&f.map){let D=f.map.getView();D.setCenter(j),D.setZoom(12)}},searchUrl:Di.getNominatimUrl()})),o!==null&&kf.default.createElement(MGe,{layer:o,orientation:"vertical"}))),f!==null&&i!==null&&kf.default.createElement(AVe,{key:i.wms_url,map:f.map,layerName:i.layer_name,onLoad:x=>l(x),wmsUrl:i.wms_url}))};CGe.propTypes={extent:sb.default.arrayOf(sb.default.number),urlNominatim:sb.default.string,urlsOsmBaseMap:sb.default.arrayOf(sb.default.string)};var PGe=CGe;p();function RGe(t){return Pn(this,null,function*(){let e=Di.getSettings().API_SEARCH;if(e===void 0)throw new Error("The url for the search endpoint is not set.");let r=yield hf.get(`${e}/_doc/${t}`);if(r.status===200)return r.data._source;console.error("Something went wrong while trying to fetch search document.")})}var Bcr=t=>{var e,r,n,i;return{map_id:t.map_id,clip:(t==null?void 0:t.clip)!==void 0&&t.clip!==null?{type:t.clip.type,coordinates:t.clip.coordinates}:void 0,overwrites:t.transformation_id,params:{algorithm:(r=(e=t==null?void 0:t.params)==null?void 0:e.algorithm)!=null?r:"affine",gcps:(i=(n=t==null?void 0:t.params)==null?void 0:n.gcps)!=null?i:[]}}},LGe=t=>{let{urlsOsmBaseMap:e,urlNominatim:r}=t,n=pu(l2),i=pu(i2),o=pu(jd),l=$s(n2),[f,d]=(0,ku.useState)(null),[v,x]=(0,ku.useState)(!1);return(0,ku.useEffect)(()=>Pn(null,null,function*(){let b=OGe.default.parse(location.search);if(b.map_id!==void 0){let{transformations:A,additional_properties:P}=yield I2e(b.map_id),{active_transformation_id:N,extent:j,pending_jobs:D}=P,F=yield RGe(b.map_id),U=j!==null?xUe(j):null;D&&o({id:"georeference-view",type:"warning",text:"F\xFCr diese Karte existieren bisher noch unverarbeitete Georeferenzierung."});let $=b.transformation_id!==void 0?parseInt(b.transformation_id):N;if(A.length>0&&$!==null){let Z=A.find(ie=>ie.transformation_id===$);U=_Ue(Z),n(Bcr(Z))}else if(N===null)n({map_id:b.map_id,clip:null,overwrites:0,params:{algorithm:"affine",gcps:[]}});else throw new Error("This transformation type is not supported yet.");i(F),d(U),x(!0)}}),[]),ku.default.createElement("div",{className:"vkf-georeference-view"},ku.default.createElement("div",{className:"outer-map-container"},ku.default.createElement(yVe,null)),ku.default.createElement("div",{className:"outer-map-container"},v&&ku.default.createElement(PGe,{extent:f!==null?f:void 0,urlsOsmBaseMap:e,urlNominatim:r})),l&&ku.default.createElement(SUe,null))};LGe.propTypes={urlsOsmBaseMap:Mq.default.arrayOf(Mq.default.string).isRequired,urlNominatim:Mq.default.string.isRequired};var DGe=LGe;p();p();var Fl=Fe(Et(),1);var Cq=Fe(an(),1);var NGe=t=>{let{onClose:e,text:r,type:n}=t;return Fl.default.createElement("div",{className:"notification-item"},Fl.default.createElement("div",{className:Ws("alert","alert-"+n),role:"alert"},Fl.default.createElement("div",{className:"close"},Fl.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:e},Fl.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),Fl.default.createElement("div",{className:"text"},r)))};NGe.propTypes={onClose:Cq.default.func,text:Cq.default.string,type:Cq.default.string};var Vcr=()=>{let t=$s(jd),e=YD(t),[r,n]=(0,Fl.useState)([]);return(0,Fl.useEffect)(()=>{if(t!==null&&t.id!==null&&t!==e){let i=[...r],o=r.findIndex(l=>l.id===t.id);o>-1?i.splice(o,1,t.text!==null?t:void 0):i.splice(0,0,t),n(i.filter(l=>l!==void 0))}},[t,r,e]),Fl.default.createElement("div",{className:Ws("vkf-notifications",r.length===0?"hide":"")},r.map(({type:i,text:o},l)=>Fl.default.createElement(NGe,{key:l,onClose:()=>{let f=[...r];f.splice(l,1),n(f)},type:i,text:o})))},kGe=Vcr;var qGe=kGe;var Gcr=()=>Av.default.createElement(s2e,null,Av.default.createElement("div",{className:"vk-app-georeferencer"},Av.default.createElement("div",null,Av.default.createElement(wUe,null),Av.default.createElement(DGe,{urlsOsmBaseMap:Di.getDefaultBaseMapUrls(),urlNominatim:Di.getNominatimUrl()}),Av.default.createElement(qGe,null)))),FGe=Gcr;var $cr=Di;function Hcr(t){zGe.default.render(jGe.default.createElement(FGe,null),t)}return V$e(Wcr)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/