var vk2=(()=>{var rGe=Object.create;var gw=Object.defineProperty,nGe=Object.defineProperties,iGe=Object.getOwnPropertyDescriptor,oGe=Object.getOwnPropertyDescriptors,aGe=Object.getOwnPropertyNames,ZI=Object.getOwnPropertySymbols,sGe=Object.getPrototypeOf,ck=Object.prototype.hasOwnProperty,zX=Object.prototype.propertyIsEnumerable;var YI=Math.pow,uk=(r,e,t)=>e in r?gw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Tt=(r,e)=>{for(var t in e||(e={}))ck.call(e,t)&&uk(r,t,e[t]);if(ZI)for(var t of ZI(e))zX.call(e,t)&&uk(r,t,e[t]);return r},En=(r,e)=>nGe(r,oGe(e));var co=(r,e)=>{var t={};for(var n in r)ck.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&ZI)for(var n of ZI(r))e.indexOf(n)<0&&zX.call(r,n)&&(t[n]=r[n]);return t};var I=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),lGe=(r,e)=>{for(var t in e)gw(r,t,{get:e[t],enumerable:!0})},BX=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aGe(e))!ck.call(r,i)&&i!==t&&gw(r,i,{get:()=>e[i],enumerable:!(n=iGe(e,i))||n.enumerable});return r};var Me=(r,e,t)=>(t=r!=null?rGe(sGe(r)):{},BX(e||!r||!r.__esModule?gw(t,"default",{value:r,enumerable:!0}):t,r)),uGe=r=>BX(gw({},"__esModule",{value:!0}),r);var Ro=(r,e,t)=>uk(r,typeof e!="symbol"?e+"":e,t);var fo=(r,e,t)=>new Promise((n,i)=>{var o=h=>{try{u(t.next(h))}catch(d){i(d)}},a=h=>{try{u(t.throw(h))}catch(d){i(d)}},u=h=>h.done?n(h.value):Promise.resolve(h.value).then(o,a);u((t=t.apply(r,e)).next())});var fk=I((Uar,VX)=>{"use strict";var UX=Object.getOwnPropertySymbols,cGe=Object.prototype.hasOwnProperty,fGe=Object.prototype.propertyIsEnumerable;function hGe(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function pGe(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(o){return!1}}VX.exports=pGe()?Object.assign:function(r,e){for(var t,n=hGe(r),i,o=1;o<arguments.length;o++){t=Object(arguments[o]);for(var a in t)cGe.call(t,a)&&(n[a]=t[a]);if(UX){i=UX(t);for(var u=0;u<i.length;u++)fGe.call(t,i[u])&&(n[i[u]]=t[i[u]])}}return n}});var o7=I(mn=>{"use strict";var pk=fk(),Fg=60103,HX=60106;mn.Fragment=60107;mn.StrictMode=60108;mn.Profiler=60114;var WX=60109,ZX=60110,YX=60112;mn.Suspense=60113;var KX=60115,XX=60116;typeof Symbol=="function"&&Symbol.for&&(Rl=Symbol.for,Fg=Rl("react.element"),HX=Rl("react.portal"),mn.Fragment=Rl("react.fragment"),mn.StrictMode=Rl("react.strict_mode"),mn.Profiler=Rl("react.profiler"),WX=Rl("react.provider"),ZX=Rl("react.context"),YX=Rl("react.forward_ref"),mn.Suspense=Rl("react.suspense"),KX=Rl("react.memo"),XX=Rl("react.lazy"));var Rl,GX=typeof Symbol=="function"&&Symbol.iterator;function dGe(r){return r===null||typeof r!="object"?null:(r=GX&&r[GX]||r["@@iterator"],typeof r=="function"?r:null)}function yw(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JX={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QX={};function jg(r,e,t){this.props=r,this.context=e,this.refs=QX,this.updater=t||JX}jg.prototype.isReactComponent={};jg.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error(yw(85));this.updater.enqueueSetState(this,r,e,"setState")};jg.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function e7(){}e7.prototype=jg.prototype;function dk(r,e,t){this.props=r,this.context=e,this.refs=QX,this.updater=t||JX}var mk=dk.prototype=new e7;mk.constructor=dk;pk(mk,jg.prototype);mk.isPureReactComponent=!0;var vk={current:null},t7=Object.prototype.hasOwnProperty,r7={key:!0,ref:!0,__self:!0,__source:!0};function n7(r,e,t){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)t7.call(e,n)&&!r7.hasOwnProperty(n)&&(i[n]=e[n]);var u=arguments.length-2;if(u===1)i.children=t;else if(1<u){for(var h=Array(u),d=0;d<u;d++)h[d]=arguments[d+2];i.children=h}if(r&&r.defaultProps)for(n in u=r.defaultProps,u)i[n]===void 0&&(i[n]=u[n]);return{$$typeof:Fg,type:r,key:o,ref:a,props:i,_owner:vk.current}}function mGe(r,e){return{$$typeof:Fg,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function gk(r){return typeof r=="object"&&r!==null&&r.$$typeof===Fg}function vGe(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var $X=/\/+/g;function hk(r,e){return typeof r=="object"&&r!==null&&r.key!=null?vGe(""+r.key):e.toString(36)}function XI(r,e,t,n,i){var o=typeof r;(o==="undefined"||o==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Fg:case HX:a=!0;}}if(a)return a=r,i=i(a),r=n===""?"."+hk(a,0):n,Array.isArray(i)?(t="",r!=null&&(t=r.replace($X,"$&/")+"/"),XI(i,e,t,"",function(d){return d})):i!=null&&(gk(i)&&(i=mGe(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace($X,"$&/")+"/")+r)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Array.isArray(r))for(var u=0;u<r.length;u++){o=r[u];var h=n+hk(o,u);a+=XI(o,e,t,h,i)}else if(h=dGe(r),typeof h=="function")for(r=h.call(r),u=0;!(o=r.next()).done;)o=o.value,h=n+hk(o,u++),a+=XI(o,e,t,h,i);else if(o==="object")throw e=""+r,Error(yw(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e));return a}function KI(r,e,t){if(r==null)return r;var n=[],i=0;return XI(r,n,"","",function(o){return e.call(t,o,i++)}),n}function gGe(r){if(r._status===-1){var e=r._result;e=e(),r._status=0,r._result=e,e.then(function(t){r._status===0&&(t=t.default,r._status=1,r._result=t)},function(t){r._status===0&&(r._status=2,r._result=t)})}if(r._status===1)return r._result;throw r._result}var i7={current:null};function Ef(){var r=i7.current;if(r===null)throw Error(yw(321));return r}var yGe={ReactCurrentDispatcher:i7,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:vk,IsSomeRendererActing:{current:!1},assign:pk};mn.Children={map:KI,forEach:function(r,e,t){KI(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return KI(r,function(){e++}),e},toArray:function(r){return KI(r,function(e){return e})||[]},only:function(r){if(!gk(r))throw Error(yw(143));return r}};mn.Component=jg;mn.PureComponent=dk;mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yGe;mn.cloneElement=function(r,e,t){if(r==null)throw Error(yw(267,r));var n=pk({},r.props),i=r.key,o=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=vk.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var u=r.type.defaultProps;for(h in e)t7.call(e,h)&&!r7.hasOwnProperty(h)&&(n[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)n.children=t;else if(1<h){u=Array(h);for(var d=0;d<h;d++)u[d]=arguments[d+2];n.children=u}return{$$typeof:Fg,type:r.type,key:i,ref:o,props:n,_owner:a}};mn.createContext=function(r,e){return e===void 0&&(e=null),r={$$typeof:ZX,_calculateChangedBits:e,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider={$$typeof:WX,_context:r},r.Consumer=r};mn.createElement=n7;mn.createFactory=function(r){var e=n7.bind(null,r);return e.type=r,e};mn.createRef=function(){return{current:null}};mn.forwardRef=function(r){return{$$typeof:YX,render:r}};mn.isValidElement=gk;mn.lazy=function(r){return{$$typeof:XX,_payload:{_status:-1,_result:r},_init:gGe}};mn.memo=function(r,e){return{$$typeof:KX,type:r,compare:e===void 0?null:e}};mn.useCallback=function(r,e){return Ef().useCallback(r,e)};mn.useContext=function(r,e){return Ef().useContext(r,e)};mn.useDebugValue=function(){};mn.useEffect=function(r,e){return Ef().useEffect(r,e)};mn.useImperativeHandle=function(r,e,t){return Ef().useImperativeHandle(r,e,t)};mn.useLayoutEffect=function(r,e){return Ef().useLayoutEffect(r,e)};mn.useMemo=function(r,e){return Ef().useMemo(r,e)};mn.useReducer=function(r,e,t){return Ef().useReducer(r,e,t)};mn.useRef=function(r){return Ef().useRef(r)};mn.useState=function(r){return Ef().useState(r)};mn.version="17.0.2"});var ht=I((Gar,a7)=>{"use strict";a7.exports=o7()});var h7=I(Pn=>{"use strict";var Bg,ww,tA,Ek;typeof performance=="object"&&typeof performance.now=="function"?(s7=performance,Pn.unstable_now=function(){return s7.now()}):(yk=Date,l7=yk.now(),Pn.unstable_now=function(){return yk.now()-l7});var s7,yk,l7;typeof window=="undefined"||typeof MessageChannel!="function"?(zg=null,_k=null,xk=function(){if(zg!==null)try{var r=Pn.unstable_now();zg(!0,r),zg=null}catch(e){throw setTimeout(xk,0),e}},Bg=function(r){zg!==null?setTimeout(Bg,0,r):(zg=r,setTimeout(xk,0))},ww=function(r,e){_k=setTimeout(r,e)},tA=function(){clearTimeout(_k)},Pn.unstable_shouldYield=function(){return!1},Ek=Pn.unstable_forceFrameRate=function(){}):(u7=window.setTimeout,c7=window.clearTimeout,typeof console!="undefined"&&(f7=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof f7!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),_w=!1,xw=null,JI=-1,wk=5,bk=0,Pn.unstable_shouldYield=function(){return Pn.unstable_now()>=bk},Ek=function(){},Pn.unstable_forceFrameRate=function(r){0>r||125<r?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wk=0<r?Math.floor(1e3/r):5},Sk=new MessageChannel,QI=Sk.port2,Sk.port1.onmessage=function(){if(xw!==null){var r=Pn.unstable_now();bk=r+wk;try{xw(!0,r)?QI.postMessage(null):(_w=!1,xw=null)}catch(e){throw QI.postMessage(null),e}}else _w=!1},Bg=function(r){xw=r,_w||(_w=!0,QI.postMessage(null))},ww=function(r,e){JI=u7(function(){r(Pn.unstable_now())},e)},tA=function(){c7(JI),JI=-1});var zg,_k,xk,u7,c7,f7,_w,xw,JI,wk,bk,Sk,QI;function Tk(r,e){var t=r.length;r.push(e);e:for(;;){var n=t-1>>>1,i=r[n];if(i!==void 0&&0<eA(i,e))r[n]=e,r[t]=i,t=n;else break e}}function Cu(r){return r=r[0],r===void 0?null:r}function rA(r){var e=r[0];if(e!==void 0){var t=r.pop();if(t!==e){r[0]=t;e:for(var n=0,i=r.length;n<i;){var o=2*(n+1)-1,a=r[o],u=o+1,h=r[u];if(a!==void 0&&0>eA(a,t))h!==void 0&&0>eA(h,a)?(r[n]=h,r[u]=t,n=u):(r[n]=a,r[o]=t,n=o);else if(h!==void 0&&0>eA(h,t))r[n]=h,r[u]=t,n=u;else break e}}return e}return null}function eA(r,e){var t=r.sortIndex-e.sortIndex;return t!==0?t:r.id-e.id}var dc=[],sp=[],_Ge=1,Pl=null,da=3,nA=!1,vm=!1,bw=!1;function Ik(r){for(var e=Cu(sp);e!==null;){if(e.callback===null)rA(sp);else if(e.startTime<=r)rA(sp),e.sortIndex=e.expirationTime,Tk(dc,e);else break;e=Cu(sp)}}function Ak(r){if(bw=!1,Ik(r),!vm)if(Cu(dc)!==null)vm=!0,Bg(Ck);else{var e=Cu(sp);e!==null&&ww(Ak,e.startTime-r)}}function Ck(r,e){vm=!1,bw&&(bw=!1,tA()),nA=!0;var t=da;try{for(Ik(e),Pl=Cu(dc);Pl!==null&&(!(Pl.expirationTime>e)||r&&!Pn.unstable_shouldYield());){var n=Pl.callback;if(typeof n=="function"){Pl.callback=null,da=Pl.priorityLevel;var i=n(Pl.expirationTime<=e);e=Pn.unstable_now(),typeof i=="function"?Pl.callback=i:Pl===Cu(dc)&&rA(dc),Ik(e)}else rA(dc);Pl=Cu(dc)}if(Pl!==null)var o=!0;else{var a=Cu(sp);a!==null&&ww(Ak,a.startTime-e),o=!1}return o}finally{Pl=null,da=t,nA=!1}}var xGe=Ek;Pn.unstable_IdlePriority=5;Pn.unstable_ImmediatePriority=1;Pn.unstable_LowPriority=4;Pn.unstable_NormalPriority=3;Pn.unstable_Profiling=null;Pn.unstable_UserBlockingPriority=2;Pn.unstable_cancelCallback=function(r){r.callback=null};Pn.unstable_continueExecution=function(){vm||nA||(vm=!0,Bg(Ck))};Pn.unstable_getCurrentPriorityLevel=function(){return da};Pn.unstable_getFirstCallbackNode=function(){return Cu(dc)};Pn.unstable_next=function(r){switch(da){case 1:case 2:case 3:var e=3;break;default:e=da;}var t=da;da=e;try{return r()}finally{da=t}};Pn.unstable_pauseExecution=function(){};Pn.unstable_requestPaint=xGe;Pn.unstable_runWithPriority=function(r,e){switch(r){case 1:case 2:case 3:case 4:case 5:break;default:r=3;}var t=da;da=r;try{return e()}finally{da=t}};Pn.unstable_scheduleCallback=function(r,e,t){var n=Pn.unstable_now();switch(typeof t=="object"&&t!==null?(t=t.delay,t=typeof t=="number"&&0<t?n+t:n):t=n,r){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3;}return i=t+i,r={id:_Ge++,callback:e,priorityLevel:r,startTime:t,expirationTime:i,sortIndex:-1},t>n?(r.sortIndex=t,Tk(sp,r),Cu(dc)===null&&r===Cu(sp)&&(bw?tA():bw=!0,ww(Ak,t-n))):(r.sortIndex=i,Tk(dc,r),vm||nA||(vm=!0,Bg(Ck))),r};Pn.unstable_wrapCallback=function(r){var e=da;return function(){var t=da;da=e;try{return r.apply(this,arguments)}finally{da=t}}}});var d7=I((Har,p7)=>{"use strict";p7.exports=h7()});var eee=I(kl=>{"use strict";var KA=ht(),yi=fk(),Po=d7();function It(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!KA)throw Error(It(227));var AJ=new Set,Jw={};function Am(r,e){ly(r,e),ly(r+"Capture",e)}function ly(r,e){for(Jw[r]=e,r=0;r<e.length;r++)AJ.add(e[r])}var Rf=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),wGe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m7=Object.prototype.hasOwnProperty,v7={},g7={};function bGe(r){return m7.call(g7,r)?!0:m7.call(v7,r)?!1:wGe.test(r)?g7[r]=!0:(v7[r]=!0,!1)}function SGe(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1;}}function EGe(r,e,t,n){if(e===null||typeof e=="undefined"||SGe(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e;}return!1}function Ha(r,e,t,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Wo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Wo[r]=new Ha(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Wo[e]=new Ha(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Wo[r]=new Ha(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Wo[r]=new Ha(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Wo[r]=new Ha(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Wo[r]=new Ha(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Wo[r]=new Ha(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Wo[r]=new Ha(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Wo[r]=new Ha(r,5,!1,r.toLowerCase(),null,!1,!1)});var kF=/[\-:]([a-z])/g;function FF(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(kF,FF);Wo[e]=new Ha(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(kF,FF);Wo[e]=new Ha(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(kF,FF);Wo[e]=new Ha(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Wo[r]=new Ha(r,1,!1,r.toLowerCase(),null,!1,!1)});Wo.xlinkHref=new Ha("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Wo[r]=new Ha(r,1,!1,r.toLowerCase(),null,!0,!0)});function jF(r,e,t,n){var i=Wo.hasOwnProperty(e)?Wo[e]:null,o=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");o||(EGe(e,t,i,n)&&(t=null),n||i===null?bGe(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Cm=KA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nw=60103,ym=60106,up=60107,zF=60108,zw=60114,BF=60109,UF=60110,XA=60112,Bw=60113,AA=60120,JA=60115,VF=60116,GF=60121,$F=60128,CJ=60129,HF=60130,Xk=60131;typeof Symbol=="function"&&Symbol.for&&(ho=Symbol.for,Nw=ho("react.element"),ym=ho("react.portal"),up=ho("react.fragment"),zF=ho("react.strict_mode"),zw=ho("react.profiler"),BF=ho("react.provider"),UF=ho("react.context"),XA=ho("react.forward_ref"),Bw=ho("react.suspense"),AA=ho("react.suspense_list"),JA=ho("react.memo"),VF=ho("react.lazy"),GF=ho("react.block"),ho("react.scope"),$F=ho("react.opaque.id"),CJ=ho("react.debug_trace_mode"),HF=ho("react.offscreen"),Xk=ho("react.legacy_hidden"));var ho,y7=typeof Symbol=="function"&&Symbol.iterator;function Sw(r){return r===null||typeof r!="object"?null:(r=y7&&r[y7]||r["@@iterator"],typeof r=="function"?r:null)}var Mk;function qw(r){if(Mk===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Mk=e&&e[1]||""}return`
`+Mk+r}var Rk=!1;function iA(r,e){if(!r||Rk)return"";Rk=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e){if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var n=h}Reflect.construct(r,[],e)}else{try{e.call()}catch(h){n=h}r.call(e.prototype)}}else{try{throw Error()}catch(h){n=h}r()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,u=o.length-1;1<=a&&0<=u&&i[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==o[u])return`
`+i[a].replace(" at new "," at ");while(1<=a&&0<=u);break}}}finally{Rk=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?qw(r):""}function TGe(r){switch(r.tag){case 5:return qw(r.type);case 16:return qw("Lazy");case 13:return qw("Suspense");case 19:return qw("SuspenseList");case 0:case 2:case 15:return r=iA(r.type,!1),r;case 11:return r=iA(r.type.render,!1),r;case 22:return r=iA(r.type._render,!1),r;case 1:return r=iA(r.type,!0),r;default:return"";}}function Jg(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case up:return"Fragment";case ym:return"Portal";case zw:return"Profiler";case zF:return"StrictMode";case Bw:return"Suspense";case AA:return"SuspenseList";}if(typeof r=="object")switch(r.$$typeof){case UF:return(r.displayName||"Context")+".Consumer";case BF:return(r._context.displayName||"Context")+".Provider";case XA:var e=r.render;return e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case JA:return Jg(r.type);case GF:return Jg(r._render);case VF:e=r._payload,r=r._init;try{return Jg(r(e))}catch(t){}}return null}function wp(r){switch(typeof r){case"boolean":case"number":case"object":case"string":case"undefined":return r;default:return"";}}function MJ(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IGe(r){var e=MJ(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function oA(r){r._valueTracker||(r._valueTracker=IGe(r))}function RJ(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=MJ(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function CA(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch(e){return r.body}}function Jk(r,e){var t=e.checked;return yi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:r._wrapperState.initialChecked})}function _7(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=wp(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PJ(r,e){e=e.checked,e!=null&&jF(r,"checked",e,!1)}function Qk(r,e){PJ(r,e);var t=wp(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?eF(r,e.type,t):e.hasOwnProperty("defaultValue")&&eF(r,e.type,wp(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function x7(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function eF(r,e,t){(e!=="number"||CA(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}function AGe(r){var e="";return KA.Children.forEach(r,function(t){t!=null&&(e+=t)}),e}function tF(r,e){return r=yi({children:void 0},e),(e=AGe(e.children))&&(r.children=e),r}function Qg(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+wp(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function rF(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(It(91));return yi({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function w7(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(It(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(It(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:wp(t)}}function OJ(r,e){var t=wp(e.value),n=wp(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function b7(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}var nF={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function LJ(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function iF(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?LJ(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var aA,DJ=function(r){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!==nF.svg||"innerHTML"in r)r.innerHTML=e;else{for(aA=aA||document.createElement("div"),aA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=aA.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Qw(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Uw={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CGe=["Webkit","ms","Moz","O"];Object.keys(Uw).forEach(function(r){CGe.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Uw[e]=Uw[r]})});function NJ(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Uw.hasOwnProperty(r)&&Uw[r]?(""+e).trim():e+"px"}function qJ(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=NJ(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var MGe=yi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oF(r,e){if(e){if(MGe[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(It(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(It(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(It(61))}if(e.style!=null&&typeof e.style!="object")throw Error(It(62))}}function aF(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function WF(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var sF=null,ey=null,ty=null;function S7(r){if(r=pb(r)){if(typeof sF!="function")throw Error(It(280));var e=r.stateNode;e&&(e=iC(e),sF(r.stateNode,r.type,e))}}function kJ(r){ey?ty?ty.push(r):ty=[r]:ey=r}function FJ(){if(ey){var r=ey,e=ty;if(ty=ey=null,S7(r),e)for(r=0;r<e.length;r++)S7(e[r])}}function ZF(r,e){return r(e)}function jJ(r,e,t,n,i){return r(e,t,n,i)}function YF(){}var zJ=ZF,_m=!1,Pk=!1;function KF(){(ey!==null||ty!==null)&&(YF(),FJ())}function RGe(r,e,t){if(Pk)return r(e,t);Pk=!0;try{return zJ(r,e,t)}finally{Pk=!1,KF()}}function eb(r,e){var t=r.stateNode;if(t===null)return null;var n=iC(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1;}if(r)return null;if(t&&typeof t!="function")throw Error(It(231,e,typeof t));return t}var lF=!1;if(Rf)try{Ug={},Object.defineProperty(Ug,"passive",{get:function(){lF=!0}}),window.addEventListener("test",Ug,Ug),window.removeEventListener("test",Ug,Ug)}catch(r){lF=!1}var Ug;function PGe(r,e,t,n,i,o,a,u,h){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(v){this.onError(v)}}var Vw=!1,MA=null,RA=!1,uF=null,OGe={onError:function(r){Vw=!0,MA=r}};function LGe(r,e,t,n,i,o,a,u,h){Vw=!1,MA=null,PGe.apply(OGe,arguments)}function DGe(r,e,t,n,i,o,a,u,h){if(LGe.apply(this,arguments),Vw){if(Vw){var d=MA;Vw=!1,MA=null}else throw Error(It(198));RA||(RA=!0,uF=d)}}function Mm(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&1026&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function BJ(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function E7(r){if(Mm(r)!==r)throw Error(It(188))}function NGe(r){var e=r.alternate;if(!e){if(e=Mm(r),e===null)throw Error(It(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return E7(i),r;if(o===n)return E7(i),e;o=o.sibling}throw Error(It(188))}if(t.return!==n.return)t=i,n=o;else{for(var a=!1,u=i.child;u;){if(u===t){a=!0,t=i,n=o;break}if(u===n){a=!0,n=i,t=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===t){a=!0,t=o,n=i;break}if(u===n){a=!0,n=o,t=i;break}u=u.sibling}if(!a)throw Error(It(189))}}if(t.alternate!==n)throw Error(It(190))}if(t.tag!==3)throw Error(It(188));return t.stateNode.current===t?r:e}function UJ(r){if(r=NGe(r),!r)return null;for(var e=r;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===r)break;for(;!e.sibling;){if(!e.return||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function T7(r,e){for(var t=r.alternate;e!==null;){if(e===r||e===t)return!0;e=e.return}return!1}var VJ,XF,GJ,$J,cF=!1,mc=[],pp=null,dp=null,mp=null,tb=new Map,rb=new Map,Ew=[],I7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fF(r,e,t,n,i){return{blockedOn:r,domEventName:e,eventSystemFlags:t|16,nativeEvent:i,targetContainers:[n]}}function A7(r,e){switch(r){case"focusin":case"focusout":pp=null;break;case"dragenter":case"dragleave":dp=null;break;case"mouseover":case"mouseout":mp=null;break;case"pointerover":case"pointerout":tb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rb.delete(e.pointerId);}}function Tw(r,e,t,n,i,o){return r===null||r.nativeEvent!==o?(r=fF(e,t,n,i,o),e!==null&&(e=pb(e),e!==null&&XF(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function qGe(r,e,t,n,i){switch(e){case"focusin":return pp=Tw(pp,r,e,t,n,i),!0;case"dragenter":return dp=Tw(dp,r,e,t,n,i),!0;case"mouseover":return mp=Tw(mp,r,e,t,n,i),!0;case"pointerover":var o=i.pointerId;return tb.set(o,Tw(tb.get(o)||null,r,e,t,n,i)),!0;case"gotpointercapture":return o=i.pointerId,rb.set(o,Tw(rb.get(o)||null,r,e,t,n,i)),!0;}return!1}function kGe(r){var e=xm(r.target);if(e!==null){var t=Mm(e);if(t!==null){if(e=t.tag,e===13){if(e=BJ(t),e!==null){r.blockedOn=e,$J(r.lanePriority,function(){Po.unstable_runWithPriority(r.priority,function(){GJ(t)})});return}}else if(e===3&&t.stateNode.hydrate){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function gA(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=tj(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t!==null)return e=pb(t),e!==null&&XF(e),r.blockedOn=t,!1;e.shift()}return!0}function C7(r,e,t){gA(r)&&t.delete(e)}function FGe(){for(cF=!1;0<mc.length;){var r=mc[0];if(r.blockedOn!==null){r=pb(r.blockedOn),r!==null&&VJ(r);break}for(var e=r.targetContainers;0<e.length;){var t=tj(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t!==null){r.blockedOn=t;break}e.shift()}r.blockedOn===null&&mc.shift()}pp!==null&&gA(pp)&&(pp=null),dp!==null&&gA(dp)&&(dp=null),mp!==null&&gA(mp)&&(mp=null),tb.forEach(C7),rb.forEach(C7)}function Iw(r,e){r.blockedOn===e&&(r.blockedOn=null,cF||(cF=!0,Po.unstable_scheduleCallback(Po.unstable_NormalPriority,FGe)))}function HJ(r){function e(i){return Iw(i,r)}if(0<mc.length){Iw(mc[0],r);for(var t=1;t<mc.length;t++){var n=mc[t];n.blockedOn===r&&(n.blockedOn=null)}}for(pp!==null&&Iw(pp,r),dp!==null&&Iw(dp,r),mp!==null&&Iw(mp,r),tb.forEach(e),rb.forEach(e),t=0;t<Ew.length;t++)n=Ew[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Ew.length&&(t=Ew[0],t.blockedOn===null);)kGe(t),t.blockedOn===null&&Ew.shift()}function sA(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Hg={animationend:sA("Animation","AnimationEnd"),animationiteration:sA("Animation","AnimationIteration"),animationstart:sA("Animation","AnimationStart"),transitionend:sA("Transition","TransitionEnd")},Ok={},WJ={};Rf&&(WJ=document.createElement("div").style,"AnimationEvent"in window||(delete Hg.animationend.animation,delete Hg.animationiteration.animation,delete Hg.animationstart.animation),"TransitionEvent"in window||delete Hg.transitionend.transition);function QA(r){if(Ok[r])return Ok[r];if(!Hg[r])return r;var e=Hg[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in WJ)return Ok[r]=e[t];return r}var ZJ=QA("animationend"),YJ=QA("animationiteration"),KJ=QA("animationstart"),XJ=QA("transitionend"),JJ=new Map,JF=new Map,jGe=["abort","abort",ZJ,"animationEnd",YJ,"animationIteration",KJ,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",XJ,"transitionEnd","waiting","waiting"];function QF(r,e){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];i="on"+(i[0].toUpperCase()+i.slice(1)),JF.set(n,e),JJ.set(n,i),Am(i,[n])}}var zGe=Po.unstable_now;zGe();var ri=8;function Gg(r){if(1&r)return ri=15,1;if(2&r)return ri=14,2;if(4&r)return ri=13,4;var e=24&r;return e!==0?(ri=12,e):r&32?(ri=11,32):(e=192&r,e!==0?(ri=10,e):r&256?(ri=9,256):(e=3584&r,e!==0?(ri=8,e):r&4096?(ri=7,4096):(e=4186112&r,e!==0?(ri=6,e):(e=62914560&r,e!==0?(ri=5,e):r&67108864?(ri=4,67108864):r&134217728?(ri=3,134217728):(e=805306368&r,e!==0?(ri=2,e):1073741824&r?(ri=1,1073741824):(ri=8,r))))))}function BGe(r){switch(r){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function UGe(r){switch(r){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(It(358,r));}}function nb(r,e){var t=r.pendingLanes;if(t===0)return ri=0;var n=0,i=0,o=r.expiredLanes,a=r.suspendedLanes,u=r.pingedLanes;if(o!==0)n=o,i=ri=15;else if(o=t&134217727,o!==0){var h=o&~a;h!==0?(n=Gg(h),i=ri):(u&=o,u!==0&&(n=Gg(u),i=ri))}else o=t&~a,o!==0?(n=Gg(o),i=ri):u!==0&&(n=Gg(u),i=ri);if(n===0)return 0;if(n=31-bp(n),n=t&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&!(e&a)){if(Gg(e),i<=ri)return e;ri=i}if(e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-bp(e),i=1<<t,n|=r[t],e&=~i;return n}function QJ(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function PA(r,e){switch(r){case 15:return 1;case 14:return 2;case 12:return r=$g(24&~e),r===0?PA(10,e):r;case 10:return r=$g(192&~e),r===0?PA(8,e):r;case 8:return r=$g(3584&~e),r===0&&(r=$g(4186112&~e),r===0&&(r=512)),r;case 2:return e=$g(805306368&~e),e===0&&(e=268435456),e;}throw Error(It(358,r))}function $g(r){return r&-r}function Lk(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function eC(r,e,t){r.pendingLanes|=e;var n=e-1;r.suspendedLanes&=n,r.pingedLanes&=n,r=r.eventTimes,e=31-bp(e),r[e]=t}var bp=Math.clz32?Math.clz32:$Ge,VGe=Math.log,GGe=Math.LN2;function $Ge(r){return r===0?32:31-(VGe(r)/GGe|0)|0}var HGe=Po.unstable_UserBlockingPriority,WGe=Po.unstable_runWithPriority,yA=!0;function ZGe(r,e,t,n){_m||YF();var i=ej,o=_m;_m=!0;try{jJ(i,r,e,t,n)}finally{(_m=o)||KF()}}function YGe(r,e,t,n){WGe(HGe,ej.bind(null,r,e,t,n))}function ej(r,e,t,n){if(yA){var i;if((i=(e&4)===0)&&0<mc.length&&-1<I7.indexOf(r))r=fF(null,r,e,t,n),mc.push(r);else{var o=tj(r,e,t,n);if(o===null)i&&A7(r,n);else{if(i){if(-1<I7.indexOf(r)){r=fF(o,r,e,t,n),mc.push(r);return}if(qGe(o,r,e,t,n))return;A7(r,n)}hQ(r,e,n,null,t)}}}}function tj(r,e,t,n){var i=WF(n);if(i=xm(i),i!==null){var o=Mm(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=BJ(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return hQ(r,e,n,i,t),null}var cp=null,rj=null,_A=null;function eQ(){if(_A)return _A;var r,e=rj,t=e.length,n,i="value"in cp?cp.value:cp.textContent,o=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===i[o-n];n++);return _A=i.slice(r,1<n?1-n:void 0)}function xA(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function lA(){return!0}function M7(){return!1}function al(r){function e(t,n,i,o,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in r)r.hasOwnProperty(u)&&(t=r[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lA:M7,this.isPropagationStopped=M7,this}return yi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=lA)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=lA)},persist:function(){},isPersistent:lA}),e}var hy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nj=al(hy),hb=yi({},hy,{view:0,detail:0}),KGe=al(hb),Dk,Nk,Aw,tC=yi({},hb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ij,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Aw&&(Aw&&r.type==="mousemove"?(Dk=r.screenX-Aw.screenX,Nk=r.screenY-Aw.screenY):Nk=Dk=0,Aw=r),Dk)},movementY:function(r){return"movementY"in r?r.movementY:Nk}}),R7=al(tC),XGe=yi({},tC,{dataTransfer:0}),JGe=al(XGe),QGe=yi({},hb,{relatedTarget:0}),qk=al(QGe),e$e=yi({},hy,{animationName:0,elapsedTime:0,pseudoElement:0}),t$e=al(e$e),r$e=yi({},hy,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),n$e=al(r$e),i$e=yi({},hy,{data:0}),P7=al(i$e),o$e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a$e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s$e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l$e(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=s$e[r])?!!e[r]:!1}function ij(){return l$e}var u$e=yi({},hb,{key:function(r){if(r.key){var e=o$e[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=xA(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?a$e[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ij,charCode:function(r){return r.type==="keypress"?xA(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?xA(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),c$e=al(u$e),f$e=yi({},tC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O7=al(f$e),h$e=yi({},hb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ij}),p$e=al(h$e),d$e=yi({},hy,{propertyName:0,elapsedTime:0,pseudoElement:0}),m$e=al(d$e),v$e=yi({},tC,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),g$e=al(v$e),y$e=[9,13,27,32],oj=Rf&&"CompositionEvent"in window,Gw=null;Rf&&"documentMode"in document&&(Gw=document.documentMode);var _$e=Rf&&"TextEvent"in window&&!Gw,tQ=Rf&&(!oj||Gw&&8<Gw&&11>=Gw),L7=" ",D7=!1;function rQ(r,e){switch(r){case"keyup":return y$e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function nQ(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Wg=!1;function x$e(r,e){switch(r){case"compositionend":return nQ(e);case"keypress":return e.which!==32?null:(D7=!0,L7);case"textInput":return r=e.data,r===L7&&D7?null:r;default:return null;}}function w$e(r,e){if(Wg)return r==="compositionend"||!oj&&rQ(r,e)?(r=eQ(),_A=rj=cp=null,Wg=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tQ&&e.locale!=="ko"?null:e.data;default:return null;}}var b$e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N7(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!b$e[r.type]:e==="textarea"}function iQ(r,e,t,n){kJ(n),e=OA(e,"onChange"),0<e.length&&(t=new nj("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var $w=null,ib=null;function S$e(r){uQ(r,0)}function rC(r){var e=Yg(r);if(RJ(e))return r}function E$e(r,e){if(r==="change")return e}var oQ=!1;Rf&&(Rf?(cA="oninput"in document,cA||(kk=document.createElement("div"),kk.setAttribute("oninput","return;"),cA=typeof kk.oninput=="function"),uA=cA):uA=!1,oQ=uA&&(!document.documentMode||9<document.documentMode));var uA,cA,kk;function q7(){$w&&($w.detachEvent("onpropertychange",aQ),ib=$w=null)}function aQ(r){if(r.propertyName==="value"&&rC(ib)){var e=[];if(iQ(e,ib,r,WF(r)),r=S$e,_m)r(e);else{_m=!0;try{ZF(r,e)}finally{_m=!1,KF()}}}}function T$e(r,e,t){r==="focusin"?(q7(),$w=e,ib=t,$w.attachEvent("onpropertychange",aQ)):r==="focusout"&&q7()}function I$e(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return rC(ib)}function A$e(r,e){if(r==="click")return rC(e)}function C$e(r,e){if(r==="input"||r==="change")return rC(e)}function M$e(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Ol=typeof Object.is=="function"?Object.is:M$e,R$e=Object.prototype.hasOwnProperty;function ob(r,e){if(Ol(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++)if(!R$e.call(e,t[n])||!Ol(r[t[n]],e[t[n]]))return!1;return!0}function k7(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function F7(r,e){var t=k7(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=k7(t)}}function sQ(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?sQ(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function j7(){for(var r=window,e=CA();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch(n){t=!1}if(t)r=e.contentWindow;else break;e=CA(r.document)}return e}function hF(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}var P$e=Rf&&"documentMode"in document&&11>=document.documentMode,Zg=null,pF=null,Hw=null,dF=!1;function z7(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;dF||Zg==null||Zg!==CA(n)||(n=Zg,"selectionStart"in n&&hF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hw&&ob(Hw,n)||(Hw=n,n=OA(pF,"onSelect"),0<n.length&&(e=new nj("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Zg)))}QF("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);QF("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);QF(jGe,2);for(Fk="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),fA=0;fA<Fk.length;fA++)JF.set(Fk[fA],0);var Fk,fA;ly("onMouseEnter",["mouseout","mouseover"]);ly("onMouseLeave",["mouseout","mouseover"]);ly("onPointerEnter",["pointerout","pointerover"]);ly("onPointerLeave",["pointerout","pointerover"]);Am("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Am("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Am("onBeforeInput",["compositionend","keypress","textInput","paste"]);Am("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Am("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Am("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(kw));function B7(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,DGe(n,e,void 0,r),r.currentTarget=null}function uQ(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var u=n[a],h=u.instance,d=u.currentTarget;if(u=u.listener,h!==o&&i.isPropagationStopped())break e;B7(i,u,d),o=h}else for(a=0;a<n.length;a++){if(u=n[a],h=u.instance,d=u.currentTarget,u=u.listener,h!==o&&i.isPropagationStopped())break e;B7(i,u,d),o=h}}}if(RA)throw r=uF,RA=!1,uF=null,r}function ui(r,e){var t=dQ(e),n=r+"__bubble";t.has(n)||(fQ(e,r,2,!1),t.add(n))}var U7="_reactListening"+Math.random().toString(36).slice(2);function cQ(r){r[U7]||(r[U7]=!0,AJ.forEach(function(e){lQ.has(e)||V7(e,!1,r,null),V7(e,!0,r,null)}))}function V7(r,e,t,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=t;if(r==="selectionchange"&&t.nodeType!==9&&(o=t.ownerDocument),n!==null&&!e&&lQ.has(r)){if(r!=="scroll")return;i|=2,o=n}var a=dQ(o),u=r+"__"+(e?"capture":"bubble");a.has(u)||(e&&(i|=4),fQ(o,r,i,e),a.add(u))}function fQ(r,e,t,n){var i=JF.get(e);switch(i===void 0?2:i){case 0:i=ZGe;break;case 1:i=YGe;break;default:i=ej;}t=i.bind(null,e,t,r),i=void 0,!lF||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function hQ(r,e,t,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var u=n.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;u!==null;){if(a=xm(u),a===null)return;if(h=a.tag,h===5||h===6){n=o=a;continue e}u=u.parentNode}}n=n.return}RGe(function(){var d=o,v=WF(t),x=[];e:{var S=JJ.get(r);if(S!==void 0){var A=nj,L=r;switch(r){case"keypress":if(xA(t)===0)break e;case"keydown":case"keyup":A=c$e;break;case"focusin":L="focus",A=qk;break;case"focusout":L="blur",A=qk;break;case"beforeblur":case"afterblur":A=qk;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=R7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=JGe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=p$e;break;case ZJ:case YJ:case KJ:A=t$e;break;case XJ:A=m$e;break;case"scroll":A=KGe;break;case"wheel":A=g$e;break;case"copy":case"cut":case"paste":A=n$e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=O7;}var q=(e&4)!==0,R=!q&&r==="scroll",D=q?S!==null?S+"Capture":null:S;q=[];for(var k=d,j;k!==null;){j=k;var $=j.stateNode;if(j.tag===5&&$!==null&&(j=$,D!==null&&($=eb(k,D),$!=null&&q.push(ab(k,$,j)))),R)break;k=k.return}0<q.length&&(S=new A(S,L,null,t,v),x.push({event:S,listeners:q}))}}if(!(e&7)){e:{if(S=r==="mouseover"||r==="pointerover",A=r==="mouseout"||r==="pointerout",S&&!(e&16)&&(L=t.relatedTarget||t.fromElement)&&(xm(L)||L[py]))break e;if((A||S)&&(S=v.window===v?v:(S=v.ownerDocument)?S.defaultView||S.parentWindow:window,A?(L=t.relatedTarget||t.toElement,A=d,L=L?xm(L):null,L!==null&&(R=Mm(L),L!==R||L.tag!==5&&L.tag!==6)&&(L=null)):(A=null,L=d),A!==L)){if(q=R7,$="onMouseLeave",D="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(q=O7,$="onPointerLeave",D="onPointerEnter",k="pointer"),R=A==null?S:Yg(A),j=L==null?S:Yg(L),S=new q($,k+"leave",A,t,v),S.target=R,S.relatedTarget=j,$=null,xm(v)===d&&(q=new q(D,k+"enter",L,t,v),q.target=j,q.relatedTarget=R,$=q),R=$,A&&L)t:{for(q=A,D=L,k=0,j=q;j;j=Vg(j))k++;for(j=0,$=D;$;$=Vg($))j++;for(;0<k-j;)q=Vg(q),k--;for(;0<j-k;)D=Vg(D),j--;for(;k--;){if(q===D||D!==null&&q===D.alternate)break t;q=Vg(q),D=Vg(D)}q=null}else q=null;A!==null&&G7(x,S,A,q,!1),L!==null&&R!==null&&G7(x,R,L,q,!0)}}e:{if(S=d?Yg(d):window,A=S.nodeName&&S.nodeName.toLowerCase(),A==="select"||A==="input"&&S.type==="file")var ee=E$e;else if(N7(S)){if(oQ)ee=C$e;else{ee=I$e;var J=T$e}}else(A=S.nodeName)&&A.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(ee=A$e);if(ee&&(ee=ee(r,d))){iQ(x,ee,t,v);break e}J&&J(r,S,d),r==="focusout"&&(J=S._wrapperState)&&J.controlled&&S.type==="number"&&eF(S,"number",S.value)}switch(J=d?Yg(d):window,r){case"focusin":(N7(J)||J.contentEditable==="true")&&(Zg=J,pF=d,Hw=null);break;case"focusout":Hw=pF=Zg=null;break;case"mousedown":dF=!0;break;case"contextmenu":case"mouseup":case"dragend":dF=!1,z7(x,t,v);break;case"selectionchange":if(P$e)break;case"keydown":case"keyup":z7(x,t,v);}var ie;if(oj)e:{switch(r){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e;}ue=void 0}else Wg?rQ(r,t)&&(ue="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(ue="onCompositionStart");ue&&(tQ&&t.locale!=="ko"&&(Wg||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Wg&&(ie=eQ()):(cp=v,rj="value"in cp?cp.value:cp.textContent,Wg=!0)),J=OA(d,ue),0<J.length&&(ue=new P7(ue,r,null,t,v),x.push({event:ue,listeners:J}),ie?ue.data=ie:(ie=nQ(t),ie!==null&&(ue.data=ie)))),(ie=_$e?x$e(r,t):w$e(r,t))&&(d=OA(d,"onBeforeInput"),0<d.length&&(v=new P7("onBeforeInput","beforeinput",null,t,v),x.push({event:v,listeners:d}),v.data=ie))}uQ(x,e)})}function ab(r,e,t){return{instance:r,listener:e,currentTarget:t}}function OA(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=eb(r,t),o!=null&&n.unshift(ab(r,o,i)),o=eb(r,e),o!=null&&n.push(ab(r,o,i))),r=r.return}return n}function Vg(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function G7(r,e,t,n,i){for(var o=e._reactName,a=[];t!==null&&t!==n;){var u=t,h=u.alternate,d=u.stateNode;if(h!==null&&h===n)break;u.tag===5&&d!==null&&(u=d,i?(h=eb(t,o),h!=null&&a.unshift(ab(t,h,u))):i||(h=eb(t,o),h!=null&&a.push(ab(t,h,u)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}function LA(){}var jk=null,zk=null;function pQ(r,e){switch(r){case"button":case"input":case"select":case"textarea":return!!e.autoFocus;}return!1}function mF(r,e){return r==="textarea"||r==="option"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $7=typeof setTimeout=="function"?setTimeout:void 0,O$e=typeof clearTimeout=="function"?clearTimeout:void 0;function aj(r){r.nodeType===1?r.textContent="":r.nodeType===9&&(r=r.body,r!=null&&(r.textContent=""))}function ry(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break}return r}function H7(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var Bk=0;function L$e(r){return{$$typeof:$F,toString:r,valueOf:r}}var nC=Math.random().toString(36).slice(2),fp="__reactFiber$"+nC,DA="__reactProps$"+nC,py="__reactContainer$"+nC,W7="__reactEvents$"+nC;function xm(r){var e=r[fp];if(e)return e;for(var t=r.parentNode;t;){if(e=t[py]||t[fp]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=H7(r);r!==null;){if(t=r[fp])return t;r=H7(r)}return e}r=t,t=r.parentNode}return null}function pb(r){return r=r[fp]||r[py],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Yg(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(It(33))}function iC(r){return r[DA]||null}function dQ(r){var e=r[W7];return e===void 0&&(e=r[W7]=new Set),e}var vF=[],Kg=-1;function Ip(r){return{current:r}}function ci(r){0>Kg||(r.current=vF[Kg],vF[Kg]=null,Kg--)}function Fi(r,e){Kg++,vF[Kg]=r.current,r.current=e}var Sp={},ya=Ip(Sp),ys=Ip(!1),Em=Sp;function uy(r,e){var t=r.type.contextTypes;if(!t)return Sp;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function _s(r){return r=r.childContextTypes,r!=null}function NA(){ci(ys),ci(ya)}function Z7(r,e,t){if(ya.current!==Sp)throw Error(It(168));Fi(ya,e),Fi(ys,t)}function mQ(r,e,t){var n=r.stateNode;if(r=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in r))throw Error(It(108,Jg(e)||"Unknown",i));return yi({},t,n)}function wA(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Sp,Em=ya.current,Fi(ya,r),Fi(ys,ys.current),!0}function Y7(r,e,t){var n=r.stateNode;if(!n)throw Error(It(169));t?(r=mQ(r,e,Em),n.__reactInternalMemoizedMergedChildContext=r,ci(ys),ci(ya),Fi(ya,r)):ci(ys),Fi(ys,t)}var sj=null,Sm=null,D$e=Po.unstable_runWithPriority,lj=Po.unstable_scheduleCallback,gF=Po.unstable_cancelCallback,N$e=Po.unstable_shouldYield,K7=Po.unstable_requestPaint,yF=Po.unstable_now,q$e=Po.unstable_getCurrentPriorityLevel,oC=Po.unstable_ImmediatePriority,vQ=Po.unstable_UserBlockingPriority,gQ=Po.unstable_NormalPriority,yQ=Po.unstable_LowPriority,_Q=Po.unstable_IdlePriority,Uk={},k$e=K7!==void 0?K7:function(){},Tf=null,bA=null,Vk=!1,X7=yF(),va=1e4>X7?yF:function(){return yF()-X7};function cy(){switch(q$e()){case oC:return 99;case vQ:return 98;case gQ:return 97;case yQ:return 96;case _Q:return 95;default:throw Error(It(332));}}function xQ(r){switch(r){case 99:return oC;case 98:return vQ;case 97:return gQ;case 96:return yQ;case 95:return _Q;default:throw Error(It(332));}}function Tm(r,e){return r=xQ(r),D$e(r,e)}function sb(r,e,t){return r=xQ(r),lj(r,e,t)}function xc(){if(bA!==null){var r=bA;bA=null,gF(r)}wQ()}function wQ(){if(!Vk&&Tf!==null){Vk=!0;var r=0;try{var e=Tf;Tm(99,function(){for(;r<e.length;r++){var t=e[r];do t=t(!0);while(t!==null)}}),Tf=null}catch(t){throw Tf!==null&&(Tf=Tf.slice(r+1)),lj(oC,xc),t}finally{Vk=!1}}}var F$e=Cm.ReactCurrentBatchConfig;function Mu(r,e){if(r&&r.defaultProps){e=yi({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var qA=Ip(null),kA=null,Xg=null,FA=null;function uj(){FA=Xg=kA=null}function cj(r){var e=qA.current;ci(qA),r.type._context._currentValue=e}function bQ(r,e){for(;r!==null;){var t=r.alternate;if((r.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else r.childLanes|=e,t!==null&&(t.childLanes|=e);r=r.return}}function ny(r,e){kA=r,FA=Xg=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(Ru=!0),r.firstContext=null)}function Nl(r,e){if(FA!==r&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(FA=r,e=1073741823),e={context:r,observedBits:e,next:null},Xg===null){if(kA===null)throw Error(It(308));Xg=e,kA.dependencies={lanes:0,firstContext:e,responders:null}}else Xg=Xg.next=e;return r._currentValue}var lp=!1;function fj(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function SQ(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function vp(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function gp(r,e){if(r=r.updateQueue,r!==null){r=r.shared;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}}function J7(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=a:o=o.next=a,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function lb(r,e,t,n){var i=r.updateQueue;lp=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var h=u,d=h.next;h.next=null,a===null?o=d:a.next=d,a=h;var v=r.alternate;if(v!==null){v=v.updateQueue;var x=v.lastBaseUpdate;x!==a&&(x===null?v.firstBaseUpdate=d:x.next=d,v.lastBaseUpdate=h)}}if(o!==null){x=i.baseState,a=0,v=d=h=null;do{u=o.lane;var S=o.eventTime;if((n&u)===u){v!==null&&(v=v.next={eventTime:S,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var A=r,L=o;switch(u=e,S=t,L.tag){case 1:if(A=L.payload,typeof A=="function"){x=A.call(S,x,u);break e}x=A;break e;case 3:A.flags=A.flags&-4097|64;case 0:if(A=L.payload,u=typeof A=="function"?A.call(S,x,u):A,u==null)break e;x=yi({},x,u);break e;case 2:lp=!0;}}o.callback!==null&&(r.flags|=32,u=i.effects,u===null?i.effects=[o]:u.push(o))}else S={eventTime:S,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},v===null?(d=v=S,h=x):v=v.next=S,a|=u;if(o=o.next,o===null){if(u=i.shared.pending,u===null)break;o=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}while(!0);v===null&&(h=x),i.baseState=h,i.firstBaseUpdate=d,i.lastBaseUpdate=v,mb|=a,r.lanes=a,r.memoizedState=x}}function Q7(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(It(191,i));i.call(n)}}}var EQ=new KA.Component().refs;function jA(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:yi({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var aC={isMounted:function(r){return(r=r._reactInternals)?Mm(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=ol(),i=yp(r),o=vp(n,i);o.payload=e,t!=null&&(o.callback=t),gp(r,o),_p(r,i,n)},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=ol(),i=yp(r),o=vp(n,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),gp(r,o),_p(r,i,n)},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=ol(),n=yp(r),i=vp(t,n);i.tag=2,e!=null&&(i.callback=e),gp(r,i),_p(r,n,t)}};function eJ(r,e,t,n,i,o,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!ob(t,n)||!ob(i,o):!0}function TQ(r,e,t){var n=!1,i=Sp,o=e.contextType;return typeof o=="object"&&o!==null?o=Nl(o):(i=_s(e)?Em:ya.current,n=e.contextTypes,o=(n=n!=null)?uy(r,i):Sp),e=new e(t,o),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=aC,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=o),e}function tJ(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&aC.enqueueReplaceState(e,e.state,null)}function _F(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=EQ,fj(r);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Nl(o):(o=_s(e)?Em:ya.current,i.context=uy(r,o)),lb(r,t,i,n),i.state=r.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(jA(r,e,o,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&aC.enqueueReplaceState(i,i.state,null),lb(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4)}var hA=Array.isArray;function Cw(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(It(309));var n=t.stateNode}if(!n)throw Error(It(147,r));var i=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=n.refs;a===EQ&&(a=n.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof r!="string")throw Error(It(284));if(!t._owner)throw Error(It(290,r))}return r}function pA(r,e){if(r.type!=="textarea")throw Error(It(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function IQ(r){function e(R,D){if(r){var k=R.lastEffect;k!==null?(k.nextEffect=D,R.lastEffect=D):R.firstEffect=R.lastEffect=D,D.nextEffect=null,D.flags=8}}function t(R,D){if(!r)return null;for(;D!==null;)e(R,D),D=D.sibling;return null}function n(R,D){for(R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function i(R,D){return R=Tp(R,D),R.index=0,R.sibling=null,R}function o(R,D,k){return R.index=k,r?(k=R.alternate,k!==null?(k=k.index,k<D?(R.flags=2,D):k):(R.flags=2,D)):D}function a(R){return r&&R.alternate===null&&(R.flags=2),R}function u(R,D,k,j){return D===null||D.tag!==6?(D=Zk(k,R.mode,j),D.return=R,D):(D=i(D,k),D.return=R,D)}function h(R,D,k,j){return D!==null&&D.elementType===k.type?(j=i(D,k.props),j.ref=Cw(R,D,k),j.return=R,j):(j=IA(k.type,k.key,k.props,null,R.mode,j),j.ref=Cw(R,D,k),j.return=R,j)}function d(R,D,k,j){return D===null||D.tag!==4||D.stateNode.containerInfo!==k.containerInfo||D.stateNode.implementation!==k.implementation?(D=Yk(k,R.mode,j),D.return=R,D):(D=i(D,k.children||[]),D.return=R,D)}function v(R,D,k,j,$){return D===null||D.tag!==7?(D=sy(k,R.mode,j,$),D.return=R,D):(D=i(D,k),D.return=R,D)}function x(R,D,k){if(typeof D=="string"||typeof D=="number")return D=Zk(""+D,R.mode,k),D.return=R,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Nw:return k=IA(D.type,D.key,D.props,null,R.mode,k),k.ref=Cw(R,null,D),k.return=R,k;case ym:return D=Yk(D,R.mode,k),D.return=R,D;}if(hA(D)||Sw(D))return D=sy(D,R.mode,k,null),D.return=R,D;pA(R,D)}return null}function S(R,D,k,j){var $=D!==null?D.key:null;if(typeof k=="string"||typeof k=="number")return $!==null?null:u(R,D,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Nw:return k.key===$?k.type===up?v(R,D,k.props.children,j,$):h(R,D,k,j):null;case ym:return k.key===$?d(R,D,k,j):null;}if(hA(k)||Sw(k))return $!==null?null:v(R,D,k,j,null);pA(R,k)}return null}function A(R,D,k,j,$){if(typeof j=="string"||typeof j=="number")return R=R.get(k)||null,u(D,R,""+j,$);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Nw:return R=R.get(j.key===null?k:j.key)||null,j.type===up?v(D,R,j.props.children,$,j.key):h(D,R,j,$);case ym:return R=R.get(j.key===null?k:j.key)||null,d(D,R,j,$);}if(hA(j)||Sw(j))return R=R.get(k)||null,v(D,R,j,$,null);pA(D,j)}return null}function L(R,D,k,j){for(var $=null,ee=null,J=D,ie=D=0,ue=null;J!==null&&ie<k.length;ie++){J.index>ie?(ue=J,J=null):ue=J.sibling;var le=S(R,J,k[ie],j);if(le===null){J===null&&(J=ue);break}r&&J&&le.alternate===null&&e(R,J),D=o(le,D,ie),ee===null?$=le:ee.sibling=le,ee=le,J=ue}if(ie===k.length)return t(R,J),$;if(J===null){for(;ie<k.length;ie++)J=x(R,k[ie],j),J!==null&&(D=o(J,D,ie),ee===null?$=J:ee.sibling=J,ee=J);return $}for(J=n(R,J);ie<k.length;ie++)ue=A(J,R,ie,k[ie],j),ue!==null&&(r&&ue.alternate!==null&&J.delete(ue.key===null?ie:ue.key),D=o(ue,D,ie),ee===null?$=ue:ee.sibling=ue,ee=ue);return r&&J.forEach(function(_e){return e(R,_e)}),$}function q(R,D,k,j){var $=Sw(k);if(typeof $!="function")throw Error(It(150));if(k=$.call(k),k==null)throw Error(It(151));for(var ee=$=null,J=D,ie=D=0,ue=null,le=k.next();J!==null&&!le.done;ie++,le=k.next()){J.index>ie?(ue=J,J=null):ue=J.sibling;var _e=S(R,J,le.value,j);if(_e===null){J===null&&(J=ue);break}r&&J&&_e.alternate===null&&e(R,J),D=o(_e,D,ie),ee===null?$=_e:ee.sibling=_e,ee=_e,J=ue}if(le.done)return t(R,J),$;if(J===null){for(;!le.done;ie++,le=k.next())le=x(R,le.value,j),le!==null&&(D=o(le,D,ie),ee===null?$=le:ee.sibling=le,ee=le);return $}for(J=n(R,J);!le.done;ie++,le=k.next())le=A(J,R,ie,le.value,j),le!==null&&(r&&le.alternate!==null&&J.delete(le.key===null?ie:le.key),D=o(le,D,ie),ee===null?$=le:ee.sibling=le,ee=le);return r&&J.forEach(function(Re){return e(R,Re)}),$}return function(R,D,k,j){var $=typeof k=="object"&&k!==null&&k.type===up&&k.key===null;$&&(k=k.props.children);var ee=typeof k=="object"&&k!==null;if(ee)switch(k.$$typeof){case Nw:e:{for(ee=k.key,$=D;$!==null;){if($.key===ee){switch($.tag){case 7:if(k.type===up){t(R,$.sibling),D=i($,k.props.children),D.return=R,R=D;break e}break;default:if($.elementType===k.type){t(R,$.sibling),D=i($,k.props),D.ref=Cw(R,$,k),D.return=R,R=D;break e}}t(R,$);break}else e(R,$);$=$.sibling}k.type===up?(D=sy(k.props.children,R.mode,j,k.key),D.return=R,R=D):(j=IA(k.type,k.key,k.props,null,R.mode,j),j.ref=Cw(R,D,k),j.return=R,R=j)}return a(R);case ym:e:{for($=k.key;D!==null;){if(D.key===$){if(D.tag===4&&D.stateNode.containerInfo===k.containerInfo&&D.stateNode.implementation===k.implementation){t(R,D.sibling),D=i(D,k.children||[]),D.return=R,R=D;break e}else{t(R,D);break}}else e(R,D);D=D.sibling}D=Yk(k,R.mode,j),D.return=R,R=D}return a(R);}if(typeof k=="string"||typeof k=="number")return k=""+k,D!==null&&D.tag===6?(t(R,D.sibling),D=i(D,k),D.return=R,R=D):(t(R,D),D=Zk(k,R.mode,j),D.return=R,R=D),a(R);if(hA(k))return L(R,D,k,j);if(Sw(k))return q(R,D,k,j);if(ee&&pA(R,k),typeof k=="undefined"&&!$)switch(R.tag){case 1:case 22:case 0:case 11:case 15:throw Error(It(152,Jg(R.type)||"Component"));}return t(R,D)}}var zA=IQ(!0),AQ=IQ(!1),db={},yc=Ip(db),ub=Ip(db),cb=Ip(db);function wm(r){if(r===db)throw Error(It(174));return r}function xF(r,e){switch(Fi(cb,e),Fi(ub,r),Fi(yc,db),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iF(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=iF(e,r);}ci(yc),Fi(yc,e)}function fy(){ci(yc),ci(ub),ci(cb)}function rJ(r){wm(cb.current);var e=wm(yc.current),t=iF(e,r.type);e!==t&&(Fi(ub,r),Fi(yc,t))}function hj(r){ub.current===r&&(ci(yc),ci(ub))}var ki=Ip(0);function BA(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Af=null,hp=null,_c=!1;function CQ(r,e){var t=Ll(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=r,t.flags=8,r.lastEffect!==null?(r.lastEffect.nextEffect=t,r.lastEffect=t):r.firstEffect=r.lastEffect=t}function nJ(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,!0):!1;case 13:return!1;default:return!1;}}function wF(r){if(_c){var e=hp;if(e){var t=e;if(!nJ(r,e)){if(e=ry(t.nextSibling),!e||!nJ(r,e)){r.flags=r.flags&-1025|2,_c=!1,Af=r;return}CQ(Af,t)}Af=r,hp=ry(e.firstChild)}else r.flags=r.flags&-1025|2,_c=!1,Af=r}}function iJ(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Af=r}function dA(r){if(r!==Af)return!1;if(!_c)return iJ(r),_c=!0,!1;var e=r.type;if(r.tag!==5||e!=="head"&&e!=="body"&&!mF(e,r.memoizedProps))for(e=hp;e;)CQ(r,e),e=ry(e.nextSibling);if(iJ(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(It(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){hp=ry(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}hp=null}}else hp=Af?ry(r.stateNode.nextSibling):null;return!0}function Gk(){hp=Af=null,_c=!1}var iy=[];function pj(){for(var r=0;r<iy.length;r++)iy[r]._workInProgressVersionPrimary=null;iy.length=0}var Ww=Cm.ReactCurrentDispatcher,Dl=Cm.ReactCurrentBatchConfig,fb=0,Vi=null,ma=null,$o=null,UA=!1,Zw=!1;function vs(){throw Error(It(321))}function dj(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Ol(r[t],e[t]))return!1;return!0}function mj(r,e,t,n,i,o){if(fb=o,Vi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ww.current=r===null||r.memoizedState===null?z$e:B$e,r=t(n,i),Zw){o=0;do{if(Zw=!1,!(25>o))throw Error(It(301));o+=1,$o=ma=null,e.updateQueue=null,Ww.current=U$e,r=t(n,i)}while(Zw)}if(Ww.current=HA,e=ma!==null&&ma.next!==null,fb=0,$o=ma=Vi=null,UA=!1,e)throw Error(It(300));return r}function bm(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $o===null?Vi.memoizedState=$o=r:$o=$o.next=r,$o}function Rm(){if(ma===null){var r=Vi.alternate;r=r!==null?r.memoizedState:null}else r=ma.next;var e=$o===null?Vi.memoizedState:$o.next;if(e!==null)$o=e,ma=r;else{if(r===null)throw Error(It(310));ma=r,r={memoizedState:ma.memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},$o===null?Vi.memoizedState=$o=r:$o=$o.next=r}return $o}function vc(r,e){return typeof e=="function"?e(r):e}function Mw(r){var e=Rm(),t=e.queue;if(t===null)throw Error(It(311));t.lastRenderedReducer=r;var n=ma,i=n.baseQueue,o=t.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,t.pending=null}if(i!==null){i=i.next,n=n.baseState;var u=a=o=null,h=i;do{var d=h.lane;if((fb&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,eagerReducer:h.eagerReducer,eagerState:h.eagerState,next:null}),n=h.eagerReducer===r?h.eagerState:r(n,h.action);else{var v={lane:d,action:h.action,eagerReducer:h.eagerReducer,eagerState:h.eagerState,next:null};u===null?(a=u=v,o=n):u=u.next=v,Vi.lanes|=d,mb|=d}h=h.next}while(h!==null&&h!==i);u===null?o=n:u.next=a,Ol(n,e.memoizedState)||(Ru=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,t.lastRenderedState=n}return[e.memoizedState,t.dispatch]}function Rw(r){var e=Rm(),t=e.queue;if(t===null)throw Error(It(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do o=r(o,a.action),a=a.next;while(a!==i);Ol(o,e.memoizedState)||(Ru=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,n]}function oJ(r,e,t){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?r=i===n:(r=r.mutableReadLanes,(r=(fb&r)===r)&&(e._workInProgressVersionPrimary=n,iy.push(e))),r)return t(e._source);throw iy.push(e),Error(It(350))}function MQ(r,e,t,n){var i=$a;if(i===null)throw Error(It(349));var o=e._getVersion,a=o(e._source),u=Ww.current,h=u.useState(function(){return oJ(i,e,t)}),d=h[1],v=h[0];h=$o;var x=r.memoizedState,S=x.refs,A=S.getSnapshot,L=x.source;x=x.subscribe;var q=Vi;return r.memoizedState={refs:S,source:e,subscribe:n},u.useEffect(function(){S.getSnapshot=t,S.setSnapshot=d;var R=o(e._source);if(!Ol(a,R)){R=t(e._source),Ol(v,R)||(d(R),R=yp(q),i.mutableReadLanes|=R&i.pendingLanes),R=i.mutableReadLanes,i.entangledLanes|=R;for(var D=i.entanglements,k=R;0<k;){var j=31-bp(k),$=1<<j;D[j]|=R,k&=~$}}},[t,e,n]),u.useEffect(function(){return n(e._source,function(){var R=S.getSnapshot,D=S.setSnapshot;try{D(R(e._source));var k=yp(q);i.mutableReadLanes|=k&i.pendingLanes}catch(j){D(function(){throw j})}})},[e,n]),Ol(A,t)&&Ol(L,e)&&Ol(x,n)||(r={pending:null,dispatch:null,lastRenderedReducer:vc,lastRenderedState:v},r.dispatch=d=yj.bind(null,Vi,r),h.queue=r,h.baseQueue=null,v=oJ(i,e,t),h.memoizedState=h.baseState=v),v}function RQ(r,e,t){var n=Rm();return MQ(n,r,e,t)}function Pw(r){var e=bm();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r=e.queue={pending:null,dispatch:null,lastRenderedReducer:vc,lastRenderedState:r},r=r.dispatch=yj.bind(null,Vi,r),[e.memoizedState,r]}function VA(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Vi.updateQueue,e===null?(e={lastEffect:null},Vi.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function aJ(r){var e=bm();return r={current:r},e.memoizedState=r}function GA(){return Rm().memoizedState}function bF(r,e,t,n){var i=bm();Vi.flags|=r,i.memoizedState=VA(1|e,t,void 0,n===void 0?null:n)}function vj(r,e,t,n){var i=Rm();n=n===void 0?null:n;var o=void 0;if(ma!==null){var a=ma.memoizedState;if(o=a.destroy,n!==null&&dj(n,a.deps)){VA(e,t,o,n);return}}Vi.flags|=r,i.memoizedState=VA(1|e,t,o,n)}function sJ(r,e){return bF(516,4,r,e)}function $A(r,e){return vj(516,4,r,e)}function PQ(r,e){return vj(4,2,r,e)}function OQ(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function LQ(r,e,t){return t=t!=null?t.concat([r]):null,vj(4,2,OQ.bind(null,e,r),t)}function gj(){}function DQ(r,e){var t=Rm();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&dj(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function NQ(r,e){var t=Rm();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&dj(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function j$e(r,e){var t=cy();Tm(98>t?98:t,function(){r(!0)}),Tm(97<t?97:t,function(){var n=Dl.transition;Dl.transition=1;try{r(!1),e()}finally{Dl.transition=n}})}function yj(r,e,t){var n=ol(),i=yp(r),o={lane:i,action:t,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(a===null?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=r.alternate,r===Vi||a!==null&&a===Vi)Zw=UA=!0;else{if(r.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var u=e.lastRenderedState,h=a(u,t);if(o.eagerReducer=a,o.eagerState=h,Ol(h,u))return}catch(d){}finally{}_p(r,i,n)}}var HA={readContext:Nl,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useOpaqueIdentifier:vs,unstable_isNewReconciler:!1},z$e={readContext:Nl,useCallback:function(r,e){return bm().memoizedState=[r,e===void 0?null:e],r},useContext:Nl,useEffect:sJ,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,bF(4,2,OQ.bind(null,e,r),t)},useLayoutEffect:function(r,e){return bF(4,2,r,e)},useMemo:function(r,e){var t=bm();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=bm();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r=n.queue={pending:null,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},r=r.dispatch=yj.bind(null,Vi,r),[n.memoizedState,r]},useRef:aJ,useState:Pw,useDebugValue:gj,useDeferredValue:function(r){var e=Pw(r),t=e[0],n=e[1];return sJ(function(){var i=Dl.transition;Dl.transition=1;try{n(r)}finally{Dl.transition=i}},[r]),t},useTransition:function(){var r=Pw(!1),e=r[0];return r=j$e.bind(null,r[1]),aJ(r),[r,e]},useMutableSource:function(r,e,t){var n=bm();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:r,subscribe:t},MQ(n,r,e,t)},useOpaqueIdentifier:function(){if(_c){var r=!1,e=L$e(function(){throw r||(r=!0,t("r:"+(Bk++).toString(36))),Error(It(355))}),t=Pw(e)[1];return!(Vi.mode&2)&&(Vi.flags|=516,VA(5,function(){t("r:"+(Bk++).toString(36))},void 0,null)),e}return e="r:"+(Bk++).toString(36),Pw(e),e},unstable_isNewReconciler:!1},B$e={readContext:Nl,useCallback:DQ,useContext:Nl,useEffect:$A,useImperativeHandle:LQ,useLayoutEffect:PQ,useMemo:NQ,useReducer:Mw,useRef:GA,useState:function(){return Mw(vc)},useDebugValue:gj,useDeferredValue:function(r){var e=Mw(vc),t=e[0],n=e[1];return $A(function(){var i=Dl.transition;Dl.transition=1;try{n(r)}finally{Dl.transition=i}},[r]),t},useTransition:function(){var r=Mw(vc)[0];return[GA().current,r]},useMutableSource:RQ,useOpaqueIdentifier:function(){return Mw(vc)[0]},unstable_isNewReconciler:!1},U$e={readContext:Nl,useCallback:DQ,useContext:Nl,useEffect:$A,useImperativeHandle:LQ,useLayoutEffect:PQ,useMemo:NQ,useReducer:Rw,useRef:GA,useState:function(){return Rw(vc)},useDebugValue:gj,useDeferredValue:function(r){var e=Rw(vc),t=e[0],n=e[1];return $A(function(){var i=Dl.transition;Dl.transition=1;try{n(r)}finally{Dl.transition=i}},[r]),t},useTransition:function(){var r=Rw(vc)[0];return[GA().current,r]},useMutableSource:RQ,useOpaqueIdentifier:function(){return Rw(vc)[0]},unstable_isNewReconciler:!1},V$e=Cm.ReactCurrentOwner,Ru=!1;function gs(r,e,t,n){e.child=r===null?AQ(e,null,t,n):zA(e,r.child,t,n)}function lJ(r,e,t,n,i){t=t.render;var o=e.ref;return ny(e,i),n=mj(r,e,t,n,o,i),r!==null&&!Ru?(e.updateQueue=r.updateQueue,e.flags&=-517,r.lanes&=~i,Cf(r,e,i)):(e.flags|=1,gs(r,e,n,i),e.child)}function uJ(r,e,t,n,i,o){if(r===null){var a=t.type;return typeof a=="function"&&!Ej(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=a,qQ(r,e,a,n,i,o)):(r=IA(t.type,null,n,e,e.mode,o),r.ref=e.ref,r.return=e,e.child=r)}return a=r.child,!(i&o)&&(i=a.memoizedProps,t=t.compare,t=t!==null?t:ob,t(i,n)&&r.ref===e.ref)?Cf(r,e,o):(e.flags|=1,r=Tp(a,n),r.ref=e.ref,r.return=e,e.child=r)}function qQ(r,e,t,n,i,o){if(r!==null&&ob(r.memoizedProps,n)&&r.ref===e.ref)if(Ru=!1,(o&i)!==0)r.flags&16384&&(Ru=!0);else return e.lanes=r.lanes,Cf(r,e,o);return SF(r,e,t,n,o)}function $k(r,e,t){var n=e.pendingProps,i=n.children,o=r!==null?r.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if(!(e.mode&4))e.memoizedState={baseLanes:0},vA(e,t);else if(t&1073741824)e.memoizedState={baseLanes:0},vA(e,o!==null?o.baseLanes:t);else return r=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r},vA(e,r),null;}else o!==null?(n=o.baseLanes|t,e.memoizedState=null):n=t,vA(e,n);return gs(r,e,i,t),e.child}function kQ(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=128)}function SF(r,e,t,n,i){var o=_s(t)?Em:ya.current;return o=uy(e,o),ny(e,i),t=mj(r,e,t,n,o,i),r!==null&&!Ru?(e.updateQueue=r.updateQueue,e.flags&=-517,r.lanes&=~i,Cf(r,e,i)):(e.flags|=1,gs(r,e,t,i),e.child)}function cJ(r,e,t,n,i){if(_s(t)){var o=!0;wA(e)}else o=!1;if(ny(e,i),e.stateNode===null)r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),TQ(e,t,n),_F(e,t,n,i),n=!0;else if(r===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,d=t.contextType;typeof d=="object"&&d!==null?d=Nl(d):(d=_s(t)?Em:ya.current,d=uy(e,d));var v=t.getDerivedStateFromProps,x=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function";x||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==n||h!==d)&&tJ(e,a,n,d),lp=!1;var S=e.memoizedState;a.state=S,lb(e,n,a,i),h=e.memoizedState,u!==n||S!==h||ys.current||lp?(typeof v=="function"&&(jA(e,t,v,n),h=e.memoizedState),(u=lp||eJ(e,t,u,n,S,h,d))?(x||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4)):(typeof a.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=h),a.props=n,a.state=h,a.context=d,n=u):(typeof a.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{a=e.stateNode,SQ(r,e),u=e.memoizedProps,d=e.type===e.elementType?u:Mu(e.type,u),a.props=d,x=e.pendingProps,S=a.context,h=t.contextType,typeof h=="object"&&h!==null?h=Nl(h):(h=_s(t)?Em:ya.current,h=uy(e,h));var A=t.getDerivedStateFromProps;(v=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==x||S!==h)&&tJ(e,a,n,h),lp=!1,S=e.memoizedState,a.state=S,lb(e,n,a,i);var L=e.memoizedState;u!==x||S!==L||ys.current||lp?(typeof A=="function"&&(jA(e,t,A,n),L=e.memoizedState),(d=lp||eJ(e,t,d,n,S,L,h))?(v||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,L,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,L,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof a.componentDidUpdate!="function"||u===r.memoizedProps&&S===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===r.memoizedProps&&S===r.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=L),a.props=n,a.state=L,a.context=h,n=d):(typeof a.componentDidUpdate!="function"||u===r.memoizedProps&&S===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===r.memoizedProps&&S===r.memoizedState||(e.flags|=256),n=!1)}return EF(r,e,t,n,o,i)}function EF(r,e,t,n,i,o){kQ(r,e);var a=(e.flags&64)!==0;if(!n&&!a)return i&&Y7(e,t,!1),Cf(r,e,o);n=e.stateNode,V$e.current=e;var u=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=zA(e,r.child,null,o),e.child=zA(e,null,u,o)):gs(r,e,u,o),e.memoizedState=n.state,i&&Y7(e,t,!0),e.child}function fJ(r){var e=r.stateNode;e.pendingContext?Z7(r,e.pendingContext,e.pendingContext!==e.context):e.context&&Z7(r,e.context,!1),xF(r,e.containerInfo)}var mA={dehydrated:null,retryLane:0};function hJ(r,e,t){var n=e.pendingProps,i=ki.current,o=!1,a;return(a=(e.flags&64)!==0)||(a=r!==null&&r.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-65):r!==null&&r.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Fi(ki,i&1),r===null?(n.fallback!==void 0&&wF(e),r=n.children,i=n.fallback,o?(r=pJ(e,r,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=mA,r):typeof n.unstable_expectedLoadTime=="number"?(r=pJ(e,r,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=mA,e.lanes=33554432,r):(t=Tj({mode:"visible",children:r},e.mode,t,null),t.return=e,e.child=t)):r.memoizedState!==null?o?(n=mJ(r,e,n.children,n.fallback,t),o=e.child,i=r.child.memoizedState,o.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},o.childLanes=r.childLanes&~t,e.memoizedState=mA,n):(t=dJ(r,e,n.children,t),e.memoizedState=null,t):o?(n=mJ(r,e,n.children,n.fallback,t),o=e.child,i=r.child.memoizedState,o.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},o.childLanes=r.childLanes&~t,e.memoizedState=mA,n):(t=dJ(r,e,n.children,t),e.memoizedState=null,t)}function pJ(r,e,t,n){var i=r.mode,o=r.child;return e={mode:"hidden",children:e},!(i&2)&&o!==null?(o.childLanes=0,o.pendingProps=e):o=Tj(e,i,0,null),t=sy(t,i,n,null),o.return=r,t.return=r,o.sibling=t,r.child=o,t}function dJ(r,e,t,n){var i=r.child;return r=i.sibling,t=Tp(i,{mode:"visible",children:t}),!(e.mode&2)&&(t.lanes=n),t.return=e,t.sibling=null,r!==null&&(r.nextEffect=null,r.flags=8,e.firstEffect=e.lastEffect=r),e.child=t}function mJ(r,e,t,n,i){var o=e.mode,a=r.child;r=a.sibling;var u={mode:"hidden",children:t};return!(o&2)&&e.child!==a?(t=e.child,t.childLanes=0,t.pendingProps=u,a=t.lastEffect,a!==null?(e.firstEffect=t.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):t=Tp(a,u),r!==null?n=Tp(r,n):(n=sy(n,o,i,null),n.flags|=2),n.return=e,t.return=e,t.sibling=n,e.child=t,n}function vJ(r,e){r.lanes|=e;var t=r.alternate;t!==null&&(t.lanes|=e),bQ(r.return,e)}function Hk(r,e,t,n,i,o){var a=r.memoizedState;a===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=t,a.tailMode=i,a.lastEffect=o)}function gJ(r,e,t){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(gs(r,e,n.children,t),n=ki.current,n&2)n=n&1|2,e.flags|=64;else{if(r!==null&&r.flags&64)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&vJ(r,t);else if(r.tag===19)vJ(r,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Fi(ki,n),!(e.mode&2))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&BA(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Hk(e,!1,i,t,o,e.lastEffect);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&BA(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}Hk(e,!0,t,null,o,e.lastEffect);break;case"together":Hk(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null;}return e.child}function Cf(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),mb|=e.lanes,t&e.childLanes){if(r!==null&&e.child!==r.child)throw Error(It(153));if(e.child!==null){for(r=e.child,t=Tp(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=Tp(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var FQ,TF,jQ,zQ;FQ=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};TF=function(){};jQ=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,wm(yc.current);var o=null;switch(t){case"input":i=Jk(r,i),n=Jk(r,n),o=[];break;case"option":i=tF(r,i),n=tF(r,n),o=[];break;case"select":i=yi({},i,{value:void 0}),n=yi({},n,{value:void 0}),o=[];break;case"textarea":i=rF(r,i),n=rF(r,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=LA);}oF(t,n);var a;t=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(a in u)u.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Jw.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var h=n[d];if(u=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&h!==u&&(h!=null||u!=null))if(d==="style"){if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(t||(t={}),t[a]=h[a])}else t||(o||(o=[]),o.push(d,t)),t=h;}else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Jw.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&ui("scroll",r),o||u===h||(o=[])):typeof h=="object"&&h!==null&&h.$$typeof===$F?h.toString():(o=o||[]).push(d,h))}t&&(o=o||[]).push("style",t);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};zQ=function(r,e,t,n){t!==n&&(e.flags|=4)};function Ow(r,e){if(!_c)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null;}}function G$e(r,e,t){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return _s(e.type)&&NA(),null;case 3:return fy(),ci(ys),ci(ya),pj(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(dA(e)?e.flags|=4:n.hydrate||(e.flags|=256)),TF(e),null;case 5:hj(e);var i=wm(cb.current);if(t=e.type,r!==null&&e.stateNode!=null)jQ(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(It(166));return null}if(r=wm(yc.current),dA(e)){n=e.stateNode,t=e.type;var o=e.memoizedProps;switch(n[fp]=e,n[DA]=o,t){case"dialog":ui("cancel",n),ui("close",n);break;case"iframe":case"object":case"embed":ui("load",n);break;case"video":case"audio":for(r=0;r<kw.length;r++)ui(kw[r],n);break;case"source":ui("error",n);break;case"img":case"image":case"link":ui("error",n),ui("load",n);break;case"details":ui("toggle",n);break;case"input":_7(n,o),ui("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ui("invalid",n);break;case"textarea":w7(n,o),ui("invalid",n);}oF(t,o),r=null;for(var a in o)o.hasOwnProperty(a)&&(i=o[a],a==="children"?typeof i=="string"?n.textContent!==i&&(r=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(r=["children",""+i]):Jw.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&ui("scroll",n));switch(t){case"input":oA(n),x7(n,o,!0);break;case"textarea":oA(n),b7(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=LA);}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,r===nF.html&&(r=LJ(t)),r===nF.html?t==="script"?(r=a.createElement("div"),r.innerHTML="<script></script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[fp]=e,r[DA]=n,FQ(r,e,!1,!1),e.stateNode=r,a=aF(t,n),t){case"dialog":ui("cancel",r),ui("close",r),i=n;break;case"iframe":case"object":case"embed":ui("load",r),i=n;break;case"video":case"audio":for(i=0;i<kw.length;i++)ui(kw[i],r);i=n;break;case"source":ui("error",r),i=n;break;case"img":case"image":case"link":ui("error",r),ui("load",r),i=n;break;case"details":ui("toggle",r),i=n;break;case"input":_7(r,n),i=Jk(r,n),ui("invalid",r);break;case"option":i=tF(r,n);break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=yi({},n,{value:void 0}),ui("invalid",r);break;case"textarea":w7(r,n),i=rF(r,n),ui("invalid",r);break;default:i=n;}oF(t,i);var u=i;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?qJ(r,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&DJ(r,h)):o==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&Qw(r,h):typeof h=="number"&&Qw(r,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jw.hasOwnProperty(o)?h!=null&&o==="onScroll"&&ui("scroll",r):h!=null&&jF(r,o,h,a))}switch(t){case"input":oA(r),x7(r,n,!1);break;case"textarea":oA(r),b7(r);break;case"option":n.value!=null&&r.setAttribute("value",""+wp(n.value));break;case"select":r.multiple=!!n.multiple,o=n.value,o!=null?Qg(r,!!n.multiple,o,!1):n.defaultValue!=null&&Qg(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=LA);}pQ(t,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(r&&e.stateNode!=null)zQ(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(It(166));t=wm(cb.current),wm(yc.current),dA(e)?(n=e.stateNode,t=e.memoizedProps,n[fp]=e,n.nodeValue!==t&&(e.flags|=4)):(n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[fp]=e,e.stateNode=n)}return null;case 13:return ci(ki),n=e.memoizedState,e.flags&64?(e.lanes=t,e):(n=n!==null,t=!1,r===null?e.memoizedProps.fallback!==void 0&&dA(e):t=r.memoizedState!==null,n&&!t&&e.mode&2&&(r===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||ki.current&1?Ho===0&&(Ho=3):((Ho===0||Ho===3)&&(Ho=4),$a===null||!(mb&134217727)&&!(my&134217727)||oy($a,ga))),(n||t)&&(e.flags|=4),null);case 4:return fy(),TF(e),r===null&&cQ(e.stateNode.containerInfo),null;case 10:return cj(e),null;case 17:return _s(e.type)&&NA(),null;case 19:if(ci(ki),n=e.memoizedState,n===null)return null;if(o=(e.flags&64)!==0,a=n.rendering,a===null){if(o)Ow(n,!1);else{if(Ho!==0||r!==null&&r.flags&64)for(r=e.child;r!==null;){if(a=BA(r),a!==null){for(e.flags|=64,Ow(n,!1),o=a.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=t,t=e.child;t!==null;)o=t,r=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,a=o.alternate,a===null?(o.childLanes=0,o.lanes=r,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return Fi(ki,ki.current&1|2),e.child}r=r.sibling}n.tail!==null&&va()>PF&&(e.flags|=64,o=!0,Ow(n,!1),e.lanes=33554432)}}else{if(!o)if(r=BA(a),r!==null){if(e.flags|=64,o=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ow(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!_c)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*va()-n.renderingStartTime>PF&&t!==1073741824&&(e.flags|=64,o=!0,Ow(n,!1),e.lanes=33554432);n.isBackwards?(a.sibling=e.child,e.child=a):(t=n.last,t!==null?t.sibling=a:e.child=a,n.last=a)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=va(),t.sibling=null,e=ki.current,Fi(ki,o?e&1|2:e&1),t):null;case 23:case 24:return Sj(),r!==null&&r.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null;}throw Error(It(156,e.tag))}function $$e(r){switch(r.tag){case 1:_s(r.type)&&NA();var e=r.flags;return e&4096?(r.flags=e&-4097|64,r):null;case 3:if(fy(),ci(ys),ci(ya),pj(),e=r.flags,e&64)throw Error(It(285));return r.flags=e&-4097|64,r;case 5:return hj(r),null;case 13:return ci(ki),e=r.flags,e&4096?(r.flags=e&-4097|64,r):null;case 19:return ci(ki),null;case 4:return fy(),null;case 10:return cj(r),null;case 23:case 24:return Sj(),null;default:return null;}}function _j(r,e){try{var t="",n=e;do t+=TGe(n),n=n.return;while(n);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:r,source:e,stack:i}}function IF(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var H$e=typeof WeakMap=="function"?WeakMap:Map;function BQ(r,e,t){t=vp(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){ZA||(ZA=!0,OF=n),IF(r,e)},t}function UQ(r,e,t){t=vp(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return IF(r,e),n(i)}}var o=r.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){typeof n!="function"&&(gc===null?gc=new Set([this]):gc.add(this),IF(r,e));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}var W$e=typeof WeakSet=="function"?WeakSet:Set;function yJ(r){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){xp(r,t)}else e.current=null}function Z$e(r,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&r!==null){var t=r.memoizedProps,n=r.memoizedState;r=e.stateNode,e=r.getSnapshotBeforeUpdate(e.elementType===e.type?t:Mu(e.type,t),n),r.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&aj(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(It(163))}function Y$e(r,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){r=e=e.next;do{if((r.tag&3)===3){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){r=e=e.next;do{var i=r;n=i.next,i=i.tag,i&4&&i&1&&(XQ(t,r),n6e(t,r)),r=n}while(r!==e)}return;case 1:r=t.stateNode,t.flags&4&&(e===null?r.componentDidMount():(n=t.elementType===t.type?e.memoizedProps:Mu(t.type,e.memoizedProps),r.componentDidUpdate(n,e.memoizedState,r.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&Q7(t,e,r);return;case 3:if(e=t.updateQueue,e!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode;}Q7(t,e,r)}return;case 5:r=t.stateNode,e===null&&t.flags&4&&pQ(t.type,t.memoizedProps)&&r.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&HJ(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(It(163))}function _J(r,e){for(var t=r;;){if(t.tag===5){var n=t.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=t.stateNode;var i=t.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=NJ("display",i)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===r)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function xJ(r,e){if(Sm&&typeof Sm.onCommitFiberUnmount=="function")try{Sm.onCommitFiberUnmount(sj,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(r=e.updateQueue,r!==null&&(r=r.lastEffect,r!==null)){var t=r=r.next;do{var n=t,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)XQ(e,t);else{n=e;try{i()}catch(o){xp(n,o)}}t=t.next}while(t!==r)}break;case 1:if(yJ(e),r=e.stateNode,typeof r.componentWillUnmount=="function")try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(o){xp(e,o)}break;case 5:yJ(e);break;case 4:VQ(r,e);}}function wJ(r){r.alternate=null,r.child=null,r.dependencies=null,r.firstEffect=null,r.lastEffect=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.return=null,r.updateQueue=null}function bJ(r){return r.tag===5||r.tag===3||r.tag===4}function SJ(r){e:{for(var e=r.return;e!==null;){if(bJ(e))break e;e=e.return}throw Error(It(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(It(161));}t.flags&16&&(Qw(e,""),t.flags&=-17);e:t:for(t=r;;){for(;t.sibling===null;){if(t.return===null||bJ(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}n?AF(r,t,e):CF(r,t,e)}function AF(r,e,t){var n=r.tag,i=n===5||n===6;if(i)r=i?r.stateNode:r.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=LA));else if(n!==4&&(r=r.child,r!==null))for(AF(r,e,t),r=r.sibling;r!==null;)AF(r,e,t),r=r.sibling}function CF(r,e,t){var n=r.tag,i=n===5||n===6;if(i)r=i?r.stateNode:r.stateNode.instance,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(CF(r,e,t),r=r.sibling;r!==null;)CF(r,e,t),r=r.sibling}function VQ(r,e){for(var t=e,n=!1,i,o;;){if(!n){n=t.return;e:for(;;){if(n===null)throw Error(It(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e;}n=n.return}n=!0}if(t.tag===5||t.tag===6){e:for(var a=r,u=t,h=u;;)if(xJ(a,h),h.child!==null&&h.tag!==4)h.child.return=h,h=h.child;else{if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}o?(a=i,u=t.stateNode,a.nodeType===8?a.parentNode.removeChild(u):a.removeChild(u)):i.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){i=t.stateNode.containerInfo,o=!0,t.child.return=t,t=t.child;continue}}else if(xJ(r,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function Wk(r,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do(n.tag&3)===3&&(r=n.destroy,n.destroy=void 0,r!==void 0&&r()),n=n.next;while(n!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){n=e.memoizedProps;var i=r!==null?r.memoizedProps:n;r=e.type;var o=e.updateQueue;if(e.updateQueue=null,o!==null){for(t[DA]=n,r==="input"&&n.type==="radio"&&n.name!=null&&PJ(t,n),aF(r,i),e=aF(r,n),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];a==="style"?qJ(t,u):a==="dangerouslySetInnerHTML"?DJ(t,u):a==="children"?Qw(t,u):jF(t,a,u,e)}switch(r){case"input":Qk(t,n);break;case"textarea":OJ(t,n);break;case"select":r=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Qg(t,!!n.multiple,o,!1):r!==!!n.multiple&&(n.defaultValue!=null?Qg(t,!!n.multiple,n.defaultValue,!0):Qg(t,!!n.multiple,n.multiple?[]:"",!1));}}}return;case 6:if(e.stateNode===null)throw Error(It(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,HJ(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(bj=va(),_J(e.child,!0)),EJ(e);return;case 19:EJ(e);return;case 17:return;case 23:case 24:_J(e,e.memoizedState!==null);return;}throw Error(It(163))}function EJ(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new W$e),e.forEach(function(n){var i=a6e.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function K$e(r,e){return r!==null&&(r=r.memoizedState,r===null||r.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var X$e=Math.ceil,WA=Cm.ReactCurrentDispatcher,xj=Cm.ReactCurrentOwner,Mr=0,$a=null,po=null,ga=0,Im=0,MF=Ip(0),Ho=0,sC=null,dy=0,mb=0,my=0,wj=0,RF=null,bj=0,PF=1/0;function vy(){PF=va()+500}var er=null,ZA=!1,OF=null,gc=null,Ep=!1,Yw=null,Fw=90,LF=[],DF=[],Mf=null,Kw=0,NF=null,SA=-1,If=0,EA=0,Xw=null,TA=!1;function ol(){return Mr&48?va():SA!==-1?SA:SA=va()}function yp(r){if(r=r.mode,!(r&2))return 1;if(!(r&4))return cy()===99?1:2;if(If===0&&(If=dy),F$e.transition!==0){EA!==0&&(EA=RF!==null?RF.pendingLanes:0),r=If;var e=4186112&~EA;return e&=-e,e===0&&(r=4186112&~r,e=r&-r,e===0&&(e=8192)),e}return r=cy(),Mr&4&&r===98?r=PA(12,If):(r=BGe(r),r=PA(r,If)),r}function _p(r,e,t){if(50<Kw)throw Kw=0,NF=null,Error(It(185));if(r=lC(r,e),r===null)return null;eC(r,e,t),r===$a&&(my|=e,Ho===4&&oy(r,ga));var n=cy();e===1?Mr&8&&!(Mr&48)?qF(r):(ql(r,t),Mr===0&&(vy(),xc())):(!(Mr&4)||n!==98&&n!==99||(Mf===null?Mf=new Set([r]):Mf.add(r)),ql(r,t)),RF=r}function lC(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}function ql(r,e){for(var t=r.callbackNode,n=r.suspendedLanes,i=r.pingedLanes,o=r.expirationTimes,a=r.pendingLanes;0<a;){var u=31-bp(a),h=1<<u,d=o[u];if(d===-1){if(!(h&n)||h&i){d=e,Gg(h);var v=ri;o[u]=10<=v?d+250:6<=v?d+5e3:-1}}else d<=e&&(r.expiredLanes|=h);a&=~h}if(n=nb(r,r===$a?ga:0),e=ri,n===0)t!==null&&(t!==Uk&&gF(t),r.callbackNode=null,r.callbackPriority=0);else{if(t!==null){if(r.callbackPriority===e)return;t!==Uk&&gF(t)}e===15?(t=qF.bind(null,r),Tf===null?(Tf=[t],bA=lj(oC,wQ)):Tf.push(t),t=Uk):e===14?t=sb(99,qF.bind(null,r)):(t=UGe(e),t=sb(t,GQ.bind(null,r))),r.callbackPriority=e,r.callbackNode=t}}function GQ(r){if(SA=-1,EA=If=0,Mr&48)throw Error(It(327));var e=r.callbackNode;if(Ap()&&r.callbackNode!==e)return null;var t=nb(r,r===$a?ga:0);if(t===0)return null;var n=t,i=Mr;Mr|=16;var o=ZQ();($a!==r||ga!==n)&&(vy(),ay(r,n));do try{e6e();break}catch(u){WQ(r,u)}while(!0);if(uj(),WA.current=o,Mr=i,po!==null?n=0:($a=null,ga=0,n=Ho),dy&my)ay(r,0);else if(n!==0){if(n===2&&(Mr|=64,r.hydrate&&(r.hydrate=!1,aj(r.containerInfo)),t=QJ(r),t!==0&&(n=jw(r,t))),n===1)throw e=sC,ay(r,0),oy(r,t),ql(r,va()),e;switch(r.finishedWork=r.current.alternate,r.finishedLanes=t,n){case 0:case 1:throw Error(It(345));case 2:gm(r);break;case 3:if(oy(r,t),(t&62914560)===t&&(n=bj+500-va(),10<n)){if(nb(r,0)!==0)break;if(i=r.suspendedLanes,(i&t)!==t){ol(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=$7(gm.bind(null,r),n);break}gm(r);break;case 4:if(oy(r,t),(t&4186112)===t)break;for(n=r.eventTimes,i=-1;0<t;){var a=31-bp(t);o=1<<a,a=n[a],a>i&&(i=a),t&=~o}if(t=i,t=va()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*X$e(t/1960))-t,10<t){r.timeoutHandle=$7(gm.bind(null,r),t);break}gm(r);break;case 5:gm(r);break;default:throw Error(It(329));}}return ql(r,va()),r.callbackNode===e?GQ.bind(null,r):null}function oy(r,e){for(e&=~wj,e&=~my,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-bp(e),n=1<<t;r[t]=-1,e&=~n}}function qF(r){if(Mr&48)throw Error(It(327));if(Ap(),r===$a&&r.expiredLanes&ga){var e=ga,t=jw(r,e);dy&my&&(e=nb(r,e),t=jw(r,e))}else e=nb(r,0),t=jw(r,e);if(r.tag!==0&&t===2&&(Mr|=64,r.hydrate&&(r.hydrate=!1,aj(r.containerInfo)),e=QJ(r),e!==0&&(t=jw(r,e))),t===1)throw t=sC,ay(r,0),oy(r,e),ql(r,va()),t;return r.finishedWork=r.current.alternate,r.finishedLanes=e,gm(r),ql(r,va()),null}function J$e(){if(Mf!==null){var r=Mf;Mf=null,r.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ql(e,va())})}xc()}function $Q(r,e){var t=Mr;Mr|=1;try{return r(e)}finally{Mr=t,Mr===0&&(vy(),xc())}}function HQ(r,e){var t=Mr;Mr&=-2,Mr|=8;try{return r(e)}finally{Mr=t,Mr===0&&(vy(),xc())}}function vA(r,e){Fi(MF,Im),Im|=e,dy|=e}function Sj(){Im=MF.current,ci(MF)}function ay(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,O$e(t)),po!==null)for(t=po.return;t!==null;){var n=t;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&NA();break;case 3:fy(),ci(ys),ci(ya),pj();break;case 5:hj(n);break;case 4:fy();break;case 13:ci(ki);break;case 19:ci(ki);break;case 10:cj(n);break;case 23:case 24:Sj();}t=t.return}$a=r,po=Tp(r.current,null),ga=Im=dy=e,Ho=0,sC=null,wj=my=mb=0}function WQ(r,e){do{var t=po;try{if(uj(),Ww.current=HA,UA){for(var n=Vi.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}UA=!1}if(fb=0,$o=ma=Vi=null,Zw=!1,xj.current=null,t===null||t.return===null){Ho=1,sC=e,po=null;break}e:{var o=r,a=t.return,u=t,h=e;if(e=ga,u.flags|=2048,u.firstEffect=u.lastEffect=null,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h;if(!(u.mode&2)){var v=u.alternate;v?(u.updateQueue=v.updateQueue,u.memoizedState=v.memoizedState,u.lanes=v.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=(ki.current&1)!==0,S=a;do{var A;if(A=S.tag===13){var L=S.memoizedState;if(L!==null)A=L.dehydrated!==null;else{var q=S.memoizedProps;A=q.fallback===void 0?!1:q.unstable_avoidThisFallback!==!0?!0:!x}}if(A){var R=S.updateQueue;if(R===null){var D=new Set;D.add(d),S.updateQueue=D}else R.add(d);if(!(S.mode&2)){if(S.flags|=64,u.flags|=16384,u.flags&=-2981,u.tag===1)if(u.alternate===null)u.tag=17;else{var k=vp(-1,1);k.tag=2,gp(u,k)}u.lanes|=1;break e}h=void 0,u=e;var j=o.pingCache;if(j===null?(j=o.pingCache=new H$e,h=new Set,j.set(d,h)):(h=j.get(d),h===void 0&&(h=new Set,j.set(d,h))),!h.has(u)){h.add(u);var $=o6e.bind(null,o,d,u);d.then($,$)}S.flags|=4096,S.lanes=e;break e}S=S.return}while(S!==null);h=Error((Jg(u.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ho!==5&&(Ho=2),h=_j(h,u),S=a;do{switch(S.tag){case 3:o=h,S.flags|=4096,e&=-e,S.lanes|=e;var ee=BQ(S,o,e);J7(S,ee);break e;case 1:o=h;var J=S.type,ie=S.stateNode;if(!(S.flags&64)&&(typeof J.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(gc===null||!gc.has(ie)))){S.flags|=4096,e&=-e,S.lanes|=e;var ue=UQ(S,o,e);J7(S,ue);break e}}S=S.return}while(S!==null)}KQ(t)}catch(le){e=le,po===t&&t!==null&&(po=t=t.return);continue}break}while(!0)}function ZQ(){var r=WA.current;return WA.current=HA,r===null?HA:r}function jw(r,e){var t=Mr;Mr|=16;var n=ZQ();$a===r&&ga===e||ay(r,e);do try{Q$e();break}catch(i){WQ(r,i)}while(!0);if(uj(),Mr=t,WA.current=n,po!==null)throw Error(It(261));return $a=null,ga=0,Ho}function Q$e(){for(;po!==null;)YQ(po)}function e6e(){for(;po!==null&&!N$e();)YQ(po)}function YQ(r){var e=JQ(r.alternate,r,Im);r.memoizedProps=r.pendingProps,e===null?KQ(r):po=e,xj.current=null}function KQ(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&2048){if(t=$$e(e),t!==null){t.flags&=2047,po=t;return}r!==null&&(r.firstEffect=r.lastEffect=null,r.flags|=2048)}else{if(t=G$e(t,e,Im),t!==null){po=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||Im&1073741824||!(t.mode&4)){for(var n=0,i=t.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;t.childLanes=n}r!==null&&!(r.flags&2048)&&(r.firstEffect===null&&(r.firstEffect=e.firstEffect),e.lastEffect!==null&&(r.lastEffect!==null&&(r.lastEffect.nextEffect=e.firstEffect),r.lastEffect=e.lastEffect),1<e.flags&&(r.lastEffect!==null?r.lastEffect.nextEffect=e:r.firstEffect=e,r.lastEffect=e))}if(e=e.sibling,e!==null){po=e;return}po=e=r}while(e!==null);Ho===0&&(Ho=5)}function gm(r){var e=cy();return Tm(99,t6e.bind(null,r,e)),null}function t6e(r,e){do Ap();while(Yw!==null);if(Mr&48)throw Error(It(327));var t=r.finishedWork;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(It(177));r.callbackNode=null;var n=t.lanes|t.childLanes,i=n,o=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;for(var a=r.eventTimes,u=r.expirationTimes;0<o;){var h=31-bp(o),d=1<<h;i[h]=0,a[h]=-1,u[h]=-1,o&=~d}if(Mf!==null&&!(n&24)&&Mf.has(r)&&Mf.delete(r),r===$a&&(po=$a=null,ga=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,n=t.firstEffect):n=t:n=t.firstEffect,n!==null){if(i=Mr,Mr|=32,xj.current=null,jk=yA,a=j7(),hF(a)){if("selectionStart"in a)u={start:a.selectionStart,end:a.selectionEnd};else e:if(u=(u=a.ownerDocument)&&u.defaultView||window,(d=u.getSelection&&u.getSelection())&&d.rangeCount!==0){u=d.anchorNode,o=d.anchorOffset,h=d.focusNode,d=d.focusOffset;try{u.nodeType,h.nodeType}catch(le){u=null;break e}var v=0,x=-1,S=-1,A=0,L=0,q=a,R=null;t:for(;;){for(var D;q!==u||o!==0&&q.nodeType!==3||(x=v+o),q!==h||d!==0&&q.nodeType!==3||(S=v+d),q.nodeType===3&&(v+=q.nodeValue.length),(D=q.firstChild)!==null;)R=q,q=D;for(;;){if(q===a)break t;if(R===u&&++A===o&&(x=v),R===h&&++L===d&&(S=v),(D=q.nextSibling)!==null)break;q=R,R=q.parentNode}q=D}u=x===-1||S===-1?null:{start:x,end:S}}else u=null;u=u||{start:0,end:0}}else u=null;zk={focusedElem:a,selectionRange:u},yA=!1,Xw=null,TA=!1,er=n;do try{r6e()}catch(le){if(er===null)throw Error(It(330));xp(er,le),er=er.nextEffect}while(er!==null);Xw=null,er=n;do try{for(a=r;er!==null;){var k=er.flags;if(k&16&&Qw(er.stateNode,""),k&128){var j=er.alternate;if(j!==null){var $=j.ref;$!==null&&(typeof $=="function"?$(null):$.current=null)}}switch(k&1038){case 2:SJ(er),er.flags&=-3;break;case 6:SJ(er),er.flags&=-3,Wk(er.alternate,er);break;case 1024:er.flags&=-1025;break;case 1028:er.flags&=-1025,Wk(er.alternate,er);break;case 4:Wk(er.alternate,er);break;case 8:u=er,VQ(a,u);var ee=u.alternate;wJ(u),ee!==null&&wJ(ee);}er=er.nextEffect}}catch(le){if(er===null)throw Error(It(330));xp(er,le),er=er.nextEffect}while(er!==null);if($=zk,j=j7(),k=$.focusedElem,a=$.selectionRange,j!==k&&k&&k.ownerDocument&&sQ(k.ownerDocument.documentElement,k)){for(a!==null&&hF(k)&&(j=a.start,$=a.end,$===void 0&&($=j),("selectionStart"in k)?(k.selectionStart=j,k.selectionEnd=Math.min($,k.value.length)):($=(j=k.ownerDocument||document)&&j.defaultView||window,$.getSelection&&($=$.getSelection(),u=k.textContent.length,ee=Math.min(a.start,u),a=a.end===void 0?ee:Math.min(a.end,u),!$.extend&&ee>a&&(u=a,a=ee,ee=u),u=F7(k,ee),o=F7(k,a),u&&o&&($.rangeCount!==1||$.anchorNode!==u.node||$.anchorOffset!==u.offset||$.focusNode!==o.node||$.focusOffset!==o.offset)&&(j=j.createRange(),j.setStart(u.node,u.offset),$.removeAllRanges(),ee>a?($.addRange(j),$.extend(o.node,o.offset)):(j.setEnd(o.node,o.offset),$.addRange(j)))))),j=[],$=k;$=$.parentNode;)$.nodeType===1&&j.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<j.length;k++)$=j[k],$.element.scrollLeft=$.left,$.element.scrollTop=$.top}yA=!!jk,zk=jk=null,r.current=t,er=n;do try{for(k=r;er!==null;){var J=er.flags;if(J&36&&Y$e(k,er.alternate,er),J&128){j=void 0;var ie=er.ref;if(ie!==null){var ue=er.stateNode;switch(er.tag){case 5:j=ue;break;default:j=ue;}typeof ie=="function"?ie(j):ie.current=j}}er=er.nextEffect}}catch(le){if(er===null)throw Error(It(330));xp(er,le),er=er.nextEffect}while(er!==null);er=null,k$e(),Mr=i}else r.current=t;if(Ep)Ep=!1,Yw=r,Fw=e;else for(er=n;er!==null;)e=er.nextEffect,er.nextEffect=null,er.flags&8&&(J=er,J.sibling=null,J.stateNode=null),er=e;if(n=r.pendingLanes,n===0&&(gc=null),n===1?r===NF?Kw++:(Kw=0,NF=r):Kw=0,t=t.stateNode,Sm&&typeof Sm.onCommitFiberRoot=="function")try{Sm.onCommitFiberRoot(sj,t,void 0,(t.current.flags&64)===64)}catch(le){}if(ql(r,va()),ZA)throw ZA=!1,r=OF,OF=null,r;return Mr&8||xc(),null}function r6e(){for(;er!==null;){var r=er.alternate;TA||Xw===null||(er.flags&8?T7(er,Xw)&&(TA=!0):er.tag===13&&K$e(r,er)&&T7(er,Xw)&&(TA=!0));var e=er.flags;e&256&&Z$e(r,er),!(e&512)||Ep||(Ep=!0,sb(97,function(){return Ap(),null})),er=er.nextEffect}}function Ap(){if(Fw!==90){var r=97<Fw?97:Fw;return Fw=90,Tm(r,i6e)}return!1}function n6e(r,e){LF.push(e,r),Ep||(Ep=!0,sb(97,function(){return Ap(),null}))}function XQ(r,e){DF.push(e,r),Ep||(Ep=!0,sb(97,function(){return Ap(),null}))}function i6e(){if(Yw===null)return!1;var r=Yw;if(Yw=null,Mr&48)throw Error(It(331));var e=Mr;Mr|=32;var t=DF;DF=[];for(var n=0;n<t.length;n+=2){var i=t[n],o=t[n+1],a=i.destroy;if(i.destroy=void 0,typeof a=="function")try{a()}catch(h){if(o===null)throw Error(It(330));xp(o,h)}}for(t=LF,LF=[],n=0;n<t.length;n+=2){i=t[n],o=t[n+1];try{var u=i.create;i.destroy=u()}catch(h){if(o===null)throw Error(It(330));xp(o,h)}}for(u=r.current.firstEffect;u!==null;)r=u.nextEffect,u.nextEffect=null,u.flags&8&&(u.sibling=null,u.stateNode=null),u=r;return Mr=e,xc(),!0}function TJ(r,e,t){e=_j(t,e),e=BQ(r,e,1),gp(r,e),e=ol(),r=lC(r,1),r!==null&&(eC(r,1,e),ql(r,e))}function xp(r,e){if(r.tag===3)TJ(r,r,e);else for(var t=r.return;t!==null;){if(t.tag===3){TJ(t,r,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(gc===null||!gc.has(n))){r=_j(e,r);var i=UQ(t,r,1);if(gp(t,i),i=ol(),t=lC(t,1),t!==null)eC(t,1,i),ql(t,i);else if(typeof n.componentDidCatch=="function"&&(gc===null||!gc.has(n)))try{n.componentDidCatch(e,r)}catch(o){}break}}t=t.return}}function o6e(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=ol(),r.pingedLanes|=r.suspendedLanes&t,$a===r&&(ga&t)===t&&(Ho===4||Ho===3&&(ga&62914560)===ga&&500>va()-bj?ay(r,0):wj|=t),ql(r,e)}function a6e(r,e){var t=r.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=r.mode,e&2?e&4?(If===0&&(If=dy),e=$g(62914560&~If),e===0&&(e=4194304)):e=cy()===99?1:2:e=1),t=ol(),r=lC(r,e),r!==null&&(eC(r,e,t),ql(r,t))}var JQ;JQ=function(r,e,t){var n=e.lanes;if(r!==null){if(r.memoizedProps!==e.pendingProps||ys.current)Ru=!0;else if(t&n)Ru=!!(r.flags&16384);else{switch(Ru=!1,e.tag){case 3:fJ(e),Gk();break;case 5:rJ(e);break;case 1:_s(e.type)&&wA(e);break;case 4:xF(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;Fi(qA,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return t&e.child.childLanes?hJ(r,e,t):(Fi(ki,ki.current&1),e=Cf(r,e,t),e!==null?e.sibling:null);Fi(ki,ki.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&64){if(n)return gJ(r,e,t);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fi(ki,ki.current),n)break;return null;case 23:case 24:return e.lanes=0,$k(r,e,t);}return Cf(r,e,t)}}else Ru=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),r=e.pendingProps,i=uy(e,ya.current),ny(e,t),i=mj(null,e,n,r,i,t),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,_s(n)){var o=!0;wA(e)}else o=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fj(e);var a=n.getDerivedStateFromProps;typeof a=="function"&&jA(e,n,a,r),i.updater=aC,e.stateNode=i,i._reactInternals=e,_F(e,n,r,t),e=EF(null,e,n,!0,o,t)}else e.tag=0,gs(null,e,i,t),e=e.child;return e;case 16:i=e.elementType;e:{switch(r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),r=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=l6e(i),r=Mu(i,r),o){case 0:e=SF(null,e,i,r,t);break e;case 1:e=cJ(null,e,i,r,t);break e;case 11:e=lJ(null,e,i,r,t);break e;case 14:e=uJ(null,e,i,Mu(i.type,r),n,t);break e;}throw Error(It(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mu(n,i),SF(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mu(n,i),cJ(r,e,n,i,t);case 3:if(fJ(e),n=e.updateQueue,r===null||n===null)throw Error(It(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,SQ(r,e),lb(e,n,null,t),n=e.memoizedState.element,n===i)Gk(),e=Cf(r,e,t);else{if(i=e.stateNode,(o=i.hydrate)&&(hp=ry(e.stateNode.containerInfo.firstChild),Af=e,o=_c=!0),o){if(r=i.mutableSourceEagerHydrationData,r!=null)for(i=0;i<r.length;i+=2)o=r[i],o._workInProgressVersionPrimary=r[i+1],iy.push(o);for(t=AQ(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else gs(r,e,n,t),Gk();e=e.child}return e;case 5:return rJ(e),r===null&&wF(e),n=e.type,i=e.pendingProps,o=r!==null?r.memoizedProps:null,a=i.children,mF(n,i)?a=null:o!==null&&mF(n,o)&&(e.flags|=16),kQ(r,e),gs(r,e,a,t),e.child;case 6:return r===null&&wF(e),null;case 13:return hJ(r,e,t);case 4:return xF(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=zA(e,null,n,t):gs(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mu(n,i),lJ(r,e,n,i,t);case 7:return gs(r,e,e.pendingProps,t),e.child;case 8:return gs(r,e,e.pendingProps.children,t),e.child;case 12:return gs(r,e,e.pendingProps.children,t),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var u=e.type._context;if(Fi(qA,u._currentValue),u._currentValue=o,a!==null)if(u=a.value,o=Ol(u,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(u,o):1073741823)|0,o===0){if(a.children===i.children&&!ys.current){e=Cf(r,e,t);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var h=u.dependencies;if(h!==null){a=u.child;for(var d=h.firstContext;d!==null;){if(d.context===n&&d.observedBits&o){u.tag===1&&(d=vp(-1,t&-t),d.tag=2,gp(u,d)),u.lanes|=t,d=u.alternate,d!==null&&(d.lanes|=t),bQ(u.return,t),h.lanes|=t;break}d=d.next}}else a=u.tag===10&&u.type===e.type?null:u.child;if(a!==null)a.return=u;else for(a=u;a!==null;){if(a===e){a=null;break}if(u=a.sibling,u!==null){u.return=a.return,a=u;break}a=a.return}u=a}gs(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,n=o.children,ny(e,t),i=Nl(i,o.unstable_observedBits),n=n(i),e.flags|=1,gs(r,e,n,t),e.child;case 14:return i=e.type,o=Mu(i,e.pendingProps),o=Mu(i.type,o),uJ(r,e,i,o,n,t);case 15:return qQ(r,e,e.type,e.pendingProps,n,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Mu(n,i),r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,_s(n)?(r=!0,wA(e)):r=!1,ny(e,t),TQ(e,n,i),_F(e,n,i,t),EF(null,e,n,!0,r,t);case 19:return gJ(r,e,t);case 23:return $k(r,e,t);case 24:return $k(r,e,t);}throw Error(It(156,e.tag))};function s6e(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(r,e,t,n){return new s6e(r,e,t,n)}function Ej(r){return r=r.prototype,!(!r||!r.isReactComponent)}function l6e(r){if(typeof r=="function")return Ej(r)?1:0;if(r!=null){if(r=r.$$typeof,r===XA)return 11;if(r===JA)return 14}return 2}function Tp(r,e){var t=r.alternate;return t===null?(t=Ll(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function IA(r,e,t,n,i,o){var a=2;if(n=r,typeof r=="function")Ej(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case up:return sy(t.children,i,o,e);case CJ:a=8,i|=16;break;case zF:a=8,i|=1;break;case zw:return r=Ll(12,t,e,i|8),r.elementType=zw,r.type=zw,r.lanes=o,r;case Bw:return r=Ll(13,t,e,i),r.type=Bw,r.elementType=Bw,r.lanes=o,r;case AA:return r=Ll(19,t,e,i),r.elementType=AA,r.lanes=o,r;case HF:return Tj(t,i,o,e);case Xk:return r=Ll(24,t,e,i),r.elementType=Xk,r.lanes=o,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case BF:a=10;break e;case UF:a=9;break e;case XA:a=11;break e;case JA:a=14;break e;case VF:a=16,n=null;break e;case GF:a=22;break e;}throw Error(It(130,r==null?r:typeof r,""));}return e=Ll(a,t,e,i),e.elementType=r,e.type=n,e.lanes=o,e}function sy(r,e,t,n){return r=Ll(7,r,n,e),r.lanes=t,r}function Tj(r,e,t,n){return r=Ll(23,r,n,e),r.elementType=HF,r.lanes=t,r}function Zk(r,e,t){return r=Ll(6,r,null,e),r.lanes=t,r}function Yk(r,e,t){return e=Ll(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function u6e(r,e,t){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Lk(0),this.expirationTimes=Lk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lk(0),this.mutableSourceEagerHydrationData=null}function c6e(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ym,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function YA(r,e,t,n){var i=e.current,o=ol(),a=yp(i);e:if(t){t=t._reactInternals;t:{if(Mm(t)!==t||t.tag!==1)throw Error(It(170));var u=t;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(_s(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(It(171))}if(t.tag===1){var h=t.type;if(_s(h)){t=mQ(t,h,u);break e}}t=u}else t=Sp;return e.context===null?e.context=t:e.pendingContext=t,e=vp(o,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),gp(i,e),_p(i,a,o),a}function Kk(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode;}}function IJ(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function Ij(r,e){IJ(r,e),(r=r.alternate)&&IJ(r,e)}function f6e(){return null}function Aj(r,e,t){var n=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new u6e(r,e,t!=null&&t.hydrate===!0),e=Ll(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,fj(e),r[py]=t.current,cQ(r.nodeType===8?r.parentNode:r),n)for(r=0;r<n.length;r++){e=n[r];var i=e._getVersion;i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=t}Aj.prototype.render=function(r){YA(r,this._internalRoot,null,null)};Aj.prototype.unmount=function(){var r=this._internalRoot,e=r.containerInfo;YA(null,r,null,function(){e[py]=null})};function vb(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function h6e(r,e){if(e||(e=r?r.nodeType===9?r.documentElement:r.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=r.lastChild;)r.removeChild(t);return new Aj(r,0,e?{hydrate:!0}:void 0)}function uC(r,e,t,n,i){var o=t._reactRootContainer;if(o){var a=o._internalRoot;if(typeof i=="function"){var u=i;i=function(){var d=Kk(a);u.call(d)}}YA(e,a,r,i)}else{if(o=t._reactRootContainer=h6e(t,n),a=o._internalRoot,typeof i=="function"){var h=i;i=function(){var d=Kk(a);h.call(d)}}HQ(function(){YA(e,a,r,i)})}return Kk(a)}VJ=function(r){if(r.tag===13){var e=ol();_p(r,4,e),Ij(r,4)}};XF=function(r){if(r.tag===13){var e=ol();_p(r,67108864,e),Ij(r,67108864)}};GJ=function(r){if(r.tag===13){var e=ol(),t=yp(r);_p(r,t,e),Ij(r,t)}};$J=function(r,e){return e()};sF=function(r,e,t){switch(e){case"input":if(Qk(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+"][type=\"radio\"]"),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=iC(n);if(!i)throw Error(It(90));RJ(n),Qk(n,i)}}}break;case"textarea":OJ(r,t);break;case"select":e=t.value,e!=null&&Qg(r,!!t.multiple,e,!1);}};ZF=$Q;jJ=function(r,e,t,n,i){var o=Mr;Mr|=4;try{return Tm(98,r.bind(null,e,t,n,i))}finally{Mr=o,Mr===0&&(vy(),xc())}};YF=function(){!(Mr&49)&&(J$e(),Ap())};zJ=function(r,e){var t=Mr;Mr|=2;try{return r(e)}finally{Mr=t,Mr===0&&(vy(),xc())}};function QQ(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vb(e))throw Error(It(200));return c6e(r,e,null,t)}var p6e={Events:[pb,Yg,iC,kJ,FJ,Ap,{current:!1}]},Lw={findFiberByHostInstance:xm,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},d6e={bundleType:Lw.bundleType,version:Lw.version,rendererPackageName:Lw.rendererPackageName,rendererConfig:Lw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cm.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=UJ(r),r===null?null:r.stateNode},findFiberByHostInstance:Lw.findFiberByHostInstance||f6e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Dw=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Dw.isDisabled&&Dw.supportsFiber))try{sj=Dw.inject(d6e),Sm=Dw}catch(r){}var Dw;kl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p6e;kl.createPortal=QQ;kl.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(It(188)):Error(It(268,Object.keys(r)));return r=UJ(e),r=r===null?null:r.stateNode,r};kl.flushSync=function(r,e){var t=Mr;if(t&48)return r(e);Mr|=1;try{if(r)return Tm(99,r.bind(null,e))}finally{Mr=t,xc()}};kl.hydrate=function(r,e,t){if(!vb(e))throw Error(It(200));return uC(null,r,e,!0,t)};kl.render=function(r,e,t){if(!vb(e))throw Error(It(200));return uC(null,r,e,!1,t)};kl.unmountComponentAtNode=function(r){if(!vb(r))throw Error(It(40));return r._reactRootContainer?(HQ(function(){uC(null,null,r,!1,function(){r._reactRootContainer=null,r[py]=null})}),!0):!1};kl.unstable_batchedUpdates=$Q;kl.unstable_createPortal=function(r,e){return QQ(r,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};kl.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!vb(t))throw Error(It(200));if(r==null||r._reactInternals===void 0)throw Error(It(38));return uC(r,e,t,!1,n)};kl.version="17.0.2"});var mo=I((Zar,ree)=>{"use strict";function tee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tee)}catch(r){console.error(r)}}tee(),ree.exports=eee()});var At=I((Cj,nee)=>{"use strict";var gb=function(r){return r&&r.Math===Math&&r};nee.exports=gb(typeof globalThis=="object"&&globalThis)||gb(typeof window=="object"&&window)||gb(typeof self=="object"&&self)||gb(typeof global=="object"&&global)||gb(typeof Cj=="object"&&Cj)||function(){return this}()||Function("return this")()});var ut=I((Yar,iee)=>{"use strict";iee.exports=function(r){try{return!!r()}catch(e){return!0}}});var sr=I((Kar,oee)=>{"use strict";var m6e=ut();oee.exports=!m6e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var gy=I((Xar,aee)=>{"use strict";var v6e=ut();aee.exports=!v6e(function(){var r=function(){}.bind();return typeof r!="function"||r.hasOwnProperty("prototype")})});var Ot=I((Jar,see)=>{"use strict";var g6e=gy(),cC=Function.prototype.call;see.exports=g6e?cC.bind(cC):function(){return cC.apply(cC,arguments)}});var yb=I(cee=>{"use strict";var lee={}.propertyIsEnumerable,uee=Object.getOwnPropertyDescriptor,y6e=uee&&!lee.call({1:2},1);cee.f=y6e?function(e){var t=uee(this,e);return!!t&&t.enumerable}:lee});var xs=I((esr,fee)=>{"use strict";fee.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var rt=I((tsr,dee)=>{"use strict";var hee=gy(),pee=Function.prototype,Mj=pee.call,_6e=hee&&pee.bind.bind(Mj,Mj);dee.exports=hee?_6e:function(r){return function(){return Mj.apply(r,arguments)}}});var Zo=I((rsr,vee)=>{"use strict";var mee=rt(),x6e=mee({}.toString),w6e=mee("".slice);vee.exports=function(r){return w6e(x6e(r),8,-1)}});var Pf=I((nsr,gee)=>{"use strict";var b6e=rt(),S6e=ut(),E6e=Zo(),Rj=Object,T6e=b6e("".split);gee.exports=S6e(function(){return!Rj("z").propertyIsEnumerable(0)})?function(r){return E6e(r)==="String"?T6e(r,""):Rj(r)}:Rj});var Ji=I((isr,yee)=>{"use strict";yee.exports=function(r){return r==null}});var Qn=I((osr,_ee)=>{"use strict";var I6e=Ji(),A6e=TypeError;_ee.exports=function(r){if(I6e(r))throw new A6e("Can't call method on "+r);return r}});var Qi=I((asr,xee)=>{"use strict";var C6e=Pf(),M6e=Qn();xee.exports=function(r){return C6e(M6e(r))}});var Rr=I((ssr,wee)=>{"use strict";var Pj=typeof document=="object"&&document.all;wee.exports=typeof Pj=="undefined"&&Pj!==void 0?function(r){return typeof r=="function"||r===Pj}:function(r){return typeof r=="function"}});var xr=I((lsr,bee)=>{"use strict";var R6e=Rr();bee.exports=function(r){return typeof r=="object"?r!==null:R6e(r)}});var _r=I((usr,See)=>{"use strict";var Oj=At(),P6e=Rr(),O6e=function(r){return P6e(r)?r:void 0};See.exports=function(r,e){return arguments.length<2?O6e(Oj[r]):Oj[r]&&Oj[r][e]}});var Yo=I((csr,Eee)=>{"use strict";var L6e=rt();Eee.exports=L6e({}.isPrototypeOf)});var Pu=I((fsr,Aee)=>{"use strict";var D6e=At(),Tee=D6e.navigator,Iee=Tee&&Tee.userAgent;Aee.exports=Iee?String(Iee):""});var wc=I((hsr,Lee)=>{"use strict";var Oee=At(),Lj=Pu(),Cee=Oee.process,Mee=Oee.Deno,Ree=Cee&&Cee.versions||Mee&&Mee.version,Pee=Ree&&Ree.v8,Ou,fC;Pee&&(Ou=Pee.split("."),fC=Ou[0]>0&&Ou[0]<4?1:+(Ou[0]+Ou[1]));!fC&&Lj&&(Ou=Lj.match(/Edge\/(\d+)/),(!Ou||Ou[1]>=74)&&(Ou=Lj.match(/Chrome\/(\d+)/),Ou&&(fC=+Ou[1])));Lee.exports=fC});var Cp=I((psr,Nee)=>{"use strict";var Dee=wc(),N6e=ut(),q6e=At(),k6e=q6e.String;Nee.exports=!!Object.getOwnPropertySymbols&&!N6e(function(){var r=Symbol("symbol detection");return!k6e(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&Dee&&Dee<41})});var Dj=I((dsr,qee)=>{"use strict";var F6e=Cp();qee.exports=F6e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Of=I((msr,kee)=>{"use strict";var j6e=_r(),z6e=Rr(),B6e=Yo(),U6e=Dj(),V6e=Object;kee.exports=U6e?function(r){return typeof r=="symbol"}:function(r){var e=j6e("Symbol");return z6e(e)&&B6e(e.prototype,V6e(r))}});var Mp=I((vsr,Fee)=>{"use strict";var G6e=String;Fee.exports=function(r){try{return G6e(r)}catch(e){return"Object"}}});var gr=I((gsr,jee)=>{"use strict";var $6e=Rr(),H6e=Mp(),W6e=TypeError;jee.exports=function(r){if($6e(r))return r;throw new W6e(H6e(r)+" is not a function")}});var ji=I((ysr,zee)=>{"use strict";var Z6e=gr(),Y6e=Ji();zee.exports=function(r,e){var t=r[e];return Y6e(t)?void 0:Z6e(t)}});var Fj=I((_sr,Bee)=>{"use strict";var Nj=Ot(),qj=Rr(),kj=xr(),K6e=TypeError;Bee.exports=function(r,e){var t,n;if(e==="string"&&qj(t=r.toString)&&!kj(n=Nj(t,r))||qj(t=r.valueOf)&&!kj(n=Nj(t,r))||e!=="string"&&qj(t=r.toString)&&!kj(n=Nj(t,r)))return n;throw new K6e("Can't convert object to primitive value")}});var zr=I((xsr,Uee)=>{"use strict";Uee.exports=!1});var hC=I((wsr,Gee)=>{"use strict";var Vee=At(),X6e=Object.defineProperty;Gee.exports=function(r,e){try{X6e(Vee,r,{value:e,configurable:!0,writable:!0})}catch(t){Vee[r]=e}return e}});var _b=I((bsr,Wee)=>{"use strict";var J6e=zr(),Q6e=At(),eHe=hC(),$ee="__core-js_shared__",Hee=Wee.exports=Q6e[$ee]||eHe($ee,{});(Hee.versions||(Hee.versions=[])).push({version:"3.39.0",mode:J6e?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Lf=I((Ssr,Yee)=>{"use strict";var Zee=_b();Yee.exports=function(r,e){return Zee[r]||(Zee[r]=e||{})}});var Br=I((Esr,Kee)=>{"use strict";var tHe=Qn(),rHe=Object;Kee.exports=function(r){return rHe(tHe(r))}});var Lr=I((Tsr,Xee)=>{"use strict";var nHe=rt(),iHe=Br(),oHe=nHe({}.hasOwnProperty);Xee.exports=Object.hasOwn||function(e,t){return oHe(iHe(e),t)}});var Rp=I((Isr,Jee)=>{"use strict";var aHe=rt(),sHe=0,lHe=Math.random(),uHe=aHe(1 .toString);Jee.exports=function(r){return"Symbol("+(r===void 0?"":r)+")_"+uHe(++sHe+lHe,36)}});var fr=I((Asr,ete)=>{"use strict";var cHe=At(),fHe=Lf(),Qee=Lr(),hHe=Rp(),pHe=Cp(),dHe=Dj(),yy=cHe.Symbol,jj=fHe("wks"),mHe=dHe?yy.for||yy:yy&&yy.withoutSetter||hHe;ete.exports=function(r){return Qee(jj,r)||(jj[r]=pHe&&Qee(yy,r)?yy[r]:mHe("Symbol."+r)),jj[r]}});var xb=I((Csr,nte)=>{"use strict";var vHe=Ot(),tte=xr(),rte=Of(),gHe=ji(),yHe=Fj(),_He=fr(),xHe=TypeError,wHe=_He("toPrimitive");nte.exports=function(r,e){if(!tte(r)||rte(r))return r;var t=gHe(r,wHe),n;if(t){if(e===void 0&&(e="default"),n=vHe(t,r,e),!tte(n)||rte(n))return n;throw new xHe("Can't convert object to primitive value")}return e===void 0&&(e="number"),yHe(r,e)}});var bc=I((Msr,ite)=>{"use strict";var bHe=xb(),SHe=Of();ite.exports=function(r){var e=bHe(r,"string");return SHe(e)?e:e+""}});var wb=I((Rsr,ate)=>{"use strict";var EHe=At(),ote=xr(),zj=EHe.document,THe=ote(zj)&&ote(zj.createElement);ate.exports=function(r){return THe?zj.createElement(r):{}}});var Bj=I((Psr,ste)=>{"use strict";var IHe=sr(),AHe=ut(),CHe=wb();ste.exports=!IHe&&!AHe(function(){return Object.defineProperty(CHe("div"),"a",{get:function(){return 7}}).a!==7})});var Oo=I(ute=>{"use strict";var MHe=sr(),RHe=Ot(),PHe=yb(),OHe=xs(),LHe=Qi(),DHe=bc(),NHe=Lr(),qHe=Bj(),lte=Object.getOwnPropertyDescriptor;ute.f=MHe?lte:function(e,t){if(e=LHe(e),t=DHe(t),qHe)try{return lte(e,t)}catch(n){}if(NHe(e,t))return OHe(!RHe(PHe.f,e,t),e[t])}});var Uj=I((Lsr,cte)=>{"use strict";var kHe=sr(),FHe=ut();cte.exports=kHe&&FHe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Rt=I((Dsr,fte)=>{"use strict";var jHe=xr(),zHe=String,BHe=TypeError;fte.exports=function(r){if(jHe(r))return r;throw new BHe(zHe(r)+" is not an object")}});var Yn=I(pte=>{"use strict";var UHe=sr(),VHe=Bj(),GHe=Uj(),pC=Rt(),hte=bc(),$He=TypeError,Vj=Object.defineProperty,HHe=Object.getOwnPropertyDescriptor,Gj="enumerable",$j="configurable",Hj="writable";pte.f=UHe?GHe?function(e,t,n){if(pC(e),t=hte(t),pC(n),typeof e=="function"&&t==="prototype"&&"value"in n&&Hj in n&&!n[Hj]){var i=HHe(e,t);i&&i[Hj]&&(e[t]=n.value,n={configurable:$j in n?n[$j]:i[$j],enumerable:Gj in n?n[Gj]:i[Gj],writable:!1})}return Vj(e,t,n)}:Vj:function(e,t,n){if(pC(e),t=hte(t),pC(n),VHe)try{return Vj(e,t,n)}catch(i){}if("get"in n||"set"in n)throw new $He("Accessors not supported");return"value"in n&&(e[t]=n.value),e}});var eo=I((qsr,dte)=>{"use strict";var WHe=sr(),ZHe=Yn(),YHe=xs();dte.exports=WHe?function(r,e,t){return ZHe.f(r,e,YHe(1,t))}:function(r,e,t){return r[e]=t,r}});var Pm=I((ksr,vte)=>{"use strict";var Wj=sr(),KHe=Lr(),mte=Function.prototype,XHe=Wj&&Object.getOwnPropertyDescriptor,Zj=KHe(mte,"name"),JHe=Zj&&function(){}.name==="something",QHe=Zj&&(!Wj||Wj&&XHe(mte,"name").configurable);vte.exports={EXISTS:Zj,PROPER:JHe,CONFIGURABLE:QHe}});var bb=I((Fsr,gte)=>{"use strict";var eWe=rt(),tWe=Rr(),Yj=_b(),rWe=eWe(Function.toString);tWe(Yj.inspectSource)||(Yj.inspectSource=function(r){return rWe(r)});gte.exports=Yj.inspectSource});var Kj=I((jsr,_te)=>{"use strict";var nWe=At(),iWe=Rr(),yte=nWe.WeakMap;_te.exports=iWe(yte)&&/native code/.test(String(yte))});var Sb=I((zsr,wte)=>{"use strict";var oWe=Lf(),aWe=Rp(),xte=oWe("keys");wte.exports=function(r){return xte[r]||(xte[r]=aWe(r))}});var _y=I((Bsr,bte)=>{"use strict";bte.exports={}});var yn=I((Usr,Tte)=>{"use strict";var sWe=Kj(),Ete=At(),lWe=xr(),uWe=eo(),Xj=Lr(),Jj=_b(),cWe=Sb(),fWe=_y(),Ste="Object already initialized",Qj=Ete.TypeError,hWe=Ete.WeakMap,dC,Eb,mC,pWe=function(r){return mC(r)?Eb(r):dC(r,{})},dWe=function(r){return function(e){var t;if(!lWe(e)||(t=Eb(e)).type!==r)throw new Qj("Incompatible receiver, "+r+" required");return t}};sWe||Jj.state?(Lu=Jj.state||(Jj.state=new hWe),Lu.get=Lu.get,Lu.has=Lu.has,Lu.set=Lu.set,dC=function(r,e){if(Lu.has(r))throw new Qj(Ste);return e.facade=r,Lu.set(r,e),e},Eb=function(r){return Lu.get(r)||{}},mC=function(r){return Lu.has(r)}):(Om=cWe("state"),fWe[Om]=!0,dC=function(r,e){if(Xj(r,Om))throw new Qj(Ste);return e.facade=r,uWe(r,Om,e),e},Eb=function(r){return Xj(r,Om)?r[Om]:{}},mC=function(r){return Xj(r,Om)});var Lu,Om;Tte.exports={set:dC,get:Eb,has:mC,enforce:pWe,getterFor:dWe}});var Tb=I((Vsr,Cte)=>{"use strict";var tz=rt(),mWe=ut(),vWe=Rr(),vC=Lr(),ez=sr(),gWe=Pm().CONFIGURABLE,yWe=bb(),Ate=yn(),_We=Ate.enforce,xWe=Ate.get,Ite=String,gC=Object.defineProperty,wWe=tz("".slice),bWe=tz("".replace),SWe=tz([].join),EWe=ez&&!mWe(function(){return gC(function(){},"length",{value:8}).length!==8}),TWe=String(String).split("String"),IWe=Cte.exports=function(r,e,t){wWe(Ite(e),0,7)==="Symbol("&&(e="["+bWe(Ite(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!vC(r,"name")||gWe&&r.name!==e)&&(ez?gC(r,"name",{value:e,configurable:!0}):r.name=e),EWe&&t&&vC(t,"arity")&&r.length!==t.arity&&gC(r,"length",{value:t.arity});try{t&&vC(t,"constructor")&&t.constructor?ez&&gC(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch(i){}var n=_We(r);return vC(n,"source")||(n.source=SWe(TWe,typeof e=="string"?e:"")),r};Function.prototype.toString=IWe(function(){return vWe(this)&&xWe(this).source||yWe(this)},"toString")});var Tn=I((Gsr,Mte)=>{"use strict";var AWe=Rr(),CWe=Yn(),MWe=Tb(),RWe=hC();Mte.exports=function(r,e,t,n){n||(n={});var i=n.enumerable,o=n.name!==void 0?n.name:e;if(AWe(t)&&MWe(t,o,n),n.global)i?r[e]=t:RWe(e,t);else{try{n.unsafe?r[e]&&(i=!0):delete r[e]}catch(a){}i?r[e]=t:CWe.f(r,e,{value:t,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return r}});var rz=I(($sr,Rte)=>{"use strict";var PWe=Math.ceil,OWe=Math.floor;Rte.exports=Math.trunc||function(e){var t=+e;return(t>0?OWe:PWe)(t)}});var ni=I((Hsr,Pte)=>{"use strict";var LWe=rz();Pte.exports=function(r){var e=+r;return e!==e||e===0?0:LWe(e)}});var Du=I((Wsr,Ote)=>{"use strict";var DWe=ni(),NWe=Math.max,qWe=Math.min;Ote.exports=function(r,e){var t=DWe(r);return t<0?NWe(t+e,0):qWe(t,e)}});var ws=I((Zsr,Lte)=>{"use strict";var kWe=ni(),FWe=Math.min;Lte.exports=function(r){var e=kWe(r);return e>0?FWe(e,9007199254740991):0}});var Xr=I((Ysr,Dte)=>{"use strict";var jWe=ws();Dte.exports=function(r){return jWe(r.length)}});var xy=I((Ksr,qte)=>{"use strict";var zWe=Qi(),BWe=Du(),UWe=Xr(),Nte=function(r){return function(e,t,n){var i=zWe(e),o=UWe(i);if(o===0)return!r&&-1;var a=BWe(n,o),u;if(r&&t!==t){for(;o>a;)if(u=i[a++],u!==u)return!0}else for(;o>a;a++)if((r||a in i)&&i[a]===t)return r||a||0;return!r&&-1}};qte.exports={includes:Nte(!0),indexOf:Nte(!1)}});var iz=I((Xsr,Fte)=>{"use strict";var VWe=rt(),nz=Lr(),GWe=Qi(),$We=xy().indexOf,HWe=_y(),kte=VWe([].push);Fte.exports=function(r,e){var t=GWe(r),n=0,i=[],o;for(o in t)!nz(HWe,o)&&nz(t,o)&&kte(i,o);for(;e.length>n;)nz(t,o=e[n++])&&(~$We(i,o)||kte(i,o));return i}});var yC=I((Jsr,jte)=>{"use strict";jte.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Pp=I(zte=>{"use strict";var WWe=iz(),ZWe=yC(),YWe=ZWe.concat("length","prototype");zte.f=Object.getOwnPropertyNames||function(e){return WWe(e,YWe)}});var Ib=I(Bte=>{"use strict";Bte.f=Object.getOwnPropertySymbols});var _C=I((tlr,Ute)=>{"use strict";var KWe=_r(),XWe=rt(),JWe=Pp(),QWe=Ib(),e8e=Rt(),t8e=XWe([].concat);Ute.exports=KWe("Reflect","ownKeys")||function(e){var t=JWe.f(e8e(e)),n=QWe.f;return n?t8e(t,n(e)):t}});var Lm=I((rlr,Gte)=>{"use strict";var Vte=Lr(),r8e=_C(),n8e=Oo(),i8e=Yn();Gte.exports=function(r,e,t){for(var n=r8e(e),i=i8e.f,o=n8e.f,a=0;a<n.length;a++){var u=n[a];!Vte(r,u)&&!(t&&Vte(t,u))&&i(r,u,o(e,u))}}});var wy=I((nlr,$te)=>{"use strict";var o8e=ut(),a8e=Rr(),s8e=/#|\.prototype\./,Ab=function(r,e){var t=u8e[l8e(r)];return t===f8e?!0:t===c8e?!1:a8e(e)?o8e(e):!!e},l8e=Ab.normalize=function(r){return String(r).replace(s8e,".").toLowerCase()},u8e=Ab.data={},c8e=Ab.NATIVE="N",f8e=Ab.POLYFILL="P";$te.exports=Ab});var te=I((ilr,Hte)=>{"use strict";var xC=At(),h8e=Oo().f,p8e=eo(),d8e=Tn(),m8e=hC(),v8e=Lm(),g8e=wy();Hte.exports=function(r,e){var t=r.target,n=r.global,i=r.stat,o,a,u,h,d,v;if(n?a=xC:i?a=xC[t]||m8e(t,{}):a=xC[t]&&xC[t].prototype,a)for(u in e){if(d=e[u],r.dontCallGetSet?(v=h8e(a,u),h=v&&v.value):h=a[u],o=g8e(n?u:t+(i?".":"#")+u,r.forced),!o&&h!==void 0){if(typeof d==typeof h)continue;v8e(d,h)}(r.sham||h&&h.sham)&&p8e(d,"sham",!0),d8e(a,u,d,r)}}});var wC=I((olr,Zte)=>{"use strict";var y8e=fr(),_8e=y8e("toStringTag"),Wte={};Wte[_8e]="z";Zte.exports=String(Wte)==="[object z]"});var bs=I((alr,Yte)=>{"use strict";var x8e=wC(),w8e=Rr(),bC=Zo(),b8e=fr(),S8e=b8e("toStringTag"),E8e=Object,T8e=bC(function(){return arguments}())==="Arguments",I8e=function(r,e){try{return r[e]}catch(t){}};Yte.exports=x8e?bC:function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=I8e(e=E8e(r),S8e))=="string"?t:T8e?bC(e):(n=bC(e))==="Object"&&w8e(e.callee)?"Arguments":n}});var br=I((slr,Kte)=>{"use strict";var A8e=bs(),C8e=String;Kte.exports=function(r){if(A8e(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return C8e(r)}});var Dm=I((llr,Xte)=>{"use strict";var M8e=iz(),R8e=yC();Xte.exports=Object.keys||function(e){return M8e(e,R8e)}});var SC=I(Jte=>{"use strict";var P8e=sr(),O8e=Uj(),L8e=Yn(),D8e=Rt(),N8e=Qi(),q8e=Dm();Jte.f=P8e&&!O8e?Object.defineProperties:function(e,t){D8e(e);for(var n=N8e(t),i=q8e(t),o=i.length,a=0,u;o>a;)L8e.f(e,u=i[a++],n[u]);return e}});var oz=I((clr,Qte)=>{"use strict";var k8e=_r();Qte.exports=k8e("document","documentElement")});var zi=I((flr,are)=>{"use strict";var F8e=Rt(),j8e=SC(),ere=yC(),z8e=_y(),B8e=oz(),U8e=wb(),V8e=Sb(),tre=">",rre="<",sz="prototype",lz="script",ire=V8e("IE_PROTO"),az=function(){},ore=function(r){return rre+lz+tre+r+rre+"/"+lz+tre},nre=function(r){r.write(ore("")),r.close();var e=r.parentWindow.Object;return r=null,e},G8e=function(){var r=U8e("iframe"),e="java"+lz+":",t;return r.style.display="none",B8e.appendChild(r),r.src=String(e),t=r.contentWindow.document,t.open(),t.write(ore("document.F=Object")),t.close(),t.F},EC,TC=function(){try{EC=new ActiveXObject("htmlfile")}catch(e){}TC=typeof document!="undefined"?document.domain&&EC?nre(EC):G8e():nre(EC);for(var r=ere.length;r--;)delete TC[sz][ere[r]];return TC()};z8e[ire]=!0;are.exports=Object.create||function(e,t){var n;return e!==null?(az[sz]=F8e(e),n=new az,az[sz]=null,n[ire]=e):n=TC(),t===void 0?n:j8e.f(n,t)}});var Ss=I((hlr,sre)=>{"use strict";var $8e=rt();sre.exports=$8e([].slice)});var IC=I((plr,cre)=>{"use strict";var H8e=Zo(),W8e=Qi(),lre=Pp().f,Z8e=Ss(),ure=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Y8e=function(r){try{return lre(r)}catch(e){return Z8e(ure)}};cre.exports.f=function(e){return ure&&H8e(e)==="Window"?Y8e(e):lre(W8e(e))}});var ii=I((dlr,hre)=>{"use strict";var fre=Tb(),K8e=Yn();hre.exports=function(r,e,t){return t.get&&fre(t.get,e,{getter:!0}),t.set&&fre(t.set,e,{setter:!0}),K8e.f(r,e,t)}});var uz=I(pre=>{"use strict";var X8e=fr();pre.f=X8e});var AC=I((vlr,dre)=>{"use strict";var J8e=At();dre.exports=J8e});var _i=I((glr,vre)=>{"use strict";var mre=AC(),Q8e=Lr(),eZe=uz(),tZe=Yn().f;vre.exports=function(r){var e=mre.Symbol||(mre.Symbol={});Q8e(e,r)||tZe(e,r,{value:eZe.f(r)})}});var cz=I((ylr,gre)=>{"use strict";var rZe=Ot(),nZe=_r(),iZe=fr(),oZe=Tn();gre.exports=function(){var r=nZe("Symbol"),e=r&&r.prototype,t=e&&e.valueOf,n=iZe("toPrimitive");e&&!e[n]&&oZe(e,n,function(i){return rZe(t,this)},{arity:1})}});var Wa=I((_lr,_re)=>{"use strict";var aZe=Yn().f,sZe=Lr(),lZe=fr(),yre=lZe("toStringTag");_re.exports=function(r,e,t){r&&!t&&(r=r.prototype),r&&!sZe(r,yre)&&aZe(r,yre,{configurable:!0,value:e})}});var Df=I((xlr,xre)=>{"use strict";var uZe=Zo(),cZe=rt();xre.exports=function(r){if(uZe(r)==="Function")return cZe(r)}});var Fn=I((wlr,bre)=>{"use strict";var wre=Df(),fZe=gr(),hZe=gy(),pZe=wre(wre.bind);bre.exports=function(r,e){return fZe(r),e===void 0?r:hZe?pZe(r,e):function(){return r.apply(e,arguments)}}});var Nu=I((blr,Sre)=>{"use strict";var dZe=Zo();Sre.exports=Array.isArray||function(e){return dZe(e)==="Array"}});var qu=I((Slr,Cre)=>{"use strict";var mZe=rt(),vZe=ut(),Ere=Rr(),gZe=bs(),yZe=_r(),_Ze=bb(),Tre=function(){},Ire=yZe("Reflect","construct"),fz=/^\s*(?:class|function)\b/,xZe=mZe(fz.exec),wZe=!fz.test(Tre),Cb=function(e){if(!Ere(e))return!1;try{return Ire(Tre,[],e),!0}catch(t){return!1}},Are=function(e){if(!Ere(e))return!1;switch(gZe(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return wZe||!!xZe(fz,_Ze(e))}catch(t){return!0}};Are.sham=!0;Cre.exports=!Ire||vZe(function(){var r;return Cb(Cb.call)||!Cb(Object)||!Cb(function(){r=!0})||r})?Are:Cb});var Ore=I((Elr,Pre)=>{"use strict";var Mre=Nu(),bZe=qu(),SZe=xr(),EZe=fr(),TZe=EZe("species"),Rre=Array;Pre.exports=function(r){var e;return Mre(r)&&(e=r.constructor,bZe(e)&&(e===Rre||Mre(e.prototype))?e=void 0:SZe(e)&&(e=e[TZe],e===null&&(e=void 0))),e===void 0?Rre:e}});var by=I((Tlr,Lre)=>{"use strict";var IZe=Ore();Lre.exports=function(r,e){return new(IZe(r))(e===0?0:e)}});var Bi=I((Ilr,Nre)=>{"use strict";var AZe=Fn(),CZe=rt(),MZe=Pf(),RZe=Br(),PZe=Xr(),OZe=by(),Dre=CZe([].push),Op=function(r){var e=r===1,t=r===2,n=r===3,i=r===4,o=r===6,a=r===7,u=r===5||o;return function(h,d,v,x){for(var S=RZe(h),A=MZe(S),L=PZe(A),q=AZe(d,v),R=0,D=x||OZe,k=e?D(h,L):t||a?D(h,0):void 0,j,$;L>R;R++)if((u||R in A)&&(j=A[R],$=q(j,R,S),r))if(e)k[R]=$;else if($)switch(r){case 3:return!0;case 5:return j;case 6:return R;case 2:Dre(k,j);}else switch(r){case 4:return!1;case 7:Dre(k,j);}return o?-1:n||i?i:k}};Nre.exports={forEach:Op(0),map:Op(1),filter:Op(2),some:Op(3),every:Op(4),find:Op(5),findIndex:Op(6),filterReject:Op(7)}});var Jre=I(()=>{"use strict";var CC=te(),Pb=At(),xz=Ot(),LZe=rt(),DZe=zr(),Sy=sr(),Ey=Cp(),NZe=ut(),Lo=Lr(),qZe=Yo(),mz=Rt(),MC=Qi(),wz=bc(),kZe=br(),vz=xs(),Ty=zi(),Fre=Dm(),FZe=Pp(),jre=IC(),jZe=Ib(),zre=Oo(),Bre=Yn(),zZe=SC(),Ure=yb(),hz=Tn(),BZe=ii(),bz=Lf(),UZe=Sb(),Vre=_y(),qre=Rp(),VZe=fr(),GZe=uz(),$Ze=_i(),HZe=cz(),WZe=Wa(),Gre=yn(),RC=Bi().forEach,Es=UZe("hidden"),PC="Symbol",Rb="prototype",ZZe=Gre.set,kre=Gre.getterFor(PC),Fl=Object[Rb],Nm=Pb.Symbol,Mb=Nm&&Nm[Rb],YZe=Pb.RangeError,KZe=Pb.TypeError,pz=Pb.QObject,$re=zre.f,qm=Bre.f,Hre=jre.f,XZe=Ure.f,Wre=LZe([].push),Nf=bz("symbols"),Ob=bz("op-symbols"),JZe=bz("wks"),gz=!pz||!pz[Rb]||!pz[Rb].findChild,Zre=function(r,e,t){var n=$re(Fl,e);n&&delete Fl[e],qm(r,e,t),n&&r!==Fl&&qm(Fl,e,n)},yz=Sy&&NZe(function(){return Ty(qm({},"a",{get:function(){return qm(this,"a",{value:7}).a}})).a!==7})?Zre:qm,dz=function(r,e){var t=Nf[r]=Ty(Mb);return ZZe(t,{type:PC,tag:r,description:e}),Sy||(t.description=e),t},OC=function(e,t,n){e===Fl&&OC(Ob,t,n),mz(e);var i=wz(t);return mz(n),Lo(Nf,i)?(n.enumerable?(Lo(e,Es)&&e[Es][i]&&(e[Es][i]=!1),n=Ty(n,{enumerable:vz(0,!1)})):(Lo(e,Es)||qm(e,Es,vz(1,Ty(null))),e[Es][i]=!0),yz(e,i,n)):qm(e,i,n)},Sz=function(e,t){mz(e);var n=MC(t),i=Fre(n).concat(Xre(n));return RC(i,function(o){(!Sy||xz(_z,n,o))&&OC(e,o,n[o])}),e},QZe=function(e,t){return t===void 0?Ty(e):Sz(Ty(e),t)},_z=function(e){var t=wz(e),n=xz(XZe,this,t);return this===Fl&&Lo(Nf,t)&&!Lo(Ob,t)?!1:n||!Lo(this,t)||!Lo(Nf,t)||Lo(this,Es)&&this[Es][t]?n:!0},Yre=function(e,t){var n=MC(e),i=wz(t);if(!(n===Fl&&Lo(Nf,i)&&!Lo(Ob,i))){var o=$re(n,i);return o&&Lo(Nf,i)&&!(Lo(n,Es)&&n[Es][i])&&(o.enumerable=!0),o}},Kre=function(e){var t=Hre(MC(e)),n=[];return RC(t,function(i){!Lo(Nf,i)&&!Lo(Vre,i)&&Wre(n,i)}),n},Xre=function(r){var e=r===Fl,t=Hre(e?Ob:MC(r)),n=[];return RC(t,function(i){Lo(Nf,i)&&(!e||Lo(Fl,i))&&Wre(n,Nf[i])}),n};Ey||(Nm=function(){if(qZe(Mb,this))throw new KZe("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:kZe(arguments[0]),t=qre(e),n=function(i){var o=this===void 0?Pb:this;o===Fl&&xz(n,Ob,i),Lo(o,Es)&&Lo(o[Es],t)&&(o[Es][t]=!1);var a=vz(1,i);try{yz(o,t,a)}catch(u){if(!(u instanceof YZe))throw u;Zre(o,t,a)}};return Sy&&gz&&yz(Fl,t,{configurable:!0,set:n}),dz(t,e)},Mb=Nm[Rb],hz(Mb,"toString",function(){return kre(this).tag}),hz(Nm,"withoutSetter",function(r){return dz(qre(r),r)}),Ure.f=_z,Bre.f=OC,zZe.f=Sz,zre.f=Yre,FZe.f=jre.f=Kre,jZe.f=Xre,GZe.f=function(r){return dz(VZe(r),r)},Sy&&(BZe(Mb,"description",{configurable:!0,get:function(){return kre(this).description}}),DZe||hz(Fl,"propertyIsEnumerable",_z,{unsafe:!0})));CC({global:!0,constructor:!0,wrap:!0,forced:!Ey,sham:!Ey},{Symbol:Nm});RC(Fre(JZe),function(r){$Ze(r)});CC({target:PC,stat:!0,forced:!Ey},{useSetter:function(){gz=!0},useSimple:function(){gz=!1}});CC({target:"Object",stat:!0,forced:!Ey,sham:!Sy},{create:QZe,defineProperty:OC,defineProperties:Sz,getOwnPropertyDescriptor:Yre});CC({target:"Object",stat:!0,forced:!Ey},{getOwnPropertyNames:Kre});HZe();WZe(Nm,PC);Vre[Es]=!0});var Ez=I((Mlr,Qre)=>{"use strict";var eYe=Cp();Qre.exports=eYe&&!!Symbol.for&&!!Symbol.keyFor});var tne=I(()=>{"use strict";var tYe=te(),rYe=_r(),nYe=Lr(),iYe=br(),ene=Lf(),oYe=Ez(),Tz=ene("string-to-symbol-registry"),aYe=ene("symbol-to-string-registry");tYe({target:"Symbol",stat:!0,forced:!oYe},{for:function(r){var e=iYe(r);if(nYe(Tz,e))return Tz[e];var t=rYe("Symbol")(e);return Tz[e]=t,aYe[t]=e,t}})});var nne=I(()=>{"use strict";var sYe=te(),lYe=Lr(),uYe=Of(),cYe=Mp(),fYe=Lf(),hYe=Ez(),rne=fYe("symbol-to-string-registry");sYe({target:"Symbol",stat:!0,forced:!hYe},{keyFor:function(e){if(!uYe(e))throw new TypeError(cYe(e)+" is not a symbol");if(lYe(rne,e))return rne[e]}})});var _a=I((Dlr,sne)=>{"use strict";var pYe=gy(),ane=Function.prototype,ine=ane.apply,one=ane.call;sne.exports=typeof Reflect=="object"&&Reflect.apply||(pYe?one.bind(ine):function(){return one.apply(ine,arguments)})});var Iz=I((Nlr,fne)=>{"use strict";var dYe=rt(),lne=Nu(),mYe=Rr(),une=Zo(),vYe=br(),cne=dYe([].push);fne.exports=function(r){if(mYe(r))return r;if(lne(r)){for(var e=r.length,t=[],n=0;n<e;n++){var i=r[n];typeof i=="string"?cne(t,i):(typeof i=="number"||une(i)==="Number"||une(i)==="String")&&cne(t,vYe(i))}var o=t.length,a=!0;return function(u,h){if(a)return a=!1,h;if(lne(this))return h;for(var d=0;d<o;d++)if(t[d]===u)return h}}}});var Az=I(()=>{"use strict";var gYe=te(),_ne=_r(),xne=_a(),yYe=Ot(),Lb=rt(),wne=ut(),hne=Rr(),pne=Of(),bne=Ss(),_Ye=Iz(),xYe=Cp(),wYe=String,Lp=_ne("JSON","stringify"),LC=Lb(/./.exec),dne=Lb("".charAt),bYe=Lb("".charCodeAt),SYe=Lb("".replace),EYe=Lb(1 .toString),TYe=/[\uD800-\uDFFF]/g,mne=/^[\uD800-\uDBFF]$/,vne=/^[\uDC00-\uDFFF]$/,gne=!xYe||wne(function(){var r=_ne("Symbol")("stringify detection");return Lp([r])!=="[null]"||Lp({a:r})!=="{}"||Lp(Object(r))!=="{}"}),yne=wne(function(){return Lp("\uDF06\uD834")!=="\"\\udf06\\ud834\""||Lp("\uDEAD")!=="\"\\udead\""}),IYe=function(r,e){var t=bne(arguments),n=_Ye(e);if(!(!hne(n)&&(r===void 0||pne(r))))return t[1]=function(i,o){if(hne(n)&&(o=yYe(n,this,wYe(i),o)),!pne(o))return o},xne(Lp,null,t)},AYe=function(r,e,t){var n=dne(t,e-1),i=dne(t,e+1);return LC(mne,r)&&!LC(vne,i)||LC(vne,r)&&!LC(mne,n)?"\\u"+EYe(bYe(r,0),16):r};Lp&&gYe({target:"JSON",stat:!0,arity:3,forced:gne||yne},{stringify:function(e,t,n){var i=bne(arguments),o=xne(gne?IYe:Lp,null,i);return yne&&typeof o=="string"?SYe(o,TYe,AYe):o}})});var Ene=I(()=>{"use strict";var CYe=te(),MYe=Cp(),RYe=ut(),Sne=Ib(),PYe=Br(),OYe=!MYe||RYe(function(){Sne.f(1)});CYe({target:"Object",stat:!0,forced:OYe},{getOwnPropertySymbols:function(e){var t=Sne.f;return t?t(PYe(e)):[]}})});var Tne=I(()=>{"use strict";Jre();tne();nne();Az();Ene()});var One=I(()=>{"use strict";var LYe=te(),DYe=sr(),NYe=At(),DC=rt(),qYe=Lr(),kYe=Rr(),FYe=Yo(),jYe=br(),zYe=ii(),BYe=Lm(),qf=NYe.Symbol,km=qf&&qf.prototype;DYe&&kYe(qf)&&(!("description"in km)||qf().description!==void 0)&&(Cz={},Db=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:jYe(arguments[0]),t=FYe(km,this)?new qf(e):e===void 0?qf():qf(e);return e===""&&(Cz[t]=!0),t},BYe(Db,qf),Db.prototype=km,km.constructor=Db,Ine=String(qf("description detection"))==="Symbol(description detection)",Ane=DC(km.valueOf),Cne=DC(km.toString),Mne=/^Symbol\((.*)\)[^)]+$/,Rne=DC("".replace),Pne=DC("".slice),zYe(km,"description",{configurable:!0,get:function(){var e=Ane(this);if(qYe(Cz,e))return"";var t=Cne(e),n=Ine?Pne(t,7,-1):Rne(t,Mne,"$1");return n===""?void 0:n}}),LYe({global:!0,constructor:!0,forced:!0},{Symbol:Db}));var Cz,Db,Ine,Ane,Cne,Mne,Rne,Pne});var Lne=I(()=>{"use strict";var UYe=_i();UYe("asyncIterator")});var Dne=I(()=>{"use strict";var VYe=_i();VYe("hasInstance")});var Nne=I(()=>{"use strict";var GYe=_i();GYe("isConcatSpreadable")});var qne=I(()=>{"use strict";var $Ye=_i();$Ye("iterator")});var kne=I(()=>{"use strict";var HYe=_i();HYe("match")});var Fne=I(()=>{"use strict";var WYe=_i();WYe("matchAll")});var jne=I(()=>{"use strict";var ZYe=_i();ZYe("replace")});var zne=I(()=>{"use strict";var YYe=_i();YYe("search")});var Bne=I(()=>{"use strict";var KYe=_i();KYe("species")});var Une=I(()=>{"use strict";var XYe=_i();XYe("split")});var Vne=I(()=>{"use strict";var JYe=_i(),QYe=cz();JYe("toPrimitive");QYe()});var Gne=I(()=>{"use strict";var eKe=_r(),tKe=_i(),rKe=Wa();tKe("toStringTag");rKe(eKe("Symbol"),"Symbol")});var $ne=I(()=>{"use strict";var nKe=_i();nKe("unscopables")});var Nb=I((vur,Hne)=>{"use strict";var iKe=rt(),oKe=gr();Hne.exports=function(r,e,t){try{return iKe(oKe(Object.getOwnPropertyDescriptor(r,e)[t]))}catch(n){}}});var Mz=I((gur,Wne)=>{"use strict";var aKe=xr();Wne.exports=function(r){return aKe(r)||r===null}});var Rz=I((yur,Zne)=>{"use strict";var sKe=Mz(),lKe=String,uKe=TypeError;Zne.exports=function(r){if(sKe(r))return r;throw new uKe("Can't set "+lKe(r)+" as a prototype")}});var jl=I((_ur,Yne)=>{"use strict";var cKe=Nb(),fKe=xr(),hKe=Qn(),pKe=Rz();Yne.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,e={},t;try{t=cKe(Object.prototype,"__proto__","set"),t(e,[]),r=e instanceof Array}catch(n){}return function(i,o){return hKe(i),pKe(o),fKe(i)&&(r?t(i,o):i.__proto__=o),i}}():void 0)});var Pz=I((xur,Kne)=>{"use strict";var dKe=Yn().f;Kne.exports=function(r,e,t){t in r||dKe(r,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}});var Dp=I((wur,Jne)=>{"use strict";var mKe=Rr(),vKe=xr(),Xne=jl();Jne.exports=function(r,e,t){var n,i;return Xne&&mKe(n=e.constructor)&&n!==t&&vKe(i=n.prototype)&&i!==t.prototype&&Xne(r,i),r}});var Fm=I((bur,Qne)=>{"use strict";var gKe=br();Qne.exports=function(r,e){return r===void 0?arguments.length<2?"":e:gKe(r)}});var Oz=I((Sur,eie)=>{"use strict";var yKe=xr(),_Ke=eo();eie.exports=function(r,e){yKe(e)&&"cause"in e&&_Ke(r,"cause",e.cause)}});var NC=I((Eur,nie)=>{"use strict";var xKe=rt(),tie=Error,wKe=xKe("".replace),bKe=function(r){return String(new tie(r).stack)}("zxcasd"),rie=/\n\s*at [^:]*:[^\n]*/,SKe=rie.test(bKe);nie.exports=function(r,e){if(SKe&&typeof r=="string"&&!tie.prepareStackTrace)for(;e--;)r=wKe(r,rie,"");return r}});var Lz=I((Tur,iie)=>{"use strict";var EKe=ut(),TKe=xs();iie.exports=!EKe(function(){var r=new Error("a");return"stack"in r?(Object.defineProperty(r,"stack",TKe(1,7)),r.stack!==7):!0})});var qC=I((Iur,aie)=>{"use strict";var IKe=eo(),AKe=NC(),CKe=Lz(),oie=Error.captureStackTrace;aie.exports=function(r,e,t,n){CKe&&(oie?oie(r,e):IKe(r,"stack",AKe(t,n)))}});var Dz=I((Aur,pie)=>{"use strict";var sie=_r(),MKe=Lr(),lie=eo(),RKe=Yo(),uie=jl(),cie=Lm(),fie=Pz(),PKe=Dp(),OKe=Fm(),LKe=Oz(),DKe=qC(),NKe=sr(),hie=zr();pie.exports=function(r,e,t,n){var i="stackTraceLimit",o=n?2:1,a=r.split("."),u=a[a.length-1],h=sie.apply(null,a);if(h){var d=h.prototype;if(!hie&&MKe(d,"cause")&&delete d.cause,!t)return h;var v=sie("Error"),x=e(function(S,A){var L=OKe(n?A:S,void 0),q=n?new h(S):new h;return L!==void 0&&lie(q,"message",L),DKe(q,x,q.stack,2),this&&RKe(d,this)&&PKe(q,this,x),arguments.length>o&&LKe(q,arguments[o]),q});if(x.prototype=d,u!=="Error"?uie?uie(x,v):cie(x,v,{name:!0}):NKe&&i in h&&(fie(x,h,i),fie(x,h,"prepareStackTrace")),cie(x,h),!hie)try{d.name!==u&&lie(d,"name",u),d.constructor=x}catch(S){}return x}}});var gie=I(()=>{"use strict";var mie=te(),qKe=At(),Sc=_a(),vie=Dz(),Nz="WebAssembly",die=qKe[Nz],kC=new Error("e",{cause:7}).cause!==7,jm=function(r,e){var t={};t[r]=vie(r,e,kC),mie({global:!0,constructor:!0,arity:1,forced:kC},t)},qz=function(r,e){if(die&&die[r]){var t={};t[r]=vie(Nz+"."+r,e,kC),mie({target:Nz,stat:!0,constructor:!0,arity:1,forced:kC},t)}};jm("Error",function(r){return function(t){return Sc(r,this,arguments)}});jm("EvalError",function(r){return function(t){return Sc(r,this,arguments)}});jm("RangeError",function(r){return function(t){return Sc(r,this,arguments)}});jm("ReferenceError",function(r){return function(t){return Sc(r,this,arguments)}});jm("SyntaxError",function(r){return function(t){return Sc(r,this,arguments)}});jm("TypeError",function(r){return function(t){return Sc(r,this,arguments)}});jm("URIError",function(r){return function(t){return Sc(r,this,arguments)}});qz("CompileError",function(r){return function(t){return Sc(r,this,arguments)}});qz("LinkError",function(r){return function(t){return Sc(r,this,arguments)}});qz("RuntimeError",function(r){return function(t){return Sc(r,this,arguments)}})});var kz=I((Rur,_ie)=>{"use strict";var kKe=sr(),FKe=ut(),jKe=Rt(),yie=Fm(),FC=Error.prototype.toString,zKe=FKe(function(){if(kKe){var r=Object.create(Object.defineProperty({},"name",{get:function(){return this===r}}));if(FC.call(r)!=="true")return!0}return FC.call({message:1,name:2})!=="2: 1"||FC.call({})!=="Error"});_ie.exports=zKe?function(){var e=jKe(this),t=yie(e.name,"Error"),n=yie(e.message);return t?n?t+": "+n:t:n}:FC});var bie=I(()=>{"use strict";var BKe=Tn(),xie=kz(),wie=Error.prototype;wie.toString!==xie&&BKe(wie,"toString",xie)});var jC=I((Lur,Sie)=>{"use strict";var UKe=ut();Sie.exports=!UKe(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})});var to=I((Dur,Tie)=>{"use strict";var VKe=Lr(),GKe=Rr(),$Ke=Br(),HKe=Sb(),WKe=jC(),Eie=HKe("IE_PROTO"),Fz=Object,ZKe=Fz.prototype;Tie.exports=WKe?Fz.getPrototypeOf:function(r){var e=$Ke(r);if(VKe(e,Eie))return e[Eie];var t=e.constructor;return GKe(t)&&e instanceof t?t.prototype:e instanceof Fz?ZKe:null}});var zm=I((Nur,Iie)=>{"use strict";Iie.exports={}});var zC=I((qur,Aie)=>{"use strict";var YKe=fr(),KKe=zm(),XKe=YKe("iterator"),JKe=Array.prototype;Aie.exports=function(r){return r!==void 0&&(KKe.Array===r||JKe[XKe]===r)}});var Ec=I((kur,Mie)=>{"use strict";var QKe=bs(),Cie=ji(),e9e=Ji(),t9e=zm(),r9e=fr(),n9e=r9e("iterator");Mie.exports=function(r){if(!e9e(r))return Cie(r,n9e)||Cie(r,"@@iterator")||t9e[QKe(r)]}});var Np=I((Fur,Rie)=>{"use strict";var i9e=Ot(),o9e=gr(),a9e=Rt(),s9e=Mp(),l9e=Ec(),u9e=TypeError;Rie.exports=function(r,e){var t=arguments.length<2?l9e(r):e;if(o9e(t))return a9e(i9e(t,r));throw new u9e(s9e(r)+" is not iterable")}});var kf=I((jur,Oie)=>{"use strict";var c9e=Ot(),Pie=Rt(),f9e=ji();Oie.exports=function(r,e,t){var n,i;Pie(r);try{if(n=f9e(r,"return"),!n){if(e==="throw")throw t;return t}n=c9e(n,r)}catch(o){i=!0,n=o}if(e==="throw")throw t;if(i)throw n;return Pie(n),t}});var xi=I((zur,qie)=>{"use strict";var h9e=Fn(),p9e=Ot(),d9e=Rt(),m9e=Mp(),v9e=zC(),g9e=Xr(),Lie=Yo(),y9e=Np(),_9e=Ec(),Die=kf(),x9e=TypeError,BC=function(r,e){this.stopped=r,this.result=e},Nie=BC.prototype;qie.exports=function(r,e,t){var n=t&&t.that,i=!!(t&&t.AS_ENTRIES),o=!!(t&&t.IS_RECORD),a=!!(t&&t.IS_ITERATOR),u=!!(t&&t.INTERRUPTED),h=h9e(e,n),d,v,x,S,A,L,q,R=function(k){return d&&Die(d,"normal",k),new BC(!0,k)},D=function(k){return i?(d9e(k),u?h(k[0],k[1],R):h(k[0],k[1])):u?h(k,R):h(k)};if(o)d=r.iterator;else if(a)d=r;else{if(v=_9e(r),!v)throw new x9e(m9e(r)+" is not iterable");if(v9e(v)){for(x=0,S=g9e(r);S>x;x++)if(A=D(r[x]),A&&Lie(Nie,A))return A;return new BC(!1)}d=y9e(r,v)}for(L=o?r.next:d.next;!(q=p9e(L,d)).done;){try{A=D(q.value)}catch(k){Die(d,"throw",k)}if(typeof A=="object"&&A&&Lie(Nie,A))return A}return new BC(!1)}});var Fie=I(()=>{"use strict";var w9e=te(),b9e=Yo(),S9e=to(),UC=jl(),E9e=Lm(),kie=zi(),jz=eo(),zz=xs(),T9e=Oz(),I9e=qC(),A9e=xi(),C9e=Fm(),M9e=fr(),R9e=M9e("toStringTag"),VC=Error,P9e=[].push,Iy=function(e,t){var n=b9e(Bz,this),i;UC?i=UC(new VC,n?S9e(this):Bz):(i=n?this:kie(Bz),jz(i,R9e,"Error")),t!==void 0&&jz(i,"message",C9e(t)),I9e(i,Iy,i.stack,1),arguments.length>2&&T9e(i,arguments[2]);var o=[];return A9e(e,P9e,{that:o}),jz(i,"errors",o),i};UC?UC(Iy,VC):E9e(Iy,VC,{name:!0});var Bz=Iy.prototype=kie(VC.prototype,{constructor:zz(1,Iy),message:zz(1,""),name:zz(1,"AggregateError")});w9e({global:!0,constructor:!0,arity:2},{AggregateError:Iy})});var Uz=I(()=>{"use strict";Fie()});var Uie=I(()=>{"use strict";var O9e=te(),L9e=_r(),D9e=_a(),jie=ut(),N9e=Dz(),Vz="AggregateError",zie=L9e(Vz),Bie=!jie(function(){return zie([1]).errors[0]!==1})&&jie(function(){return zie([1],Vz,{cause:7}).cause!==7});O9e({global:!0,constructor:!0,arity:2,forced:Bie},{AggregateError:N9e(Vz,function(r){return function(t,n){return D9e(r,this,arguments)}},Bie,!0)})});var wi=I((Wur,Vie)=>{"use strict";var q9e=fr(),k9e=zi(),F9e=Yn().f,Gz=q9e("unscopables"),$z=Array.prototype;$z[Gz]===void 0&&F9e($z,Gz,{configurable:!0,value:k9e(null)});Vie.exports=function(r){$z[Gz][r]=!0}});var Hz=I(()=>{"use strict";var j9e=te(),z9e=Br(),B9e=Xr(),U9e=ni(),V9e=wi();j9e({target:"Array",proto:!0},{at:function(e){var t=z9e(this),n=B9e(t),i=U9e(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:t[o]}});V9e("at")});var qp=I((Kur,Gie)=>{"use strict";var G9e=TypeError,$9e=9007199254740991;Gie.exports=function(r){if(r>$9e)throw G9e("Maximum allowed index exceeded");return r}});var zl=I((Xur,$ie)=>{"use strict";var H9e=sr(),W9e=Yn(),Z9e=xs();$ie.exports=function(r,e,t){H9e?W9e.f(r,e,Z9e(0,t)):r[e]=t}});var Ay=I((Jur,Hie)=>{"use strict";var Y9e=ut(),K9e=fr(),X9e=wc(),J9e=K9e("species");Hie.exports=function(r){return X9e>=51||!Y9e(function(){var e=[],t=e.constructor={};return t[J9e]=function(){return{foo:1}},e[r](Boolean).foo!==1})}});var Kie=I(()=>{"use strict";var Q9e=te(),eXe=ut(),tXe=Nu(),rXe=xr(),nXe=Br(),iXe=Xr(),Wie=qp(),Zie=zl(),oXe=by(),aXe=Ay(),sXe=fr(),lXe=wc(),Yie=sXe("isConcatSpreadable"),uXe=lXe>=51||!eXe(function(){var r=[];return r[Yie]=!1,r.concat()[0]!==r}),cXe=function(r){if(!rXe(r))return!1;var e=r[Yie];return e!==void 0?!!e:tXe(r)},fXe=!uXe||!aXe("concat");Q9e({target:"Array",proto:!0,arity:1,forced:fXe},{concat:function(e){var t=nXe(this),n=oXe(t,0),i=0,o,a,u,h,d;for(o=-1,u=arguments.length;o<u;o++)if(d=o===-1?t:arguments[o],cXe(d))for(h=iXe(d),Wie(i+h),a=0;a<h;a++,i++)a in d&&Zie(n,i,d[a]);else Wie(i+1),Zie(n,i++,d);return n.length=i,n}})});var qb=I((tcr,Jie)=>{"use strict";var Xie=Mp(),hXe=TypeError;Jie.exports=function(r,e){if(!delete r[e])throw new hXe("Cannot delete property "+Xie(e)+" of "+Xie(r))}});var Zz=I((rcr,Qie)=>{"use strict";var pXe=Br(),Wz=Du(),dXe=Xr(),mXe=qb(),vXe=Math.min;Qie.exports=[].copyWithin||function(e,t){var n=pXe(this),i=dXe(n),o=Wz(e,i),a=Wz(t,i),u=arguments.length>2?arguments[2]:void 0,h=vXe((u===void 0?i:Wz(u,i))-a,i-o),d=1;for(a<o&&o<a+h&&(d=-1,a+=h-1,o+=h-1);h-->0;)a in n?n[o]=n[a]:mXe(n,o),o+=d,a+=d;return n}});var eoe=I(()=>{"use strict";var gXe=te(),yXe=Zz(),_Xe=wi();gXe({target:"Array",proto:!0},{copyWithin:yXe});_Xe("copyWithin")});var Bl=I((ocr,toe)=>{"use strict";var xXe=ut();toe.exports=function(r,e){var t=[][r];return!!t&&xXe(function(){t.call(null,e||function(){return 1},1)})}});var roe=I(()=>{"use strict";var wXe=te(),bXe=Bi().every,SXe=Bl(),EXe=SXe("every");wXe({target:"Array",proto:!0,forced:!EXe},{every:function(e){return bXe(this,e,arguments.length>1?arguments[1]:void 0)}})});var GC=I((lcr,ioe)=>{"use strict";var TXe=Br(),noe=Du(),IXe=Xr();ioe.exports=function(e){for(var t=TXe(this),n=IXe(t),i=arguments.length,o=noe(i>1?arguments[1]:void 0,n),a=i>2?arguments[2]:void 0,u=a===void 0?n:noe(a,n);u>o;)t[o++]=e;return t}});var ooe=I(()=>{"use strict";var AXe=te(),CXe=GC(),MXe=wi();AXe({target:"Array",proto:!0},{fill:CXe});MXe("fill")});var aoe=I(()=>{"use strict";var RXe=te(),PXe=Bi().filter,OXe=Ay(),LXe=OXe("filter");RXe({target:"Array",proto:!0,forced:!LXe},{filter:function(e){return PXe(this,e,arguments.length>1?arguments[1]:void 0)}})});var loe=I(()=>{"use strict";var DXe=te(),NXe=Bi().find,qXe=wi(),Yz="find",soe=!0;Yz in[]&&Array(1)[Yz](function(){soe=!1});DXe({target:"Array",proto:!0,forced:soe},{find:function(e){return NXe(this,e,arguments.length>1?arguments[1]:void 0)}});qXe(Yz)});var coe=I(()=>{"use strict";var kXe=te(),FXe=Bi().findIndex,jXe=wi(),Kz="findIndex",uoe=!0;Kz in[]&&Array(1)[Kz](function(){uoe=!1});kXe({target:"Array",proto:!0,forced:uoe},{findIndex:function(e){return FXe(this,e,arguments.length>1?arguments[1]:void 0)}});jXe(Kz)});var kb=I((gcr,hoe)=>{"use strict";var zXe=Fn(),BXe=Pf(),UXe=Br(),VXe=Xr(),foe=function(r){var e=r===1;return function(t,n,i){for(var o=UXe(t),a=BXe(o),u=VXe(a),h=zXe(n,i),d,v;u-->0;)if(d=a[u],v=h(d,u,o),v)switch(r){case 0:return d;case 1:return u;}return e?-1:void 0}};hoe.exports={findLast:foe(0),findLastIndex:foe(1)}});var Xz=I(()=>{"use strict";var GXe=te(),$Xe=kb().findLast,HXe=wi();GXe({target:"Array",proto:!0},{findLast:function(e){return $Xe(this,e,arguments.length>1?arguments[1]:void 0)}});HXe("findLast")});var Jz=I(()=>{"use strict";var WXe=te(),ZXe=kb().findLastIndex,YXe=wi();WXe({target:"Array",proto:!0},{findLastIndex:function(e){return ZXe(this,e,arguments.length>1?arguments[1]:void 0)}});YXe("findLastIndex")});var Qz=I((bcr,doe)=>{"use strict";var KXe=Nu(),XXe=Xr(),JXe=qp(),QXe=Fn(),poe=function(r,e,t,n,i,o,a,u){for(var h=i,d=0,v=a?QXe(a,u):!1,x,S;d<n;)d in t&&(x=v?v(t[d],d,e):t[d],o>0&&KXe(x)?(S=XXe(x),h=poe(r,e,x,S,h,o-1)-1):(JXe(h+1),r[h]=x),h++),d++;return h};doe.exports=poe});var moe=I(()=>{"use strict";var e7e=te(),t7e=Qz(),r7e=Br(),n7e=Xr(),i7e=ni(),o7e=by();e7e({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=r7e(this),n=n7e(t),i=o7e(t,0);return i.length=t7e(i,t,t,n,0,e===void 0?1:i7e(e)),i}})});var voe=I(()=>{"use strict";var a7e=te(),s7e=Qz(),l7e=gr(),u7e=Br(),c7e=Xr(),f7e=by();a7e({target:"Array",proto:!0},{flatMap:function(e){var t=u7e(this),n=c7e(t),i;return l7e(e),i=f7e(t,0),i.length=s7e(i,t,t,n,0,1,e,arguments.length>1?arguments[1]:void 0),i}})});var e4=I((Acr,goe)=>{"use strict";var h7e=Bi().forEach,p7e=Bl(),d7e=p7e("forEach");goe.exports=d7e?[].forEach:function(e){return h7e(this,e,arguments.length>1?arguments[1]:void 0)}});var _oe=I(()=>{"use strict";var m7e=te(),yoe=e4();m7e({target:"Array",proto:!0,forced:[].forEach!==yoe},{forEach:yoe})});var $C=I((Rcr,xoe)=>{"use strict";var v7e=Rt(),g7e=kf();xoe.exports=function(r,e,t,n){try{return n?e(v7e(t)[0],t[1]):e(t)}catch(i){g7e(r,"throw",i)}}});var t4=I((Pcr,Soe)=>{"use strict";var y7e=Fn(),_7e=Ot(),x7e=Br(),w7e=$C(),b7e=zC(),S7e=qu(),E7e=Xr(),woe=zl(),T7e=Np(),I7e=Ec(),boe=Array;Soe.exports=function(e){var t=x7e(e),n=S7e(this),i=arguments.length,o=i>1?arguments[1]:void 0,a=o!==void 0;a&&(o=y7e(o,i>2?arguments[2]:void 0));var u=I7e(t),h=0,d,v,x,S,A,L;if(u&&!(this===boe&&b7e(u)))for(v=n?new this:[],S=T7e(t,u),A=S.next;!(x=_7e(A,S)).done;h++)L=a?w7e(S,o,[x.value,h],!0):x.value,woe(v,h,L);else for(d=E7e(t),v=n?new this(d):boe(d);d>h;h++)L=a?o(t[h],h):t[h],woe(v,h,L);return v.length=h,v}});var Fb=I((Ocr,Aoe)=>{"use strict";var A7e=fr(),Toe=A7e("iterator"),Ioe=!1;try{Eoe=0,r4={next:function(){return{done:!!Eoe++}},return:function(){Ioe=!0}},r4[Toe]=function(){return this},Array.from(r4,function(){throw 2})}catch(r){}var Eoe,r4;Aoe.exports=function(r,e){try{if(!e&&!Ioe)return!1}catch(i){return!1}var t=!1;try{var n={};n[Toe]=function(){return{next:function(){return{done:t=!0}}}},r(n)}catch(i){}return t}});var Coe=I(()=>{"use strict";var C7e=te(),M7e=t4(),R7e=Fb(),P7e=!R7e(function(r){Array.from(r)});C7e({target:"Array",stat:!0,forced:P7e},{from:M7e})});var Moe=I(()=>{"use strict";var O7e=te(),L7e=xy().includes,D7e=ut(),N7e=wi(),q7e=D7e(function(){return!Array(1).includes()});O7e({target:"Array",proto:!0,forced:q7e},{includes:function(e){return L7e(this,e,arguments.length>1?arguments[1]:void 0)}});N7e("includes")});var Poe=I(()=>{"use strict";var k7e=te(),F7e=Df(),j7e=xy().indexOf,z7e=Bl(),n4=F7e([].indexOf),Roe=!!n4&&1/n4([1],1,-0)<0,B7e=Roe||!z7e("indexOf");k7e({target:"Array",proto:!0,forced:B7e},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Roe?n4(this,e,t)||0:j7e(this,e,t)}})});var Ooe=I(()=>{"use strict";var U7e=te(),V7e=Nu();U7e({target:"Array",stat:!0},{isArray:V7e})});var Bm=I((Bcr,Noe)=>{"use strict";var G7e=ut(),$7e=Rr(),H7e=xr(),W7e=zi(),Loe=to(),Z7e=Tn(),Y7e=fr(),K7e=zr(),a4=Y7e("iterator"),Doe=!1,Ff,i4,o4;[].keys&&(o4=[].keys(),"next"in o4?(i4=Loe(Loe(o4)),i4!==Object.prototype&&(Ff=i4)):Doe=!0);var X7e=!H7e(Ff)||G7e(function(){var r={};return Ff[a4].call(r)!==r});X7e?Ff={}:K7e&&(Ff=W7e(Ff));$7e(Ff[a4])||Z7e(Ff,a4,function(){return this});Noe.exports={IteratorPrototype:Ff,BUGGY_SAFARI_ITERATORS:Doe}});var kp=I((Ucr,qoe)=>{"use strict";var J7e=Bm().IteratorPrototype,Q7e=zi(),eJe=xs(),tJe=Wa(),rJe=zm(),nJe=function(){return this};qoe.exports=function(r,e,t,n){var i=e+" Iterator";return r.prototype=Q7e(J7e,{next:eJe(+!n,t)}),tJe(r,i,!1,!0),rJe[i]=nJe,r}});var ZC=I((Vcr,Hoe)=>{"use strict";var iJe=te(),oJe=Ot(),HC=zr(),Goe=Pm(),aJe=Rr(),sJe=kp(),koe=to(),Foe=jl(),lJe=Wa(),uJe=eo(),s4=Tn(),cJe=fr(),joe=zm(),$oe=Bm(),fJe=Goe.PROPER,hJe=Goe.CONFIGURABLE,zoe=$oe.IteratorPrototype,WC=$oe.BUGGY_SAFARI_ITERATORS,jb=cJe("iterator"),Boe="keys",zb="values",Uoe="entries",Voe=function(){return this};Hoe.exports=function(r,e,t,n,i,o,a){sJe(t,e,n);var u=function(D){if(D===i&&S)return S;if(!WC&&D&&D in v)return v[D];switch(D){case Boe:return function(){return new t(this,D)};case zb:return function(){return new t(this,D)};case Uoe:return function(){return new t(this,D)};}return function(){return new t(this)}},h=e+" Iterator",d=!1,v=r.prototype,x=v[jb]||v["@@iterator"]||i&&v[i],S=!WC&&x||u(i),A=e==="Array"&&v.entries||x,L,q,R;if(A&&(L=koe(A.call(new r)),L!==Object.prototype&&L.next&&(!HC&&koe(L)!==zoe&&(Foe?Foe(L,zoe):aJe(L[jb])||s4(L,jb,Voe)),lJe(L,h,!0,!0),HC&&(joe[h]=Voe))),fJe&&i===zb&&x&&x.name!==zb&&(!HC&&hJe?uJe(v,"name",zb):(d=!0,S=function(){return oJe(x,this)})),i)if(q={values:u(zb),keys:o?S:u(Boe),entries:u(Uoe)},a)for(R in q)(WC||d||!(R in v))&&s4(v,R,q[R]);else iJe({target:e,proto:!0,forced:WC||d},q);return(!HC||a)&&v[jb]!==S&&s4(v,jb,S,{name:i}),joe[e]=S,q}});var Do=I((Gcr,Woe)=>{"use strict";Woe.exports=function(r,e){return{value:r,done:e}}});var Bb=I(($cr,Joe)=>{"use strict";var pJe=Qi(),l4=wi(),Zoe=zm(),Koe=yn(),dJe=Yn().f,mJe=ZC(),YC=Do(),vJe=zr(),gJe=sr(),Xoe="Array Iterator",yJe=Koe.set,_Je=Koe.getterFor(Xoe);Joe.exports=mJe(Array,"Array",function(r,e){yJe(this,{type:Xoe,target:pJe(r),index:0,kind:e})},function(){var r=_Je(this),e=r.target,t=r.index++;if(!e||t>=e.length)return r.target=null,YC(void 0,!0);switch(r.kind){case"keys":return YC(t,!1);case"values":return YC(e[t],!1);}return YC([t,e[t]],!1)},"values");var Yoe=Zoe.Arguments=Zoe.Array;l4("keys");l4("values");l4("entries");if(!vJe&&gJe&&Yoe.name!=="values")try{dJe(Yoe,"name",{value:"values"})}catch(r){}});var Qoe=I(()=>{"use strict";var xJe=te(),wJe=rt(),bJe=Pf(),SJe=Qi(),EJe=Bl(),TJe=wJe([].join),IJe=bJe!==Object,AJe=IJe||!EJe("join",",");xJe({target:"Array",proto:!0,forced:AJe},{join:function(e){return TJe(SJe(this),e===void 0?",":e)}})});var c4=I((Zcr,tae)=>{"use strict";var CJe=_a(),MJe=Qi(),RJe=ni(),PJe=Xr(),OJe=Bl(),LJe=Math.min,u4=[].lastIndexOf,eae=!!u4&&1/[1].lastIndexOf(1,-0)<0,DJe=OJe("lastIndexOf"),NJe=eae||!DJe;tae.exports=NJe?function(e){if(eae)return CJe(u4,this,arguments)||0;var t=MJe(this),n=PJe(t);if(n===0)return-1;var i=n-1;for(arguments.length>1&&(i=LJe(i,RJe(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}:u4});var nae=I(()=>{"use strict";var qJe=te(),rae=c4();qJe({target:"Array",proto:!0,forced:rae!==[].lastIndexOf},{lastIndexOf:rae})});var iae=I(()=>{"use strict";var kJe=te(),FJe=Bi().map,jJe=Ay(),zJe=jJe("map");kJe({target:"Array",proto:!0,forced:!zJe},{map:function(e){return FJe(this,e,arguments.length>1?arguments[1]:void 0)}})});var aae=I(()=>{"use strict";var BJe=te(),UJe=ut(),VJe=qu(),GJe=zl(),oae=Array,$Je=UJe(function(){function r(){}return!(oae.of.call(r)instanceof r)});BJe({target:"Array",stat:!0,forced:$Je},{of:function(){for(var e=0,t=arguments.length,n=new(VJe(this)?this:oae)(t);t>e;)GJe(n,e,arguments[e++]);return n.length=t,n}})});var KC=I((tfr,sae)=>{"use strict";var HJe=sr(),WJe=Nu(),ZJe=TypeError,YJe=Object.getOwnPropertyDescriptor,KJe=HJe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(r){return r instanceof TypeError}}();sae.exports=KJe?function(r,e){if(WJe(r)&&!YJe(r,"length").writable)throw new ZJe("Cannot set read only .length");return r.length=e}:function(r,e){return r.length=e}});var lae=I(()=>{"use strict";var XJe=te(),JJe=Br(),QJe=Xr(),eQe=KC(),tQe=qp(),rQe=ut(),nQe=rQe(function(){return[].push.call({length:4294967296},1)!==4294967297}),iQe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(r){return r instanceof TypeError}},oQe=nQe||!iQe();XJe({target:"Array",proto:!0,arity:1,forced:oQe},{push:function(e){var t=JJe(this),n=QJe(t),i=arguments.length;tQe(n+i);for(var o=0;o<i;o++)t[n]=arguments[o],n++;return eQe(t,n),n}})});var Ub=I((ifr,hae)=>{"use strict";var aQe=gr(),sQe=Br(),lQe=Pf(),uQe=Xr(),uae=TypeError,cae="Reduce of empty array with no initial value",fae=function(r){return function(e,t,n,i){var o=sQe(e),a=lQe(o),u=uQe(o);if(aQe(t),u===0&&n<2)throw new uae(cae);var h=r?u-1:0,d=r?-1:1;if(n<2)for(;;){if(h in a){i=a[h],h+=d;break}if(h+=d,r?h<0:u<=h)throw new uae(cae)}for(;r?h>=0:u>h;h+=d)h in a&&(i=t(i,a[h],h,o));return i}};hae.exports={left:fae(!1),right:fae(!0)}});var Gb=I((ofr,pae)=>{"use strict";var Vb=At(),cQe=Pu(),fQe=Zo(),XC=function(r){return cQe.slice(0,r.length)===r};pae.exports=function(){return XC("Bun/")?"BUN":XC("Cloudflare-Workers")?"CLOUDFLARE":XC("Deno/")?"DENO":XC("Node.js/")?"NODE":Vb.Bun&&typeof Bun.version=="string"?"BUN":Vb.Deno&&typeof Deno.version=="object"?"DENO":fQe(Vb.process)==="process"?"NODE":Vb.window&&Vb.document?"BROWSER":"REST"}()});var Um=I((afr,dae)=>{"use strict";var hQe=Gb();dae.exports=hQe==="NODE"});var vae=I(()=>{"use strict";var pQe=te(),dQe=Ub().left,mQe=Bl(),mae=wc(),vQe=Um(),gQe=!vQe&&mae>79&&mae<83,yQe=gQe||!mQe("reduce");pQe({target:"Array",proto:!0,forced:yQe},{reduce:function(e){var t=arguments.length;return dQe(this,e,t,t>1?arguments[1]:void 0)}})});var yae=I(()=>{"use strict";var _Qe=te(),xQe=Ub().right,wQe=Bl(),gae=wc(),bQe=Um(),SQe=!bQe&&gae>79&&gae<83,EQe=SQe||!wQe("reduceRight");_Qe({target:"Array",proto:!0,forced:EQe},{reduceRight:function(e){return xQe(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var xae=I(()=>{"use strict";var TQe=te(),IQe=rt(),AQe=Nu(),CQe=IQe([].reverse),_ae=[1,2];TQe({target:"Array",proto:!0,forced:String(_ae)===String(_ae.reverse())},{reverse:function(){return AQe(this)&&(this.length=this.length),CQe(this)}})});var Sae=I(()=>{"use strict";var MQe=te(),wae=Nu(),RQe=qu(),PQe=xr(),bae=Du(),OQe=Xr(),LQe=Qi(),DQe=zl(),NQe=fr(),qQe=Ay(),kQe=Ss(),FQe=qQe("slice"),jQe=NQe("species"),f4=Array,zQe=Math.max;MQe({target:"Array",proto:!0,forced:!FQe},{slice:function(e,t){var n=LQe(this),i=OQe(n),o=bae(e,i),a=bae(t===void 0?i:t,i),u,h,d;if(wae(n)&&(u=n.constructor,RQe(u)&&(u===f4||wae(u.prototype))?u=void 0:PQe(u)&&(u=u[jQe],u===null&&(u=void 0)),u===f4||u===void 0))return kQe(n,o,a);for(h=new(u===void 0?f4:u)(zQe(a-o,0)),d=0;o<a;o++,d++)o in n&&DQe(h,d,n[o]);return h.length=d,h}})});var Eae=I(()=>{"use strict";var BQe=te(),UQe=Bi().some,VQe=Bl(),GQe=VQe("some");BQe({target:"Array",proto:!0,forced:!GQe},{some:function(e){return UQe(this,e,arguments.length>1?arguments[1]:void 0)}})});var JC=I((gfr,Iae)=>{"use strict";var Tae=Ss(),$Qe=Math.floor,h4=function(r,e){var t=r.length;if(t<8)for(var n=1,i,o;n<t;){for(o=n,i=r[n];o&&e(r[o-1],i)>0;)r[o]=r[--o];o!==n++&&(r[o]=i)}else for(var a=$Qe(t/2),u=h4(Tae(r,0,a),e),h=h4(Tae(r,a),e),d=u.length,v=h.length,x=0,S=0;x<d||S<v;)r[x+S]=x<d&&S<v?e(u[x],h[S])<=0?u[x++]:h[S++]:x<d?u[x++]:h[S++];return r};Iae.exports=h4});var p4=I((yfr,Cae)=>{"use strict";var HQe=Pu(),Aae=HQe.match(/firefox\/(\d+)/i);Cae.exports=!!Aae&&+Aae[1]});var d4=I((_fr,Mae)=>{"use strict";var WQe=Pu();Mae.exports=/MSIE|Trident/.test(WQe)});var QC=I((xfr,Pae)=>{"use strict";var ZQe=Pu(),Rae=ZQe.match(/AppleWebKit\/(\d+)\./);Pae.exports=!!Rae&&+Rae[1]});var zae=I(()=>{"use strict";var YQe=te(),Fae=rt(),KQe=gr(),XQe=Br(),Oae=Xr(),JQe=qb(),Lae=br(),m4=ut(),QQe=JC(),eet=Bl(),Dae=p4(),tet=d4(),Nae=wc(),qae=QC(),Fp=[],kae=Fae(Fp.sort),ret=Fae(Fp.push),net=m4(function(){Fp.sort(void 0)}),iet=m4(function(){Fp.sort(null)}),oet=eet("sort"),jae=!m4(function(){if(Nae)return Nae<70;if(!(Dae&&Dae>3)){if(tet)return!0;if(qae)return qae<603;var r="",e,t,n,i;for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2;}for(i=0;i<47;i++)Fp.push({k:t+i,v:n})}for(Fp.sort(function(o,a){return a.v-o.v}),i=0;i<Fp.length;i++)t=Fp[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return r!=="DGBEFHACIJK"}}),aet=net||!iet||!oet||!jae,set=function(r){return function(e,t){return t===void 0?-1:e===void 0?1:r!==void 0?+r(e,t)||0:Lae(e)>Lae(t)?1:-1}};YQe({target:"Array",proto:!0,forced:aet},{sort:function(e){e!==void 0&&KQe(e);var t=XQe(this);if(jae)return e===void 0?kae(t):kae(t,e);var n=[],i=Oae(t),o,a;for(a=0;a<i;a++)a in t&&ret(n,t[a]);for(QQe(n,set(e)),o=Oae(n),a=0;a<o;)t[a]=n[a++];for(;a<i;)JQe(t,a++);return t}})});var jp=I((Sfr,Uae)=>{"use strict";var uet=_r(),cet=ii(),fet=fr(),het=sr(),Bae=fet("species");Uae.exports=function(r){var e=uet(r);het&&e&&!e[Bae]&&cet(e,Bae,{configurable:!0,get:function(){return this}})}});var Vae=I(()=>{"use strict";var pet=jp();pet("Array")});var Gae=I(()=>{"use strict";var det=te(),met=Br(),vet=Du(),get=ni(),yet=Xr(),_et=KC(),xet=qp(),wet=by(),bet=zl(),v4=qb(),Eet=Ay(),Tet=Eet("splice"),Iet=Math.max,Aet=Math.min;det({target:"Array",proto:!0,forced:!Tet},{splice:function(e,t){var n=met(this),i=yet(n),o=vet(e,i),a=arguments.length,u,h,d,v,x,S;for(a===0?u=h=0:a===1?(u=0,h=i-o):(u=a-2,h=Aet(Iet(get(t),0),i-o)),xet(i+u-h),d=wet(n,h),v=0;v<h;v++)x=o+v,x in n&&bet(d,v,n[x]);if(d.length=h,u<h){for(v=o;v<i-h;v++)x=v+h,S=v+u,x in n?n[S]=n[x]:v4(n,S);for(v=i;v>i-h+u;v--)v4(n,v-1)}else if(u>h)for(v=i-h;v>o;v--)x=v+h-1,S=v+u-1,x in n?n[S]=n[x]:v4(n,S);for(v=0;v<u;v++)n[v+o]=arguments[v+2];return _et(n,i-h+u),d}})});var g4=I((Cfr,$ae)=>{"use strict";var Cet=Xr();$ae.exports=function(r,e){for(var t=Cet(r),n=new e(t),i=0;i<t;i++)n[i]=r[t-i-1];return n}});var y4=I(()=>{"use strict";var Met=te(),Ret=g4(),Pet=Qi(),Oet=wi(),Let=Array;Met({target:"Array",proto:!0},{toReversed:function(){return Ret(Pet(this),Let)}});Oet("toReversed")});var jf=I((Pfr,Hae)=>{"use strict";var Det=Xr();Hae.exports=function(r,e,t){for(var n=0,i=arguments.length>2?t:Det(e),o=new r(i);i>n;)o[n]=e[n++];return o}});var _4=I((Ofr,Wae)=>{"use strict";var Net=At();Wae.exports=function(r,e){var t=Net[r],n=t&&t.prototype;return n&&n[e]}});var x4=I(()=>{"use strict";var qet=te(),ket=rt(),Fet=gr(),jet=Qi(),zet=jf(),Bet=_4(),Uet=wi(),Vet=Array,Get=ket(Bet("Array","sort"));qet({target:"Array",proto:!0},{toSorted:function(e){e!==void 0&&Fet(e);var t=jet(this),n=zet(Vet,t);return Get(n,e)}});Uet("toSorted")});var w4=I(()=>{"use strict";var $et=te(),Het=wi(),Wet=qp(),Zet=Xr(),Yet=Du(),Ket=Qi(),Xet=ni(),Jet=Array,Qet=Math.max,ett=Math.min;$et({target:"Array",proto:!0},{toSpliced:function(e,t){var n=Ket(this),i=Zet(n),o=Yet(e,i),a=arguments.length,u=0,h,d,v,x;for(a===0?h=d=0:a===1?(h=0,d=i-o):(h=a-2,d=ett(Qet(Xet(t),0),i-o)),v=Wet(i+h-d),x=Jet(v);u<o;u++)x[u]=n[u];for(;u<o+h;u++)x[u]=arguments[u-o+2];for(;u<v;u++)x[u]=n[u+d-h];return x}});Het("toSpliced")});var Zae=I(()=>{"use strict";var ttt=wi();ttt("flat")});var Yae=I(()=>{"use strict";var rtt=wi();rtt("flatMap")});var Kae=I(()=>{"use strict";var ntt=te(),itt=Br(),ott=Xr(),att=KC(),stt=qb(),ltt=qp(),utt=[].unshift(0)!==1,ctt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(r){return r instanceof TypeError}},ftt=utt||!ctt();ntt({target:"Array",proto:!0,arity:1,forced:ftt},{unshift:function(e){var t=itt(this),n=ott(t),i=arguments.length;if(i){ltt(n+i);for(var o=n;o--;){var a=o+i;o in t?t[a]=t[o]:stt(t,a)}for(var u=0;u<i;u++)t[u]=arguments[u]}return att(t,n+i)}})});var b4=I((Vfr,Xae)=>{"use strict";var htt=Xr(),ptt=ni(),dtt=RangeError;Xae.exports=function(r,e,t,n){var i=htt(r),o=ptt(t),a=o<0?i+o:o;if(a>=i||a<0)throw new dtt("Incorrect index");for(var u=new e(i),h=0;h<i;h++)u[h]=h===a?n:r[h];return u}});var S4=I(()=>{"use strict";var mtt=te(),vtt=b4(),gtt=Qi(),ytt=Array;mtt({target:"Array",proto:!0},{with:function(r,e){return vtt(gtt(this),ytt,r,e)}})});var eM=I((Hfr,Jae)=>{"use strict";Jae.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Ul=I((Wfr,Qae)=>{"use strict";var _tt=Tn();Qae.exports=function(r,e,t){for(var n in e)_tt(r,n,e[n],t);return r}});var xa=I((Zfr,ese)=>{"use strict";var xtt=Yo(),wtt=TypeError;ese.exports=function(r,e){if(xtt(e,r))return r;throw new wtt("Incorrect invocation")}});var Cy=I((Yfr,tse)=>{"use strict";var btt=ni(),Stt=ws(),Ett=RangeError;tse.exports=function(r){if(r===void 0)return 0;var e=btt(r),t=Stt(e);if(e!==t)throw new Ett("Wrong length or index");return t}});var tM=I((Kfr,rse)=>{"use strict";rse.exports=Math.sign||function(e){var t=+e;return t===0||t!==t?t:t<0?-1:1}});var E4=I((Xfr,ose)=>{"use strict";var Ttt=tM(),Itt=Math.abs,ise=2220446049250313e-31,nse=1/ise,Att=function(r){return r+nse-nse};ose.exports=function(r,e,t,n){var i=+r,o=Itt(i),a=Ttt(i);if(o<n)return a*Att(o/n/e)*n*e;var u=(1+e/ise)*o,h=u-(u-o);return h>t||h!==h?a*(1/0):a*h}});var rM=I((Jfr,ase)=>{"use strict";var Ctt=E4(),Mtt=1.1920928955078125e-7,Rtt=34028234663852886e22,Ptt=11754943508222875e-54;ase.exports=Math.fround||function(e){return Ctt(e,Mtt,Rtt,Ptt)}});var nM=I((Qfr,sse)=>{"use strict";var Ott=Array,Ltt=Math.abs,zf=Math.pow,Dtt=Math.floor,Ntt=Math.log,qtt=Math.LN2,ktt=function(r,e,t){var n=Ott(t),i=t*8-e-1,o=(1<<i)-1,a=o>>1,u=e===23?zf(2,-24)-zf(2,-77):0,h=r<0||r===0&&1/r<0?1:0,d=0,v,x,S;for(r=Ltt(r),r!==r||r===1/0?(x=r!==r?1:0,v=o):(v=Dtt(Ntt(r)/qtt),S=zf(2,-v),r*S<1&&(v--,S*=2),v+a>=1?r+=u/S:r+=u*zf(2,1-a),r*S>=2&&(v++,S/=2),v+a>=o?(x=0,v=o):v+a>=1?(x=(r*S-1)*zf(2,e),v+=a):(x=r*zf(2,a-1)*zf(2,e),v=0));e>=8;)n[d++]=x&255,x/=256,e-=8;for(v=v<<e|x,i+=e;i>0;)n[d++]=v&255,v/=256,i-=8;return n[d-1]|=h*128,n},Ftt=function(r,e){var t=r.length,n=t*8-e-1,i=(1<<n)-1,o=i>>1,a=n-7,u=t-1,h=r[u--],d=h&127,v;for(h>>=7;a>0;)d=d*256+r[u--],a-=8;for(v=d&(1<<-a)-1,d>>=-a,a+=e;a>0;)v=v*256+r[u--],a-=8;if(d===0)d=1-o;else{if(d===i)return v?NaN:h?-1/0:1/0;v+=zf(2,e),d-=o}return(h?-1:1)*v*zf(2,d-e)};sse.exports={pack:ktt,unpack:Ftt}});var Wb=I((ehr,Ese)=>{"use strict";var lM=At(),M4=rt(),T4=sr(),jtt=eM(),_se=Pm(),ztt=eo(),Btt=ii(),lse=Ul(),I4=ut(),iM=xa(),Utt=ni(),Vtt=ws(),aM=Cy(),Gtt=rM(),xse=nM(),$tt=to(),use=jl(),Htt=GC(),Wtt=Ss(),Ztt=Dp(),Ytt=Lm(),wse=Wa(),R4=yn(),Ktt=_se.PROPER,cse=_se.CONFIGURABLE,Ry="ArrayBuffer",uM="DataView",Py="prototype",Xtt="Wrong length",bse="Wrong index",fse=R4.getterFor(Ry),Hb=R4.getterFor(uM),hse=R4.set,ku=lM[Ry],sl=ku,My=sl&&sl[Py],Tc=lM[uM],Vm=Tc&&Tc[Py],pse=Object.prototype,Jtt=lM.Array,sM=lM.RangeError,Qtt=M4(Htt),ert=M4([].reverse),Sse=xse.pack,dse=xse.unpack,mse=function(r){return[r&255]},vse=function(r){return[r&255,r>>8&255]},gse=function(r){return[r&255,r>>8&255,r>>16&255,r>>24&255]},yse=function(r){return r[3]<<24|r[2]<<16|r[1]<<8|r[0]},trt=function(r){return Sse(Gtt(r),23,4)},rrt=function(r){return Sse(r,52,8)},oM=function(r,e,t){Btt(r[Py],e,{configurable:!0,get:function(){return t(this)[e]}})},zp=function(r,e,t,n){var i=Hb(r),o=aM(t),a=!!n;if(o+e>i.byteLength)throw new sM(bse);var u=i.bytes,h=o+i.byteOffset,d=Wtt(u,h,h+e);return a?d:ert(d)},Bp=function(r,e,t,n,i,o){var a=Hb(r),u=aM(t),h=n(+i),d=!!o;if(u+e>a.byteLength)throw new sM(bse);for(var v=a.bytes,x=u+a.byteOffset,S=0;S<e;S++)v[x+S]=h[d?S:e-S-1]};jtt?(A4=Ktt&&ku.name!==Ry,!I4(function(){ku(1)})||!I4(function(){new ku(-1)})||I4(function(){return new ku,new ku(1.5),new ku(NaN),ku.length!==1||A4&&!cse})?(sl=function(e){return iM(this,My),Ztt(new ku(aM(e)),this,sl)},sl[Py]=My,My.constructor=sl,Ytt(sl,ku)):A4&&cse&&ztt(ku,"name",Ry),use&&$tt(Vm)!==pse&&use(Vm,pse),$b=new Tc(new sl(2)),C4=M4(Vm.setInt8),$b.setInt8(0,2147483648),$b.setInt8(1,2147483649),($b.getInt8(0)||!$b.getInt8(1))&&lse(Vm,{setInt8:function(e,t){C4(this,e,t<<24>>24)},setUint8:function(e,t){C4(this,e,t<<24>>24)}},{unsafe:!0})):(sl=function(e){iM(this,My);var t=aM(e);hse(this,{type:Ry,bytes:Qtt(Jtt(t),0),byteLength:t}),T4||(this.byteLength=t,this.detached=!1)},My=sl[Py],Tc=function(e,t,n){iM(this,Vm),iM(e,My);var i=fse(e),o=i.byteLength,a=Utt(t);if(a<0||a>o)throw new sM("Wrong offset");if(n=n===void 0?o-a:Vtt(n),a+n>o)throw new sM(Xtt);hse(this,{type:uM,buffer:e,byteLength:n,byteOffset:a,bytes:i.bytes}),T4||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},Vm=Tc[Py],T4&&(oM(sl,"byteLength",fse),oM(Tc,"buffer",Hb),oM(Tc,"byteLength",Hb),oM(Tc,"byteOffset",Hb)),lse(Vm,{getInt8:function(e){return zp(this,1,e)[0]<<24>>24},getUint8:function(e){return zp(this,1,e)[0]},getInt16:function(e){var t=zp(this,2,e,arguments.length>1?arguments[1]:!1);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=zp(this,2,e,arguments.length>1?arguments[1]:!1);return t[1]<<8|t[0]},getInt32:function(e){return yse(zp(this,4,e,arguments.length>1?arguments[1]:!1))},getUint32:function(e){return yse(zp(this,4,e,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(e){return dse(zp(this,4,e,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(e){return dse(zp(this,8,e,arguments.length>1?arguments[1]:!1),52)},setInt8:function(e,t){Bp(this,1,e,mse,t)},setUint8:function(e,t){Bp(this,1,e,mse,t)},setInt16:function(e,t){Bp(this,2,e,vse,t,arguments.length>2?arguments[2]:!1)},setUint16:function(e,t){Bp(this,2,e,vse,t,arguments.length>2?arguments[2]:!1)},setInt32:function(e,t){Bp(this,4,e,gse,t,arguments.length>2?arguments[2]:!1)},setUint32:function(e,t){Bp(this,4,e,gse,t,arguments.length>2?arguments[2]:!1)},setFloat32:function(e,t){Bp(this,4,e,trt,t,arguments.length>2?arguments[2]:!1)},setFloat64:function(e,t){Bp(this,8,e,rrt,t,arguments.length>2?arguments[2]:!1)}}));var A4,$b,C4;wse(sl,Ry);wse(Tc,uM);Ese.exports={ArrayBuffer:sl,DataView:Tc}});var Ise=I(()=>{"use strict";var nrt=te(),irt=At(),ort=Wb(),art=jp(),P4="ArrayBuffer",Tse=ort[P4],srt=irt[P4];nrt({global:!0,constructor:!0,forced:srt!==Tse},{ArrayBuffer:Tse});art(P4)});var kr=I((nhr,qse)=>{"use strict";var lrt=eM(),N4=sr(),Za=At(),Rse=Rr(),hM=xr(),Vp=Lr(),q4=bs(),urt=Mp(),crt=eo(),O4=Tn(),frt=ii(),hrt=Yo(),pM=to(),Ly=jl(),prt=fr(),drt=Rp(),Pse=yn(),Ose=Pse.enforce,mrt=Pse.get,cM=Za.Int8Array,L4=cM&&cM.prototype,Ase=Za.Uint8ClampedArray,Cse=Ase&&Ase.prototype,Ic=cM&&pM(cM),Fu=L4&&pM(L4),vrt=Object.prototype,k4=Za.TypeError,Mse=prt("toStringTag"),D4=drt("TYPED_ARRAY_TAG"),fM="TypedArrayConstructor",Bf=lrt&&!!Ly&&q4(Za.opera)!=="Opera",Lse=!1,Ts,Up,Oy,Uf={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F4={BigInt64Array:8,BigUint64Array:8},grt=function(e){if(!hM(e))return!1;var t=q4(e);return t==="DataView"||Vp(Uf,t)||Vp(F4,t)},Dse=function(r){var e=pM(r);if(hM(e)){var t=mrt(e);return t&&Vp(t,fM)?t[fM]:Dse(e)}},Nse=function(r){if(!hM(r))return!1;var e=q4(r);return Vp(Uf,e)||Vp(F4,e)},yrt=function(r){if(Nse(r))return r;throw new k4("Target is not a typed array")},_rt=function(r){if(Rse(r)&&(!Ly||hrt(Ic,r)))return r;throw new k4(urt(r)+" is not a typed array constructor")},xrt=function(r,e,t,n){if(N4){if(t)for(var i in Uf){var o=Za[i];if(o&&Vp(o.prototype,r))try{delete o.prototype[r]}catch(a){try{o.prototype[r]=e}catch(u){}}}(!Fu[r]||t)&&O4(Fu,r,t?e:Bf&&L4[r]||e,n)}},wrt=function(r,e,t){var n,i;if(N4){if(Ly){if(t){for(n in Uf)if(i=Za[n],i&&Vp(i,r))try{delete i[r]}catch(o){}}if(!Ic[r]||t)try{return O4(Ic,r,t?e:Bf&&Ic[r]||e)}catch(o){}else return}for(n in Uf)i=Za[n],i&&(!i[r]||t)&&O4(i,r,e)}};for(Ts in Uf)Up=Za[Ts],Oy=Up&&Up.prototype,Oy?Ose(Oy)[fM]=Up:Bf=!1;for(Ts in F4)Up=Za[Ts],Oy=Up&&Up.prototype,Oy&&(Ose(Oy)[fM]=Up);if((!Bf||!Rse(Ic)||Ic===Function.prototype)&&(Ic=function(){throw new k4("Incorrect invocation")},Bf))for(Ts in Uf)Za[Ts]&&Ly(Za[Ts],Ic);if((!Bf||!Fu||Fu===vrt)&&(Fu=Ic.prototype,Bf))for(Ts in Uf)Za[Ts]&&Ly(Za[Ts].prototype,Fu);Bf&&pM(Cse)!==Fu&&Ly(Cse,Fu);if(N4&&!Vp(Fu,Mse)){Lse=!0,frt(Fu,Mse,{configurable:!0,get:function(){return hM(this)?this[D4]:void 0}});for(Ts in Uf)Za[Ts]&&crt(Za[Ts],D4,Ts)}qse.exports={NATIVE_ARRAY_BUFFER_VIEWS:Bf,TYPED_ARRAY_TAG:Lse&&D4,aTypedArray:yrt,aTypedArrayConstructor:_rt,exportTypedArrayMethod:xrt,exportTypedArrayStaticMethod:wrt,getTypedArrayConstructor:Dse,isView:grt,isTypedArray:Nse,TypedArray:Ic,TypedArrayPrototype:Fu}});var Fse=I(()=>{"use strict";var brt=te(),kse=kr(),Srt=kse.NATIVE_ARRAY_BUFFER_VIEWS;brt({target:"ArrayBuffer",stat:!0,forced:!Srt},{isView:kse.isView})});var Gse=I(()=>{"use strict";var Ert=te(),z4=Df(),Trt=ut(),Use=Wb(),jse=Rt(),zse=Du(),Irt=ws(),B4=Use.ArrayBuffer,j4=Use.DataView,Vse=j4.prototype,Bse=z4(B4.prototype.slice),Art=z4(Vse.getUint8),Crt=z4(Vse.setUint8),Mrt=Trt(function(){return!new B4(2).slice(1,void 0).byteLength});Ert({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Mrt},{slice:function(e,t){if(Bse&&t===void 0)return Bse(jse(this),e);for(var n=jse(this).byteLength,i=zse(e,n),o=zse(t===void 0?n:t,n),a=new B4(Irt(o-i)),u=new j4(this),h=new j4(a),d=0;i<o;)Crt(h,d++,Art(u,i++));return a}})});var $se=I(()=>{"use strict";var Rrt=te(),Prt=Wb(),Ort=eM();Rrt({global:!0,constructor:!0,forced:!Ort},{DataView:Prt.DataView})});var Hse=I(()=>{"use strict";$se()});var U4=I((hhr,Yse)=>{"use strict";var Zse=At(),Lrt=Nb(),Drt=Zo(),Wse=Zse.ArrayBuffer,Nrt=Zse.TypeError;Yse.exports=Wse&&Lrt(Wse.prototype,"byteLength","get")||function(r){if(Drt(r)!=="ArrayBuffer")throw new Nrt("ArrayBuffer expected");return r.byteLength}});var V4=I((phr,Qse)=>{"use strict";var qrt=At(),krt=Df(),Frt=U4(),Kse=qrt.ArrayBuffer,Xse=Kse&&Kse.prototype,Jse=Xse&&krt(Xse.slice);Qse.exports=function(r){if(Frt(r)!==0||!Jse)return!1;try{return Jse(r,0,0),!1}catch(e){return!0}}});var G4=I(()=>{"use strict";var jrt=sr(),zrt=ii(),Brt=V4(),ele=ArrayBuffer.prototype;jrt&&!("detached"in ele)&&zrt(ele,"detached",{configurable:!0,get:function(){return Brt(this)}})});var Dy=I((vhr,tle)=>{"use strict";var Urt=V4(),Vrt=TypeError;tle.exports=function(r){if(Urt(r))throw new Vrt("ArrayBuffer is detached");return r}});var $4=I((ghr,rle)=>{"use strict";var Grt=At(),$rt=Um();rle.exports=function(r){if($rt){try{return Grt.process.getBuiltinModule(r)}catch(e){}try{return Function("return require(\""+r+"\")")()}catch(e){}}}});var dM=I((yhr,ile)=>{"use strict";var Hrt=At(),Wrt=ut(),H4=wc(),W4=Gb(),nle=Hrt.structuredClone;ile.exports=!!nle&&!Wrt(function(){if(W4==="DENO"&&H4>92||W4==="NODE"&&H4>94||W4==="BROWSER"&&H4>97)return!1;var r=new ArrayBuffer(8),e=nle(r,{transfer:[r]});return r.byteLength!==0||e.byteLength!==8})});var J4=I((_hr,sle)=>{"use strict";var X4=At(),Zrt=$4(),Yrt=dM(),Krt=X4.structuredClone,ole=X4.ArrayBuffer,mM=X4.MessageChannel,K4=!1,Z4,ale,vM,Y4;if(Yrt)K4=function(r){Krt(r,{transfer:[r]})};else if(ole)try{mM||(Z4=Zrt("worker_threads"),Z4&&(mM=Z4.MessageChannel)),mM&&(ale=new mM,vM=new ole(2),Y4=function(r){ale.port1.postMessage(null,[r])},vM.byteLength===2&&(Y4(vM),vM.byteLength===0&&(K4=Y4)))}catch(r){}sle.exports=K4});var iB=I((xhr,dle)=>{"use strict";var tB=At(),rB=rt(),fle=Nb(),Xrt=Cy(),Jrt=Dy(),Qrt=U4(),lle=J4(),Q4=dM(),ent=tB.structuredClone,hle=tB.ArrayBuffer,eB=tB.DataView,tnt=Math.min,nB=hle.prototype,ple=eB.prototype,rnt=rB(nB.slice),ule=fle(nB,"resizable","get"),cle=fle(nB,"maxByteLength","get"),nnt=rB(ple.getInt8),int=rB(ple.setInt8);dle.exports=(Q4||lle)&&function(r,e,t){var n=Qrt(r),i=e===void 0?n:Xrt(e),o=!ule||!ule(r),a;if(Jrt(r),Q4&&(r=ent(r,{transfer:[r]}),n===i&&(t||o)))return r;if(n>=i&&(!t||o))a=rnt(r,0,i);else{var u=t&&!o&&cle?{maxByteLength:cle(r)}:void 0;a=new hle(i,u);for(var h=new eB(r),d=new eB(a),v=tnt(i,n),x=0;x<v;x++)int(d,x,nnt(h,x))}return Q4||lle(r),a}});var oB=I(()=>{"use strict";var ont=te(),mle=iB();mle&&ont({target:"ArrayBuffer",proto:!0},{transfer:function(){return mle(this,arguments.length?arguments[0]:void 0,!0)}})});var aB=I(()=>{"use strict";var ant=te(),vle=iB();vle&&ant({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return vle(this,arguments.length?arguments[0]:void 0,!1)}})});var gle=I(()=>{"use strict";var snt=te(),lnt=rt(),unt=ut(),cnt=unt(function(){return new Date(16e11).getYear()!==120}),fnt=lnt(Date.prototype.getFullYear);snt({target:"Date",proto:!0,forced:cnt},{getYear:function(){return fnt(this)-1900}})});var _le=I(()=>{"use strict";var hnt=te(),pnt=rt(),yle=Date,dnt=pnt(yle.prototype.getTime);hnt({target:"Date",stat:!0},{now:function(){return dnt(new yle)}})});var ble=I(()=>{"use strict";var mnt=te(),xle=rt(),vnt=ni(),wle=Date.prototype,gnt=xle(wle.getTime),ynt=xle(wle.setFullYear);mnt({target:"Date",proto:!0},{setYear:function(e){gnt(this);var t=vnt(e),n=t>=0&&t<=99?t+1900:t;return ynt(this,n)}})});var Sle=I(()=>{"use strict";var _nt=te();_nt({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var Zb=I((Lhr,Ele)=>{"use strict";var xnt=ni(),wnt=br(),bnt=Qn(),Snt=RangeError;Ele.exports=function(e){var t=wnt(bnt(this)),n="",i=xnt(e);if(i<0||i===1/0)throw new Snt("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))i&1&&(n+=t);return n}});var Yb=I((Dhr,Cle)=>{"use strict";var Ale=rt(),Ent=ws(),Tle=br(),Tnt=Zb(),Int=Qn(),Ant=Ale(Tnt),Cnt=Ale("".slice),Mnt=Math.ceil,Ile=function(r){return function(e,t,n){var i=Tle(Int(e)),o=Ent(t),a=i.length,u=n===void 0?" ":Tle(n),h,d;return o<=a||u===""?i:(h=o-a,d=Ant(u,Mnt(h/u.length)),d.length>h&&(d=Cnt(d,0,h)),r?i+d:d+i)}};Cle.exports={start:Ile(!1),end:Ile(!0)}});var Ple=I((Nhr,Rle)=>{"use strict";var Gp=rt(),Mle=ut(),Gm=Yb().start,Rnt=RangeError,Pnt=isFinite,Ont=Math.abs,Vf=Date.prototype,sB=Vf.toISOString,Lnt=Gp(Vf.getTime),Dnt=Gp(Vf.getUTCDate),Nnt=Gp(Vf.getUTCFullYear),qnt=Gp(Vf.getUTCHours),knt=Gp(Vf.getUTCMilliseconds),Fnt=Gp(Vf.getUTCMinutes),jnt=Gp(Vf.getUTCMonth),znt=Gp(Vf.getUTCSeconds);Rle.exports=Mle(function(){return sB.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!Mle(function(){sB.call(new Date(NaN))})?function(){if(!Pnt(Lnt(this)))throw new Rnt("Invalid time value");var e=this,t=Nnt(e),n=knt(e),i=t<0?"-":t>9999?"+":"";return i+Gm(Ont(t),i?6:4,0)+"-"+Gm(jnt(e)+1,2,0)+"-"+Gm(Dnt(e),2,0)+"T"+Gm(qnt(e),2,0)+":"+Gm(Fnt(e),2,0)+":"+Gm(znt(e),2,0)+"."+Gm(n,3,0)+"Z"}:sB});var Lle=I(()=>{"use strict";var Bnt=te(),Ole=Ple();Bnt({target:"Date",proto:!0,forced:Date.prototype.toISOString!==Ole},{toISOString:Ole})});var Dle=I(()=>{"use strict";var Unt=te(),Vnt=ut(),Gnt=Br(),$nt=xb(),Hnt=Vnt(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});Unt({target:"Date",proto:!0,arity:1,forced:Hnt},{toJSON:function(e){var t=Gnt(this),n=$nt(t,"number");return typeof n=="number"&&!isFinite(n)?null:t.toISOString()}})});var qle=I((zhr,Nle)=>{"use strict";var Wnt=Rt(),Znt=Fj(),Ynt=TypeError;Nle.exports=function(r){if(Wnt(this),r==="string"||r==="default")r="string";else if(r!=="number")throw new Ynt("Incorrect hint");return Znt(this,r)}});var jle=I(()=>{"use strict";var Knt=Lr(),Xnt=Tn(),Jnt=qle(),Qnt=fr(),kle=Qnt("toPrimitive"),Fle=Date.prototype;Knt(Fle,kle)||Xnt(Fle,kle,Jnt)});var Vle=I(()=>{"use strict";var Ble=rt(),eit=Tn(),lB=Date.prototype,zle="Invalid Date",Ule="toString",tit=Ble(lB[Ule]),rit=Ble(lB.getTime);String(new Date(NaN))!==zle&&eit(lB,Ule,function(){var e=rit(this);return e===e?tit(this):zle})});var $le=I(()=>{"use strict";var nit=te(),Kb=rt(),iit=br(),oit=Kb("".charAt),ait=Kb("".charCodeAt),sit=Kb(/./.exec),lit=Kb(1 .toString),uit=Kb("".toUpperCase),cit=/[\w*+\-./@]/,Gle=function(r,e){for(var t=lit(r,16);t.length<e;)t="0"+t;return t};nit({global:!0},{escape:function(e){for(var t=iit(e),n="",i=t.length,o=0,a,u;o<i;)a=oit(t,o++),sit(cit,a)?n+=a:(u=ait(a,0),u<256?n+="%"+Gle(u,2):n+="%u"+uit(Gle(u,4)));return n}})});var cB=I((Whr,Yle)=>{"use strict";var Wle=rt(),fit=gr(),hit=xr(),pit=Lr(),Hle=Ss(),dit=gy(),Zle=Function,mit=Wle([].concat),vit=Wle([].join),uB={},git=function(r,e,t){if(!pit(uB,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";uB[e]=Zle("C,a","return new C("+vit(n,",")+")")}return uB[e](r,t)};Yle.exports=dit?Zle.bind:function(e){var t=fit(this),n=t.prototype,i=Hle(arguments,1),o=function(){var u=mit(i,Hle(arguments));return this instanceof o?git(t,u.length,u):t.apply(e,u)};return hit(n)&&(o.prototype=n),o}});var Xle=I(()=>{"use strict";var yit=te(),Kle=cB();yit({target:"Function",proto:!0,forced:Function.bind!==Kle},{bind:Kle})});var eue=I(()=>{"use strict";var _it=Rr(),Jle=xr(),xit=Yn(),wit=Yo(),bit=fr(),Sit=Tb(),fB=bit("hasInstance"),Qle=Function.prototype;fB in Qle||xit.f(Qle,fB,{value:Sit(function(r){if(!_it(this)||!Jle(r))return!1;var e=this.prototype;return Jle(e)?wit(e,r):r instanceof this},fB)})});var iue=I(()=>{"use strict";var Eit=sr(),Tit=Pm().EXISTS,tue=rt(),Iit=ii(),rue=Function.prototype,Ait=tue(rue.toString),nue=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Cit=tue(nue.exec),Mit="name";Eit&&!Tit&&Iit(rue,Mit,{configurable:!0,get:function(){try{return Cit(nue,Ait(this))[1]}catch(r){return""}}})});var pB=I(()=>{"use strict";var Rit=te(),hB=At();Rit({global:!0,forced:hB.globalThis!==hB},{globalThis:hB})});var yB=I(()=>{"use strict";var Pit=te(),Oit=At(),Lit=xa(),Dit=Rt(),Nit=Rr(),qit=to(),kit=ii(),Fit=zl(),jit=ut(),vB=Lr(),zit=fr(),Ac=Bm().IteratorPrototype,Bit=sr(),Uit=zr(),dB="constructor",aue="Iterator",oue=zit("toStringTag"),sue=TypeError,mB=Oit[aue],lue=Uit||!Nit(mB)||mB.prototype!==Ac||!jit(function(){mB({})}),gB=function(){if(Lit(this,Ac),qit(this)===Ac)throw new sue("Abstract class Iterator not directly constructable")},uue=function(r,e){Bit?kit(Ac,r,{configurable:!0,get:function(){return e},set:function(t){if(Dit(this),this===Ac)throw new sue("You can't redefine this property");vB(this,r)?this[r]=t:Fit(this,r,t)}}):Ac[r]=e};vB(Ac,oue)||uue(oue,aue);(lue||!vB(Ac,dB)||Ac[dB]===Object)&&uue(dB,gB);gB.prototype=Ac;Pit({global:!0,constructor:!0,forced:lue},{Iterator:gB})});var fi=I((ipr,cue)=>{"use strict";cue.exports=function(r){return{iterator:r,next:r.next,done:!1}}});var Xb=I((opr,fue)=>{"use strict";var Vit=RangeError;fue.exports=function(r){if(r===r)return r;throw new Vit("NaN is not allowed")}});var Ny=I((apr,hue)=>{"use strict";var Git=ni(),$it=RangeError;hue.exports=function(r){var e=Git(r);if(e<0)throw new $it("The argument can't be less than 0");return e}});var $p=I((spr,yue)=>{"use strict";var Hit=Ot(),Wit=zi(),Zit=eo(),Yit=Ul(),Kit=fr(),pue=yn(),Xit=ji(),Jit=Bm().IteratorPrototype,_B=Do(),xB=kf(),Qit=Kit("toStringTag"),due="IteratorHelper",mue="WrapForValidIterator",eot=pue.set,vue=function(r){var e=pue.getterFor(r?mue:due);return Yit(Wit(Jit),{next:function(){var n=e(this);if(r)return n.nextHandler();try{var i=n.done?void 0:n.nextHandler();return _B(i,n.done)}catch(o){throw n.done=!0,o}},return:function(){var t=e(this),n=t.iterator;if(t.done=!0,r){var i=Xit(n,"return");return i?Hit(i,n):_B(void 0,!0)}if(t.inner)try{xB(t.inner.iterator,"normal")}catch(o){return xB(n,"throw",o)}return n&&xB(n,"normal"),_B(void 0,!0)}})},tot=vue(!0),gue=vue(!1);Zit(gue,Qit,"Iterator Helper");yue.exports=function(r,e){var t=function(i,o){o?(o.iterator=i.iterator,o.next=i.next):o=i,o.type=e?mue:due,o.nextHandler=r,o.counter=0,o.done=!1,eot(this,o)};return t.prototype=e?tot:gue,t}});var bB=I(()=>{"use strict";var rot=te(),_ue=Ot(),wB=Rt(),not=fi(),iot=Xb(),oot=Ny(),aot=$p(),sot=zr(),lot=aot(function(){for(var r=this.iterator,e=this.next,t,n;this.remaining;)if(this.remaining--,t=wB(_ue(e,r)),n=this.done=!!t.done,n)return;if(t=wB(_ue(e,r)),n=this.done=!!t.done,!n)return t.value});rot({target:"Iterator",proto:!0,real:!0,forced:sot},{drop:function(e){wB(this);var t=oot(iot(+e));return new lot(not(this),{remaining:t})}})});var SB=I(()=>{"use strict";var uot=te(),cot=xi(),fot=gr(),hot=Rt(),pot=fi();uot({target:"Iterator",proto:!0,real:!0},{every:function(e){hot(this),fot(e);var t=pot(this),n=0;return!cot(t,function(i,o){if(!e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var EB=I(()=>{"use strict";var dot=te(),mot=Ot(),vot=gr(),xue=Rt(),got=fi(),yot=$p(),_ot=$C(),xot=zr(),wot=yot(function(){for(var r=this.iterator,e=this.predicate,t=this.next,n,i,o;;){if(n=xue(mot(t,r)),i=this.done=!!n.done,i)return;if(o=n.value,_ot(r,e,[o,this.counter++],!0))return o}});dot({target:"Iterator",proto:!0,real:!0,forced:xot},{filter:function(e){return xue(this),vot(e),new wot(got(this),{predicate:e})}})});var TB=I(()=>{"use strict";var bot=te(),Sot=xi(),Eot=gr(),Tot=Rt(),Iot=fi();bot({target:"Iterator",proto:!0,real:!0},{find:function(e){Tot(this),Eot(e);var t=Iot(this),n=0;return Sot(t,function(i,o){if(e(i,n++))return o(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var IB=I((vpr,bue)=>{"use strict";var Aot=Ot(),wue=Rt(),Cot=fi(),Mot=Ec();bue.exports=function(r,e){(!e||typeof r!="string")&&wue(r);var t=Mot(r);return Cot(wue(t!==void 0?Aot(t,r):r))}});var CB=I(()=>{"use strict";var Rot=te(),Sue=Ot(),Pot=gr(),AB=Rt(),Oot=fi(),Lot=IB(),Dot=$p(),Eue=kf(),Not=zr(),qot=Dot(function(){for(var r=this.iterator,e=this.mapper,t,n;;){if(n=this.inner)try{if(t=AB(Sue(n.next,n.iterator)),!t.done)return t.value;this.inner=null}catch(i){Eue(r,"throw",i)}if(t=AB(Sue(this.next,r)),this.done=!!t.done)return;try{this.inner=Lot(e(t.value,this.counter++),!1)}catch(i){Eue(r,"throw",i)}}});Rot({target:"Iterator",proto:!0,real:!0,forced:Not},{flatMap:function(e){return AB(this),Pot(e),new qot(Oot(this),{mapper:e,inner:null})}})});var MB=I(()=>{"use strict";var kot=te(),Fot=xi(),jot=gr(),zot=Rt(),Bot=fi();kot({target:"Iterator",proto:!0,real:!0},{forEach:function(e){zot(this),jot(e);var t=Bot(this),n=0;Fot(t,function(i){e(i,n++)},{IS_RECORD:!0})}})});var RB=I(()=>{"use strict";var Uot=te(),Vot=Ot(),Got=Br(),$ot=Yo(),Hot=Bm().IteratorPrototype,Wot=$p(),Zot=IB(),Yot=zr(),Kot=Wot(function(){return Vot(this.next,this.iterator)},!0);Uot({target:"Iterator",stat:!0,forced:Yot},{from:function(e){var t=Zot(typeof e=="string"?Got(e):e,!0);return $ot(Hot,t.iterator)?t.iterator:new Kot(t)}})});var PB=I((Spr,Iue)=>{"use strict";var Xot=Ot(),Jot=gr(),Tue=Rt(),Qot=fi(),eat=$p(),tat=$C(),rat=eat(function(){var r=this.iterator,e=Tue(Xot(this.next,r)),t=this.done=!!e.done;if(!t)return tat(r,this.mapper,[e.value,this.counter++],!0)});Iue.exports=function(e){return Tue(this),Jot(e),new rat(Qot(this),{mapper:e})}});var OB=I(()=>{"use strict";var nat=te(),iat=PB(),oat=zr();nat({target:"Iterator",proto:!0,real:!0,forced:oat},{map:iat})});var LB=I(()=>{"use strict";var aat=te(),sat=xi(),lat=gr(),uat=Rt(),cat=fi(),fat=TypeError;aat({target:"Iterator",proto:!0,real:!0},{reduce:function(e){uat(this),lat(e);var t=cat(this),n=arguments.length<2,i=n?void 0:arguments[1],o=0;if(sat(t,function(a){n?(n=!1,i=a):i=e(i,a,o),o++},{IS_RECORD:!0}),n)throw new fat("Reduce of empty iterator with no initial value");return i}})});var DB=I(()=>{"use strict";var hat=te(),pat=xi(),dat=gr(),mat=Rt(),vat=fi();hat({target:"Iterator",proto:!0,real:!0},{some:function(e){mat(this),dat(e);var t=vat(this),n=0;return pat(t,function(i,o){if(e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var NB=I(()=>{"use strict";var gat=te(),yat=Ot(),Aue=Rt(),_at=fi(),xat=Xb(),wat=Ny(),bat=$p(),Sat=kf(),Eat=zr(),Tat=bat(function(){var r=this.iterator;if(!this.remaining--)return this.done=!0,Sat(r,"normal",void 0);var e=Aue(yat(this.next,r)),t=this.done=!!e.done;if(!t)return e.value});gat({target:"Iterator",proto:!0,real:!0,forced:Eat},{take:function(e){Aue(this);var t=wat(xat(+e));return new Tat(_at(this),{remaining:t})}})});var qB=I(()=>{"use strict";var Iat=te(),Aat=Rt(),Cat=xi(),Mat=fi(),Rat=[].push;Iat({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return Cat(Mat(Aat(this)),Rat,{that:e,IS_RECORD:!0}),e}})});var Cue=I(()=>{"use strict";var Pat=At(),Oat=Wa();Oat(Pat.JSON,"JSON",!0)});var gM=I((qpr,Mue)=>{"use strict";var Lat=ut();Mue.exports=Lat(function(){if(typeof ArrayBuffer=="function"){var r=new ArrayBuffer(8);Object.isExtensible(r)&&Object.defineProperty(r,"a",{value:8})}})});var _M=I((kpr,Pue)=>{"use strict";var Dat=ut(),Nat=xr(),qat=Zo(),Rue=gM(),yM=Object.isExtensible,kat=Dat(function(){yM(1)});Pue.exports=kat||Rue?function(e){return!Nat(e)||Rue&&qat(e)==="ArrayBuffer"?!1:yM?yM(e):!0}:yM});var Gf=I((Fpr,Oue)=>{"use strict";var Fat=ut();Oue.exports=!Fat(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Hp=I((jpr,Nue)=>{"use strict";var jat=te(),zat=rt(),Bat=_y(),Uat=xr(),kB=Lr(),Vat=Yn().f,Lue=Pp(),Gat=IC(),FB=_M(),$at=Rp(),Hat=Gf(),Due=!1,$f=$at("meta"),Wat=0,jB=function(r){Vat(r,$f,{value:{objectID:"O"+Wat++,weakData:{}}})},Zat=function(r,e){if(!Uat(r))return typeof r=="symbol"?r:(typeof r=="string"?"S":"P")+r;if(!kB(r,$f)){if(!FB(r))return"F";if(!e)return"E";jB(r)}return r[$f].objectID},Yat=function(r,e){if(!kB(r,$f)){if(!FB(r))return!0;if(!e)return!1;jB(r)}return r[$f].weakData},Kat=function(r){return Hat&&Due&&FB(r)&&!kB(r,$f)&&jB(r),r},Xat=function(){Jat.enable=function(){},Due=!0;var r=Lue.f,e=zat([].splice),t={};t[$f]=1,r(t).length&&(Lue.f=function(n){for(var i=r(n),o=0,a=i.length;o<a;o++)if(i[o]===$f){e(i,o,1);break}return i},jat({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Gat.f}))},Jat=Nue.exports={enable:Xat,fastKey:Zat,getWeakData:Yat,onFreeze:Kat};Bat[$f]=!0});var Jb=I((zpr,kue)=>{"use strict";var Qat=te(),est=At(),tst=rt(),que=wy(),rst=Tn(),nst=Hp(),ist=xi(),ost=xa(),ast=Rr(),sst=Ji(),zB=xr(),BB=ut(),lst=Fb(),ust=Wa(),cst=Dp();kue.exports=function(r,e,t){var n=r.indexOf("Map")!==-1,i=r.indexOf("Weak")!==-1,o=n?"set":"add",a=est[r],u=a&&a.prototype,h=a,d={},v=function(D){var k=tst(u[D]);rst(u,D,D==="add"?function($){return k(this,$===0?0:$),this}:D==="delete"?function(j){return i&&!zB(j)?!1:k(this,j===0?0:j)}:D==="get"?function($){return i&&!zB($)?void 0:k(this,$===0?0:$)}:D==="has"?function($){return i&&!zB($)?!1:k(this,$===0?0:$)}:function($,ee){return k(this,$===0?0:$,ee),this})},x=que(r,!ast(a)||!(i||u.forEach&&!BB(function(){new a().entries().next()})));if(x)h=t.getConstructor(e,r,n,o),nst.enable();else if(que(r,!0)){var S=new h,A=S[o](i?{}:-0,1)!==S,L=BB(function(){S.has(1)}),q=lst(function(D){new a(D)}),R=!i&&BB(function(){for(var D=new a,k=5;k--;)D[o](k,k);return!D.has(-0)});q||(h=e(function(D,k){ost(D,u);var j=cst(new a,D,h);return sst(k)||ist(k,j[o],{that:j,AS_ENTRIES:n}),j}),h.prototype=u,u.constructor=h),(L||R)&&(v("delete"),v("has"),n&&v("get")),(R||A)&&v(o),i&&u.clear&&delete u.clear}return d[r]=h,Qat({global:!0,constructor:!0,forced:h!==a},d),ust(h,r),i||t.setStrong(h,r,n),h}});var VB=I((Bpr,Vue)=>{"use strict";var Fue=zi(),fst=ii(),jue=Ul(),hst=Fn(),pst=xa(),dst=Ji(),mst=xi(),vst=ZC(),xM=Do(),gst=jp(),Qb=sr(),zue=Hp().fastKey,Uue=yn(),Bue=Uue.set,UB=Uue.getterFor;Vue.exports={getConstructor:function(r,e,t,n){var i=r(function(d,v){pst(d,o),Bue(d,{type:e,index:Fue(null),first:null,last:null,size:0}),Qb||(d.size=0),dst(v)||mst(v,d[n],{that:d,AS_ENTRIES:t})}),o=i.prototype,a=UB(e),u=function(d,v,x){var S=a(d),A=h(d,v),L,q;return A?A.value=x:(S.last=A={index:q=zue(v,!0),key:v,value:x,previous:L=S.last,next:null,removed:!1},S.first||(S.first=A),L&&(L.next=A),Qb?S.size++:d.size++,q!=="F"&&(S.index[q]=A)),d},h=function(d,v){var x=a(d),S=zue(v),A;if(S!=="F")return x.index[S];for(A=x.first;A;A=A.next)if(A.key===v)return A};return jue(o,{clear:function(){for(var v=this,x=a(v),S=x.first;S;)S.removed=!0,S.previous&&(S.previous=S.previous.next=null),S=S.next;x.first=x.last=null,x.index=Fue(null),Qb?x.size=0:v.size=0},delete:function(d){var v=this,x=a(v),S=h(v,d);if(S){var A=S.next,L=S.previous;delete x.index[S.index],S.removed=!0,L&&(L.next=A),A&&(A.previous=L),x.first===S&&(x.first=A),x.last===S&&(x.last=L),Qb?x.size--:v.size--}return!!S},forEach:function(v){for(var x=a(this),S=hst(v,arguments.length>1?arguments[1]:void 0),A;A=A?A.next:x.first;)for(S(A.value,A.key,this);A&&A.removed;)A=A.previous},has:function(v){return!!h(this,v)}}),jue(o,t?{get:function(v){var x=h(this,v);return x&&x.value},set:function(v,x){return u(this,v===0?0:v,x)}}:{add:function(v){return u(this,v=v===0?0:v,v)}}),Qb&&fst(o,"size",{configurable:!0,get:function(){return a(this).size}}),i},setStrong:function(r,e,t){var n=e+" Iterator",i=UB(e),o=UB(n);vst(r,e,function(a,u){Bue(this,{type:n,target:a,state:i(a),kind:u,last:null})},function(){for(var a=o(this),u=a.kind,h=a.last;h&&h.removed;)h=h.previous;return!a.target||!(a.last=h=h?h.next:a.state.first)?(a.target=null,xM(void 0,!0)):xM(u==="keys"?h.key:u==="values"?h.value:[h.key,h.value],!1)},t?"entries":"values",!t,!0),gst(e)}}});var Gue=I(()=>{"use strict";var yst=Jb(),_st=VB();yst("Map",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},_st)});var wM=I(()=>{"use strict";Gue()});var vo=I((Hpr,$ue)=>{"use strict";var bM=rt(),e1=Map.prototype;$ue.exports={Map,set:bM(e1.set),get:bM(e1.get),has:bM(e1.has),remove:bM(e1.delete),proto:e1}});var GB=I(()=>{"use strict";var xst=te(),wst=rt(),bst=gr(),Sst=Qn(),Est=xi(),SM=vo(),Hue=zr(),Tst=ut(),Wue=SM.Map,Ist=SM.has,Ast=SM.get,Cst=SM.set,Mst=wst([].push),Rst=Hue||Tst(function(){return Wue.groupBy("ab",function(r){return r}).get("a").length!==1});xst({target:"Map",stat:!0,forced:Hue||Rst},{groupBy:function(e,t){Sst(e),bst(t);var n=new Wue,i=0;return Est(e,function(o){var a=t(o,i++);Ist(n,a)?Mst(Ast(n,a),o):Cst(n,a,[o])}),n}})});var $B=I((Ypr,Zue)=>{"use strict";var Pst=Math.log;Zue.exports=Math.log1p||function(e){var t=+e;return t>-1e-8&&t<1e-8?t-t*t/2:Pst(1+t)}});var Kue=I(()=>{"use strict";var Ost=te(),Lst=$B(),HB=Math.acosh,Dst=Math.log,Yue=Math.sqrt,Nst=Math.LN2,qst=!HB||Math.floor(HB(Number.MAX_VALUE))!==710||HB(1/0)!==1/0;Ost({target:"Math",stat:!0,forced:qst},{acosh:function(e){var t=+e;return t<1?NaN:t>94906265.62425156?Dst(t)+Nst:Lst(t-1+Yue(t-1)*Yue(t+1))}})});var Que=I(()=>{"use strict";var kst=te(),Xue=Math.asinh,Fst=Math.log,jst=Math.sqrt;function Jue(r){var e=+r;return!isFinite(e)||e===0?e:e<0?-Jue(-e):Fst(e+jst(e*e+1))}var zst=!(Xue&&1/Xue(0)>0);kst({target:"Math",stat:!0,forced:zst},{asinh:Jue})});var tce=I(()=>{"use strict";var Bst=te(),ece=Math.atanh,Ust=Math.log,Vst=!(ece&&1/ece(-0)<0);Bst({target:"Math",stat:!0,forced:Vst},{atanh:function(e){var t=+e;return t===0?t:Ust((1+t)/(1-t))/2}})});var rce=I(()=>{"use strict";var Gst=te(),$st=tM(),Hst=Math.abs,Wst=Math.pow;Gst({target:"Math",stat:!0},{cbrt:function(e){var t=+e;return $st(t)*Wst(Hst(t),1/3)}})});var nce=I(()=>{"use strict";var Zst=te(),Yst=Math.floor,Kst=Math.log,Xst=Math.LOG2E;Zst({target:"Math",stat:!0},{clz32:function(e){var t=e>>>0;return t?31-Yst(Kst(t+.5)*Xst):32}})});var r1=I((adr,ice)=>{"use strict";var t1=Math.expm1,Jst=Math.exp;ice.exports=!t1||t1(10)>22025.465794806718||t1(10)<22025.465794806718||t1(-2e-17)!==-2e-17?function(e){var t=+e;return t===0?t:t>-1e-6&&t<1e-6?t+t*t/2:Jst(t)-1}:t1});var ace=I(()=>{"use strict";var Qst=te(),elt=r1(),oce=Math.cosh,tlt=Math.abs,WB=Math.E,rlt=!oce||oce(710)===1/0;Qst({target:"Math",stat:!0,forced:rlt},{cosh:function(e){var t=elt(tlt(e)-1)+1;return(t+1/(t*WB*WB))*(WB/2)}})});var lce=I(()=>{"use strict";var nlt=te(),sce=r1();nlt({target:"Math",stat:!0,forced:sce!==Math.expm1},{expm1:sce})});var uce=I(()=>{"use strict";var ilt=te(),olt=rM();ilt({target:"Math",stat:!0},{fround:olt})});var fce=I(()=>{"use strict";var alt=te(),cce=Math.hypot,slt=Math.abs,llt=Math.sqrt,ult=!!cce&&cce(1/0,NaN)!==1/0;alt({target:"Math",stat:!0,arity:2,forced:ult},{hypot:function(e,t){for(var n=0,i=0,o=arguments.length,a=0,u,h;i<o;)u=slt(arguments[i++]),a<u?(h=a/u,n=n*h*h+1,a=u):u>0?(h=u/a,n+=h*h):n+=u;return a===1/0?1/0:a*llt(n)}})});var pce=I(()=>{"use strict";var clt=te(),flt=ut(),hce=Math.imul,hlt=flt(function(){return hce(4294967295,5)!==-5||hce.length!==2});clt({target:"Math",stat:!0,forced:hlt},{imul:function(e,t){var n=65535,i=+e,o=+t,a=n&i,u=n&o;return 0|a*u+((n&i>>>16)*u+a*(n&o>>>16)<<16>>>0)}})});var ZB=I((gdr,dce)=>{"use strict";var plt=Math.log,dlt=Math.LOG10E;dce.exports=Math.log10||function(e){return plt(e)*dlt}});var mce=I(()=>{"use strict";var mlt=te(),vlt=ZB();mlt({target:"Math",stat:!0},{log10:vlt})});var vce=I(()=>{"use strict";var glt=te(),ylt=$B();glt({target:"Math",stat:!0},{log1p:ylt})});var gce=I(()=>{"use strict";var _lt=te(),xlt=Math.log,wlt=Math.LN2;_lt({target:"Math",stat:!0},{log2:function(e){return xlt(e)/wlt}})});var yce=I(()=>{"use strict";var blt=te(),Slt=tM();blt({target:"Math",stat:!0},{sign:Slt})});var wce=I(()=>{"use strict";var Elt=te(),Tlt=ut(),_ce=r1(),Ilt=Math.abs,xce=Math.exp,Alt=Math.E,Clt=Tlt(function(){return Math.sinh(-2e-17)!==-2e-17});Elt({target:"Math",stat:!0,forced:Clt},{sinh:function(e){var t=+e;return Ilt(t)<1?(_ce(t)-_ce(-t))/2:(xce(t-1)-xce(-t-1))*(Alt/2)}})});var Ece=I(()=>{"use strict";var Mlt=te(),bce=r1(),Sce=Math.exp;Mlt({target:"Math",stat:!0},{tanh:function(e){var t=+e,n=bce(t),i=bce(-t);return n===1/0?1:i===1/0?-1:(n-i)/(Sce(t)+Sce(-t))}})});var Tce=I(()=>{"use strict";var Rlt=Wa();Rlt(Math,"Math",!0)});var Ice=I(()=>{"use strict";var Plt=te(),Olt=rz();Plt({target:"Math",stat:!0},{trunc:Olt})});var n1=I((Ddr,Ace)=>{"use strict";var Llt=rt();Ace.exports=Llt(1 .valueOf)});var $m=I((Ndr,Cce)=>{"use strict";Cce.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Hm=I((qdr,Rce)=>{"use strict";var Dlt=rt(),Nlt=Qn(),qlt=br(),KB=$m(),Mce=Dlt("".replace),klt=RegExp("^["+KB+"]+"),Flt=RegExp("(^|[^"+KB+"])["+KB+"]+$"),YB=function(r){return function(e){var t=qlt(Nlt(e));return r&1&&(t=Mce(t,klt,"")),r&2&&(t=Mce(t,Flt,"$1")),t}};Rce.exports={start:YB(1),end:YB(2),trim:YB(3)}});var kce=I(()=>{"use strict";var jlt=te(),XB=zr(),zlt=sr(),Lce=At(),JB=AC(),Dce=rt(),Blt=wy(),Pce=Lr(),Ult=Dp(),Vlt=Yo(),Glt=Of(),Nce=xb(),$lt=ut(),Hlt=Pp().f,Wlt=Oo().f,Zlt=Yn().f,Ylt=n1(),Klt=Hm().trim,i1="Number",qy=Lce[i1],Oce=JB[i1],QB=qy.prototype,Xlt=Lce.TypeError,Jlt=Dce("".slice),EM=Dce("".charCodeAt),Qlt=function(r){var e=Nce(r,"number");return typeof e=="bigint"?e:eut(e)},eut=function(r){var e=Nce(r,"number"),t,n,i,o,a,u,h,d;if(Glt(e))throw new Xlt("Cannot convert a Symbol value to a number");if(typeof e=="string"&&e.length>2){if(e=Klt(e),t=EM(e,0),t===43||t===45){if(n=EM(e,2),n===88||n===120)return NaN}else if(t===48){switch(EM(e,1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e;}for(a=Jlt(e,2),u=a.length,h=0;h<u;h++)if(d=EM(a,h),d<48||d>o)return NaN;return parseInt(a,i)}}return+e},eU=Blt(i1,!qy(" 0o1")||!qy("0b1")||qy("+0x1")),tut=function(r){return Vlt(QB,r)&&$lt(function(){Ylt(r)})},TM=function(e){var t=arguments.length<1?0:qy(Qlt(e));return tut(this)?Ult(Object(t),this,TM):t};TM.prototype=QB;eU&&!XB&&(QB.constructor=TM);jlt({global:!0,constructor:!0,wrap:!0,forced:eU},{Number:TM});var qce=function(r,e){for(var t=zlt?Hlt(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;t.length>n;n++)Pce(e,i=t[n])&&!Pce(r,i)&&Zlt(r,i,Wlt(e,i))};XB&&Oce&&qce(JB[i1],Oce);(eU||XB)&&qce(JB[i1],qy)});var Fce=I(()=>{"use strict";var rut=te();rut({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var tU=I((Bdr,jce)=>{"use strict";var nut=At(),iut=nut.isFinite;jce.exports=Number.isFinite||function(e){return typeof e=="number"&&iut(e)}});var zce=I(()=>{"use strict";var out=te(),aut=tU();out({target:"Number",stat:!0},{isFinite:aut})});var IM=I((Gdr,Bce)=>{"use strict";var sut=xr(),lut=Math.floor;Bce.exports=Number.isInteger||function(e){return!sut(e)&&isFinite(e)&&lut(e)===e}});var Uce=I(()=>{"use strict";var uut=te(),cut=IM();uut({target:"Number",stat:!0},{isInteger:cut})});var Vce=I(()=>{"use strict";var fut=te();fut({target:"Number",stat:!0},{isNaN:function(e){return e!==e}})});var Gce=I(()=>{"use strict";var hut=te(),put=IM(),dut=Math.abs;hut({target:"Number",stat:!0},{isSafeInteger:function(e){return put(e)&&dut(e)<=9007199254740991}})});var $ce=I(()=>{"use strict";var mut=te();mut({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var Hce=I(()=>{"use strict";var vut=te();vut({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var rU=I((tmr,Kce)=>{"use strict";var Yce=At(),gut=ut(),yut=rt(),_ut=br(),xut=Hm().trim,wut=$m(),but=yut("".charAt),AM=Yce.parseFloat,Wce=Yce.Symbol,Zce=Wce&&Wce.iterator,Sut=1/AM(wut+"-0")!==-1/0||Zce&&!gut(function(){AM(Object(Zce))});Kce.exports=Sut?function(e){var t=xut(_ut(e)),n=AM(t);return n===0&&but(t,0)==="-"?-0:n}:AM});var Jce=I(()=>{"use strict";var Eut=te(),Xce=rU();Eut({target:"Number",stat:!0,forced:Number.parseFloat!==Xce},{parseFloat:Xce})});var nU=I((imr,ife)=>{"use strict";var rfe=At(),Tut=ut(),Iut=rt(),Aut=br(),Cut=Hm().trim,Qce=$m(),o1=rfe.parseInt,efe=rfe.Symbol,tfe=efe&&efe.iterator,nfe=/^[+-]?0x/i,Mut=Iut(nfe.exec),Rut=o1(Qce+"08")!==8||o1(Qce+"0x16")!==22||tfe&&!Tut(function(){o1(Object(tfe))});ife.exports=Rut?function(e,t){var n=Cut(Aut(e));return o1(n,t>>>0||(Mut(nfe,n)?16:10))}:o1});var afe=I(()=>{"use strict";var Put=te(),ofe=nU();Put({target:"Number",stat:!0,forced:Number.parseInt!==ofe},{parseInt:ofe})});var ffe=I(()=>{"use strict";var Out=te(),oU=rt(),Lut=ni(),Dut=n1(),Nut=Zb(),qut=ZB(),iU=ut(),kut=RangeError,sfe=String,Fut=isFinite,jut=Math.abs,zut=Math.floor,lfe=Math.pow,But=Math.round,Cc=oU(1 .toExponential),Uut=oU(Nut),ufe=oU("".slice),cfe=Cc(-69e-12,4)==="-6.9000e-11"&&Cc(1.255,2)==="1.25e+0"&&Cc(12345,3)==="1.235e+4"&&Cc(25,0)==="3e+1",Vut=function(){return iU(function(){Cc(1,1/0)})&&iU(function(){Cc(1,-1/0)})},Gut=function(){return!iU(function(){Cc(1/0,1/0),Cc(NaN,1/0)})},$ut=!cfe||!Vut()||!Gut();Out({target:"Number",proto:!0,forced:$ut},{toExponential:function(e){var t=Dut(this);if(e===void 0)return Cc(t);var n=Lut(e);if(!Fut(t))return String(t);if(n<0||n>20)throw new kut("Incorrect fraction digits");if(cfe)return Cc(t,n);var i="",o,a,u,h;if(t<0&&(i="-",t=-t),t===0)a=0,o=Uut("0",n+1);else{var d=qut(t);a=zut(d);var v=lfe(10,a-n),x=But(t/v);2*t>=(2*x+1)*v&&(x+=1),x>=lfe(10,n+1)&&(x/=10,a+=1),o=sfe(x)}return n!==0&&(o=ufe(o,0,1)+"."+ufe(o,1)),a===0?(u="+",h="0"):(u=a>0?"+":"-",h=sfe(jut(a))),o+="e"+u+h,i+o}})});var gfe=I(()=>{"use strict";var Hut=te(),lU=rt(),Wut=ni(),Zut=n1(),Yut=Zb(),hfe=ut(),Kut=RangeError,mfe=String,vfe=Math.floor,sU=lU(Yut),pfe=lU("".slice),a1=lU(1 .toFixed),Fy=function(r,e,t){return e===0?t:e%2===1?Fy(r,e-1,t*r):Fy(r*r,e/2,t)},Xut=function(r){for(var e=0,t=r;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e},ky=function(r,e,t){for(var n=-1,i=t;++n<6;)i+=e*r[n],r[n]=i%1e7,i=vfe(i/1e7)},aU=function(r,e){for(var t=6,n=0;--t>=0;)n+=r[t],r[t]=vfe(n/e),n=n%e*1e7},dfe=function(r){for(var e=6,t="";--e>=0;)if(t!==""||e===0||r[e]!==0){var n=mfe(r[e]);t=t===""?n:t+sU("0",7-n.length)+n}return t},Jut=hfe(function(){return a1(8e-5,3)!=="0.000"||a1(.9,0)!=="1"||a1(1.255,2)!=="1.25"||a1(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!hfe(function(){a1({})});Hut({target:"Number",proto:!0,forced:Jut},{toFixed:function(e){var t=Zut(this),n=Wut(e),i=[0,0,0,0,0,0],o="",a="0",u,h,d,v;if(n<0||n>20)throw new Kut("Incorrect fraction digits");if(t!==t)return"NaN";if(t<=-1e21||t>=1e21)return mfe(t);if(t<0&&(o="-",t=-t),t>1e-21)if(u=Xut(t*Fy(2,69,1))-69,h=u<0?t*Fy(2,-u,1):t/Fy(2,u,1),h*=4503599627370496,u=52-u,u>0){for(ky(i,0,h),d=n;d>=7;)ky(i,1e7,0),d-=7;for(ky(i,Fy(10,d,1),0),d=u-1;d>=23;)aU(i,1<<23),d-=23;aU(i,1<<d),ky(i,1,1),aU(i,2),a=dfe(i)}else ky(i,0,h),ky(i,1<<-u,0),a=dfe(i)+sU("0",n);return n>0?(v=a.length,a=o+(v<=n?"0."+sU("0",n-v)+a:pfe(a,0,v-n)+"."+pfe(a,v-n))):a=o+a,a}})});var xfe=I(()=>{"use strict";var Qut=te(),ect=rt(),yfe=ut(),_fe=n1(),CM=ect(1 .toPrecision),tct=yfe(function(){return CM(1,void 0)!=="1"})||!yfe(function(){CM({})});Qut({target:"Number",proto:!0,forced:tct},{toPrecision:function(e){return e===void 0?CM(_fe(this)):CM(_fe(this),e)}})});var cU=I((pmr,Sfe)=>{"use strict";var wfe=sr(),rct=rt(),nct=Ot(),ict=ut(),uU=Dm(),oct=Ib(),act=yb(),sct=Br(),lct=Pf(),jy=Object.assign,bfe=Object.defineProperty,uct=rct([].concat);Sfe.exports=!jy||ict(function(){if(wfe&&jy({b:1},jy(bfe({},"a",{enumerable:!0,get:function(){bfe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var r={},e={},t=Symbol("assign detection"),n="abcdefghijklmnopqrst";return r[t]=7,n.split("").forEach(function(i){e[i]=i}),jy({},r)[t]!==7||uU(jy({},e)).join("")!==n})?function(e,t){for(var n=sct(e),i=arguments.length,o=1,a=oct.f,u=act.f;i>o;)for(var h=lct(arguments[o++]),d=a?uct(uU(h),a(h)):uU(h),v=d.length,x=0,S;v>x;)S=d[x++],(!wfe||nct(u,h,S))&&(n[S]=h[S]);return n}:jy});var Tfe=I(()=>{"use strict";var cct=te(),Efe=cU();cct({target:"Object",stat:!0,arity:2,forced:Object.assign!==Efe},{assign:Efe})});var Ife=I(()=>{"use strict";var fct=te(),hct=sr(),pct=zi();fct({target:"Object",stat:!0,sham:!hct},{create:pct})});var s1=I((ymr,Cfe)=>{"use strict";var dct=zr(),mct=At(),vct=ut(),Afe=QC();Cfe.exports=dct||!vct(function(){if(!(Afe&&Afe<535)){var r=Math.random();__defineSetter__.call(null,r,function(){}),delete mct[r]}})});var Mfe=I(()=>{"use strict";var gct=te(),yct=sr(),_ct=s1(),xct=gr(),wct=Br(),bct=Yn();yct&&gct({target:"Object",proto:!0,forced:_ct},{__defineGetter__:function(e,t){bct.f(wct(this),e,{get:xct(t),enumerable:!0,configurable:!0})}})});var Pfe=I(()=>{"use strict";var Sct=te(),Ect=sr(),Rfe=SC().f;Sct({target:"Object",stat:!0,forced:Object.defineProperties!==Rfe,sham:!Ect},{defineProperties:Rfe})});var Lfe=I(()=>{"use strict";var Tct=te(),Ict=sr(),Ofe=Yn().f;Tct({target:"Object",stat:!0,forced:Object.defineProperty!==Ofe,sham:!Ict},{defineProperty:Ofe})});var Dfe=I(()=>{"use strict";var Act=te(),Cct=sr(),Mct=s1(),Rct=gr(),Pct=Br(),Oct=Yn();Cct&&Act({target:"Object",proto:!0,forced:Mct},{__defineSetter__:function(e,t){Oct.f(Pct(this),e,{set:Rct(t),enumerable:!0,configurable:!0})}})});var fU=I((Amr,jfe)=>{"use strict";var qfe=sr(),Lct=ut(),kfe=rt(),Dct=to(),Nct=Dm(),qct=Qi(),kct=yb().f,Ffe=kfe(kct),Fct=kfe([].push),jct=qfe&&Lct(function(){var r=Object.create(null);return r[2]=2,!Ffe(r,2)}),Nfe=function(r){return function(e){for(var t=qct(e),n=Nct(t),i=jct&&Dct(t)===null,o=n.length,a=0,u=[],h;o>a;)h=n[a++],(!qfe||(i?h in t:Ffe(t,h)))&&Fct(u,r?[h,t[h]]:t[h]);return u}};jfe.exports={entries:Nfe(!0),values:Nfe(!1)}});var zfe=I(()=>{"use strict";var zct=te(),Bct=fU().entries;zct({target:"Object",stat:!0},{entries:function(e){return Bct(e)}})});var Bfe=I(()=>{"use strict";var Uct=te(),Vct=Gf(),Gct=ut(),$ct=xr(),Hct=Hp().onFreeze,hU=Object.freeze,Wct=Gct(function(){hU(1)});Uct({target:"Object",stat:!0,forced:Wct,sham:!Vct},{freeze:function(e){return hU&&$ct(e)?hU(Hct(e)):e}})});var Ufe=I(()=>{"use strict";var Zct=te(),Yct=xi(),Kct=zl();Zct({target:"Object",stat:!0},{fromEntries:function(e){var t={};return Yct(e,function(n,i){Kct(t,n,i)},{AS_ENTRIES:!0}),t}})});var $fe=I(()=>{"use strict";var Xct=te(),Jct=ut(),Qct=Qi(),Vfe=Oo().f,Gfe=sr(),eft=!Gfe||Jct(function(){Vfe(1)});Xct({target:"Object",stat:!0,forced:eft,sham:!Gfe},{getOwnPropertyDescriptor:function(e,t){return Vfe(Qct(e),t)}})});var Hfe=I(()=>{"use strict";var tft=te(),rft=sr(),nft=_C(),ift=Qi(),oft=Oo(),aft=zl();tft({target:"Object",stat:!0,sham:!rft},{getOwnPropertyDescriptors:function(e){for(var t=ift(e),n=oft.f,i=nft(t),o={},a=0,u,h;i.length>a;)h=n(t,u=i[a++]),h!==void 0&&aft(o,u,h);return o}})});var Wfe=I(()=>{"use strict";var sft=te(),lft=ut(),uft=IC().f,cft=lft(function(){return!Object.getOwnPropertyNames(1)});sft({target:"Object",stat:!0,forced:cft},{getOwnPropertyNames:uft})});var Yfe=I(()=>{"use strict";var fft=te(),hft=ut(),pft=Br(),Zfe=to(),dft=jC(),mft=hft(function(){Zfe(1)});fft({target:"Object",stat:!0,forced:mft,sham:!dft},{getPrototypeOf:function(e){return Zfe(pft(e))}})});var pU=I(()=>{"use strict";var vft=te(),gft=_r(),yft=rt(),_ft=gr(),xft=Qn(),wft=bc(),bft=xi(),Sft=ut(),Kfe=Object.groupBy,Eft=gft("Object","create"),Tft=yft([].push),Ift=!Kfe||Sft(function(){return Kfe("ab",function(r){return r}).a.length!==1});vft({target:"Object",stat:!0,forced:Ift},{groupBy:function(e,t){xft(e),_ft(t);var n=Eft(null),i=0;return bft(e,function(o){var a=wft(t(o,i++));a in n?Tft(n[a],o):n[a]=[o]}),n}})});var dU=I(()=>{"use strict";var Aft=te(),Cft=Lr();Aft({target:"Object",stat:!0},{hasOwn:Cft})});var mU=I((Hmr,Xfe)=>{"use strict";Xfe.exports=Object.is||function(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}});var Jfe=I(()=>{"use strict";var Mft=te(),Rft=mU();Mft({target:"Object",stat:!0},{is:Rft})});var ehe=I(()=>{"use strict";var Pft=te(),Qfe=_M();Pft({target:"Object",stat:!0,forced:Object.isExtensible!==Qfe},{isExtensible:Qfe})});var rhe=I(()=>{"use strict";var Oft=te(),Lft=ut(),Dft=xr(),Nft=Zo(),the=gM(),vU=Object.isFrozen,qft=the||Lft(function(){vU(1)});Oft({target:"Object",stat:!0,forced:qft},{isFrozen:function(e){return!Dft(e)||the&&Nft(e)==="ArrayBuffer"?!0:vU?vU(e):!1}})});var ihe=I(()=>{"use strict";var kft=te(),Fft=ut(),jft=xr(),zft=Zo(),nhe=gM(),gU=Object.isSealed,Bft=nhe||Fft(function(){gU(1)});kft({target:"Object",stat:!0,forced:Bft},{isSealed:function(e){return!jft(e)||nhe&&zft(e)==="ArrayBuffer"?!0:gU?gU(e):!1}})});var ahe=I(()=>{"use strict";var Uft=te(),Vft=Br(),ohe=Dm(),Gft=ut(),$ft=Gft(function(){ohe(1)});Uft({target:"Object",stat:!0,forced:$ft},{keys:function(e){return ohe(Vft(e))}})});var she=I(()=>{"use strict";var Hft=te(),Wft=sr(),Zft=s1(),Yft=Br(),Kft=bc(),Xft=to(),Jft=Oo().f;Wft&&Hft({target:"Object",proto:!0,forced:Zft},{__lookupGetter__:function(e){var t=Yft(this),n=Kft(e),i;do if(i=Jft(t,n))return i.get;while(t=Xft(t))}})});var lhe=I(()=>{"use strict";var Qft=te(),eht=sr(),tht=s1(),rht=Br(),nht=bc(),iht=to(),oht=Oo().f;eht&&Qft({target:"Object",proto:!0,forced:tht},{__lookupSetter__:function(e){var t=rht(this),n=nht(e),i;do if(i=oht(t,n))return i.set;while(t=iht(t))}})});var uhe=I(()=>{"use strict";var aht=te(),sht=xr(),lht=Hp().onFreeze,uht=Gf(),cht=ut(),yU=Object.preventExtensions,fht=cht(function(){yU(1)});aht({target:"Object",stat:!0,forced:fht,sham:!uht},{preventExtensions:function(e){return yU&&sht(e)?yU(lht(e)):e}})});var dhe=I(()=>{"use strict";var hht=sr(),pht=ii(),dht=xr(),mht=Mz(),vht=Br(),ght=Qn(),che=Object.getPrototypeOf,fhe=Object.setPrototypeOf,hhe=Object.prototype,phe="__proto__";if(hht&&che&&fhe&&!(phe in hhe))try{pht(hhe,phe,{configurable:!0,get:function(){return che(vht(this))},set:function(e){var t=ght(this);mht(e)&&dht(t)&&fhe(t,e)}})}catch(r){}});var mhe=I(()=>{"use strict";var yht=te(),_ht=xr(),xht=Hp().onFreeze,wht=Gf(),bht=ut(),_U=Object.seal,Sht=bht(function(){_U(1)});yht({target:"Object",stat:!0,forced:Sht,sham:!wht},{seal:function(e){return _U&&_ht(e)?_U(xht(e)):e}})});var vhe=I(()=>{"use strict";var Eht=te(),Tht=jl();Eht({target:"Object",stat:!0},{setPrototypeOf:Tht})});var yhe=I((mvr,ghe)=>{"use strict";var Iht=wC(),Aht=bs();ghe.exports=Iht?{}.toString:function(){return"[object "+Aht(this)+"]"}});var _he=I(()=>{"use strict";var Cht=wC(),Mht=Tn(),Rht=yhe();Cht||Mht(Object.prototype,"toString",Rht,{unsafe:!0})});var xhe=I(()=>{"use strict";var Pht=te(),Oht=fU().values;Pht({target:"Object",stat:!0},{values:function(e){return Oht(e)}})});var bhe=I(()=>{"use strict";var Lht=te(),whe=rU();Lht({global:!0,forced:parseFloat!==whe},{parseFloat:whe})});var Ehe=I(()=>{"use strict";var Dht=te(),She=nU();Dht({global:!0,forced:parseInt!==She},{parseInt:She})});var l1=I((Evr,The)=>{"use strict";var Nht=qu(),qht=Mp(),kht=TypeError;The.exports=function(r){if(Nht(r))return r;throw new kht(qht(r)+" is not a constructor")}});var u1=I((Tvr,Ahe)=>{"use strict";var Ihe=Rt(),Fht=l1(),jht=Ji(),zht=fr(),Bht=zht("species");Ahe.exports=function(r,e){var t=Ihe(r).constructor,n;return t===void 0||jht(n=Ihe(t)[Bht])?e:Fht(n)}});var ll=I((Ivr,Che)=>{"use strict";var Uht=TypeError;Che.exports=function(r,e){if(r<e)throw new Uht("Not enough arguments");return r}});var xU=I((Avr,Mhe)=>{"use strict";var Vht=Pu();Mhe.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(Vht)});var h1=I((Cvr,Fhe)=>{"use strict";var ul=At(),Ght=_a(),$ht=Fn(),Rhe=Rr(),Hht=Lr(),khe=ut(),Phe=oz(),Wht=Ss(),Ohe=wb(),Zht=ll(),Yht=xU(),Kht=Um(),IU=ul.setImmediate,AU=ul.clearImmediate,Xht=ul.process,wU=ul.Dispatch,Jht=ul.Function,Lhe=ul.MessageChannel,Qht=ul.String,bU=0,c1={},Dhe="onreadystatechange",f1,Wm,SU,EU;khe(function(){f1=ul.location});var CU=function(r){if(Hht(c1,r)){var e=c1[r];delete c1[r],e()}},TU=function(r){return function(){CU(r)}},Nhe=function(r){CU(r.data)},qhe=function(r){ul.postMessage(Qht(r),f1.protocol+"//"+f1.host)};(!IU||!AU)&&(IU=function(e){Zht(arguments.length,1);var t=Rhe(e)?e:Jht(e),n=Wht(arguments,1);return c1[++bU]=function(){Ght(t,void 0,n)},Wm(bU),bU},AU=function(e){delete c1[e]},Kht?Wm=function(r){Xht.nextTick(TU(r))}:wU&&wU.now?Wm=function(r){wU.now(TU(r))}:Lhe&&!Yht?(SU=new Lhe,EU=SU.port2,SU.port1.onmessage=Nhe,Wm=$ht(EU.postMessage,EU)):ul.addEventListener&&Rhe(ul.postMessage)&&!ul.importScripts&&f1&&f1.protocol!=="file:"&&!khe(qhe)?(Wm=qhe,ul.addEventListener("message",Nhe,!1)):Dhe in Ohe("script")?Wm=function(r){Phe.appendChild(Ohe("script"))[Dhe]=function(){Phe.removeChild(this),CU(r)}}:Wm=function(r){setTimeout(TU(r),0)});Fhe.exports={set:IU,clear:AU}});var MU=I((Mvr,zhe)=>{"use strict";var jhe=At(),ept=sr(),tpt=Object.getOwnPropertyDescriptor;zhe.exports=function(r){if(!ept)return jhe[r];var e=tpt(jhe,r);return e&&e.value}});var RU=I((Rvr,Uhe)=>{"use strict";var Bhe=function(){this.head=null,this.tail=null};Bhe.prototype={add:function(r){var e={item:r,next:null},t=this.tail;t?t.next=e:this.head=e,this.tail=e},get:function(){var r=this.head;if(r){var e=this.head=r.next;return e===null&&(this.tail=null),r.item}}};Uhe.exports=Bhe});var Ghe=I((Pvr,Vhe)=>{"use strict";var rpt=Pu();Vhe.exports=/ipad|iphone|ipod/i.test(rpt)&&typeof Pebble!="undefined"});var Hhe=I((Ovr,$he)=>{"use strict";var npt=Pu();$he.exports=/web0s(?!.*chrome)/i.test(npt)});var qU=I((Lvr,Jhe)=>{"use strict";var By=At(),ipt=MU(),Whe=Fn(),PU=h1().set,opt=RU(),apt=xU(),spt=Ghe(),lpt=Hhe(),OU=Um(),Zhe=By.MutationObserver||By.WebKitMutationObserver,Yhe=By.document,Khe=By.process,MM=By.Promise,NU=ipt("queueMicrotask"),zy,LU,DU,RM,Xhe;NU||(p1=new opt,d1=function(){var r,e;for(OU&&(r=Khe.domain)&&r.exit();e=p1.get();)try{e()}catch(t){throw p1.head&&zy(),t}r&&r.enter()},!apt&&!OU&&!lpt&&Zhe&&Yhe?(LU=!0,DU=Yhe.createTextNode(""),new Zhe(d1).observe(DU,{characterData:!0}),zy=function(){DU.data=LU=!LU}):!spt&&MM&&MM.resolve?(RM=MM.resolve(void 0),RM.constructor=MM,Xhe=Whe(RM.then,RM),zy=function(){Xhe(d1)}):OU?zy=function(){Khe.nextTick(d1)}:(PU=Whe(PU,By),zy=function(){PU(d1)}),NU=function(r){p1.head||zy(),p1.add(r)});var p1,d1;Jhe.exports=NU});var kU=I((Dvr,Qhe)=>{"use strict";Qhe.exports=function(r,e){try{arguments.length===1?console.error(r):console.error(r,e)}catch(t){}}});var Wp=I((Nvr,epe)=>{"use strict";epe.exports=function(r){try{return{error:!1,value:r()}}catch(e){return{error:!0,value:e}}}});var Zm=I((qvr,tpe)=>{"use strict";var upt=At();tpe.exports=upt.Promise});var Uy=I((kvr,ope)=>{"use strict";var cpt=At(),m1=Zm(),fpt=Rr(),hpt=wy(),ppt=bb(),dpt=fr(),rpe=Gb(),mpt=zr(),FU=wc(),npe=m1&&m1.prototype,vpt=dpt("species"),jU=!1,ipe=fpt(cpt.PromiseRejectionEvent),gpt=hpt("Promise",function(){var r=ppt(m1),e=r!==String(m1);if(!e&&FU===66||mpt&&!(npe.catch&&npe.finally))return!0;if(!FU||FU<51||!/native code/.test(r)){var t=new m1(function(o){o(1)}),n=function(o){o(function(){},function(){})},i=t.constructor={};if(i[vpt]=n,jU=t.then(function(){})instanceof n,!jU)return!0}return!e&&(rpe==="BROWSER"||rpe==="DENO")&&!ipe});ope.exports={CONSTRUCTOR:gpt,REJECTION_EVENT:ipe,SUBCLASSING:jU}});var Mc=I((Fvr,spe)=>{"use strict";var ape=gr(),ypt=TypeError,_pt=function(r){var e,t;this.promise=new r(function(n,i){if(e!==void 0||t!==void 0)throw new ypt("Bad Promise constructor");e=n,t=i}),this.resolve=ape(e),this.reject=ape(t)};spe.exports.f=function(r){return new _pt(r)}});var Ipe=I(()=>{"use strict";var xpt=te(),wpt=zr(),DM=Um(),Zp=At(),Hy=Ot(),lpe=Tn(),upe=jl(),bpt=Wa(),Spt=jp(),Ept=gr(),LM=Rr(),Tpt=xr(),Ipt=xa(),Apt=u1(),dpe=h1().set,GU=qU(),Cpt=kU(),Mpt=Wp(),Rpt=RU(),mpe=yn(),NM=Zm(),$U=Uy(),vpe=Mc(),qM="Promise",gpe=$U.CONSTRUCTOR,Ppt=$U.REJECTION_EVENT,Opt=$U.SUBCLASSING,zU=mpe.getterFor(qM),Lpt=mpe.set,Vy=NM&&NM.prototype,Ym=NM,PM=Vy,ype=Zp.TypeError,BU=Zp.document,HU=Zp.process,UU=vpe.f,Dpt=UU,Npt=!!(BU&&BU.createEvent&&Zp.dispatchEvent),_pe="unhandledrejection",qpt="rejectionhandled",cpe=0,xpe=1,kpt=2,WU=1,wpe=2,OM,fpe,Fpt,hpe,bpe=function(r){var e;return Tpt(r)&&LM(e=r.then)?e:!1},Spe=function(r,e){var t=e.value,n=e.state===xpe,i=n?r.ok:r.fail,o=r.resolve,a=r.reject,u=r.domain,h,d,v;try{i?(n||(e.rejection===wpe&&zpt(e),e.rejection=WU),i===!0?h=t:(u&&u.enter(),h=i(t),u&&(u.exit(),v=!0)),h===r.promise?a(new ype("Promise-chain cycle")):(d=bpe(h))?Hy(d,h,o,a):o(h)):a(t)}catch(x){u&&!v&&u.exit(),a(x)}},Epe=function(r,e){r.notified||(r.notified=!0,GU(function(){for(var t=r.reactions,n;n=t.get();)Spe(n,r);r.notified=!1,e&&!r.rejection&&jpt(r)}))},Tpe=function(r,e,t){var n,i;Npt?(n=BU.createEvent("Event"),n.promise=e,n.reason=t,n.initEvent(r,!1,!0),Zp.dispatchEvent(n)):n={promise:e,reason:t},!Ppt&&(i=Zp["on"+r])?i(n):r===_pe&&Cpt("Unhandled promise rejection",t)},jpt=function(r){Hy(dpe,Zp,function(){var e=r.facade,t=r.value,n=ppe(r),i;if(n&&(i=Mpt(function(){DM?HU.emit("unhandledRejection",t,e):Tpe(_pe,e,t)}),r.rejection=DM||ppe(r)?wpe:WU,i.error))throw i.value})},ppe=function(r){return r.rejection!==WU&&!r.parent},zpt=function(r){Hy(dpe,Zp,function(){var e=r.facade;DM?HU.emit("rejectionHandled",e):Tpe(qpt,e,r.value)})},Gy=function(r,e,t){return function(n){r(e,n,t)}},$y=function(r,e,t){r.done||(r.done=!0,t&&(r=t),r.value=e,r.state=kpt,Epe(r,!0))},VU=function(r,e,t){if(!r.done){r.done=!0,t&&(r=t);try{if(r.facade===e)throw new ype("Promise can't be resolved itself");var n=bpe(e);n?GU(function(){var i={done:!1};try{Hy(n,e,Gy(VU,i,r),Gy($y,i,r))}catch(o){$y(i,o,r)}}):(r.value=e,r.state=xpe,Epe(r,!1))}catch(i){$y({done:!1},i,r)}}};if(gpe&&(Ym=function(e){Ipt(this,PM),Ept(e),Hy(OM,this);var t=zU(this);try{e(Gy(VU,t),Gy($y,t))}catch(n){$y(t,n)}},PM=Ym.prototype,OM=function(e){Lpt(this,{type:qM,done:!1,notified:!1,parent:!1,reactions:new Rpt,rejection:!1,state:cpe,value:null})},OM.prototype=lpe(PM,"then",function(e,t){var n=zU(this),i=UU(Apt(this,Ym));return n.parent=!0,i.ok=LM(e)?e:!0,i.fail=LM(t)&&t,i.domain=DM?HU.domain:void 0,n.state===cpe?n.reactions.add(i):GU(function(){Spe(i,n)}),i.promise}),fpe=function(){var r=new OM,e=zU(r);this.promise=r,this.resolve=Gy(VU,e),this.reject=Gy($y,e)},vpe.f=UU=function(r){return r===Ym||r===Fpt?new fpe(r):Dpt(r)},!wpt&&LM(NM)&&Vy!==Object.prototype)){hpe=Vy.then,Opt||lpe(Vy,"then",function(e,t){var n=this;return new Ym(function(i,o){Hy(hpe,n,i,o)}).then(e,t)},{unsafe:!0});try{delete Vy.constructor}catch(r){}upe&&upe(Vy,PM)}xpt({global:!0,constructor:!0,wrap:!0,forced:gpe},{Promise:Ym});bpt(Ym,qM,!1,!0);Spt(qM)});var v1=I((Bvr,Ape)=>{"use strict";var Bpt=Zm(),Upt=Fb(),Vpt=Uy().CONSTRUCTOR;Ape.exports=Vpt||!Upt(function(r){Bpt.all(r).then(void 0,function(){})})});var Cpe=I(()=>{"use strict";var Gpt=te(),$pt=Ot(),Hpt=gr(),Wpt=Mc(),Zpt=Wp(),Ypt=xi(),Kpt=v1();Gpt({target:"Promise",stat:!0,forced:Kpt},{all:function(e){var t=this,n=Wpt.f(t),i=n.resolve,o=n.reject,a=Zpt(function(){var u=Hpt(t.resolve),h=[],d=0,v=1;Ypt(e,function(x){var S=d++,A=!1;v++,$pt(u,t,x).then(function(L){A||(A=!0,h[S]=L,--v||i(h))},o)}),--v||i(h)});return a.error&&o(a.value),n.promise}})});var Rpe=I(()=>{"use strict";var Xpt=te(),Jpt=zr(),Qpt=Uy().CONSTRUCTOR,YU=Zm(),edt=_r(),tdt=Rr(),rdt=Tn(),Mpe=YU&&YU.prototype;Xpt({target:"Promise",proto:!0,forced:Qpt,real:!0},{catch:function(r){return this.then(void 0,r)}});!Jpt&&tdt(YU)&&(ZU=edt("Promise").prototype.catch,Mpe.catch!==ZU&&rdt(Mpe,"catch",ZU,{unsafe:!0}));var ZU});var Ppe=I(()=>{"use strict";var ndt=te(),idt=Ot(),odt=gr(),adt=Mc(),sdt=Wp(),ldt=xi(),udt=v1();ndt({target:"Promise",stat:!0,forced:udt},{race:function(e){var t=this,n=adt.f(t),i=n.reject,o=sdt(function(){var a=odt(t.resolve);ldt(e,function(u){idt(a,t,u).then(n.resolve,i)})});return o.error&&i(o.value),n.promise}})});var Ope=I(()=>{"use strict";var cdt=te(),fdt=Mc(),hdt=Uy().CONSTRUCTOR;cdt({target:"Promise",stat:!0,forced:hdt},{reject:function(e){var t=fdt.f(this),n=t.reject;return n(e),t.promise}})});var KU=I((Kvr,Lpe)=>{"use strict";var pdt=Rt(),ddt=xr(),mdt=Mc();Lpe.exports=function(r,e){if(pdt(r),ddt(e)&&e.constructor===r)return e;var t=mdt.f(r),n=t.resolve;return n(e),t.promise}});var qpe=I(()=>{"use strict";var vdt=te(),gdt=_r(),Dpe=zr(),ydt=Zm(),Npe=Uy().CONSTRUCTOR,_dt=KU(),xdt=gdt("Promise"),wdt=Dpe&&!Npe;vdt({target:"Promise",stat:!0,forced:Dpe||Npe},{resolve:function(e){return _dt(wdt&&this===xdt?ydt:this,e)}})});var kpe=I(()=>{"use strict";Ipe();Cpe();Rpe();Ppe();Ope();qpe()});var XU=I(()=>{"use strict";var bdt=te(),Sdt=Ot(),Edt=gr(),Tdt=Mc(),Idt=Wp(),Adt=xi(),Cdt=v1();bdt({target:"Promise",stat:!0,forced:Cdt},{allSettled:function(e){var t=this,n=Tdt.f(t),i=n.resolve,o=n.reject,a=Idt(function(){var u=Edt(t.resolve),h=[],d=0,v=1;Adt(e,function(x){var S=d++,A=!1;v++,Sdt(u,t,x).then(function(L){A||(A=!0,h[S]={status:"fulfilled",value:L},--v||i(h))},function(L){A||(A=!0,h[S]={status:"rejected",reason:L},--v||i(h))})}),--v||i(h)});return a.error&&o(a.value),n.promise}})});var JU=I(()=>{"use strict";var Mdt=te(),Rdt=Ot(),Pdt=gr(),Odt=_r(),Ldt=Mc(),Ddt=Wp(),Ndt=xi(),qdt=v1(),Fpe="No one promise resolved";Mdt({target:"Promise",stat:!0,forced:qdt},{any:function(e){var t=this,n=Odt("AggregateError"),i=Ldt.f(t),o=i.resolve,a=i.reject,u=Ddt(function(){var h=Pdt(t.resolve),d=[],v=0,x=1,S=!1;Ndt(e,function(A){var L=v++,q=!1;x++,Rdt(h,t,A).then(function(R){q||S||(S=!0,o(R))},function(R){q||S||(q=!0,d[L]=R,--x||a(new n(d,Fpe)))})}),--x||a(new n(d,Fpe))});return u.error&&a(u.value),i.promise}})});var Upe=I(()=>{"use strict";var kdt=te(),Fdt=zr(),kM=Zm(),jdt=ut(),zpe=_r(),Bpe=Rr(),zdt=u1(),jpe=KU(),Bdt=Tn(),e3=kM&&kM.prototype,Udt=!!kM&&jdt(function(){e3.finally.call({then:function(){}},function(){})});kdt({target:"Promise",proto:!0,real:!0,forced:Udt},{finally:function(r){var e=zdt(this,zpe("Promise")),t=Bpe(r);return this.then(t?function(n){return jpe(e,r()).then(function(){return n})}:r,t?function(n){return jpe(e,r()).then(function(){throw n})}:r)}});!Fdt&&Bpe(kM)&&(QU=zpe("Promise").prototype.finally,e3.finally!==QU&&Bdt(e3,"finally",QU,{unsafe:!0}));var QU});var r3=I(()=>{"use strict";var Vdt=te(),Gdt=At(),$dt=_a(),Hdt=Ss(),Wdt=Mc(),Zdt=gr(),Gpe=Wp(),t3=Gdt.Promise,Vpe=!1,Ydt=!t3||!t3.try||Gpe(function(){t3.try(function(r){Vpe=r===8},8)}).error||!Vpe;Vdt({target:"Promise",stat:!0,forced:Ydt},{try:function(r){var e=arguments.length>1?Hdt(arguments,1):[],t=Wdt.f(this),n=Gpe(function(){return $dt(Zdt(r),void 0,e)});return(n.error?t.reject:t.resolve)(n.value),t.promise}})});var n3=I(()=>{"use strict";var Kdt=te(),Xdt=Mc();Kdt({target:"Promise",stat:!0},{withResolvers:function(){var e=Xdt.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})});var $pe=I(()=>{"use strict";var Jdt=te(),Qdt=_a(),emt=gr(),tmt=Rt(),rmt=ut(),nmt=!rmt(function(){Reflect.apply(function(){})});Jdt({target:"Reflect",stat:!0,forced:nmt},{apply:function(e,t,n){return Qdt(emt(e),t,tmt(n))}})});var Jpe=I(()=>{"use strict";var imt=te(),omt=_r(),i3=_a(),amt=cB(),Hpe=l1(),smt=Rt(),Wpe=xr(),lmt=zi(),Ype=ut(),o3=omt("Reflect","construct"),umt=Object.prototype,cmt=[].push,Kpe=Ype(function(){function r(){}return!(o3(function(){},[],r)instanceof r)}),Xpe=!Ype(function(){o3(function(){})}),Zpe=Kpe||Xpe;imt({target:"Reflect",stat:!0,forced:Zpe,sham:Zpe},{construct:function(e,t){Hpe(e),smt(t);var n=arguments.length<3?e:Hpe(arguments[2]);if(Xpe&&!Kpe)return o3(e,t,n);if(e===n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);}var i=[null];return i3(cmt,i,t),new(i3(amt,e,i))}var o=n.prototype,a=lmt(Wpe(o)?o:umt),u=i3(e,a,t);return Wpe(u)?u:a}})});var tde=I(()=>{"use strict";var fmt=te(),hmt=sr(),Qpe=Rt(),pmt=bc(),ede=Yn(),dmt=ut(),mmt=dmt(function(){Reflect.defineProperty(ede.f({},1,{value:1}),1,{value:2})});fmt({target:"Reflect",stat:!0,forced:mmt,sham:!hmt},{defineProperty:function(e,t,n){Qpe(e);var i=pmt(t);Qpe(n);try{return ede.f(e,i,n),!0}catch(o){return!1}}})});var rde=I(()=>{"use strict";var vmt=te(),gmt=Rt(),ymt=Oo().f;vmt({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=ymt(gmt(e),t);return n&&!n.configurable?!1:delete e[t]}})});var a3=I((_gr,ide)=>{"use strict";var nde=Lr();ide.exports=function(r){return r!==void 0&&(nde(r,"value")||nde(r,"writable"))}});var ade=I(()=>{"use strict";var _mt=te(),xmt=Ot(),wmt=xr(),bmt=Rt(),Smt=a3(),Emt=Oo(),Tmt=to();function ode(r,e){var t=arguments.length<3?r:arguments[2],n,i;if(bmt(r)===t)return r[e];if(n=Emt.f(r,e),n)return Smt(n)?n.value:n.get===void 0?void 0:xmt(n.get,t);if(wmt(i=Tmt(r)))return ode(i,e,t)}_mt({target:"Reflect",stat:!0},{get:ode})});var sde=I(()=>{"use strict";var Imt=te(),Amt=sr(),Cmt=Rt(),Mmt=Oo();Imt({target:"Reflect",stat:!0,sham:!Amt},{getOwnPropertyDescriptor:function(e,t){return Mmt.f(Cmt(e),t)}})});var lde=I(()=>{"use strict";var Rmt=te(),Pmt=Rt(),Omt=to(),Lmt=jC();Rmt({target:"Reflect",stat:!0,sham:!Lmt},{getPrototypeOf:function(e){return Omt(Pmt(e))}})});var ude=I(()=>{"use strict";var Dmt=te();Dmt({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})});var cde=I(()=>{"use strict";var Nmt=te(),qmt=Rt(),kmt=_M();Nmt({target:"Reflect",stat:!0},{isExtensible:function(e){return qmt(e),kmt(e)}})});var fde=I(()=>{"use strict";var Fmt=te(),jmt=_C();Fmt({target:"Reflect",stat:!0},{ownKeys:jmt})});var hde=I(()=>{"use strict";var zmt=te(),Bmt=_r(),Umt=Rt(),Vmt=Gf();zmt({target:"Reflect",stat:!0,sham:!Vmt},{preventExtensions:function(e){Umt(e);try{var t=Bmt("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})});var gde=I(()=>{"use strict";var Gmt=te(),$mt=Ot(),Hmt=Rt(),pde=xr(),Wmt=a3(),Zmt=ut(),s3=Yn(),dde=Oo(),Ymt=to(),mde=xs();function vde(r,e,t){var n=arguments.length<4?r:arguments[3],i=dde.f(Hmt(r),e),o,a,u;if(!i){if(pde(a=Ymt(r)))return vde(a,e,t,n);i=mde(0)}if(Wmt(i)){if(i.writable===!1||!pde(n))return!1;if(o=dde.f(n,e)){if(o.get||o.set||o.writable===!1)return!1;o.value=t,s3.f(n,e,o)}else s3.f(n,e,mde(0,t))}else{if(u=i.set,u===void 0)return!1;$mt(u,n,t)}return!0}var Kmt=Zmt(function(){var r=function(){},e=s3.f(new r,"a",{configurable:!0});return Reflect.set(r.prototype,"a",1,e)!==!1});Gmt({target:"Reflect",stat:!0,forced:Kmt},{set:vde})});var _de=I(()=>{"use strict";var Xmt=te(),Jmt=Rt(),Qmt=Rz(),yde=jl();yde&&Xmt({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){Jmt(e),Qmt(t);try{return yde(e,t),!0}catch(n){return!1}}})});var xde=I(()=>{"use strict";var evt=te(),tvt=At(),rvt=Wa();evt({global:!0},{Reflect:{}});rvt(tvt.Reflect,"Reflect",!0)});var g1=I((zgr,wde)=>{"use strict";var nvt=xr(),ivt=Zo(),ovt=fr(),avt=ovt("match");wde.exports=function(r){var e;return nvt(r)&&((e=r[avt])!==void 0?!!e:ivt(r)==="RegExp")}});var FM=I((Bgr,bde)=>{"use strict";var svt=Rt();bde.exports=function(){var r=svt(this),e="";return r.hasIndices&&(e+="d"),r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.unicodeSets&&(e+="v"),r.sticky&&(e+="y"),e}});var Wy=I((Ugr,Ede)=>{"use strict";var lvt=Ot(),uvt=Lr(),cvt=Yo(),fvt=FM(),Sde=RegExp.prototype;Ede.exports=function(r){var e=r.flags;return e===void 0&&!("flags"in Sde)&&!uvt(r,"flags")&&cvt(Sde,r)?lvt(fvt,r):e}});var y1=I((Vgr,Tde)=>{"use strict";var l3=ut(),hvt=At(),u3=hvt.RegExp,c3=l3(function(){var r=u3("a","y");return r.lastIndex=2,r.exec("abcd")!==null}),pvt=c3||l3(function(){return!u3("a","y").sticky}),dvt=c3||l3(function(){var r=u3("^r","gy");return r.lastIndex=2,r.exec("str")!==null});Tde.exports={BROKEN_CARET:dvt,MISSED_STICKY:pvt,UNSUPPORTED_Y:c3}});var jM=I((Ggr,Ide)=>{"use strict";var mvt=ut(),vvt=At(),gvt=vvt.RegExp;Ide.exports=mvt(function(){var r=gvt(".","s");return!(r.dotAll&&r.test(`
`)&&r.flags==="s")})});var f3=I(($gr,Ade)=>{"use strict";var yvt=ut(),_vt=At(),xvt=_vt.RegExp;Ade.exports=yvt(function(){var r=xvt("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"})});var kde=I(()=>{"use strict";var wvt=sr(),m3=At(),_1=rt(),bvt=wy(),Svt=Dp(),Evt=eo(),Tvt=zi(),Ivt=Pp().f,Cde=Yo(),Avt=g1(),Mde=br(),Cvt=Wy(),Lde=y1(),Mvt=Pz(),Rvt=Tn(),Pvt=ut(),Ovt=Lr(),Lvt=yn().enforce,Dvt=jp(),Nvt=fr(),Dde=jM(),Nde=f3(),qvt=Nvt("match"),Kp=m3.RegExp,Zy=Kp.prototype,kvt=m3.SyntaxError,Fvt=_1(Zy.exec),zM=_1("".charAt),Rde=_1("".replace),Pde=_1("".indexOf),Ode=_1("".slice),jvt=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Km=/a/g,h3=/a/g,zvt=new Kp(Km)!==Km,qde=Lde.MISSED_STICKY,Bvt=Lde.UNSUPPORTED_Y,Uvt=wvt&&(!zvt||qde||Dde||Nde||Pvt(function(){return h3[qvt]=!1,Kp(Km)!==Km||Kp(h3)===h3||String(Kp(Km,"i"))!=="/a/i"})),Vvt=function(r){for(var e=r.length,t=0,n="",i=!1,o;t<=e;t++){if(o=zM(r,t),o==="\\"){n+=o+zM(r,++t);continue}!i&&o==="."?n+="[\\s\\S]":(o==="["?i=!0:o==="]"&&(i=!1),n+=o)}return n},Gvt=function(r){for(var e=r.length,t=0,n="",i=[],o=Tvt(null),a=!1,u=!1,h=0,d="",v;t<=e;t++){if(v=zM(r,t),v==="\\")v+=zM(r,++t);else if(v==="]")a=!1;else if(!a)switch(!0){case v==="[":a=!0;break;case v==="(":if(n+=v,Ode(r,t+1,t+3)==="?:")continue;Fvt(jvt,Ode(r,t+1))&&(t+=2,u=!0),h++;continue;case v===">"&&u:if(d===""||Ovt(o,d))throw new kvt("Invalid capture group name");o[d]=!0,i[i.length]=[d,h],u=!1,d="";continue;}u?d+=v:n+=v}return[n,i]};if(bvt("RegExp",Uvt)){for(Yp=function(e,t){var n=Cde(Zy,this),i=Avt(e),o=t===void 0,a=[],u=e,h,d,v,x,S,A;if(!n&&i&&o&&e.constructor===Yp)return e;if((i||Cde(Zy,e))&&(e=e.source,o&&(t=Cvt(u))),e=e===void 0?"":Mde(e),t=t===void 0?"":Mde(t),u=e,Dde&&("dotAll"in Km)&&(d=!!t&&Pde(t,"s")>-1,d&&(t=Rde(t,/s/g,""))),h=t,qde&&("sticky"in Km)&&(v=!!t&&Pde(t,"y")>-1,v&&Bvt&&(t=Rde(t,/y/g,""))),Nde&&(x=Gvt(e),e=x[0],a=x[1]),S=Svt(Kp(e,t),n?this:Zy,Yp),(d||v||a.length)&&(A=Lvt(S),d&&(A.dotAll=!0,A.raw=Yp(Vvt(e),h)),v&&(A.sticky=!0),a.length&&(A.groups=a)),e!==u)try{Evt(S,"source",u===""?"(?:)":u)}catch(L){}return S},p3=Ivt(Kp),d3=0;p3.length>d3;)Mvt(Yp,Kp,p3[d3++]);Zy.constructor=Yp,Yp.prototype=Zy,Rvt(m3,"RegExp",Yp,{constructor:!0})}var Yp,p3,d3;Dvt("RegExp")});var jde=I(()=>{"use strict";var $vt=sr(),Hvt=jM(),Wvt=Zo(),Zvt=ii(),Yvt=yn().get,Fde=RegExp.prototype,Kvt=TypeError;$vt&&Hvt&&Zvt(Fde,"dotAll",{configurable:!0,get:function(){if(this!==Fde){if(Wvt(this)==="RegExp")return!!Yvt(this).dotAll;throw new Kvt("Incompatible receiver, RegExp required")}}})});var VM=I((Kgr,Bde)=>{"use strict";var Yy=Ot(),UM=rt(),Xvt=br(),Jvt=FM(),Qvt=y1(),egt=Lf(),tgt=zi(),rgt=yn().get,ngt=jM(),igt=f3(),ogt=egt("native-string-replace",String.prototype.replace),BM=RegExp.prototype.exec,g3=BM,agt=UM("".charAt),sgt=UM("".indexOf),lgt=UM("".replace),v3=UM("".slice),y3=function(){var r=/a/,e=/b*/g;return Yy(BM,r,"a"),Yy(BM,e,"a"),r.lastIndex!==0||e.lastIndex!==0}(),zde=Qvt.BROKEN_CARET,_3=/()??/.exec("")[1]!==void 0,ugt=y3||_3||zde||ngt||igt;ugt&&(g3=function(e){var t=this,n=rgt(t),i=Xvt(e),o=n.raw,a,u,h,d,v,x,S;if(o)return o.lastIndex=t.lastIndex,a=Yy(g3,o,i),t.lastIndex=o.lastIndex,a;var A=n.groups,L=zde&&t.sticky,q=Yy(Jvt,t),R=t.source,D=0,k=i;if(L&&(q=lgt(q,"y",""),sgt(q,"g")===-1&&(q+="g"),k=v3(i,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&agt(i,t.lastIndex-1)!==`
`)&&(R="(?: "+R+")",k=" "+k,D++),u=new RegExp("^(?:"+R+")",q)),_3&&(u=new RegExp("^"+R+"$(?!\\s)",q)),y3&&(h=t.lastIndex),d=Yy(BM,L?u:t,k),L?d?(d.input=v3(d.input,D),d[0]=v3(d[0],D),d.index=t.lastIndex,t.lastIndex+=d[0].length):t.lastIndex=0:y3&&d&&(t.lastIndex=t.global?d.index+d[0].length:h),_3&&d&&d.length>1&&Yy(ogt,d[0],u,function(){for(v=1;v<arguments.length-2;v++)arguments[v]===void 0&&(d[v]=void 0)}),d&&A)for(d.groups=x=tgt(null),v=0;v<A.length;v++)S=A[v],x[S[0]]=d[S[1]];return d});Bde.exports=g3});var GM=I(()=>{"use strict";var cgt=te(),Ude=VM();cgt({target:"RegExp",proto:!0,forced:/./.exec!==Ude},{exec:Ude})});var $de=I(()=>{"use strict";var fgt=At(),hgt=sr(),pgt=ii(),dgt=FM(),mgt=ut(),Vde=fgt.RegExp,Gde=Vde.prototype,vgt=hgt&&mgt(function(){var r=!0;try{Vde(".","d")}catch(h){r=!1}var e={},t="",n=r?"dgimsy":"gimsy",i=function(h,d){Object.defineProperty(e,h,{get:function(){return t+=d,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};r&&(o.hasIndices="d");for(var a in o)i(a,o[a]);var u=Object.getOwnPropertyDescriptor(Gde,"flags").get.call(e);return u!==n||t!==n});vgt&&pgt(Gde,"flags",{configurable:!0,get:dgt})});var Wde=I(()=>{"use strict";var ggt=sr(),ygt=y1().MISSED_STICKY,_gt=Zo(),xgt=ii(),wgt=yn().get,Hde=RegExp.prototype,bgt=TypeError;ggt&&ygt&&xgt(Hde,"sticky",{configurable:!0,get:function(){if(this!==Hde){if(_gt(this)==="RegExp")return!!wgt(this).sticky;throw new bgt("Incompatible receiver, RegExp required")}}})});var Kde=I(()=>{"use strict";GM();var Sgt=te(),Zde=Ot(),Egt=Rr(),Yde=Rt(),Tgt=br(),Igt=function(){var r=!1,e=/[ac]/;return e.exec=function(){return r=!0,/./.exec.apply(this,arguments)},e.test("abc")===!0&&r}(),Agt=/./.test;Sgt({target:"RegExp",proto:!0,forced:!Igt},{test:function(r){var e=Yde(this),t=Tgt(r),n=e.exec;if(!Egt(n))return Zde(Agt,e,t);var i=Zde(n,e,t);return i===null?!1:(Yde(i),!0)}})});var eme=I(()=>{"use strict";var Cgt=Pm().PROPER,Mgt=Tn(),Rgt=Rt(),Xde=br(),Pgt=ut(),Ogt=Wy(),x3="toString",Jde=RegExp.prototype,Qde=Jde[x3],Lgt=Pgt(function(){return Qde.call({source:"a",flags:"b"})!=="/a/b"}),Dgt=Cgt&&Qde.name!==x3;(Lgt||Dgt)&&Mgt(Jde,x3,function(){var e=Rgt(this),t=Xde(e.source),n=Xde(Ogt(e));return"/"+t+"/"+n},{unsafe:!0})});var tme=I(()=>{"use strict";var Ngt=Jb(),qgt=VB();Ngt("Set",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},qgt)});var rme=I(()=>{"use strict";tme()});var No=I((fyr,nme)=>{"use strict";var w3=rt(),$M=Set.prototype;nme.exports={Set,add:w3($M.add),has:w3($M.has),remove:w3($M.delete),proto:$M}});var Ko=I((hyr,ime)=>{"use strict";var kgt=No().has;ime.exports=function(r){return kgt(r),r}});var Hf=I((pyr,ome)=>{"use strict";var Fgt=Ot();ome.exports=function(r,e,t){for(var n=t?r:r.iterator,i=r.next,o,a;!(o=Fgt(i,n)).done;)if(a=e(o.value),a!==void 0)return a}});var Is=I((dyr,cme)=>{"use strict";var ame=rt(),jgt=Hf(),sme=No(),zgt=sme.Set,lme=sme.proto,Bgt=ame(lme.forEach),ume=ame(lme.keys),Ugt=ume(new zgt).next;cme.exports=function(r,e,t){return t?jgt({iterator:ume(r),next:Ugt},e):Bgt(r,e)}});var HM=I((myr,hme)=>{"use strict";var fme=No(),Vgt=Is(),Ggt=fme.Set,$gt=fme.add;hme.exports=function(r){var e=new Ggt;return Vgt(r,function(t){$gt(e,t)}),e}});var Ky=I((vyr,pme)=>{"use strict";var Hgt=Nb(),Wgt=No();pme.exports=Hgt(Wgt.proto,"size","get")||function(r){return r.size}});var Xp=I((gyr,_me)=>{"use strict";var dme=gr(),gme=Rt(),mme=Ot(),Zgt=ni(),Ygt=fi(),vme="Invalid size",Kgt=RangeError,Xgt=TypeError,Jgt=Math.max,yme=function(r,e){this.set=r,this.size=Jgt(e,0),this.has=dme(r.has),this.keys=dme(r.keys)};yme.prototype={getIterator:function(){return Ygt(gme(mme(this.keys,this.set)))},includes:function(r){return mme(this.has,this.set,r)}};_me.exports=function(r){gme(r);var e=+r.size;if(e!==e)throw new Xgt(vme);var t=Zgt(e);if(t<0)throw new Kgt(vme);return new yme(r,t)}});var b3=I((yyr,bme)=>{"use strict";var Qgt=Ko(),wme=No(),eyt=HM(),tyt=Ky(),ryt=Xp(),nyt=Is(),iyt=Hf(),oyt=wme.has,xme=wme.remove;bme.exports=function(e){var t=Qgt(this),n=ryt(e),i=eyt(t);return tyt(t)<=n.size?nyt(t,function(o){n.includes(o)&&xme(i,o)}):iyt(n.getIterator(),function(o){oyt(t,o)&&xme(i,o)}),i}});var Jp=I((_yr,Eme)=>{"use strict";var ayt=_r(),Sme=function(r){return{size:r,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};Eme.exports=function(r){var e=ayt("Set");try{new e()[r](Sme(0));try{return new e()[r](Sme(-1)),!1}catch(t){return!0}}catch(t){return!1}}});var S3=I(()=>{"use strict";var syt=te(),lyt=b3(),uyt=Jp();syt({target:"Set",proto:!0,real:!0,forced:!uyt("difference")},{difference:lyt})});var T3=I((byr,Ime)=>{"use strict";var cyt=Ko(),E3=No(),fyt=Ky(),hyt=Xp(),pyt=Is(),dyt=Hf(),myt=E3.Set,Tme=E3.add,vyt=E3.has;Ime.exports=function(e){var t=cyt(this),n=hyt(e),i=new myt;return fyt(t)>n.size?dyt(n.getIterator(),function(o){vyt(t,o)&&Tme(i,o)}):pyt(t,function(o){n.includes(o)&&Tme(i,o)}),i}});var I3=I(()=>{"use strict";var gyt=te(),yyt=ut(),_yt=T3(),xyt=Jp(),wyt=!xyt("intersection")||yyt(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});gyt({target:"Set",proto:!0,real:!0,forced:wyt},{intersection:_yt})});var A3=I((Tyr,Ame)=>{"use strict";var byt=Ko(),Syt=No().has,Eyt=Ky(),Tyt=Xp(),Iyt=Is(),Ayt=Hf(),Cyt=kf();Ame.exports=function(e){var t=byt(this),n=Tyt(e);if(Eyt(t)<=n.size)return Iyt(t,function(o){if(n.includes(o))return!1},!0)!==!1;var i=n.getIterator();return Ayt(i,function(o){if(Syt(t,o))return Cyt(i,"normal",!1)})!==!1}});var C3=I(()=>{"use strict";var Myt=te(),Ryt=A3(),Pyt=Jp();Myt({target:"Set",proto:!0,real:!0,forced:!Pyt("isDisjointFrom")},{isDisjointFrom:Ryt})});var M3=I((Cyr,Cme)=>{"use strict";var Oyt=Ko(),Lyt=Ky(),Dyt=Is(),Nyt=Xp();Cme.exports=function(e){var t=Oyt(this),n=Nyt(e);return Lyt(t)>n.size?!1:Dyt(t,function(i){if(!n.includes(i))return!1},!0)!==!1}});var R3=I(()=>{"use strict";var qyt=te(),kyt=M3(),Fyt=Jp();qyt({target:"Set",proto:!0,real:!0,forced:!Fyt("isSubsetOf")},{isSubsetOf:kyt})});var P3=I((Pyr,Mme)=>{"use strict";var jyt=Ko(),zyt=No().has,Byt=Ky(),Uyt=Xp(),Vyt=Hf(),Gyt=kf();Mme.exports=function(e){var t=jyt(this),n=Uyt(e);if(Byt(t)<n.size)return!1;var i=n.getIterator();return Vyt(i,function(o){if(!zyt(t,o))return Gyt(i,"normal",!1)})!==!1}});var O3=I(()=>{"use strict";var $yt=te(),Hyt=P3(),Wyt=Jp();$yt({target:"Set",proto:!0,real:!0,forced:!Wyt("isSupersetOf")},{isSupersetOf:Hyt})});var D3=I((Dyr,Rme)=>{"use strict";var Zyt=Ko(),L3=No(),Yyt=HM(),Kyt=Xp(),Xyt=Hf(),Jyt=L3.add,Qyt=L3.has,e_t=L3.remove;Rme.exports=function(e){var t=Zyt(this),n=Kyt(e).getIterator(),i=Yyt(t);return Xyt(n,function(o){Qyt(t,o)?e_t(i,o):Jyt(i,o)}),i}});var N3=I(()=>{"use strict";var t_t=te(),r_t=D3(),n_t=Jp();t_t({target:"Set",proto:!0,real:!0,forced:!n_t("symmetricDifference")},{symmetricDifference:r_t})});var q3=I((kyr,Pme)=>{"use strict";var i_t=Ko(),o_t=No().add,a_t=HM(),s_t=Xp(),l_t=Hf();Pme.exports=function(e){var t=i_t(this),n=s_t(e).getIterator(),i=a_t(t);return l_t(n,function(o){o_t(i,o)}),i}});var k3=I(()=>{"use strict";var u_t=te(),c_t=q3(),f_t=Jp();u_t({target:"Set",proto:!0,real:!0,forced:!f_t("union")},{union:c_t})});var Ome=I(()=>{"use strict";var h_t=te(),p_t=rt(),d_t=Qn(),m_t=ni(),v_t=br(),g_t=ut(),y_t=p_t("".charAt),__t=g_t(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});h_t({target:"String",proto:!0,forced:__t},{at:function(e){var t=v_t(d_t(this)),n=t.length,i=m_t(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:y_t(t,o)}})});var Xm=I((Uyr,Nme)=>{"use strict";var F3=rt(),x_t=ni(),w_t=br(),b_t=Qn(),S_t=F3("".charAt),Lme=F3("".charCodeAt),E_t=F3("".slice),Dme=function(r){return function(e,t){var n=w_t(b_t(e)),i=x_t(t),o=n.length,a,u;return i<0||i>=o?r?"":void 0:(a=Lme(n,i),a<55296||a>56319||i+1===o||(u=Lme(n,i+1))<56320||u>57343?r?S_t(n,i):a:r?E_t(n,i,i+2):(a-55296<<10)+(u-56320)+65536)}};Nme.exports={codeAt:Dme(!1),charAt:Dme(!0)}});var qme=I(()=>{"use strict";var T_t=te(),I_t=Xm().codeAt;T_t({target:"String",proto:!0},{codePointAt:function(e){return I_t(this,e)}})});var WM=I(($yr,kme)=>{"use strict";var A_t=g1(),C_t=TypeError;kme.exports=function(r){if(A_t(r))throw new C_t("The method doesn't accept regular expressions");return r}});var ZM=I((Hyr,Fme)=>{"use strict";var M_t=fr(),R_t=M_t("match");Fme.exports=function(r){var e=/./;try{"/./"[r](e)}catch(t){try{return e[R_t]=!1,"/./"[r](e)}catch(n){}}return!1}});var Bme=I(()=>{"use strict";var P_t=te(),O_t=Df(),L_t=Oo().f,D_t=ws(),jme=br(),N_t=WM(),q_t=Qn(),k_t=ZM(),F_t=zr(),j_t=O_t("".slice),z_t=Math.min,zme=k_t("endsWith"),B_t=!F_t&&!zme&&!!function(){var r=L_t(String.prototype,"endsWith");return r&&!r.writable}();P_t({target:"String",proto:!0,forced:!B_t&&!zme},{endsWith:function(e){var t=jme(q_t(this));N_t(e);var n=arguments.length>1?arguments[1]:void 0,i=t.length,o=n===void 0?i:z_t(D_t(n),i),a=jme(e);return j_t(t,o-a.length,o)===a}})});var j3=I(()=>{"use strict";var U_t=te(),V_t=rt(),G_t=Du(),$_t=RangeError,Ume=String.fromCharCode,Vme=String.fromCodePoint,H_t=V_t([].join),W_t=!!Vme&&Vme.length!==1;U_t({target:"String",stat:!0,arity:1,forced:W_t},{fromCodePoint:function(e){for(var t=[],n=arguments.length,i=0,o;n>i;){if(o=+arguments[i++],G_t(o,1114111)!==o)throw new $_t(o+" is not a valid code point");t[i]=o<65536?Ume(o):Ume(((o-=65536)>>10)+55296,o%1024+56320)}return H_t(t,"")}})});var $me=I(()=>{"use strict";var Z_t=te(),Y_t=rt(),K_t=WM(),X_t=Qn(),Gme=br(),J_t=ZM(),Q_t=Y_t("".indexOf);Z_t({target:"String",proto:!0,forced:!J_t("includes")},{includes:function(e){return!!~Q_t(Gme(X_t(this)),Gme(K_t(e)),arguments.length>1?arguments[1]:void 0)}})});var z3=I(()=>{"use strict";var e0t=te(),t0t=rt(),r0t=Qn(),n0t=br(),Hme=t0t("".charCodeAt);e0t({target:"String",proto:!0},{isWellFormed:function(){for(var e=n0t(r0t(this)),t=e.length,n=0;n<t;n++){var i=Hme(e,n);if((i&63488)===55296&&(i>=56320||++n>=t||(Hme(e,n)&64512)!==56320))return!1}return!0}})});var B3=I(()=>{"use strict";var i0t=Xm().charAt,o0t=br(),Zme=yn(),a0t=ZC(),Wme=Do(),Yme="String Iterator",s0t=Zme.set,l0t=Zme.getterFor(Yme);a0t(String,"String",function(r){s0t(this,{type:Yme,string:o0t(r),index:0})},function(){var e=l0t(this),t=e.string,n=e.index,i;return n>=t.length?Wme(void 0,!0):(i=i0t(t,n),e.index+=i.length,Wme(i,!1))})});var x1=I((n_r,eve)=>{"use strict";GM();var Kme=Ot(),Xme=Tn(),u0t=VM(),Jme=ut(),Qme=fr(),c0t=eo(),f0t=Qme("species"),U3=RegExp.prototype;eve.exports=function(r,e,t,n){var i=Qme(r),o=!Jme(function(){var d={};return d[i]=function(){return 7},""[r](d)!==7}),a=o&&!Jme(function(){var d=!1,v=/a/;return r==="split"&&(v={},v.constructor={},v.constructor[f0t]=function(){return v},v.flags="",v[i]=/./[i]),v.exec=function(){return d=!0,null},v[i](""),!d});if(!o||!a||t){var u=/./[i],h=e(i,""[r],function(d,v,x,S,A){var L=v.exec;return L===u0t||L===U3.exec?o&&!A?{done:!0,value:Kme(u,v,x,S)}:{done:!0,value:Kme(d,x,v,S)}:{done:!1}});Xme(String.prototype,r,h[0]),Xme(U3,i,h[1])}n&&c0t(U3[i],"sham",!0)}});var w1=I((i_r,tve)=>{"use strict";var h0t=Xm().charAt;tve.exports=function(r,e,t){return e+(t?h0t(r,e).length:1)}});var Xy=I((o_r,nve)=>{"use strict";var rve=Ot(),p0t=Rt(),d0t=Rr(),m0t=Zo(),v0t=VM(),g0t=TypeError;nve.exports=function(r,e){var t=r.exec;if(d0t(t)){var n=rve(t,r,e);return n!==null&&p0t(n),n}if(m0t(r)==="RegExp")return rve(v0t,r,e);throw new g0t("RegExp#exec called on incompatible receiver")}});var ove=I(()=>{"use strict";var y0t=Ot(),_0t=x1(),x0t=Rt(),w0t=Ji(),b0t=ws(),V3=br(),S0t=Qn(),E0t=ji(),T0t=w1(),ive=Xy();_0t("match",function(r,e,t){return[function(i){var o=S0t(this),a=w0t(i)?void 0:E0t(i,r);return a?y0t(a,i,o):new RegExp(i)[r](V3(o))},function(n){var i=x0t(this),o=V3(n),a=t(e,i,o);if(a.done)return a.value;if(!i.global)return ive(i,o);var u=i.unicode;i.lastIndex=0;for(var h=[],d=0,v;(v=ive(i,o))!==null;){var x=V3(v[0]);h[d]=x,x===""&&(i.lastIndex=T0t(o,b0t(i.lastIndex),u)),d++}return d===0?null:h}]})});var Z3=I(()=>{"use strict";var I0t=te(),ave=Ot(),uve=Df(),A0t=kp(),YM=Do(),sve=Qn(),cve=ws(),b1=br(),C0t=Rt(),M0t=Ji(),R0t=Zo(),P0t=g1(),fve=Wy(),O0t=ji(),L0t=Tn(),D0t=ut(),N0t=fr(),q0t=u1(),k0t=w1(),F0t=Xy(),hve=yn(),$3=zr(),KM=N0t("matchAll"),pve="RegExp String",dve=pve+" Iterator",j0t=hve.set,z0t=hve.getterFor(dve),lve=RegExp.prototype,B0t=TypeError,H3=uve("".indexOf),XM=uve("".matchAll),G3=!!XM&&!D0t(function(){XM("a",/./)}),U0t=A0t(function(e,t,n,i){j0t(this,{type:dve,regexp:e,string:t,global:n,unicode:i,done:!1})},pve,function(){var e=z0t(this);if(e.done)return YM(void 0,!0);var t=e.regexp,n=e.string,i=F0t(t,n);return i===null?(e.done=!0,YM(void 0,!0)):e.global?(b1(i[0])===""&&(t.lastIndex=k0t(n,cve(t.lastIndex),e.unicode)),YM(i,!1)):(e.done=!0,YM(i,!1))}),W3=function(r){var e=C0t(this),t=b1(r),n=q0t(e,RegExp),i=b1(fve(e)),o,a,u;return o=new n(n===RegExp?e.source:e,i),a=!!~H3(i,"g"),u=!!~H3(i,"u"),o.lastIndex=cve(e.lastIndex),new U0t(o,t,a,u)};I0t({target:"String",proto:!0,forced:G3},{matchAll:function(e){var t=sve(this),n,i,o,a;if(M0t(e)){if(G3)return XM(t,e)}else{if(P0t(e)&&(n=b1(sve(fve(e))),!~H3(n,"g")))throw new B0t("`.matchAll` does not allow non-global regexes");if(G3)return XM(t,e);if(o=O0t(e,KM),o===void 0&&$3&&R0t(e)==="RegExp"&&(o=W3),o)return ave(o,e,t)}return i=b1(t),a=new RegExp(e,"g"),$3?ave(W3,a,i):a[KM](i)}});$3||KM in lve||L0t(lve,KM,W3)});var Y3=I((c_r,mve)=>{"use strict";var V0t=Pu();mve.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(V0t)});var vve=I(()=>{"use strict";var G0t=te(),$0t=Yb().end,H0t=Y3();G0t({target:"String",proto:!0,forced:H0t},{padEnd:function(e){return $0t(this,e,arguments.length>1?arguments[1]:void 0)}})});var gve=I(()=>{"use strict";var W0t=te(),Z0t=Yb().start,Y0t=Y3();W0t({target:"String",proto:!0,forced:Y0t},{padStart:function(e){return Z0t(this,e,arguments.length>1?arguments[1]:void 0)}})});var wve=I(()=>{"use strict";var K0t=te(),xve=rt(),X0t=Qi(),J0t=Br(),yve=br(),Q0t=Xr(),_ve=xve([].push),ext=xve([].join);K0t({target:"String",stat:!0},{raw:function(e){var t=X0t(J0t(e).raw),n=Q0t(t);if(!n)return"";for(var i=arguments.length,o=[],a=0;;){if(_ve(o,yve(t[a++])),a===n)return ext(o,"");a<i&&_ve(o,yve(arguments[a]))}}})});var bve=I(()=>{"use strict";var txt=te(),rxt=Zb();txt({target:"String",proto:!0},{repeat:rxt})});var Q3=I((__r,Sve)=>{"use strict";var J3=rt(),nxt=Br(),ixt=Math.floor,K3=J3("".charAt),oxt=J3("".replace),X3=J3("".slice),axt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,sxt=/\$([$&'`]|\d{1,2})/g;Sve.exports=function(r,e,t,n,i,o){var a=t+r.length,u=n.length,h=sxt;return i!==void 0&&(i=nxt(i),h=axt),oxt(o,h,function(d,v){var x;switch(K3(v,0)){case"$":return"$";case"&":return r;case"`":return X3(e,0,t);case"'":return X3(e,a);case"<":x=i[X3(v,1,-1)];break;default:var S=+v;if(S===0)return d;if(S>u){var A=ixt(S/10);return A===0?d:A<=u?n[A-1]===void 0?K3(v,1):n[A-1]+K3(v,1):d}x=n[S-1];}return x===void 0?"":x})}});var Cve=I(()=>{"use strict";var lxt=_a(),Eve=Ot(),JM=rt(),uxt=x1(),cxt=ut(),fxt=Rt(),hxt=Rr(),pxt=Ji(),dxt=ni(),mxt=ws(),Jy=br(),vxt=Qn(),gxt=w1(),yxt=ji(),_xt=Q3(),xxt=Xy(),wxt=fr(),tV=wxt("replace"),bxt=Math.max,Sxt=Math.min,Ext=JM([].concat),eV=JM([].push),Tve=JM("".indexOf),Ive=JM("".slice),Txt=function(r){return r===void 0?r:String(r)},Ixt=function(){return"a".replace(/./,"$0")==="$0"}(),Ave=function(){return /./[tV]?/./[tV]("a","$0")==="":!1}(),Axt=!cxt(function(){var r=/./;return r.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(r,"$<a>")!=="7"});uxt("replace",function(r,e,t){var n=Ave?"$":"$0";return[function(o,a){var u=vxt(this),h=pxt(o)?void 0:yxt(o,tV);return h?Eve(h,o,u,a):Eve(e,Jy(u),o,a)},function(i,o){var a=fxt(this),u=Jy(i);if(typeof o=="string"&&Tve(o,n)===-1&&Tve(o,"$<")===-1){var h=t(e,a,u,o);if(h.done)return h.value}var d=hxt(o);d||(o=Jy(o));var v=a.global,x;v&&(x=a.unicode,a.lastIndex=0);for(var S=[],A;A=xxt(a,u),!(A===null||(eV(S,A),!v));){var L=Jy(A[0]);L===""&&(a.lastIndex=gxt(u,mxt(a.lastIndex),x))}for(var q="",R=0,D=0;D<S.length;D++){A=S[D];for(var k=Jy(A[0]),j=bxt(Sxt(dxt(A.index),u.length),0),$=[],ee,J=1;J<A.length;J++)eV($,Txt(A[J]));var ie=A.groups;if(d){var ue=Ext([k],$,j,u);ie!==void 0&&eV(ue,ie),ee=Jy(lxt(o,void 0,ue))}else ee=_xt(k,u,j,$,ie,o);j>=R&&(q+=Ive(u,R,j)+ee,R=j+k.length)}return q+Ive(u,R)}]},!Axt||!Ixt||Ave)});var iV=I(()=>{"use strict";var Cxt=te(),Mxt=Ot(),nV=rt(),Mve=Qn(),Rxt=Rr(),Pxt=Ji(),Oxt=g1(),Qy=br(),Lxt=ji(),Dxt=Wy(),Nxt=Q3(),qxt=fr(),kxt=zr(),Fxt=qxt("replace"),jxt=TypeError,rV=nV("".indexOf),zxt=nV("".replace),Rve=nV("".slice),Bxt=Math.max;Cxt({target:"String",proto:!0},{replaceAll:function(e,t){var n=Mve(this),i,o,a,u,h,d,v,x,S,A,L=0,q="";if(!Pxt(e)){if(i=Oxt(e),i&&(o=Qy(Mve(Dxt(e))),!~rV(o,"g")))throw new jxt("`.replaceAll` does not allow non-global regexes");if(a=Lxt(e,Fxt),a)return Mxt(a,e,n,t);if(kxt&&i)return zxt(Qy(n),e,t)}for(u=Qy(n),h=Qy(e),d=Rxt(t),d||(t=Qy(t)),v=h.length,x=Bxt(1,v),S=rV(u,h);S!==-1;)A=d?Qy(t(h,S,u)):Nxt(h,u,S,[],void 0,t),q+=Rve(u,L,S)+A,L=S+v,S=S+x>u.length?-1:rV(u,h,S+x);return L<u.length&&(q+=Rve(u,L)),q}})});var Lve=I(()=>{"use strict";var Uxt=Ot(),Vxt=x1(),Gxt=Rt(),$xt=Ji(),Hxt=Qn(),Pve=mU(),Ove=br(),Wxt=ji(),Zxt=Xy();Vxt("search",function(r,e,t){return[function(i){var o=Hxt(this),a=$xt(i)?void 0:Wxt(i,r);return a?Uxt(a,i,o):new RegExp(i)[r](Ove(o))},function(n){var i=Gxt(this),o=Ove(n),a=t(e,i,o);if(a.done)return a.value;var u=i.lastIndex;Pve(u,0)||(i.lastIndex=0);var h=Zxt(i,o);return Pve(i.lastIndex,u)||(i.lastIndex=u),h===null?-1:h.index}]})});var Fve=I(()=>{"use strict";var oV=Ot(),kve=rt(),Yxt=x1(),Kxt=Rt(),Xxt=Ji(),Jxt=Qn(),Qxt=u1(),ewt=w1(),twt=ws(),Dve=br(),rwt=ji(),Nve=Xy(),nwt=y1(),iwt=ut(),e_=nwt.UNSUPPORTED_Y,owt=4294967295,awt=Math.min,aV=kve([].push),sV=kve("".slice),swt=!iwt(function(){var r=/(?:)/,e=r.exec;r.exec=function(){return e.apply(this,arguments)};var t="ab".split(r);return t.length!==2||t[0]!=="a"||t[1]!=="b"}),qve="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;Yxt("split",function(r,e,t){var n="0".split(void 0,0).length?function(i,o){return i===void 0&&o===0?[]:oV(e,this,i,o)}:e;return[function(o,a){var u=Jxt(this),h=Xxt(o)?void 0:rwt(o,r);return h?oV(h,o,u,a):oV(n,Dve(u),o,a)},function(i,o){var a=Kxt(this),u=Dve(i);if(!qve){var h=t(n,a,u,o,n!==e);if(h.done)return h.value}var d=Qxt(a,RegExp),v=a.unicode,x=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(e_?"g":"y"),S=new d(e_?"^(?:"+a.source+")":a,x),A=o===void 0?owt:o>>>0;if(A===0)return[];if(u.length===0)return Nve(S,u)===null?[u]:[];for(var L=0,q=0,R=[];q<u.length;){S.lastIndex=e_?0:q;var D=Nve(S,e_?sV(u,q):u),k;if(D===null||(k=awt(twt(S.lastIndex+(e_?q:0)),u.length))===L)q=ewt(u,q,v);else{if(aV(R,sV(u,L,q)),R.length===A)return R;for(var j=1;j<=D.length-1;j++)if(aV(R,D[j]),R.length===A)return R;q=L=k}}return aV(R,sV(u,L)),R}]},qve||!swt,e_)});var Bve=I(()=>{"use strict";var lwt=te(),uwt=Df(),cwt=Oo().f,fwt=ws(),jve=br(),hwt=WM(),pwt=Qn(),dwt=ZM(),mwt=zr(),vwt=uwt("".slice),gwt=Math.min,zve=dwt("startsWith"),ywt=!mwt&&!zve&&!!function(){var r=cwt(String.prototype,"startsWith");return r&&!r.writable}();lwt({target:"String",proto:!0,forced:!ywt&&!zve},{startsWith:function(e){var t=jve(pwt(this));hwt(e);var n=fwt(gwt(arguments.length>1?arguments[1]:void 0,t.length)),i=jve(e);return vwt(t,n,n+i.length)===i}})});var Vve=I(()=>{"use strict";var _wt=te(),xwt=rt(),wwt=Qn(),Uve=ni(),bwt=br(),Swt=xwt("".slice),Ewt=Math.max,Twt=Math.min,Iwt=!"".substr||"ab".substr(-1)!=="b";_wt({target:"String",proto:!0,forced:Iwt},{substr:function(e,t){var n=bwt(wwt(this)),i=n.length,o=Uve(e),a,u;return o===1/0&&(o=0),o<0&&(o=Ewt(i+o,0)),a=t===void 0?i:Uve(t),a<=0||a===1/0?"":(u=Twt(o+a,i),o>=u?"":Swt(n,o,u))}})});var fV=I(()=>{"use strict";var Awt=te(),Hve=Ot(),cV=rt(),Cwt=Qn(),Mwt=br(),Rwt=ut(),Pwt=Array,lV=cV("".charAt),Gve=cV("".charCodeAt),Owt=cV([].join),uV="".toWellFormed,Lwt="\uFFFD",$ve=uV&&Rwt(function(){return Hve(uV,1)!=="1"});Awt({target:"String",proto:!0,forced:$ve},{toWellFormed:function(){var e=Mwt(Cwt(this));if($ve)return Hve(uV,e);for(var t=e.length,n=Pwt(t),i=0;i<t;i++){var o=Gve(e,i);(o&63488)!==55296?n[i]=lV(e,i):o>=56320||i+1>=t||(Gve(e,i+1)&64512)!==56320?n[i]=Lwt:(n[i]=lV(e,i),n[++i]=lV(e,i))}return Owt(n,"")}})});var QM=I((D_r,Yve)=>{"use strict";var Dwt=Pm().PROPER,Nwt=ut(),Wve=$m(),Zve="\u200B\x85\u180E";Yve.exports=function(r){return Nwt(function(){return!!Wve[r]()||Zve[r]()!==Zve||Dwt&&Wve[r].name!==r})}});var Kve=I(()=>{"use strict";var qwt=te(),kwt=Hm().trim,Fwt=QM();qwt({target:"String",proto:!0,forced:Fwt("trim")},{trim:function(){return kwt(this)}})});var hV=I((k_r,Xve)=>{"use strict";var jwt=Hm().end,zwt=QM();Xve.exports=zwt("trimEnd")?function(){return jwt(this)}:"".trimEnd});var Qve=I(()=>{"use strict";var Bwt=te(),Jve=hV();Bwt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==Jve},{trimRight:Jve})});var tge=I(()=>{"use strict";Qve();var Uwt=te(),ege=hV();Uwt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==ege},{trimEnd:ege})});var pV=I((U_r,rge)=>{"use strict";var Vwt=Hm().start,Gwt=QM();rge.exports=Gwt("trimStart")?function(){return Vwt(this)}:"".trimStart});var ige=I(()=>{"use strict";var $wt=te(),nge=pV();$wt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==nge},{trimLeft:nge})});var age=I(()=>{"use strict";ige();var Hwt=te(),oge=pV();Hwt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==oge},{trimStart:oge})});var As=I((W_r,lge)=>{"use strict";var Wwt=rt(),Zwt=Qn(),sge=br(),Ywt=/"/g,Kwt=Wwt("".replace);lge.exports=function(r,e,t,n){var i=sge(Zwt(r)),o="<"+e;return t!==""&&(o+=" "+t+"=\""+Kwt(sge(n),Ywt,"&quot;")+"\""),o+">"+i+"</"+e+">"}});var Cs=I((Z_r,uge)=>{"use strict";var Xwt=ut();uge.exports=function(r){return Xwt(function(){var e=""[r]("\"");return e!==e.toLowerCase()||e.split("\"").length>3})}});var cge=I(()=>{"use strict";var Jwt=te(),Qwt=As(),ebt=Cs();Jwt({target:"String",proto:!0,forced:ebt("anchor")},{anchor:function(e){return Qwt(this,"a","name",e)}})});var fge=I(()=>{"use strict";var tbt=te(),rbt=As(),nbt=Cs();tbt({target:"String",proto:!0,forced:nbt("big")},{big:function(){return rbt(this,"big","","")}})});var hge=I(()=>{"use strict";var ibt=te(),obt=As(),abt=Cs();ibt({target:"String",proto:!0,forced:abt("blink")},{blink:function(){return obt(this,"blink","","")}})});var pge=I(()=>{"use strict";var sbt=te(),lbt=As(),ubt=Cs();sbt({target:"String",proto:!0,forced:ubt("bold")},{bold:function(){return lbt(this,"b","","")}})});var dge=I(()=>{"use strict";var cbt=te(),fbt=As(),hbt=Cs();cbt({target:"String",proto:!0,forced:hbt("fixed")},{fixed:function(){return fbt(this,"tt","","")}})});var mge=I(()=>{"use strict";var pbt=te(),dbt=As(),mbt=Cs();pbt({target:"String",proto:!0,forced:mbt("fontcolor")},{fontcolor:function(e){return dbt(this,"font","color",e)}})});var vge=I(()=>{"use strict";var vbt=te(),gbt=As(),ybt=Cs();vbt({target:"String",proto:!0,forced:ybt("fontsize")},{fontsize:function(e){return gbt(this,"font","size",e)}})});var gge=I(()=>{"use strict";var _bt=te(),xbt=As(),wbt=Cs();_bt({target:"String",proto:!0,forced:wbt("italics")},{italics:function(){return xbt(this,"i","","")}})});var yge=I(()=>{"use strict";var bbt=te(),Sbt=As(),Ebt=Cs();bbt({target:"String",proto:!0,forced:Ebt("link")},{link:function(e){return Sbt(this,"a","href",e)}})});var _ge=I(()=>{"use strict";var Tbt=te(),Ibt=As(),Abt=Cs();Tbt({target:"String",proto:!0,forced:Abt("small")},{small:function(){return Ibt(this,"small","","")}})});var xge=I(()=>{"use strict";var Cbt=te(),Mbt=As(),Rbt=Cs();Cbt({target:"String",proto:!0,forced:Rbt("strike")},{strike:function(){return Mbt(this,"strike","","")}})});var wge=I(()=>{"use strict";var Pbt=te(),Obt=As(),Lbt=Cs();Pbt({target:"String",proto:!0,forced:Lbt("sub")},{sub:function(){return Obt(this,"sub","","")}})});var bge=I(()=>{"use strict";var Dbt=te(),Nbt=As(),qbt=Cs();Dbt({target:"String",proto:!0,forced:qbt("sup")},{sup:function(){return Nbt(this,"sup","","")}})});var eR=I((w0r,Ege)=>{"use strict";var Sge=At(),dV=ut(),kbt=Fb(),Fbt=kr().NATIVE_ARRAY_BUFFER_VIEWS,jbt=Sge.ArrayBuffer,Jm=Sge.Int8Array;Ege.exports=!Fbt||!dV(function(){Jm(1)})||!dV(function(){new Jm(-1)})||!kbt(function(r){new Jm,new Jm(null),new Jm(1.5),new Jm(r)},!0)||dV(function(){return new Jm(new jbt(2),1,void 0).length!==1})});var mV=I((b0r,Tge)=>{"use strict";var zbt=Ny(),Bbt=RangeError;Tge.exports=function(r,e){var t=zbt(r);if(t%e)throw new Bbt("Wrong offset");return t}});var vV=I((S0r,Ige)=>{"use strict";var Ubt=Math.round;Ige.exports=function(r){var e=Ubt(r);return e<0?0:e>255?255:e&255}});var tR=I((E0r,Age)=>{"use strict";var Vbt=bs();Age.exports=function(r){var e=Vbt(r);return e==="BigInt64Array"||e==="BigUint64Array"}});var S1=I((T0r,Cge)=>{"use strict";var Gbt=xb(),$bt=TypeError;Cge.exports=function(r){var e=Gbt(r,"number");if(typeof e=="number")throw new $bt("Can't convert number to bigint");return BigInt(e)}});var gV=I((I0r,Mge)=>{"use strict";var Hbt=Fn(),Wbt=Ot(),Zbt=l1(),Ybt=Br(),Kbt=Xr(),Xbt=Np(),Jbt=Ec(),Qbt=zC(),e1t=tR(),t1t=kr().aTypedArrayConstructor,r1t=S1();Mge.exports=function(e){var t=Zbt(this),n=Ybt(e),i=arguments.length,o=i>1?arguments[1]:void 0,a=o!==void 0,u=Jbt(n),h,d,v,x,S,A,L,q;if(u&&!Qbt(u))for(L=Xbt(n,u),q=L.next,n=[];!(A=Wbt(q,L)).done;)n.push(A.value);for(a&&i>2&&(o=Hbt(o,arguments[2])),d=Kbt(n),v=new(t1t(t))(d),x=e1t(v),h=0;d>h;h++)S=a?o(n[h],h):n[h],v[h]=x?r1t(S):+S;return v}});var Rc=I((A0r,EV)=>{"use strict";var Rge=te(),Bge=At(),Pge=Ot(),n1t=sr(),i1t=eR(),A1=kr(),Uge=Wb(),Oge=xa(),o1t=xs(),E1=eo(),a1t=IM(),s1t=ws(),Lge=Cy(),yV=mV(),l1t=vV(),Vge=bc(),T1=Lr(),u1t=bs(),wV=xr(),c1t=Of(),f1t=zi(),h1t=Yo(),rR=jl(),p1t=Pp().f,Dge=gV(),d1t=Bi().forEach,m1t=jp(),v1t=ii(),Gge=Yn(),$ge=Oo(),Nge=jf(),TV=yn(),g1t=Dp(),bV=TV.get,y1t=TV.set,_1t=TV.enforce,Hge=Gge.f,x1t=$ge.f,_V=Bge.RangeError,Wge=Uge.ArrayBuffer,w1t=Wge.prototype,b1t=Uge.DataView,nR=A1.NATIVE_ARRAY_BUFFER_VIEWS,qge=A1.TYPED_ARRAY_TAG,kge=A1.TypedArray,I1=A1.TypedArrayPrototype,SV=A1.isTypedArray,iR="BYTES_PER_ELEMENT",xV="Wrong length",oR=function(r,e){v1t(r,e,{configurable:!0,get:function(){return bV(this)[e]}})},Fge=function(r){var e;return h1t(w1t,r)||(e=u1t(r))==="ArrayBuffer"||e==="SharedArrayBuffer"},Zge=function(r,e){return SV(r)&&!c1t(e)&&e in r&&a1t(+e)&&e>=0},jge=function(e,t){return t=Vge(t),Zge(e,t)?o1t(2,e[t]):x1t(e,t)},zge=function(e,t,n){return t=Vge(t),Zge(e,t)&&wV(n)&&T1(n,"value")&&!T1(n,"get")&&!T1(n,"set")&&!n.configurable&&(!T1(n,"writable")||n.writable)&&(!T1(n,"enumerable")||n.enumerable)?(e[t]=n.value,e):Hge(e,t,n)};n1t?(nR||($ge.f=jge,Gge.f=zge,oR(I1,"buffer"),oR(I1,"byteOffset"),oR(I1,"byteLength"),oR(I1,"length")),Rge({target:"Object",stat:!0,forced:!nR},{getOwnPropertyDescriptor:jge,defineProperty:zge}),EV.exports=function(r,e,t){var n=r.match(/\d+/)[0]/8,i=r+(t?"Clamped":"")+"Array",o="get"+r,a="set"+r,u=Bge[i],h=u,d=h&&h.prototype,v={},x=function(q,R){var D=bV(q);return D.view[o](R*n+D.byteOffset,!0)},S=function(q,R,D){var k=bV(q);k.view[a](R*n+k.byteOffset,t?l1t(D):D,!0)},A=function(q,R){Hge(q,R,{get:function(){return x(this,R)},set:function(D){return S(this,R,D)},enumerable:!0})};nR?i1t&&(h=e(function(q,R,D,k){return Oge(q,d),g1t(function(){return wV(R)?Fge(R)?k!==void 0?new u(R,yV(D,n),k):D!==void 0?new u(R,yV(D,n)):new u(R):SV(R)?Nge(h,R):Pge(Dge,h,R):new u(Lge(R))}(),q,h)}),rR&&rR(h,kge),d1t(p1t(u),function(q){q in h||E1(h,q,u[q])}),h.prototype=d):(h=e(function(q,R,D,k){Oge(q,d);var j=0,$=0,ee,J,ie;if(!wV(R))ie=Lge(R),J=ie*n,ee=new Wge(J);else if(Fge(R)){ee=R,$=yV(D,n);var ue=R.byteLength;if(k===void 0){if(ue%n)throw new _V(xV);if(J=ue-$,J<0)throw new _V(xV)}else if(J=s1t(k)*n,J+$>ue)throw new _V(xV);ie=J/n}else return SV(R)?Nge(h,R):Pge(Dge,h,R);for(y1t(q,{buffer:ee,byteOffset:$,byteLength:J,length:ie,view:new b1t(ee)});j<ie;)A(q,j++)}),rR&&rR(h,kge),d=h.prototype=f1t(I1)),d.constructor!==h&&E1(d,"constructor",h),_1t(d).TypedArrayConstructor=h,qge&&E1(d,qge,i);var L=h!==u;v[i]=h,Rge({global:!0,constructor:!0,forced:L,sham:!nR},v),iR in h||E1(h,iR,n),iR in d||E1(d,iR,n),m1t(i)}):EV.exports=function(){}});var Yge=I(()=>{"use strict";var S1t=Rc();S1t("Float32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Kge=I(()=>{"use strict";var E1t=Rc();E1t("Float64",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Xge=I(()=>{"use strict";var T1t=Rc();T1t("Int8",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Jge=I(()=>{"use strict";var I1t=Rc();I1t("Int16",function(r){return function(t,n,i){return r(this,t,n,i)}})});var Qge=I(()=>{"use strict";var A1t=Rc();A1t("Int32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var eye=I(()=>{"use strict";var C1t=Rc();C1t("Uint8",function(r){return function(t,n,i){return r(this,t,n,i)}})});var tye=I(()=>{"use strict";var M1t=Rc();M1t("Uint8",function(r){return function(t,n,i){return r(this,t,n,i)}},!0)});var rye=I(()=>{"use strict";var R1t=Rc();R1t("Uint16",function(r){return function(t,n,i){return r(this,t,n,i)}})});var nye=I(()=>{"use strict";var P1t=Rc();P1t("Uint32",function(r){return function(t,n,i){return r(this,t,n,i)}})});var IV=I(()=>{"use strict";var iye=kr(),O1t=Xr(),L1t=ni(),D1t=iye.aTypedArray,N1t=iye.exportTypedArrayMethod;N1t("at",function(e){var t=D1t(this),n=O1t(t),i=L1t(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:t[o]})});var aye=I(()=>{"use strict";var q1t=rt(),oye=kr(),k1t=Zz(),F1t=q1t(k1t),j1t=oye.aTypedArray,z1t=oye.exportTypedArrayMethod;z1t("copyWithin",function(e,t){return F1t(j1t(this),e,t,arguments.length>2?arguments[2]:void 0)})});var lye=I(()=>{"use strict";var sye=kr(),B1t=Bi().every,U1t=sye.aTypedArray,V1t=sye.exportTypedArrayMethod;V1t("every",function(e){return B1t(U1t(this),e,arguments.length>1?arguments[1]:void 0)})});var cye=I(()=>{"use strict";var uye=kr(),G1t=GC(),$1t=S1(),H1t=bs(),W1t=Ot(),Z1t=rt(),Y1t=ut(),K1t=uye.aTypedArray,X1t=uye.exportTypedArrayMethod,J1t=Z1t("".slice),Q1t=Y1t(function(){var r=0;return new Int8Array(2).fill({valueOf:function(){return r++}}),r!==1});X1t("fill",function(e){var t=arguments.length;K1t(this);var n=J1t(H1t(this),0,3)==="Big"?$1t(e):+e;return W1t(G1t,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)},Q1t)});var aR=I((exr,fye)=>{"use strict";var eSt=jf(),tSt=kr().getTypedArrayConstructor;fye.exports=function(r,e){return eSt(tSt(r),e)}});var pye=I(()=>{"use strict";var hye=kr(),rSt=Bi().filter,nSt=aR(),iSt=hye.aTypedArray,oSt=hye.exportTypedArrayMethod;oSt("filter",function(e){var t=rSt(iSt(this),e,arguments.length>1?arguments[1]:void 0);return nSt(this,t)})});var mye=I(()=>{"use strict";var dye=kr(),aSt=Bi().find,sSt=dye.aTypedArray,lSt=dye.exportTypedArrayMethod;lSt("find",function(e){return aSt(sSt(this),e,arguments.length>1?arguments[1]:void 0)})});var gye=I(()=>{"use strict";var vye=kr(),uSt=Bi().findIndex,cSt=vye.aTypedArray,fSt=vye.exportTypedArrayMethod;fSt("findIndex",function(e){return uSt(cSt(this),e,arguments.length>1?arguments[1]:void 0)})});var AV=I(()=>{"use strict";var yye=kr(),hSt=kb().findLast,pSt=yye.aTypedArray,dSt=yye.exportTypedArrayMethod;dSt("findLast",function(e){return hSt(pSt(this),e,arguments.length>1?arguments[1]:void 0)})});var CV=I(()=>{"use strict";var _ye=kr(),mSt=kb().findLastIndex,vSt=_ye.aTypedArray,gSt=_ye.exportTypedArrayMethod;gSt("findLastIndex",function(e){return mSt(vSt(this),e,arguments.length>1?arguments[1]:void 0)})});var wye=I(()=>{"use strict";var xye=kr(),ySt=Bi().forEach,_St=xye.aTypedArray,xSt=xye.exportTypedArrayMethod;xSt("forEach",function(e){ySt(_St(this),e,arguments.length>1?arguments[1]:void 0)})});var bye=I(()=>{"use strict";var wSt=eR(),bSt=kr().exportTypedArrayStaticMethod,SSt=gV();bSt("from",SSt,wSt)});var Eye=I(()=>{"use strict";var Sye=kr(),ESt=xy().includes,TSt=Sye.aTypedArray,ISt=Sye.exportTypedArrayMethod;ISt("includes",function(e){return ESt(TSt(this),e,arguments.length>1?arguments[1]:void 0)})});var Iye=I(()=>{"use strict";var Tye=kr(),ASt=xy().indexOf,CSt=Tye.aTypedArray,MSt=Tye.exportTypedArrayMethod;MSt("indexOf",function(e){return ASt(CSt(this),e,arguments.length>1?arguments[1]:void 0)})});var Pye=I(()=>{"use strict";var RSt=At(),PSt=ut(),MV=rt(),Cye=kr(),RV=Bb(),OSt=fr(),PV=OSt("iterator"),Aye=RSt.Uint8Array,LSt=MV(RV.values),DSt=MV(RV.keys),NSt=MV(RV.entries),OV=Cye.aTypedArray,sR=Cye.exportTypedArrayMethod,t_=Aye&&Aye.prototype,lR=!PSt(function(){t_[PV].call([1])}),Mye=!!t_&&t_.values&&t_[PV]===t_.values&&t_.values.name==="values",Rye=function(){return LSt(OV(this))};sR("entries",function(){return NSt(OV(this))},lR);sR("keys",function(){return DSt(OV(this))},lR);sR("values",Rye,lR||!Mye,{name:"values"});sR(PV,Rye,lR||!Mye,{name:"values"})});var Lye=I(()=>{"use strict";var Oye=kr(),qSt=rt(),kSt=Oye.aTypedArray,FSt=Oye.exportTypedArrayMethod,jSt=qSt([].join);FSt("join",function(e){return jSt(kSt(this),e)})});var Nye=I(()=>{"use strict";var Dye=kr(),zSt=_a(),BSt=c4(),USt=Dye.aTypedArray,VSt=Dye.exportTypedArrayMethod;VSt("lastIndexOf",function(e){var t=arguments.length;return zSt(BSt,USt(this),t>1?[e,arguments[1]]:[e])})});var qye=I(()=>{"use strict";var LV=kr(),GSt=Bi().map,$St=LV.aTypedArray,HSt=LV.getTypedArrayConstructor,WSt=LV.exportTypedArrayMethod;WSt("map",function(e){return GSt($St(this),e,arguments.length>1?arguments[1]:void 0,function(t,n){return new(HSt(t))(n)})})});var Fye=I(()=>{"use strict";var kye=kr(),ZSt=eR(),YSt=kye.aTypedArrayConstructor,KSt=kye.exportTypedArrayStaticMethod;KSt("of",function(){for(var e=0,t=arguments.length,n=new(YSt(this))(t);t>e;)n[e]=arguments[e++];return n},ZSt)});var zye=I(()=>{"use strict";var jye=kr(),XSt=Ub().left,JSt=jye.aTypedArray,QSt=jye.exportTypedArrayMethod;QSt("reduce",function(e){var t=arguments.length;return XSt(JSt(this),e,t,t>1?arguments[1]:void 0)})});var Uye=I(()=>{"use strict";var Bye=kr(),eEt=Ub().right,tEt=Bye.aTypedArray,rEt=Bye.exportTypedArrayMethod;rEt("reduceRight",function(e){var t=arguments.length;return eEt(tEt(this),e,t,t>1?arguments[1]:void 0)})});var Gye=I(()=>{"use strict";var Vye=kr(),nEt=Vye.aTypedArray,iEt=Vye.exportTypedArrayMethod,oEt=Math.floor;iEt("reverse",function(){for(var e=this,t=nEt(e).length,n=oEt(t/2),i=0,o;i<n;)o=e[i],e[i++]=e[--t],e[t]=o;return e})});var Kye=I(()=>{"use strict";var Hye=At(),Wye=Ot(),qV=kr(),aEt=Xr(),sEt=mV(),lEt=Br(),Zye=ut(),uEt=Hye.RangeError,DV=Hye.Int8Array,$ye=DV&&DV.prototype,Yye=$ye&&$ye.set,cEt=qV.aTypedArray,fEt=qV.exportTypedArrayMethod,NV=!Zye(function(){var r=new Uint8ClampedArray(2);return Wye(Yye,r,{length:1,0:3},1),r[1]!==3}),hEt=NV&&qV.NATIVE_ARRAY_BUFFER_VIEWS&&Zye(function(){var r=new DV(2);return r.set(1),r.set("2",1),r[0]!==0||r[1]!==2});fEt("set",function(e){cEt(this);var t=sEt(arguments.length>1?arguments[1]:void 0,1),n=lEt(e);if(NV)return Wye(Yye,this,n,t);var i=this.length,o=aEt(n),a=0;if(o+t>i)throw new uEt("Wrong length");for(;a<o;)this[t+a]=n[a++]},!NV||hEt)});var Xye=I(()=>{"use strict";var kV=kr(),pEt=ut(),dEt=Ss(),mEt=kV.aTypedArray,vEt=kV.getTypedArrayConstructor,gEt=kV.exportTypedArrayMethod,yEt=pEt(function(){new Int8Array(1).slice()});gEt("slice",function(e,t){for(var n=dEt(mEt(this),e,t),i=vEt(this),o=0,a=n.length,u=new i(a);a>o;)u[o]=n[o++];return u},yEt)});var Qye=I(()=>{"use strict";var Jye=kr(),_Et=Bi().some,xEt=Jye.aTypedArray,wEt=Jye.exportTypedArrayMethod;wEt("some",function(e){return _Et(xEt(this),e,arguments.length>1?arguments[1]:void 0)})});var o_e=I(()=>{"use strict";var bEt=At(),SEt=Df(),FV=ut(),EEt=gr(),TEt=JC(),i_e=kr(),e_e=p4(),IEt=d4(),t_e=wc(),r_e=QC(),AEt=i_e.aTypedArray,CEt=i_e.exportTypedArrayMethod,C1=bEt.Uint16Array,r_=C1&&SEt(C1.prototype.sort),MEt=!!r_&&!(FV(function(){r_(new C1(2),null)})&&FV(function(){r_(new C1(2),{})})),n_e=!!r_&&!FV(function(){if(t_e)return t_e<74;if(e_e)return e_e<67;if(IEt)return!0;if(r_e)return r_e<602;var r=new C1(516),e=Array(516),t,n;for(t=0;t<516;t++)n=t%4,r[t]=515-t,e[t]=t-2*n+3;for(r_(r,function(i,o){return(i/4|0)-(o/4|0)}),t=0;t<516;t++)if(r[t]!==e[t])return!0}),REt=function(r){return function(e,t){return r!==void 0?+r(e,t)||0:t!==t?-1:e!==e?1:e===0&&t===0?1/e>0&&1/t<0?1:-1:e>t}};CEt("sort",function(e){return e!==void 0&&EEt(e),n_e?r_(this,e):TEt(AEt(this),REt(e))},!n_e||MEt)});var s_e=I(()=>{"use strict";var jV=kr(),PEt=ws(),a_e=Du(),OEt=jV.aTypedArray,LEt=jV.getTypedArrayConstructor,DEt=jV.exportTypedArrayMethod;DEt("subarray",function(e,t){var n=OEt(this),i=n.length,o=a_e(e,i),a=LEt(n);return new a(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,PEt((t===void 0?i:a_e(t,i))-o))})});var h_e=I(()=>{"use strict";var NEt=At(),qEt=_a(),c_e=kr(),zV=ut(),l_e=Ss(),uR=NEt.Int8Array,u_e=c_e.aTypedArray,kEt=c_e.exportTypedArrayMethod,f_e=[].toLocaleString,FEt=!!uR&&zV(function(){f_e.call(new uR(1))}),jEt=zV(function(){return[1,2].toLocaleString()!==new uR([1,2]).toLocaleString()})||!zV(function(){uR.prototype.toLocaleString.call([1,2])});kEt("toLocaleString",function(){return qEt(f_e,FEt?l_e(u_e(this)):u_e(this),l_e(arguments))},jEt)});var UV=I(()=>{"use strict";var zEt=g4(),BV=kr(),BEt=BV.aTypedArray,UEt=BV.exportTypedArrayMethod,VEt=BV.getTypedArrayConstructor;UEt("toReversed",function(){return zEt(BEt(this),VEt(this))})});var VV=I(()=>{"use strict";var cR=kr(),GEt=rt(),$Et=gr(),HEt=jf(),WEt=cR.aTypedArray,ZEt=cR.getTypedArrayConstructor,YEt=cR.exportTypedArrayMethod,KEt=GEt(cR.TypedArrayPrototype.sort);YEt("toSorted",function(e){e!==void 0&&$Et(e);var t=WEt(this),n=HEt(ZEt(t),t);return KEt(n,e)})});var d_e=I(()=>{"use strict";var XEt=kr().exportTypedArrayMethod,JEt=ut(),QEt=At(),eTt=rt(),p_e=QEt.Uint8Array,tTt=p_e&&p_e.prototype||{},fR=[].toString,rTt=eTt([].join);JEt(function(){fR.call({})})&&(fR=function(){return rTt(this)});var nTt=tTt.toString!==fR;XEt("toString",fR,nTt)});var $V=I(()=>{"use strict";var iTt=b4(),GV=kr(),oTt=tR(),aTt=ni(),sTt=S1(),lTt=GV.aTypedArray,uTt=GV.getTypedArrayConstructor,cTt=GV.exportTypedArrayMethod,fTt=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(r){return r===8}}();cTt("with",function(r,e){var t=lTt(this),n=aTt(r),i=oTt(t)?sTt(e):+e;return iTt(t,uTt(t),n,i)},!fTt)});var x_e=I(()=>{"use strict";var hTt=te(),HV=rt(),pTt=br(),m_e=String.fromCharCode,v_e=HV("".charAt),g_e=HV(/./.exec),y_e=HV("".slice),dTt=/^[\da-f]{2}$/i,mTt=/^[\da-f]{4}$/i;hTt({global:!0},{unescape:function(e){for(var t=pTt(e),n="",i=t.length,o=0,a,u;o<i;){if(a=v_e(t,o++),a==="%"){if(v_e(t,o)==="u"){if(u=y_e(t,o+1,o+5),g_e(mTt,u)){n+=m_e(parseInt(u,16)),o+=5;continue}}else if(u=y_e(t,o,o+2),g_e(dTt,u)){n+=m_e(parseInt(u,16)),o+=2;continue}}n+=a}return n}})});var YV=I((nwr,I_e)=>{"use strict";var vTt=rt(),w_e=Ul(),hR=Hp().getWeakData,gTt=xa(),yTt=Rt(),_Tt=Ji(),WV=xr(),xTt=xi(),S_e=Bi(),b_e=Lr(),E_e=yn(),wTt=E_e.set,bTt=E_e.getterFor,STt=S_e.find,ETt=S_e.findIndex,TTt=vTt([].splice),ITt=0,pR=function(r){return r.frozen||(r.frozen=new T_e)},T_e=function(){this.entries=[]},ZV=function(r,e){return STt(r.entries,function(t){return t[0]===e})};T_e.prototype={get:function(r){var e=ZV(this,r);if(e)return e[1]},has:function(r){return!!ZV(this,r)},set:function(r,e){var t=ZV(this,r);t?t[1]=e:this.entries.push([r,e])},delete:function(r){var e=ETt(this.entries,function(t){return t[0]===r});return~e&&TTt(this.entries,e,1),!!~e}};I_e.exports={getConstructor:function(r,e,t,n){var i=r(function(h,d){gTt(h,o),wTt(h,{type:e,id:ITt++,frozen:null}),_Tt(d)||xTt(d,h[n],{that:h,AS_ENTRIES:t})}),o=i.prototype,a=bTt(e),u=function(h,d,v){var x=a(h),S=hR(yTt(d),!0);return S===!0?pR(x).set(d,v):S[x.id]=v,h};return w_e(o,{delete:function(h){var d=a(this);if(!WV(h))return!1;var v=hR(h);return v===!0?pR(d).delete(h):v&&b_e(v,d.id)&&delete v[d.id]},has:function(d){var v=a(this);if(!WV(d))return!1;var x=hR(d);return x===!0?pR(v).has(d):x&&b_e(x,v.id)}}),w_e(o,t?{get:function(d){var v=a(this);if(WV(d)){var x=hR(d);if(x===!0)return pR(v).get(d);if(x)return x[v.id]}},set:function(d,v){return u(this,d,v)}}:{add:function(d){return u(this,d,!0)}}),i}}});var D_e=I(()=>{"use strict";var ATt=Gf(),A_e=At(),gR=rt(),C_e=Ul(),CTt=Hp(),MTt=Jb(),M_e=YV(),dR=xr(),mR=yn().enforce,RTt=ut(),PTt=Kj(),P1=Object,OTt=Array.isArray,vR=P1.isExtensible,R_e=P1.isFrozen,LTt=P1.isSealed,P_e=P1.freeze,DTt=P1.seal,NTt=!A_e.ActiveXObject&&"ActiveXObject"in A_e,M1,O_e=function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},L_e=MTt("WeakMap",O_e,M_e),n_=L_e.prototype,yR=gR(n_.set),qTt=function(){return ATt&&RTt(function(){var r=P_e([]);return yR(new L_e,r,1),!R_e(r)})};PTt&&(NTt?(M1=M_e.getConstructor(O_e,"WeakMap",!0),CTt.enable(),KV=gR(n_.delete),R1=gR(n_.has),XV=gR(n_.get),C_e(n_,{delete:function(r){if(dR(r)&&!vR(r)){var e=mR(this);return e.frozen||(e.frozen=new M1),KV(this,r)||e.frozen.delete(r)}return KV(this,r)},has:function(e){if(dR(e)&&!vR(e)){var t=mR(this);return t.frozen||(t.frozen=new M1),R1(this,e)||t.frozen.has(e)}return R1(this,e)},get:function(e){if(dR(e)&&!vR(e)){var t=mR(this);return t.frozen||(t.frozen=new M1),R1(this,e)?XV(this,e):t.frozen.get(e)}return XV(this,e)},set:function(e,t){if(dR(e)&&!vR(e)){var n=mR(this);n.frozen||(n.frozen=new M1),R1(this,e)?yR(this,e,t):n.frozen.set(e,t)}else yR(this,e,t);return this}})):qTt()&&C_e(n_,{set:function(e,t){var n;return OTt(e)&&(R_e(e)?n=P_e:LTt(e)&&(n=DTt)),yR(this,e,t),n&&n(e),this}}));var KV,R1,XV});var _R=I(()=>{"use strict";D_e()});var N_e=I(()=>{"use strict";var kTt=Jb(),FTt=YV();kTt("WeakSet",function(r){return function(){return r(this,arguments.length?arguments[0]:void 0)}},FTt)});var q_e=I(()=>{"use strict";N_e()});var k_e=I(()=>{"use strict";Uz()});var z_e=I(()=>{"use strict";var jTt=te(),zTt=At(),BTt=Yo(),F_e=to(),wR=jl(),UTt=Lm(),j_e=zi(),xR=eo(),JV=xs(),VTt=qC(),GTt=Fm(),$Tt=fr(),HTt=ut(),WTt=zr(),i_=zTt.SuppressedError,ZTt=$Tt("toStringTag"),bR=Error,YTt=!!i_&&i_.length!==3,KTt=!!i_&&HTt(function(){return new i_(1,2,3,{cause:4}).cause===4}),SR=YTt||KTt,Qm=function(e,t,n){var i=BTt(O1,this),o;return wR?o=SR&&(!i||F_e(this)===O1)?new i_:wR(new bR,i?F_e(this):O1):(o=i?this:j_e(O1),xR(o,ZTt,"Error")),n!==void 0&&xR(o,"message",GTt(n)),VTt(o,Qm,o.stack,1),xR(o,"error",e),xR(o,"suppressed",t),o};wR?wR(Qm,bR):UTt(Qm,bR,{name:!0});var O1=Qm.prototype=SR?i_.prototype:j_e(bR.prototype,{constructor:JV(1,Qm),message:JV(1,""),name:JV(1,"SuppressedError")});SR&&!WTt&&(O1.constructor=Qm);jTt({global:!0,constructor:!0,arity:3,forced:SR},{SuppressedError:Qm})});var o_=I((vwr,Z_e)=>{"use strict";var $_e=At(),H_e=_b(),W_e=Rr(),XTt=zi(),ER=to(),JTt=Tn(),QTt=fr(),eIt=zr(),B_e="USE_FUNCTION_CONSTRUCTOR",U_e=QTt("asyncIterator"),V_e=$_e.AsyncIterator,G_e=H_e.AsyncIteratorPrototype,Pc,QV;if(G_e)Pc=G_e;else if(W_e(V_e))Pc=V_e.prototype;else if(H_e[B_e]||$_e[B_e])try{QV=ER(ER(ER(Function("return async function*(){}()")()))),ER(QV)===Object.prototype&&(Pc=QV)}catch(r){}Pc?eIt&&(Pc=XTt(Pc)):Pc={};W_e(Pc[U_e])||JTt(Pc,U_e,function(){return this});Z_e.exports=Pc});var L1=I((gwr,n0e)=>{"use strict";var Y_e=Ot(),K_e=Rt(),tIt=zi(),rIt=ji(),nIt=Ul(),Q_e=yn(),iIt=_r(),oIt=o_(),e0e=Do(),e5=iIt("Promise"),t0e="AsyncFromSyncIterator",aIt=Q_e.set,X_e=Q_e.getterFor(t0e),J_e=function(r,e,t){var n=r.done;e5.resolve(r.value).then(function(i){e(e0e(i,n))},t)},r0e=function(e){e.type=t0e,aIt(this,e)};r0e.prototype=nIt(tIt(oIt),{next:function(){var e=X_e(this);return new e5(function(t,n){var i=K_e(Y_e(e.next,e.iterator));J_e(i,t,n)})},return:function(){var r=X_e(this).iterator;return new e5(function(e,t){var n=rIt(r,"return");if(n===void 0)return e(e0e(void 0,!0));var i=K_e(Y_e(n,r));J_e(i,e,t)})}});n0e.exports=r0e});var o0e=I((ywr,i0e)=>{"use strict";var sIt=Ot(),lIt=L1(),uIt=Rt(),cIt=Np(),fIt=fi(),hIt=ji(),pIt=fr(),dIt=pIt("asyncIterator");i0e.exports=function(r,e){var t=arguments.length<2?hIt(r,dIt):e;return t?uIt(sIt(t,r)):new lIt(fIt(cIt(r)))}});var a_=I((_wr,a0e)=>{"use strict";var mIt=Ot(),vIt=_r(),gIt=ji();a0e.exports=function(r,e,t,n){try{var i=gIt(r,"return");if(i)return vIt("Promise").resolve(mIt(i,r)).then(function(){e(t)},function(o){n(o)})}catch(o){return n(o)}e(t)}});var ev=I((xwr,s0e)=>{"use strict";var yIt=Ot(),_It=gr(),t5=Rt(),xIt=xr(),wIt=qp(),bIt=_r(),SIt=fi(),r5=a_(),D1=function(r){var e=r===0,t=r===1,n=r===2,i=r===3;return function(o,a,u){t5(o);var h=a!==void 0;(h||!e)&&_It(a);var d=SIt(o),v=bIt("Promise"),x=d.iterator,S=d.next,A=0;return new v(function(L,q){var R=function(k){r5(x,q,k,q)},D=function(){try{if(h)try{wIt(A)}catch(k){R(k)}v.resolve(t5(yIt(S,x))).then(function(k){try{if(t5(k).done)e?(u.length=A,L(u)):L(i?!1:n||void 0);else{var j=k.value;try{if(h){var $=a(j,A),ee=function(J){if(t)D();else if(n)J?D():r5(x,L,!1,q);else if(e)try{u[A++]=J,D()}catch(ie){R(ie)}else J?r5(x,L,i||j,q):D()};xIt($)?v.resolve($).then(ee,R):ee($)}else u[A++]=j,D()}catch(J){R(J)}}}catch(J){q(J)}},q)}catch(k){q(k)}};D()})}};s0e.exports={toArray:D1(0),forEach:D1(1),every:D1(2),some:D1(3),find:D1(4)}});var n5=I((wwr,f0e)=>{"use strict";var EIt=Fn(),l0e=rt(),TIt=Br(),IIt=qu(),AIt=o0e(),CIt=Np(),MIt=fi(),RIt=Ec(),PIt=ji(),OIt=_r(),LIt=_4(),DIt=fr(),NIt=L1(),qIt=ev().toArray,kIt=DIt("asyncIterator"),u0e=l0e(LIt("Array","values")),FIt=l0e(u0e([]).next),jIt=function(){return new c0e(this)},c0e=function(r){this.iterator=u0e(r)};c0e.prototype.next=function(){return FIt(this.iterator)};f0e.exports=function(e){var t=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(OIt("Promise"))(function(a){var u=TIt(e);i!==void 0&&(i=EIt(i,o));var h=PIt(u,kIt),d=h?void 0:RIt(u)||jIt,v=IIt(t)?new t:[],x=h?AIt(u,h):new NIt(MIt(CIt(u,d)));a(qIt(x,i,v))})}});var p0e=I(()=>{"use strict";var zIt=te(),BIt=n5(),UIt=ut(),h0e=Array.fromAsync,VIt=!h0e||UIt(function(){var r=0;return h0e.call(function(){return r++,[]},{length:0}),r!==1});zIt({target:"Array",stat:!0,forced:VIt},{fromAsync:BIt})});var d0e=I(()=>{"use strict";Hz()});var m0e=I(()=>{"use strict";var GIt=te(),$It=Bi().filterReject,HIt=wi();GIt({target:"Array",proto:!0,forced:!0},{filterOut:function(e){return $It(this,e,arguments.length>1?arguments[1]:void 0)}});HIt("filterOut")});var v0e=I(()=>{"use strict";var WIt=te(),ZIt=Bi().filterReject,YIt=wi();WIt({target:"Array",proto:!0,forced:!0},{filterReject:function(e){return ZIt(this,e,arguments.length>1?arguments[1]:void 0)}});YIt("filterReject")});var g0e=I(()=>{"use strict";Xz()});var y0e=I(()=>{"use strict";Jz()});var TR=I((Dwr,_0e)=>{"use strict";var KIt=Fn(),XIt=rt(),JIt=Pf(),QIt=Br(),eAt=bc(),tAt=Xr(),rAt=zi(),nAt=jf(),iAt=Array,oAt=XIt([].push);_0e.exports=function(r,e,t,n){for(var i=QIt(r),o=JIt(i),a=KIt(e,t),u=rAt(null),h=tAt(o),d=0,v,x,S;h>d;d++)S=o[d],x=eAt(a(S,d,i)),x in u?oAt(u[x],S):u[x]=[S];if(n&&(v=n(i),v!==iAt))for(x in u)u[x]=nAt(v,u[x]);return u}});var x0e=I(()=>{"use strict";var aAt=te(),sAt=TR(),lAt=wi();aAt({target:"Array",proto:!0},{group:function(e){var t=arguments.length>1?arguments[1]:void 0;return sAt(this,e,t)}});lAt("group")});var w0e=I(()=>{"use strict";var uAt=te(),cAt=TR(),fAt=Bl(),hAt=wi();uAt({target:"Array",proto:!0,forced:!fAt("groupBy")},{groupBy:function(e){var t=arguments.length>1?arguments[1]:void 0;return cAt(this,e,t)}});hAt("groupBy")});var i5=I((jwr,b0e)=>{"use strict";var pAt=Fn(),dAt=rt(),mAt=Pf(),vAt=Br(),gAt=Xr(),IR=vo(),yAt=IR.Map,_At=IR.get,xAt=IR.has,wAt=IR.set,bAt=dAt([].push);b0e.exports=function(e){for(var t=vAt(this),n=mAt(t),i=pAt(e,arguments.length>1?arguments[1]:void 0),o=new yAt,a=gAt(n),u=0,h,d;a>u;u++)d=n[u],h=i(d,u,t),xAt(o,h)?bAt(_At(o,h),d):wAt(o,h,[d]);return o}});var S0e=I(()=>{"use strict";var SAt=te(),EAt=Bl(),TAt=wi(),IAt=i5(),AAt=zr();SAt({target:"Array",proto:!0,name:"groupToMap",forced:AAt||!EAt("groupByToMap")},{groupByToMap:IAt});TAt("groupByToMap")});var E0e=I(()=>{"use strict";var CAt=te(),MAt=wi(),RAt=i5(),PAt=zr();CAt({target:"Array",proto:!0,forced:PAt},{groupToMap:RAt});MAt("groupToMap")});var A0e=I(()=>{"use strict";var OAt=te(),LAt=Nu(),T0e=Object.isFrozen,I0e=function(r,e){if(!T0e||!LAt(r)||!T0e(r))return!1;for(var t=0,n=r.length,i;t<n;)if(i=r[t++],!(typeof i=="string"||e&&i===void 0))return!1;return n!==0};OAt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(e){if(!I0e(e,!0))return!1;var t=e.raw;return t.length===e.length&&I0e(t,!1)}})});var C0e=I(()=>{"use strict";var DAt=sr(),NAt=wi(),qAt=Br(),kAt=Xr(),FAt=ii();DAt&&(FAt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=qAt(this),t=kAt(e);return t===0?0:t-1}}),NAt("lastIndex"))});var P0e=I(()=>{"use strict";var jAt=sr(),zAt=wi(),M0e=Br(),R0e=Xr(),BAt=ii();jAt&&(BAt(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=M0e(this),t=R0e(e);return t===0?void 0:e[t-1]},set:function(e){var t=M0e(this),n=R0e(t);return t[n===0?0:n-1]=e}}),zAt("lastItem"))});var O0e=I(()=>{"use strict";y4()});var L0e=I(()=>{"use strict";x4()});var D0e=I(()=>{"use strict";w4()});var Vl=I((rbr,j0e)=>{"use strict";var N0e=rt(),UAt=Hf(),q0e=vo(),VAt=q0e.Map,k0e=q0e.proto,GAt=N0e(k0e.forEach),F0e=N0e(k0e.entries),$At=F0e(new VAt).next;j0e.exports=function(r,e,t){return t?UAt({iterator:F0e(r),next:$At},function(n){return e(n[1],n[0])}):GAt(r,e)}});var AR=I((nbr,z0e)=>{"use strict";var HAt=rt(),WAt=gr(),ZAt=Ji(),YAt=Xr(),KAt=Br(),o5=vo(),XAt=Vl(),JAt=o5.Map,QAt=o5.has,eCt=o5.set,tCt=HAt([].push);z0e.exports=function(e){var t=KAt(this),n=YAt(t),i=[],o=new JAt,a=ZAt(e)?function(v){return v}:WAt(e),u,h,d;for(u=0;u<n;u++)h=t[u],d=a(h),QAt(o,d)||eCt(o,d,h);return XAt(o,function(v){tCt(i,v)}),i}});var B0e=I(()=>{"use strict";var rCt=te(),nCt=wi(),iCt=AR();rCt({target:"Array",proto:!0,forced:!0},{uniqueBy:iCt});nCt("uniqueBy")});var U0e=I(()=>{"use strict";S4()});var V0e=I(()=>{"use strict";G4()});var G0e=I(()=>{"use strict";oB()});var $0e=I(()=>{"use strict";aB()});var s5=I((dbr,K0e)=>{"use strict";var oCt=Ot(),aCt=rt(),sCt=Fn(),lCt=Rt(),uCt=gr(),Z0e=Ji(),a5=ji(),Y0e=fr(),cCt=Y0e("asyncDispose"),H0e=Y0e("dispose"),fCt=aCt([].push),hCt=function(r,e){if(e==="async-dispose"){var t=a5(r,cCt);return t!==void 0||(t=a5(r,H0e),t===void 0)?t:function(){oCt(t,this)}}return a5(r,H0e)},W0e=function(r,e,t){return arguments.length<3&&!Z0e(r)&&(t=uCt(hCt(lCt(r),e))),t===void 0?function(){}:sCt(t,r)};K0e.exports=function(r,e,t,n){var i;if(arguments.length<4){if(Z0e(e)&&t==="sync-dispose")return;i=W0e(e,t)}else i=W0e(void 0,t,n);fCt(r.stack,i)}});var nxe=I(()=>{"use strict";var pCt=te(),MR=sr(),Q0e=_r(),X0e=gr(),dCt=xa(),exe=Tn(),mCt=Ul(),vCt=ii(),txe=fr(),rxe=yn(),l5=s5(),J0e=Q0e("Promise"),gCt=Q0e("SuppressedError"),yCt=ReferenceError,_Ct=txe("asyncDispose"),xCt=txe("toStringTag"),PR="AsyncDisposableStack",wCt=rxe.set,RR=rxe.getterFor(PR),u5="async-dispose",N1="disposed",bCt="pending",CR=function(r){var e=RR(r);if(e.state===N1)throw new yCt(PR+" already disposed");return e},c5=function(){wCt(dCt(this,s_),{type:PR,state:bCt,stack:[]}),MR||(this.disposed=!1)},s_=c5.prototype;mCt(s_,{disposeAsync:function(){var e=this;return new J0e(function(t,n){var i=RR(e);if(i.state===N1)return t(void 0);i.state=N1,MR||(e.disposed=!0);var o=i.stack,a=o.length,u=!1,h,d=function(x){u?h=new gCt(x,h):(u=!0,h=x),v()},v=function(){if(a){var x=o[--a];o[a]=null;try{J0e.resolve(x()).then(v,d)}catch(S){d(S)}}else i.stack=null,u?n(h):t(void 0)};v()})},use:function(e){return l5(CR(this),e,u5),e},adopt:function(e,t){var n=CR(this);return X0e(t),l5(n,void 0,u5,function(){return t(e)}),e},defer:function(e){var t=CR(this);X0e(e),l5(t,void 0,u5,e)},move:function(){var e=CR(this),t=new c5;return RR(t).stack=e.stack,e.stack=[],e.state=N1,MR||(this.disposed=!0),t}});MR&&vCt(s_,"disposed",{configurable:!0,get:function(){return RR(this).state===N1}});exe(s_,_Ct,s_.disposeAsync,{name:"disposeAsync"});exe(s_,xCt,PR,{nonWritable:!0});pCt({global:!0,constructor:!0},{AsyncDisposableStack:c5})});var lxe=I(()=>{"use strict";var SCt=te(),ECt=xa(),TCt=to(),oxe=eo(),axe=Lr(),ICt=fr(),Qp=o_(),sxe=zr(),ixe=ICt("toStringTag"),ACt=TypeError,f5=function(){if(ECt(this,Qp),TCt(this)===Qp)throw new ACt("Abstract class AsyncIterator not directly constructable")};f5.prototype=Qp;axe(Qp,ixe)||oxe(Qp,ixe,"AsyncIterator");(sxe||!axe(Qp,"constructor")||Qp.constructor===Object)&&oxe(Qp,"constructor",f5);SCt({global:!0,constructor:!0,forced:sxe},{AsyncIterator:f5})});var tv=I((_br,vxe)=>{"use strict";var CCt=Ot(),OR=Wp(),uxe=Rt(),MCt=zi(),RCt=eo(),PCt=Ul(),OCt=fr(),fxe=yn(),LCt=_r(),DCt=ji(),NCt=o_(),h5=Do(),cxe=kf(),Oc=LCt("Promise"),qCt=OCt("toStringTag"),hxe="AsyncIteratorHelper",pxe="WrapForValidAsyncIterator",kCt=fxe.set,dxe=function(r){var e=!r,t=fxe.getterFor(r?pxe:hxe),n=function(i){var o=OR(function(){return t(i)}),a=o.error,u=o.value;return a||e&&u.done?{exit:!0,value:a?Oc.reject(u):Oc.resolve(h5(void 0,!0))}:{exit:!1,value:u}};return PCt(MCt(NCt),{next:function(){var o=n(this),a=o.value;if(o.exit)return a;var u=OR(function(){return uxe(a.nextHandler(Oc))}),h=u.error,d=u.value;return h&&(a.done=!0),h?Oc.reject(d):Oc.resolve(d)},return:function(){var i=n(this),o=i.value;if(i.exit)return o;o.done=!0;var a=o.iterator,u,h,d=OR(function(){if(o.inner)try{cxe(o.inner.iterator,"normal")}catch(v){return cxe(a,"throw",v)}return DCt(a,"return")});return u=h=d.value,d.error?Oc.reject(h):u===void 0?Oc.resolve(h5(void 0,!0)):(d=OR(function(){return CCt(u,a)}),h=d.value,d.error?Oc.reject(h):r?Oc.resolve(h):Oc.resolve(h).then(function(v){return uxe(v),h5(void 0,!0)}))}})},FCt=dxe(!0),mxe=dxe(!1);RCt(mxe,qCt,"Async Iterator Helper");vxe.exports=function(r,e){var t=function(i,o){o?(o.iterator=i.iterator,o.next=i.next):o=i,o.type=e?pxe:hxe,o.nextHandler=r,o.counter=0,o.done=!1,kCt(this,o)};return t.prototype=e?FCt:mxe,t}});var d5=I((xbr,yxe)=>{"use strict";var jCt=Ot(),zCt=gr(),p5=Rt(),BCt=xr(),UCt=fi(),VCt=tv(),gxe=Do(),GCt=a_(),$Ct=VCt(function(r){var e=this,t=e.iterator,n=e.mapper;return new r(function(i,o){var a=function(h){e.done=!0,o(h)},u=function(h){GCt(t,a,h,a)};r.resolve(p5(jCt(e.next,t))).then(function(h){try{if(p5(h).done)e.done=!0,i(gxe(void 0,!0));else{var d=h.value;try{var v=n(d,e.counter++),x=function(S){i(gxe(S,!1))};BCt(v)?r.resolve(v).then(x,u):x(v)}catch(S){u(S)}}}catch(S){a(S)}},a)})});yxe.exports=function(e){return p5(this),zCt(e),new $Ct(UCt(this),{mapper:e})}});var m5=I((wbr,_xe)=>{"use strict";var HCt=Ot(),WCt=d5(),ZCt=function(r,e){return[e,r]};_xe.exports=function(){return HCt(WCt,this,ZCt)}});var xxe=I(()=>{"use strict";var YCt=te(),KCt=m5();YCt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:KCt})});var Exe=I(()=>{"use strict";var XCt=Ot(),JCt=Tn(),QCt=_r(),eMt=ji(),tMt=Lr(),rMt=fr(),wxe=o_(),bxe=rMt("asyncDispose"),Sxe=QCt("Promise");tMt(wxe,bxe)||JCt(wxe,bxe,function(){var r=this;return new Sxe(function(e,t){var n=eMt(r,"return");n?Sxe.resolve(XCt(n,r)).then(function(){e(void 0)},t):e(void 0)})})});var Ixe=I(()=>{"use strict";var nMt=te(),iMt=Ot(),v5=Rt(),oMt=fi(),aMt=Xb(),sMt=Ny(),lMt=tv(),Txe=Do(),uMt=zr(),cMt=lMt(function(r){var e=this;return new r(function(t,n){var i=function(a){e.done=!0,n(a)},o=function(){try{r.resolve(v5(iMt(e.next,e.iterator))).then(function(a){try{v5(a).done?(e.done=!0,t(Txe(void 0,!0))):e.remaining?(e.remaining--,o()):t(Txe(a.value,!1))}catch(u){i(u)}},i)}catch(a){i(a)}};o()})});nMt({target:"AsyncIterator",proto:!0,real:!0,forced:uMt},{drop:function(e){v5(this);var t=sMt(aMt(+e));return new cMt(oMt(this),{remaining:t})}})});var Axe=I(()=>{"use strict";var fMt=te(),hMt=ev().every;fMt({target:"AsyncIterator",proto:!0,real:!0},{every:function(e){return hMt(this,e)}})});var Mxe=I(()=>{"use strict";var pMt=te(),dMt=Ot(),mMt=gr(),g5=Rt(),vMt=xr(),gMt=fi(),yMt=tv(),Cxe=Do(),_Mt=a_(),xMt=zr(),wMt=yMt(function(r){var e=this,t=e.iterator,n=e.predicate;return new r(function(i,o){var a=function(d){e.done=!0,o(d)},u=function(d){_Mt(t,a,d,a)},h=function(){try{r.resolve(g5(dMt(e.next,t))).then(function(d){try{if(g5(d).done)e.done=!0,i(Cxe(void 0,!0));else{var v=d.value;try{var x=n(v,e.counter++),S=function(A){A?i(Cxe(v,!1)):h()};vMt(x)?r.resolve(x).then(S,u):S(x)}catch(A){u(A)}}}catch(A){a(A)}},a)}catch(d){a(d)}};h()})});pMt({target:"AsyncIterator",proto:!0,real:!0,forced:xMt},{filter:function(e){return g5(this),mMt(e),new wMt(gMt(this),{predicate:e})}})});var Rxe=I(()=>{"use strict";var bMt=te(),SMt=ev().find;bMt({target:"AsyncIterator",proto:!0,real:!0},{find:function(e){return SMt(this,e)}})});var y5=I((Dbr,Lxe)=>{"use strict";var EMt=Ot(),TMt=Rr(),Pxe=Rt(),Oxe=fi(),IMt=Ec(),AMt=ji(),CMt=fr(),MMt=L1(),RMt=CMt("asyncIterator");Lxe.exports=function(r){var e=Pxe(r),t=!0,n=AMt(e,RMt),i;return TMt(n)||(n=IMt(e),t=!1),n!==void 0?i=EMt(n,e):(i=e,t=!0),Pxe(i),Oxe(t?i:new MMt(Oxe(i)))}});var qxe=I(()=>{"use strict";var PMt=te(),Dxe=Ot(),OMt=gr(),q1=Rt(),LMt=xr(),DMt=fi(),NMt=tv(),Nxe=Do(),qMt=y5(),kMt=a_(),FMt=zr(),jMt=NMt(function(r){var e=this,t=e.iterator,n=e.mapper;return new r(function(i,o){var a=function(v){e.done=!0,o(v)},u=function(v){kMt(t,a,v,a)},h=function(){try{r.resolve(q1(Dxe(e.next,t))).then(function(v){try{if(q1(v).done)e.done=!0,i(Nxe(void 0,!0));else{var x=v.value;try{var S=n(x,e.counter++),A=function(L){try{e.inner=qMt(L),d()}catch(q){u(q)}};LMt(S)?r.resolve(S).then(A,u):A(S)}catch(L){u(L)}}}catch(L){a(L)}},a)}catch(v){a(v)}},d=function(){var v=e.inner;if(v)try{r.resolve(q1(Dxe(v.next,v.iterator))).then(function(x){try{q1(x).done?(e.inner=null,h()):i(Nxe(x.value,!1))}catch(S){u(S)}},u)}catch(x){u(x)}else h()};d()})});PMt({target:"AsyncIterator",proto:!0,real:!0,forced:FMt},{flatMap:function(e){return q1(this),OMt(e),new jMt(DMt(this),{mapper:e,inner:null})}})});var kxe=I(()=>{"use strict";var zMt=te(),BMt=ev().forEach;zMt({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(e){return BMt(this,e)}})});var _5=I((jbr,Fxe)=>{"use strict";var UMt=Ot(),VMt=tv();Fxe.exports=VMt(function(){return UMt(this.next,this.iterator)},!0)});var jxe=I(()=>{"use strict";var GMt=te(),$Mt=Br(),HMt=Yo(),WMt=y5(),ZMt=o_(),YMt=_5(),KMt=zr();GMt({target:"AsyncIterator",stat:!0,forced:KMt},{from:function(e){var t=WMt(typeof e=="string"?$Mt(e):e);return HMt(ZMt,t.iterator)?t.iterator:new YMt(t)}})});var zxe=I(()=>{"use strict";var XMt=te(),JMt=m5();XMt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:JMt})});var Bxe=I(()=>{"use strict";var QMt=te(),eRt=d5(),tRt=zr();QMt({target:"AsyncIterator",proto:!0,real:!0,forced:tRt},{map:eRt})});var Uxe=I(()=>{"use strict";var rRt=te(),nRt=Ot(),iRt=gr(),x5=Rt(),oRt=xr(),aRt=_r(),sRt=fi(),lRt=a_(),w5=aRt("Promise"),uRt=TypeError;rRt({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(e){x5(this),iRt(e);var t=sRt(this),n=t.iterator,i=t.next,o=arguments.length<2,a=o?void 0:arguments[1],u=0;return new w5(function(h,d){var v=function(S){lRt(n,d,S,d)},x=function(){try{w5.resolve(x5(nRt(i,n))).then(function(S){try{if(x5(S).done)o?d(new uRt("Reduce of empty iterator with no initial value")):h(a);else{var A=S.value;if(o)o=!1,a=A,x();else try{var L=e(a,A,u),q=function(R){a=R,x()};oRt(L)?w5.resolve(L).then(q,v):q(L)}catch(R){v(R)}}u++}catch(R){d(R)}},d)}catch(S){d(S)}};x()})}})});var Vxe=I(()=>{"use strict";var cRt=te(),fRt=ev().some;cRt({target:"AsyncIterator",proto:!0,real:!0},{some:function(e){return fRt(this,e)}})});var Hxe=I(()=>{"use strict";var hRt=te(),Gxe=Ot(),$xe=Rt(),pRt=fi(),dRt=Xb(),mRt=Ny(),vRt=tv(),b5=Do(),gRt=zr(),yRt=vRt(function(r){var e=this,t=e.iterator,n;if(!e.remaining--){var i=b5(void 0,!0);return e.done=!0,n=t.return,n!==void 0?r.resolve(Gxe(n,t,void 0)).then(function(){return i}):i}return r.resolve(Gxe(e.next,t)).then(function(o){return $xe(o).done?(e.done=!0,b5(void 0,!0)):b5(o.value,!1)}).then(null,function(o){throw e.done=!0,o})});hRt({target:"AsyncIterator",proto:!0,real:!0,forced:gRt},{take:function(e){$xe(this);var t=mRt(dRt(+e));return new yRt(pRt(this),{remaining:t})}})});var Wxe=I(()=>{"use strict";var _Rt=te(),xRt=ev().toArray;_Rt({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return xRt(this,void 0,[])}})});var DR=I((e1r,Qxe)=>{"use strict";var Yxe=yn(),wRt=kp(),S5=Do(),bRt=Ji(),SRt=xr(),ERt=ii(),Kxe=sr(),k1="Incorrect Iterator.range arguments",T5="NumericRangeIterator",TRt=Yxe.set,Xxe=Yxe.getterFor(T5),Zxe=RangeError,E5=TypeError,Jxe=wRt(function(e,t,n,i,o,a){if(typeof e!=i||t!==1/0&&t!==-1/0&&typeof t!=i)throw new E5(k1);if(e===1/0||e===-1/0)throw new Zxe(k1);var u=t>e,h=!1,d;if(n===void 0)d=void 0;else if(SRt(n))d=n.step,h=!!n.inclusive;else if(typeof n==i)d=n;else throw new E5(k1);if(bRt(d)&&(d=u?a:-a),typeof d!=i)throw new E5(k1);if(d===1/0||d===-1/0||d===o&&e!==t)throw new Zxe(k1);var v=e!==e||t!==t||d!==d||t>e!=d>o;TRt(this,{type:T5,start:e,end:t,step:d,inclusive:h,hitsEnd:v,currentCount:o,zero:o}),Kxe||(this.start=e,this.end=t,this.step=d,this.inclusive=h)},T5,function(){var e=Xxe(this);if(e.hitsEnd)return S5(void 0,!0);var t=e.start,n=e.end,i=e.step,o=t+i*e.currentCount++;o===n&&(e.hitsEnd=!0);var a=e.inclusive,u;return n>t?u=a?o>n:o>=n:u=a?n>o:n>=o,u?(e.hitsEnd=!0,S5(void 0,!0)):S5(o,!1)}),LR=function(r){ERt(Jxe.prototype,r,{get:function(){return Xxe(this)[r]},set:function(){},configurable:!0,enumerable:!1})};Kxe&&(LR("start"),LR("end"),LR("inclusive"),LR("step"));Qxe.exports=Jxe});var ewe=I(()=>{"use strict";var IRt=te(),ARt=DR();typeof BigInt=="function"&&IRt({target:"BigInt",stat:!0,forced:!0},{range:function(e,t,n){return new ARt(e,t,n,"bigint",BigInt(0),BigInt(1))}})});var I5=I((n1r,iwe)=>{"use strict";wM();_R();var nwe=_r(),CRt=zi(),twe=xr(),MRt=Object,RRt=TypeError,PRt=nwe("Map"),ORt=nwe("WeakMap"),NR=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=CRt(null)};NR.prototype.get=function(r,e){return this[r]||(this[r]=e())};NR.prototype.next=function(r,e,t){var n=t?this.objectsByIndex[r]||(this.objectsByIndex[r]=new ORt):this.primitives||(this.primitives=new PRt),i=n.get(e);return i||n.set(e,i=new NR),i};var rwe=new NR;iwe.exports=function(){var r=rwe,e=arguments.length,t,n;for(t=0;t<e;t++)twe(n=arguments[t])&&(r=r.next(t,n,!0));if(this===MRt&&r===rwe)throw new RRt("Composite keys must contain a non-primitive component");for(t=0;t<e;t++)twe(n=arguments[t])||(r=r.next(t,n,!1));return r}});var awe=I(()=>{"use strict";var LRt=te(),DRt=_a(),NRt=I5(),qRt=_r(),owe=zi(),kRt=Object,FRt=function(){var r=qRt("Object","freeze");return r?r(owe(null)):owe(null)};LRt({global:!0,forced:!0},{compositeKey:function(){return DRt(NRt,kRt,arguments).get("object",FRt)}})});var lwe=I(()=>{"use strict";var jRt=te(),zRt=I5(),swe=_r(),BRt=_a();jRt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?swe("Symbol").for(arguments[0]):BRt(zRt,null,arguments).get("symbol",swe("Symbol"))}})});var uwe=I(()=>{"use strict";var URt=te(),VRt=rt(),GRt=nM().unpack,$Rt=VRt(DataView.prototype.getUint16);URt({target:"DataView",proto:!0},{getFloat16:function(e){var t=$Rt(this,e,arguments.length>1?arguments[1]:!1);return GRt([t&255,t>>8&255],10)}})});var cwe=I(()=>{"use strict";var HRt=te(),WRt=rt(),ZRt=WRt(DataView.prototype.getUint8);HRt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(e){return ZRt(this,e)}})});var A5=I((h1r,fwe)=>{"use strict";var YRt=bs(),KRt=TypeError;fwe.exports=function(r){if(YRt(r)==="DataView")return r;throw new KRt("Argument is not a DataView")}});var C5=I((p1r,hwe)=>{"use strict";var XRt=E4(),JRt=.0009765625,QRt=65504,ePt=6103515625e-14;hwe.exports=Math.f16round||function(e){return XRt(e,JRt,QRt,ePt)}});var pwe=I(()=>{"use strict";var tPt=te(),rPt=rt(),nPt=A5(),iPt=Cy(),oPt=nM().pack,aPt=C5(),sPt=rPt(DataView.prototype.setUint16);tPt({target:"DataView",proto:!0},{setFloat16:function(e,t){nPt(this);var n=iPt(e),i=oPt(aPt(t),10,2);return sPt(this,n,i[1]<<8|i[0],arguments.length>2?arguments[2]:!1)}})});var dwe=I(()=>{"use strict";var lPt=te(),uPt=rt(),cPt=A5(),fPt=Cy(),hPt=vV(),pPt=uPt(DataView.prototype.setUint8);lPt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(e,t){cPt(this);var n=fPt(e);return pPt(this,n,hPt(t))}})});var _we=I(()=>{"use strict";var dPt=te(),kR=sr(),mPt=_r(),mwe=gr(),vPt=xa(),vwe=Tn(),gPt=Ul(),yPt=ii(),gwe=fr(),ywe=yn(),M5=s5(),_Pt=mPt("SuppressedError"),xPt=ReferenceError,wPt=gwe("dispose"),bPt=gwe("toStringTag"),jR="DisposableStack",SPt=ywe.set,FR=ywe.getterFor(jR),R5="sync-dispose",F1="disposed",EPt="pending",qR=function(r){var e=FR(r);if(e.state===F1)throw new xPt(jR+" already disposed");return e},P5=function(){SPt(vPt(this,l_),{type:jR,state:EPt,stack:[]}),kR||(this.disposed=!1)},l_=P5.prototype;gPt(l_,{dispose:function(){var e=FR(this);if(e.state!==F1){e.state=F1,kR||(this.disposed=!0);for(var t=e.stack,n=t.length,i=!1,o;n;){var a=t[--n];t[n]=null;try{a()}catch(u){i?o=new _Pt(u,o):(i=!0,o=u)}}if(e.stack=null,i)throw o}},use:function(e){return M5(qR(this),e,R5),e},adopt:function(e,t){var n=qR(this);return mwe(t),M5(n,void 0,R5,function(){t(e)}),e},defer:function(e){var t=qR(this);mwe(e),M5(t,void 0,R5,e)},move:function(){var e=qR(this),t=new P5;return FR(t).stack=e.stack,e.stack=[],e.state=F1,kR||(this.disposed=!0),t}});kR&&yPt(l_,"disposed",{configurable:!0,get:function(){return FR(this).state===F1}});vwe(l_,wPt,l_.dispose,{name:"dispose"});vwe(l_,bPt,jR,{nonWritable:!0});dPt({global:!0,constructor:!0},{DisposableStack:P5})});var O5=I((x1r,xwe)=>{"use strict";var TPt=rt(),IPt=gr();xwe.exports=function(){return TPt(IPt(this))}});var wwe=I(()=>{"use strict";var APt=te(),CPt=O5();APt({target:"Function",proto:!0,forced:!0},{demethodize:CPt})});var Swe=I(()=>{"use strict";var MPt=te(),RPt=rt(),PPt=Rr(),OPt=bb(),LPt=Lr(),DPt=sr(),NPt=Object.getOwnPropertyDescriptor,bwe=/^\s*class\b/,qPt=RPt(bwe.exec),kPt=function(r){try{if(!DPt||!qPt(bwe,OPt(r)))return!1}catch(t){}var e=NPt(r,"prototype");return!!e&&LPt(e,"writable")&&!e.writable};MPt({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(e){return PPt(e)&&!kPt(e)}})});var Ewe=I(()=>{"use strict";var FPt=te(),jPt=qu();FPt({target:"Function",stat:!0,forced:!0},{isConstructor:jPt})});var Awe=I(()=>{"use strict";var zPt=fr(),BPt=Yn().f,Twe=zPt("metadata"),Iwe=Function.prototype;Iwe[Twe]===void 0&&BPt(Iwe,Twe,{value:null})});var Cwe=I(()=>{"use strict";var UPt=te(),VPt=O5();UPt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:VPt})});var Mwe=I(()=>{"use strict";pB()});var Rwe=I(()=>{"use strict";yB()});var L5=I((N1r,Pwe)=>{"use strict";var GPt=Ot(),$Pt=PB(),HPt=function(r,e){return[e,r]};Pwe.exports=function(){return GPt($Pt,this,HPt)}});var Owe=I(()=>{"use strict";var WPt=te(),ZPt=L5();WPt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:ZPt})});var Nwe=I(()=>{"use strict";var YPt=te(),Lwe=Ot(),KPt=gr(),Dwe=Rt(),XPt=Ec(),JPt=$p(),QPt=Array,eOt=JPt(function(){for(;;){var r=this.iterator;if(!r){var e=this.nextIterableIndex++,t=this.iterables;if(e>=t.length){this.done=!0;return}var n=t[e];this.iterables[e]=null,r=this.iterator=Lwe(n.method,n.iterable),this.next=r.next}var i=Dwe(Lwe(this.next,r));if(i.done){this.iterator=null,this.next=null;continue}return i.value}});YPt({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var e=arguments.length,t=QPt(e),n=0;n<e;n++){var i=Dwe(arguments[n]);t[n]={iterable:i,method:KPt(XPt(i))}}return new eOt({iterables:t,nextIterableIndex:0,iterator:null,next:null})}})});var Fwe=I(()=>{"use strict";var tOt=Ot(),rOt=Tn(),nOt=ji(),iOt=Lr(),oOt=fr(),qwe=Bm().IteratorPrototype,kwe=oOt("dispose");iOt(qwe,kwe)||rOt(qwe,kwe,function(){var r=nOt(this,"return");r&&tOt(r,this)})});var jwe=I(()=>{"use strict";bB()});var zwe=I(()=>{"use strict";SB()});var Bwe=I(()=>{"use strict";EB()});var Uwe=I(()=>{"use strict";TB()});var Vwe=I(()=>{"use strict";CB()});var Gwe=I(()=>{"use strict";MB()});var $we=I(()=>{"use strict";RB()});var Hwe=I(()=>{"use strict";var aOt=te(),sOt=L5();aOt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:sOt})});var Wwe=I(()=>{"use strict";OB()});var Ywe=I(()=>{"use strict";var lOt=te(),Zwe=DR(),uOt=TypeError;lOt({target:"Iterator",stat:!0,forced:!0},{range:function(e,t,n){if(typeof e=="number")return new Zwe(e,t,n,"number",0,1);if(typeof e=="bigint")return new Zwe(e,t,n,"bigint",BigInt(0),BigInt(1));throw new uOt("Incorrect Iterator.range arguments")}})});var Kwe=I(()=>{"use strict";LB()});var Xwe=I(()=>{"use strict";DB()});var Jwe=I(()=>{"use strict";NB()});var Qwe=I(()=>{"use strict";qB()});var tbe=I(()=>{"use strict";var cOt=te(),fOt=Rt(),hOt=L1(),pOt=_5(),ebe=fi(),dOt=zr();cOt({target:"Iterator",proto:!0,real:!0,forced:dOt},{toAsync:function(){return new pOt(ebe(new hOt(ebe(fOt(this)))))}})});var D5=I((ySr,rbe)=>{"use strict";var mOt=ut();rbe.exports=!mOt(function(){var r="9007199254740993",e=JSON.rawJSON(r);return!JSON.isRawJSON(e)||JSON.stringify(e)!==r})});var N5=I((_Sr,nbe)=>{"use strict";var vOt=xr(),gOt=yn().get;nbe.exports=function(e){if(!vOt(e))return!1;var t=gOt(e);return!!t&&t.type==="RawJSON"}});var ibe=I(()=>{"use strict";var yOt=te(),_Ot=D5(),xOt=N5();yOt({target:"JSON",stat:!0,forced:!_Ot},{isRawJSON:xOt})});var k5=I((bSr,lbe)=>{"use strict";var q5=rt(),wOt=Lr(),zR=SyntaxError,bOt=parseInt,SOt=String.fromCharCode,EOt=q5("".charAt),obe=q5("".slice),abe=q5(/./.exec),sbe={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},TOt=/^[\da-f]{4}$/i,IOt=/^[\u0000-\u001F]$/;lbe.exports=function(r,e){for(var t=!0,n="";e<r.length;){var i=EOt(r,e);if(i==="\\"){var o=obe(r,e,e+2);if(wOt(sbe,o))n+=sbe[o],e+=2;else if(o==="\\u"){e+=2;var a=obe(r,e,e+4);if(!abe(TOt,a))throw new zR("Bad Unicode escape at: "+e);n+=SOt(bOt(a,16)),e+=4}else throw new zR("Unknown escape sequence: \""+o+"\"")}else if(i==="\""){t=!1,e++;break}else{if(abe(IOt,i))throw new zR("Bad control character in string literal at: "+e);n+=i,e++}}if(t)throw new zR("Unterminated string at: "+e);return{value:n,end:e}}});var vbe=I(()=>{"use strict";var AOt=te(),COt=sr(),$5=At(),MOt=_r(),BR=rt(),ROt=Ot(),dbe=Rr(),POt=xr(),OOt=Nu(),LOt=Lr(),DOt=br(),ube=Xr(),U5=zl(),mbe=ut(),NOt=k5(),qOt=Cp(),cbe=$5.JSON,kOt=$5.Number,u_=$5.SyntaxError,H5=cbe&&cbe.parse,FOt=MOt("Object","keys"),jOt=Object.getOwnPropertyDescriptor,Xo=BR("".charAt),F5=BR("".slice),j5=BR(/./.exec),fbe=BR([].push),z5=/^\d$/,zOt=/^[1-9]$/,BOt=/^[\d-]$/,j1=/^[\t\n\r ]$/,B5=0,hbe=1,UOt=function(r,e){r=DOt(r);var t=new G5(r,0,""),n=t.parse(),i=n.value,o=t.skip(j1,n.end);if(o<r.length)throw new u_("Unexpected extra character: \""+Xo(r,o)+"\" after the parsed data at: "+o);return dbe(e)?V5({"":i},"",e,n):i},V5=function(r,e,t,n){var i=r[e],o=n&&i===n.value,a=o&&typeof n.source=="string"?{source:n.source}:{},u,h,d,v,x;if(POt(i)){var S=OOt(i),A=o?n.nodes:S?[]:{};if(S)for(u=A.length,d=ube(i),v=0;v<d;v++)pbe(i,v,V5(i,""+v,t,v<u?A[v]:void 0));else for(h=FOt(i),d=ube(h),v=0;v<d;v++)x=h[v],pbe(i,x,V5(i,x,t,LOt(A,x)?A[x]:void 0))}return ROt(t,r,e,i,a)},pbe=function(r,e,t){if(COt){var n=jOt(r,e);if(n&&!n.configurable)return}t===void 0?delete r[e]:U5(r,e,t)},VOt=function(r,e,t,n){this.value=r,this.end=e,this.source=t,this.nodes=n},G5=function(r,e){this.source=r,this.index=e};G5.prototype={fork:function(r){return new G5(this.source,r)},parse:function(){var r=this.source,e=this.skip(j1,this.index),t=this.fork(e),n=Xo(r,e);if(j5(BOt,n))return t.number();switch(n){case"{":return t.object();case"[":return t.array();case"\"":return t.string();case"t":return t.keyword(!0);case"f":return t.keyword(!1);case"n":return t.keyword(null);}throw new u_("Unexpected character: \""+n+"\" at: "+e)},node:function(r,e,t,n,i){return new VOt(e,n,r?null:F5(this.source,t,n),i)},object:function(){for(var r=this.source,e=this.index+1,t=!1,n={},i={};e<r.length;){if(e=this.until(["\"","}"],e),Xo(r,e)==="}"&&!t){e++;break}var o=this.fork(e).string(),a=o.value;e=o.end,e=this.until([":"],e)+1,e=this.skip(j1,e),o=this.fork(e).parse(),U5(i,a,o),U5(n,a,o.value),e=this.until([",","}"],o.end);var u=Xo(r,e);if(u===",")t=!0,e++;else if(u==="}"){e++;break}}return this.node(hbe,n,this.index,e,i)},array:function(){for(var r=this.source,e=this.index+1,t=!1,n=[],i=[];e<r.length;){if(e=this.skip(j1,e),Xo(r,e)==="]"&&!t){e++;break}var o=this.fork(e).parse();if(fbe(i,o),fbe(n,o.value),e=this.until([",","]"],o.end),Xo(r,e)===",")t=!0,e++;else if(Xo(r,e)==="]"){e++;break}}return this.node(hbe,n,this.index,e,i)},string:function(){var r=this.index,e=NOt(this.source,this.index+1);return this.node(B5,e.value,r,e.end)},number:function(){var r=this.source,e=this.index,t=e;if(Xo(r,t)==="-"&&t++,Xo(r,t)==="0")t++;else if(j5(zOt,Xo(r,t)))t=this.skip(z5,t+1);else throw new u_("Failed to parse number at: "+t);if(Xo(r,t)==="."&&(t=this.skip(z5,t+1)),Xo(r,t)==="e"||Xo(r,t)==="E"){t++,(Xo(r,t)==="+"||Xo(r,t)==="-")&&t++;var n=t;if(t=this.skip(z5,t),n===t)throw new u_("Failed to parse number's exponent value at: "+t)}return this.node(B5,kOt(F5(r,e,t)),e,t)},keyword:function(r){var e=""+r,t=this.index,n=t+e.length;if(F5(this.source,t,n)!==e)throw new u_("Failed to parse value at: "+t);return this.node(B5,r,t,n)},skip:function(r,e){for(var t=this.source;e<t.length&&j5(r,Xo(t,e));e++);return e},until:function(r,e){e=this.skip(j1,e);for(var t=Xo(this.source,e),n=0;n<r.length;n++)if(r[n]===t)return e;throw new u_("Unexpected character: \""+t+"\" at: "+e)}};var GOt=mbe(function(){var r="9007199254740993",e;return H5(r,function(t,n,i){e=i.source}),e!==r}),$Ot=qOt&&!mbe(function(){return 1/H5("-0 \t")!==-1/0});AOt({target:"JSON",stat:!0,forced:GOt},{parse:function(e,t){return $Ot&&!dbe(t)?H5(e):UOt(e,t)}})});var Ebe=I(()=>{"use strict";var bbe=te(),HOt=Gf(),Sbe=D5(),UR=_r(),WOt=Ot(),K5=rt(),ZOt=Rr(),YOt=N5(),KOt=br(),XOt=zl(),JOt=k5(),QOt=Iz(),eLt=Rp(),tLt=yn().set,rLt=String,gbe=SyntaxError,nLt=UR("JSON","parse"),ybe=UR("JSON","stringify"),iLt=UR("Object","create"),oLt=UR("Object","freeze"),Z5=K5("".charAt),W5=K5("".slice),aLt=K5([].push),Y5=eLt(),_be=Y5.length,xbe="Unacceptable as raw JSON",wbe=function(r){return r===" "||r==="\t"||r===`
`||r==="\r"};bbe({target:"JSON",stat:!0,forced:!Sbe},{rawJSON:function(e){var t=KOt(e);if(t===""||wbe(Z5(t,0))||wbe(Z5(t,t.length-1)))throw new gbe(xbe);var n=nLt(t);if(typeof n=="object"&&n!==null)throw new gbe(xbe);var i=iLt(null);return tLt(i,{type:"RawJSON"}),XOt(i,"rawJSON",t),HOt?oLt(i):i}});ybe&&bbe({target:"JSON",stat:!0,arity:3,forced:!Sbe},{stringify:function(e,t,n){var i=QOt(t),o=[],a=ybe(e,function(A,L){var q=ZOt(i)?WOt(i,this,rLt(A),L):L;return YOt(q)?Y5+(aLt(o,q.rawJSON)-1):q},n);if(typeof a!="string")return a;for(var u="",h=a.length,d=0;d<h;d++){var v=Z5(a,d);if(v==="\""){var x=JOt(a,++d).end-1,S=W5(a,d,x);u+=W5(S,0,_be)===Y5?o[W5(S,_be)]:"\""+S+"\"",d=x}else u+=v}return u}})});var Jo=I((ASr,Tbe)=>{"use strict";var sLt=vo().has;Tbe.exports=function(r){return sLt(r),r}});var Ibe=I(()=>{"use strict";var lLt=te(),uLt=Jo(),cLt=vo().remove;lLt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=uLt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=cLt(e,arguments[i]),t=t&&n;return!!t}})});var Cbe=I(()=>{"use strict";var fLt=te(),hLt=Jo(),X5=vo(),pLt=X5.get,dLt=X5.has,Abe=X5.set;fLt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(e,t){var n=hLt(this),i,o;return dLt(n,e)?(i=pLt(n,e),"update"in t&&(i=t.update(i,e,n),Abe(n,e,i)),i):(o=t.insert(e,n),Abe(n,e,o),o)}})});var Mbe=I(()=>{"use strict";var mLt=te(),vLt=Fn(),gLt=Jo(),yLt=Vl();mLt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=gLt(this),n=vLt(e,arguments.length>1?arguments[1]:void 0);return yLt(t,function(i,o){if(!n(i,o,t))return!1},!0)!==!1}})});var Pbe=I(()=>{"use strict";var _Lt=te(),xLt=Fn(),wLt=Jo(),Rbe=vo(),bLt=Vl(),SLt=Rbe.Map,ELt=Rbe.set;_Lt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=wLt(this),n=xLt(e,arguments.length>1?arguments[1]:void 0),i=new SLt;return bLt(t,function(o,a){n(o,a,t)&&ELt(i,a,o)}),i}})});var Obe=I(()=>{"use strict";var TLt=te(),ILt=Fn(),ALt=Jo(),CLt=Vl();TLt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=ALt(this),n=ILt(e,arguments.length>1?arguments[1]:void 0),i=CLt(t,function(o,a){if(n(o,a,t))return{value:o}},!0);return i&&i.value}})});var Lbe=I(()=>{"use strict";var MLt=te(),RLt=Fn(),PLt=Jo(),OLt=Vl();MLt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=PLt(this),n=RLt(e,arguments.length>1?arguments[1]:void 0),i=OLt(t,function(o,a){if(n(o,a,t))return{key:a}},!0);return i&&i.key}})});var z1=I((zSr,Dbe)=>{"use strict";var LLt=Fn(),DLt=Rt(),NLt=Br(),qLt=xi();Dbe.exports=function(r,e,t){return function(i){var o=NLt(i),a=arguments.length,u=a>1?arguments[1]:void 0,h=u!==void 0,d=h?LLt(u,a>2?arguments[2]:void 0):void 0,v=new r,x=0;return qLt(o,function(S){var A=h?d(S,x++):S;t?e(v,DLt(A)[0],A[1]):e(v,A)}),v}}});var qbe=I(()=>{"use strict";var kLt=te(),Nbe=vo(),FLt=z1();kLt({target:"Map",stat:!0,forced:!0},{from:FLt(Nbe.Map,Nbe.set,!0)})});var kbe=I(()=>{"use strict";var jLt=te(),zLt=Jo(),J5=vo(),BLt=J5.get,ULt=J5.has,VLt=J5.set;jLt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(e,t){return ULt(zLt(this),e)?BLt(this,e):(VLt(this,e,t),t)}})});var Fbe=I(()=>{"use strict";var GLt=te(),$Lt=gr(),HLt=Jo(),Q5=vo(),WLt=Q5.get,ZLt=Q5.has,YLt=Q5.set;GLt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(e,t){if(HLt(this),$Lt(t),ZLt(this,e))return WLt(this,e);e===0&&1/e===-1/0&&(e=0);var n=t(e);return YLt(this,e,n),n}})});var jbe=I(()=>{"use strict";GB()});var Bbe=I((YSr,zbe)=>{"use strict";zbe.exports=function(r,e){return r===e||r!==r&&e!==e}});var Ube=I(()=>{"use strict";var KLt=te(),XLt=Bbe(),JLt=Jo(),QLt=Vl();KLt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return QLt(JLt(this),function(t){if(XLt(t,e))return!0},!0)===!0}})});var Gbe=I(()=>{"use strict";var eDt=te(),tDt=Ot(),rDt=xi(),nDt=Rr(),Vbe=gr(),iDt=vo().Map;eDt({target:"Map",stat:!0,forced:!0},{keyBy:function(e,t){var n=nDt(this)?this:iDt,i=new n;Vbe(t);var o=Vbe(i.set);return rDt(e,function(a){tDt(o,i,t(a),a)}),i}})});var $be=I(()=>{"use strict";var oDt=te(),aDt=Jo(),sDt=Vl();oDt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var t=sDt(aDt(this),function(n,i){if(n===e)return{key:i}},!0);return t&&t.key}})});var Wbe=I(()=>{"use strict";var lDt=te(),uDt=Fn(),cDt=Jo(),Hbe=vo(),fDt=Vl(),hDt=Hbe.Map,pDt=Hbe.set;lDt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=cDt(this),n=uDt(e,arguments.length>1?arguments[1]:void 0),i=new hDt;return fDt(t,function(o,a){pDt(i,n(o,a,t),o)}),i}})});var Ybe=I(()=>{"use strict";var dDt=te(),mDt=Fn(),vDt=Jo(),Zbe=vo(),gDt=Vl(),yDt=Zbe.Map,_Dt=Zbe.set;dDt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=vDt(this),n=mDt(e,arguments.length>1?arguments[1]:void 0),i=new yDt;return gDt(t,function(o,a){_Dt(i,a,n(o,a,t))}),i}})});var Kbe=I(()=>{"use strict";var xDt=te(),wDt=Jo(),bDt=xi(),SDt=vo().set;xDt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=wDt(this),n=arguments.length,i=0;i<n;)bDt(arguments[i++],function(o,a){SDt(t,o,a)},{AS_ENTRIES:!0});return t}})});var B1=I((lEr,Xbe)=>{"use strict";var EDt=Rt();Xbe.exports=function(r,e,t){return function(){for(var i=new r,o=arguments.length,a=0;a<o;a++){var u=arguments[a];t?e(i,EDt(u)[0],u[1]):e(i,u)}return i}}});var Qbe=I(()=>{"use strict";var TDt=te(),Jbe=vo(),IDt=B1();TDt({target:"Map",stat:!0,forced:!0},{of:IDt(Jbe.Map,Jbe.set,!0)})});var e1e=I(()=>{"use strict";var ADt=te(),CDt=gr(),MDt=Jo(),RDt=Vl(),PDt=TypeError;ADt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=MDt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(CDt(e),RDt(t,function(o,a){n?(n=!1,i=o):i=e(i,o,a,t)}),n)throw new PDt("Reduce of empty map with no initial value");return i}})});var t1e=I(()=>{"use strict";var ODt=te(),LDt=Fn(),DDt=Jo(),NDt=Vl();ODt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=DDt(this),n=LDt(e,arguments.length>1?arguments[1]:void 0);return NDt(t,function(i,o){if(n(i,o,t))return!0},!0)===!0}})});var n1e=I(()=>{"use strict";var qDt=te(),r1e=gr(),kDt=Jo(),eG=vo(),FDt=TypeError,jDt=eG.get,zDt=eG.has,BDt=eG.set;qDt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var n=kDt(this),i=arguments.length;r1e(t);var o=zDt(n,e);if(!o&&i<3)throw new FDt("Updating absent value");var a=o?jDt(n,e):r1e(i>2?arguments[2]:void 0)(e,n);return BDt(n,e,t(a,e,n)),n}})});var $R=I((gEr,i1e)=>{"use strict";var VR=Ot(),tG=gr(),GR=Rr(),UDt=Rt(),VDt=TypeError;i1e.exports=function(e,t){var n=UDt(this),i=tG(n.get),o=tG(n.has),a=tG(n.set),u=arguments.length>2?arguments[2]:void 0,h;if(!GR(t)&&!GR(u))throw new VDt("At least one callback required");return VR(o,n,e)?(h=VR(i,n,e),GR(t)&&(h=t(h),VR(a,n,e,h))):GR(u)&&(h=u(),VR(a,n,e,h)),h}});var o1e=I(()=>{"use strict";var GDt=te(),$Dt=$R();GDt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:$Dt})});var a1e=I(()=>{"use strict";var HDt=te(),WDt=$R();HDt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:WDt})});var s1e=I(()=>{"use strict";var ZDt=te(),YDt=Math.min,KDt=Math.max;ZDt({target:"Math",stat:!0,forced:!0},{clamp:function(e,t,n){return YDt(n,KDt(t,e))}})});var l1e=I(()=>{"use strict";var XDt=te();XDt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var u1e=I(()=>{"use strict";var JDt=te(),QDt=180/Math.PI;JDt({target:"Math",stat:!0,forced:!0},{degrees:function(e){return e*QDt}})});var rG=I((CEr,c1e)=>{"use strict";c1e.exports=Math.scale||function(e,t,n,i,o){var a=+e,u=+t,h=+n,d=+i,v=+o;return a!==a||u!==u||h!==h||d!==d||v!==v?NaN:a===1/0||a===-1/0?a:(a-u)*(v-d)/(h-u)+d}});var f1e=I(()=>{"use strict";var eNt=te(),tNt=rG(),rNt=rM();eNt({target:"Math",stat:!0,forced:!0},{fscale:function(e,t,n,i,o){return rNt(tNt(e,t,n,i,o))}})});var h1e=I(()=>{"use strict";var nNt=te(),iNt=C5();nNt({target:"Math",stat:!0},{f16round:iNt})});var p1e=I(()=>{"use strict";var oNt=te();oNt({target:"Math",stat:!0,forced:!0},{iaddh:function(e,t,n,i){var o=e>>>0,a=t>>>0,u=n>>>0;return a+(i>>>0)+((o&u|(o|u)&~(o+u>>>0))>>>31)|0}})});var d1e=I(()=>{"use strict";var aNt=te();aNt({target:"Math",stat:!0,forced:!0},{imulh:function(e,t){var n=65535,i=+e,o=+t,a=i&n,u=o&n,h=i>>16,d=o>>16,v=(h*u>>>0)+(a*u>>>16);return h*d+(v>>16)+((a*d>>>0)+(v&n)>>16)}})});var m1e=I(()=>{"use strict";var sNt=te();sNt({target:"Math",stat:!0,forced:!0},{isubh:function(e,t,n,i){var o=e>>>0,a=t>>>0,u=n>>>0;return a-(i>>>0)-((~o&u|~(o^u)&o-u>>>0)>>>31)|0}})});var v1e=I(()=>{"use strict";var lNt=te();lNt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var g1e=I(()=>{"use strict";var uNt=te(),cNt=Math.PI/180;uNt({target:"Math",stat:!0,forced:!0},{radians:function(e){return e*cNt}})});var y1e=I(()=>{"use strict";var fNt=te(),hNt=rG();fNt({target:"Math",stat:!0,forced:!0},{scale:hNt})});var b1e=I(()=>{"use strict";var pNt=te(),dNt=Rt(),mNt=tU(),vNt=kp(),gNt=Do(),_1e=yn(),x1e="Seeded Random",w1e=x1e+" Generator",yNt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",_Nt=_1e.set,xNt=_1e.getterFor(w1e),wNt=TypeError,bNt=vNt(function(e){_Nt(this,{type:w1e,seed:e%2147483647})},x1e,function(){var e=xNt(this),t=e.seed=(e.seed*1103515245+12345)%2147483647;return gNt((t&1073741823)/1073741823,!1)});pNt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(e){var t=dNt(e).seed;if(!mNt(t))throw new wNt(yNt);return new bNt(t)}})});var S1e=I(()=>{"use strict";var SNt=te();SNt({target:"Math",stat:!0,forced:!0},{signbit:function(e){var t=+e;return t===t&&t===0?1/t===-1/0:t<0}})});var C1e=I(()=>{"use strict";var ENt=te(),TNt=rt(),INt=xi(),ANt=RangeError,CNt=TypeError,Gl=1/0,MNt=NaN,rv=Math.abs,aG=Math.pow,E1e=TNt([].push),U1=aG(2,1023),RNt=aG(2,53)-1,T1e=Number.MAX_VALUE,I1e=aG(2,971),V1={},nG={},iG={},oG={},A1e={},HR=function(r,e){var t=r+e,n=e-(t-r);return{hi:t,lo:n}};ENt({target:"Math",stat:!0},{sumPrecise:function(e){var t=[],n=0,i=oG;switch(INt(e,function(j){if(++n>=RNt)throw new ANt("Maximum allowed index exceeded");if(typeof j!="number")throw new CNt("Value is not a number");i!==V1&&(j!==j?i=V1:j===Gl?i=i===nG?V1:iG:j===-Gl?i=i===iG?V1:nG:(j!==0||1/j===Gl)&&(i===oG||i===A1e)&&(i=A1e,E1e(t,j)))}),i){case V1:return MNt;case nG:return-Gl;case iG:return Gl;case oG:return-0;}for(var o=[],a=0,u,h,d,v,x,S,A=0;A<t.length;A++){u=t[A];for(var L=0,q=0;q<o.length;q++){if(h=o[q],rv(u)<rv(h)&&(S=u,u=h,h=S),d=HR(u,h),v=d.hi,x=d.lo,rv(v)===Gl){var R=v===Gl?1:-1;a+=R,u=u-R*U1-R*U1,rv(u)<rv(h)&&(S=u,u=h,h=S),d=HR(u,h),v=d.hi,x=d.lo}x!==0&&(o[L++]=x),u=v}o.length=L,u!==0&&E1e(o,u)}var D=o.length-1;if(v=0,x=0,a!==0){var k=D>=0?o[D]:0;if(D--,rv(a)>1||a>0&&k>0||a<0&&k<0)return a>0?Gl:-Gl;if(d=HR(a*U1,k/2),v=d.hi,x=d.lo,x*=2,rv(2*v)===Gl)return v>0?v===U1&&x===-(I1e/2)&&D>=0&&o[D]<0?T1e:Gl:v===-U1&&x===I1e/2&&D>=0&&o[D]>0?-T1e:-Gl;x!==0&&(o[++D]=x,x=0),v*=2}for(;D>=0&&(d=HR(v,o[D--]),v=d.hi,x=d.lo,x===0););return D>=0&&(x<0&&o[D]<0||x>0&&o[D]>0)&&(h=x*2,u=v+h,h===u-v&&(v=u)),v}})});var M1e=I(()=>{"use strict";var PNt=te();PNt({target:"Math",stat:!0,forced:!0},{umulh:function(e,t){var n=65535,i=+e,o=+t,a=i&n,u=o&n,h=i>>>16,d=o>>>16,v=(h*u>>>0)+(a*u>>>16);return h*d+(v>>>16)+((a*d>>>0)+(v&n)>>>16)}})});var O1e=I(()=>{"use strict";var ONt=te(),$1=rt(),LNt=ni(),G1="Invalid number representation",DNt="Invalid radix",NNt=RangeError,WR=SyntaxError,qNt=TypeError,R1e=parseInt,kNt=Math.pow,P1e=/^[\d.a-z]+$/,FNt=$1("".charAt),jNt=$1(P1e.exec),zNt=$1(1 .toString),BNt=$1("".slice),UNt=$1("".split);ONt({target:"Number",stat:!0,forced:!0},{fromString:function(e,t){var n=1;if(typeof e!="string")throw new qNt(G1);if(!e.length)throw new WR(G1);if(FNt(e,0)==="-"&&(n=-1,e=BNt(e,1),!e.length))throw new WR(G1);var i=t===void 0?10:LNt(t);if(i<2||i>36)throw new NNt(DNt);if(!jNt(P1e,e))throw new WR(G1);var o=UNt(e,"."),a=R1e(o[0],i);if(o.length>1&&(a+=R1e(o[1],i)/kNt(i,o[1].length)),i===10&&zNt(a,i)!==e)throw new WR(G1);return n*a}})});var L1e=I(()=>{"use strict";var VNt=te(),GNt=DR();VNt({target:"Number",stat:!0,forced:!0},{range:function(e,t,n){return new GNt(e,t,n,"number",0,1)}})});var D1e=I(()=>{"use strict";dU()});var YR=I((oTr,k1e)=>{"use strict";var N1e=yn(),$Nt=kp(),ZR=Do(),HNt=Lr(),WNt=Dm(),ZNt=Br(),q1e="Object Iterator",YNt=N1e.set,KNt=N1e.getterFor(q1e);k1e.exports=$Nt(function(e,t){var n=ZNt(e);YNt(this,{type:q1e,mode:t,object:n,keys:WNt(n),index:0})},"Object",function(){for(var e=KNt(this),t=e.keys;;){if(t===null||e.index>=t.length)return e.object=e.keys=null,ZR(void 0,!0);var n=t[e.index++],i=e.object;if(HNt(i,n)){switch(e.mode){case"keys":return ZR(n,!1);case"values":return ZR(i[n],!1);}return ZR([n,i[n]],!1)}}})});var F1e=I(()=>{"use strict";var XNt=te(),JNt=YR();XNt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(e){return new JNt(e,"entries")}})});var j1e=I(()=>{"use strict";var QNt=te(),e2t=YR();QNt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(e){return new e2t(e,"keys")}})});var z1e=I(()=>{"use strict";var t2t=te(),r2t=YR();t2t({target:"Object",stat:!0,forced:!0},{iterateValues:function(e){return new r2t(e,"values")}})});var B1e=I(()=>{"use strict";pU()});var X1e=I(()=>{"use strict";var n2t=te(),KR=Ot(),H1=sr(),i2t=jp(),U1e=gr(),o2t=Rt(),a2t=xa(),V1e=Rr(),s2t=Ji(),l2t=xr(),XR=ji(),u2t=Tn(),sG=Ul(),G1e=ii(),c_=kU(),c2t=fr(),$1e=yn(),f2t=c2t("observable"),lG="Observable",H1e="Subscription",W1e="SubscriptionObserver",uG=$1e.getterFor,cG=$1e.set,h2t=uG(lG),Z1e=uG(H1e),JR=uG(W1e),Y1e=function(r){this.observer=o2t(r),this.cleanup=null,this.subscriptionObserver=null};Y1e.prototype={type:H1e,clean:function(){var r=this.cleanup;if(r){this.cleanup=null;try{r()}catch(e){c_(e)}}},close:function(){if(!H1){var r=this.facade,e=this.subscriptionObserver;r.closed=!0,e&&(e.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var fG=function(r,e){var t=cG(this,new Y1e(r)),n;H1||(this.closed=!1);try{(n=XR(r,"start"))&&KR(n,r,this)}catch(u){c_(u)}if(!t.isClosed()){var i=t.subscriptionObserver=new hG(t);try{var o=e(i),a=o;s2t(o)||(t.cleanup=V1e(o.unsubscribe)?function(){a.unsubscribe()}:U1e(o))}catch(u){i.error(u);return}t.isClosed()&&t.clean()}};fG.prototype=sG({},{unsubscribe:function(){var e=Z1e(this);e.isClosed()||(e.close(),e.clean())}});H1&&G1e(fG.prototype,"closed",{configurable:!0,get:function(){return Z1e(this).isClosed()}});var hG=function(r){cG(this,{type:W1e,subscriptionState:r}),H1||(this.closed=!1)};hG.prototype=sG({},{next:function(e){var t=JR(this).subscriptionState;if(!t.isClosed()){var n=t.observer;try{var i=XR(n,"next");i&&KR(i,n,e)}catch(o){c_(o)}}},error:function(e){var t=JR(this).subscriptionState;if(!t.isClosed()){var n=t.observer;t.close();try{var i=XR(n,"error");i?KR(i,n,e):c_(e)}catch(o){c_(o)}t.clean()}},complete:function(){var e=JR(this).subscriptionState;if(!e.isClosed()){var t=e.observer;e.close();try{var n=XR(t,"complete");n&&KR(n,t)}catch(i){c_(i)}e.clean()}}});H1&&G1e(hG.prototype,"closed",{configurable:!0,get:function(){return JR(this).subscriptionState.isClosed()}});var K1e=function(e){a2t(this,pG),cG(this,{type:lG,subscriber:U1e(e)})},pG=K1e.prototype;sG(pG,{subscribe:function(e){var t=arguments.length;return new fG(V1e(e)?{next:e,error:t>1?arguments[1]:void 0,complete:t>2?arguments[2]:void 0}:l2t(e)?e:{},h2t(this).subscriber)}});u2t(pG,f2t,function(){return this});n2t({global:!0,constructor:!0,forced:!0},{Observable:K1e});i2t(lG)});var Q1e=I(()=>{"use strict";var p2t=te(),d2t=_r(),m2t=Ot(),J1e=Rt(),v2t=qu(),g2t=Np(),y2t=ji(),_2t=xi(),x2t=fr(),w2t=x2t("observable");p2t({target:"Observable",stat:!0,forced:!0},{from:function(e){var t=v2t(this)?this:d2t("Observable"),n=y2t(J1e(e),w2t);if(n){var i=J1e(m2t(n,e));return i.constructor===t?i:new t(function(a){return i.subscribe(a)})}var o=g2t(e);return new t(function(a){_2t(o,function(u,h){if(a.next(u),a.closed)return h()},{IS_ITERATOR:!0,INTERRUPTED:!0}),a.complete()})}})});var tSe=I(()=>{"use strict";var b2t=te(),eSe=_r(),S2t=qu(),E2t=eSe("Array");b2t({target:"Observable",stat:!0,forced:!0},{of:function(){for(var e=S2t(this)?this:eSe("Observable"),t=arguments.length,n=E2t(t),i=0;i<t;)n[i]=arguments[i++];return new e(function(o){for(var a=0;a<t;a++)if(o.next(n[a]),o.closed)return;o.complete()})}})});var rSe=I(()=>{"use strict";X1e();Q1e();tSe()});var nSe=I(()=>{"use strict";XU()});var iSe=I(()=>{"use strict";JU()});var oSe=I(()=>{"use strict";r3()});var aSe=I(()=>{"use strict";n3()});var Lc=I((RTr,cSe)=>{"use strict";wM();_R();var uSe=_r(),T2t=rt(),I2t=Lf(),sSe=uSe("Map"),A2t=uSe("WeakMap"),C2t=T2t([].push),lSe=I2t("metadata"),dG=lSe.store||(lSe.store=new A2t),W1=function(r,e,t){var n=dG.get(r);if(!n){if(!t)return;dG.set(r,n=new sSe)}var i=n.get(e);if(!i){if(!t)return;n.set(e,i=new sSe)}return i},M2t=function(r,e,t){var n=W1(e,t,!1);return n===void 0?!1:n.has(r)},R2t=function(r,e,t){var n=W1(e,t,!1);return n===void 0?void 0:n.get(r)},P2t=function(r,e,t,n){W1(t,n,!0).set(r,e)},O2t=function(r,e){var t=W1(r,e,!1),n=[];return t&&t.forEach(function(i,o){C2t(n,o)}),n},L2t=function(r){return r===void 0||typeof r=="symbol"?r:String(r)};cSe.exports={store:dG,getMap:W1,has:M2t,get:R2t,set:P2t,keys:O2t,toKey:L2t}});var hSe=I(()=>{"use strict";var D2t=te(),fSe=Lc(),N2t=Rt(),q2t=fSe.toKey,k2t=fSe.set;D2t({target:"Reflect",stat:!0},{defineMetadata:function(e,t,n){var i=arguments.length<4?void 0:q2t(arguments[3]);k2t(e,t,N2t(n),i)}})});var dSe=I(()=>{"use strict";var F2t=te(),mG=Lc(),j2t=Rt(),z2t=mG.toKey,B2t=mG.getMap,pSe=mG.store;F2t({target:"Reflect",stat:!0},{deleteMetadata:function(e,t){var n=arguments.length<3?void 0:z2t(arguments[2]),i=B2t(j2t(t),n,!1);if(i===void 0||!i.delete(e))return!1;if(i.size)return!0;var o=pSe.get(t);return o.delete(n),!!o.size||pSe.delete(t)}})});var vSe=I(()=>{"use strict";var U2t=te(),vG=Lc(),V2t=Rt(),G2t=to(),$2t=vG.has,H2t=vG.get,W2t=vG.toKey,mSe=function(r,e,t){var n=$2t(r,e,t);if(n)return H2t(r,e,t);var i=G2t(e);return i!==null?mSe(r,i,t):void 0};U2t({target:"Reflect",stat:!0},{getMetadata:function(e,t){var n=arguments.length<3?void 0:W2t(arguments[2]);return mSe(e,V2t(t),n)}})});var xSe=I(()=>{"use strict";var Z2t=te(),gSe=rt(),ySe=Lc(),Y2t=Rt(),K2t=to(),X2t=AR(),J2t=gSe(X2t),Q2t=gSe([].concat),eqt=ySe.keys,tqt=ySe.toKey,_Se=function(r,e){var t=eqt(r,e),n=K2t(r);if(n===null)return t;var i=_Se(n,e);return i.length?t.length?J2t(Q2t(t,i)):i:t};Z2t({target:"Reflect",stat:!0},{getMetadataKeys:function(e){var t=arguments.length<2?void 0:tqt(arguments[1]);return _Se(Y2t(e),t)}})});var bSe=I(()=>{"use strict";var rqt=te(),wSe=Lc(),nqt=Rt(),iqt=wSe.get,oqt=wSe.toKey;rqt({target:"Reflect",stat:!0},{getOwnMetadata:function(e,t){var n=arguments.length<3?void 0:oqt(arguments[2]);return iqt(e,nqt(t),n)}})});var ESe=I(()=>{"use strict";var aqt=te(),SSe=Lc(),sqt=Rt(),lqt=SSe.keys,uqt=SSe.toKey;aqt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(e){var t=arguments.length<2?void 0:uqt(arguments[1]);return lqt(sqt(e),t)}})});var ASe=I(()=>{"use strict";var cqt=te(),TSe=Lc(),fqt=Rt(),hqt=to(),pqt=TSe.has,dqt=TSe.toKey,ISe=function(r,e,t){var n=pqt(r,e,t);if(n)return!0;var i=hqt(e);return i!==null?ISe(r,i,t):!1};cqt({target:"Reflect",stat:!0},{hasMetadata:function(e,t){var n=arguments.length<3?void 0:dqt(arguments[2]);return ISe(e,fqt(t),n)}})});var MSe=I(()=>{"use strict";var mqt=te(),CSe=Lc(),vqt=Rt(),gqt=CSe.has,yqt=CSe.toKey;mqt({target:"Reflect",stat:!0},{hasOwnMetadata:function(e,t){var n=arguments.length<3?void 0:yqt(arguments[2]);return gqt(e,vqt(t),n)}})});var PSe=I(()=>{"use strict";var _qt=te(),RSe=Lc(),xqt=Rt(),wqt=RSe.toKey,bqt=RSe.set;_qt({target:"Reflect",stat:!0},{metadata:function(e,t){return function(i,o){bqt(e,t,xqt(i),wqt(o))}}})});var Z1=I((YTr,OSe)=>{"use strict";var Sqt=TypeError;OSe.exports=function(r){if(typeof r=="string")return r;throw new Sqt("Argument is not a string")}});var FSe=I(()=>{"use strict";var Eqt=te(),Y1=rt(),Tqt=Z1(),Iqt=Lr(),LSe=Yb().start,Aqt=$m(),Cqt=Array,DSe=RegExp.escape,NSe=Y1("".charAt),_G=Y1("".charCodeAt),Mqt=Y1(1.1.toString),Rqt=Y1([].join),kSe=/^[0-9a-z]/i,Pqt=/^[$()*+./?[\\\]^{|}]/,Oqt=RegExp("^[!\"#%&',\\-:;<=>@`~"+Aqt+"]"),gG=Y1(kSe.exec),qSe={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},yG=function(r){var e=Mqt(_G(r,0),16);return e.length<3?"\\x"+LSe(e,2,"0"):"\\u"+LSe(e,4,"0")},Lqt=!DSe||DSe("ab")!=="\\x61b";Eqt({target:"RegExp",stat:!0,forced:Lqt},{escape:function(e){Tqt(e);for(var t=e.length,n=Cqt(t),i=0;i<t;i++){var o=NSe(e,i);if(i===0&&gG(kSe,o))n[i]=yG(o);else if(Iqt(qSe,o))n[i]="\\"+qSe[o];else if(gG(Pqt,o))n[i]="\\"+o;else if(gG(Oqt,o))n[i]=yG(o);else{var a=_G(o,0);(a&63488)!==55296?n[i]=o:a>=56320||i+1>=t||(_G(e,i+1)&64512)!==56320?n[i]=yG(o):(n[i]=o,n[++i]=NSe(e,i))}}return Rqt(n,"")}})});var jSe=I(()=>{"use strict";var Dqt=te(),Nqt=Ko(),qqt=No().add;Dqt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=Nqt(this),t=0,n=arguments.length;t<n;t++)qqt(e,arguments[t]);return e}})});var zSe=I(()=>{"use strict";var kqt=te(),Fqt=Ko(),jqt=No().remove;kqt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=Fqt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=jqt(e,arguments[i]),t=t&&n;return!!t}})});var BSe=I(()=>{"use strict";S3()});var VSe=I((iIr,USe)=>{"use strict";var zqt=bs(),Bqt=Lr(),Uqt=Ji(),Vqt=fr(),Gqt=zm(),$qt=Vqt("iterator"),Hqt=Object;USe.exports=function(r){if(Uqt(r))return!1;var e=Hqt(r);return e[$qt]!==void 0||"@@iterator"in e||Bqt(Gqt,zqt(e))}});var ed=I((oIr,$Se)=>{"use strict";var Wqt=_r(),GSe=Rr(),Zqt=VSe(),Yqt=xr(),Kqt=Wqt("Set"),Xqt=function(r){return Yqt(r)&&typeof r.size=="number"&&GSe(r.has)&&GSe(r.keys)};$Se.exports=function(r){return Xqt(r)?r:Zqt(r)?new Kqt(r):r}});var HSe=I(()=>{"use strict";var Jqt=te(),Qqt=Ot(),ekt=ed(),tkt=b3();Jqt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return Qqt(tkt,this,ekt(e))}})});var WSe=I(()=>{"use strict";var rkt=te(),nkt=Fn(),ikt=Ko(),okt=Is();rkt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=ikt(this),n=nkt(e,arguments.length>1?arguments[1]:void 0);return okt(t,function(i){if(!n(i,i,t))return!1},!0)!==!1}})});var YSe=I(()=>{"use strict";var akt=te(),skt=Fn(),lkt=Ko(),ZSe=No(),ukt=Is(),ckt=ZSe.Set,fkt=ZSe.add;akt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=lkt(this),n=skt(e,arguments.length>1?arguments[1]:void 0),i=new ckt;return ukt(t,function(o){n(o,o,t)&&fkt(i,o)}),i}})});var KSe=I(()=>{"use strict";var hkt=te(),pkt=Fn(),dkt=Ko(),mkt=Is();hkt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=dkt(this),n=pkt(e,arguments.length>1?arguments[1]:void 0),i=mkt(t,function(o){if(n(o,o,t))return{value:o}},!0);return i&&i.value}})});var JSe=I(()=>{"use strict";var vkt=te(),XSe=No(),gkt=z1();vkt({target:"Set",stat:!0,forced:!0},{from:gkt(XSe.Set,XSe.add,!1)})});var QSe=I(()=>{"use strict";I3()});var eEe=I(()=>{"use strict";var ykt=te(),_kt=Ot(),xkt=ed(),wkt=T3();ykt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return _kt(wkt,this,xkt(e))}})});var tEe=I(()=>{"use strict";C3()});var rEe=I(()=>{"use strict";var bkt=te(),Skt=Ot(),Ekt=ed(),Tkt=A3();bkt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return Skt(Tkt,this,Ekt(e))}})});var nEe=I(()=>{"use strict";R3()});var iEe=I(()=>{"use strict";var Ikt=te(),Akt=Ot(),Ckt=ed(),Mkt=M3();Ikt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return Akt(Mkt,this,Ckt(e))}})});var oEe=I(()=>{"use strict";O3()});var aEe=I(()=>{"use strict";var Rkt=te(),Pkt=Ot(),Okt=ed(),Lkt=P3();Rkt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return Pkt(Lkt,this,Okt(e))}})});var lEe=I(()=>{"use strict";var Dkt=te(),sEe=rt(),Nkt=Ko(),qkt=Is(),kkt=br(),Fkt=sEe([].join),jkt=sEe([].push);Dkt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=Nkt(this),n=e===void 0?",":kkt(e),i=[];return qkt(t,function(o){jkt(i,o)}),Fkt(i,n)}})});var cEe=I(()=>{"use strict";var zkt=te(),Bkt=Fn(),Ukt=Ko(),uEe=No(),Vkt=Is(),Gkt=uEe.Set,$kt=uEe.add;zkt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=Ukt(this),n=Bkt(e,arguments.length>1?arguments[1]:void 0),i=new Gkt;return Vkt(t,function(o){$kt(i,n(o,o,t))}),i}})});var hEe=I(()=>{"use strict";var Hkt=te(),fEe=No(),Wkt=B1();Hkt({target:"Set",stat:!0,forced:!0},{of:Wkt(fEe.Set,fEe.add,!1)})});var pEe=I(()=>{"use strict";var Zkt=te(),Ykt=gr(),Kkt=Ko(),Xkt=Is(),Jkt=TypeError;Zkt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=Kkt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(Ykt(e),Xkt(t,function(o){n?(n=!1,i=o):i=e(i,o,o,t)}),n)throw new Jkt("Reduce of empty set with no initial value");return i}})});var dEe=I(()=>{"use strict";var Qkt=te(),eFt=Fn(),tFt=Ko(),rFt=Is();Qkt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=tFt(this),n=eFt(e,arguments.length>1?arguments[1]:void 0);return rFt(t,function(i){if(n(i,i,t))return!0},!0)===!0}})});var mEe=I(()=>{"use strict";N3()});var vEe=I(()=>{"use strict";var nFt=te(),iFt=Ot(),oFt=ed(),aFt=D3();nFt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return iFt(aFt,this,oFt(e))}})});var gEe=I(()=>{"use strict";k3()});var yEe=I(()=>{"use strict";var sFt=te(),lFt=Ot(),uFt=ed(),cFt=q3();sFt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return lFt(cFt,this,uFt(e))}})});var _Ee=I(()=>{"use strict";var fFt=te(),hFt=Xm().charAt,pFt=Qn(),dFt=ni(),mFt=br();fFt({target:"String",proto:!0,forced:!0},{at:function(e){var t=mFt(pFt(this)),n=t.length,i=dFt(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:hFt(t,o)}})});var xG=I((JIr,SEe)=>{"use strict";var bEe=rt(),vFt=Qi(),xEe=br(),gFt=Xr(),yFt=TypeError,wEe=bEe([].push),_Ft=bEe([].join);SEe.exports=function(e){var t=vFt(e),n=gFt(t);if(!n)return"";for(var i=arguments.length,o=[],a=0;;){var u=t[a++];if(u===void 0)throw new yFt("Incorrect template");if(wEe(o,xEe(u)),a===n)return _Ft(o,"");a<i&&wEe(o,xEe(arguments[a]))}}});var EEe=I(()=>{"use strict";var xFt=te(),wFt=xG();xFt({target:"String",stat:!0,forced:!0},{cooked:wFt})});var MEe=I(()=>{"use strict";var bFt=te(),SFt=kp(),TEe=Do(),EFt=Qn(),TFt=br(),IEe=yn(),AEe=Xm(),IFt=AEe.codeAt,AFt=AEe.charAt,CEe="String Iterator",CFt=IEe.set,MFt=IEe.getterFor(CEe),RFt=SFt(function(e){CFt(this,{type:CEe,string:e,index:0})},"String",function(){var e=MFt(this),t=e.string,n=e.index,i;return n>=t.length?TEe(void 0,!0):(i=AFt(t,n),e.index+=i.length,TEe({codePoint:IFt(i,0),position:n},!1))});bFt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new RFt(TFt(EFt(this)))}})});var Wf=I((nAr,REe)=>{"use strict";var QR=rt(),eP=WeakMap.prototype;REe.exports={WeakMap,set:QR(eP.set),get:QR(eP.get),has:QR(eP.has),remove:QR(eP.delete)}});var jEe=I((iAr,FEe)=>{"use strict";var PFt=_r(),tP=rt(),OFt=String.fromCharCode,LFt=PFt("String","fromCodePoint"),wG=tP("".charAt),qEe=tP("".charCodeAt),PEe=tP("".indexOf),OEe=tP("".slice),SG=48,kEe=57,LEe=97,DFt=102,DEe=65,NFt=70,NEe=function(r,e){var t=qEe(r,e);return t>=SG&&t<=kEe},bG=function(r,e,t){if(t>=r.length)return-1;for(var n=0;e<t;e++){var i=qFt(qEe(r,e));if(i===-1)return-1;n=n*16+i}return n},qFt=function(r){return r>=SG&&r<=kEe?r-SG:r>=LEe&&r<=DFt?r-LEe+10:r>=DEe&&r<=NFt?r-DEe+10:-1};FEe.exports=function(r){for(var e="",t=0,n=0,i;(n=PEe(r,"\\",n))>-1;){if(e+=OEe(r,t,n),++n===r.length)return;var o=wG(r,n++);switch(o){case"b":e+="\b";break;case"t":e+="\t";break;case"n":e+=`
`;break;case"v":e+="\x0B";break;case"f":e+="\f";break;case"r":e+="\r";break;case"\r":n<r.length&&wG(r,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(NEe(r,n))return;e+="\0";break;case"x":if(i=bG(r,n,n+2),i===-1)return;n+=2,e+=OFt(i);break;case"u":if(n<r.length&&wG(r,n)==="{"){var a=PEe(r,"}",++n);if(a===-1)return;i=bG(r,n,a),n=a+1}else i=bG(r,n,n+4),n+=4;if(i===-1||i>1114111)return;e+=LFt(i);break;default:if(NEe(o,0))return;e+=o;}t=n}return e+OEe(r,t)}});var YEe=I(()=>{"use strict";var kFt=Gf(),FFt=te(),jFt=Tb(),rP=rt(),GEe=_a(),$Ee=Rt(),zFt=Br(),BFt=Rr(),UFt=Xr(),VFt=Yn().f,GFt=Ss(),nP=Wf(),$Ft=xG(),HFt=jEe(),HEe=$m(),EG=new nP.WeakMap,WFt=nP.get,ZFt=nP.has,YFt=nP.set,TG=Array,K1=TypeError,zEe=Object.freeze||Object,KFt=Object.isFrozen,XFt=Math.min,BEe=rP("".charAt),WEe=rP("".slice),JFt=rP("".split),UEe=rP(/./.exec),QFt=/([\n\u2028\u2029]|\r\n?)/g,ejt=RegExp("^["+HEe+"]*"),tjt=RegExp("[^"+HEe+"]"),VEe="Invalid tag",rjt="Invalid opening line",njt="Invalid closing line",ijt=function(r){var e=r.raw;if(kFt&&!KFt(e))throw new K1("Raw template should be frozen");if(ZFt(EG,e))return WFt(EG,e);var t=ojt(e),n=sjt(t);return VFt(n,"raw",{value:zEe(t)}),zEe(n),YFt(EG,e,n),n},ojt=function(r){var e=zFt(r),t=UFt(e),n=TG(t),i=TG(t),o=0,a,u,h,d;if(!t)throw new K1(VEe);for(;o<t;o++){var v=e[o];if(typeof v=="string")n[o]=JFt(v,QFt);else throw new K1(VEe)}for(o=0;o<t;o++){var x=o+1===t;if(a=n[o],o===0){if(a.length===1||a[0].length>0)throw new K1(rjt);a[1]=""}if(x){if(a.length===1||UEe(tjt,a[a.length-1]))throw new K1(njt);a[a.length-2]="",a[a.length-1]=""}for(var S=2;S<a.length;S+=2){var A=a[S],L=S+1===a.length&&!x,q=UEe(ejt,A)[0];if(!L&&q.length===A.length){a[S]="";continue}u=ajt(q,u)}}var R=u?u.length:0;for(o=0;o<t;o++){for(a=n[o],h=a[0],d=1;d<a.length;d+=2)h+=a[d]+WEe(a[d+1],R);i[o]=h}return i},ajt=function(r,e){if(e===void 0||r===e)return r;for(var t=0,n=XFt(r.length,e.length);t<n&&BEe(r,t)===BEe(e,t);t++);return WEe(r,0,t)},sjt=function(r){for(var e=0,t=r.length,n=TG(t);e<t;e++)n[e]=HFt(r[e]);return n},ZEe=function(r){return jFt(function(e){var t=GFt(arguments);return t[0]=ijt($Ee(e)),GEe(r,this,t)},"")},ljt=ZEe($Ft);FFt({target:"String",stat:!0,forced:!0},{dedent:function(e){return $Ee(e),BFt(e)?ZEe(e):GEe(ljt,this,arguments)}})});var KEe=I(()=>{"use strict";z3()});var XEe=I(()=>{"use strict";Z3()});var JEe=I(()=>{"use strict";iV()});var QEe=I(()=>{"use strict";fV()});var eTe=I(()=>{"use strict";var ujt=At(),cjt=_i(),fjt=Yn().f,hjt=Oo().f,IG=ujt.Symbol;cjt("asyncDispose");IG&&(X1=hjt(IG,"asyncDispose"),X1.enumerable&&X1.configurable&&X1.writable&&fjt(IG,"asyncDispose",{value:X1.value,enumerable:!1,configurable:!1,writable:!1}));var X1});var tTe=I(()=>{"use strict";var pjt=_i();pjt("customMatcher")});var rTe=I(()=>{"use strict";var djt=At(),mjt=_i(),vjt=Yn().f,gjt=Oo().f,AG=djt.Symbol;mjt("dispose");AG&&(J1=gjt(AG,"dispose"),J1.enumerable&&J1.configurable&&J1.writable&&vjt(AG,"dispose",{value:J1.value,enumerable:!1,configurable:!1,writable:!1}));var J1});var MG=I((wAr,nTe)=>{"use strict";var yjt=_r(),_jt=rt(),CG=yjt("Symbol"),xjt=CG.keyFor,wjt=_jt(CG.prototype.valueOf);nTe.exports=CG.isRegisteredSymbol||function(e){try{return xjt(wjt(e))!==void 0}catch(t){return!1}}});var iTe=I(()=>{"use strict";var bjt=te(),Sjt=MG();bjt({target:"Symbol",stat:!0},{isRegisteredSymbol:Sjt})});var oTe=I(()=>{"use strict";var Ejt=te(),Tjt=MG();Ejt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Tjt})});var OG=I((IAr,fTe)=>{"use strict";var Ijt=Lf(),uTe=_r(),Ajt=rt(),Cjt=Of(),Mjt=fr(),oP=uTe("Symbol"),aTe=oP.isWellKnownSymbol,cTe=uTe("Object","getOwnPropertyNames"),Rjt=Ajt(oP.prototype.valueOf),sTe=Ijt("wks");for(iP=0,RG=cTe(oP),lTe=RG.length;iP<lTe;iP++)try{PG=RG[iP],Cjt(oP[PG])&&Mjt(PG)}catch(r){}var PG,iP,RG,lTe;fTe.exports=function(e){if(aTe&&aTe(e))return!0;try{for(var t=Rjt(e),n=0,i=cTe(sTe),o=i.length;n<o;n++)if(sTe[i[n]]==t)return!0}catch(a){}return!1}});var hTe=I(()=>{"use strict";var Pjt=te(),Ojt=OG();Pjt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Ojt})});var pTe=I(()=>{"use strict";var Ljt=te(),Djt=OG();Ljt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Djt})});var dTe=I(()=>{"use strict";var Njt=_i();Njt("matcher")});var mTe=I(()=>{"use strict";var qjt=_i();qjt("metadata")});var vTe=I(()=>{"use strict";var kjt=_i();kjt("metadataKey")});var gTe=I(()=>{"use strict";var Fjt=_i();Fjt("observable")});var yTe=I(()=>{"use strict";var jjt=_i();jjt("patternMatch")});var _Te=I(()=>{"use strict";var zjt=_i();zjt("replaceAll")});var wTe=I(()=>{"use strict";var Bjt=_r(),Ujt=l1(),Vjt=n5(),xTe=kr(),Gjt=jf(),$jt=xTe.aTypedArrayConstructor,Hjt=xTe.exportTypedArrayStaticMethod;Hjt("fromAsync",function(e){var t=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(Bjt("Promise"))(function(a){Ujt(t),a(Vjt(e,i,o))}).then(function(a){return Gjt($jt(t),a)})},!0)});var bTe=I(()=>{"use strict";IV()});var ETe=I(()=>{"use strict";var STe=kr(),Wjt=Bi().filterReject,Zjt=aR(),Yjt=STe.aTypedArray,Kjt=STe.exportTypedArrayMethod;Kjt("filterOut",function(e){var t=Wjt(Yjt(this),e,arguments.length>1?arguments[1]:void 0);return Zjt(this,t)},!0)});var ITe=I(()=>{"use strict";var TTe=kr(),Xjt=Bi().filterReject,Jjt=aR(),Qjt=TTe.aTypedArray,ezt=TTe.exportTypedArrayMethod;ezt("filterReject",function(e){var t=Xjt(Qjt(this),e,arguments.length>1?arguments[1]:void 0);return Jjt(this,t)},!0)});var ATe=I(()=>{"use strict";AV()});var CTe=I(()=>{"use strict";CV()});var MTe=I(()=>{"use strict";var LG=kr(),tzt=TR(),rzt=LG.aTypedArray,nzt=LG.getTypedArrayConstructor,izt=LG.exportTypedArrayMethod;izt("groupBy",function(e){var t=arguments.length>1?arguments[1]:void 0;return tzt(rzt(this),e,t,nzt)},!0)});var RTe=I(()=>{"use strict";UV()});var PTe=I(()=>{"use strict";VV()});var OTe=I(()=>{"use strict";var DG=kr(),ozt=Xr(),azt=tR(),szt=Du(),lzt=S1(),uzt=ni(),czt=ut(),fzt=DG.aTypedArray,hzt=DG.getTypedArrayConstructor,pzt=DG.exportTypedArrayMethod,dzt=Math.max,mzt=Math.min,vzt=!czt(function(){var r=new Int8Array([1]),e=r.toSpliced(1,0,{valueOf:function(){return r[0]=2,3}});return e[0]!==2||e[1]!==3});pzt("toSpliced",function(e,t){var n=fzt(this),i=hzt(n),o=ozt(n),a=szt(e,o),u=arguments.length,h=0,d,v,x,S,A,L,q;if(u===0)d=v=0;else if(u===1)d=0,v=o-a;else if(v=mzt(dzt(uzt(t),0),o-a),d=u-2,d){S=new i(d),x=azt(S);for(var R=2;R<u;R++)A=arguments[R],S[R-2]=x?lzt(A):+A}for(L=o+d-v,q=new i(L);h<a;h++)q[h]=n[h];for(;h<a+d;h++)q[h]=S[h-a];for(;h<L;h++)q[h]=n[h+v-d];return q},!vzt)});var LTe=I(()=>{"use strict";var gzt=rt(),NG=kr(),yzt=jf(),_zt=AR(),xzt=NG.aTypedArray,wzt=NG.getTypedArrayConstructor,bzt=NG.exportTypedArrayMethod,Szt=gzt(_zt);bzt("uniqueBy",function(e){return xzt(this),yzt(wzt(this),Szt(this,e))},!0)});var DTe=I(()=>{"use strict";$V()});var qG=I((pCr,NTe)=>{"use strict";var Ezt=xr(),Tzt=String,Izt=TypeError;NTe.exports=function(r){if(r===void 0||Ezt(r))return r;throw new Izt(Tzt(r)+" is not an object or undefined")}});var Q1=I((dCr,zTe)=>{"use strict";var jTe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",qTe=jTe+"+/",kTe=jTe+"-_",FTe=function(r){for(var e={},t=0;t<64;t++)e[r.charAt(t)]=t;return e};zTe.exports={i2c:qTe,c2i:FTe(qTe),i2cUrl:kTe,c2iUrl:FTe(kTe)}});var kG=I((mCr,BTe)=>{"use strict";var Azt=TypeError;BTe.exports=function(r){var e=r&&r.alphabet;if(e===void 0||e==="base64"||e==="base64url")return e||"base64";throw new Azt("Incorrect `alphabet` option")}});var BG=I((vCr,GTe)=>{"use strict";var UTe=At(),Czt=rt(),Mzt=qG(),Rzt=Z1(),Pzt=Lr(),VTe=Q1(),Ozt=kG(),Lzt=Dy(),Dzt=VTe.c2i,Nzt=VTe.c2iUrl,td=UTe.SyntaxError,qzt=UTe.TypeError,nv=Czt("".charAt),FG=function(r,e){for(var t=r.length;e<t;e++){var n=nv(r,e);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return e},jG=function(r,e,t){var n=r.length;n<4&&(r+=n===2?"AA":"A");var i=(e[nv(r,0)]<<18)+(e[nv(r,1)]<<12)+(e[nv(r,2)]<<6)+e[nv(r,3)],o=[i>>16&255,i>>8&255,i&255];if(n===2){if(t&&o[1]!==0)throw new td("Extra bits");return[o[0]]}if(n===3){if(t&&o[2]!==0)throw new td("Extra bits");return[o[0],o[1]]}return o},zG=function(r,e,t){for(var n=e.length,i=0;i<n;i++)r[t+i]=e[i];return t+n};GTe.exports=function(r,e,t,n){Rzt(r),Mzt(e);var i=Ozt(e)==="base64"?Dzt:Nzt,o=e?e.lastChunkHandling:void 0;if(o===void 0&&(o="loose"),o!=="loose"&&o!=="strict"&&o!=="stop-before-partial")throw new qzt("Incorrect `lastChunkHandling` option");t&&Lzt(t.buffer);var a=t||[],u=0,h=0,d="",v=0;if(n)for(;;){if(v=FG(r,v),v===r.length){if(d.length>0){if(o==="stop-before-partial")break;if(o==="loose"){if(d.length===1)throw new td("Malformed padding: exactly one additional character");u=zG(a,jG(d,i,!1),u)}else throw new td("Missing padding")}h=r.length;break}var x=nv(r,v);if(++v,x==="="){if(d.length<2)throw new td("Padding is too early");if(v=FG(r,v),d.length===2){if(v===r.length){if(o==="stop-before-partial")break;throw new td("Malformed padding: only one =")}nv(r,v)==="="&&(++v,v=FG(r,v))}if(v<r.length)throw new td("Unexpected character after padding");u=zG(a,jG(d,i,o==="strict"),u),h=r.length;break}if(!Pzt(i,x))throw new td("Unexpected character");var S=n-u;if(S===1&&d.length===2||S===2&&d.length===3||(d+=x,d.length===4&&(u=zG(a,jG(d,i,!1),u),d="",h=v,u===n)))break}return{bytes:a,read:h,written:u}}});var HTe=I(()=>{"use strict";var kzt=te(),Fzt=At(),jzt=jf(),zzt=BG(),$Te=Fzt.Uint8Array;$Te&&kzt({target:"Uint8Array",stat:!0},{fromBase64:function(e){var t=zzt(e,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return jzt($Te,t.bytes)}})});var VG=I((_Cr,KTe)=>{"use strict";var UG=At(),ZTe=rt(),Bzt=UG.Uint8Array,WTe=UG.SyntaxError,Uzt=UG.parseInt,Vzt=Math.min,YTe=/[^\da-f]/i,Gzt=ZTe(YTe.exec),$zt=ZTe("".slice);KTe.exports=function(r,e){var t=r.length;if(t%2!==0)throw new WTe("String should be an even number of characters");for(var n=e?Vzt(e.length,t/2):t/2,i=e||new Bzt(n),o=0,a=0;a<n;){var u=$zt(r,o,o+=2);if(Gzt(YTe,u))throw new WTe("String should only contain hex characters");i[a++]=Uzt(u,16)}return{bytes:i,read:o}}});var XTe=I(()=>{"use strict";var Hzt=te(),Wzt=At(),Zzt=Z1(),Yzt=VG();Wzt.Uint8Array&&Hzt({target:"Uint8Array",stat:!0},{fromHex:function(e){return Yzt(Zzt(e)).bytes}})});var eS=I((bCr,JTe)=>{"use strict";var Kzt=bs(),Xzt=TypeError;JTe.exports=function(r){if(Kzt(r)==="Uint8Array")return r;throw new Xzt("Argument is not an Uint8Array")}});var QTe=I(()=>{"use strict";var Jzt=te(),Qzt=At(),e4t=BG(),t4t=eS(),r4t=Qzt.Uint8Array;r4t&&Jzt({target:"Uint8Array",proto:!0},{setFromBase64:function(e){t4t(this);var t=e4t(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:t.read,written:t.written}}})});var eIe=I(()=>{"use strict";var n4t=te(),i4t=At(),o4t=Z1(),a4t=eS(),s4t=Dy(),l4t=VG();i4t.Uint8Array&&n4t({target:"Uint8Array",proto:!0},{setFromHex:function(e){a4t(this),o4t(e),s4t(this.buffer);var t=l4t(e,this).read;return{read:t,written:t/2}}})});var rIe=I(()=>{"use strict";var u4t=te(),c4t=At(),f4t=rt(),h4t=qG(),p4t=eS(),d4t=Dy(),tIe=Q1(),m4t=kG(),v4t=tIe.i2c,g4t=tIe.i2cUrl,y4t=f4t("".charAt);c4t.Uint8Array&&u4t({target:"Uint8Array",proto:!0},{toBase64:function(){var e=p4t(this),t=arguments.length?h4t(arguments[0]):void 0,n=m4t(t)==="base64"?v4t:g4t,i=!!t&&!!t.omitPadding;d4t(this.buffer);for(var o="",a=0,u=e.length,h,d=function(v){return y4t(n,h>>6*v&63)};a+2<u;a+=3)h=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o+=d(3)+d(2)+d(1)+d(0);return a+2===u?(h=(e[a]<<16)+(e[a+1]<<8),o+=d(3)+d(2)+d(1)+(i?"":"=")):a+1===u&&(h=e[a]<<16,o+=d(3)+d(2)+(i?"":"==")),o}})});var nIe=I(()=>{"use strict";var _4t=te(),x4t=At(),w4t=rt(),b4t=eS(),S4t=Dy(),E4t=w4t(1 .toString);x4t.Uint8Array&&_4t({target:"Uint8Array",proto:!0},{toHex:function(){b4t(this),S4t(this.buffer);for(var e="",t=0,n=this.length;t<n;t++){var i=E4t(this[t],16);e+=i.length===1?"0"+i:i}return e}})});var tS=I((PCr,iIe)=>{"use strict";var T4t=Wf().has;iIe.exports=function(r){return T4t(r),r}});var oIe=I(()=>{"use strict";var I4t=te(),A4t=tS(),C4t=Wf().remove;I4t({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=A4t(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=C4t(e,arguments[i]),t=t&&n;return!!t}})});var sIe=I(()=>{"use strict";var M4t=te(),aIe=Wf(),R4t=z1();M4t({target:"WeakMap",stat:!0,forced:!0},{from:R4t(aIe.WeakMap,aIe.set,!0)})});var uIe=I(()=>{"use strict";var P4t=te(),lIe=Wf(),O4t=B1();P4t({target:"WeakMap",stat:!0,forced:!0},{of:O4t(lIe.WeakMap,lIe.set,!0)})});var fIe=I(()=>{"use strict";var L4t=te(),D4t=tS(),GG=Wf(),N4t=GG.get,q4t=GG.has,cIe=GG.set;L4t({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(e,t){var n=D4t(this),i,o;return q4t(n,e)?(i=N4t(n,e),"update"in t&&(i=t.update(i,e,n),cIe(n,e,i)),i):(o=t.insert(e,n),cIe(n,e,o),o)}})});var hIe=I(()=>{"use strict";var k4t=te(),F4t=tS(),$G=Wf(),j4t=$G.get,z4t=$G.has,B4t=$G.set;k4t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(e,t){return z4t(F4t(this),e)?j4t(this,e):(B4t(this,e,t),t)}})});var dIe=I(()=>{"use strict";var U4t=te(),V4t=gr(),G4t=tS(),HG=Wf(),$4t=HG.get,H4t=HG.has,pIe=HG.set;U4t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(e,t){if(G4t(this),V4t(t),H4t(this,e))return $4t(this,e);pIe(this,e);var n=t(e);return pIe(this,e,n),n}})});var mIe=I(()=>{"use strict";var W4t=te(),Z4t=$R();W4t({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Z4t})});var f_=I((HCr,vIe)=>{"use strict";var WG=rt(),ZG=WeakSet.prototype;vIe.exports={WeakSet,add:WG(ZG.add),has:WG(ZG.has),remove:WG(ZG.delete)}});var YG=I((WCr,gIe)=>{"use strict";var Y4t=f_().has;gIe.exports=function(r){return Y4t(r),r}});var yIe=I(()=>{"use strict";var K4t=te(),X4t=YG(),J4t=f_().add;K4t({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=X4t(this),t=0,n=arguments.length;t<n;t++)J4t(e,arguments[t]);return e}})});var _Ie=I(()=>{"use strict";var Q4t=te(),eBt=YG(),tBt=f_().remove;Q4t({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=eBt(this),t=!0,n,i=0,o=arguments.length;i<o;i++)n=tBt(e,arguments[i]),t=t&&n;return!!t}})});var wIe=I(()=>{"use strict";var rBt=te(),xIe=f_(),nBt=z1();rBt({target:"WeakSet",stat:!0,forced:!0},{from:nBt(xIe.WeakSet,xIe.add,!1)})});var SIe=I(()=>{"use strict";var iBt=te(),bIe=f_(),oBt=B1();iBt({target:"WeakSet",stat:!0,forced:!0},{of:oBt(bIe.WeakSet,bIe.add,!1)})});var RIe=I(()=>{"use strict";var aBt=te(),sBt=At(),IIe=_r(),KG=rt(),lBt=Ot(),aP=ut(),uBt=br(),cBt=ll(),EIe=Q1().c2i,AIe=/[^\d+/a-z]/i,fBt=/[\t\n\f\r ]+/g,hBt=/[=]{1,2}$/,iv=IIe("atob"),pBt=String.fromCharCode,dBt=KG("".charAt),TIe=KG("".replace),mBt=KG(AIe.exec),h_=!!iv&&!aP(function(){return iv("aGk=")!=="hi"}),CIe=h_&&aP(function(){return iv(" ")!==""}),MIe=h_&&!aP(function(){iv("a")}),vBt=h_&&!aP(function(){iv()}),gBt=h_&&iv.length!==1,yBt=!h_||CIe||MIe||vBt||gBt;aBt({global:!0,bind:!0,enumerable:!0,forced:yBt},{atob:function(e){if(cBt(arguments.length,1),h_&&!CIe&&!MIe)return lBt(iv,sBt,e);var t=TIe(uBt(e),fBt,""),n="",i=0,o=0,a,u,h;if(t.length%4===0&&(t=TIe(t,hBt,"")),a=t.length,a%4===1||mBt(AIe,t))throw new(IIe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;i<a;)u=dBt(t,i++),h=o%4?h*64+EIe[u]:EIe[u],o++%4&&(n+=pBt(255&h>>(-2*o&6)));return n}})});var NIe=I(()=>{"use strict";var _Bt=te(),xBt=At(),LIe=_r(),DIe=rt(),wBt=Ot(),XG=ut(),PIe=br(),bBt=ll(),SBt=Q1().i2c,p_=LIe("btoa"),OIe=DIe("".charAt),EBt=DIe("".charCodeAt),rS=!!p_&&!XG(function(){return p_("hi")!=="aGk="}),TBt=rS&&!XG(function(){p_()}),IBt=rS&&XG(function(){return p_(null)!=="bnVsbA=="}),ABt=rS&&p_.length!==1;_Bt({global:!0,bind:!0,enumerable:!0,forced:!rS||TBt||IBt||ABt},{btoa:function(e){if(bBt(arguments.length,1),rS)return wBt(p_,xBt,PIe(e));for(var t=PIe(e),n="",i=0,o=SBt,a,u;OIe(t,i)||(o="=",i%1);){if(u=EBt(t,i+=3/4),u>255)throw new(LIe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a=a<<8|u,n+=OIe(o,63&a>>8-i%1*8)}return n}})});var JG=I((aMr,qIe)=>{"use strict";qIe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var e$=I((sMr,FIe)=>{"use strict";var CBt=wb(),QG=CBt("span").classList,kIe=QG&&QG.constructor&&QG.constructor.prototype;FIe.exports=kIe===Object.prototype?void 0:kIe});var UIe=I(()=>{"use strict";var jIe=At(),zIe=JG(),MBt=e$(),t$=e4(),RBt=eo(),BIe=function(r){if(r&&r.forEach!==t$)try{RBt(r,"forEach",t$)}catch(e){r.forEach=t$}};for(sP in zIe)zIe[sP]&&BIe(jIe[sP]&&jIe[sP].prototype);var sP;BIe(MBt)});var WIe=I(()=>{"use strict";var VIe=At(),$Ie=JG(),PBt=e$(),nS=Bb(),GIe=eo(),OBt=Wa(),LBt=fr(),r$=LBt("iterator"),n$=nS.values,HIe=function(r,e){if(r){if(r[r$]!==n$)try{GIe(r,r$,n$)}catch(n){r[r$]=n$}if(OBt(r,e,!0),$Ie[e]){for(var t in nS)if(r[t]!==nS[t])try{GIe(r,t,nS[t])}catch(n){r[t]=nS[t]}}}};for(lP in $Ie)HIe(VIe[lP]&&VIe[lP].prototype,lP);var lP;HIe(PBt,"DOMTokenList")});var i$=I((hMr,ZIe)=>{"use strict";ZIe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var oAe=I(()=>{"use strict";var DBt=te(),fP=_r(),NBt=$4(),c$=ut(),qBt=zi(),f$=xs(),hP=Yn().f,kBt=Tn(),uP=ii(),cP=Lr(),FBt=xa(),jBt=Rt(),XIe=kz(),YIe=Fm(),d_=i$(),zBt=NC(),JIe=yn(),h$=sr(),QIe=zr(),m_="DOMException",u$="DATA_CLONE_ERR",dP=fP("Error"),Zf=fP(m_)||function(){try{var r=fP("MessageChannel")||NBt("worker_threads").MessageChannel;new r().port1.postMessage(new WeakMap)}catch(e){if(e.name===u$&&e.code===25)return e.constructor}}(),BBt=Zf&&Zf.prototype,eAe=dP.prototype,UBt=JIe.set,VBt=JIe.getterFor(m_),GBt="stack"in new dP(m_),tAe=function(r){return cP(d_,r)&&d_[r].m?d_[r].c:0},p$=function(){FBt(this,oS);var e=arguments.length,t=YIe(e<1?void 0:arguments[0]),n=YIe(e<2?void 0:arguments[1],"Error"),i=tAe(n);if(UBt(this,{type:m_,name:n,message:t,code:i}),h$||(this.name=n,this.message=t,this.code=i),GBt){var o=new dP(t);o.name=m_,hP(this,"stack",f$(1,zBt(o.stack,1)))}},oS=p$.prototype=qBt(eAe),rAe=function(r){return{enumerable:!0,configurable:!0,get:r}},o$=function(r){return rAe(function(){return VBt(this)[r]})};h$&&(uP(oS,"code",o$("code")),uP(oS,"message",o$("message")),uP(oS,"name",o$("name")));hP(oS,"constructor",f$(1,p$));var mP=c$(function(){return!(new Zf instanceof dP)}),nAe=mP||c$(function(){return eAe.toString!==XIe||String(new Zf(1,2))!=="2: 1"}),iAe=mP||c$(function(){return new Zf(1,"DataCloneError").code!==25}),$Bt=mP||Zf[u$]!==25||BBt[u$]!==25,KIe=QIe?nAe||iAe||$Bt:mP;DBt({global:!0,constructor:!0,forced:KIe},{DOMException:KIe?p$:Zf});var aS=fP(m_),pP=aS.prototype;nAe&&(QIe||Zf===aS)&&kBt(pP,"toString",XIe);iAe&&h$&&Zf===aS&&uP(pP,"code",rAe(function(){return tAe(jBt(this).name)}));for(a$ in d_)cP(d_,a$)&&(s$=d_[a$],iS=s$.s,l$=f$(6,s$.c),cP(aS,iS)||hP(aS,iS,l$),cP(pP,iS)||hP(pP,iS,l$));var s$,iS,l$,a$});var hAe=I(()=>{"use strict";var HBt=te(),WBt=At(),w$=_r(),_$=xs(),x$=Yn().f,aAe=Lr(),ZBt=xa(),YBt=Dp(),sAe=Fm(),d$=i$(),KBt=NC(),XBt=sr(),cAe=zr(),lS="DOMException",fAe=w$("Error"),uS=w$(lS),b$=function(){ZBt(this,JBt);var e=arguments.length,t=sAe(e<1?void 0:arguments[0]),n=sAe(e<2?void 0:arguments[1],"Error"),i=new uS(t,n),o=new fAe(t);return o.name=lS,x$(i,"stack",_$(1,KBt(o.stack,1))),YBt(i,this,b$),i},JBt=b$.prototype=uS.prototype,QBt="stack"in new fAe(lS),eUt="stack"in new uS(1,2),m$=uS&&XBt&&Object.getOwnPropertyDescriptor(WBt,lS),tUt=!!m$&&!(m$.writable&&m$.configurable),lAe=QBt&&!tUt&&!eUt;HBt({global:!0,constructor:!0,forced:cAe||lAe},{DOMException:lAe?b$:uS});var sS=w$(lS),uAe=sS.prototype;if(uAe.constructor!==sS){cAe||x$(uAe,"constructor",_$(1,sS));for(v$ in d$)aAe(d$,v$)&&(g$=d$[v$],y$=g$.s,aAe(sS,y$)||x$(sS,y$,_$(6,g$.c)))}var g$,y$,v$});var dAe=I(()=>{"use strict";var rUt=_r(),nUt=Wa(),pAe="DOMException";nUt(rUt(pAe),pAe)});var vAe=I(()=>{"use strict";var iUt=te(),oUt=At(),mAe=h1().clear;iUt({global:!0,bind:!0,enumerable:!0,forced:oUt.clearImmediate!==mAe},{clearImmediate:mAe})});var vP=I((wMr,yAe)=>{"use strict";var gAe=At(),aUt=_a(),sUt=Rr(),lUt=Gb(),uUt=Pu(),cUt=Ss(),fUt=ll(),hUt=gAe.Function,pUt=/MSIE .\./.test(uUt)||lUt==="BUN"&&function(){var r=gAe.Bun.version.split(".");return r.length<3||r[0]==="0"&&(r[1]<3||r[1]==="3"&&r[2]==="0")}();yAe.exports=function(r,e){var t=e?2:1;return pUt?function(n,i){var o=fUt(arguments.length,1)>t,a=sUt(n)?n:hUt(n),u=o?cUt(arguments,t):[],h=o?function(){aUt(a,this,u)}:a;return e?r(h,i):r(h)}:r}});var bAe=I(()=>{"use strict";var dUt=te(),wAe=At(),_Ae=h1().set,mUt=vP(),xAe=wAe.setImmediate?mUt(_Ae,!1):_Ae;dUt({global:!0,bind:!0,enumerable:!0,forced:wAe.setImmediate!==xAe},{setImmediate:xAe})});var SAe=I(()=>{"use strict";vAe();bAe()});var EAe=I(()=>{"use strict";var vUt=te(),gUt=At(),yUt=qU(),_Ut=gr(),xUt=ll(),wUt=ut(),bUt=sr(),SUt=wUt(function(){return bUt&&Object.getOwnPropertyDescriptor(gUt,"queueMicrotask").value.length!==1});vUt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:SUt},{queueMicrotask:function(e){xUt(arguments.length,1),yUt(_Ut(e))}})});var IAe=I(()=>{"use strict";var EUt=te(),rd=At(),TUt=ii(),IUt=sr(),AUt=TypeError,CUt=Object.defineProperty,TAe=rd.self!==rd;try{IUt?(gP=Object.getOwnPropertyDescriptor(rd,"self"),(TAe||!gP||!gP.get||!gP.enumerable)&&TUt(rd,"self",{get:function(){return rd},set:function(e){if(this!==rd)throw new AUt("Illegal invocation");CUt(rd,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):EUt({global:!0,simple:!0,forced:TAe},{self:rd})}catch(r){}var gP});var kAe=I(()=>{"use strict";var MUt=zr(),RUt=te(),ea=At(),fS=_r(),pS=rt(),C$=ut(),PUt=Rp(),g_=Rr(),OUt=qu(),LUt=Ji(),bP=xr(),DUt=Of(),NUt=xi(),MAe=Rt(),xP=bs(),qUt=Lr(),kUt=zl(),S$=eo(),yP=Xr(),FUt=ll(),jUt=Wy(),SP=vo(),M$=No(),zUt=Is(),AAe=J4(),BUt=Lz(),R$=dM(),cS=ea.Object,UUt=ea.Array,RAe=ea.Date,PAe=ea.Error,VUt=ea.TypeError,GUt=ea.PerformanceMark,ov=fS("DOMException"),I$=SP.Map,P$=SP.has,OAe=SP.get,wP=SP.set,LAe=M$.Set,DAe=M$.add,$Ut=M$.has,HUt=fS("Object","keys"),WUt=pS([].push),ZUt=pS((!0).valueOf),YUt=pS(1 .valueOf),KUt=pS("".valueOf),XUt=pS(RAe.prototype.getTime),A$=PUt("structuredClone"),hS="DataCloneError",_P="Transferring",NAe=function(r){return!C$(function(){var e=new ea.Set([7]),t=r(e),n=r(cS(7));return t===e||!t.has(7)||!bP(n)||+n!=7})&&r},CAe=function(r,e){return!C$(function(){var t=new e,n=r({a:t,b:t});return!(n&&n.a===n.b&&n.a instanceof e&&n.a.stack===t.stack)})},JUt=function(r){return!C$(function(){var e=r(new ea.AggregateError([1],A$,{cause:3}));return e.name!=="AggregateError"||e.errors[0]!==1||e.message!==A$||e.cause!==3})},v_=ea.structuredClone,QUt=MUt||!CAe(v_,PAe)||!CAe(v_,ov)||!JUt(v_),e3t=!v_&&NAe(function(r){return new GUt(A$,{detail:r}).detail}),Yf=NAe(v_)||e3t,E$=function(r){throw new ov("Uncloneable type: "+r,hS)},Ms=function(r,e){throw new ov((e||"Cloning")+" of "+r+" cannot be properly polyfilled in this engine",hS)},T$=function(r,e){return Yf||Ms(e),Yf(r)},t3t=function(){var r;try{r=new ea.DataTransfer}catch(e){try{r=new ea.ClipboardEvent("").clipboardData}catch(t){}}return r&&r.items&&r.files?r:null},qAe=function(r,e,t){if(P$(e,r))return OAe(e,r);var n=t||xP(r),i,o,a,u,h,d;if(n==="SharedArrayBuffer")Yf?i=Yf(r):i=r;else{var v=ea.DataView;!v&&!g_(r.slice)&&Ms("ArrayBuffer");try{if(g_(r.slice)&&!r.resizable)i=r.slice(0);else for(o=r.byteLength,a=("maxByteLength"in r)?{maxByteLength:r.maxByteLength}:void 0,i=new ArrayBuffer(o,a),u=new v(r),h=new v(i),d=0;d<o;d++)h.setUint8(d,u.getUint8(d))}catch(x){throw new ov("ArrayBuffer is detached",hS)}}return wP(e,r,i),i},r3t=function(r,e,t,n,i){var o=ea[e];return bP(o)||Ms(e),new o(qAe(r.buffer,i),t,n)},Qo=function(r,e){if(DUt(r)&&E$("Symbol"),!bP(r))return r;if(e){if(P$(e,r))return OAe(e,r)}else e=new I$;var t=xP(r),n,i,o,a,u,h,d,v;switch(t){case"Array":o=UUt(yP(r));break;case"Object":o={};break;case"Map":o=new I$;break;case"Set":o=new LAe;break;case"RegExp":o=new RegExp(r.source,jUt(r));break;case"Error":switch(i=r.name,i){case"AggregateError":o=new(fS(i))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":o=new(fS(i));break;case"CompileError":case"LinkError":case"RuntimeError":o=new(fS("WebAssembly",i));break;default:o=new PAe;}break;case"DOMException":o=new ov(r.message,r.name);break;case"ArrayBuffer":case"SharedArrayBuffer":o=qAe(r,e,t);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":h=t==="DataView"?r.byteLength:r.length,o=r3t(r,t,r.byteOffset,h,e);break;case"DOMQuad":try{o=new DOMQuad(Qo(r.p1,e),Qo(r.p2,e),Qo(r.p3,e),Qo(r.p4,e))}catch(x){o=T$(r,t)}break;case"File":if(Yf)try{o=Yf(r),xP(o)!==t&&(o=void 0)}catch(x){}if(!o)try{o=new File([r],r.name,r)}catch(x){}o||Ms(t);break;case"FileList":if(a=t3t(),a){for(u=0,h=yP(r);u<h;u++)a.items.add(Qo(r[u],e));o=a.files}else o=T$(r,t);break;case"ImageData":try{o=new ImageData(Qo(r.data,e),r.width,r.height,{colorSpace:r.colorSpace})}catch(x){o=T$(r,t)}break;default:if(Yf)o=Yf(r);else switch(t){case"BigInt":o=cS(r.valueOf());break;case"Boolean":o=cS(ZUt(r));break;case"Number":o=cS(YUt(r));break;case"String":o=cS(KUt(r));break;case"Date":o=new RAe(XUt(r));break;case"Blob":try{o=r.slice(0,r.size,r.type)}catch(x){Ms(t)}break;case"DOMPoint":case"DOMPointReadOnly":n=ea[t];try{o=n.fromPoint?n.fromPoint(r):new n(r.x,r.y,r.z,r.w)}catch(x){Ms(t)}break;case"DOMRect":case"DOMRectReadOnly":n=ea[t];try{o=n.fromRect?n.fromRect(r):new n(r.x,r.y,r.width,r.height)}catch(x){Ms(t)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=ea[t];try{o=n.fromMatrix?n.fromMatrix(r):new n(r)}catch(x){Ms(t)}break;case"AudioData":case"VideoFrame":g_(r.clone)||Ms(t);try{o=r.clone()}catch(x){E$(t)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Ms(t);default:E$(t);}}switch(wP(e,r,o),t){case"Array":case"Object":for(d=HUt(r),u=0,h=yP(d);u<h;u++)v=d[u],kUt(o,v,Qo(r[v],e));break;case"Map":r.forEach(function(x,S){wP(o,Qo(S,e),Qo(x,e))});break;case"Set":r.forEach(function(x){DAe(o,Qo(x,e))});break;case"Error":S$(o,"message",Qo(r.message,e)),qUt(r,"cause")&&S$(o,"cause",Qo(r.cause,e)),i==="AggregateError"?o.errors=Qo(r.errors,e):i==="SuppressedError"&&(o.error=Qo(r.error,e),o.suppressed=Qo(r.suppressed,e));case"DOMException":BUt&&S$(o,"stack",Qo(r.stack,e));}return o},n3t=function(r,e){if(!bP(r))throw new VUt("Transfer option cannot be converted to a sequence");var t=[];NUt(r,function(S){WUt(t,MAe(S))});for(var n=0,i=yP(t),o=new LAe,a,u,h,d,v,x;n<i;){if(a=t[n++],u=xP(a),u==="ArrayBuffer"?$Ut(o,a):P$(e,a))throw new ov("Duplicate transferable",hS);if(u==="ArrayBuffer"){DAe(o,a);continue}if(R$)d=v_(a,{transfer:[a]});else switch(u){case"ImageBitmap":h=ea.OffscreenCanvas,OUt(h)||Ms(u,_P);try{v=new h(a.width,a.height),x=v.getContext("bitmaprenderer"),x.transferFromImageBitmap(a),d=v.transferToImageBitmap()}catch(S){}break;case"AudioData":case"VideoFrame":(!g_(a.clone)||!g_(a.close))&&Ms(u,_P);try{d=a.clone(),a.close()}catch(S){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Ms(u,_P);}if(d===void 0)throw new ov("This object cannot be transferred: "+u,hS);wP(e,a,d)}return o},i3t=function(r){zUt(r,function(e){R$?Yf(e,{transfer:[e]}):g_(e.transfer)?e.transfer():AAe?AAe(e):Ms("ArrayBuffer",_P)})};RUt({global:!0,enumerable:!0,sham:!R$,forced:QUt},{structuredClone:function(e){var t=FUt(arguments.length,1)>1&&!LUt(arguments[1])?MAe(arguments[1]):void 0,n=t?t.transfer:void 0,i,o;n!==void 0&&(i=new I$,o=n3t(n,i));var a=Qo(e,i);return o&&i3t(o),a}})});var zAe=I(()=>{"use strict";var o3t=te(),jAe=At(),a3t=vP(),FAe=a3t(jAe.setInterval,!0);o3t({global:!0,bind:!0,forced:jAe.setInterval!==FAe},{setInterval:FAe})});var VAe=I(()=>{"use strict";var s3t=te(),UAe=At(),l3t=vP(),BAe=l3t(UAe.setTimeout,!0);s3t({global:!0,bind:!0,forced:UAe.setTimeout!==BAe},{setTimeout:BAe})});var GAe=I(()=>{"use strict";zAe();VAe()});var dS=I((FMr,HAe)=>{"use strict";var u3t=ut(),c3t=fr(),f3t=sr(),$Ae=zr(),h3t=c3t("iterator");HAe.exports=!u3t(function(){var r=new URL("b?a=1&b=2&c=3","https://a"),e=r.searchParams,t=new URLSearchParams("a=1&a=2&b=3"),n="";return r.pathname="c%20d",e.forEach(function(i,o){e.delete("b"),n+=o+i}),t.delete("a",2),t.delete("b",void 0),$Ae&&(!r.toJSON||!t.has("a",1)||t.has("a",2)||!t.has("a",void 0)||t.has("b"))||!e.size&&($Ae||!f3t)||!e.sort||r.href!=="https://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[h3t]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var tCe=I((jMr,eCe)=>{"use strict";var av=rt(),O$=2147483647,mS=36,XAe=1,N$=26,p3t=38,d3t=700,m3t=72,v3t=128,g3t="-",y3t=/[^\0-\u007E]/,JAe=/[.\u3002\uFF0E\uFF61]/g,WAe="Overflow: input needs wider integers to process",L$=mS-XAe,ZAe=RangeError,_3t=av(JAe.exec),y_=Math.floor,D$=String.fromCharCode,YAe=av("".charCodeAt),QAe=av([].join),nd=av([].push),x3t=av("".replace),w3t=av("".split),b3t=av("".toLowerCase),S3t=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=YAe(r,t++);if(i>=55296&&i<=56319&&t<n){var o=YAe(r,t++);(o&64512)===56320?nd(e,((i&1023)<<10)+(o&1023)+65536):(nd(e,i),t--)}else nd(e,i)}return e},KAe=function(r){return r+22+75*(r<26)},E3t=function(r,e,t){var n=0;for(r=t?y_(r/d3t):r>>1,r+=y_(r/e);r>L$*N$>>1;)r=y_(r/L$),n+=mS;return y_(n+(L$+1)*r/(r+p3t))},T3t=function(r){var e=[];r=S3t(r);var t=r.length,n=v3t,i=0,o=m3t,a,u;for(a=0;a<r.length;a++)u=r[a],u<128&&nd(e,D$(u));var h=e.length,d=h;for(h&&nd(e,g3t);d<t;){var v=O$;for(a=0;a<r.length;a++)u=r[a],u>=n&&u<v&&(v=u);var x=d+1;if(v-n>y_((O$-i)/x))throw new ZAe(WAe);for(i+=(v-n)*x,n=v,a=0;a<r.length;a++){if(u=r[a],u<n&&++i>O$)throw new ZAe(WAe);if(u===n){for(var S=i,A=mS;;){var L=A<=o?XAe:A>=o+N$?N$:A-o;if(S<L)break;var q=S-L,R=mS-L;nd(e,D$(KAe(L+q%R))),S=y_(q/R),A+=mS}nd(e,D$(KAe(S))),o=E3t(i,x,d===h),i=0,d++}}i++,n++}return QAe(e,"")};eCe.exports=function(r){var e=[],t=w3t(x3t(b3t(r),JAe,"."),"."),n,i;for(n=0;n<t.length;n++)i=t[n],nd(e,_3t(y3t,i)?"xn--"+T3t(i):i);return QAe(e,".")}});var G$=I((zMr,ECe)=>{"use strict";Bb();j3();var B$=te(),dCe=At(),U$=MU(),I3t=_r(),EP=Ot(),ju=rt(),vS=sr(),mCe=dS(),vCe=Tn(),A3t=ii(),C3t=Ul(),M3t=Wa(),R3t=kp(),V$=yn(),gCe=xa(),q$=Rr(),P3t=Lr(),O3t=Fn(),L3t=bs(),D3t=Rt(),yCe=xr(),Ya=br(),N3t=zi(),rCe=xs(),nCe=Np(),q3t=Ec(),TP=Do(),__=ll(),k3t=fr(),F3t=JC(),j3t=k3t("iterator"),w_="URLSearchParams",_Ce=w_+"Iterator",xCe=V$.set,$l=V$.getterFor(w_),z3t=V$.getterFor(_Ce),iCe=U$("fetch"),CP=U$("Request"),gS=U$("Headers"),k$=CP&&CP.prototype,oCe=gS&&gS.prototype,B3t=dCe.TypeError,U3t=dCe.encodeURIComponent,V3t=String.fromCharCode,G3t=I3t("String","fromCodePoint"),$3t=parseInt,AP=ju("".charAt),aCe=ju([].join),id=ju([].push),wCe=ju("".replace),H3t=ju([].shift),sCe=ju([].splice),lCe=ju("".split),bCe=ju("".slice),W3t=ju(/./.exec),Z3t=/\+/g,F$="\uFFFD",Y3t=/^[0-9a-f]+$/i,uCe=function(r,e){var t=bCe(r,e,e+2);return W3t(Y3t,t)?$3t(t,16):NaN},K3t=function(r){for(var e=0,t=128;t>0&&r&t;t>>=1)e++;return e},X3t=function(r){var e=null;switch(r.length){case 1:e=r[0];break;case 2:e=(r[0]&31)<<6|r[1]&63;break;case 3:e=(r[0]&15)<<12|(r[1]&63)<<6|r[2]&63;break;case 4:e=(r[0]&7)<<18|(r[1]&63)<<12|(r[2]&63)<<6|r[3]&63;break;}return e>1114111?null:e},cCe=function(r){r=wCe(r,Z3t," ");for(var e=r.length,t="",n=0;n<e;){var i=AP(r,n);if(i==="%"){if(AP(r,n+1)==="%"||n+3>e){t+="%",n++;continue}var o=uCe(r,n+1);if(o!==o){t+=i,n++;continue}n+=2;var a=K3t(o);if(a===0)i=V3t(o);else{if(a===1||a>4){t+=F$,n++;continue}for(var u=[o],h=1;h<a&&(n++,!(n+3>e||AP(r,n)!=="%"));){var d=uCe(r,n+1);if(d!==d){n+=3;break}if(d>191||d<128)break;id(u,d),n+=2,h++}if(u.length!==a){t+=F$;continue}var v=X3t(u);v===null?t+=F$:i=G3t(v)}}t+=i,n++}return t},J3t=/[!'()~]|%20/g,Q3t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},eVt=function(r){return Q3t[r]},fCe=function(r){return wCe(U3t(r),J3t,eVt)},j$=R3t(function(e,t){xCe(this,{type:_Ce,target:$l(e).entries,index:0,kind:t})},w_,function(){var e=z3t(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,TP(void 0,!0);var i=t[n];switch(e.kind){case"keys":return TP(i.key,!1);case"values":return TP(i.value,!1);}return TP([i.key,i.value],!1)},!0),SCe=function(r){this.entries=[],this.url=null,r!==void 0&&(yCe(r)?this.parseObject(r):this.parseQuery(typeof r=="string"?AP(r,0)==="?"?bCe(r,1):r:Ya(r)))};SCe.prototype={type:w_,bindURL:function(r){this.url=r,this.update()},parseObject:function(r){var e=this.entries,t=q3t(r),n,i,o,a,u,h,d;if(t)for(n=nCe(r,t),i=n.next;!(o=EP(i,n)).done;){if(a=nCe(D3t(o.value)),u=a.next,(h=EP(u,a)).done||(d=EP(u,a)).done||!EP(u,a).done)throw new B3t("Expected sequence with length 2");id(e,{key:Ya(h.value),value:Ya(d.value)})}else for(var v in r)P3t(r,v)&&id(e,{key:v,value:Ya(r[v])})},parseQuery:function(r){if(r)for(var e=this.entries,t=lCe(r,"&"),n=0,i,o;n<t.length;)i=t[n++],i.length&&(o=lCe(i,"="),id(e,{key:cCe(H3t(o)),value:cCe(aCe(o,"="))}))},serialize:function(){for(var r=this.entries,e=[],t=0,n;t<r.length;)n=r[t++],id(e,fCe(n.key)+"="+fCe(n.value));return aCe(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var MP=function(){gCe(this,x_);var e=arguments.length>0?arguments[0]:void 0,t=xCe(this,new SCe(e));vS||(this.size=t.entries.length)},x_=MP.prototype;C3t(x_,{append:function(e,t){var n=$l(this);__(arguments.length,2),id(n.entries,{key:Ya(e),value:Ya(t)}),vS||this.length++,n.updateURL()},delete:function(r){for(var e=$l(this),t=__(arguments.length,1),n=e.entries,i=Ya(r),o=t<2?void 0:arguments[1],a=o===void 0?o:Ya(o),u=0;u<n.length;){var h=n[u];if(h.key===i&&(a===void 0||h.value===a)){if(sCe(n,u,1),a!==void 0)break}else u++}vS||(this.size=n.length),e.updateURL()},get:function(e){var t=$l(this).entries;__(arguments.length,1);for(var n=Ya(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){var t=$l(this).entries;__(arguments.length,1);for(var n=Ya(e),i=[],o=0;o<t.length;o++)t[o].key===n&&id(i,t[o].value);return i},has:function(e){for(var t=$l(this).entries,n=__(arguments.length,1),i=Ya(e),o=n<2?void 0:arguments[1],a=o===void 0?o:Ya(o),u=0;u<t.length;){var h=t[u++];if(h.key===i&&(a===void 0||h.value===a))return!0}return!1},set:function(e,t){var n=$l(this);__(arguments.length,1);for(var i=n.entries,o=!1,a=Ya(e),u=Ya(t),h=0,d;h<i.length;h++)d=i[h],d.key===a&&(o?sCe(i,h--,1):(o=!0,d.value=u));o||id(i,{key:a,value:u}),vS||(this.size=i.length),n.updateURL()},sort:function(){var e=$l(this);F3t(e.entries,function(t,n){return t.key>n.key?1:-1}),e.updateURL()},forEach:function(e){for(var t=$l(this).entries,n=O3t(e,arguments.length>1?arguments[1]:void 0),i=0,o;i<t.length;)o=t[i++],n(o.value,o.key,this)},keys:function(){return new j$(this,"keys")},values:function(){return new j$(this,"values")},entries:function(){return new j$(this,"entries")}},{enumerable:!0});vCe(x_,j3t,x_.entries,{name:"entries"});vCe(x_,"toString",function(){return $l(this).serialize()},{enumerable:!0});vS&&A3t(x_,"size",{get:function(){return $l(this).entries.length},configurable:!0,enumerable:!0});M3t(MP,w_);B$({global:!0,constructor:!0,forced:!mCe},{URLSearchParams:MP});!mCe&&q$(gS)&&(hCe=ju(oCe.has),pCe=ju(oCe.set),z$=function(r){if(yCe(r)){var e=r.body,t;if(L3t(e)===w_)return t=r.headers?new gS(r.headers):new gS,hCe(t,"content-type")||pCe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),N3t(r,{body:rCe(0,Ya(e)),headers:rCe(0,t)})}return r},q$(iCe)&&B$({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return iCe(e,arguments.length>1?z$(arguments[1]):{})}}),q$(CP)&&(IP=function(e){return gCe(this,k$),new CP(e,arguments.length>1?z$(arguments[1]):{})},k$.constructor=IP,IP.prototype=k$,B$({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:IP})));var hCe,pCe,z$,IP;ECe.exports={URLSearchParams:MP,getState:$l}});var UCe=I(()=>{"use strict";B3();var tVt=te(),s6=sr(),rVt=dS(),l6=At(),TCe=Fn(),Kl=rt(),DP=Tn(),Hl=ii(),nVt=xa(),i6=Lr(),u6=cU(),b_=t4(),zu=Ss(),iVt=Xm().codeAt,oVt=tCe(),Xf=br(),aVt=Wa(),sVt=ll(),qCe=G$(),kCe=yn(),lVt=kCe.set,NP=kCe.getterFor("URL"),uVt=qCe.URLSearchParams,cVt=qCe.getState,yS=l6.URL,o6=l6.TypeError,qP=l6.parseInt,fVt=Math.floor,ICe=Math.pow,Yl=Kl("".charAt),Bu=Kl(/./.exec),xS=Kl([].join),hVt=Kl(1 .toString),pVt=Kl([].pop),E_=Kl([].push),$$=Kl("".replace),dVt=Kl([].shift),mVt=Kl("".split),bS=Kl("".slice),kP=Kl("".toLowerCase),vVt=Kl([].unshift),gVt="Invalid authority",H$="Invalid scheme",sv="Invalid host",ACe="Invalid port",FCe=/[a-z]/i,yVt=/[\d+-.a-z]/i,a6=/\d/,_Vt=/^0x/i,xVt=/^[0-7]+$/,wVt=/^\d+$/,jCe=/^[\da-f]+$/i,bVt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,SVt=/[\0\t\n\r #/:<>?@[\\\]^|]/,EVt=/^[\u0000-\u0020]+/,TVt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,IVt=/[\t\n\r]/g,Wl,AVt=function(r){var e=mVt(r,"."),t,n,i,o,a,u,h;if(e.length&&e[e.length-1]===""&&e.length--,t=e.length,t>4)return r;for(n=[],i=0;i<t;i++){if(o=e[i],o==="")return r;if(a=10,o.length>1&&Yl(o,0)==="0"&&(a=Bu(_Vt,o)?16:8,o=bS(o,a===8?1:2)),o==="")u=0;else{if(!Bu(a===10?wVt:a===8?xVt:jCe,o))return r;u=qP(o,a)}E_(n,u)}for(i=0;i<t;i++)if(u=n[i],i===t-1){if(u>=ICe(256,5-t))return null}else if(u>255)return null;for(h=pVt(n),i=0;i<n.length;i++)h+=n[i]*ICe(256,3-i);return h},CVt=function(r){var e=[0,0,0,0,0,0,0,0],t=0,n=null,i=0,o,a,u,h,d,v,x,S=function(){return Yl(r,i)};if(S()===":"){if(Yl(r,1)!==":")return;i+=2,t++,n=t}for(;S();){if(t===8)return;if(S()===":"){if(n!==null)return;i++,t++,n=t;continue}for(o=a=0;a<4&&Bu(jCe,S());)o=o*16+qP(S(),16),i++,a++;if(S()==="."){if(a===0||(i-=a,t>6))return;for(u=0;S();){if(h=null,u>0)if(S()==="."&&u<4)i++;else return;if(!Bu(a6,S()))return;for(;Bu(a6,S());){if(d=qP(S(),10),h===null)h=d;else{if(h===0)return;h=h*10+d}if(h>255)return;i++}e[t]=e[t]*256+h,u++,(u===2||u===4)&&t++}if(u!==4)return;break}else if(S()===":"){if(i++,!S())return}else if(S())return;e[t++]=o}if(n!==null)for(v=t-n,t=7;t!==0&&v>0;)x=e[t],e[t--]=e[n+v-1],e[n+--v]=x;else if(t!==8)return;return e},MVt=function(r){for(var e=null,t=1,n=null,i=0,o=0;o<8;o++)r[o]!==0?(i>t&&(e=n,t=i),n=null,i=0):(n===null&&(n=o),++i);return i>t?n:e},_S=function(r){var e,t,n,i;if(typeof r=="number"){for(e=[],t=0;t<4;t++)vVt(e,r%256),r=fVt(r/256);return xS(e,".")}if(typeof r=="object"){for(e="",n=MVt(r),t=0;t<8;t++)i&&r[t]===0||(i&&(i=!1),n===t?(e+=t?":":"::",i=!0):(e+=hVt(r[t],16),t<7&&(e+=":")));return"["+e+"]"}return r},LP={},zCe=u6({},LP,{" ":1,"\"":1,"<":1,">":1,"`":1}),BCe=u6({},zCe,{"#":1,"?":1,"{":1,"}":1}),W$=u6({},BCe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),od=function(r,e){var t=iVt(r,0);return t>32&&t<127&&!i6(e,r)?r:encodeURIComponent(r)},RP={ftp:21,file:null,http:80,https:443,ws:80,wss:443},wS=function(r,e){var t;return r.length===2&&Bu(FCe,Yl(r,0))&&((t=Yl(r,1))===":"||!e&&t==="|")},CCe=function(r){var e;return r.length>1&&wS(bS(r,0,2))&&(r.length===2||(e=Yl(r,2))==="/"||e==="\\"||e==="?"||e==="#")},RVt=function(r){return r==="."||kP(r)==="%2e"},PVt=function(r){return r=kP(r),r===".."||r==="%2e."||r===".%2e"||r==="%2e%2e"},Z$={},MCe={},Y$={},RCe={},PCe={},K$={},OCe={},LCe={},PP={},OP={},X$={},J$={},Q$={},e6={},DCe={},t6={},S_={},Dc={},NCe={},lv={},Kf={},c6=function(r,e,t){var n=Xf(r),i,o,a;if(e){if(o=this.parse(n),o)throw new o6(o);this.searchParams=null}else{if(t!==void 0&&(i=new c6(t,!0)),o=this.parse(n,null,i),o)throw new o6(o);a=cVt(new uVt),a.bindURL(this),this.searchParams=a}};c6.prototype={type:"URL",parse:function(r,e,t){var n=this,i=e||Z$,o=0,a="",u=!1,h=!1,d=!1,v,x,S,A;for(r=Xf(r),e||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,r=$$(r,EVt,""),r=$$(r,TVt,"$1")),r=$$(r,IVt,""),v=b_(r);o<=v.length;){switch(x=v[o],i){case Z$:if(x&&Bu(FCe,x))a+=kP(x),i=MCe;else{if(e)return H$;i=Y$;continue}break;case MCe:if(x&&(Bu(yVt,x)||x==="+"||x==="-"||x==="."))a+=kP(x);else if(x===":"){if(e&&(n.isSpecial()!==i6(RP,a)||a==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=a,e){n.isSpecial()&&RP[n.scheme]===n.port&&(n.port=null);return}a="",n.scheme==="file"?i=e6:n.isSpecial()&&t&&t.scheme===n.scheme?i=RCe:n.isSpecial()?i=LCe:v[o+1]==="/"?(i=PCe,o++):(n.cannotBeABaseURL=!0,E_(n.path,""),i=NCe)}else{if(e)return H$;a="",i=Y$,o=0;continue}break;case Y$:if(!t||t.cannotBeABaseURL&&x!=="#")return H$;if(t.cannotBeABaseURL&&x==="#"){n.scheme=t.scheme,n.path=zu(t.path),n.query=t.query,n.fragment="",n.cannotBeABaseURL=!0,i=Kf;break}i=t.scheme==="file"?e6:K$;continue;case RCe:if(x==="/"&&v[o+1]==="/")i=PP,o++;else{i=K$;continue}break;case PCe:if(x==="/"){i=OP;break}else{i=Dc;continue}case K$:if(n.scheme=t.scheme,x===Wl)n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=zu(t.path),n.query=t.query;else if(x==="/"||x==="\\"&&n.isSpecial())i=OCe;else if(x==="?")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=zu(t.path),n.query="",i=lv;else if(x==="#")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=zu(t.path),n.query=t.query,n.fragment="",i=Kf;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=zu(t.path),n.path.length--,i=Dc;continue}break;case OCe:if(n.isSpecial()&&(x==="/"||x==="\\"))i=PP;else if(x==="/")i=OP;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,i=Dc;continue}break;case LCe:if(i=PP,x!=="/"||Yl(a,o+1)!=="/")continue;o++;break;case PP:if(x!=="/"&&x!=="\\"){i=OP;continue}break;case OP:if(x==="@"){u&&(a="%40"+a),u=!0,S=b_(a);for(var L=0;L<S.length;L++){var q=S[L];if(q===":"&&!d){d=!0;continue}var R=od(q,W$);d?n.password+=R:n.username+=R}a=""}else if(x===Wl||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(u&&a==="")return gVt;o-=b_(a).length+1,a="",i=X$}else a+=x;break;case X$:case J$:if(e&&n.scheme==="file"){i=t6;continue}else if(x===":"&&!h){if(a==="")return sv;if(A=n.parseHost(a),A)return A;if(a="",i=Q$,e===J$)return}else if(x===Wl||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(n.isSpecial()&&a==="")return sv;if(e&&a===""&&(n.includesCredentials()||n.port!==null))return;if(A=n.parseHost(a),A)return A;if(a="",i=S_,e)return;continue}else x==="["?h=!0:x==="]"&&(h=!1),a+=x;break;case Q$:if(Bu(a6,x))a+=x;else if(x===Wl||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()||e){if(a!==""){var D=qP(a,10);if(D>65535)return ACe;n.port=n.isSpecial()&&D===RP[n.scheme]?null:D,a=""}if(e)return;i=S_;continue}else return ACe;break;case e6:if(n.scheme="file",x==="/"||x==="\\")i=DCe;else if(t&&t.scheme==="file")switch(x){case Wl:n.host=t.host,n.path=zu(t.path),n.query=t.query;break;case"?":n.host=t.host,n.path=zu(t.path),n.query="",i=lv;break;case"#":n.host=t.host,n.path=zu(t.path),n.query=t.query,n.fragment="",i=Kf;break;default:CCe(xS(zu(v,o),""))||(n.host=t.host,n.path=zu(t.path),n.shortenPath()),i=Dc;continue;}else{i=Dc;continue}break;case DCe:if(x==="/"||x==="\\"){i=t6;break}t&&t.scheme==="file"&&!CCe(xS(zu(v,o),""))&&(wS(t.path[0],!0)?E_(n.path,t.path[0]):n.host=t.host),i=Dc;continue;case t6:if(x===Wl||x==="/"||x==="\\"||x==="?"||x==="#"){if(!e&&wS(a))i=Dc;else if(a===""){if(n.host="",e)return;i=S_}else{if(A=n.parseHost(a),A)return A;if(n.host==="localhost"&&(n.host=""),e)return;a="",i=S_}continue}else a+=x;break;case S_:if(n.isSpecial()){if(i=Dc,x!=="/"&&x!=="\\")continue}else if(!e&&x==="?")n.query="",i=lv;else if(!e&&x==="#")n.fragment="",i=Kf;else if(x!==Wl&&(i=Dc,x!=="/"))continue;break;case Dc:if(x===Wl||x==="/"||x==="\\"&&n.isSpecial()||!e&&(x==="?"||x==="#")){if(PVt(a)?(n.shortenPath(),x!=="/"&&!(x==="\\"&&n.isSpecial())&&E_(n.path,"")):RVt(a)?x!=="/"&&!(x==="\\"&&n.isSpecial())&&E_(n.path,""):(n.scheme==="file"&&!n.path.length&&wS(a)&&(n.host&&(n.host=""),a=Yl(a,0)+":"),E_(n.path,a)),a="",n.scheme==="file"&&(x===Wl||x==="?"||x==="#"))for(;n.path.length>1&&n.path[0]==="";)dVt(n.path);x==="?"?(n.query="",i=lv):x==="#"&&(n.fragment="",i=Kf)}else a+=od(x,BCe);break;case NCe:x==="?"?(n.query="",i=lv):x==="#"?(n.fragment="",i=Kf):x!==Wl&&(n.path[0]+=od(x,LP));break;case lv:!e&&x==="#"?(n.fragment="",i=Kf):x!==Wl&&(x==="'"&&n.isSpecial()?n.query+="%27":x==="#"?n.query+="%23":n.query+=od(x,LP));break;case Kf:x!==Wl&&(n.fragment+=od(x,zCe));break;}o++}},parseHost:function(r){var e,t,n;if(Yl(r,0)==="["){if(Yl(r,r.length-1)!=="]"||(e=CVt(bS(r,1,-1)),!e))return sv;this.host=e}else if(this.isSpecial()){if(r=oVt(r),Bu(bVt,r)||(e=AVt(r),e===null))return sv;this.host=e}else{if(Bu(SVt,r))return sv;for(e="",t=b_(r),n=0;n<t.length;n++)e+=od(t[n],LP);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return i6(RP,this.scheme)},shortenPath:function(){var r=this.path,e=r.length;e&&(this.scheme!=="file"||e!==1||!wS(r[0],!0))&&r.length--},serialize:function(){var r=this,e=r.scheme,t=r.username,n=r.password,i=r.host,o=r.port,a=r.path,u=r.query,h=r.fragment,d=e+":";return i!==null?(d+="//",r.includesCredentials()&&(d+=t+(n?":"+n:"")+"@"),d+=_S(i),o!==null&&(d+=":"+o)):e==="file"&&(d+="//"),d+=r.cannotBeABaseURL?a[0]:a.length?"/"+xS(a,"/"):"",u!==null&&(d+="?"+u),h!==null&&(d+="#"+h),d},setHref:function(r){var e=this.parse(r);if(e)throw new o6(e);this.searchParams.update()},getOrigin:function(){var r=this.scheme,e=this.port;if(r==="blob")try{return new T_(r.path[0]).origin}catch(t){return"null"}return r==="file"||!this.isSpecial()?"null":r+"://"+_S(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(r){this.parse(Xf(r)+":",Z$)},getUsername:function(){return this.username},setUsername:function(r){var e=b_(Xf(r));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var t=0;t<e.length;t++)this.username+=od(e[t],W$)}},getPassword:function(){return this.password},setPassword:function(r){var e=b_(Xf(r));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var t=0;t<e.length;t++)this.password+=od(e[t],W$)}},getHost:function(){var r=this.host,e=this.port;return r===null?"":e===null?_S(r):_S(r)+":"+e},setHost:function(r){this.cannotBeABaseURL||this.parse(r,X$)},getHostname:function(){var r=this.host;return r===null?"":_S(r)},setHostname:function(r){this.cannotBeABaseURL||this.parse(r,J$)},getPort:function(){var r=this.port;return r===null?"":Xf(r)},setPort:function(r){this.cannotHaveUsernamePasswordPort()||(r=Xf(r),r===""?this.port=null:this.parse(r,Q$))},getPathname:function(){var r=this.path;return this.cannotBeABaseURL?r[0]:r.length?"/"+xS(r,"/"):""},setPathname:function(r){this.cannotBeABaseURL||(this.path=[],this.parse(r,S_))},getSearch:function(){var r=this.query;return r?"?"+r:""},setSearch:function(r){r=Xf(r),r===""?this.query=null:(Yl(r,0)==="?"&&(r=bS(r,1)),this.query="",this.parse(r,lv)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var r=this.fragment;return r?"#"+r:""},setHash:function(r){if(r=Xf(r),r===""){this.fragment=null;return}Yl(r,0)==="#"&&(r=bS(r,1)),this.fragment="",this.parse(r,Kf)},update:function(){this.query=this.searchParams.serialize()||null}};var T_=function(e){var t=nVt(this,Ka),n=sVt(arguments.length,1)>1?arguments[1]:void 0,i=lVt(t,new c6(e,!1,n));s6||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},Ka=T_.prototype,Zl=function(r,e){return{get:function(){return NP(this)[r]()},set:e&&function(t){return NP(this)[e](t)},configurable:!0,enumerable:!0}};s6&&(Hl(Ka,"href",Zl("serialize","setHref")),Hl(Ka,"origin",Zl("getOrigin")),Hl(Ka,"protocol",Zl("getProtocol","setProtocol")),Hl(Ka,"username",Zl("getUsername","setUsername")),Hl(Ka,"password",Zl("getPassword","setPassword")),Hl(Ka,"host",Zl("getHost","setHost")),Hl(Ka,"hostname",Zl("getHostname","setHostname")),Hl(Ka,"port",Zl("getPort","setPort")),Hl(Ka,"pathname",Zl("getPathname","setPathname")),Hl(Ka,"search",Zl("getSearch","setSearch")),Hl(Ka,"searchParams",Zl("getSearchParams")),Hl(Ka,"hash",Zl("getHash","setHash")));DP(Ka,"toJSON",function(){return NP(this).serialize()},{enumerable:!0});DP(Ka,"toString",function(){return NP(this).serialize()},{enumerable:!0});yS&&(r6=yS.createObjectURL,n6=yS.revokeObjectURL,r6&&DP(T_,"createObjectURL",TCe(r6,yS)),n6&&DP(T_,"revokeObjectURL",TCe(n6,yS)));var r6,n6;aVt(T_,"URL");tVt({global:!0,constructor:!0,forced:!rVt,sham:!s6},{URL:T_})});var VCe=I(()=>{"use strict";UCe()});var HCe=I(()=>{"use strict";var OVt=te(),LVt=_r(),$Ce=ut(),DVt=ll(),GCe=br(),NVt=dS(),f6=LVt("URL"),qVt=NVt&&$Ce(function(){f6.canParse()}),kVt=$Ce(function(){return f6.canParse.length!==1});OVt({target:"URL",stat:!0,forced:!qVt||kVt},{canParse:function(e){var t=DVt(arguments.length,1),n=GCe(e),i=t<2||arguments[1]===void 0?void 0:GCe(arguments[1]);try{return!!new f6(n,i)}catch(o){return!1}}})});var ZCe=I(()=>{"use strict";var FVt=te(),jVt=_r(),zVt=ll(),WCe=br(),BVt=dS(),UVt=jVt("URL");FVt({target:"URL",stat:!0,forced:!BVt},{parse:function(e){var t=zVt(arguments.length,1),n=WCe(e),i=t<2||arguments[1]===void 0?void 0:WCe(arguments[1]);try{return new UVt(n,i)}catch(o){return null}}})});var YCe=I(()=>{"use strict";var VVt=te(),GVt=Ot();VVt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return GVt(URL.prototype.toString,this)}})});var KCe=I(()=>{"use strict";G$()});var eMe=I(()=>{"use strict";var $Vt=Tn(),FP=rt(),XCe=br(),HVt=ll(),QCe=URLSearchParams,jP=QCe.prototype,WVt=FP(jP.append),JCe=FP(jP.delete),ZVt=FP(jP.forEach),YVt=FP([].push),h6=new QCe("a=1&a=2&b=3");h6.delete("a",1);h6.delete("b",void 0);h6+""!="a=2"&&$Vt(jP,"delete",function(r){var e=arguments.length,t=e<2?void 0:arguments[1];if(e&&t===void 0)return JCe(this,r);var n=[];ZVt(this,function(x,S){YVt(n,{key:S,value:x})}),HVt(e,1);for(var i=XCe(r),o=XCe(t),a=0,u=0,h=!1,d=n.length,v;a<d;)v=n[a++],h||v.key===i?(h=!0,JCe(this,v.key)):u++;for(;u<d;)v=n[u++],v.key===i&&v.value===o||WVt(this,v.key,v.value)},{enumerable:!0,unsafe:!0})});var iMe=I(()=>{"use strict";var KVt=Tn(),rMe=rt(),XVt=br(),JVt=ll(),nMe=URLSearchParams,p6=nMe.prototype,QVt=rMe(p6.getAll),e5t=rMe(p6.has),tMe=new nMe("a=1");(tMe.has("a",2)||!tMe.has("a",void 0))&&KVt(p6,"has",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&n===void 0)return e5t(this,e);var i=QVt(this,e);JVt(t,1);for(var o=XVt(n),a=0;a<i.length;)if(i[a++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})});var oMe=I(()=>{"use strict";var t5t=sr(),r5t=rt(),n5t=ii(),d6=URLSearchParams.prototype,i5t=r5t(d6.forEach);t5t&&!("size"in d6)&&n5t(d6,"size",{get:function(){var e=0;return i5t(this,function(){e++}),e},configurable:!0,enumerable:!0})});var sMe=I((oRr,aMe)=>{"use strict";Tne();One();Lne();Dne();Nne();qne();kne();Fne();jne();zne();Bne();Une();Vne();Gne();$ne();gie();bie();Uz();Uie();Hz();Kie();eoe();roe();ooe();aoe();loe();coe();Xz();Jz();moe();voe();_oe();Coe();Moe();Poe();Ooe();Bb();Qoe();nae();iae();aae();lae();vae();yae();xae();Sae();Eae();zae();Vae();Gae();y4();x4();w4();Zae();Yae();Kae();S4();Ise();Fse();Gse();Hse();G4();oB();aB();gle();_le();ble();Sle();Lle();Dle();jle();Vle();$le();Xle();eue();iue();pB();yB();bB();SB();EB();TB();CB();MB();RB();OB();LB();DB();NB();qB();Az();Cue();wM();GB();Kue();Que();tce();rce();nce();ace();lce();uce();fce();pce();mce();vce();gce();yce();wce();Ece();Tce();Ice();kce();Fce();zce();Uce();Vce();Gce();$ce();Hce();Jce();afe();ffe();gfe();xfe();Tfe();Ife();Mfe();Pfe();Lfe();Dfe();zfe();Bfe();Ufe();$fe();Hfe();Wfe();Yfe();pU();dU();Jfe();ehe();rhe();ihe();ahe();she();lhe();uhe();dhe();mhe();vhe();_he();xhe();bhe();Ehe();kpe();XU();JU();Upe();r3();n3();$pe();Jpe();tde();rde();ade();sde();lde();ude();cde();fde();hde();gde();_de();xde();kde();jde();GM();$de();Wde();Kde();eme();rme();S3();I3();C3();R3();O3();N3();k3();Ome();qme();Bme();j3();$me();z3();B3();ove();Z3();vve();gve();wve();bve();Cve();iV();Lve();Fve();Bve();Vve();fV();Kve();tge();age();cge();fge();hge();pge();dge();mge();vge();gge();yge();_ge();xge();wge();bge();Yge();Kge();Xge();Jge();Qge();eye();tye();rye();nye();IV();aye();lye();cye();pye();mye();gye();AV();CV();wye();bye();Eye();Iye();Pye();Lye();Nye();qye();Fye();zye();Uye();Gye();Kye();Xye();Qye();o_e();s_e();h_e();UV();VV();d_e();$V();x_e();_R();q_e();k_e();z_e();p0e();d0e();m0e();v0e();g0e();y0e();x0e();w0e();S0e();E0e();A0e();C0e();P0e();O0e();L0e();D0e();B0e();U0e();V0e();G0e();$0e();nxe();lxe();xxe();Exe();Ixe();Axe();Mxe();Rxe();qxe();kxe();jxe();zxe();Bxe();Uxe();Vxe();Hxe();Wxe();ewe();awe();lwe();uwe();cwe();pwe();dwe();_we();wwe();Swe();Ewe();Awe();Cwe();Mwe();Rwe();Owe();Nwe();Fwe();jwe();zwe();Bwe();Uwe();Vwe();Gwe();$we();Hwe();Wwe();Ywe();Kwe();Xwe();Jwe();Qwe();tbe();ibe();vbe();Ebe();Ibe();Cbe();Mbe();Pbe();Obe();Lbe();qbe();kbe();Fbe();jbe();Ube();Gbe();$be();Wbe();Ybe();Kbe();Qbe();e1e();t1e();n1e();o1e();a1e();s1e();l1e();u1e();f1e();h1e();p1e();d1e();m1e();v1e();g1e();y1e();b1e();S1e();C1e();M1e();O1e();L1e();D1e();F1e();j1e();z1e();B1e();rSe();nSe();iSe();oSe();aSe();hSe();dSe();vSe();xSe();bSe();ESe();ASe();MSe();PSe();FSe();jSe();zSe();BSe();HSe();WSe();YSe();KSe();JSe();QSe();eEe();tEe();rEe();nEe();iEe();oEe();aEe();lEe();cEe();hEe();pEe();dEe();mEe();vEe();gEe();yEe();_Ee();EEe();MEe();YEe();KEe();XEe();JEe();QEe();eTe();tTe();rTe();iTe();oTe();hTe();pTe();dTe();mTe();vTe();gTe();yTe();_Te();wTe();bTe();ETe();ITe();ATe();CTe();MTe();RTe();PTe();OTe();LTe();DTe();HTe();XTe();QTe();eIe();rIe();nIe();oIe();sIe();uIe();fIe();hIe();dIe();mIe();yIe();_Ie();wIe();SIe();RIe();NIe();UIe();WIe();oAe();hAe();dAe();SAe();EAe();IAe();kAe();GAe();VCe();HCe();ZCe();YCe();KCe();eMe();iMe();oMe();aMe.exports=AC()});var uMe=I((aRr,lMe)=>{"use strict";lMe.exports=sMe()});var m6=I((sRr,cMe)=>{"use strict";cMe.exports=function(e,t){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(t,i)}}});var Rs=I((lRr,pMe)=>{"use strict";var o5t=m6(),uv=Object.prototype.toString;function y6(r){return uv.call(r)==="[object Array]"}function v6(r){return typeof r=="undefined"}function a5t(r){return r!==null&&!v6(r)&&r.constructor!==null&&!v6(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function s5t(r){return uv.call(r)==="[object ArrayBuffer]"}function l5t(r){return typeof FormData!="undefined"&&r instanceof FormData}function u5t(r){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function c5t(r){return typeof r=="string"}function f5t(r){return typeof r=="number"}function fMe(r){return r!==null&&typeof r=="object"}function zP(r){if(uv.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function h5t(r){return uv.call(r)==="[object Date]"}function p5t(r){return uv.call(r)==="[object File]"}function d5t(r){return uv.call(r)==="[object Blob]"}function hMe(r){return uv.call(r)==="[object Function]"}function m5t(r){return fMe(r)&&hMe(r.pipe)}function v5t(r){return typeof URLSearchParams!="undefined"&&r instanceof URLSearchParams}function g5t(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function y5t(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function _6(r,e){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),y6(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function g6(){var r={};function e(i,o){zP(r[o])&&zP(i)?r[o]=g6(r[o],i):zP(i)?r[o]=g6({},i):y6(i)?r[o]=i.slice():r[o]=i}for(var t=0,n=arguments.length;t<n;t++)_6(arguments[t],e);return r}function _5t(r,e,t){return _6(e,function(i,o){t&&typeof i=="function"?r[o]=o5t(i,t):r[o]=i}),r}function x5t(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}pMe.exports={isArray:y6,isArrayBuffer:s5t,isBuffer:a5t,isFormData:l5t,isArrayBufferView:u5t,isString:c5t,isNumber:f5t,isObject:fMe,isPlainObject:zP,isUndefined:v6,isDate:h5t,isFile:p5t,isBlob:d5t,isFunction:hMe,isStream:m5t,isURLSearchParams:v5t,isStandardBrowserEnv:y5t,forEach:_6,merge:g6,extend:_5t,trim:g5t,stripBOM:x5t}});var x6=I((uRr,mMe)=>{"use strict";var I_=Rs();function dMe(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}mMe.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(I_.isURLSearchParams(t))i=t.toString();else{var o=[];I_.forEach(t,function(h,d){h===null||typeof h=="undefined"||(I_.isArray(h)?d=d+"[]":h=[h],I_.forEach(h,function(x){I_.isDate(x)?x=x.toISOString():I_.isObject(x)&&(x=JSON.stringify(x)),o.push(dMe(d)+"="+dMe(x))}))}),i=o.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var gMe=I((cRr,vMe)=>{"use strict";var w5t=Rs();function BP(){this.handlers=[]}BP.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};BP.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};BP.prototype.forEach=function(e){w5t.forEach(this.handlers,function(n){n!==null&&e(n)})};vMe.exports=BP});var _Me=I((fRr,yMe)=>{"use strict";var b5t=Rs();yMe.exports=function(e,t){b5t.forEach(e,function(i,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[o])})}});var w6=I((hRr,xMe)=>{"use strict";xMe.exports=function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var b6=I((pRr,wMe)=>{"use strict";var S5t=w6();wMe.exports=function(e,t,n,i,o){var a=new Error(e);return S5t(a,t,n,i,o)}});var SMe=I((dRr,bMe)=>{"use strict";var E5t=b6();bMe.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(E5t("Request failed with status code "+n.status,n.config,null,n.request,n))}});var TMe=I((mRr,EMe)=>{"use strict";var UP=Rs();EMe.exports=UP.isStandardBrowserEnv()?function(){return{write:function(t,n,i,o,a,u){var h=[];h.push(t+"="+encodeURIComponent(n)),UP.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),UP.isString(o)&&h.push("path="+o),UP.isString(a)&&h.push("domain="+a),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var AMe=I((vRr,IMe)=>{"use strict";IMe.exports=function(e){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var MMe=I((gRr,CMe)=>{"use strict";CMe.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var PMe=I((yRr,RMe)=>{"use strict";var T5t=AMe(),I5t=MMe();RMe.exports=function(e,t){return e&&!T5t(t)?I5t(e,t):t}});var LMe=I((_Rr,OMe)=>{"use strict";var S6=Rs(),A5t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];OMe.exports=function(e){var t={},n,i,o;return e&&S6.forEach(e.split(`
`),function(u){if(o=u.indexOf(":"),n=S6.trim(u.substr(0,o)).toLowerCase(),i=S6.trim(u.substr(o+1)),n){if(t[n]&&A5t.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var qMe=I((xRr,NMe)=>{"use strict";var DMe=Rs();NMe.exports=DMe.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(o){var a=o;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){var u=DMe.isString(a)?i(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}()});var SS=I((wRr,kMe)=>{"use strict";function E6(r){this.message=r}E6.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};E6.prototype.__CANCEL__=!0;kMe.exports=E6});var I6=I((bRr,FMe)=>{"use strict";var VP=Rs(),C5t=SMe(),M5t=TMe(),R5t=x6(),P5t=PMe(),O5t=LMe(),L5t=qMe(),T6=b6(),D5t=ES(),N5t=SS();FMe.exports=function(e){return new Promise(function(n,i){var o=e.data,a=e.headers,u=e.responseType,h;function d(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}VP.isFormData(o)&&delete a["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(x+":"+S)}var A=P5t(e.baseURL,e.url);v.open(e.method.toUpperCase(),R5t(A,e.params,e.paramsSerializer),!0),v.timeout=e.timeout;function L(){if(v){var R="getAllResponseHeaders"in v?O5t(v.getAllResponseHeaders()):null,D=!u||u==="text"||u==="json"?v.responseText:v.response,k={data:D,status:v.status,statusText:v.statusText,headers:R,config:e,request:v};C5t(function($){n($),d()},function($){i($),d()},k),v=null}}if("onloadend"in v?v.onloadend=L:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(L)},v.onabort=function(){v&&(i(T6("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){i(T6("Network Error",e,null,v)),v=null},v.ontimeout=function(){var D=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",k=e.transitional||D5t.transitional;e.timeoutErrorMessage&&(D=e.timeoutErrorMessage),i(T6(D,e,k.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},VP.isStandardBrowserEnv()){var q=(e.withCredentials||L5t(A))&&e.xsrfCookieName?M5t.read(e.xsrfCookieName):void 0;q&&(a[e.xsrfHeaderName]=q)}"setRequestHeader"in v&&VP.forEach(a,function(D,k){typeof o=="undefined"&&k.toLowerCase()==="content-type"?delete a[k]:v.setRequestHeader(k,D)}),VP.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),u&&u!=="json"&&(v.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&v.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(R){v&&(i(!R||R&&R.type?new N5t("canceled"):R),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),o||(o=null),v.send(o)})}});var ES=I((SRr,BMe)=>{"use strict";var ta=Rs(),jMe=_Me(),q5t=w6(),k5t={"Content-Type":"application/x-www-form-urlencoded"};function zMe(r,e){!ta.isUndefined(r)&&ta.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function F5t(){var r;return typeof XMLHttpRequest!="undefined"?r=I6():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(r=I6()),r}function j5t(r,e,t){if(ta.isString(r))try{return(e||JSON.parse)(r),ta.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var GP={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:F5t(),transformRequest:[function(e,t){return jMe(t,"Accept"),jMe(t,"Content-Type"),ta.isFormData(e)||ta.isArrayBuffer(e)||ta.isBuffer(e)||ta.isStream(e)||ta.isFile(e)||ta.isBlob(e)?e:ta.isArrayBufferView(e)?e.buffer:ta.isURLSearchParams(e)?(zMe(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ta.isObject(e)||t&&t["Content-Type"]==="application/json"?(zMe(t,"application/json"),j5t(e)):e}],transformResponse:[function(e){var t=this.transitional||GP.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&ta.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?q5t(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ta.forEach(["delete","get","head"],function(e){GP.headers[e]={}});ta.forEach(["post","put","patch"],function(e){GP.headers[e]=ta.merge(k5t)});BMe.exports=GP});var VMe=I((ERr,UMe)=>{"use strict";var z5t=Rs(),B5t=ES();UMe.exports=function(e,t,n){var i=this||B5t;return z5t.forEach(n,function(a){e=a.call(i,e,t)}),e}});var A6=I((TRr,GMe)=>{"use strict";GMe.exports=function(e){return!!(e&&e.__CANCEL__)}});var WMe=I((IRr,HMe)=>{"use strict";var $Me=Rs(),C6=VMe(),U5t=A6(),V5t=ES(),G5t=SS();function M6(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new G5t("canceled")}HMe.exports=function(e){M6(e),e.headers=e.headers||{},e.data=C6.call(e,e.data,e.headers,e.transformRequest),e.headers=$Me.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),$Me.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||V5t.adapter;return t(e).then(function(i){return M6(e),i.data=C6.call(e,i.data,i.headers,e.transformResponse),i},function(i){return U5t(i)||(M6(e),i&&i.response&&(i.response.data=C6.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var R6=I((ARr,ZMe)=>{"use strict";var cl=Rs();ZMe.exports=function(e,t){t=t||{};var n={};function i(v,x){return cl.isPlainObject(v)&&cl.isPlainObject(x)?cl.merge(v,x):cl.isPlainObject(x)?cl.merge({},x):cl.isArray(x)?x.slice():x}function o(v){if(cl.isUndefined(t[v])){if(!cl.isUndefined(e[v]))return i(void 0,e[v])}else return i(e[v],t[v])}function a(v){if(!cl.isUndefined(t[v]))return i(void 0,t[v])}function u(v){if(cl.isUndefined(t[v])){if(!cl.isUndefined(e[v]))return i(void 0,e[v])}else return i(void 0,t[v])}function h(v){if(v in t)return i(e[v],t[v]);if(v in e)return i(void 0,e[v])}var d={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h};return cl.forEach(Object.keys(e).concat(Object.keys(t)),function(x){var S=d[x]||o,A=S(x);cl.isUndefined(A)&&S!==h||(n[x]=A)}),n}});var P6=I((CRr,YMe)=>{YMe.exports={version:"0.24.0"}});var JMe=I((MRr,XMe)=>{"use strict";var $5t=P6().version,O6={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){O6[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var KMe={};O6.transitional=function(e,t,n){function i(o,a){return"[Axios v"+$5t+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return function(o,a,u){if(e===!1)throw new Error(i(a," has been removed"+(t?" in "+t:"")));return t&&!KMe[a]&&(KMe[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,a,u):!0}};function H5t(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-->0;){var o=n[i],a=e[o];if(a){var u=r[o],h=u===void 0||a(u,o,r);if(h!==!0)throw new TypeError("option "+o+" must be "+h);continue}if(t!==!0)throw Error("Unknown option "+o)}}XMe.exports={assertOptions:H5t,validators:O6}});var iRe=I((RRr,nRe)=>{"use strict";var tRe=Rs(),W5t=x6(),QMe=gMe(),eRe=WMe(),$P=R6(),rRe=JMe(),A_=rRe.validators;function TS(r){this.defaults=r,this.interceptors={request:new QMe,response:new QMe}}TS.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=$P(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&rRe.assertOptions(t,{silentJSONParsing:A_.transitional(A_.boolean),forcedJSONParsing:A_.transitional(A_.boolean),clarifyTimeoutError:A_.transitional(A_.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(i=i&&S.synchronous,n.unshift(S.fulfilled,S.rejected))});var o=[];this.interceptors.response.forEach(function(S){o.push(S.fulfilled,S.rejected)});var a;if(!i){var u=[eRe,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(o),a=Promise.resolve(e);u.length;)a=a.then(u.shift(),u.shift());return a}for(var h=e;n.length;){var d=n.shift(),v=n.shift();try{h=d(h)}catch(x){v(x);break}}try{a=eRe(h)}catch(x){return Promise.reject(x)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};TS.prototype.getUri=function(e){return e=$P(this.defaults,e),W5t(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};tRe.forEach(["delete","get","head","options"],function(e){TS.prototype[e]=function(t,n){return this.request($P(n||{},{method:e,url:t,data:(n||{}).data}))}});tRe.forEach(["post","put","patch"],function(e){TS.prototype[e]=function(t,n,i){return this.request($P(i||{},{method:e,url:t,data:n}))}});nRe.exports=TS});var aRe=I((PRr,oRe)=>{"use strict";var Z5t=SS();function C_(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;this.promise.then(function(n){if(t._listeners){var i,o=t._listeners.length;for(i=0;i<o;i++)t._listeners[i](n);t._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(a){t.subscribe(a),i=a}).then(n);return o.cancel=function(){t.unsubscribe(i)},o},r(function(i){t.reason||(t.reason=new Z5t(i),e(t.reason))})}C_.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};C_.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};C_.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};C_.source=function(){var e,t=new C_(function(i){e=i});return{token:t,cancel:e}};oRe.exports=C_});var lRe=I((ORr,sRe)=>{"use strict";sRe.exports=function(e){return function(n){return e.apply(null,n)}}});var cRe=I((LRr,uRe)=>{"use strict";uRe.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var pRe=I((DRr,L6)=>{"use strict";var fRe=Rs(),Y5t=m6(),HP=iRe(),K5t=R6(),X5t=ES();function hRe(r){var e=new HP(r),t=Y5t(HP.prototype.request,e);return fRe.extend(t,HP.prototype,e),fRe.extend(t,e),t.create=function(i){return hRe(K5t(r,i))},t}var Nc=hRe(X5t);Nc.Axios=HP;Nc.Cancel=SS();Nc.CancelToken=aRe();Nc.isCancel=A6();Nc.VERSION=P6().version;Nc.all=function(e){return Promise.all(e)};Nc.spread=lRe();Nc.isAxiosError=cRe();L6.exports=Nc;L6.exports.default=Nc});var IS=I((NRr,dRe)=>{dRe.exports=pRe()});var vRe=I((D6,N6)=>{(function(r,e){typeof D6=="object"&&typeof N6!="undefined"?N6.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self,r.maplibregl=e())})(D6,function(){"use strict";var r={},e={};function t(i,o,a){if(e[i]=a,i==="index"){var u="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",h={};return e.shared(h),e.index(r,h),typeof window!="undefined"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([u],{type:"text/javascript"}))),r}}t("shared",["exports"],function(i){"use strict";function o(c,l,f,m){return new(f||(f=Promise))(function(_,E){function T(F){try{P(m.next(F))}catch(z){E(z)}}function C(F){try{P(m.throw(F))}catch(z){E(z)}}function P(F){var z;F.done?_(F.value):(z=F.value,z instanceof f?z:new f(function(U){U(z)})).then(T,C)}P((m=m.apply(c,l||[])).next())})}function a(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var u=h;function h(c,l){this.x=c,this.y=l}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,l){return this.clone()._rotateAround(c,l)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var l=c.x-this.x,f=c.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,l){return Math.atan2(this.x*l-this.y*c,this.x*c+this.y*l)},_matMult:function(c){var l=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=l,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var l=Math.cos(c),f=Math.sin(c),m=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=m,this},_rotateAround:function(c,l){var f=Math.cos(c),m=Math.sin(c),_=l.y+m*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-m*(this.y-l.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(c){return c instanceof h?c:Array.isArray(c)?new h(c[0],c[1]):c};var d=a(u),v=x;function x(c,l,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=l,this.p2x=f,this.p2y=m}x.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,l){if(l===void 0&&(l=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var _=this.sampleCurveX(f)-c;if(Math.abs(_)<l)return f;var E=this.sampleCurveDerivativeX(f);if(Math.abs(E)<1e-6)break;f-=_/E}var T=0,C=1;for(f=c,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-c)<l));m++)c>_?T=f:C=f,f=.5*(C-T)+T;return f},solve:function(c,l){return this.sampleCurveY(this.solveCurveX(c,l))}};var S=a(v);let A,L;function q(){return A==null&&(A=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),A}function R(){if(L==null&&(L=!1,q())){let l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<5*5;m++){let _=4*m;l.fillStyle=`rgb(${_},${_+1},${_+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}let f=l.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&f[m]!==m){L=!0;break}}}return L||!1}function D(c,l,f,m){let _=new S(c,l,f,m);return E=>_.solve(E)}let k=D(.25,.1,.25,1);function j(c,l,f){return Math.min(f,Math.max(l,c))}function $(c,l,f){let m=f-l,_=((c-l)%m+m)%m+l;return _===l?f:_}function ee(c,...l){for(let f of l)for(let m in f)c[m]=f[m];return c}let J=1;function ie(c,l,f){let m={};for(let _ in c)m[_]=l.call(this,c[_],_,c);return m}function ue(c,l,f){let m={};for(let _ in c)l.call(this,c[_],_,c)&&(m[_]=c[_]);return m}function le(c){return Array.isArray(c)?c.map(le):typeof c=="object"&&c?ie(c,le):c}let _e={};function Re(c){_e[c]||(typeof console!="undefined"&&console.warn(c),_e[c]=!0)}function ze(c,l,f){return(f.y-c.y)*(l.x-c.x)>(l.y-c.y)*(f.x-c.x)}function qe(c){return typeof WorkerGlobalScope!="undefined"&&c!==void 0&&c instanceof WorkerGlobalScope}let Ve=null;function Ke(c){return typeof ImageBitmap!="undefined"&&c instanceof ImageBitmap}let Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Se(c,l,f,m,_){return o(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let E=new VideoFrame(c,{timestamp:0});try{let T=E==null?void 0:E.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);let C=T.startsWith("BGR"),P=new Uint8ClampedArray(m*_*4);if(yield E.copyTo(P,function(F,z,U,Z,Y){let Q=4*Math.max(-z,0),re=(Math.max(0,U)-U)*Z*4+Q,fe=4*Z,de=Math.max(0,z),ke=Math.max(0,U);return{rect:{x:de,y:ke,width:Math.min(F.width,z+Z)-de,height:Math.min(F.height,U+Y)-ke},layout:[{offset:re,stride:fe}]}}(c,l,f,m,_)),C)for(let F=0;F<P.length;F+=4){let z=P[F];P[F]=P[F+2],P[F+2]=z}return P}finally{E.close()}})}let Ie,Ge,$e="AbortError";function Ze(){return new Error($e)}let Pe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function at(c){return Pe.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}let wt="global-dispatcher";class Le extends Error{constructor(l,f,m,_){super(`AJAXError: ${f} (${l}): ${m}`),this.status=l,this.statusText=f,this.url=m,this.body=_}}let Ye=()=>qe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,je=function(c,l){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){let m=at(c.url);if(m)return m(c,l);if(qe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:wt},l)}if(!(/^file:/.test(f=c.url)||/^file:/.test(Ye())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,_){return o(this,void 0,void 0,function*(){let E=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:Ye(),signal:_.signal});m.type!=="json"||E.headers.has("Accept")||E.headers.set("Accept","application/json");let T=yield fetch(E);if(!T.ok){let F=yield T.blob();throw new Le(T.status,T.statusText,m.url,F)}let C;C=m.type==="arrayBuffer"||m.type==="image"?T.arrayBuffer():m.type==="json"?T.json():T.text();let P=yield C;if(_.signal.aborted)throw Ze();return{data:P,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(c,l);if(qe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:wt},l)}var f;return function(m,_){return new Promise((E,T)=>{var C;let P=new XMLHttpRequest;P.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(P.responseType="arraybuffer");for(let F in m.headers)P.setRequestHeader(F,m.headers[F]);m.type==="json"&&(P.responseType="text",!((C=m.headers)===null||C===void 0)&&C.Accept||P.setRequestHeader("Accept","application/json")),P.withCredentials=m.credentials==="include",P.onerror=()=>{T(new Error(P.statusText))},P.onload=()=>{if(!_.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let F=P.response;if(m.type==="json")try{F=JSON.parse(P.response)}catch(z){return void T(z)}E({data:F,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{let F=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});T(new Le(P.status,P.statusText,m.url,F))}},_.signal.addEventListener("abort",()=>{P.abort(),T(Ze())}),P.send(m.body)})}(c,l)};function We(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;let l=new URL(c),f=window.location;return l.protocol===f.protocol&&l.host===f.host}function tt(c,l,f){f[c]&&f[c].indexOf(l)!==-1||(f[c]=f[c]||[],f[c].push(l))}function Qe(c,l,f){if(f&&f[c]){let m=f[c].indexOf(l);m!==-1&&f[c].splice(m,1)}}class kt{constructor(l,f={}){ee(this,f),this.type=l}}class Gt extends kt{constructor(l,f={}){super("error",ee({error:l},f))}}class bt{on(l,f){return this._listeners=this._listeners||{},tt(l,f,this._listeners),this}off(l,f){return Qe(l,f,this._listeners),Qe(l,f,this._oneTimeListeners),this}once(l,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},tt(l,f,this._oneTimeListeners),this):new Promise(m=>this.once(l,m))}fire(l,f){typeof l=="string"&&(l=new kt(l,f||{}));let m=l.type;if(this.listens(m)){l.target=this;let _=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(let C of _)C.call(this,l);let E=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(let C of E)Qe(m,C,this._oneTimeListeners),C.call(this,l);let T=this._eventedParent;T&&(ee(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(l))}else l instanceof Gt&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,f){return this._eventedParent=l,this._eventedParentData=f,this}}var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Yt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ut(c,l){let f={};for(let m in c)m!=="ref"&&(f[m]=c[m]);return Yt.forEach(m=>{m in l&&(f[m]=l[m])}),f}function Vt(c,l){if(Array.isArray(c)){if(!Array.isArray(l)||c.length!==l.length)return!1;for(let f=0;f<c.length;f++)if(!Vt(c[f],l[f]))return!1;return!0}if(typeof c=="object"&&c!==null&&l!==null){if(typeof l!="object"||Object.keys(c).length!==Object.keys(l).length)return!1;for(let f in c)if(!Vt(c[f],l[f]))return!1;return!0}return c===l}function nr(c,l){c.push(l)}function yr(c,l,f){nr(f,{command:"addSource",args:[c,l[c]]})}function Xt(c,l,f){nr(l,{command:"removeSource",args:[c]}),f[c]=!0}function lr(c,l,f,m){Xt(c,f,m),yr(c,l,f)}function Pr(c,l,f){let m;for(m in c[f])if(Object.prototype.hasOwnProperty.call(c[f],m)&&m!=="data"&&!Vt(c[f][m],l[f][m]))return!1;for(m in l[f])if(Object.prototype.hasOwnProperty.call(l[f],m)&&m!=="data"&&!Vt(c[f][m],l[f][m]))return!1;return!0}function nn(c,l,f,m,_,E){c=c||{},l=l||{};for(let T in c)Object.prototype.hasOwnProperty.call(c,T)&&(Vt(c[T],l[T])||f.push({command:E,args:[m,T,l[T],_]}));for(let T in l)Object.prototype.hasOwnProperty.call(l,T)&&!Object.prototype.hasOwnProperty.call(c,T)&&(Vt(c[T],l[T])||f.push({command:E,args:[m,T,l[T],_]}))}function An(c){return c.id}function Ai(c,l){return c[l.id]=l,c}class nt{constructor(l,f,m,_){this.message=(l?`${l}: `:"")+m,_&&(this.identifier=_),f!=null&&f.__line__&&(this.line=f.__line__)}}function ti(c,...l){for(let f of l)for(let m in f)c[m]=f[m];return c}class Cn extends Error{constructor(l,f){super(f),this.message=f,this.key=l}}class di{constructor(l,f=[]){this.parent=l,this.bindings={};for(let[m,_]of f)this.bindings[m]=_}concat(l){return new di(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}let Ci={kind:"null"},ct={kind:"number"},mr={kind:"string"},jt={kind:"boolean"},Mi={kind:"color"},dn={kind:"object"},Ee={kind:"value"},Oe={kind:"collator"},it={kind:"formatted"},St={kind:"padding"},vt={kind:"resolvedImage"},oe={kind:"variableAnchorOffsetCollection"};function W(c,l){return{kind:"array",itemType:c,N:l}}function H(c){if(c.kind==="array"){let l=H(c.itemType);return typeof c.N=="number"?`array<${l}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${l}>`}return c.kind}let K=[Ci,ct,mr,jt,Mi,it,dn,W(Ee),St,vt,oe];function ae(c,l){if(l.kind==="error")return null;if(c.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!ae(c.itemType,l.itemType))&&(typeof c.N!="number"||c.N===l.N))return null}else{if(c.kind===l.kind)return null;if(c.kind==="value"){for(let f of K)if(!ae(f,l))return null}}return`Expected ${H(c)} but found ${H(l)} instead.`}function ve(c,l){return l.some(f=>f.kind===c.kind)}function xe(c,l){return l.some(f=>f==="null"?c===null:f==="array"?Array.isArray(c):f==="object"?c&&!Array.isArray(c)&&typeof c=="object":f===typeof c)}function Te(c,l){return c.kind==="array"&&l.kind==="array"?c.itemType.kind===l.itemType.kind&&typeof c.N=="number":c.kind===l.kind}let pe=.96422,Be=.82521,Je=4/29,Ue=6/29,st=3*Ue*Ue,zt=Ue*Ue*Ue,Jt=Math.PI/180,Nr=180/Math.PI;function cr(c){return(c%=360)<0&&(c+=360),c}function jr([c,l,f,m]){let _,E,T=Jr((.2225045*(c=Ar(c))+.7168786*(l=Ar(l))+.0606169*(f=Ar(f)))/1);c===l&&l===f?_=E=T:(_=Jr((.4360747*c+.3850649*l+.1430804*f)/pe),E=Jr((.0139322*c+.0971045*l+.7141733*f)/Be));let C=116*T-16;return[C<0?0:C,500*(_-T),200*(T-E),m]}function Ar(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Jr(c){return c>zt?Math.pow(c,1/3):c/st+Je}function Kr([c,l,f,m]){let _=(c+16)/116,E=isNaN(l)?_:_+l/500,T=isNaN(f)?_:_-f/200;return _=1*cn(_),E=pe*cn(E),T=Be*cn(T),[Er(3.1338561*E-1.6168667*_-.4906146*T),Er(-.9787684*E+1.9161415*_+.033454*T),Er(.0719453*E-.2289914*_+1.4052427*T),m]}function Er(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function cn(c){return c>Ue?c*c*c:st*(c-Je)}function Mn(c){return parseInt(c.padEnd(2,c),16)/255}function Zi(c,l){return so(l?c/100:c,0,1)}function so(c,l,f){return Math.min(Math.max(l,c),f)}function zo(c){return!c.some(Number.isNaN)}let Ah={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class gn{constructor(l,f,m,_=1,E=!0){this.r=l,this.g=f,this.b=m,this.a=_,E||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[l,f,m,_]))}static parse(l){if(l instanceof gn)return l;if(typeof l!="string")return;let f=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];let _=Ah[m];if(_){let[T,C,P]=_;return[T/255,C/255,P/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){let T=m.length<6?1:2,C=1;return[Mn(m.slice(C,C+=T)),Mn(m.slice(C,C+=T)),Mn(m.slice(C,C+=T)),Mn(m.slice(C,C+T)||"ff")]}if(m.startsWith("rgb")){let T=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){let[C,P,F,z,U,Z,Y,Q,re,fe,de,ke]=T,we=[z||" ",Y||" ",fe].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){let Ne=[F,Z,re].join(""),He=Ne==="%%%"?100:Ne===""?255:0;if(He){let ot=[so(+P/He,0,1),so(+U/He,0,1),so(+Q/He,0,1),de?Zi(+de,ke):1];if(zo(ot))return ot}}return}}let E=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){let[T,C,P,F,z,U,Z,Y,Q]=E,re=[P||" ",z||" ",Z].join("");if(re==="  "||re==="  /"||re===",,"||re===",,,"){let fe=[+C,so(+F,0,100),so(+U,0,100),Y?Zi(+Y,Q):1];if(zo(fe))return function([de,ke,we,Ne]){function He(ot){let Pt=(ot+de/30)%12,ar=ke*Math.min(we,1-we);return we-ar*Math.max(-1,Math.min(Pt-3,9-Pt,1))}return de=cr(de),ke/=100,we/=100,[He(0),He(8),He(4),Ne]}(fe)}}}(l);return f?new gn(...f,!1):void 0}get rgb(){let{r:l,g:f,b:m,a:_}=this,E=_||1/0;return this.overwriteGetter("rgb",[l/E,f/E,m/E,_])}get hcl(){return this.overwriteGetter("hcl",function(l){let[f,m,_,E]=jr(l),T=Math.sqrt(m*m+_*_);return[Math.round(1e4*T)?cr(Math.atan2(_,m)*Nr):NaN,T,f,E]}(this.rgb))}get lab(){return this.overwriteGetter("lab",jr(this.rgb))}overwriteGetter(l,f){return Object.defineProperty(this,l,{value:f}),f}toString(){let[l,f,m,_]=this.rgb;return`rgba(${[l,f,m].map(E=>Math.round(255*E)).join(",")},${_})`}}gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1);class ux{constructor(l,f,m){this.sensitivity=l?f?"variant":"case":f?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,f){return this.collator.compare(l,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class cx{constructor(l,f,m,_,E){this.text=l,this.image=f,this.scale=m,this.fontStack=_,this.textColor=E}}class ka{constructor(l){this.sections=l}static fromString(l){return new ka([new cx(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof ka?l:ka.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class Fa{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Fa)return l;if(typeof l=="number")return new Fa([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(let f of l)if(typeof f!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]];}return new Fa(l)}}toString(){return JSON.stringify(this.values)}}let Z2=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ls{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ls)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let f=0;f<l.length;f+=2){let m=l[f],_=l[f+1];if(typeof m!="string"||!Z2.has(m)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new ls(l)}}toString(){return JSON.stringify(this.values)}}class ja{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new ja({name:l,available:!1}):null}}function Ch(c,l,f,m){return typeof c=="number"&&c>=0&&c<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,l,f,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,l,f,m]:[c,l,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function sf(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof gn||c instanceof ux||c instanceof ka||c instanceof Fa||c instanceof ls||c instanceof ja)return!0;if(Array.isArray(c)){for(let l of c)if(!sf(l))return!1;return!0}if(typeof c=="object"){for(let l in c)if(!sf(c[l]))return!1;return!0}return!1}function Ni(c){if(c===null)return Ci;if(typeof c=="string")return mr;if(typeof c=="boolean")return jt;if(typeof c=="number")return ct;if(c instanceof gn)return Mi;if(c instanceof ux)return Oe;if(c instanceof ka)return it;if(c instanceof Fa)return St;if(c instanceof ls)return oe;if(c instanceof ja)return vt;if(Array.isArray(c)){let l=c.length,f;for(let m of c){let _=Ni(m);if(f){if(f===_)continue;f=Ee;break}f=_}return W(f||Ee,l)}return dn}function Gd(c){let l=typeof c;return c===null?"":l==="string"||l==="number"||l==="boolean"?String(c):c instanceof gn||c instanceof ka||c instanceof Fa||c instanceof ls||c instanceof ja?c.toString():JSON.stringify(c)}class Ws{constructor(l,f){this.type=l,this.value=f}static parse(l,f){if(l.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!sf(l[1]))return f.error("invalid value");let m=l[1],_=Ni(m),E=f.expectedType;return _.kind!=="array"||_.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(_=E),new Ws(_,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ri{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}let Gv={string:mr,number:ct,boolean:jt,object:dn};class Zs{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m,_=1,E=l[0];if(E==="array"){let C,P;if(l.length>2){let F=l[1];if(typeof F!="string"||!(F in Gv)||F==="object")return f.error("The item type argument of \"array\" must be one of string, number, boolean",1);C=Gv[F],_++}else C=Ee;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return f.error("The length argument to \"array\" must be a positive integer literal",2);P=l[2],_++}m=W(C,P)}else{if(!Gv[E])throw new Error(`Types doesn't contain name = ${E}`);m=Gv[E]}let T=[];for(;_<l.length;_++){let C=f.parse(l[_],_,Ee);if(!C)return null;T.push(C)}return new Zs(m,T)}evaluate(l){for(let f=0;f<this.args.length;f++){let m=this.args[f].evaluate(l);if(!ae(this.type,Ni(m)))return m;if(f===this.args.length-1)throw new Ri(`Expected value to be of type ${H(this.type)}, but found ${H(Ni(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let fx={"to-boolean":jt,"to-color":Mi,"to-number":ct,"to-string":mr};class Ys{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m=l[0];if(!fx[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return f.error("Expected one argument.");let _=fx[m],E=[];for(let T=1;T<l.length;T++){let C=f.parse(l[T],T,Ee);if(!C)return null;E.push(C)}return new Ys(_,E)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let f,m;for(let _ of this.args){if(f=_.evaluate(l),m=null,f instanceof gn)return f;if(typeof f=="string"){let E=l.parseColor(f);if(E)return E}else if(Array.isArray(f)&&(m=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Ch(f[0],f[1],f[2],f[3]),!m))return new gn(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new Ri(m||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(let m of this.args){f=m.evaluate(l);let _=Fa.parse(f);if(_)return _}throw new Ri(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(let m of this.args){f=m.evaluate(l);let _=ls.parse(f);if(_)return _}throw new Ri(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(let m of this.args){if(f=m.evaluate(l),f===null)return 0;let _=Number(f);if(!isNaN(_))return _}throw new Ri(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return ka.fromString(Gd(this.args[0].evaluate(l)));case"resolvedImage":return ja.fromString(Gd(this.args[0].evaluate(l)));default:return Gd(this.args[0].evaluate(l));}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let Y2=["Unknown","Point","LineString","Polygon"];class $v{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Y2[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let f=this._parseColorCache[l];return f||(f=this._parseColorCache[l]=gn.parse(l)),f}}class lf{constructor(l,f,m=[],_,E=new di,T=[]){this.registry=l,this.path=m,this.key=m.map(C=>`[${C}]`).join(""),this.scope=E,this.errors=T,this.expectedType=_,this._isConstant=f}parse(l,f,m,_,E={}){return f?this.concat(f,m,_)._parse(l,E):this._parse(l,E)}_parse(l,f){function m(_,E,T){return T==="assert"?new Zs(E,[_]):T==="coerce"?new Ys(E,[_]):_}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let _=l[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let E=this.registry[_];if(E){let T=E.parse(l,this);if(!T)return null;if(this.expectedType){let C=this.expectedType,P=T.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||P.kind!=="value"){if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string"){if(C.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array"){if(C.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(C,P))return null}else T=m(T,C,f.typeAnnotation||"coerce");}else T=m(T,C,f.typeAnnotation||"coerce");}else T=m(T,C,f.typeAnnotation||"coerce");}else T=m(T,C,f.typeAnnotation||"assert")}if(!(T instanceof Ws)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){let C=new $v;try{T=new Ws(T.type,T.evaluate(C))}catch(P){return this.error(P.message),null}}return T}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof l} instead.`)}concat(l,f,m){let _=typeof l=="number"?this.path.concat(l):this.path,E=m?this.scope.concat(m):this.scope;return new lf(this.registry,this._isConstant,_,f||null,E,this.errors)}error(l,...f){let m=`${this.key}${f.map(_=>`[${_}]`).join("")}`;this.errors.push(new Cn(m,l))}checkSubtype(l,f){let m=ae(l,f);return m&&this.error(m),m}}class ac{constructor(l,f){this.type=f.type,this.bindings=[].concat(l),this.result=f}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(let f of this.bindings)l(f[1]);l(this.result)}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);let m=[];for(let E=1;E<l.length-1;E+=2){let T=l[E];if(typeof T!="string")return f.error(`Expected string, but found ${typeof T} instead.`,E);if(/[^a-zA-Z0-9_]/.test(T))return f.error("Variable names must contain only alphanumeric characters or '_'.",E);let C=f.parse(l[E+1],E+1);if(!C)return null;m.push([T,C])}let _=f.parse(l[l.length-1],l.length-1,f.expectedType,m);return _?new ac(m,_):null}outputDefined(){return this.result.outputDefined()}}class on{constructor(l,f){this.type=f.type,this.name=l,this.boundExpression=f}static parse(l,f){if(l.length!==2||typeof l[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");let m=l[1];return f.scope.has(m)?new on(m,f.scope.get(m)):f.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class hx{constructor(l,f,m){this.type=l,this.index=f,this.input=m}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,ct),_=f.parse(l[2],2,W(f.expectedType||Ee));return m&&_?new hx(_.type.itemType,m,_):null}evaluate(l){let f=this.index.evaluate(l),m=this.input.evaluate(l);if(f<0)throw new Ri(`Array index out of bounds: ${f} < 0.`);if(f>=m.length)throw new Ri(`Array index out of bounds: ${f} > ${m.length-1}.`);if(f!==Math.floor(f))throw new Ri(`Array index must be an integer, but found ${f} instead.`);return m[f]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class px{constructor(l,f){this.type=jt,this.needle=l,this.haystack=f}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Ee),_=f.parse(l[2],2,Ee);return m&&_?ve(m.type,[jt,mr,ct,Ci,Ee])?new px(m,_):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(m.type)} instead`):null}evaluate(l){let f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!xe(f,["boolean","string","number","null"]))throw new Ri(`Expected first argument to be of type boolean, string, number or null, but found ${H(Ni(f))} instead.`);if(!xe(m,["string","array"]))throw new Ri(`Expected second argument to be of type array or string, but found ${H(Ni(m))} instead.`);return m.indexOf(f)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Mh{constructor(l,f,m){this.type=ct,this.needle=l,this.haystack=f,this.fromIndex=m}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Ee),_=f.parse(l[2],2,Ee);if(!m||!_)return null;if(!ve(m.type,[jt,mr,ct,Ci,Ee]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(m.type)} instead`);if(l.length===4){let E=f.parse(l[3],3,ct);return E?new Mh(m,_,E):null}return new Mh(m,_)}evaluate(l){let f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!xe(f,["boolean","string","number","null"]))throw new Ri(`Expected first argument to be of type boolean, string, number or null, but found ${H(Ni(f))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(l)),xe(m,["string"])){let E=m.indexOf(f,_);return E===-1?-1:[...m.slice(0,E)].length}if(xe(m,["array"]))return m.indexOf(f,_);throw new Ri(`Expected second argument to be of type array or string, but found ${H(Ni(m))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class dx{constructor(l,f,m,_,E,T){this.inputType=l,this.type=f,this.input=m,this.cases=_,this.outputs=E,this.otherwise=T}static parse(l,f){if(l.length<5)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return f.error("Expected an even number of arguments.");let m,_;f.expectedType&&f.expectedType.kind!=="value"&&(_=f.expectedType);let E={},T=[];for(let F=2;F<l.length-1;F+=2){let z=l[F],U=l[F+1];Array.isArray(z)||(z=[z]);let Z=f.concat(F);if(z.length===0)return Z.error("Expected at least one branch label.");for(let Q of z){if(typeof Q!="number"&&typeof Q!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Z.error("Numeric branch labels must be integer values.");if(m){if(Z.checkSubtype(m,Ni(Q)))return null}else m=Ni(Q);if(E[String(Q)]!==void 0)return Z.error("Branch labels must be unique.");E[String(Q)]=T.length}let Y=f.parse(U,F,_);if(!Y)return null;_=_||Y.type,T.push(Y)}let C=f.parse(l[1],1,Ee);if(!C)return null;let P=f.parse(l[l.length-1],l.length-1,_);return P?C.type.kind!=="value"&&f.concat(1).checkSubtype(m,C.type)?null:new dx(m,_,C,E,T,P):null}evaluate(l){let f=this.input.evaluate(l);return(Ni(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Hv{constructor(l,f,m){this.type=l,this.branches=f,this.otherwise=m}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return f.error("Expected an odd number of arguments.");let m;f.expectedType&&f.expectedType.kind!=="value"&&(m=f.expectedType);let _=[];for(let T=1;T<l.length-1;T+=2){let C=f.parse(l[T],T,jt);if(!C)return null;let P=f.parse(l[T+1],T+1,m);if(!P)return null;_.push([C,P]),m=m||P.type}let E=f.parse(l[l.length-1],l.length-1,m);if(!E)return null;if(!m)throw new Error("Can't infer output type");return new Hv(m,_,E)}evaluate(l){for(let[f,m]of this.branches)if(f.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(let[f,m]of this.branches)l(f),l(m);l(this.otherwise)}outputDefined(){return this.branches.every(([l,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class $d{constructor(l,f,m,_){this.type=l,this.input=f,this.beginIndex=m,this.endIndex=_}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Ee),_=f.parse(l[2],2,ct);if(!m||!_)return null;if(!ve(m.type,[W(Ee),mr,Ee]))return f.error(`Expected first argument to be of type array or string, but found ${H(m.type)} instead`);if(l.length===4){let E=f.parse(l[3],3,ct);return E?new $d(m.type,m,_,E):null}return new $d(m.type,m,_)}evaluate(l){let f=this.input.evaluate(l),m=this.beginIndex.evaluate(l),_;if(this.endIndex&&(_=this.endIndex.evaluate(l)),xe(f,["string"]))return[...f].slice(m,_).join("");if(xe(f,["array"]))return f.slice(m,_);throw new Ri(`Expected first argument to be of type array or string, but found ${H(Ni(f))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Wv(c,l){let f=c.length-1,m,_,E=0,T=f,C=0;for(;E<=T;)if(C=Math.floor((E+T)/2),m=c[C],_=c[C+1],m<=l){if(C===f||l<_)return C;E=C+1}else{if(!(m>l))throw new Ri("Input is not a number.");T=C-1}return 0}class Rh{constructor(l,f,m){this.type=l,this.input=f,this.labels=[],this.outputs=[];for(let[_,E]of m)this.labels.push(_),this.outputs.push(E)}static parse(l,f){if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");let m=f.parse(l[1],1,ct);if(!m)return null;let _=[],E=null;f.expectedType&&f.expectedType.kind!=="value"&&(E=f.expectedType);for(let T=1;T<l.length;T+=2){let C=T===1?-1/0:l[T],P=l[T+1],F=T,z=T+1;if(typeof C!="number")return f.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",F);if(_.length&&_[_.length-1][0]>=C)return f.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",F);let U=f.parse(P,z,E);if(!U)return null;E=E||U.type,_.push([C,U])}return new Rh(E,m,_)}evaluate(l){let f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=f[0])return m[0].evaluate(l);let E=f.length;return _>=f[E-1]?m[E-1].evaluate(l):m[Wv(f,_)].evaluate(l)}eachChild(l){l(this.input);for(let f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function HT(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var K2=WT;function WT(c,l,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=l,this.p2x=f,this.p2y=m}WT.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,l){if(l===void 0&&(l=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var _=this.sampleCurveX(f)-c;if(Math.abs(_)<l)return f;var E=this.sampleCurveDerivativeX(f);if(Math.abs(E)<1e-6)break;f-=_/E}var T=0,C=1;for(f=c,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-c)<l));m++)c>_?T=f:C=f,f=.5*(C-T)+T;return f},solve:function(c,l){return this.sampleCurveY(this.solveCurveX(c,l))}};var X2=HT(K2);function uf(c,l,f){return c+f*(l-c)}function Hd(c,l,f){return c.map((m,_)=>uf(m,l[_],f))}let aa={number:uf,color:function(c,l,f,m="rgb"){switch(m){case"rgb":{let[_,E,T,C]=Hd(c.rgb,l.rgb,f);return new gn(_,E,T,C,!1)}case"hcl":{let[_,E,T,C]=c.hcl,[P,F,z,U]=l.hcl,Z,Y;if(isNaN(_)||isNaN(P))isNaN(_)?isNaN(P)?Z=NaN:(Z=P,T!==1&&T!==0||(Y=F)):(Z=_,z!==1&&z!==0||(Y=E));else{let ke=P-_;P>_&&ke>180?ke-=360:P<_&&_-P>180&&(ke+=360),Z=_+f*ke}let[Q,re,fe,de]=function([ke,we,Ne,He]){return ke=isNaN(ke)?0:ke*Jt,Kr([Ne,Math.cos(ke)*we,Math.sin(ke)*we,He])}([Z,Y!=null?Y:uf(E,F,f),uf(T,z,f),uf(C,U,f)]);return new gn(Q,re,fe,de,!1)}case"lab":{let[_,E,T,C]=Kr(Hd(c.lab,l.lab,f));return new gn(_,E,T,C,!1)}}},array:Hd,padding:function(c,l,f){return new Fa(Hd(c.values,l.values,f))},variableAnchorOffsetCollection:function(c,l,f){let m=c.values,_=l.values;if(m.length!==_.length)throw new Ri(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${l.toString()}`);let E=[];for(let T=0;T<m.length;T+=2){if(m[T]!==_[T])throw new Ri(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${m[T]}, to[${T}]: ${_[T]}`);E.push(m[T]);let[C,P]=m[T+1],[F,z]=_[T+1];E.push([uf(C,F,f),uf(P,z,f)])}return new ls(E)}};class sa{constructor(l,f,m,_,E){this.type=l,this.operator=f,this.interpolation=m,this.input=_,this.labels=[],this.outputs=[];for(let[T,C]of E)this.labels.push(T),this.outputs.push(C)}static interpolationFactor(l,f,m,_){let E=0;if(l.name==="exponential")E=Zv(f,l.base,m,_);else if(l.name==="linear")E=Zv(f,1,m,_);else if(l.name==="cubic-bezier"){let T=l.controlPoints;E=new X2(T[0],T[1],T[2],T[3]).solve(Zv(f,1,m,_))}return E}static parse(l,f){let[m,_,E,...T]=l;if(!Array.isArray(_)||_.length===0)return f.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){let F=_[1];if(typeof F!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:F}}else{if(_[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(_[0])}`,1,0);{let F=_.slice(1);if(F.length!==4||F.some(z=>typeof z!="number"||z<0||z>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:F}}}if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(E=f.parse(E,2,ct),!E)return null;let C=[],P=null;m==="interpolate-hcl"||m==="interpolate-lab"?P=Mi:f.expectedType&&f.expectedType.kind!=="value"&&(P=f.expectedType);for(let F=0;F<T.length;F+=2){let z=T[F],U=T[F+1],Z=F+3,Y=F+4;if(typeof z!="number")return f.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",Z);if(C.length&&C[C.length-1][0]>=z)return f.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",Z);let Q=f.parse(U,Y,P);if(!Q)return null;P=P||Q.type,C.push([z,Q])}return Te(P,ct)||Te(P,Mi)||Te(P,St)||Te(P,oe)||Te(P,W(ct))?new sa(P,m,_,E,C):f.error(`Type ${H(P)} is not interpolatable.`)}evaluate(l){let f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=f[0])return m[0].evaluate(l);let E=f.length;if(_>=f[E-1])return m[E-1].evaluate(l);let T=Wv(f,_),C=sa.interpolationFactor(this.interpolation,_,f[T],f[T+1]),P=m[T].evaluate(l),F=m[T+1].evaluate(l);switch(this.operator){case"interpolate":return aa[this.type.kind](P,F,C);case"interpolate-hcl":return aa.color(P,F,C,"hcl");case"interpolate-lab":return aa.color(P,F,C,"lab");}}eachChild(l){l(this.input);for(let f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function Zv(c,l,f,m){let _=m-f,E=c-f;return _===0?0:l===1?E/_:(Math.pow(l,E)-1)/(Math.pow(l,_)-1)}class Yv{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expectected at least one argument.");let m=null,_=f.expectedType;_&&_.kind!=="value"&&(m=_);let E=[];for(let C of l.slice(1)){let P=f.parse(C,1+E.length,m,void 0,{typeAnnotation:"omit"});if(!P)return null;m=m||P.type,E.push(P)}if(!m)throw new Error("No output type");let T=_&&E.some(C=>ae(_,C.type));return new Yv(T?Ee:m,E)}evaluate(l){let f,m=null,_=0;for(let E of this.args)if(_++,m=E.evaluate(l),m&&m instanceof ja&&!m.available&&(f||(f=m.name),m=null,_===this.args.length&&(m=f)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function Kv(c,l){return c==="=="||c==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function ZT(c,l,f,m){return m.compare(l,f)===0}function Ph(c,l,f){let m=c!=="=="&&c!=="!=";return class mRe{constructor(E,T,C){this.type=jt,this.lhs=E,this.rhs=T,this.collator=C,this.hasUntypedArgument=E.type.kind==="value"||T.type.kind==="value"}static parse(E,T){if(E.length!==3&&E.length!==4)return T.error("Expected two or three arguments.");let C=E[0],P=T.parse(E[1],1,Ee);if(!P)return null;if(!Kv(C,P.type))return T.concat(1).error(`"${C}" comparisons are not supported for type '${H(P.type)}'.`);let F=T.parse(E[2],2,Ee);if(!F)return null;if(!Kv(C,F.type))return T.concat(2).error(`"${C}" comparisons are not supported for type '${H(F.type)}'.`);if(P.type.kind!==F.type.kind&&P.type.kind!=="value"&&F.type.kind!=="value")return T.error(`Cannot compare types '${H(P.type)}' and '${H(F.type)}'.`);m&&(P.type.kind==="value"&&F.type.kind!=="value"?P=new Zs(F.type,[P]):P.type.kind!=="value"&&F.type.kind==="value"&&(F=new Zs(P.type,[F])));let z=null;if(E.length===4){if(P.type.kind!=="string"&&F.type.kind!=="string"&&P.type.kind!=="value"&&F.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(z=T.parse(E[3],3,Oe),!z)return null}return new mRe(P,F,z)}evaluate(E){let T=this.lhs.evaluate(E),C=this.rhs.evaluate(E);if(m&&this.hasUntypedArgument){let P=Ni(T),F=Ni(C);if(P.kind!==F.kind||P.kind!=="string"&&P.kind!=="number")throw new Ri(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${P.kind}, ${F.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){let P=Ni(T),F=Ni(C);if(P.kind!=="string"||F.kind!=="string")return l(E,T,C)}return this.collator?f(E,T,C,this.collator.evaluate(E)):l(E,T,C)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}}}let J2=Ph("==",function(c,l,f){return l===f},ZT),YT=Ph("!=",function(c,l,f){return l!==f},function(c,l,f,m){return!ZT(0,l,f,m)}),KT=Ph("<",function(c,l,f){return l<f},function(c,l,f,m){return m.compare(l,f)<0}),Q2=Ph(">",function(c,l,f){return l>f},function(c,l,f,m){return m.compare(l,f)>0}),eq=Ph("<=",function(c,l,f){return l<=f},function(c,l,f,m){return m.compare(l,f)<=0}),XT=Ph(">=",function(c,l,f){return l>=f},function(c,l,f,m){return m.compare(l,f)>=0});class Wd{constructor(l,f,m){this.type=Oe,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=f}static parse(l,f){if(l.length!==2)return f.error("Expected one argument.");let m=l[1];if(typeof m!="object"||Array.isArray(m))return f.error("Collator options argument must be an object.");let _=f.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,jt);if(!_)return null;let E=f.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,jt);if(!E)return null;let T=null;return m.locale&&(T=f.parse(m.locale,1,mr),!T)?null:new Wd(_,E,T)}evaluate(l){return new ux(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class mx{constructor(l,f,m,_,E){this.type=mr,this.number=l,this.locale=f,this.currency=m,this.minFractionDigits=_,this.maxFractionDigits=E}static parse(l,f){if(l.length!==3)return f.error("Expected two arguments.");let m=f.parse(l[1],1,ct);if(!m)return null;let _=l[2];if(typeof _!="object"||Array.isArray(_))return f.error("NumberFormat options argument must be an object.");let E=null;if(_.locale&&(E=f.parse(_.locale,1,mr),!E))return null;let T=null;if(_.currency&&(T=f.parse(_.currency,1,mr),!T))return null;let C=null;if(_["min-fraction-digits"]&&(C=f.parse(_["min-fraction-digits"],1,ct),!C))return null;let P=null;return _["max-fraction-digits"]&&(P=f.parse(_["max-fraction-digits"],1,ct),!P)?null:new mx(m,E,T,C,P)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Xv{constructor(l){this.type=it,this.sections=l}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m=l[1];if(!Array.isArray(m)&&typeof m=="object")return f.error("First argument must be an image or text section.");let _=[],E=!1;for(let T=1;T<=l.length-1;++T){let C=l[T];if(E&&typeof C=="object"&&!Array.isArray(C)){E=!1;let P=null;if(C["font-scale"]&&(P=f.parse(C["font-scale"],1,ct),!P))return null;let F=null;if(C["text-font"]&&(F=f.parse(C["text-font"],1,W(mr)),!F))return null;let z=null;if(C["text-color"]&&(z=f.parse(C["text-color"],1,Mi),!z))return null;let U=_[_.length-1];U.scale=P,U.font=F,U.textColor=z}else{let P=f.parse(l[T],1,Ee);if(!P)return null;let F=P.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,_.push({content:P,scale:null,font:null,textColor:null})}}return new Xv(_)}evaluate(l){return new ka(this.sections.map(f=>{let m=f.content.evaluate(l);return Ni(m)===vt?new cx("",m,null,null,null):new cx(Gd(m),null,f.scale?f.scale.evaluate(l):null,f.font?f.font.evaluate(l).join(","):null,f.textColor?f.textColor.evaluate(l):null)}))}eachChild(l){for(let f of this.sections)l(f.content),f.scale&&l(f.scale),f.font&&l(f.font),f.textColor&&l(f.textColor)}outputDefined(){return!1}}class vx{constructor(l){this.type=vt,this.input=l}static parse(l,f){if(l.length!==2)return f.error("Expected two arguments.");let m=f.parse(l[1],1,mr);return m?new vx(m):f.error("No image name provided.")}evaluate(l){let f=this.input.evaluate(l),m=ja.fromString(f);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(f)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class gx{constructor(l){this.type=ct,this.input=l}static parse(l,f){if(l.length!==2)return f.error(`Expected 1 argument, but found ${l.length-1} instead.`);let m=f.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${H(m.type)} instead.`):new gx(m):null}evaluate(l){let f=this.input.evaluate(l);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new Ri(`Expected value to be of type string or array, but found ${H(Ni(f))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}let El=8192;function tq(c,l){let f=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,_=Math.pow(2,l.z);return[Math.round(f*_*El),Math.round(m*_*El)]}function yx(c,l){let f=Math.pow(2,l.z);return[(_=(c[0]/El+l.x)/f,360*_-180),(m=(c[1]/El+l.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,_}function cf(c,l){c[0]=Math.min(c[0],l[0]),c[1]=Math.min(c[1],l[1]),c[2]=Math.max(c[2],l[0]),c[3]=Math.max(c[3],l[1])}function sc(c,l){return!(c[0]<=l[0]||c[2]>=l[2]||c[1]<=l[1]||c[3]>=l[3])}function fn(c,l,f){let m=c[0]-l[0],_=c[1]-l[1],E=c[0]-f[0],T=c[1]-f[1];return m*T-E*_==0&&m*E<=0&&_*T<=0}function Jv(c,l,f,m){return(_=[m[0]-f[0],m[1]-f[1]])[0]*(E=[l[0]-c[0],l[1]-c[1]])[1]-_[1]*E[0]!=0&&!(!QT(c,l,f,m)||!QT(f,m,c,l));var _,E}function rq(c,l,f){for(let m of f)for(let _=0;_<m.length-1;++_)if(Jv(c,l,m[_],m[_+1]))return!0;return!1}function Oh(c,l,f=!1){let m=!1;for(let C of l)for(let P=0;P<C.length-1;P++){if(fn(c,C[P],C[P+1]))return f;(E=C[P])[1]>(_=c)[1]!=(T=C[P+1])[1]>_[1]&&_[0]<(T[0]-E[0])*(_[1]-E[1])/(T[1]-E[1])+E[0]&&(m=!m)}var _,E,T;return m}function nq(c,l){for(let f of l)if(Oh(c,f))return!0;return!1}function JT(c,l){for(let f of c)if(!Oh(f,l))return!1;for(let f=0;f<c.length-1;++f)if(rq(c[f],c[f+1],l))return!1;return!0}function iq(c,l){for(let f of l)if(JT(c,f))return!0;return!1}function QT(c,l,f,m){let _=m[0]-f[0],E=m[1]-f[1],T=(c[0]-f[0])*E-_*(c[1]-f[1]),C=(l[0]-f[0])*E-_*(l[1]-f[1]);return T>0&&C<0||T<0&&C>0}function _x(c,l,f){let m=[];for(let _=0;_<c.length;_++){let E=[];for(let T=0;T<c[_].length;T++){let C=tq(c[_][T],f);cf(l,C),E.push(C)}m.push(E)}return m}function eI(c,l,f){let m=[];for(let _=0;_<c.length;_++){let E=_x(c[_],l,f);m.push(E)}return m}function tI(c,l,f,m){if(c[0]<f[0]||c[0]>f[2]){let _=.5*m,E=c[0]-f[0]>_?-m:f[0]-c[0]>_?m:0;E===0&&(E=c[0]-f[2]>_?-m:f[2]-c[0]>_?m:0),c[0]+=E}cf(l,c)}function rI(c,l,f,m){let _=Math.pow(2,m.z)*El,E=[m.x*El,m.y*El],T=[];for(let C of c)for(let P of C){let F=[P.x+E[0],P.y+E[1]];tI(F,l,f,_),T.push(F)}return T}function nI(c,l,f,m){let _=Math.pow(2,m.z)*El,E=[m.x*El,m.y*El],T=[];for(let P of c){let F=[];for(let z of P){let U=[z.x+E[0],z.y+E[1]];cf(l,U),F.push(U)}T.push(F)}if(l[2]-l[0]<=_/2){(C=l)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(let P of T)for(let F of P)tI(F,l,f,_)}var C;return T}class ff{constructor(l,f){this.type=jt,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(sf(l[1])){let m=l[1];if(m.type==="FeatureCollection"){let _=[];for(let E of m.features){let{type:T,coordinates:C}=E.geometry;T==="Polygon"&&_.push(C),T==="MultiPolygon"&&_.push(...C)}if(_.length)return new ff(m,{type:"MultiPolygon",coordinates:_})}else if(m.type==="Feature"){let _=m.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new ff(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new ff(m,m)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){let _=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],T=f.canonicalID();if(m.type==="Polygon"){let C=_x(m.coordinates,E,T),P=rI(f.geometry(),_,E,T);if(!sc(_,E))return!1;for(let F of P)if(!Oh(F,C))return!1}if(m.type==="MultiPolygon"){let C=eI(m.coordinates,E,T),P=rI(f.geometry(),_,E,T);if(!sc(_,E))return!1;for(let F of P)if(!nq(F,C))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){let _=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],T=f.canonicalID();if(m.type==="Polygon"){let C=_x(m.coordinates,E,T),P=nI(f.geometry(),_,E,T);if(!sc(_,E))return!1;for(let F of P)if(!JT(F,C))return!1}if(m.type==="MultiPolygon"){let C=eI(m.coordinates,E,T),P=nI(f.geometry(),_,E,T);if(!sc(_,E))return!1;for(let F of P)if(!iq(F,C))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let iI=class{constructor(c=[],l=(f,m)=>f<m?-1:f>m?1:0){if(this.data=c,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;let c=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),c}peek(){return this.data[0]}_up(c){let{data:l,compare:f}=this,m=l[c];for(;c>0;){let _=c-1>>1,E=l[_];if(f(m,E)>=0)break;l[c]=E,c=_}l[c]=m}_down(c){let{data:l,compare:f}=this,m=this.length>>1,_=l[c];for(;c<m;){let E=1+(c<<1),T=E+1;if(T<this.length&&f(l[T],l[E])<0&&(E=T),f(l[E],_)>=0)break;l[c]=l[E],c=E}l[c]=_}};function oq(c,l,f,m,_){oI(c,l,f,m||c.length-1,_||aq)}function oI(c,l,f,m,_){for(;m>f;){if(m-f>600){var E=m-f+1,T=l-f+1,C=Math.log(E),P=.5*Math.exp(2*C/3),F=.5*Math.sqrt(C*P*(E-P)/E)*(T-E/2<0?-1:1);oI(c,l,Math.max(f,Math.floor(l-T*P/E+F)),Math.min(m,Math.floor(l+(E-T)*P/E+F)),_)}var z=c[l],U=f,Z=m;for(Zd(c,f,l),_(c[m],z)>0&&Zd(c,f,m);U<Z;){for(Zd(c,U,Z),U++,Z--;_(c[U],z)<0;)U++;for(;_(c[Z],z)>0;)Z--}_(c[f],z)===0?Zd(c,f,Z):Zd(c,++Z,m),Z<=l&&(f=Z+1),l<=Z&&(m=Z-1)}}function Zd(c,l,f){var m=c[l];c[l]=c[f],c[f]=m}function aq(c,l){return c<l?-1:c>l?1:0}function Qv(c,l){if(c.length<=1)return[c];let f=[],m,_;for(let E of c){let T=lq(E);T!==0&&(E.area=Math.abs(T),_===void 0&&(_=T<0),_===T<0?(m&&f.push(m),m=[E]):m.push(E))}if(m&&f.push(m),l>1)for(let E=0;E<f.length;E++)f[E].length<=l||(oq(f[E],l,1,f[E].length-1,sq),f[E]=f[E].slice(0,l));return f}function sq(c,l){return l.area-c.area}function lq(c){let l=0;for(let f,m,_=0,E=c.length,T=E-1;_<E;T=_++)f=c[_],m=c[T],l+=(m.x-f.x)*(f.y+m.y);return l}let aI=1/298.257223563,sI=aI*(2-aI),lI=Math.PI/180;class xx{constructor(l){let f=6378.137*lI*1e3,m=Math.cos(l*lI),_=1/(1-sI*(1-m*m)),E=Math.sqrt(_);this.kx=f*E*m,this.ky=f*E*_*(1-sI)}distance(l,f){let m=this.wrap(l[0]-f[0])*this.kx,_=(l[1]-f[1])*this.ky;return Math.sqrt(m*m+_*_)}pointOnLine(l,f){let m,_,E,T,C=1/0;for(let P=0;P<l.length-1;P++){let F=l[P][0],z=l[P][1],U=this.wrap(l[P+1][0]-F)*this.kx,Z=(l[P+1][1]-z)*this.ky,Y=0;U===0&&Z===0||(Y=(this.wrap(f[0]-F)*this.kx*U+(f[1]-z)*this.ky*Z)/(U*U+Z*Z),Y>1?(F=l[P+1][0],z=l[P+1][1]):Y>0&&(F+=U/this.kx*Y,z+=Z/this.ky*Y)),U=this.wrap(f[0]-F)*this.kx,Z=(f[1]-z)*this.ky;let Q=U*U+Z*Z;Q<C&&(C=Q,m=F,_=z,E=P,T=Y)}return{point:[m,_],index:E,t:Math.max(0,Math.min(1,T))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function uI(c,l){return l[0]-c[0]}function eg(c){return c[1]-c[0]+1}function Su(c,l){return c[1]>=c[0]&&c[1]<l}function wx(c,l){if(c[0]>c[1])return[null,null];let f=eg(c);if(l){if(f===2)return[c,null];let _=Math.floor(f/2);return[[c[0],c[0]+_],[c[0]+_,c[1]]]}if(f===1)return[c,null];let m=Math.floor(f/2)-1;return[[c[0],c[0]+m],[c[0]+m+1,c[1]]]}function bx(c,l){if(!Su(l,c.length))return[1/0,1/0,-1/0,-1/0];let f=[1/0,1/0,-1/0,-1/0];for(let m=l[0];m<=l[1];++m)cf(f,c[m]);return f}function Sx(c){let l=[1/0,1/0,-1/0,-1/0];for(let f of c)for(let m of f)cf(l,m);return l}function tg(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function Ex(c,l,f){if(!tg(c)||!tg(l))return NaN;let m=0,_=0;return c[2]<l[0]&&(m=l[0]-c[2]),c[0]>l[2]&&(m=c[0]-l[2]),c[1]>l[3]&&(_=c[1]-l[3]),c[3]<l[1]&&(_=l[1]-c[3]),f.distance([0,0],[m,_])}function hf(c,l,f){let m=f.pointOnLine(l,c);return f.distance(c,m.point)}function Tx(c,l,f,m,_){let E=Math.min(hf(c,[f,m],_),hf(l,[f,m],_)),T=Math.min(hf(f,[c,l],_),hf(m,[c,l],_));return Math.min(E,T)}function uq(c,l,f,m,_){if(!Su(l,c.length)||!Su(m,f.length))return 1/0;let E=1/0;for(let T=l[0];T<l[1];++T){let C=c[T],P=c[T+1];for(let F=m[0];F<m[1];++F){let z=f[F],U=f[F+1];if(Jv(C,P,z,U))return 0;E=Math.min(E,Tx(C,P,z,U,_))}}return E}function mi(c,l,f,m,_){if(!Su(l,c.length)||!Su(m,f.length))return NaN;let E=1/0;for(let T=l[0];T<=l[1];++T)for(let C=m[0];C<=m[1];++C)if(E=Math.min(E,_.distance(c[T],f[C])),E===0)return E;return E}function cq(c,l,f){if(Oh(c,l,!0))return 0;let m=1/0;for(let _ of l){let E=_[0],T=_[_.length-1];if(E!==T&&(m=Math.min(m,hf(c,[T,E],f)),m===0))return m;let C=f.pointOnLine(_,c);if(m=Math.min(m,f.distance(c,C.point)),m===0)return m}return m}function qr(c,l,f,m){if(!Su(l,c.length))return NaN;for(let E=l[0];E<=l[1];++E)if(Oh(c[E],f,!0))return 0;let _=1/0;for(let E=l[0];E<l[1];++E){let T=c[E],C=c[E+1];for(let P of f)for(let F=0,z=P.length,U=z-1;F<z;U=F++){let Z=P[U],Y=P[F];if(Jv(T,C,Z,Y))return 0;_=Math.min(_,Tx(T,C,Z,Y,m))}}return _}function rg(c,l){for(let f of c)for(let m of f)if(Oh(m,l,!0))return!0;return!1}function qn(c,l,f,m=1/0){let _=Sx(c),E=Sx(l);if(m!==1/0&&Ex(_,E,f)>=m)return m;if(sc(_,E)){if(rg(c,l))return 0}else if(rg(l,c))return 0;let T=1/0;for(let C of c)for(let P=0,F=C.length,z=F-1;P<F;z=P++){let U=C[z],Z=C[P];for(let Y of l)for(let Q=0,re=Y.length,fe=re-1;Q<re;fe=Q++){let de=Y[fe],ke=Y[Q];if(Jv(U,Z,de,ke))return 0;T=Math.min(T,Tx(U,Z,de,ke,f))}}return T}function wn(c,l,f,m,_,E){if(!E)return;let T=Ex(bx(m,E),_,f);T<l&&c.push([T,E,[0,0]])}function pf(c,l,f,m,_,E,T){if(!E||!T)return;let C=Ex(bx(m,E),bx(_,T),f);C<l&&c.push([C,E,T])}function Yd(c,l,f,m,_=1/0){let E=Math.min(m.distance(c[0],f[0][0]),_);if(E===0)return E;let T=new iI([[0,[0,c.length-1],[0,0]]],uI),C=Sx(f);for(;T.length>0;){let P=T.pop();if(P[0]>=E)continue;let F=P[1],z=l?50:100;if(eg(F)<=z){if(!Su(F,c.length))return NaN;if(l){let U=qr(c,F,f,m);if(isNaN(U)||U===0)return U;E=Math.min(E,U)}else for(let U=F[0];U<=F[1];++U){let Z=cq(c[U],f,m);if(E=Math.min(E,Z),E===0)return 0}}else{let U=wx(F,l);wn(T,E,m,c,C,U[0]),wn(T,E,m,c,C,U[1])}}return E}function Kd(c,l,f,m,_,E=1/0){let T=Math.min(E,_.distance(c[0],f[0]));if(T===0)return T;let C=new iI([[0,[0,c.length-1],[0,f.length-1]]],uI);for(;C.length>0;){let P=C.pop();if(P[0]>=T)continue;let F=P[1],z=P[2],U=l?50:100,Z=m?50:100;if(eg(F)<=U&&eg(z)<=Z){if(!Su(F,c.length)&&Su(z,f.length))return NaN;let Y;if(l&&m)Y=uq(c,F,f,z,_),T=Math.min(T,Y);else if(l&&!m){let Q=c.slice(F[0],F[1]+1);for(let re=z[0];re<=z[1];++re)if(Y=hf(f[re],Q,_),T=Math.min(T,Y),T===0)return T}else if(!l&&m){let Q=f.slice(z[0],z[1]+1);for(let re=F[0];re<=F[1];++re)if(Y=hf(c[re],Q,_),T=Math.min(T,Y),T===0)return T}else Y=mi(c,F,f,z,_),T=Math.min(T,Y)}else{let Y=wx(F,l),Q=wx(z,m);pf(C,T,_,c,f,Y[0],Q[0]),pf(C,T,_,c,f,Y[0],Q[1]),pf(C,T,_,c,f,Y[1],Q[0]),pf(C,T,_,c,f,Y[1],Q[1])}}return T}function Ix(c){return c.type==="MultiPolygon"?c.coordinates.map(l=>({type:"Polygon",coordinates:l})):c.type==="MultiLineString"?c.coordinates.map(l=>({type:"LineString",coordinates:l})):c.type==="MultiPoint"?c.coordinates.map(l=>({type:"Point",coordinates:l})):[c]}class df{constructor(l,f){this.type=ct,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(sf(l[1])){let m=l[1];if(m.type==="FeatureCollection")return new df(m,m.features.map(_=>Ix(_.geometry)).flat());if(m.type==="Feature")return new df(m,Ix(m.geometry));if("type"in m&&"coordinates"in m)return new df(m,Ix(m))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){let _=f.geometry(),E=_.flat().map(P=>yx([P.x,P.y],f.canonical));if(_.length===0)return NaN;let T=new xx(E[0][1]),C=1/0;for(let P of m){switch(P.type){case"Point":C=Math.min(C,Kd(E,!1,[P.coordinates],!1,T,C));break;case"LineString":C=Math.min(C,Kd(E,!1,P.coordinates,!0,T,C));break;case"Polygon":C=Math.min(C,Yd(E,!1,P.coordinates,T,C));}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){let _=f.geometry(),E=_.flat().map(P=>yx([P.x,P.y],f.canonical));if(_.length===0)return NaN;let T=new xx(E[0][1]),C=1/0;for(let P of m){switch(P.type){case"Point":C=Math.min(C,Kd(E,!0,[P.coordinates],!1,T,C));break;case"LineString":C=Math.min(C,Kd(E,!0,P.coordinates,!0,T,C));break;case"Polygon":C=Math.min(C,Yd(E,!0,P.coordinates,T,C));}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="Polygon")return function(f,m){let _=f.geometry();if(_.length===0||_[0].length===0)return NaN;let E=Qv(_,0).map(P=>P.map(F=>F.map(z=>yx([z.x,z.y],f.canonical)))),T=new xx(E[0][0][0][1]),C=1/0;for(let P of m)for(let F of E){switch(P.type){case"Point":C=Math.min(C,Yd([P.coordinates],!1,F,T,C));break;case"LineString":C=Math.min(C,Yd(P.coordinates,!0,F,T,C));break;case"Polygon":C=Math.min(C,qn(F,P.coordinates,T,C));}if(C===0)return C}return C}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let Lh={"==":J2,"!=":YT,">":Q2,"<":KT,">=":XT,"<=":eq,array:Zs,at:hx,boolean:Zs,case:Hv,coalesce:Yv,collator:Wd,format:Xv,image:vx,in:px,"index-of":Mh,interpolate:sa,"interpolate-hcl":sa,"interpolate-lab":sa,length:gx,let:ac,literal:Ws,match:dx,number:Zs,"number-format":mx,object:Zs,slice:$d,step:Rh,string:Zs,"to-boolean":Ys,"to-color":Ys,"to-number":Ys,"to-string":Ys,var:on,within:ff,distance:df};class us{constructor(l,f,m,_){this.name=l,this.type=f,this._evaluate=m,this.args=_}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,f){let m=l[0],_=us.definitions[m];if(!_)return f.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);let E=Array.isArray(_)?_[0]:_.type,T=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,C=T.filter(([F])=>!Array.isArray(F)||F.length===l.length-1),P=null;for(let[F,z]of C){P=new lf(f.registry,Xd,f.path,null,f.scope);let U=[],Z=!1;for(let Y=1;Y<l.length;Y++){let Q=l[Y],re=Array.isArray(F)?F[Y-1]:F.type,fe=P.parse(Q,1+U.length,re);if(!fe){Z=!0;break}U.push(fe)}if(!Z)if(Array.isArray(F)&&F.length!==U.length)P.error(`Expected ${F.length} arguments, but found ${U.length} instead.`);else{for(let Y=0;Y<U.length;Y++){let Q=Array.isArray(F)?F[Y]:F.type,re=U[Y];P.concat(Y+1).checkSubtype(Q,re.type)}if(P.errors.length===0)return new us(m,E,z,U)}}if(C.length===1)f.errors.push(...P.errors);else{let F=(C.length?C:T).map(([U])=>{return Z=U,Array.isArray(Z)?`(${Z.map(H).join(", ")})`:`(${H(Z.type)}...)`;var Z}).join(" | "),z=[];for(let U=1;U<l.length;U++){let Z=f.parse(l[U],1+z.length);if(!Z)return null;z.push(H(Z.type))}f.error(`Expected arguments of type ${F}, but found (${z.join(", ")}) instead.`)}return null}static register(l,f){us.definitions=f;for(let m in f)l[m]=us}}function Ax(c,[l,f,m,_]){l=l.evaluate(c),f=f.evaluate(c),m=m.evaluate(c);let E=_?_.evaluate(c):1,T=Ch(l,f,m,E);if(T)throw new Ri(T);return new gn(l/255,f/255,m/255,E,!1)}function Cx(c,l){return c in l}function Mx(c,l){let f=l[c];return f===void 0?null:f}function mf(c){return{type:c}}function Xd(c){if(c instanceof on)return Xd(c.boundExpression);if(c instanceof us&&c.name==="error"||c instanceof Wd||c instanceof ff||c instanceof df)return!1;let l=c instanceof Ys||c instanceof Zs,f=!0;return c.eachChild(m=>{f=l?f&&Xd(m):f&&m instanceof Ws}),!!f&&Jd(c)&&Qd(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Jd(c){if(c instanceof us&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof ff||c instanceof df)return!1;let l=!0;return c.eachChild(f=>{l&&!Jd(f)&&(l=!1)}),l}function Dh(c){if(c instanceof us&&c.name==="feature-state")return!1;let l=!0;return c.eachChild(f=>{l&&!Dh(f)&&(l=!1)}),l}function Qd(c,l){if(c instanceof us&&l.indexOf(c.name)>=0)return!1;let f=!0;return c.eachChild(m=>{f&&!Qd(m,l)&&(f=!1)}),f}function ng(c){return{result:"success",value:c}}function Nh(c){return{result:"error",value:c}}function qh(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function cI(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Rx(c){return!!c.expression&&c.expression.interpolated}function tn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function ig(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function fq(c){return c}function fI(c,l){let f=l.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",_=m||!(m||c.property!==void 0),E=c.type||(Rx(l)?"exponential":"interval");if(f||l.type==="padding"){let z=f?gn.parse:Fa.parse;(c=ti({},c)).stops&&(c.stops=c.stops.map(U=>[U[0],z(U[1])])),c.default=z(c.default?c.default:l.default)}if(c.colorSpace&&(T=c.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var T;let C,P,F;if(E==="exponential")C=pI;else if(E==="interval")C=og;else if(E==="categorical"){C=hI,P=Object.create(null);for(let z of c.stops)P[z[0]]=z[1];F=typeof c.stops[0][0]}else{if(E!=="identity")throw new Error(`Unknown function type "${E}"`);C=dI}if(m){let z={},U=[];for(let Q=0;Q<c.stops.length;Q++){let re=c.stops[Q],fe=re[0].zoom;z[fe]===void 0&&(z[fe]={zoom:fe,type:c.type,property:c.property,default:c.default,stops:[]},U.push(fe)),z[fe].stops.push([re[0].value,re[1]])}let Z=[];for(let Q of U)Z.push([z[Q].zoom,fI(z[Q],l)]);let Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:sa.interpolationFactor.bind(void 0,Y),zoomStops:Z.map(Q=>Q[0]),evaluate:({zoom:Q},re)=>pI({stops:Z,base:c.base},l,Q).evaluate(Q,re)}}if(_){let z=E==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:sa.interpolationFactor.bind(void 0,z),zoomStops:c.stops.map(U=>U[0]),evaluate:({zoom:U})=>C(c,l,U,P,F)}}return{kind:"source",evaluate(z,U){let Z=U&&U.properties?U.properties[c.property]:void 0;return Z===void 0?kh(c.default,l.default):C(c,l,Z,P,F)}}}function kh(c,l,f){return c!==void 0?c:l!==void 0?l:f!==void 0?f:void 0}function hI(c,l,f,m,_){return kh(typeof f===_?m[f]:void 0,c.default,l.default)}function og(c,l,f){if(tn(f)!=="number")return kh(c.default,l.default);let m=c.stops.length;if(m===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[m-1][0])return c.stops[m-1][1];let _=Wv(c.stops.map(E=>E[0]),f);return c.stops[_][1]}function pI(c,l,f){let m=c.base!==void 0?c.base:1;if(tn(f)!=="number")return kh(c.default,l.default);let _=c.stops.length;if(_===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[_-1][0])return c.stops[_-1][1];let E=Wv(c.stops.map(z=>z[0]),f),T=function(z,U,Z,Y){let Q=Y-Z,re=z-Z;return Q===0?0:U===1?re/Q:(Math.pow(U,re)-1)/(Math.pow(U,Q)-1)}(f,m,c.stops[E][0],c.stops[E+1][0]),C=c.stops[E][1],P=c.stops[E+1][1],F=aa[l.type]||fq;return typeof C.evaluate=="function"?{evaluate(...z){let U=C.evaluate.apply(void 0,z),Z=P.evaluate.apply(void 0,z);if(U!==void 0&&Z!==void 0)return F(U,Z,T,c.colorSpace)}}:F(C,P,T,c.colorSpace)}function dI(c,l,f){switch(l.type){case"color":f=gn.parse(f);break;case"formatted":f=ka.fromString(f.toString());break;case"resolvedImage":f=ja.fromString(f.toString());break;case"padding":f=Fa.parse(f);break;default:tn(f)===l.type||l.type==="enum"&&l.values[f]||(f=void 0);}return kh(f,c.default,l.default)}us.register(Lh,{error:[{kind:"error"},[mr],(c,[l])=>{throw new Ri(l.evaluate(c))}],typeof:[mr,[Ee],(c,[l])=>H(Ni(l.evaluate(c)))],"to-rgba":[W(ct,4),[Mi],(c,[l])=>{let[f,m,_,E]=l.evaluate(c).rgb;return[255*f,255*m,255*_,E]}],rgb:[Mi,[ct,ct,ct],Ax],rgba:[Mi,[ct,ct,ct,ct],Ax],has:{type:jt,overloads:[[[mr],(c,[l])=>Cx(l.evaluate(c),c.properties())],[[mr,dn],(c,[l,f])=>Cx(l.evaluate(c),f.evaluate(c))]]},get:{type:Ee,overloads:[[[mr],(c,[l])=>Mx(l.evaluate(c),c.properties())],[[mr,dn],(c,[l,f])=>Mx(l.evaluate(c),f.evaluate(c))]]},"feature-state":[Ee,[mr],(c,[l])=>Mx(l.evaluate(c),c.featureState||{})],properties:[dn,[],c=>c.properties()],"geometry-type":[mr,[],c=>c.geometryType()],id:[Ee,[],c=>c.id()],zoom:[ct,[],c=>c.globals.zoom],"heatmap-density":[ct,[],c=>c.globals.heatmapDensity||0],"line-progress":[ct,[],c=>c.globals.lineProgress||0],accumulated:[Ee,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[ct,mf(ct),(c,l)=>{let f=0;for(let m of l)f+=m.evaluate(c);return f}],"*":[ct,mf(ct),(c,l)=>{let f=1;for(let m of l)f*=m.evaluate(c);return f}],"-":{type:ct,overloads:[[[ct,ct],(c,[l,f])=>l.evaluate(c)-f.evaluate(c)],[[ct],(c,[l])=>-l.evaluate(c)]]},"/":[ct,[ct,ct],(c,[l,f])=>l.evaluate(c)/f.evaluate(c)],"%":[ct,[ct,ct],(c,[l,f])=>l.evaluate(c)%f.evaluate(c)],ln2:[ct,[],()=>Math.LN2],pi:[ct,[],()=>Math.PI],e:[ct,[],()=>Math.E],"^":[ct,[ct,ct],(c,[l,f])=>Math.pow(l.evaluate(c),f.evaluate(c))],sqrt:[ct,[ct],(c,[l])=>Math.sqrt(l.evaluate(c))],log10:[ct,[ct],(c,[l])=>Math.log(l.evaluate(c))/Math.LN10],ln:[ct,[ct],(c,[l])=>Math.log(l.evaluate(c))],log2:[ct,[ct],(c,[l])=>Math.log(l.evaluate(c))/Math.LN2],sin:[ct,[ct],(c,[l])=>Math.sin(l.evaluate(c))],cos:[ct,[ct],(c,[l])=>Math.cos(l.evaluate(c))],tan:[ct,[ct],(c,[l])=>Math.tan(l.evaluate(c))],asin:[ct,[ct],(c,[l])=>Math.asin(l.evaluate(c))],acos:[ct,[ct],(c,[l])=>Math.acos(l.evaluate(c))],atan:[ct,[ct],(c,[l])=>Math.atan(l.evaluate(c))],min:[ct,mf(ct),(c,l)=>Math.min(...l.map(f=>f.evaluate(c)))],max:[ct,mf(ct),(c,l)=>Math.max(...l.map(f=>f.evaluate(c)))],abs:[ct,[ct],(c,[l])=>Math.abs(l.evaluate(c))],round:[ct,[ct],(c,[l])=>{let f=l.evaluate(c);return f<0?-Math.round(-f):Math.round(f)}],floor:[ct,[ct],(c,[l])=>Math.floor(l.evaluate(c))],ceil:[ct,[ct],(c,[l])=>Math.ceil(l.evaluate(c))],"filter-==":[jt,[mr,Ee],(c,[l,f])=>c.properties()[l.value]===f.value],"filter-id-==":[jt,[Ee],(c,[l])=>c.id()===l.value],"filter-type-==":[jt,[mr],(c,[l])=>c.geometryType()===l.value],"filter-<":[jt,[mr,Ee],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m<_}],"filter-id-<":[jt,[Ee],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f<m}],"filter->":[jt,[mr,Ee],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m>_}],"filter-id->":[jt,[Ee],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f>m}],"filter-<=":[jt,[mr,Ee],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m<=_}],"filter-id-<=":[jt,[Ee],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f<=m}],"filter->=":[jt,[mr,Ee],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m>=_}],"filter-id->=":[jt,[Ee],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f>=m}],"filter-has":[jt,[Ee],(c,[l])=>l.value in c.properties()],"filter-has-id":[jt,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[jt,[W(mr)],(c,[l])=>l.value.indexOf(c.geometryType())>=0],"filter-id-in":[jt,[W(Ee)],(c,[l])=>l.value.indexOf(c.id())>=0],"filter-in-small":[jt,[mr,W(Ee)],(c,[l,f])=>f.value.indexOf(c.properties()[l.value])>=0],"filter-in-large":[jt,[mr,W(Ee)],(c,[l,f])=>function(m,_,E,T){for(;E<=T;){let C=E+T>>1;if(_[C]===m)return!0;_[C]>m?T=C-1:E=C+1}return!1}(c.properties()[l.value],f.value,0,f.value.length-1)],all:{type:jt,overloads:[[[jt,jt],(c,[l,f])=>l.evaluate(c)&&f.evaluate(c)],[mf(jt),(c,l)=>{for(let f of l)if(!f.evaluate(c))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],(c,[l,f])=>l.evaluate(c)||f.evaluate(c)],[mf(jt),(c,l)=>{for(let f of l)if(f.evaluate(c))return!0;return!1}]]},"!":[jt,[jt],(c,[l])=>!l.evaluate(c)],"is-supported-script":[jt,[mr],(c,[l])=>{let f=c.globals&&c.globals.isSupportedScript;return!f||f(l.evaluate(c))}],upcase:[mr,[mr],(c,[l])=>l.evaluate(c).toUpperCase()],downcase:[mr,[mr],(c,[l])=>l.evaluate(c).toLowerCase()],concat:[mr,mf(Ee),(c,l)=>l.map(f=>Gd(f.evaluate(c))).join("")],"resolved-locale":[mr,[Oe],(c,[l])=>l.evaluate(c).resolvedLocale()]});class ag{constructor(l,f){var m;this.expression=l,this._warningHistory={},this._evaluator=new $v,this._defaultValue=f?(m=f).type==="color"&&ig(m.default)?new gn(0,0,0,0):m.type==="color"?gn.parse(m.default)||null:m.type==="padding"?Fa.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?ls.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(l,f,m,_,E,T){return this._evaluator.globals=l,this._evaluator.feature=f,this._evaluator.featureState=m,this._evaluator.canonical=_,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(l,f,m,_,E,T){this._evaluator.globals=l,this._evaluator.feature=f||null,this._evaluator.featureState=m||null,this._evaluator.canonical=_,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=T||null;try{let C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Ri(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console!="undefined"&&console.warn(C.message)),this._defaultValue}}}function sg(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Lh}function Fh(c,l){let f=new lf(Lh,Xd,[],l?function(_){let E={color:Mi,string:mr,number:ct,enum:mr,boolean:jt,formatted:it,padding:St,resolvedImage:vt,variableAnchorOffsetCollection:oe};return _.type==="array"?W(E[_.value]||Ee,_.length):E[_.type]}(l):void 0),m=f.parse(c,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?ng(new ag(m,l)):Nh(f.errors)}class jh{constructor(l,f){this.kind=l,this._styleExpression=f,this.isStateDependent=l!=="constant"&&!Dh(f.expression)}evaluateWithoutErrorHandling(l,f,m,_,E,T){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,_,E,T)}evaluate(l,f,m,_,E,T){return this._styleExpression.evaluate(l,f,m,_,E,T)}}class zh{constructor(l,f,m,_){this.kind=l,this.zoomStops=m,this._styleExpression=f,this.isStateDependent=l!=="camera"&&!Dh(f.expression),this.interpolationType=_}evaluateWithoutErrorHandling(l,f,m,_,E,T){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,_,E,T)}evaluate(l,f,m,_,E,T){return this._styleExpression.evaluate(l,f,m,_,E,T)}interpolationFactor(l,f,m){return this.interpolationType?sa.interpolationFactor(this.interpolationType,l,f,m):0}}function Px(c,l){let f=Fh(c,l);if(f.result==="error")return f;let m=f.value.expression,_=Jd(m);if(!_&&!qh(l))return Nh([new Cn("","data expressions not supported")]);let E=Qd(m,["zoom"]);if(!E&&!cI(l))return Nh([new Cn("","zoom expressions not supported")]);let T=em(m);return T||E?T instanceof Cn?Nh([T]):T instanceof sa&&!Rx(l)?Nh([new Cn("","\"interpolate\" expressions cannot be used with this property")]):ng(T?new zh(_?"camera":"composite",f.value,T.labels,T instanceof sa?T.interpolation:void 0):new jh(_?"constant":"source",f.value)):Nh([new Cn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class Bh{constructor(l,f){this._parameters=l,this._specification=f,ti(this,fI(this._parameters,this._specification))}static deserialize(l){return new Bh(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function em(c){let l=null;if(c instanceof ac)l=em(c.result);else if(c instanceof Yv){for(let f of c.args)if(l=em(f),l)break}else(c instanceof Rh||c instanceof sa)&&c.input instanceof us&&c.input.name==="zoom"&&(l=c);return l instanceof Cn||c.eachChild(f=>{let m=em(f);m instanceof Cn?l=m:!l&&m?l=new Cn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):l&&m&&l!==m&&(l=new Cn("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),l}function lg(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(let l of c.slice(1))if(!lg(l)&&typeof l!="boolean")return!1;return!0;default:return!0;}}let ug={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ox(c){if(c==null)return{filter:()=>!0,needGeometry:!1};lg(c)||(c=cg(c));let l=Fh(c,ug);if(l.result==="error")throw new Error(l.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,m,_)=>l.value.evaluate(f,m,{},_),needGeometry:mI(c)}}function hq(c,l){return c<l?-1:c>l?1:0}function mI(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let l=1;l<c.length;l++)if(mI(c[l]))return!0;return!1}function cg(c){if(!c)return!0;let l=c[0];return c.length<=1?l!=="any":l==="=="?Lx(c[1],c[2],"=="):l==="!="?bo(Lx(c[1],c[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Lx(c[1],c[2],l):l==="any"?(f=c.slice(1),["any"].concat(f.map(cg))):l==="all"?["all"].concat(c.slice(1).map(cg)):l==="none"?["all"].concat(c.slice(1).map(cg).map(bo)):l==="in"?tm(c[1],c.slice(2)):l==="!in"?bo(tm(c[1],c.slice(2))):l==="has"?rm(c[1]):l!=="!has"||bo(rm(c[1]));var f}function Lx(c,l,f){switch(c){case"$type":return[`filter-type-${f}`,l];case"$id":return[`filter-id-${f}`,l];default:return[`filter-${f}`,c,l];}}function tm(c,l){if(l.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(f=>typeof f!=typeof l[0])?["filter-in-large",c,["literal",l.sort(hq)]]:["filter-in-small",c,["literal",l]];}}function rm(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c];}}function bo(c){return["!",c]}function vf(c){let l=typeof c;if(l==="number"||l==="boolean"||l==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let _="[";for(let E of c)_+=`${vf(E)},`;return`${_}]`}let f=Object.keys(c).sort(),m="{";for(let _=0;_<f.length;_++)m+=`${JSON.stringify(f[_])}:${vf(c[f[_]])},`;return`${m}}`}function vI(c){let l="";for(let f of Yt)l+=`/${vf(c[f])}`;return l}function gI(c){let l=c.value;return l?[new nt(c.key,l,"constants have been deprecated as of v8")]:[]}function vi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Ks(c){if(Array.isArray(c))return c.map(Ks);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){let l={};for(let f in c)l[f]=Ks(c[f]);return l}return vi(c)}function za(c){let l=c.key,f=c.value,m=c.valueSpec||{},_=c.objectElementValidators||{},E=c.style,T=c.styleSpec,C=c.validateSpec,P=[],F=tn(f);if(F!=="object")return[new nt(l,f,`object expected, ${F} found`)];for(let z in f){let U=z.split(".")[0],Z=m[U]||m["*"],Y;if(_[U])Y=_[U];else if(m[U])Y=C;else if(_["*"])Y=_["*"];else{if(!m["*"]){P.push(new nt(l,f[z],`unknown property "${z}"`));continue}Y=C}P=P.concat(Y({key:(l&&`${l}.`)+z,value:f[z],valueSpec:Z,style:E,styleSpec:T,object:f,objectKey:z,validateSpec:C},f))}for(let z in m)_[z]||m[z].required&&m[z].default===void 0&&f[z]===void 0&&P.push(new nt(l,f,`missing required property "${z}"`));return P}function nm(c){let l=c.value,f=c.valueSpec,m=c.style,_=c.styleSpec,E=c.key,T=c.arrayElementValidator||c.validateSpec;if(tn(l)!=="array")return[new nt(E,l,`array expected, ${tn(l)} found`)];if(f.length&&l.length!==f.length)return[new nt(E,l,`array length ${f.length} expected, length ${l.length} found`)];if(f["min-length"]&&l.length<f["min-length"])return[new nt(E,l,`array length at least ${f["min-length"]} expected, length ${l.length} found`)];let C={type:f.value,values:f.values};_.$version<7&&(C.function=f.function),tn(f.value)==="object"&&(C=f.value);let P=[];for(let F=0;F<l.length;F++)P=P.concat(T({array:l,arrayIndex:F,value:l[F],valueSpec:C,validateSpec:c.validateSpec,style:m,styleSpec:_,key:`${E}[${F}]`}));return P}function Dx(c){let l=c.key,f=c.value,m=c.valueSpec,_=tn(f);return _==="number"&&f!=f&&(_="NaN"),_!=="number"?[new nt(l,f,`number expected, ${_} found`)]:"minimum"in m&&f<m.minimum?[new nt(l,f,`${f} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&f>m.maximum?[new nt(l,f,`${f} is greater than the maximum value ${m.maximum}`)]:[]}function fg(c){let l=c.valueSpec,f=vi(c.value.type),m,_,E,T={},C=f!=="categorical"&&c.value.property===void 0,P=!C,F=tn(c.value.stops)==="array"&&tn(c.value.stops[0])==="array"&&tn(c.value.stops[0][0])==="object",z=za({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Y){if(f==="identity")return[new nt(Y.key,Y.value,"identity function may not have a \"stops\" property")];let Q=[],re=Y.value;return Q=Q.concat(nm({key:Y.key,value:re,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:U})),tn(re)==="array"&&re.length===0&&Q.push(new nt(Y.key,re,"array must have at least one stop")),Q},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:l,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return f==="identity"&&C&&z.push(new nt(c.key,c.value,"missing required property \"property\"")),f==="identity"||c.value.stops||z.push(new nt(c.key,c.value,"missing required property \"stops\"")),f==="exponential"&&c.valueSpec.expression&&!Rx(c.valueSpec)&&z.push(new nt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(P&&!qh(c.valueSpec)?z.push(new nt(c.key,c.value,"property functions not supported")):C&&!cI(c.valueSpec)&&z.push(new nt(c.key,c.value,"zoom functions not supported"))),f!=="categorical"&&!F||c.value.property!==void 0||z.push(new nt(c.key,c.value,"\"property\" property is required")),z;function U(Y){let Q=[],re=Y.value,fe=Y.key;if(tn(re)!=="array")return[new nt(fe,re,`array expected, ${tn(re)} found`)];if(re.length!==2)return[new nt(fe,re,`array length 2 expected, length ${re.length} found`)];if(F){if(tn(re[0])!=="object")return[new nt(fe,re,`object expected, ${tn(re[0])} found`)];if(re[0].zoom===void 0)return[new nt(fe,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new nt(fe,re,"object stop key must have value")];if(E&&E>vi(re[0].zoom))return[new nt(fe,re[0].zoom,"stop zoom values must appear in ascending order")];vi(re[0].zoom)!==E&&(E=vi(re[0].zoom),_=void 0,T={}),Q=Q.concat(za({key:`${fe}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Dx,value:Z}}))}else Q=Q.concat(Z({key:`${fe}[0]`,value:re[0],valueSpec:{},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},re));return sg(Ks(re[1]))?Q.concat([new nt(`${fe}[1]`,re[1],"expressions are not allowed in function stops.")]):Q.concat(Y.validateSpec({key:`${fe}[1]`,value:re[1],valueSpec:l,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function Z(Y,Q){let re=tn(Y.value),fe=vi(Y.value),de=Y.value!==null?Y.value:Q;if(m){if(re!==m)return[new nt(Y.key,de,`${re} stop domain type must match previous stop domain type ${m}`)]}else m=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new nt(Y.key,de,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&f!=="categorical"){let ke=`number expected, ${re} found`;return qh(l)&&f===void 0&&(ke+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new nt(Y.key,de,ke)]}return f!=="categorical"||re!=="number"||isFinite(fe)&&Math.floor(fe)===fe?f!=="categorical"&&re==="number"&&_!==void 0&&fe<_?[new nt(Y.key,de,"stop domain values must appear in ascending order")]:(_=fe,f==="categorical"&&fe in T?[new nt(Y.key,de,"stop domain values must be unique")]:(T[fe]=!0,[])):[new nt(Y.key,de,`integer expected, found ${fe}`)]}}function Uh(c){let l=(c.expressionContext==="property"?Px:Fh)(Ks(c.value),c.valueSpec);if(l.result==="error")return l.value.map(m=>new nt(`${c.key}${m.key}`,c.value,m.message));let f=l.value.expression||l.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!f.outputDefined())return[new nt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Dh(f))return[new nt(c.key,c.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(c.expressionContext==="filter"&&!Dh(f))return[new nt(c.key,c.value,"\"feature-state\" data expressions are not supported with filters.")];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Qd(f,["zoom","feature-state"]))return[new nt(c.key,c.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(c.expressionContext==="cluster-initial"&&!Jd(f))return[new nt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Eu(c){let l=c.key,f=c.value,m=c.valueSpec,_=[];return Array.isArray(m.values)?m.values.indexOf(vi(f))===-1&&_.push(new nt(l,f,`expected one of [${m.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(m.values).indexOf(vi(f))===-1&&_.push(new nt(l,f,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(f)} found`)),_}function Nx(c){return lg(Ks(c.value))?Uh(ti({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):hg(c)}function hg(c){let l=c.value,f=c.key;if(tn(l)!=="array")return[new nt(f,l,`array expected, ${tn(l)} found`)];let m=c.styleSpec,_,E=[];if(l.length<1)return[new nt(f,l,"filter array must have at least 1 element")];switch(E=E.concat(Eu({key:`${f}[0]`,value:l[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),vi(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&vi(l[1])==="$type"&&E.push(new nt(f,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&E.push(new nt(f,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(_=tn(l[1]),_!=="string"&&E.push(new nt(`${f}[1]`,l[1],`string expected, ${_} found`)));for(let T=2;T<l.length;T++)_=tn(l[T]),vi(l[1])==="$type"?E=E.concat(Eu({key:`${f}[${T}]`,value:l[T],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&E.push(new nt(`${f}[${T}]`,l[T],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let T=1;T<l.length;T++)E=E.concat(hg({key:`${f}[${T}]`,value:l[T],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":_=tn(l[1]),l.length!==2?E.push(new nt(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):_!=="string"&&E.push(new nt(`${f}[1]`,l[1],`string expected, ${_} found`));}return E}function qx(c,l){let f=c.key,m=c.validateSpec,_=c.style,E=c.styleSpec,T=c.value,C=c.objectKey,P=E[`${l}_${c.layerType}`];if(!P)return[];let F=C.match(/^(.*)-transition$/);if(l==="paint"&&F&&P[F[1]]&&P[F[1]].transition)return m({key:f,value:T,valueSpec:E.transition,style:_,styleSpec:E});let z=c.valueSpec||P[C];if(!z)return[new nt(f,T,`unknown property "${C}"`)];let U;if(tn(T)==="string"&&qh(z)&&!z.tokens&&(U=/^{([^}]+)}$/.exec(T)))return[new nt(f,T,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(U[1])} }\`.`)];let Z=[];return c.layerType==="symbol"&&(C==="text-field"&&_&&!_.glyphs&&Z.push(new nt(f,T,"use of \"text-field\" requires a style \"glyphs\" property")),C==="text-font"&&ig(Ks(T))&&vi(T.type)==="identity"&&Z.push(new nt(f,T,"\"text-font\" does not support identity functions"))),Z.concat(m({key:c.key,value:T,valueSpec:z,style:_,styleSpec:E,expressionContext:"property",propertyType:l,propertyKey:C}))}function pg(c){return qx(c,"paint")}function kx(c){return qx(c,"layout")}function Fx(c){let l=[],f=c.value,m=c.key,_=c.style,E=c.styleSpec;f.type||f.ref||l.push(new nt(m,f,"either \"type\" or \"ref\" is required"));let T=vi(f.type),C=vi(f.ref);if(f.id){let P=vi(f.id);for(let F=0;F<c.arrayIndex;F++){let z=_.layers[F];vi(z.id)===P&&l.push(new nt(m,f.id,`duplicate layer id "${f.id}", previously used at line ${z.id.__line__}`))}}if("ref"in f){let P;["type","source","source-layer","filter","layout"].forEach(F=>{F in f&&l.push(new nt(m,f[F],`"${F}" is prohibited for ref layers`))}),_.layers.forEach(F=>{vi(F.id)===C&&(P=F)}),P?P.ref?l.push(new nt(m,f.ref,"ref cannot reference another ref layer")):T=vi(P.type):l.push(new nt(m,f.ref,`ref layer "${C}" not found`))}else if(T!=="background")if(f.source){let P=_.sources&&_.sources[f.source],F=P&&vi(P.type);P?F==="vector"&&T==="raster"?l.push(new nt(m,f.source,`layer "${f.id}" requires a raster source`)):F!=="raster-dem"&&T==="hillshade"?l.push(new nt(m,f.source,`layer "${f.id}" requires a raster-dem source`)):F==="raster"&&T!=="raster"?l.push(new nt(m,f.source,`layer "${f.id}" requires a vector source`)):F!=="vector"||f["source-layer"]?F==="raster-dem"&&T!=="hillshade"?l.push(new nt(m,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!f.paint||!f.paint["line-gradient"]||F==="geojson"&&P.lineMetrics||l.push(new nt(m,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new nt(m,f,`layer "${f.id}" must specify a "source-layer"`)):l.push(new nt(m,f.source,`source "${f.source}" not found`))}else l.push(new nt(m,f,"missing required property \"source\""));return l=l.concat(za({key:m,value:f,valueSpec:E.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:f.type,valueSpec:E.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:f,objectKey:"type"}),filter:Nx,layout:P=>za({layer:f,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>kx(ti({layerType:T},F))}}),paint:P=>za({layer:f,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>pg(ti({layerType:T},F))}})}})),l}function gf(c){let l=c.value,f=c.key,m=tn(l);return m!=="string"?[new nt(f,l,`string expected, ${m} found`)]:[]}let dg={promoteId:function({key:c,value:l}){if(tn(l)==="string")return gf({key:c,value:l});{let f=[];for(let m in l)f.push(...gf({key:`${c}.${m}`,value:l[m]}));return f}}};function im(c){let l=c.value,f=c.key,m=c.styleSpec,_=c.style,E=c.validateSpec;if(!l.type)return[new nt(f,l,"\"type\" is required")];let T=vi(l.type),C;switch(T){case"vector":case"raster":return C=za({key:f,value:l,valueSpec:m[`source_${T.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:dg,validateSpec:E}),C;case"raster-dem":return C=function(P){var F;let z=(F=P.sourceName)!==null&&F!==void 0?F:"",U=P.value,Z=P.styleSpec,Y=Z.source_raster_dem,Q=P.style,re=[],fe=tn(U);if(U===void 0)return re;if(fe!=="object")return re.push(new nt("source_raster_dem",U,`object expected, ${fe} found`)),re;let de=vi(U.encoding)==="custom",ke=["redFactor","greenFactor","blueFactor","baseShift"],we=P.value.encoding?`"${P.value.encoding}"`:"Default";for(let Ne in U)!de&&ke.includes(Ne)?re.push(new nt(Ne,U[Ne],`In "${z}": "${Ne}" is only valid when "encoding" is set to "custom". ${we} encoding found`)):Y[Ne]?re=re.concat(P.validateSpec({key:Ne,value:U[Ne],valueSpec:Y[Ne],validateSpec:P.validateSpec,style:Q,styleSpec:Z})):re.push(new nt(Ne,U[Ne],`unknown property "${Ne}"`));return re}({sourceName:f,value:l,style:c.style,styleSpec:m,validateSpec:E}),C;case"geojson":if(C=za({key:f,value:l,valueSpec:m.source_geojson,style:_,styleSpec:m,validateSpec:E,objectElementValidators:dg}),l.cluster)for(let P in l.clusterProperties){let[F,z]=l.clusterProperties[P],U=typeof F=="string"?[F,["accumulated"],["get",P]]:F;C.push(...Uh({key:`${f}.${P}.map`,value:z,validateSpec:E,expressionContext:"cluster-map"})),C.push(...Uh({key:`${f}.${P}.reduce`,value:U,validateSpec:E,expressionContext:"cluster-reduce"}))}return C;case"video":return za({key:f,value:l,valueSpec:m.source_video,style:_,validateSpec:E,styleSpec:m});case"image":return za({key:f,value:l,valueSpec:m.source_image,style:_,validateSpec:E,styleSpec:m});case"canvas":return[new nt(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Eu({key:`${f}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,validateSpec:E,styleSpec:m});}}function jx(c){let l=c.value,f=c.styleSpec,m=f.light,_=c.style,E=[],T=tn(l);if(l===void 0)return E;if(T!=="object")return E=E.concat([new nt("light",l,`object expected, ${T} found`)]),E;for(let C in l){let P=C.match(/^(.*)-transition$/);E=E.concat(P&&m[P[1]]&&m[P[1]].transition?c.validateSpec({key:C,value:l[C],valueSpec:f.transition,validateSpec:c.validateSpec,style:_,styleSpec:f}):m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:c.validateSpec,style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)])}return E}function zx(c){let l=c.value,f=c.styleSpec,m=f.sky,_=c.style,E=tn(l);if(l===void 0)return[];if(E!=="object")return[new nt("sky",l,`object expected, ${E} found`)];let T=[];for(let C in l)T=T.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return T}function Bx(c){let l=c.value,f=c.styleSpec,m=f.terrain,_=c.style,E=[],T=tn(l);if(l===void 0)return E;if(T!=="object")return E=E.concat([new nt("terrain",l,`object expected, ${T} found`)]),E;for(let C in l)E=E.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:c.validateSpec,style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return E}function Ux(c){let l=[],f=c.value,m=c.key;if(Array.isArray(f)){let _=[],E=[];for(let T in f)f[T].id&&_.includes(f[T].id)&&l.push(new nt(m,f,`all the sprites' ids must be unique, but ${f[T].id} is duplicated`)),_.push(f[T].id),f[T].url&&E.includes(f[T].url)&&l.push(new nt(m,f,`all the sprites' URLs must be unique, but ${f[T].url} is duplicated`)),E.push(f[T].url),l=l.concat(za({key:`${m}[${T}]`,value:f[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return l}return gf({key:m,value:f})}let mg={"*":()=>[],array:nm,boolean:function(c){let l=c.value,f=c.key,m=tn(l);return m!=="boolean"?[new nt(f,l,`boolean expected, ${m} found`)]:[]},number:Dx,color:function(c){let l=c.key,f=c.value,m=tn(f);return m!=="string"?[new nt(l,f,`color expected, ${m} found`)]:gn.parse(String(f))?[]:[new nt(l,f,`color expected, "${f}" found`)]},constants:gI,enum:Eu,filter:Nx,function:fg,layer:Fx,object:za,source:im,light:jx,sky:zx,terrain:Bx,projection:function(c){let l=c.value,f=c.styleSpec,m=f.projection,_=c.style,E=tn(l);if(l===void 0)return[];if(E!=="object")return[new nt("projection",l,`object expected, ${E} found`)];let T=[];for(let C in l)T=T.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return T},string:gf,formatted:function(c){return gf(c).length===0?[]:Uh(c)},resolvedImage:function(c){return gf(c).length===0?[]:Uh(c)},padding:function(c){let l=c.key,f=c.value;if(tn(f)==="array"){if(f.length<1||f.length>4)return[new nt(l,f,`padding requires 1 to 4 values; ${f.length} values found`)];let m={type:"number"},_=[];for(let E=0;E<f.length;E++)_=_.concat(c.validateSpec({key:`${l}[${E}]`,value:f[E],validateSpec:c.validateSpec,valueSpec:m}));return _}return Dx({key:l,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(c){let l=c.key,f=c.value,m=tn(f),_=c.styleSpec;if(m!=="array"||f.length<1||f.length%2!=0)return[new nt(l,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let E=[];for(let T=0;T<f.length;T+=2)E=E.concat(Eu({key:`${l}[${T}]`,value:f[T],valueSpec:_.layout_symbol["text-anchor"]})),E=E.concat(nm({key:`${l}[${T+1}]`,value:f[T+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:_}));return E},sprite:Ux};function Vh(c){let l=c.value,f=c.valueSpec,m=c.styleSpec;return c.validateSpec=Vh,f.expression&&ig(vi(l))?fg(c):f.expression&&sg(Ks(l))?Uh(c):f.type&&mg[f.type]?mg[f.type](c):za(ti({},c,{valueSpec:f.type?m[f.type]:f}))}function yI(c){let l=c.value,f=c.key,m=gf(c);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new nt(f,l,"\"glyphs\" url must include a \"{fontstack}\" token")),l.indexOf("{range}")===-1&&m.push(new nt(f,l,"\"glyphs\" url must include a \"{range}\" token"))),m}function cs(c,l=be){let f=[];return f=f.concat(Vh({key:"",value:c,valueSpec:l.$root,styleSpec:l,style:c,validateSpec:Vh,objectElementValidators:{glyphs:yI,"*":()=>[]}})),c.constants&&(f=f.concat(gI({key:"constants",value:c.constants,style:c,styleSpec:l,validateSpec:Vh}))),Vx(f)}function Tl(c){return function(l){return c(En(Tt({},l),{validateSpec:Vh}))}}function Vx(c){return[].concat(c).sort((l,f)=>l.line-f.line)}function Xs(c){return function(...l){return Vx(c.apply(this,l))}}cs.source=Xs(Tl(im)),cs.sprite=Xs(Tl(Ux)),cs.glyphs=Xs(Tl(yI)),cs.light=Xs(Tl(jx)),cs.sky=Xs(Tl(zx)),cs.terrain=Xs(Tl(Bx)),cs.layer=Xs(Tl(Fx)),cs.filter=Xs(Tl(Nx)),cs.paintProperty=Xs(Tl(pg)),cs.layoutProperty=Xs(Tl(kx));let yf=cs,pq=yf.light,dq=yf.sky,_I=yf.paintProperty,xI=yf.layoutProperty;function Gx(c,l){let f=!1;if(l&&l.length)for(let m of l)c.fire(new Gt(new Error(m.message))),f=!0;return f}class Gh{constructor(l,f,m){let _=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;let T=new Int32Array(this.arrayBuffer);l=T[0],this.d=(f=T[1])+2*(m=T[2]);for(let P=0;P<this.d*this.d;P++){let F=T[3+P],z=T[3+P+1];_.push(F===z?null:T.subarray(F,z))}let C=T[3+_.length+1];this.keys=T.subarray(T[3+_.length],C),this.bboxes=T.subarray(C),this.insert=this._insertReadonly}else{this.d=f+2*m;for(let T=0;T<this.d*this.d;T++)_.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=m,this.scale=f/l,this.uid=0;let E=m/f*l;this.min=-E,this.max=l+E}insert(l,f,m,_,E){this._forEachCell(f,m,_,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,f,m,_,E,T){this.cells[E].push(T)}query(l,f,m,_,E){let T=this.min,C=this.max;if(l<=T&&f<=T&&C<=m&&C<=_&&!E)return Array.prototype.slice.call(this.keys);{let P=[];return this._forEachCell(l,f,m,_,this._queryCell,P,{},E),P}}_queryCell(l,f,m,_,E,T,C,P){let F=this.cells[E];if(F!==null){let z=this.keys,U=this.bboxes;for(let Z=0;Z<F.length;Z++){let Y=F[Z];if(C[Y]===void 0){let Q=4*Y;(P?P(U[Q+0],U[Q+1],U[Q+2],U[Q+3]):l<=U[Q+2]&&f<=U[Q+3]&&m>=U[Q+0]&&_>=U[Q+1])?(C[Y]=!0,T.push(z[Y])):C[Y]=!1}}}}_forEachCell(l,f,m,_,E,T,C,P){let F=this._convertToCellCoord(l),z=this._convertToCellCoord(f),U=this._convertToCellCoord(m),Z=this._convertToCellCoord(_);for(let Y=F;Y<=U;Y++)for(let Q=z;Q<=Z;Q++){let re=this.d*Q+Y;if((!P||P(this._convertFromCellCoord(Y),this._convertFromCellCoord(Q),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(Q+1)))&&E.call(this,l,f,m,_,re,T,C,P))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let l=this.cells,f=3+this.cells.length+1+1,m=0;for(let T=0;T<this.cells.length;T++)m+=this.cells[T].length;let _=new Int32Array(f+m+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let E=f;for(let T=0;T<l.length;T++){let C=l[T];_[3+T]=E,_.set(C,E),E+=C.length}return _[3+l.length]=E,_.set(this.keys,E),E+=this.keys.length,_[3+l.length+1]=E,_.set(this.bboxes,E),E+=this.bboxes.length,_.buffer}static serialize(l,f){let m=l.toArrayBuffer();return f&&f.push(m),{buffer:m}}static deserialize(l){return new Gh(l.buffer)}}let fs={};function qt(c,l,f={}){if(fs[c])throw new Error(`${c} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:c,writeable:!1}),fs[c]={klass:l,omit:f.omit||[],shallow:f.shallow||[]}}qt("Object",Object),qt("TransferableGridIndex",Gh),qt("Color",gn),qt("Error",Error),qt("AJAXError",Le),qt("ResolvedImage",ja),qt("StylePropertyFunction",Bh),qt("StyleExpression",ag,{omit:["_evaluator"]}),qt("ZoomDependentExpression",zh),qt("ZoomConstantExpression",jh),qt("CompoundExpression",us,{omit:["_evaluate"]});for(let c in Lh)Lh[c]._classRegistryKey||qt(`Expression_${c}`,Lh[c]);function vg(c){return c&&typeof ArrayBuffer!="undefined"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function $x(c){return c.$name||c.constructor._classRegistryKey}function wI(c){return!function(l){if(l===null||typeof l!="object")return!1;let f=$x(l);return!(!f||f==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||vg(c)||Ke(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function $h(c,l){if(wI(c))return(vg(c)||Ke(c))&&l&&l.push(c),ArrayBuffer.isView(c)&&l&&l.push(c.buffer),c instanceof ImageData&&l&&l.push(c.data.buffer),c;if(Array.isArray(c)){let E=[];for(let T of c)E.push($h(T,l));return E}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);let f=$x(c);if(!f)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!fs[f])throw new Error(`${f} is not registered.`);let{klass:m}=fs[f],_=m.serialize?m.serialize(c,l):{};if(m.serialize){if(l&&_===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let E in c){if(!c.hasOwnProperty(E)||fs[f].omit.indexOf(E)>=0)continue;let T=c[E];_[E]=fs[f].shallow.indexOf(E)>=0?T:$h(T,l)}c instanceof Error&&(_.message=c.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(_.$name=f),_}function Hh(c){if(wI(c))return c;if(Array.isArray(c))return c.map(Hh);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);let l=$x(c)||"Object";if(!fs[l])throw new Error(`can't deserialize unregistered class ${l}`);let{klass:f}=fs[l];if(!f)throw new Error(`can't deserialize unregistered class ${l}`);if(f.deserialize)return f.deserialize(c);let m=Object.create(f.prototype);for(let _ of Object.keys(c)){if(_==="$name")continue;let E=c[_];m[_]=fs[l].shallow.indexOf(_)>=0?E:Hh(E)}return m}class Hx{constructor(){this.first=!0}update(l,f){let m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=f),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}let Hr={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Wx(c){for(let l of c)if(Yx(l.charCodeAt(0)))return!0;return!1}function mq(c){for(let l of c)if(!Wh(l.charCodeAt(0)))return!1;return!0}function Zx(c){let l=c.map(f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch(m){return null}}).filter(f=>f);return new RegExp(l.join("|"),"u")}let vq=Zx(["Arab","Dupl","Mong","Ougr","Syrc"]);function Wh(c){return!vq.test(String.fromCodePoint(c))}let bI=Zx(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Yx(c){return!(c!==746&&c!==747&&(c<4352||!(Hr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Hr["CJK Compatibility"](c)||Hr["CJK Strokes"](c)||!(!Hr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Hr["Enclosed CJK Letters and Months"](c)||Hr["Ideographic Description Characters"](c)||Hr.Kanbun(c)||Hr.Katakana(c)&&c!==12540||!(!Hr["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Hr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Hr["Vertical Forms"](c)||Hr["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||bI.test(String.fromCodePoint(c)))))}function SI(c){return!(Yx(c)||function(l){return!!(Hr["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||Hr["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||Hr["Letterlike Symbols"](l)||Hr["Number Forms"](l)||Hr["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||Hr["Control Pictures"](l)&&l!==9251||Hr["Optical Character Recognition"](l)||Hr["Enclosed Alphanumerics"](l)||Hr["Geometric Shapes"](l)||Hr["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||Hr["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||Hr["CJK Symbols and Punctuation"](l)||Hr.Katakana(l)||Hr["Private Use Area"](l)||Hr["CJK Compatibility Forms"](l)||Hr["Small Form Variants"](l)||Hr["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(c))}let gq=Zx(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Kx(c){return gq.test(String.fromCodePoint(c))}function yq(c,l){return!(!l&&Kx(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Hr.Khmer(c))}function _q(c){for(let l of c)if(Kx(l.charCodeAt(0)))return!0;return!1}let Ba=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Gn{constructor(l,f){this.zoom=l,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hx,this.transition={})}isSupportedScript(l){return function(f,m){for(let _ of f)if(!yq(_.charCodeAt(0),m))return!1;return!0}(l,Ba.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let l=this.zoom,f=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*f}}}class Zh{constructor(l,f){this.property=l,this.value=f,this.expression=function(m,_){if(ig(m))return new Bh(m,_);if(sg(m)){let E=Px(m,_);if(E.result==="error")throw new Error(E.value.map(T=>`${T.key}: ${T.message}`).join(", "));return E.value}{let E=m;return _.type==="color"&&typeof m=="string"?E=gn.parse(m):_.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(E=ls.parse(m)):E=Fa.parse(m),{kind:"constant",evaluate:()=>E}}}(f===void 0?l.specification.default:f,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,f,m){return this.property.possiblyEvaluate(this,l,f,m)}}class gg{constructor(l){this.property=l,this.value=new Zh(l,void 0)}transitioned(l,f){return new EI(this.property,this.value,f,ee({},l.transition,this.transition),l.now)}untransitioned(){return new EI(this.property,this.value,null,{},0)}}class yg{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return le(this._values[l].value.value)}setValue(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new gg(this._values[l].property)),this._values[l].value=new Zh(this._values[l].property,f===null?void 0:le(f))}getTransition(l){return le(this._values[l].transition)}setTransition(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new gg(this._values[l].property)),this._values[l].transition=le(f)||void 0}serialize(){let l={};for(let f of Object.keys(this._values)){let m=this.getValue(f);m!==void 0&&(l[f]=m);let _=this.getTransition(f);_!==void 0&&(l[`${f}-transition`]=_)}return l}transitioned(l,f){let m=new om(this._properties);for(let _ of Object.keys(this._values))m._values[_]=this._values[_].transitioned(l,f._values[_]);return m}untransitioned(){let l=new om(this._properties);for(let f of Object.keys(this._values))l._values[f]=this._values[f].untransitioned();return l}}class EI{constructor(l,f,m,_,E){this.property=l,this.value=f,this.begin=E+_.delay||0,this.end=this.begin+_.duration||0,l.specification.transition&&(_.delay||_.duration)&&(this.prior=m)}possiblyEvaluate(l,f,m){let _=l.now||0,E=this.value.possiblyEvaluate(l,f,m),T=this.prior;if(T){if(_>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(_<this.begin)return T.possiblyEvaluate(l,f,m);{let C=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(l,f,m),E,function(P){if(P<=0)return 0;if(P>=1)return 1;let F=P*P,z=F*P;return 4*(P<.5?z:3*(P-F)+z-.75)}(C))}}return E}}class om{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,f,m){let _=new sm(this._properties);for(let E of Object.keys(this._values))_._values[E]=this._values[E].possiblyEvaluate(l,f,m);return _}hasTransition(){for(let l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class am{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return le(this._values[l].value)}setValue(l,f){this._values[l]=new Zh(this._values[l].property,f===null?void 0:le(f))}serialize(){let l={};for(let f of Object.keys(this._values)){let m=this.getValue(f);m!==void 0&&(l[f]=m)}return l}possiblyEvaluate(l,f,m){let _=new sm(this._properties);for(let E of Object.keys(this._values))_._values[E]=this._values[E].possiblyEvaluate(l,f,m);return _}}class Il{constructor(l,f,m){this.property=l,this.value=f,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,f,m,_){return this.property.evaluate(this.value,this.parameters,l,f,m,_)}}class sm{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class $t{constructor(l){this.specification=l}possiblyEvaluate(l,f){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(f)}interpolate(l,f,m){let _=aa[this.specification.type];return _?_(l,f,m):l}}class ur{constructor(l,f){this.specification=l,this.overrides=f}possiblyEvaluate(l,f,m,_){return new Il(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(f,null,{},m,_)}:l.expression,f)}interpolate(l,f,m){if(l.value.kind!=="constant"||f.value.kind!=="constant")return l;if(l.value.value===void 0||f.value.value===void 0)return new Il(this,{kind:"constant",value:void 0},l.parameters);let _=aa[this.specification.type];if(_){let E=_(l.value.value,f.value.value,m);return new Il(this,{kind:"constant",value:E},l.parameters)}return l}evaluate(l,f,m,_,E,T){return l.kind==="constant"?l.value:l.evaluate(f,m,_,E,T)}}class _g extends ur{possiblyEvaluate(l,f,m,_){if(l.value===void 0)return new Il(this,{kind:"constant",value:void 0},f);if(l.expression.kind==="constant"){let E=l.expression.evaluate(f,null,{},m,_),T=l.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,C=this._calculate(T,T,T,f);return new Il(this,{kind:"constant",value:C},f)}if(l.expression.kind==="camera"){let E=this._calculate(l.expression.evaluate({zoom:f.zoom-1}),l.expression.evaluate({zoom:f.zoom}),l.expression.evaluate({zoom:f.zoom+1}),f);return new Il(this,{kind:"constant",value:E},f)}return new Il(this,l.expression,f)}evaluate(l,f,m,_,E,T){if(l.kind==="source"){let C=l.evaluate(f,m,_,E,T);return this._calculate(C,C,C,f)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(f.zoom)-1},m,_),l.evaluate({zoom:Math.floor(f.zoom)},m,_),l.evaluate({zoom:Math.floor(f.zoom)+1},m,_),f):l.value}_calculate(l,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class xg{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,_){if(l.value!==void 0){if(l.expression.kind==="constant"){let E=l.expression.evaluate(f,null,{},m,_);return this._calculate(E,E,E,f)}return this._calculate(l.expression.evaluate(new Gn(Math.floor(f.zoom-1),f)),l.expression.evaluate(new Gn(Math.floor(f.zoom),f)),l.expression.evaluate(new Gn(Math.floor(f.zoom+1),f)),f)}}_calculate(l,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class Xx{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,_){return!!l.expression.evaluate(f,null,{},m,_)}interpolate(){return!1}}class b{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let f in l){let m=l[f];m.specification.overridable&&this.overridableProperties.push(f);let _=this.defaultPropertyValues[f]=new Zh(m,void 0),E=this.defaultTransitionablePropertyValues[f]=new gg(m);this.defaultTransitioningPropertyValues[f]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=_.possiblyEvaluate({})}}}qt("DataDrivenProperty",ur),qt("DataConstantProperty",$t),qt("CrossFadedDataDrivenProperty",_g),qt("CrossFadedProperty",xg),qt("ColorRampProperty",Xx);let s="-transition";class p extends bt{constructor(l,f){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),f.layout&&(this._unevaluatedLayout=new am(f.layout)),f.paint)){this._transitionablePaint=new yg(f.paint);for(let m in l.paint)this.setPaintProperty(m,l.paint[m],{validate:!1});for(let m in l.layout)this.setLayoutProperty(m,l.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sm(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,f,m={}){f!=null&&this._validate(xI,`layers.${this.id}.layout.${l}`,l,f,m)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,f):this.visibility=f)}getPaintProperty(l){return l.endsWith(s)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,f,m={}){if(f!=null&&this._validate(_I,`layers.${this.id}.paint.${l}`,l,f,m))return!1;if(l.endsWith(s))return this._transitionablePaint.setTransition(l.slice(0,-11),f||void 0),!1;{let _=this._transitionablePaint._values[l],E=_.property.specification["property-type"]==="cross-faded-data-driven",T=_.value.isDataDriven(),C=_.value;this._transitionablePaint.setValue(l,f),this._handleSpecialPaintPropertyUpdate(l);let P=this._transitionablePaint._values[l].value;return P.isDataDriven()||T||E||this._handleOverridablePaintPropertyUpdate(l,C,P)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,f,m){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,f){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,f)}serialize(){let l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),ue(l,(f,m)=>!(f===void 0||m==="layout"&&!Object.keys(f).length||m==="paint"&&!Object.keys(f).length))}_validate(l,f,m,_,E={}){return(!E||E.validate!==!1)&&Gx(this,l.call(yf,{key:f,layerType:this.type,objectKey:m,value:_,styleSpec:be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let l in this.paint._values){let f=this.paint.get(l);if(f instanceof Il&&qh(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}let g={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(l,f){this._structArray=l,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class w{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,f){return l._trim(),f&&(l.isTransferred=!0,f.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){let f=Object.create(this.prototype);return f.arrayBuffer=l.arrayBuffer,f.length=l.length,f.capacity=l.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function M(c,l=1){let f=0,m=0;return{members:c.map(_=>{let E=g[_.type].BYTES_PER_ELEMENT,T=f=O(f,Math.max(l,E)),C=_.components||1;return m=Math.max(m,E),f+=E*C,{name:_.name,type:_.type,components:C,offset:T}}),size:O(f,Math.max(m,l)),alignment:l}}function O(c,l){return Math.ceil(c/l)*l}class N extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.int16[_+0]=f,this.int16[_+1]=m,l}}N.prototype.bytesPerElement=4,qt("StructArrayLayout2i4",N);class B extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=3*l;return this.int16[E+0]=f,this.int16[E+1]=m,this.int16[E+2]=_,l}}B.prototype.bytesPerElement=6,qt("StructArrayLayout3i6",B);class V extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_){let E=this.length;return this.resize(E+1),this.emplace(E,l,f,m,_)}emplace(l,f,m,_,E){let T=4*l;return this.int16[T+0]=f,this.int16[T+1]=m,this.int16[T+2]=_,this.int16[T+3]=E,l}}V.prototype.bytesPerElement=8,qt("StructArrayLayout4i8",V);class G extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,E,T)}emplace(l,f,m,_,E,T,C){let P=6*l;return this.int16[P+0]=f,this.int16[P+1]=m,this.int16[P+2]=_,this.int16[P+3]=E,this.int16[P+4]=T,this.int16[P+5]=C,l}}G.prototype.bytesPerElement=12,qt("StructArrayLayout2i4i12",G);class X extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,E,T)}emplace(l,f,m,_,E,T,C){let P=4*l,F=8*l;return this.int16[P+0]=f,this.int16[P+1]=m,this.uint8[F+4]=_,this.uint8[F+5]=E,this.uint8[F+6]=T,this.uint8[F+7]=C,l}}X.prototype.bytesPerElement=8,qt("StructArrayLayout2i4ub8",X);class ne extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.float32[_+0]=f,this.float32[_+1]=m,l}}ne.prototype.bytesPerElement=8,qt("StructArrayLayout2f8",ne);class se extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T,C,P,F,z){let U=this.length;return this.resize(U+1),this.emplace(U,l,f,m,_,E,T,C,P,F,z)}emplace(l,f,m,_,E,T,C,P,F,z,U){let Z=10*l;return this.uint16[Z+0]=f,this.uint16[Z+1]=m,this.uint16[Z+2]=_,this.uint16[Z+3]=E,this.uint16[Z+4]=T,this.uint16[Z+5]=C,this.uint16[Z+6]=P,this.uint16[Z+7]=F,this.uint16[Z+8]=z,this.uint16[Z+9]=U,l}}se.prototype.bytesPerElement=20,qt("StructArrayLayout10ui20",se);class he extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T,C,P,F,z,U,Z){let Y=this.length;return this.resize(Y+1),this.emplace(Y,l,f,m,_,E,T,C,P,F,z,U,Z)}emplace(l,f,m,_,E,T,C,P,F,z,U,Z,Y){let Q=12*l;return this.int16[Q+0]=f,this.int16[Q+1]=m,this.int16[Q+2]=_,this.int16[Q+3]=E,this.uint16[Q+4]=T,this.uint16[Q+5]=C,this.uint16[Q+6]=P,this.uint16[Q+7]=F,this.int16[Q+8]=z,this.int16[Q+9]=U,this.int16[Q+10]=Z,this.int16[Q+11]=Y,l}}he.prototype.bytesPerElement=24,qt("StructArrayLayout4i4ui4i24",he);class me extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=3*l;return this.float32[E+0]=f,this.float32[E+1]=m,this.float32[E+2]=_,l}}me.prototype.bytesPerElement=12,qt("StructArrayLayout3f12",me);class ge extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint32[1*l+0]=f,l}}ge.prototype.bytesPerElement=4,qt("StructArrayLayout1ul4",ge);class ye extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T,C,P,F){let z=this.length;return this.resize(z+1),this.emplace(z,l,f,m,_,E,T,C,P,F)}emplace(l,f,m,_,E,T,C,P,F,z){let U=10*l,Z=5*l;return this.int16[U+0]=f,this.int16[U+1]=m,this.int16[U+2]=_,this.int16[U+3]=E,this.int16[U+4]=T,this.int16[U+5]=C,this.uint32[Z+3]=P,this.uint16[U+8]=F,this.uint16[U+9]=z,l}}ye.prototype.bytesPerElement=20,qt("StructArrayLayout6i1ul2ui20",ye);class ce extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,E,T)}emplace(l,f,m,_,E,T,C){let P=6*l;return this.int16[P+0]=f,this.int16[P+1]=m,this.int16[P+2]=_,this.int16[P+3]=E,this.int16[P+4]=T,this.int16[P+5]=C,l}}ce.prototype.bytesPerElement=12,qt("StructArrayLayout2i2i2i12",ce);class Ae extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E){let T=this.length;return this.resize(T+1),this.emplace(T,l,f,m,_,E)}emplace(l,f,m,_,E,T){let C=4*l,P=8*l;return this.float32[C+0]=f,this.float32[C+1]=m,this.float32[C+2]=_,this.int16[P+6]=E,this.int16[P+7]=T,l}}Ae.prototype.bytesPerElement=16,qt("StructArrayLayout2f1f2i16",Ae);class De extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,E,T)}emplace(l,f,m,_,E,T,C){let P=16*l,F=4*l,z=8*l;return this.uint8[P+0]=f,this.uint8[P+1]=m,this.float32[F+1]=_,this.float32[F+2]=E,this.int16[z+6]=T,this.int16[z+7]=C,l}}De.prototype.bytesPerElement=16,qt("StructArrayLayout2ub2f2i16",De);class Fe extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=3*l;return this.uint16[E+0]=f,this.uint16[E+1]=m,this.uint16[E+2]=_,l}}Fe.prototype.bytesPerElement=6,qt("StructArrayLayout3ui6",Fe);class et extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T,C,P,F,z,U,Z,Y,Q,re,fe,de){let ke=this.length;return this.resize(ke+1),this.emplace(ke,l,f,m,_,E,T,C,P,F,z,U,Z,Y,Q,re,fe,de)}emplace(l,f,m,_,E,T,C,P,F,z,U,Z,Y,Q,re,fe,de,ke){let we=24*l,Ne=12*l,He=48*l;return this.int16[we+0]=f,this.int16[we+1]=m,this.uint16[we+2]=_,this.uint16[we+3]=E,this.uint32[Ne+2]=T,this.uint32[Ne+3]=C,this.uint32[Ne+4]=P,this.uint16[we+10]=F,this.uint16[we+11]=z,this.uint16[we+12]=U,this.float32[Ne+7]=Z,this.float32[Ne+8]=Y,this.uint8[He+36]=Q,this.uint8[He+37]=re,this.uint8[He+38]=fe,this.uint32[Ne+10]=de,this.int16[we+22]=ke,l}}et.prototype.bytesPerElement=48,qt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",et);class lt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_,E,T,C,P,F,z,U,Z,Y,Q,re,fe,de,ke,we,Ne,He,ot,Pt,ar,Ct,_t,Zt,Ft){let Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,l,f,m,_,E,T,C,P,F,z,U,Z,Y,Q,re,fe,de,ke,we,Ne,He,ot,Pt,ar,Ct,_t,Zt,Ft)}emplace(l,f,m,_,E,T,C,P,F,z,U,Z,Y,Q,re,fe,de,ke,we,Ne,He,ot,Pt,ar,Ct,_t,Zt,Ft,Nt){let Xe=32*l,Qt=16*l;return this.int16[Xe+0]=f,this.int16[Xe+1]=m,this.int16[Xe+2]=_,this.int16[Xe+3]=E,this.int16[Xe+4]=T,this.int16[Xe+5]=C,this.int16[Xe+6]=P,this.int16[Xe+7]=F,this.uint16[Xe+8]=z,this.uint16[Xe+9]=U,this.uint16[Xe+10]=Z,this.uint16[Xe+11]=Y,this.uint16[Xe+12]=Q,this.uint16[Xe+13]=re,this.uint16[Xe+14]=fe,this.uint16[Xe+15]=de,this.uint16[Xe+16]=ke,this.uint16[Xe+17]=we,this.uint16[Xe+18]=Ne,this.uint16[Xe+19]=He,this.uint16[Xe+20]=ot,this.uint16[Xe+21]=Pt,this.uint16[Xe+22]=ar,this.uint32[Qt+12]=Ct,this.float32[Qt+13]=_t,this.float32[Qt+14]=Zt,this.uint16[Xe+30]=Ft,this.uint16[Xe+31]=Nt,l}}lt.prototype.bytesPerElement=64,qt("StructArrayLayout8i15ui1ul2f2ui64",lt);class Et extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.float32[1*l+0]=f,l}}Et.prototype.bytesPerElement=4,qt("StructArrayLayout1f4",Et);class Dt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=3*l;return this.uint16[6*l+0]=f,this.float32[E+1]=m,this.float32[E+2]=_,l}}Dt.prototype.bytesPerElement=12,qt("StructArrayLayout1ui2f12",Dt);class mt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let E=4*l;return this.uint32[2*l+0]=f,this.uint16[E+2]=m,this.uint16[E+3]=_,l}}mt.prototype.bytesPerElement=8,qt("StructArrayLayout1ul2ui8",mt);class dt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.uint16[_+0]=f,this.uint16[_+1]=m,l}}dt.prototype.bytesPerElement=4,qt("StructArrayLayout2ui4",dt);class Ht extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint16[1*l+0]=f,l}}Ht.prototype.bytesPerElement=2,qt("StructArrayLayout1ui2",Ht);class vr extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_){let E=this.length;return this.resize(E+1),this.emplace(E,l,f,m,_)}emplace(l,f,m,_,E){let T=4*l;return this.float32[T+0]=f,this.float32[T+1]=m,this.float32[T+2]=_,this.float32[T+3]=E,l}}vr.prototype.bytesPerElement=16,qt("StructArrayLayout4f16",vr);class gt extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new d(this.anchorPointX,this.anchorPointY)}}gt.prototype.size=20;class Mt extends ye{get(l){return new gt(this,l)}}qt("CollisionBoxArray",Mt);class pr extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}pr.prototype.size=48;class $n extends et{get(l){return new pr(this,l)}}qt("PlacedSymbolArray",$n);class Cr extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Cr.prototype.size=64;class Gr extends lt{get(l){return new Cr(this,l)}}qt("SymbolInstanceArray",Gr);class Hn extends Et{getoffsetX(l){return this.float32[1*l+0]}}qt("GlyphOffsetArray",Hn);class So extends B{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}qt("SymbolLineVertexArray",So);class Js extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Js.prototype.size=12;class Wn extends Dt{get(l){return new Js(this,l)}}qt("TextAnchorOffsetArray",Wn);class la extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}la.prototype.size=8;class Bo extends mt{get(l){return new la(this,l)}}qt("FeatureIndexArray",Bo);class Eo extends N{}class Uo extends N{}class Al extends N{}class Yh extends G{}class wg extends X{}class Kh extends ne{}class hs extends se{}class bg extends he{}class Jx extends me{}class ps extends ge{}class ds extends ce{}class lc extends De{}class Qs extends Fe{}class lo extends dt{}let To=M([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ua}=To;class Wr{constructor(l=[]){this.segments=l}prepareSegment(l,f,m,_){let E=this.segments[this.segments.length-1];return l>Wr.MAX_VERTEX_ARRAY_LENGTH&&Re(`Max vertices per segment is ${Wr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!E||E.vertexLength+l>Wr.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==_)&&(E={vertexOffset:f.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},_!==void 0&&(E.sortKey=_),this.segments.push(E)),E}get(){return this.segments}destroy(){for(let l of this.segments)for(let f in l.vaos)l.vaos[f].destroy()}static simpleSegment(l,f,m,_){return new Wr([{vertexOffset:l,primitiveOffset:f,vertexLength:m,primitiveLength:_,vaos:{},sortKey:0}])}}function _f(c,l){return 256*(c=j(Math.floor(c),0,255))+j(Math.floor(l),0,255)}Wr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qt("SegmentVector",Wr);let Xh=M([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Jh={exports:{}},TI={exports:{}};TI.exports=function(c,l){var f,m,_,E,T,C,P,F;for(m=c.length-(f=3&c.length),_=l,T=3432918353,C=461845907,F=0;F<m;)P=255&c.charCodeAt(F)|(255&c.charCodeAt(++F))<<8|(255&c.charCodeAt(++F))<<16|(255&c.charCodeAt(++F))<<24,++F,_=27492+(65535&(E=5*(65535&(_=(_^=P=(65535&(P=(P=(65535&P)*T+(((P>>>16)*T&65535)<<16)&4294967295)<<15|P>>>17))*C+(((P>>>16)*C&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(P=0,f){case 3:P^=(255&c.charCodeAt(F+2))<<16;case 2:P^=(255&c.charCodeAt(F+1))<<8;case 1:_^=P=(65535&(P=(P=(65535&(P^=255&c.charCodeAt(F)))*T+(((P>>>16)*T&65535)<<16)&4294967295)<<15|P>>>17))*C+(((P>>>16)*C&65535)<<16)&4294967295;}return _^=c.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var xq=TI.exports,II={exports:{}};II.exports=function(c,l){for(var f,m=c.length,_=l^m,E=0;m>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(E)|(255&c.charCodeAt(++E))<<8|(255&c.charCodeAt(++E))<<16|(255&c.charCodeAt(++E))<<24))+((1540483477*(f>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),m-=4,++E;switch(m){case 3:_^=(255&c.charCodeAt(E+2))<<16;case 2:_^=(255&c.charCodeAt(E+1))<<8;case 1:_=1540483477*(65535&(_^=255&c.charCodeAt(E)))+((1540483477*(_>>>16)&65535)<<16);}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var uc=xq,AI=II.exports;Jh.exports=uc,Jh.exports.murmur3=uc,Jh.exports.murmur2=AI;var Sg=a(Jh.exports);class lm{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,f,m,_){this.ids.push(Eg(l)),this.positions.push(f,m,_)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let f=Eg(l),m=0,_=this.ids.length-1;for(;m<_;){let T=m+_>>1;this.ids[T]>=f?_=T:m=T+1}let E=[];for(;this.ids[m]===f;)E.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return E}static serialize(l,f){let m=new Float64Array(l.ids),_=new Uint32Array(l.positions);return Tg(m,_,0,m.length-1),f&&f.push(m.buffer,_.buffer),{ids:m,positions:_}}static deserialize(l){let f=new lm;return f.ids=l.ids,f.positions=l.positions,f.indexed=!0,f}}function Eg(c){let l=+c;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Sg(String(c))}function Tg(c,l,f,m){for(;f<m;){let _=c[f+m>>1],E=f-1,T=m+1;for(;;){do E++;while(c[E]<_);do T--;while(c[T]>_);if(E>=T)break;Qh(c,E,T),Qh(l,3*E,3*T),Qh(l,3*E+1,3*T+1),Qh(l,3*E+2,3*T+2)}T-f<m-T?(Tg(c,l,f,T),f=T+1):(Tg(c,l,T+1,m),m=T)}}function Qh(c,l,f){let m=c[l];c[l]=c[f],c[f]=m}qt("FeaturePositionMap",lm);class um{constructor(l,f){this.gl=l.gl,this.location=f}}class CI extends um{constructor(l,f){super(l,f),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class n9 extends um{constructor(l,f){super(l,f),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class i9 extends um{constructor(l,f){super(l,f),this.current=gn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}let cVe=new Float32Array(16);function wq(c){return[_f(255*c.r,255*c.g),_f(255*c.b,255*c.a)]}class Qx{constructor(l,f,m){this.value=l,this.uniformNames=f.map(_=>`u_${_}`),this.type=m}setUniform(l,f,m){l.set(m.constantOr(this.value))}getBinding(l,f,m){return this.type==="color"?new i9(l,f):new CI(l,f)}}class Ig{constructor(l,f){this.uniformNames=f.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=l.tlbr}setUniform(l,f,m,_){let E=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;E&&l.set(E)}getBinding(l,f,m){return m.substr(0,9)==="u_pattern"?new n9(l,f):new CI(l,f)}}class xf{constructor(l,f,m,_){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=f.map(E=>({name:`a_${E}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(l,f,m,_,E){let T=this.paintVertexArray.length,C=this.expression.evaluate(new Gn(0),f,{},_,[],E);this.paintVertexArray.resize(l),this._setPaintValue(T,l,C)}updatePaintArray(l,f,m,_){let E=this.expression.evaluate({zoom:0},m,_);this._setPaintValue(l,f,E)}_setPaintValue(l,f,m){if(this.type==="color"){let _=wq(m);for(let E=l;E<f;E++)this.paintVertexArray.emplace(E,_[0],_[1])}else{for(let _=l;_<f;_++)this.paintVertexArray.emplace(_,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Tu{constructor(l,f,m,_,E,T){this.expression=l,this.uniformNames=f.map(C=>`u_${C}_t`),this.type=m,this.useIntegerZoom=_,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=f.map(C=>({name:`a_${C}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(l,f,m,_,E){let T=this.expression.evaluate(new Gn(this.zoom),f,{},_,[],E),C=this.expression.evaluate(new Gn(this.zoom+1),f,{},_,[],E),P=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(P,l,T,C)}updatePaintArray(l,f,m,_){let E=this.expression.evaluate({zoom:this.zoom},m,_),T=this.expression.evaluate({zoom:this.zoom+1},m,_);this._setPaintValue(l,f,E,T)}_setPaintValue(l,f,m,_){if(this.type==="color"){let E=wq(m),T=wq(_);for(let C=l;C<f;C++)this.paintVertexArray.emplace(C,E[0],E[1],T[0],T[1])}else{for(let E=l;E<f;E++)this.paintVertexArray.emplace(E,m,_);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,f){let m=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,_=j(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(_)}getBinding(l,f,m){return new CI(l,f)}}class ep{constructor(l,f,m,_,E,T){this.expression=l,this.type=f,this.useIntegerZoom=m,this.zoom=_,this.layerId=T,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(l,f,m){let _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(_,l,f.patterns&&f.patterns[this.layerId],m)}updatePaintArray(l,f,m,_,E){this._setPaintValues(l,f,m.patterns&&m.patterns[this.layerId],E)}_setPaintValues(l,f,m,_){if(!_||!m)return;let{min:E,mid:T,max:C}=m,P=_[E],F=_[T],z=_[C];if(P&&F&&z)for(let U=l;U<f;U++)this.zoomInPaintVertexArray.emplace(U,F.tl[0],F.tl[1],F.br[0],F.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],F.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(U,F.tl[0],F.tl[1],F.br[0],F.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],F.pixelRatio,z.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Xh.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Xh.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class o9{constructor(l,f,m){this.binders={},this._buffers=[];let _=[];for(let E in l.paint._values){if(!m(E))continue;let T=l.paint.get(E);if(!(T instanceof Il&&qh(T.property.specification)))continue;let C=fVe(E,l.type),P=T.value,F=T.property.specification.type,z=T.property.useIntegerZoom,U=T.property.specification["property-type"],Z=U==="cross-faded"||U==="cross-faded-data-driven";if(P.kind==="constant")this.binders[E]=Z?new Ig(P.value,C):new Qx(P.value,C,F),_.push(`/u_${E}`);else if(P.kind==="source"||Z){let Y=a9(E,F,"source");this.binders[E]=Z?new ep(P,F,z,f,Y,l.id):new xf(P,C,F,Y),_.push(`/a_${E}`)}else{let Y=a9(E,F,"composite");this.binders[E]=new Tu(P,C,F,z,f,Y),_.push(`/z_${E}`)}}this.cacheKey=_.sort().join("")}getMaxValue(l){let f=this.binders[l];return f instanceof xf||f instanceof Tu?f.maxValue:0}populatePaintArrays(l,f,m,_,E){for(let T in this.binders){let C=this.binders[T];(C instanceof xf||C instanceof Tu||C instanceof ep)&&C.populatePaintArray(l,f,m,_,E)}}setConstantPatternPositions(l,f){for(let m in this.binders){let _=this.binders[m];_ instanceof Ig&&_.setConstantPatternPositions(l,f)}}updatePaintArrays(l,f,m,_,E){let T=!1;for(let C in l){let P=f.getPositions(C);for(let F of P){let z=m.feature(F.index);for(let U in this.binders){let Z=this.binders[U];if((Z instanceof xf||Z instanceof Tu||Z instanceof ep)&&Z.expression.isStateDependent===!0){let Y=_.paint.get(U);Z.expression=Y.value,Z.updatePaintArray(F.start,F.end,z,l[C],E),T=!0}}}}return T}defines(){let l=[];for(let f in this.binders){let m=this.binders[f];(m instanceof Qx||m instanceof Ig)&&l.push(...m.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return l}getBinderAttributes(){let l=[];for(let f in this.binders){let m=this.binders[f];if(m instanceof xf||m instanceof Tu)for(let _=0;_<m.paintVertexAttributes.length;_++)l.push(m.paintVertexAttributes[_].name);else if(m instanceof ep)for(let _=0;_<Xh.members.length;_++)l.push(Xh.members[_].name)}return l}getBinderUniforms(){let l=[];for(let f in this.binders){let m=this.binders[f];if(m instanceof Qx||m instanceof Ig||m instanceof Tu)for(let _ of m.uniformNames)l.push(_)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,f){let m=[];for(let _ in this.binders){let E=this.binders[_];if(E instanceof Qx||E instanceof Ig||E instanceof Tu){for(let T of E.uniformNames)if(f[T]){let C=E.getBinding(l,f[T],T);m.push({name:T,property:_,binding:C})}}}return m}setUniforms(l,f,m,_){for(let{name:E,property:T,binding:C}of f)this.binders[T].setUniform(C,_,m.get(T),E)}updatePaintBuffers(l){this._buffers=[];for(let f in this.binders){let m=this.binders[f];if(l&&m instanceof ep){let _=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(m instanceof xf||m instanceof Tu)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(let f in this.binders){let m=this.binders[f];(m instanceof xf||m instanceof Tu||m instanceof ep)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(let l in this.binders){let f=this.binders[l];(f instanceof xf||f instanceof Tu||f instanceof ep)&&f.destroy()}}}class cm{constructor(l,f,m=()=>!0){this.programConfigurations={};for(let _ of l)this.programConfigurations[_.id]=new o9(_,f,m);this.needsUpload=!1,this._featureMap=new lm,this._bufferOffset=0}populatePaintArrays(l,f,m,_,E,T){for(let C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(l,f,_,E,T);f.id!==void 0&&this._featureMap.add(f.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,f,m,_){for(let E of m)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(l,this._featureMap,f,E,_)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(let f in this.programConfigurations)this.programConfigurations[f].upload(l);this.needsUpload=!1}}destroy(){for(let l in this.programConfigurations)this.programConfigurations[l].destroy()}}function fVe(c,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${l}-`,"").replace(/-/g,"_")]}function a9(c,l,f){let m={color:{source:ne,composite:vr},number:{source:Et,composite:ne}},_=function(E){return{"line-pattern":{source:hs,composite:hs},"fill-pattern":{source:hs,composite:hs},"fill-extrusion-pattern":{source:hs,composite:hs}}[E]}(c);return _&&_[f]||m[l][f]}qt("ConstantBinder",Qx),qt("CrossFadedConstantBinder",Ig),qt("SourceExpressionBinder",xf),qt("CrossFadedCompositeBinder",ep),qt("CompositeExpressionBinder",Tu),qt("ProgramConfiguration",o9,{omit:["_buffers"]}),qt("ProgramConfigurationSet",cm);let qi=8192,bq=Math.pow(2,14)-1,s9=-bq-1;function fm(c){let l=qi/c.extent,f=c.loadGeometry();for(let m=0;m<f.length;m++){let _=f[m];for(let E=0;E<_.length;E++){let T=_[E],C=Math.round(T.x*l),P=Math.round(T.y*l);T.x=j(C,s9,bq),T.y=j(P,s9,bq),(C<T.x||C>T.x+1||P<T.y||P>T.y+1)&&Re("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function hm(c,l){return{type:c.type,id:c.id,properties:c.properties,geometry:l?fm(c):[]}}function MI(c,l,f,m,_){c.emplaceBack(2*l+(m+1)/2,2*f+(_+1)/2)}class Sq{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Uo,this.indexArray=new Qs,this.segments=new Wr,this.programConfigurations=new cm(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){let _=this.layers[0],E=[],T=null,C=!1;_.type==="circle"&&(T=_.layout.get("circle-sort-key"),C=!T.isConstant());for(let{feature:P,id:F,index:z,sourceLayerIndex:U}of l){let Z=this.layers[0]._featureFilter.needGeometry,Y=hm(P,Z);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),Y,m))continue;let Q=C?T.evaluate(Y,{},m):void 0,re={id:F,properties:P.properties,type:P.type,sourceLayerIndex:U,index:z,geometry:Z?Y.geometry:fm(P),patterns:{},sortKey:Q};E.push(re)}C&&E.sort((P,F)=>P.sortKey-F.sortKey);for(let P of E){let{geometry:F,index:z,sourceLayerIndex:U}=P,Z=l[z].feature;this.addFeature(P,F,z,m),f.featureIndex.insert(Z,F,z,U,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Ua),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,f,m,_){for(let E of f)for(let T of E){let C=T.x,P=T.y;if(C<0||C>=qi||P<0||P>=qi)continue;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),z=F.vertexLength;MI(this.layoutVertexArray,C,P,-1,-1),MI(this.layoutVertexArray,C,P,1,-1),MI(this.layoutVertexArray,C,P,1,1),MI(this.layoutVertexArray,C,P,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{},_)}}function l9(c,l){for(let f=0;f<c.length;f++)if(Ag(l,c[f]))return!0;for(let f=0;f<l.length;f++)if(Ag(c,l[f]))return!0;return!!Eq(c,l)}function hVe(c,l,f){return!!Ag(c,l)||!!Tq(l,c,f)}function u9(c,l){if(c.length===1)return f9(l,c[0]);for(let f=0;f<l.length;f++){let m=l[f];for(let _=0;_<m.length;_++)if(Ag(c,m[_]))return!0}for(let f=0;f<c.length;f++)if(f9(l,c[f]))return!0;for(let f=0;f<l.length;f++)if(Eq(c,l[f]))return!0;return!1}function pVe(c,l,f){if(c.length>1){if(Eq(c,l))return!0;for(let m=0;m<l.length;m++)if(Tq(l[m],c,f))return!0}for(let m=0;m<c.length;m++)if(Tq(c[m],l,f))return!0;return!1}function Eq(c,l){if(c.length===0||l.length===0)return!1;for(let f=0;f<c.length-1;f++){let m=c[f],_=c[f+1];for(let E=0;E<l.length-1;E++)if(dVe(m,_,l[E],l[E+1]))return!0}return!1}function dVe(c,l,f,m){return ze(c,f,m)!==ze(l,f,m)&&ze(c,l,f)!==ze(c,l,m)}function Tq(c,l,f){let m=f*f;if(l.length===1)return c.distSqr(l[0])<m;for(let _=1;_<l.length;_++)if(c9(c,l[_-1],l[_])<m)return!0;return!1}function c9(c,l,f){let m=l.distSqr(f);if(m===0)return c.distSqr(l);let _=((c.x-l.x)*(f.x-l.x)+(c.y-l.y)*(f.y-l.y))/m;return c.distSqr(_<0?l:_>1?f:f.sub(l)._mult(_)._add(l))}function f9(c,l){let f,m,_,E=!1;for(let T=0;T<c.length;T++){f=c[T];for(let C=0,P=f.length-1;C<f.length;P=C++)m=f[C],_=f[P],m.y>l.y!=_.y>l.y&&l.x<(_.x-m.x)*(l.y-m.y)/(_.y-m.y)+m.x&&(E=!E)}return E}function Ag(c,l){let f=!1;for(let m=0,_=c.length-1;m<c.length;_=m++){let E=c[m],T=c[_];E.y>l.y!=T.y>l.y&&l.x<(T.x-E.x)*(l.y-E.y)/(T.y-E.y)+E.x&&(f=!f)}return f}function mVe(c,l,f){let m=f[0],_=f[2];if(c.x<m.x&&l.x<m.x||c.x>_.x&&l.x>_.x||c.y<m.y&&l.y<m.y||c.y>_.y&&l.y>_.y)return!1;let E=ze(c,l,f[0]);return E!==ze(c,l,f[1])||E!==ze(c,l,f[2])||E!==ze(c,l,f[3])}function ew(c,l,f){let m=l.paint.get(c).value;return m.kind==="constant"?m.value:f.programConfigurations.get(l.id).getMaxValue(c)}function RI(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function PI(c,l,f,m,_){if(!l[0]&&!l[1])return c;let E=d.convert(l)._mult(_);f==="viewport"&&E._rotate(-m);let T=[];for(let C=0;C<c.length;C++)T.push(c[C].sub(E));return T}let h9,p9;qt("CircleBucket",Sq,{omit:["layers"]});var vVe={get paint(){return p9=p9||new b({"circle-radius":new ur(be.paint_circle["circle-radius"]),"circle-color":new ur(be.paint_circle["circle-color"]),"circle-blur":new ur(be.paint_circle["circle-blur"]),"circle-opacity":new ur(be.paint_circle["circle-opacity"]),"circle-translate":new $t(be.paint_circle["circle-translate"]),"circle-translate-anchor":new $t(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $t(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $t(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ur(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ur(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ur(be.paint_circle["circle-stroke-opacity"])})},get layout(){return h9=h9||new b({"circle-sort-key":new ur(be.layout_circle["circle-sort-key"])})}},ua=1e-6,Cg=typeof Float32Array!="undefined"?Float32Array:Array;function Iq(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function d9(c,l,f){var m=l[0],_=l[1],E=l[2],T=l[3],C=l[4],P=l[5],F=l[6],z=l[7],U=l[8],Z=l[9],Y=l[10],Q=l[11],re=l[12],fe=l[13],de=l[14],ke=l[15],we=f[0],Ne=f[1],He=f[2],ot=f[3];return c[0]=we*m+Ne*C+He*U+ot*re,c[1]=we*_+Ne*P+He*Z+ot*fe,c[2]=we*E+Ne*F+He*Y+ot*de,c[3]=we*T+Ne*z+He*Q+ot*ke,c[4]=(we=f[4])*m+(Ne=f[5])*C+(He=f[6])*U+(ot=f[7])*re,c[5]=we*_+Ne*P+He*Z+ot*fe,c[6]=we*E+Ne*F+He*Y+ot*de,c[7]=we*T+Ne*z+He*Q+ot*ke,c[8]=(we=f[8])*m+(Ne=f[9])*C+(He=f[10])*U+(ot=f[11])*re,c[9]=we*_+Ne*P+He*Z+ot*fe,c[10]=we*E+Ne*F+He*Y+ot*de,c[11]=we*T+Ne*z+He*Q+ot*ke,c[12]=(we=f[12])*m+(Ne=f[13])*C+(He=f[14])*U+(ot=f[15])*re,c[13]=we*_+Ne*P+He*Z+ot*fe,c[14]=we*E+Ne*F+He*Y+ot*de,c[15]=we*T+Ne*z+He*Q+ot*ke,c}Math.hypot||(Math.hypot=function(){for(var c=0,l=arguments.length;l--;)c+=arguments[l]*arguments[l];return Math.sqrt(c)});var tw,gVe=d9;function OI(c,l,f){var m=l[0],_=l[1],E=l[2],T=l[3];return c[0]=f[0]*m+f[4]*_+f[8]*E+f[12]*T,c[1]=f[1]*m+f[5]*_+f[9]*E+f[13]*T,c[2]=f[2]*m+f[6]*_+f[10]*E+f[14]*T,c[3]=f[3]*m+f[7]*_+f[11]*E+f[15]*T,c}tw=new Cg(4),Cg!=Float32Array&&(tw[0]=0,tw[1]=0,tw[2]=0,tw[3]=0);class yVe extends p{constructor(l){super(l,vVe)}createBucket(l){return new Sq(l)}queryRadius(l){let f=l;return ew("circle-radius",this,f)+ew("circle-stroke-width",this,f)+RI(this.paint.get("circle-translate"))}queryIntersectsFeature(l,f,m,_,E,T,C,P){let F=PI(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,C),z=this.paint.get("circle-radius").evaluate(f,m)+this.paint.get("circle-stroke-width").evaluate(f,m),U=this.paint.get("circle-pitch-alignment")==="map",Z=U?F:function(Q,re){return Q.map(fe=>m9(fe,re))}(F,P),Y=U?z*C:z;for(let Q of _)for(let re of Q){let fe=U?re:m9(re,P),de=Y,ke=OI([],[re.x,re.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?de*=ke[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(de*=T.cameraToCenterDistance/ke[3]),hVe(Z,fe,de))return!0}return!1}}function m9(c,l){let f=OI([],[c.x,c.y,0,1],l);return new d(f[0]/f[3],f[1]/f[3])}class v9 extends Sq{}let g9;qt("HeatmapBucket",v9,{omit:["layers"]});var _Ve={get paint(){return g9=g9||new b({"heatmap-radius":new ur(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ur(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $t(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xx(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $t(be.paint_heatmap["heatmap-opacity"])})}};function Aq(c,{width:l,height:f},m,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==l*f*m)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${l*f*m}`)}else _=new Uint8Array(l*f*m);return c.width=l,c.height=f,c.data=_,c}function y9(c,{width:l,height:f},m){if(l===c.width&&f===c.height)return;let _=Aq({},{width:l,height:f},m);Cq(c,_,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,l),height:Math.min(c.height,f)},m),c.width=l,c.height=f,c.data=_.data}function Cq(c,l,f,m,_,E){if(_.width===0||_.height===0)return l;if(_.width>c.width||_.height>c.height||f.x>c.width-_.width||f.y>c.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>l.width||_.height>l.height||m.x>l.width-_.width||m.y>l.height-_.height)throw new RangeError("out of range destination coordinates for image copy");let T=c.data,C=l.data;if(T===C)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<_.height;P++){let F=((f.y+P)*c.width+f.x)*E,z=((m.y+P)*l.width+m.x)*E;for(let U=0;U<_.width*E;U++)C[z+U]=T[F+U]}return l}class rw{constructor(l,f){Aq(this,l,1,f)}resize(l){y9(this,l,1)}clone(){return new rw({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,_,E){Cq(l,f,m,_,E,1)}}class el{constructor(l,f){Aq(this,l,4,f)}resize(l){y9(this,l,4)}replace(l,f){f?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new el({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,_,E){Cq(l,f,m,_,E,4)}}function _9(c){let l={},f=c.resolution||256,m=c.clips?c.clips.length:1,_=c.image||new el({width:f,height:m});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);let E=(T,C,P)=>{l[c.evaluationKey]=P;let F=c.expression.evaluate(l);_.data[T+C+0]=Math.floor(255*F.r/F.a),_.data[T+C+1]=Math.floor(255*F.g/F.a),_.data[T+C+2]=Math.floor(255*F.b/F.a),_.data[T+C+3]=Math.floor(255*F.a)};if(c.clips)for(let T=0,C=0;T<m;++T,C+=4*f)for(let P=0,F=0;P<f;P++,F+=4){let z=P/(f-1),{start:U,end:Z}=c.clips[T];E(C,F,U*(1-z)+Z*z)}else for(let T=0,C=0;T<f;T++,C+=4)E(0,C,T/(f-1));return _}qt("AlphaImage",rw),qt("RGBAImage",el);let Mq="big-fb";class xVe extends p{createBucket(l){return new v9(l)}constructor(l){super(l,_Ve),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=_9({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Mq)&&this.heatmapFbos.delete(Mq)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let x9;var wVe={get paint(){return x9=x9||new b({"hillshade-illumination-direction":new $t(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new $t(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $t(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $t(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $t(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $t(be.paint_hillshade["hillshade-accent-color"])})}};class bVe extends p{constructor(l){super(l,wVe)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let SVe=M([{name:"a_pos",components:2,type:"Int16"}],4),{members:EVe}=SVe;function w9(c,l,f=2){let m=l&&l.length,_=m?l[0]*f:c.length,E=b9(c,0,_,f,!0),T=[];if(!E||E.next===E.prev)return T;let C,P,F;if(m&&(E=function(z,U,Z,Y){let Q=[];for(let re=0,fe=U.length;re<fe;re++){let de=b9(z,U[re]*Y,re<fe-1?U[re+1]*Y:z.length,Y,!1);de===de.next&&(de.steiner=!0),Q.push(OVe(de))}Q.sort(MVe);for(let re=0;re<Q.length;re++)Z=RVe(Q[re],Z);return Z}(c,l,E,f)),c.length>80*f){C=1/0,P=1/0;let z=-1/0,U=-1/0;for(let Z=f;Z<_;Z+=f){let Y=c[Z],Q=c[Z+1];Y<C&&(C=Y),Q<P&&(P=Q),Y>z&&(z=Y),Q>U&&(U=Q)}F=Math.max(z-C,U-P),F=F!==0?32767/F:0}return nw(E,T,f,C,P,F,0),T}function b9(c,l,f,m,_){let E;if(_===function(T,C,P,F){let z=0;for(let U=C,Z=P-F;U<P;U+=F)z+=(T[Z]-T[U])*(T[U+1]+T[Z+1]),Z=U;return z}(c,l,f,m)>0)for(let T=l;T<f;T+=m)E=T9(T/m|0,c[T],c[T+1],E);else for(let T=f-m;T>=l;T-=m)E=T9(T/m|0,c[T],c[T+1],E);return E&&LI(E,E.next)&&(ow(E),E=E.next),E}function pm(c,l){if(!c)return c;l||(l=c);let f,m=c;do if(f=!1,m.steiner||!LI(m,m.next)&&Pi(m.prev,m,m.next)!==0)m=m.next;else{if(ow(m),m=l=m.prev,m===m.next)break;f=!0}while(f||m!==l);return l}function nw(c,l,f,m,_,E,T){if(!c)return;!T&&E&&function(P,F,z,U){let Z=P;do Z.z===0&&(Z.z=Rq(Z.x,Z.y,F,z,U)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==P);Z.prevZ.nextZ=null,Z.prevZ=null,function(Y){let Q,re=1;do{let fe,de=Y;Y=null;let ke=null;for(Q=0;de;){Q++;let we=de,Ne=0;for(let ot=0;ot<re&&(Ne++,we=we.nextZ,we);ot++);let He=re;for(;Ne>0||He>0&&we;)Ne!==0&&(He===0||!we||de.z<=we.z)?(fe=de,de=de.nextZ,Ne--):(fe=we,we=we.nextZ,He--),ke?ke.nextZ=fe:Y=fe,fe.prevZ=ke,ke=fe;de=we}ke.nextZ=null,re*=2}while(Q>1)}(Z)}(c,m,_,E);let C=c;for(;c.prev!==c.next;){let P=c.prev,F=c.next;if(E?IVe(c,m,_,E):TVe(c))l.push(P.i,c.i,F.i),ow(c),c=F.next,C=F.next;else if((c=F)===C){T?T===1?nw(c=AVe(pm(c),l),l,f,m,_,E,2):T===2&&CVe(c,l,f,m,_,E):nw(pm(c),l,f,m,_,E,1);break}}}function TVe(c){let l=c.prev,f=c,m=c.next;if(Pi(l,f,m)>=0)return!1;let _=l.x,E=f.x,T=m.x,C=l.y,P=f.y,F=m.y,z=_<E?_<T?_:T:E<T?E:T,U=C<P?C<F?C:F:P<F?P:F,Z=_>E?_>T?_:T:E>T?E:T,Y=C>P?C>F?C:F:P>F?P:F,Q=m.next;for(;Q!==l;){if(Q.x>=z&&Q.x<=Z&&Q.y>=U&&Q.y<=Y&&Mg(_,C,E,P,T,F,Q.x,Q.y)&&Pi(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function IVe(c,l,f,m){let _=c.prev,E=c,T=c.next;if(Pi(_,E,T)>=0)return!1;let C=_.x,P=E.x,F=T.x,z=_.y,U=E.y,Z=T.y,Y=C<P?C<F?C:F:P<F?P:F,Q=z<U?z<Z?z:Z:U<Z?U:Z,re=C>P?C>F?C:F:P>F?P:F,fe=z>U?z>Z?z:Z:U>Z?U:Z,de=Rq(Y,Q,l,f,m),ke=Rq(re,fe,l,f,m),we=c.prevZ,Ne=c.nextZ;for(;we&&we.z>=de&&Ne&&Ne.z<=ke;){if(we.x>=Y&&we.x<=re&&we.y>=Q&&we.y<=fe&&we!==_&&we!==T&&Mg(C,z,P,U,F,Z,we.x,we.y)&&Pi(we.prev,we,we.next)>=0||(we=we.prevZ,Ne.x>=Y&&Ne.x<=re&&Ne.y>=Q&&Ne.y<=fe&&Ne!==_&&Ne!==T&&Mg(C,z,P,U,F,Z,Ne.x,Ne.y)&&Pi(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;we&&we.z>=de;){if(we.x>=Y&&we.x<=re&&we.y>=Q&&we.y<=fe&&we!==_&&we!==T&&Mg(C,z,P,U,F,Z,we.x,we.y)&&Pi(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Ne&&Ne.z<=ke;){if(Ne.x>=Y&&Ne.x<=re&&Ne.y>=Q&&Ne.y<=fe&&Ne!==_&&Ne!==T&&Mg(C,z,P,U,F,Z,Ne.x,Ne.y)&&Pi(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function AVe(c,l){let f=c;do{let m=f.prev,_=f.next.next;!LI(m,_)&&S9(m,f,f.next,_)&&iw(m,_)&&iw(_,m)&&(l.push(m.i,f.i,_.i),ow(f),ow(f.next),f=c=_),f=f.next}while(f!==c);return pm(f)}function CVe(c,l,f,m,_,E){let T=c;do{let C=T.next.next;for(;C!==T.prev;){if(T.i!==C.i&&LVe(T,C)){let P=E9(T,C);return T=pm(T,T.next),P=pm(P,P.next),nw(T,l,f,m,_,E,0),void nw(P,l,f,m,_,E,0)}C=C.next}T=T.next}while(T!==c)}function MVe(c,l){return c.x-l.x}function RVe(c,l){let f=function(_,E){let T=E,C=_.x,P=_.y,F,z=-1/0;do{if(P<=T.y&&P>=T.next.y&&T.next.y!==T.y){let re=T.x+(P-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(re<=C&&re>z&&(z=re,F=T.x<T.next.x?T:T.next,re===C))return F}T=T.next}while(T!==E);if(!F)return null;let U=F,Z=F.x,Y=F.y,Q=1/0;T=F;do{if(C>=T.x&&T.x>=Z&&C!==T.x&&Mg(P<Y?C:z,P,Z,Y,P<Y?z:C,P,T.x,T.y)){let re=Math.abs(P-T.y)/(C-T.x);iw(T,_)&&(re<Q||re===Q&&(T.x>F.x||T.x===F.x&&PVe(F,T)))&&(F=T,Q=re)}T=T.next}while(T!==U);return F}(c,l);if(!f)return l;let m=E9(f,c);return pm(m,m.next),pm(f,f.next)}function PVe(c,l){return Pi(c.prev,c,l.prev)<0&&Pi(l.next,c,c.next)<0}function Rq(c,l,f,m,_){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-f)*_|0)|c<<8))|c<<4))|c<<2))|c<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function OVe(c){let l=c,f=c;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==c);return f}function Mg(c,l,f,m,_,E,T,C){return(_-T)*(l-C)>=(c-T)*(E-C)&&(c-T)*(m-C)>=(f-T)*(l-C)&&(f-T)*(E-C)>=(_-T)*(m-C)}function LVe(c,l){return c.next.i!==l.i&&c.prev.i!==l.i&&!function(f,m){let _=f;do{if(_.i!==f.i&&_.next.i!==f.i&&_.i!==m.i&&_.next.i!==m.i&&S9(_,_.next,f,m))return!0;_=_.next}while(_!==f);return!1}(c,l)&&(iw(c,l)&&iw(l,c)&&function(f,m){let _=f,E=!1,T=(f.x+m.x)/2,C=(f.y+m.y)/2;do _.y>C!=_.next.y>C&&_.next.y!==_.y&&T<(_.next.x-_.x)*(C-_.y)/(_.next.y-_.y)+_.x&&(E=!E),_=_.next;while(_!==f);return E}(c,l)&&(Pi(c.prev,c,l.prev)||Pi(c,l.prev,l))||LI(c,l)&&Pi(c.prev,c,c.next)>0&&Pi(l.prev,l,l.next)>0)}function Pi(c,l,f){return(l.y-c.y)*(f.x-l.x)-(l.x-c.x)*(f.y-l.y)}function LI(c,l){return c.x===l.x&&c.y===l.y}function S9(c,l,f,m){let _=NI(Pi(c,l,f)),E=NI(Pi(c,l,m)),T=NI(Pi(f,m,c)),C=NI(Pi(f,m,l));return _!==E&&T!==C||!(_!==0||!DI(c,f,l))||!(E!==0||!DI(c,m,l))||!(T!==0||!DI(f,c,m))||!(C!==0||!DI(f,l,m))}function DI(c,l,f){return l.x<=Math.max(c.x,f.x)&&l.x>=Math.min(c.x,f.x)&&l.y<=Math.max(c.y,f.y)&&l.y>=Math.min(c.y,f.y)}function NI(c){return c>0?1:c<0?-1:0}function iw(c,l){return Pi(c.prev,c,c.next)<0?Pi(c,l,c.next)>=0&&Pi(c,c.prev,l)>=0:Pi(c,l,c.prev)<0||Pi(c,c.next,l)<0}function E9(c,l){let f=Pq(c.i,c.x,c.y),m=Pq(l.i,l.x,l.y),_=c.next,E=l.prev;return c.next=l,l.prev=c,f.next=_,_.prev=f,m.next=f,f.prev=m,E.next=m,m.prev=E,m}function T9(c,l,f,m){let _=Pq(c,l,f);return m?(_.next=m.next,_.prev=m,m.next.prev=_,m.next=_):(_.prev=_,_.next=_),_}function ow(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Pq(c,l,f){return{i:c,x:l,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Oq(c,l,f){let m=f.patternDependencies,_=!1;for(let E of l){let T=E.paint.get(`${c}-pattern`);T.isConstant()||(_=!0);let C=T.constantOr(null);C&&(_=!0,m[C.to]=!0,m[C.from]=!0)}return _}function Lq(c,l,f,m,_){let E=_.patternDependencies;for(let T of l){let C=T.paint.get(`${c}-pattern`).value;if(C.kind!=="constant"){let P=C.evaluate({zoom:m-1},f,{},_.availableImages),F=C.evaluate({zoom:m},f,{},_.availableImages),z=C.evaluate({zoom:m+1},f,{},_.availableImages);P=P&&P.name?P.name:P,F=F&&F.name?F.name:F,z=z&&z.name?z.name:z,E[P]=!0,E[F]=!0,E[z]=!0,f.patterns[T.id]={min:P,mid:F,max:z}}}return f}class Dq{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Al,this.indexArray=new Qs,this.indexArray2=new lo,this.programConfigurations=new cm(l.layers,l.zoom),this.segments=new Wr,this.segments2=new Wr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=Oq("fill",this.layers,f);let _=this.layers[0].layout.get("fill-sort-key"),E=!_.isConstant(),T=[];for(let{feature:C,id:P,index:F,sourceLayerIndex:z}of l){let U=this.layers[0]._featureFilter.needGeometry,Z=hm(C,U);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),Z,m))continue;let Y=E?_.evaluate(Z,{},m,f.availableImages):void 0,Q={id:P,properties:C.properties,type:C.type,sourceLayerIndex:z,index:F,geometry:U?Z.geometry:fm(C),patterns:{},sortKey:Y};T.push(Q)}E&&T.sort((C,P)=>C.sortKey-P.sortKey);for(let C of T){let{geometry:P,index:F,sourceLayerIndex:z}=C;if(this.hasPattern){let U=Lq("fill",this.layers,C,this.zoom,f);this.patternFeatures.push(U)}else this.addFeature(C,P,F,m,{});f.featureIndex.insert(l[F].feature,P,F,z,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,EVe),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,f,m,_,E){for(let T of Qv(f,500)){let C=0;for(let Y of T)C+=Y.length;let P=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),F=P.vertexLength,z=[],U=[];for(let Y of T){if(Y.length===0)continue;Y!==T[0]&&U.push(z.length/2);let Q=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),re=Q.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(re+Y.length-1,re),z.push(Y[0].x),z.push(Y[0].y);for(let fe=1;fe<Y.length;fe++)this.layoutVertexArray.emplaceBack(Y[fe].x,Y[fe].y),this.indexArray2.emplaceBack(re+fe-1,re+fe),z.push(Y[fe].x),z.push(Y[fe].y);Q.vertexLength+=Y.length,Q.primitiveLength+=Y.length}let Z=w9(z,U);for(let Y=0;Y<Z.length;Y+=3)this.indexArray.emplaceBack(F+Z[Y],F+Z[Y+1],F+Z[Y+2]);P.vertexLength+=C,P.primitiveLength+=Z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,_)}}let I9,A9;qt("FillBucket",Dq,{omit:["layers","patternFeatures"]});var DVe={get paint(){return A9=A9||new b({"fill-antialias":new $t(be.paint_fill["fill-antialias"]),"fill-opacity":new ur(be.paint_fill["fill-opacity"]),"fill-color":new ur(be.paint_fill["fill-color"]),"fill-outline-color":new ur(be.paint_fill["fill-outline-color"]),"fill-translate":new $t(be.paint_fill["fill-translate"]),"fill-translate-anchor":new $t(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new _g(be.paint_fill["fill-pattern"])})},get layout(){return I9=I9||new b({"fill-sort-key":new ur(be.layout_fill["fill-sort-key"])})}};class NVe extends p{constructor(l){super(l,DVe)}recalculate(l,f){super.recalculate(l,f);let m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Dq(l)}queryRadius(){return RI(this.paint.get("fill-translate"))}queryIntersectsFeature(l,f,m,_,E,T,C){return u9(PI(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,C),_)}isTileClipped(){return!0}}let qVe=M([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),kVe=M([{name:"a_centroid",components:2,type:"Int16"}],4),{members:FVe}=qVe;var tp={},jVe=u,C9=Rg;function Rg(c,l,f,m,_){this.properties={},this.extent=f,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=_,c.readFields(zVe,this,l)}function zVe(c,l,f){c==1?l.id=f.readVarint():c==2?function(m,_){for(var E=m.readVarint()+m.pos;m.pos<E;){var T=_._keys[m.readVarint()],C=_._values[m.readVarint()];_.properties[T]=C}}(f,l):c==3?l.type=f.readVarint():c==4&&(l._geometry=f.pos)}function BVe(c){for(var l,f,m=0,_=0,E=c.length,T=E-1;_<E;T=_++)m+=((f=c[T]).x-(l=c[_]).x)*(l.y+f.y);return m}Rg.types=["Unknown","Point","LineString","Polygon"],Rg.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var l,f=c.readVarint()+c.pos,m=1,_=0,E=0,T=0,C=[];c.pos<f;){if(_<=0){var P=c.readVarint();m=7&P,_=P>>3}if(_--,m===1||m===2)E+=c.readSVarint(),T+=c.readSVarint(),m===1&&(l&&C.push(l),l=[]),l.push(new jVe(E,T));else{if(m!==7)throw new Error("unknown command "+m);l&&l.push(l[0].clone())}}return l&&C.push(l),C},Rg.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var l=c.readVarint()+c.pos,f=1,m=0,_=0,E=0,T=1/0,C=-1/0,P=1/0,F=-1/0;c.pos<l;){if(m<=0){var z=c.readVarint();f=7&z,m=z>>3}if(m--,f===1||f===2)(_+=c.readSVarint())<T&&(T=_),_>C&&(C=_),(E+=c.readSVarint())<P&&(P=E),E>F&&(F=E);else if(f!==7)throw new Error("unknown command "+f)}return[T,P,C,F]},Rg.prototype.toGeoJSON=function(c,l,f){var m,_,E=this.extent*Math.pow(2,f),T=this.extent*c,C=this.extent*l,P=this.loadGeometry(),F=Rg.types[this.type];function z(Y){for(var Q=0;Q<Y.length;Q++){var re=Y[Q];Y[Q]=[360*(re.x+T)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(re.y+C)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(m=0;m<P.length;m++)U[m]=P[m][0];z(P=U);break;case 2:for(m=0;m<P.length;m++)z(P[m]);break;case 3:for(P=function(Y){var Q=Y.length;if(Q<=1)return[Y];for(var re,fe,de=[],ke=0;ke<Q;ke++){var we=BVe(Y[ke]);we!==0&&(fe===void 0&&(fe=we<0),fe===we<0?(re&&de.push(re),re=[Y[ke]]):re.push(Y[ke]))}return re&&de.push(re),de}(P),m=0;m<P.length;m++)for(_=0;_<P[m].length;_++)z(P[m][_]);}P.length===1?P=P[0]:F="Multi"+F;var Z={type:"Feature",geometry:{type:F,coordinates:P},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var UVe=C9,M9=R9;function R9(c,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(VVe,this,l),this.length=this._features.length}function VVe(c,l,f){c===15?l.version=f.readVarint():c===1?l.name=f.readString():c===5?l.extent=f.readVarint():c===2?l._features.push(f.pos):c===3?l._keys.push(f.readString()):c===4&&l._values.push(function(m){for(var _=null,E=m.readVarint()+m.pos;m.pos<E;){var T=m.readVarint()>>3;_=T===1?m.readString():T===2?m.readFloat():T===3?m.readDouble():T===4?m.readVarint64():T===5?m.readVarint():T===6?m.readSVarint():T===7?m.readBoolean():null}return _}(f))}R9.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var l=this._pbf.readVarint()+this._pbf.pos;return new UVe(this._pbf,l,this.extent,this._keys,this._values)};var GVe=M9;function $Ve(c,l,f){if(c===3){var m=new GVe(f,f.readVarint()+f.pos);m.length&&(l[m.name]=m)}}tp.VectorTile=function(c,l){this.layers=c.readFields($Ve,{},l)},tp.VectorTileFeature=C9,tp.VectorTileLayer=M9;let HVe=tp.VectorTileFeature.types,Nq=Math.pow(2,13);function aw(c,l,f,m,_,E,T,C){c.emplaceBack(l,f,2*Math.floor(m*Nq)+T,_*Nq*2,E*Nq*2,Math.round(C))}class qq{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Yh,this.centroidVertexArray=new Eo,this.indexArray=new Qs,this.programConfigurations=new cm(l.layers,l.zoom),this.segments=new Wr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.features=[],this.hasPattern=Oq("fill-extrusion",this.layers,f);for(let{feature:_,id:E,index:T,sourceLayerIndex:C}of l){let P=this.layers[0]._featureFilter.needGeometry,F=hm(_,P);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),F,m))continue;let z={id:E,sourceLayerIndex:C,index:T,geometry:P?F.geometry:fm(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(Lq("fill-extrusion",this.layers,z,this.zoom,f)):this.addFeature(z,z.geometry,T,m,{}),f.featureIndex.insert(_,z.geometry,T,C,this.index,!0)}}addFeatures(l,f,m){for(let _ of this.features){let{geometry:E}=_;this.addFeature(_,E,_.index,f,m)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,FVe),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,kVe.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,f,m,_,E){for(let T of Qv(f,500)){let C={x:0,y:0,vertexCount:0},P=0;for(let Q of T)P+=Q.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let Q of T){if(Q.length===0||ZVe(Q))continue;let re=0;for(let fe=0;fe<Q.length;fe++){let de=Q[fe];if(fe>=1){let ke=Q[fe-1];if(!WVe(de,ke)){F.vertexLength+4>Wr.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let we=de.sub(ke)._perp()._unit(),Ne=ke.dist(de);re+Ne>32768&&(re=0),aw(this.layoutVertexArray,de.x,de.y,we.x,we.y,0,0,re),aw(this.layoutVertexArray,de.x,de.y,we.x,we.y,0,1,re),C.x+=2*de.x,C.y+=2*de.y,C.vertexCount+=2,re+=Ne,aw(this.layoutVertexArray,ke.x,ke.y,we.x,we.y,0,0,re),aw(this.layoutVertexArray,ke.x,ke.y,we.x,we.y,0,1,re),C.x+=2*ke.x,C.y+=2*ke.y,C.vertexCount+=2;let He=F.vertexLength;this.indexArray.emplaceBack(He,He+2,He+1),this.indexArray.emplaceBack(He+1,He+2,He+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+P>Wr.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),HVe[l.type]!=="Polygon")continue;let z=[],U=[],Z=F.vertexLength;for(let Q of T)if(Q.length!==0){Q!==T[0]&&U.push(z.length/2);for(let re=0;re<Q.length;re++){let fe=Q[re];aw(this.layoutVertexArray,fe.x,fe.y,0,0,1,1,0),C.x+=fe.x,C.y+=fe.y,C.vertexCount+=1,z.push(fe.x),z.push(fe.y)}}let Y=w9(z,U);for(let Q=0;Q<Y.length;Q+=3)this.indexArray.emplaceBack(Z+Y[Q],Z+Y[Q+2],Z+Y[Q+1]);F.primitiveLength+=Y.length/3,F.vertexLength+=P;for(let Q=0;Q<C.vertexCount;Q++){let re=Math.floor(C.x/C.vertexCount),fe=Math.floor(C.y/C.vertexCount);this.centroidVertexArray.emplaceBack(re,fe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,_)}}function WVe(c,l){return c.x===l.x&&(c.x<0||c.x>qi)||c.y===l.y&&(c.y<0||c.y>qi)}function ZVe(c){return c.every(l=>l.x<0)||c.every(l=>l.x>qi)||c.every(l=>l.y<0)||c.every(l=>l.y>qi)}let P9;qt("FillExtrusionBucket",qq,{omit:["layers","features"]});var YVe={get paint(){return P9=P9||new b({"fill-extrusion-opacity":new $t(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ur(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $t(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $t(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _g(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ur(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ur(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $t(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class KVe extends p{constructor(l){super(l,YVe)}createBucket(l){return new qq(l)}queryRadius(){return RI(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,f,m,_,E,T,C,P){let F=PI(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,C),z=this.paint.get("fill-extrusion-height").evaluate(f,m),U=this.paint.get("fill-extrusion-base").evaluate(f,m),Z=function(Q,re,fe,de){let ke=[];for(let we of Q){let Ne=[we.x,we.y,0,1];OI(Ne,Ne,re),ke.push(new d(Ne[0]/Ne[3],Ne[1]/Ne[3]))}return ke}(F,P),Y=function(Q,re,fe,de){let ke=[],we=[],Ne=de[8]*re,He=de[9]*re,ot=de[10]*re,Pt=de[11]*re,ar=de[8]*fe,Ct=de[9]*fe,_t=de[10]*fe,Zt=de[11]*fe;for(let Ft of Q){let Nt=[],Xe=[];for(let Qt of Ft){let Wt=Qt.x,dr=Qt.y,Rn=de[0]*Wt+de[4]*dr+de[12],Sn=de[1]*Wt+de[5]*dr+de[13],Yi=de[2]*Wt+de[6]*dr+de[14],Cl=de[3]*Wt+de[7]*dr+de[15],Ao=Yi+ot,Ki=Cl+Pt,ca=Rn+ar,fa=Sn+Ct,ha=Yi+_t,gi=Cl+Zt,Xi=new d((Rn+Ne)/Ki,(Sn+He)/Ki);Xi.z=Ao/Ki,Nt.push(Xi);let Vo=new d(ca/gi,fa/gi);Vo.z=ha/gi,Xe.push(Vo)}ke.push(Nt),we.push(Xe)}return[ke,we]}(_,U,z,P);return function(Q,re,fe){let de=1/0;u9(fe,re)&&(de=O9(fe,re[0]));for(let ke=0;ke<re.length;ke++){let we=re[ke],Ne=Q[ke];for(let He=0;He<we.length-1;He++){let ot=we[He],Pt=[ot,we[He+1],Ne[He+1],Ne[He],ot];l9(fe,Pt)&&(de=Math.min(de,O9(fe,Pt)))}}return de!==1/0&&de}(Y[0],Y[1],Z)}}function sw(c,l){return c.x*l.x+c.y*l.y}function O9(c,l){if(c.length===1){let f=0,m=l[f++],_;for(;!_||m.equals(_);)if(_=l[f++],!_)return 1/0;for(;f<l.length;f++){let E=l[f],T=c[0],C=_.sub(m),P=E.sub(m),F=T.sub(m),z=sw(C,C),U=sw(C,P),Z=sw(P,P),Y=sw(F,C),Q=sw(F,P),re=z*Z-U*U,fe=(Z*Y-U*Q)/re,de=(z*Q-U*Y)/re,ke=m.z*(1-fe-de)+_.z*fe+E.z*de;if(isFinite(ke))return ke}return 1/0}{let f=1/0;for(let m of l)f=Math.min(f,m.z);return f}}let XVe=M([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:JVe}=XVe,QVe=M([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:e5e}=QVe,t5e=tp.VectorTileFeature.types,r5e=Math.cos(Math.PI/180*37.5),L9=Math.pow(2,14)/.5;class kq{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new wg,this.layoutVertexArray2=new Kh,this.indexArray=new Qs,this.programConfigurations=new cm(l.layers,l.zoom),this.segments=new Wr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=Oq("line",this.layers,f);let _=this.layers[0].layout.get("line-sort-key"),E=!_.isConstant(),T=[];for(let{feature:C,id:P,index:F,sourceLayerIndex:z}of l){let U=this.layers[0]._featureFilter.needGeometry,Z=hm(C,U);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),Z,m))continue;let Y=E?_.evaluate(Z,{},m):void 0,Q={id:P,properties:C.properties,type:C.type,sourceLayerIndex:z,index:F,geometry:U?Z.geometry:fm(C),patterns:{},sortKey:Y};T.push(Q)}E&&T.sort((C,P)=>C.sortKey-P.sortKey);for(let C of T){let{geometry:P,index:F,sourceLayerIndex:z}=C;if(this.hasPattern){let U=Lq("line",this.layers,C,this.zoom,f);this.patternFeatures.push(U)}else this.addFeature(C,P,F,m,{});f.featureIndex.insert(l[F].feature,P,F,z,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,e5e)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,JVe),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,f,m,_,E){let T=this.layers[0].layout,C=T.get("line-join").evaluate(l,{}),P=T.get("line-cap"),F=T.get("line-miter-limit"),z=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(let U of f)this.addLine(U,l,C,P,F,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,E,_)}addLine(l,f,m,_,E,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<l.length-1;de++)this.totalDistance+=l[de].dist(l[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let C=t5e[f.type]==="Polygon",P=l.length;for(;P>=2&&l[P-1].equals(l[P-2]);)P--;let F=0;for(;F<P-1&&l[F].equals(l[F+1]);)F++;if(P<(C?3:2))return;m==="bevel"&&(E=1.05);let z=this.overscaling<=16?15*qi/(512*this.overscaling):0,U=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray),Z,Y,Q,re,fe;this.e1=this.e2=-1,C&&(Z=l[P-2],fe=l[F].sub(Z)._unit()._perp());for(let de=F;de<P;de++){if(Q=de===P-1?C?l[F+1]:void 0:l[de+1],Q&&l[de].equals(Q))continue;fe&&(re=fe),Z&&(Y=Z),Z=l[de],fe=Q?Q.sub(Z)._unit()._perp():re,re=re||fe;let ke=re.add(fe);ke.x===0&&ke.y===0||ke._unit();let we=re.x*fe.x+re.y*fe.y,Ne=ke.x*fe.x+ke.y*fe.y,He=Ne!==0?1/Ne:1/0,ot=2*Math.sqrt(2-2*Ne),Pt=Ne<r5e&&Y&&Q,ar=re.x*fe.y-re.y*fe.x>0;if(Pt&&de>F){let Zt=Z.dist(Y);if(Zt>2*z){let Ft=Z.sub(Z.sub(Y)._mult(z/Zt)._round());this.updateDistance(Y,Ft),this.addCurrentVertex(Ft,re,0,0,U),Y=Ft}}let Ct=Y&&Q,_t=Ct?m:C?"butt":_;if(Ct&&_t==="round"&&(He<T?_t="miter":He<=2&&(_t="fakeround")),_t==="miter"&&He>E&&(_t="bevel"),_t==="bevel"&&(He>2&&(_t="flipbevel"),He<E&&(_t="miter")),Y&&this.updateDistance(Y,Z),_t==="miter")ke._mult(He),this.addCurrentVertex(Z,ke,0,0,U);else if(_t==="flipbevel"){if(He>100)ke=fe.mult(-1);else{let Zt=He*re.add(fe).mag()/re.sub(fe).mag();ke._perp()._mult(Zt*(ar?-1:1))}this.addCurrentVertex(Z,ke,0,0,U),this.addCurrentVertex(Z,ke.mult(-1),0,0,U)}else if(_t==="bevel"||_t==="fakeround"){let Zt=-Math.sqrt(He*He-1),Ft=ar?Zt:0,Nt=ar?0:Zt;if(Y&&this.addCurrentVertex(Z,re,Ft,Nt,U),_t==="fakeround"){let Xe=Math.round(180*ot/Math.PI/20);for(let Qt=1;Qt<Xe;Qt++){let Wt=Qt/Xe;if(Wt!==.5){let Rn=Wt-.5;Wt+=Wt*Rn*(Wt-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Rn*Rn+(.848013+we*(.215638*we-1.06021)))}let dr=fe.sub(re)._mult(Wt)._add(re)._unit()._mult(ar?-1:1);this.addHalfVertex(Z,dr.x,dr.y,!1,ar,0,U)}}Q&&this.addCurrentVertex(Z,fe,-Ft,-Nt,U)}else if(_t==="butt")this.addCurrentVertex(Z,ke,0,0,U);else if(_t==="square"){let Zt=Y?1:-1;this.addCurrentVertex(Z,ke,Zt,Zt,U)}else _t==="round"&&(Y&&(this.addCurrentVertex(Z,re,0,0,U),this.addCurrentVertex(Z,re,1,1,U,!0)),Q&&(this.addCurrentVertex(Z,fe,-1,-1,U,!0),this.addCurrentVertex(Z,fe,0,0,U)));if(Pt&&de<P-1){let Zt=Z.dist(Q);if(Zt>2*z){let Ft=Z.add(Q.sub(Z)._mult(z/Zt)._round());this.updateDistance(Z,Ft),this.addCurrentVertex(Ft,fe,0,0,U),Z=Ft}}}}addCurrentVertex(l,f,m,_,E,T=!1){let C=f.y*_-f.x,P=-f.y-f.x*_;this.addHalfVertex(l,f.x+f.y*m,f.y-f.x*m,T,!1,m,E),this.addHalfVertex(l,C,P,T,!0,-_,E),this.distance>L9/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,f,m,_,E,T))}addHalfVertex({x:l,y:f},m,_,E,T,C,P){let F=.5*(this.lineClips?this.scaledDistance*(L9-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(E?1:0),(f<<1)+(T?1:0),Math.round(63*m)+128,Math.round(63*_)+128,1+(C===0?0:C<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let z=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),P.primitiveLength++),T?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,f){this.distance+=l.dist(f),this.updateScaledDistance()}}let D9,N9;qt("LineBucket",kq,{omit:["layers","patternFeatures"]});var q9={get paint(){return N9=N9||new b({"line-opacity":new ur(be.paint_line["line-opacity"]),"line-color":new ur(be.paint_line["line-color"]),"line-translate":new $t(be.paint_line["line-translate"]),"line-translate-anchor":new $t(be.paint_line["line-translate-anchor"]),"line-width":new ur(be.paint_line["line-width"]),"line-gap-width":new ur(be.paint_line["line-gap-width"]),"line-offset":new ur(be.paint_line["line-offset"]),"line-blur":new ur(be.paint_line["line-blur"]),"line-dasharray":new xg(be.paint_line["line-dasharray"]),"line-pattern":new _g(be.paint_line["line-pattern"]),"line-gradient":new Xx(be.paint_line["line-gradient"])})},get layout(){return D9=D9||new b({"line-cap":new $t(be.layout_line["line-cap"]),"line-join":new ur(be.layout_line["line-join"]),"line-miter-limit":new $t(be.layout_line["line-miter-limit"]),"line-round-limit":new $t(be.layout_line["line-round-limit"]),"line-sort-key":new ur(be.layout_line["line-sort-key"])})}};class n5e extends ur{possiblyEvaluate(l,f){return f=new Gn(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(l,f)}evaluate(l,f,m,_){return f=ee({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(l,f,m,_)}}let qI;class i5e extends p{constructor(l){super(l,q9),this.gradientVersion=0,qI||(qI=new n5e(q9.paint.properties["line-width"].specification),qI.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){let f=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof Rh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,f){super.recalculate(l,f),this.paint._values["line-floorwidth"]=qI.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new kq(l)}queryRadius(l){let f=l,m=k9(ew("line-width",this,f),ew("line-gap-width",this,f)),_=ew("line-offset",this,f);return m/2+Math.abs(_)+RI(this.paint.get("line-translate"))}queryIntersectsFeature(l,f,m,_,E,T,C){let P=PI(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,C),F=C/2*k9(this.paint.get("line-width").evaluate(f,m),this.paint.get("line-gap-width").evaluate(f,m)),z=this.paint.get("line-offset").evaluate(f,m);return z&&(_=function(U,Z){let Y=[];for(let Q=0;Q<U.length;Q++){let re=U[Q],fe=[];for(let de=0;de<re.length;de++){let ke=re[de-1],we=re[de],Ne=re[de+1],He=de===0?new d(0,0):we.sub(ke)._unit()._perp(),ot=de===re.length-1?new d(0,0):Ne.sub(we)._unit()._perp(),Pt=He._add(ot)._unit(),ar=Pt.x*ot.x+Pt.y*ot.y;ar!==0&&Pt._mult(1/ar),fe.push(Pt._mult(Z)._add(we))}Y.push(fe)}return Y}(_,z*C)),function(U,Z,Y){for(let Q=0;Q<Z.length;Q++){let re=Z[Q];if(U.length>=3){for(let fe=0;fe<re.length;fe++)if(Ag(U,re[fe]))return!0}if(pVe(U,re,Y))return!0}return!1}(P,_,F)}isTileClipped(){return!0}}function k9(c,l){return l>0?l+2*c:c}let o5e=M([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),a5e=M([{name:"a_projected_pos",components:3,type:"Float32"}],4);M([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let s5e=M([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);M([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let F9=M([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),l5e=M([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function u5e(c,l,f){return c.sections.forEach(m=>{m.text=function(_,E,T){let C=E.layout.get("text-transform").evaluate(T,{});return C==="uppercase"?_=_.toLocaleUpperCase():C==="lowercase"&&(_=_.toLocaleLowerCase()),Ba.applyArabicShaping&&(_=Ba.applyArabicShaping(_)),_}(m.text,l,f)}),c}M([{name:"triangle",components:3,type:"Uint16"}]),M([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),M([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),M([{type:"Float32",name:"offsetX"}]),M([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),M([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let lw={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ui=24,j9=bn,z9=function(c,l,f,m,_){var E,T,C=8*_-m-1,P=(1<<C)-1,F=P>>1,z=-7,U=f?_-1:0,Z=f?-1:1,Y=c[l+U];for(U+=Z,E=Y&(1<<-z)-1,Y>>=-z,z+=C;z>0;E=256*E+c[l+U],U+=Z,z-=8);for(T=E&(1<<-z)-1,E>>=-z,z+=m;z>0;T=256*T+c[l+U],U+=Z,z-=8);if(E===0)E=1-F;else{if(E===P)return T?NaN:1/0*(Y?-1:1);T+=Math.pow(2,m),E-=F}return(Y?-1:1)*T*Math.pow(2,E-m)},B9=function(c,l,f,m,_,E){var T,C,P,F=8*E-_-1,z=(1<<F)-1,U=z>>1,Z=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=m?0:E-1,Q=m?1:-1,re=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(C=isNaN(l)?1:0,T=z):(T=Math.floor(Math.log(l)/Math.LN2),l*(P=Math.pow(2,-T))<1&&(T--,P*=2),(l+=T+U>=1?Z/P:Z*Math.pow(2,1-U))*P>=2&&(T++,P/=2),T+U>=z?(C=0,T=z):T+U>=1?(C=(l*P-1)*Math.pow(2,_),T+=U):(C=l*Math.pow(2,U-1)*Math.pow(2,_),T=0));_>=8;c[f+Y]=255&C,Y+=Q,C/=256,_-=8);for(T=T<<_|C,F+=_;F>0;c[f+Y]=255&T,Y+=Q,T/=256,F-=8);c[f+Y-Q]|=128*re};function bn(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}bn.Varint=0,bn.Fixed64=1,bn.Bytes=2,bn.Fixed32=5;var Fq=4294967296,U9=1/Fq,V9=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function wf(c){return c.type===bn.Bytes?c.readVarint()+c.pos:c.pos+1}function Pg(c,l,f){return f?4294967296*l+(c>>>0):4294967296*(l>>>0)+(c>>>0)}function G9(c,l,f){var m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));f.realloc(m);for(var _=f.pos-1;_>=c;_--)f.buf[_+m]=f.buf[_]}function c5e(c,l){for(var f=0;f<c.length;f++)l.writeVarint(c[f])}function f5e(c,l){for(var f=0;f<c.length;f++)l.writeSVarint(c[f])}function h5e(c,l){for(var f=0;f<c.length;f++)l.writeFloat(c[f])}function p5e(c,l){for(var f=0;f<c.length;f++)l.writeDouble(c[f])}function d5e(c,l){for(var f=0;f<c.length;f++)l.writeBoolean(c[f])}function m5e(c,l){for(var f=0;f<c.length;f++)l.writeFixed32(c[f])}function v5e(c,l){for(var f=0;f<c.length;f++)l.writeSFixed32(c[f])}function g5e(c,l){for(var f=0;f<c.length;f++)l.writeFixed64(c[f])}function y5e(c,l){for(var f=0;f<c.length;f++)l.writeSFixed64(c[f])}function kI(c,l){return(c[l]|c[l+1]<<8|c[l+2]<<16)+16777216*c[l+3]}function Og(c,l,f){c[f]=l,c[f+1]=l>>>8,c[f+2]=l>>>16,c[f+3]=l>>>24}function $9(c,l){return(c[l]|c[l+1]<<8|c[l+2]<<16)+(c[l+3]<<24)}bn.prototype={destroy:function(){this.buf=null},readFields:function(c,l,f){for(f=f||this.length;this.pos<f;){var m=this.readVarint(),_=m>>3,E=this.pos;this.type=7&m,c(_,l,this),this.pos===E&&this.skip(m)}return l},readMessage:function(c,l){return this.readFields(c,l,this.readVarint()+this.pos)},readFixed32:function(){var c=kI(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=$9(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=kI(this.buf,this.pos)+kI(this.buf,this.pos+4)*Fq;return this.pos+=8,c},readSFixed64:function(){var c=kI(this.buf,this.pos)+$9(this.buf,this.pos+4)*Fq;return this.pos+=8,c},readFloat:function(){var c=z9(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=z9(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var l,f,m=this.buf;return l=127&(f=m[this.pos++]),f<128?l:(l|=(127&(f=m[this.pos++]))<<7,f<128?l:(l|=(127&(f=m[this.pos++]))<<14,f<128?l:(l|=(127&(f=m[this.pos++]))<<21,f<128?l:function(_,E,T){var C,P,F=T.buf;if(C=(112&(P=F[T.pos++]))>>4,P<128||(C|=(127&(P=F[T.pos++]))<<3,P<128)||(C|=(127&(P=F[T.pos++]))<<10,P<128)||(C|=(127&(P=F[T.pos++]))<<17,P<128)||(C|=(127&(P=F[T.pos++]))<<24,P<128)||(C|=(1&(P=F[T.pos++]))<<31,P<128))return Pg(_,C,E);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(f=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,l=this.pos;return this.pos=c,c-l>=12&&V9?function(f,m,_){return V9.decode(f.subarray(m,_))}(this.buf,l,c):function(f,m,_){for(var E="",T=m;T<_;){var C,P,F,z=f[T],U=null,Z=z>239?4:z>223?3:z>191?2:1;if(T+Z>_)break;Z===1?z<128&&(U=z):Z===2?(192&(C=f[T+1]))==128&&(U=(31&z)<<6|63&C)<=127&&(U=null):Z===3?(P=f[T+2],(192&(C=f[T+1]))==128&&(192&P)==128&&((U=(15&z)<<12|(63&C)<<6|63&P)<=2047||U>=55296&&U<=57343)&&(U=null)):Z===4&&(P=f[T+2],F=f[T+3],(192&(C=f[T+1]))==128&&(192&P)==128&&(192&F)==128&&((U=(15&z)<<18|(63&C)<<12|(63&P)<<6|63&F)<=65535||U>=1114112)&&(U=null)),U===null?(U=65533,Z=1):U>65535&&(U-=65536,E+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),E+=String.fromCharCode(U),T+=Z}return E}(this.buf,l,c)},readBytes:function(){var c=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,c);return this.pos=c,l},readPackedVarint:function(c,l){if(this.type!==bn.Bytes)return c.push(this.readVarint(l));var f=wf(this);for(c=c||[];this.pos<f;)c.push(this.readVarint(l));return c},readPackedSVarint:function(c){if(this.type!==bn.Bytes)return c.push(this.readSVarint());var l=wf(this);for(c=c||[];this.pos<l;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==bn.Bytes)return c.push(this.readBoolean());var l=wf(this);for(c=c||[];this.pos<l;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==bn.Bytes)return c.push(this.readFloat());var l=wf(this);for(c=c||[];this.pos<l;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==bn.Bytes)return c.push(this.readDouble());var l=wf(this);for(c=c||[];this.pos<l;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==bn.Bytes)return c.push(this.readFixed32());var l=wf(this);for(c=c||[];this.pos<l;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==bn.Bytes)return c.push(this.readSFixed32());var l=wf(this);for(c=c||[];this.pos<l;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==bn.Bytes)return c.push(this.readFixed64());var l=wf(this);for(c=c||[];this.pos<l;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==bn.Bytes)return c.push(this.readSFixed64());var l=wf(this);for(c=c||[];this.pos<l;)c.push(this.readSFixed64());return c},skip:function(c){var l=7&c;if(l===bn.Varint)for(;this.buf[this.pos++]>127;);else if(l===bn.Bytes)this.pos=this.readVarint()+this.pos;else if(l===bn.Fixed32)this.pos+=4;else{if(l!==bn.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(c,l){this.writeVarint(c<<3|l)},realloc:function(c){for(var l=this.length||16;l<this.pos+c;)l*=2;if(l!==this.length){var f=new Uint8Array(l);f.set(this.buf),this.buf=f,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Og(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Og(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Og(this.buf,-1&c,this.pos),Og(this.buf,Math.floor(c*U9),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Og(this.buf,-1&c,this.pos),Og(this.buf,Math.floor(c*U9),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(l,f){var m,_;if(l>=0?(m=l%4294967296|0,_=l/4294967296|0):(_=~(-l/4294967296),4294967295^(m=~(-l%4294967296))?m=m+1|0:(m=0,_=_+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(E,T,C){C.buf[C.pos++]=127&E|128,E>>>=7,C.buf[C.pos++]=127&E|128,E>>>=7,C.buf[C.pos++]=127&E|128,E>>>=7,C.buf[C.pos++]=127&E|128,C.buf[C.pos]=127&(E>>>=7)}(m,0,f),function(E,T){var C=(7&E)<<4;T.buf[T.pos++]|=C|((E>>>=3)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E|((E>>>=7)?128:0),E&&(T.buf[T.pos++]=127&E)))))}(_,f)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var l=this.pos;this.pos=function(m,_,E){for(var T,C,P=0;P<_.length;P++){if((T=_.charCodeAt(P))>55295&&T<57344){if(!C){T>56319||P+1===_.length?(m[E++]=239,m[E++]=191,m[E++]=189):C=T;continue}if(T<56320){m[E++]=239,m[E++]=191,m[E++]=189,C=T;continue}T=C-55296<<10|T-56320|65536,C=null}else C&&(m[E++]=239,m[E++]=191,m[E++]=189,C=null);T<128?m[E++]=T:(T<2048?m[E++]=T>>6|192:(T<65536?m[E++]=T>>12|224:(m[E++]=T>>18|240,m[E++]=T>>12&63|128),m[E++]=T>>6&63|128),m[E++]=63&T|128)}return E}(this.buf,c,this.pos);var f=this.pos-l;f>=128&&G9(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeFloat:function(c){this.realloc(4),B9(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),B9(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var l=c.length;this.writeVarint(l),this.realloc(l);for(var f=0;f<l;f++)this.buf[this.pos++]=c[f]},writeRawMessage:function(c,l){this.pos++;var f=this.pos;c(l,this);var m=this.pos-f;m>=128&&G9(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,l,f){this.writeTag(c,bn.Bytes),this.writeRawMessage(l,f)},writePackedVarint:function(c,l){l.length&&this.writeMessage(c,c5e,l)},writePackedSVarint:function(c,l){l.length&&this.writeMessage(c,f5e,l)},writePackedBoolean:function(c,l){l.length&&this.writeMessage(c,d5e,l)},writePackedFloat:function(c,l){l.length&&this.writeMessage(c,h5e,l)},writePackedDouble:function(c,l){l.length&&this.writeMessage(c,p5e,l)},writePackedFixed32:function(c,l){l.length&&this.writeMessage(c,m5e,l)},writePackedSFixed32:function(c,l){l.length&&this.writeMessage(c,v5e,l)},writePackedFixed64:function(c,l){l.length&&this.writeMessage(c,g5e,l)},writePackedSFixed64:function(c,l){l.length&&this.writeMessage(c,y5e,l)},writeBytesField:function(c,l){this.writeTag(c,bn.Bytes),this.writeBytes(l)},writeFixed32Field:function(c,l){this.writeTag(c,bn.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(c,l){this.writeTag(c,bn.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(c,l){this.writeTag(c,bn.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(c,l){this.writeTag(c,bn.Fixed64),this.writeSFixed64(l)},writeVarintField:function(c,l){this.writeTag(c,bn.Varint),this.writeVarint(l)},writeSVarintField:function(c,l){this.writeTag(c,bn.Varint),this.writeSVarint(l)},writeStringField:function(c,l){this.writeTag(c,bn.Bytes),this.writeString(l)},writeFloatField:function(c,l){this.writeTag(c,bn.Fixed32),this.writeFloat(l)},writeDoubleField:function(c,l){this.writeTag(c,bn.Fixed64),this.writeDouble(l)},writeBooleanField:function(c,l){this.writeVarintField(c,!!l)}};var jq=a(j9);let zq=3;function _5e(c,l,f){c===1&&f.readMessage(x5e,l)}function x5e(c,l,f){if(c===3){let{id:m,bitmap:_,width:E,height:T,left:C,top:P,advance:F}=f.readMessage(w5e,{});l.push({id:m,bitmap:new rw({width:E+2*zq,height:T+2*zq},_),metrics:{width:E,height:T,left:C,top:P,advance:F}})}}function w5e(c,l,f){c===1?l.id=f.readVarint():c===2?l.bitmap=f.readBytes():c===3?l.width=f.readVarint():c===4?l.height=f.readVarint():c===5?l.left=f.readSVarint():c===6?l.top=f.readSVarint():c===7&&(l.advance=f.readVarint())}let H9=zq;function W9(c){let l=0,f=0;for(let T of c)l+=T.w*T.h,f=Math.max(f,T.w);c.sort((T,C)=>C.h-T.h);let m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),f),h:1/0}],_=0,E=0;for(let T of c)for(let C=m.length-1;C>=0;C--){let P=m[C];if(!(T.w>P.w||T.h>P.h)){if(T.x=P.x,T.y=P.y,E=Math.max(E,T.y+T.h),_=Math.max(_,T.x+T.w),T.w===P.w&&T.h===P.h){let F=m.pop();C<m.length&&(m[C]=F)}else T.h===P.h?(P.x+=T.w,P.w-=T.w):T.w===P.w?(P.y+=T.h,P.h-=T.h):(m.push({x:P.x+T.w,y:P.y,w:P.w-T.w,h:T.h}),P.y+=T.h,P.h-=T.h);break}}return{w:_,h:E,fill:l/(_*E)||0}}let Va=1;class Bq{constructor(l,{pixelRatio:f,version:m,stretchX:_,stretchY:E,content:T,textFitWidth:C,textFitHeight:P}){this.paddedRect=l,this.pixelRatio=f,this.stretchX=_,this.stretchY=E,this.content=T,this.version=m,this.textFitWidth=C,this.textFitHeight=P}get tl(){return[this.paddedRect.x+Va,this.paddedRect.y+Va]}get br(){return[this.paddedRect.x+this.paddedRect.w-Va,this.paddedRect.y+this.paddedRect.h-Va]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Va)/this.pixelRatio,(this.paddedRect.h-2*Va)/this.pixelRatio]}}class Z9{constructor(l,f){let m={},_={};this.haveRenderCallbacks=[];let E=[];this.addImages(l,m,E),this.addImages(f,_,E);let{w:T,h:C}=W9(E),P=new el({width:T||1,height:C||1});for(let F in l){let z=l[F],U=m[F].paddedRect;el.copy(z.data,P,{x:0,y:0},{x:U.x+Va,y:U.y+Va},z.data)}for(let F in f){let z=f[F],U=_[F].paddedRect,Z=U.x+Va,Y=U.y+Va,Q=z.data.width,re=z.data.height;el.copy(z.data,P,{x:0,y:0},{x:Z,y:Y},z.data),el.copy(z.data,P,{x:0,y:re-1},{x:Z,y:Y-1},{width:Q,height:1}),el.copy(z.data,P,{x:0,y:0},{x:Z,y:Y+re},{width:Q,height:1}),el.copy(z.data,P,{x:Q-1,y:0},{x:Z-1,y:Y},{width:1,height:re}),el.copy(z.data,P,{x:0,y:0},{x:Z+Q,y:Y},{width:1,height:re})}this.image=P,this.iconPositions=m,this.patternPositions=_}addImages(l,f,m){for(let _ in l){let E=l[_],T={x:0,y:0,w:E.data.width+2*Va,h:E.data.height+2*Va};m.push(T),f[_]=new Bq(T,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(l,f){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),f),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),f)}patchUpdatedImage(l,f,m){if(!l||!f||l.version===f.version)return;l.version=f.version;let[_,E]=l.tl;m.update(f.data,void 0,{x:_,y:E})}}var rp;qt("ImagePosition",Bq),qt("ImageAtlas",Z9),i.ah=void 0,(rp=i.ah||(i.ah={}))[rp.none=0]="none",rp[rp.horizontal=1]="horizontal",rp[rp.vertical=2]="vertical",rp[rp.horizontalOnly=3]="horizontalOnly";let uw=-17;class cw{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,f){let m=new cw;return m.scale=l||1,m.fontStack=f,m}static forImage(l){let f=new cw;return f.imageName=l,f}}class Lg{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,f){let m=new Lg;for(let _=0;_<l.sections.length;_++){let E=l.sections[_];E.image?m.addImageSection(E):m.addTextSection(E,f)}return m}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let f="";for(let m=0;m<l.length;m++){let _=l.charCodeAt(m+1)||null,E=l.charCodeAt(m-1)||null;f+=_&&SI(_)&&!lw[l[m+1]]||E&&SI(E)&&!lw[l[m-1]]||!lw[l[m]]?l[m]:lw[l[m]]}return f}(this.text)}trim(){let l=0;for(let m=0;m<this.text.length&&jI[this.text.charCodeAt(m)];m++)l++;let f=this.text.length;for(let m=this.text.length-1;m>=0&&m>=l&&jI[this.text.charCodeAt(m)];m--)f--;this.text=this.text.substring(l,f),this.sectionIndex=this.sectionIndex.slice(l,f)}substring(l,f){let m=new Lg;return m.text=this.text.substring(l,f),m.sectionIndex=this.sectionIndex.slice(l,f),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,f)=>Math.max(l,this.sections[f].scale),0)}addTextSection(l,f){this.text+=l.text,this.sections.push(cw.forText(l.scale,l.fontStack||f));let m=this.sections.length-1;for(let _=0;_<l.text.length;++_)this.sectionIndex.push(m)}addImageSection(l){let f=l.image?l.image.name:"";if(f.length===0)return void Re("Can't add FormattedSection with an empty image.");let m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(cw.forImage(f)),this.sectionIndex.push(this.sections.length-1)):Re("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function FI(c,l,f,m,_,E,T,C,P,F,z,U,Z,Y,Q){let re=Lg.fromFeature(c,_),fe;U===i.ah.vertical&&re.verticalizePunctuation();let{processBidirectionalText:de,processStyledBidirectionalText:ke}=Ba;if(de&&re.sections.length===1){fe=[];let He=de(re.toString(),Uq(re,F,E,l,m,Y));for(let ot of He){let Pt=new Lg;Pt.text=ot,Pt.sections=re.sections;for(let ar=0;ar<ot.length;ar++)Pt.sectionIndex.push(0);fe.push(Pt)}}else if(ke){fe=[];let He=ke(re.text,re.sectionIndex,Uq(re,F,E,l,m,Y));for(let ot of He){let Pt=new Lg;Pt.text=ot[0],Pt.sectionIndex=ot[1],Pt.sections=re.sections,fe.push(Pt)}}else fe=function(He,ot){let Pt=[],ar=He.text,Ct=0;for(let _t of ot)Pt.push(He.substring(Ct,_t)),Ct=_t;return Ct<ar.length&&Pt.push(He.substring(Ct,ar.length)),Pt}(re,Uq(re,F,E,l,m,Y));let we=[],Ne={positionedLines:we,text:re.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:U,iconsInText:!1,verticalizable:!1};return function(He,ot,Pt,ar,Ct,_t,Zt,Ft,Nt,Xe,Qt,Wt){let dr=0,Rn=uw,Sn=0,Yi=0,Cl=Ft==="right"?1:Ft==="left"?0:.5,Ao=0;for(let gi of Ct){gi.trim();let Xi=gi.getMaxScale(),Vo=(Xi-1)*Ui,Co={positionedGlyphs:[],lineOffset:0};He.positionedLines[Ao]=Co;let pa=Co.positionedGlyphs,Mo=0;if(!gi.length()){Rn+=_t,++Ao;continue}for(let Ga=0;Ga<gi.length();Ga++){let rn=gi.getSection(Ga),kn=gi.getSectionIndex(Ga),Zn=gi.getCharCode(Ga),ms=0,li=null,kg=null,fc=null,hc=Ui,Ml=!(Nt===i.ah.horizontal||!Qt&&!Yx(Zn)||Qt&&(jI[Zn]||(Ki=Zn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Ki)))));if(rn.imageName){let nl=ar[rn.imageName];if(!nl)continue;fc=rn.imageName,He.iconsInText=He.iconsInText||!0,kg=nl.paddedRect;let uo=nl.displaySize;rn.scale=rn.scale*Ui/Wt,li={width:uo[0],height:uo[1],left:Va,top:-H9,advance:Ml?uo[1]:uo[0]},ms=Vo+(Ui-uo[1]*rn.scale),hc=li.advance;let bf=Ml?uo[0]*rn.scale-Ui*Xi:uo[1]*rn.scale-Ui*Xi;bf>0&&bf>Mo&&(Mo=bf)}else{let nl=Pt[rn.fontStack],uo=nl&&nl[Zn];if(uo&&uo.rect)kg=uo.rect,li=uo.metrics;else{let bf=ot[rn.fontStack],vw=bf&&bf[Zn];if(!vw)continue;li=vw.metrics}ms=(Xi-rn.scale)*Ui}Ml?(He.verticalizable=!0,pa.push({glyph:Zn,imageName:fc,x:dr,y:Rn+ms,vertical:Ml,scale:rn.scale,fontStack:rn.fontStack,sectionIndex:kn,metrics:li,rect:kg}),dr+=hc*rn.scale+Xe):(pa.push({glyph:Zn,imageName:fc,x:dr,y:Rn+ms,vertical:Ml,scale:rn.scale,fontStack:rn.fontStack,sectionIndex:kn,metrics:li,rect:kg}),dr+=li.advance*rn.scale+Xe)}pa.length!==0&&(Sn=Math.max(dr-Xe,Sn),T5e(pa,0,pa.length-1,Cl,Mo)),dr=0;let rl=_t*Xi+Mo;Co.lineOffset=Math.max(Mo,Vo),Rn+=rl,Yi=Math.max(rl,Yi),++Ao}var Ki;let ca=Rn-uw,{horizontalAlign:fa,verticalAlign:ha}=Vq(Zt);(function(gi,Xi,Vo,Co,pa,Mo,rl,Ga,rn){let kn=(Xi-Vo)*pa,Zn=0;Zn=Mo!==rl?-Ga*Co-uw:(-Co*rn+.5)*rl;for(let ms of gi)for(let li of ms.positionedGlyphs)li.x+=kn,li.y+=Zn})(He.positionedLines,Cl,fa,ha,Sn,Yi,_t,ca,Ct.length),He.top+=-ha*ca,He.bottom=He.top+ca,He.left+=-fa*Sn,He.right=He.left+Sn}(Ne,l,f,m,fe,T,C,P,U,F,Z,Q),!function(He){for(let ot of He)if(ot.positionedGlyphs.length!==0)return!1;return!0}(we)&&Ne}let jI={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},b5e={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},S5e={40:!0};function Y9(c,l,f,m,_,E){if(l.imageName){let T=m[l.imageName];return T?T.displaySize[0]*l.scale*Ui/E+_:0}{let T=f[l.fontStack],C=T&&T[c];return C?C.metrics.advance*l.scale+_:0}}function K9(c,l,f,m){let _=Math.pow(c-l,2);return m?c<l?_/2:2*_:_+Math.abs(f)*f}function E5e(c,l,f){let m=0;return c===10&&(m-=1e4),f&&(m+=150),c!==40&&c!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function X9(c,l,f,m,_,E){let T=null,C=K9(l,f,_,E);for(let P of m){let F=K9(l-P.x,f,_,E)+P.badness;F<=C&&(T=P,C=F)}return{index:c,x:l,priorBreak:T,badness:C}}function J9(c){return c?J9(c.priorBreak).concat(c.index):[]}function Uq(c,l,f,m,_,E){if(!c)return[];let T=[],C=function(U,Z,Y,Q,re,fe){let de=0;for(let ke=0;ke<U.length();ke++){let we=U.getSection(ke);de+=Y9(U.getCharCode(ke),we,Q,re,Z,fe)}return de/Math.max(1,Math.ceil(de/Y))}(c,l,f,m,_,E),P=c.text.indexOf("\u200B")>=0,F=0;for(let U=0;U<c.length();U++){let Z=c.getSection(U),Y=c.getCharCode(U);if(jI[Y]||(F+=Y9(Y,Z,m,_,l,E)),U<c.length()-1){let Q=!((z=Y)<11904)&&(!!Hr["CJK Compatibility Forms"](z)||!!Hr["CJK Compatibility"](z)||!!Hr["CJK Strokes"](z)||!!Hr["CJK Symbols and Punctuation"](z)||!!Hr["Enclosed CJK Letters and Months"](z)||!!Hr["Halfwidth and Fullwidth Forms"](z)||!!Hr["Ideographic Description Characters"](z)||!!Hr["Vertical Forms"](z)||bI.test(String.fromCodePoint(z)));(b5e[Y]||Q||Z.imageName||U!==c.length()-2&&S5e[c.getCharCode(U+1)])&&T.push(X9(U+1,F,C,T,E5e(Y,c.getCharCode(U+1),Q&&P),!1))}}var z;return J9(X9(c.length(),F,C,T,0,!0))}function Vq(c){let l=.5,f=.5;switch(c){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0;}switch(c){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;}return{horizontalAlign:l,verticalAlign:f}}function T5e(c,l,f,m,_){if(!m&&!_)return;let E=c[f],T=(c[f].x+E.metrics.advance*E.scale)*m;for(let C=l;C<=f;C++)c[C].x-=T,c[C].y+=_}function I5e(c,l,f){let{horizontalAlign:m,verticalAlign:_}=Vq(f),E=l[0]-c.displaySize[0]*m,T=l[1]-c.displaySize[1]*_;return{image:c,top:T,bottom:T+c.displaySize[1],left:E,right:E+c.displaySize[0]}}function Q9(c){var l,f;let m=c.left,_=c.top,E=c.right-m,T=c.bottom-_,C=(l=c.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",P=(f=c.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",F=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(P==="proportional"){if(C==="stretchOnly"&&E/T<F||C==="proportional"){let z=Math.ceil(T*F);m*=z/E,E=z}}else if(C==="proportional"&&P==="stretchOnly"&&F!==0&&E/T>F){let z=Math.ceil(E/F);_*=z/T,T=z}return{x1:m,y1:_,x2:m+E,y2:_+T}}function eX(c,l,f,m,_,E){let T=c.image,C;if(T.content){let fe=T.content,de=T.pixelRatio||1;C=[fe[0]/de,fe[1]/de,T.displaySize[0]-fe[2]/de,T.displaySize[1]-fe[3]/de]}let P=l.left*E,F=l.right*E,z,U,Z,Y;f==="width"||f==="both"?(Y=_[0]+P-m[3],U=_[0]+F+m[1]):(Y=_[0]+(P+F-T.displaySize[0])/2,U=Y+T.displaySize[0]);let Q=l.top*E,re=l.bottom*E;return f==="height"||f==="both"?(z=_[1]+Q-m[0],Z=_[1]+re+m[2]):(z=_[1]+(Q+re-T.displaySize[1])/2,Z=z+T.displaySize[1]),{image:T,top:z,right:U,bottom:Z,left:Y,collisionPadding:C}}let fw=255,cc=128,np=fw*cc;function tX(c,l){let{expression:f}=l;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new Gn(c+1))};if(f.kind==="source")return{kind:"source"};{let{zoomStops:m,interpolationType:_}=f,E=0;for(;E<m.length&&m[E]<=c;)E++;E=Math.max(0,E-1);let T=E;for(;T<m.length&&m[T]<c+1;)T++;T=Math.min(m.length-1,T);let C=m[E],P=m[T];return f.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:P,interpolationType:_}:{kind:"camera",minZoom:C,maxZoom:P,minSize:f.evaluate(new Gn(C)),maxSize:f.evaluate(new Gn(P)),interpolationType:_}}}function Gq(c,l,f){let m="never",_=c.get(l);return _?m=_:c.get(f)&&(m="always"),m}let A5e=tp.VectorTileFeature.types,C5e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zI(c,l,f,m,_,E,T,C,P,F,z,U,Z){let Y=C?Math.min(np,Math.round(C[0])):0,Q=C?Math.min(np,Math.round(C[1])):0;c.emplaceBack(l,f,Math.round(32*m),Math.round(32*_),E,T,(Y<<1)+(P?1:0),Q,16*F,16*z,256*U,256*Z)}function $q(c,l,f){c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f)}function M5e(c){for(let l of c.sections)if(_q(l.text))return!0;return!1}class Hq{constructor(l){this.layoutVertexArray=new bg,this.indexArray=new Qs,this.programConfigurations=l,this.segments=new Wr,this.dynamicLayoutVertexArray=new Jx,this.opacityVertexArray=new ps,this.hasVisibleVertices=!1,this.placedSymbolArray=new $n}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,f,m,_){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,o5e.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,a5e.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,C5e,!0),this.opacityVertexBuffer.itemSize=1),(m||_)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qt("SymbolBuffers",Hq);class Wq{constructor(l,f,m){this.layoutVertexArray=new l,this.layoutAttributes=f,this.indexArray=new m,this.segments=new Wr,this.collisionVertexArray=new lc}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,s5e.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}qt("CollisionBuffers",Wq);class Dg{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(T=>T.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Iq([]),this.placementViewportMatrix=Iq([]);let f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tX(this.zoom,f["text-size"]),this.iconSizeData=tX(this.zoom,f["icon-size"]);let m=this.layers[0].layout,_=m.get("symbol-sort-key"),E=m.get("symbol-z-order");this.canOverlap=Gq(m,"text-overlap","text-allow-overlap")!=="never"||Gq(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(T=>i.ah[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=l.sourceID}createArrays(){this.text=new Hq(new cm(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new Hq(new cm(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new Hn,this.lineVertexArray=new So,this.symbolInstances=new Gr,this.textAnchorOffsets=new Wn}calculateGlyphDependencies(l,f,m,_,E){for(let T=0;T<l.length;T++)if(f[l.charCodeAt(T)]=!0,(m||_)&&E){let C=lw[l.charAt(T)];C&&(f[C.charCodeAt(0)]=!0)}}populate(l,f,m){let _=this.layers[0],E=_.layout,T=E.get("text-font"),C=E.get("text-field"),P=E.get("icon-image"),F=(C.value.kind!=="constant"||C.value.value instanceof ka&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),z=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,U=E.get("symbol-sort-key");if(this.features=[],!F&&!z)return;let Z=f.iconDependencies,Y=f.glyphDependencies,Q=f.availableImages,re=new Gn(this.zoom);for(let{feature:fe,id:de,index:ke,sourceLayerIndex:we}of l){let Ne=_._featureFilter.needGeometry,He=hm(fe,Ne);if(!_._featureFilter.filter(re,He,m))continue;let ot,Pt;if(Ne||(He.geometry=fm(fe)),F){let Ct=_.getValueAndResolveTokens("text-field",He,m,Q),_t=ka.factory(Ct),Zt=this.hasRTLText=this.hasRTLText||M5e(_t);(!Zt||Ba.getRTLTextPluginStatus()==="unavailable"||Zt&&Ba.isParsed())&&(ot=u5e(_t,_,He))}if(z){let Ct=_.getValueAndResolveTokens("icon-image",He,m,Q);Pt=Ct instanceof ja?Ct:ja.fromString(Ct)}if(!ot&&!Pt)continue;let ar=this.sortFeaturesByKey?U.evaluate(He,{},m):void 0;if(this.features.push({id:de,text:ot,icon:Pt,index:ke,sourceLayerIndex:we,geometry:He.geometry,properties:fe.properties,type:A5e[fe.type],sortKey:ar}),Pt&&(Z[Pt.name]=!0),ot){let Ct=T.evaluate(He,{},m).join(","),_t=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.ah.vertical)>=0;for(let Zt of ot.sections)if(Zt.image)Z[Zt.image.name]=!0;else{let Ft=Wx(ot.toString()),Nt=Zt.fontStack||Ct,Xe=Y[Nt]=Y[Nt]||{};this.calculateGlyphDependencies(Zt.text,Xe,_t,this.allowVerticalPlacement,Ft)}}}E.get("symbol-placement")==="line"&&(this.features=function(fe){let de={},ke={},we=[],Ne=0;function He(Ct){we.push(fe[Ct]),Ne++}function ot(Ct,_t,Zt){let Ft=ke[Ct];return delete ke[Ct],ke[_t]=Ft,we[Ft].geometry[0].pop(),we[Ft].geometry[0]=we[Ft].geometry[0].concat(Zt[0]),Ft}function Pt(Ct,_t,Zt){let Ft=de[_t];return delete de[_t],de[Ct]=Ft,we[Ft].geometry[0].shift(),we[Ft].geometry[0]=Zt[0].concat(we[Ft].geometry[0]),Ft}function ar(Ct,_t,Zt){let Ft=Zt?_t[0][_t[0].length-1]:_t[0][0];return`${Ct}:${Ft.x}:${Ft.y}`}for(let Ct=0;Ct<fe.length;Ct++){let _t=fe[Ct],Zt=_t.geometry,Ft=_t.text?_t.text.toString():null;if(!Ft){He(Ct);continue}let Nt=ar(Ft,Zt),Xe=ar(Ft,Zt,!0);if(Nt in ke&&Xe in de&&ke[Nt]!==de[Xe]){let Qt=Pt(Nt,Xe,Zt),Wt=ot(Nt,Xe,we[Qt].geometry);delete de[Nt],delete ke[Xe],ke[ar(Ft,we[Wt].geometry,!0)]=Wt,we[Qt].geometry=null}else Nt in ke?ot(Nt,Xe,Zt):Xe in de?Pt(Nt,Xe,Zt):(He(Ct),de[Nt]=Ne-1,ke[Xe]=Ne-1)}return we.filter(Ct=>Ct.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((fe,de)=>fe.sortKey-de.sortKey)}update(l,f,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,f,this.layers,m),this.icon.programConfigurations.updatePaintArrays(l,f,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,f){let m=this.lineVertexArray.length;if(l.segment!==void 0){let _=l.dist(f[l.segment+1]),E=l.dist(f[l.segment]),T={};for(let C=l.segment+1;C<f.length;C++)T[C]={x:f[C].x,y:f[C].y,tileUnitDistanceFromAnchor:_},C<f.length-1&&(_+=f[C+1].dist(f[C]));for(let C=l.segment||0;C>=0;C--)T[C]={x:f[C].x,y:f[C].y,tileUnitDistanceFromAnchor:E},C>0&&(E+=f[C-1].dist(f[C]));for(let C=0;C<f.length;C++){let P=T[C];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,f,m,_,E,T,C,P,F,z,U,Z){let Y=l.indexArray,Q=l.layoutVertexArray,re=l.segments.prepareSegment(4*f.length,Q,Y,this.canOverlap?T.sortKey:void 0),fe=this.glyphOffsetArray.length,de=re.vertexLength,ke=this.allowVerticalPlacement&&C===i.ah.vertical?Math.PI/2:0,we=T.text&&T.text.sections;for(let Ne=0;Ne<f.length;Ne++){let{tl:He,tr:ot,bl:Pt,br:ar,tex:Ct,pixelOffsetTL:_t,pixelOffsetBR:Zt,minFontScaleX:Ft,minFontScaleY:Nt,glyphOffset:Xe,isSDF:Qt,sectionIndex:Wt}=f[Ne],dr=re.vertexLength,Rn=Xe[1];zI(Q,P.x,P.y,He.x,Rn+He.y,Ct.x,Ct.y,m,Qt,_t.x,_t.y,Ft,Nt),zI(Q,P.x,P.y,ot.x,Rn+ot.y,Ct.x+Ct.w,Ct.y,m,Qt,Zt.x,_t.y,Ft,Nt),zI(Q,P.x,P.y,Pt.x,Rn+Pt.y,Ct.x,Ct.y+Ct.h,m,Qt,_t.x,Zt.y,Ft,Nt),zI(Q,P.x,P.y,ar.x,Rn+ar.y,Ct.x+Ct.w,Ct.y+Ct.h,m,Qt,Zt.x,Zt.y,Ft,Nt),$q(l.dynamicLayoutVertexArray,P,ke),Y.emplaceBack(dr,dr+1,dr+2),Y.emplaceBack(dr+1,dr+2,dr+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xe[0]),Ne!==f.length-1&&Wt===f[Ne+1].sectionIndex||l.programConfigurations.populatePaintArrays(Q.length,T,T.index,{},Z,we&&we[Wt])}l.placedSymbolArray.emplaceBack(P.x,P.y,fe,this.glyphOffsetArray.length-fe,de,F,z,P.segment,m?m[0]:0,m?m[1]:0,_[0],_[1],C,0,!1,0,U)}_addCollisionDebugVertex(l,f,m,_,E,T){return f.emplaceBack(0,0),l.emplaceBack(m.x,m.y,_,E,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(l,f,m,_,E,T,C){let P=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),F=P.vertexLength,z=E.layoutVertexArray,U=E.collisionVertexArray,Z=C.anchorX,Y=C.anchorY;this._addCollisionDebugVertex(z,U,T,Z,Y,new d(l,f)),this._addCollisionDebugVertex(z,U,T,Z,Y,new d(m,f)),this._addCollisionDebugVertex(z,U,T,Z,Y,new d(m,_)),this._addCollisionDebugVertex(z,U,T,Z,Y,new d(l,_)),P.vertexLength+=4;let Q=E.indexArray;Q.emplaceBack(F,F+1),Q.emplaceBack(F+1,F+2),Q.emplaceBack(F+2,F+3),Q.emplaceBack(F+3,F),P.primitiveLength+=4}addDebugCollisionBoxes(l,f,m,_){for(let E=l;E<f;E++){let T=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,_?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wq(ds,F9.members,lo),this.iconCollisionBox=new Wq(ds,F9.members,lo);for(let l=0;l<this.symbolInstances.length;l++){let f=this.symbolInstances.get(l);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(l,f,m,_,E,T,C,P,F){let z={};for(let U=f;U<m;U++){let Z=l.get(U);z.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},z.textFeatureIndex=Z.featureIndex;break}for(let U=_;U<E;U++){let Z=l.get(U);z.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},z.verticalTextFeatureIndex=Z.featureIndex;break}for(let U=T;U<C;U++){let Z=l.get(U);z.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},z.iconFeatureIndex=Z.featureIndex;break}for(let U=P;U<F;U++){let Z=l.get(U);z.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},z.verticalIconFeatureIndex=Z.featureIndex;break}return z}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){let m=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,f){let m=l.placedSymbolArray.get(f),_=m.vertexStartIndex+4*m.numGlyphs;for(let E=m.vertexStartIndex;E<_;E+=4)l.indexArray.emplaceBack(E,E+1,E+2),l.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let f=Math.sin(l),m=Math.cos(l),_=[],E=[],T=[];for(let C=0;C<this.symbolInstances.length;++C){T.push(C);let P=this.symbolInstances.get(C);_.push(0|Math.round(f*P.anchorX+m*P.anchorY)),E.push(P.featureIndex)}return T.sort((C,P)=>_[C]-_[P]||E[P]-E[C]),T}addToSortKeyRanges(l,f){let m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===f?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let f of this.symbolInstanceIndexes){let m=this.symbolInstances.get(f);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((_,E,T)=>{_>=0&&T.indexOf(_)===E&&this.addIndicesForPlacedSymbol(this.text,_)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let rX,nX;qt("SymbolBucket",Dg,{omit:["layers","collisionBoxArray","features","compareText"]}),Dg.MAX_GLYPHS=65535,Dg.addDynamicAttributes=$q;var Zq={get paint(){return nX=nX||new b({"icon-opacity":new ur(be.paint_symbol["icon-opacity"]),"icon-color":new ur(be.paint_symbol["icon-color"]),"icon-halo-color":new ur(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new ur(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ur(be.paint_symbol["icon-halo-blur"]),"icon-translate":new $t(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new $t(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new ur(be.paint_symbol["text-opacity"]),"text-color":new ur(be.paint_symbol["text-color"],{runtimeType:Mi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new ur(be.paint_symbol["text-halo-color"]),"text-halo-width":new ur(be.paint_symbol["text-halo-width"]),"text-halo-blur":new ur(be.paint_symbol["text-halo-blur"]),"text-translate":new $t(be.paint_symbol["text-translate"]),"text-translate-anchor":new $t(be.paint_symbol["text-translate-anchor"])})},get layout(){return rX=rX||new b({"symbol-placement":new $t(be.layout_symbol["symbol-placement"]),"symbol-spacing":new $t(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $t(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ur(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $t(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $t(be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new $t(be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new $t(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new $t(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $t(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new ur(be.layout_symbol["icon-size"]),"icon-text-fit":new $t(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $t(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new ur(be.layout_symbol["icon-image"]),"icon-rotate":new ur(be.layout_symbol["icon-rotate"]),"icon-padding":new ur(be.layout_symbol["icon-padding"]),"icon-keep-upright":new $t(be.layout_symbol["icon-keep-upright"]),"icon-offset":new ur(be.layout_symbol["icon-offset"]),"icon-anchor":new ur(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $t(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $t(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $t(be.layout_symbol["text-rotation-alignment"]),"text-field":new ur(be.layout_symbol["text-field"]),"text-font":new ur(be.layout_symbol["text-font"]),"text-size":new ur(be.layout_symbol["text-size"]),"text-max-width":new ur(be.layout_symbol["text-max-width"]),"text-line-height":new $t(be.layout_symbol["text-line-height"]),"text-letter-spacing":new ur(be.layout_symbol["text-letter-spacing"]),"text-justify":new ur(be.layout_symbol["text-justify"]),"text-radial-offset":new ur(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $t(be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ur(be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ur(be.layout_symbol["text-anchor"]),"text-max-angle":new $t(be.layout_symbol["text-max-angle"]),"text-writing-mode":new $t(be.layout_symbol["text-writing-mode"]),"text-rotate":new ur(be.layout_symbol["text-rotate"]),"text-padding":new $t(be.layout_symbol["text-padding"]),"text-keep-upright":new $t(be.layout_symbol["text-keep-upright"]),"text-transform":new ur(be.layout_symbol["text-transform"]),"text-offset":new ur(be.layout_symbol["text-offset"]),"text-allow-overlap":new $t(be.layout_symbol["text-allow-overlap"]),"text-overlap":new $t(be.layout_symbol["text-overlap"]),"text-ignore-placement":new $t(be.layout_symbol["text-ignore-placement"]),"text-optional":new $t(be.layout_symbol["text-optional"])})}};class iX{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Ci,this.defaultValue=l}evaluate(l){if(l.formattedSection){let f=this.defaultValue.property.overrides;if(f&&f.hasOverride(l.formattedSection))return f.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qt("FormatSectionOverride",iX,{omit:["defaultValue"]});class BI extends p{constructor(l){super(l,Zq)}recalculate(l,f){if(super.recalculate(l,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let m=this.layout.get("text-writing-mode");if(m){let _=[];for(let E of m)_.indexOf(E)<0&&_.push(E);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,f,m,_){let E=this.layout.get(l).evaluate(f,{},m,_),T=this._unevaluatedLayout._values[l];return T.isDataDriven()||sg(T.value)||!E?E:function(C,P){return P.replace(/{([^{}]+)}/g,(F,z)=>C&&z in C?String(C[z]):"")}(f.properties,E)}createBucket(l){return new Dg(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let l of Zq.paint.overridableProperties){if(!BI.hasPaintOverride(this.layout,l))continue;let f=this.paint.get(l),m=new iX(f),_=new ag(m,f.property.specification),E=null;E=f.value.kind==="constant"||f.value.kind==="source"?new jh("source",_):new zh("composite",_,f.value.zoomStops),this.paint._values[l]=new Il(f.property,E,f.parameters)}}_handleOverridablePaintPropertyUpdate(l,f,m){return!(!this.layout||f.isDataDriven()||m.isDataDriven())&&BI.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,f){let m=l.get("text-field"),_=Zq.paint.properties[f],E=!1,T=C=>{for(let P of C)if(_.overrides&&_.overrides.hasOverride(P))return void(E=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ka)T(m.value.value.sections);else if(m.value.kind==="source"){let C=F=>{E||(F instanceof Ws&&Ni(F.value)===it?T(F.value.sections):F instanceof Xv?T(F.sections):F.eachChild(C))},P=m.value;P._styleExpression&&C(P._styleExpression.expression)}return E}}let oX;var R5e={get paint(){return oX=oX||new b({"background-color":new $t(be.paint_background["background-color"]),"background-pattern":new xg(be.paint_background["background-pattern"]),"background-opacity":new $t(be.paint_background["background-opacity"])})}};class P5e extends p{constructor(l){super(l,R5e)}}let aX;var O5e={get paint(){return aX=aX||new b({"raster-opacity":new $t(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new $t(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $t(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $t(be.paint_raster["raster-brightness-max"]),"raster-saturation":new $t(be.paint_raster["raster-saturation"]),"raster-contrast":new $t(be.paint_raster["raster-contrast"]),"raster-resampling":new $t(be.paint_raster["raster-resampling"]),"raster-fade-duration":new $t(be.paint_raster["raster-fade-duration"])})}};class L5e extends p{constructor(l){super(l,O5e)}}class D5e extends p{constructor(l){super(l,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class N5e{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let Yq=6371008.8;class ip{constructor(l,f){if(isNaN(l)||isNaN(f))throw new Error(`Invalid LngLat object: (${l}, ${f})`);if(this.lng=+l,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ip($(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){let f=Math.PI/180,m=this.lat*f,_=l.lat*f,E=Math.sin(m)*Math.sin(_)+Math.cos(m)*Math.cos(_)*Math.cos((l.lng-this.lng)*f);return Yq*Math.acos(Math.min(E,1))}static convert(l){if(l instanceof ip)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new ip(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new ip(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let sX=2*Math.PI*Yq;function lX(c){return sX*Math.cos(c*Math.PI/180)}function uX(c){return(180+c)/360}function cX(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function fX(c,l){return c/lX(l)}function Kq(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class hw{constructor(l,f,m=0){this.x=+l,this.y=+f,this.z=+m}static fromLngLat(l,f=0){let m=ip.convert(l);return new hw(uX(m.lng),cX(m.lat),fX(f,m.lat))}toLngLat(){return new ip(360*this.x-180,Kq(this.y))}toAltitude(){return this.z*lX(Kq(this.y))}meterInMercatorCoordinateUnits(){return 1/sX*(l=Kq(this.y),1/Math.cos(l*Math.PI/180));var l}}function hX(c,l,f){var m=2*Math.PI*6378137/256/Math.pow(2,f);return[c*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class Xq{constructor(l,f,m){if(!function(_,E,T){return!(_<0||_>25||T<0||T>=Math.pow(2,_)||E<0||E>=Math.pow(2,_))}(l,f,m))throw new Error(`x=${f}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=f,this.y=m,this.key=pw(0,l,l,f,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,f,m){let _=(T=this.y,C=this.z,P=hX(256*(E=this.x),256*(T=Math.pow(2,C)-T-1),C),F=hX(256*(E+1),256*(T+1),C),P[0]+","+P[1]+","+F[0]+","+F[1]);var E,T,C,P,F;let z=function(U,Z,Y){let Q,re="";for(let fe=U;fe>0;fe--)Q=1<<fe-1,re+=(Z&Q?1:0)+(Y&Q?2:0);return re}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,_)}isChildOf(l){let f=this.z-l.z;return f>0&&l.x===this.x>>f&&l.y===this.y>>f}getTilePoint(l){let f=Math.pow(2,this.z);return new d((l.x*f-this.x)*qi,(l.y*f-this.y)*qi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pX{constructor(l,f){this.wrap=l,this.canonical=f,this.key=pw(l,f.z,f.z,f.x,f.y)}}class tl{constructor(l,f,m,_,E){if(l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=f,this.canonical=new Xq(m,+_,+E),this.key=pw(f,l,m,_,E)}clone(){return new tl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let f=this.canonical.z-l;return l>this.canonical.z?new tl(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new tl(l,this.wrap,l,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(l,f){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let m=this.canonical.z-l;return l>this.canonical.z?pw(this.wrap*+f,l,this.canonical.z,this.canonical.x,this.canonical.y):pw(this.wrap*+f,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap)return!1;let f=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>f&&l.canonical.y===this.canonical.y>>f}children(l){if(this.overscaledZ>=l)return[new tl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let f=this.canonical.z+1,m=2*this.canonical.x,_=2*this.canonical.y;return[new tl(f,this.wrap,f,m,_),new tl(f,this.wrap,f,m+1,_),new tl(f,this.wrap,f,m,_+1),new tl(f,this.wrap,f,m+1,_+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new tl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new tl(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pX(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new hw(l.x-this.wrap,l.y))}}function pw(c,l,f,m,_){(c*=2)<0&&(c=-1*c-1);let E=1<<f;return(E*E*c+E*_+m).toString(36)+f.toString(36)+l.toString(36)}qt("CanonicalTileID",Xq),qt("OverscaledTileID",tl,{omit:["posMatrix"]});class dX{constructor(l,f,m,_=1,E=1,T=1,C=0){if(this.uid=l,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Re(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;let P=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=E,this.blueFactor=T,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let F=0;F<P;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(P,F)]=this.data[this._idx(P-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,P)]=this.data[this._idx(F,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<P;F++)for(let z=0;z<P;z++){let U=this.get(F,z);U>this.max&&(this.max=U),U<this.min&&(this.min=U)}}get(l,f){let m=new Uint8Array(this.data.buffer),_=4*this._idx(l,f);return this.unpack(m[_],m[_+1],m[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,f){if(l<-1||l>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(l+1)}unpack(l,f,m){return l*this.redFactor+f*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new el({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,f,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let _=f*this.dim,E=f*this.dim+this.dim,T=m*this.dim,C=m*this.dim+this.dim;switch(f){case-1:_=E-1;break;case 1:E=_+1;}switch(m){case-1:T=C-1;break;case 1:C=T+1;}let P=-f*this.dim,F=-m*this.dim;for(let z=T;z<C;z++)for(let U=_;U<E;U++)this.data[this._idx(U,z)]=l.data[this._idx(U+P,z+F)]}}qt("DEMData",dX);class mX{constructor(l){this._stringToNumber={},this._numberToString=[];for(let f=0;f<l.length;f++){let m=l[f];this._stringToNumber[m]=f,this._numberToString[f]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class vX{constructor(l,f,m,_,E){this.type="Feature",this._vectorTileFeature=l,l._z=f,l._x=m,l._y=_,this.properties=l.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){let l={geometry:this.geometry};for(let f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(l[f]=this[f]);return l}}class gX{constructor(l,f){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Gh(qi,16,0),this.grid3D=new Gh(qi,16,0),this.featureIndexArray=new Bo,this.promoteId=f}insert(l,f,m,_,E,T){let C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,_,E);let P=T?this.grid3D:this.grid;for(let F=0;F<f.length;F++){let z=f[F],U=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<z.length;Z++){let Y=z[Z];U[0]=Math.min(U[0],Y.x),U[1]=Math.min(U[1],Y.y),U[2]=Math.max(U[2],Y.x),U[3]=Math.max(U[3],Y.y)}U[0]<qi&&U[1]<qi&&U[2]>=0&&U[3]>=0&&P.insert(C,U[0],U[1],U[2],U[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new tp.VectorTile(new jq(this.rawTileData)).layers,this.sourceLayerCoder=new mX(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,f,m,_){this.loadVTLayers();let E=l.params||{},T=qi/l.tileSize/l.scale,C=Ox(E.filter),P=l.queryGeometry,F=l.queryPadding*T,z=_X(P),U=this.grid.query(z.minX-F,z.minY-F,z.maxX+F,z.maxY+F),Z=_X(l.cameraQueryGeometry),Y=this.grid3D.query(Z.minX-F,Z.minY-F,Z.maxX+F,Z.maxY+F,(fe,de,ke,we)=>function(Ne,He,ot,Pt,ar){for(let _t of Ne)if(He<=_t.x&&ot<=_t.y&&Pt>=_t.x&&ar>=_t.y)return!0;let Ct=[new d(He,ot),new d(He,ar),new d(Pt,ar),new d(Pt,ot)];if(Ne.length>2){for(let _t of Ct)if(Ag(Ne,_t))return!0}for(let _t=0;_t<Ne.length-1;_t++)if(mVe(Ne[_t],Ne[_t+1],Ct))return!0;return!1}(l.cameraQueryGeometry,fe-F,de-F,ke+F,we+F));for(let fe of Y)U.push(fe);U.sort(q5e);let Q={},re;for(let fe=0;fe<U.length;fe++){let de=U[fe];if(de===re)continue;re=de;let ke=this.featureIndexArray.get(de),we=null;this.loadMatchingFeature(Q,ke.bucketIndex,ke.sourceLayerIndex,ke.featureIndex,C,E.layers,E.availableImages,f,m,_,(Ne,He,ot)=>(we||(we=fm(Ne)),He.queryIntersectsFeature(P,Ne,ot,we,this.z,l.transform,T,l.pixelPosMatrix)))}return Q}loadMatchingFeature(l,f,m,_,E,T,C,P,F,z,U){let Z=this.bucketLayerIDs[f];if(T&&!function(fe,de){for(let ke=0;ke<fe.length;ke++)if(de.indexOf(fe[ke])>=0)return!0;return!1}(T,Z))return;let Y=this.sourceLayerCoder.decode(m),Q=this.vtLayers[Y].feature(_);if(E.needGeometry){let fe=hm(Q,!0);if(!E.filter(new Gn(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!E.filter(new Gn(this.tileID.overscaledZ),Q))return;let re=this.getId(Q,Y);for(let fe=0;fe<Z.length;fe++){let de=Z[fe];if(T&&T.indexOf(de)<0)continue;let ke=P[de];if(!ke)continue;let we={};re&&z&&(we=z.getState(ke.sourceLayer||"_geojsonTileLayer",re));let Ne=ee({},F[de]);Ne.paint=yX(Ne.paint,ke.paint,Q,we,C),Ne.layout=yX(Ne.layout,ke.layout,Q,we,C);let He=!U||U(Q,ke,we);if(!He)continue;let ot=new vX(Q,this.z,this.x,this.y,re);ot.layer=Ne;let Pt=l[de];Pt===void 0&&(Pt=l[de]=[]),Pt.push({featureIndex:_,feature:ot,intersectionZ:He})}}lookupSymbolFeatures(l,f,m,_,E,T,C,P){let F={};this.loadVTLayers();let z=Ox(E);for(let U of l)this.loadMatchingFeature(F,m,_,U,z,T,C,P,f);return F}hasLayer(l){for(let f of this.bucketLayerIDs)for(let m of f)if(l===m)return!0;return!1}getId(l,f){let m=l.id;return this.promoteId&&(m=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof m=="boolean"&&(m=Number(m))),m}}function yX(c,l,f,m,_){return ie(c,(E,T)=>{let C=l instanceof sm?l.get(T):null;return C&&C.evaluate?C.evaluate(f,m,_):C})}function _X(c){let l=1/0,f=1/0,m=-1/0,_=-1/0;for(let E of c)l=Math.min(l,E.x),f=Math.min(f,E.y),m=Math.max(m,E.x),_=Math.max(_,E.y);return{minX:l,minY:f,maxX:m,maxY:_}}function q5e(c,l){return l-c}function xX(c,l,f,m,_){let E=[];for(let T=0;T<c.length;T++){let C=c[T],P;for(let F=0;F<C.length-1;F++){let z=C[F],U=C[F+1];z.x<l&&U.x<l||(z.x<l?z=new d(l,z.y+(l-z.x)/(U.x-z.x)*(U.y-z.y))._round():U.x<l&&(U=new d(l,z.y+(l-z.x)/(U.x-z.x)*(U.y-z.y))._round()),z.y<f&&U.y<f||(z.y<f?z=new d(z.x+(f-z.y)/(U.y-z.y)*(U.x-z.x),f)._round():U.y<f&&(U=new d(z.x+(f-z.y)/(U.y-z.y)*(U.x-z.x),f)._round()),z.x>=m&&U.x>=m||(z.x>=m?z=new d(m,z.y+(m-z.x)/(U.x-z.x)*(U.y-z.y))._round():U.x>=m&&(U=new d(m,z.y+(m-z.x)/(U.x-z.x)*(U.y-z.y))._round()),z.y>=_&&U.y>=_||(z.y>=_?z=new d(z.x+(_-z.y)/(U.y-z.y)*(U.x-z.x),_)._round():U.y>=_&&(U=new d(z.x+(_-z.y)/(U.y-z.y)*(U.x-z.x),_)._round()),P&&z.equals(P[P.length-1])||(P=[z],E.push(P)),P.push(U)))))}}return E}qt("FeatureIndex",gX,{omit:["rawTileData","sourceLayerCoder"]});class op extends d{constructor(l,f,m,_){super(l,f),this.angle=m,_!==void 0&&(this.segment=_)}clone(){return new op(this.x,this.y,this.angle,this.segment)}}function wX(c,l,f,m,_){if(l.segment===void 0||f===0)return!0;let E=l,T=l.segment+1,C=0;for(;C>-f/2;){if(T--,T<0)return!1;C-=c[T].dist(E),E=c[T]}C+=c[T].dist(c[T+1]),T++;let P=[],F=0;for(;C<f/2;){let z=c[T],U=c[T+1];if(!U)return!1;let Z=c[T-1].angleTo(z)-z.angleTo(U);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:C,angleDelta:Z}),F+=Z;C-P[0].distance>m;)F-=P.shift().angleDelta;if(F>_)return!1;T++,C+=z.dist(U)}return!0}function bX(c){let l=0;for(let f=0;f<c.length-1;f++)l+=c[f].dist(c[f+1]);return l}function SX(c,l,f){return c?.6*l*f:0}function EX(c,l){return Math.max(c?c.right-c.left:0,l?l.right-l.left:0)}function k5e(c,l,f,m,_,E){let T=SX(f,_,E),C=EX(f,m)*E,P=0,F=bX(c)/2;for(let z=0;z<c.length-1;z++){let U=c[z],Z=c[z+1],Y=U.dist(Z);if(P+Y>F){let Q=(F-P)/Y,re=aa.number(U.x,Z.x,Q),fe=aa.number(U.y,Z.y,Q),de=new op(re,fe,Z.angleTo(U),z);return de._round(),!T||wX(c,de,C,T,l)?de:void 0}P+=Y}}function F5e(c,l,f,m,_,E,T,C,P){let F=SX(m,E,T),z=EX(m,_),U=z*T,Z=c[0].x===0||c[0].x===P||c[0].y===0||c[0].y===P;return l-U<l/4&&(l=U+l/4),TX(c,Z?l/2*C%l:(z/2+2*E)*T*C%l,l,F,f,U,Z,!1,P)}function TX(c,l,f,m,_,E,T,C,P){let F=E/2,z=bX(c),U=0,Z=l-f,Y=[];for(let Q=0;Q<c.length-1;Q++){let re=c[Q],fe=c[Q+1],de=re.dist(fe),ke=fe.angleTo(re);for(;Z+f<U+de;){Z+=f;let we=(Z-U)/de,Ne=aa.number(re.x,fe.x,we),He=aa.number(re.y,fe.y,we);if(Ne>=0&&Ne<P&&He>=0&&He<P&&Z-F>=0&&Z+F<=z){let ot=new op(Ne,He,ke,Q);ot._round(),m&&!wX(c,ot,E,m,_)||Y.push(ot)}}U+=de}return C||Y.length||T||(Y=TX(c,U/2,f,m,_,E,T,!0,P)),Y}qt("Anchor",op);let Ng=Va;function IX(c,l,f,m){let _=[],E=c.image,T=E.pixelRatio,C=E.paddedRect.w-2*Ng,P=E.paddedRect.h-2*Ng,F={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom},z=E.stretchX||[[0,C]],U=E.stretchY||[[0,P]],Z=(Xe,Qt)=>Xe+Qt[1]-Qt[0],Y=z.reduce(Z,0),Q=U.reduce(Z,0),re=C-Y,fe=P-Q,de=0,ke=Y,we=0,Ne=Q,He=0,ot=re,Pt=0,ar=fe;if(E.content&&m){let Xe=E.content,Qt=Xe[2]-Xe[0],Wt=Xe[3]-Xe[1];(E.textFitWidth||E.textFitHeight)&&(F=Q9(c)),de=UI(z,0,Xe[0]),we=UI(U,0,Xe[1]),ke=UI(z,Xe[0],Xe[2]),Ne=UI(U,Xe[1],Xe[3]),He=Xe[0]-de,Pt=Xe[1]-we,ot=Qt-ke,ar=Wt-Ne}let Ct=F.x1,_t=F.y1,Zt=F.x2-Ct,Ft=F.y2-_t,Nt=(Xe,Qt,Wt,dr)=>{let Rn=VI(Xe.stretch-de,ke,Zt,Ct),Sn=GI(Xe.fixed-He,ot,Xe.stretch,Y),Yi=VI(Qt.stretch-we,Ne,Ft,_t),Cl=GI(Qt.fixed-Pt,ar,Qt.stretch,Q),Ao=VI(Wt.stretch-de,ke,Zt,Ct),Ki=GI(Wt.fixed-He,ot,Wt.stretch,Y),ca=VI(dr.stretch-we,Ne,Ft,_t),fa=GI(dr.fixed-Pt,ar,dr.stretch,Q),ha=new d(Rn,Yi),gi=new d(Ao,Yi),Xi=new d(Ao,ca),Vo=new d(Rn,ca),Co=new d(Sn/T,Cl/T),pa=new d(Ki/T,fa/T),Mo=l*Math.PI/180;if(Mo){let rn=Math.sin(Mo),kn=Math.cos(Mo),Zn=[kn,-rn,rn,kn];ha._matMult(Zn),gi._matMult(Zn),Vo._matMult(Zn),Xi._matMult(Zn)}let rl=Xe.stretch+Xe.fixed,Ga=Qt.stretch+Qt.fixed;return{tl:ha,tr:gi,bl:Vo,br:Xi,tex:{x:E.paddedRect.x+Ng+rl,y:E.paddedRect.y+Ng+Ga,w:Wt.stretch+Wt.fixed-rl,h:dr.stretch+dr.fixed-Ga},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Co,pixelOffsetBR:pa,minFontScaleX:ot/T/Zt,minFontScaleY:ar/T/Ft,isSDF:f}};if(m&&(E.stretchX||E.stretchY)){let Xe=AX(z,re,Y),Qt=AX(U,fe,Q);for(let Wt=0;Wt<Xe.length-1;Wt++){let dr=Xe[Wt],Rn=Xe[Wt+1];for(let Sn=0;Sn<Qt.length-1;Sn++)_.push(Nt(dr,Qt[Sn],Rn,Qt[Sn+1]))}}else _.push(Nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:P+1}));return _}function UI(c,l,f){let m=0;for(let _ of c)m+=Math.max(l,Math.min(f,_[1]))-Math.max(l,Math.min(f,_[0]));return m}function AX(c,l,f){let m=[{fixed:-Ng,stretch:0}];for(let[_,E]of c){let T=m[m.length-1];m.push({fixed:_-T.stretch,stretch:T.stretch}),m.push({fixed:_-T.stretch,stretch:T.stretch+(E-_)})}return m.push({fixed:l+Ng,stretch:f}),m}function VI(c,l,f,m){return c/l*f+m}function GI(c,l,f,m){return c-l*f/m}class $I{constructor(l,f,m,_,E,T,C,P,F,z){var U;if(this.boxStartIndex=l.length,F){let Z=T.top,Y=T.bottom,Q=T.collisionPadding;Q&&(Z-=Q[1],Y+=Q[3]);let re=Y-Z;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let Z=!((U=T.image)===null||U===void 0)&&U.content&&(T.image.textFitWidth||T.image.textFitHeight)?Q9(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};Z.y1=Z.y1*C-P[0],Z.y2=Z.y2*C+P[2],Z.x1=Z.x1*C-P[3],Z.x2=Z.x2*C+P[1];let Y=T.collisionPadding;if(Y&&(Z.x1-=Y[0]*C,Z.y1-=Y[1]*C,Z.x2+=Y[2]*C,Z.y2+=Y[3]*C),z){let Q=new d(Z.x1,Z.y1),re=new d(Z.x2,Z.y1),fe=new d(Z.x1,Z.y2),de=new d(Z.x2,Z.y2),ke=z*Math.PI/180;Q._rotate(ke),re._rotate(ke),fe._rotate(ke),de._rotate(ke),Z.x1=Math.min(Q.x,re.x,fe.x,de.x),Z.x2=Math.max(Q.x,re.x,fe.x,de.x),Z.y1=Math.min(Q.y,re.y,fe.y,de.y),Z.y2=Math.max(Q.y,re.y,fe.y,de.y)}l.emplaceBack(f.x,f.y,Z.x1,Z.y1,Z.x2,Z.y2,m,_,E)}this.boxEndIndex=l.length}}class j5e{constructor(l=[],f=(m,_)=>m<_?-1:m>_?1:0){if(this.data=l,this.length=this.data.length,this.compare=f,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:f,compare:m}=this,_=f[l];for(;l>0;){let E=l-1>>1,T=f[E];if(m(_,T)>=0)break;f[l]=T,l=E}f[l]=_}_down(l){let{data:f,compare:m}=this,_=this.length>>1,E=f[l];for(;l<_;){let T=1+(l<<1),C=T+1;if(C<this.length&&m(f[C],f[T])<0&&(T=C),m(f[T],E)>=0)break;f[l]=f[T],l=T}f[l]=E}}function z5e(c,l=1,f=!1){let m=1/0,_=1/0,E=-1/0,T=-1/0,C=c[0];for(let Y=0;Y<C.length;Y++){let Q=C[Y];(!Y||Q.x<m)&&(m=Q.x),(!Y||Q.y<_)&&(_=Q.y),(!Y||Q.x>E)&&(E=Q.x),(!Y||Q.y>T)&&(T=Q.y)}let P=Math.min(E-m,T-_),F=P/2,z=new j5e([],B5e);if(P===0)return new d(m,_);for(let Y=m;Y<E;Y+=P)for(let Q=_;Q<T;Q+=P)z.push(new qg(Y+F,Q+F,F,c));let U=function(Y){let Q=0,re=0,fe=0,de=Y[0];for(let ke=0,we=de.length,Ne=we-1;ke<we;Ne=ke++){let He=de[ke],ot=de[Ne],Pt=He.x*ot.y-ot.x*He.y;re+=(He.x+ot.x)*Pt,fe+=(He.y+ot.y)*Pt,Q+=3*Pt}return new qg(re/Q,fe/Q,0,Y)}(c),Z=z.length;for(;z.length;){let Y=z.pop();(Y.d>U.d||!U.d)&&(U=Y,f&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,Z)),Y.max-U.d<=l||(F=Y.h/2,z.push(new qg(Y.p.x-F,Y.p.y-F,F,c)),z.push(new qg(Y.p.x+F,Y.p.y-F,F,c)),z.push(new qg(Y.p.x-F,Y.p.y+F,F,c)),z.push(new qg(Y.p.x+F,Y.p.y+F,F,c)),Z+=4)}return f&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${U.d}`)),U.p}function B5e(c,l){return l.max-c.max}function qg(c,l,f,m){this.p=new d(c,l),this.h=f,this.d=function(_,E){let T=!1,C=1/0;for(let P=0;P<E.length;P++){let F=E[P];for(let z=0,U=F.length,Z=U-1;z<U;Z=z++){let Y=F[z],Q=F[Z];Y.y>_.y!=Q.y>_.y&&_.x<(Q.x-Y.x)*(_.y-Y.y)/(Q.y-Y.y)+Y.x&&(T=!T),C=Math.min(C,c9(_,Y,Q))}}return(T?1:-1)*Math.sqrt(C)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Io;i.aq=void 0,(Io=i.aq||(i.aq={}))[Io.center=1]="center",Io[Io.left=2]="left",Io[Io.right=3]="right",Io[Io.top=4]="top",Io[Io.bottom=5]="bottom",Io[Io["top-left"]=6]="top-left",Io[Io["top-right"]=7]="top-right",Io[Io["bottom-left"]=8]="bottom-left",Io[Io["bottom-right"]=9]="bottom-right";let ap=7,Jq=Number.POSITIVE_INFINITY;function CX(c,l){return l[1]!==Jq?function(f,m,_){let E=0,T=0;switch(m=Math.abs(m),_=Math.abs(_),f){case"top-right":case"top-left":case"top":T=_-ap;break;case"bottom-right":case"bottom-left":case"bottom":T=-_+ap;}switch(f){case"top-right":case"bottom-right":case"right":E=-m;break;case"top-left":case"bottom-left":case"left":E=m;}return[E,T]}(c,l[0],l[1]):function(f,m){let _=0,E=0;m<0&&(m=0);let T=m/Math.SQRT2;switch(f){case"top-right":case"top-left":E=T-ap;break;case"bottom-right":case"bottom-left":E=-T+ap;break;case"bottom":E=-m+ap;break;case"top":E=m-ap;}switch(f){case"top-right":case"bottom-right":_=-T;break;case"top-left":case"bottom-left":_=T;break;case"left":_=m;break;case"right":_=-m;}return[_,E]}(c,l[0])}function MX(c,l,f){var m;let _=c.layout,E=(m=_.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},f);if(E){let C=E.values,P=[];for(let F=0;F<C.length;F+=2){let z=P[F]=C[F],U=C[F+1].map(Z=>Z*Ui);z.startsWith("top")?U[1]-=ap:z.startsWith("bottom")&&(U[1]+=ap),P[F+1]=U}return new ls(P)}let T=_.get("text-variable-anchor");if(T){let C;C=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(l,{},f)*Ui,Jq]:_.get("text-offset").evaluate(l,{},f).map(F=>F*Ui);let P=[];for(let F of T)P.push(F,CX(F,C));return new ls(P)}return null}function Qq(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function U5e(c,l,f,m,_,E,T,C,P,F,z){let U=E.textMaxSize.evaluate(l,{});U===void 0&&(U=T);let Z=c.layers[0].layout,Y=Z.get("icon-offset").evaluate(l,{},z),Q=PX(f.horizontal),re=T/24,fe=c.tilePixelRatio*re,de=c.tilePixelRatio*U/24,ke=c.tilePixelRatio*C,we=c.tilePixelRatio*Z.get("symbol-spacing"),Ne=Z.get("text-padding")*c.tilePixelRatio,He=function(Xe,Qt,Wt,dr=1){let Rn=Xe.get("icon-padding").evaluate(Qt,{},Wt),Sn=Rn&&Rn.values;return[Sn[0]*dr,Sn[1]*dr,Sn[2]*dr,Sn[3]*dr]}(Z,l,z,c.tilePixelRatio),ot=Z.get("text-max-angle")/180*Math.PI,Pt=Z.get("text-rotation-alignment")!=="viewport"&&Z.get("symbol-placement")!=="point",ar=Z.get("icon-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",Ct=Z.get("symbol-placement"),_t=we/2,Zt=Z.get("icon-text-fit"),Ft;m&&Zt!=="none"&&(c.allowVerticalPlacement&&f.vertical&&(Ft=eX(m,f.vertical,Zt,Z.get("icon-text-fit-padding"),Y,re)),Q&&(m=eX(m,Q,Zt,Z.get("icon-text-fit-padding"),Y,re)));let Nt=(Xe,Qt)=>{Qt.x<0||Qt.x>=qi||Qt.y<0||Qt.y>=qi||function(Wt,dr,Rn,Sn,Yi,Cl,Ao,Ki,ca,fa,ha,gi,Xi,Vo,Co,pa,Mo,rl,Ga,rn,kn,Zn,ms,li,kg){let fc=Wt.addToLineVertexArray(dr,Rn),hc,Ml,nl,uo,bf=0,vw=0,NX=0,qX=0,sk=-1,lk=-1,Sf={},kX=Sg("");if(Wt.allowVerticalPlacement&&Sn.vertical){let Go=Ki.layout.get("text-rotate").evaluate(kn,{},li)+90;nl=new $I(ca,dr,fa,ha,gi,Sn.vertical,Xi,Vo,Co,Go),Ao&&(uo=new $I(ca,dr,fa,ha,gi,Ao,Mo,rl,Co,Go))}if(Yi){let Go=Ki.layout.get("icon-rotate").evaluate(kn,{}),il=Ki.layout.get("icon-text-fit")!=="none",dm=IX(Yi,Go,ms,il),Au=Ao?IX(Ao,Go,ms,il):void 0;Ml=new $I(ca,dr,fa,ha,gi,Yi,Mo,rl,!1,Go),bf=4*dm.length;let mm=Wt.iconSizeData,pc=null;mm.kind==="source"?(pc=[cc*Ki.layout.get("icon-size").evaluate(kn,{})],pc[0]>np&&Re(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${fw}. Reduce your "icon-size".`)):mm.kind==="composite"&&(pc=[cc*Zn.compositeIconSizes[0].evaluate(kn,{},li),cc*Zn.compositeIconSizes[1].evaluate(kn,{},li)],(pc[0]>np||pc[1]>np)&&Re(`${Wt.layerIds[0]}: Value for "icon-size" is >= ${fw}. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,dm,pc,rn,Ga,kn,i.ah.none,dr,fc.lineStartIndex,fc.lineLength,-1,li),sk=Wt.icon.placedSymbolArray.length-1,Au&&(vw=4*Au.length,Wt.addSymbols(Wt.icon,Au,pc,rn,Ga,kn,i.ah.vertical,dr,fc.lineStartIndex,fc.lineLength,-1,li),lk=Wt.icon.placedSymbolArray.length-1)}let FX=Object.keys(Sn.horizontal);for(let Go of FX){let il=Sn.horizontal[Go];if(!hc){kX=Sg(il.text);let Au=Ki.layout.get("text-rotate").evaluate(kn,{},li);hc=new $I(ca,dr,fa,ha,gi,il,Xi,Vo,Co,Au)}let dm=il.positionedLines.length===1;if(NX+=RX(Wt,dr,il,Cl,Ki,Co,kn,pa,fc,Sn.vertical?i.ah.horizontal:i.ah.horizontalOnly,dm?FX:[Go],Sf,sk,Zn,li),dm)break}Sn.vertical&&(qX+=RX(Wt,dr,Sn.vertical,Cl,Ki,Co,kn,pa,fc,i.ah.vertical,["vertical"],Sf,lk,Zn,li));let $5e=hc?hc.boxStartIndex:Wt.collisionBoxArray.length,H5e=hc?hc.boxEndIndex:Wt.collisionBoxArray.length,W5e=nl?nl.boxStartIndex:Wt.collisionBoxArray.length,Z5e=nl?nl.boxEndIndex:Wt.collisionBoxArray.length,Y5e=Ml?Ml.boxStartIndex:Wt.collisionBoxArray.length,K5e=Ml?Ml.boxEndIndex:Wt.collisionBoxArray.length,X5e=uo?uo.boxStartIndex:Wt.collisionBoxArray.length,J5e=uo?uo.boxEndIndex:Wt.collisionBoxArray.length,Iu=-1,WI=(Go,il)=>Go&&Go.circleDiameter?Math.max(Go.circleDiameter,il):il;Iu=WI(hc,Iu),Iu=WI(nl,Iu),Iu=WI(Ml,Iu),Iu=WI(uo,Iu);let jX=Iu>-1?1:0;jX&&(Iu*=kg/Ui),Wt.glyphOffsetArray.length>=Dg.MAX_GLYPHS&&Re("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),kn.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,kn.sortKey);let Q5e=MX(Ki,kn,li),[eGe,tGe]=function(Go,il){let dm=Go.length,Au=il==null?void 0:il.values;if((Au==null?void 0:Au.length)>0)for(let mm=0;mm<Au.length;mm+=2){let pc=Au[mm+1];Go.emplaceBack(i.aq[Au[mm]],pc[0],pc[1])}return[dm,Go.length]}(Wt.textAnchorOffsets,Q5e);Wt.symbolInstances.emplaceBack(dr.x,dr.y,Sf.right>=0?Sf.right:-1,Sf.center>=0?Sf.center:-1,Sf.left>=0?Sf.left:-1,Sf.vertical||-1,sk,lk,kX,$5e,H5e,W5e,Z5e,Y5e,K5e,X5e,J5e,fa,NX,qX,bf,vw,jX,0,Xi,Iu,eGe,tGe)}(c,Qt,Xe,f,m,_,Ft,c.layers[0],c.collisionBoxArray,l.index,l.sourceLayerIndex,c.index,fe,[Ne,Ne,Ne,Ne],Pt,P,ke,He,ar,Y,l,E,F,z,T)};if(Ct==="line")for(let Xe of xX(l.geometry,0,0,qi,qi)){let Qt=F5e(Xe,we,ot,f.vertical||Q,m,24,de,c.overscaling,qi);for(let Wt of Qt)Q&&V5e(c,Q.text,_t,Wt)||Nt(Xe,Wt)}else if(Ct==="line-center"){for(let Xe of l.geometry)if(Xe.length>1){let Qt=k5e(Xe,ot,f.vertical||Q,m,24,de);Qt&&Nt(Xe,Qt)}}else if(l.type==="Polygon")for(let Xe of Qv(l.geometry,0)){let Qt=z5e(Xe,16);Nt(Xe[0],new op(Qt.x,Qt.y,0))}else if(l.type==="LineString")for(let Xe of l.geometry)Nt(Xe,new op(Xe[0].x,Xe[0].y,0));else if(l.type==="Point")for(let Xe of l.geometry)for(let Qt of Xe)Nt([Qt],new op(Qt.x,Qt.y,0))}function RX(c,l,f,m,_,E,T,C,P,F,z,U,Z,Y,Q){let re=function(ke,we,Ne,He,ot,Pt,ar,Ct){let _t=He.layout.get("text-rotate").evaluate(Pt,{})*Math.PI/180,Zt=[];for(let Ft of we.positionedLines)for(let Nt of Ft.positionedGlyphs){if(!Nt.rect)continue;let Xe=Nt.rect||{},Qt=H9+1,Wt=!0,dr=1,Rn=0,Sn=(ot||Ct)&&Nt.vertical,Yi=Nt.metrics.advance*Nt.scale/2;if(Ct&&we.verticalizable&&(Rn=Ft.lineOffset/2-(Nt.imageName?-(Ui-Nt.metrics.width*Nt.scale)/2:(Nt.scale-1)*Ui)),Nt.imageName){let rn=ar[Nt.imageName];Wt=rn.sdf,dr=rn.pixelRatio,Qt=Va/dr}let Cl=ot?[Nt.x+Yi,Nt.y]:[0,0],Ao=ot?[0,0]:[Nt.x+Yi+Ne[0],Nt.y+Ne[1]-Rn],Ki=[0,0];Sn&&(Ki=Ao,Ao=[0,0]);let ca=Nt.metrics.isDoubleResolution?2:1,fa=(Nt.metrics.left-Qt)*Nt.scale-Yi+Ao[0],ha=(-Nt.metrics.top-Qt)*Nt.scale+Ao[1],gi=fa+Xe.w/ca*Nt.scale/dr,Xi=ha+Xe.h/ca*Nt.scale/dr,Vo=new d(fa,ha),Co=new d(gi,ha),pa=new d(fa,Xi),Mo=new d(gi,Xi);if(Sn){let rn=new d(-Yi,Yi-uw),kn=-Math.PI/2,Zn=Ui/2-Yi,ms=new d(5-uw-Zn,-(Nt.imageName?Zn:0)),li=new d(...Ki);Vo._rotateAround(kn,rn)._add(ms)._add(li),Co._rotateAround(kn,rn)._add(ms)._add(li),pa._rotateAround(kn,rn)._add(ms)._add(li),Mo._rotateAround(kn,rn)._add(ms)._add(li)}if(_t){let rn=Math.sin(_t),kn=Math.cos(_t),Zn=[kn,-rn,rn,kn];Vo._matMult(Zn),Co._matMult(Zn),pa._matMult(Zn),Mo._matMult(Zn)}let rl=new d(0,0),Ga=new d(0,0);Zt.push({tl:Vo,tr:Co,bl:pa,br:Mo,tex:Xe,writingMode:we.writingMode,glyphOffset:Cl,sectionIndex:Nt.sectionIndex,isSDF:Wt,pixelOffsetTL:rl,pixelOffsetBR:Ga,minFontScaleX:0,minFontScaleY:0})}return Zt}(0,f,C,_,E,T,m,c.allowVerticalPlacement),fe=c.textSizeData,de=null;fe.kind==="source"?(de=[cc*_.layout.get("text-size").evaluate(T,{})],de[0]>np&&Re(`${c.layerIds[0]}: Value for "text-size" is >= ${fw}. Reduce your "text-size".`)):fe.kind==="composite"&&(de=[cc*Y.compositeTextSizes[0].evaluate(T,{},Q),cc*Y.compositeTextSizes[1].evaluate(T,{},Q)],(de[0]>np||de[1]>np)&&Re(`${c.layerIds[0]}: Value for "text-size" is >= ${fw}. Reduce your "text-size".`)),c.addSymbols(c.text,re,de,C,E,T,F,l,P.lineStartIndex,P.lineLength,Z,Q);for(let ke of z)U[ke]=c.text.placedSymbolArray.length-1;return 4*re.length}function PX(c){for(let l in c)return c[l];return null}function V5e(c,l,f,m){let _=c.compareText;if(l in _){let E=_[l];for(let T=E.length-1;T>=0;T--)if(m.dist(E[T])<f)return!0}else _[l]=[];return _[l].push(m),!1}let OX=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ek{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[f,m]=new Uint8Array(l,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");let _=m>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);let E=OX[15&m];if(!E)throw new Error("Unrecognized array type.");let[T]=new Uint16Array(l,2,1),[C]=new Uint32Array(l,4,1);return new ek(C,T,E,l)}constructor(l,f=64,m=Float64Array,_){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;let E=OX.indexOf(this.ArrayType),T=2*l*this.ArrayType.BYTES_PER_ELEMENT,C=l*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-C%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${m}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+P,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+T+C+P),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+P,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=l)}add(l,f){let m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=f,m}finish(){let l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return tk(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,f,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:E,coords:T,nodeSize:C}=this,P=[0,E.length-1,0],F=[];for(;P.length;){let z=P.pop()||0,U=P.pop()||0,Z=P.pop()||0;if(U-Z<=C){for(let fe=Z;fe<=U;fe++){let de=T[2*fe],ke=T[2*fe+1];de>=l&&de<=m&&ke>=f&&ke<=_&&F.push(E[fe])}continue}let Y=Z+U>>1,Q=T[2*Y],re=T[2*Y+1];Q>=l&&Q<=m&&re>=f&&re<=_&&F.push(E[Y]),(z===0?l<=Q:f<=re)&&(P.push(Z),P.push(Y-1),P.push(1-z)),(z===0?m>=Q:_>=re)&&(P.push(Y+1),P.push(U),P.push(1-z))}return F}within(l,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:_,coords:E,nodeSize:T}=this,C=[0,_.length-1,0],P=[],F=m*m;for(;C.length;){let z=C.pop()||0,U=C.pop()||0,Z=C.pop()||0;if(U-Z<=T){for(let fe=Z;fe<=U;fe++)DX(E[2*fe],E[2*fe+1],l,f)<=F&&P.push(_[fe]);continue}let Y=Z+U>>1,Q=E[2*Y],re=E[2*Y+1];DX(Q,re,l,f)<=F&&P.push(_[Y]),(z===0?l-m<=Q:f-m<=re)&&(C.push(Z),C.push(Y-1),C.push(1-z)),(z===0?l+m>=Q:f+m>=re)&&(C.push(Y+1),C.push(U),C.push(1-z))}return P}}function tk(c,l,f,m,_,E){if(_-m<=f)return;let T=m+_>>1;LX(c,l,T,m,_,E),tk(c,l,f,m,T-1,1-E),tk(c,l,f,T+1,_,1-E)}function LX(c,l,f,m,_,E){for(;_>m;){if(_-m>600){let F=_-m+1,z=f-m+1,U=Math.log(F),Z=.5*Math.exp(2*U/3),Y=.5*Math.sqrt(U*Z*(F-Z)/F)*(z-F/2<0?-1:1);LX(c,l,f,Math.max(m,Math.floor(f-z*Z/F+Y)),Math.min(_,Math.floor(f+(F-z)*Z/F+Y)),E)}let T=l[2*f+E],C=m,P=_;for(dw(c,l,m,f),l[2*_+E]>T&&dw(c,l,m,_);C<P;){for(dw(c,l,C,P),C++,P--;l[2*C+E]<T;)C++;for(;l[2*P+E]>T;)P--}l[2*m+E]===T?dw(c,l,m,P):(P++,dw(c,l,P,_)),P<=f&&(m=P+1),f<=P&&(_=P-1)}}function dw(c,l,f,m){rk(c,f,m),rk(l,2*f,2*m),rk(l,2*f+1,2*m+1)}function rk(c,l,f){let m=c[l];c[l]=c[f],c[f]=m}function DX(c,l,f,m){let _=c-f,E=l-m;return _*_+E*E}var nk;i.bg=void 0,(nk=i.bg||(i.bg={})).create="create",nk.load="load",nk.fullLoad="fullLoad";let HI=null,mw=[],ik=1e3/60,ok="loadTime",ak="fullLoadTime",G5e={mark(c){performance.mark(c)},frame(c){let l=c;HI!=null&&mw.push(l-HI),HI=l},clearMetrics(){HI=null,mw=[],performance.clearMeasures(ok),performance.clearMeasures(ak);for(let c in i.bg)performance.clearMarks(i.bg[c])},getPerformanceMetrics(){performance.measure(ok,i.bg.create,i.bg.load),performance.measure(ak,i.bg.create,i.bg.fullLoad);let c=performance.getEntriesByName(ok)[0].duration,l=performance.getEntriesByName(ak)[0].duration,f=mw.length,m=1/(mw.reduce((E,T)=>E+T,0)/f/1e3),_=mw.filter(E=>E>ik).reduce((E,T)=>E+(T-ik)/ik,0);return{loadTime:c,fullLoadTime:l,fps:m,percentDroppedFrames:_/(f+_)*100,totalFrames:f}}};i.$=class extends V{},i.A=Cg,i.B=dq,i.C=function(c){if(Ve==null){let l=c.navigator?c.navigator.userAgent:null;Ve=!!c.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Ve},i.D=$t,i.E=bt,i.F=class{constructor(c,l){this.target=c,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new N5e(()=>this.process()),this.subscription=function(f,m,_,E){return f.addEventListener(m,_,!1),{unsubscribe:()=>{f.removeEventListener(m,_,!1)}}}(this.target,"message",f=>this.receive(f)),this.globalScope=qe(self)?c:window}registerMessageHandler(c,l){this.messageHandlers[c]=l}sendAsync(c,l){return new Promise((f,m)=>{let _=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[_]={resolve:f,reject:m},l&&l.signal.addEventListener("abort",()=>{delete this.resolveRejects[_];let C={id:_,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)},{once:!0});let E=[],T=Object.assign(Object.assign({},c),{id:_,sourceMapId:this.mapId,origin:location.origin,data:$h(c.data,E)});this.target.postMessage(T,{transfer:E})})}receive(c){let l=c.data,f=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[f];let m=this.abortControllers[f];return delete this.abortControllers[f],void(m&&m.abort())}if(qe(self)||l.mustQueue)return this.tasks[f]=l,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,l)}}process(){if(this.taskQueue.length===0)return;let c=this.taskQueue.shift(),l=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(c,l)}processTask(c,l){return o(this,void 0,void 0,function*(){if(l.type==="<response>"){let _=this.resolveRejects[c];return delete this.resolveRejects[c],_?void(l.error?_.reject(Hh(l.error)):_.resolve(Hh(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let f=Hh(l.data),m=new AbortController;this.abortControllers[c]=m;try{let _=yield this.messageHandlers[l.type](l.sourceMapId,f,m);this.completeTask(c,null,_)}catch(_){this.completeTask(c,_)}})}completeTask(c,l,f){let m=[];delete this.abortControllers[c];let _={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?$h(l):null,data:$h(f,m)};this.target.postMessage(_,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.G=wt,i.H=function(){var c=new Cg(16);return Cg!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},i.I=Bq,i.J=function(c,l,f){var m,_,E,T,C,P,F,z,U,Z,Y,Q,re=f[0],fe=f[1],de=f[2];return l===c?(c[12]=l[0]*re+l[4]*fe+l[8]*de+l[12],c[13]=l[1]*re+l[5]*fe+l[9]*de+l[13],c[14]=l[2]*re+l[6]*fe+l[10]*de+l[14],c[15]=l[3]*re+l[7]*fe+l[11]*de+l[15]):(_=l[1],E=l[2],T=l[3],C=l[4],P=l[5],F=l[6],z=l[7],U=l[8],Z=l[9],Y=l[10],Q=l[11],c[0]=m=l[0],c[1]=_,c[2]=E,c[3]=T,c[4]=C,c[5]=P,c[6]=F,c[7]=z,c[8]=U,c[9]=Z,c[10]=Y,c[11]=Q,c[12]=m*re+C*fe+U*de+l[12],c[13]=_*re+P*fe+Z*de+l[13],c[14]=E*re+F*fe+Y*de+l[14],c[15]=T*re+z*fe+Q*de+l[15]),c},i.K=function(c,l,f){var m=f[0],_=f[1],E=f[2];return c[0]=l[0]*m,c[1]=l[1]*m,c[2]=l[2]*m,c[3]=l[3]*m,c[4]=l[4]*_,c[5]=l[5]*_,c[6]=l[6]*_,c[7]=l[7]*_,c[8]=l[8]*E,c[9]=l[9]*E,c[10]=l[10]*E,c[11]=l[11]*E,c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15],c},i.L=d9,i.M=function(c,l){let f={};for(let m=0;m<l.length;m++){let _=l[m];_ in c&&(f[_]=c[_])}return f},i.N=ip,i.O=uX,i.P=d,i.Q=cX,i.R=el,i.S=tl,i.T=yg,i.U=q,i.V=R,i.W=Se,i.X=qi,i.Y=M,i.Z=hw,i._=o,i.a=Pe,i.a$=function(c,l){var f=c[0],m=c[1],_=c[2],E=c[3],T=c[4],C=c[5],P=c[6],F=c[7],z=c[8],U=c[9],Z=c[10],Y=c[11],Q=c[12],re=c[13],fe=c[14],de=c[15],ke=l[0],we=l[1],Ne=l[2],He=l[3],ot=l[4],Pt=l[5],ar=l[6],Ct=l[7],_t=l[8],Zt=l[9],Ft=l[10],Nt=l[11],Xe=l[12],Qt=l[13],Wt=l[14],dr=l[15];return Math.abs(f-ke)<=ua*Math.max(1,Math.abs(f),Math.abs(ke))&&Math.abs(m-we)<=ua*Math.max(1,Math.abs(m),Math.abs(we))&&Math.abs(_-Ne)<=ua*Math.max(1,Math.abs(_),Math.abs(Ne))&&Math.abs(E-He)<=ua*Math.max(1,Math.abs(E),Math.abs(He))&&Math.abs(T-ot)<=ua*Math.max(1,Math.abs(T),Math.abs(ot))&&Math.abs(C-Pt)<=ua*Math.max(1,Math.abs(C),Math.abs(Pt))&&Math.abs(P-ar)<=ua*Math.max(1,Math.abs(P),Math.abs(ar))&&Math.abs(F-Ct)<=ua*Math.max(1,Math.abs(F),Math.abs(Ct))&&Math.abs(z-_t)<=ua*Math.max(1,Math.abs(z),Math.abs(_t))&&Math.abs(U-Zt)<=ua*Math.max(1,Math.abs(U),Math.abs(Zt))&&Math.abs(Z-Ft)<=ua*Math.max(1,Math.abs(Z),Math.abs(Ft))&&Math.abs(Y-Nt)<=ua*Math.max(1,Math.abs(Y),Math.abs(Nt))&&Math.abs(Q-Xe)<=ua*Math.max(1,Math.abs(Q),Math.abs(Xe))&&Math.abs(re-Qt)<=ua*Math.max(1,Math.abs(re),Math.abs(Qt))&&Math.abs(fe-Wt)<=ua*Math.max(1,Math.abs(fe),Math.abs(Wt))&&Math.abs(de-dr)<=ua*Math.max(1,Math.abs(de),Math.abs(dr))},i.a0=Wr,i.a1=Xq,i.a2=nt,i.a3=c=>{let l=window.document.createElement("video");return l.muted=!0,new Promise(f=>{l.onloadstart=()=>{f(l)};for(let m of c){let _=window.document.createElement("source");We(m)||(l.crossOrigin="Anonymous"),_.src=m,l.appendChild(_)}})},i.a4=function(){return J++},i.a5=Mt,i.a6=Dg,i.a7=Ox,i.a8=hm,i.a9=vX,i.aA=function(c){if(c.type==="custom")return new D5e(c);switch(c.type){case"background":return new P5e(c);case"circle":return new yVe(c);case"fill":return new NVe(c);case"fill-extrusion":return new KVe(c);case"heatmap":return new xVe(c);case"hillshade":return new bVe(c);case"line":return new i5e(c);case"raster":return new L5e(c);case"symbol":return new BI(c);}},i.aB=le,i.aC=function(c,l){if(!c)return[{command:"setStyle",args:[l]}];let f=[];try{if(!Vt(c.version,l.version))return[{command:"setStyle",args:[l]}];Vt(c.center,l.center)||f.push({command:"setCenter",args:[l.center]}),Vt(c.zoom,l.zoom)||f.push({command:"setZoom",args:[l.zoom]}),Vt(c.bearing,l.bearing)||f.push({command:"setBearing",args:[l.bearing]}),Vt(c.pitch,l.pitch)||f.push({command:"setPitch",args:[l.pitch]}),Vt(c.sprite,l.sprite)||f.push({command:"setSprite",args:[l.sprite]}),Vt(c.glyphs,l.glyphs)||f.push({command:"setGlyphs",args:[l.glyphs]}),Vt(c.transition,l.transition)||f.push({command:"setTransition",args:[l.transition]}),Vt(c.light,l.light)||f.push({command:"setLight",args:[l.light]}),Vt(c.terrain,l.terrain)||f.push({command:"setTerrain",args:[l.terrain]}),Vt(c.sky,l.sky)||f.push({command:"setSky",args:[l.sky]}),Vt(c.projection,l.projection)||f.push({command:"setProjection",args:[l.projection]});let m={},_=[];(function(T,C,P,F){let z;for(z in C=C||{},T=T||{})Object.prototype.hasOwnProperty.call(T,z)&&(Object.prototype.hasOwnProperty.call(C,z)||Xt(z,P,F));for(z in C)Object.prototype.hasOwnProperty.call(C,z)&&(Object.prototype.hasOwnProperty.call(T,z)?Vt(T[z],C[z])||(T[z].type==="geojson"&&C[z].type==="geojson"&&Pr(T,C,z)?nr(P,{command:"setGeoJSONSourceData",args:[z,C[z].data]}):lr(z,C,P,F)):yr(z,C,P))})(c.sources,l.sources,_,m);let E=[];c.layers&&c.layers.forEach(T=>{"source"in T&&m[T.source]?f.push({command:"removeLayer",args:[T.id]}):E.push(T)}),f=f.concat(_),function(T,C,P){C=C||[];let F=(T=T||[]).map(An),z=C.map(An),U=T.reduce(Ai,{}),Z=C.reduce(Ai,{}),Y=F.slice(),Q=Object.create(null),re,fe,de,ke,we;for(let Ne=0,He=0;Ne<F.length;Ne++)re=F[Ne],Object.prototype.hasOwnProperty.call(Z,re)?He++:(nr(P,{command:"removeLayer",args:[re]}),Y.splice(Y.indexOf(re,He),1));for(let Ne=0,He=0;Ne<z.length;Ne++)re=z[z.length-1-Ne],Y[Y.length-1-Ne]!==re&&(Object.prototype.hasOwnProperty.call(U,re)?(nr(P,{command:"removeLayer",args:[re]}),Y.splice(Y.lastIndexOf(re,Y.length-He),1)):He++,ke=Y[Y.length-Ne],nr(P,{command:"addLayer",args:[Z[re],ke]}),Y.splice(Y.length-Ne,0,re),Q[re]=!0);for(let Ne=0;Ne<z.length;Ne++)if(re=z[Ne],fe=U[re],de=Z[re],!Q[re]&&!Vt(fe,de))if(Vt(fe.source,de.source)&&Vt(fe["source-layer"],de["source-layer"])&&Vt(fe.type,de.type)){for(we in nn(fe.layout,de.layout,P,re,null,"setLayoutProperty"),nn(fe.paint,de.paint,P,re,null,"setPaintProperty"),Vt(fe.filter,de.filter)||nr(P,{command:"setFilter",args:[re,de.filter]}),Vt(fe.minzoom,de.minzoom)&&Vt(fe.maxzoom,de.maxzoom)||nr(P,{command:"setLayerZoomRange",args:[re,de.minzoom,de.maxzoom]}),fe)Object.prototype.hasOwnProperty.call(fe,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?nn(fe[we],de[we],P,re,we.slice(6),"setPaintProperty"):Vt(fe[we],de[we])||nr(P,{command:"setLayerProperty",args:[re,we,de[we]]}));for(we in de)Object.prototype.hasOwnProperty.call(de,we)&&!Object.prototype.hasOwnProperty.call(fe,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?nn(fe[we],de[we],P,re,we.slice(6),"setPaintProperty"):Vt(fe[we],de[we])||nr(P,{command:"setLayerProperty",args:[re,we,de[we]]}))}else nr(P,{command:"removeLayer",args:[re]}),ke=Y[Y.lastIndexOf(re)+1],nr(P,{command:"addLayer",args:[de,ke]})}(E,l.layers,f)}catch(m){console.warn("Unable to compute style diff:",m),f=[{command:"setStyle",args:[l]}]}return f},i.aD=function(c){let l=[],f=c.id;return f===void 0&&l.push({message:`layers.${f}: missing required property "id"`}),c.render===void 0&&l.push({message:`layers.${f}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&l.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),l},i.aE=function c(l,f){if(Array.isArray(l)){if(!Array.isArray(f)||l.length!==f.length)return!1;for(let m=0;m<l.length;m++)if(!c(l[m],f[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&f!==null){if(typeof f!="object"||Object.keys(l).length!==Object.keys(f).length)return!1;for(let m in l)if(!c(l[m],f[m]))return!1;return!0}return l===f},i.aF=ie,i.aG=ue,i.aH=class extends um{constructor(c,l){super(c,l),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},i.aI=CI,i.aJ=class extends um{constructor(c,l){super(c,l),this.current=cVe}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let l=1;l<16;l++)if(c[l]!==this.current[l]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},i.aK=n9,i.aL=i9,i.aM=gn,i.aN=class extends um{constructor(c,l){super(c,l),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},i.aO=class extends um{constructor(c,l){super(c,l),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},i.aP=function(c,l,f,m,_,E,T){var C=1/(l-f),P=1/(m-_),F=1/(E-T);return c[0]=-2*C,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*P,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*F,c[11]=0,c[12]=(l+f)*C,c[13]=(_+m)*P,c[14]=(T+E)*F,c[15]=1,c},i.aQ=gVe,i.aR=class extends Ae{},i.aS=l5e,i.aT=class extends Fe{},i.aU=Mq,i.aV=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},i.aW=_9,i.aX=Eo,i.aY=Qs,i.aZ=class extends Ht{},i.a_=function(c,l){return c[0]===l[0]&&c[1]===l[1]&&c[2]===l[2]&&c[3]===l[3]&&c[4]===l[4]&&c[5]===l[5]&&c[6]===l[6]&&c[7]===l[7]&&c[8]===l[8]&&c[9]===l[9]&&c[10]===l[10]&&c[11]===l[11]&&c[12]===l[12]&&c[13]===l[13]&&c[14]===l[14]&&c[15]===l[15]},i.aa=function(c){let l={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,m,_,E)=>{let T=_||E;return l[m]=!T||T.toLowerCase(),""}),l["max-age"]){let f=parseInt(l["max-age"],10);isNaN(f)?delete l["max-age"]:l["max-age"]=f}return l},i.ab=function(c,l){let f=[];for(let m in c)m in l||f.push(m);return f},i.ac=j,i.ad=function(c,l,f){var m=Math.sin(f),_=Math.cos(f),E=l[0],T=l[1],C=l[2],P=l[3],F=l[4],z=l[5],U=l[6],Z=l[7];return l!==c&&(c[8]=l[8],c[9]=l[9],c[10]=l[10],c[11]=l[11],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15]),c[0]=E*_+F*m,c[1]=T*_+z*m,c[2]=C*_+U*m,c[3]=P*_+Z*m,c[4]=F*_-E*m,c[5]=z*_-T*m,c[6]=U*_-C*m,c[7]=Z*_-P*m,c},i.ae=function(c){var l=new Cg(16);return l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=c[6],l[7]=c[7],l[8]=c[8],l[9]=c[9],l[10]=c[10],l[11]=c[11],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15],l},i.af=OI,i.ag=function(c,l){let f=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){let{interpolationType:_,minZoom:E,maxZoom:T}=c,C=_?j(sa.interpolationFactor(_,l,E,T),0,1):0;c.kind==="camera"?m=aa.number(c.minSize,c.maxSize,C):f=C}return{uSizeT:f,uSize:m}},i.ai=function(c,{uSize:l,uSizeT:f},{lowerSize:m,upperSize:_}){return c.kind==="source"?m/cc:c.kind==="composite"?aa.number(m/cc,_/cc,f):l},i.aj=$q,i.ak=function(c,l,f,m){let _=l.y-c.y,E=l.x-c.x,T=m.y-f.y,C=m.x-f.x,P=T*E-C*_;if(P===0)return null;let F=(C*(c.y-f.y)-T*(c.x-f.x))/P;return new d(c.x+F*E,c.y+F*_)},i.al=xX,i.am=l9,i.an=Iq,i.ao=function(c){let l=1/0,f=1/0,m=-1/0,_=-1/0;for(let E of c)l=Math.min(l,E.x),f=Math.min(f,E.y),m=Math.max(m,E.x),_=Math.max(_,E.y);return[l,f,m,_]},i.ap=Ui,i.ar=Gq,i.as=function(c,l){var f=l[0],m=l[1],_=l[2],E=l[3],T=l[4],C=l[5],P=l[6],F=l[7],z=l[8],U=l[9],Z=l[10],Y=l[11],Q=l[12],re=l[13],fe=l[14],de=l[15],ke=f*C-m*T,we=f*P-_*T,Ne=f*F-E*T,He=m*P-_*C,ot=m*F-E*C,Pt=_*F-E*P,ar=z*re-U*Q,Ct=z*fe-Z*Q,_t=z*de-Y*Q,Zt=U*fe-Z*re,Ft=U*de-Y*re,Nt=Z*de-Y*fe,Xe=ke*Nt-we*Ft+Ne*Zt+He*_t-ot*Ct+Pt*ar;return Xe?(c[0]=(C*Nt-P*Ft+F*Zt)*(Xe=1/Xe),c[1]=(_*Ft-m*Nt-E*Zt)*Xe,c[2]=(re*Pt-fe*ot+de*He)*Xe,c[3]=(Z*ot-U*Pt-Y*He)*Xe,c[4]=(P*_t-T*Nt-F*Ct)*Xe,c[5]=(f*Nt-_*_t+E*Ct)*Xe,c[6]=(fe*Ne-Q*Pt-de*we)*Xe,c[7]=(z*Pt-Z*Ne+Y*we)*Xe,c[8]=(T*Ft-C*_t+F*ar)*Xe,c[9]=(m*_t-f*Ft-E*ar)*Xe,c[10]=(Q*ot-re*Ne+de*ke)*Xe,c[11]=(U*Ne-z*ot-Y*ke)*Xe,c[12]=(C*Ct-T*Zt-P*ar)*Xe,c[13]=(f*Zt-m*Ct+_*ar)*Xe,c[14]=(re*we-Q*He-fe*ke)*Xe,c[15]=(z*He-U*we+Z*ke)*Xe,c):null},i.at=Qq,i.au=Vq,i.av=ek,i.aw=function(){let c={},l=be.$version;for(let f in be.$root){let m=be.$root[f];if(m.required){let _=null;_=f==="version"?l:m.type==="array"?[]:{},_!=null&&(c[f]=_)}}return c},i.ax=Hx,i.ay=Ye,i.az=function(c){c=c.slice();let l=Object.create(null);for(let f=0;f<c.length;f++)l[c[f].id]=c[f];for(let f=0;f<c.length;f++)"ref"in c[f]&&(c[f]=Ut(c[f],l[c[f].ref]));return c},i.b=Ke,i.b0=function(c,l){return c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=l[6],c[7]=l[7],c[8]=l[8],c[9]=l[9],c[10]=l[10],c[11]=l[11],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15],c},i.b1=function(c,l,f){return c[0]=l[0]*f[0],c[1]=l[1]*f[1],c[2]=l[2]*f[2],c[3]=l[3]*f[3],c},i.b2=function(c,l){return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3]},i.b3=$,i.b4=pX,i.b5=fX,i.b6=function(c,l,f,m,_){var E,T=1/Math.tan(l/2);return c[0]=T/f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=T,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,_!=null&&_!==1/0?(c[10]=(_+m)*(E=1/(m-_)),c[14]=2*_*m*E):(c[10]=-1,c[14]=-2*m),c},i.b7=function(c,l,f){var m=Math.sin(f),_=Math.cos(f),E=l[4],T=l[5],C=l[6],P=l[7],F=l[8],z=l[9],U=l[10],Z=l[11];return l!==c&&(c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15]),c[4]=E*_+F*m,c[5]=T*_+z*m,c[6]=C*_+U*m,c[7]=P*_+Z*m,c[8]=F*_-E*m,c[9]=z*_-T*m,c[10]=U*_-C*m,c[11]=Z*_-P*m,c},i.b8=D,i.b9=k,i.bA=j9,i.bB=function(c){return c.message===$e},i.bC=Fh,i.bD=Ba,i.ba=function(c){return c*Math.PI/180},i.bb=function(c,l){let{x:f,y:m}=hw.fromLngLat(l);return!(c<0||c>25||m<0||m>=1||f<0||f>=1)},i.bc=function(c,l){return c[0]=l[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=l[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=l[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},i.bd=class extends B{},i.be=Yq,i.bf=G5e,i.bh=Le,i.bi=function(c,l){Pe.REGISTERED_PROTOCOLS[c]=l},i.bj=function(c){delete Pe.REGISTERED_PROTOCOLS[c]},i.bk=function(c,l){let f={};for(let _=0;_<c.length;_++){let E=l&&l[c[_].id]||vI(c[_]);l&&(l[c[_].id]=E);let T=f[E];T||(T=f[E]=[]),T.push(c[_])}let m=[];for(let _ in f)m.push(f[_]);return m},i.bl=qt,i.bm=mX,i.bn=gX,i.bo=Z9,i.bp=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=qi/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;let l=c.bucket.layers[0],f=l.layout,m=l._unevaluatedLayout._values,_={layoutIconSize:m["icon-size"].possiblyEvaluate(new Gn(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Gn(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Gn(18))};if(c.bucket.textSizeData.kind==="composite"){let{minZoom:F,maxZoom:z}=c.bucket.textSizeData;_.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Gn(F),c.canonical),m["text-size"].possiblyEvaluate(new Gn(z),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){let{minZoom:F,maxZoom:z}=c.bucket.iconSizeData;_.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Gn(F),c.canonical),m["icon-size"].possiblyEvaluate(new Gn(z),c.canonical)]}let E=f.get("text-line-height")*Ui,T=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",C=f.get("text-keep-upright"),P=f.get("text-size");for(let F of c.bucket.features){let z=f.get("text-font").evaluate(F,{},c.canonical).join(","),U=P.evaluate(F,{},c.canonical),Z=_.layoutTextSize.evaluate(F,{},c.canonical),Y=_.layoutIconSize.evaluate(F,{},c.canonical),Q={horizontal:{},vertical:void 0},re=F.text,fe,de=[0,0];if(re){let Ne=re.toString(),He=f.get("text-letter-spacing").evaluate(F,{},c.canonical)*Ui,ot=mq(Ne)?He:0,Pt=f.get("text-anchor").evaluate(F,{},c.canonical),ar=MX(l,F,c.canonical);if(!ar){let Ft=f.get("text-radial-offset").evaluate(F,{},c.canonical);de=Ft?CX(Pt,[Ft*Ui,Jq]):f.get("text-offset").evaluate(F,{},c.canonical).map(Nt=>Nt*Ui)}let Ct=T?"center":f.get("text-justify").evaluate(F,{},c.canonical),_t=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(F,{},c.canonical)*Ui:1/0,Zt=()=>{c.bucket.allowVerticalPlacement&&Wx(Ne)&&(Q.vertical=FI(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,_t,E,Pt,"left",ot,de,i.ah.vertical,!0,Z,U))};if(!T&&ar){let Ft=new Set;if(Ct==="auto")for(let Xe=0;Xe<ar.values.length;Xe+=2)Ft.add(Qq(ar.values[Xe]));else Ft.add(Ct);let Nt=!1;for(let Xe of Ft)if(!Q.horizontal[Xe])if(Nt)Q.horizontal[Xe]=Q.horizontal[0];else{let Qt=FI(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,_t,E,"center",Xe,ot,de,i.ah.horizontal,!1,Z,U);Qt&&(Q.horizontal[Xe]=Qt,Nt=Qt.positionedLines.length===1)}Zt()}else{Ct==="auto"&&(Ct=Qq(Pt));let Ft=FI(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,_t,E,Pt,Ct,ot,de,i.ah.horizontal,!1,Z,U);Ft&&(Q.horizontal[Ct]=Ft),Zt(),Wx(Ne)&&T&&C&&(Q.vertical=FI(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,_t,E,Pt,Ct,ot,de,i.ah.vertical,!1,Z,U))}}let ke=!1;if(F.icon&&F.icon.name){let Ne=c.imageMap[F.icon.name];Ne&&(fe=I5e(c.imagePositions[F.icon.name],f.get("icon-offset").evaluate(F,{},c.canonical),f.get("icon-anchor").evaluate(F,{},c.canonical)),ke=!!Ne.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=ke:c.bucket.sdfIcons!==ke&&Re("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==c.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}let we=PX(Q.horizontal)||Q.vertical;c.bucket.iconsInText=!!we&&we.iconsInText,(we||fe)&&U5e(c.bucket,F,Q,fe,c.imageMap,_,Z,Y,de,ke,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},i.bq=kq,i.br=Dq,i.bs=qq,i.bt=tp,i.bu=jq,i.bv=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},i.bw=function(c,l,f,m,_){return o(this,void 0,void 0,function*(){if(R())try{return yield Se(c,l,f,m,_)}catch(E){}return function(E,T,C,P,F){let z=E.width,U=E.height;Ie&&Ge||(Ie=new OffscreenCanvas(z,U),Ge=Ie.getContext("2d",{willReadFrequently:!0})),Ie.width=z,Ie.height=U,Ge.drawImage(E,0,0,z,U);let Z=Ge.getImageData(T,C,P,F);return Ge.clearRect(0,0,z,U),Z.data}(c,l,f,m,_)})},i.bx=dX,i.by=a,i.bz=u,i.c=Ze,i.d=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));let l=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(l)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),i.e=ee,i.f=c=>new Promise((l,f)=>{let m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Ce})},m.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let _=new Blob([new Uint8Array(c)],{type:"image/png"});m.src=c.byteLength?URL.createObjectURL(_):Ce}),i.g=at,i.h=(c,l)=>je(ee(c,{type:"json"}),l),i.i=qe,i.j=Gt,i.k=kt,i.l=(c,l)=>je(ee(c,{type:"arrayBuffer"}),l),i.m=je,i.n=function(c){return new jq(c).readFields(_5e,[])},i.o=rw,i.p=W9,i.q=b,i.r=pq,i.s=We,i.t=Gx,i.u=yf,i.v=be,i.w=Re,i.x=function([c,l,f]){return l+=90,l*=Math.PI/180,f*=Math.PI/180,{x:c*Math.cos(l)*Math.sin(f),y:c*Math.sin(l)*Math.sin(f),z:c*Math.cos(f)}},i.y=aa,i.z=Gn}),t("worker",["./shared"],function(i){"use strict";class o{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,H){for(let ae of W){this._layerConfigs[ae.id]=ae;let ve=this._layers[ae.id]=i.aA(ae);ve._featureFilter=i.a7(ve.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(let ae of H)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};let K=i.bk(Object.values(this._layerConfigs),this.keyCache);for(let ae of K){let ve=ae.map(Ue=>this._layers[Ue.id]),xe=ve[0];if(xe.visibility==="none")continue;let Te=xe.source||"",pe=this.familiesBySource[Te];pe||(pe=this.familiesBySource[Te]={});let Be=xe.sourceLayer||"_geojsonTileLayer",Je=pe[Be];Je||(Je=pe[Be]=[]),Je.push(ve)}}}class a{constructor(W){let H={},K=[];for(let Te in W){let pe=W[Te],Be=H[Te]={};for(let Je in pe){let Ue=pe[+Je];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;let st={x:0,y:0,w:Ue.bitmap.width+2,h:Ue.bitmap.height+2};K.push(st),Be[Je]={rect:st,metrics:Ue.metrics}}}let{w:ae,h:ve}=i.p(K),xe=new i.o({width:ae||1,height:ve||1});for(let Te in W){let pe=W[Te];for(let Be in pe){let Je=pe[+Be];if(!Je||Je.bitmap.width===0||Je.bitmap.height===0)continue;let Ue=H[Te][Be].rect;i.o.copy(Je.bitmap,xe,{x:0,y:0},{x:Ue.x+1,y:Ue.y+1},Je.bitmap)}}this.image=xe,this.positions=H}}i.bl("GlyphAtlas",a);class u{constructor(W){this.tileID=new i.S(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[]}parse(W,H,K,ae){return i._(this,void 0,void 0,function*(){this.status="parsing",this.data=W,this.collisionBoxArray=new i.a5;let ve=new i.bm(Object.keys(W.layers).sort()),xe=new i.bn(this.tileID,this.promoteId);xe.bucketLayerIDs=[];let Te={},pe={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Be=H.familiesBySource[this.source];for(let Er in Be){let cn=W.layers[Er];if(!cn)continue;cn.version===1&&i.w(`Vector tile source "${this.source}" layer "${Er}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Mn=ve.encode(Er),Zi=[];for(let so=0;so<cn.length;so++){let zo=cn.feature(so),Ah=xe.getId(zo,Er);Zi.push({feature:zo,id:Ah,index:so,sourceLayerIndex:Mn})}for(let so of Be[Er]){let zo=so[0];zo.source!==this.source&&i.w(`layer.source = ${zo.source} does not equal this.source = ${this.source}`),zo.minzoom&&this.zoom<Math.floor(zo.minzoom)||zo.maxzoom&&this.zoom>=zo.maxzoom||zo.visibility!=="none"&&(h(so,this.zoom,K),(Te[zo.id]=zo.createBucket({index:xe.bucketLayerIDs.length,layers:so,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mn,sourceID:this.source})).populate(Zi,pe,this.tileID.canonical),xe.bucketLayerIDs.push(so.map(Ah=>Ah.id)))}}let Je=i.aF(pe.glyphDependencies,Er=>Object.keys(Er).map(Number));this.inFlightDependencies.forEach(Er=>Er==null?void 0:Er.abort()),this.inFlightDependencies=[];let Ue=Promise.resolve({});if(Object.keys(Je).length){let Er=new AbortController;this.inFlightDependencies.push(Er),Ue=ae.sendAsync({type:"GG",data:{stacks:Je,source:this.source,tileID:this.tileID,type:"glyphs"}},Er)}let st=Object.keys(pe.iconDependencies),zt=Promise.resolve({});if(st.length){let Er=new AbortController;this.inFlightDependencies.push(Er),zt=ae.sendAsync({type:"GI",data:{icons:st,source:this.source,tileID:this.tileID,type:"icons"}},Er)}let Jt=Object.keys(pe.patternDependencies),Nr=Promise.resolve({});if(Jt.length){let Er=new AbortController;this.inFlightDependencies.push(Er),Nr=ae.sendAsync({type:"GI",data:{icons:Jt,source:this.source,tileID:this.tileID,type:"patterns"}},Er)}let[cr,jr,Ar]=yield Promise.all([Ue,zt,Nr]),Jr=new a(cr),Kr=new i.bo(jr,Ar);for(let Er in Te){let cn=Te[Er];cn instanceof i.a6?(h(cn.layers,this.zoom,K),i.bp({bucket:cn,glyphMap:cr,glyphPositions:Jr.positions,imageMap:jr,imagePositions:Kr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):cn.hasPattern&&(cn instanceof i.bq||cn instanceof i.br||cn instanceof i.bs)&&(h(cn.layers,this.zoom,K),cn.addFeatures(pe,this.tileID.canonical,Kr.patternPositions))}return this.status="done",{buckets:Object.values(Te).filter(Er=>!Er.isEmpty()),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jr.image,imageAtlas:Kr,glyphMap:this.returnDependencies?cr:null,iconMap:this.returnDependencies?jr:null,glyphPositions:this.returnDependencies?Jr.positions:null}})}}function h(oe,W,H){let K=new i.z(W);for(let ae of oe)ae.recalculate(K,H)}class d{constructor(W,H,K){this.actor=W,this.layerIndex=H,this.availableImages=K,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(W,H){return i._(this,void 0,void 0,function*(){let K=yield i.l(W.request,H);try{return{vectorTile:new i.bt.VectorTile(new i.bu(K.data)),rawData:K.data,cacheControl:K.cacheControl,expires:K.expires}}catch(ae){let ve=new Uint8Array(K.data),xe=`Unable to parse the tile at ${W.request.url}, `;throw xe+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ae.message}`,new Error(xe)}})}loadTile(W){return i._(this,void 0,void 0,function*(){let H=W.uid,K=!!(W&&W.request&&W.request.collectResourceTiming)&&new i.bv(W.request),ae=new u(W);this.loading[H]=ae;let ve=new AbortController;ae.abort=ve;try{let xe=yield this.loadVectorTile(W,ve);if(delete this.loading[H],!xe)return null;let Te=xe.rawData,pe={};xe.expires&&(pe.expires=xe.expires),xe.cacheControl&&(pe.cacheControl=xe.cacheControl);let Be={};if(K){let Ue=K.finish();Ue&&(Be.resourceTiming=JSON.parse(JSON.stringify(Ue)))}ae.vectorTile=xe.vectorTile;let Je=ae.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[H]=ae,this.fetching[H]={rawTileData:Te,cacheControl:pe,resourceTiming:Be};try{let Ue=yield Je;return i.e({rawTileData:Te.slice(0)},Ue,pe,Be)}finally{delete this.fetching[H]}}catch(xe){throw delete this.loading[H],ae.status="done",this.loaded[H]=ae,xe}})}reloadTile(W){return i._(this,void 0,void 0,function*(){let H=W.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let K=this.loaded[H];if(K.showCollisionBoxes=W.showCollisionBoxes,K.status==="parsing"){let ae=yield K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor),ve;if(this.fetching[H]){let{rawTileData:xe,cacheControl:Te,resourceTiming:pe}=this.fetching[H];delete this.fetching[H],ve=i.e({rawTileData:xe.slice(0)},ae,Te,pe)}else ve=ae;return ve}if(K.status==="done"&&K.vectorTile)return K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(W){return i._(this,void 0,void 0,function*(){let H=this.loading,K=W.uid;H&&H[K]&&H[K].abort&&(H[K].abort.abort(),delete H[K])})}removeTile(W){return i._(this,void 0,void 0,function*(){this.loaded&&this.loaded[W.uid]&&delete this.loaded[W.uid]})}}class v{constructor(){this.loaded={}}loadTile(W){return i._(this,void 0,void 0,function*(){let{uid:H,encoding:K,rawImageData:ae,redFactor:ve,greenFactor:xe,blueFactor:Te,baseShift:pe}=W,Be=ae.width+2,Je=ae.height+2,Ue=i.b(ae)?new i.R({width:Be,height:Je},(yield i.bw(ae,-1,-1,Be,Je))):ae,st=new i.bx(H,Ue,K,ve,xe,Te,pe);return this.loaded=this.loaded||{},this.loaded[H]=st,st})}removeTile(W){let H=this.loaded,K=W.uid;H&&H[K]&&delete H[K]}}function x(oe,W){if(oe.length!==0){S(oe[0],W);for(var H=1;H<oe.length;H++)S(oe[H],!W)}}function S(oe,W){for(var H=0,K=0,ae=0,ve=oe.length,xe=ve-1;ae<ve;xe=ae++){var Te=(oe[ae][0]-oe[xe][0])*(oe[xe][1]+oe[ae][1]),pe=H+Te;K+=Math.abs(H)>=Math.abs(Te)?H-pe+Te:Te-pe+H,H=pe}H+K>=0!=!!W&&oe.reverse()}var A=i.by(function oe(W,H){var K,ae=W&&W.type;if(ae==="FeatureCollection")for(K=0;K<W.features.length;K++)oe(W.features[K],H);else if(ae==="GeometryCollection")for(K=0;K<W.geometries.length;K++)oe(W.geometries[K],H);else if(ae==="Feature")oe(W.geometry,H);else if(ae==="Polygon")x(W.coordinates,H);else if(ae==="MultiPolygon")for(K=0;K<W.coordinates.length;K++)x(W.coordinates[K],H);return W});let L=i.bt.VectorTileFeature.prototype.toGeoJSON;var q={exports:{}},R=i.bz,D=i.bt.VectorTileFeature,k=j;function j(oe,W){this.options=W||{},this.features=oe,this.length=oe.length}function $(oe,W){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=W||4096}j.prototype.feature=function(oe){return new $(this.features[oe],this.options.extent)},$.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var W=0;W<oe.length;W++){for(var H=oe[W],K=[],ae=0;ae<H.length;ae++)K.push(new R(H[ae][0],H[ae][1]));this.geometry.push(K)}return this.geometry},$.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,W=1/0,H=-1/0,K=1/0,ae=-1/0,ve=0;ve<oe.length;ve++)for(var xe=oe[ve],Te=0;Te<xe.length;Te++){var pe=xe[Te];W=Math.min(W,pe.x),H=Math.max(H,pe.x),K=Math.min(K,pe.y),ae=Math.max(ae,pe.y)}return[W,K,H,ae]},$.prototype.toGeoJSON=D.prototype.toGeoJSON;var ee=i.bA,J=k;function ie(oe){var W=new ee;return function(H,K){for(var ae in H.layers)K.writeMessage(3,ue,H.layers[ae])}(oe,W),W.finish()}function ue(oe,W){var H;W.writeVarintField(15,oe.version||1),W.writeStringField(1,oe.name||""),W.writeVarintField(5,oe.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<oe.length;H++)K.feature=oe.feature(H),W.writeMessage(2,le,K);var ae=K.keys;for(H=0;H<ae.length;H++)W.writeStringField(3,ae[H]);var ve=K.values;for(H=0;H<ve.length;H++)W.writeMessage(4,Ve,ve[H])}function le(oe,W){var H=oe.feature;H.id!==void 0&&W.writeVarintField(1,H.id),W.writeMessage(2,_e,oe),W.writeVarintField(3,H.type),W.writeMessage(4,qe,H)}function _e(oe,W){var H=oe.feature,K=oe.keys,ae=oe.values,ve=oe.keycache,xe=oe.valuecache;for(var Te in H.properties){var pe=H.properties[Te],Be=ve[Te];if(pe!==null){Be===void 0&&(K.push(Te),ve[Te]=Be=K.length-1),W.writeVarint(Be);var Je=typeof pe;Je!=="string"&&Je!=="boolean"&&Je!=="number"&&(pe=JSON.stringify(pe));var Ue=Je+":"+pe,st=xe[Ue];st===void 0&&(ae.push(pe),xe[Ue]=st=ae.length-1),W.writeVarint(st)}}}function Re(oe,W){return(W<<3)+(7&oe)}function ze(oe){return oe<<1^oe>>31}function qe(oe,W){for(var H=oe.loadGeometry(),K=oe.type,ae=0,ve=0,xe=H.length,Te=0;Te<xe;Te++){var pe=H[Te],Be=1;K===1&&(Be=pe.length),W.writeVarint(Re(1,Be));for(var Je=K===3?pe.length-1:pe.length,Ue=0;Ue<Je;Ue++){Ue===1&&K!==1&&W.writeVarint(Re(2,Je-1));var st=pe[Ue].x-ae,zt=pe[Ue].y-ve;W.writeVarint(ze(st)),W.writeVarint(ze(zt)),ae+=st,ve+=zt}K===3&&W.writeVarint(Re(7,1))}}function Ve(oe,W){var H=typeof oe;H==="string"?W.writeStringField(1,oe):H==="boolean"?W.writeBooleanField(7,oe):H==="number"&&(oe%1!=0?W.writeDoubleField(3,oe):oe<0?W.writeSVarintField(6,oe):W.writeVarintField(5,oe))}q.exports=ie,q.exports.fromVectorTileJs=ie,q.exports.fromGeojsonVt=function(oe,W){W=W||{};var H={};for(var K in oe)H[K]=new J(oe[K].features,W),H[K].name=K,H[K].version=W.version,H[K].extent=W.extent;return ie({layers:H})},q.exports.GeoJSONWrapper=J;var Ke=i.by(q.exports);let Ce={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},Se=Math.fround||(Ie=new Float32Array(1),oe=>(Ie[0]=+oe,Ie[0]));var Ie;let Ge=3,$e=5,Ze=6;class Pe{constructor(W){this.options=Object.assign(Object.create(Ce),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){let{log:H,minZoom:K,maxZoom:ae}=this.options;H&&console.time("total time");let ve=`prepare ${W.length} points`;H&&console.time(ve),this.points=W;let xe=[];for(let pe=0;pe<W.length;pe++){let Be=W[pe];if(!Be.geometry)continue;let[Je,Ue]=Be.geometry.coordinates,st=Se(Le(Je)),zt=Se(Ye(Ue));xe.push(st,zt,1/0,pe,-1,1),this.options.reduce&&xe.push(0)}let Te=this.trees[ae+1]=this._createTree(xe);H&&console.timeEnd(ve);for(let pe=ae;pe>=K;pe--){let Be=+Date.now();Te=this.trees[pe]=this._createTree(this._cluster(Te,pe)),H&&console.log("z%d: %d clusters in %dms",pe,Te.numItems,+Date.now()-Be)}return H&&console.timeEnd("total time"),this}getClusters(W,H){let K=((W[0]+180)%360+360)%360-180,ae=Math.max(-90,Math.min(90,W[1])),ve=W[2]===180?180:((W[2]+180)%360+360)%360-180,xe=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)K=-180,ve=180;else if(K>ve){let Ue=this.getClusters([K,ae,180,xe],H),st=this.getClusters([-180,ae,ve,xe],H);return Ue.concat(st)}let Te=this.trees[this._limitZoom(H)],pe=Te.range(Le(K),Ye(xe),Le(ve),Ye(ae)),Be=Te.data,Je=[];for(let Ue of pe){let st=this.stride*Ue;Je.push(Be[st+$e]>1?at(Be,st,this.clusterProps):this.points[Be[st+Ge]])}return Je}getChildren(W){let H=this._getOriginId(W),K=this._getOriginZoom(W),ae="No cluster with the specified id.",ve=this.trees[K];if(!ve)throw new Error(ae);let xe=ve.data;if(H*this.stride>=xe.length)throw new Error(ae);let Te=this.options.radius/(this.options.extent*Math.pow(2,K-1)),pe=ve.within(xe[H*this.stride],xe[H*this.stride+1],Te),Be=[];for(let Je of pe){let Ue=Je*this.stride;xe[Ue+4]===W&&Be.push(xe[Ue+$e]>1?at(xe,Ue,this.clusterProps):this.points[xe[Ue+Ge]])}if(Be.length===0)throw new Error(ae);return Be}getLeaves(W,H,K){let ae=[];return this._appendLeaves(ae,W,H=H||10,K=K||0,0),ae}getTile(W,H,K){let ae=this.trees[this._limitZoom(W)],ve=Math.pow(2,W),{extent:xe,radius:Te}=this.options,pe=Te/xe,Be=(K-pe)/ve,Je=(K+1+pe)/ve,Ue={features:[]};return this._addTileFeatures(ae.range((H-pe)/ve,Be,(H+1+pe)/ve,Je),ae.data,H,K,ve,Ue),H===0&&this._addTileFeatures(ae.range(1-pe/ve,Be,1,Je),ae.data,ve,K,ve,Ue),H===ve-1&&this._addTileFeatures(ae.range(0,Be,pe/ve,Je),ae.data,-1,K,ve,Ue),Ue.features.length?Ue:null}getClusterExpansionZoom(W){let H=this._getOriginZoom(W)-1;for(;H<=this.options.maxZoom;){let K=this.getChildren(W);if(H++,K.length!==1)break;W=K[0].properties.cluster_id}return H}_appendLeaves(W,H,K,ae,ve){let xe=this.getChildren(H);for(let Te of xe){let pe=Te.properties;if(pe&&pe.cluster?ve+pe.point_count<=ae?ve+=pe.point_count:ve=this._appendLeaves(W,pe.cluster_id,K,ae,ve):ve<ae?ve++:W.push(Te),W.length===K)break}return ve}_createTree(W){let H=new i.av(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<W.length;K+=this.stride)H.add(W[K],W[K+1]);return H.finish(),H.data=W,H}_addTileFeatures(W,H,K,ae,ve,xe){for(let Te of W){let pe=Te*this.stride,Be=H[pe+$e]>1,Je,Ue,st;if(Be)Je=wt(H,pe,this.clusterProps),Ue=H[pe],st=H[pe+1];else{let Nr=this.points[H[pe+Ge]];Je=Nr.properties;let[cr,jr]=Nr.geometry.coordinates;Ue=Le(cr),st=Ye(jr)}let zt={type:1,geometry:[[Math.round(this.options.extent*(Ue*ve-K)),Math.round(this.options.extent*(st*ve-ae))]],tags:Je},Jt;Jt=Be||this.options.generateId?H[pe+Ge]:this.points[H[pe+Ge]].id,Jt!==void 0&&(zt.id=Jt),xe.features.push(zt)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,H){let{radius:K,extent:ae,reduce:ve,minPoints:xe}=this.options,Te=K/(ae*Math.pow(2,H)),pe=W.data,Be=[],Je=this.stride;for(let Ue=0;Ue<pe.length;Ue+=Je){if(pe[Ue+2]<=H)continue;pe[Ue+2]=H;let st=pe[Ue],zt=pe[Ue+1],Jt=W.within(pe[Ue],pe[Ue+1],Te),Nr=pe[Ue+$e],cr=Nr;for(let jr of Jt){let Ar=jr*Je;pe[Ar+2]>H&&(cr+=pe[Ar+$e])}if(cr>Nr&&cr>=xe){let jr,Ar=st*Nr,Jr=zt*Nr,Kr=-1,Er=((Ue/Je|0)<<5)+(H+1)+this.points.length;for(let cn of Jt){let Mn=cn*Je;if(pe[Mn+2]<=H)continue;pe[Mn+2]=H;let Zi=pe[Mn+$e];Ar+=pe[Mn]*Zi,Jr+=pe[Mn+1]*Zi,pe[Mn+4]=Er,ve&&(jr||(jr=this._map(pe,Ue,!0),Kr=this.clusterProps.length,this.clusterProps.push(jr)),ve(jr,this._map(pe,Mn)))}pe[Ue+4]=Er,Be.push(Ar/cr,Jr/cr,1/0,Er,-1,cr),ve&&Be.push(Kr)}else{for(let jr=0;jr<Je;jr++)Be.push(pe[Ue+jr]);if(cr>1)for(let jr of Jt){let Ar=jr*Je;if(!(pe[Ar+2]<=H)){pe[Ar+2]=H;for(let Jr=0;Jr<Je;Jr++)Be.push(pe[Ar+Jr])}}}}return Be}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,H,K){if(W[H+$e]>1){let xe=this.clusterProps[W[H+Ze]];return K?Object.assign({},xe):xe}let ae=this.points[W[H+Ge]].properties,ve=this.options.map(ae);return K&&ve===ae?Object.assign({},ve):ve}}function at(oe,W,H){return{type:"Feature",id:oe[W+Ge],properties:wt(oe,W,H),geometry:{type:"Point",coordinates:[(K=oe[W],360*(K-.5)),je(oe[W+1])]}};var K}function wt(oe,W,H){let K=oe[W+$e],ae=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,ve=oe[W+Ze],xe=ve===-1?{}:Object.assign({},H[ve]);return Object.assign(xe,{cluster:!0,cluster_id:oe[W+Ge],point_count:K,point_count_abbreviated:ae})}function Le(oe){return oe/360+.5}function Ye(oe){let W=Math.sin(oe*Math.PI/180),H=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return H<0?0:H>1?1:H}function je(oe){let W=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function We(oe,W,H,K){let ae=K,ve=W+(H-W>>1),xe,Te=H-W,pe=oe[W],Be=oe[W+1],Je=oe[H],Ue=oe[H+1];for(let st=W+3;st<H;st+=3){let zt=tt(oe[st],oe[st+1],pe,Be,Je,Ue);if(zt>ae)xe=st,ae=zt;else if(zt===ae){let Jt=Math.abs(st-ve);Jt<Te&&(xe=st,Te=Jt)}}ae>K&&(xe-W>3&&We(oe,W,xe,K),oe[xe+2]=ae,H-xe>3&&We(oe,xe,H,K))}function tt(oe,W,H,K,ae,ve){let xe=ae-H,Te=ve-K;if(xe!==0||Te!==0){let pe=((oe-H)*xe+(W-K)*Te)/(xe*xe+Te*Te);pe>1?(H=ae,K=ve):pe>0&&(H+=xe*pe,K+=Te*pe)}return xe=oe-H,Te=W-K,xe*xe+Te*Te}function Qe(oe,W,H,K){let ae={id:oe==null?null:oe,type:W,geometry:H,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(W==="Point"||W==="MultiPoint"||W==="LineString")kt(ae,H);else if(W==="Polygon")kt(ae,H[0]);else if(W==="MultiLineString")for(let ve of H)kt(ae,ve);else if(W==="MultiPolygon")for(let ve of H)kt(ae,ve[0]);return ae}function kt(oe,W){for(let H=0;H<W.length;H+=3)oe.minX=Math.min(oe.minX,W[H]),oe.minY=Math.min(oe.minY,W[H+1]),oe.maxX=Math.max(oe.maxX,W[H]),oe.maxY=Math.max(oe.maxY,W[H+1])}function Gt(oe,W,H,K){if(!W.geometry)return;let ae=W.geometry.coordinates;if(ae&&ae.length===0)return;let ve=W.geometry.type,xe=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),Te=[],pe=W.id;if(H.promoteId?pe=W.properties[H.promoteId]:H.generateId&&(pe=K||0),ve==="Point")bt(ae,Te);else if(ve==="MultiPoint")for(let Be of ae)bt(Be,Te);else if(ve==="LineString")be(ae,Te,xe,!1);else if(ve==="MultiLineString"){if(H.lineMetrics){for(let Be of ae)Te=[],be(Be,Te,xe,!1),oe.push(Qe(pe,"LineString",Te,W.properties));return}Yt(ae,Te,xe,!1)}else if(ve==="Polygon")Yt(ae,Te,xe,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(let Be of W.geometry.geometries)Gt(oe,{id:pe,geometry:Be,properties:W.properties},H,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Be of ae){let Je=[];Yt(Be,Je,xe,!0),Te.push(Je)}}oe.push(Qe(pe,ve,Te,W.properties))}function bt(oe,W){W.push(Ut(oe[0]),Vt(oe[1]),0)}function be(oe,W,H,K){let ae,ve,xe=0;for(let pe=0;pe<oe.length;pe++){let Be=Ut(oe[pe][0]),Je=Vt(oe[pe][1]);W.push(Be,Je,0),pe>0&&(xe+=K?(ae*Je-Be*ve)/2:Math.sqrt(Math.pow(Be-ae,2)+Math.pow(Je-ve,2))),ae=Be,ve=Je}let Te=W.length-3;W[2]=1,We(W,0,Te,H),W[Te+2]=1,W.size=Math.abs(xe),W.start=0,W.end=W.size}function Yt(oe,W,H,K){for(let ae=0;ae<oe.length;ae++){let ve=[];be(oe[ae],ve,H,K),W.push(ve)}}function Ut(oe){return oe/360+.5}function Vt(oe){let W=Math.sin(oe*Math.PI/180),H=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return H<0?0:H>1?1:H}function nr(oe,W,H,K,ae,ve,xe,Te){if(K/=W,ve>=(H/=W)&&xe<K)return oe;if(xe<H||ve>=K)return null;let pe=[];for(let Be of oe){let Je=Be.geometry,Ue=Be.type,st=ae===0?Be.minX:Be.minY,zt=ae===0?Be.maxX:Be.maxY;if(st>=H&&zt<K){pe.push(Be);continue}if(zt<H||st>=K)continue;let Jt=[];if(Ue==="Point"||Ue==="MultiPoint")yr(Je,Jt,H,K,ae);else if(Ue==="LineString")Xt(Je,Jt,H,K,ae,!1,Te.lineMetrics);else if(Ue==="MultiLineString")Pr(Je,Jt,H,K,ae,!1);else if(Ue==="Polygon")Pr(Je,Jt,H,K,ae,!0);else if(Ue==="MultiPolygon")for(let Nr of Je){let cr=[];Pr(Nr,cr,H,K,ae,!0),cr.length&&Jt.push(cr)}if(Jt.length){if(Te.lineMetrics&&Ue==="LineString"){for(let Nr of Jt)pe.push(Qe(Be.id,Ue,Nr,Be.tags));continue}Ue!=="LineString"&&Ue!=="MultiLineString"||(Jt.length===1?(Ue="LineString",Jt=Jt[0]):Ue="MultiLineString"),Ue!=="Point"&&Ue!=="MultiPoint"||(Ue=Jt.length===3?"Point":"MultiPoint"),pe.push(Qe(Be.id,Ue,Jt,Be.tags))}}return pe.length?pe:null}function yr(oe,W,H,K,ae){for(let ve=0;ve<oe.length;ve+=3){let xe=oe[ve+ae];xe>=H&&xe<=K&&nn(W,oe[ve],oe[ve+1],oe[ve+2])}}function Xt(oe,W,H,K,ae,ve,xe){let Te=lr(oe),pe=ae===0?An:Ai,Be,Je,Ue=oe.start;for(let cr=0;cr<oe.length-3;cr+=3){let jr=oe[cr],Ar=oe[cr+1],Jr=oe[cr+2],Kr=oe[cr+3],Er=oe[cr+4],cn=ae===0?jr:Ar,Mn=ae===0?Kr:Er,Zi=!1;xe&&(Be=Math.sqrt(Math.pow(jr-Kr,2)+Math.pow(Ar-Er,2))),cn<H?Mn>H&&(Je=pe(Te,jr,Ar,Kr,Er,H),xe&&(Te.start=Ue+Be*Je)):cn>K?Mn<K&&(Je=pe(Te,jr,Ar,Kr,Er,K),xe&&(Te.start=Ue+Be*Je)):nn(Te,jr,Ar,Jr),Mn<H&&cn>=H&&(Je=pe(Te,jr,Ar,Kr,Er,H),Zi=!0),Mn>K&&cn<=K&&(Je=pe(Te,jr,Ar,Kr,Er,K),Zi=!0),!ve&&Zi&&(xe&&(Te.end=Ue+Be*Je),W.push(Te),Te=lr(oe)),xe&&(Ue+=Be)}let st=oe.length-3,zt=oe[st],Jt=oe[st+1],Nr=ae===0?zt:Jt;Nr>=H&&Nr<=K&&nn(Te,zt,Jt,oe[st+2]),st=Te.length-3,ve&&st>=3&&(Te[st]!==Te[0]||Te[st+1]!==Te[1])&&nn(Te,Te[0],Te[1],Te[2]),Te.length&&W.push(Te)}function lr(oe){let W=[];return W.size=oe.size,W.start=oe.start,W.end=oe.end,W}function Pr(oe,W,H,K,ae,ve){for(let xe of oe)Xt(xe,W,H,K,ae,ve,!1)}function nn(oe,W,H,K){oe.push(W,H,K)}function An(oe,W,H,K,ae,ve){let xe=(ve-W)/(K-W);return nn(oe,ve,H+(ae-H)*xe,1),xe}function Ai(oe,W,H,K,ae,ve){let xe=(ve-H)/(ae-H);return nn(oe,W+(K-W)*xe,ve,1),xe}function nt(oe,W){let H=[];for(let K=0;K<oe.length;K++){let ae=oe[K],ve=ae.type,xe;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")xe=ti(ae.geometry,W);else if(ve==="MultiLineString"||ve==="Polygon"){xe=[];for(let Te of ae.geometry)xe.push(ti(Te,W))}else if(ve==="MultiPolygon"){xe=[];for(let Te of ae.geometry){let pe=[];for(let Be of Te)pe.push(ti(Be,W));xe.push(pe)}}H.push(Qe(ae.id,ve,xe,ae.tags))}return H}function ti(oe,W){let H=[];H.size=oe.size,oe.start!==void 0&&(H.start=oe.start,H.end=oe.end);for(let K=0;K<oe.length;K+=3)H.push(oe[K]+W,oe[K+1],oe[K+2]);return H}function Cn(oe,W){if(oe.transformed)return oe;let H=1<<oe.z,K=oe.x,ae=oe.y;for(let ve of oe.features){let xe=ve.geometry,Te=ve.type;if(ve.geometry=[],Te===1)for(let pe=0;pe<xe.length;pe+=2)ve.geometry.push(di(xe[pe],xe[pe+1],W,H,K,ae));else for(let pe=0;pe<xe.length;pe++){let Be=[];for(let Je=0;Je<xe[pe].length;Je+=2)Be.push(di(xe[pe][Je],xe[pe][Je+1],W,H,K,ae));ve.geometry.push(Be)}}return oe.transformed=!0,oe}function di(oe,W,H,K,ae,ve){return[Math.round(H*(oe*K-ae)),Math.round(H*(W*K-ve))]}function Ci(oe,W,H,K,ae){let ve=W===ae.maxZoom?0:ae.tolerance/((1<<W)*ae.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:oe.length,source:null,x:H,y:K,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Te of oe)ct(xe,Te,ve,ae);return xe}function ct(oe,W,H,K){let ae=W.geometry,ve=W.type,xe=[];if(oe.minX=Math.min(oe.minX,W.minX),oe.minY=Math.min(oe.minY,W.minY),oe.maxX=Math.max(oe.maxX,W.maxX),oe.maxY=Math.max(oe.maxY,W.maxY),ve==="Point"||ve==="MultiPoint")for(let Te=0;Te<ae.length;Te+=3)xe.push(ae[Te],ae[Te+1]),oe.numPoints++,oe.numSimplified++;else if(ve==="LineString")mr(xe,ae,oe,H,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let Te=0;Te<ae.length;Te++)mr(xe,ae[Te],oe,H,ve==="Polygon",Te===0);else if(ve==="MultiPolygon")for(let Te=0;Te<ae.length;Te++){let pe=ae[Te];for(let Be=0;Be<pe.length;Be++)mr(xe,pe[Be],oe,H,!0,Be===0)}if(xe.length){let Te=W.tags||null;if(ve==="LineString"&&K.lineMetrics){Te={};for(let Be in W.tags)Te[Be]=W.tags[Be];Te.mapbox_clip_start=ae.start/ae.size,Te.mapbox_clip_end=ae.end/ae.size}let pe={geometry:xe,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:Te};W.id!==null&&(pe.id=W.id),oe.features.push(pe)}}function mr(oe,W,H,K,ae,ve){let xe=K*K;if(K>0&&W.size<(ae?xe:K))return void(H.numPoints+=W.length/3);let Te=[];for(let pe=0;pe<W.length;pe+=3)(K===0||W[pe+2]>xe)&&(H.numSimplified++,Te.push(W[pe],W[pe+1])),H.numPoints++;ae&&function(pe,Be){let Je=0;for(let Ue=0,st=pe.length,zt=st-2;Ue<st;zt=Ue,Ue+=2)Je+=(pe[Ue]-pe[zt])*(pe[Ue+1]+pe[zt+1]);if(Je>0===Be)for(let Ue=0,st=pe.length;Ue<st/2;Ue+=2){let zt=pe[Ue],Jt=pe[Ue+1];pe[Ue]=pe[st-2-Ue],pe[Ue+1]=pe[st-1-Ue],pe[st-2-Ue]=zt,pe[st-1-Ue]=Jt}}(Te,ve),oe.push(Te)}let jt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Mi{constructor(W,H){let K=(H=this.options=function(ve,xe){for(let Te in xe)ve[Te]=xe[Te];return ve}(Object.create(jt),H)).debug;if(K&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");let ae=function(ve,xe){let Te=[];if(ve.type==="FeatureCollection")for(let pe=0;pe<ve.features.length;pe++)Gt(Te,ve.features[pe],xe,pe);else Gt(Te,ve.type==="Feature"?ve:{geometry:ve},xe);return Te}(W,H);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ae=function(ve,xe){let Te=xe.buffer/xe.extent,pe=ve,Be=nr(ve,1,-1-Te,Te,0,-1,2,xe),Je=nr(ve,1,1-Te,2+Te,0,-1,2,xe);return(Be||Je)&&(pe=nr(ve,1,-Te,1+Te,0,-1,2,xe)||[],Be&&(pe=nt(Be,1).concat(pe)),Je&&(pe=pe.concat(nt(Je,-1)))),pe}(ae,H),ae.length&&this.splitTile(ae,0,0,0),K&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(W,H,K,ae,ve,xe,Te){let pe=[W,H,K,ae],Be=this.options,Je=Be.debug;for(;pe.length;){ae=pe.pop(),K=pe.pop(),H=pe.pop(),W=pe.pop();let Ue=1<<H,st=dn(H,K,ae),zt=this.tiles[st];if(!zt&&(Je>1&&console.time("creation"),zt=this.tiles[st]=Ci(W,H,K,ae,Be),this.tileCoords.push({z:H,x:K,y:ae}),Je)){Je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,K,ae,zt.numFeatures,zt.numPoints,zt.numSimplified),console.timeEnd("creation"));let Zi=`z${H}`;this.stats[Zi]=(this.stats[Zi]||0)+1,this.total++}if(zt.source=W,ve==null){if(H===Be.indexMaxZoom||zt.numPoints<=Be.indexMaxPoints)continue}else{if(H===Be.maxZoom||H===ve)continue;if(ve!=null){let Zi=ve-H;if(K!==xe>>Zi||ae!==Te>>Zi)continue}}if(zt.source=null,W.length===0)continue;Je>1&&console.time("clipping");let Jt=.5*Be.buffer/Be.extent,Nr=.5-Jt,cr=.5+Jt,jr=1+Jt,Ar=null,Jr=null,Kr=null,Er=null,cn=nr(W,Ue,K-Jt,K+cr,0,zt.minX,zt.maxX,Be),Mn=nr(W,Ue,K+Nr,K+jr,0,zt.minX,zt.maxX,Be);W=null,cn&&(Ar=nr(cn,Ue,ae-Jt,ae+cr,1,zt.minY,zt.maxY,Be),Jr=nr(cn,Ue,ae+Nr,ae+jr,1,zt.minY,zt.maxY,Be),cn=null),Mn&&(Kr=nr(Mn,Ue,ae-Jt,ae+cr,1,zt.minY,zt.maxY,Be),Er=nr(Mn,Ue,ae+Nr,ae+jr,1,zt.minY,zt.maxY,Be),Mn=null),Je>1&&console.timeEnd("clipping"),pe.push(Ar||[],H+1,2*K,2*ae),pe.push(Jr||[],H+1,2*K,2*ae+1),pe.push(Kr||[],H+1,2*K+1,2*ae),pe.push(Er||[],H+1,2*K+1,2*ae+1)}}getTile(W,H,K){W=+W,H=+H,K=+K;let ae=this.options,{extent:ve,debug:xe}=ae;if(W<0||W>24)return null;let Te=1<<W,pe=dn(W,H=H+Te&Te-1,K);if(this.tiles[pe])return Cn(this.tiles[pe],ve);xe>1&&console.log("drilling down to z%d-%d-%d",W,H,K);let Be,Je=W,Ue=H,st=K;for(;!Be&&Je>0;)Je--,Ue>>=1,st>>=1,Be=this.tiles[dn(Je,Ue,st)];return Be&&Be.source?(xe>1&&(console.log("found parent tile z%d-%d-%d",Je,Ue,st),console.time("drilling down")),this.splitTile(Be.source,Je,Ue,st,W,H,K),xe>1&&console.timeEnd("drilling down"),this.tiles[pe]?Cn(this.tiles[pe],ve):null):null}}function dn(oe,W,H){return 32*((1<<oe)*H+W)+oe}function Ee(oe,W){return W?oe.properties[W]:oe.id}function Oe(oe,W){if(oe==null)return!0;if(oe.type==="Feature")return Ee(oe,W)!=null;if(oe.type==="FeatureCollection"){let H=new Set;for(let K of oe.features){let ae=Ee(K,W);if(ae==null||H.has(ae))return!1;H.add(ae)}return!0}return!1}function it(oe,W){let H=new Map;if(oe!=null)if(oe.type==="Feature")H.set(Ee(oe,W),oe);else for(let K of oe.features)H.set(Ee(K,W),K);return H}class St extends d{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(W,H){return i._(this,void 0,void 0,function*(){let K=W.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ae=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!ae)return null;let ve=new class{constructor(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.X,this.length=Te.length,this._features=Te}feature(Te){return new class{constructor(pe){this._feature=pe,this.extent=i.X,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))}loadGeometry(){if(this._feature.type===1){let pe=[];for(let Be of this._feature.geometry)pe.push([new i.P(Be[0],Be[1])]);return pe}{let pe=[];for(let Be of this._feature.geometry){let Je=[];for(let Ue of Be)Je.push(new i.P(Ue[0],Ue[1]));pe.push(Je)}return pe}}toGeoJSON(pe,Be,Je){return L.call(this,pe,Be,Je)}}(this._features[Te])}}(ae.features),xe=Ke(ve);return xe.byteOffset===0&&xe.byteLength===xe.buffer.byteLength||(xe=new Uint8Array(xe)),{vectorTile:ve,rawData:xe.buffer}})}loadData(W){return i._(this,void 0,void 0,function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();let K=!!(W&&W.request&&W.request.collectResourceTiming)&&new i.bv(W.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(W,this._pendingRequest),this._geoJSONIndex=W.cluster?new Pe(function({superclusterOptions:xe,clusterProperties:Te}){if(!Te||!xe)return xe;let pe={},Be={},Je={accumulated:null,zoom:0},Ue={properties:null},st=Object.keys(Te);for(let zt of st){let[Jt,Nr]=Te[zt],cr=i.bC(Nr),jr=i.bC(typeof Jt=="string"?[Jt,["accumulated"],["get",zt]]:Jt);pe[zt]=cr.value,Be[zt]=jr.value}return xe.map=zt=>{Ue.properties=zt;let Jt={};for(let Nr of st)Jt[Nr]=pe[Nr].evaluate(Je,Ue);return Jt},xe.reduce=(zt,Jt)=>{Ue.properties=Jt;for(let Nr of st)Je.accumulated=zt[Nr],zt[Nr]=Be[Nr].evaluate(Je,Ue)},xe}(W)).load((yield this._pendingData).features):(ae=yield this._pendingData,new Mi(ae,W.geojsonVtOptions)),this.loaded={};let ve={};if(K){let xe=K.finish();xe&&(ve.resourceTiming={},ve.resourceTiming[W.source]=JSON.parse(JSON.stringify(xe)))}return ve}catch(ve){if(delete this._pendingRequest,i.bB(ve))return{abandoned:!0};throw ve}var ae})}getData(){return i._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(W){let H=this.loaded;return H&&H[W.uid]?super.reloadTile(W):this.loadTile(W)}loadAndProcessGeoJSON(W,H){return i._(this,void 0,void 0,function*(){let K=yield this.loadGeoJSON(W,H);if(delete this._pendingRequest,typeof K!="object")throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(A(K,!0),W.filter){let ae=i.bC(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map(xe=>`${xe.key}: ${xe.message}`).join(", "));K={type:"FeatureCollection",features:K.features.filter(xe=>ae.value.evaluate({zoom:0},xe))}}return K})}loadGeoJSON(W,H){return i._(this,void 0,void 0,function*(){let{promoteId:K}=W;if(W.request){let ae=yield i.h(W.request,H);return this._dataUpdateable=Oe(ae.data,K)?it(ae.data,K):void 0,ae.data}if(typeof W.data=="string")try{let ae=JSON.parse(W.data);return this._dataUpdateable=Oe(ae,K)?it(ae,K):void 0,ae}catch(ae){throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`)}if(!W.dataDiff)throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${W.source}`);return function(ae,ve,xe){var Te,pe,Be,Je;if(ve.removeAll&&ae.clear(),ve.remove)for(let Ue of ve.remove)ae.delete(Ue);if(ve.add)for(let Ue of ve.add){let st=Ee(Ue,xe);st!=null&&ae.set(st,Ue)}if(ve.update)for(let Ue of ve.update){let st=ae.get(Ue.id);if(st==null)continue;let zt=!Ue.removeAllProperties&&(((Te=Ue.removeProperties)===null||Te===void 0?void 0:Te.length)>0||((pe=Ue.addOrUpdateProperties)===null||pe===void 0?void 0:pe.length)>0);if((Ue.newGeometry||Ue.removeAllProperties||zt)&&(st=Object.assign({},st),ae.set(Ue.id,st),zt&&(st.properties=Object.assign({},st.properties))),Ue.newGeometry&&(st.geometry=Ue.newGeometry),Ue.removeAllProperties)st.properties={};else if(((Be=Ue.removeProperties)===null||Be===void 0?void 0:Be.length)>0)for(let Jt of Ue.removeProperties)Object.prototype.hasOwnProperty.call(st.properties,Jt)&&delete st.properties[Jt];if(((Je=Ue.addOrUpdateProperties)===null||Je===void 0?void 0:Je.length)>0)for(let{key:Jt,value:Nr}of Ue.addOrUpdateProperties)st.properties[Jt]=Nr}}(this._dataUpdateable,W.dataDiff,K),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(W){return i._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(W){return this._geoJSONIndex.getClusterExpansionZoom(W.clusterId)}getClusterChildren(W){return this._geoJSONIndex.getChildren(W.clusterId)}getClusterLeaves(W){return this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset)}}class vt{constructor(W){this.self=W,this.actor=new i.F(W),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(H,K)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=K},this.self.addProtocol=i.bi,this.self.removeProtocol=i.bj,this.self.registerRTLTextPlugin=H=>{if(i.bD.isParsed())throw new Error("RTL text plugin already registered.");i.bD.setMethods(H)},this.actor.registerMessageHandler("LDT",(H,K)=>this._getDEMWorkerSource(H,K.source).loadTile(K)),this.actor.registerMessageHandler("RDT",(H,K)=>i._(this,void 0,void 0,function*(){this._getDEMWorkerSource(H,K.source).removeTile(K)})),this.actor.registerMessageHandler("GCEZ",(H,K)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterExpansionZoom(K)})),this.actor.registerMessageHandler("GCC",(H,K)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterChildren(K)})),this.actor.registerMessageHandler("GCL",(H,K)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(H,K.type,K.source).getClusterLeaves(K)})),this.actor.registerMessageHandler("LD",(H,K)=>this._getWorkerSource(H,K.type,K.source).loadData(K)),this.actor.registerMessageHandler("GD",(H,K)=>this._getWorkerSource(H,K.type,K.source).getData()),this.actor.registerMessageHandler("LT",(H,K)=>this._getWorkerSource(H,K.type,K.source).loadTile(K)),this.actor.registerMessageHandler("RT",(H,K)=>this._getWorkerSource(H,K.type,K.source).reloadTile(K)),this.actor.registerMessageHandler("AT",(H,K)=>this._getWorkerSource(H,K.type,K.source).abortTile(K)),this.actor.registerMessageHandler("RMT",(H,K)=>this._getWorkerSource(H,K.type,K.source).removeTile(K)),this.actor.registerMessageHandler("RS",(H,K)=>i._(this,void 0,void 0,function*(){if(!this.workerSources[H]||!this.workerSources[H][K.type]||!this.workerSources[H][K.type][K.source])return;let ae=this.workerSources[H][K.type][K.source];delete this.workerSources[H][K.type][K.source],ae.removeSource!==void 0&&ae.removeSource(K)})),this.actor.registerMessageHandler("RM",H=>i._(this,void 0,void 0,function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H]})),this.actor.registerMessageHandler("SR",(H,K)=>i._(this,void 0,void 0,function*(){this.referrer=K})),this.actor.registerMessageHandler("SRPS",(H,K)=>this._syncRTLPluginState(H,K)),this.actor.registerMessageHandler("IS",(H,K)=>i._(this,void 0,void 0,function*(){this.self.importScripts(K)})),this.actor.registerMessageHandler("SI",(H,K)=>this._setImages(H,K)),this.actor.registerMessageHandler("UL",(H,K)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(H).update(K.layers,K.removedIds)})),this.actor.registerMessageHandler("SL",(H,K)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(H).replace(K)}))}_setImages(W,H){return i._(this,void 0,void 0,function*(){this.availableImages[W]=H;for(let K in this.workerSources[W]){let ae=this.workerSources[W][K];for(let ve in ae)ae[ve].availableImages=H}})}_syncRTLPluginState(W,H){return i._(this,void 0,void 0,function*(){if(i.bD.isParsed())return i.bD.getState();if(H.pluginStatus!=="loading")return i.bD.setState(H),H;let K=H.pluginURL;if(this.self.importScripts(K),i.bD.isParsed()){let ae={pluginStatus:"loaded",pluginURL:K};return i.bD.setState(ae),ae}throw i.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${K}`)})}_getAvailableImages(W){let H=this.availableImages[W];return H||(H=[]),H}_getLayerIndex(W){let H=this.layerIndexes[W];return H||(H=this.layerIndexes[W]=new o),H}_getWorkerSource(W,H,K){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][H]||(this.workerSources[W][H]={}),!this.workerSources[W][H][K]){let ae={sendAsync:(ve,xe)=>(ve.targetMapId=W,this.actor.sendAsync(ve,xe))};switch(H){case"vector":this.workerSources[W][H][K]=new d(ae,this._getLayerIndex(W),this._getAvailableImages(W));break;case"geojson":this.workerSources[W][H][K]=new St(ae,this._getLayerIndex(W),this._getAvailableImages(W));break;default:this.workerSources[W][H][K]=new this.externalWorkerSourceTypes[H](ae,this._getLayerIndex(W),this._getAvailableImages(W));}}return this.workerSources[W][H][K]}_getDEMWorkerSource(W,H){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][H]||(this.demWorkerSources[W][H]=new v),this.demWorkerSources[W][H]}}return i.i(self)&&(self.worker=new vt(self)),vt}),t("index",["exports","./shared"],function(i,o){"use strict";var a="4.7.1";let u,h,d={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:b=>new Promise((s,p)=>{let g=requestAnimationFrame(s);b.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),p(o.c())})}),getImageData(b,s=0){return this.getImageCanvasContext(b).getImageData(-s,-s,b.width+2*s,b.height+2*s)},getImageCanvasContext(b){let s=window.document.createElement("canvas"),p=s.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return s.width=b.width,s.height=b.height,p.drawImage(b,0,0,b.width,b.height),p},resolveURL:b=>(u||(u=document.createElement("a")),u.href=b,u.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(h==null&&(h=matchMedia("(prefers-reduced-motion: reduce)")),h.matches)}};class v{static testProp(s){if(!v.docStyle)return s[0];for(let p=0;p<s.length;p++)if(s[p]in v.docStyle)return s[p];return s[0]}static create(s,p,g){let y=window.document.createElement(s);return p!==void 0&&(y.className=p),g&&g.appendChild(y),y}static createNS(s,p){return window.document.createElementNS(s,p)}static disableDrag(){v.docStyle&&v.selectProp&&(v.userSelect=v.docStyle[v.selectProp],v.docStyle[v.selectProp]="none")}static enableDrag(){v.docStyle&&v.selectProp&&(v.docStyle[v.selectProp]=v.userSelect)}static setTransform(s,p){s.style[v.transformProp]=p}static addEventListener(s,p,g,y={}){s.addEventListener(p,g,"passive"in y?y:y.capture)}static removeEventListener(s,p,g,y={}){s.removeEventListener(p,g,"passive"in y?y:y.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",v.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",v.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",v.suppressClickInternal,!0)},0)}static getScale(s){let p=s.getBoundingClientRect();return{x:p.width/s.offsetWidth||1,y:p.height/s.offsetHeight||1,boundingClientRect:p}}static getPoint(s,p,g){let y=p.boundingClientRect;return new o.P((g.clientX-y.left)/p.x-s.clientLeft,(g.clientY-y.top)/p.y-s.clientTop)}static mousePos(s,p){let g=v.getScale(s);return v.getPoint(s,g,p)}static touchPos(s,p){let g=[],y=v.getScale(s);for(let w=0;w<p.length;w++)g.push(v.getPoint(s,y,p[w]));return g}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}v.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,v.selectProp=v.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),v.transformProp=v.testProp(["transform","WebkitTransform"]);let x={supported:!1,testSupport:function(b){!L&&A&&(q?R(b):S=b)}},S,A,L=!1,q=!1;function R(b){let s=b.createTexture();b.bindTexture(b.TEXTURE_2D,s);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,A),b.isContextLost())return;x.supported=!0}catch(p){}b.deleteTexture(s),L=!0}var D;typeof document!="undefined"&&(A=document.createElement("img"),A.onload=()=>{S&&R(S),S=null,q=!0},A.onerror=()=>{L=!0,S=null},A.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let s,p,g,y;b.resetRequestQueue=()=>{s=[],p=0,g=0,y={}},b.addThrottleControl=N=>{let B=g++;return y[B]=N,B},b.removeThrottleControl=N=>{delete y[N],M()},b.getImage=(N,B,V=!0)=>new Promise((G,X)=>{x.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),s.push({abortController:B,requestParameters:N,supportImageRefresh:V,state:"queued",onError:ne=>{X(ne)},onSuccess:ne=>{G(ne)}}),M()});let w=N=>o._(this,void 0,void 0,function*(){N.state="running";let{requestParameters:B,supportImageRefresh:V,onError:G,onSuccess:X,abortController:ne}=N,se=V===!1&&!o.i(self)&&!o.g(B.url)&&(!B.headers||Object.keys(B.headers).reduce((ge,ye)=>ge&&ye==="accept",!0));p++;let he=se?O(B,ne):o.m(B,ne);try{let ge=yield he;delete N.abortController,N.state="completed",ge.data instanceof HTMLImageElement||o.b(ge.data)?X(ge):ge.data&&X({data:yield(me=ge.data,typeof createImageBitmap=="function"?o.d(me):o.f(me)),cacheControl:ge.cacheControl,expires:ge.expires})}catch(ge){delete N.abortController,G(ge)}finally{p--,M()}var me}),M=()=>{let N=(()=>{for(let B of Object.keys(y))if(y[B]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=p;B<N&&s.length>0;B++){let V=s.shift();V.abortController.signal.aborted?B--:w(V)}},O=(N,B)=>new Promise((V,G)=>{let X=new Image,ne=N.url,se=N.credentials;se&&se==="include"?X.crossOrigin="use-credentials":(se&&se==="same-origin"||!o.s(ne))&&(X.crossOrigin="anonymous"),B.signal.addEventListener("abort",()=>{X.src="",G(o.c())}),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,V({data:X})},X.onerror=()=>{X.onerror=X.onload=null,B.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=ne})}(D||(D={})),D.resetRequestQueue();class k{constructor(s){this._transformRequestFn=s}transformRequest(s,p){return this._transformRequestFn&&this._transformRequestFn(s,p)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function j(b){var s=new o.A(3);return s[0]=b[0],s[1]=b[1],s[2]=b[2],s}var $,ee=function(b,s,p){return b[0]=s[0]-p[0],b[1]=s[1]-p[1],b[2]=s[2]-p[2],b};$=new o.A(3),o.A!=Float32Array&&($[0]=0,$[1]=0,$[2]=0);var J=function(b){var s=b[0],p=b[1];return s*s+p*p};function ie(b){let s=[];if(typeof b=="string")s.push({id:"default",url:b});else if(b&&b.length>0){let p=[];for(let{id:g,url:y}of b){let w=`${g}${y}`;p.indexOf(w)===-1&&(p.push(w),s.push({id:g,url:y}))}}return s}function ue(b,s,p){let g=b.split("?");return g[0]+=`${s}${p}`,g.join("?")}(function(){var b=new o.A(2);o.A!=Float32Array&&(b[0]=0,b[1]=0)})();class le{constructor(s,p,g,y){this.context=s,this.format=g,this.texture=s.gl.createTexture(),this.update(p,y)}update(s,p,g){let{width:y,height:w}=s,M=!(this.size&&this.size[0]===y&&this.size[1]===w||g),{context:O}=this,{gl:N}=O;if(this.useMipmap=!!(p&&p.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!p||p.premultiply!==!1)),M)this.size=[y,w],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||o.b(s)?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,s):N.texImage2D(N.TEXTURE_2D,0,this.format,y,w,0,this.format,N.UNSIGNED_BYTE,s.data);else{let{x:B,y:V}=g||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||o.b(s)?N.texSubImage2D(N.TEXTURE_2D,0,B,V,N.RGBA,N.UNSIGNED_BYTE,s):N.texSubImage2D(N.TEXTURE_2D,0,B,V,y,w,N.RGBA,N.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D)}bind(s,p,g){let{context:y}=this,{gl:w}=y;w.bindTexture(w.TEXTURE_2D,this.texture),g!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=w.LINEAR),s!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,s),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,g||s),this.filter=s),p!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,p),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function _e(b){let{userImage:s}=b;return!!(s&&s.render&&s.render())&&(b.data.replace(new Uint8Array(s.data.buffer)),!0)}class Re extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(let{ids:p,promiseResolve:g}of this.requestors)g(this._getImagesForIds(p));this.requestors=[]}}getImage(s){let p=this.images[s];if(p&&!p.data&&p.spriteData){let g=p.spriteData;p.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),p.spriteData=null}return p}addImage(s,p){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,p)&&(this.images[s]=p)}_validate(s,p){let g=!0,y=p.data||p.spriteData;return this._validateStretch(p.stretchX,y&&y.width)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(p.stretchY,y&&y.height)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(p.content,p)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,p){if(!s)return!0;let g=0;for(let y of s){if(y[0]<g||y[1]<y[0]||p<y[1])return!1;g=y[1]}return!0}_validateContent(s,p){if(!s)return!0;if(s.length!==4)return!1;let g=p.spriteData,y=g&&g.width||p.data.width,w=g&&g.height||p.data.height;return!(s[0]<0||y<s[0]||s[1]<0||w<s[1]||s[2]<0||y<s[2]||s[3]<0||w<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,p,g=!0){let y=this.getImage(s);if(g&&(y.data.width!==p.data.width||y.data.height!==p.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=y.version+1,this.images[s]=p,this.updatedImages[s]=!0}removeImage(s){let p=this.images[s];delete this.images[s],delete this.patterns[s],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((p,g)=>{let y=!0;if(!this.isLoaded())for(let w of s)this.images[w]||(y=!1);this.isLoaded()||y?p(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:p})})}_getImagesForIds(s){let p={};for(let g of s){let y=this.getImage(g);y||(this.fire(new o.k("styleimagemissing",{id:g})),y=this.getImage(g)),y?p[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){let{width:s,height:p}=this.atlasImage;return{width:s,height:p}}getPattern(s){let p=this.patterns[s],g=this.getImage(s);if(!g)return null;if(p&&p.position.version===g.version)return p.position;if(p)p.position.version=g.version;else{let y={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new o.I(y,g);this.patterns[s]={bin:y,position:w}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){let p=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new le(s,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){let s=[];for(let w in this.patterns)s.push(this.patterns[w].bin);let{w:p,h:g}=o.p(s),y=this.atlasImage;y.resize({width:p||1,height:g||1});for(let w in this.patterns){let{bin:M}=this.patterns[w],O=M.x+1,N=M.y+1,B=this.getImage(w).data,V=B.width,G=B.height;o.R.copy(B,y,{x:0,y:0},{x:O,y:N},{width:V,height:G}),o.R.copy(B,y,{x:0,y:G-1},{x:O,y:N-1},{width:V,height:1}),o.R.copy(B,y,{x:0,y:0},{x:O,y:N+G},{width:V,height:1}),o.R.copy(B,y,{x:V-1,y:0},{x:O-1,y:N},{width:1,height:G}),o.R.copy(B,y,{x:0,y:0},{x:O+V,y:N},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(let p of s){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;let g=this.getImage(p);g||o.w(`Image with ID: "${p}" was not found`),_e(g)&&this.updateImage(p,g)}}}let ze=1e20;function qe(b,s,p,g,y,w,M,O,N){for(let B=s;B<s+g;B++)Ve(b,p*w+B,w,y,M,O,N);for(let B=p;B<p+y;B++)Ve(b,B*w+s,1,g,M,O,N)}function Ve(b,s,p,g,y,w,M){w[0]=0,M[0]=-ze,M[1]=ze,y[0]=b[s];for(let O=1,N=0,B=0;O<g;O++){y[O]=b[s+O*p];let V=O*O;do{let G=w[N];B=(y[O]-y[G]+V-G*G)/(O-G)/2}while(B<=M[N]&&--N>-1);N++,w[N]=O,M[N]=B,M[N+1]=ze}for(let O=0,N=0;O<g;O++){for(;M[N+1]<O;)N++;let B=w[N],V=O-B;b[s+O*p]=y[B]+V*V}}class Ke{constructor(s,p){this.requestManager=s,this.localIdeographFontFamily=p,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return o._(this,void 0,void 0,function*(){let p=[];for(let w in s)for(let M of s[w])p.push(this._getAndCacheGlyphsPromise(w,M));let g=yield Promise.all(p),y={};for(let{stack:w,id:M,glyph:O}of g)y[w]||(y[w]={}),y[w][M]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return y})}_getAndCacheGlyphsPromise(s,p){return o._(this,void 0,void 0,function*(){let g=this.entries[s];g||(g=this.entries[s]={glyphs:{},requests:{},ranges:{}});let y=g.glyphs[p];if(y!==void 0)return{stack:s,id:p,glyph:y};if(y=this._tinySDF(g,s,p),y)return g.glyphs[p]=y,{stack:s,id:p,glyph:y};let w=Math.floor(p/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[w])return{stack:s,id:p,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[w]){let O=Ke.loadGlyphRange(s,w,this.url,this.requestManager);g.requests[w]=O}let M=yield g.requests[w];for(let O in M)this._doesCharSupportLocalGlyph(+O)||(g.glyphs[+O]=M[+O]);return g.ranges[w]=!0,{stack:s,id:p,glyph:M[p]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))}_tinySDF(s,p,g){let y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let w=s.tinySDF;if(!w){let O="400";/bold/i.test(p)?O="900":/medium/i.test(p)?O="500":/light/i.test(p)&&(O="200"),w=s.tinySDF=new Ke.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:O})}let M=w.draw(String.fromCharCode(g));return{id:g,bitmap:new o.o({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ke.loadGlyphRange=function(b,s,p,g){return o._(this,void 0,void 0,function*(){let y=256*s,w=y+255,M=g.transformRequest(p.replace("{fontstack}",b).replace("{range}",`${y}-${w}`),"Glyphs"),O=yield o.l(M,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${s}, ${y}-${w}`);let N={};for(let B of o.n(O.data))N[B.id]=B;return N})},Ke.TinySDF=class{constructor({fontSize:b=24,buffer:s=3,radius:p=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:w="normal",fontStyle:M="normal"}={}){this.buffer=s,this.cutoff=g,this.radius=p;let O=this.size=b+4*s,N=this._createCanvas(O),B=this.ctx=N.getContext("2d",{willReadFrequently:!0});B.font=`${M} ${w} ${b}px ${y}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O)}_createCanvas(b){let s=document.createElement("canvas");return s.width=s.height=b,s}draw(b){let{width:s,actualBoundingBoxAscent:p,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:w}=this.ctx.measureText(b),M=Math.ceil(p),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-y))),N=Math.min(this.size-this.buffer,M+Math.ceil(g)),B=O+2*this.buffer,V=N+2*this.buffer,G=Math.max(B*V,0),X=new Uint8ClampedArray(G),ne={data:X,width:B,height:V,glyphWidth:O,glyphHeight:N,glyphTop:M,glyphLeft:0,glyphAdvance:s};if(O===0||N===0)return ne;let{ctx:se,buffer:he,gridInner:me,gridOuter:ge}=this;se.clearRect(he,he,O,N),se.fillText(b,he,he+M);let ye=se.getImageData(he,he,O,N);ge.fill(ze,0,G),me.fill(0,0,G);for(let ce=0;ce<N;ce++)for(let Ae=0;Ae<O;Ae++){let De=ye.data[4*(ce*O+Ae)+3]/255;if(De===0)continue;let Fe=(ce+he)*B+Ae+he;if(De===1)ge[Fe]=0,me[Fe]=ze;else{let et=.5-De;ge[Fe]=et>0?et*et:0,me[Fe]=et<0?et*et:0}}qe(ge,0,0,B,V,B,this.f,this.v,this.z),qe(me,he,he,O,N,B,this.f,this.v,this.z);for(let ce=0;ce<G;ce++){let Ae=Math.sqrt(ge[ce])-Math.sqrt(me[ce]);X[ce]=Math.round(255-255*(Ae/this.radius+this.cutoff))}return ne}};class Ce{constructor(){this.specification=o.v.light.position}possiblyEvaluate(s,p){return o.x(s.expression.evaluate(p))}interpolate(s,p,g){return{x:o.y.number(s.x,p.x,g),y:o.y.number(s.y,p.y,g),z:o.y.number(s.z,p.z,g)}}}let Se;class Ie extends o.E{constructor(s){super(),Se=Se||new o.q({anchor:new o.D(o.v.light.anchor),position:new Ce,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(Se),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,p={}){if(!this._validate(o.r,s,p))for(let g in s){let y=s[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,g){return(!g||g.validate!==!1)&&o.t(this,s.call(o.u,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let Ge=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class $e extends o.E{constructor(s){super(),this._transitionable=new o.T(Ge),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(s,p={}){if(!this._validate(o.B,s,p)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let g in s){let y=s[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,p,g={}){return(g==null?void 0:g.validate)!==!1&&o.t(this,s.call(o.u,o.e({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Ze{constructor(s,p){this.width=s,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,p){let g=s.join(",")+String(p);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(s,p)),this.dashEntry[g]}getDashRanges(s,p,g){let y=[],w=s.length%2==1?-s[s.length-1]*g:0,M=s[0]*g,O=!0;y.push({left:w,right:M,isDash:O,zeroLength:s[0]===0});let N=s[0];for(let B=1;B<s.length;B++){O=!O;let V=s[B];w=N*g,N+=V,M=N*g,y.push({left:w,right:M,isDash:O,zeroLength:V===0})}return y}addRoundDash(s,p,g){let y=p/2;for(let w=-g;w<=g;w++){let M=this.width*(this.nextRow+g+w),O=0,N=s[O];for(let B=0;B<this.width;B++){B/N.right>1&&(N=s[++O]);let V=Math.abs(B-N.left),G=Math.abs(B-N.right),X=Math.min(V,G),ne,se=w/g*(y+1);if(N.isDash){let he=y-Math.abs(se);ne=Math.sqrt(X*X+he*he)}else ne=y-Math.sqrt(X*X+se*se);this.data[M+B]=Math.max(0,Math.min(255,ne+128))}}}addRegularDash(s){for(let O=s.length-1;O>=0;--O){let N=s[O],B=s[O+1];N.zeroLength?s.splice(O,1):B&&B.isDash===N.isDash&&(B.left=N.left,s.splice(O,1))}let p=s[0],g=s[s.length-1];p.isDash===g.isDash&&(p.left=g.left-this.width,g.right=p.right+this.width);let y=this.width*this.nextRow,w=0,M=s[w];for(let O=0;O<this.width;O++){O/M.right>1&&(M=s[++w]);let N=Math.abs(O-M.left),B=Math.abs(O-M.right),V=Math.min(N,B);this.data[y+O]=Math.max(0,Math.min(255,(M.isDash?V:-V)+128))}}addDash(s,p){let g=p?7:0,y=2*g+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let w=0;for(let O=0;O<s.length;O++)w+=s[O];if(w!==0){let O=this.width/w,N=this.getDashRanges(s,this.width,O);p?this.addRoundDash(N,O,g):this.addRegularDash(N)}let M={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:w};return this.nextRow+=y,this.dirty=!0,M}bind(s){let p=s.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}let Pe="maplibre_preloaded_worker_pool";class at{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<at.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Pe]}numActive(){return Object.keys(this.active).length}}let wt=Math.floor(d.hardwareConcurrency/2),Le,Ye;function je(){return Le||(Le=new at),Le}at.workerCount=o.C(globalThis)?Math.max(Math.min(wt,3),1):1;class We{constructor(s,p){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=p;let g=this.workerPool.acquire(p);for(let y=0;y<g.length;y++){let w=new o.F(g[y],p);w.name=`Worker ${y}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,p){let g=[];for(let y of this.actors)g.push(y.sendAsync({type:s,data:p}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,p){for(let g of this.actors)g.registerMessageHandler(s,p)}}function tt(){return Ye||(Ye=new We(je(),o.G),Ye.registerMessageHandler("GR",(b,s,p)=>o.m(s,p))),Ye}function Qe(b,s){let p=o.H();return o.J(p,p,[1,1,0]),o.K(p,p,[.5*b.width,.5*b.height,1]),o.L(p,p,b.calculatePosMatrix(s.toUnwrapped()))}function kt(b,s,p,g,y,w){let M=function(G,X,ne){if(G)for(let se of G){let he=X[se];if(he&&he.source===ne&&he.type==="fill-extrusion")return!0}else for(let se in X){let he=X[se];if(he.source===ne&&he.type==="fill-extrusion")return!0}return!1}(y&&y.layers,s,b.id),O=w.maxPitchScaleFactor(),N=b.tilesIn(g,O,M);N.sort(Gt);let B=[];for(let G of N)B.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(s,p,b._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,y,w,O,Qe(b.transform,G.tileID))});let V=function(G){let X={},ne={};for(let se of G){let he=se.queryResults,me=se.wrappedTileID,ge=ne[me]=ne[me]||{};for(let ye in he){let ce=he[ye],Ae=ge[ye]=ge[ye]||{},De=X[ye]=X[ye]||[];for(let Fe of ce)Ae[Fe.featureIndex]||(Ae[Fe.featureIndex]=!0,De.push(Fe))}}return X}(B);for(let G in V)V[G].forEach(X=>{let ne=X.feature,se=b.getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=se});return V}function Gt(b,s){let p=b.tileID,g=s.tileID;return p.overscaledZ-g.overscaledZ||p.canonical.y-g.canonical.y||p.wrap-g.wrap||p.canonical.x-g.canonical.x}function bt(b,s,p){return o._(this,void 0,void 0,function*(){let g=b;if(b.url?g=(yield o.h(s.transformRequest(b.url,"Source"),p)).data:yield d.frameAsync(p),!g)return null;let y=o.M(o.e(g,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(y.vectorLayerIds=g.vector_layers.map(w=>w.id)),y})}class be{constructor(s,p){s&&(p?this.setSouthWest(s).setNorthEast(p):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof o.N?new o.N(s.lng,s.lat):o.N.convert(s),this}setSouthWest(s){return this._sw=s instanceof o.N?new o.N(s.lng,s.lat):o.N.convert(s),this}extend(s){let p=this._sw,g=this._ne,y,w;if(s instanceof o.N)y=s,w=s;else{if(!(s instanceof be))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(be.convert(s)):this.extend(o.N.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(o.N.convert(s)):this;if(y=s._sw,w=s._ne,!y||!w)return this}return p||g?(p.lng=Math.min(y.lng,p.lng),p.lat=Math.min(y.lat,p.lat),g.lng=Math.max(w.lng,g.lng),g.lat=Math.max(w.lat,g.lat)):(this._sw=new o.N(y.lng,y.lat),this._ne=new o.N(w.lng,w.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){let{lng:p,lat:g}=o.N.convert(s),y=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(s){return s instanceof be?s:s&&new be(s)}static fromLngLat(s,p=0){let g=360*p/40075017,y=g/Math.cos(Math.PI/180*s.lat);return new be(new o.N(s.lng-y,s.lat-g),new o.N(s.lng+y,s.lat+g))}adjustAntiMeridian(){let s=new o.N(this._sw.lng,this._sw.lat),p=new o.N(this._ne.lng,this._ne.lat);return new be(s,s.lng>p.lng?new o.N(p.lng+360,p.lat):p)}}class Yt{constructor(s,p,g){this.bounds=be.convert(this.validateBounds(s)),this.minzoom=p||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){let p=Math.pow(2,s.z),g=Math.floor(o.O(this.bounds.getWest())*p),y=Math.floor(o.Q(this.bounds.getNorth())*p),w=Math.ceil(o.O(this.bounds.getEast())*p),M=Math.ceil(o.Q(this.bounds.getSouth())*p);return s.x>=g&&s.x<w&&s.y>=y&&s.y<M}}class Ut extends o.E{constructor(s,p,g,y){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(p,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield bt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(o.e(this,s),s.bounds&&(this.tileBounds=new Yt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new o.j(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(s){return o._(this,void 0,void 0,function*(){let p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((w,M)=>{s.reloadPromise={resolve:w,reject:M}})}else s.actor=this.dispatcher.getActor(),y="LT";s.abortController=new AbortController;try{let w=yield s.actor.sendAsync({type:y,data:g},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,w)}catch(w){if(delete s.abortController,s.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,p){if(p&&p.resourceTiming&&(s.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&s.setExpiryData(p),s.loadVectorData(p,this.map.painter),s.reloadPromise){let g=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(g.resolve).catch(g.reject)}}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends o.E{constructor(s,p,g,y){super(),this.id=s,this.dispatcher=g,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},p),o.e(this,o.M(p,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield bt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(o.e(this,s),s.bounds&&(this.tileBounds=new Yt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new o.j(s))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return o.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return o._(this,void 0,void 0,function*(){let p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{let g=yield D.getImage(this.map._requestManager.transformRequest(p,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&s.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});let y=this.map.painter.context,w=y.gl,M=g.data;s.texture=this.map.painter.getTileTexture(M.width),s.texture?s.texture.update(M,{useMipmap:!0}):(s.texture=new le(y,M,w.RGBA,{useMipmap:!0}),s.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(g){if(delete s.abortController,s.aborted)s.state="unloaded";else if(g)throw s.state="errored",g}})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class nr extends Vt{constructor(s,p,g,y){super(s,p,g,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(s){return o._(this,void 0,void 0,function*(){let p=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{let y=yield D.getImage(g,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(y&&y.data){let w=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&s.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});let M=o.b(w)&&o.U()?w:yield this.readImageNow(w),O={type:this.type,uid:s.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();let N=yield s.actor.sendAsync({type:"LDT",data:O});s.dem=N,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(y){if(delete s.abortController,s.aborted)s.state="unloaded";else if(y)throw s.state="errored",y}})}readImageNow(s){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&o.V()){let p=s.width+2,g=s.height+2;try{return new o.R({width:p,height:g},(yield o.W(s,-1,-1,p,g)))}catch(y){}}return d.getImageData(s,1)})}_getNeighboringTiles(s){let p=s.canonical,g=Math.pow(2,p.z),y=(p.x-1+g)%g,w=p.x===0?s.wrap-1:s.wrap,M=(p.x+1+g)%g,O=p.x+1===g?s.wrap+1:s.wrap,N={};return N[new o.S(s.overscaledZ,w,p.z,y,p.y).key]={backfilled:!1},N[new o.S(s.overscaledZ,O,p.z,M,p.y).key]={backfilled:!1},p.y>0&&(N[new o.S(s.overscaledZ,w,p.z,y,p.y-1).key]={backfilled:!1},N[new o.S(s.overscaledZ,s.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},N[new o.S(s.overscaledZ,O,p.z,M,p.y-1).key]={backfilled:!1}),p.y+1<g&&(N[new o.S(s.overscaledZ,w,p.z,y,p.y+1).key]={backfilled:!1},N[new o.S(s.overscaledZ,s.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},N[new o.S(s.overscaledZ,O,p.z,M,p.y+1).key]={backfilled:!1}),N}unloadTile(s){return o._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class yr extends o.E{constructor(s,p,g,y){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(y),this._data=p.data,this._options=o.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;let w=o.X/this.tileSize;p.clusterMaxZoom!==void 0&&this.maxzoom<=p.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${p.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*w,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*w,extent:o.X,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:o.X,radius:(p.clusterRadius||50)*w,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return o._(this,void 0,void 0,function*(){let s=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,p,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:p,offset:g}})}_updateWorkerData(s){return o._(this,void 0,void 0,function*(){let p=o.e({type:this.type},this.workerOptions);s?p.dataDiff=s:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(d.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{let g=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let y=null;g.resourceTiming&&g.resourceTiming[this.id]&&(y=g.resourceTiming[this.id].slice(0));let w={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&o.e(w,{resourceTiming:y}),this.fire(new o.k("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},w),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(s){return o._(this,void 0,void 0,function*(){let p=s.actor?"RT":"LT";s.actor=this.actor;let g={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.abortController=new AbortController;let y=yield this.actor.sendAsync({type:p,data:g},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(y,this.map.painter,p==="RT")})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Xt=o.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class lr extends o.E{constructor(s,p,g,y){super(),this.id=s,this.dispatcher=g,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=p}load(s){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let p=yield D.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,s&&(this.coordinates=s),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new o.j(p))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;let p=s.map(o.Z.fromLngLat);this.tileID=function(y){let w=1/0,M=1/0,O=-1/0,N=-1/0;for(let X of y)w=Math.min(w,X.x),M=Math.min(M,X.y),O=Math.max(O,X.x),N=Math.max(N,X.y);let B=Math.max(O-w,N-M),V=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),G=Math.pow(2,V);return new o.a1(V,Math.floor((w+O)/2*G),Math.floor((M+N)/2*G))}(p),this.minzoom=this.maxzoom=this.tileID.z;let g=p.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new o.$,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,o.X,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,o.X),this._boundsArray.emplaceBack(g[2].x,g[2].y,o.X,o.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let s=this.map.painter.context,p=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new le(s,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Pr extends lr{constructor(s,p,g,y){super(s,p,g,y),this.roundZoom=!0,this.type="video",this.options=p}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;let s=this.options;this.urls=[];for(let p of s.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{let p=yield o.a3(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new o.j(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){let p=this.video.seekable;s<p.start(0)||s>p.end(0)?this.fire(new o.j(new o.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let s=this.map.painter.context,p=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new le(s,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class nn extends lr{constructor(s,p,g,y){super(s,p,g,y),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(M=>typeof M!="number"))||this.fire(new o.j(new o.a2(`sources.${s}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new o.j(new o.a2(`sources.${s}`,null,"missing required property \"coordinates\""))),p.animate&&typeof p.animate!="boolean"&&this.fire(new o.j(new o.a2(`sources.${s}`,null,"optional \"animate\" property must be a boolean value"))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a2(`sources.${s}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new o.j(new o.a2(`sources.${s}`,null,"missing required property \"canvas\""))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let p=this.map.painter.context,g=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Xt.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new le(p,this.canvas,g.RGBA,{premultiply:!0});let y=!1;for(let w in this.tiles){let M=this.tiles[w];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,y=!0)}y&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}let An={},Ai=b=>{switch(b){case"geojson":return yr;case"image":return lr;case"raster":return Vt;case"raster-dem":return nr;case"vector":return Ut;case"video":return Pr;case"canvas":return nn;}return An[b]},nt="RTLPluginLoaded";class ti extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=tt()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return o._(this,arguments,void 0,function*(p,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=d.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(nt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Cn=null;function di(){return Cn||(Cn=new ti),Cn}class Ci{constructor(s,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=o.a4(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){let p=s+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,p,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(y,w){let M={};if(!w)return M;for(let O of y){let N=O.layerIds.map(B=>w.getLayer(B)).filter(Boolean);if(N.length!==0){O.layers=N,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(B=>N.filter(V=>V.id===B)[0]));for(let B of N)M[B.id]=O}}return M}(s.buckets,p.style),this.hasSymbolBuckets=!1;for(let y in this.buckets){let w=this.buckets[y];if(w instanceof o.a6){if(this.hasSymbolBuckets=!0,!g)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let y in this.buckets){let w=this.buckets[y];if(w instanceof o.a6&&w.hasRTLText){this.hasRTLText=!0,di().lazyLoad();break}}this.queryPadding=0;for(let y in this.buckets){let w=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(y).queryRadius(w))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(let s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(let g in this.buckets){let y=this.buckets[g];y.uploadPending()&&y.upload(s)}let p=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new le(s,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new le(s,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,p,g,y,w,M,O,N,B,V){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:w,scale:M,tileSize:this.tileSize,pixelPosMatrix:V,transform:N,params:O,queryPadding:this.queryPadding*B},s,p,g):{}}querySourceFeatures(s,p){let g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;let y=g.loadVTLayers(),w=p&&p.sourceLayer?p.sourceLayer:"",M=y._geojsonTileLayer||y[w];if(!M)return;let O=o.a7(p&&p.filter),{z:N,x:B,y:V}=this.tileID.canonical,G={z:N,x:B,y:V};for(let X=0;X<M.length;X++){let ne=M.feature(X);if(O.needGeometry){let me=o.a8(ne,!0);if(!O.filter(new o.z(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!O.filter(new o.z(this.tileID.overscaledZ),ne))continue;let se=g.getId(ne,w),he=new o.a9(ne,N,B,V,se);he.tile=G,s.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){let p=this.expirationTime;if(s.cacheControl){let g=o.aa(s.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){let g=Date.now(),y=!1;if(this.expirationTime>g)y=!1;else if(p){if(this.expirationTime<p)y=!0;else{let w=this.expirationTime-p;w?this.expirationTime=g+Math.max(w,3e4):y=!0}}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;let g=this.latestFeatureIndex.loadVTLayers();for(let y in this.buckets){if(!p.style.hasLayer(y))continue;let w=this.buckets[y],M=w.layers[0].sourceLayer||"_geojsonTileLayer",O=g[M],N=s[M];if(!O||!N||Object.keys(N).length===0)continue;w.update(N,O,this.imageAtlas&&this.imageAtlas.patternPositions||{});let B=p&&p.style&&p.style.getLayer(y);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<d.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=d.now()+s}setDependencies(s,p){let g={};for(let y of p)g[y]=!0;this.dependencies[s]=g}hasDependency(s,p){for(let g of s){let y=this.dependencies[g];if(y){for(let w of p)if(y[w])return!0}}return!1}}class ct{constructor(s,p){this.max=s,this.onRemove=p,this.reset()}reset(){for(let s in this.data)for(let p of this.data[s])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(s,p,g){let y=s.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);let w={value:p,timeout:void 0};if(g!==void 0&&(w.timeout=setTimeout(()=>{this.remove(s,w)},g)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){let M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){let p=this.data[s].shift();return p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),p.value}getByKey(s){let p=this.data[s];return p?p[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,p){if(!this.has(s))return this;let g=s.wrapped().key,y=p===void 0?0:this.data[g].indexOf(p),w=this.data[g][y];return this.data[g].splice(y,1),w.timeout&&clearTimeout(w.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(w.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){let p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(s){let p=[];for(let g in this.data)for(let y of this.data[g])s(y.value)||p.push(y);for(let g of p)this.remove(g.value.tileID,g)}}class mr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,p,g){let y=String(p);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][y]=this.stateChanges[s][y]||{},o.e(this.stateChanges[s][y],g),this.deletedStates[s]===null){this.deletedStates[s]={};for(let w in this.state[s])w!==y&&(this.deletedStates[s][w]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][y]===null){this.deletedStates[s][y]={};for(let w in this.state[s][y])g[w]||(this.deletedStates[s][y][w]=null)}else for(let w in g)this.deletedStates[s]&&this.deletedStates[s][y]&&this.deletedStates[s][y][w]===null&&delete this.deletedStates[s][y][w]}removeFeatureState(s,p,g){if(this.deletedStates[s]===null)return;let y=String(p);if(this.deletedStates[s]=this.deletedStates[s]||{},g&&p!==void 0)this.deletedStates[s][y]!==null&&(this.deletedStates[s][y]=this.deletedStates[s][y]||{},this.deletedStates[s][y][g]=null);else if(p!==void 0){if(this.stateChanges[s]&&this.stateChanges[s][y])for(g in this.deletedStates[s][y]={},this.stateChanges[s][y])this.deletedStates[s][y][g]=null;else this.deletedStates[s][y]=null;}else this.deletedStates[s]=null}getState(s,p){let g=String(p),y=o.e({},(this.state[s]||{})[g],(this.stateChanges[s]||{})[g]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){let w=this.deletedStates[s][p];if(w===null)return{};for(let M in w)delete y[M]}return y}initializeTileState(s,p){s.setFeatureState(this.state,p)}coalesceChanges(s,p){let g={};for(let y in this.stateChanges){this.state[y]=this.state[y]||{};let w={};for(let M in this.stateChanges[y])this.state[y][M]||(this.state[y][M]={}),o.e(this.state[y][M],this.stateChanges[y][M]),w[M]=this.state[y][M];g[y]=w}for(let y in this.deletedStates){this.state[y]=this.state[y]||{};let w={};if(this.deletedStates[y]===null)for(let M in this.state[y])w[M]={},this.state[y][M]={};else for(let M in this.deletedStates[y]){if(this.deletedStates[y][M]===null)this.state[y][M]={};else for(let O of Object.keys(this.deletedStates[y][M]))delete this.state[y][M][O];w[M]=this.state[y][M]}g[y]=g[y]||{},o.e(g[y],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(let y in s)s[y].setFeatureState(g,p)}}class jt extends o.E{constructor(s,p,g){super(),this.id=s,this.dispatcher=g,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,w,M,O)=>{let N=new(Ai(w.type))(y,w,M,O);if(N.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${N.id}`);return N})(s,p,g,this),this._tiles={},this._cache=new ct(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new mr,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let s in this._tiles){let p=this._tiles[s];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,p,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,p,g)}catch(y){s.state="errored",y.status!==404?this._source.fire(new o.j(y,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new o.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let p in this._tiles){let g=this._tiles[p];g.upload(s),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Mi).map(s=>s.key)}getRenderableIds(s){let p=[];for(let g in this._tiles)this._isIdRenderable(g,s)&&p.push(this._tiles[g]);return s?p.sort((g,y)=>{let w=g.tileID,M=y.tileID,O=new o.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),N=new o.P(M.canonical.x,M.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-M.overscaledZ||N.y-O.y||N.x-O.x}).map(g=>g.tileID.key):p.map(g=>g.tileID).sort(Mi).map(g=>g.key)}hasRenderableParent(s){let p=this.findLoadedParent(s,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(s,p){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(p||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,p){return o._(this,void 0,void 0,function*(){let g=this._tiles[s];g&&(g.state!=="loading"&&(g.state=p),yield this._loadTile(g,s,p))})}_tileLoaded(s,p,g){s.timeAdded=d.now(),g==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(p,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){let p=this.getRenderableIds();for(let y=0;y<p.length;y++){let w=p[y];if(s.neighboringTiles&&s.neighboringTiles[w]){let M=this.getTileByID(w);g(s,M),g(M,s)}}function g(y,w){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let M=w.tileID.canonical.x-y.tileID.canonical.x,O=w.tileID.canonical.y-y.tileID.canonical.y,N=Math.pow(2,y.tileID.canonical.z),B=w.tileID.key;M===0&&O===0||Math.abs(O)>1||(Math.abs(M)>1&&(Math.abs(M+N)===1?M+=N:Math.abs(M-N)===1&&(M-=N)),w.dem&&y.dem&&(y.dem.backfillBorder(w.dem,M,O),y.neighboringTiles&&y.neighboringTiles[B]&&(y.neighboringTiles[B].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,p,g,y){for(let w in this._tiles){let M=this._tiles[w];if(y[w]||!M.hasData()||M.tileID.overscaledZ<=p||M.tileID.overscaledZ>g)continue;let O=M.tileID;for(;M&&M.tileID.overscaledZ>p+1;){let B=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[B.key],M&&M.hasData()&&(O=B)}let N=O;for(;N.overscaledZ>p;)if(N=N.scaledTo(N.overscaledZ-1),s[N.key]){y[O.key]=O;break}}}findLoadedParent(s,p){if(s.key in this._loadedParentTiles){let g=this._loadedParentTiles[s.key];return g&&g.tileID.overscaledZ>=p?g:null}for(let g=s.overscaledZ-1;g>=p;g--){let y=s.scaledTo(g),w=this._getLoadedTile(y);if(w)return w}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){let p=this._tiles[s.key];return p&&p.hasData()?p:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){let p=Math.ceil(s.width/this._source.tileSize)+1,g=Math.ceil(s.height/this._source.tileSize)+1,y=Math.floor(p*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(w)}handleWrapJump(s){let p=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,p){let g={};for(let y in this._tiles){let w=this._tiles[y];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+p),g[w.tileID.key]=w}this._tiles=g;for(let y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(let y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(s,p,g,y,w,M){let O={},N={},B=Object.keys(s),V=d.now();for(let G of B){let X=s[G],ne=this._tiles[G];if(!ne||ne.fadeEndTime!==0&&ne.fadeEndTime<=V)continue;let se=this.findLoadedParent(X,p),he=this.findLoadedSibling(X),me=se||he||null;me&&(this._addTile(me.tileID),O[me.tileID.key]=me.tileID),N[G]=X}this._retainLoadedChildren(N,y,g,s);for(let G in O)s[G]||(this._coveredTiles[G]=!0,s[G]=O[G]);if(M){let G={},X={};for(let ne of w)this._tiles[ne.key].hasData()?G[ne.key]=ne:X[ne.key]=ne;for(let ne in X){let se=X[ne].children(this._source.maxzoom);this._tiles[se[0].key]&&this._tiles[se[1].key]&&this._tiles[se[2].key]&&this._tiles[se[3].key]&&(G[se[0].key]=s[se[0].key]=se[0],G[se[1].key]=s[se[1].key]=se[1],G[se[2].key]=s[se[2].key]=se[2],G[se[3].key]=s[se[3].key]=se[3],delete X[ne])}for(let ne in X){let se=X[ne],he=this.findLoadedParent(se,this._source.minzoom),me=this.findLoadedSibling(se),ge=he||me||null;if(ge){G[ge.tileID.key]=s[ge.tileID.key]=ge.tileID;for(let ye in G)G[ye].isChildOf(ge.tileID)&&delete G[ye]}}for(let ne in this._tiles)G[ne]||(this._coveredTiles[ne]=!0)}}update(s,p){if(!this._sourceLoaded||this._paused)return;let g;this.transform=s,this.terrain=p,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new o.S(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(g=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(g=g.filter(V=>this._source.hasTile(V)))):g=[];let y=s.coveringZoomLevel(this._source),w=Math.max(y-jt.maxOverzooming,this._source.minzoom),M=Math.max(y+jt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let V={};for(let G of g)if(G.canonical.z>this._source.minzoom){let X=G.scaledTo(G.canonical.z-1);V[X.key]=X;let ne=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));V[ne.key]=ne}g=g.concat(Object.values(V))}let O=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,O&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let N=this._updateRetainedTiles(g,y);dn(this._source.type)&&this._updateCoveredAndRetainedTiles(N,w,M,y,g,p);for(let V in N)this._tiles[V].clearFadeHold();let B=o.ab(this._tiles,N);for(let V of B){let G=this._tiles[V];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,p){var g;let y={},w={},M=Math.max(p-jt.maxOverzooming,this._source.minzoom),O=Math.max(p+jt.maxUnderzooming,this._source.minzoom),N={};for(let B of s){let V=this._addTile(B);y[B.key]=B,V.hasData()||p<this._source.maxzoom&&(N[B.key]=B)}this._retainLoadedChildren(N,p,O,y);for(let B of s){let V=this._tiles[B.key];if(V.hasData())continue;if(p+1>this._source.maxzoom){let X=B.children(this._source.maxzoom)[0],ne=this.getTile(X);if(ne&&ne.hasData()){y[X.key]=X;continue}}else{let X=B.children(this._source.maxzoom);if(y[X[0].key]&&y[X[1].key]&&y[X[2].key]&&y[X[3].key])continue}let G=V.wasRequested();for(let X=B.overscaledZ-1;X>=M;--X){let ne=B.scaledTo(X);if(w[ne.key])break;if(w[ne.key]=!0,V=this.getTile(ne),!V&&G&&(V=this._addTile(ne)),V){let se=V.hasData();if((se||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||G)&&(y[ne.key]=ne),G=V.wasRequested(),se)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let s in this._tiles){let p=[],g,y=this._tiles[s].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}p.push(y.key);let w=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(w),g)break;y=w}for(let w of p)this._loadedParentTiles[w]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let s in this._tiles){let p=this._tiles[s].tileID,g=this._getLoadedTile(p);this._loadedSiblingTiles[p.key]=g}}_addTile(s){let p=this._tiles[s.key];if(p)return p;p=this._cache.getAndRemove(s),p&&(this._setTileReloadTimer(s.key,p),p.tileID=s,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,p)));let g=p;return p||(p=new Ci(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(p,s.key,p.state)),p.uses++,this._tiles[s.key]=p,g||this._source.fire(new o.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(s,p){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);let g=p.getExpiryTimeout();g&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},g))}_removeTile(s){let p=this._tiles[s];p&&(p.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(s){let p=s.sourceDataType;s.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&p==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,p,g){let y=[],w=this.transform;if(!w)return y;let M=g?w.getCameraQueryGeometry(s):s,O=s.map(se=>w.pointCoordinate(se,this.terrain)),N=M.map(se=>w.pointCoordinate(se,this.terrain)),B=this.getIds(),V=1/0,G=1/0,X=-1/0,ne=-1/0;for(let se of N)V=Math.min(V,se.x),G=Math.min(G,se.y),X=Math.max(X,se.x),ne=Math.max(ne,se.y);for(let se=0;se<B.length;se++){let he=this._tiles[B[se]];if(he.holdingForFade())continue;let me=he.tileID,ge=Math.pow(2,w.zoom-he.tileID.overscaledZ),ye=p*he.queryPadding*o.X/he.tileSize/ge,ce=[me.getTilePoint(new o.Z(V,G)),me.getTilePoint(new o.Z(X,ne))];if(ce[0].x-ye<o.X&&ce[0].y-ye<o.X&&ce[1].x+ye>=0&&ce[1].y+ye>=0){let Ae=O.map(Fe=>me.getTilePoint(Fe)),De=N.map(Fe=>me.getTilePoint(Fe));y.push({tile:he,tileID:me,queryGeometry:Ae,cameraQueryGeometry:De,scale:ge})}}return y}getVisibleCoordinates(s){let p=this.getRenderableIds(s).map(g=>this._tiles[g].tileID);for(let g of p)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(dn(this._source.type)){let s=d.now();for(let p in this._tiles)if(this._tiles[p].fadeEndTime>=s)return!0}return!1}setFeatureState(s,p,g){this._state.updateState(s=s||"_geojsonTileLayer",p,g)}removeFeatureState(s,p,g){this._state.removeFeatureState(s=s||"_geojsonTileLayer",p,g)}getFeatureState(s,p){return this._state.getState(s=s||"_geojsonTileLayer",p)}setDependencies(s,p,g){let y=this._tiles[s];y&&y.setDependencies(p,g)}reloadTilesForDependencies(s,p){for(let g in this._tiles)this._tiles[g].hasDependency(s,p)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(s,p))}}function Mi(b,s){let p=Math.abs(2*b.wrap)-+(b.wrap<0),g=Math.abs(2*s.wrap)-+(s.wrap<0);return b.overscaledZ-s.overscaledZ||g-p||s.canonical.y-b.canonical.y||s.canonical.x-b.canonical.x}function dn(b){return b==="raster"||b==="image"||b==="video"}jt.maxOverzooming=10,jt.maxUnderzooming=3;class Ee{constructor(s,p){this.reset(s,p)}reset(s,p){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.ac(s,0,1);let p=1,g=this._distances[p],y=s*this.paddedLength+this.padding;for(;g<y&&p<this._distances.length;)g=this._distances[++p];let w=p-1,M=this._distances[w],O=g-M,N=O>0?(y-M)/O:0;return this.points[w].mult(1-N).add(this.points[p].mult(N))}}function Oe(b,s){let p=!0;return b==="always"||b!=="never"&&s!=="never"||(p=!1),p}class it{constructor(s,p,g){let y=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(p/g);for(let M=0;M<this.xCellCount*this.yCellCount;M++)y.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=p,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,p,g,y,w){this._forEachCell(p,g,y,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(y),this.bboxes.push(w)}insertCircle(s,p,g,y){this._forEachCell(p-y,g-y,p+y,g+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(p),this.circles.push(g),this.circles.push(y)}_insertBoxCell(s,p,g,y,w,M){this.boxCells[w].push(M)}_insertCircleCell(s,p,g,y,w,M){this.circleCells[w].push(M)}_query(s,p,g,y,w,M,O){if(g<0||s>this.width||y<0||p>this.height)return[];let N=[];if(s<=0&&p<=0&&this.width<=g&&this.height<=y){if(w)return[{key:null,x1:s,y1:p,x2:g,y2:y}];for(let B=0;B<this.boxKeys.length;B++)N.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){let V=this.circles[3*B],G=this.circles[3*B+1],X=this.circles[3*B+2];N.push({key:this.circleKeys[B],x1:V-X,y1:G-X,x2:V+X,y2:G+X})}}else this._forEachCell(s,p,g,y,this._queryCell,N,{hitTest:w,overlapMode:M,seenUids:{box:{},circle:{}}},O);return N}query(s,p,g,y){return this._query(s,p,g,y,!1,null)}hitTest(s,p,g,y,w,M){return this._query(s,p,g,y,!0,w,M).length>0}hitTestCircle(s,p,g,y,w){let M=s-g,O=s+g,N=p-g,B=p+g;if(O<0||M>this.width||B<0||N>this.height)return!1;let V=[];return this._forEachCell(M,N,O,B,this._queryCellCircle,V,{hitTest:!0,overlapMode:y,circle:{x:s,y:p,radius:g},seenUids:{box:{},circle:{}}},w),V.length>0}_queryCell(s,p,g,y,w,M,O,N){let{seenUids:B,hitTest:V,overlapMode:G}=O,X=this.boxCells[w];if(X!==null){let se=this.bboxes;for(let he of X)if(!B.box[he]){B.box[he]=!0;let me=4*he,ge=this.boxKeys[he];if(s<=se[me+2]&&p<=se[me+3]&&g>=se[me+0]&&y>=se[me+1]&&(!N||N(ge))&&(!V||!Oe(G,ge.overlapMode))&&(M.push({key:ge,x1:se[me],y1:se[me+1],x2:se[me+2],y2:se[me+3]}),V))return!0}}let ne=this.circleCells[w];if(ne!==null){let se=this.circles;for(let he of ne)if(!B.circle[he]){B.circle[he]=!0;let me=3*he,ge=this.circleKeys[he];if(this._circleAndRectCollide(se[me],se[me+1],se[me+2],s,p,g,y)&&(!N||N(ge))&&(!V||!Oe(G,ge.overlapMode))){let ye=se[me],ce=se[me+1],Ae=se[me+2];if(M.push({key:ge,x1:ye-Ae,y1:ce-Ae,x2:ye+Ae,y2:ce+Ae}),V)return!0}}}return!1}_queryCellCircle(s,p,g,y,w,M,O,N){let{circle:B,seenUids:V,overlapMode:G}=O,X=this.boxCells[w];if(X!==null){let se=this.bboxes;for(let he of X)if(!V.box[he]){V.box[he]=!0;let me=4*he,ge=this.boxKeys[he];if(this._circleAndRectCollide(B.x,B.y,B.radius,se[me+0],se[me+1],se[me+2],se[me+3])&&(!N||N(ge))&&!Oe(G,ge.overlapMode))return M.push(!0),!0}}let ne=this.circleCells[w];if(ne!==null){let se=this.circles;for(let he of ne)if(!V.circle[he]){V.circle[he]=!0;let me=3*he,ge=this.circleKeys[he];if(this._circlesCollide(se[me],se[me+1],se[me+2],B.x,B.y,B.radius)&&(!N||N(ge))&&!Oe(G,ge.overlapMode))return M.push(!0),!0}}}_forEachCell(s,p,g,y,w,M,O,N){let B=this._convertToXCellCoord(s),V=this._convertToYCellCoord(p),G=this._convertToXCellCoord(g),X=this._convertToYCellCoord(y);for(let ne=B;ne<=G;ne++)for(let se=V;se<=X;se++)if(w.call(this,s,p,g,y,this.xCellCount*se+ne,M,O,N))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,p,g,y,w,M){let O=y-s,N=w-p,B=g+M;return B*B>O*O+N*N}_circleAndRectCollide(s,p,g,y,w,M,O){let N=(M-y)/2,B=Math.abs(s-(y+N));if(B>N+g)return!1;let V=(O-w)/2,G=Math.abs(p-(w+V));if(G>V+g)return!1;if(B<=N||G<=V)return!0;let X=B-N,ne=G-V;return X*X+ne*ne<=g*g}}function St(b,s,p,g,y){let w=o.H();return s?(o.K(w,w,[1/y,1/y,1]),p||o.ad(w,w,g.angle)):o.L(w,g.labelPlaneMatrix,b),w}function vt(b,s,p,g,y){if(s){let w=o.ae(b);return o.K(w,w,[y,y,1]),p||o.ad(w,w,-g.angle),w}return g.glCoordMatrix}function oe(b,s,p,g){let y;g?(y=[b,s,g(b,s),1],o.af(y,y,p)):(y=[b,s,0,1],Nr(y,y,p));let w=y[3];return{point:new o.P(y[0]/w,y[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function W(b,s){return .5+b/s*.5}function H(b,s){return b.x>=-s[0]&&b.x<=s[0]&&b.y>=-s[1]&&b.y<=s[1]}function K(b,s,p,g,y,w,M,O,N,B,V,G,X,ne,se){let he=g?b.textSizeData:b.iconSizeData,me=o.ag(he,p.transform.zoom),ge=[256/p.width*2+1,256/p.height*2+1],ye=g?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;ye.clear();let ce=b.lineVertexArray,Ae=g?b.text.placedSymbolArray:b.icon.placedSymbolArray,De=p.transform.width/p.transform.height,Fe=!1;for(let et=0;et<Ae.length;et++){let lt=Ae.get(et);if(lt.hidden||lt.writingMode===o.ah.vertical&&!Fe){Jt(lt.numGlyphs,ye);continue}Fe=!1;let Et=oe(lt.anchorX,lt.anchorY,s,se);if(!H(Et.point,ge)){Jt(lt.numGlyphs,ye);continue}let Dt=W(p.transform.cameraToCenterDistance,Et.signedDistanceFromCamera),mt=o.ai(he,me,lt),dt=M?mt/Dt:mt*Dt,Ht={getElevation:se,labelPlaneMatrix:y,lineVertexArray:ce,pitchWithMap:M,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:B,tileAnchorPoint:new o.P(lt.anchorX,lt.anchorY),unwrappedTileID:V,width:G,height:X,translation:ne},vr=xe(Ht,lt,dt,!1,O,s,w,b.glyphOffsetArray,ye,De,N);Fe=vr.useVertical,(vr.notEnoughRoom||Fe||vr.needsFlipping&&xe(Ht,lt,dt,!0,O,s,w,b.glyphOffsetArray,ye,De,N).notEnoughRoom)&&Jt(lt.numGlyphs,ye)}g?b.text.dynamicLayoutVertexBuffer.updateData(ye):b.icon.dynamicLayoutVertexBuffer.updateData(ye)}function ae(b,s,p,g,y,w,M,O){let N=w.glyphStartIndex+w.numGlyphs,B=w.lineStartIndex,V=w.lineStartIndex+w.lineLength,G=s.getoffsetX(w.glyphStartIndex),X=s.getoffsetX(N-1),ne=st(b*G,p,g,y,w.segment,B,V,O,M);if(!ne)return null;let se=st(b*X,p,g,y,w.segment,B,V,O,M);return se?O.projectionCache.anyProjectionOccluded?null:{first:ne,last:se}:null}function ve(b,s,p,g){return b===o.ah.horizontal&&Math.abs(p.y-s.y)>Math.abs(p.x-s.x)*g?{useVertical:!0}:(b===o.ah.vertical?s.y<p.y:s.x>p.x)?{needsFlipping:!0}:null}function xe(b,s,p,g,y,w,M,O,N,B,V){let G=p/24,X=s.lineOffsetX*G,ne=s.lineOffsetY*G,se;if(s.numGlyphs>1){let he=s.glyphStartIndex+s.numGlyphs,me=s.lineStartIndex,ge=s.lineStartIndex+s.lineLength,ye=ae(G,O,X,ne,g,s,V,b);if(!ye)return{notEnoughRoom:!0};let ce=oe(ye.first.point.x,ye.first.point.y,M,b.getElevation).point,Ae=oe(ye.last.point.x,ye.last.point.y,M,b.getElevation).point;if(y&&!g){let De=ve(s.writingMode,ce,Ae,B);if(De)return De}se=[ye.first];for(let De=s.glyphStartIndex+1;De<he-1;De++)se.push(st(G*O.getoffsetX(De),X,ne,g,s.segment,me,ge,b,V));se.push(ye.last)}else{if(y&&!g){let me=oe(b.tileAnchorPoint.x,b.tileAnchorPoint.y,w,b.getElevation).point,ge=s.lineStartIndex+s.segment+1,ye=new o.P(b.lineVertexArray.getx(ge),b.lineVertexArray.gety(ge)),ce=oe(ye.x,ye.y,w,b.getElevation),Ae=ce.signedDistanceFromCamera>0?ce.point:function(Fe,et,lt,Et,Dt,mt){return Te(Fe,et,lt,1,Dt,mt)}(b.tileAnchorPoint,ye,me,0,w,b),De=ve(s.writingMode,me,Ae,B);if(De)return De}let he=st(G*O.getoffsetX(s.glyphStartIndex),X,ne,g,s.segment,s.lineStartIndex,s.lineStartIndex+s.lineLength,b,V);if(!he||b.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};se=[he]}for(let he of se)o.aj(N,he.point,he.angle);return{}}function Te(b,s,p,g,y,w){let M=b.add(b.sub(s)._unit()),O=y!==void 0?oe(M.x,M.y,y,w.getElevation).point:Be(M.x,M.y,w).point,N=p.sub(O);return p.add(N._mult(g/N.mag()))}function pe(b,s,p){let g=s.projectionCache;if(g.projections[b])return g.projections[b];let y=new o.P(s.lineVertexArray.getx(b),s.lineVertexArray.gety(b)),w=Be(y.x,y.y,s);if(w.signedDistanceFromCamera>0)return g.projections[b]=w.point,g.anyProjectionOccluded=g.anyProjectionOccluded||w.isOccluded,w.point;let M=b-p.direction;return function(O,N,B,V,G){return Te(O,N,B,V,void 0,G)}(p.distanceFromAnchor===0?s.tileAnchorPoint:new o.P(s.lineVertexArray.getx(M),s.lineVertexArray.gety(M)),y,p.previousVertex,p.absOffsetX-p.distanceFromAnchor+1,s)}function Be(b,s,p){let g=b+p.translation[0],y=s+p.translation[1],w;return!p.pitchWithMap&&p.projection.useSpecialProjectionForSymbols?(w=p.projection.projectTileCoordinates(g,y,p.unwrappedTileID,p.getElevation),w.point.x=(.5*w.point.x+.5)*p.width,w.point.y=(.5*-w.point.y+.5)*p.height):(w=oe(g,y,p.labelPlaneMatrix,p.getElevation),w.isOccluded=!1),w}function Je(b,s,p){return b._unit()._perp()._mult(s*p)}function Ue(b,s,p,g,y,w,M,O,N){if(O.projectionCache.offsets[b])return O.projectionCache.offsets[b];let B=p.add(s);if(b+N.direction<g||b+N.direction>=y)return O.projectionCache.offsets[b]=B,B;let V=pe(b+N.direction,O,N),G=Je(V.sub(p),M,N.direction),X=p.add(G),ne=V.add(G);return O.projectionCache.offsets[b]=o.ak(w,B,X,ne)||B,O.projectionCache.offsets[b]}function st(b,s,p,g,y,w,M,O,N){let B=g?b-s:b+s,V=B>0?1:-1,G=0;g&&(V*=-1,G=Math.PI),V<0&&(G+=Math.PI);let X,ne=V>0?w+y:w+y+1;O.projectionCache.cachedAnchorPoint?X=O.projectionCache.cachedAnchorPoint:(X=Be(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=X);let se,he,me=X,ge=X,ye=0,ce=0,Ae=Math.abs(B),De=[],Fe;for(;ye+ce<=Ae;){if(ne+=V,ne<w||ne>=M)return null;ye+=ce,ge=me,he=se;let Et={absOffsetX:Ae,direction:V,distanceFromAnchor:ye,previousVertex:ge};if(me=pe(ne,O,Et),p===0)De.push(ge),Fe=me.sub(ge);else{let Dt,mt=me.sub(ge);Dt=mt.mag()===0?Je(pe(ne+V,O,Et).sub(me),p,V):Je(mt,p,V),he||(he=ge.add(Dt)),se=Ue(ne,Dt,me,w,M,he,p,O,Et),De.push(he),Fe=se.sub(he)}ce=Fe.mag()}let et=Fe._mult((Ae-ye)/ce)._add(he||ge),lt=G+Math.atan2(me.y-ge.y,me.x-ge.x);return De.push(et),{point:et,angle:N?lt:0,path:De}}let zt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Jt(b,s){for(let p=0;p<b;p++){let g=s.length;s.resize(g+4),s.float32.set(zt,3*g)}}function Nr(b,s,p){let g=s[0],y=s[1];return b[0]=p[0]*g+p[4]*y+p[12],b[1]=p[1]*g+p[5]*y+p[13],b[3]=p[3]*g+p[7]*y+p[15],b}let cr=100;class jr{constructor(s,p,g=new it(s.width+200,s.height+200,25),y=new it(s.width+200,s.height+200,25)){this.transform=s,this.mapProjection=p,this.grid=g,this.ignoredGrid=y,this.pitchFactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+cr,this.screenBottomBoundary=s.height+cr,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,p,g,y,w,M,O,N,B,V,G){let X=s.anchorPointX+N[0],ne=s.anchorPointY+N[1],se=this.projectAndGetPerspectiveRatio(y,X,ne,w,V),he=g*se.perspectiveRatio,me;if(M||O)me=this._projectCollisionBox(s,he,y,w,M,O,N,se,V,G);else{let De=se.point.x+(G?G.x*he:0),Fe=se.point.y+(G?G.y*he:0);me={allPointsOccluded:!1,box:[De+s.x1*he,Fe+s.y1*he,De+s.x2*he,Fe+s.y2*he]}}let[ge,ye,ce,Ae]=me.box;return this.mapProjection.useSpecialProjectionForSymbols&&(M?me.allPointsOccluded:this.mapProjection.isOccluded(X,ne,w))||se.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ge,ye,ce,Ae)||p!=="always"&&this.grid.hitTest(ge,ye,ce,Ae,p,B)?{box:[ge,ye,ce,Ae],placeable:!1,offscreen:!1}:{box:[ge,ye,ce,Ae],placeable:!0,offscreen:this.isOffscreen(ge,ye,ce,Ae)}}placeCollisionCircles(s,p,g,y,w,M,O,N,B,V,G,X,ne,se,he,me){let ge=[],ye=new o.P(p.anchorX,p.anchorY),ce=this.getPerspectiveRatio(M,ye.x,ye.y,O,me),Ae=(G?w/ce:w*ce)/o.ap,De={getElevation:me,labelPlaneMatrix:N,lineVertexArray:g,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ye,unwrappedTileID:O,width:this.transform.width,height:this.transform.height,translation:he},Fe=ae(Ae,y,p.lineOffsetX*Ae,p.lineOffsetY*Ae,!1,p,!1,De),et=!1,lt=!1,Et=!0;if(Fe){let Dt=.5*ne*ce+se,mt=new o.P(-100,-100),dt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Ht=new Ee,vr=Fe.first,gt=Fe.last,Mt=[];for(let Cr=vr.path.length-1;Cr>=1;Cr--)Mt.push(vr.path[Cr]);for(let Cr=1;Cr<gt.path.length;Cr++)Mt.push(gt.path[Cr]);let pr=2.5*Dt;if(B){let Cr=this.projectPathToScreenSpace(Mt,De,B);Mt=Cr.some(Gr=>Gr.signedDistanceFromCamera<=0)?[]:Cr.map(Gr=>Gr.point)}let $n=[];if(Mt.length>0){let Cr=Mt[0].clone(),Gr=Mt[0].clone();for(let Hn=1;Hn<Mt.length;Hn++)Cr.x=Math.min(Cr.x,Mt[Hn].x),Cr.y=Math.min(Cr.y,Mt[Hn].y),Gr.x=Math.max(Gr.x,Mt[Hn].x),Gr.y=Math.max(Gr.y,Mt[Hn].y);$n=Cr.x>=mt.x&&Gr.x<=dt.x&&Cr.y>=mt.y&&Gr.y<=dt.y?[Mt]:Gr.x<mt.x||Cr.x>dt.x||Gr.y<mt.y||Cr.y>dt.y?[]:o.al([Mt],mt.x,mt.y,dt.x,dt.y)}for(let Cr of $n){Ht.reset(Cr,.25*Dt);let Gr=0;Gr=Ht.length<=.5*Dt?1:Math.ceil(Ht.paddedLength/pr)+1;for(let Hn=0;Hn<Gr;Hn++){let So=Hn/Math.max(Gr-1,1),Js=Ht.lerp(So),Wn=Js.x+cr,la=Js.y+cr;ge.push(Wn,la,Dt,0);let Bo=Wn-Dt,Eo=la-Dt,Uo=Wn+Dt,Al=la+Dt;if(Et=Et&&this.isOffscreen(Bo,Eo,Uo,Al),lt=lt||this.isInsideGrid(Bo,Eo,Uo,Al),s!=="always"&&this.grid.hitTestCircle(Wn,la,Dt,s,X)&&(et=!0,!V))return{circles:[],offscreen:!1,collisionDetected:et}}}}return{circles:!V&&et||!lt||ce<this.perspectiveRatioCutoff?[]:ge,offscreen:Et,collisionDetected:et}}projectPathToScreenSpace(s,p,g){return s.map(y=>oe(y.x,y.y,g,p.getElevation))}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let p=[],g=1/0,y=1/0,w=-1/0,M=-1/0;for(let V of s){let G=new o.P(V.x+cr,V.y+cr);g=Math.min(g,G.x),y=Math.min(y,G.y),w=Math.max(w,G.x),M=Math.max(M,G.y),p.push(G)}let O=this.grid.query(g,y,w,M).concat(this.ignoredGrid.query(g,y,w,M)),N={},B={};for(let V of O){let G=V.key;if(N[G.bucketInstanceId]===void 0&&(N[G.bucketInstanceId]={}),N[G.bucketInstanceId][G.featureIndex])continue;let X=[new o.P(V.x1,V.y1),new o.P(V.x2,V.y1),new o.P(V.x2,V.y2),new o.P(V.x1,V.y2)];o.am(p,X)&&(N[G.bucketInstanceId][G.featureIndex]=!0,B[G.bucketInstanceId]===void 0&&(B[G.bucketInstanceId]=[]),B[G.bucketInstanceId].push(G.featureIndex))}return B}insertCollisionBox(s,p,g,y,w,M){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:w,collisionGroupID:M,overlapMode:p},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,p,g,y,w,M){let O=g?this.ignoredGrid:this.grid,N={bucketInstanceId:y,featureIndex:w,collisionGroupID:M,overlapMode:p};for(let B=0;B<s.length;B+=4)O.insertCircle(N,s[B],s[B+1],s[B+2])}projectAndGetPerspectiveRatio(s,p,g,y,w){let M;w?(M=[p,g,w(p,g),1],o.af(M,M,s)):(M=[p,g,0,1],Nr(M,M,s));let O=M[3];return{point:new o.P((M[0]/O+1)/2*this.transform.width+cr,(-M[1]/O+1)/2*this.transform.height+cr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}getPerspectiveRatio(s,p,g,y,w){let M=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(p,g,y,w):oe(p,g,s,w);return .5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5}isOffscreen(s,p,g,y){return g<cr||s>=this.screenRightBoundary||y<cr||p>this.screenBottomBoundary}isInsideGrid(s,p,g,y){return g>=0&&s<this.gridRightBoundary&&y>=0&&p<this.gridBottomBoundary}getViewportMatrix(){let s=o.an([]);return o.J(s,s,[-100,-100,0]),s}_projectCollisionBox(s,p,g,y,w,M,O,N,B,V){let G=new o.P(1,0),X=new o.P(0,1),ne=new o.P(s.anchorPointX+O[0],s.anchorPointY+O[1]);if(M&&!w){let Et=this.projectAndGetPerspectiveRatio(g,ne.x+1,ne.y,y,B).point.sub(N.point).unit(),Dt=Math.atan(Et.y/Et.x)+(Et.x<0?Math.PI:0),mt=Math.sin(Dt),dt=Math.cos(Dt);G=new o.P(dt,mt),X=new o.P(-mt,dt)}else if(!M&&w){let Et=-this.transform.angle,Dt=Math.sin(Et),mt=Math.cos(Et);G=new o.P(mt,Dt),X=new o.P(-Dt,mt)}let se=N.point,he=p;if(w){se=ne;let Et=this.transform.zoom-Math.floor(this.transform.zoom);he=Math.pow(2,-Et),he*=this.mapProjection.getPitchedTextCorrection(this.transform,ne,y),V||(he*=o.ac(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}V&&(se=se.add(G.mult(V.x*he)).add(X.mult(V.y*he)));let me=s.x1*he,ge=s.x2*he,ye=(me+ge)/2,ce=s.y1*he,Ae=s.y2*he,De=(ce+Ae)/2,Fe=[{offsetX:me,offsetY:ce},{offsetX:ye,offsetY:ce},{offsetX:ge,offsetY:ce},{offsetX:ge,offsetY:De},{offsetX:ge,offsetY:Ae},{offsetX:ye,offsetY:Ae},{offsetX:me,offsetY:Ae},{offsetX:me,offsetY:De}],et=[];for(let{offsetX:Et,offsetY:Dt}of Fe)et.push(new o.P(se.x+G.x*Et+X.x*Dt,se.y+G.y*Et+X.y*Dt));let lt=!1;if(w){let Et=et.map(Dt=>this.projectAndGetPerspectiveRatio(g,Dt.x,Dt.y,y,B));lt=Et.some(Dt=>!Dt.isOccluded),et=Et.map(Dt=>Dt.point)}else lt=!0;return{box:o.ao(et),allPointsOccluded:!lt}}}function Ar(b,s,p){return s*(o.X/(b.tileSize*Math.pow(2,p-b.tileID.overscaledZ)))}class Jr{constructor(s,p,g,y){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?p:-p))):y&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Kr{constructor(s,p,g,y,w){this.text=new Jr(s?s.text:null,p,g,w),this.icon=new Jr(s?s.icon:null,p,y,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Er{constructor(s,p,g){this.text=s,this.icon=p,this.skipFade=g}}class cn{constructor(){this.invProjMatrix=o.H(),this.viewportMatrix=o.H(),this.circles=[]}}class Mn{constructor(s,p,g,y,w){this.bucketInstanceId=s,this.featureIndex=p,this.sourceLayerIndex=g,this.bucketIndex=y,this.tileID=w}}class Zi{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){let p=++this.maxGroupID;this.collisionGroups[s]={ID:p,predicate:g=>g.collisionGroupID===p}}return this.collisionGroups[s]}}function so(b,s,p,g,y){let{horizontalAlign:w,verticalAlign:M}=o.au(b);return new o.P(-(w-.5)*s+g[0]*y,-(M-.5)*p+g[1]*y)}class zo{constructor(s,p,g,y,w,M){this.transform=s.clone(),this.terrain=g,this.collisionIndex=new jr(this.transform,p),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Zi(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){let p=this.terrain;return p?(g,y)=>p.getElevation(s,g,y):null}getBucketParts(s,p,g,y){let w=g.getBucket(p),M=g.latestFeatureIndex;if(!w||!M||p.id!==w.layerIds[0])return;let O=g.collisionBoxArray,N=w.layers[0].layout,B=w.layers[0].paint,V=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),G=g.tileSize/o.X,X=g.tileID.toUnwrapped(),ne=this.transform.calculatePosMatrix(X),se=N.get("text-pitch-alignment")==="map",he=N.get("text-rotation-alignment")==="map",me=Ar(g,1,this.transform.zoom),ge=this.collisionIndex.mapProjection.translatePosition(this.transform,g,B.get("text-translate"),B.get("text-translate-anchor")),ye=this.collisionIndex.mapProjection.translatePosition(this.transform,g,B.get("icon-translate"),B.get("icon-translate-anchor")),ce=St(ne,se,he,this.transform,me),Ae=null;if(se){let Fe=vt(ne,se,he,this.transform,me);Ae=o.L([],this.transform.labelPlaneMatrix,Fe)}this.retainedQueryData[w.bucketInstanceId]=new Mn(w.bucketInstanceId,M,w.sourceLayerIndex,w.index,g.tileID);let De={bucket:w,layout:N,translationText:ge,translationIcon:ye,posMatrix:ne,unwrappedTileID:X,textLabelPlaneMatrix:ce,labelToScreenMatrix:Ae,scale:V,textPixelRatio:G,holdingForFade:g.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:o.ag(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(y)for(let Fe of w.sortKeyRanges){let{sortKey:et,symbolInstanceStart:lt,symbolInstanceEnd:Et}=Fe;s.push({sortKey:et,symbolInstanceStart:lt,symbolInstanceEnd:Et,parameters:De})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:De})}attemptAnchorPlacement(s,p,g,y,w,M,O,N,B,V,G,X,ne,se,he,me,ge,ye,ce){let Ae=o.aq[s.textAnchor],De=[s.textOffset0,s.textOffset1],Fe=so(Ae,g,y,De,w),et=this.collisionIndex.placeCollisionBox(p,X,N,B,V,O,M,me,G.predicate,ce,Fe);if((!ye||this.collisionIndex.placeCollisionBox(ye,X,N,B,V,O,M,ge,G.predicate,ce,Fe).placeable)&&et.placeable){let lt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID].text&&(lt=this.prevPlacement.variableOffsets[ne.crossTileID].anchor),ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ne.crossTileID]={textOffset:De,width:g,height:y,anchor:Ae,textBoxScale:w,prevAnchor:lt},this.markUsedJustification(se,Ae,ne,he),se.allowVerticalPlacement&&(this.markUsedOrientation(se,he,ne),this.placedOrientations[ne.crossTileID]=he),{shift:Fe,placedGlyphBoxes:et}}}placeLayerBucketPart(s,p,g){let{bucket:y,layout:w,translationText:M,translationIcon:O,posMatrix:N,unwrappedTileID:B,textLabelPlaneMatrix:V,labelToScreenMatrix:G,textPixelRatio:X,holdingForFade:ne,collisionBoxArray:se,partiallyEvaluatedTextSize:he,collisionGroup:me}=s.parameters,ge=w.get("text-optional"),ye=w.get("icon-optional"),ce=o.ar(w,"text-overlap","text-allow-overlap"),Ae=ce==="always",De=o.ar(w,"icon-overlap","icon-allow-overlap"),Fe=De==="always",et=w.get("text-rotation-alignment")==="map",lt=w.get("text-pitch-alignment")==="map",Et=w.get("icon-text-fit")!=="none",Dt=w.get("symbol-z-order")==="viewport-y",mt=Ae&&(Fe||!y.hasIconData()||ye),dt=Fe&&(Ae||!y.hasTextData()||ge);!y.collisionArrays&&se&&y.deserializeCollisionBoxes(se);let Ht=this._getTerrainElevationFunc(this.retainedQueryData[y.bucketInstanceId].tileID),vr=(gt,Mt,pr)=>{var $n,Cr;if(p[gt.crossTileID])return;if(ne)return void(this.placements[gt.crossTileID]=new Er(!1,!1,!1));let Gr=!1,Hn=!1,So=!0,Js=null,Wn={box:null,placeable:!1,offscreen:null},la={box:null,placeable:!1,offscreen:null},Bo=null,Eo=null,Uo=null,Al=0,Yh=0,wg=0;Mt.textFeatureIndex?Al=Mt.textFeatureIndex:gt.useRuntimeCollisionCircles&&(Al=gt.featureIndex),Mt.verticalTextFeatureIndex&&(Yh=Mt.verticalTextFeatureIndex);let Kh=Mt.textBox;if(Kh){let ps=lo=>{let To=o.ah.horizontal;if(y.allowVerticalPlacement&&!lo&&this.prevPlacement){let Ua=this.prevPlacement.placedOrientations[gt.crossTileID];Ua&&(this.placedOrientations[gt.crossTileID]=Ua,To=Ua,this.markUsedOrientation(y,To,gt))}return To},ds=(lo,To)=>{if(y.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&Mt.verticalTextBox){for(let Ua of y.writingModes)if(Ua===o.ah.vertical?(Wn=To(),la=Wn):Wn=lo(),Wn&&Wn.placeable)break}else Wn=lo()},lc=gt.textAnchorOffsetStartIndex,Qs=gt.textAnchorOffsetEndIndex;if(Qs===lc){let lo=(To,Ua)=>{let Wr=this.collisionIndex.placeCollisionBox(To,ce,X,N,B,lt,et,M,me.predicate,Ht);return Wr&&Wr.placeable&&(this.markUsedOrientation(y,Ua,gt),this.placedOrientations[gt.crossTileID]=Ua),Wr};ds(()=>lo(Kh,o.ah.horizontal),()=>{let To=Mt.verticalTextBox;return y.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&To?lo(To,o.ah.vertical):{box:null,offscreen:null}}),ps(Wn&&Wn.placeable)}else{let lo=o.aq[(Cr=($n=this.prevPlacement)===null||$n===void 0?void 0:$n.variableOffsets[gt.crossTileID])===null||Cr===void 0?void 0:Cr.anchor],To=(Wr,_f,Xh)=>{let Jh=Wr.x2-Wr.x1,TI=Wr.y2-Wr.y1,xq=gt.textBoxScale,II=Et&&De==="never"?_f:null,uc=null,AI=ce==="never"?1:2,Sg="never";lo&&AI++;for(let lm=0;lm<AI;lm++){for(let Eg=lc;Eg<Qs;Eg++){let Tg=y.textAnchorOffsets.get(Eg);if(lo&&Tg.textAnchor!==lo)continue;let Qh=this.attemptAnchorPlacement(Tg,Wr,Jh,TI,xq,et,lt,X,N,B,me,Sg,gt,y,Xh,M,O,II,Ht);if(Qh&&(uc=Qh.placedGlyphBoxes,uc&&uc.placeable))return Gr=!0,Js=Qh.shift,uc}lo?lo=null:Sg=ce}return g&&!uc&&(uc={box:this.collisionIndex.placeCollisionBox(Kh,"always",X,N,B,lt,et,M,me.predicate,Ht,new o.P(0,0)).box,offscreen:!1,placeable:!1}),uc};ds(()=>To(Kh,Mt.iconBox,o.ah.horizontal),()=>{let Wr=Mt.verticalTextBox;return y.allowVerticalPlacement&&(!Wn||!Wn.placeable)&&gt.numVerticalGlyphVertices>0&&Wr?To(Wr,Mt.verticalIconBox,o.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Wn&&(Gr=Wn.placeable,So=Wn.offscreen);let Ua=ps(Wn&&Wn.placeable);if(!Gr&&this.prevPlacement){let Wr=this.prevPlacement.variableOffsets[gt.crossTileID];Wr&&(this.variableOffsets[gt.crossTileID]=Wr,this.markUsedJustification(y,Wr.anchor,gt,Ua))}}}if(Bo=Wn,Gr=Bo&&Bo.placeable,So=Bo&&Bo.offscreen,gt.useRuntimeCollisionCircles){let ps=y.text.placedSymbolArray.get(gt.centerJustifiedTextSymbolIndex),ds=o.ai(y.textSizeData,he,ps),lc=w.get("text-padding");Eo=this.collisionIndex.placeCollisionCircles(ce,ps,y.lineVertexArray,y.glyphOffsetArray,ds,N,B,V,G,g,lt,me.predicate,gt.collisionCircleDiameter,lc,M,Ht),Eo.circles.length&&Eo.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),Gr=Ae||Eo.circles.length>0&&!Eo.collisionDetected,So=So&&Eo.offscreen}if(Mt.iconFeatureIndex&&(wg=Mt.iconFeatureIndex),Mt.iconBox){let ps=ds=>this.collisionIndex.placeCollisionBox(ds,De,X,N,B,lt,et,O,me.predicate,Ht,Et&&Js?Js:void 0);la&&la.placeable&&Mt.verticalIconBox?(Uo=ps(Mt.verticalIconBox),Hn=Uo.placeable):(Uo=ps(Mt.iconBox),Hn=Uo.placeable),So=So&&Uo.offscreen}let hs=ge||gt.numHorizontalGlyphVertices===0&&gt.numVerticalGlyphVertices===0,bg=ye||gt.numIconVertices===0;hs||bg?bg?hs||(Hn=Hn&&Gr):Gr=Hn&&Gr:Hn=Gr=Hn&&Gr;let Jx=Hn&&Uo.placeable;if(Gr&&Bo.placeable&&this.collisionIndex.insertCollisionBox(Bo.box,ce,w.get("text-ignore-placement"),y.bucketInstanceId,la&&la.placeable&&Yh?Yh:Al,me.ID),Jx&&this.collisionIndex.insertCollisionBox(Uo.box,De,w.get("icon-ignore-placement"),y.bucketInstanceId,wg,me.ID),Eo&&Gr&&this.collisionIndex.insertCollisionCircles(Eo.circles,ce,w.get("text-ignore-placement"),y.bucketInstanceId,Al,me.ID),g&&this.storeCollisionData(y.bucketInstanceId,pr,Mt,Bo,Uo,Eo),gt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[gt.crossTileID]=new Er(Gr||mt,Hn||dt,So||y.justReloaded),p[gt.crossTileID]=!0};if(Dt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let gt=y.getSortedSymbolIndexes(this.transform.angle);for(let Mt=gt.length-1;Mt>=0;--Mt){let pr=gt[Mt];vr(y.symbolInstances.get(pr),y.collisionArrays[pr],pr)}}else for(let gt=s.symbolInstanceStart;gt<s.symbolInstanceEnd;gt++)vr(y.symbolInstances.get(gt),y.collisionArrays[gt],gt);if(g&&y.bucketInstanceId in this.collisionCircleArrays){let gt=this.collisionCircleArrays[y.bucketInstanceId];o.as(gt.invProjMatrix,N),gt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}storeCollisionData(s,p,g,y,w,M){if(g.textBox||g.iconBox){let O,N;this.collisionBoxArrays.has(s)?O=this.collisionBoxArrays.get(s):(O=new Map,this.collisionBoxArrays.set(s,O)),O.has(p)?N=O.get(p):(N={text:null,icon:null},O.set(p,N)),g.textBox&&(N.text=y.box),g.iconBox&&(N.icon=w.box)}if(M){let O=this.collisionCircleArrays[s];O===void 0&&(O=this.collisionCircleArrays[s]=new cn);for(let N=0;N<M.circles.length;N+=4)O.circles.push(M.circles[N+0]),O.circles.push(M.circles[N+1]),O.circles.push(M.circles[N+2]),O.circles.push(M.collisionDetected?1:0)}}markUsedJustification(s,p,g,y){let w;w=y===o.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.at(p)];let M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(let O of M)O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=w>=0&&O!==w?0:g.crossTileID)}markUsedOrientation(s,p,g){let y=p===o.ah.horizontal||p===o.ah.horizontalOnly?p:0,w=p===o.ah.vertical?p:0,M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(let O of M)s.text.placedSymbolArray.get(O).placedOrientation=y;g.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;let p=this.prevPlacement,g=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;let y=p?p.symbolFadeChange(s):1,w=p?p.opacities:{},M=p?p.variableOffsets:{},O=p?p.placedOrientations:{};for(let N in this.placements){let B=this.placements[N],V=w[N];V?(this.opacities[N]=new Kr(V,y,B.text,B.icon),g=g||B.text!==V.text.placed||B.icon!==V.icon.placed):(this.opacities[N]=new Kr(null,y,B.text,B.icon,B.skipFade),g=g||B.text||B.icon)}for(let N in w){let B=w[N];if(!this.opacities[N]){let V=new Kr(B,y,!1,!1);V.isHidden()||(this.opacities[N]=V,g=g||B.text.placed||B.icon.placed)}}for(let N in M)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=M[N]);for(let N in O)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=O[N]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:s)}updateLayerOpacities(s,p){let g={};for(let y of p){let w=y.getBucket(s);w&&y.latestFeatureIndex&&s.id===w.layerIds[0]&&this.updateBucketOpacities(w,y.tileID,g,y.collisionBoxArray)}}updateBucketOpacities(s,p,g,y){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();let w=s.layers[0],M=w.layout,O=new Kr(null,0,!1,!1,!0),N=M.get("text-allow-overlap"),B=M.get("icon-allow-overlap"),V=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=M.get("text-rotation-alignment")==="map",X=M.get("text-pitch-alignment")==="map",ne=M.get("icon-text-fit")!=="none",se=new Kr(null,0,N&&(B||!s.hasIconData()||M.get("icon-optional")),B&&(N||!s.hasTextData()||M.get("text-optional")),!0);!s.collisionArrays&&y&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(y);let he=(ge,ye,ce)=>{for(let Ae=0;Ae<ye/4;Ae++)ge.opacityVertexArray.emplaceBack(ce);ge.hasVisibleVertices=ge.hasVisibleVertices||ce!==Ch},me=this.collisionBoxArrays.get(s.bucketInstanceId);for(let ge=0;ge<s.symbolInstances.length;ge++){let ye=s.symbolInstances.get(ge),{numHorizontalGlyphVertices:ce,numVerticalGlyphVertices:Ae,crossTileID:De}=ye,Fe=this.opacities[De];g[De]?Fe=O:Fe||(Fe=se,this.opacities[De]=Fe),g[De]=!0;let et=ye.numIconVertices>0,lt=this.placedOrientations[ye.crossTileID],Et=lt===o.ah.vertical,Dt=lt===o.ah.horizontal||lt===o.ah.horizontalOnly;if(ce>0||Ae>0){let dt=ja(Fe.text);he(s.text,ce,Et?Ch:dt),he(s.text,Ae,Dt?Ch:dt);let Ht=Fe.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(Mt=>{Mt>=0&&(s.text.placedSymbolArray.get(Mt).hidden=Ht||Et?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=Ht||Dt?1:0);let vr=this.variableOffsets[ye.crossTileID];vr&&this.markUsedJustification(s,vr.anchor,ye,lt);let gt=this.placedOrientations[ye.crossTileID];gt&&(this.markUsedJustification(s,"left",ye,gt),this.markUsedOrientation(s,gt,ye))}if(et){let dt=ja(Fe.icon),Ht=!(ne&&ye.verticalPlacedIconSymbolIndex&&Et);ye.placedIconSymbolIndex>=0&&(he(s.icon,ye.numIconVertices,Ht?dt:Ch),s.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(he(s.icon,ye.numVerticalIconVertices,Ht?Ch:dt),s.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}let mt=me&&me.has(ge)?me.get(ge):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){let dt=s.collisionArrays[ge];if(dt){let Ht=new o.P(0,0);if(dt.textBox||dt.verticalTextBox){let vr=!0;if(V){let gt=this.variableOffsets[De];gt?(Ht=so(gt.anchor,gt.width,gt.height,gt.textOffset,gt.textBoxScale),G&&Ht._rotate(X?this.transform.angle:-this.transform.angle)):vr=!1}if(dt.textBox||dt.verticalTextBox){let gt;dt.textBox&&(gt=Et),dt.verticalTextBox&&(gt=Dt),Ah(s.textCollisionBox.collisionVertexArray,Fe.text.placed,!vr||gt,mt.text,Ht.x,Ht.y)}}if(dt.iconBox||dt.verticalIconBox){let vr=!!(!Dt&&dt.verticalIconBox),gt;dt.iconBox&&(gt=vr),dt.verticalIconBox&&(gt=!vr),Ah(s.iconCollisionBox.collisionVertexArray,Fe.icon.placed,gt,mt.icon,ne?Ht.x:0,ne?Ht.y:0)}}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){let ge=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=ge.invProjMatrix,s.placementViewportMatrix=ge.viewportMatrix,s.collisionCircleArray=ge.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,p){let g=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function Ah(b,s,p,g,y,w){g&&g.length!==0||(g=[0,0,0,0]);let M=g[0]-cr,O=g[1]-cr,N=g[2]-cr,B=g[3]-cr;b.emplaceBack(s?1:0,p?1:0,y||0,w||0,M,O),b.emplaceBack(s?1:0,p?1:0,y||0,w||0,N,O),b.emplaceBack(s?1:0,p?1:0,y||0,w||0,N,B),b.emplaceBack(s?1:0,p?1:0,y||0,w||0,M,B)}let gn=Math.pow(2,25),ux=Math.pow(2,24),cx=Math.pow(2,17),ka=Math.pow(2,16),Fa=Math.pow(2,9),Z2=Math.pow(2,8),ls=Math.pow(2,1);function ja(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;let s=b.placed?1:0,p=Math.floor(127*b.opacity);return p*gn+s*ux+p*cx+s*ka+p*Fa+s*Z2+p*ls+s}let Ch=0;function sf(){return{isOccluded:(b,s,p)=>!1,getPitchedTextCorrection:(b,s,p)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(b,s,p,g){throw new Error("Not implemented.")},translatePosition:(b,s,p,g)=>function(y,w,M,O,N=!1){if(!M[0]&&!M[1])return[0,0];let B=N?O==="map"?y.angle:0:O==="viewport"?-y.angle:0;if(B){let V=Math.sin(B),G=Math.cos(B);M=[M[0]*G-M[1]*V,M[0]*V+M[1]*G]}return[N?M[0]:Ar(w,M[0],y.zoom),N?M[1]:Ar(w,M[1],y.zoom)]}(b,s,p,g),getCircleRadiusCorrection:b=>1}}class Ni{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,p,g,y,w){let M=this._bucketParts;for(;this._currentTileIndex<s.length;)if(p.getBucketParts(M,y,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((O,N)=>O.sortKey-N.sortKey));this._currentPartIndex<M.length;)if(p.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,w())return!0;return!1}}class Gd{constructor(s,p,g,y,w,M,O,N){this.placement=new zo(s,sf(),p,M,O,N),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(s,p,g){let y=d.now(),w=()=>!this._forceFullPlacement&&d.now()-y>2;for(;this._currentPlacementIndex>=0;){let M=p[s[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=O)&&(!M.maxzoom||M.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Ni(M)),this._inProgressLayer.continuePlacement(g[M.source],this.placement,this._showCollisionBoxes,M,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}let Ws=512/o.X/2;class Ri{constructor(s,p,g){this.tileID=s,this.bucketInstanceId=g,this._symbolsByKey={};let y=new Map;for(let w=0;w<p.length;w++){let M=p.get(w),O=M.key,N=y.get(O);N?N.push(M):y.set(O,[M])}for(let[w,M]of y){let O={positions:M.map(N=>({x:Math.floor(N.anchorX*Ws),y:Math.floor(N.anchorY*Ws)})),crossTileIDs:M.map(N=>N.crossTileID)};if(O.positions.length>128){let N=new o.av(O.positions.length,16,Uint16Array);for(let{x:B,y:V}of O.positions)N.add(B,V);N.finish(),delete O.positions,O.index=N}this._symbolsByKey[w]=O}}getScaledCoordinates(s,p){let{x:g,y,z:w}=this.tileID.canonical,{x:M,y:O,z:N}=p.canonical,B=Ws/Math.pow(2,N-w),V=(O*o.X+s.anchorY)*B,G=y*o.X*Ws;return{x:Math.floor((M*o.X+s.anchorX)*B-g*o.X*Ws),y:Math.floor(V-G)}}findMatches(s,p,g){let y=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let w=0;w<s.length;w++){let M=s.get(w);if(M.crossTileID)continue;let O=this._symbolsByKey[M.key];if(!O)continue;let N=this.getScaledCoordinates(M,p);if(O.index){let B=O.index.range(N.x-y,N.y-y,N.x+y,N.y+y).sort();for(let V of B){let G=O.crossTileIDs[V];if(!g[G]){g[G]=!0,M.crossTileID=G;break}}}else if(O.positions)for(let B=0;B<O.positions.length;B++){let V=O.positions[B],G=O.crossTileIDs[B];if(Math.abs(V.x-N.x)<=y&&Math.abs(V.y-N.y)<=y&&!g[G]){g[G]=!0,M.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Gv{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){let p=Math.round((s-this.lng)/360);if(p!==0)for(let g in this.indexes){let y=this.indexes[g],w={};for(let M in y){let O=y[M];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+p),w[O.tileID.key]=O}this.indexes[g]=w}this.lng=s}addBucket(s,p,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let w=0;w<p.symbolInstances.length;w++)p.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});let y=this.usedCrossTileIDs[s.overscaledZ];for(let w in this.indexes){let M=this.indexes[w];if(Number(w)>s.overscaledZ)for(let O in M){let N=M[O];N.tileID.isChildOf(s)&&N.findMatches(p.symbolInstances,s,y)}else{let O=M[s.scaledTo(Number(w)).key];O&&O.findMatches(p.symbolInstances,s,y)}}for(let w=0;w<p.symbolInstances.length;w++){let M=p.symbolInstances.get(w);M.crossTileID||(M.crossTileID=g.generate(),y[M.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Ri(s,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(s,p){for(let g of p.getCrossTileIDsLists())for(let y of g)delete this.usedCrossTileIDs[s][y]}removeStaleBuckets(s){let p=!1;for(let g in this.indexes){let y=this.indexes[g];for(let w in y)s[y[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,y[w]),delete y[w],p=!0)}return p}}class fx{constructor(){this.layerIndexes={},this.crossTileIDs=new Gv,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,p,g){let y=this.layerIndexes[s.id];y===void 0&&(y=this.layerIndexes[s.id]=new Zs);let w=!1,M={};y.handleWrapJump(g);for(let O of p){let N=O.getBucket(s);N&&s.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(O.tileID,N,this.crossTileIDs)&&(w=!0),M[N.bucketInstanceId]=!0)}return y.removeStaleBuckets(M)&&(w=!0),w}pruneUnusedLayers(s){let p={};s.forEach(g=>{p[g]=!0});for(let g in this.layerIndexes)p[g]||delete this.layerIndexes[g]}}let Ys=(b,s)=>o.t(b,s&&s.filter(p=>p.identifier!=="source.canvas")),Y2=o.aw();class $v extends o.E{constructor(s,p={}){super(),this._rtlPluginLoaded=()=>{for(let g in this.sourceCaches){let y=this.sourceCaches[g].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[g].reload()}},this.map=s,this.dispatcher=new We(je(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,y)=>this.getGlyphs(g,y)),this.dispatcher.registerMessageHandler("GI",(g,y)=>this.getImages(g,y)),this.imageManager=new Re,this.imageManager.setEventedParent(this),this.glyphManager=new Ke(s._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Ze(256,512),this.crossTileSymbolIndex=new fx,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ay()),di().on(nt,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;let y=this.sourceCaches[g.sourceId];if(!y)return;let w=y.getSource();if(w&&w.vectorLayerIds)for(let M in this._layers){let O=this._layers[M];O.source===w.id&&this._validateLayer(O)}})}loadURL(s,p={},g){this.fire(new o.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;let y=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;let w=this._loadStyleRequest;o.h(y,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,p,g)}).catch(M=>{this._loadStyleRequest=null,M&&!w.signal.aborted&&this.fire(new o.j(M))})}loadJSON(s,p={},g){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,d.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(s,p,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Y2,{validate:!1})}_load(s,p,g){var y;let w=p.transformStyle?p.transformStyle(g,s):s;if(!p.validate||!Ys(this,o.u(w))){this._loaded=!0,this.stylesheet=w;for(let M in w.sources)this.addSource(M,w.sources[M],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new Ie(this.stylesheet.light),this.sky=new $e(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){let s=o.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(p=>p.id),this._layers={},this._serializedLayers=null;for(let p of s){let g=o.aA(p);g.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=g}}_loadSprite(s,p=!1,g=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,M,O,N){return o._(this,void 0,void 0,function*(){let B=ie(w),V=O>1?"@2x":"",G={},X={};for(let{id:ne,url:se}of B){let he=M.transformRequest(ue(se,V,".json"),"SpriteJSON");G[ne]=o.h(he,N);let me=M.transformRequest(ue(se,V,".png"),"SpriteImage");X[ne]=D.getImage(me,N)}return yield Promise.all([...Object.values(G),...Object.values(X)]),function(ne,se){return o._(this,void 0,void 0,function*(){let he={};for(let me in ne){he[me]={};let ge=d.getImageCanvasContext((yield se[me]).data),ye=(yield ne[me]).data;for(let ce in ye){let{width:Ae,height:De,x:Fe,y:et,sdf:lt,pixelRatio:Et,stretchX:Dt,stretchY:mt,content:dt,textFitWidth:Ht,textFitHeight:vr}=ye[ce];he[me][ce]={data:null,pixelRatio:Et,sdf:lt,stretchX:Dt,stretchY:mt,content:dt,textFitWidth:Ht,textFitHeight:vr,spriteData:{width:Ae,height:De,x:Fe,y:et,context:ge}}}}return he})}(G,X)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(let M in w){this._spritesImagesIds[M]=[];let O=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(N=>!(N in w)):[];for(let N of O)this.imageManager.removeImage(N),this._changedImages[N]=!0;for(let N in w[M]){let B=M==="default"?N:`${M}:${N}`;this._spritesImagesIds[M].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,w[M][N],!1):this.imageManager.addImage(B,w[M][N]),p&&(this._changedImages[B]=!0)}}}).catch(w=>{this._spriteRequest=null,y=w,this.fire(new o.j(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),g&&g(y)})}_unloadSprite(){for(let s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(s){let p=this.sourceCaches[s.source];if(!p)return;let g=s.sourceLayer;if(!g)return;let y=p.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.j(new Error(`Source layer "${g}" does not exist on source "${y.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,p=!1){let g=this._serializedAllLayers();if(!s||s.length===0)return Object.values(p?o.aB(g):g);let y=[];for(let w of s)if(g[w]){let M=p?o.aB(g[w]):g[w];y.push(M)}return y}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};let p=Object.keys(this._layers);for(let g of p){let y=this._layers[g];y.type!=="custom"&&(s[g]=y.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(let s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;let p=this._changed;if(p){let y=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(y.length||w.length)&&this._updateWorkerLayers(y,w);for(let M in this._updatedSources){let O=this._updatedSources[M];if(O==="reload")this._reloadSource(M);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let M in this._updatedPaintProps)this._layers[M].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}let g={};for(let y in this.sourceCaches){let w=this.sourceCaches[y];g[y]=w.used,w.used=!1}for(let y of this._order){let w=this._layers[y];w.recalculate(s,this._availableImages),!w.isHidden(s.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(let y in g){let w=this.sourceCaches[y];!!g[y]!=!!w.used&&w.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(s),this.sky.recalculate(s),this.z=s.zoom,p&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let s=Object.keys(this._changedImages);if(s.length){for(let p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,p={}){var g;this._checkLoaded();let y=this.serialize();if(s=p.transformStyle?p.transformStyle(y,s):s,((g=p.validate)===null||g===void 0||g)&&Ys(this,o.u(s)))return!1;(s=o.aB(s)).layers=o.az(s.layers);let w=o.aC(y,s),M=this._getOperationsToPerform(w);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(let O of M.operations)O();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){let p=[],g=[];for(let y of s)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":p.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":p.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,y.args));break;case"setSky":p.push(()=>this.setSky.apply(this,y.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setTransition":p.push(()=>{});break;default:g.push(y.command);}return{operations:p,unimplemented:g}}addImage(s,p){if(this.getImage(s))return this.fire(new o.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,p),this._afterImageUpdated(s)}updateImage(s,p){this.imageManager.updateImage(s,p)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new o.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,p,g={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.u.source,`sources.${s}`,p,null,g))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);let y=this.sourceCaches[s]=new jt(s,p,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:s})),y.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(let g in this._layers)if(this._layers[g].source===s)return this.fire(new o.j(new Error(`Source "${s}" cannot be removed while layer "${g}" is using it.`)));let p=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],p.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,p){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);let g=this.sourceCaches[s].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(p),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,p,g={}){this._checkLoaded();let y=s.id;if(this.getLayer(y))return void this.fire(new o.j(new Error(`Layer "${y}" already exists on this map.`)));let w;if(s.type==="custom"){if(Ys(this,o.aD(s)))return;w=o.aA(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(y,s.source),s=o.aB(s),s=o.e(s,{source:y})),this._validate(o.u.layer,`layers.${y}`,s,{arrayIndex:-1},g))return;w=o.aA(s),this._validateLayer(w),w.setEventedParent(this,{layer:{id:y}})}let M=p?this._order.indexOf(p):this._order.length;if(p&&M===-1)this.fire(new o.j(new Error(`Cannot add layer "${y}" before non-existing layer "${p}".`)));else{if(this._order.splice(M,0,y),this._layerOrderChanged=!0,this._layers[y]=w,this._removedLayers[y]&&w.source&&w.type!=="custom"){let O=this._removedLayers[y];delete this._removedLayers[y],O.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(s,p){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new o.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===p)return;let g=this._order.indexOf(s);this._order.splice(g,1);let y=p?this._order.indexOf(p):this._order.length;p&&y===-1?this.fire(new o.j(new Error(`Cannot move layer "${s}" before non-existing layer "${p}".`))):(this._order.splice(y,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();let p=this._layers[s];if(!p)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${s}".`)));p.setEventedParent(null);let g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=p,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],p.onRemove&&p.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,p,g){this._checkLoaded();let y=this.getLayer(s);y?y.minzoom===p&&y.maxzoom===g||(p!=null&&(y.minzoom=p),g!=null&&(y.maxzoom=g),this._updateLayer(y)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,p,g={}){this._checkLoaded();let y=this.getLayer(s);if(y){if(!o.aE(y.filter,p))return p==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(o.u.filter,`layers.${y.id}.filter`,p,null,g)||(y.filter=o.aB(p),this._updateLayer(y)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return o.aB(this.getLayer(s).filter)}setLayoutProperty(s,p,g,y={}){this._checkLoaded();let w=this.getLayer(s);w?o.aE(w.getLayoutProperty(p),g)||(w.setLayoutProperty(p,g,y),this._updateLayer(w)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,p){let g=this.getLayer(s);if(g)return g.getLayoutProperty(p);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,p,g,y={}){this._checkLoaded();let w=this.getLayer(s);w?o.aE(w.getPaintProperty(p),g)||(w.setPaintProperty(p,g,y)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,p){return this.getLayer(s).getPaintProperty(p)}setFeatureState(s,p){this._checkLoaded();let g=s.source,y=s.sourceLayer,w=this.sourceCaches[g];if(w===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));let M=w.getSource().type;M==="geojson"&&y?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||y?(s.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),w.setFeatureState(y,s.id,p)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,p){this._checkLoaded();let g=s.source,y=this.sourceCaches[g];if(y===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));let w=y.getSource().type,M=w==="vector"?s.sourceLayer:void 0;w!=="vector"||M?p&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(M,s.id,p):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();let p=s.source,g=s.sourceLayer,y=this.sourceCaches[p];if(y!==void 0)return y.getSource().type!=="vector"||g?(s.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(g,s.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let s=o.aF(this.sourceCaches,w=>w.serialize()),p=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,y=this.stylesheet;return o.aG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:s,layers:p,terrain:g},w=>w!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){let p=M=>this._layers[M].type==="fill-extrusion",g={},y=[];for(let M=this._order.length-1;M>=0;M--){let O=this._order[M];if(p(O)){g[O]=M;for(let N of s){let B=N[O];if(B)for(let V of B)y.push(V)}}}y.sort((M,O)=>O.intersectionZ-M.intersectionZ);let w=[];for(let M=this._order.length-1;M>=0;M--){let O=this._order[M];if(p(O))for(let N=y.length-1;N>=0;N--){let B=y[N].feature;if(g[B.layer.id]<M)break;w.push(B),y.pop()}else for(let N of s){let B=N[O];if(B)for(let V of B)w.push(V.feature)}}return w}queryRenderedFeatures(s,p,g){p&&p.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",p.filter,null,p);let y={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(let O of p.layers){let N=this._layers[O];if(!N)return this.fire(new o.j(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];y[N.source]=!0}}let w=[];p.availableImages=this._availableImages;let M=this._serializedAllLayers();for(let O in this.sourceCaches)p.layers&&!y[O]||w.push(kt(this.sourceCaches[O],this._layers,M,s,p,g));return this.placement&&w.push(function(O,N,B,V,G,X,ne){let se={},he=X.queryRenderedSymbols(V),me=[];for(let ge of Object.keys(he).map(Number))me.push(ne[ge]);me.sort(Gt);for(let ge of me){let ye=ge.featureIndex.lookupSymbolFeatures(he[ge.bucketInstanceId],N,ge.bucketIndex,ge.sourceLayerIndex,G.filter,G.layers,G.availableImages,O);for(let ce in ye){let Ae=se[ce]=se[ce]||[],De=ye[ce];De.sort((Fe,et)=>{let lt=ge.featureSortOrder;if(lt){let Et=lt.indexOf(Fe.featureIndex);return lt.indexOf(et.featureIndex)-Et}return et.featureIndex-Fe.featureIndex});for(let Fe of De)Ae.push(Fe)}}for(let ge in se)se[ge].forEach(ye=>{let ce=ye.feature,Ae=B[O[ge].source].getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=Ae});return se}(this._layers,M,this.sourceCaches,s,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(s,p){p&&p.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",p.filter,null,p);let g=this.sourceCaches[s];return g?function(y,w){let M=y.getRenderableIds().map(B=>y.getTileByID(B)),O=[],N={};for(let B=0;B<M.length;B++){let V=M[B],G=V.tileID.canonical.key;N[G]||(N[G]=!0,V.querySourceFeatures(O,w))}return O}(g,p):[]}getLight(){return this.light.getLight()}setLight(s,p={}){this._checkLoaded();let g=this.light.getLight(),y=!1;for(let M in s)if(!o.aE(s[M],g[M])){y=!0;break}if(!y)return;let w={now:d.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,p),this.light.updateTransitions(w)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,p={}){let g=this.getSky(),y=!1;if(!s&&!g)return;if(s&&!g)y=!0;else if(!s&&g)y=!0;else for(let M in s)if(!o.aE(s[M],g[M])){y=!0;break}if(!y)return;let w={now:d.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,p),this.sky.updateTransitions(w)}_validate(s,p,g,y,w={}){return(!w||w.validate!==!1)&&Ys(this,s.call(o.u,o.e({key:p,style:this.serialize(),value:g,styleSpec:o.v},y)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),di().off(nt,this._rtlPluginLoaded);for(let p in this._layers)this._layers[p].setEventedParent(null);for(let p in this.sourceCaches){let g=this.sourceCaches[p];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(let p in this.sourceCaches)this.sourceCaches[p].update(s,this.map.terrain)}_generateCollisionBoxes(){for(let s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,p,g,y,w=!1){let M=!1,O=!1,N={};for(let B of this._order){let V=this._layers[B];if(V.type!=="symbol")continue;if(!N[V.source]){let X=this.sourceCaches[V.source];N[V.source]=X.getRenderableIds(!0).map(ne=>X.getTileByID(ne)).sort((ne,se)=>se.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(se.tileID)?-1:1))}let G=this.crossTileSymbolIndex.addLayer(V,N[V.source],s.center.lng);M=M||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(d.now(),s.zoom))&&(this.pauseablePlacement=new Gd(s,this.map.terrain,this._order,w,p,g,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(d.now()),O=!0),M&&this.pauseablePlacement.placement.setStale()),O||M)for(let B of this._order){let V=this._layers[B];V.type==="symbol"&&this.placement.updateLayerOpacities(V,N[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(d.now())}_releaseSymbolFadeTiles(){for(let s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,p){return o._(this,void 0,void 0,function*(){let g=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();let y=this.sourceCaches[p.source];return y&&y.setDependencies(p.tileID.key,p.type,p.icons),g})}getGlyphs(s,p){return o._(this,void 0,void 0,function*(){let g=yield this.glyphManager.getGlyphs(p.stacks),y=this.sourceCaches[p.source];return y&&y.setDependencies(p.tileID.key,p.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,p={}){this._checkLoaded(),s&&this._validate(o.u.glyphs,"glyphs",s,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,p,g={},y){this._checkLoaded();let w=[{id:s,url:p}],M=[...ie(this.stylesheet.sprite),...w];this._validate(o.u.sprite,"sprite",M,null,g)||(this.stylesheet.sprite=M,this._loadSprite(w,!0,y))}removeSprite(s){this._checkLoaded();let p=ie(this.stylesheet.sprite);if(p.find(g=>g.id===s)){if(this._spritesImagesIds[s])for(let g of this._spritesImagesIds[s])this.imageManager.removeImage(g),this._changedImages[g]=!0;p.splice(p.findIndex(g=>g.id===s),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return ie(this.stylesheet.sprite)}setSprite(s,p={},g){this._checkLoaded(),s&&this._validate(o.u.sprite,"sprite",s,null,p)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,g):(this._unloadSprite(),g&&g(null)))}}var lf=o.Y([{name:"a_pos",type:"Int16",components:2}]);let ac={prelude:on(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:on(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:on(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:on(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:on("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:on(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:on(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:on("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:on("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:on("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:on(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:on(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:on(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:on(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:on(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:on(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:on(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:on(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:on(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:on(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:on(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:on(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:on(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:on(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:on(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:on(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:on("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:on("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:on("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:on("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function on(b,s){let p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/attribute ([\w]+) ([\w]+)/g),y=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=w?w.concat(y):y,O={};return{fragmentSource:b=b.replace(p,(N,B,V,G,X)=>(O[X]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${V} ${G} ${X};
#else
uniform ${V} ${G} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${V} ${G} ${X} = u_${X};
#endif
`)),vertexSource:s=s.replace(p,(N,B,V,G,X)=>{let ne=G==="float"?"vec2":"vec4",se=X.match(/color/)?"color":ne;return O[X]?B==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${V} ${ne} a_${X};
varying ${V} ${G} ${X};
#else
uniform ${V} ${G} u_${X};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${V} ${G} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${se}(a_${X}, u_${X}_t);
#else
    ${V} ${G} ${X} = u_${X};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${V} ${ne} a_${X};
#else
uniform ${V} ${G} u_${X};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${V} ${G} ${X} = a_${X};
#else
    ${V} ${G} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${V} ${G} ${X} = unpack_mix_${se}(a_${X}, u_${X}_t);
#else
    ${V} ${G} ${X} = u_${X};
#endif
`}),staticAttributes:g,staticUniforms:M}}class hx{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,p,g,y,w,M,O,N,B){this.context=s;let V=this.boundPaintVertexBuffers.length!==y.length;for(let G=0;!V&&G<y.length;G++)this.boundPaintVertexBuffers[G]!==y[G]&&(V=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==g||V||this.boundIndexBuffer!==w||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==B?this.freshBind(p,g,y,w,M,O,N,B):(s.bindVertexArray.set(this.vao),O&&O.bind(),w&&w.dynamicDraw&&w.bind(),N&&N.bind(),B&&B.bind())}freshBind(s,p,g,y,w,M,O,N){let B=s.numAttributes,V=this.context,G=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=y,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=N,p.enableAttributes(G,s);for(let X of g)X.enableAttributes(G,s);M&&M.enableAttributes(G,s),O&&O.enableAttributes(G,s),N&&N.enableAttributes(G,s),p.bind(),p.setVertexAttribPointers(G,s,w);for(let X of g)X.bind(),X.setVertexAttribPointers(G,s,w);M&&(M.bind(),M.setVertexAttribPointers(G,s,w)),y&&y.bind(),O&&(O.bind(),O.setVertexAttribPointers(G,s,w)),N&&(N.bind(),N.setVertexAttribPointers(G,s,w)),V.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let px=(b,s,p,g,y)=>({u_matrix:b,u_texture:0,u_ele_delta:s,u_fog_matrix:p,u_fog_color:g?g.properties.get("fog-color"):o.aM.white,u_fog_ground_blend:g?g.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?g.calculateFogBlendOpacity(y):0,u_horizon_color:g?g.properties.get("horizon-color"):o.aM.white,u_horizon_fog_blend:g?g.properties.get("horizon-fog-blend"):1});function Mh(b){let s=[];for(let p=0;p<b.length;p++){if(b[p]===null)continue;let g=b[p].split(" ");s.push(g.pop())}return s}class dx{constructor(s,p,g,y,w,M){let O=s.gl;this.program=O.createProgram();let N=Mh(p.staticAttributes),B=g?g.getBinderAttributes():[],V=N.concat(B),G=ac.prelude.staticUniforms?Mh(ac.prelude.staticUniforms):[],X=p.staticUniforms?Mh(p.staticUniforms):[],ne=g?g.getBinderUniforms():[],se=G.concat(X).concat(ne),he=[];for(let Fe of se)he.indexOf(Fe)<0&&he.push(Fe);let me=g?g.defines():[];w&&me.push("#define OVERDRAW_INSPECTOR;"),M&&me.push("#define TERRAIN3D;");let ge=me.concat(ac.prelude.fragmentSource,p.fragmentSource).join(`
`),ye=me.concat(ac.prelude.vertexSource,p.vertexSource).join(`
`),ce=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(ce,ge),O.compileShader(ce),!O.getShaderParameter(ce,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(ce)}`);O.attachShader(this.program,ce);let Ae=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Ae,ye),O.compileShader(Ae),!O.getShaderParameter(Ae,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(Ae)}`);O.attachShader(this.program,Ae),this.attributes={};let De={};this.numAttributes=V.length;for(let Fe=0;Fe<this.numAttributes;Fe++)V[Fe]&&(O.bindAttribLocation(this.program,Fe,V[Fe]),this.attributes[V[Fe]]=Fe);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(Ae),O.deleteShader(ce);for(let Fe=0;Fe<he.length;Fe++){let et=he[Fe];if(et&&!De[et]){let lt=O.getUniformLocation(this.program,et);lt&&(De[et]=lt)}}this.fixedUniforms=y(s,De),this.terrainUniforms=((Fe,et)=>({u_depth:new o.aH(Fe,et.u_depth),u_terrain:new o.aH(Fe,et.u_terrain),u_terrain_dim:new o.aI(Fe,et.u_terrain_dim),u_terrain_matrix:new o.aJ(Fe,et.u_terrain_matrix),u_terrain_unpack:new o.aK(Fe,et.u_terrain_unpack),u_terrain_exaggeration:new o.aI(Fe,et.u_terrain_exaggeration)}))(s,De),this.binderUniforms=g?g.getUniforms(s,De):[]}draw(s,p,g,y,w,M,O,N,B,V,G,X,ne,se,he,me,ge,ye){let ce=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(y),s.setColorMode(w),s.setCullFace(M),N){s.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,N.depthTexture),s.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,N.texture);for(let De in this.terrainUniforms)this.terrainUniforms[De].set(N[De])}for(let De in this.fixedUniforms)this.fixedUniforms[De].set(O[De]);he&&he.setUniforms(s,this.binderUniforms,ne,{zoom:se});let Ae=0;switch(p){case ce.LINES:Ae=2;break;case ce.TRIANGLES:Ae=3;break;case ce.LINE_STRIP:Ae=1;}for(let De of X.get()){let Fe=De.vaos||(De.vaos={});(Fe[B]||(Fe[B]=new hx)).bind(s,this,V,he?he.getPaintVertexBuffers():[],G,De.vertexOffset,me,ge,ye),ce.drawElements(p,De.primitiveLength*Ae,ce.UNSIGNED_SHORT,De.primitiveOffset*Ae*2)}}}function Hv(b,s,p){let g=1/Ar(p,1,s.transform.tileZoom),y=Math.pow(2,p.tileID.overscaledZ),w=p.tileSize*Math.pow(2,s.transform.tileZoom)/y,M=w*(p.tileID.canonical.x+p.tileID.wrap*y),O=w*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[g,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[M>>16,O>>16],u_pixel_coord_lower:[65535&M,65535&O]}}let $d=(b,s,p,g)=>{let y=s.style.light,w=y.properties.get("position"),M=[w.x,w.y,w.z],O=function(){var B=new o.A(9);return o.A!=Float32Array&&(B[1]=0,B[2]=0,B[3]=0,B[5]=0,B[6]=0,B[7]=0),B[0]=1,B[4]=1,B[8]=1,B}();y.properties.get("anchor")==="viewport"&&function(B,V){var G=Math.sin(V),X=Math.cos(V);B[0]=X,B[1]=G,B[2]=0,B[3]=-G,B[4]=X,B[5]=0,B[6]=0,B[7]=0,B[8]=1}(O,-s.transform.angle),function(B,V,G){var X=V[0],ne=V[1],se=V[2];B[0]=X*G[0]+ne*G[3]+se*G[6],B[1]=X*G[1]+ne*G[4]+se*G[7],B[2]=X*G[2]+ne*G[5]+se*G[8]}(M,M,O);let N=y.properties.get("color");return{u_matrix:b,u_lightpos:M,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[N.r,N.g,N.b],u_vertical_gradient:+p,u_opacity:g}},Wv=(b,s,p,g,y,w,M)=>o.e($d(b,s,p,g),Hv(w,s,M),{u_height_factor:-Math.pow(2,y.overscaledZ)/M.tileSize/8}),Rh=b=>({u_matrix:b}),HT=(b,s,p,g)=>o.e(Rh(b),Hv(p,s,g)),K2=(b,s)=>({u_matrix:b,u_world:s}),WT=(b,s,p,g,y)=>o.e(HT(b,s,p,g),{u_world:y}),X2=(b,s,p,g)=>{let y=b.transform,w,M;if(g.paint.get("circle-pitch-alignment")==="map"){let O=Ar(p,1,y.zoom);w=!0,M=[O,O]}else w=!1,M=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(s.posMatrix,p,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:M}},uf=(b,s,p)=>({u_matrix:b,u_inv_matrix:s,u_camera_to_center_distance:p.cameraToCenterDistance,u_viewport_size:[p.width,p.height]}),Hd=(b,s,p=1)=>({u_matrix:b,u_color:s,u_overlay:0,u_overlay_scale:p}),aa=b=>({u_matrix:b}),sa=(b,s,p,g)=>({u_matrix:b,u_extrude_scale:Ar(s,1,p),u_intensity:g}),Zv=(b,s,p,g)=>{let y=o.H();o.aP(y,0,b.width,b.height,0,0,1);let w=b.context.gl;return{u_matrix:y,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:p,u_color_ramp:g,u_opacity:s.paint.get("heatmap-opacity")}};function Yv(b,s){let p=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new o.Z(0,g/p).toLngLat().lat,new o.Z(0,(g+1)/p).toLngLat().lat]}let Kv=(b,s,p,g)=>{let y=b.transform;return{u_matrix:KT(b,s,p,g),u_ratio:1/Ar(s,1,y.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},ZT=(b,s,p,g,y)=>o.e(Kv(b,s,p,y),{u_image:0,u_image_height:g}),Ph=(b,s,p,g,y)=>{let w=b.transform,M=YT(s,w);return{u_matrix:KT(b,s,p,y),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Ar(s,1,w.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[M,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},J2=(b,s,p,g,y,w)=>{let M=b.lineAtlas,O=YT(s,b.transform),N=p.layout.get("line-cap")==="round",B=M.getDash(g.from,N),V=M.getDash(g.to,N),G=B.width*y.fromScale,X=V.width*y.toScale;return o.e(Kv(b,s,p,w),{u_patternscale_a:[O/G,-B.height/2],u_patternscale_b:[O/X,-V.height/2],u_sdfgamma:M.width/(256*Math.min(G,X)*b.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:V.y,u_mix:y.t})};function YT(b,s){return 1/Ar(b,1,s.tileZoom)}function KT(b,s,p,g){return b.translatePosMatrix(g?g.posMatrix:s.tileID.posMatrix,s,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}let Q2=(b,s,p,g,y)=>{return{u_matrix:b,u_tl_parent:s,u_scale_parent:p,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(M=y.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(w=y.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:eq(y.paint.get("raster-hue-rotate"))};var w,M};function eq(b){b*=Math.PI/180;let s=Math.sin(b),p=Math.cos(b);return[(2*p+1)/3,(-Math.sqrt(3)*s-p+1)/3,(Math.sqrt(3)*s-p+1)/3]}let XT=(b,s,p,g,y,w,M,O,N,B,V,G,X,ne)=>{let se=M.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:se.width/se.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:N,u_coord_matrix:B,u_is_text:+G,u_pitch_with_map:+g,u_is_along_line:y,u_is_variable_anchor:w,u_texsize:X,u_texture:0,u_translation:V,u_pitched_scale:ne}},Wd=(b,s,p,g,y,w,M,O,N,B,V,G,X,ne,se)=>{let he=M.transform;return o.e(XT(b,s,p,g,y,w,M,O,N,B,V,G,X,se),{u_gamma_scale:g?Math.cos(he._pitch)*he.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:+ne})},mx=(b,s,p,g,y,w,M,O,N,B,V,G,X,ne)=>o.e(Wd(b,s,p,g,y,w,M,O,N,B,V,!0,G,!0,ne),{u_texsize_icon:X,u_texture_icon:1}),Xv=(b,s,p)=>({u_matrix:b,u_opacity:s,u_color:p}),vx=(b,s,p,g,y,w)=>o.e(function(M,O,N,B){let V=N.imageManager.getPattern(M.from.toString()),G=N.imageManager.getPattern(M.to.toString()),{width:X,height:ne}=N.imageManager.getPixelSize(),se=Math.pow(2,B.tileID.overscaledZ),he=B.tileSize*Math.pow(2,N.transform.tileZoom)/se,me=he*(B.tileID.canonical.x+B.tileID.wrap*se),ge=he*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:V.tl,u_pattern_br_a:V.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[X,ne],u_mix:O.t,u_pattern_size_a:V.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/Ar(B,1,N.transform.tileZoom),u_pixel_coord_upper:[me>>16,ge>>16],u_pixel_coord_lower:[65535&me,65535&ge]}}(g,w,p,y),{u_matrix:b,u_opacity:s}),gx={fillExtrusion:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_lightpos:new o.aN(b,s.u_lightpos),u_lightintensity:new o.aI(b,s.u_lightintensity),u_lightcolor:new o.aN(b,s.u_lightcolor),u_vertical_gradient:new o.aI(b,s.u_vertical_gradient),u_opacity:new o.aI(b,s.u_opacity)}),fillExtrusionPattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_lightpos:new o.aN(b,s.u_lightpos),u_lightintensity:new o.aI(b,s.u_lightintensity),u_lightcolor:new o.aN(b,s.u_lightcolor),u_vertical_gradient:new o.aI(b,s.u_vertical_gradient),u_height_factor:new o.aI(b,s.u_height_factor),u_image:new o.aH(b,s.u_image),u_texsize:new o.aO(b,s.u_texsize),u_pixel_coord_upper:new o.aO(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(b,s.u_pixel_coord_lower),u_scale:new o.aN(b,s.u_scale),u_fade:new o.aI(b,s.u_fade),u_opacity:new o.aI(b,s.u_opacity)}),fill:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix)}),fillPattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_image:new o.aH(b,s.u_image),u_texsize:new o.aO(b,s.u_texsize),u_pixel_coord_upper:new o.aO(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(b,s.u_pixel_coord_lower),u_scale:new o.aN(b,s.u_scale),u_fade:new o.aI(b,s.u_fade)}),fillOutline:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_world:new o.aO(b,s.u_world)}),fillOutlinePattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_world:new o.aO(b,s.u_world),u_image:new o.aH(b,s.u_image),u_texsize:new o.aO(b,s.u_texsize),u_pixel_coord_upper:new o.aO(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(b,s.u_pixel_coord_lower),u_scale:new o.aN(b,s.u_scale),u_fade:new o.aI(b,s.u_fade)}),circle:(b,s)=>({u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_scale_with_map:new o.aH(b,s.u_scale_with_map),u_pitch_with_map:new o.aH(b,s.u_pitch_with_map),u_extrude_scale:new o.aO(b,s.u_extrude_scale),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_matrix:new o.aJ(b,s.u_matrix)}),collisionBox:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_pixel_extrude_scale:new o.aO(b,s.u_pixel_extrude_scale)}),collisionCircle:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_inv_matrix:new o.aJ(b,s.u_inv_matrix),u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_viewport_size:new o.aO(b,s.u_viewport_size)}),debug:(b,s)=>({u_color:new o.aL(b,s.u_color),u_matrix:new o.aJ(b,s.u_matrix),u_overlay:new o.aH(b,s.u_overlay),u_overlay_scale:new o.aI(b,s.u_overlay_scale)}),clippingMask:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix)}),heatmap:(b,s)=>({u_extrude_scale:new o.aI(b,s.u_extrude_scale),u_intensity:new o.aI(b,s.u_intensity),u_matrix:new o.aJ(b,s.u_matrix)}),heatmapTexture:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_world:new o.aO(b,s.u_world),u_image:new o.aH(b,s.u_image),u_color_ramp:new o.aH(b,s.u_color_ramp),u_opacity:new o.aI(b,s.u_opacity)}),hillshade:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_image:new o.aH(b,s.u_image),u_latrange:new o.aO(b,s.u_latrange),u_light:new o.aO(b,s.u_light),u_shadow:new o.aL(b,s.u_shadow),u_highlight:new o.aL(b,s.u_highlight),u_accent:new o.aL(b,s.u_accent)}),hillshadePrepare:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_image:new o.aH(b,s.u_image),u_dimension:new o.aO(b,s.u_dimension),u_zoom:new o.aI(b,s.u_zoom),u_unpack:new o.aK(b,s.u_unpack)}),line:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_ratio:new o.aI(b,s.u_ratio),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(b,s.u_units_to_pixels)}),lineGradient:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_ratio:new o.aI(b,s.u_ratio),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(b,s.u_units_to_pixels),u_image:new o.aH(b,s.u_image),u_image_height:new o.aI(b,s.u_image_height)}),linePattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_texsize:new o.aO(b,s.u_texsize),u_ratio:new o.aI(b,s.u_ratio),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_image:new o.aH(b,s.u_image),u_units_to_pixels:new o.aO(b,s.u_units_to_pixels),u_scale:new o.aN(b,s.u_scale),u_fade:new o.aI(b,s.u_fade)}),lineSDF:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_ratio:new o.aI(b,s.u_ratio),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(b,s.u_units_to_pixels),u_patternscale_a:new o.aO(b,s.u_patternscale_a),u_patternscale_b:new o.aO(b,s.u_patternscale_b),u_sdfgamma:new o.aI(b,s.u_sdfgamma),u_image:new o.aH(b,s.u_image),u_tex_y_a:new o.aI(b,s.u_tex_y_a),u_tex_y_b:new o.aI(b,s.u_tex_y_b),u_mix:new o.aI(b,s.u_mix)}),raster:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_tl_parent:new o.aO(b,s.u_tl_parent),u_scale_parent:new o.aI(b,s.u_scale_parent),u_buffer_scale:new o.aI(b,s.u_buffer_scale),u_fade_t:new o.aI(b,s.u_fade_t),u_opacity:new o.aI(b,s.u_opacity),u_image0:new o.aH(b,s.u_image0),u_image1:new o.aH(b,s.u_image1),u_brightness_low:new o.aI(b,s.u_brightness_low),u_brightness_high:new o.aI(b,s.u_brightness_high),u_saturation_factor:new o.aI(b,s.u_saturation_factor),u_contrast_factor:new o.aI(b,s.u_contrast_factor),u_spin_weights:new o.aN(b,s.u_spin_weights)}),symbolIcon:(b,s)=>({u_is_size_zoom_constant:new o.aH(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,s.u_is_size_feature_constant),u_size_t:new o.aI(b,s.u_size_t),u_size:new o.aI(b,s.u_size),u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_pitch:new o.aI(b,s.u_pitch),u_rotate_symbol:new o.aH(b,s.u_rotate_symbol),u_aspect_ratio:new o.aI(b,s.u_aspect_ratio),u_fade_change:new o.aI(b,s.u_fade_change),u_matrix:new o.aJ(b,s.u_matrix),u_label_plane_matrix:new o.aJ(b,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,s.u_coord_matrix),u_is_text:new o.aH(b,s.u_is_text),u_pitch_with_map:new o.aH(b,s.u_pitch_with_map),u_is_along_line:new o.aH(b,s.u_is_along_line),u_is_variable_anchor:new o.aH(b,s.u_is_variable_anchor),u_texsize:new o.aO(b,s.u_texsize),u_texture:new o.aH(b,s.u_texture),u_translation:new o.aO(b,s.u_translation),u_pitched_scale:new o.aI(b,s.u_pitched_scale)}),symbolSDF:(b,s)=>({u_is_size_zoom_constant:new o.aH(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,s.u_is_size_feature_constant),u_size_t:new o.aI(b,s.u_size_t),u_size:new o.aI(b,s.u_size),u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_pitch:new o.aI(b,s.u_pitch),u_rotate_symbol:new o.aH(b,s.u_rotate_symbol),u_aspect_ratio:new o.aI(b,s.u_aspect_ratio),u_fade_change:new o.aI(b,s.u_fade_change),u_matrix:new o.aJ(b,s.u_matrix),u_label_plane_matrix:new o.aJ(b,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,s.u_coord_matrix),u_is_text:new o.aH(b,s.u_is_text),u_pitch_with_map:new o.aH(b,s.u_pitch_with_map),u_is_along_line:new o.aH(b,s.u_is_along_line),u_is_variable_anchor:new o.aH(b,s.u_is_variable_anchor),u_texsize:new o.aO(b,s.u_texsize),u_texture:new o.aH(b,s.u_texture),u_gamma_scale:new o.aI(b,s.u_gamma_scale),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_is_halo:new o.aH(b,s.u_is_halo),u_translation:new o.aO(b,s.u_translation),u_pitched_scale:new o.aI(b,s.u_pitched_scale)}),symbolTextAndIcon:(b,s)=>({u_is_size_zoom_constant:new o.aH(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(b,s.u_is_size_feature_constant),u_size_t:new o.aI(b,s.u_size_t),u_size:new o.aI(b,s.u_size),u_camera_to_center_distance:new o.aI(b,s.u_camera_to_center_distance),u_pitch:new o.aI(b,s.u_pitch),u_rotate_symbol:new o.aH(b,s.u_rotate_symbol),u_aspect_ratio:new o.aI(b,s.u_aspect_ratio),u_fade_change:new o.aI(b,s.u_fade_change),u_matrix:new o.aJ(b,s.u_matrix),u_label_plane_matrix:new o.aJ(b,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(b,s.u_coord_matrix),u_is_text:new o.aH(b,s.u_is_text),u_pitch_with_map:new o.aH(b,s.u_pitch_with_map),u_is_along_line:new o.aH(b,s.u_is_along_line),u_is_variable_anchor:new o.aH(b,s.u_is_variable_anchor),u_texsize:new o.aO(b,s.u_texsize),u_texsize_icon:new o.aO(b,s.u_texsize_icon),u_texture:new o.aH(b,s.u_texture),u_texture_icon:new o.aH(b,s.u_texture_icon),u_gamma_scale:new o.aI(b,s.u_gamma_scale),u_device_pixel_ratio:new o.aI(b,s.u_device_pixel_ratio),u_is_halo:new o.aH(b,s.u_is_halo),u_translation:new o.aO(b,s.u_translation),u_pitched_scale:new o.aI(b,s.u_pitched_scale)}),background:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_opacity:new o.aI(b,s.u_opacity),u_color:new o.aL(b,s.u_color)}),backgroundPattern:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_opacity:new o.aI(b,s.u_opacity),u_image:new o.aH(b,s.u_image),u_pattern_tl_a:new o.aO(b,s.u_pattern_tl_a),u_pattern_br_a:new o.aO(b,s.u_pattern_br_a),u_pattern_tl_b:new o.aO(b,s.u_pattern_tl_b),u_pattern_br_b:new o.aO(b,s.u_pattern_br_b),u_texsize:new o.aO(b,s.u_texsize),u_mix:new o.aI(b,s.u_mix),u_pattern_size_a:new o.aO(b,s.u_pattern_size_a),u_pattern_size_b:new o.aO(b,s.u_pattern_size_b),u_scale_a:new o.aI(b,s.u_scale_a),u_scale_b:new o.aI(b,s.u_scale_b),u_pixel_coord_upper:new o.aO(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(b,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aI(b,s.u_tile_units_to_pixels)}),terrain:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_texture:new o.aH(b,s.u_texture),u_ele_delta:new o.aI(b,s.u_ele_delta),u_fog_matrix:new o.aJ(b,s.u_fog_matrix),u_fog_color:new o.aL(b,s.u_fog_color),u_fog_ground_blend:new o.aI(b,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.aI(b,s.u_fog_ground_blend_opacity),u_horizon_color:new o.aL(b,s.u_horizon_color),u_horizon_fog_blend:new o.aI(b,s.u_horizon_fog_blend)}),terrainDepth:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_ele_delta:new o.aI(b,s.u_ele_delta)}),terrainCoords:(b,s)=>({u_matrix:new o.aJ(b,s.u_matrix),u_texture:new o.aH(b,s.u_texture),u_terrain_coords_id:new o.aI(b,s.u_terrain_coords_id),u_ele_delta:new o.aI(b,s.u_ele_delta)}),sky:(b,s)=>({u_sky_color:new o.aL(b,s.u_sky_color),u_horizon_color:new o.aL(b,s.u_horizon_color),u_horizon:new o.aI(b,s.u_horizon),u_sky_horizon_blend:new o.aI(b,s.u_sky_horizon_blend)})};class El{constructor(s,p,g){this.context=s;let y=s.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){let p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let tq={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yx{constructor(s,p,g,y){this.length=p.length,this.attributes=g,this.itemSize=p.bytesPerElement,this.dynamicDraw=y,this.context=s;let w=s.gl;this.buffer=w.createBuffer(),s.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);let p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,p){for(let g=0;g<this.attributes.length;g++){let y=p.attributes[this.attributes[g].name];y!==void 0&&s.enableVertexAttribArray(y)}}setVertexAttribPointers(s,p,g){for(let y=0;y<this.attributes.length;y++){let w=this.attributes[y],M=p.attributes[w.name];M!==void 0&&s.vertexAttribPointer(M,w.components,s[tq[w.type]],!1,this.itemSize,w.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let cf=new WeakMap;function sc(b){var s;if(cf.has(b))return cf.get(b);{let p=(s=b.getParameter(b.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return cf.set(b,p),p}}class fn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jv extends fn{getDefault(){return o.aM.transparent}set(s){let p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class rq extends fn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Oh extends fn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class nq extends fn{getDefault(){return[!0,!0,!0,!0]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class JT extends fn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class iq extends fn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class QT extends fn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){let p=this.current;(s.func!==p.func||s.ref!==p.ref||s.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class _x extends fn{getDefault(){let s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class eI extends fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;s?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=s,this.dirty=!1}}class tI extends fn{getDefault(){return[0,1]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class rI extends fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;s?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=s,this.dirty=!1}}class nI extends fn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class ff extends fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;s?p.enable(p.BLEND):p.disable(p.BLEND),this.current=s,this.dirty=!1}}class iI extends fn{getDefault(){let s=this.gl;return[s.ONE,s.ZERO]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class oq extends fn{getDefault(){return o.aM.transparent}set(s){let p=this.current;(s.r!==p.r||s.g!==p.g||s.b!==p.b||s.a!==p.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class oI extends fn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Zd extends fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;s?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=s,this.dirty=!1}}class aq extends fn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class Qv extends fn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class sq extends fn{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class lq extends fn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class aI extends fn{getDefault(){let s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){let p=this.current;(s[0]!==p[0]||s[1]!==p[1]||s[2]!==p[2]||s[3]!==p[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class sI extends fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class lI extends fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class xx extends fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.bindTexture(p.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class uI extends fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class eg extends fn{getDefault(){return null}set(s){let p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Su extends fn{getDefault(){return null}set(s){var p;if(s===this.current&&!this.dirty)return;let g=this.gl;sc(g)?g.bindVertexArray(s):(p=g.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class wx extends fn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class bx extends fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Sx extends fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class tg extends fn{constructor(s,p){super(s),this.context=s,this.parent=p}getDefault(){return null}}class Ex extends tg{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class hf extends tg{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Tx extends tg{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class uq{constructor(s,p,g,y,w){this.context=s,this.width=p,this.height=g;let M=s.gl,O=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Ex(s,O),y)this.depthAttachment=w?new Tx(s,O):new hf(s,O);else if(w)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let s=this.context.gl,p=this.colorAttachment.get();if(p&&s.deleteTexture(p),this.depthAttachment){let g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class mi{constructor(s,p,g){this.blendFunction=s,this.blendColor=p,this.mask=g}}mi.Replace=[1,0],mi.disabled=new mi(mi.Replace,o.aM.transparent,[!1,!1,!1,!1]),mi.unblended=new mi(mi.Replace,o.aM.transparent,[!0,!0,!0,!0]),mi.alphaBlended=new mi([1,771],o.aM.transparent,[!0,!0,!0,!0]);class cq{constructor(s){var p,g;if(this.gl=s,this.clearColor=new Jv(this),this.clearDepth=new rq(this),this.clearStencil=new Oh(this),this.colorMask=new nq(this),this.depthMask=new JT(this),this.stencilMask=new iq(this),this.stencilFunc=new QT(this),this.stencilOp=new _x(this),this.stencilTest=new eI(this),this.depthRange=new tI(this),this.depthTest=new rI(this),this.depthFunc=new nI(this),this.blend=new ff(this),this.blendFunc=new iI(this),this.blendColor=new oq(this),this.blendEquation=new oI(this),this.cullFace=new Zd(this),this.cullFaceSide=new aq(this),this.frontFace=new Qv(this),this.program=new sq(this),this.activeTexture=new lq(this),this.viewport=new aI(this),this.bindFramebuffer=new sI(this),this.bindRenderbuffer=new lI(this),this.bindTexture=new xx(this),this.bindVertexBuffer=new uI(this),this.bindElementBuffer=new eg(this),this.bindVertexArray=new Su(this),this.pixelStoreUnpack=new wx(this),this.pixelStoreUnpackPremultiplyAlpha=new bx(this),this.pixelStoreUnpackFlipY=new Sx(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),sc(s)){this.HALF_FLOAT=s.HALF_FLOAT;let y=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=s.RGBA16F)!==null&&p!==void 0?p:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(g=s.RGB16F)!==null&&g!==void 0?g:y==null?void 0:y.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");let y=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,p){return new El(this,s,p)}createVertexBuffer(s,p,g){return new yx(this,s,p,g)}createRenderbuffer(s,p,g){let y=this.gl,w=y.createRenderbuffer();return this.bindRenderbuffer.set(w),y.renderbufferStorage(y.RENDERBUFFER,s,p,g),this.bindRenderbuffer.set(null),w}createFramebuffer(s,p,g,y){return new uq(this,s,p,g,y)}clear({color:s,depth:p,stencil:g}){let y=this.gl,w=0;s&&(w|=y.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(w|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),g!==void 0&&(w|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),y.clear(w)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){o.aE(s.blendFunction,mi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return sc(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var p;return sc(this.gl)?this.gl.deleteVertexArray(s):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class qr{constructor(s,p,g){this.func=s,this.mask=p,this.range=g}}qr.ReadOnly=!1,qr.ReadWrite=!0,qr.disabled=new qr(519,qr.ReadOnly,[0,1]);let rg=7680;class qn{constructor(s,p,g,y,w,M){this.test=s,this.ref=p,this.mask=g,this.fail=y,this.depthFail=w,this.pass=M}}qn.disabled=new qn({func:519,mask:0},0,0,rg,rg,rg);class wn{constructor(s,p,g){this.enable=s,this.mode=p,this.frontFace=g}}let pf;function Yd(b,s,p,g,y){let w=b.context,M=w.gl,O=b.useProgram("collisionBox"),N=[],B=0,V=0;for(let ge=0;ge<g.length;ge++){let ye=g[ge],ce=s.getTile(ye).getBucket(p);if(!ce)continue;let Ae=y?ce.textCollisionBox:ce.iconCollisionBox,De=ce.collisionCircleArray;if(De.length>0){let Fe=o.H();o.aQ(Fe,ce.placementInvProjMatrix,b.transform.glCoordMatrix),o.aQ(Fe,Fe,ce.placementViewportMatrix),N.push({circleArray:De,circleOffset:V,transform:ye.posMatrix,invTransform:Fe,coord:ye}),B+=De.length/4,V=B}Ae&&O.draw(w,M.LINES,qr.disabled,qn.disabled,b.colorModeForRenderPass(),wn.disabled,{u_matrix:ye.posMatrix,u_pixel_extrude_scale:[1/(G=b.transform).width,1/G.height]},b.style.map.terrain&&b.style.map.terrain.getTerrainData(ye),p.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,null,b.transform.zoom,null,null,Ae.collisionVertexBuffer)}var G;if(!y||!N.length)return;let X=b.useProgram("collisionCircle"),ne=new o.aR;ne.resize(4*B),ne._trim();let se=0;for(let ge of N)for(let ye=0;ye<ge.circleArray.length/4;ye++){let ce=4*ye,Ae=ge.circleArray[ce+0],De=ge.circleArray[ce+1],Fe=ge.circleArray[ce+2],et=ge.circleArray[ce+3];ne.emplace(se++,Ae,De,Fe,et,0),ne.emplace(se++,Ae,De,Fe,et,1),ne.emplace(se++,Ae,De,Fe,et,2),ne.emplace(se++,Ae,De,Fe,et,3)}(!pf||pf.length<2*B)&&(pf=function(ge){let ye=2*ge,ce=new o.aT;ce.resize(ye),ce._trim();for(let Ae=0;Ae<ye;Ae++){let De=6*Ae;ce.uint16[De+0]=4*Ae+0,ce.uint16[De+1]=4*Ae+1,ce.uint16[De+2]=4*Ae+2,ce.uint16[De+3]=4*Ae+2,ce.uint16[De+4]=4*Ae+3,ce.uint16[De+5]=4*Ae+0}return ce}(B));let he=w.createIndexBuffer(pf,!0),me=w.createVertexBuffer(ne,o.aS.members,!0);for(let ge of N){let ye=uf(ge.transform,ge.invTransform,b.transform);X.draw(w,M.TRIANGLES,qr.disabled,qn.disabled,b.colorModeForRenderPass(),wn.disabled,ye,b.style.map.terrain&&b.style.map.terrain.getTerrainData(ge.coord),p.id,me,he,o.a0.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,b.transform.zoom,null,null,null)}me.destroy(),he.destroy()}wn.disabled=new wn(!1,1029,2305),wn.backCCW=new wn(!0,1029,2305);let Kd=o.an(new Float32Array(16));function Ix(b,s,p,g,y,w){let{horizontalAlign:M,verticalAlign:O}=o.au(b);return new o.P((-(M-.5)*s/y+g[0])*w,(-(O-.5)*p/y+g[1])*w)}function df(b,s,p,g,y,w){let M=s.tileAnchorPoint.add(new o.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let O=g.mult(w);p||(O=O.rotate(-y));let N=M.add(O);return oe(N.x,N.y,s.labelPlaneMatrix,s.getElevation).point}if(p){let O=Be(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(b),N=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return b.add(g.rotate(N))}return b.add(g)}function Lh(b,s,p,g,y,w,M,O,N,B,V,G,X,ne){let se=b.text.placedSymbolArray,he=b.text.dynamicLayoutVertexArray,me=b.icon.dynamicLayoutVertexArray,ge={};he.clear();for(let ye=0;ye<se.length;ye++){let ce=se.get(ye),Ae=ce.hidden||!ce.crossTileID||b.allowVerticalPlacement&&!ce.placedOrientation?null:g[ce.crossTileID];if(Ae){let De=new o.P(ce.anchorX,ce.anchorY),Fe={getElevation:ne,width:y.width,height:y.height,labelPlaneMatrix:w,lineVertexArray:null,pitchWithMap:p,projection:V,projectionCache:null,tileAnchorPoint:De,translation:G,unwrappedTileID:X},et=p?oe(De.x,De.y,M,ne):Be(De.x,De.y,Fe),lt=W(y.cameraToCenterDistance,et.signedDistanceFromCamera),Et=o.ai(b.textSizeData,N,ce)*lt/o.ap;p&&(Et*=b.tilePixelRatio/O);let{width:Dt,height:mt,anchor:dt,textOffset:Ht,textBoxScale:vr}=Ae,gt=Ix(dt,Dt,mt,Ht,vr,Et),Mt=V.getPitchedTextCorrection(y,De.add(new o.P(G[0],G[1])),X),pr=df(et.point,Fe,s,gt,y.angle,Mt),$n=b.allowVerticalPlacement&&ce.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let Cr=0;Cr<ce.numGlyphs;Cr++)o.aj(he,pr,$n);B&&ce.associatedIconIndex>=0&&(ge[ce.associatedIconIndex]={shiftedAnchor:pr,angle:$n})}else Jt(ce.numGlyphs,he)}if(B){me.clear();let ye=b.icon.placedSymbolArray;for(let ce=0;ce<ye.length;ce++){let Ae=ye.get(ce);if(Ae.hidden)Jt(Ae.numGlyphs,me);else{let De=ge[ce];if(De)for(let Fe=0;Fe<Ae.numGlyphs;Fe++)o.aj(me,De.shiftedAnchor,De.angle);else Jt(Ae.numGlyphs,me)}}b.icon.dynamicLayoutVertexBuffer.updateData(me)}b.text.dynamicLayoutVertexBuffer.updateData(he)}function us(b,s,p){return p.iconsInText&&s?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Ax(b,s,p,g,y,w,M,O,N,B,V,G){let X=b.context,ne=X.gl,se=b.transform,he=sf(),me=O==="map",ge=N==="map",ye=O!=="viewport"&&p.layout.get("symbol-placement")!=="point",ce=me&&!ge&&!ye,Ae=!ge&&ye,De=!p.layout.get("symbol-sort-key").isConstant(),Fe=!1,et=b.depthModeForSublayer(0,qr.ReadOnly),lt=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Et=[],Dt=he.getCircleRadiusCorrection(se);for(let mt of g){let dt=s.getTile(mt),Ht=dt.getBucket(p);if(!Ht)continue;let vr=y?Ht.text:Ht.icon;if(!vr||!vr.segments.get().length||!vr.hasVisibleVertices)continue;let gt=vr.programConfigurations.get(p.id),Mt=y||Ht.sdfIcons,pr=y?Ht.textSizeData:Ht.iconSizeData,$n=ge||se.pitch!==0,Cr=b.useProgram(us(Mt,y,Ht),gt),Gr=o.ag(pr,se.zoom),Hn=b.style.map.terrain&&b.style.map.terrain.getTerrainData(mt),So,Js,Wn,la,Bo=[0,0],Eo=null;if(y)Js=dt.glyphAtlasTexture,Wn=ne.LINEAR,So=dt.glyphAtlasTexture.size,Ht.iconsInText&&(Bo=dt.imageAtlasTexture.size,Eo=dt.imageAtlasTexture,la=$n||b.options.rotating||b.options.zooming||pr.kind==="composite"||pr.kind==="camera"?ne.LINEAR:ne.NEAREST);else{let Wr=p.layout.get("icon-size").constantOr(0)!==1||Ht.iconsNeedLinear;Js=dt.imageAtlasTexture,Wn=Mt||b.options.rotating||b.options.zooming||Wr||$n?ne.LINEAR:ne.NEAREST,So=dt.imageAtlasTexture.size}let Uo=Ar(dt,1,b.transform.zoom),Al=Ae?mt.posMatrix:Kd,Yh=St(Al,ge,me,b.transform,Uo),wg=vt(Al,ge,me,b.transform,Uo),Kh=vt(mt.posMatrix,ge,me,b.transform,Uo),hs=he.translatePosition(b.transform,dt,w,M),bg=lt&&Ht.hasTextData(),Jx=p.layout.get("icon-text-fit")!=="none"&&bg&&Ht.hasIconData();if(ye){let Wr=b.style.map.terrain?(Xh,Jh)=>b.style.map.terrain.getElevation(mt,Xh,Jh):null,_f=p.layout.get("text-rotation-alignment")==="map";K(Ht,mt.posMatrix,b,y,Yh,Kh,ge,B,_f,he,mt.toUnwrapped(),se.width,se.height,hs,Wr)}let ps=mt.posMatrix,ds=y&&lt||Jx,lc=ye||ds?Kd:Yh,Qs=wg,lo=Mt&&p.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,To;To=Mt?Ht.iconsInText?mx(pr.kind,Gr,ce,ge,ye,ds,b,ps,lc,Qs,hs,So,Bo,Dt):Wd(pr.kind,Gr,ce,ge,ye,ds,b,ps,lc,Qs,hs,y,So,!0,Dt):XT(pr.kind,Gr,ce,ge,ye,ds,b,ps,lc,Qs,hs,y,So,Dt);let Ua={program:Cr,buffers:vr,uniformValues:To,atlasTexture:Js,atlasTextureIcon:Eo,atlasInterpolation:Wn,atlasInterpolationIcon:la,isSDF:Mt,hasHalo:lo};if(De&&Ht.canOverlap){Fe=!0;let Wr=vr.segments.get();for(let _f of Wr)Et.push({segments:new o.a0([_f]),sortKey:_f.sortKey,state:Ua,terrainData:Hn})}else Et.push({segments:vr.segments,sortKey:0,state:Ua,terrainData:Hn})}Fe&&Et.sort((mt,dt)=>mt.sortKey-dt.sortKey);for(let mt of Et){let dt=mt.state;if(X.activeTexture.set(ne.TEXTURE0),dt.atlasTexture.bind(dt.atlasInterpolation,ne.CLAMP_TO_EDGE),dt.atlasTextureIcon&&(X.activeTexture.set(ne.TEXTURE1),dt.atlasTextureIcon&&dt.atlasTextureIcon.bind(dt.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),dt.isSDF){let Ht=dt.uniformValues;dt.hasHalo&&(Ht.u_is_halo=1,Cx(dt.buffers,mt.segments,p,b,dt.program,et,V,G,Ht,mt.terrainData)),Ht.u_is_halo=0}Cx(dt.buffers,mt.segments,p,b,dt.program,et,V,G,dt.uniformValues,mt.terrainData)}}function Cx(b,s,p,g,y,w,M,O,N,B){let V=g.context;y.draw(V,V.gl.TRIANGLES,w,M,O,wn.disabled,N,B,p.id,b.layoutVertexBuffer,b.indexBuffer,s,p.paint,g.transform.zoom,b.programConfigurations.get(p.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Mx(b,s,p,g){let y=b.context,w=y.gl,M=qn.disabled,O=new mi([w.ONE,w.ONE],o.aM.transparent,[!0,!0,!0,!0]),N=s.getBucket(p);if(!N)return;let B=g.key,V=p.heatmapFbos.get(B);V||(V=Xd(y,s.tileSize,s.tileSize),p.heatmapFbos.set(B,V)),y.bindFramebuffer.set(V.framebuffer),y.viewport.set([0,0,s.tileSize,s.tileSize]),y.clear({color:o.aM.transparent});let G=N.programConfigurations.get(p.id),X=b.useProgram("heatmap",G),ne=b.style.map.terrain.getTerrainData(g);X.draw(y,w.TRIANGLES,qr.disabled,M,O,wn.disabled,sa(g.posMatrix,s,b.transform.zoom,p.paint.get("heatmap-intensity")),ne,p.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,p.paint,b.transform.zoom,G)}function mf(b,s,p){let g=b.context,y=g.gl;g.setColorMode(b.colorModeForRenderPass());let w=Jd(g,s),M=p.key,O=s.heatmapFbos.get(M);O&&(g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,O.colorAttachment.get()),g.activeTexture.set(y.TEXTURE1),w.bind(y.LINEAR,y.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(g,y.TRIANGLES,qr.disabled,qn.disabled,b.colorModeForRenderPass(),wn.disabled,Zv(b,s,0,1),null,s.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,s.paint,b.transform.zoom),O.destroy(),s.heatmapFbos.delete(M))}function Xd(b,s,p){var g,y;let w=b.gl,M=w.createTexture();w.bindTexture(w.TEXTURE_2D,M),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);let O=(g=b.HALF_FLOAT)!==null&&g!==void 0?g:w.UNSIGNED_BYTE,N=(y=b.RGBA16F)!==null&&y!==void 0?y:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,N,s,p,0,w.RGBA,O,null);let B=b.createFramebuffer(s,p,!1,!1);return B.colorAttachment.set(M),B}function Jd(b,s){return s.colorRampTexture||(s.colorRampTexture=new le(b,s.colorRamp,b.gl.RGBA)),s.colorRampTexture}function Dh(b,s,p,g,y){if(!p||!g||!g.imageAtlas)return;let w=g.imageAtlas.patternPositions,M=w[p.to.toString()],O=w[p.from.toString()];if(!M&&O&&(M=O),!O&&M&&(O=M),!M||!O){let N=y.getPaintProperty(s);M=w[N],O=w[N]}M&&O&&b.setConstantPatternPositions(M,O)}function Qd(b,s,p,g,y,w,M){let O=b.context.gl,N="fill-pattern",B=p.paint.get(N),V=B&&B.constantOr(1),G=p.getCrossfadeParameters(),X,ne,se,he,me;M?(ne=V&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=O.LINES):(ne=V?"fillPattern":"fill",X=O.TRIANGLES);let ge=B.constantOr(null);for(let ye of g){let ce=s.getTile(ye);if(V&&!ce.patternsLoaded())continue;let Ae=ce.getBucket(p);if(!Ae)continue;let De=Ae.programConfigurations.get(p.id),Fe=b.useProgram(ne,De),et=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ye);V&&(b.context.activeTexture.set(O.TEXTURE0),ce.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),De.updatePaintBuffers(G)),Dh(De,N,ge,ce,p);let lt=et?ye:null,Et=b.translatePosMatrix(lt?lt.posMatrix:ye.posMatrix,ce,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(M){he=Ae.indexBuffer2,me=Ae.segments2;let Dt=[O.drawingBufferWidth,O.drawingBufferHeight];se=ne==="fillOutlinePattern"&&V?WT(Et,b,G,ce,Dt):K2(Et,Dt)}else he=Ae.indexBuffer,me=Ae.segments,se=V?HT(Et,b,G,ce):Rh(Et);Fe.draw(b.context,X,y,b.stencilModeForClipping(ye),w,wn.disabled,se,et,p.id,Ae.layoutVertexBuffer,he,me,p.paint,b.transform.zoom,De)}}function ng(b,s,p,g,y,w,M){let O=b.context,N=O.gl,B="fill-extrusion-pattern",V=p.paint.get(B),G=V.constantOr(1),X=p.getCrossfadeParameters(),ne=p.paint.get("fill-extrusion-opacity"),se=V.constantOr(null);for(let he of g){let me=s.getTile(he),ge=me.getBucket(p);if(!ge)continue;let ye=b.style.map.terrain&&b.style.map.terrain.getTerrainData(he),ce=ge.programConfigurations.get(p.id),Ae=b.useProgram(G?"fillExtrusionPattern":"fillExtrusion",ce);G&&(b.context.activeTexture.set(N.TEXTURE0),me.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),ce.updatePaintBuffers(X)),Dh(ce,B,se,me,p);let De=b.translatePosMatrix(he.posMatrix,me,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Fe=p.paint.get("fill-extrusion-vertical-gradient"),et=G?Wv(De,b,Fe,ne,he,X,me):$d(De,b,Fe,ne);Ae.draw(O,O.gl.TRIANGLES,y,w,M,wn.backCCW,et,ye,p.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,p.paint,b.transform.zoom,ce,b.style.map.terrain&&ge.centroidVertexBuffer)}}function Nh(b,s,p,g,y,w,M){let O=b.context,N=O.gl,B=p.fbo;if(!B)return;let V=b.useProgram("hillshade"),G=b.style.map.terrain&&b.style.map.terrain.getTerrainData(s);O.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,B.colorAttachment.get()),V.draw(O,N.TRIANGLES,y,w,M,wn.disabled,((X,ne,se,he)=>{let me=se.paint.get("hillshade-shadow-color"),ge=se.paint.get("hillshade-highlight-color"),ye=se.paint.get("hillshade-accent-color"),ce=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(ce-=X.transform.angle);let Ae=!X.options.moving;return{u_matrix:he?he.posMatrix:X.transform.calculatePosMatrix(ne.tileID.toUnwrapped(),Ae),u_image:0,u_latrange:Yv(0,ne.tileID),u_light:[se.paint.get("hillshade-exaggeration"),ce],u_shadow:me,u_highlight:ge,u_accent:ye}})(b,p,g,G?s:null),G,g.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}function qh(b,s,p,g,y,w){let M=b.context,O=M.gl,N=s.dem;if(N&&N.data){let B=N.dim,V=N.stride,G=N.getPixels();if(M.activeTexture.set(O.TEXTURE1),M.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||b.getTileTexture(V),s.demTexture){let ne=s.demTexture;ne.update(G,{premultiply:!1}),ne.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else s.demTexture=new le(M,G,O.RGBA,{premultiply:!1}),s.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);M.activeTexture.set(O.TEXTURE0);let X=s.fbo;if(!X){let ne=new le(M,{width:B,height:B,data:null},O.RGBA);ne.bind(O.LINEAR,O.CLAMP_TO_EDGE),X=s.fbo=M.createFramebuffer(B,B,!0,!1),X.colorAttachment.set(ne.texture)}M.bindFramebuffer.set(X.framebuffer),M.viewport.set([0,0,B,B]),b.useProgram("hillshadePrepare").draw(M,O.TRIANGLES,g,y,w,wn.disabled,((ne,se)=>{let he=se.stride,me=o.H();return o.aP(me,0,o.X,-o.X,0,0,1),o.J(me,me,[0,-o.X,0]),{u_matrix:me,u_image:1,u_dimension:[he,he],u_zoom:ne.overscaledZ,u_unpack:se.getUnpackVector()}})(s.tileID,N),null,p.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function cI(b,s,p,g,y,w){let M=g.paint.get("raster-fade-duration");if(!w&&M>0){let O=d.now(),N=(O-b.timeAdded)/M,B=s?(O-s.timeAdded)/M:-1,V=p.getSource(),G=y.coveringZoomLevel({tileSize:V.tileSize,roundZoom:V.roundZoom}),X=!s||Math.abs(s.tileID.overscaledZ-G)>Math.abs(b.tileID.overscaledZ-G),ne=X&&b.refreshedUponExpiration?1:o.ac(X?N:1-B,0,1);return b.refreshedUponExpiration&&N>=1&&(b.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ne}:{opacity:ne,mix:0}}return{opacity:1,mix:0}}let Rx=new o.aM(1,0,0,1),tn=new o.aM(0,1,0,1),ig=new o.aM(0,0,1,1),fq=new o.aM(1,0,1,1),fI=new o.aM(0,1,1,1);function kh(b,s,p,g){og(b,0,s+p/2,b.transform.width,p,g)}function hI(b,s,p,g){og(b,s-p/2,0,p,b.transform.height,g)}function og(b,s,p,g,y,w){let M=b.context,O=M.gl;O.enable(O.SCISSOR_TEST),O.scissor(s*b.pixelRatio,p*b.pixelRatio,g*b.pixelRatio,y*b.pixelRatio),M.clear({color:w}),O.disable(O.SCISSOR_TEST)}function pI(b,s,p){let g=b.context,y=g.gl,w=p.posMatrix,M=b.useProgram("debug"),O=qr.disabled,N=qn.disabled,B=b.colorModeForRenderPass(),V="$debug",G=b.style.map.terrain&&b.style.map.terrain.getTerrainData(p);g.activeTexture.set(y.TEXTURE0);let X=s.getTileByID(p.key).latestRawTileData,ne=Math.floor((X&&X.byteLength||0)/1024),se=s.getTile(p).tileSize,he=512/Math.min(se,512)*(p.overscaledZ/b.transform.zoom)*.5,me=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(me+=` => ${p.overscaledZ}`),function(ge,ye){ge.initDebugOverlayCanvas();let ce=ge.debugOverlayCanvas,Ae=ge.context.gl,De=ge.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,ce.width,ce.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(ye,5,5),De.strokeText(ye,5,5),ge.debugOverlayTexture.update(ce),ge.debugOverlayTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE)}(b,`${me} ${ne}kB`),M.draw(g,y.TRIANGLES,O,N,mi.alphaBlended,wn.disabled,Hd(w,o.aM.transparent,he),null,V,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),M.draw(g,y.LINE_STRIP,O,N,B,wn.disabled,Hd(w,o.aM.red),G,V,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function dI(b,s,p){let g=b.context,y=g.gl,w=b.colorModeForRenderPass(),M=new qr(y.LEQUAL,qr.ReadWrite,b.depthRangeFor3D),O=b.useProgram("terrain"),N=s.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,b.width,b.height]);for(let B of p){let V=b.renderToTexture.getTexture(B),G=s.getTerrainData(B.tileID);g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,V.texture);let X=b.transform.calculatePosMatrix(B.tileID.toUnwrapped()),ne=s.getMeshFrameDelta(b.transform.zoom),se=b.transform.calculateFogMatrix(B.tileID.toUnwrapped()),he=px(X,ne,se,b.style.sky,b.transform.pitch);O.draw(g,y.TRIANGLES,M,qn.disabled,w,wn.backCCW,he,G,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}}class ag{constructor(s,p,g){this.vertexBuffer=s,this.indexBuffer=p,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class sg{constructor(s,p){this.context=new cq(s),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=jt.maxUnderzooming+jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fx}resize(s,p,g){if(this.width=Math.floor(s*g),this.height=Math.floor(p*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let y of this.style._order)this.style._layers[y].resize()}setup(){let s=this.context,p=new o.aX;p.emplaceBack(0,0),p.emplaceBack(o.X,0),p.emplaceBack(0,o.X),p.emplaceBack(o.X,o.X),this.tileExtentBuffer=s.createVertexBuffer(p,lf.members),this.tileExtentSegments=o.a0.simpleSegment(0,0,4,2);let g=new o.aX;g.emplaceBack(0,0),g.emplaceBack(o.X,0),g.emplaceBack(0,o.X),g.emplaceBack(o.X,o.X),this.debugBuffer=s.createVertexBuffer(g,lf.members),this.debugSegments=o.a0.simpleSegment(0,0,4,5);let y=new o.$;y.emplaceBack(0,0,0,0),y.emplaceBack(o.X,0,o.X,0),y.emplaceBack(0,o.X,0,o.X),y.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=s.createVertexBuffer(y,Xt.members),this.rasterBoundsSegments=o.a0.simpleSegment(0,0,4,2);let w=new o.aX;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(w,lf.members),this.viewportSegments=o.a0.simpleSegment(0,0,4,2);let M=new o.aZ;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(M);let O=new o.aY;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(O);let N=this.context.gl;this.stencilClearMode=new qn({func:N.ALWAYS,mask:0},0,255,N.ZERO,N.ZERO,N.ZERO)}clearStencil(){let s=this.context,p=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let g=o.H();o.aP(g,0,this.width,this.height,0,0,1),o.K(g,g,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,p.TRIANGLES,qr.disabled,this.stencilClearMode,mi.disabled,wn.disabled,aa(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,p){if(this.currentStencilSource===s.source||!s.isTileClipped()||!p||!p.length)return;this.currentStencilSource=s.source;let g=this.context,y=g.gl;this.nextStencilID+p.length>256&&this.clearStencil(),g.setColorMode(mi.disabled),g.setDepthMode(qr.disabled);let w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let M of p){let O=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M);w.draw(g,y.TRIANGLES,qr.disabled,new qn({func:y.ALWAYS,mask:0},O,255,y.KEEP,y.KEEP,y.REPLACE),mi.disabled,wn.disabled,aa(M.posMatrix),N,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let s=this.nextStencilID++,p=this.context.gl;return new qn({func:p.NOTEQUAL,mask:255},s,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(s){let p=this.context.gl;return new qn({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(s){let p=this.context.gl,g=s.sort((M,O)=>O.overscaledZ-M.overscaledZ),y=g[g.length-1].overscaledZ,w=g[0].overscaledZ-y+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();let M={};for(let O=0;O<w;O++)M[O+y]=new qn({func:p.GEQUAL,mask:255},O+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=w,[M,g]}return[{[y]:qn.disabled},g]}colorModeForRenderPass(){let s=this.context.gl;return this._showOverdrawInspector?new mi([s.CONSTANT_COLOR,s.ONE],new o.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?mi.unblended:mi.alphaBlended}depthModeForSublayer(s,p,g){if(!this.opaquePassEnabledForLayer())return qr.disabled;let y=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new qr(g||this.context.gl.LEQUAL,p,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,p){this.style=s,this.options=p,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(d.now()),this.imageManager.beginFrame();let g=this.style._order,y=this.style.sourceCaches,w={},M={},O={};for(let N in y){let B=y[N];B.used&&B.prepare(this.context),w[N]=B.getVisibleCoordinates(),M[N]=w[N].slice().reverse(),O[N]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<g.length;N++)if(this.style._layers[g[N]].is3D()){this.opaquePassCutoff=N;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let N of g){let B=this.style._layers[N];if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;let V=M[B.source];(B.type==="custom"||V.length)&&this.renderLayer(this,y[B.source],B,V)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.aM.black:o.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(N,B){let V=N.context,G=V.gl,X=((ge,ye,ce)=>({u_sky_color:ge.properties.get("sky-color"),u_horizon_color:ge.properties.get("horizon-color"),u_horizon:(ye.height/2+ye.getHorizon())*ce,u_sky_horizon_blend:ge.properties.get("sky-horizon-blend")*ye.height/2*ce}))(B,N.style.map.transform,N.pixelRatio),ne=new qr(G.LEQUAL,qr.ReadWrite,[0,1]),se=qn.disabled,he=N.colorModeForRenderPass(),me=N.useProgram("sky");if(!B.mesh){let ge=new o.aX;ge.emplaceBack(-1,-1),ge.emplaceBack(1,-1),ge.emplaceBack(1,1),ge.emplaceBack(-1,1);let ye=new o.aY;ye.emplaceBack(0,1,2),ye.emplaceBack(0,2,3),B.mesh=new ag(V.createVertexBuffer(ge,lf.members),V.createIndexBuffer(ye),o.a0.simpleSegment(0,0,ge.length,ye.length))}me.draw(V,G.TRIANGLES,ne,se,he,wn.disabled,X,void 0,"sky",B.mesh.vertexBuffer,B.mesh.indexBuffer,B.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){let N=this.style._layers[g[this.currentLayer]],B=y[N.source],V=w[N.source];this._renderTileClippingMasks(N,V),this.renderLayer(this,B,N,V)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){let N=this.style._layers[g[this.currentLayer]],B=y[N.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(N))continue;let V=(N.type==="symbol"?O:M)[N.source];this._renderTileClippingMasks(N,w[N.source]),this.renderLayer(this,B,N,V)}if(this.options.showTileBoundaries){let N=function(B,V){let G=null,X=Object.values(B._layers).flatMap(me=>me.source&&!me.isHidden(V)?[B.sourceCaches[me.source]]:[]),ne=X.filter(me=>me.getSource().type==="vector"),se=X.filter(me=>me.getSource().type!=="vector"),he=me=>{(!G||G.getSource().maxzoom<me.getSource().maxzoom)&&(G=me)};return ne.forEach(me=>he(me)),G||se.forEach(me=>he(me)),G}(this.style,this.transform.zoom);N&&function(B,V,G){for(let X=0;X<G.length;X++)pI(B,V,G[X])}(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){let B=N.transform.padding;kh(N,N.transform.height-(B.top||0),3,Rx),kh(N,B.bottom||0,3,tn),hI(N,B.left||0,3,ig),hI(N,N.transform.width-(B.right||0),3,fq);let V=N.transform.centerPoint;(function(G,X,ne,se){og(G,X-1,ne-10,2,20,se),og(G,X-10,ne-1,20,2,se)})(N,V.x,N.transform.height-V.y,fI)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;let p=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix,y=this.terrainFacilitator.dirty;y||(y=s?!o.a_(p,g):!o.a$(p,g)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(o.b0(p,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,M){let O=w.context,N=O.gl,B=mi.unblended,V=new qr(N.LEQUAL,qr.ReadWrite,[0,1]),G=M.getTerrainMesh(),X=M.sourceCache.getRenderableTiles(),ne=w.useProgram("terrainDepth");O.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),O.clear({color:o.aM.transparent,depth:1});for(let se of X){let he=M.getTerrainData(se.tileID),me={u_matrix:w.transform.calculatePosMatrix(se.tileID.toUnwrapped()),u_ele_delta:M.getMeshFrameDelta(w.transform.zoom)};ne.draw(O,N.TRIANGLES,V,qn.disabled,B,wn.backCCW,me,he,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,M){let O=w.context,N=O.gl,B=mi.unblended,V=new qr(N.LEQUAL,qr.ReadWrite,[0,1]),G=M.getTerrainMesh(),X=M.getCoordsTexture(),ne=M.sourceCache.getRenderableTiles(),se=w.useProgram("terrainCoords");O.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),O.clear({color:o.aM.transparent,depth:1}),M.coordsIndex=[];for(let he of ne){let me=M.getTerrainData(he.tileID);O.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,X.texture);let ge={u_matrix:w.transform.calculatePosMatrix(he.tileID.toUnwrapped()),u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(w.transform.zoom)};se.draw(O,N.TRIANGLES,V,qn.disabled,B,wn.backCCW,ge,me,"terrain",G.vertexBuffer,G.indexBuffer,G.segments),M.coordsIndex.push(he.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(s,p,g,y){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(y||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(w,M,O,N,B){if(w.renderPass!=="translucent")return;let V=qn.disabled,G=w.colorModeForRenderPass();(O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,ne,se,he,me,ge,ye,ce,Ae){let De=ne.transform,Fe=sf(),et=me==="map",lt=ge==="map";for(let Et of X){let Dt=he.getTile(Et),mt=Dt.getBucket(se);if(!mt||!mt.text||!mt.text.segments.get().length)continue;let dt=o.ag(mt.textSizeData,De.zoom),Ht=Ar(Dt,1,ne.transform.zoom),vr=St(Et.posMatrix,lt,et,ne.transform,Ht),gt=se.layout.get("icon-text-fit")!=="none"&&mt.hasIconData();if(dt){let Mt=Math.pow(2,De.zoom-Dt.tileID.overscaledZ),pr=ne.style.map.terrain?(Cr,Gr)=>ne.style.map.terrain.getElevation(Et,Cr,Gr):null,$n=Fe.translatePosition(De,Dt,ye,ce);Lh(mt,et,lt,Ae,De,vr,Et.posMatrix,Mt,dt,gt,Fe,$n,Et.toUnwrapped(),pr)}}}(N,w,O,M,O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),B),O.paint.get("icon-opacity").constantOr(1)!==0&&Ax(w,M,O,N,!1,O.paint.get("icon-translate"),O.paint.get("icon-translate-anchor"),O.layout.get("icon-rotation-alignment"),O.layout.get("icon-pitch-alignment"),O.layout.get("icon-keep-upright"),V,G),O.paint.get("text-opacity").constantOr(1)!==0&&Ax(w,M,O,N,!0,O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.layout.get("text-keep-upright"),V,G),M.map.showCollisionBoxes&&(Yd(w,M,O,N,!0),Yd(w,M,O,N,!1))})(s,p,g,y,this.style.placement.variableOffsets);break;case"circle":(function(w,M,O,N){if(w.renderPass!=="translucent")return;let B=O.paint.get("circle-opacity"),V=O.paint.get("circle-stroke-width"),G=O.paint.get("circle-stroke-opacity"),X=!O.layout.get("circle-sort-key").isConstant();if(B.constantOr(1)===0&&(V.constantOr(1)===0||G.constantOr(1)===0))return;let ne=w.context,se=ne.gl,he=w.depthModeForSublayer(0,qr.ReadOnly),me=qn.disabled,ge=w.colorModeForRenderPass(),ye=[];for(let ce=0;ce<N.length;ce++){let Ae=N[ce],De=M.getTile(Ae),Fe=De.getBucket(O);if(!Fe)continue;let et=Fe.programConfigurations.get(O.id),lt=w.useProgram("circle",et),Et=Fe.layoutVertexBuffer,Dt=Fe.indexBuffer,mt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ae),dt={programConfiguration:et,program:lt,layoutVertexBuffer:Et,indexBuffer:Dt,uniformValues:X2(w,Ae,De,O),terrainData:mt};if(X){let Ht=Fe.segments.get();for(let vr of Ht)ye.push({segments:new o.a0([vr]),sortKey:vr.sortKey,state:dt})}else ye.push({segments:Fe.segments,sortKey:0,state:dt})}X&&ye.sort((ce,Ae)=>ce.sortKey-Ae.sortKey);for(let ce of ye){let{programConfiguration:Ae,program:De,layoutVertexBuffer:Fe,indexBuffer:et,uniformValues:lt,terrainData:Et}=ce.state;De.draw(ne,se.TRIANGLES,he,me,ge,wn.disabled,lt,Et,O.id,Fe,et,ce.segments,O.paint,w.transform.zoom,Ae)}})(s,p,g,y);break;case"heatmap":(function(w,M,O,N){if(O.paint.get("heatmap-opacity")===0)return;let B=w.context;if(w.style.map.terrain){for(let V of N){let G=M.getTile(V);M.hasRenderableParent(V)||(w.renderPass==="offscreen"?Mx(w,G,O,V):w.renderPass==="translucent"&&mf(w,O,V))}B.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(V,G,X,ne){let se=V.context,he=se.gl,me=qn.disabled,ge=new mi([he.ONE,he.ONE],o.aM.transparent,[!0,!0,!0,!0]);(function(ye,ce,Ae){let De=ye.gl;ye.activeTexture.set(De.TEXTURE1),ye.viewport.set([0,0,ce.width/4,ce.height/4]);let Fe=Ae.heatmapFbos.get(o.aU);Fe?(De.bindTexture(De.TEXTURE_2D,Fe.colorAttachment.get()),ye.bindFramebuffer.set(Fe.framebuffer)):(Fe=Xd(ye,ce.width/4,ce.height/4),Ae.heatmapFbos.set(o.aU,Fe))})(se,V,X),se.clear({color:o.aM.transparent});for(let ye=0;ye<ne.length;ye++){let ce=ne[ye];if(G.hasRenderableParent(ce))continue;let Ae=G.getTile(ce),De=Ae.getBucket(X);if(!De)continue;let Fe=De.programConfigurations.get(X.id),et=V.useProgram("heatmap",Fe),{zoom:lt}=V.transform;et.draw(se,he.TRIANGLES,qr.disabled,me,ge,wn.disabled,sa(ce.posMatrix,Ae,lt,X.paint.get("heatmap-intensity")),null,X.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,X.paint,V.transform.zoom,Fe)}se.viewport.set([0,0,V.width,V.height])}(w,M,O,N):w.renderPass==="translucent"&&function(V,G){let X=V.context,ne=X.gl;X.setColorMode(V.colorModeForRenderPass());let se=G.heatmapFbos.get(o.aU);se&&(X.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,se.colorAttachment.get()),X.activeTexture.set(ne.TEXTURE1),Jd(X,G).bind(ne.LINEAR,ne.CLAMP_TO_EDGE),V.useProgram("heatmapTexture").draw(X,ne.TRIANGLES,qr.disabled,qn.disabled,V.colorModeForRenderPass(),wn.disabled,Zv(V,G,0,1),null,G.id,V.viewportBuffer,V.quadTriangleIndexBuffer,V.viewportSegments,G.paint,V.transform.zoom))}(w,O)})(s,p,g,y);break;case"line":(function(w,M,O,N){if(w.renderPass!=="translucent")return;let B=O.paint.get("line-opacity"),V=O.paint.get("line-width");if(B.constantOr(1)===0||V.constantOr(1)===0)return;let G=w.depthModeForSublayer(0,qr.ReadOnly),X=w.colorModeForRenderPass(),ne=O.paint.get("line-dasharray"),se=O.paint.get("line-pattern"),he=se.constantOr(1),me=O.paint.get("line-gradient"),ge=O.getCrossfadeParameters(),ye=he?"linePattern":ne?"lineSDF":me?"lineGradient":"line",ce=w.context,Ae=ce.gl,De=!0;for(let Fe of N){let et=M.getTile(Fe);if(he&&!et.patternsLoaded())continue;let lt=et.getBucket(O);if(!lt)continue;let Et=lt.programConfigurations.get(O.id),Dt=w.context.program.get(),mt=w.useProgram(ye,Et),dt=De||mt.program!==Dt,Ht=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Fe),vr=se.constantOr(null);if(vr&&et.imageAtlas){let pr=et.imageAtlas,$n=pr.patternPositions[vr.to.toString()],Cr=pr.patternPositions[vr.from.toString()];$n&&Cr&&Et.setConstantPatternPositions($n,Cr)}let gt=Ht?Fe:null,Mt=he?Ph(w,et,O,ge,gt):ne?J2(w,et,O,ne,ge,gt):me?ZT(w,et,O,lt.lineClipsArray.length,gt):Kv(w,et,O,gt);if(he)ce.activeTexture.set(Ae.TEXTURE0),et.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),Et.updatePaintBuffers(ge);else if(ne&&(dt||w.lineAtlas.dirty))ce.activeTexture.set(Ae.TEXTURE0),w.lineAtlas.bind(ce);else if(me){let pr=lt.gradients[O.id],$n=pr.texture;if(O.gradientVersion!==pr.version){let Cr=256;if(O.stepInterpolant){let Gr=M.getSource().maxzoom,Hn=Fe.canonical.z===Gr?Math.ceil(1<<w.transform.maxZoom-Fe.canonical.z):1;Cr=o.ac(o.aV(lt.maxLineLength/o.X*1024*Hn),256,ce.maxTextureSize)}pr.gradient=o.aW({expression:O.gradientExpression(),evaluationKey:"lineProgress",resolution:Cr,image:pr.gradient||void 0,clips:lt.lineClipsArray}),pr.texture?pr.texture.update(pr.gradient):pr.texture=new le(ce,pr.gradient,Ae.RGBA),pr.version=O.gradientVersion,$n=pr.texture}ce.activeTexture.set(Ae.TEXTURE0),$n.bind(O.stepInterpolant?Ae.NEAREST:Ae.LINEAR,Ae.CLAMP_TO_EDGE)}mt.draw(ce,Ae.TRIANGLES,G,w.stencilModeForClipping(Fe),X,wn.disabled,Mt,Ht,O.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,O.paint,w.transform.zoom,Et,lt.layoutVertexBuffer2),De=!1}})(s,p,g,y);break;case"fill":(function(w,M,O,N){let B=O.paint.get("fill-color"),V=O.paint.get("fill-opacity");if(V.constantOr(1)===0)return;let G=w.colorModeForRenderPass(),X=O.paint.get("fill-pattern"),ne=w.opaquePassEnabledForLayer()&&!X.constantOr(1)&&B.constantOr(o.aM.transparent).a===1&&V.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===ne){let se=w.depthModeForSublayer(1,w.renderPass==="opaque"?qr.ReadWrite:qr.ReadOnly);Qd(w,M,O,N,se,G,!1)}if(w.renderPass==="translucent"&&O.paint.get("fill-antialias")){let se=w.depthModeForSublayer(O.getPaintProperty("fill-outline-color")?2:0,qr.ReadOnly);Qd(w,M,O,N,se,G,!0)}})(s,p,g,y);break;case"fill-extrusion":(function(w,M,O,N){let B=O.paint.get("fill-extrusion-opacity");if(B!==0&&w.renderPass==="translucent"){let V=new qr(w.context.gl.LEQUAL,qr.ReadWrite,w.depthRangeFor3D);if(B!==1||O.paint.get("fill-extrusion-pattern").constantOr(1))ng(w,M,O,N,V,qn.disabled,mi.disabled),ng(w,M,O,N,V,w.stencilModeFor3D(),w.colorModeForRenderPass());else{let G=w.colorModeForRenderPass();ng(w,M,O,N,V,qn.disabled,G)}}})(s,p,g,y);break;case"hillshade":(function(w,M,O,N){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let B=w.context,V=w.depthModeForSublayer(0,qr.ReadOnly),G=w.colorModeForRenderPass(),[X,ne]=w.renderPass==="translucent"?w.stencilConfigForOverlap(N):[{},N];for(let se of ne){let he=M.getTile(se);he.needsHillshadePrepare!==void 0&&he.needsHillshadePrepare&&w.renderPass==="offscreen"?qh(w,he,O,V,qn.disabled,G):w.renderPass==="translucent"&&Nh(w,se,he,O,V,X[se.overscaledZ],G)}B.viewport.set([0,0,w.width,w.height])})(s,p,g,y);break;case"raster":(function(w,M,O,N){if(w.renderPass!=="translucent"||O.paint.get("raster-opacity")===0||!N.length)return;let B=w.context,V=B.gl,G=M.getSource(),X=w.useProgram("raster"),ne=w.colorModeForRenderPass(),[se,he]=G instanceof lr?[{},N]:w.stencilConfigForOverlap(N),me=he[he.length-1].overscaledZ,ge=!w.options.moving;for(let ye of he){let ce=w.depthModeForSublayer(ye.overscaledZ-me,O.paint.get("raster-opacity")===1?qr.ReadWrite:qr.ReadOnly,V.LESS),Ae=M.getTile(ye);Ae.registerFadeDuration(O.paint.get("raster-fade-duration"));let De=M.findLoadedParent(ye,0),Fe=M.findLoadedSibling(ye),et=cI(Ae,De||Fe||null,M,O,w.transform,w.style.map.terrain),lt,Et,Dt=O.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;B.activeTexture.set(V.TEXTURE0),Ae.texture.bind(Dt,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),B.activeTexture.set(V.TEXTURE1),De?(De.texture.bind(Dt,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),lt=Math.pow(2,De.tileID.overscaledZ-Ae.tileID.overscaledZ),Et=[Ae.tileID.canonical.x*lt%1,Ae.tileID.canonical.y*lt%1]):Ae.texture.bind(Dt,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),Ae.texture.useMipmap&&B.extTextureFilterAnisotropic&&w.transform.pitch>20&&V.texParameterf(V.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax);let mt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ye),dt=mt?ye:null,Ht=dt?dt.posMatrix:w.transform.calculatePosMatrix(ye.toUnwrapped(),ge),vr=Q2(Ht,Et||[0,0],lt||1,et,O);G instanceof lr?X.draw(B,V.TRIANGLES,ce,qn.disabled,ne,wn.disabled,vr,mt,O.id,G.boundsBuffer,w.quadTriangleIndexBuffer,G.boundsSegments):X.draw(B,V.TRIANGLES,ce,se[ye.overscaledZ],ne,wn.disabled,vr,mt,O.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}})(s,p,g,y);break;case"background":(function(w,M,O,N){let B=O.paint.get("background-color"),V=O.paint.get("background-opacity");if(V===0)return;let G=w.context,X=G.gl,ne=w.transform,se=ne.tileSize,he=O.paint.get("background-pattern");if(w.isPatternMissing(he))return;let me=!he&&B.a===1&&V===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==me)return;let ge=qn.disabled,ye=w.depthModeForSublayer(0,me==="opaque"?qr.ReadWrite:qr.ReadOnly),ce=w.colorModeForRenderPass(),Ae=w.useProgram(he?"backgroundPattern":"background"),De=N||ne.coveringTiles({tileSize:se,terrain:w.style.map.terrain});he&&(G.activeTexture.set(X.TEXTURE0),w.imageManager.bind(w.context));let Fe=O.getCrossfadeParameters();for(let et of De){let lt=N?et.posMatrix:w.transform.calculatePosMatrix(et.toUnwrapped()),Et=he?vx(lt,V,w,he,{tileID:et,tileSize:se},Fe):Xv(lt,V,B),Dt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(et);Ae.draw(G,X.TRIANGLES,ye,ge,ce,wn.disabled,Et,Dt,O.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}})(s,0,g,y);break;case"custom":(function(w,M,O){let N=w.context,B=O.implementation;if(w.renderPass==="offscreen"){let V=B.prerender;V&&(w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),V.call(B,N.gl,w.transform.customLayerMatrix()),N.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),N.setStencilMode(qn.disabled);let V=B.renderingMode==="3d"?new qr(w.context.gl.LEQUAL,qr.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,qr.ReadOnly);N.setDepthMode(V),B.render(N.gl,w.transform.customLayerMatrix(),{farZ:w.transform.farZ,nearZ:w.transform.nearZ,fov:w.transform._fov,modelViewProjectionMatrix:w.transform.modelViewProjectionMatrix,projectionMatrix:w.transform.projectionMatrix}),N.setDirty(),w.setBaseState(),N.bindFramebuffer.set(null)}})(s,0,g);}}translatePosMatrix(s,p,g,y,w){if(!g[0]&&!g[1])return s;let M=w?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(M){let B=Math.sin(M),V=Math.cos(M);g=[g[0]*V-g[1]*B,g[0]*B+g[1]*V]}let O=[w?g[0]:Ar(p,g[0],this.transform.zoom),w?g[1]:Ar(p,g[1],this.transform.zoom),0],N=new Float32Array(16);return o.J(N,s,O),N}saveTileTexture(s){let p=this._tileTextures[s.size[0]];p?p.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){let p=this._tileTextures[s];return p&&p.length>0?p.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;let p=this.imageManager.getPattern(s.from.toString()),g=this.imageManager.getPattern(s.to.toString());return!p||!g}useProgram(s,p){this.cache=this.cache||{};let g=s+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new dx(this.context,ac[s],p,gx[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new le(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:s,drawingBufferHeight:p}=this.context.gl;return this.width!==s||this.height!==p}}class Fh{constructor(s,p){this.points=s,this.planes=p}static fromInvProjectionMatrix(s,p,g){let y=Math.pow(2,g),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>{let N=1/(O=o.af([],O,s))[3]/p*y;return o.b1(O,O,[N,N,1/O[3],N])}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{let N=function(X,ne){var se=ne[0],he=ne[1],me=ne[2],ge=se*se+he*he+me*me;return ge>0&&(ge=1/Math.sqrt(ge)),X[0]=ne[0]*ge,X[1]=ne[1]*ge,X[2]=ne[2]*ge,X}([],function(X,ne,se){var he=ne[0],me=ne[1],ge=ne[2],ye=se[0],ce=se[1],Ae=se[2];return X[0]=me*Ae-ge*ce,X[1]=ge*ye-he*Ae,X[2]=he*ce-me*ye,X}([],ee([],w[O[0]],w[O[1]]),ee([],w[O[2]],w[O[1]]))),B=-((V=N)[0]*(G=w[O[1]])[0]+V[1]*G[1]+V[2]*G[2]);var V,G;return N.concat(B)});return new Fh(w,M)}}class jh{constructor(s,p){this.min=s,this.max=p,this.center=function(g,y,w){return g[0]=.5*y[0],g[1]=.5*y[1],g[2]=.5*y[2],g}([],function(g,y,w){return g[0]=y[0]+w[0],g[1]=y[1]+w[1],g[2]=y[2]+w[2],g}([],this.min,this.max))}quadrant(s){let p=[s%2==0,s<2],g=j(this.min),y=j(this.max);for(let w=0;w<p.length;w++)g[w]=p[w]?this.min[w]:this.center[w],y[w]=p[w]?this.center[w]:this.max[w];return y[2]=this.max[2],new jh(g,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){let p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],g=!0;for(let y=0;y<s.planes.length;y++){let w=s.planes[y],M=0;for(let O=0;O<p.length;O++)o.b2(w,p[O])>=0&&M++;if(M===0)return 0;M!==p.length&&(g=!1)}if(g)return 2;for(let y=0;y<3;y++){let w=Number.MAX_VALUE,M=-Number.MAX_VALUE;for(let O=0;O<s.points.length;O++){let N=s.points[O][y]-this.min[y];w=Math.min(w,N),M=Math.max(M,N)}if(M<0||w>this.max[y]-this.min[y])return 0}return 1}}class zh{constructor(s=0,p=0,g=0,y=0){if(isNaN(s)||s<0||isNaN(p)||p<0||isNaN(g)||g<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=p,this.left=g,this.right=y}interpolate(s,p,g){return p.top!=null&&s.top!=null&&(this.top=o.y.number(s.top,p.top,g)),p.bottom!=null&&s.bottom!=null&&(this.bottom=o.y.number(s.bottom,p.bottom,g)),p.left!=null&&s.left!=null&&(this.left=o.y.number(s.left,p.left,g)),p.right!=null&&s.right!=null&&(this.right=o.y.number(s.right,p.right,g)),this}getCenter(s,p){let g=o.ac((this.left+s-this.right)/2,0,s),y=o.ac((this.top+p-this.bottom)/2,0,p);return new o.P(g,y)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new zh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let Px=85.051129;class Bh{constructor(s,p,g,y,w){this.tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=s||0,this._maxZoom=p||22,this._minPitch=g==null?0:g,this._maxPitch=y==null?60:y,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new zh,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let s=new Bh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.lngRange=s.lngRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this.minElevationForCurrentTile=s.minElevationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){let p=-o.b3(s,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=function(){var g=new o.A(4);return o.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,y,w){var M=y[0],O=y[1],N=y[2],B=y[3],V=Math.sin(w),G=Math.cos(w);g[0]=M*G+N*V,g[1]=O*G+B*V,g[2]=M*-V+N*G,g[3]=O*-V+B*G}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){let p=o.ac(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){let p=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,p,g){this._unmodified=!1,this._edgeInsets.interpolate(s,p,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){let p=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(s){let p=[new o.b4(0,s)];if(this._renderWorldCopies){let g=this.pointCoordinate(new o.P(0,0)),y=this.pointCoordinate(new o.P(this.width,0)),w=this.pointCoordinate(new o.P(this.width,this.height)),M=this.pointCoordinate(new o.P(0,this.height)),O=Math.floor(Math.min(g.x,y.x,w.x,M.x)),N=Math.floor(Math.max(g.x,y.x,w.x,M.x)),B=1;for(let V=O-B;V<=N+B;V++)V!==0&&p.push(new o.b4(V,s))}return p}coveringTiles(s){var p,g;let y=this.coveringZoomLevel(s),w=y;if(s.minzoom!==void 0&&y<s.minzoom)return[];s.maxzoom!==void 0&&y>s.maxzoom&&(y=s.maxzoom);let M=this.pointCoordinate(this.getCameraPoint()),O=o.Z.fromLngLat(this.center),N=Math.pow(2,y),B=[N*M.x,N*M.y,0],V=[N*O.x,N*O.y,0],G=Fh.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,y),X=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=y);let ne=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,se=ce=>({aabb:new jh([ce*N,0,0],[(ce+1)*N,N,0]),zoom:0,x:0,y:0,wrap:ce,fullyVisible:!1}),he=[],me=[],ge=y,ye=s.reparseOverscaled?w:y;if(this._renderWorldCopies)for(let ce=1;ce<=3;ce++)he.push(se(-ce)),he.push(se(ce));for(he.push(se(0));he.length>0;){let ce=he.pop(),Ae=ce.x,De=ce.y,Fe=ce.fullyVisible;if(!Fe){let mt=ce.aabb.intersects(G);if(mt===0)continue;Fe=mt===2}let et=s.terrain?B:V,lt=ce.aabb.distanceX(et),Et=ce.aabb.distanceY(et),Dt=Math.max(Math.abs(lt),Math.abs(Et));if(ce.zoom===ge||Dt>ne+(1<<ge-ce.zoom)-2&&ce.zoom>=X){let mt=ge-ce.zoom,dt=B[0]-.5-(Ae<<mt),Ht=B[1]-.5-(De<<mt);me.push({tileID:new o.S(ce.zoom===ge?ye:ce.zoom,ce.wrap,ce.zoom,Ae,De),distanceSq:J([V[0]-.5-Ae,V[1]-.5-De]),tileDistanceToCamera:Math.sqrt(dt*dt+Ht*Ht)})}else for(let mt=0;mt<4;mt++){let dt=(Ae<<1)+mt%2,Ht=(De<<1)+(mt>>1),vr=ce.zoom+1,gt=ce.aabb.quadrant(mt);if(s.terrain){let Mt=new o.S(vr,ce.wrap,vr,dt,Ht),pr=s.terrain.getMinMaxElevation(Mt),$n=(p=pr.minElevation)!==null&&p!==void 0?p:this.elevation,Cr=(g=pr.maxElevation)!==null&&g!==void 0?g:this.elevation;gt=new jh([gt.min[0],gt.min[1],$n],[gt.max[0],gt.max[1],Cr])}he.push({aabb:gt,zoom:vr,x:dt,y:Ht,wrap:ce.wrap,fullyVisible:Fe})}}return me.sort((ce,Ae)=>ce.distanceSq-Ae.distanceSq).map(ce=>ce.tileID)}resize(s,p){this.width=s,this.height=p,this.pixelsToGLUnits=[2/s,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){let p=o.ac(s.lat,-85.051129,Px);return new o.P(o.O(s.lng)*this.worldSize,o.Q(p)*this.worldSize)}unproject(s){return new o.Z(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){let p=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,s),w=s.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-w))return;let M=g+p-w,O=Math.cos(this._pitch)*this.cameraToCenterDistance/M/o.b5(1,y.lat),N=this.scaleZoom(O/this.tileSize);this._elevation=w,this._center=y,this.zoom=N}setLocationAtPoint(s,p){let g=this.pointCoordinate(p),y=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(s),M=new o.Z(w.x-(g.x-y.x),w.y-(g.y-y.y));this.center=this.coordinateLocation(M),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,p){return p?this.coordinatePoint(this.locationCoordinate(s),p.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,p){return this.coordinateLocation(this.pointCoordinate(s,p))}locationCoordinate(s){return o.Z.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,p){if(p){let X=p.pointCoordinate(s);if(X!=null)return X}let g=[s.x,s.y,0,1],y=[s.x,s.y,1,1];o.af(g,g,this.pixelMatrixInverse),o.af(y,y,this.pixelMatrixInverse);let w=g[3],M=y[3],O=g[1]/w,N=y[1]/M,B=g[2]/w,V=y[2]/M,G=B===V?0:(0-B)/(V-B);return new o.Z(o.y.number(g[0]/w,y[0]/M,G)/this.worldSize,o.y.number(O,N,G)/this.worldSize)}coordinatePoint(s,p=0,g=this.pixelMatrix){let y=[s.x*this.worldSize,s.y*this.worldSize,p,1];return o.af(y,y,g),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){let s=Math.max(0,this.height/2-this.getHorizon());return new be().extend(this.pointLocation(new o.P(0,s))).extend(this.pointLocation(new o.P(this.width,s))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new be([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Px])}calculateTileMatrix(s){let p=s.canonical,g=this.worldSize/this.zoomScale(p.z),y=p.x+Math.pow(2,p.z)*s.wrap,w=o.an(new Float64Array(16));return o.J(w,w,[y*g,p.y*g,0]),o.K(w,w,[g/o.X,g/o.X,1]),w}calculatePosMatrix(s,p=!1){let g=s.key,y=p?this._alignedPosMatrixCache:this._posMatrixCache;if(y[g])return y[g];let w=this.calculateTileMatrix(s);return o.L(w,p?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,w),y[g]=new Float32Array(w),y[g]}calculateFogMatrix(s){let p=s.key,g=this._fogMatrixCache;if(g[p])return g[p];let y=this.calculateTileMatrix(s);return o.L(y,this.fogMatrix,y),g[p]=new Float32Array(y),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(s,p){p=o.ac(+p,this.minZoom,this.maxZoom);let g={center:new o.N(s.lng,s.lat),zoom:p},y=this.lngRange;if(!this._renderWorldCopies&&y===null){let ce=179.9999999999;y=[-ce,ce]}let w=this.tileSize*this.zoomScale(g.zoom),M=0,O=w,N=0,B=w,V=0,G=0,{x:X,y:ne}=this.size;if(this.latRange){let ce=this.latRange;M=o.Q(ce[1])*w,O=o.Q(ce[0])*w,O-M<ne&&(V=ne/(O-M))}y&&(N=o.b3(o.O(y[0])*w,0,w),B=o.b3(o.O(y[1])*w,0,w),B<N&&(B+=w),B-N<X&&(G=X/(B-N)));let{x:se,y:he}=this.project.call({worldSize:w},s),me,ge,ye=Math.max(G||0,V||0);if(ye){let ce=new o.P(G?(B+N)/2:se,V?(O+M)/2:he);return g.center=this.unproject.call({worldSize:w},ce).wrap(),g.zoom+=this.scaleZoom(ye),g}if(this.latRange){let ce=ne/2;he-ce<M&&(ge=M+ce),he+ce>O&&(ge=O-ce)}if(y){let ce=(N+B)/2,Ae=se;this._renderWorldCopies&&(Ae=o.b3(se,ce-w/2,ce+w/2));let De=X/2;Ae-De<N&&(me=N+De),Ae+De>B&&(me=B-De)}if(me!==void 0||ge!==void 0){let ce=new o.P(me!=null?me:se,ge!=null?ge:he);g.center=this.unproject.call({worldSize:w},ce).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s=this._unmodified,{center:p,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=p,this.zoom=g,this._unmodified=s,this._constraining=!1}_calcMatrices(){if(!this.height)return;let s=this.centerOffset,p=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b5(1,this.center.lat)*this.worldSize;let y=o.an(new Float64Array(16));o.K(y,y,[this.width/2,-this.height/2,1]),o.J(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=o.an(new Float64Array(16)),o.K(y,y,[1,-1,1]),o.J(y,y,[-1,-1,0]),o.K(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;let w=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),M=Math.min(this.elevation,this.minElevationForCurrentTile),O=w-M*this._pixelPerMeter/Math.cos(this._pitch),N=M<0?O:w,B=Math.PI/2+this._pitch,V=this._fov*(.5+s.y/this.height),G=Math.sin(V)*N/Math.sin(o.ac(Math.PI-B-V,.01,Math.PI-.01)),X=this.getHorizon(),ne=2*Math.atan(X/this.cameraToCenterDistance)*(.5+s.y/(2*X)),se=Math.sin(ne)*N/Math.sin(o.ac(Math.PI-B-ne,.01,Math.PI-.01)),he=Math.min(G,se);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*he+N),this.nearZ=this.height/50,y=new Float64Array(16),o.b6(y,this._fov,this.width/this.height,this.nearZ,this.farZ),y[8]=2*-s.x/this.width,y[9]=2*s.y/this.height,this.projectionMatrix=o.ae(y),o.K(y,y,[1,-1,1]),o.J(y,y,[0,0,-this.cameraToCenterDistance]),o.b7(y,y,this._pitch),o.ad(y,y,this.angle),o.J(y,y,[-p,-g,0]),this.mercatorMatrix=o.K([],y,[this.worldSize,this.worldSize,this.worldSize]),o.K(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.L(new Float64Array(16),this.labelPlaneMatrix,y),o.J(y,y,[0,0,-this.elevation]),this.modelViewProjectionMatrix=y,this.invModelViewProjectionMatrix=o.as([],y),this.fogMatrix=new Float64Array(16),o.b6(this.fogMatrix,this._fov,this.width/this.height,w,this.farZ),this.fogMatrix[8]=2*-s.x/this.width,this.fogMatrix[9]=2*s.y/this.height,o.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b7(this.fogMatrix,this.fogMatrix,this._pitch),o.ad(this.fogMatrix,this.fogMatrix,this.angle),o.J(this.fogMatrix,this.fogMatrix,[-p,-g,0]),o.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=o.L(new Float64Array(16),this.labelPlaneMatrix,y);let me=this.width%2/2,ge=this.height%2/2,ye=Math.cos(this.angle),ce=Math.sin(this.angle),Ae=p-Math.round(p)+ye*me+ce*ge,De=g-Math.round(g)+ye*ge+ce*me,Fe=new Float64Array(y);if(o.J(Fe,Fe,[Ae>.5?Ae-1:Ae,De>.5?De-1:De,0]),this.alignedModelViewProjectionMatrix=Fe,y=o.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let s=this.pointCoordinate(new o.P(0,0)),p=[s.x*this.worldSize,s.y*this.worldSize,0,1];return o.af(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,s))}getCameraQueryGeometry(s){let p=this.getCameraPoint();if(s.length===1)return[s[0],p];{let g=p.x,y=p.y,w=p.x,M=p.y;for(let O of s)g=Math.min(g,O.x),y=Math.min(y,O.y),w=Math.max(w,O.x),M=Math.max(M,O.y);return[new o.P(g,y),new o.P(w,y),new o.P(w,M),new o.P(g,M),new o.P(g,y)]}}lngLatToCameraDepth(s,p){let g=this.locationCoordinate(s),y=[g.x*this.worldSize,g.y*this.worldSize,p,1];return o.af(y,y,this.modelViewProjectionMatrix),y[2]/y[3]}}function em(b,s){let p,g=!1,y=null,w=null,M=()=>{y=null,g&&(b.apply(w,p),y=setTimeout(M,s),g=!1)};return(...O)=>(g=!0,w=this,p=O,y||M(),y)}class lg{constructor(s){this._getCurrentHash=()=>{let p=window.location.hash.replace("#","");if(this._hashName){let g;return p.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(g=y)}),(g&&g[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{let p=this._getCurrentHash();if(p.length>=3&&!p.some(g=>isNaN(g))){let g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:g,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let p=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,p)},this._removeHash=()=>{let p=this._getCurrentHash();if(p.length===0)return;let g=p.join("/"),y=g;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${g}`);let w=window.location.hash.replace(y,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let M=window.location.href.replace(/(#.+)?$/,w);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=em(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){let p=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,y=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,y),M=Math.round(p.lng*w)/w,O=Math.round(p.lat*w)/w,N=this._map.getBearing(),B=this._map.getPitch(),V="";if(V+=s?`/${M}/${O}/${g}`:`${g}/${O}/${M}`,(N||B)&&(V+="/"+Math.round(10*N)/10),B&&(V+=`/${Math.round(B)}`),this._hashName){let G=this._hashName,X=!1,ne=window.location.hash.slice(1).split("&").map(se=>{let he=se.split("=")[0];return he===G?(X=!0,`${he}=${V}`):se}).filter(se=>se);return X||ne.push(`${G}=${V}`),`#${ne.join("&")}`}return`#${V}`}}let ug={linearity:.3,easing:o.b8(0,0,.3,1)},Ox=o.e({deceleration:2500,maxSpeed:1400},ug),hq=o.e({deceleration:20,maxSpeed:1400},ug),mI=o.e({deceleration:1e3,maxSpeed:360},ug),cg=o.e({deceleration:1e3,maxSpeed:90},ug);class Lx{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:d.now(),settings:s})}_drainInertiaBuffer(){let s=this._inertiaBuffer,p=d.now();for(;s.length>0&&p-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let p={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:w}of this._inertiaBuffer)p.zoom+=w.zoomDelta||0,p.bearing+=w.bearingDelta||0,p.pitch+=w.pitchDelta||0,w.panDelta&&p.pan._add(w.panDelta),w.around&&(p.around=w.around),w.pinchAround&&(p.pinchAround=w.pinchAround);let g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(p.pan.mag()){let w=rm(p.pan.mag(),g,o.e({},Ox,s||{}));y.offset=p.pan.mult(w.amount/p.pan.mag()),y.center=this._map.transform.center,tm(y,w)}if(p.zoom){let w=rm(p.zoom,g,hq);y.zoom=this._map.transform.zoom+w.amount,tm(y,w)}if(p.bearing){let w=rm(p.bearing,g,mI);y.bearing=this._map.transform.bearing+o.ac(w.amount,-179,179),tm(y,w)}if(p.pitch){let w=rm(p.pitch,g,cg);y.pitch=this._map.transform.pitch+w.amount,tm(y,w)}if(y.zoom||y.bearing){let w=p.pinchAround===void 0?p.around:p.pinchAround;y.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function tm(b,s){(!b.duration||b.duration<s.duration)&&(b.duration=s.duration,b.easing=s.easing)}function rm(b,s,p){let{maxSpeed:g,linearity:y,deceleration:w}=p,M=o.ac(b*y/(s/1e3),-g,g),O=Math.abs(M)/(w*y);return{easing:p.easing,duration:1e3*O,amount:M*(O/2)}}class bo extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,g,y={}){let w=v.mousePos(p.getCanvas(),g),M=p.unproject(w);super(s,o.e({point:w,lngLat:M,originalEvent:g},y)),this._defaultPrevented=!1,this.target=p}}class vf extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,g){let y=s==="touchend"?g.changedTouches:g.touches,w=v.touchPos(p.getCanvasContainer(),y),M=w.map(N=>p.unproject(N)),O=w.reduce((N,B,V,G)=>N.add(B.div(G.length)),new o.P(0,0));super(s,{points:w,point:O,lngLats:M,lngLat:p.unproject(O),originalEvent:g}),this._defaultPrevented=!1}}class vI extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,p,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class gI{constructor(s,p){this._map=s,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new vI(s.type,this._map,s))}mousedown(s,p){return this._mousedownPos=p,this._firePreventable(new bo(s.type,this._map,s))}mouseup(s){this._map.fire(new bo(s.type,this._map,s))}click(s,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new bo(s.type,this._map,s))}dblclick(s){return this._firePreventable(new bo(s.type,this._map,s))}mouseover(s){this._map.fire(new bo(s.type,this._map,s))}mouseout(s){this._map.fire(new bo(s.type,this._map,s))}touchstart(s){return this._firePreventable(new vf(s.type,this._map,s))}touchmove(s){this._map.fire(new vf(s.type,this._map,s))}touchend(s){this._map.fire(new vf(s.type,this._map,s))}touchcancel(s){this._map.fire(new vf(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vi{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new bo(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new bo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new bo(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ks{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(o.P.convert(s),this._map.terrain)}}class za{constructor(s,p){this._map=s,this._tr=new Ks(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,p){this.isEnabled()&&s.shiftKey&&s.button===0&&(v.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(s,p){if(!this._active)return;let g=p;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;let y=this._startPos;this._lastPos=g,this._box||(this._box=v.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));let w=Math.min(y.x,g.x),M=Math.max(y.x,g.x),O=Math.min(y.y,g.y),N=Math.max(y.y,g.y);v.setTransform(this._box,`translate(${w}px,${O}px)`),this._box.style.width=M-w+"px",this._box.style.height=N-O+"px"}mouseupWindow(s,p){if(!this._active||s.button!==0)return;let g=this._startPos,y=p;if(this.reset(),v.suppressClick(),g.x!==y.x||g.y!==y.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:s})),{cameraAnimation:w=>w.fitScreenCoordinates(g,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,p){return this._map.fire(new o.k(s,{originalEvent:p}))}}function nm(b,s){if(b.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${s.length}`);let p={};for(let g=0;g<b.length;g++)p[b[g].identifier]=s[g];return p}class Dx{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,p,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(y){let w=new o.P(0,0);for(let M of y)w._add(M);return w.div(y.length)}(p),this.touches=nm(g,p)))}touchmove(s,p,g){if(this.aborted||!this.centroid)return;let y=nm(g,p);for(let w in this.touches){let M=y[w];(!M||M.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(s,p,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){let y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class fg{constructor(s){this.singleTap=new Dx(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,p,g){this.singleTap.touchstart(s,p,g)}touchmove(s,p,g){this.singleTap.touchmove(s,p,g)}touchend(s,p,g){let y=this.singleTap.touchend(s,p,g);if(y){let w=s.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(y)<30;if(w&&M||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Uh{constructor(s){this._tr=new Ks(s),this._zoomIn=new fg({numTouches:1,numTaps:2}),this._zoomOut=new fg({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,p,g){this._zoomIn.touchstart(s,p,g),this._zoomOut.touchstart(s,p,g)}touchmove(s,p,g){this._zoomIn.touchmove(s,p,g),this._zoomOut.touchmove(s,p,g)}touchend(s,p,g){let y=this._zoomIn.touchend(s,p,g),w=this._zoomOut.touchend(s,p,g),M=this._tr;return y?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(y)},{originalEvent:s})}):w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(w)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Eu{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){let p=this._moveFunction(...s);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(s,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,p){if(!this.isEnabled())return;let g=this._lastPoint;if(!g)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);let y=p.length?p[0]:p;return!this._moved&&y.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(g,y))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&v.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Nx={0:1,2:2};class hg{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){let p=v.mouseButton(s);this._eventButton=p}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(p,g){let y=Nx[g];return p.buttons===void 0||(p.buttons&y)!==y}(s,this._eventButton)}isValidEndEvent(s){return v.mouseButton(s)===this._eventButton}}class qx{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}let pg=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=s=>{s.preventDefault()}},kx=({enable:b,clickTolerance:s,bearingDegreesPerPixelMoved:p=.8})=>{let g=new hg({checkCorrectEvent:y=>v.mouseButton(y)===0&&y.ctrlKey||v.mouseButton(y)===2});return new Eu({clickTolerance:s,move:(y,w)=>({bearingDelta:(w.x-y.x)*p}),moveStateManager:g,enable:b,assignEvents:pg})},Fx=({enable:b,clickTolerance:s,pitchDegreesPerPixelMoved:p=-.5})=>{let g=new hg({checkCorrectEvent:y=>v.mouseButton(y)===0&&y.ctrlKey||v.mouseButton(y)===2});return new Eu({clickTolerance:s,move:(y,w)=>({pitchDelta:(w.y-y.y)*p}),moveStateManager:g,enable:b,assignEvents:pg})};class gf{constructor(s,p){this._clickTolerance=s.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,p,g){return this._calculateTransform(s,p,g)}touchmove(s,p,g){if(this._active){if(!this._shouldBePrevented(g.length))return s.preventDefault(),this._calculateTransform(s,p,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,p,g){this._calculateTransform(s,p,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,p,g){g.length>0&&(this._active=!0);let y=nm(g,p),w=new o.P(0,0),M=new o.P(0,0),O=0;for(let B in y){let V=y[B],G=this._touches[B];G&&(w._add(V),M._add(V.sub(G)),O++,y[B]=V)}if(this._touches=y,this._shouldBePrevented(O)||!M.mag())return;let N=M.div(O);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(O),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dg{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,p,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([p[0],p[1]]))}touchmove(s,p,g){if(!this._firstTwoTouches)return;s.preventDefault();let[y,w]=this._firstTwoTouches,M=im(g,p,y),O=im(g,p,w);if(!M||!O)return;let N=this._aroundCenter?null:M.add(O).div(2);return this._move([M,O],N,s)}touchend(s,p,g){if(!this._firstTwoTouches)return;let[y,w]=this._firstTwoTouches,M=im(g,p,y),O=im(g,p,w);M&&O||(this._active&&v.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function im(b,s,p){for(let g=0;g<b.length;g++)if(b[g].identifier===p)return s[g]}function jx(b,s){return Math.log(b/s)/Math.LN2}class zx extends dg{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,p){let g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(jx(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:jx(this._distance,g),pinchAround:p}}}function Bx(b,s){return 180*b.angleWith(s)/Math.PI}class Ux extends dg{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,p,g){let y=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Bx(this._vector,y),pinchAround:p}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());let p=25/(Math.PI*this._minDiameter)*360,g=Bx(s,this._startVector);return Math.abs(g)<p}}function mg(b){return Math.abs(b.y)>Math.abs(b.x)}class Vh extends dg{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,p,g){super.touchstart(s,p,g),this._currentTouchCount=g.length}_start(s){this._lastPoints=s,mg(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,p,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let y=s[0].sub(this._lastPoints[0]),w=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,w,g.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(y.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(s,p,g){if(this._valid!==void 0)return this._valid;let y=s.mag()>=2,w=p.mag()>=2;if(!y&&!w)return;if(!y||!w)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;let M=s.y>0==p.y>0;return mg(s)&&mg(p)&&M}}let yI={panStep:100,bearingStep:15,pitchStep:10};class cs{constructor(s){this._tr=new Ks(s);let p=yI;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let p=0,g=0,y=0,w=0,M=0;switch(s.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),w=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),w=1);break;case 38:s.shiftKey?y=1:(s.preventDefault(),M=-1);break;case 40:s.shiftKey?y=-1:(s.preventDefault(),M=1);break;default:return;}return this._rotationDisabled&&(g=0,y=0),{cameraAnimation:O=>{let N=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:Tl,zoom:p?Math.round(N.zoom)+p*(s.shiftKey?2:1):N.zoom,bearing:N.bearing+g*this._bearingStep,pitch:N.pitch+y*this._pitchStep,offset:[-w*this._panStep,-M*this._panStep],center:N.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Tl(b){return b*(2-b)}let Vx=4.000244140625;class Xs{constructor(s,p){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=s,this._tr=new Ks(s),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let p=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY,g=d.now(),y=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,p!==0&&p%Vx==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(y*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),s.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=s,this._delta-=p,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let p=v.mousePos(this._map.getCanvas(),s),g=this._tr;this._around=p.y>g.transform.height/2-g.transform.getHorizon()?o.N.convert(this._aroundCenter?g.center:g.unproject(p)):o.N.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let s=this._tr.transform;if(this._delta!==0){let N=this._type==="wheel"&&Math.abs(this._delta)>Vx?this._wheelZoomRate:this._defaultZoomRate,B=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&B!==0&&(B=1/B);let V=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(V*B))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let p=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,g=this._startZoom,y=this._easing,w,M=!1,O=d.now()-this._lastWheelEventTime;if(this._type==="wheel"&&g&&y&&O){let N=Math.min(O/200,1),B=y(N);w=o.y.number(g,p,B),N<1?this._frameId||(this._frameId=!0):M=!0}else w=p,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let p=o.b9;if(this._prevEase){let g=this._prevEase,y=(d.now()-g.start)/g.duration,w=g.easing(y+.01)-g.easing(y),M=.27/Math.sqrt(w*w+1e-4)*.01,O=Math.sqrt(.0729-M*M);p=o.b8(M,O,.25,1)}return this._prevEase={start:d.now(),duration:s,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class yf{constructor(s,p){this._clickZoom=s,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class pq{constructor(s){this._tr=new Ks(s),this.reset()}reset(){this._active=!1}dblclick(s,p){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dq{constructor(){this._tap=new fg({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,p,g){if(!this._swipePoint)if(this._tapTime){let y=p[0],w=s.timeStamp-this._tapTime<500,M=this._tapPoint.dist(y)<30;w&&M?g.length>0&&(this._swipePoint=y,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(s,p,g)}touchmove(s,p,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;let y=p[0],w=y.y-this._swipePoint.y;return this._swipePoint=y,s.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(s,p,g)}touchend(s,p,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{let y=this._tap.touchend(s,p,g);y&&(this._tapTime=s.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _I{constructor(s,p,g){this._el=s,this._mousePan=p,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xI{constructor(s,p,g){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=p,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gx{constructor(s,p,g,y){this._el=s,this._touchZoom=p,this._touchRotate=g,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Gh{constructor(s,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=v.create("div","maplibregl-cooperative-gesture-screen",s);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=p,this._container.appendChild(y);let w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=g,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(v.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,p){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:s,originalEvent:p})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let fs=b=>b.zoom||b.drag||b.pitch||b.rotate;class qt extends o.k{}function vg(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class $x{constructor(s,p){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,w)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let M=y.type==="renderFrame"?void 0:y,O={needsRenderFrame:!1},N={},B={},V=y.touches,G=V?this._getMapTouches(V):void 0,X=G?v.touchPos(this._map.getCanvas(),G):v.mousePos(this._map.getCanvas(),y);for(let{handlerName:he,handler:me,allowed:ge}of this._handlers){if(!me.isEnabled())continue;let ye;this._blockedByActive(B,ge,he)?me.reset():me[w||y.type]&&(ye=me[w||y.type](y,X,G),this.mergeHandlerResult(O,N,ye,he,M),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||me.isActive())&&(B[he]=me)}let ne={};for(let he in this._previousActiveHandlers)B[he]||(ne[he]=M);this._previousActiveHandlers=B,(Object.keys(ne).length||vg(O))&&(this._changes.push([O,N,ne]),this._triggerRenderFrame()),(Object.keys(B).length||vg(O))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:se}=O;se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],se(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Lx(s),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);let g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(let[y,w,M]of this._listeners)v.addEventListener(y,w,y===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(let[s,p,g]of this._listeners)v.removeEventListener(s,p,s===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){let p=this._map,g=p.getCanvasContainer();this._add("mapEvent",new gI(p,s));let y=p.boxZoom=new za(p,s);this._add("boxZoom",y),s.interactive&&s.boxZoom&&y.enable();let w=p.cooperativeGestures=new Gh(p,s.cooperativeGestures);this._add("cooperativeGestures",w),s.cooperativeGestures&&w.enable();let M=new Uh(p),O=new pq(p);p.doubleClickZoom=new yf(O,M),this._add("tapZoom",M),this._add("clickZoom",O),s.interactive&&s.doubleClickZoom&&p.doubleClickZoom.enable();let N=new dq;this._add("tapDragZoom",N);let B=p.touchPitch=new Vh(p);this._add("touchPitch",B),s.interactive&&s.touchPitch&&p.touchPitch.enable(s.touchPitch);let V=kx(s),G=Fx(s);p.dragRotate=new xI(s,V,G),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]),s.interactive&&s.dragRotate&&p.dragRotate.enable();let X=(({enable:ye,clickTolerance:ce})=>{let Ae=new hg({checkCorrectEvent:De=>v.mouseButton(De)===0&&!De.ctrlKey});return new Eu({clickTolerance:ce,move:(De,Fe)=>({around:Fe,panDelta:Fe.sub(De)}),activateOnStart:!0,moveStateManager:Ae,enable:ye,assignEvents:pg})})(s),ne=new gf(s,p);p.dragPan=new _I(g,X,ne),this._add("mousePan",X),this._add("touchPan",ne,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&p.dragPan.enable(s.dragPan);let se=new Ux,he=new zx;p.touchZoomRotate=new Gx(g,he,se,N),this._add("touchRotate",se,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&p.touchZoomRotate.enable(s.touchZoomRotate);let me=p.scrollZoom=new Xs(p,()=>this._triggerRenderFrame());this._add("scrollZoom",me,["mousePan"]),s.interactive&&s.scrollZoom&&p.scrollZoom.enable(s.scrollZoom);let ge=p.keyboard=new cs(p);this._add("keyboard",ge),s.interactive&&s.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new vi(p))}_add(s,p,g){this._handlers.push({handlerName:s,handler:p,allowed:g}),this._handlersById[s]=p}stop(s){if(!this._updatingCamera){for(let{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(let{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fs(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,p,g){for(let y in s)if(y!==g&&(!p||p.indexOf(y)<0))return!0;return!1}_getMapTouches(s){let p=[];for(let g of s)this._el.contains(g.target)&&p.push(g);return p}mergeHandlerResult(s,p,g,y,w){if(!g)return;o.e(s,g);let M={handlerName:y,originalEvent:g.originalEvent||w};g.zoomDelta!==void 0&&(p.zoom=M),g.panDelta!==void 0&&(p.drag=M),g.pitchDelta!==void 0&&(p.pitch=M),g.bearingDelta!==void 0&&(p.rotate=M)}_applyChanges(){let s={},p={},g={};for(let[y,w,M]of this._changes)y.panDelta&&(s.panDelta=(s.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(s.around=y.around),y.pinchAround!==void 0&&(s.pinchAround=y.pinchAround),y.noInertia&&(s.noInertia=y.noInertia),o.e(p,w),o.e(g,M);this._updateMapTransform(s,p,g),this._changes=[]}_updateMapTransform(s,p,g){let y=this._map,w=y._getTransformForUpdate(),M=y.terrain;if(!(vg(s)||M&&this._terrainMovement))return this._fireEvents(p,g,!0);let{panDelta:O,zoomDelta:N,bearingDelta:B,pitchDelta:V,around:G,pinchAround:X}=s;X!==void 0&&(G=X),y._stop(!0),G=G||y.transform.centerPoint;let ne=w.pointLocation(O?G.sub(O):G);B&&(w.bearing+=B),V&&(w.pitch+=V),N&&(w.zoom+=N),M?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?w.center=w.pointLocation(w.centerPoint.sub(O)):w.setLocationAtPoint(ne,G):(this._terrainMovement=!0,this._map._elevationFreeze=!0,w.setLocationAtPoint(ne,G)):w.setLocationAtPoint(ne,G),y._applyUpdatedTransform(w),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(p,g,!0)}_fireEvents(s,p,g){let y=fs(this._eventsInProgress),w=fs(s),M={};for(let G in s){let{originalEvent:X}=s[G];this._eventsInProgress[G]||(M[`${G}start`]=X),this._eventsInProgress[G]=s[G]}!y&&w&&this._fireEvent("movestart",w.originalEvent);for(let G in M)this._fireEvent(G,M[G]);w&&this._fireEvent("move",w.originalEvent);for(let G in s){let{originalEvent:X}=s[G];this._fireEvent(G,X)}let O={},N;for(let G in this._eventsInProgress){let{handlerName:X,originalEvent:ne}=this._eventsInProgress[G];this._handlersById[X].isActive()||(delete this._eventsInProgress[G],N=p[X]||ne,O[`${G}end`]=N)}for(let G in O)this._fireEvent(G,O[G]);let B=fs(this._eventsInProgress),V=(y||w)&&!B;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let G=this._map._getTransformForUpdate();G.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(G)}if(g&&V){this._updatingCamera=!0;let G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;!G||!G.essential&&d.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:N})),X(this._map.getBearing())&&this._map.resetNorth()):(X(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(s,p){this._map.fire(new o.k(s,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new qt("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class wI extends o.E{constructor(s,p){super(),this._renderFrameCallback=()=>{let g=Math.min((d.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=p.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(s,p){return this.jumpTo({center:s},p)}panBy(s,p,g){return s=o.P.convert(s).mult(-1),this.panTo(this.transform.center,o.e({offset:s},p),g)}panTo(s,p,g){return this.easeTo(o.e({center:s},p),g)}getZoom(){return this.transform.zoom}setZoom(s,p){return this.jumpTo({zoom:s},p),this}zoomTo(s,p,g){return this.easeTo(o.e({zoom:s},p),g)}zoomIn(s,p){return this.zoomTo(this.getZoom()+1,s,p),this}zoomOut(s,p){return this.zoomTo(this.getZoom()-1,s,p),this}getBearing(){return this.transform.bearing}setBearing(s,p){return this.jumpTo({bearing:s},p),this}getPadding(){return this.transform.padding}setPadding(s,p){return this.jumpTo({padding:s},p),this}rotateTo(s,p,g){return this.easeTo(o.e({bearing:s},p),g)}resetNorth(s,p){return this.rotateTo(0,o.e({duration:1e3},s),p),this}resetNorthPitch(s,p){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},s),p),this}snapToNorth(s,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,p):this}getPitch(){return this.transform.pitch}setPitch(s,p){return this.jumpTo({pitch:s},p),this}cameraForBounds(s,p){s=be.convert(s).adjustAntiMeridian();let g=p&&p.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),g,p)}_cameraForBoxAndBearing(s,p,g,y){let w={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){let mt=y.padding;y.padding={top:mt,bottom:mt,right:mt,left:mt}}y.padding=o.e(w,y.padding);let M=this.transform,O=M.padding,N=new be(s,p),B=M.project(N.getNorthWest()),V=M.project(N.getNorthEast()),G=M.project(N.getSouthEast()),X=M.project(N.getSouthWest()),ne=o.ba(-g),se=B.rotate(ne),he=V.rotate(ne),me=G.rotate(ne),ge=X.rotate(ne),ye=new o.P(Math.max(se.x,he.x,ge.x,me.x),Math.max(se.y,he.y,ge.y,me.y)),ce=new o.P(Math.min(se.x,he.x,ge.x,me.x),Math.min(se.y,he.y,ge.y,me.y)),Ae=ye.sub(ce),De=(M.width-(O.left+O.right+y.padding.left+y.padding.right))/Ae.x,Fe=(M.height-(O.top+O.bottom+y.padding.top+y.padding.bottom))/Ae.y;if(Fe<0||De<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let et=Math.min(M.scaleZoom(M.scale*Math.min(De,Fe)),y.maxZoom),lt=o.P.convert(y.offset),Et=new o.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(o.ba(g)),Dt=lt.add(Et).mult(M.scale/M.zoomScale(et));return{center:M.unproject(B.add(G).div(2).sub(Dt)),zoom:et,bearing:g}}fitBounds(s,p,g){return this._fitInternal(this.cameraForBounds(s,p),p,g)}fitScreenCoordinates(s,p,g,y,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(s)),this.transform.pointLocation(o.P.convert(p)),g,y),y,w)}_fitInternal(s,p,g){return s?(delete(p=o.e(s,p)).padding,p.linear?this.easeTo(p,g):this.flyTo(p,g)):this}jumpTo(s,p){this.stop();let g=this._getTransformForUpdate(),y=!1,w=!1,M=!1;return"zoom"in s&&g.zoom!==+s.zoom&&(y=!0,g.zoom=+s.zoom),s.center!==void 0&&(g.center=o.N.convert(s.center)),"bearing"in s&&g.bearing!==+s.bearing&&(w=!0,g.bearing=+s.bearing),"pitch"in s&&g.pitch!==+s.pitch&&(M=!0,g.pitch=+s.pitch),s.padding==null||g.isPaddingEqual(s.padding)||(g.padding=s.padding),this._applyUpdatedTransform(g),this.fire(new o.k("movestart",p)).fire(new o.k("move",p)),y&&this.fire(new o.k("zoomstart",p)).fire(new o.k("zoom",p)).fire(new o.k("zoomend",p)),w&&this.fire(new o.k("rotatestart",p)).fire(new o.k("rotate",p)).fire(new o.k("rotateend",p)),M&&this.fire(new o.k("pitchstart",p)).fire(new o.k("pitch",p)).fire(new o.k("pitchend",p)),this.fire(new o.k("moveend",p))}calculateCameraOptionsFromTo(s,p,g,y=0){let w=o.Z.fromLngLat(s,p),M=o.Z.fromLngLat(g,y),O=M.x-w.x,N=M.y-w.y,B=M.z-w.z,V=Math.hypot(O,N,B);if(V===0)throw new Error("Can't calculate camera options with same From and To");let G=Math.hypot(O,N),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/V/this.transform.tileSize),ne=180*Math.atan2(O,-N)/Math.PI,se=180*Math.acos(G/V)/Math.PI;return se=B<0?90-se:90+se,{center:M.toLngLat(),zoom:X,pitch:se,bearing:ne}}easeTo(s,p){var g;this._stop(!1,s.easeId),((s=o.e({offset:[0,0],duration:500,easing:o.b9},s)).animate===!1||!s.essential&&d.prefersReducedMotion)&&(s.duration=0);let y=this._getTransformForUpdate(),w=y.zoom,M=y.bearing,O=y.pitch,N=y.padding,B="bearing"in s?this._normalizeBearing(s.bearing,M):M,V="pitch"in s?+s.pitch:O,G="padding"in s?s.padding:y.padding,X=o.P.convert(s.offset),ne=y.centerPoint.add(X),se=y.pointLocation(ne),{center:he,zoom:me}=y.getConstrained(o.N.convert(s.center||se),(g=s.zoom)!==null&&g!==void 0?g:w);this._normalizeCenter(he,y);let ge=y.project(se),ye=y.project(he).sub(ge),ce=y.zoomScale(me-w),Ae,De;s.around&&(Ae=o.N.convert(s.around),De=y.locationPoint(Ae));let Fe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||me!==w,this._rotating=this._rotating||M!==B,this._pitching=this._pitching||V!==O,this._padding=!y.isPaddingEqual(G),this._easeId=s.easeId,this._prepareEase(p,s.noMoveStart,Fe),this.terrain&&this._prepareElevation(he),this._ease(et=>{if(this._zooming&&(y.zoom=o.y.number(w,me,et)),this._rotating&&(y.bearing=o.y.number(M,B,et)),this._pitching&&(y.pitch=o.y.number(O,V,et)),this._padding&&(y.interpolatePadding(N,G,et),ne=y.centerPoint.add(X)),this.terrain&&!s.freezeElevation&&this._updateElevation(et),Ae)y.setLocationAtPoint(Ae,De);else{let lt=y.zoomScale(y.zoom-w),Et=me>w?Math.min(2,ce):Math.max(.5,ce),Dt=Math.pow(Et,1-et),mt=y.unproject(ge.add(ye.mult(et*Dt)).mult(lt));y.setLocationAtPoint(y.renderWorldCopies?mt.wrap():mt,ne)}this._applyUpdatedTransform(y),this._fireMoveEvents(p)},et=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(p,et)},s),this}_prepareEase(s,p,g={}){this._moving=!0,p||g.moving||this.fire(new o.k("movestart",s)),this._zooming&&!g.zooming&&this.fire(new o.k("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new o.k("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new o.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&p!==this._elevationTarget){let g=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(g-(p-(g*s+this._elevationStart))/(1-s)),this._elevationTarget=p}this.transform.elevation=o.y.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){let p=s.getCameraPosition(),g=this.terrain.getElevationForLngLatZoom(p.lngLat,s.zoom);if(p.altitude<g){let y=this.calculateCameraOptionsFromTo(p.lngLat,g,s.center,s.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(s){let p=[];if(this.terrain&&p.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&p.push(y=>this.transformCameraUpdate(y)),!p.length)return;let g=s.clone();for(let y of p){let w=g.clone(),{center:M,zoom:O,pitch:N,bearing:B,elevation:V}=y(w);M&&(w.center=M),O!==void 0&&(w.zoom=O),N!==void 0&&(w.pitch=N),B!==void 0&&(w.bearing=B),V!==void 0&&(w.elevation=V),g.apply(w)}this.transform.apply(g)}_fireMoveEvents(s){this.fire(new o.k("move",s)),this._zooming&&this.fire(new o.k("zoom",s)),this._rotating&&this.fire(new o.k("rotate",s)),this._pitching&&this.fire(new o.k("pitch",s))}_afterEase(s,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;let g=this._zooming,y=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.k("zoomend",s)),y&&this.fire(new o.k("rotateend",s)),w&&this.fire(new o.k("pitchend",s)),this.fire(new o.k("moveend",s))}flyTo(s,p){var g;if(!s.essential&&d.prefersReducedMotion){let Mt=o.M(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Mt,p)}this.stop(),s=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b9},s);let y=this._getTransformForUpdate(),w=y.zoom,M=y.bearing,O=y.pitch,N=y.padding,B="bearing"in s?this._normalizeBearing(s.bearing,M):M,V="pitch"in s?+s.pitch:O,G="padding"in s?s.padding:y.padding,X=o.P.convert(s.offset),ne=y.centerPoint.add(X),se=y.pointLocation(ne),{center:he,zoom:me}=y.getConstrained(o.N.convert(s.center||se),(g=s.zoom)!==null&&g!==void 0?g:w);this._normalizeCenter(he,y);let ge=y.zoomScale(me-w),ye=y.project(se),ce=y.project(he).sub(ye),Ae=s.curve,De=Math.max(y.width,y.height),Fe=De/ge,et=ce.mag();if("minZoom"in s){let Mt=o.ac(Math.min(s.minZoom,w,me),y.minZoom,y.maxZoom),pr=De/y.zoomScale(Mt-w);Ae=Math.sqrt(pr/et*2)}let lt=Ae*Ae;function Et(Mt){let pr=(Fe*Fe-De*De+(Mt?-1:1)*lt*lt*et*et)/(2*(Mt?Fe:De)*lt*et);return Math.log(Math.sqrt(pr*pr+1)-pr)}function Dt(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function mt(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}let dt=Et(!1),Ht=function(Mt){return mt(dt)/mt(dt+Ae*Mt)},vr=function(Mt){return De*((mt(dt)*(Dt(pr=dt+Ae*Mt)/mt(pr))-Dt(dt))/lt)/et;var pr},gt=(Et(!0)-dt)/Ae;if(Math.abs(et)<1e-6||!isFinite(gt)){if(Math.abs(De-Fe)<1e-6)return this.easeTo(s,p);let Mt=Fe<De?-1:1;gt=Math.abs(Math.log(Fe/De))/Ae,vr=()=>0,Ht=pr=>Math.exp(Mt*Ae*pr)}return s.duration="duration"in s?+s.duration:1e3*gt/("screenSpeed"in s?+s.screenSpeed/Ae:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=M!==B,this._pitching=V!==O,this._padding=!y.isPaddingEqual(G),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(he),this._ease(Mt=>{let pr=Mt*gt,$n=1/Ht(pr);y.zoom=Mt===1?me:w+y.scaleZoom($n),this._rotating&&(y.bearing=o.y.number(M,B,Mt)),this._pitching&&(y.pitch=o.y.number(O,V,Mt)),this._padding&&(y.interpolatePadding(N,G,Mt),ne=y.centerPoint.add(X)),this.terrain&&!s.freezeElevation&&this._updateElevation(Mt);let Cr=Mt===1?he:y.unproject(ye.add(ce.mult(vr(pr))).mult($n));y.setLocationAtPoint(y.renderWorldCopies?Cr.wrap():Cr,ne),this._applyUpdatedTransform(y),this._fireMoveEvents(p)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(p)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,p){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,p)}return s||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(s,p,g){g.animate===!1||g.duration===0?(s(1),p()):(this._easeStart=d.now(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,p){s=o.b3(s,-180,180);let g=Math.abs(s-p);return Math.abs(s-360-p)<g&&(s-=360),Math.abs(s+360-p)<g&&(s+=360),s}_normalizeCenter(s,p){if(!p.renderWorldCopies||p.lngRange)return;let g=s.lng-p.center.lng;s.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}let $h={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Hh{constructor(s=$h){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=v.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=v.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=v.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){v.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,p){let g=this._map._getUIString(`AttributionControl.${p}`);s.title=g,s.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){let y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}let p=this._map.style.sourceCaches;for(let y in p){let w=p[y];if(w.used||w.usedForTerrain){let M=w.getSource();M.attribution&&s.indexOf(M.attribution)<0&&s.push(M.attribution)}}s=s.filter(y=>String(y).trim()),s.sort((y,w)=>y.length-w.length),s=s.filter((y,w)=>{for(let M=w+1;M<s.length;M++)if(s[M].indexOf(y)>=0)return!1;return!0});let g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Hx{constructor(s={}){this._updateCompact=()=>{let p=this._container.children;if(p.length){let g=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=v.create("div","maplibregl-ctrl");let p=v.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){v.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){let p=++this._id;return this._queue.push({callback:s,id:p,cancelled:!1}),p}remove(s){let p=this._currentlyRunning,g=p?this._queue.concat(p):this._queue;for(let y of g)if(y.id===s)return void(y.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let p=this._currentlyRunning=this._queue;this._queue=[];for(let g of p)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Wx=o.Y([{name:"a_pos3d",type:"Int16",components:3}]);class mq extends o.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*YI(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,p){this.sourceCache.update(s,p),this._renderableTilesKeys=[];let g={};for(let y of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))g[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),o.aP(y.posMatrix,0,o.X,0,o.X,0,1),this._tiles[y.key]=new Ci(y,this.tileSize));for(let y in this._tiles)g[y]||delete this._tiles[y]}freeRtt(s){for(let p in this._tiles){let g=this._tiles[p];(!s||g.tileID.equals(s)||g.tileID.isChildOf(s)||s.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){let p={};for(let g of this._renderableTilesKeys){let y=this._tiles[g].tileID;if(y.canonical.equals(s.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16),o.aP(w.posMatrix,0,o.X,0,o.X,0,1),p[g]=w}else if(y.canonical.isChildOf(s.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16);let M=y.canonical.z-s.canonical.z,O=y.canonical.x-(y.canonical.x>>M<<M),N=y.canonical.y-(y.canonical.y>>M<<M),B=o.X>>M;o.aP(w.posMatrix,0,B,0,B,0,1),o.J(w.posMatrix,w.posMatrix,[-O*B,-N*B,0]),p[g]=w}else if(s.canonical.isChildOf(y.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16);let M=s.canonical.z-y.canonical.z,O=s.canonical.x-(s.canonical.x>>M<<M),N=s.canonical.y-(s.canonical.y>>M<<M),B=o.X>>M;o.aP(w.posMatrix,0,o.X,0,o.X,0,1),o.J(w.posMatrix,w.posMatrix,[O*B,N*B,0]),o.K(w.posMatrix,w.posMatrix,[1/YI(2,M),1/YI(2,M),0]),p[g]=w}}return p}getSourceTile(s,p){let g=this.sourceCache._source,y=s.overscaledZ-this.deltaZoom;if(y>g.maxzoom&&(y=g.maxzoom),y<g.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(y).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!w||!w.dem)&&p)for(;y>=g.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(s.scaledTo(y--).key);return w}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(p=>p.timeAdded>=s)}}class Zx{constructor(s,p,g){this.painter=s,this.sourceCache=new mq(p),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,p,g,y=o.X){var w;if(!(p>=0&&p<y&&g>=0&&g<y))return 0;let M=this.getTerrainData(s),O=(w=M.tile)===null||w===void 0?void 0:w.dem;if(!O)return 0;let N=function(se,he,me){var ge=he[0],ye=he[1];return se[0]=me[0]*ge+me[4]*ye+me[12],se[1]=me[1]*ge+me[5]*ye+me[13],se}([],[p/y*o.X,g/y*o.X],M.u_terrain_matrix),B=[N[0]*O.dim,N[1]*O.dim],V=Math.floor(B[0]),G=Math.floor(B[1]),X=B[0]-V,ne=B[1]-G;return O.get(V,G)*(1-X)*(1-ne)+O.get(V+1,G)*X*(1-ne)+O.get(V,G+1)*(1-X)*ne+O.get(V+1,G+1)*X*ne}getElevationForLngLatZoom(s,p){if(!o.bb(p,s.wrap()))return 0;let{tileID:g,mercatorX:y,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(s,p);return this.getElevation(g,y%o.X,w%o.X,o.X)}getElevation(s,p,g,y=o.X){return this.getDEMElevation(s,p,g,y)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){let y=this.painter.context,w=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new le(y,w,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new le(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}let p=this.sourceCache.getSourceTile(s,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){let y=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new le(y,p.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),p.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}let g=p&&p+p.tileID.key+s.key;if(g&&!this._demMatrixCache[g]){let y=this.sourceCache.sourceCache._source.maxzoom,w=s.canonical.z-p.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=y?w=s.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let M=s.canonical.x-(s.canonical.x>>w<<w),O=s.canonical.y-(s.canonical.y>>w<<w),N=o.bc(new Float64Array(16),[1/(o.X<<w),1/(o.X<<w),0]);o.J(N,N,[M*o.X,O*o.X,0]),this._demMatrixCache[s.key]={matrix:N,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(s){let p=this.painter,g=p.width/devicePixelRatio,y=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new le(p.context,{width:g,height:y,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new le(p.context,{width:g,height:y,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(g,y,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,g,y))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,M=0;w<this._coordsTextureSize;w++)for(let O=0;O<this._coordsTextureSize;O++,M+=4)p[M+0]=255&O,p[M+1]=255&w,p[M+2]=O>>8<<4|w>>8,p[M+3]=0;let g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),y=new le(s,g,s.gl.RGBA,{premultiply:!1});return y.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);let p=new Uint8Array(4),g=this.painter.context,y=g.gl,w=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(w,O-M-1,1,1,y.RGBA,y.UNSIGNED_BYTE,p),g.bindFramebuffer.set(null);let N=p[0]+(p[2]>>4<<8),B=p[1]+((15&p[2])<<8),V=this.coordsIndex[255-p[3]],G=V&&this.sourceCache.getTileByID(V);if(!G)return null;let X=this._coordsTextureSize,ne=(1<<G.tileID.canonical.z)*X;return new o.Z((G.tileID.canonical.x*X+N)/ne+G.tileID.wrap,(G.tileID.canonical.y*X+B)/ne,this.getElevation(G.tileID,N,B,X))}depthAtPoint(s){let p=new Uint8Array(4),g=this.painter.context,y=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,p),g.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let s=this.painter.context,p=new o.bd,g=new o.aY,y=this.meshSize,w=o.X/y,M=y*y;for(let G=0;G<=y;G++)for(let X=0;X<=y;X++)p.emplaceBack(X*w,G*w,0);for(let G=0;G<M;G+=y+1)for(let X=0;X<y;X++)g.emplaceBack(X+G,y+X+G+1,y+X+G+2),g.emplaceBack(X+G,y+X+G+2,X+G+1);let O=p.length,N=O+2*(y+1);for(let G of[0,1])for(let X=0;X<=y;X++)for(let ne of[0,1])p.emplaceBack(X*w,G*o.X,ne);for(let G=0;G<2*y;G+=2)g.emplaceBack(N+G,N+G+1,N+G+3),g.emplaceBack(N+G,N+G+3,N+G+2),g.emplaceBack(O+G,O+G+3,O+G+1),g.emplaceBack(O+G,O+G+2,O+G+3);let B=p.length,V=B+2*(y+1);for(let G of[0,1])for(let X=0;X<=y;X++)for(let ne of[0,1])p.emplaceBack(G*o.X,X*w,ne);for(let G=0;G<2*y;G+=2)g.emplaceBack(B+G,B+G+1,B+G+3),g.emplaceBack(B+G,B+G+3,B+G+2),g.emplaceBack(V+G,V+G+3,V+G+1),g.emplaceBack(V+G,V+G+2,V+G+3);return this._mesh=new ag(s.createVertexBuffer(p,Wx.members),s.createIndexBuffer(g),o.a0.simpleSegment(0,0,p.length,g.length)),this._mesh}getMeshFrameDelta(s){return 2*Math.PI*o.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,p){var g;let{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(s,p);return(g=this.getMinMaxElevation(y).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(s){let p=this.getTerrainData(s).tile,g={minElevation:null,maxElevation:null};return p&&p.dem&&(g.minElevation=p.dem.min*this.exaggeration,g.maxElevation=p.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(s,p){let g=o.Z.fromLngLat(s.wrap()),y=(1<<p)*o.X,w=g.x*y,M=g.y*y,O=Math.floor(w/o.X),N=Math.floor(M/o.X);return{tileID:new o.S(p,0,p,O,N),mercatorX:w,mercatorY:M}}}class vq{constructor(s,p,g){this._context=s,this._size=p,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){let p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new le(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(g.texture),{id:s,fbo:p,texture:g,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>s.id!==p),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(let p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(let s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}let Wh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class bI{constructor(s,p){this.painter=s,this.terrain=p,this.pool=new vq(s.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(g=>!s._layers[g].isHidden(p)),this._coordsDescendingInv={};for(let g in s.sourceCaches){this._coordsDescendingInv[g]={};let y=s.sourceCaches[g].getVisibleCoordinates();for(let w of y){let M=this.terrain.sourceCache.getTerrainCoords(w);for(let O in M)this._coordsDescendingInv[g][O]||(this._coordsDescendingInv[g][O]=[]),this._coordsDescendingInv[g][O].push(M[O])}}this._coordsDescendingInvStr={};for(let g of s._order){let y=s._layers[g],w=y.source;if(Wh[y.type]&&!this._coordsDescendingInvStr[w]){this._coordsDescendingInvStr[w]={};for(let M in this._coordsDescendingInv[w])this._coordsDescendingInvStr[w][M]=this._coordsDescendingInv[w][M].map(O=>O.key).sort().join()}}for(let g of this._renderableTiles)for(let y in this._coordsDescendingInvStr){let w=this._coordsDescendingInvStr[y][g.tileID.key];w&&w!==g.rttCoords[y]&&(g.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;let p=s.type,g=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Wh[p]&&(this._prevType&&Wh[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(s.id),!y))return!0;if(Wh[this._prevType]||Wh[p]&&y){this._prevType=p;let w=this._stacks.length-1,M=this._stacks[w]||[];for(let O of this._renderableTiles){if(this.pool.isFull()&&(dI(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[w]){let B=this.pool.getObjectForId(O.rtt[w].id);if(B.stamp===O.rtt[w].stamp){this.pool.useObject(B);continue}}let N=this.pool.getOrCreateFreeObject();this.pool.useObject(N),this.pool.stampObject(N),O.rtt[w]={id:N.id,stamp:N.stamp},g.context.bindFramebuffer.set(N.fbo.framebuffer),g.context.clear({color:o.aM.transparent,stencil:0}),g.currentStencilSource=void 0;for(let B=0;B<M.length;B++){let V=g.style._layers[M[B]],G=V.source?this._coordsDescendingInv[V.source][O.tileID.key]:[O.tileID];g.context.viewport.set([0,0,N.fbo.width,N.fbo.height]),g._renderTileClippingMasks(V,G),g.renderLayer(g,g.style.sourceCaches[V.source],V,G),V.source&&(O.rttCoords[V.source]=this._coordsDescendingInvStr[V.source][O.tileID.key])}}return dI(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Wh[p]}return!1}}let Yx={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},SI=a,gq={hash:!1,interactive:!0,bearingSnap:7,attributionControl:$h,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Kx=b=>{b.touchstart=b.dragStart,b.touchmoveWindow=b.dragMove,b.touchend=b.dragEnd},yq={showCompass:!0,showZoom:!0,visualizePitch:!1};class _q{constructor(s,p,g=!1){this.mousedown=M=>{this.startMouse(o.e({},M,{ctrlKey:!0,preventDefault:()=>M.preventDefault()}),v.mousePos(this.element,M)),v.addEventListener(window,"mousemove",this.mousemove),v.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=M=>{this.moveMouse(M,v.mousePos(this.element,M))},this.mouseup=M=>{this.mouseRotate.dragEnd(M),this.mousePitch&&this.mousePitch.dragEnd(M),this.offTemp()},this.touchstart=M=>{M.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=v.touchPos(this.element,M.targetTouches)[0],this.startTouch(M,this._startPos),v.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.addEventListener(window,"touchend",this.touchend))},this.touchmove=M=>{M.targetTouches.length!==1?this.reset():(this._lastPos=v.touchPos(this.element,M.targetTouches)[0],this.moveTouch(M,this._lastPos))},this.touchend=M=>{M.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let y=s.dragRotate._mouseRotate.getClickTolerance(),w=s.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=kx({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:M,clickTolerance:O,bearingDegreesPerPixelMoved:N=.8})=>{let B=new qx;return new Eu({clickTolerance:O,move:(V,G)=>({bearingDelta:(G.x-V.x)*N}),moveStateManager:B,enable:M,assignEvents:Kx})})({clickTolerance:y,enable:!0}),this.map=s,g&&(this.mousePitch=Fx({clickTolerance:w,enable:!0}),this.touchPitch=(({enable:M,clickTolerance:O,pitchDegreesPerPixelMoved:N=-.5})=>{let B=new qx;return new Eu({clickTolerance:O,move:(V,G)=>({pitchDelta:(G.y-V.y)*N}),moveStateManager:B,enable:M,assignEvents:Kx})})({clickTolerance:w,enable:!0})),v.addEventListener(p,"mousedown",this.mousedown),v.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),v.addEventListener(p,"touchcancel",this.reset)}startMouse(s,p){this.mouseRotate.dragStart(s,p),this.mousePitch&&this.mousePitch.dragStart(s,p),v.disableDrag()}startTouch(s,p){this.touchRotate.dragStart(s,p),this.touchPitch&&this.touchPitch.dragStart(s,p),v.disableDrag()}moveMouse(s,p){let g=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(s,p)||{};if(y&&g.setBearing(g.getBearing()+y),this.mousePitch){let{pitchDelta:w}=this.mousePitch.dragMove(s,p)||{};w&&g.setPitch(g.getPitch()+w)}}moveTouch(s,p){let g=this.map,{bearingDelta:y}=this.touchRotate.dragMove(s,p)||{};if(y&&g.setBearing(g.getBearing()+y),this.touchPitch){let{pitchDelta:w}=this.touchPitch.dragMove(s,p)||{};w&&g.setPitch(g.getPitch()+w)}}off(){let s=this.element;v.removeEventListener(s,"mousedown",this.mousedown),v.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend),v.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){v.enableDrag(),v.removeEventListener(window,"mousemove",this.mousemove),v.removeEventListener(window,"mouseup",this.mouseup),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend)}}let Ba;function Gn(b,s,p){let g=new o.N(b.lng,b.lat);if(b=new o.N(b.lng,b.lat),s){let y=new o.N(b.lng-360,b.lat),w=new o.N(b.lng+360,b.lat),M=p.locationPoint(b).distSqr(s);p.locationPoint(y).distSqr(s)<M?b=y:p.locationPoint(w).distSqr(s)<M&&(b=w)}for(;Math.abs(b.lng-p.center.lng)>180;){let y=p.locationPoint(b);if(y.x>=0&&y.y>=0&&y.x<=p.width&&y.y<=p.height)break;b.lng>p.center.lng?b.lng-=360:b.lng+=360}return b.lng!==g.lng&&p.locationPoint(b).y>p.height/2-p.getHorizon()?b:g}let Zh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gg(b,s,p){let g=b.classList;for(let y in Zh)g.remove(`maplibregl-${p}-anchor-${y}`);g.add(`maplibregl-${p}-anchor-${s}`)}class yg extends o.E{constructor(s){if(super(),this._onKeyPress=p=>{let g=p.code,y=p.charCode||p.keyCode;g!=="Space"&&g!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=p=>{let g=p.originalEvent.target,y=this._element;this._popup&&(g===y||y.contains(g))&&this.togglePopup()},this._update=p=>{var g;if(!this._map)return;let y=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Gn(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let M="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?M="rotateX(0deg)":this._pitchAlignment==="map"&&(M=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||p&&p.type!=="moveend"||(this._pos=this._pos.round()),v.setTransform(this._element,`${Zh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${M} ${w}`),d.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){let g=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=o.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div");let p=v.createNS("http://www.w3.org/2000/svg","svg"),g=41,y=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${g}px`),p.setAttributeNS(null,"width",`${y}px`),p.setAttributeNS(null,"viewBox",`0 0 ${y} ${g}`);let w=v.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");let M=v.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");let O=v.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");let N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ge of N){let ye=v.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",ge.rx),ye.setAttributeNS(null,"ry",ge.ry),O.appendChild(ye)}let B=v.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);let V=v.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(V);let G=v.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");let X=v.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(X);let ne=v.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ne.setAttributeNS(null,"fill","#FFFFFF");let se=v.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(8.0, 8.0)");let he=v.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");let me=v.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),se.appendChild(he),se.appendChild(me),M.appendChild(O),M.appendChild(B),M.appendChild(G),M.appendChild(ne),M.appendChild(se),p.appendChild(M),p.setAttributeNS(null,"height",g*this._scale+"px"),p.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(p),this._offset=o.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),gg(this._element,this._anchor,"marker"),s&&s.className)for(let p of s.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.N.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){let y=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){let s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var p,g;if(!(!((p=this._map)===null||p===void 0)&&p.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let y=this._map,w=y.terrain.depthAtPoint(this._pos),M=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,M)-w<.006)return void(this._element.style.opacity=this._opacity);let O=-this._offset.y/y.transform._pixelPerMeter,N=Math.sin(y.getPitch()*Math.PI/180)*O,B=y.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),V=y.transform.lngLatToCameraDepth(this._lngLat,M+N)-B>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&V&&this._popup.remove(),this._element.style.opacity=V?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=o.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,p){return s===void 0&&p===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}let EI={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},om=0,am=!1,Il={maxWidth:100,unit:"metric"};function sm(b,s,p){let g=p&&p.maxWidth||100,y=b._container.clientHeight/2,w=b.unproject([0,y]),M=b.unproject([g,y]),O=w.distanceTo(M);if(p&&p.unit==="imperial"){let N=3.2808*O;N>5280?$t(s,g,N/5280,b._getUIString("ScaleControl.Miles")):$t(s,g,N,b._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?$t(s,g,O/1852,b._getUIString("ScaleControl.NauticalMiles")):O>=1e3?$t(s,g,O/1e3,b._getUIString("ScaleControl.Kilometers")):$t(s,g,O,b._getUIString("ScaleControl.Meters"))}function $t(b,s,p,g){let y=function(w){let M=Math.pow(10,`${Math.floor(w)}`.length-1),O=w/M;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(N){let B=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*B)/B}(O),M*O}(p);b.style.width=s*(y/p)+"px",b.innerHTML=`${y}&nbsp;${g}`}let ur={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},_g=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xg(b){if(b){if(typeof b=="number"){let s=Math.round(Math.abs(b)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,b),"top-left":new o.P(s,s),"top-right":new o.P(-s,s),bottom:new o.P(0,-b),"bottom-left":new o.P(s,-s),"bottom-right":new o.P(-s,-s),left:new o.P(b,0),right:new o.P(-b,0)}}if(b instanceof o.P||Array.isArray(b)){let s=o.P.convert(b);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:o.P.convert(b.center||[0,0]),top:o.P.convert(b.top||[0,0]),"top-left":o.P.convert(b["top-left"]||[0,0]),"top-right":o.P.convert(b["top-right"]||[0,0]),bottom:o.P.convert(b.bottom||[0,0]),"bottom-left":o.P.convert(b["bottom-left"]||[0,0]),"bottom-right":o.P.convert(b["bottom-right"]||[0,0]),left:o.P.convert(b.left||[0,0]),right:o.P.convert(b.right||[0,0])}}return xg(new o.P(0,0))}let Xx=a;i.AJAXError=o.bh,i.Evented=o.E,i.LngLat=o.N,i.MercatorCoordinate=o.Z,i.Point=o.P,i.addProtocol=o.bi,i.config=o.a,i.removeProtocol=o.bj,i.AttributionControl=Hh,i.BoxZoomHandler=za,i.CanvasSource=nn,i.CooperativeGesturesHandler=Gh,i.DoubleClickZoomHandler=yf,i.DragPanHandler=_I,i.DragRotateHandler=xI,i.EdgeInsets=zh,i.FullscreenControl=class extends o.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var s;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=p==null?void 0:p.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){v.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let b=this._fullscreenButton=v.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);v.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=yr,i.GeolocateControl=class extends o.E{constructor(b){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{let p=new o.N(s.coords.longitude,s.coords.latitude),g=s.coords.accuracy,y=this._map.getBearing(),w=o.e({bearing:y},this.options.fitBoundsOptions),M=be.fromLngLat(p,g);this._map.fitBounds(M,w,{geolocateSource:!0})},this._updateMarker=s=>{if(s){let p=new o.N(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&am)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=v.create("button","maplibregl-ctrl-geolocate",this._container),v.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");let p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{let p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new yg({element:this._dotElement}),this._circleElement=v.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new yg({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},EI,b)}onAdd(b){return this._map=b,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(s=!1){if(Ba!==void 0&&!s)return Ba;if(window.navigator.permissions===void 0)return Ba=!!window.navigator.geolocation,Ba;try{Ba=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(p){Ba=!!window.navigator.geolocation}return Ba})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),v.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,om=0,am=!1}_isOutOfMapMaxBounds(b){let s=this._map.getMaxBounds(),p=b.coords;return s&&(p.longitude<s.getWest()||p.longitude>s.getEast()||p.latitude<s.getSouth()||p.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let b=this._map.getBounds(),s=b.getSouthEast(),p=b.getNorthEast(),g=s.distanceTo(p),y=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":om--,am=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),om++,om>1?(b={maximumAge:6e5,timeout:0},am=!0):(b=this.options.positionOptions,am=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},i.Hash=lg,i.ImageSource=lr,i.KeyboardHandler=cs,i.LngLatBounds=be,i.LogoControl=Hx,i.Map=class extends wI{constructor(b){o.bf.mark(o.bg.create);let s=Object.assign(Object.assign({},gq),b);if(s.minZoom!=null&&s.maxZoom!=null&&s.minZoom>s.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(s.minPitch!=null&&s.maxPitch!=null&&s.minPitch>s.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(s.minPitch!=null&&s.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(s.maxPitch!=null&&s.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Bh(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies),{bearingSnap:s.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Hr,this._controls=[],this._mapId=o.a4(),this._contextLost=p=>{p.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:p}))},this._contextRestored=p=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:p}))},this._onMapScroll=p=>{if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._maxTileCacheZoomLevels=s.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=s.preserveDrawingBuffer===!0,this._antialias=s.antialias===!0,this._trackResize=s.trackResize===!0,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles===!0,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions===!0,this._collectResourceTiming=s.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Yx),s.locale),this._clickTolerance=s.clickTolerance,this._overridePixelRatio=s.pixelRatio,this._maxCanvasSize=s.maxCanvasSize,this.transformCameraUpdate=s.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=s.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=D.addThrottleControl(()=>this.isMoving()),this._requestManager=new k(s.transformRequest),typeof s.container=="string"){if(this._container=document.getElementById(s.container),!this._container)throw new Error(`Container '${s.container}' not found.`)}else{if(!(s.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=s.container}if(s.maxBounds&&this.setMaxBounds(s.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let p=!1,g=em(y=>{this._trackResize&&!this._removed&&(this.resize(y),this.redraw())},50);this._resizeObserver=new ResizeObserver(y=>{p?g(y):p=!0}),this._resizeObserver.observe(this._container)}this.handlers=new $x(this,s),this._hash=s.hash&&new lg(typeof s.hash=="string"&&s.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,o.e({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,this._validateStyle=s.validateStyle,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new Hh(typeof s.attributionControl=="boolean"?void 0:s.attributionControl)),s.maplibreLogo&&this.addControl(new Hx,s.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",p=>{this._update(p.dataType==="style"),this.fire(new o.k(`${p.dataType}data`,p))}),this.on("dataloading",p=>{this.fire(new o.k(`${p.dataType}dataloading`,p))}),this.on("dataabort",p=>{this.fire(new o.k("sourcedataabort",p))})}_getMapId(){return this._mapId}addControl(b,s){if(s===void 0&&(s=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let p=b.onAdd(this);this._controls.push(b);let g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(p,g.firstChild):g.appendChild(p),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let s=this._controls.indexOf(b);return s>-1&&this._controls.splice(s,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,s,p,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,s,p,g)}resize(b){var s;let p=this._containerDimensions(),g=p[0],y=p[1],w=this._getClampedPixelRatio(g,y);if(this._resizeCanvas(g,y,w),this.painter.resize(g,y,w),this.painter.overLimit()){let O=this.painter.context.gl;this._maxCanvasSize=[O.drawingBufferWidth,O.drawingBufferHeight];let N=this._getClampedPixelRatio(g,y);this._resizeCanvas(g,y,N),this.painter.resize(g,y,N)}this.transform.resize(g,y),(s=this._requestedCameraState)===null||s===void 0||s.resize(g,y);let M=!this._moving;return M&&(this.stop(),this.fire(new o.k("movestart",b)).fire(new o.k("move",b))),this.fire(new o.k("resize",b)),M&&this.fire(new o.k("moveend",b)),this}_getClampedPixelRatio(b,s){let{0:p,1:g}=this._maxCanvasSize,y=this.getPixelRatio(),w=b*y,M=s*y;return Math.min(w>p?p/w:1,M>g?g/M:1)*y}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(be.convert(b)),this._update()}setMinZoom(b){if((b=b==null?-2:b)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b==null?22:b)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b==null?0:b)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b==null?60:b)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this._update()}project(b){return this.transform.locationPoint(o.N.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.pointLocation(o.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,s,p){if(b==="mouseenter"||b==="mouseover"){let g=!1;return{layers:s,listener:p,delegates:{mousemove:w=>{let M=s.filter(N=>this.getLayer(N)),O=M.length!==0?this.queryRenderedFeatures(w.point,{layers:M}):[];O.length?g||(g=!0,p.call(this,new bo(b,this,w.originalEvent,{features:O}))):g=!1},mouseout:()=>{g=!1}}}}if(b==="mouseleave"||b==="mouseout"){let g=!1;return{layers:s,listener:p,delegates:{mousemove:M=>{let O=s.filter(N=>this.getLayer(N));(O.length!==0?this.queryRenderedFeatures(M.point,{layers:O}):[]).length?g=!0:g&&(g=!1,p.call(this,new bo(b,this,M.originalEvent)))},mouseout:M=>{g&&(g=!1,p.call(this,new bo(b,this,M.originalEvent)))}}}}{let g=y=>{let w=s.filter(O=>this.getLayer(O)),M=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];M.length&&(y.features=M,p.call(this,y),delete y.features)};return{layers:s,listener:p,delegates:{[b]:g}}}}_saveDelegatedListener(b,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(s)}_removeDelegatedListener(b,s,p){if(!this._delegatedListeners||!this._delegatedListeners[b])return;let g=this._delegatedListeners[b];for(let y=0;y<g.length;y++){let w=g[y];if(w.listener===p&&w.layers.length===s.length&&w.layers.every(M=>s.includes(M))){for(let M in w.delegates)this.off(M,w.delegates[M]);return void g.splice(y,1)}}}on(b,s,p){if(p===void 0)return super.on(b,s);let g=this._createDelegatedListener(b,typeof s=="string"?[s]:s,p);this._saveDelegatedListener(b,g);for(let y in g.delegates)this.on(y,g.delegates[y]);return this}once(b,s,p){if(p===void 0)return super.once(b,s);let g=typeof s=="string"?[s]:s,y=this._createDelegatedListener(b,g,p);for(let w in y.delegates){let M=y.delegates[w];y.delegates[w]=(...O)=>{this._removeDelegatedListener(b,g,p),M(...O)}}this._saveDelegatedListener(b,y);for(let w in y.delegates)this.once(w,y.delegates[w]);return this}off(b,s,p){return p===void 0?super.off(b,s):(this._removeDelegatedListener(b,typeof s=="string"?[s]:s,p),this)}queryRenderedFeatures(b,s){if(!this.style)return[];let p,g=b instanceof o.P||Array.isArray(b),y=g?b:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(g?{}:b)||{},y instanceof o.P||typeof y[0]=="number")p=[o.P.convert(y)];else{let w=o.P.convert(y[0]),M=o.P.convert(y[1]);p=[w,new o.P(M.x,w.y),M,new o.P(w.x,M.y),w]}return this.style.queryRenderedFeatures(p,s,this.transform)}querySourceFeatures(b,s){return this.style.querySourceFeatures(b,s)}setStyle(b,s){return(s=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(b,s))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){let s=this._locale[b];if(s==null)throw new Error(`Missing UI string '${b}'`);return s}_updateStyle(b,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,s));let p=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new $v(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,s,p):this.style.loadJSON(b,s,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new $v(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,s){if(typeof b=="string"){let p=this._requestManager.transformRequest(b,"Style");o.h(p,new AbortController).then(g=>{this._updateDiff(g.data,s)}).catch(g=>{g&&this.fire(new o.j(g))})}else typeof b=="object"&&this._updateDiff(b,s)}_updateDiff(b,s){try{this.style.setState(b,s)&&this._update(!0)}catch(p){o.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(b,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(b,s){return this._lazyInitEmptyStyle(),this.style.addSource(b,s),this._update(!0)}isSourceLoaded(b){let s=this.style&&this.style.sourceCaches[b];if(s!==void 0)return s.loaded();this.fire(new o.j(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){let s=this.style.sourceCaches[b.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&s.reload();for(let p in this.style._layers){let g=this.style._layers[p];g.type==="hillshade"&&g.source===b.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Zx(this.painter,s,b),this.painter.renderToTexture=new bI(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==b.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:b})),this}getTerrain(){var b,s;return(s=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&s!==void 0?s:null}areTilesLoaded(){let b=this.style&&this.style.sourceCaches;for(let s in b){let p=b[s]._tiles;for(let g in p){let y=p[g];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,s,p={}){let{pixelRatio:g=1,sdf:y=!1,stretchX:w,stretchY:M,content:O,textFitWidth:N,textFitHeight:B}=p;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||o.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:V,height:G,data:X}=s,ne=s;return this.style.addImage(b,{data:new o.R({width:V,height:G},new Uint8Array(X)),pixelRatio:g,stretchX:w,stretchY:M,content:O,textFitWidth:N,textFitHeight:B,sdf:y,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,b),this}}{let{width:V,height:G,data:X}=d.getImageData(s);this.style.addImage(b,{data:new o.R({width:V,height:G},X),pixelRatio:g,stretchX:w,stretchY:M,content:O,textFitWidth:N,textFitHeight:B,sdf:y,version:0})}}updateImage(b,s){let p=this.style.getImage(b);if(!p)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let g=s instanceof HTMLImageElement||o.b(s)?d.getImageData(s):s,{width:y,height:w,data:M}=g;if(y===void 0||w===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==p.data.width||w!==p.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let O=!(s instanceof HTMLImageElement||o.b(s));return p.data.replace(M,O),this.style.updateImage(b,p),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return D.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,s){return this._lazyInitEmptyStyle(),this.style.addLayer(b,s),this._update(!0)}moveLayer(b,s){return this.style.moveLayer(b,s),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,s,p){return this.style.setLayerZoomRange(b,s,p),this._update(!0)}setFilter(b,s,p={}){return this.style.setFilter(b,s,p),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,s,p,g={}){return this.style.setPaintProperty(b,s,p,g),this._update(!0)}getPaintProperty(b,s){return this.style.getPaintProperty(b,s)}setLayoutProperty(b,s,p,g={}){return this.style.setLayoutProperty(b,s,p,g),this._update(!0)}getLayoutProperty(b,s){return this.style.getLayoutProperty(b,s)}setGlyphs(b,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,s,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,s,p,g=>{g||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,s,p=>{p||this._update(!0)}),this}setLight(b,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(b){return this._lazyInitEmptyStyle(),this.style.setSky(b),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,s){return this.style.setFeatureState(b,s),this._update()}removeFeatureState(b,s){return this.style.removeFeatureState(b,s),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,s=0;return this._container&&(b=this._container.clientWidth||400,s=this._container.clientHeight||300),[b,s]}_setupContainer(){let b=this._container;b.classList.add("maplibregl-map");let s=this._canvasContainer=v.create("div","maplibregl-canvas-container",b);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=v.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let p=this._containerDimensions(),g=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],g);let y=this._controlContainer=v.create("div","maplibregl-control-container",b),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{w[M]=v.create("div",`maplibregl-ctrl-${M} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,s,p){this._canvas.width=Math.floor(p*b),this._canvas.height=Math.floor(p*s),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${s}px`}_setupPainter(){let b={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},s=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{s={requestedAttributes:b},g&&(s.statusMessage=g.statusMessage,s.type=g.type)},{once:!0});let p=this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b);if(!p){let g="Failed to initialize WebGL";throw s?(s.message=g,new Error(JSON.stringify(s))):new Error(g)}this.painter=new sg(p,this.transform),x.testSupport(p)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){let s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let y=this.transform.zoom,w=d.now();this.style.zoomHistory.update(y,w);let M=new o.z(y,{now:w,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),O=M.crossFadingFactor();O===1&&O===this._crossFadingFactor||(p=!0,this._crossFadingFactor=O),this.style.update(M)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bf.mark(o.bg.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,o.bf.mark(o.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(let p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),D.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();let s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),v.remove(this._canvasContainer),v.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bf.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,d.frameAsync(this._frameRequest).then(b=>{o.bf.frame(b),this._frameRequest=null,this._render(b)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return SI}getCameraTargetElevation(){return this.transform.elevation}},i.MapMouseEvent=bo,i.MapTouchEvent=vf,i.MapWheelEvent=vI,i.Marker=yg,i.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{let s=this._map.getZoom(),p=s===this._map.getMaxZoom(),g=s===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{let s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,p)=>{let g=this._map._getUIString(`NavigationControl.${p}`);s.title=g,s.setAttribute("aria-label",g)},this.options=o.e({},yq,b),this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),v.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),v.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=v.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _q(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){v.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,s){let p=v.create("button",b,this._container);return p.type="button",p.addEventListener("click",s),p}},i.Popup=class extends o.E{constructor(b){super(),this.remove=()=>(this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=v.create("div","maplibregl-popup",this._map.getContainer()),this._tip=v.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let O of this.options.className.split(" "))this._container.classList.add(O);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Gn(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!s)return;let g=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor,w=xg(this.options.offset);if(!y){let O=this._container.offsetWidth,N=this._container.offsetHeight,B;B=g.y+w.bottom.y<N?["top"]:g.y>this._map.transform.height-N?["bottom"]:[],g.x<O/2?B.push("left"):g.x>this._map.transform.width-O/2&&B.push("right"),y=B.length===0?"bottom":B.join("-")}let M=g.add(w[y]);this.options.subpixelPositioning||(M=M.round()),v.setTransform(this._container,`${Zh[y]} translate(${M.x}px,${M.y}px)`),gg(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(ur),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.N.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){let s=document.createDocumentFragment(),p=document.createElement("body"),g;for(p.innerHTML=b;g=p.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=v.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=v.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let b=this._container.querySelector(_g);b&&b.focus()}},i.RasterDEMTileSource=nr,i.RasterTileSource=Vt,i.ScaleControl=class{constructor(b){this._onMove=()=>{sm(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,sm(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Il),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},i.ScrollZoomHandler=Xs,i.Style=$v,i.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=v.create("button","maplibregl-ctrl-terrain",this._container),v.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){v.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=Vh,i.TwoFingersTouchRotateHandler=Ux,i.TwoFingersTouchZoomHandler=zx,i.TwoFingersTouchZoomRotateHandler=Gx,i.VectorTileSource=Ut,i.VideoSource=Pr,i.addSourceType=(b,s)=>o._(void 0,void 0,void 0,function*(){if(Ai(b))throw new Error(`A source type called "${b}" already exists.`);((p,g)=>{An[p]=g})(b,s)}),i.clearPrewarmedResources=function(){let b=Le;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Pe),Le=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return di().getRTLTextPluginStatus()},i.getVersion=function(){return Xx},i.getWorkerCount=function(){return at.workerCount},i.getWorkerUrl=function(){return o.a.WORKER_URL},i.importScriptInWorkers=function(b){return tt().broadcast("IS",b)},i.prewarm=function(){je().acquire(Pe)},i.setMaxParallelImageRequests=function(b){o.a.MAX_PARALLEL_IMAGE_REQUESTS=b},i.setRTLTextPlugin=function(b,s){return di().setRTLTextPlugin(b,s)},i.setWorkerCount=function(b){at.workerCount=b},i.setWorkerUrl=function(b){o.a.WORKER_URL=b}});var n=r;return n})});var WP=I((lPr,TRe)=>{var q6=1/0,J5t=17976931348623157e292,gRe=NaN,Q5t="[object Symbol]",eGt=/^\s+|\s+$/g,tGt=/^[-+]0x[0-9a-f]+$/i,rGt=/^0b[01]+$/i,nGt=/^0o[0-7]+$/i,iGt=parseInt,oGt=typeof global=="object"&&global&&global.Object===Object&&global,aGt=typeof self=="object"&&self&&self.Object===Object&&self,sGt=oGt||aGt||Function("return this")(),lGt=Object.prototype,uGt=lGt.toString,yRe=sGt.Symbol,cGt=Math.min,_Re=yRe?yRe.prototype:void 0,xRe=_Re?_Re.toString:void 0;function fGt(r){if(typeof r=="string")return r;if(SRe(r))return xRe?xRe.call(r):"";var e=r+"";return e=="0"&&1/r==-q6?"-0":e}function hGt(r){var e=Math[r];return function(t,n){if(t=ERe(t),n=cGt(mGt(n),292),n){var i=(bRe(t)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+n));return i=(bRe(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function wRe(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function pGt(r){return!!r&&typeof r=="object"}function SRe(r){return typeof r=="symbol"||pGt(r)&&uGt.call(r)==Q5t}function dGt(r){if(!r)return r===0?r:0;if(r=ERe(r),r===q6||r===-q6){var e=r<0?-1:1;return e*J5t}return r===r?r:0}function mGt(r){var e=dGt(r),t=e%1;return e===e?t?e-t:e:0}function ERe(r){if(typeof r=="number")return r;if(SRe(r))return gRe;if(wRe(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=wRe(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(eGt,"");var t=rGt.test(r);return t||nGt.test(r)?iGt(r.slice(2),t?2:8):tGt.test(r)?gRe:+r}function bRe(r){return r==null?"":fGt(r)}var vGt=hGt("round");TRe.exports=vGt});var GPe=I((_Or,VPe)=>{"use strict";VPe.exports=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var YPe=I((xOr,ZPe)=>{"use strict";var WPe="%[a-f0-9]{2}",$Pe=new RegExp("("+WPe+")|([^%]+?)","gi"),HPe=new RegExp("("+WPe+")+","gi");function CH(r,e){try{return[decodeURIComponent(r.join(""))]}catch(i){}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),n=r.slice(e);return Array.prototype.concat.call([],CH(t),CH(n))}function z8t(r){try{return decodeURIComponent(r)}catch(n){for(var e=r.match($Pe)||[],t=1;t<e.length;t++)r=CH(e,t).join(""),e=r.match($Pe)||[];return r}}function B8t(r){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=HPe.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch(u){var n=z8t(t[0]);n!==t[0]&&(e[t[0]]=n)}t=HPe.exec(r)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),o=0;o<i.length;o++){var a=i[o];r=r.replace(new RegExp(a,"g"),e[a])}return r}ZPe.exports=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch(e){return B8t(r)}}});var XPe=I((wOr,KPe)=>{"use strict";KPe.exports=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];let t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]}});var QPe=I((bOr,JPe)=>{"use strict";JPe.exports=function(r,e){for(var t={},n=Object.keys(r),i=Array.isArray(e),o=0;o<n.length;o++){var a=n[o],u=r[a];(i?e.indexOf(a)!==-1:e(a,u,r))&&(t[a]=u)}return t}});var RH=I(Ps=>{"use strict";var U8t=GPe(),V8t=YPe(),tOe=XPe(),G8t=QPe(),$8t=r=>r==null,MH=Symbol("encodeFragmentIdentifier");function H8t(r){switch(r.arrayFormat){case"index":return e=>(t,n)=>{let i=t.length;return n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[$i(e,r),"[",i,"]"].join("")]:[...t,[$i(e,r),"[",$i(i,r),"]=",$i(n,r)].join("")]};case"bracket":return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[$i(e,r),"[]"].join("")]:[...t,[$i(e,r),"[]=",$i(n,r)].join("")];case"colon-list-separator":return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[$i(e,r),":list="].join("")]:[...t,[$i(e,r),":list=",$i(n,r)].join("")];case"comma":case"separator":case"bracket-separator":{let e=r.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(n,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[$i(t,r),e,$i(i,r)].join("")]:[[n,$i(i,r)].join(r.arrayFormatSeparator)])}default:return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,$i(e,r)]:[...t,[$i(e,r),"=",$i(n,r)].join("")];}}function W8t(r){let e;switch(r.arrayFormat){case"index":return(t,n,i)=>{if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e){i[t]=n;return}i[t]===void 0&&(i[t]={}),i[t][e[1]]=n};case"bracket":return(t,n,i)=>{if(e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),!e){i[t]=n;return}if(i[t]===void 0){i[t]=[n];return}i[t]=[].concat(i[t],n)};case"colon-list-separator":return(t,n,i)=>{if(e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!e){i[t]=n;return}if(i[t]===void 0){i[t]=[n];return}i[t]=[].concat(i[t],n)};case"comma":case"separator":return(t,n,i)=>{let o=typeof n=="string"&&n.includes(r.arrayFormatSeparator),a=typeof n=="string"&&!o&&Qf(n,r).includes(r.arrayFormatSeparator);n=a?Qf(n,r):n;let u=o||a?n.split(r.arrayFormatSeparator).map(h=>Qf(h,r)):n===null?n:Qf(n,r);i[t]=u};case"bracket-separator":return(t,n,i)=>{let o=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!o){i[t]=n&&Qf(n,r);return}let a=n===null?[]:n.split(r.arrayFormatSeparator).map(u=>Qf(u,r));if(i[t]===void 0){i[t]=a;return}i[t]=[].concat(i[t],a)};default:return(t,n,i)=>{if(i[t]===void 0){i[t]=n;return}i[t]=[].concat(i[t],n)};}}function rOe(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function $i(r,e){return e.encode?e.strict?U8t(r):encodeURIComponent(r):r}function Qf(r,e){return e.decode?V8t(r):r}function nOe(r){return Array.isArray(r)?r.sort():typeof r=="object"?nOe(Object.keys(r)).sort((e,t)=>Number(e)-Number(t)).map(e=>r[e]):r}function iOe(r){let e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function Z8t(r){let e="",t=r.indexOf("#");return t!==-1&&(e=r.slice(t)),e}function oOe(r){r=iOe(r);let e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function eOe(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function aOe(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),rOe(e.arrayFormatSeparator);let t=W8t(e),n=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return n;for(let i of r.split("&")){if(i==="")continue;let[o,a]=tOe(e.decode?i.replace(/\+/g," "):i,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:Qf(a,e),t(Qf(o,e),a,n)}for(let i of Object.keys(n)){let o=n[i];if(typeof o=="object"&&o!==null)for(let a of Object.keys(o))o[a]=eOe(o[a],e);else n[i]=eOe(o,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,o)=>{let a=n[o];return a&&typeof a=="object"&&!Array.isArray(a)?i[o]=nOe(a):i[o]=a,i},Object.create(null))}Ps.extract=oOe;Ps.parse=aOe;Ps.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),rOe(e.arrayFormatSeparator);let t=a=>e.skipNull&&$8t(r[a])||e.skipEmptyString&&r[a]==="",n=H8t(e),i={};for(let a of Object.keys(r))t(a)||(i[a]=r[a]);let o=Object.keys(i);return e.sort!==!1&&o.sort(e.sort),o.map(a=>{let u=r[a];return u===void 0?"":u===null?$i(a,e):Array.isArray(u)?u.length===0&&e.arrayFormat==="bracket-separator"?$i(a,e)+"[]":u.reduce(n(a),[]).join("&"):$i(a,e)+"="+$i(u,e)}).filter(a=>a.length>0).join("&")};Ps.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);let[t,n]=tOe(r,"#");return Object.assign({url:t.split("?")[0]||"",query:aOe(oOe(r),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Qf(n,e)}:{})};Ps.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0,[MH]:!0},e);let t=iOe(r.url).split("?")[0]||"",n=Ps.extract(r.url),i=Ps.parse(n,{sort:!1}),o=Object.assign(i,r.query),a=Ps.stringify(o,e);a&&(a=`?${a}`);let u=Z8t(r.url);return r.fragmentIdentifier&&(u=`#${e[MH]?$i(r.fragmentIdentifier,e):r.fragmentIdentifier}`),`${t}${a}${u}`};Ps.pick=(r,e,t)=>{t=Object.assign({parseFragmentIdentifier:!0,[MH]:!1},t);let{url:n,query:i,fragmentIdentifier:o}=Ps.parseUrl(r,t);return Ps.stringifyUrl({url:n,query:G8t(i,e),fragmentIdentifier:o},t)};Ps.exclude=(r,e,t)=>{let n=Array.isArray(e)?i=>!e.includes(i):(i,o)=>!e(i,o);return Ps.pick(r,n,t)}});var hOe=I((DOr,fOe)=>{"use strict";var Y8t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";fOe.exports=Y8t});var vOe=I((NOr,mOe)=>{"use strict";var K8t=hOe();function pOe(){}function dOe(){}dOe.resetWarningCache=pOe;mOe.exports=function(){function r(n,i,o,a,u,h){if(h!==K8t){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:dOe,resetWarningCache:pOe};return t.PropTypes=t,t}});var Qr=I((FOr,gOe)=>{gOe.exports=vOe()();var qOr,kOr});var N_=I((JOr,SOe)=>{var J8t=SOe.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=J8t)});var kc=I((QOr,EOe)=>{var Q8t=EOe.exports={version:"2.6.12"};typeof __e=="number"&&(__e=Q8t)});var IOe=I((eLr,TOe)=>{TOe.exports=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r}});var OO=I((tLr,AOe)=>{var eZt=IOe();AOe.exports=function(r,e,t){if(eZt(r),e===void 0)return r;switch(t){case 1:return function(n){return r.call(e,n)};case 2:return function(n,i){return r.call(e,n,i)};case 3:return function(n,i,o){return r.call(e,n,i,o)};}return function(){return r.apply(e,arguments)}}});var HS=I((rLr,COe)=>{COe.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}});var q_=I((nLr,MOe)=>{var tZt=HS();MOe.exports=function(r){if(!tZt(r))throw TypeError(r+" is not an object!");return r}});var LO=I((iLr,ROe)=>{ROe.exports=function(r){try{return!!r()}catch(e){return!0}}});var cd=I((oLr,POe)=>{POe.exports=!LO()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var LH=I((aLr,LOe)=>{var OOe=HS(),OH=N_().document,rZt=OOe(OH)&&OOe(OH.createElement);LOe.exports=function(r){return rZt?OH.createElement(r):{}}});var DH=I((sLr,DOe)=>{DOe.exports=!cd()&&!LO()(function(){return Object.defineProperty(LH()("div"),"a",{get:function(){return 7}}).a!=7})});var NH=I((lLr,NOe)=>{var DO=HS();NOe.exports=function(r,e){if(!DO(r))return r;var t,n;if(e&&typeof(t=r.toString)=="function"&&!DO(n=t.call(r))||typeof(t=r.valueOf)=="function"&&!DO(n=t.call(r))||!e&&typeof(t=r.toString)=="function"&&!DO(n=t.call(r)))return n;throw TypeError("Can't convert object to primitive value")}});var WS=I(kOe=>{var qOe=q_(),nZt=DH(),iZt=NH(),oZt=Object.defineProperty;kOe.f=cd()?Object.defineProperty:function(e,t,n){if(qOe(e),t=iZt(t,!0),qOe(n),nZt)try{return oZt(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}});var ZS=I((cLr,FOe)=>{FOe.exports=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}});var YS=I((fLr,jOe)=>{var aZt=WS(),sZt=ZS();jOe.exports=cd()?function(r,e,t){return aZt.f(r,e,sZt(1,t))}:function(r,e,t){return r[e]=t,r}});var k_=I((hLr,zOe)=>{var lZt={}.hasOwnProperty;zOe.exports=function(r,e){return lZt.call(r,e)}});var fd=I((pLr,UOe)=>{var NO=N_(),qH=kc(),BOe=OO(),uZt=YS(),cZt=k_(),qO="prototype",ba=function(r,e,t){var n=r&ba.F,i=r&ba.G,o=r&ba.S,a=r&ba.P,u=r&ba.B,h=r&ba.W,d=i?qH:qH[e]||(qH[e]={}),v=d[qO],x=i?NO:o?NO[e]:(NO[e]||{})[qO],S,A,L;i&&(t=e);for(S in t)A=!n&&x&&x[S]!==void 0,!(A&&cZt(d,S))&&(L=A?x[S]:t[S],d[S]=i&&typeof x[S]!="function"?t[S]:u&&A?BOe(L,NO):h&&x[S]==L?function(q){var R=function(D,k,j){if(this instanceof q){switch(arguments.length){case 0:return new q;case 1:return new q(D);case 2:return new q(D,k);}return new q(D,k,j)}return q.apply(this,arguments)};return R[qO]=q[qO],R}(L):a&&typeof L=="function"?BOe(Function.call,L):L,a&&((d.virtual||(d.virtual={}))[S]=L,r&ba.R&&v&&!v[S]&&uZt(v,S,L)))};ba.F=1;ba.G=2;ba.S=4;ba.P=8;ba.B=16;ba.W=32;ba.U=64;ba.R=128;UOe.exports=ba});var kH=I((dLr,VOe)=>{var fZt={}.toString;VOe.exports=function(r){return fZt.call(r).slice(8,-1)}});var FH=I((mLr,GOe)=>{var hZt=kH();GOe.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return hZt(r)=="String"?r.split(""):Object(r)}});var kO=I((vLr,$Oe)=>{$Oe.exports=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r}});var KS=I((gLr,HOe)=>{var pZt=FH(),dZt=kO();HOe.exports=function(r){return pZt(dZt(r))}});var FO=I((yLr,WOe)=>{var mZt=Math.ceil,vZt=Math.floor;WOe.exports=function(r){return isNaN(r=+r)?0:(r>0?vZt:mZt)(r)}});var jH=I((_Lr,ZOe)=>{var gZt=FO(),yZt=Math.min;ZOe.exports=function(r){return r>0?yZt(gZt(r),9007199254740991):0}});var KOe=I((xLr,YOe)=>{var _Zt=FO(),xZt=Math.max,wZt=Math.min;YOe.exports=function(r,e){return r=_Zt(r),r<0?xZt(r+e,0):wZt(r,e)}});var JOe=I((wLr,XOe)=>{var bZt=KS(),SZt=jH(),EZt=KOe();XOe.exports=function(r){return function(e,t,n){var i=bZt(e),o=SZt(i.length),a=EZt(n,o),u;if(r&&t!=t){for(;o>a;)if(u=i[a++],u!=u)return!0}else for(;o>a;a++)if((r||a in i)&&i[a]===t)return r||a||0;return!r&&-1}}});var zH=I((bLr,QOe)=>{QOe.exports=!0});var BH=I((SLr,nLe)=>{var TZt=kc(),eLe=N_(),tLe="__core-js_shared__",rLe=eLe[tLe]||(eLe[tLe]={});(nLe.exports=function(r,e){return rLe[r]||(rLe[r]=e!==void 0?e:{})})("versions",[]).push({version:TZt.version,mode:zH()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var UH=I((ELr,iLe)=>{var IZt=0,AZt=Math.random();iLe.exports=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++IZt+AZt).toString(36))}});var jO=I((TLr,aLe)=>{var oLe=BH()("keys"),CZt=UH();aLe.exports=function(r){return oLe[r]||(oLe[r]=CZt(r))}});var uLe=I((ILr,lLe)=>{var sLe=k_(),MZt=KS(),RZt=JOe()(!1),PZt=jO()("IE_PROTO");lLe.exports=function(r,e){var t=MZt(r),n=0,i=[],o;for(o in t)o!=PZt&&sLe(t,o)&&i.push(o);for(;e.length>n;)sLe(t,o=e[n++])&&(~RZt(i,o)||i.push(o));return i}});var VH=I((ALr,cLe)=>{cLe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var zO=I((CLr,fLe)=>{var OZt=uLe(),LZt=VH();fLe.exports=Object.keys||function(e){return OZt(e,LZt)}});var pLe=I(hLe=>{hLe.f=Object.getOwnPropertySymbols});var BO=I(dLe=>{dLe.f={}.propertyIsEnumerable});var UO=I((PLr,mLe)=>{var DZt=kO();mLe.exports=function(r){return Object(DZt(r))}});var yLe=I((OLr,gLe)=>{"use strict";var NZt=cd(),vLe=zO(),qZt=pLe(),kZt=BO(),FZt=UO(),jZt=FH(),VO=Object.assign;gLe.exports=!VO||LO()(function(){var r={},e={},t=Symbol(),n="abcdefghijklmnopqrst";return r[t]=7,n.split("").forEach(function(i){e[i]=i}),VO({},r)[t]!=7||Object.keys(VO({},e)).join("")!=n})?function(e,t){for(var n=FZt(e),i=arguments.length,o=1,a=qZt.f,u=kZt.f;i>o;)for(var h=jZt(arguments[o++]),d=a?vLe(h).concat(a(h)):vLe(h),v=d.length,x=0,S;v>x;)S=d[x++],(!NZt||u.call(h,S))&&(n[S]=h[S]);return n}:VO});var _Le=I(()=>{var GH=fd();GH(GH.S+GH.F,"Object",{assign:yLe()})});var wLe=I((NLr,xLe)=>{_Le();xLe.exports=kc().Object.assign});var SLe=I((kLr,bLe)=>{var zZt=WS(),BZt=q_(),UZt=zO();bLe.exports=cd()?Object.defineProperties:function(e,t){BZt(e);for(var n=UZt(t),i=n.length,o=0,a;i>o;)zZt.f(e,a=n[o++],t[a]);return e}});var ILe=I((FLr,TLe)=>{var ELe=N_().document;TLe.exports=ELe&&ELe.documentElement});var ZH=I((jLr,CLe)=>{var VZt=q_(),GZt=SLe(),ALe=VH(),$Zt=jO()("IE_PROTO"),HH=function(){},WH="prototype",GO=function(){var r=LH()("iframe"),e=ALe.length,t="<",n=">",i;for(r.style.display="none",ILe().appendChild(r),r.src="javascript:",i=r.contentWindow.document,i.open(),i.write(t+"script"+n+"document.F=Object"+t+"/script"+n),i.close(),GO=i.F;e--;)delete GO[WH][ALe[e]];return GO()};CLe.exports=Object.create||function(e,t){var n;return e!==null?(HH[WH]=VZt(e),n=new HH,HH[WH]=null,n[$Zt]=e):n=GO(),t===void 0?n:GZt(n,t)}});var RLe=I(()=>{var MLe=fd();MLe(MLe.S,"Object",{create:ZH()})});var OLe=I((ULr,PLe)=>{RLe();var HZt=kc().Object;PLe.exports=function(e,t){return HZt.create(e,t)}});var NLe=I(DLe=>{var WZt=BO(),ZZt=ZS(),YZt=KS(),KZt=NH(),XZt=k_(),JZt=DH(),LLe=Object.getOwnPropertyDescriptor;DLe.f=cd()?LLe:function(e,t){if(e=YZt(e),t=KZt(t,!0),JZt)try{return LLe(e,t)}catch(n){}if(XZt(e,t))return ZZt(!WZt.f.call(e,t),e[t])}});var FLe=I((GLr,kLe)=>{var QZt=HS(),eYt=q_(),qLe=function(r,e){if(eYt(r),!QZt(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};kLe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(r,e,t){try{t=OO()(Function.call,NLe().f(Object.prototype,"__proto__").set,2),t(r,[]),e=!(r instanceof Array)}catch(n){e=!0}return function(i,o){return qLe(i,o),e?i.__proto__=o:t(i,o),i}}({},!1):void 0),check:qLe}});var zLe=I(()=>{var jLe=fd();jLe(jLe.S,"Object",{setPrototypeOf:FLe().set})});var ULe=I((WLr,BLe)=>{zLe();BLe.exports=kc().Object.setPrototypeOf});var hi=I((JLr,HO)=>{(function(){"use strict";var r={}.hasOwnProperty;function e(){for(var i="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(i=n(i,t(a)))}return i}function t(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return e.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var a in i)r.call(i,a)&&i[a]&&(o=n(o,a));return o}function n(i,o){return o?i?i+" "+o:i+o:i}typeof HO!="undefined"&&HO.exports?(e.default=e,HO.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var WO=I((tDr,GLe)=>{"use strict";var tYt=function(r,e,t,n,i,o,a,u){if(!r){var h;if(e===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[t,n,i,o,a,u],v=0;h=new Error(e.replace(/%s/g,function(){return d[v++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};GLe.exports=tYt});var QH=I(JH=>{"use strict";Object.defineProperty(JH,"__esModule",{value:!0});function YLe(){var r=this.constructor.getDerivedStateFromProps(this.props,this.state);r!=null&&this.setState(r)}function KLe(r){function e(t){var n=this.constructor.getDerivedStateFromProps(r,t);return n!=null?n:null}this.setState(e.bind(this))}function XLe(r,e){try{var t=this.props,n=this.state;this.props=r,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,n)}finally{this.props=t,this.state=n}}YLe.__suppressDeprecationWarning=!0;KLe.__suppressDeprecationWarning=!0;XLe.__suppressDeprecationWarning=!0;function nYt(r){var e=r.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof r.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return r;var t=null,n=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||n!==null||i!==null){var o=r.displayName||r.name,a=typeof r.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof r.getDerivedStateFromProps=="function"&&(e.componentWillMount=YLe,e.componentWillReceiveProps=KLe),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=XLe;var u=e.componentDidUpdate;e.componentDidUpdate=function(d,v,x){var S=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:x;u.call(this,d,v,S)}}return r}JH.polyfill=nYt});var eW=I((xDr,eDe)=>{var oYt=cd(),aYt=zO(),sYt=KS(),lYt=BO().f;eDe.exports=function(r){return function(e){for(var t=sYt(e),n=aYt(t),i=n.length,o=0,a=[],u;i>o;)u=n[o++],(!oYt||lYt.call(t,u))&&a.push(r?[u,t[u]]:t[u]);return a}}});var rDe=I(()=>{var tDe=fd(),uYt=eW()(!0);tDe(tDe.S,"Object",{entries:function(e){return uYt(e)}})});var iDe=I((SDr,nDe)=>{rDe();nDe.exports=kc().Object.entries});var tW=I((EDr,oDe)=>{oDe.exports=iDe()});var eE=I((KO,fDe)=>{"use strict";Object.defineProperty(KO,"__esModule",{value:!0});KO.default=yYt;function yYt(r){function e(n,i,o,a,u,h){var d=a||"<<anonymous>>",v=h||o;if(i[o]==null)return n?new Error("Required "+u+" `"+v+"` was not specified "+("in `"+d+"`.")):null;for(var x=arguments.length,S=Array(x>6?x-6:0),A=6;A<x;A++)S[A-6]=arguments[A];return r.apply(void 0,[i,o,d,u,v].concat(S))}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}fDe.exports=KO.default});var mDe=I(()=>{var dDe=fd(),_Yt=eW()(!1);dDe(dDe.S,"Object",{values:function(e){return _Yt(e)}})});var gDe=I((NDr,vDe)=>{mDe();vDe.exports=kc().Object.values});var _De=I((qDr,yDe)=>{yDe.exports=gDe()});var bDe=I(jn=>{"use strict";var qo=typeof Symbol=="function"&&Symbol.for,lW=qo?Symbol.for("react.element"):60103,uW=qo?Symbol.for("react.portal"):60106,JO=qo?Symbol.for("react.fragment"):60107,QO=qo?Symbol.for("react.strict_mode"):60108,eL=qo?Symbol.for("react.profiler"):60114,tL=qo?Symbol.for("react.provider"):60109,rL=qo?Symbol.for("react.context"):60110,cW=qo?Symbol.for("react.async_mode"):60111,nL=qo?Symbol.for("react.concurrent_mode"):60111,iL=qo?Symbol.for("react.forward_ref"):60112,oL=qo?Symbol.for("react.suspense"):60113,bYt=qo?Symbol.for("react.suspense_list"):60120,aL=qo?Symbol.for("react.memo"):60115,sL=qo?Symbol.for("react.lazy"):60116,SYt=qo?Symbol.for("react.block"):60121,EYt=qo?Symbol.for("react.fundamental"):60117,TYt=qo?Symbol.for("react.responder"):60118,IYt=qo?Symbol.for("react.scope"):60119;function pl(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case lW:switch(r=r.type,r){case cW:case nL:case JO:case eL:case QO:case oL:return r;default:switch(r=r&&r.$$typeof,r){case rL:case iL:case sL:case aL:case tL:return r;default:return e;}}case uW:return e;}}}function wDe(r){return pl(r)===nL}jn.AsyncMode=cW;jn.ConcurrentMode=nL;jn.ContextConsumer=rL;jn.ContextProvider=tL;jn.Element=lW;jn.ForwardRef=iL;jn.Fragment=JO;jn.Lazy=sL;jn.Memo=aL;jn.Portal=uW;jn.Profiler=eL;jn.StrictMode=QO;jn.Suspense=oL;jn.isAsyncMode=function(r){return wDe(r)||pl(r)===cW};jn.isConcurrentMode=wDe;jn.isContextConsumer=function(r){return pl(r)===rL};jn.isContextProvider=function(r){return pl(r)===tL};jn.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===lW};jn.isForwardRef=function(r){return pl(r)===iL};jn.isFragment=function(r){return pl(r)===JO};jn.isLazy=function(r){return pl(r)===sL};jn.isMemo=function(r){return pl(r)===aL};jn.isPortal=function(r){return pl(r)===uW};jn.isProfiler=function(r){return pl(r)===eL};jn.isStrictMode=function(r){return pl(r)===QO};jn.isSuspense=function(r){return pl(r)===oL};jn.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===JO||r===nL||r===eL||r===QO||r===oL||r===bYt||typeof r=="object"&&r!==null&&(r.$$typeof===sL||r.$$typeof===aL||r.$$typeof===tL||r.$$typeof===rL||r.$$typeof===iL||r.$$typeof===EYt||r.$$typeof===TYt||r.$$typeof===IYt||r.$$typeof===SYt)};jn.typeOf=pl});var EDe=I((BDr,SDe)=>{"use strict";SDe.exports=bDe()});var th=I((lL,IDe)=>{"use strict";Object.defineProperty(lL,"__esModule",{value:!0});var AYt=ht(),CYt=TDe(AYt),MYt=EDe(),RYt=eE(),PYt=TDe(RYt);function TDe(r){return r&&r.__esModule?r:{default:r}}function OYt(r,e,t,n,i){var o=r[e];return CYt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+t+"`,expected an element type (a string ")+", component class, or function component)."):(0,MYt.isValidElementType)(o)?null:new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+t+"`, expected an element type (a string ")+", component class, or function component).")}lL.default=(0,PYt.default)(OYt);IDe.exports=lL.default});var fL=I((cL,PDe)=>{"use strict";Object.defineProperty(cL,"__esModule",{value:!0});cL.default=BYt;var FYt=eE(),jYt=zYt(FYt);function zYt(r){return r&&r.__esModule?r:{default:r}}function BYt(){for(var r=arguments.length,e=Array(r),t=0;t<r;t++)e[t]=arguments[t];function n(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var u=null;return e.forEach(function(h){if(u==null){var d=h.apply(void 0,o);d!=null&&(u=d)}}),u}return(0,jYt.default)(n)}PDe.exports=cL.default});var gW=I((lNr,NDe)=>{"use strict";var GYt=function(){};NDe.exports=GYt});var Ea=I((uNr,rE)=>{function $Yt(r){return r&&r.__esModule?r:{default:r}}rE.exports=$Yt,rE.exports.__esModule=!0,rE.exports.default=rE.exports});var kDe=I((pL,qDe)=>{"use strict";pL.__esModule=!0;pL.default=WYt;var HYt=/-(.)/g;function WYt(r){return r.replace(HYt,function(e,t){return t.toUpperCase()})}qDe.exports=pL.default});var yW=I((dL,FDe)=>{"use strict";var ZYt=Ea();dL.__esModule=!0;dL.default=XYt;var YYt=ZYt(kDe()),KYt=/^-ms-/;function XYt(r){return(0,YYt.default)(r.replace(KYt,"ms-"))}FDe.exports=dL.default});var zDe=I((mL,jDe)=>{"use strict";mL.__esModule=!0;mL.default=QYt;var JYt=/([A-Z])/g;function QYt(r){return r.replace(JYt,"-$1").toLowerCase()}jDe.exports=mL.default});var UDe=I((vL,BDe)=>{"use strict";var eKt=Ea();vL.__esModule=!0;vL.default=nKt;var tKt=eKt(zDe()),rKt=/^ms-/;function nKt(r){return(0,tKt.default)(r).replace(rKt,"-ms-")}BDe.exports=vL.default});var GDe=I((gL,VDe)=>{"use strict";var iKt=Ea();gL.__esModule=!0;gL.default=lKt;var oKt=iKt(yW()),aKt=/^(top|right|bottom|left)$/,sKt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function lKt(r){if(!r)throw new TypeError("No Element passed to `getComputedStyle()`");var e=r.ownerDocument;return"defaultView"in e?e.defaultView.opener?r.ownerDocument.defaultView.getComputedStyle(r,null):window.getComputedStyle(r,null):{getPropertyValue:function(n){var i=r.style;n=(0,oKt.default)(n),n=="float"&&(n="styleFloat");var o=r.currentStyle[n]||null;if(o==null&&i&&i[n]&&(o=i[n]),sKt.test(o)&&!aKt.test(n)){var a=i.left,u=r.runtimeStyle,h=u&&u.left;h&&(u.left=r.currentStyle.left),i.left=n==="fontSize"?"1em":o,o=i.pixelLeft+"px",i.left=a,h&&(u.left=h)}return o}}}VDe.exports=gL.default});var HDe=I((yL,$De)=>{"use strict";yL.__esModule=!0;yL.default=uKt;function uKt(r,e){return"removeProperty"in r.style?r.style.removeProperty(e):r.style.removeAttribute(e)}$De.exports=yL.default});var jc=I((nE,WDe)=>{"use strict";nE.__esModule=!0;nE.default=void 0;var cKt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);nE.default=cKt;WDe.exports=nE.default});var QDe=I(en=>{"use strict";var fKt=Ea();en.__esModule=!0;en.default=en.animationEnd=en.animationDelay=en.animationTiming=en.animationDuration=en.animationName=en.transitionEnd=en.transitionDuration=en.transitionDelay=en.transitionTiming=en.transitionProperty=en.transform=void 0;var hKt=fKt(jc()),xL="transform";en.transform=xL;var zc,_W,ZDe;en.animationEnd=ZDe;en.transitionEnd=_W;var xW,wW,bW,SW;en.transitionDelay=SW;en.transitionTiming=bW;en.transitionDuration=wW;en.transitionProperty=xW;var YDe,KDe,XDe,JDe;en.animationDelay=JDe;en.animationTiming=XDe;en.animationDuration=KDe;en.animationName=YDe;hKt.default&&(_L=dKt(),zc=_L.prefix,en.transitionEnd=_W=_L.transitionEnd,en.animationEnd=ZDe=_L.animationEnd,en.transform=xL=zc+"-"+xL,en.transitionProperty=xW=zc+"-transition-property",en.transitionDuration=wW=zc+"-transition-duration",en.transitionDelay=SW=zc+"-transition-delay",en.transitionTiming=bW=zc+"-transition-timing-function",en.animationName=YDe=zc+"-animation-name",en.animationDuration=KDe=zc+"-animation-duration",en.animationTiming=XDe=zc+"-animation-delay",en.animationDelay=JDe=zc+"-animation-timing-function");var _L,pKt={transform:xL,end:_W,property:xW,timing:bW,delay:SW,duration:wW};en.default=pKt;function dKt(){for(var r=document.createElement("div").style,e={O:function(d){return"o"+d.toLowerCase()},Moz:function(d){return d.toLowerCase()},Webkit:function(d){return"webkit"+d},ms:function(d){return"MS"+d}},t=Object.keys(e),n,i,o="",a=0;a<t.length;a++){var u=t[a];if(u+"TransitionProperty"in r){o="-"+u.toLowerCase(),n=e[u]("TransitionEnd"),i=e[u]("AnimationEnd");break}}return!n&&"transitionProperty"in r&&(n="transitionend"),!i&&"animationName"in r&&(i="animationend"),r=null,{animationEnd:i,transitionEnd:n,prefix:o}}});var tNe=I((wL,eNe)=>{"use strict";wL.__esModule=!0;wL.default=vKt;var mKt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function vKt(r){return!!(r&&mKt.test(r))}eNe.exports=wL.default});var nNe=I((bL,rNe)=>{"use strict";var iE=Ea();bL.__esModule=!0;bL.default=bKt;var gKt=iE(yW()),EW=iE(UDe()),yKt=iE(GDe()),_Kt=iE(HDe()),xKt=QDe(),wKt=iE(tNe());function bKt(r,e,t){var n="",i="",o=e;if(typeof e=="string"){if(t===void 0)return r.style[(0,gKt.default)(e)]||(0,yKt.default)(r).getPropertyValue((0,EW.default)(e));(o={})[e]=t}Object.keys(o).forEach(function(a){var u=o[a];!u&&u!==0?(0,_Kt.default)(r,(0,EW.default)(a)):(0,wKt.default)(a)?i+=a+"("+u+") ":n+=(0,EW.default)(a)+": "+u+";"}),i&&(n+=xKt.transform+": "+i+";"),r.style.cssText+=";"+n}rNe.exports=bL.default});var iNe=I(V_=>{"use strict";V_.__esModule=!0;V_.classNamesShape=V_.timeoutsShape=void 0;var fNr=SKt(Qr());function SKt(r){return r&&r.__esModule?r:{default:r}}var EKt=null;V_.timeoutsShape=EKt;var TKt=null;V_.classNamesShape=TKt});var aNe=I(Ds=>{"use strict";Ds.__esModule=!0;Ds.default=Ds.EXITING=Ds.ENTERED=Ds.ENTERING=Ds.EXITED=Ds.UNMOUNTED=void 0;var IKt=MKt(Qr()),TW=oNe(ht()),AKt=oNe(mo()),CKt=QH(),pNr=iNe();function oNe(r){return r&&r.__esModule?r:{default:r}}function MKt(r){if(r&&r.__esModule)return r;var e={};if(r!=null){for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,t):{};n.get||n.set?Object.defineProperty(e,t,n):e[t]=r[t]}}return e.default=r,e}function RKt(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function PKt(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var oE="unmounted";Ds.UNMOUNTED=oE;var mv="exited";Ds.EXITED=mv;var vv="entering";Ds.ENTERING=vv;var $_="entered";Ds.ENTERED=$_;var IW="exiting";Ds.EXITING=IW;var Bc=function(r){PKt(e,r);function e(n,i){var o;o=r.call(this,n,i)||this;var a=i.transitionGroup,u=a&&!a.isMounting?n.enter:n.appear,h;return o.appearStatus=null,n.in?u?(h=mv,o.appearStatus=vv):h=$_:n.unmountOnExit||n.mountOnEnter?h=oE:h=mv,o.state={status:h},o.nextCallback=null,o}var t=e.prototype;return t.getChildContext=function(){return{transitionGroup:null}},e.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===oE?{status:mv}:null},t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==vv&&a!==$_&&(o=vv):(a===vv||a===$_)&&(o=IW)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,o,a,u;return o=a=u=i,i!=null&&typeof i!="number"&&(o=i.exit,a=i.enter,u=i.appear!==void 0?i.appear:a),{exit:o,enter:a,appear:u}},t.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null){this.cancelNextCallback();var a=AKt.default.findDOMNode(this);o===vv?this.performEnter(a,i):this.performExit(a)}else this.props.unmountOnExit&&this.state.status===mv&&this.setState({status:oE})},t.performEnter=function(i,o){var a=this,u=this.props.enter,h=this.context.transitionGroup?this.context.transitionGroup.isMounting:o,d=this.getTimeouts(),v=h?d.appear:d.enter;if(!o&&!u){this.safeSetState({status:$_},function(){a.props.onEntered(i)});return}this.props.onEnter(i,h),this.safeSetState({status:vv},function(){a.props.onEntering(i,h),a.onTransitionEnd(i,v,function(){a.safeSetState({status:$_},function(){a.props.onEntered(i,h)})})})},t.performExit=function(i){var o=this,a=this.props.exit,u=this.getTimeouts();if(!a){this.safeSetState({status:mv},function(){o.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:IW},function(){o.props.onExiting(i),o.onTransitionEnd(i,u.exit,function(){o.safeSetState({status:mv},function(){o.props.onExited(i)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},t.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(u){a&&(a=!1,o.nextCallback=null,i(u))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(i,o,a){this.setNextCallback(a);var u=o==null&&!this.props.addEndListener;if(!i||u){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(i,this.nextCallback),o!=null&&setTimeout(this.nextCallback,o)},t.render=function(){var i=this.state.status;if(i===oE)return null;var o=this.props,a=o.children,u=RKt(o,["children"]);if(delete u.in,delete u.mountOnEnter,delete u.unmountOnExit,delete u.appear,delete u.enter,delete u.exit,delete u.timeout,delete u.addEndListener,delete u.onEnter,delete u.onEntering,delete u.onEntered,delete u.onExit,delete u.onExiting,delete u.onExited,typeof a=="function")return a(i,u);var h=TW.default.Children.only(a);return TW.default.cloneElement(h,u)},e}(TW.default.Component);Bc.contextTypes={transitionGroup:IKt.object};Bc.childContextTypes={transitionGroup:function(){}};Bc.propTypes={};function G_(){}Bc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:G_,onEntering:G_,onEntered:G_,onExit:G_,onExiting:G_,onExited:G_};Bc.UNMOUNTED=0;Bc.EXITED=1;Bc.ENTERING=2;Bc.ENTERED=3;Bc.EXITING=4;var OKt=(0,CKt.polyfill)(Bc);Ds.default=OKt});var aE=I((SL,sNe)=>{"use strict";SL.__esModule=!0;SL.default=LKt;function LKt(r){return r&&r.ownerDocument||document}sNe.exports=SL.default});var AW=I((EL,lNe)=>{"use strict";var DKt=Ea();EL.__esModule=!0;EL.default=qKt;var NKt=DKt(aE());function qKt(r){r===void 0&&(r=(0,NKt.default)());try{return r.activeElement}catch(e){}}lNe.exports=EL.default});var lE=I((sE,cNe)=>{"use strict";var kKt=Ea();sE.__esModule=!0;sE.default=void 0;var FKt=kKt(jc()),jKt=function(){return FKt.default?function(r,e){return r.contains?r.contains(e):r.compareDocumentPosition?r===e||!!(r.compareDocumentPosition(e)&16):uNe(r,e)}:uNe}();sE.default=jKt;function uNe(r,e){if(e)do if(e===r)return!0;while(e=e.parentNode);return!1}cNe.exports=sE.default});var MW=I((gv,pNe)=>{function fNe(r){if(r&&typeof r=="object"){var e=r.which||r.keyCode||r.charCode;e&&(r=e)}if(typeof r=="number")return hNe[r];var t=String(r),n=nh[t.toLowerCase()];if(n)return n;var n=TL[t.toLowerCase()];if(n)return n;if(t.length===1)return t.charCodeAt(0)}fNe.isEventKey=function(e,t){if(e&&typeof e=="object"){var n=e.which||e.keyCode||e.charCode;if(n==null)return!1;if(typeof t=="string"){var i=nh[t.toLowerCase()];if(i)return i===n;var i=TL[t.toLowerCase()];if(i)return i===n}else if(typeof t=="number")return t===n;return!1}};gv=pNe.exports=fNe;var nh=gv.code=gv.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},TL=gv.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Oi=97;Oi<123;Oi++)nh[String.fromCharCode(Oi)]=Oi-32;for(Oi=48;Oi<58;Oi++)nh[Oi-48]=Oi;var Oi;for(Oi=1;Oi<13;Oi++)nh["f"+Oi]=Oi+111;for(Oi=0;Oi<10;Oi++)nh["numpad "+Oi]=Oi+96;var hNe=gv.names=gv.title={};for(Oi in nh)hNe[nh[Oi]]=Oi;for(CW in TL)nh[CW]=TL[CW];var CW});var mNe=I((IL,dNe)=>{"use strict";Object.defineProperty(IL,"__esModule",{value:!0});IL.default=zKt;function zKt(r){return function(t,n,i,o,a){var u=i||"<<anonymous>>",h=a||n;if(t[n]==null)return new Error("The "+o+" `"+h+"` is required to make "+("`"+u+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var d=arguments.length,v=Array(d>5?d-5:0),x=5;x<d;x++)v[x-5]=arguments[x];return r.apply(void 0,[t,n,i,o,a].concat(v))}}dNe.exports=IL.default});var gNe=I((mNr,vNe)=>{var BKt=FO(),UKt=kO();vNe.exports=function(r){return function(e,t){var n=String(UKt(e)),i=BKt(t),o=n.length,a,u;return i<0||i>=o?r?"":void 0:(a=n.charCodeAt(i),a<55296||a>56319||i+1===o||(u=n.charCodeAt(i+1))<56320||u>57343?r?n.charAt(i):a:r?n.slice(i,i+2):(a-55296<<10)+(u-56320)+65536)}}});var _Ne=I((vNr,yNe)=>{yNe.exports=YS()});var AL=I((gNr,xNe)=>{xNe.exports={}});var pd=I((yNr,bNe)=>{var RW=BH()("wks"),VKt=UH(),PW=N_().Symbol,wNe=typeof PW=="function",GKt=bNe.exports=function(r){return RW[r]||(RW[r]=wNe&&PW[r]||(wNe?PW:VKt)("Symbol."+r))};GKt.store=RW});var OW=I((_Nr,ENe)=>{var $Kt=WS().f,HKt=k_(),SNe=pd()("toStringTag");ENe.exports=function(r,e,t){r&&!HKt(r=t?r:r.prototype,SNe)&&$Kt(r,SNe,{configurable:!0,value:e})}});var ANe=I((xNr,INe)=>{"use strict";var WKt=ZH(),ZKt=ZS(),YKt=OW(),TNe={};YS()(TNe,pd()("iterator"),function(){return this});INe.exports=function(r,e,t){r.prototype=WKt(TNe,{next:ZKt(1,t)}),YKt(r,e+" Iterator")}});var RNe=I((wNr,MNe)=>{var KKt=k_(),XKt=UO(),CNe=jO()("IE_PROTO"),JKt=Object.prototype;MNe.exports=Object.getPrototypeOf||function(r){return r=XKt(r),KKt(r,CNe)?r[CNe]:typeof r.constructor=="function"&&r instanceof r.constructor?r.constructor.prototype:r instanceof Object?JKt:null}});var kNe=I((bNr,qNe)=>{"use strict";var PNe=zH(),LW=fd(),QKt=_Ne(),ONe=YS(),LNe=AL(),e9t=ANe(),t9t=OW(),r9t=RNe(),uE=pd()("iterator"),DW=!([].keys&&"next"in[].keys()),n9t="@@iterator",DNe="keys",CL="values",NNe=function(){return this};qNe.exports=function(r,e,t,n,i,o,a){e9t(t,e,n);var u=function(j){if(!DW&&j in x)return x[j];switch(j){case DNe:return function(){return new t(this,j)};case CL:return function(){return new t(this,j)};}return function(){return new t(this,j)}},h=e+" Iterator",d=i==CL,v=!1,x=r.prototype,S=x[uE]||x[n9t]||i&&x[i],A=S||u(i),L=i?d?u("entries"):A:void 0,q=e=="Array"&&x.entries||S,R,D,k;if(q&&(k=r9t(q.call(new r)),k!==Object.prototype&&k.next&&(t9t(k,h,!0),!PNe&&typeof k[uE]!="function"&&ONe(k,uE,NNe))),d&&S&&S.name!==CL&&(v=!0,A=function(){return S.call(this)}),(!PNe||a)&&(DW||v||!x[uE])&&ONe(x,uE,A),LNe[e]=A,LNe[h]=NNe,i)if(R={values:d?A:u(CL),keys:o?A:u(DNe),entries:L},a)for(D in R)D in x||QKt(x,D,R[D]);else LW(LW.P+LW.F*(DW||v),e,R);return R}});var FNe=I(()=>{"use strict";var i9t=gNe()(!0);kNe()(String,"String",function(r){this._t=String(r),this._i=0},function(){var r=this._t,e=this._i,t;return e>=r.length?{value:void 0,done:!0}:(t=i9t(r,e),this._i+=t.length,{value:t,done:!1})})});var BNe=I((TNr,zNe)=>{var jNe=q_();zNe.exports=function(r,e,t,n){try{return n?e(jNe(t)[0],t[1]):e(t)}catch(o){var i=r.return;throw i!==void 0&&jNe(i.call(r)),o}}});var VNe=I((INr,UNe)=>{var o9t=AL(),a9t=pd()("iterator"),s9t=Array.prototype;UNe.exports=function(r){return r!==void 0&&(o9t.Array===r||s9t[a9t]===r)}});var $Ne=I((ANr,GNe)=>{"use strict";var l9t=WS(),u9t=ZS();GNe.exports=function(r,e,t){e in r?l9t.f(r,e,u9t(0,t)):r[e]=t}});var WNe=I((CNr,HNe)=>{var NW=kH(),c9t=pd()("toStringTag"),f9t=NW(function(){return arguments}())=="Arguments",h9t=function(r,e){try{return r[e]}catch(t){}};HNe.exports=function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=h9t(e=Object(r),c9t))=="string"?t:f9t?NW(e):(n=NW(e))=="Object"&&typeof e.callee=="function"?"Arguments":n}});var YNe=I((MNr,ZNe)=>{var p9t=WNe(),d9t=pd()("iterator"),m9t=AL();ZNe.exports=kc().getIteratorMethod=function(r){if(r!=null)return r[d9t]||r["@@iterator"]||m9t[p9t(r)]}});var JNe=I((RNr,XNe)=>{var kW=pd()("iterator"),KNe=!1;try{qW=[7][kW](),qW.return=function(){KNe=!0},Array.from(qW,function(){throw 2})}catch(r){}var qW;XNe.exports=function(r,e){if(!e&&!KNe)return!1;var t=!1;try{var n=[7],i=n[kW]();i.next=function(){return{done:t=!0}},n[kW]=function(){return i},r(n)}catch(o){}return t}});var e2e=I(()=>{"use strict";var v9t=OO(),FW=fd(),g9t=UO(),y9t=BNe(),_9t=VNe(),x9t=jH(),QNe=$Ne(),w9t=YNe();FW(FW.S+FW.F*!JNe()(function(r){Array.from(r)}),"Array",{from:function(e){var t=g9t(e),n=typeof this=="function"?this:Array,i=arguments.length,o=i>1?arguments[1]:void 0,a=o!==void 0,u=0,h=w9t(t),d,v,x,S;if(a&&(o=v9t(o,i>2?arguments[2]:void 0,2)),h!=null&&!(n==Array&&_9t(h)))for(S=h.call(t),v=new n;!(x=S.next()).done;u++)QNe(v,u,a?y9t(S,o,[x.value,u],!0):x.value);else for(d=x9t(t.length),v=new n(d);d>u;u++)QNe(v,u,a?o(t[u],u):t[u]);return v.length=u,v}})});var r2e=I((LNr,t2e)=>{FNe();e2e();t2e.exports=kc().Array.from});var i2e=I((DNr,n2e)=>{n2e.exports=r2e()});var ML=I((cE,a2e)=>{"use strict";var b9t=Ea();cE.__esModule=!0;cE.default=void 0;var S9t=b9t(jc()),o2e=function(){};S9t.default&&(o2e=function(){if(document.addEventListener)return function(r,e,t,n){return r.addEventListener(e,t,n||!1)};if(document.attachEvent)return function(r,e,t){return r.attachEvent("on"+e,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=r,t.call(r,n)})}}());var E9t=o2e;cE.default=E9t;a2e.exports=cE.default});var RL=I((fE,l2e)=>{"use strict";var T9t=Ea();fE.__esModule=!0;fE.default=void 0;var I9t=T9t(jc()),s2e=function(){};I9t.default&&(s2e=function(){if(document.addEventListener)return function(r,e,t,n){return r.removeEventListener(e,t,n||!1)};if(document.attachEvent)return function(r,e,t){return r.detachEvent("on"+e,t)}}());var A9t=s2e;fE.default=A9t;l2e.exports=fE.default});var jW=I((PL,c2e)=>{"use strict";PL.__esModule=!0;PL.default=function(r,e,t,n){return(0,M9t.default)(r,e,t,n),{remove:function(){(0,P9t.default)(r,e,t,n)}}};var C9t=ML(),M9t=u2e(C9t),R9t=RL(),P9t=u2e(R9t);function u2e(r){return r&&r.__esModule?r:{default:r}}c2e.exports=PL.default});var hE=I((OL,h2e)=>{"use strict";OL.__esModule=!0;OL.default=function(r){return(0,N9t.default)(L9t.default.findDOMNode(r))};var O9t=mo(),L9t=f2e(O9t),D9t=aE(),N9t=f2e(D9t);function f2e(r){return r&&r.__esModule?r:{default:r}}h2e.exports=OL.default});var d2e=I((NL,p2e)=>{"use strict";NL.__esModule=!0;var q9t=lE(),k9t=H_(q9t),F9t=Qr(),LL=H_(F9t),j9t=ht(),z9t=H_(j9t),B9t=mo(),U9t=H_(B9t),V9t=jW(),zW=H_(V9t),G9t=hE(),$9t=H_(G9t);function H_(r){return r&&r.__esModule?r:{default:r}}function H9t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function W9t(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function Z9t(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var Y9t=27;function K9t(r){return r.button===0}function X9t(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}var DL=function(r){Z9t(e,r);function e(t,n){H9t(this,e);var i=W9t(this,r.call(this,t,n));return i.addEventListeners=function(){i.currentEvent=window.event;var o=i.props.event,a=(0,$9t.default)(i);i.documentMouseCaptureListener=(0,zW.default)(a,o,i.handleMouseCapture,!0),i.documentMouseListener=(0,zW.default)(a,o,i.handleMouse),i.documentKeyupListener=(0,zW.default)(a,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(o){i.preventMouseRootClose=X9t(o)||!K9t(o)||(0,k9t.default)(U9t.default.findDOMNode(i),o.target)},i.handleMouse=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(o)},i.handleKeyUp=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}o.keyCode===Y9t&&i.props.onRootClose&&i.props.onRootClose(o)},i.preventMouseRootClose=!1,i}return e.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},e.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},e.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},e.prototype.render=function(){return this.props.children},e}(z9t.default.Component);DL.displayName="RootCloseWrapper";DL.propTypes={onRootClose:LL.default.func,children:LL.default.element,disabled:LL.default.bool,event:LL.default.oneOf(["click","mousedown"])};DL.defaultProps={event:"click"};NL.default=DL;p2e.exports=NL.default});var P2e=I((UL,R2e)=>{"use strict";UL.__esModule=!0;UL.default=cXt;var uXt=/^[\w-]*$/,QW=Function.prototype.bind.call(Function.prototype.call,[].slice);function cXt(r,e){var t=e[0]==="#",n=e[0]===".",i=t||n?e.slice(1):e,o=uXt.test(i),a;return o?t?(r=r.getElementById?r:document,(a=r.getElementById(i))?[a]:[]):r.getElementsByClassName&&n?QW(r.getElementsByClassName(i)):QW(r.getElementsByTagName(e)):QW(r.querySelectorAll(e))}R2e.exports=UL.default});var D2e=I((VL,L2e)=>{"use strict";var O2e=Ea();VL.__esModule=!0;VL.default=pXt;var fXt=O2e(lE()),hXt=O2e(P2e());function pXt(r,e){return function(n){var i=n.currentTarget,o=n.target,a=(0,hXt.default)(i,r);a.some(function(u){return(0,fXt.default)(u,o)})&&e.call(this,n)}}L2e.exports=VL.default});var k2e=I((gE,q2e)=>{"use strict";var e8=Ea();gE.__esModule=!0;gE.default=void 0;var dXt=e8(jc()),mXt=e8(ML()),vXt=e8(RL()),N2e=function(){};dXt.default&&(N2e=function(e,t,n,i){return(0,mXt.default)(e,t,n,i),function(){(0,vXt.default)(e,t,n,i)}});var gXt=N2e;gE.default=gXt;q2e.exports=gE.default});var U2e=I(dd=>{"use strict";var GL=Ea();dd.__esModule=!0;dd.default=void 0;var F2e=GL(ML());dd.on=F2e.default;var j2e=GL(RL());dd.off=j2e.default;var z2e=GL(D2e());dd.filter=z2e.default;var B2e=GL(k2e());dd.listen=B2e.default;var yXt={on:F2e.default,off:j2e.default,filter:z2e.default,listen:B2e.default};dd.default=yXt});var t8=I((HL,V2e)=>{"use strict";var _Xt=Ea();HL.__esModule=!0;HL.default=wXt;var xXt=_Xt(jc()),$L;function wXt(r){if((!$L&&$L!==0||r)&&xXt.default){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),$L=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return $L}V2e.exports=HL.default});var ZL=I((WL,$2e)=>{"use strict";Object.defineProperty(WL,"__esModule",{value:!0});var bXt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},SXt=ht(),EXt=G2e(SXt),TXt=eE(),IXt=G2e(TXt);function G2e(r){return r&&r.__esModule?r:{default:r}}function AXt(r,e,t,n,i){var o=r[e],a=typeof o=="undefined"?"undefined":bXt(o);return EXt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+t+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(a!=="object"||typeof o.render!="function")&&o.nodeType!==1?new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+t+"`, expected a ReactComponent or a ")+"DOMElement."):null}WL.default=(0,IXt.default)(AXt);$2e.exports=WL.default});var Y2e=I((T2r,Z2e)=>{"use strict";var CXt=!1,W2e=function(){};CXt&&(H2e=function(e,t){var n=arguments.length;t=new Array(n>1?n-1:0);for(var i=1;i<n;i++)t[i-1]=arguments[i];var o=0,a="Warning: "+e.replace(/%s/g,function(){return t[o++]});typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(u){}},W2e=function(r,e,t){var n=arguments.length;t=new Array(n>2?n-2:0);for(var i=2;i<n;i++)t[i-2]=arguments[i];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");r||H2e.apply(null,[e].concat(t))});var H2e;Z2e.exports=W2e});var J2e=I((YL,X2e)=>{"use strict";Object.defineProperty(YL,"__esModule",{value:!0});YL.default=K2e;var MXt=Y2e(),RXt=PXt(MXt);function PXt(r){return r&&r.__esModule?r:{default:r}}var r8={};function K2e(r,e){return function(n,i,o,a,u){var h=o||"<<anonymous>>",d=u||i;if(n[i]!=null){var v=o+"."+i;(0,RXt.default)(r8[v],"The "+a+" `"+d+"` of "+("`"+h+"` is deprecated. "+e+".")),r8[v]=!0}for(var x=arguments.length,S=Array(x>5?x-5:0),A=5;A<x;A++)S[A-5]=arguments[A];return r.apply(void 0,[n,i,o,a,u].concat(S))}}function OXt(){r8={}}K2e._resetWarned=OXt;X2e.exports=YL.default});var n8=I((KL,Q2e)=>{"use strict";KL.__esModule=!0;KL.default=LXt;function LXt(r,e){return r.classList?!!e&&r.classList.contains(e):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+e+" ")!==-1}Q2e.exports=KL.default});var tqe=I((XL,eqe)=>{"use strict";var DXt=Ea();XL.__esModule=!0;XL.default=qXt;var NXt=DXt(n8());function qXt(r,e){r.classList?r.classList.add(e):(0,NXt.default)(r,e)||(typeof r.className=="string"?r.className=r.className+" "+e:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+e))}eqe.exports=XL.default});var iqe=I((I2r,nqe)=>{"use strict";function rqe(r,e){return r.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}nqe.exports=function(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=rqe(e.className,t):e.setAttribute("class",rqe(e.className&&e.className.baseVal||"",t))}});var lqe=I(yv=>{"use strict";var i8=Ea();yv.__esModule=!0;yv.default=void 0;var oqe=i8(tqe());yv.addClass=oqe.default;var aqe=i8(iqe());yv.removeClass=aqe.default;var sqe=i8(n8());yv.hasClass=sqe.default;var kXt={addClass:oqe.default,removeClass:aqe.default,hasClass:sqe.default};yv.default=kXt});var cqe=I((JL,uqe)=>{"use strict";JL.__esModule=!0;JL.default=FXt;function FXt(r){return r===r.window?r:r.nodeType===9?r.defaultView||r.parentWindow:!1}uqe.exports=JL.default});var o8=I((QL,pqe)=>{"use strict";QL.__esModule=!0;QL.default=GXt;var jXt=cqe(),fqe=hqe(jXt),zXt=aE(),BXt=hqe(zXt);function hqe(r){return r&&r.__esModule?r:{default:r}}function UXt(r){return r&&r.tagName.toLowerCase()==="body"}function VXt(r){var e=(0,BXt.default)(r),t=(0,fqe.default)(e),n=t.innerWidth;if(!n){var i=e.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return e.body.clientWidth<n}function GXt(r){var e=(0,fqe.default)(r);return e||UXt(r)?VXt(r):r.scrollHeight>r.clientHeight}pqe.exports=QL.default});var mqe=I(yE=>{"use strict";yE.__esModule=!0;yE.ariaHidden=a8;yE.hideSiblings=WXt;yE.showSiblings=ZXt;var $Xt=["template","script","style"],HXt=function(e){var t=e.nodeType,n=e.tagName;return t===1&&$Xt.indexOf(n.toLowerCase())===-1},dqe=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(i){t.indexOf(i)===-1&&HXt(i)&&n(i)})};function a8(r,e){e&&(r?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))}function WXt(r,e){dqe(r,e,function(t){return a8(!0,t)})}function ZXt(r,e){dqe(r,e,function(t){return a8(!1,t)})}});var _qe=I((tD,yqe)=>{"use strict";tD.__esModule=!0;var YXt=lqe(),vqe=eD(YXt),KXt=nNe(),gqe=eD(KXt),XXt=t8(),JXt=eD(XXt),QXt=o8(),e7t=eD(QXt),s8=mqe();function eD(r){return r&&r.__esModule?r:{default:r}}function t7t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function r7t(r,e){var t=-1;return r.some(function(n,i){if(e(n,i))return t=i,!0}),t}function n7t(r,e){return r7t(r,function(t){return t.modals.indexOf(e)!==-1})}function i7t(r,e){var t={overflow:"hidden"};r.style={overflow:e.style.overflow,paddingRight:e.style.paddingRight},r.overflowing&&(t.paddingRight=parseInt((0,gqe.default)(e,"paddingRight")||0,10)+(0,JXt.default)()+"px"),(0,gqe.default)(e,t)}function o7t(r,e){var t=r.style;Object.keys(t).forEach(function(n){return e.style[n]=t[n]})}var a7t=function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.hideSiblingNodes,i=n===void 0?!0:n,o=t.handleContainerOverflow,a=o===void 0?!0:o;t7t(this,r),this.add=function(u,h,d){var v=e.modals.indexOf(u),x=e.containers.indexOf(h);if(v!==-1)return v;if(v=e.modals.length,e.modals.push(u),e.hideSiblingNodes&&(0,s8.hideSiblings)(h,u.modalNode),x!==-1)return e.data[x].modals.push(u),v;var S={modals:[u],classes:d?d.split(/\s+/):[],overflowing:(0,e7t.default)(h)};return e.handleContainerOverflow&&i7t(S,h),S.classes.forEach(vqe.default.addClass.bind(null,h)),e.containers.push(h),e.data.push(S),v},this.remove=function(u){var h=e.modals.indexOf(u);if(h!==-1){var d=n7t(e.data,u),v=e.data[d],x=e.containers[d];v.modals.splice(v.modals.indexOf(u),1),e.modals.splice(h,1),v.modals.length===0?(v.classes.forEach(vqe.default.removeClass.bind(null,x)),e.handleContainerOverflow&&o7t(v,x),e.hideSiblingNodes&&(0,s8.showSiblings)(x,u.modalNode),e.containers.splice(d,1),e.data.splice(d,1)):e.hideSiblingNodes&&(0,s8.ariaHidden)(!1,v.modals[v.modals.length-1].modalNode)}},this.isTopModal=function(u){return!!e.modals.length&&e.modals[e.modals.length-1]===u},this.hideSiblingNodes=i,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]};tD.default=a7t;yqe.exports=tD.default});var nD=I((rD,xqe)=>{"use strict";rD.__esModule=!0;rD.default=c7t;var s7t=mo(),l7t=u7t(s7t);function u7t(r){return r&&r.__esModule?r:{default:r}}function c7t(r,e){return r=typeof r=="function"?r():r,l7t.default.findDOMNode(r)||e}xqe.exports=rD.default});var Aqe=I((iD,Iqe)=>{"use strict";iD.__esModule=!0;var f7t=Qr(),l8=K_(f7t),h7t=ZL(),p7t=K_(h7t),d7t=ht(),wqe=K_(d7t),m7t=mo(),bqe=K_(m7t),v7t=nD(),Sqe=K_(v7t),g7t=hE(),Eqe=K_(g7t);function K_(r){return r&&r.__esModule?r:{default:r}}function y7t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Tqe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function _7t(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var u8=function(r){_7t(e,r);function e(){var t,n,i;y7t(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return i=(t=(n=Tqe(this,r.call.apply(r,[this].concat(a))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,Sqe.default)(n.props.container,(0,Eqe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var h=n.props.children?wqe.default.Children.only(n.props.children):null;if(h!==null){n._mountOverlayTarget();var d=!n._overlayInstance;n._overlayInstance=bqe.default.unstable_renderSubtreeIntoContainer(n,h,n._overlayTarget,function(){d&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(bqe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},t),Tqe(n,i)}return e.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},e.prototype.componentDidUpdate=function(){this._renderOverlay()},e.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,Sqe.default)(n.container,(0,Eqe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},e.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},e.prototype.render=function(){return null},e}(wqe.default.Component);u8.displayName="Portal";u8.propTypes={container:l8.default.oneOfType([p7t.default,l8.default.func]),onRendered:l8.default.func};iD.default=u8;Iqe.exports=iD.default});var Rqe=I((oD,Mqe)=>{"use strict";oD.__esModule=!0;var x7t=jc(),w7t=md(x7t),b7t=Qr(),c8=md(b7t),S7t=ZL(),E7t=md(S7t),T7t=ht(),I7t=md(T7t),A7t=mo(),f8=md(A7t),C7t=nD(),M7t=md(C7t),R7t=hE(),P7t=md(R7t),O7t=Aqe(),L7t=md(O7t);function md(r){return r&&r.__esModule?r:{default:r}}function D7t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Cqe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function N7t(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var h8=function(r){N7t(e,r);function e(){var t,n,i;D7t(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return i=(t=(n=Cqe(this,r.call.apply(r,[this].concat(a))),n),n.getMountNode=function(){return n._portalContainerNode},t),Cqe(n,i)}return e.prototype.UNSAFE_componentWillMount=function(){if(w7t.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!f8.default.findDOMNode(n))&&this.setContainer(n)}},e.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},e.prototype.componentWillUnmount=function(){this._portalContainerNode=null},e.prototype.setContainer=function(n){this._portalContainerNode=(0,M7t.default)(n,(0,P7t.default)(this).body)},e.prototype.render=function(){return this.props.children&&this._portalContainerNode?f8.default.createPortal(this.props.children,this._portalContainerNode):null},e}(I7t.default.Component);h8.displayName="Portal";h8.propTypes={container:c8.default.oneOfType([E7t.default,c8.default.func]),onRendered:c8.default.func};oD.default=f8.default.createPortal?h8:L7t.default;Mqe.exports=oD.default});var Dqe=I((aD,Lqe)=>{"use strict";aD.__esModule=!0;var q7t=Qr(),k7t=Pqe(q7t),F7t=ht(),j7t=Pqe(F7t);function Pqe(r){return r&&r.__esModule?r:{default:r}}function z7t(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function B7t(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function U7t(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var V7t={children:k7t.default.node},Oqe=function(r){U7t(e,r);function e(){return z7t(this,e),B7t(this,r.apply(this,arguments))}return e.prototype.render=function(){return this.props.children},e}(j7t.default.Component);Oqe.propTypes=V7t;aD.default=Oqe;Lqe.exports=aD.default});var qqe=I((sD,Nqe)=>{"use strict";sD.__esModule=!0;sD.default=G7t;function G7t(r){var e=!document.addEventListener,t=void 0;return e?(document.attachEvent("onfocusin",r),t=function(){return document.detachEvent("onfocusin",r)}):(document.addEventListener("focus",r,!0),t=function(){return document.removeEventListener("focus",r,!0)}),{remove:t}}Nqe.exports=sD.default});var Hqe=I((uD,$qe)=>{"use strict";uD.__esModule=!0;var zqe=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},$7t=AW(),p8=na($7t),H7t=lE(),Bqe=na(H7t),W7t=jc(),Z7t=na(W7t),Y7t=Qr(),oi=na(Y7t),K7t=ZL(),X7t=na(K7t),J7t=J2e(),Q7t=na(J7t),eJt=th(),kqe=na(eJt),Uqe=ht(),vd=na(Uqe),tJt=mo(),rJt=na(tJt),nJt=gW(),iJt=na(nJt),oJt=_qe(),Vqe=na(oJt),aJt=Rqe(),Gqe=na(aJt),sJt=Dqe(),lJt=na(sJt),uJt=jW(),Fqe=na(uJt),cJt=qqe(),fJt=na(cJt),hJt=nD(),pJt=na(hJt),dJt=hE(),d8=na(dJt);function na(r){return r&&r.__esModule?r:{default:r}}function mJt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function jqe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function vJt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var gJt=new Vqe.default,lD=function(r){vJt(e,r);function e(){var t,n,i;mJt(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return i=(t=(n=jqe(this,r.call.apply(r,[this].concat(a))),n),yJt.call(n),t),jqe(n,i)}return e.prototype.omitProps=function(n,i){var o=Object.keys(n),a={};return o.map(function(u){Object.prototype.hasOwnProperty.call(i,u)||(a[u]=n[u])}),a},e.prototype.render=function(){var n=this.props,i=n.show,o=n.container,a=n.children,u=n.transition,h=n.backdrop,d=n.className,v=n.style,x=n.onExit,S=n.onExiting,A=n.onEnter,L=n.onEntering,q=n.onEntered,R=vd.default.Children.only(a),D=this.omitProps(this.props,e.propTypes),k=i||u&&!this.state.exited;if(!k)return null;var j=R.props,$=j.role,ee=j.tabIndex;return($===void 0||ee===void 0)&&(R=(0,Uqe.cloneElement)(R,{role:$===void 0?"document":$,tabIndex:ee==null?"-1":ee})),u&&(R=vd.default.createElement(u,{appear:!0,unmountOnExit:!0,in:i,onExit:x,onExiting:S,onExited:this.handleHidden,onEnter:A,onEntering:L,onEntered:q},R)),vd.default.createElement(Gqe.default,{ref:this.setMountNode,container:o,onRendered:this.onPortalRendered},vd.default.createElement("div",zqe({ref:this.setModalNodeRef,role:$||"dialog"},D,{style:v,className:d}),h&&this.renderBackdrop(),vd.default.createElement(lJt.default,{ref:this.setDialogRef},R)))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},e.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},e.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},e.prototype.componentDidUpdate=function(n){var i=this.props.transition;n.show&&!this.props.show&&!i?this.onHide():!n.show&&this.props.show&&this.onShow()},e.prototype.componentWillUnmount=function(){var n=this.props,i=n.show,o=n.transition;this._isMounted=!1,(i||o&&!this.state.exited)&&this.onHide()},e.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),i=(0,p8.default)((0,d8.default)(this));n&&!(0,Bqe.default)(n,i)&&(this.lastFocus=i,n.hasAttribute("tabIndex")||((0,iJt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},e.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},e.prototype.getDialogElement=function(){return rJt.default.findDOMNode(this.dialog)},e.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},e}(vd.default.Component);lD.propTypes=zqe({},Gqe.default.propTypes,{show:oi.default.bool,container:oi.default.oneOfType([X7t.default,oi.default.func]),onShow:oi.default.func,onHide:oi.default.func,backdrop:oi.default.oneOfType([oi.default.bool,oi.default.oneOf(["static"])]),renderBackdrop:oi.default.func,onEscapeKeyDown:oi.default.func,onEscapeKeyUp:(0,Q7t.default)(oi.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:oi.default.func,backdropStyle:oi.default.object,backdropClassName:oi.default.string,containerClassName:oi.default.string,keyboard:oi.default.bool,transition:kqe.default,backdropTransition:kqe.default,autoFocus:oi.default.bool,enforceFocus:oi.default.bool,restoreFocus:oi.default.bool,onEnter:oi.default.func,onEntering:oi.default.func,onEntered:oi.default.func,onExit:oi.default.func,onExiting:oi.default.func,onExited:oi.default.func,manager:oi.default.object.isRequired});lD.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:gJt,renderBackdrop:function(e){return vd.default.createElement("div",e)}};var yJt=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,i=t.backdropClassName,o=t.renderBackdrop,a=t.backdropTransition,u=function(v){return e.backdrop=v},h=o({ref:u,style:n,className:i,onClick:e.handleBackdropClick});return a&&(h=vd.default.createElement(a,{appear:!0,in:e.props.show},h)),h},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,d8.default)(e),n=(0,pJt.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,Fqe.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,Fqe.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,fJt.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t&&t.getMountNode()},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){if(e.setState({exited:!0}),e.onHide(),e.props.onExited){var t;(t=e.props).onExited.apply(t,arguments)}},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),e.props.backdrop===!0&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&t.keyCode===27&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&t.keyCode===27&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){Z7t.default&&(e.lastFocus=(0,p8.default)())},this.enforceFocus=function(){if(!(!e.props.enforceFocus||!e._isMounted||!e.isTopModal())){var t=e.getDialogElement(),n=(0,p8.default)((0,d8.default)(e));t&&!(0,Bqe.default)(t,n)&&t.focus()}}};lD.Manager=Vqe.default;uD.default=lD;$qe.exports=uD.default});var rZ=I((eZ,tZ)=>{(function(r,e){typeof eZ=="object"&&typeof tZ!="undefined"?tZ.exports=e():typeof define=="function"&&define.amd?define(e):(r=r||self).RBush=e()})(eZ,function(){"use strict";function r(R,D,k,j,$){(function ee(J,ie,ue,le,_e){for(;le>ue;){if(le-ue>600){var Re=le-ue+1,ze=ie-ue+1,qe=Math.log(Re),Ve=.5*Math.exp(2*qe/3),Ke=.5*Math.sqrt(qe*Ve*(Re-Ve)/Re)*(ze-Re/2<0?-1:1),Ce=Math.max(ue,Math.floor(ie-ze*Ve/Re+Ke)),Se=Math.min(le,Math.floor(ie+(Re-ze)*Ve/Re+Ke));ee(J,ie,Ce,Se,_e)}var Ie=J[ie],Ge=ue,$e=le;for(e(J,ue,ie),_e(J[le],Ie)>0&&e(J,ue,le);Ge<$e;){for(e(J,Ge,$e),Ge++,$e--;_e(J[Ge],Ie)<0;)Ge++;for(;_e(J[$e],Ie)>0;)$e--}_e(J[ue],Ie)===0?e(J,ue,$e):e(J,++$e,le),$e<=ie&&(ue=$e+1),ie<=$e&&(le=$e-1)}})(R,D,k||0,j||R.length-1,$||t)}function e(R,D,k){var j=R[D];R[D]=R[k],R[k]=j}function t(R,D){return R<D?-1:R>D?1:0}var n=function(R){R===void 0&&(R=9),this._maxEntries=Math.max(4,R),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(R,D,k){if(!k)return D.indexOf(R);for(var j=0;j<D.length;j++)if(k(R,D[j]))return j;return-1}function o(R,D){a(R,0,R.children.length,D,R)}function a(R,D,k,j,$){$||($=L(null)),$.minX=1/0,$.minY=1/0,$.maxX=-1/0,$.maxY=-1/0;for(var ee=D;ee<k;ee++){var J=R.children[ee];u($,R.leaf?j(J):J)}return $}function u(R,D){return R.minX=Math.min(R.minX,D.minX),R.minY=Math.min(R.minY,D.minY),R.maxX=Math.max(R.maxX,D.maxX),R.maxY=Math.max(R.maxY,D.maxY),R}function h(R,D){return R.minX-D.minX}function d(R,D){return R.minY-D.minY}function v(R){return(R.maxX-R.minX)*(R.maxY-R.minY)}function x(R){return R.maxX-R.minX+(R.maxY-R.minY)}function S(R,D){return R.minX<=D.minX&&R.minY<=D.minY&&D.maxX<=R.maxX&&D.maxY<=R.maxY}function A(R,D){return D.minX<=R.maxX&&D.minY<=R.maxY&&D.maxX>=R.minX&&D.maxY>=R.minY}function L(R){return{children:R,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function q(R,D,k,j,$){for(var ee=[D,k];ee.length;)if(!((k=ee.pop())-(D=ee.pop())<=j)){var J=D+Math.ceil((k-D)/j/2)*j;r(R,J,D,k,$),ee.push(D,J,J,k)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(R){var D=this.data,k=[];if(!A(R,D))return k;for(var j=this.toBBox,$=[];D;){for(var ee=0;ee<D.children.length;ee++){var J=D.children[ee],ie=D.leaf?j(J):J;A(R,ie)&&(D.leaf?k.push(J):S(R,ie)?this._all(J,k):$.push(J))}D=$.pop()}return k},n.prototype.collides=function(R){var D=this.data;if(!A(R,D))return!1;for(var k=[];D;){for(var j=0;j<D.children.length;j++){var $=D.children[j],ee=D.leaf?this.toBBox($):$;if(A(R,ee)){if(D.leaf||S(R,ee))return!0;k.push($)}}D=k.pop()}return!1},n.prototype.load=function(R){if(!R||!R.length)return this;if(R.length<this._minEntries){for(var D=0;D<R.length;D++)this.insert(R[D]);return this}var k=this._build(R.slice(),0,R.length-1,0);if(this.data.children.length){if(this.data.height===k.height)this._splitRoot(this.data,k);else{if(this.data.height<k.height){var j=this.data;this.data=k,k=j}this._insert(k,this.data.height-k.height-1,!0)}}else this.data=k;return this},n.prototype.insert=function(R){return R&&this._insert(R,this.data.height-1),this},n.prototype.clear=function(){return this.data=L([]),this},n.prototype.remove=function(R,D){if(!R)return this;for(var k,j,$,ee=this.data,J=this.toBBox(R),ie=[],ue=[];ee||ie.length;){if(ee||(ee=ie.pop(),j=ie[ie.length-1],k=ue.pop(),$=!0),ee.leaf){var le=i(R,ee.children,D);if(le!==-1)return ee.children.splice(le,1),ie.push(ee),this._condense(ie),this}$||ee.leaf||!S(ee,J)?j?(k++,ee=j.children[k],$=!1):ee=null:(ie.push(ee),ue.push(k),k=0,j=ee,ee=ee.children[0])}return this},n.prototype.toBBox=function(R){return R},n.prototype.compareMinX=function(R,D){return R.minX-D.minX},n.prototype.compareMinY=function(R,D){return R.minY-D.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(R){return this.data=R,this},n.prototype._all=function(R,D){for(var k=[];R;)R.leaf?D.push.apply(D,R.children):k.push.apply(k,R.children),R=k.pop();return D},n.prototype._build=function(R,D,k,j){var $,ee=k-D+1,J=this._maxEntries;if(ee<=J)return o($=L(R.slice(D,k+1)),this.toBBox),$;j||(j=Math.ceil(Math.log(ee)/Math.log(J)),J=Math.ceil(ee/Math.pow(J,j-1))),($=L([])).leaf=!1,$.height=j;var ie=Math.ceil(ee/J),ue=ie*Math.ceil(Math.sqrt(J));q(R,D,k,ue,this.compareMinX);for(var le=D;le<=k;le+=ue){var _e=Math.min(le+ue-1,k);q(R,le,_e,ie,this.compareMinY);for(var Re=le;Re<=_e;Re+=ie){var ze=Math.min(Re+ie-1,_e);$.children.push(this._build(R,Re,ze,j-1))}}return o($,this.toBBox),$},n.prototype._chooseSubtree=function(R,D,k,j){for(;j.push(D),!D.leaf&&j.length-1!==k;){for(var $=1/0,ee=1/0,J=void 0,ie=0;ie<D.children.length;ie++){var ue=D.children[ie],le=v(ue),_e=(Re=R,ze=ue,(Math.max(ze.maxX,Re.maxX)-Math.min(ze.minX,Re.minX))*(Math.max(ze.maxY,Re.maxY)-Math.min(ze.minY,Re.minY))-le);_e<ee?(ee=_e,$=le<$?le:$,J=ue):_e===ee&&le<$&&($=le,J=ue)}D=J||D.children[0]}var Re,ze;return D},n.prototype._insert=function(R,D,k){var j=k?R:this.toBBox(R),$=[],ee=this._chooseSubtree(j,this.data,D,$);for(ee.children.push(R),u(ee,j);D>=0&&$[D].children.length>this._maxEntries;)this._split($,D),D--;this._adjustParentBBoxes(j,$,D)},n.prototype._split=function(R,D){var k=R[D],j=k.children.length,$=this._minEntries;this._chooseSplitAxis(k,$,j);var ee=this._chooseSplitIndex(k,$,j),J=L(k.children.splice(ee,k.children.length-ee));J.height=k.height,J.leaf=k.leaf,o(k,this.toBBox),o(J,this.toBBox),D?R[D-1].children.push(J):this._splitRoot(k,J)},n.prototype._splitRoot=function(R,D){this.data=L([R,D]),this.data.height=R.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(R,D,k){for(var j,$,ee,J,ie,ue,le,_e=1/0,Re=1/0,ze=D;ze<=k-D;ze++){var qe=a(R,0,ze,this.toBBox),Ve=a(R,ze,k,this.toBBox),Ke=($=qe,ee=Ve,J=void 0,ie=void 0,ue=void 0,le=void 0,J=Math.max($.minX,ee.minX),ie=Math.max($.minY,ee.minY),ue=Math.min($.maxX,ee.maxX),le=Math.min($.maxY,ee.maxY),Math.max(0,ue-J)*Math.max(0,le-ie)),Ce=v(qe)+v(Ve);Ke<_e?(_e=Ke,j=ze,Re=Ce<Re?Ce:Re):Ke===_e&&Ce<Re&&(Re=Ce,j=ze)}return j||k-D},n.prototype._chooseSplitAxis=function(R,D,k){var j=R.leaf?this.compareMinX:h,$=R.leaf?this.compareMinY:d;this._allDistMargin(R,D,k,j)<this._allDistMargin(R,D,k,$)&&R.children.sort(j)},n.prototype._allDistMargin=function(R,D,k,j){R.children.sort(j);for(var $=this.toBBox,ee=a(R,0,D,$),J=a(R,k-D,k,$),ie=x(ee)+x(J),ue=D;ue<k-D;ue++){var le=R.children[ue];u(ee,R.leaf?$(le):le),ie+=x(ee)}for(var _e=k-D-1;_e>=D;_e--){var Re=R.children[_e];u(J,R.leaf?$(Re):Re),ie+=x(J)}return ie},n.prototype._adjustParentBBoxes=function(R,D,k){for(var j=k;j>=0;j--)u(D[j],R)},n.prototype._condense=function(R){for(var D=R.length-1,k=void 0;D>=0;D--)R[D].children.length===0?D>0?(k=R[D-1].children).splice(k.indexOf(R[D]),1):this.clear():o(R[D],this.toBBox)},n})});var Y4e=I(Vn=>{"use strict";var SY=Symbol.for("react.element"),EY=Symbol.for("react.portal"),$N=Symbol.for("react.fragment"),HN=Symbol.for("react.strict_mode"),WN=Symbol.for("react.profiler"),ZN=Symbol.for("react.provider"),YN=Symbol.for("react.context"),vir=Symbol.for("react.server_context"),KN=Symbol.for("react.forward_ref"),XN=Symbol.for("react.suspense"),JN=Symbol.for("react.suspense_list"),QN=Symbol.for("react.memo"),e2=Symbol.for("react.lazy"),gir=Symbol.for("react.offscreen"),Z4e;Z4e=Symbol.for("react.module.reference");function gu(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case SY:switch(r=r.type,r){case $N:case WN:case HN:case XN:case JN:return r;default:switch(r=r&&r.$$typeof,r){case vir:case YN:case KN:case e2:case QN:case ZN:return r;default:return e;}}case EY:return e;}}}Vn.ContextConsumer=YN;Vn.ContextProvider=ZN;Vn.Element=SY;Vn.ForwardRef=KN;Vn.Fragment=$N;Vn.Lazy=e2;Vn.Memo=QN;Vn.Portal=EY;Vn.Profiler=WN;Vn.StrictMode=HN;Vn.Suspense=XN;Vn.SuspenseList=JN;Vn.isAsyncMode=function(){return!1};Vn.isConcurrentMode=function(){return!1};Vn.isContextConsumer=function(r){return gu(r)===YN};Vn.isContextProvider=function(r){return gu(r)===ZN};Vn.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===SY};Vn.isForwardRef=function(r){return gu(r)===KN};Vn.isFragment=function(r){return gu(r)===$N};Vn.isLazy=function(r){return gu(r)===e2};Vn.isMemo=function(r){return gu(r)===QN};Vn.isPortal=function(r){return gu(r)===EY};Vn.isProfiler=function(r){return gu(r)===WN};Vn.isStrictMode=function(r){return gu(r)===HN};Vn.isSuspense=function(r){return gu(r)===XN};Vn.isSuspenseList=function(r){return gu(r)===JN};Vn.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===$N||r===WN||r===HN||r===XN||r===JN||r===gir||typeof r=="object"&&r!==null&&(r.$$typeof===e2||r.$$typeof===QN||r.$$typeof===ZN||r.$$typeof===YN||r.$$typeof===KN||r.$$typeof===Z4e||r.getModuleId!==void 0)};Vn.typeOf=gu});var X4e=I((u7r,K4e)=>{"use strict";K4e.exports=Y4e()});var e3e=I(ei=>{"use strict";var k2=60103,F2=60106,PT=60107,OT=60108,LT=60114,DT=60109,NT=60110,qT=60112,kT=60113,cK=60120,FT=60115,jT=60116,YUe=60121,KUe=60122,XUe=60117,JUe=60129,QUe=60131;typeof Symbol=="function"&&Symbol.for&&(jo=Symbol.for,k2=jo("react.element"),F2=jo("react.portal"),PT=jo("react.fragment"),OT=jo("react.strict_mode"),LT=jo("react.profiler"),DT=jo("react.provider"),NT=jo("react.context"),qT=jo("react.forward_ref"),kT=jo("react.suspense"),cK=jo("react.suspense_list"),FT=jo("react.memo"),jT=jo("react.lazy"),YUe=jo("react.block"),KUe=jo("react.server.block"),XUe=jo("react.fundamental"),JUe=jo("react.debug_trace_mode"),QUe=jo("react.legacy_hidden"));var jo;function oc(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case k2:switch(r=r.type,r){case PT:case LT:case OT:case kT:case cK:return r;default:switch(r=r&&r.$$typeof,r){case NT:case qT:case jT:case FT:case DT:return r;default:return e;}}case F2:return e;}}}var Yor=DT,Kor=k2,Xor=qT,Jor=PT,Qor=jT,ear=FT,tar=F2,rar=LT,nar=OT,iar=kT;ei.ContextConsumer=NT;ei.ContextProvider=Yor;ei.Element=Kor;ei.ForwardRef=Xor;ei.Fragment=Jor;ei.Lazy=Qor;ei.Memo=ear;ei.Portal=tar;ei.Profiler=rar;ei.StrictMode=nar;ei.Suspense=iar;ei.isAsyncMode=function(){return!1};ei.isConcurrentMode=function(){return!1};ei.isContextConsumer=function(r){return oc(r)===NT};ei.isContextProvider=function(r){return oc(r)===DT};ei.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===k2};ei.isForwardRef=function(r){return oc(r)===qT};ei.isFragment=function(r){return oc(r)===PT};ei.isLazy=function(r){return oc(r)===jT};ei.isMemo=function(r){return oc(r)===FT};ei.isPortal=function(r){return oc(r)===F2};ei.isProfiler=function(r){return oc(r)===LT};ei.isStrictMode=function(r){return oc(r)===OT};ei.isSuspense=function(r){return oc(r)===kT};ei.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===PT||r===LT||r===JUe||r===OT||r===kT||r===cK||r===QUe||typeof r=="object"&&r!==null&&(r.$$typeof===jT||r.$$typeof===FT||r.$$typeof===DT||r.$$typeof===NT||r.$$typeof===qT||r.$$typeof===XUe||r.$$typeof===YUe||r[0]===KUe)};ei.typeOf=oc});var r3e=I((Nnn,t3e)=>{"use strict";t3e.exports=e3e()});var zar={};lGe(zar,{SettingsProvider:()=>Far,renderGeoreferenceApp:()=>jar});var lVe=Me(ht(),1),uVe=Me(mo(),1),fon=Me(uMe(),1);var IRe=Me(IS(),1);var AS=Me(vRe(),1);var gGt=Me(WP(),1);var k6=(r,e="control-feedback-container")=>{let t=document.getElementById(e);if(t===null){let n=r.getCanvasContainer();t=document.createElement("div"),t.id=e,n.appendChild(t)}return t};function fl(r){return r!=null}function CS(r){return typeof r=="string"||r instanceof String}function Tr(r){let e=ro.getLanguageDict();if(e===void 0)throw new Error("Dictionary is undefined.");let t=e[r];return t===void 0?(console.warn(`Translation for key "${r}" was not found in dictionary.`),""):t}var _Gt={EN:"en",DE:"de"},xGt=typeof process!="undefined"&&fl(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&fl(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",ZP=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),Xa={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:_Gt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},ro={axiosApiInstance:null,appendSettings(r){Xa=Object.assign({},Xa,r)},getSettings(){return Xa},getBaseMaps(){return Xa.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Xa.MAPVIEW_PARAMS)},getLanguageDict(){return Xa.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Xa.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Xa.TERRAIN_TILES)},getUsername(){return Xa.USERNAME},isUserAuthenticated(){return Xa.USER_ISAUTHENTICATED===!0},updateSettings(r){Xa=r},_initAxiosApiInstance(){let r=Xa.API_GEOREFERENCE_BASEURL,e=CS(r)&&r.length===0;if(!fl(r)||e)throw new Error("The URL for the georeference service is not set.");let t=Object.assign({baseURL:r,withCredentials:!0},xGt?{headers:{get:ZP(),post:ZP(),put:ZP(),delete:ZP()}}:{});this.axiosApiInstance=IRe.default.create(t)},getGeoreferenceApiClient(){return fl(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let r=Xa.MARKER_URL;if(!fl(r))throw new Error("The marker icon url is not set.");return{id:Xa.MARKER_IMAGE_ID,url:r}},getUserRole(){return Xa.USER_ROLE}};var Vv=Me(ht(),1);var wa=Me(ht()),GRe=Me(mo());function wGt(r){return!!r&&typeof r.then=="function"}var Gi=wGt;function bGt(r,e){if(r!=null)return r;throw new Error(e!=null?e:"Got unexpected null or undefined")}var On=bGt,QP=class{},SGt=new QP,iH={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(r){return r.state===this.state&&r.contents===this.contents},map(r){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let t=r(this.contents);return Gi(t)?R_(t.then(n=>({__value:n}))):oH(t)}catch(t){return Gi(t)?R_(t.next(()=>r(this.contents))):aH(t)}if(this.state==="loading")return R_(this.contents.then(t=>({__value:r(t.__value)})).catch(t=>{if(Gi(t))return t.then(()=>r(this.contents));throw t}));throw new Error("Invalid Loadable state")}};function oH(r){return Object.freeze(En(Tt({state:"hasValue",contents:r},iH),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function aH(r){return Object.freeze(En(Tt({state:"hasError",contents:r},iH),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function R_(r){return Object.freeze(En(Tt({state:"loading",contents:r},iH),{getValue(){throw this.contents.then(({__value:e})=>e)},toPromise(){return this.contents.then(({__value:e})=>e)},promiseMaybe(){return this.contents.then(({__value:e})=>e)},promiseOrThrow(){return this.contents.then(({__value:e})=>e)}}))}function EGt(){return R_(new Promise(()=>{}))}function TGt(r){return r.every(e=>e.state==="hasValue")?oH(r.map(e=>e.contents)):r.some(e=>e.state==="hasError")?aH(On(r.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):R_(Promise.all(r.map(e=>e.contents)).then(e=>({__value:e})))}var zS={loadableWithValue:oH,loadableWithError:aH,loadableWithPromise:R_,loadableLoading:EGt,loadableAll:TGt,Canceled:QP,CANCELED:SGt},F6,$Re=(F6=wa.default.useMutableSource)!==null&&F6!==void 0?F6:wa.default.unstable_useMutableSource;function IGt(){return $Re&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var HRe={mutableSourceExists:IGt,useMutableSource:$Re},{mutableSourceExists:AGt}=HRe,sH=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function lH(r){var e;return r==="recoil_early_rendering_2021"&&!AGt()?!1:(e=sH.get(r))!==null&&e!==void 0?e:!1}lH.setPass=r=>{sH.set(r,!0)};lH.setFail=r=>{sH.set(r,!1)};var Kn=lH;function CGt(r,e,{error:t}={}){return null}var MGt=CGt,qc=MGt;function RGt(r,e){let t=new Set(r);return t.add(e),t}function PGt(r,e){let t=new Set(r);return t.delete(e),t}function OGt(r,e,t){let n=new Map(r);return n.set(e,t),n}function LGt(r,e,t){let n=new Map(r);return n.set(e,t(n.get(e))),n}function DGt(r,e){let t=new Map(r);return t.delete(e),t}function NGt(r,e){let t=new Map(r);return e.forEach(n=>t.delete(n)),t}var WRe={setByAddingToSet:RGt,setByDeletingFromSet:PGt,mapBySettingInMap:OGt,mapByUpdatingInMap:LGt,mapByDeletingFromMap:DGt,mapByDeletingMultipleFromMap:NGt};function*qGt(r,e){let t=0;for(let n of r)e(n,t++)&&(yield n)}var ZRe=qGt;function kGt(r,e){return function*(){let t=0;for(let n of r)yield e(n,t++)}()}var YRe=kGt;function FGt(r,...e){}var jGt=FGt,uH=jGt;function hn(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var kS=class{constructor(e){hn(this,"key",void 0),this.key=e}},eO=class extends kS{},tO=class extends kS{};function zGt(r){return r instanceof eO||r instanceof tO}var hO={AbstractRecoilValue:kS,RecoilState:eO,RecoilValueReadOnly:tO,isRecoilValue:zGt},BGt=hO.AbstractRecoilValue,UGt=hO.RecoilState,VGt=hO.RecoilValueReadOnly,GGt=hO.isRecoilValue,sd=Object.freeze({__proto__:null,AbstractRecoilValue:BGt,RecoilState:UGt,RecoilValueReadOnly:VGt,isRecoilValue:GGt}),rO=class{},$Gt=new rO,U6=class extends Error{constructor(e){super(`Tried to set the value of Recoil selector ${e} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},fv=new Map,cH=new Map;function HGt(r){return YRe(r,e=>On(cH.get(e)))}function WGt(r){if(fv.has(r.key)){let t=`Duplicate atom key "${r.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(t)}fv.set(r.key,r);let e=r.set==null?new sd.RecoilValueReadOnly(r.key):new sd.RecoilState(r.key);return cH.set(r.key,e),e}var nO=class extends Error{};function ZGt(r){let e=fv.get(r);if(e==null)throw new nO(`Missing definition for RecoilValue: "${r}""`);return e}function YGt(r){return fv.get(r)}var iO=new Map;function KGt(r){var e;if(!Kn("recoil_memory_managament_2020"))return;let t=fv.get(r);if(!(t==null||(e=t.shouldDeleteConfigOnRelease)===null||e===void 0)&&e.call(t)){var n;fv.delete(r),(n=KRe(r))===null||n===void 0||n(),iO.delete(r)}}function XGt(r,e){Kn("recoil_memory_managament_2020")&&(e===void 0?iO.delete(r):iO.set(r,e))}function KRe(r){return iO.get(r)}var Xl={nodes:fv,recoilValues:cH,registerNode:WGt,getNode:ZGt,getNodeMaybe:YGt,deleteNodeConfigIfPossible:KGt,setConfigDeletionHandler:XGt,getConfigDeletionHandler:KRe,recoilValuesForKeys:HGt,NodeMissingError:nO,DefaultValue:rO,DEFAULT_VALUE:$Gt,RecoilValueNotReady:U6},oO=class{};function JGt(){return new oO}var pO={RetentionZone:oO,retentionZone:JGt},{setByAddingToSet:QGt}=WRe,{getNode:dO,getNodeMaybe:e$t,recoilValuesForKeys:ARe}=Xl,{RetentionZone:CRe}=pO,t$t=Object.freeze(new Set),V6=class extends Error{};function r$t(r,e,t){if(!Kn("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=r.getState().retention;function i(o){let a=n.get(o);a||n.set(o,a=new Set),a.add(e)}if(t instanceof CRe)i(t);else if(Array.isArray(t))for(let o of t)i(o);return()=>{if(!Kn("recoil_memory_managament_2020"))return;let o=r.getState().retention.nodesRetainedByZone;function a(u){let h=o.get(u);h&&h.delete(e),h&&h.size===0&&o.delete(u)}if(t instanceof CRe)a(t);else if(Array.isArray(t))for(let u of t)a(u)}}function fH(r,e,t,n){let i=r.getState();if(i.nodeCleanupFunctions.has(t))return;let o=dO(t),a=r$t(r,t,o.retainedBy),u=o.init(r,e,n);i.nodeCleanupFunctions.set(t,()=>{u(),a()})}function n$t(r,e){var t;let n=r.getState();(t=n.nodeCleanupFunctions.get(e))===null||t===void 0||t(),n.nodeCleanupFunctions.delete(e)}function i$t(r,e,t){return fH(r,e,t,"get"),dO(t).get(r,e)}function XRe(r,e,t){return dO(t).peek(r,e)}function o$t(r,e,t){var n;let i=e$t(e);return i==null||(n=i.invalidate)===null||n===void 0||n.call(i,r),En(Tt({},r),{atomValues:r.atomValues.clone().delete(e),nonvalidatedAtoms:r.nonvalidatedAtoms.clone().set(e,t),dirtyAtoms:QGt(r.dirtyAtoms,e)})}function a$t(r,e,t,n){let i=dO(t);if(i.set==null)throw new V6(`Attempt to set read-only RecoilValue: ${t}`);let o=i.set;return fH(r,e,t,"set"),o(r,e,n)}function s$t(r,e,t){var n,i,o;let a=r.getState(),u=r.getGraph(e.version),h=a.knownAtoms.has(t)?"atom":a.knownSelectors.has(t)?"selector":void 0,d=ZRe(JRe(r,e,new Set([t])),v=>v!==t);return{loadable:XRe(r,e,t),isActive:a.knownAtoms.has(t)||a.knownSelectors.has(t),isSet:h==="selector"?!1:e.atomValues.has(t),isModified:e.dirtyAtoms.has(t),type:h,deps:ARe((n=u.nodeDeps.get(t))!==null&&n!==void 0?n:[]),subscribers:{nodes:ARe(d),components:YRe((i=(o=a.nodeToComponentSubscriptions.get(t))===null||o===void 0?void 0:o.values())!==null&&i!==void 0?i:[],([v])=>({name:v}))}}}function JRe(r,e,t){let n=new Set,i=Array.from(t),o=r.getGraph(e.version);for(let u=i.pop();u;u=i.pop()){var a;n.add(u);let h=(a=o.nodeToNodeSubscriptions.get(u))!==null&&a!==void 0?a:t$t;for(let d of h)n.has(d)||i.push(d)}return n}var D_={getNodeLoadable:i$t,peekNodeLoadable:XRe,setNodeValue:a$t,cleanUpNode:n$t,setUnvalidatedAtomValue_DEPRECATED:o$t,peekNodeInfo:s$t,getDownstreamNodes:JRe,initializeNodeIfNewToStore:fH},{CANCELED:l$t}=zS,{getDownstreamNodes:u$t,getNodeLoadable:QRe,setNodeValue:c$t}=D_,{getNodeMaybe:ePe}=Xl,{DefaultValue:hH,RecoilValueNotReady:f$t}=Xl,{AbstractRecoilValue:h$t,RecoilState:p$t,RecoilValueReadOnly:d$t,isRecoilValue:m$t}=sd;function v$t(r,{key:e},t=r.getState().currentTree){var n,i;let o=r.getState();t.version===o.currentTree.version||t.version===((n=o.nextTree)===null||n===void 0?void 0:n.version)||t.version===((i=o.previousTree)===null||i===void 0?void 0:i.version)||qc("Tried to read from a discarded tree");let a=QRe(r,t,e);return a.state==="loading"&&a.contents.catch(()=>l$t),a}function g$t(r,e){let t=r.clone();return e.forEach((n,i)=>{n.state==="hasValue"&&n.contents instanceof hH?t.delete(i):t.set(i,n)}),t}function y$t(r,e,{key:t},n){if(typeof n=="function"){let i=QRe(r,e,t);if(i.state==="loading")throw new f$t(t);if(i.state==="hasError")throw i.contents;return n(i.contents)}else return n}function _$t(r,e,t){if(t.type==="set"){let{recoilValue:i,valueOrUpdater:o}=t,a=y$t(r,e,i,o),u=c$t(r,e,i.key,a);for(let[h,d]of u.entries())G6(e,h,d)}else if(t.type==="setLoadable"){let{recoilValue:{key:i},loadable:o}=t;G6(e,i,o)}else if(t.type==="markModified"){let{recoilValue:{key:i}}=t;e.dirtyAtoms.add(i)}else if(t.type==="setUnvalidated"){var n;let{recoilValue:{key:i},unvalidatedValue:o}=t,a=ePe(i);a==null||(n=a.invalidate)===null||n===void 0||n.call(a,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,o),e.dirtyAtoms.add(i)}else qc(`Unknown action ${t.type}`)}function G6(r,e,t){t.state==="hasValue"&&t.contents instanceof hH?r.atomValues.delete(e):r.atomValues.set(e,t),r.dirtyAtoms.add(e),r.nonvalidatedAtoms.delete(e)}function tPe(r,e){r.replaceState(t=>{let n=rPe(t);for(let i of e)_$t(r,n,i);return $6(r,n),n})}function mO(r,e){if(NS.length){let t=NS[NS.length-1],n=t.get(r);n||t.set(r,n=[]),n.push(e)}else tPe(r,[e])}var NS=[];function x$t(){let r=new Map;return NS.push(r),()=>{for(let[t,n]of r)tPe(t,n);NS.pop()!==r&&qc("Incorrect order of batch popping")}}function rPe(r){return En(Tt({},r),{atomValues:r.atomValues.clone(),nonvalidatedAtoms:r.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(r.dirtyAtoms)})}function $6(r,e){let t=u$t(r,e,e.dirtyAtoms);for(let o of t){var n,i;(n=ePe(o))===null||n===void 0||(i=n.invalidate)===null||i===void 0||i.call(n,e)}}function nPe(r,e,t){mO(r,{type:"set",recoilValue:e,valueOrUpdater:t})}function w$t(r,e,t){if(t instanceof hH)return nPe(r,e,t);mO(r,{type:"setLoadable",recoilValue:e,loadable:t})}function b$t(r,e){mO(r,{type:"markModified",recoilValue:e})}function S$t(r,e,t){mO(r,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:t})}var E$t=0;function T$t(r,{key:e},t,n=null){let i=E$t++,o=r.getState();if(o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),On(o.nodeToComponentSubscriptions.get(e)).set(i,[n!=null?n:"<not captured>",t]),Kn("recoil_early_rendering_2021")){let a=r.getState().nextTree;a&&a.dirtyAtoms.has(e)&&t(a)}return{release:()=>{let a=r.getState(),u=a.nodeToComponentSubscriptions.get(e);if(u===void 0||!u.has(i)){qc(`Subscription missing at release time for atom ${e}. This is a bug in Recoil.`);return}u.delete(i),u.size===0&&a.nodeToComponentSubscriptions.delete(e)}}}var hv={RecoilValueReadOnly:d$t,AbstractRecoilValue:h$t,RecoilState:p$t,getRecoilValueAsLoadable:v$t,setRecoilValue:nPe,setRecoilValueLoadable:w$t,markRecoilValueModified:b$t,setUnvalidatedRecoilValue:S$t,subscribeToRecoilValue:T$t,isRecoilValue:m$t,applyAtomValueWrites:g$t,batchStart:x$t,writeLoadableToTreeState:G6,invalidateDownstreams:$6,copyTreeState:rPe,invalidateDownstreams_FOR_TESTING:$6},{unstable_batchedUpdates:I$t}=GRe.default,A$t={unstable_batchedUpdates:I$t},{unstable_batchedUpdates:C$t}=A$t,M$t={unstable_batchedUpdates:C$t},{batchStart:R$t}=hv,{unstable_batchedUpdates:P$t}=M$t,pH=P$t,O$t=r=>{pH=r},L$t=()=>pH,D$t=r=>{pH(()=>{let e=()=>{};try{e=R$t(),r()}finally{e()}})},dH={getBatcher:L$t,setBatcher:O$t,batchUpdates:D$t};function N$t(r,e){e()}var q$t={enqueueExecution:N$t};function k$t(r,...e){let t=new Set;e:for(let n of r){for(let i of e)if(i.has(n))continue e;t.add(n)}return t}var aO=k$t;function F$t(r,e){let t=new Map;return r.forEach((n,i)=>{t.set(i,e(n,i))}),t}var sO=F$t;function j$t(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function z$t(r){return{nodeDeps:sO(r.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:sO(r.nodeToNodeSubscriptions,e=>new Set(e))}}function j6(r,e,t){let{nodeDeps:n,nodeToNodeSubscriptions:i}=e;r.forEach((o,a)=>{let u=n.get(a);if(u&&t&&u!==t.nodeDeps.get(a))return;n.set(a,new Set(o)),(u==null?o:aO(o,u)).forEach(d=>{i.has(d)||i.set(d,new Set),On(i.get(d)).add(a)}),u&&aO(u,o).forEach(v=>{if(!i.has(v))return;let x=On(i.get(v));x.delete(a),x.size===0&&i.delete(v)})})}function B$t(r,e,t){var n,i,o,a;let u=e.getState();t===u.currentTree.version||t===((n=u.nextTree)===null||n===void 0?void 0:n.version)||t===((i=u.previousTree)===null||i===void 0?void 0:i.version)||qc("Tried to save dependencies to a discarded tree");let h=e.getGraph(t);if(j6(r,h),t===((o=u.previousTree)===null||o===void 0?void 0:o.version)){let v=e.getGraph(u.currentTree.version);j6(r,v,h)}if(t===((a=u.previousTree)===null||a===void 0?void 0:a.version)||t===u.currentTree.version){var d;let v=(d=u.nextTree)===null||d===void 0?void 0:d.version;if(v!==void 0){let x=e.getGraph(v);j6(r,x,h)}}}function U$t(r,e){r.forEach((t,n)=>{e.has(n)||e.set(n,new Set);let i=On(e.get(n));t.forEach(o=>i.add(o))})}function V$t(r,e,t){t.has(r)||t.set(r,new Set),On(t.get(r)).add(e)}var BS={addToDependencyMap:V$t,cloneGraph:z$t,graph:j$t,mergeDepsIntoDependencyMap:U$t,saveDependencyMapToStore:B$t};function G$t(r,e){return e={exports:{}},r(e,e.exports),e.exports}var $$t=G$t(function(r){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee},t={},n=5,i=Math.pow(2,n),o=i-1,a=i/2,u=i/4,h={},d=function(Oe){return function(){return Oe}},v=t.hash=function(Ee){var Oe=typeof Ee=="undefined"?"undefined":e(Ee);if(Oe==="number")return Ee;Oe!=="string"&&(Ee+="");for(var it=0,St=0,vt=Ee.length;St<vt;++St){var oe=Ee.charCodeAt(St);it=(it<<5)-it+oe|0}return it},x=function(Oe){return Oe-=Oe>>1&1431655765,Oe=(Oe&858993459)+(Oe>>2&858993459),Oe=Oe+(Oe>>4)&252645135,Oe+=Oe>>8,Oe+=Oe>>16,Oe&127},S=function(Oe,it){return it>>>Oe&o},A=function(Oe){return 1<<Oe},L=function(Oe,it){return x(Oe&it-1)},q=function(Oe,it,St,vt){var oe=vt;if(!Oe){var W=vt.length;oe=new Array(W);for(var H=0;H<W;++H)oe[H]=vt[H]}return oe[it]=St,oe},R=function(Oe,it,St){var vt=St.length-1,oe=0,W=0,H=St;if(Oe)oe=W=it;else for(H=new Array(vt);oe<it;)H[W++]=St[oe++];for(++oe;oe<=vt;)H[W++]=St[oe++];return Oe&&(H.length=vt),H},D=function(Oe,it,St,vt){var oe=vt.length;if(Oe){for(var W=oe;W>=it;)vt[W--]=vt[W];return vt[it]=St,vt}for(var H=0,K=0,ae=new Array(oe+1);H<it;)ae[K++]=vt[H++];for(ae[it]=St;H<oe;)ae[++K]=vt[H++];return ae},k=1,j=2,$=3,ee=4,J={__hamt_isEmpty:!0},ie=function(Oe){return Oe===J||Oe&&Oe.__hamt_isEmpty},ue=function(Oe,it,St,vt){return{type:k,edit:Oe,hash:it,key:St,value:vt,_modify:Ie}},le=function(Oe,it,St){return{type:j,edit:Oe,hash:it,children:St,_modify:Ge}},_e=function(Oe,it,St){return{type:$,edit:Oe,mask:it,children:St,_modify:$e}},Re=function(Oe,it,St){return{type:ee,edit:Oe,size:it,children:St,_modify:Ze}},ze=function(Oe){return Oe===J||Oe.type===k||Oe.type===j},qe=function(Oe,it,St,vt,oe){for(var W=[],H=vt,K=0,ae=0;H;++ae)H&1&&(W[ae]=oe[K++]),H>>>=1;return W[it]=St,Re(Oe,K+1,W)},Ve=function(Oe,it,St,vt){for(var oe=new Array(it-1),W=0,H=0,K=0,ae=vt.length;K<ae;++K)if(K!==St){var ve=vt[K];ve&&!ie(ve)&&(oe[W++]=ve,H|=1<<K)}return _e(Oe,H,oe)},Ke=function Ee(Oe,it,St,vt,oe,W){if(St===oe)return le(Oe,St,[W,vt]);var H=S(it,St),K=S(it,oe);return _e(Oe,A(H)|A(K),H===K?[Ee(Oe,it+n,St,vt,oe,W)]:H<K?[vt,W]:[W,vt])},Ce=function(Oe,it,St,vt,oe,W,H,K){for(var ae=oe.length,ve=0;ve<ae;++ve){var xe=oe[ve];if(St(H,xe.key)){var Te=xe.value,pe=W(Te);return pe===Te?oe:pe===h?(--K.value,R(Oe,ve,oe)):q(Oe,ve,ue(it,vt,H,pe),oe)}}var Be=W();return Be===h?oe:(++K.value,q(Oe,ae,ue(it,vt,H,Be),oe))},Se=function(Oe,it){return Oe===it.edit},Ie=function(Oe,it,St,vt,oe,W,H){if(it(W,this.key)){var K=vt(this.value);return K===this.value?this:K===h?(--H.value,J):Se(Oe,this)?(this.value=K,this):ue(Oe,oe,W,K)}var ae=vt();return ae===h?this:(++H.value,Ke(Oe,St,this.hash,this,oe,ue(Oe,oe,W,ae)))},Ge=function(Oe,it,St,vt,oe,W,H){if(oe===this.hash){var K=Se(Oe,this),ae=Ce(K,Oe,it,this.hash,this.children,vt,W,H);return ae===this.children?this:ae.length>1?le(Oe,this.hash,ae):ae[0]}var ve=vt();return ve===h?this:(++H.value,Ke(Oe,St,this.hash,this,oe,ue(Oe,oe,W,ve)))},$e=function(Oe,it,St,vt,oe,W,H){var K=this.mask,ae=this.children,ve=S(St,oe),xe=A(ve),Te=L(K,xe),pe=K&xe,Be=pe?ae[Te]:J,Je=Be._modify(Oe,it,St+n,vt,oe,W,H);if(Be===Je)return this;var Ue=Se(Oe,this),st=K,zt=void 0;if(pe&&ie(Je)){if(st&=~xe,!st)return J;if(ae.length<=2&&ze(ae[Te^1]))return ae[Te^1];zt=R(Ue,Te,ae)}else if(!pe&&!ie(Je)){if(ae.length>=a)return qe(Oe,ve,Je,K,ae);st|=xe,zt=D(Ue,Te,Je,ae)}else zt=q(Ue,Te,Je,ae);return Ue?(this.mask=st,this.children=zt,this):_e(Oe,st,zt)},Ze=function(Oe,it,St,vt,oe,W,H){var K=this.size,ae=this.children,ve=S(St,oe),xe=ae[ve],Te=(xe||J)._modify(Oe,it,St+n,vt,oe,W,H);if(xe===Te)return this;var pe=Se(Oe,this),Be=void 0;if(ie(xe)&&!ie(Te))++K,Be=q(pe,ve,Te,ae);else if(!ie(xe)&&ie(Te)){if(--K,K<=u)return Ve(Oe,K,ve,ae);Be=q(pe,ve,J,ae)}else Be=q(pe,ve,Te,ae);return pe?(this.size=K,this.children=Be,this):Re(Oe,K,Be)};J._modify=function(Ee,Oe,it,St,vt,oe,W){var H=St();return H===h?J:(++W.value,ue(Ee,vt,oe,H))};function Pe(Ee,Oe,it,St,vt){this._editable=Ee,this._edit=Oe,this._config=it,this._root=St,this._size=vt}Pe.prototype.setTree=function(Ee,Oe){return this._editable?(this._root=Ee,this._size=Oe,this):Ee===this._root?this:new Pe(this._editable,this._edit,this._config,Ee,Oe)};var at=t.tryGetHash=function(Ee,Oe,it,St){for(var vt=St._root,oe=0,W=St._config.keyEq;;)switch(vt.type){case k:return W(it,vt.key)?vt.value:Ee;case j:{if(Oe===vt.hash)for(var H=vt.children,K=0,ae=H.length;K<ae;++K){var ve=H[K];if(W(it,ve.key))return ve.value}return Ee}case $:{var xe=S(oe,Oe),Te=A(xe);if(vt.mask&Te){vt=vt.children[L(vt.mask,Te)],oe+=n;break}return Ee}case ee:{if(vt=vt.children[S(oe,Oe)],vt){oe+=n;break}return Ee}default:return Ee;}};Pe.prototype.tryGetHash=function(Ee,Oe,it){return at(Ee,Oe,it,this)};var wt=t.tryGet=function(Ee,Oe,it){return at(Ee,it._config.hash(Oe),Oe,it)};Pe.prototype.tryGet=function(Ee,Oe){return wt(Ee,Oe,this)};var Le=t.getHash=function(Ee,Oe,it){return at(void 0,Ee,Oe,it)};Pe.prototype.getHash=function(Ee,Oe){return Le(Ee,Oe,this)};var Ye=t.get=function(Ee,Oe){return at(void 0,Oe._config.hash(Ee),Ee,Oe)};Pe.prototype.get=function(Ee,Oe){return wt(Oe,Ee,this)};var je=t.has=function(Ee,Oe,it){return at(h,Ee,Oe,it)!==h};Pe.prototype.hasHash=function(Ee,Oe){return je(Ee,Oe,this)};var We=t.has=function(Ee,Oe){return je(Oe._config.hash(Ee),Ee,Oe)};Pe.prototype.has=function(Ee){return We(Ee,this)};var tt=function(Oe,it){return Oe===it};t.make=function(Ee){return new Pe(0,0,{keyEq:Ee&&Ee.keyEq||tt,hash:Ee&&Ee.hash||v},J,0)},t.empty=t.make();var Qe=t.isEmpty=function(Ee){return Ee&&!!ie(Ee._root)};Pe.prototype.isEmpty=function(){return Qe(this)};var kt=t.modifyHash=function(Ee,Oe,it,St){var vt={value:St._size},oe=St._root._modify(St._editable?St._edit:NaN,St._config.keyEq,0,Ee,Oe,it,vt);return St.setTree(oe,vt.value)};Pe.prototype.modifyHash=function(Ee,Oe,it){return kt(it,Ee,Oe,this)};var Gt=t.modify=function(Ee,Oe,it){return kt(Ee,it._config.hash(Oe),Oe,it)};Pe.prototype.modify=function(Ee,Oe){return Gt(Oe,Ee,this)};var bt=t.setHash=function(Ee,Oe,it,St){return kt(d(it),Ee,Oe,St)};Pe.prototype.setHash=function(Ee,Oe,it){return bt(Ee,Oe,it,this)};var be=t.set=function(Ee,Oe,it){return bt(it._config.hash(Ee),Ee,Oe,it)};Pe.prototype.set=function(Ee,Oe){return be(Ee,Oe,this)};var Yt=d(h),Ut=t.removeHash=function(Ee,Oe,it){return kt(Yt,Ee,Oe,it)};Pe.prototype.removeHash=Pe.prototype.deleteHash=function(Ee,Oe){return Ut(Ee,Oe,this)};var Vt=t.remove=function(Ee,Oe){return Ut(Oe._config.hash(Ee),Ee,Oe)};Pe.prototype.remove=Pe.prototype.delete=function(Ee){return Vt(Ee,this)};var nr=t.beginMutation=function(Ee){return new Pe(Ee._editable+1,Ee._edit+1,Ee._config,Ee._root,Ee._size)};Pe.prototype.beginMutation=function(){return nr(this)};var yr=t.endMutation=function(Ee){return Ee._editable=Ee._editable&&Ee._editable-1,Ee};Pe.prototype.endMutation=function(){return yr(this)};var Xt=t.mutate=function(Ee,Oe){var it=nr(Oe);return Ee(it),yr(it)};Pe.prototype.mutate=function(Ee){return Xt(Ee,this)};var lr=function(Oe){return Oe&&Pr(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4])},Pr=function(Oe,it,St,vt,oe){for(;St<Oe;){var W=it[St++];if(W&&!ie(W))return nn(W,vt,[Oe,it,St,vt,oe])}return lr(oe)},nn=function(Oe,it,St){switch(Oe.type){case k:return{value:it(Oe),rest:St};case j:case ee:case $:var vt=Oe.children;return Pr(vt.length,vt,0,it,St);default:return lr(St);}},An={done:!0};function Ai(Ee){this.v=Ee}Ai.prototype.next=function(){if(!this.v)return An;var Ee=this.v;return this.v=lr(Ee.rest),Ee},Ai.prototype[Symbol.iterator]=function(){return this};var nt=function(Oe,it){return new Ai(nn(Oe._root,it))},ti=function(Oe){return[Oe.key,Oe.value]},Cn=t.entries=function(Ee){return nt(Ee,ti)};Pe.prototype.entries=Pe.prototype[Symbol.iterator]=function(){return Cn(this)};var di=function(Oe){return Oe.key},Ci=t.keys=function(Ee){return nt(Ee,di)};Pe.prototype.keys=function(){return Ci(this)};var ct=function(Oe){return Oe.value},mr=t.values=Pe.prototype.values=function(Ee){return nt(Ee,ct)};Pe.prototype.values=function(){return mr(this)};var jt=t.fold=function(Ee,Oe,it){var St=it._root;if(St.type===k)return Ee(Oe,St.value,St.key);for(var vt=[St.children],oe=void 0;oe=vt.pop();)for(var W=0,H=oe.length;W<H;){var K=oe[W++];K&&K.type&&(K.type===k?Oe=Ee(Oe,K.value,K.key):vt.push(K.children))}return Oe};Pe.prototype.fold=function(Ee,Oe){return jt(Ee,Oe,this)};var Mi=t.forEach=function(Ee,Oe){return jt(function(it,St,vt){return Ee(St,vt,Oe)},null,Oe)};Pe.prototype.forEach=function(Ee){return Mi(Ee,this)};var dn=t.count=function(Ee){return Ee._size};Pe.prototype.count=function(){return dn(this)},Object.defineProperty(Pe.prototype,"size",{get:Pe.prototype.count}),r.exports?r.exports=t:(void 0).hamt=t}),H6=class{constructor(e){hn(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return mH(this)}toMap(){return new Map(this._map)}},W6=class r{constructor(e){if(hn(this,"_hamt",$$t.empty.beginMutation()),e instanceof r){let t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(let[t,n]of e.entries())this._hamt.set(t,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return mH(this)}toMap(){return new Map(this._hamt)}};function mH(r){return Kn("recoil_hamt_2020")?new W6(r):new H6(r)}var H$t={persistentMap:mH},W$t=H$t.persistentMap,Z$t=Object.freeze({__proto__:null,persistentMap:W$t}),{graph:Y$t}=BS,{persistentMap:MRe}=Z$t,K$t=0,iPe=()=>K$t++;function oPe(){let r=iPe();return{version:r,stateID:r,transactionMetadata:{},dirtyAtoms:new Set,atomValues:MRe(),nonvalidatedAtoms:MRe()}}function X$t(){let r=oPe();return{currentTree:r,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(r.version,Y$t()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var aPe={makeEmptyTreeState:oPe,makeEmptyStoreState:X$t,getNextTreeStateVersion:iPe};function J$t(...r){let e=new Set;for(let t of r)for(let n of t)e.add(n);return e}var Q$t=J$t;function e6t(r,e,t){let n=r.entries(),i=n.next();for(;!i.done;){let o=i.value;if(e.call(t,o[1],o[0],r))return!0;i=n.next()}return!1}var t6t=e6t,{cleanUpNode:r6t}=D_,{deleteNodeConfigIfPossible:n6t,getNode:sPe}=Xl,{RetentionZone:lPe}=pO,uPe=new Set;function cPe(r,e){let t=r.getState(),n=t.currentTree;if(t.nextTree){qc("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let i=new Set;for(let a of e)if(a instanceof lPe)for(let u of s6t(t,a))i.add(u);else i.add(a);let o=i6t(r,i);for(let a of o)a6t(r,n,a)}function i6t(r,e){let t=r.getState(),n=t.currentTree,i=r.getGraph(n.version),o=new Set,a=new Set;return u(e),o;function u(h){let d=new Set,v=o6t(r,n,h,o,a);for(let L of v){var x;if(sPe(L).retainedBy==="recoilRoot"){a.add(L);continue}if(((x=t.retention.referenceCounts.get(L))!==null&&x!==void 0?x:0)>0){a.add(L);continue}if(fPe(L).some(R=>t.retention.referenceCounts.get(R))){a.add(L);continue}let q=i.nodeToNodeSubscriptions.get(L);if(q&&t6t(q,R=>a.has(R))){a.add(L);continue}o.add(L),d.add(L)}let S=new Set;for(let L of d)for(let q of(A=i.nodeDeps.get(L))!==null&&A!==void 0?A:uPe){var A;o.has(q)||S.add(q)}S.size&&u(S)}}function o6t(r,e,t,n,i){let o=r.getGraph(e.version),a=[],u=new Set;for(;t.size>0;)h(On(t.values().next().value));return a;function h(d){if(n.has(d)||i.has(d)){t.delete(d);return}if(u.has(d))return;let v=o.nodeToNodeSubscriptions.get(d);if(v)for(let x of v)h(x);u.add(d),t.delete(d),a.push(d)}}function a6t(r,e,t){if(!Kn("recoil_memory_managament_2020"))return;r6t(r,t);let n=r.getState();n.knownAtoms.delete(t),n.knownSelectors.delete(t),n.nodeTransactionSubscriptions.delete(t),n.retention.referenceCounts.delete(t);let i=fPe(t);for(let h of i){var o;(o=n.retention.nodesRetainedByZone.get(h))===null||o===void 0||o.delete(t)}e.atomValues.delete(t),e.dirtyAtoms.delete(t),e.nonvalidatedAtoms.delete(t);let a=n.graphsByVersion.get(e.version);if(a){let h=a.nodeDeps.get(t);if(h!==void 0){a.nodeDeps.delete(t);for(let d of h){var u;(u=a.nodeToNodeSubscriptions.get(d))===null||u===void 0||u.delete(t)}}a.nodeToNodeSubscriptions.delete(t)}n6t(t)}function s6t(r,e){var t;return(t=r.retention.nodesRetainedByZone.get(e))!==null&&t!==void 0?t:uPe}function fPe(r){let e=sPe(r).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof lPe?[e]:e}function l6t(r,e){let t=r.getState();t.nextTree?t.retention.retainablesToCheckForRelease.add(e):cPe(r,new Set([e]))}function u6t(r,e,t){var n;if(!Kn("recoil_memory_managament_2020"))return;let i=r.getState().retention.referenceCounts,o=((n=i.get(e))!==null&&n!==void 0?n:0)+t;o===0?hPe(r,e):i.set(e,o)}function hPe(r,e){if(!Kn("recoil_memory_managament_2020"))return;r.getState().retention.referenceCounts.delete(e),l6t(r,e)}function c6t(r){if(!Kn("recoil_memory_managament_2020"))return;let e=r.getState();cPe(r,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function f6t(r){return r===void 0?"recoilRoot":r}var US={updateRetainCount:u6t,updateRetainCountToZero:hPe,releaseScheduledRetainablesNow:c6t,retainedByOptionWithDefault:f6t};function*h6t(r){for(let e of r)for(let t of e)yield t}var p6t=h6t,d6t=typeof window=="undefined",m6t=typeof navigator!="undefined"&&navigator.product==="ReactNative",vH={isSSR:d6t,isReactNative:m6t},{isSSR:v6t}=vH,{batchUpdates:Z6}=dH,{initializeNodeIfNewToStore:g6t,peekNodeInfo:y6t}=D_,{graph:_6t}=BS,{DEFAULT_VALUE:x6t,recoilValues:RRe,recoilValuesForKeys:PRe}=Xl,{AbstractRecoilValue:w6t,getRecoilValueAsLoadable:b6t,setRecoilValue:ORe,setUnvalidatedRecoilValue:S6t}=hv,{updateRetainCount:JP}=US,{getNextTreeStateVersion:E6t,makeEmptyStoreState:T6t}=aPe;var O_=class{constructor(e){hn(this,"_store",void 0),hn(this,"_refCount",0),hn(this,"getLoadable",t=>(this.checkRefCount_INTERNAL(),b6t(this._store,t))),hn(this,"getPromise",t=>(this.checkRefCount_INTERNAL(),this.getLoadable(t).toPromise())),hn(this,"getNodes_UNSTABLE",t=>{if(this.checkRefCount_INTERNAL(),(t==null?void 0:t.isModified)===!0){if((t==null?void 0:t.isInitialized)===!1)return[];let o=this._store.getState().currentTree;return PRe(o.dirtyAtoms)}let n=this._store.getState().knownAtoms,i=this._store.getState().knownSelectors;return(t==null?void 0:t.isInitialized)==null?RRe.values():t.isInitialized===!0?PRe(p6t([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):ZRe(RRe.values(),({key:o})=>!n.has(o)&&!i.has(o))}),hn(this,"getInfo_UNSTABLE",({key:t})=>(this.checkRefCount_INTERNAL(),y6t(this._store,this._store.getState().currentTree,t))),hn(this,"map",t=>{this.checkRefCount_INTERNAL();let n=new FS(this,Z6);return t(n),Y6(n.getStore_INTERNAL())}),hn(this,"asyncMap",t=>fo(this,null,function*(){this.checkRefCount_INTERNAL();let n=new FS(this,Z6);return yield t(n),Y6(n.getStore_INTERNAL())})),this._store={getState:()=>e,replaceState:t=>{e.currentTree=t(e.currentTree)},getGraph:t=>{let n=e.graphsByVersion;if(n.has(t))return On(n.get(t));let i=_6t();return n.set(t,i),i},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let t of this._store.getState().nodeCleanupFunctions.keys())g6t(this._store,e.currentTree,t,"get"),JP(this._store,t,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!Kn("recoil_memory_managament_2020"))return()=>{};this._refCount++;let e=!1;return()=>{e||(e=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){Kn("recoil_memory_managament_2020")&&(v6t||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){Kn("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){Kn("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function pPe(r,e,t=!1){let n=r.getState(),i=t?E6t():e.version;return{currentTree:t?{version:i,stateID:i,transactionMetadata:Tt({},e.transactionMetadata),dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()}:e,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,r.getGraph(e.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function I6t(r){let e=new O_(T6t());return r!=null?e.map(r):e}function Y6(r,e="current"){let t=r.getState(),n=e==="current"?t.currentTree:On(t.previousTree);return new O_(pPe(r,n))}var FS=class extends O_{constructor(e,t){super(pPe(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0)),hn(this,"_batch",void 0),hn(this,"set",(n,i)=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{JP(o,n.key,1),ORe(this.getStore_INTERNAL(),n,i)})}),hn(this,"reset",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{JP(i,n.key,1),ORe(this.getStore_INTERNAL(),n,x6t)})}),hn(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();Z6(()=>{for(let[o,a]of n.entries())JP(i,o,1),S6t(i,new w6t(o),a)})}),this._batch=t}},vO={Snapshot:O_,MutableSnapshot:FS,freshSnapshot:I6t,cloneSnapshot:Y6},A6t=vO.Snapshot,C6t=vO.MutableSnapshot,M6t=vO.freshSnapshot,R6t=vO.cloneSnapshot,gO=Object.freeze({__proto__:null,Snapshot:A6t,MutableSnapshot:C6t,freshSnapshot:M6t,cloneSnapshot:R6t}),{getNextTreeStateVersion:P6t,makeEmptyStoreState:dPe}=aPe,{cleanUpNode:O6t,getDownstreamNodes:L6t,setNodeValue:D6t,setUnvalidatedAtomValue_DEPRECATED:N6t}=D_,{graph:q6t}=BS,{cloneGraph:k6t}=BS,{applyAtomValueWrites:F6t}=hv,{releaseScheduledRetainablesNow:mPe}=US,{freshSnapshot:j6t}=gO,{useCallback:z6t,useContext:vPe,useEffect:K6,useMemo:B6t,useRef:z6,useState:U6t}=wa.default;function MS(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var gPe=Object.freeze({getState:MS,replaceState:MS,getGraph:MS,subscribeToTransactions:MS,addTransactionMetadata:MS}),X6=!1;function LRe(r){if(X6)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let e=r.getState();if(e.nextTree===null){Kn("recoil_memory_managament_2020")&&Kn("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&mPe(r);let t=e.currentTree.version,n=P6t();e.nextTree=En(Tt({},e.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),e.graphsByVersion.set(n,k6t(On(e.graphsByVersion.get(t))))}}var yPe=wa.default.createContext({current:gPe}),gH=()=>vPe(yPe),_Pe=wa.default.createContext(null);function V6t(){let r=vPe(_Pe);return r==null&&uH("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),r}function yH(r,e,t){let n=L6t(r,t,t.dirtyAtoms);for(let i of n){let o=e.nodeToComponentSubscriptions.get(i);if(o)for(let[a,[u,h]]of o)h(t)}}function xPe(r){let e=r.getState(),t=e.currentTree,n=t.dirtyAtoms;if(n.size){for(let[i,o]of e.nodeTransactionSubscriptions)if(n.has(i))for(let[a,u]of o)u(r);for(let[i,o]of e.transactionSubscriptions)o(r);(!Kn("recoil_early_rendering_2021")||e.suspendedComponentResolvers.size)&&(yH(r,e,t),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(t)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function G6t(r){let e=r.current.getState();e.commitDepth++;try{let{nextTree:t}=e;if(t===null)return;e.previousTree=e.currentTree,e.currentTree=t,e.nextTree=null,xPe(r.current),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):qc("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,Kn("recoil_memory_managament_2020")&&mPe(r.current)}finally{e.commitDepth--}}function $6t({setNotifyBatcherOfChange:r}){let e=gH(),[t,n]=U6t([]);return r(()=>n({})),K6(()=>{q$t.enqueueExecution("Batcher",()=>{G6t(e)})}),K6(()=>()=>{r(()=>{})},[r]),null}function H6t(r,e){let t=dPe();return e({set:(n,i)=>{let o=t.currentTree,a=D6t(r,o,n.key,i),u=new Set(a.keys()),h=o.nonvalidatedAtoms.clone();for(let d of u)h.delete(d);t.currentTree=En(Tt({},o),{dirtyAtoms:Q$t(o.dirtyAtoms,u),atomValues:F6t(o.atomValues,a),nonvalidatedAtoms:h})},setUnvalidatedAtomValues:n=>{n.forEach((i,o)=>{t.currentTree=N6t(t.currentTree,o,i)})}}),t}function W6t(r){return j6t().map(r).getStore_INTERNAL().getState()}var DRe=0;function Z6t({initializeState_DEPRECATED:r,initializeState:e,store_INTERNAL:t,children:n}){var i;let o,a=R=>{let D=o.current.graphsByVersion;if(D.has(R))return On(D.get(R));let k=q6t();return D.set(R,k),k},u=(R,D)=>{if(D==null){let{transactionSubscriptions:k}=L.current.getState(),j=DRe++;return k.set(j,R),{release:()=>{k.delete(j)}}}else{let{nodeTransactionSubscriptions:k}=L.current.getState();k.has(D)||k.set(D,new Map);let j=DRe++;return On(k.get(D)).set(j,R),{release:()=>{let $=k.get(D);$&&($.delete(j),$.size===0&&k.delete(D))}}}},h=R=>{LRe(L.current);for(let D of Object.keys(R))On(L.current.getState().nextTree).transactionMetadata[D]=R[D]},d=R=>{let D=L.current.getState();LRe(L.current);let k=On(D.nextTree),j;try{X6=!0,j=R(k)}finally{X6=!1}j!==k&&(D.nextTree=j,Kn("recoil_early_rendering_2021")&&yH(A,D,j),On(v.current)())},v=z6(null),x=z6t(R=>{v.current=R},[v]),S=(i=wa.default.createMutableSource)!==null&&i!==void 0?i:wa.default.unstable_createMutableSource,A=t!=null?t:{getState:()=>o.current,replaceState:d,getGraph:a,subscribeToTransactions:u,addTransactionMetadata:h},L=z6(A);o=z6(r!=null?H6t(A,r):e!=null?W6t(e):dPe());let q=B6t(()=>S?S(o,()=>o.current.currentTree.version):null,[S,o]);return K6(()=>()=>{for(let R of L.current.getState().knownAtoms)O6t(L.current,R)},[]),wa.default.createElement(yPe.Provider,{value:L},wa.default.createElement(_Pe.Provider,{value:q},wa.default.createElement($6t,{setNotifyBatcherOfChange:x}),n))}function Y6t(r){let i=r,{override:e}=i,t=co(i,["override"]),n=gH();return e===!1&&n.current!==gPe?r.children:wa.default.createElement(Z6t,t)}var yO={useStoreRef:gH,useRecoilMutableSource:V6t,RecoilRoot:Y6t,notifyComponents_FOR_TESTING:yH,sendEndOfBatchNotifications_FOR_TESTING:xPe},{loadableWithValue:K6t}=zS,{DEFAULT_VALUE:X6t,getNode:J6t}=Xl,{copyTreeState:Q6t,getRecoilValueAsLoadable:eHt,invalidateDownstreams:tHt,writeLoadableToTreeState:rHt}=hv;function NRe(r){return J6t(r.key).nodeType==="atom"}var J6=class{constructor(e,t){hn(this,"_store",void 0),hn(this,"_treeState",void 0),hn(this,"_changes",void 0),hn(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!NRe(n))throw new Error("Reading selectors within atomicUpdate is not supported");let i=eHt(this._store,n,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),hn(this,"set",(n,i)=>{if(!NRe(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){let o=this.get(n);this._changes.set(n.key,i(o))}else this._changes.set(n.key,i)}),hn(this,"reset",n=>{this.set(n,X6t)}),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let e=Q6t(this._treeState);for(let[t,n]of this._changes)rHt(e,t,K6t(n));return tHt(this._store,e),e}};function nHt(r){return e=>{r.replaceState(t=>{let n=new J6(r,t);return e(n),n.newTreeState_INTERNAL()})}}var iHt={atomicUpdater:nHt},oHt=iHt.atomicUpdater,aHt=Object.freeze({__proto__:null,atomicUpdater:oHt});function sHt(r,e){let t=new Map;for(let[n,i]of r)e(i,n)&&t.set(n,i);return t}var lHt=sHt;function uHt(r,e){let t=new Set;for(let n of r)e(n)&&t.add(n);return t}var cHt=uHt;function fHt(r,e){if(!r)throw new Error(e)}var hHt=fHt,lO=hHt;function pHt(...r){let e=new Map;for(let t=0;t<r.length;t++){let n=r[t].keys(),i;for(;!(i=n.next()).done;)e.set(i.value,r[t].get(i.value))}return e}var dHt=pHt;function mHt(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}var vHt=mHt;var{useRef:gHt}=wa.default;function yHt(){let r=gHt();if(0&&Kn("recoil_infer_component_names"))var e;return"<component name not available>"}var _H=yHt,{atomicUpdater:wPe}=aHt,{batchUpdates:xH}=dH,{DEFAULT_VALUE:_O,getNode:bPe,nodes:_Ht}=Xl,{useRecoilMutableSource:xHt,useStoreRef:hl}=yO,{isRecoilValue:FPr}=sd,{AbstractRecoilValue:wH,getRecoilValueAsLoadable:qS,setRecoilValue:L_,setRecoilValueLoadable:wHt,setUnvalidatedRecoilValue:bHt,subscribeToRecoilValue:bH}=hv,{updateRetainCount:RS}=US,{RetentionZone:SHt}=pO,{Snapshot:jPr,cloneSnapshot:jS}=gO,{setByAddingToSet:EHt}=WRe,{isSSR:uO}=vH,{mutableSourceExists:THt,useMutableSource:IHt}=HRe,{useCallback:Vu,useEffect:Jf,useMemo:SPe,useRef:ad,useState:SH}=wa.default,EPe=12e4;function TPe(r,e,t){if(r.state==="hasValue")return r.contents;throw r.state==="loading"?new Promise(i=>{t.current.getState().suspendedComponentResolvers.add(i)}):r.state==="hasError"?r.contents:new Error(`Invalid value of loadable atom "${e.key}"`)}function AHt(){let r=hl(),[e,t]=SH([]),n=ad(new Set);n.current=new Set;let i=ad(new Set),o=ad(new Map),a=Vu(h=>{let d=o.current.get(h);d&&(d.release(),o.current.delete(h))},[o]),u=_H();return Jf(()=>{let h=r.current;function d(v,x){o.current.has(x)&&t([])}aO(n.current,i.current).forEach(v=>{if(o.current.has(v)){uH(`Double subscription to RecoilValue "${v}"`);return}let x=bH(h,new wH(v),A=>{d(A,v)},u);o.current.set(v,x),h.getState().nextTree?h.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{d(h.getState(),v)}):d(h.getState(),v)}),aO(i.current,n.current).forEach(v=>{a(v)}),i.current=n.current}),Jf(()=>{let h=o.current;return()=>h.forEach((d,v)=>a(v))},[a]),SPe(()=>{function h(L){return q=>{L_(r.current,L,q)}}function d(L){return()=>L_(r.current,L,_O)}function v(L){var q;n.current.has(L.key)||(n.current=EHt(n.current,L.key));let R=r.current.getState();return qS(r.current,L,Kn("recoil_early_rendering_2021")&&(q=R.nextTree)!==null&&q!==void 0?q:R.currentTree)}function x(L){let q=v(L);return TPe(q,L,r)}function S(L){return[x(L),h(L)]}function A(L){return[v(L),h(L)]}return{getRecoilValue:x,getRecoilValueLoadable:v,getRecoilState:S,getRecoilStateLoadable:A,getSetRecoilState:h,getResetRecoilState:d}},[n,r])}var CHt={current:0};function MHt(r){let e=hl(),t=Vu(()=>{var d;let v=e.current,x=v.getState(),S=Kn("recoil_early_rendering_2021")&&(d=x.nextTree)!==null&&d!==void 0?d:x.currentTree;return qS(v,r,S)},[e,r]),n=Vu(()=>t(),[t]),i=_H(),o=Vu((d,v)=>{let x=e.current;return bH(x,r,()=>{if(!Kn("recoil_suppress_rerender_in_callback"))return v();let A=t();h.current.is(A)||v(),h.current=A},i).release},[e,r,i,t]),a=xHt(),u=IHt(a,n,o),h=ad(u);return Jf(()=>{h.current=u}),u}function RHt(r){let e=hl(),[t,n]=SH([]),i=_H();Jf(()=>{let u=e.current,h=u.getState(),d=bH(u,r,x=>{var S;if(!Kn("recoil_suppress_rerender_in_callback"))return n([]);let A=qS(u,r,u.getState().currentTree);!((S=a.current)===null||S===void 0)&&S.is(A)||n(A),a.current=A},i);if(h.nextTree)u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,n([])});else{var v;if(!Kn("recoil_suppress_rerender_in_callback"))return n([]);let x=qS(u,r,u.getState().currentTree);!((v=a.current)===null||v===void 0)&&v.is(x)||n(x),a.current=x}return d.release},[i,r,e]);let o=qS(e.current,r),a=ad(o);return Jf(()=>{a.current=o}),o}function EH(r){return Kn("recoil_memory_managament_2020")&&MPe(r),THt()?MHt(r):RHt(r)}function IPe(r){let e=hl(),t=EH(r);return TPe(t,r,e)}function TH(r){let e=hl();return Vu(t=>{L_(e.current,r,t)},[e,r])}function PHt(r){let e=hl();return Vu(()=>{L_(e.current,r,_O)},[e,r])}function OHt(r){return[IPe(r),TH(r)]}function LHt(r){return[EH(r),TH(r)]}function xO(r){let e=hl();Jf(()=>e.current.subscribeToTransactions(r).release,[r,e])}function qRe(r){let e=r.atomValues.toMap(),t=sO(lHt(e,(n,i)=>{let a=bPe(i).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return dHt(r.nonvalidatedAtoms.toMap(),t)}function DHt(r){xO(Vu(e=>{let t=e.getState().previousTree,n=e.getState().currentTree;t||(qc("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),t=e.getState().currentTree);let i=qRe(n),o=qRe(t),a=sO(_Ht,h=>{var d,v,x,S;return{persistence_UNSTABLE:{type:(d=(v=h.persistence_UNSTABLE)===null||v===void 0?void 0:v.type)!==null&&d!==void 0?d:"none",backButton:(x=(S=h.persistence_UNSTABLE)===null||S===void 0?void 0:S.backButton)!==null&&x!==void 0?x:!1}}}),u=cHt(n.dirtyAtoms,h=>i.has(h)||o.has(h));r({atomValues:i,previousAtomValues:o,atomInfo:a,modifiedAtoms:u,transactionMetadata:Tt({},n.transactionMetadata)})},[r]))}function NHt(r){xO(Vu(e=>{let t=jS(e,"current"),n=jS(e,"previous");r({snapshot:t,previousSnapshot:n})},[r]))}function APe(r){let e=ad();return Jf(()=>{e.current=r}),e.current}function qHt(){let r=hl(),[e,t]=SH(()=>jS(r.current)),n=APe(e),i=ad();return Jf(()=>(i.current&&!uO&&window.clearTimeout(i.current),e.retain()),[e]),xO(Vu(o=>t(jS(o)),[])),n!==e&&!uO&&(i.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(i.current)),e.retain(),i.current=window.setTimeout(()=>{e.release_INTERNAL(),i.current=null},EPe)),e}function CPe(){let r=hl();return Vu(e=>{var t;let n=r.current.getState(),i=(t=n.nextTree)!==null&&t!==void 0?t:n.currentTree,o=e.getStore_INTERNAL().getState().currentTree;xH(()=>{let a=new Set;for(let d of[i.atomValues.keys(),o.atomValues.keys()])for(let v of d){var u,h;((u=i.atomValues.get(v))===null||u===void 0?void 0:u.contents)!==((h=o.atomValues.get(v))===null||h===void 0?void 0:h.contents)&&bPe(v).shouldRestoreFromSnapshots&&a.add(v)}a.forEach(d=>{wHt(r.current,new wH(d),o.atomValues.has(d)?On(o.atomValues.get(d)):_O)}),r.current.replaceState(d=>En(Tt({},d),{stateID:e.getID_INTERNAL()}))})},[r])}function kHt(){let r=hl();return(e,t={})=>{xH(()=>{r.current.addTransactionMetadata(t),e.forEach((n,i)=>bHt(r.current,new wH(i),n))})}}var cO=class{},FHt=new cO;function jHt(r,e){let t=hl(),n=CPe();return Vu((...i)=>{function o(v,x){L_(t.current,v,x)}function a(v){L_(t.current,v,_O)}let u=jS(t.current),h=wPe(t.current),d=FHt;return xH(()=>{let v="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof r!="function")throw new Error(v);let x=r({set:o,reset:a,snapshot:u,gotoSnapshot:n,transact_UNSTABLE:h});if(typeof x!="function")throw new Error(v);d=x(...i)}),d instanceof cO&&lO(!1),d},e!=null?[...e,t]:void 0)}function MPe(r){if(Kn("recoil_memory_managament_2020"))return zHt(r)}function zHt(r){let t=(Array.isArray(r)?r:[r]).map(a=>a instanceof SHt?a:a.key),n=hl();Jf(()=>{if(!Kn("recoil_memory_managament_2020"))return;let a=n.current;if(i.current&&!uO)window.clearTimeout(i.current),i.current=null;else for(let u of t)RS(a,u,1);return()=>{for(let u of t)RS(a,u,-1)}},[n,...t]);let i=ad(),o=APe(t);if(!uO&&(o===void 0||!vHt(o,t))){let a=n.current;for(let u of t)RS(a,u,1);if(o)for(let u of o)RS(a,u,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(let u of t)RS(a,u,-1)},EPe)}}function BHt(r,e){let t=hl();return SPe(()=>(...n)=>{wPe(t.current)(o=>{r(o)(...n)})},e!=null?[...e,t]:void 0)}var UHt={recoilComponentGetRecoilValueCount_FOR_TESTING:CHt,useGotoRecoilSnapshot:CPe,useRecoilCallback:jHt,useRecoilInterface:AHt,useRecoilSnapshot:qHt,useRecoilState:OHt,useRecoilStateLoadable:LHt,useRecoilTransaction:BHt,useRecoilTransactionObserver:NHt,useRecoilValue:IPe,useRecoilValueLoadable:EH,useRetain:MPe,useResetRecoilState:PHt,useSetRecoilState:TH,useSetUnvalidatedAtomValues:kHt,useTransactionObservation_DEPRECATED:DHt,useTransactionSubscription_DEPRECATED:xO},{peekNodeInfo:VHt}=D_,{useStoreRef:GHt}=yO;function $Ht(){let r=GHt();return({key:e})=>VHt(r.current,r.current.getState().currentTree,e)}var HHt=$Ht,{RecoilRoot:WHt,useStoreRef:ZHt}=yO,{useMemo:YHt}=wa.default;function KHt(){let r=ZHt().current;return YHt(()=>{function e({children:t}){return wa.default.createElement(WHt,{store_INTERNAL:r},t)}return e},[r])}var XHt=KHt;var{isReactNative:zPr,isSSR:BPr}=vH;function Uu(r,e,t){if(typeof r=="string"&&!r.includes("\"")&&!r.includes("\\"))return`"${r}"`;switch(typeof r){case"undefined":return"";case"boolean":return r?"true":"false";case"number":case"symbol":return String(r);case"string":return JSON.stringify(r);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${r.name})__`;}if(r===null)return"null";if(typeof r!="object"){var n;return(n=JSON.stringify(r))!==null&&n!==void 0?n:""}if(Gi(r))return"__PROMISE__";if(Array.isArray(r))return`[${r.map((i,o)=>Uu(i,e,o.toString()))}]`;if(typeof r.toJSON=="function")return Uu(r.toJSON(t),e,t);if(r instanceof Map){let i={};for(let[o,a]of r)i[typeof o=="string"?o:Uu(o,e)]=a;return Uu(i,e,t)}return r instanceof Set?Uu(Array.from(r).sort((i,o)=>Uu(i,e).localeCompare(Uu(o,e))),e,t):Symbol!==void 0&&r[Symbol.iterator]!=null&&typeof r[Symbol.iterator]=="function"?Uu(Array.from(r),e,t):`{${Object.keys(r).filter(i=>r[i]!==void 0).sort().map(i=>`${Uu(i,e)}:${Uu(r[i],e,i)}`).join(",")}}`}function JHt(r,e={allowFunctions:!1}){return Uu(r,e)}var wO=JHt,Q6=class{constructor(e){var t,n,i;hn(this,"_numLeafs",void 0),hn(this,"_root",void 0),hn(this,"_onHit",void 0),hn(this,"_onSet",void 0),hn(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(t=e==null?void 0:e.onHit)!==null&&t!==void 0?t:()=>{},this._onSet=(n=e==null?void 0:e.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,t){var n;return(n=this.getLeafNode(e,t))===null||n===void 0?void 0:n.value}getLeafNode(e,t){return RPe(this.root(),n=>this._mapNodeValue(e(n)),{onNodeVisit:n=>{t==null||t.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(e,t,n){let i,o=eH(this.root(),e.map(([a,u])=>[a,this._mapNodeValue(u)]),null,t,null,{onNodeVisit:a=>{n==null||n.onNodeVisit(a),a.type==="leaf"&&(i=a)}});this.root()||(this._root=o),this._numLeafs++,this._onSet(On(i))}delete(e){if(!this.root())return!1;let t=On(this.root());return QHt(t,e,e.parent)?e===t||t.type==="branch"&&!t.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=OPe(e),!0):!1}clear(){this._numLeafs=0,this._root=null}},RPe=(r,e,t)=>{var n;if(r==null)return;if(t==null||(n=t.onNodeVisit)===null||n===void 0||n.call(t,r),r.type==="leaf")return r;let i=e(r.nodeKey);return RPe(r.branches.get(i),e,t)},eH=(r,e,t,n,i,o)=>{var a;let u;if(r==null){if(e.length===0)u={type:"leaf",value:n,parent:t,branchKey:i};else{let[h,...d]=e,[v,x]=h;u={type:"branch",nodeKey:v,parent:t,branches:new Map,branchKey:i},u.branches.set(x,eH(null,d,u,n,x,o))}}else if(u=r,e.length){let[h,...d]=e,[v,x]=h;r.type==="branch"&&r.nodeKey===v||lO(!1),r.branches.set(x,eH(r.branches.get(x),d,r,n,x,o))}return o==null||(a=o.onNodeVisit)===null||a===void 0||a.call(o,u),u},QHt=(r,e,t)=>t?(t.branches.delete(e.branchKey),PPe(r,t,t.parent)):r===e,PPe=(r,e,t)=>t?(e.branches.size===0&&t.branches.delete(e.branchKey),PPe(r,t,t.parent)):r===e,OPe=r=>r.type==="leaf"?1:Array.from(r.branches.values()).reduce((e,t)=>e+OPe(t),0),eWt={TreeCache:Q6},tWt=eWt.TreeCache,LPe=Object.freeze({__proto__:null,TreeCache:tWt}),tH=class{constructor(e){var t;hn(this,"_maxSize",void 0),hn(this,"_size",void 0),hn(this,"_head",void 0),hn(this,"_tail",void 0),hn(this,"_map",void 0),hn(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(t=e.mapKey)!==null&&t!==void 0?t:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){let t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}set(e,t){let n=this._keyMapper(e);this._map.get(n)&&this.delete(e);let o=this.head(),a={key:e,right:o,left:null,value:t};o?o.left=a:this._tail=a,this._map.set(n,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let e=this.tail();e&&this.delete(e.key)}delete(e){let t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;let n=On(this._map.get(t)),i=n.right,o=n.left;i&&(i.left=n.left),o&&(o.right=n.right),n===this.head()&&(this._head=i),n===this.tail()&&(this._tail=o),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},rWt={LRUCache:tH},nWt=rWt.LRUCache,DPe=Object.freeze({__proto__:null,LRUCache:nWt}),{LRUCache:iWt}=DPe,{TreeCache:oWt}=LPe;function aWt(r,e=t=>t){let t=new iWt({maxSize:r}),n=new oWt({mapNodeValue:e,onHit:i=>{t.set(i,!0)},onSet:i=>{let o=t.tail();t.set(i,!0),o&&n.size()>r&&n.delete(o.key)}});return n}var kRe=aWt,{TreeCache:sWt}=LPe,YP={equality:"reference",eviction:"keep-all",maxSize:1/0};function lWt({equality:r=YP.equality,eviction:e=YP.eviction,maxSize:t=YP.maxSize}=YP){let n=uWt(r);return cWt(e,t,n)}function uWt(r){switch(r){case"reference":return e=>e;case"value":return e=>wO(e);}throw new Error(`Unrecognized equality policy ${r}`)}function cWt(r,e,t){switch(r){case"keep-all":return new sWt({mapNodeValue:t});case"lru":return kRe(On(e),t);case"most-recent":return kRe(1,t);}throw new Error(`Unrecognized eviction policy ${r}`)}var fWt=lWt;function hWt(r){return()=>null}var pWt={startPerfBlock:hWt},{CANCELED:PS,Canceled:dWt,loadableWithError:OS,loadableWithPromise:mWt,loadableWithValue:B6}=zS,{getNodeLoadable:FRe,peekNodeLoadable:vWt,setNodeValue:gWt}=D_,{saveDependencyMapToStore:yWt}=BS,{DEFAULT_VALUE:_Wt,RecoilValueNotReady:xWt,getConfigDeletionHandler:wWt,registerNode:jRe}=Xl,{isRecoilValue:bWt}=sd,{AbstractRecoilValue:SWt}=sd,{setRecoilValueLoadable:EWt}=hv,{retainedByOptionWithDefault:TWt}=US,{cloneSnapshot:IWt}=gO,{startPerfBlock:AWt}=pWt,LS=[],KP=new Map,CWt=(()=>{let r=0;return()=>r++})();function MWt(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function RWt(r){let{key:e,get:t,cachePolicy_UNSTABLE:n}=r,i=r.set!=null?r.set:void 0,o=fWt(n!=null?n:{equality:"reference",eviction:"keep-all"}),a=TWt(r.retainedBy_UNSTABLE),u=new Map,h=0;function d(){return!Kn("recoil_memory_managament_2020")||h>0}function v(Le){return u.has(Le)||u.set(Le,MWt()),On(u.get(Le))}function x(Le){return h++,Le.getState().knownSelectors.add(e),()=>{h--,Le.getState().knownSelectors.delete(e),u.delete(Le)}}function S(){return wWt(e)!==void 0&&!d()}function A(Le,Ye,je){if(Ye.state==="loading"){let We=KP.get(je);We==null&&KP.set(je,We=new Set),We.add(Le)}}function L(Le,Ye){let je=KP.get(Ye);if(je!==void 0){for(let We of je)EWt(We,new SWt(e),Le);KP.delete(Ye)}}function q(Le,Ye,je){let We=Le.getState().knownSelectors.has(je);if(We&&Ye.atomValues.has(je))return On(Ye.atomValues.get(je));let tt=FRe(Le,Ye,je);return tt.state!=="loading"&&We&&Ye.atomValues.set(je,tt),tt}function R(Le,Ye,je,We,tt){return Ye.then(Qe=>{if(!d())return Ce(Le,tt),PS;let kt=B6(Qe);return $e(je,ie(We),kt),j(Le,je,new Set(We.keys()),tt),k(Le,kt,tt),{__value:Qe,__key:e}}).catch(Qe=>{if(!d())return Ce(Le,tt),PS;if(Se(Le,tt)&&Ke(We,Le,tt),Gi(Qe))return D(Le,Qe,je,We,tt);let kt=OS(Qe);throw $e(je,ie(We),kt),j(Le,je,new Set(We.keys()),tt),k(Le,kt,tt),Qe})}function D(Le,Ye,je,We,tt){return Ye.then(Qe=>{if(!d())return Ce(Le,tt),PS;if(Qe instanceof dWt)return qc("Selector was released while it had dependencies"),PS;let{__key:kt,__value:Gt}=Qe!=null?Qe:{},bt=!0;kt!=null&&(je.atomValues.set(kt,B6(Gt)),bt=!1);let be=J(Le,je);if(be&&be.state==="hasValue")return qe(be,Le),{__value:be.contents,__key:e};if(!Se(Le,tt)){var Yt;let nr=_e(je);if((nr==null||(Yt=nr.latestLoadable)===null||Yt===void 0?void 0:Yt.state)==="loading")return nr.latestLoadable.contents}let[Ut,Vt]=ee(Le,je,tt,bt);if(Se(Le,tt)&&Ke(Vt,Le,tt),Ie(Ut),Ut.state!=="loading"&&($e(je,ie(Vt),Ut),j(Le,je,new Set(Vt.keys()),tt),k(Le,Ut,tt)),Ut.state==="hasError")throw Ut.contents;return Ut.state==="hasValue"?{__value:Ut.contents,__key:e}:Ut.contents}).catch(Qe=>{if(!d())return Ce(Le,tt),PS;let kt=OS(Qe);throw $e(je,ie(We),OS(Qe)),j(Le,je,new Set(We.keys()),tt),k(Le,kt,tt),Qe})}function k(Le,Ye,je){Se(Le,je)&&(qe(Ye,Le),L(Ye,je))}function j(Le,Ye,je,We){var tt,Qe,kt,Gt;if(Se(Le,We)||Ye.version===((tt=Le.getState())===null||tt===void 0||(Qe=tt.currentTree)===null||Qe===void 0?void 0:Qe.version)||Ye.version===((kt=Le.getState())===null||kt===void 0||(Gt=kt.nextTree)===null||Gt===void 0?void 0:Gt.version)){var bt,be,Yt;yWt(new Map([[e,je]]),Le,(bt=(be=Le.getState())===null||be===void 0||(Yt=be.nextTree)===null||Yt===void 0?void 0:Yt.version)!==null&&bt!==void 0?bt:Le.getState().currentTree.version)}}function $(Le,Ye,je,We,tt){je.add(We),j(Le,Ye,je,tt)}function ee(Le,Ye,je,We=!1){let tt=AWt(e),Qe,kt=!1,Gt,bt=new Map,be=new Set;j(Le,Ye,be,je);function Yt(nr){let{key:yr}=nr;$(Le,Ye,be,yr,je);let Xt=We?FRe(Le,Ye,yr):q(Le,Ye,yr);if(Ie(Xt),bt.set(yr,Xt),Xt.state==="hasValue")return Xt.contents;throw Xt.contents}let Ut=!1,Vt=nr=>(...yr)=>{if(!Ut)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let Xt=IWt(Le),lr=nr({snapshot:Xt});if(typeof lr!="function")throw new Error("getCallback() expects a function that returns a function.");return lr(...yr)};try{Qe=t({get:Yt,getCallback:Vt}),Qe=bWt(Qe)?Yt(Qe):Qe,Ut=!0,Gi(Qe)?Qe=R(Le,Qe,Ye,bt,je).finally(tt):tt()}catch(nr){Qe=nr,Gi(Qe)?Qe=D(Le,Qe,Ye,bt,je).finally(tt):(kt=!0,tt())}return kt?Gt=OS(Qe):Gi(Qe)?Gt=mWt(Qe):Gt=B6(Qe),Ie(Gt),[Gt,bt]}function J(Le,Ye){let je=new Set,We=v(Le),tt=o.get(Qe=>(typeof Qe!="string"&&lO(!1),q(Le,Ye,Qe).contents),{onNodeVisit:Qe=>{Qe.type==="branch"&&Qe.nodeKey!==e&&typeof Qe.nodeKey=="string"&&je.add(Qe.nodeKey)}});return tt&&j(Le,Ye,je,We.latestExecutionId),tt}function ie(Le){return Array.from(Le.entries()).map(([Ye,je])=>[Ye,je.contents])}function ue(Le,Ye){let je=CWt(),[We,tt]=ee(Le,Ye,je);return qe(We,Le,tt,je,Ye),Ve(Ye,ie(tt),We),A(Le,We,je),We}function le(Le,Ye){let je=J(Le,Ye);if(je!=null)return qe(je,Le),je;let We=_e(Ye);if(We){let tt=We;return A(Le,On(tt.latestLoadable),On(tt.latestExecutionId)),On(tt.latestLoadable)}return ue(Le,Ye)}function _e(Le){var Ye;let[,je]=(Ye=Array.from(u.entries()).find(([We,tt])=>tt.latestLoadable!=null&&tt.latestExecutionId!=null&&!ze(We,Le)))!==null&&Ye!==void 0?Ye:[];return je}let Re=new Map;function ze(Le,Ye){var je,We;let tt=v(Le),Qe=(je=tt.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&je!==void 0?je:new Map,kt=Array(((We=Re.get(Ye.version))!==null&&We!==void 0?We:new Map).entries()),Gt=Re.has(Ye.version)&&kt.length===Qe.size&&kt.every(([bt,be])=>Qe.get(bt)===be);return Qe==null||Ye.version===tt.stateVersion||Gt?!1:(Re.set(Ye.version,new Map(Qe)),Array.from(Qe).some(([bt,be])=>q(Le,Ye,bt).contents!==be.contents))}function qe(Le,Ye,je,We,tt){let Qe=v(Ye);Le.state==="loading"?(Qe.depValuesDiscoveredSoFarDuringAsyncWork=je,Qe.latestExecutionId=We,Qe.latestLoadable=Le,Qe.stateVersion=tt==null?void 0:tt.version):(Qe.depValuesDiscoveredSoFarDuringAsyncWork=null,Qe.latestExecutionId=null,Qe.latestLoadable=null,Qe.stateVersion=null)}function Ve(Le,Ye,je){je.state!=="loading"&&$e(Le,Ye,je)}function Ke(Le,Ye,je){let We=v(Ye);Se(Ye,je)&&(We.depValuesDiscoveredSoFarDuringAsyncWork=Le)}function Ce(Le,Ye){Se(Le,Ye)&&u.delete(Le)}function Se(Le,Ye){let je=v(Le);return Ye===je.latestExecutionId}function Ie(Le){Le.state!=="loading"&&(Le.contents,void 0)}function Ge(Le){}function $e(Le,Ye,je){Le.atomValues.set(e,je),o.set(Ye,je)}function Ze(Le){if(LS.includes(e)){let Ye=`Recoil selector has circular dependencies: ${LS.slice(LS.indexOf(e)).join(" \u2192 ")}`;return OS(new Error(Ye))}LS.push(e);try{return Le()}finally{LS.pop()}}function Pe(Le,Ye){return o.get(We=>{typeof We!="string"&&lO(!1);let tt=vWt(Le,Ye,We);return tt==null?void 0:tt.contents})}function at(Le,Ye){return Ze(()=>le(Le,Ye))}function wt(Le){Le.atomValues.delete(e)}return i!=null?jRe({key:e,nodeType:"selector",peek:Pe,get:at,set:(Ye,je,We)=>{let tt=!1,Qe=new Map;function kt({key:Yt}){if(tt)throw new Error("Recoil: Async selector sets are not currently supported.");let Ut=q(Ye,je,Yt);if(Ie(Ut),Ut.state==="hasValue")return Ut.contents;throw Ut.state==="loading"?new xWt(Yt):Ut.contents}function Gt(Yt,Ut){if(tt)throw new Error("Recoil: Async selector sets are not currently supported.");let Vt=typeof Ut=="function"?Ut(kt(Yt)):Ut;gWt(Ye,je,Yt.key,Vt).forEach((yr,Xt)=>Qe.set(Xt,yr))}function bt(Yt){Gt(Yt,_Wt)}let be=i({set:Gt,get:kt,reset:bt},We);if(be!==void 0)throw Gi(be)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return tt=!0,Qe},init:x,invalidate:wt,shouldDeleteConfigOnRelease:S,dangerouslyAllowMutability:r.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a}):jRe({key:e,nodeType:"selector",peek:Pe,get:at,init:x,invalidate:wt,shouldDeleteConfigOnRelease:S,dangerouslyAllowMutability:r.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a})}var fO=RWt,{loadableWithError:zRe,loadableWithPromise:BRe,loadableWithValue:DS}=zS,{DEFAULT_VALUE:cv,DefaultValue:M_,getConfigDeletionHandler:NPe,registerNode:PWt,setConfigDeletionHandler:OWt}=Xl,{isRecoilValue:LWt}=sd,{markRecoilValueModified:DWt,setRecoilValue:URe,setRecoilValueLoadable:NWt}=hv,{retainedByOptionWithDefault:qWt}=US;function kWt(r){let{key:e,persistence_UNSTABLE:t}=r,n=qWt(r.retainedBy_UNSTABLE),i=0,o=Gi(r.default)?BRe(r.default.then(R=>(o=DS(R),{__key:e,__value:R})).catch(R=>{throw o=zRe(R),R})):DS(r.default),a,u=new Map;function h(R,D){let k=D.then(j=>{var $,ee;return((ee=(($=R.getState().nextTree)!==null&&$!==void 0?$:R.getState().currentTree).atomValues.get(e))===null||ee===void 0?void 0:ee.contents)===k&&URe(R,q,j),{__key:e,__value:j}}).catch(j=>{var $,ee;throw((ee=(($=R.getState().nextTree)!==null&&$!==void 0?$:R.getState().currentTree).atomValues.get(e))===null||ee===void 0?void 0:ee.contents)===k&&NWt(R,q,zRe(j)),j});return k}function d(R,D,k){i++;let j=R.getState().knownAtoms.has(e);if(R.getState().knownAtoms.add(e),o.state==="loading"){let le=()=>{var _e;((_e=R.getState().nextTree)!==null&&_e!==void 0?_e:R.getState().currentTree).atomValues.has(e)||DWt(R,q)};o.contents.then(le).catch(le)}let $=cv,ee=null;if(r.effects_UNSTABLE!=null&&!j){let le=!0,_e=qe=>Ve=>{if(le){let Ke=$ instanceof M_||Gi($)?o.state==="hasValue"?o.contents:cv:$;$=typeof Ve=="function"?Ve(Ke):Ve,Gi($)&&($=$.then(Ce=>(ee={effect:qe,value:Ce},Ce)))}else{if(Gi(Ve))throw new Error("Setting atoms to async values is not implemented.");typeof Ve!="function"&&(ee={effect:qe,value:Ve}),URe(R,q,typeof Ve=="function"?Ke=>{let Ce=Ve(Ke);return ee={effect:qe,value:Ce},Ce}:Ve)}},Re=qe=>()=>_e(qe)(cv),ze=qe=>Ve=>{R.subscribeToTransactions(Ke=>{var Ce;let{currentTree:Se,previousTree:Ie}=Ke.getState();Ie||(qc("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),Ie=Se);let Ge=(Ce=Se.atomValues.get(e))!==null&&Ce!==void 0?Ce:o;if(Ge.state==="hasValue"){var $e,Ze,Pe,at;let wt=Ge.contents,Le=($e=Ie.atomValues.get(e))!==null&&$e!==void 0?$e:o,Ye=Le.state==="hasValue"?Le.contents:cv;((Ze=ee)===null||Ze===void 0?void 0:Ze.effect)!==qe||((Pe=ee)===null||Pe===void 0?void 0:Pe.value)!==wt?Ve(wt,Ye):((at=ee)===null||at===void 0?void 0:at.effect)===qe&&(ee=null)}},e)};for(let qe of(J=r.effects_UNSTABLE)!==null&&J!==void 0?J:[]){var J;let Ve=qe({node:q,trigger:k,setSelf:_e(qe),resetSelf:Re(qe),onSet:ze(qe)});if(Ve!=null){var ie;u.set(R,[...((ie=u.get(R))!==null&&ie!==void 0?ie:[]),Ve])}}le=!1}if(!($ instanceof M_)){var ue;let le=Gi($)?BRe(h(R,$)):DS($);D.atomValues.set(e,le),(ue=R.getState().nextTree)===null||ue===void 0||ue.atomValues.set(e,le)}return()=>{var le;i--,(le=u.get(R))===null||le===void 0||le.forEach(_e=>_e()),u.delete(R),R.getState().knownAtoms.delete(e)}}function v(R,D){var k,j,$;return(k=(j=D.atomValues.get(e))!==null&&j!==void 0?j:($=a)===null||$===void 0?void 0:$[1])!==null&&k!==void 0?k:o}function x(R,D){if(D.atomValues.has(e))return On(D.atomValues.get(e));if(D.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(t==null)return uH(`Tried to restore a persisted value for atom ${e} but it has no persistence settings.`),o;let k=D.nonvalidatedAtoms.get(e),j=t.validator(k,cv);return a=j instanceof M_?o:DS(j),a}else return o}function S(){a=void 0}function A(R,D,k){if(D.atomValues.has(e)){let j=On(D.atomValues.get(e));if(j.state==="hasValue"&&k===j.contents)return new Map}else if(!D.nonvalidatedAtoms.has(e)&&k instanceof M_)return new Map;return a=void 0,new Map().set(e,DS(k))}function L(){return NPe(e)!==void 0&&i<=0}let q=PWt({key:e,nodeType:"atom",peek:v,get:x,set:A,init:d,invalidate:S,shouldDeleteConfigOnRelease:L,dangerouslyAllowMutability:r.dangerouslyAllowMutability,persistence_UNSTABLE:r.persistence_UNSTABLE?{type:r.persistence_UNSTABLE.type,backButton:r.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return q}function qPe(r){let n=r,{default:e}=n,t=co(n,["default"]);return LWt(e)?FWt(En(Tt({},t),{default:e})):kWt(En(Tt({},t),{default:e}))}function FWt(r){let e=qPe(En(Tt({},r),{default:cv,persistence_UNSTABLE:r.persistence_UNSTABLE===void 0?void 0:En(Tt({},r.persistence_UNSTABLE),{validator:n=>n instanceof M_?n:On(r.persistence_UNSTABLE).validator(n,cv)}),effects_UNSTABLE:r.effects_UNSTABLE})),t=fO({key:`${r.key}__withFallback`,get:({get:n})=>{let i=n(e);return i instanceof M_?r.default:i},set:({set:n},i)=>n(e,i),dangerouslyAllowMutability:r.dangerouslyAllowMutability});return OWt(t.key,NPe(r.key)),t}var kPe=qPe,rH=class{constructor(e){var t;hn(this,"_map",void 0),hn(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(t=e==null?void 0:e.mapKey)!==null&&t!==void 0?t:n=>n}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}},jWt={MapCache:rH},zWt=jWt.MapCache,BWt=Object.freeze({__proto__:null,MapCache:zWt}),{LRUCache:VRe}=DPe,{MapCache:UWt}=BWt,XP={equality:"reference",eviction:"none",maxSize:1/0};function VWt({equality:r=XP.equality,eviction:e=XP.eviction,maxSize:t=XP.maxSize}=XP){let n=GWt(r);return $Wt(e,t,n)}function GWt(r){switch(r){case"reference":return e=>e;case"value":return e=>wO(e);}throw new Error(`Unrecognized equality policy ${r}`)}function $Wt(r,e,t){switch(r){case"keep-all":return new UWt({mapKey:t});case"lru":return new VRe({mapKey:t,maxSize:On(e)});case"most-recent":return new VRe({mapKey:t,maxSize:1});}throw new Error(`Unrecognized eviction policy ${r}`)}var FPe=VWt,{setConfigDeletionHandler:HWt}=Xl;function WWt(r){var e,t;let n=FPe({equality:(e=(t=r.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let a=n.get(i);if(a!=null)return a;let v=r,{cachePolicyForParams_UNSTABLE:u}=v,h=co(v,["cachePolicyForParams_UNSTABLE"]),d=kPe(En(Tt({},h),{key:`${r.key}__${(o=wO(i))!==null&&o!==void 0?o:"void"}`,default:typeof r.default=="function"?r.default(i):r.default,retainedBy_UNSTABLE:typeof r.retainedBy_UNSTABLE=="function"?r.retainedBy_UNSTABLE(i):r.retainedBy_UNSTABLE,effects_UNSTABLE:typeof r.effects_UNSTABLE=="function"?r.effects_UNSTABLE(i):r.effects_UNSTABLE}));return n.set(i,d),HWt(d.key,()=>{n.delete(i)}),d}}var ZWt=WWt,{setConfigDeletionHandler:YWt}=Xl,KWt=0;function XWt(r){var e,t;let n=FPe({equality:(e=(t=r.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let a=n.get(i);if(a!=null)return a;let u=`${r.key}__selectorFamily/${(o=wO(i,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${KWt++}`,h=S=>r.get(i)(S),d=r.cachePolicy_UNSTABLE,v=typeof r.retainedBy_UNSTABLE=="function"?r.retainedBy_UNSTABLE(i):r.retainedBy_UNSTABLE,x;if(r.set!=null){let S=r.set;x=fO({key:u,get:h,set:(L,q)=>S(i)(L,q),cachePolicy_UNSTABLE:d,dangerouslyAllowMutability:r.dangerouslyAllowMutability,retainedBy_UNSTABLE:v})}else x=fO({key:u,get:h,cachePolicy_UNSTABLE:d,dangerouslyAllowMutability:r.dangerouslyAllowMutability,retainedBy_UNSTABLE:v});return n.set(i,x),YWt(x.key,()=>{n.delete(i)}),x}}var ld=XWt,JWt=ld({key:"__constant",get:r=>()=>r,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function QWt(r){return JWt(r)}var e8t=QWt,t8t=ld({key:"__error",get:r=>()=>{throw new Error(r)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function r8t(r){return t8t(r)}var n8t=r8t;function i8t(r){return r}var o8t=i8t,{loadableWithError:jPe,loadableWithPromise:zPe,loadableWithValue:BPe}=zS;function bO(r,e){let t=Array(e.length).fill(void 0),n=Array(e.length).fill(void 0);for(let[i,o]of e.entries())try{t[i]=r(o)}catch(a){n[i]=a}return[t,n]}function a8t(r){return r!=null&&!Gi(r)}function SO(r){return Array.isArray(r)?r:Object.getOwnPropertyNames(r).map(e=>r[e])}function IH(r){return r!=null&&typeof r=="object"&&r.hasOwnProperty("__value")?r.__value:r}function nH(r,e){return Array.isArray(r)?e:Object.getOwnPropertyNames(r).reduce((t,n,i)=>En(Tt({},t),{[n]:e[i]}),{})}function P_(r,e,t){let n=t.map((i,o)=>i==null?BPe(e[o]):Gi(i)?zPe(i):jPe(i));return nH(r,n)}function s8t(r,e){return e.map((t,n)=>t===void 0?r[n]:t)}var l8t=ld({key:"__waitForNone",get:r=>({get:e})=>{let t=SO(r),[n,i]=bO(e,t);return P_(r,n,i)},dangerouslyAllowMutability:!0}),u8t=ld({key:"__waitForAny",get:r=>({get:e})=>{let t=SO(r),[n,i]=bO(e,t);return i.some(o=>!Gi(o))?P_(r,n,i):new Promise(o=>{for(let[a,u]of i.entries())Gi(u)&&u.then(h=>{n[a]=IH(h),i[a]=void 0,o(P_(r,n,i))}).catch(h=>{i[a]=h,o(P_(r,n,i))})})},dangerouslyAllowMutability:!0}),c8t=ld({key:"__waitForAll",get:r=>({get:e})=>{let t=SO(r),[n,i]=bO(e,t);if(i.every(a=>a==null))return nH(r,n);let o=i.find(a8t);if(o!=null)throw o;return Promise.all(i).then(a=>nH(r,s8t(n,a).map(IH)))},dangerouslyAllowMutability:!0}),f8t=ld({key:"__waitForAllSettled",get:r=>({get:e})=>{let t=SO(r),[n,i]=bO(e,t);return i.every(o=>!Gi(o))?P_(r,n,i):Promise.all(i.map((o,a)=>Gi(o)?o.then(u=>{n[a]=IH(u),i[a]=void 0}).catch(u=>{n[a]=void 0,i[a]=u}):null)).then(()=>P_(r,n,i))},dangerouslyAllowMutability:!0}),h8t=ld({key:"__noWait",get:r=>({get:e})=>{try{return BPe(e(r))}catch(t){return Gi(t)?zPe(t):jPe(t)}},dangerouslyAllowMutability:!0}),p8t={waitForNone:l8t,waitForAny:u8t,waitForAll:c8t,waitForAllSettled:f8t,noWait:h8t},{batchUpdates:d8t,setBatcher:m8t}=dH,{DefaultValue:v8t}=Xl,{RecoilRoot:g8t}=yO,{isRecoilValue:y8t}=sd,{retentionZone:_8t}=pO,{freshSnapshot:x8t}=gO,{useGotoRecoilSnapshot:w8t,useRecoilCallback:b8t,useRecoilSnapshot:S8t,useRecoilState:E8t,useRecoilStateLoadable:T8t,useRecoilTransaction:I8t,useRecoilTransactionObserver:A8t,useRecoilValue:C8t,useRecoilValueLoadable:M8t,useResetRecoilState:R8t,useRetain:P8t,useSetRecoilState:O8t,useSetUnvalidatedAtomValues:L8t,useTransactionObservation_DEPRECATED:D8t}=UHt,{noWait:N8t,waitForAll:q8t,waitForAllSettled:k8t,waitForAny:F8t,waitForNone:j8t}=p8t,an={DefaultValue:v8t,RecoilRoot:g8t,useRecoilBridgeAcrossReactRoots_UNSTABLE:XHt,atom:kPe,selector:fO,retentionZone:_8t,atomFamily:ZWt,selectorFamily:ld,constSelector:e8t,errorSelector:n8t,readOnlySelector:o8t,useRecoilValue:C8t,useRecoilValueLoadable:M8t,useRecoilState:E8t,useRecoilStateLoadable:T8t,useSetRecoilState:O8t,useResetRecoilState:R8t,useGetRecoilValueInfo_UNSTABLE:HHt,useRetain:P8t,useRecoilCallback:b8t,useRecoilTransaction_UNSTABLE:I8t,useGotoRecoilSnapshot:w8t,useRecoilSnapshot:S8t,useRecoilTransactionObserver_UNSTABLE:A8t,useTransactionObservation_UNSTABLE:D8t,useSetUnvalidatedAtomValues_UNSTABLE:L8t,noWait:N8t,waitForNone:j8t,waitForAny:F8t,waitForAll:q8t,waitForAllSettled:k8t,isRecoilValue:y8t,batchUpdates:d8t,setBatcher:m8t,snapshot_UNSTABLE:x8t},UPr=an.DefaultValue,UPe=an.RecoilRoot,VPr=an.useRecoilBridgeAcrossReactRoots_UNSTABLE,Zr=an.atom,AH=an.selector,GPr=an.retentionZone,$Pr=an.atomFamily,HPr=an.selectorFamily,WPr=an.constSelector,ZPr=an.errorSelector,YPr=an.readOnlySelector,Jl=an.useRecoilValue,KPr=an.useRecoilValueLoadable,EO=an.useRecoilState,XPr=an.useRecoilStateLoadable,Ql=an.useSetRecoilState,JPr=an.useResetRecoilState,QPr=an.useGetRecoilValueInfo_UNSTABLE,eOr=an.useRetain,tOr=an.useRecoilCallback,rOr=an.useRecoilTransaction_UNSTABLE,nOr=an.useGotoRecoilSnapshot,iOr=an.useRecoilSnapshot,oOr=an.useRecoilTransactionObserver_UNSTABLE,aOr=an.useTransactionObservation_UNSTABLE,sOr=an.useSetUnvalidatedAtomValues_UNSTABLE,lOr=an.noWait,uOr=an.waitForNone,cOr=an.waitForAny,fOr=an.waitForAll,hOr=an.waitForAllSettled,pOr=an.isRecoilValue,dOr=an.batchUpdates,mOr=an.setBatcher,vOr=an.snapshot_UNSTABLE;var Hi=Me(ht(),1);var Uje=Me(RH(),1);function sOe(r){return fo(this,null,function*(){let e=ro.getGeoreferenceApiClient(),t="/transformations/",n={map_id:r,additional_properties:!0},i=yield e.get(t,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given map_id.")})}function lOe(r,e){return fo(this,null,function*(){let t=ro.getGeoreferenceApiClient(),n="/transformations/",i={dry_run:!1},o=En(Tt({},e),{map_id:r}),a=yield t.post(n,o,{params:i});if(a.status===200)return a.data;console.error("Something went wrong while trying to confirm transformation for given map_id and params.")})}function uOe(r,e,t){return fo(this,null,function*(){let n=ro.getGeoreferenceApiClient(),i="/transformations/",o=Object.assign({map_id:r,params:e,overwrites:0},t!==void 0?{clip:t}:{}),a={dry_run:!0},u=yield n.post(i,o,{params:a});if(u.status===200)return u.data;console.error("Something went wrong while trying to fetch transformation for given map_id and params.")})}function cOe(r){return fo(this,null,function*(){let e=ro.getGeoreferenceApiClient(),t="/transformations/",n={transformation_id:r},i={dry_run:!0},o=yield e.post(t,n,{params:i});if(o.status===200)return o.data;console.error("Something went wrong while trying to fetch transformation preview for given transformation_id.")})}var ud=Zr({key:"notificationState",default:null});var ROr=Zr({key:"helperMessageState",default:null}),TO=Zr({key:"isLoadingState",default:!1}),IO=Zr({key:"mapMetadataState",default:null}),AO=Zr({key:"rectifiedImageParamsState",default:null}),CO=Zr({key:"sourceViewParamsState",default:null,dangerouslyAllowMutability:!0}),MO=Zr({key:"targetViewParamsState",default:null,dangerouslyAllowMutability:!0}),RO=Zr({key:"transformationState",default:null});var GS=Me(ht(),1),eh=Me(Qr(),1);function yOe(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=yOe(r[e]))&&(n&&(n+=" "),n+=t);else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function X8t(){for(var r,e,t=0,n="";t<arguments.length;)(r=arguments[t++])&&(e=yOe(r))&&(n&&(n+=" "),n+=e);return n}var Os=X8t;var PH=Me(ht(),1),PO=Me(Qr(),1);var _Oe=({name:r,color:e,size:t})=>PH.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${r}`,fill:e,width:t,height:t},PH.default.createElement("use",{xlinkHref:`${ro.getSettings().ICON_SPRITE}#${r}`}));_Oe.propTypes={name:PO.default.string.isRequired,color:PO.default.string,size:PO.default.number};var xOe=_Oe;var VS=xOe;var wOe=r=>{let{activeControl:e=null,className:t="",disabled:n=!1,iconClassName:i="",IconComponent:o,id:a="unknown",onClick:u,title:h="unknown"}=r;return GS.default.createElement("button",{onClick:()=>{u(a)},className:Os("vkf-control-button",t,e===a&&"active",n&&"disabled"),disabled:n},o===void 0?GS.default.createElement(VS,{name:i,size:24}):GS.default.createElement(o,{glyph:i}),GS.default.createElement("span",{className:"text"},h))};wOe.propTypes={activeControl:eh.default.string,className:eh.default.string,disabled:eh.default.bool,id:eh.default.string.isRequired,iconClassName:eh.default.string,IconComponent:eh.default.elementType,onClick:eh.default.func.isRequired,title:eh.default.string};var bOe=wOe;var $S=bOe;var Gu=Me(ht(),1),Ns=Me(Qr(),1);var $H=Me(wLe(),1);function wr(){return wr=$H.default?$H.default.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},wr.apply(null,arguments)}var VLe=Me(OLe(),1);var YH=Me(ULe(),1);function $O(r,e){return $O=YH.default?YH.default.bind():function(t,n){return t.__proto__=n,t},$O(r,e)}function Ln(r,e){r.prototype=(0,VLe.default)(e.prototype),r.prototype.constructor=r,$O(r,e)}function Dn(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}function sn(){return sn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},sn.apply(null,arguments)}function XS(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}var XH=Me(ht());var rDr=Me(WO()),rYt=function(){};function $Le(r,e){var t={};return Object.keys(r).forEach(function(n){if(t[F_(n)]=rYt,0)var i}),t}function KH(r,e){return r[e]!==void 0}function F_(r){return"default"+r.charAt(0).toUpperCase()+r.substr(1)}function HLe(r){return!!r&&(typeof r!="function"||r.prototype&&r.prototype.isReactComponent)}function j_(r,e){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},j_(r,e)}function ZLe(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,j_(r,e)}var z_=Me(ht()),JLe=Me(QH()),QLe=Me(WO());var iYt="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function JS(r,e,t){t===void 0&&(t=[]);var n=r.displayName||r.name||"Component",i=HLe(r),o=Object.keys(e),a=o.map(F_);i||!t.length||(0,QLe.default)(!1);var u=function(d){ZLe(v,d);function v(){for(var S,A=arguments.length,L=new Array(A),q=0;q<A;q++)L[q]=arguments[q];S=d.call.apply(d,[this].concat(L))||this,S.handlers=Object.create(null),o.forEach(function(D){var k=e[D],j=function(ee){if(S.props[k]){var J;S._notifying=!0;for(var ie=arguments.length,ue=new Array(ie>1?ie-1:0),le=1;le<ie;le++)ue[le-1]=arguments[le];(J=S.props)[k].apply(J,[ee].concat(ue)),S._notifying=!1}S.unmounted||S.setState(function(_e){var Re,ze=_e.values;return{values:sn(Object.create(null),ze,(Re={},Re[D]=ee,Re))}})};S.handlers[k]=j}),t.length&&(S.attachRef=function(D){S.inner=D});var R=Object.create(null);return o.forEach(function(D){R[D]=S.props[F_(D)]}),S.state={values:R,prevProps:{}},S}var x=v.prototype;return x.shouldComponentUpdate=function(){return!this._notifying},v.getDerivedStateFromProps=function(A,L){var q=L.values,R=L.prevProps,D={values:sn(Object.create(null),q),prevProps:{}};return o.forEach(function(k){D.prevProps[k]=A[k],!KH(A,k)&&KH(R,k)&&(D.values[k]=A[F_(k)])}),D},x.componentWillUnmount=function(){this.unmounted=!0},x.render=function(){var A=this,L=this.props,q=L.innerRef,R=XS(L,["innerRef"]);a.forEach(function(k){delete R[k]});var D={};return o.forEach(function(k){var j=A.props[k];D[k]=j!==void 0?j:A.state.values[k]}),z_.default.createElement(r,sn({},R,D,this.handlers,{ref:q||this.attachRef}))},v}(z_.default.Component);(0,JLe.polyfill)(u),u.displayName="Uncontrolled("+n+")",u.propTypes=sn({innerRef:function(){}},$Le(e,n)),t.forEach(function(d){u.prototype[d]=function(){var x;return(x=this.inner)[d].apply(x,arguments)}});var h=u;return z_.default.forwardRef&&(h=z_.default.forwardRef(function(d,v){return z_.default.createElement(u,sn({},d,{innerRef:v,__source:{fileName:iYt,lineNumber:128},__self:this}))}),h.propTypes=u.propTypes),h.ControlledComponent=r,h.deferControlTo=function(d,v,x){return v===void 0&&(v={}),JS(d,sn({},e,v),x)},h}var nW=Me(tW());var sDe=Me(WO()),ZO=Me(Qr());var Fc={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},rW={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var aDe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},QS={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function iW(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return typeof i=="function"?r.apply(void 0,t):function(o){return r.apply(void 0,t.concat([o]))}}}function bi(r,e){var t=(r.bsClass||"").trim();return t==null&&(0,sDe.default)(!1),t+(e?"-"+e:"")}var Si=iW(function(r,e){var t=e.propTypes||(e.propTypes={}),n=e.defaultProps||(e.defaultProps={});return t.bsClass=ZO.default.string,n.bsClass=r,e}),lDe=iW(function(r,e,t){typeof e!="string"&&(t=e,e=void 0);var n=t.STYLES||[],i=t.propTypes||{};r.forEach(function(u){n.indexOf(u)===-1&&n.push(u)});var o=ZO.default.oneOf(n);if(t.STYLES=n,o._values=n,t.propTypes=wr({},i,{bsStyle:o}),e!==void 0){var a=t.defaultProps||(t.defaultProps={});a.bsStyle=e}return t}),B_=iW(function(r,e,t){typeof e!="string"&&(t=e,e=void 0);var n=t.SIZES||[],i=t.propTypes||{};r.forEach(function(u){n.indexOf(u)===-1&&n.push(u)});var o=[];n.forEach(function(u){var h=rW[u];h&&h!==u&&o.push(h),o.push(u)});var a=ZO.default.oneOf(o);return a._values=o,t.SIZES=n,t.propTypes=wr({},i,{bsSize:a}),e!==void 0&&(t.defaultProps||(t.defaultProps={}),t.defaultProps.bsSize=e),t});function Sa(r){var e,t=(e={},e[bi(r)]=!0,e);if(r.bsSize){var n=rW[r.bsSize]||r.bsSize;t[bi(r,n)]=!0}return r.bsStyle&&(t[bi(r,r.bsStyle)]=!0),t}function uDe(r){return{bsClass:r.bsClass,bsSize:r.bsSize,bsStyle:r.bsStyle,bsRole:r.bsRole}}function cDe(r){return r==="bsClass"||r==="bsSize"||r==="bsStyle"||r==="bsRole"}function Ls(r){var e={};return(0,nW.default)(r).forEach(function(t){var n=t[0],i=t[1];cDe(n)||(e[n]=i)}),[uDe(r),e]}function YO(r,e){var t={};e.forEach(function(i){t[i]=!0});var n={};return(0,nW.default)(r).forEach(function(i){var o=i[0],a=i[1];!cDe(o)&&!t[o]&&(n[o]=a)}),[uDe(r),n]}var ra=Me(ht());function cYt(r,e,t){var n=0;return ra.default.Children.map(r,function(i){return ra.default.isValidElement(i)?e.call(t,i,n++):i})}function fYt(r,e,t){var n=0;ra.default.Children.forEach(r,function(i){ra.default.isValidElement(i)&&e.call(t,i,n++)})}function hYt(r){var e=0;return ra.default.Children.forEach(r,function(t){ra.default.isValidElement(t)&&++e}),e}function pYt(r,e,t){var n=0,i=[];return ra.default.Children.forEach(r,function(o){ra.default.isValidElement(o)&&e.call(t,o,n++)&&i.push(o)}),i}function dYt(r,e,t){var n=0,i;return ra.default.Children.forEach(r,function(o){i||ra.default.isValidElement(o)&&e.call(t,o,n++)&&(i=o)}),i}function mYt(r,e,t){var n=0,i=!0;return ra.default.Children.forEach(r,function(o){i&&ra.default.isValidElement(o)&&(e.call(t,o,n++)||(i=!1))}),i}function vYt(r,e,t){var n=0,i=!1;return ra.default.Children.forEach(r,function(o){i||ra.default.isValidElement(o)&&e.call(t,o,n++)&&(i=!0)}),i}function gYt(r){var e=[];return ra.default.Children.forEach(r,function(t){ra.default.isValidElement(t)&&e.push(t)}),e}var pv={map:cYt,forEach:fYt,count:hYt,find:dYt,filter:pYt,every:mYt,some:vYt,toArray:gYt};var XO=Me(Qr()),oW=Me(eE());var PDr=XO.default.oneOfType([XO.default.string,XO.default.number]);function hDe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,oW.default)(function(n,i,o){var a;return e.every(function(u){return pv.some(n.children,function(h){return h.props.bsRole===u})?!0:(a=u,!1)}),a?new Error("(children) "+o+" - Missing a required child with bsRole: "+(a+". "+o+" must have at least one child of each of ")+("the following bsRoles: "+e.join(", "))):null})}function pDe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,oW.default)(function(n,i,o){var a;return e.every(function(u){var h=pv.filter(n.children,function(d){return d.props.bsRole===u});return h.length>1?(a=u,!1):!0}),a?new Error("(children) "+o+" - Duplicate children detected of bsRole: "+(a+". Only one child each allowed with the following ")+("bsRoles: "+e.join(", "))):null})}var aW=Me(Qr()),tE=Me(ht()),xYt={label:aW.default.string.isRequired,onClick:aW.default.func},wYt={label:"Close"},sW=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.label,a=i.onClick;return tE.default.createElement("button",{type:"button",className:"close",onClick:a},tE.default.createElement("span",{"aria-hidden":"true"},"\xD7"),tE.default.createElement("span",{className:"sr-only"},o))},e}(tE.default.Component);sW.propTypes=xYt;sW.defaultProps=wYt;var xDe=sW;function In(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var fW=Me(ht()),rh=Me(Qr()),CDe=Me(th());function LYt(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];n.apply(this,u),i.apply(this,u)}},null)}var go=LYt;var DYt={href:rh.default.string,onClick:rh.default.func,onKeyDown:rh.default.func,disabled:rh.default.bool,role:rh.default.string,tabIndex:rh.default.oneOfType([rh.default.number,rh.default.string]),componentClass:CDe.default},NYt={componentClass:"a"};function ADe(r){return!r||r.trim()==="#"}var hW=function(r){Ln(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(In(In(o))),o.handleKeyDown=o.handleKeyDown.bind(In(In(o))),o}var t=e.prototype;return t.handleClick=function(i){var o=this.props,a=o.disabled,u=o.href,h=o.onClick;if((a||ADe(u))&&i.preventDefault(),a){i.stopPropagation();return}h&&h(i)},t.handleKeyDown=function(i){i.key===" "&&(i.preventDefault(),this.handleClick(i))},t.render=function(){var i=this.props,o=i.componentClass,a=i.disabled,u=i.onKeyDown,h=Dn(i,["componentClass","disabled","onKeyDown"]);return ADe(h.href)&&(h.role=h.role||"button",h.href=h.href||"#"),a&&(h.tabIndex=-1,h.style=wr({pointerEvents:"none"},h.style)),fW.default.createElement(o,wr({},h,{onClick:this.handleClick,onKeyDown:go(this.handleKeyDown,u)}))},e}(fW.default.Component);hW.propTypes=DYt;hW.defaultProps=NYt;var U_=hW;var MDe=Me(_De());var pW=Me(hi()),uL=Me(ht()),dv=Me(Qr()),RDe=Me(th());var qYt={active:dv.default.bool,disabled:dv.default.bool,block:dv.default.bool,onClick:dv.default.func,componentClass:RDe.default,href:dv.default.string,type:dv.default.oneOf(["button","reset","submit"])},kYt={active:!1,block:!1,disabled:!1},dW=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.renderAnchor=function(i,o){return uL.default.createElement(U_,wr({},i,{className:(0,pW.default)(o,i.disabled&&"disabled")}))},t.renderButton=function(i,o){var a=i.componentClass,u=Dn(i,["componentClass"]),h=a||"button";return uL.default.createElement(h,wr({},u,{type:u.type||"button",className:o}))},t.render=function(){var i,o=this.props,a=o.active,u=o.block,h=o.className,d=Dn(o,["active","block","className"]),v=Ls(d),x=v[0],S=v[1],A=wr({},Sa(x),(i={active:a},i[bi(x,"block")]=u,i)),L=(0,pW.default)(h,A);return S.href?this.renderAnchor(S,L):this.renderButton(S,L)},e}(uL.default.Component);dW.propTypes=qYt;dW.defaultProps=kYt;var hd=Si("btn",B_([Fc.LARGE,Fc.SMALL,Fc.XSMALL],lDe((0,MDe.default)(aDe).concat([QS.DEFAULT,QS.PRIMARY,QS.LINK]),QS.DEFAULT,dW)));var ODe=Me(hi()),mW=Me(ht()),hL=Me(Qr()),LDe=Me(fL());var UYt={vertical:hL.default.bool,justified:hL.default.bool,block:(0,LDe.default)(hL.default.bool,function(r){var e=r.block,t=r.vertical;return e&&!t?new Error("`block` requires `vertical` to be set to have any effect"):null})},VYt={block:!1,justified:!1,vertical:!1},vW=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i,o=this.props,a=o.block,u=o.justified,h=o.vertical,d=o.className,v=Dn(o,["block","justified","vertical","className"]),x=Ls(v),S=x[0],A=x[1],L=wr({},Sa(S),(i={},i[bi(S)]=!h,i[bi(S,"vertical")]=h,i[bi(S,"justified")]=u,i[bi(hd.defaultProps,"block")]=a,i));return mW.default.createElement("div",wr({},A,{className:(0,ODe.default)(d,L)}))},e}(mW.default.Component);vW.propTypes=UYt;vW.defaultProps=VYt;var DDe=Si("btn-group",vW);var x2e=Me(hi()),w2e=Me(AW()),b2e=Me(lE()),kL=Me(MW()),W_=Me(ht()),Ja=Me(Qr()),$W=Me(mo()),S2e=Me(fL()),E2e=Me(th()),T2e=Me(mNe());var t2r=Me(gW());var m2e=Me(i2e());var v2e=Me(hi()),pE=Me(MW()),dE=Me(ht()),ih=Me(Qr()),g2e=Me(mo()),y2e=Me(d2e());var J9t={open:ih.default.bool,pullRight:ih.default.bool,onClose:ih.default.func,labelledBy:ih.default.oneOfType([ih.default.string,ih.default.number]),onSelect:ih.default.func,rootCloseEvent:ih.default.oneOf(["click","mousedown"])},Q9t={bsRole:"menu",pullRight:!1},BW=function(r){Ln(e,r);function e(n){var i;return i=r.call(this,n)||this,i.handleRootClose=i.handleRootClose.bind(In(In(i))),i.handleKeyDown=i.handleKeyDown.bind(In(In(i))),i}var t=e.prototype;return t.getFocusableMenuItems=function(){var i=g2e.default.findDOMNode(this);return i?(0,m2e.default)(i.querySelectorAll("[tabIndex=\"-1\"]")):[]},t.getItemsAndActiveIndex=function(){var i=this.getFocusableMenuItems(),o=i.indexOf(document.activeElement);return{items:i,activeIndex:o}},t.focusNext=function(){var i=this.getItemsAndActiveIndex(),o=i.items,a=i.activeIndex;if(o.length!==0){var u=a===o.length-1?0:a+1;o[u].focus()}},t.focusPrevious=function(){var i=this.getItemsAndActiveIndex(),o=i.items,a=i.activeIndex;if(o.length!==0){var u=a===0?o.length-1:a-1;o[u].focus()}},t.handleKeyDown=function(i){switch(i.keyCode){case pE.default.codes.down:this.focusNext(),i.preventDefault();break;case pE.default.codes.up:this.focusPrevious(),i.preventDefault();break;case pE.default.codes.esc:case pE.default.codes.tab:this.props.onClose(i,{source:"keydown"});break;default:}},t.handleRootClose=function(i){this.props.onClose(i,{source:"rootClose"})},t.render=function(){var i,o=this,a=this.props,u=a.open,h=a.pullRight,d=a.labelledBy,v=a.onSelect,x=a.className,S=a.rootCloseEvent,A=a.children,L=Dn(a,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),q=YO(L,["onClose"]),R=q[0],D=q[1],k=wr({},Sa(R),(i={},i[bi(R,"right")]=h,i));return dE.default.createElement(y2e.default,{disabled:!u,onRootClose:this.handleRootClose,event:S},dE.default.createElement("ul",wr({},D,{role:"menu",className:(0,v2e.default)(x,k),"aria-labelledby":d}),pv.map(A,function(j){return dE.default.cloneElement(j,{onKeyDown:go(j.props.onKeyDown,o.handleKeyDown),onSelect:go(j.props.onSelect,v)})})))},e}(dE.default.Component);BW.propTypes=J9t;BW.defaultProps=Q9t;var UW=Si("dropdown-menu",BW);var qL=Me(ht()),mE=Me(Qr()),_2e=Me(hi());var eXt={noCaret:mE.default.bool,open:mE.default.bool,title:mE.default.string,useAnchor:mE.default.bool},tXt={open:!1,useAnchor:!1,bsRole:"toggle"},VW=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.noCaret,a=i.open,u=i.useAnchor,h=i.bsClass,d=i.className,v=i.children,x=Dn(i,["noCaret","open","useAnchor","bsClass","className","children"]);delete x.bsRole;var S=u?U_:hd,A=!o;return qL.default.createElement(S,wr({},x,{role:"button",className:(0,_2e.default)(d,h),"aria-haspopup":!0,"aria-expanded":a}),v||x.title,A&&" ",A&&qL.default.createElement("span",{className:"caret"}))},e}(qL.default.Component);VW.propTypes=eXt;VW.defaultProps=tXt;var GW=Si("dropdown-toggle",VW);var I2e=GW.defaultProps.bsRole,HW=UW.defaultProps.bsRole,rXt={dropup:Ja.default.bool,id:(0,T2e.default)(Ja.default.oneOfType([Ja.default.string,Ja.default.number])),componentClass:E2e.default,children:(0,S2e.default)(hDe(I2e,HW),pDe(HW)),disabled:Ja.default.bool,pullRight:Ja.default.bool,open:Ja.default.bool,defaultOpen:Ja.default.bool,onToggle:Ja.default.func,onSelect:Ja.default.func,role:Ja.default.string,rootCloseEvent:Ja.default.oneOf(["click","mousedown"]),onMouseEnter:Ja.default.func,onMouseLeave:Ja.default.func},nXt={componentClass:DDe},FL=function(r){Ln(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(In(In(o))),o.handleKeyDown=o.handleKeyDown.bind(In(In(o))),o.handleClose=o.handleClose.bind(In(In(o))),o._focusInDropdown=!1,o.lastOpenEventType=null,o}var t=e.prototype;return t.componentDidMount=function(){this.focusNextOnOpen()},t.UNSAFE_componentWillUpdate=function(i){!i.open&&this.props.open&&(this._focusInDropdown=(0,b2e.default)($W.default.findDOMNode(this.menu),(0,w2e.default)(document)))},t.componentDidUpdate=function(i){var o=this.props.open,a=i.open;o&&!a&&this.focusNextOnOpen(),!o&&a&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},t.focus=function(){var i=$W.default.findDOMNode(this.toggle);i&&i.focus&&i.focus()},t.focusNextOnOpen=function(){var i=this.menu;!i||!i.focusNext||(this.lastOpenEventType==="keydown"||this.props.role==="menuitem")&&i.focusNext()},t.handleClick=function(i){this.props.disabled||this.toggleOpen(i,{source:"click"})},t.handleClose=function(i,o){this.props.open&&this.toggleOpen(i,o)},t.handleKeyDown=function(i){if(!this.props.disabled)switch(i.keyCode){case kL.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(i,{source:"keydown"}),i.preventDefault();break;case kL.default.codes.esc:case kL.default.codes.tab:this.handleClose(i,{source:"keydown"});break;default:}},t.toggleOpen=function(i,o){var a=!this.props.open;a&&(this.lastOpenEventType=o.source),this.props.onToggle&&this.props.onToggle(a,i,o)},t.renderMenu=function(i,o){var a=this,u=o.id,h=o.onSelect,d=o.rootCloseEvent,v=Dn(o,["id","onSelect","rootCloseEvent"]),x=function(A){a.menu=A};return typeof i.ref=="string"||(x=go(i.ref,x)),(0,W_.cloneElement)(i,wr({},v,{ref:x,labelledBy:u,bsClass:bi(v,"menu"),onClose:go(i.props.onClose,this.handleClose),onSelect:go(i.props.onSelect,h,function(S,A){return a.handleClose(A,{source:"select"})}),rootCloseEvent:d}))},t.renderToggle=function(i,o){var a=this,u=function(d){a.toggle=d};return typeof i.ref=="string"||(u=go(i.ref,u)),(0,W_.cloneElement)(i,wr({},o,{ref:u,bsClass:bi(o,"toggle"),onClick:go(i.props.onClick,this.handleClick),onKeyDown:go(i.props.onKeyDown,this.handleKeyDown)}))},t.render=function(){var i,o=this,a=this.props,u=a.componentClass,h=a.id,d=a.dropup,v=a.disabled,x=a.pullRight,S=a.open,A=a.onSelect,L=a.role,q=a.bsClass,R=a.className,D=a.rootCloseEvent,k=a.children,j=Dn(a,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete j.onToggle;var $=(i={},i[q]=!0,i.open=S,i.disabled=v,i);return d&&($[q]=!1,$.dropup=!0),W_.default.createElement(u,wr({},j,{className:(0,x2e.default)(R,$)}),pv.map(k,function(ee){switch(ee.props.bsRole){case I2e:return o.renderToggle(ee,{id:h,disabled:v,open:S,role:L,bsClass:q});case HW:return o.renderMenu(ee,{id:h,open:S,pullRight:x,bsClass:q,onSelect:A,rootCloseEvent:D});default:return ee;}}))},e}(W_.default.Component);FL.propTypes=rXt;FL.defaultProps=nXt;Si("dropdown",FL);var WW=JS(FL,{open:"onToggle"});WW.Toggle=GW;WW.Menu=UW;var vE=WW;var A2e=Me(tW());function ZW(r,e){var t=e.propTypes,n={},i={};return(0,A2e.default)(r).forEach(function(o){var a=o[0],u=o[1];t[a]?n[a]=u:i[a]=u}),[n,i]}var C2e=Me(hi()),zL=Me(ht()),eu=Me(Qr()),Z_=Me(aNe()),jL,iXt={in:eu.default.bool,mountOnEnter:eu.default.bool,unmountOnExit:eu.default.bool,appear:eu.default.bool,timeout:eu.default.number,onEnter:eu.default.func,onEntering:eu.default.func,onEntered:eu.default.func,onExit:eu.default.func,onExiting:eu.default.func,onExited:eu.default.func},oXt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},aXt=(jL={},jL[Z_.ENTERING]="in",jL[Z_.ENTERED]="in",jL),YW=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.className,a=i.children,u=Dn(i,["className","children"]);return zL.default.createElement(Z_.default,u,function(h,d){return zL.default.cloneElement(a,wr({},d,{className:(0,C2e.default)("fade",o,a.props.className,aXt[h])}))})},e}(zL.default.Component);YW.propTypes=iXt;YW.defaultProps=oXt;var KW=YW;var BL=Me(hi()),Y_=Me(ht()),oh=Me(Qr()),M2e=Me(fL());var sXt={active:oh.default.bool,disabled:oh.default.bool,divider:(0,M2e.default)(oh.default.bool,function(r){var e=r.divider,t=r.children;return e&&t?new Error("Children will not be rendered for dividers"):null}),eventKey:oh.default.any,header:oh.default.bool,href:oh.default.string,onClick:oh.default.func,onSelect:oh.default.func},lXt={divider:!1,disabled:!1,header:!1},XW=function(r){Ln(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleClick=o.handleClick.bind(In(In(o))),o}var t=e.prototype;return t.handleClick=function(i){var o=this.props,a=o.href,u=o.disabled,h=o.onSelect,d=o.eventKey;(!a||u)&&i.preventDefault(),!u&&h&&h(d,i)},t.render=function(){var i=this.props,o=i.active,a=i.disabled,u=i.divider,h=i.header,d=i.onClick,v=i.className,x=i.style,S=Dn(i,["active","disabled","divider","header","onClick","className","style"]),A=YO(S,["eventKey","onSelect"]),L=A[0],q=A[1];return u?(q.children=void 0,Y_.default.createElement("li",wr({},q,{role:"separator",className:(0,BL.default)(v,"divider"),style:x}))):h?Y_.default.createElement("li",wr({},q,{role:"heading",className:(0,BL.default)(v,bi(L,"header")),style:x})):Y_.default.createElement("li",{role:"presentation",className:(0,BL.default)(v,{active:o,disabled:a}),style:x},Y_.default.createElement(U_,wr({},q,{role:"menuitem",tabIndex:"-1",onClick:go(d,this.handleClick)})))},e}(Y_.default.Component);XW.propTypes=sXt;XW.defaultProps=lXt;var JW=Si("dropdown",XW);var b8=Me(hi()),S8=Me(U2e()),ake=Me(aE()),ske=Me(jc()),E8=Me(t8()),J_=Me(ht()),ko=Me(Qr()),lke=Me(mo()),Q_=Me(Hqe()),uke=Me(o8()),cke=Me(th());var Wqe=Me(hi()),m8=Me(ht()),Zqe=Me(th());var _Jt={componentClass:Zqe.default},xJt={componentClass:"div"},v8=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,a=i.className,u=Dn(i,["componentClass","className"]),h=Ls(u),d=h[0],v=h[1],x=Sa(d);return m8.default.createElement(o,wr({},v,{className:(0,Wqe.default)(a,x)}))},e}(m8.default.Component);v8.propTypes=_Jt;v8.defaultProps=xJt;var Yqe=Si("modal-body",v8);var g8=Me(hi()),_E=Me(ht()),Kqe=Me(Qr());var wJt={dialogClassName:Kqe.default.string},Xqe=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i,o=this.props,a=o.dialogClassName,u=o.className,h=o.style,d=o.children,v=o.onMouseDownDialog,x=Dn(o,["dialogClassName","className","style","children","onMouseDownDialog"]),S=Ls(x),A=S[0],L=S[1],q=bi(A),R=wr({display:"block"},h),D=wr({},Sa(A),(i={},i[q]=!1,i[bi(A,"dialog")]=!0,i));return _E.default.createElement("div",wr({},L,{tabIndex:"-1",role:"dialog",style:R,className:(0,g8.default)(u,q)}),_E.default.createElement("div",{className:(0,g8.default)(a,D),onMouseDown:v},_E.default.createElement("div",{className:bi(A,"content"),role:"document"},d)))},e}(_E.default.Component);Xqe.propTypes=wJt;var cD=Si("modal",B_([Fc.LARGE,Fc.SMALL],Xqe));var Jqe=Me(hi()),y8=Me(ht()),Qqe=Me(th());var bJt={componentClass:Qqe.default},SJt={componentClass:"div"},_8=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,a=i.className,u=Dn(i,["componentClass","className"]),h=Ls(u),d=h[0],v=h[1],x=Sa(d);return y8.default.createElement(o,wr({},v,{className:(0,Jqe.default)(a,x)}))},e}(y8.default.Component);_8.propTypes=bJt;_8.defaultProps=SJt;var eke=Si("modal-footer",_8);var tke=Me(hi()),X_=Me(Qr()),fD=Me(ht());var EJt={closeLabel:X_.default.string,closeButton:X_.default.bool,onHide:X_.default.func},TJt={closeLabel:"Close",closeButton:!1},IJt={$bs_modal:X_.default.shape({onHide:X_.default.func})},hD=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.closeLabel,a=i.closeButton,u=i.onHide,h=i.className,d=i.children,v=Dn(i,["closeLabel","closeButton","onHide","className","children"]),x=this.context.$bs_modal,S=Ls(v),A=S[0],L=S[1],q=Sa(A);return fD.default.createElement("div",wr({},L,{className:(0,tke.default)(h,q)}),a&&fD.default.createElement(xDe,{label:o,onClick:go(x&&x.onHide,u)}),d)},e}(fD.default.Component);hD.propTypes=EJt;hD.defaultProps=TJt;hD.contextTypes=IJt;var rke=Si("modal-header",hD);var nke=Me(hi()),x8=Me(ht()),ike=Me(th());var AJt={componentClass:ike.default},CJt={componentClass:"h4"},w8=function(r){Ln(e,r);function e(){return r.apply(this,arguments)||this}var t=e.prototype;return t.render=function(){var i=this.props,o=i.componentClass,a=i.className,u=Dn(i,["componentClass","className"]),h=Ls(u),d=h[0],v=h[1],x=Sa(d);return x8.default.createElement(o,wr({},v,{className:(0,nke.default)(a,x)}))},e}(x8.default.Component);w8.propTypes=AJt;w8.defaultProps=CJt;var oke=Si("modal-title",w8);var MJt=wr({},Q_.default.propTypes,cD.propTypes,{backdrop:ko.default.oneOf(["static",!0,!1]),backdropClassName:ko.default.string,keyboard:ko.default.bool,animation:ko.default.bool,dialogComponentClass:cke.default,autoFocus:ko.default.bool,enforceFocus:ko.default.bool,restoreFocus:ko.default.bool,show:ko.default.bool,onHide:ko.default.func,onEnter:ko.default.func,onEntering:ko.default.func,onEntered:ko.default.func,onExit:ko.default.func,onExiting:ko.default.func,onExited:ko.default.func,container:Q_.default.propTypes.container}),RJt=wr({},Q_.default.defaultProps,{animation:!0,dialogComponentClass:cD}),PJt={$bs_modal:ko.default.shape({onHide:ko.default.func})};function OJt(r){return J_.default.createElement(KW,wr({},r,{timeout:dl.TRANSITION_DURATION}))}function LJt(r){return J_.default.createElement(KW,wr({},r,{timeout:dl.BACKDROP_TRANSITION_DURATION}))}var dl=function(r){Ln(e,r);function e(n,i){var o;return o=r.call(this,n,i)||this,o.handleDialogBackdropMouseDown=function(){o._waitingForMouseUp=!0},o.handleMouseUp=function(a){var u=o._modal.getDialogElement();o._waitingForMouseUp&&a.target===u&&(o._ignoreBackdropClick=!0),o._waitingForMouseUp=!1},o.handleEntering=o.handleEntering.bind(In(In(o))),o.handleExited=o.handleExited.bind(In(In(o))),o.handleWindowResize=o.handleWindowResize.bind(In(In(o))),o.handleDialogClick=o.handleDialogClick.bind(In(In(o))),o.setModalRef=o.setModalRef.bind(In(In(o))),o.state={style:{}},o}var t=e.prototype;return t.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},t.componentWillUnmount=function(){this.handleExited()},t.setModalRef=function(i){this._modal=i},t.handleDialogClick=function(i){if(this._ignoreBackdropClick||i.target!==i.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},t.handleEntering=function(){S8.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},t.handleExited=function(){S8.default.off(window,"resize",this.handleWindowResize)},t.handleWindowResize=function(){this.updateStyle()},t.updateStyle=function(){if(ske.default){var i=this._modal.getDialogElement(),o=i.scrollHeight,a=(0,ake.default)(i),u=(0,uke.default)(lke.default.findDOMNode(this.props.container||a.body)),h=o>a.documentElement.clientHeight;this.setState({style:{paddingRight:u&&!h?(0,E8.default)():void 0,paddingLeft:!u&&h?(0,E8.default)():void 0}})}},t.render=function(){var i=this.props,o=i.backdrop,a=i.backdropClassName,u=i.animation,h=i.show,d=i.dialogComponentClass,v=i.className,x=i.style,S=i.children,A=i.onEntering,L=i.onExited,q=Dn(i,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),R=ZW(q,Q_.default),D=R[0],k=R[1],j=h&&!u&&"in";return J_.default.createElement(Q_.default,wr({},D,{ref:this.setModalRef,show:h,containerClassName:bi(q,"open"),transition:u?OJt:void 0,backdrop:o,backdropTransition:u?LJt:void 0,backdropClassName:(0,b8.default)(bi(q,"backdrop"),a,j),onEntering:go(A,this.handleEntering),onExited:go(L,this.handleExited),onMouseUp:this.handleMouseUp}),J_.default.createElement(d,wr({},k,{style:wr({},this.state.style,x),className:(0,b8.default)(v,j),onClick:o===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),S))},e}(J_.default.Component);dl.propTypes=MJt;dl.defaultProps=RJt;dl.childContextTypes=PJt;dl.Body=Yqe;dl.Header=rke;dl.Title=oke;dl.Footer=eke;dl.Dialog=cD;dl.TRANSITION_DURATION=300;dl.BACKDROP_TRANSITION_DURATION=150;var _v=Si("modal",B_([Fc.LARGE,Fc.SMALL],dl));var T8={NONE:"control-none-gcp",ADD:"control-add-gcp",MOVE:"control-move-gcp",DEL:"control-del-gcp"},fke=r=>{let{id:e,activeControl:t,className:n="",parentIconClassName:i,defaultTitle:o="unknown",disableActiveBehavior:a=!1,IconComponent:u,options:h=[{id:T8.ADD,title:Tr("georef-setgcp"),iconClassName:"icon-point-add"},{id:T8.MOVE,title:Tr("georef-movegcp"),iconClassName:"icon-point-move"},{id:T8.DEL,title:Tr("georef-delgcp"),iconClassName:"icon-point-remove"}],onClick:d}=r,v=h.find(S=>S.id===t),x=S=>{d(S)};return Gu.default.createElement("div",{className:Os("vkf-control-dropdown",v&&!a?"active":"",n)},Gu.default.createElement(vE,{id:e,className:"btn-dropdown-vkf-control",bsStyle:"default",key:v?v.id:null},Gu.default.createElement(vE.Toggle,null,u===void 0?Gu.default.createElement(VS,{name:i,size:24}):Gu.default.createElement(u,{glyph:i}),v?v.title:o),Gu.default.createElement(vE.Menu,null,h.map(S=>Gu.default.createElement(JW,{key:S.id,eventKey:S.id,onClick:()=>x(S.id),className:Os("control-option",S.id)},u===void 0?Gu.default.createElement(VS,{name:`${S.iconClassName}`,size:24}):Gu.default.createElement(u,{glyph:S.iconClassName}),Gu.default.createElement("span",{className:"text"},S.title))))))};fke.propTypes={activeControl:Ns.default.string,className:Ns.default.string,defaultTitle:Ns.default.string,disableActiveBehavior:Ns.default.bool,IconComponent:Ns.default.elementType,id:Ns.default.string,parentIconClassName:Ns.default.string,options:Ns.default.arrayOf(Ns.default.shape({id:Ns.default.string.isRequired,title:Ns.default.string.isRequired,iconClassName:Ns.default.string.isRequired})),onClick:Ns.default.func.isRequired};var hke=fke;var I8=hke;var tu=Me(ht(),1);var A8=Me(Qr(),1);var pke=r=>{let{onClose:e,onSubmit:t}=r,n=()=>{e()},i=()=>{t()};return tu.default.createElement(tu.default.Fragment,null,tu.default.createElement(_v,{className:"vkf-dialog-confirm",show:!0,onHide:n},tu.default.createElement(_v.Header,null,tu.default.createElement(_v.Title,null,Tr("georef-dialog-title"))),tu.default.createElement(_v.Body,null,tu.default.createElement("div",{className:"dialog-content"},tu.default.createElement("p",null,Tr("georef-dialog-content")))),tu.default.createElement(_v.Footer,null,tu.default.createElement(hd,{onClick:n},Tr("georef-dialog-btn-cancel")),tu.default.createElement(hd,{onClick:i,bsStyle:"primary"},Tr("georef-dialog-btn-submit")))))};pke.propTypes={onClose:A8.default.func.isRequired,onSubmit:A8.default.func.isRequired};var dke=pke;var mke=dke;var e0=Me(ht(),1);var vke={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"};var gke={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},yke={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},_ke={STANDARD:"STANDARD",DRAW:"DRAW"};var Zqr=Zr({key:"activeBasemapId",default:ro.getSettings().BASEMAPS[0].id}),Yqr=Zr({key:"currentApplicationState",default:void 0}),DJt=Zr({key:"elementScreenSize",default:{map:{height:0,width:0}}});var Kqr=Zr({key:"facetState",default:{facets:[],georeference:!1}}),Xqr=Zr({key:"layoutState",default:yke.VERTICAL}),Jqr=Zr({key:"horizontalLayoutModeState",default:_ke.STANDARD}),Qqr=Zr({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),ekr=Zr({key:"map3dState",default:!1}),tkr=Zr({key:"mapCountState",default:10}),rkr=Zr({key:"searchIsLoadingState",default:!1}),NJt=Zr({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),nkr=Zr({key:"selectedOriginalMapIdState",default:void 0}),qJt=Zr({key:"selectedGeoJsonLayerIdState",default:void 0}),kJt=Zr({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),ikr=AH({key:"selectedGeoJsonLayerState",get:({get:r})=>{let e=r(qJt),t=r(NJt),n=r(kJt);return{selectedLayer:t.find(o=>o.getId()===e),lastUpdated:n}},dangerouslyAllowMutability:!0}),FJt=Zr({key:"selectedGeoJsonFeatureIdentifierState",default:null}),okr=AH({key:"isGeoJsonFeatureSelectedState",get:({get:r})=>{let e=r(FJt);if(!fl(e))return!1;let{featureId:t,sourceId:n}=e;return fl(t)&&fl(n)}}),akr=Zr({key:"timeExtentState",default:[1850,1970]}),jJt=[1850,1970],skr=Zr({key:"timeRangeState",default:jJt}),lkr=Zr({key:"baseMapStyleLayersState",default:[]}),ukr=Zr({key:"activeDialogState",default:vke.None}),ckr=Zr({key:"drawState",default:void 0}),fkr=Zr({key:"editedGeojsonState",default:null}),hkr=Zr({key:"metadataDrawState",default:null}),pkr=Zr({key:"vectorMapState",default:null}),dkr=Zr({key:"vectorMapActiveVersionDrawState",default:null}),mkr=Zr({key:"showDropZoneState",default:!1}),vkr=Zr({key:"addedFileState",default:null}),gkr=Zr({key:"addGeoJsonDialogState",default:!1}),ykr=Zr({key:"drawModePanelState",default:gke.NONE});function pD(r){let[e,t]=(0,e0.useState)(r);return(0,e0.useEffect)(()=>{t(r)},[r]),e}function ir(){return function(){throw new Error("Unimplemented abstract method.")}()}var zJt=0;function tr(r){return r.ol_uid||(r.ol_uid=String(++zJt))}var dD="6.15.1";var BJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),UJt=function(r){BJt(e,r);function e(t){var n=this,i=dD==="latest"?dD:"v"+dD.split("-")[0],o="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+t+" for details.";return n=r.call(this,o)||this,n.code=t,n.name="AssertionError",n.message=o,n}return e}(Error),mD=UJt;var VJt=function(){function r(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return r.prototype.preventDefault=function(){this.defaultPrevented=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r}();var Ei=VJt;var $u={PROPERTYCHANGE:"propertychange"};var GJt=function(){function r(){this.disposed=!1}return r.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},r}(),gd=GJt;function xke(r,e,t){for(var n,i,o=t||ml,a=0,u=r.length,h=!1;a<u;)n=a+(u-a>>1),i=+o(r[n],e),i<0?a=n+1:(u=n,h=!i);return h?a:~a}function ml(r,e){return r>e?1:r<e?-1:0}function t0(r,e){return r.indexOf(e)>=0}function r0(r,e,t){var n=r.length;if(r[0]<=e)return 0;if(e<=r[n-1])return n-1;var i=void 0;if(t>0){for(i=1;i<n;++i)if(r[i]<e)return i-1}else if(t<0){for(i=1;i<n;++i)if(r[i]<=e)return i}else for(i=1;i<n;++i){if(r[i]==e)return i;if(r[i]<e)return typeof t=="function"?t(e,r[i-1],r[i])>0?i-1:i:r[i-1]-e<e-r[i]?i-1:i}return n-1}function wke(r,e,t){for(;e<t;){var n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function Fo(r,e){for(var t=Array.isArray(e)?e:[e],n=t.length,i=0;i<n;i++)r[r.length]=t[i]}function Ta(r,e){var t=r.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function bke(r,e,t){var n=e||ml;return r.every(function(i,o){if(o===0)return!0;var a=n(r[o-1],i);return!(a>0||t&&a===0)})}function Qa(){return!0}function ru(){return!1}function vl(){}function Ske(r){var e=!1,t,n,i;return function(){var o=Array.prototype.slice.call(arguments);return(!e||this!==i||!Ta(o,n))&&(e=!0,i=this,n=o,t=r.apply(this,arguments)),t}}var Ur=typeof Object.assign=="function"?Object.assign:function(r,e){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(o!=null)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t};function qs(r){for(var e in r)delete r[e]}var vD=typeof Object.values=="function"?Object.values:function(r){var e=[];for(var t in r)e.push(r[t]);return e};function Hu(r){var e;for(e in r)return!1;return!e}var $Jt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),HJt=function(r){$Jt(e,r);function e(t){var n=r.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return e.prototype.addEventListener=function(t,n){if(!(!t||!n)){var i=this.listeners_||(this.listeners_={}),o=i[t]||(i[t]=[]);o.indexOf(n)===-1&&o.push(n)}},e.prototype.dispatchEvent=function(t){var n=typeof t=="string",i=n?t:t.type,o=this.listeners_&&this.listeners_[i];if(o){var a=n?new Ei(t):t;a.target||(a.target=this.eventTarget_||this);var u=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});i in u||(u[i]=0,h[i]=0),++u[i];for(var d,v=0,x=o.length;v<x;++v)if("handleEvent"in o[v]?d=o[v].handleEvent(a):d=o[v].call(this,a),d===!1||a.propagationStopped){d=!1;break}if(--u[i]===0){var S=h[i];for(delete h[i];S--;)this.removeEventListener(i,vl);delete u[i]}return d}},e.prototype.disposeInternal=function(){this.listeners_&&qs(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,n){var i=this.listeners_&&this.listeners_[t];if(i){var o=i.indexOf(n);o!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[o]=vl,++this.pendingRemovals_[t]):(i.splice(o,1),i.length===0&&delete this.listeners_[t]))}},e}(gd),ks=HJt;var Lt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ir(r,e,t,n,i){if(n&&n!==r&&(t=t.bind(n)),i){var o=t;t=function(){r.removeEventListener(e,t),o.apply(this,arguments)}}var a={target:r,type:e,listener:t};return r.addEventListener(e,t),a}function n0(r,e,t,n){return Ir(r,e,t,n,!0)}function Yr(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),qs(r))}var WJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gD=function(r){WJt(e,r);function e(){var t=r.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Lt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),a=0;a<i;++a)o[a]=Ir(this,t[a],n);return o}else return Ir(this,t,n)},e.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var o=t.length;i=new Array(o);for(var a=0;a<o;++a)i[a]=n0(this,t[a],n)}else i=n0(this,t,n);return n.ol_key=i,i},e.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)ZJt(i);else if(Array.isArray(t))for(var o=0,a=t.length;o<a;++o)this.removeEventListener(t[o],n);else this.removeEventListener(t,n)},e}(ks);gD.prototype.on;gD.prototype.once;gD.prototype.un;function ZJt(r){if(Array.isArray(r))for(var e=0,t=r.length;e<t;++e)Yr(r[e]);else Yr(r)}var yD=gD;var Tke=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eke=function(r){Tke(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.key=n,o.oldValue=i,o}return e}(Ei);var YJt=function(r){Tke(e,r);function e(t){var n=r.call(this)||this;return n.on,n.once,n.un,tr(n),n.values_=null,t!==void 0&&n.setProperties(t),n}return e.prototype.get=function(t){var n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Ur({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new Eke(i,t,n)),i=$u.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Eke(i,t,n))},e.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},e.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},e.prototype.set=function(t,n,i){var o=this.values_||(this.values_={});if(i)o[t]=n;else{var a=o[t];o[t]=n,a!==n&&this.notify(t,a)}},e.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},e.prototype.applyProperties=function(t){t.values_&&Ur(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,n){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],Hu(this.values_)&&(this.values_=null),n||this.notify(t,i)}},e}(yD),no=YJt;var ai={ADD:"add",REMOVE:"remove"};var Ake=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ike={LENGTH:"length"},_D=function(r){Ake(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.element=n,o.index=i,o}return e}(Ei);var KJt=function(r){Ake(e,r);function e(t,n){var i=r.call(this)||this;i.on,i.once,i.un;var o=n||{};if(i.unique_=!!o.unique,i.array_=t||[],i.unique_)for(var a=0,u=i.array_.length;a<u;++a)i.assertUnique_(i.array_[a],a);return i.updateLength_(),i}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},e.prototype.forEach=function(t){for(var n=this.array_,i=0,o=n.length;i<o;++i)t(n[i],i,n)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Ike.LENGTH)},e.prototype.insertAt=function(t,n){this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new _D(ai.ADD,n,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},e.prototype.remove=function(t){for(var n=this.array_,i=0,o=n.length;i<o;++i)if(n[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new _D(ai.REMOVE,n,t)),n},e.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(n,t);var o=this.array_[t];this.array_[t]=n,this.dispatchEvent(new _D(ai.REMOVE,o,t)),this.dispatchEvent(new _D(ai.ADD,n,t))}else{for(var a=i;a<t;++a)this.insertAt(a,void 0);this.insertAt(t,n)}},e.prototype.updateLength_=function(){this.set(Ike.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,n){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==n)throw new mD(58)},e}(no),Xn=KJt;function or(r,e){if(!r)throw new mD(e)}var XJt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),JJt=function(r){XJt(e,r);function e(t){var n=r.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var i=t;n.setGeometry(i)}else{var o=t;n.setProperties(o)}return n}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Yr(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Ir(t,Lt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?QJt(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(no);function QJt(r){if(typeof r=="function")return r;var e;if(Array.isArray(r))e=r;else{or(typeof r.getZIndex=="function",41);var t=r;e=[t]}return function(){return e}}var gl=JJt;var Wu={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},hFr={9001:Wu.METERS,9002:Wu.FEET,9003:Wu.USFEET,9101:Wu.RADIANS,9102:Wu.DEGREES};var Ia={};Ia[Wu.RADIANS]=6370997/(2*Math.PI);Ia[Wu.DEGREES]=2*Math.PI*6370997/360;Ia[Wu.FEET]=.3048;Ia[Wu.METERS]=1;Ia[Wu.USFEET]=1200/3937;var Aa=Wu;var yd=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",Cke=yd.indexOf("firefox")!==-1,eQt=yd.indexOf("safari")!==-1&&yd.indexOf("chrom")==-1,Mke=eQt&&!!(yd.indexOf("version/15.4")>=0||yd.match(/cpu (os|iphone os) 15_4 like mac os x/)),Rke=yd.indexOf("webkit")!==-1&&yd.indexOf("edge")==-1,Pke=yd.indexOf("macintosh")!==-1,xD=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,_d=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,Oke=typeof Image!="undefined"&&Image.prototype.decode,wD=function(){var r=!1;try{var e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return r}();var C8=new Array(6);function Li(){return[1,0,0,1,0,0]}function i0(r){return xE(r,1,0,0,1,0,0)}function M8(r,e){var t=r[0],n=r[1],i=r[2],o=r[3],a=r[4],u=r[5],h=e[0],d=e[1],v=e[2],x=e[3],S=e[4],A=e[5];return r[0]=t*h+i*d,r[1]=n*h+o*d,r[2]=t*v+i*x,r[3]=n*v+o*x,r[4]=t*S+i*A+a,r[5]=n*S+o*A+u,r}function xE(r,e,t,n,i,o,a){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=o,r[5]=a,r}function Dke(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function Nn(r,e){var t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function bD(r,e){var t=Math.cos(e),n=Math.sin(e);return M8(r,xE(C8,t,n,-n,t,0,0))}function wE(r,e,t){return M8(r,xE(C8,e,0,0,t,0,0))}function Nke(r,e,t){return xE(r,e,0,0,t,0,0)}function qke(r,e,t){return M8(r,xE(C8,1,0,0,1,e,t))}function io(r,e,t,n,i,o,a,u){var h=Math.sin(o),d=Math.cos(o);return r[0]=n*d,r[1]=i*h,r[2]=-n*h,r[3]=i*d,r[4]=a*n*d-u*n*h+e,r[5]=a*i*h+u*i*d+t,r}function o0(r,e){var t=tQt(e);or(t!==0,32);var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],h=e[5];return r[0]=a/t,r[1]=-i/t,r[2]=-o/t,r[3]=n/t,r[4]=(o*h-a*u)/t,r[5]=-(n*h-i*u)/t,r}function tQt(r){return r[0]*r[3]-r[1]*r[2]}var Lke;function SD(r){var e="matrix("+r.join(", ")+")";if(_d)return e;var t=Lke||(Lke=document.createElement("div"));return t.style.transform=e,t.style.transform}var oo={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ia(r){for(var e=Di(),t=0,n=r.length;t<n;++t)xv(e,r[t]);return e}function rQt(r,e,t){var n=Math.min.apply(null,r),i=Math.min.apply(null,e),o=Math.max.apply(null,r),a=Math.max.apply(null,e);return Ca(n,i,o,a,t)}function Zu(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function TD(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Fs(r,e,t){var n,i;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?i=r[1]-t:r[3]<t?i=t-r[3]:i=0,n*n+i*i}function es(r,e){return bE(r,e[0],e[1])}function ah(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function bE(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function ED(r,e){var t=r[0],n=r[1],i=r[2],o=r[3],a=e[0],u=e[1],h=oo.UNKNOWN;return a<t?h=h|oo.LEFT:a>i&&(h=h|oo.RIGHT),u<n?h=h|oo.BELOW:u>o&&(h=h|oo.ABOVE),h===oo.UNKNOWN&&(h=oo.INTERSECTING),h}function Di(){return[1/0,1/0,-1/0,-1/0]}function Ca(r,e,t,n,i){return i?(i[0]=r,i[1]=e,i[2]=t,i[3]=n,i):[r,e,t,n]}function xd(r){return Ca(1/0,1/0,-1/0,-1/0,r)}function a0(r,e){var t=r[0],n=r[1];return Ca(t,n,t,n,e)}function ID(r,e,t,n,i){var o=xd(i);return R8(o,r,e,t,n)}function sh(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function AD(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function xv(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function R8(r,e,t,n,i){for(;t<n;t+=i)nQt(r,e[t],e[t+1]);return r}function nQt(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function s0(r,e){var t;return t=e(l0(r)),t||(t=e(u0(r)),t)||(t=e(c0(r)),t)||(t=e(iu(r)),t)?t:!1}function SE(r){var e=0;return wv(r)||(e=ln(r)*yo(r)),e}function l0(r){return[r[0],r[1]]}function u0(r){return[r[2],r[1]]}function js(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function kke(r,e){var t;return e==="bottom-left"?t=l0(r):e==="bottom-right"?t=u0(r):e==="top-left"?t=iu(r):e==="top-right"?t=c0(r):or(!1,13),t}function EE(r,e,t,n,i){var o=CD(r,e,t,n),a=o[0],u=o[1],h=o[2],d=o[3],v=o[4],x=o[5],S=o[6],A=o[7];return Ca(Math.min(a,h,v,S),Math.min(u,d,x,A),Math.max(a,h,v,S),Math.max(u,d,x,A),i)}function CD(r,e,t,n){var i=e*n[0]/2,o=e*n[1]/2,a=Math.cos(t),u=Math.sin(t),h=i*a,d=i*u,v=o*a,x=o*u,S=r[0],A=r[1];return[S-h+x,A-d-v,S-h-x,A-d+v,S+h-x,A+d+v,S+h+x,A+d-v,S-h+x,A-d-v]}function yo(r){return r[3]-r[1]}function nu(r,e,t){var n=t||Di();return Ti(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):xd(n),n}function iu(r){return[r[0],r[3]]}function c0(r){return[r[2],r[3]]}function ln(r){return r[2]-r[0]}function Ti(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function wv(r){return r[2]<r[0]||r[3]<r[1]}function Fke(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function jke(r,e,t){var n=!1,i=ED(r,e),o=ED(r,t);if(i===oo.INTERSECTING||o===oo.INTERSECTING)n=!0;else{var a=r[0],u=r[1],h=r[2],d=r[3],v=e[0],x=e[1],S=t[0],A=t[1],L=(A-x)/(S-v),q=void 0,R=void 0;o&oo.ABOVE&&!(i&oo.ABOVE)&&(q=S-(A-d)/L,n=q>=a&&q<=h),!n&&o&oo.RIGHT&&!(i&oo.RIGHT)&&(R=A-(S-h)*L,n=R>=u&&R<=d),!n&&o&oo.BELOW&&!(i&oo.BELOW)&&(q=S-(A-u)/L,n=q>=a&&q<=h),!n&&o&oo.LEFT&&!(i&oo.LEFT)&&(R=A-(S-a)*L,n=R>=u&&R<=d)}return n}function zke(r,e,t,n){var i=[];if(n>1)for(var o=r[2]-r[0],a=r[3]-r[1],u=0;u<n;++u)i.push(r[0]+o*u/n,r[1],r[2],r[1]+a*u/n,r[2]-o*u/n,r[3],r[0],r[3]-a*u/n);else i=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]];e(i,i,2);for(var h=[],d=[],u=0,v=i.length;u<v;u+=2)h.push(i[u]),d.push(i[u+1]);return rQt(h,d,t)}function P8(r,e){var t=e.getExtent(),n=js(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){var i=ln(t),o=Math.floor((n[0]-t[0])/i),a=o*i;r[0]-=a,r[2]-=a}return r}function Bke(r,e){if(e.canWrapX()){var t=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[t[0],r[1],t[2],r[3]]];P8(r,e);var n=ln(t);if(ln(r)>n)return[[t[0],r[1],t[2],r[3]]];if(r[0]<t[0])return[[r[0]+n,r[1],t[2],r[3]],[t[0],r[1],r[2],r[3]]];if(r[2]>t[2])return[[r[0],r[1],t[2],r[3]],[t[0],r[1],r[2]-n,r[3]]]}return[r]}var iQt=function(){function r(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return r.prototype.canWrapX=function(){return this.canWrapX_},r.prototype.getCode=function(){return this.code_},r.prototype.getExtent=function(){return this.extent_},r.prototype.getUnits=function(){return this.units_},r.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ia[this.units_]},r.prototype.getWorldExtent=function(){return this.worldExtent_},r.prototype.getAxisOrientation=function(){return this.axisOrientation_},r.prototype.isGlobal=function(){return this.global_},r.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},r.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},r.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},r.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},r.prototype.setWorldExtent=function(e){this.worldExtent_=e},r.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},r.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},r}(),MD=iQt;function zn(r,e,t){return Math.min(Math.max(r,e),t)}var Uke=function(){var r;return"cosh"in Math?r=Math.cosh:r=function(e){var t=Math.exp(e);return(t+1/t)/2},r}(),RD=function(){var r;return"log2"in Math?r=Math.log2:r=function(e){return Math.log(e)*Math.LOG2E},r}();function Vke(r,e,t,n,i,o){var a=i-t,u=o-n;if(a!==0||u!==0){var h=((r-t)*a+(e-n)*u)/(a*a+u*u);h>1?(t=i,n=o):h>0&&(t+=a*h,n+=u*h)}return Yu(r,e,t,n)}function Yu(r,e,t,n){var i=t-r,o=n-e;return i*i+o*o}function Gke(r){for(var e=r.length,t=0;t<e;t++){for(var n=t,i=Math.abs(r[t][t]),o=t+1;o<e;o++){var a=Math.abs(r[o][t]);a>i&&(i=a,n=o)}if(i===0)return null;var u=r[n];r[n]=r[t],r[t]=u;for(var h=t+1;h<e;h++)for(var d=-r[h][t]/r[t][t],v=t;v<e+1;v++)t==v?r[h][v]=0:r[h][v]+=d*r[t][v]}for(var x=new Array(e),S=e-1;S>=0;S--){x[S]=r[S][e]/r[S][S];for(var A=S-1;A>=0;A--)r[A][e]-=r[A][S]*x[S]}return x}function f0(r){return r*Math.PI/180}function yl(r,e){var t=r%e;return t*e<0?t+e:t}function ou(r,e,t){return r+t*(e-r)}function $ke(r,e){var t=Math.pow(10,e);return Math.round(r*t)/t}function TE(r,e){return Math.floor($ke(r,e))}function IE(r,e){return Math.ceil($ke(r,e))}var oQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),AE=6378137,p0=Math.PI*AE,aQt=[-p0,-p0,p0,p0],sQt=[-180,-85,180,85],PD=AE*Math.log(Math.tan(Math.PI/2)),h0=function(r){oQt(e,r);function e(t){return r.call(this,{code:t,units:Aa.METERS,extent:aQt,global:!0,worldExtent:sQt,getPointResolution:function(n,i){return n/Uke(i[1]/AE)}})||this}return e}(MD),O8=[new h0("EPSG:3857"),new h0("EPSG:102100"),new h0("EPSG:102113"),new h0("EPSG:900913"),new h0("http://www.opengis.net/def/crs/EPSG/0/3857"),new h0("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Hke(r,e,t){var n=r.length,i=t>1?t:2,o=e;o===void 0&&(i>2?o=r.slice():o=new Array(n));for(var a=0;a<n;a+=i){o[a]=p0*r[a]/180;var u=AE*Math.log(Math.tan(Math.PI*(+r[a+1]+90)/360));u>PD?u=PD:u<-PD&&(u=-PD),o[a+1]=u}return o}function Wke(r,e,t){var n=r.length,i=t>1?t:2,o=e;o===void 0&&(i>2?o=r.slice():o=new Array(n));for(var a=0;a<n;a+=i)o[a]=180*r[a]/p0,o[a+1]=360*Math.atan(Math.exp(r[a+1]/AE))/Math.PI-90;return o}var lQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),uQt=6378137,Zke=[-180,-90,180,90],cQt=Math.PI*uQt/180,bv=function(r){lQt(e,r);function e(t,n){return r.call(this,{code:t,units:Aa.DEGREES,extent:Zke,axisOrientation:n,global:!0,metersPerUnit:cQt,worldExtent:Zke})||this}return e}(MD),L8=[new bv("CRS:84"),new bv("EPSG:4326","neu"),new bv("urn:ogc:def:crs:OGC:1.3:CRS84"),new bv("urn:ogc:def:crs:OGC:2:84"),new bv("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new bv("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new bv("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var D8={};function Yke(r){return D8[r]||D8[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Kke(r,e){D8[r]=e}var d0={};function CE(r,e,t){var n=r.getCode(),i=e.getCode();n in d0||(d0[n]={}),d0[n][i]=t}function Xke(r,e){var t;return r in d0&&e in d0[r]&&(t=d0[r][e]),t}function Jke(r,e){for(var t=(""+r).split("."),n=(""+e).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function Qke(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function N8(r,e){var t=r[0],n=r[1],i=e[0],o=e[1],a=i[0],u=i[1],h=o[0],d=o[1],v=h-a,x=d-u,S=v===0&&x===0?0:(v*(t-a)+x*(n-u))/(v*v+x*x||0),A,L;return S<=0?(A=a,L=u):S>=1?(A=h,L=d):(A=a+S*v,L=u+S*x),[A,L]}function ts(r,e){for(var t=!0,n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function m0(r,e){var t=Math.cos(e),n=Math.sin(e),i=r[0]*t-r[1]*n,o=r[1]*t+r[0]*n;return r[0]=i,r[1]=o,r}function eFe(r,e){return r[0]*=e,r[1]*=e,r}function wd(r,e){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function q8(r,e){return Math.sqrt(wd(r,e))}function tFe(r,e){return wd(r,N8(r,e))}function OD(r,e){if(e.canWrapX()){var t=ln(e.getExtent()),n=rFe(r,e,t);n&&(r[0]-=n*t)}return r}function rFe(r,e,t){var n=e.getExtent(),i=0;if(e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])){var o=t||ln(n);i=Math.floor((r[0]-n[0])/o)}return i}var fQt=6371008.8;function k8(r,e,t){var n=t||fQt,i=f0(r[1]),o=f0(e[1]),a=(o-i)/2,u=f0(e[0]-r[0])/2,h=Math.sin(a)*Math.sin(a)+Math.sin(u)*Math.sin(u)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var F8=!0;function iFe(r){var e=r===void 0?!0:r;F8=!e}function j8(r,e,t){var n;if(e!==void 0){for(var i=0,o=r.length;i<o;++i)e[i]=r[i];n=e}else n=r.slice();return n}function oFe(r,e,t){if(e!==void 0&&r!==e){for(var n=0,i=r.length;n<i;++n)e[n]=r[n];r=e}return r}function hQt(r){Kke(r.getCode(),r),CE(r,r,j8)}function pQt(r){r.forEach(hQt)}function Jn(r){return typeof r=="string"?Yke(r):r||null}function z8(r,e,t,n){r=Jn(r);var i,o=r.getPointResolutionFunc();if(o){if(i=o(e,t),n&&n!==r.getUnits()){var a=r.getMetersPerUnit();a&&(i=i*a/Ia[n])}}else{var u=r.getUnits();if(u==Aa.DEGREES&&!n||n==Aa.DEGREES)i=e;else{var h=ME(r,Jn("EPSG:4326"));if(h===oFe&&u!==Aa.DEGREES)i=e*r.getMetersPerUnit();else{var d=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];d=h(d,d,2);var v=k8(d.slice(0,2),d.slice(2,4)),x=k8(d.slice(4,6),d.slice(6,8));i=(v+x)/2}var a=n?Ia[n]:r.getMetersPerUnit();a!==void 0&&(i/=a)}}return i}function nFe(r){pQt(r),r.forEach(function(e){r.forEach(function(t){e!==t&&CE(e,t,j8)})})}function dQt(r,e,t,n){r.forEach(function(i){e.forEach(function(o){CE(i,o,t),CE(o,i,n)})})}function LD(r,e){return r?typeof r=="string"?Jn(r):r:Jn(e)}function Uc(r,e){if(r===e)return!0;var t=r.getUnits()===e.getUnits();if(r.getCode()===e.getCode())return t;var n=ME(r,e);return n===j8&&t}function ME(r,e){var t=r.getCode(),n=e.getCode(),i=Xke(t,n);return i||(i=oFe),i}function Sv(r,e){var t=Jn(r),n=Jn(e);return ME(t,n)}function Xu(r,e,t){var n=Sv(e,t);return n(r,void 0,r.length)}function Ev(r,e,t,n){var i=Sv(e,t);return zke(r,i,void 0,n)}var Ku=null;function au(){return Ku}function bd(r,e){return Ku?Xu(r,e,Ku):r}function pi(r,e){return Ku?Xu(r,Ku,e):(F8&&!ts(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(F8=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r)}function Sd(r,e){return Ku?Ev(r,e,Ku):r}function Ma(r,e){return Ku?Ev(r,Ku,e):r}function aFe(r,e){if(!Ku)return r;var t=Jn(e).getUnits(),n=Ku.getUnits();return t&&n?r*Ia[t]/Ia[n]:r}function mQt(){nFe(O8),nFe(L8),dQt(L8,O8,Hke,Wke)}mQt();function su(r,e,t,n,i,o){for(var a=o||[],u=0,h=e;h<t;h+=n){var d=r[h],v=r[h+1];a[u++]=i[0]*d+i[2]*v+i[4],a[u++]=i[1]*d+i[3]*v+i[5]}return o&&a.length!=u&&(a.length=u),a}function v0(r,e,t,n,i,o,a){for(var u=a||[],h=Math.cos(i),d=Math.sin(i),v=o[0],x=o[1],S=0,A=e;A<t;A+=n){var L=r[A]-v,q=r[A+1]-x;u[S++]=v+L*h-q*d,u[S++]=x+L*d+q*h;for(var R=A+2;R<A+n;++R)u[S++]=r[R]}return a&&u.length!=S&&(u.length=S),u}function sFe(r,e,t,n,i,o,a,u){for(var h=u||[],d=a[0],v=a[1],x=0,S=e;S<t;S+=n){var A=r[S]-d,L=r[S+1]-v;h[x++]=d+i*A,h[x++]=v+o*L;for(var q=S+2;q<S+n;++q)h[x++]=r[q]}return u&&h.length!=x&&(h.length=x),h}function DD(r,e,t,n,i,o,a){for(var u=a||[],h=0,d=e;d<t;d+=n){u[h++]=r[d]+i,u[h++]=r[d+1]+o;for(var v=d+2;v<d+n;++v)u[h++]=r[v]}return a&&u.length!=h&&(u.length=h),u}var vQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lFe=Li(),gQt=function(r){vQt(e,r);function e(){var t=r.call(this)||this;return t.extent_=Di(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Ske(function(n,i,o){if(!o)return this.getSimplifiedGeometry(i);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(i)}),t}return e.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},e.prototype.clone=function(){return ir()},e.prototype.closestPointXY=function(t,n,i,o){return ir()},e.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},e.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return ir()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&xd(n),this.extentRevision_=this.getRevision()}return Fke(this.extent_,t)},e.prototype.rotate=function(t,n){ir()},e.prototype.scale=function(t,n,i){ir()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return ir()},e.prototype.getType=function(){return ir()},e.prototype.applyTransform=function(t){ir()},e.prototype.intersectsExtent=function(t){return ir()},e.prototype.translate=function(t,n){ir()},e.prototype.transform=function(t,n){var i=Jn(t),o=i.getUnits()==Aa.TILE_PIXELS?function(a,u,h){var d=i.getExtent(),v=i.getWorldExtent(),x=yo(v)/yo(d);return io(lFe,v[0],v[3],x,-x,0,0,0),su(a,0,a.length,h,lFe,u),Sv(i,n)(a,u,h)}:Sv(i,n);return this.applyTransform(o),this},e}(no),ND=gQt;var yQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_Qt=function(r){yQt(e,r);function e(t){var n=r.call(this)||this;return n.geometries_=t||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Yr),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(Ir(this.geometries_[t],Lt.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){if(o<Fs(this.getExtent(),t,n))return o;for(var a=this.geometries_,u=0,h=a.length;u<h;++u)o=a[u].closestPointXY(t,n,i,o);return o},e.prototype.containsXY=function(t,n){for(var i=this.geometries_,o=0,a=i.length;o<a;++o)if(i[o].containsXY(t,n))return!0;return!1},e.prototype.computeExtent=function(t){xd(t);for(var n=this.geometries_,i=0,o=n.length;i<o;++i)AD(t,n[i].getExtent());return t},e.prototype.getGeometries=function(){return uFe(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].getType()===this.getType()?t=t.concat(n[i].getGeometriesArrayRecursive()):t.push(n[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],i=this.geometries_,o=!1,a=0,u=i.length;a<u;++a){var h=i[a],d=h.getSimplifiedGeometry(t);n.push(d),d!==h&&(o=!0)}if(o){var v=new e(null);return v.setGeometriesArray(n),v}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return"GeometryCollection"},e.prototype.intersectsExtent=function(t){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)if(n[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return this.geometries_.length===0},e.prototype.rotate=function(t,n){for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].rotate(t,n);this.changed()},e.prototype.scale=function(t,n,i){var o=i;o||(o=js(this.getExtent()));for(var a=this.geometries_,u=0,h=a.length;u<h;++u)a[u].scale(t,n,o);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(uFe(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,n){for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].translate(t,n);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),r.prototype.disposeInternal.call(this)},e}(ND);function uFe(r){for(var e=[],t=0,n=r.length;t<n;++t)e.push(r[t].clone());return e}var cFe=_Qt;var xQt=function(){function r(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return r.prototype.getReadOptions=function(e,t){var n;if(t){var i=t.dataProjection?Jn(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()===Aa.TILE_PIXELS&&(i=Jn(i),i.setWorldExtent(t.extent)),n={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(n)},r.prototype.adaptOptions=function(e){return Ur({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},r.prototype.getType=function(){return ir()},r.prototype.readFeature=function(e,t){return ir()},r.prototype.readFeatures=function(e,t){return ir()},r.prototype.readGeometry=function(e,t){return ir()},r.prototype.readProjection=function(e){return ir()},r.prototype.writeFeature=function(e,t){return ir()},r.prototype.writeFeatures=function(e,t){return ir()},r.prototype.writeGeometry=function(e,t){return ir()},r}(),fFe=xQt;function B8(r,e,t){var n=t?Jn(t.featureProjection):null,i=t?Jn(t.dataProjection):null,o;if(n&&i&&!Uc(n,i)?o=(e?r.clone():r).transform(e?n:i,e?i:n):o=r,e&&t&&t.decimals!==void 0){var a=Math.pow(10,t.decimals),u=function(h){for(var d=0,v=h.length;d<v;++d)h[d]=Math.round(h[d]*a)/a;return h};o===r&&(o=r.clone()),o.applyTransform(u)}return o}var wQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bQt=function(r){wQt(e,r);function e(){return r.call(this)||this}return e.prototype.getType=function(){return"json"},e.prototype.readFeature=function(t,n){return this.readFeatureFromObject(qD(t),this.getReadOptions(t,n))},e.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(qD(t),this.getReadOptions(t,n))},e.prototype.readFeatureFromObject=function(t,n){return ir()},e.prototype.readFeaturesFromObject=function(t,n){return ir()},e.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(qD(t),this.getReadOptions(t,n))},e.prototype.readGeometryFromObject=function(t,n){return ir()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(qD(t))},e.prototype.readProjectionFromObject=function(t){return ir()},e.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},e.prototype.writeFeatureObject=function(t,n){return ir()},e.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},e.prototype.writeFeaturesObject=function(t,n){return ir()},e.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},e.prototype.writeGeometryObject=function(t,n){return ir()},e}(fFe);function qD(r){if(typeof r=="string"){var e=JSON.parse(r);return e||null}else return r!==null?r:null}var hFe=bQt;var Bn={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var SQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),EQt=function(r){SQt(e,r);function e(){var t=r.call(this)||this;return t.layout=Bn.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return ID(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return ir()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,n){this.stride=RE(t),this.layout=t,this.flatCoordinates=n},e.prototype.setCoordinates=function(t,n){ir()},e.prototype.setLayout=function(t,n,i){var o;if(t)o=RE(t);else{for(var a=0;a<i;++a)if(n.length===0){this.layout=Bn.XY,this.stride=2;return}else n=n[0];o=n.length,t=TQt(o)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();v0(i,0,i.length,o,t,n,i),this.changed()}},e.prototype.scale=function(t,n,i){var o=n;o===void 0&&(o=t);var a=i;a||(a=js(this.getExtent()));var u=this.getFlatCoordinates();if(u){var h=this.getStride();sFe(u,0,u.length,h,t,o,a,u),this.changed()}},e.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();DD(i,0,i.length,o,t,n,i),this.changed()}},e}(ND);function TQt(r){var e;return r==2?e=Bn.XY:r==3?e=Bn.XYZ:r==4&&(e=Bn.XYZM),e}function RE(r){var e;return r==Bn.XY?e=2:r==Bn.XYZ||r==Bn.XYM?e=3:r==Bn.XYZM&&(e=4),e}function pFe(r,e,t){var n=r.getFlatCoordinates();if(n){var i=r.getStride();return su(n,0,n.length,i,e,t)}else return null}var Ra=EQt;function dFe(r,e,t,n,i,o,a){var u=r[e],h=r[e+1],d=r[t]-u,v=r[t+1]-h,x;if(d===0&&v===0)x=e;else{var S=((i-u)*d+(o-h)*v)/(d*d+v*v);if(S>1)x=t;else if(S>0){for(var A=0;A<n;++A)a[A]=ou(r[e+A],r[t+A],S);a.length=n;return}else x=e}for(var A=0;A<n;++A)a[A]=r[x+A];a.length=n}function PE(r,e,t,n,i){var o=r[e],a=r[e+1];for(e+=n;e<t;e+=n){var u=r[e],h=r[e+1],d=Yu(o,a,u,h);d>i&&(i=d),o=u,a=h}return i}function OE(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var u=t[o];i=PE(r,e,u,n,i),e=u}return i}function mFe(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var u=t[o];i=OE(r,e,u,n,i),e=u[u.length-1]}return i}function LE(r,e,t,n,i,o,a,u,h,d,v){if(e==t)return d;var x,S;if(i===0)if(S=Yu(a,u,r[e],r[e+1]),S<d){for(x=0;x<n;++x)h[x]=r[e+x];return h.length=n,S}else return d;for(var A=v||[NaN,NaN],L=e+n;L<t;)if(dFe(r,L-n,L,n,a,u,A),S=Yu(a,u,A[0],A[1]),S<d){for(d=S,x=0;x<n;++x)h[x]=A[x];h.length=n,L+=n}else L+=n*Math.max((Math.sqrt(S)-Math.sqrt(d))/i|0,1);if(o&&(dFe(r,t-n,e,n,a,u,A),S=Yu(a,u,A[0],A[1]),S<d)){for(d=S,x=0;x<n;++x)h[x]=A[x];h.length=n}return d}function DE(r,e,t,n,i,o,a,u,h,d,v){for(var x=v||[NaN,NaN],S=0,A=t.length;S<A;++S){var L=t[S];d=LE(r,e,L,n,i,o,a,u,h,d,x),e=L}return d}function vFe(r,e,t,n,i,o,a,u,h,d,v){for(var x=v||[NaN,NaN],S=0,A=t.length;S<A;++S){var L=t[S];d=DE(r,e,L,n,i,o,a,u,h,d,x),e=L[L.length-1]}return d}function kD(r,e,t,n){for(var i=0,o=t.length;i<o;++i)r[e++]=t[i];return e}function Tv(r,e,t,n){for(var i=0,o=t.length;i<o;++i)for(var a=t[i],u=0;u<n;++u)r[e++]=a[u];return e}function NE(r,e,t,n,i){for(var o=i||[],a=0,u=0,h=t.length;u<h;++u){var d=Tv(r,e,t[u],n);o[a++]=d,e=d}return o.length=a,o}function gFe(r,e,t,n,i){for(var o=i||[],a=0,u=0,h=t.length;u<h;++u){var d=NE(r,e,t[u],n,o[a]);o[a++]=d,e=d[d.length-1]}return o.length=a,o}function qE(r,e,t,n,i,o,a){var u=(t-e)/n;if(u<3){for(;e<t;e+=n)o[a++]=r[e],o[a++]=r[e+1];return a}var h=new Array(u);h[0]=1,h[u-1]=1;for(var d=[e,t-n],v=0;d.length>0;){for(var x=d.pop(),S=d.pop(),A=0,L=r[S],q=r[S+1],R=r[x],D=r[x+1],k=S+n;k<x;k+=n){var j=r[k],$=r[k+1],ee=Vke(j,$,L,q,R,D);ee>A&&(v=k,A=ee)}A>i&&(h[(v-e)/n]=1,S+n<v&&d.push(S,v),v+n<x&&d.push(v,x))}for(var k=0;k<u;++k)h[k]&&(o[a++]=r[e+k*n],o[a++]=r[e+k*n+1]);return a}function yFe(r,e,t,n,i,o,a,u){for(var h=0,d=t.length;h<d;++h){var v=t[h];a=qE(r,e,v,n,i,o,a),u.push(a),e=v}return a}function Ed(r,e){return e*Math.round(r/e)}function IQt(r,e,t,n,i,o,a){if(e==t)return a;var u=Ed(r[e],i),h=Ed(r[e+1],i);e+=n,o[a++]=u,o[a++]=h;var d,v;do if(d=Ed(r[e],i),v=Ed(r[e+1],i),e+=n,e==t)return o[a++]=d,o[a++]=v,a;while(d==u&&v==h);for(;e<t;){var x=Ed(r[e],i),S=Ed(r[e+1],i);if(e+=n,!(x==d&&S==v)){var A=d-u,L=v-h,q=x-u,R=S-h;if(A*R==L*q&&(A<0&&q<A||A==q||A>0&&q>A)&&(L<0&&R<L||L==R||L>0&&R>L)){d=x,v=S;continue}o[a++]=d,o[a++]=v,u=d,h=v,d=x,v=S}}return o[a++]=d,o[a++]=v,a}function U8(r,e,t,n,i,o,a,u){for(var h=0,d=t.length;h<d;++h){var v=t[h];a=IQt(r,e,v,n,i,o,a),u.push(a),e=v}return a}function _Fe(r,e,t,n,i,o,a,u){for(var h=0,d=t.length;h<d;++h){var v=t[h],x=[];a=U8(r,e,v,n,i,o,a,x),u.push(x),e=v[v.length-1]}return a}function FD(r,e,t,n,i){var o;for(e+=n;e<t;e+=n)if(o=i(r.slice(e-n,e),r.slice(e,e+n)),o)return o;return!1}function lu(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,u=e;u<t;u+=n)o[a++]=r.slice(u,u+n);return o.length=a,o}function Td(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,u=0,h=t.length;u<h;++u){var d=t[u];o[a++]=lu(r,e,d,n,o[a]),e=d}return o.length=a,o}function kE(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,u=0,h=t.length;u<h;++u){var d=t[u];o[a++]=Td(r,e,d,n,o[a]),e=d[d.length-1]}return o.length=a,o}function zD(r,e,t,n,i,o,a){var u,h,d=(t-e)/n;if(d===1)u=e;else if(d===2)u=e,h=i;else if(d!==0){for(var v=r[e],x=r[e+1],S=0,A=[0],L=e+n;L<t;L+=n){var q=r[L],R=r[L+1];S+=Math.sqrt((q-v)*(q-v)+(R-x)*(R-x)),A.push(S),v=q,x=R}var D=i*S,k=xke(A,D);k<0?(h=(D-A[-k-2])/(A[-k-1]-A[-k-2]),u=e+(-k-2)*n):u=e+k*n}for(var j=a>1?a:2,$=o||new Array(j),L=0;L<j;++L)$[L]=u===void 0?NaN:h===void 0?r[u+L]:ou(r[u+L],r[u+n+L],h);return $}function jD(r,e,t,n,i,o){if(t==e)return null;var a;if(i<r[e+n-1])return o?(a=r.slice(e,e+n),a[n-1]=i,a):null;if(r[t-1]<i)return o?(a=r.slice(t-n,t),a[n-1]=i,a):null;if(i==r[e+n-1])return r.slice(e,e+n);for(var u=e/n,h=t/n;u<h;){var d=u+h>>1;i<r[(d+1)*n-1]?h=d:u=d+1}var v=r[u*n-1];if(i==v)return r.slice((u-1)*n,(u-1)*n+n);var x=r[(u+1)*n-1],S=(i-v)/(x-v);a=[];for(var A=0;A<n-1;++A)a.push(ou(r[(u-1)*n+A],r[u*n+A],S));return a.push(i),a}function xFe(r,e,t,n,i,o,a){if(a)return jD(r,e,t[t.length-1],n,i,o);var u;if(i<r[n-1])return o?(u=r.slice(0,n),u[n-1]=i,u):null;if(r[r.length-1]<i)return o?(u=r.slice(r.length-n),u[n-1]=i,u):null;for(var h=0,d=t.length;h<d;++h){var v=t[h];if(e!=v){if(i<r[e+n-1])return null;if(i<=r[v-1])return jD(r,e,v,n,i,!1);e=v}}return null}function wFe(r,e,t,n,i){var o=s0(i,function(a){return!Id(r,e,t,n,a[0],a[1])});return!o}function Id(r,e,t,n,i,o){for(var a=0,u=r[t-n],h=r[t-n+1];e<t;e+=n){var d=r[e],v=r[e+1];h<=o?v>o&&(d-u)*(o-h)-(i-u)*(v-h)>0&&a++:v<=o&&(d-u)*(o-h)-(i-u)*(v-h)<0&&a--,u=d,h=v}return a!==0}function FE(r,e,t,n,i,o){if(t.length===0||!Id(r,e,t[0],n,i,o))return!1;for(var a=1,u=t.length;a<u;++a)if(Id(r,t[a-1],t[a],n,i,o))return!1;return!0}function bFe(r,e,t,n,i,o){if(t.length===0)return!1;for(var a=0,u=t.length;a<u;++a){var h=t[a];if(FE(r,e,h,n,i,o))return!0;e=h[h.length-1]}return!1}function jE(r,e,t,n,i){var o=R8(Di(),r,e,t,n);return Ti(i,o)?ah(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:FD(r,e,t,n,function(a,u){return jke(i,a,u)}):!1}function SFe(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){if(jE(r,e,t[o],n,i))return!0;e=t[o]}return!1}function V8(r,e,t,n,i){return!!(jE(r,e,t,n,i)||Id(r,e,t,n,i[0],i[1])||Id(r,e,t,n,i[0],i[3])||Id(r,e,t,n,i[2],i[1])||Id(r,e,t,n,i[2],i[3]))}function G8(r,e,t,n,i){if(!V8(r,e,t[0],n,i))return!1;if(t.length===1)return!0;for(var o=1,a=t.length;o<a;++o)if(wFe(r,t[o-1],t[o],n,i)&&!jE(r,t[o-1],t[o],n,i))return!1;return!0}function EFe(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var u=t[o];if(G8(r,e,u,n,i))return!0;e=u[u.length-1]}return!1}function BD(r,e,t,n){for(var i=r[e],o=r[e+1],a=0,u=e+n;u<t;u+=n){var h=r[u],d=r[u+1];a+=Math.sqrt((h-i)*(h-i)+(d-o)*(d-o)),i=h,o=d}return a}var AQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),CQt=function(r){AQt(e,r);function e(t,n){var i=r.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.appendCoordinate=function(t){this.flatCoordinates?Fo(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Fs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(PE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),LE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,o))},e.prototype.forEachSegment=function(t){return FD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,n){if(this.layout!=Bn.XYM&&this.layout!=Bn.XYZM)return null;var i=n!==void 0?n:!1;return jD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return lu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,n){return zD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},e.prototype.getLength=function(){return BD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=qE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Bn.XY)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(t){return jE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tv(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ra),lh=CQt;var MQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),RQt=function(r){MQt(e,r);function e(t,n,i){var o=r.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(t[0]))o.setCoordinates(t,n);else if(n!==void 0&&i)o.setFlatCoordinates(n,t),o.ends_=i;else{for(var a=o.getLayout(),u=t,h=[],d=[],v=0,x=u.length;v<x;++v){var S=u[v];v===0&&(a=S.getLayout()),Fo(h,S.getFlatCoordinates()),d.push(h.length)}o.setFlatCoordinates(a,h),o.ends_=d}return o}return e.prototype.appendLineString=function(t){this.flatCoordinates?Fo(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Fs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(OE(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),DE(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,o))},e.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=Bn.XYM&&this.layout!=Bn.XYZM||this.flatCoordinates.length===0)return null;var o=n!==void 0?n:!1,a=i!==void 0?i:!1;return xFe(this.flatCoordinates,0,this.ends_,this.stride,t,o,a)},e.prototype.getCoordinates=function(){return Td(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new lh(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.ends_,i=this.layout,o=[],a=0,u=0,h=n.length;u<h;++u){var d=n[u],v=new lh(t.slice(a,d),i);o.push(v),a=d}return o},e.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,o=this.ends_,a=this.stride,u=0,h=o.length;u<h;++u){var d=o[u],v=zD(n,i,d,a,.5);Fo(t,v),i=d}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=yFe(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new e(n,Bn.XY,i)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(t){return SFe(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=NE(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Ra),UD=RQt;var PQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),OQt=function(r){PQt(e,r);function e(t,n){var i=r.call(this)||this;return i.setCoordinates(t,n),i}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){var a=this.flatCoordinates,u=Yu(t,n,a[0],a[1]);if(u<o){for(var h=this.stride,d=0;d<h;++d)i[d]=a[d];return i.length=h,u}else return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return a0(this.flatCoordinates,t)},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return bE(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=kD(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ra),Pa=OQt;var LQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),DQt=function(r){LQt(e,r);function e(t,n){var i=r.call(this)||this;return n&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.appendPoint=function(t){this.flatCoordinates?Fo(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){if(o<Fs(this.getExtent(),t,n))return o;for(var a=this.flatCoordinates,u=this.stride,h=0,d=a.length;h<d;h+=u){var v=Yu(t,n,a[h],a[h+1]);if(v<o){o=v;for(var x=0;x<u;++x)i[x]=a[h+x];i.length=u}}return o},e.prototype.getCoordinates=function(){return lu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Pa(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,o=[],a=0,u=t.length;a<u;a+=i){var h=new Pa(t.slice(a,a+i),n);o.push(h)}return o},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,o=0,a=n.length;o<a;o+=i){var u=n[o],h=n[o+1];if(bE(t,u,h))return!0}return!1},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tv(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ra),g0=DQt;function $8(r,e,t,n){for(var i=0,o=r[t-n],a=r[t-n+1];e<t;e+=n){var u=r[e],h=r[e+1];i+=a*u-o*h,o=u,a=h}return i/2}function H8(r,e,t,n){for(var i=0,o=0,a=t.length;o<a;++o){var u=t[o];i+=$8(r,e,u,n),e=u}return i}function TFe(r,e,t,n){for(var i=0,o=0,a=t.length;o<a;++o){var u=t[o];i+=H8(r,e,u,n),e=u[u.length-1]}return i}var NQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qQt=function(r){NQt(e,r);function e(t,n){var i=r.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,n,i,o){return o<Fs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(PE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),LE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.getArea=function(){return $8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return lu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=qE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Bn.XY)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tv(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ra),W8=qQt;function Z8(r,e,t,n,i,o,a){for(var u,h,d,v,x,S,A,L=i[o+1],q=[],R=0,D=t.length;R<D;++R){var k=t[R];for(v=r[k-n],S=r[k-n+1],u=e;u<k;u+=n)x=r[u],A=r[u+1],(L<=S&&A<=L||S<=L&&L<=A)&&(d=(L-S)/(A-S)*(x-v)+v,q.push(d)),v=x,S=A}var j=NaN,$=-1/0;for(q.sort(ml),v=q[0],u=1,h=q.length;u<h;++u){x=q[u];var ee=Math.abs(x-v);ee>$&&(d=(v+x)/2,FE(r,e,t,n,d,L)&&(j=d,$=ee)),v=x}return isNaN(j)&&(j=i[o]),a?(a.push(j,L,$),a):[j,L,$]}function IFe(r,e,t,n,i){for(var o=[],a=0,u=t.length;a<u;++a){var h=t[a];o=Z8(r,e,h,n,i,2*a,o),e=h[h.length-1]}return o}function AFe(r,e,t,n){for(;e<t-n;){for(var i=0;i<n;++i){var o=r[e+i];r[e+i]=r[t-n+i],r[t-n+i]=o}e+=n,t-=n}}function CFe(r,e,t,n){for(var i=0,o=r[t-n],a=r[t-n+1];e<t;e+=n){var u=r[e],h=r[e+1];i+=(u-o)*(h+a),o=u,a=h}return i===0?void 0:i>0}function Y8(r,e,t,n,i){for(var o=i!==void 0?i:!1,a=0,u=t.length;a<u;++a){var h=t[a],d=CFe(r,e,h,n);if(a===0){if(o&&d||!o&&!d)return!1}else if(o&&!d||!o&&d)return!1;e=h}return!0}function MFe(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var u=t[o];if(!Y8(r,e,u,n,i))return!1;u.length&&(e=u[u.length-1])}return!0}function VD(r,e,t,n,i){for(var o=i!==void 0?i:!1,a=0,u=t.length;a<u;++a){var h=t[a],d=CFe(r,e,h,n),v=a===0?o&&d||!o&&!d:o&&!d||!o&&d;v&&AFe(r,e,h,n),e=h}return e}function K8(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o)e=VD(r,e,t[o],n,i);return e}var kQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),X8=function(r){kQt(e,r);function e(t,n,i){var o=r.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,n!==void 0&&i?(o.setFlatCoordinates(n,t),o.ends_=i):o.setCoordinates(t,n),o}return e.prototype.appendLinearRing=function(t){this.flatCoordinates?Fo(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Fs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(OE(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),DE(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.containsXY=function(t,n){return FE(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)},e.prototype.getArea=function(){return H8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),VD(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,Td(n,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=js(this.getExtent());this.flatInteriorPoint_=Z8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Pa(this.getFlatInteriorPoint(),Bn.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new W8(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.ends_,o=[],a=0,u=0,h=i.length;u<h;++u){var d=i[u],v=new W8(n.slice(a,d),t);o.push(v),a=d}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Y8(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=VD(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=U8(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,Bn.XY,i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return G8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=NE(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Ra),Ju=X8;function zE(r){var e=r[0],t=r[1],n=r[2],i=r[3],o=[e,t,e,i,n,i,n,t,e,t];return new X8(o,Bn.XY,[o.length])}function GD(r,e,t){for(var n=e||32,i=r.getStride(),o=r.getLayout(),a=r.getCenter(),u=i*(n+1),h=new Array(u),d=0;d<u;d+=i){h[d]=0,h[d+1]=0;for(var v=2;v<i;v++)h[d+v]=a[v]}var x=[h.length],S=new X8(h,o,x);return RFe(S,a,r.getRadius(),t),S}function RFe(r,e,t,n){for(var i=r.getFlatCoordinates(),o=r.getStride(),a=i.length/o-1,u=n||0,h=0;h<=a;++h){var d=h*o,v=u+yl(h,a)*2*Math.PI/a;i[d]=e[0]+t*Math.cos(v),i[d+1]=e[1]+t*Math.sin(v)}r.changed()}function PFe(r,e,t,n){for(var i=[],o=Di(),a=0,u=t.length;a<u;++a){var h=t[a];o=ID(r,e,h[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=h[h.length-1]}return i}var FQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jQt=function(r){FQt(e,r);function e(t,n,i){var o=r.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var a=o.getLayout(),u=t,h=[],d=[],v=0,x=u.length;v<x;++v){var S=u[v];v===0&&(a=S.getLayout());for(var A=h.length,L=S.getEnds(),q=0,R=L.length;q<R;++q)L[q]+=A;Fo(h,S.getFlatCoordinates()),d.push(L)}n=a,t=h,i=d}return n!==void 0&&i?(o.setFlatCoordinates(n,t),o.endss_=i):o.setCoordinates(t,n),o}return e.prototype.appendPolygon=function(t){var n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{var i=this.flatCoordinates.length;Fo(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(var o=0,a=n.length;o<a;++o)n[o]+=i}this.endss_.push(n),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),i=0;i<t;++i)n[i]=this.endss_[i].slice();var o=new e(this.flatCoordinates.slice(),this.layout,n);return o.applyProperties(this),o},e.prototype.closestPointXY=function(t,n,i,o){return o<Fs(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mFe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vFe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.containsXY=function(t,n){return bFe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)},e.prototype.getArea=function(){return TFe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),K8(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,kE(n,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=PFe(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=IFe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new g0(this.getFlatInteriorPoints().slice(),Bn.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;MFe(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=K8(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=_Fe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new e(n,Bn.XY,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var n;if(t===0)n=0;else{var i=this.endss_[t-1];n=i[i.length-1]}var o=this.endss_[t].slice(),a=o[o.length-1];if(n!==0)for(var u=0,h=o.length;u<h;++u)o[u]-=n;return new Ju(this.flatCoordinates.slice(n,a),this.layout,o)},e.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.endss_,o=[],a=0,u=0,h=i.length;u<h;++u){var d=i[u].slice(),v=d[d.length-1];if(a!==0)for(var x=0,S=d.length;x<S;++x)d[x]-=a;var A=new Ju(n.slice(a,v),t,d);o.push(A),a=v}return o},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(t){return EFe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=gFe(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()},e}(Ra),$D=jQt;var zQt=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),BQt=function(r){zQt(e,r);function e(t){var n=this,i=t||{};return n=r.call(this)||this,n.dataProjection=Jn(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(n.defaultFeatureProjection=Jn(i.featureProjection)),n.geometryName_=i.geometryName,n.extractGeometryName_=i.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return e.prototype.readFeatureFromObject=function(t,n){var i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};var o=J8(i.geometry,n),a=new gl;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&a.setGeometryName(i.geometry_name),a.setGeometry(o),"id"in i&&a.setId(i.id),i.properties&&a.setProperties(i.properties,!0),a},e.prototype.readFeaturesFromObject=function(t,n){var i=t,o=null;if(i.type==="FeatureCollection"){var a=t;o=[];for(var u=a.features,h=0,d=u.length;h<d;++h)o.push(this.readFeatureFromObject(u[h],n))}else o=[this.readFeatureFromObject(t,n)];return o},e.prototype.readGeometryFromObject=function(t,n){return J8(t,n)},e.prototype.readProjectionFromObject=function(t){var n=t.crs,i;return n?n.type=="name"?i=Jn(n.properties.name):n.type==="EPSG"?i=Jn("EPSG:"+n.properties.code):or(!1,36):i=this.dataProjection,i},e.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},o=t.getId();if(o!==void 0&&(i.id=o),!t.hasProperties())return i;var a=t.getProperties(),u=t.getGeometry();return u&&(i.geometry=Q8(u,n),delete a[t.getGeometryName()]),Hu(a)||(i.properties=a),i},e.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var i=[],o=0,a=t.length;o<a;++o)i.push(this.writeFeatureObject(t[o],n));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,n){return Q8(t,this.adaptOptions(n))},e}(hFe);function J8(r,e){if(!r)return null;var t;switch(r.type){case"Point":{t=VQt(r);break}case"LineString":{t=GQt(r);break}case"Polygon":{t=ZQt(r);break}case"MultiPoint":{t=HQt(r);break}case"MultiLineString":{t=$Qt(r);break}case"MultiPolygon":{t=WQt(r);break}case"GeometryCollection":{t=UQt(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type);}return B8(t,!1,e)}function UQt(r,e){var t=r.geometries.map(function(n){return J8(n,e)});return new cFe(t)}function VQt(r){return new Pa(r.coordinates)}function GQt(r){return new lh(r.coordinates)}function $Qt(r){return new UD(r.coordinates)}function HQt(r){return new g0(r.coordinates)}function WQt(r){return new $D(r.coordinates)}function ZQt(r){return new Ju(r.coordinates)}function Q8(r,e){r=B8(r,!0,e);var t=r.getType(),n;switch(t){case"Point":{n=eer(r,e);break}case"LineString":{n=KQt(r,e);break}case"Polygon":{n=ter(r,e);break}case"MultiPoint":{n=JQt(r,e);break}case"MultiLineString":{n=XQt(r,e);break}case"MultiPolygon":{n=QQt(r,e);break}case"GeometryCollection":{n=YQt(r,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t);}return n}function YQt(r,e){var t=r.getGeometriesArray().map(function(n){var i=Ur({},e);return delete i.featureProjection,Q8(n,i)});return{type:"GeometryCollection",geometries:t}}function KQt(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function XQt(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function JQt(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function QQt(r,e){var t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function eer(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function ter(r,e){var t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}var BE=BQt;var un={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var rer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ner=function(r){rer(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un,n.background_=t.background;var i=Ur({},t);return typeof t.properties=="object"&&(delete i.properties,Ur(i,t.properties)),i[un.OPACITY]=t.opacity!==void 0?t.opacity:1,or(typeof i[un.OPACITY]=="number",64),i[un.VISIBLE]=t.visible!==void 0?t.visible:!0,i[un.Z_INDEX]=t.zIndex,i[un.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[un.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[un.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[un.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=zn(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},e.prototype.getLayersArray=function(t){return ir()},e.prototype.getLayerStatesArray=function(t){return ir()},e.prototype.getExtent=function(){return this.get(un.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(un.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(un.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(un.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(un.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(un.OPACITY)},e.prototype.getSourceState=function(){return ir()},e.prototype.getVisible=function(){return this.get(un.VISIBLE)},e.prototype.getZIndex=function(){return this.get(un.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(un.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(un.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(un.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(un.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(un.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){or(typeof t=="number",64),this.set(un.OPACITY,t)},e.prototype.setVisible=function(t){this.set(un.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(un.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),r.prototype.disposeInternal.call(this)},e}(no),HD=ner;var _o={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var ier=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oer=function(r){ier(e,r);function e(t){var n=this,i=Ur({},t);delete i.source,n=r.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),n.addChangeListener(un.SOURCE,n.handleSourcePropertyChange_);var o=t.source?t.source:null;return n.setSource(o),n}return e.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},e.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},e.prototype.getSource=function(){return this.get(un.SOURCE)||null},e.prototype.getRenderSource=function(){return this.getSource()},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Yr(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Ir(t,Lt.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(n){return n([])})},e.prototype.getData=function(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)},e.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n)},e.prototype.unrender=function(){this.rendered=!1},e.prototype.setMapInternal=function(t){t||this.unrender(),this.set(un.MAP,t)},e.prototype.getMapInternal=function(){return this.get(un.MAP)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Yr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Yr(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Ir(t,_o.PRECOMPOSE,function(n){var i=n,o=i.frameState.layerStatesArray,a=this.getLayerState(!1);or(!o.some(function(u){return u.layer===a.layer}),67),o.push(a)},this),this.mapRenderKey_=Ir(this,Lt.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(un.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),r.prototype.disposeInternal.call(this)},e}(HD);function Iv(r,e){if(!r.visible)return!1;var t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;var n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}var Av=oer;var YFe=Me(rZ(),1);var _n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function nZ(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function iZ(r){return r[0]>0&&r[1]>0}function WD(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Un(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}var aer=function(){function r(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Un(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}return r.prototype.clone=function(){var e=this.getScale();return new r({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},r.prototype.getOpacity=function(){return this.opacity_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getScaleArray=function(){return this.scaleArray_},r.prototype.getDisplacement=function(){return this.displacement_},r.prototype.getDeclutterMode=function(){return this.declutterMode_},r.prototype.getAnchor=function(){return ir()},r.prototype.getImage=function(e){return ir()},r.prototype.getHitDetectionImage=function(){return ir()},r.prototype.getPixelRatio=function(e){return 1},r.prototype.getImageState=function(){return ir()},r.prototype.getImageSize=function(){return ir()},r.prototype.getOrigin=function(){return ir()},r.prototype.getSize=function(){return ir()},r.prototype.setDisplacement=function(e){this.displacement_=e},r.prototype.setOpacity=function(e){this.opacity_=e},r.prototype.setRotateWithView=function(e){this.rotateWithView_=e},r.prototype.setRotation=function(e){this.rotation_=e},r.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Un(e)},r.prototype.listenImageChange=function(e){ir()},r.prototype.load=function(){ir()},r.prototype.unlistenImageChange=function(e){ir()},r}(),ZD=aer;var LFe=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,DFe=/^([a-z]*)$|^hsla?\(.*\)$/i;function YD(r){return typeof r=="string"?r:aZ(r)}function NFe(r){var e=document.createElement("div");if(e.style.color=r,e.style.color!==""){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}else return""}var oZ=function(){var r=1024,e={},t=0;return function(n){var i;if(e.hasOwnProperty(n))i=e[n];else{if(t>=r){var o=0;for(var a in e)o++&3||(delete e[a],--t)}i=ser(n),e[n]=i,++t}return i}}();function uh(r){return Array.isArray(r)?r:oZ(r)}function ser(r){var e,t,n,i,o;if(DFe.exec(r)&&(r=NFe(r)),LFe.exec(r)){var a=r.length-1,u=void 0;a<=4?u=1:u=2;var h=a===4||a===8;e=parseInt(r.substr(1+0*u,u),16),t=parseInt(r.substr(1+1*u,u),16),n=parseInt(r.substr(1+2*u,u),16),h?i=parseInt(r.substr(1+3*u,u),16):i=255,u==1&&(e=(e<<4)+e,t=(t<<4)+t,n=(n<<4)+n,h&&(i=(i<<4)+i)),o=[e,t,n,i/255]}else r.indexOf("rgba(")==0?(o=r.slice(5,-1).split(",").map(Number),OFe(o)):r.indexOf("rgb(")==0?(o=r.slice(4,-1).split(",").map(Number),o.push(1),OFe(o)):or(!1,14);return o}function OFe(r){return r[0]=zn(r[0]+.5|0,0,255),r[1]=zn(r[1]+.5|0,0,255),r[2]=zn(r[2]+.5|0,0,255),r[3]=zn(r[3],0,1),r}function aZ(r){var e=r[0];e!=(e|0)&&(e=e+.5|0);var t=r[1];t!=(t|0)&&(t=t+.5|0);var n=r[2];n!=(n|0)&&(n=n+.5|0);var i=r[3]===void 0?1:Math.round(r[3]*100)/100;return"rgba("+e+","+t+","+n+","+i+")"}function qFe(r){return DFe.test(r)&&(r=NFe(r)),LFe.test(r)||r.indexOf("rgba(")===0||r.indexOf("rgb(")===0}function zs(r){return Array.isArray(r)?aZ(r):r}function Ii(r,e,t,n){var i;return t&&t.length?i=t.shift():_d?i=new OffscreenCanvas(r||300,e||300):i=document.createElement("canvas"),r&&(i.width=r),e&&(i.height=e),i.getContext("2d",n)}function KD(r){var e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function y0(r,e){var t=e.parentNode;t&&t.replaceChild(r,e)}function UE(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function kFe(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function FFe(r,e){for(var t=r.childNodes,n=0;;++n){var i=t[n],o=e[n];if(!i&&!o)break;if(i!==o){if(!i){r.appendChild(o);continue}if(!o){r.removeChild(i),--n;continue}r.insertBefore(o,i)}}}var VE="ol-hidden";var uu="ol-unselectable",sZ="ol-unsupported",Vc="ol-control",lZ="ol-collapsed",ler=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),jFe=["style","variant","weight","size","lineHeight","family"],uZ=function(r){var e=r.match(ler);if(!e)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=jFe.length;n<i;++n){var o=e[n+1];o!==void 0&&(t[jFe[n]]=o)}return t.families=t.family.split(/,\s?/),t};var JD="10px sans-serif",Bs="#000",Cv="round",ch=[],fh=0,$c="round",hh=10,ph="#000",Ad="center",Mv="middle",dh=[0,0,0,0],mh=1,Gc=new no,uer=new ks;uer.setSize=function(){console.warn("labelCache is deprecated.")};var _0=null,cZ,fZ={},zFe=function(){var r=100,e="32px ",t=["monospace","serif"],n=t.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",o,a;function u(d,v,x){for(var S=!0,A=0;A<n;++A){var L=t[A];if(a=XD(d+" "+v+" "+e+L,i),x!=L){var q=XD(d+" "+v+" "+e+x+","+L,i);S=S&&q!=a}}return!!S}function h(){for(var d=!0,v=Gc.getKeys(),x=0,S=v.length;x<S;++x){var A=v[x];Gc.get(A)<r&&(u.apply(this,A.split(`
`))?(qs(fZ),_0=null,cZ=void 0,Gc.set(A,r)):(Gc.set(A,Gc.get(A)+1,!0),d=!1))}d&&(clearInterval(o),o=void 0)}return function(d){var v=uZ(d);if(v)for(var x=v.families,S=0,A=x.length;S<A;++S){var L=x[S],q=v.style+`
`+v.weight+`
`+L;Gc.get(q)===void 0&&(Gc.set(q,r,!0),u(v.style,v.weight,L)||(Gc.set(q,0,!0),o===void 0&&(o=setInterval(h,32))))}}}(),cer=function(){var r;return function(e){var t=fZ[e];if(t==null){if(_d){var n=uZ(e),i=BFe(e,"\u017Dg"),o=isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight);t=o*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);fZ[e]=t}return t}}();function BFe(r,e){return _0||(_0=Ii(1,1)),r!=cZ&&(_0.font=r,cZ=_0.font),_0.measureText(e)}function XD(r,e){return BFe(r,e).width}function hZ(r,e,t){if(e in t)return t[e];var n=e.split(`
`).reduce(function(i,o){return Math.max(i,XD(r,o))},0);return t[e]=n,n}function UFe(r,e){for(var t=[],n=[],i=[],o=0,a=0,u=0,h=0,d=0,v=e.length;d<=v;d+=2){var x=e[d];if(x===`
`||d===v){o=Math.max(o,a),i.push(a),a=0,u+=h;continue}var S=e[d+1]||r.font,A=XD(S,x);t.push(A),a+=A;var L=cer(S);n.push(L),h=Math.max(h,L)}return{width:o,height:u,widths:t,heights:n,lineWidths:i}}function VFe(r,e,t,n,i,o,a,u,h,d,v){r.save(),t!==1&&(r.globalAlpha*=t),e&&r.setTransform.apply(r,e),n.contextInstructions?(r.translate(h,d),r.scale(v[0],v[1]),fer(n,r)):v[0]<0||v[1]<0?(r.translate(h,d),r.scale(v[0],v[1]),r.drawImage(n,i,o,a,u,0,0,a,u)):r.drawImage(n,i,o,a,u,h,d,a*v[0],u*v[1]),r.restore()}function fer(r,e){for(var t=r.contextInstructions,n=0,i=t.length;n<i;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}var her=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),per=function(r){her(e,r);function e(t){var n=this,i=t.rotateWithView!==void 0?t.rotateWithView:!1;return n=r.call(this,{opacity:1,rotateWithView:i,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})||this,n.canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=t.fill!==void 0?t.fill:null,n.origin_=[0,0],n.points_=t.points,n.radius_=t.radius!==void 0?t.radius:t.radius1,n.radius2_=t.radius2,n.angle_=t.angle!==void 0?t.angle:0,n.stroke_=t.stroke!==void 0?t.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(t){this.fill_=t,this.render()},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var n=this.canvas_[t];if(!n){var i=this.renderOptions_,o=Ii(i.size*t,i.size*t);this.draw_(i,o,t),n=o.canvas,this.canvas_[t]=n}return n},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return _n.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(t){this.stroke_=t,this.render()},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;var o=this.radius_,a=this.radius2_===void 0?o:this.radius2_;if(o<a){var u=o;o=a,a=u}var h=this.radius2_===void 0?this.points_:this.points_*2,d=2*Math.PI/h,v=a*Math.sin(d),x=Math.sqrt(a*a-v*v),S=o-x,A=Math.sqrt(v*v+S*S),L=A/v;if(t==="miter"&&L<=i)return L*n;var q=n/2/L,R=n/2*(S/A),D=Math.sqrt((o+q)*(o+q)+R*R),k=D-o;if(this.radius2_===void 0||t==="bevel")return k*2;var j=o*Math.sin(d),$=Math.sqrt(o*o-j*j),ee=a-$,J=Math.sqrt(j*j+ee*ee),ie=J/j;if(ie<=i){var ue=ie*n/2-a-o;return 2*Math.max(k,ue)}return k*2},e.prototype.createRenderOptions=function(){var t=$c,n=0,i=null,o=0,a,u=0;this.stroke_&&(a=this.stroke_.getColor(),a===null&&(a=ph),a=zs(a),u=this.stroke_.getWidth(),u===void 0&&(u=mh),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=$c),n=this.stroke_.getMiterLimit(),n===void 0&&(n=hh));var h=this.calculateLineJoinSize_(t,u,n),d=Math.max(this.radius_,this.radius2_||0),v=Math.ceil(2*d+h);return{strokeStyle:a,strokeWidth:u,size:v,lineDash:i,lineDashOffset:o,lineJoin:t,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){var o=this.fill_.getColor();o===null&&(o=Bs),n.fillStyle=zs(o),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=uh(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){var o=Ii(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var n=this.points_,i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var o=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);for(var a=this.angle_-Math.PI/2,u=2*Math.PI/n,h=0;h<n;h++){var d=a+h*u,v=h%2===0?i:o;t.lineTo(v*Math.cos(d),v*Math.sin(d))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=Bs,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},e}(ZD),GFe=per;var der=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mer=function(r){der(e,r);function e(t){var n=t||{};return r.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:n.scale!==void 0?n.scale:1,rotation:n.rotation!==void 0?n.rotation:0,rotateWithView:n.rotateWithView!==void 0?n.rotateWithView:!1,displacement:n.displacement!==void 0?n.displacement:[0,0],declutterMode:n.declutterMode})||this}return e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(GFe),Rv=mer;var ver=function(){function r(e){var t=e||{};this.color_=t.color!==void 0?t.color:null}return r.prototype.clone=function(){var e=this.getColor();return new r({color:Array.isArray(e)?e.slice():e||void 0})},r.prototype.getColor=function(){return this.color_},r.prototype.setColor=function(e){this.color_=e},r}(),_l=ver;var ger=function(){function r(e){var t=e||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return r.prototype.clone=function(){var e=this.getColor();return new r({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(e){this.color_=e},r.prototype.setLineCap=function(e){this.lineCap_=e},r.prototype.setLineDash=function(e){this.lineDash_=e},r.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},r.prototype.setLineJoin=function(e){this.lineJoin_=e},r.prototype.setMiterLimit=function(e){this.miterLimit_=e},r.prototype.setWidth=function(e){this.width_=e},r}(),Qu=ger;var x0=function(){function r(e){var t=e||{};this.geometry_=null,this.geometryFunction_=$Fe,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return r.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new r({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.setRenderer=function(e){this.renderer_=e},r.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},r.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},r.prototype.getGeometry=function(){return this.geometry_},r.prototype.getGeometryFunction=function(){return this.geometryFunction_},r.prototype.getFill=function(){return this.fill_},r.prototype.setFill=function(e){this.fill_=e},r.prototype.getImage=function(){return this.image_},r.prototype.setImage=function(e){this.image_=e},r.prototype.getStroke=function(){return this.stroke_},r.prototype.setStroke=function(e){this.stroke_=e},r.prototype.getText=function(){return this.text_},r.prototype.setText=function(e){this.text_=e},r.prototype.getZIndex=function(){return this.zIndex_},r.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=$Fe,this.geometry_=e},r.prototype.setZIndex=function(e){this.zIndex_=e},r}();function HFe(r){var e;if(typeof r=="function")e=r;else{var t;if(Array.isArray(r))t=r;else{or(typeof r.getZIndex=="function",41);var n=r;t=[n]}e=function(){return t}}return e}var pZ=null;function WFe(r,e){if(!pZ){var t=new _l({color:"rgba(255,255,255,0.4)"}),n=new Qu({color:"#3399CC",width:1.25});pZ=[new x0({image:new Rv({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return pZ}function w0(){var r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new x0({fill:new _l({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new x0({stroke:new Qu({color:e,width:n+2})}),new x0({stroke:new Qu({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new x0({image:new Rv({radius:n*2,fill:new _l({color:t}),stroke:new Qu({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function $Fe(r){return r.getGeometry()}var QD=x0;var yer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ZFe={RENDER_ORDER:"renderOrder"},_er=function(r){yer(e,r);function e(t){var n=this,i=t||{},o=Ur({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,n=r.call(this,o)||this,n.declutter_=i.declutter!==void 0?i.declutter:!1,n.renderBuffer_=i.renderBuffer!==void 0?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=i.updateWhileAnimating!==void 0?i.updateWhileAnimating:!1,n.updateWhileInteracting_=i.updateWhileInteracting!==void 0?i.updateWhileInteracting:!1,n}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(t){return r.prototype.getFeatures.call(this,t)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(ZFe.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new YFe.default(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(ZFe.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=t!==void 0?t:WFe,this.styleFunction_=t===null?void 0:HFe(this.style_),this.changed()},e}(Av),KFe=_er;var GE={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},$E=[GE.FILL],Hc=[GE.STROKE],vh=[GE.BEGIN_PATH],dZ=[GE.CLOSE_PATH],hr=GE;var xer=function(){function r(){}return r.prototype.drawCustom=function(e,t,n,i){},r.prototype.drawGeometry=function(e){},r.prototype.setStyle=function(e){},r.prototype.drawCircle=function(e,t){},r.prototype.drawFeature=function(e,t){},r.prototype.drawGeometryCollection=function(e,t){},r.prototype.drawLineString=function(e,t){},r.prototype.drawMultiLineString=function(e,t){},r.prototype.drawMultiPoint=function(e,t){},r.prototype.drawMultiPolygon=function(e,t){},r.prototype.drawPoint=function(e,t){},r.prototype.drawPolygon=function(e,t){},r.prototype.drawText=function(e,t){},r.prototype.setFillStrokeStyle=function(e,t){},r.prototype.setImageStyle=function(e,t){},r.prototype.setTextStyle=function(e,t){},r}(),eN=xer;var wer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ber=function(r){wer(e,r);function e(t,n,i,o){var a=r.call(this)||this;return a.tolerance=t,a.maxExtent=n,a.pixelRatio=o,a.maxLineWidth=0,a.resolution=i,a.beginGeometryInstruction1_=null,a.beginGeometryInstruction2_=null,a.bufferedMaxExtent_=null,a.instructions=[],a.coordinates=[],a.tmpCoordinate_=[],a.hitDetectionInstructions=[],a.state={},a}return e.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})},e.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,a=this.coordinates,u=a.length,h=0,d=t.length;h<d;h+=n)o[0]=t[h],o[1]=t[h+1],es(i,o)&&(a[u++]=o[0],a[u++]=o[1]);return u},e.prototype.appendFlatLineCoordinates=function(t,n,i,o,a,u){var h=this.coordinates,d=h.length,v=this.getBufferedMaxExtent();u&&(n+=o);var x=t[n],S=t[n+1],A=this.tmpCoordinate_,L=!0,q,R,D;for(q=n+o;q<i;q+=o)A[0]=t[q],A[1]=t[q+1],D=ED(v,A),D!==R?(L&&(h[d++]=x,h[d++]=S,L=!1),h[d++]=A[0],h[d++]=A[1]):D===oo.INTERSECTING?(h[d++]=A[0],h[d++]=A[1],L=!1):L=!0,x=A[0],S=A[1],R=D;return(a&&L||q===n+o)&&(h[d++]=x,h[d++]=S),d},e.prototype.drawCustomCoordinates_=function(t,n,i,o,a){for(var u=0,h=i.length;u<h;++u){var d=i[u],v=this.appendFlatLineCoordinates(t,n,d,o,!1,!1);a.push(v),n=d}return n},e.prototype.drawCustom=function(t,n,i,o){this.beginGeometry(t,n);var a=t.getType(),u=t.getStride(),h=this.coordinates.length,d,v,x,S,A;switch(a){case"MultiPolygon":d=t.getOrientedFlatCoordinates(),S=[];var L=t.getEndss();A=0;for(var q=0,R=L.length;q<R;++q){var D=[];A=this.drawCustomCoordinates_(d,A,L[q],u,D),S.push(D)}this.instructions.push([hr.CUSTOM,h,S,t,i,kE]),this.hitDetectionInstructions.push([hr.CUSTOM,h,S,t,o||i,kE]);break;case"Polygon":case"MultiLineString":x=[],d=a=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),A=this.drawCustomCoordinates_(d,0,t.getEnds(),u,x),this.instructions.push([hr.CUSTOM,h,x,t,i,Td]),this.hitDetectionInstructions.push([hr.CUSTOM,h,x,t,o||i,Td]);break;case"LineString":case"Circle":d=t.getFlatCoordinates(),v=this.appendFlatLineCoordinates(d,0,d.length,u,!1,!1),this.instructions.push([hr.CUSTOM,h,v,t,i,lu]),this.hitDetectionInstructions.push([hr.CUSTOM,h,v,t,o||i,lu]);break;case"MultiPoint":d=t.getFlatCoordinates(),v=this.appendFlatPointCoordinates(d,u),v>h&&(this.instructions.push([hr.CUSTOM,h,v,t,i,lu]),this.hitDetectionInstructions.push([hr.CUSTOM,h,v,t,o||i,lu]));break;case"Point":d=t.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),v=this.coordinates.length,this.instructions.push([hr.CUSTOM,h,v,t,i]),this.hitDetectionInstructions.push([hr.CUSTOM,h,v,t,o||i]);break;default:}this.endGeometry(n)},e.prototype.beginGeometry=function(t,n){this.beginGeometryInstruction1_=[hr.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[hr.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var n,i=t.length,o,a,u=-1;for(n=0;n<i;++n)o=t[n],a=o[0],a==hr.END_GEOMETRY?u=n:a==hr.BEGIN_GEOMETRY&&(o[2]=n,wke(this.hitDetectionInstructions,u,n),u=-1)},e.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var o=t.getColor();i.fillStyle=zs(o||Bs)}else i.fillStyle=void 0;if(n){var a=n.getColor();i.strokeStyle=zs(a||ph);var u=n.getLineCap();i.lineCap=u!==void 0?u:Cv;var h=n.getLineDash();i.lineDash=h?h.slice():ch;var d=n.getLineDashOffset();i.lineDashOffset=d||fh;var v=n.getLineJoin();i.lineJoin=v!==void 0?v:$c;var x=n.getWidth();i.lineWidth=x!==void 0?x:mh;var S=n.getMiterLimit();i.miterLimit=S!==void 0?S:hh,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var n=t.fillStyle,i=[hr.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[hr.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,o=t.lineCap,a=t.lineDash,u=t.lineDashOffset,h=t.lineJoin,d=t.lineWidth,v=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||a!=t.currentLineDash&&!Ta(t.currentLineDash,a)||t.currentLineDashOffset!=u||t.currentLineJoin!=h||t.currentLineWidth!=d||t.currentMiterLimit!=v)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=a,t.currentLineDashOffset=u,t.currentLineJoin=h,t.currentLineWidth=d,t.currentMiterLimit=v)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[hr.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=TD(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Zu(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(eN),Wc=ber;var Ser=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eer=function(r){Ser(e,r);function e(t,n,i,o){var a=r.call(this,t,n,i,o)||this;return a.hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterMode_=void 0,a.declutterImageWithText_=void 0,a}return e.prototype.drawPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,u=this.appendFlatPointCoordinates(i,o);this.instructions.push([hr.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([hr.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.drawMultiPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,u=this.appendFlatPointCoordinates(i,o);this.instructions.push([hr.DRAW_IMAGE,a,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([hr.DRAW_IMAGE,a,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,r.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),o=t.getSize(),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n},e}(Wc),XFe=Eer;var Ter=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ier=function(r){Ter(e,r);function e(t,n,i,o){return r.call(this,t,n,i,o)||this}return e.prototype.drawFlatCoordinates_=function(t,n,i,o){var a=this.coordinates.length,u=this.appendFlatLineCoordinates(t,n,i,o,!1,!1),h=[hr.MOVE_TO_LINE_TO,a,u];return this.instructions.push(h),this.hitDetectionInstructions.push(h),i},e.prototype.drawLineString=function(t,n){var i=this.state,o=i.strokeStyle,a=i.lineWidth;if(!(o===void 0||a===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([hr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ch,fh],vh);var u=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(u,0,u.length,h),this.hitDetectionInstructions.push(Hc),this.endGeometry(n)}},e.prototype.drawMultiLineString=function(t,n){var i=this.state,o=i.strokeStyle,a=i.lineWidth;if(!(o===void 0||a===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([hr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],vh);for(var u=t.getEnds(),h=t.getFlatCoordinates(),d=t.getStride(),v=0,x=0,S=u.length;x<S;++x)v=this.drawFlatCoordinates_(h,v,u[x],d);this.hitDetectionInstructions.push(Hc),this.endGeometry(n)}},e.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Hc),this.reverseHitDetectionInstructions(),this.state=null,r.prototype.finish.call(this)},e.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Hc),t.lastStroke=this.coordinates.length),t.lastStroke=0,r.prototype.applyStroke.call(this,t),this.instructions.push(vh)},e}(Wc),JFe=Ier;var Aer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cer=function(r){Aer(e,r);function e(t,n,i,o){return r.call(this,t,n,i,o)||this}return e.prototype.drawFlatCoordinatess_=function(t,n,i,o){var a=this.state,u=a.fillStyle!==void 0,h=a.strokeStyle!==void 0,d=i.length;this.instructions.push(vh),this.hitDetectionInstructions.push(vh);for(var v=0;v<d;++v){var x=i[v],S=this.coordinates.length,A=this.appendFlatLineCoordinates(t,n,x,o,!0,!h),L=[hr.MOVE_TO_LINE_TO,S,A];this.instructions.push(L),this.hitDetectionInstructions.push(L),h&&(this.instructions.push(dZ),this.hitDetectionInstructions.push(dZ)),n=x}return u&&(this.instructions.push($E),this.hitDetectionInstructions.push($E)),h&&(this.instructions.push(Hc),this.hitDetectionInstructions.push(Hc)),n},e.prototype.drawCircle=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([hr.SET_FILL_STYLE,Bs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([hr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var u=t.getFlatCoordinates(),h=t.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,h,!1,!1);var v=[hr.CIRCLE,d];this.instructions.push(vh,v),this.hitDetectionInstructions.push(vh,v),i.fillStyle!==void 0&&(this.instructions.push($E),this.hitDetectionInstructions.push($E)),i.strokeStyle!==void 0&&(this.instructions.push(Hc),this.hitDetectionInstructions.push(Hc)),this.endGeometry(n)}},e.prototype.drawPolygon=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([hr.SET_FILL_STYLE,Bs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([hr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var u=t.getEnds(),h=t.getOrientedFlatCoordinates(),d=t.getStride();this.drawFlatCoordinatess_(h,0,u,d),this.endGeometry(n)}},e.prototype.drawMultiPolygon=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([hr.SET_FILL_STYLE,Bs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([hr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var u=t.getEndss(),h=t.getOrientedFlatCoordinates(),d=t.getStride(),v=0,x=0,S=u.length;x<S;++x)v=this.drawFlatCoordinatess_(h,v,u[x],d);this.endGeometry(n)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var n=this.coordinates,i=0,o=n.length;i<o;++i)n[i]=Ed(n[i],t);return r.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,n=t.fillStyle;n!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},e}(Wc),mZ=Cer;var tN={POINT:"point",LINE:"line"};function QFe(r,e,t,n,i){var o=t,a=t,u=0,h=0,d=t,v,x,S,A,L,q,R,D,k,j;for(x=t;x<n;x+=i){var $=e[x],ee=e[x+1];L!==void 0&&(k=$-L,j=ee-q,A=Math.sqrt(k*k+j*j),R!==void 0&&(h+=S,v=Math.acos((R*k+D*j)/(S*A)),v>r&&(h>u&&(u=h,o=d,a=x),h=0,d=x-i)),S=A,R=k,D=j),L=$,q=ee}return h+=A,h>u?[d,x]:[o,a]}var Mer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),b0={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Rer=function(r){Mer(e,r);function e(t,n,i,o){var a=r.call(this,t,n,i,o)||this;return a.labels_=null,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=void 0,a.textRotation_=0,a.textFillState_=null,a.fillStates={},a.textStrokeState_=null,a.strokeStates={},a.textState_={},a.textStates={},a.textKey_="",a.fillKey_="",a.strokeKey_="",a.declutterImageWithText_=void 0,a}return e.prototype.finish=function(){var t=r.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},e.prototype.drawText=function(t,n){var i=this.textFillState_,o=this.textStrokeState_,a=this.textState_;if(!(this.text_===""||!a||!i&&!o)){var u=this.coordinates,h=u.length,d=t.getType(),v=null,x=t.getStride();if(a.placement===tN.LINE&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!Ti(this.getBufferedMaxExtent(),t.getExtent()))return;var S=void 0;if(v=t.getFlatCoordinates(),d=="LineString")S=[v.length];else if(d=="MultiLineString")S=t.getEnds();else if(d=="Polygon")S=t.getEnds().slice(0,1);else if(d=="MultiPolygon"){var A=t.getEndss();S=[];for(var L=0,q=A.length;L<q;++L)S.push(A[L][0])}this.beginGeometry(t,n);for(var R=a.textAlign,D=0,k=void 0,j=0,$=S.length;j<$;++j){if(R==null){var ee=QFe(a.maxAngle,v,D,S[j],x);D=ee[0],k=ee[1]}else k=S[j];for(var L=D;L<k;L+=x)u.push(v[L],v[L+1]);var J=u.length;D=S[j],this.drawChars_(h,J),h=J}this.endGeometry(n)}else{var ie=a.overflow?null:[];switch(d){case"Point":case"MultiPoint":v=t.getFlatCoordinates();break;case"LineString":v=t.getFlatMidpoint();break;case"Circle":v=t.getCenter();break;case"MultiLineString":v=t.getFlatMidpoints(),x=2;break;case"Polygon":v=t.getFlatInteriorPoint(),a.overflow||ie.push(v[2]/this.resolution),x=3;break;case"MultiPolygon":var ue=t.getFlatInteriorPoints();v=[];for(var L=0,q=ue.length;L<q;L+=3)a.overflow||ie.push(ue[L+2]/this.resolution),v.push(ue[L],ue[L+1]);if(v.length===0)return;x=2;break;default:}var J=this.appendFlatPointCoordinates(v,x);if(J===h)return;if(ie&&(J-h)/2!==v.length/x){var le=h/2;ie=ie.filter(function(Ie,Ge){var $e=u[(le+Ge)*2]===v[Ge*x]&&u[(le+Ge)*2+1]===v[Ge*x+1];return $e||--le,$e})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var _e=a.padding;if(_e!=dh&&(a.scale[0]<0||a.scale[1]<0)){var Re=a.padding[0],ze=a.padding[1],qe=a.padding[2],Ve=a.padding[3];a.scale[0]<0&&(ze=-ze,Ve=-Ve),a.scale[1]<0&&(Re=-Re,qe=-qe),_e=[Re,ze,qe,Ve]}var Ke=this.pixelRatio;this.instructions.push([hr.DRAW_IMAGE,h,J,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,_e==dh?dh:_e.map(function(Ie){return Ie*Ke}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ie]);var Ce=1/Ke;this.hitDetectionInstructions.push([hr.DRAW_IMAGE,h,J,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Ce,Ce],NaN,void 0,this.declutterImageWithText_,_e,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ie]),this.endGeometry(n)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var a=this.textKey_;a in this.textStates||(this.textStates[a]={font:n.font,textAlign:n.textAlign||Ad,justify:n.justify,textBaseline:n.textBaseline||Mv,scale:n.scale});var u=this.fillKey_;i&&(u in this.fillStates||(this.fillStates[u]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,n){var i=this.textStrokeState_,o=this.textState_,a=this.strokeKey_,u=this.textKey_,h=this.fillKey_;this.saveTextStates_();var d=this.pixelRatio,v=b0[o.textBaseline],x=this.textOffsetY_*d,S=this.text_,A=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([hr.DRAW_CHARS,t,n,v,o.overflow,h,o.maxAngle,d,x,a,A*d,S,u,1]),this.hitDetectionInstructions.push([hr.DRAW_CHARS,t,n,v,o.overflow,h,o.maxAngle,1,x,a,A,S,u,1/d])},e.prototype.setTextStyle=function(t,n){var i,o,a;if(!t)this.text_="";else{var u=t.getFill();u?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=zs(u.getColor()||Bs)):(o=null,this.textFillState_=o);var h=t.getStroke();if(!h)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);var d=h.getLineDash(),v=h.getLineDashOffset(),x=h.getWidth(),S=h.getMiterLimit();a.lineCap=h.getLineCap()||Cv,a.lineDash=d?d.slice():ch,a.lineDashOffset=v===void 0?fh:v,a.lineJoin=h.getLineJoin()||$c,a.lineWidth=x===void 0?mh:x,a.miterLimit=S===void 0?hh:S,a.strokeStyle=zs(h.getColor()||ph)}i=this.textState_;var A=t.getFont()||JD;zFe(A);var L=t.getScaleArray();i.overflow=t.getOverflow(),i.font=A,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Mv,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||dh,i.scale=L===void 0?[1,1]:L;var q=t.getOffsetX(),R=t.getOffsetY(),D=t.getRotateWithView(),k=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=q===void 0?0:q,this.textOffsetY_=R===void 0?0:R,this.textRotateWithView_=D===void 0?!1:D,this.textRotation_=k===void 0?0:k,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:tr(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+tr(o.fillStyle):""}this.declutterImageWithText_=n},e}(Wc),eje=Rer;var Per={Circle:mZ,Default:Wc,Image:XFe,LineString:JFe,Polygon:mZ,Text:eje},Oer=function(){function r(e,t,n,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}return r.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var n=this.buildersByZIndex_[t];for(var i in n){var o=n[i].finish();e[t][i]=o}}return e},r.prototype.getBuilder=function(e,t){var n=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);var o=i[t];if(o===void 0){var a=Per[t];o=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=o}return o},r}(),vZ=Oer;var Ler=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Der=function(r){Ler(e,r);function e(t){var n=r.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=t,n.declutterExecutorGroup=null,n}return e.prototype.getFeatures=function(t){return ir()},e.prototype.getData=function(t){return null},e.prototype.prepareFrame=function(t){return ir()},e.prototype.renderFrame=function(t,n){return ir()},e.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,n,i){return function(o,a){var u=this.loadedTileCallback.bind(this,i,o);return t.forEachLoadedTile(n,o,a,u)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a){},e.prototype.getDataAtPixel=function(t,n,i){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){var n=t.target;n.getState()===_n.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var n=t.getState();return n!=_n.LOADED&&n!=_n.ERROR&&t.addEventListener(Lt.CHANGE,this.boundHandleImageChange_),n==_n.IDLE&&(t.load(),n=t.getState()),n==_n.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()},e.prototype.disposeInternal=function(){delete this.layer_,r.prototype.disposeInternal.call(this)},e}(yD),rN=Der;var Ner=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qer=function(r){Ner(e,r);function e(t,n,i,o){var a=r.call(this,t)||this;return a.inversePixelTransform=n,a.frameState=i,a.context=o,a}return e}(Ei),Cd=qer;var ker=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gZ=[],S0=null;function Fer(){var r=document.createElement("canvas");r.width=1,r.height=1,S0=r.getContext("2d")}var jer=function(r){ker(e,r);function e(t){var n=r.call(this,t)||this;return n.container=null,n.renderedResolution,n.tempTransform=Li(),n.pixelTransform=Li(),n.inversePixelTransform=Li(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return e.prototype.getImageData=function(t,n,i){S0||Fer(),S0.clearRect(0,0,1,1);var o;try{S0.drawImage(t,n,i,1,1,0,0,1,1),o=S0.getImageData(0,0,1,1).data}catch(a){return S0=null,null}return o},e.prototype.getBackground=function(t){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0},e.prototype.useContainer=function(t,n,i){var o=this.getLayer().getClassName(),a,u;if(t&&t.className===o&&(!i||t&&t.style.backgroundColor&&Ta(uh(t.style.backgroundColor),uh(i)))){var h=t.firstElementChild;h instanceof HTMLCanvasElement&&(u=h.getContext("2d"))}if(u&&u.canvas.style.transform===n?(this.container=t,this.context=u,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){a=document.createElement("div"),a.className=o;var d=a.style;d.position="absolute",d.width="100%",d.height="100%",u=Ii();var h=u.canvas;a.appendChild(h),d=h.style,d.position="absolute",d.left="0",d.transformOrigin="top left",this.container=a,this.context=u}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)},e.prototype.clipUnrotated=function(t,n,i){var o=iu(i),a=c0(i),u=u0(i),h=l0(i);Nn(n.coordinateToPixelTransform,o),Nn(n.coordinateToPixelTransform,a),Nn(n.coordinateToPixelTransform,u),Nn(n.coordinateToPixelTransform,h);var d=this.inversePixelTransform;Nn(d,o),Nn(d,a),Nn(d,u),Nn(d,h),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,n,i){var o=this.getLayer();if(o.hasListener(t)){var a=new Cd(t,this.inversePixelTransform,i,n);o.dispatchEvent(a)}},e.prototype.preRender=function(t,n){this.frameState=n,this.dispatchRenderEvent_(_o.PRERENDER,t,n)},e.prototype.postRender=function(t,n){this.dispatchRenderEvent_(_o.POSTRENDER,t,n)},e.prototype.getRenderTransform=function(t,n,i,o,a,u,h){var d=a/2,v=u/2,x=o/n,S=-x,A=-t[0]+h,L=-t[1];return io(this.tempTransform,d,v,x,S,-i,A,L)},e.prototype.getDataAtPixel=function(t,n,i){var o=Nn(this.inversePixelTransform,t.slice()),a=this.context,u=this.getLayer(),h=u.getExtent();if(h){var d=Nn(n.pixelToCoordinateTransform,t.slice());if(!es(h,d))return null}var v=Math.round(o[0]),x=Math.round(o[1]),S=this.pixelContext_;if(!S){var A=document.createElement("canvas");A.width=1,A.height=1,S=A.getContext("2d"),this.pixelContext_=S}S.clearRect(0,0,1,1);var L;try{S.drawImage(a.canvas,v,x,1,1,0,0,1,1),L=S.getImageData(0,0,1,1).data}catch(q){return q.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):L}return L[3]===0?null:L},e.prototype.disposeInternal=function(){delete this.frameState,r.prototype.disposeInternal.call(this)},e}(rN),nN=jer;function tje(r,e,t,n,i,o,a,u,h,d,v,x){var S=r[e],A=r[e+1],L=0,q=0,R=0,D=0;function k(){L=S,q=A,e+=n,S=r[e],A=r[e+1],D+=R,R=Math.sqrt((S-L)*(S-L)+(A-q)*(A-q))}do k();while(e<t-n&&D+R<o);for(var j=R===0?0:(o-D)/R,$=ou(L,S,j),ee=ou(q,A,j),J=e-n,ie=D,ue=o+u*h(d,i,v);e<t-n&&D+R<ue;)k();j=R===0?0:(ue-D)/R;var le=ou(L,S,j),_e=ou(q,A,j),Re;if(x){var ze=[$,ee,le,_e];v0(ze,0,4,2,x,ze,ze),Re=ze[0]>ze[2]}else Re=$>le;var qe=Math.PI,Ve=[],Ke=J+n===e;e=J,R=0,D=ie,S=r[e],A=r[e+1];var Ce;if(Ke){k(),Ce=Math.atan2(A-q,S-L),Re&&(Ce+=Ce>0?-qe:qe);var Se=(le+$)/2,Ie=(_e+ee)/2;return Ve[0]=[Se,Ie,(ue-o)/2,Ce,i],Ve}i=i.replace(/\n/g," ");for(var Ge=0,$e=i.length;Ge<$e;){k();var Ze=Math.atan2(A-q,S-L);if(Re&&(Ze+=Ze>0?-qe:qe),Ce!==void 0){var Pe=Ze-Ce;if(Pe+=Pe>qe?-2*qe:Pe<-qe?2*qe:0,Math.abs(Pe)>a)return null}Ce=Ze;for(var at=Ge,wt=0;Ge<$e;++Ge){var Le=Re?$e-Ge-1:Ge,Ye=u*h(d,i[Le],v);if(e+n<t&&D+R<o+wt+Ye/2)break;wt+=Ye}if(Ge!==at){var je=Re?i.substring($e-at,$e-Ge):i.substring(at,Ge);j=R===0?0:(o+wt/2-D)/R;var Se=ou(L,S,j),Ie=ou(q,A,j);Ve.push([Se,Ie,wt/2,Ze,je]),o+=wt}}return Ve}var E0=Di(),Md=[],gh=[],yh=[],Rd=[];function rje(r){return r[3].declutterBox}var zer=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function nje(r,e){return(e==="start"||e==="end")&&!zer.test(r)&&(e=e==="start"?"left":"right"),b0[e]}function Ber(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}var Uer=function(){function r(e,t,n,i){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Li(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return r.prototype.createLabel=function(e,t,n,i){var o=e+t+n+i;if(this.labels_[o])return this.labels_[o];var a=i?this.strokeStates[i]:null,u=n?this.fillStates[n]:null,h=this.textStates[t],d=this.pixelRatio,v=[h.scale[0]*d,h.scale[1]*d],x=Array.isArray(e),S=h.justify?b0[h.justify]:nje(Array.isArray(e)?e[0]:e,h.textAlign||Ad),A=i&&a.lineWidth?a.lineWidth:0,L=x?e:e.split(`
`).reduce(Ber,[]),q=UFe(h,L),R=q.width,D=q.height,k=q.widths,j=q.heights,$=q.lineWidths,ee=R+A,J=[],ie=(ee+2)*v[0],ue=(D+A)*v[1],le={width:ie<0?Math.floor(ie):Math.ceil(ie),height:ue<0?Math.floor(ue):Math.ceil(ue),contextInstructions:J};if((v[0]!=1||v[1]!=1)&&J.push("scale",v),i){J.push("strokeStyle",a.strokeStyle),J.push("lineWidth",A),J.push("lineCap",a.lineCap),J.push("lineJoin",a.lineJoin),J.push("miterLimit",a.miterLimit);var _e=_d?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;_e.prototype.setLineDash&&(J.push("setLineDash",[a.lineDash]),J.push("lineDashOffset",a.lineDashOffset))}n&&J.push("fillStyle",u.fillStyle),J.push("textBaseline","middle"),J.push("textAlign","center");for(var Re=.5-S,ze=S*ee+Re*A,qe=[],Ve=[],Ke=0,Ce=0,Se=0,Ie=0,Ge,$e=0,Ze=L.length;$e<Ze;$e+=2){var Pe=L[$e];if(Pe===`
`){Ce+=Ke,Ke=0,ze=S*ee+Re*A,++Ie;continue}var at=L[$e+1]||h.font;at!==Ge&&(i&&qe.push("font",at),n&&Ve.push("font",at),Ge=at),Ke=Math.max(Ke,j[Se]);var wt=[Pe,ze+Re*k[Se]+S*(k[Se]-$[Ie]),.5*(A+Ke)+Ce];ze+=k[Se],i&&qe.push("strokeText",wt),n&&Ve.push("fillText",wt),++Se}return Array.prototype.push.apply(J,qe),Array.prototype.push.apply(J,Ve),this.labels_[o]=le,le},r.prototype.replayTextBackground_=function(e,t,n,i,o,a,u){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,t),a&&(this.alignFill_=a[2],this.fill_(e)),u&&(this.setStrokeStyle_(e,u),e.stroke())},r.prototype.calculateImageOrLabelDimensions_=function(e,t,n,i,o,a,u,h,d,v,x,S,A,L,q,R){u*=S[0],h*=S[1];var D=n-u,k=i-h,j=o+d>e?e-d:o,$=a+v>t?t-v:a,ee=L[3]+j*S[0]+L[1],J=L[0]+$*S[1]+L[2],ie=D-L[3],ue=k-L[0];(q||x!==0)&&(Md[0]=ie,Rd[0]=ie,Md[1]=ue,gh[1]=ue,gh[0]=ie+ee,yh[0]=gh[0],yh[1]=ue+J,Rd[1]=yh[1]);var le;return x!==0?(le=io(Li(),n,i,1,1,x,-n,-i),Nn(le,Md),Nn(le,gh),Nn(le,yh),Nn(le,Rd),Ca(Math.min(Md[0],gh[0],yh[0],Rd[0]),Math.min(Md[1],gh[1],yh[1],Rd[1]),Math.max(Md[0],gh[0],yh[0],Rd[0]),Math.max(Md[1],gh[1],yh[1],Rd[1]),E0)):Ca(Math.min(ie,ie+ee),Math.min(ue,ue+J),Math.max(ie,ie+ee),Math.max(ue,ue+J),E0),A&&(D=Math.round(D),k=Math.round(k)),{drawImageX:D,drawImageY:k,drawImageW:j,drawImageH:$,originX:d,originY:v,declutterBox:{minX:E0[0],minY:E0[1],maxX:E0[2],maxY:E0[3],value:R},canvasTransform:le,scale:S}},r.prototype.replayImageOrLabel_=function(e,t,n,i,o,a,u){var h=!!(a||u),d=i.declutterBox,v=e.canvas,x=u?u[2]*i.scale[0]/2:0,S=d.minX-x<=v.width/t&&d.maxX+x>=0&&d.minY-x<=v.height/t&&d.maxY+x>=0;return S&&(h&&this.replayTextBackground_(e,Md,gh,yh,Rd,a,u),VFe(e,i.canvasTransform,o,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},r.prototype.fill_=function(e){if(this.alignFill_){var t=Nn(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},r.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},r.prototype.drawLabelWithPointPlacement_=function(e,t,n,i){var o=this.textStates[t],a=this.createLabel(e,t,i,n),u=this.strokeStates[n],h=this.pixelRatio,d=nje(Array.isArray(e)?e[0]:e,o.textAlign||Ad),v=b0[o.textBaseline||Mv],x=u&&u.lineWidth?u.lineWidth:0,S=a.width/h-2*o.scale[0],A=d*S+2*(.5-d)*x,L=v*a.height/h+2*(.5-v)*x;return{label:a,anchorX:A,anchorY:L}},r.prototype.execute_=function(e,t,n,i,o,a,u,h){var d;this.pixelCoordinates_&&Ta(n,this.renderedTransform_)?d=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),d=su(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Dke(this.renderedTransform_,n));for(var v=0,x=i.length,S=0,A,L,q,R,D,k,j,$,ee,J,ie,ue,le=0,_e=0,Re=null,ze=null,qe=this.coordinateCache_,Ve=this.viewRotation_,Ke=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,Ce={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ve},Se=this.instructions!=i||this.overlaps?0:200,Ie,Ge,$e,Ze;v<x;){var Pe=i[v],at=Pe[0];switch(at){case hr.BEGIN_GEOMETRY:Ie=Pe[1],Ze=Pe[3],Ie.getGeometry()?u!==void 0&&!Ti(u,Ze.getExtent())?v=Pe[2]+1:++v:v=Pe[2];break;case hr.BEGIN_PATH:le>Se&&(this.fill_(e),le=0),_e>Se&&(e.stroke(),_e=0),!le&&!_e&&(e.beginPath(),R=NaN,D=NaN),++v;break;case hr.CIRCLE:S=Pe[1];var wt=d[S],Le=d[S+1],Ye=d[S+2],je=d[S+3],We=Ye-wt,tt=je-Le,Qe=Math.sqrt(We*We+tt*tt);e.moveTo(wt+Qe,Le),e.arc(wt,Le,Qe,0,2*Math.PI,!0),++v;break;case hr.CLOSE_PATH:e.closePath(),++v;break;case hr.CUSTOM:S=Pe[1],A=Pe[2];var kt=Pe[3],Gt=Pe[4],bt=Pe.length==6?Pe[5]:void 0;Ce.geometry=kt,Ce.feature=Ie,v in qe||(qe[v]=[]);var be=qe[v];bt?bt(d,S,A,2,be):(be[0]=d[S],be[1]=d[S+1],be.length=2),Gt(be,Ce),++v;break;case hr.DRAW_IMAGE:S=Pe[1],A=Pe[2],$=Pe[3],L=Pe[4],q=Pe[5];var Yt=Pe[6],Ut=Pe[7],Vt=Pe[8],nr=Pe[9],yr=Pe[10],Xt=Pe[11],lr=Pe[12],Pr=Pe[13],nn=Pe[14],An=Pe[15];if(!$&&Pe.length>=20){ee=Pe[19],J=Pe[20],ie=Pe[21],ue=Pe[22];var Ai=this.drawLabelWithPointPlacement_(ee,J,ie,ue);$=Ai.label,Pe[3]=$;var nt=Pe[23];L=(Ai.anchorX-nt)*this.pixelRatio,Pe[4]=L;var ti=Pe[24];q=(Ai.anchorY-ti)*this.pixelRatio,Pe[5]=q,Yt=$.height,Pe[6]=Yt,Pr=$.width,Pe[13]=Pr}var Cn=void 0;Pe.length>25&&(Cn=Pe[25]);var di=void 0,Ci=void 0,ct=void 0;Pe.length>17?(di=Pe[16],Ci=Pe[17],ct=Pe[18]):(di=dh,Ci=!1,ct=!1),yr&&Ke?Xt+=Ve:!yr&&!Ke&&(Xt-=Ve);for(var mr=0;S<A;S+=2)if(!(Cn&&Cn[mr++]<Pr/this.pixelRatio)){var jt=this.calculateImageOrLabelDimensions_($.width,$.height,d[S],d[S+1],Pr,Yt,L,q,Vt,nr,Xt,lr,o,di,Ci||ct,Ie),Mi=[e,t,$,jt,Ut,Ci?Re:null,ct?ze:null];if(h){if(nn==="none")continue;if(nn==="obstacle"){h.insert(jt.declutterBox);continue}else{var dn=void 0,Ee=void 0;if(An){var Oe=A-S;if(!An[Oe]){An[Oe]=Mi;continue}if(dn=An[Oe],delete An[Oe],Ee=rje(dn),h.collides(Ee))continue}if(h.collides(jt.declutterBox))continue;dn&&(h.insert(Ee),this.replayImageOrLabel_.apply(this,dn)),h.insert(jt.declutterBox)}}this.replayImageOrLabel_.apply(this,Mi)}++v;break;case hr.DRAW_CHARS:var it=Pe[1],St=Pe[2],vt=Pe[3],oe=Pe[4];ue=Pe[5];var W=Pe[6],H=Pe[7],K=Pe[8];ie=Pe[9];var ae=Pe[10];ee=Pe[11],J=Pe[12];var ve=[Pe[13],Pe[13]],xe=this.textStates[J],Te=xe.font,pe=[xe.scale[0]*H,xe.scale[1]*H],Be=void 0;Te in this.widths_?Be=this.widths_[Te]:(Be={},this.widths_[Te]=Be);var Je=BD(d,it,St,2),Ue=Math.abs(pe[0])*hZ(Te,ee,Be);if(oe||Ue<=Je){var st=this.textStates[J].textAlign,zt=(Je-Ue)*b0[st],Jt=tje(d,it,St,2,ee,zt,W,Math.abs(pe[0]),hZ,Te,Be,Ke?0:this.viewRotation_);e:if(Jt){var Nr=[],cr=void 0,jr=void 0,Ar=void 0,Jr=void 0,Kr=void 0;if(ie)for(cr=0,jr=Jt.length;cr<jr;++cr){Kr=Jt[cr],Ar=Kr[4],Jr=this.createLabel(Ar,J,"",ie),L=Kr[2]+(pe[0]<0?-ae:ae),q=vt*Jr.height+(.5-vt)*2*ae*pe[1]/pe[0]-K;var jt=this.calculateImageOrLabelDimensions_(Jr.width,Jr.height,Kr[0],Kr[1],Jr.width,Jr.height,L,q,0,0,Kr[3],ve,!1,dh,!1,Ie);if(h&&h.collides(jt.declutterBox))break e;Nr.push([e,t,Jr,jt,1,null,null])}if(ue)for(cr=0,jr=Jt.length;cr<jr;++cr){Kr=Jt[cr],Ar=Kr[4],Jr=this.createLabel(Ar,J,ue,""),L=Kr[2],q=vt*Jr.height-K;var jt=this.calculateImageOrLabelDimensions_(Jr.width,Jr.height,Kr[0],Kr[1],Jr.width,Jr.height,L,q,0,0,Kr[3],ve,!1,dh,!1,Ie);if(h&&h.collides(jt.declutterBox))break e;Nr.push([e,t,Jr,jt,1,null,null])}h&&h.load(Nr.map(rje));for(var Er=0,cn=Nr.length;Er<cn;++Er)this.replayImageOrLabel_.apply(this,Nr[Er])}}++v;break;case hr.END_GEOMETRY:if(a!==void 0){Ie=Pe[1];var Mn=a(Ie,Ze);if(Mn)return Mn}++v;break;case hr.FILL:Se?le++:this.fill_(e),++v;break;case hr.MOVE_TO_LINE_TO:for(S=Pe[1],A=Pe[2],Ge=d[S],$e=d[S+1],k=Ge+.5|0,j=$e+.5|0,(k!==R||j!==D)&&(e.moveTo(Ge,$e),R=k,D=j),S+=2;S<A;S+=2)Ge=d[S],$e=d[S+1],k=Ge+.5|0,j=$e+.5|0,(S==A-2||k!==R||j!==D)&&(e.lineTo(Ge,$e),R=k,D=j);++v;break;case hr.SET_FILL_STYLE:Re=Pe,this.alignFill_=Pe[2],le&&(this.fill_(e),le=0,_e&&(e.stroke(),_e=0)),e.fillStyle=Pe[1],++v;break;case hr.SET_STROKE_STYLE:ze=Pe,_e&&(e.stroke(),_e=0),this.setStrokeStyle_(e,Pe),++v;break;case hr.STROKE:Se?_e++:e.stroke(),++v;break;default:++v;break;}}le&&this.fill_(e),_e&&e.stroke()},r.prototype.execute=function(e,t,n,i,o,a){this.viewRotation_=i,this.execute_(e,t,n,this.instructions,o,void 0,void 0,a)},r.prototype.executeHitDetection=function(e,t,n,i,o){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,i,o)},r}(),ije=Uer;var yZ=["Polygon","Circle","LineString","Image","Text","Default"],Ver=function(){function r(e,t,n,i,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Li(),this.createExecutors_(o)}return r.prototype.clip=function(e,t){var n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()},r.prototype.createExecutors_=function(e){for(var t in e){var n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);var i=e[t];for(var o in i){var a=i[o];n[o]=new ije(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}},r.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[t],i=0,o=e.length;i<o;++i)if(e[i]in n)return!0;return!1},r.prototype.forEachFeatureAtCoordinate=function(e,t,n,i,o,a){i=Math.round(i);var u=i*2+1,h=io(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-n,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Ii(u,u));var v=this.hitDetectionContext_;v.canvas.width!==u||v.canvas.height!==u?(v.canvas.width=u,v.canvas.height=u):d||v.clearRect(0,0,u,u);var x;this.renderBuffer_!==void 0&&(x=Di(),xv(x,e),Zu(x,t*(this.renderBuffer_+i),x));var S=Ger(i),A;function L(J,ie){for(var ue=v.getImageData(0,0,u,u).data,le=0,_e=S.length;le<_e;le++)if(ue[S[le]]>0){if(!a||A!=="Image"&&A!=="Text"||a.indexOf(J)!==-1){var Re=(S[le]-3)/4,ze=i-Re%u,qe=i-(Re/u|0),Ve=o(J,ie,ze*ze+qe*qe);if(Ve)return Ve}v.clearRect(0,0,u,u);break}}var q=Object.keys(this.executorsByZIndex_).map(Number);q.sort(ml);var R,D,k,j,$;for(R=q.length-1;R>=0;--R){var ee=q[R].toString();for(k=this.executorsByZIndex_[ee],D=yZ.length-1;D>=0;--D)if(A=yZ[D],j=k[A],j!==void 0&&($=j.executeHitDetection(v,h,n,L,x),$))return $}},r.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var n=t[0],i=t[1],o=t[2],a=t[3],u=[n,i,n,a,o,a,o,i];return su(u,0,8,2,e,u),u},r.prototype.isEmpty=function(){return Hu(this.executorsByZIndex_)},r.prototype.execute=function(e,t,n,i,o,a,u){var h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(ml),this.maxExtent_&&(e.save(),this.clip(e,n));var d=a||yZ,v,x,S,A,L,q;for(u&&h.reverse(),v=0,x=h.length;v<x;++v){var R=h[v].toString();for(L=this.executorsByZIndex_[R],S=0,A=d.length;S<A;++S){var D=d[S];q=L[D],q!==void 0&&q.execute(e,t,n,i,o,u)}}this.maxExtent_&&e.restore()},r}(),_Z={};function Ger(r){if(_Z[r]!==void 0)return _Z[r];for(var e=r*2+1,t=r*r,n=new Array(t+1),i=0;i<=r;++i)for(var o=0;o<=r;++o){var a=i*i+o*o;if(a>t)break;var u=n[a];u||(u=[],n[a]=u),u.push(((r+i)*e+(r+o))*4+3),i>0&&u.push(((r-i)*e+(r+o))*4+3),o>0&&(u.push(((r+i)*e+(r-o))*4+3),i>0&&u.push(((r-i)*e+(r-o))*4+3))}for(var h=[],i=0,d=n.length;i<d;++i)n[i]&&h.push.apply(h,n[i]);return _Z[r]=h,h}var xZ=Ver;var xo={ANIMATING:0,INTERACTING:1};var $er=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Her=function(r){$er(e,r);function e(t,n,i,o,a,u,h){var d=r.call(this)||this;return d.context_=t,d.pixelRatio_=n,d.extent_=i,d.transform_=o,d.viewRotation_=a,d.squaredTolerance_=u,d.userTransform_=h,d.contextFillState_=null,d.contextStrokeState_=null,d.contextTextState_=null,d.fillState_=null,d.strokeState_=null,d.image_=null,d.imageAnchorX_=0,d.imageAnchorY_=0,d.imageHeight_=0,d.imageOpacity_=0,d.imageOriginX_=0,d.imageOriginY_=0,d.imageRotateWithView_=!1,d.imageRotation_=0,d.imageScale_=[0,0],d.imageWidth_=0,d.text_="",d.textOffsetX_=0,d.textOffsetY_=0,d.textRotateWithView_=!1,d.textRotation_=0,d.textScale_=[0,0],d.textFillState_=null,d.textStrokeState_=null,d.textState_=null,d.pixelCoordinates_=[],d.tmpLocalTransform_=Li(),d}return e.prototype.drawImages_=function(t,n,i,o){if(this.image_){var a=su(t,n,i,o,this.transform_,this.pixelCoordinates_),u=this.context_,h=this.tmpLocalTransform_,d=u.globalAlpha;this.imageOpacity_!=1&&(u.globalAlpha=d*this.imageOpacity_);var v=this.imageRotation_;this.imageRotateWithView_&&(v+=this.viewRotation_);for(var x=0,S=a.length;x<S;x+=2){var A=a[x]-this.imageAnchorX_,L=a[x+1]-this.imageAnchorY_;if(v!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var q=A+this.imageAnchorX_,R=L+this.imageAnchorY_;io(h,q,R,1,1,v,-q,-R),u.setTransform.apply(u,h),u.translate(q,R),u.scale(this.imageScale_[0],this.imageScale_[1]),u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),u.setTransform(1,0,0,1,0,0)}else u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,A,L,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(u.globalAlpha=d)}},e.prototype.drawText_=function(t,n,i,o){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=su(t,n,i,o,this.transform_,this.pixelCoordinates_),u=this.context_,h=this.textRotation_;for(this.textRotateWithView_&&(h+=this.viewRotation_);n<i;n+=o){var d=a[n]+this.textOffsetX_,v=a[n+1]+this.textOffsetY_;if(h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var x=io(this.tmpLocalTransform_,d,v,1,1,h,-d,-v);u.setTransform.apply(u,x),u.translate(d,v),u.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&u.strokeText(this.text_,0,0),this.textFillState_&&u.fillText(this.text_,0,0),u.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&u.strokeText(this.text_,d,v),this.textFillState_&&u.fillText(this.text_,d,v)}}},e.prototype.moveToLineTo_=function(t,n,i,o,a){var u=this.context_,h=su(t,n,i,o,this.transform_,this.pixelCoordinates_);u.moveTo(h[0],h[1]);var d=h.length;a&&(d-=2);for(var v=2;v<d;v+=2)u.lineTo(h[v],h[v+1]);return a&&u.closePath(),i},e.prototype.drawRings_=function(t,n,i,o){for(var a=0,u=i.length;a<u;++a)n=this.moveToLineTo_(t,n,i[a],o,!0);return n},e.prototype.drawCircle=function(t){if(Ti(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=pFe(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],o=n[3]-n[1],a=Math.sqrt(i*i+o*o),u=this.context_;u.beginPath(),u.arc(n[0],n[1],a,0,2*Math.PI),this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var n=t.getType();switch(n){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}},e.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);!i||!Ti(this.extent_,i.getExtent())||(this.setStyle(n),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,o=n.length;i<o;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ti(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getExtent();if(Ti(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),a=0,u=t.getEnds(),h=t.getStride();i.beginPath();for(var d=0,v=u.length;d<v;++d)a=this.moveToLineTo_(o,a,u[d],h,!1);i.stroke()}if(this.text_!==""){var x=t.getFlatMidpoints();this.drawText_(x,0,x.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ti(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ti(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getOrientedFlatCoordinates(),o=0,a=t.getEndss(),u=t.getStride();n.beginPath();for(var h=0,d=a.length;h<d;++h){var v=a[h];o=this.drawRings_(i,o,v,u)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var x=t.getFlatInteriorPoints();this.drawText_(x,0,x.length,2)}}},e.prototype.setContextFillState_=function(t){var n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(Ta(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var n=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:Ad;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=o&&(i.textAlign=o,n.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=o,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,n){var i=this;if(!t)this.fillState_=null;else{var o=t.getColor();this.fillState_={fillStyle:zs(o||Bs)}}if(!n)this.strokeState_=null;else{var a=n.getColor(),u=n.getLineCap(),h=n.getLineDash(),d=n.getLineDashOffset(),v=n.getLineJoin(),x=n.getWidth(),S=n.getMiterLimit(),A=h||ch;this.strokeState_={lineCap:u!==void 0?u:Cv,lineDash:this.pixelRatio_===1?A:A.map(function(L){return L*i.pixelRatio_}),lineDashOffset:(d||fh)*this.pixelRatio_,lineJoin:v!==void 0?v:$c,lineWidth:(x!==void 0?x:mh)*this.pixelRatio_,miterLimit:S!==void 0?S:hh,strokeStyle:zs(a||ph)}}},e.prototype.setImageStyle=function(t){var n;if(!t||!(n=t.getSize())){this.image_=null;return}var i=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_},e.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var n=t.getFill();if(!n)this.textFillState_=null;else{var i=n.getColor();this.textFillState_={fillStyle:zs(i||Bs)}}var o=t.getStroke();if(!o)this.textStrokeState_=null;else{var a=o.getColor(),u=o.getLineCap(),h=o.getLineDash(),d=o.getLineDashOffset(),v=o.getLineJoin(),x=o.getWidth(),S=o.getMiterLimit();this.textStrokeState_={lineCap:u!==void 0?u:Cv,lineDash:h||ch,lineDashOffset:d||fh,lineJoin:v!==void 0?v:$c,lineWidth:x!==void 0?x:mh,miterLimit:S!==void 0?S:hh,strokeStyle:zs(a||ph)}}var A=t.getFont(),L=t.getOffsetX(),q=t.getOffsetY(),R=t.getRotateWithView(),D=t.getRotation(),k=t.getScaleArray(),j=t.getText(),$=t.getTextAlign(),ee=t.getTextBaseline();this.textState_={font:A!==void 0?A:JD,textAlign:$!==void 0?$:Ad,textBaseline:ee!==void 0?ee:Mv},this.text_=j!==void 0?Array.isArray(j)?j.reduce(function(J,ie,ue){return J+=ue%2?" ":ie},""):j:"",this.textOffsetX_=L!==void 0?this.pixelRatio_*L:0,this.textOffsetY_=q!==void 0?this.pixelRatio_*q:0,this.textRotateWithView_=R!==void 0?R:!1,this.textRotation_=D!==void 0?D:0,this.textScale_=[this.pixelRatio_*k[0],this.pixelRatio_*k[1]]}},e}(eN),oje=Her;var Zc={FRACTION:"fraction",PIXELS:"pixels"};var xl={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var Wer=function(){function r(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},r.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},r.prototype.get=function(e,t,n){var i=aje(e,t,n);return i in this.cache_?this.cache_[i]:null},r.prototype.set=function(e,t,n,i){var o=aje(e,t,n);this.cache_[o]=i,++this.cacheSize_},r.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},r}();function aje(r,e,t){var n=t?YD(t):"null";return e+":"+r+":"+n}var T0=new Wer;var Zer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yer=function(r){Zer(e,r);function e(t,n,i,o){var a=r.call(this)||this;return a.extent=t,a.pixelRatio_=i,a.resolution=n,a.state=o,a}return e.prototype.changed=function(){this.dispatchEvent(Lt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return ir()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){ir()},e}(ks),sje=Yer;var Ker=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),k3r=function(r){Ker(e,r);function e(t,n,i,o,a,u){var h=r.call(this,t,n,i,_n.IDLE)||this;return h.src_=o,h.image_=new Image,a!==null&&(h.image_.crossOrigin=a),h.unlisten_=null,h.state=_n.IDLE,h.imageLoadFunction_=u,h}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=_n.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=yo(this.extent)/this.image_.height),this.state=_n.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==_n.IDLE||this.state==_n.ERROR)&&(this.state=_n.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=HE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=yo(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(sje);function HE(r,e,t){var n=r,i=!0,o=!1,a=!1,u=[n0(n,Lt.LOAD,function(){a=!0,o||e()})];return n.src&&Oke?(o=!0,n.decode().then(function(){i&&e()}).catch(function(h){i&&(a?e():t())})):u.push(n0(n,Lt.ERROR,t)),function(){i=!1,u.forEach(Yr)}}var Xer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),WE=null,Jer=function(r){Xer(e,r);function e(t,n,i,o,a,u){var h=r.call(this)||this;return h.hitDetectionImage_=null,h.image_=t||new Image,o!==null&&(h.image_.crossOrigin=o),h.canvas_={},h.color_=u,h.unlisten_=null,h.imageState_=a,h.size_=i,h.src_=n,h.tainted_,h}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===_n.LOADED){WE||(WE=Ii(1,1)),WE.drawImage(this.image_,0,0);try{WE.getImageData(0,0,1,1),this.tainted_=!1}catch(t){WE=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Lt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=_n.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=_n.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],n=this.size_[1],i=Ii(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==_n.IDLE){this.imageState_=_n.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=HE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==_n.LOADED)){var n=document.createElement("canvas");this.canvas_[t]=n,n.width=Math.ceil(this.image_.width*t),n.height=Math.ceil(this.image_.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply",i.globalCompositeOperation==="multiply"||this.isTainted_())i.fillStyle=YD(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var o=i.getImageData(0,0,n.width,n.height),a=o.data,u=this.color_[0]/255,h=this.color_[1]/255,d=this.color_[2]/255,v=this.color_[3],x=0,S=a.length;x<S;x+=4)a[x]*=u,a[x+1]*=h,a[x+2]*=d,a[x+3]*=v;i.putImageData(o,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(ks);function lje(r,e,t,n,i,o){var a=T0.get(e,n,o);return a||(a=new Jer(r,e,t,n,i,o),T0.set(e,n,o,a)),a}var Qer=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),etr=function(r){Qer(e,r);function e(t){var n=this,i=t||{},o=i.opacity!==void 0?i.opacity:1,a=i.rotation!==void 0?i.rotation:0,u=i.scale!==void 0?i.scale:1,h=i.rotateWithView!==void 0?i.rotateWithView:!1;n=r.call(this,{opacity:o,rotation:a,scale:u,displacement:i.displacement!==void 0?i.displacement:[0,0],rotateWithView:h,declutterMode:i.declutterMode})||this,n.anchor_=i.anchor!==void 0?i.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=i.anchorOrigin!==void 0?i.anchorOrigin:xl.TOP_LEFT,n.anchorXUnits_=i.anchorXUnits!==void 0?i.anchorXUnits:Zc.FRACTION,n.anchorYUnits_=i.anchorYUnits!==void 0?i.anchorYUnits:Zc.FRACTION,n.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null;var d=i.img!==void 0?i.img:null;n.imgSize_=i.imgSize;var v=i.src;or(!(v!==void 0&&d),4),or(!d||d&&n.imgSize_,5),(v===void 0||v.length===0)&&d&&(v=d.src||tr(d)),or(v!==void 0&&v.length>0,6);var x=i.src!==void 0?_n.IDLE:_n.LOADED;return n.color_=i.color!==void 0?uh(i.color):null,n.iconImage_=lje(d,v,n.imgSize_!==void 0?n.imgSize_:null,n.crossOrigin_,x,n.color_),n.offset_=i.offset!==void 0?i.offset:[0,0],n.offsetOrigin_=i.offsetOrigin!==void 0?i.offsetOrigin:xl.TOP_LEFT,n.origin_=null,n.size_=i.size!==void 0?i.size:null,n}return e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var n=this.getSize();if(this.anchorXUnits_==Zc.FRACTION||this.anchorYUnits_==Zc.FRACTION){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_==Zc.FRACTION&&(t[0]*=n[0]),this.anchorYUnits_==Zc.FRACTION&&(t[1]*=n[1])}if(this.anchorOrigin_!=xl.TOP_LEFT){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==xl.TOP_RIGHT||this.anchorOrigin_==xl.BOTTOM_RIGHT)&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_==xl.BOTTOM_LEFT||this.anchorOrigin_==xl.BOTTOM_RIGHT)&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=xl.TOP_LEFT){var n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_==xl.TOP_RIGHT||this.offsetOrigin_==xl.BOTTOM_RIGHT)&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_==xl.BOTTOM_LEFT||this.offsetOrigin_==xl.BOTTOM_RIGHT)&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Lt.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Lt.CHANGE,t)},e}(ZD),wZ=etr;var ttr="#333",rtr=function(){function r(e){var t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Un(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new _l({color:ttr}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:tN.POINT,this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}return r.prototype.clone=function(){var e=this.getScale();return new r({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},r.prototype.getOverflow=function(){return this.overflow_},r.prototype.getFont=function(){return this.font_},r.prototype.getMaxAngle=function(){return this.maxAngle_},r.prototype.getPlacement=function(){return this.placement_},r.prototype.getOffsetX=function(){return this.offsetX_},r.prototype.getOffsetY=function(){return this.offsetY_},r.prototype.getFill=function(){return this.fill_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getScaleArray=function(){return this.scaleArray_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.getText=function(){return this.text_},r.prototype.getTextAlign=function(){return this.textAlign_},r.prototype.getJustify=function(){return this.justify_},r.prototype.getTextBaseline=function(){return this.textBaseline_},r.prototype.getBackgroundFill=function(){return this.backgroundFill_},r.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},r.prototype.getPadding=function(){return this.padding_},r.prototype.setOverflow=function(e){this.overflow_=e},r.prototype.setFont=function(e){this.font_=e},r.prototype.setMaxAngle=function(e){this.maxAngle_=e},r.prototype.setOffsetX=function(e){this.offsetX_=e},r.prototype.setOffsetY=function(e){this.offsetY_=e},r.prototype.setPlacement=function(e){this.placement_=e},r.prototype.setRotateWithView=function(e){this.rotateWithView_=e},r.prototype.setFill=function(e){this.fill_=e},r.prototype.setRotation=function(e){this.rotation_=e},r.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Un(e!==void 0?e:1)},r.prototype.setStroke=function(e){this.stroke_=e},r.prototype.setText=function(e){this.text_=e},r.prototype.setTextAlign=function(e){this.textAlign_=e},r.prototype.setJustify=function(e){this.justify_=e},r.prototype.setTextBaseline=function(e){this.textBaseline_=e},r.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},r.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},r.prototype.setPadding=function(e){this.padding_=e},r}(),bZ=rtr;var ec=.5;function uje(r,e,t,n,i,o,a){var u=r[0]*ec,h=r[1]*ec,d=Ii(u,h);d.imageSmoothingEnabled=!1;for(var v=d.canvas,x=new oje(d,ec,i,null,a),S=t.length,A=Math.floor((256*256*256-1)/S),L={},q=1;q<=S;++q){var R=t[q-1],D=R.getStyleFunction()||n;if(n){var k=D(R,o);if(k){Array.isArray(k)||(k=[k]);for(var j=q*A,$="#"+("000000"+j.toString(16)).slice(-6),ee=0,J=k.length;ee<J;++ee){var ie=k[ee],ue=ie.getGeometryFunction()(R);if(!(!ue||!Ti(i,ue.getExtent()))){var le=ie.clone(),_e=le.getFill();_e&&_e.setColor($);var Re=le.getStroke();Re&&(Re.setColor($),Re.setLineDash(null)),le.setText(void 0);var ze=ie.getImage();if(ze&&ze.getOpacity()!==0){var qe=ze.getImageSize();if(!qe)continue;var Ve=Ii(qe[0],qe[1],void 0,{alpha:!1}),Ke=Ve.canvas;Ve.fillStyle=$,Ve.fillRect(0,0,Ke.width,Ke.height),le.setImage(new wZ({img:Ke,imgSize:qe,anchor:ze.getAnchor(),anchorXUnits:Zc.PIXELS,anchorYUnits:Zc.PIXELS,offset:ze.getOrigin(),opacity:1,size:ze.getSize(),scale:ze.getScale(),rotation:ze.getRotation(),rotateWithView:ze.getRotateWithView()}))}var Ce=le.getZIndex()||0,Se=L[Ce];Se||(Se={},L[Ce]=Se,Se.Polygon=[],Se.Circle=[],Se.LineString=[],Se.Point=[]),Se[ue.getType().replace("Multi","")].push(ue,le)}}}}}for(var Ie=Object.keys(L).map(Number).sort(ml),q=0,Ge=Ie.length;q<Ge;++q){var Se=L[Ie[q]];for(var $e in Se)for(var Ze=Se[$e],ee=0,J=Ze.length;ee<J;ee+=2){x.setStyle(Ze[ee+1]);for(var Pe=0,at=e.length;Pe<at;++Pe)x.setTransform(e[Pe]),x.drawGeometry(Ze[ee])}}return d.getImageData(0,0,v.width,v.height)}function cje(r,e,t){var n=[];if(t){var i=Math.floor(Math.round(r[0])*ec),o=Math.floor(Math.round(r[1])*ec),a=(zn(i,0,t.width-1)+zn(o,0,t.height-1)*t.width)*4,u=t.data[a],h=t.data[a+1],d=t.data[a+2],v=d+256*(h+256*u),x=Math.floor((256*256*256-1)/e.length);v&&v%x===0&&n.push(e[v/x-1])}return n}var ntr=.5,fje={Point:ctr,LineString:str,Polygon:htr,MultiPoint:ftr,MultiLineString:ltr,MultiPolygon:utr,GeometryCollection:atr,Circle:itr};function hje(r,e){return parseInt(tr(r),10)-parseInt(tr(e),10)}function pje(r,e){var t=iN(r,e);return t*t}function iN(r,e){return ntr*r/e}function itr(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(o||a){var u=r.getBuilder(t.getZIndex(),"Circle");u.setFillStrokeStyle(o,a),u.drawCircle(e,n)}var h=t.getText();if(h&&h.getText()){var d=(i||r).getBuilder(t.getZIndex(),"Text");d.setTextStyle(h),d.drawText(e,n)}}function SZ(r,e,t,n,i,o,a){var u=!1,h=t.getImage();if(h){var d=h.getImageState();d==_n.LOADED||d==_n.ERROR?h.unlistenImageChange(i):(d==_n.IDLE&&h.load(),h.listenImageChange(i),u=!0)}return otr(r,e,t,n,o,a),u}function otr(r,e,t,n,i,o){var a=t.getGeometryFunction()(e);if(a){var u=a.simplifyTransformed(n,i),h=t.getRenderer();if(h)dje(r,u,t,e);else{var d=fje[u.getType()];d(r,u,t,e,o)}}}function dje(r,e,t,n){if(e.getType()=="GeometryCollection"){for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)dje(r,i[o],t,n);return}var u=r.getBuilder(t.getZIndex(),"Default");u.drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function atr(r,e,t,n,i){var o=e.getGeometriesArray(),a,u;for(a=0,u=o.length;a<u;++a){var h=fje[o[a].getType()];h(r,o[a],t,n,i)}}function str(r,e,t,n,i){var o=t.getStroke();if(o){var a=r.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,n)}var u=t.getText();if(u&&u.getText()){var h=(i||r).getBuilder(t.getZIndex(),"Text");h.setTextStyle(u),h.drawText(e,n)}}function ltr(r,e,t,n,i){var o=t.getStroke();if(o){var a=r.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,n)}var u=t.getText();if(u&&u.getText()){var h=(i||r).getBuilder(t.getZIndex(),"Text");h.setTextStyle(u),h.drawText(e,n)}}function utr(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(a||o){var u=r.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(o,a),u.drawMultiPolygon(e,n)}var h=t.getText();if(h&&h.getText()){var d=(i||r).getBuilder(t.getZIndex(),"Text");d.setTextStyle(h),d.drawText(e,n)}}function ctr(r,e,t,n,i){var o=t.getImage(),a=t.getText(),u;if(o){if(o.getImageState()!=_n.LOADED)return;var h=r;if(i){var d=o.getDeclutterMode();if(d!=="none")if(h=i,d==="obstacle"){var v=r.getBuilder(t.getZIndex(),"Image");v.setImageStyle(o,u),v.drawPoint(e,n)}else a&&a.getText()&&(u={})}var x=h.getBuilder(t.getZIndex(),"Image");x.setImageStyle(o,u),x.drawPoint(e,n)}if(a&&a.getText()){var S=r;i&&(S=i);var A=S.getBuilder(t.getZIndex(),"Text");A.setTextStyle(a,u),A.drawText(e,n)}}function ftr(r,e,t,n,i){var o=t.getImage(),a=t.getText(),u;if(o){if(o.getImageState()!=_n.LOADED)return;var h=r;if(i){var d=o.getDeclutterMode();if(d!=="none")if(h=i,d==="obstacle"){var v=r.getBuilder(t.getZIndex(),"Image");v.setImageStyle(o,u),v.drawMultiPoint(e,n)}else a&&a.getText()&&(u={})}var x=h.getBuilder(t.getZIndex(),"Image");x.setImageStyle(o,u),x.drawMultiPoint(e,n)}if(a&&a.getText()){var S=r;i&&(S=i);var A=S.getBuilder(t.getZIndex(),"Text");A.setTextStyle(a,u),A.drawText(e,n)}}function htr(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(o||a){var u=r.getBuilder(t.getZIndex(),"Polygon");u.setFillStrokeStyle(o,a),u.drawPolygon(e,n)}var h=t.getText();if(h&&h.getText()){var d=(i||r).getBuilder(t.getZIndex(),"Text");d.setTextStyle(h),d.drawText(e,n)}}var ptr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dtr=function(r){ptr(e,r);function e(t){var n=r.call(this,t)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=Di(),n.wrappedRenderedExtent_=Di(),n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n.compositionContext_=null,n.opacity_=1,n}return e.prototype.renderWorlds=function(t,n,i){var o=n.extent,a=n.viewState,u=a.center,h=a.resolution,d=a.projection,v=a.rotation,x=d.getExtent(),S=this.getLayer().getSource(),A=n.pixelRatio,L=n.viewHints,q=!(L[xo.ANIMATING]||L[xo.INTERACTING]),R=this.compositionContext_,D=Math.round(n.size[0]*A),k=Math.round(n.size[1]*A),j=S.getWrapX()&&d.canWrapX(),$=j?ln(x):null,ee=j?Math.ceil((o[2]-x[2])/$)+1:1,J=j?Math.floor((o[0]-x[0])/$):0;do{var ie=this.getRenderTransform(u,h,v,A,D,k,J*$);t.execute(R,1,ie,v,q,void 0,i)}while(++J<ee)},e.prototype.setupCompositionContext_=function(){if(this.opacity_!==1){var t=Ii(this.context.canvas.width,this.context.canvas.height,gZ);this.compositionContext_=t}else this.compositionContext_=this.context},e.prototype.releaseCompositionContext_=function(){if(this.opacity_!==1){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,KD(this.compositionContext_),gZ.push(this.compositionContext_.canvas),this.compositionContext_=null}},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())},e.prototype.renderFrame=function(t,n){var i=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];Nke(this.pixelTransform,1/i,1/i),o0(this.inversePixelTransform,this.pixelTransform);var a=SD(this.pixelTransform);this.useContainer(n,a,this.getBackground(t));var u=this.context,h=u.canvas,d=this.replayGroup_,v=this.declutterExecutorGroup;if((!d||d.isEmpty())&&(!v||v.isEmpty()))return null;var x=Math.round(t.size[0]*i),S=Math.round(t.size[1]*i);h.width!=x||h.height!=S?(h.width=x,h.height=S,h.style.transform!==a&&(h.style.transform=a)):this.containerReused||u.clearRect(0,0,x,S),this.preRender(u,t);var A=t.viewState,L=A.projection;this.opacity_=o.opacity,this.setupCompositionContext_();var q=!1,R=!0;if(o.extent&&this.clipping){var D=Ma(o.extent,L);R=Ti(D,t.extent),q=R&&!ah(D,t.extent),q&&this.clipUnrotated(this.compositionContext_,t,D)}return R&&this.renderWorlds(d,t),q&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(u,t),this.renderedRotation_!==A.rotation&&(this.renderedRotation_=A.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];Nn(this.pixelTransform,i);var o=this.renderedCenter_,a=this.renderedResolution_,u=this.renderedRotation_,h=this.renderedProjection_,d=this.wrappedRenderedExtent_,v=this.getLayer(),x=[],S=i[0]*ec,A=i[1]*ec;x.push(this.getRenderTransform(o,a,u,ec,S,A,0).slice());var L=v.getSource(),q=h.getExtent();if(L.getWrapX()&&h.canWrapX()&&!ah(q,d)){for(var R=d[0],D=ln(q),k=0,j=void 0;R<q[0];)--k,j=D*k,x.push(this.getRenderTransform(o,a,u,ec,S,A,j).slice()),R+=D;for(k=0,R=d[2];R>q[2];)++k,j=D*k,x.push(this.getRenderTransform(o,a,u,ec,S,A,j).slice()),R-=D}this.hitDetectionImageData_=uje(i,x,this.renderedFeatures_,v.getStyleFunction(),d,a,u)}n(cje(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a){var u=this;if(this.replayGroup_){var h=n.viewState.resolution,d=n.viewState.rotation,v=this.getLayer(),x={},S=function(q,R,D){var k=tr(q),j=x[k];if(j){if(j!==!0&&D<j.distanceSq){if(D===0)return x[k]=!0,a.splice(a.lastIndexOf(j),1),o(q,v,R);j.geometry=R,j.distanceSq=D}}else{if(D===0)return x[k]=!0,o(q,v,R);a.push(x[k]={feature:q,layer:v,geometry:R,distanceSq:D,callback:o})}},A,L=[this.replayGroup_];return this.declutterExecutorGroup&&L.push(this.declutterExecutorGroup),L.some(function(q){return A=q.forEachFeatureAtCoordinate(t,h,d,i,S,q===u.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(R){return R.value}):null)}),A}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var o=t.viewHints[xo.ANIMATING],a=t.viewHints[xo.INTERACTING],u=n.getUpdateWhileAnimating(),h=n.getUpdateWhileInteracting();if(this.ready&&!u&&o||!h&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var d=t.extent,v=t.viewState,x=v.projection,S=v.resolution,A=t.pixelRatio,L=n.getRevision(),q=n.getRenderBuffer(),R=n.getRenderOrder();R===void 0&&(R=hje);var D=v.center.slice(),k=Zu(d,q*S),j=k.slice(),$=[k.slice()],ee=x.getExtent();if(i.getWrapX()&&x.canWrapX()&&!ah(ee,t.extent)){var J=ln(ee),ie=Math.max(ln(k)/2,J);k[0]=ee[0]-ie,k[2]=ee[2]+ie,OD(D,x);var ue=P8($[0],x);ue[0]<ee[0]&&ue[2]<ee[2]?$.push([ue[0]+J,ue[1],ue[2]+J,ue[3]]):ue[0]>ee[0]&&ue[2]>ee[2]&&$.push([ue[0]-J,ue[1],ue[2]-J,ue[3]])}if(this.ready&&this.renderedResolution_==S&&this.renderedRevision_==L&&this.renderedRenderOrder_==R&&ah(this.wrappedRenderedExtent_,k))return Ta(this.renderedExtent_,j)||(this.hitDetectionImageData_=null,this.renderedExtent_=j),this.renderedCenter_=D,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var le=new vZ(iN(S,A),k,S,A),_e;this.getLayer().getDeclutter()&&(_e=new vZ(iN(S,A),k,S,A));var Re=au(),ze;if(Re){for(var qe=0,Ve=$.length;qe<Ve;++qe){var Ke=$[qe],Ce=Sd(Ke,x);i.loadFeatures(Ce,aFe(S,x),Re)}ze=ME(Re,x)}else for(var qe=0,Ve=$.length;qe<Ve;++qe)i.loadFeatures($[qe],S,x);var Se=pje(S,A),Ie=!0,Ge=function(wt){var Le,Ye=wt.getStyleFunction()||n.getStyleFunction();if(Ye&&(Le=Ye(wt,S)),Le){var je=this.renderFeature(wt,Se,Le,le,ze,_e);Ie=Ie&&!je}}.bind(this),$e=Sd(k,x),Ze=i.getFeaturesInExtent($e);R&&Ze.sort(R);for(var qe=0,Ve=Ze.length;qe<Ve;++qe)Ge(Ze[qe]);this.renderedFeatures_=Ze,this.ready=Ie;var Pe=le.finish(),at=new xZ(k,S,A,i.getOverlaps(),Pe,n.getRenderBuffer());return _e&&(this.declutterExecutorGroup=new xZ(k,S,A,i.getOverlaps(),_e.finish(),n.getRenderBuffer())),this.renderedResolution_=S,this.renderedRevision_=L,this.renderedRenderOrder_=R,this.renderedExtent_=j,this.wrappedRenderedExtent_=k,this.renderedCenter_=D,this.renderedProjection_=x,this.replayGroup_=at,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,n,i,o,a,u){if(!i)return!1;var h=!1;if(Array.isArray(i))for(var d=0,v=i.length;d<v;++d)h=SZ(o,t,i[d],n,this.boundHandleStyleImageChange_,a,u)||h;else h=SZ(o,t,i,n,this.boundHandleStyleImageChange_,a,u);return h},e}(nN),mje=dtr;var mtr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vtr=function(r){mtr(e,r);function e(t){return r.call(this,t)||this}return e.prototype.createRenderer=function(){return new mje(this)},e}(KFe),cu=vtr;var vje=Me(rZ(),1);var gtr=function(){function r(e){this.rbush_=new vje.default(e),this.items_={}}return r.prototype.insert=function(e,t){var n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[tr(t)]=n},r.prototype.load=function(e,t){for(var n=new Array(t.length),i=0,o=t.length;i<o;i++){var a=e[i],u=t[i],h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:u};n[i]=h,this.items_[tr(u)]=h}this.rbush_.load(n)},r.prototype.remove=function(e){var t=tr(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null},r.prototype.update=function(e,t){var n=this.items_[tr(t)],i=[n.minX,n.minY,n.maxX,n.maxY];sh(i,e)||(this.remove(t),this.insert(e,t))},r.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(t){return t.value})},r.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},n=this.rbush_.search(t);return n.map(function(i){return i.value})},r.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},r.prototype.forEachInExtent=function(e,t){return this.forEach_(this.getInExtent(e),t)},r.prototype.forEach_=function(e,t){for(var n,i=0,o=e.length;i<o;i++)if(n=t(e[i]),n)return n;return n},r.prototype.isEmpty=function(){return Hu(this.items_)},r.prototype.clear=function(){this.rbush_.clear(),this.items_={}},r.prototype.getExtent=function(e){var t=this.rbush_.toJSON();return Ca(t.minX,t.minY,t.maxX,t.maxY,e)},r.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[t]=e.items_[t]},r}(),ZE=gtr;var ytr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_tr=function(r){ytr(e,r);function e(t){var n=r.call(this)||this;n.projection=Jn(t.projection),n.attributions_=gje(t.attributions),n.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,n.loading=!1,n.state_=t.state!==void 0?t.state:"ready",n.wrapX_=t.wrapX!==void 0?t.wrapX:!1,n.interpolate_=!!t.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(o,a){i.viewResolver=o,i.viewRejector=a}),n}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return ir()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=gje(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(no);function gje(r){return r?Array.isArray(r)?function(e){return r}:typeof r=="function"?r:function(e){return[r]}:null}var oN=_tr;var rs={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function yje(r,e){return[[-1/0,-1/0,1/0,1/0]]}var xtr=!1;function wtr(r,e,t,n,i,o,a){var u=new XMLHttpRequest;u.open("GET",typeof r=="function"?r(t,n,i):r,!0),e.getType()=="arraybuffer"&&(u.responseType="arraybuffer"),u.withCredentials=xtr,u.onload=function(h){if(!u.status||u.status>=200&&u.status<300){var d=e.getType(),v=void 0;d=="json"||d=="text"?v=u.responseText:d=="xml"?(v=u.responseXML,v||(v=new DOMParser().parseFromString(u.responseText,"application/xml"))):d=="arraybuffer"&&(v=u.response),v?o(e.readFeatures(v,{extent:t,featureProjection:i}),e.readProjection(v)):a()}else a()},u.onerror=a,u.send()}function EZ(r,e){return function(t,n,i,o,a){var u=this;wtr(r,e,t,n,i,function(h,d){u.addFeatures(h),o!==void 0&&o(h)},a||vl)}}var _je=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pd=function(r){_je(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.feature=n,o.features=i,o}return e}(Ei);var btr=function(r){_je(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{attributions:i.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:i.wrapX!==void 0?i.wrapX:!0})||this,n.on,n.once,n.un,n.loader_=vl,n.format_=i.format,n.overlaps_=i.overlaps===void 0?!0:i.overlaps,n.url_=i.url,i.loader!==void 0?n.loader_=i.loader:n.url_!==void 0&&(or(n.format_,7),n.loader_=EZ(n.url_,n.format_)),n.strategy_=i.strategy!==void 0?i.strategy:yje;var o=i.useSpatialIndex!==void 0?i.useSpatialIndex:!0;n.featuresRtree_=o?new ZE:null,n.loadedExtentsRtree_=new ZE,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null;var a,u;return Array.isArray(i.features)?u=i.features:i.features&&(a=i.features,u=a.getArray()),!o&&a===void 0&&(a=new Xn(u)),u!==void 0&&n.addFeaturesInternal(u),a!==void 0&&n.bindFeaturesCollection_(a),n}return e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var n=tr(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);var i=t.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new Pd(rs.ADDFEATURE,t))},e.prototype.setupChangeEvents_=function(t,n){this.featureChangeKeys_[t]=[Ir(n,Lt.CHANGE,this.handleFeatureChange_,this),Ir(n,$u.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,n){var i=!0,o=n.getId();return o!==void 0&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=n),i&&(or(!(t in this.uidIndex_),30),this.uidIndex_[t]=n),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],o=[],a=0,u=t.length;a<u;a++){var h=t[a],d=tr(h);this.addToIndex_(d,h)&&i.push(h)}for(var a=0,v=i.length;a<v;a++){var h=i[a],d=tr(h);this.setupChangeEvents_(d,h);var x=h.getGeometry();if(x){var S=x.getExtent();n.push(S),o.push(h)}else this.nullGeometryFeatures_[d]=h}if(this.featuresRtree_&&this.featuresRtree_.load(n,o),this.hasListener(rs.ADDFEATURE))for(var a=0,A=i.length;a<A;a++)this.dispatchEvent(new Pd(rs.ADDFEATURE,i[a]))},e.prototype.bindFeaturesCollection_=function(t){var n=!1;this.addEventListener(rs.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(rs.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(ai.ADD,function(i){n||(n=!0,this.addFeature(i.element),n=!1)}.bind(this)),t.addEventListener(ai.REMOVE,function(i){n||(n=!0,this.removeFeature(i.element),n=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var n in this.featureChangeKeys_){var i=this.featureChangeKeys_[n];i.forEach(Yr)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var o=function(h){this.removeFeatureInternal(h)}.bind(this);this.featuresRtree_.forEach(o);for(var a in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var u=new Pd(rs.CLEAR);this.dispatchEvent(u),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(o){var a=o.getGeometry();if(a.intersectsCoordinate(t))return n(o)})},e.prototype.forEachFeatureInExtent=function(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},e.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,function(i){var o=i.getGeometry();if(o.intersectsExtent(t)){var a=n(i);if(a)return a}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Hu(this.nullGeometryFeatures_)||Fo(t,vD(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n},e.prototype.getFeaturesInExtent=function(t,n){var i=this;if(this.featuresRtree_){var o=n&&n.canWrapX()&&this.getWrapX();if(!o)return this.featuresRtree_.getInExtent(t);var a=Bke(t,n);return[].concat.apply([],a.map(function(u){return i.featuresRtree_.getInExtent(u)}))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],o=t[1],a=null,u=[NaN,NaN],h=1/0,d=[-1/0,-1/0,1/0,1/0],v=n||Qa;return this.featuresRtree_.forEachInExtent(d,function(x){if(v(x)){var S=x.getGeometry(),A=h;if(h=S.closestPointXY(i,o,u,h),h<A){a=x;var L=Math.sqrt(h);d[0]=i-L,d[1]=o-L,d[2]=i+L,d[3]=o+L}}}),a},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var n=this.idIndex_[t.toString()];return n!==void 0?n:null},e.prototype.getFeatureByUid=function(t){var n=this.uidIndex_[t];return n!==void 0?n:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var n=t.target,i=tr(n),o=n.getGeometry();if(!o)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{var a=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,n)):this.featuresRtree_&&this.featuresRtree_.update(a,n)}var u=n.getId();if(u!==void 0){var h=u.toString();this.idIndex_[h]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[h]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Pd(rs.CHANGEFEATURE,n))},e.prototype.hasFeature=function(t){var n=t.getId();return n!==void 0?n in this.idIndex_:tr(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Hu(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0},e.prototype.loadFeatures=function(t,n,i){for(var o=this.loadedExtentsRtree_,a=this.strategy_(t,n,i),u=function(x,S){var A=a[x],L=o.forEachInExtent(A,function(q){return ah(q.extent,A)});L||(++h.loadingExtentsCount_,h.dispatchEvent(new Pd(rs.FEATURESLOADSTART)),h.loader_.call(h,A,n,i,function(q){--this.loadingExtentsCount_,this.dispatchEvent(new Pd(rs.FEATURESLOADEND,void 0,q))}.bind(h),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Pd(rs.FEATURESLOADERROR))}.bind(h)),o.insert(A,{extent:A.slice()}))},h=this,d=0,v=a.length;d<v;++d)u(d,v);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),r.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var n=this.loadedExtentsRtree_,i;n.forEachInExtent(t,function(o){if(sh(o.extent,t))return i=o,!0}),i&&n.remove(i)},e.prototype.removeFeature=function(t){if(t){var n=tr(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t);var i=this.removeFeatureInternal(t);i&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var n=tr(t),i=this.featureChangeKeys_[n];if(i){i.forEach(Yr),delete this.featureChangeKeys_[n];var o=t.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[n],this.dispatchEvent(new Pd(rs.REMOVEFEATURE,t)),t}},e.prototype.removeFromIdIndex_=function(t){var n=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){or(this.format_,7),this.url_=t,this.setLoader(EZ(t,this.format_))},e}(oN),Yc=btr;var OZ=Me(WP(),1);var TZ=class{constructor(){this.listeners_=[]}on(e,t){this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push(t)}off(e,t){let n=this.listeners_[e];if(n){let i=n.indexOf(t);i>-1&&this.listeners_[e].slice(i,1)}}dispatch(e,t){let n=this.listeners_[e];if(n)for(let i=0,o=n.length;i<o;++i)n[i].call({},t)}},xje=TZ;function wje(){return new QD({fill:new _l({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Qu({color:"#ffcc33",width:2}),image:new Rv({radius:7,fill:new _l({color:"#ffcc33"})})})}function Od(r){let t=2*Math.PI*8/6;return new QD({image:new Rv({radius:8,fill:new _l({color:"rgba(255,255,255,0.6)"}),stroke:new Qu({color:"rgba(49,159,211,0.5)",width:15,lineDash:[0,t,t,t,t,t,t]})}),text:CS(r)?new bZ({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:r,fill:new _l({color:"#aa3300"}),stroke:new Qu({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}function aN(r){let t=2*Math.PI*8/6;return new QD({image:new Rv({radius:8,fill:new _l({color:"rgba(255,128,0,0.6)"}),stroke:new Qu({color:"rgba(240,0,0,0.5)",width:15,lineDash:[0,t,t,t,t,t,t]})}),text:CS(r)?new bZ({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:r,fill:new _l({color:"#aa3300"}),stroke:new Qu({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}var JE=Me(WP(),1);var Str=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bje=function(r){Str(e,r);function e(t,n,i){var o=r.call(this)||this;if(i!==void 0&&n===void 0)o.setFlatCoordinates(i,t);else{var a=n||0;o.setCenterAndRadius(t,a,i)}return o}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){var a=this.flatCoordinates,u=t-a[0],h=n-a[1],d=u*u+h*h;if(d<o){if(d===0)for(var v=0;v<this.stride;++v)i[v]=a[v];else{var x=this.getRadius()/Math.sqrt(d);i[0]=a[0]+x*u,i[1]=a[1]+x*h;for(var v=2;v<this.stride;++v)i[v]=a[v]}return i.length=this.stride,d}else return o},e.prototype.containsXY=function(t,n){var i=this.flatCoordinates,o=t-i[0],a=n-i[1];return o*o+a*a<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return Ca(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},e.prototype.getType=function(){return"Circle"},e.prototype.intersectsExtent=function(t){var n=this.getExtent();if(Ti(t,n)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]?!0:s0(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],o=t.slice();o[n]=o[0]+i;for(var a=1;a<n;++a)o[n+a]=t[a];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,a=kD(o,0,t,this.stride);o[a++]=o[0]+n;for(var u=1,h=this.stride;u<h;++u)o[a++]=o[u];o.length=a,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,n){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,n){var i=this.getCenter(),o=this.getStride();this.setCenter(v0(i,0,i.length,o,t,n,i)),this.changed()},e.prototype.translate=function(t,n){var i=this.getCenter(),o=this.getStride();this.setCenter(DD(i,0,i.length,o,t,n,i)),this.changed()},e}(Ra);bje.prototype.transform;var Sje=bje;var YE={ACTIVE:"active"};var Etr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ttr=function(r){Etr(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.map=n,o.frameState=i!==void 0?i:null,o}return e}(Ei),Ld=Ttr;var Itr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Atr=function(r){Itr(e,r);function e(t,n,i,o,a,u){var h=r.call(this,t,n,a)||this;return h.originalEvent=i,h.pixel_=null,h.coordinate_=null,h.dragging=o!==void 0?o:!1,h.activePointers=u,h}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){r.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){r.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Ld),fu=Atr;var Vr={SINGLECLICK:"singleclick",CLICK:Lt.CLICK,DBLCLICK:Lt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};function IZ(r){return Math.pow(r,3)}function hu(r){return 1-IZ(1-r)}function Eje(r){return 3*r*r-2*r*r*r}function Tje(r){return r}var Ctr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mtr=function(r){Ctr(e,r);function e(t){var n=r.call(this)||this;return n.on,n.once,n.un,t&&t.handleEvent&&(n.handleEvent=t.handleEvent),n.map_=null,n.setActive(!0),n}return e.prototype.getActive=function(){return this.get(YE.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(YE.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(no);function Ije(r,e,t){var n=r.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:Tje,center:r.getConstrainedCenter(i)})}}function I0(r,e,t,n){var i=r.getZoom();if(i!==void 0){var o=r.getConstrainedZoom(i+e),a=r.getResolutionForZoom(o);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:hu})}}var pu=Mtr;var Rtr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ptr=function(r){Rtr(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Vr.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Vr.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Vr.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,n=this.stopDown(o)}else t.type==Vr.POINTERMOVE&&this.handleMoveEvent(t);return!n},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){t.activePointers&&(this.targetPointers=t.activePointers)},e}(pu);function A0(r){for(var e=r.length,t=0,n=0,i=0;i<e;i++)t+=r[i].clientX,n+=r[i].clientY;return[t/e,n/e]}var Us=Ptr;function KE(r){var e=arguments;return function(t){for(var n=!0,i=0,o=e.length;i<o&&(n=n&&e[i](t),!!n);++i);return n}}var Aje=function(r){var e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Cje=function(r){var e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Otr=function(r){var e=r.map.getTargetElement(),t=r.map.getOwnerDocument().activeElement;return e.contains(t)},sN=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?Otr(r):!0},C0=Qa;var lN=function(r){var e=r.originalEvent;return e.button==0&&!(Rke&&Pke&&e.ctrlKey)},AZ=ru;var M0=function(r){return r.type==Vr.SINGLECLICK};var R0=function(r){var e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var Dd=function(r){var e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},uN=function(r){var e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},cN=function(r){var e=r.originalEvent;return or(e!==void 0,56),e.pointerType=="mouse"};var fN=function(r){var e=r.originalEvent;return or(e!==void 0,56),e.isPrimary&&e.button===0};var Mje=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vn={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},hN={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},pN=function(r){Mje(e,r);function e(t,n){var i=r.call(this,t)||this;return i.feature=n,i}return e}(Ei);var Ltr=function(r){Mje(e,r);function e(t){var n=this,i=t;i.stopDown||(i.stopDown=ru),n=r.call(this,i)||this,n.on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=t.source?t.source:null,n.features_=t.features?t.features:null,n.snapTolerance_=t.snapTolerance?t.snapTolerance:12,n.type_=t.type,n.mode_=Ntr(n.type_),n.stopClick_=!!t.stopClick,n.minPoints_=t.minPoints?t.minPoints:n.mode_===vn.POLYGON?3:2,n.maxPoints_=n.mode_===vn.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,n.finishCondition_=t.finishCondition?t.finishCondition:Qa,n.geometryLayout_=t.geometryLayout?t.geometryLayout:Bn.XY;var o=t.geometryFunction;if(!o){var a=n.mode_;if(a===vn.CIRCLE)o=function(h,d,v){var x=d||new Sje([NaN,NaN]),S=pi(h[0],v),A=wd(S,pi(h[h.length-1],v));x.setCenterAndRadius(S,Math.sqrt(A),this.geometryLayout_);var L=au();return L&&x.transform(v,L),x};else{var u;a===vn.POINT?u=Pa:a===vn.LINE_STRING?u=lh:a===vn.POLYGON&&(u=Ju),o=function(h,d,v){return d?a===vn.POLYGON?h[0].length?d.setCoordinates([h[0].concat([h[0][0]])],this.geometryLayout_):d.setCoordinates([],this.geometryLayout_):d.setCoordinates(h,this.geometryLayout_):d=new u(h,this.geometryLayout_),d}}}return n.geometryFunction_=o,n.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,n.overlay_=new cu({source:new Yc({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:Dtr(),updateWhileInteracting:!0}),n.geometryName_=t.geometryName,n.condition_=t.condition?t.condition:R0,n.freehandCondition_,t.freehand?n.freehandCondition_=C0:n.freehandCondition_=t.freehandCondition?t.freehandCondition:Dd,n.addChangeListener(YE.ACTIVE,n.updateState_),n}return e.prototype.setMap=function(t){r.prototype.setMap.call(this,t),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(t){t.originalEvent.type===Lt.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==vn.POINT&&this.freehandCondition_(t);var n=t.type===Vr.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===Vr.POINTERDRAG){var o=Date.now();o-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===Vr.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===Vr.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=t.type===Vr.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Vr.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Vr.DBLCLICK&&(i=!1),r.prototype.handleEvent.call(this,t)&&i},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new fu(Vr.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var n=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===vn.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),n=!1}else this.freehand_&&this.abortDrawing();return!n&&this.stopClick_&&t.preventDefault(),n},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var n=this.downPx_,i=t.pixel,o=n[0]-i[0],a=n[1]-i[1],u=o*o+a*a;if(this.shouldHandle_=this.freehand_?u>this.squaredClickTolerance_:u<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var n=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_],a=this.mode_;if(a===vn.POINT)n=!0;else if(a===vn.CIRCLE)n=this.sketchCoords_.length===2;else if(a===vn.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(a===vn.POLYGON){var u=this.sketchCoords_;i=u[0].length>this.minPoints_,o=[u[0][0],u[0][u[0].length-2]]}if(i)for(var h=this.getMap(),d=0,v=o.length;d<v;d++){var x=o[d],S=h.getPixelFromCoordinate(x),A=t[0]-S[0],L=t[1]-S[1],q=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(A*A+L*L)<=q,n){this.finishCoordinate_=x;break}}}return n},e.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new gl(new Pa(t)),this.updateSketchFeatures_();else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(t)}},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new gl);var n=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new lh(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(i))},e.prototype.startDrawing_=function(t){for(var n=this.getMap().getView().getProjection(),i=RE(this.geometryLayout_);t.length<i;)t.push(0);this.finishCoordinate_=t,this.mode_===vn.POINT?this.sketchCoords_=t.slice():this.mode_===vn.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new gl(new lh(this.sketchLineCoords_)));var o=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new gl,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new pN(hN.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){for(var n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),a=RE(this.geometryLayout_),u,h;t.length<a;)t.push(0);if(this.mode_===vn.POINT?h=this.sketchCoords_:this.mode_===vn.POLYGON?(u=this.sketchCoords_[0],h=u[u.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(u=this.sketchCoords_,h=u[u.length-1]),h[0]=t[0],h[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_){var d=this.sketchPoint_.getGeometry();d.setCoordinates(t)}if(i.getType()==="Polygon"&&this.mode_!==vn.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var v=this.sketchLine_.getGeometry();v.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o,a,u=this.mode_;u===vn.LINE_STRING||u===vn.CIRCLE?(this.finishCoordinate_=t.slice(),a=this.sketchCoords_,a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(t.slice()),this.geometryFunction_(a,n,i)):u===vn.POLYGON&&(a=this.sketchCoords_[0],a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(t.slice()),o&&(this.finishCoordinate_=a[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),o&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i,o=this.mode_;if(o===vn.LINE_STRING||o===vn.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var a=this.finishCoordinate_.slice();i[i.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(i,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(o===vn.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var u=this.sketchLine_.getGeometry();if(i.length>=2){var a=i[i.length-2].slice();i[i.length-1]=a,this.createOrUpdateSketchPoint_(a)}u.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,n)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var n=this.sketchCoords_,i=t.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===vn.LINE_STRING?(n.pop(),this.geometryFunction_(n,i,o)):this.mode_===vn.POLYGON&&(n[0].pop(),this.geometryFunction_(n,i,o),n=i.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new g0([n])):this.type_==="MultiLineString"?t.setGeometry(new UD([n])):this.type_==="MultiPolygon"&&t.setGeometry(new $D([n])),this.dispatchEvent(new pN(hN.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new pN(hN.DRAWABORT,t))},e.prototype.appendCoordinates=function(t){var n=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);var o;if(n===vn.LINE_STRING||n===vn.CIRCLE)o=this.sketchCoords_;else if(n===vn.POLYGON)o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&o.shift(),o.pop();for(var a=0;a<t.length;a++)this.addToDrawing_(t[a]);var u=t[t.length-1];this.addToDrawing_(u),this.modifyDrawing_(u)},e.prototype.extend=function(t){var n=t.getGeometry(),i=n;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new gl(new Pa(o)),this.updateSketchFeatures_(),this.dispatchEvent(new pN(hN.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var n=this.overlay_.getSource();n.clear(!0),n.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),n=this.getActive();(!t||!n)&&this.abortDrawing(),this.overlay_.setMap(n?t:null)},e}(Us);function Dtr(){var r=w0();return function(e,t){return r[e.getGeometry().getType()]}}function Ntr(r){switch(r){case"Point":case"MultiPoint":return vn.POINT;case"LineString":case"MultiLineString":return vn.LINE_STRING;case"Polygon":case"MultiPolygon":return vn.POLYGON;case"Circle":return vn.CIRCLE;default:throw new Error("Invalid type: "+r);}}var dN=Ltr;var Dje=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rje=0,XE=1,Pje=[0,0,0,0],P0=[],CZ={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},MZ=function(r){Dje(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.features=n,o.mapBrowserEvent=i,o}return e}(Ei);var qtr=function(r){Dje(e,r);function e(t){var n=r.call(this,t)||this;n.on,n.once,n.un,n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(n),n.condition_=t.condition?t.condition:fN,n.defaultDeleteCondition_=function(o){return Aje(o)&&M0(o)},n.deleteCondition_=t.deleteCondition?t.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:C0,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.featuresBeingModified_=null,n.rBush_=new ZE,n.pixelTolerance_=t.pixelTolerance!==void 0?t.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new cu({source:new Yc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:Ftr(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n)},n.source_=null,n.hitDetection_=null;var i;if(t.features?i=t.features:t.source&&(n.source_=t.source,i=new Xn(n.source_.getFeatures()),n.source_.addEventListener(rs.ADDFEATURE,n.handleSourceAdd_.bind(n)),n.source_.addEventListener(rs.REMOVEFEATURE,n.handleSourceRemove_.bind(n))),!i)throw new Error("The modify interaction requires features, a source or a layer");return t.hitDetection&&(n.hitDetection_=t.hitDetection),n.features_=i,n.features_.forEach(n.addFeature_.bind(n)),n.features_.addEventListener(ai.ADD,n.handleFeatureAdd_.bind(n)),n.features_.addEventListener(ai.REMOVE,n.handleFeatureRemove_.bind(n)),n.lastPointerEvent_=null,n.delta_=[0,0],n.snapToPointer_=t.snapToPointer===void 0?!n.hitDetection_:t.snapToPointer,n}return e.prototype.addFeature_=function(t){var n=t.getGeometry();if(n){var i=this.SEGMENT_WRITERS_[n.getType()];i&&i(t,n)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),t.addEventListener(Lt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Xn;for(var i=this.featuresBeingModified_.getArray(),o=0,a=n.length;o<a;++o)for(var u=n[o],h=0,d=u.length;h<d;++h){var v=u[h].feature;v&&i.indexOf(v)===-1&&this.featuresBeingModified_.push(v)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new MZ(CZ.MODIFYSTART,this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Lt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var n=this.rBush_,i=[];n.forEach(function(h){t===h.feature&&i.push(h)});for(var o=i.length-1;o>=0;--o){for(var a=i[o],u=this.dragSegments_.length-1;u>=0;--u)this.dragSegments_[u][0]===a&&this.dragSegments_.splice(u,1);n.remove(a)}},e.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.prototype.setActive.call(this,t)},e.prototype.setMap=function(t){this.overlay_.setMap(t),r.prototype.setMap.call(this,t)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var n=t.target;this.removeFeature_(n),this.addFeature_(n)}},e.prototype.handleFeatureRemove_=function(t){var n=t.element;this.removeFeature_(n)},e.prototype.writePointGeometry_=function(t,n){var i=n.getCoordinates(),o={feature:t,geometry:n,segment:[i,i]};this.rBush_.insert(n.getExtent(),o)},e.prototype.writeMultiPointGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length;o<a;++o){var u=i[o],h={feature:t,geometry:n,depth:[o],index:o,segment:[u,u]};this.rBush_.insert(n.getExtent(),h)}},e.prototype.writeLineStringGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length-1;o<a;++o){var u=i.slice(o,o+2),h={feature:t,geometry:n,index:o,segment:u};this.rBush_.insert(ia(u),h)}},e.prototype.writeMultiLineStringGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length;o<a;++o)for(var u=i[o],h=0,d=u.length-1;h<d;++h){var v=u.slice(h,h+2),x={feature:t,geometry:n,depth:[o],index:h,segment:v};this.rBush_.insert(ia(v),x)}},e.prototype.writePolygonGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length;o<a;++o)for(var u=i[o],h=0,d=u.length-1;h<d;++h){var v=u.slice(h,h+2),x={feature:t,geometry:n,depth:[o],index:h,segment:v};this.rBush_.insert(ia(v),x)}},e.prototype.writeMultiPolygonGeometry_=function(t,n){for(var i=n.getCoordinates(),o=0,a=i.length;o<a;++o)for(var u=i[o],h=0,d=u.length;h<d;++h)for(var v=u[h],x=0,S=v.length-1;x<S;++x){var A=v.slice(x,x+2),L={feature:t,geometry:n,depth:[h,o],index:x,segment:A};this.rBush_.insert(ia(A),L)}},e.prototype.writeCircleGeometry_=function(t,n){var i=n.getCenter(),o={feature:t,geometry:n,index:Rje,segment:[i,i]},a={feature:t,geometry:n,index:XE,segment:[i,i]},u=[o,a];o.featureSegments=u,a.featureSegments=u,this.rBush_.insert(a0(i),o);var h=n,d=au();if(d&&this.getMap()){var v=this.getMap().getView().getProjection();h=h.clone().transform(d,v),h=GD(h).transform(v,d)}this.rBush_.insert(h.getExtent(),a)},e.prototype.writeGeometryCollectionGeometry_=function(t,n){for(var i=n.getGeometriesArray(),o=0;o<i.length;++o){var a=i[o],u=this.SEGMENT_WRITERS_[a.getType()];u(t,a)}},e.prototype.createOrUpdateVertexFeature_=function(t,n,i){var o=this.vertexFeature_;if(!o)o=new gl(new Pa(t)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o);else{var a=o.getGeometry();a.setCoordinates(t)}return o.set("features",n),o.set("geometries",i),o},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;this.lastPointerEvent_=t;var n;return!t.map.getView().getInteracting()&&t.type==Vr.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(t.type!=Vr.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),t.type==Vr.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),r.prototype.handleEvent.call(this,t)&&!n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var n=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],o=[],a=0,u=this.dragSegments_.length;a<u;++a){var h=this.dragSegments_[a],d=h[0],v=d.feature;i.indexOf(v)===-1&&i.push(v);var x=d.geometry;o.indexOf(x)===-1&&o.push(x);for(var S=d.depth,A=void 0,L=d.segment,q=h[1];n.length<x.getStride();)n.push(L[q][n.length]);switch(x.getType()){case"Point":A=n,L[0]=n,L[1]=n;break;case"MultiPoint":A=x.getCoordinates(),A[d.index]=n,L[0]=n,L[1]=n;break;case"LineString":A=x.getCoordinates(),A[d.index+q]=n,L[q]=n;break;case"MultiLineString":A=x.getCoordinates(),A[S[0]][d.index+q]=n,L[q]=n;break;case"Polygon":A=x.getCoordinates(),A[S[0]][d.index+q]=n,L[q]=n;break;case"MultiPolygon":A=x.getCoordinates(),A[S[1]][S[0]][d.index+q]=n,L[q]=n;break;case"Circle":if(L[0]=n,L[1]=n,d.index===Rje)this.changingFeature_=!0,x.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0;var R=t.map.getView().getProjection(),D=q8(pi(x.getCenter(),R),pi(n,R)),k=au();if(k){var j=x.clone().transform(k,R);j.setRadius(D),D=j.transform(R,k).getRadius()}x.setRadius(D),this.changingFeature_=!1}break;default:}A&&this.setGeometryCoordinates_(x,A)}this.createOrUpdateVertexFeature_(n,i,o)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var n=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;var i=this.vertexFeature_;if(i){var o=t.map.getView().getProjection(),a=[],u=i.getGeometry().getCoordinates(),h=ia([u]),d=this.rBush_.getInExtent(h),v={};d.sort(ktr);for(var x=0,S=d.length;x<S;++x){var A=d[x],L=A.segment,q=tr(A.geometry),R=A.depth;if(R&&(q+="-"+R.join("-")),v[q]||(v[q]=new Array(2)),A.geometry.getType()==="Circle"&&A.index===XE){var D=Lje(n,A,o);ts(D,u)&&!v[q][0]&&(this.dragSegments_.push([A,0]),v[q][0]=A);continue}if(ts(L[0],u)&&!v[q][0]){this.dragSegments_.push([A,0]),v[q][0]=A;continue}if(ts(L[1],u)&&!v[q][1]){if(v[q][0]&&v[q][0].index===0){var k=A.geometry.getCoordinates();switch(A.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":k=k[R[1]];case"Polygon":if(A.index!==k[R[0]].length-2)continue;break;default:}}this.dragSegments_.push([A,1]),v[q][1]=A;continue}tr(L)in this.vertexSegments_&&!v[q][0]&&!v[q][1]&&this.insertVertexCondition_(t)&&a.push(A)}a.length&&this.willModifyFeatures_(t,[a]);for(var j=a.length-1;j>=0;--j)this.insertVertex_(a[j],u)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var n=this.dragSegments_.length-1;n>=0;--n){var i=this.dragSegments_[n][0],o=i.geometry;if(o.getType()==="Circle"){var a=o.getCenter(),u=i.featureSegments[0],h=i.featureSegments[1];u.segment[0]=a,u.segment[1]=a,h.segment[0]=a,h.segment[1]=a,this.rBush_.update(a0(a),u);var d=o,v=au();if(v){var x=t.map.getView().getProjection();d=d.clone().transform(v,x),d=GD(d).transform(x,v)}this.rBush_.update(d.getExtent(),h)}else this.rBush_.update(ia(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new MZ(CZ.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,n,i){var o=this,a=i||n.getCoordinateFromPixel(t),u=n.getView().getProjection(),h=function(Ve,Ke){return Oje(a,Ve,u)-Oje(a,Ke,u)},d,v;if(this.hitDetection_){var x=typeof this.hitDetection_=="object"?function(Ve){return Ve===o.hitDetection_}:void 0;n.forEachFeatureAtPixel(t,function(Ve,Ke,Ce){if(Ce=Ce||Ve.getGeometry(),Ce.getType()==="Point"&&t0(o.features_.getArray(),Ve)){v=Ce;var Se=Ce.getFlatCoordinates().slice(0,2);d=[{feature:Ve,geometry:Ce,segment:[Se,Se]}]}return!0},{layerFilter:x})}if(!d){var S=Ma(a0(a,Pje),u),A=n.getView().getResolution()*this.pixelTolerance_,L=Sd(Zu(S,A,Pje),u);d=this.rBush_.getInExtent(L)}if(d&&d.length>0){var q=d.sort(h)[0],R=q.segment,D=Lje(a,q,u),k=n.getPixelFromCoordinate(D),j=q8(t,k);if(v||j<=this.pixelTolerance_){var $={};if($[tr(R)]=!0,this.snapToPointer_||(this.delta_[0]=D[0]-a[0],this.delta_[1]=D[1]-a[1]),q.geometry.getType()==="Circle"&&q.index===XE)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(D,[q.feature],[q.geometry]);else{var ee=n.getPixelFromCoordinate(R[0]),J=n.getPixelFromCoordinate(R[1]),ie=wd(k,ee),ue=wd(k,J);j=Math.sqrt(Math.min(ie,ue)),this.snappedToVertex_=j<=this.pixelTolerance_,this.snappedToVertex_&&(D=ie>ue?R[1]:R[0]),this.createOrUpdateVertexFeature_(D,[q.feature],[q.geometry]);var le={};le[tr(q.geometry)]=!0;for(var _e=1,Re=d.length;_e<Re;++_e){var ze=d[_e].segment;if(ts(R[0],ze[0])&&ts(R[1],ze[1])||ts(R[0],ze[1])&&ts(R[1],ze[0])){var qe=tr(d[_e].geometry);qe in le||(le[qe]=!0,$[tr(ze)]=!0)}else break}}this.vertexSegments_=$;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,n){for(var i=t.segment,o=t.feature,a=t.geometry,u=t.depth,h=t.index,d;n.length<a.getStride();)n.push(0);switch(a.getType()){case"MultiLineString":d=a.getCoordinates(),d[u[0]].splice(h+1,0,n);break;case"Polygon":d=a.getCoordinates(),d[u[0]].splice(h+1,0,n);break;case"MultiPolygon":d=a.getCoordinates(),d[u[1]][u[0]].splice(h+1,0,n);break;case"LineString":d=a.getCoordinates(),d.splice(h+1,0,n);break;default:return;}this.setGeometryCoordinates_(a,d);var v=this.rBush_;v.remove(t),this.updateSegmentIndices_(a,h,u,1);var x={segment:[i[0],n],feature:o,geometry:a,depth:u,index:h};v.insert(ia(x.segment),x),this.dragSegments_.push([x,1]);var S={segment:[n,i[1]],feature:o,geometry:a,depth:u,index:h+1};v.insert(ia(S.segment),S),this.dragSegments_.push([S,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Vr.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new MZ(CZ.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,n}return!1},e.prototype.removeVertex_=function(){var t=this.dragSegments_,n={},i=!1,o,a,u,h,d,v,x,S,A,L,q;for(d=t.length-1;d>=0;--d)u=t[d],L=u[0],q=tr(L.feature),L.depth&&(q+="-"+L.depth.join("-")),q in n||(n[q]={}),u[1]===0?(n[q].right=L,n[q].index=L.index):u[1]==1&&(n[q].left=L,n[q].index=L.index+1);for(q in n){switch(A=n[q].right,x=n[q].left,v=n[q].index,S=v-1,x!==void 0?L=x:L=A,S<0&&(S=0),h=L.geometry,a=h.getCoordinates(),o=a,i=!1,h.getType()){case"MultiLineString":a[L.depth[0]].length>2&&(a[L.depth[0]].splice(v,1),i=!0);break;case"LineString":a.length>2&&(a.splice(v,1),i=!0);break;case"MultiPolygon":o=o[L.depth[1]];case"Polygon":o=o[L.depth[0]],o.length>4&&(v==o.length-1&&(v=0),o.splice(v,1),i=!0,v===0&&(o.pop(),o.push(o[0]),S=o.length-1));break;default:}if(i){this.setGeometryCoordinates_(h,a);var R=[];if(x!==void 0&&(this.rBush_.remove(x),R.push(x.segment[0])),A!==void 0&&(this.rBush_.remove(A),R.push(A.segment[1])),x!==void 0&&A!==void 0){var D={depth:L.depth,feature:L.feature,geometry:L.geometry,index:S,segment:R};this.rBush_.insert(ia(D.segment),D)}this.updateSegmentIndices_(h,v,L.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return i},e.prototype.setGeometryCoordinates_=function(t,n){this.changingFeature_=!0,t.setCoordinates(n),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,n,i,o){this.rBush_.forEachInExtent(t.getExtent(),function(a){a.geometry===t&&(i===void 0||a.depth===void 0||Ta(a.depth,i))&&a.index>n&&(a.index+=o)})},e}(Us);function ktr(r,e){return r.index-e.index}function Oje(r,e,t){var n=e.geometry;if(n.getType()==="Circle"){var i=n;if(e.index===XE){var o=au();o&&(i=i.clone().transform(o,t));var a=wd(i.getCenter(),pi(r,t)),u=Math.sqrt(a)-i.getRadius();return u*u}}var h=pi(r,t);return P0[0]=pi(e.segment[0],t),P0[1]=pi(e.segment[1],t),tFe(h,P0)}function Lje(r,e,t){var n=e.geometry;if(n.getType()==="Circle"&&e.index===XE){var i=n,o=au();return o&&(i=i.clone().transform(o,t)),bd(i.getClosestPoint(pi(r,t)),t)}var a=pi(r,t);return P0[0]=pi(e.segment[0],t),P0[1]=pi(e.segment[1],t),bd(N8(a,P0),t)}function Ftr(){var r=w0();return function(e,t){return r.Point}}var mN=qtr;var Nje=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jtr={SELECT:"select"},ztr=function(r){Nje(e,r);function e(t,n,i,o){var a=r.call(this,t)||this;return a.selected=n,a.deselected=i,a.mapBrowserEvent=o,a}return e}(Ei);var vN={},Btr=function(r){Nje(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=t||{};n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=i.condition?i.condition:M0,n.addCondition_=i.addCondition?i.addCondition:AZ,n.removeCondition_=i.removeCondition?i.removeCondition:AZ,n.toggleCondition_=i.toggleCondition?i.toggleCondition:Dd,n.multi_=i.multi?i.multi:!1,n.filter_=i.filter?i.filter:Qa,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.style_=i.style!==void 0?i.style:Utr(),n.features_=i.features||new Xn;var o;if(i.layers){if(typeof i.layers=="function")o=i.layers;else{var a=i.layers;o=function(u){return t0(a,u)}}}else o=Qa;return n.layerFilter_=o,n.featureLayerAssociation_={},n}return e.prototype.addFeatureLayerAssociation_=function(t,n){this.featureLayerAssociation_[tr(t)]=n},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[tr(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(t){var n=this.getMap();n&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),r.prototype.setMap.call(this,t),t?(this.features_.addEventListener(ai.ADD,this.boundAddFeature_),this.features_.addEventListener(ai.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ai.ADD,this.boundAddFeature_),this.features_.removeEventListener(ai.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var n=t.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find(function(o){if(o instanceof cu&&o.getSource()&&o.getSource().hasFeature(n))return o});i&&this.addFeatureLayerAssociation_(n,i)}},e.prototype.removeFeature_=function(t){var n=t.element;this.style_&&this.restorePreviousStyle_(n)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var n=tr(t);n in vN||(vN[n]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var n=this.getMap().getInteractions().getArray(),i=n.length-1;i>=0;--i){var o=n[i];if(o!==this&&o instanceof e&&o.getStyle()&&o.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(o.getStyle());return}}var a=tr(t);t.setStyle(vN[a]),delete vN[a]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[tr(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var n=this.addCondition_(t),i=this.removeCondition_(t),o=this.toggleCondition_(t),a=!n&&!i&&!o,u=t.map,h=this.getFeatures(),d=[],v=[];if(a){qs(this.featureLayerAssociation_),u.forEachFeatureAtPixel(t.pixel,function(q,R){if(this.filter_(q,R))return this.addFeatureLayerAssociation_(q,R),v.push(q),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var x=h.getLength()-1;x>=0;--x){var S=h.item(x),A=v.indexOf(S);A>-1?v.splice(A,1):(h.remove(S),d.push(S))}v.length!==0&&h.extend(v)}else{u.forEachFeatureAtPixel(t.pixel,function(q,R){if(this.filter_(q,R))return(n||o)&&!t0(h.getArray(),q)?(this.addFeatureLayerAssociation_(q,R),v.push(q)):(i||o)&&t0(h.getArray(),q)&&(d.push(q),this.removeFeatureLayerAssociation_(q)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var L=d.length-1;L>=0;--L)h.remove(d[L]);h.extend(v)}return(v.length>0||d.length>0)&&this.dispatchEvent(new ztr(jtr.SELECT,v,d,t)),!0},e}(pu);function Utr(){var r=w0();return Fo(r.Polygon,r.LineString),Fo(r.GeometryCollection,r.LineString),function(e){return e.getGeometry()?r[e.getGeometry().getType()]:null}}var RZ=Btr;function PZ(r,e,t){t!==void 0&&t(),r.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let n=o=>{o.target.getTargetElement().style.cursor="grabbing"},i=o=>{o.target.getTargetElement().style.cursor="grab"};return r.on("movestart",n),r.on("moveend",i),e.on("movestart",n),e.on("moveend",i),{disable:()=>{r.un("movestart",n),r.un("moveend",i),e.un("movestart",n),e.un("moveend",i)}}}function qje(r,e,t,n,i,o,a,u){let h="activateAddGcpAction";u!==void 0&&u();let d={START:"Erzeugen Sie einen Passpunkt und setzen Sie daf\xFCr einen Punkt in der originalen Ansicht oder der georeferenzierten Ansicht.",SET_SRC:"Setzen Sie jetzt einen weiteren Punkt in der originalen Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab.",SET_TRG:"Setzen Sie jetzt einen weiteren Punkt in der georeferenzierten Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab."};r.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let v=new dN({source:i,type:"Point",style:Od}),x=new dN({source:o,type:"Point",style:Od});r.addInteraction(v),e.addInteraction(x),i.georeference_id="src",o.georeference_id="trg";let S=()=>{let L=t.getFeatures().length+1,q=i.getFeatures()[0];q.setStyle(Od(`${L}`)),q.setId(L),t.addFeature(q);let R=o.getFeatures()[0];R.setStyle(Od(`${L}`)),R.setId(L),n.addFeature(R),i.clear(),o.clear()},A=L=>{let q=L.target,R=L.feature;(q.georeference_id==="src"&&o.getFeatures().length===1||q.georeference_id==="trg"&&i.getFeatures().length===1)&&setTimeout(S,100),q.getFeatures().length>1&&q.removeFeature(R),q.georeference_id==="src"?a(d.SET_TRG,h):a(d.SET_SRC,h),R.setStyle(aN())};return i.on("addfeature",A),o.on("addfeature",A),a(d.START,h),{disable:()=>{a(null,h),i.clear(),o.clear(),r.removeInteraction(v),e.removeInteraction(x),i.un("addfeature",A),o.un("addfeature",A)}}}function kje(r,e,t,n,i,o){let a="activateMoveGcpAction";o!==void 0&&o();let u={START:"Klicken Sie auf Passpunkt und verschieben Sie diesen mittels Drag&Drop."};r.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let h=new mN({source:t,pixelTolerance:10,style:aN}),d=new mN({source:n,pixelTolerance:10,style:aN});r.addInteraction(h),e.addInteraction(d);let v=S=>{S.target.getMap().getTargetElement().style.cursor="grabbing"},x=S=>{S.target.getMap().getTargetElement().style.cursor="grab"};return h.on("modifystart",v),h.on("modifyend",x),d.on("modifystart",v),d.on("modifyend",x),i(u.START,a),{disable:()=>{i(null,a),h.un("modifystart",v),h.un("modifyend",x),d.un("modifystart",v),d.un("modifyend",x),r.removeInteraction(h),e.removeInteraction(d)}}}function Fje(r,e,t,n,i,o,a,u){let h="activateDelGcpAction";u!==void 0&&u();let d={START:"Klicken Sie auf Passpunkt um diesen zu l\xF6schen."};r.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let v=A=>{if(A.getId()===void 0)return;let q=t.getFeatureById(A.getId()),R=n.getFeatureById(A.getId());q!==null&&R!==null&&(t.removeFeature(q),n.removeFeature(R))},x=new RZ({layer:i,hitTolerance:5,condition:A=>{A.type==="click"&&A.map.forEachFeatureAtPixel(A.pixel,v)}}),S=new RZ({layer:o,hitTolerance:5,condition:A=>{A.type==="click"&&A.map.forEachFeatureAtPixel(A.pixel,v)}});return r.addInteraction(x),e.addInteraction(S),a(d.START,h),{disable:()=>{a(null,h),r.removeInteraction(x),e.removeInteraction(S)}}}function jje(r,e,t,n){let i="activateDrawClipAction";n!==void 0&&n();let o={START:"Klicken Sie auf einen Punkt der georeferenzierten Karte und fangen Sie an das Clip-Polygon zu zeichnen oder zu editieren."};r.getTargetElement().style.cursor="default";let a,u=new dN({features:e.getFeaturesCollection(),type:"Polygon",minPoints:5,condition:d=>{let v=d.coordinate;return!(a!==void 0&&(0,JE.default)(a[0],4)===(0,JE.default)(v[0],4)&&(0,JE.default)(a[1],4)===(0,JE.default)(v[1],4))&&e.getFeatures().length===0}}),h=new mN({features:e.getFeaturesCollection(),deleteCondition:d=>{let v=e.getFeatures().length>=1?e.getFeatures()[0].getGeometry().getCoordinates()[0]:void 0;return v!==void 0&&v.length>5&&Dd(d)&&M0(event)}});return u.on("drawstart",()=>{e.getFeatures().length>=1&&this.abortDrawing()}),r.addInteraction(u),r.addInteraction(h),t(o.START,i),{disable:()=>{t(null,i),r.removeInteraction(u),r.removeInteraction(h)}}}var Pv="EPSG:4326";function zje(r){let{params:e,clip:t}=r,n=[...e.gcps.map(i=>i.target),...(t!=null?t.coordinates[0]:[])];return n.length>0?ia(n):null}function Bje(r){return new BE().readGeometry(r,{dataProjection:Pv,featureProjection:Pv}).getExtent()}function Vtr(r){return[Math.round(r[0]),Math.round(-1*r[1])]}function Gtr(r){return[Math.round(r[0]),Math.round(-1*r[1])]}var gN=class extends xje{constructor(e){super(),this.srcMap_=e.sourceMap,this.trgMap_=e.targetMap,this.params_=e.params,this.clip_=e.clip,this.onSetHelperMsg_=e.onSetHelperMsg,this.clipVectorSource_=new Yc({features:new Xn});let t=new cu({source:this.clipVectorSource_,style:wje(),zIndex:2});t.set("key","clip"),this.trgMap_.addLayer(t),this.srcVectorSource_=new Yc({features:new Xn}),this.trgVectorSource_=new Yc({features:new Xn}),this.srcVectorLayer_=new cu({source:this.srcVectorSource_}),this.srcMap_.addLayer(this.srcVectorLayer_),this.trgVectorLayer_=new cu({source:this.trgVectorSource_,zIndex:3}),this.trgMap_.addLayer(this.trgVectorLayer_),this.editSrcVectorSource_=new Yc({features:new Xn}),this.editTrgVectorSource_=new Yc({features:new Xn}),this.srcMap_.addLayer(new cu({source:this.editSrcVectorSource_})),this.trgMap_.addLayer(new cu({source:this.editTrgVectorSource_,zIndex:4})),this.loadData()}loadData(){if(this.params_.gcps.length>0)for(let e=0,t=this.params_.gcps.length;e<t;e++){let n=e+1,i=new gl(new Pa(Vtr(this.params_.gcps[e].source)));i.setId(n),i.setStyle(Od(`${n}`)),this.srcVectorSource_.addFeature(i);let o=new gl(new Pa(Xu(this.params_.gcps[e].target,Pv,this.trgMap_.getView().getProjection())));o.setId(n),o.setStyle(Od(`${n}`)),this.trgVectorSource_.addFeature(o)}if(this.clip_){let e=new BE().readFeature(this.clip_,{dataProjection:Pv,featureProjection:this.trgMap_.getView().getProjection()});this.clipVectorSource_.addFeature(e)}}activateAddAction(e){return qje(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.editSrcVectorSource_,this.editTrgVectorSource_,this.onSetHelperMsg_,e)}activateMoveAction(e){return kje(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.onSetHelperMsg_,e)}activateDelAction(e){return Fje(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.srcVectorLayer_,this.trgVectorLayer_,this.onSetHelperMsg_,e)}activateDrawClipAction(e){return jje(this.trgMap_,this.clipVectorSource_,this.onSetHelperMsg_,e)}getParams(){let e=this.srcVectorSource_.getFeatures(),t=[];for(let n=0,i=e.length;n<i;n++){let o=e[n],a=this.trgVectorSource_.getFeatureById(o.getId());t.push({source:Gtr(o.getGeometry().getCoordinates()),target:Xu(a.getGeometry().getCoordinates(),this.trgMap_.getView().getProjection(),Pv)})}return Object.assign({},this.params_,{gcps:t})}getClip(){let e=this.clipVectorSource_.getFeatures().length>0?this.clipVectorSource_.getFeatures()[0]:void 0;if(e!==void 0)return new BE().writeGeometryObject(e.getGeometry(),{dataProjection:Pv,featureProjection:"EPSG:3857",decimals:9});this.clip_}hasParamsOrClipChanged(){let t=u=>Object.assign({},u,{target:[(0,OZ.default)(u.target[0],6),(0,OZ.default)(u.target[1],6)]}),n=this.params_.gcps.map(t),i=this.getParams().gcps.map(t),o=JSON.stringify(n)===JSON.stringify(i),a=JSON.stringify(this.clip_)===JSON.stringify(this.getClip());return!o||!a}};var tc={ZOOM_PAN:"control-zoom-pan",ADD_GCP:"control-add-gcp",MOVE_GCP:"control-move-gcp",DEL_GCP:"control-del-gcp",DRAW_CLIP:"control-draw-clip"},yN={AFFINE:"affine",POLYNOM:"polynom",TPS:"tps"};function $tr(){return[{id:tc.ADD_GCP,title:Tr("georef-setgcp"),iconClassName:"icon-point-add"},{id:tc.MOVE_GCP,title:Tr("georef-movegcp"),iconClassName:"icon-point-move"},{id:tc.DEL_GCP,title:Tr("georef-delgcp"),iconClassName:"icon-point-remove"}]}function Htr(){return[{id:yN.AFFINE,title:"Affine",iconClassName:"icon-layercalc"},{id:yN.POLYNOM,title:"Polynom",iconClassName:"icon-layercalc"},{id:yN.TPS,title:"TPS",iconClassName:"icon-layercalc"}]}var Wtr=()=>{let r=Jl(RO),e=Jl(CO),t=Jl(MO),n=Ql(ud),i=Ql(AO),[o,a]=EO(TO),[u,h]=(0,Hi.useState)(null),[d,v]=(0,Hi.useState)(null),[x,S]=(0,Hi.useState)(null),A=pD(d),[L,q]=(0,Hi.useState)(yN.AFFINE),R=(0,Hi.useRef)(null),D=$tr(),k=Htr(),j=ue=>{v(ue)},$=ue=>{q(ue)},ee=()=>{let ue=(le,_e)=>fo(void 0,null,function*(){let Re=R.current.hasParamsOrClipChanged()||L!==r.params.algorithm||(r==null?void 0:r.overwrites)===void 0||r.overwrites===0?yield uOe(le,_e):yield cOe(r.overwrites);a(!1),i(Re)});if(!o){let le=Object.assign(R.current.getParams(),{algorithm:L});le.gcps.length<4?n({id:"toolbar-info",type:"warning",text:Tr("georef-confirm-warn-gcp")}):(a(!0),ue(r.map_id,le))}},J=()=>{if(R.current!==null){let ue={clip:R.current.getClip(),params:Object.assign(R.current.getParams(),{algorithm:L}),overwrites:r.overwrites};ue.params.gcps.length<4?n({id:"toolbar-info",type:"warning",text:Tr("georef-confirm-warn-gcp")}):h({map_id:r.map_id,params:ue})}},ie=()=>{if(u!==null){let ue=(le,_e)=>fo(void 0,null,function*(){let Re=yield lOe(le,_e);if(a(!1),Re.error_code===void 0){let ze=Uje.default.parse(location.search),qe=ze.redirect!==void 0?ze.redirect:"/";window.location.href=`${window.location.origin}${qe}`}else n({id:"toolbar-info",type:"danger",text:Re.error_message})});h(null),a(!0),ue(u.map_id,u.params)}};return(0,Hi.useEffect)(()=>{r!==null&&R.current===null&&e!==null&&t!==null&&(R.current=new gN({clip:(r==null?void 0:r.clip)!==void 0&&(r==null?void 0:r.clip)!==null?{type:r.clip.type,coordinates:r.clip.coordinates}:void 0,onSetHelperMsg:ue=>{n({id:"toolbar-info",type:"info",text:ue})},params:{algorithm:r.params.algorithm,gcps:r.params.gcps},sourceMap:e.map,targetMap:t.map}),v(tc.ZOOM_PAN),S(PZ(e.map,t.map,()=>{})),q(r.params.algorithm))},[r,e,t,v,S,n]),(0,Hi.useEffect)(()=>{x!==void 0&&d!==A&&(d===tc.ZOOM_PAN?S(PZ(e.map,t.map,x.disable)):R.current!==null&&d===tc.ADD_GCP?S(R.current.activateAddAction(x.disable)):R.current!==null&&d===tc.MOVE_GCP?S(R.current.activateMoveAction(x.disable)):R.current!==null&&d===tc.DEL_GCP?S(R.current.activateDelAction(x.disable)):R.current!==null&&d===tc.DRAW_CLIP?S(R.current.activateDrawClipAction(x.disable)):x.disable())},[d,A,x,S]),Hi.default.createElement("div",{className:"vk-georeference-toolbar"},Hi.default.createElement("div",null,Hi.default.createElement($S,{activeControl:d,id:tc.ZOOM_PAN,iconClassName:"icon-move",onClick:j,title:Tr("georef-movemap")}),Hi.default.createElement(I8,{id:"control-toggle-gcp-action",activeControl:d,defaultTitle:Tr("georef-editgcp"),options:D,onClick:j,parentIconClassName:"icon-points"}),Hi.default.createElement($S,{activeControl:d,id:tc.DRAW_CLIP,iconClassName:"icon-draw",onClick:j,title:Tr("georef-drawclip")})),Hi.default.createElement("div",null,Hi.default.createElement(I8,{id:"control-toggle-transformation",activeControl:L,className:"control-toggle-transformations",parentIconClassName:"icon-layercalc",disableActiveBehavior:!0,options:k,onClick:$}),Hi.default.createElement($S,{id:"get-rectified-image",iconClassName:"icon-reload",onClick:ee,title:Tr("georef-validate")}),Hi.default.createElement($S,{id:"confirm-rectified-image",iconClassName:"icon-save",className:"save",onClick:J,title:Tr("georef-confirm")})),u!==null&&Hi.default.createElement(mke,{onClose:()=>h(null),onSubmit:ie}))},Vje=Wtr;var bu=Me(ht(),1),H2=Me(Qr(),1);var tVe=Me(RH(),1);var Oa=Me(ht(),1);var Ztr=()=>Oa.default.createElement("div",{className:"vkf-loading-indicator"},Oa.default.createElement("svg",{className:"loading-icon",version:"1.1",id:"Layer_1",x:"0",y:"0",viewBox:"0 0 70 100"},Oa.default.createElement("rect",{fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 3 50)"},Oa.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite"}),Oa.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1.2s",values:"0;60;0",repeatCount:"indefinite"})),Oa.default.createElement("rect",{x:"17",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 20 50)"},Oa.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.1s"}),Oa.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:".5s",values:"0;5;0",repeatCount:"indefinite"})),Oa.default.createElement("rect",{x:"40",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 40 50)"},Oa.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.3s"}),Oa.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"2s",values:"0;30;0",repeatCount:"indefinite",begin:"0.6s"})),Oa.default.createElement("rect",{x:"60",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 58 50)"},Oa.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.5s"}),Oa.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1s",values:"0;60;0",repeatCount:"indefinite",begin:".3s"}))),Oa.default.createElement("div",{className:"loading-text"},"Loading\u2026")),Gje=Ztr;var $je=Gje;var aK=Me(ht(),1);var nx=Me(ht(),1),NUe=Me(IS(),1),CT=Me(Qr(),1);var Ytr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ktr=function(r){Ytr(e,r);function e(t){var n=r.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+t,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,n=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(t[0],n[0])+i,o.top=Math.min(t[1],n[1])+i,o.width=Math.abs(n[0]-t[0])+i,o.height=Math.abs(n[1]-t[1])+i},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,n=this.endPixel_,i=[t,[t[0],n[1]],n,[n[0],t[1]]],o=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Ju([o])},e.prototype.getGeometry=function(){return this.geometry_},e}(gd),Hje=Ktr;var Wje=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_N={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},LZ=function(r){Wje(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.coordinate=n,o.mapBrowserEvent=i,o}return e}(Ei);var Xtr=function(r){Wje(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=t||{};return n.box_=new Hje(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:lN,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return e.prototype.defaultBoxEndCondition=function(t,n,i){var o=i[0]-n[0],a=i[1]-n[1];return o*o+a*a>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new LZ(_N.BOXDRAG,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new LZ(n?_N.BOXEND:_N.BOXCANCEL,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new LZ(_N.BOXSTART,t.coordinate,t)),!0):!1},e.prototype.onBoxEnd=function(t){},e}(Us),Zje=Xtr;var Jtr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qtr=function(r){Jtr(e,r);function e(t){var n=this,i=t||{},o=i.condition?i.condition:Dd;return n=r.call(this,{condition:o,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return e.prototype.onBoxEnd=function(t){var n=this.getMap(),i=n.getView(),o=this.getGeometry();if(this.out_){var a=i.rotatedExtentForGeometry(o),u=i.getResolutionForExtentInternal(a),h=i.getResolution()/u;o=o.clone(),o.scale(h*h)}i.fitInternal(o,{duration:this.duration_,easing:hu})},e}(Zje),O0=Qtr;var Kc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var err=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),trr=function(r){err(e,r);function e(t){var n=r.call(this)||this,i=t.element;return i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],t.render&&(n.render=t.render),t.target&&n.setTarget(t.target),n}return e.prototype.disposeInternal=function(){UE(this.element),r.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&UE(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)Yr(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=t,t){var o=this.target_?this.target_:t.getOverlayContainerStopEvent();o.appendChild(this.element),this.render!==vl&&this.listenerKeys.push(Ir(t,Kc.POSTRENDER,this.render,this)),t.render()}},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},e}(no),ns=trr;var ao={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var rrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yje=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Kje={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},nrr=function(r){rrr(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var o=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof o=="string"?document.createTextNode(o):o;var a=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;var u=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=u,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(Lt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(uu," ").concat(Vc),n.element.appendChild(n.button_),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){var t=this.getMap();if(t){var n=t.getOwnerDocument();if(Xje(n))if(Jje(n))orr(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?irr(i):Qje(i)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();if(t){var n=this.isInFullscreen_;this.isInFullscreen_=Jje(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(y0(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Kje.ENTERFULLSCREEN)):(y0(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Kje.LEAVEFULLSCREEN)),t.updateSize())}},e.prototype.setClassName_=function(t,n){var i,o,a,u;n?((i=t.classList).remove.apply(i,this.inactiveClassName_),(o=t.classList).add.apply(o,this.activeClassName_)):((a=t.classList).remove.apply(a,this.activeClassName_),(u=t.classList).add.apply(u,this.inactiveClassName_))},e.prototype.setMap=function(t){var n=this.getMap();n&&n.removeChangeListener(ao.TARGET,this.boundHandleMapTargetChange_),r.prototype.setMap.call(this,t),this.handleMapTargetChange_(),t&&t.addChangeListener(ao.TARGET,this.boundHandleMapTargetChange_)},e.prototype.handleMapTargetChange_=function(){for(var t=this.documentListeners_,n=0,i=t.length;n<i;++n)Yr(t[n]);t.length=0;var o=this.getMap();if(o){var a=o.getOwnerDocument();Xje(a)?this.element.classList.remove(sZ):this.element.classList.add(sZ);for(var n=0,i=Yje.length;n<i;++n)t.push(Ir(a,Yje[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},e}(ns);function Xje(r){var e=r.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&r.msFullscreenEnabled||e.requestFullscreen&&r.fullscreenEnabled)}function Jje(r){return!!(r.webkitIsFullScreen||r.msFullscreenElement||r.fullscreenElement)}function Qje(r){r.requestFullscreen?r.requestFullscreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}function irr(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():Qje(r)}function orr(r){r.exitFullscreen?r.exitFullscreen():r.msExitFullscreen?r.msExitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}var xN=nrr;var arr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),srr=function(r){arr(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==Vr.DBLCLICK){var i=t.originalEvent,o=t.map,a=t.coordinate,u=i.shiftKey?-this.delta_:this.delta_,h=o.getView();I0(h,u,a,this.duration_),i.preventDefault(),n=!0}return!n},e}(pu),eze=srr;var lrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),urr=function(r){lrr(e,r);function e(t){var n=r.call(this,{stopDown:ru})||this,i=t||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var o=i.condition?i.condition:KE(R0,fN);return n.condition_=i.onFocusOnly?KE(sN,o):o,n.noKinetic_=!1,n}return e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=A0(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=t.map,u=a.getView();eFe(o,u.getResolution()),m0(o,u.getRotation()),u.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),u=i.getCenterInternal(),h=n.getPixelFromCoordinateInternal(u),d=n.getCoordinateFromPixelInternal([h[0]-o*Math.cos(a),h[1]-o*Math.sin(a)]);i.animateInternal({center:i.getConstrainedCenter(d),duration:500,easing:hu})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var n=t.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(Us),tze=urr;function L0(r){if(r!==void 0)return 0}function DZ(r){if(r!==void 0)return r}function rze(r){var e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function nze(r){var e=r||f0(5);return function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}var crr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),frr=function(r){crr(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,{stopDown:ru})||this,n.condition_=i.condition?i.condition:Cje,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(t){if(cN(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==L0){var o=n.getSize(),a=t.pixel,u=Math.atan2(o[1]/2-a[1],a[0]-o[0]/2);if(this.lastAngle_!==void 0){var h=u-this.lastAngle_;i.adjustRotationInternal(-h)}this.lastAngle_=u}}},e.prototype.handleUpEvent=function(t){if(!cN(t))return!0;var n=t.map,i=n.getView();return i.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(t){if(!cN(t))return!1;if(lN(t)&&this.condition_(t)){var n=t.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(Us),ize=frr;var Nd={LEFT:37,UP:38,RIGHT:39,DOWN:40};var hrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),prr=function(r){hrr(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.defaultCondition_=function(o){return R0(o)&&uN(o)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==Lt.KEYDOWN){var i=t.originalEvent,o=i.keyCode;if(this.condition_(t)&&(o==Nd.DOWN||o==Nd.LEFT||o==Nd.RIGHT||o==Nd.UP)){var a=t.map,u=a.getView(),h=u.getResolution()*this.pixelDelta_,d=0,v=0;o==Nd.DOWN?v=-h:o==Nd.LEFT?d=-h:o==Nd.RIGHT?d=h:v=h;var x=[d,v];m0(x,u.getRotation()),Ije(u,x,this.duration_),i.preventDefault(),n=!0}}return!n},e}(pu),oze=prr;var drr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mrr=function(r){drr(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.condition_=i.condition?i.condition:uN,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==Lt.KEYDOWN||t.type==Lt.KEYPRESS){var i=t.originalEvent,o=i.charCode;if(this.condition_(t)&&(o==43||o==45)){var a=t.map,u=o==43?this.delta_:-this.delta_,h=a.getView();I0(h,u,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},e}(pu),aze=mrr;var vrr=function(){function r(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var n=t-3;n>0&&this.points_[n+2]>e;)n-=3;var i=this.points_[t+2]-this.points_[n+2];if(i<16.666666666666668)return!1;var o=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/i,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_},r}(),sze=vrr;var grr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),NZ={TRACKPAD:"trackpad",WHEEL:"wheel"},yrr=function(r){grr(e,r);function e(t){var n=this,i=t||{};n=r.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var o=i.condition?i.condition:C0;return n.condition_=i.onFocusOnly?KE(sN,o):o,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();if(t){var n=t.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var n=t.type;if(n!==Lt.WHEEL)return!0;var i=t.map,o=t.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var a;if(t.type==Lt.WHEEL&&(a=o.deltaY,Cke&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=xD),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?NZ.TRACKPAD:NZ.WHEEL);var h=i.getView();if(this.mode_===NZ.TRACKPAD&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=u,!1;this.totalDelta_+=a;var d=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),d),!1},e.prototype.handleWheelZoom_=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-zn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),I0(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(pu),lze=yrr;var _rr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xrr=function(r){_rr(e,r);function e(t){var n=this,i=t||{},o=i;return o.stopDown||(o.stopDown=ru),n=r.call(this,o)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],o=this.targetPointers[1],a=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){var u=a-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=u}this.lastAngle_=a;var h=t.map,d=h.getView();if(d.getConstraints().rotation!==L0){var v=h.getViewport().getBoundingClientRect(),x=A0(this.targetPointers);x[0]-=v.left,x[1]-=v.top,this.anchor_=h.getCoordinateFromPixelInternal(x),this.rotating_&&(h.render(),d.adjustRotationInternal(n,this.anchor_))}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(Us),uze=xrr;var wrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),brr=function(r){wrr(e,r);function e(t){var n=this,i=t||{},o=i;return o.stopDown||(o.stopDown=ru),n=r.call(this,o)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return e.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],o=this.targetPointers[1],a=i.clientX-o.clientX,u=i.clientY-o.clientY,h=Math.sqrt(a*a+u*u);this.lastDistance_!==void 0&&(n=this.lastDistance_/h),this.lastDistance_=h;var d=t.map,v=d.getView();n!=1&&(this.lastScaleDelta_=n);var x=d.getViewport().getBoundingClientRect(),S=A0(this.targetPointers);S[0]-=x.left,S[1]-=x.top,this.anchor_=d.getCoordinateFromPixelInternal(S),d.render(),v.adjustResolutionInternal(n,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map,i=n.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(Us),cze=brr;function D0(r){var e=r||{},t=new Xn,n=new sze(-.005,.05,100),i=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;i&&t.push(new ize);var o=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;o&&t.push(new eze({delta:e.zoomDelta,duration:e.zoomDuration}));var a=e.dragPan!==void 0?e.dragPan:!0;a&&t.push(new tze({onFocusOnly:e.onFocusOnly,kinetic:n}));var u=e.pinchRotate!==void 0?e.pinchRotate:!0;u&&t.push(new uze);var h=e.pinchZoom!==void 0?e.pinchZoom:!0;h&&t.push(new cze({duration:e.zoomDuration}));var d=e.keyboard!==void 0?e.keyboard:!0;d&&(t.push(new oze),t.push(new aze({delta:e.zoomDelta,duration:e.zoomDuration})));var v=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;v&&t.push(new lze({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var x=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return x&&t.push(new O0({duration:e.zoomDuration})),t}var Srr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Err=function(r){Srr(e,r);function e(t){var n=r.call(this)||this;return n.map_=t,n}return e.prototype.dispatchRenderEvent=function(t,n){ir()},e.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;io(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),o0(o,i)},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a,u,h,d){var v,x=n.viewState;function S(Ke,Ce,Se,Ie){return a.call(u,Ce,Ke?Se:null,Ie)}var A=x.projection,L=OD(t.slice(),A),q=[[0,0]];if(A.canWrapX()&&o){var R=A.getExtent(),D=ln(R);q.push([-D,0],[D,0])}for(var k=n.layerStatesArray,j=k.length,$=[],ee=[],J=0;J<q.length;J++)for(var ie=j-1;ie>=0;--ie){var ue=k[ie],le=ue.layer;if(le.hasRenderer()&&Iv(ue,x)&&h.call(d,le)){var _e=le.getRenderer(),Re=le.getSource();if(_e&&Re){var ze=Re.getWrapX()?L:t,qe=S.bind(null,ue.managed);ee[0]=ze[0]+q[J][0],ee[1]=ze[1]+q[J][1],v=_e.forEachFeatureAtCoordinate(ee,n,i,qe,$)}if(v)return v}}if($.length!==0){var Ve=1/$.length;return $.forEach(function(Ke,Ce){return Ke.distanceSq+=Ce*Ve}),$.sort(function(Ke,Ce){return Ke.distanceSq-Ce.distanceSq}),$.some(function(Ke){return v=Ke.callback(Ke.feature,Ke.layer,Ke.geometry)}),v}},e.prototype.forEachLayerAtPixel=function(t,n,i,o,a){return ir()},e.prototype.hasFeatureAtCoordinate=function(t,n,i,o,a,u){var h=this.forEachFeatureAtCoordinate(t,n,i,o,Qa,this,a,u);return h!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){ir()},e.prototype.scheduleExpireIconCache=function(t){T0.canExpireCache()&&t.postRenderFunctions.push(Trr)},e}(gd);function Trr(r,e){T0.expire()}var fze=Err;var Irr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Arr=function(r){Irr(e,r);function e(t){var n=r.call(this,t)||this;n.fontChangeListenerKey_=Ir(Gc,$u.PROPERTYCHANGE,t.redrawText.bind(t)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=uu+" ol-layers";var o=t.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return e.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var o=new Cd(t,void 0,n);i.dispatchEvent(o)}},e.prototype.disposeInternal=function(){Yr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),r.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(_o.PRECOMPOSE,t);var n=t.layerStatesArray.sort(function(A,L){return A.zIndex-L.zIndex}),i=t.viewState;this.children_.length=0;for(var o=[],a=null,u=0,h=n.length;u<h;++u){var d=n[u];t.layerIndex=u;var v=d.layer,x=v.getSourceState();if(!Iv(d,i)||x!="ready"&&x!="undefined"){v.unrender();continue}var S=v.render(t,a);S&&(S!==a&&(this.children_.push(S),a=S),"getDeclutter"in v&&o.push(v))}for(var u=o.length-1;u>=0;--u)o[u].renderDeclutter(t);FFe(this.element_,this.children_),this.dispatchRenderEvent(_o.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},e.prototype.forEachLayerAtPixel=function(t,n,i,o,a){for(var u=n.viewState,h=n.layerStatesArray,d=h.length,v=d-1;v>=0;--v){var x=h[v],S=x.layer;if(S.hasRenderer()&&Iv(x,u)&&a(S)){var A=S.getRenderer(),L=A.getDataAtPixel(t,n,i);if(L){var q=o(S,L);if(q)return q}}}},e}(fze),hze=Arr;var pze=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_h=function(r){pze(e,r);function e(t,n){var i=r.call(this,t)||this;return i.layer=n,i}return e}(Ei);var qZ={LAYERS:"layers"},Crr=function(r){pze(e,r);function e(t){var n=this,i=t||{},o=Ur({},i);delete o.layers;var a=i.layers;return n=r.call(this,o)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(qZ.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new Xn(a.slice(),{unique:!0}):or(typeof a.getArray=="function",43):a=new Xn(void 0,{unique:!0}),n.setLayers(a),n}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Yr),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(Ir(t,ai.ADD,this.handleLayersAdd_,this),Ir(t,ai.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(Yr);qs(this.listenerKeys_);for(var i=t.getArray(),o=0,a=i.length;o<a;o++){var u=i[o];this.registerLayerListeners_(u),this.dispatchEvent(new _h("addlayer",u))}this.changed()},e.prototype.registerLayerListeners_=function(t){var n=[Ir(t,$u.PROPERTYCHANGE,this.handleLayerChange_,this),Ir(t,Lt.CHANGE,this.handleLayerChange_,this)];t instanceof e&&n.push(Ir(t,"addlayer",this.handleLayerGroupAdd_,this),Ir(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[tr(t)]=n},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new _h("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new _h("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new _h("addlayer",n)),this.changed()},e.prototype.handleLayersRemove_=function(t){var n=t.element,i=tr(n);this.listenerKeys_[i].forEach(Yr),delete this.listenerKeys_[i],this.dispatchEvent(new _h("removelayer",n)),this.changed()},e.prototype.getLayers=function(){return this.get(qZ.LAYERS)},e.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),o=0,a=i.length;o<a;++o)this.dispatchEvent(new _h("removelayer",i[o]));this.set(qZ.LAYERS,t)},e.prototype.getLayersArray=function(t){var n=t!==void 0?t:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},e.prototype.getLayerStatesArray=function(t){var n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(v){v.getLayerStatesArray(n)});var o=this.getLayerState(),a=o.zIndex;!t&&o.zIndex===void 0&&(a=0);for(var u=i,h=n.length;u<h;u++){var d=n[u];d.opacity*=o.opacity,d.visible=d.visible&&o.visible,d.maxResolution=Math.min(d.maxResolution,o.maxResolution),d.minResolution=Math.max(d.minResolution,o.minResolution),d.minZoom=Math.max(d.minZoom,o.minZoom),d.maxZoom=Math.min(d.maxZoom,o.maxZoom),o.extent!==void 0&&(d.extent!==void 0?d.extent=nu(d.extent,o.extent):d.extent=o.extent),d.zIndex===void 0&&(d.zIndex=a)}return n},e.prototype.getSourceState=function(){return"ready"},e}(HD),QE=Crr;var eT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Mrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rrr=function(r){Mrr(e,r);function e(t,n){var i=r.call(this,t)||this;i.map_=t,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=Ir(o,eT.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=Ir(o,eT.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(Lt.TOUCHMOVE,i.boundHandleTouchMove_,wD?{passive:!1}:!1),i}return e.prototype.emulateClick_=function(t){var n=new fu(Vr.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new fu(Vr.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new fu(Vr.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var n=t,i=n.pointerId;if(n.type==Vr.POINTERUP||n.type==Vr.POINTERCANCEL){delete this.trackedTouches_[i];for(var o in this.trackedTouches_)if(this.trackedTouches_[o].target!==n.target){delete this.trackedTouches_[o];break}}else(n.type==Vr.POINTERDOWN||n.type==Vr.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=vD(this.trackedTouches_)},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var n=new fu(Vr.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Yr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return t.button===0},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);var n=new fu(Vr.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var i in t){var o=t[i];this.down_[i]=typeof o=="function"?vl:o}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ir(a,Vr.POINTERMOVE,this.handlePointerMove_,this),Ir(a,Vr.POINTERUP,this.handlePointerUp_,this),Ir(this.element_,Vr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(Ir(this.element_.getRootNode(),Vr.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;var n=new fu(Vr.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},e.prototype.relayMoveEvent_=function(t){this.originalPointerMoveEvent_=t;var n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new fu(Vr.POINTERMOVE,this.map_,t,n))},e.prototype.handleTouchMove_=function(t){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Yr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Lt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Yr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Yr),this.dragListenerKeys_.length=0,this.element_=null,r.prototype.disposeInternal.call(this)},e}(ks),dze=Rrr;var tT=1/0,Prr=function(){function r(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return r.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,qs(this.queuedElements_)},r.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},r.prototype.enqueue=function(e){or(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=tT?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},r.prototype.getCount=function(){return this.elements_.length},r.prototype.getLeftChildIndex_=function(e){return e*2+1},r.prototype.getRightChildIndex_=function(e){return e*2+2},r.prototype.getParentIndex_=function(e){return e-1>>1},r.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},r.prototype.isEmpty=function(){return this.elements_.length===0},r.prototype.isKeyQueued=function(e){return e in this.queuedElements_},r.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},r.prototype.siftUp_=function(e){for(var t=this.elements_,n=this.priorities_,i=t.length,o=t[e],a=n[e],u=e;e<i>>1;){var h=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),v=d<i&&n[d]<n[h]?d:h;t[e]=t[v],n[e]=n[v],e=v}t[e]=o,n[e]=a,this.siftDown_(u,e)},r.prototype.siftDown_=function(e,t){for(var n=this.elements_,i=this.priorities_,o=n[t],a=i[t];t>e;){var u=this.getParentIndex_(t);if(i[u]>a)n[t]=n[u],i[t]=i[u],t=u;else break}n[t]=o,i[t]=a},r.prototype.reprioritize=function(){var e=this.priorityFunction_,t=this.elements_,n=this.priorities_,i=0,o=t.length,a,u,h;for(u=0;u<o;++u)a=t[u],h=e(a),h==tT?delete this.queuedElements_[this.keyFunction_(a)]:(n[i]=h,t[i++]=a);t.length=i,n.length=i,this.heapify_()},r}(),mze=Prr;var Bt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Orr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lrr=function(r){Orr(e,r);function e(t,n){var i=r.call(this,function(o){return t.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return e.prototype.enqueue=function(t){var n=r.prototype.enqueue.call(this,t);if(n){var i=t[0];i.addEventListener(Lt.CHANGE,this.boundHandleTileChange_)}return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===Bt.LOADED||i===Bt.ERROR||i===Bt.EMPTY){n.removeEventListener(Lt.CHANGE,this.boundHandleTileChange_);var o=n.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,n){for(var i=0,o,a,u;this.tilesLoading_<t&&i<n&&this.getCount()>0;)a=this.dequeue()[0],u=a.getKey(),o=a.getState(),o===Bt.IDLE&&!(u in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[u]=!0,++this.tilesLoading_,++i,a.load())},e}(mze),vze=Lrr;function gze(r,e,t,n,i){if(!r||!(t in r.wantedTiles))return tT;if(!r.wantedTiles[t][e.getKey()])return tT;var o=r.viewState.center,a=n[0]-o[0],u=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+u*u)/i}var du={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var yze=42,qd=256;function kZ(r,e,t){return function(n,i,o,a,u){if(n){if(!i&&!e)return n;var h=e?0:o[0]*i,d=e?0:o[1]*i,v=u?u[0]:0,x=u?u[1]:0,S=r[0]+h/2+v,A=r[2]-h/2+v,L=r[1]+d/2+x,q=r[3]-d/2+x;S>A&&(S=(A+S)/2,A=S),L>q&&(L=(q+L)/2,q=L);var R=zn(n[0],S,A),D=zn(n[1],L,q);if(a&&t&&i){var k=30*i;R+=-k*Math.log(1+Math.max(0,S-n[0])/k)+k*Math.log(1+Math.max(0,n[0]-A)/k),D+=-k*Math.log(1+Math.max(0,L-n[1])/k)+k*Math.log(1+Math.max(0,n[1]-q)/k)}return[R,D]}}}function _ze(r){return r}function FZ(r,e,t,n){var i=ln(e)/t[0],o=yo(e)/t[1];return n?Math.min(r,Math.max(i,o)):Math.min(r,Math.min(i,o))}function jZ(r,e,t){var n=Math.min(r,e),i=50;return n*=Math.log(1+i*Math.max(0,r/e-1))/i+1,t&&(n=Math.max(n,t),n/=Math.log(1+i*Math.max(0,t/r-1))/i+1),zn(n,t/2,e*2)}function xze(r,e,t,n){return function(i,o,a,u){if(i!==void 0){var h=r[0],d=r[r.length-1],v=t?FZ(h,t,a,n):h;if(u){var x=e!==void 0?e:!0;return x?jZ(i,v,d):zn(i,d,v)}var S=Math.min(v,i),A=Math.floor(r0(r,S,o));return r[A]>v&&A<r.length-1?r[A+1]:r[A]}else return}}function wze(r,e,t,n,i,o){return function(a,u,h,d){if(a!==void 0){var v=i?FZ(e,i,h,o):e,x=t!==void 0?t:0;if(d){var S=n!==void 0?n:!0;return S?jZ(a,v,x):zn(a,x,v)}var A=1e-9,L=Math.ceil(Math.log(e/v)/Math.log(r)-A),q=-u*(.5-A)+.5,R=Math.min(v,a),D=Math.floor(Math.log(e/R)/Math.log(r)+q),k=Math.max(L,D),j=e/Math.pow(r,k);return zn(j,x,v)}else return}}function zZ(r,e,t,n,i){return function(o,a,u,h){if(o!==void 0){var d=n?FZ(r,n,u,i):r,v=t!==void 0?t:!0;return!v||!h?zn(o,e,d):jZ(o,d,e)}else return}}var Drr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),BZ=0,Nrr=function(r){Drr(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=Ur({},t);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=LD(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&iFe(),i.center&&(i.center=pi(i.center,n.projection_)),i.extent&&(i.extent=Ma(i.extent,n.projection_)),n.applyOptions_(i),n}return e.prototype.applyOptions_=function(t){var n=Ur({},t);for(var i in du)delete n[i];this.setProperties(n,!0);var o=krr(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=o.minZoom;var a=qrr(t),u=o.constraint,h=Frr(t);this.constraints_={center:a,resolution:u,rotation:h},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var n=this.padding_;this.padding_=t;var i=this.getCenter();if(i){var o=t||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),u=a/2*(o[3]-n[3]+n[1]-o[1]),h=a/2*(o[0]-n[0]+n[2]-o[2]);this.setCenterInternal([i[0]+u,i[1]-h])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Ur({},n,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var o=arguments[i];o.center&&(o=Ur({},o),o.center=pi(o.center,this.getProjection())),o.anchor&&(o=Ur({},o),o.anchor=pi(o.anchor,this.getProjection())),n[i]=o}this.animateInternal.apply(this,n)},e.prototype.animateInternal=function(t){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var a=arguments[o];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(o===n){i&&wN(i,!0);return}for(var u=Date.now(),h=this.targetCenter_.slice(),d=this.targetResolution_,v=this.targetRotation_,x=[];o<n;++o){var S=arguments[o],A={start:u,complete:!1,anchor:S.anchor,duration:S.duration!==void 0?S.duration:1e3,easing:S.easing||Eje,callback:i};if(S.center&&(A.sourceCenter=h,A.targetCenter=S.center.slice(),h=A.targetCenter),S.zoom!==void 0?(A.sourceResolution=d,A.targetResolution=this.getResolutionForZoom(S.zoom),d=A.targetResolution):S.resolution&&(A.sourceResolution=d,A.targetResolution=S.resolution,d=A.targetResolution),S.rotation!==void 0){A.sourceRotation=v;var L=yl(S.rotation-v+Math.PI,2*Math.PI)-Math.PI;A.targetRotation=v+L,v=A.targetRotation}jrr(A)?A.complete=!0:u+=A.duration,x.push(A)}this.animations_.push(x),this.setHint(xo.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[xo.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[xo.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(xo.ANIMATING,-this.hints_[xo.ANIMATING]);for(var t,n=0,i=this.animations_.length;n<i;++n){var o=this.animations_[n];if(o[0].callback&&wN(o[0].callback,!1),!t)for(var a=0,u=o.length;a<u;++a){var h=o[a];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],a=!0,u=0,h=o.length;u<h;++u){var d=o[u];if(!d.complete){var v=t-d.start,x=d.duration>0?v/d.duration:1;x>=1?(d.complete=!0,x=1):a=!1;var S=d.easing(x);if(d.sourceCenter){var A=d.sourceCenter[0],L=d.sourceCenter[1],q=d.targetCenter[0],R=d.targetCenter[1];this.nextCenter_=d.targetCenter;var D=A+S*(q-A),k=L+S*(R-L);this.targetCenter_=[D,k]}if(d.sourceResolution&&d.targetResolution){var j=S===1?d.targetResolution:d.sourceResolution+S*(d.targetResolution-d.sourceResolution);if(d.anchor){var $=this.getViewportSize_(this.getRotation()),ee=this.constraints_.resolution(j,0,$,!0);this.targetCenter_=this.calculateCenterZoom(ee,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=j,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){var J=S===1?yl(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+S*(d.targetRotation-d.sourceRotation);if(d.anchor){var ie=this.constraints_.rotation(J,!0);this.targetCenter_=this.calculateCenterRotate(ie,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=J}if(this.applyTargetState_(!0),n=!0,!d.complete)break}}if(a){this.animations_[i]=null,this.setHint(xo.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var ue=o[0].callback;ue&&wN(ue,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,n){var i,o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-n[0],o[1]-n[1]],m0(i,t-this.getRotation()),Qke(i,n)),i},e.prototype.calculateCenterZoom=function(t,n){var i,o=this.getCenterInternal(),a=this.getResolution();if(o!==void 0&&a!==void 0){var u=n[0]-t*(n[0]-o[0])/a,h=n[1]-t*(n[1]-o[1])/a;i=[u,h]}return i},e.prototype.getViewportSize_=function(t){var n=this.viewportSize_;if(t){var i=n[0],o=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(o*Math.cos(t))]}else return n},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&bd(t,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(du.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var n=this.calculateExtentInternal(t);return Sd(n,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var n=t||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();or(i,1);var o=this.getResolution();or(o!==void 0,2);var a=this.getRotation();return or(a!==void 0,3),EE(i,o,a,n)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(du.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Ma(t,this.getProjection()),n)},e.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.getViewportSizeMinusPadding_(),o=ln(t)/i[0],a=yo(t)/i[1];return Math.max(o,a)},e.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,a=Math.log(i/o)/Math.log(n);return function(u){var h=i/Math.pow(n,u*a);return h}},e.prototype.getRotation=function(){return this.get(du.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,a=Math.log(i/o)/n;return function(u){var h=Math.log(i/u)/n/a;return h}},e.prototype.getViewportSizeMinusPadding_=function(t){var n=this.getViewportSize_(t),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},e.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),a=this.padding_;if(a){var u=this.getViewportSizeMinusPadding_();o=UZ(o,this.getViewportSize_(),[u[0]/2+a[3],u[1]/2+a[0]],n,i)}return{center:o.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t},e.prototype.getZoomForResolution=function(t){var n=this.minZoom_||0,i,o;if(this.resolutions_){var a=r0(this.resolutions_,t,1);n=a,i=this.resolutions_[a],a==this.resolutions_.length-1?o=2:o=i/this.resolutions_[a+1]}else i=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(i/t)/Math.log(o)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=zn(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,zn(t-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,n){var i;if(or(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){or(!wv(t),25);var o=Ma(t,this.getProjection());i=zE(o)}else if(t.getType()==="Circle"){var o=Ma(t.getExtent(),this.getProjection());i=zE(o),i.rotate(this.getRotation(),js(o))}else{var a=au();a?i=t.clone().transform(a,this.getProjection()):i=t}this.fitInternal(i,n)},e.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),o=Math.sin(-n),a=t.getFlatCoordinates(),u=t.getStride(),h=1/0,d=1/0,v=-1/0,x=-1/0,S=0,A=a.length;S<A;S+=u){var L=a[S]*i-a[S+1]*o,q=a[S]*o+a[S+1]*i;h=Math.min(h,L),d=Math.min(d,q),v=Math.max(v,L),x=Math.max(x,q)}return[h,d,v,x]},e.prototype.fitInternal=function(t,n){var i=n||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var a=i.padding!==void 0?i.padding:[0,0,0,0],u=i.nearest!==void 0?i.nearest:!1,h;i.minResolution!==void 0?h=i.minResolution:i.maxZoom!==void 0?h=this.getResolutionForZoom(i.maxZoom):h=0;var d=this.rotatedExtentForGeometry(t),v=this.getResolutionForExtentInternal(d,[o[0]-a[1]-a[3],o[1]-a[0]-a[2]]);v=isNaN(v)?h:Math.max(v,h),v=this.getConstrainedResolution(v,u?0:1);var x=this.getRotation(),S=Math.sin(x),A=Math.cos(x),L=js(d);L[0]+=(a[1]-a[3])/2*v,L[1]+=(a[0]-a[2])/2*v;var q=L[0]*A-L[1]*S,R=L[1]*A+L[0]*S,D=this.getConstrainedCenter([q,R],v),k=i.callback?i.callback:vl;i.duration!==void 0?this.animateInternal({resolution:v,center:D,duration:i.duration,easing:i.easing},k):(this.targetResolution_=v,this.targetCenter_=D,this.applyTargetState_(!1,!0),wN(k,!0))},e.prototype.centerOn=function(t,n,i){this.centerOnInternal(pi(t,this.getProjection()),n,i)},e.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(UZ(t,n,i,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,n,i,o){var a,u=this.padding_;if(u&&t){var h=this.getViewportSizeMinusPadding_(-i),d=UZ(t,o,[h[0]/2+u[3],h[1]/2+u[0]],n,i);a=[t[0]-d[0],t[1]-d[1]]}return a},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(t){var n=bd(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},e.prototype.adjustResolution=function(t,n){var i=n&&pi(n,this.getProjection());this.adjustResolutionInternal(t,i)},e.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*t,0,o,i);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)},e.prototype.adjustRotation=function(t,n){n&&(n=pi(n,this.getProjection())),this.adjustRotationInternal(t,n)},e.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(o,n)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(t&&pi(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,o=this.constraints_.rotation(this.targetRotation_,i),a=this.getViewportSize_(o),u=this.constraints_.resolution(this.targetResolution_,0,a,i),h=this.constraints_.center(this.targetCenter_,u,a,i,this.calculateCenterShift(this.targetCenter_,u,o,a));this.get(du.ROTATION)!==o&&this.set(du.ROTATION,o),this.get(du.RESOLUTION)!==u&&(this.set(du.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(du.CENTER)||!ts(this.get(du.CENTER),h))&&this.set(du.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,n,i){var o=t!==void 0?t:200,a=n||0,u=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(u),d=this.constraints_.resolution(this.targetResolution_,a,h),v=this.constraints_.center(this.targetCenter_,d,h,!1,this.calculateCenterShift(this.targetCenter_,d,u,h));if(o===0&&!this.cancelAnchor_){this.targetResolution_=d,this.targetRotation_=u,this.targetCenter_=v,this.applyTargetState_();return}var x=i||(o===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==d||this.getRotation()!==u||!this.getCenterInternal()||!ts(this.getCenterInternal(),v))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:u,center:v,resolution:d,duration:o,easing:hu,anchor:x}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(xo.INTERACTING,1)},e.prototype.endInteraction=function(t,n,i){var o=i&&pi(i,this.getProjection());this.endInteractionInternal(t,n,o)},e.prototype.endInteractionInternal=function(t,n,i){this.setHint(xo.INTERACTING,-1),this.resolveConstraints(t,n,i)},e.prototype.getConstrainedCenter=function(t,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},e.prototype.getConstrainedResolution=function(t,n){var i=n||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,o)},e}(no);function wN(r,e){setTimeout(function(){r(e)},0)}function qrr(r){if(r.extent!==void 0){var e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return kZ(r.extent,r.constrainOnlyCenter,e)}var t=LD(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){var n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,kZ(n,!1,!1)}return _ze}function krr(r){var e,t,n,i=28,o=2,a=r.minZoom!==void 0?r.minZoom:BZ,u=r.maxZoom!==void 0?r.maxZoom:i,h=r.zoomFactor!==void 0?r.zoomFactor:o,d=r.multiWorld!==void 0?r.multiWorld:!1,v=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,x=r.showFullExtent!==void 0?r.showFullExtent:!1,S=LD(r.projection,"EPSG:3857"),A=S.getExtent(),L=r.constrainOnlyCenter,q=r.extent;if(!d&&!q&&S.isGlobal()&&(L=!1,q=A),r.resolutions!==void 0){var R=r.resolutions;t=R[a],n=R[u]!==void 0?R[u]:R[R.length-1],r.constrainResolution?e=xze(R,v,!L&&q,x):e=zZ(t,n,v,!L&&q,x)}else{var D=A?Math.max(ln(A),yo(A)):360*Ia[Aa.DEGREES]/S.getMetersPerUnit(),k=D/qd/Math.pow(o,BZ),j=k/Math.pow(o,i-BZ);t=r.maxResolution,t!==void 0?a=0:t=k/Math.pow(h,a),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(h,u):n=k/Math.pow(h,u):n=j),u=a+Math.floor(Math.log(t/n)/Math.log(h)),n=t/Math.pow(h,u-a),r.constrainResolution?e=wze(h,t,n,v,!L&&q,x):e=zZ(t,n,v,!L&&q,x)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:h}}function Frr(r){var e=r.enableRotation!==void 0?r.enableRotation:!0;if(e){var t=r.constrainRotation;return t===void 0||t===!0?nze():t===!1?DZ:typeof t=="number"?rze(t):DZ}else return L0}function jrr(r){return!(r.sourceCenter&&r.targetCenter&&!ts(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function UZ(r,e,t,n,i){var o=Math.cos(-i),a=Math.sin(-i),u=r[0]*o-r[1]*a,h=r[1]*o+r[0]*a;u+=(e[0]/2-t[0])*n,h+=(t[1]-e[1]/2)*n,a=-a;var d=u*o-h*a,v=h*o+u*a;return[d,v]}var mu=Nrr;var zrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function bze(r){if(r instanceof Av){r.setMapInternal(null);return}r instanceof QE&&r.getLayers().forEach(bze)}function Sze(r,e){if(r instanceof Av){r.setMapInternal(e);return}if(r instanceof QE)for(var t=r.getLayers().getArray(),n=0,i=t.length;n<i;++n)Sze(t[n],e)}var Brr=function(r){zrr(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=Urr(t);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,n.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:xD,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Li(),n.pixelToCoordinateTransform_=Li(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=t.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new Xn,n.interactions=i.interactions||new Xn,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new vze(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(ao.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(ao.VIEW,n.handleViewChanged_),n.addChangeListener(ao.SIZE,n.handleSizeChanged_),n.addChangeListener(ao.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var o=n;return t.view&&!(t.view instanceof mu)&&t.view.then(function(a){o.setView(new mu(a))}),n.controls.addEventListener(ai.ADD,function(a){a.element.setMap(this)}.bind(n)),n.controls.addEventListener(ai.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.interactions.addEventListener(ai.ADD,function(a){a.element.setMap(this)}.bind(n)),n.interactions.addEventListener(ai.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(ai.ADD,function(a){this.addOverlayInternal_(a.element)}.bind(n)),n.overlays_.addEventListener(ai.REMOVE,function(a){var u=a.element,h=u.getId();h!==void 0&&delete this.overlayIdIndex_[h.toString()],a.element.setMap(null)}.bind(n)),n.controls.forEach(function(a){a.setMap(this)}.bind(n)),n.interactions.forEach(function(a){a.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){var n=this.getLayerGroup().getLayers();n.push(t)},e.prototype.handleLayerAdd_=function(t){Sze(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),r.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,n,i){if(!(!this.frameState_||!this.renderer_)){var o=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var a=i.hitTolerance!==void 0?i.hitTolerance:0,u=i.layerFilter!==void 0?i.layerFilter:Qa,h=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,a,h,n,null,u,null)}},e.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,function(o){i.push(o)},n),i},e.prototype.getAllLayers=function(){var t=[];function n(i){i.forEach(function(o){o instanceof QE?n(o.getLayers()):t.push(o)})}return n(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,n,i){if(!(!this.frameState_||!this.renderer_)){var o=i||{},a=o.hitTolerance!==void 0?o.hitTolerance:0,u=o.layerFilter||Qa;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,a,n,u)}},e.prototype.hasFeatureAtPixel=function(t,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};var o=n.layerFilter!==void 0?n.layerFilter:Qa,a=n.hitTolerance!==void 0?n.hitTolerance:0,u=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,a,u,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},e.prototype.getTarget=function(){return this.get(ao.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return bd(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var n=this.frameState_;return n?Nn(n.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(ao.LAYERGROUP)},e.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof Xn){n.setLayers(t);return}var i=n.getLayers();i.clear(),i.extend(t)},e.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},e.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var o=t[n];if(o.visible){var a=o.layer.getRenderer();if(a&&!a.ready)return!0;var u=o.layer.getSource();if(u&&u.loading)return!0}}return!1},e.prototype.getPixelFromCoordinate=function(t){var n=pi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},e.prototype.getPixelFromCoordinateInternal=function(t){var n=this.frameState_;return n?Nn(n.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(ao.SIZE)},e.prototype.getView=function(){return this.get(ao.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,n,i,o){return gze(this.frameState_,t,n,i,o)},e.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,o=new fu(i,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var n=t.originalEvent,i=n.type;if(i===eT.POINTERDOWN||i===Lt.WHEEL||i===Lt.KEYDOWN){var o=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():o,u=n.target;if(this.overlayContainerStopEvent_.contains(u)||!(a===o?o.documentElement:a).contains(u))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var h=this.getInteractions().getArray().slice(),d=h.length-1;d>=0;d--){var v=h[d];if(!(v.getMap()!==this||!v.getActive()||!this.getTargetElement())){var x=v.handleEvent(t);if(!x||t.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,o=i;if(t){var a=t.viewHints;if(a[xo.ANIMATING]||a[xo.INTERACTING]){var u=Date.now()-t.time>8;i=u?0:8,o=u?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(_o.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(_o.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ld(Kc.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ld(Kc.LOADSTART,this,t))));for(var h=this.postRenderFunctions_,d=0,v=h.length;d<v;++d)h[d](this,t);h.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,n=this.targetChangeHandlerKeys_.length;t<n;++t)Yr(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Lt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Lt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,UE(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new dze(this,this.moveTolerance_);for(var o in Vr)this.mapBrowserEventHandler_.addEventListener(Vr[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Lt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Lt.WHEEL,this.boundHandleBrowserEvent_,wD?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,u=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[Ir(u,Lt.KEYDOWN,this.handleBrowserEvent,this),Ir(u,Lt.KEYPRESS,this.handleBrowserEvent,this),Ir(a,Lt.RESIZE,this.updateSize,this)]}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Yr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Yr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Ir(t,$u.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ir(t,Lt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Yr),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new _h("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Ir(t,$u.PROPERTYCHANGE,this.render,this),Ir(t,Lt.CHANGE,this.render,this),Ir(t,"addlayer",this.handleLayerAdd_,this),Ir(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var o=t[n].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){var n=this.getLayerGroup().getLayers();return n.remove(t)},e.prototype.handleLayerRemove_=function(t){bze(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var n=this,i=this.getSize(),o=this.getView(),a=this.frameState_,u=null;if(i!==void 0&&iZ(i)&&o&&o.isDef()){var h=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),d=o.getState();if(u={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:EE(d.center,d.resolution,d.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:d,viewHints:h,wantedTiles:{},mapId:tr(this),renderTargets:{}},d.nextCenter&&d.nextResolution){var v=isNaN(d.nextRotation)?d.rotation:d.nextRotation;u.nextExtent=EE(d.nextCenter,d.nextResolution,v,i)}}if(this.frameState_=u,this.renderer_.renderFrame(u),u){if(u.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,u.postRenderFunctions),a){var x=!this.previousExtent_||!wv(this.previousExtent_)&&!sh(u.extent,this.previousExtent_);x&&(this.dispatchEvent(new Ld(Kc.MOVESTART,this,a)),this.previousExtent_=xd(this.previousExtent_))}var S=this.previousExtent_&&!u.viewHints[xo.ANIMATING]&&!u.viewHints[xo.INTERACTING]&&!sh(u.extent,this.previousExtent_);S&&(this.dispatchEvent(new Ld(Kc.MOVEEND,this,u)),TD(u.extent,this.previousExtent_))}this.dispatchEvent(new Ld(Kc.POSTRENDER,this,u)),this.renderComplete_=this.hasListener(Kc.LOADSTART)||this.hasListener(Kc.LOADEND)||this.hasListener(_o.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},e.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new _h("removelayer",n)),this.set(ao.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(ao.SIZE,t)},e.prototype.setTarget=function(t){this.set(ao.TARGET,t)},e.prototype.setView=function(t){if(!t||t instanceof mu){this.set(ao.VIEW,t);return}this.set(ao.VIEW,new mu);var n=this;t.then(function(i){n.setView(new mu(i))})},e.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),o=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(a)&&(n=[o,a],!iZ(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},e}(no);function Urr(r){var e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);var t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new QE({layers:r.layers});t[ao.LAYERGROUP]=n,t[ao.TARGET]=r.target,t[ao.VIEW]=r.view instanceof mu?r.view:new mu;var i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new Xn(r.controls.slice()):(or(typeof r.controls.getArray=="function",47),i=r.controls));var o;r.interactions!==void 0&&(Array.isArray(r.interactions)?o=new Xn(r.interactions.slice()):(or(typeof r.interactions.getArray=="function",48),o=r.interactions));var a;return r.overlays!==void 0?Array.isArray(r.overlays)?a=new Xn(r.overlays.slice()):(or(typeof r.overlays.getArray=="function",49),a=r.overlays):a=new Xn,{controls:i,interactions:o,keyboardEventTarget:e,overlays:a,values:t}}var Eze=Brr;var Vrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Grr=function(r){Vrr(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var o=i.className!==void 0?i.className:"ol-attribution",a=i.tipLabel!==void 0?i.tipLabel:"Attributions",u=i.expandClassName!==void 0?i.expandClassName:o+"-expand",h=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",d=i.collapseClassName!==void 0?i.collapseClassName:o+"-collapse";typeof h=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=h,n.collapseLabel_.className=d):n.collapseLabel_=h;var v=i.label!==void 0?i.label:"i";typeof v=="string"?(n.label_=document.createElement("span"),n.label_.textContent=v,n.label_.className=u):n.label_=v;var x=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(x),n.toggleButton_.addEventListener(Lt.CLICK,n.handleClick_.bind(n),!1);var S=o+" "+uu+" "+Vc+(n.collapsed_&&n.collapsible_?" "+lZ:"")+(n.collapsible_?"":" ol-uncollapsible"),A=n.element;return A.className=S,A.appendChild(n.toggleButton_),A.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return e.prototype.collectSourceAttributions_=function(t){for(var n={},i=[],o=!0,a=t.layerStatesArray,u=0,h=a.length;u<h;++u){var d=a[u];if(Iv(d,t.viewState)){var v=d.layer.getSource();if(v){var x=v.getAttributions();if(x){var S=x(t);if(S)if(o=o&&v.getAttributionsCollapsible()!==!1,Array.isArray(S))for(var A=0,L=S.length;A<L;++A)S[A]in n||(i.push(S[A]),n[S[A]]=!0);else S in n||(i.push(S),n[S]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},e.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Ta(n,this.renderedAttributions_)){kFe(this.ulElement_);for(var o=0,a=n.length;o<a;++o){var u=document.createElement("li");u.innerHTML=n[o],this.ulElement_.appendChild(u)}this.renderedAttributions_=n}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(lZ),this.collapsed_?y0(this.collapseLabel_,this.label_):y0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(ns),Tze=Grr;var $rr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hrr=function(r){$rr(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=i.className!==void 0?i.className:"ol-rotate",a=i.label!==void 0?i.label:"\u21E7",u=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=u,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(u));var h=i.tipLabel?i.tipLabel:"Reset rotation",d=document.createElement("button");d.className=o+"-reset",d.setAttribute("type","button"),d.title=h,d.appendChild(n.label_),d.addEventListener(Lt.CLICK,n.handleClick_.bind(n),!1);var v=o+" "+uu+" "+Vc,x=n.element;return x.className=v,x.appendChild(d),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(VE),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap(),n=t.getView();if(n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:hu}):n.setRotation(0))}},e.prototype.render=function(t){var n=t.frameState;if(n){var i=n.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var a=this.element.classList.contains(VE);!a&&i===0?this.element.classList.add(VE):a&&i!==0&&this.element.classList.remove(VE)}this.label_.style.transform=o}this.rotation_=i}},e}(ns),Ize=Hrr;var Wrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zrr=function(r){Wrr(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this;var o=i.className!==void 0?i.className:"ol-zoom",a=i.delta!==void 0?i.delta:1,u=i.zoomInClassName!==void 0?i.zoomInClassName:o+"-in",h=i.zoomOutClassName!==void 0?i.zoomOutClassName:o+"-out",d=i.zoomInLabel!==void 0?i.zoomInLabel:"+",v=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",x=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",S=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",A=document.createElement("button");A.className=u,A.setAttribute("type","button"),A.title=x,A.appendChild(typeof d=="string"?document.createTextNode(d):d),A.addEventListener(Lt.CLICK,n.handleClick_.bind(n,a),!1);var L=document.createElement("button");L.className=h,L.setAttribute("type","button"),L.title=S,L.appendChild(typeof v=="string"?document.createTextNode(v):v),L.addEventListener(Lt.CLICK,n.handleClick_.bind(n,-a),!1);var q=o+" "+uu+" "+Vc,R=n.element;return R.className=q,R.appendChild(A),R.appendChild(L),n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleClick_=function(t,n){n.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var n=this.getMap(),i=n.getView();if(i){var o=i.getZoom();if(o!==void 0){var a=i.getConstrainedZoom(o+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:a,duration:this.duration_,easing:hu})):i.setZoom(a)}}},e}(ns),N0=Zrr;var Yrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Krr=function(r){Yrr(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this,n.extent=i.extent?i.extent:null;var o=i.className!==void 0?i.className:"ol-zoom-extent",a=i.label!==void 0?i.label:"E",u=i.tipLabel!==void 0?i.tipLabel:"Fit to extent",h=document.createElement("button");h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(Lt.CLICK,n.handleClick_.bind(n),!1);var d=o+" "+uu+" "+Vc,v=n.element;return v.className=d,v.appendChild(h),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap(),n=t.getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(zE(i))},e}(ns),bN=Krr;function Aze(r){var e=r||{},t=new Xn,n=e.zoom!==void 0?e.zoom:!0;n&&t.push(new N0(e.zoomOptions));var i=e.rotate!==void 0?e.rotate:!0;i&&t.push(new Ize(e.rotateOptions));var o=e.attribution!==void 0?e.attribution:!0;return o&&t.push(new Tze(e.attributionOptions)),t}var Xrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jrr=function(r){Xrr(e,r);function e(t){return t=Ur({},t),t.controls||(t.controls=Aze()),t.interactions||(t.interactions=D0({onFocusOnly:!0})),r.call(this,t)||this}return e.prototype.createRenderer=function(){return new hze(this)},e}(Eze),q0=Jrr;var rT={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Qrr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),enr=function(r){Qrr(e,r);function e(t){var n=this,i=t||{},o=Ur({},i);return delete o.preload,delete o.useInterimTilesOnError,n=r.call(this,o)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return e.prototype.getPreload=function(){return this.get(rT.PRELOAD)},e.prototype.setPreload=function(t){this.set(rT.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(rT.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(rT.USE_INTERIM_TILES_ON_ERROR,t)},e.prototype.getData=function(t){return r.prototype.getData.call(this,t)},e}(Av),SN=enr;var tnr=function(){function r(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return r.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},r.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},r.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},r.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},r.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},r.prototype.get=function(e,t){var n=this.entries_[e];return or(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},r.prototype.remove=function(e){var t=this.entries_[e];return or(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},r.prototype.getCount=function(){return this.count_},r.prototype.getKeys=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e},r.prototype.getValues=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e},r.prototype.peekLast=function(){return this.oldest_.value_},r.prototype.peekLastKey=function(){return this.oldest_.key_},r.prototype.peekFirstKey=function(){return this.newest_.key_},r.prototype.peek=function(e){if(this.containsKey(e))return this.entries_[e].value_},r.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},r.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},r.prototype.set=function(e,t){or(!(e in this.entries_),16);var n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_},r.prototype.setSize=function(e){this.highWaterMark=e},r}(),EN=tnr;var Cze=function(){function r(e,t,n,i){this.minX=e,this.maxX=t,this.minY=n,this.maxY=i}return r.prototype.contains=function(e){return this.containsXY(e[1],e[2])},r.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},r.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},r.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},r.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},r.prototype.getHeight=function(){return this.maxY-this.minY+1},r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},r.prototype.getWidth=function(){return this.maxX-this.minX+1},r.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},r}();function Ov(r,e,t,n,i){return i!==void 0?(i.minX=r,i.maxX=e,i.minY=t,i.maxY=n,i):new Cze(r,e,t,n)}var k0=Cze;var rnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nnr=function(r){rnr(e,r);function e(t,n,i){var o=r.call(this)||this,a=i||{};return o.tileCoord=t,o.state=n,o.interimTile=null,o.key="",o.transition_=a.transition===void 0?250:a.transition,o.transitionStarts_={},o.interpolate=!!a.interpolate,o}return e.prototype.changed=function(){this.dispatchEvent(Lt.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Bt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==Bt.LOADED){t.interimTile=null;break}else t.getState()==Bt.LOADING?n=t:t.getState()==Bt.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==Bt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){ir()},e.prototype.getAlpha=function(t,n){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;var o=n-i+1e3/60;return o>=this.transition_?1:IZ(o/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(ks),F0=nnr;var inr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),onr=function(r){inr(e,r);function e(t){var n=this,i=Bt.IDLE;return n=r.call(this,t.tileCoord,i,{transition:t.transition,interpolate:t.interpolate})||this,n.loader_=t.loader,n.data_=null,n.error_=null,n.size_=t.size||[256,256],n}return e.prototype.getSize=function(){return this.size_},e.prototype.getData=function(){return this.data_},e.prototype.getError=function(){return this.error_},e.prototype.load=function(){if(!(this.state!==Bt.IDLE&&this.state!==Bt.ERROR)){this.state=Bt.LOADING,this.changed();var t=this;this.loader_().then(function(n){t.data_=n,t.state=Bt.LOADED,t.changed()}).catch(function(n){t.error_=n,t.state=Bt.ERROR,t.changed()})}},e}(F0),Mze=onr;var anr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),snr=function(r){anr(e,r);function e(t,n,i,o,a,u){var h=r.call(this,t,n,u)||this;return h.crossOrigin_=o,h.src_=i,h.key=i,h.image_=new Image,o!==null&&(h.image_.crossOrigin=o),h.unlisten_=null,h.tileLoadFunction_=a,h}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=Bt.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=Bt.ERROR,this.unlistenImage_(),this.image_=lnr(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Bt.LOADED:this.state=Bt.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Bt.ERROR&&(this.state=Bt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Bt.IDLE&&(this.state=Bt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=HE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(F0);function lnr(){var r=Ii(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}var xh=snr;var Rze=.5,Xc=!0;var unr=10,Pze=.25,cnr=function(){function r(e,t,n,i,o,a){this.sourceProj_=e,this.targetProj_=t;var u={},h=Sv(this.targetProj_,this.sourceProj_);this.transformInv_=function(j){var $=j[0]+"/"+j[1];return u[$]||(u[$]=h(j)),u[$]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ln(i)==ln(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ln(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ln(this.targetProj_.getExtent()):null;var d=iu(n),v=c0(n),x=u0(n),S=l0(n),A=this.transformInv_(d),L=this.transformInv_(v),q=this.transformInv_(x),R=this.transformInv_(S),D=unr+(a?Math.max(0,Math.ceil(RD(SE(n)/(a*a*256*256)))):0);if(this.addQuad_(d,v,x,S,A,L,q,R,D),this.wrapsXInSource_){var k=1/0;this.triangles_.forEach(function(j,$,ee){k=Math.min(k,j.source[0][0],j.source[1][0],j.source[2][0])}),this.triangles_.forEach(function(j){if(Math.max(j.source[0][0],j.source[1][0],j.source[2][0])-k>this.sourceWorldWidth_/2){var $=[[j.source[0][0],j.source[0][1]],[j.source[1][0],j.source[1][1]],[j.source[2][0],j.source[2][1]]];$[0][0]-k>this.sourceWorldWidth_/2&&($[0][0]-=this.sourceWorldWidth_),$[1][0]-k>this.sourceWorldWidth_/2&&($[1][0]-=this.sourceWorldWidth_),$[2][0]-k>this.sourceWorldWidth_/2&&($[2][0]-=this.sourceWorldWidth_);var ee=Math.min($[0][0],$[1][0],$[2][0]),J=Math.max($[0][0],$[1][0],$[2][0]);J-ee<this.sourceWorldWidth_/2&&(j.source=$)}}.bind(this))}u={}}return r.prototype.addTriangle_=function(e,t,n,i,o,a){this.triangles_.push({source:[i,o,a],target:[e,t,n]})},r.prototype.addQuad_=function(e,t,n,i,o,a,u,h,d){var v=ia([o,a,u,h]),x=this.sourceWorldWidth_?ln(v)/this.sourceWorldWidth_:null,S=this.sourceWorldWidth_,A=this.sourceProj_.canWrapX()&&x>.5&&x<1,L=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var q=ia([e,t,n,i]),R=ln(q)/this.targetWorldWidth_;L=R>Pze||L}!A&&this.sourceProj_.isGlobal()&&x&&(L=x>Pze||L)}if(!(!L&&this.maxSourceExtent_&&isFinite(v[0])&&isFinite(v[1])&&isFinite(v[2])&&isFinite(v[3])&&!Ti(v,this.maxSourceExtent_))){var D=0;if(!L&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(h[0])||!isFinite(h[1]))){if(d>0)L=!0;else if(D=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),D!=1&&D!=2&&D!=4&&D!=8)return}if(d>0){if(!L){var k=[(e[0]+n[0])/2,(e[1]+n[1])/2],j=this.transformInv_(k),$=void 0;if(A){var ee=(yl(o[0],S)+yl(u[0],S))/2;$=ee-yl(j[0],S)}else $=(o[0]+u[0])/2-j[0];var J=(o[1]+u[1])/2-j[1],ie=$*$+J*J;L=ie>this.errorThresholdSquared_}if(L){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){var ue=[(t[0]+n[0])/2,(t[1]+n[1])/2],le=this.transformInv_(ue),_e=[(i[0]+e[0])/2,(i[1]+e[1])/2],Re=this.transformInv_(_e);this.addQuad_(e,t,ue,_e,o,a,le,Re,d-1),this.addQuad_(_e,ue,n,i,Re,le,u,h,d-1)}else{var ze=[(e[0]+t[0])/2,(e[1]+t[1])/2],qe=this.transformInv_(ze),Ve=[(n[0]+i[0])/2,(n[1]+i[1])/2],Ke=this.transformInv_(Ve);this.addQuad_(e,ze,Ve,i,o,qe,Ke,h,d-1),this.addQuad_(ze,t,n,Ve,qe,a,u,Ke,d-1)}return}}if(A){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}D&11||this.addTriangle_(e,n,i,o,u,h),D&14||this.addTriangle_(e,n,t,o,u,a),D&&(D&13||this.addTriangle_(t,i,e,a,h,o),D&7||this.addTriangle_(t,i,n,a,h,u))}},r.prototype.calculateSourceExtent=function(){var e=Di();return this.triangles_.forEach(function(t,n,i){var o=t.source;xv(e,o[0]),xv(e,o[1]),xv(e,o[2])}),e},r.prototype.getTriangles=function(){return this.triangles_},r}(),Oze=cnr;var nT={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Lze={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var VZ,$Z=[];function Dze(r,e,t,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,i)),r.restore()}function GZ(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function fnr(){if(VZ===void 0){var r=document.createElement("canvas").getContext("2d");r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Dze(r,4,5,4,0),Dze(r,4,5,0,5);var e=r.getImageData(0,0,3,3).data;VZ=GZ(e,0)||GZ(e,4)||GZ(e,8)}return VZ}function TN(r,e,t,n){var i=Xu(t,e,r),o=z8(e,n,t),a=e.getMetersPerUnit();a!==void 0&&(o*=a);var u=r.getMetersPerUnit();u!==void 0&&(o/=u);var h=r.getExtent();if(!h||es(h,i)){var d=z8(r,o,i)/o;isFinite(d)&&d>0&&(o/=d)}return o}function Nze(r,e,t,n){var i=js(t),o=TN(r,e,i,n);return(!isFinite(o)||o<=0)&&s0(t,function(a){return o=TN(r,e,a,n),isFinite(o)&&o>0}),o}function qze(r,e,t,n,i,o,a,u,h,d,v,x){var S=Ii(Math.round(t*r),Math.round(t*e),$Z);if(x||Ur(S,nT),h.length===0)return S.canvas;S.scale(t,t);function A($){return Math.round($*t)/t}S.globalCompositeOperation="lighter";var L=Di();h.forEach(function($,ee,J){AD(L,$.extent)});var q=ln(L),R=yo(L),D=Ii(Math.round(t*q/n),Math.round(t*R/n));x||Ur(D,nT);var k=t/n;h.forEach(function($,ee,J){var ie=$.extent[0]-L[0],ue=-($.extent[3]-L[3]),le=ln($.extent),_e=yo($.extent);$.image.width>0&&$.image.height>0&&D.drawImage($.image,d,d,$.image.width-2*d,$.image.height-2*d,ie*k,ue*k,le*k,_e*k)});var j=iu(a);return u.getTriangles().forEach(function($,ee,J){var ie=$.source,ue=$.target,le=ie[0][0],_e=ie[0][1],Re=ie[1][0],ze=ie[1][1],qe=ie[2][0],Ve=ie[2][1],Ke=A((ue[0][0]-j[0])/o),Ce=A(-(ue[0][1]-j[1])/o),Se=A((ue[1][0]-j[0])/o),Ie=A(-(ue[1][1]-j[1])/o),Ge=A((ue[2][0]-j[0])/o),$e=A(-(ue[2][1]-j[1])/o),Ze=le,Pe=_e;le=0,_e=0,Re-=Ze,ze-=Pe,qe-=Ze,Ve-=Pe;var at=[[Re,ze,0,0,Se-Ke],[qe,Ve,0,0,Ge-Ke],[0,0,Re,ze,Ie-Ce],[0,0,qe,Ve,$e-Ce]],wt=Gke(at);if(wt){if(S.save(),S.beginPath(),fnr()||!x){S.moveTo(Se,Ie);for(var Le=4,Ye=Ke-Se,je=Ce-Ie,We=0;We<Le;We++)S.lineTo(Se+A((We+1)*Ye/Le),Ie+A(We*je/(Le-1))),We!=Le-1&&S.lineTo(Se+A((We+1)*Ye/Le),Ie+A((We+1)*je/(Le-1)));S.lineTo(Ge,$e)}else S.moveTo(Se,Ie),S.lineTo(Ke,Ce),S.lineTo(Ge,$e);S.clip(),S.transform(wt[0],wt[2],wt[1],wt[3],Ke,Ce),S.translate(L[0]-Ze,L[3]-Pe),S.scale(n/t,-n/t),S.drawImage(D.canvas,0,0),S.restore()}}),v&&(S.save(),S.globalCompositeOperation="source-over",S.strokeStyle="black",S.lineWidth=1,u.getTriangles().forEach(function($,ee,J){var ie=$.target,ue=(ie[0][0]-j[0])/o,le=-(ie[0][1]-j[1])/o,_e=(ie[1][0]-j[0])/o,Re=-(ie[1][1]-j[1])/o,ze=(ie[2][0]-j[0])/o,qe=-(ie[2][1]-j[1])/o;S.beginPath(),S.moveTo(_e,Re),S.lineTo(ue,le),S.lineTo(ze,qe),S.closePath(),S.stroke()}),S.restore()),S.canvas}var hnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pnr=function(r){hnr(e,r);function e(t,n,i,o,a,u,h,d,v,x,S,A){var L=r.call(this,a,Bt.IDLE,{interpolate:!!A})||this;L.renderEdges_=S!==void 0?S:!1,L.pixelRatio_=h,L.gutter_=d,L.canvas_=null,L.sourceTileGrid_=n,L.targetTileGrid_=o,L.wrappedTileCoord_=u||a,L.sourceTiles_=[],L.sourcesListenerKeys_=null,L.sourceZ_=0;var q=o.getTileCoordExtent(L.wrappedTileCoord_),R=L.targetTileGrid_.getExtent(),D=L.sourceTileGrid_.getExtent(),k=R?nu(q,R):q;if(SE(k)===0)return L.state=Bt.EMPTY,L;var j=t.getExtent();j&&(D?D=nu(D,j):D=j);var $=o.getResolution(L.wrappedTileCoord_[0]),ee=Nze(t,i,k,$);if(!isFinite(ee)||ee<=0)return L.state=Bt.EMPTY,L;var J=x!==void 0?x:Rze;if(L.triangulation_=new Oze(t,i,k,D,ee*J,$),L.triangulation_.getTriangles().length===0)return L.state=Bt.EMPTY,L;L.sourceZ_=n.getZForResolution(ee);var ie=L.triangulation_.calculateSourceExtent();if(D&&(t.canWrapX()?(ie[1]=zn(ie[1],D[1],D[3]),ie[3]=zn(ie[3],D[1],D[3])):ie=nu(ie,D)),!SE(ie))L.state=Bt.EMPTY;else{for(var ue=n.getTileRangeForExtentAndZ(ie,L.sourceZ_),le=ue.minX;le<=ue.maxX;le++)for(var _e=ue.minY;_e<=ue.maxY;_e++){var Re=v(L.sourceZ_,le,_e,h);Re&&L.sourceTiles_.push(Re)}L.sourceTiles_.length===0&&(L.state=Bt.EMPTY)}return L}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(v,x,S){v&&v.getState()==Bt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(v.tileCoord),image:v.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=Bt.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),o=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],u=this.targetTileGrid_.getResolution(n),h=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=qze(o,a,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),u,d,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Bt.LOADED}this.changed()},e.prototype.load=function(){if(this.state==Bt.IDLE){this.state=Bt.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,o){var a=n.getState();if(a==Bt.IDLE||a==Bt.LOADING){t++;var u=Ir(n,Lt.CHANGE,function(h){var d=n.getState();(d==Bt.LOADED||d==Bt.ERROR||d==Bt.EMPTY)&&(Yr(u),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,o){var a=n.getState();a==Bt.IDLE&&n.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Yr),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&(KD(this.canvas_.getContext("2d")),$Z.push(this.canvas_),this.canvas_=null),r.prototype.release.call(this)},e}(F0),j0=pnr;var iT=34962,oT=34963,Fze=35040,z0=35044,jze=35048,zze=5121,Bze=5123,Uze=5125,HZ=5126,kze=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function WZ(r,e){for(var t=Ur({preserveDrawingBuffer:!0,antialias:!Mke},e),n=kze.length,i=0;i<n;++i)try{var o=r.getContext(kze[i],t);if(o)return o}catch(a){}return null}var dnr={STATIC_DRAW:z0,STREAM_DRAW:Fze,DYNAMIC_DRAW:jze},mnr=function(){function r(e,t){this.array=null,this.type=e,or(e===iT||e===oT,62),this.usage=t!==void 0?t:dnr.STATIC_DRAW}return r.prototype.ofSize=function(e){this.array=new(ZZ(this.type))(e)},r.prototype.fromArray=function(e){var t=ZZ(this.type);this.array=t.from?t.from(e):new t(e)},r.prototype.fromArrayBuffer=function(e){this.array=new(ZZ(this.type))(e)},r.prototype.getType=function(){return this.type},r.prototype.getArray=function(){return this.array},r.prototype.getUsage=function(){return this.usage},r.prototype.getSize=function(){return this.array?this.array.length:0},r}();function ZZ(r){switch(r){case iT:return Float32Array;case oT:return Uint32Array;default:return Float32Array;}}var IN=mnr;var vnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function Gze(r,e,t){var n=t?r.LINEAR:r.NEAREST;r.bindTexture(r.TEXTURE_2D,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,n)}function gnr(r,e,t,n){Gze(r,e,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)}function Vze(r,e,t,n,i,o){var a=r.getGL(),u,h;if(t instanceof Float32Array){u=a.FLOAT,r.getExtension("OES_texture_float");var d=r.getExtension("OES_texture_float_linear");h=d!==null}else u=a.UNSIGNED_BYTE,h=!0;Gze(a,e,o&&h);var v=t.byteLength/n[1],x=1;v%8===0?x=8:v%4===0?x=4:v%2===0&&(x=2);var S;switch(i){case 1:{S=a.LUMINANCE;break}case 2:{S=a.LUMINANCE_ALPHA;break}case 3:{S=a.RGB;break}case 4:{S=a.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(i));}var A=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,x),a.texImage2D(a.TEXTURE_2D,0,S,n[0],n[1],0,S,u,t),a.pixelStorei(a.UNPACK_ALIGNMENT,A)}var B0=null;function ynr(){var r=document.createElement("canvas");r.width=1,r.height=1,B0=r.getContext("2d")}var _nr=function(r){vnr(e,r);function e(t){var n=r.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=Un(t.grid.getTileSize(t.tile.tileCoord[0])),n.gutter_=t.gutter||0,n.bandCount=NaN,n.helper_=t.helper;var i=new IN(iT,z0);return i.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(i),n.coords=i,n.setTile(t.tile),n}return e.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(Lt.CHANGE,this.handleTileChange_),this.tile=t,this.textures.length=0,this.loaded=t.getState()===Bt.LOADED,this.loaded)this.uploadTile_();else{if(t instanceof xh){var n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(Lt.CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var t=this.helper_,n=t.getGL(),i=this.tile;if(i instanceof xh||i instanceof j0){var o=n.createTexture();this.textures.push(o),this.bandCount=4,gnr(n,o,i.getImage(),i.interpolate);return}var a=i.getSize(),u=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],h=i.getData(),d=h instanceof Float32Array,v=u[0]*u[1],x=d?Float32Array:Uint8Array,S=x.BYTES_PER_ELEMENT,A=h.byteLength/u[1];this.bandCount=Math.floor(A/S/u[0]);var L=Math.ceil(this.bandCount/4);if(L===1){var o=n.createTexture();this.textures.push(o),Vze(t,o,h,u,this.bandCount,i.interpolate);return}for(var q=new Array(L),R=0;R<L;++R){var o=n.createTexture();this.textures.push(o);var D=R<L-1?4:this.bandCount%4;q[R]=new x(v*D)}for(var k=0,j=0,$=u[0]*this.bandCount,ee=0;ee<u[1];++ee){for(var J=0;J<$;++J){var ie=h[j+J],ue=Math.floor(k/this.bandCount),le=J%this.bandCount,R=Math.floor(le/4),_e=q[R],D=_e.length/v,Re=le%4;_e[ue*D+Re]=ie,++k}j+=A/S}for(var R=0;R<L;++R){var o=this.textures[R],_e=q[R],D=_e.length/v;Vze(t,o,_e,u,D,i.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===Bt.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(Lt.CHANGE))},e.prototype.disposeInternal=function(){var t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)t.deleteTexture(this.textures[n]);this.tile.removeEventListener(Lt.CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(t,n){if(!this.loaded)return null;var i=this.renderSize_[0],o=this.renderSize_[1],a=this.gutter_;if(this.tile instanceof Mze){var u=this.tile.getSize(),h=u[0],d=u[1],v=h+2*a,x=d+2*a,S=a+Math.floor(h*(t/i)),A=a+Math.floor(d*(n/o)),L=this.tile.getData();if(L instanceof DataView){var q=L.byteLength/(v*x),R=q*(A*v+S),D=L.buffer.slice(R,R+q);return new DataView(D)}var k=this.bandCount*(A*v+S);return L.slice(k,k+this.bandCount)}B0||ynr(),B0.clearRect(0,0,1,1);var j=this.tile.getImage(),$=j.width,ee=j.height,J=$-2*a,ie=ee-2*a,ue=a+Math.floor(J*(t/i)),le=a+Math.floor(ie*(n/o)),_e;try{B0.drawImage(j,ue,le,1,1,0,0,1,1),_e=B0.getImageData(0,0,1,1).data}catch(Re){return B0=null,null}return _e},e}(ks),$ze=_nr;var aT={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};var xnr=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,wnr=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,bnr=function(){function r(e){this.gl_=e.webGlContext;var t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e.vertexShader||xnr),t.compileShader(n);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,e.fragmentShader||wnr),t.compileShader(i),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,n),t.attachShader(this.renderTargetProgram_,i),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();var o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(a){this.uniforms_.push({value:e.uniforms[a],location:t.getUniformLocation(this.renderTargetProgram_,a)})}.bind(this))}return r.prototype.getGL=function(){return this.gl_},r.prototype.init=function(e){var t=this.getGL(),n=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var i=0,o=t.RGBA,a=0,u=t.RGBA,h=t.UNSIGNED_BYTE,d=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,i,o,n[0],n[1],a,u,h,d),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}},r.prototype.apply=function(e,t,n,i){var o=this.getGL(),a=e.size;if(o.bindFramebuffer(o.FRAMEBUFFER,t?t.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!t){var u=tr(o.canvas);if(!e.renderTargets[u]){var h=o.getContextAttributes();h&&h.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),e.renderTargets[u]=!0}}o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),o.uniform1i(this.renderTargetTextureLocation_,0);var d=e.layerStatesArray[e.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,d),this.applyUniforms(e),n&&n(o,e),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,e)},r.prototype.getFrameBuffer=function(){return this.frameBuffer_},r.prototype.applyUniforms=function(e){var t=this.getGL(),n,i=1;this.uniforms_.forEach(function(o){if(n=typeof o.value=="function"?o.value(e):o.value,n instanceof HTMLCanvasElement||n instanceof ImageData)o.texture||(o.texture=t.createTexture()),t.activeTexture(t["TEXTURE".concat(i)]),t.bindTexture(t.TEXTURE_2D,o.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,n.width,n.height,0,t.UNSIGNED_BYTE,new Uint8Array(n.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.uniform1i(o.location,i++);else if(Array.isArray(n))switch(n.length){case 2:t.uniform2f(o.location,n[0],n[1]);return;case 3:t.uniform3f(o.location,n[0],n[1],n[2]);return;case 4:t.uniform4f(o.location,n[0],n[1],n[2],n[3]);return;default:return;}else typeof n=="number"&&t.uniform1f(o.location,n)})},r}(),YZ=bnr;function AN(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function U0(r,e){return r[0]=e[0],r[1]=e[1],r[4]=e[2],r[5]=e[3],r[12]=e[4],r[13]=e[5],r}var Snr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var sT={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},V0={UNSIGNED_BYTE:zze,UNSIGNED_SHORT:Bze,UNSIGNED_INT:Uze,FLOAT:HZ},CN={};function Hze(r){return"shared/"+r}var Wze=0;function Enr(){var r="unique/"+Wze;return Wze+=1,r}function Tnr(r){var e=CN[r];if(!e){var t=document.createElement("canvas");t.style.position="absolute",t.style.left="0",e={users:0,canvas:t},CN[r]=e}return e.users+=1,e.canvas}function Inr(r){var e=CN[r];if(e&&(e.users-=1,!(e.users>0))){var t=e.canvas,n=WZ(t),i=n.getExtension("WEBGL_lose_context");i&&i.loseContext(),delete CN[r]}}var Anr=function(r){Snr(e,r);function e(t){var n=r.call(this)||this,i=t||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=i.canvasCacheKey?Hze(i.canvasCacheKey):Enr(),n.canvas_=Tnr(n.canvasCacheKey_),n.gl_=WZ(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(aT.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(aT.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Li(),n.offsetScaleMatrix_=Li(),n.tmpMat4_=AN(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],i.uniforms&&n.setUniforms(i.uniforms);var o=n.getGL();return n.postProcessPasses_=i.postProcesses?i.postProcesses.map(function(a){return new YZ({webGlContext:o,scaleRatio:a.scaleRatio,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms})}):[new YZ({webGlContext:o})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return e.prototype.setUniforms=function(t){this.uniforms_=[];for(var n in t)this.uniforms_.push({name:n,value:t[n]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(t){return this.canvasCacheKey_===Hze(t)},e.prototype.getExtension=function(t){if(t in this.extensionCache_)return this.extensionCache_[t];var n=this.gl_.getExtension(t);return this.extensionCache_[t]=n,n},e.prototype.bindBuffer=function(t){var n=this.getGL(),i=tr(t),o=this.bufferCache_[i];if(!o){var a=n.createBuffer();o={buffer:t,webGlBuffer:a},this.bufferCache_[i]=o}n.bindBuffer(t.getType(),o.webGlBuffer)},e.prototype.flushBufferData=function(t){var n=this.getGL();this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var n=this.getGL(),i=tr(t),o=this.bufferCache_[i];o&&!n.isContextLost()&&n.deleteBuffer(o.webGlBuffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(aT.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(aT.RESTORED,this.boundHandleWebGLContextRestored_),Inr(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(t,n){var i=this.getGL(),o=this.getCanvas(),a=t.size,u=t.pixelRatio;o.width=a[0]*u,o.height=a[1]*u,o.style.width=a[0]+"px",o.style.height=a[1]+"px",i.useProgram(this.currentProgram_);for(var h=this.postProcessPasses_.length-1;h>=0;h--)this.postProcessPasses_[h].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,n,i){var o=this.getGL(),a=n.getSize();o.bindFramebuffer(o.FRAMEBUFFER,n.getFramebuffer()),o.viewport(0,0,a[0],a[1]),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,i?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var o=i.UNSIGNED_INT,a=4,u=n-t,h=t*a;i.drawElements(i.TRIANGLES,u,o,h)},e.prototype.finalizeDraw=function(t,n,i){for(var o=0,a=this.postProcessPasses_.length;o<a;o++)o===a-1?this.postProcessPasses_[o].apply(t,null,n,i):this.postProcessPasses_[o].apply(t,this.postProcessPasses_[o+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var n=t.size,i=t.viewState.rotation,o=i0(this.offsetScaleMatrix_);wE(o,2/n[0],2/n[1]);var a=i0(this.offsetRotateMatrix_);i!==0&&bD(a,-i),this.setUniformMatrixValue(sT.OFFSET_SCALE_MATRIX,U0(this.tmpMat4_,o)),this.setUniformMatrixValue(sT.OFFSET_ROTATION_MATRIX,U0(this.tmpMat4_,a)),this.setUniformFloatValue(sT.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(sT.ZOOM,t.viewState.zoom),this.setUniformFloatValue(sT.RESOLUTION,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var n=this.getGL(),i,o=0;this.uniforms_.forEach(function(a){if(i=typeof a.value=="function"?a.value(t):a.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData){a.texture||(a.prevValue=void 0,a.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(o)]),n.bindTexture(n.TEXTURE_2D,a.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var u=!(i instanceof HTMLImageElement)||i.complete;u&&a.prevValue!==i&&(a.prevValue=i,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i)),n.uniform1i(this.getUniformLocation(a.name),o++)}else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(a.name,U0(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:n.uniform2f(this.getUniformLocation(a.name),i[0],i[1]);return;case 3:n.uniform3f(this.getUniformLocation(a.name),i[0],i[1],i[2]);return;case 4:n.uniform4f(this.getUniformLocation(a.name),i[0],i[1],i[2],i[3]);return;default:return;}else typeof i=="number"&&n.uniform1f(this.getUniformLocation(a.name),i)}.bind(this))},e.prototype.useProgram=function(t){if(t==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0},e.prototype.compileShader=function(t,n){var i=this.getGL(),o=i.createShader(n);return i.shaderSource(o,t),i.compileShader(o),o},e.prototype.getProgram=function(t,n){var i=this.getGL(),o=this.compileShader(t,i.FRAGMENT_SHADER),a=this.compileShader(n,i.VERTEX_SHADER),u=i.createProgram();if(i.attachShader(u,o),i.attachShader(u,a),i.linkProgram(u),!i.getShaderParameter(o,i.COMPILE_STATUS)){var h="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(o));throw new Error(h)}if(i.deleteShader(o),!i.getShaderParameter(a,i.COMPILE_STATUS)){var h="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(a));throw new Error(h)}if(i.deleteShader(a),!i.getProgramParameter(u,i.LINK_STATUS)){var h="GL program linking failed: ".concat(i.getShaderInfoLog(a));throw new Error(h)}return u},e.prototype.getUniformLocation=function(t){return this.uniformLocations_[t]===void 0&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return this.attribLocations_[t]===void 0&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,n){var i=t.size,o=t.viewState.rotation,a=t.viewState.resolution,u=t.viewState.center;return i0(n),io(n,0,0,2/(a*i[0]),2/(a*i[1]),-o,-u[0],-u[1]),n},e.prototype.setUniformFloatValue=function(t,n){this.getGL().uniform1f(this.getUniformLocation(t),n)},e.prototype.setUniformFloatVec4=function(t,n){this.getGL().uniform4fv(this.getUniformLocation(t),n)},e.prototype.setUniformMatrixValue=function(t,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,n)},e.prototype.enableAttributeArray_=function(t,n,i,o,a){var u=this.getAttributeLocation(t);u<0||(this.getGL().enableVertexAttribArray(u),this.getGL().vertexAttribPointer(u,n,i,!1,o,a))},e.prototype.enableAttributes=function(t){for(var n=Cnr(t),i=0,o=0;o<t.length;o++){var a=t[o];this.enableAttributeArray_(a.name,a.size,a.type||HZ,n,i),i+=a.size*Zze(a.type)}},e.prototype.handleWebGLContextLost=function(){qs(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,n,i){var o=this.getGL(),a=i||o.createTexture(),u=0,h=o.RGBA,d=0,v=o.RGBA,x=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,a),n?o.texImage2D(o.TEXTURE_2D,u,h,v,x,n):o.texImage2D(o.TEXTURE_2D,u,h,t[0],t[1],d,v,x,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),a},e}(gd);function Cnr(r){for(var e=0,t=0;t<r.length;t++){var n=r[t];e+=n.size*Zze(n.type)}return e}function Zze(r){switch(r){case V0.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case V0.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case V0.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case V0.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT;}}var Yze=Anr;var Mnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();var Rnr=function(r){Mnr(e,r);function e(t,n){var i=r.call(this,t)||this,o=n||{};return i.inversePixelTransform_=Li(),i.pixelContext_=null,i.postProcesses_=o.postProcesses,i.uniforms_=o.uniforms,i.helper,t.addChangeListener(un.MAP,i.removeHelper.bind(i)),i.dispatchPreComposeEvent=i.dispatchPreComposeEvent.bind(i),i.dispatchPostComposeEvent=i.dispatchPostComposeEvent.bind(i),i}return e.prototype.dispatchPreComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(_o.PRECOMPOSE)){var o=new Cd(_o.PRECOMPOSE,void 0,n,t);i.dispatchEvent(o)}},e.prototype.dispatchPostComposeEvent=function(t,n){var i=this.getLayer();if(i.hasListener(_o.POSTCOMPOSE)){var o=new Cd(_o.POSTCOMPOSE,void 0,n,t);i.dispatchEvent(o)}},e.prototype.reset=function(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},e.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var n=!0,i=-1,o=void 0,a=0,u=t.layerStatesArray.length;a<u;a++){var h=t.layerStatesArray[a].layer,d=h.getRenderer();if(!(d instanceof e)){n=!0;continue}var v=h.getClassName();if((n||v!==o)&&(i+=1,n=!1),o=v,d===this)break}var x="map/"+t.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(x))&&(this.removeHelper(),this.helper=new Yze({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:x}),o&&(this.helper.getCanvas().className=o),this.afterHelperCreated())}return this.prepareFrameInternal(t)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(t){return!0},e.prototype.disposeInternal=function(){this.removeHelper(),r.prototype.disposeInternal.call(this)},e.prototype.dispatchRenderEvent_=function(t,n,i){var o=this.getLayer();if(o.hasListener(t)){io(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var a=new Cd(t,this.inversePixelTransform_,i,n);o.dispatchEvent(a)}},e.prototype.preRender=function(t,n){this.dispatchRenderEvent_(_o.PRERENDER,t,n)},e.prototype.postRender=function(t,n){this.dispatchRenderEvent_(_o.POSTRENDER,t,n)},e.prototype.getDataAtPixel=function(t,n,i){var o=Nn([n.pixelRatio,0,0,n.pixelRatio,0,0],t.slice()),a=this.helper.getGL();if(!a)return null;var u=this.getLayer(),h=u.getExtent();if(h){var d=Nn(n.pixelToCoordinateTransform,t.slice());if(!es(h,d))return null}var v=a.getContextAttributes();if(!v||!v.preserveDrawingBuffer)return new Uint8Array;var x=Math.round(o[0]),S=Math.round(o[1]),A=this.pixelContext_;if(!A){var L=document.createElement("canvas");L.width=1,L.height=1,A=L.getContext("2d"),this.pixelContext_=A}A.clearRect(0,0,1,1);var q;try{A.drawImage(a.canvas,x,S,1,1,0,0,1,1),q=A.getImageData(0,0,1,1).data}catch(R){return q}return q[3]===0?null:q},e}(rN);var Kze=Rnr;function G0(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function Lv(r,e,t){return r+"/"+e+"/"+t}function kd(r){return Lv(r[0],r[1],r[2])}function Xze(r){return r.split("/").map(Number)}function MN(r){return(r[1]<<r[0])+r[2]}function Jze(r,e){var t=r[0],n=r[1],i=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var o=e.getFullTileRange(t);return o?o.containsXY(n,i):!0}var Pnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Or={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},lT={TEXTURE_COORD:"a_textureCoord"},Onr=[{name:lT.TEXTURE_COORD,size:2,type:V0.FLOAT}],Lnr={};function Dnr(r){return 2*(1-1/(r+1))-1}function Qze(r,e,t){t in r||(r[t]=[]),r[t].push(e)}function KZ(r,e){var t=r.layerStatesArray[r.layerIndex];t.extent&&(e=nu(e,Ma(t.extent,r.viewState.projection)));var n=t.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(r.viewState.projection).getExtent();i&&(e=nu(e,i))}return e}function XZ(r,e){return"".concat(r.getKey(),",").concat(kd(e))}var Nnr=function(r){Pnr(e,r);function e(t,n){var i=r.call(this,t,{uniforms:n.uniforms})||this;i.renderComplete=!1,i.tileTransform_=Li(),i.tempMat4_=AN(),i.tempTileRange_=new k0(0,0,0,0),i.tempTileCoord_=G0(0,0,0),i.tempSize_=[0,0],i.program_,i.vertexShader_=n.vertexShader,i.fragmentShader_=n.fragmentShader,i.indices_=new IN(oT,z0),i.indices_.fromArray([0,1,3,1,2,3]);var o=n.cacheSize!==void 0?n.cacheSize:512;return i.tileTextureCache_=new EN(o),i.paletteTextures_=n.paletteTextures||[],i.frameState_=null,i}return e.prototype.reset=function(t){r.prototype.reset.call(this,{uniforms:t.uniforms}),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(t){var n=this.getLayer(),i=t.getState(),o=n.getUseInterimTilesOnError();return i==Bt.LOADED||i==Bt.EMPTY||i==Bt.ERROR&&!o},e.prototype.prepareFrameInternal=function(t){var n=this.getLayer(),i=n.getRenderSource();return!i||wv(KZ(t,t.extent))?!1:i.getState()==="ready"},e.prototype.enqueueTiles=function(t,n,i,o){var a=t.viewState,u=this.getLayer(),h=u.getRenderSource(),d=h.getTileGridForProjection(a.projection),v=h.getGutterForProjection(a.projection),x=tr(h);x in t.wantedTiles||(t.wantedTiles[x]={});for(var S=t.wantedTiles[x],A=this.tileTextureCache_,L=Math.max(i-u.getPreload(),d.getMinZoom(),u.getMinZoom()),q=i;q>=L;--q)for(var R=d.getTileRangeForExtentAndZ(n,q,this.tempTileRange_),D=d.getResolution(q),k=R.minX;k<=R.maxX;++k)for(var j=R.minY;j<=R.maxY;++j){var $=G0(q,k,j,this.tempTileCoord_),ee=XZ(h,$),J=void 0,ie=void 0;if(A.containsKey(ee)&&(J=A.get(ee),ie=J.tile),!J||J.tile.key!==h.getKey())if(ie=h.getTile(q,k,j,t.pixelRatio,a.projection),!J)J=new $ze({tile:ie,grid:d,helper:this.helper,gutter:v}),A.set(ee,J);else if(this.isDrawableTile_(ie))J.setTile(ie);else{var ue=ie.getInterimTile();J.setTile(ue)}Qze(o,J,q);var le=ie.getKey();S[le]=!0,ie.getState()===Bt.IDLE&&(t.tileQueue.isKeyQueued(le)||t.tileQueue.enqueue([ie,x,d.getTileCoordCenter($),D]))}},e.prototype.renderFrame=function(t){this.frameState_=t,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,t);var i=t.viewState,o=this.getLayer(),a=o.getRenderSource(),u=a.getTileGridForProjection(i.projection),h=a.getGutterForProjection(i.projection),d=KZ(t,t.extent),v=u.getZForResolution(i.resolution,a.zDirection),x={};if(t.nextExtent){var S=u.getZForResolution(i.nextResolution,a.zDirection),A=KZ(t,t.nextExtent);this.enqueueTiles(t,A,S,x)}this.enqueueTiles(t,d,v,x);for(var L={},q=tr(this),R=t.time,D=!1,k=x[v],j=0,$=k.length;j<$;++j){var ee=k[j],J=ee.tile,ie=J.tileCoord;if(ee.loaded){var ue=J.getAlpha(q,R);if(ue===1){J.endTransition(q);continue}D=!0;var le=kd(ie);L[le]=ue}this.renderComplete=!1;var _e=this.findAltTiles_(u,ie,v+1,x);if(!_e)for(var Re=u.getMinZoom(),ze=v-1;ze>=Re;--ze){var qe=this.findAltTiles_(u,ie,ze,x);if(qe)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(t,!D);for(var Ve=Object.keys(x).map(Number).sort(ml),Ke=i.center[0],Ce=i.center[1],Se=0,Ie=Ve.length;Se<Ie;++Se)for(var Ge=Ve[Se],$e=u.getResolution(Ge),Ze=Un(u.getTileSize(Ge),this.tempSize_),Pe=u.getOrigin(Ge),at=Ze[0]+2*h,wt=Ze[1]+2*h,Le=at/wt,Ye=(Ke-Pe[0])/(Ze[0]*$e),je=(Pe[1]-Ce)/(Ze[1]*$e),We=i.resolution/$e,tt=Dnr(Ge),Qe=x[Ge],j=0,$=Qe.length;j<$;++j){var ee=Qe[j];if(ee.loaded){var J=ee.tile,ie=J.tileCoord,le=kd(ie),kt=ie[1],Gt=ie[2];i0(this.tileTransform_),wE(this.tileTransform_,2/(t.size[0]*We/at),-2/(t.size[1]*We/at)),bD(this.tileTransform_,i.rotation),wE(this.tileTransform_,1,1/Le),qke(this.tileTransform_,(Ze[0]*(kt-Ye)-h)/at,(Ze[1]*(Gt-je)-h)/wt),this.helper.setUniformMatrixValue(Or.TILE_TRANSFORM,U0(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(ee.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Onr);for(var bt=0;bt<ee.textures.length;){var be="TEXTURE"+bt,Yt="".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(bt,"]");n.activeTexture(n[be]),n.bindTexture(n.TEXTURE_2D,ee.textures[bt]),n.uniform1i(this.helper.getUniformLocation(Yt),bt),++bt}for(var Ut=0;Ut<this.paletteTextures_.length;++Ut){var Vt=this.paletteTextures_[Ut];n.activeTexture(n["TEXTURE"+bt]);var nr=Vt.getTexture(n);n.bindTexture(n.TEXTURE_2D,nr),n.uniform1i(this.helper.getUniformLocation(Vt.name),bt),++bt}var ue=le in L?L[le]:1;ue<1&&(t.animate=!0),this.helper.setUniformFloatValue(Or.TRANSITION_ALPHA,ue),this.helper.setUniformFloatValue(Or.DEPTH,tt),this.helper.setUniformFloatValue(Or.TEXTURE_PIXEL_WIDTH,at),this.helper.setUniformFloatValue(Or.TEXTURE_PIXEL_HEIGHT,wt),this.helper.setUniformFloatValue(Or.TEXTURE_RESOLUTION,$e),this.helper.setUniformFloatValue(Or.TEXTURE_ORIGIN_X,Pe[0]+kt*Ze[0]*$e-h*$e),this.helper.setUniformFloatValue(Or.TEXTURE_ORIGIN_Y,Pe[1]-Gt*Ze[1]*$e+h*$e);var yr=d;h>0&&(yr=u.getTileCoordExtent(ie),nu(yr,d,yr)),this.helper.setUniformFloatVec4(Or.RENDER_EXTENT,yr),this.helper.setUniformFloatValue(Or.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Or.ZOOM,i.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Xt=this.helper.getCanvas(),lr=this.tileTextureCache_;lr.canExpireCache();){var ee=lr.pop();ee.dispose()}var Pr=function(nn,An){a.expireCache(An.viewState.projection,Lnr)};return t.postRenderFunctions.push(Pr),this.postRender(n,t),Xt},e.prototype.getData=function(t){var n=this.helper.getGL();if(!n)return null;var i=this.frameState_;if(!i)return null;var o=this.getLayer(),a=Nn(i.pixelToCoordinateTransform,t.slice()),u=i.viewState,h=o.getExtent();if(h&&!es(Ma(h,u.projection),a))return null;var d=o.getSources(ia([a]),u.resolution),v,x,S;for(v=d.length-1;v>=0;--v)if(x=d[v],x.getState()==="ready"){if(S=x.getTileGridForProjection(u.projection),x.getWrapX())break;var A=S.getExtent();if(!A||es(A,a))break}if(v<0)return null;for(var L=this.tileTextureCache_,q=S.getZForResolution(u.resolution);q>=S.getMinZoom();--q){var R=S.getTileCoordForCoordAndZ(a,q),D=XZ(x,R);if(L.containsKey(D)){var k=L.get(D);if(k.loaded){var j=S.getOrigin(q),$=Un(S.getTileSize(q)),ee=S.getResolution(q),J=(a[0]-j[0])/ee-R[1]*$[0],ie=(j[1]-a[1])/ee-R[2]*$[1];return k.getPixelData(J,ie)}}}return null},e.prototype.findAltTiles_=function(t,n,i,o){var a=t.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!a)return!1;for(var u=!0,h=this.tileTextureCache_,d=this.getLayer().getRenderSource(),v=a.minX;v<=a.maxX;++v)for(var x=a.minY;x<=a.maxY;++x){var S=XZ(d,[i,v,x]),A=!1;if(h.containsKey(S)){var L=h.get(S);L.loaded&&(Qze(o,L,i),A=!0)}A||(u=!1)}return u},e.prototype.removeHelper=function(){if(this.helper){var t=this.tileTextureCache_;t.forEach(function(n){return n.dispose()}),t.clear()}r.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var t=this.helper;if(t){var n=t.getGL();n.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}r.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},e}(Kze),e4e=Nnr;var qnr=function(){function r(e,t){this.name=e,this.data=t,this.texture_=null}return r.prototype.getTexture=function(e){if(!this.texture_){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_},r}(),t4e=qnr;var Kt={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},$r={};function Jc(r){if(typeof r=="number")return Kt.NUMBER;if(typeof r=="boolean")return Kt.BOOLEAN;if(typeof r=="string")return qFe(r)?Kt.COLOR|Kt.STRING:Kt.STRING;if(!Array.isArray(r))throw new Error("Unhandled value type: ".concat(JSON.stringify(r)));var e=r,t=e.every(function(i){return typeof i=="number"});if(t)return e.length===3||e.length===4?Kt.COLOR|Kt.NUMBER_ARRAY:Kt.NUMBER_ARRAY;if(typeof e[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var n=$r[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.getReturnType(e.slice(1))}function knr(r){return RD(r)%1===0}function RN(r){var e=r.toString();return e.indexOf(".")===-1?e+".0":e}function r4e(r){if(r.length<2||r.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(r.length,"(").concat(r.map(RN).join(", "),")")}function Fnr(r){var e=uh(r).slice();return e.length<4&&e.push(1),r4e(e.map(function(t,n){return n<3?t/255:t}))}function QZ(r,e){return r.stringLiteralsMap[e]===void 0&&(r.stringLiteralsMap[e]=Object.keys(r.stringLiteralsMap).length),r.stringLiteralsMap[e]}function jnr(r,e){return RN(QZ(r,e))}function rr(r,e,t){if(Array.isArray(e)&&typeof e[0]=="string"){var n=$r[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.toGlsl(r,e.slice(1),t)}var i=Jc(e);if((i&Kt.NUMBER)>0)return RN(e);if((i&Kt.BOOLEAN)>0)return e.toString();if((i&Kt.STRING)>0&&(t===void 0||t==Kt.STRING))return jnr(r,e.toString());if((i&Kt.COLOR)>0&&(t===void 0||t==Kt.COLOR))return Fnr(e);if((i&Kt.NUMBER_ARRAY)>0)return r4e(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(t,")"))}function n4e(r){if(!(Jc(r)&Kt.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(r)," instead"))}function Wi(r){for(var e=0;e<r.length;e++)n4e(r[e])}function i4e(r){if(!(Jc(r)&Kt.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(r)," instead"))}function eY(r){if(!(Jc(r)&Kt.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(r)," instead"))}function si(r,e){if(r.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function Fd(r,e){if(r.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function PN(r,e){if(r.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(r.length," instead"))}function o4e(r){if(r.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(r," instead"))}function znr(r){if(r.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(r," instead"))}function tY(r,e){if(!knr(e))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(r)))}$r.get={getReturnType:function(r){return Kt.ANY},toGlsl:function(r,e){si(e,1),i4e(e[0]);var t=e[0].toString();r.attributes.indexOf(t)===-1&&r.attributes.push(t);var n=r.inFragmentShader?"v_":"a_";return n+t}};function rY(r){return"u_var_"+r}$r.var={getReturnType:function(r){return Kt.ANY},toGlsl:function(r,e){si(e,1),i4e(e[0]);var t=e[0].toString();return r.variables.indexOf(t)===-1&&r.variables.push(t),rY(t)}};var nY="u_paletteTextures";$r.palette={getReturnType:function(r){return Kt.COLOR},toGlsl:function(r,e){si(e,2),n4e(e[0]);var t=rr(r,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=n.length,o=new Uint8Array(i*4),a=0;a<i;a++){var u=n[a],h=void 0;if(typeof u=="string")h=oZ(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var d=u.length;if(d===4)h=u;else{if(d!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(d));h=[u[0],u[1],u[2],1]}}var v=a*4;o[v]=h[0],o[v+1]=h[1],o[v+2]=h[2],o[v+3]=h[3]*255}r.paletteTextures||(r.paletteTextures=[]);var x="".concat(nY,"[").concat(r.paletteTextures.length,"]"),S=new t4e(x,o);return r.paletteTextures.push(S),"texture2D(".concat(x,", vec2((").concat(t," + 0.5) / ").concat(i,".0, 0.5))")}};var JZ="getBandValue";$r.band={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){Fd(e,1),PN(e,3);var t=e[0];if(!(JZ in r.functions)){for(var n="",i=r.bandCount||1,o=0;o<i;o++){var a=Math.floor(o/4),u=o%4;u===i-1&&u===1&&(u=3);var h="".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(a,"]");n+=`
          if (band == `.concat(o+1,`.0) {
            return texture2D(`).concat(h,", v_textureCoord + vec2(dx, dy))[").concat(u,`];
          }
        `)}r.functions[JZ]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(Or.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var d=rr(r,t),v=rr(r,e[1]||0),x=rr(r,e[2]||0);return"".concat(JZ,"(").concat(d,", ").concat(v,", ").concat(x,")")}};$r.time={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,0),"u_time"}};$r.zoom={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,0),"u_zoom"}};$r.resolution={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,0),"u_resolution"}};$r["*"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,2),Wi(e),"(".concat(rr(r,e[0])," * ").concat(rr(r,e[1]),")")}};$r["/"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,2),Wi(e),"(".concat(rr(r,e[0])," / ").concat(rr(r,e[1]),")")}};$r["+"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,2),Wi(e),"(".concat(rr(r,e[0])," + ").concat(rr(r,e[1]),")")}};$r["-"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,2),Wi(e),"(".concat(rr(r,e[0])," - ").concat(rr(r,e[1]),")")}};$r.clamp={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){si(e,3),Wi(e);var t=rr(r,e[1]),n=rr(r,e[2]);return"clamp(".concat(rr(r,e[0]),", ").concat(t,", ").concat(n,")")}};$r["%"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,2),Wi(e),"mod(".concat(rr(r,e[0]),", ").concat(rr(r,e[1]),")")}};$r["^"]={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,2),Wi(e),"pow(".concat(rr(r,e[0]),", ").concat(rr(r,e[1]),")")}};$r.abs={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,1),Wi(e),"abs(".concat(rr(r,e[0]),")")}};$r.floor={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,1),Wi(e),"floor(".concat(rr(r,e[0]),")")}};$r.round={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,1),Wi(e),"floor(".concat(rr(r,e[0])," + 0.5)")}};$r.ceil={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,1),Wi(e),"ceil(".concat(rr(r,e[0]),")")}};$r.sin={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,1),Wi(e),"sin(".concat(rr(r,e[0]),")")}};$r.cos={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return si(e,1),Wi(e),"cos(".concat(rr(r,e[0]),")")}};$r.atan={getReturnType:function(r){return Kt.NUMBER},toGlsl:function(r,e){return Fd(e,1),PN(e,2),Wi(e),e.length===2?"atan(".concat(rr(r,e[0]),", ").concat(rr(r,e[1]),")"):"atan(".concat(rr(r,e[0]),")")}};$r[">"]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return si(e,2),Wi(e),"(".concat(rr(r,e[0])," > ").concat(rr(r,e[1]),")")}};$r[">="]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return si(e,2),Wi(e),"(".concat(rr(r,e[0])," >= ").concat(rr(r,e[1]),")")}};$r["<"]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return si(e,2),Wi(e),"(".concat(rr(r,e[0])," < ").concat(rr(r,e[1]),")")}};$r["<="]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return si(e,2),Wi(e),"(".concat(rr(r,e[0])," <= ").concat(rr(r,e[1]),")")}};function a4e(r){return{getReturnType:function(e){return Kt.BOOLEAN},toGlsl:function(e,t){si(t,2);for(var n=Kt.ANY,i=0;i<t.length;i++)n&=Jc(t[i]);if(n===Kt.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(t)," instead"));return n&=~Kt.COLOR,"(".concat(rr(e,t[0],n)," ").concat(r," ").concat(rr(e,t[1],n),")")}}}$r["=="]=a4e("==");$r["!="]=a4e("!=");$r["!"]={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){return si(e,1),eY(e[0]),"(!".concat(rr(r,e[0]),")")}};function s4e(r){return{getReturnType:function(e){return Kt.BOOLEAN},toGlsl:function(e,t){Fd(t,2);for(var n=0;n<t.length;n++)eY(t[n]);var i="";return i=t.map(function(o){return rr(e,o)}).join(" ".concat(r," ")),i="(".concat(i,")"),i}}}$r.all=s4e("&&");$r.any=s4e("||");$r.between={getReturnType:function(r){return Kt.BOOLEAN},toGlsl:function(r,e){si(e,3),Wi(e);var t=rr(r,e[1]),n=rr(r,e[2]),i=rr(r,e[0]);return"(".concat(i," >= ").concat(t," && ").concat(i," <= ").concat(n,")")}};$r.array={getReturnType:function(r){return Kt.NUMBER_ARRAY},toGlsl:function(r,e){Fd(e,2),PN(e,4),Wi(e);var t=e.map(function(n){return rr(r,n,Kt.NUMBER)});return"vec".concat(e.length,"(").concat(t.join(", "),")")}};$r.color={getReturnType:function(r){return Kt.COLOR},toGlsl:function(r,e){Fd(e,3),PN(e,4),Wi(e);var t=e;e.length===3&&t.push(1);var n=e.map(function(i,o){return rr(r,i,Kt.NUMBER)+(o<3?" / 255.0":"")});return"vec".concat(e.length,"(").concat(n.join(", "),")")}};$r.interpolate={getReturnType:function(r){for(var e=Kt.COLOR|Kt.NUMBER,t=3;t<r.length;t+=2)e=e&Jc(r[t]);return e},toGlsl:function(r,e,t){o4e(e),Fd(e,6);var n=e[0],i;switch(n[0]){case"linear":i=1;break;case"exponential":i=n[1];break;default:i=null;}if(!i)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var o=t!==void 0?t:Kt.ANY,a=$r.interpolate.getReturnType(e)&o;tY(e,a);for(var u=rr(r,e[1]),h=RN(i),d="",v=2;v<e.length-2;v+=2){var x=rr(r,e[v]),S=d||rr(r,e[v+1],a),A=rr(r,e[v+2]),L=rr(r,e[v+3],a);d="mix(".concat(S,", ").concat(L,", pow(clamp((").concat(u," - ").concat(x,") / (").concat(A," - ").concat(x,"), 0.0, 1.0), ").concat(h,"))")}return d}};$r.match={getReturnType:function(r){for(var e=Kt.ANY,t=2;t<r.length;t+=2)e=e&Jc(r[t]);return e=e&Jc(r[r.length-1]),e},toGlsl:function(r,e,t){o4e(e),Fd(e,4);var n=t!==void 0?t:Kt.ANY,i=$r.match.getReturnType(e)&n;tY(e,i);for(var o=rr(r,e[0]),a=rr(r,e[e.length-1],i),u=null,h=e.length-3;h>=1;h-=2){var d=rr(r,e[h]),v=rr(r,e[h+1],i);u="(".concat(o," == ").concat(d," ? ").concat(v," : ").concat(u||a,")")}return u}};$r.case={getReturnType:function(r){for(var e=Kt.ANY,t=1;t<r.length;t+=2)e=e&Jc(r[t]);return e=e&Jc(r[r.length-1]),e},toGlsl:function(r,e,t){znr(e),Fd(e,3);var n=t!==void 0?t:Kt.ANY,i=$r.case.getReturnType(e)&n;tY(e,i);for(var o=0;o<e.length-1;o+=2)eY(e[o]);for(var a=rr(r,e[e.length-1],i),u=null,o=e.length-3;o>=0;o-=2){var h=rr(r,e[o]),d=rr(r,e[o+1],i);u="(".concat(h," ? ").concat(d," : ").concat(u||a,")")}return u}};var Bnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function l4e(r,e){var t=`
    attribute vec2 `.concat(lT.TEXTURE_COORD,`;
    uniform mat4 `).concat(Or.TILE_TRANSFORM,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Or.TEXTURE_RESOLUTION,`;
    uniform float `).concat(Or.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(Or.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(Or.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(lT.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(Or.TEXTURE_ORIGIN_X," + ").concat(Or.TEXTURE_RESOLUTION," * ").concat(Or.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(Or.TEXTURE_ORIGIN_Y," - ").concat(Or.TEXTURE_RESOLUTION," * ").concat(Or.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(Or.TILE_TRANSFORM," * vec4(").concat(lT.TEXTURE_COORD,", ").concat(Or.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},i=[];if(r.color!==void 0){var o=rr(n,r.color,Kt.COLOR);i.push("color = ".concat(o,";"))}if(r.contrast!==void 0){var a=rr(n,r.contrast,Kt.NUMBER);i.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(r.exposure!==void 0){var u=rr(n,r.exposure,Kt.NUMBER);i.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(r.saturation!==void 0){var h=rr(n,r.saturation,Kt.NUMBER);i.push(`
      float saturation = `.concat(h,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(r.gamma!==void 0){var d=rr(n,r.gamma,Kt.NUMBER);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(d,"));"))}if(r.brightness!==void 0){var v=rr(n,r.brightness,Kt.NUMBER);i.push("color.rgb = clamp(color.rgb + ".concat(v,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var x={},S=n.variables.length;if(S>1&&!r.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var A=function(j){var $=n.variables[j];if(!($ in r.variables))throw new Error("Missing '".concat($,"' in style variables"));var ee=rY($);x[ee]=function(){var J=r.variables[$];return typeof J=="string"&&(J=QZ(n,J)),J!==void 0?J:-9999999}},L=0;L<S;++L)A(L);var q=Object.keys(x).map(function(j){return"uniform float ".concat(j,";")}),R=Math.ceil(e/4);q.push("uniform sampler2D ".concat(Or.TILE_TEXTURE_ARRAY,"[").concat(R,"];")),n.paletteTextures&&q.push("uniform sampler2D ".concat(nY,"[").concat(n.paletteTextures.length,"];"));var D=Object.keys(n.functions).map(function(j){return n.functions[j]}),k=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(Or.RENDER_EXTENT,`;
    uniform float `).concat(Or.TRANSITION_ALPHA,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Or.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Or.RESOLUTION,`;
    uniform float `).concat(Or.ZOOM,`;

    `).concat(q.join(`
`),`

    `).concat(D.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(Or.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(Or.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(Or.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(Or.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(Or.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(i.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(Or.TRANSITION_ALPHA,`;
    }`);return{vertexShader:t,fragmentShader:k,uniforms:x,paletteTextures:n.paletteTextures}}var u4e=function(r){Bnr(e,r);function e(t){var n=this,i=t?Ur({},t):{},o=i.style||{};delete i.style;var a=i.cacheSize;return delete i.cacheSize,n=r.call(this,i)||this,n.sources_=i.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=o,n.cacheSize_=a,n.styleVariables_=n.style_.variables||{},n.addChangeListener(un.SOURCE,n.handleSourceUpdate_),n}return e.prototype.getSources=function(t,n){var i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,n):this.sources_:i?[i]:[]},e.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},e.prototype.getSourceState=function(){var t=this.getRenderSource();return t?t.getState():"undefined"},e.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},e.prototype.getSourceBandCount_=function(){var t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},e.prototype.createRenderer=function(){var t=l4e(this.style_,this.getSourceBandCount_());return new e4e(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})},e.prototype.renderSources=function(t,n){for(var i=this.getRenderer(),o,a=0,u=n.length;a<u;++a)this.renderedSource_=n[a],i.prepareFrame(t)&&(o=i.renderFrame(t));return o},e.prototype.render=function(t,n){var i=this;this.rendered=!0;for(var o=t.viewState,a=this.getSources(t.extent,o.resolution),u=!0,h=function(A,L){var q=a[A],R=q.getState();if(R=="loading"){var D=function(){q.getState()=="ready"&&(q.removeEventListener("change",D),i.changed())};q.addEventListener("change",D)}u=u&&R=="ready"},d=0,v=a.length;d<v;++d)h(d,v);var x=this.renderSources(t,a);if(this.getRenderer().renderComplete&&u)return this.renderedResolution_=o.resolution,x;if(this.renderedResolution_>.5*o.resolution){var S=this.getSources(t.extent,this.renderedResolution_).filter(function(A){return!a.includes(A)});if(S.length>0)return this.renderSources(t,S)}return x},e.prototype.setStyle=function(t){this.styleVariables_=t.variables||{},this.style_=t;var n=l4e(this.style_,this.getSourceBandCount_()),i=this.getRenderer();i.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(t){Ur(this.styleVariables_,t),this.changed()},e}(SN);u4e.prototype.dispose;var c4e=u4e;var Unr=[0,0,0],jd=5,Vnr=function(){function r(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,or(bke(this.resolutions_,function(a,u){return u-a},!0),17);var t;if(!e.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,or(this.origins_.length==this.resolutions_.length,20));var o=e.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=iu(o)),or(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,or(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:qd,or(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(a,u){var h=new k0(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(o){var d=this.getTileRangeForExtentAndZ(o,u);h.minX=Math.max(d.minX,h.minX),h.maxX=Math.min(d.maxX,h.maxX),h.minY=Math.max(d.minY,h.minY),h.maxY=Math.min(d.maxY,h.maxY)}return h},this):o&&this.calculateTileRanges_(o)}return r.prototype.forEachTileCoord=function(e,t,n){for(var i=this.getTileRangeForExtentAndZ(e,t),o=i.minX,a=i.maxX;o<=a;++o)for(var u=i.minY,h=i.maxY;u<=h;++u)n([t,o,u])},r.prototype.forEachTileCoordParentTileRange=function(e,t,n,i){var o,a,u,h=null,d=e[0]-1;for(this.zoomFactor_===2?(a=e[1],u=e[2]):h=this.getTileCoordExtent(e,i);d>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),u=Math.floor(u/2),o=Ov(a,a,u,u,n)):o=this.getTileRangeForExtentAndZ(h,d,n),t(d,o))return!0;--d}return!1},r.prototype.getExtent=function(){return this.extent_},r.prototype.getMaxZoom=function(){return this.maxZoom},r.prototype.getMinZoom=function(){return this.minZoom},r.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},r.prototype.getResolution=function(e){return this.resolutions_[e]},r.prototype.getResolutions=function(){return this.resolutions_},r.prototype.getTileCoordChildTileRange=function(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var i=e[1]*2,o=e[2]*2;return Ov(i,i+1,o,o+1,t)}var a=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e[0]+1,t)}return null},r.prototype.getTileRangeForTileCoordAndZ=function(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;var i=e[0],o=e[1],a=e[2];if(t===i)return Ov(o,a,o,a,n);if(this.zoomFactor_){var u=Math.pow(this.zoomFactor_,t-i),h=Math.floor(o*u),d=Math.floor(a*u);if(t<i)return Ov(h,h,d,d,n);var v=Math.floor(u*(o+1))-1,x=Math.floor(u*(a+1))-1;return Ov(h,v,d,x,n)}var S=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(S,t,n)},r.prototype.getTileRangeExtent=function(e,t,n){var i=this.getOrigin(e),o=this.getResolution(e),a=Un(this.getTileSize(e),this.tmpSize_),u=i[0]+t.minX*a[0]*o,h=i[0]+(t.maxX+1)*a[0]*o,d=i[1]+t.minY*a[1]*o,v=i[1]+(t.maxY+1)*a[1]*o;return Ca(u,d,h,v,n)},r.prototype.getTileRangeForExtentAndZ=function(e,t,n){var i=Unr;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,i);var o=i[1],a=i[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,i),Ov(o,i[1],a,i[2],n)},r.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=Un(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*n,t[1]-(e[2]+.5)*i[1]*n]},r.prototype.getTileCoordExtent=function(e,t){var n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=Un(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*o[0]*i,u=n[1]-(e[2]+1)*o[1]*i,h=a+o[0]*i,d=u+o[1]*i;return Ca(a,u,h,d,t)},r.prototype.getTileCoordForCoordAndResolution=function(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)},r.prototype.getTileCoordForXYAndResolution_=function(e,t,n,i,o){var a=this.getZForResolution(n),u=n/this.getResolution(a),h=this.getOrigin(a),d=Un(this.getTileSize(a),this.tmpSize_),v=u*(e-h[0])/n/d[0],x=u*(h[1]-t)/n/d[1];return i?(v=IE(v,jd)-1,x=IE(x,jd)-1):(v=TE(v,jd),x=TE(x,jd)),G0(a,v,x,o)},r.prototype.getTileCoordForXYAndZ_=function(e,t,n,i,o){var a=this.getOrigin(n),u=this.getResolution(n),h=Un(this.getTileSize(n),this.tmpSize_),d=(e-a[0])/u/h[0],v=(a[1]-t)/u/h[1];return i?(d=IE(d,jd)-1,v=IE(v,jd)-1):(d=TE(d,jd),v=TE(v,jd)),G0(n,d,v,o)},r.prototype.getTileCoordForCoordAndZ=function(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)},r.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},r.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},r.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},r.prototype.getZForResolution=function(e,t){var n=r0(this.resolutions_,e,t||0);return zn(n,this.minZoom,this.maxZoom)},r.prototype.tileCoordIntersectsViewport=function(e,t){return V8(t,0,t.length,2,this.getTileCoordExtent(e))},r.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,n=new Array(t),i=this.minZoom;i<t;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n},r}(),uT=Vnr;var Gnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$nr=function(r){Gnr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),n=Xze(t),i=n[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(kd(o.tileCoord)),o.release())}.bind(this))}},e}(EN),ON=$nr;var LN={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function DN(r){var e=r.getDefaultTileGrid();return e||(e=Wnr(r),r.setDefaultTileGrid(e)),e}function f4e(r,e,t){var n=e[0],i=r.getTileCoordCenter(e),o=NN(t);if(es(o,i))return e;var a=ln(o),u=Math.ceil((o[0]-i[0])/a);return i[0]+=a*u,r.getTileCoordForCoordAndZ(i,n)}function Hnr(r,e,t,n){var i=n!==void 0?n:"top-left",o=p4e(r,e,t);return new uT({extent:r,origin:kke(r,i),resolutions:o,tileSize:t})}function h4e(r){var e=r||{},t=e.extent||Jn("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:p4e(t,e.maxZoom,e.tileSize,e.maxResolution)};return new uT(n)}function p4e(r,e,t,n){for(var i=e!==void 0?e:yze,o=yo(r),a=ln(r),u=Un(t!==void 0?t:qd),h=n>0?n:Math.max(a/u[0],o/u[1]),d=i+1,v=new Array(d),x=0;x<d;++x)v[x]=h/Math.pow(2,x);return v}function Wnr(r,e,t,n){var i=NN(r);return Hnr(i,e,t,n)}function NN(r){r=Jn(r);var e=r.getExtent();if(!e){var t=180*Ia[Aa.DEGREES]/r.getMetersPerUnit();e=Ca(-t,-t,t,t)}return e}var d4e=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Znr=function(r){d4e(e,r);function e(t){var n=r.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;n.on,n.once,n.un,n.opaque_=t.opaque!==void 0?t.opaque:!1,n.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,n.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var i=[256,256];return n.tileGrid&&Un(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new ON(t.cacheSize||0),n.tmpSize=[0,0],n.key_=t.key||"",n.tileOptions={transition:t.transition,interpolate:t.interpolate},n.zDirection=t.zDirection?t.zDirection:0,n}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},e.prototype.forEachLoadedTile=function(t,n,i,o){var a=this.getTileCacheForProjection(t);if(!a)return!1;for(var u=!0,h,d,v,x=i.minX;x<=i.maxX;++x)for(var S=i.minY;S<=i.maxY;++S)d=Lv(n,x,S),v=!1,a.containsKey(d)&&(h=a.get(d),v=h.getState()===Bt.LOADED,v&&(v=o(h)!==!1)),v||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,n,i,o,a){return ir()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:DN(t)},e.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();return or(n===null||Uc(n,t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,n,i){var o=this.getTileGridForProjection(i),a=this.getTilePixelRatio(n),u=Un(o.getTileSize(t),this.tmpSize);return a==1?u:WD(u,a,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=n!==void 0?n:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=f4e(o,t,i)),Jze(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),r.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,n,i,o){},e}(oN),m4e=function(r){d4e(e,r);function e(t,n){var i=r.call(this,t)||this;return i.tile=n,i}return e}(Ei);var v4e=Znr;function Ynr(r,e){var t=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,u,h){if(a)return r.replace(t,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,function(){var d=a[0],v=e.getFullTileRange(d);or(v,55);var x=v.getHeight()-a[2]-1;return x.toString()})}}function g4e(r,e){for(var t=r.length,n=new Array(t),i=0;i<t;++i)n[i]=Ynr(r[i],e);return iY(n)}function iY(r){return r.length===1?r[0]:function(e,t,n){if(e){var i=MN(e),o=yl(i,r.length);return r[o](e,t,n)}else return}}function qN(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n=t[1].charCodeAt(0),i=t[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(r.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){for(var a=parseInt(t[2],10),u=parseInt(t[1],10);u<=a;u++)e.push(r.replace(t[0],u.toString()));return e}return e.push(r),e}var Knr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xnr=function(r){Knr(e,r);function e(t){var n=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(n.tileUrlFunction=t.tileUrlFunction),n.urls=null,t.urls?n.setUrls(t.urls):t.url&&n.setUrl(t.url),n.tileLoadingKeys_={},n}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var n=t.target,i=tr(n),o=n.getState(),a;o==Bt.LOADING?(this.tileLoadingKeys_[i]=!0,a=LN.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=o==Bt.ERROR?LN.TILELOADERROR:o==Bt.LOADED?LN.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new m4e(a,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},e.prototype.setUrl=function(t){var n=qN(t);this.urls=n,this.setUrls(n)},e.prototype.setUrls=function(t){this.urls=t;var n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(g4e(t,this.tileGrid),n):this.setKey(n)},e.prototype.tileUrlFunction=function(t,n,i){},e.prototype.useTile=function(t,n,i){var o=Lv(t,n,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(v4e),y4e=Xnr;var Jnr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qnr=function(r){Jnr(e,r);function e(t){var n=this,i=t.imageSmoothing!==void 0?t.imageSmoothing:!0;return t.interpolate!==void 0&&(i=t.interpolate),n=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:eir,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:i,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this,n.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,n.tileClass=t.tileClass!==void 0?t.tileClass:xh,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return e.prototype.canExpireCache=function(){if(!Xc)return r.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,n){if(!Xc){r.prototype.expireCache.call(this,t,n);return}var i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(var o in this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==i?n:{})}},e.prototype.getGutterForProjection=function(t){return Xc&&this.getProjection()&&t&&!Uc(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var t=r.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},e.prototype.getOpaque=function(t){return Xc&&this.getProjection()&&t&&!Uc(this.getProjection(),t)?!1:r.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!Xc)return r.prototype.getTileGridForProjection.call(this,t);var n=this.getProjection();if(this.tileGrid&&(!n||Uc(n,t)))return this.tileGrid;var i=tr(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=DN(t)),this.tileGridForProjection[i]},e.prototype.getTileCacheForProjection=function(t){if(!Xc)return r.prototype.getTileCacheForProjection.call(this,t);var n=this.getProjection();if(!n||Uc(n,t))return this.tileCache;var i=tr(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new ON(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,n,i,o,a,u){var h=[t,n,i],d=this.getTileCoordForTileUrlFunction(h,a),v=d?this.tileUrlFunction(d,o,a):void 0,x=new this.tileClass(h,v!==void 0?Bt.IDLE:Bt.EMPTY,v!==void 0?v:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=u,x.addEventListener(Lt.CHANGE,this.handleTileChange.bind(this)),x},e.prototype.getTile=function(t,n,i,o,a){var u=this.getProjection();if(!Xc||!u||!a||Uc(u,a))return this.getTileInternal(t,n,i,o,u||a);var h=this.getTileCacheForProjection(a),d=[t,n,i],v=void 0,x=kd(d);h.containsKey(x)&&(v=h.get(x));var S=this.getKey();if(v&&v.key==S)return v;var A=this.getTileGridForProjection(u),L=this.getTileGridForProjection(a),q=this.getTileCoordForTileUrlFunction(d,a),R=new j0(u,A,a,L,d,q,this.getTilePixelRatio(o),this.getGutter(),function(D,k,j,$){return this.getTileInternal(D,k,j,$,u)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return R.key=S,v?(R.interimTile=v,R.refreshInterimChain(),h.replace(x,R)):h.set(x,R),R},e.prototype.getTileInternal=function(t,n,i,o,a){var u=null,h=Lv(t,n,i),d=this.getKey();if(!this.tileCache.containsKey(h))u=this.createTile_(t,n,i,o,a,d),this.tileCache.set(h,u);else if(u=this.tileCache.get(h),u.key!=d){var v=u;u=this.createTile_(t,n,i,o,a,d),v.getState()==Bt.IDLE?u.interimTile=v.interimTile:u.interimTile=v,u.refreshInterimChain(),this.tileCache.replace(h,u)}return u},e.prototype.setRenderReprojectionEdges=function(t){if(!(!Xc||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,n){if(Xc){var i=Jn(t);if(i){var o=tr(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}},e}(y4e);function eir(r,e){r.getImage().src=e}var $0=Qnr;var _4e=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oY={DEFAULT:"default",TRUNCATED:"truncated"},tir=function(r){_4e(e,r);function e(t,n,i,o,a,u,h){var d=r.call(this,n,i,o,a,u,h)||this;return d.zoomifyImage_=null,d.tileSize_=t,d}return e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=r.prototype.getImage.call(this);if(this.state==Bt.LOADED){var n=this.tileSize_;if(t.width==n[0]&&t.height==n[1])return this.zoomifyImage_=t,t;var i=Ii(n[0],n[1]);return i.drawImage(t,0,0),this.zoomifyImage_=i.canvas,i.canvas}else return t},e}(xh);var rir=function(r){_4e(e,r);function e(t){var n=this,i=t,o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var a=i.size,u=i.tierSizeCalculation!==void 0?i.tierSizeCalculation:oY.DEFAULT,h=i.tilePixelRatio||1,d=a[0],v=a[1],x=[],S=i.tileSize||qd,A=S*h;switch(u){case oY.DEFAULT:for(;d>A||v>A;)x.push([Math.ceil(d/A),Math.ceil(v/A)]),A+=A;break;case oY.TRUNCATED:for(var L=d,q=v;L>A||q>A;)x.push([Math.ceil(L/A),Math.ceil(q/A)]),L>>=1,q>>=1;break;default:or(!1,53);break;}x.push([1,1]),x.reverse();for(var R=[h],D=[0],k=1,j=x.length;k<j;k++)R.push(h<<k),D.push(x[k-1][0]*x[k-1][1]+D[k-1]);R.reverse();var $=new uT({tileSize:S,extent:i.extent||[0,-v,d,0],resolutions:R}),ee=i.url;ee&&ee.indexOf("{TileGroup}")==-1&&ee.indexOf("{tileIndex}")==-1&&(ee+="{TileGroup}/{z}-{x}-{y}.jpg");var J=qN(ee),ie=S*h;function ue(Ve){return function(Ke,Ce,Se){if(Ke){var Ie=Ke[0],Ge=Ke[1],$e=Ke[2],Ze=Ge+$e*x[Ie][0],Pe=(Ze+D[Ie])/ie|0,at={z:Ie,x:Ge,y:$e,tileIndex:Ze,TileGroup:"TileGroup"+Pe};return Ve.replace(/\{(\w+?)\}/g,function(wt,Le){return at[Le]})}else return}}var le=iY(J.map(ue)),_e=tir.bind(null,Un(S*h));n=r.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,projection:i.projection,tilePixelRatio:h,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:_e,tileGrid:$,tileUrlFunction:le,transition:i.transition})||this,n.zDirection=i.zDirection;var Re=$.getTileCoordForCoordAndResolution(js($.getExtent()),R[R.length-1]),ze=le(Re,1,null),qe=new Image;return qe.addEventListener("error",function(){ie=S,this.changed()}.bind(n)),qe.src=ze,n}return e}($0),x4e=rir;var Hs=Me(ht(),1),OUe=Me(mo(),1),Ih=Me(Qr(),1);function xn(r){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(r)}function w4e(r,e){if(xn(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(xn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function kN(r){var e=w4e(r,"string");return xn(e)=="symbol"?e:e+""}function ft(r,e,t){return(e=kN(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function b4e(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b4e(Object(t),!0).forEach(function(n){ft(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):b4e(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function La(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function S4e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,kN(n.key),n)}}function Da(r,e,t){return e&&S4e(r.prototype,e),t&&S4e(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Na(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&j_(r,e)}function rc(r){return rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rc(r)}function aY(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(aY=function(){return!!r})()}function Fr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function E4e(r,e){if(e&&(xn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fr(r)}function qa(r){var e=aY();return function(){var t,n=rc(r);if(e){var i=rc(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return E4e(this,t)}}var gY=Me(ht());var sY={},nir=[],iir=function(e){nir.push(e)};function oir(r,e){if(0)var t}function air(r,e){if(0)var t}function sir(){sY={}}function T4e(r,e,t){!e&&!sY[t]&&(r(!1,t),sY[t]=!0)}function FN(r,e){T4e(oir,r,e)}function lir(r,e){T4e(air,r,e)}FN.preMessage=iir;FN.resetWarned=sir;FN.noteOnce=lir;var Qc=FN;var I4e=Me(ht()),uir=function(e){var t,n,i=e.className,o=e.included,a=e.vertical,u=e.style,h=e.length,d=e.offset,v=e.reverse;h<0&&(v=!v,h=Math.abs(h),d=100-d);var x=a?(t={},ft(t,v?"top":"bottom","".concat(d,"%")),ft(t,v?"bottom":"top","auto"),ft(t,"height","".concat(h,"%")),t):(n={},ft(n,v?"right":"left","".concat(d,"%")),ft(n,v?"left":"right","auto"),ft(n,"width","".concat(h,"%")),n),S=yt(yt({},u),x);return o?I4e.default.createElement("div",{className:i,style:S}):null},jN=uir;function is(r,e){if(r==null)return{};var t,n,i=XS(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)t=o[n],e.includes(t)||{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function cT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function A4e(r){if(Array.isArray(r))return cT(r)}function lY(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function fT(r,e){if(r){if(typeof r=="string")return cT(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?cT(r,e):void 0}}function C4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vu(r){return A4e(r)||lY(r)||fT(r)||C4e()}function M4e(r,e){for(;!{}.hasOwnProperty.call(r,e)&&(r=rc(r))!==null;);return r}function H0(){return H0=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=M4e(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},H0.apply(null,arguments)}var Z0=Me(ht());var uY=Me(mo());function os(r,e,t,n){var i=uY.default.unstable_batchedUpdates?function(a){uY.default.unstable_batchedUpdates(t,a)}:t;return r!=null&&r.addEventListener&&r.addEventListener(e,i,n),{remove:function(){r!=null&&r.removeEventListener&&r.removeEventListener(e,i,n)}}}var F4e=Me(hi());var cY=Me(ht()),R4e=Me(hi());var cir=function(e,t,n,i,o,a){Qc(n?i>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var u=Object.keys(t).map(parseFloat).sort(function(d,v){return d-v});if(n&&i)for(var h=o;h<=a;h+=i)u.indexOf(h)===-1&&u.push(h);return u},fir=function(e){var t=e.prefixCls,n=e.vertical,i=e.reverse,o=e.marks,a=e.dots,u=e.step,h=e.included,d=e.lowerBound,v=e.upperBound,x=e.max,S=e.min,A=e.dotStyle,L=e.activeDotStyle,q=x-S,R=cir(n,o,a,u,S,x).map(function(D){var k,j="".concat(Math.abs(D-S)/q*100,"%"),$=!h&&D===v||h&&D<=v&&D>=d,ee=n?yt(yt({},A),{},ft({},i?"top":"bottom",j)):yt(yt({},A),{},ft({},i?"right":"left",j));$&&(ee=yt(yt({},ee),L));var J=(0,R4e.default)((k={},ft(k,"".concat(t,"-dot"),!0),ft(k,"".concat(t,"-dot-active"),$),ft(k,"".concat(t,"-dot-reverse"),i),k));return cY.default.createElement("span",{className:J,style:ee,key:D})});return cY.default.createElement("div",{className:"".concat(t,"-step")},R)},P4e=fir;var zN=Me(ht()),O4e=Me(hi()),hir=function(e){var t=e.className,n=e.vertical,i=e.reverse,o=e.marks,a=e.included,u=e.upperBound,h=e.lowerBound,d=e.max,v=e.min,x=e.onClickLabel,S=Object.keys(o),A=d-v,L=S.map(parseFloat).sort(function(q,R){return q-R}).map(function(q){var R,D=o[q],k=xn(D)==="object"&&!zN.default.isValidElement(D),j=k?D.label:D;if(!j&&j!==0)return null;var $=!a&&q===u||a&&q<=u&&q>=h,ee=(0,O4e.default)((R={},ft(R,"".concat(t,"-text"),!0),ft(R,"".concat(t,"-text-active"),$),R)),J=ft({marginBottom:"-50%"},i?"top":"bottom","".concat((q-v)/A*100,"%")),ie=ft({transform:"translateX(".concat(i?"50%":"-50%",")"),msTransform:"translateX(".concat(i?"50%":"-50%",")")},i?"right":"left","".concat((q-v)/A*100,"%")),ue=n?J:ie,le=k?yt(yt({},ue),D.style):ue;return zN.default.createElement("span",{className:ee,style:le,key:q,onMouseDown:function(Re){return x(Re,q)},onTouchStart:function(Re){return x(Re,q)}},j)});return zN.default.createElement("div",{className:t},L)},L4e=hir;var fY=Me(ht()),D4e=Me(hi());var W0=function(r){Na(t,r);var e=qa(t);function t(){var n;return La(this,t),n=e.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(i){n.handle=i},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(i){i.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return Da(t,[{key:"componentDidMount",value:function(){this.onMouseUpListener=os(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(i){this.setState({clickFocused:i})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var i,o,a=this.props,u=a.prefixCls,h=a.vertical,d=a.reverse,v=a.offset,x=a.style,S=a.disabled,A=a.min,L=a.max,q=a.value,R=a.tabIndex,D=a.ariaLabel,k=a.ariaLabelledBy,j=a.ariaValueTextFormatter,$=is(a,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),ee=(0,D4e.default)(this.props.className,ft({},"".concat(u,"-handle-click-focused"),this.state.clickFocused)),J=h?(i={},ft(i,d?"top":"bottom","".concat(v,"%")),ft(i,d?"bottom":"top","auto"),ft(i,"transform",d?null:"translateY(+50%)"),i):(o={},ft(o,d?"right":"left","".concat(v,"%")),ft(o,d?"left":"right","auto"),ft(o,"transform","translateX(".concat(d?"+":"-","50%)")),o),ie=yt(yt({},x),J),ue=R||0;(S||R===null)&&(ue=null);var le;return j&&(le=j(q)),fY.default.createElement("div",sn({ref:this.setHandleRef,tabIndex:ue},$,{className:ee,style:ie,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":A,"aria-valuemax":L,"aria-valuenow":q,"aria-disabled":!!S,"aria-label":D,"aria-labelledby":k,"aria-valuetext":le}))}}]),t}(fY.default.Component);var q4e=Me(mo());var Sr={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Sr.F1&&t<=Sr.F12)return!1;switch(t){case Sr.ALT:case Sr.CAPS_LOCK:case Sr.CONTEXT_MENU:case Sr.CTRL:case Sr.DOWN:case Sr.END:case Sr.ESC:case Sr.HOME:case Sr.INSERT:case Sr.LEFT:case Sr.MAC_FF_META:case Sr.META:case Sr.NUMLOCK:case Sr.NUM_CENTER:case Sr.PAGE_DOWN:case Sr.PAGE_UP:case Sr.PAUSE:case Sr.PRINT_SCREEN:case Sr.RIGHT:case Sr.SHIFT:case Sr.UP:case Sr.WIN_KEY:case Sr.WIN_KEY_RIGHT:return!1;default:return!0;}},isCharacterKey:function(e){if(e>=Sr.ZERO&&e<=Sr.NINE||e>=Sr.NUM_ZERO&&e<=Sr.NUM_MULTIPLY||e>=Sr.A&&e<=Sr.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Sr.SPACE:case Sr.QUESTION_MARK:case Sr.NUM_PLUS:case Sr.NUM_MINUS:case Sr.NUM_PERIOD:case Sr.NUM_DIVISION:case Sr.SEMICOLON:case Sr.DASH:case Sr.EQUALS:case Sr.COMMA:case Sr.PERIOD:case Sr.SLASH:case Sr.APOSTROPHE:case Sr.SINGLE_QUOTE:case Sr.OPEN_SQUARE_BRACKET:case Sr.BACKSLASH:case Sr.CLOSE_SQUARE_BRACKET:return!0;default:return!1;}}},wh=Sr;function BN(r,e){try{return Object.keys(e).some(function(t){return r.target===(0,q4e.findDOMNode)(e[t])})}catch(t){return!1}}function UN(r,e){var t=e.min,n=e.max;return r<t||r>n}function hY(r){return r.touches.length>1||r.type.toLowerCase()==="touchend"&&r.touches.length>0}function N4e(r,e){var t=e.marks,n=e.step,i=e.min,o=e.max,a=Object.keys(t).map(parseFloat);if(n!==null){var u=Math.pow(10,k4e(n)),h=Math.floor((o*u-i*u)/(n*u)),d=Math.min((r-i)/n,h),v=Math.round(d)*n+i;a.push(v)}var x=a.map(function(S){return Math.abs(r-S)});return a[x.indexOf(Math.min.apply(Math,vu(x)))]}function k4e(r){var e=r.toString(),t=0;return e.indexOf(".")>=0&&(t=e.length-e.indexOf(".")-1),t}function pY(r,e){return r?e.clientY:e.pageX}function dY(r,e){return r?e.touches[0].clientY:e.touches[0].pageX}function mY(r,e){var t=e.getBoundingClientRect();return r?t.top+t.height*.5:window.pageXOffset+t.left+t.width*.5}function hT(r,e){var t=e.max,n=e.min;return r<=n?n:r>=t?t:r}function VN(r,e){var t=e.step,n=isFinite(N4e(r,e))?N4e(r,e):0;return t===null?n:parseFloat(n.toFixed(k4e(t)))}function bh(r){r.stopPropagation(),r.preventDefault()}function pir(r,e,t){var n={increase:function(u,h){return u+h},decrease:function(u,h){return u-h}},i=n[r](Object.keys(t.marks).indexOf(JSON.stringify(e)),1),o=Object.keys(t.marks)[i];return t.step?n[r](e,t.step):Object.keys(t.marks).length&&t.marks[o]?t.marks[o]:e}function GN(r,e,t){var n="increase",i="decrease",o=n;switch(r.keyCode){case wh.UP:o=e&&t?i:n;break;case wh.RIGHT:o=!e&&t?i:n;break;case wh.DOWN:o=e&&t?n:i;break;case wh.LEFT:o=!e&&t?n:i;break;case wh.END:return function(a,u){return u.max};case wh.HOME:return function(a,u){return u.min};case wh.PAGE_UP:return function(a,u){return a+u.step*2};case wh.PAGE_DOWN:return function(a,u){return a-u.step*2};default:return;}return function(a,u){return pir(o,a,u)}}function ef(){}function pT(r){var e;return e=function(t){Na(i,t);var n=qa(i);function i(o){var a;La(this,i),a=n.call(this,o),a.onDown=function(x,S){var A=S,L=a.props,q=L.draggableTrack,R=L.vertical,D=a.state.bounds,k=q&&a.positionGetValue?a.positionGetValue(A)||[]:[],j=BN(x,a.handlesRefs);if(a.dragTrack=q&&D.length>=2&&!j&&!k.map(function(ee,J){var ie=J?!0:ee>=D[J];return J===k.length-1?ee<=D[J]:ie}).some(function(ee){return!ee}),a.dragTrack)a.dragOffset=A,a.startBounds=vu(D);else{if(!j)a.dragOffset=0;else{var $=mY(R,x.target);a.dragOffset=A-$,A=$}a.onStart(A)}},a.onMouseDown=function(x){if(x.button===0){a.removeDocumentEvents();var S=a.props.vertical,A=pY(S,x);a.onDown(x,A),a.addDocumentMouseEvents()}},a.onTouchStart=function(x){if(!hY(x)){var S=a.props.vertical,A=dY(S,x);a.onDown(x,A),a.addDocumentTouchEvents(),bh(x)}},a.onFocus=function(x){var S=a.props,A=S.onFocus,L=S.vertical;if(BN(x,a.handlesRefs)&&!a.dragTrack){var q=mY(L,x.target);a.dragOffset=0,a.onStart(q),bh(x),A&&A(x)}},a.onBlur=function(x){var S=a.props.onBlur;a.dragTrack||a.onEnd(),S&&S(x)},a.onMouseUp=function(){a.handlesRefs[a.prevMovedHandleIndex]&&a.handlesRefs[a.prevMovedHandleIndex].clickFocus()},a.onMouseMove=function(x){if(!a.sliderRef){a.onEnd();return}var S=pY(a.props.vertical,x);a.onMove(x,S-a.dragOffset,a.dragTrack,a.startBounds)},a.onTouchMove=function(x){if(hY(x)||!a.sliderRef){a.onEnd();return}var S=dY(a.props.vertical,x);a.onMove(x,S-a.dragOffset,a.dragTrack,a.startBounds)},a.onKeyDown=function(x){a.sliderRef&&BN(x,a.handlesRefs)&&a.onKeyboard(x)},a.onClickMarkLabel=function(x,S){x.stopPropagation(),a.onChange({value:S}),a.setState({value:S},function(){return a.onEnd(!0)})},a.saveSlider=function(x){a.sliderRef=x};var u=o.step,h=o.max,d=o.min,v=isFinite(h-d)?(h-d)%u===0:!0;return Qc(u&&Math.floor(u)===u?v:!0,"Slider[max] - Slider[min] (".concat(h-d,") should be a multiple of Slider[step] (").concat(u,")")),a.handlesRefs={},a}return Da(i,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var a=this.props,u=a.autoFocus,h=a.disabled;u&&!h&&this.focus()}},{key:"componentWillUnmount",value:function(){H0(rc(i.prototype),"componentWillUnmount",this)&&H0(rc(i.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var a=this.sliderRef,u=this.props,h=u.vertical,d=u.reverse,v=a.getBoundingClientRect();return h?d?v.bottom:v.top:window.pageXOffset+(d?v.right:v.left)}},{key:"getSliderLength",value:function(){var a=this.sliderRef;if(!a)return 0;var u=a.getBoundingClientRect();return this.props.vertical?u.height:u.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=os(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=os(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=os(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=os(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var a;this.props.disabled||(a=this.handlesRefs[0])===null||a===void 0||a.focus()}},{key:"blur",value:function(){var a=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(u){var h,d;(h=a.handlesRefs[u])===null||h===void 0||(d=h.blur)===null||d===void 0||d.call(h)})}},{key:"calcValue",value:function(a){var u=this.props,h=u.vertical,d=u.min,v=u.max,x=Math.abs(Math.max(a,0)/this.getSliderLength()),S=h?(1-x)*(v-d)+d:x*(v-d)+d;return S}},{key:"calcValueByPos",value:function(a){var u=this.props.reverse?-1:1,h=u*(a-this.getSliderStart()),d=this.trimAlignValue(this.calcValue(h));return d}},{key:"calcOffset",value:function(a){var u=this.props,h=u.min,d=u.max,v=(a-h)/(d-h);return Math.max(0,v*100)}},{key:"saveHandle",value:function(a,u){this.handlesRefs[a]=u}},{key:"render",value:function(){var a,u=this.props,h=u.prefixCls,d=u.className,v=u.marks,x=u.dots,S=u.step,A=u.included,L=u.disabled,q=u.vertical,R=u.reverse,D=u.min,k=u.max,j=u.children,$=u.maximumTrackStyle,ee=u.style,J=u.railStyle,ie=u.dotStyle,ue=u.activeDotStyle,le=H0(rc(i.prototype),"render",this).call(this),_e=le.tracks,Re=le.handles,ze=(0,F4e.default)(h,(a={},ft(a,"".concat(h,"-with-marks"),Object.keys(v).length),ft(a,"".concat(h,"-disabled"),L),ft(a,"".concat(h,"-vertical"),q),ft(a,d,d),a));return Z0.default.createElement("div",{ref:this.saveSlider,className:ze,onTouchStart:L?ef:this.onTouchStart,onMouseDown:L?ef:this.onMouseDown,onMouseUp:L?ef:this.onMouseUp,onKeyDown:L?ef:this.onKeyDown,onFocus:L?ef:this.onFocus,onBlur:L?ef:this.onBlur,style:ee},Z0.default.createElement("div",{className:"".concat(h,"-rail"),style:yt(yt({},$),J)}),_e,Z0.default.createElement(P4e,{prefixCls:h,vertical:q,reverse:R,marks:v,dots:x,step:S,included:A,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:k,min:D,dotStyle:ie,activeDotStyle:ue}),Re,Z0.default.createElement(L4e,{className:"".concat(h,"-mark"),onClickLabel:L?ef:this.onClickMarkLabel,vertical:q,marks:v,included:A,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:k,min:D,reverse:R}),j)}}]),i}(r),e.displayName="ComponentEnhancer(".concat(r.displayName,")"),e.defaultProps=yt(yt({},r.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var i=n.index,o=is(n,["index"]);return delete o.dragging,o.value===null?null:Z0.default.createElement(W0,sn({},o,{key:i}))},onBeforeChange:ef,onChange:ef,onAfterChange:ef,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),e}var dir=function(r){Na(t,r);var e=qa(t);function t(n){var i;La(this,t),i=e.call(this,n),i.positionGetValue=function(u){return[]},i.onEnd=function(u){var h=i.state.dragging;i.removeDocumentEvents(),(h||u)&&i.props.onAfterChange(i.getValue()),i.setState({dragging:!1})};var o=n.defaultValue!==void 0?n.defaultValue:n.min,a=n.value!==void 0?n.value:o;return i.state={value:i.trimAlignValue(a),dragging:!1},Qc(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),Qc(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),i}return Da(t,[{key:"calcValueByPos",value:function(i){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var a=this.props,u=a.min,h=a.max,d=a.value,v=a.onChange;if("min"in this.props||"max"in this.props){var x=d!==void 0?d:o.value,S=this.trimAlignValue(x,this.props);S!==o.value&&(this.setState({value:S}),!(u===i.min&&h===i.max)&&UN(x,this.props)&&v(S))}}},{key:"onChange",value:function(i){var o=this.props,a=!("value"in o),u=i.value>this.props.max?yt(yt({},i),{},{value:this.props.max}):i;a&&this.setState(u);var h=u.value;o.onChange(h)}},{key:"onStart",value:function(i){this.setState({dragging:!0});var o=this.props,a=this.getValue();o.onBeforeChange(a);var u=this.calcValueByPos(i);this.startValue=u,this.startPosition=i,u!==a&&(this.prevMovedHandleIndex=0,this.onChange({value:u}))}},{key:"onMove",value:function(i,o){bh(i);var a=this.state.value,u=this.calcValueByPos(o);u!==a&&this.onChange({value:u})}},{key:"onKeyboard",value:function(i){var o=this.props,a=o.reverse,u=o.vertical,h=GN(i,u,a);if(h){bh(i);var d=this.state,v=d.value,x=h(v,this.props),S=this.trimAlignValue(x);if(S===v)return;this.onChange({value:S}),this.props.onAfterChange(S),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var i=this.props.startPoint||this.props.min;return this.state.value>i?i:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i===null)return null;var a=yt(yt({},this.props),o),u=hT(i,a);return VN(u,a)}},{key:"render",value:function(){var i=this,o=this.props,a=o.prefixCls,u=o.vertical,h=o.included,d=o.disabled,v=o.minimumTrackStyle,x=o.trackStyle,S=o.handleStyle,A=o.tabIndex,L=o.ariaLabelForHandle,q=o.ariaLabelledByForHandle,R=o.ariaValueTextFormatterForHandle,D=o.min,k=o.max,j=o.startPoint,$=o.reverse,ee=o.handle,J=this.state,ie=J.value,ue=J.dragging,le=this.calcOffset(ie),_e=ee({className:"".concat(a,"-handle"),prefixCls:a,vertical:u,offset:le,value:ie,dragging:ue,disabled:d,min:D,max:k,reverse:$,index:0,tabIndex:A,ariaLabel:L,ariaLabelledBy:q,ariaValueTextFormatter:R,style:S[0]||S,ref:function(Ke){return i.saveHandle(0,Ke)}}),Re=j!==void 0?this.calcOffset(j):0,ze=x[0]||x,qe=gY.default.createElement(jN,{className:"".concat(a,"-track"),vertical:u,included:h,offset:Re,reverse:$,length:le-Re,style:yt(yt({},v),ze)});return{tracks:qe,handles:_e}}}]),t}(gY.default.Component),j4e=pT(dir);var yY=Me(ht()),_Y=Me(hi());var dT=function(e){var t=e.value,n=e.handle,i=e.bounds,o=e.props,a=o.allowCross,u=o.pushable,h=Number(u),d=hT(t,o),v=d;return!a&&n!=null&&i!==void 0&&(n>0&&d<=i[n-1]+h&&(v=i[n-1]+h),n<i.length-1&&d>=i[n+1]-h&&(v=i[n+1]-h)),VN(v,o)},xY=function(r){Na(t,r);var e=qa(t);function t(n){var i;La(this,t),i=e.call(this,n),i.positionGetValue=function(A){var L=i.getValue(),q=i.calcValueByPos(A),R=i.getClosestBound(q),D=i.getBoundNeedMoving(q,R),k=L[D];if(q===k)return null;var j=vu(L);return j[D]=q,j},i.onEnd=function(A){var L=i.state.handle;i.removeDocumentEvents(),L||(i.dragTrack=!1),(L!==null||A)&&i.props.onAfterChange(i.getValue()),i.setState({handle:null})};var o=n.count,a=n.min,u=n.max,h=Array.apply(void 0,vu(Array(o+1))).map(function(){return a}),d="defaultValue"in n?n.defaultValue:h,v=n.value!==void 0?n.value:d,x=v.map(function(A,L){return dT({value:A,handle:L,props:n})}),S=x[0]===u?0:x.length-1;return i.state={handle:null,recent:S,bounds:x},i}return Da(t,[{key:"calcValueByPos",value:function(i){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var a=this,u=this.props,h=u.onChange,d=u.value,v=u.min,x=u.max;if(("min"in this.props||"max"in this.props)&&!(v===i.min&&x===i.max)){var S=d||o.bounds;if(S.some(function(L){return UN(L,a.props)})){var A=S.map(function(L){return hT(L,a.props)});h(A)}}}},{key:"onChange",value:function(i){var o=this.props,a=!("value"in o);if(a)this.setState(i);else{var u={};["handle","recent"].forEach(function(v){i[v]!==void 0&&(u[v]=i[v])}),Object.keys(u).length&&this.setState(u)}var h=yt(yt({},this.state),i),d=h.bounds;o.onChange(d)}},{key:"onStart",value:function(i){var o=this.props,a=this.state,u=this.getValue();o.onBeforeChange(u);var h=this.calcValueByPos(i);this.startValue=h,this.startPosition=i;var d=this.getClosestBound(h);this.prevMovedHandleIndex=this.getBoundNeedMoving(h,d),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var v=u[this.prevMovedHandleIndex];if(h!==v){var x=vu(a.bounds);x[this.prevMovedHandleIndex]=h,this.onChange({bounds:x})}}},{key:"onMove",value:function(i,o,a,u){bh(i);var h=this.state,d=this.props,v=d.max||100,x=d.min||0;if(a){var S=d.vertical?-o:o;S=d.reverse?-S:S;var A=v-Math.max.apply(Math,vu(u)),L=x-Math.min.apply(Math,vu(u)),q=Math.min(Math.max(S/(this.getSliderLength()/(v-x)),L),A),R=u.map(function(j){return Math.floor(Math.max(Math.min(j+q,v),x))});h.bounds.map(function(j,$){return j===R[$]}).some(function(j){return!j})&&this.onChange({bounds:R});return}var D=this.calcValueByPos(o),k=h.bounds[h.handle];D!==k&&this.moveTo(D)}},{key:"onKeyboard",value:function(i){var o=this.props,a=o.reverse,u=o.vertical,h=GN(i,u,a);if(h){bh(i);var d=this.state,v=this.props,x=d.bounds,S=d.handle,A=x[S===null?d.recent:S],L=h(A,v),q=dT({value:L,handle:S,bounds:d.bounds,props:v});if(q===A)return;var R=!0;this.moveTo(q,R)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(i){for(var o=this.state.bounds,a=0,u=1;u<o.length-1;u+=1)i>=o[u]&&(a=u);return Math.abs(o[a+1]-i)<Math.abs(o[a]-i)&&(a+=1),a}},{key:"getBoundNeedMoving",value:function(i,o){var a=this.state,u=a.bounds,h=a.recent,d=o,v=u[o+1]===u[o];return v&&u[h]===u[o]&&(d=h),v&&i!==u[o+1]&&(d=i<u[o+1]?o:o+1),d}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var i=this.state.bounds;return i[i.length-1]}},{key:"getPoints",value:function(){var i=this.props,o=i.marks,a=i.step,u=i.min,h=i.max,d=this.internalPointsCache;if(!d||d.marks!==o||d.step!==a){var v=yt({},o);if(a!==null)for(var x=u;x<=h;x+=a)v[x]=x;var S=Object.keys(v).map(parseFloat);S.sort(function(A,L){return A-L}),this.internalPointsCache={marks:o,step:a,points:S}}return this.internalPointsCache.points}},{key:"moveTo",value:function(i,o){var a=this,u=this.state,h=this.props,d=vu(u.bounds),v=u.handle===null?u.recent:u.handle;d[v]=i;var x=v;h.pushable!==!1?this.pushSurroundingHandles(d,x):h.allowCross&&(d.sort(function(S,A){return S-A}),x=d.indexOf(i)),this.onChange({recent:x,handle:x,bounds:d}),o&&(this.props.onAfterChange(d),this.setState({},function(){a.handlesRefs[x].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(i,o){var a=i[o],u=this.props.pushable,h=Number(u),d=0;if(i[o+1]-a<h&&(d=1),a-i[o-1]<h&&(d=-1),d!==0){var v=o+d,x=d*(i[v]-a);this.pushHandle(i,v,d,h-x)||(i[o]=i[v]-d*h)}}},{key:"pushHandle",value:function(i,o,a,u){for(var h=i[o],d=i[o];a*(d-h)<u;){if(!this.pushHandleOnePoint(i,o,a))return i[o]=h,!1;d=i[o]}return!0}},{key:"pushHandleOnePoint",value:function(i,o,a){var u=this.getPoints(),h=u.indexOf(i[o]),d=h+a;if(d>=u.length||d<0)return!1;var v=o+a,x=u[d],S=this.props.pushable,A=Number(S),L=a*(i[v]-x);return this.pushHandle(i,v,a,A-L)?(i[o]=x,!0):!1}},{key:"trimAlignValue",value:function(i){var o=this.state,a=o.handle,u=o.bounds;return dT({value:i,handle:a,bounds:u,props:this.props})}},{key:"render",value:function(){var i=this,o=this.state,a=o.handle,u=o.bounds,h=this.props,d=h.prefixCls,v=h.vertical,x=h.included,S=h.disabled,A=h.min,L=h.max,q=h.reverse,R=h.handle,D=h.trackStyle,k=h.handleStyle,j=h.tabIndex,$=h.ariaLabelGroupForHandles,ee=h.ariaLabelledByGroupForHandles,J=h.ariaValueTextFormatterGroupForHandles,ie=u.map(function(Re){return i.calcOffset(Re)}),ue="".concat(d,"-handle"),le=u.map(function(Re,ze){var qe,Ve=j[ze]||0;(S||j[ze]===null)&&(Ve=null);var Ke=a===ze;return R({className:(0,_Y.default)((qe={},ft(qe,ue,!0),ft(qe,"".concat(ue,"-").concat(ze+1),!0),ft(qe,"".concat(ue,"-dragging"),Ke),qe)),prefixCls:d,vertical:v,dragging:Ke,offset:ie[ze],value:Re,index:ze,tabIndex:Ve,min:A,max:L,reverse:q,disabled:S,style:k[ze],ref:function(Se){return i.saveHandle(ze,Se)},ariaLabel:$[ze],ariaLabelledBy:ee[ze],ariaValueTextFormatter:J[ze]})}),_e=u.slice(0,-1).map(function(Re,ze){var qe,Ve=ze+1,Ke=(0,_Y.default)((qe={},ft(qe,"".concat(d,"-track"),!0),ft(qe,"".concat(d,"-track-").concat(Ve),!0),qe));return yY.default.createElement(jN,{className:Ke,vertical:v,reverse:q,included:x,offset:ie[Ve-1],length:ie[Ve]-ie[Ve-1],style:D[ze],key:Ve})});return{tracks:_e,handles:le}}}],[{key:"getDerivedStateFromProps",value:function(i,o){if(!("value"in i||"min"in i||"max"in i))return null;var a=i.value||o.bounds,u=a.map(function(h,d){return dT({value:h,handle:d,bounds:o.bounds,props:i})});if(o.bounds.length===u.length){if(u.every(function(h,d){return h===o.bounds[d]}))return null}else u=a.map(function(h,d){return dT({value:h,handle:d,props:i})});return yt(yt({},o),{},{bounds:u})}}]),t}(yY.default.Component);xY.displayName="Range";xY.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var z4e=pT(xY);var IT=Me(ht());var Th=Me(ht());var rK=Me(ht()),rx=Me(ht());var bl=Me(ht()),TUe=Me(mo());var U4e=function(e){return+setTimeout(e,16)},V4e=function(e){return clearTimeout(e)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(U4e=function(e){return window.requestAnimationFrame(e)},V4e=function(e){return window.cancelAnimationFrame(e)});var B4e=0,wY=new Map;function G4e(r){wY.delete(r)}var $4e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;B4e+=1;var n=B4e;function i(o){if(o===0)G4e(n),e();else{var a=U4e(function(){i(o-1)});wY.set(n,a)}}return i(t),n};$4e.cancel=function(r){var e=wY.get(r);return G4e(r),V4e(e)};var Vs=$4e;function Dv(r,e){if(!r)return!1;if(r.contains)return r.contains(e);for(var t=e;t;){if(t===r)return!0;t=t.parentNode}return!1}var W4e=Me(ht()),bY=Me(mo());function H4e(r){return r instanceof HTMLElement||r instanceof SVGElement}function mir(r){return r&&xn(r)==="object"&&H4e(r.nativeElement)?r.nativeElement:H4e(r)?r:null}function mT(r){var e=mir(r);if(e)return e;if(r instanceof W4e.default.Component){var t;return(t=bY.default.findDOMNode)===null||t===void 0?void 0:t.call(bY.default,r)}return null}var t2=Me(ht()),Nv=Me(X4e());var yir=Me(ht());var TY=function(e,t){typeof e=="function"?e(t):xn(e)==="object"&&e&&"current"in e&&(e.current=t)},Y0=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);return i.length<=1?i[0]:function(o){t.forEach(function(a){TY(a,o)})}};var vT=function(e){var t,n,i=(0,Nv.isMemo)(e)?e.type.type:e.type;return!(typeof i=="function"&&!((t=i.prototype)!==null&&t!==void 0&&t.render)&&i.$$typeof!==Nv.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==Nv.ForwardRef)};function J4e(r){return(0,t2.isValidElement)(r)&&!(0,Nv.isFragment)(r)}var d7r=Number(t2.version.split(".")[0])>=19?function(r){return J4e(r)?r.props.ref:null}:function(r){return J4e(r)?r.ref:null};var nc=Me(ht()),Q4e=Me(mo());function tf(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var _ir=(0,nc.forwardRef)(function(r,e){var t=r.didUpdate,n=r.getContainer,i=r.children,o=(0,nc.useRef)(),a=(0,nc.useRef)();(0,nc.useImperativeHandle)(e,function(){return{}});var u=(0,nc.useRef)(!1);return!u.current&&tf()&&(a.current=n(),o.current=a.current.parentNode,u.current=!0),(0,nc.useEffect)(function(){t==null||t(r)}),(0,nc.useEffect)(function(){return a.current.parentNode===null&&o.current!==null&&o.current.appendChild(a.current),function(){var h;(h=a.current)===null||h===void 0||(h=h.parentNode)===null||h===void 0||h.removeChild(a.current)}},[]),a.current?Q4e.default.createPortal(i,a.current):null}),eBe=_ir;var IUe=Me(hi());function xir(r,e,t){return t?r[0]===e[0]:r[0]===e[0]&&r[1]===e[1]}function tBe(r,e,t){var n=r[e]||{};return yt(yt({},n),t)}function rBe(r,e,t,n){for(var i=t.points,o=Object.keys(r),a=0;a<o.length;a+=1){var u=o[a];if(xir(r[u].points,i,n))return"".concat(e,"-placement-").concat(u)}return""}function IY(r){if(Array.isArray(r))return r}function nBe(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,a,u=[],h=!0,d=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(n=o.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(v){d=!0,i=v}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw i}}return u}}function AY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pn(r,e){return IY(r)||nBe(r,e)||fT(r,e)||AY()}var jv=Me(ht()),TT=Me(ht());var iBe=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var r=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r==null?void 0:r.substr(0,4))};var kY=Me(ht()),EBe=Me(hi());var bBe=Me(hi());var $s=Me(ht()),qY=Me(ht());var CY=Me(ht());var oBe=CY.createContext({});var aBe=Me(ht()),wir=function(r){Na(t,r);var e=qa(t);function t(){return La(this,t),e.apply(this,arguments)}return Da(t,[{key:"render",value:function(){return this.props.children}}]),t}(aBe.Component),sBe=wir;var r2=Me(ht());function zd(r){var e=r2.useRef();e.current=r;var t=r2.useCallback(function(){for(var n,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(o))},[]);return t}var K0=Me(ht());var lBe=tf()?K0.useLayoutEffect:K0.useEffect,bir=function(e,t){var n=K0.useRef(!0);lBe(function(){return e(n.current)},t),lBe(function(){return n.current=!1,function(){n.current=!0}},[])};var gT=bir;var X0=Me(ht());function Sh(r){var e=X0.useRef(!1),t=X0.useState(r),n=pn(t,2),i=n[0],o=n[1];X0.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function a(u,h){h&&e.current||o(u)}return[i,a]}var n2=Me(ht());function MY(r){var e=n2.useReducer(function(u){return u+1},0),t=pn(e,2),n=t[1],i=n2.useRef(r),o=zd(function(){return i.current}),a=zd(function(u){i.current=typeof u=="function"?u(i.current):u,n()});return[o,a]}var h2=Me(ht()),Ud=Me(ht());var rf="none",yT="appear",_T="enter",xT="leave",RY="none",Gs="prepare",Eh="start",Bd="active",i2="end",o2="prepared";var mBe=Me(ht()),vBe=Me(ht());function uBe(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(r)]="webkit".concat(e),t["Moz".concat(r)]="moz".concat(e),t["ms".concat(r)]="MS".concat(e),t["O".concat(r)]="o".concat(e.toLowerCase()),t}function Eir(r,e){var t={animationend:uBe("Animation","AnimationEnd"),transitionend:uBe("Transition","TransitionEnd")};return r&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var Tir=Eir(tf(),typeof window!="undefined"?window:{}),fBe={};tf()&&(cBe=document.createElement("div"),fBe=cBe.style);var cBe,a2={};function hBe(r){if(a2[r])return a2[r];var e=Tir[r];if(e)for(var t=Object.keys(e),n=t.length,i=0;i<n;i+=1){var o=t[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in fBe)return a2[r]=e[o],a2[r]}return""}var pBe=hBe("animationend"),dBe=hBe("transitionend"),s2=!!(pBe&&dBe),PY=pBe||"animationend",OY=dBe||"transitionend";function LY(r,e){if(!r)return null;if(xn(r)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return r[t]}return"".concat(r,"-").concat(e)}var gBe=function(r){var e=(0,vBe.useRef)();function t(i){i&&(i.removeEventListener(OY,r),i.removeEventListener(PY,r))}function n(i){e.current&&e.current!==i&&t(e.current),i&&i!==e.current&&(i.addEventListener(OY,r),i.addEventListener(PY,r),e.current=i)}return mBe.useEffect(function(){return function(){t(e.current)}},[]),[n,t]};var l2=Me(ht()),Iir=tf()?l2.useLayoutEffect:l2.useEffect,u2=Iir;var _Be=Me(ht());var c2=Me(ht()),yBe=function(){var r=c2.useRef(null);function e(){Vs.cancel(r.current)}function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=Vs(function(){i<=1?n({isCanceled:function(){return o!==r.current}}):t(n,i-1)});r.current=o}return c2.useEffect(function(){return function(){e()}},[]),[t,e]};var Air=[Gs,Eh,Bd,i2],Cir=[Gs,o2],DY=!1,xBe=!0;function f2(r){return r===Bd||r===i2}var wBe=function(r,e,t){var n=Sh(RY),i=pn(n,2),o=i[0],a=i[1],u=yBe(),h=pn(u,2),d=h[0],v=h[1];function x(){a(Gs,!0)}var S=e?Cir:Air;return u2(function(){if(o!==RY&&o!==i2){var A=S.indexOf(o),L=S[A+1],q=t(o);q===DY?a(L,!0):L&&d(function(R){function D(){R.isCanceled()||a(L,!0)}q===!0?D():Promise.resolve(q).then(D)})}},[r,o]),_Be.useEffect(function(){return function(){v()}},[]),[x,o]};function NY(r,e,t,n){var i=n.motionEnter,o=i===void 0?!0:i,a=n.motionAppear,u=a===void 0?!0:a,h=n.motionLeave,d=h===void 0?!0:h,v=n.motionDeadline,x=n.motionLeaveImmediately,S=n.onAppearPrepare,A=n.onEnterPrepare,L=n.onLeavePrepare,q=n.onAppearStart,R=n.onEnterStart,D=n.onLeaveStart,k=n.onAppearActive,j=n.onEnterActive,$=n.onLeaveActive,ee=n.onAppearEnd,J=n.onEnterEnd,ie=n.onLeaveEnd,ue=n.onVisibleChanged,le=Sh(),_e=pn(le,2),Re=_e[0],ze=_e[1],qe=MY(rf),Ve=pn(qe,2),Ke=Ve[0],Ce=Ve[1],Se=Sh(null),Ie=pn(Se,2),Ge=Ie[0],$e=Ie[1],Ze=Ke(),Pe=(0,Ud.useRef)(!1),at=(0,Ud.useRef)(null);function wt(){return t()}var Le=(0,Ud.useRef)(!1);function Ye(){Ce(rf),$e(null,!0)}var je=zd(function(Xt){var lr=Ke();if(lr!==rf){var Pr=wt();if(!(Xt&&!Xt.deadline&&Xt.target!==Pr)){var nn=Le.current,An;lr===yT&&nn?An=ee==null?void 0:ee(Pr,Xt):lr===_T&&nn?An=J==null?void 0:J(Pr,Xt):lr===xT&&nn&&(An=ie==null?void 0:ie(Pr,Xt)),nn&&An!==!1&&Ye()}}}),We=gBe(je),tt=pn(We,1),Qe=tt[0],kt=function(lr){switch(lr){case yT:return ft(ft(ft({},Gs,S),Eh,q),Bd,k);case _T:return ft(ft(ft({},Gs,A),Eh,R),Bd,j);case xT:return ft(ft(ft({},Gs,L),Eh,D),Bd,$);default:return{};}},Gt=h2.useMemo(function(){return kt(Ze)},[Ze]),bt=wBe(Ze,!r,function(Xt){if(Xt===Gs){var lr=Gt[Gs];return lr?lr(wt()):DY}if(Ut in Gt){var Pr;$e(((Pr=Gt[Ut])===null||Pr===void 0?void 0:Pr.call(Gt,wt(),null))||null)}return Ut===Bd&&Ze!==rf&&(Qe(wt()),v>0&&(clearTimeout(at.current),at.current=setTimeout(function(){je({deadline:!0})},v))),Ut===o2&&Ye(),xBe}),be=pn(bt,2),Yt=be[0],Ut=be[1],Vt=f2(Ut);Le.current=Vt,u2(function(){ze(e);var Xt=Pe.current;Pe.current=!0;var lr;!Xt&&e&&u&&(lr=yT),Xt&&e&&o&&(lr=_T),(Xt&&!e&&d||!Xt&&x&&!e&&d)&&(lr=xT);var Pr=kt(lr);lr&&(r||Pr[Gs])?(Ce(lr),Yt()):Ce(rf)},[e]),(0,Ud.useEffect)(function(){(Ze===yT&&!u||Ze===_T&&!o||Ze===xT&&!d)&&Ce(rf)},[u,o,d]),(0,Ud.useEffect)(function(){return function(){Pe.current=!1,clearTimeout(at.current)}},[]);var nr=h2.useRef(!1);(0,Ud.useEffect)(function(){Re&&(nr.current=!0),Re!==void 0&&Ze===rf&&((nr.current||Re)&&(ue==null||ue(Re)),nr.current=!0)},[Re,Ze]);var yr=Ge;return Gt[Gs]&&Ut===Eh&&(yr=yt({transition:"none"},yr)),[Ze,Ut,yr,Re!=null?Re:e]}function Mir(r){var e=r;xn(r)==="object"&&(e=r.transitionSupport);function t(i,o){return!!(i.motionName&&e&&o!==!1)}var n=$s.forwardRef(function(i,o){var a=i.visible,u=a===void 0?!0:a,h=i.removeOnLeave,d=h===void 0?!0:h,v=i.forceRender,x=i.children,S=i.motionName,A=i.leavedClassName,L=i.eventProps,q=$s.useContext(oBe),R=q.motion,D=t(i,R),k=(0,qY.useRef)(),j=(0,qY.useRef)();function $(){try{return k.current instanceof HTMLElement?k.current:mT(j.current)}catch(Ge){return null}}var ee=NY(D,u,$,i),J=pn(ee,4),ie=J[0],ue=J[1],le=J[2],_e=J[3],Re=$s.useRef(_e);_e&&(Re.current=!0);var ze=$s.useCallback(function(Ge){k.current=Ge,TY(o,Ge)},[o]),qe,Ve=yt(yt({},L),{},{visible:u});if(!x)qe=null;else if(ie===rf)_e?qe=x(yt({},Ve),ze):!d&&Re.current&&A?qe=x(yt(yt({},Ve),{},{className:A}),ze):v||!d&&!A?qe=x(yt(yt({},Ve),{},{style:{display:"none"}}),ze):qe=null;else{var Ke;ue===Gs?Ke="prepare":f2(ue)?Ke="active":ue===Eh&&(Ke="start");var Ce=LY(S,"".concat(ie,"-").concat(Ke));qe=x(yt(yt({},Ve),{},{className:(0,bBe.default)(LY(S,ie),ft(ft({},Ce,Ce&&Ke),S,typeof S=="string")),style:le}),ze)}if($s.isValidElement(qe)&&vT(qe)){var Se=qe,Ie=Se.ref;Ie||(qe=$s.cloneElement(qe,{ref:ze}))}return $s.createElement(sBe,{ref:j},qe)});return n.displayName="CSSMotion",n}var p2=Mir(s2);var qv=Me(ht());var d2="add",m2="keep",v2="remove",y2="removed";function Rir(r){var e;return r&&xn(r)==="object"&&"key"in r?e=r:e={key:r},yt(yt({},e),{},{key:String(e.key)})}function g2(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return r.map(Rir)}function SBe(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,i=e.length,o=g2(r),a=g2(e);o.forEach(function(d){for(var v=!1,x=n;x<i;x+=1){var S=a[x];if(S.key===d.key){n<x&&(t=t.concat(a.slice(n,x).map(function(A){return yt(yt({},A),{},{status:d2})})),n=x),t.push(yt(yt({},S),{},{status:m2})),n+=1,v=!0;break}}v||t.push(yt(yt({},d),{},{status:v2}))}),n<i&&(t=t.concat(a.slice(n).map(function(d){return yt(yt({},d),{},{status:d2})})));var u={};t.forEach(function(d){var v=d.key;u[v]=(u[v]||0)+1});var h=Object.keys(u).filter(function(d){return u[d]>1});return h.forEach(function(d){t=t.filter(function(v){var x=v.key,S=v.status;return x!==d||S!==v2}),t.forEach(function(v){v.key===d&&(v.status=m2)})}),t}var Pir=["component","children","onVisibleChanged","onAllRemoved"],Oir=["status"],Lir=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Dir(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p2,t=function(n){Na(o,n);var i=qa(o);function o(){var a;La(this,o);for(var u=arguments.length,h=new Array(u),d=0;d<u;d++)h[d]=arguments[d];return a=i.call.apply(i,[this].concat(h)),ft(Fr(a),"state",{keyEntities:[]}),ft(Fr(a),"removeKey",function(v){a.setState(function(x){var S=x.keyEntities.map(function(A){return A.key!==v?A:yt(yt({},A),{},{status:y2})});return{keyEntities:S}},function(){var x=a.state.keyEntities,S=x.filter(function(A){var L=A.status;return L!==y2}).length;S===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return Da(o,[{key:"render",value:function(){var u=this,h=this.state.keyEntities,d=this.props,v=d.component,x=d.children,S=d.onVisibleChanged,A=d.onAllRemoved,L=is(d,Pir),q=v||qv.Fragment,R={};return Lir.forEach(function(D){R[D]=L[D],delete L[D]}),delete L.keys,qv.createElement(q,L,h.map(function(D,k){var j=D.status,$=is(D,Oir),ee=j===d2||j===m2;return qv.createElement(e,sn({},R,{key:$.key,visible:ee,eventProps:$,onVisibleChanged:function(ie){S==null||S(ie,{key:$.key}),ie||u.removeKey($.key)}}),function(J,ie){return x(yt(yt({},J),{},{index:k}),ie)})}))}}],[{key:"getDerivedStateFromProps",value:function(u,h){var d=u.keys,v=h.keyEntities,x=g2(d),S=SBe(v,x);return{keyEntities:S.filter(function(A){var L=v.find(function(q){var R=q.key;return A.key===R});return!(L&&L.status===y2&&A.status===v2)})}}}]),o}(qv.Component);return ft(t,"defaultProps",{component:"div"}),t}var Nir=Dir(s2);var J0=p2;function _2(r){var e=r.prefixCls,t=r.motion,n=r.animation,i=r.transitionName;return t||(n?{motionName:"".concat(e,"-").concat(n)}:i?{motionName:i}:null)}function FY(r){var e=r.prefixCls,t=r.visible,n=r.zIndex,i=r.mask,o=r.maskMotion,a=r.maskAnimation,u=r.maskTransitionName;if(!i)return null;var h={};return(o||u||a)&&(h=yt({motionAppear:!0},_2({motion:o,prefixCls:e,transitionName:u,animation:a}))),kY.createElement(J0,sn({},h,{visible:t,removeOnLeave:!0}),function(d){var v=d.className;return kY.createElement("div",{style:{zIndex:n},className:(0,EBe.default)("".concat(e,"-mask"),v)})})}var wl=Me(ht()),Fv=Me(ht());function TBe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function IBe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TBe(Object(t),!0).forEach(function(n){qir(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):TBe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function VY(r){"@babel/helpers - typeof";return VY=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VY(r)}function qir(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var wT,kir={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function E2(){if(wT!==void 0)return wT;wT="";var r=document.createElement("p").style,e="Transform";for(var t in kir)t+e in r&&(wT=t);return wT}function jBe(){return E2()?"".concat(E2(),"TransitionProperty"):"transitionProperty"}function T2(){return E2()?"".concat(E2(),"Transform"):"transform"}function ABe(r,e){var t=jBe();t&&(r.style[t]=e,t!=="transitionProperty"&&(r.style.transitionProperty=e))}function jY(r,e){var t=T2();t&&(r.style[t]=e,t!=="transform"&&(r.style.transform=e))}function Fir(r){return r.style.transitionProperty||r.style[jBe()]}function jir(r){var e=window.getComputedStyle(r,null),t=e.getPropertyValue("transform")||e.getPropertyValue(T2());if(t&&t!=="none"){var n=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var zir=/matrix\((.*)\)/,Bir=/matrix3d\((.*)\)/;function Uir(r,e){var t=window.getComputedStyle(r,null),n=t.getPropertyValue("transform")||t.getPropertyValue(T2());if(n&&n!=="none"){var i,o=n.match(zir);if(o)o=o[1],i=o.split(",").map(function(u){return parseFloat(u,10)}),i[4]=e.x,i[5]=e.y,jY(r,"matrix(".concat(i.join(","),")"));else{var a=n.match(Bir)[1];i=a.split(",").map(function(u){return parseFloat(u,10)}),i[12]=e.x,i[13]=e.y,jY(r,"matrix3d(".concat(i.join(","),")"))}}else jY(r,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var Vir=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ET;function CBe(r){var e=r.style.display;r.style.display="none",r.offsetHeight,r.style.display=e}function Q0(r,e,t){var n=t;if(VY(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&Q0(r,i,e[i]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),r.style[e]=n;return}return ET(r,e)}function Gir(r){var e,t,n,i=r.ownerDocument,o=i.body,a=i&&i.documentElement;return e=r.getBoundingClientRect(),t=Math.floor(e.left),n=Math.floor(e.top),t-=a.clientLeft||o.clientLeft||0,n-=a.clientTop||o.clientTop||0,{left:t,top:n}}function zBe(r,e){var t=r["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var i=r.document;t=i.documentElement[n],typeof t!="number"&&(t=i.body[n])}return t}function BBe(r){return zBe(r)}function UBe(r){return zBe(r,!0)}function ST(r){var e=Gir(r),t=r.ownerDocument,n=t.defaultView||t.parentWindow;return e.left+=BBe(n),e.top+=UBe(n),e}function WY(r){return r!=null&&r==r.window}function VBe(r){return WY(r)?r.document:r.nodeType===9?r:r.ownerDocument}function $ir(r,e,t){var n=t,i="",o=VBe(r);return n=n||o.defaultView.getComputedStyle(r,null),n&&(i=n.getPropertyValue(e)||n[e]),i}var Hir=new RegExp("^(".concat(Vir,")(?!px)[a-z%]+$"),"i"),Wir=/^(top|right|bottom|left)$/,zY="currentStyle",BY="runtimeStyle",kv="left",Zir="px";function Yir(r,e){var t=r[zY]&&r[zY][e];if(Hir.test(t)&&!Wir.test(e)){var n=r.style,i=n[kv],o=r[BY][kv];r[BY][kv]=r[zY][kv],n[kv]=e==="fontSize"?"1em":t||0,t=n.pixelLeft+Zir,n[kv]=i,r[BY][kv]=o}return t===""?"auto":t}typeof window!="undefined"&&(ET=window.getComputedStyle?$ir:Yir);function x2(r,e){return r==="left"?e.useCssRight?"right":r:e.useCssBottom?"bottom":r}function MBe(r){if(r==="left")return"right";if(r==="right")return"left";if(r==="top")return"bottom";if(r==="bottom")return"top"}function RBe(r,e,t){Q0(r,"position")==="static"&&(r.style.position="relative");var n=-999,i=-999,o=x2("left",t),a=x2("top",t),u=MBe(o),h=MBe(a);o!=="left"&&(n=999),a!=="top"&&(i=999);var d="",v=ST(r);("left"in e||"top"in e)&&(d=Fir(r)||"",ABe(r,"none")),"left"in e&&(r.style[u]="",r.style[o]="".concat(n,"px")),"top"in e&&(r.style[h]="",r.style[a]="".concat(i,"px")),CBe(r);var x=ST(r),S={};for(var A in e)if(e.hasOwnProperty(A)){var L=x2(A,t),q=A==="left"?n:i,R=v[A]-x[A];L===A?S[L]=q+R:S[L]=q-R}Q0(r,S),CBe(r),("left"in e||"top"in e)&&ABe(r,d);var D={};for(var k in e)if(e.hasOwnProperty(k)){var j=x2(k,t),$=e[k]-v[k];k===j?D[j]=S[j]+$:D[j]=S[j]-$}Q0(r,D)}function Kir(r,e){var t=ST(r),n=jir(r),i={x:n.x,y:n.y};"left"in e&&(i.x=n.x+e.left-t.left),"top"in e&&(i.y=n.y+e.top-t.top),Uir(r,i)}function Xir(r,e,t){if(t.ignoreShake){var n=ST(r),i=n.left.toFixed(0),o=n.top.toFixed(0),a=e.left.toFixed(0),u=e.top.toFixed(0);if(i===a&&o===u)return}t.useCssRight||t.useCssBottom?RBe(r,e,t):t.useCssTransform&&T2()in document.body.style?Kir(r,e):RBe(r,e,t)}function ZY(r,e){for(var t=0;t<r.length;t++)e(r[t])}function GBe(r){return ET(r,"boxSizing")==="border-box"}var Jir=["margin","border","padding"],GY=-1,Qir=2,$Y=1,eor=0;function tor(r,e,t){var n={},i=r.style,o;for(o in e)e.hasOwnProperty(o)&&(n[o]=i[o],i[o]=e[o]);t.call(r);for(o in e)e.hasOwnProperty(o)&&(i[o]=n[o])}function bT(r,e,t){var n=0,i,o,a;for(o=0;o<e.length;o++)if(i=e[o],i)for(a=0;a<t.length;a++){var u=void 0;i==="border"?u="".concat(i).concat(t[a],"Width"):u=i+t[a],n+=parseFloat(ET(r,u))||0}return n}var nf={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};ZY(["Width","Height"],function(r){nf["doc".concat(r)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(r)],t.body["scroll".concat(r)],nf["viewport".concat(r)](t))},nf["viewport".concat(r)]=function(e){var t="client".concat(r),n=e.document,i=n.body,o=n.documentElement,a=o[t];return n.compatMode==="CSS1Compat"&&a||i&&i[t]||a}});function PBe(r,e,t){var n=t;if(WY(r))return e==="width"?nf.viewportWidth(r):nf.viewportHeight(r);if(r.nodeType===9)return e==="width"?nf.docWidth(r):nf.docHeight(r);var i=e==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(e==="width"?r.getBoundingClientRect().width:r.getBoundingClientRect().height),a=GBe(r),u=0;(o==null||o<=0)&&(o=void 0,u=ET(r,e),(u==null||Number(u)<0)&&(u=r.style[e]||0),u=Math.floor(parseFloat(u))||0),n===void 0&&(n=a?$Y:GY);var h=o!==void 0||a,d=o||u;return n===GY?h?d-bT(r,["border","padding"],i):u:h?n===$Y?d:d+(n===Qir?-bT(r,["border"],i):bT(r,["margin"],i)):u+bT(r,Jir.slice(n),i)}var ror={position:"absolute",visibility:"hidden",display:"block"};function OBe(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n,i=e[0];return i.offsetWidth!==0?n=PBe.apply(void 0,e):tor(i,ror,function(){n=PBe.apply(void 0,e)}),n}ZY(["width","height"],function(r){var e=r.charAt(0).toUpperCase()+r.slice(1);nf["outer".concat(e)]=function(n,i){return n&&OBe(n,r,i?eor:$Y)};var t=r==="width"?["Left","Right"]:["Top","Bottom"];nf[r]=function(n,i){var o=i;if(o!==void 0){if(n){var a=GBe(n);return a&&(o+=bT(n,["padding","border"],t)),Q0(n,r,o)}return}return n&&OBe(n,r,GY)}});function $Be(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}var Dr={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:VBe,offset:function(e,t,n){if(typeof t!="undefined")Xir(e,t,n||{});else return ST(e)},isWindow:WY,each:ZY,css:Q0,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var i=e.overflow;if(i)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:$Be,getWindowScrollLeft:function(e){return BBe(e)},getWindowScrollTop:function(e){return UBe(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)Dr.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};$Be(Dr,nf);var UY=Dr.getParent;function HY(r){if(Dr.isWindow(r)||r.nodeType===9)return null;var e=Dr.getDocument(r),t=e.body,n,i=Dr.css(r,"position"),o=i==="fixed"||i==="absolute";if(!o)return r.nodeName.toLowerCase()==="html"?null:UY(r);for(n=UY(r);n&&n!==t&&n.nodeType!==9;n=UY(n))if(i=Dr.css(n,"position"),i!=="static")return n;return null}var LBe=Dr.getParent;function nor(r){if(Dr.isWindow(r)||r.nodeType===9)return!1;var e=Dr.getDocument(r),t=e.body,n=null;for(n=LBe(r);n&&n!==t&&n!==e;n=LBe(n)){var i=Dr.css(n,"position");if(i==="fixed")return!0}return!1}function YY(r,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=HY(r),i=Dr.getDocument(r),o=i.defaultView||i.parentWindow,a=i.body,u=i.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==a&&n!==u&&Dr.css(n,"overflow")!=="visible"){var h=Dr.offset(n);h.left+=n.clientLeft,h.top+=n.clientTop,t.top=Math.max(t.top,h.top),t.right=Math.min(t.right,h.left+n.clientWidth),t.bottom=Math.min(t.bottom,h.top+n.clientHeight),t.left=Math.max(t.left,h.left)}else if(n===a||n===u)break;n=HY(n)}var d=null;if(!Dr.isWindow(r)&&r.nodeType!==9){d=r.style.position;var v=Dr.css(r,"position");v==="absolute"&&(r.style.position="fixed")}var x=Dr.getWindowScrollLeft(o),S=Dr.getWindowScrollTop(o),A=Dr.viewportWidth(o),L=Dr.viewportHeight(o),q=u.scrollWidth,R=u.scrollHeight,D=window.getComputedStyle(a);if(D.overflowX==="hidden"&&(q=o.innerWidth),D.overflowY==="hidden"&&(R=o.innerHeight),r.style&&(r.style.position=d),e||nor(r))t.left=Math.max(t.left,x),t.top=Math.max(t.top,S),t.right=Math.min(t.right,x+A),t.bottom=Math.min(t.bottom,S+L);else{var k=Math.max(q,x+A);t.right=Math.min(t.right,k);var j=Math.max(R,S+L);t.bottom=Math.min(t.bottom,j)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function ior(r,e,t,n){var i=Dr.clone(r),o={width:e.width,height:e.height};return n.adjustX&&i.left<t.left&&(i.left=t.left),n.resizeWidth&&i.left>=t.left&&i.left+o.width>t.right&&(o.width-=i.left+o.width-t.right),n.adjustX&&i.left+o.width>t.right&&(i.left=Math.max(t.right-o.width,t.left)),n.adjustY&&i.top<t.top&&(i.top=t.top),n.resizeHeight&&i.top>=t.top&&i.top+o.height>t.bottom&&(o.height-=i.top+o.height-t.bottom),n.adjustY&&i.top+o.height>t.bottom&&(i.top=Math.max(t.bottom-o.height,t.top)),Dr.mix(i,o)}function KY(r){var e,t,n;if(!Dr.isWindow(r)&&r.nodeType!==9)e=Dr.offset(r),t=Dr.outerWidth(r),n=Dr.outerHeight(r);else{var i=Dr.getWindow(r);e={left:Dr.getWindowScrollLeft(i),top:Dr.getWindowScrollTop(i)},t=Dr.viewportWidth(i),n=Dr.viewportHeight(i)}return e.width=t,e.height=n,e}function DBe(r,e){var t=e.charAt(0),n=e.charAt(1),i=r.width,o=r.height,a=r.left,u=r.top;return t==="c"?u+=o/2:t==="b"&&(u+=o),n==="c"?a+=i/2:n==="r"&&(a+=i),{left:a,top:u}}function w2(r,e,t,n,i){var o=DBe(e,t[1]),a=DBe(r,t[0]),u=[a.left-o.left,a.top-o.top];return{left:Math.round(r.left-u[0]+n[0]-i[0]),top:Math.round(r.top-u[1]+n[1]-i[1])}}function NBe(r,e,t){return r.left<t.left||r.left+e.width>t.right}function qBe(r,e,t){return r.top<t.top||r.top+e.height>t.bottom}function oor(r,e,t){return r.left>t.right||r.left+e.width<t.left}function aor(r,e,t){return r.top>t.bottom||r.top+e.height<t.top}function b2(r,e,t){var n=[];return Dr.each(r,function(i){n.push(i.replace(e,function(o){return t[o]}))}),n}function S2(r,e){return r[e]=-r[e],r}function kBe(r,e){var t;return /%$/.test(r)?t=parseInt(r.substring(0,r.length-1),10)/100*e:t=parseInt(r,10),t||0}function FBe(r,e){r[0]=kBe(r[0],e.width),r[1]=kBe(r[1],e.height)}function HBe(r,e,t,n){var i=t.points,o=t.offset||[0,0],a=t.targetOffset||[0,0],u=t.overflow,h=t.source||r;o=[].concat(o),a=[].concat(a),u=u||{};var d={},v=0,x=!!(u&&u.alwaysByViewport),S=YY(h,x),A=KY(h);FBe(o,A),FBe(a,e);var L=w2(A,e,i,o,a),q=Dr.merge(A,L);if(S&&(u.adjustX||u.adjustY)&&n){if(u.adjustX&&NBe(L,A,S)){var R=b2(i,/[lr]/gi,{l:"r",r:"l"}),D=S2(o,0),k=S2(a,0),j=w2(A,e,R,D,k);oor(j,A,S)||(v=1,i=R,o=D,a=k)}if(u.adjustY&&qBe(L,A,S)){var $=b2(i,/[tb]/gi,{t:"b",b:"t"}),ee=S2(o,1),J=S2(a,1),ie=w2(A,e,$,ee,J);aor(ie,A,S)||(v=1,i=$,o=ee,a=J)}v&&(L=w2(A,e,i,o,a),Dr.mix(q,L));var ue=NBe(L,A,S),le=qBe(L,A,S);if(ue||le){var _e=i;ue&&(_e=b2(i,/[lr]/gi,{l:"r",r:"l"})),le&&(_e=b2(i,/[tb]/gi,{t:"b",b:"t"})),i=_e,o=t.offset||[0,0],a=t.targetOffset||[0,0]}d.adjustX=u.adjustX&&ue,d.adjustY=u.adjustY&&le,(d.adjustX||d.adjustY)&&(q=ior(L,A,S,d))}return q.width!==A.width&&Dr.css(h,"width",Dr.width(h)+q.width-A.width),q.height!==A.height&&Dr.css(h,"height",Dr.height(h)+q.height-A.height),Dr.offset(h,{left:q.left,top:q.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:d}}function sor(r,e){var t=YY(r,e),n=KY(r);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}function I2(r,e,t){var n=t.target||e,i=KY(n),o=!sor(n,t.overflow&&t.overflow.alwaysByViewport);return HBe(r,i,t,o)}I2.__getOffsetParent=HY;I2.__getVisibleRectForElement=YY;function WBe(r,e,t){var n,i,o=Dr.getDocument(r),a=o.defaultView||o.parentWindow,u=Dr.getWindowScrollLeft(a),h=Dr.getWindowScrollTop(a),d=Dr.viewportWidth(a),v=Dr.viewportHeight(a);"pageX"in e?n=e.pageX:n=u+e.clientX,"pageY"in e?i=e.pageY:i=h+e.clientY;var x={left:n,top:i,width:0,height:0},S=n>=0&&n<=u+d&&i>=0&&i<=h+v,A=[t.points[0],"cc"];return HBe(r,x,IBe(IBe({},t),{},{points:A}),S)}function lor(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function i(o,a){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=n.has(o);if(Qc(!h,"Warning: There may be circular references"),h)return!1;if(o===a)return!0;if(t&&u>1)return!1;n.add(o);var d=u+1;if(Array.isArray(o)){if(!Array.isArray(a)||o.length!==a.length)return!1;for(var v=0;v<o.length;v++)if(!i(o[v],a[v],d))return!1;return!0}if(o&&a&&xn(o)==="object"&&xn(a)==="object"){var x=Object.keys(o);return x.length!==Object.keys(a).length?!1:x.every(function(S){return i(o[S],a[S],d)})}return!1}return i(r,e)}var ZBe=lor;var YBe=function(r){if(!r)return!1;if(r instanceof Element){if(r.offsetParent)return!0;if(r.getBBox){var e=r.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(r.getBoundingClientRect){var i=r.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1};var oa=Me(ht());var XY=Me(ht()),KBe=function(r,e){var t=XY.default.useRef(!1),n=XY.default.useRef(null);function i(){window.clearTimeout(n.current)}function o(a){if(i(),!t.current||a===!0){if(r(a)===!1)return;t.current=!0,n.current=window.setTimeout(function(){t.current=!1},e)}else n.current=window.setTimeout(function(){t.current=!1,o()},e)}return[o,function(){t.current=!1,i()}]};var JBe=function(){if(typeof Map!="undefined")return Map;function r(e,t){var n=-1;return e.some(function(i,o){return i[0]===t?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=r(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(t,n){var i=r(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,i=r(n,t);~i&&n.splice(i,1)},e.prototype.has=function(t){return!!~r(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];t.call(n,a[1],a[0])}},e}()}(),JY=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,A2=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),uor=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(A2):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),cor=2;function hor(r,e){var t=!1,n=!1,i=0;function o(){t&&(t=!1,r()),n&&u()}function a(){uor(o)}function u(){var h=Date.now();if(t){if(h-i<cor)return;n=!0}else t=!0,n=!1,setTimeout(a,e);i=h}return u}var por=20,dor=["top","right","bottom","left","width","height","size","weight"],mor=typeof MutationObserver!="undefined",vor=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=hor(this.refresh.bind(this),por)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!JY||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mor?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!JY||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,i=dor.some(function(o){return!!~n.indexOf(o)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),QBe=function(r,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];Object.defineProperty(r,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return r},ex=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||A2},eUe=M2(0,0,0,0);function C2(r){return parseFloat(r)||0}function XBe(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,i){var o=r["border-"+i+"-width"];return n+C2(o)},0)}function gor(r){for(var e=["top","right","bottom","left"],t={},n=0,i=e;n<i.length;n++){var o=i[n],a=r["padding-"+o];t[o]=C2(a)}return t}function yor(r){var e=r.getBBox();return M2(0,0,e.width,e.height)}function _or(r){var e=r.clientWidth,t=r.clientHeight;if(!e&&!t)return eUe;var n=ex(r).getComputedStyle(r),i=gor(n),o=i.left+i.right,a=i.top+i.bottom,u=C2(n.width),h=C2(n.height);if(n.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=XBe(n,"left","right")+o),Math.round(h+a)!==t&&(h-=XBe(n,"top","bottom")+a)),!wor(r)){var d=Math.round(u+o)-e,v=Math.round(h+a)-t;Math.abs(d)!==1&&(u-=d),Math.abs(v)!==1&&(h-=v)}return M2(i.left,i.top,u,h)}var xor=function(){return typeof SVGGraphicsElement!="undefined"?function(r){return r instanceof ex(r).SVGGraphicsElement}:function(r){return r instanceof ex(r).SVGElement&&typeof r.getBBox=="function"}}();function wor(r){return r===ex(r).document.documentElement}function bor(r){return JY?xor(r)?yor(r):_or(r):eUe}function Sor(r){var e=r.x,t=r.y,n=r.width,i=r.height,o=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(o.prototype);return QBe(a,{x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:i+t,left:e}),a}function M2(r,e,t,n){return{x:r,y:e,width:t,height:n}}var Eor=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=M2(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=bor(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),Tor=function(){function r(e,t){var n=Sor(t);QBe(this,{target:e,contentRect:n})}return r}(),Ior=function(){function r(e,t,n){if(this.activeObservations_=[],this.observations_=new JBe,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof ex(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var t=this.observations_;t.has(e)||(t.set(e,new Eor(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof ex(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new Tor(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),tUe=typeof WeakMap!="undefined"?new WeakMap:new JBe,rUe=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=vor.getInstance(),n=new Ior(e,t,this);tUe.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){rUe.prototype[r]=function(){var e;return(e=tUe.get(this))[r].apply(e,arguments)}});var Aor=function(){return typeof A2.ResizeObserver!="undefined"?A2.ResizeObserver:rUe}(),nUe=Aor;function iUe(r,e){return r===e?!0:!r||!e?!1:"pageX"in e&&"pageY"in e?r.pageX===e.pageX&&r.pageY===e.pageY:"clientX"in e&&"clientY"in e?r.clientX===e.clientX&&r.clientY===e.clientY:!1}function oUe(r,e){r!==document.activeElement&&Dv(e,r)&&typeof r.focus=="function"&&r.focus()}function QY(r,e){var t=null,n=null;function i(a){var u=pn(a,1),h=u[0].target;if(document.documentElement.contains(h)){var d=h.getBoundingClientRect(),v=d.width,x=d.height,S=Math.floor(v),A=Math.floor(x);(t!==S||n!==A)&&Promise.resolve().then(function(){e({width:S,height:A})}),t=S,n=A}}var o=new nUe(i);return r&&o.observe(r),function(){o.disconnect()}}function aUe(r){return typeof r!="function"?null:r()}function sUe(r){return xn(r)!=="object"||!r?null:r}var Cor=function(e,t){var n=e.children,i=e.disabled,o=e.target,a=e.align,u=e.onAlign,h=e.monitorWindowResize,d=e.monitorBufferTime,v=d===void 0?0:d,x=oa.default.useRef({}),S=oa.default.useRef(),A=oa.default.Children.only(n),L=oa.default.useRef({});L.current.disabled=i,L.current.target=o,L.current.align=a,L.current.onAlign=u;var q=KBe(function(){var Re=L.current,ze=Re.disabled,qe=Re.target,Ve=Re.align,Ke=Re.onAlign,Ce=S.current;if(!ze&&qe&&Ce){var Se,Ie=aUe(qe),Ge=sUe(qe);x.current.element=Ie,x.current.point=Ge,x.current.align=Ve;var $e=document,Ze=$e.activeElement;return Ie&&YBe(Ie)?Se=I2(Ce,Ie,Ve):Ge&&(Se=WBe(Ce,Ge,Ve)),oUe(Ze,Ce),Ke&&Se&&Ke(Ce,Se),!0}return!1},v),R=pn(q,2),D=R[0],k=R[1],j=oa.default.useState(),$=pn(j,2),ee=$[0],J=$[1],ie=oa.default.useState(),ue=pn(ie,2),le=ue[0],_e=ue[1];return gT(function(){J(aUe(o)),_e(sUe(o))}),oa.default.useEffect(function(){(x.current.element!==ee||!iUe(x.current.point,le)||!ZBe(x.current.align,a))&&D()}),oa.default.useEffect(function(){var Re=QY(S.current,D);return Re},[S.current]),oa.default.useEffect(function(){var Re=QY(ee,D);return Re},[ee]),oa.default.useEffect(function(){i?k():D()},[i]),oa.default.useEffect(function(){if(h){var Re=os(window,"resize",D);return Re.remove}},[h]),oa.default.useEffect(function(){return function(){k()}},[]),oa.default.useImperativeHandle(t,function(){return{forceAlign:function(){return D(!0)}}}),oa.default.isValidElement(A)&&(A=oa.default.cloneElement(A,{ref:Y0(A.ref,S)})),A},lUe=oa.default.forwardRef(Cor);lUe.displayName="Align";var uUe=lUe;var cUe=uUe;var vUe=Me(hi());function R2(){"use strict";R2=function(){return e};var r,e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(Ce,Se,Ie){Ce[Se]=Ie.value},o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function d(Ce,Se,Ie){return Object.defineProperty(Ce,Se,{value:Ie,enumerable:!0,configurable:!0,writable:!0}),Ce[Se]}try{d({},"")}catch(Ce){d=function(Ie,Ge,$e){return Ie[Ge]=$e}}function v(Ce,Se,Ie,Ge){var $e=Se&&Se.prototype instanceof D?Se:D,Ze=Object.create($e.prototype),Pe=new Ve(Ge||[]);return i(Ze,"_invoke",{value:_e(Ce,Ie,Pe)}),Ze}function x(Ce,Se,Ie){try{return{type:"normal",arg:Ce.call(Se,Ie)}}catch(Ge){return{type:"throw",arg:Ge}}}e.wrap=v;var S="suspendedStart",A="suspendedYield",L="executing",q="completed",R={};function D(){}function k(){}function j(){}var $={};d($,a,function(){return this});var ee=Object.getPrototypeOf,J=ee&&ee(ee(Ke([])));J&&J!==t&&n.call(J,a)&&($=J);var ie=j.prototype=D.prototype=Object.create($);function ue(Ce){["next","throw","return"].forEach(function(Se){d(Ce,Se,function(Ie){return this._invoke(Se,Ie)})})}function le(Ce,Se){function Ie($e,Ze,Pe,at){var wt=x(Ce[$e],Ce,Ze);if(wt.type!=="throw"){var Le=wt.arg,Ye=Le.value;return Ye&&xn(Ye)=="object"&&n.call(Ye,"__await")?Se.resolve(Ye.__await).then(function(je){Ie("next",je,Pe,at)},function(je){Ie("throw",je,Pe,at)}):Se.resolve(Ye).then(function(je){Le.value=je,Pe(Le)},function(je){return Ie("throw",je,Pe,at)})}at(wt.arg)}var Ge;i(this,"_invoke",{value:function(Ze,Pe){function at(){return new Se(function(wt,Le){Ie(Ze,Pe,wt,Le)})}return Ge=Ge?Ge.then(at,at):at()}})}function _e(Ce,Se,Ie){var Ge=S;return function($e,Ze){if(Ge===L)throw Error("Generator is already running");if(Ge===q){if($e==="throw")throw Ze;return{value:r,done:!0}}for(Ie.method=$e,Ie.arg=Ze;;){var Pe=Ie.delegate;if(Pe){var at=Re(Pe,Ie);if(at){if(at===R)continue;return at}}if(Ie.method==="next")Ie.sent=Ie._sent=Ie.arg;else if(Ie.method==="throw"){if(Ge===S)throw Ge=q,Ie.arg;Ie.dispatchException(Ie.arg)}else Ie.method==="return"&&Ie.abrupt("return",Ie.arg);Ge=L;var wt=x(Ce,Se,Ie);if(wt.type==="normal"){if(Ge=Ie.done?q:A,wt.arg===R)continue;return{value:wt.arg,done:Ie.done}}wt.type==="throw"&&(Ge=q,Ie.method="throw",Ie.arg=wt.arg)}}}function Re(Ce,Se){var Ie=Se.method,Ge=Ce.iterator[Ie];if(Ge===r)return Se.delegate=null,Ie==="throw"&&Ce.iterator.return&&(Se.method="return",Se.arg=r,Re(Ce,Se),Se.method==="throw")||Ie!=="return"&&(Se.method="throw",Se.arg=new TypeError("The iterator does not provide a '"+Ie+"' method")),R;var $e=x(Ge,Ce.iterator,Se.arg);if($e.type==="throw")return Se.method="throw",Se.arg=$e.arg,Se.delegate=null,R;var Ze=$e.arg;return Ze?Ze.done?(Se[Ce.resultName]=Ze.value,Se.next=Ce.nextLoc,Se.method!=="return"&&(Se.method="next",Se.arg=r),Se.delegate=null,R):Ze:(Se.method="throw",Se.arg=new TypeError("iterator result is not an object"),Se.delegate=null,R)}function ze(Ce){var Se={tryLoc:Ce[0]};1 in Ce&&(Se.catchLoc=Ce[1]),2 in Ce&&(Se.finallyLoc=Ce[2],Se.afterLoc=Ce[3]),this.tryEntries.push(Se)}function qe(Ce){var Se=Ce.completion||{};Se.type="normal",delete Se.arg,Ce.completion=Se}function Ve(Ce){this.tryEntries=[{tryLoc:"root"}],Ce.forEach(ze,this),this.reset(!0)}function Ke(Ce){if(Ce||Ce===""){var Se=Ce[a];if(Se)return Se.call(Ce);if(typeof Ce.next=="function")return Ce;if(!isNaN(Ce.length)){var Ie=-1,Ge=function $e(){for(;++Ie<Ce.length;)if(n.call(Ce,Ie))return $e.value=Ce[Ie],$e.done=!1,$e;return $e.value=r,$e.done=!0,$e};return Ge.next=Ge}}throw new TypeError(xn(Ce)+" is not iterable")}return k.prototype=j,i(ie,"constructor",{value:j,configurable:!0}),i(j,"constructor",{value:k,configurable:!0}),k.displayName=d(j,h,"GeneratorFunction"),e.isGeneratorFunction=function(Ce){var Se=typeof Ce=="function"&&Ce.constructor;return!!Se&&(Se===k||(Se.displayName||Se.name)==="GeneratorFunction")},e.mark=function(Ce){return Object.setPrototypeOf?Object.setPrototypeOf(Ce,j):(Ce.__proto__=j,d(Ce,h,"GeneratorFunction")),Ce.prototype=Object.create(ie),Ce},e.awrap=function(Ce){return{__await:Ce}},ue(le.prototype),d(le.prototype,u,function(){return this}),e.AsyncIterator=le,e.async=function(Ce,Se,Ie,Ge,$e){$e===void 0&&($e=Promise);var Ze=new le(v(Ce,Se,Ie,Ge),$e);return e.isGeneratorFunction(Se)?Ze:Ze.next().then(function(Pe){return Pe.done?Pe.value:Ze.next()})},ue(ie),d(ie,h,"Generator"),d(ie,a,function(){return this}),d(ie,"toString",function(){return"[object Generator]"}),e.keys=function(Ce){var Se=Object(Ce),Ie=[];for(var Ge in Se)Ie.push(Ge);return Ie.reverse(),function $e(){for(;Ie.length;){var Ze=Ie.pop();if(Ze in Se)return $e.value=Ze,$e.done=!1,$e}return $e.done=!0,$e}},e.values=Ke,Ve.prototype={constructor:Ve,reset:function(Se){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(qe),!Se)for(var Ie in this)Ie.charAt(0)==="t"&&n.call(this,Ie)&&!isNaN(+Ie.slice(1))&&(this[Ie]=r)},stop:function(){this.done=!0;var Se=this.tryEntries[0].completion;if(Se.type==="throw")throw Se.arg;return this.rval},dispatchException:function(Se){if(this.done)throw Se;var Ie=this;function Ge(Le,Ye){return Pe.type="throw",Pe.arg=Se,Ie.next=Le,Ye&&(Ie.method="next",Ie.arg=r),!!Ye}for(var $e=this.tryEntries.length-1;$e>=0;--$e){var Ze=this.tryEntries[$e],Pe=Ze.completion;if(Ze.tryLoc==="root")return Ge("end");if(Ze.tryLoc<=this.prev){var at=n.call(Ze,"catchLoc"),wt=n.call(Ze,"finallyLoc");if(at&&wt){if(this.prev<Ze.catchLoc)return Ge(Ze.catchLoc,!0);if(this.prev<Ze.finallyLoc)return Ge(Ze.finallyLoc)}else if(at){if(this.prev<Ze.catchLoc)return Ge(Ze.catchLoc,!0)}else{if(!wt)throw Error("try statement without catch or finally");if(this.prev<Ze.finallyLoc)return Ge(Ze.finallyLoc)}}}},abrupt:function(Se,Ie){for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var $e=this.tryEntries[Ge];if($e.tryLoc<=this.prev&&n.call($e,"finallyLoc")&&this.prev<$e.finallyLoc){var Ze=$e;break}}Ze&&(Se==="break"||Se==="continue")&&Ze.tryLoc<=Ie&&Ie<=Ze.finallyLoc&&(Ze=null);var Pe=Ze?Ze.completion:{};return Pe.type=Se,Pe.arg=Ie,Ze?(this.method="next",this.next=Ze.finallyLoc,R):this.complete(Pe)},complete:function(Se,Ie){if(Se.type==="throw")throw Se.arg;return Se.type==="break"||Se.type==="continue"?this.next=Se.arg:Se.type==="return"?(this.rval=this.arg=Se.arg,this.method="return",this.next="end"):Se.type==="normal"&&Ie&&(this.next=Ie),R},finish:function(Se){for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Ge=this.tryEntries[Ie];if(Ge.finallyLoc===Se)return this.complete(Ge.completion,Ge.afterLoc),qe(Ge),R}},catch:function(Se){for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Ge=this.tryEntries[Ie];if(Ge.tryLoc===Se){var $e=Ge.completion;if($e.type==="throw"){var Ze=$e.arg;qe(Ge)}return Ze}}throw Error("illegal catch attempt")},delegateYield:function(Se,Ie,Ge){return this.delegate={iterator:Ke(Se),resultName:Ie,nextLoc:Ge},this.method==="next"&&(this.arg=r),R}},e}function fUe(r,e,t,n,i,o,a){try{var u=r[o](a),h=u.value}catch(d){return void t(d)}u.done?e(h):Promise.resolve(h).then(n,i)}function hUe(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(h){fUe(o,n,i,a,u,"next",h)}function u(h){fUe(o,n,i,a,u,"throw",h)}a(void 0)})}}var tx=Me(ht());var pUe=["measure","alignPre","align",null,"motion"],dUe=function(r,e){var t=Sh(null),n=pn(t,2),i=n[0],o=n[1],a=(0,tx.useRef)();function u(v){o(v,!0)}function h(){Vs.cancel(a.current)}function d(v){h(),a.current=Vs(function(){u(function(x){switch(i){case"align":return"motion";case"motion":return"stable";default:}return x}),v==null||v()})}return(0,tx.useEffect)(function(){u("measure")},[r]),(0,tx.useEffect)(function(){switch(i){case"measure":e();break;default:}i&&(a.current=Vs(hUe(R2().mark(function v(){var x,S;return R2().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:x=pUe.indexOf(i),S=pUe[x+1],S&&x!==-1&&u(S);case 3:case"end":return L.stop();}},v)}))))},[i]),(0,tx.useEffect)(function(){return function(){h()}},[]),[i,d]};var P2=Me(ht()),mUe=function(r){var e=P2.useState({width:0,height:0}),t=pn(e,2),n=t[0],i=t[1];function o(u){var h=u.offsetWidth,d=u.offsetHeight,v=u.getBoundingClientRect(),x=v.width,S=v.height;Math.abs(h-x)<1&&Math.abs(d-S)<1&&(h=x,d=S),i({width:h,height:d})}var a=P2.useMemo(function(){var u={};if(r){var h=n.width,d=n.height;r.indexOf("height")!==-1&&d?u.height=d:r.indexOf("minHeight")!==-1&&d&&(u.minHeight=d),r.indexOf("width")!==-1&&h?u.width=h:r.indexOf("minWidth")!==-1&&h&&(u.minWidth=h)}return u},[r,n]);return[a,o]};var gUe=wl.forwardRef(function(r,e){var t=r.visible,n=r.prefixCls,i=r.className,o=r.style,a=r.children,u=r.zIndex,h=r.stretch,d=r.destroyPopupOnHide,v=r.forceRender,x=r.align,S=r.point,A=r.getRootDomNode,L=r.getClassNameFromAlign,q=r.onAlign,R=r.onMouseEnter,D=r.onMouseLeave,k=r.onMouseDown,j=r.onTouchStart,$=r.onClick,ee=(0,Fv.useRef)(),J=(0,Fv.useRef)(),ie=(0,Fv.useState)(),ue=pn(ie,2),le=ue[0],_e=ue[1],Re=mUe(h),ze=pn(Re,2),qe=ze[0],Ve=ze[1];function Ke(){h&&Ve(A())}var Ce=dUe(t,Ke),Se=pn(Ce,2),Ie=Se[0],Ge=Se[1],$e=(0,Fv.useState)(0),Ze=pn($e,2),Pe=Ze[0],at=Ze[1],wt=(0,Fv.useRef)();gT(function(){Ie==="alignPre"&&at(0)},[Ie]);function Le(){return S||A}function Ye(){var bt;(bt=ee.current)===null||bt===void 0||bt.forceAlign()}function je(bt,be){var Yt=L(be);le!==Yt&&_e(Yt),at(function(Ut){return Ut+1}),Ie==="align"&&(q==null||q(bt,be))}gT(function(){Ie==="align"&&(Pe<3?Ye():Ge(function(){var bt;(bt=wt.current)===null||bt===void 0||bt.call(wt)}))},[Pe]);var We=yt({},_2(r));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(bt){var be=We[bt];We[bt]=function(Yt,Ut){return Ge(),be==null?void 0:be(Yt,Ut)}});function tt(){return new Promise(function(bt){wt.current=bt})}wl.useEffect(function(){!We.motionName&&Ie==="motion"&&Ge()},[We.motionName,Ie]),wl.useImperativeHandle(e,function(){return{forceAlign:Ye,getElement:function(){return J.current}}});var Qe=yt(yt({},qe),{},{zIndex:u,opacity:Ie==="motion"||Ie==="stable"||!t?void 0:0,pointerEvents:!t&&Ie!=="stable"?"none":void 0},o),kt=!0;x!=null&&x.points&&(Ie==="align"||Ie==="stable")&&(kt=!1);var Gt=a;return wl.Children.count(a)>1&&(Gt=wl.createElement("div",{className:"".concat(n,"-content")},a)),wl.createElement(J0,sn({visible:t,ref:J,leavedClassName:"".concat(n,"-hidden")},We,{onAppearPrepare:tt,onEnterPrepare:tt,removeOnLeave:d,forceRender:v}),function(bt,be){var Yt=bt.className,Ut=bt.style,Vt=(0,vUe.default)(n,i,le,Yt);return wl.createElement(cUe,{target:Le(),key:"popup",ref:ee,monitorWindowResize:!0,disabled:kt,align:x,onAlign:je},wl.createElement("div",{ref:be,className:Vt,onMouseEnter:R,onMouseLeave:D,onMouseDownCapture:k,onTouchStartCapture:j,onClick:$,style:yt(yt({},Ut),Qe)},Gt))})});gUe.displayName="PopupInner";var yUe=gUe;var yu=Me(ht());var _Ue=Me(hi()),xUe=yu.forwardRef(function(r,e){var t=r.prefixCls,n=r.visible,i=r.zIndex,o=r.children,a=r.mobile;a=a===void 0?{}:a;var u=a.popupClassName,h=a.popupStyle,d=a.popupMotion,v=d===void 0?{}:d,x=a.popupRender,S=r.onClick,A=yu.useRef();yu.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return A.current}}});var L=yt({zIndex:i},h),q=o;return yu.Children.count(o)>1&&(q=yu.createElement("div",{className:"".concat(t,"-content")},o)),x&&(q=x(q)),yu.createElement(J0,sn({visible:n,ref:A,removeOnLeave:!0},v),function(R,D){var k=R.className,j=R.style,$=(0,_Ue.default)(t,u,k);return yu.createElement("div",{ref:D,className:$,onClick:S,style:yt(yt({},j),L)},q)})});xUe.displayName="MobilePopupInner";var wUe=xUe;var Mor=["visible","mobile"],bUe=jv.forwardRef(function(r,e){var t=r.visible,n=r.mobile,i=is(r,Mor),o=(0,TT.useState)(t),a=pn(o,2),u=a[0],h=a[1],d=(0,TT.useState)(!1),v=pn(d,2),x=v[0],S=v[1],A=yt(yt({},i),{},{visible:u});(0,TT.useEffect)(function(){h(t),t&&n&&S(iBe())},[t,n]);var L=x?jv.createElement(wUe,sn({},A,{mobile:n,ref:e})):jv.createElement(yUe,sn({},A,{ref:e}));return jv.createElement("div",null,jv.createElement(FY,A),L)});bUe.displayName="Popup";var SUe=bUe;var EUe=Me(ht()),Ror=EUe.createContext(null),eK=Ror;function tK(){}function Por(){return""}function Oor(r){return r?r.ownerDocument:window.document}var Lor=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Dor(r){var e=function(t){Na(i,t);var n=qa(i);function i(o){var a;La(this,i),a=n.call(this,o),ft(Fr(a),"popupRef",bl.createRef()),ft(Fr(a),"triggerRef",bl.createRef()),ft(Fr(a),"portalContainer",void 0),ft(Fr(a),"attachId",void 0),ft(Fr(a),"clickOutsideHandler",void 0),ft(Fr(a),"touchOutsideHandler",void 0),ft(Fr(a),"contextMenuOutsideHandler1",void 0),ft(Fr(a),"contextMenuOutsideHandler2",void 0),ft(Fr(a),"mouseDownTimeout",void 0),ft(Fr(a),"focusTime",void 0),ft(Fr(a),"preClickTime",void 0),ft(Fr(a),"preTouchTime",void 0),ft(Fr(a),"delayTimer",void 0),ft(Fr(a),"hasPopupMouseDown",void 0),ft(Fr(a),"onMouseEnter",function(h){var d=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",h),a.delaySetPopupVisible(!0,d,d?null:h)}),ft(Fr(a),"onMouseMove",function(h){a.fireEvents("onMouseMove",h),a.setPoint(h)}),ft(Fr(a),"onMouseLeave",function(h){a.fireEvents("onMouseLeave",h),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),ft(Fr(a),"onPopupMouseEnter",function(){a.clearDelayTimer()}),ft(Fr(a),"onPopupMouseLeave",function(h){var d;h.relatedTarget&&!h.relatedTarget.setTimeout&&Dv((d=a.popupRef.current)===null||d===void 0?void 0:d.getElement(),h.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),ft(Fr(a),"onFocus",function(h){a.fireEvents("onFocus",h),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))}),ft(Fr(a),"onMouseDown",function(h){a.fireEvents("onMouseDown",h),a.preClickTime=Date.now()}),ft(Fr(a),"onTouchStart",function(h){a.fireEvents("onTouchStart",h),a.preTouchTime=Date.now()}),ft(Fr(a),"onBlur",function(h){a.fireEvents("onBlur",h),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)}),ft(Fr(a),"onContextMenu",function(h){h.preventDefault(),a.fireEvents("onContextMenu",h),a.setPopupVisible(!0,h)}),ft(Fr(a),"onContextMenuClose",function(){a.isContextMenuToShow()&&a.close()}),ft(Fr(a),"onClick",function(h){if(a.fireEvents("onClick",h),a.focusTime){var d;if(a.preClickTime&&a.preTouchTime?d=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?d=a.preClickTime:a.preTouchTime&&(d=a.preTouchTime),Math.abs(d-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&h&&h.preventDefault&&h.preventDefault();var v=!a.state.popupVisible;(a.isClickToHide()&&!v||v&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,h)}),ft(Fr(a),"onPopupMouseDown",function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var h;(h=a.context).onPopupMouseDown.apply(h,arguments)}}),ft(Fr(a),"onDocumentClick",function(h){if(!(a.props.mask&&!a.props.maskClosable)){var d=h.target,v=a.getRootDomNode(),x=a.getPopupDomNode();(!Dv(v,d)||a.isContextMenuOnly())&&!Dv(x,d)&&!a.hasPopupMouseDown&&a.close()}}),ft(Fr(a),"getRootDomNode",function(){var h=a.props.getTriggerDOMNode;if(h)return h(a.triggerRef.current);try{var d=mT(a.triggerRef.current);if(d)return d}catch(v){}return TUe.default.findDOMNode(Fr(a))}),ft(Fr(a),"getPopupClassNameFromAlign",function(h){var d=[],v=a.props,x=v.popupPlacement,S=v.builtinPlacements,A=v.prefixCls,L=v.alignPoint,q=v.getPopupClassNameFromAlign;return x&&S&&d.push(rBe(S,A,h,L)),q&&d.push(q(h)),d.join(" ")}),ft(Fr(a),"getComponent",function(){var h=a.props,d=h.prefixCls,v=h.destroyPopupOnHide,x=h.popupClassName,S=h.onPopupAlign,A=h.popupMotion,L=h.popupAnimation,q=h.popupTransitionName,R=h.popupStyle,D=h.mask,k=h.maskAnimation,j=h.maskTransitionName,$=h.maskMotion,ee=h.zIndex,J=h.popup,ie=h.stretch,ue=h.alignPoint,le=h.mobile,_e=h.forceRender,Re=h.onPopupClick,ze=a.state,qe=ze.popupVisible,Ve=ze.point,Ke=a.getPopupAlign(),Ce={};return a.isMouseEnterToShow()&&(Ce.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(Ce.onMouseLeave=a.onPopupMouseLeave),Ce.onMouseDown=a.onPopupMouseDown,Ce.onTouchStart=a.onPopupMouseDown,bl.createElement(SUe,sn({prefixCls:d,destroyPopupOnHide:v,visible:qe,point:ue&&Ve,className:x,align:Ke,onAlign:S,animation:L,getClassNameFromAlign:a.getPopupClassNameFromAlign},Ce,{stretch:ie,getRootDomNode:a.getRootDomNode,style:R,mask:D,zIndex:ee,transitionName:q,maskAnimation:k,maskTransitionName:j,maskMotion:$,ref:a.popupRef,motion:A,mobile:le,forceRender:_e,onClick:Re}),typeof J=="function"?J():J)}),ft(Fr(a),"attachParent",function(h){Vs.cancel(a.attachId);var d=a.props,v=d.getPopupContainer,x=d.getDocument,S=a.getRootDomNode(),A;v?(S||v.length===0)&&(A=v(S)):A=x(a.getRootDomNode()).body,A?A.appendChild(h):a.attachId=Vs(function(){a.attachParent(h)})}),ft(Fr(a),"getContainer",function(){if(!a.portalContainer){var h=a.props.getDocument,d=h(a.getRootDomNode()).createElement("div");d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.width="100%",a.portalContainer=d}return a.attachParent(a.portalContainer),a.portalContainer}),ft(Fr(a),"setPoint",function(h){var d=a.props.alignPoint;!d||!h||a.setState({point:{pageX:h.pageX,pageY:h.pageY}})}),ft(Fr(a),"handlePortalUpdate",function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)}),ft(Fr(a),"triggerContextValue",{onPopupMouseDown:a.onPopupMouseDown});var u;return"popupVisible"in o?u=!!o.popupVisible:u=!!o.defaultPopupVisible,a.state={prevPopupVisible:u,popupVisible:u},Lor.forEach(function(h){a["fire".concat(h)]=function(d){a.fireEvents(h,d)}}),a}return Da(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,u=this.state;if(u.popupVisible){var h;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(h=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=os(h,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(h=h||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=os(h,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(h=h||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=os(h,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=os(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Vs.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,u=a.popupPlacement,h=a.popupAlign,d=a.builtinPlacements;return u&&d?tBe(d,u,h):h}},{key:"setPopupVisible",value:function(a,u){var h=this.props.alignPoint,d=this.state.popupVisible;this.clearDelayTimer(),d!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:d}),this.props.onPopupVisibleChange(a)),h&&u&&a&&this.setPoint(u)}},{key:"delaySetPopupVisible",value:function(a,u,h){var d=this,v=u*1e3;if(this.clearDelayTimer(),v){var x=h?{pageX:h.pageX,pageY:h.pageY}:null;this.delayTimer=window.setTimeout(function(){d.setPopupVisible(a,x),d.clearDelayTimer()},v)}else this.setPopupVisible(a,h)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var u=this.props.children.props,h=this.props;return u[a]&&h[a]?this["fire".concat(a)]:u[a]||h[a]}},{key:"isClickToShow",value:function(){var a=this.props,u=a.action,h=a.showAction;return u.indexOf("click")!==-1||h.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,u=a.action,h=a.showAction;return u.indexOf("contextMenu")!==-1||h.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,u=a.action,h=a.hideAction;return u.indexOf("click")!==-1||h.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,u=a.action,h=a.showAction;return u.indexOf("hover")!==-1||h.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,u=a.action,h=a.hideAction;return u.indexOf("hover")!==-1||h.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,u=a.action,h=a.showAction;return u.indexOf("focus")!==-1||h.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,u=a.action,h=a.hideAction;return u.indexOf("focus")!==-1||h.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,u){var h=this.props.children.props[a];h&&h(u);var d=this.props[a];d&&d(u)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,u=this.props,h=u.children,d=u.forceRender,v=u.alignPoint,x=u.className,S=u.autoDestroy,A=bl.Children.only(h),L={key:"trigger"};this.isContextMenuToShow()?L.onContextMenu=this.onContextMenu:L.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(L.onClick=this.onClick,L.onMouseDown=this.onMouseDown,L.onTouchStart=this.onTouchStart):(L.onClick=this.createTwoChains("onClick"),L.onMouseDown=this.createTwoChains("onMouseDown"),L.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(L.onMouseEnter=this.onMouseEnter,v&&(L.onMouseMove=this.onMouseMove)):L.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?L.onMouseLeave=this.onMouseLeave:L.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(L.onFocus=this.onFocus,L.onBlur=this.onBlur):(L.onFocus=this.createTwoChains("onFocus"),L.onBlur=this.createTwoChains("onBlur"));var q=(0,IUe.default)(A&&A.props&&A.props.className,x);q&&(L.className=q);var R=yt({},L);vT(A)&&(R.ref=Y0(this.triggerRef,A.ref));var D=bl.cloneElement(A,R),k;return(a||this.popupRef.current||d)&&(k=bl.createElement(r,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&S&&(k=null),bl.createElement(eK.Provider,{value:this.triggerContextValue},D,k)}}],[{key:"getDerivedStateFromProps",value:function(a,u){var h=a.popupVisible,d={};return h!==void 0&&u.popupVisible!==h&&(d.popupVisible=h,d.prevPopupVisible=u.popupVisible),d}}]),i}(bl.Component);return ft(e,"contextType",eK),ft(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Por,getDocument:Oor,onPopupVisibleChange:tK,afterPopupVisibleChange:tK,onPopupAlign:tK,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}var AUe=Dor(eBe);var _u={adjustX:1,adjustY:1},xu=[0,0],CUe={left:{points:["cr","cl"],overflow:_u,offset:[-4,0],targetOffset:xu},right:{points:["cl","cr"],overflow:_u,offset:[4,0],targetOffset:xu},top:{points:["bc","tc"],overflow:_u,offset:[0,-4],targetOffset:xu},bottom:{points:["tc","bc"],overflow:_u,offset:[0,4],targetOffset:xu},topLeft:{points:["bl","tl"],overflow:_u,offset:[0,-4],targetOffset:xu},leftTop:{points:["tr","tl"],overflow:_u,offset:[-4,0],targetOffset:xu},topRight:{points:["br","tr"],overflow:_u,offset:[0,-4],targetOffset:xu},rightTop:{points:["tl","tr"],overflow:_u,offset:[4,0],targetOffset:xu},bottomRight:{points:["tr","br"],overflow:_u,offset:[0,4],targetOffset:xu},rightBottom:{points:["bl","br"],overflow:_u,offset:[4,0],targetOffset:xu},bottomLeft:{points:["tl","bl"],overflow:_u,offset:[0,4],targetOffset:xu},leftBottom:{points:["br","bl"],overflow:_u,offset:[-4,0],targetOffset:xu}};var O2=Me(ht()),MUe=Me(hi());function L2(r){var e=r.showArrow,t=r.arrowContent,n=r.children,i=r.prefixCls,o=r.id,a=r.overlayInnerStyle,u=r.className,h=r.style;return O2.createElement("div",{className:(0,MUe.default)("".concat(i,"-content"),u),style:h},e!==!1&&O2.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},t),O2.createElement("div",{className:"".concat(i,"-inner"),id:o,role:"tooltip",style:a},typeof n=="function"?n():n))}var Nor=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],qor=function(e,t){var n=e.overlayClassName,i=e.trigger,o=i===void 0?["hover"]:i,a=e.mouseEnterDelay,u=a===void 0?0:a,h=e.mouseLeaveDelay,d=h===void 0?.1:h,v=e.overlayStyle,x=e.prefixCls,S=x===void 0?"rc-tooltip":x,A=e.children,L=e.onVisibleChange,q=e.afterVisibleChange,R=e.transitionName,D=e.animation,k=e.motion,j=e.placement,$=j===void 0?"right":j,ee=e.align,J=ee===void 0?{}:ee,ie=e.destroyTooltipOnHide,ue=ie===void 0?!1:ie,le=e.defaultVisible,_e=e.getTooltipContainer,Re=e.overlayInnerStyle,ze=e.arrowContent,qe=e.overlay,Ve=e.id,Ke=e.showArrow,Ce=Ke===void 0?!0:Ke,Se=is(e,Nor),Ie=(0,rx.useRef)(null);(0,rx.useImperativeHandle)(t,function(){return Ie.current});var Ge=yt({},Se);"visible"in e&&(Ge.popupVisible=e.visible);var $e=function(){return rK.createElement(L2,{showArrow:Ce,arrowContent:ze,key:"content",prefixCls:S,id:Ve,overlayInnerStyle:Re},qe)},Ze=!1,Pe=!1;if(typeof ue=="boolean")Ze=ue;else if(ue&&xn(ue)==="object"){var at=ue.keepParent;Ze=at===!0,Pe=at===!1}return rK.createElement(AUe,sn({popupClassName:n,prefixCls:S,popup:$e,action:o,builtinPlacements:CUe,popupPlacement:$,ref:Ie,popupAlign:J,getPopupContainer:_e,onPopupVisibleChange:L,afterPopupVisibleChange:q,popupTransitionName:R,popupAnimation:D,popupMotion:k,defaultPopupVisible:le,destroyPopupOnHide:Ze,autoDestroy:Pe,mouseLeaveDelay:d,popupStyle:v,mouseEnterDelay:u},Ge),A)},RUe=(0,rx.forwardRef)(qor);var PUe=RUe;var kor=Th.forwardRef(function(r,e){var t=r.visible,n=r.overlay,i=Th.useRef(null),o=Y0(e,i),a=Th.useRef(null);function u(){Vs.cancel(a.current)}function h(){a.current=Vs(function(){var d;(d=i.current)===null||d===void 0||d.forcePopupAlign()})}return Th.useEffect(function(){return t?h():u(),u},[t,n]),Th.createElement(PUe,sn({ref:o},r))}),nK=kor;function iK(r){var e;return e=function(t){Na(i,t);var n=qa(i);function i(){var o;return La(this,i),o=n.apply(this,arguments),o.state={visibles:{}},o.handleTooltipVisibleChange=function(a,u){o.setState(function(h){return{visibles:yt(yt({},h.visibles),{},ft({},a,u))}})},o.handleWithTooltip=function(a){var u=a.value,h=a.dragging,d=a.index,v=a.disabled,x=is(a,["value","dragging","index","disabled"]),S=o.props,A=S.tipFormatter,L=S.tipProps,q=S.handleStyle,R=S.getTooltipContainer,D=L.prefixCls,k=D===void 0?"rc-slider-tooltip":D,j=L.overlay,$=j===void 0?A(u):j,ee=L.placement,J=ee===void 0?"top":ee,ie=L.visible,ue=ie===void 0?!1:ie,le=is(L,["prefixCls","overlay","placement","visible"]),_e;return Array.isArray(q)?_e=q[d]||q[0]:_e=q,IT.default.createElement(nK,sn({},le,{getTooltipContainer:R,prefixCls:k,overlay:$,placement:J,visible:!v&&(o.state.visibles[d]||h)||ue,key:d}),IT.default.createElement(W0,sn({},x,{style:yt({},_e),value:u,onMouseEnter:function(){return o.handleTooltipVisibleChange(d,!0)},onMouseLeave:function(){return o.handleTooltipVisibleChange(d,!1)}})))},o}return Da(i,[{key:"render",value:function(){return IT.default.createElement(r,sn({},this.props,{handle:this.handleWithTooltip}))}}]),i}(IT.default.Component),e.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},e}var D2=j4e;D2.Range=z4e;D2.Handle=W0;D2.createSliderWithTooltip=iK;var N2=D2;var AT={brightness:0,contrast:0,saturation:0},q2=r=>{let{max:e=1,min:t=0,onChange:n=()=>console.warn("onChange is not implemented."),step:i=.01,type:o="",value:a=.5,tooltip:u}=r,h=d=>{n(o,d)};return Hs.default.createElement("div",{className:"filter-slider",title:u},Hs.default.createElement("span",{className:Os("slider-icon",o),title:u}),Hs.default.createElement("div",null,Hs.default.createElement(N2,{title:u,ariaLabelForHandle:u,max:e,min:t,onChange:h,step:i,value:a})),Hs.default.createElement("span",{className:"slider-tooltip",title:u},a))};q2.propTypes={max:Ih.default.number,min:Ih.default.number,onChange:Ih.default.func,step:Ih.default.number,tooltip:Ih.default.string,type:Ih.default.string,value:Ih.default.number};var LUe=r=>{let{layer:e}=r,[t,n]=(0,Hs.useState)(Tt({},AT)),i=(a,u)=>{let h=Object.assign({},t,{[a]:u});n(h),e.updateStyleVariables(h)},o=()=>{n(Tt({},AT)),e.updateStyleVariables(Tt({},AT))};return Hs.default.createElement("div",null,Hs.default.createElement(q2,{max:1,min:-1,onChange:i,step:.01,type:"contrast",value:t.contrast,tooltip:Tr("control-imagemanipulation-contrast")}),Hs.default.createElement(q2,{max:1,min:-1,onChange:i,step:.01,type:"saturation",value:t.saturation,tooltip:Tr("control-imagemanipulation-saturation")}),Hs.default.createElement(q2,{max:1,min:-1,onChange:i,step:.01,type:"brightness",value:t.brightness,tooltip:Tr("control-imagemanipulation-brightness")}),Hs.default.createElement("button",{className:"btn-reset",title:Tr("control-imagemanipulation-reset"),onClick:o},Tr("control-imagemanipulation-reset")))};LUe.propTypes={layer:Ih.default.object};var oK=class extends ns{constructor(e){let t="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=t;let i=document.createElement("button");i.title=Tr("control-imagemanipulation-open"),i.innerHTML="I",i.type="button",n.appendChild(i);let o=document.createElement("div");o.className="content-container",o.style.display="none",n.appendChild(o);let a=()=>{let u=o.style.display==="block";n.className=u?t:`${t} active`,o.style.display=u?"none":"block"};OUe.default.render(Hs.default.createElement(LUe,{layer:e.layer}),o),i.addEventListener("click",a,!1),i.addEventListener("touchstart",a,!1),super({element:n,target:e.target})}},DUe=oK;function For(r){return fo(this,null,function*(){try{let e=yield NUe.default.get(r);if(e.status===200){let n=new DOMParser().parseFromString(e.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:r.substring(0,r.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(e){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(e)}})}var qUe=r=>{let{className:e="",onLoad:t,urlImageProperties:n,withImageManipulation:i=!1}=r,o=(0,nx.useRef)(null);return(0,nx.useEffect)(()=>{fo(void 0,null,function*(){let h=yield For(n),d=new x4e({url:h.url,size:[h.width,h.height],crossOrigin:"anonymous",zDirection:-1}),v=d.getTileGrid().getExtent(),x=new c4e({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:Tt({},AT)},source:d}),S=new mu({resolutions:x.getSource().getTileGrid().getResolutions(),extent:v,constrainOnlyCenter:!0}),A=new q0({controls:[new xN({tipLabel:Tr("control-fullscreen-title")}),new N0({zoomInTipLabel:Tr("control-zoom-in"),zoomOutTipLabel:Tr("control-zoom-in")})],interactions:D0().extend([new O0]),layers:[x],target:o.current,view:S});S.fit(v,{padding:[50,50,50,50]});let L=A.getSize();A.addControl(new bN({tipLabel:Tr("control-zoomtoextent-title"),extent:S.calculateExtent([L[0]+50,L[1]+50])})),i&&A.addControl(new DUe({layer:x})),t&&t({layer:x,map:A,source:d,zoomifyProps:h})})},[n]),nx.default.createElement("div",{className:Os("vk-mapview-zoomify",e),ref:o})};qUe.propTypes={className:CT.default.string,onLoad:CT.default.func,urlImageProperties:CT.default.string.isRequired,withImageManipulation:CT.default.bool};var kUe=qUe;var FUe=kUe;var jor=()=>{let r=Jl(IO),e=Ql(CO),t=n=>{e(n)};return aK.default.createElement("div",{className:"vkf-mapview-source"},r!==null&&aK.default.createElement(FUe,{urlImageProperties:r.zoomify_url,onLoad:t}))},jUe=jor;var af=Me(ht(),1);var lx=Me(Qr(),1);var ix=Me(ht(),1),ic=Me(Qr(),1);var zor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bor=function(r){zor(e,r);function e(t){var n=r.call(this,t)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=Di(),n.tmpTileRange_=new k0(0,0,0,0),n}return e.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),o=n.getUseInterimTilesOnError();return i==Bt.LOADED||i==Bt.EMPTY||i==Bt.ERROR&&!o},e.prototype.getTile=function(t,n,i,o){var a=o.pixelRatio,u=o.viewState.projection,h=this.getLayer(),d=h.getSource(),v=d.getTile(t,n,i,a,u);return v.getState()==Bt.ERROR&&(h.getUseInterimTilesOnError()?h.getPreload()>0&&(this.newTiles_=!0):v.setState(Bt.LOADED)),this.isDrawableTile(v)||(v=v.getInterimTile()),v},e.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),o=Nn(n.pixelToCoordinateTransform,t.slice()),a=i.getExtent();if(a&&!es(a,o))return null;for(var u=n.pixelRatio,h=n.viewState.projection,d=n.viewState,v=i.getRenderSource(),x=v.getTileGridForProjection(d.projection),S=v.getTilePixelRatio(n.pixelRatio),A=x.getZForResolution(d.resolution);A>=x.getMinZoom();--A){var L=x.getTileCoordForCoordAndZ(o,A),q=v.getTile(A,L[1],L[2],u,h);if(!(q instanceof xh||q instanceof j0))return null;if(q.getState()===Bt.LOADED){var R=x.getOrigin(A),D=Un(x.getTileSize(A)),k=x.getResolution(A),j=Math.floor(S*((o[0]-R[0])/k-L[1]*D[0])),$=Math.floor(S*((R[1]-o[1])/k-L[2]*D[1])),ee=Math.round(S*v.getGutterForProjection(d.projection));return this.getImageData(q.getImage(),j+ee,$+ee)}}return null},e.prototype.loadedTileCallback=function(t,n,i){return this.isDrawableTile(i)?r.prototype.loadedTileCallback.call(this,t,n,i):!1},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],o=t.viewState,a=o.projection,u=o.resolution,h=o.center,d=o.rotation,v=t.pixelRatio,x=this.getLayer(),S=x.getSource(),A=S.getRevision(),L=S.getTileGridForProjection(a),q=L.getZForResolution(u,S.zDirection),R=L.getResolution(q),D=t.extent,k=t.viewState.resolution,j=S.getTilePixelRatio(v),$=Math.round(ln(D)/k*v),ee=Math.round(yo(D)/k*v),J=i.extent&&Ma(i.extent,a);J&&(D=nu(D,Ma(i.extent,a)));var ie=R*$/2/j,ue=R*ee/2/j,le=[h[0]-ie,h[1]-ue,h[0]+ie,h[1]+ue],_e=L.getTileRangeForExtentAndZ(D,q),Re={};Re[q]={};var ze=this.createLoadedTileFinder(S,a,Re),qe=this.tmpExtent,Ve=this.tmpTileRange_;this.newTiles_=!1;for(var Ke=d?CD(o.center,k,d,t.size):void 0,Ce=_e.minX;Ce<=_e.maxX;++Ce)for(var Se=_e.minY;Se<=_e.maxY;++Se)if(!(d&&!L.tileCoordIntersectsViewport([q,Ce,Se],Ke))){var Ie=this.getTile(q,Ce,Se,t);if(this.isDrawableTile(Ie)){var Ge=tr(this);if(Ie.getState()==Bt.LOADED){Re[q][Ie.tileCoord.toString()]=Ie;var $e=Ie.inTransition(Ge);$e&&i.opacity!==1&&(Ie.endTransition(Ge),$e=!1),!this.newTiles_&&($e||this.renderedTiles.indexOf(Ie)===-1)&&(this.newTiles_=!0)}if(Ie.getAlpha(Ge,t.time)===1)continue}var Ze=L.getTileCoordChildTileRange(Ie.tileCoord,Ve,qe),Pe=!1;Ze&&(Pe=ze(q+1,Ze)),Pe||L.forEachTileCoordParentTileRange(Ie.tileCoord,ze,Ve,qe)}var at=R/u*v/j;io(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/v,1/v,d,-$/2,-ee/2);var wt=SD(this.pixelTransform);this.useContainer(n,wt,this.getBackground(t));var Le=this.context,Ye=Le.canvas;o0(this.inversePixelTransform,this.pixelTransform),io(this.tempTransform,$/2,ee/2,at,at,0,-$/2,-ee/2),Ye.width!=$||Ye.height!=ee?(Ye.width=$,Ye.height=ee):this.containerReused||Le.clearRect(0,0,$,ee),J&&this.clipUnrotated(Le,t,J),S.getInterpolate()||Ur(Le,nT),this.preRender(Le,t),this.renderedTiles.length=0;var je=Object.keys(Re).map(Number);je.sort(ml);var We,tt,Qe;i.opacity===1&&(!this.containerReused||S.getOpaque(t.viewState.projection))?je=je.reverse():(We=[],tt=[]);for(var kt=je.length-1;kt>=0;--kt){var Gt=je[kt],bt=S.getTilePixelSize(Gt,v,a),be=L.getResolution(Gt),Yt=be/R,Ut=bt[0]*Yt*at,Vt=bt[1]*Yt*at,nr=L.getTileCoordForCoordAndZ(iu(le),Gt),yr=L.getTileCoordExtent(nr),Xt=Nn(this.tempTransform,[j*(yr[0]-le[0])/R,j*(le[3]-yr[3])/R]),lr=j*S.getGutterForProjection(a),Pr=Re[Gt];for(var nn in Pr){var Ie=Pr[nn],An=Ie.tileCoord,Ai=nr[1]-An[1],nt=Math.round(Xt[0]-(Ai-1)*Ut),ti=nr[2]-An[2],Cn=Math.round(Xt[1]-(ti-1)*Vt),Ce=Math.round(Xt[0]-Ai*Ut),Se=Math.round(Xt[1]-ti*Vt),di=nt-Ce,Ci=Cn-Se,ct=q===Gt,$e=ct&&Ie.getAlpha(tr(this),t.time)!==1,mr=!1;if(!$e)if(We){Qe=[Ce,Se,Ce+di,Se,Ce+di,Se+Ci,Ce,Se+Ci];for(var jt=0,Mi=We.length;jt<Mi;++jt)if(q!==Gt&&Gt<tt[jt]){var dn=We[jt];Ti([Ce,Se,Ce+di,Se+Ci],[dn[0],dn[3],dn[4],dn[7]])&&(mr||(Le.save(),mr=!0),Le.beginPath(),Le.moveTo(Qe[0],Qe[1]),Le.lineTo(Qe[2],Qe[3]),Le.lineTo(Qe[4],Qe[5]),Le.lineTo(Qe[6],Qe[7]),Le.moveTo(dn[6],dn[7]),Le.lineTo(dn[4],dn[5]),Le.lineTo(dn[2],dn[3]),Le.lineTo(dn[0],dn[1]),Le.clip())}We.push(Qe),tt.push(Gt)}else Le.clearRect(Ce,Se,di,Ci);this.drawTileImage(Ie,t,Ce,Se,di,Ci,lr,ct),We&&!$e?(mr&&Le.restore(),this.renderedTiles.unshift(Ie)):this.renderedTiles.push(Ie),this.updateUsedTiles(t.usedTiles,S,Ie)}}return this.renderedRevision=A,this.renderedResolution=R,this.extentChanged=!this.renderedExtent_||!sh(this.renderedExtent_,le),this.renderedExtent_=le,this.renderedPixelRatio=v,this.renderedProjection=a,this.manageTilePyramid(t,S,L,v,a,D,q,x.getPreload()),this.scheduleExpireCache(t,S),this.postRender(Le,t),i.extent&&Le.restore(),Ur(Le,Lze),wt!==Ye.style.transform&&(Ye.style.transform=wt),this.container},e.prototype.drawTileImage=function(t,n,i,o,a,u,h,d){var v=this.getTileImage(t);if(v){var x=tr(this),S=n.layerStatesArray[n.layerIndex],A=S.opacity*(d?t.getAlpha(x,n.time):1),L=A!==this.context.globalAlpha;L&&(this.context.save(),this.context.globalAlpha=A),this.context.drawImage(v,h,h,v.width-2*h,v.height-2*h,i,o,a,u),L&&this.context.restore(),A!==S.opacity?n.animate=!0:d&&t.endTransition(x)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(o,a,u){var h=tr(o);h in u.usedTiles&&o.expireCache(u.viewState.projection,u.usedTiles[h])}.bind(null,n);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,n,i){var o=tr(n);o in t||(t[o]={}),t[o][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,n,i,o,a,u,h,d,v){var x=tr(n);x in t.wantedTiles||(t.wantedTiles[x]={});var S=t.wantedTiles[x],A=t.tileQueue,L=i.getMinZoom(),q=t.viewState.rotation,R=q?CD(t.viewState.center,t.viewState.resolution,q,t.size):void 0,D=0,k,j,$,ee,J,ie;for(ie=L;ie<=h;++ie)for(j=i.getTileRangeForExtentAndZ(u,ie,j),$=i.getResolution(ie),ee=j.minX;ee<=j.maxX;++ee)for(J=j.minY;J<=j.maxY;++J)q&&!i.tileCoordIntersectsViewport([ie,ee,J],R)||(h-ie<=d?(++D,k=n.getTile(ie,ee,J,o,a),k.getState()==Bt.IDLE&&(S[k.getKey()]=!0,A.isKeyQueued(k.getKey())||A.enqueue([k,x,i.getTileCoordCenter(k.tileCoord),$])),v!==void 0&&v(k)):n.useTile(ie,ee,J,a));n.updateCacheSize(D,a)},e}(nN),zUe=Bor;var Uor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vor=function(r){Uor(e,r);function e(t){return r.call(this,t)||this}return e.prototype.createRenderer=function(){return new zUe(this)},e}(SN),zv=Vor;var Gor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$or=function(r){Gor(e,r);function e(t){var n=this,i=t||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var a=i.projection!==void 0?i.projection:"EPSG:3857",u=i.tileGrid!==void 0?i.tileGrid:h4e({extent:NN(a),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n=r.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:i.opaque,projection:a,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:u,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n}return e.prototype.getGutter=function(){return this.gutter_},e}($0),sK=$or;var lK=class extends ns{constructor(t){let n=t||{},i=document.createElement("div");i.className="ol-layerspy ol-unselectable ol-control";let o=document.createElement("button");o.title=Tr("control-layerspy-title"),o.type="button",i.appendChild(o);super({element:i,target:n.target});Ro(this,"mousePosition",null);Ro(this,"activate",()=>{this.layers===void 0&&(this.layers=this.getMap().getLayers()),this.getMap().addLayer(this.layer),this.layer.on("prerender",this.handlePrecompose,this),this.layer.on("postrender",this.handlePostcompose,this);let t=this.getMap().getViewport();t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("keydown",this.handleKeyPress),this.layers.on("add",this.handleAddedLayer),this.containerEl.classList.add("active"),this.renderRadiusbox&&this.renderTargetElement()});Ro(this,"changeLayer",t=>{this.containerEl.classList.contains("active")?(this.deactivate(),this.layer=t,this.activate()):this.layer=t});Ro(this,"deactivate",()=>{this.layer.un("prerender",this.handlePrecompose),this.layer.un("postrender",this.handlePostcompose);let t=this.getMap().getViewport();t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("mouseout",this.handleMouseOut),document.removeEventListener("keydown",this.handleKeyPress),this.layers.un("add",this.handleAddedLayer),this.getMap().removeLayer(this.layer),this.containerEl.classList.remove("active"),this.renderRadiusbox&&this.renderTargetElement()});Ro(this,"handlePostcompose",t=>{t.context.restore()});Ro(this,"handlePrecompose",t=>{let n=t.context,i=1;n.save(),n.beginPath();let o=this.mousePosition;if(o){let a=this.getMap().getLayers().getArray().find(d=>d.vkf_id===this.refActiveBasemapId.current).renderer_.context.canvas.style.transform,u=new DOMPoint(o[0],o[1]),h=new DOMMatrix(a);u=u.matrixTransform(h.invertSelf()),n.arc(u.x*i,u.y*i,this.clipRadius*i,0,2*Math.PI),n.lineWidth=5*i,n.strokeStyle="rgba(0,0,0,0.5)",n.stroke()}n.clip()});Ro(this,"handleMouseMove",t=>{this.mousePosition=this.getMap().getEventPixel(t),this.getMap().render()});Ro(this,"handleMouseOut",()=>{this.mousePosition=null,this.getMap().render()});Ro(this,"handleKeyPress",t=>{t.target.tagName.toLowerCase()!=="input"&&(t.key.toLowerCase()==="y"||t.keyCode==="KeyY"?(this.clipRadius=Math.min(this.clipRadius+5,150),this.getMap().render()):(t.key.toLowerCase()==="x"||t.keyCode==="KeyX")&&(this.clipRadius=Math.max(this.clipRadius-5,25),this.getMap().render()),this.updateClipRadiusDisplay())});Ro(this,"handleAddedLayer",t=>{t.target.getArray()[t.target.getLength()-1]!==this.layer&&(this.getMap().removeLayer(this.layer),this.getMap().addLayer(this.layer))});Ro(this,"handleExternal3dStateUpdate",t=>{this.containerEl.disabled=t,t?this.containerEl.classList.add("disabled"):this.containerEl.classList.remove("disabled")});Ro(this,"updateClipRadiusDisplay",()=>{let t=this.targetEl;t.innerHTML=`<strong>Radius: ${this.clipRadius}px</strong> (${Tr("control-layerspy-radius-tooltip")})`});Ro(this,"renderTargetElement",()=>{let t=this.targetEl,n=k6(this.getMap());this.targetEl===void 0&&(t=document.createElement("div"),t.className="ol-control ol-layerspy-radius-box",t.innerHTML="",n.appendChild(t),this.targetEl=t),this.targetEl.classList.toggle("active"),n.classList.toggle("layerspy-active"),this.updateClipRadiusDisplay()});this.clipRadius=fl(n.radius)?parseInt(n.radius,0):75,n.refSpyLayer!==void 0&&(n.refSpyLayer.current=this),this.refActiveBasemapId=n.refActiveBasemapId,this.containerEl=o,this.renderRadiusbox=t.renderRadiusBox===void 0?!0:t.renderRadiusBox,o.addEventListener("click",a=>{a.preventDefault(),this.containerEl.classList.contains("active")?this.deactivate():this.activate()}),fl(n.spyLayer)&&this.changeLayer(n.spyLayer)}},BUe=lK;var UUe=r=>{let{children:e,extent:t,onLoad:n=()=>console.log("No onLoad function was passed to component Map2D."),urlsOsmBaseMap:i}=r,o=(0,ix.useRef)(null);return(0,ix.useEffect)(()=>{let a=()=>fo(void 0,null,function*(){let u=new zv({source:new sK({urls:i,crossOrigin:"*",maxZoom:18})});u.vkf_id="slub-osm";let h=new q0({controls:[new xN({tipLabel:Tr("control-fullscreen-title")}),new N0({zoomInTipLabel:Tr("control-zoom-in"),zoomOutTipLabel:Tr("control-zoom-in")})],interactions:D0().extend([new O0]),layers:[u],target:o.current,view:new mu({projection:"EPSG:3857",center:[871713,6396955],zoom:4.3})});if(n({map:h}),t!=null){let v=Ev(t,"EPSG:4326",h.getView().getProjection());h.getView().fit(v,{padding:[100,100,100,100]}),h.addControl(new bN({tipLabel:Tr("control-zoomtoextent-title"),extent:v}))}let d=new zv({zIndex:10,attribution:void 0,source:new sK({urls:i,crossOrigin:"*",attributions:[]})});d.vkf_id="slub-osm",h.addControl(new BUe({spyLayer:d,refActiveBasemapId:{current:u.vkf_id}}))});o.current!==null&&a()},[]),ix.default.createElement("div",{className:"map-container",ref:o},e)};UUe.propTypes={extent:ic.default.arrayOf(ic.default.number),onLoad:ic.default.func,urlNominatim:ic.default.string,urlsOsmBaseMap:ic.default.arrayOf(ic.default.string),children:ic.default.oneOfType([ic.default.arrayOf(ic.default.node),ic.default.node])};var VUe=UUe;var GUe=VUe;var RT=Me(ht(),1),ox=Me(Qr(),1);var MT="1.3.0";function uK(r,e){var t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});var n=t.join("&");return r=r.replace(/[?&]$/,""),r=r.indexOf("?")===-1?r+"?":r+"&",r+n}var Hor=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wor=function(r){Hor(e,r);function e(t){var n=this,i=t||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var a=i.params||{},u="TRANSPARENT"in a?a.TRANSPARENT:!0;return n=r.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:!u,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n.params_=a,n.v13_=!0,n.serverType_=i.serverType,n.hidpi_=i.hidpi!==void 0?i.hidpi:!0,n.tmpExtent_=Di(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return e.prototype.getFeatureInfoUrl=function(t,n,i,o){var a=Jn(i),u=this.getProjection(),h=this.getTileGrid();h||(h=this.getTileGridForProjection(a));var d=h.getZForResolution(n,this.zDirection),v=h.getTileCoordForCoordAndZ(t,d);if(!(h.getResolutions().length<=v[0])){var x=h.getResolution(v[0]),S=h.getTileCoordExtent(v,this.tmpExtent_),A=Un(h.getTileSize(v[0]),this.tmpSize),L=this.gutter_;L!==0&&(A=nZ(A,L,this.tmpSize),S=Zu(S,x*L,S)),u&&u!==a&&(x=TN(u,a,t,x),S=Ev(S,a,u),t=Xu(t,a,u));var q={SERVICE:"WMS",VERSION:MT,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Ur(q,this.params_,o);var R=Math.floor((t[0]-S[0])/x),D=Math.floor((S[3]-t[1])/x);return q[this.v13_?"I":"X"]=R,q[this.v13_?"J":"Y"]=D,this.getRequestUrl_(v,A,S,1,u||a,q)}},e.prototype.getLegendUrl=function(t,n){if(this.urls[0]!==void 0){var i={SERVICE:"WMS",VERSION:MT,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var o=this.params_.LAYERS,a=!Array.isArray(o)||o.length===1;if(!a)return;i.LAYER=o}if(t!==void 0){var u=this.getProjection()?this.getProjection().getMetersPerUnit():1,h=28e-5;i.SCALE=t*u/h}return Ur(i,n),uK(this.urls[0],i)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,n,i,o,a,u){var h=this.urls;if(h){if(u.WIDTH=n[0],u.HEIGHT=n[1],u[this.v13_?"CRS":"SRS"]=a.getCode(),"STYLES"in this.params_||(u.STYLES=""),o!=1)switch(this.serverType_){case"geoserver":var d=90*o+.5|0;"FORMAT_OPTIONS"in u?u.FORMAT_OPTIONS+=";dpi:"+d:u.FORMAT_OPTIONS="dpi:"+d;break;case"mapserver":u.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":u.DPI=90*o;break;default:or(!1,52);break;}var v=a.getAxisOrientation(),x=i;if(this.v13_&&v.substr(0,2)=="ne"){var S=void 0;S=i[0],x[0]=i[1],x[1]=S,S=i[2],x[2]=i[3],x[3]=S}u.BBOX=x.join(",");var A;if(h.length==1)A=h[0];else{var L=yl(MN(t),h.length);A=h[L]}return uK(A,u)}},e.prototype.getTilePixelRatio=function(t){return!this.hidpi_||this.serverType_===void 0?1:t},e.prototype.getKeyForParams_=function(){var t=0,n=[];for(var i in this.params_)n[t++]=i+"-"+this.params_[i];return n.join("/")},e.prototype.updateParams=function(t){Ur(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||MT;this.v13_=Jke(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,n,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=t[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var a=o.getResolution(t[0]),u=o.getTileCoordExtent(t,this.tmpExtent_),h=Un(o.getTileSize(t[0]),this.tmpSize),d=this.gutter_;d!==0&&(h=nZ(h,d,this.tmpSize),u=Zu(u,a*d,u)),n!=1&&(h=WD(h,n,this.tmpSize));var v={SERVICE:"WMS",VERSION:MT,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Ur(v,this.params_),this.getRequestUrl_(t,h,u,n,i,v)}},e}($0),$Ue=Wor;function Zor(r,e){return r.getCoordinates()[0].map(t=>e.getPixelFromCoordinate(t))}var HUe=r=>{let{map:e,layerName:t,onLoad:n=()=>{},wmsUrl:i}=r;return(0,RT.useEffect)(()=>{let o=new zv({source:new $Ue({url:i,params:{LAYERS:t,VERSION:"1.1.1"},projection:e.getView().getProjection()}),preload:1/0,zIndex:1});e.addLayer(o),n(o);let a=h=>{let d=e.getLayers().getArray().find(v=>v.get("key")==="clip");if(d!==void 0&&d.getSource().getFeatures().length>0){let v=Zor(d.getSource().getFeatures()[0].getGeometry(),e),x=1,S=h.context;S.save(),S.beginPath(),S.moveTo(v[0][0]*x,v[0][1]*x);for(let A=1;A<v.length;A++)S.lineTo(v[A][0]*x,v[A][1]*x);S.closePath(),S.clip()}},u=h=>{h.context.restore()};return o.on("prerender",a),o.on("postrender",u),()=>{o.un("prerender",a),o.un("postrender",u),e.removeLayer(o)}},[]),RT.default.createElement(RT.default.Fragment,null)};HUe.propTypes={clipPolygon:ox.default.instanceOf(Ju),layerName:ox.default.string.isRequired,map:ox.default.instanceOf(q0).isRequired,onLoad:ox.default.func,wmsUrl:ox.default.string.isRequired};var WUe=HUe;var ZUe=WUe;var Uv=Me(ht(),1),r9=Me(Qr(),1);var ss=Me(ht(),1);var xt=Me(Qr()),pt=Me(ht()),oar=Me(r3e());function n3e(r){return typeof r=="object"&&r!=null&&r.nodeType===1}function i3e(r,e){return(!e||r!=="hidden")&&r!=="visible"&&r!=="clip"}function fK(r,e){if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){var t=getComputedStyle(r,null);return i3e(t.overflowY,e)||i3e(t.overflowX,e)||function(n){var i=function(o){if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch(a){return null}}(n);return!!i&&(i.clientHeight<n.scrollHeight||i.clientWidth<n.scrollWidth)}(r)}return!1}function j2(r,e,t,n,i,o,a,u){return o<r&&a>e||o>r&&a<e?0:o<=r&&u<=t||a>=e&&u>=t?o-r-n:a>e&&u<t||o<r&&u>t?a-e+i:0}var o3e=function(r,e){var t=window,n=e.scrollMode,i=e.block,o=e.inline,a=e.boundary,u=e.skipOverflowHiddenElements,h=typeof a=="function"?a:function(be){return be!==a};if(!n3e(r))throw new TypeError("Invalid target");for(var d,v,x=document.scrollingElement||document.documentElement,S=[],A=r;n3e(A)&&h(A);){if((A=(v=(d=A).parentElement)==null?d.getRootNode().host||null:v)===x){S.push(A);break}A!=null&&A===document.body&&fK(A)&&!fK(document.documentElement)||A!=null&&fK(A,u)&&S.push(A)}for(var L=t.visualViewport?t.visualViewport.width:innerWidth,q=t.visualViewport?t.visualViewport.height:innerHeight,R=window.scrollX||pageXOffset,D=window.scrollY||pageYOffset,k=r.getBoundingClientRect(),j=k.height,$=k.width,ee=k.top,J=k.right,ie=k.bottom,ue=k.left,le=i==="start"||i==="nearest"?ee:i==="end"?ie:ee+j/2,_e=o==="center"?ue+$/2:o==="end"?J:ue,Re=[],ze=0;ze<S.length;ze++){var qe=S[ze],Ve=qe.getBoundingClientRect(),Ke=Ve.height,Ce=Ve.width,Se=Ve.top,Ie=Ve.right,Ge=Ve.bottom,$e=Ve.left;if(n==="if-needed"&&ee>=0&&ue>=0&&ie<=q&&J<=L&&ee>=Se&&ie<=Ge&&ue>=$e&&J<=Ie)return Re;var Ze=getComputedStyle(qe),Pe=parseInt(Ze.borderLeftWidth,10),at=parseInt(Ze.borderTopWidth,10),wt=parseInt(Ze.borderRightWidth,10),Le=parseInt(Ze.borderBottomWidth,10),Ye=0,je=0,We="offsetWidth"in qe?qe.offsetWidth-qe.clientWidth-Pe-wt:0,tt="offsetHeight"in qe?qe.offsetHeight-qe.clientHeight-at-Le:0,Qe="offsetWidth"in qe?qe.offsetWidth===0?0:Ce/qe.offsetWidth:0,kt="offsetHeight"in qe?qe.offsetHeight===0?0:Ke/qe.offsetHeight:0;if(x===qe)Ye=i==="start"?le:i==="end"?le-q:i==="nearest"?j2(D,D+q,q,at,Le,D+le,D+le+j,j):le-q/2,je=o==="start"?_e:o==="center"?_e-L/2:o==="end"?_e-L:j2(R,R+L,L,Pe,wt,R+_e,R+_e+$,$),Ye=Math.max(0,Ye+D),je=Math.max(0,je+R);else{Ye=i==="start"?le-Se-at:i==="end"?le-Ge+Le+tt:i==="nearest"?j2(Se,Ge,Ke,at,Le+tt,le,le+j,j):le-(Se+Ke/2)+tt/2,je=o==="start"?_e-$e-Pe:o==="center"?_e-($e+Ce/2)+We/2:o==="end"?_e-Ie+wt+We:j2($e,Ie,Ce,Pe,wt+We,_e,_e+$,$);var Gt=qe.scrollLeft,bt=qe.scrollTop;le+=bt-(Ye=Math.max(0,Math.min(bt+Ye/kt,qe.scrollHeight-Ke/kt+tt))),_e+=Gt-(je=Math.max(0,Math.min(Gt+je/Qe,qe.scrollWidth-Ce/Qe+We)))}Re.push({el:qe,top:Ye,left:je})}return Re};var zT=function(){return zT=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zT.apply(this,arguments)};var aar=0;function $T(){}function sar(r,e){if(!r)return;o3e(r,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:i,top:o,left:a}=n;i.scrollTop=o,i.scrollLeft=a})}function a3e(r,e,t){return r===e||e instanceof t.Node&&r.contains&&r.contains(e)}function pK(r,e){let t;function n(){t&&clearTimeout(t)}function i(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];n(),t=setTimeout(()=>{t=null,r(...a)},e)}return i.cancel=n,i}function wo(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return e.some(u=>(u&&u(n,...o),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function of(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return n=>{e.forEach(i=>{typeof i=="function"?i(n):i&&(i.current=n)})}}function lar(){return String(aar++)}function uar(r){let{isOpen:e,resultCount:t,previousResultCount:n}=r;return e?t?t!==n?`${t} result${t===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function z2(r,e){return Object.keys(r).reduce((t,n)=>(t[n]=p3e(e,n)?e[n]:r[n],t),{})}function p3e(r,e){return r[e]!==void 0}function VT(r){let{key:e,keyCode:t}=r;return t>=37&&t<=40&&e.indexOf("Arrow")!==0?`Arrow${e}`:e}function GT(r,e,t,n,i){if(i===void 0&&(i=!0),t===0)return-1;let o=t-1;(typeof e!="number"||e<0||e>=t)&&(e=r>0?-1:o+1);let a=e+r;a<0?a=i?o:0:a>o&&(a=i?0:o);let u=Bv(r,a,t,n,i);return u===-1?e>=t?-1:e:u}function Bv(r,e,t,n,i){let o=n(e);if(!o||!o.hasAttribute("disabled"))return e;if(r>0){for(let a=e+1;a<t;a++)if(!n(a).hasAttribute("disabled"))return a}else for(let a=e-1;a>=0;a--)if(!n(a).hasAttribute("disabled"))return a;return i?r>0?Bv(1,0,t,n,!1):Bv(-1,t-1,t,n,!1):-1}function s3e(r,e,t,n){return n===void 0&&(n=!0),e.some(i=>i&&(a3e(i,r,t)||n&&a3e(i,t.document.activeElement,t)))}var car=pK(r=>{m3e(r).textContent=""},500);function d3e(r,e){let t=m3e(e);r&&(t.textContent=r,car(e))}function m3e(r){r===void 0&&(r=document);let e=r.getElementById("a11y-status-message");return e||(e=r.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),r.body.appendChild(e),e)}var v3e={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function far(r,e,t){let{props:n,type:i}=r,o={};Object.keys(e).forEach(a=>{har(a,r,e,t),t[a]!==e[a]&&(o[a]=t[a])}),n.onStateChange&&Object.keys(o).length&&n.onStateChange(Tt({type:i},o))}function har(r,e,t,n){let{props:i,type:o}=e,a=`on${mK(r)}Change`;i[a]&&n[r]!==void 0&&n[r]!==t[r]&&i[a](Tt({type:o},n))}function par(r,e){return e.changes}function dar(r){let{selectedItem:e,itemToString:t}=r;return e?`${t(e)} has been selected.`:""}var mar=pK((r,e)=>{d3e(r(),e)},200),gar=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?pt.useLayoutEffect:pt.useEffect;function g3e(r){let{id:e=`downshift-${lar()}`,labelId:t,menuId:n,getItemId:i,toggleButtonId:o,inputId:a}=r;return(0,pt.useRef)({labelId:t||`${e}-label`,menuId:n||`${e}-menu`,getItemId:i||(h=>`${e}-item-${h}`),toggleButtonId:o||`${e}-toggle-button`,inputId:a||`${e}-input`}).current}function dK(r,e,t){return r!==void 0?r:t.length===0?-1:t.indexOf(e)}function yar(r){return r?String(r):""}function l3e(r){return /^\S{1}$/.test(r)}function mK(r){return`${r.slice(0,1).toUpperCase()}${r.slice(1)}`}function G2(r){let e=(0,pt.useRef)(r);return e.current=r,e}function y3e(r,e,t){let n=(0,pt.useRef)(),i=(0,pt.useRef)(),o=(0,pt.useCallback)((x,S)=>{i.current=S,x=z2(x,S.props);let A=r(x,S);return S.props.stateReducer(x,En(Tt({},S),{changes:A}))},[r]),[a,u]=(0,pt.useReducer)(o,e),h=G2(t),d=(0,pt.useCallback)(x=>u(Tt({props:h.current},x)),[h]),v=i.current;return(0,pt.useEffect)(()=>{v&&n.current&&n.current!==a&&far(v,z2(n.current,v.props),a),n.current=a},[a,t,v]),[a,d]}function _3e(r,e,t){let[n,i]=y3e(r,e,t);return[z2(n,t),i]}var UT={itemToString:yar,stateReducer:par,getA11ySelectionMessage:dar,scrollIntoView:sar,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function as(r,e,t){t===void 0&&(t=v3e);let n=r[`default${mK(e)}`];return n!==void 0?n:t[e]}function BT(r,e,t){t===void 0&&(t=v3e);let n=r[e];if(n!==void 0)return n;let i=r[`initial${mK(e)}`];return i!==void 0?i:as(r,e,t)}function x3e(r){let e=BT(r,"selectedItem"),t=BT(r,"isOpen"),n=BT(r,"highlightedIndex"),i=BT(r,"inputValue");return{highlightedIndex:n<0&&e&&t?r.items.indexOf(e):n,isOpen:t,selectedItem:e,inputValue:i}}function ax(r,e,t,n){let{items:i,initialHighlightedIndex:o,defaultHighlightedIndex:a}=r,{selectedItem:u,highlightedIndex:h}=e;return i.length===0?-1:o!==void 0&&h===o?o:a!==void 0?a:u?t===0?i.indexOf(u):GT(t,i.indexOf(u),i.length,n,!1):t===0?-1:t<0?i.length-1:0}function w3e(r,e,t,n){let i=(0,pt.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,pt.useEffect)(()=>{let o=()=>{i.current.isMouseDown=!0},a=v=>{i.current.isMouseDown=!1,r&&!s3e(v.target,e.map(x=>x.current),t)&&n()},u=()=>{i.current.isTouchMove=!1},h=()=>{i.current.isTouchMove=!0},d=v=>{r&&!i.current.isTouchMove&&!s3e(v.target,e.map(x=>x.current),t,!1)&&n()};return t.addEventListener("mousedown",o),t.addEventListener("mouseup",a),t.addEventListener("touchstart",u),t.addEventListener("touchmove",h),t.addEventListener("touchend",d),function(){t.removeEventListener("mousedown",o),t.removeEventListener("mouseup",a),t.removeEventListener("touchstart",u),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",d)}},[r,t]),i}var vK=()=>$T;function B2(r,e,t){let h=t,{isInitialMount:n,highlightedIndex:i,items:o,environment:a}=h,u=co(h,["isInitialMount","highlightedIndex","items","environment"]);(0,pt.useEffect)(()=>{n||mar(()=>r(Tt({highlightedIndex:i,highlightedItem:o[i],resultCount:o.length},u)),a.document)},e)}function b3e(r){let{highlightedIndex:e,isOpen:t,itemRefs:n,getItemNodeFromIndex:i,menuElement:o,scrollIntoView:a}=r,u=(0,pt.useRef)(!0);return gar(()=>{e<0||!t||!Object.keys(n.current).length||(u.current===!1?u.current=!0:a(i(e),o))},[e]),u}var gK=$T;function S3e(r,e,t){let{type:n,props:i}=e,o;switch(n){case t.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case t.MenuMouseLeave:o={highlightedIndex:-1};break;case t.ToggleButtonClick:case t.FunctionToggleMenu:o={isOpen:!r.isOpen,highlightedIndex:r.isOpen?-1:ax(i,r,0)};break;case t.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:ax(i,r,0)};break;case t.FunctionCloseMenu:o={isOpen:!1};break;case t.FunctionSetHighlightedIndex:o={highlightedIndex:e.highlightedIndex};break;case t.FunctionSetInputValue:o={inputValue:e.inputValue};break;case t.FunctionReset:o={highlightedIndex:as(i,"highlightedIndex"),isOpen:as(i,"isOpen"),selectedItem:as(i,"selectedItem"),inputValue:as(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.");}return Tt(Tt({},r),o)}function u3e(r){for(var e=r.keysSoFar,t=r.highlightedIndex,n=r.items,i=r.itemToString,o=r.getItemNodeFromIndex,a=e.toLowerCase(),u=0;u<n.length;u++){var h=(u+t+1)%n.length,d=n[h];if(d!==void 0&&i(d).toLowerCase().startsWith(a)){var v=o(h);if(!(v!=null&&v.hasAttribute("disabled")))return h}}return t}var znn={items:xt.default.array.isRequired,itemToString:xt.default.func,getA11yStatusMessage:xt.default.func,getA11ySelectionMessage:xt.default.func,circularNavigation:xt.default.bool,highlightedIndex:xt.default.number,defaultHighlightedIndex:xt.default.number,initialHighlightedIndex:xt.default.number,isOpen:xt.default.bool,defaultIsOpen:xt.default.bool,initialIsOpen:xt.default.bool,selectedItem:xt.default.any,initialSelectedItem:xt.default.any,defaultSelectedItem:xt.default.any,id:xt.default.string,labelId:xt.default.string,menuId:xt.default.string,getItemId:xt.default.func,toggleButtonId:xt.default.string,stateReducer:xt.default.func,onSelectedItemChange:xt.default.func,onHighlightedIndexChange:xt.default.func,onStateChange:xt.default.func,onIsOpenChange:xt.default.func,environment:xt.default.shape({addEventListener:xt.default.func,removeEventListener:xt.default.func,document:xt.default.shape({getElementById:xt.default.func,activeElement:xt.default.any,body:xt.default.any})})};function _ar(r){var e=r.isOpen,t=r.resultCount,n=r.previousResultCount;return e?t?t!==n?"".concat(t," result").concat(t===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var xar=zT(zT({},UT),{getA11yStatusMessage:_ar}),war=$T,yK=0,_K=1,xK=2,wK=3,bK=4,SK=5,EK=6,TK=7,U2=8,E3e=9,T3e=10,IK=11,I3e=12,AK=13,CK=14,MK=15,A3e=16,C3e=17,M3e=18,R3e=19,RK=20,hK=21,P3e=22,O3e=Object.freeze({__proto__:null,MenuKeyDownArrowDown:yK,MenuKeyDownArrowUp:_K,MenuKeyDownEscape:xK,MenuKeyDownHome:wK,MenuKeyDownEnd:bK,MenuKeyDownEnter:SK,MenuKeyDownSpaceButton:EK,MenuKeyDownCharacter:TK,MenuBlur:U2,MenuMouseLeave:E3e,ItemMouseMove:T3e,ItemClick:IK,ToggleButtonClick:I3e,ToggleButtonKeyDownArrowDown:AK,ToggleButtonKeyDownArrowUp:CK,ToggleButtonKeyDownCharacter:MK,FunctionToggleMenu:A3e,FunctionOpenMenu:C3e,FunctionCloseMenu:M3e,FunctionSetHighlightedIndex:R3e,FunctionSelectItem:RK,FunctionSetInputValue:hK,FunctionReset:P3e});function bar(r,e){let{type:t,props:n,shiftKey:i}=e,o;switch(t){case IK:o={isOpen:as(n,"isOpen"),highlightedIndex:as(n,"highlightedIndex"),selectedItem:n.items[e.index]};break;case MK:{let a=e.key,u=`${r.inputValue}${a}`,h=u3e({keysSoFar:u,highlightedIndex:r.selectedItem?n.items.indexOf(r.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=Tt({inputValue:u},h>=0&&{selectedItem:n.items[h]})}break;case AK:o={highlightedIndex:ax(n,r,1,e.getItemNodeFromIndex),isOpen:!0};break;case CK:o={highlightedIndex:ax(n,r,-1,e.getItemNodeFromIndex),isOpen:!0};break;case SK:case EK:o=Tt({isOpen:as(n,"isOpen"),highlightedIndex:as(n,"highlightedIndex")},r.highlightedIndex>=0&&{selectedItem:n.items[r.highlightedIndex]});break;case wK:o={highlightedIndex:Bv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case bK:o={highlightedIndex:Bv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case xK:o={isOpen:!1,highlightedIndex:-1};break;case U2:o={isOpen:!1,highlightedIndex:-1};break;case TK:{let a=e.key,u=`${r.inputValue}${a}`,h=u3e({keysSoFar:u,highlightedIndex:r.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=Tt({inputValue:u},h>=0&&{highlightedIndex:h})}break;case yK:o={highlightedIndex:GT(i?5:1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case _K:o={highlightedIndex:GT(i?-5:-1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case RK:o={selectedItem:e.selectedItem};break;default:return S3e(r,e,O3e);}return Tt(Tt({},r),o)}L3e.stateChangeTypes=O3e;function L3e(r){r===void 0&&(r={}),war(r,L3e);let e=Tt(Tt({},xar),r),{items:t,scrollIntoView:n,environment:i,initialIsOpen:o,defaultIsOpen:a,itemToString:u,getA11ySelectionMessage:h,getA11yStatusMessage:d}=e,v=x3e(e),[x,S]=_3e(bar,v,e),{isOpen:A,highlightedIndex:L,selectedItem:q,inputValue:R}=x,D=(0,pt.useRef)(null),k=(0,pt.useRef)(null),j=(0,pt.useRef)({}),$=(0,pt.useRef)(!0),ee=(0,pt.useRef)(null),J=g3e(e),ie=(0,pt.useRef)(),ue=(0,pt.useRef)(!0),le=G2({state:x,props:e}),_e=(0,pt.useCallback)(je=>j.current[J.getItemId(je)],[J]);B2(d,[A,L,R,t],Tt({isInitialMount:ue.current,previousResultCount:ie.current,items:t,environment:i,itemToString:u},x)),B2(h,[q],Tt({isInitialMount:ue.current,previousResultCount:ie.current,items:t,environment:i,itemToString:u},x));let Re=b3e({menuElement:k.current,highlightedIndex:L,isOpen:A,itemRefs:j,scrollIntoView:n,getItemNodeFromIndex:_e});(0,pt.useEffect)(()=>(ee.current=pK(je=>{je({type:hK,inputValue:""})},500),()=>{ee.current.cancel()}),[]),(0,pt.useEffect)(()=>{R&&ee.current(S)},[S,R]),gK({isInitialMount:ue.current,props:e,state:x}),(0,pt.useEffect)(()=>{if(ue.current){(o||a||A)&&k.current&&k.current.focus();return}if(A){k.current&&k.current.focus();return}i.document.activeElement===k.current&&D.current&&($.current=!1,D.current.focus())},[A]),(0,pt.useEffect)(()=>{ue.current||(ie.current=t.length)});let ze=w3e(A,[k,D],i,()=>{S({type:U2})}),qe=vK("getMenuProps","getToggleButtonProps");(0,pt.useEffect)(()=>{ue.current=!1},[]),(0,pt.useEffect)(()=>{A||(j.current={})},[A]);let Ve=(0,pt.useMemo)(()=>({ArrowDown(je){je.preventDefault(),S({type:AK,getItemNodeFromIndex:_e,shiftKey:je.shiftKey})},ArrowUp(je){je.preventDefault(),S({type:CK,getItemNodeFromIndex:_e,shiftKey:je.shiftKey})}}),[S,_e]),Ke=(0,pt.useMemo)(()=>({ArrowDown(je){je.preventDefault(),S({type:yK,getItemNodeFromIndex:_e,shiftKey:je.shiftKey})},ArrowUp(je){je.preventDefault(),S({type:_K,getItemNodeFromIndex:_e,shiftKey:je.shiftKey})},Home(je){je.preventDefault(),S({type:wK,getItemNodeFromIndex:_e})},End(je){je.preventDefault(),S({type:bK,getItemNodeFromIndex:_e})},Escape(){S({type:xK})},Enter(je){je.preventDefault(),S({type:SK})}," "(je){je.preventDefault(),S({type:EK})}}),[S,_e]),Ce=(0,pt.useCallback)(()=>{S({type:A3e})},[S]),Se=(0,pt.useCallback)(()=>{S({type:M3e})},[S]),Ie=(0,pt.useCallback)(()=>{S({type:C3e})},[S]),Ge=(0,pt.useCallback)(je=>{S({type:R3e,highlightedIndex:je})},[S]),$e=(0,pt.useCallback)(je=>{S({type:RK,selectedItem:je})},[S]),Ze=(0,pt.useCallback)(()=>{S({type:P3e})},[S]),Pe=(0,pt.useCallback)(je=>{S({type:hK,inputValue:je})},[S]),at=(0,pt.useCallback)(je=>Tt({id:J.labelId,htmlFor:J.toggleButtonId},je),[J]),wt=(0,pt.useCallback)(function(je,We){let Xt=je===void 0?{}:je,{onMouseLeave:tt,refKey:Qe="ref",onKeyDown:kt,onBlur:Gt,ref:bt}=Xt,be=co(Xt,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:Yt=!1}=We===void 0?{}:We,Ut=le.current.state,Vt=lr=>{let Pr=VT(lr);Pr&&Ke[Pr]?Ke[Pr](lr):l3e(Pr)&&S({type:TK,key:Pr,getItemNodeFromIndex:_e})},nr=()=>{if($.current===!1){$.current=!0;return}!ze.current.isMouseDown&&S({type:U2})},yr=()=>{S({type:E3e})};return qe("getMenuProps",Yt,Qe,k),Tt(En(Tt({[Qe]:of(bt,lr=>{k.current=lr}),id:J.menuId,role:"listbox","aria-labelledby":J.labelId,tabIndex:-1},Ut.isOpen&&Ut.highlightedIndex>-1&&{"aria-activedescendant":J.getItemId(Ut.highlightedIndex)}),{onMouseLeave:wo(tt,yr),onKeyDown:wo(kt,Vt),onBlur:wo(Gt,nr)}),be)},[S,le,Ke,ze,qe,J,_e]),Le=(0,pt.useCallback)(function(je,We){let nr=je===void 0?{}:je,{onClick:tt,onKeyDown:Qe,refKey:kt="ref",ref:Gt}=nr,bt=co(nr,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:be=!1}=We===void 0?{}:We,Yt=()=>{S({type:I3e})},Ut=yr=>{let Xt=VT(yr);Xt&&Ve[Xt]?Ve[Xt](yr):l3e(Xt)&&S({type:MK,key:Xt,getItemNodeFromIndex:_e})},Vt=Tt({[kt]:of(Gt,yr=>{D.current=yr}),id:J.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":le.current.state.isOpen,"aria-labelledby":`${J.labelId} ${J.toggleButtonId}`},bt);return bt.disabled||(Vt.onClick=wo(tt,Yt),Vt.onKeyDown=wo(Qe,Ut)),qe("getToggleButtonProps",be,kt,D),Vt},[S,le,Ve,qe,J,_e]),Ye=(0,pt.useCallback)(function(je){let Pr=je===void 0?{}:je,{item:We,index:tt,onMouseMove:Qe,onClick:kt,refKey:Gt="ref",ref:bt,disabled:be}=Pr,Yt=co(Pr,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Ut,props:Vt}=le.current,nr=()=>{tt!==Ut.highlightedIndex&&(Re.current=!1,S({type:T3e,index:tt,disabled:be}))},yr=()=>{S({type:IK,index:tt})},Xt=dK(tt,We,Vt.items);if(Xt<0)throw new Error("Pass either item or item index in getItemProps!");let lr=Tt({disabled:be,role:"option","aria-selected":`${Xt===Ut.highlightedIndex}`,id:J.getItemId(Xt),[Gt]:of(bt,nn=>{nn&&(j.current[J.getItemId(Xt)]=nn)})},Yt);return be||(lr.onClick=wo(kt,yr)),lr.onMouseMove=wo(Qe,nr),lr},[S,le,Re,J]);return{getToggleButtonProps:Le,getLabelProps:at,getMenuProps:wt,getItemProps:Ye,toggleMenu:Ce,openMenu:Ie,closeMenu:Se,setHighlightedIndex:Ge,selectItem:$e,reset:Ze,setInputValue:Pe,highlightedIndex:L,isOpen:A,selectedItem:q,inputValue:R}}var PK=0,OK=1,LK=2,DK=3,NK=4,qK=5,kK=6,V2=7,D3e=8,N3e=9,FK=10,q3e=11,k3e=12,F3e=13,j3e=14,z3e=15,jK=16,B3e=17,U3e=18,zK=19,V3e=Object.freeze({__proto__:null,InputKeyDownArrowDown:PK,InputKeyDownArrowUp:OK,InputKeyDownEscape:LK,InputKeyDownHome:DK,InputKeyDownEnd:NK,InputKeyDownEnter:qK,InputChange:kK,InputBlur:V2,MenuMouseLeave:D3e,ItemMouseMove:N3e,ItemClick:FK,ToggleButtonClick:q3e,FunctionToggleMenu:k3e,FunctionOpenMenu:F3e,FunctionCloseMenu:j3e,FunctionSetHighlightedIndex:z3e,FunctionSelectItem:jK,FunctionSetInputValue:B3e,FunctionReset:U3e,ControlledPropUpdatedSelectedItem:zK});function Sar(r){let e=x3e(r),{selectedItem:t}=e,{inputValue:n}=e;return n===""&&t&&r.defaultInputValue===void 0&&r.initialInputValue===void 0&&r.inputValue===void 0&&(n=r.itemToString(t)),En(Tt({},e),{inputValue:n})}var Bnn={items:xt.default.array.isRequired,itemToString:xt.default.func,getA11yStatusMessage:xt.default.func,getA11ySelectionMessage:xt.default.func,circularNavigation:xt.default.bool,highlightedIndex:xt.default.number,defaultHighlightedIndex:xt.default.number,initialHighlightedIndex:xt.default.number,isOpen:xt.default.bool,defaultIsOpen:xt.default.bool,initialIsOpen:xt.default.bool,selectedItem:xt.default.any,initialSelectedItem:xt.default.any,defaultSelectedItem:xt.default.any,inputValue:xt.default.string,defaultInputValue:xt.default.string,initialInputValue:xt.default.string,id:xt.default.string,labelId:xt.default.string,menuId:xt.default.string,getItemId:xt.default.func,inputId:xt.default.string,toggleButtonId:xt.default.string,stateReducer:xt.default.func,onSelectedItemChange:xt.default.func,onHighlightedIndexChange:xt.default.func,onStateChange:xt.default.func,onIsOpenChange:xt.default.func,onInputValueChange:xt.default.func,environment:xt.default.shape({addEventListener:xt.default.func,removeEventListener:xt.default.func,document:xt.default.shape({getElementById:xt.default.func,activeElement:xt.default.any,body:xt.default.any})})};function Ear(r,e,t){let n=(0,pt.useRef)(),[i,o]=y3e(r,e,t);return(0,pt.useEffect)(()=>{p3e(t,"selectedItem")&&(n.current!==t.selectedItem&&o({type:zK,inputValue:t.itemToString(t.selectedItem)}),n.current=i.selectedItem===n.current?t.selectedItem:i.selectedItem)}),[z2(i,t),o]}var Tar=$T,Iar=En(Tt({},UT),{getA11yStatusMessage:uar,circularNavigation:!0});function Aar(r,e){let{type:t,props:n,shiftKey:i}=e,o;switch(t){case FK:o={isOpen:as(n,"isOpen"),highlightedIndex:as(n,"highlightedIndex"),selectedItem:n.items[e.index],inputValue:n.itemToString(n.items[e.index])};break;case PK:r.isOpen?o={highlightedIndex:GT(i?5:1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:ax(n,r,1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case OK:r.isOpen?o={highlightedIndex:GT(i?-5:-1,r.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:ax(n,r,-1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case qK:o=Tt({},r.isOpen&&r.highlightedIndex>=0&&{selectedItem:n.items[r.highlightedIndex],isOpen:as(n,"isOpen"),highlightedIndex:as(n,"highlightedIndex"),inputValue:n.itemToString(n.items[r.highlightedIndex])});break;case LK:o=Tt({isOpen:!1,highlightedIndex:-1},!r.isOpen&&{selectedItem:null,inputValue:""});break;case DK:o={highlightedIndex:Bv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case NK:o={highlightedIndex:Bv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case V2:o=Tt({isOpen:!1,highlightedIndex:-1},r.highlightedIndex>=0&&e.selectItem&&{selectedItem:n.items[r.highlightedIndex],inputValue:n.itemToString(n.items[r.highlightedIndex])});break;case kK:o={isOpen:!0,highlightedIndex:as(n,"highlightedIndex"),inputValue:e.inputValue};break;case jK:o={selectedItem:e.selectedItem,inputValue:n.itemToString(e.selectedItem)};break;case zK:o={inputValue:e.inputValue};break;default:return S3e(r,e,V3e);}return Tt(Tt({},r),o)}$2.stateChangeTypes=V3e;function $2(r){r===void 0&&(r={}),Tar(r,$2);let e=Tt(Tt({},Iar),r),{initialIsOpen:t,defaultIsOpen:n,items:i,scrollIntoView:o,environment:a,getA11yStatusMessage:u,getA11ySelectionMessage:h,itemToString:d}=e,v=Sar(e),[x,S]=Ear(Aar,v,e),{isOpen:A,highlightedIndex:L,selectedItem:q,inputValue:R}=x,D=(0,pt.useRef)(null),k=(0,pt.useRef)({}),j=(0,pt.useRef)(null),$=(0,pt.useRef)(null),ee=(0,pt.useRef)(null),J=(0,pt.useRef)(!0),ie=g3e(e),ue=(0,pt.useRef)(),le=G2({state:x,props:e}),_e=(0,pt.useCallback)(We=>k.current[ie.getItemId(We)],[ie]);B2(u,[A,L,R,i],Tt({isInitialMount:J.current,previousResultCount:ue.current,items:i,environment:a,itemToString:d},x)),B2(h,[q],Tt({isInitialMount:J.current,previousResultCount:ue.current,items:i,environment:a,itemToString:d},x));let Re=b3e({menuElement:D.current,highlightedIndex:L,isOpen:A,itemRefs:k,scrollIntoView:o,getItemNodeFromIndex:_e});gK({isInitialMount:J.current,props:e,state:x}),(0,pt.useEffect)(()=>{(t||n||A)&&j.current&&j.current.focus()},[]),(0,pt.useEffect)(()=>{J.current||(ue.current=i.length)});let ze=w3e(A,[ee,D,$],a,()=>{S({type:V2,selectItem:!1})}),qe=vK("getInputProps","getComboboxProps","getMenuProps");(0,pt.useEffect)(()=>{J.current=!1},[]),(0,pt.useEffect)(()=>{A||(k.current={})},[A]);let Ve=(0,pt.useMemo)(()=>({ArrowDown(We){We.preventDefault(),S({type:PK,shiftKey:We.shiftKey,getItemNodeFromIndex:_e})},ArrowUp(We){We.preventDefault(),S({type:OK,shiftKey:We.shiftKey,getItemNodeFromIndex:_e})},Home(We){le.current.state.isOpen&&(We.preventDefault(),S({type:DK,getItemNodeFromIndex:_e}))},End(We){le.current.state.isOpen&&(We.preventDefault(),S({type:NK,getItemNodeFromIndex:_e}))},Escape(We){let tt=le.current.state;(tt.isOpen||tt.inputValue||tt.selectedItem||tt.highlightedIndex>-1)&&(We.preventDefault(),S({type:LK}))},Enter(We){let tt=le.current.state;!tt.isOpen||tt.highlightedIndex<0||We.which===229||(We.preventDefault(),S({type:qK,getItemNodeFromIndex:_e}))}}),[S,le,_e]),Ke=(0,pt.useCallback)(We=>Tt({id:ie.labelId,htmlFor:ie.inputId},We),[ie]),Ce=(0,pt.useCallback)(function(We,tt){let Yt=We===void 0?{}:We,{onMouseLeave:Qe,refKey:kt="ref",ref:Gt}=Yt,bt=co(Yt,["onMouseLeave","refKey","ref"]),{suppressRefError:be=!1}=tt===void 0?{}:tt;return qe("getMenuProps",be,kt,D),Tt({[kt]:of(Gt,Ut=>{D.current=Ut}),id:ie.menuId,role:"listbox","aria-labelledby":ie.labelId,onMouseLeave:wo(Qe,()=>{S({type:D3e})})},bt)},[S,qe,ie]),Se=(0,pt.useCallback)(function(We){let ti=We===void 0?{}:We,{item:tt,index:Qe,refKey:kt="ref",ref:Gt,onMouseMove:bt,onMouseDown:be,onClick:Yt,onPress:Ut,disabled:Vt}=ti,nr=co(ti,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:yr,state:Xt}=le.current,lr=dK(Qe,tt,yr.items);if(lr<0)throw new Error("Pass either item or item index in getItemProps!");let Pr="onClick",nn=Yt,An=()=>{Qe!==Xt.highlightedIndex&&(Re.current=!1,S({type:N3e,index:Qe,disabled:Vt}))},Ai=()=>{S({type:FK,index:Qe})},nt=Cn=>Cn.preventDefault();return Tt(En(Tt({[kt]:of(Gt,Cn=>{Cn&&(k.current[ie.getItemId(lr)]=Cn)}),disabled:Vt,role:"option","aria-selected":`${lr===Xt.highlightedIndex}`,id:ie.getItemId(lr)},!Vt&&{[Pr]:wo(nn,Ai)}),{onMouseMove:wo(bt,An),onMouseDown:wo(be,nt)}),nr)},[S,le,Re,ie]),Ie=(0,pt.useCallback)(function(We){let Yt=We===void 0?{}:We,{onClick:tt,onPress:Qe,refKey:kt="ref",ref:Gt}=Yt,bt=co(Yt,["onClick","onPress","refKey","ref"]),be=()=>{S({type:q3e}),!le.current.state.isOpen&&j.current&&j.current.focus()};return Tt(Tt({[kt]:of(Gt,Ut=>{$.current=Ut}),id:ie.toggleButtonId,tabIndex:-1},!bt.disabled&&{onClick:wo(tt,be)}),bt)},[S,le,ie]),Ge=(0,pt.useCallback)(function(We,tt){let Ai=We===void 0?{}:We,{onKeyDown:Qe,onChange:kt,onInput:Gt,onBlur:bt,onChangeText:be,refKey:Yt="ref",ref:Ut}=Ai,Vt=co(Ai,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:nr=!1}=tt===void 0?{}:tt;qe("getInputProps",nr,Yt,j);let yr=le.current.state,Xt=nt=>{let ti=VT(nt);ti&&Ve[ti]&&Ve[ti](nt)},lr=nt=>{S({type:kK,inputValue:nt.target.value})},Pr=()=>{yr.isOpen&&!ze.current.isMouseDown&&S({type:V2,selectItem:!0})},nn="onChange",An={};return Vt.disabled||(An={[nn]:wo(kt,Gt,lr),onKeyDown:wo(Qe,Xt),onBlur:wo(bt,Pr)}),Tt(Tt(En(Tt({[Yt]:of(Ut,nt=>{j.current=nt}),id:ie.inputId,"aria-autocomplete":"list","aria-controls":ie.menuId},yr.isOpen&&yr.highlightedIndex>-1&&{"aria-activedescendant":ie.getItemId(yr.highlightedIndex)}),{"aria-labelledby":ie.labelId,autoComplete:"off",value:yr.inputValue}),An),Vt)},[S,Ve,le,ze,qe,ie]),$e=(0,pt.useCallback)(function(We,tt){let be=We===void 0?{}:We,{refKey:Qe="ref",ref:kt}=be,Gt=co(be,["refKey","ref"]),{suppressRefError:bt=!1}=tt===void 0?{}:tt;return qe("getComboboxProps",bt,Qe,ee),Tt({[Qe]:of(kt,Yt=>{ee.current=Yt}),role:"combobox","aria-haspopup":"listbox","aria-owns":ie.menuId,"aria-expanded":le.current.state.isOpen},Gt)},[le,qe,ie]),Ze=(0,pt.useCallback)(()=>{S({type:k3e})},[S]),Pe=(0,pt.useCallback)(()=>{S({type:j3e})},[S]),at=(0,pt.useCallback)(()=>{S({type:F3e})},[S]),wt=(0,pt.useCallback)(We=>{S({type:z3e,highlightedIndex:We})},[S]),Le=(0,pt.useCallback)(We=>{S({type:jK,selectedItem:We})},[S]),Ye=(0,pt.useCallback)(We=>{S({type:B3e,inputValue:We})},[S]),je=(0,pt.useCallback)(()=>{S({type:U3e})},[S]);return{getItemProps:Se,getLabelProps:Ke,getMenuProps:Ce,getInputProps:Ge,getComboboxProps:$e,getToggleButtonProps:Ie,toggleMenu:Ze,openMenu:at,closeMenu:Pe,setHighlightedIndex:wt,setInputValue:Ye,selectItem:Le,reset:je,highlightedIndex:L,isOpen:A,selectedItem:q,inputValue:R}}var G3e={activeIndex:-1,selectedItems:[]};function c3e(r,e){return BT(r,e,G3e)}function f3e(r,e){return as(r,e,G3e)}function Car(r){let e=c3e(r,"activeIndex"),t=c3e(r,"selectedItems");return{activeIndex:e,selectedItems:t}}function h3e(r){if(r.shiftKey||r.metaKey||r.ctrlKey||r.altKey)return!1;let e=r.target;return!(e instanceof HTMLInputElement&&e.value!==""&&(e.selectionStart!==0||e.selectionEnd!==0))}function Mar(r){let{removedSelectedItem:e,itemToString:t}=r;return`${t(e)} has been removed.`}var Unn={selectedItems:xt.default.array,initialSelectedItems:xt.default.array,defaultSelectedItems:xt.default.array,itemToString:xt.default.func,getA11yRemovalMessage:xt.default.func,stateReducer:xt.default.func,activeIndex:xt.default.number,initialActiveIndex:xt.default.number,defaultActiveIndex:xt.default.number,onActiveIndexChange:xt.default.func,onSelectedItemsChange:xt.default.func,keyNavigationNext:xt.default.string,keyNavigationPrevious:xt.default.string,environment:xt.default.shape({addEventListener:xt.default.func,removeEventListener:xt.default.func,document:xt.default.shape({getElementById:xt.default.func,activeElement:xt.default.any,body:xt.default.any})})},Rar={itemToString:UT.itemToString,stateReducer:UT.stateReducer,environment:UT.environment,getA11yRemovalMessage:Mar,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},Par=$T,BK=0,UK=1,VK=2,GK=3,$K=4,HK=5,WK=6,ZK=7,YK=8,KK=9,XK=10,JK=11,QK=12,Oar=Object.freeze({__proto__:null,SelectedItemClick:BK,SelectedItemKeyDownDelete:UK,SelectedItemKeyDownBackspace:VK,SelectedItemKeyDownNavigationNext:GK,SelectedItemKeyDownNavigationPrevious:$K,DropdownKeyDownNavigationPrevious:HK,DropdownKeyDownBackspace:WK,DropdownClick:ZK,FunctionAddSelectedItem:YK,FunctionRemoveSelectedItem:KK,FunctionSetSelectedItems:XK,FunctionSetActiveIndex:JK,FunctionReset:QK});function Lar(r,e){let{type:t,index:n,props:i,selectedItem:o}=e,{activeIndex:a,selectedItems:u}=r,h;switch(t){case BK:h={activeIndex:n};break;case $K:h={activeIndex:a-1<0?0:a-1};break;case GK:h={activeIndex:a+1>=u.length?-1:a+1};break;case VK:case UK:{let d=a;u.length===1?d=-1:a===u.length-1&&(d=u.length-2),h={selectedItems:[...u.slice(0,a),...u.slice(a+1)],activeIndex:d};break}case HK:h={activeIndex:u.length-1};break;case WK:h={selectedItems:u.slice(0,u.length-1)};break;case YK:h={selectedItems:[...u,o]};break;case ZK:h={activeIndex:-1};break;case KK:{let d=a,v=u.indexOf(o);v>=0&&(u.length===1?d=-1:v===u.length-1&&(d=u.length-2),h={selectedItems:[...u.slice(0,v),...u.slice(v+1)],activeIndex:d});break}case XK:{let{selectedItems:d}=e;h={selectedItems:d};break}case JK:{let{activeIndex:d}=e;h={activeIndex:d};break}case QK:h={activeIndex:f3e(i,"activeIndex"),selectedItems:f3e(i,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.");}return Tt(Tt({},r),h)}$3e.stateChangeTypes=Oar;function $3e(r){r===void 0&&(r={}),Par(r,$3e);let e=Tt(Tt({},Rar),r),{getA11yRemovalMessage:t,itemToString:n,environment:i,keyNavigationNext:o,keyNavigationPrevious:a}=e,[u,h]=_3e(Lar,Car(e),e),{activeIndex:d,selectedItems:v}=u,x=(0,pt.useRef)(!0),S=(0,pt.useRef)(null),A=(0,pt.useRef)(v),L=(0,pt.useRef)();L.current=[];let q=G2({state:u,props:e});(0,pt.useEffect)(()=>{if(!x.current){if(v.length<A.current.length){let _e=A.current.find(Re=>v.indexOf(Re)<0);d3e(t({itemToString:n,resultCount:v.length,removedSelectedItem:_e,activeIndex:d,activeSelectedItem:v[d]}),i.document)}A.current=v}},[v.length]),(0,pt.useEffect)(()=>{x.current||(d===-1&&S.current?S.current.focus():L.current[d]&&L.current[d].focus())},[d]),gK({isInitialMount:x.current,props:e,state:u});let R=vK("getDropdownProps");(0,pt.useEffect)(()=>{x.current=!1},[]);let D=(0,pt.useMemo)(()=>({[a](){h({type:$K})},[o](){h({type:GK})},Delete(){h({type:UK})},Backspace(){h({type:VK})}}),[h,o,a]),k=(0,pt.useMemo)(()=>({[a](_e){h3e(_e)&&h({type:HK})},Backspace(_e){h3e(_e)&&h({type:WK})}}),[h,a]),j=(0,pt.useCallback)(function(_e){let Pe=_e===void 0?{}:_e,{refKey:Re="ref",ref:ze,onClick:qe,onKeyDown:Ve,selectedItem:Ke,index:Ce}=Pe,Se=co(Pe,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:Ie}=q.current;if(dK(Ce,Ke,Ie.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let $e=()=>{h({type:BK,index:Ce})},Ze=at=>{let wt=VT(at);wt&&D[wt]&&D[wt](at)};return Tt({[Re]:of(ze,at=>{at&&L.current.push(at)}),tabIndex:Ce===Ie.activeIndex?0:-1,onClick:wo(qe,$e),onKeyDown:wo(Ve,Ze)},Se)},[h,q,D]),$=(0,pt.useCallback)(function(_e,Re){let Ze=_e===void 0?{}:_e,{refKey:ze="ref",ref:qe,onKeyDown:Ve,onClick:Ke,preventKeyAction:Ce=!1}=Ze,Se=co(Ze,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:Ie=!1}=Re===void 0?{}:Re;R("getDropdownProps",Ie,ze,S);let Ge=Pe=>{let at=VT(Pe);at&&k[at]&&k[at](Pe)},$e=()=>{h({type:ZK})};return Tt(Tt({[ze]:of(qe,Pe=>{Pe&&(S.current=Pe)})},!Ce&&{onKeyDown:wo(Ve,Ge),onClick:wo(Ke,$e)}),Se)},[h,k,R]),ee=(0,pt.useCallback)(_e=>{h({type:YK,selectedItem:_e})},[h]),J=(0,pt.useCallback)(_e=>{h({type:KK,selectedItem:_e})},[h]),ie=(0,pt.useCallback)(_e=>{h({type:XK,selectedItems:_e})},[h]),ue=(0,pt.useCallback)(_e=>{h({type:JK,activeIndex:_e})},[h]),le=(0,pt.useCallback)(()=>{h({type:QK})},[h]);return{getSelectedItemProps:j,getDropdownProps:$,addSelectedItem:ee,removeSelectedItem:J,setSelectedItems:ie,setActiveIndex:ue,reset:le,selectedItems:v,activeIndex:d}}var Vd=Me(Qr(),1);function e9({buttonProps:r,fetchInputItems:e,label:t,itemToString:n,inputProps:i,onSelectedItemChange:o,timeout:a=300}){let[u,h]=(0,ss.useState)([]),[d,v]=(0,ss.useState)(void 0),x=(0,ss.useRef)(),S=(0,ss.useRef)(null),A=Ve=>{clearTimeout(S.current),S.current=setTimeout(()=>{e(Ve).then(Ke=>h(Ke))},a)},L=({inputValue:Ve})=>{d!==void 0&&v(void 0),A(Ve)},q=({selectedItem:Ve})=>{o!==void 0&&o(Ve),v(Ve)},{isOpen:R,getToggleButtonProps:D,getLabelProps:k,getMenuProps:j,getInputProps:$,getComboboxProps:ee,getItemProps:J,highlightedIndex:ie}=$2({items:u,itemToString:n,onInputValueChange:L,onSelectedItemChange:q}),ze=r!=null?r:{},{onClick:ue}=ze,le=co(ze,["onClick"]),qe=$(),{ref:_e}=qe,Re=co(qe,["ref"]);return ss.default.createElement("div",{className:"vkf-autocomplete-container"},ss.default.createElement("label",En(Tt({},k()),{id:Re["aria-labelledby"],className:"visually-hidden"}),t!==void 0?t:i.placeholder),ss.default.createElement("div",Tt({className:"form-group"},ee()),ss.default.createElement("input",Tt(En(Tt({},Re),{ref:Ve=>{_e(Ve),x.current=Ve},type:"text"}),i)),ss.default.createElement("button",Tt(Tt(En(Tt({type:"button"},D()),{"aria-label":"toggle menu"}),le),ue!==void 0?{onClick:()=>{ue(d,x.current!==null?x.current.value:"")}}:{}),"\u2193")),ss.default.createElement("div",{className:"autocomplete-dropdown"},ss.default.createElement("ul",En(Tt({className:"autocomplete-result-list"},j()),{id:Re["aria-controls"]}),R&&u.map((Ve,Ke)=>ss.default.createElement("li",Tt({className:Os("ui-menu-item",ie===Ke&&"highlighted",d===Ve&&"selected"),key:`${Ve.label}${Ke}`},J({item:Ve,index:Ke})),Ve.label)))))}e9.propTypes={buttonProps:Vd.default.object,fetchInputItems:Vd.default.func,label:Vd.default.string,inputProps:Vd.default.object,itemToString:Vd.default.func,onSelectedItemChange:Vd.default.func,timeout:Vd.default.number};var H3e=Me(IS(),1),t9=(r,e,t)=>{let n=r+"?format=json&q="+e;return H3e.default.get(n).then(i=>{let a=i.data.map(u=>({label:u.display_name,value:u.display_name,lonlat:{x:parseFloat(u.lon),y:parseFloat(u.lat)},type:u.type}));return t!==void 0&&t(),a})};var Dar=r=>r?r.label:"",W3e=r=>{let{onSelectPosition:e,searchUrl:t}=r,[n,i]=(0,Uv.useState)(!1),o=Ql(ud),a=(0,Uv.useCallback)(h=>(i(!0),t9(t,h,()=>{i(!1)})),[t]),u=(h,d)=>{h!==void 0?e(h):t9(t,d).then(v=>{if(v.length>0)e(v[0]);else throw new Error(Tr("placenamesearch-unknown-placename"))}).catch(()=>{o({id:"placenamesearch",type:"warning",text:Tr("placenamesearch-unknown-placename")})})};return Uv.default.createElement("div",{className:"gazetteersearch-container"},Uv.default.createElement(e9,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:u,"aria-label":Tr("placenamesearch-submit"),title:Tr("placenamesearch-submit")},fetchInputItems:a,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:Tr("placenamesearch-placeholder")},itemToString:Dar,onSelectedItemChange:u}))};W3e.propTypes={onSelectPosition:r9.default.func.isRequired,searchUrl:r9.default.string.isRequired};var Z3e=W3e;var wu=Me(ht(),1),sx=Me(Qr(),1);var Y3e=r=>{let{onEndDrag:e,onStartDrag:t,orientation:n="horizontal",layer:i}=r,[o,a]=(0,wu.useState)(i.getOpacity()*100),u=(0,wu.useRef)(null),h=0,d=100,v=(A,L)=>{if(n==="vertical"){var q=100-(A-h)/(d-h)*100;L.style.top=q+"%",L.innerHTML=A.toFixed(0)+"%";return}let R=(A-h)/(d-h)*100;L.style.left=R+"%",L.innerHTML=A+"%"},x=A=>{let L=A.target.getOpacity()*100;a(L)},S=A=>{a(A),i.setOpacity(A/100)};return(0,wu.useEffect)(()=>{v(Math.round(o),u.current)},[o]),(0,wu.useEffect)(()=>(i.on("change:opacity",x),()=>{i.un("change:opacity",x)})),wu.default.createElement("div",{className:"opacity-container"},wu.default.createElement("div",{className:"slider-container"},wu.default.createElement(N2,{onAfterChange:e,onBeforeChange:t,onChange:S,value:o,vertical:n==="vertical"}),wu.default.createElement("div",{className:"tooltip value",ref:u},"100%")))};Y3e.propTypes={onEndDrag:sx.default.func,onStartDrag:sx.default.func,layer:sx.default.oneOfType([sx.default.instanceOf(zv)]),orientation:sx.default.oneOf(["horizontal","vertical"])};var K3e=Y3e;var X3e=r=>{let{extent:e,urlNominatim:t,urlsOsmBaseMap:n}=r,i=Jl(AO),[o,a]=(0,af.useState)(null),[u,h]=EO(MO);return af.default.createElement("div",{className:"vkf-mapview-target"},af.default.createElement(GUe,{extent:e,onLoad:v=>h(v),urlNominatim:t,urlsOsmBaseMap:n},u!==null&&af.default.createElement("div",null,af.default.createElement("div",{className:"placenamesearch-container"},af.default.createElement(Z3e,{onSelectPosition:v=>{let[x,S]=[v.lonlat.x,v.lonlat.y],q=Xu([parseFloat(x),parseFloat(S)],"EPSG:4326","EPSG:3857");if(u!=null&&u.map){let R=u.map.getView();R.setCenter(q),R.setZoom(12)}},searchUrl:ro.getNominatimUrl()})),o!==null&&af.default.createElement(K3e,{layer:o,orientation:"vertical"}))),u!==null&&i!==null&&af.default.createElement(ZUe,{key:i.wms_url,map:u.map,layerName:i.layer_name,onLoad:v=>a(v),wmsUrl:i.wms_url}))};X3e.propTypes={extent:lx.default.arrayOf(lx.default.number),urlNominatim:lx.default.string,urlsOsmBaseMap:lx.default.arrayOf(lx.default.string)};var J3e=X3e;var Q3e=Me(IS(),1);function eVe(r){return fo(this,null,function*(){let e=ro.getSettings().API_SEARCH;if(e===void 0)throw new Error("The url for the search endpoint is not set.");let t=yield Q3e.default.get(`${e}/_doc/${r}`);if(t.status===200)return t.data._source;console.error("Something went wrong while trying to fetch search document.")})}var Nar=r=>{var e,t,n,i;return{map_id:r.map_id,clip:(r==null?void 0:r.clip)!==void 0&&r.clip!==null?{type:r.clip.type,coordinates:r.clip.coordinates}:void 0,overwrites:r.transformation_id,params:{algorithm:(t=(e=r==null?void 0:r.params)==null?void 0:e.algorithm)!=null?t:"affine",gcps:(i=(n=r==null?void 0:r.params)==null?void 0:n.gcps)!=null?i:[]}}},rVe=r=>{let{urlsOsmBaseMap:e,urlNominatim:t}=r,n=Ql(RO),i=Ql(IO),o=Ql(ud),a=Jl(TO),[u,h]=(0,bu.useState)(null),[d,v]=(0,bu.useState)(!1);return(0,bu.useEffect)(()=>fo(void 0,null,function*(){let x=tVe.default.parse(location.search);if(x.map_id!==void 0){let{transformations:S,additional_properties:A}=yield sOe(x.map_id),{active_transformation_id:L,extent:q,pending_jobs:R}=A,D=yield eVe(x.map_id),k=q!==null?Bje(q):null;R&&o({id:"georeference-view",type:"warning",text:"F\xFCr diese Karte existieren bisher noch unverarbeitete Georeferenzierung."});let j=x.transformation_id!==void 0?parseInt(x.transformation_id):L;if(S.length>0&&j!==null){let $=S.find(ee=>ee.transformation_id===j);k=zje($),n(Nar($))}else if(L===null)n({map_id:x.map_id,clip:null,overwrites:0,params:{algorithm:"affine",gcps:[]}});else throw new Error("This transformation type is not supported yet.");i(D),h(k),v(!0)}}),[]),bu.default.createElement("div",{className:"vkf-georeference-view"},bu.default.createElement("div",{className:"outer-map-container"},bu.default.createElement(jUe,null)),bu.default.createElement("div",{className:"outer-map-container"},d&&bu.default.createElement(J3e,{extent:u!==null?u:void 0,urlsOsmBaseMap:e,urlNominatim:t})),a&&bu.default.createElement($je,null))};rVe.propTypes={urlsOsmBaseMap:H2.default.arrayOf(H2.default.string).isRequired,urlNominatim:H2.default.string.isRequired};var nVe=rVe;var Sl=Me(ht(),1);var W2=Me(Qr(),1);var iVe=r=>{let{onClose:e,text:t,type:n}=r;return Sl.default.createElement("div",{className:"notification-item"},Sl.default.createElement("div",{className:Os("alert","alert-"+n),role:"alert"},Sl.default.createElement("div",{className:"close"},Sl.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:e},Sl.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),Sl.default.createElement("div",{className:"text"},t)))};iVe.propTypes={onClose:W2.default.func,text:W2.default.string,type:W2.default.string};var qar=()=>{let r=Jl(ud),e=pD(r),[t,n]=(0,Sl.useState)([]);return(0,Sl.useEffect)(()=>{if(r!==null&&r.id!==null&&r!==e){let i=[...t],o=t.findIndex(a=>a.id===r.id);o>-1?i.splice(o,1,r.text!==null?r:void 0):i.splice(0,0,r),n(i.filter(a=>a!==void 0))}},[r,t,e]),Sl.default.createElement("div",{className:Os("vkf-notifications",t.length===0?"hide":"")},t.map(({type:i,text:o},a)=>Sl.default.createElement(iVe,{key:a,onClose:()=>{let u=[...t];u.splice(a,1),n(u)},type:i,text:o})))},oVe=qar;var aVe=oVe;var kar=()=>Vv.default.createElement(UPe,null,Vv.default.createElement("div",{className:"vk-app-georeferencer"},Vv.default.createElement("div",null,Vv.default.createElement(Vje,null),Vv.default.createElement(nVe,{urlsOsmBaseMap:ro.getDefaultBaseMapUrls(),urlNominatim:ro.getNominatimUrl()}),Vv.default.createElement(aVe,null)))),sVe=kar;var Far=ro;function jar(r){uVe.default.render(lVe.default.createElement(sVe,null),r)}return uGe(zar)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/