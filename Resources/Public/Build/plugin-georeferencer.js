var vk2=(()=>{var P$e=Object.create;var vw=Object.defineProperty,R$e=Object.defineProperties,O$e=Object.getOwnPropertyDescriptor,L$e=Object.getOwnPropertyDescriptors,D$e=Object.getOwnPropertyNames,mM=Object.getOwnPropertySymbols,N$e=Object.getPrototypeOf,$F=Object.prototype.hasOwnProperty,JQ=Object.prototype.propertyIsEnumerable;var My=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),k$e=t=>{throw TypeError(t)},yw=Math.pow,GF=(t,e,r)=>e in t?vw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mt=(t,e)=>{for(var r in e||(e={}))$F.call(e,r)&&GF(t,r,e[r]);if(mM)for(var r of mM(e))JQ.call(e,r)&&GF(t,r,e[r]);return t},on=(t,e)=>R$e(t,L$e(e));var Oo=(t,e)=>{var r={};for(var n in t)$F.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&mM)for(var n of mM(t))e.indexOf(n)<0&&JQ.call(t,n)&&(r[n]=t[n]);return r};var q$e=(t,e)=>()=>(t&&(e=t(t=0)),e);var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),eJ=(t,e)=>{for(var r in e)vw(t,r,{get:e[r],enumerable:!0})},tJ=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of D$e(e))!$F.call(t,i)&&i!==r&&vw(t,i,{get:()=>e[i],enumerable:!(n=O$e(e,i))||n.enumerable});return t};var je=(t,e,r)=>(r=t!=null?P$e(N$e(t)):{},tJ(e||!t||!t.__esModule?vw(r,"default",{value:t,enumerable:!0}):r,t)),F$e=t=>tJ(vw({},"__esModule",{value:!0}),t);var io=(t,e,r)=>GF(t,typeof e!="symbol"?e+"":e,r);var zn=(t,e,r)=>new Promise((n,i)=>{var o=d=>{try{f(r.next(d))}catch(v){i(v)}},l=d=>{try{f(r.throw(d))}catch(v){i(v)}},f=d=>d.done?n(d.value):Promise.resolve(d.value).then(o,l);f((r=r.apply(t,e)).next())}),Jm=function(t,e){this[0]=t,this[1]=e},HF=(t,e,r)=>{var n=(l,f,d,v)=>{try{var x=r[l](f),b=(f=x.value)instanceof Jm,A=x.done;Promise.resolve(b?f[0]:f).then(P=>b?n(l==="return"?l:"next",f[1]?{done:P.done,value:P.value}:P,d,v):d({value:P,done:A})).catch(P=>n("throw",P,d,v))}catch(P){v(P)}},i=l=>o[l]=f=>new Promise((d,v)=>n(l,f,d,v)),o={};return r=r.apply(t,e),o[My("asyncIterator")]=()=>o,i("next"),i("throw"),i("return"),o},WF=t=>{var e=t[My("asyncIterator")],r=!1,n,i={};return e==null?(e=t[My("iterator")](),n=o=>i[o]=l=>e[o](l)):(e=e.call(t),n=o=>i[o]=l=>{if(r){if(r=!1,o==="throw")throw l;return l}return r=!0,{done:!1,value:new Jm(new Promise(f=>{var d=e[o](l);d instanceof Object||k$e("Object expected"),f(d)}),1)}}),i[My("iterator")]=()=>i,n("next"),"throw"in e?n("throw"):i.throw=o=>{throw o},"return"in e&&n("return"),i},rJ=(t,e,r)=>(e=t[My("asyncIterator")])?e.call(t):(t=t[My("iterator")](),e={},r=(n,i)=>(i=t[n])&&(e[n]=o=>new Promise((l,f,d)=>(o=i.call(t,o),d=o.done,Promise.resolve(o.value).then(v=>l({value:v,done:d}),f)))),r("next"),r("return"),e);var T,p=q$e(()=>{T={env:{}}});var ZF=R((Gcr,iJ)=>{"use strict";p();var nJ=Object.getOwnPropertySymbols,z$e=Object.prototype.hasOwnProperty,U$e=Object.prototype.propertyIsEnumerable;function B$e(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function V$e(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(o){return!1}}iJ.exports=V$e()?Object.assign:function(t,e){for(var r,n=B$e(t),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var l in r)z$e.call(r,l)&&(n[l]=r[l]);if(nJ){i=nJ(r);for(var f=0;f<i.length;f++)U$e.call(r,i[f])&&(n[i[f]]=r[i[f]])}}return n}});var xJ=R(Tn=>{"use strict";p();var KF=ZF(),Cy=60103,sJ=60106;Tn.Fragment=60107;Tn.StrictMode=60108;Tn.Profiler=60114;var lJ=60109,uJ=60110,cJ=60112;Tn.Suspense=60113;var fJ=60115,hJ=60116;typeof Symbol=="function"&&Symbol.for&&($l=Symbol.for,Cy=$l("react.element"),sJ=$l("react.portal"),Tn.Fragment=$l("react.fragment"),Tn.StrictMode=$l("react.strict_mode"),Tn.Profiler=$l("react.profiler"),lJ=$l("react.provider"),uJ=$l("react.context"),cJ=$l("react.forward_ref"),Tn.Suspense=$l("react.suspense"),fJ=$l("react.memo"),hJ=$l("react.lazy"));var $l,oJ=typeof Symbol=="function"&&Symbol.iterator;function G$e(t){return t===null||typeof t!="object"?null:(t=oJ&&t[oJ]||t["@@iterator"],typeof t=="function"?t:null)}function _w(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dJ={};function Py(t,e,r){this.props=t,this.context=e,this.refs=dJ,this.updater=r||pJ}Py.prototype.isReactComponent={};Py.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(_w(85));this.updater.enqueueSetState(this,t,e,"setState")};Py.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mJ(){}mJ.prototype=Py.prototype;function XF(t,e,r){this.props=t,this.context=e,this.refs=dJ,this.updater=r||pJ}var QF=XF.prototype=new mJ;QF.constructor=XF;KF(QF,Py.prototype);QF.isPureReactComponent=!0;var JF={current:null},gJ=Object.prototype.hasOwnProperty,vJ={key:!0,ref:!0,__self:!0,__source:!0};function yJ(t,e,r){var n,i={},o=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)gJ.call(e,n)&&!vJ.hasOwnProperty(n)&&(i[n]=e[n]);var f=arguments.length-2;if(f===1)i.children=r;else if(1<f){for(var d=Array(f),v=0;v<f;v++)d[v]=arguments[v+2];i.children=d}if(t&&t.defaultProps)for(n in f=t.defaultProps,f)i[n]===void 0&&(i[n]=f[n]);return{$$typeof:Cy,type:t,key:o,ref:l,props:i,_owner:JF.current}}function $$e(t,e){return{$$typeof:Cy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ej(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cy}function H$e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var aJ=/\/+/g;function YF(t,e){return typeof t=="object"&&t!==null&&t.key!=null?H$e(""+t.key):e.toString(36)}function vM(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Cy:case sJ:l=!0}}if(l)return l=t,i=i(l),t=n===""?"."+YF(l,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace(aJ,"$&/")+"/"),vM(i,e,r,"",function(v){return v})):i!=null&&(ej(i)&&(i=$$e(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(aJ,"$&/")+"/")+t)),e.push(i)),1;if(l=0,n=n===""?".":n+":",Array.isArray(t))for(var f=0;f<t.length;f++){o=t[f];var d=n+YF(o,f);l+=vM(o,e,r,d,i)}else if(d=G$e(t),typeof d=="function")for(t=d.call(t),f=0;!(o=t.next()).done;)o=o.value,d=n+YF(o,f++),l+=vM(o,e,r,d,i);else if(o==="object")throw e=""+t,Error(_w(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function gM(t,e,r){if(t==null)return t;var n=[],i=0;return vM(t,n,"","",function(o){return e.call(r,o,i++)}),n}function W$e(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var _J={current:null};function oh(){var t=_J.current;if(t===null)throw Error(_w(321));return t}var Z$e={ReactCurrentDispatcher:_J,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:JF,IsSomeRendererActing:{current:!1},assign:KF};Tn.Children={map:gM,forEach:function(t,e,r){gM(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return gM(t,function(){e++}),e},toArray:function(t){return gM(t,function(e){return e})||[]},only:function(t){if(!ej(t))throw Error(_w(143));return t}};Tn.Component=Py;Tn.PureComponent=XF;Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z$e;Tn.cloneElement=function(t,e,r){if(t==null)throw Error(_w(267,t));var n=KF({},t.props),i=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=JF.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(d in e)gJ.call(e,d)&&!vJ.hasOwnProperty(d)&&(n[d]=e[d]===void 0&&f!==void 0?f[d]:e[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){f=Array(d);for(var v=0;v<d;v++)f[v]=arguments[v+2];n.children=f}return{$$typeof:Cy,type:t.type,key:i,ref:o,props:n,_owner:l}};Tn.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:uJ,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:lJ,_context:t},t.Consumer=t};Tn.createElement=yJ;Tn.createFactory=function(t){var e=yJ.bind(null,t);return e.type=t,e};Tn.createRef=function(){return{current:null}};Tn.forwardRef=function(t){return{$$typeof:cJ,render:t}};Tn.isValidElement=ej;Tn.lazy=function(t){return{$$typeof:hJ,_payload:{_status:-1,_result:t},_init:W$e}};Tn.memo=function(t,e){return{$$typeof:fJ,type:t,compare:e===void 0?null:e}};Tn.useCallback=function(t,e){return oh().useCallback(t,e)};Tn.useContext=function(t,e){return oh().useContext(t,e)};Tn.useDebugValue=function(){};Tn.useEffect=function(t,e){return oh().useEffect(t,e)};Tn.useImperativeHandle=function(t,e,r){return oh().useImperativeHandle(t,e,r)};Tn.useLayoutEffect=function(t,e){return oh().useLayoutEffect(t,e)};Tn.useMemo=function(t,e){return oh().useMemo(t,e)};Tn.useReducer=function(t,e,r){return oh().useReducer(t,e,r)};Tn.useRef=function(t){return oh().useRef(t)};Tn.useState=function(t){return oh().useState(t)};Tn.version="17.0.2"});var St=R((Zcr,bJ)=>{"use strict";p();bJ.exports=xJ()});var AJ=R(Un=>{"use strict";p();var Oy,ww,bM,sj;typeof performance=="object"&&typeof performance.now=="function"?(wJ=performance,Un.unstable_now=function(){return wJ.now()}):(tj=Date,EJ=tj.now(),Un.unstable_now=function(){return tj.now()-EJ});var wJ,tj,EJ;typeof window=="undefined"||typeof MessageChannel!="function"?(Ry=null,rj=null,nj=function(){if(Ry!==null)try{var t=Un.unstable_now();Ry(!0,t),Ry=null}catch(e){throw setTimeout(nj,0),e}},Oy=function(t){Ry!==null?setTimeout(Oy,0,t):(Ry=t,setTimeout(nj,0))},ww=function(t,e){rj=setTimeout(t,e)},bM=function(){clearTimeout(rj)},Un.unstable_shouldYield=function(){return!1},sj=Un.unstable_forceFrameRate=function(){}):(SJ=window.setTimeout,TJ=window.clearTimeout,typeof console!="undefined"&&(IJ=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof IJ!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),xw=!1,bw=null,yM=-1,ij=5,oj=0,Un.unstable_shouldYield=function(){return Un.unstable_now()>=oj},sj=function(){},Un.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ij=0<t?Math.floor(1e3/t):5},aj=new MessageChannel,_M=aj.port2,aj.port1.onmessage=function(){if(bw!==null){var t=Un.unstable_now();oj=t+ij;try{bw(!0,t)?_M.postMessage(null):(xw=!1,bw=null)}catch(e){throw _M.postMessage(null),e}}else xw=!1},Oy=function(t){bw=t,xw||(xw=!0,_M.postMessage(null))},ww=function(t,e){yM=SJ(function(){t(Un.unstable_now())},e)},bM=function(){TJ(yM),yM=-1});var Ry,rj,nj,SJ,TJ,IJ,xw,bw,yM,ij,oj,aj,_M;function lj(t,e){var r=t.length;t.push(e);e:for(;;){var n=r-1>>>1,i=t[n];if(i!==void 0&&0<xM(i,e))t[n]=e,t[r]=i,r=n;else break e}}function Wu(t){return t=t[0],t===void 0?null:t}function wM(t){var e=t[0];if(e!==void 0){var r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length;n<i;){var o=2*(n+1)-1,l=t[o],f=o+1,d=t[f];if(l!==void 0&&0>xM(l,r))d!==void 0&&0>xM(d,l)?(t[n]=d,t[f]=r,n=f):(t[n]=l,t[o]=r,n=o);else if(d!==void 0&&0>xM(d,r))t[n]=d,t[f]=r,n=f;else break e}}return e}return null}function xM(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}var Bc=[],Dp=[],Y$e=1,Hl=null,Ra=3,EM=!1,eg=!1,Ew=!1;function uj(t){for(var e=Wu(Dp);e!==null;){if(e.callback===null)wM(Dp);else if(e.startTime<=t)wM(Dp),e.sortIndex=e.expirationTime,lj(Bc,e);else break;e=Wu(Dp)}}function cj(t){if(Ew=!1,uj(t),!eg)if(Wu(Bc)!==null)eg=!0,Oy(fj);else{var e=Wu(Dp);e!==null&&ww(cj,e.startTime-t)}}function fj(t,e){eg=!1,Ew&&(Ew=!1,bM()),EM=!0;var r=Ra;try{for(uj(e),Hl=Wu(Bc);Hl!==null&&(!(Hl.expirationTime>e)||t&&!Un.unstable_shouldYield());){var n=Hl.callback;if(typeof n=="function"){Hl.callback=null,Ra=Hl.priorityLevel;var i=n(Hl.expirationTime<=e);e=Un.unstable_now(),typeof i=="function"?Hl.callback=i:Hl===Wu(Bc)&&wM(Bc),uj(e)}else wM(Bc);Hl=Wu(Bc)}if(Hl!==null)var o=!0;else{var l=Wu(Dp);l!==null&&ww(cj,l.startTime-e),o=!1}return o}finally{Hl=null,Ra=r,EM=!1}}var K$e=sj;Un.unstable_IdlePriority=5;Un.unstable_ImmediatePriority=1;Un.unstable_LowPriority=4;Un.unstable_NormalPriority=3;Un.unstable_Profiling=null;Un.unstable_UserBlockingPriority=2;Un.unstable_cancelCallback=function(t){t.callback=null};Un.unstable_continueExecution=function(){eg||EM||(eg=!0,Oy(fj))};Un.unstable_getCurrentPriorityLevel=function(){return Ra};Un.unstable_getFirstCallbackNode=function(){return Wu(Bc)};Un.unstable_next=function(t){switch(Ra){case 1:case 2:case 3:var e=3;break;default:e=Ra}var r=Ra;Ra=e;try{return t()}finally{Ra=r}};Un.unstable_pauseExecution=function(){};Un.unstable_requestPaint=K$e;Un.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=Ra;Ra=t;try{return e()}finally{Ra=r}};Un.unstable_scheduleCallback=function(t,e,r){var n=Un.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:Y$e++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,lj(Dp,t),Wu(Bc)===null&&t===Wu(Dp)&&(Ew?bM():Ew=!0,ww(cj,r-n))):(t.sortIndex=i,lj(Bc,t),eg||EM||(eg=!0,Oy(fj))),t};Un.unstable_wrapCallback=function(t){var e=Ra;return function(){var r=Ra;Ra=e;try{return t.apply(this,arguments)}finally{Ra=r}}}});var CJ=R((Qcr,MJ)=>{"use strict";p();MJ.exports=AJ()});var mre=R(Ql=>{"use strict";p();var gC=St(),Mi=ZF(),Zo=CJ();function qt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!gC)throw Error(qt(227));var Bee=new Set,Jw={};function fg(t,e){Jy(t,e),Jy(t+"Capture",e)}function Jy(t,e){for(Jw[t]=e,t=0;t<e.length;t++)Bee.add(e[t])}var fh=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),X$e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PJ=Object.prototype.hasOwnProperty,RJ={},OJ={};function Q$e(t){return PJ.call(OJ,t)?!0:PJ.call(RJ,t)?!1:X$e.test(t)?OJ[t]=!0:(RJ[t]=!0,!1)}function J$e(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eHe(t,e,r,n){if(e===null||typeof e=="undefined"||J$e(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function as(t,e,r,n,i,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var ha={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ha[t]=new as(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ha[e]=new as(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ha[t]=new as(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ha[t]=new as(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ha[t]=new as(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ha[t]=new as(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ha[t]=new as(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ha[t]=new as(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ha[t]=new as(t,5,!1,t.toLowerCase(),null,!1,!1)});var xz=/[\-:]([a-z])/g;function bz(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xz,bz);ha[e]=new as(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xz,bz);ha[e]=new as(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xz,bz);ha[e]=new as(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ha[t]=new as(t,1,!1,t.toLowerCase(),null,!1,!1)});ha.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ha[t]=new as(t,1,!1,t.toLowerCase(),null,!0,!0)});function wz(t,e,r,n){var i=ha.hasOwnProperty(e)?ha[e]:null,o=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");o||(eHe(e,r,i,n)&&(r=null),n||i===null?Q$e(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var hg=gC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kw=60103,rg=60106,kp=60107,Ez=60108,Uw=60114,Sz=60109,Tz=60110,vC=60112,Bw=60113,WM=60120,yC=60115,Iz=60116,Az=60121,Mz=60128,Vee=60129,Cz=60130,Dj=60131;typeof Symbol=="function"&&Symbol.for&&(Lo=Symbol.for,kw=Lo("react.element"),rg=Lo("react.portal"),kp=Lo("react.fragment"),Ez=Lo("react.strict_mode"),Uw=Lo("react.profiler"),Sz=Lo("react.provider"),Tz=Lo("react.context"),vC=Lo("react.forward_ref"),Bw=Lo("react.suspense"),WM=Lo("react.suspense_list"),yC=Lo("react.memo"),Iz=Lo("react.lazy"),Az=Lo("react.block"),Lo("react.scope"),Mz=Lo("react.opaque.id"),Vee=Lo("react.debug_trace_mode"),Cz=Lo("react.offscreen"),Dj=Lo("react.legacy_hidden"));var Lo,LJ=typeof Symbol=="function"&&Symbol.iterator;function Sw(t){return t===null||typeof t!="object"?null:(t=LJ&&t[LJ]||t["@@iterator"],typeof t=="function"?t:null)}var hj;function qw(t){if(hj===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);hj=e&&e[1]||""}return`
`+hj+t}var pj=!1;function SM(t,e){if(!t||pj)return"";pj=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e){if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=n.stack.split(`
`),l=i.length-1,f=o.length-1;1<=l&&0<=f&&i[l]!==o[f];)f--;for(;1<=l&&0<=f;l--,f--)if(i[l]!==o[f]){if(l!==1||f!==1)do if(l--,f--,0>f||i[l]!==o[f])return`
`+i[l].replace(" at new "," at ");while(1<=l&&0<=f);break}}}finally{pj=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?qw(t):""}function tHe(t){switch(t.tag){case 5:return qw(t.type);case 16:return qw("Lazy");case 13:return qw("Suspense");case 19:return qw("SuspenseList");case 0:case 2:case 15:return t=SM(t.type,!1),t;case 11:return t=SM(t.type.render,!1),t;case 22:return t=SM(t.type._render,!1),t;case 1:return t=SM(t.type,!0),t;default:return""}}function Vy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kp:return"Fragment";case rg:return"Portal";case Uw:return"Profiler";case Ez:return"StrictMode";case Bw:return"Suspense";case WM:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tz:return(t.displayName||"Context")+".Consumer";case Sz:return(t._context.displayName||"Context")+".Provider";case vC:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case yC:return Vy(t.type);case Az:return Vy(t._render);case Iz:e=t._payload,t=t._init;try{return Vy(t(e))}catch(r){}}return null}function Zp(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Gee(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rHe(t){var e=Gee(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function TM(t){t._valueTracker||(t._valueTracker=rHe(t))}function $ee(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Gee(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ZM(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Nj(t,e){var r=e.checked;return Mi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:t._wrapperState.initialChecked})}function DJ(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Zp(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hee(t,e){e=e.checked,e!=null&&wz(t,"checked",e,!1)}function kj(t,e){Hee(t,e);var r=Zp(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qj(t,e.type,r):e.hasOwnProperty("defaultValue")&&qj(t,e.type,Zp(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function NJ(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function qj(t,e,r){(e!=="number"||ZM(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function nHe(t){var e="";return gC.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function Fj(t,e){return t=Mi({children:void 0},e),(e=nHe(e.children))&&(t.children=e),t}function Gy(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Zp(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function jj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qt(91));return Mi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kJ(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(qt(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(qt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Zp(r)}}function Wee(t,e){var r=Zp(e.value),n=Zp(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function qJ(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var zj={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Zee(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zee(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var IM,Yee=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==zj.svg||"innerHTML"in t)t.innerHTML=e;else{for(IM=IM||document.createElement("div"),IM.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=IM.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function e1(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Vw={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iHe=["Webkit","ms","Moz","O"];Object.keys(Vw).forEach(function(t){iHe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vw[e]=Vw[t]})});function Kee(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Vw.hasOwnProperty(t)&&Vw[t]?(""+e).trim():e+"px"}function Xee(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Kee(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var oHe=Mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bj(t,e){if(e){if(oHe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qt(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(qt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qt(62))}}function Vj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Pz(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gj=null,$y=null,Hy=null;function FJ(t){if(t=d1(t)){if(typeof Gj!="function")throw Error(qt(280));var e=t.stateNode;e&&(e=SC(e),Gj(t.stateNode,t.type,e))}}function Qee(t){$y?Hy?Hy.push(t):Hy=[t]:$y=t}function Jee(){if($y){var t=$y,e=Hy;if(Hy=$y=null,FJ(t),e)for(t=0;t<e.length;t++)FJ(e[t])}}function Rz(t,e){return t(e)}function ete(t,e,r,n,i){return t(e,r,n,i)}function Oz(){}var tte=Rz,ng=!1,dj=!1;function Lz(){($y!==null||Hy!==null)&&(Oz(),Jee())}function aHe(t,e,r){if(dj)return t(e,r);dj=!0;try{return tte(t,e,r)}finally{dj=!1,Lz()}}function t1(t,e){var r=t.stateNode;if(r===null)return null;var n=SC(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(qt(231,e,typeof r));return r}var $j=!1;if(fh)try{Ly={},Object.defineProperty(Ly,"passive",{get:function(){$j=!0}}),window.addEventListener("test",Ly,Ly),window.removeEventListener("test",Ly,Ly)}catch(t){$j=!1}var Ly;function sHe(t,e,r,n,i,o,l,f,d){var v=Array.prototype.slice.call(arguments,3);try{e.apply(r,v)}catch(x){this.onError(x)}}var Gw=!1,YM=null,KM=!1,Hj=null,lHe={onError:function(t){Gw=!0,YM=t}};function uHe(t,e,r,n,i,o,l,f,d){Gw=!1,YM=null,sHe.apply(lHe,arguments)}function cHe(t,e,r,n,i,o,l,f,d){if(uHe.apply(this,arguments),Gw){if(Gw){var v=YM;Gw=!1,YM=null}else throw Error(qt(198));KM||(KM=!0,Hj=v)}}function pg(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function rte(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jJ(t){if(pg(t)!==t)throw Error(qt(188))}function fHe(t){var e=t.alternate;if(!e){if(e=pg(t),e===null)throw Error(qt(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return jJ(i),t;if(o===n)return jJ(i),e;o=o.sibling}throw Error(qt(188))}if(r.return!==n.return)r=i,n=o;else{for(var l=!1,f=i.child;f;){if(f===r){l=!0,r=i,n=o;break}if(f===n){l=!0,n=i,r=o;break}f=f.sibling}if(!l){for(f=o.child;f;){if(f===r){l=!0,r=o,n=i;break}if(f===n){l=!0,n=o,r=i;break}f=f.sibling}if(!l)throw Error(qt(189))}}if(r.alternate!==n)throw Error(qt(190))}if(r.tag!==3)throw Error(qt(188));return r.stateNode.current===r?t:e}function nte(t){if(t=fHe(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function zJ(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var ite,Dz,ote,ate,Wj=!1,Vc=[],zp=null,Up=null,Bp=null,r1=new Map,n1=new Map,Tw=[],UJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zj(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function BJ(t,e){switch(t){case"focusin":case"focusout":zp=null;break;case"dragenter":case"dragleave":Up=null;break;case"mouseover":case"mouseout":Bp=null;break;case"pointerover":case"pointerout":r1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":n1.delete(e.pointerId)}}function Iw(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t=Zj(e,r,n,i,o),e!==null&&(e=d1(e),e!==null&&Dz(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hHe(t,e,r,n,i){switch(e){case"focusin":return zp=Iw(zp,t,e,r,n,i),!0;case"dragenter":return Up=Iw(Up,t,e,r,n,i),!0;case"mouseover":return Bp=Iw(Bp,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return r1.set(o,Iw(r1.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,n1.set(o,Iw(n1.get(o)||null,t,e,r,n,i)),!0}return!1}function pHe(t){var e=ig(t.target);if(e!==null){var r=pg(e);if(r!==null){if(e=r.tag,e===13){if(e=rte(r),e!==null){t.blockedOn=e,ate(t.lanePriority,function(){Zo.unstable_runWithPriority(t.priority,function(){ote(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qM(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Fz(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=d1(r),e!==null&&Dz(e),t.blockedOn=r,!1;e.shift()}return!0}function VJ(t,e,r){qM(t)&&r.delete(e)}function dHe(){for(Wj=!1;0<Vc.length;){var t=Vc[0];if(t.blockedOn!==null){t=d1(t.blockedOn),t!==null&&ite(t);break}for(var e=t.targetContainers;0<e.length;){var r=Fz(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&Vc.shift()}zp!==null&&qM(zp)&&(zp=null),Up!==null&&qM(Up)&&(Up=null),Bp!==null&&qM(Bp)&&(Bp=null),r1.forEach(VJ),n1.forEach(VJ)}function Aw(t,e){t.blockedOn===e&&(t.blockedOn=null,Wj||(Wj=!0,Zo.unstable_scheduleCallback(Zo.unstable_NormalPriority,dHe)))}function ste(t){function e(i){return Aw(i,t)}if(0<Vc.length){Aw(Vc[0],t);for(var r=1;r<Vc.length;r++){var n=Vc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(zp!==null&&Aw(zp,t),Up!==null&&Aw(Up,t),Bp!==null&&Aw(Bp,t),r1.forEach(e),n1.forEach(e),r=0;r<Tw.length;r++)n=Tw[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Tw.length&&(r=Tw[0],r.blockedOn===null);)pHe(r),r.blockedOn===null&&Tw.shift()}function AM(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var qy={animationend:AM("Animation","AnimationEnd"),animationiteration:AM("Animation","AnimationIteration"),animationstart:AM("Animation","AnimationStart"),transitionend:AM("Transition","TransitionEnd")},mj={},lte={};fh&&(lte=document.createElement("div").style,"AnimationEvent"in window||(delete qy.animationend.animation,delete qy.animationiteration.animation,delete qy.animationstart.animation),"TransitionEvent"in window||delete qy.transitionend.transition);function _C(t){if(mj[t])return mj[t];if(!qy[t])return t;var e=qy[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in lte)return mj[t]=e[r];return t}var ute=_C("animationend"),cte=_C("animationiteration"),fte=_C("animationstart"),hte=_C("transitionend"),pte=new Map,Nz=new Map,mHe=["abort","abort",ute,"animationEnd",cte,"animationIteration",fte,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",hte,"transitionEnd","waiting","waiting"];function kz(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Nz.set(n,e),pte.set(n,i),fg(i,[n])}}var gHe=Zo.unstable_now;gHe();var ci=8;function Ny(t){if((1&t)!==0)return ci=15,1;if((2&t)!==0)return ci=14,2;if((4&t)!==0)return ci=13,4;var e=24&t;return e!==0?(ci=12,e):(t&32)!==0?(ci=11,32):(e=192&t,e!==0?(ci=10,e):(t&256)!==0?(ci=9,256):(e=3584&t,e!==0?(ci=8,e):(t&4096)!==0?(ci=7,4096):(e=4186112&t,e!==0?(ci=6,e):(e=62914560&t,e!==0?(ci=5,e):t&67108864?(ci=4,67108864):(t&134217728)!==0?(ci=3,134217728):(e=805306368&t,e!==0?(ci=2,e):(1073741824&t)!==0?(ci=1,1073741824):(ci=8,t))))))}function vHe(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function yHe(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(qt(358,t))}}function i1(t,e){var r=t.pendingLanes;if(r===0)return ci=0;var n=0,i=0,o=t.expiredLanes,l=t.suspendedLanes,f=t.pingedLanes;if(o!==0)n=o,i=ci=15;else if(o=r&134217727,o!==0){var d=o&~l;d!==0?(n=Ny(d),i=ci):(f&=o,f!==0&&(n=Ny(f),i=ci))}else o=r&~l,o!==0?(n=Ny(o),i=ci):f!==0&&(n=Ny(f),i=ci);if(n===0)return 0;if(n=31-Yp(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&(e&l)===0){if(Ny(e),i<=ci)return e;ci=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Yp(e),i=1<<r,n|=t[r],e&=~i;return n}function dte(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XM(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=ky(24&~e),t===0?XM(10,e):t;case 10:return t=ky(192&~e),t===0?XM(8,e):t;case 8:return t=ky(3584&~e),t===0&&(t=ky(4186112&~e),t===0&&(t=512)),t;case 2:return e=ky(805306368&~e),e===0&&(e=268435456),e}throw Error(qt(358,t))}function ky(t){return t&-t}function gj(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function xC(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-Yp(e),t[e]=r}var Yp=Math.clz32?Math.clz32:bHe,_He=Math.log,xHe=Math.LN2;function bHe(t){return t===0?32:31-(_He(t)/xHe|0)|0}var wHe=Zo.unstable_UserBlockingPriority,EHe=Zo.unstable_runWithPriority,FM=!0;function SHe(t,e,r,n){ng||Oz();var i=qz,o=ng;ng=!0;try{ete(i,t,e,r,n)}finally{(ng=o)||Lz()}}function THe(t,e,r,n){EHe(wHe,qz.bind(null,t,e,r,n))}function qz(t,e,r,n){if(FM){var i;if((i=(e&4)===0)&&0<Vc.length&&-1<UJ.indexOf(t))t=Zj(null,t,e,r,n),Vc.push(t);else{var o=Fz(t,e,r,n);if(o===null)i&&BJ(t,n);else{if(i){if(-1<UJ.indexOf(t)){t=Zj(o,t,e,r,n),Vc.push(t);return}if(hHe(o,t,e,r,n))return;BJ(t,n)}Ate(t,e,n,null,r)}}}}function Fz(t,e,r,n){var i=Pz(n);if(i=ig(i),i!==null){var o=pg(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=rte(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ate(t,e,n,i,r),null}var qp=null,jz=null,jM=null;function mte(){if(jM)return jM;var t,e=jz,r=e.length,n,i="value"in qp?qp.value:qp.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var l=r-t;for(n=1;n<=l&&e[r-n]===i[o-n];n++);return jM=i.slice(t,1<n?1-n:void 0)}function zM(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function MM(){return!0}function GJ(){return!1}function El(t){function e(r,n,i,o,l){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(r=t[f],this[f]=r?r(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?MM:GJ,this.isPropagationStopped=GJ,this}return Mi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=MM)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=MM)},persist:function(){},isPersistent:MM}),e}var n_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zz=El(n_),p1=Mi({},n_,{view:0,detail:0}),IHe=El(p1),vj,yj,Mw,bC=Mi({},p1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uz,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mw&&(Mw&&t.type==="mousemove"?(vj=t.screenX-Mw.screenX,yj=t.screenY-Mw.screenY):yj=vj=0,Mw=t),vj)},movementY:function(t){return"movementY"in t?t.movementY:yj}}),$J=El(bC),AHe=Mi({},bC,{dataTransfer:0}),MHe=El(AHe),CHe=Mi({},p1,{relatedTarget:0}),_j=El(CHe),PHe=Mi({},n_,{animationName:0,elapsedTime:0,pseudoElement:0}),RHe=El(PHe),OHe=Mi({},n_,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LHe=El(OHe),DHe=Mi({},n_,{data:0}),HJ=El(DHe),NHe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kHe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qHe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FHe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qHe[t])?!!e[t]:!1}function Uz(){return FHe}var jHe=Mi({},p1,{key:function(t){if(t.key){var e=NHe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zM(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kHe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uz,charCode:function(t){return t.type==="keypress"?zM(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zM(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zHe=El(jHe),UHe=Mi({},bC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),WJ=El(UHe),BHe=Mi({},p1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uz}),VHe=El(BHe),GHe=Mi({},n_,{propertyName:0,elapsedTime:0,pseudoElement:0}),$He=El(GHe),HHe=Mi({},bC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WHe=El(HHe),ZHe=[9,13,27,32],Bz=fh&&"CompositionEvent"in window,$w=null;fh&&"documentMode"in document&&($w=document.documentMode);var YHe=fh&&"TextEvent"in window&&!$w,gte=fh&&(!Bz||$w&&8<$w&&11>=$w),ZJ=" ",YJ=!1;function vte(t,e){switch(t){case"keyup":return ZHe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yte(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fy=!1;function KHe(t,e){switch(t){case"compositionend":return yte(e);case"keypress":return e.which!==32?null:(YJ=!0,ZJ);case"textInput":return t=e.data,t===ZJ&&YJ?null:t;default:return null}}function XHe(t,e){if(Fy)return t==="compositionend"||!Bz&&vte(t,e)?(t=mte(),jM=jz=qp=null,Fy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gte&&e.locale!=="ko"?null:e.data;default:return null}}var QHe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KJ(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QHe[t.type]:e==="textarea"}function _te(t,e,r,n){Qee(n),e=QM(e,"onChange"),0<e.length&&(r=new zz("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Hw=null,o1=null;function JHe(t){Ste(t,0)}function wC(t){var e=zy(t);if($ee(e))return t}function eWe(t,e){if(t==="change")return e}var xte=!1;fh&&(fh?(PM="oninput"in document,PM||(xj=document.createElement("div"),xj.setAttribute("oninput","return;"),PM=typeof xj.oninput=="function"),CM=PM):CM=!1,xte=CM&&(!document.documentMode||9<document.documentMode));var CM,PM,xj;function XJ(){Hw&&(Hw.detachEvent("onpropertychange",bte),o1=Hw=null)}function bte(t){if(t.propertyName==="value"&&wC(o1)){var e=[];if(_te(e,o1,t,Pz(t)),t=JHe,ng)t(e);else{ng=!0;try{Rz(t,e)}finally{ng=!1,Lz()}}}}function tWe(t,e,r){t==="focusin"?(XJ(),Hw=e,o1=r,Hw.attachEvent("onpropertychange",bte)):t==="focusout"&&XJ()}function rWe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wC(o1)}function nWe(t,e){if(t==="click")return wC(e)}function iWe(t,e){if(t==="input"||t==="change")return wC(e)}function oWe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wl=typeof Object.is=="function"?Object.is:oWe,aWe=Object.prototype.hasOwnProperty;function a1(t,e){if(Wl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!aWe.call(e,r[n])||!Wl(t[r[n]],e[r[n]]))return!1;return!0}function QJ(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function JJ(t,e){var r=QJ(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=QJ(r)}}function wte(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wte(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eee(){for(var t=window,e=ZM();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch(n){r=!1}if(r)t=e.contentWindow;else break;e=ZM(t.document)}return e}function Yj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var sWe=fh&&"documentMode"in document&&11>=document.documentMode,jy=null,Kj=null,Ww=null,Xj=!1;function tee(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xj||jy==null||jy!==ZM(n)||(n=jy,"selectionStart"in n&&Yj(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ww&&a1(Ww,n)||(Ww=n,n=QM(Kj,"onSelect"),0<n.length&&(e=new zz("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=jy)))}kz("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);kz("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);kz(mHe,2);for(bj="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),RM=0;RM<bj.length;RM++)Nz.set(bj[RM],0);var bj,RM;Jy("onMouseEnter",["mouseout","mouseover"]);Jy("onMouseLeave",["mouseout","mouseover"]);Jy("onPointerEnter",["pointerout","pointerover"]);Jy("onPointerLeave",["pointerout","pointerover"]);fg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fg("onBeforeInput",["compositionend","keypress","textInput","paste"]);fg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ete=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fw));function ree(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,cHe(n,e,void 0,t),t.currentTarget=null}function Ste(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var l=n.length-1;0<=l;l--){var f=n[l],d=f.instance,v=f.currentTarget;if(f=f.listener,d!==o&&i.isPropagationStopped())break e;ree(i,f,v),o=d}else for(l=0;l<n.length;l++){if(f=n[l],d=f.instance,v=f.currentTarget,f=f.listener,d!==o&&i.isPropagationStopped())break e;ree(i,f,v),o=d}}}if(KM)throw t=Hj,KM=!1,Hj=null,t}function xi(t,e){var r=Cte(e),n=t+"__bubble";r.has(n)||(Ite(e,t,2,!1),r.add(n))}var nee="_reactListening"+Math.random().toString(36).slice(2);function Tte(t){t[nee]||(t[nee]=!0,Bee.forEach(function(e){Ete.has(e)||iee(e,!1,t,null),iee(e,!0,t,null)}))}function iee(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=r;if(t==="selectionchange"&&r.nodeType!==9&&(o=r.ownerDocument),n!==null&&!e&&Ete.has(t)){if(t!=="scroll")return;i|=2,o=n}var l=Cte(o),f=t+"__"+(e?"capture":"bubble");l.has(f)||(e&&(i|=4),Ite(o,t,i,e),l.add(f))}function Ite(t,e,r,n){var i=Nz.get(e);switch(i===void 0?2:i){case 0:i=SHe;break;case 1:i=THe;break;default:i=qz}r=i.bind(null,e,r,t),i=void 0,!$j||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Ate(t,e,r,n,i){var o=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var f=n.stateNode.containerInfo;if(f===i||f.nodeType===8&&f.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;f!==null;){if(l=ig(f),l===null)return;if(d=l.tag,d===5||d===6){n=o=l;continue e}f=f.parentNode}}n=n.return}aHe(function(){var v=o,x=Pz(r),b=[];e:{var A=pte.get(t);if(A!==void 0){var P=zz,N=t;switch(t){case"keypress":if(zM(r)===0)break e;case"keydown":case"keyup":P=zHe;break;case"focusin":N="focus",P=_j;break;case"focusout":N="blur",P=_j;break;case"beforeblur":case"afterblur":P=_j;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=$J;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=MHe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=VHe;break;case ute:case cte:case fte:P=RHe;break;case hte:P=$He;break;case"scroll":P=IHe;break;case"wheel":P=WHe;break;case"copy":case"cut":case"paste":P=LHe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=WJ}var j=(e&4)!==0,D=!j&&t==="scroll",F=j?A!==null?A+"Capture":null:A;j=[];for(var U=v,$;U!==null;){$=U;var Z=$.stateNode;if($.tag===5&&Z!==null&&($=Z,F!==null&&(Z=t1(U,F),Z!=null&&j.push(s1(U,Z,$)))),D)break;U=U.return}0<j.length&&(A=new P(A,N,null,r,x),b.push({event:A,listeners:j}))}}if((e&7)===0){e:{if(A=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",A&&(e&16)===0&&(N=r.relatedTarget||r.fromElement)&&(ig(N)||N[i_]))break e;if((P||A)&&(A=x.window===x?x:(A=x.ownerDocument)?A.defaultView||A.parentWindow:window,P?(N=r.relatedTarget||r.toElement,P=v,N=N?ig(N):null,N!==null&&(D=pg(N),N!==D||N.tag!==5&&N.tag!==6)&&(N=null)):(P=null,N=v),P!==N)){if(j=$J,Z="onMouseLeave",F="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(j=WJ,Z="onPointerLeave",F="onPointerEnter",U="pointer"),D=P==null?A:zy(P),$=N==null?A:zy(N),A=new j(Z,U+"leave",P,r,x),A.target=D,A.relatedTarget=$,Z=null,ig(x)===v&&(j=new j(F,U+"enter",N,r,x),j.target=$,j.relatedTarget=D,Z=j),D=Z,P&&N)t:{for(j=P,F=N,U=0,$=j;$;$=Dy($))U++;for($=0,Z=F;Z;Z=Dy(Z))$++;for(;0<U-$;)j=Dy(j),U--;for(;0<$-U;)F=Dy(F),$--;for(;U--;){if(j===F||F!==null&&j===F.alternate)break t;j=Dy(j),F=Dy(F)}j=null}else j=null;P!==null&&oee(b,A,P,j,!1),N!==null&&D!==null&&oee(b,D,N,j,!0)}}e:{if(A=v?zy(v):window,P=A.nodeName&&A.nodeName.toLowerCase(),P==="select"||P==="input"&&A.type==="file")var ie=eWe;else if(KJ(A)){if(xte)ie=iWe;else{ie=rWe;var ne=tWe}}else(P=A.nodeName)&&P.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(ie=nWe);if(ie&&(ie=ie(t,v))){_te(b,ie,r,x);break e}ne&&ne(t,A,v),t==="focusout"&&(ne=A._wrapperState)&&ne.controlled&&A.type==="number"&&qj(A,"number",A.value)}switch(ne=v?zy(v):window,t){case"focusin":(KJ(ne)||ne.contentEditable==="true")&&(jy=ne,Kj=v,Ww=null);break;case"focusout":Ww=Kj=jy=null;break;case"mousedown":Xj=!0;break;case"contextmenu":case"mouseup":case"dragend":Xj=!1,tee(b,r,x);break;case"selectionchange":if(sWe)break;case"keydown":case"keyup":tee(b,r,x)}var ae;if(Bz)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Fy?vte(t,r)&&(de="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(de="onCompositionStart");de&&(gte&&r.locale!=="ko"&&(Fy||de!=="onCompositionStart"?de==="onCompositionEnd"&&Fy&&(ae=mte()):(qp=x,jz="value"in qp?qp.value:qp.textContent,Fy=!0)),ne=QM(v,de),0<ne.length&&(de=new HJ(de,t,null,r,x),b.push({event:de,listeners:ne}),ae?de.data=ae:(ae=yte(r),ae!==null&&(de.data=ae)))),(ae=YHe?KHe(t,r):XHe(t,r))&&(v=QM(v,"onBeforeInput"),0<v.length&&(x=new HJ("onBeforeInput","beforeinput",null,r,x),b.push({event:x,listeners:v}),x.data=ae))}Ste(b,e)})}function s1(t,e,r){return{instance:t,listener:e,currentTarget:r}}function QM(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=t1(t,r),o!=null&&n.unshift(s1(t,o,i)),o=t1(t,e),o!=null&&n.push(s1(t,o,i))),t=t.return}return n}function Dy(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oee(t,e,r,n,i){for(var o=e._reactName,l=[];r!==null&&r!==n;){var f=r,d=f.alternate,v=f.stateNode;if(d!==null&&d===n)break;f.tag===5&&v!==null&&(f=v,i?(d=t1(r,o),d!=null&&l.unshift(s1(r,d,f))):i||(d=t1(r,o),d!=null&&l.push(s1(r,d,f)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}function JM(){}var wj=null,Ej=null;function Mte(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Qj(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var aee=typeof setTimeout=="function"?setTimeout:void 0,lWe=typeof clearTimeout=="function"?clearTimeout:void 0;function Vz(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Wy(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function see(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Sj=0;function uWe(t){return{$$typeof:Mz,toString:t,valueOf:t}}var EC=Math.random().toString(36).slice(2),Fp="__reactFiber$"+EC,eC="__reactProps$"+EC,i_="__reactContainer$"+EC,lee="__reactEvents$"+EC;function ig(t){var e=t[Fp];if(e)return e;for(var r=t.parentNode;r;){if(e=r[i_]||r[Fp]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=see(t);t!==null;){if(r=t[Fp])return r;t=see(t)}return e}t=r,r=t.parentNode}return null}function d1(t){return t=t[Fp]||t[i_],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(qt(33))}function SC(t){return t[eC]||null}function Cte(t){var e=t[lee];return e===void 0&&(e=t[lee]=new Set),e}var Jj=[],Uy=-1;function Jp(t){return{current:t}}function bi(t){0>Uy||(t.current=Jj[Uy],Jj[Uy]=null,Uy--)}function Ki(t,e){Uy++,Jj[Uy]=t.current,t.current=e}var Kp={},Na=Jp(Kp),Rs=Jp(!1),lg=Kp;function e_(t,e){var r=t.type.contextTypes;if(!r)return Kp;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Os(t){return t=t.childContextTypes,t!=null}function tC(){bi(Rs),bi(Na)}function uee(t,e,r){if(Na.current!==Kp)throw Error(qt(168));Ki(Na,e),Ki(Rs,r)}function Pte(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(qt(108,Vy(e)||"Unknown",i));return Mi({},r,n)}function UM(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kp,lg=Na.current,Ki(Na,t),Ki(Rs,Rs.current),!0}function cee(t,e,r){var n=t.stateNode;if(!n)throw Error(qt(169));r?(t=Pte(t,e,lg),n.__reactInternalMemoizedMergedChildContext=t,bi(Rs),bi(Na),Ki(Na,t)):bi(Rs),Ki(Rs,r)}var Gz=null,sg=null,cWe=Zo.unstable_runWithPriority,$z=Zo.unstable_scheduleCallback,ez=Zo.unstable_cancelCallback,fWe=Zo.unstable_shouldYield,fee=Zo.unstable_requestPaint,tz=Zo.unstable_now,hWe=Zo.unstable_getCurrentPriorityLevel,TC=Zo.unstable_ImmediatePriority,Rte=Zo.unstable_UserBlockingPriority,Ote=Zo.unstable_NormalPriority,Lte=Zo.unstable_LowPriority,Dte=Zo.unstable_IdlePriority,Tj={},pWe=fee!==void 0?fee:function(){},ah=null,BM=null,Ij=!1,hee=tz(),La=1e4>hee?tz:function(){return tz()-hee};function t_(){switch(hWe()){case TC:return 99;case Rte:return 98;case Ote:return 97;case Lte:return 96;case Dte:return 95;default:throw Error(qt(332))}}function Nte(t){switch(t){case 99:return TC;case 98:return Rte;case 97:return Ote;case 96:return Lte;case 95:return Dte;default:throw Error(qt(332))}}function ug(t,e){return t=Nte(t),cWe(t,e)}function l1(t,e,r){return t=Nte(t),$z(t,e,r)}function Zc(){if(BM!==null){var t=BM;BM=null,ez(t)}kte()}function kte(){if(!Ij&&ah!==null){Ij=!0;var t=0;try{var e=ah;ug(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),ah=null}catch(r){throw ah!==null&&(ah=ah.slice(t+1)),$z(TC,Zc),r}finally{Ij=!1}}}var dWe=hg.ReactCurrentBatchConfig;function Zu(t,e){if(t&&t.defaultProps){e=Mi({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var rC=Jp(null),nC=null,By=null,iC=null;function Hz(){iC=By=nC=null}function Wz(t){var e=rC.current;bi(rC),t.type._context._currentValue=e}function qte(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function Zy(t,e){nC=t,iC=By=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Yu=!0),t.firstContext=null)}function Kl(t,e){if(iC!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(iC=t,e=1073741823),e={context:t,observedBits:e,next:null},By===null){if(nC===null)throw Error(qt(308));By=e,nC.dependencies={lanes:0,firstContext:e,responders:null}}else By=By.next=e;return t._currentValue}var Np=!1;function Zz(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Fte(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vp(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gp(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function pee(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function u1(t,e,r,n){var i=t.updateQueue;Np=!1;var o=i.firstBaseUpdate,l=i.lastBaseUpdate,f=i.shared.pending;if(f!==null){i.shared.pending=null;var d=f,v=d.next;d.next=null,l===null?o=v:l.next=v,l=d;var x=t.alternate;if(x!==null){x=x.updateQueue;var b=x.lastBaseUpdate;b!==l&&(b===null?x.firstBaseUpdate=v:b.next=v,x.lastBaseUpdate=d)}}if(o!==null){b=i.baseState,l=0,x=v=d=null;do{f=o.lane;var A=o.eventTime;if((n&f)===f){x!==null&&(x=x.next={eventTime:A,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var P=t,N=o;switch(f=e,A=r,N.tag){case 1:if(P=N.payload,typeof P=="function"){b=P.call(A,b,f);break e}b=P;break e;case 3:P.flags=P.flags&-4097|64;case 0:if(P=N.payload,f=typeof P=="function"?P.call(A,b,f):P,f==null)break e;b=Mi({},b,f);break e;case 2:Np=!0}}o.callback!==null&&(t.flags|=32,f=i.effects,f===null?i.effects=[o]:f.push(o))}else A={eventTime:A,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(v=x=A,d=b):x=x.next=A,l|=f;if(o=o.next,o===null){if(f=i.shared.pending,f===null)break;o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);x===null&&(d=b),i.baseState=d,i.firstBaseUpdate=v,i.lastBaseUpdate=x,g1|=l,t.lanes=l,t.memoizedState=b}}function dee(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(qt(191,i));i.call(n)}}}var jte=new gC.Component().refs;function oC(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Mi({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var IC={isMounted:function(t){return(t=t._reactInternals)?pg(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=wl(),i=$p(t),o=Vp(n,i);o.payload=e,r!=null&&(o.callback=r),Gp(t,o),Hp(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=wl(),i=$p(t),o=Vp(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),Gp(t,o),Hp(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=wl(),n=$p(t),i=Vp(r,n);i.tag=2,e!=null&&(i.callback=e),Gp(t,i),Hp(t,n,r)}};function mee(t,e,r,n,i,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,l):e.prototype&&e.prototype.isPureReactComponent?!a1(r,n)||!a1(i,o):!0}function zte(t,e,r){var n=!1,i=Kp,o=e.contextType;return typeof o=="object"&&o!==null?o=Kl(o):(i=Os(e)?lg:Na.current,n=e.contextTypes,o=(n=n!=null)?e_(t,i):Kp),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=IC,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function gee(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&IC.enqueueReplaceState(e,e.state,null)}function rz(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=jte,Zz(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Kl(o):(o=Os(e)?lg:Na.current,i.context=e_(t,o)),u1(t,r,i,n),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(oC(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&IC.enqueueReplaceState(i,i.state,null),u1(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var OM=Array.isArray;function Cw(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(qt(309));var n=r.stateNode}if(!n)throw Error(qt(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=n.refs;l===jte&&(l=n.refs={}),o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(qt(284));if(!r._owner)throw Error(qt(290,t))}return t}function LM(t,e){if(t.type!=="textarea")throw Error(qt(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Ute(t){function e(D,F){if(t){var U=D.lastEffect;U!==null?(U.nextEffect=F,D.lastEffect=F):D.firstEffect=D.lastEffect=F,F.nextEffect=null,F.flags=8}}function r(D,F){if(!t)return null;for(;F!==null;)e(D,F),F=F.sibling;return null}function n(D,F){for(D=new Map;F!==null;)F.key!==null?D.set(F.key,F):D.set(F.index,F),F=F.sibling;return D}function i(D,F){return D=Qp(D,F),D.index=0,D.sibling=null,D}function o(D,F,U){return D.index=U,t?(U=D.alternate,U!==null?(U=U.index,U<F?(D.flags=2,F):U):(D.flags=2,F)):F}function l(D){return t&&D.alternate===null&&(D.flags=2),D}function f(D,F,U,$){return F===null||F.tag!==6?(F=Rj(U,D.mode,$),F.return=D,F):(F=i(F,U),F.return=D,F)}function d(D,F,U,$){return F!==null&&F.elementType===U.type?($=i(F,U.props),$.ref=Cw(D,F,U),$.return=D,$):($=HM(U.type,U.key,U.props,null,D.mode,$),$.ref=Cw(D,F,U),$.return=D,$)}function v(D,F,U,$){return F===null||F.tag!==4||F.stateNode.containerInfo!==U.containerInfo||F.stateNode.implementation!==U.implementation?(F=Oj(U,D.mode,$),F.return=D,F):(F=i(F,U.children||[]),F.return=D,F)}function x(D,F,U,$,Z){return F===null||F.tag!==7?(F=Qy(U,D.mode,$,Z),F.return=D,F):(F=i(F,U),F.return=D,F)}function b(D,F,U){if(typeof F=="string"||typeof F=="number")return F=Rj(""+F,D.mode,U),F.return=D,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case kw:return U=HM(F.type,F.key,F.props,null,D.mode,U),U.ref=Cw(D,null,F),U.return=D,U;case rg:return F=Oj(F,D.mode,U),F.return=D,F}if(OM(F)||Sw(F))return F=Qy(F,D.mode,U,null),F.return=D,F;LM(D,F)}return null}function A(D,F,U,$){var Z=F!==null?F.key:null;if(typeof U=="string"||typeof U=="number")return Z!==null?null:f(D,F,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case kw:return U.key===Z?U.type===kp?x(D,F,U.props.children,$,Z):d(D,F,U,$):null;case rg:return U.key===Z?v(D,F,U,$):null}if(OM(U)||Sw(U))return Z!==null?null:x(D,F,U,$,null);LM(D,U)}return null}function P(D,F,U,$,Z){if(typeof $=="string"||typeof $=="number")return D=D.get(U)||null,f(F,D,""+$,Z);if(typeof $=="object"&&$!==null){switch($.$$typeof){case kw:return D=D.get($.key===null?U:$.key)||null,$.type===kp?x(F,D,$.props.children,Z,$.key):d(F,D,$,Z);case rg:return D=D.get($.key===null?U:$.key)||null,v(F,D,$,Z)}if(OM($)||Sw($))return D=D.get(U)||null,x(F,D,$,Z,null);LM(F,$)}return null}function N(D,F,U,$){for(var Z=null,ie=null,ne=F,ae=F=0,de=null;ne!==null&&ae<U.length;ae++){ne.index>ae?(de=ne,ne=null):de=ne.sibling;var ye=A(D,ne,U[ae],$);if(ye===null){ne===null&&(ne=de);break}t&&ne&&ye.alternate===null&&e(D,ne),F=o(ye,F,ae),ie===null?Z=ye:ie.sibling=ye,ie=ye,ne=de}if(ae===U.length)return r(D,ne),Z;if(ne===null){for(;ae<U.length;ae++)ne=b(D,U[ae],$),ne!==null&&(F=o(ne,F,ae),ie===null?Z=ne:ie.sibling=ne,ie=ne);return Z}for(ne=n(D,ne);ae<U.length;ae++)de=P(ne,D,ae,U[ae],$),de!==null&&(t&&de.alternate!==null&&ne.delete(de.key===null?ae:de.key),F=o(de,F,ae),ie===null?Z=de:ie.sibling=de,ie=de);return t&&ne.forEach(function(me){return e(D,me)}),Z}function j(D,F,U,$){var Z=Sw(U);if(typeof Z!="function")throw Error(qt(150));if(U=Z.call(U),U==null)throw Error(qt(151));for(var ie=Z=null,ne=F,ae=F=0,de=null,ye=U.next();ne!==null&&!ye.done;ae++,ye=U.next()){ne.index>ae?(de=ne,ne=null):de=ne.sibling;var me=A(D,ne,ye.value,$);if(me===null){ne===null&&(ne=de);break}t&&ne&&me.alternate===null&&e(D,ne),F=o(me,F,ae),ie===null?Z=me:ie.sibling=me,ie=me,ne=de}if(ye.done)return r(D,ne),Z;if(ne===null){for(;!ye.done;ae++,ye=U.next())ye=b(D,ye.value,$),ye!==null&&(F=o(ye,F,ae),ie===null?Z=ye:ie.sibling=ye,ie=ye);return Z}for(ne=n(D,ne);!ye.done;ae++,ye=U.next())ye=P(ne,D,ae,ye.value,$),ye!==null&&(t&&ye.alternate!==null&&ne.delete(ye.key===null?ae:ye.key),F=o(ye,F,ae),ie===null?Z=ye:ie.sibling=ye,ie=ye);return t&&ne.forEach(function(be){return e(D,be)}),Z}return function(D,F,U,$){var Z=typeof U=="object"&&U!==null&&U.type===kp&&U.key===null;Z&&(U=U.props.children);var ie=typeof U=="object"&&U!==null;if(ie)switch(U.$$typeof){case kw:e:{for(ie=U.key,Z=F;Z!==null;){if(Z.key===ie){switch(Z.tag){case 7:if(U.type===kp){r(D,Z.sibling),F=i(Z,U.props.children),F.return=D,D=F;break e}break;default:if(Z.elementType===U.type){r(D,Z.sibling),F=i(Z,U.props),F.ref=Cw(D,Z,U),F.return=D,D=F;break e}}r(D,Z);break}else e(D,Z);Z=Z.sibling}U.type===kp?(F=Qy(U.props.children,D.mode,$,U.key),F.return=D,D=F):($=HM(U.type,U.key,U.props,null,D.mode,$),$.ref=Cw(D,F,U),$.return=D,D=$)}return l(D);case rg:e:{for(Z=U.key;F!==null;){if(F.key===Z){if(F.tag===4&&F.stateNode.containerInfo===U.containerInfo&&F.stateNode.implementation===U.implementation){r(D,F.sibling),F=i(F,U.children||[]),F.return=D,D=F;break e}else{r(D,F);break}}else e(D,F);F=F.sibling}F=Oj(U,D.mode,$),F.return=D,D=F}return l(D)}if(typeof U=="string"||typeof U=="number")return U=""+U,F!==null&&F.tag===6?(r(D,F.sibling),F=i(F,U),F.return=D,D=F):(r(D,F),F=Rj(U,D.mode,$),F.return=D,D=F),l(D);if(OM(U))return N(D,F,U,$);if(Sw(U))return j(D,F,U,$);if(ie&&LM(D,U),typeof U=="undefined"&&!Z)switch(D.tag){case 1:case 22:case 0:case 11:case 15:throw Error(qt(152,Vy(D.type)||"Component"))}return r(D,F)}}var aC=Ute(!0),Bte=Ute(!1),m1={},Hc=Jp(m1),c1=Jp(m1),f1=Jp(m1);function og(t){if(t===m1)throw Error(qt(174));return t}function nz(t,e){switch(Ki(f1,e),Ki(c1,t),Ki(Hc,m1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uj(e,t)}bi(Hc),Ki(Hc,e)}function r_(){bi(Hc),bi(c1),bi(f1)}function vee(t){og(f1.current);var e=og(Hc.current),r=Uj(e,t.type);e!==r&&(Ki(c1,t),Ki(Hc,r))}function Yz(t){c1.current===t&&(bi(Hc),bi(c1))}var Yi=Jp(0);function sC(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lh=null,jp=null,Wc=!1;function Vte(t,e){var r=Zl(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function yee(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function iz(t){if(Wc){var e=jp;if(e){var r=e;if(!yee(t,e)){if(e=Wy(r.nextSibling),!e||!yee(t,e)){t.flags=t.flags&-1025|2,Wc=!1,lh=t;return}Vte(lh,r)}lh=t,jp=Wy(e.firstChild)}else t.flags=t.flags&-1025|2,Wc=!1,lh=t}}function _ee(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lh=t}function DM(t){if(t!==lh)return!1;if(!Wc)return _ee(t),Wc=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Qj(e,t.memoizedProps))for(e=jp;e;)Vte(t,e),e=Wy(e.nextSibling);if(_ee(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(qt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){jp=Wy(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}jp=null}}else jp=lh?Wy(t.stateNode.nextSibling):null;return!0}function Aj(){jp=lh=null,Wc=!1}var Yy=[];function Kz(){for(var t=0;t<Yy.length;t++)Yy[t]._workInProgressVersionPrimary=null;Yy.length=0}var Zw=hg.ReactCurrentDispatcher,Yl=hg.ReactCurrentBatchConfig,h1=0,oo=null,Oa=null,ca=null,lC=!1,Yw=!1;function Cs(){throw Error(qt(321))}function Xz(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Wl(t[r],e[r]))return!1;return!0}function Qz(t,e,r,n,i,o){if(h1=o,oo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zw.current=t===null||t.memoizedState===null?gWe:vWe,t=r(n,i),Yw){o=0;do{if(Yw=!1,!(25>o))throw Error(qt(301));o+=1,ca=Oa=null,e.updateQueue=null,Zw.current=yWe,t=r(n,i)}while(Yw)}if(Zw.current=hC,e=Oa!==null&&Oa.next!==null,h1=0,ca=Oa=oo=null,lC=!1,e)throw Error(qt(300));return t}function ag(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ca===null?oo.memoizedState=ca=t:ca=ca.next=t,ca}function dg(){if(Oa===null){var t=oo.alternate;t=t!==null?t.memoizedState:null}else t=Oa.next;var e=ca===null?oo.memoizedState:ca.next;if(e!==null)ca=e,Oa=t;else{if(t===null)throw Error(qt(310));Oa=t,t={memoizedState:Oa.memoizedState,baseState:Oa.baseState,baseQueue:Oa.baseQueue,queue:Oa.queue,next:null},ca===null?oo.memoizedState=ca=t:ca=ca.next=t}return ca}function Gc(t,e){return typeof e=="function"?e(t):e}function Pw(t){var e=dg(),r=e.queue;if(r===null)throw Error(qt(311));r.lastRenderedReducer=t;var n=Oa,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var l=i.next;i.next=o.next,o.next=l}n.baseQueue=i=o,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var f=l=o=null,d=i;do{var v=d.lane;if((h1&v)===v)f!==null&&(f=f.next={lane:0,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null}),n=d.eagerReducer===t?d.eagerState:t(n,d.action);else{var x={lane:v,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null};f===null?(l=f=x,o=n):f=f.next=x,oo.lanes|=v,g1|=v}d=d.next}while(d!==null&&d!==i);f===null?o=n:f.next=l,Wl(n,e.memoizedState)||(Yu=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=f,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function Rw(t){var e=dg(),r=e.queue;if(r===null)throw Error(qt(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do o=t(o,l.action),l=l.next;while(l!==i);Wl(o,e.memoizedState)||(Yu=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function xee(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(h1&t)===t)&&(e._workInProgressVersionPrimary=n,Yy.push(e))),t)return r(e._source);throw Yy.push(e),Error(qt(350))}function Gte(t,e,r,n){var i=os;if(i===null)throw Error(qt(349));var o=e._getVersion,l=o(e._source),f=Zw.current,d=f.useState(function(){return xee(i,e,r)}),v=d[1],x=d[0];d=ca;var b=t.memoizedState,A=b.refs,P=A.getSnapshot,N=b.source;b=b.subscribe;var j=oo;return t.memoizedState={refs:A,source:e,subscribe:n},f.useEffect(function(){A.getSnapshot=r,A.setSnapshot=v;var D=o(e._source);if(!Wl(l,D)){D=r(e._source),Wl(x,D)||(v(D),D=$p(j),i.mutableReadLanes|=D&i.pendingLanes),D=i.mutableReadLanes,i.entangledLanes|=D;for(var F=i.entanglements,U=D;0<U;){var $=31-Yp(U),Z=1<<$;F[$]|=D,U&=~Z}}},[r,e,n]),f.useEffect(function(){return n(e._source,function(){var D=A.getSnapshot,F=A.setSnapshot;try{F(D(e._source));var U=$p(j);i.mutableReadLanes|=U&i.pendingLanes}catch($){F(function(){throw $})}})},[e,n]),Wl(P,r)&&Wl(N,e)&&Wl(b,n)||(t={pending:null,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:x},t.dispatch=v=t4.bind(null,oo,t),d.queue=t,d.baseQueue=null,x=xee(i,e,r),d.memoizedState=d.baseState=x),x}function $te(t,e,r){var n=dg();return Gte(n,t,e,r)}function Ow(t){var e=ag();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:t},t=t.dispatch=t4.bind(null,oo,t),[e.memoizedState,t]}function uC(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=oo.updateQueue,e===null?(e={lastEffect:null},oo.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function bee(t){var e=ag();return t={current:t},e.memoizedState=t}function cC(){return dg().memoizedState}function oz(t,e,r,n){var i=ag();oo.flags|=t,i.memoizedState=uC(1|e,r,void 0,n===void 0?null:n)}function Jz(t,e,r,n){var i=dg();n=n===void 0?null:n;var o=void 0;if(Oa!==null){var l=Oa.memoizedState;if(o=l.destroy,n!==null&&Xz(n,l.deps)){uC(e,r,o,n);return}}oo.flags|=t,i.memoizedState=uC(1|e,r,o,n)}function wee(t,e){return oz(516,4,t,e)}function fC(t,e){return Jz(516,4,t,e)}function Hte(t,e){return Jz(4,2,t,e)}function Wte(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zte(t,e,r){return r=r!=null?r.concat([t]):null,Jz(4,2,Wte.bind(null,e,t),r)}function e4(){}function Yte(t,e){var r=dg();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Xz(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Kte(t,e){var r=dg();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Xz(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function mWe(t,e){var r=t_();ug(98>r?98:r,function(){t(!0)}),ug(97<r?97:r,function(){var n=Yl.transition;Yl.transition=1;try{t(!1),e()}finally{Yl.transition=n}})}function t4(t,e,r){var n=wl(),i=$p(t),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},l=e.pending;if(l===null?o.next=o:(o.next=l.next,l.next=o),e.pending=o,l=t.alternate,t===oo||l!==null&&l===oo)Yw=lC=!0;else{if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,d=l(f,r);if(o.eagerReducer=l,o.eagerState=d,Wl(d,f))return}catch(v){}finally{}Hp(t,i,n)}}var hC={readContext:Kl,useCallback:Cs,useContext:Cs,useEffect:Cs,useImperativeHandle:Cs,useLayoutEffect:Cs,useMemo:Cs,useReducer:Cs,useRef:Cs,useState:Cs,useDebugValue:Cs,useDeferredValue:Cs,useTransition:Cs,useMutableSource:Cs,useOpaqueIdentifier:Cs,unstable_isNewReconciler:!1},gWe={readContext:Kl,useCallback:function(t,e){return ag().memoizedState=[t,e===void 0?null:e],t},useContext:Kl,useEffect:wee,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,oz(4,2,Wte.bind(null,e,t),r)},useLayoutEffect:function(t,e){return oz(4,2,t,e)},useMemo:function(t,e){var r=ag();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ag();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=t4.bind(null,oo,t),[n.memoizedState,t]},useRef:bee,useState:Ow,useDebugValue:e4,useDeferredValue:function(t){var e=Ow(t),r=e[0],n=e[1];return wee(function(){var i=Yl.transition;Yl.transition=1;try{n(t)}finally{Yl.transition=i}},[t]),r},useTransition:function(){var t=Ow(!1),e=t[0];return t=mWe.bind(null,t[1]),bee(t),[t,e]},useMutableSource:function(t,e,r){var n=ag();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},Gte(n,t,e,r)},useOpaqueIdentifier:function(){if(Wc){var t=!1,e=uWe(function(){throw t||(t=!0,r("r:"+(Sj++).toString(36))),Error(qt(355))}),r=Ow(e)[1];return(oo.mode&2)===0&&(oo.flags|=516,uC(5,function(){r("r:"+(Sj++).toString(36))},void 0,null)),e}return e="r:"+(Sj++).toString(36),Ow(e),e},unstable_isNewReconciler:!1},vWe={readContext:Kl,useCallback:Yte,useContext:Kl,useEffect:fC,useImperativeHandle:Zte,useLayoutEffect:Hte,useMemo:Kte,useReducer:Pw,useRef:cC,useState:function(){return Pw(Gc)},useDebugValue:e4,useDeferredValue:function(t){var e=Pw(Gc),r=e[0],n=e[1];return fC(function(){var i=Yl.transition;Yl.transition=1;try{n(t)}finally{Yl.transition=i}},[t]),r},useTransition:function(){var t=Pw(Gc)[0];return[cC().current,t]},useMutableSource:$te,useOpaqueIdentifier:function(){return Pw(Gc)[0]},unstable_isNewReconciler:!1},yWe={readContext:Kl,useCallback:Yte,useContext:Kl,useEffect:fC,useImperativeHandle:Zte,useLayoutEffect:Hte,useMemo:Kte,useReducer:Rw,useRef:cC,useState:function(){return Rw(Gc)},useDebugValue:e4,useDeferredValue:function(t){var e=Rw(Gc),r=e[0],n=e[1];return fC(function(){var i=Yl.transition;Yl.transition=1;try{n(t)}finally{Yl.transition=i}},[t]),r},useTransition:function(){var t=Rw(Gc)[0];return[cC().current,t]},useMutableSource:$te,useOpaqueIdentifier:function(){return Rw(Gc)[0]},unstable_isNewReconciler:!1},_We=hg.ReactCurrentOwner,Yu=!1;function Ps(t,e,r,n){e.child=t===null?Bte(e,null,r,n):aC(e,t.child,r,n)}function Eee(t,e,r,n,i){r=r.render;var o=e.ref;return Zy(e,i),n=Qz(t,e,r,n,o,i),t!==null&&!Yu?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,uh(t,e,i)):(e.flags|=1,Ps(t,e,n,i),e.child)}function See(t,e,r,n,i,o){if(t===null){var l=r.type;return typeof l=="function"&&!s4(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=l,Xte(t,e,l,n,i,o)):(t=HM(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}return l=t.child,(i&o)===0&&(i=l.memoizedProps,r=r.compare,r=r!==null?r:a1,r(i,n)&&t.ref===e.ref)?uh(t,e,o):(e.flags|=1,t=Qp(l,n),t.ref=e.ref,t.return=e,e.child=t)}function Xte(t,e,r,n,i,o){if(t!==null&&a1(t.memoizedProps,n)&&t.ref===e.ref)if(Yu=!1,(o&i)!==0)(t.flags&16384)!==0&&(Yu=!0);else return e.lanes=t.lanes,uh(t,e,o);return az(t,e,r,n,o)}function Mj(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if((e.mode&4)===0)e.memoizedState={baseLanes:0},kM(e,r);else if((r&1073741824)!==0)e.memoizedState={baseLanes:0},kM(e,o!==null?o.baseLanes:r);else return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},kM(e,t),null;}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,kM(e,n);return Ps(t,e,i,r),e.child}function Qte(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function az(t,e,r,n,i){var o=Os(r)?lg:Na.current;return o=e_(e,o),Zy(e,i),r=Qz(t,e,r,n,o,i),t!==null&&!Yu?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,uh(t,e,i)):(e.flags|=1,Ps(t,e,r,i),e.child)}function Tee(t,e,r,n,i){if(Os(r)){var o=!0;UM(e)}else o=!1;if(Zy(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),zte(e,r,n),rz(e,r,n,i),n=!0;else if(t===null){var l=e.stateNode,f=e.memoizedProps;l.props=f;var d=l.context,v=r.contextType;typeof v=="object"&&v!==null?v=Kl(v):(v=Os(r)?lg:Na.current,v=e_(e,v));var x=r.getDerivedStateFromProps,b=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";b||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==n||d!==v)&&gee(e,l,n,v),Np=!1;var A=e.memoizedState;l.state=A,u1(e,n,l,i),d=e.memoizedState,f!==n||A!==d||Rs.current||Np?(typeof x=="function"&&(oC(e,r,x,n),d=e.memoizedState),(f=Np||mee(e,r,f,n,A,d,v))?(b||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4)):(typeof l.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=d),l.props=n,l.state=d,l.context=v,n=f):(typeof l.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{l=e.stateNode,Fte(t,e),f=e.memoizedProps,v=e.type===e.elementType?f:Zu(e.type,f),l.props=v,b=e.pendingProps,A=l.context,d=r.contextType,typeof d=="object"&&d!==null?d=Kl(d):(d=Os(r)?lg:Na.current,d=e_(e,d));var P=r.getDerivedStateFromProps;(x=typeof P=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(f!==b||A!==d)&&gee(e,l,n,d),Np=!1,A=e.memoizedState,l.state=A,u1(e,n,l,i);var N=e.memoizedState;f!==b||A!==N||Rs.current||Np?(typeof P=="function"&&(oC(e,r,P,n),N=e.memoizedState),(v=Np||mee(e,r,v,n,A,N,d))?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,N,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,N,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof l.componentDidUpdate!="function"||f===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&A===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=N),l.props=n,l.state=N,l.context=d,n=v):(typeof l.componentDidUpdate!="function"||f===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&A===t.memoizedState||(e.flags|=256),n=!1)}return sz(t,e,r,n,o,i)}function sz(t,e,r,n,i,o){Qte(t,e);var l=(e.flags&64)!==0;if(!n&&!l)return i&&cee(e,r,!1),uh(t,e,o);n=e.stateNode,_We.current=e;var f=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=aC(e,t.child,null,o),e.child=aC(e,null,f,o)):Ps(t,e,f,o),e.memoizedState=n.state,i&&cee(e,r,!0),e.child}function Iee(t){var e=t.stateNode;e.pendingContext?uee(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uee(t,e.context,!1),nz(t,e.containerInfo)}var NM={dehydrated:null,retryLane:0};function Aee(t,e,r){var n=e.pendingProps,i=Yi.current,o=!1,l;return(l=(e.flags&64)!==0)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Ki(Yi,i&1),t===null?(n.fallback!==void 0&&iz(e),t=n.children,i=n.fallback,o?(t=Mee(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=NM,t):typeof n.unstable_expectedLoadTime=="number"?(t=Mee(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=NM,e.lanes=33554432,t):(r=l4({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?o?(n=Pee(t,e,n.children,n.fallback,r),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=t.childLanes&~r,e.memoizedState=NM,n):(r=Cee(t,e,n.children,r),e.memoizedState=null,r):o?(n=Pee(t,e,n.children,n.fallback,r),o=e.child,i=t.child.memoizedState,o.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},o.childLanes=t.childLanes&~r,e.memoizedState=NM,n):(r=Cee(t,e,n.children,r),e.memoizedState=null,r)}function Mee(t,e,r,n){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},(i&2)===0&&o!==null?(o.childLanes=0,o.pendingProps=e):o=l4(e,i,0,null),r=Qy(r,i,n,null),o.return=t,r.return=t,o.sibling=r,t.child=o,r}function Cee(t,e,r,n){var i=t.child;return t=i.sibling,r=Qp(i,{mode:"visible",children:r}),(e.mode&2)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function Pee(t,e,r,n,i){var o=e.mode,l=t.child;t=l.sibling;var f={mode:"hidden",children:r};return(o&2)===0&&e.child!==l?(r=e.child,r.childLanes=0,r.pendingProps=f,l=r.lastEffect,l!==null?(e.firstEffect=r.firstEffect,e.lastEffect=l,l.nextEffect=null):e.firstEffect=e.lastEffect=null):r=Qp(l,f),t!==null?n=Qp(t,n):(n=Qy(n,o,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function Ree(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qte(t.return,e)}function Cj(t,e,r,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=i,l.lastEffect=o)}function Oee(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Ps(t,e,n.children,r),n=Yi.current,(n&2)!==0)n=n&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ree(t,r);else if(t.tag===19)Ree(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ki(Yi,n),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&sC(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Cj(e,!1,i,r,o,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sC(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Cj(e,!0,r,null,o,e.lastEffect);break;case"together":Cj(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function uh(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),g1|=e.lanes,(r&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(qt(153));if(e.child!==null){for(t=e.child,r=Qp(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Qp(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var Jte,lz,ere,tre;Jte=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lz=function(){};ere=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,og(Hc.current);var o=null;switch(r){case"input":i=Nj(t,i),n=Nj(t,n),o=[];break;case"option":i=Fj(t,i),n=Fj(t,n),o=[];break;case"select":i=Mi({},i,{value:void 0}),n=Mi({},n,{value:void 0}),o=[];break;case"textarea":i=jj(t,i),n=jj(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=JM)}Bj(r,n);var l;r=null;for(v in i)if(!n.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var f=i[v];for(l in f)f.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Jw.hasOwnProperty(v)?o||(o=[]):(o=o||[]).push(v,null));for(v in n){var d=n[v];if(f=i!=null?i[v]:void 0,n.hasOwnProperty(v)&&d!==f&&(d!=null||f!=null))if(v==="style"){if(f){for(l in f)!f.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&f[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(o||(o=[]),o.push(v,r)),r=d;}else v==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,f=f?f.__html:void 0,d!=null&&f!==d&&(o=o||[]).push(v,d)):v==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(v,""+d):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Jw.hasOwnProperty(v)?(d!=null&&v==="onScroll"&&xi("scroll",t),o||f===d||(o=[])):typeof d=="object"&&d!==null&&d.$$typeof===Mz?d.toString():(o=o||[]).push(v,d))}r&&(o=o||[]).push("style",r);var v=o;(e.updateQueue=v)&&(e.flags|=4)}};tre=function(t,e,r,n){r!==n&&(e.flags|=4)};function Lw(t,e){if(!Wc)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function xWe(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Os(e.type)&&tC(),null;case 3:return r_(),bi(Rs),bi(Na),Kz(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(DM(e)?e.flags|=4:n.hydrate||(e.flags|=256)),lz(e),null;case 5:Yz(e);var i=og(f1.current);if(r=e.type,t!==null&&e.stateNode!=null)ere(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(qt(166));return null}if(t=og(Hc.current),DM(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Fp]=e,n[eC]=o,r){case"dialog":xi("cancel",n),xi("close",n);break;case"iframe":case"object":case"embed":xi("load",n);break;case"video":case"audio":for(t=0;t<Fw.length;t++)xi(Fw[t],n);break;case"source":xi("error",n);break;case"img":case"image":case"link":xi("error",n),xi("load",n);break;case"details":xi("toggle",n);break;case"input":DJ(n,o),xi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},xi("invalid",n);break;case"textarea":kJ(n,o),xi("invalid",n)}Bj(r,o),t=null;for(var l in o)o.hasOwnProperty(l)&&(i=o[l],l==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):Jw.hasOwnProperty(l)&&i!=null&&l==="onScroll"&&xi("scroll",n));switch(r){case"input":TM(n),NJ(n,o,!0);break;case"textarea":TM(n),qJ(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=JM)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(l=i.nodeType===9?i:i.ownerDocument,t===zj.html&&(t=Zee(r)),t===zj.html?r==="script"?(t=l.createElement("div"),t.innerHTML="<script></script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),r==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[Fp]=e,t[eC]=n,Jte(t,e,!1,!1),e.stateNode=t,l=Vj(r,n),r){case"dialog":xi("cancel",t),xi("close",t),i=n;break;case"iframe":case"object":case"embed":xi("load",t),i=n;break;case"video":case"audio":for(i=0;i<Fw.length;i++)xi(Fw[i],t);i=n;break;case"source":xi("error",t),i=n;break;case"img":case"image":case"link":xi("error",t),xi("load",t),i=n;break;case"details":xi("toggle",t),i=n;break;case"input":DJ(t,n),i=Nj(t,n),xi("invalid",t);break;case"option":i=Fj(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Mi({},n,{value:void 0}),xi("invalid",t);break;case"textarea":kJ(t,n),i=jj(t,n),xi("invalid",t);break;default:i=n}Bj(r,i);var f=i;for(o in f)if(f.hasOwnProperty(o)){var d=f[o];o==="style"?Xee(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Yee(t,d)):o==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&e1(t,d):typeof d=="number"&&e1(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jw.hasOwnProperty(o)?d!=null&&o==="onScroll"&&xi("scroll",t):d!=null&&wz(t,o,d,l))}switch(r){case"input":TM(t),NJ(t,n,!1);break;case"textarea":TM(t),qJ(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Zp(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Gy(t,!!n.multiple,o,!1):n.defaultValue!=null&&Gy(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=JM)}Mte(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)tre(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(qt(166));r=og(f1.current),og(Hc.current),DM(e)?(n=e.stateNode,r=e.memoizedProps,n[Fp]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Fp]=e,e.stateNode=n)}return null;case 13:return bi(Yi),n=e.memoizedState,(e.flags&64)!==0?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&DM(e):r=t.memoizedState!==null,n&&!r&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Yi.current&1)!==0?fa===0&&(fa=3):((fa===0||fa===3)&&(fa=4),os===null||(g1&134217727)===0&&(a_&134217727)===0||Ky(os,Da))),(n||r)&&(e.flags|=4),null);case 4:return r_(),lz(e),t===null&&Tte(e.stateNode.containerInfo),null;case 10:return Wz(e),null;case 17:return Os(e.type)&&tC(),null;case 19:if(bi(Yi),n=e.memoizedState,n===null)return null;if(o=(e.flags&64)!==0,l=n.rendering,l===null){if(o)Lw(n,!1);else{if(fa!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(l=sC(t),l!==null){for(e.flags|=64,Lw(n,!1),o=l.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ki(Yi,Yi.current&1|2),e.child}t=t.sibling}n.tail!==null&&La()>dz&&(e.flags|=64,o=!0,Lw(n,!1),e.lanes=33554432)}}else{if(!o)if(t=sC(l),t!==null){if(e.flags|=64,o=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Lw(n,!0),n.tail===null&&n.tailMode==="hidden"&&!l.alternate&&!Wc)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*La()-n.renderingStartTime>dz&&r!==1073741824&&(e.flags|=64,o=!0,Lw(n,!1),e.lanes=33554432);n.isBackwards?(l.sibling=e.child,e.child=l):(r=n.last,r!==null?r.sibling=l:e.child=l,n.last=l)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=La(),r.sibling=null,e=Yi.current,Ki(Yi,o?e&1|2:e&1),r):null;case 23:case 24:return a4(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(qt(156,e.tag))}function bWe(t){switch(t.tag){case 1:Os(t.type)&&tC();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(r_(),bi(Rs),bi(Na),Kz(),e=t.flags,(e&64)!==0)throw Error(qt(285));return t.flags=e&-4097|64,t;case 5:return Yz(t),null;case 13:return bi(Yi),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return bi(Yi),null;case 4:return r_(),null;case 10:return Wz(t),null;case 23:case 24:return a4(),null;default:return null}}function r4(t,e){try{var r="",n=e;do r+=tHe(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i}}function uz(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var wWe=typeof WeakMap=="function"?WeakMap:Map;function rre(t,e,r){r=Vp(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){dC||(dC=!0,mz=n),uz(t,e)},r}function nre(t,e,r){r=Vp(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return uz(t,e),n(i)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&($c===null?$c=new Set([this]):$c.add(this),uz(t,e));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}var EWe=typeof WeakSet=="function"?WeakSet:Set;function Lee(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){Wp(t,r)}else e.current=null}function SWe(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:Zu(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Vz(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(qt(163))}function TWe(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(hre(r,t),LWe(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:Zu(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&dee(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}dee(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&Mte(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&ste(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(qt(163))}function Dee(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=Kee("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Nee(t,e){if(sg&&typeof sg.onCommitFiberUnmount=="function")try{sg.onCommitFiberUnmount(Gz,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!==0)hre(e,r);else{n=e;try{i()}catch(o){Wp(n,o)}}r=r.next}while(r!==t)}break;case 1:if(Lee(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Wp(e,o)}break;case 5:Lee(e);break;case 4:ire(t,e)}}function kee(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function qee(t){return t.tag===5||t.tag===3||t.tag===4}function Fee(t){e:{for(var e=t.return;e!==null;){if(qee(e))break e;e=e.return}throw Error(qt(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(qt(161))}r.flags&16&&(e1(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||qee(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?cz(t,r,e):fz(t,r,e)}function cz(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=JM));else if(n!==4&&(t=t.child,t!==null))for(cz(t,e,r),t=t.sibling;t!==null;)cz(t,e,r),t=t.sibling}function fz(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(fz(t,e,r),t=t.sibling;t!==null;)fz(t,e,r),t=t.sibling}function ire(t,e){for(var r=e,n=!1,i,o;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(qt(160));switch(i=n.stateNode,n.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var l=t,f=r,d=f;;)if(Nee(l,d),d.child!==null&&d.tag!==4)d.child.return=d,d=d.child;else{if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}o?(l=i,f=r.stateNode,l.nodeType===8?l.parentNode.removeChild(f):l.removeChild(f)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(Nee(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function Pj(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,o!==null){for(r[eC]=n,t==="input"&&n.type==="radio"&&n.name!=null&&Hee(r,n),Vj(t,i),e=Vj(t,n),i=0;i<o.length;i+=2){var l=o[i],f=o[i+1];l==="style"?Xee(r,f):l==="dangerouslySetInnerHTML"?Yee(r,f):l==="children"?e1(r,f):wz(r,l,f,e)}switch(t){case"input":kj(r,n);break;case"textarea":Wee(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,o=n.value,o!=null?Gy(r,!!n.multiple,o,!1):t!==!!n.multiple&&(n.defaultValue!=null?Gy(r,!!n.multiple,n.defaultValue,!0):Gy(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(qt(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,ste(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(o4=La(),Dee(e.child,!0)),jee(e);return;case 19:jee(e);return;case 17:return;case 23:case 24:Dee(e,e.memoizedState!==null);return}throw Error(qt(163))}function jee(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new EWe),e.forEach(function(n){var i=kWe.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function IWe(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var AWe=Math.ceil,pC=hg.ReactCurrentDispatcher,n4=hg.ReactCurrentOwner,Fr=0,os=null,Do=null,Da=0,cg=0,hz=Jp(0),fa=0,AC=null,o_=0,g1=0,a_=0,i4=0,pz=null,o4=0,dz=1/0;function s_(){dz=La()+500}var er=null,dC=!1,mz=null,$c=null,Xp=!1,Kw=null,jw=90,gz=[],vz=[],ch=null,Xw=0,yz=null,VM=-1,sh=0,GM=0,Qw=null,$M=!1;function wl(){return(Fr&48)!==0?La():VM!==-1?VM:VM=La()}function $p(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return t_()===99?1:2;if(sh===0&&(sh=o_),dWe.transition!==0){GM!==0&&(GM=pz!==null?pz.pendingLanes:0),t=sh;var e=4186112&~GM;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=t_(),(Fr&4)!==0&&t===98?t=XM(12,sh):(t=vHe(t),t=XM(t,sh)),t}function Hp(t,e,r){if(50<Xw)throw Xw=0,yz=null,Error(qt(185));if(t=MC(t,e),t===null)return null;xC(t,e,r),t===os&&(a_|=e,fa===4&&Ky(t,Da));var n=t_();e===1?(Fr&8)!==0&&(Fr&48)===0?_z(t):(Xl(t,r),Fr===0&&(s_(),Zc())):((Fr&4)===0||n!==98&&n!==99||(ch===null?ch=new Set([t]):ch.add(t)),Xl(t,r)),pz=t}function MC(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function Xl(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-Yp(l),d=1<<f,v=o[f];if(v===-1){if((d&n)===0||(d&i)!==0){v=e,Ny(d);var x=ci;o[f]=10<=x?v+250:6<=x?v+5e3:-1}}else v<=e&&(t.expiredLanes|=d);l&=~d}if(n=i1(t,t===os?Da:0),e=ci,n===0)r!==null&&(r!==Tj&&ez(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==Tj&&ez(r)}e===15?(r=_z.bind(null,t),ah===null?(ah=[r],BM=$z(TC,kte)):ah.push(r),r=Tj):e===14?r=l1(99,_z.bind(null,t)):(r=yHe(e),r=l1(r,ore.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function ore(t){if(VM=-1,GM=sh=0,(Fr&48)!==0)throw Error(qt(327));var e=t.callbackNode;if(ed()&&t.callbackNode!==e)return null;var r=i1(t,t===os?Da:0);if(r===0)return null;var n=r,i=Fr;Fr|=16;var o=ure();(os!==t||Da!==n)&&(s_(),Xy(t,n));do try{PWe();break}catch(f){lre(t,f)}while(!0);if(Hz(),pC.current=o,Fr=i,Do!==null?n=0:(os=null,Da=0,n=fa),(o_&a_)!==0)Xy(t,0);else if(n!==0){if(n===2&&(Fr|=64,t.hydrate&&(t.hydrate=!1,Vz(t.containerInfo)),r=dte(t),r!==0&&(n=zw(t,r))),n===1)throw e=AC,Xy(t,0),Ky(t,r),Xl(t,La()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(qt(345));case 2:tg(t);break;case 3:if(Ky(t,r),(r&62914560)===r&&(n=o4+500-La(),10<n)){if(i1(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=aee(tg.bind(null,t),n);break}tg(t);break;case 4:if(Ky(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var l=31-Yp(r);o=1<<l,l=n[l],l>i&&(i=l),r&=~o}if(r=i,r=La()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AWe(r/1960))-r,10<r){t.timeoutHandle=aee(tg.bind(null,t),r);break}tg(t);break;case 5:tg(t);break;default:throw Error(qt(329))}}return Xl(t,La()),t.callbackNode===e?ore.bind(null,t):null}function Ky(t,e){for(e&=~i4,e&=~a_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Yp(e),n=1<<r;t[r]=-1,e&=~n}}function _z(t){if((Fr&48)!==0)throw Error(qt(327));if(ed(),t===os&&(t.expiredLanes&Da)!==0){var e=Da,r=zw(t,e);(o_&a_)!==0&&(e=i1(t,e),r=zw(t,e))}else e=i1(t,0),r=zw(t,e);if(t.tag!==0&&r===2&&(Fr|=64,t.hydrate&&(t.hydrate=!1,Vz(t.containerInfo)),e=dte(t),e!==0&&(r=zw(t,e))),r===1)throw r=AC,Xy(t,0),Ky(t,e),Xl(t,La()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,tg(t),Xl(t,La()),null}function MWe(){if(ch!==null){var t=ch;ch=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Xl(e,La())})}Zc()}function are(t,e){var r=Fr;Fr|=1;try{return t(e)}finally{Fr=r,Fr===0&&(s_(),Zc())}}function sre(t,e){var r=Fr;Fr&=-2,Fr|=8;try{return t(e)}finally{Fr=r,Fr===0&&(s_(),Zc())}}function kM(t,e){Ki(hz,cg),cg|=e,o_|=e}function a4(){cg=hz.current,bi(hz)}function Xy(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,lWe(r)),Do!==null)for(r=Do.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&tC();break;case 3:r_(),bi(Rs),bi(Na),Kz();break;case 5:Yz(n);break;case 4:r_();break;case 13:bi(Yi);break;case 19:bi(Yi);break;case 10:Wz(n);break;case 23:case 24:a4()}r=r.return}os=t,Do=Qp(t.current,null),Da=cg=o_=e,fa=0,AC=null,i4=a_=g1=0}function lre(t,e){do{var r=Do;try{if(Hz(),Zw.current=hC,lC){for(var n=oo.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}lC=!1}if(h1=0,ca=Oa=oo=null,Yw=!1,n4.current=null,r===null||r.return===null){fa=1,AC=e,Do=null;break}e:{var o=t,l=r.return,f=r,d=e;if(e=Da,f.flags|=2048,f.firstEffect=f.lastEffect=null,d!==null&&typeof d=="object"&&typeof d.then=="function"){var v=d;if((f.mode&2)===0){var x=f.alternate;x?(f.updateQueue=x.updateQueue,f.memoizedState=x.memoizedState,f.lanes=x.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=(Yi.current&1)!==0,A=l;do{var P;if(P=A.tag===13){var N=A.memoizedState;if(N!==null)P=N.dehydrated!==null;else{var j=A.memoizedProps;P=j.fallback===void 0?!1:j.unstable_avoidThisFallback!==!0?!0:!b}}if(P){var D=A.updateQueue;if(D===null){var F=new Set;F.add(v),A.updateQueue=F}else D.add(v);if((A.mode&2)===0){if(A.flags|=64,f.flags|=16384,f.flags&=-2981,f.tag===1)if(f.alternate===null)f.tag=17;else{var U=Vp(-1,1);U.tag=2,Gp(f,U)}f.lanes|=1;break e}d=void 0,f=e;var $=o.pingCache;if($===null?($=o.pingCache=new wWe,d=new Set,$.set(v,d)):(d=$.get(v),d===void 0&&(d=new Set,$.set(v,d))),!d.has(f)){d.add(f);var Z=NWe.bind(null,o,v,f);v.then(Z,Z)}A.flags|=4096,A.lanes=e;break e}A=A.return}while(A!==null);d=Error((Vy(f.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}fa!==5&&(fa=2),d=r4(d,f),A=l;do{switch(A.tag){case 3:o=d,A.flags|=4096,e&=-e,A.lanes|=e;var ie=rre(A,o,e);pee(A,ie);break e;case 1:o=d;var ne=A.type,ae=A.stateNode;if((A.flags&64)===0&&(typeof ne.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&($c===null||!$c.has(ae)))){A.flags|=4096,e&=-e,A.lanes|=e;var de=nre(A,o,e);pee(A,de);break e}}A=A.return}while(A!==null)}fre(r)}catch(ye){e=ye,Do===r&&r!==null&&(Do=r=r.return);continue}break}while(!0)}function ure(){var t=pC.current;return pC.current=hC,t===null?hC:t}function zw(t,e){var r=Fr;Fr|=16;var n=ure();os===t&&Da===e||Xy(t,e);do try{CWe();break}catch(i){lre(t,i)}while(!0);if(Hz(),Fr=r,pC.current=n,Do!==null)throw Error(qt(261));return os=null,Da=0,fa}function CWe(){for(;Do!==null;)cre(Do)}function PWe(){for(;Do!==null&&!fWe();)cre(Do)}function cre(t){var e=pre(t.alternate,t,cg);t.memoizedProps=t.pendingProps,e===null?fre(t):Do=e,n4.current=null}function fre(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&2048)===0){if(r=xWe(r,e,cg),r!==null){Do=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||(cg&1073741824)!==0||(r.mode&4)===0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(r=bWe(e),r!==null){r.flags&=2047,Do=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){Do=e;return}Do=e=t}while(e!==null);fa===0&&(fa=5)}function tg(t){var e=t_();return ug(99,RWe.bind(null,t,e)),null}function RWe(t,e){do ed();while(Kw!==null);if((Fr&48)!==0)throw Error(qt(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(qt(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var l=t.eventTimes,f=t.expirationTimes;0<o;){var d=31-Yp(o),v=1<<d;i[d]=0,l[d]=-1,f[d]=-1,o&=~v}if(ch!==null&&(n&24)===0&&ch.has(t)&&ch.delete(t),t===os&&(Do=os=null,Da=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=Fr,Fr|=32,n4.current=null,wj=FM,l=eee(),Yj(l)){if("selectionStart"in l)f={start:l.selectionStart,end:l.selectionEnd};else e:if(f=(f=l.ownerDocument)&&f.defaultView||window,(v=f.getSelection&&f.getSelection())&&v.rangeCount!==0){f=v.anchorNode,o=v.anchorOffset,d=v.focusNode,v=v.focusOffset;try{f.nodeType,d.nodeType}catch(ye){f=null;break e}var x=0,b=-1,A=-1,P=0,N=0,j=l,D=null;t:for(;;){for(var F;j!==f||o!==0&&j.nodeType!==3||(b=x+o),j!==d||v!==0&&j.nodeType!==3||(A=x+v),j.nodeType===3&&(x+=j.nodeValue.length),(F=j.firstChild)!==null;)D=j,j=F;for(;;){if(j===l)break t;if(D===f&&++P===o&&(b=x),D===d&&++N===v&&(A=x),(F=j.nextSibling)!==null)break;j=D,D=j.parentNode}j=F}f=b===-1||A===-1?null:{start:b,end:A}}else f=null;f=f||{start:0,end:0}}else f=null;Ej={focusedElem:l,selectionRange:f},FM=!1,Qw=null,$M=!1,er=n;do try{OWe()}catch(ye){if(er===null)throw Error(qt(330));Wp(er,ye),er=er.nextEffect}while(er!==null);Qw=null,er=n;do try{for(l=t;er!==null;){var U=er.flags;if(U&16&&e1(er.stateNode,""),U&128){var $=er.alternate;if($!==null){var Z=$.ref;Z!==null&&(typeof Z=="function"?Z(null):Z.current=null)}}switch(U&1038){case 2:Fee(er),er.flags&=-3;break;case 6:Fee(er),er.flags&=-3,Pj(er.alternate,er);break;case 1024:er.flags&=-1025;break;case 1028:er.flags&=-1025,Pj(er.alternate,er);break;case 4:Pj(er.alternate,er);break;case 8:f=er,ire(l,f);var ie=f.alternate;kee(f),ie!==null&&kee(ie)}er=er.nextEffect}}catch(ye){if(er===null)throw Error(qt(330));Wp(er,ye),er=er.nextEffect}while(er!==null);if(Z=Ej,$=eee(),U=Z.focusedElem,l=Z.selectionRange,$!==U&&U&&U.ownerDocument&&wte(U.ownerDocument.documentElement,U)){for(l!==null&&Yj(U)&&($=l.start,Z=l.end,Z===void 0&&(Z=$),"selectionStart"in U?(U.selectionStart=$,U.selectionEnd=Math.min(Z,U.value.length)):(Z=($=U.ownerDocument||document)&&$.defaultView||window,Z.getSelection&&(Z=Z.getSelection(),f=U.textContent.length,ie=Math.min(l.start,f),l=l.end===void 0?ie:Math.min(l.end,f),!Z.extend&&ie>l&&(f=l,l=ie,ie=f),f=JJ(U,ie),o=JJ(U,l),f&&o&&(Z.rangeCount!==1||Z.anchorNode!==f.node||Z.anchorOffset!==f.offset||Z.focusNode!==o.node||Z.focusOffset!==o.offset)&&($=$.createRange(),$.setStart(f.node,f.offset),Z.removeAllRanges(),ie>l?(Z.addRange($),Z.extend(o.node,o.offset)):($.setEnd(o.node,o.offset),Z.addRange($)))))),$=[],Z=U;Z=Z.parentNode;)Z.nodeType===1&&$.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<$.length;U++)Z=$[U],Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}FM=!!wj,Ej=wj=null,t.current=r,er=n;do try{for(U=t;er!==null;){var ne=er.flags;if(ne&36&&TWe(U,er.alternate,er),ne&128){$=void 0;var ae=er.ref;if(ae!==null){var de=er.stateNode;switch(er.tag){case 5:$=de;break;default:$=de}typeof ae=="function"?ae($):ae.current=$}}er=er.nextEffect}}catch(ye){if(er===null)throw Error(qt(330));Wp(er,ye),er=er.nextEffect}while(er!==null);er=null,pWe(),Fr=i}else t.current=r;if(Xp)Xp=!1,Kw=t,jw=e;else for(er=n;er!==null;)e=er.nextEffect,er.nextEffect=null,er.flags&8&&(ne=er,ne.sibling=null,ne.stateNode=null),er=e;if(n=t.pendingLanes,n===0&&($c=null),n===1?t===yz?Xw++:(Xw=0,yz=t):Xw=0,r=r.stateNode,sg&&typeof sg.onCommitFiberRoot=="function")try{sg.onCommitFiberRoot(Gz,r,void 0,(r.current.flags&64)===64)}catch(ye){}if(Xl(t,La()),dC)throw dC=!1,t=mz,mz=null,t;return(Fr&8)!==0||Zc(),null}function OWe(){for(;er!==null;){var t=er.alternate;$M||Qw===null||((er.flags&8)!==0?zJ(er,Qw)&&($M=!0):er.tag===13&&IWe(t,er)&&zJ(er,Qw)&&($M=!0));var e=er.flags;(e&256)!==0&&SWe(t,er),(e&512)===0||Xp||(Xp=!0,l1(97,function(){return ed(),null})),er=er.nextEffect}}function ed(){if(jw!==90){var t=97<jw?97:jw;return jw=90,ug(t,DWe)}return!1}function LWe(t,e){gz.push(e,t),Xp||(Xp=!0,l1(97,function(){return ed(),null}))}function hre(t,e){vz.push(e,t),Xp||(Xp=!0,l1(97,function(){return ed(),null}))}function DWe(){if(Kw===null)return!1;var t=Kw;if(Kw=null,(Fr&48)!==0)throw Error(qt(331));var e=Fr;Fr|=32;var r=vz;vz=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],l=i.destroy;if(i.destroy=void 0,typeof l=="function")try{l()}catch(d){if(o===null)throw Error(qt(330));Wp(o,d)}}for(r=gz,gz=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var f=i.create;i.destroy=f()}catch(d){if(o===null)throw Error(qt(330));Wp(o,d)}}for(f=t.current.firstEffect;f!==null;)t=f.nextEffect,f.nextEffect=null,f.flags&8&&(f.sibling=null,f.stateNode=null),f=t;return Fr=e,Zc(),!0}function zee(t,e,r){e=r4(r,e),e=rre(t,e,1),Gp(t,e),e=wl(),t=MC(t,1),t!==null&&(xC(t,1,e),Xl(t,e))}function Wp(t,e){if(t.tag===3)zee(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){zee(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($c===null||!$c.has(n))){t=r4(e,t);var i=nre(r,t,1);if(Gp(r,i),i=wl(),r=MC(r,1),r!==null)xC(r,1,i),Xl(r,i);else if(typeof n.componentDidCatch=="function"&&($c===null||!$c.has(n)))try{n.componentDidCatch(e,t)}catch(o){}break}}r=r.return}}function NWe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=wl(),t.pingedLanes|=t.suspendedLanes&r,os===t&&(Da&r)===r&&(fa===4||fa===3&&(Da&62914560)===Da&&500>La()-o4?Xy(t,0):i4|=r),Xl(t,e)}function kWe(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=t_()===99?1:2:(sh===0&&(sh=o_),e=ky(62914560&~sh),e===0&&(e=4194304))),r=wl(),t=MC(t,e),t!==null&&(xC(t,e,r),Xl(t,r))}var pre;pre=function(t,e,r){var n=e.lanes;if(t!==null){if(t.memoizedProps!==e.pendingProps||Rs.current)Yu=!0;else if((r&n)!==0)Yu=(t.flags&16384)!==0;else{switch(Yu=!1,e.tag){case 3:Iee(e),Aj();break;case 5:vee(e);break;case 1:Os(e.type)&&UM(e);break;case 4:nz(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;Ki(rC,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return(r&e.child.childLanes)!==0?Aee(t,e,r):(Ki(Yi,Yi.current&1),e=uh(t,e,r),e!==null?e.sibling:null);Ki(Yi,Yi.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&64)!==0){if(n)return Oee(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ki(Yi,Yi.current),n)break;return null;case 23:case 24:return e.lanes=0,Mj(t,e,r)}return uh(t,e,r)}}else Yu=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=e_(e,Na.current),Zy(e,r),i=Qz(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Os(n)){var o=!0;UM(e)}else o=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zz(e);var l=n.getDerivedStateFromProps;typeof l=="function"&&oC(e,n,l,t),i.updater=IC,e.stateNode=i,i._reactInternals=e,rz(e,n,t,r),e=sz(null,e,n,!0,o,r)}else e.tag=0,Ps(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=FWe(i),t=Zu(i,t),o){case 0:e=az(null,e,i,t,r);break e;case 1:e=Tee(null,e,i,t,r);break e;case 11:e=Eee(null,e,i,t,r);break e;case 14:e=See(null,e,i,Zu(i.type,t),n,r);break e}throw Error(qt(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zu(n,i),az(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zu(n,i),Tee(t,e,n,i,r);case 3:if(Iee(e),n=e.updateQueue,t===null||n===null)throw Error(qt(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,Fte(t,e),u1(e,n,null,r),n=e.memoizedState.element,n===i)Aj(),e=uh(t,e,r);else{if(i=e.stateNode,(o=i.hydrate)&&(jp=Wy(e.stateNode.containerInfo.firstChild),lh=e,o=Wc=!0),o){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)o=t[i],o._workInProgressVersionPrimary=t[i+1],Yy.push(o);for(r=Bte(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Ps(t,e,n,r),Aj();e=e.child}return e;case 5:return vee(e),t===null&&iz(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,l=i.children,Qj(n,i)?l=null:o!==null&&Qj(n,o)&&(e.flags|=16),Qte(t,e),Ps(t,e,l,r),e.child;case 6:return t===null&&iz(e),null;case 13:return Aee(t,e,r);case 4:return nz(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=aC(e,null,n,r):Ps(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zu(n,i),Eee(t,e,n,i,r);case 7:return Ps(t,e,e.pendingProps,r),e.child;case 8:return Ps(t,e,e.pendingProps.children,r),e.child;case 12:return Ps(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,l=e.memoizedProps,o=i.value;var f=e.type._context;if(Ki(rC,f._currentValue),f._currentValue=o,l!==null)if(f=l.value,o=Wl(f,o)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(f,o):1073741823)|0,o===0){if(l.children===i.children&&!Rs.current){e=uh(t,e,r);break e}}else for(f=e.child,f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){l=f.child;for(var v=d.firstContext;v!==null;){if(v.context===n&&(v.observedBits&o)!==0){f.tag===1&&(v=Vp(-1,r&-r),v.tag=2,Gp(f,v)),f.lanes|=r,v=f.alternate,v!==null&&(v.lanes|=r),qte(f.return,r),d.lanes|=r;break}v=v.next}}else l=f.tag===10&&f.type===e.type?null:f.child;if(l!==null)l.return=f;else for(l=f;l!==null;){if(l===e){l=null;break}if(f=l.sibling,f!==null){f.return=l.return,l=f;break}l=l.return}f=l}Ps(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,o=e.pendingProps,n=o.children,Zy(e,r),i=Kl(i,o.unstable_observedBits),n=n(i),e.flags|=1,Ps(t,e,n,r),e.child;case 14:return i=e.type,o=Zu(i,e.pendingProps),o=Zu(i.type,o),See(t,e,i,o,n,r);case 15:return Xte(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zu(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Os(n)?(t=!0,UM(e)):t=!1,Zy(e,r),zte(e,n,i),rz(e,n,i,r),sz(null,e,n,!0,t,r);case 19:return Oee(t,e,r);case 23:return Mj(t,e,r);case 24:return Mj(t,e,r)}throw Error(qt(156,e.tag))};function qWe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Zl(t,e,r,n){return new qWe(t,e,r,n)}function s4(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FWe(t){if(typeof t=="function")return s4(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vC)return 11;if(t===yC)return 14}return 2}function Qp(t,e){var r=t.alternate;return r===null?(r=Zl(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function HM(t,e,r,n,i,o){var l=2;if(n=t,typeof t=="function")s4(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case kp:return Qy(r.children,i,o,e);case Vee:l=8,i|=16;break;case Ez:l=8,i|=1;break;case Uw:return t=Zl(12,r,e,i|8),t.elementType=Uw,t.type=Uw,t.lanes=o,t;case Bw:return t=Zl(13,r,e,i),t.type=Bw,t.elementType=Bw,t.lanes=o,t;case WM:return t=Zl(19,r,e,i),t.elementType=WM,t.lanes=o,t;case Cz:return l4(r,i,o,e);case Dj:return t=Zl(24,r,e,i),t.elementType=Dj,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sz:l=10;break e;case Tz:l=9;break e;case vC:l=11;break e;case yC:l=14;break e;case Iz:l=16,n=null;break e;case Az:l=22;break e}throw Error(qt(130,t==null?t:typeof t,""))}return e=Zl(l,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Qy(t,e,r,n){return t=Zl(7,t,n,e),t.lanes=r,t}function l4(t,e,r,n){return t=Zl(23,t,n,e),t.elementType=Cz,t.lanes=r,t}function Rj(t,e,r){return t=Zl(6,t,null,e),t.lanes=r,t}function Oj(t,e,r){return e=Zl(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jWe(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=gj(0),this.expirationTimes=gj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gj(0),this.mutableSourceEagerHydrationData=null}function zWe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rg,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function mC(t,e,r,n){var i=e.current,o=wl(),l=$p(i);e:if(r){r=r._reactInternals;t:{if(pg(r)!==r||r.tag!==1)throw Error(qt(170));var f=r;do{switch(f.tag){case 3:f=f.stateNode.context;break t;case 1:if(Os(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break t}}f=f.return}while(f!==null);throw Error(qt(171))}if(r.tag===1){var d=r.type;if(Os(d)){r=Pte(r,d,f);break e}}r=f}else r=Kp;return e.context===null?e.context=r:e.pendingContext=r,e=Vp(o,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),Gp(i,e),Hp(i,l,o),l}function Lj(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uee(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function u4(t,e){Uee(t,e),(t=t.alternate)&&Uee(t,e)}function UWe(){return null}function c4(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new jWe(t,e,r!=null&&r.hydrate===!0),e=Zl(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,Zz(e),t[i_]=r.current,Tte(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}c4.prototype.render=function(t){mC(t,this._internalRoot,null,null)};c4.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;mC(null,t,null,function(){e[i_]=null})};function v1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function BWe(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new c4(t,0,e?{hydrate:!0}:void 0)}function CC(t,e,r,n,i){var o=r._reactRootContainer;if(o){var l=o._internalRoot;if(typeof i=="function"){var f=i;i=function(){var v=Lj(l);f.call(v)}}mC(e,l,t,i)}else{if(o=r._reactRootContainer=BWe(r,n),l=o._internalRoot,typeof i=="function"){var d=i;i=function(){var v=Lj(l);d.call(v)}}sre(function(){mC(e,l,t,i)})}return Lj(l)}ite=function(t){if(t.tag===13){var e=wl();Hp(t,4,e),u4(t,4)}};Dz=function(t){if(t.tag===13){var e=wl();Hp(t,67108864,e),u4(t,67108864)}};ote=function(t){if(t.tag===13){var e=wl(),r=$p(t);Hp(t,r,e),u4(t,r)}};ate=function(t,e){return e()};Gj=function(t,e,r){switch(e){case"input":if(kj(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+"][type=\"radio\"]"),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=SC(n);if(!i)throw Error(qt(90));$ee(n),kj(n,i)}}}break;case"textarea":Wee(t,r);break;case"select":e=r.value,e!=null&&Gy(t,!!r.multiple,e,!1)}};Rz=are;ete=function(t,e,r,n,i){var o=Fr;Fr|=4;try{return ug(98,t.bind(null,e,r,n,i))}finally{Fr=o,Fr===0&&(s_(),Zc())}};Oz=function(){(Fr&49)===0&&(MWe(),ed())};tte=function(t,e){var r=Fr;Fr|=2;try{return t(e)}finally{Fr=r,Fr===0&&(s_(),Zc())}};function dre(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v1(e))throw Error(qt(200));return zWe(t,e,null,r)}var VWe={Events:[d1,zy,SC,Qee,Jee,ed,{current:!1}]},Dw={findFiberByHostInstance:ig,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},GWe={bundleType:Dw.bundleType,version:Dw.version,rendererPackageName:Dw.rendererPackageName,rendererConfig:Dw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hg.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nte(t),t===null?null:t.stateNode},findFiberByHostInstance:Dw.findFiberByHostInstance||UWe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Nw=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Nw.isDisabled&&Nw.supportsFiber))try{Gz=Nw.inject(GWe),sg=Nw}catch(t){}var Nw;Ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VWe;Ql.createPortal=dre;Ql.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(qt(188)):Error(qt(268,Object.keys(t)));return t=nte(e),t=t===null?null:t.stateNode,t};Ql.flushSync=function(t,e){var r=Fr;if((r&48)!==0)return t(e);Fr|=1;try{if(t)return ug(99,t.bind(null,e))}finally{Fr=r,Zc()}};Ql.hydrate=function(t,e,r){if(!v1(e))throw Error(qt(200));return CC(null,t,e,!0,r)};Ql.render=function(t,e,r){if(!v1(e))throw Error(qt(200));return CC(null,t,e,!1,r)};Ql.unmountComponentAtNode=function(t){if(!v1(t))throw Error(qt(40));return t._reactRootContainer?(sre(function(){CC(null,null,t,!1,function(){t._reactRootContainer=null,t[i_]=null})}),!0):!1};Ql.unstable_batchedUpdates=are;Ql.unstable_createPortal=function(t,e){return dre(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ql.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!v1(r))throw Error(qt(200));if(t==null||t._reactInternals===void 0)throw Error(qt(38));return CC(t,e,r,!1,n)};Ql.version="17.0.2"});var No=R((rfr,vre)=>{"use strict";p();function gre(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gre)}catch(t){console.error(t)}}gre(),vre.exports=mre()});var Ft=R((f4,yre)=>{"use strict";p();var y1=function(t){return t&&t.Math===Math&&t};yre.exports=y1(typeof globalThis=="object"&&globalThis)||y1(typeof window=="object"&&window)||y1(typeof self=="object"&&self)||y1(typeof global=="object"&&global)||y1(typeof f4=="object"&&f4)||function(){return this}()||Function("return this")()});var yt=R((ofr,_re)=>{"use strict";p();_re.exports=function(t){try{return!!t()}catch(e){return!0}}});var sr=R((sfr,xre)=>{"use strict";p();var $We=yt();xre.exports=!$We(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var l_=R((ufr,bre)=>{"use strict";p();var HWe=yt();bre.exports=!HWe(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")})});var jt=R((ffr,wre)=>{"use strict";p();var WWe=l_(),PC=Function.prototype.call;wre.exports=WWe?PC.bind(PC):function(){return PC.apply(PC,arguments)}});var _1=R(Tre=>{"use strict";p();var Ere={}.propertyIsEnumerable,Sre=Object.getOwnPropertyDescriptor,ZWe=Sre&&!Ere.call({1:2},1);Tre.f=ZWe?function(e){var r=Sre(this,e);return!!r&&r.enumerable}:Ere});var Ls=R((mfr,Ire)=>{"use strict";p();Ire.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}});var ct=R((vfr,Cre)=>{"use strict";p();var Are=l_(),Mre=Function.prototype,h4=Mre.call,YWe=Are&&Mre.bind.bind(h4,h4);Cre.exports=Are?YWe:function(t){return function(){return h4.apply(t,arguments)}}});var pa=R((_fr,Rre)=>{"use strict";p();var Pre=ct(),KWe=Pre({}.toString),XWe=Pre("".slice);Rre.exports=function(t){return XWe(KWe(t),8,-1)}});var hh=R((bfr,Ore)=>{"use strict";p();var QWe=ct(),JWe=yt(),e8e=pa(),p4=Object,t8e=QWe("".split);Ore.exports=JWe(function(){return!p4("z").propertyIsEnumerable(0)})?function(t){return e8e(t)==="String"?t8e(t,""):p4(t)}:p4});var Ds=R((Efr,Lre)=>{"use strict";p();Lre.exports=function(t){return t==null}});var oi=R((Tfr,Dre)=>{"use strict";p();var r8e=Ds(),n8e=TypeError;Dre.exports=function(t){if(r8e(t))throw new n8e("Can't call method on "+t);return t}});var _o=R((Afr,Nre)=>{"use strict";p();var i8e=hh(),o8e=oi();Nre.exports=function(t){return i8e(o8e(t))}});var jr=R((Cfr,kre)=>{"use strict";p();var d4=typeof document=="object"&&document.all;kre.exports=typeof d4=="undefined"&&d4!==void 0?function(t){return typeof t=="function"||t===d4}:function(t){return typeof t=="function"}});var hr=R((Rfr,qre)=>{"use strict";p();var a8e=jr();qre.exports=function(t){return typeof t=="object"?t!==null:a8e(t)}});var _r=R((Lfr,Fre)=>{"use strict";p();var m4=Ft(),s8e=jr(),l8e=function(t){return s8e(t)?t:void 0};Fre.exports=function(t,e){return arguments.length<2?l8e(m4[t]):m4[t]&&m4[t][e]}});var da=R((Nfr,jre)=>{"use strict";p();var u8e=ct();jre.exports=u8e({}.isPrototypeOf)});var Ku=R((qfr,Bre)=>{"use strict";p();var c8e=Ft(),zre=c8e.navigator,Ure=zre&&zre.userAgent;Bre.exports=Ure?String(Ure):""});var Qu=R((jfr,Zre)=>{"use strict";p();var Wre=Ft(),g4=Ku(),Vre=Wre.process,Gre=Wre.Deno,$re=Vre&&Vre.versions||Gre&&Gre.version,Hre=$re&&$re.v8,Xu,RC;Hre&&(Xu=Hre.split("."),RC=Xu[0]>0&&Xu[0]<4?1:+(Xu[0]+Xu[1]));!RC&&g4&&(Xu=g4.match(/Edge\/(\d+)/),(!Xu||Xu[1]>=74)&&(Xu=g4.match(/Chrome\/(\d+)/),Xu&&(RC=+Xu[1])));Zre.exports=RC});var td=R((Ufr,Kre)=>{"use strict";p();var Yre=Qu(),f8e=yt(),h8e=Ft(),p8e=h8e.String;Kre.exports=!!Object.getOwnPropertySymbols&&!f8e(function(){var t=Symbol("symbol detection");return!p8e(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Yre&&Yre<41})});var v4=R((Vfr,Xre)=>{"use strict";p();var d8e=td();Xre.exports=d8e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var ph=R(($fr,Qre)=>{"use strict";p();var m8e=_r(),g8e=jr(),v8e=da(),y8e=v4(),_8e=Object;Qre.exports=y8e?function(t){return typeof t=="symbol"}:function(t){var e=m8e("Symbol");return g8e(e)&&v8e(e.prototype,_8e(t))}});var rd=R((Wfr,Jre)=>{"use strict";p();var x8e=String;Jre.exports=function(t){try{return x8e(t)}catch(e){return"Object"}}});var xr=R((Yfr,ene)=>{"use strict";p();var b8e=jr(),w8e=rd(),E8e=TypeError;ene.exports=function(t){if(b8e(t))return t;throw new E8e(w8e(t)+" is not a function")}});var Xi=R((Xfr,tne)=>{"use strict";p();var S8e=xr(),T8e=Ds();tne.exports=function(t,e){var r=t[e];return T8e(r)?void 0:S8e(r)}});var b4=R((Jfr,rne)=>{"use strict";p();var y4=jt(),_4=jr(),x4=hr(),I8e=TypeError;rne.exports=function(t,e){var r,n;if(e==="string"&&_4(r=t.toString)&&!x4(n=y4(r,t))||_4(r=t.valueOf)&&!x4(n=y4(r,t))||e!=="string"&&_4(r=t.toString)&&!x4(n=y4(r,t)))return n;throw new I8e("Can't convert object to primitive value")}});var pn=R((thr,nne)=>{"use strict";p();nne.exports=!1});var OC=R((nhr,one)=>{"use strict";p();var ine=Ft(),A8e=Object.defineProperty;one.exports=function(t,e){try{A8e(ine,t,{value:e,configurable:!0,writable:!0})}catch(r){ine[t]=e}return e}});var x1=R((ohr,lne)=>{"use strict";p();var M8e=pn(),C8e=Ft(),P8e=OC(),ane="__core-js_shared__",sne=lne.exports=C8e[ane]||P8e(ane,{});(sne.versions||(sne.versions=[])).push({version:"3.42.0",mode:M8e?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var dh=R((shr,cne)=>{"use strict";p();var une=x1();cne.exports=function(t,e){return une[t]||(une[t]=e||{})}});var Yr=R((uhr,fne)=>{"use strict";p();var R8e=oi(),O8e=Object;fne.exports=function(t){return O8e(R8e(t))}});var Br=R((fhr,hne)=>{"use strict";p();var L8e=ct(),D8e=Yr(),N8e=L8e({}.hasOwnProperty);hne.exports=Object.hasOwn||function(e,r){return N8e(D8e(e),r)}});var nd=R((phr,pne)=>{"use strict";p();var k8e=ct(),q8e=0,F8e=Math.random(),j8e=k8e(1 .toString);pne.exports=function(t){return"Symbol("+(t===void 0?"":t)+")_"+j8e(++q8e+F8e,36)}});var mr=R((mhr,mne)=>{"use strict";p();var z8e=Ft(),U8e=dh(),dne=Br(),B8e=nd(),V8e=td(),G8e=v4(),u_=z8e.Symbol,w4=U8e("wks"),$8e=G8e?u_.for||u_:u_&&u_.withoutSetter||B8e;mne.exports=function(t){return dne(w4,t)||(w4[t]=V8e&&dne(u_,t)?u_[t]:$8e("Symbol."+t)),w4[t]}});var b1=R((vhr,yne)=>{"use strict";p();var H8e=jt(),gne=hr(),vne=ph(),W8e=Xi(),Z8e=b4(),Y8e=mr(),K8e=TypeError,X8e=Y8e("toPrimitive");yne.exports=function(t,e){if(!gne(t)||vne(t))return t;var r=W8e(t,X8e),n;if(r){if(e===void 0&&(e="default"),n=H8e(r,t,e),!gne(n)||vne(n))return n;throw new K8e("Can't convert object to primitive value")}return e===void 0&&(e="number"),Z8e(t,e)}});var Yc=R((_hr,_ne)=>{"use strict";p();var Q8e=b1(),J8e=ph();_ne.exports=function(t){var e=Q8e(t,"string");return J8e(e)?e:e+""}});var w1=R((bhr,bne)=>{"use strict";p();var eZe=Ft(),xne=hr(),E4=eZe.document,tZe=xne(E4)&&xne(E4.createElement);bne.exports=function(t){return tZe?E4.createElement(t):{}}});var S4=R((Ehr,wne)=>{"use strict";p();var rZe=sr(),nZe=yt(),iZe=w1();wne.exports=!rZe&&!nZe(function(){return Object.defineProperty(iZe("div"),"a",{get:function(){return 7}}).a!==7})});var Yo=R(Sne=>{"use strict";p();var oZe=sr(),aZe=jt(),sZe=_1(),lZe=Ls(),uZe=_o(),cZe=Yc(),fZe=Br(),hZe=S4(),Ene=Object.getOwnPropertyDescriptor;Sne.f=oZe?Ene:function(e,r){if(e=uZe(e),r=cZe(r),hZe)try{return Ene(e,r)}catch(n){}if(fZe(e,r))return lZe(!aZe(sZe.f,e,r),e[r])}});var T4=R((Ahr,Tne)=>{"use strict";p();var pZe=sr(),dZe=yt();Tne.exports=pZe&&dZe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Bt=R((Chr,Ine)=>{"use strict";p();var mZe=hr(),gZe=String,vZe=TypeError;Ine.exports=function(t){if(mZe(t))return t;throw new vZe(gZe(t)+" is not an object")}});var ei=R(Mne=>{"use strict";p();var yZe=sr(),_Ze=S4(),xZe=T4(),LC=Bt(),Ane=Yc(),bZe=TypeError,I4=Object.defineProperty,wZe=Object.getOwnPropertyDescriptor,A4="enumerable",M4="configurable",C4="writable";Mne.f=yZe?xZe?function(e,r,n){if(LC(e),r=Ane(r),LC(n),typeof e=="function"&&r==="prototype"&&"value"in n&&C4 in n&&!n[C4]){var i=wZe(e,r);i&&i[C4]&&(e[r]=n.value,n={configurable:M4 in n?n[M4]:i[M4],enumerable:A4 in n?n[A4]:i[A4],writable:!1})}return I4(e,r,n)}:I4:function(e,r,n){if(LC(e),r=Ane(r),LC(n),_Ze)try{return I4(e,r,n)}catch(i){}if("get"in n||"set"in n)throw new bZe("Accessors not supported");return"value"in n&&(e[r]=n.value),e}});var xo=R((Lhr,Cne)=>{"use strict";p();var EZe=sr(),SZe=ei(),TZe=Ls();Cne.exports=EZe?function(t,e,r){return SZe.f(t,e,TZe(1,r))}:function(t,e,r){return t[e]=r,t}});var mg=R((Nhr,Rne)=>{"use strict";p();var P4=sr(),IZe=Br(),Pne=Function.prototype,AZe=P4&&Object.getOwnPropertyDescriptor,R4=IZe(Pne,"name"),MZe=R4&&function(){}.name==="something",CZe=R4&&(!P4||P4&&AZe(Pne,"name").configurable);Rne.exports={EXISTS:R4,PROPER:MZe,CONFIGURABLE:CZe}});var E1=R((qhr,One)=>{"use strict";p();var PZe=ct(),RZe=jr(),O4=x1(),OZe=PZe(Function.toString);RZe(O4.inspectSource)||(O4.inspectSource=function(t){return OZe(t)});One.exports=O4.inspectSource});var L4=R((jhr,Dne)=>{"use strict";p();var LZe=Ft(),DZe=jr(),Lne=LZe.WeakMap;Dne.exports=DZe(Lne)&&/native code/.test(String(Lne))});var S1=R((Uhr,kne)=>{"use strict";p();var NZe=dh(),kZe=nd(),Nne=NZe("keys");kne.exports=function(t){return Nne[t]||(Nne[t]=kZe(t))}});var c_=R((Vhr,qne)=>{"use strict";p();qne.exports={}});var Cn=R(($hr,zne)=>{"use strict";p();var qZe=L4(),jne=Ft(),FZe=hr(),jZe=xo(),D4=Br(),N4=x1(),zZe=S1(),UZe=c_(),Fne="Object already initialized",k4=jne.TypeError,BZe=jne.WeakMap,DC,T1,NC,VZe=function(t){return NC(t)?T1(t):DC(t,{})},GZe=function(t){return function(e){var r;if(!FZe(e)||(r=T1(e)).type!==t)throw new k4("Incompatible receiver, "+t+" required");return r}};qZe||N4.state?(Ju=N4.state||(N4.state=new BZe),Ju.get=Ju.get,Ju.has=Ju.has,Ju.set=Ju.set,DC=function(t,e){if(Ju.has(t))throw new k4(Fne);return e.facade=t,Ju.set(t,e),e},T1=function(t){return Ju.get(t)||{}},NC=function(t){return Ju.has(t)}):(gg=zZe("state"),UZe[gg]=!0,DC=function(t,e){if(D4(t,gg))throw new k4(Fne);return e.facade=t,jZe(t,gg,e),e},T1=function(t){return D4(t,gg)?t[gg]:{}},NC=function(t){return D4(t,gg)});var Ju,gg;zne.exports={set:DC,get:T1,has:NC,enforce:VZe,getterFor:GZe}});var I1=R((Whr,Vne)=>{"use strict";p();var F4=ct(),$Ze=yt(),HZe=jr(),kC=Br(),q4=sr(),WZe=mg().CONFIGURABLE,ZZe=E1(),Bne=Cn(),YZe=Bne.enforce,KZe=Bne.get,Une=String,qC=Object.defineProperty,XZe=F4("".slice),QZe=F4("".replace),JZe=F4([].join),eYe=q4&&!$Ze(function(){return qC(function(){},"length",{value:8}).length!==8}),tYe=String(String).split("String"),rYe=Vne.exports=function(t,e,r){XZe(Une(e),0,7)==="Symbol("&&(e="["+QZe(Une(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!kC(t,"name")||WZe&&t.name!==e)&&(q4?qC(t,"name",{value:e,configurable:!0}):t.name=e),eYe&&r&&kC(r,"arity")&&t.length!==r.arity&&qC(t,"length",{value:r.arity});try{r&&kC(r,"constructor")&&r.constructor?q4&&qC(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var n=YZe(t);return kC(n,"source")||(n.source=JZe(tYe,typeof e=="string"?e:"")),t};Function.prototype.toString=rYe(function(){return HZe(this)&&KZe(this).source||ZZe(this)},"toString")});var Nn=R((Yhr,Gne)=>{"use strict";p();var nYe=jr(),iYe=ei(),oYe=I1(),aYe=OC();Gne.exports=function(t,e,r,n){n||(n={});var i=n.enumerable,o=n.name!==void 0?n.name:e;if(nYe(r)&&oYe(r,o,n),n.global)i?t[e]=r:aYe(e,r);else{try{n.unsafe?t[e]&&(i=!0):delete t[e]}catch(l){}i?t[e]=r:iYe.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t}});var j4=R((Xhr,$ne)=>{"use strict";p();var sYe=Math.ceil,lYe=Math.floor;$ne.exports=Math.trunc||function(e){var r=+e;return(r>0?lYe:sYe)(r)}});var fi=R((Jhr,Hne)=>{"use strict";p();var uYe=j4();Hne.exports=function(t){var e=+t;return e!==e||e===0?0:uYe(e)}});var ec=R((tpr,Wne)=>{"use strict";p();var cYe=fi(),fYe=Math.max,hYe=Math.min;Wne.exports=function(t,e){var r=cYe(t);return r<0?fYe(r+e,0):hYe(r,e)}});var Ns=R((npr,Zne)=>{"use strict";p();var pYe=fi(),dYe=Math.min;Zne.exports=function(t){var e=pYe(t);return e>0?dYe(e,9007199254740991):0}});var sn=R((opr,Yne)=>{"use strict";p();var mYe=Ns();Yne.exports=function(t){return mYe(t.length)}});var f_=R((spr,Xne)=>{"use strict";p();var gYe=_o(),vYe=ec(),yYe=sn(),Kne=function(t){return function(e,r,n){var i=gYe(e),o=yYe(i);if(o===0)return!t&&-1;var l=vYe(n,o),f;if(t&&r!==r){for(;o>l;)if(f=i[l++],f!==f)return!0}else for(;o>l;l++)if((t||l in i)&&i[l]===r)return t||l||0;return!t&&-1}};Xne.exports={includes:Kne(!0),indexOf:Kne(!1)}});var U4=R((upr,Jne)=>{"use strict";p();var _Ye=ct(),z4=Br(),xYe=_o(),bYe=f_().indexOf,wYe=c_(),Qne=_Ye([].push);Jne.exports=function(t,e){var r=xYe(t),n=0,i=[],o;for(o in r)!z4(wYe,o)&&z4(r,o)&&Qne(i,o);for(;e.length>n;)z4(r,o=e[n++])&&(~bYe(i,o)||Qne(i,o));return i}});var FC=R((fpr,eie)=>{"use strict";p();eie.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var id=R(tie=>{"use strict";p();var EYe=U4(),SYe=FC(),TYe=SYe.concat("length","prototype");tie.f=Object.getOwnPropertyNames||function(e){return EYe(e,TYe)}});var A1=R(rie=>{"use strict";p();rie.f=Object.getOwnPropertySymbols});var jC=R((vpr,nie)=>{"use strict";p();var IYe=_r(),AYe=ct(),MYe=id(),CYe=A1(),PYe=Bt(),RYe=AYe([].concat);nie.exports=IYe("Reflect","ownKeys")||function(e){var r=MYe.f(PYe(e)),n=CYe.f;return n?RYe(r,n(e)):r}});var vg=R((_pr,oie)=>{"use strict";p();var iie=Br(),OYe=jC(),LYe=Yo(),DYe=ei();oie.exports=function(t,e,r){for(var n=OYe(e),i=DYe.f,o=LYe.f,l=0;l<n.length;l++){var f=n[l];!iie(t,f)&&!(r&&iie(r,f))&&i(t,f,o(e,f))}}});var h_=R((bpr,aie)=>{"use strict";p();var NYe=yt(),kYe=jr(),qYe=/#|\.prototype\./,M1=function(t,e){var r=jYe[FYe(t)];return r===UYe?!0:r===zYe?!1:kYe(e)?NYe(e):!!e},FYe=M1.normalize=function(t){return String(t).replace(qYe,".").toLowerCase()},jYe=M1.data={},zYe=M1.NATIVE="N",UYe=M1.POLYFILL="P";aie.exports=M1});var oe=R((Epr,sie)=>{"use strict";p();var zC=Ft(),BYe=Yo().f,VYe=xo(),GYe=Nn(),$Ye=OC(),HYe=vg(),WYe=h_();sie.exports=function(t,e){var r=t.target,n=t.global,i=t.stat,o,l,f,d,v,x;if(n?l=zC:i?l=zC[r]||$Ye(r,{}):l=zC[r]&&zC[r].prototype,l)for(f in e){if(v=e[f],t.dontCallGetSet?(x=BYe(l,f),d=x&&x.value):d=l[f],o=WYe(n?f:r+(i?".":"#")+f,t.forced),!o&&d!==void 0){if(typeof v==typeof d)continue;HYe(v,d)}(t.sham||d&&d.sham)&&VYe(v,"sham",!0),GYe(l,f,v,t)}}});var UC=R((Tpr,uie)=>{"use strict";p();var ZYe=mr(),YYe=ZYe("toStringTag"),lie={};lie[YYe]="z";uie.exports=String(lie)==="[object z]"});var ss=R((Apr,cie)=>{"use strict";p();var KYe=UC(),XYe=jr(),BC=pa(),QYe=mr(),JYe=QYe("toStringTag"),e9e=Object,t9e=BC(function(){return arguments}())==="Arguments",r9e=function(t,e){try{return t[e]}catch(r){}};cie.exports=KYe?BC:function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=r9e(e=e9e(t),JYe))=="string"?r:t9e?BC(e):(n=BC(e))==="Object"&&XYe(e.callee)?"Arguments":n}});var Mr=R((Cpr,fie)=>{"use strict";p();var n9e=ss(),i9e=String;fie.exports=function(t){if(n9e(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return i9e(t)}});var yg=R((Rpr,hie)=>{"use strict";p();var o9e=U4(),a9e=FC();hie.exports=Object.keys||function(e){return o9e(e,a9e)}});var VC=R(pie=>{"use strict";p();var s9e=sr(),l9e=T4(),u9e=ei(),c9e=Bt(),f9e=_o(),h9e=yg();pie.f=s9e&&!l9e?Object.defineProperties:function(e,r){c9e(e);for(var n=f9e(r),i=h9e(r),o=i.length,l=0,f;o>l;)u9e.f(e,f=i[l++],n[f]);return e}});var B4=R((Npr,die)=>{"use strict";p();var p9e=_r();die.exports=p9e("document","documentElement")});var Qi=R((qpr,bie)=>{"use strict";p();var d9e=Bt(),m9e=VC(),mie=FC(),g9e=c_(),v9e=B4(),y9e=w1(),_9e=S1(),gie=">",vie="<",G4="prototype",$4="script",_ie=_9e("IE_PROTO"),V4=function(){},xie=function(t){return vie+$4+gie+t+vie+"/"+$4+gie},yie=function(t){t.write(xie("")),t.close();var e=t.parentWindow.Object;return t=null,e},x9e=function(){var t=y9e("iframe"),e="java"+$4+":",r;return t.style.display="none",v9e.appendChild(t),t.src=String(e),r=t.contentWindow.document,r.open(),r.write(xie("document.F=Object")),r.close(),r.F},GC,$C=function(){try{GC=new ActiveXObject("htmlfile")}catch(e){}$C=typeof document!="undefined"?document.domain&&GC?yie(GC):x9e():yie(GC);for(var t=mie.length;t--;)delete $C[G4][mie[t]];return $C()};g9e[_ie]=!0;bie.exports=Object.create||function(e,r){var n;return e!==null?(V4[G4]=d9e(e),n=new V4,V4[G4]=null,n[_ie]=e):n=$C(),r===void 0?n:m9e.f(n,r)}});var ks=R((jpr,wie)=>{"use strict";p();var b9e=ct();wie.exports=b9e([].slice)});var HC=R((Upr,Tie)=>{"use strict";p();var w9e=pa(),E9e=_o(),Eie=id().f,S9e=ks(),Sie=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],T9e=function(t){try{return Eie(t)}catch(e){return S9e(Sie)}};Tie.exports.f=function(e){return Sie&&w9e(e)==="Window"?T9e(e):Eie(E9e(e))}});var hi=R((Vpr,Aie)=>{"use strict";p();var Iie=I1(),I9e=ei();Aie.exports=function(t,e,r){return r.get&&Iie(r.get,e,{getter:!0}),r.set&&Iie(r.set,e,{setter:!0}),I9e.f(t,e,r)}});var H4=R(Mie=>{"use strict";p();var A9e=mr();Mie.f=A9e});var WC=R((Wpr,Cie)=>{"use strict";p();var M9e=Ft();Cie.exports=M9e});var Ci=R((Ypr,Rie)=>{"use strict";p();var Pie=WC(),C9e=Br(),P9e=H4(),R9e=ei().f;Rie.exports=function(t){var e=Pie.Symbol||(Pie.Symbol={});C9e(e,t)||R9e(e,t,{value:P9e.f(t)})}});var W4=R((Xpr,Oie)=>{"use strict";p();var O9e=jt(),L9e=_r(),D9e=mr(),N9e=Nn();Oie.exports=function(){var t=L9e("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,n=D9e("toPrimitive");e&&!e[n]&&N9e(e,n,function(i){return O9e(r,this)},{arity:1})}});var ls=R((Jpr,Die)=>{"use strict";p();var k9e=ei().f,q9e=Br(),F9e=mr(),Lie=F9e("toStringTag");Die.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!q9e(t,Lie)&&k9e(t,Lie,{configurable:!0,value:e})}});var od=R((tdr,Nie)=>{"use strict";p();var j9e=pa(),z9e=ct();Nie.exports=function(t){if(j9e(t)==="Function")return z9e(t)}});var Hn=R((ndr,qie)=>{"use strict";p();var kie=od(),U9e=xr(),B9e=l_(),V9e=kie(kie.bind);qie.exports=function(t,e){return U9e(t),e===void 0?t:B9e?V9e(t,e):function(){return t.apply(e,arguments)}}});var tc=R((odr,Fie)=>{"use strict";p();var G9e=pa();Fie.exports=Array.isArray||function(e){return G9e(e)==="Array"}});var rc=R((sdr,Vie)=>{"use strict";p();var $9e=ct(),H9e=yt(),jie=jr(),W9e=ss(),Z9e=_r(),Y9e=E1(),zie=function(){},Uie=Z9e("Reflect","construct"),Z4=/^\s*(?:class|function)\b/,K9e=$9e(Z4.exec),X9e=!Z4.test(zie),C1=function(e){if(!jie(e))return!1;try{return Uie(zie,[],e),!0}catch(r){return!1}},Bie=function(e){if(!jie(e))return!1;switch(W9e(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return X9e||!!K9e(Z4,Y9e(e))}catch(r){return!0}};Bie.sham=!0;Vie.exports=!Uie||H9e(function(){var t;return C1(C1.call)||!C1(Object)||!C1(function(){t=!0})||t})?Bie:C1});var Wie=R((udr,Hie)=>{"use strict";p();var Gie=tc(),Q9e=rc(),J9e=hr(),eKe=mr(),tKe=eKe("species"),$ie=Array;Hie.exports=function(t){var e;return Gie(t)&&(e=t.constructor,Q9e(e)&&(e===$ie||Gie(e.prototype))?e=void 0:J9e(e)&&(e=e[tKe],e===null&&(e=void 0))),e===void 0?$ie:e}});var p_=R((fdr,Zie)=>{"use strict";p();var rKe=Wie();Zie.exports=function(t,e){return new(rKe(t))(e===0?0:e)}});var Ji=R((pdr,Kie)=>{"use strict";p();var nKe=Hn(),iKe=ct(),oKe=hh(),aKe=Yr(),sKe=sn(),lKe=p_(),Yie=iKe([].push),ad=function(t){var e=t===1,r=t===2,n=t===3,i=t===4,o=t===6,l=t===7,f=t===5||o;return function(d,v,x,b){for(var A=aKe(d),P=oKe(A),N=sKe(P),j=nKe(v,x),D=0,F=b||lKe,U=e?F(d,N):r||l?F(d,0):void 0,$,Z;N>D;D++)if((f||D in P)&&($=P[D],Z=j($,D,A),t))if(e)U[D]=Z;else if(Z)switch(t){case 3:return!0;case 5:return $;case 6:return D;case 2:Yie(U,$)}else switch(t){case 4:return!1;case 7:Yie(U,$)}return o?-1:n||i?i:U}};Kie.exports={forEach:ad(0),map:ad(1),filter:ad(2),some:ad(3),every:ad(4),find:ad(5),findIndex:ad(6),filterReject:ad(7)}});var poe=R(()=>{"use strict";p();var ZC=oe(),O1=Ft(),nU=jt(),uKe=ct(),cKe=pn(),d_=sr(),m_=td(),fKe=yt(),Ko=Br(),hKe=da(),Q4=Bt(),YC=_o(),iU=Yc(),pKe=Mr(),J4=Ls(),g_=Qi(),Jie=yg(),dKe=id(),eoe=HC(),mKe=A1(),toe=Yo(),roe=ei(),gKe=VC(),noe=_1(),Y4=Nn(),vKe=hi(),oU=dh(),yKe=S1(),ioe=c_(),Xie=nd(),_Ke=mr(),xKe=H4(),bKe=Ci(),wKe=W4(),EKe=ls(),ooe=Cn(),KC=Ji().forEach,qs=yKe("hidden"),XC="Symbol",R1="prototype",SKe=ooe.set,Qie=ooe.getterFor(XC),Jl=Object[R1],_g=O1.Symbol,P1=_g&&_g[R1],TKe=O1.RangeError,IKe=O1.TypeError,K4=O1.QObject,aoe=toe.f,xg=roe.f,soe=eoe.f,AKe=noe.f,loe=uKe([].push),mh=oU("symbols"),L1=oU("op-symbols"),MKe=oU("wks"),eU=!K4||!K4[R1]||!K4[R1].findChild,uoe=function(t,e,r){var n=aoe(Jl,e);n&&delete Jl[e],xg(t,e,r),n&&t!==Jl&&xg(Jl,e,n)},tU=d_&&fKe(function(){return g_(xg({},"a",{get:function(){return xg(this,"a",{value:7}).a}})).a!==7})?uoe:xg,X4=function(t,e){var r=mh[t]=g_(P1);return SKe(r,{type:XC,tag:t,description:e}),d_||(r.description=e),r},QC=function(e,r,n){e===Jl&&QC(L1,r,n),Q4(e);var i=iU(r);return Q4(n),Ko(mh,i)?(n.enumerable?(Ko(e,qs)&&e[qs][i]&&(e[qs][i]=!1),n=g_(n,{enumerable:J4(0,!1)})):(Ko(e,qs)||xg(e,qs,J4(1,g_(null))),e[qs][i]=!0),tU(e,i,n)):xg(e,i,n)},aU=function(e,r){Q4(e);var n=YC(r),i=Jie(n).concat(hoe(n));return KC(i,function(o){(!d_||nU(rU,n,o))&&QC(e,o,n[o])}),e},CKe=function(e,r){return r===void 0?g_(e):aU(g_(e),r)},rU=function(e){var r=iU(e),n=nU(AKe,this,r);return this===Jl&&Ko(mh,r)&&!Ko(L1,r)?!1:n||!Ko(this,r)||!Ko(mh,r)||Ko(this,qs)&&this[qs][r]?n:!0},coe=function(e,r){var n=YC(e),i=iU(r);if(!(n===Jl&&Ko(mh,i)&&!Ko(L1,i))){var o=aoe(n,i);return o&&Ko(mh,i)&&!(Ko(n,qs)&&n[qs][i])&&(o.enumerable=!0),o}},foe=function(e){var r=soe(YC(e)),n=[];return KC(r,function(i){!Ko(mh,i)&&!Ko(ioe,i)&&loe(n,i)}),n},hoe=function(t){var e=t===Jl,r=soe(e?L1:YC(t)),n=[];return KC(r,function(i){Ko(mh,i)&&(!e||Ko(Jl,i))&&loe(n,mh[i])}),n};m_||(_g=function(){if(hKe(P1,this))throw new IKe("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:pKe(arguments[0]),r=Xie(e),n=function(i){var o=this===void 0?O1:this;o===Jl&&nU(n,L1,i),Ko(o,qs)&&Ko(o[qs],r)&&(o[qs][r]=!1);var l=J4(1,i);try{tU(o,r,l)}catch(f){if(!(f instanceof TKe))throw f;uoe(o,r,l)}};return d_&&eU&&tU(Jl,r,{configurable:!0,set:n}),X4(r,e)},P1=_g[R1],Y4(P1,"toString",function(){return Qie(this).tag}),Y4(_g,"withoutSetter",function(t){return X4(Xie(t),t)}),noe.f=rU,roe.f=QC,gKe.f=aU,toe.f=coe,dKe.f=eoe.f=foe,mKe.f=hoe,xKe.f=function(t){return X4(_Ke(t),t)},d_&&(vKe(P1,"description",{configurable:!0,get:function(){return Qie(this).description}}),cKe||Y4(Jl,"propertyIsEnumerable",rU,{unsafe:!0})));ZC({global:!0,constructor:!0,wrap:!0,forced:!m_,sham:!m_},{Symbol:_g});KC(Jie(MKe),function(t){bKe(t)});ZC({target:XC,stat:!0,forced:!m_},{useSetter:function(){eU=!0},useSimple:function(){eU=!1}});ZC({target:"Object",stat:!0,forced:!m_,sham:!d_},{create:CKe,defineProperty:QC,defineProperties:aU,getOwnPropertyDescriptor:coe});ZC({target:"Object",stat:!0,forced:!m_},{getOwnPropertyNames:foe});wKe();EKe(_g,XC);ioe[qs]=!0});var sU=R((ydr,doe)=>{"use strict";p();var PKe=td();doe.exports=PKe&&!!Symbol.for&&!!Symbol.keyFor});var goe=R(()=>{"use strict";p();var RKe=oe(),OKe=_r(),LKe=Br(),DKe=Mr(),moe=dh(),NKe=sU(),lU=moe("string-to-symbol-registry"),kKe=moe("symbol-to-string-registry");RKe({target:"Symbol",stat:!0,forced:!NKe},{for:function(t){var e=DKe(t);if(LKe(lU,e))return lU[e];var r=OKe("Symbol")(e);return lU[e]=r,kKe[r]=e,r}})});var yoe=R(()=>{"use strict";p();var qKe=oe(),FKe=Br(),jKe=ph(),zKe=rd(),UKe=dh(),BKe=sU(),voe=UKe("symbol-to-string-registry");qKe({target:"Symbol",stat:!0,forced:!BKe},{keyFor:function(e){if(!jKe(e))throw new TypeError(zKe(e)+" is not a symbol");if(FKe(voe,e))return voe[e]}})});var ma=R((Idr,woe)=>{"use strict";p();var VKe=l_(),boe=Function.prototype,_oe=boe.apply,xoe=boe.call;woe.exports=typeof Reflect=="object"&&Reflect.apply||(VKe?xoe.bind(_oe):function(){return xoe.apply(_oe,arguments)})});var uU=R((Mdr,Ioe)=>{"use strict";p();var GKe=ct(),Eoe=tc(),$Ke=jr(),Soe=pa(),HKe=Mr(),Toe=GKe([].push);Ioe.exports=function(t){if($Ke(t))return t;if(Eoe(t)){for(var e=t.length,r=[],n=0;n<e;n++){var i=t[n];typeof i=="string"?Toe(r,i):(typeof i=="number"||Soe(i)==="Number"||Soe(i)==="String")&&Toe(r,HKe(i))}var o=r.length,l=!0;return function(f,d){if(l)return l=!1,d;if(Eoe(this))return d;for(var v=0;v<o;v++)if(r[v]===f)return d}}}});var cU=R(()=>{"use strict";p();var WKe=oe(),Doe=_r(),Noe=ma(),ZKe=jt(),D1=ct(),koe=yt(),Aoe=jr(),Moe=ph(),qoe=ks(),YKe=uU(),KKe=td(),XKe=String,sd=Doe("JSON","stringify"),JC=D1(/./.exec),Coe=D1("".charAt),QKe=D1("".charCodeAt),JKe=D1("".replace),e7e=D1(1 .toString),t7e=/[\uD800-\uDFFF]/g,Poe=/^[\uD800-\uDBFF]$/,Roe=/^[\uDC00-\uDFFF]$/,Ooe=!KKe||koe(function(){var t=Doe("Symbol")("stringify detection");return sd([t])!=="[null]"||sd({a:t})!=="{}"||sd(Object(t))!=="{}"}),Loe=koe(function(){return sd("\uDF06\uD834")!=="\"\\udf06\\ud834\""||sd("\uDEAD")!=="\"\\udead\""}),r7e=function(t,e){var r=qoe(arguments),n=YKe(e);if(!(!Aoe(n)&&(t===void 0||Moe(t))))return r[1]=function(i,o){if(Aoe(n)&&(o=ZKe(n,this,XKe(i),o)),!Moe(o))return o},Noe(sd,null,r)},n7e=function(t,e,r){var n=Coe(r,e-1),i=Coe(r,e+1);return JC(Poe,t)&&!JC(Roe,i)||JC(Roe,t)&&!JC(Poe,n)?"\\u"+e7e(QKe(t,0),16):t};sd&&WKe({target:"JSON",stat:!0,arity:3,forced:Ooe||Loe},{stringify:function(e,r,n){var i=qoe(arguments),o=Noe(Ooe?r7e:sd,null,i);return Loe&&typeof o=="string"?JKe(o,t7e,n7e):o}})});var joe=R(()=>{"use strict";p();var i7e=oe(),o7e=td(),a7e=yt(),Foe=A1(),s7e=Yr(),l7e=!o7e||a7e(function(){Foe.f(1)});i7e({target:"Object",stat:!0,forced:l7e},{getOwnPropertySymbols:function(e){var r=Foe.f;return r?r(s7e(e)):[]}})});var zoe=R(()=>{"use strict";p();poe();goe();yoe();cU();joe()});var Woe=R(()=>{"use strict";p();var u7e=oe(),c7e=sr(),f7e=Ft(),eP=ct(),h7e=Br(),p7e=jr(),d7e=da(),m7e=Mr(),g7e=hi(),v7e=vg(),gh=f7e.Symbol,bg=gh&&gh.prototype;c7e&&p7e(gh)&&(!("description"in bg)||gh().description!==void 0)&&(fU={},N1=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:m7e(arguments[0]),r=d7e(bg,this)?new gh(e):e===void 0?gh():gh(e);return e===""&&(fU[r]=!0),r},v7e(N1,gh),N1.prototype=bg,bg.constructor=N1,Uoe=String(gh("description detection"))==="Symbol(description detection)",Boe=eP(bg.valueOf),Voe=eP(bg.toString),Goe=/^Symbol\((.*)\)[^)]+$/,$oe=eP("".replace),Hoe=eP("".slice),g7e(bg,"description",{configurable:!0,get:function(){var e=Boe(this);if(h7e(fU,e))return"";var r=Voe(e),n=Uoe?Hoe(r,7,-1):$oe(r,Goe,"$1");return n===""?void 0:n}}),u7e({global:!0,constructor:!0,forced:!0},{Symbol:N1}));var fU,N1,Uoe,Boe,Voe,Goe,$oe,Hoe});var Zoe=R(()=>{"use strict";p();var y7e=Ci();y7e("asyncIterator")});var Yoe=R(()=>{"use strict";p();var _7e=Ci();_7e("hasInstance")});var Koe=R(()=>{"use strict";p();var x7e=Ci();x7e("isConcatSpreadable")});var Xoe=R(()=>{"use strict";p();var b7e=Ci();b7e("iterator")});var Qoe=R(()=>{"use strict";p();var w7e=Ci();w7e("match")});var Joe=R(()=>{"use strict";p();var E7e=Ci();E7e("matchAll")});var eae=R(()=>{"use strict";p();var S7e=Ci();S7e("replace")});var tae=R(()=>{"use strict";p();var T7e=Ci();T7e("search")});var rae=R(()=>{"use strict";p();var I7e=Ci();I7e("species")});var nae=R(()=>{"use strict";p();var A7e=Ci();A7e("split")});var iae=R(()=>{"use strict";p();var M7e=Ci(),C7e=W4();M7e("toPrimitive");C7e()});var oae=R(()=>{"use strict";p();var P7e=_r(),R7e=Ci(),O7e=ls();R7e("toStringTag");O7e(P7e("Symbol"),"Symbol")});var aae=R(()=>{"use strict";p();var L7e=Ci();L7e("unscopables")});var k1=R((Amr,sae)=>{"use strict";p();var D7e=ct(),N7e=xr();sae.exports=function(t,e,r){try{return D7e(N7e(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(n){}}});var hU=R((Cmr,lae)=>{"use strict";p();var k7e=hr();lae.exports=function(t){return k7e(t)||t===null}});var pU=R((Rmr,uae)=>{"use strict";p();var q7e=hU(),F7e=String,j7e=TypeError;uae.exports=function(t){if(q7e(t))return t;throw new j7e("Can't set "+F7e(t)+" as a prototype")}});var eu=R((Lmr,cae)=>{"use strict";p();var z7e=k1(),U7e=hr(),B7e=oi(),V7e=pU();cae.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,e={},r;try{r=z7e(Object.prototype,"__proto__","set"),r(e,[]),t=e instanceof Array}catch(n){}return function(i,o){return B7e(i),V7e(o),U7e(i)&&(t?r(i,o):i.__proto__=o),i}}():void 0)});var dU=R((Nmr,fae)=>{"use strict";p();var G7e=ei().f;fae.exports=function(t,e,r){r in t||G7e(t,r,{configurable:!0,get:function(){return e[r]},set:function(n){e[r]=n}})}});var ld=R((qmr,pae)=>{"use strict";p();var $7e=jr(),H7e=hr(),hae=eu();pae.exports=function(t,e,r){var n,i;return hae&&$7e(n=e.constructor)&&n!==r&&H7e(i=n.prototype)&&i!==r.prototype&&hae(t,i),t}});var wg=R((jmr,dae)=>{"use strict";p();var W7e=Mr();dae.exports=function(t,e){return t===void 0?arguments.length<2?"":e:W7e(t)}});var mU=R((Umr,mae)=>{"use strict";p();var Z7e=hr(),Y7e=xo();mae.exports=function(t,e){Z7e(e)&&"cause"in e&&Y7e(t,"cause",e.cause)}});var tP=R((Vmr,yae)=>{"use strict";p();var K7e=ct(),gae=Error,X7e=K7e("".replace),Q7e=function(t){return String(new gae(t).stack)}("zxcasd"),vae=/\n\s*at [^:]*:[^\n]*/,J7e=vae.test(Q7e);yae.exports=function(t,e){if(J7e&&typeof t=="string"&&!gae.prepareStackTrace)for(;e--;)t=X7e(t,vae,"");return t}});var gU=R(($mr,_ae)=>{"use strict";p();var eXe=yt(),tXe=Ls();_ae.exports=!eXe(function(){var t=new Error("a");return"stack"in t?(Object.defineProperty(t,"stack",tXe(1,7)),t.stack!==7):!0})});var rP=R((Wmr,bae)=>{"use strict";p();var rXe=xo(),nXe=tP(),iXe=gU(),xae=Error.captureStackTrace;bae.exports=function(t,e,r,n){iXe&&(xae?xae(t,e):rXe(t,"stack",nXe(r,n)))}});var vU=R((Ymr,Mae)=>{"use strict";p();var wae=_r(),oXe=Br(),Eae=xo(),aXe=da(),Sae=eu(),Tae=vg(),Iae=dU(),sXe=ld(),lXe=wg(),uXe=mU(),cXe=rP(),fXe=sr(),Aae=pn();Mae.exports=function(t,e,r,n){var i="stackTraceLimit",o=n?2:1,l=t.split("."),f=l[l.length-1],d=wae.apply(null,l);if(d){var v=d.prototype;if(!Aae&&oXe(v,"cause")&&delete v.cause,!r)return d;var x=wae("Error"),b=e(function(A,P){var N=lXe(n?P:A,void 0),j=n?new d(A):new d;return N!==void 0&&Eae(j,"message",N),cXe(j,b,j.stack,2),this&&aXe(v,this)&&sXe(j,this,b),arguments.length>o&&uXe(j,arguments[o]),j});if(b.prototype=v,f!=="Error"?Sae?Sae(b,x):Tae(b,x,{name:!0}):fXe&&i in d&&(Iae(b,d,i),Iae(b,d,"prepareStackTrace")),Tae(b,d),!Aae)try{v.name!==f&&Eae(v,"name",f),v.constructor=b}catch(A){}return b}}});var Oae=R(()=>{"use strict";p();var Pae=oe(),hXe=Ft(),Kc=ma(),Rae=vU(),yU="WebAssembly",Cae=hXe[yU],nP=new Error("e",{cause:7}).cause!==7,Eg=function(t,e){var r={};r[t]=Rae(t,e,nP),Pae({global:!0,constructor:!0,arity:1,forced:nP},r)},_U=function(t,e){if(Cae&&Cae[t]){var r={};r[t]=Rae(yU+"."+t,e,nP),Pae({target:yU,stat:!0,constructor:!0,arity:1,forced:nP},r)}};Eg("Error",function(t){return function(r){return Kc(t,this,arguments)}});Eg("EvalError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("RangeError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("ReferenceError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("SyntaxError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("TypeError",function(t){return function(r){return Kc(t,this,arguments)}});Eg("URIError",function(t){return function(r){return Kc(t,this,arguments)}});_U("CompileError",function(t){return function(r){return Kc(t,this,arguments)}});_U("LinkError",function(t){return function(r){return Kc(t,this,arguments)}});_U("RuntimeError",function(t){return function(r){return Kc(t,this,arguments)}})});var xU=R((egr,Dae)=>{"use strict";p();var pXe=sr(),dXe=yt(),mXe=Bt(),Lae=wg(),iP=Error.prototype.toString,gXe=dXe(function(){if(pXe){var t=Object.create(Object.defineProperty({},"name",{get:function(){return this===t}}));if(iP.call(t)!=="true")return!0}return iP.call({message:1,name:2})!=="2: 1"||iP.call({})!=="Error"});Dae.exports=gXe?function(){var e=mXe(this),r=Lae(e.name,"Error"),n=Lae(e.message);return r?n?r+": "+n:r:n}:iP});var qae=R(()=>{"use strict";p();var vXe=Nn(),Nae=xU(),kae=Error.prototype;kae.toString!==Nae&&vXe(kae,"toString",Nae)});var oP=R((ogr,Fae)=>{"use strict";p();var yXe=yt();Fae.exports=!yXe(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})});var bo=R((sgr,zae)=>{"use strict";p();var _Xe=Br(),xXe=jr(),bXe=Yr(),wXe=S1(),EXe=oP(),jae=wXe("IE_PROTO"),bU=Object,SXe=bU.prototype;zae.exports=EXe?bU.getPrototypeOf:function(t){var e=bXe(t);if(_Xe(e,jae))return e[jae];var r=e.constructor;return xXe(r)&&e instanceof r?r.prototype:e instanceof bU?SXe:null}});var Sg=R((ugr,Uae)=>{"use strict";p();Uae.exports={}});var aP=R((fgr,Bae)=>{"use strict";p();var TXe=mr(),IXe=Sg(),AXe=TXe("iterator"),MXe=Array.prototype;Bae.exports=function(t){return t!==void 0&&(IXe.Array===t||MXe[AXe]===t)}});var Xc=R((pgr,Gae)=>{"use strict";p();var CXe=ss(),Vae=Xi(),PXe=Ds(),RXe=Sg(),OXe=mr(),LXe=OXe("iterator");Gae.exports=function(t){if(!PXe(t))return Vae(t,LXe)||Vae(t,"@@iterator")||RXe[CXe(t)]}});var ud=R((mgr,$ae)=>{"use strict";p();var DXe=jt(),NXe=xr(),kXe=Bt(),qXe=rd(),FXe=Xc(),jXe=TypeError;$ae.exports=function(t,e){var r=arguments.length<2?FXe(t):e;if(NXe(r))return kXe(DXe(r,t));throw new jXe(qXe(t)+" is not iterable")}});var Xo=R((vgr,Wae)=>{"use strict";p();var zXe=jt(),Hae=Bt(),UXe=Xi();Wae.exports=function(t,e,r){var n,i;Hae(t);try{if(n=UXe(t,"return"),!n){if(e==="throw")throw r;return r}n=zXe(n,t)}catch(o){i=!0,n=o}if(e==="throw")throw r;if(i)throw n;return Hae(n),r}});var Pi=R((_gr,Xae)=>{"use strict";p();var BXe=Hn(),VXe=jt(),GXe=Bt(),$Xe=rd(),HXe=aP(),WXe=sn(),Zae=da(),ZXe=ud(),YXe=Xc(),Yae=Xo(),KXe=TypeError,sP=function(t,e){this.stopped=t,this.result=e},Kae=sP.prototype;Xae.exports=function(t,e,r){var n=r&&r.that,i=!!(r&&r.AS_ENTRIES),o=!!(r&&r.IS_RECORD),l=!!(r&&r.IS_ITERATOR),f=!!(r&&r.INTERRUPTED),d=BXe(e,n),v,x,b,A,P,N,j,D=function(U){return v&&Yae(v,"normal",U),new sP(!0,U)},F=function(U){return i?(GXe(U),f?d(U[0],U[1],D):d(U[0],U[1])):f?d(U,D):d(U)};if(o)v=t.iterator;else if(l)v=t;else{if(x=YXe(t),!x)throw new KXe($Xe(t)+" is not iterable");if(HXe(x)){for(b=0,A=WXe(t);A>b;b++)if(P=F(t[b]),P&&Zae(Kae,P))return P;return new sP(!1)}v=ZXe(t,x)}for(N=o?t.next:v.next;!(j=VXe(N,v)).done;){try{P=F(j.value)}catch(U){Yae(v,"throw",U)}if(typeof P=="object"&&P&&Zae(Kae,P))return P}return new sP(!1)}});var Jae=R(()=>{"use strict";p();var XXe=oe(),QXe=da(),JXe=bo(),lP=eu(),eQe=vg(),Qae=Qi(),wU=xo(),EU=Ls(),tQe=mU(),rQe=rP(),nQe=Pi(),iQe=wg(),oQe=mr(),aQe=oQe("toStringTag"),uP=Error,sQe=[].push,v_=function(e,r){var n=QXe(SU,this),i;lP?i=lP(new uP,n?JXe(this):SU):(i=n?this:Qae(SU),wU(i,aQe,"Error")),r!==void 0&&wU(i,"message",iQe(r)),rQe(i,v_,i.stack,1),arguments.length>2&&tQe(i,arguments[2]);var o=[];return nQe(e,sQe,{that:o}),wU(i,"errors",o),i};lP?lP(v_,uP):eQe(v_,uP,{name:!0});var SU=v_.prototype=Qae(uP.prototype,{constructor:EU(1,v_),message:EU(1,""),name:EU(1,"AggregateError")});XXe({global:!0,constructor:!0,arity:2},{AggregateError:v_})});var TU=R(()=>{"use strict";p();Jae()});var nse=R(()=>{"use strict";p();var lQe=oe(),uQe=_r(),cQe=ma(),ese=yt(),fQe=vU(),IU="AggregateError",tse=uQe(IU),rse=!ese(function(){return tse([1]).errors[0]!==1})&&ese(function(){return tse([1],IU,{cause:7}).cause!==7});lQe({global:!0,constructor:!0,arity:2,forced:rse},{AggregateError:fQe(IU,function(t){return function(r,n){return cQe(t,this,arguments)}},rse,!0)})});var Ri=R((Pgr,ise)=>{"use strict";p();var hQe=mr(),pQe=Qi(),dQe=ei().f,AU=hQe("unscopables"),MU=Array.prototype;MU[AU]===void 0&&dQe(MU,AU,{configurable:!0,value:pQe(null)});ise.exports=function(t){MU[AU][t]=!0}});var CU=R(()=>{"use strict";p();var mQe=oe(),gQe=Yr(),vQe=sn(),yQe=fi(),_Qe=Ri();mQe({target:"Array",proto:!0},{at:function(e){var r=gQe(this),n=vQe(r),i=yQe(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:r[o]}});_Qe("at")});var cd=R((Ngr,ose)=>{"use strict";p();var xQe=TypeError,bQe=9007199254740991;ose.exports=function(t){if(t>bQe)throw xQe("Maximum allowed index exceeded");return t}});var tu=R((qgr,ase)=>{"use strict";p();var wQe=sr(),EQe=ei(),SQe=Ls();ase.exports=function(t,e,r){wQe?EQe.f(t,e,SQe(0,r)):t[e]=r}});var y_=R((jgr,sse)=>{"use strict";p();var TQe=yt(),IQe=mr(),AQe=Qu(),MQe=IQe("species");sse.exports=function(t){return AQe>=51||!TQe(function(){var e=[],r=e.constructor={};return r[MQe]=function(){return{foo:1}},e[t](Boolean).foo!==1})}});var fse=R(()=>{"use strict";p();var CQe=oe(),PQe=yt(),RQe=tc(),OQe=hr(),LQe=Yr(),DQe=sn(),lse=cd(),use=tu(),NQe=p_(),kQe=y_(),qQe=mr(),FQe=Qu(),cse=qQe("isConcatSpreadable"),jQe=FQe>=51||!PQe(function(){var t=[];return t[cse]=!1,t.concat()[0]!==t}),zQe=function(t){if(!OQe(t))return!1;var e=t[cse];return e!==void 0?!!e:RQe(t)},UQe=!jQe||!kQe("concat");CQe({target:"Array",proto:!0,arity:1,forced:UQe},{concat:function(e){var r=LQe(this),n=NQe(r,0),i=0,o,l,f,d,v;for(o=-1,f=arguments.length;o<f;o++)if(v=o===-1?r:arguments[o],zQe(v))for(d=DQe(v),lse(i+d),l=0;l<d;l++,i++)l in v&&use(n,i,v[l]);else lse(i+1),use(n,i++,v);return n.length=i,n}})});var q1=R((Ggr,pse)=>{"use strict";p();var hse=rd(),BQe=TypeError;pse.exports=function(t,e){if(!delete t[e])throw new BQe("Cannot delete property "+hse(e)+" of "+hse(t))}});var RU=R((Hgr,dse)=>{"use strict";p();var VQe=Yr(),PU=ec(),GQe=sn(),$Qe=q1(),HQe=Math.min;dse.exports=[].copyWithin||function(e,r){var n=VQe(this),i=GQe(n),o=PU(e,i),l=PU(r,i),f=arguments.length>2?arguments[2]:void 0,d=HQe((f===void 0?i:PU(f,i))-l,i-o),v=1;for(l<o&&o<l+d&&(v=-1,l+=d-1,o+=d-1);d-->0;)l in n?n[o]=n[l]:$Qe(n,o),o+=v,l+=v;return n}});var mse=R(()=>{"use strict";p();var WQe=oe(),ZQe=RU(),YQe=Ri();WQe({target:"Array",proto:!0},{copyWithin:ZQe});YQe("copyWithin")});var ru=R((Xgr,gse)=>{"use strict";p();var KQe=yt();gse.exports=function(t,e){var r=[][t];return!!r&&KQe(function(){r.call(null,e||function(){return 1},1)})}});var vse=R(()=>{"use strict";p();var XQe=oe(),QQe=Ji().every,JQe=ru(),eJe=JQe("every");XQe({target:"Array",proto:!0,forced:!eJe},{every:function(e){return QQe(this,e,arguments.length>1?arguments[1]:void 0)}})});var cP=R((rvr,_se)=>{"use strict";p();var tJe=Yr(),yse=ec(),rJe=sn();_se.exports=function(e){for(var r=tJe(this),n=rJe(r),i=arguments.length,o=yse(i>1?arguments[1]:void 0,n),l=i>2?arguments[2]:void 0,f=l===void 0?n:yse(l,n);f>o;)r[o++]=e;return r}});var xse=R(()=>{"use strict";p();var nJe=oe(),iJe=cP(),oJe=Ri();nJe({target:"Array",proto:!0},{fill:iJe});oJe("fill")});var bse=R(()=>{"use strict";p();var aJe=oe(),sJe=Ji().filter,lJe=y_(),uJe=lJe("filter");aJe({target:"Array",proto:!0,forced:!uJe},{filter:function(e){return sJe(this,e,arguments.length>1?arguments[1]:void 0)}})});var Ese=R(()=>{"use strict";p();var cJe=oe(),fJe=Ji().find,hJe=Ri(),OU="find",wse=!0;OU in[]&&Array(1)[OU](function(){wse=!1});cJe({target:"Array",proto:!0,forced:wse},{find:function(e){return fJe(this,e,arguments.length>1?arguments[1]:void 0)}});hJe(OU)});var Tse=R(()=>{"use strict";p();var pJe=oe(),dJe=Ji().findIndex,mJe=Ri(),LU="findIndex",Sse=!0;LU in[]&&Array(1)[LU](function(){Sse=!1});pJe({target:"Array",proto:!0,forced:Sse},{findIndex:function(e){return dJe(this,e,arguments.length>1?arguments[1]:void 0)}});mJe(LU)});var F1=R((gvr,Ase)=>{"use strict";p();var gJe=Hn(),vJe=hh(),yJe=Yr(),_Je=sn(),Ise=function(t){var e=t===1;return function(r,n,i){for(var o=yJe(r),l=vJe(o),f=_Je(l),d=gJe(n,i),v,x;f-->0;)if(v=l[f],x=d(v,f,o),x)switch(t){case 0:return v;case 1:return f}return e?-1:void 0}};Ase.exports={findLast:Ise(0),findLastIndex:Ise(1)}});var DU=R(()=>{"use strict";p();var xJe=oe(),bJe=F1().findLast,wJe=Ri();xJe({target:"Array",proto:!0},{findLast:function(e){return bJe(this,e,arguments.length>1?arguments[1]:void 0)}});wJe("findLast")});var NU=R(()=>{"use strict";p();var EJe=oe(),SJe=F1().findLastIndex,TJe=Ri();EJe({target:"Array",proto:!0},{findLastIndex:function(e){return SJe(this,e,arguments.length>1?arguments[1]:void 0)}});TJe("findLastIndex")});var kU=R((Svr,Cse)=>{"use strict";p();var IJe=tc(),AJe=sn(),MJe=cd(),CJe=Hn(),Mse=function(t,e,r,n,i,o,l,f){for(var d=i,v=0,x=l?CJe(l,f):!1,b,A;v<n;)v in r&&(b=x?x(r[v],v,e):r[v],o>0&&IJe(b)?(A=AJe(b),d=Mse(t,e,b,A,d,o-1)-1):(MJe(d+1),t[d]=b),d++),v++;return d};Cse.exports=Mse});var Pse=R(()=>{"use strict";p();var PJe=oe(),RJe=kU(),OJe=Yr(),LJe=sn(),DJe=fi(),NJe=p_();PJe({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,r=OJe(this),n=LJe(r),i=NJe(r,0);return i.length=RJe(i,r,r,n,0,e===void 0?1:DJe(e)),i}})});var Rse=R(()=>{"use strict";p();var kJe=oe(),qJe=kU(),FJe=xr(),jJe=Yr(),zJe=sn(),UJe=p_();kJe({target:"Array",proto:!0},{flatMap:function(e){var r=jJe(this),n=zJe(r),i;return FJe(e),i=UJe(r,0),i.length=qJe(i,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),i}})});var qU=R((Ovr,Ose)=>{"use strict";p();var BJe=Ji().forEach,VJe=ru(),GJe=VJe("forEach");Ose.exports=GJe?[].forEach:function(e){return BJe(this,e,arguments.length>1?arguments[1]:void 0)}});var Dse=R(()=>{"use strict";p();var $Je=oe(),Lse=qU();$Je({target:"Array",proto:!0,forced:[].forEach!==Lse},{forEach:Lse})});var fP=R((qvr,Nse)=>{"use strict";p();var HJe=Bt(),WJe=Xo();Nse.exports=function(t,e,r,n){try{return n?e(HJe(r)[0],r[1]):e(r)}catch(i){WJe(t,"throw",i)}}});var FU=R((jvr,Fse)=>{"use strict";p();var ZJe=Hn(),YJe=jt(),KJe=Yr(),XJe=fP(),QJe=aP(),JJe=rc(),eet=sn(),kse=tu(),tet=ud(),ret=Xc(),qse=Array;Fse.exports=function(e){var r=KJe(e),n=JJe(this),i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0;l&&(o=ZJe(o,i>2?arguments[2]:void 0));var f=ret(r),d=0,v,x,b,A,P,N;if(f&&!(this===qse&&QJe(f)))for(x=n?new this:[],A=tet(r,f),P=A.next;!(b=YJe(P,A)).done;d++)N=l?XJe(A,o,[b.value,d],!0):b.value,kse(x,d,N);else for(v=eet(r),x=n?new this(v):qse(v);v>d;d++)N=l?o(r[d],d):r[d],kse(x,d,N);return x.length=d,x}});var j1=R((Uvr,Bse)=>{"use strict";p();var net=mr(),zse=net("iterator"),Use=!1;try{jse=0,jU={next:function(){return{done:!!jse++}},return:function(){Use=!0}},jU[zse]=function(){return this},Array.from(jU,function(){throw 2})}catch(t){}var jse,jU;Bse.exports=function(t,e){try{if(!e&&!Use)return!1}catch(i){return!1}var r=!1;try{var n={};n[zse]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(i){}return r}});var Vse=R(()=>{"use strict";p();var iet=oe(),oet=FU(),aet=j1(),set=!aet(function(t){Array.from(t)});iet({target:"Array",stat:!0,forced:set},{from:oet})});var Gse=R(()=>{"use strict";p();var uet=oe(),cet=f_().includes,fet=yt(),het=Ri(),pet=fet(function(){return!Array(1).includes()});uet({target:"Array",proto:!0,forced:pet},{includes:function(e){return cet(this,e,arguments.length>1?arguments[1]:void 0)}});het("includes")});var Hse=R(()=>{"use strict";p();var det=oe(),met=od(),get=f_().indexOf,vet=ru(),zU=met([].indexOf),$se=!!zU&&1/zU([1],1,-0)<0,yet=$se||!vet("indexOf");det({target:"Array",proto:!0,forced:yet},{indexOf:function(e){var r=arguments.length>1?arguments[1]:void 0;return $se?zU(this,e,r)||0:get(this,e,r)}})});var Wse=R(()=>{"use strict";p();var _et=oe(),xet=tc();_et({target:"Array",stat:!0},{isArray:xet})});var fd=R((tyr,Kse)=>{"use strict";p();var bet=yt(),wet=jr(),Eet=hr(),Tet=Qi(),Zse=bo(),Iet=Nn(),Aet=mr(),Met=pn(),VU=Aet("iterator"),Yse=!1,vh,UU,BU;[].keys&&(BU=[].keys(),"next"in BU?(UU=Zse(Zse(BU)),UU!==Object.prototype&&(vh=UU)):Yse=!0);var Cet=!Eet(vh)||bet(function(){var t={};return vh[VU].call(t)!==t});Cet?vh={}:Met&&(vh=Tet(vh));wet(vh[VU])||Iet(vh,VU,function(){return this});Kse.exports={IteratorPrototype:vh,BUGGY_SAFARI_ITERATORS:Yse}});var hd=R((nyr,Xse)=>{"use strict";p();var Pet=fd().IteratorPrototype,Ret=Qi(),Oet=Ls(),Let=ls(),Det=Sg(),Net=function(){return this};Xse.exports=function(t,e,r,n){var i=e+" Iterator";return t.prototype=Ret(Pet,{next:Oet(+!n,r)}),Let(t,i,!1,!0),Det[i]=Net,t}});var dP=R((oyr,sle)=>{"use strict";p();var ket=oe(),qet=jt(),hP=pn(),ole=mg(),Fet=jr(),jet=hd(),Qse=bo(),Jse=eu(),zet=ls(),Uet=xo(),GU=Nn(),Bet=mr(),ele=Sg(),ale=fd(),Vet=ole.PROPER,Get=ole.CONFIGURABLE,tle=ale.IteratorPrototype,pP=ale.BUGGY_SAFARI_ITERATORS,z1=Bet("iterator"),rle="keys",U1="values",nle="entries",ile=function(){return this};sle.exports=function(t,e,r,n,i,o,l){jet(r,e,n);var f=function(F){if(F===i&&A)return A;if(!pP&&F&&F in x)return x[F];switch(F){case rle:return function(){return new r(this,F)};case U1:return function(){return new r(this,F)};case nle:return function(){return new r(this,F)}}return function(){return new r(this)}},d=e+" Iterator",v=!1,x=t.prototype,b=x[z1]||x["@@iterator"]||i&&x[i],A=!pP&&b||f(i),P=e==="Array"&&x.entries||b,N,j,D;if(P&&(N=Qse(P.call(new t)),N!==Object.prototype&&N.next&&(!hP&&Qse(N)!==tle&&(Jse?Jse(N,tle):Fet(N[z1])||GU(N,z1,ile)),zet(N,d,!0,!0),hP&&(ele[d]=ile))),Vet&&i===U1&&b&&b.name!==U1&&(!hP&&Get?Uet(x,"name",U1):(v=!0,A=function(){return qet(b,this)})),i)if(j={values:f(U1),keys:o?A:f(rle),entries:f(nle)},l)for(D in j)(pP||v||!(D in x))&&GU(x,D,j[D]);else ket({target:e,proto:!0,forced:pP||v},j);return(!hP||l)&&x[z1]!==A&&GU(x,z1,A,{name:i}),ele[e]=A,j}});var ko=R((syr,lle)=>{"use strict";p();lle.exports=function(t,e){return{value:t,done:e}}});var B1=R((uyr,ple)=>{"use strict";p();var $et=_o(),$U=Ri(),ule=Sg(),fle=Cn(),Het=ei().f,Wet=dP(),mP=ko(),Zet=pn(),Yet=sr(),hle="Array Iterator",Ket=fle.set,Xet=fle.getterFor(hle);ple.exports=Wet(Array,"Array",function(t,e){Ket(this,{type:hle,target:$et(t),index:0,kind:e})},function(){var t=Xet(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,mP(void 0,!0);switch(t.kind){case"keys":return mP(r,!1);case"values":return mP(e[r],!1)}return mP([r,e[r]],!1)},"values");var cle=ule.Arguments=ule.Array;$U("keys");$U("values");$U("entries");if(!Zet&&Yet&&cle.name!=="values")try{Het(cle,"name",{value:"values"})}catch(t){}});var dle=R(()=>{"use strict";p();var Qet=oe(),Jet=ct(),ett=hh(),ttt=_o(),rtt=ru(),ntt=Jet([].join),itt=ett!==Object,ott=itt||!rtt("join",",");Qet({target:"Array",proto:!0,forced:ott},{join:function(e){return ntt(ttt(this),e===void 0?",":e)}})});var WU=R((dyr,gle)=>{"use strict";p();var att=ma(),stt=_o(),ltt=fi(),utt=sn(),ctt=ru(),ftt=Math.min,HU=[].lastIndexOf,mle=!!HU&&1/[1].lastIndexOf(1,-0)<0,htt=ctt("lastIndexOf"),ptt=mle||!htt;gle.exports=ptt?function(e){if(mle)return att(HU,this,arguments)||0;var r=stt(this),n=utt(r);if(n===0)return-1;var i=n-1;for(arguments.length>1&&(i=ftt(i,ltt(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in r&&r[i]===e)return i||0;return-1}:HU});var yle=R(()=>{"use strict";p();var dtt=oe(),vle=WU();dtt({target:"Array",proto:!0,forced:vle!==[].lastIndexOf},{lastIndexOf:vle})});var _le=R(()=>{"use strict";p();var mtt=oe(),gtt=Ji().map,vtt=y_(),ytt=vtt("map");mtt({target:"Array",proto:!0,forced:!ytt},{map:function(e){return gtt(this,e,arguments.length>1?arguments[1]:void 0)}})});var ble=R(()=>{"use strict";p();var _tt=oe(),xtt=yt(),btt=rc(),wtt=tu(),xle=Array,Ett=xtt(function(){function t(){}return!(xle.of.call(t)instanceof t)});_tt({target:"Array",stat:!0,forced:Ett},{of:function(){for(var e=0,r=arguments.length,n=new(btt(this)?this:xle)(r);r>e;)wtt(n,e,arguments[e++]);return n.length=r,n}})});var gP=R((Tyr,wle)=>{"use strict";p();var Stt=sr(),Ttt=tc(),Itt=TypeError,Att=Object.getOwnPropertyDescriptor,Mtt=Stt&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();wle.exports=Mtt?function(t,e){if(Ttt(t)&&!Att(t,"length").writable)throw new Itt("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}});var Ele=R(()=>{"use strict";p();var Ctt=oe(),Ptt=Yr(),Rtt=sn(),Ott=gP(),Ltt=cd(),Dtt=yt(),Ntt=Dtt(function(){return[].push.call({length:4294967296},1)!==4294967297}),ktt=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},qtt=Ntt||!ktt();Ctt({target:"Array",proto:!0,arity:1,forced:qtt},{push:function(e){var r=Ptt(this),n=Rtt(r),i=arguments.length;Ltt(n+i);for(var o=0;o<i;o++)r[n]=arguments[o],n++;return Ott(r,n),n}})});var V1=R((Pyr,Ale)=>{"use strict";p();var Ftt=xr(),jtt=Yr(),ztt=hh(),Utt=sn(),Sle=TypeError,Tle="Reduce of empty array with no initial value",Ile=function(t){return function(e,r,n,i){var o=jtt(e),l=ztt(o),f=Utt(o);if(Ftt(r),f===0&&n<2)throw new Sle(Tle);var d=t?f-1:0,v=t?-1:1;if(n<2)for(;;){if(d in l){i=l[d],d+=v;break}if(d+=v,t?d<0:f<=d)throw new Sle(Tle)}for(;t?d>=0:f>d;d+=v)d in l&&(i=r(i,l[d],d,o));return i}};Ale.exports={left:Ile(!1),right:Ile(!0)}});var $1=R((Oyr,Mle)=>{"use strict";p();var G1=Ft(),Btt=Ku(),Vtt=pa(),vP=function(t){return Btt.slice(0,t.length)===t};Mle.exports=function(){return vP("Bun/")?"BUN":vP("Cloudflare-Workers")?"CLOUDFLARE":vP("Deno/")?"DENO":vP("Node.js/")?"NODE":G1.Bun&&typeof Bun.version=="string"?"BUN":G1.Deno&&typeof Deno.version=="object"?"DENO":Vtt(G1.process)==="process"?"NODE":G1.window&&G1.document?"BROWSER":"REST"}()});var Tg=R((Dyr,Cle)=>{"use strict";p();var Gtt=$1();Cle.exports=Gtt==="NODE"});var Rle=R(()=>{"use strict";p();var $tt=oe(),Htt=V1().left,Wtt=ru(),Ple=Qu(),Ztt=Tg(),Ytt=!Ztt&&Ple>79&&Ple<83,Ktt=Ytt||!Wtt("reduce");$tt({target:"Array",proto:!0,forced:Ktt},{reduce:function(e){var r=arguments.length;return Htt(this,e,r,r>1?arguments[1]:void 0)}})});var Lle=R(()=>{"use strict";p();var Xtt=oe(),Qtt=V1().right,Jtt=ru(),Ole=Qu(),ert=Tg(),trt=!ert&&Ole>79&&Ole<83,rrt=trt||!Jtt("reduceRight");Xtt({target:"Array",proto:!0,forced:rrt},{reduceRight:function(e){return Qtt(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var Nle=R(()=>{"use strict";p();var nrt=oe(),irt=ct(),ort=tc(),art=irt([].reverse),Dle=[1,2];nrt({target:"Array",proto:!0,forced:String(Dle)===String(Dle.reverse())},{reverse:function(){return ort(this)&&(this.length=this.length),art(this)}})});var Fle=R(()=>{"use strict";p();var srt=oe(),kle=tc(),lrt=rc(),urt=hr(),qle=ec(),crt=sn(),frt=_o(),hrt=tu(),prt=mr(),drt=y_(),mrt=ks(),grt=drt("slice"),vrt=prt("species"),ZU=Array,yrt=Math.max;srt({target:"Array",proto:!0,forced:!grt},{slice:function(e,r){var n=frt(this),i=crt(n),o=qle(e,i),l=qle(r===void 0?i:r,i),f,d,v;if(kle(n)&&(f=n.constructor,lrt(f)&&(f===ZU||kle(f.prototype))?f=void 0:urt(f)&&(f=f[vrt],f===null&&(f=void 0)),f===ZU||f===void 0))return mrt(n,o,l);for(d=new(f===void 0?ZU:f)(yrt(l-o,0)),v=0;o<l;o++,v++)o in n&&hrt(d,v,n[o]);return d.length=v,d}})});var jle=R(()=>{"use strict";p();var _rt=oe(),xrt=Ji().some,brt=ru(),wrt=brt("some");_rt({target:"Array",proto:!0,forced:!wrt},{some:function(e){return xrt(this,e,arguments.length>1?arguments[1]:void 0)}})});var yP=R((Xyr,Ule)=>{"use strict";p();var zle=ks(),Ert=Math.floor,YU=function(t,e){var r=t.length;if(r<8)for(var n=1,i,o;n<r;){for(o=n,i=t[n];o&&e(t[o-1],i)>0;)t[o]=t[--o];o!==n++&&(t[o]=i)}else for(var l=Ert(r/2),f=YU(zle(t,0,l),e),d=YU(zle(t,l),e),v=f.length,x=d.length,b=0,A=0;b<v||A<x;)t[b+A]=b<v&&A<x?e(f[b],d[A])<=0?f[b++]:d[A++]:b<v?f[b++]:d[A++];return t};Ule.exports=YU});var KU=R((Jyr,Vle)=>{"use strict";p();var Srt=Ku(),Ble=Srt.match(/firefox\/(\d+)/i);Vle.exports=!!Ble&&+Ble[1]});var XU=R((t_r,Gle)=>{"use strict";p();var Trt=Ku();Gle.exports=/MSIE|Trident/.test(Trt)});var _P=R((n_r,Hle)=>{"use strict";p();var Irt=Ku(),$le=Irt.match(/AppleWebKit\/(\d+)\./);Hle.exports=!!$le&&+$le[1]});var tue=R(()=>{"use strict";p();var Art=oe(),Jle=ct(),Mrt=xr(),Crt=Yr(),Wle=sn(),Prt=q1(),Zle=Mr(),QU=yt(),Rrt=yP(),Ort=ru(),Yle=KU(),Lrt=XU(),Kle=Qu(),Xle=_P(),pd=[],Qle=Jle(pd.sort),Drt=Jle(pd.push),Nrt=QU(function(){pd.sort(void 0)}),krt=QU(function(){pd.sort(null)}),qrt=Ort("sort"),eue=!QU(function(){if(Kle)return Kle<70;if(!(Yle&&Yle>3)){if(Lrt)return!0;if(Xle)return Xle<603;var t="",e,r,n,i;for(e=65;e<76;e++){switch(r=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)pd.push({k:r+i,v:n})}for(pd.sort(function(o,l){return l.v-o.v}),i=0;i<pd.length;i++)r=pd[i].k.charAt(0),t.charAt(t.length-1)!==r&&(t+=r);return t!=="DGBEFHACIJK"}}),Frt=Nrt||!krt||!qrt||!eue,jrt=function(t){return function(e,r){return r===void 0?-1:e===void 0?1:t!==void 0?+t(e,r)||0:Zle(e)>Zle(r)?1:-1}};Art({target:"Array",proto:!0,forced:Frt},{sort:function(e){e!==void 0&&Mrt(e);var r=Crt(this);if(eue)return e===void 0?Qle(r):Qle(r,e);var n=[],i=Wle(r),o,l;for(l=0;l<i;l++)l in r&&Drt(n,r[l]);for(Rrt(n,jrt(e)),o=Wle(n),l=0;l<o;)r[l]=n[l++];for(;l<i;)Prt(r,l++);return r}})});var dd=R((l_r,nue)=>{"use strict";p();var zrt=_r(),Urt=hi(),Brt=mr(),Vrt=sr(),rue=Brt("species");nue.exports=function(t){var e=zrt(t);Vrt&&e&&!e[rue]&&Urt(e,rue,{configurable:!0,get:function(){return this}})}});var iue=R(()=>{"use strict";p();var Grt=dd();Grt("Array")});var oue=R(()=>{"use strict";p();var $rt=oe(),Hrt=Yr(),Wrt=ec(),Zrt=fi(),Yrt=sn(),Krt=gP(),Xrt=cd(),Qrt=p_(),Jrt=tu(),JU=q1(),ent=y_(),tnt=ent("splice"),rnt=Math.max,nnt=Math.min;$rt({target:"Array",proto:!0,forced:!tnt},{splice:function(e,r){var n=Hrt(this),i=Yrt(n),o=Wrt(e,i),l=arguments.length,f,d,v,x,b,A;for(l===0?f=d=0:l===1?(f=0,d=i-o):(f=l-2,d=nnt(rnt(Zrt(r),0),i-o)),Xrt(i+f-d),v=Qrt(n,d),x=0;x<d;x++)b=o+x,b in n&&Jrt(v,x,n[b]);if(v.length=d,f<d){for(x=o;x<i-d;x++)b=x+d,A=x+f,b in n?n[A]=n[b]:JU(n,A);for(x=i;x>i-d+f;x--)JU(n,x-1)}else if(f>d)for(x=i-d;x>o;x--)b=x+d-1,A=x+f-1,b in n?n[A]=n[b]:JU(n,A);for(x=0;x<f;x++)n[x+o]=arguments[x+2];return Krt(n,i-d+f),v}})});var eB=R((g_r,aue)=>{"use strict";p();var int=sn();aue.exports=function(t,e){for(var r=int(t),n=new e(r),i=0;i<r;i++)n[i]=t[r-i-1];return n}});var tB=R(()=>{"use strict";p();var ont=oe(),ant=eB(),snt=_o(),lnt=Ri(),unt=Array;ont({target:"Array",proto:!0},{toReversed:function(){return ant(snt(this),unt)}});lnt("toReversed")});var yh=R((b_r,sue)=>{"use strict";p();var cnt=sn();sue.exports=function(t,e,r){for(var n=0,i=arguments.length>2?r:cnt(e),o=new t(i);i>n;)o[n]=e[n++];return o}});var rB=R((E_r,lue)=>{"use strict";p();var fnt=Ft();lue.exports=function(t,e){var r=fnt[t],n=r&&r.prototype;return n&&n[e]}});var nB=R(()=>{"use strict";p();var hnt=oe(),pnt=ct(),dnt=xr(),mnt=_o(),gnt=yh(),vnt=rB(),ynt=Ri(),_nt=Array,xnt=pnt(vnt("Array","sort"));hnt({target:"Array",proto:!0},{toSorted:function(e){e!==void 0&&dnt(e);var r=mnt(this),n=gnt(_nt,r);return xnt(n,e)}});ynt("toSorted")});var iB=R(()=>{"use strict";p();var bnt=oe(),wnt=Ri(),Ent=cd(),Snt=sn(),Tnt=ec(),Int=_o(),Ant=fi(),Mnt=Array,Cnt=Math.max,Pnt=Math.min;bnt({target:"Array",proto:!0},{toSpliced:function(e,r){var n=Int(this),i=Snt(n),o=Tnt(e,i),l=arguments.length,f=0,d,v,x,b;for(l===0?d=v=0:l===1?(d=0,v=i-o):(d=l-2,v=Pnt(Cnt(Ant(r),0),i-o)),x=Ent(i+d-v),b=Mnt(x);f<o;f++)b[f]=n[f];for(;f<o+d;f++)b[f]=arguments[f-o+2];for(;f<x;f++)b[f]=n[f+v-d];return b}});wnt("toSpliced")});var uue=R(()=>{"use strict";p();var Rnt=Ri();Rnt("flat")});var cue=R(()=>{"use strict";p();var Ont=Ri();Ont("flatMap")});var fue=R(()=>{"use strict";p();var Lnt=oe(),Dnt=Yr(),Nnt=sn(),knt=gP(),qnt=q1(),Fnt=cd(),jnt=[].unshift(0)!==1,znt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},Unt=jnt||!znt();Lnt({target:"Array",proto:!0,arity:1,forced:Unt},{unshift:function(e){var r=Dnt(this),n=Nnt(r),i=arguments.length;if(i){Fnt(n+i);for(var o=n;o--;){var l=o+i;o in r?r[l]=r[o]:qnt(r,l)}for(var f=0;f<i;f++)r[f]=arguments[f]}return knt(r,n+i)}})});var oB=R((z_r,hue)=>{"use strict";p();var Bnt=sn(),Vnt=fi(),Gnt=RangeError;hue.exports=function(t,e,r,n){var i=Bnt(t),o=Vnt(r),l=o<0?i+o:o;if(l>=i||l<0)throw new Gnt("Incorrect index");for(var f=new e(i),d=0;d<i;d++)f[d]=d===l?n:t[d];return f}});var aB=R(()=>{"use strict";p();var $nt=oe(),Hnt=oB(),Wnt=_o(),Znt=Array;$nt({target:"Array",proto:!0},{with:function(t,e){return Hnt(Wnt(this),Znt,t,e)}})});var H1=R(($_r,pue)=>{"use strict";p();pue.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var nu=R((W_r,due)=>{"use strict";p();var Ynt=Nn();due.exports=function(t,e,r){for(var n in e)Ynt(t,n,e[n],r);return t}});var ka=R((Y_r,mue)=>{"use strict";p();var Knt=da(),Xnt=TypeError;mue.exports=function(t,e){if(Knt(e,t))return t;throw new Xnt("Incorrect invocation")}});var __=R((X_r,gue)=>{"use strict";p();var Qnt=fi(),Jnt=Ns(),eit=RangeError;gue.exports=function(t){if(t===void 0)return 0;var e=Qnt(t),r=Jnt(e);if(e!==r)throw new eit("Wrong length or index");return r}});var xP=R((J_r,vue)=>{"use strict";p();vue.exports=Math.sign||function(e){var r=+e;return r===0||r!==r?r:r<0?-1:1}});var sB=R((t0r,_ue)=>{"use strict";p();var tit=2220446049250313e-31,yue=1/tit;_ue.exports=function(t){return t+yue-yue}});var lB=R((n0r,xue)=>{"use strict";p();var rit=xP(),nit=sB(),iit=Math.abs,oit=2220446049250313e-31;xue.exports=function(t,e,r,n){var i=+t,o=iit(i),l=rit(i);if(o<n)return l*nit(o/n/e)*n*e;var f=(1+e/oit)*o,d=f-(f-o);return d>r||d!==d?l*(1/0):l*d}});var bP=R((o0r,bue)=>{"use strict";p();var ait=lB(),sit=1.1920928955078125e-7,lit=34028234663852886e22,uit=11754943508222875e-54;bue.exports=Math.fround||function(e){return ait(e,sit,lit,uit)}});var Eue=R((s0r,wue)=>{"use strict";p();var cit=Array,fit=Math.abs,_h=Math.pow,hit=Math.floor,pit=Math.log,dit=Math.LN2,mit=function(t,e,r){var n=cit(r),i=r*8-e-1,o=(1<<i)-1,l=o>>1,f=e===23?_h(2,-24)-_h(2,-77):0,d=t<0||t===0&&1/t<0?1:0,v=0,x,b,A;for(t=fit(t),t!==t||t===1/0?(b=t!==t?1:0,x=o):(x=hit(pit(t)/dit),A=_h(2,-x),t*A<1&&(x--,A*=2),x+l>=1?t+=f/A:t+=f*_h(2,1-l),t*A>=2&&(x++,A/=2),x+l>=o?(b=0,x=o):x+l>=1?(b=(t*A-1)*_h(2,e),x+=l):(b=t*_h(2,l-1)*_h(2,e),x=0));e>=8;)n[v++]=b&255,b/=256,e-=8;for(x=x<<e|b,i+=e;i>0;)n[v++]=x&255,x/=256,i-=8;return n[v-1]|=d*128,n},git=function(t,e){var r=t.length,n=r*8-e-1,i=(1<<n)-1,o=i>>1,l=n-7,f=r-1,d=t[f--],v=d&127,x;for(d>>=7;l>0;)v=v*256+t[f--],l-=8;for(x=v&(1<<-l)-1,v>>=-l,l+=e;l>0;)x=x*256+t[f--],l-=8;if(v===0)v=1-o;else{if(v===i)return x?NaN:d?-1/0:1/0;x+=_h(2,e),v-=o}return(d?-1:1)*x*_h(2,v-e)};wue.exports={pack:mit,unpack:git}});var Y1=R((u0r,zue)=>{"use strict";p();var IP=Ft(),pB=ct(),uB=sr(),vit=H1(),Nue=mg(),yit=xo(),_it=hi(),Sue=nu(),cB=yt(),wP=ka(),xit=fi(),bit=Ns(),SP=__(),wit=bP(),kue=Eue(),Eit=bo(),Tue=eu(),Sit=cP(),Tit=ks(),Iit=ld(),Ait=vg(),que=ls(),dB=Cn(),Mit=Nue.PROPER,Iue=Nue.CONFIGURABLE,b_="ArrayBuffer",AP="DataView",w_="prototype",Cit="Wrong length",Fue="Wrong index",Aue=dB.getterFor(b_),Z1=dB.getterFor(AP),Mue=dB.set,nc=IP[b_],Sl=nc,x_=Sl&&Sl[w_],Qc=IP[AP],Ig=Qc&&Qc[w_],Cue=Object.prototype,Pit=IP.Array,TP=IP.RangeError,Rit=pB(Sit),Oit=pB([].reverse),jue=kue.pack,Pue=kue.unpack,Rue=function(t){return[t&255]},Oue=function(t){return[t&255,t>>8&255]},Lue=function(t){return[t&255,t>>8&255,t>>16&255,t>>24&255]},Due=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Lit=function(t){return jue(wit(t),23,4)},Dit=function(t){return jue(t,52,8)},EP=function(t,e,r){_it(t[w_],e,{configurable:!0,get:function(){return r(this)[e]}})},md=function(t,e,r,n){var i=Z1(t),o=SP(r),l=!!n;if(o+e>i.byteLength)throw new TP(Fue);var f=i.bytes,d=o+i.byteOffset,v=Tit(f,d,d+e);return l?v:Oit(v)},gd=function(t,e,r,n,i,o){var l=Z1(t),f=SP(r),d=n(+i),v=!!o;if(f+e>l.byteLength)throw new TP(Fue);for(var x=l.bytes,b=f+l.byteOffset,A=0;A<e;A++)x[b+A]=d[v?A:e-A-1]};vit?(fB=Mit&&nc.name!==b_,!cB(function(){nc(1)})||!cB(function(){new nc(-1)})||cB(function(){return new nc,new nc(1.5),new nc(NaN),nc.length!==1||fB&&!Iue})?(Sl=function(e){return wP(this,x_),Iit(new nc(SP(e)),this,Sl)},Sl[w_]=x_,x_.constructor=Sl,Ait(Sl,nc)):fB&&Iue&&yit(nc,"name",b_),Tue&&Eit(Ig)!==Cue&&Tue(Ig,Cue),W1=new Qc(new Sl(2)),hB=pB(Ig.setInt8),W1.setInt8(0,2147483648),W1.setInt8(1,2147483649),(W1.getInt8(0)||!W1.getInt8(1))&&Sue(Ig,{setInt8:function(e,r){hB(this,e,r<<24>>24)},setUint8:function(e,r){hB(this,e,r<<24>>24)}},{unsafe:!0})):(Sl=function(e){wP(this,x_);var r=SP(e);Mue(this,{type:b_,bytes:Rit(Pit(r),0),byteLength:r}),uB||(this.byteLength=r,this.detached=!1)},x_=Sl[w_],Qc=function(e,r,n){wP(this,Ig),wP(e,x_);var i=Aue(e),o=i.byteLength,l=xit(r);if(l<0||l>o)throw new TP("Wrong offset");if(n=n===void 0?o-l:bit(n),l+n>o)throw new TP(Cit);Mue(this,{type:AP,buffer:e,byteLength:n,byteOffset:l,bytes:i.bytes}),uB||(this.buffer=e,this.byteLength=n,this.byteOffset=l)},Ig=Qc[w_],uB&&(EP(Sl,"byteLength",Aue),EP(Qc,"buffer",Z1),EP(Qc,"byteLength",Z1),EP(Qc,"byteOffset",Z1)),Sue(Ig,{getInt8:function(e){return md(this,1,e)[0]<<24>>24},getUint8:function(e){return md(this,1,e)[0]},getInt16:function(e){var r=md(this,2,e,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(e){var r=md(this,2,e,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(e){return Due(md(this,4,e,arguments.length>1?arguments[1]:!1))},getUint32:function(e){return Due(md(this,4,e,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(e){return Pue(md(this,4,e,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(e){return Pue(md(this,8,e,arguments.length>1?arguments[1]:!1),52)},setInt8:function(e,r){gd(this,1,e,Rue,r)},setUint8:function(e,r){gd(this,1,e,Rue,r)},setInt16:function(e,r){gd(this,2,e,Oue,r,arguments.length>2?arguments[2]:!1)},setUint16:function(e,r){gd(this,2,e,Oue,r,arguments.length>2?arguments[2]:!1)},setInt32:function(e,r){gd(this,4,e,Lue,r,arguments.length>2?arguments[2]:!1)},setUint32:function(e,r){gd(this,4,e,Lue,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(e,r){gd(this,4,e,Lit,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(e,r){gd(this,8,e,Dit,r,arguments.length>2?arguments[2]:!1)}}));var fB,W1,hB;que(Sl,b_);que(Qc,AP);zue.exports={ArrayBuffer:Sl,DataView:Qc}});var Bue=R(()=>{"use strict";p();var Nit=oe(),kit=Ft(),qit=Y1(),Fit=dd(),mB="ArrayBuffer",Uue=qit[mB],jit=kit[mB];Nit({global:!0,constructor:!0,forced:jit!==Uue},{ArrayBuffer:Uue});Fit(mB)});var Hr=R((d0r,Que)=>{"use strict";p();var zit=H1(),_B=sr(),us=Ft(),Hue=jr(),PP=hr(),yd=Br(),xB=ss(),Uit=rd(),Bit=xo(),gB=Nn(),Vit=hi(),Git=da(),RP=bo(),S_=eu(),$it=mr(),Hit=nd(),Wue=Cn(),Zue=Wue.enforce,Wit=Wue.get,MP=us.Int8Array,vB=MP&&MP.prototype,Vue=us.Uint8ClampedArray,Gue=Vue&&Vue.prototype,Jc=MP&&RP(MP),ic=vB&&RP(vB),Zit=Object.prototype,bB=us.TypeError,$ue=$it("toStringTag"),yB=Hit("TYPED_ARRAY_TAG"),CP="TypedArrayConstructor",xh=zit&&!!S_&&xB(us.opera)!=="Opera",Yue=!1,Fs,vd,E_,bh={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},wB={BigInt64Array:8,BigUint64Array:8},Yit=function(e){if(!PP(e))return!1;var r=xB(e);return r==="DataView"||yd(bh,r)||yd(wB,r)},Kue=function(t){var e=RP(t);if(PP(e)){var r=Wit(e);return r&&yd(r,CP)?r[CP]:Kue(e)}},Xue=function(t){if(!PP(t))return!1;var e=xB(t);return yd(bh,e)||yd(wB,e)},Kit=function(t){if(Xue(t))return t;throw new bB("Target is not a typed array")},Xit=function(t){if(Hue(t)&&(!S_||Git(Jc,t)))return t;throw new bB(Uit(t)+" is not a typed array constructor")},Qit=function(t,e,r,n){if(_B){if(r)for(var i in bh){var o=us[i];if(o&&yd(o.prototype,t))try{delete o.prototype[t]}catch(l){try{o.prototype[t]=e}catch(f){}}}(!ic[t]||r)&&gB(ic,t,r?e:xh&&vB[t]||e,n)}},Jit=function(t,e,r){var n,i;if(_B){if(S_){if(r){for(n in bh)if(i=us[n],i&&yd(i,t))try{delete i[t]}catch(o){}}if(!Jc[t]||r)try{return gB(Jc,t,r?e:xh&&Jc[t]||e)}catch(o){}else return}for(n in bh)i=us[n],i&&(!i[t]||r)&&gB(i,t,e)}};for(Fs in bh)vd=us[Fs],E_=vd&&vd.prototype,E_?Zue(E_)[CP]=vd:xh=!1;for(Fs in wB)vd=us[Fs],E_=vd&&vd.prototype,E_&&(Zue(E_)[CP]=vd);if((!xh||!Hue(Jc)||Jc===Function.prototype)&&(Jc=function(){throw new bB("Incorrect invocation")},xh))for(Fs in bh)us[Fs]&&S_(us[Fs],Jc);if((!xh||!ic||ic===Zit)&&(ic=Jc.prototype,xh))for(Fs in bh)us[Fs]&&S_(us[Fs].prototype,ic);xh&&RP(Gue)!==ic&&S_(Gue,ic);if(_B&&!yd(ic,$ue)){Yue=!0,Vit(ic,$ue,{configurable:!0,get:function(){return PP(this)?this[yB]:void 0}});for(Fs in bh)us[Fs]&&Bit(us[Fs],yB,Fs)}Que.exports={NATIVE_ARRAY_BUFFER_VIEWS:xh,TYPED_ARRAY_TAG:Yue&&yB,aTypedArray:Kit,aTypedArrayConstructor:Xit,exportTypedArrayMethod:Qit,exportTypedArrayStaticMethod:Jit,getTypedArrayConstructor:Kue,isView:Yit,isTypedArray:Xue,TypedArray:Jc,TypedArrayPrototype:ic}});var ece=R(()=>{"use strict";p();var eot=oe(),Jue=Hr(),tot=Jue.NATIVE_ARRAY_BUFFER_VIEWS;eot({target:"ArrayBuffer",stat:!0,forced:!tot},{isView:Jue.isView})});var ace=R(()=>{"use strict";p();var rot=oe(),SB=od(),not=yt(),ice=Y1(),tce=Bt(),rce=ec(),iot=Ns(),TB=ice.ArrayBuffer,EB=ice.DataView,oce=EB.prototype,nce=SB(TB.prototype.slice),oot=SB(oce.getUint8),aot=SB(oce.setUint8),sot=not(function(){return!new TB(2).slice(1,void 0).byteLength});rot({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:sot},{slice:function(e,r){if(nce&&r===void 0)return nce(tce(this),e);for(var n=tce(this).byteLength,i=rce(e,n),o=rce(r===void 0?n:r,n),l=new TB(iot(o-i)),f=new EB(this),d=new EB(l),v=0;i<o;)aot(d,v++,oot(f,i++));return l}})});var sce=R(()=>{"use strict";p();var lot=oe(),uot=Y1(),cot=H1();lot({global:!0,constructor:!0,forced:!cot},{DataView:uot.DataView})});var lce=R(()=>{"use strict";p();sce()});var IB=R(()=>{"use strict";p();var fot=oe(),hot=ct(),hce=Math.pow,uce=31,pot=1023,cce=hce(2,-24),fce=.0009765625,dot=function(t){var e=t>>>15,r=t>>>10&uce,n=t&pot;return r===uce?n===0?e===0?1/0:-1/0:NaN:r===0?n*(e===0?cce:-cce):hce(2,r-15)*(e===0?1+n*fce:-1-n*fce)},mot=hot(DataView.prototype.getUint16);fot({target:"DataView",proto:!0},{getFloat16:function(e){var r=mot(this,e,arguments.length>1?arguments[1]:!1);return dot(r)}})});var AB=R((R0r,pce)=>{"use strict";p();var got=ss(),vot=TypeError;pce.exports=function(t){if(got(t)==="DataView")return t;throw new vot("Argument is not a DataView")}});var MB=R((L0r,dce)=>{"use strict";p();var yot=Math.log,_ot=Math.LN2;dce.exports=Math.log2||function(e){return yot(e)/_ot}});var PB=R(()=>{"use strict";p();var xot=oe(),bot=ct(),wot=AB(),Eot=__(),Sot=MB(),mce=sB(),Tot=Math.pow,Iot=65520,Aot=61005353927612305e-21,Mot=16777216,CB=1024,Cot=function(t){if(t!==t)return 32256;if(t===0)return(1/t===-1/0)<<15;var e=t<0;if(e&&(t=-t),t>=Iot)return e<<15|31744;if(t<Aot)return e<<15|mce(t*Mot);var r=Sot(t)|0;if(r===-15)return e<<15|CB;var n=mce((t*Tot(2,-r)-1)*CB);return n===CB?e<<15|r+16<<10:e<<15|r+15<<10|n},Pot=bot(DataView.prototype.setUint16);xot({target:"DataView",proto:!0},{setFloat16:function(e,r){wot(this);var n=Eot(e),i=Cot(+r);return Pot(this,n,i,arguments.length>2?arguments[2]:!1)}})});var RB=R((F0r,yce)=>{"use strict";p();var vce=Ft(),Rot=k1(),Oot=pa(),gce=vce.ArrayBuffer,Lot=vce.TypeError;yce.exports=gce&&Rot(gce.prototype,"byteLength","get")||function(t){if(Oot(t)!=="ArrayBuffer")throw new Lot("ArrayBuffer expected");return t.byteLength}});var OB=R((z0r,_ce)=>{"use strict";p();var Dot=Ft(),Not=H1(),kot=RB(),qot=Dot.DataView;_ce.exports=function(t){if(!Not||kot(t)!==0)return!1;try{return new qot(t),!1}catch(e){return!0}}});var LB=R(()=>{"use strict";p();var Fot=sr(),jot=hi(),zot=OB(),xce=ArrayBuffer.prototype;Fot&&!("detached"in xce)&&jot(xce,"detached",{configurable:!0,get:function(){return zot(this)}})});var T_=R(($0r,bce)=>{"use strict";p();var Uot=OB(),Bot=TypeError;bce.exports=function(t){if(Uot(t))throw new Bot("ArrayBuffer is detached");return t}});var DB=R((W0r,wce)=>{"use strict";p();var Vot=Ft(),Got=Tg();wce.exports=function(t){if(Got){try{return Vot.process.getBuiltinModule(t)}catch(e){}try{return Function("return require(\""+t+"\")")()}catch(e){}}}});var OP=R((Y0r,Sce)=>{"use strict";p();var $ot=Ft(),Hot=yt(),NB=Qu(),kB=$1(),Ece=$ot.structuredClone;Sce.exports=!!Ece&&!Hot(function(){if(kB==="DENO"&&NB>92||kB==="NODE"&&NB>94||kB==="BROWSER"&&NB>97)return!1;var t=new ArrayBuffer(8),e=Ece(t,{transfer:[t]});return t.byteLength!==0||e.byteLength!==8})});var UB=R((X0r,Ace)=>{"use strict";p();var zB=Ft(),Wot=DB(),Zot=OP(),Yot=zB.structuredClone,Tce=zB.ArrayBuffer,LP=zB.MessageChannel,jB=!1,qB,Ice,DP,FB;if(Zot)jB=function(t){Yot(t,{transfer:[t]})};else if(Tce)try{LP||(qB=Wot("worker_threads"),qB&&(LP=qB.MessageChannel)),LP&&(Ice=new LP,DP=new Tce(2),FB=function(t){Ice.port1.postMessage(null,[t])},DP.byteLength===2&&(FB(DP),DP.byteLength===0&&(jB=FB)))}catch(t){}Ace.exports=jB});var WB=R((J0r,Dce)=>{"use strict";p();var GB=Ft(),$B=ct(),Rce=k1(),Kot=__(),Xot=T_(),Qot=RB(),Mce=UB(),BB=OP(),Jot=GB.structuredClone,Oce=GB.ArrayBuffer,VB=GB.DataView,eat=Math.min,HB=Oce.prototype,Lce=VB.prototype,tat=$B(HB.slice),Cce=Rce(HB,"resizable","get"),Pce=Rce(HB,"maxByteLength","get"),rat=$B(Lce.getInt8),nat=$B(Lce.setInt8);Dce.exports=(BB||Mce)&&function(t,e,r){var n=Qot(t),i=e===void 0?n:Kot(e),o=!Cce||!Cce(t),l;if(Xot(t),BB&&(t=Jot(t,{transfer:[t]}),n===i&&(r||o)))return t;if(n>=i&&(!r||o))l=tat(t,0,i);else{var f=r&&!o&&Pce?{maxByteLength:Pce(t)}:void 0;l=new Oce(i,f);for(var d=new VB(t),v=new VB(l),x=eat(i,n),b=0;b<x;b++)nat(v,b,rat(d,b))}return BB||Mce(t),l}});var ZB=R(()=>{"use strict";p();var iat=oe(),Nce=WB();Nce&&iat({target:"ArrayBuffer",proto:!0},{transfer:function(){return Nce(this,arguments.length?arguments[0]:void 0,!0)}})});var YB=R(()=>{"use strict";p();var oat=oe(),kce=WB();kce&&oat({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return kce(this,arguments.length?arguments[0]:void 0,!1)}})});var qce=R(()=>{"use strict";p();var aat=oe(),sat=ct(),lat=yt(),uat=lat(function(){return new Date(16e11).getYear()!==120}),cat=sat(Date.prototype.getFullYear);aat({target:"Date",proto:!0,forced:uat},{getYear:function(){return cat(this)-1900}})});var jce=R(()=>{"use strict";p();var fat=oe(),hat=ct(),Fce=Date,pat=hat(Fce.prototype.getTime);fat({target:"Date",stat:!0},{now:function(){return pat(new Fce)}})});var Bce=R(()=>{"use strict";p();var dat=oe(),zce=ct(),mat=fi(),Uce=Date.prototype,gat=zce(Uce.getTime),vat=zce(Uce.setFullYear);dat({target:"Date",proto:!0},{setYear:function(e){gat(this);var r=mat(e),n=r>=0&&r<=99?r+1900:r;return vat(this,n)}})});var Vce=R(()=>{"use strict";p();var yat=oe();yat({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var K1=R((_xr,Gce)=>{"use strict";p();var _at=fi(),xat=Mr(),bat=oi(),wat=RangeError;Gce.exports=function(e){var r=xat(bat(this)),n="",i=_at(e);if(i<0||i===1/0)throw new wat("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(r+=r))i&1&&(n+=r);return n}});var X1=R((bxr,Zce)=>{"use strict";p();var Wce=ct(),Eat=Ns(),$ce=Mr(),Sat=K1(),Tat=oi(),Iat=Wce(Sat),Aat=Wce("".slice),Mat=Math.ceil,Hce=function(t){return function(e,r,n){var i=$ce(Tat(e)),o=Eat(r),l=i.length,f=n===void 0?" ":$ce(n),d,v;return o<=l||f===""?i:(d=o-l,v=Iat(f,Mat(d/f.length)),v.length>d&&(v=Aat(v,0,d)),t?i+v:v+i)}};Zce.exports={start:Hce(!1),end:Hce(!0)}});var Xce=R((Exr,Kce)=>{"use strict";p();var _d=ct(),Yce=yt(),Ag=X1().start,Cat=RangeError,Pat=isFinite,Rat=Math.abs,wh=Date.prototype,KB=wh.toISOString,Oat=_d(wh.getTime),Lat=_d(wh.getUTCDate),Dat=_d(wh.getUTCFullYear),Nat=_d(wh.getUTCHours),kat=_d(wh.getUTCMilliseconds),qat=_d(wh.getUTCMinutes),Fat=_d(wh.getUTCMonth),jat=_d(wh.getUTCSeconds);Kce.exports=Yce(function(){return KB.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!Yce(function(){KB.call(new Date(NaN))})?function(){if(!Pat(Oat(this)))throw new Cat("Invalid time value");var e=this,r=Dat(e),n=kat(e),i=r<0?"-":r>9999?"+":"";return i+Ag(Rat(r),i?6:4,0)+"-"+Ag(Fat(e)+1,2,0)+"-"+Ag(Lat(e),2,0)+"T"+Ag(Nat(e),2,0)+":"+Ag(qat(e),2,0)+":"+Ag(jat(e),2,0)+"."+Ag(n,3,0)+"Z"}:KB});var Jce=R(()=>{"use strict";p();var zat=oe(),Qce=Xce();zat({target:"Date",proto:!0,forced:Date.prototype.toISOString!==Qce},{toISOString:Qce})});var efe=R(()=>{"use strict";p();var Uat=oe(),Bat=yt(),Vat=Yr(),Gat=b1(),$at=Bat(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});Uat({target:"Date",proto:!0,arity:1,forced:$at},{toJSON:function(e){var r=Vat(this),n=Gat(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var rfe=R((Rxr,tfe)=>{"use strict";p();var Hat=Bt(),Wat=b4(),Zat=TypeError;tfe.exports=function(t){if(Hat(this),t==="string"||t==="default")t="string";else if(t!=="number")throw new Zat("Incorrect hint");return Wat(this,t)}});var ofe=R(()=>{"use strict";p();var Yat=Br(),Kat=Nn(),Xat=rfe(),Qat=mr(),nfe=Qat("toPrimitive"),ife=Date.prototype;Yat(ife,nfe)||Kat(ife,nfe,Xat)});var ufe=R(()=>{"use strict";p();var sfe=ct(),Jat=Nn(),XB=Date.prototype,afe="Invalid Date",lfe="toString",est=sfe(XB[lfe]),tst=sfe(XB.getTime);String(new Date(NaN))!==afe&&Jat(XB,lfe,function(){var e=tst(this);return e===e?est(this):afe})});var ffe=R(()=>{"use strict";p();var rst=oe(),Q1=ct(),nst=Mr(),ist=Q1("".charAt),ost=Q1("".charCodeAt),ast=Q1(/./.exec),sst=Q1(1 .toString),lst=Q1("".toUpperCase),ust=/[\w*+\-./@]/,cfe=function(t,e){for(var r=sst(t,16);r.length<e;)r="0"+r;return r};rst({global:!0},{escape:function(e){for(var r=nst(e),n="",i=r.length,o=0,l,f;o<i;)l=ist(r,o++),ast(ust,l)?n+=l:(f=ost(l,0),f<256?n+="%"+cfe(f,2):n+="%u"+lst(cfe(f,4)));return n}})});var JB=R((Bxr,mfe)=>{"use strict";p();var pfe=ct(),cst=xr(),fst=hr(),hst=Br(),hfe=ks(),pst=l_(),dfe=Function,dst=pfe([].concat),mst=pfe([].join),QB={},gst=function(t,e,r){if(!hst(QB,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";QB[e]=dfe("C,a","return new C("+mst(n,",")+")")}return QB[e](t,r)};mfe.exports=pst?dfe.bind:function(e){var r=cst(this),n=r.prototype,i=hfe(arguments,1),o=function(){var f=dst(i,hfe(arguments));return this instanceof o?gst(r,f.length,f):r.apply(e,f)};return fst(n)&&(o.prototype=n),o}});var vfe=R(()=>{"use strict";p();var vst=oe(),gfe=JB();vst({target:"Function",proto:!0,forced:Function.bind!==gfe},{bind:gfe})});var xfe=R(()=>{"use strict";p();var yst=jr(),yfe=hr(),_st=ei(),xst=da(),bst=mr(),wst=I1(),e3=bst("hasInstance"),_fe=Function.prototype;e3 in _fe||_st.f(_fe,e3,{value:wst(function(t){if(!yst(this)||!yfe(t))return!1;var e=this.prototype;return yfe(e)?xst(e,t):t instanceof this},e3)})});var Sfe=R(()=>{"use strict";p();var Est=sr(),Sst=mg().EXISTS,bfe=ct(),Tst=hi(),wfe=Function.prototype,Ist=bfe(wfe.toString),Efe=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Ast=bfe(Efe.exec),Mst="name";Est&&!Sst&&Tst(wfe,Mst,{configurable:!0,get:function(){try{return Ast(Efe,Ist(this))[1]}catch(t){return""}}})});var r3=R(()=>{"use strict";p();var Cst=oe(),t3=Ft();Cst({global:!0,forced:t3.globalThis!==t3},{globalThis:t3})});var s3=R(()=>{"use strict";p();var Pst=oe(),Rst=Ft(),Ost=ka(),Lst=Bt(),Dst=jr(),Nst=bo(),kst=hi(),qst=tu(),Fst=yt(),o3=Br(),jst=mr(),ef=fd().IteratorPrototype,zst=sr(),Ust=pn(),n3="constructor",Ife="Iterator",Tfe=jst("toStringTag"),Afe=TypeError,i3=Rst[Ife],Mfe=Ust||!Dst(i3)||i3.prototype!==ef||!Fst(function(){i3({})}),a3=function(){if(Ost(this,ef),Nst(this)===ef)throw new Afe("Abstract class Iterator not directly constructable")},Cfe=function(t,e){zst?kst(ef,t,{configurable:!0,get:function(){return e},set:function(r){if(Lst(this),this===ef)throw new Afe("You can't redefine this property");o3(this,t)?this[t]=r:qst(this,t,r)}}):ef[t]=e};o3(ef,Tfe)||Cfe(Tfe,Ife);(Mfe||!o3(ef,n3)||ef[n3]===Object)&&Cfe(n3,a3);a3.prototype=ef;Pst({global:!0,constructor:!0,forced:Mfe},{Iterator:a3})});var wi=R((obr,Pfe)=>{"use strict";p();Pfe.exports=function(t){return{iterator:t,next:t.next,done:!1}}});var I_=R((sbr,Rfe)=>{"use strict";p();var Bst=RangeError;Rfe.exports=function(t){if(t===t)return t;throw new Bst("NaN is not allowed")}});var A_=R((ubr,Ofe)=>{"use strict";p();var Vst=fi(),Gst=RangeError;Ofe.exports=function(t){var e=Vst(t);if(e<0)throw new Gst("The argument can't be less than 0");return e}});var xd=R((fbr,Ffe)=>{"use strict";p();var $st=jt(),Hst=Qi(),Wst=xo(),Zst=nu(),Yst=mr(),Lfe=Cn(),Kst=Xi(),Xst=fd().IteratorPrototype,NP=ko(),l3=Xo(),Qst=Yst("toStringTag"),Dfe="IteratorHelper",Nfe="WrapForValidIterator",Jst=Lfe.set,kfe=function(t){var e=Lfe.getterFor(t?Nfe:Dfe);return Zst(Hst(Xst),{next:function(){var n=e(this);if(t)return n.nextHandler();if(n.done)return NP(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:NP(i,n.done)}catch(o){throw n.done=!0,o}},return:function(){var r=e(this),n=r.iterator;if(r.done=!0,t){var i=Kst(n,"return");return i?$st(i,n):NP(void 0,!0)}if(r.inner)try{l3(r.inner.iterator,"normal")}catch(o){return l3(n,"throw",o)}return n&&l3(n,"normal"),NP(void 0,!0)}})},elt=kfe(!0),qfe=kfe(!1);Wst(qfe,Qst,"Iterator Helper");Ffe.exports=function(t,e,r){var n=function(o,l){l?(l.iterator=o.iterator,l.next=o.next):l=o,l.type=e?Nfe:Dfe,l.returnHandlerResult=!!r,l.nextHandler=t,l.counter=0,l.done=!1,Jst(this,l)};return n.prototype=e?elt:qfe,n}});var oc=R((pbr,jfe)=>{"use strict";p();var tlt=Ft();jfe.exports=function(t,e){var r=tlt.Iterator,n=r&&r.prototype,i=n&&n[t],o=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){o=!0}},-1)}catch(l){l instanceof e||(o=!1)}if(!o)return i}});var h3=R(()=>{"use strict";p();var rlt=oe(),c3=jt(),f3=Bt(),nlt=wi(),ilt=I_(),olt=A_(),alt=Xo(),slt=xd(),llt=oc(),zfe=pn(),u3=!zfe&&llt("drop",RangeError),ult=slt(function(){for(var t=this.iterator,e=this.next,r,n;this.remaining;)if(this.remaining--,r=f3(c3(e,t)),n=this.done=!!r.done,n)return;if(r=f3(c3(e,t)),n=this.done=!!r.done,!n)return r.value});rlt({target:"Iterator",proto:!0,real:!0,forced:zfe||u3},{drop:function(e){f3(this);var r;try{r=olt(ilt(+e))}catch(n){alt(this,"throw",n)}return u3?c3(u3,this,r):new ult(nlt(this),{remaining:r})}})});var d3=R(()=>{"use strict";p();var clt=oe(),flt=jt(),hlt=Pi(),plt=xr(),dlt=Bt(),mlt=wi(),glt=Xo(),vlt=oc(),p3=vlt("every",TypeError);clt({target:"Iterator",proto:!0,real:!0,forced:p3},{every:function(e){dlt(this);try{plt(e)}catch(i){glt(this,"throw",i)}if(p3)return flt(p3,this,e);var r=mlt(this),n=0;return!hlt(r,function(i,o){if(!e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var g3=R(()=>{"use strict";p();var ylt=oe(),Ufe=jt(),_lt=xr(),Bfe=Bt(),xlt=wi(),blt=xd(),wlt=fP(),Vfe=pn(),Elt=Xo(),Slt=oc(),m3=!Vfe&&Slt("filter",TypeError),Tlt=blt(function(){for(var t=this.iterator,e=this.predicate,r=this.next,n,i,o;;){if(n=Bfe(Ufe(r,t)),i=this.done=!!n.done,i)return;if(o=n.value,wlt(t,e,[o,this.counter++],!0))return o}});ylt({target:"Iterator",proto:!0,real:!0,forced:Vfe||m3},{filter:function(e){Bfe(this);try{_lt(e)}catch(r){Elt(this,"throw",r)}return m3?Ufe(m3,this,e):new Tlt(xlt(this),{predicate:e})}})});var y3=R(()=>{"use strict";p();var Ilt=oe(),Alt=jt(),Mlt=Pi(),Clt=xr(),Plt=Bt(),Rlt=wi(),Olt=Xo(),Llt=oc(),v3=Llt("find",TypeError);Ilt({target:"Iterator",proto:!0,real:!0,forced:v3},{find:function(e){Plt(this);try{Clt(e)}catch(i){Olt(this,"throw",i)}if(v3)return Alt(v3,this,e);var r=Rlt(this),n=0;return Mlt(r,function(i,o){if(e(i,n++))return o(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var _3=R((Abr,$fe)=>{"use strict";p();var Dlt=jt(),Gfe=Bt(),Nlt=wi(),klt=Xc();$fe.exports=function(t,e){(!e||typeof t!="string")&&Gfe(t);var r=klt(t);return Nlt(Gfe(r!==void 0?Dlt(r,t):t))}});var S3=R(()=>{"use strict";p();var qlt=oe(),b3=jt(),Flt=xr(),w3=Bt(),jlt=wi(),zlt=_3(),Ult=xd(),E3=Xo(),Hfe=pn(),Blt=oc(),x3=!Hfe&&Blt("flatMap",TypeError),Vlt=Ult(function(){for(var t=this.iterator,e=this.mapper,r,n;;){if(n=this.inner)try{if(r=w3(b3(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(i){E3(t,"throw",i)}if(r=w3(b3(this.next,t)),this.done=!!r.done)return;try{this.inner=zlt(e(r.value,this.counter++),!1)}catch(i){E3(t,"throw",i)}}});qlt({target:"Iterator",proto:!0,real:!0,forced:Hfe||x3},{flatMap:function(e){w3(this);try{Flt(e)}catch(r){E3(this,"throw",r)}return x3?b3(x3,this,e):new Vlt(jlt(this),{mapper:e,inner:null})}})});var I3=R(()=>{"use strict";p();var Glt=oe(),$lt=jt(),Hlt=Pi(),Wlt=xr(),Zlt=Bt(),Ylt=wi(),Klt=Xo(),Xlt=oc(),T3=Xlt("forEach",TypeError);Glt({target:"Iterator",proto:!0,real:!0,forced:T3},{forEach:function(e){Zlt(this);try{Wlt(e)}catch(i){Klt(this,"throw",i)}if(T3)return $lt(T3,this,e);var r=Ylt(this),n=0;Hlt(r,function(i){e(i,n++)},{IS_RECORD:!0})}})});var A3=R(()=>{"use strict";p();var Qlt=oe(),Jlt=jt(),eut=Yr(),tut=da(),rut=fd().IteratorPrototype,nut=xd(),iut=_3(),out=pn(),aut=nut(function(){return Jlt(this.next,this.iterator)},!0);Qlt({target:"Iterator",stat:!0,forced:out},{from:function(e){var r=iut(typeof e=="string"?eut(e):e,!0);return tut(rut,r.iterator)?r.iterator:new aut(r)}})});var kP=R(()=>{"use strict";p();var sut=oe(),Wfe=jt(),lut=xr(),Zfe=Bt(),uut=wi(),cut=xd(),fut=fP(),hut=Xo(),put=oc(),Yfe=pn(),M3=!Yfe&&put("map",TypeError),dut=cut(function(){var t=this.iterator,e=Zfe(Wfe(this.next,t)),r=this.done=!!e.done;if(!r)return fut(t,this.mapper,[e.value,this.counter++],!0)});sut({target:"Iterator",proto:!0,real:!0,forced:Yfe||M3},{map:function(e){Zfe(this);try{lut(e)}catch(r){hut(this,"throw",r)}return M3?Wfe(M3,this,e):new dut(uut(this),{mapper:e})}})});var P3=R(()=>{"use strict";p();var mut=oe(),gut=Pi(),vut=xr(),yut=Bt(),_ut=wi(),xut=Xo(),but=oc(),wut=ma(),Eut=yt(),Kfe=TypeError,Xfe=Eut(function(){[].keys().reduce(function(){},void 0)}),C3=!Xfe&&but("reduce",Kfe);mut({target:"Iterator",proto:!0,real:!0,forced:Xfe||C3},{reduce:function(e){yut(this);try{vut(e)}catch(l){xut(this,"throw",l)}var r=arguments.length<2,n=r?void 0:arguments[1];if(C3)return wut(C3,this,r?[e]:[e,n]);var i=_ut(this),o=0;if(gut(i,function(l){r?(r=!1,n=l):n=e(n,l,o),o++},{IS_RECORD:!0}),r)throw new Kfe("Reduce of empty iterator with no initial value");return n}})});var O3=R(()=>{"use strict";p();var Sut=oe(),Tut=jt(),Iut=Pi(),Aut=xr(),Mut=Bt(),Cut=wi(),Put=Xo(),Rut=oc(),R3=Rut("some",TypeError);Sut({target:"Iterator",proto:!0,real:!0,forced:R3},{some:function(e){Mut(this);try{Aut(e)}catch(i){Put(this,"throw",i)}if(R3)return Tut(R3,this,e);var r=Cut(this),n=0;return Iut(r,function(i,o){if(e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var D3=R(()=>{"use strict";p();var Out=oe(),Qfe=jt(),Jfe=Bt(),Lut=wi(),Dut=I_(),Nut=A_(),kut=xd(),ehe=Xo(),qut=oc(),the=pn(),L3=!the&&qut("take",RangeError),Fut=kut(function(){var t=this.iterator;if(!this.remaining--)return this.done=!0,ehe(t,"normal",void 0);var e=Jfe(Qfe(this.next,t)),r=this.done=!!e.done;if(!r)return e.value});Out({target:"Iterator",proto:!0,real:!0,forced:the||L3},{take:function(e){Jfe(this);var r;try{r=Nut(Dut(+e))}catch(n){ehe(this,"throw",n)}return L3?Qfe(L3,this,r):new Fut(Lut(this),{remaining:r})}})});var N3=R(()=>{"use strict";p();var jut=oe(),zut=Bt(),Uut=Pi(),But=wi(),Vut=[].push;jut({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return Uut(But(zut(this)),Vut,{that:e,IS_RECORD:!0}),e}})});var rhe=R(()=>{"use strict";p();var Gut=Ft(),$ut=ls();$ut(Gut.JSON,"JSON",!0)});var qP=R((rwr,nhe)=>{"use strict";p();var Hut=yt();nhe.exports=Hut(function(){if(typeof ArrayBuffer=="function"){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})});var jP=R((iwr,ohe)=>{"use strict";p();var Wut=yt(),Zut=hr(),Yut=pa(),ihe=qP(),FP=Object.isExtensible,Kut=Wut(function(){FP(1)});ohe.exports=Kut||ihe?function(e){return!Zut(e)||ihe&&Yut(e)==="ArrayBuffer"?!1:FP?FP(e):!0}:FP});var Eh=R((awr,ahe)=>{"use strict";p();var Xut=yt();ahe.exports=!Xut(function(){return Object.isExtensible(Object.preventExtensions({}))})});var bd=R((lwr,uhe)=>{"use strict";p();var Qut=oe(),Jut=ct(),ect=c_(),tct=hr(),k3=Br(),rct=ei().f,she=id(),nct=HC(),q3=jP(),ict=nd(),oct=Eh(),lhe=!1,Sh=ict("meta"),act=0,F3=function(t){rct(t,Sh,{value:{objectID:"O"+act++,weakData:{}}})},sct=function(t,e){if(!tct(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!k3(t,Sh)){if(!q3(t))return"F";if(!e)return"E";F3(t)}return t[Sh].objectID},lct=function(t,e){if(!k3(t,Sh)){if(!q3(t))return!0;if(!e)return!1;F3(t)}return t[Sh].weakData},uct=function(t){return oct&&lhe&&q3(t)&&!k3(t,Sh)&&F3(t),t},cct=function(){fct.enable=function(){},lhe=!0;var t=she.f,e=Jut([].splice),r={};r[Sh]=1,t(r).length&&(she.f=function(n){for(var i=t(n),o=0,l=i.length;o<l;o++)if(i[o]===Sh){e(i,o,1);break}return i},Qut({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:nct.f}))},fct=uhe.exports={enable:cct,fastKey:sct,getWeakData:lct,onFreeze:uct};ect[Sh]=!0});var J1=R((cwr,fhe)=>{"use strict";p();var hct=oe(),pct=Ft(),dct=ct(),che=h_(),mct=Nn(),gct=bd(),vct=Pi(),yct=ka(),_ct=jr(),xct=Ds(),j3=hr(),z3=yt(),bct=j1(),wct=ls(),Ect=ld();fhe.exports=function(t,e,r){var n=t.indexOf("Map")!==-1,i=t.indexOf("Weak")!==-1,o=n?"set":"add",l=pct[t],f=l&&l.prototype,d=l,v={},x=function(F){var U=dct(f[F]);mct(f,F,F==="add"?function(Z){return U(this,Z===0?0:Z),this}:F==="delete"?function($){return i&&!j3($)?!1:U(this,$===0?0:$)}:F==="get"?function(Z){return i&&!j3(Z)?void 0:U(this,Z===0?0:Z)}:F==="has"?function(Z){return i&&!j3(Z)?!1:U(this,Z===0?0:Z)}:function(Z,ie){return U(this,Z===0?0:Z,ie),this})},b=che(t,!_ct(l)||!(i||f.forEach&&!z3(function(){new l().entries().next()})));if(b)d=r.getConstructor(e,t,n,o),gct.enable();else if(che(t,!0)){var A=new d,P=A[o](i?{}:-0,1)!==A,N=z3(function(){A.has(1)}),j=bct(function(F){new l(F)}),D=!i&&z3(function(){for(var F=new l,U=5;U--;)F[o](U,U);return!F.has(-0)});j||(d=e(function(F,U){yct(F,f);var $=Ect(new l,F,d);return xct(U)||vct(U,$[o],{that:$,AS_ENTRIES:n}),$}),d.prototype=f,f.constructor=d),(N||D)&&(x("delete"),x("has"),n&&x("get")),(D||P)&&x(o),i&&f.clear&&delete f.clear}return v[t]=d,hct({global:!0,constructor:!0,forced:d!==l},v),wct(d,t),i||r.setStrong(d,t,n),d}});var B3=R((hwr,vhe)=>{"use strict";p();var hhe=Qi(),Sct=hi(),phe=nu(),Tct=Hn(),Ict=ka(),Act=Ds(),Mct=Pi(),Cct=dP(),zP=ko(),Pct=dd(),eE=sr(),dhe=bd().fastKey,ghe=Cn(),mhe=ghe.set,U3=ghe.getterFor;vhe.exports={getConstructor:function(t,e,r,n){var i=t(function(v,x){Ict(v,o),mhe(v,{type:e,index:hhe(null),first:null,last:null,size:0}),eE||(v.size=0),Act(x)||Mct(x,v[n],{that:v,AS_ENTRIES:r})}),o=i.prototype,l=U3(e),f=function(v,x,b){var A=l(v),P=d(v,x),N,j;return P?P.value=b:(A.last=P={index:j=dhe(x,!0),key:x,value:b,previous:N=A.last,next:null,removed:!1},A.first||(A.first=P),N&&(N.next=P),eE?A.size++:v.size++,j!=="F"&&(A.index[j]=P)),v},d=function(v,x){var b=l(v),A=dhe(x),P;if(A!=="F")return b.index[A];for(P=b.first;P;P=P.next)if(P.key===x)return P};return phe(o,{clear:function(){for(var x=this,b=l(x),A=b.first;A;)A.removed=!0,A.previous&&(A.previous=A.previous.next=null),A=A.next;b.first=b.last=null,b.index=hhe(null),eE?b.size=0:x.size=0},delete:function(v){var x=this,b=l(x),A=d(x,v);if(A){var P=A.next,N=A.previous;delete b.index[A.index],A.removed=!0,N&&(N.next=P),P&&(P.previous=N),b.first===A&&(b.first=P),b.last===A&&(b.last=N),eE?b.size--:x.size--}return!!A},forEach:function(x){for(var b=l(this),A=Tct(x,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:b.first;)for(A(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(x){return!!d(this,x)}}),phe(o,r?{get:function(x){var b=d(this,x);return b&&b.value},set:function(x,b){return f(this,x===0?0:x,b)}}:{add:function(x){return f(this,x=x===0?0:x,x)}}),eE&&Sct(o,"size",{configurable:!0,get:function(){return l(this).size}}),i},setStrong:function(t,e,r){var n=e+" Iterator",i=U3(e),o=U3(n);Cct(t,e,function(l,f){mhe(this,{type:n,target:l,state:i(l),kind:f,last:null})},function(){for(var l=o(this),f=l.kind,d=l.last;d&&d.removed;)d=d.previous;return!l.target||!(l.last=d=d?d.next:l.state.first)?(l.target=null,zP(void 0,!0)):zP(f==="keys"?d.key:f==="values"?d.value:[d.key,d.value],!1)},r?"entries":"values",!r,!0),Pct(e)}}});var yhe=R(()=>{"use strict";p();var Rct=J1(),Oct=B3();Rct("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Oct)});var UP=R(()=>{"use strict";p();yhe()});var qo=R((xwr,_he)=>{"use strict";p();var BP=ct(),tE=Map.prototype;_he.exports={Map,set:BP(tE.set),get:BP(tE.get),has:BP(tE.has),remove:BP(tE.delete),proto:tE}});var V3=R(()=>{"use strict";p();var Lct=oe(),Dct=ct(),Nct=xr(),kct=oi(),qct=Pi(),VP=qo(),xhe=pn(),Fct=yt(),bhe=VP.Map,jct=VP.has,zct=VP.get,Uct=VP.set,Bct=Dct([].push),Vct=xhe||Fct(function(){return bhe.groupBy("ab",function(t){return t}).get("a").length!==1});Lct({target:"Map",stat:!0,forced:xhe||Vct},{groupBy:function(e,r){kct(e),Nct(r);var n=new bhe,i=0;return qct(e,function(o){var l=r(o,i++);jct(n,l)?Bct(zct(n,l),o):Uct(n,l,[o])}),n}})});var G3=R((Twr,whe)=>{"use strict";p();var Gct=Math.log;whe.exports=Math.log1p||function(e){var r=+e;return r>-1e-8&&r<1e-8?r-r*r/2:Gct(1+r)}});var She=R(()=>{"use strict";p();var $ct=oe(),Hct=G3(),$3=Math.acosh,Wct=Math.log,Ehe=Math.sqrt,Zct=Math.LN2,Yct=!$3||Math.floor($3(Number.MAX_VALUE))!==710||$3(1/0)!==1/0;$ct({target:"Math",stat:!0,forced:Yct},{acosh:function(e){var r=+e;return r<1?NaN:r>94906265.62425156?Wct(r)+Zct:Hct(r-1+Ehe(r-1)*Ehe(r+1))}})});var Ahe=R(()=>{"use strict";p();var Kct=oe(),The=Math.asinh,Xct=Math.log,Qct=Math.sqrt;function Ihe(t){var e=+t;return!isFinite(e)||e===0?e:e<0?-Ihe(-e):Xct(e+Qct(e*e+1))}var Jct=!(The&&1/The(0)>0);Kct({target:"Math",stat:!0,forced:Jct},{asinh:Ihe})});var Che=R(()=>{"use strict";p();var eft=oe(),Mhe=Math.atanh,tft=Math.log,rft=!(Mhe&&1/Mhe(-0)<0);eft({target:"Math",stat:!0,forced:rft},{atanh:function(e){var r=+e;return r===0?r:tft((1+r)/(1-r))/2}})});var Phe=R(()=>{"use strict";p();var nft=oe(),ift=xP(),oft=Math.abs,aft=Math.pow;nft({target:"Math",stat:!0},{cbrt:function(e){var r=+e;return ift(r)*aft(oft(r),1/3)}})});var Rhe=R(()=>{"use strict";p();var sft=oe(),lft=Math.floor,uft=Math.log,cft=Math.LOG2E;sft({target:"Math",stat:!0},{clz32:function(e){var r=e>>>0;return r?31-lft(uft(r+.5)*cft):32}})});var nE=R((Bwr,Ohe)=>{"use strict";p();var rE=Math.expm1,fft=Math.exp;Ohe.exports=!rE||rE(10)>22025.465794806718||rE(10)<22025.465794806718||rE(-2e-17)!==-2e-17?function(e){var r=+e;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:fft(r)-1}:rE});var Dhe=R(()=>{"use strict";p();var hft=oe(),pft=nE(),Lhe=Math.cosh,dft=Math.abs,H3=Math.E,mft=!Lhe||Lhe(710)===1/0;hft({target:"Math",stat:!0,forced:mft},{cosh:function(e){var r=pft(dft(e)-1)+1;return(r+1/(r*H3*H3))*(H3/2)}})});var khe=R(()=>{"use strict";p();var gft=oe(),Nhe=nE();gft({target:"Math",stat:!0,forced:Nhe!==Math.expm1},{expm1:Nhe})});var qhe=R(()=>{"use strict";p();var vft=oe(),yft=bP();vft({target:"Math",stat:!0},{fround:yft})});var W3=R(()=>{"use strict";p();var _ft=oe(),xft=lB(),bft=.0009765625,wft=65504,Eft=6103515625e-14;_ft({target:"Math",stat:!0},{f16round:function(e){return xft(e,bft,wft,Eft)}})});var jhe=R(()=>{"use strict";p();var Sft=oe(),Fhe=Math.hypot,Tft=Math.abs,Ift=Math.sqrt,Aft=!!Fhe&&Fhe(1/0,NaN)!==1/0;Sft({target:"Math",stat:!0,arity:2,forced:Aft},{hypot:function(e,r){for(var n=0,i=0,o=arguments.length,l=0,f,d;i<o;)f=Tft(arguments[i++]),l<f?(d=l/f,n=n*d*d+1,l=f):f>0?(d=f/l,n+=d*d):n+=f;return l===1/0?1/0:l*Ift(n)}})});var Uhe=R(()=>{"use strict";p();var Mft=oe(),Cft=yt(),zhe=Math.imul,Pft=Cft(function(){return zhe(4294967295,5)!==-5||zhe.length!==2});Mft({target:"Math",stat:!0,forced:Pft},{imul:function(e,r){var n=65535,i=+e,o=+r,l=n&i,f=n&o;return 0|l*f+((n&i>>>16)*f+l*(n&o>>>16)<<16>>>0)}})});var Z3=R((l1r,Bhe)=>{"use strict";p();var Rft=Math.log,Oft=Math.LOG10E;Bhe.exports=Math.log10||function(e){return Rft(e)*Oft}});var Vhe=R(()=>{"use strict";p();var Lft=oe(),Dft=Z3();Lft({target:"Math",stat:!0},{log10:Dft})});var Ghe=R(()=>{"use strict";p();var Nft=oe(),kft=G3();Nft({target:"Math",stat:!0},{log1p:kft})});var $he=R(()=>{"use strict";p();var qft=oe(),Fft=MB();qft({target:"Math",stat:!0},{log2:Fft})});var Hhe=R(()=>{"use strict";p();var jft=oe(),zft=xP();jft({target:"Math",stat:!0},{sign:zft})});var Yhe=R(()=>{"use strict";p();var Uft=oe(),Bft=yt(),Whe=nE(),Vft=Math.abs,Zhe=Math.exp,Gft=Math.E,$ft=Bft(function(){return Math.sinh(-2e-17)!==-2e-17});Uft({target:"Math",stat:!0,forced:$ft},{sinh:function(e){var r=+e;return Vft(r)<1?(Whe(r)-Whe(-r))/2:(Zhe(r-1)-Zhe(-r-1))*(Gft/2)}})});var Qhe=R(()=>{"use strict";p();var Hft=oe(),Khe=nE(),Xhe=Math.exp;Hft({target:"Math",stat:!0},{tanh:function(e){var r=+e,n=Khe(r),i=Khe(-r);return n===1/0?1:i===1/0?-1:(n-i)/(Xhe(r)+Xhe(-r))}})});var Jhe=R(()=>{"use strict";p();var Wft=ls();Wft(Math,"Math",!0)});var epe=R(()=>{"use strict";p();var Zft=oe(),Yft=j4();Zft({target:"Math",stat:!0},{trunc:Yft})});var iE=R((D1r,tpe)=>{"use strict";p();var Kft=ct();tpe.exports=Kft(1 .valueOf)});var Mg=R((k1r,rpe)=>{"use strict";p();rpe.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Cg=R((F1r,ipe)=>{"use strict";p();var Xft=ct(),Qft=oi(),Jft=Mr(),K3=Mg(),npe=Xft("".replace),eht=RegExp("^["+K3+"]+"),tht=RegExp("(^|[^"+K3+"])["+K3+"]+$"),Y3=function(t){return function(e){var r=Jft(Qft(e));return t&1&&(r=npe(r,eht,"")),t&2&&(r=npe(r,tht,"$1")),r}};ipe.exports={start:Y3(1),end:Y3(2),trim:Y3(3)}});var fpe=R(()=>{"use strict";p();var rht=oe(),X3=pn(),nht=sr(),spe=Ft(),Q3=WC(),lpe=ct(),iht=h_(),ope=Br(),oht=ld(),aht=da(),sht=ph(),upe=b1(),lht=yt(),uht=id().f,cht=Yo().f,fht=ei().f,hht=iE(),pht=Cg().trim,oE="Number",M_=spe[oE],ape=Q3[oE],J3=M_.prototype,dht=spe.TypeError,mht=lpe("".slice),GP=lpe("".charCodeAt),ght=function(t){var e=upe(t,"number");return typeof e=="bigint"?e:vht(e)},vht=function(t){var e=upe(t,"number"),r,n,i,o,l,f,d,v;if(sht(e))throw new dht("Cannot convert a Symbol value to a number");if(typeof e=="string"&&e.length>2){if(e=pht(e),r=GP(e,0),r===43||r===45){if(n=GP(e,2),n===88||n===120)return NaN}else if(r===48){switch(GP(e,1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(l=mht(e,2),f=l.length,d=0;d<f;d++)if(v=GP(l,d),v<48||v>o)return NaN;return parseInt(l,i)}}return+e},e5=iht(oE,!M_(" 0o1")||!M_("0b1")||M_("+0x1")),yht=function(t){return aht(J3,t)&&lht(function(){hht(t)})},$P=function(e){var r=arguments.length<1?0:M_(ght(e));return yht(this)?oht(Object(r),this,$P):r};$P.prototype=J3;e5&&!X3&&(J3.constructor=$P);rht({global:!0,constructor:!0,wrap:!0,forced:e5},{Number:$P});var cpe=function(t,e){for(var r=nht?uht(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;r.length>n;n++)ope(e,i=r[n])&&!ope(t,i)&&fht(t,i,cht(e,i))};X3&&ape&&cpe(Q3[oE],ape);(e5||X3)&&cpe(Q3[oE],M_)});var hpe=R(()=>{"use strict";p();var _ht=oe();_ht({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var t5=R((H1r,ppe)=>{"use strict";p();var xht=Ft(),bht=xht.isFinite;ppe.exports=Number.isFinite||function(e){return typeof e=="number"&&bht(e)}});var dpe=R(()=>{"use strict";p();var wht=oe(),Eht=t5();wht({target:"Number",stat:!0},{isFinite:Eht})});var HP=R((X1r,mpe)=>{"use strict";p();var Sht=hr(),Tht=Math.floor;mpe.exports=Number.isInteger||function(e){return!Sht(e)&&isFinite(e)&&Tht(e)===e}});var gpe=R(()=>{"use strict";p();var Iht=oe(),Aht=HP();Iht({target:"Number",stat:!0},{isInteger:Aht})});var vpe=R(()=>{"use strict";p();var Mht=oe();Mht({target:"Number",stat:!0},{isNaN:function(e){return e!==e}})});var ype=R(()=>{"use strict";p();var Cht=oe(),Pht=HP(),Rht=Math.abs;Cht({target:"Number",stat:!0},{isSafeInteger:function(e){return Pht(e)&&Rht(e)<=9007199254740991}})});var _pe=R(()=>{"use strict";p();var Oht=oe();Oht({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var xpe=R(()=>{"use strict";p();var Lht=oe();Lht({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var r5=R((dEr,Spe)=>{"use strict";p();var Epe=Ft(),Dht=yt(),Nht=ct(),kht=Mr(),qht=Cg().trim,Fht=Mg(),jht=Nht("".charAt),WP=Epe.parseFloat,bpe=Epe.Symbol,wpe=bpe&&bpe.iterator,zht=1/WP(Fht+"-0")!==-1/0||wpe&&!Dht(function(){WP(Object(wpe))});Spe.exports=zht?function(e){var r=qht(kht(e)),n=WP(r);return n===0&&jht(r,0)==="-"?-0:n}:WP});var Ipe=R(()=>{"use strict";p();var Uht=oe(),Tpe=r5();Uht({target:"Number",stat:!0,forced:Number.parseFloat!==Tpe},{parseFloat:Tpe})});var n5=R((_Er,Ope)=>{"use strict";p();var Ppe=Ft(),Bht=yt(),Vht=ct(),Ght=Mr(),$ht=Cg().trim,Ape=Mg(),aE=Ppe.parseInt,Mpe=Ppe.Symbol,Cpe=Mpe&&Mpe.iterator,Rpe=/^[+-]?0x/i,Hht=Vht(Rpe.exec),Wht=aE(Ape+"08")!==8||aE(Ape+"0x16")!==22||Cpe&&!Bht(function(){aE(Object(Cpe))});Ope.exports=Wht?function(e,r){var n=$ht(Ght(e));return aE(n,r>>>0||(Hht(Rpe,n)?16:10))}:aE});var Dpe=R(()=>{"use strict";p();var Zht=oe(),Lpe=n5();Zht({target:"Number",stat:!0,forced:Number.parseInt!==Lpe},{parseInt:Lpe})});var jpe=R(()=>{"use strict";p();var Yht=oe(),o5=ct(),Kht=fi(),Xht=iE(),Qht=K1(),Jht=Z3(),i5=yt(),ept=RangeError,Npe=String,tpt=isFinite,rpt=Math.abs,npt=Math.floor,kpe=Math.pow,ipt=Math.round,tf=o5(1 .toExponential),opt=o5(Qht),qpe=o5("".slice),Fpe=tf(-69e-12,4)==="-6.9000e-11"&&tf(1.255,2)==="1.25e+0"&&tf(12345,3)==="1.235e+4"&&tf(25,0)==="3e+1",apt=function(){return i5(function(){tf(1,1/0)})&&i5(function(){tf(1,-1/0)})},spt=function(){return!i5(function(){tf(1/0,1/0),tf(NaN,1/0)})},lpt=!Fpe||!apt()||!spt();Yht({target:"Number",proto:!0,forced:lpt},{toExponential:function(e){var r=Xht(this);if(e===void 0)return tf(r);var n=Kht(e);if(!tpt(r))return String(r);if(n<0||n>20)throw new ept("Incorrect fraction digits");if(Fpe)return tf(r,n);var i="",o,l,f,d;if(r<0&&(i="-",r=-r),r===0)l=0,o=opt("0",n+1);else{var v=Jht(r);l=npt(v);var x=kpe(10,l-n),b=ipt(r/x);2*r>=(2*b+1)*x&&(b+=1),b>=kpe(10,n+1)&&(b/=10,l+=1),o=Npe(b)}return n!==0&&(o=qpe(o,0,1)+"."+qpe(o,1)),l===0?(f="+",d="0"):(f=l>0?"+":"-",d=Npe(rpt(l))),o+="e"+f+d,i+o}})});var $pe=R(()=>{"use strict";p();var upt=oe(),l5=ct(),cpt=fi(),fpt=iE(),hpt=K1(),zpe=yt(),ppt=RangeError,Vpe=String,Gpe=Math.floor,s5=l5(hpt),Upe=l5("".slice),sE=l5(1 .toFixed),P_=function(t,e,r){return e===0?r:e%2===1?P_(t,e-1,r*t):P_(t*t,e/2,r)},dpt=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e},C_=function(t,e,r){for(var n=-1,i=r;++n<6;)i+=e*t[n],t[n]=i%1e7,i=Gpe(i/1e7)},a5=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=Gpe(n/e),n=n%e*1e7},Bpe=function(t){for(var e=6,r="";--e>=0;)if(r!==""||e===0||t[e]!==0){var n=Vpe(t[e]);r=r===""?n:r+s5("0",7-n.length)+n}return r},mpt=zpe(function(){return sE(8e-5,3)!=="0.000"||sE(.9,0)!=="1"||sE(1.255,2)!=="1.25"||sE(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!zpe(function(){sE({})});upt({target:"Number",proto:!0,forced:mpt},{toFixed:function(e){var r=fpt(this),n=cpt(e),i=[0,0,0,0,0,0],o="",l="0",f,d,v,x;if(n<0||n>20)throw new ppt("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return Vpe(r);if(r<0&&(o="-",r=-r),r>1e-21)if(f=dpt(r*P_(2,69,1))-69,d=f<0?r*P_(2,-f,1):r/P_(2,f,1),d*=4503599627370496,f=52-f,f>0){for(C_(i,0,d),v=n;v>=7;)C_(i,1e7,0),v-=7;for(C_(i,P_(10,v,1),0),v=f-1;v>=23;)a5(i,1<<23),v-=23;a5(i,1<<v),C_(i,1,1),a5(i,2),l=Bpe(i)}else C_(i,0,d),C_(i,1<<-f,0),l=Bpe(i)+s5("0",n);return n>0?(x=l.length,l=o+(x<=n?"0."+s5("0",n-x)+l:Upe(l,0,x-n)+"."+Upe(l,x-n))):l=o+l,l}})});var Zpe=R(()=>{"use strict";p();var gpt=oe(),vpt=ct(),Hpe=yt(),Wpe=iE(),ZP=vpt(1 .toPrecision),ypt=Hpe(function(){return ZP(1,void 0)!=="1"})||!Hpe(function(){ZP({})});gpt({target:"Number",proto:!0,forced:ypt},{toPrecision:function(e){return e===void 0?ZP(Wpe(this)):ZP(Wpe(this),e)}})});var c5=R((LEr,Xpe)=>{"use strict";p();var Ype=sr(),_pt=ct(),xpt=jt(),bpt=yt(),u5=yg(),wpt=A1(),Ept=_1(),Spt=Yr(),Tpt=hh(),R_=Object.assign,Kpe=Object.defineProperty,Ipt=_pt([].concat);Xpe.exports=!R_||bpt(function(){if(Ype&&R_({b:1},R_(Kpe({},"a",{enumerable:!0,get:function(){Kpe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},e={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(i){e[i]=i}),R_({},t)[r]!==7||u5(R_({},e)).join("")!==n})?function(e,r){for(var n=Spt(e),i=arguments.length,o=1,l=wpt.f,f=Ept.f;i>o;)for(var d=Tpt(arguments[o++]),v=l?Ipt(u5(d),l(d)):u5(d),x=v.length,b=0,A;x>b;)A=v[b++],(!Ype||xpt(f,d,A))&&(n[A]=d[A]);return n}:R_});var Jpe=R(()=>{"use strict";p();var Apt=oe(),Qpe=c5();Apt({target:"Object",stat:!0,arity:2,forced:Object.assign!==Qpe},{assign:Qpe})});var ede=R(()=>{"use strict";p();var Mpt=oe(),Cpt=sr(),Ppt=Qi();Mpt({target:"Object",stat:!0,sham:!Cpt},{create:Ppt})});var lE=R((UEr,rde)=>{"use strict";p();var Rpt=pn(),Opt=Ft(),Lpt=yt(),tde=_P();rde.exports=Rpt||!Lpt(function(){if(!(tde&&tde<535)){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete Opt[t]}})});var nde=R(()=>{"use strict";p();var Dpt=oe(),Npt=sr(),kpt=lE(),qpt=xr(),Fpt=Yr(),jpt=ei();Npt&&Dpt({target:"Object",proto:!0,forced:kpt},{__defineGetter__:function(e,r){jpt.f(Fpt(this),e,{get:qpt(r),enumerable:!0,configurable:!0})}})});var ode=R(()=>{"use strict";p();var zpt=oe(),Upt=sr(),ide=VC().f;zpt({target:"Object",stat:!0,forced:Object.defineProperties!==ide,sham:!Upt},{defineProperties:ide})});var sde=R(()=>{"use strict";p();var Bpt=oe(),Vpt=sr(),ade=ei().f;Bpt({target:"Object",stat:!0,forced:Object.defineProperty!==ade,sham:!Vpt},{defineProperty:ade})});var lde=R(()=>{"use strict";p();var Gpt=oe(),$pt=sr(),Hpt=lE(),Wpt=xr(),Zpt=Yr(),Ypt=ei();$pt&&Gpt({target:"Object",proto:!0,forced:Hpt},{__defineSetter__:function(e,r){Ypt.f(Zpt(this),e,{set:Wpt(r),enumerable:!0,configurable:!0})}})});var f5=R((tSr,pde)=>{"use strict";p();var cde=sr(),Kpt=yt(),fde=ct(),Xpt=bo(),Qpt=yg(),Jpt=_o(),edt=_1().f,hde=fde(edt),tdt=fde([].push),rdt=cde&&Kpt(function(){var t=Object.create(null);return t[2]=2,!hde(t,2)}),ude=function(t){return function(e){for(var r=Jpt(e),n=Qpt(r),i=rdt&&Xpt(r)===null,o=n.length,l=0,f=[],d;o>l;)d=n[l++],(!cde||(i?d in r:hde(r,d)))&&tdt(f,t?[d,r[d]]:r[d]);return f}};pde.exports={entries:ude(!0),values:ude(!1)}});var dde=R(()=>{"use strict";p();var ndt=oe(),idt=f5().entries;ndt({target:"Object",stat:!0},{entries:function(e){return idt(e)}})});var mde=R(()=>{"use strict";p();var odt=oe(),adt=Eh(),sdt=yt(),ldt=hr(),udt=bd().onFreeze,h5=Object.freeze,cdt=sdt(function(){h5(1)});odt({target:"Object",stat:!0,forced:cdt,sham:!adt},{freeze:function(e){return h5&&ldt(e)?h5(udt(e)):e}})});var gde=R(()=>{"use strict";p();var fdt=oe(),hdt=Pi(),pdt=tu();fdt({target:"Object",stat:!0},{fromEntries:function(e){var r={};return hdt(e,function(n,i){pdt(r,n,i)},{AS_ENTRIES:!0}),r}})});var _de=R(()=>{"use strict";p();var ddt=oe(),mdt=yt(),gdt=_o(),vde=Yo().f,yde=sr(),vdt=!yde||mdt(function(){vde(1)});ddt({target:"Object",stat:!0,forced:vdt,sham:!yde},{getOwnPropertyDescriptor:function(e,r){return vde(gdt(e),r)}})});var xde=R(()=>{"use strict";p();var ydt=oe(),_dt=sr(),xdt=jC(),bdt=_o(),wdt=Yo(),Edt=tu();ydt({target:"Object",stat:!0,sham:!_dt},{getOwnPropertyDescriptors:function(e){for(var r=bdt(e),n=wdt.f,i=xdt(r),o={},l=0,f,d;i.length>l;)d=n(r,f=i[l++]),d!==void 0&&Edt(o,f,d);return o}})});var bde=R(()=>{"use strict";p();var Sdt=oe(),Tdt=yt(),Idt=HC().f,Adt=Tdt(function(){return!Object.getOwnPropertyNames(1)});Sdt({target:"Object",stat:!0,forced:Adt},{getOwnPropertyNames:Idt})});var Ede=R(()=>{"use strict";p();var Mdt=oe(),Cdt=yt(),Pdt=Yr(),wde=bo(),Rdt=oP(),Odt=Cdt(function(){wde(1)});Mdt({target:"Object",stat:!0,forced:Odt,sham:!Rdt},{getPrototypeOf:function(e){return wde(Pdt(e))}})});var p5=R(()=>{"use strict";p();var Ldt=oe(),Ddt=_r(),Ndt=ct(),kdt=xr(),qdt=oi(),Fdt=Yc(),jdt=Pi(),zdt=yt(),Sde=Object.groupBy,Udt=Ddt("Object","create"),Bdt=Ndt([].push),Vdt=!Sde||zdt(function(){return Sde("ab",function(t){return t}).a.length!==1});Ldt({target:"Object",stat:!0,forced:Vdt},{groupBy:function(e,r){qdt(e),kdt(r);var n=Udt(null),i=0;return jdt(e,function(o){var l=Fdt(r(o,i++));l in n?Bdt(n[l],o):n[l]=[o]}),n}})});var d5=R(()=>{"use strict";p();var Gdt=oe(),$dt=Br();Gdt({target:"Object",stat:!0},{hasOwn:$dt})});var YP=R((PSr,Tde)=>{"use strict";p();Tde.exports=Object.is||function(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}});var Ide=R(()=>{"use strict";p();var Hdt=oe(),Wdt=YP();Hdt({target:"Object",stat:!0},{is:Wdt})});var Mde=R(()=>{"use strict";p();var Zdt=oe(),Ade=jP();Zdt({target:"Object",stat:!0,forced:Object.isExtensible!==Ade},{isExtensible:Ade})});var Pde=R(()=>{"use strict";p();var Ydt=oe(),Kdt=yt(),Xdt=hr(),Qdt=pa(),Cde=qP(),m5=Object.isFrozen,Jdt=Cde||Kdt(function(){m5(1)});Ydt({target:"Object",stat:!0,forced:Jdt},{isFrozen:function(e){return!Xdt(e)||Cde&&Qdt(e)==="ArrayBuffer"?!0:m5?m5(e):!1}})});var Ode=R(()=>{"use strict";p();var emt=oe(),tmt=yt(),rmt=hr(),nmt=pa(),Rde=qP(),g5=Object.isSealed,imt=Rde||tmt(function(){g5(1)});emt({target:"Object",stat:!0,forced:imt},{isSealed:function(e){return!rmt(e)||Rde&&nmt(e)==="ArrayBuffer"?!0:g5?g5(e):!1}})});var Dde=R(()=>{"use strict";p();var omt=oe(),amt=Yr(),Lde=yg(),smt=yt(),lmt=smt(function(){Lde(1)});omt({target:"Object",stat:!0,forced:lmt},{keys:function(e){return Lde(amt(e))}})});var Nde=R(()=>{"use strict";p();var umt=oe(),cmt=sr(),fmt=lE(),hmt=Yr(),pmt=Yc(),dmt=bo(),mmt=Yo().f;cmt&&umt({target:"Object",proto:!0,forced:fmt},{__lookupGetter__:function(e){var r=hmt(this),n=pmt(e),i;do if(i=mmt(r,n))return i.get;while(r=dmt(r))}})});var kde=R(()=>{"use strict";p();var gmt=oe(),vmt=sr(),ymt=lE(),_mt=Yr(),xmt=Yc(),bmt=bo(),wmt=Yo().f;vmt&&gmt({target:"Object",proto:!0,forced:ymt},{__lookupSetter__:function(e){var r=_mt(this),n=xmt(e),i;do if(i=wmt(r,n))return i.set;while(r=bmt(r))}})});var qde=R(()=>{"use strict";p();var Emt=oe(),Smt=hr(),Tmt=bd().onFreeze,Imt=Eh(),Amt=yt(),v5=Object.preventExtensions,Mmt=Amt(function(){v5(1)});Emt({target:"Object",stat:!0,forced:Mmt,sham:!Imt},{preventExtensions:function(e){return v5&&Smt(e)?v5(Tmt(e)):e}})});var Bde=R(()=>{"use strict";p();var Cmt=sr(),Pmt=hi(),Rmt=hr(),Omt=hU(),Lmt=Yr(),Dmt=oi(),Fde=Object.getPrototypeOf,jde=Object.setPrototypeOf,zde=Object.prototype,Ude="__proto__";if(Cmt&&Fde&&jde&&!(Ude in zde))try{Pmt(zde,Ude,{configurable:!0,get:function(){return Fde(Lmt(this))},set:function(e){var r=Dmt(this);Omt(e)&&Rmt(r)&&jde(r,e)}})}catch(t){}});var Vde=R(()=>{"use strict";p();var Nmt=oe(),kmt=hr(),qmt=bd().onFreeze,Fmt=Eh(),jmt=yt(),y5=Object.seal,zmt=jmt(function(){y5(1)});Nmt({target:"Object",stat:!0,forced:zmt,sham:!Fmt},{seal:function(e){return y5&&kmt(e)?y5(qmt(e)):e}})});var Gde=R(()=>{"use strict";p();var Umt=oe(),Bmt=eu();Umt({target:"Object",stat:!0},{setPrototypeOf:Bmt})});var Hde=R((fTr,$de)=>{"use strict";p();var Vmt=UC(),Gmt=ss();$de.exports=Vmt?{}.toString:function(){return"[object "+Gmt(this)+"]"}});var Wde=R(()=>{"use strict";p();var $mt=UC(),Hmt=Nn(),Wmt=Hde();$mt||Hmt(Object.prototype,"toString",Wmt,{unsafe:!0})});var Zde=R(()=>{"use strict";p();var Zmt=oe(),Ymt=f5().values;Zmt({target:"Object",stat:!0},{values:function(e){return Ymt(e)}})});var Kde=R(()=>{"use strict";p();var Kmt=oe(),Yde=r5();Kmt({global:!0,forced:parseFloat!==Yde},{parseFloat:Yde})});var Qde=R(()=>{"use strict";p();var Xmt=oe(),Xde=n5();Xmt({global:!0,forced:parseInt!==Xde},{parseInt:Xde})});var uE=R((TTr,Jde)=>{"use strict";p();var Qmt=rc(),Jmt=rd(),egt=TypeError;Jde.exports=function(t){if(Qmt(t))return t;throw new egt(Jmt(t)+" is not a constructor")}});var cE=R((ATr,tme)=>{"use strict";p();var eme=Bt(),tgt=uE(),rgt=Ds(),ngt=mr(),igt=ngt("species");tme.exports=function(t,e){var r=eme(t).constructor,n;return r===void 0||rgt(n=eme(r)[igt])?e:tgt(n)}});var Tl=R((CTr,rme)=>{"use strict";p();var ogt=TypeError;rme.exports=function(t,e){if(t<e)throw new ogt("Not enough arguments");return t}});var _5=R((RTr,nme)=>{"use strict";p();var agt=Ku();nme.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(agt)});var pE=R((LTr,hme)=>{"use strict";p();var Il=Ft(),sgt=ma(),lgt=Hn(),ime=jr(),ugt=Br(),fme=yt(),ome=B4(),cgt=ks(),ame=w1(),fgt=Tl(),hgt=_5(),pgt=Tg(),T5=Il.setImmediate,I5=Il.clearImmediate,dgt=Il.process,x5=Il.Dispatch,mgt=Il.Function,sme=Il.MessageChannel,ggt=Il.String,b5=0,fE={},lme="onreadystatechange",hE,Pg,w5,E5;fme(function(){hE=Il.location});var A5=function(t){if(ugt(fE,t)){var e=fE[t];delete fE[t],e()}},S5=function(t){return function(){A5(t)}},ume=function(t){A5(t.data)},cme=function(t){Il.postMessage(ggt(t),hE.protocol+"//"+hE.host)};(!T5||!I5)&&(T5=function(e){fgt(arguments.length,1);var r=ime(e)?e:mgt(e),n=cgt(arguments,1);return fE[++b5]=function(){sgt(r,void 0,n)},Pg(b5),b5},I5=function(e){delete fE[e]},pgt?Pg=function(t){dgt.nextTick(S5(t))}:x5&&x5.now?Pg=function(t){x5.now(S5(t))}:sme&&!hgt?(w5=new sme,E5=w5.port2,w5.port1.onmessage=ume,Pg=lgt(E5.postMessage,E5)):Il.addEventListener&&ime(Il.postMessage)&&!Il.importScripts&&hE&&hE.protocol!=="file:"&&!fme(cme)?(Pg=cme,Il.addEventListener("message",ume,!1)):lme in ame("script")?Pg=function(t){ome.appendChild(ame("script"))[lme]=function(){ome.removeChild(this),A5(t)}}:Pg=function(t){setTimeout(S5(t),0)});hme.exports={set:T5,clear:I5}});var M5=R((NTr,dme)=>{"use strict";p();var pme=Ft(),vgt=sr(),ygt=Object.getOwnPropertyDescriptor;dme.exports=function(t){if(!vgt)return pme[t];var e=ygt(pme,t);return e&&e.value}});var C5=R((qTr,gme)=>{"use strict";p();var mme=function(){this.head=null,this.tail=null};mme.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t){var e=this.head=t.next;return e===null&&(this.tail=null),t.item}}};gme.exports=mme});var yme=R((jTr,vme)=>{"use strict";p();var _gt=Ku();vme.exports=/ipad|iphone|ipod/i.test(_gt)&&typeof Pebble!="undefined"});var xme=R((UTr,_me)=>{"use strict";p();var xgt=Ku();_me.exports=/web0s(?!.*chrome)/i.test(xgt)});var N5=R((VTr,Ime)=>{"use strict";p();var L_=Ft(),bgt=M5(),bme=Hn(),P5=pE().set,wgt=C5(),Egt=_5(),Sgt=yme(),Tgt=xme(),R5=Tg(),wme=L_.MutationObserver||L_.WebKitMutationObserver,Eme=L_.document,Sme=L_.process,KP=L_.Promise,D5=bgt("queueMicrotask"),O_,O5,L5,XP,Tme;D5||(dE=new wgt,mE=function(){var t,e;for(R5&&(t=Sme.domain)&&t.exit();e=dE.get();)try{e()}catch(r){throw dE.head&&O_(),r}t&&t.enter()},!Egt&&!R5&&!Tgt&&wme&&Eme?(O5=!0,L5=Eme.createTextNode(""),new wme(mE).observe(L5,{characterData:!0}),O_=function(){L5.data=O5=!O5}):!Sgt&&KP&&KP.resolve?(XP=KP.resolve(void 0),XP.constructor=KP,Tme=bme(XP.then,XP),O_=function(){Tme(mE)}):R5?O_=function(){Sme.nextTick(mE)}:(P5=bme(P5,L_),O_=function(){P5(mE)}),D5=function(t){dE.head||O_(),dE.add(t)});var dE,mE;Ime.exports=D5});var k5=R(($Tr,Ame)=>{"use strict";p();Ame.exports=function(t,e){try{arguments.length===1?console.error(t):console.error(t,e)}catch(r){}}});var wd=R((WTr,Mme)=>{"use strict";p();Mme.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}});var Rg=R((YTr,Cme)=>{"use strict";p();var Igt=Ft();Cme.exports=Igt.Promise});var D_=R((XTr,Lme)=>{"use strict";p();var Agt=Ft(),gE=Rg(),Mgt=jr(),Cgt=h_(),Pgt=E1(),Rgt=mr(),Pme=$1(),Ogt=pn(),q5=Qu(),Rme=gE&&gE.prototype,Lgt=Rgt("species"),F5=!1,Ome=Mgt(Agt.PromiseRejectionEvent),Dgt=Cgt("Promise",function(){var t=Pgt(gE),e=t!==String(gE);if(!e&&q5===66||Ogt&&!(Rme.catch&&Rme.finally))return!0;if(!q5||q5<51||!/native code/.test(t)){var r=new gE(function(o){o(1)}),n=function(o){o(function(){},function(){})},i=r.constructor={};if(i[Lgt]=n,F5=r.then(function(){})instanceof n,!F5)return!0}return!e&&(Pme==="BROWSER"||Pme==="DENO")&&!Ome});Lme.exports={CONSTRUCTOR:Dgt,REJECTION_EVENT:Ome,SUBCLASSING:F5}});var rf=R((JTr,Nme)=>{"use strict";p();var Dme=xr(),Ngt=TypeError,kgt=function(t){var e,r;this.promise=new t(function(n,i){if(e!==void 0||r!==void 0)throw new Ngt("Bad Promise constructor");e=n,r=i}),this.resolve=Dme(e),this.reject=Dme(r)};Nme.exports.f=function(t){return new kgt(t)}});var ege=R(()=>{"use strict";p();var qgt=oe(),Fgt=pn(),tR=Tg(),Ed=Ft(),F_=jt(),kme=Nn(),qme=eu(),jgt=ls(),zgt=dd(),Ugt=xr(),eR=jr(),Bgt=hr(),Vgt=ka(),Ggt=cE(),Bme=pE().set,V5=N5(),$gt=k5(),Hgt=wd(),Wgt=C5(),Vme=Cn(),rR=Rg(),G5=D_(),Gme=rf(),nR="Promise",$me=G5.CONSTRUCTOR,Zgt=G5.REJECTION_EVENT,Ygt=G5.SUBCLASSING,j5=Vme.getterFor(nR),Kgt=Vme.set,N_=rR&&rR.prototype,Og=rR,QP=N_,Hme=Ed.TypeError,z5=Ed.document,$5=Ed.process,U5=Gme.f,Xgt=U5,Qgt=!!(z5&&z5.createEvent&&Ed.dispatchEvent),Wme="unhandledrejection",Jgt="rejectionhandled",Fme=0,Zme=1,evt=2,H5=1,Yme=2,JP,jme,tvt,zme,Kme=function(t){var e;return Bgt(t)&&eR(e=t.then)?e:!1},Xme=function(t,e){var r=e.value,n=e.state===Zme,i=n?t.ok:t.fail,o=t.resolve,l=t.reject,f=t.domain,d,v,x;try{i?(n||(e.rejection===Yme&&nvt(e),e.rejection=H5),i===!0?d=r:(f&&f.enter(),d=i(r),f&&(f.exit(),x=!0)),d===t.promise?l(new Hme("Promise-chain cycle")):(v=Kme(d))?F_(v,d,o,l):o(d)):l(r)}catch(b){f&&!x&&f.exit(),l(b)}},Qme=function(t,e){t.notified||(t.notified=!0,V5(function(){for(var r=t.reactions,n;n=r.get();)Xme(n,t);t.notified=!1,e&&!t.rejection&&rvt(t)}))},Jme=function(t,e,r){var n,i;Qgt?(n=z5.createEvent("Event"),n.promise=e,n.reason=r,n.initEvent(t,!1,!0),Ed.dispatchEvent(n)):n={promise:e,reason:r},!Zgt&&(i=Ed["on"+t])?i(n):t===Wme&&$gt("Unhandled promise rejection",r)},rvt=function(t){F_(Bme,Ed,function(){var e=t.facade,r=t.value,n=Ume(t),i;if(n&&(i=Hgt(function(){tR?$5.emit("unhandledRejection",r,e):Jme(Wme,e,r)}),t.rejection=tR||Ume(t)?Yme:H5,i.error))throw i.value})},Ume=function(t){return t.rejection!==H5&&!t.parent},nvt=function(t){F_(Bme,Ed,function(){var e=t.facade;tR?$5.emit("rejectionHandled",e):Jme(Jgt,e,t.value)})},k_=function(t,e,r){return function(n){t(e,n,r)}},q_=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=evt,Qme(t,!0))},B5=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new Hme("Promise can't be resolved itself");var n=Kme(e);n?V5(function(){var i={done:!1};try{F_(n,e,k_(B5,i,t),k_(q_,i,t))}catch(o){q_(i,o,t)}}):(t.value=e,t.state=Zme,Qme(t,!1))}catch(i){q_({done:!1},i,t)}}};if($me&&(Og=function(e){Vgt(this,QP),Ugt(e),F_(JP,this);var r=j5(this);try{e(k_(B5,r),k_(q_,r))}catch(n){q_(r,n)}},QP=Og.prototype,JP=function(e){Kgt(this,{type:nR,done:!1,notified:!1,parent:!1,reactions:new Wgt,rejection:!1,state:Fme,value:null})},JP.prototype=kme(QP,"then",function(e,r){var n=j5(this),i=U5(Ggt(this,Og));return n.parent=!0,i.ok=eR(e)?e:!0,i.fail=eR(r)&&r,i.domain=tR?$5.domain:void 0,n.state===Fme?n.reactions.add(i):V5(function(){Xme(i,n)}),i.promise}),jme=function(){var t=new JP,e=j5(t);this.promise=t,this.resolve=k_(B5,e),this.reject=k_(q_,e)},Gme.f=U5=function(t){return t===Og||t===tvt?new jme(t):Xgt(t)},!Fgt&&eR(rR)&&N_!==Object.prototype)){zme=N_.then,Ygt||kme(N_,"then",function(e,r){var n=this;return new Og(function(i,o){F_(zme,n,i,o)}).then(e,r)},{unsafe:!0});try{delete N_.constructor}catch(t){}qme&&qme(N_,QP)}qgt({global:!0,constructor:!0,wrap:!0,forced:$me},{Promise:Og});jgt(Og,nR,!1,!0);zgt(nR)});var vE=R((iIr,tge)=>{"use strict";p();var ivt=Rg(),ovt=j1(),avt=D_().CONSTRUCTOR;tge.exports=avt||!ovt(function(t){ivt.all(t).then(void 0,function(){})})});var rge=R(()=>{"use strict";p();var svt=oe(),lvt=jt(),uvt=xr(),cvt=rf(),fvt=wd(),hvt=Pi(),pvt=vE();svt({target:"Promise",stat:!0,forced:pvt},{all:function(e){var r=this,n=cvt.f(r),i=n.resolve,o=n.reject,l=fvt(function(){var f=uvt(r.resolve),d=[],v=0,x=1;hvt(e,function(b){var A=v++,P=!1;x++,lvt(f,r,b).then(function(N){P||(P=!0,d[A]=N,--x||i(d))},o)}),--x||i(d)});return l.error&&o(l.value),n.promise}})});var ige=R(()=>{"use strict";p();var dvt=oe(),mvt=pn(),gvt=D_().CONSTRUCTOR,Z5=Rg(),vvt=_r(),yvt=jr(),_vt=Nn(),nge=Z5&&Z5.prototype;dvt({target:"Promise",proto:!0,forced:gvt,real:!0},{catch:function(t){return this.then(void 0,t)}});!mvt&&yvt(Z5)&&(W5=vvt("Promise").prototype.catch,nge.catch!==W5&&_vt(nge,"catch",W5,{unsafe:!0}));var W5});var oge=R(()=>{"use strict";p();var xvt=oe(),bvt=jt(),wvt=xr(),Evt=rf(),Svt=wd(),Tvt=Pi(),Ivt=vE();xvt({target:"Promise",stat:!0,forced:Ivt},{race:function(e){var r=this,n=Evt.f(r),i=n.reject,o=Svt(function(){var l=wvt(r.resolve);Tvt(e,function(f){bvt(l,r,f).then(n.resolve,i)})});return o.error&&i(o.value),n.promise}})});var age=R(()=>{"use strict";p();var Avt=oe(),Mvt=rf(),Cvt=D_().CONSTRUCTOR;Avt({target:"Promise",stat:!0,forced:Cvt},{reject:function(e){var r=Mvt.f(this),n=r.reject;return n(e),r.promise}})});var Y5=R((yIr,sge)=>{"use strict";p();var Pvt=Bt(),Rvt=hr(),Ovt=rf();sge.exports=function(t,e){if(Pvt(t),Rvt(e)&&e.constructor===t)return e;var r=Ovt.f(t),n=r.resolve;return n(e),r.promise}});var cge=R(()=>{"use strict";p();var Lvt=oe(),Dvt=_r(),lge=pn(),Nvt=Rg(),uge=D_().CONSTRUCTOR,kvt=Y5(),qvt=Dvt("Promise"),Fvt=lge&&!uge;Lvt({target:"Promise",stat:!0,forced:lge||uge},{resolve:function(e){return kvt(Fvt&&this===qvt?Nvt:this,e)}})});var fge=R(()=>{"use strict";p();ege();rge();ige();oge();age();cge()});var K5=R(()=>{"use strict";p();var jvt=oe(),zvt=jt(),Uvt=xr(),Bvt=rf(),Vvt=wd(),Gvt=Pi(),$vt=vE();jvt({target:"Promise",stat:!0,forced:$vt},{allSettled:function(e){var r=this,n=Bvt.f(r),i=n.resolve,o=n.reject,l=Vvt(function(){var f=Uvt(r.resolve),d=[],v=0,x=1;Gvt(e,function(b){var A=v++,P=!1;x++,zvt(f,r,b).then(function(N){P||(P=!0,d[A]={status:"fulfilled",value:N},--x||i(d))},function(N){P||(P=!0,d[A]={status:"rejected",reason:N},--x||i(d))})}),--x||i(d)});return l.error&&o(l.value),n.promise}})});var X5=R(()=>{"use strict";p();var Hvt=oe(),Wvt=jt(),Zvt=xr(),Yvt=_r(),Kvt=rf(),Xvt=wd(),Qvt=Pi(),Jvt=vE(),hge="No one promise resolved";Hvt({target:"Promise",stat:!0,forced:Jvt},{any:function(e){var r=this,n=Yvt("AggregateError"),i=Kvt.f(r),o=i.resolve,l=i.reject,f=Xvt(function(){var d=Zvt(r.resolve),v=[],x=0,b=1,A=!1;Qvt(e,function(P){var N=x++,j=!1;b++,Wvt(d,r,P).then(function(D){j||A||(A=!0,o(D))},function(D){j||A||(j=!0,v[N]=D,--b||l(new n(v,hge)))})}),--b||l(new n(v,hge))});return f.error&&l(f.value),i.promise}})});var gge=R(()=>{"use strict";p();var eyt=oe(),tyt=pn(),iR=Rg(),ryt=yt(),dge=_r(),mge=jr(),nyt=cE(),pge=Y5(),iyt=Nn(),J5=iR&&iR.prototype,oyt=!!iR&&ryt(function(){J5.finally.call({then:function(){}},function(){})});eyt({target:"Promise",proto:!0,real:!0,forced:oyt},{finally:function(t){var e=nyt(this,dge("Promise")),r=mge(t);return this.then(r?function(n){return pge(e,t()).then(function(){return n})}:t,r?function(n){return pge(e,t()).then(function(){throw n})}:t)}});!tyt&&mge(iR)&&(Q5=dge("Promise").prototype.finally,J5.finally!==Q5&&iyt(J5,"finally",Q5,{unsafe:!0}));var Q5});var tV=R(()=>{"use strict";p();var ayt=oe(),syt=Ft(),lyt=ma(),uyt=ks(),cyt=rf(),fyt=xr(),yge=wd(),eV=syt.Promise,vge=!1,hyt=!eV||!eV.try||yge(function(){eV.try(function(t){vge=t===8},8)}).error||!vge;ayt({target:"Promise",stat:!0,forced:hyt},{try:function(t){var e=arguments.length>1?uyt(arguments,1):[],r=cyt.f(this),n=yge(function(){return lyt(fyt(t),void 0,e)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var rV=R(()=>{"use strict";p();var pyt=oe(),dyt=rf();pyt({target:"Promise",stat:!0},{withResolvers:function(){var e=dyt.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})});var _ge=R(()=>{"use strict";p();var myt=oe(),gyt=ma(),vyt=xr(),yyt=Bt(),_yt=yt(),xyt=!_yt(function(){Reflect.apply(function(){})});myt({target:"Reflect",stat:!0,forced:xyt},{apply:function(e,r,n){return gyt(vyt(e),r,yyt(n))}})});var Ige=R(()=>{"use strict";p();var byt=oe(),wyt=_r(),nV=ma(),Eyt=JB(),xge=uE(),Syt=Bt(),bge=hr(),Tyt=Qi(),Ege=yt(),iV=wyt("Reflect","construct"),Iyt=Object.prototype,Ayt=[].push,Sge=Ege(function(){function t(){}return!(iV(function(){},[],t)instanceof t)}),Tge=!Ege(function(){iV(function(){})}),wge=Sge||Tge;byt({target:"Reflect",stat:!0,forced:wge,sham:wge},{construct:function(e,r){xge(e),Syt(r);var n=arguments.length<3?e:xge(arguments[2]);if(Tge&&!Sge)return iV(e,r,n);if(e===n){switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3])}var i=[null];return nV(Ayt,i,r),new(nV(Eyt,e,i))}var o=n.prototype,l=Tyt(bge(o)?o:Iyt),f=nV(e,l,r);return bge(f)?f:l}})});var Cge=R(()=>{"use strict";p();var Myt=oe(),Cyt=sr(),Age=Bt(),Pyt=Yc(),Mge=ei(),Ryt=yt(),Oyt=Ryt(function(){Reflect.defineProperty(Mge.f({},1,{value:1}),1,{value:2})});Myt({target:"Reflect",stat:!0,forced:Oyt,sham:!Cyt},{defineProperty:function(e,r,n){Age(e);var i=Pyt(r);Age(n);try{return Mge.f(e,i,n),!0}catch(o){return!1}}})});var Pge=R(()=>{"use strict";p();var Lyt=oe(),Dyt=Bt(),Nyt=Yo().f;Lyt({target:"Reflect",stat:!0},{deleteProperty:function(e,r){var n=Nyt(Dyt(e),r);return n&&!n.configurable?!1:delete e[r]}})});var oV=R((JIr,Oge)=>{"use strict";p();var Rge=Br();Oge.exports=function(t){return t!==void 0&&(Rge(t,"value")||Rge(t,"writable"))}});var Dge=R(()=>{"use strict";p();var kyt=oe(),qyt=jt(),Fyt=hr(),jyt=Bt(),zyt=oV(),Uyt=Yo(),Byt=bo();function Lge(t,e){var r=arguments.length<3?t:arguments[2],n,i;if(jyt(t)===r)return t[e];if(n=Uyt.f(t,e),n)return zyt(n)?n.value:n.get===void 0?void 0:qyt(n.get,r);if(Fyt(i=Byt(t)))return Lge(i,e,r)}kyt({target:"Reflect",stat:!0},{get:Lge})});var Nge=R(()=>{"use strict";p();var Vyt=oe(),Gyt=sr(),$yt=Bt(),Hyt=Yo();Vyt({target:"Reflect",stat:!0,sham:!Gyt},{getOwnPropertyDescriptor:function(e,r){return Hyt.f($yt(e),r)}})});var kge=R(()=>{"use strict";p();var Wyt=oe(),Zyt=Bt(),Yyt=bo(),Kyt=oP();Wyt({target:"Reflect",stat:!0,sham:!Kyt},{getPrototypeOf:function(e){return Yyt(Zyt(e))}})});var qge=R(()=>{"use strict";p();var Xyt=oe();Xyt({target:"Reflect",stat:!0},{has:function(e,r){return r in e}})});var Fge=R(()=>{"use strict";p();var Qyt=oe(),Jyt=Bt(),e_t=jP();Qyt({target:"Reflect",stat:!0},{isExtensible:function(e){return Jyt(e),e_t(e)}})});var jge=R(()=>{"use strict";p();var t_t=oe(),r_t=jC();t_t({target:"Reflect",stat:!0},{ownKeys:r_t})});var zge=R(()=>{"use strict";p();var n_t=oe(),i_t=_r(),o_t=Bt(),a_t=Eh();n_t({target:"Reflect",stat:!0,sham:!a_t},{preventExtensions:function(e){o_t(e);try{var r=i_t("Object","preventExtensions");return r&&r(e),!0}catch(n){return!1}}})});var $ge=R(()=>{"use strict";p();var s_t=oe(),l_t=jt(),u_t=Bt(),Uge=hr(),c_t=oV(),f_t=yt(),aV=ei(),Bge=Yo(),h_t=bo(),Vge=Ls();function Gge(t,e,r){var n=arguments.length<4?t:arguments[3],i=Bge.f(u_t(t),e),o,l,f;if(!i){if(Uge(l=h_t(t)))return Gge(l,e,r,n);i=Vge(0)}if(c_t(i)){if(i.writable===!1||!Uge(n))return!1;if(o=Bge.f(n,e)){if(o.get||o.set||o.writable===!1)return!1;o.value=r,aV.f(n,e,o)}else aV.f(n,e,Vge(0,r))}else{if(f=i.set,f===void 0)return!1;l_t(f,n,r)}return!0}var p_t=f_t(function(){var t=function(){},e=aV.f(new t,"a",{configurable:!0});return Reflect.set(t.prototype,"a",1,e)!==!1});s_t({target:"Reflect",stat:!0,forced:p_t},{set:Gge})});var Wge=R(()=>{"use strict";p();var d_t=oe(),m_t=Bt(),g_t=pU(),Hge=eu();Hge&&d_t({target:"Reflect",stat:!0},{setPrototypeOf:function(e,r){m_t(e),g_t(r);try{return Hge(e,r),!0}catch(n){return!1}}})});var Zge=R(()=>{"use strict";p();var v_t=oe(),y_t=Ft(),__t=ls();v_t({global:!0},{Reflect:{}});__t(y_t.Reflect,"Reflect",!0)});var yE=R((RAr,Yge)=>{"use strict";p();var x_t=hr(),b_t=pa(),w_t=mr(),E_t=w_t("match");Yge.exports=function(t){var e;return x_t(t)&&((e=t[E_t])!==void 0?!!e:b_t(t)==="RegExp")}});var oR=R((LAr,Kge)=>{"use strict";p();var S_t=Bt();Kge.exports=function(){var t=S_t(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}});var j_=R((NAr,Qge)=>{"use strict";p();var T_t=jt(),I_t=Br(),A_t=da(),M_t=oR(),Xge=RegExp.prototype;Qge.exports=function(t){var e=t.flags;return e===void 0&&!("flags"in Xge)&&!I_t(t,"flags")&&A_t(Xge,t)?T_t(M_t,t):e}});var _E=R((qAr,Jge)=>{"use strict";p();var sV=yt(),C_t=Ft(),lV=C_t.RegExp,uV=sV(function(){var t=lV("a","y");return t.lastIndex=2,t.exec("abcd")!==null}),P_t=uV||sV(function(){return!lV("a","y").sticky}),R_t=uV||sV(function(){var t=lV("^r","gy");return t.lastIndex=2,t.exec("str")!==null});Jge.exports={BROKEN_CARET:R_t,MISSED_STICKY:P_t,UNSUPPORTED_Y:uV}});var aR=R((jAr,eve)=>{"use strict";p();var O_t=yt(),L_t=Ft(),D_t=L_t.RegExp;eve.exports=O_t(function(){var t=D_t(".","s");return!(t.dotAll&&t.test(`
`)&&t.flags==="s")})});var cV=R((UAr,tve)=>{"use strict";p();var N_t=yt(),k_t=Ft(),q_t=k_t.RegExp;tve.exports=N_t(function(){var t=q_t("(?<a>b)","g");return t.exec("b").groups.a!=="b"||"b".replace(t,"$<a>c")!=="bc"})});var fve=R(()=>{"use strict";p();var F_t=sr(),dV=Ft(),xE=ct(),j_t=h_(),z_t=ld(),U_t=xo(),B_t=Qi(),V_t=id().f,rve=da(),G_t=yE(),nve=Mr(),$_t=j_(),sve=_E(),H_t=dU(),W_t=Nn(),Z_t=yt(),Y_t=Br(),K_t=Cn().enforce,X_t=dd(),Q_t=mr(),lve=aR(),uve=cV(),J_t=Q_t("match"),Td=dV.RegExp,z_=Td.prototype,e0t=dV.SyntaxError,t0t=xE(z_.exec),sR=xE("".charAt),ive=xE("".replace),ove=xE("".indexOf),ave=xE("".slice),r0t=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Lg=/a/g,fV=/a/g,n0t=new Td(Lg)!==Lg,cve=sve.MISSED_STICKY,i0t=sve.UNSUPPORTED_Y,o0t=F_t&&(!n0t||cve||lve||uve||Z_t(function(){return fV[J_t]=!1,Td(Lg)!==Lg||Td(fV)===fV||String(Td(Lg,"i"))!=="/a/i"})),a0t=function(t){for(var e=t.length,r=0,n="",i=!1,o;r<=e;r++){if(o=sR(t,r),o==="\\"){n+=o+sR(t,++r);continue}!i&&o==="."?n+="[\\s\\S]":(o==="["?i=!0:o==="]"&&(i=!1),n+=o)}return n},s0t=function(t){for(var e=t.length,r=0,n="",i=[],o=B_t(null),l=!1,f=!1,d=0,v="",x;r<=e;r++){if(x=sR(t,r),x==="\\")x+=sR(t,++r);else if(x==="]")l=!1;else if(!l)switch(!0){case x==="[":l=!0;break;case x==="(":if(n+=x,ave(t,r+1,r+3)==="?:")continue;t0t(r0t,ave(t,r+1))&&(r+=2,f=!0),d++;continue;case x===">"&&f:if(v===""||Y_t(o,v))throw new e0t("Invalid capture group name");o[v]=!0,i[i.length]=[v,d],f=!1,v="";continue}f?v+=x:n+=x}return[n,i]};if(j_t("RegExp",o0t)){for(Sd=function(e,r){var n=rve(z_,this),i=G_t(e),o=r===void 0,l=[],f=e,d,v,x,b,A,P;if(!n&&i&&o&&e.constructor===Sd)return e;if((i||rve(z_,e))&&(e=e.source,o&&(r=$_t(f))),e=e===void 0?"":nve(e),r=r===void 0?"":nve(r),f=e,lve&&"dotAll"in Lg&&(v=!!r&&ove(r,"s")>-1,v&&(r=ive(r,/s/g,""))),d=r,cve&&"sticky"in Lg&&(x=!!r&&ove(r,"y")>-1,x&&i0t&&(r=ive(r,/y/g,""))),uve&&(b=s0t(e),e=b[0],l=b[1]),A=z_t(Td(e,r),n?this:z_,Sd),(v||x||l.length)&&(P=K_t(A),v&&(P.dotAll=!0,P.raw=Sd(a0t(e),d)),x&&(P.sticky=!0),l.length&&(P.groups=l)),e!==f)try{U_t(A,"source",f===""?"(?:)":f)}catch(N){}return A},hV=V_t(Td),pV=0;hV.length>pV;)H_t(Sd,Td,hV[pV++]);z_.constructor=Sd,Sd.prototype=z_,W_t(dV,"RegExp",Sd,{constructor:!0})}var Sd,hV,pV;X_t("RegExp")});var bE=R((HAr,hve)=>{"use strict";p();var l0t=TypeError;hve.exports=function(t){if(typeof t=="string")return t;throw new l0t("Argument is not a string")}});var yV=R(()=>{"use strict";p();var u0t=oe(),wE=ct(),c0t=bE(),f0t=Br(),pve=X1().start,h0t=Mg(),p0t=Array,dve=RegExp.escape,mve=wE("".charAt),vV=wE("".charCodeAt),d0t=wE(1.1.toString),m0t=wE([].join),vve=/^[0-9a-z]/i,g0t=/^[$()*+./?[\\\]^{|}]/,v0t=RegExp("^[!\"#%&',\\-:;<=>@`~"+h0t+"]"),mV=wE(vve.exec),gve={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},gV=function(t){var e=d0t(vV(t,0),16);return e.length<3?"\\x"+pve(e,2,"0"):"\\u"+pve(e,4,"0")},y0t=!dve||dve("ab")!=="\\x61b";u0t({target:"RegExp",stat:!0,forced:y0t},{escape:function(e){c0t(e);for(var r=e.length,n=p0t(r),i=0;i<r;i++){var o=mve(e,i);if(i===0&&mV(vve,o))n[i]=gV(o);else if(f0t(gve,o))n[i]="\\"+gve[o];else if(mV(g0t,o))n[i]="\\"+o;else if(mV(v0t,o))n[i]=gV(o);else{var l=vV(o,0);(l&63488)!==55296?n[i]=o:l>=56320||i+1>=r||(vV(e,i+1)&64512)!==56320?n[i]=gV(o):(n[i]=o,n[++i]=mve(e,i))}}return m0t(n,"")}})});var _ve=R(()=>{"use strict";p();var _0t=sr(),x0t=aR(),b0t=pa(),w0t=hi(),E0t=Cn().get,yve=RegExp.prototype,S0t=TypeError;_0t&&x0t&&w0t(yve,"dotAll",{configurable:!0,get:function(){if(this!==yve){if(b0t(this)==="RegExp")return!!E0t(this).dotAll;throw new S0t("Incompatible receiver, RegExp required")}}})});var cR=R((eMr,bve)=>{"use strict";p();var U_=jt(),uR=ct(),T0t=Mr(),I0t=oR(),A0t=_E(),M0t=dh(),C0t=Qi(),P0t=Cn().get,R0t=aR(),O0t=cV(),L0t=M0t("native-string-replace",String.prototype.replace),lR=RegExp.prototype.exec,xV=lR,D0t=uR("".charAt),N0t=uR("".indexOf),k0t=uR("".replace),_V=uR("".slice),bV=function(){var t=/a/,e=/b*/g;return U_(lR,t,"a"),U_(lR,e,"a"),t.lastIndex!==0||e.lastIndex!==0}(),xve=A0t.BROKEN_CARET,wV=/()??/.exec("")[1]!==void 0,q0t=bV||wV||xve||R0t||O0t;q0t&&(xV=function(e){var r=this,n=P0t(r),i=T0t(e),o=n.raw,l,f,d,v,x,b,A;if(o)return o.lastIndex=r.lastIndex,l=U_(xV,o,i),r.lastIndex=o.lastIndex,l;var P=n.groups,N=xve&&r.sticky,j=U_(I0t,r),D=r.source,F=0,U=i;if(N&&(j=k0t(j,"y",""),N0t(j,"g")===-1&&(j+="g"),U=_V(i,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&D0t(i,r.lastIndex-1)!==`
`)&&(D="(?: "+D+")",U=" "+U,F++),f=new RegExp("^(?:"+D+")",j)),wV&&(f=new RegExp("^"+D+"$(?!\\s)",j)),bV&&(d=r.lastIndex),v=U_(lR,N?f:r,U),N?v?(v.input=_V(v.input,F),v[0]=_V(v[0],F),v.index=r.lastIndex,r.lastIndex+=v[0].length):r.lastIndex=0:bV&&v&&(r.lastIndex=r.global?v.index+v[0].length:d),wV&&v&&v.length>1&&U_(L0t,v[0],f,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(v[x]=void 0)}),v&&P)for(v.groups=b=C0t(null),x=0;x<P.length;x++)A=P[x],b[A[0]]=v[A[1]];return v});bve.exports=xV});var fR=R(()=>{"use strict";p();var F0t=oe(),wve=cR();F0t({target:"RegExp",proto:!0,forced:/./.exec!==wve},{exec:wve})});var Tve=R(()=>{"use strict";p();var j0t=Ft(),z0t=sr(),U0t=hi(),B0t=oR(),V0t=yt(),Eve=j0t.RegExp,Sve=Eve.prototype,G0t=z0t&&V0t(function(){var t=!0;try{Eve(".","d")}catch(d){t=!1}var e={},r="",n=t?"dgimsy":"gimsy",i=function(d,v){Object.defineProperty(e,d,{get:function(){return r+=v,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};t&&(o.hasIndices="d");for(var l in o)i(l,o[l]);var f=Object.getOwnPropertyDescriptor(Sve,"flags").get.call(e);return f!==n||r!==n});G0t&&U0t(Sve,"flags",{configurable:!0,get:B0t})});var Ave=R(()=>{"use strict";p();var $0t=sr(),H0t=_E().MISSED_STICKY,W0t=pa(),Z0t=hi(),Y0t=Cn().get,Ive=RegExp.prototype,K0t=TypeError;$0t&&H0t&&Z0t(Ive,"sticky",{configurable:!0,get:function(){if(this!==Ive){if(W0t(this)==="RegExp")return!!Y0t(this).sticky;throw new K0t("Incompatible receiver, RegExp required")}}})});var Pve=R(()=>{"use strict";p();fR();var X0t=oe(),Mve=jt(),Q0t=jr(),Cve=Bt(),J0t=Mr(),ext=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},e.test("abc")===!0&&t}(),txt=/./.test;X0t({target:"RegExp",proto:!0,forced:!ext},{test:function(t){var e=Cve(this),r=J0t(t),n=e.exec;if(!Q0t(n))return Mve(txt,e,r);var i=Mve(n,e,r);return i===null?!1:(Cve(i),!0)}})});var Dve=R(()=>{"use strict";p();var rxt=mg().PROPER,nxt=Nn(),ixt=Bt(),Rve=Mr(),oxt=yt(),axt=j_(),EV="toString",Ove=RegExp.prototype,Lve=Ove[EV],sxt=oxt(function(){return Lve.call({source:"a",flags:"b"})!=="/a/b"}),lxt=rxt&&Lve.name!==EV;(sxt||lxt)&&nxt(Ove,EV,function(){var e=ixt(this),r=Rve(e.source),n=Rve(axt(e));return"/"+r+"/"+n},{unsafe:!0})});var Nve=R(()=>{"use strict";p();var uxt=J1(),cxt=B3();uxt("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},cxt)});var kve=R(()=>{"use strict";p();Nve()});var Qo=R((EMr,qve)=>{"use strict";p();var SV=ct(),hR=Set.prototype;qve.exports={Set,add:SV(hR.add),has:SV(hR.has),remove:SV(hR.delete),proto:hR}});var ga=R((TMr,Fve)=>{"use strict";p();var fxt=Qo().has;Fve.exports=function(t){return fxt(t),t}});var Th=R((AMr,jve)=>{"use strict";p();var hxt=jt();jve.exports=function(t,e,r){for(var n=r?t:t.iterator,i=t.next,o,l;!(o=hxt(i,n)).done;)if(l=e(o.value),l!==void 0)return l}});var js=R((CMr,Gve)=>{"use strict";p();var zve=ct(),pxt=Th(),Uve=Qo(),dxt=Uve.Set,Bve=Uve.proto,mxt=zve(Bve.forEach),Vve=zve(Bve.keys),gxt=Vve(new dxt).next;Gve.exports=function(t,e,r){return r?pxt({iterator:Vve(t),next:gxt},e):mxt(t,e)}});var pR=R((RMr,Hve)=>{"use strict";p();var $ve=Qo(),vxt=js(),yxt=$ve.Set,_xt=$ve.add;Hve.exports=function(t){var e=new yxt;return vxt(t,function(r){_xt(e,r)}),e}});var B_=R((LMr,Wve)=>{"use strict";p();var xxt=k1(),bxt=Qo();Wve.exports=xxt(bxt.proto,"size","get")||function(t){return t.size}});var Id=R((NMr,Jve)=>{"use strict";p();var Zve=xr(),Xve=Bt(),Yve=jt(),wxt=fi(),Ext=wi(),Kve="Invalid size",Sxt=RangeError,Txt=TypeError,Ixt=Math.max,Qve=function(t,e){this.set=t,this.size=Ixt(e,0),this.has=Zve(t.has),this.keys=Zve(t.keys)};Qve.prototype={getIterator:function(){return Ext(Xve(Yve(this.keys,this.set)))},includes:function(t){return Yve(this.has,this.set,t)}};Jve.exports=function(t){Xve(t);var e=+t.size;if(e!==e)throw new Txt(Kve);var r=wxt(e);if(r<0)throw new Sxt(Kve);return new Qve(t,r)}});var TV=R((qMr,rye)=>{"use strict";p();var Axt=ga(),tye=Qo(),Mxt=pR(),Cxt=B_(),Pxt=Id(),Rxt=js(),Oxt=Th(),Lxt=tye.has,eye=tye.remove;rye.exports=function(e){var r=Axt(this),n=Pxt(e),i=Mxt(r);return Cxt(r)<=n.size?Rxt(r,function(o){n.includes(o)&&eye(i,o)}):Oxt(n.getIterator(),function(o){Lxt(r,o)&&eye(i,o)}),i}});var Ad=R((jMr,oye)=>{"use strict";p();var Dxt=_r(),nye=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},iye=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};oye.exports=function(t,e){var r=Dxt("Set");try{new r()[t](nye(0));try{return new r()[t](nye(-1)),!1}catch(i){if(!e)return!0;try{return new r()[t](iye(-1/0)),!1}catch(o){var n=new r;return n.add(1),n.add(2),e(n[t](iye(1/0)))}}}catch(i){return!1}}});var IV=R(()=>{"use strict";p();var Nxt=oe(),kxt=TV(),qxt=Ad(),Fxt=!qxt("difference",function(t){return t.size===0});Nxt({target:"Set",proto:!0,real:!0,forced:Fxt},{difference:kxt})});var MV=R((GMr,sye)=>{"use strict";p();var jxt=ga(),AV=Qo(),zxt=B_(),Uxt=Id(),Bxt=js(),Vxt=Th(),Gxt=AV.Set,aye=AV.add,$xt=AV.has;sye.exports=function(e){var r=jxt(this),n=Uxt(e),i=new Gxt;return zxt(r)>n.size?Vxt(n.getIterator(),function(o){$xt(r,o)&&aye(i,o)}):Bxt(r,function(o){n.includes(o)&&aye(i,o)}),i}});var CV=R(()=>{"use strict";p();var Hxt=oe(),Wxt=yt(),Zxt=MV(),Yxt=Ad(),Kxt=!Yxt("intersection",function(t){return t.size===2&&t.has(1)&&t.has(2)})||Wxt(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});Hxt({target:"Set",proto:!0,real:!0,forced:Kxt},{intersection:Zxt})});var PV=R((YMr,lye)=>{"use strict";p();var Xxt=ga(),Qxt=Qo().has,Jxt=B_(),ebt=Id(),tbt=js(),rbt=Th(),nbt=Xo();lye.exports=function(e){var r=Xxt(this),n=ebt(e);if(Jxt(r)<=n.size)return tbt(r,function(o){if(n.includes(o))return!1},!0)!==!1;var i=n.getIterator();return rbt(i,function(o){if(Qxt(r,o))return nbt(i,"normal",!1)})!==!1}});var RV=R(()=>{"use strict";p();var ibt=oe(),obt=PV(),abt=Ad(),sbt=!abt("isDisjointFrom",function(t){return!t});ibt({target:"Set",proto:!0,real:!0,forced:sbt},{isDisjointFrom:obt})});var OV=R((eCr,uye)=>{"use strict";p();var lbt=ga(),ubt=B_(),cbt=js(),fbt=Id();uye.exports=function(e){var r=lbt(this),n=fbt(e);return ubt(r)>n.size?!1:cbt(r,function(i){if(!n.includes(i))return!1},!0)!==!1}});var LV=R(()=>{"use strict";p();var hbt=oe(),pbt=OV(),dbt=Ad(),mbt=!dbt("isSubsetOf",function(t){return t});hbt({target:"Set",proto:!0,real:!0,forced:mbt},{isSubsetOf:pbt})});var DV=R((oCr,cye)=>{"use strict";p();var gbt=ga(),vbt=Qo().has,ybt=B_(),_bt=Id(),xbt=Th(),bbt=Xo();cye.exports=function(e){var r=gbt(this),n=_bt(e);if(ybt(r)<n.size)return!1;var i=n.getIterator();return xbt(i,function(o){if(!vbt(r,o))return bbt(i,"normal",!1)})!==!1}});var NV=R(()=>{"use strict";p();var wbt=oe(),Ebt=DV(),Sbt=Ad(),Tbt=!Sbt("isSupersetOf",function(t){return!t});wbt({target:"Set",proto:!0,real:!0,forced:Tbt},{isSupersetOf:Ebt})});var qV=R((cCr,fye)=>{"use strict";p();var Ibt=ga(),kV=Qo(),Abt=pR(),Mbt=Id(),Cbt=Th(),Pbt=kV.add,Rbt=kV.has,Obt=kV.remove;fye.exports=function(e){var r=Ibt(this),n=Mbt(e).getIterator(),i=Abt(r);return Cbt(n,function(o){Rbt(r,o)?Obt(i,o):Pbt(i,o)}),i}});var FV=R(()=>{"use strict";p();var Lbt=oe(),Dbt=qV(),Nbt=Ad();Lbt({target:"Set",proto:!0,real:!0,forced:!Nbt("symmetricDifference")},{symmetricDifference:Dbt})});var jV=R((mCr,hye)=>{"use strict";p();var kbt=ga(),qbt=Qo().add,Fbt=pR(),jbt=Id(),zbt=Th();hye.exports=function(e){var r=kbt(this),n=jbt(e).getIterator(),i=Fbt(r);return zbt(n,function(o){qbt(i,o)}),i}});var zV=R(()=>{"use strict";p();var Ubt=oe(),Bbt=jV(),Vbt=Ad();Ubt({target:"Set",proto:!0,real:!0,forced:!Vbt("union")},{union:Bbt})});var pye=R(()=>{"use strict";p();var Gbt=oe(),$bt=ct(),Hbt=oi(),Wbt=fi(),Zbt=Mr(),Ybt=yt(),Kbt=$bt("".charAt),Xbt=Ybt(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});Gbt({target:"String",proto:!0,forced:Xbt},{at:function(e){var r=Zbt(Hbt(this)),n=r.length,i=Wbt(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:Kbt(r,o)}})});var Dg=R((ECr,gye)=>{"use strict";p();var UV=ct(),Qbt=fi(),Jbt=Mr(),ewt=oi(),twt=UV("".charAt),dye=UV("".charCodeAt),rwt=UV("".slice),mye=function(t){return function(e,r){var n=Jbt(ewt(e)),i=Qbt(r),o=n.length,l,f;return i<0||i>=o?t?"":void 0:(l=dye(n,i),l<55296||l>56319||i+1===o||(f=dye(n,i+1))<56320||f>57343?t?twt(n,i):l:t?rwt(n,i,i+2):(l-55296<<10)+(f-56320)+65536)}};gye.exports={codeAt:mye(!1),charAt:mye(!0)}});var vye=R(()=>{"use strict";p();var nwt=oe(),iwt=Dg().codeAt;nwt({target:"String",proto:!0},{codePointAt:function(e){return iwt(this,e)}})});var dR=R((MCr,yye)=>{"use strict";p();var owt=yE(),awt=TypeError;yye.exports=function(t){if(owt(t))throw new awt("The method doesn't accept regular expressions");return t}});var mR=R((PCr,_ye)=>{"use strict";p();var swt=mr(),lwt=swt("match");_ye.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[lwt]=!1,"/./"[t](e)}catch(n){}}return!1}});var wye=R(()=>{"use strict";p();var uwt=oe(),cwt=od(),fwt=Yo().f,hwt=Ns(),xye=Mr(),pwt=dR(),dwt=oi(),mwt=mR(),gwt=pn(),vwt=cwt("".slice),ywt=Math.min,bye=mwt("endsWith"),_wt=!gwt&&!bye&&!!function(){var t=fwt(String.prototype,"endsWith");return t&&!t.writable}();uwt({target:"String",proto:!0,forced:!_wt&&!bye},{endsWith:function(e){var r=xye(dwt(this));pwt(e);var n=arguments.length>1?arguments[1]:void 0,i=r.length,o=n===void 0?i:ywt(hwt(n),i),l=xye(e);return vwt(r,o-l.length,o)===l}})});var BV=R(()=>{"use strict";p();var xwt=oe(),bwt=ct(),wwt=ec(),Ewt=RangeError,Eye=String.fromCharCode,Sye=String.fromCodePoint,Swt=bwt([].join),Twt=!!Sye&&Sye.length!==1;xwt({target:"String",stat:!0,arity:1,forced:Twt},{fromCodePoint:function(e){for(var r=[],n=arguments.length,i=0,o;n>i;){if(o=+arguments[i++],wwt(o,1114111)!==o)throw new Ewt(o+" is not a valid code point");r[i]=o<65536?Eye(o):Eye(((o-=65536)>>10)+55296,o%1024+56320)}return Swt(r,"")}})});var Iye=R(()=>{"use strict";p();var Iwt=oe(),Awt=ct(),Mwt=dR(),Cwt=oi(),Tye=Mr(),Pwt=mR(),Rwt=Awt("".indexOf);Iwt({target:"String",proto:!0,forced:!Pwt("includes")},{includes:function(e){return!!~Rwt(Tye(Cwt(this)),Tye(Mwt(e)),arguments.length>1?arguments[1]:void 0)}})});var VV=R(()=>{"use strict";p();var Owt=oe(),Lwt=ct(),Dwt=oi(),Nwt=Mr(),Aye=Lwt("".charCodeAt);Owt({target:"String",proto:!0},{isWellFormed:function(){for(var e=Nwt(Dwt(this)),r=e.length,n=0;n<r;n++){var i=Aye(e,n);if((i&63488)===55296&&(i>=56320||++n>=r||(Aye(e,n)&64512)!==56320))return!1}return!0}})});var GV=R(()=>{"use strict";p();var kwt=Dg().charAt,qwt=Mr(),Cye=Cn(),Fwt=dP(),Mye=ko(),Pye="String Iterator",jwt=Cye.set,zwt=Cye.getterFor(Pye);Fwt(String,"String",function(t){jwt(this,{type:Pye,string:qwt(t),index:0})},function(){var e=zwt(this),r=e.string,n=e.index,i;return n>=r.length?Mye(void 0,!0):(i=kwt(r,n),e.index+=i.length,Mye(i,!1))})});var EE=R((WCr,Nye)=>{"use strict";p();fR();var Rye=jt(),Oye=Nn(),Uwt=cR(),Lye=yt(),Dye=mr(),Bwt=xo(),Vwt=Dye("species"),$V=RegExp.prototype;Nye.exports=function(t,e,r,n){var i=Dye(t),o=!Lye(function(){var v={};return v[i]=function(){return 7},""[t](v)!==7}),l=o&&!Lye(function(){var v=!1,x=/a/;return t==="split"&&(x={},x.constructor={},x.constructor[Vwt]=function(){return x},x.flags="",x[i]=/./[i]),x.exec=function(){return v=!0,null},x[i](""),!v});if(!o||!l||r){var f=/./[i],d=e(i,""[t],function(v,x,b,A,P){var N=x.exec;return N===Uwt||N===$V.exec?o&&!P?{done:!0,value:Rye(f,x,b,A)}:{done:!0,value:Rye(v,b,x,A)}:{done:!1}});Oye(String.prototype,t,d[0]),Oye($V,i,d[1])}n&&Bwt($V[i],"sham",!0)}});var SE=R((YCr,kye)=>{"use strict";p();var Gwt=Dg().charAt;kye.exports=function(t,e,r){return e+(r?Gwt(t,e).length:1)}});var V_=R((XCr,Fye)=>{"use strict";p();var qye=jt(),$wt=Bt(),Hwt=jr(),Wwt=pa(),Zwt=cR(),Ywt=TypeError;Fye.exports=function(t,e){var r=t.exec;if(Hwt(r)){var n=qye(r,t,e);return n!==null&&$wt(n),n}if(Wwt(t)==="RegExp")return qye(Zwt,t,e);throw new Ywt("RegExp#exec called on incompatible receiver")}});var zye=R(()=>{"use strict";p();var Kwt=jt(),Xwt=EE(),Qwt=Bt(),Jwt=hr(),e1t=Ns(),HV=Mr(),t1t=oi(),r1t=Xi(),n1t=SE(),jye=V_();Xwt("match",function(t,e,r){return[function(i){var o=t1t(this),l=Jwt(i)?r1t(i,t):void 0;return l?Kwt(l,i,o):new RegExp(i)[t](HV(o))},function(n){var i=Qwt(this),o=HV(n),l=r(e,i,o);if(l.done)return l.value;if(!i.global)return jye(i,o);var f=i.unicode;i.lastIndex=0;for(var d=[],v=0,x;(x=jye(i,o))!==null;){var b=HV(x[0]);d[v]=b,b===""&&(i.lastIndex=n1t(o,e1t(i.lastIndex),f)),v++}return v===0?null:d}]})});var XV=R(()=>{"use strict";p();var i1t=oe(),Uye=jt(),Gye=od(),o1t=hd(),gR=ko(),Bye=oi(),$ye=Ns(),TE=Mr(),a1t=Bt(),s1t=hr(),l1t=pa(),u1t=yE(),Hye=j_(),c1t=Xi(),f1t=Nn(),h1t=yt(),p1t=mr(),d1t=cE(),m1t=SE(),g1t=V_(),Wye=Cn(),ZV=pn(),vR=p1t("matchAll"),Zye="RegExp String",Yye=Zye+" Iterator",v1t=Wye.set,y1t=Wye.getterFor(Yye),Vye=RegExp.prototype,_1t=TypeError,YV=Gye("".indexOf),yR=Gye("".matchAll),WV=!!yR&&!h1t(function(){yR("a",/./)}),x1t=o1t(function(e,r,n,i){v1t(this,{type:Yye,regexp:e,string:r,global:n,unicode:i,done:!1})},Zye,function(){var e=y1t(this);if(e.done)return gR(void 0,!0);var r=e.regexp,n=e.string,i=g1t(r,n);return i===null?(e.done=!0,gR(void 0,!0)):e.global?(TE(i[0])===""&&(r.lastIndex=m1t(n,$ye(r.lastIndex),e.unicode)),gR(i,!1)):(e.done=!0,gR(i,!1))}),KV=function(t){var e=a1t(this),r=TE(t),n=d1t(e,RegExp),i=TE(Hye(e)),o,l,f;return o=new n(n===RegExp?e.source:e,i),l=!!~YV(i,"g"),f=!!~YV(i,"u"),o.lastIndex=$ye(e.lastIndex),new x1t(o,r,l,f)};i1t({target:"String",proto:!0,forced:WV},{matchAll:function(e){var r=Bye(this),n,i,o,l;if(s1t(e)){if(u1t(e)&&(n=TE(Bye(Hye(e))),!~YV(n,"g")))throw new _1t("`.matchAll` does not allow non-global regexes");if(WV)return yR(r,e);if(o=c1t(e,vR),o===void 0&&ZV&&l1t(e)==="RegExp"&&(o=KV),o)return Uye(o,e,r)}else if(WV)return yR(r,e);return i=TE(r),l=new RegExp(e,"g"),ZV?Uye(KV,l,i):l[vR](i)}});ZV||vR in Vye||f1t(Vye,vR,KV)});var QV=R((oPr,Kye)=>{"use strict";p();var b1t=Ku();Kye.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(b1t)});var Xye=R(()=>{"use strict";p();var w1t=oe(),E1t=X1().end,S1t=QV();w1t({target:"String",proto:!0,forced:S1t},{padEnd:function(e){return E1t(this,e,arguments.length>1?arguments[1]:void 0)}})});var Qye=R(()=>{"use strict";p();var T1t=oe(),I1t=X1().start,A1t=QV();T1t({target:"String",proto:!0,forced:A1t},{padStart:function(e){return I1t(this,e,arguments.length>1?arguments[1]:void 0)}})});var r_e=R(()=>{"use strict";p();var M1t=oe(),t_e=ct(),C1t=_o(),P1t=Yr(),Jye=Mr(),R1t=sn(),e_e=t_e([].push),O1t=t_e([].join);M1t({target:"String",stat:!0},{raw:function(e){var r=C1t(P1t(e).raw),n=R1t(r);if(!n)return"";for(var i=arguments.length,o=[],l=0;;){if(e_e(o,Jye(r[l++])),l===n)return O1t(o,"");l<i&&e_e(o,Jye(arguments[l]))}}})});var n_e=R(()=>{"use strict";p();var L1t=oe(),D1t=K1();L1t({target:"String",proto:!0},{repeat:D1t})});var rG=R((_Pr,i_e)=>{"use strict";p();var tG=ct(),N1t=Yr(),k1t=Math.floor,JV=tG("".charAt),q1t=tG("".replace),eG=tG("".slice),F1t=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,j1t=/\$([$&'`]|\d{1,2})/g;i_e.exports=function(t,e,r,n,i,o){var l=r+t.length,f=n.length,d=j1t;return i!==void 0&&(i=N1t(i),d=F1t),q1t(o,d,function(v,x){var b;switch(JV(x,0)){case"$":return"$";case"&":return t;case"`":return eG(e,0,r);case"'":return eG(e,l);case"<":b=i[eG(x,1,-1)];break;default:var A=+x;if(A===0)return v;if(A>f){var P=k1t(A/10);return P===0?v:P<=f?n[P-1]===void 0?JV(x,1):n[P-1]+JV(x,1):v}b=n[A-1]}return b===void 0?"":b})}});var u_e=R(()=>{"use strict";p();var z1t=ma(),o_e=jt(),_R=ct(),U1t=EE(),B1t=yt(),V1t=Bt(),G1t=jr(),$1t=hr(),H1t=fi(),W1t=Ns(),G_=Mr(),Z1t=oi(),Y1t=SE(),K1t=Xi(),X1t=rG(),Q1t=V_(),J1t=mr(),iG=J1t("replace"),eEt=Math.max,tEt=Math.min,rEt=_R([].concat),nG=_R([].push),a_e=_R("".indexOf),s_e=_R("".slice),nEt=function(t){return t===void 0?t:String(t)},iEt=function(){return"a".replace(/./,"$0")==="$0"}(),l_e=function(){return /./[iG]?/./[iG]("a","$0")==="":!1}(),oEt=!B1t(function(){var t=/./;return t.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(t,"$<a>")!=="7"});U1t("replace",function(t,e,r){var n=l_e?"$":"$0";return[function(o,l){var f=Z1t(this),d=$1t(o)?K1t(o,iG):void 0;return d?o_e(d,o,f,l):o_e(e,G_(f),o,l)},function(i,o){var l=V1t(this),f=G_(i);if(typeof o=="string"&&a_e(o,n)===-1&&a_e(o,"$<")===-1){var d=r(e,l,f,o);if(d.done)return d.value}var v=G1t(o);v||(o=G_(o));var x=l.global,b;x&&(b=l.unicode,l.lastIndex=0);for(var A=[],P;P=Q1t(l,f),!(P===null||(nG(A,P),!x));){var N=G_(P[0]);N===""&&(l.lastIndex=Y1t(f,W1t(l.lastIndex),b))}for(var j="",D=0,F=0;F<A.length;F++){P=A[F];for(var U=G_(P[0]),$=eEt(tEt(H1t(P.index),f.length),0),Z=[],ie,ne=1;ne<P.length;ne++)nG(Z,nEt(P[ne]));var ae=P.groups;if(v){var de=rEt([U],Z,$,f);ae!==void 0&&nG(de,ae),ie=G_(z1t(o,void 0,de))}else ie=X1t(U,f,$,Z,ae,o);$>=D&&(j+=s_e(f,D,$)+ie,D=$+U.length)}return j+s_e(f,D)}]},!oEt||!iEt||l_e)});var sG=R(()=>{"use strict";p();var aEt=oe(),sEt=jt(),aG=ct(),c_e=oi(),lEt=jr(),uEt=hr(),cEt=yE(),$_=Mr(),fEt=Xi(),hEt=j_(),pEt=rG(),dEt=mr(),mEt=pn(),gEt=dEt("replace"),vEt=TypeError,oG=aG("".indexOf),yEt=aG("".replace),f_e=aG("".slice),_Et=Math.max;aEt({target:"String",proto:!0},{replaceAll:function(e,r){var n=c_e(this),i,o,l,f,d,v,x,b,A,P,N=0,j="";if(uEt(e)){if(i=cEt(e),i&&(o=$_(c_e(hEt(e))),!~oG(o,"g")))throw new vEt("`.replaceAll` does not allow non-global regexes");if(l=fEt(e,gEt),l)return sEt(l,e,n,r);if(mEt&&i)return yEt($_(n),e,r)}for(f=$_(n),d=$_(e),v=lEt(r),v||(r=$_(r)),x=d.length,b=_Et(1,x),A=oG(f,d);A!==-1;)P=v?$_(r(d,A,f)):pEt(d,f,A,[],void 0,r),j+=f_e(f,N,A)+P,N=A+x,A=A+b>f.length?-1:oG(f,d,A+b);return N<f.length&&(j+=f_e(f,N)),j}})});var d_e=R(()=>{"use strict";p();var xEt=jt(),bEt=EE(),wEt=Bt(),EEt=hr(),SEt=oi(),h_e=YP(),p_e=Mr(),TEt=Xi(),IEt=V_();bEt("search",function(t,e,r){return[function(i){var o=SEt(this),l=EEt(i)?TEt(i,t):void 0;return l?xEt(l,i,o):new RegExp(i)[t](p_e(o))},function(n){var i=wEt(this),o=p_e(n),l=r(e,i,o);if(l.done)return l.value;var f=i.lastIndex;h_e(f,0)||(i.lastIndex=0);var d=IEt(i,o);return h_e(i.lastIndex,f)||(i.lastIndex=f),d===null?-1:d.index}]})});var x_e=R(()=>{"use strict";p();var lG=jt(),y_e=ct(),AEt=EE(),MEt=Bt(),CEt=hr(),PEt=oi(),REt=cE(),OEt=SE(),LEt=Ns(),m_e=Mr(),DEt=Xi(),g_e=V_(),NEt=_E(),kEt=yt(),H_=NEt.UNSUPPORTED_Y,qEt=4294967295,FEt=Math.min,uG=y_e([].push),cG=y_e("".slice),jEt=!kEt(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),v_e="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;AEt("split",function(t,e,r){var n="0".split(void 0,0).length?function(i,o){return i===void 0&&o===0?[]:lG(e,this,i,o)}:e;return[function(o,l){var f=PEt(this),d=CEt(o)?DEt(o,t):void 0;return d?lG(d,o,f,l):lG(n,m_e(f),o,l)},function(i,o){var l=MEt(this),f=m_e(i);if(!v_e){var d=r(n,l,f,o,n!==e);if(d.done)return d.value}var v=REt(l,RegExp),x=l.unicode,b=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(H_?"g":"y"),A=new v(H_?"^(?:"+l.source+")":l,b),P=o===void 0?qEt:o>>>0;if(P===0)return[];if(f.length===0)return g_e(A,f)===null?[f]:[];for(var N=0,j=0,D=[];j<f.length;){A.lastIndex=H_?0:j;var F=g_e(A,H_?cG(f,j):f),U;if(F===null||(U=FEt(LEt(A.lastIndex+(H_?j:0)),f.length))===N)j=OEt(f,j,x);else{if(uG(D,cG(f,N,j)),D.length===P)return D;for(var $=1;$<=F.length-1;$++)if(uG(D,F[$]),D.length===P)return D;j=N=U}}return uG(D,cG(f,N)),D}]},v_e||!jEt,H_)});var E_e=R(()=>{"use strict";p();var zEt=oe(),UEt=od(),BEt=Yo().f,VEt=Ns(),b_e=Mr(),GEt=dR(),$Et=oi(),HEt=mR(),WEt=pn(),ZEt=UEt("".slice),YEt=Math.min,w_e=HEt("startsWith"),KEt=!WEt&&!w_e&&!!function(){var t=BEt(String.prototype,"startsWith");return t&&!t.writable}();zEt({target:"String",proto:!0,forced:!KEt&&!w_e},{startsWith:function(e){var r=b_e($Et(this));GEt(e);var n=VEt(YEt(arguments.length>1?arguments[1]:void 0,r.length)),i=b_e(e);return ZEt(r,n,n+i.length)===i}})});var T_e=R(()=>{"use strict";p();var XEt=oe(),QEt=ct(),JEt=oi(),S_e=fi(),eSt=Mr(),tSt=QEt("".slice),rSt=Math.max,nSt=Math.min,iSt=!"".substr||"ab".substr(-1)!=="b";XEt({target:"String",proto:!0,forced:iSt},{substr:function(e,r){var n=eSt(JEt(this)),i=n.length,o=S_e(e),l,f;return o===1/0&&(o=0),o<0&&(o=rSt(i+o,0)),l=r===void 0?i:S_e(r),l<=0||l===1/0?"":(f=nSt(o+l,i),o>=f?"":tSt(n,o,f))}})});var dG=R(()=>{"use strict";p();var oSt=oe(),M_e=jt(),pG=ct(),aSt=oi(),sSt=Mr(),lSt=yt(),uSt=Array,fG=pG("".charAt),I_e=pG("".charCodeAt),cSt=pG([].join),hG="".toWellFormed,fSt="\uFFFD",A_e=hG&&lSt(function(){return M_e(hG,1)!=="1"});oSt({target:"String",proto:!0,forced:A_e},{toWellFormed:function(){var e=sSt(aSt(this));if(A_e)return M_e(hG,e);for(var r=e.length,n=uSt(r),i=0;i<r;i++){var o=I_e(e,i);(o&63488)!==55296?n[i]=fG(e,i):o>=56320||i+1>=r||(I_e(e,i+1)&64512)!==56320?n[i]=fSt:(n[i]=fG(e,i),n[++i]=fG(e,i))}return cSt(n,"")}})});var xR=R((BPr,R_e)=>{"use strict";p();var hSt=mg().PROPER,pSt=yt(),C_e=Mg(),P_e="\u200B\x85\u180E";R_e.exports=function(t){return pSt(function(){return!!C_e[t]()||P_e[t]()!==P_e||hSt&&C_e[t].name!==t})}});var O_e=R(()=>{"use strict";p();var dSt=oe(),mSt=Cg().trim,gSt=xR();dSt({target:"String",proto:!0,forced:gSt("trim")},{trim:function(){return mSt(this)}})});var mG=R((WPr,L_e)=>{"use strict";p();var vSt=Cg().end,ySt=xR();L_e.exports=ySt("trimEnd")?function(){return vSt(this)}:"".trimEnd});var N_e=R(()=>{"use strict";p();var _St=oe(),D_e=mG();_St({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==D_e},{trimRight:D_e})});var q_e=R(()=>{"use strict";p();N_e();var xSt=oe(),k_e=mG();xSt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==k_e},{trimEnd:k_e})});var gG=R((tRr,F_e)=>{"use strict";p();var bSt=Cg().start,wSt=xR();F_e.exports=wSt("trimStart")?function(){return bSt(this)}:"".trimStart});var z_e=R(()=>{"use strict";p();var ESt=oe(),j_e=gG();ESt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==j_e},{trimLeft:j_e})});var B_e=R(()=>{"use strict";p();z_e();var SSt=oe(),U_e=gG();SSt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==U_e},{trimStart:U_e})});var zs=R((uRr,G_e)=>{"use strict";p();var TSt=ct(),ISt=oi(),V_e=Mr(),ASt=/"/g,MSt=TSt("".replace);G_e.exports=function(t,e,r,n){var i=V_e(ISt(t)),o="<"+e;return r!==""&&(o+=" "+r+"=\""+MSt(V_e(n),ASt,"&quot;")+"\""),o+">"+i+"</"+e+">"}});var Us=R((fRr,$_e)=>{"use strict";p();var CSt=yt();$_e.exports=function(t){return CSt(function(){var e=""[t]("\"");return e!==e.toLowerCase()||e.split("\"").length>3})}});var H_e=R(()=>{"use strict";p();var PSt=oe(),RSt=zs(),OSt=Us();PSt({target:"String",proto:!0,forced:OSt("anchor")},{anchor:function(e){return RSt(this,"a","name",e)}})});var W_e=R(()=>{"use strict";p();var LSt=oe(),DSt=zs(),NSt=Us();LSt({target:"String",proto:!0,forced:NSt("big")},{big:function(){return DSt(this,"big","","")}})});var Z_e=R(()=>{"use strict";p();var kSt=oe(),qSt=zs(),FSt=Us();kSt({target:"String",proto:!0,forced:FSt("blink")},{blink:function(){return qSt(this,"blink","","")}})});var Y_e=R(()=>{"use strict";p();var jSt=oe(),zSt=zs(),USt=Us();jSt({target:"String",proto:!0,forced:USt("bold")},{bold:function(){return zSt(this,"b","","")}})});var K_e=R(()=>{"use strict";p();var BSt=oe(),VSt=zs(),GSt=Us();BSt({target:"String",proto:!0,forced:GSt("fixed")},{fixed:function(){return VSt(this,"tt","","")}})});var X_e=R(()=>{"use strict";p();var $St=oe(),HSt=zs(),WSt=Us();$St({target:"String",proto:!0,forced:WSt("fontcolor")},{fontcolor:function(e){return HSt(this,"font","color",e)}})});var Q_e=R(()=>{"use strict";p();var ZSt=oe(),YSt=zs(),KSt=Us();ZSt({target:"String",proto:!0,forced:KSt("fontsize")},{fontsize:function(e){return YSt(this,"font","size",e)}})});var J_e=R(()=>{"use strict";p();var XSt=oe(),QSt=zs(),JSt=Us();XSt({target:"String",proto:!0,forced:JSt("italics")},{italics:function(){return QSt(this,"i","","")}})});var e0e=R(()=>{"use strict";p();var eTt=oe(),tTt=zs(),rTt=Us();eTt({target:"String",proto:!0,forced:rTt("link")},{link:function(e){return tTt(this,"a","href",e)}})});var t0e=R(()=>{"use strict";p();var nTt=oe(),iTt=zs(),oTt=Us();nTt({target:"String",proto:!0,forced:oTt("small")},{small:function(){return iTt(this,"small","","")}})});var r0e=R(()=>{"use strict";p();var aTt=oe(),sTt=zs(),lTt=Us();aTt({target:"String",proto:!0,forced:lTt("strike")},{strike:function(){return sTt(this,"strike","","")}})});var n0e=R(()=>{"use strict";p();var uTt=oe(),cTt=zs(),fTt=Us();uTt({target:"String",proto:!0,forced:fTt("sub")},{sub:function(){return cTt(this,"sub","","")}})});var i0e=R(()=>{"use strict";p();var hTt=oe(),pTt=zs(),dTt=Us();hTt({target:"String",proto:!0,forced:dTt("sup")},{sup:function(){return pTt(this,"sup","","")}})});var bR=R((QRr,a0e)=>{"use strict";p();var o0e=Ft(),vG=yt(),mTt=j1(),gTt=Hr().NATIVE_ARRAY_BUFFER_VIEWS,vTt=o0e.ArrayBuffer,Ng=o0e.Int8Array;a0e.exports=!gTt||!vG(function(){Ng(1)})||!vG(function(){new Ng(-1)})||!mTt(function(t){new Ng,new Ng(null),new Ng(1.5),new Ng(t)},!0)||vG(function(){return new Ng(new vTt(2),1,void 0).length!==1})});var yG=R((eOr,s0e)=>{"use strict";p();var yTt=A_(),_Tt=RangeError;s0e.exports=function(t,e){var r=yTt(t);if(r%e)throw new _Tt("Wrong offset");return r}});var _G=R((rOr,l0e)=>{"use strict";p();var xTt=Math.round;l0e.exports=function(t){var e=xTt(t);return e<0?0:e>255?255:e&255}});var wR=R((iOr,u0e)=>{"use strict";p();var bTt=ss();u0e.exports=function(t){var e=bTt(t);return e==="BigInt64Array"||e==="BigUint64Array"}});var IE=R((aOr,c0e)=>{"use strict";p();var wTt=b1(),ETt=TypeError;c0e.exports=function(t){var e=wTt(t,"number");if(typeof e=="number")throw new ETt("Can't convert number to bigint");return BigInt(e)}});var xG=R((lOr,f0e)=>{"use strict";p();var STt=Hn(),TTt=jt(),ITt=uE(),ATt=Yr(),MTt=sn(),CTt=ud(),PTt=Xc(),RTt=aP(),OTt=wR(),LTt=Hr().aTypedArrayConstructor,DTt=IE();f0e.exports=function(e){var r=ITt(this),n=ATt(e),i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0,f=PTt(n),d,v,x,b,A,P,N,j;if(f&&!RTt(f))for(N=CTt(n,f),j=N.next,n=[];!(P=TTt(j,N)).done;)n.push(P.value);for(l&&i>2&&(o=STt(o,arguments[2])),v=MTt(n),x=new(LTt(r))(v),b=OTt(x),d=0;v>d;d++)A=l?o(n[d],d):n[d],x[d]=b?DTt(A):+A;return x}});var nf=R((cOr,AG)=>{"use strict";p();var h0e=oe(),E0e=Ft(),p0e=jt(),NTt=sr(),kTt=bR(),PE=Hr(),S0e=Y1(),d0e=ka(),qTt=Ls(),AE=xo(),FTt=HP(),jTt=Ns(),m0e=__(),bG=yG(),zTt=_G(),T0e=Yc(),ME=Br(),UTt=ss(),SG=hr(),BTt=ph(),VTt=Qi(),GTt=da(),ER=eu(),$Tt=id().f,g0e=xG(),HTt=Ji().forEach,WTt=dd(),ZTt=hi(),I0e=ei(),A0e=Yo(),v0e=yh(),MG=Cn(),YTt=ld(),TG=MG.get,KTt=MG.set,XTt=MG.enforce,M0e=I0e.f,QTt=A0e.f,wG=E0e.RangeError,C0e=S0e.ArrayBuffer,JTt=C0e.prototype,eIt=S0e.DataView,SR=PE.NATIVE_ARRAY_BUFFER_VIEWS,y0e=PE.TYPED_ARRAY_TAG,_0e=PE.TypedArray,CE=PE.TypedArrayPrototype,IG=PE.isTypedArray,TR="BYTES_PER_ELEMENT",EG="Wrong length",IR=function(t,e){ZTt(t,e,{configurable:!0,get:function(){return TG(this)[e]}})},x0e=function(t){var e;return GTt(JTt,t)||(e=UTt(t))==="ArrayBuffer"||e==="SharedArrayBuffer"},P0e=function(t,e){return IG(t)&&!BTt(e)&&e in t&&FTt(+e)&&e>=0},b0e=function(e,r){return r=T0e(r),P0e(e,r)?qTt(2,e[r]):QTt(e,r)},w0e=function(e,r,n){return r=T0e(r),P0e(e,r)&&SG(n)&&ME(n,"value")&&!ME(n,"get")&&!ME(n,"set")&&!n.configurable&&(!ME(n,"writable")||n.writable)&&(!ME(n,"enumerable")||n.enumerable)?(e[r]=n.value,e):M0e(e,r,n)};NTt?(SR||(A0e.f=b0e,I0e.f=w0e,IR(CE,"buffer"),IR(CE,"byteOffset"),IR(CE,"byteLength"),IR(CE,"length")),h0e({target:"Object",stat:!0,forced:!SR},{getOwnPropertyDescriptor:b0e,defineProperty:w0e}),AG.exports=function(t,e,r){var n=t.match(/\d+/)[0]/8,i=t+(r?"Clamped":"")+"Array",o="get"+t,l="set"+t,f=E0e[i],d=f,v=d&&d.prototype,x={},b=function(j,D){var F=TG(j);return F.view[o](D*n+F.byteOffset,!0)},A=function(j,D,F){var U=TG(j);U.view[l](D*n+U.byteOffset,r?zTt(F):F,!0)},P=function(j,D){M0e(j,D,{get:function(){return b(this,D)},set:function(F){return A(this,D,F)},enumerable:!0})};SR?kTt&&(d=e(function(j,D,F,U){return d0e(j,v),YTt(function(){return SG(D)?x0e(D)?U!==void 0?new f(D,bG(F,n),U):F!==void 0?new f(D,bG(F,n)):new f(D):IG(D)?v0e(d,D):p0e(g0e,d,D):new f(m0e(D))}(),j,d)}),ER&&ER(d,_0e),HTt($Tt(f),function(j){j in d||AE(d,j,f[j])}),d.prototype=v):(d=e(function(j,D,F,U){d0e(j,v);var $=0,Z=0,ie,ne,ae;if(!SG(D))ae=m0e(D),ne=ae*n,ie=new C0e(ne);else if(x0e(D)){ie=D,Z=bG(F,n);var de=D.byteLength;if(U===void 0){if(de%n)throw new wG(EG);if(ne=de-Z,ne<0)throw new wG(EG)}else if(ne=jTt(U)*n,ne+Z>de)throw new wG(EG);ae=ne/n}else return IG(D)?v0e(d,D):p0e(g0e,d,D);for(KTt(j,{buffer:ie,byteOffset:Z,byteLength:ne,length:ae,view:new eIt(ie)});$<ae;)P(j,$++)}),ER&&ER(d,_0e),v=d.prototype=VTt(CE)),v.constructor!==d&&AE(v,"constructor",d),XTt(v).TypedArrayConstructor=d,y0e&&AE(v,y0e,i);var N=d!==f;x[i]=d,h0e({global:!0,constructor:!0,forced:N,sham:!SR},x),TR in d||AE(d,TR,n),TR in v||AE(v,TR,n),WTt(i)}):AG.exports=function(){}});var R0e=R(()=>{"use strict";p();var tIt=nf();tIt("Float32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var O0e=R(()=>{"use strict";p();var rIt=nf();rIt("Float64",function(t){return function(r,n,i){return t(this,r,n,i)}})});var L0e=R(()=>{"use strict";p();var nIt=nf();nIt("Int8",function(t){return function(r,n,i){return t(this,r,n,i)}})});var D0e=R(()=>{"use strict";p();var iIt=nf();iIt("Int16",function(t){return function(r,n,i){return t(this,r,n,i)}})});var N0e=R(()=>{"use strict";p();var oIt=nf();oIt("Int32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var k0e=R(()=>{"use strict";p();var aIt=nf();aIt("Uint8",function(t){return function(r,n,i){return t(this,r,n,i)}})});var q0e=R(()=>{"use strict";p();var sIt=nf();sIt("Uint8",function(t){return function(r,n,i){return t(this,r,n,i)}},!0)});var F0e=R(()=>{"use strict";p();var lIt=nf();lIt("Uint16",function(t){return function(r,n,i){return t(this,r,n,i)}})});var j0e=R(()=>{"use strict";p();var uIt=nf();uIt("Uint32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var CG=R(()=>{"use strict";p();var z0e=Hr(),cIt=sn(),fIt=fi(),hIt=z0e.aTypedArray,pIt=z0e.exportTypedArrayMethod;pIt("at",function(e){var r=hIt(this),n=cIt(r),i=fIt(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:r[o]})});var B0e=R(()=>{"use strict";p();var dIt=ct(),U0e=Hr(),mIt=RU(),gIt=dIt(mIt),vIt=U0e.aTypedArray,yIt=U0e.exportTypedArrayMethod;yIt("copyWithin",function(e,r){return gIt(vIt(this),e,r,arguments.length>2?arguments[2]:void 0)})});var G0e=R(()=>{"use strict";p();var V0e=Hr(),_It=Ji().every,xIt=V0e.aTypedArray,bIt=V0e.exportTypedArrayMethod;bIt("every",function(e){return _It(xIt(this),e,arguments.length>1?arguments[1]:void 0)})});var H0e=R(()=>{"use strict";p();var $0e=Hr(),wIt=cP(),EIt=IE(),SIt=ss(),TIt=jt(),IIt=ct(),AIt=yt(),MIt=$0e.aTypedArray,CIt=$0e.exportTypedArrayMethod,PIt=IIt("".slice),RIt=AIt(function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),t!==1});CIt("fill",function(e){var r=arguments.length;MIt(this);var n=PIt(SIt(this),0,3)==="Big"?EIt(e):+e;return TIt(wIt,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},RIt)});var AR=R((XOr,W0e)=>{"use strict";p();var OIt=yh(),LIt=Hr().getTypedArrayConstructor;W0e.exports=function(t,e){return OIt(LIt(t),e)}});var Y0e=R(()=>{"use strict";p();var Z0e=Hr(),DIt=Ji().filter,NIt=AR(),kIt=Z0e.aTypedArray,qIt=Z0e.exportTypedArrayMethod;qIt("filter",function(e){var r=DIt(kIt(this),e,arguments.length>1?arguments[1]:void 0);return NIt(this,r)})});var X0e=R(()=>{"use strict";p();var K0e=Hr(),FIt=Ji().find,jIt=K0e.aTypedArray,zIt=K0e.exportTypedArrayMethod;zIt("find",function(e){return FIt(jIt(this),e,arguments.length>1?arguments[1]:void 0)})});var J0e=R(()=>{"use strict";p();var Q0e=Hr(),UIt=Ji().findIndex,BIt=Q0e.aTypedArray,VIt=Q0e.exportTypedArrayMethod;VIt("findIndex",function(e){return UIt(BIt(this),e,arguments.length>1?arguments[1]:void 0)})});var PG=R(()=>{"use strict";p();var exe=Hr(),GIt=F1().findLast,$It=exe.aTypedArray,HIt=exe.exportTypedArrayMethod;HIt("findLast",function(e){return GIt($It(this),e,arguments.length>1?arguments[1]:void 0)})});var RG=R(()=>{"use strict";p();var txe=Hr(),WIt=F1().findLastIndex,ZIt=txe.aTypedArray,YIt=txe.exportTypedArrayMethod;YIt("findLastIndex",function(e){return WIt(ZIt(this),e,arguments.length>1?arguments[1]:void 0)})});var nxe=R(()=>{"use strict";p();var rxe=Hr(),KIt=Ji().forEach,XIt=rxe.aTypedArray,QIt=rxe.exportTypedArrayMethod;QIt("forEach",function(e){KIt(XIt(this),e,arguments.length>1?arguments[1]:void 0)})});var ixe=R(()=>{"use strict";p();var JIt=bR(),eAt=Hr().exportTypedArrayStaticMethod,tAt=xG();eAt("from",tAt,JIt)});var axe=R(()=>{"use strict";p();var oxe=Hr(),rAt=f_().includes,nAt=oxe.aTypedArray,iAt=oxe.exportTypedArrayMethod;iAt("includes",function(e){return rAt(nAt(this),e,arguments.length>1?arguments[1]:void 0)})});var lxe=R(()=>{"use strict";p();var sxe=Hr(),oAt=f_().indexOf,aAt=sxe.aTypedArray,sAt=sxe.exportTypedArrayMethod;sAt("indexOf",function(e){return oAt(aAt(this),e,arguments.length>1?arguments[1]:void 0)})});var pxe=R(()=>{"use strict";p();var lAt=Ft(),uAt=yt(),OG=ct(),cxe=Hr(),LG=B1(),cAt=mr(),DG=cAt("iterator"),uxe=lAt.Uint8Array,fAt=OG(LG.values),hAt=OG(LG.keys),pAt=OG(LG.entries),NG=cxe.aTypedArray,MR=cxe.exportTypedArrayMethod,W_=uxe&&uxe.prototype,CR=!uAt(function(){W_[DG].call([1])}),fxe=!!W_&&W_.values&&W_[DG]===W_.values&&W_.values.name==="values",hxe=function(){return fAt(NG(this))};MR("entries",function(){return pAt(NG(this))},CR);MR("keys",function(){return hAt(NG(this))},CR);MR("values",hxe,CR||!fxe,{name:"values"});MR(DG,hxe,CR||!fxe,{name:"values"})});var mxe=R(()=>{"use strict";p();var dxe=Hr(),dAt=ct(),mAt=dxe.aTypedArray,gAt=dxe.exportTypedArrayMethod,vAt=dAt([].join);gAt("join",function(e){return vAt(mAt(this),e)})});var vxe=R(()=>{"use strict";p();var gxe=Hr(),yAt=ma(),_At=WU(),xAt=gxe.aTypedArray,bAt=gxe.exportTypedArrayMethod;bAt("lastIndexOf",function(e){var r=arguments.length;return yAt(_At,xAt(this),r>1?[e,arguments[1]]:[e])})});var yxe=R(()=>{"use strict";p();var kG=Hr(),wAt=Ji().map,EAt=kG.aTypedArray,SAt=kG.getTypedArrayConstructor,TAt=kG.exportTypedArrayMethod;TAt("map",function(e){return wAt(EAt(this),e,arguments.length>1?arguments[1]:void 0,function(r,n){return new(SAt(r))(n)})})});var xxe=R(()=>{"use strict";p();var _xe=Hr(),IAt=bR(),AAt=_xe.aTypedArrayConstructor,MAt=_xe.exportTypedArrayStaticMethod;MAt("of",function(){for(var e=0,r=arguments.length,n=new(AAt(this))(r);r>e;)n[e]=arguments[e++];return n},IAt)});var wxe=R(()=>{"use strict";p();var bxe=Hr(),CAt=V1().left,PAt=bxe.aTypedArray,RAt=bxe.exportTypedArrayMethod;RAt("reduce",function(e){var r=arguments.length;return CAt(PAt(this),e,r,r>1?arguments[1]:void 0)})});var Sxe=R(()=>{"use strict";p();var Exe=Hr(),OAt=V1().right,LAt=Exe.aTypedArray,DAt=Exe.exportTypedArrayMethod;DAt("reduceRight",function(e){var r=arguments.length;return OAt(LAt(this),e,r,r>1?arguments[1]:void 0)})});var Ixe=R(()=>{"use strict";p();var Txe=Hr(),NAt=Txe.aTypedArray,kAt=Txe.exportTypedArrayMethod,qAt=Math.floor;kAt("reverse",function(){for(var e=this,r=NAt(e).length,n=qAt(r/2),i=0,o;i<n;)o=e[i],e[i++]=e[--r],e[r]=o;return e})});var Oxe=R(()=>{"use strict";p();var Mxe=Ft(),Cxe=jt(),jG=Hr(),FAt=sn(),jAt=yG(),zAt=Yr(),Pxe=yt(),UAt=Mxe.RangeError,qG=Mxe.Int8Array,Axe=qG&&qG.prototype,Rxe=Axe&&Axe.set,BAt=jG.aTypedArray,VAt=jG.exportTypedArrayMethod,FG=!Pxe(function(){var t=new Uint8ClampedArray(2);return Cxe(Rxe,t,{length:1,0:3},1),t[1]!==3}),GAt=FG&&jG.NATIVE_ARRAY_BUFFER_VIEWS&&Pxe(function(){var t=new qG(2);return t.set(1),t.set("2",1),t[0]!==0||t[1]!==2});VAt("set",function(e){BAt(this);var r=jAt(arguments.length>1?arguments[1]:void 0,1),n=zAt(e);if(FG)return Cxe(Rxe,this,n,r);var i=this.length,o=FAt(n),l=0;if(o+r>i)throw new UAt("Wrong length");for(;l<o;)this[r+l]=n[l++]},!FG||GAt)});var Lxe=R(()=>{"use strict";p();var zG=Hr(),$At=yt(),HAt=ks(),WAt=zG.aTypedArray,ZAt=zG.getTypedArrayConstructor,YAt=zG.exportTypedArrayMethod,KAt=$At(function(){new Int8Array(1).slice()});YAt("slice",function(e,r){for(var n=HAt(WAt(this),e,r),i=ZAt(this),o=0,l=n.length,f=new i(l);l>o;)f[o]=n[o++];return f},KAt)});var Nxe=R(()=>{"use strict";p();var Dxe=Hr(),XAt=Ji().some,QAt=Dxe.aTypedArray,JAt=Dxe.exportTypedArrayMethod;JAt("some",function(e){return XAt(QAt(this),e,arguments.length>1?arguments[1]:void 0)})});var Uxe=R(()=>{"use strict";p();var eMt=Ft(),tMt=od(),UG=yt(),rMt=xr(),nMt=yP(),zxe=Hr(),kxe=KU(),iMt=XU(),qxe=Qu(),Fxe=_P(),oMt=zxe.aTypedArray,aMt=zxe.exportTypedArrayMethod,RE=eMt.Uint16Array,Z_=RE&&tMt(RE.prototype.sort),sMt=!!Z_&&!(UG(function(){Z_(new RE(2),null)})&&UG(function(){Z_(new RE(2),{})})),jxe=!!Z_&&!UG(function(){if(qxe)return qxe<74;if(kxe)return kxe<67;if(iMt)return!0;if(Fxe)return Fxe<602;var t=new RE(516),e=Array(516),r,n;for(r=0;r<516;r++)n=r%4,t[r]=515-r,e[r]=r-2*n+3;for(Z_(t,function(i,o){return(i/4|0)-(o/4|0)}),r=0;r<516;r++)if(t[r]!==e[r])return!0}),lMt=function(t){return function(e,r){return t!==void 0?+t(e,r)||0:r!==r?-1:e!==e?1:e===0&&r===0?1/e>0&&1/r<0?1:-1:e>r}};aMt("sort",function(e){return e!==void 0&&rMt(e),jxe?Z_(this,e):nMt(oMt(this),lMt(e))},!jxe||sMt)});var Vxe=R(()=>{"use strict";p();var BG=Hr(),uMt=Ns(),Bxe=ec(),cMt=BG.aTypedArray,fMt=BG.getTypedArrayConstructor,hMt=BG.exportTypedArrayMethod;hMt("subarray",function(e,r){var n=cMt(this),i=n.length,o=Bxe(e,i),l=fMt(n);return new l(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,uMt((r===void 0?i:Bxe(r,i))-o))})});var Zxe=R(()=>{"use strict";p();var pMt=Ft(),dMt=ma(),Hxe=Hr(),VG=yt(),Gxe=ks(),PR=pMt.Int8Array,$xe=Hxe.aTypedArray,mMt=Hxe.exportTypedArrayMethod,Wxe=[].toLocaleString,gMt=!!PR&&VG(function(){Wxe.call(new PR(1))}),vMt=VG(function(){return[1,2].toLocaleString()!==new PR([1,2]).toLocaleString()})||!VG(function(){PR.prototype.toLocaleString.call([1,2])});mMt("toLocaleString",function(){return dMt(Wxe,gMt?Gxe($xe(this)):$xe(this),Gxe(arguments))},vMt)});var $G=R(()=>{"use strict";p();var yMt=eB(),GG=Hr(),_Mt=GG.aTypedArray,xMt=GG.exportTypedArrayMethod,bMt=GG.getTypedArrayConstructor;xMt("toReversed",function(){return yMt(_Mt(this),bMt(this))})});var HG=R(()=>{"use strict";p();var RR=Hr(),wMt=ct(),EMt=xr(),SMt=yh(),TMt=RR.aTypedArray,IMt=RR.getTypedArrayConstructor,AMt=RR.exportTypedArrayMethod,MMt=wMt(RR.TypedArrayPrototype.sort);AMt("toSorted",function(e){e!==void 0&&EMt(e);var r=TMt(this),n=SMt(IMt(r),r);return MMt(n,e)})});var Kxe=R(()=>{"use strict";p();var CMt=Hr().exportTypedArrayMethod,PMt=yt(),RMt=Ft(),OMt=ct(),Yxe=RMt.Uint8Array,LMt=Yxe&&Yxe.prototype||{},OR=[].toString,DMt=OMt([].join);PMt(function(){OR.call({})})&&(OR=function(){return DMt(this)});var NMt=LMt.toString!==OR;CMt("toString",OR,NMt)});var ZG=R(()=>{"use strict";p();var kMt=oB(),WG=Hr(),qMt=wR(),FMt=fi(),jMt=IE(),zMt=WG.aTypedArray,UMt=WG.getTypedArrayConstructor,BMt=WG.exportTypedArrayMethod,VMt=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return t===8}}();BMt("with",function(t,e){var r=zMt(this),n=FMt(t),i=qMt(r)?jMt(e):+e;return kMt(r,UMt(r),n,i)},!VMt)});var tbe=R(()=>{"use strict";p();var GMt=oe(),YG=ct(),$Mt=Mr(),Xxe=String.fromCharCode,Qxe=YG("".charAt),Jxe=YG(/./.exec),ebe=YG("".slice),HMt=/^[\da-f]{2}$/i,WMt=/^[\da-f]{4}$/i;GMt({global:!0},{unescape:function(e){for(var r=$Mt(e),n="",i=r.length,o=0,l,f;o<i;){if(l=Qxe(r,o++),l==="%"){if(Qxe(r,o)==="u"){if(f=ebe(r,o+1,o+5),Jxe(WMt,f)){n+=Xxe(parseInt(f,16)),o+=5;continue}}else if(f=ebe(r,o,o+2),Jxe(HMt,f)){n+=Xxe(parseInt(f,16)),o+=2;continue}}n+=l}return n}})});var QG=R((C2r,sbe)=>{"use strict";p();var ZMt=ct(),rbe=nu(),LR=bd().getWeakData,YMt=ka(),KMt=Bt(),XMt=Ds(),KG=hr(),QMt=Pi(),ibe=Ji(),nbe=Br(),obe=Cn(),JMt=obe.set,eCt=obe.getterFor,tCt=ibe.find,rCt=ibe.findIndex,nCt=ZMt([].splice),iCt=0,DR=function(t){return t.frozen||(t.frozen=new abe)},abe=function(){this.entries=[]},XG=function(t,e){return tCt(t.entries,function(r){return r[0]===e})};abe.prototype={get:function(t){var e=XG(this,t);if(e)return e[1]},has:function(t){return!!XG(this,t)},set:function(t,e){var r=XG(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=rCt(this.entries,function(r){return r[0]===t});return~e&&nCt(this.entries,e,1),!!~e}};sbe.exports={getConstructor:function(t,e,r,n){var i=t(function(d,v){YMt(d,o),JMt(d,{type:e,id:iCt++,frozen:null}),XMt(v)||QMt(v,d[n],{that:d,AS_ENTRIES:r})}),o=i.prototype,l=eCt(e),f=function(d,v,x){var b=l(d),A=LR(KMt(v),!0);return A===!0?DR(b).set(v,x):A[b.id]=x,d};return rbe(o,{delete:function(d){var v=l(this);if(!KG(d))return!1;var x=LR(d);return x===!0?DR(v).delete(d):x&&nbe(x,v.id)&&delete x[v.id]},has:function(v){var x=l(this);if(!KG(v))return!1;var b=LR(v);return b===!0?DR(x).has(v):b&&nbe(b,x.id)}}),rbe(o,r?{get:function(v){var x=l(this);if(KG(v)){var b=LR(v);if(b===!0)return DR(x).get(v);if(b)return b[x.id]}},set:function(v,x){return f(this,v,x)}}:{add:function(v){return f(this,v,!0)}}),i}}});var mbe=R(()=>{"use strict";p();var oCt=Eh(),lbe=Ft(),FR=ct(),ube=nu(),aCt=bd(),sCt=J1(),cbe=QG(),NR=hr(),kR=Cn().enforce,lCt=yt(),uCt=L4(),DE=Object,cCt=Array.isArray,qR=DE.isExtensible,fbe=DE.isFrozen,fCt=DE.isSealed,hbe=DE.freeze,hCt=DE.seal,pCt=!lbe.ActiveXObject&&"ActiveXObject"in lbe,OE,pbe=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},dbe=sCt("WeakMap",pbe,cbe),Y_=dbe.prototype,jR=FR(Y_.set),dCt=function(){return oCt&&lCt(function(){var t=hbe([]);return jR(new dbe,t,1),!fbe(t)})};uCt&&(pCt?(OE=cbe.getConstructor(pbe,"WeakMap",!0),aCt.enable(),JG=FR(Y_.delete),LE=FR(Y_.has),e6=FR(Y_.get),ube(Y_,{delete:function(t){if(NR(t)&&!qR(t)){var e=kR(this);return e.frozen||(e.frozen=new OE),JG(this,t)||e.frozen.delete(t)}return JG(this,t)},has:function(e){if(NR(e)&&!qR(e)){var r=kR(this);return r.frozen||(r.frozen=new OE),LE(this,e)||r.frozen.has(e)}return LE(this,e)},get:function(e){if(NR(e)&&!qR(e)){var r=kR(this);return r.frozen||(r.frozen=new OE),LE(this,e)?e6(this,e):r.frozen.get(e)}return e6(this,e)},set:function(e,r){if(NR(e)&&!qR(e)){var n=kR(this);n.frozen||(n.frozen=new OE),LE(this,e)?jR(this,e,r):n.frozen.set(e,r)}else jR(this,e,r);return this}})):dCt()&&ube(Y_,{set:function(e,r){var n;return cCt(e)&&(fbe(e)?n=hbe:fCt(e)&&(n=hCt)),jR(this,e,r),n&&n(e),this}}));var JG,LE,e6});var zR=R(()=>{"use strict";p();mbe()});var gbe=R(()=>{"use strict";p();var mCt=J1(),gCt=QG();mCt("WeakSet",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},gCt)});var vbe=R(()=>{"use strict";p();gbe()});var ybe=R(()=>{"use strict";p();TU()});var bbe=R(()=>{"use strict";p();var vCt=oe(),yCt=Ft(),_Ct=da(),_be=bo(),BR=eu(),xCt=vg(),xbe=Qi(),UR=xo(),t6=Ls(),bCt=rP(),wCt=wg(),ECt=mr(),SCt=yt(),TCt=pn(),K_=yCt.SuppressedError,ICt=ECt("toStringTag"),VR=Error,ACt=!!K_&&K_.length!==3,MCt=!!K_&&SCt(function(){return new K_(1,2,3,{cause:4}).cause===4}),GR=ACt||MCt,kg=function(e,r,n){var i=_Ct(NE,this),o;return BR?o=GR&&(!i||_be(this)===NE)?new K_:BR(new VR,i?_be(this):NE):(o=i?this:xbe(NE),UR(o,ICt,"Error")),n!==void 0&&UR(o,"message",wCt(n)),bCt(o,kg,o.stack,1),UR(o,"error",e),UR(o,"suppressed",r),o};BR?BR(kg,VR):xCt(kg,VR,{name:!0});var NE=kg.prototype=GR?K_.prototype:xbe(VR.prototype,{constructor:t6(1,kg),message:t6(1,""),name:t6(1,"SuppressedError")});GR&&!TCt&&(NE.constructor=kg);vCt({global:!0,constructor:!0,arity:3,forced:GR},{SuppressedError:kg})});var X_=R((Y2r,Cbe)=>{"use strict";p();var Ibe=Ft(),Abe=x1(),Mbe=jr(),CCt=Qi(),$R=bo(),PCt=Nn(),RCt=mr(),OCt=pn(),wbe="USE_FUNCTION_CONSTRUCTOR",Ebe=RCt("asyncIterator"),Sbe=Ibe.AsyncIterator,Tbe=Abe.AsyncIteratorPrototype,of,r6;if(Tbe)of=Tbe;else if(Mbe(Sbe))of=Sbe.prototype;else if(Abe[wbe]||Ibe[wbe])try{r6=$R($R($R(Function("return async function*(){}()")()))),$R(r6)===Object.prototype&&(of=r6)}catch(t){}of?OCt&&(of=CCt(of)):of={};Mbe(of[Ebe])||PCt(of,Ebe,function(){return this});Cbe.exports=of});var kE=R((X2r,Fbe)=>{"use strict";p();var Pbe=jt(),Rbe=Bt(),LCt=Qi(),DCt=Xi(),NCt=nu(),Dbe=Cn(),kCt=Xo(),qCt=_r(),FCt=X_(),Nbe=ko(),n6=qCt("Promise"),kbe="AsyncFromSyncIterator",jCt=Dbe.set,Obe=Dbe.getterFor(kbe),Lbe=function(t,e,r,n,i){var o=t.done;n6.resolve(t.value).then(function(l){e(Nbe(l,o))},function(l){if(!o&&i)try{kCt(n,"throw",l)}catch(f){l=f}r(l)})},qbe=function(e){e.type=kbe,jCt(this,e)};qbe.prototype=NCt(LCt(FCt),{next:function(){var e=Obe(this);return new n6(function(r,n){var i=Rbe(Pbe(e.next,e.iterator));Lbe(i,r,n,e.iterator,!0)})},return:function(){var t=Obe(this).iterator;return new n6(function(e,r){var n=DCt(t,"return");if(n===void 0)return e(Nbe(void 0,!0));var i=Rbe(Pbe(n,t));Lbe(i,e,r,t)})}});Fbe.exports=qbe});var zbe=R((J2r,jbe)=>{"use strict";p();var zCt=jt(),UCt=kE(),BCt=Bt(),VCt=ud(),GCt=wi(),$Ct=Xi(),HCt=mr(),WCt=HCt("asyncIterator");jbe.exports=function(t,e){var r=arguments.length<2?$Ct(t,WCt):e;return r?BCt(zCt(r,t)):new UCt(GCt(VCt(t)))}});var Q_=R((tDr,Ube)=>{"use strict";p();var ZCt=jt(),YCt=_r(),KCt=Xi();Ube.exports=function(t,e,r,n){try{var i=KCt(t,"return");if(i)return YCt("Promise").resolve(ZCt(i,t)).then(function(){e(r)},function(o){n(o)})}catch(o){return n(o)}e(r)}});var qg=R((nDr,Bbe)=>{"use strict";p();var XCt=jt(),QCt=xr(),i6=Bt(),JCt=hr(),ePt=cd(),tPt=_r(),rPt=wi(),o6=Q_(),qE=function(t){var e=t===0,r=t===1,n=t===2,i=t===3;return function(o,l,f){i6(o);var d=l!==void 0;(d||!e)&&QCt(l);var v=rPt(o),x=tPt("Promise"),b=v.iterator,A=v.next,P=0;return new x(function(N,j){var D=function(U){o6(b,j,U,j)},F=function(){try{if(d)try{ePt(P)}catch(U){D(U)}x.resolve(i6(XCt(A,b))).then(function(U){try{if(i6(U).done)e?(f.length=P,N(f)):N(i?!1:n||void 0);else{var $=U.value;try{if(d){var Z=l($,P),ie=function(ne){if(r)F();else if(n)ne?F():o6(b,N,!1,j);else if(e)try{f[P++]=ne,F()}catch(ae){D(ae)}else ne?o6(b,N,i||$,j):F()};JCt(Z)?x.resolve(Z).then(ie,D):ie(Z)}else f[P++]=$,F()}catch(ne){D(ne)}}}catch(ne){j(ne)}},j)}catch(U){j(U)}};F()})}};Bbe.exports={toArray:qE(0),forEach:qE(1),every:qE(2),some:qE(3),find:qE(4)}});var a6=R((oDr,Hbe)=>{"use strict";p();var nPt=Hn(),Vbe=ct(),iPt=Yr(),oPt=rc(),aPt=zbe(),sPt=ud(),lPt=wi(),uPt=Xc(),cPt=Xi(),fPt=_r(),hPt=rB(),pPt=mr(),dPt=kE(),mPt=qg().toArray,gPt=pPt("asyncIterator"),Gbe=Vbe(hPt("Array","values")),vPt=Vbe(Gbe([]).next),yPt=function(){return new $be(this)},$be=function(t){this.iterator=Gbe(t)};$be.prototype.next=function(){return vPt(this.iterator)};Hbe.exports=function(e){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(fPt("Promise"))(function(l){var f=iPt(e);i!==void 0&&(i=nPt(i,o));var d=cPt(f,gPt),v=d?void 0:uPt(f)||yPt,x=oPt(r)?new r:[],b=d?aPt(f,d):new dPt(lPt(sPt(f,v)));l(mPt(b,i,x))})}});var Zbe=R(()=>{"use strict";p();var _Pt=oe(),xPt=a6(),bPt=yt(),Wbe=Array.fromAsync,wPt=!Wbe||bPt(function(){var t=0;return Wbe.call(function(){return t++,[]},{length:0}),t!==1});_Pt({target:"Array",stat:!0,forced:wPt},{fromAsync:xPt})});var Ybe=R(()=>{"use strict";p();CU()});var Kbe=R(()=>{"use strict";p();var EPt=oe(),SPt=Ji().filterReject,TPt=Ri();EPt({target:"Array",proto:!0,forced:!0},{filterOut:function(e){return SPt(this,e,arguments.length>1?arguments[1]:void 0)}});TPt("filterOut")});var Xbe=R(()=>{"use strict";p();var IPt=oe(),APt=Ji().filterReject,MPt=Ri();IPt({target:"Array",proto:!0,forced:!0},{filterReject:function(e){return APt(this,e,arguments.length>1?arguments[1]:void 0)}});MPt("filterReject")});var Qbe=R(()=>{"use strict";p();DU()});var Jbe=R(()=>{"use strict";p();NU()});var HR=R((TDr,ewe)=>{"use strict";p();var CPt=Hn(),PPt=ct(),RPt=hh(),OPt=Yr(),LPt=Yc(),DPt=sn(),NPt=Qi(),kPt=yh(),qPt=Array,FPt=PPt([].push);ewe.exports=function(t,e,r,n){for(var i=OPt(t),o=RPt(i),l=CPt(e,r),f=NPt(null),d=DPt(o),v=0,x,b,A;d>v;v++)A=o[v],b=LPt(l(A,v,i)),b in f?FPt(f[b],A):f[b]=[A];if(n&&(x=n(i),x!==qPt))for(b in f)f[b]=kPt(x,f[b]);return f}});var twe=R(()=>{"use strict";p();var jPt=oe(),zPt=HR(),UPt=Ri();jPt({target:"Array",proto:!0},{group:function(e){var r=arguments.length>1?arguments[1]:void 0;return zPt(this,e,r)}});UPt("group")});var rwe=R(()=>{"use strict";p();var BPt=oe(),VPt=HR(),GPt=ru(),$Pt=Ri();BPt({target:"Array",proto:!0,forced:!GPt("groupBy")},{groupBy:function(e){var r=arguments.length>1?arguments[1]:void 0;return VPt(this,e,r)}});$Pt("groupBy")});var s6=R((LDr,nwe)=>{"use strict";p();var HPt=Hn(),WPt=ct(),ZPt=hh(),YPt=Yr(),KPt=sn(),WR=qo(),XPt=WR.Map,QPt=WR.get,JPt=WR.has,eRt=WR.set,tRt=WPt([].push);nwe.exports=function(e){for(var r=YPt(this),n=ZPt(r),i=HPt(e,arguments.length>1?arguments[1]:void 0),o=new XPt,l=KPt(n),f=0,d,v;l>f;f++)v=n[f],d=i(v,f,r),JPt(o,d)?tRt(QPt(o,d),v):eRt(o,d,[v]);return o}});var iwe=R(()=>{"use strict";p();var rRt=oe(),nRt=ru(),iRt=Ri(),oRt=s6(),aRt=pn();rRt({target:"Array",proto:!0,name:"groupToMap",forced:aRt||!nRt("groupByToMap")},{groupByToMap:oRt});iRt("groupByToMap")});var owe=R(()=>{"use strict";p();var sRt=oe(),lRt=Ri(),uRt=s6(),cRt=pn();sRt({target:"Array",proto:!0,forced:cRt},{groupToMap:uRt});lRt("groupToMap")});var lwe=R(()=>{"use strict";p();var fRt=oe(),hRt=tc(),awe=Object.isFrozen,swe=function(t,e){if(!awe||!hRt(t)||!awe(t))return!1;for(var r=0,n=t.length,i;r<n;)if(i=t[r++],!(typeof i=="string"||e&&i===void 0))return!1;return n!==0};fRt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(e){if(!swe(e,!0))return!1;var r=e.raw;return r.length===e.length&&swe(r,!1)}})});var uwe=R(()=>{"use strict";p();var pRt=sr(),dRt=Ri(),mRt=Yr(),gRt=sn(),vRt=hi();pRt&&(vRt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=mRt(this),r=gRt(e);return r===0?0:r-1}}),dRt("lastIndex"))});var hwe=R(()=>{"use strict";p();var yRt=sr(),_Rt=Ri(),cwe=Yr(),fwe=sn(),xRt=hi();yRt&&(xRt(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=cwe(this),r=fwe(e);return r===0?void 0:e[r-1]},set:function(e){var r=cwe(this),n=fwe(r);return r[n===0?0:n-1]=e}}),_Rt("lastItem"))});var pwe=R(()=>{"use strict";p();tB()});var dwe=R(()=>{"use strict";p();nB()});var mwe=R(()=>{"use strict";p();iB()});var iu=R((oNr,xwe)=>{"use strict";p();var gwe=ct(),bRt=Th(),vwe=qo(),wRt=vwe.Map,ywe=vwe.proto,ERt=gwe(ywe.forEach),_we=gwe(ywe.entries),SRt=_we(new wRt).next;xwe.exports=function(t,e,r){return r?bRt({iterator:_we(t),next:SRt},function(n){return e(n[1],n[0])}):ERt(t,e)}});var ZR=R((sNr,bwe)=>{"use strict";p();var TRt=ct(),IRt=xr(),ARt=Ds(),MRt=sn(),CRt=Yr(),l6=qo(),PRt=iu(),RRt=l6.Map,ORt=l6.has,LRt=l6.set,DRt=TRt([].push);bwe.exports=function(e){var r=CRt(this),n=MRt(r),i=[],o=new RRt,l=ARt(e)?function(x){return x}:IRt(e),f,d,v;for(f=0;f<n;f++)d=r[f],v=l(d),ORt(o,v)||LRt(o,v,d);return PRt(o,function(x){DRt(i,x)}),i}});var wwe=R(()=>{"use strict";p();var NRt=oe(),kRt=Ri(),qRt=ZR();NRt({target:"Array",proto:!0,forced:!0},{uniqueBy:qRt});kRt("uniqueBy")});var Ewe=R(()=>{"use strict";p();aB()});var Swe=R(()=>{"use strict";p();LB()});var Twe=R(()=>{"use strict";p();ZB()});var Iwe=R(()=>{"use strict";p();YB()});var c6=R((SNr,Rwe)=>{"use strict";p();var FRt=_r(),jRt=jt(),zRt=ct(),URt=Hn(),BRt=Bt(),VRt=xr(),Cwe=Ds(),u6=Xi(),Pwe=mr(),GRt=Pwe("asyncDispose"),Awe=Pwe("dispose"),$Rt=zRt([].push),HRt=function(t,e){if(e==="async-dispose"){var r=u6(t,GRt);return r!==void 0||(r=u6(t,Awe),r===void 0)?r:function(){var n=this,i=FRt("Promise");return new i(function(o){jRt(r,n),o(void 0)})}}return u6(t,Awe)},Mwe=function(t,e,r){return arguments.length<3&&!Cwe(t)&&(r=VRt(HRt(BRt(t),e))),r===void 0?function(){}:URt(r,t)};Rwe.exports=function(t,e,r,n){var i;if(arguments.length<4){if(Cwe(e)&&r==="sync-dispose")return;i=Mwe(e,r)}else i=Mwe(void 0,r,n);$Rt(t.stack,i)}});var jwe=R(()=>{"use strict";p();var WRt=oe(),KR=sr(),Nwe=_r(),Owe=xr(),ZRt=ka(),kwe=Nn(),YRt=nu(),KRt=hi(),qwe=mr(),Fwe=Cn(),f6=c6(),Lwe=Qu(),Dwe=Nwe("Promise"),XRt=Nwe("SuppressedError"),QRt=ReferenceError,JRt=qwe("asyncDispose"),eOt=qwe("toStringTag"),QR="AsyncDisposableStack",tOt=Fwe.set,XR=Fwe.getterFor(QR),h6="async-dispose",FE="disposed",rOt="pending",YR=function(t){var e=XR(t);if(e.state===FE)throw new QRt(QR+" already disposed");return e},p6=function(){tOt(ZRt(this,J_),{type:QR,state:rOt,stack:[]}),KR||(this.disposed=!1)},J_=p6.prototype;YRt(J_,{disposeAsync:function(){var e=this;return new Dwe(function(r,n){var i=XR(e);if(i.state===FE)return r(void 0);i.state=FE,KR||(e.disposed=!0);var o=i.stack,l=o.length,f=!1,d,v=function(b){f?d=new XRt(b,d):(f=!0,d=b),x()},x=function(){if(l){var b=o[--l];o[l]=null;try{Dwe.resolve(b()).then(x,v)}catch(A){v(A)}}else i.stack=null,f?n(d):r(void 0)};x()})},use:function(e){return f6(YR(this),e,h6),e},adopt:function(e,r){var n=YR(this);return Owe(r),f6(n,void 0,h6,function(){return r(e)}),e},defer:function(e){var r=YR(this);Owe(e),f6(r,void 0,h6,e)},move:function(){var e=YR(this),r=new p6;return XR(r).stack=e.stack,e.stack=[],e.state=FE,KR||(this.disposed=!0),r}});KR&&KRt(J_,"disposed",{configurable:!0,get:function(){return XR(this).state===FE}});kwe(J_,JRt,J_.disposeAsync,{name:"disposeAsync"});kwe(J_,eOt,QR,{nonWritable:!0});var nOt=Lwe&&Lwe<136;WRt({global:!0,constructor:!0,forced:nOt},{AsyncDisposableStack:p6})});var Gwe=R(()=>{"use strict";p();var iOt=oe(),oOt=ka(),aOt=bo(),Uwe=xo(),Bwe=Br(),sOt=mr(),Md=X_(),Vwe=pn(),zwe=sOt("toStringTag"),lOt=TypeError,d6=function(){if(oOt(this,Md),aOt(this)===Md)throw new lOt("Abstract class AsyncIterator not directly constructable")};d6.prototype=Md;Bwe(Md,zwe)||Uwe(Md,zwe,"AsyncIterator");(Vwe||!Bwe(Md,"constructor")||Md.constructor===Object)&&Uwe(Md,"constructor",d6);iOt({global:!0,constructor:!0,forced:Vwe},{AsyncIterator:d6})});var Fg=R((ONr,Qwe)=>{"use strict";p();var uOt=jt(),JR=wd(),$we=Bt(),cOt=Qi(),fOt=xo(),hOt=nu(),pOt=mr(),Wwe=Cn(),dOt=_r(),mOt=Xi(),gOt=X_(),m6=ko(),Hwe=Xo(),af=dOt("Promise"),vOt=pOt("toStringTag"),Zwe="AsyncIteratorHelper",Ywe="WrapForValidAsyncIterator",yOt=Wwe.set,Kwe=function(t){var e=!t,r=Wwe.getterFor(t?Ywe:Zwe),n=function(i){var o=JR(function(){return r(i)}),l=o.error,f=o.value;return l||e&&f.done?{exit:!0,value:l?af.reject(f):af.resolve(m6(void 0,!0))}:{exit:!1,value:f}};return hOt(cOt(gOt),{next:function(){var o=n(this),l=o.value;if(o.exit)return l;var f=JR(function(){return $we(l.nextHandler(af))}),d=f.error,v=f.value;return d&&(l.done=!0),d?af.reject(v):af.resolve(v)},return:function(){var i=n(this),o=i.value;if(i.exit)return o;o.done=!0;var l=o.iterator,f,d,v=JR(function(){if(o.inner)try{Hwe(o.inner.iterator,"normal")}catch(x){return Hwe(l,"throw",x)}return mOt(l,"return")});return f=d=v.value,v.error?af.reject(d):f===void 0?af.resolve(m6(void 0,!0)):(v=JR(function(){return uOt(f,l)}),d=v.value,v.error?af.reject(d):t?af.resolve(d):af.resolve(d).then(function(x){return $we(x),m6(void 0,!0)}))}})},_Ot=Kwe(!0),Xwe=Kwe(!1);fOt(Xwe,vOt,"Async Iterator Helper");Qwe.exports=function(t,e){var r=function(i,o){o?(o.iterator=i.iterator,o.next=i.next):o=i,o.type=e?Ywe:Zwe,o.nextHandler=t,o.counter=0,o.done=!1,yOt(this,o)};return r.prototype=e?_Ot:Xwe,r}});var v6=R((DNr,e1e)=>{"use strict";p();var xOt=jt(),bOt=xr(),g6=Bt(),wOt=hr(),EOt=wi(),SOt=Fg(),Jwe=ko(),TOt=Q_(),IOt=SOt(function(t){var e=this,r=e.iterator,n=e.mapper;return new t(function(i,o){var l=function(d){e.done=!0,o(d)},f=function(d){TOt(r,l,d,l)};t.resolve(g6(xOt(e.next,r))).then(function(d){try{if(g6(d).done)e.done=!0,i(Jwe(void 0,!0));else{var v=d.value;try{var x=n(v,e.counter++),b=function(A){i(Jwe(A,!1))};wOt(x)?t.resolve(x).then(b,f):b(x)}catch(A){f(A)}}}catch(A){l(A)}},l)})});e1e.exports=function(e){return g6(this),bOt(e),new IOt(EOt(this),{mapper:e})}});var y6=R((kNr,t1e)=>{"use strict";p();var AOt=jt(),MOt=v6(),COt=function(t,e){return[e,t]};t1e.exports=function(){return AOt(MOt,this,COt)}});var r1e=R(()=>{"use strict";p();var POt=oe(),ROt=y6();POt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:ROt})});var a1e=R(()=>{"use strict";p();var OOt=jt(),LOt=Nn(),DOt=_r(),NOt=Xi(),kOt=Br(),qOt=mr(),n1e=X_(),i1e=qOt("asyncDispose"),o1e=DOt("Promise");kOt(n1e,i1e)||LOt(n1e,i1e,function(){var t=this;return new o1e(function(e,r){var n=NOt(t,"return");n?o1e.resolve(OOt(n,t)).then(function(){e(void 0)},r):e(void 0)})})});var l1e=R(()=>{"use strict";p();var FOt=oe(),jOt=jt(),_6=Bt(),zOt=wi(),UOt=I_(),BOt=A_(),VOt=Fg(),s1e=ko(),GOt=VOt(function(t){var e=this;return new t(function(r,n){var i=function(l){e.done=!0,n(l)},o=function(){try{t.resolve(_6(jOt(e.next,e.iterator))).then(function(l){try{_6(l).done?(e.done=!0,r(s1e(void 0,!0))):e.remaining?(e.remaining--,o()):r(s1e(l.value,!1))}catch(f){i(f)}},i)}catch(l){i(l)}};o()})});FOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(e){_6(this);var r=BOt(UOt(+e));return new GOt(zOt(this),{remaining:r})}})});var u1e=R(()=>{"use strict";p();var $Ot=oe(),HOt=qg().every;$Ot({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(e){return HOt(this,e)}})});var f1e=R(()=>{"use strict";p();var WOt=oe(),ZOt=jt(),YOt=xr(),x6=Bt(),KOt=hr(),XOt=wi(),QOt=Fg(),c1e=ko(),JOt=Q_(),eLt=QOt(function(t){var e=this,r=e.iterator,n=e.predicate;return new t(function(i,o){var l=function(v){e.done=!0,o(v)},f=function(v){JOt(r,l,v,l)},d=function(){try{t.resolve(x6(ZOt(e.next,r))).then(function(v){try{if(x6(v).done)e.done=!0,i(c1e(void 0,!0));else{var x=v.value;try{var b=n(x,e.counter++),A=function(P){P?i(c1e(x,!1)):d()};KOt(b)?t.resolve(b).then(A,f):A(b)}catch(P){f(P)}}}catch(P){l(P)}},l)}catch(v){l(v)}};d()})});WOt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(e){return x6(this),YOt(e),new eLt(XOt(this),{predicate:e})}})});var h1e=R(()=>{"use strict";p();var tLt=oe(),rLt=qg().find;tLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(e){return rLt(this,e)}})});var b6=R((rkr,m1e)=>{"use strict";p();var nLt=jt(),iLt=jr(),p1e=Bt(),d1e=wi(),oLt=Xc(),aLt=Xi(),sLt=mr(),lLt=kE(),uLt=sLt("asyncIterator");m1e.exports=function(t){var e=p1e(t),r=!0,n=aLt(e,uLt),i;return iLt(n)||(n=oLt(e),r=!1),n!==void 0?i=nLt(n,e):(i=e,r=!0),p1e(i),d1e(r?i:new lLt(d1e(i)))}});var y1e=R(()=>{"use strict";p();var cLt=oe(),g1e=jt(),fLt=xr(),jE=Bt(),hLt=hr(),pLt=wi(),dLt=Fg(),v1e=ko(),mLt=b6(),gLt=Q_(),vLt=dLt(function(t){var e=this,r=e.iterator,n=e.mapper;return new t(function(i,o){var l=function(x){e.done=!0,o(x)},f=function(x){gLt(r,l,x,l)},d=function(){try{t.resolve(jE(g1e(e.next,r))).then(function(x){try{if(jE(x).done)e.done=!0,i(v1e(void 0,!0));else{var b=x.value;try{var A=n(b,e.counter++),P=function(N){try{e.inner=mLt(N),v()}catch(j){f(j)}};hLt(A)?t.resolve(A).then(P,f):P(A)}catch(N){f(N)}}}catch(N){l(N)}},l)}catch(x){l(x)}},v=function(){var x=e.inner;if(x)try{t.resolve(jE(g1e(x.next,x.iterator))).then(function(b){try{jE(b).done?(e.inner=null,d()):i(v1e(b.value,!1))}catch(A){f(A)}},f)}catch(b){f(b)}else d()};v()})});cLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(e){return jE(this),fLt(e),new vLt(pLt(this),{mapper:e,inner:null})}})});var _1e=R(()=>{"use strict";p();var yLt=oe(),_Lt=qg().forEach;yLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(e){return _Lt(this,e)}})});var w6=R((ckr,x1e)=>{"use strict";p();var xLt=jt(),bLt=Fg();x1e.exports=bLt(function(){return xLt(this.next,this.iterator)},!0)});var b1e=R(()=>{"use strict";p();var wLt=oe(),ELt=Yr(),SLt=da(),TLt=b6(),ILt=X_(),ALt=w6();wLt({target:"AsyncIterator",stat:!0,forced:!0},{from:function(e){var r=TLt(typeof e=="string"?ELt(e):e);return SLt(ILt,r.iterator)?r.iterator:new ALt(r)}})});var w1e=R(()=>{"use strict";p();var MLt=oe(),CLt=y6();MLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:CLt})});var E1e=R(()=>{"use strict";p();var PLt=oe(),RLt=v6();PLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:RLt})});var S1e=R(()=>{"use strict";p();var OLt=oe(),LLt=jt(),DLt=xr(),E6=Bt(),NLt=hr(),kLt=_r(),qLt=wi(),FLt=Q_(),S6=kLt("Promise"),jLt=TypeError;OLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(e){E6(this),DLt(e);var r=qLt(this),n=r.iterator,i=r.next,o=arguments.length<2,l=o?void 0:arguments[1],f=0;return new S6(function(d,v){var x=function(A){FLt(n,v,A,v)},b=function(){try{S6.resolve(E6(LLt(i,n))).then(function(A){try{if(E6(A).done)o?v(new jLt("Reduce of empty iterator with no initial value")):d(l);else{var P=A.value;if(o)o=!1,l=P,b();else try{var N=e(l,P,f),j=function(D){l=D,b()};NLt(N)?S6.resolve(N).then(j,x):j(N)}catch(D){x(D)}}f++}catch(D){v(D)}},v)}catch(A){v(A)}};b()})}})});var T1e=R(()=>{"use strict";p();var zLt=oe(),ULt=qg().some;zLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(e){return ULt(this,e)}})});var M1e=R(()=>{"use strict";p();var BLt=oe(),I1e=jt(),A1e=Bt(),VLt=wi(),GLt=I_(),$Lt=A_(),HLt=Fg(),T6=ko(),WLt=HLt(function(t){var e=this,r=e.iterator,n;if(!e.remaining--){var i=T6(void 0,!0);return e.done=!0,n=r.return,n!==void 0?t.resolve(I1e(n,r,void 0)).then(function(){return i}):i}return t.resolve(I1e(e.next,r)).then(function(o){return A1e(o).done?(e.done=!0,T6(void 0,!0)):T6(o.value,!1)}).then(null,function(o){throw e.done=!0,o})});BLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(e){A1e(this);var r=$Lt(GLt(+e));return new WLt(VLt(this),{remaining:r})}})});var C1e=R(()=>{"use strict";p();var ZLt=oe(),YLt=qg().toArray;ZLt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return YLt(this,void 0,[])}})});var tO=R((Lkr,N1e)=>{"use strict";p();var R1e=Cn(),KLt=hd(),I6=ko(),XLt=Ds(),QLt=hr(),JLt=hi(),O1e=sr(),zE="Incorrect Iterator.range arguments",M6="NumericRangeIterator",e2t=R1e.set,L1e=R1e.getterFor(M6),P1e=RangeError,A6=TypeError,D1e=KLt(function(e,r,n,i,o,l){if(typeof e!=i||r!==1/0&&r!==-1/0&&typeof r!=i)throw new A6(zE);if(e===1/0||e===-1/0)throw new P1e(zE);var f=r>e,d=!1,v;if(n===void 0)v=void 0;else if(QLt(n))v=n.step,d=!!n.inclusive;else if(typeof n==i)v=n;else throw new A6(zE);if(XLt(v)&&(v=f?l:-l),typeof v!=i)throw new A6(zE);if(v===1/0||v===-1/0||v===o&&e!==r)throw new P1e(zE);var x=e!==e||r!==r||v!==v||r>e!=v>o;e2t(this,{type:M6,start:e,end:r,step:v,inclusive:d,hitsEnd:x,currentCount:o,zero:o}),O1e||(this.start=e,this.end=r,this.step=v,this.inclusive=d)},M6,function(){var e=L1e(this);if(e.hitsEnd)return I6(void 0,!0);var r=e.start,n=e.end,i=e.step,o=r+i*e.currentCount++;o===n&&(e.hitsEnd=!0);var l=e.inclusive,f;return n>r?f=l?o>n:o>=n:f=l?n>o:n>=o,f?(e.hitsEnd=!0,I6(void 0,!0)):I6(o,!1)}),eO=function(t){JLt(D1e.prototype,t,{get:function(){return L1e(this)[t]},set:function(){},configurable:!0,enumerable:!1})};O1e&&(eO("start"),eO("end"),eO("inclusive"),eO("step"));N1e.exports=D1e});var k1e=R(()=>{"use strict";p();var t2t=oe(),r2t=tO();typeof BigInt=="function"&&t2t({target:"BigInt",stat:!0,forced:!0},{range:function(e,r,n){return new r2t(e,r,n,"bigint",BigInt(0),BigInt(1))}})});var C6=R((Fkr,z1e)=>{"use strict";p();UP();zR();var j1e=_r(),n2t=Qi(),q1e=hr(),i2t=Object,o2t=TypeError,a2t=j1e("Map"),s2t=j1e("WeakMap"),rO=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=n2t(null)};rO.prototype.get=function(t,e){return this[t]||(this[t]=e())};rO.prototype.next=function(t,e,r){var n=r?this.objectsByIndex[t]||(this.objectsByIndex[t]=new s2t):this.primitives||(this.primitives=new a2t),i=n.get(e);return i||n.set(e,i=new rO),i};var F1e=new rO;z1e.exports=function(){var t=F1e,e=arguments.length,r,n;for(r=0;r<e;r++)q1e(n=arguments[r])&&(t=t.next(r,n,!0));if(this===i2t&&t===F1e)throw new o2t("Composite keys must contain a non-primitive component");for(r=0;r<e;r++)q1e(n=arguments[r])||(t=t.next(r,n,!1));return t}});var B1e=R(()=>{"use strict";p();var l2t=oe(),u2t=ma(),c2t=C6(),f2t=_r(),U1e=Qi(),h2t=Object,p2t=function(){var t=f2t("Object","freeze");return t?t(U1e(null)):U1e(null)};l2t({global:!0,forced:!0},{compositeKey:function(){return u2t(c2t,h2t,arguments).get("object",p2t)}})});var G1e=R(()=>{"use strict";p();var d2t=oe(),m2t=C6(),V1e=_r(),g2t=ma();d2t({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?V1e("Symbol").for(arguments[0]):g2t(m2t,null,arguments).get("symbol",V1e("Symbol"))}})});var $1e=R(()=>{"use strict";p();IB()});var H1e=R(()=>{"use strict";p();var v2t=oe(),y2t=ct(),_2t=y2t(DataView.prototype.getUint8);v2t({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(e){return _2t(this,e)}})});var W1e=R(()=>{"use strict";p();PB()});var Z1e=R(()=>{"use strict";p();var x2t=oe(),b2t=ct(),w2t=AB(),E2t=__(),S2t=_G(),T2t=b2t(DataView.prototype.setUint8);x2t({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(e,r){w2t(this);var n=E2t(e);return T2t(this,n,S2t(r))}})});var J1e=R(()=>{"use strict";p();var I2t=oe(),iO=sr(),A2t=_r(),Y1e=xr(),M2t=ka(),K1e=Nn(),C2t=nu(),P2t=hi(),X1e=mr(),Q1e=Cn(),P6=c6(),R2t=A2t("SuppressedError"),O2t=ReferenceError,L2t=X1e("dispose"),D2t=X1e("toStringTag"),aO="DisposableStack",N2t=Q1e.set,oO=Q1e.getterFor(aO),R6="sync-dispose",UE="disposed",k2t="pending",nO=function(t){var e=oO(t);if(e.state===UE)throw new O2t(aO+" already disposed");return e},O6=function(){N2t(M2t(this,e0),{type:aO,state:k2t,stack:[]}),iO||(this.disposed=!1)},e0=O6.prototype;C2t(e0,{dispose:function(){var e=oO(this);if(e.state!==UE){e.state=UE,iO||(this.disposed=!0);for(var r=e.stack,n=r.length,i=!1,o;n;){var l=r[--n];r[n]=null;try{l()}catch(f){i?o=new R2t(f,o):(i=!0,o=f)}}if(e.stack=null,i)throw o}},use:function(e){return P6(nO(this),e,R6),e},adopt:function(e,r){var n=nO(this);return Y1e(r),P6(n,void 0,R6,function(){r(e)}),e},defer:function(e){var r=nO(this);Y1e(e),P6(r,void 0,R6,e)},move:function(){var e=nO(this),r=new O6;return oO(r).stack=e.stack,e.stack=[],e.state=UE,iO||(this.disposed=!0),r}});iO&&P2t(e0,"disposed",{configurable:!0,get:function(){return oO(this).state===UE}});K1e(e0,L2t,e0.dispose,{name:"dispose"});K1e(e0,D2t,aO,{nonWritable:!0});I2t({global:!0,constructor:!0},{DisposableStack:O6})});var nEe=R(()=>{"use strict";p();var q2t=oe(),tEe=_r(),F2t=hr(),j2t=ss(),z2t=yt(),rEe="Error",D6="DOMException",U2t=Object.setPrototypeOf||{}.__proto__,eEe=tEe(D6),L6=Error,sO=L6.isError,B2t=!sO||!U2t||z2t(function(){return eEe&&!sO(new eEe(D6))||!sO(new L6(rEe,{cause:function(){}}))||sO(tEe("Object","create")(L6.prototype))});q2t({target:"Error",stat:!0,sham:!0,forced:B2t},{isError:function(e){if(!F2t(e))return!1;var r=j2t(e);return r===rEe||r===D6}})});var N6=R((cqr,iEe)=>{"use strict";p();var V2t=ct(),G2t=xr();iEe.exports=function(){return V2t(G2t(this))}});var oEe=R(()=>{"use strict";p();var $2t=oe(),H2t=N6();$2t({target:"Function",proto:!0,forced:!0},{demethodize:H2t})});var sEe=R(()=>{"use strict";p();var W2t=oe(),Z2t=ct(),Y2t=jr(),K2t=E1(),X2t=Br(),Q2t=sr(),J2t=Object.getOwnPropertyDescriptor,aEe=/^\s*class\b/,eDt=Z2t(aEe.exec),tDt=function(t){try{if(!Q2t||!eDt(aEe,K2t(t)))return!1}catch(r){}var e=J2t(t,"prototype");return!!e&&X2t(e,"writable")&&!e.writable};W2t({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(e){return Y2t(e)&&!tDt(e)}})});var lEe=R(()=>{"use strict";p();var rDt=oe(),nDt=rc();rDt({target:"Function",stat:!0,forced:!0},{isConstructor:nDt})});var fEe=R(()=>{"use strict";p();var iDt=mr(),oDt=ei().f,uEe=iDt("metadata"),cEe=Function.prototype;cEe[uEe]===void 0&&oDt(cEe,uEe,{value:null})});var hEe=R(()=>{"use strict";p();var aDt=oe(),sDt=N6();aDt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:sDt})});var pEe=R(()=>{"use strict";p();r3()});var dEe=R(()=>{"use strict";p();s3()});var k6=R((Lqr,mEe)=>{"use strict";p();kP();var lDt=jt(),uDt=fd().IteratorPrototype.map,cDt=function(t,e){return[e,t]};mEe.exports=function(){return lDt(uDt,this,cDt)}});var gEe=R(()=>{"use strict";p();var fDt=oe(),hDt=k6();fDt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:hDt})});var _Ee=R(()=>{"use strict";p();var pDt=oe(),vEe=jt(),dDt=xr(),yEe=Bt(),mDt=Xc(),gDt=xd(),vDt=ko(),yDt=Array,_Dt=gDt(function(){for(;;){var t=this.iterator;if(!t){var e=this.nextIterableIndex++,r=this.iterables;if(e>=r.length)return this.done=!0,vDt(void 0,!0);var n=r[e];this.iterables[e]=null,t=this.iterator=vEe(n.method,n.iterable),this.next=t.next}var i=yEe(vEe(this.next,t));if(i.done){this.iterator=null,this.next=null;continue}return i}},!1,!0);pDt({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var e=arguments.length,r=yDt(e),n=0;n<e;n++){var i=yEe(arguments[n]);r[n]={iterable:i,method:dDt(mDt(i))}}return new _Dt({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var wEe=R(()=>{"use strict";p();var xDt=jt(),bDt=Nn(),wDt=Xi(),EDt=Br(),SDt=mr(),xEe=fd().IteratorPrototype,bEe=SDt("dispose");EDt(xEe,bEe)||bDt(xEe,bEe,function(){var t=wDt(this,"return");t&&xDt(t,this)})});var EEe=R(()=>{"use strict";p();h3()});var SEe=R(()=>{"use strict";p();d3()});var TEe=R(()=>{"use strict";p();g3()});var IEe=R(()=>{"use strict";p();y3()});var AEe=R(()=>{"use strict";p();S3()});var MEe=R(()=>{"use strict";p();I3()});var CEe=R(()=>{"use strict";p();A3()});var PEe=R(()=>{"use strict";p();var TDt=oe(),IDt=k6();TDt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:IDt})});var REe=R(()=>{"use strict";p();kP()});var LEe=R(()=>{"use strict";p();var ADt=oe(),OEe=tO(),MDt=TypeError;ADt({target:"Iterator",stat:!0,forced:!0},{range:function(e,r,n){if(typeof e=="number")return new OEe(e,r,n,"number",0,1);if(typeof e=="bigint")return new OEe(e,r,n,"bigint",BigInt(0),BigInt(1));throw new MDt("Incorrect Iterator.range arguments")}})});var DEe=R(()=>{"use strict";p();P3()});var NEe=R(()=>{"use strict";p();O3()});var kEe=R(()=>{"use strict";p();D3()});var qEe=R(()=>{"use strict";p();N3()});var jEe=R(()=>{"use strict";p();var CDt=oe(),PDt=Bt(),RDt=kE(),ODt=w6(),FEe=wi();CDt({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new ODt(FEe(new RDt(FEe(PDt(this)))))}})});var q6=R((NFr,zEe)=>{"use strict";p();var LDt=yt();zEe.exports=!LDt(function(){var t="9007199254740993",e=JSON.rawJSON(t);return!JSON.isRawJSON(e)||JSON.stringify(e)!==t})});var F6=R((qFr,UEe)=>{"use strict";p();var DDt=hr(),NDt=Cn().get;UEe.exports=function(e){if(!DDt(e))return!1;var r=NDt(e);return!!r&&r.type==="RawJSON"}});var BEe=R(()=>{"use strict";p();var kDt=oe(),qDt=q6(),FDt=F6();kDt({target:"JSON",stat:!0,forced:!qDt},{isRawJSON:FDt})});var z6=R((BFr,HEe)=>{"use strict";p();var j6=ct(),jDt=Br(),lO=SyntaxError,zDt=parseInt,UDt=String.fromCharCode,BDt=j6("".charAt),VEe=j6("".slice),GEe=j6(/./.exec),$Ee={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},VDt=/^[\da-f]{4}$/i,GDt=/^[\u0000-\u001F]$/;HEe.exports=function(t,e){for(var r=!0,n="";e<t.length;){var i=BDt(t,e);if(i==="\\"){var o=VEe(t,e,e+2);if(jDt($Ee,o))n+=$Ee[o],e+=2;else if(o==="\\u"){e+=2;var l=VEe(t,e,e+4);if(!GEe(VDt,l))throw new lO("Bad Unicode escape at: "+e);n+=UDt(zDt(l,16)),e+=4}else throw new lO("Unknown escape sequence: \""+o+"\"")}else if(i==="\""){r=!1,e++;break}else{if(GEe(GDt,i))throw new lO("Bad control character in string literal at: "+e);n+=i,e++}}if(r)throw new lO("Unterminated string at: "+e);return{value:n,end:e}}});var eSe=R(()=>{"use strict";p();var $Dt=oe(),HDt=sr(),Z6=Ft(),WDt=_r(),uO=ct(),ZDt=jt(),QEe=jr(),YDt=hr(),KDt=tc(),XDt=Br(),QDt=Mr(),WEe=sn(),$6=tu(),JEe=yt(),JDt=z6(),eNt=td(),ZEe=Z6.JSON,tNt=Z6.Number,t0=Z6.SyntaxError,Y6=ZEe&&ZEe.parse,rNt=WDt("Object","keys"),nNt=Object.getOwnPropertyDescriptor,va=uO("".charAt),U6=uO("".slice),B6=uO(/./.exec),YEe=uO([].push),V6=/^\d$/,iNt=/^[1-9]$/,oNt=/^[\d-]$/,BE=/^[\t\n\r ]$/,G6=0,KEe=1,aNt=function(t,e){t=QDt(t);var r=new W6(t,0,""),n=r.parse(),i=n.value,o=r.skip(BE,n.end);if(o<t.length)throw new t0("Unexpected extra character: \""+va(t,o)+"\" after the parsed data at: "+o);return QEe(e)?H6({"":i},"",e,n):i},H6=function(t,e,r,n){var i=t[e],o=n&&i===n.value,l=o&&typeof n.source=="string"?{source:n.source}:{},f,d,v,x,b;if(YDt(i)){var A=KDt(i),P=o?n.nodes:A?[]:{};if(A)for(f=P.length,v=WEe(i),x=0;x<v;x++)XEe(i,x,H6(i,""+x,r,x<f?P[x]:void 0));else for(d=rNt(i),v=WEe(d),x=0;x<v;x++)b=d[x],XEe(i,b,H6(i,b,r,XDt(P,b)?P[b]:void 0))}return ZDt(r,t,e,i,l)},XEe=function(t,e,r){if(HDt){var n=nNt(t,e);if(n&&!n.configurable)return}r===void 0?delete t[e]:$6(t,e,r)},sNt=function(t,e,r,n){this.value=t,this.end=e,this.source=r,this.nodes=n},W6=function(t,e){this.source=t,this.index=e};W6.prototype={fork:function(t){return new W6(this.source,t)},parse:function(){var t=this.source,e=this.skip(BE,this.index),r=this.fork(e),n=va(t,e);if(B6(oNt,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null)}throw new t0("Unexpected character: \""+n+"\" at: "+e)},node:function(t,e,r,n,i){return new sNt(e,n,t?null:U6(this.source,r,n),i)},object:function(){for(var t=this.source,e=this.index+1,r=!1,n={},i={};e<t.length;){if(e=this.until(["\"","}"],e),va(t,e)==="}"&&!r){e++;break}var o=this.fork(e).string(),l=o.value;e=o.end,e=this.until([":"],e)+1,e=this.skip(BE,e),o=this.fork(e).parse(),$6(i,l,o),$6(n,l,o.value),e=this.until([",","}"],o.end);var f=va(t,e);if(f===",")r=!0,e++;else if(f==="}"){e++;break}}return this.node(KEe,n,this.index,e,i)},array:function(){for(var t=this.source,e=this.index+1,r=!1,n=[],i=[];e<t.length;){if(e=this.skip(BE,e),va(t,e)==="]"&&!r){e++;break}var o=this.fork(e).parse();if(YEe(i,o),YEe(n,o.value),e=this.until([",","]"],o.end),va(t,e)===",")r=!0,e++;else if(va(t,e)==="]"){e++;break}}return this.node(KEe,n,this.index,e,i)},string:function(){var t=this.index,e=JDt(this.source,this.index+1);return this.node(G6,e.value,t,e.end)},number:function(){var t=this.source,e=this.index,r=e;if(va(t,r)==="-"&&r++,va(t,r)==="0")r++;else if(B6(iNt,va(t,r)))r=this.skip(V6,r+1);else throw new t0("Failed to parse number at: "+r);if(va(t,r)==="."&&(r=this.skip(V6,r+1)),va(t,r)==="e"||va(t,r)==="E"){r++,(va(t,r)==="+"||va(t,r)==="-")&&r++;var n=r;if(r=this.skip(V6,r),n===r)throw new t0("Failed to parse number's exponent value at: "+r)}return this.node(G6,tNt(U6(t,e,r)),e,r)},keyword:function(t){var e=""+t,r=this.index,n=r+e.length;if(U6(this.source,r,n)!==e)throw new t0("Failed to parse value at: "+r);return this.node(G6,t,r,n)},skip:function(t,e){for(var r=this.source;e<r.length&&B6(t,va(r,e));e++);return e},until:function(t,e){e=this.skip(BE,e);for(var r=va(this.source,e),n=0;n<t.length;n++)if(t[n]===r)return e;throw new t0("Unexpected character: \""+r+"\" at: "+e)}};var lNt=JEe(function(){var t="9007199254740993",e;return Y6(t,function(r,n,i){e=i.source}),e!==t}),uNt=eNt&&!JEe(function(){return 1/Y6("-0 \t")!==-1/0});$Dt({target:"JSON",stat:!0,forced:lNt},{parse:function(e,r){return uNt&&!QEe(r)?Y6(e):aNt(e,r)}})});var lSe=R(()=>{"use strict";p();var aSe=oe(),cNt=Eh(),sSe=q6(),cO=_r(),fNt=jt(),J6=ct(),hNt=jr(),pNt=F6(),dNt=Mr(),mNt=tu(),gNt=z6(),vNt=uU(),yNt=nd(),_Nt=Cn().set,xNt=String,tSe=SyntaxError,bNt=cO("JSON","parse"),rSe=cO("JSON","stringify"),wNt=cO("Object","create"),ENt=cO("Object","freeze"),X6=J6("".charAt),K6=J6("".slice),SNt=J6([].push),Q6=yNt(),nSe=Q6.length,iSe="Unacceptable as raw JSON",oSe=function(t){return t===" "||t==="\t"||t===`
`||t==="\r"};aSe({target:"JSON",stat:!0,forced:!sSe},{rawJSON:function(e){var r=dNt(e);if(r===""||oSe(X6(r,0))||oSe(X6(r,r.length-1)))throw new tSe(iSe);var n=bNt(r);if(typeof n=="object"&&n!==null)throw new tSe(iSe);var i=wNt(null);return _Nt(i,{type:"RawJSON"}),mNt(i,"rawJSON",r),cNt?ENt(i):i}});rSe&&aSe({target:"JSON",stat:!0,arity:3,forced:!sSe},{stringify:function(e,r,n){var i=vNt(r),o=[],l=rSe(e,function(P,N){var j=hNt(i)?fNt(i,this,xNt(P),N):N;return pNt(j)?Q6+(SNt(o,j.rawJSON)-1):j},n);if(typeof l!="string")return l;for(var f="",d=l.length,v=0;v<d;v++){var x=X6(l,v);if(x==="\""){var b=gNt(l,++v).end-1,A=K6(l,v,b);f+=K6(A,0,nSe)===Q6?o[K6(A,nSe)]:"\""+A+"\"",v=b}else f+=x}return f}})});var ya=R((KFr,uSe)=>{"use strict";p();var TNt=qo().has;uSe.exports=function(t){return TNt(t),t}});var cSe=R(()=>{"use strict";p();var INt=oe(),ANt=ya(),MNt=qo().remove;INt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=ANt(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=MNt(e,arguments[i]),r=r&&n;return!!r}})});var hSe=R(()=>{"use strict";p();var CNt=oe(),PNt=ya(),e$=qo(),RNt=e$.get,ONt=e$.has,fSe=e$.set;CNt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(e,r){var n=PNt(this),i,o;return ONt(n,e)?(i=RNt(n,e),"update"in r&&(i=r.update(i,e,n),fSe(n,e,i)),i):(o=r.insert(e,n),fSe(n,e,o),o)}})});var pSe=R(()=>{"use strict";p();var LNt=oe(),DNt=Hn(),NNt=ya(),kNt=iu();LNt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var r=NNt(this),n=DNt(e,arguments.length>1?arguments[1]:void 0);return kNt(r,function(i,o){if(!n(i,o,r))return!1},!0)!==!1}})});var mSe=R(()=>{"use strict";p();var qNt=oe(),FNt=Hn(),jNt=ya(),dSe=qo(),zNt=iu(),UNt=dSe.Map,BNt=dSe.set;qNt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var r=jNt(this),n=FNt(e,arguments.length>1?arguments[1]:void 0),i=new UNt;return zNt(r,function(o,l){n(o,l,r)&&BNt(i,l,o)}),i}})});var gSe=R(()=>{"use strict";p();var VNt=oe(),GNt=Hn(),$Nt=ya(),HNt=iu();VNt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var r=$Nt(this),n=GNt(e,arguments.length>1?arguments[1]:void 0),i=HNt(r,function(o,l){if(n(o,l,r))return{value:o}},!0);return i&&i.value}})});var vSe=R(()=>{"use strict";p();var WNt=oe(),ZNt=Hn(),YNt=ya(),KNt=iu();WNt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var r=YNt(this),n=ZNt(e,arguments.length>1?arguments[1]:void 0),i=KNt(r,function(o,l){if(n(o,l,r))return{key:l}},!0);return i&&i.key}})});var VE=R((gjr,ySe)=>{"use strict";p();var XNt=Hn(),QNt=Bt(),JNt=Yr(),ekt=Pi();ySe.exports=function(t,e,r){return function(i){var o=JNt(i),l=arguments.length,f=l>1?arguments[1]:void 0,d=f!==void 0,v=d?XNt(f,l>2?arguments[2]:void 0):void 0,x=new t,b=0;return ekt(o,function(A){var P=d?v(A,b++):A;r?e(x,QNt(P)[0],P[1]):e(x,P)}),x}}});var xSe=R(()=>{"use strict";p();var tkt=oe(),_Se=qo(),rkt=VE();tkt({target:"Map",stat:!0,forced:!0},{from:rkt(_Se.Map,_Se.set,!0)})});var bSe=R(()=>{"use strict";p();var nkt=oe(),ikt=ya(),t$=qo(),okt=t$.get,akt=t$.has,skt=t$.set;nkt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(e,r){return akt(ikt(this),e)?okt(this,e):(skt(this,e,r),r)}})});var wSe=R(()=>{"use strict";p();var lkt=oe(),ukt=xr(),ckt=ya(),r$=qo(),fkt=r$.get,hkt=r$.has,pkt=r$.set;lkt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(e,r){if(ckt(this),ukt(r),hkt(this,e))return fkt(this,e);e===0&&1/e===-1/0&&(e=0);var n=r(e);return pkt(this,e,n),n}})});var ESe=R(()=>{"use strict";p();V3()});var TSe=R((Pjr,SSe)=>{"use strict";p();SSe.exports=function(t,e){return t===e||t!==t&&e!==e}});var ISe=R(()=>{"use strict";p();var dkt=oe(),mkt=TSe(),gkt=ya(),vkt=iu();dkt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return vkt(gkt(this),function(r){if(mkt(r,e))return!0},!0)===!0}})});var MSe=R(()=>{"use strict";p();var ykt=oe(),_kt=jt(),xkt=Pi(),bkt=jr(),ASe=xr(),wkt=qo().Map;ykt({target:"Map",stat:!0,forced:!0},{keyBy:function(e,r){var n=bkt(this)?this:wkt,i=new n;ASe(r);var o=ASe(i.set);return xkt(e,function(l){_kt(o,i,r(l),l)}),i}})});var CSe=R(()=>{"use strict";p();var Ekt=oe(),Skt=ya(),Tkt=iu();Ekt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var r=Tkt(Skt(this),function(n,i){if(n===e)return{key:i}},!0);return r&&r.key}})});var RSe=R(()=>{"use strict";p();var Ikt=oe(),Akt=Hn(),Mkt=ya(),PSe=qo(),Ckt=iu(),Pkt=PSe.Map,Rkt=PSe.set;Ikt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var r=Mkt(this),n=Akt(e,arguments.length>1?arguments[1]:void 0),i=new Pkt;return Ckt(r,function(o,l){Rkt(i,n(o,l,r),o)}),i}})});var LSe=R(()=>{"use strict";p();var Okt=oe(),Lkt=Hn(),Dkt=ya(),OSe=qo(),Nkt=iu(),kkt=OSe.Map,qkt=OSe.set;Okt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var r=Dkt(this),n=Lkt(e,arguments.length>1?arguments[1]:void 0),i=new kkt;return Nkt(r,function(o,l){qkt(i,l,n(o,l,r))}),i}})});var DSe=R(()=>{"use strict";p();var Fkt=oe(),jkt=ya(),zkt=Pi(),Ukt=qo().set;Fkt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var r=jkt(this),n=arguments.length,i=0;i<n;)zkt(arguments[i++],function(o,l){Ukt(r,o,l)},{AS_ENTRIES:!0});return r}})});var GE=R((Kjr,NSe)=>{"use strict";p();var Bkt=Bt();NSe.exports=function(t,e,r){return function(){for(var i=new t,o=arguments.length,l=0;l<o;l++){var f=arguments[l];r?e(i,Bkt(f)[0],f[1]):e(i,f)}return i}}});var qSe=R(()=>{"use strict";p();var Vkt=oe(),kSe=qo(),Gkt=GE();Vkt({target:"Map",stat:!0,forced:!0},{of:Gkt(kSe.Map,kSe.set,!0)})});var FSe=R(()=>{"use strict";p();var $kt=oe(),Hkt=xr(),Wkt=ya(),Zkt=iu(),Ykt=TypeError;$kt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var r=Wkt(this),n=arguments.length<2,i=n?void 0:arguments[1];if(Hkt(e),Zkt(r,function(o,l){n?(n=!1,i=o):i=e(i,o,l,r)}),n)throw new Ykt("Reduce of empty map with no initial value");return i}})});var jSe=R(()=>{"use strict";p();var Kkt=oe(),Xkt=Hn(),Qkt=ya(),Jkt=iu();Kkt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var r=Qkt(this),n=Xkt(e,arguments.length>1?arguments[1]:void 0);return Jkt(r,function(i,o){if(n(i,o,r))return!0},!0)===!0}})});var USe=R(()=>{"use strict";p();var eqt=oe(),zSe=xr(),tqt=ya(),n$=qo(),rqt=TypeError,nqt=n$.get,iqt=n$.has,oqt=n$.set;eqt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,r){var n=tqt(this),i=arguments.length;zSe(r);var o=iqt(n,e);if(!o&&i<3)throw new rqt("Updating absent value");var l=o?nqt(n,e):zSe(i>2?arguments[2]:void 0)(e,n);return oqt(n,e,r(l,e,n)),n}})});var pO=R((czr,BSe)=>{"use strict";p();var fO=jt(),i$=xr(),hO=jr(),aqt=Bt(),sqt=TypeError;BSe.exports=function(e,r){var n=aqt(this),i=i$(n.get),o=i$(n.has),l=i$(n.set),f=arguments.length>2?arguments[2]:void 0,d;if(!hO(r)&&!hO(f))throw new sqt("At least one callback required");return fO(o,n,e)?(d=fO(i,n,e),hO(r)&&(d=r(d),fO(l,n,e,d))):hO(f)&&(d=f(),fO(l,n,e,d)),d}});var VSe=R(()=>{"use strict";p();var lqt=oe(),uqt=pO();lqt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:uqt})});var GSe=R(()=>{"use strict";p();var cqt=oe(),fqt=pO();cqt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:fqt})});var HSe=R((yzr,$Se)=>{"use strict";p();var hqt=TypeError;$Se.exports=function(t){if(typeof t=="number")return t;throw new hqt("Argument is not a number")}});var YSe=R(()=>{"use strict";p();var pqt=oe(),o$=HSe(),WSe=I_(),ZSe=YP(),dqt=RangeError,mqt=Math.min,gqt=Math.max;pqt({target:"Math",stat:!0,forced:!0},{clamp:function(e,r,n){if(o$(e),WSe(o$(r)),WSe(o$(n)),ZSe(r,0)&&ZSe(n,-0)||r>n)throw new dqt("`min` should be smaller than `max`");return mqt(n,gqt(r,e))}})});var KSe=R(()=>{"use strict";p();var vqt=oe();vqt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var XSe=R(()=>{"use strict";p();var yqt=oe(),_qt=180/Math.PI;yqt({target:"Math",stat:!0,forced:!0},{degrees:function(e){return e*_qt}})});var a$=R((Czr,QSe)=>{"use strict";p();QSe.exports=function(e,r,n,i,o){var l=+e,f=+r,d=+n,v=+i,x=+o;return l!==l||f!==f||d!==d||v!==v||x!==x?NaN:l===1/0||l===-1/0?l:(l-f)*(x-v)/(d-f)+v}});var JSe=R(()=>{"use strict";p();var xqt=oe(),bqt=a$(),wqt=bP();xqt({target:"Math",stat:!0,forced:!0},{fscale:function(e,r,n,i,o){return wqt(bqt(e,r,n,i,o))}})});var eTe=R(()=>{"use strict";p();W3()});var tTe=R(()=>{"use strict";p();var Eqt=oe();Eqt({target:"Math",stat:!0,forced:!0},{iaddh:function(e,r,n,i){var o=e>>>0,l=r>>>0,f=n>>>0;return l+(i>>>0)+((o&f|(o|f)&~(o+f>>>0))>>>31)|0}})});var rTe=R(()=>{"use strict";p();var Sqt=oe();Sqt({target:"Math",stat:!0,forced:!0},{imulh:function(e,r){var n=65535,i=+e,o=+r,l=i&n,f=o&n,d=i>>16,v=o>>16,x=(d*f>>>0)+(l*f>>>16);return d*v+(x>>16)+((l*v>>>0)+(x&n)>>16)}})});var nTe=R(()=>{"use strict";p();var Tqt=oe();Tqt({target:"Math",stat:!0,forced:!0},{isubh:function(e,r,n,i){var o=e>>>0,l=r>>>0,f=n>>>0;return l-(i>>>0)-((~o&f|~(o^f)&o-f>>>0)>>>31)|0}})});var iTe=R(()=>{"use strict";p();var Iqt=oe();Iqt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var oTe=R(()=>{"use strict";p();var Aqt=oe(),Mqt=Math.PI/180;Aqt({target:"Math",stat:!0,forced:!0},{radians:function(e){return e*Mqt}})});var aTe=R(()=>{"use strict";p();var Cqt=oe(),Pqt=a$();Cqt({target:"Math",stat:!0,forced:!0},{scale:Pqt})});var cTe=R(()=>{"use strict";p();var Rqt=oe(),Oqt=Bt(),Lqt=t5(),Dqt=hd(),Nqt=ko(),sTe=Cn(),lTe="Seeded Random",uTe=lTe+" Generator",kqt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",qqt=sTe.set,Fqt=sTe.getterFor(uTe),jqt=TypeError,zqt=Dqt(function(e){qqt(this,{type:uTe,seed:e%2147483647})},lTe,function(){var e=Fqt(this),r=e.seed=(e.seed*1103515245+12345)%2147483647;return Nqt((r&1073741823)/1073741823,!1)});Rqt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(e){var r=Oqt(e).seed;if(!Lqt(r))throw new jqt(kqt);return new zqt(r)}})});var fTe=R(()=>{"use strict";p();var Uqt=oe();Uqt({target:"Math",stat:!0,forced:!0},{signbit:function(e){var r=+e;return r===r&&r===0?1/r===-1/0:r<0}})});var gTe=R(()=>{"use strict";p();var Bqt=oe(),Vqt=ct(),Gqt=Pi(),$qt=RangeError,Hqt=TypeError,ou=1/0,Wqt=NaN,jg=Math.abs,c$=Math.pow,hTe=Vqt([].push),$E=c$(2,1023),Zqt=c$(2,53)-1,pTe=Number.MAX_VALUE,dTe=c$(2,971),HE={},s$={},l$={},u$={},mTe={},dO=function(t,e){var r=t+e,n=e-(r-t);return{hi:r,lo:n}};Bqt({target:"Math",stat:!0},{sumPrecise:function(e){var r=[],n=0,i=u$;switch(Gqt(e,function($){if(++n>=Zqt)throw new $qt("Maximum allowed index exceeded");if(typeof $!="number")throw new Hqt("Value is not a number");i!==HE&&($!==$?i=HE:$===ou?i=i===s$?HE:l$:$===-ou?i=i===l$?HE:s$:($!==0||1/$===ou)&&(i===u$||i===mTe)&&(i=mTe,hTe(r,$)))}),i){case HE:return Wqt;case s$:return-ou;case l$:return ou;case u$:return-0}for(var o=[],l=0,f,d,v,x,b,A,P=0;P<r.length;P++){f=r[P];for(var N=0,j=0;j<o.length;j++){if(d=o[j],jg(f)<jg(d)&&(A=f,f=d,d=A),v=dO(f,d),x=v.hi,b=v.lo,jg(x)===ou){var D=x===ou?1:-1;l+=D,f=f-D*$E-D*$E,jg(f)<jg(d)&&(A=f,f=d,d=A),v=dO(f,d),x=v.hi,b=v.lo}b!==0&&(o[N++]=b),f=x}o.length=N,f!==0&&hTe(o,f)}var F=o.length-1;if(x=0,b=0,l!==0){var U=F>=0?o[F]:0;if(F--,jg(l)>1||l>0&&U>0||l<0&&U<0)return l>0?ou:-ou;if(v=dO(l*$E,U/2),x=v.hi,b=v.lo,b*=2,jg(2*x)===ou)return x>0?x===$E&&b===-(dTe/2)&&F>=0&&o[F]<0?pTe:ou:x===-$E&&b===dTe/2&&F>=0&&o[F]>0?-pTe:-ou;b!==0&&(o[++F]=b,b=0),x*=2}for(;F>=0&&(v=dO(x,o[F--]),x=v.hi,b=v.lo,b===0););return F>=0&&(b<0&&o[F]<0||b>0&&o[F]>0)&&(d=b*2,f=x+d,d===f-x&&(x=f)),x}})});var vTe=R(()=>{"use strict";p();var Yqt=oe();Yqt({target:"Math",stat:!0,forced:!0},{umulh:function(e,r){var n=65535,i=+e,o=+r,l=i&n,f=o&n,d=i>>>16,v=o>>>16,x=(d*f>>>0)+(l*f>>>16);return d*v+(x>>>16)+((l*v>>>0)+(x&n)>>>16)}})});var xTe=R(()=>{"use strict";p();var Kqt=oe(),ZE=ct(),Xqt=fi(),WE="Invalid number representation",Qqt="Invalid radix",Jqt=RangeError,mO=SyntaxError,eFt=TypeError,yTe=parseInt,tFt=Math.pow,_Te=/^[\d.a-z]+$/,rFt=ZE("".charAt),nFt=ZE(_Te.exec),iFt=ZE(1 .toString),oFt=ZE("".slice),aFt=ZE("".split);Kqt({target:"Number",stat:!0,forced:!0},{fromString:function(e,r){var n=1;if(typeof e!="string")throw new eFt(WE);if(!e.length)throw new mO(WE);if(rFt(e,0)==="-"&&(n=-1,e=oFt(e,1),!e.length))throw new mO(WE);var i=r===void 0?10:Xqt(r);if(i<2||i>36)throw new Jqt(Qqt);if(!nFt(_Te,e))throw new mO(WE);var o=aFt(e,"."),l=yTe(o[0],i);if(o.length>1&&(l+=yTe(o[1],i)/tFt(i,o[1].length)),i===10&&iFt(l,i)!==e)throw new mO(WE);return n*l}})});var bTe=R(()=>{"use strict";p();var sFt=oe(),lFt=tO();sFt({target:"Number",stat:!0,forced:!0},{range:function(e,r,n){return new lFt(e,r,n,"number",0,1)}})});var wTe=R(()=>{"use strict";p();d5()});var vO=R((w4r,TTe)=>{"use strict";p();var ETe=Cn(),uFt=hd(),gO=ko(),cFt=Br(),fFt=yg(),hFt=Yr(),STe="Object Iterator",pFt=ETe.set,dFt=ETe.getterFor(STe);TTe.exports=uFt(function(e,r){var n=hFt(e);pFt(this,{type:STe,mode:r,object:n,keys:fFt(n),index:0})},"Object",function(){for(var e=dFt(this),r=e.keys;;){if(r===null||e.index>=r.length)return e.object=e.keys=null,gO(void 0,!0);var n=r[e.index++],i=e.object;if(cFt(i,n)){switch(e.mode){case"keys":return gO(n,!1);case"values":return gO(i[n],!1)}return gO([n,i[n]],!1)}}})});var ITe=R(()=>{"use strict";p();var mFt=oe(),gFt=vO();mFt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(e){return new gFt(e,"entries")}})});var ATe=R(()=>{"use strict";p();var vFt=oe(),yFt=vO();vFt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(e){return new yFt(e,"keys")}})});var MTe=R(()=>{"use strict";p();var _Ft=oe(),xFt=vO();_Ft({target:"Object",stat:!0,forced:!0},{iterateValues:function(e){return new xFt(e,"values")}})});var CTe=R(()=>{"use strict";p();p5()});var jTe=R(()=>{"use strict";p();var bFt=oe(),yO=jt(),YE=sr(),wFt=dd(),PTe=xr(),EFt=Bt(),SFt=ka(),RTe=jr(),TFt=Ds(),IFt=hr(),_O=Xi(),AFt=Nn(),f$=nu(),OTe=hi(),r0=k5(),MFt=mr(),LTe=Cn(),CFt=MFt("observable"),h$="Observable",DTe="Subscription",NTe="SubscriptionObserver",p$=LTe.getterFor,d$=LTe.set,PFt=p$(h$),kTe=p$(DTe),xO=p$(NTe),qTe=function(t){this.observer=EFt(t),this.cleanup=null,this.subscriptionObserver=null};qTe.prototype={type:DTe,clean:function(){var t=this.cleanup;if(t){this.cleanup=null;try{t()}catch(e){r0(e)}}},close:function(){if(!YE){var t=this.facade,e=this.subscriptionObserver;t.closed=!0,e&&(e.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var m$=function(t,e){var r=d$(this,new qTe(t)),n;YE||(this.closed=!1);try{(n=_O(t,"start"))&&yO(n,t,this)}catch(f){r0(f)}if(!r.isClosed()){var i=r.subscriptionObserver=new g$(r);try{var o=e(i),l=o;TFt(o)||(r.cleanup=RTe(o.unsubscribe)?function(){l.unsubscribe()}:PTe(o))}catch(f){i.error(f);return}r.isClosed()&&r.clean()}};m$.prototype=f$({},{unsubscribe:function(){var e=kTe(this);e.isClosed()||(e.close(),e.clean())}});YE&&OTe(m$.prototype,"closed",{configurable:!0,get:function(){return kTe(this).isClosed()}});var g$=function(t){d$(this,{type:NTe,subscriptionState:t}),YE||(this.closed=!1)};g$.prototype=f$({},{next:function(e){var r=xO(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var i=_O(n,"next");i&&yO(i,n,e)}catch(o){r0(o)}}},error:function(e){var r=xO(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var i=_O(n,"error");i?yO(i,n,e):r0(e)}catch(o){r0(o)}r.clean()}},complete:function(){var e=xO(this).subscriptionState;if(!e.isClosed()){var r=e.observer;e.close();try{var n=_O(r,"complete");n&&yO(n,r)}catch(i){r0(i)}e.clean()}}});YE&&OTe(g$.prototype,"closed",{configurable:!0,get:function(){return xO(this).subscriptionState.isClosed()}});var FTe=function(e){SFt(this,v$),d$(this,{type:h$,subscriber:PTe(e)})},v$=FTe.prototype;f$(v$,{subscribe:function(e){var r=arguments.length;return new m$(RTe(e)?{next:e,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:IFt(e)?e:{},PFt(this).subscriber)}});AFt(v$,CFt,function(){return this});bFt({global:!0,constructor:!0,forced:!0},{Observable:FTe});wFt(h$)});var UTe=R(()=>{"use strict";p();var RFt=oe(),OFt=_r(),LFt=jt(),zTe=Bt(),DFt=rc(),NFt=ud(),kFt=Xi(),qFt=Pi(),FFt=mr(),jFt=FFt("observable");RFt({target:"Observable",stat:!0,forced:!0},{from:function(e){var r=DFt(this)?this:OFt("Observable"),n=kFt(zTe(e),jFt);if(n){var i=zTe(LFt(n,e));return i.constructor===r?i:new r(function(l){return i.subscribe(l)})}var o=NFt(e);return new r(function(l){qFt(o,function(f,d){if(l.next(f),l.closed)return d()},{IS_ITERATOR:!0,INTERRUPTED:!0}),l.complete()})}})});var VTe=R(()=>{"use strict";p();var zFt=oe(),BTe=_r(),UFt=rc(),BFt=BTe("Array");zFt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var e=UFt(this)?this:BTe("Observable"),r=arguments.length,n=BFt(r),i=0;i<r;)n[i]=arguments[i++];return new e(function(o){for(var l=0;l<r;l++)if(o.next(n[l]),o.closed)return;o.complete()})}})});var GTe=R(()=>{"use strict";p();jTe();UTe();VTe()});var $Te=R(()=>{"use strict";p();K5()});var HTe=R(()=>{"use strict";p();X5()});var WTe=R(()=>{"use strict";p();tV()});var ZTe=R(()=>{"use strict";p();rV()});var sf=R((aUr,QTe)=>{"use strict";p();UP();zR();var XTe=_r(),VFt=ct(),GFt=dh(),YTe=XTe("Map"),$Ft=XTe("WeakMap"),HFt=VFt([].push),KTe=GFt("metadata"),y$=KTe.store||(KTe.store=new $Ft),KE=function(t,e,r){var n=y$.get(t);if(!n){if(!r)return;y$.set(t,n=new YTe)}var i=n.get(e);if(!i){if(!r)return;n.set(e,i=new YTe)}return i},WFt=function(t,e,r){var n=KE(e,r,!1);return n===void 0?!1:n.has(t)},ZFt=function(t,e,r){var n=KE(e,r,!1);return n===void 0?void 0:n.get(t)},YFt=function(t,e,r,n){KE(r,n,!0).set(t,e)},KFt=function(t,e){var r=KE(t,e,!1),n=[];return r&&r.forEach(function(i,o){HFt(n,o)}),n},XFt=function(t){return t===void 0||typeof t=="symbol"?t:String(t)};QTe.exports={store:y$,getMap:KE,has:WFt,get:ZFt,set:YFt,keys:KFt,toKey:XFt}});var eIe=R(()=>{"use strict";p();var QFt=oe(),JTe=sf(),JFt=Bt(),ejt=JTe.toKey,tjt=JTe.set;QFt({target:"Reflect",stat:!0},{defineMetadata:function(e,r,n){var i=arguments.length<4?void 0:ejt(arguments[3]);tjt(e,r,JFt(n),i)}})});var rIe=R(()=>{"use strict";p();var rjt=oe(),_$=sf(),njt=Bt(),ijt=_$.toKey,ojt=_$.getMap,tIe=_$.store;rjt({target:"Reflect",stat:!0},{deleteMetadata:function(e,r){var n=arguments.length<3?void 0:ijt(arguments[2]),i=ojt(njt(r),n,!1);if(i===void 0||!i.delete(e))return!1;if(i.size)return!0;var o=tIe.get(r);return o.delete(n),!!o.size||tIe.delete(r)}})});var iIe=R(()=>{"use strict";p();var ajt=oe(),x$=sf(),sjt=Bt(),ljt=bo(),ujt=x$.has,cjt=x$.get,fjt=x$.toKey,nIe=function(t,e,r){var n=ujt(t,e,r);if(n)return cjt(t,e,r);var i=ljt(e);return i!==null?nIe(t,i,r):void 0};ajt({target:"Reflect",stat:!0},{getMetadata:function(e,r){var n=arguments.length<3?void 0:fjt(arguments[2]);return nIe(e,sjt(r),n)}})});var lIe=R(()=>{"use strict";p();var hjt=oe(),oIe=ct(),aIe=sf(),pjt=Bt(),djt=bo(),mjt=ZR(),gjt=oIe(mjt),vjt=oIe([].concat),yjt=aIe.keys,_jt=aIe.toKey,sIe=function(t,e){var r=yjt(t,e),n=djt(t);if(n===null)return r;var i=sIe(n,e);return i.length?r.length?gjt(vjt(r,i)):i:r};hjt({target:"Reflect",stat:!0},{getMetadataKeys:function(e){var r=arguments.length<2?void 0:_jt(arguments[1]);return sIe(pjt(e),r)}})});var cIe=R(()=>{"use strict";p();var xjt=oe(),uIe=sf(),bjt=Bt(),wjt=uIe.get,Ejt=uIe.toKey;xjt({target:"Reflect",stat:!0},{getOwnMetadata:function(e,r){var n=arguments.length<3?void 0:Ejt(arguments[2]);return wjt(e,bjt(r),n)}})});var hIe=R(()=>{"use strict";p();var Sjt=oe(),fIe=sf(),Tjt=Bt(),Ijt=fIe.keys,Ajt=fIe.toKey;Sjt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(e){var r=arguments.length<2?void 0:Ajt(arguments[1]);return Ijt(Tjt(e),r)}})});var mIe=R(()=>{"use strict";p();var Mjt=oe(),pIe=sf(),Cjt=Bt(),Pjt=bo(),Rjt=pIe.has,Ojt=pIe.toKey,dIe=function(t,e,r){var n=Rjt(t,e,r);if(n)return!0;var i=Pjt(e);return i!==null?dIe(t,i,r):!1};Mjt({target:"Reflect",stat:!0},{hasMetadata:function(e,r){var n=arguments.length<3?void 0:Ojt(arguments[2]);return dIe(e,Cjt(r),n)}})});var vIe=R(()=>{"use strict";p();var Ljt=oe(),gIe=sf(),Djt=Bt(),Njt=gIe.has,kjt=gIe.toKey;Ljt({target:"Reflect",stat:!0},{hasOwnMetadata:function(e,r){var n=arguments.length<3?void 0:kjt(arguments[2]);return Njt(e,Djt(r),n)}})});var _Ie=R(()=>{"use strict";p();var qjt=oe(),yIe=sf(),Fjt=Bt(),jjt=yIe.toKey,zjt=yIe.set;qjt({target:"Reflect",stat:!0},{metadata:function(e,r){return function(i,o){zjt(e,r,Fjt(i),jjt(o))}}})});var xIe=R(()=>{"use strict";p();yV()});var bIe=R(()=>{"use strict";p();var Ujt=oe(),Bjt=ga(),Vjt=Qo().add;Ujt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=Bjt(this),r=0,n=arguments.length;r<n;r++)Vjt(e,arguments[r]);return e}})});var wIe=R(()=>{"use strict";p();var Gjt=oe(),$jt=ga(),Hjt=Qo().remove;Gjt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=$jt(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=Hjt(e,arguments[i]),r=r&&n;return!!r}})});var EIe=R(()=>{"use strict";p();IV()});var TIe=R((WUr,SIe)=>{"use strict";p();var Wjt=ss(),Zjt=Br(),Yjt=Ds(),Kjt=mr(),Xjt=Sg(),Qjt=Kjt("iterator"),Jjt=Object;SIe.exports=function(t){if(Yjt(t))return!1;var e=Jjt(t);return e[Qjt]!==void 0||"@@iterator"in e||Zjt(Xjt,Wjt(e))}});var Cd=R((YUr,AIe)=>{"use strict";p();var ezt=_r(),IIe=jr(),tzt=TIe(),rzt=hr(),nzt=ezt("Set"),izt=function(t){return rzt(t)&&typeof t.size=="number"&&IIe(t.has)&&IIe(t.keys)};AIe.exports=function(t){return izt(t)?t:tzt(t)?new nzt(t):t}});var MIe=R(()=>{"use strict";p();var ozt=oe(),azt=jt(),szt=Cd(),lzt=TV();ozt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){return azt(lzt,this,szt(e))}})});var CIe=R(()=>{"use strict";p();var uzt=oe(),czt=Hn(),fzt=ga(),hzt=js();uzt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var r=fzt(this),n=czt(e,arguments.length>1?arguments[1]:void 0);return hzt(r,function(i){if(!n(i,i,r))return!1},!0)!==!1}})});var RIe=R(()=>{"use strict";p();var pzt=oe(),dzt=Hn(),mzt=ga(),PIe=Qo(),gzt=js(),vzt=PIe.Set,yzt=PIe.add;pzt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var r=mzt(this),n=dzt(e,arguments.length>1?arguments[1]:void 0),i=new vzt;return gzt(r,function(o){n(o,o,r)&&yzt(i,o)}),i}})});var OIe=R(()=>{"use strict";p();var _zt=oe(),xzt=Hn(),bzt=ga(),wzt=js();_zt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var r=bzt(this),n=xzt(e,arguments.length>1?arguments[1]:void 0),i=wzt(r,function(o){if(n(o,o,r))return{value:o}},!0);return i&&i.value}})});var DIe=R(()=>{"use strict";p();var Ezt=oe(),LIe=Qo(),Szt=VE();Ezt({target:"Set",stat:!0,forced:!0},{from:Szt(LIe.Set,LIe.add,!1)})});var NIe=R(()=>{"use strict";p();CV()});var kIe=R(()=>{"use strict";p();var Tzt=oe(),Izt=jt(),Azt=Cd(),Mzt=MV();Tzt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){return Izt(Mzt,this,Azt(e))}})});var qIe=R(()=>{"use strict";p();RV()});var FIe=R(()=>{"use strict";p();var Czt=oe(),Pzt=jt(),Rzt=Cd(),Ozt=PV();Czt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){return Pzt(Ozt,this,Rzt(e))}})});var jIe=R(()=>{"use strict";p();LV()});var zIe=R(()=>{"use strict";p();var Lzt=oe(),Dzt=jt(),Nzt=Cd(),kzt=OV();Lzt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){return Dzt(kzt,this,Nzt(e))}})});var UIe=R(()=>{"use strict";p();NV()});var BIe=R(()=>{"use strict";p();var qzt=oe(),Fzt=jt(),jzt=Cd(),zzt=DV();qzt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){return Fzt(zzt,this,jzt(e))}})});var GIe=R(()=>{"use strict";p();var Uzt=oe(),VIe=ct(),Bzt=ga(),Vzt=js(),Gzt=Mr(),$zt=VIe([].join),Hzt=VIe([].push);Uzt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var r=Bzt(this),n=e===void 0?",":Gzt(e),i=[];return Vzt(r,function(o){Hzt(i,o)}),$zt(i,n)}})});var HIe=R(()=>{"use strict";p();var Wzt=oe(),Zzt=Hn(),Yzt=ga(),$Ie=Qo(),Kzt=js(),Xzt=$Ie.Set,Qzt=$Ie.add;Wzt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var r=Yzt(this),n=Zzt(e,arguments.length>1?arguments[1]:void 0),i=new Xzt;return Kzt(r,function(o){Qzt(i,n(o,o,r))}),i}})});var ZIe=R(()=>{"use strict";p();var Jzt=oe(),WIe=Qo(),e4t=GE();Jzt({target:"Set",stat:!0,forced:!0},{of:e4t(WIe.Set,WIe.add,!1)})});var YIe=R(()=>{"use strict";p();var t4t=oe(),r4t=xr(),n4t=ga(),i4t=js(),o4t=TypeError;t4t({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var r=n4t(this),n=arguments.length<2,i=n?void 0:arguments[1];if(r4t(e),i4t(r,function(o){n?(n=!1,i=o):i=e(i,o,o,r)}),n)throw new o4t("Reduce of empty set with no initial value");return i}})});var KIe=R(()=>{"use strict";p();var a4t=oe(),s4t=Hn(),l4t=ga(),u4t=js();a4t({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var r=l4t(this),n=s4t(e,arguments.length>1?arguments[1]:void 0);return u4t(r,function(i){if(n(i,i,r))return!0},!0)===!0}})});var XIe=R(()=>{"use strict";p();FV()});var QIe=R(()=>{"use strict";p();var c4t=oe(),f4t=jt(),h4t=Cd(),p4t=qV();c4t({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){return f4t(p4t,this,h4t(e))}})});var JIe=R(()=>{"use strict";p();zV()});var eAe=R(()=>{"use strict";p();var d4t=oe(),m4t=jt(),g4t=Cd(),v4t=jV();d4t({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){return m4t(v4t,this,g4t(e))}})});var tAe=R(()=>{"use strict";p();var y4t=oe(),_4t=Dg().charAt,x4t=oi(),b4t=fi(),w4t=Mr();y4t({target:"String",proto:!0,forced:!0},{at:function(e){var r=w4t(x4t(this)),n=r.length,i=b4t(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:_4t(r,o)}})});var b$=R((h3r,oAe)=>{"use strict";p();var iAe=ct(),E4t=_o(),rAe=Mr(),S4t=sn(),T4t=TypeError,nAe=iAe([].push),I4t=iAe([].join);oAe.exports=function(e){var r=E4t(e),n=S4t(r);if(!n)return"";for(var i=arguments.length,o=[],l=0;;){var f=r[l++];if(f===void 0)throw new T4t("Incorrect template");if(nAe(o,rAe(f)),l===n)return I4t(o,"");l<i&&nAe(o,rAe(arguments[l]))}}});var aAe=R(()=>{"use strict";p();var A4t=oe(),M4t=b$();A4t({target:"String",stat:!0,forced:!0},{cooked:M4t})});var fAe=R(()=>{"use strict";p();var C4t=oe(),P4t=hd(),sAe=ko(),R4t=oi(),O4t=Mr(),lAe=Cn(),uAe=Dg(),L4t=uAe.codeAt,D4t=uAe.charAt,cAe="String Iterator",N4t=lAe.set,k4t=lAe.getterFor(cAe),q4t=P4t(function(e){N4t(this,{type:cAe,string:e,index:0})},"String",function(){var e=k4t(this),r=e.string,n=e.index,i;return n>=r.length?sAe(void 0,!0):(i=D4t(r,n),e.index+=i.length,sAe({codePoint:L4t(i,0),position:n},!1))});C4t({target:"String",proto:!0,forced:!0},{codePoints:function(){return new q4t(O4t(R4t(this)))}})});var lf=R((x3r,hAe)=>{"use strict";p();var bO=ct(),wO=WeakMap.prototype;hAe.exports={WeakMap,set:bO(wO.set),get:bO(wO.get),has:bO(wO.has),remove:bO(wO.delete)}});var bAe=R((w3r,xAe)=>{"use strict";p();var F4t=_r(),EO=ct(),j4t=String.fromCharCode,z4t=F4t("String","fromCodePoint"),w$=EO("".charAt),yAe=EO("".charCodeAt),pAe=EO("".indexOf),dAe=EO("".slice),S$=48,_Ae=57,mAe=97,U4t=102,gAe=65,B4t=70,vAe=function(t,e){var r=yAe(t,e);return r>=S$&&r<=_Ae},E$=function(t,e,r){if(r>=t.length)return-1;for(var n=0;e<r;e++){var i=V4t(yAe(t,e));if(i===-1)return-1;n=n*16+i}return n},V4t=function(t){return t>=S$&&t<=_Ae?t-S$:t>=mAe&&t<=U4t?t-mAe+10:t>=gAe&&t<=B4t?t-gAe+10:-1};xAe.exports=function(t){for(var e="",r=0,n=0,i;(n=pAe(t,"\\",n))>-1;){if(e+=dAe(t,r,n),++n===t.length)return;var o=w$(t,n++);switch(o){case"b":e+="\b";break;case"t":e+="\t";break;case"n":e+=`
`;break;case"v":e+="\x0B";break;case"f":e+="\f";break;case"r":e+="\r";break;case"\r":n<t.length&&w$(t,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(vAe(t,n))return;e+="\0";break;case"x":if(i=E$(t,n,n+2),i===-1)return;n+=2,e+=j4t(i);break;case"u":if(n<t.length&&w$(t,n)==="{"){var l=pAe(t,"}",++n);if(l===-1)return;i=E$(t,n,l),n=l+1}else i=E$(t,n,n+4),n+=4;if(i===-1||i>1114111)return;e+=z4t(i);break;default:if(vAe(o,0))return;e+=o}r=n}return e+dAe(t,r)}});var RAe=R(()=>{"use strict";p();var G4t=Eh(),$4t=oe(),H4t=I1(),SO=ct(),IAe=ma(),AAe=Bt(),W4t=Yr(),Z4t=jr(),Y4t=sn(),K4t=ei().f,X4t=ks(),TO=lf(),Q4t=b$(),J4t=bAe(),MAe=Mg(),T$=new TO.WeakMap,eUt=TO.get,tUt=TO.has,rUt=TO.set,I$=Array,XE=TypeError,wAe=Object.freeze||Object,nUt=Object.isFrozen,iUt=Math.min,EAe=SO("".charAt),CAe=SO("".slice),oUt=SO("".split),SAe=SO(/./.exec),aUt=/([\n\u2028\u2029]|\r\n?)/g,sUt=RegExp("^["+MAe+"]*"),lUt=RegExp("[^"+MAe+"]"),TAe="Invalid tag",uUt="Invalid opening line",cUt="Invalid closing line",fUt=function(t){var e=t.raw;if(G4t&&!nUt(e))throw new XE("Raw template should be frozen");if(tUt(T$,e))return eUt(T$,e);var r=hUt(e),n=dUt(r);return K4t(n,"raw",{value:wAe(r)}),wAe(n),rUt(T$,e,n),n},hUt=function(t){var e=W4t(t),r=Y4t(e),n=I$(r),i=I$(r),o=0,l,f,d,v;if(!r)throw new XE(TAe);for(;o<r;o++){var x=e[o];if(typeof x=="string")n[o]=oUt(x,aUt);else throw new XE(TAe)}for(o=0;o<r;o++){var b=o+1===r;if(l=n[o],o===0){if(l.length===1||l[0].length>0)throw new XE(uUt);l[1]=""}if(b){if(l.length===1||SAe(lUt,l[l.length-1]))throw new XE(cUt);l[l.length-2]="",l[l.length-1]=""}for(var A=2;A<l.length;A+=2){var P=l[A],N=A+1===l.length&&!b,j=SAe(sUt,P)[0];if(!N&&j.length===P.length){l[A]="";continue}f=pUt(j,f)}}var D=f?f.length:0;for(o=0;o<r;o++){for(l=n[o],d=l[0],v=1;v<l.length;v+=2)d+=l[v]+CAe(l[v+1],D);i[o]=d}return i},pUt=function(t,e){if(e===void 0||t===e)return t;for(var r=0,n=iUt(t.length,e.length);r<n&&EAe(t,r)===EAe(e,r);r++);return CAe(t,0,r)},dUt=function(t){for(var e=0,r=t.length,n=I$(r);e<r;e++)n[e]=J4t(t[e]);return n},PAe=function(t){return H4t(function(e){var r=X4t(arguments);return r[0]=fUt(AAe(e)),IAe(t,this,r)},"")},mUt=PAe(Q4t);$4t({target:"String",stat:!0,forced:!0},{dedent:function(e){return AAe(e),Z4t(e)?PAe(e):IAe(mUt,this,arguments)}})});var OAe=R(()=>{"use strict";p();VV()});var LAe=R(()=>{"use strict";p();XV()});var DAe=R(()=>{"use strict";p();sG()});var NAe=R(()=>{"use strict";p();dG()});var kAe=R(()=>{"use strict";p();var gUt=Ft(),vUt=Ci(),yUt=ei().f,_Ut=Yo().f,A$=gUt.Symbol;vUt("asyncDispose");A$&&(QE=_Ut(A$,"asyncDispose"),QE.enumerable&&QE.configurable&&QE.writable&&yUt(A$,"asyncDispose",{value:QE.value,enumerable:!1,configurable:!1,writable:!1}));var QE});var qAe=R(()=>{"use strict";p();var xUt=Ci();xUt("customMatcher")});var FAe=R(()=>{"use strict";p();var bUt=Ft(),wUt=Ci(),EUt=ei().f,SUt=Yo().f,M$=bUt.Symbol;wUt("dispose");M$&&(JE=SUt(M$,"dispose"),JE.enumerable&&JE.configurable&&JE.writable&&EUt(M$,"dispose",{value:JE.value,enumerable:!1,configurable:!1,writable:!1}));var JE});var P$=R((Z3r,jAe)=>{"use strict";p();var TUt=_r(),IUt=ct(),C$=TUt("Symbol"),AUt=C$.keyFor,MUt=IUt(C$.prototype.valueOf);jAe.exports=C$.isRegisteredSymbol||function(e){try{return AUt(MUt(e))!==void 0}catch(r){return!1}}});var zAe=R(()=>{"use strict";p();var CUt=oe(),PUt=P$();CUt({target:"Symbol",stat:!0},{isRegisteredSymbol:PUt})});var UAe=R(()=>{"use strict";p();var RUt=oe(),OUt=P$();RUt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:OUt})});var L$=R((r5r,WAe)=>{"use strict";p();var LUt=dh(),$Ae=_r(),DUt=ct(),NUt=ph(),kUt=mr(),AO=$Ae("Symbol"),BAe=AO.isWellKnownSymbol,HAe=$Ae("Object","getOwnPropertyNames"),qUt=DUt(AO.prototype.valueOf),VAe=LUt("wks");for(IO=0,R$=HAe(AO),GAe=R$.length;IO<GAe;IO++)try{O$=R$[IO],NUt(AO[O$])&&kUt(O$)}catch(t){}var O$,IO,R$,GAe;WAe.exports=function(e){if(BAe&&BAe(e))return!0;try{for(var r=qUt(e),n=0,i=HAe(VAe),o=i.length;n<o;n++)if(VAe[i[n]]==r)return!0}catch(l){}return!1}});var ZAe=R(()=>{"use strict";p();var FUt=oe(),jUt=L$();FUt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:jUt})});var YAe=R(()=>{"use strict";p();var zUt=oe(),UUt=L$();zUt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:UUt})});var KAe=R(()=>{"use strict";p();var BUt=Ci();BUt("matcher")});var XAe=R(()=>{"use strict";p();var VUt=Ci();VUt("metadata")});var QAe=R(()=>{"use strict";p();var GUt=Ci();GUt("metadataKey")});var JAe=R(()=>{"use strict";p();var $Ut=Ci();$Ut("observable")});var eMe=R(()=>{"use strict";p();var HUt=Ci();HUt("patternMatch")});var tMe=R(()=>{"use strict";p();var WUt=Ci();WUt("replaceAll")});var nMe=R(()=>{"use strict";p();var ZUt=_r(),YUt=uE(),KUt=a6(),rMe=Hr(),XUt=yh(),QUt=rMe.aTypedArrayConstructor,JUt=rMe.exportTypedArrayStaticMethod;JUt("fromAsync",function(e){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,o=n>2?arguments[2]:void 0;return new(ZUt("Promise"))(function(l){YUt(r),l(KUt(e,i,o))}).then(function(l){return XUt(QUt(r),l)})},!0)});var iMe=R(()=>{"use strict";p();CG()});var aMe=R(()=>{"use strict";p();var oMe=Hr(),eBt=Ji().filterReject,tBt=AR(),rBt=oMe.aTypedArray,nBt=oMe.exportTypedArrayMethod;nBt("filterOut",function(e){var r=eBt(rBt(this),e,arguments.length>1?arguments[1]:void 0);return tBt(this,r)},!0)});var lMe=R(()=>{"use strict";p();var sMe=Hr(),iBt=Ji().filterReject,oBt=AR(),aBt=sMe.aTypedArray,sBt=sMe.exportTypedArrayMethod;sBt("filterReject",function(e){var r=iBt(aBt(this),e,arguments.length>1?arguments[1]:void 0);return oBt(this,r)},!0)});var uMe=R(()=>{"use strict";p();PG()});var cMe=R(()=>{"use strict";p();RG()});var fMe=R(()=>{"use strict";p();var D$=Hr(),lBt=HR(),uBt=D$.aTypedArray,cBt=D$.getTypedArrayConstructor,fBt=D$.exportTypedArrayMethod;fBt("groupBy",function(e){var r=arguments.length>1?arguments[1]:void 0;return lBt(uBt(this),e,r,cBt)},!0)});var hMe=R(()=>{"use strict";p();$G()});var pMe=R(()=>{"use strict";p();HG()});var dMe=R(()=>{"use strict";p();var N$=Hr(),hBt=sn(),pBt=wR(),dBt=ec(),mBt=IE(),gBt=fi(),vBt=N$.aTypedArray,yBt=N$.getTypedArrayConstructor,_Bt=N$.exportTypedArrayMethod,xBt=Math.max,bBt=Math.min;_Bt("toSpliced",function(e,r){var n=vBt(this),i=yBt(n),o=hBt(n),l=dBt(e,o),f=arguments.length,d=0,v,x,b,A,P,N,j;if(f===0)v=x=0;else if(f===1)v=0,x=o-l;else if(x=bBt(xBt(gBt(r),0),o-l),v=f-2,v){A=new i(v),b=pBt(A);for(var D=2;D<f;D++)P=arguments[D],A[D-2]=b?mBt(P):+P}for(N=o+v-x,j=new i(N);d<l;d++)j[d]=n[d];for(;d<l+v;d++)j[d]=A[d-l];for(;d<N;d++)j[d]=n[d+x-v];return j},!0)});var mMe=R(()=>{"use strict";p();var wBt=ct(),k$=Hr(),EBt=yh(),SBt=ZR(),TBt=k$.aTypedArray,IBt=k$.getTypedArrayConstructor,ABt=k$.exportTypedArrayMethod,MBt=wBt(SBt);ABt("uniqueBy",function(e){return TBt(this),EBt(IBt(this),MBt(this,e))},!0)});var gMe=R(()=>{"use strict";p();ZG()});var q$=R((cVr,vMe)=>{"use strict";p();var CBt=hr(),PBt=String,RBt=TypeError;vMe.exports=function(t){if(t===void 0||CBt(t))return t;throw new RBt(PBt(t)+" is not an object or undefined")}});var eS=R((hVr,wMe)=>{"use strict";p();var bMe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",yMe=bMe+"+/",_Me=bMe+"-_",xMe=function(t){for(var e={},r=0;r<64;r++)e[t.charAt(r)]=r;return e};wMe.exports={i2c:yMe,c2i:xMe(yMe),i2cUrl:_Me,c2iUrl:xMe(_Me)}});var F$=R((dVr,EMe)=>{"use strict";p();var OBt=TypeError;EMe.exports=function(t){var e=t&&t.alphabet;if(e===void 0||e==="base64"||e==="base64url")return e||"base64";throw new OBt("Incorrect `alphabet` option")}});var B$=R((gVr,IMe)=>{"use strict";p();var SMe=Ft(),LBt=ct(),DBt=q$(),NBt=bE(),kBt=Br(),TMe=eS(),qBt=F$(),FBt=T_(),jBt=TMe.c2i,zBt=TMe.c2iUrl,Pd=SMe.SyntaxError,UBt=SMe.TypeError,zg=LBt("".charAt),j$=function(t,e){for(var r=t.length;e<r;e++){var n=zg(t,e);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return e},z$=function(t,e,r){var n=t.length;n<4&&(t+=n===2?"AA":"A");var i=(e[zg(t,0)]<<18)+(e[zg(t,1)]<<12)+(e[zg(t,2)]<<6)+e[zg(t,3)],o=[i>>16&255,i>>8&255,i&255];if(n===2){if(r&&o[1]!==0)throw new Pd("Extra bits");return[o[0]]}if(n===3){if(r&&o[2]!==0)throw new Pd("Extra bits");return[o[0],o[1]]}return o},U$=function(t,e,r){for(var n=e.length,i=0;i<n;i++)t[r+i]=e[i];return r+n};IMe.exports=function(t,e,r,n){NBt(t),DBt(e);var i=qBt(e)==="base64"?jBt:zBt,o=e?e.lastChunkHandling:void 0;if(o===void 0&&(o="loose"),o!=="loose"&&o!=="strict"&&o!=="stop-before-partial")throw new UBt("Incorrect `lastChunkHandling` option");r&&FBt(r.buffer);var l=r||[],f=0,d=0,v="",x=0;if(n)for(;;){if(x=j$(t,x),x===t.length){if(v.length>0){if(o==="stop-before-partial")break;if(o==="loose"){if(v.length===1)throw new Pd("Malformed padding: exactly one additional character");f=U$(l,z$(v,i,!1),f)}else throw new Pd("Missing padding")}d=t.length;break}var b=zg(t,x);if(++x,b==="="){if(v.length<2)throw new Pd("Padding is too early");if(x=j$(t,x),v.length===2){if(x===t.length){if(o==="stop-before-partial")break;throw new Pd("Malformed padding: only one =")}zg(t,x)==="="&&(++x,x=j$(t,x))}if(x<t.length)throw new Pd("Unexpected character after padding");f=U$(l,z$(v,i,o==="strict"),f),d=t.length;break}if(!kBt(i,b))throw new Pd("Unexpected character");var A=n-f;if(A===1&&v.length===2||A===2&&v.length===3||(v+=b,v.length===4&&(f=U$(l,z$(v,i,!1),f),v="",d=x,f===n)))break}return{bytes:l,read:d,written:f}}});var MMe=R(()=>{"use strict";p();var BBt=oe(),VBt=Ft(),GBt=yh(),$Bt=B$(),AMe=VBt.Uint8Array;AMe&&BBt({target:"Uint8Array",stat:!0},{fromBase64:function(e){var r=$Bt(e,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return GBt(AMe,r.bytes)}})});var G$=R((bVr,OMe)=>{"use strict";p();var V$=Ft(),PMe=ct(),HBt=V$.Uint8Array,CMe=V$.SyntaxError,WBt=V$.parseInt,ZBt=Math.min,RMe=/[^\da-f]/i,YBt=PMe(RMe.exec),KBt=PMe("".slice);OMe.exports=function(t,e){var r=t.length;if(r%2!==0)throw new CMe("String should be an even number of characters");for(var n=e?ZBt(e.length,r/2):r/2,i=e||new HBt(n),o=0,l=0;l<n;){var f=KBt(t,o,o+=2);if(YBt(RMe,f))throw new CMe("String should only contain hex characters");i[l++]=WBt(f,16)}return{bytes:i,read:o}}});var LMe=R(()=>{"use strict";p();var XBt=oe(),QBt=Ft(),JBt=bE(),e3t=G$();QBt.Uint8Array&&XBt({target:"Uint8Array",stat:!0},{fromHex:function(e){return e3t(JBt(e)).bytes}})});var tS=R((IVr,DMe)=>{"use strict";p();var t3t=ss(),r3t=TypeError;DMe.exports=function(t){if(t3t(t)==="Uint8Array")return t;throw new r3t("Argument is not an Uint8Array")}});var NMe=R(()=>{"use strict";p();var n3t=oe(),i3t=Ft(),o3t=B$(),a3t=tS(),MO=i3t.Uint8Array,s3t=!MO||!MO.prototype.setFromBase64||!function(){var t=new MO([255,255,255,255,255]);try{t.setFromBase64("MjYyZg===")}catch(e){return t[0]===50&&t[1]===54&&t[2]===50&&t[3]===255&&t[4]===255}}();MO&&n3t({target:"Uint8Array",proto:!0,forced:s3t},{setFromBase64:function(e){a3t(this);var r=o3t(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var kMe=R(()=>{"use strict";p();var l3t=oe(),u3t=Ft(),c3t=bE(),f3t=tS(),h3t=T_(),p3t=G$();u3t.Uint8Array&&l3t({target:"Uint8Array",proto:!0},{setFromHex:function(e){f3t(this),c3t(e),h3t(this.buffer);var r=p3t(e,this).read;return{read:r,written:r/2}}})});var FMe=R(()=>{"use strict";p();var d3t=oe(),m3t=Ft(),g3t=ct(),v3t=q$(),y3t=tS(),_3t=T_(),qMe=eS(),x3t=F$(),b3t=qMe.i2c,w3t=qMe.i2cUrl,E3t=g3t("".charAt);m3t.Uint8Array&&d3t({target:"Uint8Array",proto:!0},{toBase64:function(){var e=y3t(this),r=arguments.length?v3t(arguments[0]):void 0,n=x3t(r)==="base64"?b3t:w3t,i=!!r&&!!r.omitPadding;_3t(this.buffer);for(var o="",l=0,f=e.length,d,v=function(x){return E3t(n,d>>6*x&63)};l+2<f;l+=3)d=(e[l]<<16)+(e[l+1]<<8)+e[l+2],o+=v(3)+v(2)+v(1)+v(0);return l+2===f?(d=(e[l]<<16)+(e[l+1]<<8),o+=v(3)+v(2)+v(1)+(i?"":"=")):l+1===f&&(d=e[l]<<16,o+=v(3)+v(2)+(i?"":"==")),o}})});var jMe=R(()=>{"use strict";p();var S3t=oe(),T3t=Ft(),I3t=ct(),A3t=tS(),M3t=T_(),C3t=I3t(1 .toString);T3t.Uint8Array&&S3t({target:"Uint8Array",proto:!0},{toHex:function(){A3t(this),M3t(this.buffer);for(var e="",r=0,n=this.length;r<n;r++){var i=C3t(this[r],16);e+=i.length===1?"0"+i:i}return e}})});var rS=R((zVr,zMe)=>{"use strict";p();var P3t=lf().has;zMe.exports=function(t){return P3t(t),t}});var UMe=R(()=>{"use strict";p();var R3t=oe(),O3t=rS(),L3t=lf().remove;R3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=O3t(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=L3t(e,arguments[i]),r=r&&n;return!!r}})});var VMe=R(()=>{"use strict";p();var D3t=oe(),BMe=lf(),N3t=VE();D3t({target:"WeakMap",stat:!0,forced:!0},{from:N3t(BMe.WeakMap,BMe.set,!0)})});var $Me=R(()=>{"use strict";p();var k3t=oe(),GMe=lf(),q3t=GE();k3t({target:"WeakMap",stat:!0,forced:!0},{of:q3t(GMe.WeakMap,GMe.set,!0)})});var WMe=R(()=>{"use strict";p();var F3t=oe(),j3t=rS(),$$=lf(),z3t=$$.get,U3t=$$.has,HMe=$$.set;F3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(e,r){var n=j3t(this),i,o;return U3t(n,e)?(i=z3t(n,e),"update"in r&&(i=r.update(i,e,n),HMe(n,e,i)),i):(o=r.insert(e,n),HMe(n,e,o),o)}})});var ZMe=R(()=>{"use strict";p();var B3t=oe(),V3t=rS(),H$=lf(),G3t=H$.get,$3t=H$.has,H3t=H$.set;B3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(e,r){return $3t(V3t(this),e)?G3t(this,e):(H3t(this,e,r),r)}})});var XMe=R((nGr,KMe)=>{"use strict";p();var W$=lf(),YMe=new W$.WeakMap,W3t=W$.set,Z3t=W$.remove;KMe.exports=function(t){return W3t(YMe,t,1),Z3t(YMe,t),t}});var QMe=R(()=>{"use strict";p();var Y3t=oe(),K3t=xr(),X3t=rS(),Q3t=XMe(),Z$=lf(),J3t=Z$.get,e5t=Z$.has,t5t=Z$.set;Y3t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(e,r){if(X3t(this),Q3t(e),K3t(r),e5t(this,e))return J3t(this,e);var n=r(e);return t5t(this,e,n),n}})});var JMe=R(()=>{"use strict";p();var r5t=oe(),n5t=pO();r5t({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:n5t})});var n0=R((fGr,eCe)=>{"use strict";p();var Y$=ct(),K$=WeakSet.prototype;eCe.exports={WeakSet,add:Y$(K$.add),has:Y$(K$.has),remove:Y$(K$.delete)}});var X$=R((pGr,tCe)=>{"use strict";p();var i5t=n0().has;tCe.exports=function(t){return i5t(t),t}});var rCe=R(()=>{"use strict";p();var o5t=oe(),a5t=X$(),s5t=n0().add;o5t({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var e=a5t(this),r=0,n=arguments.length;r<n;r++)s5t(e,arguments[r]);return e}})});var nCe=R(()=>{"use strict";p();var l5t=oe(),u5t=X$(),c5t=n0().remove;l5t({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e=u5t(this),r=!0,n,i=0,o=arguments.length;i<o;i++)n=c5t(e,arguments[i]),r=r&&n;return!!r}})});var oCe=R(()=>{"use strict";p();var f5t=oe(),iCe=n0(),h5t=VE();f5t({target:"WeakSet",stat:!0,forced:!0},{from:h5t(iCe.WeakSet,iCe.add,!1)})});var sCe=R(()=>{"use strict";p();var p5t=oe(),aCe=n0(),d5t=GE();p5t({target:"WeakSet",stat:!0,forced:!0},{of:d5t(aCe.WeakSet,aCe.add,!1)})});var dCe=R(()=>{"use strict";p();var m5t=oe(),g5t=Ft(),cCe=_r(),Q$=ct(),v5t=jt(),CO=yt(),y5t=Mr(),_5t=Tl(),lCe=eS().c2i,fCe=/[^\d+/a-z]/i,x5t=/[\t\n\f\r ]+/g,b5t=/[=]{1,2}$/,Ug=cCe("atob"),w5t=String.fromCharCode,E5t=Q$("".charAt),uCe=Q$("".replace),S5t=Q$(fCe.exec),i0=!!Ug&&!CO(function(){return Ug("aGk=")!=="hi"}),hCe=i0&&CO(function(){return Ug(" ")!==""}),pCe=i0&&!CO(function(){Ug("a")}),T5t=i0&&!CO(function(){Ug()}),I5t=i0&&Ug.length!==1,A5t=!i0||hCe||pCe||T5t||I5t;m5t({global:!0,bind:!0,enumerable:!0,forced:A5t},{atob:function(e){if(_5t(arguments.length,1),i0&&!hCe&&!pCe)return v5t(Ug,g5t,e);var r=uCe(y5t(e),x5t,""),n="",i=0,o=0,l,f,d;if(r.length%4===0&&(r=uCe(r,b5t,"")),l=r.length,l%4===1||S5t(fCe,r))throw new(cCe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;i<l;)f=E5t(r,i++),d=o%4?d*64+lCe[f]:lCe[f],o++%4&&(n+=w5t(255&d>>(-2*o&6)));return n}})});var _Ce=R(()=>{"use strict";p();var M5t=oe(),C5t=Ft(),vCe=_r(),yCe=ct(),P5t=jt(),J$=yt(),mCe=Mr(),R5t=Tl(),O5t=eS().i2c,o0=vCe("btoa"),gCe=yCe("".charAt),L5t=yCe("".charCodeAt),nS=!!o0&&!J$(function(){return o0("hi")!=="aGk="}),D5t=nS&&!J$(function(){o0()}),N5t=nS&&J$(function(){return o0(null)!=="bnVsbA=="}),k5t=nS&&o0.length!==1;M5t({global:!0,bind:!0,enumerable:!0,forced:!nS||D5t||N5t||k5t},{btoa:function(e){if(R5t(arguments.length,1),nS)return P5t(o0,C5t,mCe(e));for(var r=mCe(e),n="",i=0,o=O5t,l,f;gCe(r,i)||(o="=",i%1);){if(f=L5t(r,i+=3/4),f>255)throw new(vCe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");l=l<<8|f,n+=gCe(o,63&l>>8-i%1*8)}return n}})});var eH=R((LGr,xCe)=>{"use strict";p();xCe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var rH=R((NGr,wCe)=>{"use strict";p();var q5t=w1(),tH=q5t("span").classList,bCe=tH&&tH.constructor&&tH.constructor.prototype;wCe.exports=bCe===Object.prototype?void 0:bCe});var ICe=R(()=>{"use strict";p();var ECe=Ft(),SCe=eH(),F5t=rH(),nH=qU(),j5t=xo(),TCe=function(t){if(t&&t.forEach!==nH)try{j5t(t,"forEach",nH)}catch(e){t.forEach=nH}};for(PO in SCe)SCe[PO]&&TCe(ECe[PO]&&ECe[PO].prototype);var PO;TCe(F5t)});var RCe=R(()=>{"use strict";p();var ACe=Ft(),CCe=eH(),z5t=rH(),iS=B1(),MCe=xo(),U5t=ls(),B5t=mr(),iH=B5t("iterator"),oH=iS.values,PCe=function(t,e){if(t){if(t[iH]!==oH)try{MCe(t,iH,oH)}catch(n){t[iH]=oH}if(U5t(t,e,!0),CCe[e]){for(var r in iS)if(t[r]!==iS[r])try{MCe(t,r,iS[r])}catch(n){t[r]=iS[r]}}}};for(RO in CCe)PCe(ACe[RO]&&ACe[RO].prototype,RO);var RO;PCe(z5t,"DOMTokenList")});var aH=R((VGr,OCe)=>{"use strict";p();OCe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var VCe=R(()=>{"use strict";p();var V5t=oe(),DO=_r(),G5t=DB(),hH=yt(),$5t=Qi(),pH=Ls(),NO=ei().f,H5t=Nn(),OO=hi(),LO=Br(),W5t=ka(),Z5t=Bt(),NCe=xU(),LCe=wg(),a0=aH(),Y5t=tP(),kCe=Cn(),dH=sr(),qCe=pn(),s0="DOMException",fH="DATA_CLONE_ERR",qO=DO("Error"),Ih=DO(s0)||function(){try{var t=DO("MessageChannel")||G5t("worker_threads").MessageChannel;new t().port1.postMessage(new WeakMap)}catch(e){if(e.name===fH&&e.code===25)return e.constructor}}(),K5t=Ih&&Ih.prototype,FCe=qO.prototype,X5t=kCe.set,Q5t=kCe.getterFor(s0),J5t="stack"in new qO(s0),jCe=function(t){return LO(a0,t)&&a0[t].m?a0[t].c:0},mH=function(){W5t(this,aS);var e=arguments.length,r=LCe(e<1?void 0:arguments[0]),n=LCe(e<2?void 0:arguments[1],"Error"),i=jCe(n);if(X5t(this,{type:s0,name:n,message:r,code:i}),dH||(this.name=n,this.message=r,this.code=i),J5t){var o=new qO(r);o.name=s0,NO(this,"stack",pH(1,Y5t(o.stack,1)))}},aS=mH.prototype=$5t(FCe),zCe=function(t){return{enumerable:!0,configurable:!0,get:t}},sH=function(t){return zCe(function(){return Q5t(this)[t]})};dH&&(OO(aS,"code",sH("code")),OO(aS,"message",sH("message")),OO(aS,"name",sH("name")));NO(aS,"constructor",pH(1,mH));var FO=hH(function(){return!(new Ih instanceof qO)}),UCe=FO||hH(function(){return FCe.toString!==NCe||String(new Ih(1,2))!=="2: 1"}),BCe=FO||hH(function(){return new Ih(1,"DataCloneError").code!==25}),eVt=FO||Ih[fH]!==25||K5t[fH]!==25,DCe=qCe?UCe||BCe||eVt:FO;V5t({global:!0,constructor:!0,forced:DCe},{DOMException:DCe?mH:Ih});var sS=DO(s0),kO=sS.prototype;UCe&&(qCe||Ih===sS)&&H5t(kO,"toString",NCe);BCe&&dH&&Ih===sS&&OO(kO,"code",zCe(function(){return jCe(Z5t(this).name)}));for(lH in a0)LO(a0,lH)&&(uH=a0[lH],oS=uH.s,cH=pH(6,uH.c),LO(sS,oS)||NO(sS,oS,cH),LO(kO,oS)||NO(kO,oS,cH));var uH,oS,cH,lH});var KCe=R(()=>{"use strict";p();var tVt=oe(),rVt=Ft(),EH=_r(),bH=Ls(),wH=ei().f,GCe=Br(),nVt=ka(),iVt=ld(),$Ce=wg(),gH=aH(),oVt=tP(),aVt=sr(),ZCe=pn(),uS="DOMException",YCe=EH("Error"),cS=EH(uS),SH=function(){nVt(this,sVt);var e=arguments.length,r=$Ce(e<1?void 0:arguments[0]),n=$Ce(e<2?void 0:arguments[1],"Error"),i=new cS(r,n),o=new YCe(r);return o.name=uS,wH(i,"stack",bH(1,oVt(o.stack,1))),iVt(i,this,SH),i},sVt=SH.prototype=cS.prototype,lVt="stack"in new YCe(uS),uVt="stack"in new cS(1,2),vH=cS&&aVt&&Object.getOwnPropertyDescriptor(rVt,uS),cVt=!!vH&&!(vH.writable&&vH.configurable),HCe=lVt&&!cVt&&!uVt;tVt({global:!0,constructor:!0,forced:ZCe||HCe},{DOMException:HCe?SH:cS});var lS=EH(uS),WCe=lS.prototype;if(WCe.constructor!==lS){ZCe||wH(WCe,"constructor",bH(1,lS));for(yH in gH)GCe(gH,yH)&&(_H=gH[yH],xH=_H.s,GCe(lS,xH)||wH(lS,xH,bH(6,_H.c)))}var _H,xH,yH});var QCe=R(()=>{"use strict";p();var fVt=_r(),hVt=ls(),XCe="DOMException";hVt(fVt(XCe),XCe)});var ePe=R(()=>{"use strict";p();var pVt=oe(),dVt=Ft(),JCe=pE().clear;pVt({global:!0,bind:!0,enumerable:!0,forced:dVt.clearImmediate!==JCe},{clearImmediate:JCe})});var jO=R((n6r,rPe)=>{"use strict";p();var tPe=Ft(),mVt=ma(),gVt=jr(),vVt=$1(),yVt=Ku(),_Vt=ks(),xVt=Tl(),bVt=tPe.Function,wVt=/MSIE .\./.test(yVt)||vVt==="BUN"&&function(){var t=tPe.Bun.version.split(".");return t.length<3||t[0]==="0"&&(t[1]<3||t[1]==="3"&&t[2]==="0")}();rPe.exports=function(t,e){var r=e?2:1;return wVt?function(n,i){var o=xVt(arguments.length,1)>r,l=gVt(n)?n:bVt(n),f=o?_Vt(arguments,r):[],d=o?function(){mVt(l,this,f)}:l;return e?t(d,i):t(d)}:t}});var aPe=R(()=>{"use strict";p();var EVt=oe(),oPe=Ft(),nPe=pE().set,SVt=jO(),iPe=oPe.setImmediate?SVt(nPe,!1):nPe;EVt({global:!0,bind:!0,enumerable:!0,forced:oPe.setImmediate!==iPe},{setImmediate:iPe})});var sPe=R(()=>{"use strict";p();ePe();aPe()});var lPe=R(()=>{"use strict";p();var TVt=oe(),IVt=Ft(),AVt=N5(),MVt=xr(),CVt=Tl(),PVt=yt(),RVt=sr(),OVt=PVt(function(){return RVt&&Object.getOwnPropertyDescriptor(IVt,"queueMicrotask").value.length!==1});TVt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:OVt},{queueMicrotask:function(e){CVt(arguments.length,1),AVt(MVt(e))}})});var cPe=R(()=>{"use strict";p();var LVt=oe(),Rd=Ft(),DVt=hi(),NVt=sr(),kVt=TypeError,qVt=Object.defineProperty,uPe=Rd.self!==Rd;try{NVt?(zO=Object.getOwnPropertyDescriptor(Rd,"self"),(uPe||!zO||!zO.get||!zO.enumerable)&&DVt(Rd,"self",{get:function(){return Rd},set:function(e){if(this!==Rd)throw new kVt("Illegal invocation");qVt(Rd,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):LVt({global:!0,simple:!0,forced:uPe},{self:Rd})}catch(t){}var zO});var bPe=R(()=>{"use strict";p();var FVt=pn(),jVt=oe(),xa=Ft(),hS=_r(),dS=ct(),PH=yt(),zVt=nd(),u0=jr(),UVt=rc(),BVt=Ds(),$O=hr(),VVt=ph(),GVt=Pi(),pPe=Bt(),VO=ss(),$Vt=Br(),HVt=tu(),TH=xo(),UO=sn(),WVt=Tl(),ZVt=j_(),HO=qo(),RH=Qo(),YVt=js(),fPe=UB(),KVt=gU(),OH=OP(),fS=xa.Object,XVt=xa.Array,dPe=xa.Date,mPe=xa.Error,QVt=xa.TypeError,JVt=xa.PerformanceMark,Bg=hS("DOMException"),MH=HO.Map,LH=HO.has,gPe=HO.get,GO=HO.set,vPe=RH.Set,yPe=RH.add,eGt=RH.has,tGt=hS("Object","keys"),rGt=dS([].push),nGt=dS((!0).valueOf),iGt=dS(1 .valueOf),oGt=dS("".valueOf),aGt=dS(dPe.prototype.getTime),CH=zVt("structuredClone"),pS="DataCloneError",BO="Transferring",_Pe=function(t){return!PH(function(){var e=new xa.Set([7]),r=t(e),n=t(fS(7));return r===e||!r.has(7)||!$O(n)||+n!=7})&&t},hPe=function(t,e){return!PH(function(){var r=new e,n=t({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof e&&n.a.stack===r.stack)})},sGt=function(t){return!PH(function(){var e=t(new xa.AggregateError([1],CH,{cause:3}));return e.name!=="AggregateError"||e.errors[0]!==1||e.message!==CH||e.cause!==3})},l0=xa.structuredClone,lGt=FVt||!hPe(l0,mPe)||!hPe(l0,Bg)||!sGt(l0),uGt=!l0&&_Pe(function(t){return new JVt(CH,{detail:t}).detail}),Ah=_Pe(l0)||uGt,IH=function(t){throw new Bg("Uncloneable type: "+t,pS)},Bs=function(t,e){throw new Bg((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",pS)},AH=function(t,e){return Ah||Bs(e),Ah(t)},cGt=function(){var t;try{t=new xa.DataTransfer}catch(e){try{t=new xa.ClipboardEvent("").clipboardData}catch(r){}}return t&&t.items&&t.files?t:null},xPe=function(t,e,r){if(LH(e,t))return gPe(e,t);var n=r||VO(t),i,o,l,f,d,v;if(n==="SharedArrayBuffer")Ah?i=Ah(t):i=t;else{var x=xa.DataView;!x&&!u0(t.slice)&&Bs("ArrayBuffer");try{if(u0(t.slice)&&!t.resizable)i=t.slice(0);else for(o=t.byteLength,l=("maxByteLength"in t)?{maxByteLength:t.maxByteLength}:void 0,i=new ArrayBuffer(o,l),f=new x(t),d=new x(i),v=0;v<o;v++)d.setUint8(v,f.getUint8(v))}catch(b){throw new Bg("ArrayBuffer is detached",pS)}}return GO(e,t,i),i},fGt=function(t,e,r,n,i){var o=xa[e];return $O(o)||Bs(e),new o(xPe(t.buffer,i),r,n)},_a=function(t,e){if(VVt(t)&&IH("Symbol"),!$O(t))return t;if(e){if(LH(e,t))return gPe(e,t)}else e=new MH;var r=VO(t),n,i,o,l,f,d,v,x;switch(r){case"Array":o=XVt(UO(t));break;case"Object":o={};break;case"Map":o=new MH;break;case"Set":o=new vPe;break;case"RegExp":o=new RegExp(t.source,ZVt(t));break;case"Error":switch(i=t.name,i){case"AggregateError":o=new(hS(i))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":o=new(hS(i));break;case"CompileError":case"LinkError":case"RuntimeError":o=new(hS("WebAssembly",i));break;default:o=new mPe}break;case"DOMException":o=new Bg(t.message,t.name);break;case"ArrayBuffer":case"SharedArrayBuffer":o=xPe(t,e,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":d=r==="DataView"?t.byteLength:t.length,o=fGt(t,r,t.byteOffset,d,e);break;case"DOMQuad":try{o=new DOMQuad(_a(t.p1,e),_a(t.p2,e),_a(t.p3,e),_a(t.p4,e))}catch(b){o=AH(t,r)}break;case"File":if(Ah)try{o=Ah(t),VO(o)!==r&&(o=void 0)}catch(b){}if(!o)try{o=new File([t],t.name,t)}catch(b){}o||Bs(r);break;case"FileList":if(l=cGt(),l){for(f=0,d=UO(t);f<d;f++)l.items.add(_a(t[f],e));o=l.files}else o=AH(t,r);break;case"ImageData":try{o=new ImageData(_a(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch(b){o=AH(t,r)}break;default:if(Ah)o=Ah(t);else switch(r){case"BigInt":o=fS(t.valueOf());break;case"Boolean":o=fS(nGt(t));break;case"Number":o=fS(iGt(t));break;case"String":o=fS(oGt(t));break;case"Date":o=new dPe(aGt(t));break;case"Blob":try{o=t.slice(0,t.size,t.type)}catch(b){Bs(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=xa[r];try{o=n.fromPoint?n.fromPoint(t):new n(t.x,t.y,t.z,t.w)}catch(b){Bs(r)}break;case"DOMRect":case"DOMRectReadOnly":n=xa[r];try{o=n.fromRect?n.fromRect(t):new n(t.x,t.y,t.width,t.height)}catch(b){Bs(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=xa[r];try{o=n.fromMatrix?n.fromMatrix(t):new n(t)}catch(b){Bs(r)}break;case"AudioData":case"VideoFrame":u0(t.clone)||Bs(r);try{o=t.clone()}catch(b){IH(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Bs(r);default:IH(r)}}switch(GO(e,t,o),r){case"Array":case"Object":for(v=tGt(t),f=0,d=UO(v);f<d;f++)x=v[f],HVt(o,x,_a(t[x],e));break;case"Map":t.forEach(function(b,A){GO(o,_a(A,e),_a(b,e))});break;case"Set":t.forEach(function(b){yPe(o,_a(b,e))});break;case"Error":TH(o,"message",_a(t.message,e)),$Vt(t,"cause")&&TH(o,"cause",_a(t.cause,e)),i==="AggregateError"?o.errors=_a(t.errors,e):i==="SuppressedError"&&(o.error=_a(t.error,e),o.suppressed=_a(t.suppressed,e));case"DOMException":KVt&&TH(o,"stack",_a(t.stack,e))}return o},hGt=function(t,e){if(!$O(t))throw new QVt("Transfer option cannot be converted to a sequence");var r=[];GVt(t,function(A){rGt(r,pPe(A))});for(var n=0,i=UO(r),o=new vPe,l,f,d,v,x,b;n<i;){if(l=r[n++],f=VO(l),f==="ArrayBuffer"?eGt(o,l):LH(e,l))throw new Bg("Duplicate transferable",pS);if(f==="ArrayBuffer"){yPe(o,l);continue}if(OH)v=l0(l,{transfer:[l]});else switch(f){case"ImageBitmap":d=xa.OffscreenCanvas,UVt(d)||Bs(f,BO);try{x=new d(l.width,l.height),b=x.getContext("bitmaprenderer"),b.transferFromImageBitmap(l),v=x.transferToImageBitmap()}catch(A){}break;case"AudioData":case"VideoFrame":(!u0(l.clone)||!u0(l.close))&&Bs(f,BO);try{v=l.clone(),l.close()}catch(A){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Bs(f,BO)}if(v===void 0)throw new Bg("This object cannot be transferred: "+f,pS);GO(e,l,v)}return o},pGt=function(t){YVt(t,function(e){OH?Ah(e,{transfer:[e]}):u0(e.transfer)?e.transfer():fPe?fPe(e):Bs("ArrayBuffer",BO)})};jVt({global:!0,enumerable:!0,sham:!OH,forced:lGt},{structuredClone:function(e){var r=WVt(arguments.length,1)>1&&!BVt(arguments[1])?pPe(arguments[1]):void 0,n=r?r.transfer:void 0,i,o;n!==void 0&&(i=new MH,o=hGt(n,i));var l=_a(e,i);return o&&pGt(o),l}})});var SPe=R(()=>{"use strict";p();var dGt=oe(),EPe=Ft(),mGt=jO(),wPe=mGt(EPe.setInterval,!0);dGt({global:!0,bind:!0,forced:EPe.setInterval!==wPe},{setInterval:wPe})});var APe=R(()=>{"use strict";p();var gGt=oe(),IPe=Ft(),vGt=jO(),TPe=vGt(IPe.setTimeout,!0);gGt({global:!0,bind:!0,forced:IPe.setTimeout!==TPe},{setTimeout:TPe})});var MPe=R(()=>{"use strict";p();SPe();APe()});var mS=R((C6r,PPe)=>{"use strict";p();var yGt=yt(),_Gt=mr(),xGt=sr(),CPe=pn(),bGt=_Gt("iterator");PPe.exports=!yGt(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach(function(i,o){e.delete("b"),n+=o+i}),r.delete("a",2),r.delete("b",void 0),CPe&&(!t.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!e.size&&(CPe||!xGt)||!e.sort||t.href!=="https://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[bGt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var jPe=R((R6r,FPe)=>{"use strict";p();var Vg=ct(),DH=2147483647,gS=36,NPe=1,qH=26,wGt=38,EGt=700,SGt=72,TGt=128,IGt="-",AGt=/[^\0-\u007E]/,kPe=/[.\u3002\uFF0E\uFF61]/g,RPe="Overflow: input needs wider integers to process",NH=gS-NPe,OPe=RangeError,MGt=Vg(kPe.exec),c0=Math.floor,kH=String.fromCharCode,LPe=Vg("".charCodeAt),qPe=Vg([].join),Od=Vg([].push),CGt=Vg("".replace),PGt=Vg("".split),RGt=Vg("".toLowerCase),OGt=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=LPe(t,r++);if(i>=55296&&i<=56319&&r<n){var o=LPe(t,r++);(o&64512)===56320?Od(e,((i&1023)<<10)+(o&1023)+65536):(Od(e,i),r--)}else Od(e,i)}return e},DPe=function(t){return t+22+75*(t<26)},LGt=function(t,e,r){var n=0;for(t=r?c0(t/EGt):t>>1,t+=c0(t/e);t>NH*qH>>1;)t=c0(t/NH),n+=gS;return c0(n+(NH+1)*t/(t+wGt))},DGt=function(t){var e=[];t=OGt(t);var r=t.length,n=TGt,i=0,o=SGt,l,f;for(l=0;l<t.length;l++)f=t[l],f<128&&Od(e,kH(f));var d=e.length,v=d;for(d&&Od(e,IGt);v<r;){var x=DH;for(l=0;l<t.length;l++)f=t[l],f>=n&&f<x&&(x=f);var b=v+1;if(x-n>c0((DH-i)/b))throw new OPe(RPe);for(i+=(x-n)*b,n=x,l=0;l<t.length;l++){if(f=t[l],f<n&&++i>DH)throw new OPe(RPe);if(f===n){for(var A=i,P=gS;;){var N=P<=o?NPe:P>=o+qH?qH:P-o;if(A<N)break;var j=A-N,D=gS-N;Od(e,kH(DPe(N+j%D))),A=c0(j/D),P+=gS}Od(e,kH(DPe(A))),o=LGt(i,b,v===d),i=0,v++}}i++,n++}return qPe(e,"")};FPe.exports=function(t){var e=[],r=PGt(CGt(RGt(t),kPe,"."),"."),n,i;for(n=0;n<r.length;n++)i=r[n],Od(e,MGt(AGt,i)?"xn--"+DGt(i):i);return qPe(e,".")}});var HH=R((L6r,lRe)=>{"use strict";p();B1();BV();var VH=oe(),QPe=Ft(),GH=M5(),NGt=_r(),WO=jt(),ac=ct(),vS=sr(),JPe=mS(),eRe=Nn(),kGt=hi(),qGt=nu(),FGt=ls(),jGt=hd(),$H=Cn(),tRe=ka(),FH=jr(),zGt=Br(),UGt=Hn(),BGt=ss(),VGt=Bt(),rRe=hr(),cs=Mr(),GGt=Qi(),zPe=Ls(),UPe=ud(),$Gt=Xc(),ZO=ko(),f0=Tl(),HGt=mr(),WGt=yP(),ZGt=HGt("iterator"),p0="URLSearchParams",nRe=p0+"Iterator",iRe=$H.set,au=$H.getterFor(p0),YGt=$H.getterFor(nRe),BPe=GH("fetch"),XO=GH("Request"),yS=GH("Headers"),jH=XO&&XO.prototype,VPe=yS&&yS.prototype,KGt=QPe.TypeError,XGt=QPe.encodeURIComponent,QGt=String.fromCharCode,JGt=NGt("String","fromCodePoint"),e6t=parseInt,KO=ac("".charAt),GPe=ac([].join),Ld=ac([].push),oRe=ac("".replace),t6t=ac([].shift),$Pe=ac([].splice),HPe=ac("".split),aRe=ac("".slice),r6t=ac(/./.exec),n6t=/\+/g,zH="\uFFFD",i6t=/^[0-9a-f]+$/i,WPe=function(t,e){var r=aRe(t,e,e+2);return r6t(i6t,r)?e6t(r,16):NaN},o6t=function(t){for(var e=0,r=128;r>0&&(t&r)!==0;r>>=1)e++;return e},a6t=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(t[0]&31)<<6|t[1]&63;break;case 3:e=(t[0]&15)<<12|(t[1]&63)<<6|t[2]&63;break;case 4:e=(t[0]&7)<<18|(t[1]&63)<<12|(t[2]&63)<<6|t[3]&63;break}return e>1114111?null:e},ZPe=function(t){t=oRe(t,n6t," ");for(var e=t.length,r="",n=0;n<e;){var i=KO(t,n);if(i==="%"){if(KO(t,n+1)==="%"||n+3>e){r+="%",n++;continue}var o=WPe(t,n+1);if(o!==o){r+=i,n++;continue}n+=2;var l=o6t(o);if(l===0)i=QGt(o);else{if(l===1||l>4){r+=zH,n++;continue}for(var f=[o],d=1;d<l&&(n++,!(n+3>e||KO(t,n)!=="%"));){var v=WPe(t,n+1);if(v!==v){n+=3;break}if(v>191||v<128)break;Ld(f,v),n+=2,d++}if(f.length!==l){r+=zH;continue}var x=a6t(f);x===null?r+=zH:i=JGt(x)}}r+=i,n++}return r},s6t=/[!'()~]|%20/g,l6t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},u6t=function(t){return l6t[t]},YPe=function(t){return oRe(XGt(t),s6t,u6t)},UH=jGt(function(e,r){iRe(this,{type:nRe,target:au(e).entries,index:0,kind:r})},p0,function(){var e=YGt(this),r=e.target,n=e.index++;if(!r||n>=r.length)return e.target=null,ZO(void 0,!0);var i=r[n];switch(e.kind){case"keys":return ZO(i.key,!1);case"values":return ZO(i.value,!1)}return ZO([i.key,i.value],!1)},!0),sRe=function(t){this.entries=[],this.url=null,t!==void 0&&(rRe(t)?this.parseObject(t):this.parseQuery(typeof t=="string"?KO(t,0)==="?"?aRe(t,1):t:cs(t)))};sRe.prototype={type:p0,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e=this.entries,r=$Gt(t),n,i,o,l,f,d,v;if(r)for(n=UPe(t,r),i=n.next;!(o=WO(i,n)).done;){if(l=UPe(VGt(o.value)),f=l.next,(d=WO(f,l)).done||(v=WO(f,l)).done||!WO(f,l).done)throw new KGt("Expected sequence with length 2");Ld(e,{key:cs(d.value),value:cs(v.value)})}else for(var x in t)zGt(t,x)&&Ld(e,{key:x,value:cs(t[x])})},parseQuery:function(t){if(t)for(var e=this.entries,r=HPe(t,"&"),n=0,i,o;n<r.length;)i=r[n++],i.length&&(o=HPe(i,"="),Ld(e,{key:ZPe(t6t(o)),value:ZPe(GPe(o,"="))}))},serialize:function(){for(var t=this.entries,e=[],r=0,n;r<t.length;)n=t[r++],Ld(e,YPe(n.key)+"="+YPe(n.value));return GPe(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var QO=function(){tRe(this,h0);var e=arguments.length>0?arguments[0]:void 0,r=iRe(this,new sRe(e));vS||(this.size=r.entries.length)},h0=QO.prototype;qGt(h0,{append:function(e,r){var n=au(this);f0(arguments.length,2),Ld(n.entries,{key:cs(e),value:cs(r)}),vS||this.length++,n.updateURL()},delete:function(t){for(var e=au(this),r=f0(arguments.length,1),n=e.entries,i=cs(t),o=r<2?void 0:arguments[1],l=o===void 0?o:cs(o),f=0;f<n.length;){var d=n[f];if(d.key===i&&(l===void 0||d.value===l)){if($Pe(n,f,1),l!==void 0)break}else f++}vS||(this.size=n.length),e.updateURL()},get:function(e){var r=au(this).entries;f0(arguments.length,1);for(var n=cs(e),i=0;i<r.length;i++)if(r[i].key===n)return r[i].value;return null},getAll:function(e){var r=au(this).entries;f0(arguments.length,1);for(var n=cs(e),i=[],o=0;o<r.length;o++)r[o].key===n&&Ld(i,r[o].value);return i},has:function(e){for(var r=au(this).entries,n=f0(arguments.length,1),i=cs(e),o=n<2?void 0:arguments[1],l=o===void 0?o:cs(o),f=0;f<r.length;){var d=r[f++];if(d.key===i&&(l===void 0||d.value===l))return!0}return!1},set:function(e,r){var n=au(this);f0(arguments.length,1);for(var i=n.entries,o=!1,l=cs(e),f=cs(r),d=0,v;d<i.length;d++)v=i[d],v.key===l&&(o?$Pe(i,d--,1):(o=!0,v.value=f));o||Ld(i,{key:l,value:f}),vS||(this.size=i.length),n.updateURL()},sort:function(){var e=au(this);WGt(e.entries,function(r,n){return r.key>n.key?1:-1}),e.updateURL()},forEach:function(e){for(var r=au(this).entries,n=UGt(e,arguments.length>1?arguments[1]:void 0),i=0,o;i<r.length;)o=r[i++],n(o.value,o.key,this)},keys:function(){return new UH(this,"keys")},values:function(){return new UH(this,"values")},entries:function(){return new UH(this,"entries")}},{enumerable:!0});eRe(h0,ZGt,h0.entries,{name:"entries"});eRe(h0,"toString",function(){return au(this).serialize()},{enumerable:!0});vS&&kGt(h0,"size",{get:function(){return au(this).entries.length},configurable:!0,enumerable:!0});FGt(QO,p0);VH({global:!0,constructor:!0,forced:!JPe},{URLSearchParams:QO});!JPe&&FH(yS)&&(KPe=ac(VPe.has),XPe=ac(VPe.set),BH=function(t){if(rRe(t)){var e=t.body,r;if(BGt(e)===p0)return r=t.headers?new yS(t.headers):new yS,KPe(r,"content-type")||XPe(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),GGt(t,{body:zPe(0,cs(e)),headers:zPe(0,r)})}return t},FH(BPe)&&VH({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return BPe(e,arguments.length>1?BH(arguments[1]):{})}}),FH(XO)&&(YO=function(e){return tRe(this,jH),new XO(e,arguments.length>1?BH(arguments[1]):{})},jH.constructor=YO,YO.prototype=jH,VH({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:YO})));var KPe,XPe,BH,YO;lRe.exports={URLSearchParams:QO,getState:au}});var IRe=R(()=>{"use strict";p();GV();var c6t=oe(),uW=sr(),f6t=mS(),cW=Ft(),uRe=Hn(),fu=ct(),nL=Nn(),su=hi(),h6t=ka(),aW=Br(),fW=c5(),d0=FU(),sc=ks(),p6t=Dg().codeAt,d6t=jPe(),Ch=Mr(),m6t=ls(),g6t=Tl(),xRe=HH(),bRe=Cn(),v6t=bRe.set,iL=bRe.getterFor("URL"),y6t=xRe.URLSearchParams,_6t=xRe.getState,_S=cW.URL,sW=cW.TypeError,oL=cW.parseInt,x6t=Math.floor,cRe=Math.pow,cu=fu("".charAt),lc=fu(/./.exec),bS=fu([].join),b6t=fu(1 .toString),w6t=fu([].pop),g0=fu([].push),WH=fu("".replace),E6t=fu([].shift),S6t=fu("".split),ES=fu("".slice),aL=fu("".toLowerCase),T6t=fu([].unshift),I6t="Invalid authority",ZH="Invalid scheme",Gg="Invalid host",fRe="Invalid port",wRe=/[a-z]/i,A6t=/[\d+-.a-z]/i,lW=/\d/,M6t=/^0x/i,C6t=/^[0-7]+$/,P6t=/^\d+$/,ERe=/^[\da-f]+$/i,R6t=/[\0\t\n\r #%/:<>?@[\\\]^|]/,O6t=/[\0\t\n\r #/:<>?@[\\\]^|]/,L6t=/^[\u0000-\u0020]+/,D6t=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,N6t=/[\t\n\r]/g,lu,k6t=function(t){var e=S6t(t,"."),r,n,i,o,l,f,d;if(e.length&&e[e.length-1]===""&&e.length--,r=e.length,r>4)return t;for(n=[],i=0;i<r;i++){if(o=e[i],o==="")return t;if(l=10,o.length>1&&cu(o,0)==="0"&&(l=lc(M6t,o)?16:8,o=ES(o,l===8?1:2)),o==="")f=0;else{if(!lc(l===10?P6t:l===8?C6t:ERe,o))return t;f=oL(o,l)}g0(n,f)}for(i=0;i<r;i++)if(f=n[i],i===r-1){if(f>=cRe(256,5-r))return null}else if(f>255)return null;for(d=w6t(n),i=0;i<n.length;i++)d+=n[i]*cRe(256,3-i);return d},q6t=function(t){var e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0,o,l,f,d,v,x,b,A=function(){return cu(t,i)};if(A()===":"){if(cu(t,1)!==":")return;i+=2,r++,n=r}for(;A();){if(r===8)return;if(A()===":"){if(n!==null)return;i++,r++,n=r;continue}for(o=l=0;l<4&&lc(ERe,A());)o=o*16+oL(A(),16),i++,l++;if(A()==="."){if(l===0||(i-=l,r>6))return;for(f=0;A();){if(d=null,f>0)if(A()==="."&&f<4)i++;else return;if(!lc(lW,A()))return;for(;lc(lW,A());){if(v=oL(A(),10),d===null)d=v;else{if(d===0)return;d=d*10+v}if(d>255)return;i++}e[r]=e[r]*256+d,f++,(f===2||f===4)&&r++}if(f!==4)return;break}else if(A()===":"){if(i++,!A())return}else if(A())return;e[r++]=o}if(n!==null)for(x=r-n,r=7;r!==0&&x>0;)b=e[r],e[r--]=e[n+x-1],e[n+--x]=b;else if(r!==8)return;return e},F6t=function(t){for(var e=null,r=1,n=null,i=0,o=0;o<8;o++)t[o]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=o),++i);return i>r?n:e},xS=function(t){var e,r,n,i;if(typeof t=="number"){for(e=[],r=0;r<4;r++)T6t(e,t%256),t=x6t(t/256);return bS(e,".")}if(typeof t=="object"){for(e="",n=F6t(t),r=0;r<8;r++)i&&t[r]===0||(i&&(i=!1),n===r?(e+=r?":":"::",i=!0):(e+=b6t(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},rL={},SRe=fW({},rL,{" ":1,"\"":1,"<":1,">":1,"`":1}),TRe=fW({},SRe,{"#":1,"?":1,"{":1,"}":1}),YH=fW({},TRe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Dd=function(t,e){var r=p6t(t,0);return r>32&&r<127&&!aW(e,t)?t:encodeURIComponent(t)},JO={ftp:21,file:null,http:80,https:443,ws:80,wss:443},wS=function(t,e){var r;return t.length===2&&lc(wRe,cu(t,0))&&((r=cu(t,1))===":"||!e&&r==="|")},hRe=function(t){var e;return t.length>1&&wS(ES(t,0,2))&&(t.length===2||(e=cu(t,2))==="/"||e==="\\"||e==="?"||e==="#")},j6t=function(t){return t==="."||aL(t)==="%2e"},z6t=function(t){return t=aL(t),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"},KH={},pRe={},XH={},dRe={},mRe={},QH={},gRe={},vRe={},eL={},tL={},JH={},eW={},tW={},rW={},yRe={},nW={},m0={},uf={},_Re={},$g={},Mh={},hW=function(t,e,r){var n=Ch(t),i,o,l;if(e){if(o=this.parse(n),o)throw new sW(o);this.searchParams=null}else{if(r!==void 0&&(i=new hW(r,!0)),o=this.parse(n,null,i),o)throw new sW(o);l=_6t(new y6t),l.bindURL(this),this.searchParams=l}};hW.prototype={type:"URL",parse:function(t,e,r){var n=this,i=e||KH,o=0,l="",f=!1,d=!1,v=!1,x,b,A,P;for(t=Ch(t),e||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,t=WH(t,L6t,""),t=WH(t,D6t,"$1")),t=WH(t,N6t,""),x=d0(t);o<=x.length;){switch(b=x[o],i){case KH:if(b&&lc(wRe,b))l+=aL(b),i=pRe;else{if(e)return ZH;i=XH;continue}break;case pRe:if(b&&(lc(A6t,b)||b==="+"||b==="-"||b==="."))l+=aL(b);else if(b===":"){if(e&&(n.isSpecial()!==aW(JO,l)||l==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=l,e){n.isSpecial()&&JO[n.scheme]===n.port&&(n.port=null);return}l="",n.scheme==="file"?i=rW:n.isSpecial()&&r&&r.scheme===n.scheme?i=dRe:n.isSpecial()?i=vRe:x[o+1]==="/"?(i=mRe,o++):(n.cannotBeABaseURL=!0,g0(n.path,""),i=_Re)}else{if(e)return ZH;l="",i=XH,o=0;continue}break;case XH:if(!r||r.cannotBeABaseURL&&b!=="#")return ZH;if(r.cannotBeABaseURL&&b==="#"){n.scheme=r.scheme,n.path=sc(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,i=Mh;break}i=r.scheme==="file"?rW:QH;continue;case dRe:if(b==="/"&&x[o+1]==="/")i=eL,o++;else{i=QH;continue}break;case mRe:if(b==="/"){i=tL;break}else{i=uf;continue}case QH:if(n.scheme=r.scheme,b===lu)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=sc(r.path),n.query=r.query;else if(b==="/"||b==="\\"&&n.isSpecial())i=gRe;else if(b==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=sc(r.path),n.query="",i=$g;else if(b==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=sc(r.path),n.query=r.query,n.fragment="",i=Mh;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=sc(r.path),n.path.length--,i=uf;continue}break;case gRe:if(n.isSpecial()&&(b==="/"||b==="\\"))i=eL;else if(b==="/")i=tL;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,i=uf;continue}break;case vRe:if(i=eL,b!=="/"||cu(l,o+1)!=="/")continue;o++;break;case eL:if(b!=="/"&&b!=="\\"){i=tL;continue}break;case tL:if(b==="@"){f&&(l="%40"+l),f=!0,A=d0(l);for(var N=0;N<A.length;N++){var j=A[N];if(j===":"&&!v){v=!0;continue}var D=Dd(j,YH);v?n.password+=D:n.username+=D}l=""}else if(b===lu||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()){if(f&&l==="")return I6t;o-=d0(l).length+1,l="",i=JH}else l+=b;break;case JH:case eW:if(e&&n.scheme==="file"){i=nW;continue}else if(b===":"&&!d){if(l==="")return Gg;if(P=n.parseHost(l),P)return P;if(l="",i=tW,e===eW)return}else if(b===lu||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()){if(n.isSpecial()&&l==="")return Gg;if(e&&l===""&&(n.includesCredentials()||n.port!==null))return;if(P=n.parseHost(l),P)return P;if(l="",i=m0,e)return;continue}else b==="["?d=!0:b==="]"&&(d=!1),l+=b;break;case tW:if(lc(lW,b))l+=b;else if(b===lu||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()||e){if(l!==""){var F=oL(l,10);if(F>65535)return fRe;n.port=n.isSpecial()&&F===JO[n.scheme]?null:F,l=""}if(e)return;i=m0;continue}else return fRe;break;case rW:if(n.scheme="file",b==="/"||b==="\\")i=yRe;else if(r&&r.scheme==="file")switch(b){case lu:n.host=r.host,n.path=sc(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=sc(r.path),n.query="",i=$g;break;case"#":n.host=r.host,n.path=sc(r.path),n.query=r.query,n.fragment="",i=Mh;break;default:hRe(bS(sc(x,o),""))||(n.host=r.host,n.path=sc(r.path),n.shortenPath()),i=uf;continue}else{i=uf;continue}break;case yRe:if(b==="/"||b==="\\"){i=nW;break}r&&r.scheme==="file"&&!hRe(bS(sc(x,o),""))&&(wS(r.path[0],!0)?g0(n.path,r.path[0]):n.host=r.host),i=uf;continue;case nW:if(b===lu||b==="/"||b==="\\"||b==="?"||b==="#"){if(!e&&wS(l))i=uf;else if(l===""){if(n.host="",e)return;i=m0}else{if(P=n.parseHost(l),P)return P;if(n.host==="localhost"&&(n.host=""),e)return;l="",i=m0}continue}else l+=b;break;case m0:if(n.isSpecial()){if(i=uf,b!=="/"&&b!=="\\")continue}else if(!e&&b==="?")n.query="",i=$g;else if(!e&&b==="#")n.fragment="",i=Mh;else if(b!==lu&&(i=uf,b!=="/"))continue;break;case uf:if(b===lu||b==="/"||b==="\\"&&n.isSpecial()||!e&&(b==="?"||b==="#")){if(z6t(l)?(n.shortenPath(),b!=="/"&&!(b==="\\"&&n.isSpecial())&&g0(n.path,"")):j6t(l)?b!=="/"&&!(b==="\\"&&n.isSpecial())&&g0(n.path,""):(n.scheme==="file"&&!n.path.length&&wS(l)&&(n.host&&(n.host=""),l=cu(l,0)+":"),g0(n.path,l)),l="",n.scheme==="file"&&(b===lu||b==="?"||b==="#"))for(;n.path.length>1&&n.path[0]==="";)E6t(n.path);b==="?"?(n.query="",i=$g):b==="#"&&(n.fragment="",i=Mh)}else l+=Dd(b,TRe);break;case _Re:b==="?"?(n.query="",i=$g):b==="#"?(n.fragment="",i=Mh):b!==lu&&(n.path[0]+=Dd(b,rL));break;case $g:!e&&b==="#"?(n.fragment="",i=Mh):b!==lu&&(b==="'"&&n.isSpecial()?n.query+="%27":b==="#"?n.query+="%23":n.query+=Dd(b,rL));break;case Mh:b!==lu&&(n.fragment+=Dd(b,SRe));break}o++}},parseHost:function(t){var e,r,n;if(cu(t,0)==="["){if(cu(t,t.length-1)!=="]"||(e=q6t(ES(t,1,-1)),!e))return Gg;this.host=e}else if(this.isSpecial()){if(t=d6t(t),lc(R6t,t)||(e=k6t(t),e===null))return Gg;this.host=e}else{if(lc(O6t,t))return Gg;for(e="",r=d0(t),n=0;n<r.length;n++)e+=Dd(r[n],rL);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return aW(JO,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;e&&(this.scheme!=="file"||e!==1||!wS(t[0],!0))&&t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,i=t.host,o=t.port,l=t.path,f=t.query,d=t.fragment,v=e+":";return i!==null?(v+="//",t.includesCredentials()&&(v+=r+(n?":"+n:"")+"@"),v+=xS(i),o!==null&&(v+=":"+o)):e==="file"&&(v+="//"),v+=t.cannotBeABaseURL?l[0]:l.length?"/"+bS(l,"/"):"",f!==null&&(v+="?"+f),d!==null&&(v+="#"+d),v},setHref:function(t){var e=this.parse(t);if(e)throw new sW(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if(t==="blob")try{return new v0(t.path[0]).origin}catch(r){return"null"}return t==="file"||!this.isSpecial()?"null":t+"://"+xS(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(Ch(t)+":",KH)},getUsername:function(){return this.username},setUsername:function(t){var e=d0(Ch(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=Dd(e[r],YH)}},getPassword:function(){return this.password},setPassword:function(t){var e=d0(Ch(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=Dd(e[r],YH)}},getHost:function(){var t=this.host,e=this.port;return t===null?"":e===null?xS(t):xS(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,JH)},getHostname:function(){var t=this.host;return t===null?"":xS(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,eW)},getPort:function(){var t=this.port;return t===null?"":Ch(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(t=Ch(t),t===""?this.port=null:this.parse(t,tW))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+bS(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,m0))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){t=Ch(t),t===""?this.query=null:(cu(t,0)==="?"&&(t=ES(t,1)),this.query="",this.parse(t,$g)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){if(t=Ch(t),t===""){this.fragment=null;return}cu(t,0)==="#"&&(t=ES(t,1)),this.fragment="",this.parse(t,Mh)},update:function(){this.query=this.searchParams.serialize()||null}};var v0=function(e){var r=h6t(this,fs),n=g6t(arguments.length,1)>1?arguments[1]:void 0,i=v6t(r,new hW(e,!1,n));uW||(r.href=i.serialize(),r.origin=i.getOrigin(),r.protocol=i.getProtocol(),r.username=i.getUsername(),r.password=i.getPassword(),r.host=i.getHost(),r.hostname=i.getHostname(),r.port=i.getPort(),r.pathname=i.getPathname(),r.search=i.getSearch(),r.searchParams=i.getSearchParams(),r.hash=i.getHash())},fs=v0.prototype,uu=function(t,e){return{get:function(){return iL(this)[t]()},set:e&&function(r){return iL(this)[e](r)},configurable:!0,enumerable:!0}};uW&&(su(fs,"href",uu("serialize","setHref")),su(fs,"origin",uu("getOrigin")),su(fs,"protocol",uu("getProtocol","setProtocol")),su(fs,"username",uu("getUsername","setUsername")),su(fs,"password",uu("getPassword","setPassword")),su(fs,"host",uu("getHost","setHost")),su(fs,"hostname",uu("getHostname","setHostname")),su(fs,"port",uu("getPort","setPort")),su(fs,"pathname",uu("getPathname","setPathname")),su(fs,"search",uu("getSearch","setSearch")),su(fs,"searchParams",uu("getSearchParams")),su(fs,"hash",uu("getHash","setHash")));nL(fs,"toJSON",function(){return iL(this).serialize()},{enumerable:!0});nL(fs,"toString",function(){return iL(this).serialize()},{enumerable:!0});_S&&(iW=_S.createObjectURL,oW=_S.revokeObjectURL,iW&&nL(v0,"createObjectURL",uRe(iW,_S)),oW&&nL(v0,"revokeObjectURL",uRe(oW,_S)));var iW,oW;m6t(v0,"URL");c6t({global:!0,constructor:!0,forced:!f6t,sham:!uW},{URL:v0})});var ARe=R(()=>{"use strict";p();IRe()});var PRe=R(()=>{"use strict";p();var U6t=oe(),B6t=_r(),CRe=yt(),V6t=Tl(),MRe=Mr(),G6t=mS(),pW=B6t("URL"),$6t=G6t&&CRe(function(){pW.canParse()}),H6t=CRe(function(){return pW.canParse.length!==1});U6t({target:"URL",stat:!0,forced:!$6t||H6t},{canParse:function(e){var r=V6t(arguments.length,1),n=MRe(e),i=r<2||arguments[1]===void 0?void 0:MRe(arguments[1]);try{return!!new pW(n,i)}catch(o){return!1}}})});var ORe=R(()=>{"use strict";p();var W6t=oe(),Z6t=_r(),Y6t=Tl(),RRe=Mr(),K6t=mS(),X6t=Z6t("URL");W6t({target:"URL",stat:!0,forced:!K6t},{parse:function(e){var r=Y6t(arguments.length,1),n=RRe(e),i=r<2||arguments[1]===void 0?void 0:RRe(arguments[1]);try{return new X6t(n,i)}catch(o){return null}}})});var LRe=R(()=>{"use strict";p();var Q6t=oe(),J6t=jt();Q6t({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return J6t(URL.prototype.toString,this)}})});var DRe=R(()=>{"use strict";p();HH()});var FRe=R(()=>{"use strict";p();var e$t=Nn(),sL=ct(),NRe=Mr(),t$t=Tl(),qRe=URLSearchParams,lL=qRe.prototype,r$t=sL(lL.append),kRe=sL(lL.delete),n$t=sL(lL.forEach),i$t=sL([].push),dW=new qRe("a=1&a=2&b=3");dW.delete("a",1);dW.delete("b",void 0);dW+""!="a=2"&&e$t(lL,"delete",function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&r===void 0)return kRe(this,t);var n=[];n$t(this,function(b,A){i$t(n,{key:A,value:b})}),t$t(e,1);for(var i=NRe(t),o=NRe(r),l=0,f=0,d=!1,v=n.length,x;l<v;)x=n[l++],d||x.key===i?(d=!0,kRe(this,x.key)):f++;for(;f<v;)x=n[f++],x.key===i&&x.value===o||r$t(this,x.key,x.value)},{enumerable:!0,unsafe:!0})});var BRe=R(()=>{"use strict";p();var o$t=Nn(),zRe=ct(),a$t=Mr(),s$t=Tl(),URe=URLSearchParams,mW=URe.prototype,l$t=zRe(mW.getAll),u$t=zRe(mW.has),jRe=new URe("a=1");(jRe.has("a",2)||!jRe.has("a",void 0))&&o$t(mW,"has",function(e){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return u$t(this,e);var i=l$t(this,e);s$t(r,1);for(var o=a$t(n),l=0;l<i.length;)if(i[l++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})});var VRe=R(()=>{"use strict";p();var c$t=sr(),f$t=ct(),h$t=hi(),gW=URLSearchParams.prototype,p$t=f$t(gW.forEach);c$t&&!("size"in gW)&&h$t(gW,"size",{get:function(){var e=0;return p$t(this,function(){e++}),e},configurable:!0,enumerable:!0})});var $Re=R((l$r,GRe)=>{"use strict";p();zoe();Woe();Zoe();Yoe();Koe();Xoe();Qoe();Joe();eae();tae();rae();nae();iae();oae();aae();Oae();qae();TU();nse();CU();fse();mse();vse();xse();bse();Ese();Tse();DU();NU();Pse();Rse();Dse();Vse();Gse();Hse();Wse();B1();dle();yle();_le();ble();Ele();Rle();Lle();Nle();Fle();jle();tue();iue();oue();tB();nB();iB();uue();cue();fue();aB();Bue();ece();ace();lce();IB();PB();LB();ZB();YB();qce();jce();Bce();Vce();Jce();efe();ofe();ufe();ffe();vfe();xfe();Sfe();r3();s3();h3();d3();g3();y3();S3();I3();A3();kP();P3();O3();D3();N3();cU();rhe();UP();V3();She();Ahe();Che();Phe();Rhe();Dhe();khe();qhe();W3();jhe();Uhe();Vhe();Ghe();$he();Hhe();Yhe();Qhe();Jhe();epe();fpe();hpe();dpe();gpe();vpe();ype();_pe();xpe();Ipe();Dpe();jpe();$pe();Zpe();Jpe();ede();nde();ode();sde();lde();dde();mde();gde();_de();xde();bde();Ede();p5();d5();Ide();Mde();Pde();Ode();Dde();Nde();kde();qde();Bde();Vde();Gde();Wde();Zde();Kde();Qde();fge();K5();X5();gge();tV();rV();_ge();Ige();Cge();Pge();Dge();Nge();kge();qge();Fge();jge();zge();$ge();Wge();Zge();fve();yV();_ve();fR();Tve();Ave();Pve();Dve();kve();IV();CV();RV();LV();NV();FV();zV();pye();vye();wye();BV();Iye();VV();GV();zye();XV();Xye();Qye();r_e();n_e();u_e();sG();d_e();x_e();E_e();T_e();dG();O_e();q_e();B_e();H_e();W_e();Z_e();Y_e();K_e();X_e();Q_e();J_e();e0e();t0e();r0e();n0e();i0e();R0e();O0e();L0e();D0e();N0e();k0e();q0e();F0e();j0e();CG();B0e();G0e();H0e();Y0e();X0e();J0e();PG();RG();nxe();ixe();axe();lxe();pxe();mxe();vxe();yxe();xxe();wxe();Sxe();Ixe();Oxe();Lxe();Nxe();Uxe();Vxe();Zxe();$G();HG();Kxe();ZG();tbe();zR();vbe();ybe();bbe();Zbe();Ybe();Kbe();Xbe();Qbe();Jbe();twe();rwe();iwe();owe();lwe();uwe();hwe();pwe();dwe();mwe();wwe();Ewe();Swe();Twe();Iwe();jwe();Gwe();r1e();a1e();l1e();u1e();f1e();h1e();y1e();_1e();b1e();w1e();E1e();S1e();T1e();M1e();C1e();k1e();B1e();G1e();$1e();H1e();W1e();Z1e();J1e();nEe();oEe();sEe();lEe();fEe();hEe();pEe();dEe();gEe();_Ee();wEe();EEe();SEe();TEe();IEe();AEe();MEe();CEe();PEe();REe();LEe();DEe();NEe();kEe();qEe();jEe();BEe();eSe();lSe();cSe();hSe();pSe();mSe();gSe();vSe();xSe();bSe();wSe();ESe();ISe();MSe();CSe();RSe();LSe();DSe();qSe();FSe();jSe();USe();VSe();GSe();YSe();KSe();XSe();JSe();eTe();tTe();rTe();nTe();iTe();oTe();aTe();cTe();fTe();gTe();vTe();xTe();bTe();wTe();ITe();ATe();MTe();CTe();GTe();$Te();HTe();WTe();ZTe();eIe();rIe();iIe();lIe();cIe();hIe();mIe();vIe();_Ie();xIe();bIe();wIe();EIe();MIe();CIe();RIe();OIe();DIe();NIe();kIe();qIe();FIe();jIe();zIe();UIe();BIe();GIe();HIe();ZIe();YIe();KIe();XIe();QIe();JIe();eAe();tAe();aAe();fAe();RAe();OAe();LAe();DAe();NAe();kAe();qAe();FAe();zAe();UAe();ZAe();YAe();KAe();XAe();QAe();JAe();eMe();tMe();nMe();iMe();aMe();lMe();uMe();cMe();fMe();hMe();pMe();dMe();mMe();gMe();MMe();LMe();NMe();kMe();FMe();jMe();UMe();VMe();$Me();WMe();ZMe();QMe();JMe();rCe();nCe();oCe();sCe();dCe();_Ce();ICe();RCe();VCe();KCe();QCe();sPe();lPe();cPe();bPe();MPe();ARe();PRe();ORe();LRe();DRe();FRe();BRe();VRe();GRe.exports=WC()});var WRe=R((c$r,HRe)=>{"use strict";p();HRe.exports=$Re()});var SL=R((UW,BW)=>{p();(function(t,e){typeof UW=="object"&&typeof BW!="undefined"?BW.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self,t.maplibregl=e())})(UW,function(){"use strict";var t={},e={};function r(i,o,l){if(e[i]=l,i==="index"){var f="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",d={};return e.shared(d),e.index(t,d),typeof window!="undefined"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"}))),t}}r("shared",["exports"],function(i){"use strict";function o(c,s,u,m){return new(u||(u=Promise))(function(y,S){function I(q){try{O(m.next(q))}catch(z){S(z)}}function C(q){try{O(m.throw(q))}catch(z){S(z)}}function O(q){var z;q.done?y(q.value):(z=q.value,z instanceof u?z:new u(function(G){G(z)})).then(I,C)}O((m=m.apply(c,s||[])).next())})}function l(c,s){this.x=c,this.y=s}function f(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var d,v;typeof SuppressedError=="function"&&SuppressedError,l.prototype={clone(){return new l(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,s){return this.clone()._rotateAround(c,s)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){let s=c.x-this.x,u=c.y-this.y;return s*s+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult(c){let s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){let c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){let s=Math.cos(c),u=Math.sin(c),m=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=m,this},_rotateAround(c,s){let u=Math.cos(c),m=Math.sin(c),y=s.y+m*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-m*(this.y-s.y),this.y=y,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:l},l.convert=function(c){if(c instanceof l)return c;if(Array.isArray(c))return new l(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new l(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var x=function(){if(v)return d;function c(s,u,m,y){this.cx=3*s,this.bx=3*(m-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(y-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=m,this.p2y=y}return v=1,d=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var m=s,y=0;y<8;y++){var S=this.sampleCurveX(m)-s;if(Math.abs(S)<u)return m;var I=this.sampleCurveDerivativeX(m);if(Math.abs(I)<1e-6)break;m-=S/I}var C=0,O=1;for(m=s,y=0;y<20&&(S=this.sampleCurveX(m),!(Math.abs(S-s)<u));y++)s>S?C=m:O=m,m=.5*(O-C)+C;return m},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},d}(),b=f(x);let A,P;function N(){return A==null&&(A=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),A}function j(){if(P==null&&(P=!1,N())){let s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let m=0;m<5*5;m++){let y=4*m;s.fillStyle=`rgb(${y},${y+1},${y+2})`,s.fillRect(m%5,Math.floor(m/5),1,1)}let u=s.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&u[m]!==m){P=!0;break}}}return P||!1}var D=1e-6,F=typeof Float32Array!="undefined"?Float32Array:Array;function U(){var c=new F(9);return F!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function $(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Z(){var c=new F(3);return F!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function ie(c){var s=c[0],u=c[1],m=c[2];return Math.sqrt(s*s+u*u+m*m)}function ne(c,s,u){var m=new F(3);return m[0]=c,m[1]=s,m[2]=u,m}function ae(c,s,u){return c[0]=s[0]+u[0],c[1]=s[1]+u[1],c[2]=s[2]+u[2],c}function de(c,s,u){return c[0]=s[0]*u,c[1]=s[1]*u,c[2]=s[2]*u,c}function ye(c,s,u){var m=s[0],y=s[1],S=s[2],I=u[0],C=u[1],O=u[2];return c[0]=y*O-S*C,c[1]=S*I-m*O,c[2]=m*C-y*I,c}var me,be=ie;function Ne(c,s,u){var m=s[0],y=s[1],S=s[2],I=s[3];return c[0]=u[0]*m+u[4]*y+u[8]*S+u[12]*I,c[1]=u[1]*m+u[5]*y+u[9]*S+u[13]*I,c[2]=u[2]*m+u[6]*y+u[10]*S+u[14]*I,c[3]=u[3]*m+u[7]*y+u[11]*S+u[15]*I,c}function Ce(){var c=new F(4);return F!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function qe(c,s,u,m){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",S=Math.PI/360;s*=S,m*=S,u*=S;var I=Math.sin(s),C=Math.cos(s),O=Math.sin(u),q=Math.cos(u),z=Math.sin(m),G=Math.cos(m);switch(y){case"xyz":c[0]=I*q*G+C*O*z,c[1]=C*O*G-I*q*z,c[2]=C*q*z+I*O*G,c[3]=C*q*G-I*O*z;break;case"xzy":c[0]=I*q*G-C*O*z,c[1]=C*O*G-I*q*z,c[2]=C*q*z+I*O*G,c[3]=C*q*G+I*O*z;break;case"yxz":c[0]=I*q*G+C*O*z,c[1]=C*O*G-I*q*z,c[2]=C*q*z-I*O*G,c[3]=C*q*G+I*O*z;break;case"yzx":c[0]=I*q*G+C*O*z,c[1]=C*O*G+I*q*z,c[2]=C*q*z-I*O*G,c[3]=C*q*G-I*O*z;break;case"zxy":c[0]=I*q*G-C*O*z,c[1]=C*O*G+I*q*z,c[2]=C*q*z+I*O*G,c[3]=C*q*G-I*O*z;break;case"zyx":c[0]=I*q*G-C*O*z,c[1]=C*O*G+I*q*z,c[2]=C*q*z-I*O*G,c[3]=C*q*G+I*O*z;break;default:throw new Error("Unknown angle order "+y)}return c}function He(){var c=new F(2);return F!=Float32Array&&(c[0]=0,c[1]=0),c}function Ke(c,s){var u=new F(2);return u[0]=c,u[1]=s,u}Z(),me=new F(4),F!=Float32Array&&(me[0]=0,me[1]=0,me[2]=0,me[3]=0),Z(),ne(1,0,0),ne(0,1,0),Ce(),Ce(),U(),He();let Je=8192;function We(c,s,u){return s*(Je/(c.tileSize*Math.pow(2,u-c.tileID.overscaledZ)))}function lt(c,s){return(c%s+s)%s}function pt(c,s,u){return c*(1-u)+s*u}function dt(c){if(c<=0)return 0;if(c>=1)return 1;let s=c*c,u=s*c;return 4*(c<.5?u:3*(c-s)+u-.75)}function ze(c,s,u,m){let y=new b(c,s,u,m);return S=>y.solve(S)}let Dt=ze(.25,.1,.25,1);function Ot(c,s,u){return Math.min(u,Math.max(s,c))}function Ue(c,s,u){let m=u-s,y=((c-s)%m+m)%m+s;return y===s?u:y}function nt(c,...s){for(let u of s)for(let m in u)c[m]=u[m];return c}let Ze=1;function rt(c,s,u){let m={};for(let y in c)m[y]=s.call(this,c[y],y,c);return m}function at(c,s,u){let m={};for(let y in c)s.call(this,c[y],y,c)&&(m[y]=c[y]);return m}function ot(c){return Array.isArray(c)?c.map(ot):typeof c=="object"&&c?rt(c,ot):c}let Lt={};function zt(c){Lt[c]||(typeof console!="undefined"&&console.warn(c),Lt[c]=!0)}function Pt(c,s,u){return(u.y-c.y)*(s.x-c.x)>(s.y-c.y)*(u.x-c.x)}function $t(c){return typeof WorkerGlobalScope!="undefined"&&c!==void 0&&c instanceof WorkerGlobalScope}let Xt=null;function Gt(c){return typeof ImageBitmap!="undefined"&&c instanceof ImageBitmap}let Sr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function zr(c,s,u,m,y){return o(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let S=new VideoFrame(c,{timestamp:0});try{let I=S==null?void 0:S.format;if(!I||!I.startsWith("BGR")&&!I.startsWith("RGB"))throw new Error(`Unrecognized format ${I}`);let C=I.startsWith("BGR"),O=new Uint8ClampedArray(m*y*4);if(yield S.copyTo(O,function(q,z,G,Y,X){let Q=4*Math.max(-z,0),re=(Math.max(0,G)-G)*Y*4+Q,le=4*Y,ge=Math.max(0,z),ke=Math.max(0,G);return{rect:{x:ge,y:ke,width:Math.min(q.width,z+Y)-ge,height:Math.min(q.height,G+X)-ke},layout:[{offset:re,stride:le}]}}(c,s,u,m,y)),C)for(let q=0;q<O.length;q+=4){let z=O[q];O[q]=O[q+2],O[q+2]=z}return O}finally{S.close()}})}let vr,pr;function dr(c,s,u,m){return c.addEventListener(s,u,m),{unsubscribe:()=>{c.removeEventListener(s,u,m)}}}function br(c){return c*Math.PI/180}function un(c){return c/Math.PI*180}let En={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Rn={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},gi="AbortError";function De(){return new Error(gi)}let J={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function te(c){return J.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}let se="global-dispatcher";class _e extends Error{constructor(s,u,m,y){super(`AJAXError: ${u} (${s}): ${m}`),this.status=s,this.statusText=u,this.url=m,this.body=y}}let Ae=()=>$t(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Le=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){let m=te(c.url);if(m)return m(c,s);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:se},s)}if(!(/^file:/.test(u=c.url)||/^file:/.test(Ae())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,y){return o(this,void 0,void 0,function*(){let S=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:Ae(),signal:y.signal}),I,C;m.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{I=yield fetch(S)}catch(q){throw new _e(0,q.message,m.url,new Blob())}if(!I.ok){let q=yield I.blob();throw new _e(I.status,I.statusText,m.url,q)}C=m.type==="arrayBuffer"||m.type==="image"?I.arrayBuffer():m.type==="json"?I.json():I.text();let O=yield C;if(y.signal.aborted)throw De();return{data:O,cacheControl:I.headers.get("Cache-Control"),expires:I.headers.get("Expires")}})}(c,s);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:se},s)}var u;return function(m,y){return new Promise((S,I)=>{var C;let O=new XMLHttpRequest;O.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(O.responseType="arraybuffer");for(let q in m.headers)O.setRequestHeader(q,m.headers[q]);m.type==="json"&&(O.responseType="text",!((C=m.headers)===null||C===void 0)&&C.Accept||O.setRequestHeader("Accept","application/json")),O.withCredentials=m.credentials==="include",O.onerror=()=>{I(new Error(O.statusText))},O.onload=()=>{if(!y.signal.aborted)if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let q=O.response;if(m.type==="json")try{q=JSON.parse(O.response)}catch(z){return void I(z)}S({data:q,cacheControl:O.getResponseHeader("Cache-Control"),expires:O.getResponseHeader("Expires")})}else{let q=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});I(new _e(O.status,O.statusText,m.url,q))}},y.signal.addEventListener("abort",()=>{O.abort(),I(De())}),O.send(m.body)})}(c,s)};function Be(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;let s=new URL(c),u=window.location;return s.protocol===u.protocol&&s.host===u.host}function Oe(c,s,u){u[c]&&u[c].indexOf(s)!==-1||(u[c]=u[c]||[],u[c].push(s))}function he(c,s,u){if(u&&u[c]){let m=u[c].indexOf(s);m!==-1&&u[c].splice(m,1)}}class pe{constructor(s,u={}){nt(this,u),this.type=s}}class Re extends pe{constructor(s,u={}){super("error",nt({error:s},u))}}class tt{on(s,u){return this._listeners=this._listeners||{},Oe(s,u,this._listeners),{unsubscribe:()=>{this.off(s,u)}}}off(s,u){return he(s,u,this._listeners),he(s,u,this._oneTimeListeners),this}once(s,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Oe(s,u,this._oneTimeListeners),this):new Promise(m=>this.once(s,m))}fire(s,u){typeof s=="string"&&(s=new pe(s,u||{}));let m=s.type;if(this.listens(m)){s.target=this;let y=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(let C of y)C.call(this,s);let S=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(let C of S)he(m,C,this._oneTimeListeners),C.call(this,s);let I=this._eventedParent;I&&(nt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(s))}else s instanceof Re&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,u){return this._eventedParent=s,this._eventedParentData=u,this}}var xe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function It(c,s){let u={};for(let m in c)m!=="ref"&&(u[m]=c[m]);return ut.forEach(m=>{m in s&&(u[m]=s[m])}),u}function ft(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let u=0;u<c.length;u++)if(!ft(c[u],s[u]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(let u in c)if(!ft(c[u],s[u]))return!1;return!0}return c===s}function _t(c,s){c.push(s)}function Wt(c,s,u){_t(u,{command:"addSource",args:[c,s[c]]})}function Tr(c,s,u){_t(s,{command:"removeSource",args:[c]}),u[c]=!0}function rn(c,s,u,m){Tr(c,u,m),Wt(c,s,u)}function Pr(c,s,u){let m;for(m in c[u])if(Object.prototype.hasOwnProperty.call(c[u],m)&&m!=="data"&&!ft(c[u][m],s[u][m]))return!1;for(m in s[u])if(Object.prototype.hasOwnProperty.call(s[u],m)&&m!=="data"&&!ft(c[u][m],s[u][m]))return!1;return!0}function ar(c,s,u,m,y,S){c=c||{},s=s||{};for(let I in c)Object.prototype.hasOwnProperty.call(c,I)&&(ft(c[I],s[I])||u.push({command:S,args:[m,I,s[I],y]}));for(let I in s)Object.prototype.hasOwnProperty.call(s,I)&&!Object.prototype.hasOwnProperty.call(c,I)&&(ft(c[I],s[I])||u.push({command:S,args:[m,I,s[I],y]}))}function ur(c){return c.id}function An(c,s){return c[s.id]=s,c}class gt{constructor(s,u,m,y){this.message=(s?`${s}: `:"")+m,y&&(this.identifier=y),u!=null&&u.__line__&&(this.line=u.__line__)}}function si(c,...s){for(let u of s)for(let m in u)c[m]=u[m];return c}class Sn extends Error{constructor(s,u){super(u),this.message=u,this.key=s}}class Ta{constructor(s,u=[]){this.parent=s,this.bindings={};for(let[m,y]of u)this.bindings[m]=y}concat(s){return new Ta(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}let Es={kind:"null"},wt={kind:"number"},Rr={kind:"string"},wr={kind:"boolean"},yn={kind:"color"},Vi={kind:"projectionDefinition"},Ss={kind:"object"},Ir={kind:"value"},qf={kind:"collator"},Cc={kind:"formatted"},Mv={kind:"padding"},jl={kind:"colorArray"},ap={kind:"numberArray"},Ti={kind:"resolvedImage"},Cv={kind:"variableAnchorOffsetCollection"};function Ia(c,s){return{kind:"array",itemType:c,N:s}}function qn(c){if(c.kind==="array"){let s=qn(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}let oA=[Es,wt,Rr,wr,yn,Vi,Cc,Ss,Ia(Ir),Mv,ap,jl,Ti,Cv];function _m(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!_m(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(let u of oA)if(!_m(u,s))return null}}return`Expected ${qn(c)} but found ${qn(s)} instead.`}function sb(c,s){return s.some(u=>u.kind===c.kind)}function Pc(c,s){return s.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}function Rc(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}let lb=.96422,aA=.82521,sA=4/29,sp=6/29,lA=3*sp*sp,Pq=sp*sp*sp,Rq=Math.PI/180,Oq=180/Math.PI;function ub(c){return(c%=360)<0&&(c+=360),c}function lp([c,s,u,m]){let y,S,I=fb((.2225045*(c=cb(c))+.7168786*(s=cb(s))+.0606169*(u=cb(u)))/1);c===s&&s===u?y=S=I:(y=fb((.4360747*c+.3850649*s+.1430804*u)/lb),S=fb((.0139322*c+.0971045*s+.7141733*u)/aA));let C=116*I-16;return[C<0?0:C,500*(y-I),200*(I-S),m]}function cb(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function fb(c){return c>Pq?Math.pow(c,1/3):c/lA+sA}function up([c,s,u,m]){let y=(c+16)/116,S=isNaN(s)?y:y+s/500,I=isNaN(u)?y:y-u/200;return y=1*pb(y),S=lb*pb(S),I=aA*pb(I),[hb(3.1338561*S-1.6168667*y-.4906146*I),hb(-.9787684*S+1.9161415*y+.033454*I),hb(.0719453*S-.2289914*y+1.4052427*I),m]}function hb(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function pb(c){return c>sp?c*c*c:lA*(c-sA)}let Lq=Object.hasOwn||function(c,s){return Object.prototype.hasOwnProperty.call(c,s)};function cp(c,s){return Lq(c,s)?c[s]:void 0}function xm(c){return parseInt(c.padEnd(2,c),16)/255}function sl(c,s){return Gr(s?c/100:c,0,1)}function Gr(c,s,u){return Math.min(Math.max(s,c),u)}function Ff(c){return!c.some(Number.isNaN)}let Oc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function qu(c,s,u){return c+u*(s-c)}function jf(c,s,u){return c.map((m,y)=>qu(m,s[y],u))}class $r{constructor(s,u,m,y=1,S=!0){this.r=s,this.g=u,this.b=m,this.a=y,S||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[s,u,m,y]))}static parse(s){if(s instanceof $r)return s;if(typeof s!="string")return;let u=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];let y=cp(Oc,m);if(y){let[I,C,O]=y;return[I/255,C/255,O/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){let I=m.length<6?1:2,C=1;return[xm(m.slice(C,C+=I)),xm(m.slice(C,C+=I)),xm(m.slice(C,C+=I)),xm(m.slice(C,C+I)||"ff")]}if(m.startsWith("rgb")){let I=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){let[C,O,q,z,G,Y,X,Q,re,le,ge,ke]=I,Te=[z||" ",X||" ",le].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){let Me=[q,Y,re].join(""),$e=Me==="%%%"?100:Me===""?255:0;if($e){let et=[Gr(+O/$e,0,1),Gr(+G/$e,0,1),Gr(+Q/$e,0,1),ge?sl(+ge,ke):1];if(Ff(et))return et}}return}}let S=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){let[I,C,O,q,z,G,Y,X,Q]=S,re=[O||" ",z||" ",Y].join("");if(re==="  "||re==="  /"||re===",,"||re===",,,"){let le=[+C,Gr(+q,0,100),Gr(+G,0,100),X?sl(+X,Q):1];if(Ff(le))return function([ge,ke,Te,Me]){function $e(et){let ht=(et+ge/30)%12,Rt=ke*Math.min(Te,1-Te);return Te-Rt*Math.max(-1,Math.min(ht-3,9-ht,1))}return ge=ub(ge),ke/=100,Te/=100,[$e(0),$e(8),$e(4),Me]}(le)}}}(s);return u?new $r(...u,!1):void 0}get rgb(){let{r:s,g:u,b:m,a:y}=this,S=y||1/0;return this.overwriteGetter("rgb",[s/S,u/S,m/S,y])}get hcl(){return this.overwriteGetter("hcl",function(s){let[u,m,y,S]=lp(s),I=Math.sqrt(m*m+y*y);return[Math.round(1e4*I)?ub(Math.atan2(y,m)*Oq):NaN,I,u,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",lp(this.rgb))}overwriteGetter(s,u){return Object.defineProperty(this,s,{value:u}),u}toString(){let[s,u,m,y]=this.rgb;return`rgba(${[s,u,m].map(S=>Math.round(255*S)).join(",")},${y})`}static interpolate(s,u,m,y="rgb"){switch(y){case"rgb":{let[S,I,C,O]=jf(s.rgb,u.rgb,m);return new $r(S,I,C,O,!1)}case"hcl":{let[S,I,C,O]=s.hcl,[q,z,G,Y]=u.hcl,X,Q;if(isNaN(S)||isNaN(q))isNaN(S)?isNaN(q)?X=NaN:(X=q,C!==1&&C!==0||(Q=z)):(X=S,G!==1&&G!==0||(Q=I));else{let Te=q-S;q>S&&Te>180?Te-=360:q<S&&S-q>180&&(Te+=360),X=S+m*Te}let[re,le,ge,ke]=function([Te,Me,$e,et]){return Te=isNaN(Te)?0:Te*Rq,up([$e,Math.cos(Te)*Me,Math.sin(Te)*Me,et])}([X,Q!=null?Q:qu(I,z,m),qu(C,G,m),qu(O,Y,m)]);return new $r(re,le,ge,ke,!1)}case"lab":{let[S,I,C,O]=up(jf(s.lab,u.lab,m));return new $r(S,I,C,O,!1)}}}}$r.black=new $r(0,0,0,1),$r.white=new $r(1,1,1,1),$r.transparent=new $r(0,0,0,0),$r.red=new $r(1,0,0,1);class zf{constructor(s,u,m){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,u){return this.collator.compare(s,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let Pv=["bottom","center","top"];class Rv{constructor(s,u,m,y,S,I){this.text=s,this.image=u,this.scale=m,this.fontStack=y,this.textColor=S,this.verticalAlign=I}}class na{constructor(s){this.sections=s}static fromString(s){return new na([new Rv(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof na?s:na.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class co{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof co)return s;if(typeof s=="number")return new co([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(let u of s)if(typeof u!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new co(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,m){return new co(jf(s.values,u.values,m))}}class ia{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof ia)return s;if(typeof s=="number")return new ia([s]);if(Array.isArray(s)){for(let u of s)if(typeof u!="number")return;return new ia(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,m){return new ia(jf(s.values,u.values,m))}}class Gi{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Gi)return s;if(typeof s=="string"){let m=$r.parse(s);return m?new Gi([m]):void 0}if(!Array.isArray(s))return;let u=[];for(let m of s){if(typeof m!="string")return;let y=$r.parse(m);if(!y)return;u.push(y)}return new Gi(u)}toString(){return JSON.stringify(this.values)}static interpolate(s,u,m,y="rgb"){let S=[];if(s.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let I=0;I<s.values.length;I++)S.push($r.interpolate(s.values[I],u.values[I],m,y));return new Gi(S)}}class Fn extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}let uA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class oa{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof oa)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let u=0;u<s.length;u+=2){let m=s[u],y=s[u+1];if(typeof m!="string"||!uA.has(m)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new oa(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,u,m){let y=s.values,S=u.values;if(y.length!==S.length)throw new Fn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${u.toString()}`);let I=[];for(let C=0;C<y.length;C+=2){if(y[C]!==S[C])throw new Fn(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${y[C]}, to[${C}]: ${S[C]}`);I.push(y[C]);let[O,q]=y[C+1],[z,G]=S[C+1];I.push([qu(O,z,m),qu(q,G,m)])}return new oa(I)}}class Ja{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Ja({name:s,available:!1}):null}}class Go{constructor(s,u,m){this.from=s,this.to=u,this.transition=m}static interpolate(s,u,m){return new Go(s,u,m)}static parse(s){return s instanceof Go?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new Go(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new Go(s.from,s.to,s.transition):typeof s=="string"?new Go(s,s,1):void 0}}function Qn(c,s,u,m){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof u=="number"&&u>=0&&u<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,s,u,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,s,u,m]:[c,s,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Uf(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Go||c instanceof $r||c instanceof zf||c instanceof na||c instanceof co||c instanceof ia||c instanceof Gi||c instanceof oa||c instanceof Ja)return!0;if(Array.isArray(c)){for(let s of c)if(!Uf(s))return!1;return!0}if(typeof c=="object"){for(let s in c)if(!Uf(c[s]))return!1;return!0}return!1}function cr(c){if(c===null)return Es;if(typeof c=="string")return Rr;if(typeof c=="boolean")return wr;if(typeof c=="number")return wt;if(c instanceof $r)return yn;if(c instanceof Go)return Vi;if(c instanceof zf)return qf;if(c instanceof na)return Cc;if(c instanceof co)return Mv;if(c instanceof ia)return ap;if(c instanceof Gi)return jl;if(c instanceof oa)return Cv;if(c instanceof Ja)return Ti;if(Array.isArray(c)){let s=c.length,u;for(let m of c){let y=cr(m);if(u){if(u===y)continue;u=Ir;break}u=y}return Ia(u||Ir,s)}return Ss}function Ar(c){let s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof $r||c instanceof Go||c instanceof na||c instanceof co||c instanceof ia||c instanceof Gi||c instanceof oa||c instanceof Ja?c.toString():JSON.stringify(c)}class Fu{constructor(s,u){this.type=s,this.value=u}static parse(s,u){if(s.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Uf(s[1]))return u.error("invalid value");let m=s[1],y=cr(m),S=u.expectedType;return y.kind!=="array"||y.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(y=S),new Fu(y,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let nn={string:Rr,number:wt,boolean:wr,object:Ss};class es{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let m,y=1,S=s[0];if(S==="array"){let C,O;if(s.length>2){let q=s[1];if(typeof q!="string"||!(q in nn)||q==="object")return u.error("The item type argument of \"array\" must be one of string, number, boolean",1);C=nn[q],y++}else C=Ir;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return u.error("The length argument to \"array\" must be a positive integer literal",2);O=s[2],y++}m=Ia(C,O)}else{if(!nn[S])throw new Error(`Types doesn't contain name = ${S}`);m=nn[S]}let I=[];for(;y<s.length;y++){let C=u.parse(s[y],y,Ir);if(!C)return null;I.push(C)}return new es(m,I)}evaluate(s){for(let u=0;u<this.args.length;u++){let m=this.args[u].evaluate(s);if(!_m(this.type,cr(m)))return m;if(u===this.args.length-1)throw new Fn(`Expected value to be of type ${qn(this.type)}, but found ${qn(cr(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let zl={"to-boolean":wr,"to-color":yn,"to-number":wt,"to-string":Rr};class Ul{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let m=s[0];if(!zl[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&s.length!==2)return u.error("Expected one argument.");let y=zl[m],S=[];for(let I=1;I<s.length;I++){let C=u.parse(s[I],I,Ir);if(!C)return null;S.push(C)}return new Ul(y,S)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let u,m;for(let y of this.args){if(u=y.evaluate(s),m=null,u instanceof $r)return u;if(typeof u=="string"){let S=s.parseColor(u);if(S)return S}else if(Array.isArray(u)&&(m=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Qn(u[0],u[1],u[2],u[3]),!m))return new $r(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Fn(m||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(let m of this.args){u=m.evaluate(s);let y=co.parse(u);if(y)return y}throw new Fn(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(let m of this.args){u=m.evaluate(s);let y=ia.parse(u);if(y)return y}throw new Fn(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(let m of this.args){u=m.evaluate(s);let y=Gi.parse(u);if(y)return y}throw new Fn(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(let m of this.args){u=m.evaluate(s);let y=oa.parse(u);if(y)return y}throw new Fn(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(let m of this.args){if(u=m.evaluate(s),u===null)return 0;let y=Number(u);if(!isNaN(y))return y}throw new Fn(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return na.fromString(Ar(this.args[0].evaluate(s)));case"resolvedImage":return Ja.fromString(Ar(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return Ar(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let Ov=["Unknown","Point","LineString","Polygon"];class db{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ov[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let u=this._parseColorCache.get(s);return u||(u=$r.parse(s),this._parseColorCache.set(s,u)),u}}class fp{constructor(s,u,m=[],y,S=new Ta,I=[]){this.registry=s,this.path=m,this.key=m.map(C=>`[${C}]`).join(""),this.scope=S,this.errors=I,this.expectedType=y,this._isConstant=u}parse(s,u,m,y,S={}){return u?this.concat(u,m,y)._parse(s,S):this._parse(s,S)}_parse(s,u){function m(y,S,I){return I==="assert"?new es(S,[y]):I==="coerce"?new Ul(S,[y]):y}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let y=s[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let S=this.registry[y];if(S){let I=S.parse(s,this);if(!I)return null;if(this.expectedType){let C=this.expectedType,O=I.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||O.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(O.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(O.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(O.kind)||C.kind==="colorArray"&&["value","string","array"].includes(O.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(O.kind))I=m(I,C,u.typeAnnotation||"coerce");else if(this.checkSubtype(C,O))return null}else I=m(I,C,u.typeAnnotation||"assert")}if(!(I instanceof Fu)&&I.type.kind!=="resolvedImage"&&this._isConstant(I)){let C=new db;try{I=new Fu(I.type,I.evaluate(C))}catch(O){return this.error(O.message),null}}return I}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof s} instead.`)}concat(s,u,m){let y=typeof s=="number"?this.path.concat(s):this.path,S=m?this.scope.concat(m):this.scope;return new fp(this.registry,this._isConstant,y,u||null,S,this.errors)}error(s,...u){let m=`${this.key}${u.map(y=>`[${y}]`).join("")}`;this.errors.push(new Sn(m,s))}checkSubtype(s,u){let m=_m(s,u);return m&&this.error(m),m}}class bm{constructor(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(let u of this.bindings)s(u[1]);s(this.result)}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);let m=[];for(let S=1;S<s.length-1;S+=2){let I=s[S];if(typeof I!="string")return u.error(`Expected string, but found ${typeof I} instead.`,S);if(/[^a-zA-Z0-9_]/.test(I))return u.error("Variable names must contain only alphanumeric characters or '_'.",S);let C=u.parse(s[S+1],S+1);if(!C)return null;m.push([I,C])}let y=u.parse(s[s.length-1],s.length-1,u.expectedType,m);return y?new bm(m,y):null}outputDefined(){return this.result.outputDefined()}}class Lv{constructor(s,u){this.type=u.type,this.name=s,this.boundExpression=u}static parse(s,u){if(s.length!==2||typeof s[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");let m=s[1];return u.scope.has(m)?new Lv(m,u.scope.get(m)):u.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Dv{constructor(s,u,m){this.type=s,this.index=u,this.input=m}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let m=u.parse(s[1],1,wt),y=u.parse(s[2],2,Ia(u.expectedType||Ir));return m&&y?new Dv(y.type.itemType,m,y):null}evaluate(s){let u=this.index.evaluate(s),m=this.input.evaluate(s);if(u<0)throw new Fn(`Array index out of bounds: ${u} < 0.`);if(u>=m.length)throw new Fn(`Array index out of bounds: ${u} > ${m.length-1}.`);if(u!==Math.floor(u))throw new Fn(`Array index must be an integer, but found ${u} instead.`);return m[u]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Nv{constructor(s,u){this.type=wr,this.needle=s,this.haystack=u}static parse(s,u){if(s.length!==3)return u.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let m=u.parse(s[1],1,Ir),y=u.parse(s[2],2,Ir);return m&&y?sb(m.type,[wr,Rr,wt,Es,Ir])?new Nv(m,y):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${qn(m.type)} instead`):null}evaluate(s){let u=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!Pc(u,["boolean","string","number","null"]))throw new Fn(`Expected first argument to be of type boolean, string, number or null, but found ${qn(cr(u))} instead.`);if(!Pc(m,["string","array"]))throw new Fn(`Expected second argument to be of type array or string, but found ${qn(cr(m))} instead.`);return m.indexOf(u)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class ll{constructor(s,u,m){this.type=wt,this.needle=s,this.haystack=u,this.fromIndex=m}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let m=u.parse(s[1],1,Ir),y=u.parse(s[2],2,Ir);if(!m||!y)return null;if(!sb(m.type,[wr,Rr,wt,Es,Ir]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${qn(m.type)} instead`);if(s.length===4){let S=u.parse(s[3],3,wt);return S?new ll(m,y,S):null}return new ll(m,y)}evaluate(s){let u=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!Pc(u,["boolean","string","number","null"]))throw new Fn(`Expected first argument to be of type boolean, string, number or null, but found ${qn(cr(u))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(s)),Pc(m,["string"])){let S=m.indexOf(u,y);return S===-1?-1:[...m.slice(0,S)].length}if(Pc(m,["array"]))return m.indexOf(u,y);throw new Fn(`Expected second argument to be of type array or string, but found ${qn(cr(m))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class fo{constructor(s,u,m,y,S,I){this.inputType=s,this.type=u,this.input=m,this.cases=y,this.outputs=S,this.otherwise=I}static parse(s,u){if(s.length<5)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return u.error("Expected an even number of arguments.");let m,y;u.expectedType&&u.expectedType.kind!=="value"&&(y=u.expectedType);let S={},I=[];for(let q=2;q<s.length-1;q+=2){let z=s[q],G=s[q+1];Array.isArray(z)||(z=[z]);let Y=u.concat(q);if(z.length===0)return Y.error("Expected at least one branch label.");for(let Q of z){if(typeof Q!="number"&&typeof Q!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Y.error("Numeric branch labels must be integer values.");if(m){if(Y.checkSubtype(m,cr(Q)))return null}else m=cr(Q);if(S[String(Q)]!==void 0)return Y.error("Branch labels must be unique.");S[String(Q)]=I.length}let X=u.parse(G,q,y);if(!X)return null;y=y||X.type,I.push(X)}let C=u.parse(s[1],1,Ir);if(!C)return null;let O=u.parse(s[s.length-1],s.length-1,y);return O?C.type.kind!=="value"&&u.concat(1).checkSubtype(m,C.type)?null:new fo(m,y,C,S,I,O):null}evaluate(s){let u=this.input.evaluate(s);return(cr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class hp{constructor(s,u,m){this.type=s,this.branches=u,this.otherwise=m}static parse(s,u){if(s.length<4)return u.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return u.error("Expected an odd number of arguments.");let m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);let y=[];for(let I=1;I<s.length-1;I+=2){let C=u.parse(s[I],I,wr);if(!C)return null;let O=u.parse(s[I+1],I+1,m);if(!O)return null;y.push([C,O]),m=m||O.type}let S=u.parse(s[s.length-1],s.length-1,m);if(!S)return null;if(!m)throw new Error("Can't infer output type");return new hp(m,y,S)}evaluate(s){for(let[u,m]of this.branches)if(u.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(let[u,m]of this.branches)s(u),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class wm{constructor(s,u,m,y){this.type=s,this.input=u,this.beginIndex=m,this.endIndex=y}static parse(s,u){if(s.length<=2||s.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let m=u.parse(s[1],1,Ir),y=u.parse(s[2],2,wt);if(!m||!y)return null;if(!sb(m.type,[Ia(Ir),Rr,Ir]))return u.error(`Expected first argument to be of type array or string, but found ${qn(m.type)} instead`);if(s.length===4){let S=u.parse(s[3],3,wt);return S?new wm(m.type,m,y,S):null}return new wm(m.type,m,y)}evaluate(s){let u=this.input.evaluate(s),m=this.beginIndex.evaluate(s),y;if(this.endIndex&&(y=this.endIndex.evaluate(s)),Pc(u,["string"]))return[...u].slice(m,y).join("");if(Pc(u,["array"]))return u.slice(m,y);throw new Fn(`Expected first argument to be of type array or string, but found ${qn(cr(u))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Bf(c,s){let u=c.length-1,m,y,S=0,I=u,C=0;for(;S<=I;)if(C=Math.floor((S+I)/2),m=c[C],y=c[C+1],m<=s){if(C===u||s<y)return C;S=C+1}else{if(!(m>s))throw new Fn("Input is not a number.");I=C-1}return 0}class Ii{constructor(s,u,m){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(let[y,S]of m)this.labels.push(y),this.outputs.push(S)}static parse(s,u){if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");let m=u.parse(s[1],1,wt);if(!m)return null;let y=[],S=null;u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);for(let I=1;I<s.length;I+=2){let C=I===1?-1/0:s[I],O=s[I+1],q=I,z=I+1;if(typeof C!="number")return u.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",q);if(y.length&&y[y.length-1][0]>=C)return u.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",q);let G=u.parse(O,z,S);if(!G)return null;S=S||G.type,y.push([C,G])}return new Ii(S,m,y)}evaluate(s){let u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(s);let y=this.input.evaluate(s);if(y<=u[0])return m[0].evaluate(s);let S=u.length;return y>=u[S-1]?m[S-1].evaluate(s):m[Bf(u,y)].evaluate(s)}eachChild(s){s(this.input);for(let u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function cA(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Em,mb,Dq=function(){if(mb)return Em;function c(s,u,m,y){this.cx=3*s,this.bx=3*(m-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(y-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=u,this.p2x=m,this.p2y=y}return mb=1,Em=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,u){if(u===void 0&&(u=1e-6),s<0)return 0;if(s>1)return 1;for(var m=s,y=0;y<8;y++){var S=this.sampleCurveX(m)-s;if(Math.abs(S)<u)return m;var I=this.sampleCurveDerivativeX(m);if(Math.abs(I)<1e-6)break;m-=S/I}var C=0,O=1;for(m=s,y=0;y<20&&(S=this.sampleCurveX(m),!(Math.abs(S-s)<u));y++)s>S?C=m:O=m,m=.5*(O-C)+C;return m},solve:function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))}},Em}(),pp=cA(Dq);class Mo{constructor(s,u,m,y,S){this.type=s,this.operator=u,this.interpolation=m,this.input=y,this.labels=[],this.outputs=[];for(let[I,C]of S)this.labels.push(I),this.outputs.push(C)}static interpolationFactor(s,u,m,y){let S=0;if(s.name==="exponential")S=Sm(u,s.base,m,y);else if(s.name==="linear")S=Sm(u,1,m,y);else if(s.name==="cubic-bezier"){let I=s.controlPoints;S=new pp(I[0],I[1],I[2],I[3]).solve(Sm(u,1,m,y))}return S}static parse(s,u){let[m,y,S,...I]=s;if(!Array.isArray(y)||y.length===0)return u.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){let q=y[1];if(typeof q!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:q}}else{if(y[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(y[0])}`,1,0);{let q=y.slice(1);if(q.length!==4||q.some(z=>typeof z!="number"||z<0||z>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:q}}}if(s.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(S=u.parse(S,2,wt),!S)return null;let C=[],O=null;m!=="interpolate-hcl"&&m!=="interpolate-lab"||u.expectedType==jl?u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType):O=yn;for(let q=0;q<I.length;q+=2){let z=I[q],G=I[q+1],Y=q+3,X=q+4;if(typeof z!="number")return u.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",Y);if(C.length&&C[C.length-1][0]>=z)return u.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",Y);let Q=u.parse(G,X,O);if(!Q)return null;O=O||Q.type,C.push([z,Q])}return Rc(O,wt)||Rc(O,Vi)||Rc(O,yn)||Rc(O,Mv)||Rc(O,ap)||Rc(O,jl)||Rc(O,Cv)||Rc(O,Ia(wt))?new Mo(O,m,y,S,C):u.error(`Type ${qn(O)} is not interpolatable.`)}evaluate(s){let u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(s);let y=this.input.evaluate(s);if(y<=u[0])return m[0].evaluate(s);let S=u.length;if(y>=u[S-1])return m[S-1].evaluate(s);let I=Bf(u,y),C=Mo.interpolationFactor(this.interpolation,y,u[I],u[I+1]),O=m[I].evaluate(s),q=m[I+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return qu(O,q,C);case"color":return $r.interpolate(O,q,C);case"padding":return co.interpolate(O,q,C);case"colorArray":return Gi.interpolate(O,q,C);case"numberArray":return ia.interpolate(O,q,C);case"variableAnchorOffsetCollection":return oa.interpolate(O,q,C);case"array":return jf(O,q,C);case"projectionDefinition":return Go.interpolate(O,q,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return $r.interpolate(O,q,C,"hcl");case"colorArray":return Gi.interpolate(O,q,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return $r.interpolate(O,q,C,"lab");case"colorArray":return Gi.interpolate(O,q,C,"lab")}}}eachChild(s){s(this.input);for(let u of this.outputs)s(u)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Sm(c,s,u,m){let y=m-u,S=c-u;return y===0?0:s===1?S/y:(Math.pow(s,S)-1)/(Math.pow(s,y)-1)}let Bl={color:$r.interpolate,number:qu,padding:co.interpolate,numberArray:ia.interpolate,colorArray:Gi.interpolate,variableAnchorOffsetCollection:oa.interpolate,array:jf};class Tm{constructor(s,u){this.type=s,this.args=u}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let m=null,y=u.expectedType;y&&y.kind!=="value"&&(m=y);let S=[];for(let C of s.slice(1)){let O=u.parse(C,1+S.length,m,void 0,{typeAnnotation:"omit"});if(!O)return null;m=m||O.type,S.push(O)}if(!m)throw new Error("No output type");let I=y&&S.some(C=>_m(y,C.type));return new Tm(I?Ir:m,S)}evaluate(s){let u,m=null,y=0;for(let S of this.args)if(y++,m=S.evaluate(s),m&&m instanceof Ja&&!m.available&&(u||(u=m.name),m=null,y===this.args.length&&(m=u)),m!==null)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function Im(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Am(c,s,u,m){return m.compare(s,u)===0}function $o(c,s,u){let m=c!=="=="&&c!=="!=";return class OOe{constructor(S,I,C){this.type=wr,this.lhs=S,this.rhs=I,this.collator=C,this.hasUntypedArgument=S.type.kind==="value"||I.type.kind==="value"}static parse(S,I){if(S.length!==3&&S.length!==4)return I.error("Expected two or three arguments.");let C=S[0],O=I.parse(S[1],1,Ir);if(!O)return null;if(!Im(C,O.type))return I.concat(1).error(`"${C}" comparisons are not supported for type '${qn(O.type)}'.`);let q=I.parse(S[2],2,Ir);if(!q)return null;if(!Im(C,q.type))return I.concat(2).error(`"${C}" comparisons are not supported for type '${qn(q.type)}'.`);if(O.type.kind!==q.type.kind&&O.type.kind!=="value"&&q.type.kind!=="value")return I.error(`Cannot compare types '${qn(O.type)}' and '${qn(q.type)}'.`);m&&(O.type.kind==="value"&&q.type.kind!=="value"?O=new es(q.type,[O]):O.type.kind!=="value"&&q.type.kind==="value"&&(q=new es(O.type,[q])));let z=null;if(S.length===4){if(O.type.kind!=="string"&&q.type.kind!=="string"&&O.type.kind!=="value"&&q.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(z=I.parse(S[3],3,qf),!z)return null}return new OOe(O,q,z)}evaluate(S){let I=this.lhs.evaluate(S),C=this.rhs.evaluate(S);if(m&&this.hasUntypedArgument){let O=cr(I),q=cr(C);if(O.kind!==q.kind||O.kind!=="string"&&O.kind!=="number")throw new Fn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${O.kind}, ${q.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){let O=cr(I),q=cr(C);if(O.kind!=="string"||q.kind!=="string")return s(S,I,C)}return this.collator?u(S,I,C,this.collator.evaluate(S)):s(S,I,C)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}let fA=$o("==",function(c,s,u){return s===u},Am),kv=$o("!=",function(c,s,u){return s!==u},function(c,s,u,m){return!Am(0,s,u,m)}),Nq=$o("<",function(c,s,u){return s<u},function(c,s,u,m){return m.compare(s,u)<0}),gb=$o(">",function(c,s,u){return s>u},function(c,s,u,m){return m.compare(s,u)>0}),kq=$o("<=",function(c,s,u){return s<=u},function(c,s,u,m){return m.compare(s,u)<=0}),qq=$o(">=",function(c,s,u){return s>=u},function(c,s,u,m){return m.compare(s,u)>=0});class qv{constructor(s,u,m){this.type=qf,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=u}static parse(s,u){if(s.length!==2)return u.error("Expected one argument.");let m=s[1];if(typeof m!="object"||Array.isArray(m))return u.error("Collator options argument must be an object.");let y=u.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,wr);if(!y)return null;let S=u.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,wr);if(!S)return null;let I=null;return m.locale&&(I=u.parse(m.locale,1,Rr),!I)?null:new qv(y,S,I)}evaluate(s){return new zf(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class vb{constructor(s,u,m,y,S){this.type=Rr,this.number=s,this.locale=u,this.currency=m,this.minFractionDigits=y,this.maxFractionDigits=S}static parse(s,u){if(s.length!==3)return u.error("Expected two arguments.");let m=u.parse(s[1],1,wt);if(!m)return null;let y=s[2];if(typeof y!="object"||Array.isArray(y))return u.error("NumberFormat options argument must be an object.");let S=null;if(y.locale&&(S=u.parse(y.locale,1,Rr),!S))return null;let I=null;if(y.currency&&(I=u.parse(y.currency,1,Rr),!I))return null;let C=null;if(y["min-fraction-digits"]&&(C=u.parse(y["min-fraction-digits"],1,wt),!C))return null;let O=null;return y["max-fraction-digits"]&&(O=u.parse(y["max-fraction-digits"],1,wt),!O)?null:new vb(m,S,I,C,O)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Vf{constructor(s){this.type=Cc,this.sections=s}static parse(s,u){if(s.length<2)return u.error("Expected at least one argument.");let m=s[1];if(!Array.isArray(m)&&typeof m=="object")return u.error("First argument must be an image or text section.");let y=[],S=!1;for(let I=1;I<=s.length-1;++I){let C=s[I];if(S&&typeof C=="object"&&!Array.isArray(C)){S=!1;let O=null;if(C["font-scale"]&&(O=u.parse(C["font-scale"],1,wt),!O))return null;let q=null;if(C["text-font"]&&(q=u.parse(C["text-font"],1,Ia(Rr)),!q))return null;let z=null;if(C["text-color"]&&(z=u.parse(C["text-color"],1,yn),!z))return null;let G=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!Pv.includes(C["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(G=u.parse(C["vertical-align"],1,Rr),!G)return null}let Y=y[y.length-1];Y.scale=O,Y.font=q,Y.textColor=z,Y.verticalAlign=G}else{let O=u.parse(s[I],1,Ir);if(!O)return null;let q=O.type.kind;if(q!=="string"&&q!=="value"&&q!=="null"&&q!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,y.push({content:O,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Vf(y)}evaluate(s){return new na(this.sections.map(u=>{let m=u.content.evaluate(s);return cr(m)===Ti?new Rv("",m,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(s):null):new Rv(Ar(m),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null,u.verticalAlign?u.verticalAlign.evaluate(s):null)}))}eachChild(s){for(let u of this.sections)s(u.content),u.scale&&s(u.scale),u.font&&s(u.font),u.textColor&&s(u.textColor),u.verticalAlign&&s(u.verticalAlign)}outputDefined(){return!1}}class yb{constructor(s){this.type=Ti,this.input=s}static parse(s,u){if(s.length!==2)return u.error("Expected two arguments.");let m=u.parse(s[1],1,Rr);return m?new yb(m):u.error("No image name provided.")}evaluate(s){let u=this.input.evaluate(s),m=Ja.fromString(u);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(u)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class Fv{constructor(s){this.type=wt,this.input=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);let m=u.parse(s[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${qn(m.type)} instead.`):new Fv(m):null}evaluate(s){let u=this.input.evaluate(s);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new Fn(`Expected value to be of type string or array, but found ${qn(cr(u))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}let ul=8192;function Fq(c,s){let u=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,y=Math.pow(2,s.z);return[Math.round(u*y*ul),Math.round(m*y*ul)]}function jv(c,s){let u=Math.pow(2,s.z);return[(y=(c[0]/ul+s.x)/u,360*y-180),(m=(c[1]/ul+s.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,y}function Mm(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Cm(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function jq(c,s,u){let m=c[0]-s[0],y=c[1]-s[1],S=c[0]-u[0],I=c[1]-u[1];return m*I-S*y==0&&m*S<=0&&y*I<=0}function zv(c,s,u,m){return(y=[m[0]-u[0],m[1]-u[1]])[0]*(S=[s[0]-c[0],s[1]-c[1]])[1]-y[1]*S[0]!=0&&!(!pA(c,s,u,m)||!pA(u,m,c,s));var y,S}function zq(c,s,u){for(let m of u)for(let y=0;y<m.length-1;++y)if(zv(c,s,m[y],m[y+1]))return!0;return!1}function Gf(c,s,u=!1){let m=!1;for(let C of s)for(let O=0;O<C.length-1;O++){if(jq(c,C[O],C[O+1]))return u;(S=C[O])[1]>(y=c)[1]!=(I=C[O+1])[1]>y[1]&&y[0]<(I[0]-S[0])*(y[1]-S[1])/(I[1]-S[1])+S[0]&&(m=!m)}var y,S,I;return m}function hA(c,s){for(let u of s)if(Gf(c,u))return!0;return!1}function _b(c,s){for(let u of c)if(!Gf(u,s))return!1;for(let u=0;u<c.length-1;++u)if(zq(c[u],c[u+1],s))return!1;return!0}function Uq(c,s){for(let u of s)if(_b(c,u))return!0;return!1}function pA(c,s,u,m){let y=m[0]-u[0],S=m[1]-u[1],I=(c[0]-u[0])*S-y*(c[1]-u[1]),C=(s[0]-u[0])*S-y*(s[1]-u[1]);return I>0&&C<0||I<0&&C>0}function xb(c,s,u){let m=[];for(let y=0;y<c.length;y++){let S=[];for(let I=0;I<c[y].length;I++){let C=Fq(c[y][I],u);Mm(s,C),S.push(C)}m.push(S)}return m}function dA(c,s,u){let m=[];for(let y=0;y<c.length;y++){let S=xb(c[y],s,u);m.push(S)}return m}function Uv(c,s,u,m){if(c[0]<u[0]||c[0]>u[2]){let y=.5*m,S=c[0]-u[0]>y?-m:u[0]-c[0]>y?m:0;S===0&&(S=c[0]-u[2]>y?-m:u[2]-c[0]>y?m:0),c[0]+=S}Mm(s,c)}function mA(c,s,u,m){let y=Math.pow(2,m.z)*ul,S=[m.x*ul,m.y*ul],I=[];for(let C of c)for(let O of C){let q=[O.x+S[0],O.y+S[1]];Uv(q,s,u,y),I.push(q)}return I}function gA(c,s,u,m){let y=Math.pow(2,m.z)*ul,S=[m.x*ul,m.y*ul],I=[];for(let O of c){let q=[];for(let z of O){let G=[z.x+S[0],z.y+S[1]];Mm(s,G),q.push(G)}I.push(q)}if(s[2]-s[0]<=y/2){(C=s)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(let O of I)for(let q of O)Uv(q,s,u,y)}var C;return I}class $f{constructor(s,u){this.type=wr,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Uf(s[1])){let m=s[1];if(m.type==="FeatureCollection"){let y=[];for(let S of m.features){let{type:I,coordinates:C}=S.geometry;I==="Polygon"&&y.push(C),I==="MultiPolygon"&&y.push(...C)}if(y.length)return new $f(m,{type:"MultiPolygon",coordinates:y})}else if(m.type==="Feature"){let y=m.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new $f(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new $f(m,m)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,m){let y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(m.type==="Polygon"){let C=xb(m.coordinates,S,I),O=mA(u.geometry(),y,S,I);if(!Cm(y,S))return!1;for(let q of O)if(!Gf(q,C))return!1}if(m.type==="MultiPolygon"){let C=dA(m.coordinates,S,I),O=mA(u.geometry(),y,S,I);if(!Cm(y,S))return!1;for(let q of O)if(!hA(q,C))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,m){let y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(m.type==="Polygon"){let C=xb(m.coordinates,S,I),O=gA(u.geometry(),y,S,I);if(!Cm(y,S))return!1;for(let q of O)if(!_b(q,C))return!1}if(m.type==="MultiPolygon"){let C=dA(m.coordinates,S,I),O=gA(u.geometry(),y,S,I);if(!Cm(y,S))return!1;for(let q of O)if(!Uq(q,C))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let bb=class{constructor(c=[],s=(u,m)=>u<m?-1:u>m?1:0){if(this.data=c,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;let c=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),c}peek(){return this.data[0]}_up(c){let{data:s,compare:u}=this,m=s[c];for(;c>0;){let y=c-1>>1,S=s[y];if(u(m,S)>=0)break;s[c]=S,c=y}s[c]=m}_down(c){let{data:s,compare:u}=this,m=this.length>>1,y=s[c];for(;c<m;){let S=1+(c<<1),I=S+1;if(I<this.length&&u(s[I],s[S])<0&&(S=I),u(s[S],y)>=0)break;s[c]=s[S],c=S}s[c]=y}};function wb(c,s,u=0,m=c.length-1,y=Bq){for(;m>u;){if(m-u>600){let O=m-u+1,q=s-u+1,z=Math.log(O),G=.5*Math.exp(2*z/3),Y=.5*Math.sqrt(z*G*(O-G)/O)*(q-O/2<0?-1:1);wb(c,s,Math.max(u,Math.floor(s-q*G/O+Y)),Math.min(m,Math.floor(s+(O-q)*G/O+Y)),y)}let S=c[s],I=u,C=m;for(Pm(c,u,s),y(c[m],S)>0&&Pm(c,u,m);I<C;){for(Pm(c,I,C),I++,C--;y(c[I],S)<0;)I++;for(;y(c[C],S)>0;)C--}y(c[u],S)===0?Pm(c,u,C):(C++,Pm(c,C,m)),C<=s&&(u=C+1),s<=C&&(m=C-1)}}function Pm(c,s,u){let m=c[s];c[s]=c[u],c[u]=m}function Bq(c,s){return c<s?-1:c>s?1:0}function Rm(c,s){if(c.length<=1)return[c];let u=[],m,y;for(let S of c){let I=Vq(S);I!==0&&(S.area=Math.abs(I),y===void 0&&(y=I<0),y===I<0?(m&&u.push(m),m=[S]):m.push(S))}if(m&&u.push(m),s>1)for(let S=0;S<u.length;S++)u[S].length<=s||(wb(u[S],s,1,u[S].length-1,vA),u[S]=u[S].slice(0,s));return u}function vA(c,s){return s.area-c.area}function Vq(c){let s=0;for(let u,m,y=0,S=c.length,I=S-1;y<S;I=y++)u=c[y],m=c[I],s+=(m.x-u.x)*(u.y+m.y);return s}let yA=1/298.257223563,_A=yA*(2-yA),Eb=Math.PI/180;class Sb{constructor(s){let u=6378.137*Eb*1e3,m=Math.cos(s*Eb),y=1/(1-_A*(1-m*m)),S=Math.sqrt(y);this.kx=u*S*m,this.ky=u*S*y*(1-_A)}distance(s,u){let m=this.wrap(s[0]-u[0])*this.kx,y=(s[1]-u[1])*this.ky;return Math.sqrt(m*m+y*y)}pointOnLine(s,u){let m,y,S,I,C=1/0;for(let O=0;O<s.length-1;O++){let q=s[O][0],z=s[O][1],G=this.wrap(s[O+1][0]-q)*this.kx,Y=(s[O+1][1]-z)*this.ky,X=0;G===0&&Y===0||(X=(this.wrap(u[0]-q)*this.kx*G+(u[1]-z)*this.ky*Y)/(G*G+Y*Y),X>1?(q=s[O+1][0],z=s[O+1][1]):X>0&&(q+=G/this.kx*X,z+=Y/this.ky*X)),G=this.wrap(u[0]-q)*this.kx,Y=(u[1]-z)*this.ky;let Q=G*G+Y*Y;Q<C&&(C=Q,m=q,y=z,S=O,I=X)}return{point:[m,y],index:S,t:Math.max(0,Math.min(1,I))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function xA(c,s){return s[0]-c[0]}function Bv(c){return c[1]-c[0]+1}function ju(c,s){return c[1]>=c[0]&&c[1]<s}function fn(c,s){if(c[0]>c[1])return[null,null];let u=Bv(c);if(s){if(u===2)return[c,null];let y=Math.floor(u/2);return[[c[0],c[0]+y],[c[0]+y,c[1]]]}if(u===1)return[c,null];let m=Math.floor(u/2)-1;return[[c[0],c[0]+m],[c[0]+m+1,c[1]]]}function Tb(c,s){if(!ju(s,c.length))return[1/0,1/0,-1/0,-1/0];let u=[1/0,1/0,-1/0,-1/0];for(let m=s[0];m<=s[1];++m)Mm(u,c[m]);return u}function Ib(c){let s=[1/0,1/0,-1/0,-1/0];for(let u of c)for(let m of u)Mm(s,m);return s}function bA(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function Ab(c,s,u){if(!bA(c)||!bA(s))return NaN;let m=0,y=0;return c[2]<s[0]&&(m=s[0]-c[2]),c[0]>s[2]&&(m=c[0]-s[2]),c[1]>s[3]&&(y=c[1]-s[3]),c[3]<s[1]&&(y=s[1]-c[3]),u.distance([0,0],[m,y])}function Hf(c,s,u){let m=u.pointOnLine(s,c);return u.distance(c,m.point)}function Mb(c,s,u,m,y){let S=Math.min(Hf(c,[u,m],y),Hf(s,[u,m],y)),I=Math.min(Hf(u,[c,s],y),Hf(m,[c,s],y));return Math.min(S,I)}function Gq(c,s,u,m,y){if(!ju(s,c.length)||!ju(m,u.length))return 1/0;let S=1/0;for(let I=s[0];I<s[1];++I){let C=c[I],O=c[I+1];for(let q=m[0];q<m[1];++q){let z=u[q],G=u[q+1];if(zv(C,O,z,G))return 0;S=Math.min(S,Mb(C,O,z,G,y))}}return S}function $q(c,s,u,m,y){if(!ju(s,c.length)||!ju(m,u.length))return NaN;let S=1/0;for(let I=s[0];I<=s[1];++I)for(let C=m[0];C<=m[1];++C)if(S=Math.min(S,y.distance(c[I],u[C])),S===0)return S;return S}function Hq(c,s,u){if(Gf(c,s,!0))return 0;let m=1/0;for(let y of s){let S=y[0],I=y[y.length-1];if(S!==I&&(m=Math.min(m,Hf(c,[I,S],u)),m===0))return m;let C=u.pointOnLine(y,c);if(m=Math.min(m,u.distance(c,C.point)),m===0)return m}return m}function Wq(c,s,u,m){if(!ju(s,c.length))return NaN;for(let S=s[0];S<=s[1];++S)if(Gf(c[S],u,!0))return 0;let y=1/0;for(let S=s[0];S<s[1];++S){let I=c[S],C=c[S+1];for(let O of u)for(let q=0,z=O.length,G=z-1;q<z;G=q++){let Y=O[G],X=O[q];if(zv(I,C,Y,X))return 0;y=Math.min(y,Mb(I,C,Y,X,m))}}return y}function wA(c,s){for(let u of c)for(let m of u)if(Gf(m,s,!0))return!0;return!1}function Zq(c,s,u,m=1/0){let y=Ib(c),S=Ib(s);if(m!==1/0&&Ab(y,S,u)>=m)return m;if(Cm(y,S)){if(wA(c,s))return 0}else if(wA(s,c))return 0;let I=1/0;for(let C of c)for(let O=0,q=C.length,z=q-1;O<q;z=O++){let G=C[z],Y=C[O];for(let X of s)for(let Q=0,re=X.length,le=re-1;Q<re;le=Q++){let ge=X[le],ke=X[Q];if(zv(G,Y,ge,ke))return 0;I=Math.min(I,Mb(G,Y,ge,ke,u))}}return I}function EA(c,s,u,m,y,S){if(!S)return;let I=Ab(Tb(m,S),y,u);I<s&&c.push([I,S,[0,0]])}function Vv(c,s,u,m,y,S,I){if(!S||!I)return;let C=Ab(Tb(m,S),Tb(y,I),u);C<s&&c.push([C,S,I])}function Gv(c,s,u,m,y=1/0){let S=Math.min(m.distance(c[0],u[0][0]),y);if(S===0)return S;let I=new bb([[0,[0,c.length-1],[0,0]]],xA),C=Ib(u);for(;I.length>0;){let O=I.pop();if(O[0]>=S)continue;let q=O[1],z=s?50:100;if(Bv(q)<=z){if(!ju(q,c.length))return NaN;if(s){let G=Wq(c,q,u,m);if(isNaN(G)||G===0)return G;S=Math.min(S,G)}else for(let G=q[0];G<=q[1];++G){let Y=Hq(c[G],u,m);if(S=Math.min(S,Y),S===0)return 0}}else{let G=fn(q,s);EA(I,S,m,c,C,G[0]),EA(I,S,m,c,C,G[1])}}return S}function $v(c,s,u,m,y,S=1/0){let I=Math.min(S,y.distance(c[0],u[0]));if(I===0)return I;let C=new bb([[0,[0,c.length-1],[0,u.length-1]]],xA);for(;C.length>0;){let O=C.pop();if(O[0]>=I)continue;let q=O[1],z=O[2],G=s?50:100,Y=m?50:100;if(Bv(q)<=G&&Bv(z)<=Y){if(!ju(q,c.length)&&ju(z,u.length))return NaN;let X;if(s&&m)X=Gq(c,q,u,z,y),I=Math.min(I,X);else if(s&&!m){let Q=c.slice(q[0],q[1]+1);for(let re=z[0];re<=z[1];++re)if(X=Hf(u[re],Q,y),I=Math.min(I,X),I===0)return I}else if(!s&&m){let Q=u.slice(z[0],z[1]+1);for(let re=q[0];re<=q[1];++re)if(X=Hf(c[re],Q,y),I=Math.min(I,X),I===0)return I}else X=$q(c,q,u,z,y),I=Math.min(I,X)}else{let X=fn(q,s),Q=fn(z,m);Vv(C,I,y,c,u,X[0],Q[0]),Vv(C,I,y,c,u,X[0],Q[1]),Vv(C,I,y,c,u,X[1],Q[0]),Vv(C,I,y,c,u,X[1],Q[1])}}return I}function Cb(c){return c.type==="MultiPolygon"?c.coordinates.map(s=>({type:"Polygon",coordinates:s})):c.type==="MultiLineString"?c.coordinates.map(s=>({type:"LineString",coordinates:s})):c.type==="MultiPoint"?c.coordinates.map(s=>({type:"Point",coordinates:s})):[c]}class Wf{constructor(s,u){this.type=wt,this.geojson=s,this.geometries=u}static parse(s,u){if(s.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Uf(s[1])){let m=s[1];if(m.type==="FeatureCollection")return new Wf(m,m.features.map(y=>Cb(y.geometry)).flat());if(m.type==="Feature")return new Wf(m,Cb(m.geometry));if("type"in m&&"coordinates"in m)return new Wf(m,Cb(m))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(u,m){let y=u.geometry(),S=y.flat().map(O=>jv([O.x,O.y],u.canonical));if(y.length===0)return NaN;let I=new Sb(S[0][1]),C=1/0;for(let O of m){switch(O.type){case"Point":C=Math.min(C,$v(S,!1,[O.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,$v(S,!1,O.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,Gv(S,!1,O.coordinates,I,C))}if(C===0)return C}return C}(s,this.geometries);if(s.geometryType()==="LineString")return function(u,m){let y=u.geometry(),S=y.flat().map(O=>jv([O.x,O.y],u.canonical));if(y.length===0)return NaN;let I=new Sb(S[0][1]),C=1/0;for(let O of m){switch(O.type){case"Point":C=Math.min(C,$v(S,!0,[O.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,$v(S,!0,O.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,Gv(S,!0,O.coordinates,I,C))}if(C===0)return C}return C}(s,this.geometries);if(s.geometryType()==="Polygon")return function(u,m){let y=u.geometry();if(y.length===0||y[0].length===0)return NaN;let S=Rm(y,0).map(O=>O.map(q=>q.map(z=>jv([z.x,z.y],u.canonical)))),I=new Sb(S[0][0][0][1]),C=1/0;for(let O of m)for(let q of S){switch(O.type){case"Point":C=Math.min(C,Gv([O.coordinates],!1,q,I,C));break;case"LineString":C=Math.min(C,Gv(O.coordinates,!0,q,I,C));break;case"Polygon":C=Math.min(C,Zq(q,O.coordinates,I,C))}if(C===0)return C}return C}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Om{constructor(s){this.type=Ir,this.key=s}static parse(s,u){if(s.length!==2)return u.error(`Expected 1 argument, but found ${s.length-1} instead.`);let m=s[1];return m==null?u.error("Global state property must be defined."):typeof m!="string"?u.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new Om(m)}evaluate(s){var u;let m=(u=s.globals)===null||u===void 0?void 0:u.globalState;return m&&Object.keys(m).length!==0?cp(m,this.key):null}eachChild(){}outputDefined(){return!1}}let dp={"==":fA,"!=":kv,">":gb,"<":Nq,">=":qq,"<=":kq,array:es,at:Dv,boolean:es,case:hp,coalesce:Tm,collator:qv,format:Vf,image:yb,in:Nv,"index-of":ll,interpolate:Mo,"interpolate-hcl":Mo,"interpolate-lab":Mo,length:Fv,let:bm,literal:Fu,match:fo,number:es,"number-format":vb,object:es,slice:wm,step:Ii,string:es,"to-boolean":Ul,"to-color":Ul,"to-number":Ul,"to-string":Ul,var:Lv,within:$f,distance:Wf,"global-state":Om};class Ts{constructor(s,u,m,y){this.name=s,this.type=u,this._evaluate=m,this.args=y}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,u){let m=s[0],y=Ts.definitions[m];if(!y)return u.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);let S=Array.isArray(y)?y[0]:y.type,I=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,C=I.filter(([q])=>!Array.isArray(q)||q.length===s.length-1),O=null;for(let[q,z]of C){O=new fp(u.registry,Hv,u.path,null,u.scope);let G=[],Y=!1;for(let X=1;X<s.length;X++){let Q=s[X],re=Array.isArray(q)?q[X-1]:q.type,le=O.parse(Q,1+G.length,re);if(!le){Y=!0;break}G.push(le)}if(!Y)if(Array.isArray(q)&&q.length!==G.length)O.error(`Expected ${q.length} arguments, but found ${G.length} instead.`);else{for(let X=0;X<G.length;X++){let Q=Array.isArray(q)?q[X]:q.type,re=G[X];O.concat(X+1).checkSubtype(Q,re.type)}if(O.errors.length===0)return new Ts(m,S,z,G)}}if(C.length===1)u.errors.push(...O.errors);else{let q=(C.length?C:I).map(([G])=>{return Y=G,Array.isArray(Y)?`(${Y.map(qn).join(", ")})`:`(${qn(Y.type)}...)`;var Y}).join(" | "),z=[];for(let G=1;G<s.length;G++){let Y=u.parse(s[G],1+z.length);if(!Y)return null;z.push(qn(Y.type))}u.error(`Expected arguments of type ${q}, but found (${z.join(", ")}) instead.`)}return null}static register(s,u){Ts.definitions=u;for(let m in u)s[m]=Ts}}function SA(c,[s,u,m,y]){s=s.evaluate(c),u=u.evaluate(c),m=m.evaluate(c);let S=y?y.evaluate(c):1,I=Qn(s,u,m,S);if(I)throw new Fn(I);return new $r(s/255,u/255,m/255,S,!1)}function TA(c,s){return c in s}function Pb(c,s){let u=s[c];return u===void 0?null:u}function Zf(c){return{type:c}}function Hv(c){if(c instanceof Lv)return Hv(c.boundExpression);if(c instanceof Ts&&c.name==="error"||c instanceof qv||c instanceof $f||c instanceof Wf||c instanceof Om)return!1;let s=c instanceof Ul||c instanceof es,u=!0;return c.eachChild(m=>{u=s?u&&Hv(m):u&&m instanceof Fu}),!!u&&Wv(c)&&Zv(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Wv(c){if(c instanceof Ts&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof $f||c instanceof Wf)return!1;let s=!0;return c.eachChild(u=>{s&&!Wv(u)&&(s=!1)}),s}function Lm(c){if(c instanceof Ts&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(u=>{s&&!Lm(u)&&(s=!1)}),s}function Zv(c,s){if(c instanceof Ts&&s.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(m=>{u&&!Zv(m,s)&&(u=!1)}),u}function IA(c){return{result:"success",value:c}}function mp(c){return{result:"error",value:c}}function Lc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function AA(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Rb(c){return!!c.expression&&c.expression.interpolated}function Zr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Dm(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&cr(c)===Ss}function Yq(c){return c}function MA(c,s){let u=c.stops&&typeof c.stops[0][0]=="object",m=u||!(u||c.property!==void 0),y=c.type||(Rb(s)?"exponential":"interval"),S=function(z){switch(z.type){case"color":return $r.parse;case"padding":return co.parse;case"numberArray":return ia.parse;case"colorArray":return Gi.parse;default:return null}}(s);if(S&&((c=si({},c)).stops&&(c.stops=c.stops.map(z=>[z[0],S(z[1])])),c.default=S(c.default?c.default:s.default)),c.colorSpace&&(I=c.colorSpace)!=="rgb"&&I!=="hcl"&&I!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var I;let C=function(z){switch(z){case"exponential":return PA;case"interval":return Kq;case"categorical":return CA;case"identity":return Xq;default:throw new Error(`Unknown function type "${z}"`)}}(y),O,q;if(y==="categorical"){O=Object.create(null);for(let z of c.stops)O[z[0]]=z[1];q=typeof c.stops[0][0]}if(u){let z={},G=[];for(let Q=0;Q<c.stops.length;Q++){let re=c.stops[Q],le=re[0].zoom;z[le]===void 0&&(z[le]={zoom:le,type:c.type,property:c.property,default:c.default,stops:[]},G.push(le)),z[le].stops.push([re[0].value,re[1]])}let Y=[];for(let Q of G)Y.push([z[Q].zoom,MA(z[Q],s)]);let X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:Mo.interpolationFactor.bind(void 0,X),zoomStops:Y.map(Q=>Q[0]),evaluate:({zoom:Q},re)=>PA({stops:Y,base:c.base},s,Q).evaluate(Q,re)}}if(m){let z=y==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Mo.interpolationFactor.bind(void 0,z),zoomStops:c.stops.map(G=>G[0]),evaluate:({zoom:G})=>C(c,s,G,O,q)}}return{kind:"source",evaluate(z,G){let Y=G&&G.properties?G.properties[c.property]:void 0;return Y===void 0?Dc(c.default,s.default):C(c,s,Y,O,q)}}}function Dc(c,s,u){return c!==void 0?c:s!==void 0?s:u!==void 0?u:void 0}function CA(c,s,u,m,y){return Dc(typeof u===y?m[u]:void 0,c.default,s.default)}function Kq(c,s,u){if(Zr(u)!=="number")return Dc(c.default,s.default);let m=c.stops.length;if(m===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[m-1][0])return c.stops[m-1][1];let y=Bf(c.stops.map(S=>S[0]),u);return c.stops[y][1]}function PA(c,s,u){let m=c.base!==void 0?c.base:1;if(Zr(u)!=="number")return Dc(c.default,s.default);let y=c.stops.length;if(y===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[y-1][0])return c.stops[y-1][1];let S=Bf(c.stops.map(z=>z[0]),u),I=function(z,G,Y,X){let Q=X-Y,re=z-Y;return Q===0?0:G===1?re/Q:(Math.pow(G,re)-1)/(Math.pow(G,Q)-1)}(u,m,c.stops[S][0],c.stops[S+1][0]),C=c.stops[S][1],O=c.stops[S+1][1],q=Bl[s.type]||Yq;return typeof C.evaluate=="function"?{evaluate(...z){let G=C.evaluate.apply(void 0,z),Y=O.evaluate.apply(void 0,z);if(G!==void 0&&Y!==void 0)return q(G,Y,I,c.colorSpace)}}:q(C,O,I,c.colorSpace)}function Xq(c,s,u){switch(s.type){case"color":u=$r.parse(u);break;case"formatted":u=na.fromString(u.toString());break;case"resolvedImage":u=Ja.fromString(u.toString());break;case"padding":u=co.parse(u);break;case"colorArray":u=Gi.parse(u);break;case"numberArray":u=ia.parse(u);break;default:Zr(u)===s.type||s.type==="enum"&&s.values[u]||(u=void 0)}return Dc(u,c.default,s.default)}Ts.register(dp,{error:[{kind:"error"},[Rr],(c,[s])=>{throw new Fn(s.evaluate(c))}],typeof:[Rr,[Ir],(c,[s])=>qn(cr(s.evaluate(c)))],"to-rgba":[Ia(wt,4),[yn],(c,[s])=>{let[u,m,y,S]=s.evaluate(c).rgb;return[255*u,255*m,255*y,S]}],rgb:[yn,[wt,wt,wt],SA],rgba:[yn,[wt,wt,wt,wt],SA],has:{type:wr,overloads:[[[Rr],(c,[s])=>TA(s.evaluate(c),c.properties())],[[Rr,Ss],(c,[s,u])=>TA(s.evaluate(c),u.evaluate(c))]]},get:{type:Ir,overloads:[[[Rr],(c,[s])=>Pb(s.evaluate(c),c.properties())],[[Rr,Ss],(c,[s,u])=>Pb(s.evaluate(c),u.evaluate(c))]]},"feature-state":[Ir,[Rr],(c,[s])=>Pb(s.evaluate(c),c.featureState||{})],properties:[Ss,[],c=>c.properties()],"geometry-type":[Rr,[],c=>c.geometryType()],id:[Ir,[],c=>c.id()],zoom:[wt,[],c=>c.globals.zoom],"heatmap-density":[wt,[],c=>c.globals.heatmapDensity||0],elevation:[wt,[],c=>c.globals.elevation||0],"line-progress":[wt,[],c=>c.globals.lineProgress||0],accumulated:[Ir,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[wt,Zf(wt),(c,s)=>{let u=0;for(let m of s)u+=m.evaluate(c);return u}],"*":[wt,Zf(wt),(c,s)=>{let u=1;for(let m of s)u*=m.evaluate(c);return u}],"-":{type:wt,overloads:[[[wt,wt],(c,[s,u])=>s.evaluate(c)-u.evaluate(c)],[[wt],(c,[s])=>-s.evaluate(c)]]},"/":[wt,[wt,wt],(c,[s,u])=>s.evaluate(c)/u.evaluate(c)],"%":[wt,[wt,wt],(c,[s,u])=>s.evaluate(c)%u.evaluate(c)],ln2:[wt,[],()=>Math.LN2],pi:[wt,[],()=>Math.PI],e:[wt,[],()=>Math.E],"^":[wt,[wt,wt],(c,[s,u])=>Math.pow(s.evaluate(c),u.evaluate(c))],sqrt:[wt,[wt],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[wt,[wt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[wt,[wt],(c,[s])=>Math.log(s.evaluate(c))],log2:[wt,[wt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[wt,[wt],(c,[s])=>Math.sin(s.evaluate(c))],cos:[wt,[wt],(c,[s])=>Math.cos(s.evaluate(c))],tan:[wt,[wt],(c,[s])=>Math.tan(s.evaluate(c))],asin:[wt,[wt],(c,[s])=>Math.asin(s.evaluate(c))],acos:[wt,[wt],(c,[s])=>Math.acos(s.evaluate(c))],atan:[wt,[wt],(c,[s])=>Math.atan(s.evaluate(c))],min:[wt,Zf(wt),(c,s)=>Math.min(...s.map(u=>u.evaluate(c)))],max:[wt,Zf(wt),(c,s)=>Math.max(...s.map(u=>u.evaluate(c)))],abs:[wt,[wt],(c,[s])=>Math.abs(s.evaluate(c))],round:[wt,[wt],(c,[s])=>{let u=s.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[wt,[wt],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[wt,[wt],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[wr,[Rr,Ir],(c,[s,u])=>c.properties()[s.value]===u.value],"filter-id-==":[wr,[Ir],(c,[s])=>c.id()===s.value],"filter-type-==":[wr,[Rr],(c,[s])=>c.geometryType()===s.value],"filter-<":[wr,[Rr,Ir],(c,[s,u])=>{let m=c.properties()[s.value],y=u.value;return typeof m==typeof y&&m<y}],"filter-id-<":[wr,[Ir],(c,[s])=>{let u=c.id(),m=s.value;return typeof u==typeof m&&u<m}],"filter->":[wr,[Rr,Ir],(c,[s,u])=>{let m=c.properties()[s.value],y=u.value;return typeof m==typeof y&&m>y}],"filter-id->":[wr,[Ir],(c,[s])=>{let u=c.id(),m=s.value;return typeof u==typeof m&&u>m}],"filter-<=":[wr,[Rr,Ir],(c,[s,u])=>{let m=c.properties()[s.value],y=u.value;return typeof m==typeof y&&m<=y}],"filter-id-<=":[wr,[Ir],(c,[s])=>{let u=c.id(),m=s.value;return typeof u==typeof m&&u<=m}],"filter->=":[wr,[Rr,Ir],(c,[s,u])=>{let m=c.properties()[s.value],y=u.value;return typeof m==typeof y&&m>=y}],"filter-id->=":[wr,[Ir],(c,[s])=>{let u=c.id(),m=s.value;return typeof u==typeof m&&u>=m}],"filter-has":[wr,[Ir],(c,[s])=>s.value in c.properties()],"filter-has-id":[wr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[wr,[Ia(Rr)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[wr,[Ia(Ir)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[wr,[Rr,Ia(Ir)],(c,[s,u])=>u.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[wr,[Rr,Ia(Ir)],(c,[s,u])=>function(m,y,S,I){for(;S<=I;){let C=S+I>>1;if(y[C]===m)return!0;y[C]>m?I=C-1:S=C+1}return!1}(c.properties()[s.value],u.value,0,u.value.length-1)],all:{type:wr,overloads:[[[wr,wr],(c,[s,u])=>s.evaluate(c)&&u.evaluate(c)],[Zf(wr),(c,s)=>{for(let u of s)if(!u.evaluate(c))return!1;return!0}]]},any:{type:wr,overloads:[[[wr,wr],(c,[s,u])=>s.evaluate(c)||u.evaluate(c)],[Zf(wr),(c,s)=>{for(let u of s)if(u.evaluate(c))return!0;return!1}]]},"!":[wr,[wr],(c,[s])=>!s.evaluate(c)],"is-supported-script":[wr,[Rr],(c,[s])=>{let u=c.globals&&c.globals.isSupportedScript;return!u||u(s.evaluate(c))}],upcase:[Rr,[Rr],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[Rr,[Rr],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[Rr,Zf(Ir),(c,s)=>s.map(u=>Ar(u.evaluate(c))).join("")],"resolved-locale":[Rr,[qf],(c,[s])=>s.evaluate(c).resolvedLocale()]});class Ob{constructor(s,u){this.expression=s,this._warningHistory={},this._evaluator=new db,this._defaultValue=u?function(m){if(m.type==="color"&&Dm(m.default))return new $r(0,0,0,0);switch(m.type){case"color":return $r.parse(m.default)||null;case"padding":return co.parse(m.default)||null;case"numberArray":return ia.parse(m.default)||null;case"colorArray":return Gi.parse(m.default)||null;case"variableAnchorOffsetCollection":return oa.parse(m.default)||null;case"projectionDefinition":return Go.parse(m.default)||null;default:return m.default===void 0?null:m.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(s,u,m,y,S,I){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=m,this._evaluator.canonical=y,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(s,u,m,y,S,I){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=m||null,this._evaluator.canonical=y,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I||null;try{let C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Fn(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console!="undefined"&&console.warn(C.message)),this._defaultValue}}}function Yv(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in dp}function Nm(c,s){let u=new fp(dp,Hv,[],s?function(y){let S={color:yn,string:Rr,number:wt,enum:Rr,boolean:wr,formatted:Cc,padding:Mv,numberArray:ap,colorArray:jl,projectionDefinition:Vi,resolvedImage:Ti,variableAnchorOffsetCollection:Cv};return y.type==="array"?Ia(S[y.value]||Ir,y.length):S[y.type]}(s):void 0),m=u.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?IA(new Ob(m,s)):mp(u.errors)}class km{constructor(s,u){this.kind=s,this._styleExpression=u,this.isStateDependent=s!=="constant"&&!Lm(u.expression),this.globalStateRefs=jm(u.expression)}evaluateWithoutErrorHandling(s,u,m,y,S,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,m,y,S,I)}evaluate(s,u,m,y,S,I){return this._styleExpression.evaluate(s,u,m,y,S,I)}}class Lb{constructor(s,u,m,y){this.kind=s,this.zoomStops=m,this._styleExpression=u,this.isStateDependent=s!=="camera"&&!Lm(u.expression),this.globalStateRefs=jm(u.expression),this.interpolationType=y}evaluateWithoutErrorHandling(s,u,m,y,S,I){return this._styleExpression.evaluateWithoutErrorHandling(s,u,m,y,S,I)}evaluate(s,u,m,y,S,I){return this._styleExpression.evaluate(s,u,m,y,S,I)}interpolationFactor(s,u,m){return this.interpolationType?Mo.interpolationFactor(this.interpolationType,s,u,m):0}}function RA(c,s){let u=Nm(c,s);if(u.result==="error")return u;let m=u.value.expression,y=Wv(m);if(!y&&!Lc(s))return mp([new Sn("","data expressions not supported")]);let S=Zv(m,["zoom"]);if(!S&&!AA(s))return mp([new Sn("","zoom expressions not supported")]);let I=Fm(m);return I||S?I instanceof Sn?mp([I]):I instanceof Mo&&!Rb(s)?mp([new Sn("","\"interpolate\" expressions cannot be used with this property")]):IA(I?new Lb(y?"camera":"composite",u.value,I.labels,I instanceof Mo?I.interpolation:void 0):new km(y?"constant":"source",u.value)):mp([new Sn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class qm{constructor(s,u){this._parameters=s,this._specification=u,si(this,MA(this._parameters,this._specification))}static deserialize(s){return new qm(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Fm(c){let s=null;if(c instanceof bm)s=Fm(c.result);else if(c instanceof Tm){for(let u of c.args)if(s=Fm(u),s)break}else(c instanceof Ii||c instanceof Mo)&&c.input instanceof Ts&&c.input.name==="zoom"&&(s=c);return s instanceof Sn||c.eachChild(u=>{let m=Fm(u);m instanceof Sn?s=m:!s&&m?s=new Sn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):s&&m&&s!==m&&(s=new Sn("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),s}function jm(c,s=new Set){return c instanceof Om&&s.add(c.key),c.eachChild(u=>{jm(u,s)}),s}function Kv(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(let s of c.slice(1))if(!Kv(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}let Db={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Yf(c){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Kv(c)||(c=Kf(c));let s=Nm(c,Db);if(s.result==="error")throw new Error(s.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,m,y)=>s.value.evaluate(u,m,{},y),needGeometry:Xv(c),getGlobalStateRefs:()=>jm(s.value.expression)}}function Nb(c,s){return c<s?-1:c>s?1:0}function Xv(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let s=1;s<c.length;s++)if(Xv(c[s]))return!0;return!1}function Kf(c){if(!c)return!0;let s=c[0];return c.length<=1?s!=="any":s==="=="?kb(c[1],c[2],"=="):s==="!="?Qv(kb(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?kb(c[1],c[2],s):s==="any"?(u=c.slice(1),["any"].concat(u.map(Kf))):s==="all"?["all"].concat(c.slice(1).map(Kf)):s==="none"?["all"].concat(c.slice(1).map(Kf).map(Qv)):s==="in"?OA(c[1],c.slice(2)):s==="!in"?Qv(OA(c[1],c.slice(2))):s==="has"?LA(c[1]):s!=="!has"||Qv(LA(c[1]));var u}function kb(c,s,u){switch(c){case"$type":return[`filter-type-${u}`,s];case"$id":return[`filter-id-${u}`,s];default:return[`filter-${u}`,c,s]}}function OA(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(u=>typeof u!=typeof s[0])?["filter-in-large",c,["literal",s.sort(Nb)]]:["filter-in-small",c,["literal",s]]}}function LA(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Qv(c){return["!",c]}function qb(c){let s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let y="[";for(let S of c)y+=`${qb(S)},`;return`${y}]`}let u=Object.keys(c).sort(),m="{";for(let y=0;y<u.length;y++)m+=`${JSON.stringify(u[y])}:${qb(c[u[y]])},`;return`${m}}`}function Qq(c){let s="";for(let u of ut)s+=`/${qb(c[u])}`;return s}function Fb(c){let s=c.value;return s?[new gt(c.key,s,"constants have been deprecated as of v8")]:[]}function vi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Vl(c){if(Array.isArray(c))return c.map(Vl);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){let s={};for(let u in c)s[u]=Vl(c[u]);return s}return vi(c)}function Is(c){let s=c.key,u=c.value,m=c.valueSpec||{},y=c.objectElementValidators||{},S=c.style,I=c.styleSpec,C=c.validateSpec,O=[],q=Zr(u);if(q!=="object")return[new gt(s,u,`object expected, ${q} found`)];for(let z in u){let G=z.split(".")[0],Y=cp(m,G)||m["*"],X;if(cp(y,G))X=y[G];else if(cp(m,G))X=C;else if(y["*"])X=y["*"];else{if(!m["*"]){O.push(new gt(s,u[z],`unknown property "${z}"`));continue}X=C}O=O.concat(X({key:(s&&`${s}.`)+z,value:u[z],valueSpec:Y,style:S,styleSpec:I,object:u,objectKey:z,validateSpec:C},u))}for(let z in m)y[z]||m[z].required&&m[z].default===void 0&&u[z]===void 0&&O.push(new gt(s,u,`missing required property "${z}"`));return O}function Jv(c){let s=c.value,u=c.valueSpec,m=c.style,y=c.styleSpec,S=c.key,I=c.arrayElementValidator||c.validateSpec;if(Zr(s)!=="array")return[new gt(S,s,`array expected, ${Zr(s)} found`)];if(u.length&&s.length!==u.length)return[new gt(S,s,`array length ${u.length} expected, length ${s.length} found`)];if(u["min-length"]&&s.length<u["min-length"])return[new gt(S,s,`array length at least ${u["min-length"]} expected, length ${s.length} found`)];let C={type:u.value,values:u.values};y.$version<7&&(C.function=u.function),Zr(u.value)==="object"&&(C=u.value);let O=[];for(let q=0;q<s.length;q++)O=O.concat(I({array:s,arrayIndex:q,value:s[q],valueSpec:C,validateSpec:c.validateSpec,style:m,styleSpec:y,key:`${S}[${q}]`}));return O}function zm(c){let s=c.key,u=c.value,m=c.valueSpec,y=Zr(u);return y==="number"&&u!=u&&(y="NaN"),y!=="number"?[new gt(s,u,`number expected, ${y} found`)]:"minimum"in m&&u<m.minimum?[new gt(s,u,`${u} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&u>m.maximum?[new gt(s,u,`${u} is greater than the maximum value ${m.maximum}`)]:[]}function DA(c){let s=c.valueSpec,u=vi(c.value.type),m,y,S,I={},C=u!=="categorical"&&c.value.property===void 0,O=!C,q=Zr(c.value.stops)==="array"&&Zr(c.value.stops[0])==="array"&&Zr(c.value.stops[0][0])==="object",z=Is({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(X){if(u==="identity")return[new gt(X.key,X.value,"identity function may not have a \"stops\" property")];let Q=[],re=X.value;return Q=Q.concat(Jv({key:X.key,value:re,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:G})),Zr(re)==="array"&&re.length===0&&Q.push(new gt(X.key,re,"array must have at least one stop")),Q},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:s,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return u==="identity"&&C&&z.push(new gt(c.key,c.value,"missing required property \"property\"")),u==="identity"||c.value.stops||z.push(new gt(c.key,c.value,"missing required property \"stops\"")),u==="exponential"&&c.valueSpec.expression&&!Rb(c.valueSpec)&&z.push(new gt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(O&&!Lc(c.valueSpec)?z.push(new gt(c.key,c.value,"property functions not supported")):C&&!AA(c.valueSpec)&&z.push(new gt(c.key,c.value,"zoom functions not supported"))),u!=="categorical"&&!q||c.value.property!==void 0||z.push(new gt(c.key,c.value,"\"property\" property is required")),z;function G(X){let Q=[],re=X.value,le=X.key;if(Zr(re)!=="array")return[new gt(le,re,`array expected, ${Zr(re)} found`)];if(re.length!==2)return[new gt(le,re,`array length 2 expected, length ${re.length} found`)];if(q){if(Zr(re[0])!=="object")return[new gt(le,re,`object expected, ${Zr(re[0])} found`)];if(re[0].zoom===void 0)return[new gt(le,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new gt(le,re,"object stop key must have value")];if(S&&S>vi(re[0].zoom))return[new gt(le,re[0].zoom,"stop zoom values must appear in ascending order")];vi(re[0].zoom)!==S&&(S=vi(re[0].zoom),y=void 0,I={}),Q=Q.concat(Is({key:`${le}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:zm,value:Y}}))}else Q=Q.concat(Y({key:`${le}[0]`,value:re[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},re));return Yv(Vl(re[1]))?Q.concat([new gt(`${le}[1]`,re[1],"expressions are not allowed in function stops.")]):Q.concat(X.validateSpec({key:`${le}[1]`,value:re[1],valueSpec:s,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function Y(X,Q){let re=Zr(X.value),le=vi(X.value),ge=X.value!==null?X.value:Q;if(m){if(re!==m)return[new gt(X.key,ge,`${re} stop domain type must match previous stop domain type ${m}`)]}else m=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new gt(X.key,ge,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&u!=="categorical"){let ke=`number expected, ${re} found`;return Lc(s)&&u===void 0&&(ke+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new gt(X.key,ge,ke)]}return u!=="categorical"||re!=="number"||isFinite(le)&&Math.floor(le)===le?u!=="categorical"&&re==="number"&&y!==void 0&&le<y?[new gt(X.key,ge,"stop domain values must appear in ascending order")]:(y=le,u==="categorical"&&le in I?[new gt(X.key,ge,"stop domain values must be unique")]:(I[le]=!0,[])):[new gt(X.key,ge,`integer expected, found ${le}`)]}}function Xf(c){let s=(c.expressionContext==="property"?RA:Nm)(Vl(c.value),c.valueSpec);if(s.result==="error")return s.value.map(m=>new gt(`${c.key}${m.key}`,c.value,m.message));let u=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!u.outputDefined())return[new gt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Lm(u))return[new gt(c.key,c.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(c.expressionContext==="filter"&&!Lm(u))return[new gt(c.key,c.value,"\"feature-state\" data expressions are not supported with filters.")];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Zv(u,["zoom","feature-state"]))return[new gt(c.key,c.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(c.expressionContext==="cluster-initial"&&!Wv(u))return[new gt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ey(c){let s=c.key,u=c.value,m=Zr(u);return m!=="string"?[new gt(s,u,`color expected, ${m} found`)]:$r.parse(String(u))?[]:[new gt(s,u,`color expected, "${u}" found`)]}function zu(c){let s=c.key,u=c.value,m=c.valueSpec,y=[];return Array.isArray(m.values)?m.values.indexOf(vi(u))===-1&&y.push(new gt(s,u,`expected one of [${m.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(m.values).indexOf(vi(u))===-1&&y.push(new gt(s,u,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(u)} found`)),y}function jb(c){return Kv(Vl(c.value))?Xf(si({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):NA(c)}function NA(c){let s=c.value,u=c.key;if(Zr(s)!=="array")return[new gt(u,s,`array expected, ${Zr(s)} found`)];let m=c.styleSpec,y,S=[];if(s.length<1)return[new gt(u,s,"filter array must have at least 1 element")];switch(S=S.concat(zu({key:`${u}[0]`,value:s[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),vi(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&vi(s[1])==="$type"&&S.push(new gt(u,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&S.push(new gt(u,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(y=Zr(s[1]),y!=="string"&&S.push(new gt(`${u}[1]`,s[1],`string expected, ${y} found`)));for(let I=2;I<s.length;I++)y=Zr(s[I]),vi(s[1])==="$type"?S=S.concat(zu({key:`${u}[${I}]`,value:s[I],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&S.push(new gt(`${u}[${I}]`,s[I],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let I=1;I<s.length;I++)S=S.concat(NA({key:`${u}[${I}]`,value:s[I],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":y=Zr(s[1]),s.length!==2?S.push(new gt(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):y!=="string"&&S.push(new gt(`${u}[1]`,s[1],`string expected, ${y} found`))}return S}function kA(c,s){let u=c.key,m=c.validateSpec,y=c.style,S=c.styleSpec,I=c.value,C=c.objectKey,O=S[`${s}_${c.layerType}`];if(!O)return[];let q=C.match(/^(.*)-transition$/);if(s==="paint"&&q&&O[q[1]]&&O[q[1]].transition)return m({key:u,value:I,valueSpec:S.transition,style:y,styleSpec:S});let z=c.valueSpec||O[C];if(!z)return[new gt(u,I,`unknown property "${C}"`)];let G;if(Zr(I)==="string"&&Lc(z)&&!z.tokens&&(G=/^{([^}]+)}$/.exec(I)))return[new gt(u,I,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];let Y=[];return c.layerType==="symbol"&&(C==="text-field"&&y&&!y.glyphs&&Y.push(new gt(u,I,"use of \"text-field\" requires a style \"glyphs\" property")),C==="text-font"&&Dm(Vl(I))&&vi(I.type)==="identity"&&Y.push(new gt(u,I,"\"text-font\" does not support identity functions"))),Y.concat(m({key:c.key,value:I,valueSpec:z,style:y,styleSpec:S,expressionContext:"property",propertyType:s,propertyKey:C}))}function qA(c){return kA(c,"paint")}function FA(c){return kA(c,"layout")}function jA(c){let s=[],u=c.value,m=c.key,y=c.style,S=c.styleSpec;if(Zr(u)!=="object")return[new gt(m,u,`object expected, ${Zr(u)} found`)];u.type||u.ref||s.push(new gt(m,u,"either \"type\" or \"ref\" is required"));let I=vi(u.type),C=vi(u.ref);if(u.id){let O=vi(u.id);for(let q=0;q<c.arrayIndex;q++){let z=y.layers[q];vi(z.id)===O&&s.push(new gt(m,u.id,`duplicate layer id "${u.id}", previously used at line ${z.id.__line__}`))}}if("ref"in u){let O;["type","source","source-layer","filter","layout"].forEach(q=>{q in u&&s.push(new gt(m,u[q],`"${q}" is prohibited for ref layers`))}),y.layers.forEach(q=>{vi(q.id)===C&&(O=q)}),O?O.ref?s.push(new gt(m,u.ref,"ref cannot reference another ref layer")):I=vi(O.type):s.push(new gt(m,u.ref,`ref layer "${C}" not found`))}else if(I!=="background")if(u.source){let O=y.sources&&y.sources[u.source],q=O&&vi(O.type);O?q==="vector"&&I==="raster"?s.push(new gt(m,u.source,`layer "${u.id}" requires a raster source`)):q!=="raster-dem"&&I==="hillshade"||q!=="raster-dem"&&I==="color-relief"?s.push(new gt(m,u.source,`layer "${u.id}" requires a raster-dem source`)):q==="raster"&&I!=="raster"?s.push(new gt(m,u.source,`layer "${u.id}" requires a vector source`)):q!=="vector"||u["source-layer"]?q==="raster-dem"&&I!=="hillshade"&&I!=="color-relief"?s.push(new gt(m,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):I!=="line"||!u.paint||!u.paint["line-gradient"]||q==="geojson"&&O.lineMetrics||s.push(new gt(m,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new gt(m,u,`layer "${u.id}" must specify a "source-layer"`)):s.push(new gt(m,u.source,`source "${u.source}" not found`))}else s.push(new gt(m,u,"missing required property \"source\""));return s=s.concat(Is({key:m,value:u,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:u.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:u,objectKey:"type"}),filter:jb,layout:O=>Is({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":q=>FA(si({layerType:I},q))}}),paint:O=>Is({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":q=>qA(si({layerType:I},q))}})}})),s}function cl(c){let s=c.value,u=c.key,m=Zr(s);return m!=="string"?[new gt(u,s,`string expected, ${m} found`)]:[]}let gp={promoteId:function({key:c,value:s}){if(Zr(s)==="string")return cl({key:c,value:s});{let u=[];for(let m in s)u.push(...cl({key:`${c}.${m}`,value:s[m]}));return u}}};function Aa(c){let s=c.value,u=c.key,m=c.styleSpec,y=c.style,S=c.validateSpec;if(!s.type)return[new gt(u,s,"\"type\" is required")];let I=vi(s.type),C;switch(I){case"vector":case"raster":return C=Is({key:u,value:s,valueSpec:m[`source_${I.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:gp,validateSpec:S}),C;case"raster-dem":return C=function(O){var q;let z=(q=O.sourceName)!==null&&q!==void 0?q:"",G=O.value,Y=O.styleSpec,X=Y.source_raster_dem,Q=O.style,re=[],le=Zr(G);if(G===void 0)return re;if(le!=="object")return re.push(new gt("source_raster_dem",G,`object expected, ${le} found`)),re;let ge=vi(G.encoding)==="custom",ke=["redFactor","greenFactor","blueFactor","baseShift"],Te=O.value.encoding?`"${O.value.encoding}"`:"Default";for(let Me in G)!ge&&ke.includes(Me)?re.push(new gt(Me,G[Me],`In "${z}": "${Me}" is only valid when "encoding" is set to "custom". ${Te} encoding found`)):X[Me]?re=re.concat(O.validateSpec({key:Me,value:G[Me],valueSpec:X[Me],validateSpec:O.validateSpec,style:Q,styleSpec:Y})):re.push(new gt(Me,G[Me],`unknown property "${Me}"`));return re}({sourceName:u,value:s,style:c.style,styleSpec:m,validateSpec:S}),C;case"geojson":if(C=Is({key:u,value:s,valueSpec:m.source_geojson,style:y,styleSpec:m,validateSpec:S,objectElementValidators:gp}),s.cluster)for(let O in s.clusterProperties){let[q,z]=s.clusterProperties[O],G=typeof q=="string"?[q,["accumulated"],["get",O]]:q;C.push(...Xf({key:`${u}.${O}.map`,value:z,expressionContext:"cluster-map"})),C.push(...Xf({key:`${u}.${O}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return C;case"video":return Is({key:u,value:s,valueSpec:m.source_video,style:y,validateSpec:S,styleSpec:m});case"image":return Is({key:u,value:s,valueSpec:m.source_image,style:y,validateSpec:S,styleSpec:m});case"canvas":return[new gt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zu({key:`${u}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function vp(c){let s=c.value,u=c.styleSpec,m=u.light,y=c.style,S=[],I=Zr(s);if(s===void 0)return S;if(I!=="object")return S=S.concat([new gt("light",s,`object expected, ${I} found`)]),S;for(let C in s){let O=C.match(/^(.*)-transition$/);S=S.concat(O&&m[O[1]]&&m[O[1]].transition?c.validateSpec({key:C,value:s[C],valueSpec:u.transition,validateSpec:c.validateSpec,style:y,styleSpec:u}):m[C]?c.validateSpec({key:C,value:s[C],valueSpec:m[C],validateSpec:c.validateSpec,style:y,styleSpec:u}):[new gt(C,s[C],`unknown property "${C}"`)])}return S}function zb(c){let s=c.value,u=c.styleSpec,m=u.sky,y=c.style,S=Zr(s);if(s===void 0)return[];if(S!=="object")return[new gt("sky",s,`object expected, ${S} found`)];let I=[];for(let C in s)I=I.concat(m[C]?c.validateSpec({key:C,value:s[C],valueSpec:m[C],style:y,styleSpec:u}):[new gt(C,s[C],`unknown property "${C}"`)]);return I}function zA(c){let s=c.value,u=c.styleSpec,m=u.terrain,y=c.style,S=[],I=Zr(s);if(s===void 0)return S;if(I!=="object")return S=S.concat([new gt("terrain",s,`object expected, ${I} found`)]),S;for(let C in s)S=S.concat(m[C]?c.validateSpec({key:C,value:s[C],valueSpec:m[C],validateSpec:c.validateSpec,style:y,styleSpec:u}):[new gt(C,s[C],`unknown property "${C}"`)]);return S}function UA(c){let s=[],u=c.value,m=c.key;if(Array.isArray(u)){let y=[],S=[];for(let I in u)u[I].id&&y.includes(u[I].id)&&s.push(new gt(m,u,`all the sprites' ids must be unique, but ${u[I].id} is duplicated`)),y.push(u[I].id),u[I].url&&S.includes(u[I].url)&&s.push(new gt(m,u,`all the sprites' URLs must be unique, but ${u[I].url} is duplicated`)),S.push(u[I].url),s=s.concat(Is({key:`${m}[${I}]`,value:u[I],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return cl({key:m,value:u})}function yp(c){return s=c.value,s&&s.constructor===Object?[]:[new gt(c.key,c.value,`object expected, ${Zr(c.value)} found`)];var s}let Ub={"*":()=>[],array:Jv,boolean:function(c){let s=c.value,u=c.key,m=Zr(s);return m!=="boolean"?[new gt(u,s,`boolean expected, ${m} found`)]:[]},number:zm,color:ey,constants:Fb,enum:zu,filter:jb,function:DA,layer:jA,object:Is,source:Aa,light:vp,sky:zb,terrain:zA,projection:function(c){let s=c.value,u=c.styleSpec,m=u.projection,y=c.style,S=Zr(s);if(s===void 0)return[];if(S!=="object")return[new gt("projection",s,`object expected, ${S} found`)];let I=[];for(let C in s)I=I.concat(m[C]?c.validateSpec({key:C,value:s[C],valueSpec:m[C],style:y,styleSpec:u}):[new gt(C,s[C],`unknown property "${C}"`)]);return I},projectionDefinition:function(c){let s=c.key,u=c.value;u=u instanceof String?u.valueOf():u;let m=Zr(u);return m!=="array"||function(y){return Array.isArray(y)&&y.length===3&&typeof y[0]=="string"&&typeof y[1]=="string"&&typeof y[2]=="number"}(u)||function(y){return!!["interpolate","step","literal"].includes(y[0])}(u)?["array","string"].includes(m)?[]:[new gt(s,u,`projection expected, invalid type "${m}" found`)]:[new gt(s,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:cl,formatted:function(c){return cl(c).length===0?[]:Xf(c)},resolvedImage:function(c){return cl(c).length===0?[]:Xf(c)},padding:function(c){let s=c.key,u=c.value;if(Zr(u)==="array"){if(u.length<1||u.length>4)return[new gt(s,u,`padding requires 1 to 4 values; ${u.length} values found`)];let m={type:"number"},y=[];for(let S=0;S<u.length;S++)y=y.concat(c.validateSpec({key:`${s}[${S}]`,value:u[S],validateSpec:c.validateSpec,valueSpec:m}));return y}return zm({key:s,value:u,valueSpec:{}})},numberArray:function(c){let s=c.key,u=c.value;if(Zr(u)==="array"){let m={type:"number"};if(u.length<1)return[new gt(s,u,"array length at least 1 expected, length 0 found")];let y=[];for(let S=0;S<u.length;S++)y=y.concat(c.validateSpec({key:`${s}[${S}]`,value:u[S],validateSpec:c.validateSpec,valueSpec:m}));return y}return zm({key:s,value:u,valueSpec:{}})},colorArray:function(c){let s=c.key,u=c.value;if(Zr(u)==="array"){if(u.length<1)return[new gt(s,u,"array length at least 1 expected, length 0 found")];let m=[];for(let y=0;y<u.length;y++)m=m.concat(ey({key:`${s}[${y}]`,value:u[y]}));return m}return ey({key:s,value:u})},variableAnchorOffsetCollection:function(c){let s=c.key,u=c.value,m=Zr(u),y=c.styleSpec;if(m!=="array"||u.length<1||u.length%2!=0)return[new gt(s,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let I=0;I<u.length;I+=2)S=S.concat(zu({key:`${s}[${I}]`,value:u[I],valueSpec:y.layout_symbol["text-anchor"]})),S=S.concat(Jv({key:`${s}[${I+1}]`,value:u[I+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:y}));return S},sprite:UA,state:yp};function _p(c){let s=c.value,u=c.valueSpec,m=c.styleSpec;return c.validateSpec=_p,u.expression&&Dm(vi(s))?DA(c):u.expression&&Yv(Vl(s))?Xf(c):u.type&&Ub[u.type]?Ub[u.type](c):Is(si({},c,{valueSpec:u.type?m[u.type]:u}))}function BA(c){let s=c.value,u=c.key,m=cl(c);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new gt(u,s,"\"glyphs\" url must include a \"{fontstack}\" token")),s.indexOf("{range}")===-1&&m.push(new gt(u,s,"\"glyphs\" url must include a \"{range}\" token"))),m}function Ma(c,s=xe){let u=[];return u=u.concat(_p({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:_p,objectElementValidators:{glyphs:BA,"*":()=>[]}})),c.constants&&(u=u.concat(Fb({key:"constants",value:c.constants}))),xp(u)}function fl(c){return function(s){return c(on(mt({},s),{validateSpec:_p}))}}function xp(c){return[].concat(c).sort((s,u)=>s.line-u.line)}function hl(c){return function(...s){return xp(c.apply(this,s))}}Ma.source=hl(fl(Aa)),Ma.sprite=hl(fl(UA)),Ma.glyphs=hl(fl(BA)),Ma.light=hl(fl(vp)),Ma.sky=hl(fl(zb)),Ma.terrain=hl(fl(zA)),Ma.state=hl(fl(yp)),Ma.layer=hl(fl(jA)),Ma.filter=hl(fl(jb)),Ma.paintProperty=hl(fl(qA)),Ma.layoutProperty=hl(fl(FA));let bp=Ma,Jq=bp.light,Um=bp.sky,eF=bp.paintProperty,tF=bp.layoutProperty;function Bm(c,s){let u=!1;if(s&&s.length)for(let m of s)c.fire(new Re(new Error(m.message))),u=!0;return u}class Vm{constructor(s,u,m){let y=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;let I=new Int32Array(this.arrayBuffer);s=I[0],this.d=(u=I[1])+2*(m=I[2]);for(let O=0;O<this.d*this.d;O++){let q=I[3+O],z=I[3+O+1];y.push(q===z?null:I.subarray(q,z))}let C=I[3+y.length+1];this.keys=I.subarray(I[3+y.length],C),this.bboxes=I.subarray(C),this.insert=this._insertReadonly}else{this.d=u+2*m;for(let I=0;I<this.d*this.d;I++)y.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=s,this.padding=m,this.scale=u/s,this.uid=0;let S=m/u*s;this.min=-S,this.max=s+S}insert(s,u,m,y,S){this._forEachCell(u,m,y,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,u,m,y,S,I){this.cells[S].push(I)}query(s,u,m,y,S){let I=this.min,C=this.max;if(s<=I&&u<=I&&C<=m&&C<=y&&!S)return Array.prototype.slice.call(this.keys);{let O=[];return this._forEachCell(s,u,m,y,this._queryCell,O,{},S),O}}_queryCell(s,u,m,y,S,I,C,O){let q=this.cells[S];if(q!==null){let z=this.keys,G=this.bboxes;for(let Y=0;Y<q.length;Y++){let X=q[Y];if(C[X]===void 0){let Q=4*X;(O?O(G[Q+0],G[Q+1],G[Q+2],G[Q+3]):s<=G[Q+2]&&u<=G[Q+3]&&m>=G[Q+0]&&y>=G[Q+1])?(C[X]=!0,I.push(z[X])):C[X]=!1}}}}_forEachCell(s,u,m,y,S,I,C,O){let q=this._convertToCellCoord(s),z=this._convertToCellCoord(u),G=this._convertToCellCoord(m),Y=this._convertToCellCoord(y);for(let X=q;X<=G;X++)for(let Q=z;Q<=Y;Q++){let re=this.d*Q+X;if((!O||O(this._convertFromCellCoord(X),this._convertFromCellCoord(Q),this._convertFromCellCoord(X+1),this._convertFromCellCoord(Q+1)))&&S.call(this,s,u,m,y,re,I,C,O))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let s=this.cells,u=3+this.cells.length+1+1,m=0;for(let I=0;I<this.cells.length;I++)m+=this.cells[I].length;let y=new Int32Array(u+m+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let S=u;for(let I=0;I<s.length;I++){let C=s[I];y[3+I]=S,y.set(C,S),S+=C.length}return y[3+s.length]=S,y.set(this.keys,S),S+=this.keys.length,y[3+s.length+1]=S,y.set(this.bboxes,S),S+=this.bboxes.length,y.buffer}static serialize(s,u){let m=s.toArrayBuffer();return u&&u.push(m),{buffer:m}}static deserialize(s){return new Vm(s.buffer)}}let pl={};function Ut(c,s,u={}){if(pl[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),pl[c]={klass:s,omit:u.omit||[],shallow:u.shallow||[]}}Ut("Object",Object),Ut("Set",Set),Ut("TransferableGridIndex",Vm),Ut("Color",$r),Ut("Error",Error),Ut("AJAXError",_e),Ut("ResolvedImage",Ja),Ut("StylePropertyFunction",qm),Ut("StyleExpression",Ob,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",Lb),Ut("ZoomConstantExpression",km),Ut("CompoundExpression",Ts,{omit:["_evaluate"]});for(let c in dp)dp[c]._classRegistryKey||Ut(`Expression_${c}`,dp[c]);function Bb(c){return c&&typeof ArrayBuffer!="undefined"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function ty(c){return c.$name||c.constructor._classRegistryKey}function Vb(c){return!function(s){if(s===null||typeof s!="object")return!1;let u=ty(s);return!(!u||u==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Bb(c)||Gt(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function wp(c,s){if(Vb(c))return(Bb(c)||Gt(c))&&s&&s.push(c),ArrayBuffer.isView(c)&&s&&s.push(c.buffer),c instanceof ImageData&&s&&s.push(c.data.buffer),c;if(Array.isArray(c)){let S=[];for(let I of c)S.push(wp(I,s));return S}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);let u=ty(c);if(!u)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!pl[u])throw new Error(`${u} is not registered.`);let{klass:m}=pl[u],y=m.serialize?m.serialize(c,s):{};if(m.serialize){if(s&&y===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let S in c){if(!c.hasOwnProperty(S)||pl[u].omit.indexOf(S)>=0)continue;let I=c[S];y[S]=pl[u].shallow.indexOf(S)>=0?I:wp(I,s)}c instanceof Error&&(y.message=c.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(y.$name=u),y}function Qf(c){if(Vb(c))return c;if(Array.isArray(c))return c.map(Qf);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);let s=ty(c)||"Object";if(!pl[s])throw new Error(`can't deserialize unregistered class ${s}`);let{klass:u}=pl[s];if(!u)throw new Error(`can't deserialize unregistered class ${s}`);if(u.deserialize)return u.deserialize(c);let m=Object.create(u.prototype);for(let y of Object.keys(c)){if(y==="$name")continue;let S=c[y];m[y]=pl[s].shallow.indexOf(y)>=0?S:Qf(S)}return m}class ry{constructor(){this.first=!0}update(s,u){let m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=u),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}let Jr={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function ny(c){for(let s of c)if($b(s.charCodeAt(0)))return!0;return!1}function rF(c){for(let s of c)if(!VA(s.charCodeAt(0)))return!1;return!0}function iy(c){let s=c.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch(m){return null}}).filter(u=>u);return new RegExp(s.join("|"),"u")}let nF=iy(["Arab","Dupl","Mong","Ougr","Syrc"]);function VA(c){return!nF.test(String.fromCodePoint(c))}let Gb=iy(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function $b(c){return!(c!==746&&c!==747&&(c<4352||!(Jr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Jr["CJK Compatibility"](c)||Jr["CJK Strokes"](c)||!(!Jr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Jr["Enclosed CJK Letters and Months"](c)||Jr["Ideographic Description Characters"](c)||Jr.Kanbun(c)||Jr.Katakana(c)&&c!==12540||!(!Jr["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Jr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Jr["Vertical Forms"](c)||Jr["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||Gb.test(String.fromCodePoint(c)))))}function GA(c){return!($b(c)||function(s){return!!(Jr["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Jr["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Jr["Letterlike Symbols"](s)||Jr["Number Forms"](s)||Jr["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Jr["Control Pictures"](s)&&s!==9251||Jr["Optical Character Recognition"](s)||Jr["Enclosed Alphanumerics"](s)||Jr["Geometric Shapes"](s)||Jr["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Jr["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Jr["CJK Symbols and Punctuation"](s)||Jr.Katakana(s)||Jr["Private Use Area"](s)||Jr["CJK Compatibility Forms"](s)||Jr["Small Form Variants"](s)||Jr["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}let $A=iy(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Hb(c){return $A.test(String.fromCodePoint(c))}function HA(c,s){return!(!s&&Hb(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Jr.Khmer(c))}function WA(c){for(let s of c)if(Hb(s.charCodeAt(0)))return!0;return!1}let dl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(dl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,s){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;let u=c.pluginURL,m=new Promise(S=>{this.loadScriptResolve=S});s(u);let y=new Promise(S=>setTimeout(()=>S(),this.TIMEOUT));if(yield Promise.race([m,y]),this.isParsed()){let S={pluginStatus:"loaded",pluginURL:u};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class jn{constructor(s,u){this.zoom=s,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new ry,this.transition=u.transition||{},this.globalState=u.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ry,this.transition={},this.globalState={})}isSupportedScript(s){return function(u,m){for(let y of u)if(!HA(y.charCodeAt(0),m))return!1;return!0}(s,dl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let s=this.zoom,u=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*u}}}class Ep{constructor(s,u){this.property=s,this.value=u,this.expression=function(m,y){if(Dm(m))return new qm(m,y);if(Yv(m)){let S=RA(m,y);if(S.result==="error")throw new Error(S.value.map(I=>`${I.key}: ${I.message}`).join(", "));return S.value}{let S=m;return y.type==="color"&&typeof m=="string"?S=$r.parse(m):y.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?y.type!=="numberArray"||typeof m!="number"&&!Array.isArray(m)?y.type!=="colorArray"||typeof m!="string"&&!Array.isArray(m)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(m)?S=oa.parse(m):y.type==="projectionDefinition"&&typeof m=="string"&&(S=Go.parse(m)):S=Gi.parse(m):S=ia.parse(m):S=co.parse(m),{globalStateRefs:new Set,kind:"constant",evaluate:()=>S}}}(u===void 0?s.specification.default:u,s.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(s,u,m){return this.property.possiblyEvaluate(this,s,u,m)}setGlobalState(s){this.expression.evaluate=(u,m,y,S,I,C)=>(u.globalState=s,this._evaluate.call(this.expression,u,m,y,S,I,C))}}class Wb{constructor(s){this.property=s,this.value=new Ep(s,void 0)}transitioned(s,u){return new Zb(this.property,this.value,u,nt({},s.transition,this.transition),s.now)}untransitioned(){return new Zb(this.property,this.value,null,{},0)}}class ZA{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return ot(this._values[s].value.value)}setValue(s,u){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Wb(this._values[s].property)),this._values[s].value=new Ep(this._values[s].property,u===null?void 0:ot(u))}getTransition(s){return ot(this._values[s].transition)}setTransition(s,u){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Wb(this._values[s].property)),this._values[s].transition=ot(u)||void 0}serialize(){let s={};for(let u of Object.keys(this._values)){let m=this.getValue(u);m!==void 0&&(s[u]=m);let y=this.getTransition(u);y!==void 0&&(s[`${u}-transition`]=y)}return s}transitioned(s,u){let m=new Yb(this._properties);for(let y of Object.keys(this._values))m._values[y]=this._values[y].transitioned(s,u._values[y]);return m}untransitioned(){let s=new Yb(this._properties);for(let u of Object.keys(this._values))s._values[u]=this._values[u].untransitioned();return s}}class Zb{constructor(s,u,m,y,S){this.property=s,this.value=u,this.begin=S+y.delay||0,this.end=this.begin+y.duration||0,s.specification.transition&&(y.delay||y.duration)&&(this.prior=m)}possiblyEvaluate(s,u,m){let y=s.now||0,S=this.value.possiblyEvaluate(s,u,m),I=this.prior;if(I){if(y>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(y<this.begin)return I.possiblyEvaluate(s,u,m);{let C=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(s,u,m),S,dt(C))}}return S}}class Yb{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,u,m){let y=new oy(this._properties);for(let S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(s,u,m);return y}hasTransition(){for(let s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class YA{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._globalState={}}hasValue(s){return this._values[s].value!==void 0}getValue(s){return ot(this._values[s].value)}setValue(s,u){this._values[s]=new Ep(this._values[s].property,u===null?void 0:ot(u)),this._values[s].setGlobalState(this._globalState)}serialize(){let s={};for(let u of Object.keys(this._values)){let m=this.getValue(u);m!==void 0&&(s[u]=m)}return s}possiblyEvaluate(s,u,m){let y=new oy(this._properties);for(let S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(s,u,m);return y}setGlobalState(s){this._globalState=s;for(let u of Object.values(this._values))u.setGlobalState(s)}}class Gl{constructor(s,u,m){this.property=s,this.value=u,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,u,m,y){return this.property.evaluate(this.value,this.parameters,s,u,m,y)}}class oy{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Kt{constructor(s){this.specification=s}possiblyEvaluate(s,u){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(u)}interpolate(s,u,m){let y=Bl[this.specification.type];return y?y(s,u,m):s}}class lr{constructor(s,u){this.specification=s,this.overrides=u}possiblyEvaluate(s,u,m,y){return new Gl(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(u,null,{},m,y)}:s.expression,u)}interpolate(s,u,m){if(s.value.kind!=="constant"||u.value.kind!=="constant")return s;if(s.value.value===void 0||u.value.value===void 0)return new Gl(this,{kind:"constant",value:void 0},s.parameters);let y=Bl[this.specification.type];if(y){let S=y(s.value.value,u.value.value,m);return new Gl(this,{kind:"constant",value:S},s.parameters)}return s}evaluate(s,u,m,y,S,I){return s.kind==="constant"?s.value:s.evaluate(u,m,y,S,I)}}class ay extends lr{possiblyEvaluate(s,u,m,y){if(s.value===void 0)return new Gl(this,{kind:"constant",value:void 0},u);if(s.expression.kind==="constant"){let S=s.expression.evaluate(u,null,{},m,y),I=s.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,C=this._calculate(I,I,I,u);return new Gl(this,{kind:"constant",value:C},u)}if(s.expression.kind==="camera"){let S=this._calculate(s.expression.evaluate({zoom:u.zoom-1}),s.expression.evaluate({zoom:u.zoom}),s.expression.evaluate({zoom:u.zoom+1}),u);return new Gl(this,{kind:"constant",value:S},u)}return new Gl(this,s.expression,u)}evaluate(s,u,m,y,S,I){if(s.kind==="source"){let C=s.evaluate(u,m,y,S,I);return this._calculate(C,C,C,u)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(u.zoom)-1},m,y),s.evaluate({zoom:Math.floor(u.zoom)},m,y),s.evaluate({zoom:Math.floor(u.zoom)+1},m,y),u):s.value}_calculate(s,u,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:m,to:u}}interpolate(s){return s}}class Nc{constructor(s){this.specification=s}possiblyEvaluate(s,u,m,y){if(s.value!==void 0){if(s.expression.kind==="constant"){let S=s.expression.evaluate(u,null,{},m,y);return this._calculate(S,S,S,u)}return this._calculate(s.expression.evaluate(new jn(Math.floor(u.zoom-1),u)),s.expression.evaluate(new jn(Math.floor(u.zoom),u)),s.expression.evaluate(new jn(Math.floor(u.zoom+1),u)),u)}}_calculate(s,u,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:m,to:u}}interpolate(s){return s}}class sy{constructor(s){this.specification=s}possiblyEvaluate(s,u,m,y){return!!s.expression.evaluate(u,null,{},m,y)}interpolate(){return!1}}class aa{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let u in s){let m=s[u];m.specification.overridable&&this.overridableProperties.push(u);let y=this.defaultPropertyValues[u]=new Ep(m,void 0),S=this.defaultTransitionablePropertyValues[u]=new Wb(m);this.defaultTransitioningPropertyValues[u]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=y.possiblyEvaluate({})}}}Ut("DataDrivenProperty",lr),Ut("DataConstantProperty",Kt),Ut("CrossFadedDataDrivenProperty",ay),Ut("CrossFadedProperty",Nc),Ut("ColorRampProperty",sy);let KA="-transition";class As extends tt{constructor(s,u){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,this._globalState={},s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter,this._featureFilter=Yf(s.filter)),u.layout&&(this._unevaluatedLayout=new YA(u.layout)),u.paint)){this._transitionablePaint=new ZA(u.paint);for(let m in s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(let m in s.layout)this.setLayoutProperty(m,s.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new oy(u.paint)}}setFilter(s){this.filter=s,this._featureFilter=Yf(s)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}getLayoutAffectingGlobalStateRefs(){let s=new Set;if(this._unevaluatedLayout)for(let u in this._unevaluatedLayout._values){let m=this._unevaluatedLayout._values[u];for(let y of m.getGlobalStateRefs())s.add(y)}for(let u of this._featureFilter.getGlobalStateRefs())s.add(u);return s}getPaintAffectingGlobalStateRefs(){var s;let u=new globalThis.Map;if(this._transitionablePaint)for(let m in this._transitionablePaint._values){let y=this._transitionablePaint._values[m].value;for(let S of y.getGlobalStateRefs()){let I=(s=u.get(S))!==null&&s!==void 0?s:[];I.push({name:m,value:y.value}),u.set(S,I)}}return u}setLayoutProperty(s,u,m={}){u!=null&&this._validate(tF,`layers.${this.id}.layout.${s}`,s,u,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,u):this.visibility=u)}getPaintProperty(s){return s.endsWith(KA)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,u,m={}){if(u!=null&&this._validate(eF,`layers.${this.id}.paint.${s}`,s,u,m))return!1;if(s.endsWith(KA))return this._transitionablePaint.setTransition(s.slice(0,-11),u||void 0),!1;{let y=this._transitionablePaint._values[s],S=y.property.specification["property-type"]==="cross-faded-data-driven",I=y.value.isDataDriven(),C=y.value;this._transitionablePaint.setValue(s,u),this._handleSpecialPaintPropertyUpdate(s);let O=this._transitionablePaint._values[s].value;return O.isDataDriven()||I||S||this._handleOverridablePaintPropertyUpdate(s,C,O)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,u,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,u){s.globalState=this._globalState,s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,u)}setGlobalState(s){this._globalState=s,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(s)}serialize(){let s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),at(s,(u,m)=>!(u===void 0||m==="layout"&&!Object.keys(u).length||m==="paint"&&!Object.keys(u).length))}_validate(s,u,m,y,S={}){return(!S||S.validate!==!1)&&Bm(this,s.call(bp,{key:u,layerType:this.type,objectKey:m,value:y,styleSpec:xe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let s in this.paint._values){let u=this.paint.get(s);if(u instanceof Gl&&Lc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}let iF={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Gm{constructor(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class On{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,u){return s._trim(),u&&(s.isTransferred=!0,u.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){let u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ai(c,s=1){let u=0,m=0;return{members:c.map(y=>{let S=iF[y.type].BYTES_PER_ELEMENT,I=u=ly(u,Math.max(s,S)),C=y.components||1;return m=Math.max(m,S),u+=S*C,{name:y.name,type:y.type,components:C,offset:I}}),size:ly(u,Math.max(m,s)),alignment:s}}function ly(c,s){return Math.ceil(c/s)*s}class Sp extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u){let m=this.length;return this.resize(m+1),this.emplace(m,s,u)}emplace(s,u,m){let y=2*s;return this.int16[y+0]=u,this.int16[y+1]=m,s}}Sp.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",Sp);class Tp extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=3*s;return this.int16[S+0]=u,this.int16[S+1]=m,this.int16[S+2]=y,s}}Tp.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",Tp);class Kb extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y){let S=this.length;return this.resize(S+1),this.emplace(S,s,u,m,y)}emplace(s,u,m,y,S){let I=4*s;return this.int16[I+0]=u,this.int16[I+1]=m,this.int16[I+2]=y,this.int16[I+3]=S,s}}Kb.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",Kb);class Ip extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,s,u,m,y,S,I)}emplace(s,u,m,y,S,I,C){let O=6*s;return this.int16[O+0]=u,this.int16[O+1]=m,this.int16[O+2]=y,this.int16[O+3]=S,this.int16[O+4]=I,this.int16[O+5]=C,s}}Ip.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",Ip);class Jf extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,s,u,m,y,S,I)}emplace(s,u,m,y,S,I,C){let O=4*s,q=8*s;return this.int16[O+0]=u,this.int16[O+1]=m,this.uint8[q+4]=y,this.uint8[q+5]=S,this.uint8[q+6]=I,this.uint8[q+7]=C,s}}Jf.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",Jf);class $m extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u){let m=this.length;return this.resize(m+1),this.emplace(m,s,u)}emplace(s,u,m){let y=2*s;return this.float32[y+0]=u,this.float32[y+1]=m,s}}$m.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",$m);class uy extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q,z){let G=this.length;return this.resize(G+1),this.emplace(G,s,u,m,y,S,I,C,O,q,z)}emplace(s,u,m,y,S,I,C,O,q,z,G){let Y=10*s;return this.uint16[Y+0]=u,this.uint16[Y+1]=m,this.uint16[Y+2]=y,this.uint16[Y+3]=S,this.uint16[Y+4]=I,this.uint16[Y+5]=C,this.uint16[Y+6]=O,this.uint16[Y+7]=q,this.uint16[Y+8]=z,this.uint16[Y+9]=G,s}}uy.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",uy);class eh extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q,z,G,Y){let X=this.length;return this.resize(X+1),this.emplace(X,s,u,m,y,S,I,C,O,q,z,G,Y)}emplace(s,u,m,y,S,I,C,O,q,z,G,Y,X){let Q=12*s;return this.int16[Q+0]=u,this.int16[Q+1]=m,this.int16[Q+2]=y,this.int16[Q+3]=S,this.uint16[Q+4]=I,this.uint16[Q+5]=C,this.uint16[Q+6]=O,this.uint16[Q+7]=q,this.int16[Q+8]=z,this.int16[Q+9]=G,this.int16[Q+10]=Y,this.int16[Q+11]=X,s}}eh.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",eh);class Xb extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=3*s;return this.float32[S+0]=u,this.float32[S+1]=m,this.float32[S+2]=y,s}}Xb.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",Xb);class Qb extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint32[1*s+0]=u,s}}Qb.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",Qb);class cy extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q){let z=this.length;return this.resize(z+1),this.emplace(z,s,u,m,y,S,I,C,O,q)}emplace(s,u,m,y,S,I,C,O,q,z){let G=10*s,Y=5*s;return this.int16[G+0]=u,this.int16[G+1]=m,this.int16[G+2]=y,this.int16[G+3]=S,this.int16[G+4]=I,this.int16[G+5]=C,this.uint32[Y+3]=O,this.uint16[G+8]=q,this.uint16[G+9]=z,s}}cy.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",cy);class Jb extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,s,u,m,y,S,I)}emplace(s,u,m,y,S,I,C){let O=6*s;return this.int16[O+0]=u,this.int16[O+1]=m,this.int16[O+2]=y,this.int16[O+3]=S,this.int16[O+4]=I,this.int16[O+5]=C,s}}Jb.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",Jb);class w extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S){let I=this.length;return this.resize(I+1),this.emplace(I,s,u,m,y,S)}emplace(s,u,m,y,S,I){let C=4*s,O=8*s;return this.float32[C+0]=u,this.float32[C+1]=m,this.float32[C+2]=y,this.int16[O+6]=S,this.int16[O+7]=I,s}}w.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",w);class a extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,s,u,m,y,S,I)}emplace(s,u,m,y,S,I,C){let O=16*s,q=4*s,z=8*s;return this.uint8[O+0]=u,this.uint8[O+1]=m,this.float32[q+1]=y,this.float32[q+2]=S,this.int16[z+6]=I,this.int16[z+7]=C,s}}a.prototype.bytesPerElement=16,Ut("StructArrayLayout2ub2f2i16",a);class h extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=3*s;return this.uint16[S+0]=u,this.uint16[S+1]=m,this.uint16[S+2]=y,s}}h.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",h);class g extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,ge){let ke=this.length;return this.resize(ke+1),this.emplace(ke,s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,ge)}emplace(s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,ge,ke){let Te=24*s,Me=12*s,$e=48*s;return this.int16[Te+0]=u,this.int16[Te+1]=m,this.uint16[Te+2]=y,this.uint16[Te+3]=S,this.uint32[Me+2]=I,this.uint32[Me+3]=C,this.uint32[Me+4]=O,this.uint16[Te+10]=q,this.uint16[Te+11]=z,this.uint16[Te+12]=G,this.float32[Me+7]=Y,this.float32[Me+8]=X,this.uint8[$e+36]=Q,this.uint8[$e+37]=re,this.uint8[$e+38]=le,this.uint32[Me+10]=ge,this.int16[Te+22]=ke,s}}g.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",g);class _ extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,ge,ke,Te,Me,$e,et,ht,Rt,xt,At,Jt,Tt){let Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,ge,ke,Te,Me,$e,et,ht,Rt,xt,At,Jt,Tt)}emplace(s,u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,ge,ke,Te,Me,$e,et,ht,Rt,xt,At,Jt,Tt,Mt){let it=32*s,fr=16*s;return this.int16[it+0]=u,this.int16[it+1]=m,this.int16[it+2]=y,this.int16[it+3]=S,this.int16[it+4]=I,this.int16[it+5]=C,this.int16[it+6]=O,this.int16[it+7]=q,this.uint16[it+8]=z,this.uint16[it+9]=G,this.uint16[it+10]=Y,this.uint16[it+11]=X,this.uint16[it+12]=Q,this.uint16[it+13]=re,this.uint16[it+14]=le,this.uint16[it+15]=ge,this.uint16[it+16]=ke,this.uint16[it+17]=Te,this.uint16[it+18]=Me,this.uint16[it+19]=$e,this.uint16[it+20]=et,this.uint16[it+21]=ht,this.uint16[it+22]=Rt,this.uint32[fr+12]=xt,this.float32[fr+13]=At,this.float32[fr+14]=Jt,this.uint16[it+30]=Tt,this.uint16[it+31]=Mt,s}}_.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",_);class E extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.float32[1*s+0]=u,s}}E.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",E);class M extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=3*s;return this.uint16[6*s+0]=u,this.float32[S+1]=m,this.float32[S+2]=y,s}}M.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",M);class L extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u,m){let y=this.length;return this.resize(y+1),this.emplace(y,s,u,m)}emplace(s,u,m,y){let S=4*s;return this.uint32[2*s+0]=u,this.uint16[S+2]=m,this.uint16[S+3]=y,s}}L.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",L);class k extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,u){let m=this.length;return this.resize(m+1),this.emplace(m,s,u)}emplace(s,u,m){let y=2*s;return this.uint16[y+0]=u,this.uint16[y+1]=m,s}}k.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",k);class B extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){let u=this.length;return this.resize(u+1),this.emplace(u,s)}emplace(s,u){return this.uint16[1*s+0]=u,s}}B.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",B);class V extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,u,m,y){let S=this.length;return this.resize(S+1),this.emplace(S,s,u,m,y)}emplace(s,u,m,y,S){let I=4*s;return this.float32[I+0]=u,this.float32[I+1]=m,this.float32[I+2]=y,this.float32[I+3]=S,s}}V.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",V);class W extends Gm{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new l(this.anchorPointX,this.anchorPointY)}}W.prototype.size=20;class H extends cy{get(s){return new W(this,s)}}Ut("CollisionBoxArray",H);class K extends Gm{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}K.prototype.size=48;class ee extends g{get(s){return new K(this,s)}}Ut("PlacedSymbolArray",ee);class ce extends Gm{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ce.prototype.size=64;class ue extends _{get(s){return new ce(this,s)}}Ut("SymbolInstanceArray",ue);class fe extends E{getoffsetX(s){return this.float32[1*s+0]}}Ut("GlyphOffsetArray",fe);class ve extends Tp{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Ut("SymbolLineVertexArray",ve);class Se extends Gm{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Se.prototype.size=12;class we extends M{get(s){return new Se(this,s)}}Ut("TextAnchorOffsetArray",we);class Ie extends Gm{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ie.prototype.size=8;class Pe extends L{get(s){return new Ie(this,s)}}Ut("FeatureIndexArray",Pe);class Ee extends Sp{}class Fe extends Sp{}class Qe extends Sp{}class Ve extends Ip{}class Ge extends Jf{}class Xe extends $m{}class vt extends uy{}class bt extends eh{}class st extends Xb{}class Zt extends Qb{}class Dr extends Jb{}class hn extends a{}class Ln extends h{}class Mn extends k{}let li=Ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:yi}=li;class Or{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,u,m,y){let S=this.segments[this.segments.length-1];return s>Or.MAX_VERTEX_ARRAY_LENGTH&&zt(`Max vertices per segment is ${Or.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Or.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+s>Or.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==y?this.createNewSegment(u,m,y):S}createNewSegment(s,u,m){let y={vertexOffset:s.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return m!==void 0&&(y.sortKey=m),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(y),y}getOrCreateLatestSegment(s,u,m){return this.prepareSegment(0,s,u,m)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let s of this.segments)for(let u in s.vaos)s.vaos[u].destroy()}static simpleSegment(s,u,m,y){return new Or([{vertexOffset:s,primitiveOffset:u,vertexLength:m,primitiveLength:y,vaos:{},sortKey:0}])}}function Dn(c,s){return 256*(c=Ot(Math.floor(c),0,255))+Ot(Math.floor(s),0,255)}Or.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",Or);let $i=Ai([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var eo,ho,sa,ml={exports:{}},kc={exports:{}},qc={exports:{}},Ap=function(){if(sa)return ml.exports;sa=1;var c=(eo||(eo=1,kc.exports=function(u,m){var y,S,I,C,O,q,z,G;for(S=u.length-(y=3&u.length),I=m,O=3432918353,q=461845907,G=0;G<S;)z=255&u.charCodeAt(G)|(255&u.charCodeAt(++G))<<8|(255&u.charCodeAt(++G))<<16|(255&u.charCodeAt(++G))<<24,++G,I=27492+(65535&(C=5*(65535&(I=(I^=z=(65535&(z=(z=(65535&z)*O+(((z>>>16)*O&65535)<<16)&4294967295)<<15|z>>>17))*q+(((z>>>16)*q&65535)<<16)&4294967295)<<13|I>>>19))+((5*(I>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(z=0,y){case 3:z^=(255&u.charCodeAt(G+2))<<16;case 2:z^=(255&u.charCodeAt(G+1))<<8;case 1:I^=z=(65535&(z=(z=(65535&(z^=255&u.charCodeAt(G)))*O+(((z>>>16)*O&65535)<<16)&4294967295)<<15|z>>>17))*q+(((z>>>16)*q&65535)<<16)&4294967295}return I^=u.length,I=2246822507*(65535&(I^=I>>>16))+((2246822507*(I>>>16)&65535)<<16)&4294967295,I=3266489909*(65535&(I^=I>>>13))+((3266489909*(I>>>16)&65535)<<16)&4294967295,(I^=I>>>16)>>>0}),kc.exports),s=(ho||(ho=1,qc.exports=function(u,m){for(var y,S=u.length,I=m^S,C=0;S>=4;)y=1540483477*(65535&(y=255&u.charCodeAt(C)|(255&u.charCodeAt(++C))<<8|(255&u.charCodeAt(++C))<<16|(255&u.charCodeAt(++C))<<24))+((1540483477*(y>>>16)&65535)<<16),I=1540483477*(65535&I)+((1540483477*(I>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),S-=4,++C;switch(S){case 3:I^=(255&u.charCodeAt(C+2))<<16;case 2:I^=(255&u.charCodeAt(C+1))<<8;case 1:I=1540483477*(65535&(I^=255&u.charCodeAt(C)))+((1540483477*(I>>>16)&65535)<<16)}return I=1540483477*(65535&(I^=I>>>13))+((1540483477*(I>>>16)&65535)<<16),(I^=I>>>15)>>>0}),qc.exports);return ml.exports=c,ml.exports.murmur3=c,ml.exports.murmur2=s,ml.exports}(),Mp=f(Ap);class th{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,u,m,y){this.ids.push(rh(s)),this.positions.push(u,m,y)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let u=rh(s),m=0,y=this.ids.length-1;for(;m<y;){let I=m+y>>1;this.ids[I]>=u?y=I:m=I+1}let S=[];for(;this.ids[m]===u;)S.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return S}static serialize(s,u){let m=new Float64Array(s.ids),y=new Uint32Array(s.positions);return Ca(m,y,0,m.length-1),u&&u.push(m.buffer,y.buffer),{ids:m,positions:y}}static deserialize(s){let u=new th;return u.ids=s.ids,u.positions=s.positions,u.indexed=!0,u}}function rh(c){let s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Mp(String(c))}function Ca(c,s,u,m){for(;u<m;){let y=c[u+m>>1],S=u-1,I=m+1;for(;;){do S++;while(c[S]<y);do I--;while(c[I]>y);if(S>=I)break;gl(c,S,I),gl(s,3*S,3*I),gl(s,3*S+1,3*I+1),gl(s,3*S+2,3*I+2)}I-u<m-I?(Ca(c,s,u,I),u=I+1):(Ca(c,s,I+1,m),m=I)}}function gl(c,s,u){let m=c[s];c[s]=c[u],c[u]=m}Ut("FeaturePositionMap",th);class la{constructor(s,u){this.gl=s.gl,this.location=u}}class Fc extends la{constructor(s,u){super(s,u),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Hi extends la{constructor(s,u){super(s,u),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class to extends la{constructor(s,u){super(s,u),this.current=$r.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}let Ms=new Float32Array(16);function Wi(c){return[Dn(255*c.r,255*c.g),Dn(255*c.b,255*c.a)]}class Hm{constructor(s,u,m){this.value=s,this.uniformNames=u.map(y=>`u_${y}`),this.type=m}setUniform(s,u,m){s.set(m.constantOr(this.value))}getBinding(s,u,m){return this.type==="color"?new to(s,u):new Fc(s,u)}}class Cp{constructor(s,u){this.uniformNames=u.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=s.tlbr}setUniform(s,u,m,y){let S=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&s.set(S)}getBinding(s,u,m){return m.substr(0,9)==="u_pattern"?new Hi(s,u):new Fc(s,u)}}class Uu{constructor(s,u,m,y){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=u.map(S=>({name:`a_${S}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(s,u,m){let y=this.paintVertexArray.length,S=this.expression.evaluate(new jn(0,m),u,{},m.canonical,[],m.formattedSection);this.paintVertexArray.resize(s),this._setPaintValue(y,s,S)}updatePaintArray(s,u,m,y,S){let I=this.expression.evaluate(new jn(0,S),m,y);this._setPaintValue(s,u,I)}_setPaintValue(s,u,m){if(this.type==="color"){let y=Wi(m);for(let S=s;S<u;S++)this.paintVertexArray.emplace(S,y[0],y[1])}else{for(let y=s;y<u;y++)this.paintVertexArray.emplace(y,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vl{constructor(s,u,m,y,S,I){this.expression=s,this.uniformNames=u.map(C=>`u_${C}_t`),this.type=m,this.useIntegerZoom=y,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=u.map(C=>({name:`a_${C}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(s,u,m){let y=this.expression.evaluate(new jn(this.zoom,m),u,{},m.canonical,[],m.formattedSection),S=this.expression.evaluate(new jn(this.zoom+1,m),u,{},m.canonical,[],m.formattedSection),I=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(I,s,y,S)}updatePaintArray(s,u,m,y,S){let I=this.expression.evaluate(new jn(this.zoom,S),m,y),C=this.expression.evaluate(new jn(this.zoom+1,S),m,y);this._setPaintValue(s,u,I,C)}_setPaintValue(s,u,m,y){if(this.type==="color"){let S=Wi(m),I=Wi(y);for(let C=s;C<u;C++)this.paintVertexArray.emplace(C,S[0],S[1],I[0],I[1])}else{for(let S=s;S<u;S++)this.paintVertexArray.emplace(S,m,y);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,u){let m=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,y=Ot(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(y)}getBinding(s,u,m){return new Fc(s,u)}}class jc{constructor(s,u,m,y,S,I){this.expression=s,this.type=u,this.useIntegerZoom=m,this.zoom=y,this.layerId=I,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(s,u,m){let y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(y,s,u.patterns&&u.patterns[this.layerId],m.imagePositions)}updatePaintArray(s,u,m,y,S){this._setPaintValues(s,u,m.patterns&&m.patterns[this.layerId],S.imagePositions)}_setPaintValues(s,u,m,y){if(!y||!m)return;let{min:S,mid:I,max:C}=m,O=y[S],q=y[I],z=y[C];if(O&&q&&z)for(let G=s;G<u;G++)this.zoomInPaintVertexArray.emplace(G,q.tl[0],q.tl[1],q.br[0],q.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],q.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,q.tl[0],q.tl[1],q.br[0],q.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],q.pixelRatio,z.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,$i.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,$i.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class XA{constructor(s,u,m){this.binders={},this._buffers=[];let y=[];for(let S in s.paint._values){if(!m(S))continue;let I=s.paint.get(S);if(!(I instanceof Gl&&Lc(I.property.specification)))continue;let C=QA(S,s.type),O=I.value,q=I.property.specification.type,z=I.property.useIntegerZoom,G=I.property.specification["property-type"],Y=G==="cross-faded"||G==="cross-faded-data-driven";if(O.kind==="constant")this.binders[S]=Y?new Cp(O.value,C):new Hm(O.value,C,q),y.push(`/u_${S}`);else if(O.kind==="source"||Y){let X=ew(S,q,"source");this.binders[S]=Y?new jc(O,q,z,u,X,s.id):new Uu(O,C,q,X),y.push(`/a_${S}`)}else{let X=ew(S,q,"composite");this.binders[S]=new vl(O,C,q,z,u,X),y.push(`/z_${S}`)}}this.cacheKey=y.sort().join("")}getMaxValue(s){let u=this.binders[s];return u instanceof Uu||u instanceof vl?u.maxValue:0}populatePaintArrays(s,u,m){for(let y in this.binders){let S=this.binders[y];(S instanceof Uu||S instanceof vl||S instanceof jc)&&S.populatePaintArray(s,u,m)}}setConstantPatternPositions(s,u){for(let m in this.binders){let y=this.binders[m];y instanceof Cp&&y.setConstantPatternPositions(s,u)}}updatePaintArrays(s,u,m,y,S){let I=!1;for(let C in s){let O=u.getPositions(C);for(let q of O){let z=m.feature(q.index);for(let G in this.binders){let Y=this.binders[G];if((Y instanceof Uu||Y instanceof vl||Y instanceof jc)&&Y.expression.isStateDependent===!0){let X=y.paint.get(G);Y.expression=X.value,Y.updatePaintArray(q.start,q.end,z,s[C],S),I=!0}}}}return I}defines(){let s=[];for(let u in this.binders){let m=this.binders[u];(m instanceof Hm||m instanceof Cp)&&s.push(...m.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return s}getBinderAttributes(){let s=[];for(let u in this.binders){let m=this.binders[u];if(m instanceof Uu||m instanceof vl)for(let y=0;y<m.paintVertexAttributes.length;y++)s.push(m.paintVertexAttributes[y].name);else if(m instanceof jc)for(let y=0;y<$i.members.length;y++)s.push($i.members[y].name)}return s}getBinderUniforms(){let s=[];for(let u in this.binders){let m=this.binders[u];if(m instanceof Hm||m instanceof Cp||m instanceof vl)for(let y of m.uniformNames)s.push(y)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,u){let m=[];for(let y in this.binders){let S=this.binders[y];if(S instanceof Hm||S instanceof Cp||S instanceof vl){for(let I of S.uniformNames)if(u[I]){let C=S.getBinding(s,u[I],I);m.push({name:I,property:y,binding:C})}}}return m}setUniforms(s,u,m,y){for(let{name:S,property:I,binding:C}of u)this.binders[I].setUniform(C,y,m.get(I),S)}updatePaintBuffers(s){this._buffers=[];for(let u in this.binders){let m=this.binders[u];if(s&&m instanceof jc){let y=s.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(m instanceof Uu||m instanceof vl)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(let u in this.binders){let m=this.binders[u];(m instanceof Uu||m instanceof vl||m instanceof jc)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(let s in this.binders){let u=this.binders[s];(u instanceof Uu||u instanceof vl||u instanceof jc)&&u.destroy()}}}class ts{constructor(s,u,m=()=>!0){this.programConfigurations={};for(let y of s)this.programConfigurations[y.id]=new XA(y,u,m);this.needsUpload=!1,this._featureMap=new th,this._bufferOffset=0}populatePaintArrays(s,u,m,y){for(let S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(s,u,y);u.id!==void 0&&this._featureMap.add(u.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,u,m,y){for(let S of m)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(s,this._featureMap,u,S,y)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(let u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}}destroy(){for(let s in this.programConfigurations)this.programConfigurations[s].destroy()}}function QA(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function ew(c,s,u){let m={color:{source:$m,composite:V},number:{source:E,composite:$m}},y=function(S){return{"line-pattern":{source:vt,composite:vt},"fill-pattern":{source:vt,composite:vt},"fill-extrusion-pattern":{source:vt,composite:vt}}[S]}(c);return y&&y[u]||m[s][u]}Ut("ConstantBinder",Hm),Ut("CrossFadedConstantBinder",Cp),Ut("SourceExpressionBinder",Uu),Ut("CrossFadedCompositeBinder",jc),Ut("CompositeExpressionBinder",vl),Ut("ProgramConfiguration",XA,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",ts);let fy=Math.pow(2,14)-1,hy=-fy-1;function zc(c){let s=Je/c.extent,u=c.loadGeometry();for(let m=0;m<u.length;m++){let y=u[m];for(let S=0;S<y.length;S++){let I=y[S],C=Math.round(I.x*s),O=Math.round(I.y*s);I.x=Ot(C,hy,fy),I.y=Ot(O,hy,fy),(C<I.x||C>I.x+1||O<I.y||O>I.y+1)&&zt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Bu(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?zc(c):[]}}let _X=-32768;function kGe(c,s,u,m,y){c.emplaceBack(_X+8*s+m,_X+8*u+y)}class oF{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Fe,this.indexArray=new Ln,this.segments=new Or,this.programConfigurations=new ts(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,m){let y=this.layers[0],S=[],I=null,C=!1,O=y.type==="heatmap";if(y.type==="circle"){let z=y;I=z.layout.get("circle-sort-key"),C=!I.isConstant(),O=O||z.paint.get("circle-pitch-alignment")==="map"}let q=O?u.subdivisionGranularity.circle:1;for(let{feature:z,id:G,index:Y,sourceLayerIndex:X}of s){let Q=this.layers[0]._featureFilter.needGeometry,re=Bu(z,Q);if(!this.layers[0]._featureFilter.filter(new jn(this.zoom,{globalState:this.globalState}),re,m))continue;let le=C?I.evaluate(re,{},m):void 0,ge={id:G,properties:z.properties,type:z.type,sourceLayerIndex:X,index:Y,geometry:Q?re.geometry:zc(z),patterns:{},sortKey:le};S.push(ge)}C&&S.sort((z,G)=>z.sortKey-G.sortKey);for(let z of S){let{geometry:G,index:Y,sourceLayerIndex:X}=z,Q=s[Y].feature;this.addFeature(z,G,Y,m,q),u.featureIndex.insert(Q,G,Y,X,this.index)}}update(s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,{imagePositions:m,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,yi),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,u,m,y,S=1){let I;switch(S){case 1:I=[0,7];break;case 3:I=[0,2,5,7];break;case 5:I=[0,1,3,4,6,7];break;case 7:I=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}let C=I.length;for(let O of u)for(let q of O){let z=q.x,G=q.y;if(z<0||z>=Je||G<0||G>=Je)continue;let Y=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,s.sortKey),X=Y.vertexLength;for(let Q=0;Q<C;Q++)for(let re=0;re<C;re++)kGe(this.layoutVertexArray,z,G,I[re],I[Q]);for(let Q=0;Q<C-1;Q++)for(let re=0;re<C-1;re++){let le=X+Q*C+re,ge=X+(Q+1)*C+re;this.indexArray.emplaceBack(le,ge+1,le+1),this.indexArray.emplaceBack(le,ge,ge+1)}Y.vertexLength+=C*C,Y.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:{},canonical:y,globalState:this.globalState})}}function xX(c,s){for(let u=0;u<c.length;u++)if(py(s,c[u]))return!0;for(let u=0;u<s.length;u++)if(py(c,s[u]))return!0;return!!aF(c,s)}function qGe(c,s,u){return!!py(c,s)||!!sF(s,c,u)}function bX(c,s){if(c.length===1)return EX(s,c[0]);for(let u=0;u<s.length;u++){let m=s[u];for(let y=0;y<m.length;y++)if(py(c,m[y]))return!0}for(let u=0;u<c.length;u++)if(EX(s,c[u]))return!0;for(let u=0;u<s.length;u++)if(aF(c,s[u]))return!0;return!1}function FGe(c,s,u){if(c.length>1){if(aF(c,s))return!0;for(let m=0;m<s.length;m++)if(sF(s[m],c,u))return!0}for(let m=0;m<c.length;m++)if(sF(c[m],s,u))return!0;return!1}function aF(c,s){if(c.length===0||s.length===0)return!1;for(let u=0;u<c.length-1;u++){let m=c[u],y=c[u+1];for(let S=0;S<s.length-1;S++)if(jGe(m,y,s[S],s[S+1]))return!0}return!1}function jGe(c,s,u,m){return Pt(c,u,m)!==Pt(s,u,m)&&Pt(c,s,u)!==Pt(c,s,m)}function sF(c,s,u){let m=u*u;if(s.length===1)return c.distSqr(s[0])<m;for(let y=1;y<s.length;y++)if(wX(c,s[y-1],s[y])<m)return!0;return!1}function wX(c,s,u){let m=s.distSqr(u);if(m===0)return c.distSqr(s);let y=((c.x-s.x)*(u.x-s.x)+(c.y-s.y)*(u.y-s.y))/m;return c.distSqr(y<0?s:y>1?u:u.sub(s)._mult(y)._add(s))}function EX(c,s){let u,m,y,S=!1;for(let I=0;I<c.length;I++){u=c[I];for(let C=0,O=u.length-1;C<u.length;O=C++)m=u[C],y=u[O],m.y>s.y!=y.y>s.y&&s.x<(y.x-m.x)*(s.y-m.y)/(y.y-m.y)+m.x&&(S=!S)}return S}function py(c,s){let u=!1;for(let m=0,y=c.length-1;m<c.length;y=m++){let S=c[m],I=c[y];S.y>s.y!=I.y>s.y&&s.x<(I.x-S.x)*(s.y-S.y)/(I.y-S.y)+S.x&&(u=!u)}return u}function zGe(c,s,u){let m=u[0],y=u[2];if(c.x<m.x&&s.x<m.x||c.x>y.x&&s.x>y.x||c.y<m.y&&s.y<m.y||c.y>y.y&&s.y>y.y)return!1;let S=Pt(c,s,u[0]);return S!==Pt(c,s,u[1])||S!==Pt(c,s,u[2])||S!==Pt(c,s,u[3])}function tw(c,s,u){let m=s.paint.get(c).value;return m.kind==="constant"?m.value:u.programConfigurations.get(s.id).getMaxValue(c)}function JA(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function eM(c,s,u,m,y){if(!s[0]&&!s[1])return c;let S=l.convert(s)._mult(y);u==="viewport"&&S._rotate(-m);let I=[];for(let C=0;C<c.length;C++)I.push(c[C].sub(S));return I}let SX,TX;Ut("CircleBucket",oF,{omit:["layers"]});var UGe={get paint(){return TX=TX||new aa({"circle-radius":new lr(xe.paint_circle["circle-radius"]),"circle-color":new lr(xe.paint_circle["circle-color"]),"circle-blur":new lr(xe.paint_circle["circle-blur"]),"circle-opacity":new lr(xe.paint_circle["circle-opacity"]),"circle-translate":new Kt(xe.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new lr(xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new lr(xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new lr(xe.paint_circle["circle-stroke-opacity"])})},get layout(){return SX=SX||new aa({"circle-sort-key":new lr(xe.layout_circle["circle-sort-key"])})}};class BGe extends As{constructor(s){super(s,UGe)}createBucket(s){return new oF(s)}queryRadius(s){let u=s;return tw("circle-radius",this,u)+tw("circle-stroke-width",this,u)+JA(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:m,geometry:y,transform:S,pixelsToTileUnits:I,unwrappedTileID:C,getElevation:O}){let q=eM(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,I),z=this.paint.get("circle-radius").evaluate(u,m)+this.paint.get("circle-stroke-width").evaluate(u,m),G=this.paint.get("circle-pitch-alignment")==="map",Y=G?q:function(Q,re,le,ge){return Q.map(ke=>IX(ke,re,le,ge))}(q,S,C,O),X=G?z*I:z;for(let Q of y)for(let re of Q){let le=G?re:IX(re,S,C,O),ge=X,ke=S.projectTileCoordinates(re.x,re.y,C,O).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ge*=ke/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ge*=S.cameraToCenterDistance/ke),qGe(Y,le,ge))return!0}return!1}}function IX(c,s,u,m){let y=s.projectTileCoordinates(c.x,c.y,u,m).point;return new l((.5*y.x+.5)*s.width,(.5*-y.y+.5)*s.height)}class AX extends oF{}let MX;Ut("HeatmapBucket",AX,{omit:["layers"]});var VGe={get paint(){return MX=MX||new aa({"heatmap-radius":new lr(xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new lr(xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new sy(xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(xe.paint_heatmap["heatmap-opacity"])})}};function lF(c,{width:s,height:u},m,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==s*u*m)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${s*u*m}`)}else y=new Uint8Array(s*u*m);return c.width=s,c.height=u,c.data=y,c}function CX(c,{width:s,height:u},m){if(s===c.width&&u===c.height)return;let y=lF({},{width:s,height:u},m);uF(c,y,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,u)},m),c.width=s,c.height=u,c.data=y.data}function uF(c,s,u,m,y,S){if(y.width===0||y.height===0)return s;if(y.width>c.width||y.height>c.height||u.x>c.width-y.width||u.y>c.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>s.width||y.height>s.height||m.x>s.width-y.width||m.y>s.height-y.height)throw new RangeError("out of range destination coordinates for image copy");let I=c.data,C=s.data;if(I===C)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<y.height;O++){let q=((u.y+O)*c.width+u.x)*S,z=((m.y+O)*s.width+m.x)*S;for(let G=0;G<y.width*S;G++)C[z+G]=I[q+G]}return s}class rw{constructor(s,u){lF(this,s,1,u)}resize(s){CX(this,s,1)}clone(){return new rw({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,m,y,S){uF(s,u,m,y,S,1)}}class rs{constructor(s,u){lF(this,s,4,u)}resize(s){CX(this,s,4)}replace(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new rs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,u,m,y,S){uF(s,u,m,y,S,4)}setPixel(s,u,m){let y=4*(s*this.width+u);this.data[y+0]=Math.round(255*m.r/m.a),this.data[y+1]=Math.round(255*m.g/m.a),this.data[y+2]=Math.round(255*m.b/m.a),this.data[y+3]=Math.round(255*m.a)}}function PX(c){let s={},u=c.resolution||256,m=c.clips?c.clips.length:1,y=c.image||new rs({width:u,height:m});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);let S=(I,C,O)=>{s[c.evaluationKey]=O;let q=c.expression.evaluate(s);y.setPixel(I/4/u,C/4,q)};if(c.clips)for(let I=0,C=0;I<m;++I,C+=4*u)for(let O=0,q=0;O<u;O++,q+=4){let z=O/(u-1),{start:G,end:Y}=c.clips[I];S(C,q,G*(1-z)+Y*z)}else for(let I=0,C=0;I<u;I++,C+=4)S(0,C,I/(u-1));return y}Ut("AlphaImage",rw),Ut("RGBAImage",rs);let cF="big-fb";class GGe extends As{createBucket(s){return new AX(s)}constructor(s){super(s,VGe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=PX({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(cF)&&this.heatmapFbos.delete(cF)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let RX;var $Ge={get paint(){return RX=RX||new aa({"hillshade-illumination-direction":new Kt(xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Kt(xe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Kt(xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(xe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Kt(xe.paint_hillshade["hillshade-method"])})}};class HGe extends As{constructor(s){super(s,$Ge),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,m=this.paint.get("hillshade-highlight-color").values,y=this.paint.get("hillshade-shadow-color").values,S=Math.max(s.length,u.length,m.length,y.length);s=s.concat(Array(S-s.length).fill(s.at(-1))),u=u.concat(Array(S-u.length).fill(u.at(-1))),m=m.concat(Array(S-m.length).fill(m.at(-1))),y=y.concat(Array(S-y.length).fill(y.at(-1)));let I=u.map(br);return{directionRadians:s.map(br),altitudeRadians:I,shadowColor:y,highlightColor:m}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let OX;var WGe={get paint(){return OX=OX||new aa({"color-relief-opacity":new Kt(xe["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new sy(xe["paint_color-relief"]["color-relief-color"])})}};class fF{constructor(s,u,m,y){this.context=s,this.format=m,this.texture=s.gl.createTexture(),this.update(u,y)}update(s,u,m){let{width:y,height:S}=s,I=!(this.size&&this.size[0]===y&&this.size[1]===S||m),{context:C}=this,{gl:O}=C;if(this.useMipmap=!!(u&&u.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!u||u.premultiply!==!1)),I)this.size=[y,S],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||Gt(s)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,s):O.texImage2D(O.TEXTURE_2D,0,this.format,y,S,0,this.format,O.UNSIGNED_BYTE,s.data);else{let{x:q,y:z}=m||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||Gt(s)?O.texSubImage2D(O.TEXTURE_2D,0,q,z,O.RGBA,O.UNSIGNED_BYTE,s):O.texSubImage2D(O.TEXTURE_2D,0,q,z,y,S,O.RGBA,O.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,u,m){let{context:y}=this,{gl:S}=y;S.bindTexture(S.TEXTURE_2D,this.texture),m!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=S.LINEAR),s!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,s),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,m||s),this.filter=s),u!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class LX{constructor(s,u,m,y=1,S=1,I=1,C=0){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void zt(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;let O=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=S,this.blueFactor=I,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let q=0;q<O;q++)this.data[this._idx(-1,q)]=this.data[this._idx(0,q)],this.data[this._idx(O,q)]=this.data[this._idx(O-1,q)],this.data[this._idx(q,-1)]=this.data[this._idx(q,0)],this.data[this._idx(q,O)]=this.data[this._idx(q,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let q=0;q<O;q++)for(let z=0;z<O;z++){let G=this.get(q,z);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(s,u){let m=new Uint8Array(this.data.buffer),y=4*this._idx(s,u);return this.unpack(m[y],m[y+1],m[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)}unpack(s,u,m){return s*this.redFactor+u*this.greenFactor+m*this.blueFactor-this.baseShift}pack(s){return DX(s,this.getUnpackVector())}getPixels(){return new rs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,u,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let y=u*this.dim,S=u*this.dim+this.dim,I=m*this.dim,C=m*this.dim+this.dim;switch(u){case-1:y=S-1;break;case 1:S=y+1}switch(m){case-1:I=C-1;break;case 1:C=I+1}let O=-u*this.dim,q=-m*this.dim;for(let z=I;z<C;z++)for(let G=y;G<S;G++)this.data[this._idx(G,z)]=s.data[this._idx(G+O,z+q)]}}function DX(c,s){let u=s[0],m=s[1],y=s[2],S=s[3],I=Math.min(u,m,y),C=Math.round((c+S)/I);return{r:Math.floor(C*I/u)%256,g:Math.floor(C*I/m)%256,b:Math.floor(C*I/y)%256}}Ut("DEMData",LX);class ZGe extends As{constructor(s){super(s,WGe)}_createColorRamp(s){let u={elevationStops:[],colorStops:[]},m=this._transitionablePaint._values["color-relief-color"].value.expression;if(m instanceof km&&m._styleExpression.expression instanceof Mo){this.colorRampExpression=m;let I=m._styleExpression.expression;u.elevationStops=I.labels,u.colorStops=[];for(let C of u.elevationStops)u.colorStops.push(I.evaluate({globals:{elevation:C}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[$r.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=s)return u;let y={elevationStops:[],colorStops:[]},S=(u.elevationStops.length-1)/(s-1);for(let I=0;I<u.elevationStops.length-.5;I+=S)y.elevationStops.push(u.elevationStops[Math.round(I)]),y.colorStops.push(u.colorStops[Math.round(I)]);return zt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),y}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(s,u,m){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let y=this._createColorRamp(u),S=new rs({width:y.colorStops.length,height:1}),I=new rs({width:y.colorStops.length,height:1});for(let C=0;C<y.elevationStops.length;C++){let O=DX(y.elevationStops[C],m);I.setPixel(0,C,new $r(O.r/255,O.g/255,O.b/255,1)),S.setPixel(0,C,y.colorStops[C])}return this.colorRampTextures={elevationTexture:new fF(s,I,s.gl.RGBA),colorTexture:new fF(s,S,s.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}let YGe=Ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:KGe}=YGe;function hF(c,s,u){let m=u.patternDependencies,y=!1;for(let S of s){let I=S.paint.get(`${c}-pattern`);I.isConstant()||(y=!0);let C=I.constantOr(null);C&&(y=!0,m[C.to]=!0,m[C.from]=!0)}return y}function pF(c,s,u,m,y){let{zoom:S,globalState:I}=m,C=y.patternDependencies;for(let O of s){let q=O.paint.get(`${c}-pattern`).value;if(q.kind!=="constant"){let z=q.evaluate({zoom:S-1,globalState:I},u,{},y.availableImages),G=q.evaluate({zoom:S,globalState:I},u,{},y.availableImages),Y=q.evaluate({zoom:S+1,globalState:I},u,{},y.availableImages);z=z&&z.name?z.name:z,G=G&&G.name?G.name:G,Y=Y&&Y.name?Y.name:Y,C[z]=!0,C[G]=!0,C[Y]=!0,u.patterns[O.id]={min:z,mid:G,max:Y}}}return u}function NX(c,s,u,m,y){let S;if(y===function(I,C,O,q){let z=0;for(let G=C,Y=O-q;G<O;G+=q)z+=(I[Y]-I[G])*(I[G+1]+I[Y+1]),Y=G;return z}(c,s,u,m)>0)for(let I=s;I<u;I+=m)S=jX(I/m|0,c[I],c[I+1],S);else for(let I=u-m;I>=s;I-=m)S=jX(I/m|0,c[I],c[I+1],S);return S&&dy(S,S.next)&&(aw(S),S=S.next),S}function Wm(c,s){if(!c)return c;s||(s=c);let u,m=c;do if(u=!1,m.steiner||!dy(m,m.next)&&Fi(m.prev,m,m.next)!==0)m=m.next;else{if(aw(m),m=s=m.prev,m===m.next)break;u=!0}while(u||m!==s);return s}function nw(c,s,u,m,y,S,I){if(!c)return;!I&&S&&function(O,q,z,G){let Y=O;do Y.z===0&&(Y.z=dF(Y.x,Y.y,q,z,G)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==O);Y.prevZ.nextZ=null,Y.prevZ=null,function(X){let Q,re=1;do{let le,ge=X;X=null;let ke=null;for(Q=0;ge;){Q++;let Te=ge,Me=0;for(let et=0;et<re&&(Me++,Te=Te.nextZ,Te);et++);let $e=re;for(;Me>0||$e>0&&Te;)Me!==0&&($e===0||!Te||ge.z<=Te.z)?(le=ge,ge=ge.nextZ,Me--):(le=Te,Te=Te.nextZ,$e--),ke?ke.nextZ=le:X=le,le.prevZ=ke,ke=le;ge=Te}ke.nextZ=null,re*=2}while(Q>1)}(Y)}(c,m,y,S);let C=c;for(;c.prev!==c.next;){let O=c.prev,q=c.next;if(S?QGe(c,m,y,S):XGe(c))s.push(O.i,c.i,q.i),aw(c),c=q.next,C=q.next;else if((c=q)===C){I?I===1?nw(c=JGe(Wm(c),s),s,u,m,y,S,2):I===2&&e6e(c,s,u,m,y,S):nw(Wm(c),s,u,m,y,S,1);break}}}function XGe(c){let s=c.prev,u=c,m=c.next;if(Fi(s,u,m)>=0)return!1;let y=s.x,S=u.x,I=m.x,C=s.y,O=u.y,q=m.y,z=Math.min(y,S,I),G=Math.min(C,O,q),Y=Math.max(y,S,I),X=Math.max(C,O,q),Q=m.next;for(;Q!==s;){if(Q.x>=z&&Q.x<=Y&&Q.y>=G&&Q.y<=X&&iw(y,C,S,O,I,q,Q.x,Q.y)&&Fi(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function QGe(c,s,u,m){let y=c.prev,S=c,I=c.next;if(Fi(y,S,I)>=0)return!1;let C=y.x,O=S.x,q=I.x,z=y.y,G=S.y,Y=I.y,X=Math.min(C,O,q),Q=Math.min(z,G,Y),re=Math.max(C,O,q),le=Math.max(z,G,Y),ge=dF(X,Q,s,u,m),ke=dF(re,le,s,u,m),Te=c.prevZ,Me=c.nextZ;for(;Te&&Te.z>=ge&&Me&&Me.z<=ke;){if(Te.x>=X&&Te.x<=re&&Te.y>=Q&&Te.y<=le&&Te!==y&&Te!==I&&iw(C,z,O,G,q,Y,Te.x,Te.y)&&Fi(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,Me.x>=X&&Me.x<=re&&Me.y>=Q&&Me.y<=le&&Me!==y&&Me!==I&&iw(C,z,O,G,q,Y,Me.x,Me.y)&&Fi(Me.prev,Me,Me.next)>=0))return!1;Me=Me.nextZ}for(;Te&&Te.z>=ge;){if(Te.x>=X&&Te.x<=re&&Te.y>=Q&&Te.y<=le&&Te!==y&&Te!==I&&iw(C,z,O,G,q,Y,Te.x,Te.y)&&Fi(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;Me&&Me.z<=ke;){if(Me.x>=X&&Me.x<=re&&Me.y>=Q&&Me.y<=le&&Me!==y&&Me!==I&&iw(C,z,O,G,q,Y,Me.x,Me.y)&&Fi(Me.prev,Me,Me.next)>=0)return!1;Me=Me.nextZ}return!0}function JGe(c,s){let u=c;do{let m=u.prev,y=u.next.next;!dy(m,y)&&qX(m,u,u.next,y)&&ow(m,y)&&ow(y,m)&&(s.push(m.i,u.i,y.i),aw(u),aw(u.next),u=c=y),u=u.next}while(u!==c);return Wm(u)}function e6e(c,s,u,m,y,S){let I=c;do{let C=I.next.next;for(;C!==I.prev;){if(I.i!==C.i&&o6e(I,C)){let O=FX(I,C);return I=Wm(I,I.next),O=Wm(O,O.next),nw(I,s,u,m,y,S,0),void nw(O,s,u,m,y,S,0)}C=C.next}I=I.next}while(I!==c)}function t6e(c,s){let u=c.x-s.x;return u===0&&(u=c.y-s.y,u===0)&&(u=(c.next.y-c.y)/(c.next.x-c.x)-(s.next.y-s.y)/(s.next.x-s.x)),u}function r6e(c,s){let u=function(y,S){let I=S,C=y.x,O=y.y,q,z=-1/0;if(dy(y,I))return I;do{if(dy(y,I.next))return I.next;if(O<=I.y&&O>=I.next.y&&I.next.y!==I.y){let re=I.x+(O-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(re<=C&&re>z&&(z=re,q=I.x<I.next.x?I:I.next,re===C))return q}I=I.next}while(I!==S);if(!q)return null;let G=q,Y=q.x,X=q.y,Q=1/0;I=q;do{if(C>=I.x&&I.x>=Y&&C!==I.x&&kX(O<X?C:z,O,Y,X,O<X?z:C,O,I.x,I.y)){let re=Math.abs(O-I.y)/(C-I.x);ow(I,y)&&(re<Q||re===Q&&(I.x>q.x||I.x===q.x&&n6e(q,I)))&&(q=I,Q=re)}I=I.next}while(I!==G);return q}(c,s);if(!u)return s;let m=FX(u,c);return Wm(m,m.next),Wm(u,u.next)}function n6e(c,s){return Fi(c.prev,c,s.prev)<0&&Fi(s.next,c,c.next)<0}function dF(c,s,u,m,y){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*y|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function i6e(c){let s=c,u=c;do(s.x<u.x||s.x===u.x&&s.y<u.y)&&(u=s),s=s.next;while(s!==c);return u}function kX(c,s,u,m,y,S,I,C){return(y-I)*(s-C)>=(c-I)*(S-C)&&(c-I)*(m-C)>=(u-I)*(s-C)&&(u-I)*(S-C)>=(y-I)*(m-C)}function iw(c,s,u,m,y,S,I,C){return!(c===I&&s===C)&&kX(c,s,u,m,y,S,I,C)}function o6e(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(u,m){let y=u;do{if(y.i!==u.i&&y.next.i!==u.i&&y.i!==m.i&&y.next.i!==m.i&&qX(y,y.next,u,m))return!0;y=y.next}while(y!==u);return!1}(c,s)&&(ow(c,s)&&ow(s,c)&&function(u,m){let y=u,S=!1,I=(u.x+m.x)/2,C=(u.y+m.y)/2;do y.y>C!=y.next.y>C&&y.next.y!==y.y&&I<(y.next.x-y.x)*(C-y.y)/(y.next.y-y.y)+y.x&&(S=!S),y=y.next;while(y!==u);return S}(c,s)&&(Fi(c.prev,c,s.prev)||Fi(c,s.prev,s))||dy(c,s)&&Fi(c.prev,c,c.next)>0&&Fi(s.prev,s,s.next)>0)}function Fi(c,s,u){return(s.y-c.y)*(u.x-s.x)-(s.x-c.x)*(u.y-s.y)}function dy(c,s){return c.x===s.x&&c.y===s.y}function qX(c,s,u,m){let y=rM(Fi(c,s,u)),S=rM(Fi(c,s,m)),I=rM(Fi(u,m,c)),C=rM(Fi(u,m,s));return y!==S&&I!==C||!(y!==0||!tM(c,u,s))||!(S!==0||!tM(c,m,s))||!(I!==0||!tM(u,c,m))||!(C!==0||!tM(u,s,m))}function tM(c,s,u){return s.x<=Math.max(c.x,u.x)&&s.x>=Math.min(c.x,u.x)&&s.y<=Math.max(c.y,u.y)&&s.y>=Math.min(c.y,u.y)}function rM(c){return c>0?1:c<0?-1:0}function ow(c,s){return Fi(c.prev,c,c.next)<0?Fi(c,s,c.next)>=0&&Fi(c,c.prev,s)>=0:Fi(c,s,c.prev)<0||Fi(c,c.next,s)<0}function FX(c,s){let u=mF(c.i,c.x,c.y),m=mF(s.i,s.x,s.y),y=c.next,S=s.prev;return c.next=s,s.prev=c,u.next=y,y.prev=u,m.next=u,u.prev=m,S.next=m,m.prev=S,m}function jX(c,s,u,m){let y=mF(c,s,u);return m?(y.next=m.next,y.prev=m,m.next.prev=y,m.next=y):(y.prev=y,y.next=y),y}function aw(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function mF(c,s,u){return{i:c,x:s,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class my{constructor(s,u){if(u>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=u}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class nM{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}nM.noSubdivision=new nM({fill:new my(0,0),line:new my(0,0),tile:new my(0,0),stencil:new my(0,0),circle:1}),Ut("SubdivisionGranularityExpression",my),Ut("SubdivisionGranularitySetting",nM);let gy=-32768,sw=32767;class a6e{constructor(s,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=Je/s,this._canonical=u}_getKey(s,u){return(s+=32768)<<16|u+32768}_vertexToIndex(s,u){if(s<-32768||u<-32768||s>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let m=0|Math.round(s),y=0|Math.round(u),S=this._getKey(m,y);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);let I=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,I),this._vertexBuffer.push(m,y),I}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(y,S){let I=[];for(let C=0;C<S.length;C+=3){let O=S[C],q=S[C+1],z=S[C+2],G=y[2*O],Y=y[2*O+1];(y[2*q]-G)*(y[2*z+1]-Y)-(y[2*q+1]-Y)*(y[2*z]-G)>0?(I.push(O),I.push(z),I.push(q)):(I.push(O),I.push(q),I.push(z))}return I}(this._vertexBuffer,s);let u=[],m=s.length;for(let y=0;y<m;y+=3){let S=[s[y+0],s[y+1],s[y+2]],I=[this._vertexBuffer[2*s[y+0]+0],this._vertexBuffer[2*s[y+0]+1],this._vertexBuffer[2*s[y+1]+0],this._vertexBuffer[2*s[y+1]+1],this._vertexBuffer[2*s[y+2]+0],this._vertexBuffer[2*s[y+2]+1]],C=1/0,O=1/0,q=-1/0,z=-1/0;for(let re=0;re<3;re++){let le=I[2*re],ge=I[2*re+1];C=Math.min(C,le),q=Math.max(q,le),O=Math.min(O,ge),z=Math.max(z,ge)}if(C===q||O===z)continue;let G=Math.floor(C/this._granularityCellSize),Y=Math.ceil(q/this._granularityCellSize),X=Math.floor(O/this._granularityCellSize),Q=Math.ceil(z/this._granularityCellSize);if(G!==Y||X!==Q)for(let re=X;re<Q;re++){let le=this._scanlineGenerateVertexRingForCellRow(re,I,S);s6e(this._vertexBuffer,le,u)}else u.push(...S)}return u}_scanlineGenerateVertexRingForCellRow(s,u,m){let y=s*this._granularityCellSize,S=y+this._granularityCellSize,I=[];for(let C=0;C<3;C++){let O=u[2*C],q=u[2*C+1],z=u[2*(C+1)%6],G=u[(2*(C+1)+1)%6],Y=u[2*(C+2)%6],X=u[(2*(C+2)+1)%6],Q=z-O,re=G-q,le=Q===0,ge=re===0,ke=(y-q)/re,Te=(S-q)/re,Me=Math.min(ke,Te),$e=Math.max(ke,Te);if(!ge&&(Me>=1||$e<=0)||ge&&(q<y||q>S)){G>=y&&G<=S&&I.push(m[(C+1)%3]);continue}!ge&&Me>0&&I.push(this._vertexToIndex(O+Q*Me,q+re*Me));let et=O+Q*Math.max(Me,0),ht=O+Q*Math.min($e,1);le||this._generateIntraEdgeVertices(I,O,q,z,G,et,ht),!ge&&$e<1&&I.push(this._vertexToIndex(O+Q*$e,q+re*$e)),(ge||G>=y&&G<=S)&&I.push(m[(C+1)%3]),!ge&&(G<=y||G>=S)&&this._generateInterEdgeVertices(I,O,q,z,G,Y,X,ht,y,S)}return I}_generateIntraEdgeVertices(s,u,m,y,S,I,C){let O=y-u,q=S-m,z=q===0,G=z?Math.min(u,y):Math.min(I,C),Y=z?Math.max(u,y):Math.max(I,C),X=Math.floor(G/this._granularityCellSize)+1,Q=Math.ceil(Y/this._granularityCellSize)-1;if(z?u<y:I<C)for(let re=X;re<=Q;re++){let le=re*this._granularityCellSize;s.push(this._vertexToIndex(le,m+q*(le-u)/O))}else for(let re=Q;re>=X;re--){let le=re*this._granularityCellSize;s.push(this._vertexToIndex(le,m+q*(le-u)/O))}}_generateInterEdgeVertices(s,u,m,y,S,I,C,O,q,z){let G=S-m,Y=I-y,X=C-S,Q=(q-S)/X,re=(z-S)/X,le=Math.min(Q,re),ge=Math.max(Q,re),ke=y+Y*le,Te=Math.floor(Math.min(ke,O)/this._granularityCellSize)+1,Me=Math.ceil(Math.max(ke,O)/this._granularityCellSize)-1,$e=O<ke,et=X===0;if(et&&(C===q||C===z))return;if(et||le>=1||ge<=0){let Rt=m-C,xt=I+(u-I)*Math.min((q-C)/Rt,(z-C)/Rt);Te=Math.floor(Math.min(xt,O)/this._granularityCellSize)+1,Me=Math.ceil(Math.max(xt,O)/this._granularityCellSize)-1,$e=O<xt}let ht=G>0?z:q;if($e)for(let Rt=Te;Rt<=Me;Rt++)s.push(this._vertexToIndex(Rt*this._granularityCellSize,ht));else for(let Rt=Me;Rt>=Te;Rt--)s.push(this._vertexToIndex(Rt*this._granularityCellSize,ht))}_generateOutline(s){let u=[];for(let m of s){let y=Zm(m,this._granularity,!0),S=this._pointArrayToIndices(y),I=[];for(let C=1;C<S.length;C++)I.push(S[C-1]),I.push(S[C]);u.push(I)}return u}_handlePoles(s){let u=!1,m=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(m=!0)),(u||m)&&this._fillPoles(s,u,m)}_ensureNoPoleVertices(){let s=this._vertexBuffer;for(let u=0;u<s.length;u+=2){let m=s[u+1];m===gy&&(s[u+1]=-32767),m===sw&&(s[u+1]=32766)}}_generatePoleQuad(s,u,m,y,S,I){y>S!=(I===gy)?(s.push(u),s.push(m),s.push(this._vertexToIndex(y,I)),s.push(m),s.push(this._vertexToIndex(S,I)),s.push(this._vertexToIndex(y,I))):(s.push(m),s.push(u),s.push(this._vertexToIndex(y,I)),s.push(this._vertexToIndex(S,I)),s.push(m),s.push(this._vertexToIndex(y,I)))}_fillPoles(s,u,m){let y=this._vertexBuffer,S=Je,I=s.length;for(let C=2;C<I;C+=3){let O=s[C-2],q=s[C-1],z=s[C],G=y[2*O],Y=y[2*O+1],X=y[2*q],Q=y[2*q+1],re=y[2*z],le=y[2*z+1];u&&(Y===0&&Q===0&&this._generatePoleQuad(s,O,q,G,X,gy),Q===0&&le===0&&this._generatePoleQuad(s,q,z,X,re,gy),le===0&&Y===0&&this._generatePoleQuad(s,z,O,re,G,gy)),m&&(Y===S&&Q===S&&this._generatePoleQuad(s,O,q,G,X,sw),Q===S&&le===S&&this._generatePoleQuad(s,q,z,X,re,sw),le===S&&Y===S&&this._generatePoleQuad(s,z,O,re,G,sw))}}_initializeVertices(s){for(let u=0;u<s.length;u+=2)this._vertexToIndex(s[u],s[u+1])}subdividePolygonInternal(s,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:m,holeIndices:y}=function(C){let O=[],q=[];for(let z of C)if(z.length!==0){z!==C[0]&&O.push(q.length/2);for(let G=0;G<z.length;G++)q.push(z[G].x),q.push(z[G].y)}return{flattened:q,holeIndices:O}}(s),S;this._initializeVertices(m);try{let C=function(q,z,G=2){let Y=z&&z.length,X=Y?z[0]*G:q.length,Q=NX(q,0,X,G,!0),re=[];if(!Q||Q.next===Q.prev)return re;let le,ge,ke;if(Y&&(Q=function(Te,Me,$e,et){let ht=[];for(let Rt=0,xt=Me.length;Rt<xt;Rt++){let At=NX(Te,Me[Rt]*et,Rt<xt-1?Me[Rt+1]*et:Te.length,et,!1);At===At.next&&(At.steiner=!0),ht.push(i6e(At))}ht.sort(t6e);for(let Rt=0;Rt<ht.length;Rt++)$e=r6e(ht[Rt],$e);return $e}(q,z,Q,G)),q.length>80*G){le=q[0],ge=q[1];let Te=le,Me=ge;for(let $e=G;$e<X;$e+=G){let et=q[$e],ht=q[$e+1];et<le&&(le=et),ht<ge&&(ge=ht),et>Te&&(Te=et),ht>Me&&(Me=ht)}ke=Math.max(Te-le,Me-ge),ke=ke!==0?32767/ke:0}return nw(Q,re,G,le,ge,ke,0),re}(m,y),O=this._convertIndices(m,C);S=this._subdivideTrianglesScanline(O)}catch(C){console.error(C)}let I=[];return u&&(I=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:I}}_convertIndices(s,u){let m=[];for(let y=0;y<u.length;y++)m.push(this._vertexToIndex(s[2*u[y]],s[2*u[y]+1]));return m}_pointArrayToIndices(s){let u=[];for(let m=0;m<s.length;m++){let y=s[m];u.push(this._vertexToIndex(y.x,y.y))}return u}}function zX(c,s,u,m=!0){return new a6e(u,s).subdividePolygonInternal(c,m)}function Zm(c,s,u=!1){if(!c||c.length<1)return[];if(c.length<2)return[];let m=c[0],y=c[c.length-1],S=u&&(m.x!==y.x||m.y!==y.y);if(s<2)return S?[...c,c[0]]:[...c];let I=Math.floor(Je/s),C=[];C.push(new l(c[0].x,c[0].y));let O=c.length,q=S?O:O-1;for(let z=0;z<q;z++){let G=c[z],Y=z<O-1?c[z+1]:c[0],X=G.x,Q=G.y,re=Y.x,le=Y.y,ge=X!==re,ke=Q!==le;if(!ge&&!ke)continue;let Te=re-X,Me=le-Q,$e=Math.abs(Te),et=Math.abs(Me),ht=X,Rt=Q;for(;;){let At=Te>0?(Math.floor(ht/I)+1)*I:(Math.ceil(ht/I)-1)*I,Jt=Me>0?(Math.floor(Rt/I)+1)*I:(Math.ceil(Rt/I)-1)*I,Tt=Math.abs(ht-At),Mt=Math.abs(Rt-Jt),it=Math.abs(ht-re),fr=Math.abs(Rt-le),yr=ge?Tt/$e:Number.POSITIVE_INFINITY,nr=ke?Mt/et:Number.POSITIVE_INFINITY;if((it<=Tt||!ge)&&(fr<=Mt||!ke))break;if(yr<nr&&ge||!ke){ht=At,Rt+=Me*yr;let Yt=new l(ht,Math.round(Rt));C[C.length-1].x===Yt.x&&C[C.length-1].y===Yt.y||C.push(Yt)}else{ht+=Te*nr,Rt=Jt;let Yt=new l(Math.round(ht),Rt);C[C.length-1].x===Yt.x&&C[C.length-1].y===Yt.y||C.push(Yt)}}let xt=new l(re,le);C[C.length-1].x===xt.x&&C[C.length-1].y===xt.y||C.push(xt)}return C}function s6e(c,s,u){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let m=0,y=c[2*s[0]];for(let O=1;O<s.length;O++){let q=c[2*s[O]];q<y&&(y=q,m=O)}let S=s.length,I=m,C=(I+1)%S;for(;;){let O=I-1>=0?I-1:S-1,q=(C+1)%S,z=c[2*s[O]],G=c[2*s[q]],Y=c[2*s[I]],X=c[2*s[I]+1],Q=c[2*s[C]+1],re=!1;if(z<G)re=!0;else if(z>G)re=!1;else{let le=Q-X,ge=-(c[2*s[C]]-Y),ke=X<Q?1:-1;((z-Y)*le+(c[2*s[O]+1]-X)*ge)*ke>((G-Y)*le+(c[2*s[q]+1]-X)*ge)*ke&&(re=!0)}if(re){let le=s[O],ge=s[I],ke=s[C];le!==ge&&le!==ke&&ge!==ke&&u.push(ke,ge,le),I--,I<0&&(I=S-1)}else{let le=s[q],ge=s[I],ke=s[C];le!==ge&&le!==ke&&ge!==ke&&u.push(ke,ge,le),C++,C>=S&&(C=0)}if(O===q)break}}function UX(c,s,u,m,y,S,I,C,O){let q=y.length/2,z=I&&C&&O;if(q<Or.MAX_VERTEX_ARRAY_LENGTH){let G=s.prepareSegment(q,u,m),Y=G.vertexLength;for(let re=0;re<S.length;re+=3)m.emplaceBack(Y+S[re],Y+S[re+1],Y+S[re+2]);let X,Q;G.vertexLength+=q,G.primitiveLength+=S.length/3,z&&(Q=I.prepareSegment(q,u,C),X=Q.vertexLength,Q.vertexLength+=q);for(let re=0;re<y.length;re+=2)c(y[re],y[re+1]);if(z)for(let re=0;re<O.length;re++){let le=O[re];for(let ge=1;ge<le.length;ge+=2)C.emplaceBack(X+le[ge-1],X+le[ge]);Q.primitiveLength+=le.length/2}}else(function(G,Y,X,Q,re,le){let ge=[];for(let et=0;et<Q.length/2;et++)ge.push(-1);let ke={count:0},Te=0,Me=G.getOrCreateLatestSegment(Y,X),$e=Me.vertexLength;for(let et=2;et<re.length;et+=3){let ht=re[et-2],Rt=re[et-1],xt=re[et],At=ge[ht]<Te,Jt=ge[Rt]<Te,Tt=ge[xt]<Te;Me.vertexLength+((At?1:0)+(Jt?1:0)+(Tt?1:0))>Or.MAX_VERTEX_ARRAY_LENGTH&&(Me=G.createNewSegment(Y,X),Te=ke.count,At=!0,Jt=!0,Tt=!0,$e=0);let Mt=lw(ge,Q,le,ke,ht,At,Me),it=lw(ge,Q,le,ke,Rt,Jt,Me),fr=lw(ge,Q,le,ke,xt,Tt,Me);X.emplaceBack($e+Mt-Te,$e+it-Te,$e+fr-Te),Me.primitiveLength++}})(s,u,m,y,S,c),z&&function(G,Y,X,Q,re,le){let ge=[];for(let et=0;et<Q.length/2;et++)ge.push(-1);let ke={count:0},Te=0,Me=G.getOrCreateLatestSegment(Y,X),$e=Me.vertexLength;for(let et=0;et<re.length;et++){let ht=re[et];for(let Rt=1;Rt<re[et].length;Rt+=2){let xt=ht[Rt-1],At=ht[Rt],Jt=ge[xt]<Te,Tt=ge[At]<Te;Me.vertexLength+((Jt?1:0)+(Tt?1:0))>Or.MAX_VERTEX_ARRAY_LENGTH&&(Me=G.createNewSegment(Y,X),Te=ke.count,Jt=!0,Tt=!0,$e=0);let Mt=lw(ge,Q,le,ke,xt,Jt,Me),it=lw(ge,Q,le,ke,At,Tt,Me);X.emplaceBack($e+Mt-Te,$e+it-Te),Me.primitiveLength++}}}(I,u,C,y,O,c),s.forceNewSegmentOnNextPrepare(),I==null||I.forceNewSegmentOnNextPrepare()}function lw(c,s,u,m,y,S,I){if(S){let C=m.count;return u(s[2*y],s[2*y+1]),c[y]=m.count,m.count++,I.vertexLength++,C}return c[y]}class gF{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qe,this.indexArray=new Ln,this.indexArray2=new Mn,this.programConfigurations=new ts(s.layers,s.zoom),this.segments=new Or,this.segments2=new Or,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,m){this.hasPattern=hF("fill",this.layers,u);let y=this.layers[0].layout.get("fill-sort-key"),S=!y.isConstant(),I=[];for(let{feature:C,id:O,index:q,sourceLayerIndex:z}of s){let G=this.layers[0]._featureFilter.needGeometry,Y=Bu(C,G);if(!this.layers[0]._featureFilter.filter(new jn(this.zoom,{globalState:this.globalState}),Y,m))continue;let X=S?y.evaluate(Y,{},m,u.availableImages):void 0,Q={id:O,properties:C.properties,type:C.type,sourceLayerIndex:z,index:q,geometry:G?Y.geometry:zc(C),patterns:{},sortKey:X};I.push(Q)}S&&I.sort((C,O)=>C.sortKey-O.sortKey);for(let C of I){let{geometry:O,index:q,sourceLayerIndex:z}=C;if(this.hasPattern){let G=pF("fill",this.layers,C,{zoom:this.zoom,globalState:this.globalState},u);this.patternFeatures.push(G)}else this.addFeature(C,O,q,m,{},u.subdivisionGranularity);u.featureIndex.insert(s[q].feature,O,q,z,this.index)}}update(s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,{imagePositions:m,globalState:this.globalState})}addFeatures(s,u,m){for(let y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,u,m,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,KGe),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,u,m,y,S,I){for(let C of Rm(u,500)){let O=zX(C,y,I.fill.getGranularityForZoomLevel(y.z)),q=this.layoutVertexArray;UX((z,G)=>{q.emplaceBack(z,G)},this.segments,this.layoutVertexArray,this.indexArray,O.verticesFlattened,O.indicesTriangles,this.segments2,this.indexArray2,O.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:S,canonical:y,globalState:this.globalState})}}let BX,VX;Ut("FillBucket",gF,{omit:["layers","patternFeatures"]});var l6e={get paint(){return VX=VX||new aa({"fill-antialias":new Kt(xe.paint_fill["fill-antialias"]),"fill-opacity":new lr(xe.paint_fill["fill-opacity"]),"fill-color":new lr(xe.paint_fill["fill-color"]),"fill-outline-color":new lr(xe.paint_fill["fill-outline-color"]),"fill-translate":new Kt(xe.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new ay(xe.paint_fill["fill-pattern"])})},get layout(){return BX=BX||new aa({"fill-sort-key":new lr(xe.layout_fill["fill-sort-key"])})}};class u6e extends As{constructor(s){super(s,l6e)}recalculate(s,u){super.recalculate(s,u);let m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new gF(s)}queryRadius(){return JA(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:u,transform:m,pixelsToTileUnits:y}){return bX(eM(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-m.bearingInRadians,y),u)}isTileClipped(){return!0}}let c6e=Ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),f6e=Ai([{name:"a_centroid",components:2,type:"Int16"}],4),{members:h6e}=c6e;class vy{constructor(s,u,m,y,S){this.properties={},this.extent=m,this.type=0,this.id=void 0,this._pbf=s,this._geometry=-1,this._keys=y,this._values=S,s.readFields(p6e,this,u)}loadGeometry(){let s=this._pbf;s.pos=this._geometry;let u=s.readVarint()+s.pos,m=[],y,S=1,I=0,C=0,O=0;for(;s.pos<u;){if(I<=0){let q=s.readVarint();S=7&q,I=q>>3}if(I--,S===1||S===2)C+=s.readSVarint(),O+=s.readSVarint(),S===1&&(y&&m.push(y),y=[]),y&&y.push(new l(C,O));else{if(S!==7)throw new Error(`unknown command ${S}`);y&&y.push(y[0].clone())}}return y&&m.push(y),m}bbox(){let s=this._pbf;s.pos=this._geometry;let u=s.readVarint()+s.pos,m=1,y=0,S=0,I=0,C=1/0,O=-1/0,q=1/0,z=-1/0;for(;s.pos<u;){if(y<=0){let G=s.readVarint();m=7&G,y=G>>3}if(y--,m===1||m===2)S+=s.readSVarint(),I+=s.readSVarint(),S<C&&(C=S),S>O&&(O=S),I<q&&(q=I),I>z&&(z=I);else if(m!==7)throw new Error(`unknown command ${m}`)}return[C,q,O,z]}toGeoJSON(s,u,m){let y=this.extent*Math.pow(2,m),S=this.extent*s,I=this.extent*u,C=this.loadGeometry();function O(Y){return[360*(Y.x+S)/y-180,360/Math.PI*Math.atan(Math.exp((1-2*(Y.y+I)/y)*Math.PI))-90]}function q(Y){return Y.map(O)}let z;if(this.type===1){let Y=[];for(let Q of C)Y.push(Q[0]);let X=q(Y);z=Y.length===1?{type:"Point",coordinates:X[0]}:{type:"MultiPoint",coordinates:X}}else if(this.type===2){let Y=C.map(q);z=Y.length===1?{type:"LineString",coordinates:Y[0]}:{type:"MultiLineString",coordinates:Y}}else{if(this.type!==3)throw new Error("unknown feature type");{let Y=function(Q){let re=Q.length;if(re<=1)return[Q];let le=[],ge,ke;for(let Te=0;Te<re;Te++){let Me=d6e(Q[Te]);Me!==0&&(ke===void 0&&(ke=Me<0),ke===Me<0?(ge&&le.push(ge),ge=[Q[Te]]):ge&&ge.push(Q[Te]))}return ge&&le.push(ge),le}(C),X=[];for(let Q of Y)X.push(Q.map(q));z=X.length===1?{type:"Polygon",coordinates:X[0]}:{type:"MultiPolygon",coordinates:X}}}let G={type:"Feature",geometry:z,properties:this.properties};return this.id!=null&&(G.id=this.id),G}}function p6e(c,s,u){c===1?s.id=u.readVarint():c===2?function(m,y){let S=m.readVarint()+m.pos;for(;m.pos<S;){let I=y._keys[m.readVarint()],C=y._values[m.readVarint()];y.properties[I]=C}}(u,s):c===3?s.type=u.readVarint():c===4&&(s._geometry=u.pos)}function d6e(c){let s=0;for(let u,m,y=0,S=c.length,I=S-1;y<S;I=y++)u=c[y],m=c[I],s+=(m.x-u.x)*(u.y+m.y);return s}vy.types=["Unknown","Point","LineString","Polygon"];class GX{constructor(s,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(m6e,this,u),this.length=this._features.length}feature(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];let u=this._pbf.readVarint()+this._pbf.pos;return new vy(this._pbf,u,this.extent,this._keys,this._values)}}function m6e(c,s,u){c===15?s.version=u.readVarint():c===1?s.name=u.readString():c===5?s.extent=u.readVarint():c===2?s._features.push(u.pos):c===3?s._keys.push(u.readString()):c===4&&s._values.push(function(m){let y=null,S=m.readVarint()+m.pos;for(;m.pos<S;){let I=m.readVarint()>>3;y=I===1?m.readString():I===2?m.readFloat():I===3?m.readDouble():I===4?m.readVarint64():I===5?m.readVarint():I===6?m.readSVarint():I===7?m.readBoolean():null}if(y==null)throw new Error("unknown feature value");return y}(u))}class $X{constructor(s,u){this.layers=s.readFields(g6e,{},u)}}function g6e(c,s,u){if(c===3){let m=new GX(u,u.readVarint()+u.pos);m.length&&(s[m.name]=m)}}let vF=Math.pow(2,13);function uw(c,s,u,m,y,S,I,C){c.emplaceBack(s,u,2*Math.floor(m*vF)+I,y*vF*2,S*vF*2,Math.round(C))}class yF{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Ve,this.centroidVertexArray=new Ee,this.indexArray=new Ln,this.programConfigurations=new ts(s.layers,s.zoom),this.segments=new Or,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,m){this.features=[],this.hasPattern=hF("fill-extrusion",this.layers,u);for(let{feature:y,id:S,index:I,sourceLayerIndex:C}of s){let O=this.layers[0]._featureFilter.needGeometry,q=Bu(y,O);if(!this.layers[0]._featureFilter.filter(new jn(this.zoom,{globalState:this.globalState}),q,m))continue;let z={id:S,sourceLayerIndex:C,index:I,geometry:O?q.geometry:zc(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(pF("fill-extrusion",this.layers,z,{zoom:this.zoom,globalState:this.globalState},u)):this.addFeature(z,z.geometry,I,m,{},u.subdivisionGranularity),u.featureIndex.insert(y,z.geometry,I,C,this.index,!0)}}addFeatures(s,u,m){for(let y of this.features){let{geometry:S}=y;this.addFeature(y,S,y.index,u,m,s.subdivisionGranularity)}}update(s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,{imagePositions:m,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,h6e),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,f6e.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,u,m,y,S,I){for(let C of Rm(u,500)){let O={x:0,y:0,sampleCount:0},q=this.layoutVertexArray.length;this.processPolygon(O,y,s,C,I);let z=this.layoutVertexArray.length-q,G=Math.floor(O.x/O.sampleCount),Y=Math.floor(O.y/O.sampleCount);for(let X=0;X<z;X++)this.centroidVertexArray.emplaceBack(G,Y)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:S,canonical:y,globalState:this.globalState})}processPolygon(s,u,m,y,S){if(y.length<1||HX(y[0]))return;for(let G of y)G.length!==0&&v6e(s,G);let I={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=S.fill.getGranularityForZoomLevel(u.z),O=vy.types[m.type]==="Polygon";for(let G of y){if(G.length===0||HX(G))continue;let Y=Zm(G,C,O);this._generateSideFaces(Y,I)}if(!O)return;let q=zX(y,u,C,!1),z=this.layoutVertexArray;UX((G,Y)=>{uw(z,G,Y,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,q.verticesFlattened,q.indicesTriangles)}_generateSideFaces(s,u){let m=0;for(let y=1;y<s.length;y++){let S=s[y],I=s[y-1];if(y6e(S,I))continue;u.segment.vertexLength+4>Or.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let C=S.sub(I)._perp()._unit(),O=I.dist(S);m+O>32768&&(m=0),uw(this.layoutVertexArray,S.x,S.y,C.x,C.y,0,0,m),uw(this.layoutVertexArray,S.x,S.y,C.x,C.y,0,1,m),m+=O,uw(this.layoutVertexArray,I.x,I.y,C.x,C.y,0,0,m),uw(this.layoutVertexArray,I.x,I.y,C.x,C.y,0,1,m);let q=u.segment.vertexLength;this.indexArray.emplaceBack(q,q+2,q+1),this.indexArray.emplaceBack(q+1,q+2,q+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function v6e(c,s){for(let u=0;u<s.length;u++){let m=s[u];u===s.length-1&&s[0].x===m.x&&s[0].y===m.y||(c.x+=m.x,c.y+=m.y,c.sampleCount++)}}function y6e(c,s){return c.x===s.x&&(c.x<0||c.x>Je)||c.y===s.y&&(c.y<0||c.y>Je)}function HX(c){return c.every(s=>s.x<0)||c.every(s=>s.x>Je)||c.every(s=>s.y<0)||c.every(s=>s.y>Je)}let WX;Ut("FillExtrusionBucket",yF,{omit:["layers","features"]});var _6e={get paint(){return WX=WX||new aa({"fill-extrusion-opacity":new Kt(xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new lr(xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ay(xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new lr(xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new lr(xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kt(xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class x6e extends As{constructor(s){super(s,_6e)}createBucket(s){return new yF(s)}queryRadius(){return JA(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:m,geometry:y,transform:S,pixelsToTileUnits:I,pixelPosMatrix:C}){let O=eM(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,I),q=this.paint.get("fill-extrusion-height").evaluate(u,m),z=this.paint.get("fill-extrusion-base").evaluate(u,m),G=function(X,Q){let re=[];for(let le of X){let ge=[le.x,le.y,0,1];Ne(ge,ge,Q),re.push(new l(ge[0]/ge[3],ge[1]/ge[3]))}return re}(O,C),Y=function(X,Q,re,le){let ge=[],ke=[],Te=le[8]*Q,Me=le[9]*Q,$e=le[10]*Q,et=le[11]*Q,ht=le[8]*re,Rt=le[9]*re,xt=le[10]*re,At=le[11]*re;for(let Jt of X){let Tt=[],Mt=[];for(let it of Jt){let fr=it.x,yr=it.y,nr=le[0]*fr+le[4]*yr+le[12],Yt=le[1]*fr+le[5]*yr+le[13],en=le[2]*fr+le[6]*yr+le[14],_i=le[3]*fr+le[7]*yr+le[15],ro=en+$e,Wo=_i+et,_l=nr+ht,ns=Yt+Rt,Co=en+xt,ui=_i+At,mo=new l((nr+Te)/Wo,(Yt+Me)/Wo);mo.z=ro/Wo,Tt.push(mo);let Po=new l(_l/ui,ns/ui);Po.z=Co/ui,Mt.push(Po)}ge.push(Tt),ke.push(Mt)}return[ge,ke]}(y,z,q,C);return function(X,Q,re){let le=1/0;bX(re,Q)&&(le=ZX(re,Q[0]));for(let ge=0;ge<Q.length;ge++){let ke=Q[ge],Te=X[ge];for(let Me=0;Me<ke.length-1;Me++){let $e=ke[Me],et=[$e,ke[Me+1],Te[Me+1],Te[Me],$e];xX(re,et)&&(le=Math.min(le,ZX(re,et)))}}return le!==1/0&&le}(Y[0],Y[1],G)}}function cw(c,s){return c.x*s.x+c.y*s.y}function ZX(c,s){if(c.length===1){let u=0,m=s[u++],y;for(;!y||m.equals(y);)if(y=s[u++],!y)return 1/0;for(;u<s.length;u++){let S=s[u],I=c[0],C=y.sub(m),O=S.sub(m),q=I.sub(m),z=cw(C,C),G=cw(C,O),Y=cw(O,O),X=cw(q,C),Q=cw(q,O),re=z*Y-G*G,le=(Y*X-G*Q)/re,ge=(z*Q-G*X)/re,ke=m.z*(1-le-ge)+y.z*le+S.z*ge;if(isFinite(ke))return ke}return 1/0}{let u=1/0;for(let m of s)u=Math.min(u,m.z);return u}}let b6e=Ai([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:w6e}=b6e,E6e=Ai([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:S6e}=E6e,T6e=Math.cos(Math.PI/180*37.5),YX=Math.pow(2,14)/.5;class _F{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(u=>u.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Ge,this.layoutVertexArray2=new Xe,this.indexArray=new Ln,this.programConfigurations=new ts(s.layers,s.zoom),this.segments=new Or,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(s,u,m){this.hasPattern=hF("line",this.layers,u);let y=this.layers[0].layout.get("line-sort-key"),S=!y.isConstant(),I=[];for(let{feature:C,id:O,index:q,sourceLayerIndex:z}of s){let G=this.layers[0]._featureFilter.needGeometry,Y=Bu(C,G);if(!this.layers[0]._featureFilter.filter(new jn(this.zoom,{globalState:this.globalState}),Y,m))continue;let X=S?y.evaluate(Y,{},m):void 0,Q={id:O,properties:C.properties,type:C.type,sourceLayerIndex:z,index:q,geometry:G?Y.geometry:zc(C),patterns:{},sortKey:X};I.push(Q)}S&&I.sort((C,O)=>C.sortKey-O.sortKey);for(let C of I){let{geometry:O,index:q,sourceLayerIndex:z}=C;if(this.hasPattern){let G=pF("line",this.layers,C,{zoom:this.zoom,globalState:this.globalState},u);this.patternFeatures.push(G)}else this.addFeature(C,O,q,m,{},u.subdivisionGranularity);u.featureIndex.insert(s[q].feature,O,q,z,this.index)}}update(s,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,{imagePositions:m,globalState:this.globalState})}addFeatures(s,u,m){for(let y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,u,m,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,S6e)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,w6e),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,u,m,y,S,I){let C=this.layers[0].layout,O=C.get("line-join").evaluate(s,{}),q=C.get("line-cap"),z=C.get("line-miter-limit"),G=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(let Y of u)this.addLine(Y,s,O,q,z,G,y,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{imagePositions:S,canonical:y,globalState:this.globalState})}addLine(s,u,m,y,S,I,C,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=Zm(s,C?O.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Te=0;Te<s.length-1;Te++)this.totalDistance+=s[Te].dist(s[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let q=vy.types[u.type]==="Polygon",z=s.length;for(;z>=2&&s[z-1].equals(s[z-2]);)z--;let G=0;for(;G<z-1&&s[G].equals(s[G+1]);)G++;if(z<(q?3:2))return;m==="bevel"&&(S=1.05);let Y=this.overscaling<=16?122880/(512*this.overscaling):0,X=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray),Q,re,le,ge,ke;this.e1=this.e2=-1,q&&(Q=s[z-2],ke=s[G].sub(Q)._unit()._perp());for(let Te=G;Te<z;Te++){if(le=Te===z-1?q?s[G+1]:void 0:s[Te+1],le&&s[Te].equals(le))continue;ke&&(ge=ke),Q&&(re=Q),Q=s[Te],ke=le?le.sub(Q)._unit()._perp():ge,ge=ge||ke;let Me=ge.add(ke);Me.x===0&&Me.y===0||Me._unit();let $e=ge.x*ke.x+ge.y*ke.y,et=Me.x*ke.x+Me.y*ke.y,ht=et!==0?1/et:1/0,Rt=2*Math.sqrt(2-2*et),xt=et<T6e&&re&&le,At=ge.x*ke.y-ge.y*ke.x>0;if(xt&&Te>G){let Mt=Q.dist(re);if(Mt>2*Y){let it=Q.sub(Q.sub(re)._mult(Y/Mt)._round());this.updateDistance(re,it),this.addCurrentVertex(it,ge,0,0,X),re=it}}let Jt=re&&le,Tt=Jt?m:q?"butt":y;if(Jt&&Tt==="round"&&(ht<I?Tt="miter":ht<=2&&(Tt="fakeround")),Tt==="miter"&&ht>S&&(Tt="bevel"),Tt==="bevel"&&(ht>2&&(Tt="flipbevel"),ht<S&&(Tt="miter")),re&&this.updateDistance(re,Q),Tt==="miter")Me._mult(ht),this.addCurrentVertex(Q,Me,0,0,X);else if(Tt==="flipbevel"){if(ht>100)Me=ke.mult(-1);else{let Mt=ht*ge.add(ke).mag()/ge.sub(ke).mag();Me._perp()._mult(Mt*(At?-1:1))}this.addCurrentVertex(Q,Me,0,0,X),this.addCurrentVertex(Q,Me.mult(-1),0,0,X)}else if(Tt==="bevel"||Tt==="fakeround"){let Mt=-Math.sqrt(ht*ht-1),it=At?Mt:0,fr=At?0:Mt;if(re&&this.addCurrentVertex(Q,ge,it,fr,X),Tt==="fakeround"){let yr=Math.round(180*Rt/Math.PI/20);for(let nr=1;nr<yr;nr++){let Yt=nr/yr;if(Yt!==.5){let _i=Yt-.5;Yt+=Yt*_i*(Yt-1)*((1.0904+$e*($e*(3.55645-1.43519*$e)-3.2452))*_i*_i+(.848013+$e*(.215638*$e-1.06021)))}let en=ke.sub(ge)._mult(Yt)._add(ge)._unit()._mult(At?-1:1);this.addHalfVertex(Q,en.x,en.y,!1,At,0,X)}}le&&this.addCurrentVertex(Q,ke,-it,-fr,X)}else if(Tt==="butt")this.addCurrentVertex(Q,Me,0,0,X);else if(Tt==="square"){let Mt=re?1:-1;this.addCurrentVertex(Q,Me,Mt,Mt,X)}else Tt==="round"&&(re&&(this.addCurrentVertex(Q,ge,0,0,X),this.addCurrentVertex(Q,ge,1,1,X,!0)),le&&(this.addCurrentVertex(Q,ke,-1,-1,X,!0),this.addCurrentVertex(Q,ke,0,0,X)));if(xt&&Te<z-1){let Mt=Q.dist(le);if(Mt>2*Y){let it=Q.add(le.sub(Q)._mult(Y/Mt)._round());this.updateDistance(Q,it),this.addCurrentVertex(it,ke,0,0,X),Q=it}}}}addCurrentVertex(s,u,m,y,S,I=!1){let C=u.y*y-u.x,O=-u.y-u.x*y;this.addHalfVertex(s,u.x+u.y*m,u.y-u.x*m,I,!1,m,S),this.addHalfVertex(s,C,O,I,!0,-y,S),this.distance>YX/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,u,m,y,S,I))}addHalfVertex({x:s,y:u},m,y,S,I,C,O){let q=.5*(this.lineClips?this.scaledDistance*(YX-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(S?1:0),(u<<1)+(I?1:0),Math.round(63*m)+128,Math.round(63*y)+128,1+(C===0?0:C<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let z=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,z,this.e2),O.primitiveLength++),I?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,u){this.distance+=s.dist(u),this.updateScaledDistance()}}let KX,XX;Ut("LineBucket",_F,{omit:["layers","patternFeatures"]});var QX={get paint(){return XX=XX||new aa({"line-opacity":new lr(xe.paint_line["line-opacity"]),"line-color":new lr(xe.paint_line["line-color"]),"line-translate":new Kt(xe.paint_line["line-translate"]),"line-translate-anchor":new Kt(xe.paint_line["line-translate-anchor"]),"line-width":new lr(xe.paint_line["line-width"]),"line-gap-width":new lr(xe.paint_line["line-gap-width"]),"line-offset":new lr(xe.paint_line["line-offset"]),"line-blur":new lr(xe.paint_line["line-blur"]),"line-dasharray":new Nc(xe.paint_line["line-dasharray"]),"line-pattern":new ay(xe.paint_line["line-pattern"]),"line-gradient":new sy(xe.paint_line["line-gradient"])})},get layout(){return KX=KX||new aa({"line-cap":new Kt(xe.layout_line["line-cap"]),"line-join":new lr(xe.layout_line["line-join"]),"line-miter-limit":new Kt(xe.layout_line["line-miter-limit"]),"line-round-limit":new Kt(xe.layout_line["line-round-limit"]),"line-sort-key":new lr(xe.layout_line["line-sort-key"])})}};class I6e extends lr{possiblyEvaluate(s,u){return u=new jn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(s,u)}evaluate(s,u,m,y){return u=nt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(s,u,m,y)}}let iM;class A6e extends As{constructor(s){super(s,QX),this.gradientVersion=0,iM||(iM=new I6e(QX.paint.properties["line-width"].specification),iM.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){let u=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Ii,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,u){super.recalculate(s,u),this.paint._values["line-floorwidth"]=iM.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new _F(s)}queryRadius(s){let u=s,m=JX(tw("line-width",this,u),tw("line-gap-width",this,u)),y=tw("line-offset",this,u);return m/2+Math.abs(y)+JA(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:u,featureState:m,geometry:y,transform:S,pixelsToTileUnits:I}){let C=eM(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,I),O=I/2*JX(this.paint.get("line-width").evaluate(u,m),this.paint.get("line-gap-width").evaluate(u,m)),q=this.paint.get("line-offset").evaluate(u,m);return q&&(y=function(z,G){let Y=[];for(let X=0;X<z.length;X++){let Q=z[X],re=[];for(let le=0;le<Q.length;le++){let ge=Q[le-1],ke=Q[le],Te=Q[le+1],Me=le===0?new l(0,0):ke.sub(ge)._unit()._perp(),$e=le===Q.length-1?new l(0,0):Te.sub(ke)._unit()._perp(),et=Me._add($e)._unit(),ht=et.x*$e.x+et.y*$e.y;ht!==0&&et._mult(1/ht),re.push(et._mult(G)._add(ke))}Y.push(re)}return Y}(y,q*I)),function(z,G,Y){for(let X=0;X<G.length;X++){let Q=G[X];if(z.length>=3){for(let re=0;re<Q.length;re++)if(py(z,Q[re]))return!0}if(FGe(z,Q,Y))return!0}return!1}(C,y,O)}isTileClipped(){return!0}}function JX(c,s){return s>0?s+2*c:c}let M6e=Ai([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),C6e=Ai([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ai([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let P6e=Ai([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ai([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let eQ=Ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),R6e=Ai([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function O6e(c,s,u){return c.sections.forEach(m=>{m.text=function(y,S,I){let C=S.layout.get("text-transform").evaluate(I,{});return C==="uppercase"?y=y.toLocaleUpperCase():C==="lowercase"&&(y=y.toLocaleLowerCase()),dl.applyArabicShaping&&(y=dl.applyArabicShaping(y)),y}(m.text,s,u)}),c}Ai([{name:"triangle",components:3,type:"Uint16"}]),Ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ai([{type:"Float32",name:"offsetX"}]),Ai([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ai([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let fw={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var po=24;let xF=4294967296,tQ=1/xF,rQ=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class bF{constructor(s=new Uint8Array(16)){this.buf=ArrayBuffer.isView(s)?s:new Uint8Array(s),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(s,u,m=this.length){for(;this.pos<m;){let y=this.readVarint(),S=y>>3,I=this.pos;this.type=7&y,s(S,u,this),this.pos===I&&this.skip(y)}return u}readMessage(s,u){return this.readFields(s,u,this.readVarint()+this.pos)}readFixed32(){let s=this.dataView.getUint32(this.pos,!0);return this.pos+=4,s}readSFixed32(){let s=this.dataView.getInt32(this.pos,!0);return this.pos+=4,s}readFixed64(){let s=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*xF;return this.pos+=8,s}readSFixed64(){let s=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*xF;return this.pos+=8,s}readFloat(){let s=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,s}readDouble(){let s=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,s}readVarint(s){let u=this.buf,m,y;return y=u[this.pos++],m=127&y,y<128?m:(y=u[this.pos++],m|=(127&y)<<7,y<128?m:(y=u[this.pos++],m|=(127&y)<<14,y<128?m:(y=u[this.pos++],m|=(127&y)<<21,y<128?m:(y=u[this.pos],m|=(15&y)<<28,function(S,I,C){let O=C.buf,q,z;if(z=O[C.pos++],q=(112&z)>>4,z<128||(z=O[C.pos++],q|=(127&z)<<3,z<128)||(z=O[C.pos++],q|=(127&z)<<10,z<128)||(z=O[C.pos++],q|=(127&z)<<17,z<128)||(z=O[C.pos++],q|=(127&z)<<24,z<128)||(z=O[C.pos++],q|=(1&z)<<31,z<128))return yy(S,q,I);throw new Error("Expected varint not more than 10 bytes")}(m,s,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let s=this.readVarint();return s%2==1?(s+1)/-2:s/2}readBoolean(){return!!this.readVarint()}readString(){let s=this.readVarint()+this.pos,u=this.pos;return this.pos=s,s-u>=12&&rQ?rQ.decode(this.buf.subarray(u,s)):function(m,y,S){let I="",C=y;for(;C<S;){let O=m[C],q,z,G,Y=null,X=O>239?4:O>223?3:O>191?2:1;if(C+X>S)break;X===1?O<128&&(Y=O):X===2?(q=m[C+1],(192&q)==128&&(Y=(31&O)<<6|63&q,Y<=127&&(Y=null))):X===3?(q=m[C+1],z=m[C+2],(192&q)==128&&(192&z)==128&&(Y=(15&O)<<12|(63&q)<<6|63&z,(Y<=2047||Y>=55296&&Y<=57343)&&(Y=null))):X===4&&(q=m[C+1],z=m[C+2],G=m[C+3],(192&q)==128&&(192&z)==128&&(192&G)==128&&(Y=(15&O)<<18|(63&q)<<12|(63&z)<<6|63&G,(Y<=65535||Y>=1114112)&&(Y=null))),Y===null?(Y=65533,X=1):Y>65535&&(Y-=65536,I+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),I+=String.fromCharCode(Y),C+=X}return I}(this.buf,u,s)}readBytes(){let s=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,s);return this.pos=s,u}readPackedVarint(s=[],u){let m=this.readPackedEnd();for(;this.pos<m;)s.push(this.readVarint(u));return s}readPackedSVarint(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readSVarint());return s}readPackedBoolean(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readBoolean());return s}readPackedFloat(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readFloat());return s}readPackedDouble(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readDouble());return s}readPackedFixed32(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readFixed32());return s}readPackedSFixed32(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readSFixed32());return s}readPackedFixed64(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readFixed64());return s}readPackedSFixed64(s=[]){let u=this.readPackedEnd();for(;this.pos<u;)s.push(this.readSFixed64());return s}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(s){let u=7&s;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(s,u){this.writeVarint(s<<3|u)}realloc(s){let u=this.length||16;for(;u<this.pos+s;)u*=2;if(u!==this.length){let m=new Uint8Array(u);m.set(this.buf),this.buf=m,this.dataView=new DataView(m.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeSFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*tQ),!0),this.pos+=8}writeSFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*tQ),!0),this.pos+=8}writeVarint(s){(s=+s||0)>268435455||s<0?function(u,m){let y,S;if(u>=0?(y=u%4294967296|0,S=u/4294967296|0):(y=~(-u%4294967296),S=~(-u/4294967296),4294967295^y?y=y+1|0:(y=0,S=S+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(I,C,O){O.buf[O.pos++]=127&I|128,I>>>=7,O.buf[O.pos++]=127&I|128,I>>>=7,O.buf[O.pos++]=127&I|128,I>>>=7,O.buf[O.pos++]=127&I|128,O.buf[O.pos]=127&(I>>>=7)}(y,0,m),function(I,C){let O=(7&I)<<4;C.buf[C.pos++]|=O|((I>>>=3)?128:0),I&&(C.buf[C.pos++]=127&I|((I>>>=7)?128:0),I&&(C.buf[C.pos++]=127&I|((I>>>=7)?128:0),I&&(C.buf[C.pos++]=127&I|((I>>>=7)?128:0),I&&(C.buf[C.pos++]=127&I|((I>>>=7)?128:0),I&&(C.buf[C.pos++]=127&I)))))}(S,m)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))}writeSVarint(s){this.writeVarint(s<0?2*-s-1:2*s)}writeBoolean(s){this.writeVarint(+s)}writeString(s){s=String(s),this.realloc(4*s.length),this.pos++;let u=this.pos;this.pos=function(y,S,I){for(let C,O,q=0;q<S.length;q++){if(C=S.charCodeAt(q),C>55295&&C<57344){if(!O){C>56319||q+1===S.length?(y[I++]=239,y[I++]=191,y[I++]=189):O=C;continue}if(C<56320){y[I++]=239,y[I++]=191,y[I++]=189,O=C;continue}C=O-55296<<10|C-56320|65536,O=null}else O&&(y[I++]=239,y[I++]=191,y[I++]=189,O=null);C<128?y[I++]=C:(C<2048?y[I++]=C>>6|192:(C<65536?y[I++]=C>>12|224:(y[I++]=C>>18|240,y[I++]=C>>12&63|128),y[I++]=C>>6&63|128),y[I++]=63&C|128)}return I}(this.buf,s,this.pos);let m=this.pos-u;m>=128&&nQ(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m}writeFloat(s){this.realloc(4),this.dataView.setFloat32(this.pos,s,!0),this.pos+=4}writeDouble(s){this.realloc(8),this.dataView.setFloat64(this.pos,s,!0),this.pos+=8}writeBytes(s){let u=s.length;this.writeVarint(u),this.realloc(u);for(let m=0;m<u;m++)this.buf[this.pos++]=s[m]}writeRawMessage(s,u){this.pos++;let m=this.pos;s(u,this);let y=this.pos-m;y>=128&&nQ(m,y,this),this.pos=m-1,this.writeVarint(y),this.pos+=y}writeMessage(s,u,m){this.writeTag(s,2),this.writeRawMessage(u,m)}writePackedVarint(s,u){u.length&&this.writeMessage(s,L6e,u)}writePackedSVarint(s,u){u.length&&this.writeMessage(s,D6e,u)}writePackedBoolean(s,u){u.length&&this.writeMessage(s,q6e,u)}writePackedFloat(s,u){u.length&&this.writeMessage(s,N6e,u)}writePackedDouble(s,u){u.length&&this.writeMessage(s,k6e,u)}writePackedFixed32(s,u){u.length&&this.writeMessage(s,F6e,u)}writePackedSFixed32(s,u){u.length&&this.writeMessage(s,j6e,u)}writePackedFixed64(s,u){u.length&&this.writeMessage(s,z6e,u)}writePackedSFixed64(s,u){u.length&&this.writeMessage(s,U6e,u)}writeBytesField(s,u){this.writeTag(s,2),this.writeBytes(u)}writeFixed32Field(s,u){this.writeTag(s,5),this.writeFixed32(u)}writeSFixed32Field(s,u){this.writeTag(s,5),this.writeSFixed32(u)}writeFixed64Field(s,u){this.writeTag(s,1),this.writeFixed64(u)}writeSFixed64Field(s,u){this.writeTag(s,1),this.writeSFixed64(u)}writeVarintField(s,u){this.writeTag(s,0),this.writeVarint(u)}writeSVarintField(s,u){this.writeTag(s,0),this.writeSVarint(u)}writeStringField(s,u){this.writeTag(s,2),this.writeString(u)}writeFloatField(s,u){this.writeTag(s,5),this.writeFloat(u)}writeDoubleField(s,u){this.writeTag(s,1),this.writeDouble(u)}writeBooleanField(s,u){this.writeVarintField(s,+u)}}function yy(c,s,u){return u?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function nQ(c,s,u){let m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));u.realloc(m);for(let y=u.pos-1;y>=c;y--)u.buf[y+m]=u.buf[y]}function L6e(c,s){for(let u=0;u<c.length;u++)s.writeVarint(c[u])}function D6e(c,s){for(let u=0;u<c.length;u++)s.writeSVarint(c[u])}function N6e(c,s){for(let u=0;u<c.length;u++)s.writeFloat(c[u])}function k6e(c,s){for(let u=0;u<c.length;u++)s.writeDouble(c[u])}function q6e(c,s){for(let u=0;u<c.length;u++)s.writeBoolean(c[u])}function F6e(c,s){for(let u=0;u<c.length;u++)s.writeFixed32(c[u])}function j6e(c,s){for(let u=0;u<c.length;u++)s.writeSFixed32(c[u])}function z6e(c,s){for(let u=0;u<c.length;u++)s.writeFixed64(c[u])}function U6e(c,s){for(let u=0;u<c.length;u++)s.writeSFixed64(c[u])}function B6e(c,s,u){c===1&&u.readMessage(V6e,s)}function V6e(c,s,u){if(c===3){let{id:m,bitmap:y,width:S,height:I,left:C,top:O,advance:q}=u.readMessage(G6e,{});s.push({id:m,bitmap:new rw({width:S+6,height:I+6},y),metrics:{width:S,height:I,left:C,top:O,advance:q}})}}function G6e(c,s,u){c===1?s.id=u.readVarint():c===2?s.bitmap=u.readBytes():c===3?s.width=u.readVarint():c===4?s.height=u.readVarint():c===5?s.left=u.readSVarint():c===6?s.top=u.readSVarint():c===7&&(s.advance=u.readVarint())}function iQ(c){let s=0,u=0;for(let I of c)s+=I.w*I.h,u=Math.max(u,I.w);c.sort((I,C)=>C.h-I.h);let m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),u),h:1/0}],y=0,S=0;for(let I of c)for(let C=m.length-1;C>=0;C--){let O=m[C];if(!(I.w>O.w||I.h>O.h)){if(I.x=O.x,I.y=O.y,S=Math.max(S,I.y+I.h),y=Math.max(y,I.x+I.w),I.w===O.w&&I.h===O.h){let q=m.pop();q&&C<m.length&&(m[C]=q)}else I.h===O.h?(O.x+=I.w,O.w-=I.w):I.w===O.w?(O.y+=I.h,O.h-=I.h):(m.push({x:O.x+I.w,y:O.y,w:O.w-I.w,h:I.h}),O.y+=I.h,O.h-=I.h);break}}return{w:y,h:S,fill:s/(y*S)||0}}class wF{constructor(s,{pixelRatio:u,version:m,stretchX:y,stretchY:S,content:I,textFitWidth:C,textFitHeight:O}){this.paddedRect=s,this.pixelRatio=u,this.stretchX=y,this.stretchY=S,this.content=I,this.version=m,this.textFitWidth=C,this.textFitHeight=O}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class oQ{constructor(s,u){let m={},y={};this.haveRenderCallbacks=[];let S=[];this.addImages(s,m,S),this.addImages(u,y,S);let{w:I,h:C}=iQ(S),O=new rs({width:I||1,height:C||1});for(let q in s){let z=s[q],G=m[q].paddedRect;rs.copy(z.data,O,{x:0,y:0},{x:G.x+1,y:G.y+1},z.data)}for(let q in u){let z=u[q],G=y[q].paddedRect,Y=G.x+1,X=G.y+1,Q=z.data.width,re=z.data.height;rs.copy(z.data,O,{x:0,y:0},{x:Y,y:X},z.data),rs.copy(z.data,O,{x:0,y:re-1},{x:Y,y:X-1},{width:Q,height:1}),rs.copy(z.data,O,{x:0,y:0},{x:Y,y:X+re},{width:Q,height:1}),rs.copy(z.data,O,{x:Q-1,y:0},{x:Y-1,y:X},{width:1,height:re}),rs.copy(z.data,O,{x:0,y:0},{x:Y+Q,y:X},{width:1,height:re})}this.image=O,this.iconPositions=m,this.patternPositions=y}addImages(s,u,m){for(let y in s){let S=s[y],I={x:0,y:0,w:S.data.width+2,h:S.data.height+2};m.push(I),u[y]=new wF(I,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(s,u){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),u),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),u)}patchUpdatedImage(s,u,m){if(!s||!u||s.version===u.version)return;s.version=u.version;let[y,S]=s.tl;m.update(u.data,void 0,{x:y,y:S})}}var Pp;Ut("ImagePosition",wF),Ut("ImageAtlas",oQ),i.ao=void 0,(Pp=i.ao||(i.ao={}))[Pp.none=0]="none",Pp[Pp.horizontal=1]="horizontal",Pp[Pp.vertical=2]="vertical",Pp[Pp.horizontalOnly=3]="horizontalOnly";class hw{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,u,m){let y=new hw;return y.scale=s||1,y.fontStack=u,y.verticalAlign=m||"bottom",y}static forImage(s,u){let m=new hw;return m.imageName=s,m.verticalAlign=u||"bottom",m}}class _y{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,u){let m=new _y;for(let y=0;y<s.sections.length;y++){let S=s.sections[y];S.image?m.addImageSection(S):m.addTextSection(S,u)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let u="";for(let m=0;m<s.length;m++){let y=s.charCodeAt(m+1)||null,S=s.charCodeAt(m-1)||null;u+=y&&GA(y)&&!fw[s[m+1]]||S&&GA(S)&&!fw[s[m-1]]||!fw[s[m]]?s[m]:fw[s[m]]}return u}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&aM[this.text.charCodeAt(m)];m++)s++;let u=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&aM[this.text.charCodeAt(m)];m--)u--;this.text=this.text.substring(s,u),this.sectionIndex=this.sectionIndex.slice(s,u)}substring(s,u){let m=new _y;return m.text=this.text.substring(s,u),m.sectionIndex=this.sectionIndex.slice(s,u),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,u)=>Math.max(s,this.sections[u].scale),0)}getMaxImageSize(s){let u=0,m=0;for(let y=0;y<this.length();y++){let S=this.getSection(y);if(S.imageName){let I=s[S.imageName];if(!I)continue;let C=I.displaySize;u=Math.max(u,C[0]),m=Math.max(m,C[1])}}return{maxImageWidth:u,maxImageHeight:m}}addTextSection(s,u){this.text+=s.text,this.sections.push(hw.forText(s.scale,s.fontStack||u,s.verticalAlign));let m=this.sections.length-1;for(let y=0;y<s.text.length;++y)this.sectionIndex.push(m)}addImageSection(s){let u=s.image?s.image.name:"";if(u.length===0)return void zt("Can't add FormattedSection with an empty image.");let m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(hw.forImage(u,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):zt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function oM(c,s,u,m,y,S,I,C,O,q,z,G,Y,X,Q){let re=_y.fromFeature(c,y),le;G===i.ao.vertical&&re.verticalizePunctuation();let{processBidirectionalText:ge,processStyledBidirectionalText:ke}=dl;if(ge&&re.sections.length===1){le=[];let $e=ge(re.toString(),EF(re,q,S,s,m,X));for(let et of $e){let ht=new _y;ht.text=et,ht.sections=re.sections;for(let Rt=0;Rt<et.length;Rt++)ht.sectionIndex.push(0);le.push(ht)}}else if(ke){le=[];let $e=ke(re.text,re.sectionIndex,EF(re,q,S,s,m,X));for(let et of $e){let ht=new _y;ht.text=et[0],ht.sectionIndex=et[1],ht.sections=re.sections,le.push(ht)}}else le=function($e,et){let ht=[],Rt=$e.text,xt=0;for(let At of et)ht.push($e.substring(xt,At)),xt=At;return xt<Rt.length&&ht.push($e.substring(xt,Rt.length)),ht}(re,EF(re,q,S,s,m,X));let Te=[],Me={positionedLines:Te,text:re.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function($e,et,ht,Rt,xt,At,Jt,Tt,Mt,it,fr,yr){let nr=0,Yt=0,en=0,_i=0,ro=Tt==="right"?1:Tt==="left"?0:.5,Wo=po/yr,_l=0;for(let ui of xt){ui.trim();let mo=ui.getMaxScale(),Po={positionedGlyphs:[],lineOffset:0};$e.positionedLines[_l]=Po;let Ro=Po.positionedGlyphs,Pa=0;if(!ui.length()){Yt+=At,++_l;continue}let xl=Z6e(Rt,ui,Wo);for(let is=0;is<ui.length();is++){let no=ui.getSection(is),vo=ui.getSectionIndex(is),yo=ui.getCharCode(is),Zi=Y6e(Mt,fr,yo),Jn;if(no.imageName){if($e.iconsInText=!0,no.scale=no.scale*Wo,Jn=X6e(no,Zi,mo,xl,Rt),!Jn)continue;Pa=Math.max(Pa,Jn.imageOffset)}else if(Jn=K6e(no,yo,Zi,xl,et,ht),!Jn)continue;let{rect:Vu,metrics:Ey,baselineOffset:Gu}=Jn;Ro.push({glyph:yo,imageName:no.imageName,x:nr,y:Yt+Gu+-17,vertical:Zi,scale:no.scale,fontStack:no.fontStack,sectionIndex:vo,metrics:Ey,rect:Vu}),Zi?($e.verticalizable=!0,nr+=(no.imageName?Ey.advance:po)*no.scale+it):nr+=Ey.advance*no.scale+it}Ro.length!==0&&(en=Math.max(nr-it,en),Q6e(Ro,0,Ro.length-1,ro)),nr=0,Po.lineOffset=Math.max(Pa,(mo-1)*po);let go=At*mo+Pa;Yt+=go,_i=Math.max(go,_i),++_l}let{horizontalAlign:ns,verticalAlign:Co}=SF(Jt);(function(ui,mo,Po,Ro,Pa,xl,go,is,no){let vo=(mo-Po)*Pa,yo=0;yo=xl!==go?-is*Ro- -17:-Ro*no*go+.5*go;for(let Zi of ui)for(let Jn of Zi.positionedGlyphs)Jn.x+=vo,Jn.y+=yo})($e.positionedLines,ro,ns,Co,en,_i,At,Yt,xt.length),$e.top+=-Co*Yt,$e.bottom=$e.top+Yt,$e.left+=-ns*en,$e.right=$e.left+en}(Me,s,u,m,le,I,C,O,G,q,Y,Q),!function($e){for(let et of $e)if(et.positionedGlyphs.length!==0)return!1;return!0}(Te)&&Me}let aM={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$6e={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},H6e={40:!0};function aQ(c,s,u,m,y,S){if(s.imageName){let I=m[s.imageName];return I?I.displaySize[0]*s.scale*po/S+y:0}{let I=u[s.fontStack],C=I&&I[c];return C?C.metrics.advance*s.scale+y:0}}function sQ(c,s,u,m){let y=Math.pow(c-s,2);return m?c<s?y/2:2*y:y+Math.abs(u)*u}function W6e(c,s,u){let m=0;return c===10&&(m-=1e4),u&&(m+=150),c!==40&&c!==65288||(m+=50),s!==41&&s!==65289||(m+=50),m}function lQ(c,s,u,m,y,S){let I=null,C=sQ(s,u,y,S);for(let O of m){let q=sQ(s-O.x,u,y,S)+O.badness;q<=C&&(I=O,C=q)}return{index:c,x:s,priorBreak:I,badness:C}}function uQ(c){return c?uQ(c.priorBreak).concat(c.index):[]}function EF(c,s,u,m,y,S){if(!c)return[];let I=[],C=function(G,Y,X,Q,re,le){let ge=0;for(let ke=0;ke<G.length();ke++){let Te=G.getSection(ke);ge+=aQ(G.getCharCode(ke),Te,Q,re,Y,le)}return ge/Math.max(1,Math.ceil(ge/X))}(c,s,u,m,y,S),O=c.text.indexOf("\u200B")>=0,q=0;for(let G=0;G<c.length();G++){let Y=c.getSection(G),X=c.getCharCode(G);if(aM[X]||(q+=aQ(X,Y,m,y,s,S)),G<c.length()-1){let Q=!((z=X)<11904)&&(!!Jr["CJK Compatibility Forms"](z)||!!Jr["CJK Compatibility"](z)||!!Jr["CJK Strokes"](z)||!!Jr["CJK Symbols and Punctuation"](z)||!!Jr["Enclosed CJK Letters and Months"](z)||!!Jr["Halfwidth and Fullwidth Forms"](z)||!!Jr["Ideographic Description Characters"](z)||!!Jr["Vertical Forms"](z)||Gb.test(String.fromCodePoint(z)));($6e[X]||Q||Y.imageName||G!==c.length()-2&&H6e[c.getCharCode(G+1)])&&I.push(lQ(G+1,q,C,I,W6e(X,c.getCharCode(G+1),Q&&O),!1))}}var z;return uQ(lQ(c.length(),q,C,I,0,!0))}function SF(c){let s=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:s,verticalAlign:u}}function Z6e(c,s,u){let m=s.getMaxScale()*po,{maxImageWidth:y,maxImageHeight:S}=s.getMaxImageSize(c),I=Math.max(m,S*u);return{verticalLineContentWidth:Math.max(m,y*u),horizontalLineContentHeight:I}}function cQ(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function Y6e(c,s,u){return!(c===i.ao.horizontal||!s&&!$b(u)||s&&(aM[u]||(m=u,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(m)))));var m}function K6e(c,s,u,m,y,S){let I=S[c.fontStack],C=function(q,z,G,Y){if(q&&q.rect)return q;let X=z[G.fontStack],Q=X&&X[Y];return Q?{rect:null,metrics:Q.metrics}:null}(I&&I[s],y,c,s);if(C===null)return null;let O;if(u)O=m.verticalLineContentWidth-c.scale*po;else{let q=cQ(c.verticalAlign);O=(m.horizontalLineContentHeight-c.scale*po)*q}return{rect:C.rect,metrics:C.metrics,baselineOffset:O}}function X6e(c,s,u,m,y){let S=y[c.imageName];if(!S)return null;let I=S.paddedRect,C=S.displaySize,O={width:C[0],height:C[1],left:1,top:-3,advance:s?C[1]:C[0]},q;if(s)q=m.verticalLineContentWidth-C[1]*c.scale;else{let z=cQ(c.verticalAlign);q=(m.horizontalLineContentHeight-C[1]*c.scale)*z}return{rect:I,metrics:O,baselineOffset:q,imageOffset:(s?C[0]:C[1])*c.scale-po*u}}function Q6e(c,s,u,m){if(m===0)return;let y=c[u],S=(c[u].x+y.metrics.advance*y.scale)*m;for(let I=s;I<=u;I++)c[I].x-=S}function J6e(c,s,u){let{horizontalAlign:m,verticalAlign:y}=SF(u),S=s[0]-c.displaySize[0]*m,I=s[1]-c.displaySize[1]*y;return{image:c,top:I,bottom:I+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function fQ(c){var s,u;let m=c.left,y=c.top,S=c.right-m,I=c.bottom-y,C=(s=c.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",O=(u=c.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",q=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(O==="proportional"){if(C==="stretchOnly"&&S/I<q||C==="proportional"){let z=Math.ceil(I*q);m*=z/S,S=z}}else if(C==="proportional"&&O==="stretchOnly"&&q!==0&&S/I>q){let z=Math.ceil(S/q);y*=z/I,I=z}return{x1:m,y1:y,x2:m+S,y2:y+I}}function hQ(c,s,u,m,y,S){let I=c.image,C;if(I.content){let le=I.content,ge=I.pixelRatio||1;C=[le[0]/ge,le[1]/ge,I.displaySize[0]-le[2]/ge,I.displaySize[1]-le[3]/ge]}let O=s.left*S,q=s.right*S,z,G,Y,X;u==="width"||u==="both"?(X=y[0]+O-m[3],G=y[0]+q+m[1]):(X=y[0]+(O+q-I.displaySize[0])/2,G=X+I.displaySize[0]);let Q=s.top*S,re=s.bottom*S;return u==="height"||u==="both"?(z=y[1]+Q-m[0],Y=y[1]+re+m[2]):(z=y[1]+(Q+re-I.displaySize[1])/2,Y=z+I.displaySize[1]),{image:I,top:z,right:G,bottom:Y,left:X,collisionPadding:C}}let nh=128,Rp=32640;function pQ(c,s){let{expression:u}=s;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new jn(c+1))};if(u.kind==="source")return{kind:"source"};{let{zoomStops:m,interpolationType:y}=u,S=0;for(;S<m.length&&m[S]<=c;)S++;S=Math.max(0,S-1);let I=S;for(;I<m.length&&m[I]<c+1;)I++;I=Math.min(m.length-1,I);let C=m[S],O=m[I];return u.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:O,interpolationType:y}:{kind:"camera",minZoom:C,maxZoom:O,minSize:u.evaluate(new jn(C)),maxSize:u.evaluate(new jn(O)),interpolationType:y}}}function TF(c,s,u){let m="never",y=c.get(s);return y?m=y:c.get(u)&&(m="always"),m}let e$e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sM(c,s,u,m,y,S,I,C,O,q,z,G,Y){let X=C?Math.min(Rp,Math.round(C[0])):0,Q=C?Math.min(Rp,Math.round(C[1])):0;c.emplaceBack(s,u,Math.round(32*m),Math.round(32*y),S,I,(X<<1)+(O?1:0),Q,16*q,16*z,256*G,256*Y)}function IF(c,s,u){c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u),c.emplaceBack(s.x,s.y,u)}function t$e(c){for(let s of c.sections)if(WA(s.text))return!0;return!1}class AF{constructor(s){this.layoutVertexArray=new bt,this.indexArray=new Ln,this.programConfigurations=s,this.segments=new Or,this.dynamicLayoutVertexArray=new st,this.opacityVertexArray=new Zt,this.hasVisibleVertices=!1,this.placedSymbolArray=new ee}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,u,m,y){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,M6e.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,C6e.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,e$e,!0),this.opacityVertexBuffer.itemSize=1),(m||y)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",AF);class MF{constructor(s,u,m){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new m,this.segments=new Or,this.collisionVertexArray=new hn}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,P6e.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",MF);class xy{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(I=>I.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=pQ(this.zoom,u["text-size"]),this.iconSizeData=pQ(this.zoom,u["icon-size"]);let m=this.layers[0].layout,y=m.get("symbol-sort-key"),S=m.get("symbol-z-order");this.canOverlap=TF(m,"text-overlap","text-allow-overlap")!=="never"||TF(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(I=>i.ao[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=s.sourceID}createArrays(){this.text=new AF(new ts(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new AF(new ts(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new fe,this.lineVertexArray=new ve,this.symbolInstances=new ue,this.textAnchorOffsets=new we}calculateGlyphDependencies(s,u,m,y,S){for(let I=0;I<s.length;I++)if(u[s.charCodeAt(I)]=!0,(m||y)&&S){let C=fw[s.charAt(I)];C&&(u[C.charCodeAt(0)]=!0)}}populate(s,u,m){let y=this.layers[0],S=y.layout,I=S.get("text-font"),C=S.get("text-field"),O=S.get("icon-image"),q=(C.value.kind!=="constant"||C.value.value instanceof na&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),z=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,G=S.get("symbol-sort-key");if(this.features=[],!q&&!z)return;let Y=u.iconDependencies,X=u.glyphDependencies,Q=u.availableImages,re=new jn(this.zoom,{globalState:this.globalState});for(let{feature:le,id:ge,index:ke,sourceLayerIndex:Te}of s){let Me=y._featureFilter.needGeometry,$e=Bu(le,Me);if(!y._featureFilter.filter(re,$e,m))continue;let et,ht;if(Me||($e.geometry=zc(le)),q){let xt=y.getValueAndResolveTokens("text-field",$e,m,Q),At=na.factory(xt),Jt=this.hasRTLText=this.hasRTLText||t$e(At);(!Jt||dl.getRTLTextPluginStatus()==="unavailable"||Jt&&dl.isParsed())&&(et=O6e(At,y,$e))}if(z){let xt=y.getValueAndResolveTokens("icon-image",$e,m,Q);ht=xt instanceof Ja?xt:Ja.fromString(xt)}if(!et&&!ht)continue;let Rt=this.sortFeaturesByKey?G.evaluate($e,{},m):void 0;if(this.features.push({id:ge,text:et,icon:ht,index:ke,sourceLayerIndex:Te,geometry:$e.geometry,properties:le.properties,type:vy.types[le.type],sortKey:Rt}),ht&&(Y[ht.name]=!0),et){let xt=I.evaluate($e,{},m).join(","),At=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.ao.vertical)>=0;for(let Jt of et.sections)if(Jt.image)Y[Jt.image.name]=!0;else{let Tt=ny(et.toString()),Mt=Jt.fontStack||xt,it=X[Mt]=X[Mt]||{};this.calculateGlyphDependencies(Jt.text,it,At,this.allowVerticalPlacement,Tt)}}}S.get("symbol-placement")==="line"&&(this.features=function(le){let ge={},ke={},Te=[],Me=0;function $e(xt){Te.push(le[xt]),Me++}function et(xt,At,Jt){let Tt=ke[xt];return delete ke[xt],ke[At]=Tt,Te[Tt].geometry[0].pop(),Te[Tt].geometry[0]=Te[Tt].geometry[0].concat(Jt[0]),Tt}function ht(xt,At,Jt){let Tt=ge[At];return delete ge[At],ge[xt]=Tt,Te[Tt].geometry[0].shift(),Te[Tt].geometry[0]=Jt[0].concat(Te[Tt].geometry[0]),Tt}function Rt(xt,At,Jt){let Tt=Jt?At[0][At[0].length-1]:At[0][0];return`${xt}:${Tt.x}:${Tt.y}`}for(let xt=0;xt<le.length;xt++){let At=le[xt],Jt=At.geometry,Tt=At.text?At.text.toString():null;if(!Tt){$e(xt);continue}let Mt=Rt(Tt,Jt),it=Rt(Tt,Jt,!0);if(Mt in ke&&it in ge&&ke[Mt]!==ge[it]){let fr=ht(Mt,it,Jt),yr=et(Mt,it,Te[fr].geometry);delete ge[Mt],delete ke[it],ke[Rt(Tt,Te[yr].geometry,!0)]=yr,Te[fr].geometry=null}else Mt in ke?et(Mt,it,Jt):it in ge?ht(Mt,it,Jt):($e(xt),ge[Mt]=Me-1,ke[it]=Me-1)}return Te.filter(xt=>xt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,ge)=>le.sortKey-ge.sortKey)}update(s,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,u,this.layers,{imagePositions:m,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(s,u,this.layers,{imagePositions:m,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,u){let m=this.lineVertexArray.length;if(s.segment!==void 0){let y=s.dist(u[s.segment+1]),S=s.dist(u[s.segment]),I={};for(let C=s.segment+1;C<u.length;C++)I[C]={x:u[C].x,y:u[C].y,tileUnitDistanceFromAnchor:y},C<u.length-1&&(y+=u[C+1].dist(u[C]));for(let C=s.segment||0;C>=0;C--)I[C]={x:u[C].x,y:u[C].y,tileUnitDistanceFromAnchor:S},C>0&&(S+=u[C-1].dist(u[C]));for(let C=0;C<u.length;C++){let O=I[C];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,u,m,y,S,I,C,O,q,z,G,Y){let X=s.indexArray,Q=s.layoutVertexArray,re=s.segments.prepareSegment(4*u.length,Q,X,this.canOverlap?I.sortKey:void 0),le=this.glyphOffsetArray.length,ge=re.vertexLength,ke=this.allowVerticalPlacement&&C===i.ao.vertical?Math.PI/2:0,Te=I.text&&I.text.sections;for(let Me=0;Me<u.length;Me++){let{tl:$e,tr:et,bl:ht,br:Rt,tex:xt,pixelOffsetTL:At,pixelOffsetBR:Jt,minFontScaleX:Tt,minFontScaleY:Mt,glyphOffset:it,isSDF:fr,sectionIndex:yr}=u[Me],nr=re.vertexLength,Yt=it[1];sM(Q,O.x,O.y,$e.x,Yt+$e.y,xt.x,xt.y,m,fr,At.x,At.y,Tt,Mt),sM(Q,O.x,O.y,et.x,Yt+et.y,xt.x+xt.w,xt.y,m,fr,Jt.x,At.y,Tt,Mt),sM(Q,O.x,O.y,ht.x,Yt+ht.y,xt.x,xt.y+xt.h,m,fr,At.x,Jt.y,Tt,Mt),sM(Q,O.x,O.y,Rt.x,Yt+Rt.y,xt.x+xt.w,xt.y+xt.h,m,fr,Jt.x,Jt.y,Tt,Mt),IF(s.dynamicLayoutVertexArray,O,ke),X.emplaceBack(nr,nr+2,nr+1),X.emplaceBack(nr+1,nr+2,nr+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(it[0]),Me!==u.length-1&&yr===u[Me+1].sectionIndex||s.programConfigurations.populatePaintArrays(Q.length,I,I.index,{imagePositions:{},canonical:Y,formattedSection:Te&&Te[yr],globalState:this.globalState})}s.placedSymbolArray.emplaceBack(O.x,O.y,le,this.glyphOffsetArray.length-le,ge,q,z,O.segment,m?m[0]:0,m?m[1]:0,y[0],y[1],C,0,!1,0,G)}_addCollisionDebugVertex(s,u,m,y,S,I){return u.emplaceBack(0,0),s.emplaceBack(m.x,m.y,y,S,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(s,u,m,y,S,I,C){let O=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),q=O.vertexLength,z=S.layoutVertexArray,G=S.collisionVertexArray,Y=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(z,G,I,Y,X,new l(s,u)),this._addCollisionDebugVertex(z,G,I,Y,X,new l(m,u)),this._addCollisionDebugVertex(z,G,I,Y,X,new l(m,y)),this._addCollisionDebugVertex(z,G,I,Y,X,new l(s,y)),O.vertexLength+=4;let Q=S.indexArray;Q.emplaceBack(q,q+1),Q.emplaceBack(q+1,q+2),Q.emplaceBack(q+2,q+3),Q.emplaceBack(q+3,q),O.primitiveLength+=4}addDebugCollisionBoxes(s,u,m,y){for(let S=s;S<u;S++){let I=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,y?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new MF(Dr,eQ.members,Mn),this.iconCollisionBox=new MF(Dr,eQ.members,Mn);for(let s=0;s<this.symbolInstances.length;s++){let u=this.symbolInstances.get(s);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(s,u,m,y,S,I,C,O,q){let z={};for(let G=u;G<m;G++){let Y=s.get(G);z.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.textFeatureIndex=Y.featureIndex;break}for(let G=y;G<S;G++){let Y=s.get(G);z.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.verticalTextFeatureIndex=Y.featureIndex;break}for(let G=I;G<C;G++){let Y=s.get(G);z.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.iconFeatureIndex=Y.featureIndex;break}for(let G=O;G<q;G++){let Y=s.get(G);z.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.verticalIconFeatureIndex=Y.featureIndex;break}return z}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){let m=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,u){let m=s.placedSymbolArray.get(u),y=m.vertexStartIndex+4*m.numGlyphs;for(let S=m.vertexStartIndex;S<y;S+=4)s.indexArray.emplaceBack(S,S+2,S+1),s.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let u=Math.sin(s),m=Math.cos(s),y=[],S=[],I=[];for(let C=0;C<this.symbolInstances.length;++C){I.push(C);let O=this.symbolInstances.get(C);y.push(0|Math.round(u*O.anchorX+m*O.anchorY)),S.push(O.featureIndex)}return I.sort((C,O)=>y[C]-y[O]||S[O]-S[C]),I}addToSortKeyRanges(s,u){let m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===u?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let u of this.symbolInstanceIndexes){let m=this.symbolInstances.get(u);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((y,S,I)=>{y>=0&&I.indexOf(y)===S&&this.addIndicesForPlacedSymbol(this.text,y)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let dQ,mQ;Ut("SymbolBucket",xy,{omit:["layers","collisionBoxArray","features","compareText"]}),xy.MAX_GLYPHS=65535,xy.addDynamicAttributes=IF;var CF={get paint(){return mQ=mQ||new aa({"icon-opacity":new lr(xe.paint_symbol["icon-opacity"]),"icon-color":new lr(xe.paint_symbol["icon-color"]),"icon-halo-color":new lr(xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new lr(xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new lr(xe.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new lr(xe.paint_symbol["text-opacity"]),"text-color":new lr(xe.paint_symbol["text-color"],{runtimeType:yn,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new lr(xe.paint_symbol["text-halo-color"]),"text-halo-width":new lr(xe.paint_symbol["text-halo-width"]),"text-halo-blur":new lr(xe.paint_symbol["text-halo-blur"]),"text-translate":new Kt(xe.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(xe.paint_symbol["text-translate-anchor"])})},get layout(){return dQ=dQ||new aa({"symbol-placement":new Kt(xe.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new lr(xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kt(xe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kt(xe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kt(xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new lr(xe.layout_symbol["icon-size"]),"icon-text-fit":new Kt(xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kt(xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new lr(xe.layout_symbol["icon-image"]),"icon-rotate":new lr(xe.layout_symbol["icon-rotate"]),"icon-padding":new lr(xe.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(xe.layout_symbol["icon-keep-upright"]),"icon-offset":new lr(xe.layout_symbol["icon-offset"]),"icon-anchor":new lr(xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(xe.layout_symbol["text-rotation-alignment"]),"text-field":new lr(xe.layout_symbol["text-field"]),"text-font":new lr(xe.layout_symbol["text-font"]),"text-size":new lr(xe.layout_symbol["text-size"]),"text-max-width":new lr(xe.layout_symbol["text-max-width"]),"text-line-height":new Kt(xe.layout_symbol["text-line-height"]),"text-letter-spacing":new lr(xe.layout_symbol["text-letter-spacing"]),"text-justify":new lr(xe.layout_symbol["text-justify"]),"text-radial-offset":new lr(xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(xe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new lr(xe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new lr(xe.layout_symbol["text-anchor"]),"text-max-angle":new Kt(xe.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(xe.layout_symbol["text-writing-mode"]),"text-rotate":new lr(xe.layout_symbol["text-rotate"]),"text-padding":new Kt(xe.layout_symbol["text-padding"]),"text-keep-upright":new Kt(xe.layout_symbol["text-keep-upright"]),"text-transform":new lr(xe.layout_symbol["text-transform"]),"text-offset":new lr(xe.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(xe.layout_symbol["text-allow-overlap"]),"text-overlap":new Kt(xe.layout_symbol["text-overlap"]),"text-ignore-placement":new Kt(xe.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(xe.layout_symbol["text-optional"])})}};class gQ{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Es,this.defaultValue=s}evaluate(s){if(s.formattedSection){let u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",gQ,{omit:["defaultValue"]});class lM extends As{constructor(s){super(s,CF)}recalculate(s,u){if(super.recalculate(s,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let m=this.layout.get("text-writing-mode");if(m){let y=[];for(let S of m)y.indexOf(S)<0&&y.push(S);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,u,m,y){let S=this.layout.get(s).evaluate(u,{},m,y),I=this._unevaluatedLayout._values[s];return I.isDataDriven()||Yv(I.value)||!S?S:function(C,O){return O.replace(/{([^{}]+)}/g,(q,z)=>C&&z in C?String(C[z]):"")}(u.properties,S)}createBucket(s){return new xy(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let s of CF.paint.overridableProperties){if(!lM.hasPaintOverride(this.layout,s))continue;let u=this.paint.get(s),m=new gQ(u),y=new Ob(m,u.property.specification),S=null;S=u.value.kind==="constant"||u.value.kind==="source"?new km("source",y):new Lb("composite",y,u.value.zoomStops),this.paint._values[s]=new Gl(u.property,S,u.parameters)}}_handleOverridablePaintPropertyUpdate(s,u,m){return!(!this.layout||u.isDataDriven()||m.isDataDriven())&&lM.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,u){let m=s.get("text-field"),y=CF.paint.properties[u],S=!1,I=C=>{for(let O of C)if(y.overrides&&y.overrides.hasOverride(O))return void(S=!0)};if(m.value.kind==="constant"&&m.value.value instanceof na)I(m.value.value.sections);else if(m.value.kind==="source"||m.value.kind==="composite"){let C=q=>{S||(q instanceof Fu&&cr(q.value)===Cc?I(q.value.sections):q instanceof Vf?I(q.sections):q.eachChild(C))},O=m.value;O._styleExpression&&C(O._styleExpression.expression)}return S}}let vQ;var r$e={get paint(){return vQ=vQ||new aa({"background-color":new Kt(xe.paint_background["background-color"]),"background-pattern":new Nc(xe.paint_background["background-pattern"]),"background-opacity":new Kt(xe.paint_background["background-opacity"])})}};class n$e extends As{constructor(s){super(s,r$e)}}let yQ;var i$e={get paint(){return yQ=yQ||new aa({"raster-opacity":new Kt(xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kt(xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(xe.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(xe.paint_raster["raster-saturation"]),"raster-contrast":new Kt(xe.paint_raster["raster-contrast"]),"raster-resampling":new Kt(xe.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(xe.paint_raster["raster-fade-duration"])})}};class o$e extends As{constructor(s){super(s,i$e)}}class a$e extends As{constructor(s){super(s,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class s$e{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let l$e={once:!0},PF=6371008.8;class Op{constructor(s,u){if(isNaN(s)||isNaN(u))throw new Error(`Invalid LngLat object: (${s}, ${u})`);if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Op(Ue(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){let u=Math.PI/180,m=this.lat*u,y=s.lat*u,S=Math.sin(m)*Math.sin(y)+Math.cos(m)*Math.cos(y)*Math.cos((s.lng-this.lng)*u);return PF*Math.acos(Math.min(S,1))}static convert(s){if(s instanceof Op)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Op(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Op(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let _Q=2*Math.PI*PF;function xQ(c){return _Q*Math.cos(c*Math.PI/180)}function bQ(c){return(180+c)/360}function wQ(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function EQ(c,s){return c/xQ(s)}function RF(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function SQ(c,s){return c*xQ(RF(s))}class pw{constructor(s,u,m=0){this.x=+s,this.y=+u,this.z=+m}static fromLngLat(s,u=0){let m=Op.convert(s);return new pw(bQ(m.lng),wQ(m.lat),EQ(u,m.lat))}toLngLat(){return new Op(360*this.x-180,RF(this.y))}toAltitude(){return SQ(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/_Q*(s=RF(this.y),1/Math.cos(s*Math.PI/180));var s}}function TQ(c,s,u){var m=2*Math.PI*6378137/256/Math.pow(2,u);return[c*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class OF{constructor(s,u,m){if(!function(y,S,I){return!(y<0||y>25||I<0||I>=Math.pow(2,y)||S<0||S>=Math.pow(2,y))}(s,u,m))throw new Error(`x=${u}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=u,this.y=m,this.key=by(0,s,s,u,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,u,m){let y=(I=this.y,C=this.z,O=TQ(256*(S=this.x),256*(I=Math.pow(2,C)-I-1),C),q=TQ(256*(S+1),256*(I+1),C),O[0]+","+O[1]+","+q[0]+","+q[1]);var S,I,C,O,q;let z=function(G,Y,X){let Q,re="";for(let le=G;le>0;le--)Q=1<<le-1,re+=(Y&Q?1:0)+(X&Q?2:0);return re}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,y)}isChildOf(s){let u=this.z-s.z;return u>0&&s.x===this.x>>u&&s.y===this.y>>u}getTilePoint(s){let u=Math.pow(2,this.z);return new l((s.x*u-this.x)*Je,(s.y*u-this.y)*Je)}toString(){return`${this.z}/${this.x}/${this.y}`}}class IQ{constructor(s,u){this.wrap=s,this.canonical=u,this.key=by(s,u.z,u.z,u.x,u.y)}}class yl{constructor(s,u,m,y,S){if(this.terrainRttPosMatrix32f=null,s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=u,this.canonical=new OF(m,+y,+S),this.key=by(u,s,m,y,S)}clone(){return new yl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let u=this.canonical.z-s;return s>this.canonical.z?new yl(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new yl(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(s,u){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let m=this.canonical.z-s;return s>this.canonical.z?by(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y):by(this.wrap*+u,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap)return!1;let u=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u}children(s){if(this.overscaledZ>=s)return[new yl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let u=this.canonical.z+1,m=2*this.canonical.x,y=2*this.canonical.y;return[new yl(u,this.wrap,u,m,y),new yl(u,this.wrap,u,m+1,y),new yl(u,this.wrap,u,m,y+1),new yl(u,this.wrap,u,m+1,y+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new yl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new yl(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new IQ(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new pw(s.x-this.wrap,s.y))}}function by(c,s,u,m,y){(c*=2)<0&&(c=-1*c-1);let S=1<<u;return(S*S*c+S*y+m).toString(36)+u.toString(36)+s.toString(36)}function dw(c,s){return s?c.properties[s]:c.id}Ut("CanonicalTileID",OF),Ut("OverscaledTileID",yl,{omit:["terrainRttPosMatrix32f"]});class Ym{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(s){return this.minX=Math.min(this.minX,s.x),this.minY=Math.min(this.minY,s.y),this.maxX=Math.max(this.maxX,s.x),this.maxY=Math.max(this.maxY,s.y),this}expandBy(s){return this.minX-=s,this.minY-=s,this.maxX+=s,this.maxY+=s,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(s){return this.expandBy(-s)}map(s){let u=new Ym;return u.extend(s(new l(this.minX,this.minY))),u.extend(s(new l(this.maxX,this.minY))),u.extend(s(new l(this.minX,this.maxY))),u.extend(s(new l(this.maxX,this.maxY))),u}static fromPoints(s){let u=new Ym;for(let m of s)u.extend(m);return u}contains(s){return s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(s){return!this.empty()&&!s.empty()&&s.minX>=this.minX&&s.maxX<=this.maxX&&s.minY>=this.minY&&s.maxY<=this.maxY}intersects(s){return!this.empty()&&!s.empty()&&s.minX<=this.maxX&&s.maxX>=this.minX&&s.minY<=this.maxY&&s.maxY>=this.minY}}class AQ{constructor(s){this._stringToNumber={},this._numberToString=[];for(let u=0;u<s.length;u++){let m=s[u];this._stringToNumber[m]=u,this._numberToString[u]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class MQ{constructor(s,u,m,y,S){this.type="Feature",this._vectorTileFeature=s,s._z=u,s._x=m,s._y=y,this.properties=s.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){let s={geometry:this.geometry};for(let u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(s[u]=this[u]);return s}}class CQ{constructor(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Vm(Je,16,0),this.grid3D=new Vm(Je,16,0),this.featureIndexArray=new Pe,this.promoteId=u}insert(s,u,m,y,S,I){let C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,y,S);let O=I?this.grid3D:this.grid;for(let q=0;q<u.length;q++){let z=u[q],G=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<z.length;Y++){let X=z[Y];G[0]=Math.min(G[0],X.x),G[1]=Math.min(G[1],X.y),G[2]=Math.max(G[2],X.x),G[3]=Math.max(G[3],X.y)}G[0]<Je&&G[1]<Je&&G[2]>=0&&G[3]>=0&&O.insert(C,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new $X(new bF(this.rawTileData)).layers,this.sourceLayerCoder=new AQ(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,u,m,y){this.loadVTLayers();let S=s.params,I=Je/s.tileSize/s.scale,C=Yf(S.filter),O=s.queryGeometry,q=s.queryPadding*I,z=Ym.fromPoints(O),G=this.grid.query(z.minX-q,z.minY-q,z.maxX+q,z.maxY+q),Y=Ym.fromPoints(s.cameraQueryGeometry).expandBy(q),X=this.grid3D.query(Y.minX,Y.minY,Y.maxX,Y.maxY,(le,ge,ke,Te)=>function(Me,$e,et,ht,Rt){for(let At of Me)if($e<=At.x&&et<=At.y&&ht>=At.x&&Rt>=At.y)return!0;let xt=[new l($e,et),new l($e,Rt),new l(ht,Rt),new l(ht,et)];if(Me.length>2){for(let At of xt)if(py(Me,At))return!0}for(let At=0;At<Me.length-1;At++)if(zGe(Me[At],Me[At+1],xt))return!0;return!1}(s.cameraQueryGeometry,le-q,ge-q,ke+q,Te+q));for(let le of X)G.push(le);G.sort(u$e);let Q={},re;for(let le=0;le<G.length;le++){let ge=G[le];if(ge===re)continue;re=ge;let ke=this.featureIndexArray.get(ge),Te=null;this.loadMatchingFeature(Q,ke.bucketIndex,ke.sourceLayerIndex,ke.featureIndex,C,S.layers,S.availableImages,u,m,y,(Me,$e,et)=>(Te||(Te=zc(Me)),$e.queryIntersectsFeature({queryGeometry:O,feature:Me,featureState:et,geometry:Te,zoom:this.z,transform:s.transform,pixelsToTileUnits:I,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return Q}loadMatchingFeature(s,u,m,y,S,I,C,O,q,z,G){let Y=this.bucketLayerIDs[u];if(I&&!Y.some(le=>I.has(le)))return;let X=this.sourceLayerCoder.decode(m),Q=this.vtLayers[X].feature(y);if(S.needGeometry){let le=Bu(Q,!0);if(!S.filter(new jn(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!S.filter(new jn(this.tileID.overscaledZ),Q))return;let re=this.getId(Q,X);for(let le=0;le<Y.length;le++){let ge=Y[le];if(I&&!I.has(ge))continue;let ke=O[ge];if(!ke)continue;let Te={};re&&z&&(Te=z.getState(ke.sourceLayer||"_geojsonTileLayer",re));let Me=nt({},q[ge]);Me.paint=PQ(Me.paint,ke.paint,Q,Te,C),Me.layout=PQ(Me.layout,ke.layout,Q,Te,C);let $e=!G||G(Q,ke,Te);if(!$e)continue;let et=new MQ(Q,this.z,this.x,this.y,re);et.layer=Me;let ht=s[ge];ht===void 0&&(ht=s[ge]=[]),ht.push({featureIndex:y,feature:et,intersectionZ:$e})}}lookupSymbolFeatures(s,u,m,y,S,I,C,O){let q={};this.loadVTLayers();let z=Yf(S);for(let G of s)this.loadMatchingFeature(q,m,y,G,z,I,C,O,u);return q}hasLayer(s){for(let u of this.bucketLayerIDs)for(let m of u)if(s===m)return!0;return!1}getId(s,u){var m;let y=s.id;return this.promoteId&&(y=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof y=="boolean"&&(y=Number(y)),y===void 0&&!((m=s.properties)===null||m===void 0)&&m.cluster&&this.promoteId&&(y=Number(s.properties.cluster_id))),y}}function PQ(c,s,u,m,y){return rt(c,(S,I)=>{let C=s instanceof oy?s.get(I):null;return C&&C.evaluate?C.evaluate(u,m,y):C})}function u$e(c,s){return s-c}function RQ(c,s,u,m,y){let S=[];for(let I=0;I<c.length;I++){let C=c[I],O;for(let q=0;q<C.length-1;q++){let z=C[q],G=C[q+1];z.x<s&&G.x<s||(z.x<s?z=new l(s,z.y+(s-z.x)/(G.x-z.x)*(G.y-z.y))._round():G.x<s&&(G=new l(s,z.y+(s-z.x)/(G.x-z.x)*(G.y-z.y))._round()),z.y<u&&G.y<u||(z.y<u?z=new l(z.x+(u-z.y)/(G.y-z.y)*(G.x-z.x),u)._round():G.y<u&&(G=new l(z.x+(u-z.y)/(G.y-z.y)*(G.x-z.x),u)._round()),z.x>=m&&G.x>=m||(z.x>=m?z=new l(m,z.y+(m-z.x)/(G.x-z.x)*(G.y-z.y))._round():G.x>=m&&(G=new l(m,z.y+(m-z.x)/(G.x-z.x)*(G.y-z.y))._round()),z.y>=y&&G.y>=y||(z.y>=y?z=new l(z.x+(y-z.y)/(G.y-z.y)*(G.x-z.x),y)._round():G.y>=y&&(G=new l(z.x+(y-z.y)/(G.y-z.y)*(G.x-z.x),y)._round()),O&&z.equals(O[O.length-1])||(O=[z],S.push(O)),O.push(G)))))}}return S}Ut("FeatureIndex",CQ,{omit:["rawTileData","sourceLayerCoder"]});class Lp extends l{constructor(s,u,m,y){super(s,u),this.angle=m,y!==void 0&&(this.segment=y)}clone(){return new Lp(this.x,this.y,this.angle,this.segment)}}function OQ(c,s,u,m,y){if(s.segment===void 0||u===0)return!0;let S=s,I=s.segment+1,C=0;for(;C>-u/2;){if(I--,I<0)return!1;C-=c[I].dist(S),S=c[I]}C+=c[I].dist(c[I+1]),I++;let O=[],q=0;for(;C<u/2;){let z=c[I],G=c[I+1];if(!G)return!1;let Y=c[I-1].angleTo(z)-z.angleTo(G);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:C,angleDelta:Y}),q+=Y;C-O[0].distance>m;)q-=O.shift().angleDelta;if(q>y)return!1;I++,C+=z.dist(G)}return!0}function LQ(c){let s=0;for(let u=0;u<c.length-1;u++)s+=c[u].dist(c[u+1]);return s}function DQ(c,s,u){return c?.6*s*u:0}function NQ(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function c$e(c,s,u,m,y,S){let I=DQ(u,y,S),C=NQ(u,m)*S,O=0,q=LQ(c)/2;for(let z=0;z<c.length-1;z++){let G=c[z],Y=c[z+1],X=G.dist(Y);if(O+X>q){let Q=(q-O)/X,re=Bl.number(G.x,Y.x,Q),le=Bl.number(G.y,Y.y,Q),ge=new Lp(re,le,Y.angleTo(G),z);return ge._round(),!I||OQ(c,ge,C,I,s)?ge:void 0}O+=X}}function f$e(c,s,u,m,y,S,I,C,O){let q=DQ(m,S,I),z=NQ(m,y),G=z*I,Y=c[0].x===0||c[0].x===O||c[0].y===0||c[0].y===O;return s-G<s/4&&(s=G+s/4),kQ(c,Y?s/2*C%s:(z/2+2*S)*I*C%s,s,q,u,G,Y,!1,O)}function kQ(c,s,u,m,y,S,I,C,O){let q=S/2,z=LQ(c),G=0,Y=s-u,X=[];for(let Q=0;Q<c.length-1;Q++){let re=c[Q],le=c[Q+1],ge=re.dist(le),ke=le.angleTo(re);for(;Y+u<G+ge;){Y+=u;let Te=(Y-G)/ge,Me=Bl.number(re.x,le.x,Te),$e=Bl.number(re.y,le.y,Te);if(Me>=0&&Me<O&&$e>=0&&$e<O&&Y-q>=0&&Y+q<=z){let et=new Lp(Me,$e,ke,Q);et._round(),m&&!OQ(c,et,S,m,y)||X.push(et)}}G+=ge}return C||X.length||I||(X=kQ(c,G/2,u,m,y,S,I,!0,O)),X}function qQ(c,s,u,m){let y=[],S=c.image,I=S.pixelRatio,C=S.paddedRect.w-2,O=S.paddedRect.h-2,q={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom},z=S.stretchX||[[0,C]],G=S.stretchY||[[0,O]],Y=(it,fr)=>it+fr[1]-fr[0],X=z.reduce(Y,0),Q=G.reduce(Y,0),re=C-X,le=O-Q,ge=0,ke=X,Te=0,Me=Q,$e=0,et=re,ht=0,Rt=le;if(S.content&&m){let it=S.content,fr=it[2]-it[0],yr=it[3]-it[1];(S.textFitWidth||S.textFitHeight)&&(q=fQ(c)),ge=uM(z,0,it[0]),Te=uM(G,0,it[1]),ke=uM(z,it[0],it[2]),Me=uM(G,it[1],it[3]),$e=it[0]-ge,ht=it[1]-Te,et=fr-ke,Rt=yr-Me}let xt=q.x1,At=q.y1,Jt=q.x2-xt,Tt=q.y2-At,Mt=(it,fr,yr,nr)=>{let Yt=cM(it.stretch-ge,ke,Jt,xt),en=fM(it.fixed-$e,et,it.stretch,X),_i=cM(fr.stretch-Te,Me,Tt,At),ro=fM(fr.fixed-ht,Rt,fr.stretch,Q),Wo=cM(yr.stretch-ge,ke,Jt,xt),_l=fM(yr.fixed-$e,et,yr.stretch,X),ns=cM(nr.stretch-Te,Me,Tt,At),Co=fM(nr.fixed-ht,Rt,nr.stretch,Q),ui=new l(Yt,_i),mo=new l(Wo,_i),Po=new l(Wo,ns),Ro=new l(Yt,ns),Pa=new l(en/I,ro/I),xl=new l(_l/I,Co/I),go=s*Math.PI/180;if(go){let vo=Math.sin(go),yo=Math.cos(go),Zi=[yo,-vo,vo,yo];ui._matMult(Zi),mo._matMult(Zi),Ro._matMult(Zi),Po._matMult(Zi)}let is=it.stretch+it.fixed,no=fr.stretch+fr.fixed;return{tl:ui,tr:mo,bl:Ro,br:Po,tex:{x:S.paddedRect.x+1+is,y:S.paddedRect.y+1+no,w:yr.stretch+yr.fixed-is,h:nr.stretch+nr.fixed-no},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Pa,pixelOffsetBR:xl,minFontScaleX:et/I/Jt,minFontScaleY:Rt/I/Tt,isSDF:u}};if(m&&(S.stretchX||S.stretchY)){let it=FQ(z,re,X),fr=FQ(G,le,Q);for(let yr=0;yr<it.length-1;yr++){let nr=it[yr],Yt=it[yr+1];for(let en=0;en<fr.length-1;en++)y.push(Mt(nr,fr[en],Yt,fr[en+1]))}}else y.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:O+1}));return y}function uM(c,s,u){let m=0;for(let y of c)m+=Math.max(s,Math.min(u,y[1]))-Math.max(s,Math.min(u,y[0]));return m}function FQ(c,s,u){let m=[{fixed:-1,stretch:0}];for(let[y,S]of c){let I=m[m.length-1];m.push({fixed:y-I.stretch,stretch:I.stretch}),m.push({fixed:y-I.stretch,stretch:I.stretch+(S-y)})}return m.push({fixed:s+1,stretch:u}),m}function cM(c,s,u,m){return c/s*u+m}function fM(c,s,u,m){return c-s*u/m}Ut("Anchor",Lp);class hM{constructor(s,u,m,y,S,I,C,O,q,z){var G;if(this.boxStartIndex=s.length,q){let Y=I.top,X=I.bottom,Q=I.collisionPadding;Q&&(Y-=Q[1],X+=Q[3]);let re=X-Y;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let Y=!((G=I.image)===null||G===void 0)&&G.content&&(I.image.textFitWidth||I.image.textFitHeight)?fQ(I):{x1:I.left,y1:I.top,x2:I.right,y2:I.bottom};Y.y1=Y.y1*C-O[0],Y.y2=Y.y2*C+O[2],Y.x1=Y.x1*C-O[3],Y.x2=Y.x2*C+O[1];let X=I.collisionPadding;if(X&&(Y.x1-=X[0]*C,Y.y1-=X[1]*C,Y.x2+=X[2]*C,Y.y2+=X[3]*C),z){let Q=new l(Y.x1,Y.y1),re=new l(Y.x2,Y.y1),le=new l(Y.x1,Y.y2),ge=new l(Y.x2,Y.y2),ke=z*Math.PI/180;Q._rotate(ke),re._rotate(ke),le._rotate(ke),ge._rotate(ke),Y.x1=Math.min(Q.x,re.x,le.x,ge.x),Y.x2=Math.max(Q.x,re.x,le.x,ge.x),Y.y1=Math.min(Q.y,re.y,le.y,ge.y),Y.y2=Math.max(Q.y,re.y,le.y,ge.y)}s.emplaceBack(u.x,u.y,Y.x1,Y.y1,Y.x2,Y.y2,m,y,S)}this.boxEndIndex=s.length}}class h$e{constructor(s=[],u=(m,y)=>m<y?-1:m>y?1:0){if(this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:u,compare:m}=this,y=u[s];for(;s>0;){let S=s-1>>1,I=u[S];if(m(y,I)>=0)break;u[s]=I,s=S}u[s]=y}_down(s){let{data:u,compare:m}=this,y=this.length>>1,S=u[s];for(;s<y;){let I=1+(s<<1),C=I+1;if(C<this.length&&m(u[C],u[I])<0&&(I=C),m(u[I],S)>=0)break;u[s]=u[I],s=I}u[s]=S}}function p$e(c,s=1,u=!1){let m=Ym.fromPoints(c[0]),y=Math.min(m.width(),m.height()),S=y/2,I=new h$e([],d$e),{minX:C,minY:O,maxX:q,maxY:z}=m;if(y===0)return new l(C,O);for(let X=C;X<q;X+=y)for(let Q=O;Q<z;Q+=y)I.push(new wy(X+S,Q+S,S,c));let G=function(X){let Q=0,re=0,le=0,ge=X[0];for(let ke=0,Te=ge.length,Me=Te-1;ke<Te;Me=ke++){let $e=ge[ke],et=ge[Me],ht=$e.x*et.y-et.x*$e.y;re+=($e.x+et.x)*ht,le+=($e.y+et.y)*ht,Q+=3*ht}return new wy(re/Q,le/Q,0,X)}(c),Y=I.length;for(;I.length;){let X=I.pop();(X.d>G.d||!G.d)&&(G=X,u&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,Y)),X.max-G.d<=s||(S=X.h/2,I.push(new wy(X.p.x-S,X.p.y-S,S,c)),I.push(new wy(X.p.x+S,X.p.y-S,S,c)),I.push(new wy(X.p.x-S,X.p.y+S,S,c)),I.push(new wy(X.p.x+S,X.p.y+S,S,c)),Y+=4)}return u&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${G.d}`)),G.p}function d$e(c,s){return s.max-c.max}function wy(c,s,u,m){this.p=new l(c,s),this.h=u,this.d=function(y,S){let I=!1,C=1/0;for(let O=0;O<S.length;O++){let q=S[O];for(let z=0,G=q.length,Y=G-1;z<G;Y=z++){let X=q[z],Q=q[Y];X.y>y.y!=Q.y>y.y&&y.x<(Q.x-X.x)*(y.y-X.y)/(Q.y-X.y)+X.x&&(I=!I),C=Math.min(C,wX(y,X,Q))}}return(I?1:-1)*Math.sqrt(C)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Ho;i.aE=void 0,(Ho=i.aE||(i.aE={}))[Ho.center=1]="center",Ho[Ho.left=2]="left",Ho[Ho.right=3]="right",Ho[Ho.top=4]="top",Ho[Ho.bottom=5]="bottom",Ho[Ho["top-left"]=6]="top-left",Ho[Ho["top-right"]=7]="top-right",Ho[Ho["bottom-left"]=8]="bottom-left",Ho[Ho["bottom-right"]=9]="bottom-right";let LF=Number.POSITIVE_INFINITY;function jQ(c,s){return s[1]!==LF?function(u,m,y){let S=0,I=0;switch(m=Math.abs(m),y=Math.abs(y),u){case"top-right":case"top-left":case"top":I=y-7;break;case"bottom-right":case"bottom-left":case"bottom":I=7-y}switch(u){case"top-right":case"bottom-right":case"right":S=-m;break;case"top-left":case"bottom-left":case"left":S=m}return[S,I]}(c,s[0],s[1]):function(u,m){let y=0,S=0;m<0&&(m=0);let I=m/Math.SQRT2;switch(u){case"top-right":case"top-left":S=I-7;break;case"bottom-right":case"bottom-left":S=7-I;break;case"bottom":S=7-m;break;case"top":S=m-7}switch(u){case"top-right":case"bottom-right":y=-I;break;case"top-left":case"bottom-left":y=I;break;case"left":y=m;break;case"right":y=-m}return[y,S]}(c,s[0])}function zQ(c,s,u){var m;let y=c.layout,S=(m=y.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(s,{},u);if(S){let C=S.values,O=[];for(let q=0;q<C.length;q+=2){let z=O[q]=C[q],G=C[q+1].map(Y=>Y*po);z.startsWith("top")?G[1]-=7:z.startsWith("bottom")&&(G[1]+=7),O[q+1]=G}return new oa(O)}let I=y.get("text-variable-anchor");if(I){let C;C=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(s,{},u)*po,LF]:y.get("text-offset").evaluate(s,{},u).map(q=>q*po);let O=[];for(let q of I)O.push(q,jQ(q,C));return new oa(O)}return null}function DF(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function m$e(c,s,u,m,y,S,I,C,O,q,z,G){let Y=S.textMaxSize.evaluate(s,{});Y===void 0&&(Y=I);let X=c.layers[0].layout,Q=X.get("icon-offset").evaluate(s,{},z),re=BQ(u.horizontal),le=I/24,ge=c.tilePixelRatio*le,ke=c.tilePixelRatio*Y/24,Te=c.tilePixelRatio*C,Me=c.tilePixelRatio*X.get("symbol-spacing"),$e=X.get("text-padding")*c.tilePixelRatio,et=function(yr,nr,Yt,en=1){let _i=yr.get("icon-padding").evaluate(nr,{},Yt),ro=_i&&_i.values;return[ro[0]*en,ro[1]*en,ro[2]*en,ro[3]*en]}(X,s,z,c.tilePixelRatio),ht=X.get("text-max-angle")/180*Math.PI,Rt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",xt=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",At=X.get("symbol-placement"),Jt=Me/2,Tt=X.get("icon-text-fit"),Mt;m&&Tt!=="none"&&(c.allowVerticalPlacement&&u.vertical&&(Mt=hQ(m,u.vertical,Tt,X.get("icon-text-fit-padding"),Q,le)),re&&(m=hQ(m,re,Tt,X.get("icon-text-fit-padding"),Q,le)));let it=z?G.line.getGranularityForZoomLevel(z.z):1,fr=(yr,nr)=>{nr.x<0||nr.x>=Je||nr.y<0||nr.y>=Je||function(Yt,en,_i,ro,Wo,_l,ns,Co,ui,mo,Po,Ro,Pa,xl,go,is,no,vo,yo,Zi,Jn,Vu,Ey,Gu,y$e){let Sy=Yt.addToLineVertexArray(en,_i),Km,Ty,Iy,Ay,HQ=0,WQ=0,ZQ=0,YQ=0,BF=-1,VF=-1,ih={},KQ=Mp("");if(Yt.allowVerticalPlacement&&ro.vertical){let ua=Co.layout.get("text-rotate").evaluate(Jn,{},Gu)+90;Iy=new hM(ui,en,mo,Po,Ro,ro.vertical,Pa,xl,go,ua),ns&&(Ay=new hM(ui,en,mo,Po,Ro,ns,no,vo,go,ua))}if(Wo){let ua=Co.layout.get("icon-rotate").evaluate(Jn,{}),bl=Co.layout.get("icon-text-fit")!=="none",Xm=qQ(Wo,ua,Ey,bl),Hu=ns?qQ(ns,ua,Ey,bl):void 0;Ty=new hM(ui,en,mo,Po,Ro,Wo,no,vo,!1,ua),HQ=4*Xm.length;let Qm=Yt.iconSizeData,Uc=null;Qm.kind==="source"?(Uc=[nh*Co.layout.get("icon-size").evaluate(Jn,{})],Uc[0]>Rp&&zt(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Qm.kind==="composite"&&(Uc=[nh*Vu.compositeIconSizes[0].evaluate(Jn,{},Gu),nh*Vu.compositeIconSizes[1].evaluate(Jn,{},Gu)],(Uc[0]>Rp||Uc[1]>Rp)&&zt(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Yt.addSymbols(Yt.icon,Xm,Uc,Zi,yo,Jn,i.ao.none,en,Sy.lineStartIndex,Sy.lineLength,-1,Gu),BF=Yt.icon.placedSymbolArray.length-1,Hu&&(WQ=4*Hu.length,Yt.addSymbols(Yt.icon,Hu,Uc,Zi,yo,Jn,i.ao.vertical,en,Sy.lineStartIndex,Sy.lineLength,-1,Gu),VF=Yt.icon.placedSymbolArray.length-1)}let XQ=Object.keys(ro.horizontal);for(let ua of XQ){let bl=ro.horizontal[ua];if(!Km){KQ=Mp(bl.text);let Hu=Co.layout.get("text-rotate").evaluate(Jn,{},Gu);Km=new hM(ui,en,mo,Po,Ro,bl,Pa,xl,go,Hu)}let Xm=bl.positionedLines.length===1;if(ZQ+=UQ(Yt,en,bl,_l,Co,go,Jn,is,Sy,ro.vertical?i.ao.horizontal:i.ao.horizontalOnly,Xm?XQ:[ua],ih,BF,Vu,Gu),Xm)break}ro.vertical&&(YQ+=UQ(Yt,en,ro.vertical,_l,Co,go,Jn,is,Sy,i.ao.vertical,["vertical"],ih,VF,Vu,Gu));let _$e=Km?Km.boxStartIndex:Yt.collisionBoxArray.length,x$e=Km?Km.boxEndIndex:Yt.collisionBoxArray.length,b$e=Iy?Iy.boxStartIndex:Yt.collisionBoxArray.length,w$e=Iy?Iy.boxEndIndex:Yt.collisionBoxArray.length,E$e=Ty?Ty.boxStartIndex:Yt.collisionBoxArray.length,S$e=Ty?Ty.boxEndIndex:Yt.collisionBoxArray.length,T$e=Ay?Ay.boxStartIndex:Yt.collisionBoxArray.length,I$e=Ay?Ay.boxEndIndex:Yt.collisionBoxArray.length,$u=-1,dM=(ua,bl)=>ua&&ua.circleDiameter?Math.max(ua.circleDiameter,bl):bl;$u=dM(Km,$u),$u=dM(Iy,$u),$u=dM(Ty,$u),$u=dM(Ay,$u);let QQ=$u>-1?1:0;QQ&&($u*=y$e/po),Yt.glyphOffsetArray.length>=xy.MAX_GLYPHS&&zt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jn.sortKey!==void 0&&Yt.addToSortKeyRanges(Yt.symbolInstances.length,Jn.sortKey);let A$e=zQ(Co,Jn,Gu),[M$e,C$e]=function(ua,bl){let Xm=ua.length,Hu=bl==null?void 0:bl.values;if((Hu==null?void 0:Hu.length)>0)for(let Qm=0;Qm<Hu.length;Qm+=2){let Uc=Hu[Qm+1];ua.emplaceBack(i.aE[Hu[Qm]],Uc[0],Uc[1])}return[Xm,ua.length]}(Yt.textAnchorOffsets,A$e);Yt.symbolInstances.emplaceBack(en.x,en.y,ih.right>=0?ih.right:-1,ih.center>=0?ih.center:-1,ih.left>=0?ih.left:-1,ih.vertical||-1,BF,VF,KQ,_$e,x$e,b$e,w$e,E$e,S$e,T$e,I$e,mo,ZQ,YQ,HQ,WQ,QQ,0,Pa,$u,M$e,C$e)}(c,nr,yr,u,m,y,Mt,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,ge,[$e,$e,$e,$e],Rt,O,Te,et,xt,Q,s,S,q,z,I)};if(At==="line")for(let yr of RQ(s.geometry,0,0,Je,Je)){let nr=Zm(yr,it),Yt=f$e(nr,Me,ht,u.vertical||re,m,24,ke,c.overscaling,Je);for(let en of Yt)re&&g$e(c,re.text,Jt,en)||fr(nr,en)}else if(At==="line-center"){for(let yr of s.geometry)if(yr.length>1){let nr=Zm(yr,it),Yt=c$e(nr,ht,u.vertical||re,m,24,ke);Yt&&fr(nr,Yt)}}else if(s.type==="Polygon")for(let yr of Rm(s.geometry,0)){let nr=p$e(yr,16);fr(Zm(yr[0],it,!0),new Lp(nr.x,nr.y,0))}else if(s.type==="LineString")for(let yr of s.geometry){let nr=Zm(yr,it);fr(nr,new Lp(nr[0].x,nr[0].y,0))}else if(s.type==="Point")for(let yr of s.geometry)for(let nr of yr)fr([nr],new Lp(nr.x,nr.y,0))}function UQ(c,s,u,m,y,S,I,C,O,q,z,G,Y,X,Q){let re=function(ke,Te,Me,$e,et,ht,Rt,xt){let At=$e.layout.get("text-rotate").evaluate(ht,{})*Math.PI/180,Jt=[];for(let Tt of Te.positionedLines)for(let Mt of Tt.positionedGlyphs){if(!Mt.rect)continue;let it=Mt.rect||{},fr=4,yr=!0,nr=1,Yt=0,en=(et||xt)&&Mt.vertical,_i=Mt.metrics.advance*Mt.scale/2;if(xt&&Te.verticalizable&&(Yt=Tt.lineOffset/2-(Mt.imageName?-(po-Mt.metrics.width*Mt.scale)/2:(Mt.scale-1)*po)),Mt.imageName){let vo=Rt[Mt.imageName];yr=vo.sdf,nr=vo.pixelRatio,fr=1/nr}let ro=et?[Mt.x+_i,Mt.y]:[0,0],Wo=et?[0,0]:[Mt.x+_i+Me[0],Mt.y+Me[1]-Yt],_l=[0,0];en&&(_l=Wo,Wo=[0,0]);let ns=Mt.metrics.isDoubleResolution?2:1,Co=(Mt.metrics.left-fr)*Mt.scale-_i+Wo[0],ui=(-Mt.metrics.top-fr)*Mt.scale+Wo[1],mo=Co+it.w/ns*Mt.scale/nr,Po=ui+it.h/ns*Mt.scale/nr,Ro=new l(Co,ui),Pa=new l(mo,ui),xl=new l(Co,Po),go=new l(mo,Po);if(en){let vo=new l(-_i,_i- -17),yo=-Math.PI/2,Zi=12-_i,Jn=new l(22-Zi,-(Mt.imageName?Zi:0)),Vu=new l(..._l);Ro._rotateAround(yo,vo)._add(Jn)._add(Vu),Pa._rotateAround(yo,vo)._add(Jn)._add(Vu),xl._rotateAround(yo,vo)._add(Jn)._add(Vu),go._rotateAround(yo,vo)._add(Jn)._add(Vu)}if(At){let vo=Math.sin(At),yo=Math.cos(At),Zi=[yo,-vo,vo,yo];Ro._matMult(Zi),Pa._matMult(Zi),xl._matMult(Zi),go._matMult(Zi)}let is=new l(0,0),no=new l(0,0);Jt.push({tl:Ro,tr:Pa,bl:xl,br:go,tex:it,writingMode:Te.writingMode,glyphOffset:ro,sectionIndex:Mt.sectionIndex,isSDF:yr,pixelOffsetTL:is,pixelOffsetBR:no,minFontScaleX:0,minFontScaleY:0})}return Jt}(0,u,C,y,S,I,m,c.allowVerticalPlacement),le=c.textSizeData,ge=null;le.kind==="source"?(ge=[nh*y.layout.get("text-size").evaluate(I,{})],ge[0]>Rp&&zt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):le.kind==="composite"&&(ge=[nh*X.compositeTextSizes[0].evaluate(I,{},Q),nh*X.compositeTextSizes[1].evaluate(I,{},Q)],(ge[0]>Rp||ge[1]>Rp)&&zt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,re,ge,C,S,I,q,s,O.lineStartIndex,O.lineLength,Y,Q);for(let ke of z)G[ke]=c.text.placedSymbolArray.length-1;return 4*re.length}function BQ(c){for(let s in c)return c[s];return null}function g$e(c,s,u,m){let y=c.compareText;if(s in y){let S=y[s];for(let I=S.length-1;I>=0;I--)if(m.dist(S[I])<u)return!0}else y[s]=[];return y[s].push(m),!1}let VQ=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class NF{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[u,m]=new Uint8Array(s,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");let y=m>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);let S=VQ[15&m];if(!S)throw new Error("Unrecognized array type.");let[I]=new Uint16Array(s,2,1),[C]=new Uint32Array(s,4,1);return new NF(C,I,S,s)}constructor(s,u=64,m=Float64Array,y){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=m,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;let S=VQ.indexOf(this.ArrayType),I=2*s*this.ArrayType.BYTES_PER_ELEMENT,C=s*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-C%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${m}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+O,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+I+C+O),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+O,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=s)}add(s,u){let m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=s,this.coords[this._pos++]=u,m}finish(){let s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return kF(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,u,m,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:S,coords:I,nodeSize:C}=this,O=[0,S.length-1,0],q=[];for(;O.length;){let z=O.pop()||0,G=O.pop()||0,Y=O.pop()||0;if(G-Y<=C){for(let le=Y;le<=G;le++){let ge=I[2*le],ke=I[2*le+1];ge>=s&&ge<=m&&ke>=u&&ke<=y&&q.push(S[le])}continue}let X=Y+G>>1,Q=I[2*X],re=I[2*X+1];Q>=s&&Q<=m&&re>=u&&re<=y&&q.push(S[X]),(z===0?s<=Q:u<=re)&&(O.push(Y),O.push(X-1),O.push(1-z)),(z===0?m>=Q:y>=re)&&(O.push(X+1),O.push(G),O.push(1-z))}return q}within(s,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:y,coords:S,nodeSize:I}=this,C=[0,y.length-1,0],O=[],q=m*m;for(;C.length;){let z=C.pop()||0,G=C.pop()||0,Y=C.pop()||0;if(G-Y<=I){for(let le=Y;le<=G;le++)$Q(S[2*le],S[2*le+1],s,u)<=q&&O.push(y[le]);continue}let X=Y+G>>1,Q=S[2*X],re=S[2*X+1];$Q(Q,re,s,u)<=q&&O.push(y[X]),(z===0?s-m<=Q:u-m<=re)&&(C.push(Y),C.push(X-1),C.push(1-z)),(z===0?s+m>=Q:u+m>=re)&&(C.push(X+1),C.push(G),C.push(1-z))}return O}}function kF(c,s,u,m,y,S){if(y-m<=u)return;let I=m+y>>1;GQ(c,s,I,m,y,S),kF(c,s,u,m,I-1,1-S),kF(c,s,u,I+1,y,1-S)}function GQ(c,s,u,m,y,S){for(;y>m;){if(y-m>600){let q=y-m+1,z=u-m+1,G=Math.log(q),Y=.5*Math.exp(2*G/3),X=.5*Math.sqrt(G*Y*(q-Y)/q)*(z-q/2<0?-1:1);GQ(c,s,u,Math.max(m,Math.floor(u-z*Y/q+X)),Math.min(y,Math.floor(u+(q-z)*Y/q+X)),S)}let I=s[2*u+S],C=m,O=y;for(mw(c,s,m,u),s[2*y+S]>I&&mw(c,s,m,y);C<O;){for(mw(c,s,C,O),C++,O--;s[2*C+S]<I;)C++;for(;s[2*O+S]>I;)O--}s[2*m+S]===I?mw(c,s,m,O):(O++,mw(c,s,O,y)),O<=u&&(m=O+1),u<=O&&(y=O-1)}}function mw(c,s,u,m){qF(c,u,m),qF(s,2*u,2*m),qF(s,2*u+1,2*m+1)}function qF(c,s,u){let m=c[s];c[s]=c[u],c[u]=m}function $Q(c,s,u,m){let y=c-u,S=s-m;return y*y+S*S}var FF;i.cx=void 0,(FF=i.cx||(i.cx={})).create="create",FF.load="load",FF.fullLoad="fullLoad";let pM=null,gw=[],jF=1e3/60,zF="loadTime",UF="fullLoadTime",v$e={mark(c){performance.mark(c)},frame(c){let s=c;pM!=null&&gw.push(s-pM),pM=s},clearMetrics(){pM=null,gw=[],performance.clearMeasures(zF),performance.clearMeasures(UF);for(let c in i.cx)performance.clearMarks(i.cx[c])},getPerformanceMetrics(){performance.measure(zF,i.cx.create,i.cx.load),performance.measure(UF,i.cx.create,i.cx.fullLoad);let c=performance.getEntriesByName(zF)[0].duration,s=performance.getEntriesByName(UF)[0].duration,u=gw.length,m=1/(gw.reduce((S,I)=>S+I,0)/u/1e3),y=gw.filter(S=>S>jF).reduce((S,I)=>S+(I-jF)/jF,0);return{loadTime:c,fullLoadTime:s,fps:m,percentDroppedFrames:y/(u+y)*100,totalFrames:u}}};i.$=Je,i.A=F,i.B=function([c,s,u]){return s+=90,s*=Math.PI/180,u*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(u),y:c*Math.sin(s)*Math.sin(u),z:c*Math.cos(u)}},i.C=Bl,i.D=Kt,i.E=tt,i.F=jn,i.G=Um,i.H=function(c){if(Xt==null){let s=c.navigator?c.navigator.userAgent:null;Xt=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Xt},i.I=wF,i.J=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new s$e(()=>this.process()),this.subscription=dr(this.target,"message",u=>this.receive(u),!1),this.globalScope=$t(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((u,m)=>{let y=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=s?dr(s.signal,"abort",()=>{S==null||S.unsubscribe(),delete this.resolveRejects[y];let O={id:y,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(O)},l$e):null;this.resolveRejects[y]={resolve:O=>{S==null||S.unsubscribe(),u(O)},reject:O=>{S==null||S.unsubscribe(),m(O)}};let I=[],C=Object.assign(Object.assign({},c),{id:y,sourceMapId:this.mapId,origin:location.origin,data:wp(c.data,I)});this.target.postMessage(C,{transfer:I})})}receive(c){let s=c.data,u=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[u];let m=this.abortControllers[u];return delete this.abortControllers[u],void(m&&m.abort())}if($t(self)||s.mustQueue)return this.tasks[u]=s,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,s)}}process(){if(this.taskQueue.length===0)return;let c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return o(this,void 0,void 0,function*(){if(s.type==="<response>"){let y=this.resolveRejects[c];return delete this.resolveRejects[c],y?void(s.error?y.reject(Qf(s.error)):y.resolve(Qf(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let u=Qf(s.data),m=new AbortController;this.abortControllers[c]=m;try{let y=yield this.messageHandlers[s.type](s.sourceMapId,u,m);this.completeTask(c,null,y)}catch(y){this.completeTask(c,y)}})}completeTask(c,s,u){let m=[];delete this.abortControllers[c];let y={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?wp(s):null,data:wp(u,m)};this.target.postMessage(y,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.K=se,i.L=function(){var c=new F(16);return F!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},i.M=function(c,s,u){var m,y,S,I,C,O,q,z,G,Y,X,Q,re=u[0],le=u[1],ge=u[2];return s===c?(c[12]=s[0]*re+s[4]*le+s[8]*ge+s[12],c[13]=s[1]*re+s[5]*le+s[9]*ge+s[13],c[14]=s[2]*re+s[6]*le+s[10]*ge+s[14],c[15]=s[3]*re+s[7]*le+s[11]*ge+s[15]):(y=s[1],S=s[2],I=s[3],C=s[4],O=s[5],q=s[6],z=s[7],G=s[8],Y=s[9],X=s[10],Q=s[11],c[0]=m=s[0],c[1]=y,c[2]=S,c[3]=I,c[4]=C,c[5]=O,c[6]=q,c[7]=z,c[8]=G,c[9]=Y,c[10]=X,c[11]=Q,c[12]=m*re+C*le+G*ge+s[12],c[13]=y*re+O*le+Y*ge+s[13],c[14]=S*re+q*le+X*ge+s[14],c[15]=I*re+z*le+Q*ge+s[15]),c},i.N=function(c,s,u){var m=u[0],y=u[1],S=u[2];return c[0]=s[0]*m,c[1]=s[1]*m,c[2]=s[2]*m,c[3]=s[3]*m,c[4]=s[4]*y,c[5]=s[5]*y,c[6]=s[6]*y,c[7]=s[7]*y,c[8]=s[8]*S,c[9]=s[9]*S,c[10]=s[10]*S,c[11]=s[11]*S,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},i.O=function(c,s,u){var m=s[0],y=s[1],S=s[2],I=s[3],C=s[4],O=s[5],q=s[6],z=s[7],G=s[8],Y=s[9],X=s[10],Q=s[11],re=s[12],le=s[13],ge=s[14],ke=s[15],Te=u[0],Me=u[1],$e=u[2],et=u[3];return c[0]=Te*m+Me*C+$e*G+et*re,c[1]=Te*y+Me*O+$e*Y+et*le,c[2]=Te*S+Me*q+$e*X+et*ge,c[3]=Te*I+Me*z+$e*Q+et*ke,c[4]=(Te=u[4])*m+(Me=u[5])*C+($e=u[6])*G+(et=u[7])*re,c[5]=Te*y+Me*O+$e*Y+et*le,c[6]=Te*S+Me*q+$e*X+et*ge,c[7]=Te*I+Me*z+$e*Q+et*ke,c[8]=(Te=u[8])*m+(Me=u[9])*C+($e=u[10])*G+(et=u[11])*re,c[9]=Te*y+Me*O+$e*Y+et*le,c[10]=Te*S+Me*q+$e*X+et*ge,c[11]=Te*I+Me*z+$e*Q+et*ke,c[12]=(Te=u[12])*m+(Me=u[13])*C+($e=u[14])*G+(et=u[15])*re,c[13]=Te*y+Me*O+$e*Y+et*le,c[14]=Te*S+Me*q+$e*X+et*ge,c[15]=Te*I+Me*z+$e*Q+et*ke,c},i.P=l,i.Q=function(c,s){let u={};for(let m=0;m<s.length;m++){let y=s[m];y in c&&(u[y]=c[y])}return u},i.R=rs,i.S=Op,i.T=fF,i.U=wQ,i.V=bQ,i.W=N,i.X=j,i.Y=zr,i.Z=yl,i._=o,i.a=J,i.a$=be,i.a0=function(c,s){var u,m,y,S,I;if(!c)return s!=null?s:{};if(!s)return c;let C=Object.assign({},c);if(s.removeAll&&(C={removeAll:!0}),s.remove){let O=new Set(s.remove);C.add&&(C.add=C.add.filter(z=>!O.has(z.id))),C.update&&(C.update=C.update.filter(z=>!O.has(z.id)));let q=new Set(((u=c.add)!==null&&u!==void 0?u:[]).map(z=>z.id));s.remove=s.remove.filter(z=>!q.has(z))}if(s.remove){let O=new Set(C.remove?C.remove.concat(s.remove):s.remove);C.remove=Array.from(O.values())}if(s.add){let O=C.add?C.add.concat(s.add):s.add,q=new Map(O.map(z=>[z.id,z]));C.add=Array.from(q.values())}if(s.update){let O=new Map((m=C.update)===null||m===void 0?void 0:m.map(q=>[q.id,q]));for(let q of s.update){let z=(y=O.get(q.id))!==null&&y!==void 0?y:{id:q.id};q.newGeometry&&(z.newGeometry=q.newGeometry),q.addOrUpdateProperties&&(z.addOrUpdateProperties=((S=z.addOrUpdateProperties)!==null&&S!==void 0?S:[]).concat(q.addOrUpdateProperties)),q.removeProperties&&(z.removeProperties=((I=z.removeProperties)!==null&&I!==void 0?I:[]).concat(q.removeProperties)),q.removeAllProperties&&(z.removeAllProperties=!0),O.set(q.id,z)}C.update=Array.from(O.values())}return C.remove&&C.add&&(C.remove=C.remove.filter(O=>C.add.findIndex(q=>q.id===O)===-1)),C},i.a1=pw,i.a2=Ym,i.a3=25,i.a4=OF,i.a5=c=>{let s=window.document.createElement("video");return s.muted=!0,new Promise(u=>{s.onloadstart=()=>{u(s)};for(let m of c){let y=window.document.createElement("source");Be(m)||(s.crossOrigin="Anonymous"),y.src=m,s.appendChild(y)}})},i.a6=gt,i.a7=function(){return Ze++},i.a8=H,i.a9=xy,i.aA=function(c){let s=1/0,u=1/0,m=-1/0,y=-1/0;for(let S of c)s=Math.min(s,S.x),u=Math.min(u,S.y),m=Math.max(m,S.x),y=Math.max(y,S.y);return[s,u,m,y]},i.aB=po,i.aC=We,i.aD=function(c,s,u,m,y=!1){if(!u[0]&&!u[1])return[0,0];let S=y?m==="map"?-c.bearingInRadians:0:m==="viewport"?c.bearingInRadians:0;if(S){let I=Math.sin(S),C=Math.cos(S);u=[u[0]*C-u[1]*I,u[0]*I+u[1]*C]}return[y?u[0]:We(s,u[0],c.zoom),y?u[1]:We(s,u[1],c.zoom)]},i.aF=TF,i.aG=DF,i.aH=SF,i.aI=NF,i.aJ=Ai,i.aK=nM,i.aL=Ee,i.aM=Or,i.aN=Ln,i.aO=Ue,i.aP=un,i.aQ=SQ,i.aR=de,i.aS=ae,i.aT=function(c){var s=new F(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},i.aU=function(c,s,u){return c[0]=s[0]-u[0],c[1]=s[1]-u[1],c[2]=s[2]-u[2],c},i.aV=function(c,s){var u=s[0],m=s[1],y=s[2],S=u*u+m*m+y*y;return S>0&&(S=1/Math.sqrt(S)),c[0]=s[0]*S,c[1]=s[1]*S,c[2]=s[2]*S,c},i.aW=ye,i.aX=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},i.aY=function(c,s,u){return c[0]=s[0]*u[0],c[1]=s[1]*u[1],c[2]=s[2]*u[2],c[3]=s[3]*u[3],c},i.aZ=ie,i.a_=function(c,s,u){let m=s[0]*u[0]+s[1]*u[1]+s[2]*u[2];return m===0?null:(-(c[0]*u[0]+c[1]*u[1]+c[2]*u[2])-u[3])/m},i.aa=Yf,i.ab=Bu,i.ac=MQ,i.ad=function(c){let s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,m,y,S)=>{let I=y||S;return s[m]=!I||I.toLowerCase(),""}),s["max-age"]){let u=parseInt(s["max-age"],10);isNaN(u)?delete s["max-age"]:s["max-age"]=u}return s},i.ae=br,i.af=function(c){return Math.pow(2,c)},i.ag=$,i.ah=Ot,i.ai=85.051129,i.aj=EQ,i.ak=function(c){return Math.log(c)/Math.LN2},i.al=function(c){var s=c[0],u=c[1];return s*s+u*u},i.am=function(c,s){let u=[];for(let m in c)m in s||u.push(m);return u},i.an=function(c,s){let u=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){let{interpolationType:y,minZoom:S,maxZoom:I}=c,C=y?Ot(Mo.interpolationFactor(y,s,S,I),0,1):0;c.kind==="camera"?m=Bl.number(c.minSize,c.maxSize,C):u=C}return{uSizeT:u,uSize:m}},i.ap=function(c,{uSize:s,uSizeT:u},{lowerSize:m,upperSize:y}){return c.kind==="source"?m/nh:c.kind==="composite"?Bl.number(m/nh,y/nh,u):s},i.aq=function(c,s){var u=s[0],m=s[1],y=s[2],S=s[3],I=s[4],C=s[5],O=s[6],q=s[7],z=s[8],G=s[9],Y=s[10],X=s[11],Q=s[12],re=s[13],le=s[14],ge=s[15],ke=u*C-m*I,Te=u*O-y*I,Me=u*q-S*I,$e=m*O-y*C,et=m*q-S*C,ht=y*q-S*O,Rt=z*re-G*Q,xt=z*le-Y*Q,At=z*ge-X*Q,Jt=G*le-Y*re,Tt=G*ge-X*re,Mt=Y*ge-X*le,it=ke*Mt-Te*Tt+Me*Jt+$e*At-et*xt+ht*Rt;return it?(c[0]=(C*Mt-O*Tt+q*Jt)*(it=1/it),c[1]=(y*Tt-m*Mt-S*Jt)*it,c[2]=(re*ht-le*et+ge*$e)*it,c[3]=(Y*et-G*ht-X*$e)*it,c[4]=(O*At-I*Mt-q*xt)*it,c[5]=(u*Mt-y*At+S*xt)*it,c[6]=(le*Me-Q*ht-ge*Te)*it,c[7]=(z*ht-Y*Me+X*Te)*it,c[8]=(I*Tt-C*At+q*Rt)*it,c[9]=(m*At-u*Tt-S*Rt)*it,c[10]=(Q*et-re*Me+ge*ke)*it,c[11]=(G*Me-z*et-X*ke)*it,c[12]=(C*xt-I*Jt-O*Rt)*it,c[13]=(u*Jt-m*xt+y*Rt)*it,c[14]=(re*Te-Q*$e-le*ke)*it,c[15]=(z*$e-G*Te+Y*ke)*it,c):null},i.ar=He,i.as=function(c){var s=c[0],u=c[1];return Math.sqrt(s*s+u*u)},i.at=function(c){return c[0]=0,c[1]=0,c},i.au=function(c,s,u){return c[0]=s[0]*u,c[1]=s[1]*u,c},i.av=IF,i.aw=Ne,i.ax=function(c,s,u,m){let y=s.y-c.y,S=s.x-c.x,I=m.y-u.y,C=m.x-u.x,O=I*S-C*y;if(O===0)return null;let q=(C*(c.y-u.y)-I*(c.x-u.x))/O;return new l(c.x+q*S,c.y+q*y)},i.ay=RQ,i.az=xX,i.b=Gt,i.b$=class extends w{},i.b0=function(c,s,u){return c[0]=s[0]*u,c[1]=s[1]*u,c[2]=s[2]*u,c[3]=s[3]*u,c},i.b1=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]},i.b2=IQ,i.b3=by,i.b4=function(c,s,u,m,y){var S=1/Math.tan(s/2);if(c[0]=S/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=S,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,y!=null&&y!==1/0){var I=1/(m-y);c[10]=(y+m)*I,c[14]=2*y*m*I}else c[10]=-1,c[14]=-2*m;return c},i.b5=function(c){var s=new F(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},i.b6=function(c,s,u){var m=Math.sin(u),y=Math.cos(u),S=s[0],I=s[1],C=s[2],O=s[3],q=s[4],z=s[5],G=s[6],Y=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=S*y+q*m,c[1]=I*y+z*m,c[2]=C*y+G*m,c[3]=O*y+Y*m,c[4]=q*y-S*m,c[5]=z*y-I*m,c[6]=G*y-C*m,c[7]=Y*y-O*m,c},i.b7=function(c,s,u){var m=Math.sin(u),y=Math.cos(u),S=s[4],I=s[5],C=s[6],O=s[7],q=s[8],z=s[9],G=s[10],Y=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=S*y+q*m,c[5]=I*y+z*m,c[6]=C*y+G*m,c[7]=O*y+Y*m,c[8]=q*y-S*m,c[9]=z*y-I*m,c[10]=G*y-C*m,c[11]=Y*y-O*m,c},i.b8=function(){let c=new Float32Array(16);return $(c),c},i.b9=function(){let c=new Float64Array(16);return $(c),c},i.bA=function(c,s){let u=lt(c,360),m=lt(s,360),y=m-u,S=m>u?y-360:y+360;return Math.abs(y)<Math.abs(S)?y:S},i.bB=function(c){return c[0]=0,c[1]=0,c[2]=0,c},i.bC=function(c,s,u,m){let y=Math.sqrt(c*c+s*s),S=Math.sqrt(u*u+m*m);c/=y,s/=y,u/=S,m/=S;let I=Math.acos(c*u+s*m);return-s*u+c*m>0?I:-I},i.bD=function(c,s){let u=lt(c,2*Math.PI),m=lt(s,2*Math.PI);return Math.min(Math.abs(u-m),Math.abs(u-m+2*Math.PI),Math.abs(u-m-2*Math.PI))},i.bE=function(){let c={},s=xe.$version;for(let u in xe.$root){let m=xe.$root[u];if(m.required){let y=null;y=u==="version"?s:m.type==="array"?[]:{},y!=null&&(c[u]=y)}}return c},i.bF=ry,i.bG=Ae,i.bH=function c(s,u){if(Array.isArray(s)){if(!Array.isArray(u)||s.length!==u.length)return!1;for(let m=0;m<s.length;m++)if(!c(s[m],u[m]))return!1;return!0}if(typeof s=="object"&&s!==null&&u!==null){if(typeof u!="object"||Object.keys(s).length!==Object.keys(u).length)return!1;for(let m in s)if(!c(s[m],u[m]))return!1;return!0}return s===u},i.bI=function(c){c=c.slice();let s=Object.create(null);for(let u=0;u<c.length;u++)s[c[u].id]=c[u];for(let u=0;u<c.length;u++)"ref"in c[u]&&(c[u]=It(c[u],s[c[u].ref]));return c},i.bJ=function(c){if(c.type==="custom")return new a$e(c);switch(c.type){case"background":return new n$e(c);case"circle":return new BGe(c);case"color-relief":return new ZGe(c);case"fill":return new u6e(c);case"fill-extrusion":return new x6e(c);case"heatmap":return new GGe(c);case"hillshade":return new HGe(c);case"line":return new A6e(c);case"raster":return new o$e(c);case"symbol":return new lM(c)}},i.bK=ot,i.bL=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let u=[];try{if(!ft(c.version,s.version))return[{command:"setStyle",args:[s]}];ft(c.center,s.center)||u.push({command:"setCenter",args:[s.center]}),ft(c.state,s.state)||u.push({command:"setGlobalState",args:[s.state]}),ft(c.centerAltitude,s.centerAltitude)||u.push({command:"setCenterAltitude",args:[s.centerAltitude]}),ft(c.zoom,s.zoom)||u.push({command:"setZoom",args:[s.zoom]}),ft(c.bearing,s.bearing)||u.push({command:"setBearing",args:[s.bearing]}),ft(c.pitch,s.pitch)||u.push({command:"setPitch",args:[s.pitch]}),ft(c.roll,s.roll)||u.push({command:"setRoll",args:[s.roll]}),ft(c.sprite,s.sprite)||u.push({command:"setSprite",args:[s.sprite]}),ft(c.glyphs,s.glyphs)||u.push({command:"setGlyphs",args:[s.glyphs]}),ft(c.transition,s.transition)||u.push({command:"setTransition",args:[s.transition]}),ft(c.light,s.light)||u.push({command:"setLight",args:[s.light]}),ft(c.terrain,s.terrain)||u.push({command:"setTerrain",args:[s.terrain]}),ft(c.sky,s.sky)||u.push({command:"setSky",args:[s.sky]}),ft(c.projection,s.projection)||u.push({command:"setProjection",args:[s.projection]});let m={},y=[];(function(I,C,O,q){let z;for(z in C=C||{},I=I||{})Object.prototype.hasOwnProperty.call(I,z)&&(Object.prototype.hasOwnProperty.call(C,z)||Tr(z,O,q));for(z in C)Object.prototype.hasOwnProperty.call(C,z)&&(Object.prototype.hasOwnProperty.call(I,z)?ft(I[z],C[z])||(I[z].type==="geojson"&&C[z].type==="geojson"&&Pr(I,C,z)?_t(O,{command:"setGeoJSONSourceData",args:[z,C[z].data]}):rn(z,C,O,q)):Wt(z,C,O))})(c.sources,s.sources,y,m);let S=[];c.layers&&c.layers.forEach(I=>{"source"in I&&m[I.source]?u.push({command:"removeLayer",args:[I.id]}):S.push(I)}),u=u.concat(y),function(I,C,O){C=C||[];let q=(I=I||[]).map(ur),z=C.map(ur),G=I.reduce(An,{}),Y=C.reduce(An,{}),X=q.slice(),Q=Object.create(null),re,le,ge,ke,Te;for(let Me=0,$e=0;Me<q.length;Me++)re=q[Me],Object.prototype.hasOwnProperty.call(Y,re)?$e++:(_t(O,{command:"removeLayer",args:[re]}),X.splice(X.indexOf(re,$e),1));for(let Me=0,$e=0;Me<z.length;Me++)re=z[z.length-1-Me],X[X.length-1-Me]!==re&&(Object.prototype.hasOwnProperty.call(G,re)?(_t(O,{command:"removeLayer",args:[re]}),X.splice(X.lastIndexOf(re,X.length-$e),1)):$e++,ke=X[X.length-Me],_t(O,{command:"addLayer",args:[Y[re],ke]}),X.splice(X.length-Me,0,re),Q[re]=!0);for(let Me=0;Me<z.length;Me++)if(re=z[Me],le=G[re],ge=Y[re],!Q[re]&&!ft(le,ge))if(ft(le.source,ge.source)&&ft(le["source-layer"],ge["source-layer"])&&ft(le.type,ge.type)){for(Te in ar(le.layout,ge.layout,O,re,null,"setLayoutProperty"),ar(le.paint,ge.paint,O,re,null,"setPaintProperty"),ft(le.filter,ge.filter)||_t(O,{command:"setFilter",args:[re,ge.filter]}),ft(le.minzoom,ge.minzoom)&&ft(le.maxzoom,ge.maxzoom)||_t(O,{command:"setLayerZoomRange",args:[re,ge.minzoom,ge.maxzoom]}),le)Object.prototype.hasOwnProperty.call(le,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ar(le[Te],ge[Te],O,re,Te.slice(6),"setPaintProperty"):ft(le[Te],ge[Te])||_t(O,{command:"setLayerProperty",args:[re,Te,ge[Te]]}));for(Te in ge)Object.prototype.hasOwnProperty.call(ge,Te)&&!Object.prototype.hasOwnProperty.call(le,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ar(le[Te],ge[Te],O,re,Te.slice(6),"setPaintProperty"):ft(le[Te],ge[Te])||_t(O,{command:"setLayerProperty",args:[re,Te,ge[Te]]}))}else _t(O,{command:"removeLayer",args:[re]}),ke=X[X.lastIndexOf(re)+1],_t(O,{command:"addLayer",args:[ge,ke]})}(S,s.layers,u)}catch(m){console.warn("Unable to compute style diff:",m),u=[{command:"setStyle",args:[s]}]}return u},i.bM=function(c){let s=[],u=c.id;return u===void 0&&s.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),s},i.bN=rt,i.bO=at,i.bP=class extends la{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},i.bQ=to,i.bR=class extends la{constructor(c,s){super(c,s),this.current=Ms}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},i.bS=Hi,i.bT=class extends la{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},i.bU=class extends la{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},i.bV=U,i.bW=function(c,s){var u=Math.sin(s),m=Math.cos(s);return c[0]=m,c[1]=u,c[2]=0,c[3]=-u,c[4]=m,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},i.bX=function(c,s,u){var m=s[0],y=s[1],S=s[2];return c[0]=m*u[0]+y*u[3]+S*u[6],c[1]=m*u[1]+y*u[4]+S*u[7],c[2]=m*u[2]+y*u[5]+S*u[8],c},i.bY=function(c,s,u,m,y,S,I){var C=1/(s-u),O=1/(m-y),q=1/(S-I);return c[0]=-2*C,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*O,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*q,c[11]=0,c[12]=(s+u)*C,c[13]=(y+m)*O,c[14]=(I+S)*q,c[15]=1,c},i.bZ=class extends la{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;let s=new Float32Array(4*c.length);for(let u=0;u<c.length;u++)s[4*u]=c[u].r,s[4*u+1]=c[u].g,s[4*u+2]=c[u].b,s[4*u+3]=c[u].a;this.gl.uniform4fv(this.location,s)}}},i.b_=class extends la{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;let s=new Float32Array(c);this.gl.uniform1fv(this.location,s)}}},i.ba=function(){return new Float64Array(16)},i.bb=function(c,s,u){let m=new Float64Array(4);return qe(m,c,s-90,u),m},i.bc=function(c,s,u,m){var y,S,I,C,O,q=s[0],z=s[1],G=s[2],Y=s[3],X=u[0],Q=u[1],re=u[2],le=u[3];return(S=q*X+z*Q+G*re+Y*le)<0&&(S=-S,X=-X,Q=-Q,re=-re,le=-le),1-S>D?(y=Math.acos(S),I=Math.sin(y),C=Math.sin((1-m)*y)/I,O=Math.sin(m*y)/I):(C=1-m,O=m),c[0]=C*q+O*X,c[1]=C*z+O*Q,c[2]=C*G+O*re,c[3]=C*Y+O*le,c},i.bd=function(c){let s=new Float64Array(9);var u,m,y,S,I,C,O,q,z,G,Y,X,Q,re,le,ge,ke,Te;G=(y=(m=c)[0])*(O=y+y),Y=(S=m[1])*O,Q=(I=m[2])*O,re=I*(q=S+S),ge=(C=m[3])*O,ke=C*q,Te=C*(z=I+I),(u=s)[0]=1-(X=S*q)-(le=I*z),u[3]=Y-Te,u[6]=Q+ke,u[1]=Y+Te,u[4]=1-G-le,u[7]=re-ge,u[2]=Q-ke,u[5]=re+ge,u[8]=1-G-X;let Me=un(-Math.asin(Ot(s[2],-1,1))),$e,et;return Math.hypot(s[5],s[8])<.001?($e=0,et=-un(Math.atan2(s[3],s[4]))):($e=un(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),et=un(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:$e,pitch:Me+90,bearing:et}},i.be=function(c,s){return c.roll==s.roll&&c.pitch==s.pitch&&c.bearing==s.bearing},i.bf=$r,i.bg=Fc,i.bh=gy,i.bi=sw,i.bj=my,i.bk=pt,i.bl=dt,i.bm=Go,i.bn=function(c,s,u,m,y){return pt(m,y,Ot((c-s)/(u-s),0,1))},i.bo=lt,i.bp=function(){return new Float64Array(3)},i.bq=function(c,s,u,m){return c[0]=s[0]+u[0]*m,c[1]=s[1]+u[1]*m,c[2]=s[2]+u[2]*m,c},i.br=qe,i.bs=function(c,s,u){var m=u[0],y=u[1],S=u[2],I=u[3],C=s[0],O=s[1],q=s[2],z=y*q-S*O,G=S*C-m*q,Y=m*O-y*C;return c[0]=C+I*(z+=z)+y*(Y+=Y)-S*(G+=G),c[1]=O+I*G+S*z-m*Y,c[2]=q+I*Y+m*G-y*z,c},i.bt=function(c,s,u){let m=(y=[c[0],c[1],c[2],s[0],s[1],s[2],u[0],u[1],u[2]])[0]*((z=y[8])*(I=y[4])-(C=y[5])*(q=y[7]))+y[1]*(-z*(S=y[3])+C*(O=y[6]))+y[2]*(q*S-I*O);var y,S,I,C,O,q,z;if(m===0)return null;let G=ye([],[s[0],s[1],s[2]],[u[0],u[1],u[2]]),Y=ye([],[u[0],u[1],u[2]],[c[0],c[1],c[2]]),X=ye([],[c[0],c[1],c[2]],[s[0],s[1],s[2]]),Q=de([],G,-c[3]);return ae(Q,Q,de([],Y,-s[3])),ae(Q,Q,de([],X,-u[3])),de(Q,Q,1/m),Q},i.bu=PF,i.bv=function(){return new Float64Array(4)},i.bw=function(c,s,u,m){var y=[],S=[];return y[0]=s[0]-u[0],y[1]=s[1]-u[1],y[2]=s[2]-u[2],S[0]=y[0]*Math.cos(m)-y[1]*Math.sin(m),S[1]=y[0]*Math.sin(m)+y[1]*Math.cos(m),S[2]=y[2],c[0]=S[0]+u[0],c[1]=S[1]+u[1],c[2]=S[2]+u[2],c},i.bx=function(c,s,u,m){var y=[],S=[];return y[0]=s[0]-u[0],y[1]=s[1]-u[1],y[2]=s[2]-u[2],S[0]=y[0],S[1]=y[1]*Math.cos(m)-y[2]*Math.sin(m),S[2]=y[1]*Math.sin(m)+y[2]*Math.cos(m),c[0]=S[0]+u[0],c[1]=S[1]+u[1],c[2]=S[2]+u[2],c},i.by=function(c,s,u,m){var y=[],S=[];return y[0]=s[0]-u[0],y[1]=s[1]-u[1],y[2]=s[2]-u[2],S[0]=y[2]*Math.sin(m)+y[0]*Math.cos(m),S[1]=y[1],S[2]=y[2]*Math.cos(m)-y[0]*Math.sin(m),c[0]=S[0]+u[0],c[1]=S[1]+u[1],c[2]=S[2]+u[2],c},i.bz=function(c,s,u){var m=Math.sin(u),y=Math.cos(u),S=s[0],I=s[1],C=s[2],O=s[3],q=s[8],z=s[9],G=s[10],Y=s[11];return s!==c&&(c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=S*y-q*m,c[1]=I*y-z*m,c[2]=C*y-G*m,c[3]=O*y-Y*m,c[8]=S*m+q*y,c[9]=I*m+z*y,c[10]=C*m+G*y,c[11]=O*m+Y*y,c},i.c=De,i.c0=R6e,i.c1=class extends h{},i.c2=cF,i.c3=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},i.c4=PX,i.c5=function(c,s,u){var m=s[0],y=s[1],S=s[2],I=u[3]*m+u[7]*y+u[11]*S+u[15];return c[0]=(u[0]*m+u[4]*y+u[8]*S+u[12])/(I=I||1),c[1]=(u[1]*m+u[5]*y+u[9]*S+u[13])/I,c[2]=(u[2]*m+u[6]*y+u[10]*S+u[14])/I,c},i.c6=class extends Kb{},i.c7=class extends B{},i.c8=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},i.c9=function(c,s){var u=c[0],m=c[1],y=c[2],S=c[3],I=c[4],C=c[5],O=c[6],q=c[7],z=c[8],G=c[9],Y=c[10],X=c[11],Q=c[12],re=c[13],le=c[14],ge=c[15],ke=s[0],Te=s[1],Me=s[2],$e=s[3],et=s[4],ht=s[5],Rt=s[6],xt=s[7],At=s[8],Jt=s[9],Tt=s[10],Mt=s[11],it=s[12],fr=s[13],yr=s[14],nr=s[15];return Math.abs(u-ke)<=D*Math.max(1,Math.abs(u),Math.abs(ke))&&Math.abs(m-Te)<=D*Math.max(1,Math.abs(m),Math.abs(Te))&&Math.abs(y-Me)<=D*Math.max(1,Math.abs(y),Math.abs(Me))&&Math.abs(S-$e)<=D*Math.max(1,Math.abs(S),Math.abs($e))&&Math.abs(I-et)<=D*Math.max(1,Math.abs(I),Math.abs(et))&&Math.abs(C-ht)<=D*Math.max(1,Math.abs(C),Math.abs(ht))&&Math.abs(O-Rt)<=D*Math.max(1,Math.abs(O),Math.abs(Rt))&&Math.abs(q-xt)<=D*Math.max(1,Math.abs(q),Math.abs(xt))&&Math.abs(z-At)<=D*Math.max(1,Math.abs(z),Math.abs(At))&&Math.abs(G-Jt)<=D*Math.max(1,Math.abs(G),Math.abs(Jt))&&Math.abs(Y-Tt)<=D*Math.max(1,Math.abs(Y),Math.abs(Tt))&&Math.abs(X-Mt)<=D*Math.max(1,Math.abs(X),Math.abs(Mt))&&Math.abs(Q-it)<=D*Math.max(1,Math.abs(Q),Math.abs(it))&&Math.abs(re-fr)<=D*Math.max(1,Math.abs(re),Math.abs(fr))&&Math.abs(le-yr)<=D*Math.max(1,Math.abs(le),Math.abs(yr))&&Math.abs(ge-nr)<=D*Math.max(1,Math.abs(ge),Math.abs(nr))},i.cA=function(c,s){J.REGISTERED_PROTOCOLS[c]=s},i.cB=function(c){delete J.REGISTERED_PROTOCOLS[c]},i.cC=function(c,s){let u={};for(let y=0;y<c.length;y++){let S=s&&s[c[y].id]||Qq(c[y]);s&&(s[c[y].id]=S);let I=u[S];I||(I=u[S]=[]),I.push(c[y])}let m=[];for(let y in u)m.push(u[y]);return m},i.cD=Ut,i.cE=AQ,i.cF=CQ,i.cG=oQ,i.cH=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Je/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;let s=c.bucket.layers[0],u=s.layout,m=s._unevaluatedLayout._values,y={layoutIconSize:m["icon-size"].possiblyEvaluate(new jn(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new jn(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new jn(18))};if(c.bucket.textSizeData.kind==="composite"){let{minZoom:q,maxZoom:z}=c.bucket.textSizeData;y.compositeTextSizes=[m["text-size"].possiblyEvaluate(new jn(q),c.canonical),m["text-size"].possiblyEvaluate(new jn(z),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){let{minZoom:q,maxZoom:z}=c.bucket.iconSizeData;y.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new jn(q),c.canonical),m["icon-size"].possiblyEvaluate(new jn(z),c.canonical)]}let S=u.get("text-line-height")*po,I=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",C=u.get("text-keep-upright"),O=u.get("text-size");for(let q of c.bucket.features){let z=u.get("text-font").evaluate(q,{},c.canonical).join(","),G=O.evaluate(q,{},c.canonical),Y=y.layoutTextSize.evaluate(q,{},c.canonical),X=y.layoutIconSize.evaluate(q,{},c.canonical),Q={horizontal:{},vertical:void 0},re=q.text,le,ge=[0,0];if(re){let Me=re.toString(),$e=u.get("text-letter-spacing").evaluate(q,{},c.canonical)*po,et=rF(Me)?$e:0,ht=u.get("text-anchor").evaluate(q,{},c.canonical),Rt=zQ(s,q,c.canonical);if(!Rt){let Tt=u.get("text-radial-offset").evaluate(q,{},c.canonical);ge=Tt?jQ(ht,[Tt*po,LF]):u.get("text-offset").evaluate(q,{},c.canonical).map(Mt=>Mt*po)}let xt=I?"center":u.get("text-justify").evaluate(q,{},c.canonical),At=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(q,{},c.canonical)*po:1/0,Jt=()=>{c.bucket.allowVerticalPlacement&&ny(Me)&&(Q.vertical=oM(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,At,S,ht,"left",et,ge,i.ao.vertical,!0,Y,G))};if(!I&&Rt){let Tt=new Set;if(xt==="auto")for(let it=0;it<Rt.values.length;it+=2)Tt.add(DF(Rt.values[it]));else Tt.add(xt);let Mt=!1;for(let it of Tt)if(!Q.horizontal[it])if(Mt)Q.horizontal[it]=Q.horizontal[0];else{let fr=oM(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,At,S,"center",it,et,ge,i.ao.horizontal,!1,Y,G);fr&&(Q.horizontal[it]=fr,Mt=fr.positionedLines.length===1)}Jt()}else{xt==="auto"&&(xt=DF(ht));let Tt=oM(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,At,S,ht,xt,et,ge,i.ao.horizontal,!1,Y,G);Tt&&(Q.horizontal[xt]=Tt),Jt(),ny(Me)&&I&&C&&(Q.vertical=oM(re,c.glyphMap,c.glyphPositions,c.imagePositions,z,At,S,ht,xt,et,ge,i.ao.vertical,!1,Y,G))}}let ke=!1;if(q.icon&&q.icon.name){let Me=c.imageMap[q.icon.name];Me&&(le=J6e(c.imagePositions[q.icon.name],u.get("icon-offset").evaluate(q,{},c.canonical),u.get("icon-anchor").evaluate(q,{},c.canonical)),ke=!!Me.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=ke:c.bucket.sdfIcons!==ke&&zt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Me.pixelRatio!==c.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}let Te=BQ(Q.horizontal)||Q.vertical;c.bucket.iconsInText=!!Te&&Te.iconsInText,(Te||le)&&m$e(c.bucket,q,Q,le,c.imageMap,y,Y,X,ge,ke,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},i.cI=_F,i.cJ=gF,i.cK=yF,i.cL=$X,i.cM=bF,i.cN=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},i.cO=function(c,s,u,m,y){return o(this,void 0,void 0,function*(){if(j())try{return yield zr(c,s,u,m,y)}catch(S){}return function(S,I,C,O,q){let z=S.width,G=S.height;vr&&pr||(vr=new OffscreenCanvas(z,G),pr=vr.getContext("2d",{willReadFrequently:!0})),vr.width=z,vr.height=G,pr.drawImage(S,0,0,z,G);let Y=pr.getImageData(I,C,O,q);return pr.clearRect(0,0,z,G),Y.data}(c,s,u,m,y)})},i.cP=LX,i.cQ=f,i.cR=GX,i.cS=vy,i.cT=Nm,i.cU=function(c,s){let u=new Map;if(c!=null)if(c.type==="Feature")u.set(dw(c,s),c);else for(let m of c.features)u.set(dw(m,s),m);return u},i.cV=function(c,s){if(c==null)return!0;if(c.type==="Feature")return dw(c,s)!=null;if(c.type==="FeatureCollection"){let u=new Set;for(let m of c.features){let y=dw(m,s);if(y==null||u.has(y))return!1;u.add(y)}return!0}return!1},i.cW=function(c,s,u){var m,y,S,I;if(s.removeAll&&c.clear(),s.remove)for(let C of s.remove)c.delete(C);if(s.add)for(let C of s.add){let O=dw(C,u);O!=null&&c.set(O,C)}if(s.update)for(let C of s.update){let O=c.get(C.id);if(O==null)continue;let q=!C.removeAllProperties&&(((m=C.removeProperties)===null||m===void 0?void 0:m.length)>0||((y=C.addOrUpdateProperties)===null||y===void 0?void 0:y.length)>0);if((C.newGeometry||C.removeAllProperties||q)&&(O=Object.assign({},O),c.set(C.id,O),q&&(O.properties=Object.assign({},O.properties))),C.newGeometry&&(O.geometry=C.newGeometry),C.removeAllProperties)O.properties={};else if(((S=C.removeProperties)===null||S===void 0?void 0:S.length)>0)for(let z of C.removeProperties)Object.prototype.hasOwnProperty.call(O.properties,z)&&delete O.properties[z];if(((I=C.addOrUpdateProperties)===null||I===void 0?void 0:I.length)>0)for(let{key:z,value:G}of C.addOrUpdateProperties)O.properties[z]=G}},i.cX=dl,i.ca=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},i.cb=c=>c.type==="symbol",i.cc=c=>c.type==="circle",i.cd=c=>c.type==="heatmap",i.ce=c=>c.type==="line",i.cf=c=>c.type==="fill",i.cg=c=>c.type==="fill-extrusion",i.ch=c=>c.type==="hillshade",i.ci=c=>c.type==="color-relief",i.cj=c=>c.type==="raster",i.ck=c=>c.type==="background",i.cl=c=>c.type==="custom",i.cm=ze,i.cn=function(c,s,u){let m=Ke(s.x-u.x,s.y-u.y),y=Ke(c.x-u.x,c.y-u.y);var S,I;return un(Math.atan2(m[0]*y[1]-m[1]*y[0],(S=m)[0]*(I=y)[0]+S[1]*I[1]))},i.co=Dt,i.cp=function(c,s){return Rn[s]&&(c instanceof MouseEvent||c instanceof WheelEvent)},i.cq=function(c,s){return En[s]&&"touches"in c},i.cr=function(c){return En[c]||Rn[c]},i.cs=function(c,s,u){var m=s[0],y=s[1];return c[0]=u[0]*m+u[4]*y+u[12],c[1]=u[1]*m+u[5]*y+u[13],c},i.ct=function(c,s){let{x:u,y:m}=pw.fromLngLat(s);return!(c<0||c>25||m<0||m>=1||u<0||u>=1)},i.cu=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},i.cv=class extends Tp{},i.cw=v$e,i.cy=function(c){return c.message===gi},i.cz=_e,i.d=Be,i.e=nt,i.f=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));let s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),i.g=te,i.h=c=>new Promise((s,u)=>{let m=new Image;m.onload=()=>{s(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Sr})},m.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let y=new Blob([new Uint8Array(c)],{type:"image/png"});m.src=c.byteLength?URL.createObjectURL(y):Sr}),i.i=$t,i.j=(c,s)=>Le(nt(c,{type:"json"}),s),i.k=Re,i.l=pe,i.m=Le,i.n=(c,s)=>Le(nt(c,{type:"arrayBuffer"}),s),i.o=function(c){return new bF(c).readFields(B6e,[])},i.p=iQ,i.q=rw,i.r=aa,i.s=dr,i.t=ZA,i.u=Jr,i.v=xe,i.w=zt,i.x=Jq,i.y=Bm,i.z=bp}),r("worker",["./shared"],function(i){"use strict";class o{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,te){for(let _e of J){this._layerConfigs[_e.id]=_e;let Ae=this._layers[_e.id]=i.bJ(_e);Ae._featureFilter=i.aa(Ae.filter),this.keyCache[_e.id]&&delete this.keyCache[_e.id]}for(let _e of te)delete this.keyCache[_e],delete this._layerConfigs[_e],delete this._layers[_e];this.familiesBySource={};let se=i.cC(Object.values(this._layerConfigs),this.keyCache);for(let _e of se){let Ae=_e.map(Re=>this._layers[Re.id]),Le=Ae[0];if(Le.visibility==="none")continue;let Be=Le.source||"",Oe=this.familiesBySource[Be];Oe||(Oe=this.familiesBySource[Be]={});let he=Le.sourceLayer||"_geojsonTileLayer",pe=Oe[he];pe||(pe=Oe[he]=[]),pe.push(Ae)}}}class l{constructor(J){let te={},se=[];for(let Be in J){let Oe=J[Be],he=te[Be]={};for(let pe in Oe){let Re=Oe[+pe];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;let tt={x:0,y:0,w:Re.bitmap.width+2,h:Re.bitmap.height+2};se.push(tt),he[pe]={rect:tt,metrics:Re.metrics}}}let{w:_e,h:Ae}=i.p(se),Le=new i.q({width:_e||1,height:Ae||1});for(let Be in J){let Oe=J[Be];for(let he in Oe){let pe=Oe[+he];if(!pe||pe.bitmap.width===0||pe.bitmap.height===0)continue;let Re=te[Be][he].rect;i.q.copy(pe.bitmap,Le,{x:0,y:0},{x:Re.x+1,y:Re.y+1},pe.bitmap)}}this.image=Le,this.positions=te}}i.cD("GlyphAtlas",l);class f{constructor(J){this.tileID=new i.Z(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[],this.globalState=J.globalState}parse(J,te,se,_e,Ae){return i._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new i.a8;let Le=new i.cE(Object.keys(J.layers).sort()),Be=new i.cF(this.tileID,this.promoteId);Be.bucketLayerIDs=[];let Oe={},he={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:se,subdivisionGranularity:Ae},pe=te.familiesBySource[this.source];for(let ar in pe){let ur=J.layers[ar];if(!ur)continue;ur.version===1&&i.w(`Vector tile source "${this.source}" layer "${ar}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let An=Le.encode(ar),gt=[];for(let si=0;si<ur.length;si++){let Sn=ur.feature(si),Ta=Be.getId(Sn,ar);gt.push({feature:Sn,id:Ta,index:si,sourceLayerIndex:An})}for(let si of pe[ar]){let Sn=si[0];Sn.source!==this.source&&i.w(`layer.source = ${Sn.source} does not equal this.source = ${this.source}`),Sn.minzoom&&this.zoom<Math.floor(Sn.minzoom)||Sn.maxzoom&&this.zoom>=Sn.maxzoom||Sn.visibility!=="none"&&(d(si,this.zoom,se,this.globalState),(Oe[Sn.id]=Sn.createBucket({index:Be.bucketLayerIDs.length,layers:si,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:An,sourceID:this.source,globalState:this.globalState})).populate(gt,he,this.tileID.canonical),Be.bucketLayerIDs.push(si.map(Ta=>Ta.id)))}}let Re=i.bN(he.glyphDependencies,ar=>Object.keys(ar).map(Number));this.inFlightDependencies.forEach(ar=>ar==null?void 0:ar.abort()),this.inFlightDependencies=[];let tt=Promise.resolve({});if(Object.keys(Re).length){let ar=new AbortController;this.inFlightDependencies.push(ar),tt=_e.sendAsync({type:"GG",data:{stacks:Re,source:this.source,tileID:this.tileID,type:"glyphs"}},ar)}let xe=Object.keys(he.iconDependencies),ut=Promise.resolve({});if(xe.length){let ar=new AbortController;this.inFlightDependencies.push(ar),ut=_e.sendAsync({type:"GI",data:{icons:xe,source:this.source,tileID:this.tileID,type:"icons"}},ar)}let It=Object.keys(he.patternDependencies),ft=Promise.resolve({});if(It.length){let ar=new AbortController;this.inFlightDependencies.push(ar),ft=_e.sendAsync({type:"GI",data:{icons:It,source:this.source,tileID:this.tileID,type:"patterns"}},ar)}let[_t,Wt,Tr]=yield Promise.all([tt,ut,ft]),rn=new l(_t),Pr=new i.cG(Wt,Tr);for(let ar in Oe){let ur=Oe[ar];ur instanceof i.a9?(d(ur.layers,this.zoom,se,this.globalState),i.cH({bucket:ur,glyphMap:_t,glyphPositions:rn.positions,imageMap:Wt,imagePositions:Pr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:he.subdivisionGranularity})):ur.hasPattern&&(ur instanceof i.cI||ur instanceof i.cJ||ur instanceof i.cK)&&(d(ur.layers,this.zoom,se,this.globalState),ur.addFeatures(he,this.tileID.canonical,Pr.patternPositions))}return this.status="done",{buckets:Object.values(Oe).filter(ar=>!ar.isEmpty()),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:rn.image,imageAtlas:Pr,glyphMap:this.returnDependencies?_t:null,iconMap:this.returnDependencies?Wt:null,glyphPositions:this.returnDependencies?rn.positions:null}})}}function d(De,J,te,se){let _e=new i.F(J);for(let Ae of De)Ae.setGlobalState(se),Ae.recalculate(_e,te)}class v{constructor(J,te,se){this.actor=J,this.layerIndex=te,this.availableImages=se,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,te){return i._(this,void 0,void 0,function*(){let se=yield i.n(J.request,te);try{return{vectorTile:new i.cL(new i.cM(se.data)),rawData:se.data,cacheControl:se.cacheControl,expires:se.expires}}catch(_e){let Ae=new Uint8Array(se.data),Le=`Unable to parse the tile at ${J.request.url}, `;throw Le+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${_e.message}`,new Error(Le)}})}loadTile(J){return i._(this,void 0,void 0,function*(){let te=J.uid,se=!!(J&&J.request&&J.request.collectResourceTiming)&&new i.cN(J.request),_e=new f(J);this.loading[te]=_e;let Ae=new AbortController;_e.abort=Ae;try{let Le=yield this.loadVectorTile(J,Ae);if(delete this.loading[te],!Le)return null;let Be=Le.rawData,Oe={};Le.expires&&(Oe.expires=Le.expires),Le.cacheControl&&(Oe.cacheControl=Le.cacheControl);let he={};if(se){let Re=se.finish();Re&&(he.resourceTiming=JSON.parse(JSON.stringify(Re)))}_e.vectorTile=Le.vectorTile;let pe=_e.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);this.loaded[te]=_e,this.fetching[te]={rawTileData:Be,cacheControl:Oe,resourceTiming:he};try{let Re=yield pe;return i.e({rawTileData:Be.slice(0)},Re,Oe,he)}finally{delete this.fetching[te]}}catch(Le){throw delete this.loading[te],_e.status="done",this.loaded[te]=_e,Le}})}reloadTile(J){return i._(this,void 0,void 0,function*(){let te=J.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let se=this.loaded[te];if(se.showCollisionBoxes=J.showCollisionBoxes,se.globalState=J.globalState,se.status==="parsing"){let _e=yield se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity),Ae;if(this.fetching[te]){let{rawTileData:Le,cacheControl:Be,resourceTiming:Oe}=this.fetching[te];delete this.fetching[te],Ae=i.e({rawTileData:Le.slice(0)},_e,Be,Oe)}else Ae=_e;return Ae}if(se.status==="done"&&se.vectorTile)return se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity)})}abortTile(J){return i._(this,void 0,void 0,function*(){let te=this.loading,se=J.uid;te&&te[se]&&te[se].abort&&(te[se].abort.abort(),delete te[se])})}removeTile(J){return i._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class x{constructor(){this.loaded={}}loadTile(J){return i._(this,void 0,void 0,function*(){let{uid:te,encoding:se,rawImageData:_e,redFactor:Ae,greenFactor:Le,blueFactor:Be,baseShift:Oe}=J,he=_e.width+2,pe=_e.height+2,Re=i.b(_e)?new i.R({width:he,height:pe},yield i.cO(_e,-1,-1,he,pe)):_e,tt=new i.cP(te,Re,se,Ae,Le,Be,Oe);return this.loaded=this.loaded||{},this.loaded[te]=tt,tt})}removeTile(J){let te=this.loaded,se=J.uid;te&&te[se]&&delete te[se]}}var b,A,P=function(){if(A)return b;function De(te,se){if(te.length!==0){J(te[0],se);for(var _e=1;_e<te.length;_e++)J(te[_e],!se)}}function J(te,se){for(var _e=0,Ae=0,Le=0,Be=te.length,Oe=Be-1;Le<Be;Oe=Le++){var he=(te[Le][0]-te[Oe][0])*(te[Oe][1]+te[Le][1]),pe=_e+he;Ae+=Math.abs(_e)>=Math.abs(he)?_e-pe+he:he-pe+_e,_e=pe}_e+Ae>=0!=!!se&&te.reverse()}return A=1,b=function te(se,_e){var Ae,Le=se&&se.type;if(Le==="FeatureCollection")for(Ae=0;Ae<se.features.length;Ae++)te(se.features[Ae],_e);else if(Le==="GeometryCollection")for(Ae=0;Ae<se.geometries.length;Ae++)te(se.geometries[Ae],_e);else if(Le==="Feature")te(se.geometry,_e);else if(Le==="Polygon")De(se.coordinates,_e);else if(Le==="MultiPolygon")for(Ae=0;Ae<se.coordinates.length;Ae++)De(se.coordinates[Ae],_e);return se}}(),N=i.cQ(P);class j extends i.cS{constructor(J,te){super(new i.cM,0,te,[],[]),this.feature=J,this.type=J.type,this.properties=J.tags?J.tags:{},"id"in J&&(typeof J.id=="string"?this.id=parseInt(J.id,10):typeof J.id!="number"||isNaN(J.id)||(this.id=J.id))}loadGeometry(){let J=[],te=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let se of te){let _e=[];for(let Ae of se)_e.push(new i.P(Ae[0],Ae[1]));J.push(_e)}return J}}class D extends i.cR{constructor(J,te){super(new i.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=te?te.version:1,this.extent=te?te.extent:4096,this.length=J.length,this.features=J}feature(J){return new j(this.features[J],this.extent)}}function F(De,J){J.writeVarintField(15,De.version||1),J.writeStringField(1,De.name||""),J.writeVarintField(5,De.extent||4096);let te={keys:[],values:[],keycache:{},valuecache:{}};for(let Ae=0;Ae<De.length;Ae++)te.feature=De.feature(Ae),J.writeMessage(2,U,te);let se=te.keys;for(let Ae of se)J.writeStringField(3,Ae);let _e=te.values;for(let Ae of _e)J.writeMessage(4,ae,Ae)}function U(De,J){if(!De.feature)return;let te=De.feature;te.id!==void 0&&J.writeVarintField(1,te.id),J.writeMessage(2,$,De),J.writeVarintField(3,te.type),J.writeMessage(4,ne,te)}function $(De,J){var te;for(let se in(te=De.feature)==null?void 0:te.properties){let _e=De.feature.properties[se],Ae=De.keycache[se];if(_e===null)continue;Ae===void 0&&(De.keys.push(se),Ae=De.keys.length-1,De.keycache[se]=Ae),J.writeVarint(Ae),typeof _e!="string"&&typeof _e!="boolean"&&typeof _e!="number"&&(_e=JSON.stringify(_e));let Le=typeof _e+":"+_e,Be=De.valuecache[Le];Be===void 0&&(De.values.push(_e),Be=De.values.length-1,De.valuecache[Le]=Be),J.writeVarint(Be)}}function Z(De,J){return(J<<3)+(7&De)}function ie(De){return De<<1^De>>31}function ne(De,J){let te=De.loadGeometry(),se=De.type,_e=0,Ae=0;for(let Le of te){let Be=1;se===1&&(Be=Le.length),J.writeVarint(Z(1,Be));let Oe=se===3?Le.length-1:Le.length;for(let he=0;he<Oe;he++){he===1&&se!==1&&J.writeVarint(Z(2,Oe-1));let pe=Le[he].x-_e,Re=Le[he].y-Ae;J.writeVarint(ie(pe)),J.writeVarint(ie(Re)),_e+=pe,Ae+=Re}De.type===3&&J.writeVarint(Z(7,1))}}function ae(De,J){let te=typeof De;te==="string"?J.writeStringField(1,De):te==="boolean"?J.writeBooleanField(7,De):te==="number"&&(De%1!=0?J.writeDoubleField(3,De):De<0?J.writeSVarintField(6,De):J.writeVarintField(5,De))}let de={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:De=>De},ye=Math.fround||(me=new Float32Array(1),De=>(me[0]=+De,me[0]));var me;class be{constructor(J){this.options=Object.assign(Object.create(de),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){let{log:te,minZoom:se,maxZoom:_e}=this.options;te&&console.time("total time");let Ae=`prepare ${J.length} points`;te&&console.time(Ae),this.points=J;let Le=[];for(let Oe=0;Oe<J.length;Oe++){let he=J[Oe];if(!he.geometry)continue;let[pe,Re]=he.geometry.coordinates,tt=ye(qe(pe)),xe=ye(He(Re));Le.push(tt,xe,1/0,Oe,-1,1),this.options.reduce&&Le.push(0)}let Be=this.trees[_e+1]=this._createTree(Le);te&&console.timeEnd(Ae);for(let Oe=_e;Oe>=se;Oe--){let he=+Date.now();Be=this.trees[Oe]=this._createTree(this._cluster(Be,Oe)),te&&console.log("z%d: %d clusters in %dms",Oe,Be.numItems,+Date.now()-he)}return te&&console.timeEnd("total time"),this}getClusters(J,te){let se=((J[0]+180)%360+360)%360-180,_e=Math.max(-90,Math.min(90,J[1])),Ae=J[2]===180?180:((J[2]+180)%360+360)%360-180,Le=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)se=-180,Ae=180;else if(se>Ae){let Re=this.getClusters([se,_e,180,Le],te),tt=this.getClusters([-180,_e,Ae,Le],te);return Re.concat(tt)}let Be=this.trees[this._limitZoom(te)],Oe=Be.range(qe(se),He(Le),qe(Ae),He(_e)),he=Be.data,pe=[];for(let Re of Oe){let tt=this.stride*Re;pe.push(he[tt+5]>1?Ne(he,tt,this.clusterProps):this.points[he[tt+3]])}return pe}getChildren(J){let te=this._getOriginId(J),se=this._getOriginZoom(J),_e="No cluster with the specified id.",Ae=this.trees[se];if(!Ae)throw new Error(_e);let Le=Ae.data;if(te*this.stride>=Le.length)throw new Error(_e);let Be=this.options.radius/(this.options.extent*Math.pow(2,se-1)),Oe=Ae.within(Le[te*this.stride],Le[te*this.stride+1],Be),he=[];for(let pe of Oe){let Re=pe*this.stride;Le[Re+4]===J&&he.push(Le[Re+5]>1?Ne(Le,Re,this.clusterProps):this.points[Le[Re+3]])}if(he.length===0)throw new Error(_e);return he}getLeaves(J,te,se){let _e=[];return this._appendLeaves(_e,J,te=te||10,se=se||0,0),_e}getTile(J,te,se){let _e=this.trees[this._limitZoom(J)],Ae=Math.pow(2,J),{extent:Le,radius:Be}=this.options,Oe=Be/Le,he=(se-Oe)/Ae,pe=(se+1+Oe)/Ae,Re={features:[]};return this._addTileFeatures(_e.range((te-Oe)/Ae,he,(te+1+Oe)/Ae,pe),_e.data,te,se,Ae,Re),te===0&&this._addTileFeatures(_e.range(1-Oe/Ae,he,1,pe),_e.data,Ae,se,Ae,Re),te===Ae-1&&this._addTileFeatures(_e.range(0,he,Oe/Ae,pe),_e.data,-1,se,Ae,Re),Re.features.length?Re:null}getClusterExpansionZoom(J){let te=this._getOriginZoom(J)-1;for(;te<=this.options.maxZoom;){let se=this.getChildren(J);if(te++,se.length!==1)break;J=se[0].properties.cluster_id}return te}_appendLeaves(J,te,se,_e,Ae){let Le=this.getChildren(te);for(let Be of Le){let Oe=Be.properties;if(Oe&&Oe.cluster?Ae+Oe.point_count<=_e?Ae+=Oe.point_count:Ae=this._appendLeaves(J,Oe.cluster_id,se,_e,Ae):Ae<_e?Ae++:J.push(Be),J.length===se)break}return Ae}_createTree(J){let te=new i.aI(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<J.length;se+=this.stride)te.add(J[se],J[se+1]);return te.finish(),te.data=J,te}_addTileFeatures(J,te,se,_e,Ae,Le){for(let Be of J){let Oe=Be*this.stride,he=te[Oe+5]>1,pe,Re,tt;if(he)pe=Ce(te,Oe,this.clusterProps),Re=te[Oe],tt=te[Oe+1];else{let It=this.points[te[Oe+3]];pe=It.properties;let[ft,_t]=It.geometry.coordinates;Re=qe(ft),tt=He(_t)}let xe={type:1,geometry:[[Math.round(this.options.extent*(Re*Ae-se)),Math.round(this.options.extent*(tt*Ae-_e))]],tags:pe},ut;ut=he||this.options.generateId?te[Oe+3]:this.points[te[Oe+3]].id,ut!==void 0&&(xe.id=ut),Le.features.push(xe)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,te){let{radius:se,extent:_e,reduce:Ae,minPoints:Le}=this.options,Be=se/(_e*Math.pow(2,te)),Oe=J.data,he=[],pe=this.stride;for(let Re=0;Re<Oe.length;Re+=pe){if(Oe[Re+2]<=te)continue;Oe[Re+2]=te;let tt=Oe[Re],xe=Oe[Re+1],ut=J.within(Oe[Re],Oe[Re+1],Be),It=Oe[Re+5],ft=It;for(let _t of ut){let Wt=_t*pe;Oe[Wt+2]>te&&(ft+=Oe[Wt+5])}if(ft>It&&ft>=Le){let _t,Wt=tt*It,Tr=xe*It,rn=-1,Pr=(Re/pe<<5)+(te+1)+this.points.length;for(let ar of ut){let ur=ar*pe;if(Oe[ur+2]<=te)continue;Oe[ur+2]=te;let An=Oe[ur+5];Wt+=Oe[ur]*An,Tr+=Oe[ur+1]*An,Oe[ur+4]=Pr,Ae&&(_t||(_t=this._map(Oe,Re,!0),rn=this.clusterProps.length,this.clusterProps.push(_t)),Ae(_t,this._map(Oe,ur)))}Oe[Re+4]=Pr,he.push(Wt/ft,Tr/ft,1/0,Pr,-1,ft),Ae&&he.push(rn)}else{for(let _t=0;_t<pe;_t++)he.push(Oe[Re+_t]);if(ft>1)for(let _t of ut){let Wt=_t*pe;if(!(Oe[Wt+2]<=te)){Oe[Wt+2]=te;for(let Tr=0;Tr<pe;Tr++)he.push(Oe[Wt+Tr])}}}}return he}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,te,se){if(J[te+5]>1){let Le=this.clusterProps[J[te+6]];return se?Object.assign({},Le):Le}let _e=this.points[J[te+3]].properties,Ae=this.options.map(_e);return se&&Ae===_e?Object.assign({},Ae):Ae}}function Ne(De,J,te){return{type:"Feature",id:De[J+3],properties:Ce(De,J,te),geometry:{type:"Point",coordinates:[(se=De[J],360*(se-.5)),Ke(De[J+1])]}};var se}function Ce(De,J,te){let se=De[J+5],_e=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,Ae=De[J+6],Le=Ae===-1?{}:Object.assign({},te[Ae]);return Object.assign(Le,{cluster:!0,cluster_id:De[J+3],point_count:se,point_count_abbreviated:_e})}function qe(De){return De/360+.5}function He(De){let J=Math.sin(De*Math.PI/180),te=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return te<0?0:te>1?1:te}function Ke(De){let J=(180-360*De)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function Je(De,J,te,se){let _e=se,Ae=J+(te-J>>1),Le,Be=te-J,Oe=De[J],he=De[J+1],pe=De[te],Re=De[te+1];for(let tt=J+3;tt<te;tt+=3){let xe=We(De[tt],De[tt+1],Oe,he,pe,Re);if(xe>_e)Le=tt,_e=xe;else if(xe===_e){let ut=Math.abs(tt-Ae);ut<Be&&(Le=tt,Be=ut)}}_e>se&&(Le-J>3&&Je(De,J,Le,se),De[Le+2]=_e,te-Le>3&&Je(De,Le,te,se))}function We(De,J,te,se,_e,Ae){let Le=_e-te,Be=Ae-se;if(Le!==0||Be!==0){let Oe=((De-te)*Le+(J-se)*Be)/(Le*Le+Be*Be);Oe>1?(te=_e,se=Ae):Oe>0&&(te+=Le*Oe,se+=Be*Oe)}return Le=De-te,Be=J-se,Le*Le+Be*Be}function lt(De,J,te,se){let _e={id:De==null?null:De,type:J,geometry:te,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")pt(_e,te);else if(J==="Polygon")pt(_e,te[0]);else if(J==="MultiLineString")for(let Ae of te)pt(_e,Ae);else if(J==="MultiPolygon")for(let Ae of te)pt(_e,Ae[0]);return _e}function pt(De,J){for(let te=0;te<J.length;te+=3)De.minX=Math.min(De.minX,J[te]),De.minY=Math.min(De.minY,J[te+1]),De.maxX=Math.max(De.maxX,J[te]),De.maxY=Math.max(De.maxY,J[te+1])}function dt(De,J,te,se){if(!J.geometry)return;let _e=J.geometry.coordinates;if(_e&&_e.length===0)return;let Ae=J.geometry.type,Le=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),Be=[],Oe=J.id;if(te.promoteId?Oe=J.properties[te.promoteId]:te.generateId&&(Oe=se||0),Ae==="Point")ze(_e,Be);else if(Ae==="MultiPoint")for(let he of _e)ze(he,Be);else if(Ae==="LineString")Dt(_e,Be,Le,!1);else if(Ae==="MultiLineString"){if(te.lineMetrics){for(let he of _e)Be=[],Dt(he,Be,Le,!1),De.push(lt(Oe,"LineString",Be,J.properties));return}Ot(_e,Be,Le,!1)}else if(Ae==="Polygon")Ot(_e,Be,Le,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(let he of J.geometry.geometries)dt(De,{id:Oe,geometry:he,properties:J.properties},te,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let he of _e){let pe=[];Ot(he,pe,Le,!0),Be.push(pe)}}De.push(lt(Oe,Ae,Be,J.properties))}function ze(De,J){J.push(Ue(De[0]),nt(De[1]),0)}function Dt(De,J,te,se){let _e,Ae,Le=0;for(let Oe=0;Oe<De.length;Oe++){let he=Ue(De[Oe][0]),pe=nt(De[Oe][1]);J.push(he,pe,0),Oe>0&&(Le+=se?(_e*pe-he*Ae)/2:Math.sqrt(Math.pow(he-_e,2)+Math.pow(pe-Ae,2))),_e=he,Ae=pe}let Be=J.length-3;J[2]=1,Je(J,0,Be,te),J[Be+2]=1,J.size=Math.abs(Le),J.start=0,J.end=J.size}function Ot(De,J,te,se){for(let _e=0;_e<De.length;_e++){let Ae=[];Dt(De[_e],Ae,te,se),J.push(Ae)}}function Ue(De){return De/360+.5}function nt(De){let J=Math.sin(De*Math.PI/180),te=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return te<0?0:te>1?1:te}function Ze(De,J,te,se,_e,Ae,Le,Be){if(se/=J,Ae>=(te/=J)&&Le<se)return De;if(Le<te||Ae>=se)return null;let Oe=[];for(let he of De){let pe=he.geometry,Re=he.type,tt=_e===0?he.minX:he.minY,xe=_e===0?he.maxX:he.maxY;if(tt>=te&&xe<se){Oe.push(he);continue}if(xe<te||tt>=se)continue;let ut=[];if(Re==="Point"||Re==="MultiPoint")rt(pe,ut,te,se,_e);else if(Re==="LineString")at(pe,ut,te,se,_e,!1,Be.lineMetrics);else if(Re==="MultiLineString")Lt(pe,ut,te,se,_e,!1);else if(Re==="Polygon")Lt(pe,ut,te,se,_e,!0);else if(Re==="MultiPolygon")for(let It of pe){let ft=[];Lt(It,ft,te,se,_e,!0),ft.length&&ut.push(ft)}if(ut.length){if(Be.lineMetrics&&Re==="LineString"){for(let It of ut)Oe.push(lt(he.id,Re,It,he.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(ut.length===1?(Re="LineString",ut=ut[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=ut.length===3?"Point":"MultiPoint"),Oe.push(lt(he.id,Re,ut,he.tags))}}return Oe.length?Oe:null}function rt(De,J,te,se,_e){for(let Ae=0;Ae<De.length;Ae+=3){let Le=De[Ae+_e];Le>=te&&Le<=se&&zt(J,De[Ae],De[Ae+1],De[Ae+2])}}function at(De,J,te,se,_e,Ae,Le){let Be=ot(De),Oe=_e===0?Pt:$t,he,pe,Re=De.start;for(let ft=0;ft<De.length-3;ft+=3){let _t=De[ft],Wt=De[ft+1],Tr=De[ft+2],rn=De[ft+3],Pr=De[ft+4],ar=_e===0?_t:Wt,ur=_e===0?rn:Pr,An=!1;Le&&(he=Math.sqrt(Math.pow(_t-rn,2)+Math.pow(Wt-Pr,2))),ar<te?ur>te&&(pe=Oe(Be,_t,Wt,rn,Pr,te),Le&&(Be.start=Re+he*pe)):ar>se?ur<se&&(pe=Oe(Be,_t,Wt,rn,Pr,se),Le&&(Be.start=Re+he*pe)):zt(Be,_t,Wt,Tr),ur<te&&ar>=te&&(pe=Oe(Be,_t,Wt,rn,Pr,te),An=!0),ur>se&&ar<=se&&(pe=Oe(Be,_t,Wt,rn,Pr,se),An=!0),!Ae&&An&&(Le&&(Be.end=Re+he*pe),J.push(Be),Be=ot(De)),Le&&(Re+=he)}let tt=De.length-3,xe=De[tt],ut=De[tt+1],It=_e===0?xe:ut;It>=te&&It<=se&&zt(Be,xe,ut,De[tt+2]),tt=Be.length-3,Ae&&tt>=3&&(Be[tt]!==Be[0]||Be[tt+1]!==Be[1])&&zt(Be,Be[0],Be[1],Be[2]),Be.length&&J.push(Be)}function ot(De){let J=[];return J.size=De.size,J.start=De.start,J.end=De.end,J}function Lt(De,J,te,se,_e,Ae){for(let Le of De)at(Le,J,te,se,_e,Ae,!1)}function zt(De,J,te,se){De.push(J,te,se)}function Pt(De,J,te,se,_e,Ae){let Le=(Ae-J)/(se-J);return zt(De,Ae,te+(_e-te)*Le,1),Le}function $t(De,J,te,se,_e,Ae){let Le=(Ae-te)/(_e-te);return zt(De,J+(se-J)*Le,Ae,1),Le}function Xt(De,J){let te=[];for(let se=0;se<De.length;se++){let _e=De[se],Ae=_e.type,Le;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")Le=Gt(_e.geometry,J);else if(Ae==="MultiLineString"||Ae==="Polygon"){Le=[];for(let Be of _e.geometry)Le.push(Gt(Be,J))}else if(Ae==="MultiPolygon"){Le=[];for(let Be of _e.geometry){let Oe=[];for(let he of Be)Oe.push(Gt(he,J));Le.push(Oe)}}te.push(lt(_e.id,Ae,Le,_e.tags))}return te}function Gt(De,J){let te=[];te.size=De.size,De.start!==void 0&&(te.start=De.start,te.end=De.end);for(let se=0;se<De.length;se+=3)te.push(De[se]+J,De[se+1],De[se+2]);return te}function Sr(De,J){if(De.transformed)return De;let te=1<<De.z,se=De.x,_e=De.y;for(let Ae of De.features){let Le=Ae.geometry,Be=Ae.type;if(Ae.geometry=[],Be===1)for(let Oe=0;Oe<Le.length;Oe+=2)Ae.geometry.push(zr(Le[Oe],Le[Oe+1],J,te,se,_e));else for(let Oe=0;Oe<Le.length;Oe++){let he=[];for(let pe=0;pe<Le[Oe].length;pe+=2)he.push(zr(Le[Oe][pe],Le[Oe][pe+1],J,te,se,_e));Ae.geometry.push(he)}}return De.transformed=!0,De}function zr(De,J,te,se,_e,Ae){return[Math.round(te*(De*se-_e)),Math.round(te*(J*se-Ae))]}function vr(De,J,te,se,_e){let Ae=J===_e.maxZoom?0:_e.tolerance/((1<<J)*_e.extent),Le={features:[],numPoints:0,numSimplified:0,numFeatures:De.length,source:null,x:te,y:se,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Be of De)pr(Le,Be,Ae,_e);return Le}function pr(De,J,te,se){let _e=J.geometry,Ae=J.type,Le=[];if(De.minX=Math.min(De.minX,J.minX),De.minY=Math.min(De.minY,J.minY),De.maxX=Math.max(De.maxX,J.maxX),De.maxY=Math.max(De.maxY,J.maxY),Ae==="Point"||Ae==="MultiPoint")for(let Be=0;Be<_e.length;Be+=3)Le.push(_e[Be],_e[Be+1]),De.numPoints++,De.numSimplified++;else if(Ae==="LineString")dr(Le,_e,De,te,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let Be=0;Be<_e.length;Be++)dr(Le,_e[Be],De,te,Ae==="Polygon",Be===0);else if(Ae==="MultiPolygon")for(let Be=0;Be<_e.length;Be++){let Oe=_e[Be];for(let he=0;he<Oe.length;he++)dr(Le,Oe[he],De,te,!0,he===0)}if(Le.length){let Be=J.tags||null;if(Ae==="LineString"&&se.lineMetrics){Be={};for(let he in J.tags)Be[he]=J.tags[he];Be.mapbox_clip_start=_e.start/_e.size,Be.mapbox_clip_end=_e.end/_e.size}let Oe={geometry:Le,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:Be};J.id!==null&&(Oe.id=J.id),De.features.push(Oe)}}function dr(De,J,te,se,_e,Ae){let Le=se*se;if(se>0&&J.size<(_e?Le:se))return void(te.numPoints+=J.length/3);let Be=[];for(let Oe=0;Oe<J.length;Oe+=3)(se===0||J[Oe+2]>Le)&&(te.numSimplified++,Be.push(J[Oe],J[Oe+1])),te.numPoints++;_e&&function(Oe,he){let pe=0;for(let Re=0,tt=Oe.length,xe=tt-2;Re<tt;xe=Re,Re+=2)pe+=(Oe[Re]-Oe[xe])*(Oe[Re+1]+Oe[xe+1]);if(pe>0===he)for(let Re=0,tt=Oe.length;Re<tt/2;Re+=2){let xe=Oe[Re],ut=Oe[Re+1];Oe[Re]=Oe[tt-2-Re],Oe[Re+1]=Oe[tt-1-Re],Oe[tt-2-Re]=xe,Oe[tt-1-Re]=ut}}(Be,Ae),De.push(Be)}let br={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class un{constructor(J,te){let se=(te=this.options=function(Ae,Le){for(let Be in Le)Ae[Be]=Le[Be];return Ae}(Object.create(br),te)).debug;if(se&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let _e=function(Ae,Le){let Be=[];if(Ae.type==="FeatureCollection")for(let Oe=0;Oe<Ae.features.length;Oe++)dt(Be,Ae.features[Oe],Le,Oe);else dt(Be,Ae.type==="Feature"?Ae:{geometry:Ae},Le);return Be}(J,te);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=function(Ae,Le){let Be=Le.buffer/Le.extent,Oe=Ae,he=Ze(Ae,1,-1-Be,Be,0,-1,2,Le),pe=Ze(Ae,1,1-Be,2+Be,0,-1,2,Le);return(he||pe)&&(Oe=Ze(Ae,1,-Be,1+Be,0,-1,2,Le)||[],he&&(Oe=Xt(he,1).concat(Oe)),pe&&(Oe=Oe.concat(Xt(pe,-1)))),Oe}(_e,te),_e.length&&this.splitTile(_e,0,0,0),se&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,te,se,_e,Ae,Le,Be){let Oe=[J,te,se,_e],he=this.options,pe=he.debug;for(;Oe.length;){_e=Oe.pop(),se=Oe.pop(),te=Oe.pop(),J=Oe.pop();let Re=1<<te,tt=En(te,se,_e),xe=this.tiles[tt];if(!xe&&(pe>1&&console.time("creation"),xe=this.tiles[tt]=vr(J,te,se,_e,he),this.tileCoords.push({z:te,x:se,y:_e}),pe)){pe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,se,_e,xe.numFeatures,xe.numPoints,xe.numSimplified),console.timeEnd("creation"));let An=`z${te}`;this.stats[An]=(this.stats[An]||0)+1,this.total++}if(xe.source=J,Ae==null){if(te===he.indexMaxZoom||xe.numPoints<=he.indexMaxPoints)continue}else{if(te===he.maxZoom||te===Ae)continue;if(Ae!=null){let An=Ae-te;if(se!==Le>>An||_e!==Be>>An)continue}}if(xe.source=null,J.length===0)continue;pe>1&&console.time("clipping");let ut=.5*he.buffer/he.extent,It=.5-ut,ft=.5+ut,_t=1+ut,Wt=null,Tr=null,rn=null,Pr=null,ar=Ze(J,Re,se-ut,se+ft,0,xe.minX,xe.maxX,he),ur=Ze(J,Re,se+It,se+_t,0,xe.minX,xe.maxX,he);J=null,ar&&(Wt=Ze(ar,Re,_e-ut,_e+ft,1,xe.minY,xe.maxY,he),Tr=Ze(ar,Re,_e+It,_e+_t,1,xe.minY,xe.maxY,he),ar=null),ur&&(rn=Ze(ur,Re,_e-ut,_e+ft,1,xe.minY,xe.maxY,he),Pr=Ze(ur,Re,_e+It,_e+_t,1,xe.minY,xe.maxY,he),ur=null),pe>1&&console.timeEnd("clipping"),Oe.push(Wt||[],te+1,2*se,2*_e),Oe.push(Tr||[],te+1,2*se,2*_e+1),Oe.push(rn||[],te+1,2*se+1,2*_e),Oe.push(Pr||[],te+1,2*se+1,2*_e+1)}}getTile(J,te,se){J=+J,te=+te,se=+se;let _e=this.options,{extent:Ae,debug:Le}=_e;if(J<0||J>24)return null;let Be=1<<J,Oe=En(J,te=te+Be&Be-1,se);if(this.tiles[Oe])return Sr(this.tiles[Oe],Ae);Le>1&&console.log("drilling down to z%d-%d-%d",J,te,se);let he,pe=J,Re=te,tt=se;for(;!he&&pe>0;)pe--,Re>>=1,tt>>=1,he=this.tiles[En(pe,Re,tt)];return he&&he.source?(Le>1&&(console.log("found parent tile z%d-%d-%d",pe,Re,tt),console.time("drilling down")),this.splitTile(he.source,pe,Re,tt,J,te,se),Le>1&&console.timeEnd("drilling down"),this.tiles[Oe]?Sr(this.tiles[Oe],Ae):null):null}}function En(De,J,te){return 32*((1<<De)*te+J)+De}class Rn extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,te){return i._(this,void 0,void 0,function*(){let se=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let _e=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!_e)return null;let Ae=new D(_e.features,{version:2,extent:i.$}),Le=function(Be){let Oe=new i.cM;return function(he,pe){for(let Re in he.layers)pe.writeMessage(3,F,he.layers[Re])}(Be,Oe),Oe.finish()}(Ae);return Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),{vectorTile:Ae,rawData:Le.buffer}})}loadData(J){return i._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();let se=!!(J&&J.request&&J.request.collectResourceTiming)&&new i.cN(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest);let _e=yield this._pendingData;this._geoJSONIndex=J.cluster?new be(function({superclusterOptions:Le,clusterProperties:Be}){if(!Be||!Le)return Le;let Oe={},he={},pe={accumulated:null,zoom:0},Re={properties:null},tt=Object.keys(Be);for(let xe of tt){let[ut,It]=Be[xe],ft=i.cT(It),_t=i.cT(typeof ut=="string"?[ut,["accumulated"],["get",xe]]:ut);Oe[xe]=ft.value,he[xe]=_t.value}return Le.map=xe=>{Re.properties=xe;let ut={};for(let It of tt)ut[It]=Oe[It].evaluate(pe,Re);return ut},Le.reduce=(xe,ut)=>{Re.properties=ut;for(let It of tt)pe.accumulated=xe[It],xe[It]=he[It].evaluate(pe,Re)},Le}(J)).load(_e.features):function(Le,Be){return new un(Le,Be)}(_e,J.geojsonVtOptions),this.loaded={};let Ae={data:_e};if(se){let Le=se.finish();Le&&(Ae.resourceTiming={},Ae.resourceTiming[J.source]=JSON.parse(JSON.stringify(Le)))}return Ae}catch(_e){if(delete this._pendingRequest,i.cy(_e))return{abandoned:!0};throw _e}})}getData(){return i._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){let te=this.loaded;return te&&te[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,te){return i._(this,void 0,void 0,function*(){let se=yield this.loadGeoJSON(J,te);if(delete this._pendingRequest,typeof se!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(N(se,!0),J.filter){let _e=i.cT(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));se={type:"FeatureCollection",features:se.features.filter(Le=>_e.value.evaluate({zoom:0},Le))}}return se})}loadGeoJSON(J,te){return i._(this,void 0,void 0,function*(){let{promoteId:se}=J;if(J.request){let _e=yield i.j(J.request,te);return this._dataUpdateable=i.cV(_e.data,se)?i.cU(_e.data,se):void 0,_e.data}if(typeof J.data=="string")try{let _e=JSON.parse(J.data);return this._dataUpdateable=i.cV(_e,se)?i.cU(_e,se):void 0,_e}catch(_e){throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return i.cW(this._dataUpdateable,J.dataDiff,se),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return i._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class gi{constructor(J){this.self=J,this.actor=new i.J(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,se)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=se},this.self.addProtocol=i.cA,this.self.removeProtocol=i.cB,this.self.registerRTLTextPlugin=te=>{i.cX.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,se)=>this._getDEMWorkerSource(te,se.source).loadTile(se)),this.actor.registerMessageHandler("RDT",(te,se)=>i._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,se.source).removeTile(se)})),this.actor.registerMessageHandler("GCEZ",(te,se)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(te,se.type,se.source).getClusterExpansionZoom(se)})),this.actor.registerMessageHandler("GCC",(te,se)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(te,se.type,se.source).getClusterChildren(se)})),this.actor.registerMessageHandler("GCL",(te,se)=>i._(this,void 0,void 0,function*(){return this._getWorkerSource(te,se.type,se.source).getClusterLeaves(se)})),this.actor.registerMessageHandler("LD",(te,se)=>this._getWorkerSource(te,se.type,se.source).loadData(se)),this.actor.registerMessageHandler("GD",(te,se)=>this._getWorkerSource(te,se.type,se.source).getData()),this.actor.registerMessageHandler("LT",(te,se)=>this._getWorkerSource(te,se.type,se.source).loadTile(se)),this.actor.registerMessageHandler("RT",(te,se)=>this._getWorkerSource(te,se.type,se.source).reloadTile(se)),this.actor.registerMessageHandler("AT",(te,se)=>this._getWorkerSource(te,se.type,se.source).abortTile(se)),this.actor.registerMessageHandler("RMT",(te,se)=>this._getWorkerSource(te,se.type,se.source).removeTile(se)),this.actor.registerMessageHandler("RS",(te,se)=>i._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][se.type]||!this.workerSources[te][se.type][se.source])return;let _e=this.workerSources[te][se.type][se.source];delete this.workerSources[te][se.type][se.source],_e.removeSource!==void 0&&_e.removeSource(se)})),this.actor.registerMessageHandler("RM",te=>i._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})),this.actor.registerMessageHandler("SR",(te,se)=>i._(this,void 0,void 0,function*(){this.referrer=se})),this.actor.registerMessageHandler("SRPS",(te,se)=>this._syncRTLPluginState(te,se)),this.actor.registerMessageHandler("IS",(te,se)=>i._(this,void 0,void 0,function*(){this.self.importScripts(se)})),this.actor.registerMessageHandler("SI",(te,se)=>this._setImages(te,se)),this.actor.registerMessageHandler("UL",(te,se)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(se.layers,se.removedIds)})),this.actor.registerMessageHandler("SL",(te,se)=>i._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(se)}))}_setImages(J,te){return i._(this,void 0,void 0,function*(){this.availableImages[J]=te;for(let se in this.workerSources[J]){let _e=this.workerSources[J][se];for(let Ae in _e)_e[Ae].availableImages=te}})}_syncRTLPluginState(J,te){return i._(this,void 0,void 0,function*(){return yield i.cX.syncState(te,this.self.importScripts)})}_getAvailableImages(J){let te=this.availableImages[J];return te||(te=[]),te}_getLayerIndex(J){let te=this.layerIndexes[J];return te||(te=this.layerIndexes[J]=new o),te}_getWorkerSource(J,te,se){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][te]||(this.workerSources[J][te]={}),!this.workerSources[J][te][se]){let _e={sendAsync:(Ae,Le)=>(Ae.targetMapId=J,this.actor.sendAsync(Ae,Le))};switch(te){case"vector":this.workerSources[J][te][se]=new v(_e,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][te][se]=new Rn(_e,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][te][se]=new this.externalWorkerSourceTypes[te](_e,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][te][se]}_getDEMWorkerSource(J,te){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][te]||(this.demWorkerSources[J][te]=new x),this.demWorkerSources[J][te]}}return i.i(self)&&(self.worker=new gi(self)),gi}),r("index",["exports","./shared"],function(i,o){"use strict";var l="5.7.1";function f(){var w=new o.A(4);return o.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let d,v,x={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,a,h){let g=requestAnimationFrame(E=>{_(),a(E)}),{unsubscribe:_}=o.s(w.signal,"abort",()=>{_(),cancelAnimationFrame(g),h(o.c())},!1)},frameAsync(w){return new Promise((a,h)=>{this.frame(w,a,h)})},getImageData(w,a=0){return this.getImageCanvasContext(w).getImageData(-a,-a,w.width+2*a,w.height+2*a)},getImageCanvasContext(w){let a=window.document.createElement("canvas"),h=a.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return a.width=w.width,a.height=w.height,h.drawImage(w,0,0,w.width,w.height),h},resolveURL:w=>(d||(d=document.createElement("a")),d.href=w,d.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class b{static testProp(a){if(!b.docStyle)return a[0];for(let h=0;h<a.length;h++)if(a[h]in b.docStyle)return a[h];return a[0]}static create(a,h,g){let _=window.document.createElement(a);return h!==void 0&&(_.className=h),g&&g.appendChild(_),_}static createNS(a,h){return window.document.createElementNS(a,h)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(a,h){a.style[b.transformProp]=h}static addEventListener(a,h,g,_={}){a.addEventListener(h,g,"passive"in _?_:_.capture)}static removeEventListener(a,h,g,_={}){a.removeEventListener(h,g,"passive"in _?_:_.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static getScale(a){let h=a.getBoundingClientRect();return{x:h.width/a.offsetWidth||1,y:h.height/a.offsetHeight||1,boundingClientRect:h}}static getPoint(a,h,g){let _=h.boundingClientRect;return new o.P((g.clientX-_.left)/h.x-a.clientLeft,(g.clientY-_.top)/h.y-a.clientTop)}static mousePos(a,h){let g=b.getScale(a);return b.getPoint(a,g,h)}static touchPos(a,h){let g=[],_=b.getScale(a);for(let E=0;E<h.length;E++)g.push(b.getPoint(a,_,h[E]));return g}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){let h=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),g=h.querySelectorAll("script");for(let _ of g)_.remove();return b.clean(h),h.innerHTML}static isPossiblyDangerous(a,h){let g=h.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!g.includes("javascript:")&&!g.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){let h=a.children;for(let g of h)b.removeAttributes(g),b.clean(g)}static removeAttributes(a){for(let{name:h,value:g}of a.attributes)b.isPossiblyDangerous(h,g)&&a.removeAttribute(h)}}b.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);let A={supported:!1,testSupport:function(w){!j&&N&&(D?F(w):P=w)}},P,N,j=!1,D=!1;function F(w){let a=w.createTexture();w.bindTexture(w.TEXTURE_2D,a);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,N),w.isContextLost())return;A.supported=!0}catch(h){}w.deleteTexture(a),j=!0}var U;typeof document!="undefined"&&(N=document.createElement("img"),N.onload=()=>{P&&F(P),P=null,D=!0},N.onerror=()=>{j=!0,P=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let a,h,g,_;w.resetRequestQueue=()=>{a=[],h=0,g=0,_={}},w.addThrottleControl=k=>{let B=g++;return _[B]=k,B},w.removeThrottleControl=k=>{delete _[k],M()},w.getImage=(k,B,V=!0)=>new Promise((W,H)=>{A.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),o.e(k,{type:"image"}),a.push({abortController:B,requestParameters:k,supportImageRefresh:V,state:"queued",onError:K=>{H(K)},onSuccess:K=>{W(K)}}),M()});let E=k=>o._(this,void 0,void 0,function*(){k.state="running";let{requestParameters:B,supportImageRefresh:V,onError:W,onSuccess:H,abortController:K}=k,ee=V===!1&&!o.i(self)&&!o.g(B.url)&&(!B.headers||Object.keys(B.headers).reduce((fe,ve)=>fe&&ve==="accept",!0));h++;let ce=ee?L(B,K):o.m(B,K);try{let fe=yield ce;delete k.abortController,k.state="completed",fe.data instanceof HTMLImageElement||o.b(fe.data)?H(fe):fe.data&&H({data:yield(ue=fe.data,typeof createImageBitmap=="function"?o.f(ue):o.h(ue)),cacheControl:fe.cacheControl,expires:fe.expires})}catch(fe){delete k.abortController,W(fe)}finally{h--,M()}var ue}),M=()=>{let k=(()=>{for(let B of Object.keys(_))if(_[B]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=h;B<k&&a.length>0;B++){let V=a.shift();V.abortController.signal.aborted?B--:E(V)}},L=(k,B)=>new Promise((V,W)=>{let H=new Image,K=k.url,ee=k.credentials;ee&&ee==="include"?H.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!o.d(K))&&(H.crossOrigin="anonymous"),B.signal.addEventListener("abort",()=>{H.src="",W(o.c())}),H.fetchPriority="high",H.onload=()=>{H.onerror=H.onload=null,V({data:H})},H.onerror=()=>{H.onerror=H.onload=null,B.signal.aborted||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},H.src=K})}(U||(U={})),U.resetRequestQueue();class ${constructor(a){this._transformRequestFn=a!=null?a:null}transformRequest(a,h){return this._transformRequestFn&&this._transformRequestFn(a,h)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function Z(w){let a=[];if(typeof w=="string")a.push({id:"default",url:w});else if(w&&w.length>0){let h=[];for(let{id:g,url:_}of w){let E=`${g}${_}`;h.indexOf(E)===-1&&(h.push(E),a.push({id:g,url:_}))}}return a}function ie(w,a,h){try{let g=new URL(w);return g.pathname+=`${a}${h}`,g.toString()}catch(g){throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ne(w){let{userImage:a}=w;return!!(a&&a.render&&a.render())&&(w.data.replace(new Uint8Array(a.data.buffer)),!0)}class ae extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(let{ids:h,promiseResolve:g}of this.requestors)g(this._getImagesForIds(h));this.requestors=[]}}getImage(a){let h=this.images[a];if(h&&!h.data&&h.spriteData){let g=h.spriteData;h.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),h.spriteData=null}return h}addImage(a,h){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,h)&&(this.images[a]=h)}_validate(a,h){let g=!0,_=h.data||h.spriteData;return this._validateStretch(h.stretchX,_&&_.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),g=!1),this._validateStretch(h.stretchY,_&&_.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),g=!1),this._validateContent(h.content,h)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),g=!1),g}_validateStretch(a,h){if(!a)return!0;let g=0;for(let _ of a){if(_[0]<g||_[1]<_[0]||h<_[1])return!1;g=_[1]}return!0}_validateContent(a,h){if(!a)return!0;if(a.length!==4)return!1;let g=h.spriteData,_=g&&g.width||h.data.width,E=g&&g.height||h.data.height;return!(a[0]<0||_<a[0]||a[1]<0||E<a[1]||a[2]<0||_<a[2]||a[3]<0||E<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,h,g=!0){let _=this.getImage(a);if(g&&(_.data.width!==h.data.width||_.data.height!==h.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=_.version+1,this.images[a]=h,this.updatedImages[a]=!0}removeImage(a){let h=this.images[a];delete this.images[a],delete this.patterns[a],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((h,g)=>{let _=!0;if(!this.isLoaded())for(let E of a)this.images[E]||(_=!1);this.isLoaded()||_?h(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:h})})}_getImagesForIds(a){let h={};for(let g of a){let _=this.getImage(g);_||(this.fire(new o.l("styleimagemissing",{id:g})),_=this.getImage(g)),_?h[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){let{width:a,height:h}=this.atlasImage;return{width:a,height:h}}getPattern(a){let h=this.patterns[a],g=this.getImage(a);if(!g)return null;if(h&&h.position.version===g.version)return h.position;if(h)h.position.version=g.version;else{let _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},E=new o.I(_,g);this.patterns[a]={bin:_,position:E}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){let h=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(a,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){let a=[];for(let E in this.patterns)a.push(this.patterns[E].bin);let{w:h,h:g}=o.p(a),_=this.atlasImage;_.resize({width:h||1,height:g||1});for(let E in this.patterns){let{bin:M}=this.patterns[E],L=M.x+1,k=M.y+1,B=this.getImage(E).data,V=B.width,W=B.height;o.R.copy(B,_,{x:0,y:0},{x:L,y:k},{width:V,height:W}),o.R.copy(B,_,{x:0,y:W-1},{x:L,y:k-1},{width:V,height:1}),o.R.copy(B,_,{x:0,y:0},{x:L,y:k+W},{width:V,height:1}),o.R.copy(B,_,{x:V-1,y:0},{x:L-1,y:k},{width:1,height:W}),o.R.copy(B,_,{x:0,y:0},{x:L+V,y:k},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(let h of a){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;let g=this.getImage(h);g||o.w(`Image with ID: "${h}" was not found`),ne(g)&&this.updateImage(h,g)}}}let de=1e20;function ye(w,a,h,g,_,E,M,L,k){for(let B=a;B<a+g;B++)me(w,h*E+B,E,_,M,L,k);for(let B=h;B<h+_;B++)me(w,B*E+a,1,g,M,L,k)}function me(w,a,h,g,_,E,M){E[0]=0,M[0]=-de,M[1]=de,_[0]=w[a];for(let L=1,k=0,B=0;L<g;L++){_[L]=w[a+L*h];let V=L*L;do{let W=E[k];B=(_[L]-_[W]+V-W*W)/(L-W)/2}while(B<=M[k]&&--k>-1);k++,E[k]=L,M[k]=B,M[k+1]=de}for(let L=0,k=0;L<g;L++){for(;M[k+1]<L;)k++;let B=E[k],V=L-B;w[a+L*h]=_[B]+V*V}}class be{constructor(a,h,g){this.requestManager=a,this.localIdeographFontFamily=h,this.entries={},this.lang=g}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){let h=[];for(let E in a)for(let M of a[E])h.push(this._getAndCacheGlyphsPromise(E,M));let g=yield Promise.all(h),_={};for(let{stack:E,id:M,glyph:L}of g)_[E]||(_[E]={}),_[E][M]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};return _})}_getAndCacheGlyphsPromise(a,h){return o._(this,void 0,void 0,function*(){let g=this.entries[a];g||(g=this.entries[a]={glyphs:{},requests:{},ranges:{}});let _=g.glyphs[h];if(_!==void 0)return{stack:a,id:h,glyph:_};if(_=this._tinySDF(g,a,h),_)return g.glyphs[h]=_,{stack:a,id:h,glyph:_};let E=Math.floor(h/256);if(256*E>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[E])return{stack:a,id:h,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[E]){let L=be.loadGlyphRange(a,E,this.url,this.requestManager);g.requests[E]=L}let M=yield g.requests[E];for(let L in M)this._doesCharSupportLocalGlyph(+L)||(g.glyphs[+L]=M[+L]);return g.ranges[E]=!0,{stack:a,id:h,glyph:M[h]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,h,g){let _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(g))return;let E=a.tinySDF;if(!E){let L="400";/bold/i.test(h)?L="900":/medium/i.test(h)?L="500":/light/i.test(h)&&(L="200"),E=a.tinySDF=new be.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:L})}let M=E.draw(String.fromCharCode(g));return{id:g,bitmap:new o.q({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}be.loadGlyphRange=function(w,a,h,g){return o._(this,void 0,void 0,function*(){let _=256*a,E=_+255,M=g.transformRequest(h.replace("{fontstack}",w).replace("{range}",`${_}-${E}`),"Glyphs"),L=yield o.n(M,new AbortController);if(!L||!L.data)throw new Error(`Could not load glyph range. range: ${a}, ${_}-${E}`);let k={};for(let B of o.o(L.data))k[B.id]=B;return k})},be.TinySDF=class{constructor({fontSize:w=24,buffer:a=3,radius:h=8,cutoff:g=.25,fontFamily:_="sans-serif",fontWeight:E="normal",fontStyle:M="normal",lang:L=null}={}){this.buffer=a,this.cutoff=g,this.radius=h,this.lang=L;let k=this.size=w+4*a,B=this._createCanvas(k),V=this.ctx=B.getContext("2d",{willReadFrequently:!0});V.font=`${M} ${E} ${w}px ${_}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(w){let a=document.createElement("canvas");return a.width=a.height=w,a}draw(w){let{width:a,actualBoundingBoxAscent:h,actualBoundingBoxDescent:g,actualBoundingBoxLeft:_,actualBoundingBoxRight:E}=this.ctx.measureText(w),M=Math.ceil(h),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-_))),k=Math.min(this.size-this.buffer,M+Math.ceil(g)),B=L+2*this.buffer,V=k+2*this.buffer,W=Math.max(B*V,0),H=new Uint8ClampedArray(W),K={data:H,width:B,height:V,glyphWidth:L,glyphHeight:k,glyphTop:M,glyphLeft:0,glyphAdvance:a};if(L===0||k===0)return K;let{ctx:ee,buffer:ce,gridInner:ue,gridOuter:fe}=this;this.lang&&(ee.lang=this.lang),ee.clearRect(ce,ce,L,k),ee.fillText(w,ce,ce+M);let ve=ee.getImageData(ce,ce,L,k);fe.fill(de,0,W),ue.fill(0,0,W);for(let Se=0;Se<k;Se++)for(let we=0;we<L;we++){let Ie=ve.data[4*(Se*L+we)+3]/255;if(Ie===0)continue;let Pe=(Se+ce)*B+we+ce;if(Ie===1)fe[Pe]=0,ue[Pe]=de;else{let Ee=.5-Ie;fe[Pe]=Ee>0?Ee*Ee:0,ue[Pe]=Ee<0?Ee*Ee:0}}ye(fe,0,0,B,V,B,this.f,this.v,this.z),ye(ue,ce,ce,L,k,B,this.f,this.v,this.z);for(let Se=0;Se<W;Se++){let we=Math.sqrt(fe[Se])-Math.sqrt(ue[Se]);H[Se]=Math.round(255-255*(we/this.radius+this.cutoff))}return K}};class Ne{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,h){return o.B(a.expression.evaluate(h))}interpolate(a,h,g){return{x:o.C.number(a.x,h.x,g),y:o.C.number(a.y,h.y,g),z:o.C.number(a.z,h.z,g)}}}let Ce;class qe extends o.E{constructor(a){super(),Ce=Ce||new o.r({anchor:new o.D(o.v.light.anchor),position:new Ne,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(Ce),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,h={}){if(!this._validate(o.x,a,h))for(let g in a){let _=a[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,g){return(!g||g.validate!==!1)&&o.y(this,a.call(o.z,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let He=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Ke extends o.E{constructor(a){super(),this._transitionable=new o.t(He),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(a,h={}){if(!this._validate(o.G,a,h)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let g in a){let _=a[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,g={}){return(g==null?void 0:g.validate)!==!1&&o.y(this,a.call(o.z,o.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Je{constructor(a,h){this.width=a,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,h){let g=a.join(",")+String(h);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(a,h)),this.dashEntry[g]}getDashRanges(a,h,g){let _=[],E=a.length%2==1?-a[a.length-1]*g:0,M=a[0]*g,L=!0;_.push({left:E,right:M,isDash:L,zeroLength:a[0]===0});let k=a[0];for(let B=1;B<a.length;B++){L=!L;let V=a[B];E=k*g,k+=V,M=k*g,_.push({left:E,right:M,isDash:L,zeroLength:V===0})}return _}addRoundDash(a,h,g){let _=h/2;for(let E=-g;E<=g;E++){let M=this.width*(this.nextRow+g+E),L=0,k=a[L];for(let B=0;B<this.width;B++){B/k.right>1&&(k=a[++L]);let V=Math.abs(B-k.left),W=Math.abs(B-k.right),H=Math.min(V,W),K,ee=E/g*(_+1);if(k.isDash){let ce=_-Math.abs(ee);K=Math.sqrt(H*H+ce*ce)}else K=_-Math.sqrt(H*H+ee*ee);this.data[M+B]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(a){for(let L=a.length-1;L>=0;--L){let k=a[L],B=a[L+1];k.zeroLength?a.splice(L,1):B&&B.isDash===k.isDash&&(B.left=k.left,a.splice(L,1))}let h=a[0],g=a[a.length-1];h.isDash===g.isDash&&(h.left=g.left-this.width,g.right=h.right+this.width);let _=this.width*this.nextRow,E=0,M=a[E];for(let L=0;L<this.width;L++){L/M.right>1&&(M=a[++E]);let k=Math.abs(L-M.left),B=Math.abs(L-M.right),V=Math.min(k,B);this.data[_+L]=Math.max(0,Math.min(255,(M.isDash?V:-V)+128))}}addDash(a,h){let g=h?7:0,_=2*g+1;if(this.nextRow+_>this.height)return o.w("LineAtlas out of space"),null;let E=0;for(let L=0;L<a.length;L++)E+=a[L];if(E!==0){let L=this.width/E,k=this.getDashRanges(a,this.width,L);h?this.addRoundDash(k,L,g):this.addRegularDash(k)}let M={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:E};return this.nextRow+=_,this.dirty=!0,M}bind(a){let h=a.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}let We="maplibre_preloaded_worker_pool";class lt{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[We]}numActive(){return Object.keys(this.active).length}}let pt=Math.floor(x.hardwareConcurrency/2),dt,ze;function Dt(){return dt||(dt=new lt),dt}lt.workerCount=o.H(globalThis)?Math.max(Math.min(pt,3),1):1;class Ot{constructor(a,h){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=h;let g=this.workerPool.acquire(h);for(let _=0;_<g.length;_++){let E=new o.J(g[_],h);E.name=`Worker ${_}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,h){let g=[];for(let _ of this.actors)g.push(_.sendAsync({type:a,data:h}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,h){for(let g of this.actors)g.registerMessageHandler(a,h)}}function Ue(){return ze||(ze=new Ot(Dt(),o.K),ze.registerMessageHandler("GR",(w,a,h)=>o.m(a,h))),ze}function nt(w,a){let h=o.L();return o.M(h,h,[1,1,0]),o.N(h,h,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?o.O(h,h,w.calculatePosMatrix(a.toUnwrapped())):h}function Ze(w,a,h,g,_,E,M){var L;let k=function(H,K,ee){if(H)for(let ce of H){let ue=K[ce];if(ue&&ue.source===ee&&ue.type==="fill-extrusion")return!0}else for(let ce in K){let ue=K[ce];if(ue.source===ee&&ue.type==="fill-extrusion")return!0}return!1}((L=_==null?void 0:_.layers)!==null&&L!==void 0?L:null,a,w.id),B=E.maxPitchScaleFactor(),V=w.tilesIn(g,B,k);V.sort(rt);let W=[];for(let H of V)W.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(a,h,w._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,_,E,B,nt(w.transform,H.tileID),M?(K,ee)=>M(H.tileID,K,ee):void 0)});return function(H,K){for(let ee in H)for(let ce of H[ee])at(ce,K);return H}(function(H){let K={},ee={};for(let ce of H){let ue=ce.queryResults,fe=ce.wrappedTileID,ve=ee[fe]=ee[fe]||{};for(let Se in ue){let we=ue[Se],Ie=ve[Se]=ve[Se]||{},Pe=K[Se]=K[Se]||[];for(let Ee of we)Ie[Ee.featureIndex]||(Ie[Ee.featureIndex]=!0,Pe.push(Ee))}}return K}(W),w)}function rt(w,a){let h=w.tileID,g=a.tileID;return h.overscaledZ-g.overscaledZ||h.canonical.y-g.canonical.y||h.wrap-g.wrap||h.canonical.x-g.canonical.x}function at(w,a){let h=w.feature,g=a.getFeatureState(h.layer["source-layer"],h.id);h.source=h.layer.source,h.layer["source-layer"]&&(h.sourceLayer=h.layer["source-layer"]),h.state=g}function ot(w,a,h){return o._(this,void 0,void 0,function*(){let g=w;if(w.url?g=(yield o.j(a.transformRequest(w.url,"Source"),h)).data:yield x.frameAsync(h),!g)return null;let _=o.Q(o.e(g,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(_.vectorLayerIds=g.vector_layers.map(E=>E.id)),_})}class Lt{constructor(a,h){a&&(h?this.setSouthWest(a).setNorthEast(h):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.S?new o.S(a.lng,a.lat):o.S.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.S?new o.S(a.lng,a.lat):o.S.convert(a),this}extend(a){let h=this._sw,g=this._ne,_,E;if(a instanceof o.S)_=a,E=a;else{if(!(a instanceof Lt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Lt.convert(a)):this.extend(o.S.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.S.convert(a)):this;if(_=a._sw,E=a._ne,!_||!E)return this}return h||g?(h.lng=Math.min(_.lng,h.lng),h.lat=Math.min(_.lat,h.lat),g.lng=Math.max(E.lng,g.lng),g.lat=Math.max(E.lat,g.lat)):(this._sw=new o.S(_.lng,_.lat),this._ne=new o.S(E.lng,E.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){let{lng:h,lat:g}=o.S.convert(a),_=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&_}static convert(a){return a instanceof Lt?a:a&&new Lt(a)}static fromLngLat(a,h=0){let g=360*h/40075017,_=g/Math.cos(Math.PI/180*a.lat);return new Lt(new o.S(a.lng-_,a.lat-g),new o.S(a.lng+_,a.lat+g))}adjustAntiMeridian(){let a=new o.S(this._sw.lng,this._sw.lat),h=new o.S(this._ne.lng,this._ne.lat);return new Lt(a,a.lng>h.lng?new o.S(h.lng+360,h.lat):h)}}class zt{constructor(a,h,g){this.bounds=Lt.convert(this.validateBounds(a)),this.minzoom=h||0,this.maxzoom=g||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){let h=Math.pow(2,a.z),g=Math.floor(o.V(this.bounds.getWest())*h),_=Math.floor(o.U(this.bounds.getNorth())*h),E=Math.ceil(o.V(this.bounds.getEast())*h),M=Math.ceil(o.U(this.bounds.getSouth())*h);return a.x>=g&&a.x<E&&a.y>=_&&a.y<M}}class Pt extends o.E{constructor(a,h,g,_){if(super(),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(h,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let a=yield ot(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new zt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){let h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(h,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};g.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((E,M)=>{a.reloadPromise={resolve:E,reject:M}})}else a.actor=this.dispatcher.getActor(),_="LT";a.abortController=new AbortController;try{let E=yield a.actor.sendAsync({type:_,data:g},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,E)}catch(E){if(delete a.abortController,a.aborted)return;if(E&&E.status!==404)throw E;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,h){if(h&&h.resourceTiming&&(a.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&a.setExpiryData(h),a.loadVectorData(h,this.map.painter),a.reloadPromise){let g=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(g.resolve).catch(g.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class $t extends o.E{constructor(a,h,g,_){super(),this.id=a,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},h),o.e(this,o.Q(h,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let h=yield ot(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,h&&(o.e(this,h),h.bounds&&(this.tileBounds=new zt(h.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(h){this._tileJSONRequest=null,this.fire(new o.k(h))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){let h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{let g=yield U.getImage(this.map._requestManager.transformRequest(h,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&(g.cacheControl||g.expires)&&a.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});let _=this.map.painter.context,E=_.gl,M=g.data;a.texture=this.map.painter.getTileTexture(M.width),a.texture?a.texture.update(M,{useMipmap:!0}):(a.texture=new o.T(_,M,E.RGBA,{useMipmap:!0}),a.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(g){if(delete a.abortController,a.aborted)a.state="unloaded";else if(g)throw a.state="errored",g}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class Xt extends $t{constructor(a,h,g,_){super(a,h,g,_),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){let h=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(h,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{let _=yield U.getImage(g,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(_&&_.data){let E=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&a.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});let M=o.b(E)&&o.W()?E:yield this.readImageNow(E),L={type:this.type,uid:a.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();let k=yield a.actor.sendAsync({type:"LDT",data:L});a.dem=k,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(_){if(delete a.abortController,a.aborted)a.state="unloaded";else if(_)throw a.state="errored",_}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&o.X()){let h=a.width+2,g=a.height+2;try{return new o.R({width:h,height:g},yield o.Y(a,-1,-1,h,g))}catch(_){}}return x.getImageData(a,1)})}_getNeighboringTiles(a){let h=a.canonical,g=Math.pow(2,h.z),_=(h.x-1+g)%g,E=h.x===0?a.wrap-1:a.wrap,M=(h.x+1+g)%g,L=h.x+1===g?a.wrap+1:a.wrap,k={};return k[new o.Z(a.overscaledZ,E,h.z,_,h.y).key]={backfilled:!1},k[new o.Z(a.overscaledZ,L,h.z,M,h.y).key]={backfilled:!1},h.y>0&&(k[new o.Z(a.overscaledZ,E,h.z,_,h.y-1).key]={backfilled:!1},k[new o.Z(a.overscaledZ,a.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},k[new o.Z(a.overscaledZ,L,h.z,M,h.y-1).key]={backfilled:!1}),h.y+1<g&&(k[new o.Z(a.overscaledZ,E,h.z,_,h.y+1).key]={backfilled:!1},k[new o.Z(a.overscaledZ,a.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},k[new o.Z(a.overscaledZ,L,h.z,M,h.y+1).key]={backfilled:!1}),k}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class Gt extends o.E{constructor(a,h,g,_){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:h.data},this.actor=g.getActor(),this.setEventedParent(_),this._data=h.data,this._options=o.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId,h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(h.buffer!==void 0?h.buffer:128),tolerance:this._pixelsToTileUnits(h.tolerance!==void 0?h.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(h.clusterMaxZoom),minPoints:Math.max(2,h.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(h.clusterRadius||50),log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.$/this.tileSize)}_getClusterMaxZoom(a){let h=a?Math.round(a):this.maxzoom-1;return Number.isInteger(a)||a===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${a}" rounded to "${h}"`),h}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._pendingWorkerUpdate={data:a},this._updateWorkerData(),this}updateData(a){return this._pendingWorkerUpdate.diff=o.a0(this._pendingWorkerUpdate.diff,a),this._updateWorkerData(),this}getData(){return o._(this,void 0,void 0,function*(){let a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}getCoordinatesFromGeometry(a){return a.type==="GeometryCollection"?a.geometries.map(h=>h.coordinates).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){let a=new Lt,h=yield this.getData(),g;switch(h.type){case"FeatureCollection":g=h.features.map(_=>this.getCoordinatesFromGeometry(_.geometry)).flat(1/0);break;case"Feature":g=this.getCoordinatesFromGeometry(h.geometry);break;default:g=this.getCoordinatesFromGeometry(h)}if(g.length==0)return a;for(let _=0;_<g.length-1;_+=2)a.extend([g[_],g[_+1]]);return a})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(a.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,h,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:h,offset:g}})}_updateWorkerData(){return o._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;let{data:a,diff:h}=this._pendingWorkerUpdate;if(!a&&!h)return void o.w(`No data or diff provided to GeoJSONSource ${this.id}.`);let g=o.e({type:this.type},this.workerOptions);a?(typeof a=="string"?(g.request=this.map._requestManager.transformRequest(x.resolveURL(a),"Source"),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(a),this._pendingWorkerUpdate.data=void 0):h&&(g.dataDiff=h,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{let _=yield this.actor.sendAsync({type:"LD",data:g});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));this._data=_.data;let E=null;_.resourceTiming&&_.resourceTiming[this.id]&&(E=_.resourceTiming[this.id].slice(0));let M={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&o.e(M,{resourceTiming:E}),this.fire(new o.l("data",Object.assign(Object.assign({},M),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},M),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(a){return o._(this,void 0,void 0,function*(){let h=a.actor?"RT":"LT";a.actor=this.actor;let g={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};a.abortController=new AbortController;let _=yield this.actor.sendAsync({type:h,data:g},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(_,this.map.painter,h==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Sr extends o.E{constructor(a,h,g,_){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=g,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=h}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let h=yield U.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,a&&(this.coordinates=a),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,this.fire(new o.k(h))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;let h=a.map(o.a1.fromLngLat);var g;return this.tileID=function(_){let E=o.a2.fromPoints(_),M=E.width(),L=E.height(),k=Math.max(M,L),B=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),V=Math.pow(2,B);return new o.a4(B,Math.floor((E.minX+E.maxX)/2*V),Math.floor((E.minY+E.maxY)/2*V))}(h),this.terrainTileRanges=this._getOverlappingTileRanges(h),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=h.map(_=>this.tileID.getTilePoint(_)._round()),this.flippedWindingOrder=((g=this.tileCoords)[1].x-g[0].x)*(g[2].y-g[0].y)-(g[1].y-g[0].y)*(g[2].x-g[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let a=this.map.painter.context,h=a.gl;this.texture||(this.texture=new o.T(a,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let g=!1;for(let _ in this.tiles){let E=this.tiles[_];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){let{minX:h,minY:g,maxX:_,maxY:E}=o.a2.fromPoints(a),M={};for(let L=0;L<=o.a3;L++){let k=Math.pow(2,L),B=Math.floor(h*k),V=Math.floor(g*k),W=Math.floor(_*k),H=Math.floor(E*k);M[L]={minTileX:B,minTileY:V,maxTileX:W,maxTileY:H}}return M}}class zr extends Sr{constructor(a,h,g,_){super(a,h,g,_),this.roundZoom=!0,this.type="video",this.options=h}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;let a=this.options;this.urls=[];for(let h of a.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{let h=yield o.a5(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new o.k(h))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){let h=this.video.seekable;a<h.start(0)||a>h.end(0)?this.fire(new o.k(new o.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let a=this.map.painter.context,h=a.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(a,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let g=!1;for(let _ in this.tiles){let E=this.tiles[_];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class vr extends Sr{constructor(a,h,g,_){super(a,h,g,_),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(M=>typeof M!="number"))||this.fire(new o.k(new o.a6(`sources.${a}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new o.k(new o.a6(`sources.${a}`,null,"missing required property \"coordinates\""))),h.animate&&typeof h.animate!="boolean"&&this.fire(new o.k(new o.a6(`sources.${a}`,null,"optional \"animate\" property must be a boolean value"))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a6(`sources.${a}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new o.k(new o.a6(`sources.${a}`,null,"missing required property \"canvas\""))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let h=this.map.painter.context,g=h.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(h,this.canvas,g.RGBA,{premultiply:!0});let _=!1;for(let E in this.tiles){let M=this.tiles[E];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,_=!0)}_&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}let pr={},dr=w=>{switch(w){case"geojson":return Gt;case"image":return Sr;case"raster":return $t;case"raster-dem":return Xt;case"vector":return Pt;case"video":return zr;case"canvas":return vr}return pr[w]},br="RTLPluginLoaded";class un extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ue()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(h=>{throw this.status="error",h})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(h,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(br))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let En=null;function Rn(){return En||(En=new un),En}class gi{constructor(a,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a7(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){let h=a+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,h,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(_,E){let M={};if(!E)return M;for(let L of _){let k=L.layerIds.map(B=>E.getLayer(B)).filter(Boolean);if(k.length!==0){L.layers=k,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(B=>k.filter(V=>V.id===B)[0]));for(let B of k)M[B.id]=L}}return M}(a.buckets,h==null?void 0:h.style),this.hasSymbolBuckets=!1;for(let _ in this.buckets){let E=this.buckets[_];if(E instanceof o.a9){if(this.hasSymbolBuckets=!0,!g)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let _ in this.buckets){let E=this.buckets[_];if(E instanceof o.a9&&E.hasRTLText){this.hasRTLText=!0,Rn().lazyLoad();break}}this.queryPadding=0;for(let _ in this.buckets){let E=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(_).queryRadius(E))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a8}unloadVectorData(){for(let a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(let g in this.buckets){let _=this.buckets[g];_.uploadPending()&&_.upload(a)}let h=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(a,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(a,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,h,g,_,E,M,L,k,B,V,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:E,scale:M,tileSize:this.tileSize,pixelPosMatrix:V,transform:k,params:L,queryPadding:this.queryPadding*B,getElevation:W},a,h,g):{}}querySourceFeatures(a,h){let g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;let _=g.loadVTLayers(),E=h&&h.sourceLayer?h.sourceLayer:"",M=_._geojsonTileLayer||_[E];if(!M)return;let L=o.aa(h&&h.filter),{z:k,x:B,y:V}=this.tileID.canonical,W={z:k,x:B,y:V};for(let H=0;H<M.length;H++){let K=M.feature(H);if(L.needGeometry){let ue=o.ab(K,!0);if(!L.filter(new o.F(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!L.filter(new o.F(this.tileID.overscaledZ),K))continue;let ee=g.getId(K,E),ce=new o.ac(K,k,B,V,ee);ce.tile=W,a.push(ce)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){let h=this.expirationTime;if(a.cacheControl){let g=o.ad(a.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){let g=Date.now(),_=!1;if(this.expirationTime>g)_=!1;else if(h){if(this.expirationTime<h)_=!0;else{let E=this.expirationTime-h;E?this.expirationTime=g+Math.max(E,3e4):_=!0}}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;let g=this.latestFeatureIndex.loadVTLayers();for(let _ in this.buckets){if(!h.style.hasLayer(_))continue;let E=this.buckets[_],M=E.layers[0].sourceLayer||"_geojsonTileLayer",L=g[M],k=a[M];if(!L||!k||Object.keys(k).length===0)continue;E.update(k,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});let B=h&&h.style&&h.style.getLayer(_);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<x.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=x.now()+a}setDependencies(a,h){let g={};for(let _ of h)g[_]=!0;this.dependencies[a]=g}hasDependency(a,h){for(let g of a){let _=this.dependencies[g];if(_){for(let E of h)if(_[E])return!0}}return!1}}class De{constructor(a,h){this.max=a,this.onRemove=h,this.reset()}reset(){for(let a in this.data)for(let h of this.data[a])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(a,h,g){let _=a.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);let E={value:h,timeout:void 0};if(g!==void 0&&(E.timeout=setTimeout(()=>{this.remove(a,E)},g)),this.data[_].push(E),this.order.push(_),this.order.length>this.max){let M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){let h=this.data[a].shift();return h.timeout&&clearTimeout(h.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),h.value}getByKey(a){let h=this.data[a];return h?h[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,h){if(!this.has(a))return this;let g=a.wrapped().key,_=h===void 0?0:this.data[g].indexOf(h),E=this.data[g][_];return this.data[g].splice(_,1),E.timeout&&clearTimeout(E.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(E.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){let h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(a){let h=[];for(let g in this.data)for(let _ of this.data[g])a(_.value)||h.push(_);for(let g of h)this.remove(g.value.tileID,g)}}class J{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,h,g){let _=String(h);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][_]=this.stateChanges[a][_]||{},o.e(this.stateChanges[a][_],g),this.deletedStates[a]===null){this.deletedStates[a]={};for(let E in this.state[a])E!==_&&(this.deletedStates[a][E]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][_]===null){this.deletedStates[a][_]={};for(let E in this.state[a][_])g[E]||(this.deletedStates[a][_][E]=null)}else for(let E in g)this.deletedStates[a]&&this.deletedStates[a][_]&&this.deletedStates[a][_][E]===null&&delete this.deletedStates[a][_][E]}removeFeatureState(a,h,g){if(this.deletedStates[a]===null)return;let _=String(h);if(this.deletedStates[a]=this.deletedStates[a]||{},g&&h!==void 0)this.deletedStates[a][_]!==null&&(this.deletedStates[a][_]=this.deletedStates[a][_]||{},this.deletedStates[a][_][g]=null);else if(h!==void 0){if(this.stateChanges[a]&&this.stateChanges[a][_])for(g in this.deletedStates[a][_]={},this.stateChanges[a][_])this.deletedStates[a][_][g]=null;else this.deletedStates[a][_]=null;}else this.deletedStates[a]=null}getState(a,h){let g=String(h),_=o.e({},(this.state[a]||{})[g],(this.stateChanges[a]||{})[g]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){let E=this.deletedStates[a][h];if(E===null)return{};for(let M in E)delete _[M]}return _}initializeTileState(a,h){a.setFeatureState(this.state,h)}coalesceChanges(a,h){let g={};for(let _ in this.stateChanges){this.state[_]=this.state[_]||{};let E={};for(let M in this.stateChanges[_])this.state[_][M]||(this.state[_][M]={}),o.e(this.state[_][M],this.stateChanges[_][M]),E[M]=this.state[_][M];g[_]=E}for(let _ in this.deletedStates){this.state[_]=this.state[_]||{};let E={};if(this.deletedStates[_]===null)for(let M in this.state[_])E[M]={},this.state[_][M]={};else for(let M in this.deletedStates[_]){if(this.deletedStates[_][M]===null)this.state[_][M]={};else for(let L of Object.keys(this.deletedStates[_][M]))delete this.state[_][M][L];E[M]=this.state[_][M]}g[_]=g[_]||{},o.e(g[_],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(let _ in a)a[_].setFeatureState(g,h)}}let te=89.25;function se(w,a){let h=o.ah(a.lat,-o.ai,o.ai);return new o.P(o.V(a.lng)*w,o.U(h)*w)}function _e(w,a){return new o.a1(a.x/w,a.y/w).toLngLat()}function Ae(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(o.ae(90-w.pitch)),Math.tan(o.ae(te-w.pitch)))}function Le(w,a){let h=w.canonical,g=a/o.af(h.z),_=h.x+Math.pow(2,h.z)*w.wrap,E=o.ag(new Float64Array(16));return o.M(E,E,[_*g,h.y*g,0]),o.N(E,E,[g/o.$,g/o.$,1]),E}function Be(w,a,h,g,_){let E=o.a1.fromLngLat(w,a),M=_*o.aj(1,w.lat),L=M*Math.cos(o.ae(h)),k=Math.sqrt(M*M-L*L),B=k*Math.sin(o.ae(-g)),V=k*Math.cos(o.ae(-g));return new o.a1(E.x+B,E.y+V,E.z+L)}function Oe(w,a,h){let g=a.intersectsFrustum(w);if(!h||g===0)return g;let _=a.intersectsPlane(h);return _===0?0:g===2&&_===2?2:1}function he(w,a,h){let g=0,_=(h-a)/10;for(let E=0;E<10;E++)g+=_*Math.pow(Math.cos(a+(E+.5)/10*(h-a)),w);return g}function pe(w,a){return function(h,g,_,E,M){let L=2*((w-1)/o.ak(Math.cos(o.ae(te-M))/Math.cos(o.ae(te)))-1),k=Math.acos(_/E),B=2*he(L-1,0,o.ae(M/2)),V=Math.min(o.ae(te),k+o.ae(M/2)),W=he(L-1,Math.min(V,k-o.ae(M/2)),V),H=Math.atan(g/_),K=Math.hypot(g,_),ee=h;return ee+=o.ak(E/K/Math.max(.5,Math.cos(o.ae(M/2)))),ee+=L*o.ak(Math.cos(H))/2,ee-=o.ak(Math.max(1,W/B/a))/2,ee}}let Re=pe(9.314,3);function tt(w,a){let h=(a.roundZoom?Math.round:Math.floor)(w.zoom+o.ak(w.tileSize/a.tileSize));return Math.max(0,h)}function xe(w,a){let h=w.getCameraFrustum(),g=w.getClippingPlane(),_=w.screenPointToMercatorCoordinate(w.getCameraPoint()),E=o.a1.fromLngLat(w.center,w.elevation);_.z=E.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;let M=w.getCoveringTilesDetailsProvider(),L=M.allowVariableZoom(w,a),k=tt(w,a),B=a.minzoom||0,V=a.maxzoom!==void 0?a.maxzoom:w.maxZoom,W=Math.min(Math.max(0,k),V),H=Math.pow(2,W),K=[H*_.x,H*_.y,0],ee=[H*E.x,H*E.y,0],ce=Math.hypot(E.x-_.x,E.y-_.y),ue=Math.abs(E.z-_.z),fe=Math.hypot(ce,ue),ve=Ie=>({zoom:0,x:0,y:0,wrap:Ie,fullyVisible:!1}),Se=[],we=[];if(w.renderWorldCopies&&M.allowWorldCopies())for(let Ie=1;Ie<=3;Ie++)Se.push(ve(-Ie)),Se.push(ve(Ie));for(Se.push(ve(0));Se.length>0;){let Ie=Se.pop(),Pe=Ie.x,Ee=Ie.y,Fe=Ie.fullyVisible,Qe={x:Pe,y:Ee,z:Ie.zoom},Ve=M.getTileBoundingVolume(Qe,Ie.wrap,w.elevation,a);if(!Fe){let bt=Oe(h,Ve,g);if(bt===0)continue;Fe=bt===2}let Ge=M.distanceToTile2d(_.x,_.y,Qe,Ve),Xe=k;L&&(Xe=(a.calculateTileZoom||Re)(w.zoom+o.ak(w.tileSize/a.tileSize),Ge,ue,fe,w.fov)),Xe=(a.roundZoom?Math.round:Math.floor)(Xe),Xe=Math.max(0,Xe);let vt=Math.min(Xe,V);if(Ie.wrap=M.getWrap(E,Qe,Ie.wrap),Ie.zoom>=vt){if(Ie.zoom<B)continue;let bt=W-Ie.zoom,st=K[0]-.5-(Pe<<bt),Zt=K[1]-.5-(Ee<<bt),Dr=a.reparseOverscaled?Math.max(Ie.zoom,Xe):Ie.zoom;we.push({tileID:new o.Z(Ie.zoom===V?Dr:Ie.zoom,Ie.wrap,Ie.zoom,Pe,Ee),distanceSq:o.al([ee[0]-.5-Pe,ee[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(st*st+Zt*Zt)})}else for(let bt=0;bt<4;bt++)Se.push({zoom:Ie.zoom+1,x:(Pe<<1)+bt%2,y:(Ee<<1)+(bt>>1),wrap:Ie.wrap,fullyVisible:Fe})}return we.sort((Ie,Pe)=>Ie.distanceSq-Pe.distanceSq).map(Ie=>Ie.tileID)}let ut=o.a2.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class It extends o.E{constructor(a,h,g){super(),this.id=a,this.dispatcher=g,this.on("data",_=>this._dataHandler(_)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_,E,M,L)=>{let k=new(dr(E.type))(_,E,M,L);if(k.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${k.id}`);return k})(a,h,g,this),this._tiles={},this._cache=new De(0,_=>this._unloadTile(_)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new J,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let a in this._tiles){let h=this._tiles[a];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,h,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,h,g)}catch(_){a.state="errored",_.status!==404?this._source.fire(new o.k(_,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let h in this._tiles){let g=this._tiles[h];g.upload(a),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(ft).map(a=>a.key)}getRenderableIds(a){let h=[];for(let g in this._tiles)this._isIdRenderable(g,a)&&h.push(this._tiles[g]);return a?h.sort((g,_)=>{let E=g.tileID,M=_.tileID,L=new o.P(E.canonical.x,E.canonical.y)._rotate(-this.transform.bearingInRadians),k=new o.P(M.canonical.x,M.canonical.y)._rotate(-this.transform.bearingInRadians);return E.overscaledZ-M.overscaledZ||k.y-L.y||k.x-L.x}).map(g=>g.tileID.key):h.map(g=>g.tileID).sort(ft).map(g=>g.key)}hasRenderableParent(a){let h=this.findLoadedParent(a,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(a,h){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(h||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let h in this._tiles)a?this._reloadTile(h,"expired"):this._tiles[h].state!=="errored"&&this._reloadTile(h,"reloading")}}_reloadTile(a,h){return o._(this,void 0,void 0,function*(){let g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=h),yield this._loadTile(g,a,h))})}_tileLoaded(a,h,g){a.timeAdded=x.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(h,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){let h=this.getRenderableIds();for(let _=0;_<h.length;_++){let E=h[_];if(a.neighboringTiles&&a.neighboringTiles[E]){let M=this.getTileByID(E);g(a,M),g(M,a)}}function g(_,E){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let M=E.tileID.canonical.x-_.tileID.canonical.x,L=E.tileID.canonical.y-_.tileID.canonical.y,k=Math.pow(2,_.tileID.canonical.z),B=E.tileID.key;M===0&&L===0||Math.abs(L)>1||(Math.abs(M)>1&&(Math.abs(M+k)===1?M+=k:Math.abs(M-k)===1&&(M-=k)),E.dem&&_.dem&&(_.dem.backfillBorder(E.dem,M,L),_.neighboringTiles&&_.neighboringTiles[B]&&(_.neighboringTiles[B].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,h,g,_){for(let E in this._tiles){let M=this._tiles[E];if(_[E]||!M.hasData()||M.tileID.overscaledZ<=h||M.tileID.overscaledZ>g)continue;let L=M.tileID;for(;M&&M.tileID.overscaledZ>h+1;){let B=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[B.key],M&&M.hasData()&&(L=B)}let k=L;for(;k.overscaledZ>h;)if(k=k.scaledTo(k.overscaledZ-1),a[k.key]||a[k.canonical.key]){_[L.key]=L;break}}}findLoadedParent(a,h){if(a.key in this._loadedParentTiles){let g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=h?g:null}for(let g=a.overscaledZ-1;g>=h;g--){let _=a.scaledTo(g),E=this._getLoadedTile(_);if(E)return E}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){let h=this._tiles[a.key];return h&&h.hasData()?h:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){let h=Math.ceil(a.width/this._source.tileSize)+1,g=Math.ceil(a.height/this._source.tileSize)+1,_=Math.floor(h*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(E)}handleWrapJump(a){let h=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,h){let g={};for(let _ in this._tiles){let E=this._tiles[_];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+h),g[E.tileID.key]=E}this._tiles=g;for(let _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(let _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(a,h,g,_,E,M){let L={},k={},B=Object.keys(a),V=x.now();for(let W of B){let H=a[W],K=this._tiles[W];if(!K||K.fadeEndTime!==0&&K.fadeEndTime<=V)continue;let ee=this.findLoadedParent(H,h),ce=this.findLoadedSibling(H),ue=ee||ce||null;ue&&(this._addTile(ue.tileID),L[ue.tileID.key]=ue.tileID),k[W]=H}this._retainLoadedChildren(k,_,g,a);for(let W in L)a[W]||(this._coveredTiles[W]=!0,a[W]=L[W]);if(M){let W={},H={};for(let K of E)this._tiles[K.key].hasData()?W[K.key]=K:H[K.key]=K;for(let K in H){let ee=H[K].children(this._source.maxzoom);this._tiles[ee[0].key]&&this._tiles[ee[1].key]&&this._tiles[ee[2].key]&&this._tiles[ee[3].key]&&(W[ee[0].key]=a[ee[0].key]=ee[0],W[ee[1].key]=a[ee[1].key]=ee[1],W[ee[2].key]=a[ee[2].key]=ee[2],W[ee[3].key]=a[ee[3].key]=ee[3],delete H[K])}for(let K in H){let ee=H[K],ce=this.findLoadedParent(ee,this._source.minzoom),ue=this.findLoadedSibling(ee),fe=ce||ue||null;if(fe){W[fe.tileID.key]=a[fe.tileID.key]=fe.tileID;for(let ve in W)W[ve].isChildOf(fe.tileID)&&delete W[ve]}}for(let K in this._tiles)W[K]||(this._coveredTiles[K]=!0)}}update(a,h){if(!this._sourceLoaded||this._paused)return;let g;this.transform=a,this.terrain=h,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new o.Z(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(g=xe(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(g=g.filter(V=>this._source.hasTile(V)))):g=[];let _=tt(a,this._source),E=Math.max(_-It.maxOverzooming,this._source.minzoom),M=Math.max(_+It.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let V={};for(let W of g)if(W.canonical.z>this._source.minzoom){let H=W.scaledTo(W.canonical.z-1);V[H.key]=H;let K=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));V[K.key]=K}g=g.concat(Object.values(V))}let L=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,L&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let k=this._updateRetainedTiles(g,_);_t(this._source.type)&&this._updateCoveredAndRetainedTiles(k,E,M,_,g,h);for(let V in k)this._tiles[V].clearFadeHold();let B=o.am(this._tiles,k);for(let V of B){let W=this._tiles[V];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,h){var g;let _={},E={},M=Math.max(h-It.maxOverzooming,this._source.minzoom),L=Math.max(h+It.maxUnderzooming,this._source.minzoom),k={};for(let B of a){let V=this._addTile(B);_[B.key]=B,V.hasData()||h<this._source.maxzoom&&(k[B.key]=B)}this._retainLoadedChildren(k,h,L,_);for(let B of a){let V=this._tiles[B.key];if(V.hasData())continue;if(h+1>this._source.maxzoom){let H=B.children(this._source.maxzoom)[0],K=this.getTile(H);if(K&&K.hasData()){_[H.key]=H;continue}}else{let H=B.children(this._source.maxzoom);if(_[H[0].key]&&_[H[1].key]&&_[H[2].key]&&_[H[3].key])continue}let W=V.wasRequested();for(let H=B.overscaledZ-1;H>=M;--H){let K=B.scaledTo(H);if(E[K.key])break;if(E[K.key]=!0,V=this.getTile(K),!V&&W&&(V=this._addTile(K)),V){let ee=V.hasData();if((ee||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||W)&&(_[K.key]=K),W=V.wasRequested(),ee)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let a in this._tiles){let h=[],g,_=this._tiles[a].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){g=this._loadedParentTiles[_.key];break}h.push(_.key);let E=_.scaledTo(_.overscaledZ-1);if(g=this._getLoadedTile(E),g)break;_=E}for(let E of h)this._loadedParentTiles[E]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let a in this._tiles){let h=this._tiles[a].tileID,g=this._getLoadedTile(h);this._loadedSiblingTiles[h.key]=g}}_addTile(a){let h=this._tiles[a.key];if(h)return h;h=this._cache.getAndRemove(a),h&&(this._setTileReloadTimer(a.key,h),h.tileID=a,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,h)));let g=h;return h||(h=new gi(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(h,a.key,h.state)),h.uses++,this._tiles[a.key]=h,g||this._source.fire(new o.l("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(a,h){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);let g=h.getExpiryTimeout();g&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},g))}refreshTiles(a){for(let h in this._tiles)(this._isIdRenderable(h)||this._tiles[h].state=="errored")&&a.some(g=>g.equals(this._tiles[h].tileID.canonical))&&this._reloadTile(h,"expired")}_removeTile(a){let h=this._tiles[a];h&&(h.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(a){let h=a.sourceDataType;a.dataType==="source"&&h==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&h==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,h,g){let _=[],E=this.transform;if(!E)return _;let M=E.getCoveringTilesDetailsProvider().allowWorldCopies(),L=g?E.getCameraQueryGeometry(a):a,k=K=>E.screenPointToMercatorCoordinate(K,this.terrain),B=this.transformBbox(a,k,!M),V=this.transformBbox(L,k,!M),W=this.getIds(),H=o.a2.fromPoints(V);for(let K=0;K<W.length;K++){let ee=this._tiles[W[K]];if(ee.holdingForFade())continue;let ce=M?[ee.tileID]:[ee.tileID.unwrapTo(-1),ee.tileID.unwrapTo(0)],ue=Math.pow(2,E.zoom-ee.tileID.overscaledZ),fe=h*ee.queryPadding*o.$/ee.tileSize/ue;for(let ve of ce){let Se=H.map(we=>ve.getTilePoint(new o.a1(we.x,we.y)));if(Se.expandBy(fe),Se.intersects(ut)){let we=B.map(Pe=>ve.getTilePoint(Pe)),Ie=V.map(Pe=>ve.getTilePoint(Pe));_.push({tile:ee,tileID:M?ve:ve.unwrapTo(0),queryGeometry:we,cameraQueryGeometry:Ie,scale:ue})}}}return _}transformBbox(a,h,g){let _=a.map(h);if(g){let E=o.a2.fromPoints(a);E.shrinkBy(.001*Math.min(E.width(),E.height()));let M=E.map(h);o.a2.fromPoints(_).covers(M)||(_=_.map(L=>L.x>.5?new o.a1(L.x-1,L.y,L.z):L))}return _}getVisibleCoordinates(a){let h=this.getRenderableIds(a).map(g=>this._tiles[g].tileID);return this.transform&&this.transform.populateCache(h),h}hasTransition(){if(this._source.hasTransition())return!0;if(_t(this._source.type)){let a=x.now();for(let h in this._tiles)if(this._tiles[h].fadeEndTime>=a)return!0}return!1}setFeatureState(a,h,g){this._state.updateState(a=a||"_geojsonTileLayer",h,g)}removeFeatureState(a,h,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",h,g)}getFeatureState(a,h){return this._state.getState(a=a||"_geojsonTileLayer",h)}setDependencies(a,h,g){let _=this._tiles[a];_&&_.setDependencies(h,g)}reloadTilesForDependencies(a,h){for(let g in this._tiles)this._tiles[g].hasDependency(a,h)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(a,h))}}function ft(w,a){let h=Math.abs(2*w.wrap)-+(w.wrap<0),g=Math.abs(2*a.wrap)-+(a.wrap<0);return w.overscaledZ-a.overscaledZ||g-h||a.canonical.y-w.canonical.y||a.canonical.x-w.canonical.x}function _t(w){return w==="raster"||w==="image"||w==="video"}It.maxOverzooming=10,It.maxUnderzooming=3;class Wt{constructor(a,h){this.reset(a,h)}reset(a,h){this.points=a||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ah(a,0,1);let h=1,g=this._distances[h],_=a*this.paddedLength+this.padding;for(;g<_&&h<this._distances.length;)g=this._distances[++h];let E=h-1,M=this._distances[E],L=g-M,k=L>0?(_-M)/L:0;return this.points[E].mult(1-k).add(this.points[h].mult(k))}}function Tr(w,a){let h=!0;return w==="always"||w!=="never"&&a!=="never"||(h=!1),h}class rn{constructor(a,h,g){let _=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(a/g),this.yCellCount=Math.ceil(h/g);for(let M=0;M<this.xCellCount*this.yCellCount;M++)_.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=h,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,h,g,_,E){this._forEachCell(h,g,_,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(E)}insertCircle(a,h,g,_){this._forEachCell(h-_,g-_,h+_,g+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(h),this.circles.push(g),this.circles.push(_)}_insertBoxCell(a,h,g,_,E,M){this.boxCells[E].push(M)}_insertCircleCell(a,h,g,_,E,M){this.circleCells[E].push(M)}_query(a,h,g,_,E,M,L){if(g<0||a>this.width||_<0||h>this.height)return[];let k=[];if(a<=0&&h<=0&&this.width<=g&&this.height<=_){if(E)return[{key:null,x1:a,y1:h,x2:g,y2:_}];for(let B=0;B<this.boxKeys.length;B++)k.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){let V=this.circles[3*B],W=this.circles[3*B+1],H=this.circles[3*B+2];k.push({key:this.circleKeys[B],x1:V-H,y1:W-H,x2:V+H,y2:W+H})}}else this._forEachCell(a,h,g,_,this._queryCell,k,{hitTest:E,overlapMode:M,seenUids:{box:{},circle:{}}},L);return k}query(a,h,g,_){return this._query(a,h,g,_,!1,null)}hitTest(a,h,g,_,E,M){return this._query(a,h,g,_,!0,E,M).length>0}hitTestCircle(a,h,g,_,E){let M=a-g,L=a+g,k=h-g,B=h+g;if(L<0||M>this.width||B<0||k>this.height)return!1;let V=[];return this._forEachCell(M,k,L,B,this._queryCellCircle,V,{hitTest:!0,overlapMode:_,circle:{x:a,y:h,radius:g},seenUids:{box:{},circle:{}}},E),V.length>0}_queryCell(a,h,g,_,E,M,L,k){let{seenUids:B,hitTest:V,overlapMode:W}=L,H=this.boxCells[E];if(H!==null){let ee=this.bboxes;for(let ce of H)if(!B.box[ce]){B.box[ce]=!0;let ue=4*ce,fe=this.boxKeys[ce];if(a<=ee[ue+2]&&h<=ee[ue+3]&&g>=ee[ue+0]&&_>=ee[ue+1]&&(!k||k(fe))&&(!V||!Tr(W,fe.overlapMode))&&(M.push({key:fe,x1:ee[ue],y1:ee[ue+1],x2:ee[ue+2],y2:ee[ue+3]}),V))return!0}}let K=this.circleCells[E];if(K!==null){let ee=this.circles;for(let ce of K)if(!B.circle[ce]){B.circle[ce]=!0;let ue=3*ce,fe=this.circleKeys[ce];if(this._circleAndRectCollide(ee[ue],ee[ue+1],ee[ue+2],a,h,g,_)&&(!k||k(fe))&&(!V||!Tr(W,fe.overlapMode))){let ve=ee[ue],Se=ee[ue+1],we=ee[ue+2];if(M.push({key:fe,x1:ve-we,y1:Se-we,x2:ve+we,y2:Se+we}),V)return!0}}}return!1}_queryCellCircle(a,h,g,_,E,M,L,k){let{circle:B,seenUids:V,overlapMode:W}=L,H=this.boxCells[E];if(H!==null){let ee=this.bboxes;for(let ce of H)if(!V.box[ce]){V.box[ce]=!0;let ue=4*ce,fe=this.boxKeys[ce];if(this._circleAndRectCollide(B.x,B.y,B.radius,ee[ue+0],ee[ue+1],ee[ue+2],ee[ue+3])&&(!k||k(fe))&&!Tr(W,fe.overlapMode))return M.push(!0),!0}}let K=this.circleCells[E];if(K!==null){let ee=this.circles;for(let ce of K)if(!V.circle[ce]){V.circle[ce]=!0;let ue=3*ce,fe=this.circleKeys[ce];if(this._circlesCollide(ee[ue],ee[ue+1],ee[ue+2],B.x,B.y,B.radius)&&(!k||k(fe))&&!Tr(W,fe.overlapMode))return M.push(!0),!0}}}_forEachCell(a,h,g,_,E,M,L,k){let B=this._convertToXCellCoord(a),V=this._convertToYCellCoord(h),W=this._convertToXCellCoord(g),H=this._convertToYCellCoord(_);for(let K=B;K<=W;K++)for(let ee=V;ee<=H;ee++)if(E.call(this,a,h,g,_,this.xCellCount*ee+K,M,L,k))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,h,g,_,E,M){let L=_-a,k=E-h,B=g+M;return B*B>L*L+k*k}_circleAndRectCollide(a,h,g,_,E,M,L){let k=(M-_)/2,B=Math.abs(a-(_+k));if(B>k+g)return!1;let V=(L-E)/2,W=Math.abs(h-(E+V));if(W>V+g)return!1;if(B<=k||W<=V)return!0;let H=B-k,K=W-V;return H*H+K*K<=g*g}}function Pr(w,a,h){let g=o.L();if(!w){let{vecSouth:W,vecEast:H}=ur(a),K=f();K[0]=H[0],K[1]=H[1],K[2]=W[0],K[3]=W[1],_=K,(V=(M=(E=K)[0])*(B=E[3])-(k=E[2])*(L=E[1]))&&(_[0]=B*(V=1/V),_[1]=-L*V,_[2]=-k*V,_[3]=M*V),g[0]=K[0],g[1]=K[1],g[4]=K[2],g[5]=K[3]}var _,E,M,L,k,B,V;return o.N(g,g,[1/h,1/h,1]),g}function ar(w,a,h,g){if(w){let _=o.L();if(!a){let{vecSouth:E,vecEast:M}=ur(h);_[0]=M[0],_[1]=M[1],_[4]=E[0],_[5]=E[1]}return o.N(_,_,[g,g,1]),_}return h.pixelsToClipSpaceMatrix}function ur(w){let a=Math.cos(w.rollInRadians),h=Math.sin(w.rollInRadians),g=Math.cos(w.pitchInRadians),_=Math.cos(w.bearingInRadians),E=Math.sin(w.bearingInRadians),M=o.ar();M[0]=-_*g*h-E*a,M[1]=-E*g*h+_*a;let L=o.as(M);L<1e-9?o.at(M):o.au(M,M,1/L);let k=o.ar();k[0]=_*g*a-E*h,k[1]=E*g*a+_*h;let B=o.as(k);return B<1e-9?o.at(k):o.au(k,k,1/B),{vecEast:k,vecSouth:M}}function An(w,a,h,g){let _;g?(_=[w,a,g(w,a),1],o.aw(_,_,h)):(_=[w,a,0,1],ap(_,_,h));let E=_[3];return{point:new o.P(_[0]/E,_[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}function gt(w,a){return .5+w/a*.5}function si(w,a){return w.x>=-a[0]&&w.x<=a[0]&&w.y>=-a[1]&&w.y<=a[1]}function Sn(w,a,h,g,_,E,M,L,k,B,V,W,H){let K=h?w.textSizeData:w.iconSizeData,ee=o.an(K,a.transform.zoom),ce=[256/a.width*2+1,256/a.height*2+1],ue=h?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ue.clear();let fe=w.lineVertexArray,ve=h?w.text.placedSymbolArray:w.icon.placedSymbolArray,Se=a.transform.width/a.transform.height,we=!1;for(let Ie=0;Ie<ve.length;Ie++){let Pe=ve.get(Ie);if(Pe.hidden||Pe.writingMode===o.ao.vertical&&!we){jl(Pe.numGlyphs,ue);continue}we=!1;let Ee=new o.P(Pe.anchorX,Pe.anchorY),Fe={getElevation:H,pitchedLabelPlaneMatrix:g,lineVertexArray:fe,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:Ee,unwrappedTileID:k,width:B,height:V,translation:W},Qe=Ss(Pe.anchorX,Pe.anchorY,Fe);if(!si(Qe.point,ce)){jl(Pe.numGlyphs,ue);continue}let Ve=gt(a.transform.cameraToCenterDistance,Qe.signedDistanceFromCamera),Ge=o.ap(K,ee,Pe),Xe=E?Ge*a.transform.getPitchedTextCorrection(Pe.anchorX,Pe.anchorY,k)/Ve:Ge*Ve,vt=wt({projectionContext:Fe,pitchedLabelPlaneMatrixInverse:_,symbol:Pe,fontSize:Xe,flip:!1,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ue,aspectRatio:Se,rotateToLine:L});we=vt.useVertical,(vt.notEnoughRoom||we||vt.needsFlipping&&wt({projectionContext:Fe,pitchedLabelPlaneMatrixInverse:_,symbol:Pe,fontSize:Xe,flip:!0,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ue,aspectRatio:Se,rotateToLine:L}).notEnoughRoom)&&jl(Pe.numGlyphs,ue)}h?w.text.dynamicLayoutVertexBuffer.updateData(ue):w.icon.dynamicLayoutVertexBuffer.updateData(ue)}function Ta(w,a,h,g,_,E,M,L){let k=E.glyphStartIndex+E.numGlyphs,B=E.lineStartIndex,V=E.lineStartIndex+E.lineLength,W=a.getoffsetX(E.glyphStartIndex),H=a.getoffsetX(k-1),K=Cc(w*W,h,g,_,E.segment,B,V,L,M);if(!K)return null;let ee=Cc(w*H,h,g,_,E.segment,B,V,L,M);return ee?L.projectionCache.anyProjectionOccluded?null:{first:K,last:ee}:null}function Es(w,a,h,g){return w===o.ao.horizontal&&Math.abs(h.y-a.y)>Math.abs(h.x-a.x)*g?{useVertical:!0}:(w===o.ao.vertical?a.y<h.y:a.x>h.x)?{needsFlipping:!0}:null}function wt(w){let{projectionContext:a,pitchedLabelPlaneMatrixInverse:h,symbol:g,fontSize:_,flip:E,keepUpright:M,glyphOffsetArray:L,dynamicLayoutVertexArray:k,aspectRatio:B,rotateToLine:V}=w,W=_/24,H=g.lineOffsetX*W,K=g.lineOffsetY*W,ee;if(g.numGlyphs>1){let ce=g.glyphStartIndex+g.numGlyphs,ue=g.lineStartIndex,fe=g.lineStartIndex+g.lineLength,ve=Ta(W,L,H,K,E,g,V,a);if(!ve)return{notEnoughRoom:!0};let Se=Vi(ve.first.point.x,ve.first.point.y,a,h),we=Vi(ve.last.point.x,ve.last.point.y,a,h);if(M&&!E){let Ie=Es(g.writingMode,Se,we,B);if(Ie)return Ie}ee=[ve.first];for(let Ie=g.glyphStartIndex+1;Ie<ce-1;Ie++){let Pe=Cc(W*L.getoffsetX(Ie),H,K,E,g.segment,ue,fe,a,V);if(!Pe)return{notEnoughRoom:!0};ee.push(Pe)}ee.push(ve.last)}else{if(M&&!E){let ue=yn(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,fe=g.lineStartIndex+g.segment+1,ve=new o.P(a.lineVertexArray.getx(fe),a.lineVertexArray.gety(fe)),Se=yn(ve.x,ve.y,a),we=Se.signedDistanceFromCamera>0?Se.point:Rr(a.tileAnchorPoint,ve,ue,1,a),Ie=Vi(ue.x,ue.y,a,h),Pe=Vi(we.x,we.y,a,h),Ee=Es(g.writingMode,Ie,Pe,B);if(Ee)return Ee}let ce=Cc(W*L.getoffsetX(g.glyphStartIndex),H,K,E,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,a,V);if(!ce||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[ce]}for(let ce of ee)o.av(k,ce.point,ce.angle);return{}}function Rr(w,a,h,g,_){let E=w.add(w.sub(a)._unit()),M=yn(E.x,E.y,_).point,L=h.sub(M);return h.add(L._mult(g/L.mag()))}function wr(w,a,h){let g=a.projectionCache;if(g.projections[w])return g.projections[w];let _=new o.P(a.lineVertexArray.getx(w),a.lineVertexArray.gety(w)),E=yn(_.x,_.y,a);if(E.signedDistanceFromCamera>0)return g.projections[w]=E.point,g.anyProjectionOccluded=g.anyProjectionOccluded||E.isOccluded,E.point;let M=w-h.direction;return Rr(h.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(M),a.lineVertexArray.gety(M)),_,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,a)}function yn(w,a,h){let g=w+h.translation[0],_=a+h.translation[1],E;return h.pitchWithMap?(E=An(g,_,h.pitchedLabelPlaneMatrix,h.getElevation),E.isOccluded=!1):(E=h.transform.projectTileCoordinates(g,_,h.unwrappedTileID,h.getElevation),E.point.x=(.5*E.point.x+.5)*h.width,E.point.y=(.5*-E.point.y+.5)*h.height),E}function Vi(w,a,h,g){if(h.pitchWithMap){let _=[w,a,0,1];return o.aw(_,_,g),h.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],h.unwrappedTileID,h.getElevation).point}return{x:w/h.width*2-1,y:1-a/h.height*2}}function Ss(w,a,h){return h.transform.projectTileCoordinates(w,a,h.unwrappedTileID,h.getElevation)}function Ir(w,a,h){return w._unit()._perp()._mult(a*h)}function qf(w,a,h,g,_,E,M,L,k){if(L.projectionCache.offsets[w])return L.projectionCache.offsets[w];let B=h.add(a);if(w+k.direction<g||w+k.direction>=_)return L.projectionCache.offsets[w]=B,B;let V=wr(w+k.direction,L,k),W=Ir(V.sub(h),M,k.direction),H=h.add(W),K=V.add(W);return L.projectionCache.offsets[w]=o.ax(E,B,H,K)||B,L.projectionCache.offsets[w]}function Cc(w,a,h,g,_,E,M,L,k){let B=g?w-a:w+a,V=B>0?1:-1,W=0;g&&(V*=-1,W=Math.PI),V<0&&(W+=Math.PI);let H,K=V>0?E+_:E+_+1;L.projectionCache.cachedAnchorPoint?H=L.projectionCache.cachedAnchorPoint:(H=yn(L.tileAnchorPoint.x,L.tileAnchorPoint.y,L).point,L.projectionCache.cachedAnchorPoint=H);let ee,ce,ue=H,fe=H,ve=0,Se=0,we=Math.abs(B),Ie=[],Pe;for(;ve+Se<=we;){if(K+=V,K<E||K>=M)return null;ve+=Se,fe=ue,ce=ee;let Qe={absOffsetX:we,direction:V,distanceFromAnchor:ve,previousVertex:fe};if(ue=wr(K,L,Qe),h===0)Ie.push(fe),Pe=ue.sub(fe);else{let Ve,Ge=ue.sub(fe);Ve=Ge.mag()===0?Ir(wr(K+V,L,Qe).sub(ue),h,V):Ir(Ge,h,V),ce||(ce=fe.add(Ve)),ee=qf(K,Ve,ue,E,M,ce,h,L,Qe),Ie.push(ce),Pe=ee.sub(ce)}Se=Pe.mag()}let Ee=Pe._mult((we-ve)/Se)._add(ce||fe),Fe=W+Math.atan2(ue.y-fe.y,ue.x-fe.x);return Ie.push(Ee),{point:Ee,angle:k?Fe:0,path:Ie}}let Mv=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function jl(w,a){for(let h=0;h<w;h++){let g=a.length;a.resize(g+4),a.float32.set(Mv,3*g)}}function ap(w,a,h){let g=a[0],_=a[1];return w[0]=h[0]*g+h[4]*_+h[12],w[1]=h[1]*g+h[5]*_+h[13],w[3]=h[3]*g+h[7]*_+h[15],w}let Ti=100;class Cv{constructor(a,h=new rn(a.width+200,a.height+200,25),g=new rn(a.width+200,a.height+200,25)){this.transform=a,this.grid=h,this.ignoredGrid=g,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Ti,this.screenBottomBoundary=a.height+Ti,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,h,g,_,E,M,L,k,B,V,W,H){let K=this.projectAndGetPerspectiveRatio(a.anchorPointX+k[0],a.anchorPointY+k[1],E,V,H),ee=g*K.perspectiveRatio,ce;if(M||L)ce=this._projectCollisionBox(a,ee,_,E,M,L,k,K,V,W,H);else{let Pe=K.x+(W?W.x*ee:0),Ee=K.y+(W?W.y*ee:0);ce={allPointsOccluded:!1,box:[Pe+a.x1*ee,Ee+a.y1*ee,Pe+a.x2*ee,Ee+a.y2*ee]}}let[ue,fe,ve,Se]=ce.box,we=M?ce.allPointsOccluded:K.isOccluded,Ie=we;return Ie||(Ie=K.perspectiveRatio<this.perspectiveRatioCutoff),Ie||(Ie=!this.isInsideGrid(ue,fe,ve,Se)),Ie||h!=="always"&&this.grid.hitTest(ue,fe,ve,Se,h,B)?{box:[ue,fe,ve,Se],placeable:!1,offscreen:!1,occluded:we}:{box:[ue,fe,ve,Se],placeable:!0,offscreen:this.isOffscreen(ue,fe,ve,Se),occluded:we}}placeCollisionCircles(a,h,g,_,E,M,L,k,B,V,W,H,K,ee){let ce=[],ue=new o.P(h.anchorX,h.anchorY),fe=this.getPerspectiveRatio(ue.x,ue.y,M,ee),ve=(B?E*this.transform.getPitchedTextCorrection(h.anchorX,h.anchorY,M)/fe:E*fe)/o.aB,Se={getElevation:ee,pitchedLabelPlaneMatrix:L,lineVertexArray:g,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ue,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:K},we=Ta(ve,_,h.lineOffsetX*ve,h.lineOffsetY*ve,!1,h,!1,Se),Ie=!1,Pe=!1,Ee=!0;if(we){let Fe=.5*W*fe+H,Qe=new o.P(-100,-100),Ve=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Ge=new Wt,Xe=we.first,vt=we.last,bt=[];for(let Dr=Xe.path.length-1;Dr>=1;Dr--)bt.push(Xe.path[Dr]);for(let Dr=1;Dr<vt.path.length;Dr++)bt.push(vt.path[Dr]);let st=2.5*Fe;if(B){let Dr=this.projectPathToScreenSpace(bt,Se);bt=Dr.some(hn=>hn.signedDistanceFromCamera<=0)?[]:Dr.map(hn=>hn.point)}let Zt=[];if(bt.length>0){let Dr=bt[0].clone(),hn=bt[0].clone();for(let Ln=1;Ln<bt.length;Ln++)Dr.x=Math.min(Dr.x,bt[Ln].x),Dr.y=Math.min(Dr.y,bt[Ln].y),hn.x=Math.max(hn.x,bt[Ln].x),hn.y=Math.max(hn.y,bt[Ln].y);Zt=Dr.x>=Qe.x&&hn.x<=Ve.x&&Dr.y>=Qe.y&&hn.y<=Ve.y?[bt]:hn.x<Qe.x||Dr.x>Ve.x||hn.y<Qe.y||Dr.y>Ve.y?[]:o.ay([bt],Qe.x,Qe.y,Ve.x,Ve.y)}for(let Dr of Zt){Ge.reset(Dr,.25*Fe);let hn=0;hn=Ge.length<=.5*Fe?1:Math.ceil(Ge.paddedLength/st)+1;for(let Ln=0;Ln<hn;Ln++){let Mn=Ln/Math.max(hn-1,1),li=Ge.lerp(Mn),yi=li.x+Ti,Or=li.y+Ti;ce.push(yi,Or,Fe,0);let Dn=yi-Fe,$i=Or-Fe,eo=yi+Fe,ho=Or+Fe;if(Ee=Ee&&this.isOffscreen(Dn,$i,eo,ho),Pe=Pe||this.isInsideGrid(Dn,$i,eo,ho),a!=="always"&&this.grid.hitTestCircle(yi,Or,Fe,a,V)&&(Ie=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Ie}}}}return{circles:!k&&Ie||!Pe||fe<this.perspectiveRatioCutoff?[]:ce,offscreen:Ee,collisionDetected:Ie}}projectPathToScreenSpace(a,h){let g=function(_,E){let M=o.L();return o.aq(M,E.pitchedLabelPlaneMatrix),_.map(L=>{let k=An(L.x,L.y,M,E.getElevation),B=E.transform.projectTileCoordinates(k.point.x,k.point.y,E.unwrappedTileID,E.getElevation);return B.point.x=(.5*B.point.x+.5)*E.width,B.point.y=(.5*-B.point.y+.5)*E.height,B})}(a,h);return function(_){let E=0,M=0,L=0,k=0;for(let B=0;B<_.length;B++)_[B].isOccluded?(L=B+1,k=0):(k++,k>M&&(M=k,E=L));return _.slice(E,E+M)}(g)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let h=[],g=new o.a2;for(let W of a){let H=new o.P(W.x+Ti,W.y+Ti);g.extend(H),h.push(H)}let{minX:_,minY:E,maxX:M,maxY:L}=g,k=this.grid.query(_,E,M,L).concat(this.ignoredGrid.query(_,E,M,L)),B={},V={};for(let W of k){let H=W.key;if(B[H.bucketInstanceId]===void 0&&(B[H.bucketInstanceId]={}),B[H.bucketInstanceId][H.featureIndex])continue;let K=[new o.P(W.x1,W.y1),new o.P(W.x2,W.y1),new o.P(W.x2,W.y2),new o.P(W.x1,W.y2)];o.az(h,K)&&(B[H.bucketInstanceId][H.featureIndex]=!0,V[H.bucketInstanceId]===void 0&&(V[H.bucketInstanceId]=[]),V[H.bucketInstanceId].push(H.featureIndex))}return V}insertCollisionBox(a,h,g,_,E,M){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:E,collisionGroupID:M,overlapMode:h},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,h,g,_,E,M){let L=g?this.ignoredGrid:this.grid,k={bucketInstanceId:_,featureIndex:E,collisionGroupID:M,overlapMode:h};for(let B=0;B<a.length;B+=4)L.insertCircle(k,a[B],a[B+1],a[B+2])}projectAndGetPerspectiveRatio(a,h,g,_,E){if(E){let M;_?(M=[a,h,_(a,h),1],o.aw(M,M,E)):(M=[a,h,0,1],ap(M,M,E));let L=M[3];return{x:(M[0]/L+1)/2*this.transform.width+Ti,y:(-M[1]/L+1)/2*this.transform.height+Ti,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L*.5,isOccluded:!1,signedDistanceFromCamera:L}}{let M=this.transform.projectTileCoordinates(a,h,g,_);return{x:(M.point.x+1)/2*this.transform.width+Ti,y:(1-M.point.y)/2*this.transform.height+Ti,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(a,h,g,_){let E=this.transform.projectTileCoordinates(a,h,g,_);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(a,h,g,_){return g<Ti||a>=this.screenRightBoundary||_<Ti||h>this.screenBottomBoundary}isInsideGrid(a,h,g,_){return g>=0&&a<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}getViewportMatrix(){let a=o.ag([]);return o.M(a,a,[-100,-100,0]),a}_projectCollisionBox(a,h,g,_,E,M,L,k,B,V,W){let H=1,K=0,ee=0,ce=1,ue=a.anchorPointX+L[0],fe=a.anchorPointY+L[1];if(M&&!E){let bt=this.projectAndGetPerspectiveRatio(ue+1,fe,_,B,W),st=bt.x-k.x,Zt=Math.atan((bt.y-k.y)/st)+(st<0?Math.PI:0),Dr=Math.sin(Zt),hn=Math.cos(Zt);H=hn,K=Dr,ee=-Dr,ce=hn}else if(!M&&E){let bt=ur(this.transform);H=bt.vecEast[0],K=bt.vecEast[1],ee=bt.vecSouth[0],ce=bt.vecSouth[1]}let ve=k.x,Se=k.y,we=h;E&&(ve=ue,Se=fe,we=Math.pow(2,-(this.transform.zoom-g.overscaledZ)),we*=this.transform.getPitchedTextCorrection(ue,fe,_),V||(we*=o.ah(.5+k.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(ve+=H*V.x*we+ee*V.y*we,Se+=K*V.x*we+ce*V.y*we);let Ie=a.x1*we,Pe=a.x2*we,Ee=(Ie+Pe)/2,Fe=a.y1*we,Qe=a.y2*we,Ve=(Fe+Qe)/2,Ge=[{offsetX:Ie,offsetY:Fe},{offsetX:Ee,offsetY:Fe},{offsetX:Pe,offsetY:Fe},{offsetX:Pe,offsetY:Ve},{offsetX:Pe,offsetY:Qe},{offsetX:Ee,offsetY:Qe},{offsetX:Ie,offsetY:Qe},{offsetX:Ie,offsetY:Ve}],Xe=[];for(let{offsetX:bt,offsetY:st}of Ge)Xe.push(new o.P(ve+H*bt+ee*st,Se+K*bt+ce*st));let vt=!1;if(E){let bt=Xe.map(st=>this.projectAndGetPerspectiveRatio(st.x,st.y,_,B,W));vt=bt.some(st=>!st.isOccluded),Xe=bt.map(st=>new o.P(st.x,st.y))}else vt=!0;return{box:o.aA(Xe),allPointsOccluded:!vt}}}class Ia{constructor(a,h,g,_){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?h:-h))):_&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class qn{constructor(a,h,g,_,E){this.text=new Ia(a?a.text:null,h,g,E),this.icon=new Ia(a?a.icon:null,h,_,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class oA{constructor(a,h,g){this.text=a,this.icon=h,this.skipFade=g}}class _m{constructor(a,h,g,_,E){this.bucketInstanceId=a,this.featureIndex=h,this.sourceLayerIndex=g,this.bucketIndex=_,this.tileID=E}}class sb{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){let h=++this.maxGroupID;this.collisionGroups[a]={ID:h,predicate:g=>g.collisionGroupID===h}}return this.collisionGroups[a]}}function Pc(w,a,h,g,_){let{horizontalAlign:E,verticalAlign:M}=o.aH(w);return new o.P(-(E-.5)*a+g[0]*_,-(M-.5)*h+g[1]*_)}class Rc{constructor(a,h,g,_,E){this.transform=a.clone(),this.terrain=h,this.collisionIndex=new Cv(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new sb(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){let h=this.terrain;return h?(g,_)=>h.getElevation(a,g,_):null}getBucketParts(a,h,g,_){let E=g.getBucket(h),M=g.latestFeatureIndex;if(!E||!M||h.id!==E.layerIds[0])return;let L=g.collisionBoxArray,k=E.layers[0].layout,B=E.layers[0].paint,V=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),W=g.tileSize/o.$,H=g.tileID.toUnwrapped(),K=k.get("text-rotation-alignment")==="map",ee=o.aC(g,1,this.transform.zoom),ce=o.aD(this.collisionIndex.transform,g,B.get("text-translate"),B.get("text-translate-anchor")),ue=o.aD(this.collisionIndex.transform,g,B.get("icon-translate"),B.get("icon-translate-anchor")),fe=Pr(K,this.transform,ee);this.retainedQueryData[E.bucketInstanceId]=new _m(E.bucketInstanceId,M,E.sourceLayerIndex,E.index,g.tileID);let ve={bucket:E,layout:k,translationText:ce,translationIcon:ue,unwrappedTileID:H,pitchedLabelPlaneMatrix:fe,scale:V,textPixelRatio:W,holdingForFade:g.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.an(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(_)for(let Se of E.sortKeyRanges){let{sortKey:we,symbolInstanceStart:Ie,symbolInstanceEnd:Pe}=Se;a.push({sortKey:we,symbolInstanceStart:Ie,symbolInstanceEnd:Pe,parameters:ve})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(a,h,g,_,E,M,L,k,B,V,W,H,K,ee,ce,ue,fe,ve,Se,we){let Ie=o.aE[a.textAnchor],Pe=[a.textOffset0,a.textOffset1],Ee=Pc(Ie,g,_,Pe,E),Fe=this.collisionIndex.placeCollisionBox(h,H,k,B,V,L,M,ue,W.predicate,Se,Ee,we);if((!ve||this.collisionIndex.placeCollisionBox(ve,H,k,B,V,L,M,fe,W.predicate,Se,Ee,we).placeable)&&Fe.placeable){let Qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(Qe=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Pe,width:g,height:_,anchor:Ie,textBoxScale:E,prevAnchor:Qe},this.markUsedJustification(ee,Ie,K,ce),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,ce,K),this.placedOrientations[K.crossTileID]=ce),{shift:Ee,placedGlyphBoxes:Fe}}}placeLayerBucketPart(a,h,g){let{bucket:_,layout:E,translationText:M,translationIcon:L,unwrappedTileID:k,pitchedLabelPlaneMatrix:B,textPixelRatio:V,holdingForFade:W,collisionBoxArray:H,partiallyEvaluatedTextSize:K,collisionGroup:ee}=a.parameters,ce=E.get("text-optional"),ue=E.get("icon-optional"),fe=o.aF(E,"text-overlap","text-allow-overlap"),ve=fe==="always",Se=o.aF(E,"icon-overlap","icon-allow-overlap"),we=Se==="always",Ie=E.get("text-rotation-alignment")==="map",Pe=E.get("text-pitch-alignment")==="map",Ee=E.get("icon-text-fit")!=="none",Fe=E.get("symbol-z-order")==="viewport-y",Qe=ve&&(we||!_.hasIconData()||ue),Ve=we&&(ve||!_.hasTextData()||ce);!_.collisionArrays&&H&&_.deserializeCollisionBoxes(H);let Ge=this.retainedQueryData[_.bucketInstanceId].tileID,Xe=this._getTerrainElevationFunc(Ge),vt=this.transform.getFastPathSimpleProjectionMatrix(Ge),bt=(st,Zt,Dr)=>{var hn,Ln;if(h[st.crossTileID])return;if(W)return void(this.placements[st.crossTileID]=new oA(!1,!1,!1));let Mn=!1,li=!1,yi=!0,Or=null,Dn={box:null,placeable:!1,offscreen:null,occluded:!1},$i={placeable:!1},eo=null,ho=null,sa=null,ml=0,kc=0,qc=0;Zt.textFeatureIndex?ml=Zt.textFeatureIndex:st.useRuntimeCollisionCircles&&(ml=st.featureIndex),Zt.verticalTextFeatureIndex&&(kc=Zt.verticalTextFeatureIndex);let Ap=Zt.textBox;if(Ap){let Ca=Hi=>{let to=o.ao.horizontal;if(_.allowVerticalPlacement&&!Hi&&this.prevPlacement){let Ms=this.prevPlacement.placedOrientations[st.crossTileID];Ms&&(this.placedOrientations[st.crossTileID]=Ms,to=Ms,this.markUsedOrientation(_,to,st))}return to},gl=(Hi,to)=>{if(_.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&Zt.verticalTextBox){for(let Ms of _.writingModes)if(Ms===o.ao.vertical?(Dn=to(),$i=Dn):Dn=Hi(),Dn&&Dn.placeable)break}else Dn=Hi()},la=st.textAnchorOffsetStartIndex,Fc=st.textAnchorOffsetEndIndex;if(Fc===la){let Hi=(to,Ms)=>{let Wi=this.collisionIndex.placeCollisionBox(to,fe,V,Ge,k,Pe,Ie,M,ee.predicate,Xe,void 0,vt);return Wi&&Wi.placeable&&(this.markUsedOrientation(_,Ms,st),this.placedOrientations[st.crossTileID]=Ms),Wi};gl(()=>Hi(Ap,o.ao.horizontal),()=>{let to=Zt.verticalTextBox;return _.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&to?Hi(to,o.ao.vertical):{box:null,offscreen:null}}),Ca(Dn&&Dn.placeable)}else{let Hi=o.aE[(Ln=(hn=this.prevPlacement)===null||hn===void 0?void 0:hn.variableOffsets[st.crossTileID])===null||Ln===void 0?void 0:Ln.anchor],to=(Wi,Hm,Cp)=>{let Uu=Wi.x2-Wi.x1,vl=Wi.y2-Wi.y1,jc=st.textBoxScale,XA=Ee&&Se==="never"?Hm:null,ts=null,QA=fe==="never"?1:2,ew="never";Hi&&QA++;for(let fy=0;fy<QA;fy++){for(let hy=la;hy<Fc;hy++){let zc=_.textAnchorOffsets.get(hy);if(Hi&&zc.textAnchor!==Hi)continue;let Bu=this.attemptAnchorPlacement(zc,Wi,Uu,vl,jc,Ie,Pe,V,Ge,k,ee,ew,st,_,Cp,M,L,XA,Xe);if(Bu&&(ts=Bu.placedGlyphBoxes,ts&&ts.placeable))return Mn=!0,Or=Bu.shift,ts}Hi?Hi=null:ew=fe}return g&&!ts&&(ts={box:this.collisionIndex.placeCollisionBox(Ap,"always",V,Ge,k,Pe,Ie,M,ee.predicate,Xe,void 0,vt).box,offscreen:!1,placeable:!1,occluded:!1}),ts};gl(()=>to(Ap,Zt.iconBox,o.ao.horizontal),()=>{let Wi=Zt.verticalTextBox;return _.allowVerticalPlacement&&(!Dn||!Dn.placeable)&&st.numVerticalGlyphVertices>0&&Wi?to(Wi,Zt.verticalIconBox,o.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Dn&&(Mn=Dn.placeable,yi=Dn.offscreen);let Ms=Ca(Dn&&Dn.placeable);if(!Mn&&this.prevPlacement){let Wi=this.prevPlacement.variableOffsets[st.crossTileID];Wi&&(this.variableOffsets[st.crossTileID]=Wi,this.markUsedJustification(_,Wi.anchor,st,Ms))}}}if(eo=Dn,Mn=eo&&eo.placeable,yi=eo&&eo.offscreen,st.useRuntimeCollisionCircles){let Ca=_.text.placedSymbolArray.get(st.centerJustifiedTextSymbolIndex),gl=o.ap(_.textSizeData,K,Ca),la=E.get("text-padding");ho=this.collisionIndex.placeCollisionCircles(fe,Ca,_.lineVertexArray,_.glyphOffsetArray,gl,k,B,g,Pe,ee.predicate,st.collisionCircleDiameter,la,M,Xe),ho.circles.length&&ho.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),Mn=ve||ho.circles.length>0&&!ho.collisionDetected,yi=yi&&ho.offscreen}if(Zt.iconFeatureIndex&&(qc=Zt.iconFeatureIndex),Zt.iconBox){let Ca=gl=>this.collisionIndex.placeCollisionBox(gl,Se,V,Ge,k,Pe,Ie,L,ee.predicate,Xe,Ee&&Or?Or:void 0,vt);$i&&$i.placeable&&Zt.verticalIconBox?(sa=Ca(Zt.verticalIconBox),li=sa.placeable):(sa=Ca(Zt.iconBox),li=sa.placeable),yi=yi&&sa.offscreen}let Mp=ce||st.numHorizontalGlyphVertices===0&&st.numVerticalGlyphVertices===0,th=ue||st.numIconVertices===0;Mp||th?th?Mp||(li=li&&Mn):Mn=li&&Mn:li=Mn=li&&Mn;let rh=li&&sa.placeable;if(Mn&&eo.placeable&&this.collisionIndex.insertCollisionBox(eo.box,fe,E.get("text-ignore-placement"),_.bucketInstanceId,$i&&$i.placeable&&kc?kc:ml,ee.ID),rh&&this.collisionIndex.insertCollisionBox(sa.box,Se,E.get("icon-ignore-placement"),_.bucketInstanceId,qc,ee.ID),ho&&Mn&&this.collisionIndex.insertCollisionCircles(ho.circles,fe,E.get("text-ignore-placement"),_.bucketInstanceId,ml,ee.ID),g&&this.storeCollisionData(_.bucketInstanceId,Dr,Zt,eo,sa,ho),st.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[st.crossTileID]=new oA((Mn||Qe)&&!(eo!=null&&eo.occluded),(li||Ve)&&!(sa!=null&&sa.occluded),yi||_.justReloaded),h[st.crossTileID]=!0};if(Fe){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let st=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Zt=st.length-1;Zt>=0;--Zt){let Dr=st[Zt];bt(_.symbolInstances.get(Dr),_.collisionArrays[Dr],Dr)}}else for(let st=a.symbolInstanceStart;st<a.symbolInstanceEnd;st++)bt(_.symbolInstances.get(st),_.collisionArrays[st],st);_.justReloaded=!1}storeCollisionData(a,h,g,_,E,M){if(g.textBox||g.iconBox){let L,k;this.collisionBoxArrays.has(a)?L=this.collisionBoxArrays.get(a):(L=new Map,this.collisionBoxArrays.set(a,L)),L.has(h)?k=L.get(h):(k={text:null,icon:null},L.set(h,k)),g.textBox&&(k.text=_.box),g.iconBox&&(k.icon=E.box)}if(M){let L=this.collisionCircleArrays[a];L===void 0&&(L=this.collisionCircleArrays[a]=[]);for(let k=0;k<M.circles.length;k+=4)L.push(M.circles[k+0]-Ti),L.push(M.circles[k+1]-Ti),L.push(M.circles[k+2]),L.push(M.collisionDetected?1:0)}}markUsedJustification(a,h,g,_){let E;E=_===o.ao.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.aG(h)];let M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(let L of M)L>=0&&(a.text.placedSymbolArray.get(L).crossTileID=E>=0&&L!==E?0:g.crossTileID)}markUsedOrientation(a,h,g){let _=h===o.ao.horizontal||h===o.ao.horizontalOnly?h:0,E=h===o.ao.vertical?h:0,M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(let L of M)a.text.placedSymbolArray.get(L).placedOrientation=_;g.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;let h=this.prevPlacement,g=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;let _=h?h.symbolFadeChange(a):1,E=h?h.opacities:{},M=h?h.variableOffsets:{},L=h?h.placedOrientations:{};for(let k in this.placements){let B=this.placements[k],V=E[k];V?(this.opacities[k]=new qn(V,_,B.text,B.icon),g=g||B.text!==V.text.placed||B.icon!==V.icon.placed):(this.opacities[k]=new qn(null,_,B.text,B.icon,B.skipFade),g=g||B.text||B.icon)}for(let k in E){let B=E[k];if(!this.opacities[k]){let V=new qn(B,_,!1,!1);V.isHidden()||(this.opacities[k]=V,g=g||B.text.placed||B.icon.placed)}}for(let k in M)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=M[k]);for(let k in L)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=L[k]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:a)}updateLayerOpacities(a,h){let g={};for(let _ of h){let E=_.getBucket(a);E&&_.latestFeatureIndex&&a.id===E.layerIds[0]&&this.updateBucketOpacities(E,_.tileID,g,_.collisionBoxArray)}}updateBucketOpacities(a,h,g,_){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();let E=a.layers[0],M=E.layout,L=new qn(null,0,!1,!1,!0),k=M.get("text-allow-overlap"),B=M.get("icon-allow-overlap"),V=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=M.get("text-rotation-alignment")==="map",H=M.get("text-pitch-alignment")==="map",K=M.get("icon-text-fit")!=="none",ee=new qn(null,0,k&&(B||!a.hasIconData()||M.get("icon-optional")),B&&(k||!a.hasTextData()||M.get("text-optional")),!0);!a.collisionArrays&&_&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(_);let ce=(fe,ve,Se)=>{for(let we=0;we<ve/4;we++)fe.opacityVertexArray.emplaceBack(Se);fe.hasVisibleVertices=fe.hasVisibleVertices||Se!==lp},ue=this.collisionBoxArrays.get(a.bucketInstanceId);for(let fe=0;fe<a.symbolInstances.length;fe++){let ve=a.symbolInstances.get(fe),{numHorizontalGlyphVertices:Se,numVerticalGlyphVertices:we,crossTileID:Ie}=ve,Pe=this.opacities[Ie];g[Ie]?Pe=L:Pe||(Pe=ee,this.opacities[Ie]=Pe),g[Ie]=!0;let Ee=ve.numIconVertices>0,Fe=this.placedOrientations[ve.crossTileID],Qe=Fe===o.ao.vertical,Ve=Fe===o.ao.horizontal||Fe===o.ao.horizontalOnly;if(Se>0||we>0){let Xe=ub(Pe.text);ce(a.text,Se,Qe?lp:Xe),ce(a.text,we,Ve?lp:Xe);let vt=Pe.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(Zt=>{Zt>=0&&(a.text.placedSymbolArray.get(Zt).hidden=vt||Qe?1:0)}),ve.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=vt||Ve?1:0);let bt=this.variableOffsets[ve.crossTileID];bt&&this.markUsedJustification(a,bt.anchor,ve,Fe);let st=this.placedOrientations[ve.crossTileID];st&&(this.markUsedJustification(a,"left",ve,st),this.markUsedOrientation(a,st,ve))}if(Ee){let Xe=ub(Pe.icon),vt=!(K&&ve.verticalPlacedIconSymbolIndex&&Qe);ve.placedIconSymbolIndex>=0&&(ce(a.icon,ve.numIconVertices,vt?Xe:lp),a.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(ce(a.icon,ve.numVerticalIconVertices,vt?lp:Xe),a.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}let Ge=ue&&ue.has(fe)?ue.get(fe):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){let Xe=a.collisionArrays[fe];if(Xe){let vt=new o.P(0,0);if(Xe.textBox||Xe.verticalTextBox){let bt=!0;if(V){let st=this.variableOffsets[Ie];st?(vt=Pc(st.anchor,st.width,st.height,st.textOffset,st.textBoxScale),W&&vt._rotate(H?-this.transform.bearingInRadians:this.transform.bearingInRadians)):bt=!1}if(Xe.textBox||Xe.verticalTextBox){let st;Xe.textBox&&(st=Qe),Xe.verticalTextBox&&(st=Ve),lb(a.textCollisionBox.collisionVertexArray,Pe.text.placed,!bt||st,Ge.text,vt.x,vt.y)}}if(Xe.iconBox||Xe.verticalIconBox){let bt=!!(!Ve&&Xe.verticalIconBox),st;Xe.iconBox&&(st=bt),Xe.verticalIconBox&&(st=!bt),lb(a.iconCollisionBox.collisionVertexArray,Pe.icon.placed,st,Ge.icon,K?vt.x:0,K?vt.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,h){let g=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*g>a}setStale(){this.stale=!0}}function lb(w,a,h,g,_,E){g&&g.length!==0||(g=[0,0,0,0]);let M=g[0]-Ti,L=g[1]-Ti,k=g[2]-Ti,B=g[3]-Ti;w.emplaceBack(a?1:0,h?1:0,_||0,E||0,M,L),w.emplaceBack(a?1:0,h?1:0,_||0,E||0,k,L),w.emplaceBack(a?1:0,h?1:0,_||0,E||0,k,B),w.emplaceBack(a?1:0,h?1:0,_||0,E||0,M,B)}let aA=Math.pow(2,25),sA=Math.pow(2,24),sp=Math.pow(2,17),lA=Math.pow(2,16),Pq=Math.pow(2,9),Rq=Math.pow(2,8),Oq=Math.pow(2,1);function ub(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;let a=w.placed?1:0,h=Math.floor(127*w.opacity);return h*aA+a*sA+h*sp+a*lA+h*Pq+a*Rq+h*Oq+a}let lp=0;class cb{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,h,g,_,E){let M=this._bucketParts;for(;this._currentTileIndex<a.length;)if(h.getBucketParts(M,_,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((L,k)=>L.sortKey-k.sortKey));this._currentPartIndex<M.length;)if(h.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,E())return!0;return!1}}class fb{constructor(a,h,g,_,E,M,L,k){this.placement=new Rc(a,h,M,L,k),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(a,h,g){let _=x.now(),E=()=>!this._forceFullPlacement&&x.now()-_>2;for(;this._currentPlacementIndex>=0;){let M=h[a[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=L)&&(!M.maxzoom||M.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new cb(M)),this._inProgressLayer.continuePlacement(g[M.source],this.placement,this._showCollisionBoxes,M,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}let up=512/o.$/2;class hb{constructor(a,h,g){this.tileID=a,this.bucketInstanceId=g,this._symbolsByKey={};let _=new Map;for(let E=0;E<h.length;E++){let M=h.get(E),L=M.key,k=_.get(L);k?k.push(M):_.set(L,[M])}for(let[E,M]of _){let L={positions:M.map(k=>({x:Math.floor(k.anchorX*up),y:Math.floor(k.anchorY*up)})),crossTileIDs:M.map(k=>k.crossTileID)};if(L.positions.length>128){let k=new o.aI(L.positions.length,16,Uint16Array);for(let{x:B,y:V}of L.positions)k.add(B,V);k.finish(),delete L.positions,L.index=k}this._symbolsByKey[E]=L}}getScaledCoordinates(a,h){let{x:g,y:_,z:E}=this.tileID.canonical,{x:M,y:L,z:k}=h.canonical,B=up/Math.pow(2,k-E),V=(L*o.$+a.anchorY)*B,W=_*o.$*up;return{x:Math.floor((M*o.$+a.anchorX)*B-g*o.$*up),y:Math.floor(V-W)}}findMatches(a,h,g){let _=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let E=0;E<a.length;E++){let M=a.get(E);if(M.crossTileID)continue;let L=this._symbolsByKey[M.key];if(!L)continue;let k=this.getScaledCoordinates(M,h);if(L.index){let B=L.index.range(k.x-_,k.y-_,k.x+_,k.y+_).sort();for(let V of B){let W=L.crossTileIDs[V];if(!g[W]){g[W]=!0,M.crossTileID=W;break}}}else if(L.positions)for(let B=0;B<L.positions.length;B++){let V=L.positions[B],W=L.crossTileIDs[B];if(Math.abs(V.x-k.x)<=_&&Math.abs(V.y-k.y)<=_&&!g[W]){g[W]=!0,M.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class pb{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Lq{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){let h=Math.round((a-this.lng)/360);if(h!==0)for(let g in this.indexes){let _=this.indexes[g],E={};for(let M in _){let L=_[M];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+h),E[L.tileID.key]=L}this.indexes[g]=E}this.lng=a}addBucket(a,h,g){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let E=0;E<h.symbolInstances.length;E++)h.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});let _=this.usedCrossTileIDs[a.overscaledZ];for(let E in this.indexes){let M=this.indexes[E];if(Number(E)>a.overscaledZ)for(let L in M){let k=M[L];k.tileID.isChildOf(a)&&k.findMatches(h.symbolInstances,a,_)}else{let L=M[a.scaledTo(Number(E)).key];L&&L.findMatches(h.symbolInstances,a,_)}}for(let E=0;E<h.symbolInstances.length;E++){let M=h.symbolInstances.get(E);M.crossTileID||(M.crossTileID=g.generate(),_[M.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new hb(a,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(a,h){for(let g of h.getCrossTileIDsLists())for(let _ of g)delete this.usedCrossTileIDs[a][_]}removeStaleBuckets(a){let h=!1;for(let g in this.indexes){let _=this.indexes[g];for(let E in _)a[_[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,_[E]),delete _[E],h=!0)}return h}}class cp{constructor(){this.layerIndexes={},this.crossTileIDs=new pb,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,h,g){let _=this.layerIndexes[a.id];_===void 0&&(_=this.layerIndexes[a.id]=new Lq);let E=!1,M={};_.handleWrapJump(g);for(let L of h){let k=L.getBucket(a);k&&a.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(L.tileID,k,this.crossTileIDs)&&(E=!0),M[k.bucketInstanceId]=!0)}return _.removeStaleBuckets(M)&&(E=!0),E}pruneUnusedLayers(a){let h={};a.forEach(g=>{h[g]=!0});for(let g in this.layerIndexes)h[g]||delete this.layerIndexes[g]}}var xm="void main() {fragColor=vec4(1.0);}";let sl={prelude:Gr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Gr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Gr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Gr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Gr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Gr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Gr(xm,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Gr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Gr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Gr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Gr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Gr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Gr(xm,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Gr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Gr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Gr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Gr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Gr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Gr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Gr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Gr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Gr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Gr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Gr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Gr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Gr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Gr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Gr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Gr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Gr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Gr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Gr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Gr(w,a){let h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=a.match(/in ([\w]+) ([\w]+)/g),_=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=E?E.concat(_):_,L={};return{fragmentSource:w=w.replace(h,(k,B,V,W,H)=>(L[H]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${V} ${W} ${H};
#else
uniform ${V} ${W} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${V} ${W} ${H} = u_${H};
#endif
`)),vertexSource:a=a.replace(h,(k,B,V,W,H)=>{let K=W==="float"?"vec2":"vec4",ee=H.match(/color/)?"color":K;return L[H]?B==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${V} ${K} a_${H};
out ${V} ${W} ${H};
#else
uniform ${V} ${W} u_${H};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${V} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${ee}(a_${H}, u_${H}_t);
#else
    ${V} ${W} ${H} = u_${H};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${V} ${K} a_${H};
#else
uniform ${V} ${W} u_${H};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${V} ${W} ${H} = a_${H};
#else
    ${V} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${V} ${W} ${H} = unpack_mix_${ee}(a_${H}, u_${H}_t);
#else
    ${V} ${W} ${H} = u_${H};
#endif
`}),staticAttributes:g,staticUniforms:M}}class Ff{constructor(a,h,g){this.vertexBuffer=a,this.indexBuffer=h,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Oc=o.aJ([{name:"a_pos",type:"Int16",components:2}]);let qu="#define PROJECTION_MERCATOR",jf="mercator";class $r{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return jf}get shaderDefine(){return qu}get shaderPreludeCode(){return sl.projectionMercator}get vertexShaderPreludeCode(){return sl.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,h,g,_,E){if(this._cachedMesh)return this._cachedMesh;let M=new o.aL;M.emplaceBack(0,0),M.emplaceBack(o.$,0),M.emplaceBack(0,o.$),M.emplaceBack(o.$,o.$);let L=a.createVertexBuffer(M,Oc.members),k=o.aM.simpleSegment(0,0,4,2),B=new o.aN;B.emplaceBack(1,0,2),B.emplaceBack(1,2,3);let V=a.createIndexBuffer(B);return this._cachedMesh=new Ff(L,V,k),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class zf{constructor(a=0,h=0,g=0,_=0){if(isNaN(a)||a<0||isNaN(h)||h<0||isNaN(g)||g<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=h,this.left=g,this.right=_}interpolate(a,h,g){return h.top!=null&&a.top!=null&&(this.top=o.C.number(a.top,h.top,g)),h.bottom!=null&&a.bottom!=null&&(this.bottom=o.C.number(a.bottom,h.bottom,g)),h.left!=null&&a.left!=null&&(this.left=o.C.number(a.left,h.left,g)),h.right!=null&&a.right!=null&&(this.right=o.C.number(a.right,h.right,g)),this}getCenter(a,h){let g=o.ah((this.left+a-this.right)/2,0,a),_=o.ah((this.top+h-this.bottom)/2,0,h);return new o.P(g,_)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new zf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Pv(w,a){if(!w.renderWorldCopies||w.lngRange)return;let h=a.lng-w.center.lng;a.lng+=h>180?-360:h<-180?360:0}function Rv(w){return Math.max(0,Math.floor(w))}class na{constructor(a,h,g,_,E,M){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=M===void 0||!!M,this._minZoom=h||0,this._maxZoom=g||22,this._minPitch=_==null?0:_,this._maxPitch=E==null?60:E,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Rv(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new zf,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,h,g){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=Rv(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new zf(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!g&&a.autoCalculateNearFarZ,h&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){let h=o.aO(a,-180,180)*Math.PI/180;var g,_,E,M,L,k,B,V,W;this._bearingInRadians!==h&&(this._unmodified=!1,this._bearingInRadians=h,this._calcMatrices(),this._rotationMatrix=f(),g=this._rotationMatrix,E=-this._bearingInRadians,M=(_=this._rotationMatrix)[0],L=_[1],k=_[2],B=_[3],V=Math.sin(E),W=Math.cos(E),g[0]=M*W+k*V,g[1]=L*W+B*V,g[2]=M*-V+k*W,g[3]=L*-V+B*W)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){let h=o.ah(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==h&&(this._unmodified=!1,this._pitchInRadians=h,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){let h=a/180*Math.PI;this._rollInRadians!==h&&(this._unmodified=!1,this._rollInRadians=h,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aP(this._fovInRadians)}setFov(a){a=o.ah(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ae(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){let h=this.getConstrained(this._center,a).zoom;this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this._tileZoom=Math.max(0,Math.floor(h)),this._scale=o.af(h),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,h){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=h,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,h,g){this._unmodified=!1,this._edgeInsets.interpolate(a,h,g),this._constrain(),this._calcMatrices()}resize(a,h,g=!0){this._width=a,this._height=h,g&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Lt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ai,o.ai])}getConstrained(a,h){return this._callbacks.getConstrained(a,h)}getCameraQueryGeometry(a,h){if(h.length===1)return[h[0],a];{let{minX:g,minY:_,maxX:E,maxY:M}=o.a2.fromPoints(h).extend(a);return[new o.P(g,_),new o.P(E,_),new o.P(E,M),new o.P(g,M),new o.P(g,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let a=this._unmodified,{center:h,zoom:g}=this.getConstrained(this.center,this.zoom);this.setCenter(h),this.setZoom(g),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ag(new Float64Array(16));o.N(a,a,[this._width/2,-this._height/2,1]),o.M(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ag(new Float64Array(16)),o.N(a,a,[1,-1,1]),o.M(a,a,[-1,-1,0]),o.N(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,h,g,_){let E=g!==void 0?g:this.bearing,M=_=_!==void 0?_:this.pitch,L=o.a1.fromLngLat(a,h),k=-Math.cos(o.ae(M)),B=Math.sin(o.ae(M)),V=B*Math.sin(o.ae(E)),W=-B*Math.cos(o.ae(E)),H=this.elevation,K=h-H,ee;k*K>=0||Math.abs(k)<.1?(ee=1e4,H=h+ee*k):ee=-K/k;let ce,ue,fe=o.aQ(1,L.y),ve=0;do{if(ve+=1,ve>10)break;ue=ee/fe,ce=new o.a1(L.x+V*ue,L.y+W*ue),fe=1/ce.meterInMercatorCoordinateUnits()}while(Math.abs(ee-ue*fe)>1e-12);return{center:ce.toLngLat(),elevation:H,zoom:o.ak(this.height/2/Math.tan(this.fovInRadians/2)/ue/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;let h=o.aj(1,this.center.lat)*this.worldSize,g=this.cameraToCenterDistance/h,_=o.a1.fromLngLat(this.center,this.elevation),E=Be(this.center,this.elevation,this.pitch,this.bearing,g);this._elevation=a;let M=this.calculateCenterFromCameraLngLatAlt(E.toLngLat(),o.aQ(E.z,_.y),this.bearing,this.pitch);this._elevation=M.elevation,this._center=M.center,this.setZoom(M.zoom)}getCameraPoint(){let a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let a=o.aj(1,this.center.lat)*this.worldSize;return Be(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];let h=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/h,a.canonical.y/h,1/h/o.$,1/h/o.$]}}class co{constructor(a,h){this.min=a,this.max=h,this.center=o.aR([],o.aS([],this.min,this.max),.5)}quadrant(a){let h=[a%2==0,a<2],g=o.aT(this.min),_=o.aT(this.max);for(let E=0;E<h.length;E++)g[E]=h[E]?this.min[E]:this.center[E],_[E]=h[E]?this.center[E]:this.max[E];return _[2]=this.max[2],new co(g,_)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let h=!0;for(let g=0;g<a.planes.length;g++){let _=this.intersectsPlane(a.planes[g]);if(_===0)return 0;_===1&&(h=!1)}return h?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let h=a[3],g=a[3];for(let _=0;_<3;_++)a[_]>0?(h+=a[_]*this.min[_],g+=a[_]*this.max[_]):(g+=a[_]*this.min[_],h+=a[_]*this.max[_]);return h>=0?2:g<0?0:1}}class ia{distanceToTile2d(a,h,g,_){let E=_.distanceX([a,h]),M=_.distanceY([a,h]);return Math.hypot(E,M)}getWrap(a,h,g){return g}getTileBoundingVolume(a,h,g,_){var E,M;let L=0,k=0;if(_!=null&&_.terrain){let V=new o.Z(a.z,h,a.z,a.x,a.y),W=_.terrain.getMinMaxElevation(V);L=(E=W.minElevation)!==null&&E!==void 0?E:Math.min(0,g),k=(M=W.maxElevation)!==null&&M!==void 0?M:Math.max(0,g)}let B=1<<a.z;return new co([h+a.x/B,a.y/B,L],[h+(a.x+1)/B,(a.y+1)/B,k])}allowVariableZoom(a,h){let g=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,_=o.ah(78.5-g/2,0,60);return!!h.terrain||a.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Gi{constructor(a,h,g){this.points=a,this.planes=h,this.aabb=g}static fromInvProjectionMatrix(a,h=1,g=0,_,E){let M=E?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],L=Math.pow(2,g),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>function(K,ee,ce,ue){let fe=o.aw([],K,ee),ve=1/fe[3]/ce*ue;return o.aY(fe,fe,[ve,ve,1/fe[3],ve])}(H,a,h,L));_&&function(H,K,ee,ce){let ue=ce?4:0,fe=ce?0:4,ve=0,Se=[],we=[];for(let Ee=0;Ee<4;Ee++){let Fe=o.aU([],H[Ee+fe],H[Ee+ue]),Qe=o.aZ(Fe);o.aR(Fe,Fe,1/Qe),Se.push(Qe),we.push(Fe)}for(let Ee=0;Ee<4;Ee++){let Fe=o.a_(H[Ee+ue],we[Ee],ee);ve=Fe!==null&&Fe>=0?Math.max(ve,Fe):Math.max(ve,Se[Ee])}let Ie=function(Ee,Fe){let Qe=o.aU([],Ee[Fe[0]],Ee[Fe[1]]),Ve=o.aU([],Ee[Fe[2]],Ee[Fe[1]]),Ge=[0,0,0,0];return o.aV(Ge,o.aW([],Qe,Ve)),Ge[3]=-o.aX(Ge,Ee[Fe[0]]),Ge}(H,K),Pe=function(Ee,Fe){let Qe=o.a$(Ee),Ve=o.b0([],Ee,1/Qe),Ge=o.aU([],Fe,o.aR([],Ve,o.aX(Fe,Ve))),Xe=o.a$(Ge);if(Xe>0){let vt=Math.sqrt(1-Ve[3]*Ve[3]),bt=o.aR([],Ve,-Ve[3]),st=o.aS([],bt,o.aR([],Ge,vt/Xe));return o.b1(Fe,st)}return null}(ee,Ie);if(Pe!==null){let Ee=Pe/o.aX(we[0],Ie);ve=Math.min(ve,Ee)}for(let Ee=0;Ee<4;Ee++){let Fe=Math.min(ve,Se[Ee]);H[Ee+fe]=[H[Ee+ue][0]+we[Ee][0]*Fe,H[Ee+ue][1]+we[Ee][1]*Fe,H[Ee+ue][2]+we[Ee][2]*Fe,1]}}(k,M[0],_,E);let B=M.map(H=>{let K=o.aU([],k[H[0]],k[H[1]]),ee=o.aU([],k[H[2]],k[H[1]]),ce=o.aV([],o.aW([],K,ee)),ue=-o.aX(ce,k[H[1]]);return ce.concat(ue)}),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],W=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let H of k)for(let K=0;K<3;K++)V[K]=Math.min(V[K],H[K]),W[K]=Math.max(W[K],H[K]);return new Gi(k,B,new co(V,W))}}class Fn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,h,g){return this._helper.interpolatePadding(a,h,g)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,h,g=!0){this._helper.resize(a,h,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,h){this._helper.overrideNearFarZ(a,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,h){}constructor(a,h,g,_,E){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new na({calcMatrices:()=>{this._calcMatrices()},getConstrained:(M,L)=>this.getConstrained(M,L)},a,h,g,_,E),this._coveringTilesDetailsProvider=new ia}clone(){let a=new Fn;return a.apply(this),a}apply(a,h,g){this._helper.apply(a,h,g)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){let h=[new o.b2(0,a)];if(this._helper._renderWorldCopies){let g=this.screenPointToMercatorCoordinate(new o.P(0,0)),_=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),E=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),L=Math.floor(Math.min(g.x,_.x,E.x,M.x)),k=Math.floor(Math.max(g.x,_.x,E.x,M.x)),B=1;for(let V=L-B;V<=k+B;V++)V!==0&&h.push(new o.b2(V,a))}return h}getCameraFrustum(){return Gi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){let h=this.screenPointToLocation(this.centerPoint,a),g=a?a.getElevationForLngLatZoom(h,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(g)}setLocationAtPoint(a,h){let g=o.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(h,g),E=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,g),M=o.a1.fromLngLat(a),L=new o.a1(M.x-(_.x-E.x),M.y-(_.y-E.y));this.setCenter(L==null?void 0:L.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,h){return h?this.coordinatePoint(o.a1.fromLngLat(a),h.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a1.fromLngLat(a))}screenPointToLocation(a,h){var g;return(g=this.screenPointToMercatorCoordinate(a,h))===null||g===void 0?void 0:g.toLngLat()}screenPointToMercatorCoordinate(a,h){if(h){let g=h.pointCoordinate(a);if(g!=null)return g}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,h){let g=h||0,_=[a.x,a.y,0,1],E=[a.x,a.y,1,1];o.aw(_,_,this._pixelMatrixInverse),o.aw(E,E,this._pixelMatrixInverse);let M=_[3],L=E[3],k=_[1]/M,B=E[1]/L,V=_[2]/M,W=E[2]/L,H=V===W?0:(g-V)/(W-V);return new o.a1(o.C.number(_[0]/M,E[0]/L,H)/this.worldSize,o.C.number(k,B,H)/this.worldSize,g)}coordinatePoint(a,h=0,g=this._pixelMatrix){let _=[a.x*this.worldSize,a.y*this.worldSize,h,1];return o.aw(_,_,g),new o.P(_[0]/_[3],_[1]/_[3])}getBounds(){let a=Math.max(0,this._helper._height/2-Ae(this));return new Lt().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,h){return h?h.pointCoordinate(a)!=null:a.y>this.height/2-Ae(this)}calculatePosMatrix(a,h=!1,g){var _;let E=(_=a.key)!==null&&_!==void 0?_:o.b3(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),M=h?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(E)){let B=M.get(E);return g?B.f32:B.f64}let L=Le(a,this.worldSize);o.O(L,h?this._alignedProjMatrix:this._viewProjMatrix,L);let k={f64:L,f32:new Float32Array(L)};return M.set(E,k),g?k.f32:k.f64}calculateFogMatrix(a){let h=a.key,g=this._fogMatrixCacheF32;if(g.has(h))return g.get(h);let _=Le(a,this.worldSize);return o.O(_,this._fogMatrix,_),g.set(h,new Float32Array(_)),g.get(h)}getConstrained(a,h){h=o.ah(+h,this.minZoom,this.maxZoom);let g={center:new o.S(a.lng,a.lat),zoom:h},_=this._helper._lngRange;if(!this._helper._renderWorldCopies&&_===null){let Se=179.9999999999;_=[-Se,Se]}let E=this.tileSize*o.af(g.zoom),M=0,L=E,k=0,B=E,V=0,W=0,{x:H,y:K}=this.size;if(this._helper._latRange){let Se=this._helper._latRange;M=o.U(Se[1])*E,L=o.U(Se[0])*E,L-M<K&&(V=K/(L-M))}_&&(k=o.aO(o.V(_[0])*E,0,E),B=o.aO(o.V(_[1])*E,0,E),B<k&&(B+=E),B-k<H&&(W=H/(B-k)));let{x:ee,y:ce}=se(E,a),ue,fe,ve=Math.max(W||0,V||0);if(ve){let Se=new o.P(W?(B+k)/2:ee,V?(L+M)/2:ce);return g.center=_e(E,Se).wrap(),g.zoom+=o.ak(ve),g}if(this._helper._latRange){let Se=K/2;ce-Se<M&&(fe=M+Se),ce+Se>L&&(fe=L-Se)}if(_){let Se=(k+B)/2,we=ee;this._helper._renderWorldCopies&&(we=o.aO(ee,Se-E/2,Se+E/2));let Ie=H/2;we-Ie<k&&(ue=k+Ie),we+Ie>B&&(ue=B-Ie)}if(ue!==void 0||fe!==void 0){let Se=new o.P(ue!=null?ue:ee,fe!=null?fe:ce);g.center=_e(E,Se).wrap()}return g}calculateCenterFromCameraLngLatAlt(a,h,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(a,h,g,_)}_calculateNearFarZIfNeeded(a,h,g){if(!this._helper.autoCalculateNearFarZ)return;let _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),E=a-_*this._helper._pixelPerMeter/Math.cos(h),M=_<0?E:a,L=Math.PI/2+this.pitchInRadians,k=o.ae(this.fov)*(Math.abs(Math.cos(o.ae(this.roll)))*this.height+Math.abs(Math.sin(o.ae(this.roll)))*this.width)/this.height*(.5+g.y/this.height),B=Math.sin(k)*M/Math.sin(o.ah(Math.PI-L-k,.01,Math.PI-.01)),V=Ae(this),W=Math.atan(V/this._helper.cameraToCenterDistance),H=o.ae(.75),K=W>H?2*W*(.5+g.y/(2*V)):H,ee=Math.sin(K)*M/Math.sin(o.ah(Math.PI-L-K,.01,Math.PI-.01)),ce=Math.min(B,ee);this._helper._farZ=1.01*(Math.cos(Math.PI/2-h)*ce+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let a=this.centerOffset,h=se(this.worldSize,this.center),g=h.x,_=h.y;this._helper._pixelPerMeter=o.aj(1,this.center.lat)*this.worldSize;let E=o.ae(Math.min(this.pitch,te)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(E)),L;this._calculateNearFarZIfNeeded(M,E,a),L=new Float64Array(16),o.b4(L,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aq(this._invProjMatrix,L),L[8]=2*-a.x/this._helper._width,L[9]=2*a.y/this._helper._height,this._projectionMatrix=o.b5(L),o.N(L,L,[1,-1,1]),o.M(L,L,[0,0,-this._helper.cameraToCenterDistance]),o.b6(L,L,-this.rollInRadians),o.b7(L,L,this.pitchInRadians),o.b6(L,L,-this.bearingInRadians),o.M(L,L,[-g,-_,0]),this._mercatorMatrix=o.N([],L,[this.worldSize,this.worldSize,this.worldSize]),o.N(L,L,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,L),o.M(L,L,[0,0,-this.elevation]),this._viewProjMatrix=L,this._invViewProjMatrix=o.aq([],L);let k=[0,0,-1,1];o.aw(k,k,this._invViewProjMatrix),this._cameraPosition=[k[0]/k[3],k[1]/k[3],k[2]/k[3]],this._fogMatrix=new Float64Array(16),o.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-g,-_,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,L);let B=this._helper._width%2/2,V=this._helper._height%2/2,W=Math.cos(this.bearingInRadians),H=Math.sin(-this.bearingInRadians),K=g-Math.round(g)+W*B+H*V,ee=_-Math.round(_)+W*V+H*B,ce=new Float64Array(L);if(o.M(ce,ce,[K>.5?K-1:K,ee>.5?ee-1:ee,0]),this._alignedProjMatrix=ce,L=o.aq(new Float64Array(16),this._pixelMatrix),!L)throw new Error("failed to invert matrix");this._pixelMatrixInverse=L,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let a=this.screenPointToMercatorCoordinate(new o.P(0,0)),h=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.aw(h,h,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let a=o.aj(1,this.center.lat)*this.worldSize;return Be(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,h){let g=o.a1.fromLngLat(a),_=[g.x*this.worldSize,g.y*this.worldSize,h,1];return o.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(a){let{overscaledTileID:h,aligned:g,applyTerrainMatrix:_}=a,E=this._helper.getMercatorTileCoordinates(h),M=h?this.calculatePosMatrix(h,g,!0):null,L;return L=h&&h.terrainRttPosMatrix32f&&_?h.terrainRttPosMatrix32f:M||o.b8(),{mainMatrix:L,tileMercatorCoords:E,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:L}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,h,g){return 1}transformLightDirection(a){return o.aT(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,h,g,_){let E=this.calculatePosMatrix(g),M;_?(M=[a,h,_(a,h),1],o.aw(M,M,E)):(M=[a,h,0,1],ap(M,M,E));let L=M[3];return{point:new o.P(M[0]/L,M[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}populateCache(a){for(let h of a)this.calculatePosMatrix(h)}getMatrixForModel(a,h){let g=o.a1.fromLngLat(a,h),_=g.meterInMercatorCoordinateUnits(),E=o.b9();return o.M(E,E,[g.x,g.y,g.z]),o.b6(E,E,Math.PI),o.b7(E,E,Math.PI/2),o.N(E,E,[-_,_,_]),E}getProjectionDataForCustomLayer(a=!0){let h=new o.Z(0,0,0,0,0),g=this.getProjectionData({overscaledTileID:h,applyGlobeMatrix:a}),_=Le(h,this.worldSize);o.O(_,this._viewProjMatrix,_),g.tileMercatorCoords=[0,0,1,1];let E=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],M=o.ba();return o.N(M,_,E),g.fallbackMatrix=M,g.mainMatrix=M,g}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function uA(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function oa(w){if(w.useSlerp){if(w.k<1){let a=o.bb(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),h=o.bb(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),g=new Float64Array(4);o.bc(g,a,h,w.k);let _=o.bd(g);w.tr.setRoll(_.roll),w.tr.setPitch(_.pitch),w.tr.setBearing(_.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);}else w.tr.setRoll(o.C.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(o.C.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(o.C.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Ja(w,a,h,g,_){let E=_.padding,M=se(_.worldSize,h.getNorthWest()),L=se(_.worldSize,h.getNorthEast()),k=se(_.worldSize,h.getSouthEast()),B=se(_.worldSize,h.getSouthWest()),V=o.ae(-g),W=M.rotate(V),H=L.rotate(V),K=k.rotate(V),ee=B.rotate(V),ce=new o.P(Math.max(W.x,H.x,ee.x,K.x),Math.max(W.y,H.y,ee.y,K.y)),ue=new o.P(Math.min(W.x,H.x,ee.x,K.x),Math.min(W.y,H.y,ee.y,K.y)),fe=ce.sub(ue),ve=(_.width-(E.left+E.right+a.left+a.right))/fe.x,Se=(_.height-(E.top+E.bottom+a.top+a.bottom))/fe.y;if(Se<0||ve<0)return void uA();let we=Math.min(o.ak(_.scale*Math.min(ve,Se)),w.maxZoom),Ie=o.P.convert(w.offset),Pe=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ae(g)),Ee=Ie.add(Pe).mult(_.scale/o.af(we));return{center:_e(_.worldSize,M.add(k).div(2).sub(Ee)),zoom:we,bearing:g}}class Go{get useGlobeControls(){return!1}handlePanInertia(a,h){let g=a.mag(),_=Math.abs(Ae(h));return{easingOffset:a.mult(Math.min(.75*_/g,1)),easingCenter:h.center}}handleMapControlsRollPitchBearingZoom(a,h){a.bearingDelta&&h.setBearing(h.bearing+a.bearingDelta),a.pitchDelta&&h.setPitch(h.pitch+a.pitchDelta),a.rollDelta&&h.setRoll(h.roll+a.rollDelta),a.zoomDelta&&h.setZoom(h.zoom+a.zoomDelta)}handleMapControlsPan(a,h,g){a.around.distSqr(h.centerPoint)<.01||h.setLocationAtPoint(g,a.around)}cameraForBoxAndBearing(a,h,g,_,E){return Ja(a,h,g,_,E)}handleJumpToCenterZoom(a,h){a.zoom!==(h.zoom!==void 0?+h.zoom:a.zoom)&&a.setZoom(+h.zoom),h.center!==void 0&&a.setCenter(o.S.convert(h.center))}handleEaseTo(a,h){let g=a.zoom,_=a.padding,E={roll:a.roll,pitch:a.pitch,bearing:a.bearing},M={roll:h.roll===void 0?a.roll:h.roll,pitch:h.pitch===void 0?a.pitch:h.pitch,bearing:h.bearing===void 0?a.bearing:h.bearing},L=h.zoom!==void 0,k=!a.isPaddingEqual(h.padding),B=!1,V=L?+h.zoom:a.zoom,W=a.centerPoint.add(h.offsetAsPoint),H=a.screenPointToLocation(W),{center:K,zoom:ee}=a.getConstrained(o.S.convert(h.center||H),V!=null?V:g);Pv(a,K);let ce=se(a.worldSize,H),ue=se(a.worldSize,K).sub(ce),fe=o.af(ee-g);return B=ee!==g,{easeFunc:ve=>{if(B&&a.setZoom(o.C.number(g,ee,ve)),o.be(E,M)||oa({startEulerAngles:E,endEulerAngles:M,tr:a,k:ve,useSlerp:E.roll!=M.roll}),k&&(a.interpolatePadding(_,h.padding,ve),W=a.centerPoint.add(h.offsetAsPoint)),h.around)a.setLocationAtPoint(h.around,h.aroundPoint);else{let Se=o.af(a.zoom-g),we=ee>g?Math.min(2,fe):Math.max(.5,fe),Ie=Math.pow(we,1-ve),Pe=_e(a.worldSize,ce.add(ue.mult(ve*Ie)).mult(Se));a.setLocationAtPoint(a.renderWorldCopies?Pe.wrap():Pe,W)}},isZooming:B,elevationCenter:K}}handleFlyTo(a,h){let g=h.zoom!==void 0,_=a.zoom,E=a.getConstrained(o.S.convert(h.center||h.locationAtOffset),g?+h.zoom:_),M=E.center,L=E.zoom;Pv(a,M);let k=se(a.worldSize,h.locationAtOffset),B=se(a.worldSize,M).sub(k),V=B.mag(),W=o.af(L-_),H;if(h.minZoom!==void 0){let K=Math.min(+h.minZoom,_,L),ee=a.getConstrained(M,K).zoom;H=o.af(ee-_)}return{easeFunc:(K,ee,ce,ue)=>{a.setZoom(K===1?L:_+o.ak(ee));let fe=K===1?M:_e(a.worldSize,k.add(B.mult(ce)).mult(ee));a.setLocationAtPoint(a.renderWorldCopies?fe.wrap():fe,ue)},scaleOfZoom:W,targetCenter:M,scaleOfMinZoom:H,pixelPathLength:V}}}class Qn{constructor(a,h,g){this.blendFunction=a,this.blendColor=h,this.mask=g}}Qn.Replace=[1,0],Qn.disabled=new Qn(Qn.Replace,o.bf.transparent,[!1,!1,!1,!1]),Qn.unblended=new Qn(Qn.Replace,o.bf.transparent,[!0,!0,!0,!0]),Qn.alphaBlended=new Qn([1,771],o.bf.transparent,[!0,!0,!0,!0]);let Uf=2305;class cr{constructor(a,h,g){this.enable=a,this.mode=h,this.frontFace=g}}cr.disabled=new cr(!1,1029,Uf),cr.backCCW=new cr(!0,1029,Uf),cr.frontCCW=new cr(!0,1028,Uf);class Ar{constructor(a,h,g){this.func=a,this.mask=h,this.range=g}}Ar.ReadOnly=!1,Ar.ReadWrite=!0,Ar.disabled=new Ar(519,Ar.ReadOnly,[0,1]);let Fu=7680;class nn{constructor(a,h,g,_,E,M){this.test=a,this.ref=h,this.mask=g,this.fail=_,this.depthFail=E,this.pass=M}}nn.disabled=new nn({func:519,mask:0},0,0,Fu,Fu,Fu);let es=new WeakMap;function zl(w){var a;if(es.has(w))return es.get(w);{let h=(a=w.getParameter(w.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return es.set(w,h),h}}class Ul{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;let h=a.context,g=h.gl;this._texFormat=g.RGBA,this._texType=g.UNSIGNED_BYTE;let _=new o.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);let E=new o.aN;E.emplaceBack(0,1,2),this._fullscreenTriangle=new Ff(h.createVertexBuffer(_,Oc.members),h.createIndexBuffer(E),o.aM.simpleSegment(0,0,_.length,E.length)),this._resultBuffer=new Uint8Array(4),h.activeTexture.set(g.TEXTURE1);let M=g.createTexture();g.bindTexture(g.TEXTURE_2D,M),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texImage2D(g.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=h.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),zl(g)&&(this._pbo=g.createBuffer(),g.bindBuffer(g.PIXEL_PACK_BUFFER,this._pbo),g.bufferData(g.PIXEL_PACK_BUFFER,4,g.STREAM_READ),g.bindBuffer(g.PIXEL_PACK_BUFFER,null))}destroy(){let a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,h){let g=this._updateCount;return this._readbackQueue?g>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():g>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,h),this._updateCount++,this._measuredError}_bindFramebuffer(){let a=this._cachedRenderContext.context,h=a.gl;a.activeTexture.set(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,h){let g=this._cachedRenderContext.context,_=g.gl;if(this._bindFramebuffer(),g.viewport.set([0,0,this._texWidth,this._texHeight]),g.clear({color:o.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(g,_.TRIANGLES,Ar.disabled,nn.disabled,Qn.unblended,cr.disabled,((E,M)=>({u_input:E,u_output_expected:M}))(a,h),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&zl(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);let E=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:E}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&zl(a)){let h=a.clientWaitSync(this._readbackQueue.sync,0,0);if(h===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(h===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ul._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let h=0;return h+=a[0]/256,h+=a[1]/65536,h+=a[2]/16777216,a[3]<127&&(h=-h),h/128}}let Ov=o.$/128;function db(w,a){let h=w.granularity!==void 0?Math.max(w.granularity,1):1,g=h+(w.generateBorders?2:0),_=h+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),E=g+1,M=_+1,L=w.generateBorders?-1:0,k=w.generateBorders||w.extendToNorthPole?-1:0,B=h+(w.generateBorders?1:0),V=h+(w.generateBorders||w.extendToSouthPole?1:0),W=E*M,H=g*_*6,K=E*M>65536;if(K&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let ee=K||a==="32bit",ce=new Int16Array(2*W),ue=0;for(let Se=k;Se<=V;Se++)for(let we=L;we<=B;we++){let Ie=we/h*o.$;we===-1&&(Ie=-Ov),we===h+1&&(Ie=o.$+Ov);let Pe=Se/h*o.$;Se===-1&&(Pe=w.extendToNorthPole?o.bh:-Ov),Se===h+1&&(Pe=w.extendToSouthPole?o.bi:o.$+Ov),ce[ue++]=Ie,ce[ue++]=Pe}let fe=ee?new Uint32Array(H):new Uint16Array(H),ve=0;for(let Se=0;Se<_;Se++)for(let we=0;we<g;we++){let Ie=we+1+Se*E,Pe=we+(Se+1)*E,Ee=we+1+(Se+1)*E;fe[ve++]=we+Se*E,fe[ve++]=Pe,fe[ve++]=Ie,fe[ve++]=Ie,fe[ve++]=Pe,fe[ve++]=Ee}return{vertices:ce.buffer.slice(0),indices:fe.buffer.slice(0),uses32bitIndices:ee}}let fp=new o.aK({fill:new o.bj(128,2),line:new o.bj(512,0),tile:new o.bj(128,32),stencil:new o.bj(128,1),circle:3});class bm{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return sl.projectionGlobe}get vertexShaderPreludeCode(){return sl.projectionMercator.vertexSource}get subdivisionGranularity(){return fp}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new Ul(a));let h=o.U(this._errorQueryLatitudeDegrees),g=2*Math.atan(Math.exp(Math.PI-h*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(h,g),E=x.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=E);let M=Math.min(Math.max((E-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bl(M))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,h,g,_,E){let M=(E==="stencil"?fp.stencil:fp.tile).getGranularityForZoomLevel(h.z);return this._getMesh(a,{granularity:M,generateBorders:g,extendToNorthPole:h.y===0&&_,extendToSouthPole:h.y===(1<<h.z)-1&&_})}_getMesh(a,h){let g=this._getMeshKey(h);if(g in this._tileMeshCache)return this._tileMeshCache[g];let _=function(E,M){let L=db(M,"16bit"),k=o.aL.deserialize({arrayBuffer:L.vertices,length:L.vertices.byteLength/2/2}),B=o.aN.deserialize({arrayBuffer:L.indices,length:L.indices.byteLength/2/3});return new Ff(E.createVertexBuffer(k,Oc.members),E.createIndexBuffer(B),o.aM.simpleSegment(0,0,k.length,B.length))}(a,h);return this._tileMeshCache[g]=_,_}recalculate(a){}hasTransition(){let a=x.now(),h=!1;return h=h||(a-this._errorMeasurementLastChangeTime)/1e3<.7,h=h||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,h}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}let Lv=new o.r({type:new o.D(o.v.projection.type)});class Dv extends o.E{constructor(a){super(),this._transitionable=new o.t(Lv),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new $r,this._verticalPerspectiveProjection=new bm}get transitionState(){let a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.bm){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,h,g,_,E){return this.currentProjection.getMeshFromTileID(a,h,g,_,E)}setProjection(a){this._transitionable.setValue("type",(a==null?void 0:a.type)||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function Nv(w){let a=hp(w.worldSize,w.center.lat);return 2*Math.PI*a}function ll(w,a,h,g,_){let E=1/(1<<_),M=a/o.$*E+g*E,L=o.bo((w/o.$*E+h*E)*Math.PI*2+Math.PI,2*Math.PI),k=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,B=Math.cos(k),V=new Float64Array(3);return V[0]=Math.sin(L)*B,V[1]=Math.sin(k),V[2]=Math.cos(L)*B,V}function fo(w){return function(a,h){let g=Math.cos(h),_=new Float64Array(3);return _[0]=Math.sin(a)*g,_[1]=Math.sin(h),_[2]=Math.cos(a)*g,_}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function hp(w,a){return w/(2*Math.PI)/Math.cos(a*Math.PI/180)}function wm(w){let a=Math.asin(w[1])/Math.PI*180,h=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(h>1e-6){let g=w[0]/h,_=Math.acos(w[2]/h),E=(g>0?_:-_)/Math.PI*180;return new o.S(o.aO(E,-180,180),a)}return new o.S(0,a)}function Bf(w){return Math.cos(w*Math.PI/180)}function Ii(w,a){let h=Bf(w),g=Bf(a);return o.ak(g/h)}function cA(w,a){let h=w.rotate(a.bearingInRadians),g=a.zoom+Ii(a.center.lat,0),_=o.bk(1/Bf(a.center.lat),1/Bf(Math.min(Math.abs(a.center.lat),60)),o.bn(g,7,3,0,1)),E=360/Nv({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.S(a.center.lng-h.x*E*_,o.ah(a.center.lat+h.y*E,-o.ai,o.ai))}function Em(w){let a=.5*w,h=Math.sin(a),g=Math.cos(a);return Math.log(h+g)-Math.log(g-h)}function mb(w,a,h,g){let _=w.lat+h*g;if(Math.abs(h)>1){let E=(Math.sign(w.lat+h)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,M=Math.abs(w.lat+h)*Math.PI/180,L=Em(E+g*(M-E)),k=Em(E),B=Em(M);return new o.S(w.lng+a*((L-k)/(B-k)),_)}return new o.S(w.lng+a*g,_)}class Dq{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=a}swapBuffers(){if(!this._hadAnyChanges)return;let a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(a,h,g,_){let E=`${a.z}_${a.x}_${a.y}_${_!=null&&_.terrain?"t":""}`,M=this._cache.get(E);if(M)return M;let L=this._cachePrevious.get(E);if(L)return this._cache.set(E,L),L;let k=this._boundingVolumeFactory(a,h,g,_);return this._cache.set(E,k),this._hadAnyChanges=!0,k}}class pp{constructor(a,h,g,_){this.min=g,this.max=_,this.points=a,this.planes=h}static fromAabb(a,h){let g=[];for(let _=0;_<8;_++)g.push([1&~_?a[0]:h[0],(_>>1&1)==1?h[1]:a[1],(_>>2&1)==1?h[2]:a[2]]);return new pp(g,[[-1,0,0,h[0]],[1,0,0,-a[0]],[0,-1,0,h[1]],[0,1,0,-a[1]],[0,0,-1,h[2]],[0,0,1,-a[2]]],a,h)}static fromCenterSizeAngles(a,h,g){let _=o.br([],g[0],g[1],g[2]),E=o.bs([],[h[0],0,0],_),M=o.bs([],[0,h[1],0],_),L=o.bs([],[0,0,h[2]],_),k=[...a],B=[...a];for(let W=0;W<8;W++)for(let H=0;H<3;H++){let K=a[H]+E[H]*(1&~W?-1:1)+M[H]*((W>>1&1)==1?1:-1)+L[H]*((W>>2&1)==1?1:-1);k[H]=Math.min(k[H],K),B[H]=Math.max(B[H],K)}let V=[];for(let W=0;W<8;W++){let H=[...a];o.aS(H,H,o.aR([],E,1&~W?-1:1)),o.aS(H,H,o.aR([],M,(W>>1&1)==1?1:-1)),o.aS(H,H,o.aR([],L,(W>>2&1)==1?1:-1)),V.push(H)}return new pp(V,[[...E,-o.aX(E,V[0])],[...M,-o.aX(M,V[0])],[...L,-o.aX(L,V[0])],[-E[0],-E[1],-E[2],-o.aX(E,V[7])],[-M[0],-M[1],-M[2],-o.aX(M,V[7])],[-L[0],-L[1],-L[2],-o.aX(L,V[7])]],k,B)}intersectsFrustum(a){let h=!0,g=this.points.length,_=this.planes.length,E=a.planes.length,M=a.points.length;for(let L=0;L<E;L++){let k=a.planes[L],B=0;for(let V=0;V<g;V++){let W=this.points[V];k[0]*W[0]+k[1]*W[1]+k[2]*W[2]+k[3]>=0&&B++}if(B===0)return 0;B<g&&(h=!1)}if(h)return 2;for(let L=0;L<_;L++){let k=this.planes[L],B=0;for(let V=0;V<M;V++){let W=a.points[V];k[0]*W[0]+k[1]*W[1]+k[2]*W[2]+k[3]>=0&&B++}if(B===0)return 0}return 1}intersectsPlane(a){let h=this.points.length,g=0;for(let _=0;_<h;_++){let E=this.points[_];a[0]*E[0]+a[1]*E[1]+a[2]*E[2]+a[3]>=0&&g++}return g===h?2:g===0?0:1}}function Mo(w,a,h){let g=w-a;return g<0?-g:Math.max(0,g-h)}function Sm(w,a,h,g,_){let E=w-h,M;return M=E<0?Math.min(-E,1+E-_):E>1?Math.min(Math.max(E-_,0),1-E):0,Math.max(M,Mo(a,g,_))}class Bl{constructor(){this._boundingVolumeCache=new Dq(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(a,h,g,_){let E=1<<g.z,M=1/E,L=g.x/E,k=g.y/E,B=2;return B=Math.min(B,Sm(a,h,L,k,M)),B=Math.min(B,Sm(a,h,L+.5,-k-M,M)),B=Math.min(B,Sm(a,h,L+.5,2-k-M,M)),B}getWrap(a,h,g){let _=1<<h.z,E=1/_,M=h.x/_,L=Mo(a.x,M,E),k=Mo(a.x,M-1,E),B=Mo(a.x,M+1,E),V=Math.min(L,k,B);return V===B?1:V===k?-1:0}allowVariableZoom(a,h){return tt(a,h)>4}allowWorldCopies(){return!1}getTileBoundingVolume(a,h,g,_){return this._boundingVolumeCache.getTileBoundingVolume(a,h,g,_)}_computeTileBoundingVolume(a,h,g,_){var E,M;let L=0,k=0;if(_!=null&&_.terrain){let B=new o.Z(a.z,h,a.z,a.x,a.y),V=_.terrain.getMinMaxElevation(B);L=(E=V.minElevation)!==null&&E!==void 0?E:Math.min(0,g),k=(M=V.maxElevation)!==null&&M!==void 0?M:Math.max(0,g)}if(L/=o.bu,k/=o.bu,L+=1,k+=1,a.z<=0)return pp.fromAabb([-k,-k,-k],[k,k,k]);if(a.z===1)return pp.fromAabb([a.x===0?-k:0,a.y===0?0:-k,-k],[a.x===0?0:k,a.y===0?k:0,k]);{let B=[ll(0,0,a.x,a.y,a.z),ll(o.$,0,a.x,a.y,a.z),ll(o.$,o.$,a.x,a.y,a.z),ll(0,o.$,a.x,a.y,a.z)],V=[];for(let Ge of B)V.push(o.aR([],Ge,k));if(k!==L)for(let Ge of B)V.push(o.aR([],Ge,L));a.y===0&&V.push([0,1,0]),a.y===(1<<a.z)-1&&V.push([0,-1,0]);let W=[1,1,1],H=[-1,-1,-1];for(let Ge of V)for(let Xe=0;Xe<3;Xe++)W[Xe]=Math.min(W[Xe],Ge[Xe]),H[Xe]=Math.max(H[Xe],Ge[Xe]);let K=ll(o.$/2,o.$/2,a.x,a.y,a.z),ee=o.aW([],[0,1,0],K);o.aV(ee,ee);let ce=o.aW([],K,ee);o.aV(ce,ce);let ue=o.aW([],B[2],B[1]);o.aV(ue,ue);let fe=o.aW([],B[0],B[3]);o.aV(fe,fe),V.push(o.aR([],K,k)),a.y>=(1<<a.z)/2&&V.push(o.aR([],ll(o.$/2,0,a.x,a.y,a.z),k)),a.y<(1<<a.z)/2&&V.push(o.aR([],ll(o.$/2,o.$,a.x,a.y,a.z),k));let ve=Tm(K,V),Se=Tm(ce,V),we=[-K[0],-K[1],-K[2],ve.max],Ie=[K[0],K[1],K[2],-ve.min],Pe=[-ce[0],-ce[1],-ce[2],Se.max],Ee=[ce[0],ce[1],ce[2],-Se.min],Fe=[...ue,0],Qe=[...fe,0],Ve=[];return a.y===0?Ve.push(o.bt(Qe,Fe,we),o.bt(Qe,Fe,Ie)):Ve.push(o.bt(Pe,Fe,we),o.bt(Pe,Fe,Ie),o.bt(Pe,Qe,we),o.bt(Pe,Qe,Ie)),a.y===(1<<a.z)-1?Ve.push(o.bt(Qe,Fe,we),o.bt(Qe,Fe,Ie)):Ve.push(o.bt(Ee,Fe,we),o.bt(Ee,Fe,Ie),o.bt(Ee,Qe,we),o.bt(Ee,Qe,Ie)),new pp(Ve,[we,Ie,Pe,Ee,Fe,Qe],W,H)}}}function Tm(w,a){let h=1/0,g=-1/0;for(let _ of a){let E=o.aX(w,_);h=Math.min(h,E),g=Math.max(g,E)}return{min:h,max:g}}class Im{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,h,g){return this._helper.interpolatePadding(a,h,g)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,h){this._helper.resize(a,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,h){this._helper.overrideNearFarZ(a,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bv(),this._projectionMatrix=o.b9(),this._globeViewProjMatrix32f=o.b8(),this._globeViewProjMatrixNoCorrection=o.b9(),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),this._globeProjMatrixInverted=o.b9(),this._cameraPosition=o.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new na({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,h)=>this.getConstrained(a,h)}),this._coveringTilesDetailsProvider=new Bl}clone(){let a=new Im;return a.apply(this),a}apply(a,h){this._globeLatitudeErrorCorrectionRadians=h||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let a=o.bp();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){let{overscaledTileID:h,applyGlobeMatrix:g}=a,_=this._helper.getMercatorTileCoordinates(h);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:g?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){let h=this.pitchInRadians,g=this.cameraToCenterDistance/a,_=Math.sin(h)*g,E=Math.cos(h)*g+1,M=1/Math.sqrt(_*_+E*E)*1,L=-_,k=E,B=Math.sqrt(L*L+k*k);L/=B,k/=B;let V=[0,L,k];o.bw(V,V,[0,0,0],-this.bearingInRadians),o.bx(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),o.by(V,V,[0,0,0],this.center.lng*Math.PI/180);let W=1/o.aZ(V);return o.aR(V,V,W),[...V,-M*W]}isLocationOccluded(a){return!this.isSurfacePointVisible(fo(a))}transformLightDirection(a){let h=this._helper._center.lng*Math.PI/180,g=this._helper._center.lat*Math.PI/180,_=Math.cos(g),E=[Math.sin(h)*_,Math.sin(g),Math.cos(h)*_],M=[E[2],0,-E[0]],L=[0,0,0];o.aW(L,M,E),o.aV(M,M),o.aV(L,L);let k=[0,0,0];return o.aV(k,[M[0]*a[0]+L[0]*a[1]+E[0]*a[2],M[1]*a[0]+L[1]*a[1]+E[1]*a[2],M[2]*a[0]+L[2]*a[1]+E[2]*a[2]]),k}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,h,g){let _=function(L,k,B){let V=1/(1<<B.z);return new o.a1(L/o.$*V+B.x*V,k/o.$*V+B.y*V)}(a,h,g.canonical),E=(M=_.y,[o.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(E[1])}projectTileCoordinates(a,h,g,_){let E=g.canonical,M=ll(a,h,E.x,E.y,E.z),L=1+(_?_(a,h):0)/o.bu,k=[M[0]*L,M[1]*L,M[2]*L,1];o.aw(k,k,this._globeViewProjMatrixNoCorrection);let B=this._cachedClippingPlane,V=B[0]*M[0]+B[1]*M[1]+B[2]*M[2]+B[3]<0;return{point:new o.P(k[0]/k[3],k[1]/k[3]),signedDistanceFromCamera:k[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let a=hp(this.worldSize,this.center.lat),h=o.ba(),g=o.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.b4(h,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let _=this.centerOffset;h[8]=2*-_.x/this._helper._width,h[9]=2*_.y/this._helper._height,this._projectionMatrix=o.b5(h),this._globeProjMatrixInverted=o.ba(),o.aq(this._globeProjMatrixInverted,h),o.M(h,h,[0,0,-this.cameraToCenterDistance]),o.b6(h,h,this.rollInRadians),o.b7(h,h,-this.pitchInRadians),o.b6(h,h,this.bearingInRadians),o.M(h,h,[0,0,-a]);let E=o.bp();E[0]=a,E[1]=a,E[2]=a,o.b7(g,h,this.center.lat*Math.PI/180),o.bz(g,g,-this.center.lng*Math.PI/180),o.N(g,g,E),this._globeViewProjMatrixNoCorrection=g,o.b7(h,h,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bz(h,h,-this.center.lng*Math.PI/180),o.N(h,h,E),this._globeViewProjMatrix32f=new Float32Array(h),this._globeViewProjMatrixNoCorrectionInverted=o.ba(),o.aq(this._globeViewProjMatrixNoCorrectionInverted,g);let M=o.bp();this._cameraPosition=o.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bw(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),o.bx(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),o.bw(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),o.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bx(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),o.by(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);let L=o.b5(this._globeViewProjMatrixNoCorrectionInverted);o.N(L,L,[1,1,-1]),this._cachedFrustum=Gi.fromInvProjectionMatrix(L,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");let h=o.ba();return o.ag(h),h}getVisibleUnwrappedCoordinates(a){return[new o.b2(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,h){if(!this._globeViewProjMatrixNoCorrection)return 1;let g=fo(a);o.aR(g,g,1+h/o.bu);let _=o.bv();return o.aw(_,[g[0],g[1],g[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(a){}getBounds(){let a=.5*this.width,h=.5*this.height,g=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,h),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,h)],_=[];for(let W of g)_.push(this.unprojectScreenPoint(W));let E=0,M=0,L=0,k=0,B=this.center;for(let W of _){let H=o.bA(B.lng,W.lng),K=o.bA(B.lat,W.lat);H<M&&(M=H),H>E&&(E=H),K<k&&(k=K),K>L&&(L=K)}let V=[B.lng+M,B.lat+k,B.lng+E,B.lat+L];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new Lt(V)}getConstrained(a,h){let g=o.ah(a.lat,-o.ai,o.ai),_=o.ah(+h,this.minZoom+Ii(0,g),this.maxZoom);return{center:new o.S(a.lng,g),zoom:_}}calculateCenterFromCameraLngLatAlt(a,h,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(a,h,g,_)}setLocationAtPoint(a,h){let g=fo(this.unprojectScreenPoint(h)),_=fo(a),E=o.bp();o.bB(E);let M=o.bp();o.by(M,g,E,-this.center.lng*Math.PI/180),o.bx(M,M,E,this.center.lat*Math.PI/180);let L=_[0]*_[0]+_[2]*_[2],k=M[0]*M[0];if(L<k)return;let B=Math.sqrt(L-k),V=-B,W=o.bC(_[0],_[2],M[0],B),H=o.bC(_[0],_[2],M[0],V),K=o.bp();o.by(K,_,E,-W);let ee=o.bC(K[1],K[2],M[1],M[2]),ce=o.bp();o.by(ce,_,E,-H);let ue=o.bC(ce[1],ce[2],M[1],M[2]),fe=.5*Math.PI,ve=ee>=-fe&&ee<=fe,Se=ue>=-fe&&ue<=fe,we,Ie;if(ve&&Se){let Qe=this.center.lng*Math.PI/180,Ve=this.center.lat*Math.PI/180;o.bD(W,Qe)+o.bD(ee,Ve)<o.bD(H,Qe)+o.bD(ue,Ve)?(we=W,Ie=ee):(we=H,Ie=ue)}else if(ve)we=W,Ie=ee;else{if(!Se)return;we=H,Ie=ue}let Pe=we/Math.PI*180,Ee=Ie/Math.PI*180,Fe=this.center.lat;this.setCenter(new o.S(Pe,o.ah(Ee,-90,90))),this.setZoom(this.zoom+Ii(Fe,this.center.lat))}locationToScreenPoint(a,h){let g=fo(a);if(h){let _=h.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aR(g,g,1+_/o.bu)}return this._projectSurfacePointToScreen(g)}_projectSurfacePointToScreen(a){let h=o.bv();return o.aw(h,[...a,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],new o.P((.5*h[0]+.5)*this.width,(.5*-h[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,h){if(h){let g=h.pointCoordinate(a);if(g)return g}return o.a1.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,h){var g;return(g=this.screenPointToMercatorCoordinate(a,h))===null||g===void 0?void 0:g.toLngLat()}isPointOnMapSurface(a,h){let g=this._cameraPosition,_=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(g,_)}getRayDirectionFromPixel(a){let h=o.bv();h[0]=a.x/this.width*2-1,h[1]=-1*(a.y/this.height*2-1),h[2]=1,h[3]=1,o.aw(h,h,this._globeViewProjMatrixNoCorrectionInverted),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3];let g=o.bp();g[0]=h[0]-this._cameraPosition[0],g[1]=h[1]-this._cameraPosition[1],g[2]=h[2]-this._cameraPosition[2];let _=o.bp();return o.aV(_,g),_}isSurfacePointVisible(a){let h=this._cachedClippingPlane;return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]+h[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;let h=o.bv();return o.aw(h,[...a,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3],h[0]>-1&&h[0]<1&&h[1]>-1&&h[1]<1&&h[2]>-1&&h[2]<1}rayPlanetIntersection(a,h){let g=o.aX(a,h),_=o.bp(),E=o.bp();o.aR(E,h,g),o.aU(_,a,E);let M=1-o.aX(_,_);if(M<0)return null;let L=o.aX(a,a)-1,k=-g+(g<0?1:-1)*Math.sqrt(M),B=L/k,V=k;return{tMin:Math.min(B,V),tMax:Math.max(B,V)}}unprojectScreenPoint(a){let h=this._cameraPosition,g=this.getRayDirectionFromPixel(a),_=this.rayPlanetIntersection(h,g);if(_){let V=o.bp();o.aS(V,h,[g[0]*_.tMin,g[1]*_.tMin,g[2]*_.tMin]);let W=o.bp();return o.aV(W,V),wm(W)}let E=this._cachedClippingPlane,M=E[0]*g[0]+E[1]*g[1]+E[2]*g[2],L=-o.b1(E,h)/M,k=o.bp();if(L>0)o.aS(k,h,[g[0]*L,g[1]*L,g[2]*L]);else{let V=o.bp();o.aS(V,h,[2*g[0],2*g[1],2*g[2]]);let W=o.b1(this._cachedClippingPlane,V);o.aU(k,V,[this._cachedClippingPlane[0]*W,this._cachedClippingPlane[1]*W,this._cachedClippingPlane[2]*W])}let B=function(V){let W=o.bp();return W[0]=V[0]*-V[3],W[1]=V[1]*-V[3],W[2]=V[2]*-V[3],{center:W,radius:Math.sqrt(1-V[3]*V[3])}}(E);return wm(function(V,W,H){let K=o.bp();o.aU(K,H,V);let ee=o.bp();return o.bq(ee,V,K,W/o.a$(K)),ee}(B.center,B.radius,k))}getMatrixForModel(a,h){let g=o.S.convert(a),_=1/o.bu,E=o.b9();return o.bz(E,E,g.lng/180*Math.PI),o.b7(E,E,-g.lat/180*Math.PI),o.M(E,E,[0,0,1+h/o.bu]),o.b7(E,E,.5*Math.PI),o.N(E,E,[_,_,_]),E}getProjectionDataForCustomLayer(a=!0){let h=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:a});return h.tileMercatorCoords=[0,0,1,1],h}getFastPathSimpleProjectionMatrix(a){}}class Am{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,h,g){return this._helper.interpolatePadding(a,h,g)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,h,g=!0){this._helper.resize(a,h,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,h){this._helper.overrideNearFarZ(a,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,h){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=h,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new na({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,h)=>this.getConstrained(a,h)}),this._globeness=1,this._mercatorTransform=new Fn,this._verticalPerspectiveTransform=new Im}clone(){let a=new Am;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){let h=this._mercatorTransform.getProjectionData(a),g=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?g.mainMatrix:h.mainMatrix,clippingPlane:g.clippingPlane,tileMercatorCoords:g.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:h.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,h,g){let _=this._mercatorTransform.getPitchedTextCorrection(a,h,g),E=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,h,g);return o.bk(_,E,this._globeness)}projectTileCoordinates(a,h,g,_){return this.currentTransform.projectTileCoordinates(a,h,g,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,h){return this.currentTransform.lngLatToCameraDepth(a,h)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,h){return this.currentTransform.getConstrained(a,h)}calculateCenterFromCameraLngLatAlt(a,h,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(a,h,g,_)}setLocationAtPoint(a,h){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,h),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,h),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,h){return this.currentTransform.locationToScreenPoint(a,h)}screenPointToMercatorCoordinate(a,h){return this.currentTransform.screenPointToMercatorCoordinate(a,h)}screenPointToLocation(a,h){return this.currentTransform.screenPointToLocation(a,h)}isPointOnMapSurface(a,h){return this.currentTransform.isPointOnMapSurface(a,h)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,h){return this.currentTransform.getMatrixForModel(a,h)}getProjectionDataForCustomLayer(a=!0){let h=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return h;let g=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return g.fallbackMatrix=h.mainMatrix,g}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class $o{get useGlobeControls(){return!0}handlePanInertia(a,h){let g=cA(a,h);return Math.abs(g.lng-h.center.lng)>180&&(g.lng=h.center.lng+179.5*Math.sign(g.lng-h.center.lng)),{easingCenter:g,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,h){let g=a.around,_=h.screenPointToLocation(g);a.bearingDelta&&h.setBearing(h.bearing+a.bearingDelta),a.pitchDelta&&h.setPitch(h.pitch+a.pitchDelta),a.rollDelta&&h.setRoll(h.roll+a.rollDelta);let E=h.zoom;a.zoomDelta&&h.setZoom(h.zoom+a.zoomDelta);let M=h.zoom-E;if(M===0)return;let L=o.bA(h.center.lng,_.lng),k=L/(Math.abs(L/180)+1),B=o.bA(h.center.lat,_.lat),V=h.getRayDirectionFromPixel(g),W=h.cameraPosition,H=-1*o.aX(W,V),K=o.bp();o.aS(K,W,[V[0]*H,V[1]*H,V[2]*H]);let ee=o.aZ(K)-1,ce=Math.exp(.5*-Math.max(ee-.3,0)),ue=hp(h.worldSize,h.center.lat)/Math.min(h.width,h.height),fe=o.bn(ue,.9,.5,1,.25),ve=(1-o.af(-M))*Math.min(ce,fe),Se=h.center.lat,we=h.zoom,Ie=new o.S(h.center.lng+k*ve,o.ah(h.center.lat+B*ve,-o.ai,o.ai));h.setLocationAtPoint(_,g);let Pe=h.center,Ee=o.bn(Math.abs(L),45,85,0,1),Fe=o.bn(ue,.75,.35,0,1),Qe=Math.pow(Math.max(Ee,Fe),.25),Ve=o.bA(Pe.lng,Ie.lng),Ge=o.bA(Pe.lat,Ie.lat);h.setCenter(new o.S(Pe.lng+Ve*Qe,Pe.lat+Ge*Qe).wrap()),h.setZoom(we+Ii(Se,h.center.lat))}handleMapControlsPan(a,h,g){if(!a.panDelta)return;let _=h.center.lat,E=h.zoom;h.setCenter(cA(a.panDelta,h).wrap()),h.setZoom(E+Ii(_,h.center.lat))}cameraForBoxAndBearing(a,h,g,_,E){let M=Ja(a,h,g,_,E),L=h.left/E.width*2-1,k=(E.width-h.right)/E.width*2-1,B=h.top/E.height*-2+1,V=(E.height-h.bottom)/E.height*-2+1,W=o.bA(g.getWest(),g.getEast())<0,H=W?g.getEast():g.getWest(),K=W?g.getWest():g.getEast(),ee=Math.max(g.getNorth(),g.getSouth()),ce=Math.min(g.getNorth(),g.getSouth()),ue=H+.5*o.bA(H,K),fe=ee+.5*o.bA(ee,ce),ve=E.clone();ve.setCenter(M.center),ve.setBearing(M.bearing),ve.setPitch(0),ve.setRoll(0),ve.setZoom(M.zoom);let Se=ve.modelViewProjectionMatrix,we=[fo(g.getNorthWest()),fo(g.getNorthEast()),fo(g.getSouthWest()),fo(g.getSouthEast()),fo(new o.S(K,fe)),fo(new o.S(H,fe)),fo(new o.S(ue,ee)),fo(new o.S(ue,ce))],Ie=fo(M.center),Pe=Number.POSITIVE_INFINITY;for(let Ee of we)L<0&&(Pe=$o.getLesserNonNegativeNonNull(Pe,$o.solveVectorScale(Ee,Ie,Se,"x",L))),k>0&&(Pe=$o.getLesserNonNegativeNonNull(Pe,$o.solveVectorScale(Ee,Ie,Se,"x",k))),B>0&&(Pe=$o.getLesserNonNegativeNonNull(Pe,$o.solveVectorScale(Ee,Ie,Se,"y",B))),V<0&&(Pe=$o.getLesserNonNegativeNonNull(Pe,$o.solveVectorScale(Ee,Ie,Se,"y",V)));if(Number.isFinite(Pe)&&Pe!==0)return M.zoom=ve.zoom+o.ak(Pe),M;uA()}handleJumpToCenterZoom(a,h){let g=a.center.lat,_=a.getConstrained(h.center?o.S.convert(h.center):a.center,a.zoom).center;a.setCenter(_.wrap());let E=h.zoom!==void 0?+h.zoom:a.zoom+Ii(g,_.lat);a.zoom!==E&&a.setZoom(E)}handleEaseTo(a,h){let g=a.zoom,_=a.center,E=a.padding,M={roll:a.roll,pitch:a.pitch,bearing:a.bearing},L={roll:h.roll===void 0?a.roll:h.roll,pitch:h.pitch===void 0?a.pitch:h.pitch,bearing:h.bearing===void 0?a.bearing:h.bearing},k=h.zoom!==void 0,B=!a.isPaddingEqual(h.padding),V=!1,W=h.center?o.S.convert(h.center):_,H=a.getConstrained(W,g).center;Pv(a,H);let K=a.clone();K.setCenter(H),K.setZoom(k?+h.zoom:g+Ii(_.lat,W.lat)),K.setBearing(h.bearing);let ee=new o.P(o.ah(a.centerPoint.x+h.offsetAsPoint.x,0,a.width),o.ah(a.centerPoint.y+h.offsetAsPoint.y,0,a.height));K.setLocationAtPoint(H,ee);let ce=(h.offset&&h.offsetAsPoint.mag())>0?K.center:H,ue=k?+h.zoom:g+Ii(_.lat,ce.lat),fe=g+Ii(_.lat,0),ve=ue+Ii(ce.lat,0),Se=o.bA(_.lng,ce.lng),we=o.bA(_.lat,ce.lat),Ie=o.af(ve-fe);return V=ue!==g,{easeFunc:Pe=>{if(o.be(M,L)||oa({startEulerAngles:M,endEulerAngles:L,tr:a,k:Pe,useSlerp:M.roll!=L.roll}),B&&a.interpolatePadding(E,h.padding,Pe),h.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(h.around,h.aroundPoint);else{let Ee=ve>fe?Math.min(2,Ie):Math.max(.5,Ie),Fe=Math.pow(Ee,1-Pe),Qe=mb(_,Se,we,Pe*Fe);a.setCenter(Qe.wrap())}if(V){let Ee=o.C.number(fe,ve,Pe)+Ii(0,a.center.lat);a.setZoom(Ee)}},isZooming:V,elevationCenter:ce}}handleFlyTo(a,h){let g=h.zoom!==void 0,_=a.center,E=a.zoom,M=a.padding,L=!a.isPaddingEqual(h.padding),k=a.getConstrained(o.S.convert(h.center||h.locationAtOffset),E).center,B=g?+h.zoom:a.zoom+Ii(a.center.lat,k.lat),V=a.clone();V.setCenter(k),V.setZoom(B),V.setBearing(h.bearing);let W=new o.P(o.ah(a.centerPoint.x+h.offsetAsPoint.x,0,a.width),o.ah(a.centerPoint.y+h.offsetAsPoint.y,0,a.height));V.setLocationAtPoint(k,W);let H=V.center;Pv(a,H);let K=function(we,Ie,Pe){let Ee=fo(Ie),Fe=fo(Pe),Qe=o.aX(Ee,Fe),Ve=Math.acos(Qe),Ge=Nv(we);return Ve/(2*Math.PI)*Ge}(a,_,H),ee=E+Ii(_.lat,0),ce=B+Ii(H.lat,0),ue=o.af(ce-ee),fe;if(typeof h.minZoom=="number"){let we=+h.minZoom+Ii(H.lat,0),Ie=Math.min(we,ee,ce)+Ii(0,H.lat),Pe=a.getConstrained(H,Ie).zoom+Ii(H.lat,0);fe=o.af(Pe-ee)}let ve=o.bA(_.lng,H.lng),Se=o.bA(_.lat,H.lat);return{easeFunc:(we,Ie,Pe,Ee)=>{let Fe=mb(_,ve,Se,Pe);L&&a.interpolatePadding(M,h.padding,we);let Qe=we===1?H:Fe;a.setCenter(Qe.wrap());let Ve=ee+o.ak(Ie);a.setZoom(we===1?B:Ve+Ii(0,Qe.lat))},scaleOfZoom:ue,targetCenter:H,scaleOfMinZoom:fe,pixelPathLength:K}}static solveVectorScale(a,h,g,_,E){let M=_==="x"?[g[0],g[4],g[8],g[12]]:[g[1],g[5],g[9],g[13]],L=[g[3],g[7],g[11],g[15]],k=a[0]*M[0]+a[1]*M[1]+a[2]*M[2],B=a[0]*L[0]+a[1]*L[1]+a[2]*L[2],V=h[0]*M[0]+h[1]*M[1]+h[2]*M[2],W=h[0]*L[0]+h[1]*L[1]+h[2]*L[2];return V+E*B===k+E*W||L[3]*(k-V)+M[3]*(W-B)+k*W==V*B?null:(V+M[3]-E*W-E*L[3])/(V-k-E*W+E*B)}static getLesserNonNegativeNonNull(a,h){return h!==null&&h>=0&&h<a?h:a}}class fA{constructor(a){this._globe=a,this._mercatorCameraHelper=new Go,this._verticalPerspectiveCameraHelper=new $o}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,h){return this.currentHelper.handlePanInertia(a,h)}handleMapControlsRollPitchBearingZoom(a,h){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,h)}handleMapControlsPan(a,h,g){this.currentHelper.handleMapControlsPan(a,h,g)}cameraForBoxAndBearing(a,h,g,_,E){return this.currentHelper.cameraForBoxAndBearing(a,h,g,_,E)}handleJumpToCenterZoom(a,h){this.currentHelper.handleJumpToCenterZoom(a,h)}handleEaseTo(a,h){return this.currentHelper.handleEaseTo(a,h)}handleFlyTo(a,h){return this.currentHelper.handleFlyTo(a,h)}}let kv=(w,a)=>o.y(w,a&&a.filter(h=>h.identifier!=="source.canvas")),Nq=o.bE();class gb extends o.E{constructor(a,h={}){var g,_;super(),this._rtlPluginLoaded=()=>{for(let M in this.sourceCaches){let L=this.sourceCaches[M].getSource().type;L!=="vector"&&L!=="geojson"||this.sourceCaches[M].reload()}},this.map=a,this.dispatcher=new Ot(Dt(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(M,L)=>this.getGlyphs(M,L)),this.dispatcher.registerMessageHandler("GI",(M,L)=>this.getImages(M,L)),this.imageManager=new ae,this.imageManager.setEventedParent(this);let E=((g=a._container)===null||g===void 0?void 0:g.lang)||typeof document!="undefined"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new be(a._requestManager,h.localIdeographFontFamily,E),this.lineAtlas=new Je(256,512),this.crossTileSymbolIndex=new cp,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bG()),Rn().on(br,this._rtlPluginLoaded),this.on("data",M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;let L=this.sourceCaches[M.sourceId];if(!L)return;let k=L.getSource();if(k&&k.vectorLayerIds)for(let B in this._layers){let V=this._layers[B];V.source===k.id&&this._validateLayer(V)}})}setGlobalStateProperty(a,h){var g,_,E;this._checkLoaded();let M=h===null?(E=(_=(g=this.stylesheet.state)===null||g===void 0?void 0:g[a])===null||_===void 0?void 0:_.default)!==null&&E!==void 0?E:null:h;if(o.bH(M,this._globalState[a]))return this;this._globalState[a]=M,this._applyGlobalStateChanges([a])}getGlobalState(){return this._globalState}setGlobalState(a){this._checkLoaded();let h=[];for(let g in a)!o.bH(this._globalState[g],a[g].default)&&(h.push(g),this._globalState[g]=a[g].default);this._applyGlobalStateChanges(h)}_applyGlobalStateChanges(a){if(a.length===0)return;let h=new Set;for(let g in this._layers){let _=this._layers[g],E=_.getLayoutAffectingGlobalStateRefs(),M=_.getPaintAffectingGlobalStateRefs();for(let L of a)if(E.has(L)&&h.add(_.source),M.has(L))for(let{name:k,value:B}of M.get(L))this._updatePaintProperty(_,k,B)}for(let g in this.sourceCaches)h.has(g)&&(this._reloadSource(g),this._changed=!0)}loadURL(a,h={},g){this.fire(new o.l("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;let _=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;let E=this._loadStyleRequest;o.j(_,this._loadStyleRequest).then(M=>{this._loadStyleRequest=null,this._load(M.data,h,g)}).catch(M=>{this._loadStyleRequest=null,M&&!E.signal.aborted&&this.fire(new o.k(M))})}loadJSON(a,h={},g){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(a,h,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Nq,{validate:!1})}_load(a,h,g){var _,E;let M=h.transformStyle?h.transformStyle(g,a):a;if(!h.validate||!kv(this,o.z(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(let L in M.sources)this.addSource(L,M.sources[L],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new qe(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new Ke(this.stylesheet.sky),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var a;let h=o.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",h),this._order=h.map(g=>g.id),this._layers={},this.setGlobalState((a=this.stylesheet.state)!==null&&a!==void 0?a:null),this._serializedLayers=null;for(let g of h){let _=o.bJ(g);_.setEventedParent(this,{layer:{id:g.id}}),_.setGlobalState(this._globalState),this._layers[g.id]=_}}_loadSprite(a,h=!1,g=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(E,M,L,k){return o._(this,void 0,void 0,function*(){let B=Z(E),V=L>1?"@2x":"",W={},H={};for(let{id:K,url:ee}of B){let ce=M.transformRequest(ie(ee,V,".json"),"SpriteJSON");W[K]=o.j(ce,k);let ue=M.transformRequest(ie(ee,V,".png"),"SpriteImage");H[K]=U.getImage(ue,k)}return yield Promise.all([...Object.values(W),...Object.values(H)]),function(K,ee){return o._(this,void 0,void 0,function*(){let ce={};for(let ue in K){ce[ue]={};let fe=x.getImageCanvasContext((yield ee[ue]).data),ve=(yield K[ue]).data;for(let Se in ve){let{width:we,height:Ie,x:Pe,y:Ee,sdf:Fe,pixelRatio:Qe,stretchX:Ve,stretchY:Ge,content:Xe,textFitWidth:vt,textFitHeight:bt}=ve[Se];ce[ue][Se]={data:null,pixelRatio:Qe,sdf:Fe,stretchX:Ve,stretchY:Ge,content:Xe,textFitWidth:vt,textFitHeight:bt,spriteData:{width:we,height:Ie,x:Pe,y:Ee,context:fe}}}}return ce})}(W,H)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(E=>{if(this._spriteRequest=null,E)for(let M in E){this._spritesImagesIds[M]=[];let L=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter(k=>!(k in E)):[];for(let k of L)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(let k in E[M]){let B=M==="default"?k:`${M}:${k}`;this._spritesImagesIds[M].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,E[M][k],!1):this.imageManager.addImage(B,E[M][k]),h&&(this._changedImages[B]=!0)}}}).catch(E=>{this._spriteRequest=null,_=E,this.fire(new o.k(_))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),g&&g(_)})}_unloadSprite(){for(let a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){let h=this.sourceCaches[a.source];if(!h)return;let g=a.sourceLayer;if(!g)return;let _=h.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.k(new Error(`Source layer "${g}" does not exist on source "${_.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,h=!1){let g=this._serializedAllLayers();if(!a||a.length===0)return Object.values(h?o.bK(g):g);let _=[];for(let E of a)if(g[E]){let M=h?o.bK(g[E]):g[E];_.push(M)}return _}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};let h=Object.keys(this._layers);for(let g of h){let _=this._layers[g];_.type!=="custom"&&(a[g]=_.serialize())}return a}hasTransitions(){var a,h,g;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((h=this.sky)===null||h===void 0)&&h.hasTransition()||!((g=this.projection)===null||g===void 0)&&g.hasTransition())return!0;for(let _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(let _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;let h=this._changed;if(h){let _=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(_.length||E.length)&&this._updateWorkerLayers(_,E);for(let M in this._updatedSources){let L=this._updatedSources[M];if(L==="reload")this._reloadSource(M);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let M in this._updatedPaintProps)this._layers[M].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}let g={};for(let _ in this.sourceCaches){let E=this.sourceCaches[_];g[_]=E.used,E.used=!1}for(let _ of this._order){let E=this._layers[_];E.recalculate(a,this._availableImages),!E.isHidden(a.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(let _ in g){let E=this.sourceCaches[_];!!g[_]!=!!E.used&&E.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,h&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let a=Object.keys(this._changedImages);if(a.length){for(let h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,h={}){var g;this._checkLoaded();let _=this.serialize();if(a=h.transformStyle?h.transformStyle(_,a):a,((g=h.validate)===null||g===void 0||g)&&kv(this,o.z(a)))return!1;(a=o.bK(a)).layers=o.bI(a.layers);let E=o.bL(_,a),M=this._getOperationsToPerform(E);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(let L of M.operations)L();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){let h=[],g=[];for(let _ of a)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":h.push(()=>this.addLayer.apply(this,_.args));break;case"removeLayer":h.push(()=>this.removeLayer.apply(this,_.args));break;case"setPaintProperty":h.push(()=>this.setPaintProperty.apply(this,_.args));break;case"setLayoutProperty":h.push(()=>this.setLayoutProperty.apply(this,_.args));break;case"setFilter":h.push(()=>this.setFilter.apply(this,_.args));break;case"addSource":h.push(()=>this.addSource.apply(this,_.args));break;case"removeSource":h.push(()=>this.removeSource.apply(this,_.args));break;case"setLayerZoomRange":h.push(()=>this.setLayerZoomRange.apply(this,_.args));break;case"setLight":h.push(()=>this.setLight.apply(this,_.args));break;case"setGeoJSONSourceData":h.push(()=>this.setGeoJSONSourceData.apply(this,_.args));break;case"setGlyphs":h.push(()=>this.setGlyphs.apply(this,_.args));break;case"setSprite":h.push(()=>this.setSprite.apply(this,_.args));break;case"setTerrain":h.push(()=>this.map.setTerrain.apply(this,_.args));break;case"setSky":h.push(()=>this.setSky.apply(this,_.args));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":h.push(()=>this.setGlobalState.apply(this,_.args));break;case"setTransition":h.push(()=>{});break;default:g.push(_.command)}return{operations:h,unimplemented:g}}addImage(a,h){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,h),this._afterImageUpdated(a)}updateImage(a,h){this.imageManager.updateImage(a,h)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,h,g={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(o.z.source,`sources.${a}`,h,null,g))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);let _=this.sourceCaches[a]=new It(a,h,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:a})),_.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(let g in this._layers)if(this._layers[g].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${g}" is using it.`)));let h=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],h.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,h){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);let g=this.sourceCaches[a].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(h),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,h,g={}){this._checkLoaded();let _=a.id;if(this.getLayer(_))return void this.fire(new o.k(new Error(`Layer "${_}" already exists on this map.`)));let E;if(a.type==="custom"){if(kv(this,o.bM(a)))return;E=o.bJ(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(_,a.source),a=o.bK(a),a=o.e(a,{source:_})),this._validate(o.z.layer,`layers.${_}`,a,{arrayIndex:-1},g))return;E=o.bJ(a),this._validateLayer(E),E.setEventedParent(this,{layer:{id:_}})}let M=h?this._order.indexOf(h):this._order.length;if(h&&M===-1)this.fire(new o.k(new Error(`Cannot add layer "${_}" before non-existing layer "${h}".`)));else{if(this._order.splice(M,0,_),this._layerOrderChanged=!0,this._layers[_]=E,this._removedLayers[_]&&E.source&&E.type!=="custom"){let L=this._removedLayers[_];delete this._removedLayers[_],L.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(a,h){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===h)return;let g=this._order.indexOf(a);this._order.splice(g,1);let _=h?this._order.indexOf(h):this._order.length;h&&_===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${h}".`))):(this._order.splice(_,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();let h=this._layers[a];if(!h)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));h.setEventedParent(null);let g=this._order.indexOf(a);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=h,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],h.onRemove&&h.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,h,g){this._checkLoaded();let _=this.getLayer(a);_?_.minzoom===h&&_.maxzoom===g||(h!=null&&(_.minzoom=h),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,h,g={}){this._checkLoaded();let _=this.getLayer(a);if(_){if(!o.bH(_.filter,h))return h==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(o.z.filter,`layers.${_.id}.filter`,h,null,g)||(_.setFilter(o.bK(h)),this._updateLayer(_)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bK(this.getLayer(a).filter)}setLayoutProperty(a,h,g,_={}){this._checkLoaded();let E=this.getLayer(a);E?o.bH(E.getLayoutProperty(h),g)||(E.setLayoutProperty(h,g,_),this._updateLayer(E)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,h){let g=this.getLayer(a);if(g)return g.getLayoutProperty(h);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,h,g,_={}){this._checkLoaded();let E=this.getLayer(a);E?o.bH(E.getPaintProperty(h),g)||this._updatePaintProperty(E,h,g,_):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}_updatePaintProperty(a,h,g,_={}){a.setPaintProperty(h,g,_)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[a.id]=!0,this._serializedLayers=null}getPaintProperty(a,h){return this.getLayer(a).getPaintProperty(h)}setFeatureState(a,h){this._checkLoaded();let g=a.source,_=a.sourceLayer,E=this.sourceCaches[g];if(E===void 0)return void this.fire(new o.k(new Error(`The source '${g}' does not exist in the map's style.`)));let M=E.getSource().type;M==="geojson"&&_?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||_?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),E.setFeatureState(_,a.id,h)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,h){this._checkLoaded();let g=a.source,_=this.sourceCaches[g];if(_===void 0)return void this.fire(new o.k(new Error(`The source '${g}' does not exist in the map's style.`)));let E=_.getSource().type,M=E==="vector"?a.sourceLayer:void 0;E!=="vector"||M?h&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(M,a.id,h):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();let h=a.source,g=a.sourceLayer,_=this.sourceCaches[h];if(_!==void 0)return _.getSource().type!=="vector"||g?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(g,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let a=o.bN(this.sourceCaches,E=>E.serialize()),h=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,_=this.stylesheet;return o.bO({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:a,layers:h,terrain:g},E=>E!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){let h=M=>this._layers[M].type==="fill-extrusion",g={},_=[];for(let M=this._order.length-1;M>=0;M--){let L=this._order[M];if(h(L)){g[L]=M;for(let k of a){let B=k[L];if(B)for(let V of B)_.push(V)}}}_.sort((M,L)=>L.intersectionZ-M.intersectionZ);let E=[];for(let M=this._order.length-1;M>=0;M--){let L=this._order[M];if(h(L))for(let k=_.length-1;k>=0;k--){let B=_[k].feature;if(g[B.layer.id]<M)break;E.push(B),_.pop()}else for(let k of a){let B=k[L];if(B)for(let V of B)E.push(V.feature)}}return E}queryRenderedFeatures(a,h,g){h&&h.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",h.filter,null,h);let _={};if(h&&h.layers){if(!(Array.isArray(h.layers)||h.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let B of h.layers){let V=this._layers[B];if(!V)return this.fire(new o.k(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];_[V.source]=!0}}let E=[];h.availableImages=this._availableImages;let M=this._serializedAllLayers(),L=h.layers instanceof Set?h.layers:Array.isArray(h.layers)?new Set(h.layers):null,k=Object.assign(Object.assign({},h),{layers:L});for(let B in this.sourceCaches)h.layers&&!_[B]||E.push(Ze(this.sourceCaches[B],this._layers,M,a,k,g,this.map.terrain?(V,W,H)=>this.map.terrain.getElevation(V,W,H):void 0));return this.placement&&E.push(function(B,V,W,H,K,ee,ce){let ue={},fe=ee.queryRenderedSymbols(H),ve=[];for(let Se of Object.keys(fe).map(Number))ve.push(ce[Se]);ve.sort(rt);for(let Se of ve){let we=Se.featureIndex.lookupSymbolFeatures(fe[Se.bucketInstanceId],V,Se.bucketIndex,Se.sourceLayerIndex,K.filter,K.layers,K.availableImages,B);for(let Ie in we){let Pe=ue[Ie]=ue[Ie]||[],Ee=we[Ie];Ee.sort((Fe,Qe)=>{let Ve=Se.featureSortOrder;if(Ve){let Ge=Ve.indexOf(Fe.featureIndex);return Ve.indexOf(Qe.featureIndex)-Ge}return Qe.featureIndex-Fe.featureIndex});for(let Fe of Ee)Pe.push(Fe)}}return function(Se,we,Ie){for(let Pe in Se)for(let Ee of Se[Pe])at(Ee,Ie[we[Pe].source]);return Se}(ue,B,W)}(this._layers,M,this.sourceCaches,a,k,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(a,h){h&&h.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",h.filter,null,h);let g=this.sourceCaches[a];return g?function(_,E){let M=_.getRenderableIds().map(B=>_.getTileByID(B)),L=[],k={};for(let B=0;B<M.length;B++){let V=M[B],W=V.tileID.canonical.key;k[W]||(k[W]=!0,V.querySourceFeatures(L,E))}return L}(g,h):[]}getLight(){return this.light.getLight()}setLight(a,h={}){this._checkLoaded();let g=this.light.getLight(),_=!1;for(let M in a)if(!o.bH(a[M],g[M])){_=!0;break}if(!_)return;let E={now:x.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,h),this.light.updateTransitions(E)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,h={}){this._checkLoaded();let g=this.getSky(),_=!1;if(!a&&!g)return;if(a&&!g)_=!0;else if(!a&&g)_=!0;else for(let M in a)if(!o.bH(a[M],g[M])){_=!0;break}if(!_)return;let E={now:x.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,h),this.sky.updateTransitions(E)}_setProjectionInternal(a){let h=function(g){if(Array.isArray(g)){let _=new Dv({type:g});return{projection:_,transform:new Am,cameraHelper:new fA(_)}}switch(g){case"mercator":return{projection:new $r,transform:new Fn,cameraHelper:new Go};case"globe":{let _=new Dv({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new Am,cameraHelper:new fA(_)}}case"vertical-perspective":return{projection:new bm,transform:new Im,cameraHelper:new $o};default:return o.w(`Unknown projection name: ${g}. Falling back to mercator projection.`),{projection:new $r,transform:new Fn,cameraHelper:new Go}}}(a);this.projection=h.projection,this.map.migrateProjection(h.transform,h.cameraHelper);for(let g in this.sourceCaches)this.sourceCaches[g].reload()}_validate(a,h,g,_,E={}){return(!E||E.validate!==!1)&&kv(this,a.call(o.z,o.e({key:h,style:this.serialize(),value:g,styleSpec:o.v},_)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Rn().off(br,this._rtlPluginLoaded);for(let h in this._layers)this._layers[h].setEventedParent(null);for(let h in this.sourceCaches){let g=this.sourceCaches[h];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(let h in this.sourceCaches)this.sourceCaches[h].update(a,this.map.terrain)}_generateCollisionBoxes(){for(let a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,h,g,_,E=!1){let M=!1,L=!1,k={};for(let B of this._order){let V=this._layers[B];if(V.type!=="symbol")continue;if(!k[V.source]){let H=this.sourceCaches[V.source];k[V.source]=H.getRenderableIds(!0).map(K=>H.getTileByID(K)).sort((K,ee)=>ee.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(ee.tileID)?-1:1))}let W=this.crossTileSymbolIndex.addLayer(V,k[V.source],a.center.lng);M=M||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(x.now(),a.zoom))&&(this.pauseablePlacement=new fb(a,this.map.terrain,this._order,E,h,g,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(x.now()),L=!0),M&&this.pauseablePlacement.placement.setStale()),L||M)for(let B of this._order){let V=this._layers[B];V.type==="symbol"&&this.placement.updateLayerOpacities(V,k[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(x.now())}_releaseSymbolFadeTiles(){for(let a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,h){return o._(this,void 0,void 0,function*(){let g=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();let _=this.sourceCaches[h.source];return _&&_.setDependencies(h.tileID.key,h.type,h.icons),g})}getGlyphs(a,h){return o._(this,void 0,void 0,function*(){let g=yield this.glyphManager.getGlyphs(h.stacks),_=this.sourceCaches[h.source];return _&&_.setDependencies(h.tileID.key,h.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,h={}){this._checkLoaded(),a&&this._validate(o.z.glyphs,"glyphs",a,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,h,g={},_){this._checkLoaded();let E=[{id:a,url:h}],M=[...Z(this.stylesheet.sprite),...E];this._validate(o.z.sprite,"sprite",M,null,g)||(this.stylesheet.sprite=M,this._loadSprite(E,!0,_))}removeSprite(a){this._checkLoaded();let h=Z(this.stylesheet.sprite);if(h.find(g=>g.id===a)){if(this._spritesImagesIds[a])for(let g of this._spritesImagesIds[a])this.imageManager.removeImage(g),this._changedImages[g]=!0;h.splice(h.findIndex(g=>g.id===a),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return Z(this.stylesheet.sprite)}setSprite(a,h={},g){this._checkLoaded(),a&&this._validate(o.z.sprite,"sprite",a,null,h)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,g):(this._unloadSprite(),g&&g(null)))}}var kq=o.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class qq{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,h,g,_,E,M,L,k,B){this.context=a;let V=this.boundPaintVertexBuffers.length!==_.length;for(let W=0;!V&&W<_.length;W++)this.boundPaintVertexBuffers[W]!==_[W]&&(V=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==g||V||this.boundIndexBuffer!==E||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==B?this.freshBind(h,g,_,E,M,L,k,B):(a.bindVertexArray.set(this.vao),L&&L.bind(),E&&E.dynamicDraw&&E.bind(),k&&k.bind(),B&&B.bind())}freshBind(a,h,g,_,E,M,L,k){let B=a.numAttributes,V=this.context,W=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=_,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=k,h.enableAttributes(W,a);for(let H of g)H.enableAttributes(W,a);M&&M.enableAttributes(W,a),L&&L.enableAttributes(W,a),k&&k.enableAttributes(W,a),h.bind(),h.setVertexAttribPointers(W,a,E);for(let H of g)H.bind(),H.setVertexAttribPointers(W,a,E);M&&(M.bind(),M.setVertexAttribPointers(W,a,E)),_&&_.bind(),L&&(L.bind(),L.setVertexAttribPointers(W,a,E)),k&&(k.bind(),k.setVertexAttribPointers(W,a,E)),V.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let qv=(w,a,h,g,_)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:a,u_fog_color:h?h.properties.get("fog-color"):o.bf.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:h?h.calculateFogBlendOpacity(g):0,u_horizon_color:h?h.properties.get("horizon-color"):o.bf.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),vb={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Vf(w){let a=[];for(let h=0;h<w.length;h++){if(w[h]===null)continue;let g=w[h].split(" ");a.push(g.pop())}return a}class yb{constructor(a,h,g,_,E,M,L,k,B=[]){let V=a.gl;this.program=V.createProgram();let W=Vf(h.staticAttributes),H=g?g.getBinderAttributes():[],K=W.concat(H),ee=sl.prelude.staticUniforms?Vf(sl.prelude.staticUniforms):[],ce=L.staticUniforms?Vf(L.staticUniforms):[],ue=h.staticUniforms?Vf(h.staticUniforms):[],fe=g?g.getBinderUniforms():[],ve=ee.concat(ce).concat(ue).concat(fe),Se=[];for(let Ve of ve)Se.indexOf(Ve)<0&&Se.push(Ve);let we=g?g.defines():[];zl(V)&&we.unshift("#version 300 es"),E&&we.push("#define OVERDRAW_INSPECTOR;"),M&&we.push("#define TERRAIN3D;"),k&&we.push(k),B&&we.push(...B);let Ie=we.concat(sl.prelude.fragmentSource,L.fragmentSource,h.fragmentSource).join(`
`),Pe=we.concat(sl.prelude.vertexSource,L.vertexSource,h.vertexSource).join(`
`);zl(V)||(Ie=function(Ve){return Ve.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ie),Pe=function(Ve){return Ve.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Pe));let Ee=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ee,Ie),V.compileShader(Ee),!V.getShaderParameter(Ee,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(Ee)}`);V.attachShader(this.program,Ee);let Fe=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Fe,Pe),V.compileShader(Fe),!V.getShaderParameter(Fe,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(Fe)}`);V.attachShader(this.program,Fe),this.attributes={};let Qe={};this.numAttributes=K.length;for(let Ve=0;Ve<this.numAttributes;Ve++)K[Ve]&&(V.bindAttribLocation(this.program,Ve,K[Ve]),this.attributes[K[Ve]]=Ve);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(Fe),V.deleteShader(Ee);for(let Ve=0;Ve<Se.length;Ve++){let Ge=Se[Ve];if(Ge&&!Qe[Ge]){let Xe=V.getUniformLocation(this.program,Ge);Xe&&(Qe[Ge]=Xe)}}this.fixedUniforms=_(a,Qe),this.terrainUniforms=((Ve,Ge)=>({u_depth:new o.bP(Ve,Ge.u_depth),u_terrain:new o.bP(Ve,Ge.u_terrain),u_terrain_dim:new o.bg(Ve,Ge.u_terrain_dim),u_terrain_matrix:new o.bR(Ve,Ge.u_terrain_matrix),u_terrain_unpack:new o.bS(Ve,Ge.u_terrain_unpack),u_terrain_exaggeration:new o.bg(Ve,Ge.u_terrain_exaggeration)}))(a,Qe),this.projectionUniforms=((Ve,Ge)=>({u_projection_matrix:new o.bR(Ve,Ge.u_projection_matrix),u_projection_tile_mercator_coords:new o.bS(Ve,Ge.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bS(Ve,Ge.u_projection_clipping_plane),u_projection_transition:new o.bg(Ve,Ge.u_projection_transition),u_projection_fallback_matrix:new o.bR(Ve,Ge.u_projection_fallback_matrix)}))(a,Qe),this.binderUniforms=g?g.getUniforms(a,Qe):[]}draw(a,h,g,_,E,M,L,k,B,V,W,H,K,ee,ce,ue,fe,ve,Se){let we=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(g),a.setStencilMode(_),a.setColorMode(E),a.setCullFace(M),k){a.activeTexture.set(we.TEXTURE2),we.bindTexture(we.TEXTURE_2D,k.depthTexture),a.activeTexture.set(we.TEXTURE3),we.bindTexture(we.TEXTURE_2D,k.texture);for(let Pe in this.terrainUniforms)this.terrainUniforms[Pe].set(k[Pe])}if(B)for(let Pe in B)this.projectionUniforms[vb[Pe]].set(B[Pe]);if(L)for(let Pe in this.fixedUniforms)this.fixedUniforms[Pe].set(L[Pe]);ue&&ue.setUniforms(a,this.binderUniforms,ee,{zoom:ce});let Ie=0;switch(h){case we.LINES:Ie=2;break;case we.TRIANGLES:Ie=3;break;case we.LINE_STRIP:Ie=1}for(let Pe of K.get()){let Ee=Pe.vaos||(Pe.vaos={});(Ee[V]||(Ee[V]=new qq)).bind(a,this,W,ue?ue.getPaintVertexBuffers():[],H,Pe.vertexOffset,fe,ve,Se),we.drawElements(h,Pe.primitiveLength*Ie,we.UNSIGNED_SHORT,Pe.primitiveOffset*Ie*2)}}}function Fv(w,a,h){let g=1/o.aC(h,1,a.transform.tileZoom),_=Math.pow(2,h.tileID.overscaledZ),E=h.tileSize*Math.pow(2,a.transform.tileZoom)/_,M=E*(h.tileID.canonical.x+h.tileID.wrap*_),L=E*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[g,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[M>>16,L>>16],u_pixel_coord_lower:[65535&M,65535&L]}}let ul=(w,a,h,g)=>{let _=w.style.light,E=_.properties.get("position"),M=[E.x,E.y,E.z],L=o.bV();_.properties.get("anchor")==="viewport"&&o.bW(L,w.transform.bearingInRadians),o.bX(M,M,L);let k=w.transform.transformLightDirection(M),B=_.properties.get("color");return{u_lightpos:M,u_lightpos_globe:k,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+a,u_opacity:h,u_fill_translate:g}},Fq=(w,a,h,g,_,E,M)=>o.e(ul(w,a,h,g),Fv(E,w,M),{u_height_factor:-Math.pow(2,_.overscaledZ)/M.tileSize/8}),jv=(w,a,h,g)=>o.e(Fv(a,w,h),{u_fill_translate:g}),Mm=(w,a)=>({u_world:w,u_fill_translate:a}),Cm=(w,a,h,g,_)=>o.e(jv(w,a,h,_),{u_world:g}),jq=(w,a,h,g,_)=>{let E=w.transform,M,L,k=0;if(h.paint.get("circle-pitch-alignment")==="map"){let B=o.aC(a,1,E.zoom);M=!0,L=[B,B],k=B/(o.$*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*_}else M=!1,L=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:L,u_globe_extrude_scale:k,u_translate:g}},zv=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),zq=w=>({u_viewport_size:[w.width,w.height]}),Gf=(w,a=1)=>({u_color:w,u_overlay:0,u_overlay_scale:a}),hA=(w,a,h,g)=>{let _=o.aC(w,1,a)/(o.$*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*g;return{u_extrude_scale:o.aC(w,1,a),u_intensity:h,u_globe_extrude_scale:_}},_b=(w,a,h,g)=>{let _=o.L();o.bY(_,0,w.width,w.height,0,0,1);let E=w.context.gl;return{u_matrix:_,u_world:[E.drawingBufferWidth,E.drawingBufferHeight],u_image:h,u_color_ramp:g,u_opacity:a.paint.get("heatmap-opacity")}},Uq=(w,a,h)=>{let g=h.paint.get("hillshade-accent-color"),_;switch(h.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}let E=h.getIlluminationProperties();for(let M=0;M<E.directionRadians.length;M++)h.paint.get("hillshade-illumination-anchor")==="viewport"&&(E.directionRadians[M]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:xb(0,a.tileID),u_exaggeration:h.paint.get("hillshade-exaggeration"),u_altitudes:E.altitudeRadians,u_azimuths:E.directionRadians,u_accent:g,u_method:_,u_highlights:E.highlightColor,u_shadows:E.shadowColor}},pA=(w,a)=>{let h=a.stride,g=o.L();return o.bY(g,0,o.$,-o.$,0,0,1),o.M(g,g,[0,-o.$,0]),{u_matrix:g,u_image:1,u_dimension:[h,h],u_zoom:w.overscaledZ,u_unpack:a.getUnpackVector()}};function xb(w,a){let h=Math.pow(2,a.canonical.z),g=a.canonical.y;return[new o.a1(0,g/h).toLngLat().lat,new o.a1(0,(g+1)/h).toLngLat().lat]}let dA=(w,a,h=0)=>({u_image:0,u_unpack:a.getUnpackVector(),u_dimension:[a.stride,a.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:h,u_opacity:w.paint.get("color-relief-opacity")}),Uv=(w,a,h,g)=>{let _=w.transform;return{u_translation:wb(w,a,h),u_ratio:g/o.aC(a,1,_.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},mA=(w,a,h,g,_)=>o.e(Uv(w,a,h,g),{u_image:0,u_image_height:_}),gA=(w,a,h,g,_)=>{let E=w.transform,M=bb(a,E);return{u_translation:wb(w,a,h),u_texsize:a.imageAtlasTexture.size,u_ratio:g/o.aC(a,1,E.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[M,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},$f=(w,a,h,g,_,E)=>{let M=w.lineAtlas,L=bb(a,w.transform),k=h.layout.get("line-cap")==="round",B=M.getDash(_.from,k),V=M.getDash(_.to,k),W=B.width*E.fromScale,H=V.width*E.toScale;return o.e(Uv(w,a,h,g),{u_patternscale_a:[L/W,-B.height/2],u_patternscale_b:[L/H,-V.height/2],u_sdfgamma:M.width/(256*Math.min(W,H)*w.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:V.y,u_mix:E.t})};function bb(w,a){return 1/o.aC(w,1,a.tileZoom)}function wb(w,a,h){return o.aD(w.transform,a,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}let Pm=(w,a,h,g,_)=>{return{u_tl_parent:w,u_scale_parent:a,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(M=g.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(E=g.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Bq(g.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var E,M};function Bq(w){w*=Math.PI/180;let a=Math.sin(w),h=Math.cos(w);return[(2*h+1)/3,(-Math.sqrt(3)*a-h+1)/3,(Math.sqrt(3)*a-h+1)/3]}let Rm=(w,a,h,g,_,E,M,L,k,B,V,W,H)=>{let K=M.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:K.width/K.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:L,u_coord_matrix:k,u_is_text:+V,u_pitch_with_map:+g,u_is_along_line:_,u_is_variable_anchor:E,u_texsize:W,u_texture:0,u_translation:B,u_pitched_scale:H}},vA=(w,a,h,g,_,E,M,L,k,B,V,W,H,K)=>{let ee=M.transform;return o.e(Rm(w,a,h,g,_,E,M,L,k,B,V,W,K),{u_gamma_scale:g?Math.cos(ee.pitch*Math.PI/180)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},Vq=(w,a,h,g,_,E,M,L,k,B,V,W,H)=>o.e(vA(w,a,h,g,_,E,M,L,k,B,!0,V,0,H),{u_texsize_icon:W,u_texture_icon:1}),yA=(w,a)=>({u_opacity:w,u_color:a}),_A=(w,a,h,g,_)=>o.e(function(E,M,L,k){let B=L.imageManager.getPattern(E.from.toString()),V=L.imageManager.getPattern(E.to.toString()),{width:W,height:H}=L.imageManager.getPixelSize(),K=Math.pow(2,k.tileID.overscaledZ),ee=k.tileSize*Math.pow(2,L.transform.tileZoom)/K,ce=ee*(k.tileID.canonical.x+k.tileID.wrap*K),ue=ee*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[W,H],u_mix:M.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/o.aC(k,1,L.transform.tileZoom),u_pixel_coord_upper:[ce>>16,ue>>16],u_pixel_coord_lower:[65535&ce,65535&ue]}}(h,_,a,g),{u_opacity:w}),Eb=(w,a)=>{},Sb={fillExtrusion:(w,a)=>({u_lightpos:new o.bT(w,a.u_lightpos),u_lightpos_globe:new o.bT(w,a.u_lightpos_globe),u_lightintensity:new o.bg(w,a.u_lightintensity),u_lightcolor:new o.bT(w,a.u_lightcolor),u_vertical_gradient:new o.bg(w,a.u_vertical_gradient),u_opacity:new o.bg(w,a.u_opacity),u_fill_translate:new o.bU(w,a.u_fill_translate)}),fillExtrusionPattern:(w,a)=>({u_lightpos:new o.bT(w,a.u_lightpos),u_lightpos_globe:new o.bT(w,a.u_lightpos_globe),u_lightintensity:new o.bg(w,a.u_lightintensity),u_lightcolor:new o.bT(w,a.u_lightcolor),u_vertical_gradient:new o.bg(w,a.u_vertical_gradient),u_height_factor:new o.bg(w,a.u_height_factor),u_opacity:new o.bg(w,a.u_opacity),u_fill_translate:new o.bU(w,a.u_fill_translate),u_image:new o.bP(w,a.u_image),u_texsize:new o.bU(w,a.u_texsize),u_pixel_coord_upper:new o.bU(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(w,a.u_pixel_coord_lower),u_scale:new o.bT(w,a.u_scale),u_fade:new o.bg(w,a.u_fade)}),fill:(w,a)=>({u_fill_translate:new o.bU(w,a.u_fill_translate)}),fillPattern:(w,a)=>({u_image:new o.bP(w,a.u_image),u_texsize:new o.bU(w,a.u_texsize),u_pixel_coord_upper:new o.bU(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(w,a.u_pixel_coord_lower),u_scale:new o.bT(w,a.u_scale),u_fade:new o.bg(w,a.u_fade),u_fill_translate:new o.bU(w,a.u_fill_translate)}),fillOutline:(w,a)=>({u_world:new o.bU(w,a.u_world),u_fill_translate:new o.bU(w,a.u_fill_translate)}),fillOutlinePattern:(w,a)=>({u_world:new o.bU(w,a.u_world),u_image:new o.bP(w,a.u_image),u_texsize:new o.bU(w,a.u_texsize),u_pixel_coord_upper:new o.bU(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(w,a.u_pixel_coord_lower),u_scale:new o.bT(w,a.u_scale),u_fade:new o.bg(w,a.u_fade),u_fill_translate:new o.bU(w,a.u_fill_translate)}),circle:(w,a)=>({u_camera_to_center_distance:new o.bg(w,a.u_camera_to_center_distance),u_scale_with_map:new o.bP(w,a.u_scale_with_map),u_pitch_with_map:new o.bP(w,a.u_pitch_with_map),u_extrude_scale:new o.bU(w,a.u_extrude_scale),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.bg(w,a.u_globe_extrude_scale),u_translate:new o.bU(w,a.u_translate)}),collisionBox:(w,a)=>({u_pixel_extrude_scale:new o.bU(w,a.u_pixel_extrude_scale)}),collisionCircle:(w,a)=>({u_viewport_size:new o.bU(w,a.u_viewport_size)}),debug:(w,a)=>({u_color:new o.bQ(w,a.u_color),u_overlay:new o.bP(w,a.u_overlay),u_overlay_scale:new o.bg(w,a.u_overlay_scale)}),depth:Eb,clippingMask:Eb,heatmap:(w,a)=>({u_extrude_scale:new o.bg(w,a.u_extrude_scale),u_intensity:new o.bg(w,a.u_intensity),u_globe_extrude_scale:new o.bg(w,a.u_globe_extrude_scale)}),heatmapTexture:(w,a)=>({u_matrix:new o.bR(w,a.u_matrix),u_world:new o.bU(w,a.u_world),u_image:new o.bP(w,a.u_image),u_color_ramp:new o.bP(w,a.u_color_ramp),u_opacity:new o.bg(w,a.u_opacity)}),hillshade:(w,a)=>({u_image:new o.bP(w,a.u_image),u_latrange:new o.bU(w,a.u_latrange),u_exaggeration:new o.bg(w,a.u_exaggeration),u_altitudes:new o.b_(w,a.u_altitudes),u_azimuths:new o.b_(w,a.u_azimuths),u_accent:new o.bQ(w,a.u_accent),u_method:new o.bP(w,a.u_method),u_shadows:new o.bZ(w,a.u_shadows),u_highlights:new o.bZ(w,a.u_highlights)}),hillshadePrepare:(w,a)=>({u_matrix:new o.bR(w,a.u_matrix),u_image:new o.bP(w,a.u_image),u_dimension:new o.bU(w,a.u_dimension),u_zoom:new o.bg(w,a.u_zoom),u_unpack:new o.bS(w,a.u_unpack)}),colorRelief:(w,a)=>({u_image:new o.bP(w,a.u_image),u_unpack:new o.bS(w,a.u_unpack),u_dimension:new o.bU(w,a.u_dimension),u_elevation_stops:new o.bP(w,a.u_elevation_stops),u_color_stops:new o.bP(w,a.u_color_stops),u_color_ramp_size:new o.bP(w,a.u_color_ramp_size),u_opacity:new o.bg(w,a.u_opacity)}),line:(w,a)=>({u_translation:new o.bU(w,a.u_translation),u_ratio:new o.bg(w,a.u_ratio),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(w,a.u_units_to_pixels)}),lineGradient:(w,a)=>({u_translation:new o.bU(w,a.u_translation),u_ratio:new o.bg(w,a.u_ratio),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(w,a.u_units_to_pixels),u_image:new o.bP(w,a.u_image),u_image_height:new o.bg(w,a.u_image_height)}),linePattern:(w,a)=>({u_translation:new o.bU(w,a.u_translation),u_texsize:new o.bU(w,a.u_texsize),u_ratio:new o.bg(w,a.u_ratio),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_image:new o.bP(w,a.u_image),u_units_to_pixels:new o.bU(w,a.u_units_to_pixels),u_scale:new o.bT(w,a.u_scale),u_fade:new o.bg(w,a.u_fade)}),lineSDF:(w,a)=>({u_translation:new o.bU(w,a.u_translation),u_ratio:new o.bg(w,a.u_ratio),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(w,a.u_units_to_pixels),u_patternscale_a:new o.bU(w,a.u_patternscale_a),u_patternscale_b:new o.bU(w,a.u_patternscale_b),u_sdfgamma:new o.bg(w,a.u_sdfgamma),u_image:new o.bP(w,a.u_image),u_tex_y_a:new o.bg(w,a.u_tex_y_a),u_tex_y_b:new o.bg(w,a.u_tex_y_b),u_mix:new o.bg(w,a.u_mix)}),raster:(w,a)=>({u_tl_parent:new o.bU(w,a.u_tl_parent),u_scale_parent:new o.bg(w,a.u_scale_parent),u_buffer_scale:new o.bg(w,a.u_buffer_scale),u_fade_t:new o.bg(w,a.u_fade_t),u_opacity:new o.bg(w,a.u_opacity),u_image0:new o.bP(w,a.u_image0),u_image1:new o.bP(w,a.u_image1),u_brightness_low:new o.bg(w,a.u_brightness_low),u_brightness_high:new o.bg(w,a.u_brightness_high),u_saturation_factor:new o.bg(w,a.u_saturation_factor),u_contrast_factor:new o.bg(w,a.u_contrast_factor),u_spin_weights:new o.bT(w,a.u_spin_weights),u_coords_top:new o.bS(w,a.u_coords_top),u_coords_bottom:new o.bS(w,a.u_coords_bottom)}),symbolIcon:(w,a)=>({u_is_size_zoom_constant:new o.bP(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(w,a.u_is_size_feature_constant),u_size_t:new o.bg(w,a.u_size_t),u_size:new o.bg(w,a.u_size),u_camera_to_center_distance:new o.bg(w,a.u_camera_to_center_distance),u_pitch:new o.bg(w,a.u_pitch),u_rotate_symbol:new o.bP(w,a.u_rotate_symbol),u_aspect_ratio:new o.bg(w,a.u_aspect_ratio),u_fade_change:new o.bg(w,a.u_fade_change),u_label_plane_matrix:new o.bR(w,a.u_label_plane_matrix),u_coord_matrix:new o.bR(w,a.u_coord_matrix),u_is_text:new o.bP(w,a.u_is_text),u_pitch_with_map:new o.bP(w,a.u_pitch_with_map),u_is_along_line:new o.bP(w,a.u_is_along_line),u_is_variable_anchor:new o.bP(w,a.u_is_variable_anchor),u_texsize:new o.bU(w,a.u_texsize),u_texture:new o.bP(w,a.u_texture),u_translation:new o.bU(w,a.u_translation),u_pitched_scale:new o.bg(w,a.u_pitched_scale)}),symbolSDF:(w,a)=>({u_is_size_zoom_constant:new o.bP(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(w,a.u_is_size_feature_constant),u_size_t:new o.bg(w,a.u_size_t),u_size:new o.bg(w,a.u_size),u_camera_to_center_distance:new o.bg(w,a.u_camera_to_center_distance),u_pitch:new o.bg(w,a.u_pitch),u_rotate_symbol:new o.bP(w,a.u_rotate_symbol),u_aspect_ratio:new o.bg(w,a.u_aspect_ratio),u_fade_change:new o.bg(w,a.u_fade_change),u_label_plane_matrix:new o.bR(w,a.u_label_plane_matrix),u_coord_matrix:new o.bR(w,a.u_coord_matrix),u_is_text:new o.bP(w,a.u_is_text),u_pitch_with_map:new o.bP(w,a.u_pitch_with_map),u_is_along_line:new o.bP(w,a.u_is_along_line),u_is_variable_anchor:new o.bP(w,a.u_is_variable_anchor),u_texsize:new o.bU(w,a.u_texsize),u_texture:new o.bP(w,a.u_texture),u_gamma_scale:new o.bg(w,a.u_gamma_scale),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_is_halo:new o.bP(w,a.u_is_halo),u_translation:new o.bU(w,a.u_translation),u_pitched_scale:new o.bg(w,a.u_pitched_scale)}),symbolTextAndIcon:(w,a)=>({u_is_size_zoom_constant:new o.bP(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(w,a.u_is_size_feature_constant),u_size_t:new o.bg(w,a.u_size_t),u_size:new o.bg(w,a.u_size),u_camera_to_center_distance:new o.bg(w,a.u_camera_to_center_distance),u_pitch:new o.bg(w,a.u_pitch),u_rotate_symbol:new o.bP(w,a.u_rotate_symbol),u_aspect_ratio:new o.bg(w,a.u_aspect_ratio),u_fade_change:new o.bg(w,a.u_fade_change),u_label_plane_matrix:new o.bR(w,a.u_label_plane_matrix),u_coord_matrix:new o.bR(w,a.u_coord_matrix),u_is_text:new o.bP(w,a.u_is_text),u_pitch_with_map:new o.bP(w,a.u_pitch_with_map),u_is_along_line:new o.bP(w,a.u_is_along_line),u_is_variable_anchor:new o.bP(w,a.u_is_variable_anchor),u_texsize:new o.bU(w,a.u_texsize),u_texsize_icon:new o.bU(w,a.u_texsize_icon),u_texture:new o.bP(w,a.u_texture),u_texture_icon:new o.bP(w,a.u_texture_icon),u_gamma_scale:new o.bg(w,a.u_gamma_scale),u_device_pixel_ratio:new o.bg(w,a.u_device_pixel_ratio),u_is_halo:new o.bP(w,a.u_is_halo),u_translation:new o.bU(w,a.u_translation),u_pitched_scale:new o.bg(w,a.u_pitched_scale)}),background:(w,a)=>({u_opacity:new o.bg(w,a.u_opacity),u_color:new o.bQ(w,a.u_color)}),backgroundPattern:(w,a)=>({u_opacity:new o.bg(w,a.u_opacity),u_image:new o.bP(w,a.u_image),u_pattern_tl_a:new o.bU(w,a.u_pattern_tl_a),u_pattern_br_a:new o.bU(w,a.u_pattern_br_a),u_pattern_tl_b:new o.bU(w,a.u_pattern_tl_b),u_pattern_br_b:new o.bU(w,a.u_pattern_br_b),u_texsize:new o.bU(w,a.u_texsize),u_mix:new o.bg(w,a.u_mix),u_pattern_size_a:new o.bU(w,a.u_pattern_size_a),u_pattern_size_b:new o.bU(w,a.u_pattern_size_b),u_scale_a:new o.bg(w,a.u_scale_a),u_scale_b:new o.bg(w,a.u_scale_b),u_pixel_coord_upper:new o.bU(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(w,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bg(w,a.u_tile_units_to_pixels)}),terrain:(w,a)=>({u_texture:new o.bP(w,a.u_texture),u_ele_delta:new o.bg(w,a.u_ele_delta),u_fog_matrix:new o.bR(w,a.u_fog_matrix),u_fog_color:new o.bQ(w,a.u_fog_color),u_fog_ground_blend:new o.bg(w,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bg(w,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bQ(w,a.u_horizon_color),u_horizon_fog_blend:new o.bg(w,a.u_horizon_fog_blend),u_is_globe_mode:new o.bg(w,a.u_is_globe_mode)}),terrainDepth:(w,a)=>({u_ele_delta:new o.bg(w,a.u_ele_delta)}),terrainCoords:(w,a)=>({u_texture:new o.bP(w,a.u_texture),u_terrain_coords_id:new o.bg(w,a.u_terrain_coords_id),u_ele_delta:new o.bg(w,a.u_ele_delta)}),projectionErrorMeasurement:(w,a)=>({u_input:new o.bg(w,a.u_input),u_output_expected:new o.bg(w,a.u_output_expected)}),atmosphere:(w,a)=>({u_sun_pos:new o.bT(w,a.u_sun_pos),u_atmosphere_blend:new o.bg(w,a.u_atmosphere_blend),u_globe_position:new o.bT(w,a.u_globe_position),u_globe_radius:new o.bg(w,a.u_globe_radius),u_inv_proj_matrix:new o.bR(w,a.u_inv_proj_matrix)}),sky:(w,a)=>({u_sky_color:new o.bQ(w,a.u_sky_color),u_horizon_color:new o.bQ(w,a.u_horizon_color),u_horizon:new o.bU(w,a.u_horizon),u_horizon_normal:new o.bU(w,a.u_horizon_normal),u_sky_horizon_blend:new o.bg(w,a.u_sky_horizon_blend),u_sky_blend:new o.bg(w,a.u_sky_blend)})};class xA{constructor(a,h,g){this.context=a;let _=a.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){let h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Bv={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ju{constructor(a,h,g,_){this.length=h.length,this.attributes=g,this.itemSize=h.bytesPerElement,this.dynamicDraw=_,this.context=a;let E=a.gl;this.buffer=E.createBuffer(),a.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);let h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,h){for(let g=0;g<this.attributes.length;g++){let _=h.attributes[this.attributes[g].name];_!==void 0&&a.enableVertexAttribArray(_)}}setVertexAttribPointers(a,h,g){for(let _=0;_<this.attributes.length;_++){let E=this.attributes[_],M=h.attributes[E.name];M!==void 0&&a.vertexAttribPointer(M,E.components,a[Bv[E.type]],!1,this.itemSize,E.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class fn{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Tb extends fn{getDefault(){return o.bf.transparent}set(a){let h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Ib extends fn{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class bA extends fn{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Ab extends fn{getDefault(){return[!0,!0,!0,!0]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Hf extends fn{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Mb extends fn{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Gq extends fn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){let h=this.current;(a.func!==h.func||a.ref!==h.ref||a.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class $q extends fn{getDefault(){let a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Hq extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;a?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=a,this.dirty=!1}}class Wq extends fn{getDefault(){return[0,1]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class wA extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;a?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=a,this.dirty=!1}}class Zq extends fn{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class EA extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;a?h.enable(h.BLEND):h.disable(h.BLEND),this.current=a,this.dirty=!1}}class Vv extends fn{getDefault(){let a=this.gl;return[a.ONE,a.ZERO]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Gv extends fn{getDefault(){return o.bf.transparent}set(a){let h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class $v extends fn{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Cb extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;a?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=a,this.dirty=!1}}class Wf extends fn{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Om extends fn{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class dp extends fn{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Ts extends fn{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class SA extends fn{getDefault(){let a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){let h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class TA extends fn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Pb extends fn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Zf extends fn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.bindTexture(h.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Hv extends fn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Wv extends fn{getDefault(){return null}set(a){let h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Lm extends fn{getDefault(){return null}set(a){var h;if(a===this.current&&!this.dirty)return;let g=this.gl;zl(g)?g.bindVertexArray(a):(h=g.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class Zv extends fn{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class IA extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class mp extends fn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Lc extends fn{constructor(a,h){super(a),this.context=a,this.parent=h}getDefault(){return null}}class AA extends Lc{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Rb extends Lc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Zr extends Lc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}let Dm="Framebuffer is not complete";class Yq{constructor(a,h,g,_,E){this.context=a,this.width=h,this.height=g;let M=a.gl,L=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new AA(a,L),_)this.depthAttachment=E?new Zr(a,L):new Rb(a,L);else if(E)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(Dm)}destroy(){let a=this.context.gl,h=this.colorAttachment.get();if(h&&a.deleteTexture(h),this.depthAttachment){let g=this.depthAttachment.get();g&&a.deleteRenderbuffer(g)}a.deleteFramebuffer(this.framebuffer)}}class MA{constructor(a){var h,g;if(this.gl=a,this.clearColor=new Tb(this),this.clearDepth=new Ib(this),this.clearStencil=new bA(this),this.colorMask=new Ab(this),this.depthMask=new Hf(this),this.stencilMask=new Mb(this),this.stencilFunc=new Gq(this),this.stencilOp=new $q(this),this.stencilTest=new Hq(this),this.depthRange=new Wq(this),this.depthTest=new wA(this),this.depthFunc=new Zq(this),this.blend=new EA(this),this.blendFunc=new Vv(this),this.blendColor=new Gv(this),this.blendEquation=new $v(this),this.cullFace=new Cb(this),this.cullFaceSide=new Wf(this),this.frontFace=new Om(this),this.program=new dp(this),this.activeTexture=new Ts(this),this.viewport=new SA(this),this.bindFramebuffer=new TA(this),this.bindRenderbuffer=new Pb(this),this.bindTexture=new Zf(this),this.bindVertexBuffer=new Hv(this),this.bindElementBuffer=new Wv(this),this.bindVertexArray=new Lm(this),this.pixelStoreUnpack=new Zv(this),this.pixelStoreUnpackPremultiplyAlpha=new IA(this),this.pixelStoreUnpackFlipY=new mp(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),zl(a)){this.HALF_FLOAT=a.HALF_FLOAT;let _=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=a.RGBA16F)!==null&&h!==void 0?h:_==null?void 0:_.RGBA16F_EXT,this.RGB16F=(g=a.RGB16F)!==null&&g!==void 0?g:_==null?void 0:_.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");let _=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=_==null?void 0:_.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,h){return new xA(this,a,h)}createVertexBuffer(a,h,g){return new ju(this,a,h,g)}createRenderbuffer(a,h,g){let _=this.gl,E=_.createRenderbuffer();return this.bindRenderbuffer.set(E),_.renderbufferStorage(_.RENDERBUFFER,a,h,g),this.bindRenderbuffer.set(null),E}createFramebuffer(a,h,g,_){return new Yq(this,a,h,g,_)}clear({color:a,depth:h,stencil:g}){let _=this.gl,E=0;a&&(E|=_.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(E|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),g!==void 0&&(E|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),_.clear(E)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bH(a.blendFunction,Qn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return zl(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var h;return zl(this.gl)?this.gl.deleteVertexArray(a):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let Dc;function CA(w,a,h,g,_){let E=w.context,M=w.transform,L=E.gl,k=w.useProgram("collisionBox"),B=[],V=0,W=0;for(let fe=0;fe<g.length;fe++){let ve=g[fe],Se=a.getTile(ve).getBucket(h);if(!Se)continue;let we=_?Se.textCollisionBox:Se.iconCollisionBox,Ie=Se.collisionCircleArray;Ie.length>0&&(B.push({circleArray:Ie,circleOffset:W,coord:ve}),V+=Ie.length/4,W=V),we&&k.draw(E,L.LINES,Ar.disabled,nn.disabled,w.colorModeForRenderPass(),cr.disabled,zv(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve),M.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,null,w.transform.zoom,null,null,we.collisionVertexBuffer)}if(!_||!B.length)return;let H=w.useProgram("collisionCircle"),K=new o.b$;K.resize(4*V),K._trim();let ee=0;for(let fe of B)for(let ve=0;ve<fe.circleArray.length/4;ve++){let Se=4*ve,we=fe.circleArray[Se+0],Ie=fe.circleArray[Se+1],Pe=fe.circleArray[Se+2],Ee=fe.circleArray[Se+3];K.emplace(ee++,we,Ie,Pe,Ee,0),K.emplace(ee++,we,Ie,Pe,Ee,1),K.emplace(ee++,we,Ie,Pe,Ee,2),K.emplace(ee++,we,Ie,Pe,Ee,3)}(!Dc||Dc.length<2*V)&&(Dc=function(fe){let ve=2*fe,Se=new o.c1;Se.resize(ve),Se._trim();for(let we=0;we<ve;we++){let Ie=6*we;Se.uint16[Ie+0]=4*we+0,Se.uint16[Ie+1]=4*we+1,Se.uint16[Ie+2]=4*we+2,Se.uint16[Ie+3]=4*we+2,Se.uint16[Ie+4]=4*we+3,Se.uint16[Ie+5]=4*we+0}return Se}(V));let ce=E.createIndexBuffer(Dc,!0),ue=E.createVertexBuffer(K,o.c0.members,!0);for(let fe of B){let ve=zq(w.transform);H.draw(E,L.TRIANGLES,Ar.disabled,nn.disabled,w.colorModeForRenderPass(),cr.disabled,ve,w.style.map.terrain&&w.style.map.terrain.getTerrainData(fe.coord),null,h.id,ue,ce,o.aM.simpleSegment(0,2*fe.circleOffset,fe.circleArray.length,fe.circleArray.length/2),null,w.transform.zoom,null,null,null)}ue.destroy(),ce.destroy()}let Kq=o.ag(new Float32Array(16));function PA(w,a,h,g,_,E){let{horizontalAlign:M,verticalAlign:L}=o.aH(w);return new o.P((-(M-.5)*a/_+g[0])*E,(-(L-.5)*h/_+g[1])*E)}function Xq(w,a,h,g,_,E){let M=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let L=g.mult(E);h||(L=L.rotate(-_));let k=M.add(L);return An(k.x,k.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(h){let L=yn(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(w),k=Math.atan(L.y/L.x)+(L.x<0?Math.PI:0);return w.add(g.rotate(k))}return w.add(g)}function Ob(w,a,h,g,_,E,M,L,k,B,V,W){let H=w.text.placedSymbolArray,K=w.text.dynamicLayoutVertexArray,ee=w.icon.dynamicLayoutVertexArray,ce={};K.clear();for(let ue=0;ue<H.length;ue++){let fe=H.get(ue),ve=fe.hidden||!fe.crossTileID||w.allowVerticalPlacement&&!fe.placedOrientation?null:g[fe.crossTileID];if(ve){let Se=new o.P(fe.anchorX,fe.anchorY),we={getElevation:W,width:_.width,height:_.height,pitchedLabelPlaneMatrix:E,pitchWithMap:h,transform:_,tileAnchorPoint:Se,translation:B,unwrappedTileID:V},Ie=h?Ss(Se.x,Se.y,we):yn(Se.x,Se.y,we),Pe=gt(_.cameraToCenterDistance,Ie.signedDistanceFromCamera),Ee=o.ap(w.textSizeData,L,fe)*Pe/o.aB;h&&(Ee*=w.tilePixelRatio/M);let{width:Fe,height:Qe,anchor:Ve,textOffset:Ge,textBoxScale:Xe}=ve,vt=PA(Ve,Fe,Qe,Ge,Xe,Ee),bt=_.getPitchedTextCorrection(Se.x+B[0],Se.y+B[1],V),st=Xq(Ie.point,we,a,vt,-_.bearingInRadians,bt),Zt=w.allowVerticalPlacement&&fe.placedOrientation===o.ao.vertical?Math.PI/2:0;for(let Dr=0;Dr<fe.numGlyphs;Dr++)o.av(K,st,Zt);k&&fe.associatedIconIndex>=0&&(ce[fe.associatedIconIndex]={shiftedAnchor:st,angle:Zt})}else jl(fe.numGlyphs,K)}if(k){ee.clear();let ue=w.icon.placedSymbolArray;for(let fe=0;fe<ue.length;fe++){let ve=ue.get(fe);if(ve.hidden)jl(ve.numGlyphs,ee);else{let Se=ce[fe];if(Se)for(let we=0;we<ve.numGlyphs;we++)o.av(ee,Se.shiftedAnchor,Se.angle);else jl(ve.numGlyphs,ee)}}w.icon.dynamicLayoutVertexBuffer.updateData(ee)}w.text.dynamicLayoutVertexBuffer.updateData(K)}function Yv(w,a,h){return h.iconsInText&&a?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Nm(w,a,h,g,_,E,M,L,k,B,V,W,H){let K=w.context,ee=K.gl,ce=w.transform,ue=L==="map",fe=k==="map",ve=L!=="viewport"&&h.layout.get("symbol-placement")!=="point",Se=ue&&!fe&&!ve,we=!h.layout.get("symbol-sort-key").isConstant(),Ie=!1,Pe=w.getDepthModeForSublayer(0,Ar.ReadOnly),Ee=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Fe=[],Qe=ce.getCircleRadiusCorrection();for(let Ve of g){let Ge=a.getTile(Ve),Xe=Ge.getBucket(h);if(!Xe)continue;let vt=_?Xe.text:Xe.icon;if(!vt||!vt.segments.get().length||!vt.hasVisibleVertices)continue;let bt=vt.programConfigurations.get(h.id),st=_||Xe.sdfIcons,Zt=_?Xe.textSizeData:Xe.iconSizeData,Dr=fe||ce.pitch!==0,hn=w.useProgram(Yv(st,_,Xe),bt),Ln=o.an(Zt,ce.zoom),Mn=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ve),li,yi,Or,Dn,$i=[0,0],eo=null;if(_)yi=Ge.glyphAtlasTexture,Or=ee.LINEAR,li=Ge.glyphAtlasTexture.size,Xe.iconsInText&&($i=Ge.imageAtlasTexture.size,eo=Ge.imageAtlasTexture,Dn=Dr||w.options.rotating||w.options.zooming||Zt.kind==="composite"||Zt.kind==="camera"?ee.LINEAR:ee.NEAREST);else{let Hi=h.layout.get("icon-size").constantOr(0)!==1||Xe.iconsNeedLinear;yi=Ge.imageAtlasTexture,Or=st||w.options.rotating||w.options.zooming||Hi||Dr?ee.LINEAR:ee.NEAREST,li=Ge.imageAtlasTexture.size}let ho=o.aC(Ge,1,w.transform.zoom),sa=Pr(ue,w.transform,ho),ml=o.L();o.aq(ml,sa);let kc=ar(fe,ue,w.transform,ho),qc=o.aD(ce,Ge,E,M),Ap=ce.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Mp=Ee&&Xe.hasTextData(),th=h.layout.get("icon-text-fit")!=="none"&&Mp&&Xe.hasIconData();if(ve){let Hi=w.style.map.terrain?(Ms,Wi)=>w.style.map.terrain.getElevation(Ve,Ms,Wi):null,to=h.layout.get("text-rotation-alignment")==="map";Sn(Xe,w,_,sa,ml,fe,B,to,Ve.toUnwrapped(),ce.width,ce.height,qc,Hi)}let rh=_&&Ee||th,Ca=ve||rh?Kq:fe?sa:w.transform.clipSpaceToPixelsMatrix,gl=st&&h.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0,la;la=st?Xe.iconsInText?Vq(Zt.kind,Ln,Se,fe,ve,rh,w,Ca,kc,qc,li,$i,Qe):vA(Zt.kind,Ln,Se,fe,ve,rh,w,Ca,kc,qc,_,li,0,Qe):Rm(Zt.kind,Ln,Se,fe,ve,rh,w,Ca,kc,qc,_,li,Qe);let Fc={program:hn,buffers:vt,uniformValues:la,projectionData:Ap,atlasTexture:yi,atlasTextureIcon:eo,atlasInterpolation:Or,atlasInterpolationIcon:Dn,isSDF:st,hasHalo:gl};if(we&&Xe.canOverlap){Ie=!0;let Hi=vt.segments.get();for(let to of Hi)Fe.push({segments:new o.aM([to]),sortKey:to.sortKey,state:Fc,terrainData:Mn})}else Fe.push({segments:vt.segments,sortKey:0,state:Fc,terrainData:Mn})}Ie&&Fe.sort((Ve,Ge)=>Ve.sortKey-Ge.sortKey);for(let Ve of Fe){let Ge=Ve.state;if(K.activeTexture.set(ee.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,ee.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(K.activeTexture.set(ee.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Ge.isSDF){let Xe=Ge.uniformValues;Ge.hasHalo&&(Xe.u_is_halo=1,km(Ge.buffers,Ve.segments,h,w,Ge.program,Pe,V,W,Xe,Ge.projectionData,Ve.terrainData)),Xe.u_is_halo=0}km(Ge.buffers,Ve.segments,h,w,Ge.program,Pe,V,W,Ge.uniformValues,Ge.projectionData,Ve.terrainData)}}function km(w,a,h,g,_,E,M,L,k,B,V){let W=g.context;_.draw(W,W.gl.TRIANGLES,E,M,L,cr.backCCW,k,V,B,h.id,w.layoutVertexBuffer,w.indexBuffer,a,h.paint,g.transform.zoom,w.programConfigurations.get(h.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Lb(w,a,h,g,_){let E=w.context,M=E.gl,L=nn.disabled,k=new Qn([M.ONE,M.ONE],o.bf.transparent,[!0,!0,!0,!0]),B=a.getBucket(h);if(!B)return;let V=g.key,W=h.heatmapFbos.get(V);W||(W=qm(E,a.tileSize,a.tileSize),h.heatmapFbos.set(V,W)),E.bindFramebuffer.set(W.framebuffer),E.viewport.set([0,0,a.tileSize,a.tileSize]),E.clear({color:o.bf.transparent});let H=B.programConfigurations.get(h.id),K=w.useProgram("heatmap",H,!_),ee=w.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ce=w.style.map.terrain.getTerrainData(g);K.draw(E,M.TRIANGLES,Ar.disabled,L,k,cr.disabled,hA(a,w.transform.zoom,h.paint.get("heatmap-intensity"),1),ce,ee,h.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,h.paint,w.transform.zoom,H)}function RA(w,a,h,g,_){let E=w.context,M=E.gl,L=w.transform;E.setColorMode(w.colorModeForRenderPass());let k=Fm(E,a),B=h.key,V=a.heatmapFbos.get(B);if(!V)return;E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,V.colorAttachment.get()),E.activeTexture.set(M.TEXTURE1),k.bind(M.LINEAR,M.CLAMP_TO_EDGE);let W=L.getProjectionData({overscaledTileID:h,applyTerrainMatrix:_,applyGlobeMatrix:!g});w.useProgram("heatmapTexture").draw(E,M.TRIANGLES,Ar.disabled,nn.disabled,w.colorModeForRenderPass(),cr.disabled,_b(w,a,0,1),null,W,a.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,a.paint,L.zoom),V.destroy(),a.heatmapFbos.delete(B)}function qm(w,a,h){var g,_;let E=w.gl,M=E.createTexture();E.bindTexture(E.TEXTURE_2D,M),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR);let L=(g=w.HALF_FLOAT)!==null&&g!==void 0?g:E.UNSIGNED_BYTE,k=(_=w.RGBA16F)!==null&&_!==void 0?_:E.RGBA;E.texImage2D(E.TEXTURE_2D,0,k,a,h,0,E.RGBA,L,null);let B=w.createFramebuffer(a,h,!1,!1);return B.colorAttachment.set(M),B}function Fm(w,a){return a.colorRampTexture||(a.colorRampTexture=new o.T(w,a.colorRamp,w.gl.RGBA)),a.colorRampTexture}function jm(w,a,h,g,_){if(!h||!g||!g.imageAtlas)return;let E=g.imageAtlas.patternPositions,M=E[h.to.toString()],L=E[h.from.toString()];if(!M&&L&&(M=L),!L&&M&&(L=M),!M||!L){let k=_.getPaintProperty(a);M=E[k],L=E[k]}M&&L&&w.setConstantPatternPositions(M,L)}function Kv(w,a,h,g,_,E,M,L){let k=w.context.gl,B="fill-pattern",V=h.paint.get(B),W=V&&V.constantOr(1),H=h.getCrossfadeParameters(),K,ee,ce,ue,fe,ve=w.transform,Se=h.paint.get("fill-translate"),we=h.paint.get("fill-translate-anchor");M?(ee=W&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=k.LINES):(ee=W?"fillPattern":"fill",K=k.TRIANGLES);let Ie=V.constantOr(null);for(let Pe of g){let Ee=a.getTile(Pe);if(W&&!Ee.patternsLoaded())continue;let Fe=Ee.getBucket(h);if(!Fe)continue;let Qe=Fe.programConfigurations.get(h.id),Ve=w.useProgram(ee,Qe),Ge=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Pe);W&&(w.context.activeTexture.set(k.TEXTURE0),Ee.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Qe.updatePaintBuffers(H)),jm(Qe,B,Ie,Ee,h);let Xe=ve.getProjectionData({overscaledTileID:Pe,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),vt=o.aD(ve,Ee,Se,we);if(M){ue=Fe.indexBuffer2,fe=Fe.segments2;let st=[k.drawingBufferWidth,k.drawingBufferHeight];ce=ee==="fillOutlinePattern"&&W?Cm(w,H,Ee,st,vt):Mm(st,vt)}else ue=Fe.indexBuffer,fe=Fe.segments,ce=W?jv(w,H,Ee,vt):{u_fill_translate:vt};let bt=w.stencilModeForClipping(Pe);Ve.draw(w.context,K,_,bt,E,cr.backCCW,ce,Ge,Xe,h.id,Fe.layoutVertexBuffer,ue,fe,h.paint,w.transform.zoom,Qe)}}function Db(w,a,h,g,_,E,M,L){let k=w.context,B=k.gl,V="fill-extrusion-pattern",W=h.paint.get(V),H=W.constantOr(1),K=h.getCrossfadeParameters(),ee=h.paint.get("fill-extrusion-opacity"),ce=W.constantOr(null),ue=w.transform;for(let fe of g){let ve=a.getTile(fe),Se=ve.getBucket(h);if(!Se)continue;let we=w.style.map.terrain&&w.style.map.terrain.getTerrainData(fe),Ie=Se.programConfigurations.get(h.id),Pe=w.useProgram(H?"fillExtrusionPattern":"fillExtrusion",Ie);H&&(w.context.activeTexture.set(B.TEXTURE0),ve.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ie.updatePaintBuffers(K));let Ee=ue.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!L,applyTerrainMatrix:!0});jm(Ie,V,ce,ve,h);let Fe=o.aD(ue,ve,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Qe=h.paint.get("fill-extrusion-vertical-gradient"),Ve=H?Fq(w,Qe,ee,Fe,fe,K,ve):ul(w,Qe,ee,Fe);Pe.draw(k,k.gl.TRIANGLES,_,E,M,cr.backCCW,Ve,we,Ee,h.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,h.paint,w.transform.zoom,Ie,w.style.map.terrain&&Se.centroidVertexBuffer)}}function Yf(w,a,h,g,_,E,M,L,k){var B;let V=w.style.projection,W=w.context,H=w.transform,K=W.gl,ee=[`#define NUM_ILLUMINATION_SOURCES ${h.paint.get("hillshade-highlight-color").values.length}`],ce=w.useProgram("hillshade",null,!1,ee),ue=!w.options.moving;for(let fe of g){let ve=a.getTile(fe),Se=ve.fbo;if(!Se)continue;let we=V.getMeshFromTileID(W,fe.canonical,L,!0,"raster"),Ie=(B=w.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(fe);W.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Se.colorAttachment.get());let Pe=H.getProjectionData({overscaledTileID:fe,aligned:ue,applyGlobeMatrix:!k,applyTerrainMatrix:!0});ce.draw(W,K.TRIANGLES,E,_[fe.overscaledZ],M,cr.backCCW,Uq(w,ve,h),Ie,Pe,h.id,we.vertexBuffer,we.indexBuffer,we.segments)}}function Nb(w,a,h,g,_,E,M,L,k){var B;let V=w.style.projection,W=w.context,H=w.transform,K=W.gl,ee=w.useProgram("colorRelief"),ce=!w.options.moving,ue=!0,fe=0;for(let ve of g){let Se=a.getTile(ve),we=Se.dem;if(ue){let Ve=K.getParameter(K.MAX_TEXTURE_SIZE),{elevationTexture:Ge,colorTexture:Xe}=h.getColorRampTextures(W,Ve,we.getUnpackVector());W.activeTexture.set(K.TEXTURE1),Ge.bind(K.NEAREST,K.CLAMP_TO_EDGE),W.activeTexture.set(K.TEXTURE4),Xe.bind(K.LINEAR,K.CLAMP_TO_EDGE),ue=!1,fe=Ge.size[0]}if(!we||!we.data)continue;let Ie=we.stride,Pe=we.getPixels();if(W.activeTexture.set(K.TEXTURE0),W.pixelStoreUnpackPremultiplyAlpha.set(!1),Se.demTexture=Se.demTexture||w.getTileTexture(Ie),Se.demTexture){let Ve=Se.demTexture;Ve.update(Pe,{premultiply:!1}),Ve.bind(K.LINEAR,K.CLAMP_TO_EDGE)}else Se.demTexture=new o.T(W,Pe,K.RGBA,{premultiply:!1}),Se.demTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);let Ee=V.getMeshFromTileID(W,ve.canonical,L,!0,"raster"),Fe=(B=w.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(ve),Qe=H.getProjectionData({overscaledTileID:ve,aligned:ce,applyGlobeMatrix:!k,applyTerrainMatrix:!0});ee.draw(W,K.TRIANGLES,E,_[ve.overscaledZ],M,cr.backCCW,dA(h,Se.dem,fe),Fe,Qe,h.id,Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}}let Xv=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function Kf(w,a,h,g,_,E,M,L,k=!1,B=!1){let V=g[g.length-1].overscaledZ,W=w.context,H=W.gl,K=w.useProgram("raster"),ee=w.transform,ce=w.style.projection,ue=w.colorModeForRenderPass(),fe=!w.options.moving;for(let ve of g){let Se=w.getDepthModeForSublayer(ve.overscaledZ-V,h.paint.get("raster-opacity")===1?Ar.ReadWrite:Ar.ReadOnly,H.LESS),we=a.getTile(ve);we.registerFadeDuration(h.paint.get("raster-fade-duration"));let Ie=a.findLoadedParent(ve,0),Pe=a.findLoadedSibling(ve),Ee=kb(we,Ie||Pe||null,a,h,w.transform,w.style.map.terrain),Fe,Qe,Ve=h.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;W.activeTexture.set(H.TEXTURE0),we.texture.bind(Ve,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(H.TEXTURE1),Ie?(Ie.texture.bind(Ve,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Fe=Math.pow(2,Ie.tileID.overscaledZ-we.tileID.overscaledZ),Qe=[we.tileID.canonical.x*Fe%1,we.tileID.canonical.y*Fe%1]):we.texture.bind(Ve,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),we.texture.useMipmap&&W.extTextureFilterAnisotropic&&w.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);let Ge=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve),Xe=ee.getProjectionData({overscaledTileID:ve,aligned:fe,applyGlobeMatrix:!B,applyTerrainMatrix:!0}),vt=Pm(Qe||[0,0],Fe||1,Ee,h,L),bt=ce.getMeshFromTileID(W,ve.canonical,E,M,"raster");K.draw(W,H.TRIANGLES,Se,_?_[ve.overscaledZ]:nn.disabled,ue,k?cr.frontCCW:cr.backCCW,vt,Ge,Xe,h.id,bt.vertexBuffer,bt.indexBuffer,bt.segments)}}function kb(w,a,h,g,_,E){let M=g.paint.get("raster-fade-duration");if(!E&&M>0){let L=x.now(),k=(L-w.timeAdded)/M,B=a?(L-a.timeAdded)/M:-1,V=h.getSource(),W=tt(_,{tileSize:V.tileSize,roundZoom:V.roundZoom}),H=!a||Math.abs(a.tileID.overscaledZ-W)>Math.abs(w.tileID.overscaledZ-W),K=H&&w.refreshedUponExpiration?1:o.ah(H?k:1-B,0,1);return w.refreshedUponExpiration&&k>=1&&(w.refreshedUponExpiration=!1),a?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}let OA=new o.bf(1,0,0,1),LA=new o.bf(0,1,0,1),Qv=new o.bf(0,0,1,1),qb=new o.bf(1,0,1,1),Qq=new o.bf(0,1,1,1);function Fb(w,a,h,g){Vl(w,0,a+h/2,w.transform.width,h,g)}function vi(w,a,h,g){Vl(w,a-h/2,0,h,w.transform.height,g)}function Vl(w,a,h,g,_,E){let M=w.context,L=M.gl;L.enable(L.SCISSOR_TEST),L.scissor(a*w.pixelRatio,h*w.pixelRatio,g*w.pixelRatio,_*w.pixelRatio),M.clear({color:E}),L.disable(L.SCISSOR_TEST)}function Is(w,a,h){let g=w.context,_=g.gl,E=w.useProgram("debug"),M=Ar.disabled,L=nn.disabled,k=w.colorModeForRenderPass(),B="$debug",V=w.style.map.terrain&&w.style.map.terrain.getTerrainData(h);g.activeTexture.set(_.TEXTURE0);let W=a.getTileByID(h.key).latestRawTileData,H=Math.floor((W&&W.byteLength||0)/1024),K=a.getTile(h).tileSize,ee=512/Math.min(K,512)*(h.overscaledZ/w.transform.zoom)*.5,ce=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(ce+=` => ${h.overscaledZ}`),function(fe,ve){fe.initDebugOverlayCanvas();let Se=fe.debugOverlayCanvas,we=fe.context.gl,Ie=fe.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,Se.width,Se.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(ve,5,5),Ie.strokeText(ve,5,5),fe.debugOverlayTexture.update(Se),fe.debugOverlayTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE)}(w,`${ce} ${H}kB`);let ue=w.transform.getProjectionData({overscaledTileID:h,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(g,_.TRIANGLES,M,L,Qn.alphaBlended,cr.disabled,Gf(o.bf.transparent,ee),null,ue,B,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),E.draw(g,_.LINE_STRIP,M,L,k,cr.disabled,Gf(o.bf.red),V,ue,B,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Jv(w,a,h,g){let{isRenderingGlobe:_}=g,E=w.context,M=E.gl,L=w.transform,k=w.colorModeForRenderPass(),B=w.getDepthModeFor3D(),V=w.useProgram("terrain");E.bindFramebuffer.set(null),E.viewport.set([0,0,w.width,w.height]);for(let W of h){let H=a.getTerrainMesh(W.tileID),K=w.renderToTexture.getTexture(W),ee=a.getTerrainData(W.tileID);E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,K.texture);let ce=a.getMeshFrameDelta(L.zoom),ue=L.calculateFogMatrix(W.tileID.toUnwrapped()),fe=qv(ce,ue,w.style.sky,L.pitch,_),ve=L.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(E,M.TRIANGLES,B,nn.disabled,k,cr.backCCW,fe,ee,ve,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}function zm(w,a){if(!a.mesh){let h=new o.aL;h.emplaceBack(-1,-1),h.emplaceBack(1,-1),h.emplaceBack(1,1),h.emplaceBack(-1,1);let g=new o.aN;g.emplaceBack(0,1,2),g.emplaceBack(0,2,3),a.mesh=new Ff(w.createVertexBuffer(h,Oc.members),w.createIndexBuffer(g),o.aM.simpleSegment(0,0,h.length,g.length))}return a.mesh}class DA{constructor(a,h){this.context=new MA(a),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=It.maxUnderzooming+It.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new cp}resize(a,h,g){if(this.width=Math.floor(a*g),this.height=Math.floor(h*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let _ of this.style._order)this.style._layers[_].resize()}setup(){let a=this.context,h=new o.aL;h.emplaceBack(0,0),h.emplaceBack(o.$,0),h.emplaceBack(0,o.$),h.emplaceBack(o.$,o.$),this.tileExtentBuffer=a.createVertexBuffer(h,Oc.members),this.tileExtentSegments=o.aM.simpleSegment(0,0,4,2);let g=new o.aL;g.emplaceBack(0,0),g.emplaceBack(o.$,0),g.emplaceBack(0,o.$),g.emplaceBack(o.$,o.$),this.debugBuffer=a.createVertexBuffer(g,Oc.members),this.debugSegments=o.aM.simpleSegment(0,0,4,5);let _=new o.c6;_.emplaceBack(0,0,0,0),_.emplaceBack(o.$,0,o.$,0),_.emplaceBack(0,o.$,0,o.$),_.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=a.createVertexBuffer(_,kq.members),this.rasterBoundsSegments=o.aM.simpleSegment(0,0,4,2);let E=new o.aL;E.emplaceBack(0,0),E.emplaceBack(o.$,0),E.emplaceBack(0,o.$),E.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(E,Oc.members),this.rasterBoundsSegmentsPosOnly=o.aM.simpleSegment(0,0,4,5);let M=new o.aL;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(M,Oc.members),this.viewportSegments=o.aM.simpleSegment(0,0,4,2);let L=new o.c7;L.emplaceBack(0),L.emplaceBack(1),L.emplaceBack(3),L.emplaceBack(2),L.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(L);let k=new o.aN;k.emplaceBack(1,0,2),k.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(k);let B=this.context.gl;this.stencilClearMode=new nn({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.tileExtentMesh=new Ff(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let a=this.context,h=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let g=o.L();o.bY(g,0,this.width,this.height,0,0,1),o.N(g,g,[h.drawingBufferWidth,h.drawingBufferHeight,0]);let _={mainMatrix:g,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:g};this.useProgram("clippingMask",null,!0).draw(a,h.TRIANGLES,Ar.disabled,this.stencilClearMode,Qn.disabled,cr.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,h,g){if(this.currentStencilSource===a.source||!a.isTileClipped()||!h||!h.length)return;this.currentStencilSource=a.source,this.nextStencilID+h.length>256&&this.clearStencil();let _=this.context;_.setColorMode(Qn.disabled),_.setDepthMode(Ar.disabled);let E={};for(let M of h)E[M.key]=this.nextStencilID++;this._renderTileMasks(E,h,g,!0),this._renderTileMasks(E,h,g,!1),this._tileClippingMaskIDs=E}_renderTileMasks(a,h,g,_){let E=this.context,M=E.gl,L=this.style.projection,k=this.transform,B=this.useProgram("clippingMask");for(let V of h){let W=a[V.key],H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),K=L.getMeshFromTileID(this.context,V.canonical,_,!0,"stencil"),ee=k.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!g,applyTerrainMatrix:!0});B.draw(E,M.TRIANGLES,Ar.disabled,new nn({func:M.ALWAYS,mask:0},W,255,M.KEEP,M.KEEP,M.REPLACE),Qn.disabled,g?cr.disabled:cr.backCCW,null,H,ee,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){let a=this.context,h=a.gl,g=this.style.projection,_=this.transform,E=this.useProgram("depth"),M=this.getDepthModeFor3D(),L=xe(_,{tileSize:_.tileSize});for(let k of L){let B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k),V=g.getMeshFromTileID(this.context,k.canonical,!0,!0,"raster"),W=_.getProjectionData({overscaledTileID:k,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(a,h.TRIANGLES,M,nn.disabled,Qn.disabled,cr.backCCW,null,B,W,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let a=this.nextStencilID++,h=this.context.gl;return new nn({func:h.NOTEQUAL,mask:255},a,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(a){let h=this.context.gl;return new nn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,h.KEEP,h.KEEP,h.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){let h=this.context.gl,g=a.sort((M,L)=>L.overscaledZ-M.overscaledZ),_=g[g.length-1].overscaledZ,E=g[0].overscaledZ-_+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();let M={};for(let L=0;L<E;L++)M[L+_]=new nn({func:h.GEQUAL,mask:255},L+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=E,[M,g]}return[{[_]:nn.disabled},g]}stencilConfigForOverlapTwoPass(a){let h=this.context.gl,g=a.sort((M,L)=>L.overscaledZ-M.overscaledZ),_=g[g.length-1].overscaledZ,E=g[0].overscaledZ-_+1;if(this.clearStencil(),E>1){let M={},L={};for(let k=0;k<E;k++)M[k+_]=new nn({func:h.GREATER,mask:255},E+1+k,255,h.KEEP,h.KEEP,h.REPLACE),L[k+_]=new nn({func:h.GREATER,mask:255},1+k,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID=2*E+1,[M,L,g]}return this.nextStencilID=3,[{[_]:new nn({func:h.GREATER,mask:255},2,255,h.KEEP,h.KEEP,h.REPLACE)},{[_]:new nn({func:h.GREATER,mask:255},1,255,h.KEEP,h.KEEP,h.REPLACE)},g]}colorModeForRenderPass(){let a=this.context.gl;return this._showOverdrawInspector?new Qn([a.CONSTANT_COLOR,a.ONE],new o.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Qn.unblended:Qn.alphaBlended}getDepthModeForSublayer(a,h,g){if(!this.opaquePassEnabledForLayer())return Ar.disabled;let _=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Ar(g||this.context.gl.LEQUAL,h,[_,_])}getDepthModeFor3D(){return new Ar(this.context.gl.LEQUAL,Ar.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,h){var g,_;this.style=a,this.options=h,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(x.now()),this.imageManager.beginFrame();let E=this.style._order,M=this.style.sourceCaches,L={},k={},B={},V={isRenderingToTexture:!1,isRenderingGlobe:((g=a.projection)===null||g===void 0?void 0:g.transitionState)>0};for(let H in M){let K=M[H];K.used&&K.prepare(this.context),L[H]=K.getVisibleCoordinates(!1),k[H]=L[H].slice().reverse(),B[H]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<E.length;H++)if(this.style._layers[E[H]].is3D()){this.opaquePassCutoff=H;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let H of E){let K=this.style._layers[H];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;let ee=k[K.source];(K.type==="custom"||ee.length)&&this.renderLayer(this,M[K.source],K,ee,V)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:H=>this.useProgram(H)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?o.bf.black:o.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(H,K){let ee=H.context,ce=ee.gl,ue=((Pe,Ee,Fe)=>{let Qe=Math.cos(Ee.rollInRadians),Ve=Math.sin(Ee.rollInRadians),Ge=Ae(Ee),Xe=Ee.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Pe.properties.get("sky-color"),u_horizon_color:Pe.properties.get("horizon-color"),u_horizon:[(Ee.width/2-Ge*Ve)*Fe,(Ee.height/2+Ge*Qe)*Fe],u_horizon_normal:[-Ve,Qe],u_sky_horizon_blend:Pe.properties.get("sky-horizon-blend")*Ee.height/2*Fe,u_sky_blend:Xe}})(K,H.style.map.transform,H.pixelRatio),fe=new Ar(ce.LEQUAL,Ar.ReadWrite,[0,1]),ve=nn.disabled,Se=H.colorModeForRenderPass(),we=H.useProgram("sky"),Ie=zm(ee,K);we.draw(ee,ce.TRIANGLES,fe,ve,Se,cr.disabled,ue,null,void 0,"sky",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){let H=this.style._layers[E[this.currentLayer]],K=M[H.source],ee=L[H.source];this._renderTileClippingMasks(H,ee,!1),this.renderLayer(this,K,H,ee,V)}this.renderPass="translucent";let W=!1;for(this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){let H=this.style._layers[E[this.currentLayer]],K=M[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H,V))continue;this.opaquePassEnabledForLayer()||W||(W=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let ee=(H.type==="symbol"?B:k)[H.source];this._renderTileClippingMasks(H,L[H.source],!!this.renderToTexture),this.renderLayer(this,K,H,ee,V)}if(V.isRenderingGlobe&&function(H,K,ee){let ce=H.context,ue=ce.gl,fe=H.useProgram("atmosphere"),ve=new Ar(ue.LEQUAL,Ar.ReadOnly,[0,1]),Se=H.transform,we=function(Xe,vt){let bt=Xe.properties.get("position"),st=[-bt.x,-bt.y,-bt.z],Zt=o.ag(new Float64Array(16));return Xe.properties.get("anchor")==="map"&&(o.b6(Zt,Zt,vt.rollInRadians),o.b7(Zt,Zt,-vt.pitchInRadians),o.b6(Zt,Zt,vt.bearingInRadians),o.b7(Zt,Zt,vt.center.lat*Math.PI/180),o.bz(Zt,Zt,-vt.center.lng*Math.PI/180)),o.c5(st,st,Zt),st}(ee,H.transform),Ie=Se.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Pe=K.properties.get("atmosphere-blend")*Ie.projectionTransition;if(Pe===0)return;let Ee=hp(Se.worldSize,Se.center.lat),Fe=Se.inverseProjectionMatrix,Qe=new Float64Array(4);Qe[3]=1,o.aw(Qe,Qe,Se.modelViewProjectionMatrix),Qe[0]/=Qe[3],Qe[1]/=Qe[3],Qe[2]/=Qe[3],Qe[3]=1,o.aw(Qe,Qe,Fe),Qe[0]/=Qe[3],Qe[1]/=Qe[3],Qe[2]/=Qe[3],Qe[3]=1;let Ve=((Xe,vt,bt,st,Zt)=>({u_sun_pos:Xe,u_atmosphere_blend:vt,u_globe_position:bt,u_globe_radius:st,u_inv_proj_matrix:Zt}))(we,Pe,[Qe[0],Qe[1],Qe[2]],Ee,Fe),Ge=zm(ce,K);fe.draw(ce,ue.TRIANGLES,ve,nn.disabled,Qn.alphaBlended,cr.disabled,Ve,null,null,"atmosphere",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let H=function(K,ee){let ce=null,ue=Object.values(K._layers).flatMap(we=>we.source&&!we.isHidden(ee)?[K.sourceCaches[we.source]]:[]),fe=ue.filter(we=>we.getSource().type==="vector"),ve=ue.filter(we=>we.getSource().type!=="vector"),Se=we=>{(!ce||ce.getSource().maxzoom<we.getSource().maxzoom)&&(ce=we)};return fe.forEach(we=>Se(we)),ce||ve.forEach(we=>Se(we)),ce}(this.style,this.transform.zoom);H&&function(K,ee,ce){for(let ue=0;ue<ce.length;ue++)Is(K,ee,ce[ue])}(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){let K=H.transform.padding;Fb(H,H.transform.height-(K.top||0),3,OA),Fb(H,K.bottom||0,3,LA),vi(H,K.left||0,3,Qv),vi(H,H.transform.width-(K.right||0),3,qb);let ee=H.transform.centerPoint;(function(ce,ue,fe,ve){Vl(ce,ue-1,fe-10,2,20,ve),Vl(ce,ue-10,fe-1,20,2,ve)})(H,ee.x,H.transform.height-ee.y,Qq)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;let h=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix,_=this.terrainFacilitator.dirty;_||(_=a?!o.c8(h,g):!o.c9(h,g)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(o.ca(h,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(E,M){let L=E.context,k=L.gl,B=E.transform,V=Qn.unblended,W=new Ar(k.LEQUAL,Ar.ReadWrite,[0,1]),H=M.sourceCache.getRenderableTiles(),K=E.useProgram("terrainDepth");L.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),L.clear({color:o.bf.transparent,depth:1});for(let ee of H){let ce=M.getTerrainMesh(ee.tileID),ue=M.getTerrainData(ee.tileID),fe=B.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ve={u_ele_delta:M.getMeshFrameDelta(B.zoom)};K.draw(L,k.TRIANGLES,W,nn.disabled,V,cr.backCCW,ve,ue,fe,"terrain",ce.vertexBuffer,ce.indexBuffer,ce.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,E.width,E.height])}(this,this.style.map.terrain),function(E,M){let L=E.context,k=L.gl,B=E.transform,V=Qn.unblended,W=new Ar(k.LEQUAL,Ar.ReadWrite,[0,1]),H=M.getCoordsTexture(),K=M.sourceCache.getRenderableTiles(),ee=E.useProgram("terrainCoords");L.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),L.clear({color:o.bf.transparent,depth:1}),M.coordsIndex=[];for(let ce of K){let ue=M.getTerrainMesh(ce.tileID),fe=M.getTerrainData(ce.tileID);L.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,H.texture);let ve={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(B.zoom)},Se=B.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ee.draw(L,k.TRIANGLES,W,nn.disabled,V,cr.backCCW,ve,fe,Se,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments),M.coordsIndex.push(ce.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,E.width,E.height])}(this,this.style.map.terrain))}renderLayer(a,h,g,_,E){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||(_||[]).length)&&(this.id=g.id,o.cb(g)?function(M,L,k,B,V,W){if(M.renderPass!=="translucent")return;let{isRenderingToTexture:H}=W,K=nn.disabled,ee=M.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ce,ue,fe,ve,Se,we,Ie,Pe,Ee){let Fe=ue.transform,Qe=ue.style.map.terrain,Ve=Se==="map",Ge=we==="map";for(let Xe of ce){let vt=ve.getTile(Xe),bt=vt.getBucket(fe);if(!bt||!bt.text||!bt.text.segments.get().length)continue;let st=o.an(bt.textSizeData,Fe.zoom),Zt=o.aC(vt,1,ue.transform.zoom),Dr=Pr(Ve,ue.transform,Zt),hn=fe.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(st){let Ln=Math.pow(2,Fe.zoom-vt.tileID.overscaledZ),Mn=Qe?(li,yi)=>Qe.getElevation(Xe,li,yi):null;Ob(bt,Ve,Ge,Ee,Fe,Dr,Ln,st,hn,o.aD(Fe,vt,Ie,Pe),Xe.toUnwrapped(),Mn)}}}(B,M,k,L,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),V),k.paint.get("icon-opacity").constantOr(1)!==0&&Nm(M,L,k,B,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),K,ee,H),k.paint.get("text-opacity").constantOr(1)!==0&&Nm(M,L,k,B,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),K,ee,H),L.map.showCollisionBoxes&&(CA(M,L,k,B,!0),CA(M,L,k,B,!1))}(a,h,g,_,this.style.placement.variableOffsets,E):o.cc(g)?function(M,L,k,B,V){if(M.renderPass!=="translucent")return;let{isRenderingToTexture:W}=V,H=k.paint.get("circle-opacity"),K=k.paint.get("circle-stroke-width"),ee=k.paint.get("circle-stroke-opacity"),ce=!k.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(K.constantOr(1)===0||ee.constantOr(1)===0))return;let ue=M.context,fe=ue.gl,ve=M.transform,Se=M.getDepthModeForSublayer(0,Ar.ReadOnly),we=nn.disabled,Ie=M.colorModeForRenderPass(),Pe=[],Ee=ve.getCircleRadiusCorrection();for(let Fe=0;Fe<B.length;Fe++){let Qe=B[Fe],Ve=L.getTile(Qe),Ge=Ve.getBucket(k);if(!Ge)continue;let Xe=k.paint.get("circle-translate"),vt=k.paint.get("circle-translate-anchor"),bt=o.aD(ve,Ve,Xe,vt),st=Ge.programConfigurations.get(k.id),Zt=M.useProgram("circle",st),Dr=Ge.layoutVertexBuffer,hn=Ge.indexBuffer,Ln=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Qe),Mn={programConfiguration:st,program:Zt,layoutVertexBuffer:Dr,indexBuffer:hn,uniformValues:jq(M,Ve,k,bt,Ee),terrainData:Ln,projectionData:ve.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!W,applyTerrainMatrix:!0})};if(ce){let li=Ge.segments.get();for(let yi of li)Pe.push({segments:new o.aM([yi]),sortKey:yi.sortKey,state:Mn})}else Pe.push({segments:Ge.segments,sortKey:0,state:Mn})}ce&&Pe.sort((Fe,Qe)=>Fe.sortKey-Qe.sortKey);for(let Fe of Pe){let{programConfiguration:Qe,program:Ve,layoutVertexBuffer:Ge,indexBuffer:Xe,uniformValues:vt,terrainData:bt,projectionData:st}=Fe.state;Ve.draw(ue,fe.TRIANGLES,Se,we,Ie,cr.backCCW,vt,bt,st,k.id,Ge,Xe,Fe.segments,k.paint,M.transform.zoom,Qe)}}(a,h,g,_,E):o.cd(g)?function(M,L,k,B,V){if(k.paint.get("heatmap-opacity")===0)return;let W=M.context,{isRenderingToTexture:H,isRenderingGlobe:K}=V;if(M.style.map.terrain){for(let ee of B){let ce=L.getTile(ee);L.hasRenderableParent(ee)||(M.renderPass==="offscreen"?Lb(M,ce,k,ee,K):M.renderPass==="translucent"&&RA(M,k,ee,H,K))}W.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?function(ee,ce,ue,fe){let ve=ee.context,Se=ve.gl,we=ee.transform,Ie=nn.disabled,Pe=new Qn([Se.ONE,Se.ONE],o.bf.transparent,[!0,!0,!0,!0]);(function(Ee,Fe,Qe){let Ve=Ee.gl;Ee.activeTexture.set(Ve.TEXTURE1),Ee.viewport.set([0,0,Fe.width/4,Fe.height/4]);let Ge=Qe.heatmapFbos.get(o.c2);Ge?(Ve.bindTexture(Ve.TEXTURE_2D,Ge.colorAttachment.get()),Ee.bindFramebuffer.set(Ge.framebuffer)):(Ge=qm(Ee,Fe.width/4,Fe.height/4),Qe.heatmapFbos.set(o.c2,Ge))})(ve,ee,ue),ve.clear({color:o.bf.transparent});for(let Ee=0;Ee<fe.length;Ee++){let Fe=fe[Ee];if(ce.hasRenderableParent(Fe))continue;let Qe=ce.getTile(Fe),Ve=Qe.getBucket(ue);if(!Ve)continue;let Ge=Ve.programConfigurations.get(ue.id),Xe=ee.useProgram("heatmap",Ge),vt=we.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),bt=we.getCircleRadiusCorrection();Xe.draw(ve,Se.TRIANGLES,Ar.disabled,Ie,Pe,cr.backCCW,hA(Qe,we.zoom,ue.paint.get("heatmap-intensity"),bt),null,vt,ue.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,ue.paint,we.zoom,Ge)}ve.viewport.set([0,0,ee.width,ee.height])}(M,L,k,B):M.renderPass==="translucent"&&function(ee,ce){let ue=ee.context,fe=ue.gl;ue.setColorMode(ee.colorModeForRenderPass());let ve=ce.heatmapFbos.get(o.c2);ve&&(ue.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,ve.colorAttachment.get()),ue.activeTexture.set(fe.TEXTURE1),Fm(ue,ce).bind(fe.LINEAR,fe.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(ue,fe.TRIANGLES,Ar.disabled,nn.disabled,ee.colorModeForRenderPass(),cr.disabled,_b(ee,ce,0,1),null,null,ce.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,ce.paint,ee.transform.zoom))}(M,k)}(a,h,g,_,E):o.ce(g)?function(M,L,k,B,V){if(M.renderPass!=="translucent")return;let{isRenderingToTexture:W}=V,H=k.paint.get("line-opacity"),K=k.paint.get("line-width");if(H.constantOr(1)===0||K.constantOr(1)===0)return;let ee=M.getDepthModeForSublayer(0,Ar.ReadOnly),ce=M.colorModeForRenderPass(),ue=k.paint.get("line-dasharray"),fe=k.paint.get("line-pattern"),ve=fe.constantOr(1),Se=k.paint.get("line-gradient"),we=k.getCrossfadeParameters(),Ie=ve?"linePattern":ue?"lineSDF":Se?"lineGradient":"line",Pe=M.context,Ee=Pe.gl,Fe=M.transform,Qe=!0;for(let Ve of B){let Ge=L.getTile(Ve);if(ve&&!Ge.patternsLoaded())continue;let Xe=Ge.getBucket(k);if(!Xe)continue;let vt=Xe.programConfigurations.get(k.id),bt=M.context.program.get(),st=M.useProgram(Ie,vt),Zt=Qe||st.program!==bt,Dr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Ve),hn=fe.constantOr(null);if(hn&&Ge.imageAtlas){let Or=Ge.imageAtlas,Dn=Or.patternPositions[hn.to.toString()],$i=Or.patternPositions[hn.from.toString()];Dn&&$i&&vt.setConstantPatternPositions(Dn,$i)}let Ln=Fe.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),Mn=Fe.getPixelScale(),li=ve?gA(M,Ge,k,Mn,we):ue?$f(M,Ge,k,Mn,ue,we):Se?mA(M,Ge,k,Mn,Xe.lineClipsArray.length):Uv(M,Ge,k,Mn);if(ve)Pe.activeTexture.set(Ee.TEXTURE0),Ge.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),vt.updatePaintBuffers(we);else if(ue&&(Zt||M.lineAtlas.dirty))Pe.activeTexture.set(Ee.TEXTURE0),M.lineAtlas.bind(Pe);else if(Se){let Or=Xe.gradients[k.id],Dn=Or.texture;if(k.gradientVersion!==Or.version){let $i=256;if(k.stepInterpolant){let eo=L.getSource().maxzoom,ho=Ve.canonical.z===eo?Math.ceil(1<<M.transform.maxZoom-Ve.canonical.z):1;$i=o.ah(o.c3(Xe.maxLineLength/o.$*1024*ho),256,Pe.maxTextureSize)}Or.gradient=o.c4({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:$i,image:Or.gradient||void 0,clips:Xe.lineClipsArray}),Or.texture?Or.texture.update(Or.gradient):Or.texture=new o.T(Pe,Or.gradient,Ee.RGBA),Or.version=k.gradientVersion,Dn=Or.texture}Pe.activeTexture.set(Ee.TEXTURE0),Dn.bind(k.stepInterpolant?Ee.NEAREST:Ee.LINEAR,Ee.CLAMP_TO_EDGE)}let yi=M.stencilModeForClipping(Ve);st.draw(Pe,Ee.TRIANGLES,ee,yi,ce,cr.disabled,li,Dr,Ln,k.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,k.paint,M.transform.zoom,vt,Xe.layoutVertexBuffer2),Qe=!1}}(a,h,g,_,E):o.cf(g)?function(M,L,k,B,V){let W=k.paint.get("fill-color"),H=k.paint.get("fill-opacity");if(H.constantOr(1)===0)return;let{isRenderingToTexture:K}=V,ee=M.colorModeForRenderPass(),ce=k.paint.get("fill-pattern"),ue=M.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&W.constantOr(o.bf.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===ue){let fe=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?Ar.ReadWrite:Ar.ReadOnly);Kv(M,L,k,B,fe,ee,!1,K)}if(M.renderPass==="translucent"&&k.paint.get("fill-antialias")){let fe=M.getDepthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,Ar.ReadOnly);Kv(M,L,k,B,fe,ee,!0,K)}}(a,h,g,_,E):o.cg(g)?function(M,L,k,B,V){let W=k.paint.get("fill-extrusion-opacity");if(W===0)return;let{isRenderingToTexture:H}=V;if(M.renderPass==="translucent"){let K=new Ar(M.context.gl.LEQUAL,Ar.ReadWrite,M.depthRangeFor3D);if(W!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Db(M,L,k,B,K,nn.disabled,Qn.disabled,H),Db(M,L,k,B,K,M.stencilModeFor3D(),M.colorModeForRenderPass(),H);else{let ee=M.colorModeForRenderPass();Db(M,L,k,B,K,nn.disabled,ee,H)}}}(a,h,g,_,E):o.ch(g)?function(M,L,k,B,V){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;let{isRenderingToTexture:W}=V,H=M.context,K=M.style.projection.useSubdivision,ee=M.getDepthModeForSublayer(0,Ar.ReadOnly),ce=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(ue,fe,ve,Se,we,Ie,Pe){let Ee=ue.context,Fe=Ee.gl;for(let Qe of ve){let Ve=fe.getTile(Qe),Ge=Ve.dem;if(!Ge||!Ge.data||!Ve.needsHillshadePrepare)continue;let Xe=Ge.dim,vt=Ge.stride,bt=Ge.getPixels();if(Ee.activeTexture.set(Fe.TEXTURE1),Ee.pixelStoreUnpackPremultiplyAlpha.set(!1),Ve.demTexture=Ve.demTexture||ue.getTileTexture(vt),Ve.demTexture){let Zt=Ve.demTexture;Zt.update(bt,{premultiply:!1}),Zt.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE)}else Ve.demTexture=new o.T(Ee,bt,Fe.RGBA,{premultiply:!1}),Ve.demTexture.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE);Ee.activeTexture.set(Fe.TEXTURE0);let st=Ve.fbo;if(!st){let Zt=new o.T(Ee,{width:Xe,height:Xe,data:null},Fe.RGBA);Zt.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),st=Ve.fbo=Ee.createFramebuffer(Xe,Xe,!0,!1),st.colorAttachment.set(Zt.texture)}Ee.bindFramebuffer.set(st.framebuffer),Ee.viewport.set([0,0,Xe,Xe]),ue.useProgram("hillshadePrepare").draw(Ee,Fe.TRIANGLES,we,Ie,Pe,cr.disabled,pA(Ve.tileID,Ge),null,null,Se.id,ue.rasterBoundsBuffer,ue.quadTriangleIndexBuffer,ue.rasterBoundsSegments),Ve.needsHillshadePrepare=!1}})(M,L,B,k,ee,nn.disabled,ce),H.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(K){let[ue,fe,ve]=M.stencilConfigForOverlapTwoPass(B);Yf(M,L,k,ve,ue,ee,ce,!1,W),Yf(M,L,k,ve,fe,ee,ce,!0,W)}else{let[ue,fe]=M.getStencilConfigForOverlapAndUpdateStencilID(B);Yf(M,L,k,fe,ue,ee,ce,!1,W)}}(a,h,g,_,E):o.ci(g)?function(M,L,k,B,V){if(M.renderPass!=="translucent"||!B.length)return;let{isRenderingToTexture:W}=V,H=M.style.projection.useSubdivision,K=M.getDepthModeForSublayer(0,Ar.ReadOnly),ee=M.colorModeForRenderPass();if(H){let[ce,ue,fe]=M.stencilConfigForOverlapTwoPass(B);Nb(M,L,k,fe,ce,K,ee,!1,W),Nb(M,L,k,fe,ue,K,ee,!0,W)}else{let[ce,ue]=M.getStencilConfigForOverlapAndUpdateStencilID(B);Nb(M,L,k,ue,ce,K,ee,!1,W)}}(a,h,g,_,E):o.cj(g)?function(M,L,k,B,V){if(M.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!B.length)return;let{isRenderingToTexture:W}=V,H=L.getSource(),K=M.style.projection.useSubdivision;if(H instanceof Sr)Kf(M,L,k,B,null,!1,!1,H.tileCoords,H.flippedWindingOrder,W);else if(K){let[ee,ce,ue]=M.stencilConfigForOverlapTwoPass(B);Kf(M,L,k,ue,ee,!1,!0,Xv,!1,W),Kf(M,L,k,ue,ce,!0,!0,Xv,!1,W)}else{let[ee,ce]=M.getStencilConfigForOverlapAndUpdateStencilID(B);Kf(M,L,k,ce,ee,!1,!0,Xv,!1,W)}}(a,h,g,_,E):o.ck(g)?function(M,L,k,B,V){let W=k.paint.get("background-color"),H=k.paint.get("background-opacity");if(H===0)return;let{isRenderingToTexture:K}=V,ee=M.context,ce=ee.gl,ue=M.style.projection,fe=M.transform,ve=fe.tileSize,Se=k.paint.get("background-pattern");if(M.isPatternMissing(Se))return;let we=!Se&&W.a===1&&H===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==we)return;let Ie=nn.disabled,Pe=M.getDepthModeForSublayer(0,we==="opaque"?Ar.ReadWrite:Ar.ReadOnly),Ee=M.colorModeForRenderPass(),Fe=M.useProgram(Se?"backgroundPattern":"background"),Qe=B||xe(fe,{tileSize:ve,terrain:M.style.map.terrain});Se&&(ee.activeTexture.set(ce.TEXTURE0),M.imageManager.bind(M.context));let Ve=k.getCrossfadeParameters();for(let Ge of Qe){let Xe=fe.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),vt=Se?_A(H,M,Se,{tileID:Ge,tileSize:ve},Ve):yA(H,W),bt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Ge),st=ue.getMeshFromTileID(ee,Ge.canonical,!1,!0,"raster");Fe.draw(ee,ce.TRIANGLES,Pe,Ie,Ee,cr.backCCW,vt,bt,Xe,k.id,st.vertexBuffer,st.indexBuffer,st.segments)}}(a,0,g,_,E):o.cl(g)&&function(M,L,k,B){let{isRenderingGlobe:V}=B,W=M.context,H=k.implementation,K=M.style.projection,ee=M.transform,ce=ee.getProjectionDataForCustomLayer(V),ue={farZ:ee.farZ,nearZ:ee.nearZ,fov:ee.fov*Math.PI/180,modelViewProjectionMatrix:ee.modelViewProjectionMatrix,projectionMatrix:ee.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:ce},fe=H.renderingMode?H.renderingMode:"2d";if(M.renderPass==="offscreen"){let ve=H.prerender;ve&&(M.setCustomLayerDefaults(),W.setColorMode(M.colorModeForRenderPass()),ve.call(H,W.gl,ue),W.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),W.setColorMode(M.colorModeForRenderPass()),W.setStencilMode(nn.disabled);let ve=fe==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,Ar.ReadOnly);W.setDepthMode(ve),H.render(W.gl,ue),W.setDirty(),M.setBaseState(),W.bindFramebuffer.set(null)}}(a,0,g,E))}saveTileTexture(a){let h=this._tileTextures[a.size[0]];h?h.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){let h=this._tileTextures[a];return h&&h.length>0?h.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;let h=this.imageManager.getPattern(a.from.toString()),g=this.imageManager.getPattern(a.to.toString());return!h||!g}useProgram(a,h,g=!1,_=[]){this.cache=this.cache||{};let E=!!this.style.map.terrain,M=this.style.projection,L=g?sl.projectionMercator:M.shaderPreludeCode,k=g?qu:M.shaderDefine,B=a+(h?h.cacheKey:"")+`/${g?jf:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(E?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[B]||(this.cache[B]=new yb(this.context,sl[a],h,Sb[a],this._showOverdrawInspector,E,L,k,_)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:a,drawingBufferHeight:h}=this.context.gl;return this.width!==a||this.height!==h}}function Xf(w,a){let h,g=!1,_=null,E=null,M=()=>{_=null,g&&(w.apply(E,h),_=setTimeout(M,a),g=!1)};return(...L)=>(g=!0,E=this,h=L,_||M(),_)}class ey{constructor(a){this._getCurrentHash=()=>{let h=window.location.hash.replace("#","");if(this._hashName){let g;return h.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(g=_)}),(g&&g[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{let h=this._getCurrentHash();if(!this._isValidHash(h))return!1;let g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:g,pitch:+(h[4]||0)}),!0},this._updateHashUnthrottled=()=>{let h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{let h=this._getCurrentHash();if(h.length===0)return;let g=h.join("/"),_=g;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${g}`);let E=window.location.hash.replace(_,"");E.startsWith("#&")?E=E.slice(0,1)+E.slice(2):E==="#"&&(E="");let M=window.location.href.replace(/(#.+)?$/,E);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=Xf(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){let h=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,_=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,_),M=Math.round(h.lng*E)/E,L=Math.round(h.lat*E)/E,k=this._map.getBearing(),B=this._map.getPitch(),V="";if(V+=a?`/${M}/${L}/${g}`:`${g}/${L}/${M}`,(k||B)&&(V+="/"+Math.round(10*k)/10),B&&(V+=`/${Math.round(B)}`),this._hashName){let W=this._hashName,H=!1,K=window.location.hash.slice(1).split("&").map(ee=>{let ce=ee.split("=")[0];return ce===W?(H=!0,`${ce}=${V}`):ee}).filter(ee=>ee);return H||K.push(`${W}=${V}`),`#${K.join("&")}`}return`#${V}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.S(+a[2],+a[1])}catch(E){return!1}let h=+a[0],g=+(a[3]||0),_=+(a[4]||0);return h>=this._map.getMinZoom()&&h<=this._map.getMaxZoom()&&g>=-180&&g<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}let zu={linearity:.3,easing:o.cm(0,0,.3,1)},jb=o.e({deceleration:2500,maxSpeed:1400},zu),NA=o.e({deceleration:20,maxSpeed:1400},zu),kA=o.e({deceleration:1e3,maxSpeed:360},zu),qA=o.e({deceleration:1e3,maxSpeed:90},zu),FA=o.e({deceleration:1e3,maxSpeed:360},zu);class jA{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:x.now(),settings:a})}_drainInertiaBuffer(){let a=this._inertiaBuffer,h=x.now();for(;a.length>0&&h-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let h={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:E}of this._inertiaBuffer)h.zoom+=E.zoomDelta||0,h.bearing+=E.bearingDelta||0,h.pitch+=E.pitchDelta||0,h.roll+=E.rollDelta||0,E.panDelta&&h.pan._add(E.panDelta),E.around&&(h.around=E.around),E.pinchAround&&(h.pinchAround=E.pinchAround);let g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(h.pan.mag()){let E=gp(h.pan.mag(),g,o.e({},jb,a||{})),M=h.pan.mult(E.amount/h.pan.mag()),L=this._map.cameraHelper.handlePanInertia(M,this._map.transform);_.center=L.easingCenter,_.offset=L.easingOffset,cl(_,E)}if(h.zoom){let E=gp(h.zoom,g,NA);_.zoom=this._map.transform.zoom+E.amount,cl(_,E)}if(h.bearing){let E=gp(h.bearing,g,kA);_.bearing=this._map.transform.bearing+o.ah(E.amount,-179,179),cl(_,E)}if(h.pitch){let E=gp(h.pitch,g,qA);_.pitch=this._map.transform.pitch+E.amount,cl(_,E)}if(h.roll){let E=gp(h.roll,g,FA);_.roll=this._map.transform.roll+o.ah(E.amount,-179,179),cl(_,E)}if(_.zoom||_.bearing){let E=h.pinchAround===void 0?h.around:h.pinchAround;_.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),o.e(_,{noMoveStart:!0})}}function cl(w,a){(!w.duration||w.duration<a.duration)&&(w.duration=a.duration,w.easing=a.easing)}function gp(w,a,h){let{maxSpeed:g,linearity:_,deceleration:E}=h,M=o.ah(w*_/(a/1e3),-g,g),L=Math.abs(M)/(E*_);return{easing:h.easing,duration:1e3*L,amount:M*(L/2)}}class Aa extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g,_={}){g=g instanceof MouseEvent?g:new MouseEvent(a,g);let E=b.mousePos(h.getCanvas(),g),M=h.unproject(E);super(a,o.e({point:E,lngLat:M,originalEvent:g},_)),this._defaultPrevented=!1,this.target=h}}class vp extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g){let _=a==="touchend"?g.changedTouches:g.touches,E=b.touchPos(h.getCanvasContainer(),_),M=E.map(k=>h.unproject(k)),L=E.reduce((k,B,V,W)=>k.add(B.div(W.length)),new o.P(0,0));super(a,{points:E,point:L,lngLats:M,lngLat:h.unproject(L),originalEvent:g}),this._defaultPrevented=!1}}class zb extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g){super(a,{originalEvent:g}),this._defaultPrevented=!1}}class zA{constructor(a,h){this._map=a,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new zb(a.type,this._map,a))}mousedown(a,h){return this._mousedownPos=h,this._firePreventable(new Aa(a.type,this._map,a))}mouseup(a){this._map.fire(new Aa(a.type,this._map,a))}click(a,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Aa(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Aa(a.type,this._map,a))}mouseover(a){this._map.fire(new Aa(a.type,this._map,a))}mouseout(a){this._map.fire(new Aa(a.type,this._map,a))}touchstart(a){return this._firePreventable(new vp(a.type,this._map,a))}touchmove(a){this._map.fire(new vp(a.type,this._map,a))}touchend(a){this._map.fire(new vp(a.type,this._map,a))}touchcancel(a){this._map.fire(new vp(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class UA{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Aa(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Aa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Aa(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yp{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class Ub{constructor(a,h){this._map=a,this._tr=new yp(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,h){this.isEnabled()&&a.shiftKey&&a.button===0&&(b.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(a,h){if(!this._active)return;let g=h;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;let _=this._startPos;this._lastPos=g,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));let E=Math.min(_.x,g.x),M=Math.max(_.x,g.x),L=Math.min(_.y,g.y),k=Math.max(_.y,g.y);b.setTransform(this._box,`translate(${E}px,${L}px)`),this._box.style.width=M-E+"px",this._box.style.height=k-L+"px"}mouseupWindow(a,h){if(!this._active||a.button!==0)return;let g=this._startPos,_=h;if(this.reset(),b.suppressClick(),g.x!==_.x||g.y!==_.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:E=>E.fitScreenCoordinates(g,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,h){return this._map.fire(new o.l(a,{originalEvent:h}))}}function _p(w,a){if(w.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${a.length}`);let h={};for(let g=0;g<w.length;g++)h[w[g].identifier]=a[g];return h}class BA{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,h,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),g.length===this.numTouches&&(this.centroid=function(_){let E=new o.P(0,0);for(let M of _)E._add(M);return E.div(_.length)}(h),this.touches=_p(g,h)))}touchmove(a,h,g){if(this.aborted||!this.centroid)return;let _=_p(g,h);for(let E in this.touches){let M=_[E];(!M||M.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(a,h,g){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){let _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Ma{constructor(a){this.singleTap=new BA(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,h,g){this.singleTap.touchstart(a,h,g)}touchmove(a,h,g){this.singleTap.touchmove(a,h,g)}touchend(a,h,g){let _=this.singleTap.touchend(a,h,g);if(_){let E=a.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(_)<30;if(E&&M||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class fl{constructor(a){this._tr=new yp(a),this._zoomIn=new Ma({numTouches:1,numTaps:2}),this._zoomOut=new Ma({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,h,g){this._zoomIn.touchstart(a,h,g),this._zoomOut.touchstart(a,h,g)}touchmove(a,h,g){this._zoomIn.touchmove(a,h,g),this._zoomOut.touchmove(a,h,g)}touchend(a,h,g){let _=this._zoomIn.touchend(a,h,g),E=this._zoomOut.touchend(a,h,g),M=this._tr;return _?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(_)},{originalEvent:a})}):E?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(E)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xp{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){let h=this._moveFunction(...a);if(h.bearingDelta||h.pitchDelta||h.rollDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(a,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(h)?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,h){if(!this.isEnabled())return;let g=this._lastPoint;if(!g)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);let _=Array.isArray(h)?h[0]:h;return!this._moved&&_.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(g,_))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&b.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let hl=0,bp=2,Jq={[hl]:1,[bp]:2};class Um{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){let h=b.mouseButton(a);this._eventButton=h}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(h,g){let _=Jq[g];return h.buttons===void 0||(h.buttons&_)!==_}(a,this._eventButton)}isValidEndEvent(a){return b.mouseButton(a)===this._eventButton}}class eF{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class tF{constructor(a=new Um({checkCorrectEvent:()=>!0}),h=new eF){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=h}_executeRelevantHandler(a,h,g){return a instanceof MouseEvent?h(a):typeof TouchEvent!="undefined"&&a instanceof TouchEvent?g(a):void 0}startMove(a){this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.startMove(h),h=>this.oneFingerTouchMoveStateManager.startMove(h))}endMove(a){this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.endMove(h),h=>this.oneFingerTouchMoveStateManager.endMove(h))}isValidStartEvent(a){return this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.isValidStartEvent(h),h=>this.oneFingerTouchMoveStateManager.isValidStartEvent(h))}isValidMoveEvent(a){return this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.isValidMoveEvent(h),h=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(h))}isValidEndEvent(a){return this._executeRelevantHandler(a,h=>this.mouseMoveStateManager.isValidEndEvent(h),h=>this.oneFingerTouchMoveStateManager.isValidEndEvent(h))}}let Bm=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=a=>{a.preventDefault()}};class Vm{constructor(a,h){this._clickTolerance=a.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,h,g){return this._calculateTransform(a,h,g)}touchmove(a,h,g){if(this._active){if(!this._shouldBePrevented(g.length))return a.preventDefault(),this._calculateTransform(a,h,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,h,g){this._calculateTransform(a,h,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,h,g){g.length>0&&(this._active=!0);let _=_p(g,h),E=new o.P(0,0),M=new o.P(0,0),L=0;for(let B in _){let V=_[B],W=this._touches[B];W&&(E._add(V),M._add(V.sub(W)),L++,_[B]=V)}if(this._touches=_,this._shouldBePrevented(L)||!M.mag())return;let k=M.div(L);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(L),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,h,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([h[0],h[1]]))}touchmove(a,h,g){if(!this._firstTwoTouches)return;a.preventDefault();let[_,E]=this._firstTwoTouches,M=Ut(g,h,_),L=Ut(g,h,E);if(!M||!L)return;let k=this._aroundCenter?null:M.add(L).div(2);return this._move([M,L],k,a)}touchend(a,h,g){if(!this._firstTwoTouches)return;let[_,E]=this._firstTwoTouches,M=Ut(g,h,_),L=Ut(g,h,E);M&&L||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ut(w,a,h){for(let g=0;g<w.length;g++)if(w[g].identifier===h)return a[g]}function Bb(w,a){return Math.log(w/a)/Math.LN2}class ty extends pl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,h){let g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Bb(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bb(this._distance,g),pinchAround:h}}}function Vb(w,a){return 180*w.angleWith(a)/Math.PI}class wp extends pl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,h,g){let _=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vb(this._vector,_),pinchAround:h}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());let h=25/(Math.PI*this._minDiameter)*360,g=Vb(a,this._startVector);return Math.abs(g)<h}}function Qf(w){return Math.abs(w.y)>Math.abs(w.x)}class ry extends pl{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,h,g){super.touchstart(a,h,g),this._currentTouchCount=g.length}_start(a){this._lastPoints=a,Qf(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,h,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let _=a[0].sub(this._lastPoints[0]),E=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,E,g.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(_.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(a,h,g){if(this._valid!==void 0)return this._valid;let _=a.mag()>=2,E=h.mag()>=2;if(!_&&!E)return;if(!_||!E)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;let M=a.y>0==h.y>0;return Qf(a)&&Qf(h)&&M}}let Jr={panStep:100,bearingStep:15,pitchStep:10};class ny{constructor(a){this._tr=new yp(a);let h=Jr;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let h=0,g=0,_=0,E=0,M=0;switch(a.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:a.shiftKey?g=-1:(a.preventDefault(),E=-1);break;case 39:a.shiftKey?g=1:(a.preventDefault(),E=1);break;case 38:a.shiftKey?_=1:(a.preventDefault(),M=-1);break;case 40:a.shiftKey?_=-1:(a.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(g=0,_=0),{cameraAnimation:L=>{let k=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:rF,zoom:h?Math.round(k.zoom)+h*(a.shiftKey?2:1):k.zoom,bearing:k.bearing+g*this._bearingStep,pitch:k.pitch+_*this._pitchStep,offset:[-E*this._panStep,-M*this._panStep],center:k.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rF(w){return w*(2-w)}let iy=4.000244140625,nF=1/450;class VA{constructor(a,h){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=a,this._tr=new yp(a),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=nF}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let h=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,g=x.now(),_=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,h!==0&&h%iy==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(_*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),a.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=a,this._delta-=h,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let h=b.mousePos(this._map.getCanvas(),a),g=this._tr;this._aroundPoint=this._aroundCenter?g.transform.locationToScreenPoint(o.S.convert(g.center)):h,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let L=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=L),typeof this._targetZoom=="number"&&(this._targetZoom+=L)}if(this._delta!==0){let L=this._type==="wheel"&&Math.abs(this._delta)>iy?this._wheelZoomRate:this._defaultZoomRate,k=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&k!==0&&(k=1/k);let B=typeof this._targetZoom!="number"?a.scale:o.af(this._targetZoom);this._targetZoom=a.getConstrained(a.getCameraLngLat(),o.ak(B*k)).zoom,this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let h=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,g=this._startZoom,_=this._easing,E,M=!1;if(this._type==="wheel"&&g&&_){let L=x.now()-this._lastWheelEventTime,k=Math.min((L+5)/200,1),B=_(k);E=o.C.number(g,h,B),k<1?this._frameId||(this._frameId=!0):M=!0}else E=h,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=E,{noInertia:!0,needsRenderFrame:!M,zoomDelta:E-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let h=o.co;if(this._prevEase){let g=this._prevEase,_=(x.now()-g.start)/g.duration,E=g.easing(_+.01)-g.easing(_),M=.27/Math.sqrt(E*E+1e-4)*.01,L=Math.sqrt(.0729-M*M);h=o.cm(M,L,.25,1)}return this._prevEase={start:x.now(),duration:a,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Gb{constructor(a,h){this._clickZoom=a,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $b{constructor(a){this._tr=new yp(a),this.reset()}reset(){this._active=!1}dblclick(a,h){return a.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class GA{constructor(){this._tap=new Ma({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,h,g){if(!this._swipePoint)if(this._tapTime){let _=h[0],E=a.timeStamp-this._tapTime<500,M=this._tapPoint.dist(_)<30;E&&M?g.length>0&&(this._swipePoint=_,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(a,h,g)}touchmove(a,h,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;let _=h[0],E=_.y-this._swipePoint.y;return this._swipePoint=_,a.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(a,h,g)}touchend(a,h,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{let _=this._tap.touchend(a,h,g);_&&(this._tapTime=a.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $A{constructor(a,h,g){this._el=a,this._mousePan=h,this._touchPan=g}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Hb{constructor(a,h,g,_){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=h,this._mousePitch=g,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class HA{constructor(a,h,g,_){this._el=a,this._touchZoom=h,this._touchRotate=g,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class WA{constructor(a,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",a);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=h,this._container.appendChild(_);let E=document.createElement("div");E.className="maplibregl-mobile-message",E.textContent=g,this._container.appendChild(E),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,h){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let dl=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class jn extends o.l{}function Ep(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Wb{constructor(a,h){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,E)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let M=_.type==="renderFrame"?void 0:_,L={needsRenderFrame:!1},k={},B={};for(let{handlerName:H,handler:K,allowed:ee}of this._handlers){if(!K.isEnabled())continue;let ce;if(this._blockedByActive(B,ee,H))K.reset();else if(K[E||_.type]){if(o.cp(_,E||_.type)){let ue=b.mousePos(this._map.getCanvas(),_);ce=K[E||_.type](_,ue)}else if(o.cq(_,E||_.type)){let ue=this._getMapTouches(_.touches),fe=b.touchPos(this._map.getCanvas(),ue);ce=K[E||_.type](_,fe,ue)}else o.cr(E||_.type)||(ce=K[E||_.type](_));this.mergeHandlerResult(L,k,ce,H,M),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()}(ce||K.isActive())&&(B[H]=K)}let V={};for(let H in this._previousActiveHandlers)B[H]||(V[H]=M);this._previousActiveHandlers=B,(Object.keys(V).length||Ep(L))&&(this._changes.push([L,k,V]),this._triggerRenderFrame()),(Object.keys(B).length||Ep(L))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:W}=L;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jA(a),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);let g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(let[_,E,M]of this._listeners)b.addEventListener(_,E,_===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(let[a,h,g]of this._listeners)b.removeEventListener(a,h,a===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(a){let h=this._map,g=h.getCanvasContainer();this._add("mapEvent",new zA(h,a));let _=h.boxZoom=new Ub(h,a);this._add("boxZoom",_),a.interactive&&a.boxZoom&&_.enable();let E=h.cooperativeGestures=new WA(h,a.cooperativeGestures);this._add("cooperativeGestures",E),a.cooperativeGestures&&E.enable();let M=new fl(h),L=new $b(h);h.doubleClickZoom=new Gb(L,M),this._add("tapZoom",M),this._add("clickZoom",L),a.interactive&&a.doubleClickZoom&&h.doubleClickZoom.enable();let k=new GA;this._add("tapDragZoom",k);let B=h.touchPitch=new ry(h);this._add("touchPitch",B),a.interactive&&a.touchPitch&&h.touchPitch.enable(a.touchPitch);let V=()=>h.project(h.getCenter()),W=function({enable:we,clickTolerance:Ie,aroundCenter:Pe=!0,minPixelCenterThreshold:Ee=100,rotateDegreesPerPixelMoved:Fe=.8},Qe){let Ve=new Um({checkCorrectEvent:Ge=>b.mouseButton(Ge)===0&&Ge.ctrlKey||b.mouseButton(Ge)===2&&!Ge.ctrlKey});return new xp({clickTolerance:Ie,move:(Ge,Xe)=>{let vt=Qe();if(Pe&&Math.abs(vt.y-Ge.y)>Ee)return{bearingDelta:o.cn(new o.P(Ge.x,Xe.y),Xe,vt)};let bt=(Xe.x-Ge.x)*Fe;return Pe&&Xe.y<vt.y&&(bt=-bt),{bearingDelta:bt}},moveStateManager:Ve,enable:we,assignEvents:Bm})}(a,V),H=function({enable:we,clickTolerance:Ie,pitchDegreesPerPixelMoved:Pe=-.5}){let Ee=new Um({checkCorrectEvent:Fe=>b.mouseButton(Fe)===0&&Fe.ctrlKey||b.mouseButton(Fe)===2});return new xp({clickTolerance:Ie,move:(Fe,Qe)=>({pitchDelta:(Qe.y-Fe.y)*Pe}),moveStateManager:Ee,enable:we,assignEvents:Bm})}(a),K=function({enable:we,clickTolerance:Ie,rollDegreesPerPixelMoved:Pe=.3},Ee){let Fe=new Um({checkCorrectEvent:Qe=>b.mouseButton(Qe)===2&&Qe.ctrlKey});return new xp({clickTolerance:Ie,move:(Qe,Ve)=>{let Ge=Ee(),Xe=(Ve.x-Qe.x)*Pe;return Ve.y<Ge.y&&(Xe=-Xe),{rollDelta:Xe}},moveStateManager:Fe,enable:we,assignEvents:Bm})}(a,V);h.dragRotate=new Hb(a,W,H,K),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",H,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),a.interactive&&a.dragRotate&&h.dragRotate.enable();let ee=function({enable:we,clickTolerance:Ie}){let Pe=new Um({checkCorrectEvent:Ee=>b.mouseButton(Ee)===0&&!Ee.ctrlKey});return new xp({clickTolerance:Ie,move:(Ee,Fe)=>({around:Fe,panDelta:Fe.sub(Ee)}),activateOnStart:!0,moveStateManager:Pe,enable:we,assignEvents:Bm})}(a),ce=new Vm(a,h);h.dragPan=new $A(g,ee,ce),this._add("mousePan",ee),this._add("touchPan",ce,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&h.dragPan.enable(a.dragPan);let ue=new wp,fe=new ty;h.touchZoomRotate=new HA(g,fe,ue,k),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&h.touchZoomRotate.enable(a.touchZoomRotate);let ve=h.scrollZoom=new VA(h,()=>this._triggerRenderFrame());this._add("scrollZoom",ve,["mousePan"]),a.interactive&&a.scrollZoom&&h.scrollZoom.enable(a.scrollZoom);let Se=h.keyboard=new ny(h);this._add("keyboard",Se),a.interactive&&a.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new UA(h))}_add(a,h,g){this._handlers.push({handlerName:a,handler:h,allowed:g}),this._handlersById[a]=h}stop(a){if(!this._updatingCamera){for(let{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(let{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!dl(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,h,g){for(let _ in a)if(_!==g&&(!h||h.indexOf(_)<0))return!0;return!1}_getMapTouches(a){let h=[];for(let g of a)this._el.contains(g.target)&&h.push(g);return h}mergeHandlerResult(a,h,g,_,E){if(!g)return;o.e(a,g);let M={handlerName:_,originalEvent:g.originalEvent||E};g.zoomDelta!==void 0&&(h.zoom=M),g.panDelta!==void 0&&(h.drag=M),g.rollDelta!==void 0&&(h.roll=M),g.pitchDelta!==void 0&&(h.pitch=M),g.bearingDelta!==void 0&&(h.rotate=M)}_applyChanges(){let a={},h={},g={};for(let[_,E,M]of this._changes)_.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(_.panDelta)),_.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(a.rollDelta=(a.rollDelta||0)+_.rollDelta),_.around!==void 0&&(a.around=_.around),_.pinchAround!==void 0&&(a.pinchAround=_.pinchAround),_.noInertia&&(a.noInertia=_.noInertia),o.e(h,E),o.e(g,M);this._updateMapTransform(a,h,g),this._changes=[]}_updateMapTransform(a,h,g){let _=this._map,E=_._getTransformForUpdate(),M=_.terrain;if(!(Ep(a)||M&&this._terrainMovement))return this._fireEvents(h,g,!0);_._stop(!0);let{panDelta:L,zoomDelta:k,bearingDelta:B,pitchDelta:V,rollDelta:W,around:H,pinchAround:K}=a;K!==void 0&&(H=K),H=H||_.transform.centerPoint,M&&!E.isPointOnMapSurface(H)&&(H=E.centerPoint);let ee={panDelta:L,zoomDelta:k,rollDelta:W,pitchDelta:V,bearingDelta:B,around:H};this._map.cameraHelper.useGlobeControls&&!E.isPointOnMapSurface(H)&&(H=E.centerPoint);let ce=H.distSqr(E.centerPoint)<.01?E.center:E.screenPointToLocation(L?H.sub(L):H);M?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,E),this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?E.setCenter(E.screenPointToLocation(E.centerPoint.sub(L))):this._map.cameraHelper.handleMapControlsPan(ee,E,ce):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ee,E,ce))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,E),this._map.cameraHelper.handleMapControlsPan(ee,E,ce)),_._applyUpdatedTransform(E),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(h,g,!0)}_fireEvents(a,h,g){let _=dl(this._eventsInProgress),E=dl(a),M={};for(let W in a){let{originalEvent:H}=a[W];this._eventsInProgress[W]||(M[`${W}start`]=H),this._eventsInProgress[W]=a[W]}!_&&E&&this._fireEvent("movestart",E.originalEvent);for(let W in M)this._fireEvent(W,M[W]);E&&this._fireEvent("move",E.originalEvent);for(let W in a){let{originalEvent:H}=a[W];this._fireEvent(W,H)}let L={},k;for(let W in this._eventsInProgress){let{handlerName:H,originalEvent:K}=this._eventsInProgress[W];this._handlersById[H].isActive()||(delete this._eventsInProgress[W],k=h[H]||K,L[`${W}end`]=k)}for(let W in L)this._fireEvent(W,L[W]);let B=dl(this._eventsInProgress),V=(_||E)&&!B;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let W=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&W.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(W)}if(g&&V){this._updatingCamera=!0;let W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!W||!W.essential&&x.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:k})),H(this._map.getBearing())&&this._map.resetNorth()):(H(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(a,h){this._map.fire(new o.l(a,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new jn("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ZA extends o.E{constructor(a,h,g){super(),this._renderFrameCallback=()=>{let _=Math.min((x.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=g.bearingSnap,this.cameraHelper=h,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,h){a.apply(this.transform),this.transform=a,this.cameraHelper=h}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(a,h){return this.jumpTo({center:a},h)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,h){return this.jumpTo({elevation:a},h),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,h,g){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},h),g)}panTo(a,h,g){return this.easeTo(o.e({center:a},h),g)}getZoom(){return this.transform.zoom}setZoom(a,h){return this.jumpTo({zoom:a},h),this}zoomTo(a,h,g){return this.easeTo(o.e({zoom:a},h),g)}zoomIn(a,h){return this.zoomTo(this.getZoom()+1,a,h),this}zoomOut(a,h){return this.zoomTo(this.getZoom()-1,a,h),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,h){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",h)).fire(new o.l("move",h)).fire(new o.l("moveend",h))),this}getBearing(){return this.transform.bearing}setBearing(a,h){return this.jumpTo({bearing:a},h),this}getPadding(){return this.transform.padding}setPadding(a,h){return this.jumpTo({padding:a},h),this}rotateTo(a,h,g){return this.easeTo(o.e({bearing:a},h),g)}resetNorth(a,h){return this.rotateTo(0,o.e({duration:1e3},a),h),this}resetNorthPitch(a,h){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),h),this}snapToNorth(a,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,h):this}getPitch(){return this.transform.pitch}setPitch(a,h){return this.jumpTo({pitch:a},h),this}getRoll(){return this.transform.roll}setRoll(a,h){return this.jumpTo({roll:a},h),this}cameraForBounds(a,h){a=Lt.convert(a).adjustAntiMeridian();let g=h&&h.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),g,h)}_cameraForBoxAndBearing(a,h,g,_){let E={top:0,bottom:0,right:0,left:0};if(typeof(_=o.e({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){let B=_.padding;_.padding={top:B,bottom:B,right:B,left:B}}let M=o.e(E,_.padding);_.padding=M;let L=this.transform,k=new Lt(a,h);return this.cameraHelper.cameraForBoxAndBearing(_,M,k,g,L)}fitBounds(a,h,g){return this._fitInternal(this.cameraForBounds(a,h),h,g)}fitScreenCoordinates(a,h,g,_,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(h)),g,_),_,E)}_fitInternal(a,h,g){return a?(delete(h=o.e(a,h)).padding,h.linear?this.easeTo(h,g):this.flyTo(h,g)):this}jumpTo(a,h){this.stop();let g=this._getTransformForUpdate(),_=!1,E=!1,M=!1,L=g.zoom;this.cameraHelper.handleJumpToCenterZoom(g,a);let k=g.zoom!==L;return"elevation"in a&&g.elevation!==+a.elevation&&g.setElevation(+a.elevation),"bearing"in a&&g.bearing!==+a.bearing&&(_=!0,g.setBearing(+a.bearing)),"pitch"in a&&g.pitch!==+a.pitch&&(E=!0,g.setPitch(+a.pitch)),"roll"in a&&g.roll!==+a.roll&&(M=!0,g.setRoll(+a.roll)),a.padding==null||g.isPaddingEqual(a.padding)||g.setPadding(a.padding),this._applyUpdatedTransform(g),this.fire(new o.l("movestart",h)).fire(new o.l("move",h)),k&&this.fire(new o.l("zoomstart",h)).fire(new o.l("zoom",h)).fire(new o.l("zoomend",h)),_&&this.fire(new o.l("rotatestart",h)).fire(new o.l("rotate",h)).fire(new o.l("rotateend",h)),E&&this.fire(new o.l("pitchstart",h)).fire(new o.l("pitch",h)).fire(new o.l("pitchend",h)),M&&this.fire(new o.l("rollstart",h)).fire(new o.l("roll",h)).fire(new o.l("rollend",h)),this.fire(new o.l("moveend",h))}calculateCameraOptionsFromTo(a,h,g,_=0){let E=o.a1.fromLngLat(a,h),M=o.a1.fromLngLat(g,_),L=M.x-E.x,k=M.y-E.y,B=M.z-E.z,V=Math.hypot(L,k,B);if(V===0)throw new Error("Can't calculate camera options with same From and To");let W=Math.hypot(L,k),H=o.ak(this.transform.cameraToCenterDistance/V/this.transform.tileSize),K=180*Math.atan2(L,-k)/Math.PI,ee=180*Math.acos(W/V)/Math.PI;return ee=B<0?90-ee:90+ee,{center:M.toLngLat(),elevation:_,zoom:H,pitch:ee,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(a,h,g,_,E){let M=this.transform.calculateCenterFromCameraLngLatAlt(a,h,g,_);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:g,pitch:_,roll:E}}easeTo(a,h){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.co},a)).animate===!1||!a.essential&&x.prefersReducedMotion)&&(a.duration=0);let g=this._getTransformForUpdate(),_=this.getBearing(),E=g.pitch,M=g.roll,L="bearing"in a?this._normalizeBearing(a.bearing,_):_,k="pitch"in a?+a.pitch:E,B="roll"in a?this._normalizeBearing(a.roll,M):M,V="padding"in a?a.padding:g.padding,W=o.P.convert(a.offset),H,K;a.around&&(H=o.S.convert(a.around),K=g.locationToScreenPoint(H));let ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ce=this.cameraHelper.handleEaseTo(g,{bearing:L,pitch:k,roll:B,padding:V,around:H,aroundPoint:K,offsetAsPoint:W,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||_!==L,this._pitching=this._pitching||k!==E,this._rolling=this._rolling||B!==M,this._padding=!g.isPaddingEqual(V),this._zooming=this._zooming||ce.isZooming,this._easeId=a.easeId,this._prepareEase(h,a.noMoveStart,ee),this.terrain&&this._prepareElevation(ce.elevationCenter),this._ease(ue=>{ce.easeFunc(ue),this.terrain&&!a.freezeElevation&&this._updateElevation(ue),this._applyUpdatedTransform(g),this._fireMoveEvents(h)},ue=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(h,ue)},a),this}_prepareEase(a,h,g={}){this._moving=!0,h||g.moving||this.fire(new o.l("movestart",a)),this._zooming&&!g.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!g.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&h!==this._elevationTarget){let g=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(g-(h-(g*a+this._elevationStart))/(1-a)),this._elevationTarget=h}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};let h=a.getCameraLngLat(),g=a.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(h,a.zoom):0;if(g<_){let E=this.calculateCameraOptionsFromTo(h,_,a.center,a.elevation);return{pitch:E.pitch,zoom:E.zoom}}return{}}_applyUpdatedTransform(a){let h=[];if(h.push(_=>this._elevateCameraIfInsideTerrain(_)),this.transformCameraUpdate&&h.push(_=>this.transformCameraUpdate(_)),!h.length)return;let g=a.clone();for(let _ of h){let E=g.clone(),{center:M,zoom:L,roll:k,pitch:B,bearing:V,elevation:W}=_(E);M&&E.setCenter(M),W!==void 0&&E.setElevation(W),L!==void 0&&E.setZoom(L),k!==void 0&&E.setRoll(k),B!==void 0&&E.setPitch(B),V!==void 0&&E.setBearing(V),g.apply(E)}this.transform.apply(g)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;let g=this._zooming,_=this._rotating,E=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,g&&this.fire(new o.l("zoomend",a)),_&&this.fire(new o.l("rotateend",a)),E&&this.fire(new o.l("pitchend",a)),M&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,h){if(!a.essential&&x.prefersReducedMotion){let Xe=o.Q(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Xe,h)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.co},a);let g=this._getTransformForUpdate(),_=g.bearing,E=g.pitch,M=g.roll,L=g.padding,k="bearing"in a?this._normalizeBearing(a.bearing,_):_,B="pitch"in a?+a.pitch:E,V="roll"in a?this._normalizeBearing(a.roll,M):M,W="padding"in a?a.padding:g.padding,H=o.P.convert(a.offset),K=g.centerPoint.add(H),ee=g.screenPointToLocation(K),ce=this.cameraHelper.handleFlyTo(g,{bearing:k,pitch:B,roll:V,padding:W,locationAtOffset:ee,offsetAsPoint:H,center:a.center,minZoom:a.minZoom,zoom:a.zoom}),ue=a.curve,fe=Math.max(g.width,g.height),ve=fe/ce.scaleOfZoom,Se=ce.pixelPathLength;typeof ce.scaleOfMinZoom=="number"&&(ue=Math.sqrt(fe/ce.scaleOfMinZoom/Se*2));let we=ue*ue;function Ie(Xe){let vt=(ve*ve-fe*fe+(Xe?-1:1)*we*we*Se*Se)/(2*(Xe?ve:fe)*we*Se);return Math.log(Math.sqrt(vt*vt+1)-vt)}function Pe(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function Ee(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}let Fe=Ie(!1),Qe=function(Xe){return Ee(Fe)/Ee(Fe+ue*Xe)},Ve=function(Xe){return fe*((Ee(Fe)*(Pe(vt=Fe+ue*Xe)/Ee(vt))-Pe(Fe))/we)/Se;var vt},Ge=(Ie(!0)-Fe)/ue;if(Math.abs(Se)<2e-6||!isFinite(Ge)){if(Math.abs(fe-ve)<1e-6)return this.easeTo(a,h);let Xe=ve<fe?-1:1;Ge=Math.abs(Math.log(ve/fe))/ue,Ve=()=>0,Qe=vt=>Math.exp(Xe*ue*vt)}return a.duration="duration"in a?+a.duration:1e3*Ge/("screenSpeed"in a?+a.screenSpeed/ue:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=_!==k,this._pitching=B!==E,this._rolling=V!==M,this._padding=!g.isPaddingEqual(W),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(ce.targetCenter),this._ease(Xe=>{let vt=Xe*Ge,bt=1/Qe(vt),st=Ve(vt);this._rotating&&g.setBearing(o.C.number(_,k,Xe)),this._pitching&&g.setPitch(o.C.number(E,B,Xe)),this._rolling&&g.setRoll(o.C.number(M,V,Xe)),this._padding&&(g.interpolatePadding(L,W,Xe),K=g.centerPoint.add(H)),ce.easeFunc(Xe,bt,st,K),this.terrain&&!a.freezeElevation&&this._updateElevation(Xe),this._applyUpdatedTransform(g),this._fireMoveEvents(h)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(h)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,h){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,h)}return a||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(a,h,g){g.animate===!1||g.duration===0?(a(1),h()):(this._easeStart=x.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,h){a=o.aO(a,-180,180);let g=Math.abs(a-h);return Math.abs(a-360-h)<g&&(a-=360),Math.abs(a+360-h)<g&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(a),this.transform.tileZoom):null}}let Zb={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Yb{constructor(a=Zb){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,h){let g=this._map._getUIString(`AttributionControl.${h}`);a.title=g,a.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){let _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}let h=this._map.style.sourceCaches;for(let _ in h){let E=h[_];if(E.used||E.usedForTerrain){let M=E.getSource();M.attribution&&a.indexOf(M.attribution)<0&&a.push(M.attribution)}}a=a.filter(_=>String(_).trim()),a.sort((_,E)=>_.length-E.length),a=a.filter((_,E)=>{for(let M=E+1;M<a.length;M++)if(a[M].indexOf(_)>=0)return!1;return!0});let g=a.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,a.length?(this._innerContainer.innerHTML=b.sanitize(g),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class YA{constructor(a={}){this._updateCompact=()=>{let h=this._container.children;if(h.length){let g=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");let h=b.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Gl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){let h=++this._id;return this._queue.push({callback:a,id:h,cancelled:!1}),h}remove(a){let h=this._currentlyRunning,g=h?this._queue.concat(h):this._queue;for(let _ of g)if(_.id===a)return void(_.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let h=this._currentlyRunning=this._queue;this._queue=[];for(let g of h)if(!g.cancelled&&(g.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var oy=o.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Kt extends o.E{constructor(a){super(),this._lastTilesetChange=x.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*yw(2,this.deltaZoom),a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,h){this.sourceCache.update(a,h),this._renderableTilesKeys=[];let g={};for(let _ of xe(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))g[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),o.bY(_.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[_.key]=new gi(_,this.tileSize),this._lastTilesetChange=x.now());for(let _ in this._tiles)g[_]||delete this._tiles[_]}freeRtt(a){for(let h in this._tiles){let g=this._tiles[h];(!a||g.tileID.equals(a)||g.tileID.isChildOf(a)||a.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,h){return h?this._getTerrainCoordsForTileRanges(a,h):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){let h={};for(let g of this._renderableTilesKeys){let _=this._tiles[g].tileID,E=a.clone(),M=o.ba();if(_.canonical.equals(a.canonical))o.bY(M,0,o.$,o.$,0,0,1);else if(_.canonical.isChildOf(a.canonical)){let L=_.canonical.z-a.canonical.z,k=_.canonical.x-(_.canonical.x>>L<<L),B=_.canonical.y-(_.canonical.y>>L<<L),V=o.$>>L;o.bY(M,0,V,V,0,0,1),o.M(M,M,[-k*V,-B*V,0])}else{if(!a.canonical.isChildOf(_.canonical))continue;{let L=a.canonical.z-_.canonical.z,k=a.canonical.x-(a.canonical.x>>L<<L),B=a.canonical.y-(a.canonical.y>>L<<L),V=o.$>>L;o.bY(M,0,o.$,o.$,0,0,1),o.M(M,M,[k*V,B*V,0]),o.N(M,M,[1/yw(2,L),1/yw(2,L),0])}}E.terrainRttPosMatrix32f=new Float32Array(M),h[g]=E}return h}_getTerrainCoordsForTileRanges(a,h){let g={};for(let _ of this._renderableTilesKeys){let E=this._tiles[_].tileID;if(!this._isWithinTileRanges(E,h))continue;let M=a.clone(),L=o.ba();if(E.canonical.z===a.canonical.z){let k=a.canonical.x-E.canonical.x,B=a.canonical.y-E.canonical.y;o.bY(L,0,o.$,o.$,0,0,1),o.M(L,L,[k*o.$,B*o.$,0])}else if(E.canonical.z>a.canonical.z){let k=E.canonical.z-a.canonical.z,B=E.canonical.x-(E.canonical.x>>k<<k),V=E.canonical.y-(E.canonical.y>>k<<k),W=a.canonical.x-(E.canonical.x>>k),H=a.canonical.y-(E.canonical.y>>k),K=o.$>>k;o.bY(L,0,K,K,0,0,1),o.M(L,L,[-B*K+W*o.$,-V*K+H*o.$,0])}else{let k=a.canonical.z-E.canonical.z,B=a.canonical.x-(a.canonical.x>>k<<k),V=a.canonical.y-(a.canonical.y>>k<<k),W=(a.canonical.x>>k)-E.canonical.x,H=(a.canonical.y>>k)-E.canonical.y,K=o.$<<k;o.bY(L,0,K,K,0,0,1),o.M(L,L,[B*o.$+W*K,V*o.$+H*K,0])}M.terrainRttPosMatrix32f=new Float32Array(L),g[_]=M}return g}getSourceTile(a,h){let g=this.sourceCache._source,_=a.overscaledZ-this.deltaZoom;if(_>g.maxzoom&&(_=g.maxzoom),_<g.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(_).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!E||!E.dem)&&h)for(;_>=g.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(a.scaledTo(_--).key);return E}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,h){return h[a.canonical.z]&&a.canonical.x>=h[a.canonical.z].minTileX&&a.canonical.x<=h[a.canonical.z].maxTileX&&a.canonical.y>=h[a.canonical.z].minTileY&&a.canonical.y<=h[a.canonical.z].maxTileY}}class lr{constructor(a,h,g){this._meshCache={},this.painter=a,this.sourceCache=new Kt(h),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,h,g,_=o.$){var E;if(!(h>=0&&h<_&&g>=0&&g<_))return 0;let M=this.getTerrainData(a),L=(E=M.tile)===null||E===void 0?void 0:E.dem;if(!L)return 0;let k=o.cs([],[h/_*o.$,g/_*o.$],M.u_terrain_matrix),B=[k[0]*L.dim,k[1]*L.dim],V=Math.floor(B[0]),W=Math.floor(B[1]),H=B[0]-V,K=B[1]-W;return L.get(V,W)*(1-H)*(1-K)+L.get(V+1,W)*H*(1-K)+L.get(V,W+1)*(1-H)*K+L.get(V+1,W+1)*H*K}getElevationForLngLatZoom(a,h){if(!o.ct(h,a.wrap()))return 0;let{tileID:g,mercatorX:_,mercatorY:E}=this._getOverscaledTileIDFromLngLatZoom(a,h);return this.getElevation(g,_%o.$,E%o.$,o.$)}getElevation(a,h,g,_=o.$){return this.getDEMElevation(a,h,g,_)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){let _=this.painter.context,E=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(_,E,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(_,new o.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ag([])}let h=this.sourceCache.getSourceTile(a,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){let _=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new o.T(_,h.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),h.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}let g=h&&h+h.tileID.key+a.key;if(g&&!this._demMatrixCache[g]){let _=this.sourceCache.sourceCache._source.maxzoom,E=a.canonical.z-h.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=_?E=a.canonical.z-_:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let M=a.canonical.x-(a.canonical.x>>E<<E),L=a.canonical.y-(a.canonical.y>>E<<E),k=o.cu(new Float64Array(16),[1/(o.$<<E),1/(o.$<<E),0]);o.M(k,k,[M*o.$,L*o.$,0]),this._demMatrixCache[a.key]={matrix:k,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(a){let h=this.painter,g=h.width/devicePixelRatio,_=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(h.context,{width:g,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(h.context,{width:g,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(g,_,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,g,_))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,M=0;E<this._coordsTextureSize;E++)for(let L=0;L<this._coordsTextureSize;L++,M+=4)h[M+0]=255&L,h[M+1]=255&E,h[M+2]=L>>8<<4|E>>8,h[M+3]=0;let g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),_=new o.T(a,g,a.gl.RGBA,{premultiply:!1});return _.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);let h=new Uint8Array(4),g=this.painter.context,_=g.gl,E=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),L=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(E,L-M-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),g.bindFramebuffer.set(null);let k=h[0]+(h[2]>>4<<8),B=h[1]+((15&h[2])<<8),V=this.coordsIndex[255-h[3]],W=V&&this.sourceCache.getTileByID(V);if(!W)return null;let H=this._coordsTextureSize,K=(1<<W.tileID.canonical.z)*H;return new o.a1((W.tileID.canonical.x*H+k)/K+W.tileID.wrap,(W.tileID.canonical.y*H+B)/K,this.getElevation(W.tileID,k,B,H))}depthAtPoint(a){let h=new Uint8Array(4),g=this.painter.context,_=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),g.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(a){var h;let g=((h=this.painter.style.projection)===null||h===void 0?void 0:h.transitionState)>0,_=g&&a.canonical.y===0,E=g&&a.canonical.y===(1<<a.canonical.z)-1,M=`m_${_?"n":""}_${E?"s":""}`;if(this._meshCache[M])return this._meshCache[M];let L=this.painter.context,k=new o.cv,B=new o.aN,V=this.meshSize,W=o.$/V,H=V*V;for(let Ee=0;Ee<=V;Ee++)for(let Fe=0;Fe<=V;Fe++)k.emplaceBack(Fe*W,Ee*W,0);for(let Ee=0;Ee<H;Ee+=V+1)for(let Fe=0;Fe<V;Fe++)B.emplaceBack(Fe+Ee,V+Fe+Ee+1,V+Fe+Ee+2),B.emplaceBack(Fe+Ee,V+Fe+Ee+2,Fe+Ee+1);let K=k.length,ee=K+(V+1),ce=(V+1)*V,ue=_?o.bh:0,fe=_?0:1,ve=E?o.bi:o.$,Se=E?0:1;for(let Ee=0;Ee<=V;Ee++)k.emplaceBack(Ee*W,ue,fe);for(let Ee=0;Ee<=V;Ee++)k.emplaceBack(Ee*W,ve,Se);for(let Ee=0;Ee<V;Ee++)B.emplaceBack(ce+Ee,ee+Ee,ee+Ee+1),B.emplaceBack(ce+Ee,ee+Ee+1,ce+Ee+1),B.emplaceBack(0+Ee,K+Ee+1,K+Ee),B.emplaceBack(0+Ee,0+Ee+1,K+Ee+1);let we=k.length,Ie=we+2*(V+1);for(let Ee of[0,1])for(let Fe=0;Fe<=V;Fe++)for(let Qe of[0,1])k.emplaceBack(Ee*o.$,Fe*W,Qe);for(let Ee=0;Ee<2*V;Ee+=2)B.emplaceBack(we+Ee,we+Ee+1,we+Ee+3),B.emplaceBack(we+Ee,we+Ee+3,we+Ee+2),B.emplaceBack(Ie+Ee,Ie+Ee+3,Ie+Ee+1),B.emplaceBack(Ie+Ee,Ie+Ee+2,Ie+Ee+3);let Pe=new Ff(L.createVertexBuffer(k,oy.members),L.createIndexBuffer(B),o.aM.simpleSegment(0,0,k.length,B.length));return this._meshCache[M]=Pe,Pe}getMeshFrameDelta(a){return 2*Math.PI*o.bu/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,h){var g;let{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(a,h);return(g=this.getMinMaxElevation(_).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(a){let h=this.getTerrainData(a).tile,g={minElevation:null,maxElevation:null};return h&&h.dem&&(g.minElevation=h.dem.min*this.exaggeration,g.maxElevation=h.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(a,h){let g=o.a1.fromLngLat(a.wrap()),_=(1<<h)*o.$,E=g.x*_,M=g.y*_,L=Math.floor(E/o.$),k=Math.floor(M/o.$);return{tileID:new o.Z(h,0,h,L,k),mercatorX:E,mercatorY:M}}}class ay{constructor(a,h,g){this._context=a,this._size=h,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){let h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(g.texture),{id:a,fbo:h,texture:g,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>a.id!==h),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(let h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(let a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}let Nc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class sy{constructor(a,h){this.painter=a,this.terrain=h,this.pool=new ay(a.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(g=>!a._layers[g].isHidden(h)),this._coordsAscending={};for(let g in a.sourceCaches){this._coordsAscending[g]={};let _=a.sourceCaches[g].getVisibleCoordinates(),E=a.sourceCaches[g].getSource(),M=E instanceof Sr?E.terrainTileRanges:null;for(let L of _){let k=this.terrain.sourceCache.getTerrainCoords(L,M);for(let B in k)this._coordsAscending[g][B]||(this._coordsAscending[g][B]=[]),this._coordsAscending[g][B].push(k[B])}}this._coordsAscendingStr={};for(let g of a._order){let _=a._layers[g],E=_.source;if(Nc[_.type]&&!this._coordsAscendingStr[E]){this._coordsAscendingStr[E]={};for(let M in this._coordsAscending[E])this._coordsAscendingStr[E][M]=this._coordsAscending[E][M].map(L=>L.key).sort().join()}}for(let g of this._renderableTiles)for(let _ in this._coordsAscendingStr){let E=this._coordsAscendingStr[_][g.tileID.key];E&&E!==g.rttCoords[_]&&(g.rtt=[])}}renderLayer(a,h){if(a.isHidden(this.painter.transform.zoom))return!1;let g=Object.assign(Object.assign({},h),{isRenderingToTexture:!0}),_=a.type,E=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Nc[_]&&(this._prevType&&Nc[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(a.id),!M))return!0;if(Nc[this._prevType]||Nc[_]&&M){this._prevType=_;let L=this._stacks.length-1,k=this._stacks[L]||[];for(let B of this._renderableTiles){if(this.pool.isFull()&&(Jv(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[L]){let W=this.pool.getObjectForId(B.rtt[L].id);if(W.stamp===B.rtt[L].stamp){this.pool.useObject(W);continue}}let V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),B.rtt[L]={id:V.id,stamp:V.stamp},E.context.bindFramebuffer.set(V.fbo.framebuffer),E.context.clear({color:o.bf.transparent,stencil:0}),E.currentStencilSource=void 0;for(let W=0;W<k.length;W++){let H=E.style._layers[k[W]],K=H.source?this._coordsAscending[H.source][B.tileID.key]:[B.tileID];E.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),E._renderTileClippingMasks(H,K,!0),E.renderLayer(E,E.style.sourceCaches[H.source],H,K,g),H.source&&(B.rttCoords[H.source]=this._coordsAscendingStr[H.source][B.tileID.key])}}return Jv(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects(),Nc[_]}return!1}}let aa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},KA=l,As={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zb,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},iF={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Gm{constructor(a,h,g=!1){this.mousedown=E=>{this.startMove(E,b.mousePos(this.element,E)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.move(E,b.mousePos(this.element,E))},this.mouseup=E=>{this._rotatePitchHandler.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.startMove(E,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.move(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=h;let _=new tF;this._rotatePitchHandler=new xp({clickTolerance:3,move:(E,M)=>{let L=h.getBoundingClientRect(),k=new o.P((L.bottom-L.top)/2,(L.right-L.left)/2);return{bearingDelta:o.cn(new o.P(E.x,M.y),M,k),pitchDelta:g?-.5*(M.y-E.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=a,b.addEventListener(h,"mousedown",this.mousedown),b.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(h,"touchcancel",this.reset)}startMove(a,h){this._rotatePitchHandler.dragStart(a,h),b.disableDrag()}move(a,h){let g=this.map,{bearingDelta:_,pitchDelta:E}=this._rotatePitchHandler.dragMove(a,h)||{};_&&g.setBearing(g.getBearing()+_),E&&g.setPitch(g.getPitch()+E)}off(){let a=this.element;b.removeEventListener(a,"mousedown",this.mousedown),b.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let On;function Ai(w,a,h,g=!1){if(g||!h.getCoveringTilesDetailsProvider().allowWorldCopies())return w==null?void 0:w.wrap();let _=new o.S(w.lng,w.lat);if(w=new o.S(w.lng,w.lat),a){let E=new o.S(w.lng-360,w.lat),M=new o.S(w.lng+360,w.lat),L=h.locationToScreenPoint(w).distSqr(a);h.locationToScreenPoint(E).distSqr(a)<L?w=E:h.locationToScreenPoint(M).distSqr(a)<L&&(w=M)}for(;Math.abs(w.lng-h.center.lng)>180;){let E=h.locationToScreenPoint(w);if(E.x>=0&&E.y>=0&&E.x<=h.width&&E.y<=h.height)break;w.lng>h.center.lng?w.lng-=360:w.lng+=360}return w.lng!==_.lng&&h.isPointOnMapSurface(h.locationToScreenPoint(w))?w:_}let ly={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Sp(w,a,h){let g=w.classList;for(let _ in ly)g.remove(`maplibregl-${h}-anchor-${_}`);g.add(`maplibregl-${h}-anchor-${a}`)}class Tp extends o.E{constructor(a){if(super(),this._onKeyPress=h=>{let g=h.code,_=h.charCode||h.keyCode;g!=="Space"&&g!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=h=>{let g=h.originalEvent.target,_=this._element;this._popup&&(g===_||_.contains(g))&&this.togglePopup()},this._update=h=>{if(!this._map)return;let g=this._map.loaded()&&!this._map.isMoving();((h==null?void 0:h.type)==="terrain"||(h==null?void 0:h.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=Ai(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${ly[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${_}`),x.frameAsync(new AbortController).then(()=>{this._updateOpacity(h&&h.type==="moveend")}).catch(()=>{})},this._onMove=h=>{if(!this._isDragging){let g=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");let h=b.createNS("http://www.w3.org/2000/svg","svg"),g=41,_=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${g}px`),h.setAttributeNS(null,"width",`${_}px`),h.setAttributeNS(null,"viewBox",`0 0 ${_} ${g}`);let E=b.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");let M=b.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");let L=b.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");let k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let fe of k){let ve=b.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",fe.rx),ve.setAttributeNS(null,"ry",fe.ry),L.appendChild(ve)}let B=b.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);let V=b.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(V);let W=b.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");let H=b.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(H);let K=b.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");let ee=b.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ce=b.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");let ue=b.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ce),ee.appendChild(ue),M.appendChild(L),M.appendChild(B),M.appendChild(W),M.appendChild(K),M.appendChild(ee),h.appendChild(M),h.setAttributeNS(null,"height",g*this._scale+"px"),h.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(h),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Sp(this._element,this._anchor,"marker"),a&&a.className)for(let h of a.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.S.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){let _=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){let a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var h,g;let _=(h=this._map)===null||h===void 0?void 0:h.terrain,E=this._map.transform.isLocationOccluded(this._lngLat);if(!_||E){let K=E?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let M=this._map,L=M.terrain.depthAtPoint(this._pos),k=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,k)-L<.006)return void(this._element.style.opacity=this._opacity);let B=-this._offset.y/M.transform.pixelsPerMeter,V=Math.sin(M.getPitch()*Math.PI/180)*B,W=M.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),H=M.transform.lngLatToCameraDepth(this._lngLat,k+V)-W>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,h){return(this._opacity===void 0||a===void 0&&h===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}let Kb={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ip=0,Jf=!1,$m={maxWidth:100,unit:"metric"};function uy(w,a,h){let g=h&&h.maxWidth||100,_=w._container.clientHeight/2,E=w._container.clientWidth/2,M=w.unproject([E-g/2,_]),L=w.unproject([E+g/2,_]),k=Math.round(w.project(L).x-w.project(M).x),B=Math.min(g,k,w._container.clientWidth),V=M.distanceTo(L);if(h&&h.unit==="imperial"){let W=3.2808*V;W>5280?eh(a,B,W/5280,w._getUIString("ScaleControl.Miles")):eh(a,B,W,w._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?eh(a,B,V/1852,w._getUIString("ScaleControl.NauticalMiles")):V>=1e3?eh(a,B,V/1e3,w._getUIString("ScaleControl.Kilometers")):eh(a,B,V,w._getUIString("ScaleControl.Meters"))}function eh(w,a,h,g){let _=function(E){let M=Math.pow(10,`${Math.floor(E)}`.length-1),L=E/M;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(k){let B=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*B)/B}(L),M*L}(h);w.style.width=a*(_/h)+"px",w.innerHTML=`${_}&nbsp;${g}`}let Xb={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Qb=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function cy(w){if(w){if(typeof w=="number"){let a=Math.round(Math.abs(w)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,w),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-w),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(w,0),right:new o.P(-w,0)}}if(w instanceof o.P||Array.isArray(w)){let a=o.P.convert(w);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(w.center||[0,0]),top:o.P.convert(w.top||[0,0]),"top-left":o.P.convert(w["top-left"]||[0,0]),"top-right":o.P.convert(w["top-right"]||[0,0]),bottom:o.P.convert(w.bottom||[0,0]),"bottom-left":o.P.convert(w["bottom-left"]||[0,0]),"bottom-right":o.P.convert(w["bottom-right"]||[0,0]),left:o.P.convert(w.left||[0,0]),right:o.P.convert(w.right||[0,0])}}return cy(new o.P(0,0))}let Jb=l;i.AJAXError=o.cz,i.Event=o.l,i.Evented=o.E,i.LngLat=o.S,i.MercatorCoordinate=o.a1,i.Point=o.P,i.addProtocol=o.cA,i.config=o.a,i.removeProtocol=o.cB,i.AttributionControl=Yb,i.BoxZoomHandler=Ub,i.CanvasSource=vr,i.CooperativeGesturesHandler=WA,i.DoubleClickZoomHandler=Gb,i.DragPanHandler=$A,i.DragRotateHandler=Hb,i.EdgeInsets=zf,i.FullscreenControl=class extends o.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var a;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=h==null?void 0:h.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let w=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=Gt,i.GeolocateControl=class extends o.E{constructor(w){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{let h=new o.S(a.coords.longitude,a.coords.latitude),g=a.coords.accuracy,_=this._map.getBearing(),E=o.e({bearing:_},this.options.fitBoundsOptions),M=Lt.fromLngLat(h,g);this._map.fitBounds(M,E,{geolocateSource:!0})},this._updateMarker=a=>{if(a){let h=new o.S(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=a.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=a=>{if(this._map){if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Jf)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");let h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{let h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Tp({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Tp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{let g=(h==null?void 0:h[0])instanceof ResizeObserverEntry;h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||g||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Kb,w)}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(On!==void 0&&!a)return On;if(window.navigator.permissions===void 0)return On=!!window.navigator.geolocation,On;try{On=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(h){On=!!window.navigator.geolocation}return On})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Ip=0,Jf=!1}_isOutOfMapMaxBounds(w){let a=this._map.getMaxBounds(),h=w.coords;return a&&(h.longitude<a.getWest()||h.longitude>a.getEast()||h.latitude<a.getSouth()||h.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;let a=this._map.project(w),h=this._map.unproject([a.x+100,a.y]),g=w.distanceTo(h)/100,_=2*this._accuracy/g;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ip--,Jf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ip++,Ip>1?(w={maximumAge:6e5,timeout:0},Jf=!0):(w=this.options.positionOptions,Jf=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},i.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;let a=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=b.create("button","maplibregl-ctrl-globe",this._container),b.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},i.Hash=ey,i.ImageSource=Sr,i.KeyboardHandler=ny,i.LngLatBounds=Lt,i.LogoControl=YA,i.Map=class extends ZA{constructor(w){var a,h;o.cw.mark(o.cx.create);let g=Object.assign(Object.assign(Object.assign({},As),w),{canvasContextAttributes:Object.assign(Object.assign({},As.canvasContextAttributes),w.canvasContextAttributes)});if(g.minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let _=new Fn,E=new Go;if(g.minZoom!==void 0&&_.setMinZoom(g.minZoom),g.maxZoom!==void 0&&_.setMaxZoom(g.maxZoom),g.minPitch!==void 0&&_.setMinPitch(g.minPitch),g.maxPitch!==void 0&&_.setMaxPitch(g.maxPitch),g.renderWorldCopies!==void 0&&_.setRenderWorldCopies(g.renderWorldCopies),super(_,E,{bearingSnap:g.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Gl,this._controls=[],this._mapId=o.a7(),this._contextLost=L=>{L.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:L}))},this._contextRestored=L=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:L}))},this._onMapScroll=L=>{if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},g.canvasContextAttributes),this._trackResize=g.trackResize===!0,this._bearingSnap=g.bearingSnap,this._centerClampedToGround=g.centerClampedToGround,this._refreshExpiredTiles=g.refreshExpiredTiles===!0,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions===!0,this._collectResourceTiming=g.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},aa),g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=g.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=U.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let L=!1,k=Xf(B=>{this._trackResize&&!this._removed&&(this.resize(B),this.redraw())},50);this._resizeObserver=new ResizeObserver(B=>{L?k(B):L=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Wb(this,g),this._hash=g.hash&&new ey(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,elevation:g.elevation,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,roll:g.roll}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,o.e({},g.fitBoundsOptions,{duration:0}))));let M=typeof g.style=="string"||((h=(a=g.style)===null||a===void 0?void 0:a.projection)===null||h===void 0?void 0:h.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Yb(typeof g.attributionControl=="boolean"?void 0:g.attributionControl)),g.maplibreLogo&&this.addControl(new YA,g.logoPosition),this.on("style.load",()=>{if(M||this._resizeTransform(),this.transform.unmodified){let L=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(L)}}),this.on("data",L=>{this._update(L.dataType==="style"),this.fire(new o.l(`${L.dataType}data`,L))}),this.on("dataloading",L=>{this.fire(new o.l(`${L.dataType}dataloading`,L))}),this.on("dataabort",L=>{this.fire(new o.l("sourcedataabort",L))})}_getMapId(){return this._mapId}setGlobalStateProperty(w,a){return this.style.setGlobalStateProperty(w,a),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,a){if(a===void 0&&(a=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let h=w.onAdd(this);this._controls.push(w);let g=this._controlPositions[a];return a.indexOf("bottom")!==-1?g.insertBefore(h,g.firstChild):g.appendChild(h),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let a=this._controls.indexOf(w);return a>-1&&this._controls.splice(a,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return xe(this.transform,w)}calculateCameraOptionsFromTo(w,a,h,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,a,h,g)}resize(w,a=!0){let[h,g]=this._containerDimensions(),_=this._getClampedPixelRatio(h,g);if(this._resizeCanvas(h,g,_),this.painter.resize(h,g,_),this.painter.overLimit()){let M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];let L=this._getClampedPixelRatio(h,g);this._resizeCanvas(h,g,L),this.painter.resize(h,g,L)}this._resizeTransform(a);let E=!this._moving;return E&&(this.stop(),this.fire(new o.l("movestart",w)).fire(new o.l("move",w))),this.fire(new o.l("resize",w)),E&&this.fire(new o.l("moveend",w)),this}_resizeTransform(w=!0){var a;let[h,g]=this._containerDimensions();this.transform.resize(h,g,w),(a=this._requestedCameraState)===null||a===void 0||a.resize(h,g,w)}_getClampedPixelRatio(w,a){let{0:h,1:g}=this._maxCanvasSize,_=this.getPixelRatio(),E=w*_,M=a*_;return Math.min(E>h?h/E:1,M>g?g/M:1)*_}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Lt.convert(w)),this._update()}setMinZoom(w){if((w=w==null?-2:w)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w==null?22:w)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w==null?0:w)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w==null?60:w)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(o.S.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(o.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,a,h){if(w==="mouseenter"||w==="mouseover"){let g=!1;return{layers:a,listener:h,delegates:{mousemove:E=>{let M=a.filter(k=>this.getLayer(k)),L=M.length!==0?this.queryRenderedFeatures(E.point,{layers:M}):[];L.length?g||(g=!0,h.call(this,new Aa(w,this,E.originalEvent,{features:L}))):g=!1},mouseout:()=>{g=!1}}}}if(w==="mouseleave"||w==="mouseout"){let g=!1;return{layers:a,listener:h,delegates:{mousemove:M=>{let L=a.filter(k=>this.getLayer(k));(L.length!==0?this.queryRenderedFeatures(M.point,{layers:L}):[]).length?g=!0:g&&(g=!1,h.call(this,new Aa(w,this,M.originalEvent)))},mouseout:M=>{g&&(g=!1,h.call(this,new Aa(w,this,M.originalEvent)))}}}}{let g=_=>{let E=a.filter(L=>this.getLayer(L)),M=E.length!==0?this.queryRenderedFeatures(_.point,{layers:E}):[];M.length&&(_.features=M,h.call(this,_),delete _.features)};return{layers:a,listener:h,delegates:{[w]:g}}}}_saveDelegatedListener(w,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(a)}_removeDelegatedListener(w,a,h){if(!this._delegatedListeners||!this._delegatedListeners[w])return;let g=this._delegatedListeners[w];for(let _=0;_<g.length;_++){let E=g[_];if(E.listener===h&&E.layers.length===a.length&&E.layers.every(M=>a.includes(M))){for(let M in E.delegates)this.off(M,E.delegates[M]);return void g.splice(_,1)}}}on(w,a,h){if(h===void 0)return super.on(w,a);let g=typeof a=="string"?[a]:a,_=this._createDelegatedListener(w,g,h);this._saveDelegatedListener(w,_);for(let E in _.delegates)this.on(E,_.delegates[E]);return{unsubscribe:()=>{this._removeDelegatedListener(w,g,h)}}}once(w,a,h){if(h===void 0)return super.once(w,a);let g=typeof a=="string"?[a]:a,_=this._createDelegatedListener(w,g,h);for(let E in _.delegates){let M=_.delegates[E];_.delegates[E]=(...L)=>{this._removeDelegatedListener(w,g,h),M(...L)}}this._saveDelegatedListener(w,_);for(let E in _.delegates)this.once(E,_.delegates[E]);return this}off(w,a,h){return h===void 0?super.off(w,a):(this._removeDelegatedListener(w,typeof a=="string"?[a]:a,h),this)}queryRenderedFeatures(w,a){if(!this.style)return[];let h,g=w instanceof o.P||Array.isArray(w),_=g?w:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(g?{}:w)||{},_ instanceof o.P||typeof _[0]=="number")h=[o.P.convert(_)];else{let E=o.P.convert(_[0]),M=o.P.convert(_[1]);h=[E,new o.P(M.x,E.y),M,new o.P(E.x,M.y),E]}return this.style.queryRenderedFeatures(h,a,this.transform)}querySourceFeatures(w,a){return this.style.querySourceFeatures(w,a)}setStyle(w,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(w,a))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){let a=this._locale[w];if(a==null)throw new Error(`Missing UI string '${w}'`);return a}_updateStyle(w,a){var h,g;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,a));let _=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new gb(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,a,_):this.style.loadJSON(w,a,_),this):((g=(h=this.style)===null||h===void 0?void 0:h.projection)===null||g===void 0||g.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new gb(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,a){if(typeof w=="string"){let h=this._requestManager.transformRequest(w,"Style");o.j(h,new AbortController).then(g=>{this._updateDiff(g.data,a)}).catch(g=>{g&&this.fire(new o.k(g))})}else typeof w=="object"&&this._updateDiff(w,a)}_updateDiff(w,a){try{this.style.setState(w,a)&&this._update(!0)}catch(h){o.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(w,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(w,a){return this._lazyInitEmptyStyle(),this.style.addSource(w,a),this._update(!0)}isSourceLoaded(w){let a=this.style&&this.style.sourceCaches[w];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){let a=this.style.sourceCaches[w.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&a.reload();for(let h in this.style._layers){let g=this.style._layers[h];g.type==="hillshade"&&g.source===w.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),g.type==="color-relief"&&g.source===w.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lr(this.painter,a,w),this.painter.renderToTexture=new sy(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=h=>{var g;h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((g=h.source)===null||g===void 0?void 0:g.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:w})),this}getTerrain(){var w,a;return(a=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&a!==void 0?a:null}areTilesLoaded(){let w=this.style&&this.style.sourceCaches;for(let a in w){let h=w[a]._tiles;for(let g in h){let _=h[g];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,a,h){if(h){let g=this.getSource(h);if(!g)throw new Error(`There is no source with ID "${h}", cannot set LOD parameters`);g.calculateTileZoom=pe(Math.max(1,w),Math.max(1,a))}else for(let g in this.style.sourceCaches)this.style.sourceCaches[g].getSource().calculateTileZoom=pe(Math.max(1,w),Math.max(1,a));return this._update(!0),this}refreshTiles(w,a){let h=this.style.sourceCaches[w];if(!h)throw new Error(`There is no source cache with ID "${w}", cannot refresh tile`);a===void 0?h.reload(!0):h.refreshTiles(a.map(g=>new o.a4(g.z,g.x,g.y)))}addImage(w,a,h={}){let{pixelRatio:g=1,sdf:_=!1,stretchX:E,stretchY:M,content:L,textFitWidth:k,textFitHeight:B}=h;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:V,height:W,data:H}=a,K=a;return this.style.addImage(w,{data:new o.R({width:V,height:W},new Uint8Array(H)),pixelRatio:g,stretchX:E,stretchY:M,content:L,textFitWidth:k,textFitHeight:B,sdf:_,version:0,userImage:K}),K.onAdd&&K.onAdd(this,w),this}}{let{width:V,height:W,data:H}=x.getImageData(a);this.style.addImage(w,{data:new o.R({width:V,height:W},H),pixelRatio:g,stretchX:E,stretchY:M,content:L,textFitWidth:k,textFitHeight:B,sdf:_,version:0})}}updateImage(w,a){let h=this.style.getImage(w);if(!h)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let g=a instanceof HTMLImageElement||o.b(a)?x.getImageData(a):a,{width:_,height:E,data:M}=g;if(_===void 0||E===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==h.data.width||E!==h.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let L=!(a instanceof HTMLImageElement||o.b(a));return h.data.replace(M,L),this.style.updateImage(w,h),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return U.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,a){return this._lazyInitEmptyStyle(),this.style.addLayer(w,a),this._update(!0)}moveLayer(w,a){return this.style.moveLayer(w,a),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,a,h){return this.style.setLayerZoomRange(w,a,h),this._update(!0)}setFilter(w,a,h={}){return this.style.setFilter(w,a,h),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,a,h,g={}){return this.style.setPaintProperty(w,a,h,g),this._update(!0)}getPaintProperty(w,a){return this.style.getPaintProperty(w,a)}setLayoutProperty(w,a,h,g={}){return this.style.setLayoutProperty(w,a,h,g),this._update(!0)}getLayoutProperty(w,a){return this.style.getLayoutProperty(w,a)}setGlyphs(w,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,a,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,a,h,g=>{g||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,a,h=>{h||this._update(!0)}),this}setLight(w,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,a){return this.style.setFeatureState(w,a),this._update()}removeFeatureState(w,a){return this.style.removeFeatureState(w,a),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,a=0;return this._container&&(w=this._container.clientWidth||400,a=this._container.clientHeight||300),[w,a]}_setupContainer(){let w=this._container;w.classList.add("maplibregl-map");let a=this._canvasContainer=b.create("div","maplibregl-canvas-container",w);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let h=this._containerDimensions(),g=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],g);let _=this._controlContainer=b.create("div","maplibregl-control-container",w),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{E[M]=b.create("div",`maplibregl-ctrl-${M} `,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,a,h){this._canvas.width=Math.floor(h*w),this._canvas.height=Math.floor(h*a),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${a}px`}_setupPainter(){let w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),a=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{a={requestedAttributes:w},g&&(a.statusMessage=g.statusMessage,a.type=g.type)},{once:!0});let h=null;if(h=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!h){let g="Failed to initialize WebGL";throw a?(a.message=g,new Error(JSON.stringify(a))):new Error(g)}this.painter=new DA(h,this.transform),A.testSupport(h)}migrateProjection(w,a){super.migrateProjection(w,a),this.painter.transform=w,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var a,h,g,_,E;let M=this._idleTriggered?this._fadeDuration:0,L=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let W=this.transform.zoom,H=x.now();this.style.zoomHistory.update(W,H);let K=new o.F(W,{now:H,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),ee=K.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(k=!0,this._crossFadingFactor=ee),this.style.update(K)}let B=((h=this.style.projection)===null||h===void 0?void 0:h.transitionState)>0!==L;(g=this.style.projection)===null||g===void 0||g.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(E=this.style.projection)===null||E===void 0?void 0:E.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||B)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,B),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cw.mark(o.cx.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,o.cw.mark(o.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(let h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();let a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cw.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frame(this._frameRequest,w=>{o.cw.frame(w),this._frameRequest=null;try{this._render(w)}catch(a){if(!o.cy(a)&&!function(h){return h.message===Dm}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return KA}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},i.MapMouseEvent=Aa,i.MapTouchEvent=vp,i.MapWheelEvent=zb,i.Marker=Tp,i.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{let a=this._map.getZoom(),h=a===this._map.getMaxZoom(),g=a===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,h)=>{let g=this._map._getUIString(`NavigationControl.${h}`);a.title=g,a.setAttribute("aria-label",g)},this.options=o.e({},iF,w),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,a){let h=b.create("button",w,this._container);return h.type="button",h.addEventListener("click",a),h}},i.Popup=class extends o.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Ai(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;let h=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let g=this.options.anchor,_=cy(this.options.offset);if(!g){let M=this._container.offsetWidth,L=this._container.offsetHeight,k;k=h.y+_.bottom.y<L?["top"]:h.y>this._map.transform.height-L?["bottom"]:[],h.x<M/2?k.push("left"):h.x>this._map.transform.width-M/2&&k.push("right"),g=k.length===0?"bottom":k.join("-")}let E=h.add(_[g]);this.options.subpixelPositioning||(E=E.round()),b.setTransform(this._container,`${ly[g]} translate(${E.x}px,${E.y}px)`),Sp(this._container,g,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Xb),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=o.S.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){let a=document.createDocumentFragment(),h=document.createElement("body"),g;for(h.innerHTML=w;g=h.firstChild,g;)a.appendChild(g);return this.setDOMContent(a)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let w=this._container.querySelector(Qb);w&&w.focus()}},i.RasterDEMTileSource=Xt,i.RasterTileSource=$t,i.ScaleControl=class{constructor(w){this._onMove=()=>{uy(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,uy(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},$m),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},i.ScrollZoomHandler=VA,i.Style=gb,i.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=ry,i.TwoFingersTouchRotateHandler=wp,i.TwoFingersTouchZoomHandler=ty,i.TwoFingersTouchZoomRotateHandler=HA,i.VectorTileSource=Pt,i.VideoSource=zr,i.addSourceType=(w,a)=>o._(void 0,void 0,void 0,function*(){if(dr(w))throw new Error(`A source type called "${w}" already exists.`);((h,g)=>{pr[h]=g})(w,a)}),i.clearPrewarmedResources=function(){let w=dt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(We),dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.createTileMesh=db,i.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return Rn().getRTLTextPluginStatus()},i.getVersion=function(){return Jb},i.getWorkerCount=function(){return lt.workerCount},i.getWorkerUrl=function(){return o.a.WORKER_URL},i.importScriptInWorkers=function(w){return Ue().broadcast("IS",w)},i.prewarm=function(){Dt().acquire(We)},i.setMaxParallelImageRequests=function(w){o.a.MAX_PARALLEL_IMAGE_REQUESTS=w},i.setRTLTextPlugin=function(w,a){return Rn().setRTLTextPlugin(w,a)},i.setWorkerCount=function(w){lt.workerCount=w},i.setWorkerUrl=function(w){o.a.WORKER_URL=w}});var n=t;return n})});var TL=R((aYr,UOe)=>{p();var VW=1/0,MHt=17976931348623157e292,LOe=NaN,CHt="[object Symbol]",PHt=/^\s+|\s+$/g,RHt=/^[-+]0x[0-9a-f]+$/i,OHt=/^0b[01]+$/i,LHt=/^0o[0-7]+$/i,DHt=parseInt,NHt=typeof global=="object"&&global&&global.Object===Object&&global,kHt=typeof self=="object"&&self&&self.Object===Object&&self,qHt=NHt||kHt||Function("return this")(),FHt=Object.prototype,jHt=FHt.toString,DOe=qHt.Symbol,zHt=Math.min,NOe=DOe?DOe.prototype:void 0,kOe=NOe?NOe.toString:void 0;function UHt(t){if(typeof t=="string")return t;if(jOe(t))return kOe?kOe.call(t):"";var e=t+"";return e=="0"&&1/t==-VW?"-0":e}function BHt(t){var e=Math[t];return function(r,n){if(r=zOe(r),n=zHt($Ht(n),292),n){var i=(FOe(r)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+n));return i=(FOe(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(r)}}function qOe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function VHt(t){return!!t&&typeof t=="object"}function jOe(t){return typeof t=="symbol"||VHt(t)&&jHt.call(t)==CHt}function GHt(t){if(!t)return t===0?t:0;if(t=zOe(t),t===VW||t===-VW){var e=t<0?-1:1;return e*MHt}return t===t?t:0}function $Ht(t){var e=GHt(t),r=e%1;return e===e?r?e-r:e:0}function zOe(t){if(typeof t=="number")return t;if(jOe(t))return LOe;if(qOe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=qOe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(PHt,"");var r=OHt.test(t);return r||LHt.test(t)?DHt(t.slice(2),r?2:8):RHt.test(t)?LOe:+t}function FOe(t){return t==null?"":UHt(t)}var HHt=BHt("round");UOe.exports=HHt});var s2e=R((U9r,a2e)=>{"use strict";p();a2e.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var h2e=R((V9r,f2e)=>{"use strict";p();var c2e="%[a-f0-9]{2}",l2e=new RegExp("("+c2e+")|([^%]+?)","gi"),u2e=new RegExp("("+c2e+")+","gi");function D8(t,e){try{return[decodeURIComponent(t.join(""))]}catch(i){}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],D8(r),D8(n))}function vKt(t){try{return decodeURIComponent(t)}catch(n){for(var e=t.match(l2e)||[],r=1;r<e.length;r++)t=D8(e,r).join(""),e=t.match(l2e)||[];return t}}function yKt(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=u2e.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(f){var n=vKt(r[0]);n!==r[0]&&(e[r[0]]=n)}r=u2e.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),o=0;o<i.length;o++){var l=i[o];t=t.replace(new RegExp(l,"g"),e[l])}return t}f2e.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return yKt(t)}}});var d2e=R(($9r,p2e)=>{"use strict";p();p2e.exports=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];let r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]}});var g2e=R((W9r,m2e)=>{"use strict";p();m2e.exports=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),o=0;o<n.length;o++){var l=n[o],f=t[l];(i?e.indexOf(l)!==-1:e(l,f,t))&&(r[l]=f)}return r}});var k8=R($s=>{"use strict";p();var _Kt=s2e(),xKt=h2e(),y2e=d2e(),bKt=g2e(),wKt=t=>t==null,N8=Symbol("encodeFragmentIdentifier");function EKt(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{let i=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[so(e,t),"[",i,"]"].join("")]:[...r,[so(e,t),"[",so(i,t),"]=",so(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[so(e,t),"[]"].join("")]:[...r,[so(e,t),"[]=",so(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[so(e,t),":list="].join("")]:[...r,[so(e,t),":list=",so(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[so(r,t),e,so(i,t)].join("")]:[[n,so(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,so(e,t)]:[...r,[so(e,t),"=",so(n,t)].join("")]}}function SKt(t){let e;switch(t.arrayFormat){case"index":return(r,n,i)=>{if(e=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!e){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][e[1]]=n};case"bracket":return(r,n,i)=>{if(e=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"colon-list-separator":return(r,n,i)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[].concat(i[r],n)};case"comma":case"separator":return(r,n,i)=>{let o=typeof n=="string"&&n.includes(t.arrayFormatSeparator),l=typeof n=="string"&&!o&&Rh(n,t).includes(t.arrayFormatSeparator);n=l?Rh(n,t):n;let f=o||l?n.split(t.arrayFormatSeparator).map(d=>Rh(d,t)):n===null?n:Rh(n,t);i[r]=f};case"bracket-separator":return(r,n,i)=>{let o=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!o){i[r]=n&&Rh(n,t);return}let l=n===null?[]:n.split(t.arrayFormatSeparator).map(f=>Rh(f,t));if(i[r]===void 0){i[r]=l;return}i[r]=[].concat(i[r],l)};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[].concat(i[r],n)}}}function _2e(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function so(t,e){return e.encode?e.strict?_Kt(t):encodeURIComponent(t):t}function Rh(t,e){return e.decode?xKt(t):t}function x2e(t){return Array.isArray(t)?t.sort():typeof t=="object"?x2e(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function b2e(t){let e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function TKt(t){let e="",r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function w2e(t){t=b2e(t);let e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function v2e(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function E2e(t,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),_2e(e.arrayFormatSeparator);let r=SKt(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(let i of t.split("&")){if(i==="")continue;let[o,l]=y2e(e.decode?i.replace(/\+/g," "):i,"=");l=l===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?l:Rh(l,e),r(Rh(o,e),l,n)}for(let i of Object.keys(n)){let o=n[i];if(typeof o=="object"&&o!==null)for(let l of Object.keys(o))o[l]=v2e(o[l],e);else n[i]=v2e(o,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,o)=>{let l=n[o];return l&&typeof l=="object"&&!Array.isArray(l)?i[o]=x2e(l):i[o]=l,i},Object.create(null))}$s.extract=w2e;$s.parse=E2e;$s.stringify=(t,e)=>{if(!t)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),_2e(e.arrayFormatSeparator);let r=l=>e.skipNull&&wKt(t[l])||e.skipEmptyString&&t[l]==="",n=EKt(e),i={};for(let l of Object.keys(t))r(l)||(i[l]=t[l]);let o=Object.keys(i);return e.sort!==!1&&o.sort(e.sort),o.map(l=>{let f=t[l];return f===void 0?"":f===null?so(l,e):Array.isArray(f)?f.length===0&&e.arrayFormat==="bracket-separator"?so(l,e)+"[]":f.reduce(n(l),[]).join("&"):so(l,e)+"="+so(f,e)}).filter(l=>l.length>0).join("&")};$s.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[r,n]=y2e(t,"#");return Object.assign({url:r.split("?")[0]||"",query:E2e(w2e(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Rh(n,e)}:{})};$s.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0,[N8]:!0},e);let r=b2e(t.url).split("?")[0]||"",n=$s.extract(t.url),i=$s.parse(n,{sort:!1}),o=Object.assign(i,t.query),l=$s.stringify(o,e);l&&(l=`?${l}`);let f=TKt(t.url);return t.fragmentIdentifier&&(f=`#${e[N8]?so(t.fragmentIdentifier,e):t.fragmentIdentifier}`),`${r}${l}${f}`};$s.pick=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[N8]:!1},r);let{url:n,query:i,fragmentIdentifier:o}=$s.parseUrl(t,r);return $s.stringifyUrl({url:n,query:bKt(i,e),fragmentIdentifier:o},r)};$s.exclude=(t,e,r)=>{let n=Array.isArray(e)?i=>!e.includes(i):(i,o)=>!e(i,o);return $s.pick(t,n,r)}});var C2e=R((fKr,M2e)=>{"use strict";p();var IKt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";M2e.exports=IKt});var L2e=R((pKr,O2e)=>{"use strict";p();var AKt=C2e();function P2e(){}function R2e(){}R2e.resetWarningCache=P2e;O2e.exports=function(){function t(n,i,o,l,f,d){if(d!==AKt){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:R2e,resetWarningCache:P2e};return r.PropTypes=r,r}});var ln=R((vKr,D2e)=>{p();D2e.exports=L2e()();var mKr,gKr});var R0=R((qKr,z2e)=>{p();var CKt=z2e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=CKt)});var df=R((jKr,U2e)=>{p();var PKt=U2e.exports={version:"2.6.12"};typeof __e=="number"&&(__e=PKt)});var V2e=R((UKr,B2e)=>{p();B2e.exports=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t}});var c2=R((VKr,G2e)=>{p();var RKt=V2e();G2e.exports=function(t,e,r){if(RKt(t),e===void 0)return t;switch(r){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}});var eT=R(($Kr,$2e)=>{p();$2e.exports=function(t){return typeof t=="object"?t!==null:typeof t=="function"}});var O0=R((WKr,H2e)=>{p();var OKt=eT();H2e.exports=function(t){if(!OKt(t))throw TypeError(t+" is not an object!");return t}});var f2=R((YKr,W2e)=>{p();W2e.exports=function(t){try{return!!t()}catch(e){return!0}}});var zd=R((XKr,Z2e)=>{p();Z2e.exports=!f2()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var j8=R((JKr,K2e)=>{p();var Y2e=eT(),F8=R0().document,LKt=Y2e(F8)&&Y2e(F8.createElement);K2e.exports=function(t){return LKt?F8.createElement(t):{}}});var z8=R((t7r,X2e)=>{p();X2e.exports=!zd()&&!f2()(function(){return Object.defineProperty(j8()("div"),"a",{get:function(){return 7}}).a!=7})});var U8=R((n7r,Q2e)=>{p();var h2=eT();Q2e.exports=function(t,e){if(!h2(t))return t;var r,n;if(e&&typeof(r=t.toString)=="function"&&!h2(n=r.call(t))||typeof(r=t.valueOf)=="function"&&!h2(n=r.call(t))||!e&&typeof(r=t.toString)=="function"&&!h2(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}});var tT=R(eDe=>{p();var J2e=O0(),DKt=z8(),NKt=U8(),kKt=Object.defineProperty;eDe.f=zd()?Object.defineProperty:function(e,r,n){if(J2e(e),r=NKt(r,!0),J2e(n),DKt)try{return kKt(e,r,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[r]=n.value),e}});var rT=R((s7r,tDe)=>{p();tDe.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}});var nT=R((u7r,rDe)=>{p();var qKt=tT(),FKt=rT();rDe.exports=zd()?function(t,e,r){return qKt.f(t,e,FKt(1,r))}:function(t,e,r){return t[e]=r,t}});var L0=R((f7r,nDe)=>{p();var jKt={}.hasOwnProperty;nDe.exports=function(t,e){return jKt.call(t,e)}});var Ud=R((p7r,oDe)=>{p();var p2=R0(),B8=df(),iDe=c2(),zKt=nT(),UKt=L0(),d2="prototype",Fa=function(t,e,r){var n=t&Fa.F,i=t&Fa.G,o=t&Fa.S,l=t&Fa.P,f=t&Fa.B,d=t&Fa.W,v=i?B8:B8[e]||(B8[e]={}),x=v[d2],b=i?p2:o?p2[e]:(p2[e]||{})[d2],A,P,N;i&&(r=e);for(A in r)P=!n&&b&&b[A]!==void 0,!(P&&UKt(v,A))&&(N=P?b[A]:r[A],v[A]=i&&typeof b[A]!="function"?r[A]:f&&P?iDe(N,p2):d&&b[A]==N?function(j){var D=function(F,U,$){if(this instanceof j){switch(arguments.length){case 0:return new j;case 1:return new j(F);case 2:return new j(F,U)}return new j(F,U,$)}return j.apply(this,arguments)};return D[d2]=j[d2],D}(N):l&&typeof N=="function"?iDe(Function.call,N):N,l&&((v.virtual||(v.virtual={}))[A]=N,t&Fa.R&&x&&!x[A]&&zKt(x,A,N)))};Fa.F=1;Fa.G=2;Fa.S=4;Fa.P=8;Fa.B=16;Fa.W=32;Fa.U=64;Fa.R=128;oDe.exports=Fa});var V8=R((m7r,aDe)=>{p();var BKt={}.toString;aDe.exports=function(t){return BKt.call(t).slice(8,-1)}});var G8=R((v7r,sDe)=>{p();var VKt=V8();sDe.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return VKt(t)=="String"?t.split(""):Object(t)}});var m2=R((_7r,lDe)=>{p();lDe.exports=function(t){if(t==null)throw TypeError("Can't call method on  "+t);return t}});var iT=R((b7r,uDe)=>{p();var GKt=G8(),$Kt=m2();uDe.exports=function(t){return GKt($Kt(t))}});var g2=R((E7r,cDe)=>{p();var HKt=Math.ceil,WKt=Math.floor;cDe.exports=function(t){return isNaN(t=+t)?0:(t>0?WKt:HKt)(t)}});var $8=R((T7r,fDe)=>{p();var ZKt=g2(),YKt=Math.min;fDe.exports=function(t){return t>0?YKt(ZKt(t),9007199254740991):0}});var pDe=R((A7r,hDe)=>{p();var KKt=g2(),XKt=Math.max,QKt=Math.min;hDe.exports=function(t,e){return t=KKt(t),t<0?XKt(t+e,0):QKt(t,e)}});var mDe=R((C7r,dDe)=>{p();var JKt=iT(),e7t=$8(),t7t=pDe();dDe.exports=function(t){return function(e,r,n){var i=JKt(e),o=e7t(i.length),l=t7t(n,o),f;if(t&&r!=r){for(;o>l;)if(f=i[l++],f!=f)return!0}else for(;o>l;l++)if((t||l in i)&&i[l]===r)return t||l||0;return!t&&-1}}});var H8=R((R7r,gDe)=>{p();gDe.exports=!0});var W8=R((L7r,xDe)=>{p();var r7t=df(),vDe=R0(),yDe="__core-js_shared__",_De=vDe[yDe]||(vDe[yDe]={});(xDe.exports=function(t,e){return _De[t]||(_De[t]=e!==void 0?e:{})})("versions",[]).push({version:r7t.version,mode:H8()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var Z8=R((N7r,bDe)=>{p();var n7t=0,i7t=Math.random();bDe.exports=function(t){return"Symbol(".concat(t===void 0?"":t,")_",(++n7t+i7t).toString(36))}});var v2=R((q7r,EDe)=>{p();var wDe=W8()("keys"),o7t=Z8();EDe.exports=function(t){return wDe[t]||(wDe[t]=o7t(t))}});var IDe=R((j7r,TDe)=>{p();var SDe=L0(),a7t=iT(),s7t=mDe()(!1),l7t=v2()("IE_PROTO");TDe.exports=function(t,e){var r=a7t(t),n=0,i=[],o;for(o in r)o!=l7t&&SDe(r,o)&&i.push(o);for(;e.length>n;)SDe(r,o=e[n++])&&(~s7t(i,o)||i.push(o));return i}});var Y8=R((U7r,ADe)=>{p();ADe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var y2=R((V7r,MDe)=>{p();var u7t=IDe(),c7t=Y8();MDe.exports=Object.keys||function(e){return u7t(e,c7t)}});var PDe=R(CDe=>{p();CDe.f=Object.getOwnPropertySymbols});var _2=R(RDe=>{p();RDe.f={}.propertyIsEnumerable});var x2=R((Y7r,ODe)=>{p();var f7t=m2();ODe.exports=function(t){return Object(f7t(t))}});var NDe=R((X7r,DDe)=>{"use strict";p();var h7t=zd(),LDe=y2(),p7t=PDe(),d7t=_2(),m7t=x2(),g7t=G8(),b2=Object.assign;DDe.exports=!b2||f2()(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(i){e[i]=i}),b2({},t)[r]!=7||Object.keys(b2({},e)).join("")!=n})?function(e,r){for(var n=m7t(e),i=arguments.length,o=1,l=p7t.f,f=d7t.f;i>o;)for(var d=g7t(arguments[o++]),v=l?LDe(d).concat(l(d)):LDe(d),x=v.length,b=0,A;x>b;)A=v[b++],(!h7t||f.call(d,A))&&(n[A]=d[A]);return n}:b2});var kDe=R(()=>{p();var K8=Ud();K8(K8.S+K8.F,"Object",{assign:NDe()})});var FDe=R((rXr,qDe)=>{p();kDe();qDe.exports=df().Object.assign});var zDe=R((aXr,jDe)=>{p();var v7t=tT(),y7t=O0(),_7t=y2();jDe.exports=zd()?Object.defineProperties:function(e,r){y7t(e);for(var n=_7t(r),i=n.length,o=0,l;i>o;)v7t.f(e,l=n[o++],r[l]);return e}});var VDe=R((lXr,BDe)=>{p();var UDe=R0().document;BDe.exports=UDe&&UDe.documentElement});var eZ=R((cXr,$De)=>{p();var x7t=O0(),b7t=zDe(),GDe=Y8(),w7t=v2()("IE_PROTO"),Q8=function(){},J8="prototype",w2=function(){var t=j8()("iframe"),e=GDe.length,r="<",n=">",i;for(t.style.display="none",VDe().appendChild(t),t.src="javascript:",i=t.contentWindow.document,i.open(),i.write(r+"script"+n+"document.F=Object"+r+"/script"+n),i.close(),w2=i.F;e--;)delete w2[J8][GDe[e]];return w2()};$De.exports=Object.create||function(e,r){var n;return e!==null?(Q8[J8]=x7t(e),n=new Q8,Q8[J8]=null,n[w7t]=e):n=w2(),r===void 0?n:b7t(n,r)}});var WDe=R(()=>{p();var HDe=Ud();HDe(HDe.S,"Object",{create:eZ()})});var YDe=R((mXr,ZDe)=>{p();WDe();var E7t=df().Object;ZDe.exports=function(e,r){return E7t.create(e,r)}});var QDe=R(XDe=>{p();var S7t=_2(),T7t=rT(),I7t=iT(),A7t=U8(),M7t=L0(),C7t=z8(),KDe=Object.getOwnPropertyDescriptor;XDe.f=zd()?KDe:function(e,r){if(e=I7t(e),r=A7t(r,!0),C7t)try{return KDe(e,r)}catch(n){}if(M7t(e,r))return T7t(!S7t.f.call(e,r),e[r])}});var tNe=R((_Xr,eNe)=>{p();var P7t=eT(),R7t=O0(),JDe=function(t,e){if(R7t(t),!P7t(e)&&e!==null)throw TypeError(e+": can't set as prototype!")};eNe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=c2()(Function.call,QDe().f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(i,o){return JDe(i,o),e?i.__proto__=o:r(i,o),i}}({},!1):void 0),check:JDe}});var nNe=R(()=>{p();var rNe=Ud();rNe(rNe.S,"Object",{setPrototypeOf:tNe().set})});var oNe=R((SXr,iNe)=>{p();nNe();iNe.exports=df().Object.setPrototypeOf});var Ei=R((LXr,S2)=>{p();(function(){"use strict";var t={}.hasOwnProperty;function e(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=n(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return e.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)t.call(i,l)&&i[l]&&(o=n(o,l));return o}function n(i,o){return o?i?i+" "+o:i+o:i}typeof S2!="undefined"&&S2.exports?(e.default=e,S2.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var T2=R((jXr,sNe)=>{"use strict";p();var O7t=function(t,e,r,n,i,o,l,f){if(!t){var d;if(e===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=[r,n,i,o,l,f],x=0;d=new Error(e.replace(/%s/g,function(){return v[x++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};sNe.exports=O7t});var oZ=R(iZ=>{"use strict";p();Object.defineProperty(iZ,"__esModule",{value:!0});function hNe(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function pNe(t){function e(r){var n=this.constructor.getDerivedStateFromProps(t,r);return n!=null?n:null}this.setState(e.bind(this))}function dNe(t,e){try{var r=this.props,n=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}hNe.__suppressDeprecationWarning=!0;pNe.__suppressDeprecationWarning=!0;dNe.__suppressDeprecationWarning=!0;function D7t(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var r=null,n=null,i=null;if(typeof e.componentWillMount=="function"?r="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),r!==null||n!==null||i!==null){var o=t.displayName||t.name,l=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+l+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=hNe,e.componentWillReceiveProps=pNe),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=dNe;var f=e.componentDidUpdate;e.componentDidUpdate=function(v,x,b){var A=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:b;f.call(this,v,x,A)}}return t}iZ.polyfill=D7t});var aZ=R((hQr,vNe)=>{p();var k7t=zd(),q7t=y2(),F7t=iT(),j7t=_2().f;vNe.exports=function(t){return function(e){for(var r=F7t(e),n=q7t(r),i=n.length,o=0,l=[],f;i>o;)f=n[o++],(!k7t||j7t.call(r,f))&&l.push(t?[f,r[f]]:r[f]);return l}}});var _Ne=R(()=>{p();var yNe=Ud(),z7t=aZ()(!0);yNe(yNe.S,"Object",{entries:function(e){return z7t(e)}})});var bNe=R((vQr,xNe)=>{p();_Ne();xNe.exports=df().Object.entries});var sZ=R((_Qr,wNe)=>{p();wNe.exports=bNe()});var lT=R((M2,MNe)=>{"use strict";p();Object.defineProperty(M2,"__esModule",{value:!0});M2.default=Y7t;function Y7t(t){function e(n,i,o,l,f,d){var v=l||"<<anonymous>>",x=d||o;if(i[o]==null)return n?new Error("Required "+f+" `"+x+"` was not specified "+("in `"+v+"`.")):null;for(var b=arguments.length,A=Array(b>6?b-6:0),P=6;P<b;P++)A[P-6]=arguments[P];return t.apply(void 0,[i,o,v,f,x].concat(A))}var r=e.bind(null,!1);return r.isRequired=e.bind(null,!0),r}MNe.exports=M2.default});var ONe=R(()=>{p();var RNe=Ud(),K7t=aZ()(!1);RNe(RNe.S,"Object",{values:function(e){return K7t(e)}})});var DNe=R((qQr,LNe)=>{p();ONe();LNe.exports=df().Object.values});var kNe=R((jQr,NNe)=>{p();NNe.exports=DNe()});var jNe=R(Wn=>{"use strict";p();var Jo=typeof Symbol=="function"&&Symbol.for,dZ=Jo?Symbol.for("react.element"):60103,mZ=Jo?Symbol.for("react.portal"):60106,P2=Jo?Symbol.for("react.fragment"):60107,R2=Jo?Symbol.for("react.strict_mode"):60108,O2=Jo?Symbol.for("react.profiler"):60114,L2=Jo?Symbol.for("react.provider"):60109,D2=Jo?Symbol.for("react.context"):60110,gZ=Jo?Symbol.for("react.async_mode"):60111,N2=Jo?Symbol.for("react.concurrent_mode"):60111,k2=Jo?Symbol.for("react.forward_ref"):60112,q2=Jo?Symbol.for("react.suspense"):60113,J7t=Jo?Symbol.for("react.suspense_list"):60120,F2=Jo?Symbol.for("react.memo"):60115,j2=Jo?Symbol.for("react.lazy"):60116,eXt=Jo?Symbol.for("react.block"):60121,tXt=Jo?Symbol.for("react.fundamental"):60117,rXt=Jo?Symbol.for("react.responder"):60118,nXt=Jo?Symbol.for("react.scope"):60119;function Ml(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case dZ:switch(t=t.type,t){case gZ:case N2:case P2:case O2:case R2:case q2:return t;default:switch(t=t&&t.$$typeof,t){case D2:case k2:case j2:case F2:case L2:return t;default:return e}}case mZ:return e}}}function FNe(t){return Ml(t)===N2}Wn.AsyncMode=gZ;Wn.ConcurrentMode=N2;Wn.ContextConsumer=D2;Wn.ContextProvider=L2;Wn.Element=dZ;Wn.ForwardRef=k2;Wn.Fragment=P2;Wn.Lazy=j2;Wn.Memo=F2;Wn.Portal=mZ;Wn.Profiler=O2;Wn.StrictMode=R2;Wn.Suspense=q2;Wn.isAsyncMode=function(t){return FNe(t)||Ml(t)===gZ};Wn.isConcurrentMode=FNe;Wn.isContextConsumer=function(t){return Ml(t)===D2};Wn.isContextProvider=function(t){return Ml(t)===L2};Wn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===dZ};Wn.isForwardRef=function(t){return Ml(t)===k2};Wn.isFragment=function(t){return Ml(t)===P2};Wn.isLazy=function(t){return Ml(t)===j2};Wn.isMemo=function(t){return Ml(t)===F2};Wn.isPortal=function(t){return Ml(t)===mZ};Wn.isProfiler=function(t){return Ml(t)===O2};Wn.isStrictMode=function(t){return Ml(t)===R2};Wn.isSuspense=function(t){return Ml(t)===q2};Wn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===P2||t===N2||t===O2||t===R2||t===q2||t===J7t||typeof t=="object"&&t!==null&&(t.$$typeof===j2||t.$$typeof===F2||t.$$typeof===L2||t.$$typeof===D2||t.$$typeof===k2||t.$$typeof===tXt||t.$$typeof===rXt||t.$$typeof===nXt||t.$$typeof===eXt)};Wn.typeOf=Ml});var UNe=R((ZQr,zNe)=>{"use strict";p();zNe.exports=jNe()});var Lh=R((z2,VNe)=>{"use strict";p();Object.defineProperty(z2,"__esModule",{value:!0});var iXt=St(),oXt=BNe(iXt),aXt=UNe(),sXt=lT(),lXt=BNe(sXt);function BNe(t){return t&&t.__esModule?t:{default:t}}function uXt(t,e,r,n,i){var o=t[e];return oXt.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,aXt.isValidElementType)(o)?null:new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}z2.default=(0,lXt.default)(uXt);VNe.exports=z2.default});var V2=R((B2,ZNe)=>{"use strict";p();Object.defineProperty(B2,"__esModule",{value:!0});B2.default=yXt;var mXt=lT(),gXt=vXt(mXt);function vXt(t){return t&&t.__esModule?t:{default:t}}function yXt(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];function n(){for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];var f=null;return e.forEach(function(d){if(f==null){var v=d.apply(void 0,o);v!=null&&(f=v)}}),f}return(0,gXt.default)(n)}ZNe.exports=B2.default});var EZ=R((wJr,QNe)=>{"use strict";p();var bXt=function(){};QNe.exports=bXt});var za=R((SJr,cT)=>{p();function wXt(t){return t&&t.__esModule?t:{default:t}}cT.exports=wXt,cT.exports.__esModule=!0,cT.exports.default=cT.exports});var eke=R(($2,JNe)=>{"use strict";p();$2.__esModule=!0;$2.default=SXt;var EXt=/-(.)/g;function SXt(t){return t.replace(EXt,function(e,r){return r.toUpperCase()})}JNe.exports=$2.default});var SZ=R((H2,tke)=>{"use strict";p();var TXt=za();H2.__esModule=!0;H2.default=MXt;var IXt=TXt(eke()),AXt=/^-ms-/;function MXt(t){return(0,IXt.default)(t.replace(AXt,"ms-"))}tke.exports=H2.default});var nke=R((W2,rke)=>{"use strict";p();W2.__esModule=!0;W2.default=PXt;var CXt=/([A-Z])/g;function PXt(t){return t.replace(CXt,"-$1").toLowerCase()}rke.exports=W2.default});var oke=R((Z2,ike)=>{"use strict";p();var RXt=za();Z2.__esModule=!0;Z2.default=DXt;var OXt=RXt(nke()),LXt=/^ms-/;function DXt(t){return(0,OXt.default)(t).replace(LXt,"-ms-")}ike.exports=Z2.default});var ske=R((Y2,ake)=>{"use strict";p();var NXt=za();Y2.__esModule=!0;Y2.default=jXt;var kXt=NXt(SZ()),qXt=/^(top|right|bottom|left)$/,FXt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function jXt(t){if(!t)throw new TypeError("No Element passed to `getComputedStyle()`");var e=t.ownerDocument;return"defaultView"in e?e.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):window.getComputedStyle(t,null):{getPropertyValue:function(n){var i=t.style;n=(0,kXt.default)(n),n=="float"&&(n="styleFloat");var o=t.currentStyle[n]||null;if(o==null&&i&&i[n]&&(o=i[n]),FXt.test(o)&&!qXt.test(n)){var l=i.left,f=t.runtimeStyle,d=f&&f.left;d&&(f.left=t.currentStyle.left),i.left=n==="fontSize"?"1em":o,o=i.pixelLeft+"px",i.left=l,d&&(f.left=d)}return o}}}ake.exports=Y2.default});var uke=R((K2,lke)=>{"use strict";p();K2.__esModule=!0;K2.default=zXt;function zXt(t,e){return"removeProperty"in t.style?t.style.removeProperty(e):t.style.removeAttribute(e)}lke.exports=K2.default});var gf=R((fT,cke)=>{"use strict";p();fT.__esModule=!0;fT.default=void 0;var UXt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);fT.default=UXt;cke.exports=fT.default});var gke=R(cn=>{"use strict";p();var BXt=za();cn.__esModule=!0;cn.default=cn.animationEnd=cn.animationDelay=cn.animationTiming=cn.animationDuration=cn.animationName=cn.transitionEnd=cn.transitionDuration=cn.transitionDelay=cn.transitionTiming=cn.transitionProperty=cn.transform=void 0;var VXt=BXt(gf()),Q2="transform";cn.transform=Q2;var vf,TZ,fke;cn.animationEnd=fke;cn.transitionEnd=TZ;var IZ,AZ,MZ,CZ;cn.transitionDelay=CZ;cn.transitionTiming=MZ;cn.transitionDuration=AZ;cn.transitionProperty=IZ;var hke,pke,dke,mke;cn.animationDelay=mke;cn.animationTiming=dke;cn.animationDuration=pke;cn.animationName=hke;VXt.default&&(X2=$Xt(),vf=X2.prefix,cn.transitionEnd=TZ=X2.transitionEnd,cn.animationEnd=fke=X2.animationEnd,cn.transform=Q2=vf+"-"+Q2,cn.transitionProperty=IZ=vf+"-transition-property",cn.transitionDuration=AZ=vf+"-transition-duration",cn.transitionDelay=CZ=vf+"-transition-delay",cn.transitionTiming=MZ=vf+"-transition-timing-function",cn.animationName=hke=vf+"-animation-name",cn.animationDuration=pke=vf+"-animation-duration",cn.animationTiming=dke=vf+"-animation-delay",cn.animationDelay=mke=vf+"-animation-timing-function");var X2,GXt={transform:Q2,end:TZ,property:IZ,timing:MZ,delay:CZ,duration:AZ};cn.default=GXt;function $Xt(){for(var t=document.createElement("div").style,e={O:function(v){return"o"+v.toLowerCase()},Moz:function(v){return v.toLowerCase()},Webkit:function(v){return"webkit"+v},ms:function(v){return"MS"+v}},r=Object.keys(e),n,i,o="",l=0;l<r.length;l++){var f=r[l];if(f+"TransitionProperty"in t){o="-"+f.toLowerCase(),n=e[f]("TransitionEnd"),i=e[f]("AnimationEnd");break}}return!n&&"transitionProperty"in t&&(n="transitionend"),!i&&"animationName"in t&&(i="animationend"),t=null,{animationEnd:i,transitionEnd:n,prefix:o}}});var yke=R((J2,vke)=>{"use strict";p();J2.__esModule=!0;J2.default=WXt;var HXt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function WXt(t){return!!(t&&HXt.test(t))}vke.exports=J2.default});var xke=R((eD,_ke)=>{"use strict";p();var hT=za();eD.__esModule=!0;eD.default=JXt;var ZXt=hT(SZ()),PZ=hT(oke()),YXt=hT(ske()),KXt=hT(uke()),XXt=gke(),QXt=hT(yke());function JXt(t,e,r){var n="",i="",o=e;if(typeof e=="string"){if(r===void 0)return t.style[(0,ZXt.default)(e)]||(0,YXt.default)(t).getPropertyValue((0,PZ.default)(e));(o={})[e]=r}Object.keys(o).forEach(function(l){var f=o[l];!f&&f!==0?(0,KXt.default)(t,(0,PZ.default)(l)):(0,QXt.default)(l)?i+=l+"("+f+") ":n+=(0,PZ.default)(l)+": "+f+";"}),i&&(n+=XXt.transform+": "+i+";"),t.style.cssText+=";"+n}_ke.exports=eD.default});var bke=R(j0=>{"use strict";p();j0.__esModule=!0;j0.classNamesShape=j0.timeoutsShape=void 0;var qJr=eQt(ln());function eQt(t){return t&&t.__esModule?t:{default:t}}var tQt=null;j0.timeoutsShape=tQt;var rQt=null;j0.classNamesShape=rQt});var Eke=R(Zs=>{"use strict";p();Zs.__esModule=!0;Zs.default=Zs.EXITING=Zs.ENTERED=Zs.ENTERING=Zs.EXITED=Zs.UNMOUNTED=void 0;var nQt=aQt(ln()),RZ=wke(St()),iQt=wke(No()),oQt=oZ(),zJr=bke();function wke(t){return t&&t.__esModule?t:{default:t}}function aQt(t){if(t&&t.__esModule)return t;var e={};if(t!=null){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}}return e.default=t,e}function sQt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function lQt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var pT="unmounted";Zs.UNMOUNTED=pT;var ev="exited";Zs.EXITED=ev;var tv="entering";Zs.ENTERING=tv;var U0="entered";Zs.ENTERED=U0;var OZ="exiting";Zs.EXITING=OZ;var yf=function(t){lQt(e,t);function e(n,i){var o;o=t.call(this,n,i)||this;var l=i.transitionGroup,f=l&&!l.isMounting?n.enter:n.appear,d;return o.appearStatus=null,n.in?f?(d=ev,o.appearStatus=tv):d=U0:n.unmountOnExit||n.mountOnEnter?d=pT:d=ev,o.state={status:d},o.nextCallback=null,o}var r=e.prototype;return r.getChildContext=function(){return{transitionGroup:null}},e.getDerivedStateFromProps=function(i,o){var l=i.in;return l&&o.status===pT?{status:ev}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==tv&&l!==U0&&(o=tv):(l===tv||l===U0)&&(o=OZ)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,l,f;return o=l=f=i,i!=null&&typeof i!="number"&&(o=i.exit,l=i.enter,f=i.appear!==void 0?i.appear:l),{exit:o,enter:l,appear:f}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null){this.cancelNextCallback();var l=iQt.default.findDOMNode(this);o===tv?this.performEnter(l,i):this.performExit(l)}else this.props.unmountOnExit&&this.state.status===ev&&this.setState({status:pT})},r.performEnter=function(i,o){var l=this,f=this.props.enter,d=this.context.transitionGroup?this.context.transitionGroup.isMounting:o,v=this.getTimeouts(),x=d?v.appear:v.enter;if(!o&&!f){this.safeSetState({status:U0},function(){l.props.onEntered(i)});return}this.props.onEnter(i,d),this.safeSetState({status:tv},function(){l.props.onEntering(i,d),l.onTransitionEnd(i,x,function(){l.safeSetState({status:U0},function(){l.props.onEntered(i,d)})})})},r.performExit=function(i){var o=this,l=this.props.exit,f=this.getTimeouts();if(!l){this.safeSetState({status:ev},function(){o.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:OZ},function(){o.props.onExiting(i),o.onTransitionEnd(i,f.exit,function(){o.safeSetState({status:ev},function(){o.props.onExited(i)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,l=!0;return this.nextCallback=function(f){l&&(l=!1,o.nextCallback=null,i(f))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(i,o,l){this.setNextCallback(l);var f=o==null&&!this.props.addEndListener;if(!i||f){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(i,this.nextCallback),o!=null&&setTimeout(this.nextCallback,o)},r.render=function(){var i=this.state.status;if(i===pT)return null;var o=this.props,l=o.children,f=sQt(o,["children"]);if(delete f.in,delete f.mountOnEnter,delete f.unmountOnExit,delete f.appear,delete f.enter,delete f.exit,delete f.timeout,delete f.addEndListener,delete f.onEnter,delete f.onEntering,delete f.onEntered,delete f.onExit,delete f.onExiting,delete f.onExited,typeof l=="function")return l(i,f);var d=RZ.default.Children.only(l);return RZ.default.cloneElement(d,f)},e}(RZ.default.Component);yf.contextTypes={transitionGroup:nQt.object};yf.childContextTypes={transitionGroup:function(){}};yf.propTypes={};function z0(){}yf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:z0,onEntering:z0,onEntered:z0,onExit:z0,onExiting:z0,onExited:z0};yf.UNMOUNTED=0;yf.EXITED=1;yf.ENTERING=2;yf.ENTERED=3;yf.EXITING=4;var uQt=(0,oQt.polyfill)(yf);Zs.default=uQt});var dT=R((tD,Ske)=>{"use strict";p();tD.__esModule=!0;tD.default=cQt;function cQt(t){return t&&t.ownerDocument||document}Ske.exports=tD.default});var LZ=R((rD,Tke)=>{"use strict";p();var fQt=za();rD.__esModule=!0;rD.default=pQt;var hQt=fQt(dT());function pQt(t){t===void 0&&(t=(0,hQt.default)());try{return t.activeElement}catch(e){}}Tke.exports=rD.default});var gT=R((mT,Ake)=>{"use strict";p();var dQt=za();mT.__esModule=!0;mT.default=void 0;var mQt=dQt(gf()),gQt=function(){return mQt.default?function(t,e){return t.contains?t.contains(e):t.compareDocumentPosition?t===e||!!(t.compareDocumentPosition(e)&16):Ike(t,e)}:Ike}();mT.default=gQt;function Ike(t,e){if(e)do if(e===t)return!0;while(e=e.parentNode);return!1}Ake.exports=mT.default});var NZ=R((rv,Pke)=>{p();function Mke(t){if(t&&typeof t=="object"){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if(typeof t=="number")return Cke[t];var r=String(t),n=Nh[r.toLowerCase()];if(n)return n;var n=nD[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}Mke.isEventKey=function(e,r){if(e&&typeof e=="object"){var n=e.which||e.keyCode||e.charCode;if(n==null)return!1;if(typeof r=="string"){var i=Nh[r.toLowerCase()];if(i)return i===n;var i=nD[r.toLowerCase()];if(i)return i===n}else if(typeof r=="number")return r===n;return!1}};rv=Pke.exports=Mke;var Nh=rv.code=rv.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},nD=rv.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(zi=97;zi<123;zi++)Nh[String.fromCharCode(zi)]=zi-32;for(zi=48;zi<58;zi++)Nh[zi-48]=zi;var zi;for(zi=1;zi<13;zi++)Nh["f"+zi]=zi+111;for(zi=0;zi<10;zi++)Nh["numpad "+zi]=zi+96;var Cke=rv.names=rv.title={};for(zi in Nh)Cke[Nh[zi]]=zi;for(DZ in nD)Nh[DZ]=nD[DZ];var DZ});var Oke=R((iD,Rke)=>{"use strict";p();Object.defineProperty(iD,"__esModule",{value:!0});iD.default=vQt;function vQt(t){return function(r,n,i,o,l){var f=i||"<<anonymous>>",d=l||n;if(r[n]==null)return new Error("The "+o+" `"+d+"` is required to make "+("`"+f+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var v=arguments.length,x=Array(v>5?v-5:0),b=5;b<v;b++)x[b-5]=arguments[b];return t.apply(void 0,[r,n,i,o,l].concat(x))}}Rke.exports=iD.default});var Dke=R((ZJr,Lke)=>{p();var yQt=g2(),_Qt=m2();Lke.exports=function(t){return function(e,r){var n=String(_Qt(e)),i=yQt(r),o=n.length,l,f;return i<0||i>=o?t?"":void 0:(l=n.charCodeAt(i),l<55296||l>56319||i+1===o||(f=n.charCodeAt(i+1))<56320||f>57343?t?n.charAt(i):l:t?n.slice(i,i+2):(l-55296<<10)+(f-56320)+65536)}}});var kke=R((KJr,Nke)=>{p();Nke.exports=nT()});var oD=R((QJr,qke)=>{p();qke.exports={}});var Vd=R((een,jke)=>{p();var kZ=W8()("wks"),xQt=Z8(),qZ=R0().Symbol,Fke=typeof qZ=="function",bQt=jke.exports=function(t){return kZ[t]||(kZ[t]=Fke&&qZ[t]||(Fke?qZ:xQt)("Symbol."+t))};bQt.store=kZ});var FZ=R((ren,Uke)=>{p();var wQt=tT().f,EQt=L0(),zke=Vd()("toStringTag");Uke.exports=function(t,e,r){t&&!EQt(t=r?t:t.prototype,zke)&&wQt(t,zke,{configurable:!0,value:e})}});var Gke=R((ien,Vke)=>{"use strict";p();var SQt=eZ(),TQt=rT(),IQt=FZ(),Bke={};nT()(Bke,Vd()("iterator"),function(){return this});Vke.exports=function(t,e,r){t.prototype=SQt(Bke,{next:TQt(1,r)}),IQt(t,e+" Iterator")}});var Wke=R((aen,Hke)=>{p();var AQt=L0(),MQt=x2(),$ke=v2()("IE_PROTO"),CQt=Object.prototype;Hke.exports=Object.getPrototypeOf||function(t){return t=MQt(t),AQt(t,$ke)?t[$ke]:typeof t.constructor=="function"&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?CQt:null}});var eqe=R((len,Jke)=>{"use strict";p();var Zke=H8(),jZ=Ud(),PQt=kke(),Yke=nT(),Kke=oD(),RQt=Gke(),OQt=FZ(),LQt=Wke(),vT=Vd()("iterator"),zZ=!([].keys&&"next"in[].keys()),DQt="@@iterator",Xke="keys",aD="values",Qke=function(){return this};Jke.exports=function(t,e,r,n,i,o,l){RQt(r,e,n);var f=function($){if(!zZ&&$ in b)return b[$];switch($){case Xke:return function(){return new r(this,$)};case aD:return function(){return new r(this,$)}}return function(){return new r(this,$)}},d=e+" Iterator",v=i==aD,x=!1,b=t.prototype,A=b[vT]||b[DQt]||i&&b[i],P=A||f(i),N=i?v?f("entries"):P:void 0,j=e=="Array"&&b.entries||A,D,F,U;if(j&&(U=LQt(j.call(new t)),U!==Object.prototype&&U.next&&(OQt(U,d,!0),!Zke&&typeof U[vT]!="function"&&Yke(U,vT,Qke))),v&&A&&A.name!==aD&&(x=!0,P=function(){return A.call(this)}),(!Zke||l)&&(zZ||x||!b[vT])&&Yke(b,vT,P),Kke[e]=P,Kke[d]=Qke,i)if(D={values:v?P:f(aD),keys:o?P:f(Xke),entries:N},l)for(F in D)F in b||PQt(b,F,D[F]);else jZ(jZ.P+jZ.F*(zZ||x),e,D);return D}});var tqe=R(()=>{"use strict";p();var NQt=Dke()(!0);eqe()(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,e=this._i,r;return e>=t.length?{value:void 0,done:!0}:(r=NQt(t,e),this._i+=r.length,{value:r,done:!1})})});var iqe=R((pen,nqe)=>{p();var rqe=O0();nqe.exports=function(t,e,r,n){try{return n?e(rqe(r)[0],r[1]):e(r)}catch(o){var i=t.return;throw i!==void 0&&rqe(i.call(t)),o}}});var aqe=R((men,oqe)=>{p();var kQt=oD(),qQt=Vd()("iterator"),FQt=Array.prototype;oqe.exports=function(t){return t!==void 0&&(kQt.Array===t||FQt[qQt]===t)}});var lqe=R((ven,sqe)=>{"use strict";p();var jQt=tT(),zQt=rT();sqe.exports=function(t,e,r){e in t?jQt.f(t,e,zQt(0,r)):t[e]=r}});var cqe=R((_en,uqe)=>{p();var UZ=V8(),UQt=Vd()("toStringTag"),BQt=UZ(function(){return arguments}())=="Arguments",VQt=function(t,e){try{return t[e]}catch(r){}};uqe.exports=function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=VQt(e=Object(t),UQt))=="string"?r:BQt?UZ(e):(n=UZ(e))=="Object"&&typeof e.callee=="function"?"Arguments":n}});var hqe=R((ben,fqe)=>{p();var GQt=cqe(),$Qt=Vd()("iterator"),HQt=oD();fqe.exports=df().getIteratorMethod=function(t){if(t!=null)return t[$Qt]||t["@@iterator"]||HQt[GQt(t)]}});var mqe=R((Een,dqe)=>{p();var VZ=Vd()("iterator"),pqe=!1;try{BZ=[7][VZ](),BZ.return=function(){pqe=!0},Array.from(BZ,function(){throw 2})}catch(t){}var BZ;dqe.exports=function(t,e){if(!e&&!pqe)return!1;var r=!1;try{var n=[7],i=n[VZ]();i.next=function(){return{done:r=!0}},n[VZ]=function(){return i},t(n)}catch(o){}return r}});var vqe=R(()=>{"use strict";p();var WQt=c2(),GZ=Ud(),ZQt=x2(),YQt=iqe(),KQt=aqe(),XQt=$8(),gqe=lqe(),QQt=hqe();GZ(GZ.S+GZ.F*!mqe()(function(t){Array.from(t)}),"Array",{from:function(e){var r=ZQt(e),n=typeof this=="function"?this:Array,i=arguments.length,o=i>1?arguments[1]:void 0,l=o!==void 0,f=0,d=QQt(r),v,x,b,A;if(l&&(o=WQt(o,i>2?arguments[2]:void 0,2)),d!=null&&!(n==Array&&KQt(d)))for(A=d.call(r),x=new n;!(b=A.next()).done;f++)gqe(x,f,l?YQt(A,o,[b.value,f],!0):b.value);else for(v=XQt(r.length),x=new n(v);v>f;f++)gqe(x,f,l?o(r[f],f):r[f]);return x.length=f,x}})});var _qe=R((Men,yqe)=>{p();tqe();vqe();yqe.exports=df().Array.from});var bqe=R((Pen,xqe)=>{p();xqe.exports=_qe()});var sD=R((yT,Eqe)=>{"use strict";p();var JQt=za();yT.__esModule=!0;yT.default=void 0;var eJt=JQt(gf()),wqe=function(){};eJt.default&&(wqe=function(){if(document.addEventListener)return function(t,e,r,n){return t.addEventListener(e,r,n||!1)};if(document.attachEvent)return function(t,e,r){return t.attachEvent("on"+e,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=t,r.call(t,n)})}}());var tJt=wqe;yT.default=tJt;Eqe.exports=yT.default});var lD=R((_T,Tqe)=>{"use strict";p();var rJt=za();_T.__esModule=!0;_T.default=void 0;var nJt=rJt(gf()),Sqe=function(){};nJt.default&&(Sqe=function(){if(document.addEventListener)return function(t,e,r,n){return t.removeEventListener(e,r,n||!1)};if(document.attachEvent)return function(t,e,r){return t.detachEvent("on"+e,r)}}());var iJt=Sqe;_T.default=iJt;Tqe.exports=_T.default});var $Z=R((uD,Aqe)=>{"use strict";p();uD.__esModule=!0;uD.default=function(t,e,r,n){return(0,aJt.default)(t,e,r,n),{remove:function(){(0,lJt.default)(t,e,r,n)}}};var oJt=sD(),aJt=Iqe(oJt),sJt=lD(),lJt=Iqe(sJt);function Iqe(t){return t&&t.__esModule?t:{default:t}}Aqe.exports=uD.default});var xT=R((cD,Cqe)=>{"use strict";p();cD.__esModule=!0;cD.default=function(t){return(0,hJt.default)(cJt.default.findDOMNode(t))};var uJt=No(),cJt=Mqe(uJt),fJt=dT(),hJt=Mqe(fJt);function Mqe(t){return t&&t.__esModule?t:{default:t}}Cqe.exports=cD.default});var Rqe=R((pD,Pqe)=>{"use strict";p();pD.__esModule=!0;var pJt=gT(),dJt=B0(pJt),mJt=ln(),fD=B0(mJt),gJt=St(),vJt=B0(gJt),yJt=No(),_Jt=B0(yJt),xJt=$Z(),HZ=B0(xJt),bJt=xT(),wJt=B0(bJt);function B0(t){return t&&t.__esModule?t:{default:t}}function EJt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SJt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function TJt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var IJt=27;function AJt(t){return t.button===0}function MJt(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var hD=function(t){TJt(e,t);function e(r,n){EJt(this,e);var i=SJt(this,t.call(this,r,n));return i.addEventListeners=function(){i.currentEvent=window.event;var o=i.props.event,l=(0,wJt.default)(i);i.documentMouseCaptureListener=(0,HZ.default)(l,o,i.handleMouseCapture,!0),i.documentMouseListener=(0,HZ.default)(l,o,i.handleMouse),i.documentKeyupListener=(0,HZ.default)(l,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(o){i.preventMouseRootClose=MJt(o)||!AJt(o)||(0,dJt.default)(_Jt.default.findDOMNode(i),o.target)},i.handleMouse=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(o)},i.handleKeyUp=function(o){if(o===i.currentEvent){i.currentEvent=void 0;return}o.keyCode===IJt&&i.props.onRootClose&&i.props.onRootClose(o)},i.preventMouseRootClose=!1,i}return e.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},e.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},e.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},e.prototype.render=function(){return this.props.children},e}(vJt.default.Component);hD.displayName="RootCloseWrapper";hD.propTypes={onRootClose:fD.default.func,children:fD.default.element,disabled:fD.default.bool,event:fD.default.oneOf(["click","mousedown"])};hD.defaultProps={event:"click"};pD.default=hD;Pqe.exports=pD.default});var Zqe=R((xD,Wqe)=>{"use strict";p();xD.__esModule=!0;xD.default=UJt;var zJt=/^[\w-]*$/,oY=Function.prototype.bind.call(Function.prototype.call,[].slice);function UJt(t,e){var r=e[0]==="#",n=e[0]===".",i=r||n?e.slice(1):e,o=zJt.test(i),l;return o?r?(t=t.getElementById?t:document,(l=t.getElementById(i))?[l]:[]):t.getElementsByClassName&&n?oY(t.getElementsByClassName(i)):oY(t.getElementsByTagName(e)):oY(t.querySelectorAll(e))}Wqe.exports=xD.default});var Xqe=R((bD,Kqe)=>{"use strict";p();var Yqe=za();bD.__esModule=!0;bD.default=GJt;var BJt=Yqe(gT()),VJt=Yqe(Zqe());function GJt(t,e){return function(n){var i=n.currentTarget,o=n.target,l=(0,VJt.default)(i,t);l.some(function(f){return(0,BJt.default)(f,o)})&&e.call(this,n)}}Kqe.exports=bD.default});var eFe=R((TT,Jqe)=>{"use strict";p();var aY=za();TT.__esModule=!0;TT.default=void 0;var $Jt=aY(gf()),HJt=aY(sD()),WJt=aY(lD()),Qqe=function(){};$Jt.default&&(Qqe=function(e,r,n,i){return(0,HJt.default)(e,r,n,i),function(){(0,WJt.default)(e,r,n,i)}});var ZJt=Qqe;TT.default=ZJt;Jqe.exports=TT.default});var oFe=R(Gd=>{"use strict";p();var wD=za();Gd.__esModule=!0;Gd.default=void 0;var tFe=wD(sD());Gd.on=tFe.default;var rFe=wD(lD());Gd.off=rFe.default;var nFe=wD(Xqe());Gd.filter=nFe.default;var iFe=wD(eFe());Gd.listen=iFe.default;var YJt={on:tFe.default,off:rFe.default,filter:nFe.default,listen:iFe.default};Gd.default=YJt});var sY=R((SD,aFe)=>{"use strict";p();var KJt=za();SD.__esModule=!0;SD.default=QJt;var XJt=KJt(gf()),ED;function QJt(t){if((!ED&&ED!==0||t)&&XJt.default){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),ED=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return ED}aFe.exports=SD.default});var ID=R((TD,lFe)=>{"use strict";p();Object.defineProperty(TD,"__esModule",{value:!0});var JJt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eer=St(),ter=sFe(eer),rer=lT(),ner=sFe(rer);function sFe(t){return t&&t.__esModule?t:{default:t}}function ier(t,e,r,n,i){var o=t[e],l=typeof o=="undefined"?"undefined":JJt(o);return ter.default.isValidElement(o)?new Error("Invalid "+n+" `"+i+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(l!=="object"||typeof o.render!="function")&&o.nodeType!==1?new Error("Invalid "+n+" `"+i+"` of value `"+o+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}TD.default=(0,ner.default)(ier);lFe.exports=TD.default});var hFe=R((jtn,fFe)=>{"use strict";p();var oer=!1,cFe=function(){};oer&&(uFe=function(e,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var i=1;i<n;i++)r[i-1]=arguments[i];var o=0,l="Warning: "+e.replace(/%s/g,function(){return r[o++]});typeof console!="undefined"&&console.error(l);try{throw new Error(l)}catch(f){}},cFe=function(t,e,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var i=2;i<n;i++)r[i-2]=arguments[i];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");t||uFe.apply(null,[e].concat(r))});var uFe;fFe.exports=cFe});var mFe=R((AD,dFe)=>{"use strict";p();Object.defineProperty(AD,"__esModule",{value:!0});AD.default=pFe;var aer=hFe(),ser=ler(aer);function ler(t){return t&&t.__esModule?t:{default:t}}var lY={};function pFe(t,e){return function(n,i,o,l,f){var d=o||"<<anonymous>>",v=f||i;if(n[i]!=null){var x=o+"."+i;(0,ser.default)(lY[x],"The "+l+" `"+v+"` of "+("`"+d+"` is deprecated. "+e+".")),lY[x]=!0}for(var b=arguments.length,A=Array(b>5?b-5:0),P=5;P<b;P++)A[P-5]=arguments[P];return t.apply(void 0,[n,i,o,l,f].concat(A))}}function uer(){lY={}}pFe._resetWarned=uer;dFe.exports=AD.default});var uY=R((MD,gFe)=>{"use strict";p();MD.__esModule=!0;MD.default=cer;function cer(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}gFe.exports=MD.default});var yFe=R((CD,vFe)=>{"use strict";p();var fer=za();CD.__esModule=!0;CD.default=per;var her=fer(uY());function per(t,e){t.classList?t.classList.add(e):(0,her.default)(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}vFe.exports=CD.default});var bFe=R((Gtn,xFe)=>{"use strict";p();function _Fe(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}xFe.exports=function(e,r){e.classList?e.classList.remove(r):typeof e.className=="string"?e.className=_Fe(e.className,r):e.setAttribute("class",_Fe(e.className&&e.className.baseVal||"",r))}});var TFe=R(nv=>{"use strict";p();var cY=za();nv.__esModule=!0;nv.default=void 0;var wFe=cY(yFe());nv.addClass=wFe.default;var EFe=cY(bFe());nv.removeClass=EFe.default;var SFe=cY(uY());nv.hasClass=SFe.default;var der={addClass:wFe.default,removeClass:EFe.default,hasClass:SFe.default};nv.default=der});var AFe=R((PD,IFe)=>{"use strict";p();PD.__esModule=!0;PD.default=mer;function mer(t){return t===t.window?t:t.nodeType===9?t.defaultView||t.parentWindow:!1}IFe.exports=PD.default});var fY=R((RD,PFe)=>{"use strict";p();RD.__esModule=!0;RD.default=ber;var ger=AFe(),MFe=CFe(ger),ver=dT(),yer=CFe(ver);function CFe(t){return t&&t.__esModule?t:{default:t}}function _er(t){return t&&t.tagName.toLowerCase()==="body"}function xer(t){var e=(0,yer.default)(t),r=(0,MFe.default)(e),n=r.innerWidth;if(!n){var i=e.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return e.body.clientWidth<n}function ber(t){var e=(0,MFe.default)(t);return e||_er(t)?xer(t):t.scrollHeight>t.clientHeight}PFe.exports=RD.default});var OFe=R(IT=>{"use strict";p();IT.__esModule=!0;IT.ariaHidden=hY;IT.hideSiblings=Ser;IT.showSiblings=Ter;var wer=["template","script","style"],Eer=function(e){var r=e.nodeType,n=e.tagName;return r===1&&wer.indexOf(n.toLowerCase())===-1},RFe=function(e,r,n){r=[].concat(r),[].forEach.call(e.children,function(i){r.indexOf(i)===-1&&Eer(i)&&n(i)})};function hY(t,e){e&&(t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))}function Ser(t,e){RFe(t,e,function(r){return hY(!0,r)})}function Ter(t,e){RFe(t,e,function(r){return hY(!1,r)})}});var kFe=R((LD,NFe)=>{"use strict";p();LD.__esModule=!0;var Ier=TFe(),LFe=OD(Ier),Aer=xke(),DFe=OD(Aer),Mer=sY(),Cer=OD(Mer),Per=fY(),Rer=OD(Per),pY=OFe();function OD(t){return t&&t.__esModule?t:{default:t}}function Oer(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ler(t,e){var r=-1;return t.some(function(n,i){if(e(n,i))return r=i,!0}),r}function Der(t,e){return Ler(t,function(r){return r.modals.indexOf(e)!==-1})}function Ner(t,e){var r={overflow:"hidden"};t.style={overflow:e.style.overflow,paddingRight:e.style.paddingRight},t.overflowing&&(r.paddingRight=parseInt((0,DFe.default)(e,"paddingRight")||0,10)+(0,Cer.default)()+"px"),(0,DFe.default)(e,r)}function ker(t,e){var r=t.style;Object.keys(r).forEach(function(n){return e.style[n]=r[n]})}var qer=function t(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,i=n===void 0?!0:n,o=r.handleContainerOverflow,l=o===void 0?!0:o;Oer(this,t),this.add=function(f,d,v){var x=e.modals.indexOf(f),b=e.containers.indexOf(d);if(x!==-1)return x;if(x=e.modals.length,e.modals.push(f),e.hideSiblingNodes&&(0,pY.hideSiblings)(d,f.modalNode),b!==-1)return e.data[b].modals.push(f),x;var A={modals:[f],classes:v?v.split(/\s+/):[],overflowing:(0,Rer.default)(d)};return e.handleContainerOverflow&&Ner(A,d),A.classes.forEach(LFe.default.addClass.bind(null,d)),e.containers.push(d),e.data.push(A),x},this.remove=function(f){var d=e.modals.indexOf(f);if(d!==-1){var v=Der(e.data,f),x=e.data[v],b=e.containers[v];x.modals.splice(x.modals.indexOf(f),1),e.modals.splice(d,1),x.modals.length===0?(x.classes.forEach(LFe.default.removeClass.bind(null,b)),e.handleContainerOverflow&&ker(x,b),e.hideSiblingNodes&&(0,pY.showSiblings)(b,f.modalNode),e.containers.splice(v,1),e.data.splice(v,1)):e.hideSiblingNodes&&(0,pY.ariaHidden)(!1,x.modals[x.modals.length-1].modalNode)}},this.isTopModal=function(f){return!!e.modals.length&&e.modals[e.modals.length-1]===f},this.hideSiblingNodes=i,this.handleContainerOverflow=l,this.modals=[],this.containers=[],this.data=[]};LD.default=qer;NFe.exports=LD.default});var ND=R((DD,qFe)=>{"use strict";p();DD.__esModule=!0;DD.default=Uer;var Fer=No(),jer=zer(Fer);function zer(t){return t&&t.__esModule?t:{default:t}}function Uer(t,e){return t=typeof t=="function"?t():t,jer.default.findDOMNode(t)||e}qFe.exports=DD.default});var GFe=R((kD,VFe)=>{"use strict";p();kD.__esModule=!0;var Ber=ln(),dY=H0(Ber),Ver=ID(),Ger=H0(Ver),$er=St(),FFe=H0($er),Her=No(),jFe=H0(Her),Wer=ND(),zFe=H0(Wer),Zer=xT(),UFe=H0(Zer);function H0(t){return t&&t.__esModule?t:{default:t}}function Yer(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BFe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ker(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var mY=function(t){Ker(e,t);function e(){var r,n,i;Yer(this,e);for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];return i=(r=(n=BFe(this,t.call.apply(t,[this].concat(l))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,zFe.default)(n.props.container,(0,UFe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var d=n.props.children?FFe.default.Children.only(n.props.children):null;if(d!==null){n._mountOverlayTarget();var v=!n._overlayInstance;n._overlayInstance=jFe.default.unstable_renderSubtreeIntoContainer(n,d,n._overlayTarget,function(){v&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(jFe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),BFe(n,i)}return e.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},e.prototype.componentDidUpdate=function(){this._renderOverlay()},e.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,zFe.default)(n.container,(0,UFe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},e.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},e.prototype.render=function(){return null},e}(FFe.default.Component);mY.displayName="Portal";mY.propTypes={container:dY.default.oneOfType([Ger.default,dY.default.func]),onRendered:dY.default.func};kD.default=mY;VFe.exports=kD.default});var WFe=R((qD,HFe)=>{"use strict";p();qD.__esModule=!0;var Xer=gf(),Qer=$d(Xer),Jer=ln(),gY=$d(Jer),etr=ID(),ttr=$d(etr),rtr=St(),ntr=$d(rtr),itr=No(),vY=$d(itr),otr=ND(),atr=$d(otr),str=xT(),ltr=$d(str),utr=GFe(),ctr=$d(utr);function $d(t){return t&&t.__esModule?t:{default:t}}function ftr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Fe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function htr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yY=function(t){htr(e,t);function e(){var r,n,i;ftr(this,e);for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];return i=(r=(n=$Fe(this,t.call.apply(t,[this].concat(l))),n),n.getMountNode=function(){return n._portalContainerNode},r),$Fe(n,i)}return e.prototype.UNSAFE_componentWillMount=function(){if(Qer.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!vY.default.findDOMNode(n))&&this.setContainer(n)}},e.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},e.prototype.componentWillUnmount=function(){this._portalContainerNode=null},e.prototype.setContainer=function(n){this._portalContainerNode=(0,atr.default)(n,(0,ltr.default)(this).body)},e.prototype.render=function(){return this.props.children&&this._portalContainerNode?vY.default.createPortal(this.props.children,this._portalContainerNode):null},e}(ntr.default.Component);yY.displayName="Portal";yY.propTypes={container:gY.default.oneOfType([ttr.default,gY.default.func]),onRendered:gY.default.func};qD.default=vY.default.createPortal?yY:ctr.default;HFe.exports=qD.default});var XFe=R((FD,KFe)=>{"use strict";p();FD.__esModule=!0;var ptr=ln(),dtr=ZFe(ptr),mtr=St(),gtr=ZFe(mtr);function ZFe(t){return t&&t.__esModule?t:{default:t}}function vtr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ytr(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _tr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var xtr={children:dtr.default.node},YFe=function(t){_tr(e,t);function e(){return vtr(this,e),ytr(this,t.apply(this,arguments))}return e.prototype.render=function(){return this.props.children},e}(gtr.default.Component);YFe.propTypes=xtr;FD.default=YFe;KFe.exports=FD.default});var JFe=R((jD,QFe)=>{"use strict";p();jD.__esModule=!0;jD.default=btr;function btr(t){var e=!document.addEventListener,r=void 0;return e?(document.attachEvent("onfocusin",t),r=function(){return document.detachEvent("onfocusin",t)}):(document.addEventListener("focus",t,!0),r=function(){return document.removeEventListener("focus",t,!0)}),{remove:r}}QFe.exports=jD.default});var uje=R((UD,lje)=>{"use strict";p();UD.__esModule=!0;var nje=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wtr=LZ(),_Y=wa(wtr),Etr=gT(),ije=wa(Etr),Str=gf(),Ttr=wa(Str),Itr=ln(),pi=wa(Itr),Atr=ID(),Mtr=wa(Atr),Ctr=mFe(),Ptr=wa(Ctr),Rtr=Lh(),eje=wa(Rtr),oje=St(),Hd=wa(oje),Otr=No(),Ltr=wa(Otr),Dtr=EZ(),Ntr=wa(Dtr),ktr=kFe(),aje=wa(ktr),qtr=WFe(),sje=wa(qtr),Ftr=XFe(),jtr=wa(Ftr),ztr=$Z(),tje=wa(ztr),Utr=JFe(),Btr=wa(Utr),Vtr=ND(),Gtr=wa(Vtr),$tr=xT(),xY=wa($tr);function wa(t){return t&&t.__esModule?t:{default:t}}function Htr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rje(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Wtr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ztr=new aje.default,zD=function(t){Wtr(e,t);function e(){var r,n,i;Htr(this,e);for(var o=arguments.length,l=Array(o),f=0;f<o;f++)l[f]=arguments[f];return i=(r=(n=rje(this,t.call.apply(t,[this].concat(l))),n),Ytr.call(n),r),rje(n,i)}return e.prototype.omitProps=function(n,i){var o=Object.keys(n),l={};return o.map(function(f){Object.prototype.hasOwnProperty.call(i,f)||(l[f]=n[f])}),l},e.prototype.render=function(){var n=this.props,i=n.show,o=n.container,l=n.children,f=n.transition,d=n.backdrop,v=n.className,x=n.style,b=n.onExit,A=n.onExiting,P=n.onEnter,N=n.onEntering,j=n.onEntered,D=Hd.default.Children.only(l),F=this.omitProps(this.props,e.propTypes),U=i||f&&!this.state.exited;if(!U)return null;var $=D.props,Z=$.role,ie=$.tabIndex;return(Z===void 0||ie===void 0)&&(D=(0,oje.cloneElement)(D,{role:Z===void 0?"document":Z,tabIndex:ie==null?"-1":ie})),f&&(D=Hd.default.createElement(f,{appear:!0,unmountOnExit:!0,in:i,onExit:b,onExiting:A,onExited:this.handleHidden,onEnter:P,onEntering:N,onEntered:j},D)),Hd.default.createElement(sje.default,{ref:this.setMountNode,container:o,onRendered:this.onPortalRendered},Hd.default.createElement("div",nje({ref:this.setModalNodeRef,role:Z||"dialog"},F,{style:x,className:v}),d&&this.renderBackdrop(),Hd.default.createElement(jtr.default,{ref:this.setDialogRef},D)))},e.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},e.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},e.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},e.prototype.componentDidUpdate=function(n){var i=this.props.transition;n.show&&!this.props.show&&!i?this.onHide():!n.show&&this.props.show&&this.onShow()},e.prototype.componentWillUnmount=function(){var n=this.props,i=n.show,o=n.transition;this._isMounted=!1,(i||o&&!this.state.exited)&&this.onHide()},e.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),i=(0,_Y.default)((0,xY.default)(this));n&&!(0,ije.default)(n,i)&&(this.lastFocus=i,n.hasAttribute("tabIndex")||((0,Ntr.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},e.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},e.prototype.getDialogElement=function(){return Ltr.default.findDOMNode(this.dialog)},e.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},e}(Hd.default.Component);zD.propTypes=nje({},sje.default.propTypes,{show:pi.default.bool,container:pi.default.oneOfType([Mtr.default,pi.default.func]),onShow:pi.default.func,onHide:pi.default.func,backdrop:pi.default.oneOfType([pi.default.bool,pi.default.oneOf(["static"])]),renderBackdrop:pi.default.func,onEscapeKeyDown:pi.default.func,onEscapeKeyUp:(0,Ptr.default)(pi.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:pi.default.func,backdropStyle:pi.default.object,backdropClassName:pi.default.string,containerClassName:pi.default.string,keyboard:pi.default.bool,transition:eje.default,backdropTransition:eje.default,autoFocus:pi.default.bool,enforceFocus:pi.default.bool,restoreFocus:pi.default.bool,onEnter:pi.default.func,onEntering:pi.default.func,onEntered:pi.default.func,onExit:pi.default.func,onExiting:pi.default.func,onExited:pi.default.func,manager:pi.default.object.isRequired});zD.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:Ztr,renderBackdrop:function(e){return Hd.default.createElement("div",e)}};var Ytr=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=e.props,n=r.backdropStyle,i=r.backdropClassName,o=r.renderBackdrop,l=r.backdropTransition,f=function(x){return e.backdrop=x},d=o({ref:f,style:n,className:i,onClick:e.handleBackdropClick});return l&&(d=Hd.default.createElement(l,{appear:!0,in:e.props.show},d)),d},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var r=(0,xY.default)(e),n=(0,Gtr.default)(e.props.container,r.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,tje.default)(r,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,tje.default)(r,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,Btr.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(r){e.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){e.modalNode=r},this.setDialogRef=function(r){e.dialog=r},this.handleHidden=function(){if(e.setState({exited:!0}),e.onHide(),e.props.onExited){var r;(r=e.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(r),e.props.backdrop===!0&&e.props.onHide())},this.handleDocumentKeyDown=function(r){e.props.keyboard&&r.keyCode===27&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(r),e.props.onHide())},this.handleDocumentKeyUp=function(r){e.props.keyboard&&r.keyCode===27&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(r)},this.checkForFocus=function(){Ttr.default&&(e.lastFocus=(0,_Y.default)())},this.enforceFocus=function(){if(!(!e.props.enforceFocus||!e._isMounted||!e.isTopModal())){var r=e.getDialogElement(),n=(0,_Y.default)((0,xY.default)(e));r&&!(0,ije.default)(r,n)&&r.focus()}}};zD.Manager=aje.default;UD.default=zD;lje.exports=UD.default});var v9=R((m9,g9)=>{p();(function(t,e){typeof m9=="object"&&typeof g9!="undefined"?g9.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self).RBush=e()})(m9,function(){"use strict";function t(D,F,U,$,Z){(function ie(ne,ae,de,ye,me){for(;ye>de;){if(ye-de>600){var be=ye-de+1,Ne=ae-de+1,Ce=Math.log(be),qe=.5*Math.exp(2*Ce/3),He=.5*Math.sqrt(Ce*qe*(be-qe)/be)*(Ne-be/2<0?-1:1),Ke=Math.max(de,Math.floor(ae-Ne*qe/be+He)),Je=Math.min(ye,Math.floor(ae+(be-Ne)*qe/be+He));ie(ne,ae,Ke,Je,me)}var We=ne[ae],lt=de,pt=ye;for(e(ne,de,ae),me(ne[ye],We)>0&&e(ne,de,ye);lt<pt;){for(e(ne,lt,pt),lt++,pt--;me(ne[lt],We)<0;)lt++;for(;me(ne[pt],We)>0;)pt--}me(ne[de],We)===0?e(ne,de,pt):e(ne,++pt,ye),pt<=ae&&(de=pt+1),ae<=pt&&(ye=pt-1)}})(D,F,U||0,$||D.length-1,Z||r)}function e(D,F,U){var $=D[F];D[F]=D[U],D[U]=$}function r(D,F){return D<F?-1:D>F?1:0}var n=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(D,F,U){if(!U)return F.indexOf(D);for(var $=0;$<F.length;$++)if(U(D,F[$]))return $;return-1}function o(D,F){l(D,0,D.children.length,F,D)}function l(D,F,U,$,Z){Z||(Z=N(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var ie=F;ie<U;ie++){var ne=D.children[ie];f(Z,D.leaf?$(ne):ne)}return Z}function f(D,F){return D.minX=Math.min(D.minX,F.minX),D.minY=Math.min(D.minY,F.minY),D.maxX=Math.max(D.maxX,F.maxX),D.maxY=Math.max(D.maxY,F.maxY),D}function d(D,F){return D.minX-F.minX}function v(D,F){return D.minY-F.minY}function x(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function b(D){return D.maxX-D.minX+(D.maxY-D.minY)}function A(D,F){return D.minX<=F.minX&&D.minY<=F.minY&&F.maxX<=D.maxX&&F.maxY<=D.maxY}function P(D,F){return F.minX<=D.maxX&&F.minY<=D.maxY&&F.maxX>=D.minX&&F.maxY>=D.minY}function N(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function j(D,F,U,$,Z){for(var ie=[F,U];ie.length;)if(!((U=ie.pop())-(F=ie.pop())<=$)){var ne=F+Math.ceil((U-F)/$/2)*$;t(D,ne,F,U,Z),ie.push(F,ne,ne,U)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(D){var F=this.data,U=[];if(!P(D,F))return U;for(var $=this.toBBox,Z=[];F;){for(var ie=0;ie<F.children.length;ie++){var ne=F.children[ie],ae=F.leaf?$(ne):ne;P(D,ae)&&(F.leaf?U.push(ne):A(D,ae)?this._all(ne,U):Z.push(ne))}F=Z.pop()}return U},n.prototype.collides=function(D){var F=this.data;if(!P(D,F))return!1;for(var U=[];F;){for(var $=0;$<F.children.length;$++){var Z=F.children[$],ie=F.leaf?this.toBBox(Z):Z;if(P(D,ie)){if(F.leaf||A(D,ie))return!0;U.push(Z)}}F=U.pop()}return!1},n.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var F=0;F<D.length;F++)this.insert(D[F]);return this}var U=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length){if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var $=this.data;this.data=U,U=$}this._insert(U,this.data.height-U.height-1,!0)}}else this.data=U;return this},n.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},n.prototype.clear=function(){return this.data=N([]),this},n.prototype.remove=function(D,F){if(!D)return this;for(var U,$,Z,ie=this.data,ne=this.toBBox(D),ae=[],de=[];ie||ae.length;){if(ie||(ie=ae.pop(),$=ae[ae.length-1],U=de.pop(),Z=!0),ie.leaf){var ye=i(D,ie.children,F);if(ye!==-1)return ie.children.splice(ye,1),ae.push(ie),this._condense(ae),this}Z||ie.leaf||!A(ie,ne)?$?(U++,ie=$.children[U],Z=!1):ie=null:(ae.push(ie),de.push(U),U=0,$=ie,ie=ie.children[0])}return this},n.prototype.toBBox=function(D){return D},n.prototype.compareMinX=function(D,F){return D.minX-F.minX},n.prototype.compareMinY=function(D,F){return D.minY-F.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(D){return this.data=D,this},n.prototype._all=function(D,F){for(var U=[];D;)D.leaf?F.push.apply(F,D.children):U.push.apply(U,D.children),D=U.pop();return F},n.prototype._build=function(D,F,U,$){var Z,ie=U-F+1,ne=this._maxEntries;if(ie<=ne)return o(Z=N(D.slice(F,U+1)),this.toBBox),Z;$||($=Math.ceil(Math.log(ie)/Math.log(ne)),ne=Math.ceil(ie/Math.pow(ne,$-1))),(Z=N([])).leaf=!1,Z.height=$;var ae=Math.ceil(ie/ne),de=ae*Math.ceil(Math.sqrt(ne));j(D,F,U,de,this.compareMinX);for(var ye=F;ye<=U;ye+=de){var me=Math.min(ye+de-1,U);j(D,ye,me,ae,this.compareMinY);for(var be=ye;be<=me;be+=ae){var Ne=Math.min(be+ae-1,me);Z.children.push(this._build(D,be,Ne,$-1))}}return o(Z,this.toBBox),Z},n.prototype._chooseSubtree=function(D,F,U,$){for(;$.push(F),!F.leaf&&$.length-1!==U;){for(var Z=1/0,ie=1/0,ne=void 0,ae=0;ae<F.children.length;ae++){var de=F.children[ae],ye=x(de),me=(be=D,Ne=de,(Math.max(Ne.maxX,be.maxX)-Math.min(Ne.minX,be.minX))*(Math.max(Ne.maxY,be.maxY)-Math.min(Ne.minY,be.minY))-ye);me<ie?(ie=me,Z=ye<Z?ye:Z,ne=de):me===ie&&ye<Z&&(Z=ye,ne=de)}F=ne||F.children[0]}var be,Ne;return F},n.prototype._insert=function(D,F,U){var $=U?D:this.toBBox(D),Z=[],ie=this._chooseSubtree($,this.data,F,Z);for(ie.children.push(D),f(ie,$);F>=0&&Z[F].children.length>this._maxEntries;)this._split(Z,F),F--;this._adjustParentBBoxes($,Z,F)},n.prototype._split=function(D,F){var U=D[F],$=U.children.length,Z=this._minEntries;this._chooseSplitAxis(U,Z,$);var ie=this._chooseSplitIndex(U,Z,$),ne=N(U.children.splice(ie,U.children.length-ie));ne.height=U.height,ne.leaf=U.leaf,o(U,this.toBBox),o(ne,this.toBBox),F?D[F-1].children.push(ne):this._splitRoot(U,ne)},n.prototype._splitRoot=function(D,F){this.data=N([D,F]),this.data.height=D.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(D,F,U){for(var $,Z,ie,ne,ae,de,ye,me=1/0,be=1/0,Ne=F;Ne<=U-F;Ne++){var Ce=l(D,0,Ne,this.toBBox),qe=l(D,Ne,U,this.toBBox),He=(Z=Ce,ie=qe,ne=void 0,ae=void 0,de=void 0,ye=void 0,ne=Math.max(Z.minX,ie.minX),ae=Math.max(Z.minY,ie.minY),de=Math.min(Z.maxX,ie.maxX),ye=Math.min(Z.maxY,ie.maxY),Math.max(0,de-ne)*Math.max(0,ye-ae)),Ke=x(Ce)+x(qe);He<me?(me=He,$=Ne,be=Ke<be?Ke:be):He===me&&Ke<be&&(be=Ke,$=Ne)}return $||U-F},n.prototype._chooseSplitAxis=function(D,F,U){var $=D.leaf?this.compareMinX:d,Z=D.leaf?this.compareMinY:v;this._allDistMargin(D,F,U,$)<this._allDistMargin(D,F,U,Z)&&D.children.sort($)},n.prototype._allDistMargin=function(D,F,U,$){D.children.sort($);for(var Z=this.toBBox,ie=l(D,0,F,Z),ne=l(D,U-F,U,Z),ae=b(ie)+b(ne),de=F;de<U-F;de++){var ye=D.children[de];f(ie,D.leaf?Z(ye):ye),ae+=b(ie)}for(var me=U-F-1;me>=F;me--){var be=D.children[me];f(ne,D.leaf?Z(be):be),ae+=b(ne)}return ae},n.prototype._adjustParentBBoxes=function(D,F,U){for(var $=U;$>=0;$--)f(F[$],D)},n.prototype._condense=function(D){for(var F=D.length-1,U=void 0;F>=0;F--)D[F].children.length===0?F>0?(U=D[F-1].children).splice(U.indexOf(D[F]),1):this.clear():o(D[F],this.toBBox)},n})});var E3e=R(Xn=>{"use strict";p();var FK=Symbol.for("react.element"),jK=Symbol.for("react.portal"),Ak=Symbol.for("react.fragment"),Mk=Symbol.for("react.strict_mode"),Ck=Symbol.for("react.profiler"),Pk=Symbol.for("react.provider"),Rk=Symbol.for("react.context"),mlr=Symbol.for("react.server_context"),Ok=Symbol.for("react.forward_ref"),Lk=Symbol.for("react.suspense"),Dk=Symbol.for("react.suspense_list"),Nk=Symbol.for("react.memo"),kk=Symbol.for("react.lazy"),glr=Symbol.for("react.offscreen"),w3e;w3e=Symbol.for("react.module.reference");function Ru(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case FK:switch(t=t.type,t){case Ak:case Ck:case Mk:case Lk:case Dk:return t;default:switch(t=t&&t.$$typeof,t){case mlr:case Rk:case Ok:case kk:case Nk:case Pk:return t;default:return e}}case jK:return e}}}Xn.ContextConsumer=Rk;Xn.ContextProvider=Pk;Xn.Element=FK;Xn.ForwardRef=Ok;Xn.Fragment=Ak;Xn.Lazy=kk;Xn.Memo=Nk;Xn.Portal=jK;Xn.Profiler=Ck;Xn.StrictMode=Mk;Xn.Suspense=Lk;Xn.SuspenseList=Dk;Xn.isAsyncMode=function(){return!1};Xn.isConcurrentMode=function(){return!1};Xn.isContextConsumer=function(t){return Ru(t)===Rk};Xn.isContextProvider=function(t){return Ru(t)===Pk};Xn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===FK};Xn.isForwardRef=function(t){return Ru(t)===Ok};Xn.isFragment=function(t){return Ru(t)===Ak};Xn.isLazy=function(t){return Ru(t)===kk};Xn.isMemo=function(t){return Ru(t)===Nk};Xn.isPortal=function(t){return Ru(t)===jK};Xn.isProfiler=function(t){return Ru(t)===Ck};Xn.isStrictMode=function(t){return Ru(t)===Mk};Xn.isSuspense=function(t){return Ru(t)===Lk};Xn.isSuspenseList=function(t){return Ru(t)===Dk};Xn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ak||t===Ck||t===Mk||t===Lk||t===Dk||t===glr||typeof t=="object"&&t!==null&&(t.$$typeof===kk||t.$$typeof===Nk||t.$$typeof===Pk||t.$$typeof===Rk||t.$$typeof===Ok||t.$$typeof===w3e||t.getModuleId!==void 0)};Xn.typeOf=Ru});var T3e=R((cRn,S3e)=>{"use strict";p();S3e.exports=E3e()});var MVe=R(ai=>{"use strict";p();var _q=60103,xq=60106,GI=60107,$I=60108,HI=60114,WI=60109,ZI=60110,YI=60112,KI=60113,I7=60120,XI=60115,QI=60116,EVe=60121,SVe=60122,TVe=60117,IVe=60129,AVe=60131;typeof Symbol=="function"&&Symbol.for&&(ra=Symbol.for,_q=ra("react.element"),xq=ra("react.portal"),GI=ra("react.fragment"),$I=ra("react.strict_mode"),HI=ra("react.profiler"),WI=ra("react.provider"),ZI=ra("react.context"),YI=ra("react.forward_ref"),KI=ra("react.suspense"),I7=ra("react.suspense_list"),XI=ra("react.memo"),QI=ra("react.lazy"),EVe=ra("react.block"),SVe=ra("react.server.block"),TVe=ra("react.fundamental"),IVe=ra("react.debug_trace_mode"),AVe=ra("react.legacy_hidden"));var ra;function Mc(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case _q:switch(t=t.type,t){case GI:case HI:case $I:case KI:case I7:return t;default:switch(t=t&&t.$$typeof,t){case ZI:case YI:case QI:case XI:case WI:return t;default:return e}}case xq:return e}}}var Xur=WI,Qur=_q,Jur=YI,ecr=GI,tcr=QI,rcr=XI,ncr=xq,icr=HI,ocr=$I,acr=KI;ai.ContextConsumer=ZI;ai.ContextProvider=Xur;ai.Element=Qur;ai.ForwardRef=Jur;ai.Fragment=ecr;ai.Lazy=tcr;ai.Memo=rcr;ai.Portal=ncr;ai.Profiler=icr;ai.StrictMode=ocr;ai.Suspense=acr;ai.isAsyncMode=function(){return!1};ai.isConcurrentMode=function(){return!1};ai.isContextConsumer=function(t){return Mc(t)===ZI};ai.isContextProvider=function(t){return Mc(t)===WI};ai.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_q};ai.isForwardRef=function(t){return Mc(t)===YI};ai.isFragment=function(t){return Mc(t)===GI};ai.isLazy=function(t){return Mc(t)===QI};ai.isMemo=function(t){return Mc(t)===XI};ai.isPortal=function(t){return Mc(t)===xq};ai.isProfiler=function(t){return Mc(t)===HI};ai.isStrictMode=function(t){return Mc(t)===$I};ai.isSuspense=function(t){return Mc(t)===KI};ai.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===GI||t===HI||t===IVe||t===$I||t===KI||t===I7||t===AVe||typeof t=="object"&&t!==null&&(t.$$typeof===QI||t.$$typeof===XI||t.$$typeof===WI||t.$$typeof===ZI||t.$$typeof===YI||t.$$typeof===TVe||t.$$typeof===EVe||t[0]===SVe)};ai.typeOf=Mc});var PVe=R((sFn,CVe)=>{"use strict";p();CVe.exports=MVe()});var Ucr={};eJ(Ucr,{SettingsProvider:()=>jcr,renderGeoreferenceApp:()=>zcr});p();var DGe=je(St(),1),NGe=je(No(),1),Jjn=je(WRe(),1);p();p();p();p();p();function SS(t,e){return function(){return t.apply(e,arguments)}}var{toString:d$t}=Object.prototype,{getPrototypeOf:yW}=Object,{iterator:cL,toStringTag:YRe}=Symbol,fL=(t=>e=>{let r=d$t.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),uc=t=>(t=t.toLowerCase(),e=>fL(e)===t),hL=t=>e=>typeof e===t,{isArray:_0}=Array,y0=hL("undefined");function TS(t){return t!==null&&!y0(t)&&t.constructor!==null&&!y0(t.constructor)&&Vs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var KRe=uc("ArrayBuffer");function m$t(t){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&KRe(t.buffer),e}var g$t=hL("string"),Vs=hL("function"),XRe=hL("number"),IS=t=>t!==null&&typeof t=="object",v$t=t=>t===!0||t===!1,uL=t=>{if(fL(t)!=="object")return!1;let e=yW(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(YRe in t)&&!(cL in t)},y$t=t=>{if(!IS(t)||TS(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(e){return!1}},_$t=uc("Date"),x$t=uc("File"),b$t=uc("Blob"),w$t=uc("FileList"),E$t=t=>IS(t)&&Vs(t.pipe),S$t=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Vs(t.append)&&((e=fL(t))==="formdata"||e==="object"&&Vs(t.toString)&&t.toString()==="[object FormData]"))},T$t=uc("URLSearchParams"),[I$t,A$t,M$t,C$t]=["ReadableStream","Request","Response","Headers"].map(uc),P$t=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function AS(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t=="undefined")return;let n,i;if(typeof t!="object"&&(t=[t]),_0(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(TS(t))return;let o=r?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length,f;for(n=0;n<l;n++)f=o[n],e.call(null,t[f],f,t)}}function QRe(t,e){if(TS(t))return null;e=e.toLowerCase();let r=Object.keys(t),n=r.length,i;for(;n-->0;)if(i=r[n],e===i.toLowerCase())return i;return null}var Hg=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,JRe=t=>!y0(t)&&t!==Hg;function vW(){let{caseless:t,skipUndefined:e}=JRe(this)&&this||{},r={},n=(i,o)=>{let l=t&&QRe(r,o)||o;uL(r[l])&&uL(i)?r[l]=vW(r[l],i):uL(i)?r[l]=vW({},i):_0(i)?r[l]=i.slice():(!e||!y0(i))&&(r[l]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&AS(arguments[i],n);return r}var R$t=(t,e,r,{allOwnKeys:n}={})=>(AS(e,(i,o)=>{r&&Vs(i)?t[o]=SS(i,r):t[o]=i},{allOwnKeys:n}),t),O$t=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),L$t=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},D$t=(t,e,r,n)=>{let i,o,l,f={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-->0;)l=i[o],(!n||n(l,t,e))&&!f[l]&&(e[l]=t[l],f[l]=!0);t=r!==!1&&yW(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},N$t=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},k$t=t=>{if(!t)return null;if(_0(t))return t;let e=t.length;if(!XRe(e))return null;let r=new Array(e);for(;e-->0;)r[e]=t[e];return r},q$t=(t=>e=>t&&e instanceof t)(typeof Uint8Array!="undefined"&&yW(Uint8Array)),F$t=(t,e)=>{let n=(t&&t[cL]).call(t),i;for(;(i=n.next())&&!i.done;){let o=i.value;e.call(t,o[0],o[1])}},j$t=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},z$t=uc("HTMLFormElement"),U$t=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),ZRe=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),B$t=uc("RegExp"),eOe=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};AS(r,(i,o)=>{let l;(l=e(i,o,t))!==!1&&(n[o]=l||i)}),Object.defineProperties(t,n)},V$t=t=>{eOe(t,(e,r)=>{if(Vs(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(Vs(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},G$t=(t,e)=>{let r={},n=i=>{i.forEach(o=>{r[o]=!0})};return _0(t)?n(t):n(String(t).split(e)),r},$$t=()=>{},H$t=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function W$t(t){return!!(t&&Vs(t.append)&&t[YRe]==="FormData"&&t[cL])}var Z$t=t=>{let e=new Array(10),r=(n,i)=>{if(IS(n)){if(e.indexOf(n)>=0)return;if(TS(n))return n;if(!("toJSON"in n)){e[i]=n;let o=_0(n)?[]:{};return AS(n,(l,f)=>{let d=r(l,i+1);!y0(d)&&(o[f]=d)}),e[i]=void 0,o}}return n};return r(t,0)},Y$t=uc("AsyncFunction"),K$t=t=>t&&(IS(t)||Vs(t))&&Vs(t.then)&&Vs(t.catch),tOe=((t,e)=>t?setImmediate:e?((r,n)=>(Hg.addEventListener("message",({source:i,data:o})=>{i===Hg&&o===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Hg.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Vs(Hg.postMessage)),X$t=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Hg):typeof T!="undefined"&&T.nextTick||tOe,Q$t=t=>t!=null&&Vs(t[cL]),Ye={isArray:_0,isArrayBuffer:KRe,isBuffer:TS,isFormData:S$t,isArrayBufferView:m$t,isString:g$t,isNumber:XRe,isBoolean:v$t,isObject:IS,isPlainObject:uL,isEmptyObject:y$t,isReadableStream:I$t,isRequest:A$t,isResponse:M$t,isHeaders:C$t,isUndefined:y0,isDate:_$t,isFile:x$t,isBlob:b$t,isRegExp:B$t,isFunction:Vs,isStream:E$t,isURLSearchParams:T$t,isTypedArray:q$t,isFileList:w$t,forEach:AS,merge:vW,extend:R$t,trim:P$t,stripBOM:O$t,inherits:L$t,toFlatObject:D$t,kindOf:fL,kindOfTest:uc,endsWith:N$t,toArray:k$t,forEachEntry:F$t,matchAll:j$t,isHTMLForm:z$t,hasOwnProperty:ZRe,hasOwnProp:ZRe,reduceDescriptors:eOe,freezeMethods:V$t,toObjectSet:G$t,toCamelCase:U$t,noop:$$t,toFiniteNumber:H$t,findKey:QRe,global:Hg,isContextDefined:JRe,isSpecCompliantForm:W$t,toJSONObject:Z$t,isAsyncFn:Y$t,isThenable:K$t,setImmediate:tOe,asap:X$t,isIterable:Q$t};p();p();p();p();p();function x0(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(x0,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});var rOe=x0.prototype,nOe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{nOe[t]={value:t}});Object.defineProperties(x0,nOe);Object.defineProperty(rOe,"isAxiosError",{value:!0});x0.from=(t,e,r,n,i,o)=>{let l=Object.create(rOe);Ye.toFlatObject(t,l,function(x){return x!==Error.prototype},v=>v!=="isAxiosError");let f=t&&t.message?t.message:"Error",d=e==null&&t?t.code:e;return x0.call(l,f,d,r,n,i),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",o&&Object.assign(l,o),l};var Nr=x0;p();var pL=null;function _W(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function oOe(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function iOe(t,e,r){return t?t.concat(e).map(function(i,o){return i=oOe(i),!r&&o?"["+i+"]":i}).join(r?".":""):e}function J$t(t){return Ye.isArray(t)&&!t.some(_W)}var eHt=Ye.toFlatObject(Ye,{},null,function(e){return /^is[A-Z]/.test(e)});function tHt(t,e,r){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new(pL||FormData),r=Ye.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,D){return!Ye.isUndefined(D[j])});let n=r.metaTokens,i=r.visitor||x,o=r.dots,l=r.indexes,d=(r.Blob||typeof Blob!="undefined"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function v(N){if(N===null)return"";if(Ye.isDate(N))return N.toISOString();if(Ye.isBoolean(N))return N.toString();if(!d&&Ye.isBlob(N))throw new Nr("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(N)||Ye.isTypedArray(N)?d&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function x(N,j,D){let F=N;if(N&&!D&&typeof N=="object"){if(Ye.endsWith(j,"{}"))j=n?j:j.slice(0,-2),N=JSON.stringify(N);else if(Ye.isArray(N)&&J$t(N)||(Ye.isFileList(N)||Ye.endsWith(j,"[]"))&&(F=Ye.toArray(N)))return j=oOe(j),F.forEach(function($,Z){!(Ye.isUndefined($)||$===null)&&e.append(l===!0?iOe([j],Z,o):l===null?j:j+"[]",v($))}),!1}return _W(N)?!0:(e.append(iOe(D,j,o),v(N)),!1)}let b=[],A=Object.assign(eHt,{defaultVisitor:x,convertValue:v,isVisitable:_W});function P(N,j){if(!Ye.isUndefined(N)){if(b.indexOf(N)!==-1)throw Error("Circular reference detected in "+j.join("."));b.push(N),Ye.forEach(N,function(F,U){(!(Ye.isUndefined(F)||F===null)&&i.call(e,F,Ye.isString(U)?U.trim():U,j,A))===!0&&P(F,j?j.concat(U):[U])}),b.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return P(t),e}var Nd=tHt;function aOe(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function sOe(t,e){this._pairs=[],t&&Nd(t,this,e)}var lOe=sOe.prototype;lOe.append=function(e,r){this._pairs.push([e,r])};lOe.toString=function(e){let r=e?function(n){return e.call(this,n,aOe)}:aOe;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};var dL=sOe;function rHt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function MS(t,e,r){if(!e)return t;let n=r&&r.encode||rHt;Ye.isFunction(r)&&(r={serialize:r});let i=r&&r.serialize,o;if(i?o=i(e,r):o=Ye.isURLSearchParams(e)?e.toString():new dL(e,r).toString(n),o){let l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}p();var xW=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(n){n!==null&&e(n)})}},bW=xW;p();p();p();p();var mL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};p();p();p();p();var uOe=typeof URLSearchParams!="undefined"?URLSearchParams:dL;p();var cOe=typeof FormData!="undefined"?FormData:null;p();var fOe=typeof Blob!="undefined"?Blob:null;var hOe={isBrowser:!0,classes:{URLSearchParams:uOe,FormData:cOe,Blob:fOe},protocols:["http","https","file","blob","url","data"]};var SW={};eJ(SW,{hasBrowserEnv:()=>EW,hasStandardBrowserEnv:()=>nHt,hasStandardBrowserWebWorkerEnv:()=>iHt,navigator:()=>wW,origin:()=>oHt});p();var EW=typeof window!="undefined"&&typeof document!="undefined",wW=typeof navigator=="object"&&navigator||void 0,nHt=EW&&(!wW||["ReactNative","NativeScript","NS"].indexOf(wW.product)<0),iHt=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oHt=EW&&window.location.href||"http://localhost";var ji=mt(mt({},SW),hOe);function TW(t,e){return Nd(t,new ji.classes.URLSearchParams,mt({visitor:function(r,n,i,o){return ji.isNode&&Ye.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}p();function aHt(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function sHt(t){let e={},r=Object.keys(t),n,i=r.length,o;for(n=0;n<i;n++)o=r[n],e[o]=t[o];return e}function lHt(t){function e(r,n,i,o){let l=r[o++];if(l==="__proto__")return!0;let f=Number.isFinite(+l),d=o>=r.length;return l=!l&&Ye.isArray(i)?i.length:l,d?(Ye.hasOwnProp(i,l)?i[l]=[i[l],n]:i[l]=n,!f):((!i[l]||!Ye.isObject(i[l]))&&(i[l]=[]),e(r,n,i[l],o)&&Ye.isArray(i[l])&&(i[l]=sHt(i[l])),!f)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){let r={};return Ye.forEachEntry(t,(n,i)=>{e(aHt(n),i,r,0)}),r}return null}var gL=lHt;function uHt(t,e,r){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var IW={transitional:mL,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){let n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=Ye.isObject(e);if(o&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(gL(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return TW(e,this.formSerializer).toString();if((f=Ye.isFileList(e))||n.indexOf("multipart/form-data")>-1){let d=this.env&&this.env.FormData;return Nd(f?{"files[]":e}:e,d&&new d,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),uHt(e)):e}],transformResponse:[function(e){let r=this.transitional||IW.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(n&&!this.responseType||i)){let l=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(f){if(l)throw f.name==="SyntaxError"?Nr.from(f,Nr.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ji.classes.FormData,Blob:ji.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{IW.headers[t]={}});var b0=IW;p();p();var cHt=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pOe=t=>{let e={},r,n,i;return t&&t.split(`
`).forEach(function(l){i=l.indexOf(":"),r=l.substring(0,i).trim().toLowerCase(),n=l.substring(i+1).trim(),!(!r||e[r]&&cHt[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};var dOe=Symbol("internals");function CS(t){return t&&String(t).trim().toLowerCase()}function vL(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(vL):String(t)}function fHt(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}var hHt=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function AW(t,e,r,n,i){if(Ye.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!Ye.isString(e)){if(Ye.isString(n))return e.indexOf(n)!==-1;if(Ye.isRegExp(n))return n.test(e)}}function pHt(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function dHt(t,e){let r=Ye.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,o,l){return this[n].call(this,e,i,o,l)},configurable:!0})})}var w0=class{constructor(e){e&&this.set(e)}set(e,r,n){let i=this;function o(f,d,v){let x=CS(d);if(!x)throw new Error("header name must be a non-empty string");let b=Ye.findKey(i,x);(!b||i[b]===void 0||v===!0||v===void 0&&i[b]!==!1)&&(i[b||d]=vL(f))}let l=(f,d)=>Ye.forEach(f,(v,x)=>o(v,x,d));if(Ye.isPlainObject(e)||e instanceof this.constructor)l(e,r);else if(Ye.isString(e)&&(e=e.trim())&&!hHt(e))l(pOe(e),r);else if(Ye.isObject(e)&&Ye.isIterable(e)){let f={},d,v;for(let x of e){if(!Ye.isArray(x))throw TypeError("Object iterator must return a key-value pair");f[v=x[0]]=(d=f[v])?Ye.isArray(d)?[...d,x[1]]:[d,x[1]]:x[1]}l(f,r)}else e!=null&&o(r,e,n);return this}get(e,r){if(e=CS(e),e){let n=Ye.findKey(this,e);if(n){let i=this[n];if(!r)return i;if(r===!0)return fHt(i);if(Ye.isFunction(r))return r.call(this,i,n);if(Ye.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=CS(e),e){let n=Ye.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||AW(this,this[n],n,r)))}return!1}delete(e,r){let n=this,i=!1;function o(l){if(l=CS(l),l){let f=Ye.findKey(n,l);f&&(!r||AW(n,n[f],f,r))&&(delete n[f],i=!0)}}return Ye.isArray(e)?e.forEach(o):o(e),i}clear(e){let r=Object.keys(this),n=r.length,i=!1;for(;n--;){let o=r[n];(!e||AW(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){let r=this,n={};return Ye.forEach(this,(i,o)=>{let l=Ye.findKey(n,o);if(l){r[l]=vL(i),delete r[o];return}let f=e?pHt(o):String(o).trim();f!==o&&delete r[o],r[f]=vL(i),n[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return Ye.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&Ye.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){let n=(this[dOe]=this[dOe]={accessors:{}}).accessors,i=this.prototype;function o(l){let f=CS(l);n[f]||(dHt(i,l),n[f]=!0)}return Ye.isArray(e)?e.forEach(o):o(e),this}};w0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(w0.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Ye.freezeMethods(w0);var Fo=w0;function PS(t,e){let r=this||b0,n=e||r,i=Fo.from(n.headers),o=n.data;return Ye.forEach(t,function(f){o=f.call(r,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}p();function RS(t){return!!(t&&t.__CANCEL__)}p();function mOe(t,e,r){Nr.call(this,t==null?"canceled":t,Nr.ERR_CANCELED,e,r),this.name="CanceledError"}Ye.inherits(mOe,Nr,{__CANCEL__:!0});var cf=mOe;p();p();p();function OS(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Nr("Request failed with status code "+r.status,[Nr.ERR_BAD_REQUEST,Nr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}p();function MW(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}p();p();function mHt(t,e){t=t||10;let r=new Array(t),n=new Array(t),i=0,o=0,l;return e=e!==void 0?e:1e3,function(d){let v=Date.now(),x=n[o];l||(l=v),r[i]=d,n[i]=v;let b=o,A=0;for(;b!==i;)A+=r[b++],b=b%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),v-l<e)return;let P=x&&v-x;return P?Math.round(A*1e3/P):void 0}}var gOe=mHt;p();function gHt(t,e){let r=0,n=1e3/e,i,o,l=(v,x=Date.now())=>{r=x,i=null,o&&(clearTimeout(o),o=null),t(...v)};return[(...v)=>{let x=Date.now(),b=x-r;b>=n?l(v,x):(i=v,o||(o=setTimeout(()=>{o=null,l(i)},n-b)))},()=>i&&l(i)]}var vOe=gHt;var E0=(t,e,r=3)=>{let n=0,i=gOe(50,250);return vOe(o=>{let l=o.loaded,f=o.lengthComputable?o.total:void 0,d=l-n,v=i(d),x=l<=f;n=l;let b={loaded:l,total:f,progress:f?l/f:void 0,bytes:d,rate:v||void 0,estimated:v&&f&&x?(f-l)/v:void 0,event:o,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(b)},r)},CW=(t,e)=>{let r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},PW=t=>(...e)=>Ye.asap(()=>t(...e));p();p();var yOe=ji.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,ji.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(ji.origin),ji.navigator&&/(msie|trident)/i.test(ji.navigator.userAgent)):()=>!0;p();var _Oe=ji.hasStandardBrowserEnv?{write(t,e,r,n,i,o){let l=[t+"="+encodeURIComponent(e)];Ye.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Ye.isString(n)&&l.push("path="+n),Ye.isString(i)&&l.push("domain="+i),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){let e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};p();p();function RW(t){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}p();function OW(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function LS(t,e,r){let n=!RW(e);return t&&(n||r==!1)?OW(t,e):e}p();var xOe=t=>t instanceof Fo?mt({},t):t;function cc(t,e){e=e||{};let r={};function n(v,x,b,A){return Ye.isPlainObject(v)&&Ye.isPlainObject(x)?Ye.merge.call({caseless:A},v,x):Ye.isPlainObject(x)?Ye.merge({},x):Ye.isArray(x)?x.slice():x}function i(v,x,b,A){if(Ye.isUndefined(x)){if(!Ye.isUndefined(v))return n(void 0,v,b,A)}else return n(v,x,b,A)}function o(v,x){if(!Ye.isUndefined(x))return n(void 0,x)}function l(v,x){if(Ye.isUndefined(x)){if(!Ye.isUndefined(v))return n(void 0,v)}else return n(void 0,x)}function f(v,x,b){if(b in e)return n(v,x);if(b in t)return n(void 0,v)}let d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(v,x,b)=>i(xOe(v),xOe(x),b,!0)};return Ye.forEach(Object.keys(mt(mt({},t),e)),function(x){let b=d[x]||i,A=b(t[x],e[x],x);Ye.isUndefined(A)&&b!==f||(r[x]=A)}),r}var yL=t=>{let e=cc({},t),{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:l,auth:f}=e;if(e.headers=l=Fo.from(l),e.url=MS(LS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),Ye.isFormData(r)){if(ji.hasStandardBrowserEnv||ji.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(Ye.isFunction(r.getHeaders)){let d=r.getHeaders(),v=["content-type","content-length"];Object.entries(d).forEach(([x,b])=>{v.includes(x.toLowerCase())&&l.set(x,b)})}}if(ji.hasStandardBrowserEnv&&(n&&Ye.isFunction(n)&&(n=n(e)),n||n!==!1&&yOe(e.url))){let d=i&&o&&_Oe.read(o);d&&l.set(i,d)}return e};var vHt=typeof XMLHttpRequest!="undefined",bOe=vHt&&function(t){return new Promise(function(r,n){let i=yL(t),o=i.data,l=Fo.from(i.headers).normalize(),{responseType:f,onUploadProgress:d,onDownloadProgress:v}=i,x,b,A,P,N;function j(){P&&P(),N&&N(),i.cancelToken&&i.cancelToken.unsubscribe(x),i.signal&&i.signal.removeEventListener("abort",x)}let D=new XMLHttpRequest;D.open(i.method.toUpperCase(),i.url,!0),D.timeout=i.timeout;function F(){if(!D)return;let $=Fo.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ie={data:!f||f==="text"||f==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:$,config:t,request:D};OS(function(ae){r(ae),j()},function(ae){n(ae),j()},ie),D=null}"onloadend"in D?D.onloadend=F:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(F)},D.onabort=function(){D&&(n(new Nr("Request aborted",Nr.ECONNABORTED,t,D)),D=null)},D.onerror=function(Z){let ie=Z&&Z.message?Z.message:"Network Error",ne=new Nr(ie,Nr.ERR_NETWORK,t,D);ne.event=Z||null,n(ne),D=null},D.ontimeout=function(){let Z=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",ie=i.transitional||mL;i.timeoutErrorMessage&&(Z=i.timeoutErrorMessage),n(new Nr(Z,ie.clarifyTimeoutError?Nr.ETIMEDOUT:Nr.ECONNABORTED,t,D)),D=null},o===void 0&&l.setContentType(null),"setRequestHeader"in D&&Ye.forEach(l.toJSON(),function(Z,ie){D.setRequestHeader(ie,Z)}),Ye.isUndefined(i.withCredentials)||(D.withCredentials=!!i.withCredentials),f&&f!=="json"&&(D.responseType=i.responseType),v&&([A,N]=E0(v,!0),D.addEventListener("progress",A)),d&&D.upload&&([b,P]=E0(d),D.upload.addEventListener("progress",b),D.upload.addEventListener("loadend",P)),(i.cancelToken||i.signal)&&(x=$=>{D&&(n(!$||$.type?new cf(null,t,D):$),D.abort(),D=null)},i.cancelToken&&i.cancelToken.subscribe(x),i.signal&&(i.signal.aborted?x():i.signal.addEventListener("abort",x)));let U=MW(i.url);if(U&&ji.protocols.indexOf(U)===-1){n(new Nr("Unsupported protocol "+U+":",Nr.ERR_BAD_REQUEST,t));return}D.send(o||null)})};p();p();var yHt=(t,e)=>{let{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i,o=function(v){if(!i){i=!0,f();let x=v instanceof Error?v:this.reason;n.abort(x instanceof Nr?x:new cf(x instanceof Error?x.message:x))}},l=e&&setTimeout(()=>{l=null,o(new Nr(`timeout ${e} of ms exceeded`,Nr.ETIMEDOUT))},e),f=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(v=>{v.unsubscribe?v.unsubscribe(o):v.removeEventListener("abort",o)}),t=null)};t.forEach(v=>v.addEventListener("abort",o));let{signal:d}=n;return d.unsubscribe=()=>Ye.asap(f),d}},wOe=yHt;p();var _Ht=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},xHt=function(t,e){return HF(this,null,function*(){try{for(var r=rJ(bHt(t)),n,i,o;n=!(i=yield new Jm(r.next())).done;n=!1){let l=i.value;yield*WF(_Ht(l,e))}}catch(i){o=[i]}finally{try{n&&(i=r.return)&&(yield new Jm(i.call(r)))}finally{if(o)throw o[0]}}})},bHt=function(t){return HF(this,null,function*(){if(t[Symbol.asyncIterator]){yield*WF(t);return}let e=t.getReader();try{for(;;){let{done:r,value:n}=yield new Jm(e.read());if(r)break;yield n}}finally{yield new Jm(e.cancel())}})},LW=(t,e,r,n)=>{let i=xHt(t,e),o=0,l,f=v=>{l||(l=!0,n&&n(v))};return new ReadableStream({pull(v){return zn(this,null,function*(){try{let{done:x,value:b}=yield i.next();if(x){f(),v.close();return}let A=b.byteLength;if(r){let P=o+=A;r(P)}v.enqueue(new Uint8Array(b))}catch(x){throw f(x),x}})},cancel(v){return f(v),i.return()}},{highWaterMark:2})};var EOe=64*1024,{isFunction:_L}=Ye,wHt=(({Request:t,Response:e})=>({Request:t,Response:e}))(Ye.global),{ReadableStream:SOe,TextEncoder:TOe}=Ye.global,IOe=(t,...e)=>{try{return!!t(...e)}catch(r){return!1}},EHt=t=>{t=Ye.merge.call({skipUndefined:!0},wHt,t);let{fetch:e,Request:r,Response:n}=t,i=e?_L(e):typeof fetch=="function",o=_L(r),l=_L(n);if(!i)return!1;let f=i&&_L(SOe),d=i&&(typeof TOe=="function"?(N=>j=>N.encode(j))(new TOe):N=>zn(null,null,function*(){return new Uint8Array(yield new r(N).arrayBuffer())})),v=o&&f&&IOe(()=>{let N=!1,j=new r(ji.origin,{body:new SOe,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!j}),x=l&&f&&IOe(()=>Ye.isReadableStream(new n("").body)),b={stream:x&&(N=>N.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!b[N]&&(b[N]=(j,D)=>{let F=j&&j[N];if(F)return F.call(j);throw new Nr(`Response type '${N}' is not supported`,Nr.ERR_NOT_SUPPORT,D)})});let A=N=>zn(null,null,function*(){if(N==null)return 0;if(Ye.isBlob(N))return N.size;if(Ye.isSpecCompliantForm(N))return(yield new r(ji.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(N)||Ye.isArrayBuffer(N))return N.byteLength;if(Ye.isURLSearchParams(N)&&(N=N+""),Ye.isString(N))return(yield d(N)).byteLength}),P=(N,j)=>zn(null,null,function*(){let D=Ye.toFiniteNumber(N.getContentLength());return D==null?A(j):D});return N=>zn(null,null,function*(){let{url:j,method:D,data:F,signal:U,cancelToken:$,timeout:Z,onDownloadProgress:ie,onUploadProgress:ne,responseType:ae,headers:de,withCredentials:ye="same-origin",fetchOptions:me}=yL(N),be=e||fetch;ae=ae?(ae+"").toLowerCase():"text";let Ne=wOe([U,$&&$.toAbortSignal()],Z),Ce=null,qe=Ne&&Ne.unsubscribe&&(()=>{Ne.unsubscribe()}),He;try{if(ne&&v&&D!=="get"&&D!=="head"&&(He=yield P(de,F))!==0){let dt=new r(j,{method:"POST",body:F,duplex:"half"}),ze;if(Ye.isFormData(F)&&(ze=dt.headers.get("content-type"))&&de.setContentType(ze),dt.body){let[Dt,Ot]=CW(He,E0(PW(ne)));F=LW(dt.body,EOe,Dt,Ot)}}Ye.isString(ye)||(ye=ye?"include":"omit");let Ke=o&&"credentials"in r.prototype,Je=on(mt({},me),{signal:Ne,method:D.toUpperCase(),headers:de.normalize().toJSON(),body:F,duplex:"half",credentials:Ke?ye:void 0});Ce=o&&new r(j,Je);let We=yield o?be(Ce,me):be(j,Je),lt=x&&(ae==="stream"||ae==="response");if(x&&(ie||lt&&qe)){let dt={};["status","statusText","headers"].forEach(Ue=>{dt[Ue]=We[Ue]});let ze=Ye.toFiniteNumber(We.headers.get("content-length")),[Dt,Ot]=ie&&CW(ze,E0(PW(ie),!0))||[];We=new n(LW(We.body,EOe,Dt,()=>{Ot&&Ot(),qe&&qe()}),dt)}ae=ae||"text";let pt=yield b[Ye.findKey(b,ae)||"text"](We,N);return!lt&&qe&&qe(),yield new Promise((dt,ze)=>{OS(dt,ze,{data:pt,headers:Fo.from(We.headers),status:We.status,statusText:We.statusText,config:N,request:Ce})})}catch(Ke){throw qe&&qe(),Ke&&Ke.name==="TypeError"&&/Load failed|fetch/i.test(Ke.message)?Object.assign(new Nr("Network Error",Nr.ERR_NETWORK,N,Ce),{cause:Ke.cause||Ke}):Nr.from(Ke,Ke&&Ke.code,N,Ce)}})},SHt=new Map,DW=t=>{let e=t?t.env:{},{fetch:r,Request:n,Response:i}=e,o=[n,i,r],l=o.length,f=l,d,v,x=SHt;for(;f--;)d=o[f],v=x.get(d),v===void 0&&x.set(d,v=f?new Map:EHt(e)),x=v;return v},n8r=DW();var NW={http:pL,xhr:bOe,fetch:{get:DW}};Ye.forEach(NW,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(r){}Object.defineProperty(t,"adapterName",{value:e})}});var AOe=t=>`- ${t}`,IHt=t=>Ye.isFunction(t)||t===null||t===!1,xL={getAdapter:(t,e)=>{t=Ye.isArray(t)?t:[t];let{length:r}=t,n,i,o={};for(let l=0;l<r;l++){n=t[l];let f;if(i=n,!IHt(n)&&(i=NW[(f=String(n)).toLowerCase()],i===void 0))throw new Nr(`Unknown adapter '${f}'`);if(i&&(Ye.isFunction(i)||(i=i.get(e))))break;o[f||"#"+l]=i}if(!i){let l=Object.entries(o).map(([d,v])=>`adapter ${d} `+(v===!1?"is not supported by the environment":"is not available in the build")),f=r?l.length>1?`since :
`+l.map(AOe).join(`
`):" "+AOe(l[0]):"as no adapter specified";throw new Nr("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return i},adapters:NW};function kW(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new cf(null,t)}function bL(t){return kW(t),t.headers=Fo.from(t.headers),t.data=PS.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xL.getAdapter(t.adapter||b0.adapter,t)(t).then(function(n){return kW(t),n.data=PS.call(t,t.transformResponse,n),n.headers=Fo.from(n.headers),n},function(n){return RS(n)||(kW(t),n&&n.response&&(n.response.data=PS.call(t,t.transformResponse,n.response),n.response.headers=Fo.from(n.response.headers))),Promise.reject(n)})}p();p();var wL="1.12.2";var EL={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{EL[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var MOe={};EL.transitional=function(e,r,n){function i(o,l){return"[Axios v"+wL+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,f)=>{if(e===!1)throw new Nr(i(l," has been removed"+(r?" in "+r:"")),Nr.ERR_DEPRECATED);return r&&!MOe[l]&&(MOe[l]=!0,console.warn(i(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,l,f):!0}};EL.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function AHt(t,e,r){if(typeof t!="object")throw new Nr("options must be an object",Nr.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),i=n.length;for(;i-->0;){let o=n[i],l=e[o];if(l){let f=t[o],d=f===void 0||l(f,o,t);if(d!==!0)throw new Nr("option "+o+" must be "+d,Nr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Nr("Unknown option "+o,Nr.ERR_BAD_OPTION)}}var DS={assertOptions:AHt,validators:EL};var ff=DS.validators,S0=class{constructor(e){this.defaults=e||{},this.interceptors={request:new bW,response:new bW}}request(e,r){return zn(this,null,function*(){try{return yield this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;let o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch(l){}}throw n}})}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=cc(this.defaults,r);let{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&DS.assertOptions(n,{silentJSONParsing:ff.transitional(ff.boolean),forcedJSONParsing:ff.transitional(ff.boolean),clarifyTimeoutError:ff.transitional(ff.boolean)},!1),i!=null&&(Ye.isFunction(i)?r.paramsSerializer={serialize:i}:DS.assertOptions(i,{encode:ff.function,serialize:ff.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),DS.assertOptions(r,{baseUrl:ff.spelling("baseURL"),withXsrfToken:ff.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&Ye.merge(o.common,o[r.method]);o&&Ye.forEach(["delete","get","head","post","put","patch","common"],N=>{delete o[N]}),r.headers=Fo.concat(l,o);let f=[],d=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(d=d&&j.synchronous,f.unshift(j.fulfilled,j.rejected))});let v=[];this.interceptors.response.forEach(function(j){v.push(j.fulfilled,j.rejected)});let x,b=0,A;if(!d){let N=[bL.bind(this),void 0];for(N.unshift(...f),N.push(...v),A=N.length,x=Promise.resolve(r);b<A;)x=x.then(N[b++],N[b++]);return x}A=f.length;let P=r;for(;b<A;){let N=f[b++],j=f[b++];try{P=N(P)}catch(D){j.call(this,D);break}}try{x=bL.call(this,P)}catch(N){return Promise.reject(N)}for(b=0,A=v.length;b<A;)x=x.then(v[b++],v[b++]);return x}getUri(e){e=cc(this.defaults,e);let r=LS(e.baseURL,e.url,e.allowAbsoluteUrls);return MS(r,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){S0.prototype[e]=function(r,n){return this.request(cc(n||{},{method:e,url:r,data:(n||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function r(n){return function(o,l,f){return this.request(cc(f||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}S0.prototype[e]=r(),S0.prototype[e+"Form"]=r(!0)});var NS=S0;p();var qW=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});let n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-->0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o,l=new Promise(f=>{n.subscribe(f),o=f}).then(i);return l.cancel=function(){n.unsubscribe(o)},l},e(function(o,l,f){n.reason||(n.reason=new cf(o,l,f),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){let e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new t(function(i){e=i}),cancel:e}}},COe=qW;p();function FW(t){return function(r){return t.apply(null,r)}}p();function jW(t){return Ye.isObject(t)&&t.isAxiosError===!0}p();var zW={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zW).forEach(([t,e])=>{zW[e]=t});var POe=zW;function ROe(t){let e=new NS(t),r=SS(NS.prototype.request,e);return Ye.extend(r,NS.prototype,e,{allOwnKeys:!0}),Ye.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return ROe(cc(t,i))},r}var wo=ROe(b0);wo.Axios=NS;wo.CanceledError=cf;wo.CancelToken=COe;wo.isCancel=RS;wo.VERSION=wL;wo.toFormData=Nd;wo.AxiosError=Nr;wo.Cancel=wo.CanceledError;wo.all=function(e){return Promise.all(e)};wo.spread=FW;wo.isAxiosError=jW;wo.mergeConfig=cc;wo.AxiosHeaders=Fo;wo.formToJSON=t=>gL(Ye.isHTMLForm(t)?new FormData(t):t);wo.getAdapter=xL.getAdapter;wo.HttpStatusCode=POe;wo.default=wo;var hf=wo;var{Axios:pZr,AxiosError:dZr,CanceledError:mZr,isCancel:gZr,CancelToken:vZr,VERSION:yZr,all:_Zr,Cancel:xZr,isAxiosError:bZr,spread:wZr,toFormData:EZr,AxiosHeaders:SZr,HttpStatusCode:TZr,formToJSON:IZr,getAdapter:AZr,mergeConfig:MZr}=hf;p();var kS=je(SL(),1);p();p();var WHt=je(TL(),1);p();var GW=(t,e="control-feedback-container")=>{let r=document.getElementById(e);if(r===null){let n=t.getCanvasContainer();r=document.createElement("div"),r.id=e,n.appendChild(r)}return r};p();p();p();p();p();var BOe={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"};p();var YHt=je(SL(),1);function ti(t){return t!=null}function Wg(t){return typeof t=="string"||t instanceof String}function kr(t){let e=Oi.getLanguageDict();if(e===void 0)throw new Error("Dictionary is undefined.");let r=e[t];return r===void 0?(console.warn(`Translation for key "${t}" was not found in dictionary.`),""):r}var VOe={EN:"en",DE:"de"},KHt=ti(T.env.DEV_MODE_SECRET)&&T.env.DEV_MODE_SECRET!==""&&ti(T.env.DEV_MODE_NAME)&&T.env.DEV_MODE_NAME!=="",IL=()=>({"Dev-Mode-Secret":T.env.DEV_MODE_SECRET,"Dev-Mode-Name":T.env.DEV_MODE_NAME}),hs={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:VOe.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},Oi={axiosApiInstance:null,appendSettings(t){hs=Object.assign({},hs,t)},isDebug(){var t;return!!((t=T==null?void 0:T.env)!=null&&t.VKF_DEBUG)},getSettings(){return hs},getBaseMaps(){return hs.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},hs.MAPVIEW_PARAMS)},getLanguageDict(){return hs.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return hs.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},hs.TERRAIN_TILES)},getUsername(){return hs.USERNAME},isUserAuthenticated(){return hs.USER_ISAUTHENTICATED===!0},updateSettings(t){hs=t},_initAxiosApiInstance(){let t=hs.API_GEOREFERENCE_BASEURL,e=Wg(t)&&t.length===0;if(!ti(t)||e)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:t,withCredentials:!0},KHt?{headers:{get:IL(),post:IL(),put:IL(),delete:IL()}}:{});this.axiosApiInstance=hf.create(r)},getGeoreferenceApiClient(){return ti(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let t=hs.MARKER_URL;if(!ti(t))throw new Error("The marker icon url is not set.");return{id:hs.MARKER_IMAGE_ID,url:t}},getUserRole(){return hs.USER_ROLE}};p();var Av=je(St(),1);p();var qa=je(St()),sLe=je(No());function XHt(t){return!!t&&typeof t.then=="function"}var ao=XHt;function QHt(t,e){if(t!=null)return t;throw new Error(e!=null?e:"Got unexpected null or undefined")}var Bn=QHt,RL=class{},JHt=new RL,f8={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(t){return t.state===this.state&&t.contents===this.contents},map(t){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let r=t(this.contents);return ao(r)?I0(r.then(n=>({__value:n}))):h8(r)}catch(r){return ao(r)?I0(r.next(()=>t(this.contents))):p8(r)}if(this.state==="loading")return I0(this.contents.then(r=>({__value:t(r.__value)})).catch(r=>{if(ao(r))return r.then(()=>t(this.contents));throw r}));throw new Error("Invalid Loadable state")}};function h8(t){return Object.freeze(on(mt({state:"hasValue",contents:t},f8),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function p8(t){return Object.freeze(on(mt({state:"hasError",contents:t},f8),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function I0(t){return Object.freeze(on(mt({state:"loading",contents:t},f8),{getValue(){throw this.contents.then(({__value:e})=>e)},toPromise(){return this.contents.then(({__value:e})=>e)},promiseMaybe(){return this.contents.then(({__value:e})=>e)},promiseOrThrow(){return this.contents.then(({__value:e})=>e)}}))}function eWt(){return I0(new Promise(()=>{}))}function tWt(t){return t.every(e=>e.state==="hasValue")?h8(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?p8(Bn(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):I0(Promise.all(t.map(e=>e.contents)).then(e=>({__value:e})))}var ZS={loadableWithValue:h8,loadableWithError:p8,loadableWithPromise:I0,loadableLoading:eWt,loadableAll:tWt,Canceled:RL,CANCELED:JHt},$W,lLe=($W=qa.default.useMutableSource)!==null&&$W!==void 0?$W:qa.default.unstable_useMutableSource;function rWt(){return lLe&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var uLe={mutableSourceExists:rWt,useMutableSource:lLe},{mutableSourceExists:nWt}=uLe,d8=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function m8(t){var e;return t==="recoil_early_rendering_2021"&&!nWt()?!1:(e=d8.get(t))!==null&&e!==void 0?e:!1}m8.setPass=t=>{d8.set(t,!0)};m8.setFail=t=>{d8.set(t,!1)};var ri=m8;function iWt(t,e,{error:r}={}){return null}var oWt=iWt,pf=oWt;function aWt(t,e){let r=new Set(t);return r.add(e),r}function sWt(t,e){let r=new Set(t);return r.delete(e),r}function lWt(t,e,r){let n=new Map(t);return n.set(e,r),n}function uWt(t,e,r){let n=new Map(t);return n.set(e,r(n.get(e))),n}function cWt(t,e){let r=new Map(t);return r.delete(e),r}function fWt(t,e){let r=new Map(t);return e.forEach(n=>r.delete(n)),r}var cLe={setByAddingToSet:aWt,setByDeletingFromSet:sWt,mapBySettingInMap:lWt,mapByUpdatingInMap:uWt,mapByDeletingFromMap:cWt,mapByDeletingMultipleFromMap:fWt};function*hWt(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}var fLe=hWt;function pWt(t,e){return function*(){let r=0;for(let n of t)yield e(n,r++)}()}var hLe=pWt;function dWt(t,...e){}var mWt=dWt,g8=mWt;function _n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $S=class{constructor(e){_n(this,"key",void 0),this.key=e}},OL=class extends $S{},LL=class extends $S{};function gWt(t){return t instanceof OL||t instanceof LL}var GL={AbstractRecoilValue:$S,RecoilState:OL,RecoilValueReadOnly:LL,isRecoilValue:gWt},vWt=GL.AbstractRecoilValue,yWt=GL.RecoilState,_Wt=GL.RecoilValueReadOnly,xWt=GL.isRecoilValue,qd=Object.freeze({__proto__:null,AbstractRecoilValue:vWt,RecoilState:yWt,RecoilValueReadOnly:_Wt,isRecoilValue:xWt}),DL=class{},bWt=new DL,YW=class extends Error{constructor(e){super(`Tried to set the value of Recoil selector ${e} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},Yg=new Map,v8=new Map;function wWt(t){return hLe(t,e=>Bn(v8.get(e)))}function EWt(t){if(Yg.has(t.key)){let r=`Duplicate atom key "${t.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(r)}Yg.set(t.key,t);let e=t.set==null?new qd.RecoilValueReadOnly(t.key):new qd.RecoilState(t.key);return v8.set(t.key,e),e}var NL=class extends Error{};function SWt(t){let e=Yg.get(t);if(e==null)throw new NL(`Missing definition for RecoilValue: "${t}""`);return e}function TWt(t){return Yg.get(t)}var kL=new Map;function IWt(t){var e;if(!ri("recoil_memory_managament_2020"))return;let r=Yg.get(t);if(!(r==null||(e=r.shouldDeleteConfigOnRelease)===null||e===void 0)&&e.call(r)){var n;Yg.delete(t),(n=pLe(t))===null||n===void 0||n(),kL.delete(t)}}function AWt(t,e){ri("recoil_memory_managament_2020")&&(e===void 0?kL.delete(t):kL.set(t,e))}function pLe(t){return kL.get(t)}var hu={nodes:Yg,recoilValues:v8,registerNode:EWt,getNode:SWt,getNodeMaybe:TWt,deleteNodeConfigIfPossible:IWt,setConfigDeletionHandler:AWt,getConfigDeletionHandler:pLe,recoilValuesForKeys:wWt,NodeMissingError:NL,DefaultValue:DL,DEFAULT_VALUE:bWt,RecoilValueNotReady:YW},qL=class{};function MWt(){return new qL}var $L={RetentionZone:qL,retentionZone:MWt},{setByAddingToSet:CWt}=cLe,{getNode:HL,getNodeMaybe:PWt,recoilValuesForKeys:GOe}=hu,{RetentionZone:$Oe}=$L,RWt=Object.freeze(new Set),KW=class extends Error{};function OWt(t,e,r){if(!ri("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=t.getState().retention;function i(o){let l=n.get(o);l||n.set(o,l=new Set),l.add(e)}if(r instanceof $Oe)i(r);else if(Array.isArray(r))for(let o of r)i(o);return()=>{if(!ri("recoil_memory_managament_2020"))return;let o=t.getState().retention.nodesRetainedByZone;function l(f){let d=o.get(f);d&&d.delete(e),d&&d.size===0&&o.delete(f)}if(r instanceof $Oe)l(r);else if(Array.isArray(r))for(let f of r)l(f)}}function y8(t,e,r,n){let i=t.getState();if(i.nodeCleanupFunctions.has(r))return;let o=HL(r),l=OWt(t,r,o.retainedBy),f=o.init(t,e,n);i.nodeCleanupFunctions.set(r,()=>{f(),l()})}function LWt(t,e){var r;let n=t.getState();(r=n.nodeCleanupFunctions.get(e))===null||r===void 0||r(),n.nodeCleanupFunctions.delete(e)}function DWt(t,e,r){return y8(t,e,r,"get"),HL(r).get(t,e)}function dLe(t,e,r){return HL(r).peek(t,e)}function NWt(t,e,r){var n;let i=PWt(e);return i==null||(n=i.invalidate)===null||n===void 0||n.call(i,t),on(mt({},t),{atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,r),dirtyAtoms:CWt(t.dirtyAtoms,e)})}function kWt(t,e,r,n){let i=HL(r);if(i.set==null)throw new KW(`Attempt to set read-only RecoilValue: ${r}`);let o=i.set;return y8(t,e,r,"set"),o(t,e,n)}function qWt(t,e,r){var n,i,o;let l=t.getState(),f=t.getGraph(e.version),d=l.knownAtoms.has(r)?"atom":l.knownSelectors.has(r)?"selector":void 0,v=fLe(mLe(t,e,new Set([r])),x=>x!==r);return{loadable:dLe(t,e,r),isActive:l.knownAtoms.has(r)||l.knownSelectors.has(r),isSet:d==="selector"?!1:e.atomValues.has(r),isModified:e.dirtyAtoms.has(r),type:d,deps:GOe((n=f.nodeDeps.get(r))!==null&&n!==void 0?n:[]),subscribers:{nodes:GOe(v),components:hLe((i=(o=l.nodeToComponentSubscriptions.get(r))===null||o===void 0?void 0:o.values())!==null&&i!==void 0?i:[],([x])=>({name:x}))}}}function mLe(t,e,r){let n=new Set,i=Array.from(r),o=t.getGraph(e.version);for(let f=i.pop();f;f=i.pop()){var l;n.add(f);let d=(l=o.nodeToNodeSubscriptions.get(f))!==null&&l!==void 0?l:RWt;for(let v of d)n.has(v)||i.push(v)}return n}var P0={getNodeLoadable:DWt,peekNodeLoadable:dLe,setNodeValue:kWt,cleanUpNode:LWt,setUnvalidatedAtomValue_DEPRECATED:NWt,peekNodeInfo:qWt,getDownstreamNodes:mLe,initializeNodeIfNewToStore:y8},{CANCELED:FWt}=ZS,{getDownstreamNodes:jWt,getNodeLoadable:gLe,setNodeValue:zWt}=P0,{getNodeMaybe:vLe}=hu,{DefaultValue:_8,RecoilValueNotReady:UWt}=hu,{AbstractRecoilValue:BWt,RecoilState:VWt,RecoilValueReadOnly:GWt,isRecoilValue:$Wt}=qd;function HWt(t,{key:e},r=t.getState().currentTree){var n,i;let o=t.getState();r.version===o.currentTree.version||r.version===((n=o.nextTree)===null||n===void 0?void 0:n.version)||r.version===((i=o.previousTree)===null||i===void 0?void 0:i.version)||pf("Tried to read from a discarded tree");let l=gLe(t,r,e);return l.state==="loading"&&l.contents.catch(()=>FWt),l}function WWt(t,e){let r=t.clone();return e.forEach((n,i)=>{n.state==="hasValue"&&n.contents instanceof _8?r.delete(i):r.set(i,n)}),r}function ZWt(t,e,{key:r},n){if(typeof n=="function"){let i=gLe(t,e,r);if(i.state==="loading")throw new UWt(r);if(i.state==="hasError")throw i.contents;return n(i.contents)}else return n}function YWt(t,e,r){if(r.type==="set"){let{recoilValue:i,valueOrUpdater:o}=r,l=ZWt(t,e,i,o),f=zWt(t,e,i.key,l);for(let[d,v]of f.entries())XW(e,d,v)}else if(r.type==="setLoadable"){let{recoilValue:{key:i},loadable:o}=r;XW(e,i,o)}else if(r.type==="markModified"){let{recoilValue:{key:i}}=r;e.dirtyAtoms.add(i)}else if(r.type==="setUnvalidated"){var n;let{recoilValue:{key:i},unvalidatedValue:o}=r,l=vLe(i);l==null||(n=l.invalidate)===null||n===void 0||n.call(l,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,o),e.dirtyAtoms.add(i)}else pf(`Unknown action ${r.type}`)}function XW(t,e,r){r.state==="hasValue"&&r.contents instanceof _8?t.atomValues.delete(e):t.atomValues.set(e,r),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function yLe(t,e){t.replaceState(r=>{let n=_Le(r);for(let i of e)YWt(t,n,i);return QW(t,n),n})}function WL(t,e){if(VS.length){let r=VS[VS.length-1],n=r.get(t);n||r.set(t,n=[]),n.push(e)}else yLe(t,[e])}var VS=[];function KWt(){let t=new Map;return VS.push(t),()=>{for(let[r,n]of t)yLe(r,n);VS.pop()!==t&&pf("Incorrect order of batch popping")}}function _Le(t){return on(mt({},t),{atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)})}function QW(t,e){let r=jWt(t,e,e.dirtyAtoms);for(let o of r){var n,i;(n=vLe(o))===null||n===void 0||(i=n.invalidate)===null||i===void 0||i.call(n,e)}}function xLe(t,e,r){WL(t,{type:"set",recoilValue:e,valueOrUpdater:r})}function XWt(t,e,r){if(r instanceof _8)return xLe(t,e,r);WL(t,{type:"setLoadable",recoilValue:e,loadable:r})}function QWt(t,e){WL(t,{type:"markModified",recoilValue:e})}function JWt(t,e,r){WL(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:r})}var e8t=0;function t8t(t,{key:e},r,n=null){let i=e8t++,o=t.getState();if(o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),Bn(o.nodeToComponentSubscriptions.get(e)).set(i,[n!=null?n:"<not captured>",r]),ri("recoil_early_rendering_2021")){let l=t.getState().nextTree;l&&l.dirtyAtoms.has(e)&&r(l)}return{release:()=>{let l=t.getState(),f=l.nodeToComponentSubscriptions.get(e);if(f===void 0||!f.has(i)){pf(`Subscription missing at release time for atom ${e}. This is a bug in Recoil.`);return}f.delete(i),f.size===0&&l.nodeToComponentSubscriptions.delete(e)}}}var Kg={RecoilValueReadOnly:GWt,AbstractRecoilValue:BWt,RecoilState:VWt,getRecoilValueAsLoadable:HWt,setRecoilValue:xLe,setRecoilValueLoadable:XWt,markRecoilValueModified:QWt,setUnvalidatedRecoilValue:JWt,subscribeToRecoilValue:t8t,isRecoilValue:$Wt,applyAtomValueWrites:WWt,batchStart:KWt,writeLoadableToTreeState:XW,invalidateDownstreams:QW,copyTreeState:_Le,invalidateDownstreams_FOR_TESTING:QW},{unstable_batchedUpdates:r8t}=sLe.default,n8t={unstable_batchedUpdates:r8t},{unstable_batchedUpdates:i8t}=n8t,o8t={unstable_batchedUpdates:i8t},{batchStart:a8t}=Kg,{unstable_batchedUpdates:s8t}=o8t,x8=s8t,l8t=t=>{x8=t},u8t=()=>x8,c8t=t=>{x8(()=>{let e=()=>{};try{e=a8t(),t()}finally{e()}})},b8={getBatcher:u8t,setBatcher:l8t,batchUpdates:c8t};function f8t(t,e){e()}var h8t={enqueueExecution:f8t};function p8t(t,...e){let r=new Set;e:for(let n of t){for(let i of e)if(i.has(n))continue e;r.add(n)}return r}var FL=p8t;function d8t(t,e){let r=new Map;return t.forEach((n,i)=>{r.set(i,e(n,i))}),r}var jL=d8t;function m8t(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function g8t(t){return{nodeDeps:jL(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:jL(t.nodeToNodeSubscriptions,e=>new Set(e))}}function HW(t,e,r){let{nodeDeps:n,nodeToNodeSubscriptions:i}=e;t.forEach((o,l)=>{let f=n.get(l);if(f&&r&&f!==r.nodeDeps.get(l))return;n.set(l,new Set(o)),(f==null?o:FL(o,f)).forEach(v=>{i.has(v)||i.set(v,new Set),Bn(i.get(v)).add(l)}),f&&FL(f,o).forEach(x=>{if(!i.has(x))return;let b=Bn(i.get(x));b.delete(l),b.size===0&&i.delete(x)})})}function v8t(t,e,r){var n,i,o,l;let f=e.getState();r===f.currentTree.version||r===((n=f.nextTree)===null||n===void 0?void 0:n.version)||r===((i=f.previousTree)===null||i===void 0?void 0:i.version)||pf("Tried to save dependencies to a discarded tree");let d=e.getGraph(r);if(HW(t,d),r===((o=f.previousTree)===null||o===void 0?void 0:o.version)){let x=e.getGraph(f.currentTree.version);HW(t,x,d)}if(r===((l=f.previousTree)===null||l===void 0?void 0:l.version)||r===f.currentTree.version){var v;let x=(v=f.nextTree)===null||v===void 0?void 0:v.version;if(x!==void 0){let b=e.getGraph(x);HW(t,b,d)}}}function y8t(t,e){t.forEach((r,n)=>{e.has(n)||e.set(n,new Set);let i=Bn(e.get(n));r.forEach(o=>i.add(o))})}function _8t(t,e,r){r.has(t)||r.set(t,new Set),Bn(r.get(t)).add(e)}var YS={addToDependencyMap:_8t,cloneGraph:g8t,graph:m8t,mergeDepsIntoDependencyMap:y8t,saveDependencyMapToStore:v8t};function x8t(t,e){return e={exports:{}},t(e,e.exports),e.exports}var b8t=x8t(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},r={},n=5,i=Math.pow(2,n),o=i-1,l=i/2,f=i/4,d={},v=function(pe){return function(){return pe}},x=r.hash=function(he){var pe=typeof he=="undefined"?"undefined":e(he);if(pe==="number")return he;pe!=="string"&&(he+="");for(var Re=0,tt=0,xe=he.length;tt<xe;++tt){var ut=he.charCodeAt(tt);Re=(Re<<5)-Re+ut|0}return Re},b=function(pe){return pe-=pe>>1&1431655765,pe=(pe&858993459)+(pe>>2&858993459),pe=pe+(pe>>4)&252645135,pe+=pe>>8,pe+=pe>>16,pe&127},A=function(pe,Re){return Re>>>pe&o},P=function(pe){return 1<<pe},N=function(pe,Re){return b(pe&Re-1)},j=function(pe,Re,tt,xe){var ut=xe;if(!pe){var It=xe.length;ut=new Array(It);for(var ft=0;ft<It;++ft)ut[ft]=xe[ft]}return ut[Re]=tt,ut},D=function(pe,Re,tt){var xe=tt.length-1,ut=0,It=0,ft=tt;if(pe)ut=It=Re;else for(ft=new Array(xe);ut<Re;)ft[It++]=tt[ut++];for(++ut;ut<=xe;)ft[It++]=tt[ut++];return pe&&(ft.length=xe),ft},F=function(pe,Re,tt,xe){var ut=xe.length;if(pe){for(var It=ut;It>=Re;)xe[It--]=xe[It];return xe[Re]=tt,xe}for(var ft=0,_t=0,Wt=new Array(ut+1);ft<Re;)Wt[_t++]=xe[ft++];for(Wt[Re]=tt;ft<ut;)Wt[++_t]=xe[ft++];return Wt},U=1,$=2,Z=3,ie=4,ne={__hamt_isEmpty:!0},ae=function(pe){return pe===ne||pe&&pe.__hamt_isEmpty},de=function(pe,Re,tt,xe){return{type:U,edit:pe,hash:Re,key:tt,value:xe,_modify:We}},ye=function(pe,Re,tt){return{type:$,edit:pe,hash:Re,children:tt,_modify:lt}},me=function(pe,Re,tt){return{type:Z,edit:pe,mask:Re,children:tt,_modify:pt}},be=function(pe,Re,tt){return{type:ie,edit:pe,size:Re,children:tt,_modify:dt}},Ne=function(pe){return pe===ne||pe.type===U||pe.type===$},Ce=function(pe,Re,tt,xe,ut){for(var It=[],ft=xe,_t=0,Wt=0;ft;++Wt)ft&1&&(It[Wt]=ut[_t++]),ft>>>=1;return It[Re]=tt,be(pe,_t+1,It)},qe=function(pe,Re,tt,xe){for(var ut=new Array(Re-1),It=0,ft=0,_t=0,Wt=xe.length;_t<Wt;++_t)if(_t!==tt){var Tr=xe[_t];Tr&&!ae(Tr)&&(ut[It++]=Tr,ft|=1<<_t)}return me(pe,ft,ut)},He=function he(pe,Re,tt,xe,ut,It){if(tt===ut)return ye(pe,tt,[It,xe]);var ft=A(Re,tt),_t=A(Re,ut);return me(pe,P(ft)|P(_t),ft===_t?[he(pe,Re+n,tt,xe,ut,It)]:ft<_t?[xe,It]:[It,xe])},Ke=function(pe,Re,tt,xe,ut,It,ft,_t){for(var Wt=ut.length,Tr=0;Tr<Wt;++Tr){var rn=ut[Tr];if(tt(ft,rn.key)){var Pr=rn.value,ar=It(Pr);return ar===Pr?ut:ar===d?(--_t.value,D(pe,Tr,ut)):j(pe,Tr,de(Re,xe,ft,ar),ut)}}var ur=It();return ur===d?ut:(++_t.value,j(pe,Wt,de(Re,xe,ft,ur),ut))},Je=function(pe,Re){return pe===Re.edit},We=function(pe,Re,tt,xe,ut,It,ft){if(Re(It,this.key)){var _t=xe(this.value);return _t===this.value?this:_t===d?(--ft.value,ne):Je(pe,this)?(this.value=_t,this):de(pe,ut,It,_t)}var Wt=xe();return Wt===d?this:(++ft.value,He(pe,tt,this.hash,this,ut,de(pe,ut,It,Wt)))},lt=function(pe,Re,tt,xe,ut,It,ft){if(ut===this.hash){var _t=Je(pe,this),Wt=Ke(_t,pe,Re,this.hash,this.children,xe,It,ft);return Wt===this.children?this:Wt.length>1?ye(pe,this.hash,Wt):Wt[0]}var Tr=xe();return Tr===d?this:(++ft.value,He(pe,tt,this.hash,this,ut,de(pe,ut,It,Tr)))},pt=function(pe,Re,tt,xe,ut,It,ft){var _t=this.mask,Wt=this.children,Tr=A(tt,ut),rn=P(Tr),Pr=N(_t,rn),ar=_t&rn,ur=ar?Wt[Pr]:ne,An=ur._modify(pe,Re,tt+n,xe,ut,It,ft);if(ur===An)return this;var gt=Je(pe,this),si=_t,Sn=void 0;if(ar&&ae(An)){if(si&=~rn,!si)return ne;if(Wt.length<=2&&Ne(Wt[Pr^1]))return Wt[Pr^1];Sn=D(gt,Pr,Wt)}else if(!ar&&!ae(An)){if(Wt.length>=l)return Ce(pe,Tr,An,_t,Wt);si|=rn,Sn=F(gt,Pr,An,Wt)}else Sn=j(gt,Pr,An,Wt);return gt?(this.mask=si,this.children=Sn,this):me(pe,si,Sn)},dt=function(pe,Re,tt,xe,ut,It,ft){var _t=this.size,Wt=this.children,Tr=A(tt,ut),rn=Wt[Tr],Pr=(rn||ne)._modify(pe,Re,tt+n,xe,ut,It,ft);if(rn===Pr)return this;var ar=Je(pe,this),ur=void 0;if(ae(rn)&&!ae(Pr))++_t,ur=j(ar,Tr,Pr,Wt);else if(!ae(rn)&&ae(Pr)){if(--_t,_t<=f)return qe(pe,_t,Tr,Wt);ur=j(ar,Tr,ne,Wt)}else ur=j(ar,Tr,Pr,Wt);return ar?(this.size=_t,this.children=ur,this):be(pe,_t,ur)};ne._modify=function(he,pe,Re,tt,xe,ut,It){var ft=tt();return ft===d?ne:(++It.value,de(he,xe,ut,ft))};function ze(he,pe,Re,tt,xe){this._editable=he,this._edit=pe,this._config=Re,this._root=tt,this._size=xe}ze.prototype.setTree=function(he,pe){return this._editable?(this._root=he,this._size=pe,this):he===this._root?this:new ze(this._editable,this._edit,this._config,he,pe)};var Dt=r.tryGetHash=function(he,pe,Re,tt){for(var xe=tt._root,ut=0,It=tt._config.keyEq;;)switch(xe.type){case U:return It(Re,xe.key)?xe.value:he;case $:{if(pe===xe.hash)for(var ft=xe.children,_t=0,Wt=ft.length;_t<Wt;++_t){var Tr=ft[_t];if(It(Re,Tr.key))return Tr.value}return he}case Z:{var rn=A(ut,pe),Pr=P(rn);if(xe.mask&Pr){xe=xe.children[N(xe.mask,Pr)],ut+=n;break}return he}case ie:{if(xe=xe.children[A(ut,pe)],xe){ut+=n;break}return he}default:return he}};ze.prototype.tryGetHash=function(he,pe,Re){return Dt(he,pe,Re,this)};var Ot=r.tryGet=function(he,pe,Re){return Dt(he,Re._config.hash(pe),pe,Re)};ze.prototype.tryGet=function(he,pe){return Ot(he,pe,this)};var Ue=r.getHash=function(he,pe,Re){return Dt(void 0,he,pe,Re)};ze.prototype.getHash=function(he,pe){return Ue(he,pe,this)};var nt=r.get=function(he,pe){return Dt(void 0,pe._config.hash(he),he,pe)};ze.prototype.get=function(he,pe){return Ot(pe,he,this)};var Ze=r.has=function(he,pe,Re){return Dt(d,he,pe,Re)!==d};ze.prototype.hasHash=function(he,pe){return Ze(he,pe,this)};var rt=r.has=function(he,pe){return Ze(pe._config.hash(he),he,pe)};ze.prototype.has=function(he){return rt(he,this)};var at=function(pe,Re){return pe===Re};r.make=function(he){return new ze(0,0,{keyEq:he&&he.keyEq||at,hash:he&&he.hash||x},ne,0)},r.empty=r.make();var ot=r.isEmpty=function(he){return he&&!!ae(he._root)};ze.prototype.isEmpty=function(){return ot(this)};var Lt=r.modifyHash=function(he,pe,Re,tt){var xe={value:tt._size},ut=tt._root._modify(tt._editable?tt._edit:NaN,tt._config.keyEq,0,he,pe,Re,xe);return tt.setTree(ut,xe.value)};ze.prototype.modifyHash=function(he,pe,Re){return Lt(Re,he,pe,this)};var zt=r.modify=function(he,pe,Re){return Lt(he,Re._config.hash(pe),pe,Re)};ze.prototype.modify=function(he,pe){return zt(pe,he,this)};var Pt=r.setHash=function(he,pe,Re,tt){return Lt(v(Re),he,pe,tt)};ze.prototype.setHash=function(he,pe,Re){return Pt(he,pe,Re,this)};var $t=r.set=function(he,pe,Re){return Pt(Re._config.hash(he),he,pe,Re)};ze.prototype.set=function(he,pe){return $t(he,pe,this)};var Xt=v(d),Gt=r.removeHash=function(he,pe,Re){return Lt(Xt,he,pe,Re)};ze.prototype.removeHash=ze.prototype.deleteHash=function(he,pe){return Gt(he,pe,this)};var Sr=r.remove=function(he,pe){return Gt(pe._config.hash(he),he,pe)};ze.prototype.remove=ze.prototype.delete=function(he){return Sr(he,this)};var zr=r.beginMutation=function(he){return new ze(he._editable+1,he._edit+1,he._config,he._root,he._size)};ze.prototype.beginMutation=function(){return zr(this)};var vr=r.endMutation=function(he){return he._editable=he._editable&&he._editable-1,he};ze.prototype.endMutation=function(){return vr(this)};var pr=r.mutate=function(he,pe){var Re=zr(pe);return he(Re),vr(Re)};ze.prototype.mutate=function(he){return pr(he,this)};var dr=function(pe){return pe&&br(pe[0],pe[1],pe[2],pe[3],pe[4])},br=function(pe,Re,tt,xe,ut){for(;tt<pe;){var It=Re[tt++];if(It&&!ae(It))return un(It,xe,[pe,Re,tt,xe,ut])}return dr(ut)},un=function(pe,Re,tt){switch(pe.type){case U:return{value:Re(pe),rest:tt};case $:case ie:case Z:var xe=pe.children;return br(xe.length,xe,0,Re,tt);default:return dr(tt)}},En={done:!0};function Rn(he){this.v=he}Rn.prototype.next=function(){if(!this.v)return En;var he=this.v;return this.v=dr(he.rest),he},Rn.prototype[Symbol.iterator]=function(){return this};var gi=function(pe,Re){return new Rn(un(pe._root,Re))},De=function(pe){return[pe.key,pe.value]},J=r.entries=function(he){return gi(he,De)};ze.prototype.entries=ze.prototype[Symbol.iterator]=function(){return J(this)};var te=function(pe){return pe.key},se=r.keys=function(he){return gi(he,te)};ze.prototype.keys=function(){return se(this)};var _e=function(pe){return pe.value},Ae=r.values=ze.prototype.values=function(he){return gi(he,_e)};ze.prototype.values=function(){return Ae(this)};var Le=r.fold=function(he,pe,Re){var tt=Re._root;if(tt.type===U)return he(pe,tt.value,tt.key);for(var xe=[tt.children],ut=void 0;ut=xe.pop();)for(var It=0,ft=ut.length;It<ft;){var _t=ut[It++];_t&&_t.type&&(_t.type===U?pe=he(pe,_t.value,_t.key):xe.push(_t.children))}return pe};ze.prototype.fold=function(he,pe){return Le(he,pe,this)};var Be=r.forEach=function(he,pe){return Le(function(Re,tt,xe){return he(tt,xe,pe)},null,pe)};ze.prototype.forEach=function(he){return Be(he,this)};var Oe=r.count=function(he){return he._size};ze.prototype.count=function(){return Oe(this)},Object.defineProperty(ze.prototype,"size",{get:ze.prototype.count}),t.exports?t.exports=r:(void 0).hamt=r}),JW=class{constructor(e){_n(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,r){return this._map.set(e,r),this}delete(e){return this._map.delete(e),this}clone(){return w8(this)}toMap(){return new Map(this._map)}},e8=class t{constructor(e){if(_n(this,"_hamt",b8t.empty.beginMutation()),e instanceof t){let r=e._hamt.endMutation();e._hamt=r.beginMutation(),this._hamt=r.beginMutation()}else if(e)for(let[r,n]of e.entries())this._hamt.set(r,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,r){return this._hamt.set(e,r),this}delete(e){return this._hamt.delete(e),this}clone(){return w8(this)}toMap(){return new Map(this._hamt)}};function w8(t){return ri("recoil_hamt_2020")?new e8(t):new JW(t)}var w8t={persistentMap:w8},E8t=w8t.persistentMap,S8t=Object.freeze({__proto__:null,persistentMap:E8t}),{graph:T8t}=YS,{persistentMap:HOe}=S8t,I8t=0,bLe=()=>I8t++;function wLe(){let t=bLe();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:HOe(),nonvalidatedAtoms:HOe()}}function A8t(){let t=wLe();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,T8t()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var ELe={makeEmptyTreeState:wLe,makeEmptyStoreState:A8t,getNextTreeStateVersion:bLe};function M8t(...t){let e=new Set;for(let r of t)for(let n of r)e.add(n);return e}var C8t=M8t;function P8t(t,e,r){let n=t.entries(),i=n.next();for(;!i.done;){let o=i.value;if(e.call(r,o[1],o[0],t))return!0;i=n.next()}return!1}var R8t=P8t,{cleanUpNode:O8t}=P0,{deleteNodeConfigIfPossible:L8t,getNode:SLe}=hu,{RetentionZone:TLe}=$L,ILe=new Set;function ALe(t,e){let r=t.getState(),n=r.currentTree;if(r.nextTree){pf("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let i=new Set;for(let l of e)if(l instanceof TLe)for(let f of q8t(r,l))i.add(f);else i.add(l);let o=D8t(t,i);for(let l of o)k8t(t,n,l)}function D8t(t,e){let r=t.getState(),n=r.currentTree,i=t.getGraph(n.version),o=new Set,l=new Set;return f(e),o;function f(d){let v=new Set,x=N8t(t,n,d,o,l);for(let N of x){var b;if(SLe(N).retainedBy==="recoilRoot"){l.add(N);continue}if(((b=r.retention.referenceCounts.get(N))!==null&&b!==void 0?b:0)>0){l.add(N);continue}if(MLe(N).some(D=>r.retention.referenceCounts.get(D))){l.add(N);continue}let j=i.nodeToNodeSubscriptions.get(N);if(j&&R8t(j,D=>l.has(D))){l.add(N);continue}o.add(N),v.add(N)}let A=new Set;for(let N of v)for(let j of(P=i.nodeDeps.get(N))!==null&&P!==void 0?P:ILe){var P;o.has(j)||A.add(j)}A.size&&f(A)}}function N8t(t,e,r,n,i){let o=t.getGraph(e.version),l=[],f=new Set;for(;r.size>0;)d(Bn(r.values().next().value));return l;function d(v){if(n.has(v)||i.has(v)){r.delete(v);return}if(f.has(v))return;let x=o.nodeToNodeSubscriptions.get(v);if(x)for(let b of x)d(b);f.add(v),r.delete(v),l.push(v)}}function k8t(t,e,r){if(!ri("recoil_memory_managament_2020"))return;O8t(t,r);let n=t.getState();n.knownAtoms.delete(r),n.knownSelectors.delete(r),n.nodeTransactionSubscriptions.delete(r),n.retention.referenceCounts.delete(r);let i=MLe(r);for(let d of i){var o;(o=n.retention.nodesRetainedByZone.get(d))===null||o===void 0||o.delete(r)}e.atomValues.delete(r),e.dirtyAtoms.delete(r),e.nonvalidatedAtoms.delete(r);let l=n.graphsByVersion.get(e.version);if(l){let d=l.nodeDeps.get(r);if(d!==void 0){l.nodeDeps.delete(r);for(let v of d){var f;(f=l.nodeToNodeSubscriptions.get(v))===null||f===void 0||f.delete(r)}}l.nodeToNodeSubscriptions.delete(r)}L8t(r)}function q8t(t,e){var r;return(r=t.retention.nodesRetainedByZone.get(e))!==null&&r!==void 0?r:ILe}function MLe(t){let e=SLe(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof TLe?[e]:e}function F8t(t,e){let r=t.getState();r.nextTree?r.retention.retainablesToCheckForRelease.add(e):ALe(t,new Set([e]))}function j8t(t,e,r){var n;if(!ri("recoil_memory_managament_2020"))return;let i=t.getState().retention.referenceCounts,o=((n=i.get(e))!==null&&n!==void 0?n:0)+r;o===0?CLe(t,e):i.set(e,o)}function CLe(t,e){if(!ri("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),F8t(t,e)}function z8t(t){if(!ri("recoil_memory_managament_2020"))return;let e=t.getState();ALe(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function U8t(t){return t===void 0?"recoilRoot":t}var KS={updateRetainCount:j8t,updateRetainCountToZero:CLe,releaseScheduledRetainablesNow:z8t,retainedByOptionWithDefault:U8t};function*B8t(t){for(let e of t)for(let r of e)yield r}var V8t=B8t,G8t=typeof window=="undefined",$8t=typeof navigator!="undefined"&&navigator.product==="ReactNative",E8={isSSR:G8t,isReactNative:$8t},{isSSR:H8t}=E8,{batchUpdates:t8}=b8,{initializeNodeIfNewToStore:W8t,peekNodeInfo:Z8t}=P0,{graph:Y8t}=YS,{DEFAULT_VALUE:K8t,recoilValues:WOe,recoilValuesForKeys:ZOe}=hu,{AbstractRecoilValue:X8t,getRecoilValueAsLoadable:Q8t,setRecoilValue:YOe,setUnvalidatedRecoilValue:J8t}=Kg,{updateRetainCount:PL}=KS,{getNextTreeStateVersion:eZt,makeEmptyStoreState:tZt}=ELe;var M0=class{constructor(e){_n(this,"_store",void 0),_n(this,"_refCount",0),_n(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Q8t(this._store,r))),_n(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),_n(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];let o=this._store.getState().currentTree;return ZOe(o.dirtyAtoms)}let n=this._store.getState().knownAtoms,i=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?WOe.values():r.isInitialized===!0?ZOe(V8t([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):fLe(WOe.values(),({key:o})=>!n.has(o)&&!i.has(o))}),_n(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),Z8t(this._store,this._store.getState().currentTree,r))),_n(this,"map",r=>{this.checkRefCount_INTERNAL();let n=new HS(this,t8);return r(n),r8(n.getStore_INTERNAL())}),_n(this,"asyncMap",r=>zn(this,null,function*(){this.checkRefCount_INTERNAL();let n=new HS(this,t8);return yield r(n),r8(n.getStore_INTERNAL())})),this._store={getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{let n=e.graphsByVersion;if(n.has(r))return Bn(n.get(r));let i=Y8t();return n.set(r,i),i},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let r of this._store.getState().nodeCleanupFunctions.keys())W8t(this._store,e.currentTree,r,"get"),PL(this._store,r,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!ri("recoil_memory_managament_2020"))return()=>{};this._refCount++;let e=!1;return()=>{e||(e=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){ri("recoil_memory_managament_2020")&&(H8t||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){ri("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){ri("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function PLe(t,e,r=!1){let n=t.getState(),i=r?eZt():e.version;return{currentTree:r?{version:i,stateID:i,transactionMetadata:mt({},e.transactionMetadata),dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()}:e,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function rZt(t){let e=new M0(tZt());return t!=null?e.map(t):e}function r8(t,e="current"){let r=t.getState(),n=e==="current"?r.currentTree:Bn(r.previousTree);return new M0(PLe(t,n))}var HS=class extends M0{constructor(e,r){super(PLe(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0)),_n(this,"_batch",void 0),_n(this,"set",(n,i)=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{PL(o,n.key,1),YOe(this.getStore_INTERNAL(),n,i)})}),_n(this,"reset",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{PL(i,n.key,1),YOe(this.getStore_INTERNAL(),n,K8t)})}),_n(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();t8(()=>{for(let[o,l]of n.entries())PL(i,o,1),J8t(i,new X8t(o),l)})}),this._batch=r}},ZL={Snapshot:M0,MutableSnapshot:HS,freshSnapshot:rZt,cloneSnapshot:r8},nZt=ZL.Snapshot,iZt=ZL.MutableSnapshot,oZt=ZL.freshSnapshot,aZt=ZL.cloneSnapshot,YL=Object.freeze({__proto__:null,Snapshot:nZt,MutableSnapshot:iZt,freshSnapshot:oZt,cloneSnapshot:aZt}),{getNextTreeStateVersion:sZt,makeEmptyStoreState:RLe}=ELe,{cleanUpNode:lZt,getDownstreamNodes:uZt,setNodeValue:cZt,setUnvalidatedAtomValue_DEPRECATED:fZt}=P0,{graph:hZt}=YS,{cloneGraph:pZt}=YS,{applyAtomValueWrites:dZt}=Kg,{releaseScheduledRetainablesNow:OLe}=KS,{freshSnapshot:mZt}=YL,{useCallback:gZt,useContext:LLe,useEffect:n8,useMemo:vZt,useRef:WW,useState:yZt}=qa.default;function qS(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var DLe=Object.freeze({getState:qS,replaceState:qS,getGraph:qS,subscribeToTransactions:qS,addTransactionMetadata:qS}),i8=!1;function KOe(t){if(i8)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let e=t.getState();if(e.nextTree===null){ri("recoil_memory_managament_2020")&&ri("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&OLe(t);let r=e.currentTree.version,n=sZt();e.nextTree=on(mt({},e.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),e.graphsByVersion.set(n,pZt(Bn(e.graphsByVersion.get(r))))}}var NLe=qa.default.createContext({current:DLe}),S8=()=>LLe(NLe),kLe=qa.default.createContext(null);function _Zt(){let t=LLe(kLe);return t==null&&g8("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),t}function T8(t,e,r){let n=uZt(t,r,r.dirtyAtoms);for(let i of n){let o=e.nodeToComponentSubscriptions.get(i);if(o)for(let[l,[f,d]]of o)d(r)}}function qLe(t){let e=t.getState(),r=e.currentTree,n=r.dirtyAtoms;if(n.size){for(let[i,o]of e.nodeTransactionSubscriptions)if(n.has(i))for(let[l,f]of o)f(t);for(let[i,o]of e.transactionSubscriptions)o(t);(!ri("recoil_early_rendering_2021")||e.suspendedComponentResolvers.size)&&(T8(t,e,r),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(r)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function xZt(t){let e=t.current.getState();e.commitDepth++;try{let{nextTree:r}=e;if(r===null)return;e.previousTree=e.currentTree,e.currentTree=r,e.nextTree=null,qLe(t.current),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):pf("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,ri("recoil_memory_managament_2020")&&OLe(t.current)}finally{e.commitDepth--}}function bZt({setNotifyBatcherOfChange:t}){let e=S8(),[r,n]=yZt([]);return t(()=>n({})),n8(()=>{h8t.enqueueExecution("Batcher",()=>{xZt(e)})}),n8(()=>()=>{t(()=>{})},[t]),null}function wZt(t,e){let r=RLe();return e({set:(n,i)=>{let o=r.currentTree,l=cZt(t,o,n.key,i),f=new Set(l.keys()),d=o.nonvalidatedAtoms.clone();for(let v of f)d.delete(v);r.currentTree=on(mt({},o),{dirtyAtoms:C8t(o.dirtyAtoms,f),atomValues:dZt(o.atomValues,l),nonvalidatedAtoms:d})},setUnvalidatedAtomValues:n=>{n.forEach((i,o)=>{r.currentTree=fZt(r.currentTree,o,i)})}}),r}function EZt(t){return mZt().map(t).getStore_INTERNAL().getState()}var XOe=0;function SZt({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:r,children:n}){var i;let o,l=D=>{let F=o.current.graphsByVersion;if(F.has(D))return Bn(F.get(D));let U=hZt();return F.set(D,U),U},f=(D,F)=>{if(F==null){let{transactionSubscriptions:U}=N.current.getState(),$=XOe++;return U.set($,D),{release:()=>{U.delete($)}}}else{let{nodeTransactionSubscriptions:U}=N.current.getState();U.has(F)||U.set(F,new Map);let $=XOe++;return Bn(U.get(F)).set($,D),{release:()=>{let Z=U.get(F);Z&&(Z.delete($),Z.size===0&&U.delete(F))}}}},d=D=>{KOe(N.current);for(let F of Object.keys(D))Bn(N.current.getState().nextTree).transactionMetadata[F]=D[F]},v=D=>{let F=N.current.getState();KOe(N.current);let U=Bn(F.nextTree),$;try{i8=!0,$=D(U)}finally{i8=!1}$!==U&&(F.nextTree=$,ri("recoil_early_rendering_2021")&&T8(P,F,$),Bn(x.current)())},x=WW(null),b=gZt(D=>{x.current=D},[x]),A=(i=qa.default.createMutableSource)!==null&&i!==void 0?i:qa.default.unstable_createMutableSource,P=r!=null?r:{getState:()=>o.current,replaceState:v,getGraph:l,subscribeToTransactions:f,addTransactionMetadata:d},N=WW(P);o=WW(t!=null?wZt(P,t):e!=null?EZt(e):RLe());let j=vZt(()=>A?A(o,()=>o.current.currentTree.version):null,[A,o]);return n8(()=>()=>{for(let D of N.current.getState().knownAtoms)lZt(N.current,D)},[]),qa.default.createElement(NLe.Provider,{value:N},qa.default.createElement(kLe.Provider,{value:j},qa.default.createElement(bZt,{setNotifyBatcherOfChange:b}),n))}function TZt(t){let i=t,{override:e}=i,r=Oo(i,["override"]),n=S8();return e===!1&&n.current!==DLe?t.children:qa.default.createElement(SZt,r)}var KL={useStoreRef:S8,useRecoilMutableSource:_Zt,RecoilRoot:TZt,notifyComponents_FOR_TESTING:T8,sendEndOfBatchNotifications_FOR_TESTING:qLe},{loadableWithValue:IZt}=ZS,{DEFAULT_VALUE:AZt,getNode:MZt}=hu,{copyTreeState:CZt,getRecoilValueAsLoadable:PZt,invalidateDownstreams:RZt,writeLoadableToTreeState:OZt}=Kg;function QOe(t){return MZt(t.key).nodeType==="atom"}var o8=class{constructor(e,r){_n(this,"_store",void 0),_n(this,"_treeState",void 0),_n(this,"_changes",void 0),_n(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!QOe(n))throw new Error("Reading selectors within atomicUpdate is not supported");let i=PZt(this._store,n,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),_n(this,"set",(n,i)=>{if(!QOe(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){let o=this.get(n);this._changes.set(n.key,i(o))}else this._changes.set(n.key,i)}),_n(this,"reset",n=>{this.set(n,AZt)}),this._store=e,this._treeState=r,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let e=CZt(this._treeState);for(let[r,n]of this._changes)OZt(e,r,IZt(n));return RZt(this._store,e),e}};function LZt(t){return e=>{t.replaceState(r=>{let n=new o8(t,r);return e(n),n.newTreeState_INTERNAL()})}}var DZt={atomicUpdater:LZt},NZt=DZt.atomicUpdater,kZt=Object.freeze({__proto__:null,atomicUpdater:NZt});function qZt(t,e){let r=new Map;for(let[n,i]of t)e(i,n)&&r.set(n,i);return r}var FZt=qZt;function jZt(t,e){let r=new Set;for(let n of t)e(n)&&r.add(n);return r}var zZt=jZt;function UZt(t,e){if(!t)throw new Error(e)}var BZt=UZt,zL=BZt;function VZt(...t){let e=new Map;for(let r=0;r<t.length;r++){let n=t[r].keys(),i;for(;!(i=n.next()).done;)e.set(i.value,t[r].get(i.value))}return e}var GZt=VZt;function $Zt(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}var HZt=$Zt;var{useRef:WZt}=qa.default;function ZZt(){let t=WZt();if(0&&ri("recoil_infer_component_names"))var e;return"<component name not available>"}var I8=ZZt,{atomicUpdater:FLe}=kZt,{batchUpdates:A8}=b8,{DEFAULT_VALUE:XL,getNode:jLe,nodes:YZt}=hu,{useRecoilMutableSource:KZt,useStoreRef:Al}=KL,{isRecoilValue:a9r}=qd,{AbstractRecoilValue:M8,getRecoilValueAsLoadable:GS,setRecoilValue:C0,setRecoilValueLoadable:XZt,setUnvalidatedRecoilValue:QZt,subscribeToRecoilValue:C8}=Kg,{updateRetainCount:FS}=KS,{RetentionZone:JZt}=$L,{Snapshot:s9r,cloneSnapshot:WS}=YL,{setByAddingToSet:eYt}=cLe,{isSSR:UL}=E8,{mutableSourceExists:tYt,useMutableSource:rYt}=uLe,{useCallback:hc,useEffect:Ph,useMemo:zLe,useRef:kd,useState:P8}=qa.default,ULe=12e4;function BLe(t,e,r){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{r.current.getState().suspendedComponentResolvers.add(i)}):t.state==="hasError"?t.contents:new Error(`Invalid value of loadable atom "${e.key}"`)}function nYt(){let t=Al(),[e,r]=P8([]),n=kd(new Set);n.current=new Set;let i=kd(new Set),o=kd(new Map),l=hc(d=>{let v=o.current.get(d);v&&(v.release(),o.current.delete(d))},[o]),f=I8();return Ph(()=>{let d=t.current;function v(x,b){o.current.has(b)&&r([])}FL(n.current,i.current).forEach(x=>{if(o.current.has(x)){g8(`Double subscription to RecoilValue "${x}"`);return}let b=C8(d,new M8(x),P=>{v(P,x)},f);o.current.set(x,b),d.getState().nextTree?d.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{v(d.getState(),x)}):v(d.getState(),x)}),FL(i.current,n.current).forEach(x=>{l(x)}),i.current=n.current}),Ph(()=>{let d=o.current;return()=>d.forEach((v,x)=>l(x))},[l]),zLe(()=>{function d(N){return j=>{C0(t.current,N,j)}}function v(N){return()=>C0(t.current,N,XL)}function x(N){var j;n.current.has(N.key)||(n.current=eYt(n.current,N.key));let D=t.current.getState();return GS(t.current,N,ri("recoil_early_rendering_2021")&&(j=D.nextTree)!==null&&j!==void 0?j:D.currentTree)}function b(N){let j=x(N);return BLe(j,N,t)}function A(N){return[b(N),d(N)]}function P(N){return[x(N),d(N)]}return{getRecoilValue:b,getRecoilValueLoadable:x,getRecoilState:A,getRecoilStateLoadable:P,getSetRecoilState:d,getResetRecoilState:v}},[n,t])}var iYt={current:0};function oYt(t){let e=Al(),r=hc(()=>{var v;let x=e.current,b=x.getState(),A=ri("recoil_early_rendering_2021")&&(v=b.nextTree)!==null&&v!==void 0?v:b.currentTree;return GS(x,t,A)},[e,t]),n=hc(()=>r(),[r]),i=I8(),o=hc((v,x)=>{let b=e.current;return C8(b,t,()=>{if(!ri("recoil_suppress_rerender_in_callback"))return x();let P=r();d.current.is(P)||x(),d.current=P},i).release},[e,t,i,r]),l=KZt(),f=rYt(l,n,o),d=kd(f);return Ph(()=>{d.current=f}),f}function aYt(t){let e=Al(),[r,n]=P8([]),i=I8();Ph(()=>{let f=e.current,d=f.getState(),v=C8(f,t,b=>{var A;if(!ri("recoil_suppress_rerender_in_callback"))return n([]);let P=GS(f,t,f.getState().currentTree);!((A=l.current)===null||A===void 0)&&A.is(P)||n(P),l.current=P},i);if(d.nextTree)f.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{l.current=null,n([])});else{var x;if(!ri("recoil_suppress_rerender_in_callback"))return n([]);let b=GS(f,t,f.getState().currentTree);!((x=l.current)===null||x===void 0)&&x.is(b)||n(b),l.current=b}return v.release},[i,t,e]);let o=GS(e.current,t),l=kd(o);return Ph(()=>{l.current=o}),o}function R8(t){return ri("recoil_memory_managament_2020")&&HLe(t),tYt()?oYt(t):aYt(t)}function VLe(t){let e=Al(),r=R8(t);return BLe(r,t,e)}function O8(t){let e=Al();return hc(r=>{C0(e.current,t,r)},[e,t])}function sYt(t){let e=Al();return hc(()=>{C0(e.current,t,XL)},[e,t])}function lYt(t){return[VLe(t),O8(t)]}function uYt(t){return[R8(t),O8(t)]}function QL(t){let e=Al();Ph(()=>e.current.subscribeToTransactions(t).release,[t,e])}function JOe(t){let e=t.atomValues.toMap(),r=jL(FZt(e,(n,i)=>{let l=jLe(i).persistence_UNSTABLE;return l!=null&&l.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return GZt(t.nonvalidatedAtoms.toMap(),r)}function cYt(t){QL(hc(e=>{let r=e.getState().previousTree,n=e.getState().currentTree;r||(pf("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),r=e.getState().currentTree);let i=JOe(n),o=JOe(r),l=jL(YZt,d=>{var v,x,b,A;return{persistence_UNSTABLE:{type:(v=(x=d.persistence_UNSTABLE)===null||x===void 0?void 0:x.type)!==null&&v!==void 0?v:"none",backButton:(b=(A=d.persistence_UNSTABLE)===null||A===void 0?void 0:A.backButton)!==null&&b!==void 0?b:!1}}}),f=zZt(n.dirtyAtoms,d=>i.has(d)||o.has(d));t({atomValues:i,previousAtomValues:o,atomInfo:l,modifiedAtoms:f,transactionMetadata:mt({},n.transactionMetadata)})},[t]))}function fYt(t){QL(hc(e=>{let r=WS(e,"current"),n=WS(e,"previous");t({snapshot:r,previousSnapshot:n})},[t]))}function GLe(t){let e=kd();return Ph(()=>{e.current=t}),e.current}function hYt(){let t=Al(),[e,r]=P8(()=>WS(t.current)),n=GLe(e),i=kd();return Ph(()=>(i.current&&!UL&&window.clearTimeout(i.current),e.retain()),[e]),QL(hc(o=>r(WS(o)),[])),n!==e&&!UL&&(i.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(i.current)),e.retain(),i.current=window.setTimeout(()=>{e.release_INTERNAL(),i.current=null},ULe)),e}function $Le(){let t=Al();return hc(e=>{var r;let n=t.current.getState(),i=(r=n.nextTree)!==null&&r!==void 0?r:n.currentTree,o=e.getStore_INTERNAL().getState().currentTree;A8(()=>{let l=new Set;for(let v of[i.atomValues.keys(),o.atomValues.keys()])for(let x of v){var f,d;((f=i.atomValues.get(x))===null||f===void 0?void 0:f.contents)!==((d=o.atomValues.get(x))===null||d===void 0?void 0:d.contents)&&jLe(x).shouldRestoreFromSnapshots&&l.add(x)}l.forEach(v=>{XZt(t.current,new M8(v),o.atomValues.has(v)?Bn(o.atomValues.get(v)):XL)}),t.current.replaceState(v=>on(mt({},v),{stateID:e.getID_INTERNAL()}))})},[t])}function pYt(){let t=Al();return(e,r={})=>{A8(()=>{t.current.addTransactionMetadata(r),e.forEach((n,i)=>QZt(t.current,new M8(i),n))})}}var BL=class{},dYt=new BL;function mYt(t,e){let r=Al(),n=$Le();return hc((...i)=>{function o(x,b){C0(r.current,x,b)}function l(x){C0(r.current,x,XL)}let f=WS(r.current),d=FLe(r.current),v=dYt;return A8(()=>{let x="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof t!="function")throw new Error(x);let b=t({set:o,reset:l,snapshot:f,gotoSnapshot:n,transact_UNSTABLE:d});if(typeof b!="function")throw new Error(x);v=b(...i)}),v instanceof BL&&zL(!1),v},e!=null?[...e,r]:void 0)}function HLe(t){if(ri("recoil_memory_managament_2020"))return gYt(t)}function gYt(t){let r=(Array.isArray(t)?t:[t]).map(l=>l instanceof JZt?l:l.key),n=Al();Ph(()=>{if(!ri("recoil_memory_managament_2020"))return;let l=n.current;if(i.current&&!UL)window.clearTimeout(i.current),i.current=null;else for(let f of r)FS(l,f,1);return()=>{for(let f of r)FS(l,f,-1)}},[n,...r]);let i=kd(),o=GLe(r);if(!UL&&(o===void 0||!HZt(o,r))){let l=n.current;for(let f of r)FS(l,f,1);if(o)for(let f of o)FS(l,f,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(let f of r)FS(l,f,-1)},ULe)}}function vYt(t,e){let r=Al();return zLe(()=>(...n)=>{FLe(r.current)(o=>{t(o)(...n)})},e!=null?[...e,r]:void 0)}var yYt={recoilComponentGetRecoilValueCount_FOR_TESTING:iYt,useGotoRecoilSnapshot:$Le,useRecoilCallback:mYt,useRecoilInterface:nYt,useRecoilSnapshot:hYt,useRecoilState:lYt,useRecoilStateLoadable:uYt,useRecoilTransaction:vYt,useRecoilTransactionObserver:fYt,useRecoilValue:VLe,useRecoilValueLoadable:R8,useRetain:HLe,useResetRecoilState:sYt,useSetRecoilState:O8,useSetUnvalidatedAtomValues:pYt,useTransactionObservation_DEPRECATED:cYt,useTransactionSubscription_DEPRECATED:QL},{peekNodeInfo:_Yt}=P0,{useStoreRef:xYt}=KL;function bYt(){let t=xYt();return({key:e})=>_Yt(t.current,t.current.getState().currentTree,e)}var wYt=bYt,{RecoilRoot:EYt,useStoreRef:SYt}=KL,{useMemo:TYt}=qa.default;function IYt(){let t=SYt().current;return TYt(()=>{function e({children:r}){return qa.default.createElement(EYt,{store_INTERNAL:t},r)}return e},[t])}var AYt=IYt;var{isReactNative:l9r,isSSR:u9r}=E8;function fc(t,e,r){if(typeof t=="string"&&!t.includes("\"")&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var n;return(n=JSON.stringify(t))!==null&&n!==void 0?n:""}if(ao(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,o)=>fc(i,e,o.toString()))}]`;if(typeof t.toJSON=="function")return fc(t.toJSON(r),e,r);if(t instanceof Map){let i={};for(let[o,l]of t)i[typeof o=="string"?o:fc(o,e)]=l;return fc(i,e,r)}return t instanceof Set?fc(Array.from(t).sort((i,o)=>fc(i,e).localeCompare(fc(o,e))),e,r):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?fc(Array.from(t),e,r):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${fc(i,e)}:${fc(t[i],e,i)}`).join(",")}}`}function MYt(t,e={allowFunctions:!1}){return fc(t,e)}var JL=MYt,a8=class{constructor(e){var r,n,i;_n(this,"_numLeafs",void 0),_n(this,"_root",void 0),_n(this,"_onHit",void 0),_n(this,"_onSet",void 0),_n(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(r=e==null?void 0:e.onHit)!==null&&r!==void 0?r:()=>{},this._onSet=(n=e==null?void 0:e.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,r){var n;return(n=this.getLeafNode(e,r))===null||n===void 0?void 0:n.value}getLeafNode(e,r){return WLe(this.root(),n=>this._mapNodeValue(e(n)),{onNodeVisit:n=>{r==null||r.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(e,r,n){let i,o=s8(this.root(),e.map(([l,f])=>[l,this._mapNodeValue(f)]),null,r,null,{onNodeVisit:l=>{n==null||n.onNodeVisit(l),l.type==="leaf"&&(i=l)}});this.root()||(this._root=o),this._numLeafs++,this._onSet(Bn(i))}delete(e){if(!this.root())return!1;let r=Bn(this.root());return CYt(r,e,e.parent)?e===r||r.type==="branch"&&!r.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=YLe(e),!0):!1}clear(){this._numLeafs=0,this._root=null}},WLe=(t,e,r)=>{var n;if(t==null)return;if(r==null||(n=r.onNodeVisit)===null||n===void 0||n.call(r,t),t.type==="leaf")return t;let i=e(t.nodeKey);return WLe(t.branches.get(i),e,r)},s8=(t,e,r,n,i,o)=>{var l;let f;if(t==null){if(e.length===0)f={type:"leaf",value:n,parent:r,branchKey:i};else{let[d,...v]=e,[x,b]=d;f={type:"branch",nodeKey:x,parent:r,branches:new Map,branchKey:i},f.branches.set(b,s8(null,v,f,n,b,o))}}else if(f=t,e.length){let[d,...v]=e,[x,b]=d;t.type==="branch"&&t.nodeKey===x||zL(!1),t.branches.set(b,s8(t.branches.get(b),v,t,n,b,o))}return o==null||(l=o.onNodeVisit)===null||l===void 0||l.call(o,f),f},CYt=(t,e,r)=>r?(r.branches.delete(e.branchKey),ZLe(t,r,r.parent)):t===e,ZLe=(t,e,r)=>r?(e.branches.size===0&&r.branches.delete(e.branchKey),ZLe(t,r,r.parent)):t===e,YLe=t=>t.type==="leaf"?1:Array.from(t.branches.values()).reduce((e,r)=>e+YLe(r),0),PYt={TreeCache:a8},RYt=PYt.TreeCache,KLe=Object.freeze({__proto__:null,TreeCache:RYt}),l8=class{constructor(e){var r;_n(this,"_maxSize",void 0),_n(this,"_size",void 0),_n(this,"_head",void 0),_n(this,"_tail",void 0),_n(this,"_map",void 0),_n(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(r=e.mapKey)!==null&&r!==void 0?r:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){let r=this._keyMapper(e),n=this._map.get(r);if(n)return this.set(e,n.value),n.value}set(e,r){let n=this._keyMapper(e);this._map.get(n)&&this.delete(e);let o=this.head(),l={key:e,right:o,left:null,value:r};o?o.left=l:this._tail=l,this._map.set(n,l),this._head=l,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let e=this.tail();e&&this.delete(e.key)}delete(e){let r=this._keyMapper(e);if(!this._size||!this._map.has(r))return;let n=Bn(this._map.get(r)),i=n.right,o=n.left;i&&(i.left=n.left),o&&(o.right=n.right),n===this.head()&&(this._head=i),n===this.tail()&&(this._tail=o),this._map.delete(r),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},OYt={LRUCache:l8},LYt=OYt.LRUCache,XLe=Object.freeze({__proto__:null,LRUCache:LYt}),{LRUCache:DYt}=XLe,{TreeCache:NYt}=KLe;function kYt(t,e=r=>r){let r=new DYt({maxSize:t}),n=new NYt({mapNodeValue:e,onHit:i=>{r.set(i,!0)},onSet:i=>{let o=r.tail();r.set(i,!0),o&&n.size()>t&&n.delete(o.key)}});return n}var eLe=kYt,{TreeCache:qYt}=KLe,AL={equality:"reference",eviction:"keep-all",maxSize:1/0};function FYt({equality:t=AL.equality,eviction:e=AL.eviction,maxSize:r=AL.maxSize}=AL){let n=jYt(t);return zYt(e,r,n)}function jYt(t){switch(t){case"reference":return e=>e;case"value":return e=>JL(e)}throw new Error(`Unrecognized equality policy ${t}`)}function zYt(t,e,r){switch(t){case"keep-all":return new qYt({mapNodeValue:r});case"lru":return eLe(Bn(e),r);case"most-recent":return eLe(1,r)}throw new Error(`Unrecognized eviction policy ${t}`)}var UYt=FYt;function BYt(t){return()=>null}var VYt={startPerfBlock:BYt},{CANCELED:jS,Canceled:GYt,loadableWithError:zS,loadableWithPromise:$Yt,loadableWithValue:ZW}=ZS,{getNodeLoadable:tLe,peekNodeLoadable:HYt,setNodeValue:WYt}=P0,{saveDependencyMapToStore:ZYt}=YS,{DEFAULT_VALUE:YYt,RecoilValueNotReady:KYt,getConfigDeletionHandler:XYt,registerNode:rLe}=hu,{isRecoilValue:QYt}=qd,{AbstractRecoilValue:JYt}=qd,{setRecoilValueLoadable:e9t}=Kg,{retainedByOptionWithDefault:t9t}=KS,{cloneSnapshot:r9t}=YL,{startPerfBlock:n9t}=VYt,US=[],ML=new Map,i9t=(()=>{let t=0;return()=>t++})();function o9t(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function a9t(t){let{key:e,get:r,cachePolicy_UNSTABLE:n}=t,i=t.set!=null?t.set:void 0,o=UYt(n!=null?n:{equality:"reference",eviction:"keep-all"}),l=t9t(t.retainedBy_UNSTABLE),f=new Map,d=0;function v(){return!ri("recoil_memory_managament_2020")||d>0}function x(Ue){return f.has(Ue)||f.set(Ue,o9t()),Bn(f.get(Ue))}function b(Ue){return d++,Ue.getState().knownSelectors.add(e),()=>{d--,Ue.getState().knownSelectors.delete(e),f.delete(Ue)}}function A(){return XYt(e)!==void 0&&!v()}function P(Ue,nt,Ze){if(nt.state==="loading"){let rt=ML.get(Ze);rt==null&&ML.set(Ze,rt=new Set),rt.add(Ue)}}function N(Ue,nt){let Ze=ML.get(nt);if(Ze!==void 0){for(let rt of Ze)e9t(rt,new JYt(e),Ue);ML.delete(nt)}}function j(Ue,nt,Ze){let rt=Ue.getState().knownSelectors.has(Ze);if(rt&&nt.atomValues.has(Ze))return Bn(nt.atomValues.get(Ze));let at=tLe(Ue,nt,Ze);return at.state!=="loading"&&rt&&nt.atomValues.set(Ze,at),at}function D(Ue,nt,Ze,rt,at){return nt.then(ot=>{if(!v())return Ke(Ue,at),jS;let Lt=ZW(ot);return pt(Ze,ae(rt),Lt),$(Ue,Ze,new Set(rt.keys()),at),U(Ue,Lt,at),{__value:ot,__key:e}}).catch(ot=>{if(!v())return Ke(Ue,at),jS;if(Je(Ue,at)&&He(rt,Ue,at),ao(ot))return F(Ue,ot,Ze,rt,at);let Lt=zS(ot);throw pt(Ze,ae(rt),Lt),$(Ue,Ze,new Set(rt.keys()),at),U(Ue,Lt,at),ot})}function F(Ue,nt,Ze,rt,at){return nt.then(ot=>{if(!v())return Ke(Ue,at),jS;if(ot instanceof GYt)return pf("Selector was released while it had dependencies"),jS;let{__key:Lt,__value:zt}=ot!=null?ot:{},Pt=!0;Lt!=null&&(Ze.atomValues.set(Lt,ZW(zt)),Pt=!1);let $t=ne(Ue,Ze);if($t&&$t.state==="hasValue")return Ce($t,Ue),{__value:$t.contents,__key:e};if(!Je(Ue,at)){var Xt;let zr=me(Ze);if((zr==null||(Xt=zr.latestLoadable)===null||Xt===void 0?void 0:Xt.state)==="loading")return zr.latestLoadable.contents}let[Gt,Sr]=ie(Ue,Ze,at,Pt);if(Je(Ue,at)&&He(Sr,Ue,at),We(Gt),Gt.state!=="loading"&&(pt(Ze,ae(Sr),Gt),$(Ue,Ze,new Set(Sr.keys()),at),U(Ue,Gt,at)),Gt.state==="hasError")throw Gt.contents;return Gt.state==="hasValue"?{__value:Gt.contents,__key:e}:Gt.contents}).catch(ot=>{if(!v())return Ke(Ue,at),jS;let Lt=zS(ot);throw pt(Ze,ae(rt),zS(ot)),$(Ue,Ze,new Set(rt.keys()),at),U(Ue,Lt,at),ot})}function U(Ue,nt,Ze){Je(Ue,Ze)&&(Ce(nt,Ue),N(nt,Ze))}function $(Ue,nt,Ze,rt){var at,ot,Lt,zt;if(Je(Ue,rt)||nt.version===((at=Ue.getState())===null||at===void 0||(ot=at.currentTree)===null||ot===void 0?void 0:ot.version)||nt.version===((Lt=Ue.getState())===null||Lt===void 0||(zt=Lt.nextTree)===null||zt===void 0?void 0:zt.version)){var Pt,$t,Xt;ZYt(new Map([[e,Ze]]),Ue,(Pt=($t=Ue.getState())===null||$t===void 0||(Xt=$t.nextTree)===null||Xt===void 0?void 0:Xt.version)!==null&&Pt!==void 0?Pt:Ue.getState().currentTree.version)}}function Z(Ue,nt,Ze,rt,at){Ze.add(rt),$(Ue,nt,Ze,at)}function ie(Ue,nt,Ze,rt=!1){let at=n9t(e),ot,Lt=!1,zt,Pt=new Map,$t=new Set;$(Ue,nt,$t,Ze);function Xt(zr){let{key:vr}=zr;Z(Ue,nt,$t,vr,Ze);let pr=rt?tLe(Ue,nt,vr):j(Ue,nt,vr);if(We(pr),Pt.set(vr,pr),pr.state==="hasValue")return pr.contents;throw pr.contents}let Gt=!1,Sr=zr=>(...vr)=>{if(!Gt)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let pr=r9t(Ue),dr=zr({snapshot:pr});if(typeof dr!="function")throw new Error("getCallback() expects a function that returns a function.");return dr(...vr)};try{ot=r({get:Xt,getCallback:Sr}),ot=QYt(ot)?Xt(ot):ot,Gt=!0,ao(ot)?ot=D(Ue,ot,nt,Pt,Ze).finally(at):at()}catch(zr){ot=zr,ao(ot)?ot=F(Ue,ot,nt,Pt,Ze).finally(at):(Lt=!0,at())}return Lt?zt=zS(ot):ao(ot)?zt=$Yt(ot):zt=ZW(ot),We(zt),[zt,Pt]}function ne(Ue,nt){let Ze=new Set,rt=x(Ue),at=o.get(ot=>(typeof ot!="string"&&zL(!1),j(Ue,nt,ot).contents),{onNodeVisit:ot=>{ot.type==="branch"&&ot.nodeKey!==e&&typeof ot.nodeKey=="string"&&Ze.add(ot.nodeKey)}});return at&&$(Ue,nt,Ze,rt.latestExecutionId),at}function ae(Ue){return Array.from(Ue.entries()).map(([nt,Ze])=>[nt,Ze.contents])}function de(Ue,nt){let Ze=i9t(),[rt,at]=ie(Ue,nt,Ze);return Ce(rt,Ue,at,Ze,nt),qe(nt,ae(at),rt),P(Ue,rt,Ze),rt}function ye(Ue,nt){let Ze=ne(Ue,nt);if(Ze!=null)return Ce(Ze,Ue),Ze;let rt=me(nt);if(rt){let at=rt;return P(Ue,Bn(at.latestLoadable),Bn(at.latestExecutionId)),Bn(at.latestLoadable)}return de(Ue,nt)}function me(Ue){var nt;let[,Ze]=(nt=Array.from(f.entries()).find(([rt,at])=>at.latestLoadable!=null&&at.latestExecutionId!=null&&!Ne(rt,Ue)))!==null&&nt!==void 0?nt:[];return Ze}let be=new Map;function Ne(Ue,nt){var Ze,rt;let at=x(Ue),ot=(Ze=at.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&Ze!==void 0?Ze:new Map,Lt=Array(((rt=be.get(nt.version))!==null&&rt!==void 0?rt:new Map).entries()),zt=be.has(nt.version)&&Lt.length===ot.size&&Lt.every(([Pt,$t])=>ot.get(Pt)===$t);return ot==null||nt.version===at.stateVersion||zt?!1:(be.set(nt.version,new Map(ot)),Array.from(ot).some(([Pt,$t])=>j(Ue,nt,Pt).contents!==$t.contents))}function Ce(Ue,nt,Ze,rt,at){let ot=x(nt);Ue.state==="loading"?(ot.depValuesDiscoveredSoFarDuringAsyncWork=Ze,ot.latestExecutionId=rt,ot.latestLoadable=Ue,ot.stateVersion=at==null?void 0:at.version):(ot.depValuesDiscoveredSoFarDuringAsyncWork=null,ot.latestExecutionId=null,ot.latestLoadable=null,ot.stateVersion=null)}function qe(Ue,nt,Ze){Ze.state!=="loading"&&pt(Ue,nt,Ze)}function He(Ue,nt,Ze){let rt=x(nt);Je(nt,Ze)&&(rt.depValuesDiscoveredSoFarDuringAsyncWork=Ue)}function Ke(Ue,nt){Je(Ue,nt)&&f.delete(Ue)}function Je(Ue,nt){let Ze=x(Ue);return nt===Ze.latestExecutionId}function We(Ue){Ue.state!=="loading"&&(Ue.contents,void 0)}function lt(Ue){}function pt(Ue,nt,Ze){Ue.atomValues.set(e,Ze),o.set(nt,Ze)}function dt(Ue){if(US.includes(e)){let nt=`Recoil selector has circular dependencies: ${US.slice(US.indexOf(e)).join(" \u2192 ")}`;return zS(new Error(nt))}US.push(e);try{return Ue()}finally{US.pop()}}function ze(Ue,nt){return o.get(rt=>{typeof rt!="string"&&zL(!1);let at=HYt(Ue,nt,rt);return at==null?void 0:at.contents})}function Dt(Ue,nt){return dt(()=>ye(Ue,nt))}function Ot(Ue){Ue.atomValues.delete(e)}return i!=null?rLe({key:e,nodeType:"selector",peek:ze,get:Dt,set:(nt,Ze,rt)=>{let at=!1,ot=new Map;function Lt({key:Xt}){if(at)throw new Error("Recoil: Async selector sets are not currently supported.");let Gt=j(nt,Ze,Xt);if(We(Gt),Gt.state==="hasValue")return Gt.contents;throw Gt.state==="loading"?new KYt(Xt):Gt.contents}function zt(Xt,Gt){if(at)throw new Error("Recoil: Async selector sets are not currently supported.");let Sr=typeof Gt=="function"?Gt(Lt(Xt)):Gt;WYt(nt,Ze,Xt.key,Sr).forEach((vr,pr)=>ot.set(pr,vr))}function Pt(Xt){zt(Xt,YYt)}let $t=i({set:zt,get:Lt,reset:Pt},rt);if($t!==void 0)throw ao($t)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return at=!0,ot},init:b,invalidate:Ot,shouldDeleteConfigOnRelease:A,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):rLe({key:e,nodeType:"selector",peek:ze,get:Dt,init:b,invalidate:Ot,shouldDeleteConfigOnRelease:A,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}var VL=a9t,{loadableWithError:nLe,loadableWithPromise:iLe,loadableWithValue:BS}=ZS,{DEFAULT_VALUE:Zg,DefaultValue:T0,getConfigDeletionHandler:QLe,registerNode:s9t,setConfigDeletionHandler:l9t}=hu,{isRecoilValue:u9t}=qd,{markRecoilValueModified:c9t,setRecoilValue:oLe,setRecoilValueLoadable:f9t}=Kg,{retainedByOptionWithDefault:h9t}=KS;function p9t(t){let{key:e,persistence_UNSTABLE:r}=t,n=h9t(t.retainedBy_UNSTABLE),i=0,o=ao(t.default)?iLe(t.default.then(D=>(o=BS(D),{__key:e,__value:D})).catch(D=>{throw o=nLe(D),D})):BS(t.default),l,f=new Map;function d(D,F){let U=F.then($=>{var Z,ie;return((ie=((Z=D.getState().nextTree)!==null&&Z!==void 0?Z:D.getState().currentTree).atomValues.get(e))===null||ie===void 0?void 0:ie.contents)===U&&oLe(D,j,$),{__key:e,__value:$}}).catch($=>{var Z,ie;throw((ie=((Z=D.getState().nextTree)!==null&&Z!==void 0?Z:D.getState().currentTree).atomValues.get(e))===null||ie===void 0?void 0:ie.contents)===U&&f9t(D,j,nLe($)),$});return U}function v(D,F,U){i++;let $=D.getState().knownAtoms.has(e);if(D.getState().knownAtoms.add(e),o.state==="loading"){let ye=()=>{var me;((me=D.getState().nextTree)!==null&&me!==void 0?me:D.getState().currentTree).atomValues.has(e)||c9t(D,j)};o.contents.then(ye).catch(ye)}let Z=Zg,ie=null;if(t.effects_UNSTABLE!=null&&!$){let ye=!0,me=Ce=>qe=>{if(ye){let He=Z instanceof T0||ao(Z)?o.state==="hasValue"?o.contents:Zg:Z;Z=typeof qe=="function"?qe(He):qe,ao(Z)&&(Z=Z.then(Ke=>(ie={effect:Ce,value:Ke},Ke)))}else{if(ao(qe))throw new Error("Setting atoms to async values is not implemented.");typeof qe!="function"&&(ie={effect:Ce,value:qe}),oLe(D,j,typeof qe=="function"?He=>{let Ke=qe(He);return ie={effect:Ce,value:Ke},Ke}:qe)}},be=Ce=>()=>me(Ce)(Zg),Ne=Ce=>qe=>{D.subscribeToTransactions(He=>{var Ke;let{currentTree:Je,previousTree:We}=He.getState();We||(pf("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),We=Je);let lt=(Ke=Je.atomValues.get(e))!==null&&Ke!==void 0?Ke:o;if(lt.state==="hasValue"){var pt,dt,ze,Dt;let Ot=lt.contents,Ue=(pt=We.atomValues.get(e))!==null&&pt!==void 0?pt:o,nt=Ue.state==="hasValue"?Ue.contents:Zg;((dt=ie)===null||dt===void 0?void 0:dt.effect)!==Ce||((ze=ie)===null||ze===void 0?void 0:ze.value)!==Ot?qe(Ot,nt):((Dt=ie)===null||Dt===void 0?void 0:Dt.effect)===Ce&&(ie=null)}},e)};for(let Ce of(ne=t.effects_UNSTABLE)!==null&&ne!==void 0?ne:[]){var ne;let qe=Ce({node:j,trigger:U,setSelf:me(Ce),resetSelf:be(Ce),onSet:Ne(Ce)});if(qe!=null){var ae;f.set(D,[...((ae=f.get(D))!==null&&ae!==void 0?ae:[]),qe])}}ye=!1}if(!(Z instanceof T0)){var de;let ye=ao(Z)?iLe(d(D,Z)):BS(Z);F.atomValues.set(e,ye),(de=D.getState().nextTree)===null||de===void 0||de.atomValues.set(e,ye)}return()=>{var ye;i--,(ye=f.get(D))===null||ye===void 0||ye.forEach(me=>me()),f.delete(D),D.getState().knownAtoms.delete(e)}}function x(D,F){var U,$,Z;return(U=($=F.atomValues.get(e))!==null&&$!==void 0?$:(Z=l)===null||Z===void 0?void 0:Z[1])!==null&&U!==void 0?U:o}function b(D,F){if(F.atomValues.has(e))return Bn(F.atomValues.get(e));if(F.nonvalidatedAtoms.has(e)){if(l!=null)return l;if(r==null)return g8(`Tried to restore a persisted value for atom ${e} but it has no persistence settings.`),o;let U=F.nonvalidatedAtoms.get(e),$=r.validator(U,Zg);return l=$ instanceof T0?o:BS($),l}else return o}function A(){l=void 0}function P(D,F,U){if(F.atomValues.has(e)){let $=Bn(F.atomValues.get(e));if($.state==="hasValue"&&U===$.contents)return new Map}else if(!F.nonvalidatedAtoms.has(e)&&U instanceof T0)return new Map;return l=void 0,new Map().set(e,BS(U))}function N(){return QLe(e)!==void 0&&i<=0}let j=s9t({key:e,nodeType:"atom",peek:x,get:b,set:P,init:v,invalidate:A,shouldDeleteConfigOnRelease:N,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return j}function JLe(t){let n=t,{default:e}=n,r=Oo(n,["default"]);return u9t(e)?d9t(on(mt({},r),{default:e})):p9t(on(mt({},r),{default:e}))}function d9t(t){let e=JLe(on(mt({},t),{default:Zg,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:on(mt({},t.persistence_UNSTABLE),{validator:n=>n instanceof T0?n:Bn(t.persistence_UNSTABLE).validator(n,Zg)}),effects_UNSTABLE:t.effects_UNSTABLE})),r=VL({key:`${t.key}__withFallback`,get:({get:n})=>{let i=n(e);return i instanceof T0?t.default:i},set:({set:n},i)=>n(e,i),dangerouslyAllowMutability:t.dangerouslyAllowMutability});return l9t(r.key,QLe(t.key)),r}var e2e=JLe,u8=class{constructor(e){var r;_n(this,"_map",void 0),_n(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(r=e==null?void 0:e.mapKey)!==null&&r!==void 0?r:n=>n}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,r){this._map.set(this._keyMapper(e),r)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}},m9t={MapCache:u8},g9t=m9t.MapCache,v9t=Object.freeze({__proto__:null,MapCache:g9t}),{LRUCache:aLe}=XLe,{MapCache:y9t}=v9t,CL={equality:"reference",eviction:"none",maxSize:1/0};function _9t({equality:t=CL.equality,eviction:e=CL.eviction,maxSize:r=CL.maxSize}=CL){let n=x9t(t);return b9t(e,r,n)}function x9t(t){switch(t){case"reference":return e=>e;case"value":return e=>JL(e)}throw new Error(`Unrecognized equality policy ${t}`)}function b9t(t,e,r){switch(t){case"keep-all":return new y9t({mapKey:r});case"lru":return new aLe({mapKey:r,maxSize:Bn(e)});case"most-recent":return new aLe({mapKey:r,maxSize:1})}throw new Error(`Unrecognized eviction policy ${t}`)}var t2e=_9t,{setConfigDeletionHandler:w9t}=hu;function E9t(t){var e,r;let n=t2e({equality:(e=(r=t.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let l=n.get(i);if(l!=null)return l;let x=t,{cachePolicyForParams_UNSTABLE:f}=x,d=Oo(x,["cachePolicyForParams_UNSTABLE"]),v=e2e(on(mt({},d),{key:`${t.key}__${(o=JL(i))!==null&&o!==void 0?o:"void"}`,default:typeof t.default=="function"?t.default(i):t.default,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects_UNSTABLE:typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):t.effects_UNSTABLE}));return n.set(i,v),w9t(v.key,()=>{n.delete(i)}),v}}var S9t=E9t,{setConfigDeletionHandler:T9t}=hu,I9t=0;function A9t(t){var e,r;let n=t2e({equality:(e=(r=t.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let l=n.get(i);if(l!=null)return l;let f=`${t.key}__selectorFamily/${(o=JL(i,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${I9t++}`,d=A=>t.get(i)(A),v=t.cachePolicy_UNSTABLE,x=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,b;if(t.set!=null){let A=t.set;b=VL({key:f,get:d,set:(N,j)=>A(i)(N,j),cachePolicy_UNSTABLE:v,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:x})}else b=VL({key:f,get:d,cachePolicy_UNSTABLE:v,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:x});return n.set(i,b),T9t(b.key,()=>{n.delete(i)}),b}}var Fd=A9t,M9t=Fd({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function C9t(t){return M9t(t)}var P9t=C9t,R9t=Fd({key:"__error",get:t=>()=>{throw new Error(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function O9t(t){return R9t(t)}var L9t=O9t;function D9t(t){return t}var N9t=D9t,{loadableWithError:r2e,loadableWithPromise:n2e,loadableWithValue:i2e}=ZS;function e2(t,e){let r=Array(e.length).fill(void 0),n=Array(e.length).fill(void 0);for(let[i,o]of e.entries())try{r[i]=t(o)}catch(l){n[i]=l}return[r,n]}function k9t(t){return t!=null&&!ao(t)}function t2(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function L8(t){return t!=null&&typeof t=="object"&&t.hasOwnProperty("__value")?t.__value:t}function c8(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((r,n,i)=>on(mt({},r),{[n]:e[i]}),{})}function A0(t,e,r){let n=r.map((i,o)=>i==null?i2e(e[o]):ao(i)?n2e(i):r2e(i));return c8(t,n)}function q9t(t,e){return e.map((r,n)=>r===void 0?t[n]:r)}var F9t=Fd({key:"__waitForNone",get:t=>({get:e})=>{let r=t2(t),[n,i]=e2(e,r);return A0(t,n,i)},dangerouslyAllowMutability:!0}),j9t=Fd({key:"__waitForAny",get:t=>({get:e})=>{let r=t2(t),[n,i]=e2(e,r);return i.some(o=>!ao(o))?A0(t,n,i):new Promise(o=>{for(let[l,f]of i.entries())ao(f)&&f.then(d=>{n[l]=L8(d),i[l]=void 0,o(A0(t,n,i))}).catch(d=>{i[l]=d,o(A0(t,n,i))})})},dangerouslyAllowMutability:!0}),z9t=Fd({key:"__waitForAll",get:t=>({get:e})=>{let r=t2(t),[n,i]=e2(e,r);if(i.every(l=>l==null))return c8(t,n);let o=i.find(k9t);if(o!=null)throw o;return Promise.all(i).then(l=>c8(t,q9t(n,l).map(L8)))},dangerouslyAllowMutability:!0}),U9t=Fd({key:"__waitForAllSettled",get:t=>({get:e})=>{let r=t2(t),[n,i]=e2(e,r);return i.every(o=>!ao(o))?A0(t,n,i):Promise.all(i.map((o,l)=>ao(o)?o.then(f=>{n[l]=L8(f),i[l]=void 0}).catch(f=>{n[l]=void 0,i[l]=f}):null)).then(()=>A0(t,n,i))},dangerouslyAllowMutability:!0}),B9t=Fd({key:"__noWait",get:t=>({get:e})=>{try{return i2e(e(t))}catch(r){return ao(r)?n2e(r):r2e(r)}},dangerouslyAllowMutability:!0}),V9t={waitForNone:F9t,waitForAny:j9t,waitForAll:z9t,waitForAllSettled:U9t,noWait:B9t},{batchUpdates:G9t,setBatcher:$9t}=b8,{DefaultValue:H9t}=hu,{RecoilRoot:W9t}=KL,{isRecoilValue:Z9t}=qd,{retentionZone:Y9t}=$L,{freshSnapshot:K9t}=YL,{useGotoRecoilSnapshot:X9t,useRecoilCallback:Q9t,useRecoilSnapshot:J9t,useRecoilState:eKt,useRecoilStateLoadable:tKt,useRecoilTransaction:rKt,useRecoilTransactionObserver:nKt,useRecoilValue:iKt,useRecoilValueLoadable:oKt,useResetRecoilState:aKt,useRetain:sKt,useSetRecoilState:lKt,useSetUnvalidatedAtomValues:uKt,useTransactionObservation_DEPRECATED:cKt}=yYt,{noWait:fKt,waitForAll:hKt,waitForAllSettled:pKt,waitForAny:dKt,waitForNone:mKt}=V9t,dn={DefaultValue:H9t,RecoilRoot:W9t,useRecoilBridgeAcrossReactRoots_UNSTABLE:AYt,atom:e2e,selector:VL,retentionZone:Y9t,atomFamily:S9t,selectorFamily:Fd,constSelector:P9t,errorSelector:L9t,readOnlySelector:N9t,useRecoilValue:iKt,useRecoilValueLoadable:oKt,useRecoilState:eKt,useRecoilStateLoadable:tKt,useSetRecoilState:lKt,useResetRecoilState:aKt,useGetRecoilValueInfo_UNSTABLE:wYt,useRetain:sKt,useRecoilCallback:Q9t,useRecoilTransaction_UNSTABLE:rKt,useGotoRecoilSnapshot:X9t,useRecoilSnapshot:J9t,useRecoilTransactionObserver_UNSTABLE:nKt,useTransactionObservation_UNSTABLE:cKt,useSetUnvalidatedAtomValues_UNSTABLE:uKt,noWait:fKt,waitForNone:mKt,waitForAny:dKt,waitForAll:hKt,waitForAllSettled:pKt,isRecoilValue:Z9t,batchUpdates:G9t,setBatcher:$9t,snapshot_UNSTABLE:K9t},c9r=dn.DefaultValue,o2e=dn.RecoilRoot,f9r=dn.useRecoilBridgeAcrossReactRoots_UNSTABLE,Kr=dn.atom,Xg=dn.selector,h9r=dn.retentionZone,p9r=dn.atomFamily,d9r=dn.selectorFamily,m9r=dn.constSelector,g9r=dn.errorSelector,v9r=dn.readOnlySelector,Gs=dn.useRecoilValue,y9r=dn.useRecoilValueLoadable,r2=dn.useRecoilState,_9r=dn.useRecoilStateLoadable,pu=dn.useSetRecoilState,x9r=dn.useResetRecoilState,b9r=dn.useGetRecoilValueInfo_UNSTABLE,w9r=dn.useRetain,gKt=dn.useRecoilCallback,E9r=dn.useRecoilTransaction_UNSTABLE,S9r=dn.useGotoRecoilSnapshot,T9r=dn.useRecoilSnapshot,I9r=dn.useRecoilTransactionObserver_UNSTABLE,A9r=dn.useTransactionObservation_UNSTABLE,M9r=dn.useSetUnvalidatedAtomValues_UNSTABLE,C9r=dn.noWait,P9r=dn.waitForNone,R9r=dn.waitForAny,O9r=dn.waitForAll,L9r=dn.waitForAllSettled,D9r=dn.isRecoilValue,N9r=dn.batchUpdates,k9r=dn.setBatcher,q9r=dn.snapshot_UNSTABLE;p();var lo=je(St(),1);var gUe=je(k8(),1);p();function S2e(t){return zn(this,null,function*(){let e=Oi.getGeoreferenceApiClient(),r="/transformations/",n={map_id:t,additional_properties:!0},i=yield e.get(r,{params:n});if(i.status===200)return i.data;console.error("Something went wrong while trying to fetch transformation for given map_id.")})}function T2e(t,e){return zn(this,null,function*(){let r=Oi.getGeoreferenceApiClient(),n="/transformations/",i={dry_run:!1},o=on(mt({},e),{map_id:t}),l=yield r.post(n,o,{params:i});if(l.status===200)return l.data;console.error("Something went wrong while trying to confirm transformation for given map_id and params.")})}function I2e(t,e,r){return zn(this,null,function*(){let n=Oi.getGeoreferenceApiClient(),i="/transformations/",o=Object.assign({map_id:t,params:e,overwrites:0},r!==void 0?{clip:r}:{}),l={dry_run:!0},f=yield n.post(i,o,{params:l});if(f.status===200)return f.data;console.error("Something went wrong while trying to fetch transformation for given map_id and params.")})}function A2e(t){return zn(this,null,function*(){let e=Oi.getGeoreferenceApiClient(),r="/transformations/",n={transformation_id:t},i={dry_run:!0},o=yield e.post(r,n,{params:i});if(o.status===200)return o.data;console.error("Something went wrong while trying to fetch transformation preview for given transformation_id.")})}p();var jd=Kr({key:"notificationState",default:null});p();p();var oKr=Kr({key:"helperMessageState",default:null}),n2=Kr({key:"isLoadingState",default:!1}),i2=Kr({key:"mapMetadataState",default:null}),o2=Kr({key:"rectifiedImageParamsState",default:null}),a2=Kr({key:"sourceViewParamsState",default:null,dangerouslyAllowMutability:!0}),s2=Kr({key:"targetViewParamsState",default:null,dangerouslyAllowMutability:!0}),l2=Kr({key:"transformationState",default:null});p();p();var QS=je(St(),1),Oh=je(ln(),1);p();function N2e(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=N2e(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function MKt(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=N2e(t))&&(n&&(n+=" "),n+=e);return n}var Hs=MKt;p();p();var q8=je(St(),1),u2=je(ln(),1);var k2e=({name:t,color:e,size:r})=>q8.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${t}`,fill:e,width:r,height:r},q8.default.createElement("use",{xlinkHref:`${Oi.getSettings().ICON_SPRITE}#${t}`}));k2e.propTypes={name:u2.default.string.isRequired,color:u2.default.string,size:u2.default.number};var q2e=k2e;var XS=q2e;var F2e=t=>{let{activeControl:e=null,className:r="",disabled:n=!1,iconClassName:i="",IconComponent:o,id:l="unknown",onClick:f,title:d="unknown"}=t;return QS.default.createElement("button",{onClick:()=>{f(l)},className:Hs("vkf-control-button",r,e===l&&"active",n&&"disabled"),disabled:n},o===void 0?QS.default.createElement(XS,{name:i,size:24}):QS.default.createElement(o,{glyph:i}),QS.default.createElement("span",{className:"text"},d))};F2e.propTypes={activeControl:Oh.default.string,className:Oh.default.string,disabled:Oh.default.bool,id:Oh.default.string.isRequired,iconClassName:Oh.default.string,IconComponent:Oh.default.elementType,onClick:Oh.default.func.isRequired,title:Oh.default.string};var j2e=F2e;var JS=j2e;p();p();var pc=je(St(),1),Ys=je(ln(),1);p();p();var X8=je(FDe(),1);function Er(){return Er=X8.default?X8.default.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Er.apply(null,arguments)}p();var aNe=je(YDe(),1);p();var tZ=je(oNe(),1);function E2(t,e){return E2=tZ.default?tZ.default.bind():function(r,n){return r.__proto__=n,r},E2(t,e)}function Vn(t,e){t.prototype=(0,aNe.default)(e.prototype),t.prototype.constructor=t,E2(t,e)}p();function Gn(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}p();p();p();function mn(){return mn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mn.apply(null,arguments)}p();function oT(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var nZ=je(St());p();var UXr=je(T2()),L7t=function(){};function lNe(t,e){var r={};return Object.keys(t).forEach(function(n){if(r[D0(n)]=L7t,0)var i}),r}function rZ(t,e){return t[e]!==void 0}function D0(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function uNe(t){return!!t&&(typeof t!="function"||t.prototype&&t.prototype.isReactComponent)}p();p();p();function N0(t,e){return N0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},N0(t,e)}function fNe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,N0(t,e)}var k0=je(St()),mNe=je(oZ()),gNe=je(T2());var N7t="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function aT(t,e,r){r===void 0&&(r=[]);var n=t.displayName||t.name||"Component",i=uNe(t),o=Object.keys(e),l=o.map(D0);i||!r.length||(0,gNe.default)(!1);var f=function(v){fNe(x,v);function x(){for(var A,P=arguments.length,N=new Array(P),j=0;j<P;j++)N[j]=arguments[j];A=v.call.apply(v,[this].concat(N))||this,A.handlers=Object.create(null),o.forEach(function(F){var U=e[F],$=function(ie){if(A.props[U]){var ne;A._notifying=!0;for(var ae=arguments.length,de=new Array(ae>1?ae-1:0),ye=1;ye<ae;ye++)de[ye-1]=arguments[ye];(ne=A.props)[U].apply(ne,[ie].concat(de)),A._notifying=!1}A.unmounted||A.setState(function(me){var be,Ne=me.values;return{values:mn(Object.create(null),Ne,(be={},be[F]=ie,be))}})};A.handlers[U]=$}),r.length&&(A.attachRef=function(F){A.inner=F});var D=Object.create(null);return o.forEach(function(F){D[F]=A.props[D0(F)]}),A.state={values:D,prevProps:{}},A}var b=x.prototype;return b.shouldComponentUpdate=function(){return!this._notifying},x.getDerivedStateFromProps=function(P,N){var j=N.values,D=N.prevProps,F={values:mn(Object.create(null),j),prevProps:{}};return o.forEach(function(U){F.prevProps[U]=P[U],!rZ(P,U)&&rZ(D,U)&&(F.values[U]=P[D0(U)])}),F},b.componentWillUnmount=function(){this.unmounted=!0},b.render=function(){var P=this,N=this.props,j=N.innerRef,D=oT(N,["innerRef"]);l.forEach(function(U){delete D[U]});var F={};return o.forEach(function(U){var $=P.props[U];F[U]=$!==void 0?$:P.state.values[U]}),k0.default.createElement(t,mn({},D,F,this.handlers,{ref:j||this.attachRef}))},x}(k0.default.Component);(0,mNe.polyfill)(f),f.displayName="Uncontrolled("+n+")",f.propTypes=mn({innerRef:function(){}},lNe(e,n)),r.forEach(function(v){f.prototype[v]=function(){var b;return(b=this.inner)[v].apply(b,arguments)}});var d=f;return k0.default.forwardRef&&(d=k0.default.forwardRef(function(v,x){return k0.default.createElement(f,mn({},v,{innerRef:x,__source:{fileName:N7t,lineNumber:128},__self:this}))}),d.propTypes=f.propTypes),d.ControlledComponent=t,d.deferControlTo=function(v,x,b){return x===void 0&&(x={}),aT(v,mn({},e,x),b)},d}p();var uZ=je(sZ());var SNe=je(T2()),I2=je(ln());p();var mf={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},lZ={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var ENe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},sT={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function cZ(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[r.length-1];return typeof i=="function"?t.apply(void 0,r):function(o){return t.apply(void 0,r.concat([o]))}}}function Li(t,e){var r=(t.bsClass||"").trim();return r==null&&(0,SNe.default)(!1),r+(e?"-"+e:"")}var Di=cZ(function(t,e){var r=e.propTypes||(e.propTypes={}),n=e.defaultProps||(e.defaultProps={});return r.bsClass=I2.default.string,n.bsClass=t,e}),TNe=cZ(function(t,e,r){typeof e!="string"&&(r=e,e=void 0);var n=r.STYLES||[],i=r.propTypes||{};t.forEach(function(f){n.indexOf(f)===-1&&n.push(f)});var o=I2.default.oneOf(n);if(r.STYLES=n,o._values=n,r.propTypes=Er({},i,{bsStyle:o}),e!==void 0){var l=r.defaultProps||(r.defaultProps={});l.bsStyle=e}return r}),q0=cZ(function(t,e,r){typeof e!="string"&&(r=e,e=void 0);var n=r.SIZES||[],i=r.propTypes||{};t.forEach(function(f){n.indexOf(f)===-1&&n.push(f)});var o=[];n.forEach(function(f){var d=lZ[f];d&&d!==f&&o.push(d),o.push(f)});var l=I2.default.oneOf(o);return l._values=o,r.SIZES=n,r.propTypes=Er({},i,{bsSize:l}),e!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=e),r});function ja(t){var e,r=(e={},e[Li(t)]=!0,e);if(t.bsSize){var n=lZ[t.bsSize]||t.bsSize;r[Li(t,n)]=!0}return t.bsStyle&&(r[Li(t,t.bsStyle)]=!0),r}function INe(t){return{bsClass:t.bsClass,bsSize:t.bsSize,bsStyle:t.bsStyle,bsRole:t.bsRole}}function ANe(t){return t==="bsClass"||t==="bsSize"||t==="bsStyle"||t==="bsRole"}function Ws(t){var e={};return(0,uZ.default)(t).forEach(function(r){var n=r[0],i=r[1];ANe(n)||(e[n]=i)}),[INe(t),e]}function A2(t,e){var r={};e.forEach(function(i){r[i]=!0});var n={};return(0,uZ.default)(t).forEach(function(i){var o=i[0],l=i[1];!ANe(o)&&!r[o]&&(n[o]=l)}),[INe(t),n]}p();var ba=je(St());function U7t(t,e,r){var n=0;return ba.default.Children.map(t,function(i){return ba.default.isValidElement(i)?e.call(r,i,n++):i})}function B7t(t,e,r){var n=0;ba.default.Children.forEach(t,function(i){ba.default.isValidElement(i)&&e.call(r,i,n++)})}function V7t(t){var e=0;return ba.default.Children.forEach(t,function(r){ba.default.isValidElement(r)&&++e}),e}function G7t(t,e,r){var n=0,i=[];return ba.default.Children.forEach(t,function(o){ba.default.isValidElement(o)&&e.call(r,o,n++)&&i.push(o)}),i}function $7t(t,e,r){var n=0,i;return ba.default.Children.forEach(t,function(o){i||ba.default.isValidElement(o)&&e.call(r,o,n++)&&(i=o)}),i}function H7t(t,e,r){var n=0,i=!0;return ba.default.Children.forEach(t,function(o){i&&ba.default.isValidElement(o)&&(e.call(r,o,n++)||(i=!1))}),i}function W7t(t,e,r){var n=0,i=!1;return ba.default.Children.forEach(t,function(o){i||ba.default.isValidElement(o)&&e.call(r,o,n++)&&(i=!0)}),i}function Z7t(t){var e=[];return ba.default.Children.forEach(t,function(r){ba.default.isValidElement(r)&&e.push(r)}),e}var Qg={map:U7t,forEach:B7t,count:V7t,find:$7t,filter:G7t,every:H7t,some:W7t,toArray:Z7t};p();var C2=je(ln()),fZ=je(lT());var RQr=C2.default.oneOfType([C2.default.string,C2.default.number]);function CNe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,fZ.default)(function(n,i,o){var l;return e.every(function(f){return Qg.some(n.children,function(d){return d.props.bsRole===f})?!0:(l=f,!1)}),l?new Error("(children) "+o+" - Missing a required child with bsRole: "+(l+". "+o+" must have at least one child of each of ")+("the following bsRoles: "+e.join(", "))):null})}function PNe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,fZ.default)(function(n,i,o){var l;return e.every(function(f){var d=Qg.filter(n.children,function(v){return v.props.bsRole===f});return d.length>1?(l=f,!1):!0}),l?new Error("(children) "+o+" - Duplicate children detected of bsRole: "+(l+". Only one child each allowed with the following ")+("bsRoles: "+e.join(", "))):null})}p();var hZ=je(ln()),uT=je(St()),X7t={label:hZ.default.string.isRequired,onClick:hZ.default.func},Q7t={label:"Close"},pZ=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.label,l=i.onClick;return uT.default.createElement("button",{type:"button",className:"close",onClick:l},uT.default.createElement("span",{"aria-hidden":"true"},"\xD7"),uT.default.createElement("span",{className:"sr-only"},o))},e}(uT.default.Component);pZ.propTypes=X7t;pZ.defaultProps=Q7t;var qNe=pZ;p();p();function kn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var vZ=je(St()),Dh=je(ln()),$Ne=je(Lh());p();function cXt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.filter(function(n){return n!=null}).reduce(function(n,i){if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?i:function(){for(var l=arguments.length,f=new Array(l),d=0;d<l;d++)f[d]=arguments[d];n.apply(this,f),i.apply(this,f)}},null)}var jo=cXt;var fXt={href:Dh.default.string,onClick:Dh.default.func,onKeyDown:Dh.default.func,disabled:Dh.default.bool,role:Dh.default.string,tabIndex:Dh.default.oneOfType([Dh.default.number,Dh.default.string]),componentClass:$Ne.default},hXt={componentClass:"a"};function GNe(t){return!t||t.trim()==="#"}var yZ=function(t){Vn(e,t);function e(n,i){var o;return o=t.call(this,n,i)||this,o.handleClick=o.handleClick.bind(kn(kn(o))),o.handleKeyDown=o.handleKeyDown.bind(kn(kn(o))),o}var r=e.prototype;return r.handleClick=function(i){var o=this.props,l=o.disabled,f=o.href,d=o.onClick;if((l||GNe(f))&&i.preventDefault(),l){i.stopPropagation();return}d&&d(i)},r.handleKeyDown=function(i){i.key===" "&&(i.preventDefault(),this.handleClick(i))},r.render=function(){var i=this.props,o=i.componentClass,l=i.disabled,f=i.onKeyDown,d=Gn(i,["componentClass","disabled","onKeyDown"]);return GNe(d.href)&&(d.role=d.role||"button",d.href=d.href||"#"),l&&(d.tabIndex=-1,d.style=Er({pointerEvents:"none"},d.style)),vZ.default.createElement(o,Er({},d,{onClick:this.handleClick,onKeyDown:jo(this.handleKeyDown,f)}))},e}(vZ.default.Component);yZ.propTypes=fXt;yZ.defaultProps=hXt;var F0=yZ;p();var HNe=je(kNe());var _Z=je(Ei()),U2=je(St()),Jg=je(ln()),WNe=je(Lh());var pXt={active:Jg.default.bool,disabled:Jg.default.bool,block:Jg.default.bool,onClick:Jg.default.func,componentClass:WNe.default,href:Jg.default.string,type:Jg.default.oneOf(["button","reset","submit"])},dXt={active:!1,block:!1,disabled:!1},xZ=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.renderAnchor=function(i,o){return U2.default.createElement(F0,Er({},i,{className:(0,_Z.default)(o,i.disabled&&"disabled")}))},r.renderButton=function(i,o){var l=i.componentClass,f=Gn(i,["componentClass"]),d=l||"button";return U2.default.createElement(d,Er({},f,{type:f.type||"button",className:o}))},r.render=function(){var i,o=this.props,l=o.active,f=o.block,d=o.className,v=Gn(o,["active","block","className"]),x=Ws(v),b=x[0],A=x[1],P=Er({},ja(b),(i={active:l},i[Li(b,"block")]=f,i)),N=(0,_Z.default)(d,P);return A.href?this.renderAnchor(A,N):this.renderButton(A,N)},e}(U2.default.Component);xZ.propTypes=pXt;xZ.defaultProps=dXt;var Bd=Di("btn",q0([mf.LARGE,mf.SMALL,mf.XSMALL],TNe((0,HNe.default)(ENe).concat([sT.DEFAULT,sT.PRIMARY,sT.LINK]),sT.DEFAULT,xZ)));p();var YNe=je(Ei()),bZ=je(St()),G2=je(ln()),KNe=je(V2());var _Xt={vertical:G2.default.bool,justified:G2.default.bool,block:(0,KNe.default)(G2.default.bool,function(t){var e=t.block,r=t.vertical;return e&&!r?new Error("`block` requires `vertical` to be set to have any effect"):null})},xXt={block:!1,justified:!1,vertical:!1},wZ=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i,o=this.props,l=o.block,f=o.justified,d=o.vertical,v=o.className,x=Gn(o,["block","justified","vertical","className"]),b=Ws(x),A=b[0],P=b[1],N=Er({},ja(A),(i={},i[Li(A)]=!d,i[Li(A,"vertical")]=d,i[Li(A,"justified")]=f,i[Li(Bd.defaultProps,"block")]=l,i));return bZ.default.createElement("div",Er({},P,{className:(0,YNe.default)(v,N)}))},e}(bZ.default.Component);wZ.propTypes=_Xt;wZ.defaultProps=xXt;var XNe=Di("btn-group",wZ);p();var qqe=je(Ei()),Fqe=je(LZ()),jqe=je(gT()),mD=je(NZ()),V0=je(St()),ps=je(ln()),XZ=je(No()),zqe=je(V2()),Uqe=je(Lh()),Bqe=je(Oke());var otn=je(EZ());p();var Oqe=je(bqe());var Lqe=je(Ei()),bT=je(NZ()),wT=je(St()),kh=je(ln()),Dqe=je(No()),Nqe=je(Rqe());var CJt={open:kh.default.bool,pullRight:kh.default.bool,onClose:kh.default.func,labelledBy:kh.default.oneOfType([kh.default.string,kh.default.number]),onSelect:kh.default.func,rootCloseEvent:kh.default.oneOf(["click","mousedown"])},PJt={bsRole:"menu",pullRight:!1},WZ=function(t){Vn(e,t);function e(n){var i;return i=t.call(this,n)||this,i.handleRootClose=i.handleRootClose.bind(kn(kn(i))),i.handleKeyDown=i.handleKeyDown.bind(kn(kn(i))),i}var r=e.prototype;return r.getFocusableMenuItems=function(){var i=Dqe.default.findDOMNode(this);return i?(0,Oqe.default)(i.querySelectorAll("[tabIndex=\"-1\"]")):[]},r.getItemsAndActiveIndex=function(){var i=this.getFocusableMenuItems(),o=i.indexOf(document.activeElement);return{items:i,activeIndex:o}},r.focusNext=function(){var i=this.getItemsAndActiveIndex(),o=i.items,l=i.activeIndex;if(o.length!==0){var f=l===o.length-1?0:l+1;o[f].focus()}},r.focusPrevious=function(){var i=this.getItemsAndActiveIndex(),o=i.items,l=i.activeIndex;if(o.length!==0){var f=l===0?o.length-1:l-1;o[f].focus()}},r.handleKeyDown=function(i){switch(i.keyCode){case bT.default.codes.down:this.focusNext(),i.preventDefault();break;case bT.default.codes.up:this.focusPrevious(),i.preventDefault();break;case bT.default.codes.esc:case bT.default.codes.tab:this.props.onClose(i,{source:"keydown"});break;default:}},r.handleRootClose=function(i){this.props.onClose(i,{source:"rootClose"})},r.render=function(){var i,o=this,l=this.props,f=l.open,d=l.pullRight,v=l.labelledBy,x=l.onSelect,b=l.className,A=l.rootCloseEvent,P=l.children,N=Gn(l,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),j=A2(N,["onClose"]),D=j[0],F=j[1],U=Er({},ja(D),(i={},i[Li(D,"right")]=d,i));return wT.default.createElement(Nqe.default,{disabled:!f,onRootClose:this.handleRootClose,event:A},wT.default.createElement("ul",Er({},F,{role:"menu",className:(0,Lqe.default)(b,U),"aria-labelledby":v}),Qg.map(P,function($){return wT.default.cloneElement($,{onKeyDown:jo($.props.onKeyDown,o.handleKeyDown),onSelect:jo($.props.onSelect,x)})})))},e}(wT.default.Component);WZ.propTypes=CJt;WZ.defaultProps=PJt;var ZZ=Di("dropdown-menu",WZ);p();var dD=je(St()),ET=je(ln()),kqe=je(Ei());var RJt={noCaret:ET.default.bool,open:ET.default.bool,title:ET.default.string,useAnchor:ET.default.bool},OJt={open:!1,useAnchor:!1,bsRole:"toggle"},YZ=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.noCaret,l=i.open,f=i.useAnchor,d=i.bsClass,v=i.className,x=i.children,b=Gn(i,["noCaret","open","useAnchor","bsClass","className","children"]);delete b.bsRole;var A=f?F0:Bd,P=!o;return dD.default.createElement(A,Er({},b,{role:"button",className:(0,kqe.default)(v,d),"aria-haspopup":!0,"aria-expanded":l}),x||b.title,P&&" ",P&&dD.default.createElement("span",{className:"caret"}))},e}(dD.default.Component);YZ.propTypes=RJt;YZ.defaultProps=OJt;var KZ=Di("dropdown-toggle",YZ);var Vqe=KZ.defaultProps.bsRole,QZ=ZZ.defaultProps.bsRole,LJt={dropup:ps.default.bool,id:(0,Bqe.default)(ps.default.oneOfType([ps.default.string,ps.default.number])),componentClass:Uqe.default,children:(0,zqe.default)(CNe(Vqe,QZ),PNe(QZ)),disabled:ps.default.bool,pullRight:ps.default.bool,open:ps.default.bool,defaultOpen:ps.default.bool,onToggle:ps.default.func,onSelect:ps.default.func,role:ps.default.string,rootCloseEvent:ps.default.oneOf(["click","mousedown"]),onMouseEnter:ps.default.func,onMouseLeave:ps.default.func},DJt={componentClass:XNe},gD=function(t){Vn(e,t);function e(n,i){var o;return o=t.call(this,n,i)||this,o.handleClick=o.handleClick.bind(kn(kn(o))),o.handleKeyDown=o.handleKeyDown.bind(kn(kn(o))),o.handleClose=o.handleClose.bind(kn(kn(o))),o._focusInDropdown=!1,o.lastOpenEventType=null,o}var r=e.prototype;return r.componentDidMount=function(){this.focusNextOnOpen()},r.UNSAFE_componentWillUpdate=function(i){!i.open&&this.props.open&&(this._focusInDropdown=(0,jqe.default)(XZ.default.findDOMNode(this.menu),(0,Fqe.default)(document)))},r.componentDidUpdate=function(i){var o=this.props.open,l=i.open;o&&!l&&this.focusNextOnOpen(),!o&&l&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},r.focus=function(){var i=XZ.default.findDOMNode(this.toggle);i&&i.focus&&i.focus()},r.focusNextOnOpen=function(){var i=this.menu;!i||!i.focusNext||(this.lastOpenEventType==="keydown"||this.props.role==="menuitem")&&i.focusNext()},r.handleClick=function(i){this.props.disabled||this.toggleOpen(i,{source:"click"})},r.handleClose=function(i,o){this.props.open&&this.toggleOpen(i,o)},r.handleKeyDown=function(i){if(!this.props.disabled)switch(i.keyCode){case mD.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(i,{source:"keydown"}),i.preventDefault();break;case mD.default.codes.esc:case mD.default.codes.tab:this.handleClose(i,{source:"keydown"});break;default:}},r.toggleOpen=function(i,o){var l=!this.props.open;l&&(this.lastOpenEventType=o.source),this.props.onToggle&&this.props.onToggle(l,i,o)},r.renderMenu=function(i,o){var l=this,f=o.id,d=o.onSelect,v=o.rootCloseEvent,x=Gn(o,["id","onSelect","rootCloseEvent"]),b=function(P){l.menu=P};return typeof i.ref=="string"||(b=jo(i.ref,b)),(0,V0.cloneElement)(i,Er({},x,{ref:b,labelledBy:f,bsClass:Li(x,"menu"),onClose:jo(i.props.onClose,this.handleClose),onSelect:jo(i.props.onSelect,d,function(A,P){return l.handleClose(P,{source:"select"})}),rootCloseEvent:v}))},r.renderToggle=function(i,o){var l=this,f=function(v){l.toggle=v};return typeof i.ref=="string"||(f=jo(i.ref,f)),(0,V0.cloneElement)(i,Er({},o,{ref:f,bsClass:Li(o,"toggle"),onClick:jo(i.props.onClick,this.handleClick),onKeyDown:jo(i.props.onKeyDown,this.handleKeyDown)}))},r.render=function(){var i,o=this,l=this.props,f=l.componentClass,d=l.id,v=l.dropup,x=l.disabled,b=l.pullRight,A=l.open,P=l.onSelect,N=l.role,j=l.bsClass,D=l.className,F=l.rootCloseEvent,U=l.children,$=Gn(l,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete $.onToggle;var Z=(i={},i[j]=!0,i.open=A,i.disabled=x,i);return v&&(Z[j]=!1,Z.dropup=!0),V0.default.createElement(f,Er({},$,{className:(0,qqe.default)(D,Z)}),Qg.map(U,function(ie){switch(ie.props.bsRole){case Vqe:return o.renderToggle(ie,{id:d,disabled:x,open:A,role:N,bsClass:j});case QZ:return o.renderMenu(ie,{id:d,open:A,pullRight:b,bsClass:j,onSelect:P,rootCloseEvent:F});default:return ie}}))},e}(V0.default.Component);gD.propTypes=LJt;gD.defaultProps=DJt;Di("dropdown",gD);var JZ=aT(gD,{open:"onToggle"});JZ.Toggle=KZ;JZ.Menu=ZZ;var ST=JZ;p();var Gqe=je(sZ());function eY(t,e){var r=e.propTypes,n={},i={};return(0,Gqe.default)(t).forEach(function(o){var l=o[0],f=o[1];r[l]?n[l]=f:i[l]=f}),[n,i]}p();var $qe=je(Ei()),yD=je(St()),du=je(ln()),G0=je(Eke()),vD,NJt={in:du.default.bool,mountOnEnter:du.default.bool,unmountOnExit:du.default.bool,appear:du.default.bool,timeout:du.default.number,onEnter:du.default.func,onEntering:du.default.func,onEntered:du.default.func,onExit:du.default.func,onExiting:du.default.func,onExited:du.default.func},kJt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},qJt=(vD={},vD[G0.ENTERING]="in",vD[G0.ENTERED]="in",vD),tY=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.className,l=i.children,f=Gn(i,["className","children"]);return yD.default.createElement(G0.default,f,function(d,v){return yD.default.cloneElement(l,Er({},v,{className:(0,$qe.default)("fade",o,l.props.className,qJt[d])}))})},e}(yD.default.Component);tY.propTypes=NJt;tY.defaultProps=kJt;var rY=tY;p();var _D=je(Ei()),$0=je(St()),qh=je(ln()),Hqe=je(V2());var FJt={active:qh.default.bool,disabled:qh.default.bool,divider:(0,Hqe.default)(qh.default.bool,function(t){var e=t.divider,r=t.children;return e&&r?new Error("Children will not be rendered for dividers"):null}),eventKey:qh.default.any,header:qh.default.bool,href:qh.default.string,onClick:qh.default.func,onSelect:qh.default.func},jJt={divider:!1,disabled:!1,header:!1},nY=function(t){Vn(e,t);function e(n,i){var o;return o=t.call(this,n,i)||this,o.handleClick=o.handleClick.bind(kn(kn(o))),o}var r=e.prototype;return r.handleClick=function(i){var o=this.props,l=o.href,f=o.disabled,d=o.onSelect,v=o.eventKey;(!l||f)&&i.preventDefault(),!f&&d&&d(v,i)},r.render=function(){var i=this.props,o=i.active,l=i.disabled,f=i.divider,d=i.header,v=i.onClick,x=i.className,b=i.style,A=Gn(i,["active","disabled","divider","header","onClick","className","style"]),P=A2(A,["eventKey","onSelect"]),N=P[0],j=P[1];return f?(j.children=void 0,$0.default.createElement("li",Er({},j,{role:"separator",className:(0,_D.default)(x,"divider"),style:b}))):d?$0.default.createElement("li",Er({},j,{role:"heading",className:(0,_D.default)(x,Li(N,"header")),style:b})):$0.default.createElement("li",{role:"presentation",className:(0,_D.default)(x,{active:o,disabled:l}),style:b},$0.default.createElement(F0,Er({},j,{role:"menuitem",tabIndex:"-1",onClick:jo(v,this.handleClick)})))},e}($0.default.Component);nY.propTypes=FJt;nY.defaultProps=jJt;var iY=Di("dropdown",nY);p();var MY=je(Ei()),CY=je(oFe()),Eje=je(dT()),Sje=je(gf()),PY=je(sY()),Z0=je(St()),ea=je(ln()),Tje=je(No()),Y0=je(uje()),Ije=je(fY()),Aje=je(Lh());p();var cje=je(Ei()),bY=je(St()),fje=je(Lh());var Ktr={componentClass:fje.default},Xtr={componentClass:"div"},wY=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.componentClass,l=i.className,f=Gn(i,["componentClass","className"]),d=Ws(f),v=d[0],x=d[1],b=ja(v);return bY.default.createElement(o,Er({},x,{className:(0,cje.default)(l,b)}))},e}(bY.default.Component);wY.propTypes=Ktr;wY.defaultProps=Xtr;var hje=Di("modal-body",wY);p();var EY=je(Ei()),AT=je(St()),pje=je(ln());var Qtr={dialogClassName:pje.default.string},dje=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i,o=this.props,l=o.dialogClassName,f=o.className,d=o.style,v=o.children,x=o.onMouseDownDialog,b=Gn(o,["dialogClassName","className","style","children","onMouseDownDialog"]),A=Ws(b),P=A[0],N=A[1],j=Li(P),D=Er({display:"block"},d),F=Er({},ja(P),(i={},i[j]=!1,i[Li(P,"dialog")]=!0,i));return AT.default.createElement("div",Er({},N,{tabIndex:"-1",role:"dialog",style:D,className:(0,EY.default)(f,j)}),AT.default.createElement("div",{className:(0,EY.default)(l,F),onMouseDown:x},AT.default.createElement("div",{className:Li(P,"content"),role:"document"},v)))},e}(AT.default.Component);dje.propTypes=Qtr;var BD=Di("modal",q0([mf.LARGE,mf.SMALL],dje));p();var mje=je(Ei()),SY=je(St()),gje=je(Lh());var Jtr={componentClass:gje.default},err={componentClass:"div"},TY=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.componentClass,l=i.className,f=Gn(i,["componentClass","className"]),d=Ws(f),v=d[0],x=d[1],b=ja(v);return SY.default.createElement(o,Er({},x,{className:(0,mje.default)(l,b)}))},e}(SY.default.Component);TY.propTypes=Jtr;TY.defaultProps=err;var vje=Di("modal-footer",TY);p();var yje=je(Ei()),W0=je(ln()),VD=je(St());var trr={closeLabel:W0.default.string,closeButton:W0.default.bool,onHide:W0.default.func},rrr={closeLabel:"Close",closeButton:!1},nrr={$bs_modal:W0.default.shape({onHide:W0.default.func})},GD=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.closeLabel,l=i.closeButton,f=i.onHide,d=i.className,v=i.children,x=Gn(i,["closeLabel","closeButton","onHide","className","children"]),b=this.context.$bs_modal,A=Ws(x),P=A[0],N=A[1],j=ja(P);return VD.default.createElement("div",Er({},N,{className:(0,yje.default)(d,j)}),l&&VD.default.createElement(qNe,{label:o,onClick:jo(b&&b.onHide,f)}),v)},e}(VD.default.Component);GD.propTypes=trr;GD.defaultProps=rrr;GD.contextTypes=nrr;var _je=Di("modal-header",GD);p();var xje=je(Ei()),IY=je(St()),bje=je(Lh());var irr={componentClass:bje.default},orr={componentClass:"h4"},AY=function(t){Vn(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.render=function(){var i=this.props,o=i.componentClass,l=i.className,f=Gn(i,["componentClass","className"]),d=Ws(f),v=d[0],x=d[1],b=ja(v);return IY.default.createElement(o,Er({},x,{className:(0,xje.default)(l,b)}))},e}(IY.default.Component);AY.propTypes=irr;AY.defaultProps=orr;var wje=Di("modal-title",AY);var arr=Er({},Y0.default.propTypes,BD.propTypes,{backdrop:ea.default.oneOf(["static",!0,!1]),backdropClassName:ea.default.string,keyboard:ea.default.bool,animation:ea.default.bool,dialogComponentClass:Aje.default,autoFocus:ea.default.bool,enforceFocus:ea.default.bool,restoreFocus:ea.default.bool,show:ea.default.bool,onHide:ea.default.func,onEnter:ea.default.func,onEntering:ea.default.func,onEntered:ea.default.func,onExit:ea.default.func,onExiting:ea.default.func,onExited:ea.default.func,container:Y0.default.propTypes.container}),srr=Er({},Y0.default.defaultProps,{animation:!0,dialogComponentClass:BD}),lrr={$bs_modal:ea.default.shape({onHide:ea.default.func})};function urr(t){return Z0.default.createElement(rY,Er({},t,{timeout:Cl.TRANSITION_DURATION}))}function crr(t){return Z0.default.createElement(rY,Er({},t,{timeout:Cl.BACKDROP_TRANSITION_DURATION}))}var Cl=function(t){Vn(e,t);function e(n,i){var o;return o=t.call(this,n,i)||this,o.handleDialogBackdropMouseDown=function(){o._waitingForMouseUp=!0},o.handleMouseUp=function(l){var f=o._modal.getDialogElement();o._waitingForMouseUp&&l.target===f&&(o._ignoreBackdropClick=!0),o._waitingForMouseUp=!1},o.handleEntering=o.handleEntering.bind(kn(kn(o))),o.handleExited=o.handleExited.bind(kn(kn(o))),o.handleWindowResize=o.handleWindowResize.bind(kn(kn(o))),o.handleDialogClick=o.handleDialogClick.bind(kn(kn(o))),o.setModalRef=o.setModalRef.bind(kn(kn(o))),o.state={style:{}},o}var r=e.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(i){this._modal=i},r.handleDialogClick=function(i){if(this._ignoreBackdropClick||i.target!==i.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){CY.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){CY.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(Sje.default){var i=this._modal.getDialogElement(),o=i.scrollHeight,l=(0,Eje.default)(i),f=(0,Ije.default)(Tje.default.findDOMNode(this.props.container||l.body)),d=o>l.documentElement.clientHeight;this.setState({style:{paddingRight:f&&!d?(0,PY.default)():void 0,paddingLeft:!f&&d?(0,PY.default)():void 0}})}},r.render=function(){var i=this.props,o=i.backdrop,l=i.backdropClassName,f=i.animation,d=i.show,v=i.dialogComponentClass,x=i.className,b=i.style,A=i.children,P=i.onEntering,N=i.onExited,j=Gn(i,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),D=eY(j,Y0.default),F=D[0],U=D[1],$=d&&!f&&"in";return Z0.default.createElement(Y0.default,Er({},F,{ref:this.setModalRef,show:d,containerClassName:Li(j,"open"),transition:f?urr:void 0,backdrop:o,backdropTransition:f?crr:void 0,backdropClassName:(0,MY.default)(Li(j,"backdrop"),l,$),onEntering:jo(P,this.handleEntering),onExited:jo(N,this.handleExited),onMouseUp:this.handleMouseUp}),Z0.default.createElement(v,Er({},U,{style:Er({},this.state.style,b),className:(0,MY.default)(x,$),onClick:o===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),A))},e}(Z0.default.Component);Cl.propTypes=arr;Cl.defaultProps=srr;Cl.childContextTypes=lrr;Cl.Body=hje;Cl.Header=_je;Cl.Title=wje;Cl.Footer=vje;Cl.Dialog=BD;Cl.TRANSITION_DURATION=300;Cl.BACKDROP_TRANSITION_DURATION=150;var iv=Di("modal",q0([mf.LARGE,mf.SMALL],Cl));var RY={NONE:"control-none-gcp",ADD:"control-add-gcp",MOVE:"control-move-gcp",DEL:"control-del-gcp"},Mje=t=>{let{id:e,activeControl:r,className:n="",parentIconClassName:i,defaultTitle:o="unknown",disableActiveBehavior:l=!1,IconComponent:f,options:d=[{id:RY.ADD,title:kr("georef-setgcp"),iconClassName:"icon-point-add"},{id:RY.MOVE,title:kr("georef-movegcp"),iconClassName:"icon-point-move"},{id:RY.DEL,title:kr("georef-delgcp"),iconClassName:"icon-point-remove"}],onClick:v}=t,x=d.find(A=>A.id===r),b=A=>{v(A)};return pc.default.createElement("div",{className:Hs("vkf-control-dropdown",x&&!l?"active":"",n)},pc.default.createElement(ST,{id:e,className:"btn-dropdown-vkf-control",bsStyle:"default",key:x?x.id:null},pc.default.createElement(ST.Toggle,null,f===void 0?pc.default.createElement(XS,{name:i,size:24}):pc.default.createElement(f,{glyph:i}),x?x.title:o),pc.default.createElement(ST.Menu,null,d.map(A=>pc.default.createElement(iY,{key:A.id,eventKey:A.id,onClick:()=>b(A.id),className:Hs("control-option",A.id)},f===void 0?pc.default.createElement(XS,{name:`${A.iconClassName}`,size:24}):pc.default.createElement(f,{glyph:A.iconClassName}),pc.default.createElement("span",{className:"text"},A.title))))))};Mje.propTypes={activeControl:Ys.default.string,className:Ys.default.string,defaultTitle:Ys.default.string,disableActiveBehavior:Ys.default.bool,IconComponent:Ys.default.elementType,id:Ys.default.string,parentIconClassName:Ys.default.string,options:Ys.default.arrayOf(Ys.default.shape({id:Ys.default.string.isRequired,title:Ys.default.string.isRequired,iconClassName:Ys.default.string.isRequired})),onClick:Ys.default.func.isRequired};var Cje=Mje;var OY=Cje;p();p();var mu=je(St(),1);var LY=je(ln(),1);var Pje=t=>{let{onClose:e,onSubmit:r}=t,n=()=>{e()},i=()=>{r()};return mu.default.createElement(mu.default.Fragment,null,mu.default.createElement(iv,{className:"vkf-dialog-confirm",show:!0,onHide:n},mu.default.createElement(iv.Header,null,mu.default.createElement(iv.Title,null,kr("georef-dialog-title"))),mu.default.createElement(iv.Body,null,mu.default.createElement("div",{className:"dialog-content"},mu.default.createElement("p",null,kr("georef-dialog-content")))),mu.default.createElement(iv.Footer,null,mu.default.createElement(Bd,{onClick:n},kr("georef-dialog-btn-cancel")),mu.default.createElement(Bd,{onClick:i,bsStyle:"primary"},kr("georef-dialog-btn-submit")))))};Pje.propTypes={onClose:LY.default.func.isRequired,onSubmit:LY.default.func.isRequired};var Rje=Pje;var Oje=Rje;p();var Q0=je(St(),1);p();p();p();var Lje={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},Dje={NONE:0,METADATA:1},Nje={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},kje={STANDARD:"STANDARD",DRAW:"DRAW",VECTOR_MAP_EXTERNAL:"VECTOR_MAP_EXTERNAL"};p();p();p();p();p();p();var Eo={id:"id",timeChanged:"time_changed",title:"title",thumbnailUrl:"thumb_url",bounds:"bounds",hasGeoReference:"has_georeference",tmsUrls:"tms_urls",onlineResources:"online_resources",mapScale:"map_scale",rawMapIds:"raw_map_ids",name:"name",description:"description",timePeriod:"time_period",externalContentUrl:"external_content_url",externalContentType:"external_content_type",type:"type",vectorMapId:"vector_map_id",version:"version",userRole:"user_role"};var MT={VKF:"vkf:geojson-spec-v1",IDOHIST:"idohist:idohist-v1"};p();p();var HD=je(St(),1);p();p();var CT=je(St(),1);var $D=je(ln(),1);var qje=(t,{sourceId:e,fillId:r,outlineId:n})=>{t.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:r,type:"fill",source:e,paint:{"fill-color":"#ff0000","fill-opacity":.2}}),t.addLayer({id:n,type:"line",source:e,paint:{"line-color":"#ff0000","line-width":1}})},frr=(t,{sourceId:e,fillId:r,outlineId:n})=>{t.getLayer(r)&&t.removeLayer(r),t.getLayer(n)&&t.removeLayer(n),t.getSource(e)&&t.removeSource(e)},Fje=t=>{let e=Gs(DY);return(0,CT.useEffect)(()=>{if(ti(e)){let r=()=>{qje(e,mt({},t))};return e._loaded?qje(e,mt({},t)):e.once("load",r),()=>{frr(e,mt({},t)),e.off("load",r)}}},[e]),CT.default.createElement(CT.default.Fragment,null)};Fje.propTypes={sourceId:$D.default.string.isRequired,fillId:$D.default.string.isRequired,outlineId:$D.default.string.isRequired};var jje=Fje;var zje=jje;var hrr="vkf-map-overlay-source",PT="vkf-map-overlay-fill",prr="vkf-map-overlay-outline";var drr=()=>HD.default.createElement(HD.default.Fragment,null,HD.default.createElement(zje,{sourceId:hrr,fillId:PT,outlineId:prr}));drr.propTypes={};p();p();p();p();p();p();p();var WD=class extends Date{constructor(){super(),this.setTime(arguments.length===0?Date.now():arguments.length===1?typeof arguments[0]=="string"?+new Date(arguments[0]):arguments[0]:Date.UTC(...arguments))}getTimezoneOffset(){return 0}},Bje=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(Bje.test(t)){let e=Date.prototype[t.replace(Bje,"$1UTC")];e&&(WD.prototype[t]=e)}});var gin=new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"UTC"}),vin=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),yin=new Intl.DateTimeFormat("en-GB",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC"});p();p();p();var Lr={SYMBOL:"symbol",LINE:"line",FILL:"fill",OUTLINE:"outline"},Vje={[Lr.LINE]:"line-opacity",[Lr.FILL]:"fill-opacity",[Lr.OUTLINE]:"outline-opacity"},vrr={[Lr.LINE]:"stroke-opacity",[Lr.FILL]:"fill-opacity",[Lr.OUTLINE]:"stroke-opacity"};var xn={[Lr.SYMBOL]:{COLOR:"#0000FF"},[Lr.LINE]:{COLOR:"#00FF00",WIDTH:3,OPACITY:1},[Lr.OUTLINE]:{COLOR:"#0000FF",WIDTH:1,OPACITY:1},[Lr.FILL]:{COLOR:"#FFFF00",OPACITY:.27}},yrr={[Lr.SYMBOL]:{type:"symbol",layout:{"icon-image":Oi.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["feature-state","marker"],["get","marker"],xn[Lr.SYMBOL].COLOR],"icon-halo-color":"#FFF","icon-halo-width":1},filter:["==",["geometry-type"],"Point"]},[Lr.LINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],xn[Lr.LINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],xn[Lr.LINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],xn[Lr.LINE].OPACITY]},filter:["==",["geometry-type"],"LineString"]},[Lr.OUTLINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],xn[Lr.OUTLINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],xn[Lr.OUTLINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],xn[Lr.OUTLINE].OPACITY]},filter:["==",["geometry-type"],"Polygon"]},[Lr.FILL]:{type:"fill",paint:{"fill-color":["coalesce",["feature-state","fill"],["get","fill"],xn[Lr.FILL].COLOR],"fill-opacity":["coalesce",["feature-state","fill-opacity"],["get","fill-opacity"],xn[Lr.FILL].OPACITY]},filter:["==",["geometry-type"],"Polygon"]}};var K0={imgLink:"img_link",title:"title",description:"description",time:"time",marker:"marker",fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity"};var Bin={Point:{marker:xn[Lr.SYMBOL].COLOR},MultiPoint:{marker:xn[Lr.SYMBOL].COLOR},Polygon:{fill:xn[Lr.FILL].COLOR,"fill-opacity":xn[Lr.FILL].OPACITY,stroke:xn[Lr.OUTLINE].COLOR,"stroke-opacity":xn[Lr.OUTLINE].OPACITY,"stroke-width":xn[Lr.OUTLINE].WIDTH},MultiPolygon:{fill:xn[Lr.FILL].COLOR,"fill-opacity":xn[Lr.FILL].OPACITY,stroke:xn[Lr.OUTLINE].COLOR,"stroke-opacity":xn[Lr.OUTLINE].OPACITY,"stroke-width":xn[Lr.OUTLINE].WIDTH},LineString:{stroke:xn[Lr.LINE].COLOR,"stroke-opacity":xn[Lr.LINE].OPACITY,"stroke-width":xn[Lr.LINE].WIDTH},MultiLineString:{stroke:xn[Lr.LINE].COLOR,"stroke-opacity":xn[Lr.LINE].OPACITY,"stroke-width":xn[Lr.LINE].WIDTH},GeometryCollection:{fill:xn[Lr.FILL].COLOR,"fill-opacity":xn[Lr.FILL].OPACITY,stroke:xn[Lr.LINE].COLOR,"stroke-opacity":xn[Lr.LINE].OPACITY,"stroke-width":xn[Lr.LINE].WIDTH}},_rr={marker:{type:"color"},fill:{type:"color"},"fill-opacity":{step:.05,min:0,max:1,type:"number"},stroke:{type:"color"},"stroke-opacity":{max:1,min:0,step:.05,type:"number"},"stroke-width":{step:.1,min:0,max:20,type:"number"}},Vin=Object.keys(_rr),Gin=[K0.time,K0.title,K0.imgLink,K0.description];p();p();p();p();p();var Arr=je(SL(),1);p();p();p();var zY="#00b19e",ZD="#00927E",X0={fill:.4,line:1},jY=["all",["==",["geometry-type"],"Polygon"],["==",["id"],"NON_EXISTING_ID"]],Gje={fill:{type:"fill",paint:{"fill-color":["coalesce",["get","idohist_light_color"],zY],"fill-opacity":X0.fill},filter:jY},outline:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],ZD],"line-width":2,"line-opacity":X0.line},filter:jY}},Trr={line:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],ZD],"line-width":2,"line-opacity":X0.line},filter:["==",["geometry-type"],"LineString"]},fill:{type:"fill",paint:{"fill-color":["coalesce",["get","idohist_light_color"],zY],"fill-opacity":X0.fill},filter:["==",["geometry-type"],"Polygon"]},outline:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],ZD],"line-width":2,"line-opacity":X0.line},filter:["==",["geometry-type"],"Polygon"]}};p();var RT={},UY="http://www.w3.org/2000/svg";typeof document!="undefined"&&(RT.svg=document.createElementNS(UY,"svg"),RT.arcs=document.createElementNS(UY,"g"),RT.arcs.classList.add("arcs"),RT.circle=document.createElementNS(UY,"circle"),RT.circle.classList.add("circle"));var Mrr=Symbol("vkf:feature-properties");var zon=typeof document!="undefined"?document.createElement("div"):{};p();p();var Crr=`${Eo.timePeriod}_start`,Prr=`${Eo.timePeriod}_end`;var rsn=[{label:"VKF",value:MT.VKF},{label:"IDOHIST",value:MT.IDOHIST}],Hje=t=>({[Eo.title]:t[Eo.title],[Eo.timePeriod]:t[Eo.timePeriod],[Eo.description]:t[Eo.description],[Eo.externalContentUrl]:t[Eo.externalContentUrl],[Eo.externalContentType]:t[Eo.externalContentType],[Eo.thumbnailUrl]:t[Eo.thumbnailUrl]});var fsn=Kr({key:"activeBasemapId",default:Oi.getSettings().BASEMAPS[0].id}),hsn=Kr({key:"currentApplicationState",default:void 0}),Rrr=Kr({key:"elementScreenSize",default:{map:{height:0,width:0}}});var psn=Kr({key:"facetState",default:{facets:[],georeference:!1}}),dsn=Kr({key:"layoutState",default:Nje.VERTICAL}),msn=Kr({key:"horizontalLayoutModeState",default:kje.STANDARD}),DY=Kr({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),gsn=Kr({key:"map3dState",default:!1}),vsn=Kr({key:"mapCountState",default:10}),ysn=Kr({key:"searchIsLoadingState",default:!1}),Orr=Kr({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),_sn=Kr({key:"selectedOriginalMapIdState",default:void 0}),Lrr=Kr({key:"selectedGeoJsonLayerIdState",default:void 0}),Drr=Kr({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),xsn=Xg({key:"selectedGeoJsonLayerState",get:({get:t})=>{let e=t(Lrr),r=t(Orr),n=t(Drr);return{selectedLayer:r.find(o=>o.getId()===e),lastUpdated:n}},dangerouslyAllowMutability:!0}),$je=Kr({key:"selectedGeoJsonFeatureIdentifierState",default:null}),bsn=Xg({key:"isGeoJsonFeatureSelectedState",get:({get:t})=>{let e=t($je);if(!ti(e))return!1;let{featureId:r,sourceId:n}=e;return ti(r)&&ti(n)}}),wsn=Kr({key:"timeExtentState",default:[1850,1970]}),Nrr=[1850,1970],Esn=Kr({key:"timeRangeState",default:Nrr}),Ssn=Kr({key:"baseMapStyleLayersState",default:[]}),Tsn=Kr({key:"activeDialogState",default:BOe.None}),Isn=Kr({key:"drawState",default:void 0}),Asn=Kr({key:"editedGeojsonState",default:null}),Msn=Kr({key:"metadataDrawState",default:null}),Csn=Kr({key:"vectorMapState",default:null}),krr=Kr({key:"vectorMapActiveVersionDrawState",default:null}),Psn=Xg({key:"isActiveVectorMapVersionDifferentState",get:({get:t})=>t(krr)!==null}),Rsn=Kr({key:"showDropZoneState",default:!1}),Osn=Kr({key:"addedFileState",default:null}),Lsn=Kr({key:"addGeoJsonDialogState",default:!1}),Dsn=Kr({key:"drawModePanelState",default:Lje.NONE}),Nsn=Kr({key:"vectorMapExternalModePanelState",default:Dje.NONE}),BY=Kr({key:"layerExternalVectorMapState",default:null,dangerouslyAllowMutability:!0}),Wje=Kr({key:"forceUpdateLayerExternalVectorMapState",default:0}),ksn=Xg({key:"metadataExternalVectorMapState",get:({get:t})=>{t(Wje);let e=t(BY);return ti(e)?Hje(e.getMetadata()):null},dangerouslyAllowMutability:!0}),qsn=Xg({key:"geojsonExternalVectorMapState",get:({get:t})=>{t(Wje);let e=t(BY);return ti(e)?e.getGeoJson():null},dangerouslyAllowMutability:!0}),Fsn=Xg({key:"layerIdExternalVectorMapState",get:({get:t})=>{let e=t(BY);return ti(e)?e.getId():null},dangerouslyAllowMutability:!0});function YD(t){let[e,r]=(0,Q0.useState)(t);return(0,Q0.useEffect)(()=>{r(t)},[t]),e}p();p();p();p();function ir(){return function(){throw new Error("Unimplemented abstract method.")}()}var qrr=0;function tr(t){return t.ol_uid||(t.ol_uid=String(++qrr))}var KD="6.15.1";var Frr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jrr=function(t){Frr(e,t);function e(r){var n=this,i=KD==="latest"?KD:"v"+KD.split("-")[0],o="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+r+" for details.";return n=t.call(this,o)||this,n.code=r,n.name="AssertionError",n.message=o,n}return e}(Error),XD=jrr;p();p();var zrr=function(){function t(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();var Ni=zrr;p();var dc={PROPERTYCHANGE:"propertychange"};p();p();p();var Urr=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}(),Wd=Urr;p();p();function Zje(t,e,r){for(var n,i,o=r||Pl,l=0,f=t.length,d=!1;l<f;)n=l+(f-l>>1),i=+o(t[n],e),i<0?l=n+1:(f=n,d=!i);return d?l:~l}function Pl(t,e){return t>e?1:t<e?-1:0}function J0(t,e){return t.indexOf(e)>=0}function ex(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return typeof r=="function"?r(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return n-1}function Yje(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function ta(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]}function Ua(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Kje(t,e,r){var n=e||Pl;return t.every(function(i,o){if(o===0)return!0;var l=n(t[o-1],i);return!(l>0||r&&l===0)})}function ds(){return!0}function gu(){return!1}function Rl(){}function Xje(t){var e=!1,r,n,i;return function(){var o=Array.prototype.slice.call(arguments);return(!e||this!==i||!Ua(o,n))&&(e=!0,i=this,n=o,r=t.apply(this,arguments)),r}}p();var Xr=typeof Object.assign=="function"?Object.assign:function(t,e){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(o!=null)for(var l in o)o.hasOwnProperty(l)&&(r[l]=o[l])}return r};function Ks(t){for(var e in t)delete t[e]}var QD=typeof Object.values=="function"?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};function mc(t){var e;for(e in t)return!1;return!e}var Brr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vrr=function(t){Brr(e,t);function e(r){var n=t.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return e.prototype.addEventListener=function(r,n){if(!(!r||!n)){var i=this.listeners_||(this.listeners_={}),o=i[r]||(i[r]=[]);o.indexOf(n)===-1&&o.push(n)}},e.prototype.dispatchEvent=function(r){var n=typeof r=="string",i=n?r:r.type,o=this.listeners_&&this.listeners_[i];if(o){var l=n?new Ni(r):r;l.target||(l.target=this.eventTarget_||this);var f=this.dispatching_||(this.dispatching_={}),d=this.pendingRemovals_||(this.pendingRemovals_={});i in f||(f[i]=0,d[i]=0),++f[i];for(var v,x=0,b=o.length;x<b;++x)if("handleEvent"in o[x]?v=o[x].handleEvent(l):v=o[x].call(this,l),v===!1||l.propagationStopped){v=!1;break}if(--f[i]===0){var A=d[i];for(delete d[i];A--;)this.removeEventListener(i,Rl);delete f[i]}return v}},e.prototype.disposeInternal=function(){this.listeners_&&Ks(this.listeners_)},e.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},e.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(r,n){var i=this.listeners_&&this.listeners_[r];if(i){var o=i.indexOf(n);o!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(i[o]=Rl,++this.pendingRemovals_[r]):(i.splice(o,1),i.length===0&&delete this.listeners_[r]))}},e}(Wd),Xs=Vrr;p();var Vt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};p();function qr(t,e,r,n,i){if(n&&n!==t&&(r=r.bind(n)),i){var o=r;r=function(){t.removeEventListener(e,r),o.apply(this,arguments)}}var l={target:t,type:e,listener:r};return t.addEventListener(e,r),l}function tx(t,e,r,n){return qr(t,e,r,n,!0)}function an(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Ks(t))}var Grr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JD=function(t){Grr(e,t);function e(){var r=t.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Vt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var i=r.length,o=new Array(i),l=0;l<i;++l)o[l]=qr(this,r[l],n);return o}else return qr(this,r,n)},e.prototype.onceInternal=function(r,n){var i;if(Array.isArray(r)){var o=r.length;i=new Array(o);for(var l=0;l<o;++l)i[l]=tx(this,r[l],n)}else i=tx(this,r,n);return n.ol_key=i,i},e.prototype.unInternal=function(r,n){var i=n.ol_key;if(i)$rr(i);else if(Array.isArray(r))for(var o=0,l=r.length;o<l;++o)this.removeEventListener(r[o],n);else this.removeEventListener(r,n)},e}(Xs);JD.prototype.on;JD.prototype.once;JD.prototype.un;function $rr(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)an(t[e]);else an(t)}var eN=JD;var Jje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qje=function(t){Jje(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.key=n,o.oldValue=i,o}return e}(Ni);var Hrr=function(t){Jje(e,t);function e(r){var n=t.call(this)||this;return n.on,n.once,n.un,tr(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return e.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Xr({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(r,n){var i;i="change:".concat(r),this.hasListener(i)&&this.dispatchEvent(new Qje(i,r,n)),i=dc.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Qje(i,r,n))},e.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},e.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},e.prototype.set=function(r,n,i){var o=this.values_||(this.values_={});if(i)o[r]=n;else{var l=o[r];o[r]=n,l!==n&&this.notify(r,l)}},e.prototype.setProperties=function(r,n){for(var i in r)this.set(i,r[i],n)},e.prototype.applyProperties=function(r){r.values_&&Xr(this.values_||(this.values_={}),r.values_)},e.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var i=this.values_[r];delete this.values_[r],mc(this.values_)&&(this.values_=null),n||this.notify(r,i)}},e}(eN),So=Hrr;p();var di={ADD:"add",REMOVE:"remove"};var tze=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eze={LENGTH:"length"},tN=function(t){tze(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.element=n,o.index=i,o}return e}(Ni);var Wrr=function(t){tze(e,t);function e(r,n){var i=t.call(this)||this;i.on,i.once,i.un;var o=n||{};if(i.unique_=!!o.unique,i.array_=r||[],i.unique_)for(var l=0,f=i.array_.length;l<f;++l)i.assertUnique_(i.array_[l],l);return i.updateLength_(),i}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(r){for(var n=0,i=r.length;n<i;++n)this.push(r[n]);return this},e.prototype.forEach=function(r){for(var n=this.array_,i=0,o=n.length;i<o;++i)r(n[i],i,n)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(r){return this.array_[r]},e.prototype.getLength=function(){return this.get(eze.LENGTH)},e.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new tN(di.ADD,n,r))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},e.prototype.remove=function(r){for(var n=this.array_,i=0,o=n.length;i<o;++i)if(n[i]===r)return this.removeAt(i)},e.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new tN(di.REMOVE,n,r)),n},e.prototype.setAt=function(r,n){var i=this.getLength();if(r<i){this.unique_&&this.assertUnique_(n,r);var o=this.array_[r];this.array_[r]=n,this.dispatchEvent(new tN(di.REMOVE,o,r)),this.dispatchEvent(new tN(di.ADD,n,r))}else{for(var l=i;l<r;++l)this.insertAt(l,void 0);this.insertAt(r,n)}},e.prototype.updateLength_=function(){this.set(eze.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(r,n){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===r&&i!==n)throw new XD(58)},e}(So),ni=Wrr;p();p();function or(t,e){if(!t)throw new XD(e)}var Zrr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yrr=function(t){Zrr(e,t);function e(r){var n=t.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),r)if(typeof r.getSimplifiedGeometry=="function"){var i=r;n.setGeometry(i)}else{var o=r;n.setProperties(o)}return n}return e.prototype.clone=function(){var r=new e(this.hasProperties()?this.getProperties():null);r.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&r.setGeometry(n.clone());var i=this.getStyle();return i&&r.setStyle(i),r},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(an(this.geometryChangeKey_),this.geometryChangeKey_=null);var r=this.getGeometry();r&&(this.geometryChangeKey_=qr(r,Vt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(r){this.set(this.geometryName_,r)},e.prototype.setStyle=function(r){this.style_=r,this.styleFunction_=r?Krr(r):void 0,this.changed()},e.prototype.setId=function(r){this.id_=r,this.changed()},e.prototype.setGeometryName=function(r){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=r,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(So);function Krr(t){if(typeof t=="function")return t;var e;if(Array.isArray(t))e=t;else{or(typeof t.getZIndex=="function",41);var r=t;e=[r]}return function(){return e}}var Ol=Yrr;p();p();p();p();var gc={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Qln={9001:gc.METERS,9002:gc.FEET,9003:gc.USFEET,9101:gc.RADIANS,9102:gc.DEGREES};var Ba={};Ba[gc.RADIANS]=6370997/(2*Math.PI);Ba[gc.DEGREES]=2*Math.PI*6370997/360;Ba[gc.FEET]=.3048;Ba[gc.METERS]=1;Ba[gc.USFEET]=1200/3937;var Va=gc;p();p();var Zd=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",rze=Zd.indexOf("firefox")!==-1,Xrr=Zd.indexOf("safari")!==-1&&Zd.indexOf("chrom")==-1,nze=Xrr&&!!(Zd.indexOf("version/15.4")>=0||Zd.match(/cpu (os|iphone os) 15_4 like mac os x/)),ize=Zd.indexOf("webkit")!==-1&&Zd.indexOf("edge")==-1,oze=Zd.indexOf("macintosh")!==-1,rN=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,Yd=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,aze=typeof Image!="undefined"&&Image.prototype.decode,nN=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(r){}return t}();var VY=new Array(6);function Ui(){return[1,0,0,1,0,0]}function rx(t){return OT(t,1,0,0,1,0,0)}function GY(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],l=t[4],f=t[5],d=e[0],v=e[1],x=e[2],b=e[3],A=e[4],P=e[5];return t[0]=r*d+i*v,t[1]=n*d+o*v,t[2]=r*x+i*b,t[3]=n*x+o*b,t[4]=r*A+i*P+l,t[5]=n*A+o*P+f,t}function OT(t,e,r,n,i,o,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=l,t}function lze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function $n(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function iN(t,e){var r=Math.cos(e),n=Math.sin(e);return GY(t,OT(VY,r,n,-n,r,0,0))}function LT(t,e,r){return GY(t,OT(VY,e,0,0,r,0,0))}function uze(t,e,r){return OT(t,e,0,0,r,0,0)}function cze(t,e,r){return GY(t,OT(VY,1,0,0,1,e,r))}function To(t,e,r,n,i,o,l,f){var d=Math.sin(o),v=Math.cos(o);return t[0]=n*v,t[1]=i*d,t[2]=-n*d,t[3]=i*v,t[4]=l*n*v-f*n*d+e,t[5]=l*i*d+f*i*v+r,t}function nx(t,e){var r=Qrr(e);or(r!==0,32);var n=e[0],i=e[1],o=e[2],l=e[3],f=e[4],d=e[5];return t[0]=l/r,t[1]=-i/r,t[2]=-o/r,t[3]=n/r,t[4]=(o*d-l*f)/r,t[5]=-(n*d-i*f)/r,t}function Qrr(t){return t[0]*t[3]-t[1]*t[2]}var sze;function oN(t){var e="matrix("+t.join(", ")+")";if(Yd)return e;var r=sze||(sze=document.createElement("div"));return r.style.transform=e,r.style.transform}p();p();var Io={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ea(t){for(var e=Bi(),r=0,n=t.length;r<n;++r)ov(e,t[r]);return e}function Jrr(t,e,r){var n=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),l=Math.max.apply(null,e);return Ga(n,i,o,l,r)}function vc(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function sN(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Qs(t,e,r){var n,i;return e<t[0]?n=t[0]-e:t[2]<e?n=e-t[2]:n=0,r<t[1]?i=t[1]-r:t[3]<r?i=r-t[3]:i=0,n*n+i*i}function ms(t,e){return DT(t,e[0],e[1])}function Fh(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function DT(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function aN(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],l=e[0],f=e[1],d=Io.UNKNOWN;return l<r?d=d|Io.LEFT:l>i&&(d=d|Io.RIGHT),f<n?d=d|Io.BELOW:f>o&&(d=d|Io.ABOVE),d===Io.UNKNOWN&&(d=Io.INTERSECTING),d}function Bi(){return[1/0,1/0,-1/0,-1/0]}function Ga(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function Kd(t){return Ga(1/0,1/0,-1/0,-1/0,t)}function ix(t,e){var r=t[0],n=t[1];return Ga(r,n,r,n,e)}function lN(t,e,r,n,i){var o=Kd(i);return $Y(o,t,e,r,n)}function jh(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function uN(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function ov(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function $Y(t,e,r,n,i){for(;r<n;r+=i)enr(t,e[r],e[r+1]);return t}function enr(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function ox(t,e){var r;return r=e(ax(t)),r||(r=e(sx(t)),r)||(r=e(lx(t)),r)||(r=e(yu(t)),r)?r:!1}function NT(t){var e=0;return av(t)||(e=gn(t)*zo(t)),e}function ax(t){return[t[0],t[1]]}function sx(t){return[t[2],t[1]]}function Js(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function fze(t,e){var r;return e==="bottom-left"?r=ax(t):e==="bottom-right"?r=sx(t):e==="top-left"?r=yu(t):e==="top-right"?r=lx(t):or(!1,13),r}function kT(t,e,r,n,i){var o=cN(t,e,r,n),l=o[0],f=o[1],d=o[2],v=o[3],x=o[4],b=o[5],A=o[6],P=o[7];return Ga(Math.min(l,d,x,A),Math.min(f,v,b,P),Math.max(l,d,x,A),Math.max(f,v,b,P),i)}function cN(t,e,r,n){var i=e*n[0]/2,o=e*n[1]/2,l=Math.cos(r),f=Math.sin(r),d=i*l,v=i*f,x=o*l,b=o*f,A=t[0],P=t[1];return[A-d+b,P-v-x,A-d-b,P-v+x,A+d-b,P+v+x,A+d+b,P+v-x,A-d+b,P-v-x]}function zo(t){return t[3]-t[1]}function vu(t,e,r){var n=r||Bi();return ki(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Kd(n),n}function yu(t){return[t[0],t[3]]}function lx(t){return[t[2],t[3]]}function gn(t){return t[2]-t[0]}function ki(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function av(t){return t[2]<t[0]||t[3]<t[1]}function hze(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function pze(t,e,r){var n=!1,i=aN(t,e),o=aN(t,r);if(i===Io.INTERSECTING||o===Io.INTERSECTING)n=!0;else{var l=t[0],f=t[1],d=t[2],v=t[3],x=e[0],b=e[1],A=r[0],P=r[1],N=(P-b)/(A-x),j=void 0,D=void 0;o&Io.ABOVE&&!(i&Io.ABOVE)&&(j=A-(P-v)/N,n=j>=l&&j<=d),!n&&o&Io.RIGHT&&!(i&Io.RIGHT)&&(D=P-(A-d)*N,n=D>=f&&D<=v),!n&&o&Io.BELOW&&!(i&Io.BELOW)&&(j=A-(P-f)/N,n=j>=l&&j<=d),!n&&o&Io.LEFT&&!(i&Io.LEFT)&&(D=P-(A-l)*N,n=D>=f&&D<=v)}return n}function dze(t,e,r,n){var i=[];if(n>1)for(var o=t[2]-t[0],l=t[3]-t[1],f=0;f<n;++f)i.push(t[0]+o*f/n,t[1],t[2],t[1]+l*f/n,t[2]-o*f/n,t[3],t[0],t[3]-l*f/n);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var d=[],v=[],f=0,x=i.length;f<x;f+=2)d.push(i[f]),v.push(i[f+1]);return Jrr(d,v,r)}function HY(t,e){var r=e.getExtent(),n=Js(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=gn(r),o=Math.floor((n[0]-r[0])/i),l=o*i;t[0]-=l,t[2]-=l}return t}function mze(t,e){if(e.canWrapX()){var r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];HY(t,e);var n=gn(r);if(gn(t)>n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+n,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-n,t[3]]]}return[t]}p();p();var tnr=function(){function t(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ba[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},t.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},t.prototype.setWorldExtent=function(e){this.worldExtent_=e},t.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),fN=tnr;p();p();function Zn(t,e,r){return Math.min(Math.max(t,e),r)}var gze=function(){var t;return"cosh"in Math?t=Math.cosh:t=function(e){var r=Math.exp(e);return(r+1/r)/2},t}(),hN=function(){var t;return"log2"in Math?t=Math.log2:t=function(e){return Math.log(e)*Math.LOG2E},t}();function vze(t,e,r,n,i,o){var l=i-r,f=o-n;if(l!==0||f!==0){var d=((t-r)*l+(e-n)*f)/(l*l+f*f);d>1?(r=i,n=o):d>0&&(r+=l*d,n+=f*d)}return yc(t,e,r,n)}function yc(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function yze(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var l=Math.abs(t[o][r]);l>i&&(i=l,n=o)}if(i===0)return null;var f=t[n];t[n]=t[r],t[r]=f;for(var d=r+1;d<e;d++)for(var v=-t[d][r]/t[r][r],x=r;x<e+1;x++)r==x?t[d][x]=0:t[d][x]+=v*t[r][x]}for(var b=new Array(e),A=e-1;A>=0;A--){b[A]=t[A][e]/t[A][A];for(var P=A-1;P>=0;P--)t[P][e]-=t[P][A]*b[A]}return b}function ux(t){return t*Math.PI/180}function Ll(t,e){var r=t%e;return r*e<0?r+e:r}function _u(t,e,r){return t+r*(e-t)}function _ze(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}function qT(t,e){return Math.floor(_ze(t,e))}function FT(t,e){return Math.ceil(_ze(t,e))}var rnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jT=6378137,fx=Math.PI*jT,nnr=[-fx,-fx,fx,fx],inr=[-180,-85,180,85],pN=jT*Math.log(Math.tan(Math.PI/2)),cx=function(t){rnr(e,t);function e(r){return t.call(this,{code:r,units:Va.METERS,extent:nnr,global:!0,worldExtent:inr,getPointResolution:function(n,i){return n/gze(i[1]/jT)}})||this}return e}(fN),WY=[new cx("EPSG:3857"),new cx("EPSG:102100"),new cx("EPSG:102113"),new cx("EPSG:900913"),new cx("http://www.opengis.net/def/crs/EPSG/0/3857"),new cx("http://www.opengis.net/gml/srs/epsg.xml#3857")];function xze(t,e,r){var n=t.length,i=r>1?r:2,o=e;o===void 0&&(i>2?o=t.slice():o=new Array(n));for(var l=0;l<n;l+=i){o[l]=fx*t[l]/180;var f=jT*Math.log(Math.tan(Math.PI*(+t[l+1]+90)/360));f>pN?f=pN:f<-pN&&(f=-pN),o[l+1]=f}return o}function bze(t,e,r){var n=t.length,i=r>1?r:2,o=e;o===void 0&&(i>2?o=t.slice():o=new Array(n));for(var l=0;l<n;l+=i)o[l]=180*t[l]/fx,o[l+1]=360*Math.atan(Math.exp(t[l+1]/jT))/Math.PI-90;return o}p();var onr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),anr=6378137,wze=[-180,-90,180,90],snr=Math.PI*anr/180,sv=function(t){onr(e,t);function e(r,n){return t.call(this,{code:r,units:Va.DEGREES,extent:wze,axisOrientation:n,global:!0,metersPerUnit:snr,worldExtent:wze})||this}return e}(fN),ZY=[new sv("CRS:84"),new sv("EPSG:4326","neu"),new sv("urn:ogc:def:crs:OGC:1.3:CRS84"),new sv("urn:ogc:def:crs:OGC:2:84"),new sv("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new sv("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new sv("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];p();var YY={};function Eze(t){return YY[t]||YY[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Sze(t,e){YY[t]=e}p();var hx={};function zT(t,e,r){var n=t.getCode(),i=e.getCode();n in hx||(hx[n]={}),hx[n][i]=r}function Tze(t,e){var r;return t in hx&&e in hx[t]&&(r=hx[t][e]),r}p();p();function Ize(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),l=parseInt(n[i]||"0",10);if(o>l)return 1;if(l>o)return-1}return 0}function Aze(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function KY(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],l=i[0],f=i[1],d=o[0],v=o[1],x=d-l,b=v-f,A=x===0&&b===0?0:(x*(r-l)+b*(n-f))/(x*x+b*b||0),P,N;return A<=0?(P=l,N=f):A>=1?(P=d,N=v):(P=l+A*x,N=f+A*b),[P,N]}function gs(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function px(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t}function Mze(t,e){return t[0]*=e,t[1]*=e,t}function Xd(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function XY(t,e){return Math.sqrt(Xd(t,e))}function Cze(t,e){return Xd(t,KY(t,e))}function dN(t,e){if(e.canWrapX()){var r=gn(e.getExtent()),n=Pze(t,e,r);n&&(t[0]-=n*r)}return t}function Pze(t,e,r){var n=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])){var o=r||gn(n);i=Math.floor((t[0]-n[0])/o)}return i}p();var lnr=6371008.8;function QY(t,e,r){var n=r||lnr,i=ux(t[1]),o=ux(e[1]),l=(o-i)/2,f=ux(e[0]-t[0])/2,d=Math.sin(l)*Math.sin(l)+Math.sin(f)*Math.sin(f)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}var JY=!0;function Oze(t){var e=t===void 0?!0:t;JY=!e}function e9(t,e,r){var n;if(e!==void 0){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];n=e}else n=t.slice();return n}function Lze(t,e,r){if(e!==void 0&&t!==e){for(var n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function unr(t){Sze(t.getCode(),t),zT(t,t,e9)}function cnr(t){t.forEach(unr)}function ii(t){return typeof t=="string"?Eze(t):t||null}function t9(t,e,r,n){t=ii(t);var i,o=t.getPointResolutionFunc();if(o){if(i=o(e,r),n&&n!==t.getUnits()){var l=t.getMetersPerUnit();l&&(i=i*l/Ba[n])}}else{var f=t.getUnits();if(f==Va.DEGREES&&!n||n==Va.DEGREES)i=e;else{var d=UT(t,ii("EPSG:4326"));if(d===Lze&&f!==Va.DEGREES)i=e*t.getMetersPerUnit();else{var v=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];v=d(v,v,2);var x=QY(v.slice(0,2),v.slice(2,4)),b=QY(v.slice(4,6),v.slice(6,8));i=(x+b)/2}var l=n?Ba[n]:t.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function Rze(t){cnr(t),t.forEach(function(e){t.forEach(function(r){e!==r&&zT(e,r,e9)})})}function fnr(t,e,r,n){t.forEach(function(i){e.forEach(function(o){zT(i,o,r),zT(o,i,n)})})}function mN(t,e){return t?typeof t=="string"?ii(t):t:ii(e)}function _f(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return r;var n=UT(t,e);return n===e9&&r}function UT(t,e){var r=t.getCode(),n=e.getCode(),i=Tze(r,n);return i||(i=Lze),i}function lv(t,e){var r=ii(t),n=ii(e);return UT(r,n)}function xc(t,e,r){var n=lv(e,r);return n(t,void 0,t.length)}function uv(t,e,r,n){var i=lv(e,r);return dze(t,i,void 0,n)}var _c=null;function xu(){return _c}function Qd(t,e){return _c?xc(t,e,_c):t}function Si(t,e){return _c?xc(t,_c,e):(JY&&!gs(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(JY=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Jd(t,e){return _c?uv(t,e,_c):t}function $a(t,e){return _c?uv(t,_c,e):t}function Dze(t,e){if(!_c)return t;var r=ii(e).getUnits(),n=_c.getUnits();return r&&n?t*Ba[r]/Ba[n]:t}function hnr(){Rze(WY),Rze(ZY),fnr(ZY,WY,xze,bze)}hnr();p();function bu(t,e,r,n,i,o){for(var l=o||[],f=0,d=e;d<r;d+=n){var v=t[d],x=t[d+1];l[f++]=i[0]*v+i[2]*x+i[4],l[f++]=i[1]*v+i[3]*x+i[5]}return o&&l.length!=f&&(l.length=f),l}function dx(t,e,r,n,i,o,l){for(var f=l||[],d=Math.cos(i),v=Math.sin(i),x=o[0],b=o[1],A=0,P=e;P<r;P+=n){var N=t[P]-x,j=t[P+1]-b;f[A++]=x+N*d-j*v,f[A++]=b+N*v+j*d;for(var D=P+2;D<P+n;++D)f[A++]=t[D]}return l&&f.length!=A&&(f.length=A),f}function Nze(t,e,r,n,i,o,l,f){for(var d=f||[],v=l[0],x=l[1],b=0,A=e;A<r;A+=n){var P=t[A]-v,N=t[A+1]-x;d[b++]=v+i*P,d[b++]=x+o*N;for(var j=A+2;j<A+n;++j)d[b++]=t[j]}return f&&d.length!=b&&(d.length=b),d}function gN(t,e,r,n,i,o,l){for(var f=l||[],d=0,v=e;v<r;v+=n){f[d++]=t[v]+i,f[d++]=t[v+1]+o;for(var x=v+2;x<v+n;++x)f[d++]=t[x]}return l&&f.length!=d&&(f.length=d),f}var pnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kze=Ui(),dnr=function(t){pnr(e,t);function e(){var r=t.call(this)||this;return r.extent_=Bi(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=Xje(function(n,i,o){if(!o)return this.getSimplifiedGeometry(i);var l=this.clone();return l.applyTransform(o),l.getSimplifiedGeometry(i)}),r}return e.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},e.prototype.clone=function(){return ir()},e.prototype.closestPointXY=function(r,n,i,o){return ir()},e.prototype.containsXY=function(r,n){var i=this.getClosestPoint([r,n]);return i[0]===r&&i[1]===n},e.prototype.getClosestPoint=function(r,n){var i=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],i,1/0),i},e.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},e.prototype.computeExtent=function(r){return ir()},e.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Kd(n),this.extentRevision_=this.getRevision()}return hze(this.extent_,r)},e.prototype.rotate=function(r,n){ir()},e.prototype.scale=function(r,n,i){ir()},e.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},e.prototype.getSimplifiedGeometry=function(r){return ir()},e.prototype.getType=function(){return ir()},e.prototype.applyTransform=function(r){ir()},e.prototype.intersectsExtent=function(r){return ir()},e.prototype.translate=function(r,n){ir()},e.prototype.transform=function(r,n){var i=ii(r),o=i.getUnits()==Va.TILE_PIXELS?function(l,f,d){var v=i.getExtent(),x=i.getWorldExtent(),b=zo(x)/zo(v);return To(kze,x[0],x[3],b,-b,0,0,0),bu(l,0,l.length,d,kze,f),lv(i,n)(l,f,d)}:lv(i,n);return this.applyTransform(o),this},e}(So),vN=dnr;var mnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gnr=function(t){mnr(e,t);function e(r){var n=t.call(this)||this;return n.geometries_=r||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(an),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var r=0,n=this.geometries_.length;r<n;++r)this.changeEventsKeys_.push(qr(this.geometries_[r],Vt.CHANGE,this.changed,this))},e.prototype.clone=function(){var r=new e(null);return r.setGeometries(this.geometries_),r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){if(o<Qs(this.getExtent(),r,n))return o;for(var l=this.geometries_,f=0,d=l.length;f<d;++f)o=l[f].closestPointXY(r,n,i,o);return o},e.prototype.containsXY=function(r,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)if(i[o].containsXY(r,n))return!0;return!1},e.prototype.computeExtent=function(r){Kd(r);for(var n=this.geometries_,i=0,o=n.length;i<o;++i)uN(r,n[i].getExtent());return r},e.prototype.getGeometries=function(){return qze(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var r=[],n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].getType()===this.getType()?r=r.concat(n[i].getGeometriesArrayRecursive()):r.push(n[i]);return r},e.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],i=this.geometries_,o=!1,l=0,f=i.length;l<f;++l){var d=i[l],v=d.getSimplifiedGeometry(r);n.push(v),v!==d&&(o=!0)}if(o){var x=new e(null);return x.setGeometriesArray(n),x}else return this.simplifiedGeometryMaxMinSquaredTolerance=r,this},e.prototype.getType=function(){return"GeometryCollection"},e.prototype.intersectsExtent=function(r){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)if(n[i].intersectsExtent(r))return!0;return!1},e.prototype.isEmpty=function(){return this.geometries_.length===0},e.prototype.rotate=function(r,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)i[o].rotate(r,n);this.changed()},e.prototype.scale=function(r,n,i){var o=i;o||(o=Js(this.getExtent()));for(var l=this.geometries_,f=0,d=l.length;f<d;++f)l[f].scale(r,n,o);this.changed()},e.prototype.setGeometries=function(r){this.setGeometriesArray(qze(r))},e.prototype.setGeometriesArray=function(r){this.unlistenGeometriesChange_(),this.geometries_=r,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(r){for(var n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].applyTransform(r);this.changed()},e.prototype.translate=function(r,n){for(var i=this.geometries_,o=0,l=i.length;o<l;++o)i[o].translate(r,n);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(vN);function qze(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}var Fze=gnr;p();p();var vnr=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(e,r){var n;if(r){var i=r.dataProjection?ii(r.dataProjection):this.readProjection(e);r.extent&&i&&i.getUnits()===Va.TILE_PIXELS&&(i=ii(i),i.setWorldExtent(r.extent)),n={dataProjection:i,featureProjection:r.featureProjection}}return this.adaptOptions(n)},t.prototype.adaptOptions=function(e){return Xr({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},t.prototype.getType=function(){return ir()},t.prototype.readFeature=function(e,r){return ir()},t.prototype.readFeatures=function(e,r){return ir()},t.prototype.readGeometry=function(e,r){return ir()},t.prototype.readProjection=function(e){return ir()},t.prototype.writeFeature=function(e,r){return ir()},t.prototype.writeFeatures=function(e,r){return ir()},t.prototype.writeGeometry=function(e,r){return ir()},t}(),jze=vnr;function r9(t,e,r){var n=r?ii(r.featureProjection):null,i=r?ii(r.dataProjection):null,o;if(n&&i&&!_f(n,i)?o=(e?t.clone():t).transform(e?n:i,e?i:n):o=t,e&&r&&r.decimals!==void 0){var l=Math.pow(10,r.decimals),f=function(d){for(var v=0,x=d.length;v<x;++v)d[v]=Math.round(d[v]*l)/l;return d};o===t&&(o=t.clone()),o.applyTransform(f)}return o}var ynr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_nr=function(t){ynr(e,t);function e(){return t.call(this)||this}return e.prototype.getType=function(){return"json"},e.prototype.readFeature=function(r,n){return this.readFeatureFromObject(yN(r),this.getReadOptions(r,n))},e.prototype.readFeatures=function(r,n){return this.readFeaturesFromObject(yN(r),this.getReadOptions(r,n))},e.prototype.readFeatureFromObject=function(r,n){return ir()},e.prototype.readFeaturesFromObject=function(r,n){return ir()},e.prototype.readGeometry=function(r,n){return this.readGeometryFromObject(yN(r),this.getReadOptions(r,n))},e.prototype.readGeometryFromObject=function(r,n){return ir()},e.prototype.readProjection=function(r){return this.readProjectionFromObject(yN(r))},e.prototype.readProjectionFromObject=function(r){return ir()},e.prototype.writeFeature=function(r,n){return JSON.stringify(this.writeFeatureObject(r,n))},e.prototype.writeFeatureObject=function(r,n){return ir()},e.prototype.writeFeatures=function(r,n){return JSON.stringify(this.writeFeaturesObject(r,n))},e.prototype.writeFeaturesObject=function(r,n){return ir()},e.prototype.writeGeometry=function(r,n){return JSON.stringify(this.writeGeometryObject(r,n))},e.prototype.writeGeometryObject=function(r,n){return ir()},e}(jze);function yN(t){if(typeof t=="string"){var e=JSON.parse(t);return e||null}else return t!==null?t:null}var zze=_nr;p();p();var Yn={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};p();var xnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bnr=function(t){xnr(e,t);function e(){var r=t.call(this)||this;return r.layout=Yn.XY,r.stride=2,r.flatCoordinates=null,r}return e.prototype.computeExtent=function(r){return lN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},e.prototype.getCoordinates=function(){return ir()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},e.prototype.getSimplifiedGeometryInternal=function(r){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(r,n){this.stride=BT(r),this.layout=r,this.flatCoordinates=n},e.prototype.setCoordinates=function(r,n){ir()},e.prototype.setLayout=function(r,n,i){var o;if(r)o=BT(r);else{for(var l=0;l<i;++l)if(n.length===0){this.layout=Yn.XY,this.stride=2;return}else n=n[0];o=n.length,r=wnr(o)}this.layout=r,this.stride=o},e.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(r,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();dx(i,0,i.length,o,r,n,i),this.changed()}},e.prototype.scale=function(r,n,i){var o=n;o===void 0&&(o=r);var l=i;l||(l=Js(this.getExtent()));var f=this.getFlatCoordinates();if(f){var d=this.getStride();Nze(f,0,f.length,d,r,o,l,f),this.changed()}},e.prototype.translate=function(r,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();gN(i,0,i.length,o,r,n,i),this.changed()}},e}(vN);function wnr(t){var e;return t==2?e=Yn.XY:t==3?e=Yn.XYZ:t==4&&(e=Yn.XYZM),e}function BT(t){var e;return t==Yn.XY?e=2:t==Yn.XYZ||t==Yn.XYM?e=3:t==Yn.XYZM&&(e=4),e}function Uze(t,e,r){var n=t.getFlatCoordinates();if(n){var i=t.getStride();return bu(n,0,n.length,i,e,r)}else return null}var Ha=bnr;p();function Bze(t,e,r,n,i,o,l){var f=t[e],d=t[e+1],v=t[r]-f,x=t[r+1]-d,b;if(v===0&&x===0)b=e;else{var A=((i-f)*v+(o-d)*x)/(v*v+x*x);if(A>1)b=r;else if(A>0){for(var P=0;P<n;++P)l[P]=_u(t[e+P],t[r+P],A);l.length=n;return}else b=e}for(var P=0;P<n;++P)l[P]=t[b+P];l.length=n}function VT(t,e,r,n,i){var o=t[e],l=t[e+1];for(e+=n;e<r;e+=n){var f=t[e],d=t[e+1],v=yc(o,l,f,d);v>i&&(i=v),o=f,l=d}return i}function GT(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){var f=r[o];i=VT(t,e,f,n,i),e=f}return i}function Vze(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){var f=r[o];i=GT(t,e,f,n,i),e=f[f.length-1]}return i}function $T(t,e,r,n,i,o,l,f,d,v,x){if(e==r)return v;var b,A;if(i===0)if(A=yc(l,f,t[e],t[e+1]),A<v){for(b=0;b<n;++b)d[b]=t[e+b];return d.length=n,A}else return v;for(var P=x||[NaN,NaN],N=e+n;N<r;)if(Bze(t,N-n,N,n,l,f,P),A=yc(l,f,P[0],P[1]),A<v){for(v=A,b=0;b<n;++b)d[b]=P[b];d.length=n,N+=n}else N+=n*Math.max((Math.sqrt(A)-Math.sqrt(v))/i|0,1);if(o&&(Bze(t,r-n,e,n,l,f,P),A=yc(l,f,P[0],P[1]),A<v)){for(v=A,b=0;b<n;++b)d[b]=P[b];d.length=n}return v}function HT(t,e,r,n,i,o,l,f,d,v,x){for(var b=x||[NaN,NaN],A=0,P=r.length;A<P;++A){var N=r[A];v=$T(t,e,N,n,i,o,l,f,d,v,b),e=N}return v}function Gze(t,e,r,n,i,o,l,f,d,v,x){for(var b=x||[NaN,NaN],A=0,P=r.length;A<P;++A){var N=r[A];v=HT(t,e,N,n,i,o,l,f,d,v,b),e=N[N.length-1]}return v}p();function _N(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e}function cv(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var l=r[i],f=0;f<n;++f)t[e++]=l[f];return e}function WT(t,e,r,n,i){for(var o=i||[],l=0,f=0,d=r.length;f<d;++f){var v=cv(t,e,r[f],n);o[l++]=v,e=v}return o.length=l,o}function $ze(t,e,r,n,i){for(var o=i||[],l=0,f=0,d=r.length;f<d;++f){var v=WT(t,e,r[f],n,o[l]);o[l++]=v,e=v[v.length-1]}return o.length=l,o}p();function ZT(t,e,r,n,i,o,l){var f=(r-e)/n;if(f<3){for(;e<r;e+=n)o[l++]=t[e],o[l++]=t[e+1];return l}var d=new Array(f);d[0]=1,d[f-1]=1;for(var v=[e,r-n],x=0;v.length>0;){for(var b=v.pop(),A=v.pop(),P=0,N=t[A],j=t[A+1],D=t[b],F=t[b+1],U=A+n;U<b;U+=n){var $=t[U],Z=t[U+1],ie=vze($,Z,N,j,D,F);ie>P&&(x=U,P=ie)}P>i&&(d[(x-e)/n]=1,A+n<x&&v.push(A,x),x+n<b&&v.push(x,b))}for(var U=0;U<f;++U)d[U]&&(o[l++]=t[e+U*n],o[l++]=t[e+U*n+1]);return l}function Hze(t,e,r,n,i,o,l,f){for(var d=0,v=r.length;d<v;++d){var x=r[d];l=ZT(t,e,x,n,i,o,l),f.push(l),e=x}return l}function em(t,e){return e*Math.round(t/e)}function Enr(t,e,r,n,i,o,l){if(e==r)return l;var f=em(t[e],i),d=em(t[e+1],i);e+=n,o[l++]=f,o[l++]=d;var v,x;do if(v=em(t[e],i),x=em(t[e+1],i),e+=n,e==r)return o[l++]=v,o[l++]=x,l;while(v==f&&x==d);for(;e<r;){var b=em(t[e],i),A=em(t[e+1],i);if(e+=n,!(b==v&&A==x)){var P=v-f,N=x-d,j=b-f,D=A-d;if(P*D==N*j&&(P<0&&j<P||P==j||P>0&&j>P)&&(N<0&&D<N||N==D||N>0&&D>N)){v=b,x=A;continue}o[l++]=v,o[l++]=x,f=v,d=x,v=b,x=A}}return o[l++]=v,o[l++]=x,l}function n9(t,e,r,n,i,o,l,f){for(var d=0,v=r.length;d<v;++d){var x=r[d];l=Enr(t,e,x,n,i,o,l),f.push(l),e=x}return l}function Wze(t,e,r,n,i,o,l,f){for(var d=0,v=r.length;d<v;++d){var x=r[d],b=[];l=n9(t,e,x,n,i,o,l,b),f.push(b),e=x[x.length-1]}return l}p();function xN(t,e,r,n,i){var o;for(e+=n;e<r;e+=n)if(o=i(t.slice(e-n,e),t.slice(e,e+n)),o)return o;return!1}p();function wu(t,e,r,n,i){for(var o=i!==void 0?i:[],l=0,f=e;f<r;f+=n)o[l++]=t.slice(f,f+n);return o.length=l,o}function tm(t,e,r,n,i){for(var o=i!==void 0?i:[],l=0,f=0,d=r.length;f<d;++f){var v=r[f];o[l++]=wu(t,e,v,n,o[l]),e=v}return o.length=l,o}function YT(t,e,r,n,i){for(var o=i!==void 0?i:[],l=0,f=0,d=r.length;f<d;++f){var v=r[f];o[l++]=tm(t,e,v,n,o[l]),e=v[v.length-1]}return o.length=l,o}p();function wN(t,e,r,n,i,o,l){var f,d,v=(r-e)/n;if(v===1)f=e;else if(v===2)f=e,d=i;else if(v!==0){for(var x=t[e],b=t[e+1],A=0,P=[0],N=e+n;N<r;N+=n){var j=t[N],D=t[N+1];A+=Math.sqrt((j-x)*(j-x)+(D-b)*(D-b)),P.push(A),x=j,b=D}var F=i*A,U=Zje(P,F);U<0?(d=(F-P[-U-2])/(P[-U-1]-P[-U-2]),f=e+(-U-2)*n):f=e+U*n}for(var $=l>1?l:2,Z=o||new Array($),N=0;N<$;++N)Z[N]=f===void 0?NaN:d===void 0?t[f+N]:_u(t[f+N],t[f+n+N],d);return Z}function bN(t,e,r,n,i,o){if(r==e)return null;var l;if(i<t[e+n-1])return o?(l=t.slice(e,e+n),l[n-1]=i,l):null;if(t[r-1]<i)return o?(l=t.slice(r-n,r),l[n-1]=i,l):null;if(i==t[e+n-1])return t.slice(e,e+n);for(var f=e/n,d=r/n;f<d;){var v=f+d>>1;i<t[(v+1)*n-1]?d=v:f=v+1}var x=t[f*n-1];if(i==x)return t.slice((f-1)*n,(f-1)*n+n);var b=t[(f+1)*n-1],A=(i-x)/(b-x);l=[];for(var P=0;P<n-1;++P)l.push(_u(t[(f-1)*n+P],t[f*n+P],A));return l.push(i),l}function Zze(t,e,r,n,i,o,l){if(l)return bN(t,e,r[r.length-1],n,i,o);var f;if(i<t[n-1])return o?(f=t.slice(0,n),f[n-1]=i,f):null;if(t[t.length-1]<i)return o?(f=t.slice(t.length-n),f[n-1]=i,f):null;for(var d=0,v=r.length;d<v;++d){var x=r[d];if(e!=x){if(i<t[e+n-1])return null;if(i<=t[x-1])return bN(t,e,x,n,i,!1);e=x}}return null}p();p();function Yze(t,e,r,n,i){var o=ox(i,function(l){return!rm(t,e,r,n,l[0],l[1])});return!o}function rm(t,e,r,n,i,o){for(var l=0,f=t[r-n],d=t[r-n+1];e<r;e+=n){var v=t[e],x=t[e+1];d<=o?x>o&&(v-f)*(o-d)-(i-f)*(x-d)>0&&l++:x<=o&&(v-f)*(o-d)-(i-f)*(x-d)<0&&l--,f=v,d=x}return l!==0}function KT(t,e,r,n,i,o){if(r.length===0||!rm(t,e,r[0],n,i,o))return!1;for(var l=1,f=r.length;l<f;++l)if(rm(t,r[l-1],r[l],n,i,o))return!1;return!0}function Kze(t,e,r,n,i,o){if(r.length===0)return!1;for(var l=0,f=r.length;l<f;++l){var d=r[l];if(KT(t,e,d,n,i,o))return!0;e=d[d.length-1]}return!1}function XT(t,e,r,n,i){var o=$Y(Bi(),t,e,r,n);return ki(i,o)?Fh(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:xN(t,e,r,n,function(l,f){return pze(i,l,f)}):!1}function Xze(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){if(XT(t,e,r[o],n,i))return!0;e=r[o]}return!1}function i9(t,e,r,n,i){return!!(XT(t,e,r,n,i)||rm(t,e,r,n,i[0],i[1])||rm(t,e,r,n,i[0],i[3])||rm(t,e,r,n,i[2],i[1])||rm(t,e,r,n,i[2],i[3]))}function o9(t,e,r,n,i){if(!i9(t,e,r[0],n,i))return!1;if(r.length===1)return!0;for(var o=1,l=r.length;o<l;++o)if(Yze(t,r[o-1],r[o],n,i)&&!XT(t,r[o-1],r[o],n,i))return!1;return!0}function Qze(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){var f=r[o];if(o9(t,e,f,n,i))return!0;e=f[f.length-1]}return!1}p();function EN(t,e,r,n){for(var i=t[e],o=t[e+1],l=0,f=e+n;f<r;f+=n){var d=t[f],v=t[f+1];l+=Math.sqrt((d-i)*(d-i)+(v-o)*(v-o)),i=d,o=v}return l}var Snr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tnr=function(t){Snr(e,t);function e(r,n){var i=t.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return e.prototype.appendCoordinate=function(r){this.flatCoordinates?ta(this.flatCoordinates,r):this.flatCoordinates=r.slice(),this.changed()},e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(VT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$T(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,r,n,i,o))},e.prototype.forEachSegment=function(r){return xN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},e.prototype.getCoordinateAtM=function(r,n){if(this.layout!=Yn.XYM&&this.layout!=Yn.XYZM)return null;var i=n!==void 0?n:!1;return bN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,i)},e.prototype.getCoordinates=function(){return wu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(r,n){return wN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,this.stride)},e.prototype.getLength=function(){return EN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=ZT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new e(n,Yn.XY)},e.prototype.getType=function(){return"LineString"},e.prototype.intersectsExtent=function(r){return XT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cv(this.flatCoordinates,0,r,this.stride),this.changed()},e}(Ha),zh=Tnr;p();var Inr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Anr=function(t){Inr(e,t);function e(r,n,i){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(r[0]))o.setCoordinates(r,n);else if(n!==void 0&&i)o.setFlatCoordinates(n,r),o.ends_=i;else{for(var l=o.getLayout(),f=r,d=[],v=[],x=0,b=f.length;x<b;++x){var A=f[x];x===0&&(l=A.getLayout()),ta(d,A.getFlatCoordinates()),v.push(d.length)}o.setFlatCoordinates(l,d),o.ends_=v}return o}return e.prototype.appendLineString=function(r){this.flatCoordinates?ta(this.flatCoordinates,r.getFlatCoordinates().slice()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(GT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HT(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,r,n,i,o))},e.prototype.getCoordinateAtM=function(r,n,i){if(this.layout!=Yn.XYM&&this.layout!=Yn.XYZM||this.flatCoordinates.length===0)return null;var o=n!==void 0?n:!1,l=i!==void 0?i:!1;return Zze(this.flatCoordinates,0,this.ends_,this.stride,r,o,l)},e.prototype.getCoordinates=function(){return tm(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(r){return r<0||this.ends_.length<=r?null:new zh(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},e.prototype.getLineStrings=function(){for(var r=this.flatCoordinates,n=this.ends_,i=this.layout,o=[],l=0,f=0,d=n.length;f<d;++f){var v=n[f],x=new zh(r.slice(l,v),i);o.push(x),l=v}return o},e.prototype.getFlatMidpoints=function(){for(var r=[],n=this.flatCoordinates,i=0,o=this.ends_,l=this.stride,f=0,d=o.length;f<d;++f){var v=o[f],x=wN(n,i,v,l,.5);ta(r,x),i=v}return r},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=Hze(this.flatCoordinates,0,this.ends_,this.stride,r,n,0,i),new e(n,Yn.XY,i)},e.prototype.getType=function(){return"MultiLineString"},e.prototype.intersectsExtent=function(r){return Xze(this.flatCoordinates,0,this.ends_,this.stride,r)},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=WT(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Ha),SN=Anr;p();p();var Mnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cnr=function(t){Mnr(e,t);function e(r,n){var i=t.call(this)||this;return i.setCoordinates(r,n),i}return e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){var l=this.flatCoordinates,f=yc(r,n,l[0],l[1]);if(f<o){for(var d=this.stride,v=0;v<d;++v)i[v]=l[v];return i.length=d,f}else return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(r){return ix(this.flatCoordinates,r)},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(r){return DT(r,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_N(this.flatCoordinates,0,r,this.stride),this.changed()},e}(Ha),Wa=Cnr;var Pnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rnr=function(t){Pnr(e,t);function e(r,n){var i=t.call(this)||this;return n&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return e.prototype.appendPoint=function(r){this.flatCoordinates?ta(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){if(o<Qs(this.getExtent(),r,n))return o;for(var l=this.flatCoordinates,f=this.stride,d=0,v=l.length;d<v;d+=f){var x=yc(r,n,l[d],l[d+1]);if(x<o){o=x;for(var b=0;b<f;++b)i[b]=l[d+b];i.length=f}}return o},e.prototype.getCoordinates=function(){return wu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(r){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return r<0||n<=r?null:new Wa(this.flatCoordinates.slice(r*this.stride,(r+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var r=this.flatCoordinates,n=this.layout,i=this.stride,o=[],l=0,f=r.length;l<f;l+=i){var d=new Wa(r.slice(l,l+i),n);o.push(d)}return o},e.prototype.getType=function(){return"MultiPoint"},e.prototype.intersectsExtent=function(r){for(var n=this.flatCoordinates,i=this.stride,o=0,l=n.length;o<l;o+=i){var f=n[o],d=n[o+1];if(DT(r,f,d))return!0}return!1},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cv(this.flatCoordinates,0,r,this.stride),this.changed()},e}(Ha),mx=Rnr;p();p();p();p();function a9(t,e,r,n){for(var i=0,o=t[r-n],l=t[r-n+1];e<r;e+=n){var f=t[e],d=t[e+1];i+=l*f-o*d,o=f,l=d}return i/2}function s9(t,e,r,n){for(var i=0,o=0,l=r.length;o<l;++o){var f=r[o];i+=a9(t,e,f,n),e=f}return i}function Jze(t,e,r,n){for(var i=0,o=0,l=r.length;o<l;++o){var f=r[o];i+=s9(t,e,f,n),e=f[f.length-1]}return i}var Onr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lnr=function(t){Onr(e,t);function e(r,n){var i=t.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?i.setFlatCoordinates(n,r):i.setCoordinates(r,n),i}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(VT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$T(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,i,o))},e.prototype.getArea=function(){return a9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return wu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=ZT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new e(n,Yn.XY)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(r){return!1},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cv(this.flatCoordinates,0,r,this.stride),this.changed()},e}(Ha),l9=Lnr;p();function u9(t,e,r,n,i,o,l){for(var f,d,v,x,b,A,P,N=i[o+1],j=[],D=0,F=r.length;D<F;++D){var U=r[D];for(x=t[U-n],A=t[U-n+1],f=e;f<U;f+=n)b=t[f],P=t[f+1],(N<=A&&P<=N||A<=N&&N<=P)&&(v=(N-A)/(P-A)*(b-x)+x,j.push(v)),x=b,A=P}var $=NaN,Z=-1/0;for(j.sort(Pl),x=j[0],f=1,d=j.length;f<d;++f){b=j[f];var ie=Math.abs(b-x);ie>Z&&(v=(x+b)/2,KT(t,e,r,n,v,N)&&($=v,Z=ie)),x=b}return isNaN($)&&($=i[o]),l?(l.push($,N,Z),l):[$,N,Z]}function e4e(t,e,r,n,i){for(var o=[],l=0,f=r.length;l<f;++l){var d=r[l];o=u9(t,e,d,n,i,2*l,o),e=d[d.length-1]}return o}p();p();function t4e(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}function r4e(t,e,r,n){for(var i=0,o=t[r-n],l=t[r-n+1];e<r;e+=n){var f=t[e],d=t[e+1];i+=(f-o)*(d+l),o=f,l=d}return i===0?void 0:i>0}function c9(t,e,r,n,i){for(var o=i!==void 0?i:!1,l=0,f=r.length;l<f;++l){var d=r[l],v=r4e(t,e,d,n);if(l===0){if(o&&v||!o&&!v)return!1}else if(o&&!v||!o&&v)return!1;e=d}return!0}function n4e(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o){var f=r[o];if(!c9(t,e,f,n,i))return!1;f.length&&(e=f[f.length-1])}return!0}function TN(t,e,r,n,i){for(var o=i!==void 0?i:!1,l=0,f=r.length;l<f;++l){var d=r[l],v=r4e(t,e,d,n),x=l===0?o&&v||!o&&!v:o&&!v||!o&&v;x&&t4e(t,e,d,n),e=d}return e}function f9(t,e,r,n,i){for(var o=0,l=r.length;o<l;++o)e=TN(t,e,r[o],n,i);return e}var Dnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h9=function(t){Dnr(e,t);function e(r,n,i){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,n!==void 0&&i?(o.setFlatCoordinates(n,r),o.ends_=i):o.setCoordinates(r,n),o}return e.prototype.appendLinearRing=function(r){this.flatCoordinates?ta(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(GT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HT(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,i,o))},e.prototype.containsXY=function(r,n){return KT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},e.prototype.getArea=function(){return s9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),TN(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,tm(n,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Js(this.getExtent());this.flatInteriorPoint_=u9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Wa(this.getFlatInteriorPoint(),Yn.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new l9(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},e.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,i=this.ends_,o=[],l=0,f=0,d=i.length;f<d;++f){var v=i[f],x=new l9(n.slice(l,v),r);o.push(x),l=v}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;c9(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=TN(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=n9(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,i),new e(n,Yn.XY,i)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(r){return o9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=WT(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Ha),bc=h9;function QT(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=[e,r,e,i,n,i,n,r,e,r];return new h9(o,Yn.XY,[o.length])}function IN(t,e,r){for(var n=e||32,i=t.getStride(),o=t.getLayout(),l=t.getCenter(),f=i*(n+1),d=new Array(f),v=0;v<f;v+=i){d[v]=0,d[v+1]=0;for(var x=2;x<i;x++)d[v+x]=l[x]}var b=[d.length],A=new h9(d,o,b);return i4e(A,l,t.getRadius(),r),A}function i4e(t,e,r,n){for(var i=t.getFlatCoordinates(),o=t.getStride(),l=i.length/o-1,f=n||0,d=0;d<=l;++d){var v=d*o,x=f+Ll(d,l)*2*Math.PI/l;i[v]=e[0]+r*Math.cos(x),i[v+1]=e[1]+r*Math.sin(x)}t.changed()}p();function o4e(t,e,r,n){for(var i=[],o=Bi(),l=0,f=r.length;l<f;++l){var d=r[l];o=lN(t,e,d[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=d[d.length-1]}return i}var Nnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),knr=function(t){Nnr(e,t);function e(r,n,i){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(r[0])){for(var l=o.getLayout(),f=r,d=[],v=[],x=0,b=f.length;x<b;++x){var A=f[x];x===0&&(l=A.getLayout());for(var P=d.length,N=A.getEnds(),j=0,D=N.length;j<D;++j)N[j]+=P;ta(d,A.getFlatCoordinates()),v.push(N)}n=l,r=d,i=v}return n!==void 0&&i?(o.setFlatCoordinates(n,r),o.endss_=i):o.setCoordinates(r,n),o}return e.prototype.appendPolygon=function(r){var n;if(!this.flatCoordinates)this.flatCoordinates=r.getFlatCoordinates().slice(),n=r.getEnds().slice(),this.endss_.push();else{var i=this.flatCoordinates.length;ta(this.flatCoordinates,r.getFlatCoordinates()),n=r.getEnds().slice();for(var o=0,l=n.length;o<l;++o)n[o]+=i}this.endss_.push(n),this.changed()},e.prototype.clone=function(){for(var r=this.endss_.length,n=new Array(r),i=0;i<r;++i)n[i]=this.endss_[i].slice();var o=new e(this.flatCoordinates.slice(),this.layout,n);return o.applyProperties(this),o},e.prototype.closestPointXY=function(r,n,i,o){return o<Qs(this.getExtent(),r,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Vze(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Gze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,r,n,i,o))},e.prototype.containsXY=function(r,n){return Kze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r,n)},e.prototype.getArea=function(){return Jze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),f9(n,0,this.endss_,this.stride,r)):n=this.flatCoordinates,YT(n,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var r=o4e(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=e4e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new mx(this.getFlatInteriorPoints().slice(),Yn.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;n4e(r,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=f9(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(r){var n=[],i=[];return n.length=Wze(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(r),n,0,i),new e(n,Yn.XY,i)},e.prototype.getPolygon=function(r){if(r<0||this.endss_.length<=r)return null;var n;if(r===0)n=0;else{var i=this.endss_[r-1];n=i[i.length-1]}var o=this.endss_[r].slice(),l=o[o.length-1];if(n!==0)for(var f=0,d=o.length;f<d;++f)o[f]-=n;return new bc(this.flatCoordinates.slice(n,l),this.layout,o)},e.prototype.getPolygons=function(){for(var r=this.layout,n=this.flatCoordinates,i=this.endss_,o=[],l=0,f=0,d=i.length;f<d;++f){var v=i[f].slice(),x=v[v.length-1];if(l!==0)for(var b=0,A=v.length;b<A;++b)v[b]-=l;var P=new bc(n.slice(l,x),r,v);o.push(P),l=x}return o},e.prototype.getType=function(){return"MultiPolygon"},e.prototype.intersectsExtent=function(r){return Qze(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,r)},e.prototype.setCoordinates=function(r,n){this.setLayout(n,r,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=$ze(this.flatCoordinates,0,r,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()},e}(Ha),AN=knr;var qnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fnr=function(t){qnr(e,t);function e(r){var n=this,i=r||{};return n=t.call(this)||this,n.dataProjection=ii(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(n.defaultFeatureProjection=ii(i.featureProjection)),n.geometryName_=i.geometryName,n.extractGeometryName_=i.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return e.prototype.readFeatureFromObject=function(r,n){var i=null;r.type==="Feature"?i=r:i={type:"Feature",geometry:r,properties:null};var o=p9(i.geometry,n),l=new Ol;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&l.setGeometryName(i.geometry_name),l.setGeometry(o),"id"in i&&l.setId(i.id),i.properties&&l.setProperties(i.properties,!0),l},e.prototype.readFeaturesFromObject=function(r,n){var i=r,o=null;if(i.type==="FeatureCollection"){var l=r;o=[];for(var f=l.features,d=0,v=f.length;d<v;++d)o.push(this.readFeatureFromObject(f[d],n))}else o=[this.readFeatureFromObject(r,n)];return o},e.prototype.readGeometryFromObject=function(r,n){return p9(r,n)},e.prototype.readProjectionFromObject=function(r){var n=r.crs,i;return n?n.type=="name"?i=ii(n.properties.name):n.type==="EPSG"?i=ii("EPSG:"+n.properties.code):or(!1,36):i=this.dataProjection,i},e.prototype.writeFeatureObject=function(r,n){n=this.adaptOptions(n);var i={type:"Feature",geometry:null,properties:null},o=r.getId();if(o!==void 0&&(i.id=o),!r.hasProperties())return i;var l=r.getProperties(),f=r.getGeometry();return f&&(i.geometry=d9(f,n),delete l[r.getGeometryName()]),mc(l)||(i.properties=l),i},e.prototype.writeFeaturesObject=function(r,n){n=this.adaptOptions(n);for(var i=[],o=0,l=r.length;o<l;++o)i.push(this.writeFeatureObject(r[o],n));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(r,n){return d9(r,this.adaptOptions(n))},e}(zze);function p9(t,e){if(!t)return null;var r;switch(t.type){case"Point":{r=znr(t);break}case"LineString":{r=Unr(t);break}case"Polygon":{r=$nr(t);break}case"MultiPoint":{r=Vnr(t);break}case"MultiLineString":{r=Bnr(t);break}case"MultiPolygon":{r=Gnr(t);break}case"GeometryCollection":{r=jnr(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return r9(r,!1,e)}function jnr(t,e){var r=t.geometries.map(function(n){return p9(n,e)});return new Fze(r)}function znr(t){return new Wa(t.coordinates)}function Unr(t){return new zh(t.coordinates)}function Bnr(t){return new SN(t.coordinates)}function Vnr(t){return new mx(t.coordinates)}function Gnr(t){return new AN(t.coordinates)}function $nr(t){return new bc(t.coordinates)}function d9(t,e){t=r9(t,!0,e);var r=t.getType(),n;switch(r){case"Point":{n=Xnr(t,e);break}case"LineString":{n=Wnr(t,e);break}case"Polygon":{n=Qnr(t,e);break}case"MultiPoint":{n=Ynr(t,e);break}case"MultiLineString":{n=Znr(t,e);break}case"MultiPolygon":{n=Knr(t,e);break}case"GeometryCollection":{n=Hnr(t,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+r)}return n}function Hnr(t,e){var r=t.getGeometriesArray().map(function(n){var i=Xr({},e);return delete i.featureProjection,d9(n,i)});return{type:"GeometryCollection",geometries:r}}function Wnr(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function Znr(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function Ynr(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function Knr(t,e){var r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}function Xnr(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function Qnr(t,e){var r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}var JT=Fnr;p();p();p();p();p();var vn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var Jnr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eir=function(t){Jnr(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var i=Xr({},r);return typeof r.properties=="object"&&(delete i.properties,Xr(i,r.properties)),i[vn.OPACITY]=r.opacity!==void 0?r.opacity:1,or(typeof i[vn.OPACITY]=="number",64),i[vn.VISIBLE]=r.visible!==void 0?r.visible:!0,i[vn.Z_INDEX]=r.zIndex,i[vn.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,i[vn.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,i[vn.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,i[vn.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},i=this.getZIndex();return n.opacity=Zn(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},e.prototype.getLayersArray=function(r){return ir()},e.prototype.getLayerStatesArray=function(r){return ir()},e.prototype.getExtent=function(){return this.get(vn.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(vn.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(vn.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(vn.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(vn.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(vn.OPACITY)},e.prototype.getSourceState=function(){return ir()},e.prototype.getVisible=function(){return this.get(vn.VISIBLE)},e.prototype.getZIndex=function(){return this.get(vn.Z_INDEX)},e.prototype.setBackground=function(r){this.background_=r,this.changed()},e.prototype.setExtent=function(r){this.set(vn.EXTENT,r)},e.prototype.setMaxResolution=function(r){this.set(vn.MAX_RESOLUTION,r)},e.prototype.setMinResolution=function(r){this.set(vn.MIN_RESOLUTION,r)},e.prototype.setMaxZoom=function(r){this.set(vn.MAX_ZOOM,r)},e.prototype.setMinZoom=function(r){this.set(vn.MIN_ZOOM,r)},e.prototype.setOpacity=function(r){or(typeof r=="number",64),this.set(vn.OPACITY,r)},e.prototype.setVisible=function(r){this.set(vn.VISIBLE,r)},e.prototype.setZIndex=function(r){this.set(vn.Z_INDEX,r)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(So),MN=eir;p();var Uo={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var tir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rir=function(t){tir(e,t);function e(r){var n=this,i=Xr({},r);delete i.source,n=t.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(vn.SOURCE,n.handleSourcePropertyChange_);var o=r.source?r.source:null;return n.setSource(o),n}return e.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},e.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},e.prototype.getSource=function(){return this.get(vn.SOURCE)||null},e.prototype.getRenderSource=function(){return this.getSource()},e.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(an(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=qr(r,Vt.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},e.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},e.prototype.render=function(r,n){var i=this.getRenderer();if(i.prepareFrame(r))return this.rendered=!0,i.renderFrame(r,n)},e.prototype.unrender=function(){this.rendered=!1},e.prototype.setMapInternal=function(r){r||this.unrender(),this.set(vn.MAP,r)},e.prototype.getMapInternal=function(){return this.get(vn.MAP)},e.prototype.setMap=function(r){this.mapPrecomposeKey_&&(an(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(an(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=qr(r,Uo.PRECOMPOSE,function(n){var i=n,o=i.frameState.layerStatesArray,l=this.getLayerState(!1);or(!o.some(function(f){return f.layer===l.layer}),67),o.push(l)},this),this.mapRenderKey_=qr(this,Vt.CHANGE,r.render,r),this.changed())},e.prototype.setSource=function(r){this.set(vn.SOURCE,r)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(MN);function fv(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var hv=rir;var E4e=je(v9(),1);p();p();p();p();var Pn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};p();p();function y9(t,e,r){return r===void 0&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function _9(t){return t[0]>0&&t[1]>0}function CN(t,e,r){return r===void 0&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function Kn(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}var nir=function(){function t(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Kn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getDeclutterMode=function(){return this.declutterMode_},t.prototype.getAnchor=function(){return ir()},t.prototype.getImage=function(e){return ir()},t.prototype.getHitDetectionImage=function(){return ir()},t.prototype.getPixelRatio=function(e){return 1},t.prototype.getImageState=function(){return ir()},t.prototype.getImageSize=function(){return ir()},t.prototype.getOrigin=function(){return ir()},t.prototype.getSize=function(){return ir()},t.prototype.setDisplacement=function(e){this.displacement_=e},t.prototype.setOpacity=function(e){this.opacity_=e},t.prototype.setRotateWithView=function(e){this.rotateWithView_=e},t.prototype.setRotation=function(e){this.rotation_=e},t.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Kn(e)},t.prototype.listenImageChange=function(e){ir()},t.prototype.load=function(){ir()},t.prototype.unlistenImageChange=function(e){ir()},t}(),PN=nir;p();var s4e=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,l4e=/^([a-z]*)$|^hsla?\(.*\)$/i;function RN(t){return typeof t=="string"?t:b9(t)}function u4e(t){var e=document.createElement("div");if(e.style.color=t,e.style.color!==""){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}else return""}var x9=function(){var t=1024,e={},r=0;return function(n){var i;if(e.hasOwnProperty(n))i=e[n];else{if(r>=t){var o=0;for(var l in e)(o++&3)===0&&(delete e[l],--r)}i=iir(n),e[n]=i,++r}return i}}();function Uh(t){return Array.isArray(t)?t:x9(t)}function iir(t){var e,r,n,i,o;if(l4e.exec(t)&&(t=u4e(t)),s4e.exec(t)){var l=t.length-1,f=void 0;l<=4?f=1:f=2;var d=l===4||l===8;e=parseInt(t.substr(1+0*f,f),16),r=parseInt(t.substr(1+1*f,f),16),n=parseInt(t.substr(1+2*f,f),16),d?i=parseInt(t.substr(1+3*f,f),16):i=255,f==1&&(e=(e<<4)+e,r=(r<<4)+r,n=(n<<4)+n,d&&(i=(i<<4)+i)),o=[e,r,n,i/255]}else t.indexOf("rgba(")==0?(o=t.slice(5,-1).split(",").map(Number),a4e(o)):t.indexOf("rgb(")==0?(o=t.slice(4,-1).split(",").map(Number),o.push(1),a4e(o)):or(!1,14);return o}function a4e(t){return t[0]=Zn(t[0]+.5|0,0,255),t[1]=Zn(t[1]+.5|0,0,255),t[2]=Zn(t[2]+.5|0,0,255),t[3]=Zn(t[3],0,1),t}function b9(t){var e=t[0];e!=(e|0)&&(e=e+.5|0);var r=t[1];r!=(r|0)&&(r=r+.5|0);var n=t[2];n!=(n|0)&&(n=n+.5|0);var i=t[3]===void 0?1:Math.round(t[3]*100)/100;return"rgba("+e+","+r+","+n+","+i+")"}function c4e(t){return l4e.test(t)&&(t=u4e(t)),s4e.test(t)||t.indexOf("rgba(")===0||t.indexOf("rgb(")===0}p();function el(t){return Array.isArray(t)?b9(t):t}p();function qi(t,e,r,n){var i;return r&&r.length?i=r.shift():Yd?i=new OffscreenCanvas(t||300,e||300):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",n)}function ON(t){var e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function gx(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function eI(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function f4e(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function h4e(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;if(i!==o){if(!i){t.appendChild(o);continue}if(!o){t.removeChild(i),--n;continue}t.insertBefore(o,i)}}}p();p();var tI="ol-hidden";var Eu="ol-unselectable",w9="ol-unsupported",xf="ol-control",E9="ol-collapsed",oir=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),p4e=["style","variant","weight","size","lineHeight","family"],S9=function(t){var e=t.match(oir);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=p4e.length;n<i;++n){var o=e[n+1];o!==void 0&&(r[p4e[n]]=o)}return r.families=r.family.split(/,\s?/),r};var DN="10px sans-serif",tl="#000",pv="round",Bh=[],Vh=0,wf="round",Gh=10,$h="#000",nm="center",dv="middle",Hh=[0,0,0,0],Wh=1,bf=new So,air=new Xs;air.setSize=function(){console.warn("labelCache is deprecated.")};var vx=null,T9,I9={},d4e=function(){var t=100,e="32px ",r=["monospace","serif"],n=r.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",o,l;function f(v,x,b){for(var A=!0,P=0;P<n;++P){var N=r[P];if(l=LN(v+" "+x+" "+e+N,i),b!=N){var j=LN(v+" "+x+" "+e+b+","+N,i);A=A&&j!=l}}return!!A}function d(){for(var v=!0,x=bf.getKeys(),b=0,A=x.length;b<A;++b){var P=x[b];bf.get(P)<t&&(f.apply(this,P.split(`
`))?(Ks(I9),vx=null,T9=void 0,bf.set(P,t)):(bf.set(P,bf.get(P)+1,!0),v=!1))}v&&(clearInterval(o),o=void 0)}return function(v){var x=S9(v);if(x)for(var b=x.families,A=0,P=b.length;A<P;++A){var N=b[A],j=x.style+`
`+x.weight+`
`+N;bf.get(j)===void 0&&(bf.set(j,t,!0),f(x.style,x.weight,N)||(bf.set(j,0,!0),o===void 0&&(o=setInterval(d,32))))}}}(),sir=function(){var t;return function(e){var r=I9[e];if(r==null){if(Yd){var n=S9(e),i=m4e(e,"\u017Dg"),o=isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight);r=o*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),r=t.offsetHeight,document.body.removeChild(t);I9[e]=r}return r}}();function m4e(t,e){return vx||(vx=qi(1,1)),t!=T9&&(vx.font=t,T9=vx.font),vx.measureText(e)}function LN(t,e){return m4e(t,e).width}function A9(t,e,r){if(e in r)return r[e];var n=e.split(`
`).reduce(function(i,o){return Math.max(i,LN(t,o))},0);return r[e]=n,n}function g4e(t,e){for(var r=[],n=[],i=[],o=0,l=0,f=0,d=0,v=0,x=e.length;v<=x;v+=2){var b=e[v];if(b===`
`||v===x){o=Math.max(o,l),i.push(l),l=0,f+=d;continue}var A=e[v+1]||t.font,P=LN(A,b);r.push(P),l+=P;var N=sir(A);n.push(N),d=Math.max(d,N)}return{width:o,height:f,widths:r,heights:n,lineWidths:i}}function v4e(t,e,r,n,i,o,l,f,d,v,x){t.save(),r!==1&&(t.globalAlpha*=r),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(d,v),t.scale(x[0],x[1]),lir(n,t)):x[0]<0||x[1]<0?(t.translate(d,v),t.scale(x[0],x[1]),t.drawImage(n,i,o,l,f,0,0,l,f)):t.drawImage(n,i,o,l,f,d,v,l*x[0],f*x[1]),t.restore()}function lir(t,e){for(var r=t.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}var uir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cir=function(t){uir(e,t);function e(r){var n=this,i=r.rotateWithView!==void 0?r.rotateWithView:!1;return n=t.call(this,{opacity:1,rotateWithView:i,rotation:r.rotation!==void 0?r.rotation:0,scale:r.scale!==void 0?r.scale:1,displacement:r.displacement!==void 0?r.displacement:[0,0],declutterMode:r.declutterMode})||this,n.canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=r.fill!==void 0?r.fill:null,n.origin_=[0,0],n.points_=r.points,n.radius_=r.radius!==void 0?r.radius:r.radius1,n.radius2_=r.radius2,n.angle_=r.angle!==void 0?r.angle:0,n.stroke_=r.stroke!==void 0?r.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return e.prototype.clone=function(){var r=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(r)?r.slice():r,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var r=this.size_;if(!r)return null;var n=this.getDisplacement();return[r[0]/2-n[0],r[1]/2+n[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(r){this.fill_=r,this.render()},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(r){var n=this.canvas_[r];if(!n){var i=this.renderOptions_,o=qi(i.size*r,i.size*r);this.draw_(i,o,r),n=o.canvas,this.canvas_[r]=n}return n},e.prototype.getPixelRatio=function(r){return r},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return Pn.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(r){this.stroke_=r,this.render()},e.prototype.listenImageChange=function(r){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(r){},e.prototype.calculateLineJoinSize_=function(r,n,i){if(n===0||this.points_===1/0||r!=="bevel"&&r!=="miter")return n;var o=this.radius_,l=this.radius2_===void 0?o:this.radius2_;if(o<l){var f=o;o=l,l=f}var d=this.radius2_===void 0?this.points_:this.points_*2,v=2*Math.PI/d,x=l*Math.sin(v),b=Math.sqrt(l*l-x*x),A=o-b,P=Math.sqrt(x*x+A*A),N=P/x;if(r==="miter"&&N<=i)return N*n;var j=n/2/N,D=n/2*(A/P),F=Math.sqrt((o+j)*(o+j)+D*D),U=F-o;if(this.radius2_===void 0||r==="bevel")return U*2;var $=o*Math.sin(v),Z=Math.sqrt(o*o-$*$),ie=l-Z,ne=Math.sqrt($*$+ie*ie),ae=ne/$;if(ae<=i){var de=ae*n/2-l-o;return 2*Math.max(U,de)}return U*2},e.prototype.createRenderOptions=function(){var r=wf,n=0,i=null,o=0,l,f=0;this.stroke_&&(l=this.stroke_.getColor(),l===null&&(l=$h),l=el(l),f=this.stroke_.getWidth(),f===void 0&&(f=Wh),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),r=this.stroke_.getLineJoin(),r===void 0&&(r=wf),n=this.stroke_.getMiterLimit(),n===void 0&&(n=Gh));var d=this.calculateLineJoinSize_(r,f,n),v=Math.max(this.radius_,this.radius2_||0),x=Math.ceil(2*v+d);return{strokeStyle:l,strokeWidth:f,size:x,lineDash:i,lineDashOffset:o,lineJoin:r,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var r=this.renderOptions_.size;this.canvas_={},this.size_=[r,r]},e.prototype.draw_=function(r,n,i){if(n.scale(i,i),n.translate(r.size/2,r.size/2),this.createPath_(n),this.fill_){var o=this.fill_.getColor();o===null&&(o=tl),n.fillStyle=el(o),n.fill()}this.stroke_&&(n.strokeStyle=r.strokeStyle,n.lineWidth=r.strokeWidth,n.setLineDash&&r.lineDash&&(n.setLineDash(r.lineDash),n.lineDashOffset=r.lineDashOffset),n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit,n.stroke())},e.prototype.createHitDetectionCanvas_=function(r){if(this.fill_){var n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=Uh(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){var o=qi(r.size,r.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(r,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(r){var n=this.points_,i=this.radius_;if(n===1/0)r.arc(0,0,i,0,2*Math.PI);else{var o=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);for(var l=this.angle_-Math.PI/2,f=2*Math.PI/n,d=0;d<n;d++){var v=l+d*f,x=d%2===0?i:o;r.lineTo(x*Math.cos(v),x*Math.sin(v))}r.closePath()}},e.prototype.drawHitDetectionCanvas_=function(r,n){n.translate(r.size/2,r.size/2),this.createPath_(n),n.fillStyle=tl,n.fill(),this.stroke_&&(n.strokeStyle=r.strokeStyle,n.lineWidth=r.strokeWidth,r.lineDash&&(n.setLineDash(r.lineDash),n.lineDashOffset=r.lineDashOffset),n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit,n.stroke())},e}(PN),y4e=cir;var fir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hir=function(t){fir(e,t);function e(r){var n=r||{};return t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:n.scale!==void 0?n.scale:1,rotation:n.rotation!==void 0?n.rotation:0,rotateWithView:n.rotateWithView!==void 0?n.rotateWithView:!1,displacement:n.displacement!==void 0?n.displacement:[0,0],declutterMode:n.declutterMode})||this}return e.prototype.clone=function(){var r=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(r)?r.slice():r,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(r){this.radius_=r,this.render()},e}(y4e),mv=hir;p();var pir=function(){function t(e){var r=e||{};this.color_=r.color!==void 0?r.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(e){this.color_=e},t}(),Dl=pir;p();var dir=function(){function t(e){var r=e||{};this.color_=r.color!==void 0?r.color:null,this.lineCap_=r.lineCap,this.lineDash_=r.lineDash!==void 0?r.lineDash:null,this.lineDashOffset_=r.lineDashOffset,this.lineJoin_=r.lineJoin,this.miterLimit_=r.miterLimit,this.width_=r.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(e){this.color_=e},t.prototype.setLineCap=function(e){this.lineCap_=e},t.prototype.setLineDash=function(e){this.lineDash_=e},t.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},t.prototype.setLineJoin=function(e){this.lineJoin_=e},t.prototype.setMiterLimit=function(e){this.miterLimit_=e},t.prototype.setWidth=function(e){this.width_=e},t}(),wc=dir;var yx=function(){function t(e){var r=e||{};this.geometry_=null,this.geometryFunction_=_4e,r.geometry!==void 0&&this.setGeometry(r.geometry),this.fill_=r.fill!==void 0?r.fill:null,this.image_=r.image!==void 0?r.image:null,this.renderer_=r.renderer!==void 0?r.renderer:null,this.hitDetectionRenderer_=r.hitDetectionRenderer!==void 0?r.hitDetectionRenderer:null,this.stroke_=r.stroke!==void 0?r.stroke:null,this.text_=r.text!==void 0?r.text:null,this.zIndex_=r.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(e){this.renderer_=e},t.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(e){this.fill_=e},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(e){this.image_=e},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(e){this.stroke_=e},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(e){this.text_=e},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(r){return r.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=_4e,this.geometry_=e},t.prototype.setZIndex=function(e){this.zIndex_=e},t}();function x4e(t){var e;if(typeof t=="function")e=t;else{var r;if(Array.isArray(t))r=t;else{or(typeof t.getZIndex=="function",41);var n=t;r=[n]}e=function(){return r}}return e}var M9=null;function b4e(t,e){if(!M9){var r=new Dl({color:"rgba(255,255,255,0.4)"}),n=new wc({color:"#3399CC",width:1.25});M9=[new yx({image:new mv({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return M9}function _x(){var t={},e=[255,255,255,1],r=[0,153,255,1],n=3;return t.Polygon=[new yx({fill:new Dl({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new yx({stroke:new wc({color:e,width:n+2})}),new yx({stroke:new wc({color:r,width:n})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new yx({image:new mv({radius:n*2,fill:new Dl({color:r}),stroke:new wc({color:e,width:n/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function _4e(t){return t.getGeometry()}var NN=yx;var mir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w4e={RENDER_ORDER:"renderOrder"},gir=function(t){mir(e,t);function e(r){var n=this,i=r||{},o=Xr({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,n=t.call(this,o)||this,n.declutter_=i.declutter!==void 0?i.declutter:!1,n.renderBuffer_=i.renderBuffer!==void 0?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=i.updateWhileAnimating!==void 0?i.updateWhileAnimating:!1,n.updateWhileInteracting_=i.updateWhileInteracting!==void 0?i.updateWhileInteracting:!1,n}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(r){return t.prototype.getFeatures.call(this,r)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(w4e.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(r){r.declutterTree||(r.declutterTree=new E4e.default(9)),this.getRenderer().renderDeclutter(r)},e.prototype.setRenderOrder=function(r){this.set(w4e.RENDER_ORDER,r)},e.prototype.setStyle=function(r){this.style_=r!==void 0?r:b4e,this.styleFunction_=r===null?void 0:x4e(this.style_),this.changed()},e}(hv),S4e=gir;p();p();p();p();var rI={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},nI=[rI.FILL],Ef=[rI.STROKE],Zh=[rI.BEGIN_PATH],C9=[rI.CLOSE_PATH],gr=rI;p();var vir=function(){function t(){}return t.prototype.drawCustom=function(e,r,n,i){},t.prototype.drawGeometry=function(e){},t.prototype.setStyle=function(e){},t.prototype.drawCircle=function(e,r){},t.prototype.drawFeature=function(e,r){},t.prototype.drawGeometryCollection=function(e,r){},t.prototype.drawLineString=function(e,r){},t.prototype.drawMultiLineString=function(e,r){},t.prototype.drawMultiPoint=function(e,r){},t.prototype.drawMultiPolygon=function(e,r){},t.prototype.drawPoint=function(e,r){},t.prototype.drawPolygon=function(e,r){},t.prototype.drawText=function(e,r){},t.prototype.setFillStrokeStyle=function(e,r){},t.prototype.setImageStyle=function(e,r){},t.prototype.setTextStyle=function(e,r){},t}(),kN=vir;var yir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_ir=function(t){yir(e,t);function e(r,n,i,o){var l=t.call(this)||this;return l.tolerance=r,l.maxExtent=n,l.pixelRatio=o,l.maxLineWidth=0,l.resolution=i,l.beginGeometryInstruction1_=null,l.beginGeometryInstruction2_=null,l.bufferedMaxExtent_=null,l.instructions=[],l.coordinates=[],l.tmpCoordinate_=[],l.hitDetectionInstructions=[],l.state={},l}return e.prototype.applyPixelRatio=function(r){var n=this.pixelRatio;return n==1?r:r.map(function(i){return i*n})},e.prototype.appendFlatPointCoordinates=function(r,n){for(var i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,l=this.coordinates,f=l.length,d=0,v=r.length;d<v;d+=n)o[0]=r[d],o[1]=r[d+1],ms(i,o)&&(l[f++]=o[0],l[f++]=o[1]);return f},e.prototype.appendFlatLineCoordinates=function(r,n,i,o,l,f){var d=this.coordinates,v=d.length,x=this.getBufferedMaxExtent();f&&(n+=o);var b=r[n],A=r[n+1],P=this.tmpCoordinate_,N=!0,j,D,F;for(j=n+o;j<i;j+=o)P[0]=r[j],P[1]=r[j+1],F=aN(x,P),F!==D?(N&&(d[v++]=b,d[v++]=A,N=!1),d[v++]=P[0],d[v++]=P[1]):F===Io.INTERSECTING?(d[v++]=P[0],d[v++]=P[1],N=!1):N=!0,b=P[0],A=P[1],D=F;return(l&&N||j===n+o)&&(d[v++]=b,d[v++]=A),v},e.prototype.drawCustomCoordinates_=function(r,n,i,o,l){for(var f=0,d=i.length;f<d;++f){var v=i[f],x=this.appendFlatLineCoordinates(r,n,v,o,!1,!1);l.push(x),n=v}return n},e.prototype.drawCustom=function(r,n,i,o){this.beginGeometry(r,n);var l=r.getType(),f=r.getStride(),d=this.coordinates.length,v,x,b,A,P;switch(l){case"MultiPolygon":v=r.getOrientedFlatCoordinates(),A=[];var N=r.getEndss();P=0;for(var j=0,D=N.length;j<D;++j){var F=[];P=this.drawCustomCoordinates_(v,P,N[j],f,F),A.push(F)}this.instructions.push([gr.CUSTOM,d,A,r,i,YT]),this.hitDetectionInstructions.push([gr.CUSTOM,d,A,r,o||i,YT]);break;case"Polygon":case"MultiLineString":b=[],v=l=="Polygon"?r.getOrientedFlatCoordinates():r.getFlatCoordinates(),P=this.drawCustomCoordinates_(v,0,r.getEnds(),f,b),this.instructions.push([gr.CUSTOM,d,b,r,i,tm]),this.hitDetectionInstructions.push([gr.CUSTOM,d,b,r,o||i,tm]);break;case"LineString":case"Circle":v=r.getFlatCoordinates(),x=this.appendFlatLineCoordinates(v,0,v.length,f,!1,!1),this.instructions.push([gr.CUSTOM,d,x,r,i,wu]),this.hitDetectionInstructions.push([gr.CUSTOM,d,x,r,o||i,wu]);break;case"MultiPoint":v=r.getFlatCoordinates(),x=this.appendFlatPointCoordinates(v,f),x>d&&(this.instructions.push([gr.CUSTOM,d,x,r,i,wu]),this.hitDetectionInstructions.push([gr.CUSTOM,d,x,r,o||i,wu]));break;case"Point":v=r.getFlatCoordinates(),this.coordinates.push(v[0],v[1]),x=this.coordinates.length,this.instructions.push([gr.CUSTOM,d,x,r,i]),this.hitDetectionInstructions.push([gr.CUSTOM,d,x,r,o||i]);break;default:}this.endGeometry(n)},e.prototype.beginGeometry=function(r,n){this.beginGeometryInstruction1_=[gr.BEGIN_GEOMETRY,n,0,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[gr.BEGIN_GEOMETRY,n,0,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var r=this.hitDetectionInstructions;r.reverse();var n,i=r.length,o,l,f=-1;for(n=0;n<i;++n)o=r[n],l=o[0],l==gr.END_GEOMETRY?f=n:l==gr.BEGIN_GEOMETRY&&(o[2]=n,Yje(this.hitDetectionInstructions,f,n),f=-1)},e.prototype.setFillStrokeStyle=function(r,n){var i=this.state;if(r){var o=r.getColor();i.fillStyle=el(o||tl)}else i.fillStyle=void 0;if(n){var l=n.getColor();i.strokeStyle=el(l||$h);var f=n.getLineCap();i.lineCap=f!==void 0?f:pv;var d=n.getLineDash();i.lineDash=d?d.slice():Bh;var v=n.getLineDashOffset();i.lineDashOffset=v||Vh;var x=n.getLineJoin();i.lineJoin=x!==void 0?x:wf;var b=n.getWidth();i.lineWidth=b!==void 0?b:Wh;var A=n.getMiterLimit();i.miterLimit=A!==void 0?A:Gh,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(r){var n=r.fillStyle,i=[gr.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i},e.prototype.applyStroke=function(r){this.instructions.push(this.createStroke(r))},e.prototype.createStroke=function(r){return[gr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth*this.pixelRatio,r.lineCap,r.lineJoin,r.miterLimit,this.applyPixelRatio(r.lineDash),r.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(r,n){var i=r.fillStyle;(typeof i!="string"||r.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,r)),r.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(r,n){var i=r.strokeStyle,o=r.lineCap,l=r.lineDash,f=r.lineDashOffset,d=r.lineJoin,v=r.lineWidth,x=r.miterLimit;(r.currentStrokeStyle!=i||r.currentLineCap!=o||l!=r.currentLineDash&&!Ua(r.currentLineDash,l)||r.currentLineDashOffset!=f||r.currentLineJoin!=d||r.currentLineWidth!=v||r.currentMiterLimit!=x)&&(i!==void 0&&n.call(this,r),r.currentStrokeStyle=i,r.currentLineCap=o,r.currentLineDash=l,r.currentLineDashOffset=f,r.currentLineJoin=d,r.currentLineWidth=v,r.currentMiterLimit=x)},e.prototype.endGeometry=function(r){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[gr.END_GEOMETRY,r];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=sN(this.maxExtent),this.maxLineWidth>0)){var r=this.resolution*(this.maxLineWidth+1)/2;vc(this.bufferedMaxExtent_,r,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(kN),Sf=_ir;p();var xir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bir=function(t){xir(e,t);function e(r,n,i,o){var l=t.call(this,r,n,i,o)||this;return l.hitDetectionImage_=null,l.image_=null,l.imagePixelRatio_=void 0,l.anchorX_=void 0,l.anchorY_=void 0,l.height_=void 0,l.opacity_=void 0,l.originX_=void 0,l.originY_=void 0,l.rotateWithView_=void 0,l.rotation_=void 0,l.scale_=void 0,l.width_=void 0,l.declutterMode_=void 0,l.declutterImageWithText_=void 0,l}return e.prototype.drawPoint=function(r,n){if(this.image_){this.beginGeometry(r,n);var i=r.getFlatCoordinates(),o=r.getStride(),l=this.coordinates.length,f=this.appendFlatPointCoordinates(i,o);this.instructions.push([gr.DRAW_IMAGE,l,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([gr.DRAW_IMAGE,l,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.drawMultiPoint=function(r,n){if(this.image_){this.beginGeometry(r,n);var i=r.getFlatCoordinates(),o=r.getStride(),l=this.coordinates.length,f=this.appendFlatPointCoordinates(i,o);this.instructions.push([gr.DRAW_IMAGE,l,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([gr.DRAW_IMAGE,l,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(r,n){var i=r.getAnchor(),o=r.getSize(),l=r.getOrigin();this.imagePixelRatio_=r.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=r.getHitDetectionImage(),this.image_=r.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=r.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=r.getRotateWithView(),this.rotation_=r.getRotation(),this.scale_=r.getScaleArray(),this.width_=o[0],this.declutterMode_=r.getDeclutterMode(),this.declutterImageWithText_=n},e}(Sf),T4e=bir;p();var wir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eir=function(t){wir(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.drawFlatCoordinates_=function(r,n,i,o){var l=this.coordinates.length,f=this.appendFlatLineCoordinates(r,n,i,o,!1,!1),d=[gr.MOVE_TO_LINE_TO,l,f];return this.instructions.push(d),this.hitDetectionInstructions.push(d),i},e.prototype.drawLineString=function(r,n){var i=this.state,o=i.strokeStyle,l=i.lineWidth;if(!(o===void 0||l===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(r,n),this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Bh,Vh],Zh);var f=r.getFlatCoordinates(),d=r.getStride();this.drawFlatCoordinates_(f,0,f.length,d),this.hitDetectionInstructions.push(Ef),this.endGeometry(n)}},e.prototype.drawMultiLineString=function(r,n){var i=this.state,o=i.strokeStyle,l=i.lineWidth;if(!(o===void 0||l===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(r,n),this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Zh);for(var f=r.getEnds(),d=r.getFlatCoordinates(),v=r.getStride(),x=0,b=0,A=f.length;b<A;++b)x=this.drawFlatCoordinates_(d,x,f[b],v);this.hitDetectionInstructions.push(Ef),this.endGeometry(n)}},e.prototype.finish=function(){var r=this.state;return r.lastStroke!=null&&r.lastStroke!=this.coordinates.length&&this.instructions.push(Ef),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(r){r.lastStroke!=null&&r.lastStroke!=this.coordinates.length&&(this.instructions.push(Ef),r.lastStroke=this.coordinates.length),r.lastStroke=0,t.prototype.applyStroke.call(this,r),this.instructions.push(Zh)},e}(Sf),I4e=Eir;p();var Sir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tir=function(t){Sir(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.drawFlatCoordinatess_=function(r,n,i,o){var l=this.state,f=l.fillStyle!==void 0,d=l.strokeStyle!==void 0,v=i.length;this.instructions.push(Zh),this.hitDetectionInstructions.push(Zh);for(var x=0;x<v;++x){var b=i[x],A=this.coordinates.length,P=this.appendFlatLineCoordinates(r,n,b,o,!0,!d),N=[gr.MOVE_TO_LINE_TO,A,P];this.instructions.push(N),this.hitDetectionInstructions.push(N),d&&(this.instructions.push(C9),this.hitDetectionInstructions.push(C9)),n=b}return f&&(this.instructions.push(nI),this.hitDetectionInstructions.push(nI)),d&&(this.instructions.push(Ef),this.hitDetectionInstructions.push(Ef)),n},e.prototype.drawCircle=function(r,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,tl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var f=r.getFlatCoordinates(),d=r.getStride(),v=this.coordinates.length;this.appendFlatLineCoordinates(f,0,f.length,d,!1,!1);var x=[gr.CIRCLE,v];this.instructions.push(Zh,x),this.hitDetectionInstructions.push(Zh,x),i.fillStyle!==void 0&&(this.instructions.push(nI),this.hitDetectionInstructions.push(nI)),i.strokeStyle!==void 0&&(this.instructions.push(Ef),this.hitDetectionInstructions.push(Ef)),this.endGeometry(n)}},e.prototype.drawPolygon=function(r,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,tl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var f=r.getEnds(),d=r.getOrientedFlatCoordinates(),v=r.getStride();this.drawFlatCoordinatess_(d,0,f,v),this.endGeometry(n)}},e.prototype.drawMultiPolygon=function(r,n){var i=this.state,o=i.fillStyle,l=i.strokeStyle;if(!(o===void 0&&l===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(r,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,tl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var f=r.getEndss(),d=r.getOrientedFlatCoordinates(),v=r.getStride(),x=0,b=0,A=f.length;b<A;++b)x=this.drawFlatCoordinatess_(d,x,f[b],v);this.endGeometry(n)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var r=this.tolerance;if(r!==0)for(var n=this.coordinates,i=0,o=n.length;i<o;++i)n[i]=em(n[i],r);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var r=this.state,n=r.fillStyle;n!==void 0&&this.updateFillStyle(r,this.createFill),r.strokeStyle!==void 0&&this.updateStrokeStyle(r,this.applyStroke)},e}(Sf),P9=Tir;p();p();var qN={POINT:"point",LINE:"line"};p();function A4e(t,e,r,n,i){var o=r,l=r,f=0,d=0,v=r,x,b,A,P,N,j,D,F,U,$;for(b=r;b<n;b+=i){var Z=e[b],ie=e[b+1];N!==void 0&&(U=Z-N,$=ie-j,P=Math.sqrt(U*U+$*$),D!==void 0&&(d+=A,x=Math.acos((D*U+F*$)/(A*P)),x>t&&(d>f&&(f=d,o=v,l=b),d=0,v=b-i)),A=P,D=U,F=$),N=Z,j=ie}return d+=P,d>f?[v,b]:[o,l]}var Iir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xx={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Air=function(t){Iir(e,t);function e(r,n,i,o){var l=t.call(this,r,n,i,o)||this;return l.labels_=null,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=void 0,l.textRotation_=0,l.textFillState_=null,l.fillStates={},l.textStrokeState_=null,l.strokeStates={},l.textState_={},l.textStates={},l.textKey_="",l.fillKey_="",l.strokeKey_="",l.declutterImageWithText_=void 0,l}return e.prototype.finish=function(){var r=t.prototype.finish.call(this);return r.textStates=this.textStates,r.fillStates=this.fillStates,r.strokeStates=this.strokeStates,r},e.prototype.drawText=function(r,n){var i=this.textFillState_,o=this.textStrokeState_,l=this.textState_;if(!(this.text_===""||!l||!i&&!o)){var f=this.coordinates,d=f.length,v=r.getType(),x=null,b=r.getStride();if(l.placement===qN.LINE&&(v=="LineString"||v=="MultiLineString"||v=="Polygon"||v=="MultiPolygon")){if(!ki(this.getBufferedMaxExtent(),r.getExtent()))return;var A=void 0;if(x=r.getFlatCoordinates(),v=="LineString")A=[x.length];else if(v=="MultiLineString")A=r.getEnds();else if(v=="Polygon")A=r.getEnds().slice(0,1);else if(v=="MultiPolygon"){var P=r.getEndss();A=[];for(var N=0,j=P.length;N<j;++N)A.push(P[N][0])}this.beginGeometry(r,n);for(var D=l.textAlign,F=0,U=void 0,$=0,Z=A.length;$<Z;++$){if(D==null){var ie=A4e(l.maxAngle,x,F,A[$],b);F=ie[0],U=ie[1]}else U=A[$];for(var N=F;N<U;N+=b)f.push(x[N],x[N+1]);var ne=f.length;F=A[$],this.drawChars_(d,ne),d=ne}this.endGeometry(n)}else{var ae=l.overflow?null:[];switch(v){case"Point":case"MultiPoint":x=r.getFlatCoordinates();break;case"LineString":x=r.getFlatMidpoint();break;case"Circle":x=r.getCenter();break;case"MultiLineString":x=r.getFlatMidpoints(),b=2;break;case"Polygon":x=r.getFlatInteriorPoint(),l.overflow||ae.push(x[2]/this.resolution),b=3;break;case"MultiPolygon":var de=r.getFlatInteriorPoints();x=[];for(var N=0,j=de.length;N<j;N+=3)l.overflow||ae.push(de[N+2]/this.resolution),x.push(de[N],de[N+1]);if(x.length===0)return;b=2;break;default:}var ne=this.appendFlatPointCoordinates(x,b);if(ne===d)return;if(ae&&(ne-d)/2!==x.length/b){var ye=d/2;ae=ae.filter(function(We,lt){var pt=f[(ye+lt)*2]===x[lt*b]&&f[(ye+lt)*2+1]===x[lt*b+1];return pt||--ye,pt})}this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(r,n);var me=l.padding;if(me!=Hh&&(l.scale[0]<0||l.scale[1]<0)){var be=l.padding[0],Ne=l.padding[1],Ce=l.padding[2],qe=l.padding[3];l.scale[0]<0&&(Ne=-Ne,qe=-qe),l.scale[1]<0&&(be=-be,Ce=-Ce),me=[be,Ne,Ce,qe]}var He=this.pixelRatio;this.instructions.push([gr.DRAW_IMAGE,d,ne,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,me==Hh?Hh:me.map(function(We){return We*He}),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ae]);var Ke=1/He;this.hitDetectionInstructions.push([gr.DRAW_IMAGE,d,ne,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Ke,Ke],NaN,void 0,this.declutterImageWithText_,me,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ae]),this.endGeometry(n)}}},e.prototype.saveTextStates_=function(){var r=this.textStrokeState_,n=this.textState_,i=this.textFillState_,o=this.strokeKey_;r&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var l=this.textKey_;l in this.textStates||(this.textStates[l]={font:n.font,textAlign:n.textAlign||nm,justify:n.justify,textBaseline:n.textBaseline||dv,scale:n.scale});var f=this.fillKey_;i&&(f in this.fillStates||(this.fillStates[f]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(r,n){var i=this.textStrokeState_,o=this.textState_,l=this.strokeKey_,f=this.textKey_,d=this.fillKey_;this.saveTextStates_();var v=this.pixelRatio,x=xx[o.textBaseline],b=this.textOffsetY_*v,A=this.text_,P=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([gr.DRAW_CHARS,r,n,x,o.overflow,d,o.maxAngle,v,b,l,P*v,A,f,1]),this.hitDetectionInstructions.push([gr.DRAW_CHARS,r,n,x,o.overflow,d,o.maxAngle,1,b,l,P,A,f,1/v])},e.prototype.setTextStyle=function(r,n){var i,o,l;if(!r)this.text_="";else{var f=r.getFill();f?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=el(f.getColor()||tl)):(o=null,this.textFillState_=o);var d=r.getStroke();if(!d)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);var v=d.getLineDash(),x=d.getLineDashOffset(),b=d.getWidth(),A=d.getMiterLimit();l.lineCap=d.getLineCap()||pv,l.lineDash=v?v.slice():Bh,l.lineDashOffset=x===void 0?Vh:x,l.lineJoin=d.getLineJoin()||wf,l.lineWidth=b===void 0?Wh:b,l.miterLimit=A===void 0?Gh:A,l.strokeStyle=el(d.getColor()||$h)}i=this.textState_;var P=r.getFont()||DN;d4e(P);var N=r.getScaleArray();i.overflow=r.getOverflow(),i.font=P,i.maxAngle=r.getMaxAngle(),i.placement=r.getPlacement(),i.textAlign=r.getTextAlign(),i.justify=r.getJustify(),i.textBaseline=r.getTextBaseline()||dv,i.backgroundFill=r.getBackgroundFill(),i.backgroundStroke=r.getBackgroundStroke(),i.padding=r.getPadding()||Hh,i.scale=N===void 0?[1,1]:N;var j=r.getOffsetX(),D=r.getOffsetY(),F=r.getRotateWithView(),U=r.getRotation();this.text_=r.getText()||"",this.textOffsetX_=j===void 0?0:j,this.textOffsetY_=D===void 0?0:D,this.textRotateWithView_=F===void 0?!1:F,this.textRotation_=U===void 0?0:U,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:tr(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+tr(o.fillStyle):""}this.declutterImageWithText_=n},e}(Sf),M4e=Air;var Mir={Circle:P9,Default:Sf,Image:T4e,LineString:I4e,Polygon:P9,Text:M4e},Cir=function(){function t(e,r,n,i){this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}return t.prototype.finish=function(){var e={};for(var r in this.buildersByZIndex_){e[r]=e[r]||{};var n=this.buildersByZIndex_[r];for(var i in n){var o=n[i].finish();e[r][i]=o}}return e},t.prototype.getBuilder=function(e,r){var n=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);var o=i[r];if(o===void 0){var l=Mir[r];o=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[r]=o}return o},t}(),R9=Cir;p();p();var Pir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rir=function(t){Pir(e,t);function e(r){var n=t.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return e.prototype.getFeatures=function(r){return ir()},e.prototype.getData=function(r){return null},e.prototype.prepareFrame=function(r){return ir()},e.prototype.renderFrame=function(r,n){return ir()},e.prototype.loadedTileCallback=function(r,n,i){r[n]||(r[n]={}),r[n][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(r,n,i){return function(o,l){var f=this.loadedTileCallback.bind(this,i,o);return r.forEachLoadedTile(n,o,l,f)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(r,n,i,o,l){},e.prototype.getDataAtPixel=function(r,n,i){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===Pn.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(r){var n=r.getState();return n!=Pn.LOADED&&n!=Pn.ERROR&&r.addEventListener(Vt.CHANGE,this.boundHandleImageChange_),n==Pn.IDLE&&(r.load(),n=r.getState()),n==Pn.LOADED},e.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},e.prototype.disposeInternal=function(){delete this.layer_,t.prototype.disposeInternal.call(this)},e}(eN),FN=Rir;p();var Oir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lir=function(t){Oir(e,t);function e(r,n,i,o){var l=t.call(this,r)||this;return l.inversePixelTransform=n,l.frameState=i,l.context=o,l}return e}(Ni),im=Lir;var Dir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O9=[],bx=null;function Nir(){var t=document.createElement("canvas");t.width=1,t.height=1,bx=t.getContext("2d")}var kir=function(t){Dir(e,t);function e(r){var n=t.call(this,r)||this;return n.container=null,n.renderedResolution,n.tempTransform=Ui(),n.pixelTransform=Ui(),n.inversePixelTransform=Ui(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return e.prototype.getImageData=function(r,n,i){bx||Nir(),bx.clearRect(0,0,1,1);var o;try{bx.drawImage(r,n,i,1,1,0,0,1,1),o=bx.getImageData(0,0,1,1).data}catch(l){return bx=null,null}return o},e.prototype.getBackground=function(r){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(r.viewState.resolution)),i||void 0},e.prototype.useContainer=function(r,n,i){var o=this.getLayer().getClassName(),l,f;if(r&&r.className===o&&(!i||r&&r.style.backgroundColor&&Ua(Uh(r.style.backgroundColor),Uh(i)))){var d=r.firstElementChild;d instanceof HTMLCanvasElement&&(f=d.getContext("2d"))}if(f&&f.canvas.style.transform===n?(this.container=r,this.context=f,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){l=document.createElement("div"),l.className=o;var v=l.style;v.position="absolute",v.width="100%",v.height="100%",f=qi();var d=f.canvas;l.appendChild(d),v=d.style,v.position="absolute",v.left="0",v.transformOrigin="top left",this.container=l,this.context=f}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)},e.prototype.clipUnrotated=function(r,n,i){var o=yu(i),l=lx(i),f=sx(i),d=ax(i);$n(n.coordinateToPixelTransform,o),$n(n.coordinateToPixelTransform,l),$n(n.coordinateToPixelTransform,f),$n(n.coordinateToPixelTransform,d);var v=this.inversePixelTransform;$n(v,o),$n(v,l),$n(v,f),$n(v,d),r.save(),r.beginPath(),r.moveTo(Math.round(o[0]),Math.round(o[1])),r.lineTo(Math.round(l[0]),Math.round(l[1])),r.lineTo(Math.round(f[0]),Math.round(f[1])),r.lineTo(Math.round(d[0]),Math.round(d[1])),r.clip()},e.prototype.dispatchRenderEvent_=function(r,n,i){var o=this.getLayer();if(o.hasListener(r)){var l=new im(r,this.inversePixelTransform,i,n);o.dispatchEvent(l)}},e.prototype.preRender=function(r,n){this.frameState=n,this.dispatchRenderEvent_(Uo.PRERENDER,r,n)},e.prototype.postRender=function(r,n){this.dispatchRenderEvent_(Uo.POSTRENDER,r,n)},e.prototype.getRenderTransform=function(r,n,i,o,l,f,d){var v=l/2,x=f/2,b=o/n,A=-b,P=-r[0]+d,N=-r[1];return To(this.tempTransform,v,x,b,A,-i,P,N)},e.prototype.getDataAtPixel=function(r,n,i){var o=$n(this.inversePixelTransform,r.slice()),l=this.context,f=this.getLayer(),d=f.getExtent();if(d){var v=$n(n.pixelToCoordinateTransform,r.slice());if(!ms(d,v))return null}var x=Math.round(o[0]),b=Math.round(o[1]),A=this.pixelContext_;if(!A){var P=document.createElement("canvas");P.width=1,P.height=1,A=P.getContext("2d"),this.pixelContext_=A}A.clearRect(0,0,1,1);var N;try{A.drawImage(l.canvas,x,b,1,1,0,0,1,1),N=A.getImageData(0,0,1,1).data}catch(j){return j.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):N}return N[3]===0?null:N},e.prototype.disposeInternal=function(){delete this.frameState,t.prototype.disposeInternal.call(this)},e}(FN),jN=kir;p();p();p();function C4e(t,e,r,n,i,o,l,f,d,v,x,b){var A=t[e],P=t[e+1],N=0,j=0,D=0,F=0;function U(){N=A,j=P,e+=n,A=t[e],P=t[e+1],F+=D,D=Math.sqrt((A-N)*(A-N)+(P-j)*(P-j))}do U();while(e<r-n&&F+D<o);for(var $=D===0?0:(o-F)/D,Z=_u(N,A,$),ie=_u(j,P,$),ne=e-n,ae=F,de=o+f*d(v,i,x);e<r-n&&F+D<de;)U();$=D===0?0:(de-F)/D;var ye=_u(N,A,$),me=_u(j,P,$),be;if(b){var Ne=[Z,ie,ye,me];dx(Ne,0,4,2,b,Ne,Ne),be=Ne[0]>Ne[2]}else be=Z>ye;var Ce=Math.PI,qe=[],He=ne+n===e;e=ne,D=0,F=ae,A=t[e],P=t[e+1];var Ke;if(He){U(),Ke=Math.atan2(P-j,A-N),be&&(Ke+=Ke>0?-Ce:Ce);var Je=(ye+Z)/2,We=(me+ie)/2;return qe[0]=[Je,We,(de-o)/2,Ke,i],qe}i=i.replace(/\n/g," ");for(var lt=0,pt=i.length;lt<pt;){U();var dt=Math.atan2(P-j,A-N);if(be&&(dt+=dt>0?-Ce:Ce),Ke!==void 0){var ze=dt-Ke;if(ze+=ze>Ce?-2*Ce:ze<-Ce?2*Ce:0,Math.abs(ze)>l)return null}Ke=dt;for(var Dt=lt,Ot=0;lt<pt;++lt){var Ue=be?pt-lt-1:lt,nt=f*d(v,i[Ue],x);if(e+n<r&&F+D<o+Ot+nt/2)break;Ot+=nt}if(lt!==Dt){var Ze=be?i.substring(pt-Dt,pt-lt):i.substring(Dt,lt);$=D===0?0:(o+Ot/2-F)/D;var Je=_u(N,A,$),We=_u(j,P,$);qe.push([Je,We,Ot/2,dt,Ze]),o+=Ot}}return qe}var wx=Bi(),om=[],Yh=[],Kh=[],am=[];function P4e(t){return t[3].declutterBox}var qir=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function R4e(t,e){return(e==="start"||e==="end")&&!qir.test(t)&&(e=e==="start"?"left":"right"),xx[e]}function Fir(t,e,r){return r>0&&t.push(`
`,""),t.push(e,""),t}var jir=function(){function t(e,r,n,i){this.overlaps=n,this.pixelRatio=r,this.resolution=e,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Ui(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(e,r,n,i){var o=e+r+n+i;if(this.labels_[o])return this.labels_[o];var l=i?this.strokeStates[i]:null,f=n?this.fillStates[n]:null,d=this.textStates[r],v=this.pixelRatio,x=[d.scale[0]*v,d.scale[1]*v],b=Array.isArray(e),A=d.justify?xx[d.justify]:R4e(Array.isArray(e)?e[0]:e,d.textAlign||nm),P=i&&l.lineWidth?l.lineWidth:0,N=b?e:e.split(`
`).reduce(Fir,[]),j=g4e(d,N),D=j.width,F=j.height,U=j.widths,$=j.heights,Z=j.lineWidths,ie=D+P,ne=[],ae=(ie+2)*x[0],de=(F+P)*x[1],ye={width:ae<0?Math.floor(ae):Math.ceil(ae),height:de<0?Math.floor(de):Math.ceil(de),contextInstructions:ne};if((x[0]!=1||x[1]!=1)&&ne.push("scale",x),i){ne.push("strokeStyle",l.strokeStyle),ne.push("lineWidth",P),ne.push("lineCap",l.lineCap),ne.push("lineJoin",l.lineJoin),ne.push("miterLimit",l.miterLimit);var me=Yd?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;me.prototype.setLineDash&&(ne.push("setLineDash",[l.lineDash]),ne.push("lineDashOffset",l.lineDashOffset))}n&&ne.push("fillStyle",f.fillStyle),ne.push("textBaseline","middle"),ne.push("textAlign","center");for(var be=.5-A,Ne=A*ie+be*P,Ce=[],qe=[],He=0,Ke=0,Je=0,We=0,lt,pt=0,dt=N.length;pt<dt;pt+=2){var ze=N[pt];if(ze===`
`){Ke+=He,He=0,Ne=A*ie+be*P,++We;continue}var Dt=N[pt+1]||d.font;Dt!==lt&&(i&&Ce.push("font",Dt),n&&qe.push("font",Dt),lt=Dt),He=Math.max(He,$[Je]);var Ot=[ze,Ne+be*U[Je]+A*(U[Je]-Z[We]),.5*(P+He)+Ke];Ne+=U[Je],i&&Ce.push("strokeText",Ot),n&&qe.push("fillText",Ot),++Je}return Array.prototype.push.apply(ne,Ce),Array.prototype.push.apply(ne,qe),this.labels_[o]=ye,ye},t.prototype.replayTextBackground_=function(e,r,n,i,o,l,f){e.beginPath(),e.moveTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,r),l&&(this.alignFill_=l[2],this.fill_(e)),f&&(this.setStrokeStyle_(e,f),e.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(e,r,n,i,o,l,f,d,v,x,b,A,P,N,j,D){f*=A[0],d*=A[1];var F=n-f,U=i-d,$=o+v>e?e-v:o,Z=l+x>r?r-x:l,ie=N[3]+$*A[0]+N[1],ne=N[0]+Z*A[1]+N[2],ae=F-N[3],de=U-N[0];(j||b!==0)&&(om[0]=ae,am[0]=ae,om[1]=de,Yh[1]=de,Yh[0]=ae+ie,Kh[0]=Yh[0],Kh[1]=de+ne,am[1]=Kh[1]);var ye;return b!==0?(ye=To(Ui(),n,i,1,1,b,-n,-i),$n(ye,om),$n(ye,Yh),$n(ye,Kh),$n(ye,am),Ga(Math.min(om[0],Yh[0],Kh[0],am[0]),Math.min(om[1],Yh[1],Kh[1],am[1]),Math.max(om[0],Yh[0],Kh[0],am[0]),Math.max(om[1],Yh[1],Kh[1],am[1]),wx)):Ga(Math.min(ae,ae+ie),Math.min(de,de+ne),Math.max(ae,ae+ie),Math.max(de,de+ne),wx),P&&(F=Math.round(F),U=Math.round(U)),{drawImageX:F,drawImageY:U,drawImageW:$,drawImageH:Z,originX:v,originY:x,declutterBox:{minX:wx[0],minY:wx[1],maxX:wx[2],maxY:wx[3],value:D},canvasTransform:ye,scale:A}},t.prototype.replayImageOrLabel_=function(e,r,n,i,o,l,f){var d=!!(l||f),v=i.declutterBox,x=e.canvas,b=f?f[2]*i.scale[0]/2:0,A=v.minX-b<=x.width/r&&v.maxX+b>=0&&v.minY-b<=x.height/r&&v.maxY+b>=0;return A&&(d&&this.replayTextBackground_(e,om,Yh,Kh,am,l,f),v4e(e,i.canvasTransform,o,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},t.prototype.fill_=function(e){if(this.alignFill_){var r=$n(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(r[0]%n,r[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},t.prototype.setStrokeStyle_=function(e,r){e.strokeStyle=r[1],e.lineWidth=r[2],e.lineCap=r[3],e.lineJoin=r[4],e.miterLimit=r[5],e.setLineDash&&(e.lineDashOffset=r[7],e.setLineDash(r[6]))},t.prototype.drawLabelWithPointPlacement_=function(e,r,n,i){var o=this.textStates[r],l=this.createLabel(e,r,i,n),f=this.strokeStates[n],d=this.pixelRatio,v=R4e(Array.isArray(e)?e[0]:e,o.textAlign||nm),x=xx[o.textBaseline||dv],b=f&&f.lineWidth?f.lineWidth:0,A=l.width/d-2*o.scale[0],P=v*A+2*(.5-v)*b,N=x*l.height/d+2*(.5-x)*b;return{label:l,anchorX:P,anchorY:N}},t.prototype.execute_=function(e,r,n,i,o,l,f,d){var v;this.pixelCoordinates_&&Ua(n,this.renderedTransform_)?v=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),v=bu(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),lze(this.renderedTransform_,n));for(var x=0,b=i.length,A=0,P,N,j,D,F,U,$,Z,ie,ne,ae,de,ye=0,me=0,be=null,Ne=null,Ce=this.coordinateCache_,qe=this.viewRotation_,He=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,Ke={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:qe},Je=this.instructions!=i||this.overlaps?0:200,We,lt,pt,dt;x<b;){var ze=i[x],Dt=ze[0];switch(Dt){case gr.BEGIN_GEOMETRY:We=ze[1],dt=ze[3],We.getGeometry()?f!==void 0&&!ki(f,dt.getExtent())?x=ze[2]+1:++x:x=ze[2];break;case gr.BEGIN_PATH:ye>Je&&(this.fill_(e),ye=0),me>Je&&(e.stroke(),me=0),!ye&&!me&&(e.beginPath(),D=NaN,F=NaN),++x;break;case gr.CIRCLE:A=ze[1];var Ot=v[A],Ue=v[A+1],nt=v[A+2],Ze=v[A+3],rt=nt-Ot,at=Ze-Ue,ot=Math.sqrt(rt*rt+at*at);e.moveTo(Ot+ot,Ue),e.arc(Ot,Ue,ot,0,2*Math.PI,!0),++x;break;case gr.CLOSE_PATH:e.closePath(),++x;break;case gr.CUSTOM:A=ze[1],P=ze[2];var Lt=ze[3],zt=ze[4],Pt=ze.length==6?ze[5]:void 0;Ke.geometry=Lt,Ke.feature=We,x in Ce||(Ce[x]=[]);var $t=Ce[x];Pt?Pt(v,A,P,2,$t):($t[0]=v[A],$t[1]=v[A+1],$t.length=2),zt($t,Ke),++x;break;case gr.DRAW_IMAGE:A=ze[1],P=ze[2],Z=ze[3],N=ze[4],j=ze[5];var Xt=ze[6],Gt=ze[7],Sr=ze[8],zr=ze[9],vr=ze[10],pr=ze[11],dr=ze[12],br=ze[13],un=ze[14],En=ze[15];if(!Z&&ze.length>=20){ie=ze[19],ne=ze[20],ae=ze[21],de=ze[22];var Rn=this.drawLabelWithPointPlacement_(ie,ne,ae,de);Z=Rn.label,ze[3]=Z;var gi=ze[23];N=(Rn.anchorX-gi)*this.pixelRatio,ze[4]=N;var De=ze[24];j=(Rn.anchorY-De)*this.pixelRatio,ze[5]=j,Xt=Z.height,ze[6]=Xt,br=Z.width,ze[13]=br}var J=void 0;ze.length>25&&(J=ze[25]);var te=void 0,se=void 0,_e=void 0;ze.length>17?(te=ze[16],se=ze[17],_e=ze[18]):(te=Hh,se=!1,_e=!1),vr&&He?pr+=qe:!vr&&!He&&(pr-=qe);for(var Ae=0;A<P;A+=2)if(!(J&&J[Ae++]<br/this.pixelRatio)){var Le=this.calculateImageOrLabelDimensions_(Z.width,Z.height,v[A],v[A+1],br,Xt,N,j,Sr,zr,pr,dr,o,te,se||_e,We),Be=[e,r,Z,Le,Gt,se?be:null,_e?Ne:null];if(d){if(un==="none")continue;if(un==="obstacle"){d.insert(Le.declutterBox);continue}else{var Oe=void 0,he=void 0;if(En){var pe=P-A;if(!En[pe]){En[pe]=Be;continue}if(Oe=En[pe],delete En[pe],he=P4e(Oe),d.collides(he))continue}if(d.collides(Le.declutterBox))continue;Oe&&(d.insert(he),this.replayImageOrLabel_.apply(this,Oe)),d.insert(Le.declutterBox)}}this.replayImageOrLabel_.apply(this,Be)}++x;break;case gr.DRAW_CHARS:var Re=ze[1],tt=ze[2],xe=ze[3],ut=ze[4];de=ze[5];var It=ze[6],ft=ze[7],_t=ze[8];ae=ze[9];var Wt=ze[10];ie=ze[11],ne=ze[12];var Tr=[ze[13],ze[13]],rn=this.textStates[ne],Pr=rn.font,ar=[rn.scale[0]*ft,rn.scale[1]*ft],ur=void 0;Pr in this.widths_?ur=this.widths_[Pr]:(ur={},this.widths_[Pr]=ur);var An=EN(v,Re,tt,2),gt=Math.abs(ar[0])*A9(Pr,ie,ur);if(ut||gt<=An){var si=this.textStates[ne].textAlign,Sn=(An-gt)*xx[si],Ta=C4e(v,Re,tt,2,ie,Sn,It,Math.abs(ar[0]),A9,Pr,ur,He?0:this.viewRotation_);e:if(Ta){var Es=[],wt=void 0,Rr=void 0,wr=void 0,yn=void 0,Vi=void 0;if(ae)for(wt=0,Rr=Ta.length;wt<Rr;++wt){Vi=Ta[wt],wr=Vi[4],yn=this.createLabel(wr,ne,"",ae),N=Vi[2]+(ar[0]<0?-Wt:Wt),j=xe*yn.height+(.5-xe)*2*Wt*ar[1]/ar[0]-_t;var Le=this.calculateImageOrLabelDimensions_(yn.width,yn.height,Vi[0],Vi[1],yn.width,yn.height,N,j,0,0,Vi[3],Tr,!1,Hh,!1,We);if(d&&d.collides(Le.declutterBox))break e;Es.push([e,r,yn,Le,1,null,null])}if(de)for(wt=0,Rr=Ta.length;wt<Rr;++wt){Vi=Ta[wt],wr=Vi[4],yn=this.createLabel(wr,ne,de,""),N=Vi[2],j=xe*yn.height-_t;var Le=this.calculateImageOrLabelDimensions_(yn.width,yn.height,Vi[0],Vi[1],yn.width,yn.height,N,j,0,0,Vi[3],Tr,!1,Hh,!1,We);if(d&&d.collides(Le.declutterBox))break e;Es.push([e,r,yn,Le,1,null,null])}d&&d.load(Es.map(P4e));for(var Ss=0,Ir=Es.length;Ss<Ir;++Ss)this.replayImageOrLabel_.apply(this,Es[Ss])}}++x;break;case gr.END_GEOMETRY:if(l!==void 0){We=ze[1];var qf=l(We,dt);if(qf)return qf}++x;break;case gr.FILL:Je?ye++:this.fill_(e),++x;break;case gr.MOVE_TO_LINE_TO:for(A=ze[1],P=ze[2],lt=v[A],pt=v[A+1],U=lt+.5|0,$=pt+.5|0,(U!==D||$!==F)&&(e.moveTo(lt,pt),D=U,F=$),A+=2;A<P;A+=2)lt=v[A],pt=v[A+1],U=lt+.5|0,$=pt+.5|0,(A==P-2||U!==D||$!==F)&&(e.lineTo(lt,pt),D=U,F=$);++x;break;case gr.SET_FILL_STYLE:be=ze,this.alignFill_=ze[2],ye&&(this.fill_(e),ye=0,me&&(e.stroke(),me=0)),e.fillStyle=ze[1],++x;break;case gr.SET_STROKE_STYLE:Ne=ze,me&&(e.stroke(),me=0),this.setStrokeStyle_(e,ze),++x;break;case gr.STROKE:Je?me++:e.stroke(),++x;break;default:++x;break}}ye&&this.fill_(e),me&&e.stroke()},t.prototype.execute=function(e,r,n,i,o,l){this.viewRotation_=i,this.execute_(e,r,n,this.instructions,o,void 0,void 0,l)},t.prototype.executeHitDetection=function(e,r,n,i,o){return this.viewRotation_=n,this.execute_(e,1,r,this.hitDetectionInstructions,!0,i,o)},t}(),O4e=jir;var L9=["Polygon","Circle","LineString","Image","Text","Default"],zir=function(){function t(e,r,n,i,o,l){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ui(),this.createExecutors_(o)}return t.prototype.clip=function(e,r){var n=this.getClipCoords(r);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()},t.prototype.createExecutors_=function(e){for(var r in e){var n=this.executorsByZIndex_[r];n===void 0&&(n={},this.executorsByZIndex_[r]=n);var i=e[r];for(var o in i){var l=i[o];n[o]=new O4e(this.resolution_,this.pixelRatio_,this.overlaps_,l)}}},t.prototype.hasExecutors=function(e){for(var r in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[r],i=0,o=e.length;i<o;++i)if(e[i]in n)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(e,r,n,i,o,l){i=Math.round(i);var f=i*2+1,d=To(this.hitDetectionTransform_,i+.5,i+.5,1/r,-1/r,-n,-e[0],-e[1]),v=!this.hitDetectionContext_;v&&(this.hitDetectionContext_=qi(f,f));var x=this.hitDetectionContext_;x.canvas.width!==f||x.canvas.height!==f?(x.canvas.width=f,x.canvas.height=f):v||x.clearRect(0,0,f,f);var b;this.renderBuffer_!==void 0&&(b=Bi(),ov(b,e),vc(b,r*(this.renderBuffer_+i),b));var A=Uir(i),P;function N(ne,ae){for(var de=x.getImageData(0,0,f,f).data,ye=0,me=A.length;ye<me;ye++)if(de[A[ye]]>0){if(!l||P!=="Image"&&P!=="Text"||l.indexOf(ne)!==-1){var be=(A[ye]-3)/4,Ne=i-be%f,Ce=i-(be/f|0),qe=o(ne,ae,Ne*Ne+Ce*Ce);if(qe)return qe}x.clearRect(0,0,f,f);break}}var j=Object.keys(this.executorsByZIndex_).map(Number);j.sort(Pl);var D,F,U,$,Z;for(D=j.length-1;D>=0;--D){var ie=j[D].toString();for(U=this.executorsByZIndex_[ie],F=L9.length-1;F>=0;--F)if(P=L9[F],$=U[P],$!==void 0&&(Z=$.executeHitDetection(x,d,n,N,b),Z))return Z}},t.prototype.getClipCoords=function(e){var r=this.maxExtent_;if(!r)return null;var n=r[0],i=r[1],o=r[2],l=r[3],f=[n,i,n,l,o,l,o,i];return bu(f,0,8,2,e,f),f},t.prototype.isEmpty=function(){return mc(this.executorsByZIndex_)},t.prototype.execute=function(e,r,n,i,o,l,f){var d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(Pl),this.maxExtent_&&(e.save(),this.clip(e,n));var v=l||L9,x,b,A,P,N,j;for(f&&d.reverse(),x=0,b=d.length;x<b;++x){var D=d[x].toString();for(N=this.executorsByZIndex_[D],A=0,P=v.length;A<P;++A){var F=v[A];j=N[F],j!==void 0&&j.execute(e,r,n,i,o,f)}}this.maxExtent_&&e.restore()},t}(),D9={};function Uir(t){if(D9[t]!==void 0)return D9[t];for(var e=t*2+1,r=t*t,n=new Array(r+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var l=i*i+o*o;if(l>r)break;var f=n[l];f||(f=[],n[l]=f),f.push(((t+i)*e+(t+o))*4+3),i>0&&f.push(((t-i)*e+(t+o))*4+3),o>0&&(f.push(((t+i)*e+(t-o))*4+3),i>0&&f.push(((t-i)*e+(t-o))*4+3))}for(var d=[],i=0,v=n.length;i<v;++i)n[i]&&d.push.apply(d,n[i]);return D9[t]=d,d}var N9=zir;p();var Bo={ANIMATING:0,INTERACTING:1};p();p();var Bir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vir=function(t){Bir(e,t);function e(r,n,i,o,l,f,d){var v=t.call(this)||this;return v.context_=r,v.pixelRatio_=n,v.extent_=i,v.transform_=o,v.viewRotation_=l,v.squaredTolerance_=f,v.userTransform_=d,v.contextFillState_=null,v.contextStrokeState_=null,v.contextTextState_=null,v.fillState_=null,v.strokeState_=null,v.image_=null,v.imageAnchorX_=0,v.imageAnchorY_=0,v.imageHeight_=0,v.imageOpacity_=0,v.imageOriginX_=0,v.imageOriginY_=0,v.imageRotateWithView_=!1,v.imageRotation_=0,v.imageScale_=[0,0],v.imageWidth_=0,v.text_="",v.textOffsetX_=0,v.textOffsetY_=0,v.textRotateWithView_=!1,v.textRotation_=0,v.textScale_=[0,0],v.textFillState_=null,v.textStrokeState_=null,v.textState_=null,v.pixelCoordinates_=[],v.tmpLocalTransform_=Ui(),v}return e.prototype.drawImages_=function(r,n,i,o){if(this.image_){var l=bu(r,n,i,o,this.transform_,this.pixelCoordinates_),f=this.context_,d=this.tmpLocalTransform_,v=f.globalAlpha;this.imageOpacity_!=1&&(f.globalAlpha=v*this.imageOpacity_);var x=this.imageRotation_;this.imageRotateWithView_&&(x+=this.viewRotation_);for(var b=0,A=l.length;b<A;b+=2){var P=l[b]-this.imageAnchorX_,N=l[b+1]-this.imageAnchorY_;if(x!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var j=P+this.imageAnchorX_,D=N+this.imageAnchorY_;To(d,j,D,1,1,x,-j,-D),f.setTransform.apply(f,d),f.translate(j,D),f.scale(this.imageScale_[0],this.imageScale_[1]),f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),f.setTransform(1,0,0,1,0,0)}else f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,P,N,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(f.globalAlpha=v)}},e.prototype.drawText_=function(r,n,i,o){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var l=bu(r,n,i,o,this.transform_,this.pixelCoordinates_),f=this.context_,d=this.textRotation_;for(this.textRotateWithView_&&(d+=this.viewRotation_);n<i;n+=o){var v=l[n]+this.textOffsetX_,x=l[n+1]+this.textOffsetY_;if(d!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var b=To(this.tmpLocalTransform_,v,x,1,1,d,-v,-x);f.setTransform.apply(f,b),f.translate(v,x),f.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&f.strokeText(this.text_,0,0),this.textFillState_&&f.fillText(this.text_,0,0),f.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&f.strokeText(this.text_,v,x),this.textFillState_&&f.fillText(this.text_,v,x)}}},e.prototype.moveToLineTo_=function(r,n,i,o,l){var f=this.context_,d=bu(r,n,i,o,this.transform_,this.pixelCoordinates_);f.moveTo(d[0],d[1]);var v=d.length;l&&(v-=2);for(var x=2;x<v;x+=2)f.lineTo(d[x],d[x+1]);return l&&f.closePath(),i},e.prototype.drawRings_=function(r,n,i,o){for(var l=0,f=i.length;l<f;++l)n=this.moveToLineTo_(r,n,i[l],o,!0);return n},e.prototype.drawCircle=function(r){if(ki(this.extent_,r.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=Uze(r,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],o=n[3]-n[1],l=Math.sqrt(i*i+o*o),f=this.context_;f.beginPath(),f.arc(n[0],n[1],l,0,2*Math.PI),this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}this.text_!==""&&this.drawText_(r.getCenter(),0,2,2)}},e.prototype.setStyle=function(r){this.setFillStrokeStyle(r.getFill(),r.getStroke()),this.setImageStyle(r.getImage()),this.setTextStyle(r.getText())},e.prototype.setTransform=function(r){this.transform_=r},e.prototype.drawGeometry=function(r){var n=r.getType();switch(n){case"Point":this.drawPoint(r);break;case"LineString":this.drawLineString(r);break;case"Polygon":this.drawPolygon(r);break;case"MultiPoint":this.drawMultiPoint(r);break;case"MultiLineString":this.drawMultiLineString(r);break;case"MultiPolygon":this.drawMultiPolygon(r);break;case"GeometryCollection":this.drawGeometryCollection(r);break;case"Circle":this.drawCircle(r);break;default:}},e.prototype.drawFeature=function(r,n){var i=n.getGeometryFunction()(r);!i||!ki(this.extent_,i.getExtent())||(this.setStyle(n),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(r){for(var n=r.getGeometriesArray(),i=0,o=n.length;i<o;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=r.getFlatCoordinates(),i=r.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawMultiPoint=function(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=r.getFlatCoordinates(),i=r.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawLineString=function(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ki(this.extent_,r.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=r.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,r.getStride(),!1),n.stroke()}if(this.text_!==""){var o=r.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=r.getExtent();if(ki(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=r.getFlatCoordinates(),l=0,f=r.getEnds(),d=r.getStride();i.beginPath();for(var v=0,x=f.length;v<x;++v)l=this.moveToLineTo_(o,l,f[v],d,!1);i.stroke()}if(this.text_!==""){var b=r.getFlatMidpoints();this.drawText_(b,0,b.length,2)}}},e.prototype.drawPolygon=function(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ki(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(r.getOrientedFlatCoordinates(),0,r.getEnds(),r.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var i=r.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ki(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=r.getOrientedFlatCoordinates(),o=0,l=r.getEndss(),f=r.getStride();n.beginPath();for(var d=0,v=l.length;d<v;++d){var x=l[d];o=this.drawRings_(i,o,x,f)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var b=r.getFlatInteriorPoints();this.drawText_(b,0,b.length,2)}}},e.prototype.setContextFillState_=function(r){var n=this.context_,i=this.contextFillState_;i?i.fillStyle!=r.fillStyle&&(i.fillStyle=r.fillStyle,n.fillStyle=r.fillStyle):(n.fillStyle=r.fillStyle,this.contextFillState_={fillStyle:r.fillStyle})},e.prototype.setContextStrokeState_=function(r){var n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=r.lineCap&&(i.lineCap=r.lineCap,n.lineCap=r.lineCap),n.setLineDash&&(Ua(i.lineDash,r.lineDash)||n.setLineDash(i.lineDash=r.lineDash),i.lineDashOffset!=r.lineDashOffset&&(i.lineDashOffset=r.lineDashOffset,n.lineDashOffset=r.lineDashOffset)),i.lineJoin!=r.lineJoin&&(i.lineJoin=r.lineJoin,n.lineJoin=r.lineJoin),i.lineWidth!=r.lineWidth&&(i.lineWidth=r.lineWidth,n.lineWidth=r.lineWidth),i.miterLimit!=r.miterLimit&&(i.miterLimit=r.miterLimit,n.miterLimit=r.miterLimit),i.strokeStyle!=r.strokeStyle&&(i.strokeStyle=r.strokeStyle,n.strokeStyle=r.strokeStyle)):(n.lineCap=r.lineCap,n.setLineDash&&(n.setLineDash(r.lineDash),n.lineDashOffset=r.lineDashOffset),n.lineJoin=r.lineJoin,n.lineWidth=r.lineWidth,n.miterLimit=r.miterLimit,n.strokeStyle=r.strokeStyle,this.contextStrokeState_={lineCap:r.lineCap,lineDash:r.lineDash,lineDashOffset:r.lineDashOffset,lineJoin:r.lineJoin,lineWidth:r.lineWidth,miterLimit:r.miterLimit,strokeStyle:r.strokeStyle})},e.prototype.setContextTextState_=function(r){var n=this.context_,i=this.contextTextState_,o=r.textAlign?r.textAlign:nm;i?(i.font!=r.font&&(i.font=r.font,n.font=r.font),i.textAlign!=o&&(i.textAlign=o,n.textAlign=o),i.textBaseline!=r.textBaseline&&(i.textBaseline=r.textBaseline,n.textBaseline=r.textBaseline)):(n.font=r.font,n.textAlign=o,n.textBaseline=r.textBaseline,this.contextTextState_={font:r.font,textAlign:o,textBaseline:r.textBaseline})},e.prototype.setFillStrokeStyle=function(r,n){var i=this;if(!r)this.fillState_=null;else{var o=r.getColor();this.fillState_={fillStyle:el(o||tl)}}if(!n)this.strokeState_=null;else{var l=n.getColor(),f=n.getLineCap(),d=n.getLineDash(),v=n.getLineDashOffset(),x=n.getLineJoin(),b=n.getWidth(),A=n.getMiterLimit(),P=d||Bh;this.strokeState_={lineCap:f!==void 0?f:pv,lineDash:this.pixelRatio_===1?P:P.map(function(N){return N*i.pixelRatio_}),lineDashOffset:(v||Vh)*this.pixelRatio_,lineJoin:x!==void 0?x:wf,lineWidth:(b!==void 0?b:Wh)*this.pixelRatio_,miterLimit:A!==void 0?A:Gh,strokeStyle:el(l||$h)}}},e.prototype.setImageStyle=function(r){var n;if(!r||!(n=r.getSize())){this.image_=null;return}var i=r.getAnchor(),o=r.getOrigin();this.image_=r.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=r.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=r.getRotateWithView(),this.imageRotation_=r.getRotation(),this.imageScale_=r.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_},e.prototype.setTextStyle=function(r){if(!r)this.text_="";else{var n=r.getFill();if(!n)this.textFillState_=null;else{var i=n.getColor();this.textFillState_={fillStyle:el(i||tl)}}var o=r.getStroke();if(!o)this.textStrokeState_=null;else{var l=o.getColor(),f=o.getLineCap(),d=o.getLineDash(),v=o.getLineDashOffset(),x=o.getLineJoin(),b=o.getWidth(),A=o.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:pv,lineDash:d||Bh,lineDashOffset:v||Vh,lineJoin:x!==void 0?x:wf,lineWidth:b!==void 0?b:Wh,miterLimit:A!==void 0?A:Gh,strokeStyle:el(l||$h)}}var P=r.getFont(),N=r.getOffsetX(),j=r.getOffsetY(),D=r.getRotateWithView(),F=r.getRotation(),U=r.getScaleArray(),$=r.getText(),Z=r.getTextAlign(),ie=r.getTextBaseline();this.textState_={font:P!==void 0?P:DN,textAlign:Z!==void 0?Z:nm,textBaseline:ie!==void 0?ie:dv},this.text_=$!==void 0?Array.isArray($)?$.reduce(function(ne,ae,de){return ne+=de%2?" ":ae},""):$:"",this.textOffsetX_=N!==void 0?this.pixelRatio_*N:0,this.textOffsetY_=j!==void 0?this.pixelRatio_*j:0,this.textRotateWithView_=D!==void 0?D:!1,this.textRotation_=F!==void 0?F:0,this.textScale_=[this.pixelRatio_*U[0],this.pixelRatio_*U[1]]}},e}(kN),L4e=Vir;p();var Tf={FRACTION:"fraction",PIXELS:"pixels"};p();p();p();var Nl={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};p();p();var Gir=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var r in this.cache_){var n=this.cache_[r];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},t.prototype.get=function(e,r,n){var i=D4e(e,r,n);return i in this.cache_?this.cache_[i]:null},t.prototype.set=function(e,r,n,i){var o=D4e(e,r,n);this.cache_[o]=i,++this.cacheSize_},t.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},t}();function D4e(t,e,r){var n=r?RN(r):"null";return e+":"+t+":"+n}var Ex=new Gir;p();p();var $ir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hir=function(t){$ir(e,t);function e(r,n,i,o){var l=t.call(this)||this;return l.extent=r,l.pixelRatio_=i,l.resolution=n,l.state=o,l}return e.prototype.changed=function(){this.dispatchEvent(Vt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return ir()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){ir()},e}(Xs),N4e=Hir;var Wir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tvn=function(t){Wir(e,t);function e(r,n,i,o,l,f){var d=t.call(this,r,n,i,Pn.IDLE)||this;return d.src_=o,d.image_=new Image,l!==null&&(d.image_.crossOrigin=l),d.unlisten_=null,d.state=Pn.IDLE,d.imageLoadFunction_=f,d}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=Pn.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=zo(this.extent)/this.image_.height),this.state=Pn.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==Pn.IDLE||this.state==Pn.ERROR)&&(this.state=Pn.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=iI(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(r){this.image_=r,this.resolution=zo(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(N4e);function iI(t,e,r){var n=t,i=!0,o=!1,l=!1,f=[tx(n,Vt.LOAD,function(){l=!0,o||e()})];return n.src&&aze?(o=!0,n.decode().then(function(){i&&e()}).catch(function(d){i&&(l?e():r())})):f.push(tx(n,Vt.ERROR,r)),function(){i=!1,f.forEach(an)}}var Zir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oI=null,Yir=function(t){Zir(e,t);function e(r,n,i,o,l,f){var d=t.call(this)||this;return d.hitDetectionImage_=null,d.image_=r||new Image,o!==null&&(d.image_.crossOrigin=o),d.canvas_={},d.color_=f,d.unlisten_=null,d.imageState_=l,d.size_=i,d.src_=n,d.tainted_,d}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===Pn.LOADED){oI||(oI=qi(1,1)),oI.drawImage(this.image_,0,0);try{oI.getImageData(0,0,1,1),this.tainted_=!1}catch(r){oI=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Vt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=Pn.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Pn.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(r){return this.replaceColor_(r),this.canvas_[r]?this.canvas_[r]:this.image_},e.prototype.getPixelRatio=function(r){return this.replaceColor_(r),this.canvas_[r]?r:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var r=this.size_[0],n=this.size_[1],i=qi(r,n);i.fillRect(0,0,r,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Pn.IDLE){this.imageState_=Pn.LOADING;try{this.image_.src=this.src_}catch(r){this.handleImageError_()}this.unlisten_=iI(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(r){if(!(!this.color_||this.canvas_[r]||this.imageState_!==Pn.LOADED)){var n=document.createElement("canvas");this.canvas_[r]=n,n.width=Math.ceil(this.image_.width*r),n.height=Math.ceil(this.image_.height*r);var i=n.getContext("2d");if(i.scale(r,r),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply",i.globalCompositeOperation==="multiply"||this.isTainted_())i.fillStyle=RN(this.color_),i.fillRect(0,0,n.width/r,n.height/r),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var o=i.getImageData(0,0,n.width,n.height),l=o.data,f=this.color_[0]/255,d=this.color_[1]/255,v=this.color_[2]/255,x=this.color_[3],b=0,A=l.length;b<A;b+=4)l[b]*=f,l[b+1]*=d,l[b+2]*=v,l[b+3]*=x;i.putImageData(o,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Xs);function k4e(t,e,r,n,i,o){var l=Ex.get(e,n,o);return l||(l=new Yir(t,e,r,n,i,o),Ex.set(e,n,o,l)),l}var Kir=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xir=function(t){Kir(e,t);function e(r){var n=this,i=r||{},o=i.opacity!==void 0?i.opacity:1,l=i.rotation!==void 0?i.rotation:0,f=i.scale!==void 0?i.scale:1,d=i.rotateWithView!==void 0?i.rotateWithView:!1;n=t.call(this,{opacity:o,rotation:l,scale:f,displacement:i.displacement!==void 0?i.displacement:[0,0],rotateWithView:d,declutterMode:i.declutterMode})||this,n.anchor_=i.anchor!==void 0?i.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=i.anchorOrigin!==void 0?i.anchorOrigin:Nl.TOP_LEFT,n.anchorXUnits_=i.anchorXUnits!==void 0?i.anchorXUnits:Tf.FRACTION,n.anchorYUnits_=i.anchorYUnits!==void 0?i.anchorYUnits:Tf.FRACTION,n.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null;var v=i.img!==void 0?i.img:null;n.imgSize_=i.imgSize;var x=i.src;or(!(x!==void 0&&v),4),or(!v||v&&n.imgSize_,5),(x===void 0||x.length===0)&&v&&(x=v.src||tr(v)),or(x!==void 0&&x.length>0,6);var b=i.src!==void 0?Pn.IDLE:Pn.LOADED;return n.color_=i.color!==void 0?Uh(i.color):null,n.iconImage_=k4e(v,x,n.imgSize_!==void 0?n.imgSize_:null,n.crossOrigin_,b,n.color_),n.offset_=i.offset!==void 0?i.offset:[0,0],n.offsetOrigin_=i.offsetOrigin!==void 0?i.offsetOrigin:Nl.TOP_LEFT,n.origin_=null,n.size_=i.size!==void 0?i.size:null,n}return e.prototype.clone=function(){var r=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(r)?r.slice():r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},e.prototype.getAnchor=function(){var r=this.normalizedAnchor_;if(!r){r=this.anchor_;var n=this.getSize();if(this.anchorXUnits_==Tf.FRACTION||this.anchorYUnits_==Tf.FRACTION){if(!n)return null;r=this.anchor_.slice(),this.anchorXUnits_==Tf.FRACTION&&(r[0]*=n[0]),this.anchorYUnits_==Tf.FRACTION&&(r[1]*=n[1])}if(this.anchorOrigin_!=Nl.TOP_LEFT){if(!n)return null;r===this.anchor_&&(r=this.anchor_.slice()),(this.anchorOrigin_==Nl.TOP_RIGHT||this.anchorOrigin_==Nl.BOTTOM_RIGHT)&&(r[0]=-r[0]+n[0]),(this.anchorOrigin_==Nl.BOTTOM_LEFT||this.anchorOrigin_==Nl.BOTTOM_RIGHT)&&(r[1]=-r[1]+n[1])}this.normalizedAnchor_=r}var i=this.getDisplacement();return[r[0]-i[0],r[1]+i[1]]},e.prototype.setAnchor=function(r){this.anchor_=r,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(r){return this.iconImage_.getImage(r)},e.prototype.getPixelRatio=function(r){return this.iconImage_.getPixelRatio(r)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var r=this.offset_;if(this.offsetOrigin_!=Nl.TOP_LEFT){var n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;r=r.slice(),(this.offsetOrigin_==Nl.TOP_RIGHT||this.offsetOrigin_==Nl.BOTTOM_RIGHT)&&(r[0]=i[0]-n[0]-r[0]),(this.offsetOrigin_==Nl.BOTTOM_LEFT||this.offsetOrigin_==Nl.BOTTOM_RIGHT)&&(r[1]=i[1]-n[1]-r[1])}return this.origin_=r,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(r){this.iconImage_.addEventListener(Vt.CHANGE,r)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(r){this.iconImage_.removeEventListener(Vt.CHANGE,r)},e}(PN),k9=Xir;p();var Qir="#333",Jir=function(){function t(e){var r=e||{};this.font_=r.font,this.rotation_=r.rotation,this.rotateWithView_=r.rotateWithView,this.scale_=r.scale,this.scaleArray_=Kn(r.scale!==void 0?r.scale:1),this.text_=r.text,this.textAlign_=r.textAlign,this.justify_=r.justify,this.textBaseline_=r.textBaseline,this.fill_=r.fill!==void 0?r.fill:new Dl({color:Qir}),this.maxAngle_=r.maxAngle!==void 0?r.maxAngle:Math.PI/4,this.placement_=r.placement!==void 0?r.placement:qN.POINT,this.overflow_=!!r.overflow,this.stroke_=r.stroke!==void 0?r.stroke:null,this.offsetX_=r.offsetX!==void 0?r.offsetX:0,this.offsetY_=r.offsetY!==void 0?r.offsetY:0,this.backgroundFill_=r.backgroundFill?r.backgroundFill:null,this.backgroundStroke_=r.backgroundStroke?r.backgroundStroke:null,this.padding_=r.padding===void 0?null:r.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getJustify=function(){return this.justify_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(e){this.overflow_=e},t.prototype.setFont=function(e){this.font_=e},t.prototype.setMaxAngle=function(e){this.maxAngle_=e},t.prototype.setOffsetX=function(e){this.offsetX_=e},t.prototype.setOffsetY=function(e){this.offsetY_=e},t.prototype.setPlacement=function(e){this.placement_=e},t.prototype.setRotateWithView=function(e){this.rotateWithView_=e},t.prototype.setFill=function(e){this.fill_=e},t.prototype.setRotation=function(e){this.rotation_=e},t.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Kn(e!==void 0?e:1)},t.prototype.setStroke=function(e){this.stroke_=e},t.prototype.setText=function(e){this.text_=e},t.prototype.setTextAlign=function(e){this.textAlign_=e},t.prototype.setJustify=function(e){this.justify_=e},t.prototype.setTextBaseline=function(e){this.textBaseline_=e},t.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},t.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},t.prototype.setPadding=function(e){this.padding_=e},t}(),q9=Jir;var Ec=.5;function q4e(t,e,r,n,i,o,l){var f=t[0]*Ec,d=t[1]*Ec,v=qi(f,d);v.imageSmoothingEnabled=!1;for(var x=v.canvas,b=new L4e(v,Ec,i,null,l),A=r.length,P=Math.floor((256*256*256-1)/A),N={},j=1;j<=A;++j){var D=r[j-1],F=D.getStyleFunction()||n;if(n){var U=F(D,o);if(U){Array.isArray(U)||(U=[U]);for(var $=j*P,Z="#"+("000000"+$.toString(16)).slice(-6),ie=0,ne=U.length;ie<ne;++ie){var ae=U[ie],de=ae.getGeometryFunction()(D);if(!(!de||!ki(i,de.getExtent()))){var ye=ae.clone(),me=ye.getFill();me&&me.setColor(Z);var be=ye.getStroke();be&&(be.setColor(Z),be.setLineDash(null)),ye.setText(void 0);var Ne=ae.getImage();if(Ne&&Ne.getOpacity()!==0){var Ce=Ne.getImageSize();if(!Ce)continue;var qe=qi(Ce[0],Ce[1],void 0,{alpha:!1}),He=qe.canvas;qe.fillStyle=Z,qe.fillRect(0,0,He.width,He.height),ye.setImage(new k9({img:He,imgSize:Ce,anchor:Ne.getAnchor(),anchorXUnits:Tf.PIXELS,anchorYUnits:Tf.PIXELS,offset:Ne.getOrigin(),opacity:1,size:Ne.getSize(),scale:Ne.getScale(),rotation:Ne.getRotation(),rotateWithView:Ne.getRotateWithView()}))}var Ke=ye.getZIndex()||0,Je=N[Ke];Je||(Je={},N[Ke]=Je,Je.Polygon=[],Je.Circle=[],Je.LineString=[],Je.Point=[]),Je[de.getType().replace("Multi","")].push(de,ye)}}}}}for(var We=Object.keys(N).map(Number).sort(Pl),j=0,lt=We.length;j<lt;++j){var Je=N[We[j]];for(var pt in Je)for(var dt=Je[pt],ie=0,ne=dt.length;ie<ne;ie+=2){b.setStyle(dt[ie+1]);for(var ze=0,Dt=e.length;ze<Dt;++ze)b.setTransform(e[ze]),b.drawGeometry(dt[ie])}}return v.getImageData(0,0,x.width,x.height)}function F4e(t,e,r){var n=[];if(r){var i=Math.floor(Math.round(t[0])*Ec),o=Math.floor(Math.round(t[1])*Ec),l=(Zn(i,0,r.width-1)+Zn(o,0,r.height-1)*r.width)*4,f=r.data[l],d=r.data[l+1],v=r.data[l+2],x=v+256*(d+256*f),b=Math.floor((256*256*256-1)/e.length);x&&x%b===0&&n.push(e[x/b-1])}return n}p();var eor=.5,j4e={Point:sor,LineString:ior,Polygon:uor,MultiPoint:lor,MultiLineString:oor,MultiPolygon:aor,GeometryCollection:nor,Circle:tor};function z4e(t,e){return parseInt(tr(t),10)-parseInt(tr(e),10)}function U4e(t,e){var r=zN(t,e);return r*r}function zN(t,e){return eor*t/e}function tor(t,e,r,n,i){var o=r.getFill(),l=r.getStroke();if(o||l){var f=t.getBuilder(r.getZIndex(),"Circle");f.setFillStrokeStyle(o,l),f.drawCircle(e,n)}var d=r.getText();if(d&&d.getText()){var v=(i||t).getBuilder(r.getZIndex(),"Text");v.setTextStyle(d),v.drawText(e,n)}}function F9(t,e,r,n,i,o,l){var f=!1,d=r.getImage();if(d){var v=d.getImageState();v==Pn.LOADED||v==Pn.ERROR?d.unlistenImageChange(i):(v==Pn.IDLE&&d.load(),d.listenImageChange(i),f=!0)}return ror(t,e,r,n,o,l),f}function ror(t,e,r,n,i,o){var l=r.getGeometryFunction()(e);if(l){var f=l.simplifyTransformed(n,i),d=r.getRenderer();if(d)B4e(t,f,r,e);else{var v=j4e[f.getType()];v(t,f,r,e,o)}}}function B4e(t,e,r,n){if(e.getType()=="GeometryCollection"){for(var i=e.getGeometries(),o=0,l=i.length;o<l;++o)B4e(t,i[o],r,n);return}var f=t.getBuilder(r.getZIndex(),"Default");f.drawCustom(e,n,r.getRenderer(),r.getHitDetectionRenderer())}function nor(t,e,r,n,i){var o=e.getGeometriesArray(),l,f;for(l=0,f=o.length;l<f;++l){var d=j4e[o[l].getType()];d(t,o[l],r,n,i)}}function ior(t,e,r,n,i){var o=r.getStroke();if(o){var l=t.getBuilder(r.getZIndex(),"LineString");l.setFillStrokeStyle(null,o),l.drawLineString(e,n)}var f=r.getText();if(f&&f.getText()){var d=(i||t).getBuilder(r.getZIndex(),"Text");d.setTextStyle(f),d.drawText(e,n)}}function oor(t,e,r,n,i){var o=r.getStroke();if(o){var l=t.getBuilder(r.getZIndex(),"LineString");l.setFillStrokeStyle(null,o),l.drawMultiLineString(e,n)}var f=r.getText();if(f&&f.getText()){var d=(i||t).getBuilder(r.getZIndex(),"Text");d.setTextStyle(f),d.drawText(e,n)}}function aor(t,e,r,n,i){var o=r.getFill(),l=r.getStroke();if(l||o){var f=t.getBuilder(r.getZIndex(),"Polygon");f.setFillStrokeStyle(o,l),f.drawMultiPolygon(e,n)}var d=r.getText();if(d&&d.getText()){var v=(i||t).getBuilder(r.getZIndex(),"Text");v.setTextStyle(d),v.drawText(e,n)}}function sor(t,e,r,n,i){var o=r.getImage(),l=r.getText(),f;if(o){if(o.getImageState()!=Pn.LOADED)return;var d=t;if(i){var v=o.getDeclutterMode();if(v!=="none")if(d=i,v==="obstacle"){var x=t.getBuilder(r.getZIndex(),"Image");x.setImageStyle(o,f),x.drawPoint(e,n)}else l&&l.getText()&&(f={})}var b=d.getBuilder(r.getZIndex(),"Image");b.setImageStyle(o,f),b.drawPoint(e,n)}if(l&&l.getText()){var A=t;i&&(A=i);var P=A.getBuilder(r.getZIndex(),"Text");P.setTextStyle(l,f),P.drawText(e,n)}}function lor(t,e,r,n,i){var o=r.getImage(),l=r.getText(),f;if(o){if(o.getImageState()!=Pn.LOADED)return;var d=t;if(i){var v=o.getDeclutterMode();if(v!=="none")if(d=i,v==="obstacle"){var x=t.getBuilder(r.getZIndex(),"Image");x.setImageStyle(o,f),x.drawMultiPoint(e,n)}else l&&l.getText()&&(f={})}var b=d.getBuilder(r.getZIndex(),"Image");b.setImageStyle(o,f),b.drawMultiPoint(e,n)}if(l&&l.getText()){var A=t;i&&(A=i);var P=A.getBuilder(r.getZIndex(),"Text");P.setTextStyle(l,f),P.drawText(e,n)}}function uor(t,e,r,n,i){var o=r.getFill(),l=r.getStroke();if(o||l){var f=t.getBuilder(r.getZIndex(),"Polygon");f.setFillStrokeStyle(o,l),f.drawPolygon(e,n)}var d=r.getText();if(d&&d.getText()){var v=(i||t).getBuilder(r.getZIndex(),"Text");v.setTextStyle(d),v.drawText(e,n)}}var cor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hor=function(t){cor(e,t);function e(r){var n=t.call(this,r)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=Bi(),n.wrappedRenderedExtent_=Bi(),n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n.compositionContext_=null,n.opacity_=1,n}return e.prototype.renderWorlds=function(r,n,i){var o=n.extent,l=n.viewState,f=l.center,d=l.resolution,v=l.projection,x=l.rotation,b=v.getExtent(),A=this.getLayer().getSource(),P=n.pixelRatio,N=n.viewHints,j=!(N[Bo.ANIMATING]||N[Bo.INTERACTING]),D=this.compositionContext_,F=Math.round(n.size[0]*P),U=Math.round(n.size[1]*P),$=A.getWrapX()&&v.canWrapX(),Z=$?gn(b):null,ie=$?Math.ceil((o[2]-b[2])/Z)+1:1,ne=$?Math.floor((o[0]-b[0])/Z):0;do{var ae=this.getRenderTransform(f,d,x,P,F,U,ne*Z);r.execute(D,1,ae,x,j,void 0,i)}while(++ne<ie)},e.prototype.setupCompositionContext_=function(){if(this.opacity_!==1){var r=qi(this.context.canvas.width,this.context.canvas.height,O9);this.compositionContext_=r}else this.compositionContext_=this.context},e.prototype.releaseCompositionContext_=function(){if(this.opacity_!==1){var r=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=r,ON(this.compositionContext_),O9.push(this.compositionContext_.canvas),this.compositionContext_=null}},e.prototype.renderDeclutter=function(r){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,r,r.declutterTree),this.releaseCompositionContext_())},e.prototype.renderFrame=function(r,n){var i=r.pixelRatio,o=r.layerStatesArray[r.layerIndex];uze(this.pixelTransform,1/i,1/i),nx(this.inversePixelTransform,this.pixelTransform);var l=oN(this.pixelTransform);this.useContainer(n,l,this.getBackground(r));var f=this.context,d=f.canvas,v=this.replayGroup_,x=this.declutterExecutorGroup;if((!v||v.isEmpty())&&(!x||x.isEmpty()))return null;var b=Math.round(r.size[0]*i),A=Math.round(r.size[1]*i);d.width!=b||d.height!=A?(d.width=b,d.height=A,d.style.transform!==l&&(d.style.transform=l)):this.containerReused||f.clearRect(0,0,b,A),this.preRender(f,r);var P=r.viewState,N=P.projection;this.opacity_=o.opacity,this.setupCompositionContext_();var j=!1,D=!0;if(o.extent&&this.clipping){var F=$a(o.extent,N);D=ki(F,r.extent),j=D&&!Fh(F,r.extent),j&&this.clipUnrotated(this.compositionContext_,r,F)}return D&&this.renderWorlds(v,r),j&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(f,r),this.renderedRotation_!==P.rotation&&(this.renderedRotation_=P.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(r){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];$n(this.pixelTransform,i);var o=this.renderedCenter_,l=this.renderedResolution_,f=this.renderedRotation_,d=this.renderedProjection_,v=this.wrappedRenderedExtent_,x=this.getLayer(),b=[],A=i[0]*Ec,P=i[1]*Ec;b.push(this.getRenderTransform(o,l,f,Ec,A,P,0).slice());var N=x.getSource(),j=d.getExtent();if(N.getWrapX()&&d.canWrapX()&&!Fh(j,v)){for(var D=v[0],F=gn(j),U=0,$=void 0;D<j[0];)--U,$=F*U,b.push(this.getRenderTransform(o,l,f,Ec,A,P,$).slice()),D+=F;for(U=0,D=v[2];D>j[2];)++U,$=F*U,b.push(this.getRenderTransform(o,l,f,Ec,A,P,$).slice()),D-=F}this.hitDetectionImageData_=q4e(i,b,this.renderedFeatures_,x.getStyleFunction(),v,l,f)}n(F4e(r,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(r,n,i,o,l){var f=this;if(this.replayGroup_){var d=n.viewState.resolution,v=n.viewState.rotation,x=this.getLayer(),b={},A=function(j,D,F){var U=tr(j),$=b[U];if($){if($!==!0&&F<$.distanceSq){if(F===0)return b[U]=!0,l.splice(l.lastIndexOf($),1),o(j,x,D);$.geometry=D,$.distanceSq=F}}else{if(F===0)return b[U]=!0,o(j,x,D);l.push(b[U]={feature:j,layer:x,geometry:D,distanceSq:F,callback:o})}},P,N=[this.replayGroup_];return this.declutterExecutorGroup&&N.push(this.declutterExecutorGroup),N.some(function(j){return P=j.forEachFeatureAtCoordinate(r,d,v,i,A,j===f.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(D){return D.value}):null)}),P}},e.prototype.handleFontsChanged=function(){var r=this.getLayer();r.getVisible()&&this.replayGroup_&&r.changed()},e.prototype.handleStyleImageChange_=function(r){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(r){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var o=r.viewHints[Bo.ANIMATING],l=r.viewHints[Bo.INTERACTING],f=n.getUpdateWhileAnimating(),d=n.getUpdateWhileInteracting();if(this.ready&&!f&&o||!d&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var v=r.extent,x=r.viewState,b=x.projection,A=x.resolution,P=r.pixelRatio,N=n.getRevision(),j=n.getRenderBuffer(),D=n.getRenderOrder();D===void 0&&(D=z4e);var F=x.center.slice(),U=vc(v,j*A),$=U.slice(),Z=[U.slice()],ie=b.getExtent();if(i.getWrapX()&&b.canWrapX()&&!Fh(ie,r.extent)){var ne=gn(ie),ae=Math.max(gn(U)/2,ne);U[0]=ie[0]-ae,U[2]=ie[2]+ae,dN(F,b);var de=HY(Z[0],b);de[0]<ie[0]&&de[2]<ie[2]?Z.push([de[0]+ne,de[1],de[2]+ne,de[3]]):de[0]>ie[0]&&de[2]>ie[2]&&Z.push([de[0]-ne,de[1],de[2]-ne,de[3]])}if(this.ready&&this.renderedResolution_==A&&this.renderedRevision_==N&&this.renderedRenderOrder_==D&&Fh(this.wrappedRenderedExtent_,U))return Ua(this.renderedExtent_,$)||(this.hitDetectionImageData_=null,this.renderedExtent_=$),this.renderedCenter_=F,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var ye=new R9(zN(A,P),U,A,P),me;this.getLayer().getDeclutter()&&(me=new R9(zN(A,P),U,A,P));var be=xu(),Ne;if(be){for(var Ce=0,qe=Z.length;Ce<qe;++Ce){var He=Z[Ce],Ke=Jd(He,b);i.loadFeatures(Ke,Dze(A,b),be)}Ne=UT(be,b)}else for(var Ce=0,qe=Z.length;Ce<qe;++Ce)i.loadFeatures(Z[Ce],A,b);var Je=U4e(A,P),We=!0,lt=function(Ot){var Ue,nt=Ot.getStyleFunction()||n.getStyleFunction();if(nt&&(Ue=nt(Ot,A)),Ue){var Ze=this.renderFeature(Ot,Je,Ue,ye,Ne,me);We=We&&!Ze}}.bind(this),pt=Jd(U,b),dt=i.getFeaturesInExtent(pt);D&&dt.sort(D);for(var Ce=0,qe=dt.length;Ce<qe;++Ce)lt(dt[Ce]);this.renderedFeatures_=dt,this.ready=We;var ze=ye.finish(),Dt=new N9(U,A,P,i.getOverlaps(),ze,n.getRenderBuffer());return me&&(this.declutterExecutorGroup=new N9(U,A,P,i.getOverlaps(),me.finish(),n.getRenderBuffer())),this.renderedResolution_=A,this.renderedRevision_=N,this.renderedRenderOrder_=D,this.renderedExtent_=$,this.wrappedRenderedExtent_=U,this.renderedCenter_=F,this.renderedProjection_=b,this.replayGroup_=Dt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(r,n,i,o,l,f){if(!i)return!1;var d=!1;if(Array.isArray(i))for(var v=0,x=i.length;v<x;++v)d=F9(o,r,i[v],n,this.boundHandleStyleImageChange_,l,f)||d;else d=F9(o,r,i,n,this.boundHandleStyleImageChange_,l,f);return d},e}(jN),V4e=hor;var por=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dor=function(t){por(e,t);function e(r){return t.call(this,r)||this}return e.prototype.createRenderer=function(){return new V4e(this)},e}(S4e),Su=dor;p();p();var G4e=je(v9(),1);var mor=function(){function t(e){this.rbush_=new G4e.default(e),this.items_={}}return t.prototype.insert=function(e,r){var n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:r};this.rbush_.insert(n),this.items_[tr(r)]=n},t.prototype.load=function(e,r){for(var n=new Array(r.length),i=0,o=r.length;i<o;i++){var l=e[i],f=r[i],d={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:f};n[i]=d,this.items_[tr(f)]=d}this.rbush_.load(n)},t.prototype.remove=function(e){var r=tr(e),n=this.items_[r];return delete this.items_[r],this.rbush_.remove(n)!==null},t.prototype.update=function(e,r){var n=this.items_[tr(r)],i=[n.minX,n.minY,n.maxX,n.maxY];jh(i,e)||(this.remove(r),this.insert(e,r))},t.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(r){return r.value})},t.prototype.getInExtent=function(e){var r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},n=this.rbush_.search(r);return n.map(function(i){return i.value})},t.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},t.prototype.forEachInExtent=function(e,r){return this.forEach_(this.getInExtent(e),r)},t.prototype.forEach_=function(e,r){for(var n,i=0,o=e.length;i<o;i++)if(n=r(e[i]),n)return n;return n},t.prototype.isEmpty=function(){return mc(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(e){var r=this.rbush_.toJSON();return Ga(r.minX,r.minY,r.maxX,r.maxY,e)},t.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var r in e.items_)this.items_[r]=e.items_[r]},t}(),aI=mor;p();var gor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vor=function(t){gor(e,t);function e(r){var n=t.call(this)||this;n.projection=ii(r.projection),n.attributions_=$4e(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(o,l){i.viewResolver=o,i.viewRejector=l}),n}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return ir()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(r){this.attributions_=$4e(r),this.changed()},e.prototype.setState=function(r){this.state_=r,this.changed()},e}(So);function $4e(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}var UN=vor;p();var vs={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};p();function H4e(t,e){return[[-1/0,-1/0,1/0,1/0]]}p();var yor=!1;function _or(t,e,r,n,i,o,l){var f=new XMLHttpRequest;f.open("GET",typeof t=="function"?t(r,n,i):t,!0),e.getType()=="arraybuffer"&&(f.responseType="arraybuffer"),f.withCredentials=yor,f.onload=function(d){if(!f.status||f.status>=200&&f.status<300){var v=e.getType(),x=void 0;v=="json"||v=="text"?x=f.responseText:v=="xml"?(x=f.responseXML,x||(x=new DOMParser().parseFromString(f.responseText,"application/xml"))):v=="arraybuffer"&&(x=f.response),x?o(e.readFeatures(x,{extent:r,featureProjection:i}),e.readProjection(x)):l()}else l()},f.onerror=l,f.send()}function j9(t,e){return function(r,n,i,o,l){var f=this;_or(t,e,r,n,i,function(d,v){f.addFeatures(d),o!==void 0&&o(d)},l||Rl)}}var W4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sm=function(t){W4e(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.feature=n,o.features=i,o}return e}(Ni);var xor=function(t){W4e(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{attributions:i.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:i.wrapX!==void 0?i.wrapX:!0})||this,n.on,n.once,n.un,n.loader_=Rl,n.format_=i.format,n.overlaps_=i.overlaps===void 0?!0:i.overlaps,n.url_=i.url,i.loader!==void 0?n.loader_=i.loader:n.url_!==void 0&&(or(n.format_,7),n.loader_=j9(n.url_,n.format_)),n.strategy_=i.strategy!==void 0?i.strategy:H4e;var o=i.useSpatialIndex!==void 0?i.useSpatialIndex:!0;n.featuresRtree_=o?new aI:null,n.loadedExtentsRtree_=new aI,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null;var l,f;return Array.isArray(i.features)?f=i.features:i.features&&(l=i.features,f=l.getArray()),!o&&l===void 0&&(l=new ni(f)),f!==void 0&&n.addFeaturesInternal(f),l!==void 0&&n.bindFeaturesCollection_(l),n}return e.prototype.addFeature=function(r){this.addFeatureInternal(r),this.changed()},e.prototype.addFeatureInternal=function(r){var n=tr(r);if(!this.addToIndex_(n,r)){this.featuresCollection_&&this.featuresCollection_.remove(r);return}this.setupChangeEvents_(n,r);var i=r.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,r)}else this.nullGeometryFeatures_[n]=r;this.dispatchEvent(new sm(vs.ADDFEATURE,r))},e.prototype.setupChangeEvents_=function(r,n){this.featureChangeKeys_[r]=[qr(n,Vt.CHANGE,this.handleFeatureChange_,this),qr(n,dc.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(r,n){var i=!0,o=n.getId();return o!==void 0&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=n),i&&(or(!(r in this.uidIndex_),30),this.uidIndex_[r]=n),i},e.prototype.addFeatures=function(r){this.addFeaturesInternal(r),this.changed()},e.prototype.addFeaturesInternal=function(r){for(var n=[],i=[],o=[],l=0,f=r.length;l<f;l++){var d=r[l],v=tr(d);this.addToIndex_(v,d)&&i.push(d)}for(var l=0,x=i.length;l<x;l++){var d=i[l],v=tr(d);this.setupChangeEvents_(v,d);var b=d.getGeometry();if(b){var A=b.getExtent();n.push(A),o.push(d)}else this.nullGeometryFeatures_[v]=d}if(this.featuresRtree_&&this.featuresRtree_.load(n,o),this.hasListener(vs.ADDFEATURE))for(var l=0,P=i.length;l<P;l++)this.dispatchEvent(new sm(vs.ADDFEATURE,i[l]))},e.prototype.bindFeaturesCollection_=function(r){var n=!1;this.addEventListener(vs.ADDFEATURE,function(i){n||(n=!0,r.push(i.feature),n=!1)}),this.addEventListener(vs.REMOVEFEATURE,function(i){n||(n=!0,r.remove(i.feature),n=!1)}),r.addEventListener(di.ADD,function(i){n||(n=!0,this.addFeature(i.element),n=!1)}.bind(this)),r.addEventListener(di.REMOVE,function(i){n||(n=!0,this.removeFeature(i.element),n=!1)}.bind(this)),this.featuresCollection_=r},e.prototype.clear=function(r){if(r){for(var n in this.featureChangeKeys_){var i=this.featureChangeKeys_[n];i.forEach(an)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var o=function(d){this.removeFeatureInternal(d)}.bind(this);this.featuresRtree_.forEach(o);for(var l in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[l])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var f=new sm(vs.CLEAR);this.dispatchEvent(f),this.changed()},e.prototype.forEachFeature=function(r){if(this.featuresRtree_)return this.featuresRtree_.forEach(r);this.featuresCollection_&&this.featuresCollection_.forEach(r)},e.prototype.forEachFeatureAtCoordinateDirect=function(r,n){var i=[r[0],r[1],r[0],r[1]];return this.forEachFeatureInExtent(i,function(o){var l=o.getGeometry();if(l.intersectsCoordinate(r))return n(o)})},e.prototype.forEachFeatureInExtent=function(r,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(r,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},e.prototype.forEachFeatureIntersectingExtent=function(r,n){return this.forEachFeatureInExtent(r,function(i){var o=i.getGeometry();if(o.intersectsExtent(r)){var l=n(i);if(l)return l}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var r;return this.featuresCollection_?r=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(r=this.featuresRtree_.getAll(),mc(this.nullGeometryFeatures_)||ta(r,QD(this.nullGeometryFeatures_))),r},e.prototype.getFeaturesAtCoordinate=function(r){var n=[];return this.forEachFeatureAtCoordinateDirect(r,function(i){n.push(i)}),n},e.prototype.getFeaturesInExtent=function(r,n){var i=this;if(this.featuresRtree_){var o=n&&n.canWrapX()&&this.getWrapX();if(!o)return this.featuresRtree_.getInExtent(r);var l=mze(r,n);return[].concat.apply([],l.map(function(f){return i.featuresRtree_.getInExtent(f)}))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(r,n){var i=r[0],o=r[1],l=null,f=[NaN,NaN],d=1/0,v=[-1/0,-1/0,1/0,1/0],x=n||ds;return this.featuresRtree_.forEachInExtent(v,function(b){if(x(b)){var A=b.getGeometry(),P=d;if(d=A.closestPointXY(i,o,f,d),d<P){l=b;var N=Math.sqrt(d);v[0]=i-N,v[1]=o-N,v[2]=i+N,v[3]=o+N}}}),l},e.prototype.getExtent=function(r){return this.featuresRtree_.getExtent(r)},e.prototype.getFeatureById=function(r){var n=this.idIndex_[r.toString()];return n!==void 0?n:null},e.prototype.getFeatureByUid=function(r){var n=this.uidIndex_[r];return n!==void 0?n:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(r){var n=r.target,i=tr(n),o=n.getGeometry();if(!o)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{var l=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(l,n)):this.featuresRtree_&&this.featuresRtree_.update(l,n)}var f=n.getId();if(f!==void 0){var d=f.toString();this.idIndex_[d]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[d]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new sm(vs.CHANGEFEATURE,n))},e.prototype.hasFeature=function(r){var n=r.getId();return n!==void 0?n in this.idIndex_:tr(r)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&mc(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0},e.prototype.loadFeatures=function(r,n,i){for(var o=this.loadedExtentsRtree_,l=this.strategy_(r,n,i),f=function(b,A){var P=l[b],N=o.forEachInExtent(P,function(j){return Fh(j.extent,P)});N||(++d.loadingExtentsCount_,d.dispatchEvent(new sm(vs.FEATURESLOADSTART)),d.loader_.call(d,P,n,i,function(j){--this.loadingExtentsCount_,this.dispatchEvent(new sm(vs.FEATURESLOADEND,void 0,j))}.bind(d),function(){--this.loadingExtentsCount_,this.dispatchEvent(new sm(vs.FEATURESLOADERROR))}.bind(d)),o.insert(P,{extent:P.slice()}))},d=this,v=0,x=l.length;v<x;++v)f(v,x);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(r){var n=this.loadedExtentsRtree_,i;n.forEachInExtent(r,function(o){if(jh(o.extent,r))return i=o,!0}),i&&n.remove(i)},e.prototype.removeFeature=function(r){if(r){var n=tr(r);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(r);var i=this.removeFeatureInternal(r);i&&this.changed()}},e.prototype.removeFeatureInternal=function(r){var n=tr(r),i=this.featureChangeKeys_[n];if(i){i.forEach(an),delete this.featureChangeKeys_[n];var o=r.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[n],this.dispatchEvent(new sm(vs.REMOVEFEATURE,r)),r}},e.prototype.removeFromIdIndex_=function(r){var n=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===r){delete this.idIndex_[i],n=!0;break}return n},e.prototype.setLoader=function(r){this.loader_=r},e.prototype.setUrl=function(r){or(this.format_,7),this.url_=r,this.setLoader(j9(r,this.format_))},e}(UN),If=xor;var W9=je(TL(),1);p();var z9=class{constructor(){this.listeners_=[]}on(e,r){this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push(r)}off(e,r){let n=this.listeners_[e];if(n){let i=n.indexOf(r);i>-1&&this.listeners_[e].slice(i,1)}}dispatch(e,r){let n=this.listeners_[e];if(n)for(let i=0,o=n.length;i<o;++i)n[i].call({},r)}},Z4e=z9;p();function Y4e(){return new NN({fill:new Dl({color:"rgba(255, 255, 255, 0.2)"}),stroke:new wc({color:"#ffcc33",width:2}),image:new mv({radius:7,fill:new Dl({color:"#ffcc33"})})})}function lm(t){let r=2*Math.PI*8/6;return new NN({image:new mv({radius:8,fill:new Dl({color:"rgba(255,255,255,0.6)"}),stroke:new wc({color:"rgba(49,159,211,0.5)",width:15,lineDash:[0,r,r,r,r,r,r]})}),text:Wg(t)?new q9({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:t,fill:new Dl({color:"#aa3300"}),stroke:new wc({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}function BN(t){let r=2*Math.PI*8/6;return new NN({image:new mv({radius:8,fill:new Dl({color:"rgba(255,128,0,0.6)"}),stroke:new wc({color:"rgba(240,0,0,0.5)",width:15,lineDash:[0,r,r,r,r,r,r]})}),text:Wg(t)?new q9({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:t,fill:new Dl({color:"#aa3300"}),stroke:new wc({color:"#ffffff",width:3}),offsetX:10,offsetY:-5}):void 0})}p();var cI=je(TL(),1);p();p();var bor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K4e=function(t){bor(e,t);function e(r,n,i){var o=t.call(this)||this;if(i!==void 0&&n===void 0)o.setFlatCoordinates(i,r);else{var l=n||0;o.setCenterAndRadius(r,l,i)}return o}return e.prototype.clone=function(){var r=new e(this.flatCoordinates.slice(),void 0,this.layout);return r.applyProperties(this),r},e.prototype.closestPointXY=function(r,n,i,o){var l=this.flatCoordinates,f=r-l[0],d=n-l[1],v=f*f+d*d;if(v<o){if(v===0)for(var x=0;x<this.stride;++x)i[x]=l[x];else{var b=this.getRadius()/Math.sqrt(v);i[0]=l[0]+b*f,i[1]=l[1]+b*d;for(var x=2;x<this.stride;++x)i[x]=l[x]}return i.length=this.stride,v}else return o},e.prototype.containsXY=function(r,n){var i=this.flatCoordinates,o=r-i[0],l=n-i[1];return o*o+l*l<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(r){var n=this.flatCoordinates,i=n[this.stride]-n[0];return Ga(n[0]-i,n[1]-i,n[0]+i,n[1]+i,r)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var r=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return r*r+n*n},e.prototype.getType=function(){return"Circle"},e.prototype.intersectsExtent=function(r){var n=this.getExtent();if(ki(r,n)){var i=this.getCenter();return r[0]<=i[0]&&r[2]>=i[0]||r[1]<=i[1]&&r[3]>=i[1]?!0:ox(r,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(r){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],o=r.slice();o[n]=o[0]+i;for(var l=1;l<n;++l)o[n+l]=r[l];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(r,n,i){this.setLayout(i,r,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,l=_N(o,0,r,this.stride);o[l++]=o[0]+n;for(var f=1,d=this.stride;f<d;++f)o[l++]=o[f];o.length=l,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(r,n){},e.prototype.setRadius=function(r){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+r,this.changed()},e.prototype.rotate=function(r,n){var i=this.getCenter(),o=this.getStride();this.setCenter(dx(i,0,i.length,o,r,n,i)),this.changed()},e.prototype.translate=function(r,n){var i=this.getCenter(),o=this.getStride();this.setCenter(gN(i,0,i.length,o,r,n,i)),this.changed()},e}(Ha);K4e.prototype.transform;var X4e=K4e;p();var sI={ACTIVE:"active"};p();p();var wor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eor=function(t){wor(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.map=n,o.frameState=i!==void 0?i:null,o}return e}(Ni),um=Eor;var Sor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tor=function(t){Sor(e,t);function e(r,n,i,o,l,f){var d=t.call(this,r,n,l)||this;return d.originalEvent=i,d.pixel_=null,d.coordinate_=null,d.dragging=o!==void 0?o:!1,d.activePointers=f,d}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(um),Tu=Tor;p();var Qr={SINGLECLICK:"singleclick",CLICK:Vt.CLICK,DBLCLICK:Vt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};p();p();p();function U9(t){return Math.pow(t,3)}function Iu(t){return 1-U9(1-t)}function Q4e(t){return 3*t*t-2*t*t*t}function J4e(t){return t}var Ior=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Aor=function(t){Ior(e,t);function e(r){var n=t.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return e.prototype.getActive=function(){return this.get(sI.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(r){return!0},e.prototype.setActive=function(r){this.set(sI.ACTIVE,r)},e.prototype.setMap=function(r){this.map_=r},e}(So);function eUe(t,e,r){var n=t.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:r!==void 0?r:250,easing:J4e,center:t.getConstrainedCenter(i)})}}function Sx(t,e,r,n){var i=t.getZoom();if(i!==void 0){var o=t.getConstrainedZoom(i+e),l=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:l,anchor:r,duration:n!==void 0?n:250,easing:Iu})}}var Au=Aor;var Mor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cor=function(t){Mor(e,t);function e(r){var n=this,i=r||{};return n=t.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(r){return!1},e.prototype.handleDragEvent=function(r){},e.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==Qr.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==Qr.POINTERUP){var i=this.handleUpEvent(r);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(r.type==Qr.POINTERDOWN){var o=this.handleDownEvent(r);this.handlingDownUpSequence=o,n=this.stopDown(o)}else r.type==Qr.POINTERMOVE&&this.handleMoveEvent(r);return!n},e.prototype.handleMoveEvent=function(r){},e.prototype.handleUpEvent=function(r){return!1},e.prototype.stopDown=function(r){return r},e.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},e}(Au);function Tx(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return[r/e,n/e]}var rl=Cor;p();function lI(t){var e=arguments;return function(r){for(var n=!0,i=0,o=e.length;i<o&&(n=n&&e[i](r),!!n);++i);return n}}var tUe=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},rUe=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Por=function(t){var e=t.map.getTargetElement(),r=t.map.getOwnerDocument().activeElement;return e.contains(r)},VN=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?Por(t):!0},Ix=ds;var GN=function(t){var e=t.originalEvent;return e.button==0&&!(ize&&oze&&e.ctrlKey)},B9=gu;var Ax=function(t){return t.type==Qr.SINGLECLICK};var Mx=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var cm=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$N=function(t){var e=t.originalEvent,r=e.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!e.target.isContentEditable},HN=function(t){var e=t.originalEvent;return or(e!==void 0,56),e.pointerType=="mouse"};var WN=function(t){var e=t.originalEvent;return or(e!==void 0,56),e.isPrimary&&e.button===0};var nUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),In={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},ZN={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},YN=function(t){nUe(e,t);function e(r,n){var i=t.call(this,r)||this;return i.feature=n,i}return e}(Ni);var Ror=function(t){nUe(e,t);function e(r){var n=this,i=r;i.stopDown||(i.stopDown=gu),n=t.call(this,i)||this,n.on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=r.source?r.source:null,n.features_=r.features?r.features:null,n.snapTolerance_=r.snapTolerance?r.snapTolerance:12,n.type_=r.type,n.mode_=Lor(n.type_),n.stopClick_=!!r.stopClick,n.minPoints_=r.minPoints?r.minPoints:n.mode_===In.POLYGON?3:2,n.maxPoints_=n.mode_===In.CIRCLE?2:r.maxPoints?r.maxPoints:1/0,n.finishCondition_=r.finishCondition?r.finishCondition:ds,n.geometryLayout_=r.geometryLayout?r.geometryLayout:Yn.XY;var o=r.geometryFunction;if(!o){var l=n.mode_;if(l===In.CIRCLE)o=function(d,v,x){var b=v||new X4e([NaN,NaN]),A=Si(d[0],x),P=Xd(A,Si(d[d.length-1],x));b.setCenterAndRadius(A,Math.sqrt(P),this.geometryLayout_);var N=xu();return N&&b.transform(x,N),b};else{var f;l===In.POINT?f=Wa:l===In.LINE_STRING?f=zh:l===In.POLYGON&&(f=bc),o=function(d,v,x){return v?l===In.POLYGON?d[0].length?v.setCoordinates([d[0].concat([d[0][0]])],this.geometryLayout_):v.setCoordinates([],this.geometryLayout_):v.setCoordinates(d,this.geometryLayout_):v=new f(d,this.geometryLayout_),v}}}return n.geometryFunction_=o,n.dragVertexDelay_=r.dragVertexDelay!==void 0?r.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=r.clickTolerance?r.clickTolerance*r.clickTolerance:36,n.overlay_=new Su({source:new If({useSpatialIndex:!1,wrapX:r.wrapX?r.wrapX:!1}),style:r.style?r.style:Oor(),updateWhileInteracting:!0}),n.geometryName_=r.geometryName,n.condition_=r.condition?r.condition:Mx,n.freehandCondition_,r.freehand?n.freehandCondition_=Ix:n.freehandCondition_=r.freehandCondition?r.freehandCondition:cm,n.addChangeListener(sI.ACTIVE,n.updateState_),n}return e.prototype.setMap=function(r){t.prototype.setMap.call(this,r),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(r){r.originalEvent.type===Vt.CONTEXTMENU&&r.originalEvent.preventDefault(),this.freehand_=this.mode_!==In.POINT&&this.freehandCondition_(r);var n=r.type===Qr.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&r.type===Qr.POINTERDRAG){var o=Date.now();o-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=r.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&r.type===Qr.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(r.coordinate),i=!1):this.freehand_&&r.type===Qr.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=r.type===Qr.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(r),this.shouldHandle_&&r.originalEvent.preventDefault()):(r.originalEvent.pointerType==="mouse"||r.type===Qr.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(r)):r.type===Qr.DBLCLICK&&(i=!1),t.prototype.handleEvent.call(this,r)&&i},e.prototype.handleDownEvent=function(r){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=r.pixel,this.finishCoordinate_||this.startDrawing_(r.coordinate),!0):this.condition_(r)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Tu(Qr.POINTERMOVE,r.map,r.originalEvent,!1,r.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=r.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(r){var n=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(r),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(r.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===In.POINT)&&(this.atFinish_(r.pixel)?this.finishCondition_(r)&&this.finishDrawing():this.addToDrawing_(r.coordinate)),n=!1}else this.freehand_&&this.abortDrawing();return!n&&this.stopClick_&&r.preventDefault(),n},e.prototype.handlePointerMove_=function(r){if(this.pointerType_=r.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var n=this.downPx_,i=r.pixel,o=n[0]-i[0],l=n[1]-i[1],f=o*o+l*l;if(this.shouldHandle_=this.freehand_?f>this.squaredClickTolerance_:f<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(r.coordinate):this.createOrUpdateSketchPoint_(r.coordinate.slice())},e.prototype.atFinish_=function(r){var n=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_],l=this.mode_;if(l===In.POINT)n=!0;else if(l===In.CIRCLE)n=this.sketchCoords_.length===2;else if(l===In.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(l===In.POLYGON){var f=this.sketchCoords_;i=f[0].length>this.minPoints_,o=[f[0][0],f[0][f[0].length-2]]}if(i)for(var d=this.getMap(),v=0,x=o.length;v<x;v++){var b=o[v],A=d.getPixelFromCoordinate(b),P=r[0]-A[0],N=r[1]-A[1],j=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(P*P+N*N)<=j,n){this.finishCoordinate_=b;break}}}return n},e.prototype.createOrUpdateSketchPoint_=function(r){if(!this.sketchPoint_)this.sketchPoint_=new Ol(new Wa(r)),this.updateSketchFeatures_();else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(r)}},e.prototype.createOrUpdateCustomSketchLine_=function(r){this.sketchLine_||(this.sketchLine_=new Ol);var n=r.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new zh(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(i))},e.prototype.startDrawing_=function(r){for(var n=this.getMap().getView().getProjection(),i=BT(this.geometryLayout_);r.length<i;)r.push(0);this.finishCoordinate_=r,this.mode_===In.POINT?this.sketchCoords_=r.slice():this.mode_===In.POLYGON?(this.sketchCoords_=[[r.slice(),r.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[r.slice(),r.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ol(new zh(this.sketchLineCoords_)));var o=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new Ol,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new YN(ZN.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(r){for(var n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),l=BT(this.geometryLayout_),f,d;r.length<l;)r.push(0);if(this.mode_===In.POINT?d=this.sketchCoords_:this.mode_===In.POLYGON?(f=this.sketchCoords_[0],d=f[f.length-1],this.atFinish_(n.getPixelFromCoordinate(r))&&(r=this.finishCoordinate_.slice())):(f=this.sketchCoords_,d=f[f.length-1]),d[0]=r[0],d[1]=r[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_){var v=this.sketchPoint_.getGeometry();v.setCoordinates(r)}if(i.getType()==="Polygon"&&this.mode_!==In.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var x=this.sketchLine_.getGeometry();x.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(r){var n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o,l,f=this.mode_;f===In.LINE_STRING||f===In.CIRCLE?(this.finishCoordinate_=r.slice(),l=this.sketchCoords_,l.length>=this.maxPoints_&&(this.freehand_?l.pop():o=!0),l.push(r.slice()),this.geometryFunction_(l,n,i)):f===In.POLYGON&&(l=this.sketchCoords_[0],l.length>=this.maxPoints_&&(this.freehand_?l.pop():o=!0),l.push(r.slice()),o&&(this.finishCoordinate_=l[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(r.slice()),this.updateSketchFeatures_(),o&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var r=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i,o=this.mode_;if(o===In.LINE_STRING||o===In.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var l=this.finishCoordinate_.slice();i[i.length-1]=l,this.createOrUpdateSketchPoint_(l)}this.geometryFunction_(i,r,n),r.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(r)}else if(o===In.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var f=this.sketchLine_.getGeometry();if(i.length>=2){var l=i[i.length-2].slice();i[i.length-1]=l,this.createOrUpdateSketchPoint_(l)}f.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,r,n)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var r=this.abortDrawing_();if(r){var n=this.sketchCoords_,i=r.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===In.LINE_STRING?(n.pop(),this.geometryFunction_(n,i,o)):this.mode_===In.POLYGON&&(n[0].pop(),this.geometryFunction_(n,i,o),n=i.getCoordinates()),this.type_==="MultiPoint"?r.setGeometry(new mx([n])):this.type_==="MultiLineString"?r.setGeometry(new SN([n])):this.type_==="MultiPolygon"&&r.setGeometry(new AN([n])),this.dispatchEvent(new YN(ZN.DRAWEND,r)),this.features_&&this.features_.push(r),this.source_&&this.source_.addFeature(r)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var r=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),r},e.prototype.abortDrawing=function(){var r=this.abortDrawing_();r&&this.dispatchEvent(new YN(ZN.DRAWABORT,r))},e.prototype.appendCoordinates=function(r){var n=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(r[0]);var o;if(n===In.LINE_STRING||n===In.CIRCLE)o=this.sketchCoords_;else if(n===In.POLYGON)o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&o.shift(),o.pop();for(var l=0;l<r.length;l++)this.addToDrawing_(r[l]);var f=r[r.length-1];this.addToDrawing_(f),this.modifyDrawing_(f)},e.prototype.extend=function(r){var n=r.getGeometry(),i=n;this.sketchFeature_=r,this.sketchCoords_=i.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new Ol(new Wa(o)),this.updateSketchFeatures_(),this.dispatchEvent(new YN(ZN.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var r=[];this.sketchFeature_&&r.push(this.sketchFeature_),this.sketchLine_&&r.push(this.sketchLine_),this.sketchPoint_&&r.push(this.sketchPoint_);var n=this.overlay_.getSource();n.clear(!0),n.addFeatures(r)},e.prototype.updateState_=function(){var r=this.getMap(),n=this.getActive();(!r||!n)&&this.abortDrawing(),this.overlay_.setMap(n?r:null)},e}(rl);function Oor(){var t=_x();return function(e,r){return t[e.getGeometry().getType()]}}function Lor(t){switch(t){case"Point":case"MultiPoint":return In.POINT;case"LineString":case"MultiLineString":return In.LINE_STRING;case"Polygon":case"MultiPolygon":return In.POLYGON;case"Circle":return In.CIRCLE;default:throw new Error("Invalid type: "+t)}}var KN=Ror;p();var lUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iUe=0,uI=1,oUe=[0,0,0,0],Cx=[],V9={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},G9=function(t){lUe(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.features=n,o.mapBrowserEvent=i,o}return e}(Ni);var Dor=function(t){lUe(e,t);function e(r){var n=t.call(this,r)||this;n.on,n.once,n.un,n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(n),n.condition_=r.condition?r.condition:WN,n.defaultDeleteCondition_=function(o){return tUe(o)&&Ax(o)},n.deleteCondition_=r.deleteCondition?r.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=r.insertVertexCondition?r.insertVertexCondition:Ix,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.featuresBeingModified_=null,n.rBush_=new aI,n.pixelTolerance_=r.pixelTolerance!==void 0?r.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new Su({source:new If({useSpatialIndex:!1,wrapX:!!r.wrapX}),style:r.style?r.style:kor(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n)},n.source_=null,n.hitDetection_=null;var i;if(r.features?i=r.features:r.source&&(n.source_=r.source,i=new ni(n.source_.getFeatures()),n.source_.addEventListener(vs.ADDFEATURE,n.handleSourceAdd_.bind(n)),n.source_.addEventListener(vs.REMOVEFEATURE,n.handleSourceRemove_.bind(n))),!i)throw new Error("The modify interaction requires features, a source or a layer");return r.hitDetection&&(n.hitDetection_=r.hitDetection),n.features_=i,n.features_.forEach(n.addFeature_.bind(n)),n.features_.addEventListener(di.ADD,n.handleFeatureAdd_.bind(n)),n.features_.addEventListener(di.REMOVE,n.handleFeatureRemove_.bind(n)),n.lastPointerEvent_=null,n.delta_=[0,0],n.snapToPointer_=r.snapToPointer===void 0?!n.hitDetection_:r.snapToPointer,n}return e.prototype.addFeature_=function(r){var n=r.getGeometry();if(n){var i=this.SEGMENT_WRITERS_[n.getType()];i&&i(r,n)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),r.addEventListener(Vt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(r,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new ni;for(var i=this.featuresBeingModified_.getArray(),o=0,l=n.length;o<l;++o)for(var f=n[o],d=0,v=f.length;d<v;++d){var x=f[d].feature;x&&i.indexOf(x)===-1&&this.featuresBeingModified_.push(x)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new G9(V9.MODIFYSTART,this.featuresBeingModified_,r))}},e.prototype.removeFeature_=function(r){this.removeFeatureSegmentData_(r),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.removeEventListener(Vt.CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(r){var n=this.rBush_,i=[];n.forEach(function(d){r===d.feature&&i.push(d)});for(var o=i.length-1;o>=0;--o){for(var l=i[o],f=this.dragSegments_.length-1;f>=0;--f)this.dragSegments_[f][0]===l&&this.dragSegments_.splice(f,1);n.remove(l)}},e.prototype.setActive=function(r){this.vertexFeature_&&!r&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,r)},e.prototype.setMap=function(r){this.overlay_.setMap(r),t.prototype.setMap.call(this,r)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(r){r.feature&&this.features_.push(r.feature)},e.prototype.handleSourceRemove_=function(r){r.feature&&this.features_.remove(r.feature)},e.prototype.handleFeatureAdd_=function(r){this.addFeature_(r.element)},e.prototype.handleFeatureChange_=function(r){if(!this.changingFeature_){var n=r.target;this.removeFeature_(n),this.addFeature_(n)}},e.prototype.handleFeatureRemove_=function(r){var n=r.element;this.removeFeature_(n)},e.prototype.writePointGeometry_=function(r,n){var i=n.getCoordinates(),o={feature:r,geometry:n,segment:[i,i]};this.rBush_.insert(n.getExtent(),o)},e.prototype.writeMultiPointGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o){var f=i[o],d={feature:r,geometry:n,depth:[o],index:o,segment:[f,f]};this.rBush_.insert(n.getExtent(),d)}},e.prototype.writeLineStringGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length-1;o<l;++o){var f=i.slice(o,o+2),d={feature:r,geometry:n,index:o,segment:f};this.rBush_.insert(Ea(f),d)}},e.prototype.writeMultiLineStringGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var f=i[o],d=0,v=f.length-1;d<v;++d){var x=f.slice(d,d+2),b={feature:r,geometry:n,depth:[o],index:d,segment:x};this.rBush_.insert(Ea(x),b)}},e.prototype.writePolygonGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var f=i[o],d=0,v=f.length-1;d<v;++d){var x=f.slice(d,d+2),b={feature:r,geometry:n,depth:[o],index:d,segment:x};this.rBush_.insert(Ea(x),b)}},e.prototype.writeMultiPolygonGeometry_=function(r,n){for(var i=n.getCoordinates(),o=0,l=i.length;o<l;++o)for(var f=i[o],d=0,v=f.length;d<v;++d)for(var x=f[d],b=0,A=x.length-1;b<A;++b){var P=x.slice(b,b+2),N={feature:r,geometry:n,depth:[d,o],index:b,segment:P};this.rBush_.insert(Ea(P),N)}},e.prototype.writeCircleGeometry_=function(r,n){var i=n.getCenter(),o={feature:r,geometry:n,index:iUe,segment:[i,i]},l={feature:r,geometry:n,index:uI,segment:[i,i]},f=[o,l];o.featureSegments=f,l.featureSegments=f,this.rBush_.insert(ix(i),o);var d=n,v=xu();if(v&&this.getMap()){var x=this.getMap().getView().getProjection();d=d.clone().transform(v,x),d=IN(d).transform(x,v)}this.rBush_.insert(d.getExtent(),l)},e.prototype.writeGeometryCollectionGeometry_=function(r,n){for(var i=n.getGeometriesArray(),o=0;o<i.length;++o){var l=i[o],f=this.SEGMENT_WRITERS_[l.getType()];f(r,l)}},e.prototype.createOrUpdateVertexFeature_=function(r,n,i){var o=this.vertexFeature_;if(!o)o=new Ol(new Wa(r)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o);else{var l=o.getGeometry();l.setCoordinates(r)}return o.set("features",n),o.set("geometries",i),o},e.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;this.lastPointerEvent_=r;var n;return!r.map.getView().getInteracting()&&r.type==Qr.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(r),this.vertexFeature_&&this.deleteCondition_(r)&&(r.type!=Qr.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),r.type==Qr.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,r)&&!n},e.prototype.handleDragEvent=function(r){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(r,this.dragSegments_);for(var n=[r.coordinate[0]+this.delta_[0],r.coordinate[1]+this.delta_[1]],i=[],o=[],l=0,f=this.dragSegments_.length;l<f;++l){var d=this.dragSegments_[l],v=d[0],x=v.feature;i.indexOf(x)===-1&&i.push(x);var b=v.geometry;o.indexOf(b)===-1&&o.push(b);for(var A=v.depth,P=void 0,N=v.segment,j=d[1];n.length<b.getStride();)n.push(N[j][n.length]);switch(b.getType()){case"Point":P=n,N[0]=n,N[1]=n;break;case"MultiPoint":P=b.getCoordinates(),P[v.index]=n,N[0]=n,N[1]=n;break;case"LineString":P=b.getCoordinates(),P[v.index+j]=n,N[j]=n;break;case"MultiLineString":P=b.getCoordinates(),P[A[0]][v.index+j]=n,N[j]=n;break;case"Polygon":P=b.getCoordinates(),P[A[0]][v.index+j]=n,N[j]=n;break;case"MultiPolygon":P=b.getCoordinates(),P[A[1]][A[0]][v.index+j]=n,N[j]=n;break;case"Circle":if(N[0]=n,N[1]=n,v.index===iUe)this.changingFeature_=!0,b.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0;var D=r.map.getView().getProjection(),F=XY(Si(b.getCenter(),D),Si(n,D)),U=xu();if(U){var $=b.clone().transform(U,D);$.setRadius(F),F=$.transform(D,U).getRadius()}b.setRadius(F),this.changingFeature_=!1}break;default:}P&&this.setGeometryCoordinates_(b,P)}this.createOrUpdateVertexFeature_(n,i,o)},e.prototype.handleDownEvent=function(r){if(!this.condition_(r))return!1;var n=r.coordinate;this.handlePointerAtPixel_(r.pixel,r.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;var i=this.vertexFeature_;if(i){var o=r.map.getView().getProjection(),l=[],f=i.getGeometry().getCoordinates(),d=Ea([f]),v=this.rBush_.getInExtent(d),x={};v.sort(Nor);for(var b=0,A=v.length;b<A;++b){var P=v[b],N=P.segment,j=tr(P.geometry),D=P.depth;if(D&&(j+="-"+D.join("-")),x[j]||(x[j]=new Array(2)),P.geometry.getType()==="Circle"&&P.index===uI){var F=sUe(n,P,o);gs(F,f)&&!x[j][0]&&(this.dragSegments_.push([P,0]),x[j][0]=P);continue}if(gs(N[0],f)&&!x[j][0]){this.dragSegments_.push([P,0]),x[j][0]=P;continue}if(gs(N[1],f)&&!x[j][1]){if(x[j][0]&&x[j][0].index===0){var U=P.geometry.getCoordinates();switch(P.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":U=U[D[1]];case"Polygon":if(P.index!==U[D[0]].length-2)continue;break;default:}}this.dragSegments_.push([P,1]),x[j][1]=P;continue}tr(N)in this.vertexSegments_&&!x[j][0]&&!x[j][1]&&this.insertVertexCondition_(r)&&l.push(P)}l.length&&this.willModifyFeatures_(r,[l]);for(var $=l.length-1;$>=0;--$)this.insertVertex_(l[$],f)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(r){for(var n=this.dragSegments_.length-1;n>=0;--n){var i=this.dragSegments_[n][0],o=i.geometry;if(o.getType()==="Circle"){var l=o.getCenter(),f=i.featureSegments[0],d=i.featureSegments[1];f.segment[0]=l,f.segment[1]=l,d.segment[0]=l,d.segment[1]=l,this.rBush_.update(ix(l),f);var v=o,x=xu();if(x){var b=r.map.getView().getProjection();v=v.clone().transform(x,b),v=IN(v).transform(b,x)}this.rBush_.update(v.getExtent(),d)}else this.rBush_.update(Ea(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new G9(V9.MODIFYEND,this.featuresBeingModified_,r)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(r){this.lastPixel_=r.pixel,this.handlePointerAtPixel_(r.pixel,r.map,r.coordinate)},e.prototype.handlePointerAtPixel_=function(r,n,i){var o=this,l=i||n.getCoordinateFromPixel(r),f=n.getView().getProjection(),d=function(qe,He){return aUe(l,qe,f)-aUe(l,He,f)},v,x;if(this.hitDetection_){var b=typeof this.hitDetection_=="object"?function(qe){return qe===o.hitDetection_}:void 0;n.forEachFeatureAtPixel(r,function(qe,He,Ke){if(Ke=Ke||qe.getGeometry(),Ke.getType()==="Point"&&J0(o.features_.getArray(),qe)){x=Ke;var Je=Ke.getFlatCoordinates().slice(0,2);v=[{feature:qe,geometry:Ke,segment:[Je,Je]}]}return!0},{layerFilter:b})}if(!v){var A=$a(ix(l,oUe),f),P=n.getView().getResolution()*this.pixelTolerance_,N=Jd(vc(A,P,oUe),f);v=this.rBush_.getInExtent(N)}if(v&&v.length>0){var j=v.sort(d)[0],D=j.segment,F=sUe(l,j,f),U=n.getPixelFromCoordinate(F),$=XY(r,U);if(x||$<=this.pixelTolerance_){var Z={};if(Z[tr(D)]=!0,this.snapToPointer_||(this.delta_[0]=F[0]-l[0],this.delta_[1]=F[1]-l[1]),j.geometry.getType()==="Circle"&&j.index===uI)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(F,[j.feature],[j.geometry]);else{var ie=n.getPixelFromCoordinate(D[0]),ne=n.getPixelFromCoordinate(D[1]),ae=Xd(U,ie),de=Xd(U,ne);$=Math.sqrt(Math.min(ae,de)),this.snappedToVertex_=$<=this.pixelTolerance_,this.snappedToVertex_&&(F=ae>de?D[1]:D[0]),this.createOrUpdateVertexFeature_(F,[j.feature],[j.geometry]);var ye={};ye[tr(j.geometry)]=!0;for(var me=1,be=v.length;me<be;++me){var Ne=v[me].segment;if(gs(D[0],Ne[0])&&gs(D[1],Ne[1])||gs(D[0],Ne[1])&&gs(D[1],Ne[0])){var Ce=tr(v[me].geometry);Ce in ye||(ye[Ce]=!0,Z[tr(Ne)]=!0)}else break}}this.vertexSegments_=Z;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(r,n){for(var i=r.segment,o=r.feature,l=r.geometry,f=r.depth,d=r.index,v;n.length<l.getStride();)n.push(0);switch(l.getType()){case"MultiLineString":v=l.getCoordinates(),v[f[0]].splice(d+1,0,n);break;case"Polygon":v=l.getCoordinates(),v[f[0]].splice(d+1,0,n);break;case"MultiPolygon":v=l.getCoordinates(),v[f[1]][f[0]].splice(d+1,0,n);break;case"LineString":v=l.getCoordinates(),v.splice(d+1,0,n);break;default:return}this.setGeometryCoordinates_(l,v);var x=this.rBush_;x.remove(r),this.updateSegmentIndices_(l,d,f,1);var b={segment:[i[0],n],feature:o,geometry:l,depth:f,index:d};x.insert(Ea(b.segment),b),this.dragSegments_.push([b,1]);var A={segment:[n,i[1]],feature:o,geometry:l,depth:f,index:d+1};x.insert(Ea(A.segment),A),this.dragSegments_.push([A,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Qr.POINTERDRAG){var r=this.lastPointerEvent_;this.willModifyFeatures_(r,this.dragSegments_);var n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new G9(V9.MODIFYEND,this.featuresBeingModified_,r)),this.featuresBeingModified_=null,n}return!1},e.prototype.removeVertex_=function(){var r=this.dragSegments_,n={},i=!1,o,l,f,d,v,x,b,A,P,N,j;for(v=r.length-1;v>=0;--v)f=r[v],N=f[0],j=tr(N.feature),N.depth&&(j+="-"+N.depth.join("-")),j in n||(n[j]={}),f[1]===0?(n[j].right=N,n[j].index=N.index):f[1]==1&&(n[j].left=N,n[j].index=N.index+1);for(j in n){switch(P=n[j].right,b=n[j].left,x=n[j].index,A=x-1,b!==void 0?N=b:N=P,A<0&&(A=0),d=N.geometry,l=d.getCoordinates(),o=l,i=!1,d.getType()){case"MultiLineString":l[N.depth[0]].length>2&&(l[N.depth[0]].splice(x,1),i=!0);break;case"LineString":l.length>2&&(l.splice(x,1),i=!0);break;case"MultiPolygon":o=o[N.depth[1]];case"Polygon":o=o[N.depth[0]],o.length>4&&(x==o.length-1&&(x=0),o.splice(x,1),i=!0,x===0&&(o.pop(),o.push(o[0]),A=o.length-1));break;default:}if(i){this.setGeometryCoordinates_(d,l);var D=[];if(b!==void 0&&(this.rBush_.remove(b),D.push(b.segment[0])),P!==void 0&&(this.rBush_.remove(P),D.push(P.segment[1])),b!==void 0&&P!==void 0){var F={depth:N.depth,feature:N.feature,geometry:N.geometry,index:A,segment:D};this.rBush_.insert(Ea(F.segment),F)}this.updateSegmentIndices_(d,x,N.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),r.length=0}}return i},e.prototype.setGeometryCoordinates_=function(r,n){this.changingFeature_=!0,r.setCoordinates(n),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(r,n,i,o){this.rBush_.forEachInExtent(r.getExtent(),function(l){l.geometry===r&&(i===void 0||l.depth===void 0||Ua(l.depth,i))&&l.index>n&&(l.index+=o)})},e}(rl);function Nor(t,e){return t.index-e.index}function aUe(t,e,r){var n=e.geometry;if(n.getType()==="Circle"){var i=n;if(e.index===uI){var o=xu();o&&(i=i.clone().transform(o,r));var l=Xd(i.getCenter(),Si(t,r)),f=Math.sqrt(l)-i.getRadius();return f*f}}var d=Si(t,r);return Cx[0]=Si(e.segment[0],r),Cx[1]=Si(e.segment[1],r),Cze(d,Cx)}function sUe(t,e,r){var n=e.geometry;if(n.getType()==="Circle"&&e.index===uI){var i=n,o=xu();return o&&(i=i.clone().transform(o,r)),Qd(i.getClosestPoint(Si(t,r)),r)}var l=Si(t,r);return Cx[0]=Si(e.segment[0],r),Cx[1]=Si(e.segment[1],r),Qd(KY(l,Cx),r)}function kor(){var t=_x();return function(e,r){return t.Point}}var XN=Dor;p();var uUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qor={SELECT:"select"},For=function(t){uUe(e,t);function e(r,n,i,o){var l=t.call(this,r)||this;return l.selected=n,l.deselected=i,l.mapBrowserEvent=o,l}return e}(Ni);var QN={},jor=function(t){uUe(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un;var i=r||{};n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=i.condition?i.condition:Ax,n.addCondition_=i.addCondition?i.addCondition:B9,n.removeCondition_=i.removeCondition?i.removeCondition:B9,n.toggleCondition_=i.toggleCondition?i.toggleCondition:cm,n.multi_=i.multi?i.multi:!1,n.filter_=i.filter?i.filter:ds,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.style_=i.style!==void 0?i.style:zor(),n.features_=i.features||new ni;var o;if(i.layers){if(typeof i.layers=="function")o=i.layers;else{var l=i.layers;o=function(f){return J0(l,f)}}}else o=ds;return n.layerFilter_=o,n.featureLayerAssociation_={},n}return e.prototype.addFeatureLayerAssociation_=function(r,n){this.featureLayerAssociation_[tr(r)]=n},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(r){return this.featureLayerAssociation_[tr(r)]},e.prototype.setHitTolerance=function(r){this.hitTolerance_=r},e.prototype.setMap=function(r){var n=this.getMap();n&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,r),r?(this.features_.addEventListener(di.ADD,this.boundAddFeature_),this.features_.addEventListener(di.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(di.ADD,this.boundAddFeature_),this.features_.removeEventListener(di.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(r){var n=r.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){var i=this.getMap().getAllLayers().find(function(o){if(o instanceof Su&&o.getSource()&&o.getSource().hasFeature(n))return o});i&&this.addFeatureLayerAssociation_(n,i)}},e.prototype.removeFeature_=function(r){var n=r.element;this.style_&&this.restorePreviousStyle_(n)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(r){var n=tr(r);n in QN||(QN[n]=r.getStyle()),r.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(r){for(var n=this.getMap().getInteractions().getArray(),i=n.length-1;i>=0;--i){var o=n[i];if(o!==this&&o instanceof e&&o.getStyle()&&o.getFeatures().getArray().lastIndexOf(r)!==-1){r.setStyle(o.getStyle());return}}var l=tr(r);r.setStyle(QN[l]),delete QN[l]},e.prototype.removeFeatureLayerAssociation_=function(r){delete this.featureLayerAssociation_[tr(r)]},e.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=this.addCondition_(r),i=this.removeCondition_(r),o=this.toggleCondition_(r),l=!n&&!i&&!o,f=r.map,d=this.getFeatures(),v=[],x=[];if(l){Ks(this.featureLayerAssociation_),f.forEachFeatureAtPixel(r.pixel,function(j,D){if(this.filter_(j,D))return this.addFeatureLayerAssociation_(j,D),x.push(j),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var b=d.getLength()-1;b>=0;--b){var A=d.item(b),P=x.indexOf(A);P>-1?x.splice(P,1):(d.remove(A),v.push(A))}x.length!==0&&d.extend(x)}else{f.forEachFeatureAtPixel(r.pixel,function(j,D){if(this.filter_(j,D))return(n||o)&&!J0(d.getArray(),j)?(this.addFeatureLayerAssociation_(j,D),x.push(j)):(i||o)&&J0(d.getArray(),j)&&(v.push(j),this.removeFeatureLayerAssociation_(j)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var N=v.length-1;N>=0;--N)d.remove(v[N]);d.extend(x)}return(x.length>0||v.length>0)&&this.dispatchEvent(new For(qor.SELECT,x,v,r)),!0},e}(Au);function zor(){var t=_x();return ta(t.Polygon,t.LineString),ta(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var $9=jor;function H9(t,e,r){r!==void 0&&r(),t.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let n=o=>{o.target.getTargetElement().style.cursor="grabbing"},i=o=>{o.target.getTargetElement().style.cursor="grab"};return t.on("movestart",n),t.on("moveend",i),e.on("movestart",n),e.on("moveend",i),{disable:()=>{t.un("movestart",n),t.un("moveend",i),e.un("movestart",n),e.un("moveend",i)}}}function cUe(t,e,r,n,i,o,l,f){let d="activateAddGcpAction";f!==void 0&&f();let v={START:"Erzeugen Sie einen Passpunkt und setzen Sie daf\xFCr einen Punkt in der originalen Ansicht oder der georeferenzierten Ansicht.",SET_SRC:"Setzen Sie jetzt einen weiteren Punkt in der originalen Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab.",SET_TRG:"Setzen Sie jetzt einen weiteren Punkt in der georeferenzierten Ansicht und schlie\xDFen Sie den Prozess der Erstellung eines Passpunktes ab."};t.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let x=new KN({source:i,type:"Point",style:lm}),b=new KN({source:o,type:"Point",style:lm});t.addInteraction(x),e.addInteraction(b),i.georeference_id="src",o.georeference_id="trg";let A=()=>{let N=r.getFeatures().length+1,j=i.getFeatures()[0];j.setStyle(lm(`${N}`)),j.setId(N),r.addFeature(j);let D=o.getFeatures()[0];D.setStyle(lm(`${N}`)),D.setId(N),n.addFeature(D),i.clear(),o.clear()},P=N=>{let j=N.target,D=N.feature;(j.georeference_id==="src"&&o.getFeatures().length===1||j.georeference_id==="trg"&&i.getFeatures().length===1)&&setTimeout(A,100),j.getFeatures().length>1&&j.removeFeature(D),j.georeference_id==="src"?l(v.SET_TRG,d):l(v.SET_SRC,d),D.setStyle(BN())};return i.on("addfeature",P),o.on("addfeature",P),l(v.START,d),{disable:()=>{l(null,d),i.clear(),o.clear(),t.removeInteraction(x),e.removeInteraction(b),i.un("addfeature",P),o.un("addfeature",P)}}}function fUe(t,e,r,n,i,o){let l="activateMoveGcpAction";o!==void 0&&o();let f={START:"Klicken Sie auf Passpunkt und verschieben Sie diesen mittels Drag&Drop."};t.getTargetElement().style.cursor="grab",e.getTargetElement().style.cursor="grab";let d=new XN({source:r,pixelTolerance:10,style:BN}),v=new XN({source:n,pixelTolerance:10,style:BN});t.addInteraction(d),e.addInteraction(v);let x=A=>{A.target.getMap().getTargetElement().style.cursor="grabbing"},b=A=>{A.target.getMap().getTargetElement().style.cursor="grab"};return d.on("modifystart",x),d.on("modifyend",b),v.on("modifystart",x),v.on("modifyend",b),i(f.START,l),{disable:()=>{i(null,l),d.un("modifystart",x),d.un("modifyend",b),v.un("modifystart",x),v.un("modifyend",b),t.removeInteraction(d),e.removeInteraction(v)}}}function hUe(t,e,r,n,i,o,l,f){let d="activateDelGcpAction";f!==void 0&&f();let v={START:"Klicken Sie auf Passpunkt um diesen zu l\xF6schen."};t.getTargetElement().style.cursor="default",e.getTargetElement().style.cursor="default";let x=P=>{if(P.getId()===void 0)return;let j=r.getFeatureById(P.getId()),D=n.getFeatureById(P.getId());j!==null&&D!==null&&(r.removeFeature(j),n.removeFeature(D))},b=new $9({layer:i,hitTolerance:5,condition:P=>{P.type==="click"&&P.map.forEachFeatureAtPixel(P.pixel,x)}}),A=new $9({layer:o,hitTolerance:5,condition:P=>{P.type==="click"&&P.map.forEachFeatureAtPixel(P.pixel,x)}});return t.addInteraction(b),e.addInteraction(A),l(v.START,d),{disable:()=>{l(null,d),t.removeInteraction(b),e.removeInteraction(A)}}}function pUe(t,e,r,n){let i="activateDrawClipAction";n!==void 0&&n();let o={START:"Klicken Sie auf einen Punkt der georeferenzierten Karte und fangen Sie an das Clip-Polygon zu zeichnen oder zu editieren."};t.getTargetElement().style.cursor="default";let l,f=new KN({features:e.getFeaturesCollection(),type:"Polygon",minPoints:5,condition:v=>{let x=v.coordinate;return!(l!==void 0&&(0,cI.default)(l[0],4)===(0,cI.default)(x[0],4)&&(0,cI.default)(l[1],4)===(0,cI.default)(x[1],4))&&e.getFeatures().length===0}}),d=new XN({features:e.getFeaturesCollection(),deleteCondition:v=>{let x=e.getFeatures().length>=1?e.getFeatures()[0].getGeometry().getCoordinates()[0]:void 0;return x!==void 0&&x.length>5&&cm(v)&&Ax(event)}});return f.on("drawstart",()=>{e.getFeatures().length>=1&&this.abortDrawing()}),t.addInteraction(f),t.addInteraction(d),r(o.START,i),{disable:()=>{r(null,i),t.removeInteraction(f),t.removeInteraction(d)}}}p();var gv="EPSG:4326";function dUe(t){let{params:e,clip:r}=t,n=[...e.gcps.map(i=>i.target),...(r!=null?r.coordinates[0]:[])];return n.length>0?Ea(n):null}function mUe(t){return new JT().readGeometry(t,{dataProjection:gv,featureProjection:gv}).getExtent()}function Uor(t){return[Math.round(t[0]),Math.round(-1*t[1])]}function Bor(t){return[Math.round(t[0]),Math.round(-1*t[1])]}var JN=class extends Z4e{constructor(e){super(),this.srcMap_=e.sourceMap,this.trgMap_=e.targetMap,this.params_=e.params,this.clip_=e.clip,this.onSetHelperMsg_=e.onSetHelperMsg,this.clipVectorSource_=new If({features:new ni});let r=new Su({source:this.clipVectorSource_,style:Y4e(),zIndex:2});r.set("key","clip"),this.trgMap_.addLayer(r),this.srcVectorSource_=new If({features:new ni}),this.trgVectorSource_=new If({features:new ni}),this.srcVectorLayer_=new Su({source:this.srcVectorSource_}),this.srcMap_.addLayer(this.srcVectorLayer_),this.trgVectorLayer_=new Su({source:this.trgVectorSource_,zIndex:3}),this.trgMap_.addLayer(this.trgVectorLayer_),this.editSrcVectorSource_=new If({features:new ni}),this.editTrgVectorSource_=new If({features:new ni}),this.srcMap_.addLayer(new Su({source:this.editSrcVectorSource_})),this.trgMap_.addLayer(new Su({source:this.editTrgVectorSource_,zIndex:4})),this.loadData()}loadData(){if(this.params_.gcps.length>0)for(let e=0,r=this.params_.gcps.length;e<r;e++){let n=e+1,i=new Ol(new Wa(Uor(this.params_.gcps[e].source)));i.setId(n),i.setStyle(lm(`${n}`)),this.srcVectorSource_.addFeature(i);let o=new Ol(new Wa(xc(this.params_.gcps[e].target,gv,this.trgMap_.getView().getProjection())));o.setId(n),o.setStyle(lm(`${n}`)),this.trgVectorSource_.addFeature(o)}if(this.clip_){let e=new JT().readFeature(this.clip_,{dataProjection:gv,featureProjection:this.trgMap_.getView().getProjection()});this.clipVectorSource_.addFeature(e)}}activateAddAction(e){return cUe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.editSrcVectorSource_,this.editTrgVectorSource_,this.onSetHelperMsg_,e)}activateMoveAction(e){return fUe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.onSetHelperMsg_,e)}activateDelAction(e){return hUe(this.srcMap_,this.trgMap_,this.srcVectorSource_,this.trgVectorSource_,this.srcVectorLayer_,this.trgVectorLayer_,this.onSetHelperMsg_,e)}activateDrawClipAction(e){return pUe(this.trgMap_,this.clipVectorSource_,this.onSetHelperMsg_,e)}getParams(){let e=this.srcVectorSource_.getFeatures(),r=[];for(let n=0,i=e.length;n<i;n++){let o=e[n],l=this.trgVectorSource_.getFeatureById(o.getId());r.push({source:Bor(o.getGeometry().getCoordinates()),target:xc(l.getGeometry().getCoordinates(),this.trgMap_.getView().getProjection(),gv)})}return Object.assign({},this.params_,{gcps:r})}getClip(){let e=this.clipVectorSource_.getFeatures().length>0?this.clipVectorSource_.getFeatures()[0]:void 0;if(e!==void 0)return new JT().writeGeometryObject(e.getGeometry(),{dataProjection:gv,featureProjection:"EPSG:3857",decimals:9});this.clip_}hasParamsOrClipChanged(){let r=f=>Object.assign({},f,{target:[(0,W9.default)(f.target[0],6),(0,W9.default)(f.target[1],6)]}),n=this.params_.gcps.map(r),i=this.getParams().gcps.map(r),o=JSON.stringify(n)===JSON.stringify(i),l=JSON.stringify(this.clip_)===JSON.stringify(this.getClip());return!o||!l}};var Sc={ZOOM_PAN:"control-zoom-pan",ADD_GCP:"control-add-gcp",MOVE_GCP:"control-move-gcp",DEL_GCP:"control-del-gcp",DRAW_CLIP:"control-draw-clip"},ek={AFFINE:"affine",POLYNOM:"polynom",TPS:"tps"};function Vor(){return[{id:Sc.ADD_GCP,title:kr("georef-setgcp"),iconClassName:"icon-point-add"},{id:Sc.MOVE_GCP,title:kr("georef-movegcp"),iconClassName:"icon-point-move"},{id:Sc.DEL_GCP,title:kr("georef-delgcp"),iconClassName:"icon-point-remove"}]}function Gor(){return[{id:ek.AFFINE,title:"Affine",iconClassName:"icon-layercalc"},{id:ek.POLYNOM,title:"Polynom",iconClassName:"icon-layercalc"},{id:ek.TPS,title:"TPS",iconClassName:"icon-layercalc"}]}var $or=()=>{let t=Gs(l2),e=Gs(a2),r=Gs(s2),n=pu(jd),i=pu(o2),[o,l]=r2(n2),[f,d]=(0,lo.useState)(null),[v,x]=(0,lo.useState)(null),[b,A]=(0,lo.useState)(null),P=YD(v),[N,j]=(0,lo.useState)(ek.AFFINE),D=(0,lo.useRef)(null),F=Vor(),U=Gor(),$=de=>{x(de)},Z=de=>{j(de)},ie=()=>{let de=(ye,me)=>zn(null,null,function*(){let be=D.current.hasParamsOrClipChanged()||N!==t.params.algorithm||(t==null?void 0:t.overwrites)===void 0||t.overwrites===0?yield I2e(ye,me):yield A2e(t.overwrites);l(!1),i(be)});if(!o){let ye=Object.assign(D.current.getParams(),{algorithm:N});ye.gcps.length<4?n({id:"toolbar-info",type:"warning",text:kr("georef-confirm-warn-gcp")}):(l(!0),de(t.map_id,ye))}},ne=()=>{if(D.current!==null){let de={clip:D.current.getClip(),params:Object.assign(D.current.getParams(),{algorithm:N}),overwrites:t.overwrites};de.params.gcps.length<4?n({id:"toolbar-info",type:"warning",text:kr("georef-confirm-warn-gcp")}):d({map_id:t.map_id,params:de})}},ae=()=>{if(f!==null){let de=(ye,me)=>zn(null,null,function*(){let be=yield T2e(ye,me);if(l(!1),be.error_code===void 0){let Ne=gUe.default.parse(location.search),Ce=Ne.redirect!==void 0?Ne.redirect:"/";window.location.href=`${window.location.origin}${Ce}`}else n({id:"toolbar-info",type:"danger",text:be.error_message})});d(null),l(!0),de(f.map_id,f.params)}};return(0,lo.useEffect)(()=>{t!==null&&D.current===null&&e!==null&&r!==null&&(D.current=new JN({clip:(t==null?void 0:t.clip)!==void 0&&(t==null?void 0:t.clip)!==null?{type:t.clip.type,coordinates:t.clip.coordinates}:void 0,onSetHelperMsg:de=>{n({id:"toolbar-info",type:"info",text:de})},params:{algorithm:t.params.algorithm,gcps:t.params.gcps},sourceMap:e.map,targetMap:r.map}),x(Sc.ZOOM_PAN),A(H9(e.map,r.map,()=>{})),j(t.params.algorithm))},[t,e,r,x,A,n]),(0,lo.useEffect)(()=>{b!==void 0&&v!==P&&(v===Sc.ZOOM_PAN?A(H9(e.map,r.map,b.disable)):D.current!==null&&v===Sc.ADD_GCP?A(D.current.activateAddAction(b.disable)):D.current!==null&&v===Sc.MOVE_GCP?A(D.current.activateMoveAction(b.disable)):D.current!==null&&v===Sc.DEL_GCP?A(D.current.activateDelAction(b.disable)):D.current!==null&&v===Sc.DRAW_CLIP?A(D.current.activateDrawClipAction(b.disable)):b.disable())},[v,P,b,A]),lo.default.createElement("div",{className:"vk-georeference-toolbar"},lo.default.createElement("div",null,lo.default.createElement(JS,{activeControl:v,id:Sc.ZOOM_PAN,iconClassName:"icon-move",onClick:$,title:kr("georef-movemap")}),lo.default.createElement(OY,{id:"control-toggle-gcp-action",activeControl:v,defaultTitle:kr("georef-editgcp"),options:F,onClick:$,parentIconClassName:"icon-points"}),lo.default.createElement(JS,{activeControl:v,id:Sc.DRAW_CLIP,iconClassName:"icon-draw",onClick:$,title:kr("georef-drawclip")})),lo.default.createElement("div",null,lo.default.createElement(OY,{id:"control-toggle-transformation",activeControl:N,className:"control-toggle-transformations",parentIconClassName:"icon-layercalc",disableActiveBehavior:!0,options:U,onClick:Z}),lo.default.createElement(JS,{id:"get-rectified-image",iconClassName:"icon-reload",onClick:ie,title:kr("georef-validate")}),lo.default.createElement(JS,{id:"confirm-rectified-image",iconClassName:"icon-save",className:"save",onClick:ne,title:kr("georef-confirm")})),f!==null&&lo.default.createElement(Oje,{onClose:()=>d(null),onSubmit:ae}))},vUe=$or;p();var ku=je(St(),1),Mq=je(ln(),1);var AGe=je(k8(),1);p();p();var Za=je(St(),1);var Hor=()=>Za.default.createElement("div",{className:"vkf-loading-indicator"},Za.default.createElement("svg",{className:"loading-icon",version:"1.1",id:"Layer_1",x:"0",y:"0",viewBox:"0 0 70 100"},Za.default.createElement("rect",{fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 3 50)"},Za.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite"}),Za.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1.2s",values:"0;60;0",repeatCount:"indefinite"})),Za.default.createElement("rect",{x:"17",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 20 50)"},Za.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.1s"}),Za.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:".5s",values:"0;5;0",repeatCount:"indefinite"})),Za.default.createElement("rect",{x:"40",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 40 50)"},Za.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.3s"}),Za.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"2s",values:"0;30;0",repeatCount:"indefinite",begin:"0.6s"})),Za.default.createElement("rect",{x:"60",fill:"white",width:"5",height:"100",transform:"translate(0) rotate(180 58 50)"},Za.default.createElement("animate",{attributeName:"height",attributeType:"XML",dur:"1s",values:"30; 100; 30",repeatCount:"indefinite",begin:"0.5s"}),Za.default.createElement("animate",{attributeName:"y",attributeType:"XML",dur:"1s",values:"0;60;0",repeatCount:"indefinite",begin:".3s"}))),Za.default.createElement("div",{className:"loading-text"},"Loading\u2026")),yUe=Hor;var _Ue=yUe;p();var w7=je(St(),1);p();p();var tb=je(St(),1);var UI=je(ln(),1);p();p();p();var Wor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zor=function(t){Wor(e,t);function e(r){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(r[0],n[0])+i,o.top=Math.min(r[1],n[1])+i,o.width=Math.abs(n[0]-r[0])+i,o.height=Math.abs(n[1]-r[1])+i},e.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,i=[r,[r[0],n[1]],n,[n[0],r[1]]],o=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new bc([o])},e.prototype.getGeometry=function(){return this.geometry_},e}(Wd),xUe=Zor;var bUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tk={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},Z9=function(t){bUe(e,t);function e(r,n,i){var o=t.call(this,r)||this;return o.coordinate=n,o.mapBrowserEvent=i,o}return e}(Ni);var Yor=function(t){bUe(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un;var i=r||{};return n.box_=new xUe(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:GN,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return e.prototype.defaultBoxEndCondition=function(r,n,i){var o=i[0]-n[0],l=i[1]-n[1];return o*o+l*l>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new Z9(tk.BOXDRAG,r.coordinate,r))},e.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new Z9(n?tk.BOXEND:tk.BOXCANCEL,r.coordinate,r)),!1},e.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Z9(tk.BOXSTART,r.coordinate,r)),!0):!1},e.prototype.onBoxEnd=function(r){},e}(rl),wUe=Yor;var Kor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xor=function(t){Kor(e,t);function e(r){var n=this,i=r||{},o=i.condition?i.condition:cm;return n=t.call(this,{condition:o,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return e.prototype.onBoxEnd=function(r){var n=this.getMap(),i=n.getView(),o=this.getGeometry();if(this.out_){var l=i.rotatedExtentForGeometry(o),f=i.getResolutionForExtentInternal(l),d=i.getResolution()/f;o=o.clone(),o.scale(d*d)}i.fitInternal(o,{duration:this.duration_,easing:Iu})},e}(wUe),Px=Xor;p();p();p();var Af={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var Qor=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jor=function(t){Qor(e,t);function e(r){var n=t.call(this)||this,i=r.element;return i&&!r.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return e.prototype.disposeInternal=function(){eI(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(r){this.map_&&eI(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)an(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var o=this.target_?this.target_:r.getOverlayContainerStopEvent();o.appendChild(this.element),this.render!==Rl&&this.listenerKeys.push(qr(r,Af.POSTRENDER,this.render,this)),r.render()}},e.prototype.render=function(r){},e.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},e}(So),ys=Jor;p();var Ao={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var ear=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EUe=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],SUe={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},tar=function(t){ear(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var o=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof o=="string"?document.createTextNode(o):o;var l=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof l=="string"?document.createTextNode(l):l;var f=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=f,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(Vt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(Eu," ").concat(xf),n.element.appendChild(n.button_),n}return e.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(TUe(n))if(IUe(n))nar(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=r.getTargetElement(),this.keys_?rar(i):AUe(i)}}},e.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=IUe(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(gx(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(SUe.ENTERFULLSCREEN)):(gx(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(SUe.LEAVEFULLSCREEN)),r.updateSize())}},e.prototype.setClassName_=function(r,n){var i,o,l,f;n?((i=r.classList).remove.apply(i,this.inactiveClassName_),(o=r.classList).add.apply(o,this.activeClassName_)):((l=r.classList).remove.apply(l,this.activeClassName_),(f=r.classList).add.apply(f,this.inactiveClassName_))},e.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(Ao.TARGET,this.boundHandleMapTargetChange_),t.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(Ao.TARGET,this.boundHandleMapTargetChange_)},e.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,i=r.length;n<i;++n)an(r[n]);r.length=0;var o=this.getMap();if(o){var l=o.getOwnerDocument();TUe(l)?this.element.classList.remove(w9):this.element.classList.add(w9);for(var n=0,i=EUe.length;n<i;++n)r.push(qr(l,EUe[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},e}(ys);function TUe(t){var e=t.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&t.msFullscreenEnabled||e.requestFullscreen&&t.fullscreenEnabled)}function IUe(t){return!!(t.webkitIsFullScreen||t.msFullscreenElement||t.fullscreenElement)}function AUe(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}function rar(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():AUe(t)}function nar(t){t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}var rk=tar;p();p();var iar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oar=function(t){iar(e,t);function e(r){var n=t.call(this)||this,i=r||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleEvent=function(r){var n=!1;if(r.type==Qr.DBLCLICK){var i=r.originalEvent,o=r.map,l=r.coordinate,f=i.shiftKey?-this.delta_:this.delta_,d=o.getView();Sx(d,f,l,this.duration_),i.preventDefault(),n=!0}return!n},e}(Au),MUe=oar;p();var aar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sar=function(t){aar(e,t);function e(r){var n=t.call(this,{stopDown:gu})||this,i=r||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var o=i.condition?i.condition:lI(Mx,WN);return n.condition_=i.onFocusOnly?lI(VN,o):o,n.noKinetic_=!1,n}return e.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=Tx(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],l=r.map,f=l.getView();Mze(o,f.getResolution()),px(o,f.getRotation()),f.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(r){var n=r.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),f=i.getCenterInternal(),d=n.getPixelFromCoordinateInternal(f),v=n.getCoordinateFromPixelInternal([d[0]-o*Math.cos(l),d[1]-o*Math.sin(l)]);i.animateInternal({center:i.getConstrainedCenter(v),duration:500,easing:Iu})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(rl),CUe=sar;p();p();function Rx(t){if(t!==void 0)return 0}function Y9(t){if(t!==void 0)return t}function PUe(t){var e=2*Math.PI/t;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/e+.5)*e,r}}function RUe(t){var e=t||ux(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=e?0:r}}var lar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uar=function(t){lar(e,t);function e(r){var n=this,i=r||{};return n=t.call(this,{stopDown:gu})||this,n.condition_=i.condition?i.condition:rUe,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(r){if(HN(r)){var n=r.map,i=n.getView();if(i.getConstraints().rotation!==Rx){var o=n.getSize(),l=r.pixel,f=Math.atan2(o[1]/2-l[1],l[0]-o[0]/2);if(this.lastAngle_!==void 0){var d=f-this.lastAngle_;i.adjustRotationInternal(-d)}this.lastAngle_=f}}},e.prototype.handleUpEvent=function(r){if(!HN(r))return!0;var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(r){if(!HN(r))return!1;if(GN(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(rl),OUe=uar;p();p();var fm={LEFT:37,UP:38,RIGHT:39,DOWN:40};var car=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),far=function(t){car(e,t);function e(r){var n=t.call(this)||this,i=r||{};return n.defaultCondition_=function(o){return Mx(o)&&$N(o)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return e.prototype.handleEvent=function(r){var n=!1;if(r.type==Vt.KEYDOWN){var i=r.originalEvent,o=i.keyCode;if(this.condition_(r)&&(o==fm.DOWN||o==fm.LEFT||o==fm.RIGHT||o==fm.UP)){var l=r.map,f=l.getView(),d=f.getResolution()*this.pixelDelta_,v=0,x=0;o==fm.DOWN?x=-d:o==fm.LEFT?v=-d:o==fm.RIGHT?v=d:x=d;var b=[v,x];px(b,f.getRotation()),eUe(f,b,this.duration_),i.preventDefault(),n=!0}}return!n},e}(Au),LUe=far;p();var har=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),par=function(t){har(e,t);function e(r){var n=t.call(this)||this,i=r||{};return n.condition_=i.condition?i.condition:$N,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return e.prototype.handleEvent=function(r){var n=!1;if(r.type==Vt.KEYDOWN||r.type==Vt.KEYPRESS){var i=r.originalEvent,o=i.charCode;if(this.condition_(r)&&(o==43||o==45)){var l=r.map,f=o==43?this.delta_:-this.delta_,d=l.getView();Sx(d,f,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},e}(Au),DUe=par;p();var dar=function(){function t(e,r,n){this.decay_=e,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(e,r){this.points_.push(e,r,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<e)return!1;for(var n=r-3;n>0&&this.points_[n+2]>e;)n-=3;var i=this.points_[r+2]-this.points_[n+2];if(i<16.666666666666668)return!1;var o=this.points_[r]-this.points_[n],l=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(l,o),this.initialVelocity_=Math.sqrt(o*o+l*l)/i,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),NUe=dar;p();var mar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K9={TRACKPAD:"trackpad",WHEEL:"wheel"},gar=function(t){mar(e,t);function e(r){var n=this,i=r||{};n=t.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var o=i.condition?i.condition:Ix;return n.condition_=i.onFocusOnly?lI(VN,o):o,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},e.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==Vt.WHEEL)return!0;var i=r.map,o=r.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var l;if(r.type==Vt.WHEEL&&(l=o.deltaY,rze&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=rN),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;var f=Date.now();this.startTime_===void 0&&(this.startTime_=f),(!this.mode_||f-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?K9.TRACKPAD:K9.WHEEL);var d=i.getView();if(this.mode_===K9.TRACKPAD&&!(d.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(d.getAnimating()&&d.cancelAnimations(),d.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),d.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=f,!1;this.totalDelta_+=l;var v=Math.max(this.timeout_-(f-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),v),!1},e.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var i=-Zn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Sx(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},e}(Au),kUe=gar;p();var yar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_ar=function(t){yar(e,t);function e(r){var n=this,i=r||{},o=i;return o.stopDown||(o.stopDown=gu),n=t.call(this,o)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(r){var n=0,i=this.targetPointers[0],o=this.targetPointers[1],l=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){var f=l-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=f}this.lastAngle_=l;var d=r.map,v=d.getView();if(v.getConstraints().rotation!==Rx){var x=d.getViewport().getBoundingClientRect(),b=Tx(this.targetPointers);b[0]-=x.left,b[1]-=x.top,this.anchor_=d.getCoordinateFromPixelInternal(b),this.rotating_&&(d.render(),v.adjustRotationInternal(n,this.anchor_))}},e.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(rl),qUe=_ar;p();var xar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bar=function(t){xar(e,t);function e(r){var n=this,i=r||{},o=i;return o.stopDown||(o.stopDown=gu),n=t.call(this,o)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return e.prototype.handleDragEvent=function(r){var n=1,i=this.targetPointers[0],o=this.targetPointers[1],l=i.clientX-o.clientX,f=i.clientY-o.clientY,d=Math.sqrt(l*l+f*f);this.lastDistance_!==void 0&&(n=this.lastDistance_/d),this.lastDistance_=d;var v=r.map,x=v.getView();n!=1&&(this.lastScaleDelta_=n);var b=v.getViewport().getBoundingClientRect(),A=Tx(this.targetPointers);A[0]-=b.left,A[1]-=b.top,this.anchor_=v.getCoordinateFromPixelInternal(A),v.render(),x.adjustResolutionInternal(n,this.anchor_)},e.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,i=n.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}else return!0},e.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(rl),FUe=bar;function Ox(t){var e=t||{},r=new ni,n=new NUe(-.005,.05,100),i=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;i&&r.push(new OUe);var o=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;o&&r.push(new MUe({delta:e.zoomDelta,duration:e.zoomDuration}));var l=e.dragPan!==void 0?e.dragPan:!0;l&&r.push(new CUe({onFocusOnly:e.onFocusOnly,kinetic:n}));var f=e.pinchRotate!==void 0?e.pinchRotate:!0;f&&r.push(new qUe);var d=e.pinchZoom!==void 0?e.pinchZoom:!0;d&&r.push(new FUe({duration:e.zoomDuration}));var v=e.keyboard!==void 0?e.keyboard:!0;v&&(r.push(new LUe),r.push(new DUe({delta:e.zoomDelta,duration:e.zoomDuration})));var x=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;x&&r.push(new kUe({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var b=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return b&&r.push(new Px({duration:e.zoomDuration})),r}p();p();p();var war=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ear=function(t){war(e,t);function e(r){var n=t.call(this)||this;return n.map_=r,n}return e.prototype.dispatchRenderEvent=function(r,n){ir()},e.prototype.calculateMatrices2D=function(r){var n=r.viewState,i=r.coordinateToPixelTransform,o=r.pixelToCoordinateTransform;To(i,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),nx(o,i)},e.prototype.forEachFeatureAtCoordinate=function(r,n,i,o,l,f,d,v){var x,b=n.viewState;function A(He,Ke,Je,We){return l.call(f,Ke,He?Je:null,We)}var P=b.projection,N=dN(r.slice(),P),j=[[0,0]];if(P.canWrapX()&&o){var D=P.getExtent(),F=gn(D);j.push([-F,0],[F,0])}for(var U=n.layerStatesArray,$=U.length,Z=[],ie=[],ne=0;ne<j.length;ne++)for(var ae=$-1;ae>=0;--ae){var de=U[ae],ye=de.layer;if(ye.hasRenderer()&&fv(de,b)&&d.call(v,ye)){var me=ye.getRenderer(),be=ye.getSource();if(me&&be){var Ne=be.getWrapX()?N:r,Ce=A.bind(null,de.managed);ie[0]=Ne[0]+j[ne][0],ie[1]=Ne[1]+j[ne][1],x=me.forEachFeatureAtCoordinate(ie,n,i,Ce,Z)}if(x)return x}}if(Z.length!==0){var qe=1/Z.length;return Z.forEach(function(He,Ke){return He.distanceSq+=Ke*qe}),Z.sort(function(He,Ke){return He.distanceSq-Ke.distanceSq}),Z.some(function(He){return x=He.callback(He.feature,He.layer,He.geometry)}),x}},e.prototype.forEachLayerAtPixel=function(r,n,i,o,l){return ir()},e.prototype.hasFeatureAtCoordinate=function(r,n,i,o,l,f){var d=this.forEachFeatureAtCoordinate(r,n,i,o,ds,this,l,f);return d!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(r){ir()},e.prototype.scheduleExpireIconCache=function(r){Ex.canExpireCache()&&r.postRenderFunctions.push(Sar)},e}(Wd);function Sar(t,e){Ex.expire()}var jUe=Ear;var Tar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Iar=function(t){Tar(e,t);function e(r){var n=t.call(this,r)||this;n.fontChangeListenerKey_=qr(bf,dc.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=Eu+" ol-layers";var o=r.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return e.prototype.dispatchRenderEvent=function(r,n){var i=this.getMap();if(i.hasListener(r)){var o=new im(r,void 0,n);i.dispatchEvent(o)}},e.prototype.disposeInternal=function(){an(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(Uo.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(P,N){return P.zIndex-N.zIndex}),i=r.viewState;this.children_.length=0;for(var o=[],l=null,f=0,d=n.length;f<d;++f){var v=n[f];r.layerIndex=f;var x=v.layer,b=x.getSourceState();if(!fv(v,i)||b!="ready"&&b!="undefined"){x.unrender();continue}var A=x.render(r,l);A&&(A!==l&&(this.children_.push(A),l=A),"getDeclutter"in x&&o.push(x))}for(var f=o.length-1;f>=0;--f)o[f].renderDeclutter(r);h4e(this.element_,this.children_),this.dispatchRenderEvent(Uo.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},e.prototype.forEachLayerAtPixel=function(r,n,i,o,l){for(var f=n.viewState,d=n.layerStatesArray,v=d.length,x=v-1;x>=0;--x){var b=d[x],A=b.layer;if(A.hasRenderer()&&fv(b,f)&&l(A)){var P=A.getRenderer(),N=P.getDataAtPixel(r,n,i);if(N){var j=o(A,N);if(j)return j}}}},e}(jUe),zUe=Iar;p();p();var UUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xh=function(t){UUe(e,t);function e(r,n){var i=t.call(this,r)||this;return i.layer=n,i}return e}(Ni);var X9={LAYERS:"layers"},Aar=function(t){UUe(e,t);function e(r){var n=this,i=r||{},o=Xr({},i);delete o.layers;var l=i.layers;return n=t.call(this,o)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(X9.LAYERS,n.handleLayersChanged_),l?Array.isArray(l)?l=new ni(l.slice(),{unique:!0}):or(typeof l.getArray=="function",43):l=new ni(void 0,{unique:!0}),n.setLayers(l),n}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(an),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(qr(r,di.ADD,this.handleLayersAdd_,this),qr(r,di.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(an);Ks(this.listenerKeys_);for(var i=r.getArray(),o=0,l=i.length;o<l;o++){var f=i[o];this.registerLayerListeners_(f),this.dispatchEvent(new Xh("addlayer",f))}this.changed()},e.prototype.registerLayerListeners_=function(r){var n=[qr(r,dc.PROPERTYCHANGE,this.handleLayerChange_,this),qr(r,Vt.CHANGE,this.handleLayerChange_,this)];r instanceof e&&n.push(qr(r,"addlayer",this.handleLayerGroupAdd_,this),qr(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[tr(r)]=n},e.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new Xh("addlayer",r.layer))},e.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new Xh("removelayer",r.layer))},e.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new Xh("addlayer",n)),this.changed()},e.prototype.handleLayersRemove_=function(r){var n=r.element,i=tr(n);this.listenerKeys_[i].forEach(an),delete this.listenerKeys_[i],this.dispatchEvent(new Xh("removelayer",n)),this.changed()},e.prototype.getLayers=function(){return this.get(X9.LAYERS)},e.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var i=n.getArray(),o=0,l=i.length;o<l;++o)this.dispatchEvent(new Xh("removelayer",i[o]));this.set(X9.LAYERS,r)},e.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},e.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],i=n.length;this.getLayers().forEach(function(x){x.getLayerStatesArray(n)});var o=this.getLayerState(),l=o.zIndex;!r&&o.zIndex===void 0&&(l=0);for(var f=i,d=n.length;f<d;f++){var v=n[f];v.opacity*=o.opacity,v.visible=v.visible&&o.visible,v.maxResolution=Math.min(v.maxResolution,o.maxResolution),v.minResolution=Math.max(v.minResolution,o.minResolution),v.minZoom=Math.max(v.minZoom,o.minZoom),v.maxZoom=Math.min(v.maxZoom,o.maxZoom),o.extent!==void 0&&(v.extent!==void 0?v.extent=vu(v.extent,o.extent):v.extent=o.extent),v.zIndex===void 0&&(v.zIndex=l)}return n},e.prototype.getSourceState=function(){return"ready"},e}(MN),fI=Aar;p();p();var hI={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Mar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Car=function(t){Mar(e,t);function e(r,n){var i=t.call(this,r)||this;i.map_=r,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=[],i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=qr(o,hI.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=qr(o,hI.POINTERMOVE,i.relayMoveEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(Vt.TOUCHMOVE,i.boundHandleTouchMove_,nN?{passive:!1}:!1),i}return e.prototype.emulateClick_=function(r){var n=new Tu(Qr.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Tu(Qr.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new Tu(Qr.SINGLECLICK,this.map_,r);this.dispatchEvent(i)}.bind(this),250)},e.prototype.updateActivePointers_=function(r){var n=r,i=n.pointerId;if(n.type==Qr.POINTERUP||n.type==Qr.POINTERCANCEL){delete this.trackedTouches_[i];for(var o in this.trackedTouches_)if(this.trackedTouches_[o].target!==n.target){delete this.trackedTouches_[o];break}}else(n.type==Qr.POINTERDOWN||n.type==Qr.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=QD(this.trackedTouches_)},e.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new Tu(Qr.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(an),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(r){return r.button===0},e.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new Tu(Qr.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var i in r){var o=r[i];this.down_[i]=typeof o=="function"?Rl:o}if(this.dragListenerKeys_.length===0){var l=this.map_.getOwnerDocument();this.dragListenerKeys_.push(qr(l,Qr.POINTERMOVE,this.handlePointerMove_,this),qr(l,Qr.POINTERUP,this.handlePointerUp_,this),qr(this.element_,Qr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==l&&this.dragListenerKeys_.push(qr(this.element_.getRootNode(),Qr.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new Tu(Qr.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},e.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new Tu(Qr.POINTERMOVE,this.map_,r,n))},e.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},e.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(an(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Vt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(an(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(an),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(Xs),BUe=Car;p();p();var pI=1/0,Par=function(){function t(e,r){this.priorityFunction_=e,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Ks(this.queuedElements_)},t.prototype.dequeue=function(){var e=this.elements_,r=this.priorities_,n=e[0];e.length==1?(e.length=0,r.length=0):(e[0]=e.pop(),r[0]=r.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},t.prototype.enqueue=function(e){or(!(this.keyFunction_(e)in this.queuedElements_),31);var r=this.priorityFunction_(e);return r!=pI?(this.elements_.push(e),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(e){return e*2+1},t.prototype.getRightChildIndex_=function(e){return e*2+2},t.prototype.getParentIndex_=function(e){return e-1>>1},t.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},t.prototype.isEmpty=function(){return this.elements_.length===0},t.prototype.isKeyQueued=function(e){return e in this.queuedElements_},t.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},t.prototype.siftUp_=function(e){for(var r=this.elements_,n=this.priorities_,i=r.length,o=r[e],l=n[e],f=e;e<i>>1;){var d=this.getLeftChildIndex_(e),v=this.getRightChildIndex_(e),x=v<i&&n[v]<n[d]?v:d;r[e]=r[x],n[e]=n[x],e=x}r[e]=o,n[e]=l,this.siftDown_(f,e)},t.prototype.siftDown_=function(e,r){for(var n=this.elements_,i=this.priorities_,o=n[r],l=i[r];r>e;){var f=this.getParentIndex_(r);if(i[f]>l)n[r]=n[f],i[r]=i[f],r=f;else break}n[r]=o,i[r]=l},t.prototype.reprioritize=function(){var e=this.priorityFunction_,r=this.elements_,n=this.priorities_,i=0,o=r.length,l,f,d;for(f=0;f<o;++f)l=r[f],d=e(l),d==pI?delete this.queuedElements_[this.keyFunction_(l)]:(n[i]=d,r[i++]=l);r.length=i,n.length=i,this.heapify_()},t}(),VUe=Par;p();var Ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Rar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oar=function(t){Rar(e,t);function e(r,n){var i=t.call(this,function(o){return r.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return e.prototype.enqueue=function(r){var n=t.prototype.enqueue.call(this,r);if(n){var i=r[0];i.addEventListener(Vt.CHANGE,this.boundHandleTileChange_)}return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(r){var n=r.target,i=n.getState();if(i===Ht.LOADED||i===Ht.ERROR||i===Ht.EMPTY){n.removeEventListener(Vt.CHANGE,this.boundHandleTileChange_);var o=n.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(r,n){for(var i=0,o,l,f;this.tilesLoading_<r&&i<n&&this.getCount()>0;)l=this.dequeue()[0],f=l.getKey(),o=l.getState(),o===Ht.IDLE&&!(f in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[f]=!0,++this.tilesLoading_,++i,l.load())},e}(VUe),GUe=Oar;function $Ue(t,e,r,n,i){if(!t||!(r in t.wantedTiles))return pI;if(!t.wantedTiles[r][e.getKey()])return pI;var o=t.viewState.center,l=n[0]-o[0],f=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(l*l+f*f)/i}p();p();var Mu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};p();var HUe=42,hm=256;p();function Q9(t,e,r){return function(n,i,o,l,f){if(n){if(!i&&!e)return n;var d=e?0:o[0]*i,v=e?0:o[1]*i,x=f?f[0]:0,b=f?f[1]:0,A=t[0]+d/2+x,P=t[2]-d/2+x,N=t[1]+v/2+b,j=t[3]-v/2+b;A>P&&(A=(P+A)/2,P=A),N>j&&(N=(j+N)/2,j=N);var D=Zn(n[0],A,P),F=Zn(n[1],N,j);if(l&&r&&i){var U=30*i;D+=-U*Math.log(1+Math.max(0,A-n[0])/U)+U*Math.log(1+Math.max(0,n[0]-P)/U),F+=-U*Math.log(1+Math.max(0,N-n[1])/U)+U*Math.log(1+Math.max(0,n[1]-j)/U)}return[D,F]}}}function WUe(t){return t}p();function J9(t,e,r,n){var i=gn(e)/r[0],o=zo(e)/r[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function eK(t,e,r){var n=Math.min(t,e),i=50;return n*=Math.log(1+i*Math.max(0,t/e-1))/i+1,r&&(n=Math.max(n,r),n/=Math.log(1+i*Math.max(0,r/t-1))/i+1),Zn(n,r/2,e*2)}function ZUe(t,e,r,n){return function(i,o,l,f){if(i!==void 0){var d=t[0],v=t[t.length-1],x=r?J9(d,r,l,n):d;if(f){var b=e!==void 0?e:!0;return b?eK(i,x,v):Zn(i,v,x)}var A=Math.min(x,i),P=Math.floor(ex(t,A,o));return t[P]>x&&P<t.length-1?t[P+1]:t[P]}else return}}function YUe(t,e,r,n,i,o){return function(l,f,d,v){if(l!==void 0){var x=i?J9(e,i,d,o):e,b=r!==void 0?r:0;if(v){var A=n!==void 0?n:!0;return A?eK(l,x,b):Zn(l,b,x)}var P=1e-9,N=Math.ceil(Math.log(e/x)/Math.log(t)-P),j=-f*(.5-P)+.5,D=Math.min(x,l),F=Math.floor(Math.log(e/D)/Math.log(t)+j),U=Math.max(N,F),$=e/Math.pow(t,U);return Zn($,b,x)}else return}}function tK(t,e,r,n,i){return function(o,l,f,d){if(o!==void 0){var v=n?J9(t,n,f,i):t,x=r!==void 0?r:!0;return!x||!d?Zn(o,e,v):eK(o,v,e)}else return}}var Lar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rK=0,Dar=function(t){Lar(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un;var i=Xr({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=mN(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&Oze(),i.center&&(i.center=Si(i.center,n.projection_)),i.extent&&(i.extent=$a(i.extent,n.projection_)),n.applyOptions_(i),n}return e.prototype.applyOptions_=function(r){var n=Xr({},r);for(var i in Mu)delete n[i];this.setProperties(n,!0);var o=kar(r);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=o.minZoom;var l=Nar(r),f=o.constraint,d=qar(r);this.constraints_={center:l,resolution:f,rotation:d},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var i=this.getCenter();if(i){var o=r||[0,0,0,0];n=n||[0,0,0,0];var l=this.getResolution(),f=l/2*(o[3]-n[3]+n[1]-o[1]),d=l/2*(o[0]-n[0]+n[2]-o[2]);this.setCenterInternal([i[0]+f,i[1]-d])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Xr({},n,r)},e.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var o=arguments[i];o.center&&(o=Xr({},o),o.center=Si(o.center,this.getProjection())),o.anchor&&(o=Xr({},o),o.anchor=Si(o.anchor,this.getProjection())),n[i]=o}this.animateInternal.apply(this,n)},e.prototype.animateInternal=function(r){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var l=arguments[o];l.center&&this.setCenterInternal(l.center),l.zoom!==void 0?this.setZoom(l.zoom):l.resolution&&this.setResolution(l.resolution),l.rotation!==void 0&&this.setRotation(l.rotation)}if(o===n){i&&nk(i,!0);return}for(var f=Date.now(),d=this.targetCenter_.slice(),v=this.targetResolution_,x=this.targetRotation_,b=[];o<n;++o){var A=arguments[o],P={start:f,complete:!1,anchor:A.anchor,duration:A.duration!==void 0?A.duration:1e3,easing:A.easing||Q4e,callback:i};if(A.center&&(P.sourceCenter=d,P.targetCenter=A.center.slice(),d=P.targetCenter),A.zoom!==void 0?(P.sourceResolution=v,P.targetResolution=this.getResolutionForZoom(A.zoom),v=P.targetResolution):A.resolution&&(P.sourceResolution=v,P.targetResolution=A.resolution,v=P.targetResolution),A.rotation!==void 0){P.sourceRotation=x;var N=Ll(A.rotation-x+Math.PI,2*Math.PI)-Math.PI;P.targetRotation=x+N,x=P.targetRotation}Far(P)?P.complete=!0:f+=P.duration,b.push(P)}this.animations_.push(b),this.setHint(Bo.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Bo.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[Bo.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(Bo.ANIMATING,-this.hints_[Bo.ANIMATING]);for(var r,n=0,i=this.animations_.length;n<i;++n){var o=this.animations_[n];if(o[0].callback&&nk(o[0].callback,!1),!r)for(var l=0,f=o.length;l<f;++l){var d=o[l];if(!d.complete){r=d.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],l=!0,f=0,d=o.length;f<d;++f){var v=o[f];if(!v.complete){var x=r-v.start,b=v.duration>0?x/v.duration:1;b>=1?(v.complete=!0,b=1):l=!1;var A=v.easing(b);if(v.sourceCenter){var P=v.sourceCenter[0],N=v.sourceCenter[1],j=v.targetCenter[0],D=v.targetCenter[1];this.nextCenter_=v.targetCenter;var F=P+A*(j-P),U=N+A*(D-N);this.targetCenter_=[F,U]}if(v.sourceResolution&&v.targetResolution){var $=A===1?v.targetResolution:v.sourceResolution+A*(v.targetResolution-v.sourceResolution);if(v.anchor){var Z=this.getViewportSize_(this.getRotation()),ie=this.constraints_.resolution($,0,Z,!0);this.targetCenter_=this.calculateCenterZoom(ie,v.anchor)}this.nextResolution_=v.targetResolution,this.targetResolution_=$,this.applyTargetState_(!0)}if(v.sourceRotation!==void 0&&v.targetRotation!==void 0){var ne=A===1?Ll(v.targetRotation+Math.PI,2*Math.PI)-Math.PI:v.sourceRotation+A*(v.targetRotation-v.sourceRotation);if(v.anchor){var ae=this.constraints_.rotation(ne,!0);this.targetCenter_=this.calculateCenterRotate(ae,v.anchor)}this.nextRotation_=v.targetRotation,this.targetRotation_=ne}if(this.applyTargetState_(!0),n=!0,!v.complete)break}}if(l){this.animations_[i]=null,this.setHint(Bo.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var de=o[0].callback;de&&nk(de,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(r,n){var i,o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-n[0],o[1]-n[1]],px(i,r-this.getRotation()),Aze(i,n)),i},e.prototype.calculateCenterZoom=function(r,n){var i,o=this.getCenterInternal(),l=this.getResolution();if(o!==void 0&&l!==void 0){var f=n[0]-r*(n[0]-o[0])/l,d=n[1]-r*(n[1]-o[1])/l;i=[f,d]}return i},e.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var i=n[0],o=n[1];return[Math.abs(i*Math.cos(r))+Math.abs(o*Math.sin(r)),Math.abs(i*Math.sin(r))+Math.abs(o*Math.cos(r))]}else return n},e.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&Qd(r,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(Mu.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},e.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return Jd(n,this.getProjection())},e.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();or(i,1);var o=this.getResolution();or(o!==void 0,2);var l=this.getRotation();return or(l!==void 0,3),kT(i,o,l,n)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},e.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(Mu.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal($a(r,this.getProjection()),n)},e.prototype.getResolutionForExtentInternal=function(r,n){var i=n||this.getViewportSizeMinusPadding_(),o=gn(r)/i[0],l=zo(r)/i[1];return Math.max(o,l)},e.prototype.getResolutionForValueFunction=function(r){var n=r||2,i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(i/o)/Math.log(n);return function(f){var d=i/Math.pow(n,f*l);return d}},e.prototype.getRotation=function(){return this.get(Mu.ROTATION)},e.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(i/o)/n;return function(f){var d=Math.log(i/f)/n/l;return d}},e.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},e.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),l=this.padding_;if(l){var f=this.getViewportSizeMinusPadding_();o=nK(o,this.getViewportSize_(),[f[0]/2+l[3],f[1]/2+l[0]],n,i)}return{center:o.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},e.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,i,o;if(this.resolutions_){var l=ex(this.resolutions_,r,1);n=l,i=this.resolutions_[l],l==this.resolutions_.length-1?o=2:o=i/this.resolutions_[l+1]}else i=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(i/r)/Math.log(o)},e.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Zn(Math.floor(r),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Zn(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},e.prototype.fit=function(r,n){var i;if(or(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){or(!av(r),25);var o=$a(r,this.getProjection());i=QT(o)}else if(r.getType()==="Circle"){var o=$a(r.getExtent(),this.getProjection());i=QT(o),i.rotate(this.getRotation(),Js(o))}else{var l=xu();l?i=r.clone().transform(l,this.getProjection()):i=r}this.fitInternal(i,n)},e.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),i=Math.cos(n),o=Math.sin(-n),l=r.getFlatCoordinates(),f=r.getStride(),d=1/0,v=1/0,x=-1/0,b=-1/0,A=0,P=l.length;A<P;A+=f){var N=l[A]*i-l[A+1]*o,j=l[A]*o+l[A+1]*i;d=Math.min(d,N),v=Math.min(v,j),x=Math.max(x,N),b=Math.max(b,j)}return[d,v,x,b]},e.prototype.fitInternal=function(r,n){var i=n||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var l=i.padding!==void 0?i.padding:[0,0,0,0],f=i.nearest!==void 0?i.nearest:!1,d;i.minResolution!==void 0?d=i.minResolution:i.maxZoom!==void 0?d=this.getResolutionForZoom(i.maxZoom):d=0;var v=this.rotatedExtentForGeometry(r),x=this.getResolutionForExtentInternal(v,[o[0]-l[1]-l[3],o[1]-l[0]-l[2]]);x=isNaN(x)?d:Math.max(x,d),x=this.getConstrainedResolution(x,f?0:1);var b=this.getRotation(),A=Math.sin(b),P=Math.cos(b),N=Js(v);N[0]+=(l[1]-l[3])/2*x,N[1]+=(l[0]-l[2])/2*x;var j=N[0]*P-N[1]*A,D=N[1]*P+N[0]*A,F=this.getConstrainedCenter([j,D],x),U=i.callback?i.callback:Rl;i.duration!==void 0?this.animateInternal({resolution:x,center:F,duration:i.duration,easing:i.easing},U):(this.targetResolution_=x,this.targetCenter_=F,this.applyTargetState_(!1,!0),nk(U,!0))},e.prototype.centerOn=function(r,n,i){this.centerOnInternal(Si(r,this.getProjection()),n,i)},e.prototype.centerOnInternal=function(r,n,i){this.setCenterInternal(nK(r,n,i,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(r,n,i,o){var l,f=this.padding_;if(f&&r){var d=this.getViewportSizeMinusPadding_(-i),v=nK(r,o,[d[0]/2+f[3],d[1]/2+f[0]],n,i);l=[r[0]-v[0],r[1]-v[1]]}return l},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(r){var n=Qd(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},e.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},e.prototype.adjustResolution=function(r,n){var i=n&&Si(n,this.getProjection());this.adjustResolutionInternal(r,i)},e.prototype.adjustResolutionInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*r,0,o,i);n&&(this.targetCenter_=this.calculateCenterZoom(l,n)),this.targetResolution_*=r,this.applyTargetState_()},e.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},e.prototype.adjustRotation=function(r,n){n&&(n=Si(n,this.getProjection())),this.adjustRotationInternal(r,n)},e.prototype.adjustRotationInternal=function(r,n){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+r,i);n&&(this.targetCenter_=this.calculateCenterRotate(o,n)),this.targetRotation_+=r,this.applyTargetState_()},e.prototype.setCenter=function(r){this.setCenterInternal(r&&Si(r,this.getProjection()))},e.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},e.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},e.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},e.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},e.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},e.prototype.applyTargetState_=function(r,n){var i=this.getAnimating()||this.getInteracting()||n,o=this.constraints_.rotation(this.targetRotation_,i),l=this.getViewportSize_(o),f=this.constraints_.resolution(this.targetResolution_,0,l,i),d=this.constraints_.center(this.targetCenter_,f,l,i,this.calculateCenterShift(this.targetCenter_,f,o,l));this.get(Mu.ROTATION)!==o&&this.set(Mu.ROTATION,o),this.get(Mu.RESOLUTION)!==f&&(this.set(Mu.RESOLUTION,f),this.set("zoom",this.getZoom(),!0)),(!d||!this.get(Mu.CENTER)||!gs(this.get(Mu.CENTER),d))&&this.set(Mu.CENTER,d),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(r,n,i){var o=r!==void 0?r:200,l=n||0,f=this.constraints_.rotation(this.targetRotation_),d=this.getViewportSize_(f),v=this.constraints_.resolution(this.targetResolution_,l,d),x=this.constraints_.center(this.targetCenter_,v,d,!1,this.calculateCenterShift(this.targetCenter_,v,f,d));if(o===0&&!this.cancelAnchor_){this.targetResolution_=v,this.targetRotation_=f,this.targetCenter_=x,this.applyTargetState_();return}var b=i||(o===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==v||this.getRotation()!==f||!this.getCenterInternal()||!gs(this.getCenterInternal(),x))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:f,center:x,resolution:v,duration:o,easing:Iu,anchor:b}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Bo.INTERACTING,1)},e.prototype.endInteraction=function(r,n,i){var o=i&&Si(i,this.getProjection());this.endInteractionInternal(r,n,o)},e.prototype.endInteractionInternal=function(r,n,i){this.setHint(Bo.INTERACTING,-1),this.resolveConstraints(r,n,i)},e.prototype.getConstrainedCenter=function(r,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(r,n){var i=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},e.prototype.getConstrainedResolution=function(r,n){var i=n||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,i,o)},e}(So);function nk(t,e){setTimeout(function(){t(e)},0)}function Nar(t){if(t.extent!==void 0){var e=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return Q9(t.extent,t.constrainOnlyCenter,e)}var r=mN(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Q9(n,!1,!1)}return WUe}function kar(t){var e,r,n,i=28,o=2,l=t.minZoom!==void 0?t.minZoom:rK,f=t.maxZoom!==void 0?t.maxZoom:i,d=t.zoomFactor!==void 0?t.zoomFactor:o,v=t.multiWorld!==void 0?t.multiWorld:!1,x=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,b=t.showFullExtent!==void 0?t.showFullExtent:!1,A=mN(t.projection,"EPSG:3857"),P=A.getExtent(),N=t.constrainOnlyCenter,j=t.extent;if(!v&&!j&&A.isGlobal()&&(N=!1,j=P),t.resolutions!==void 0){var D=t.resolutions;r=D[l],n=D[f]!==void 0?D[f]:D[D.length-1],t.constrainResolution?e=ZUe(D,x,!N&&j,b):e=tK(r,n,x,!N&&j,b)}else{var F=P?Math.max(gn(P),zo(P)):360*Ba[Va.DEGREES]/A.getMetersPerUnit(),U=F/hm/Math.pow(o,rK),$=U/Math.pow(o,i-rK);r=t.maxResolution,r!==void 0?l=0:r=U/Math.pow(d,l),n=t.minResolution,n===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?n=r/Math.pow(d,f):n=U/Math.pow(d,f):n=$),f=l+Math.floor(Math.log(r/n)/Math.log(d)),n=r/Math.pow(d,f-l),t.constrainResolution?e=YUe(d,r,n,x,!N&&j,b):e=tK(r,n,x,!N&&j,b)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:l,zoomFactor:d}}function qar(t){var e=t.enableRotation!==void 0?t.enableRotation:!0;if(e){var r=t.constrainRotation;return r===void 0||r===!0?RUe():r===!1?Y9:typeof r=="number"?PUe(r):Y9}else return Rx}function Far(t){return!(t.sourceCenter&&t.targetCenter&&!gs(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function nK(t,e,r,n,i){var o=Math.cos(-i),l=Math.sin(-i),f=t[0]*o-t[1]*l,d=t[1]*o+t[0]*l;f+=(e[0]/2-r[0])*n,d+=(r[1]-e[1]/2)*n,l=-l;var v=f*o-d*l,x=d*o+f*l;return[v,x]}var Cu=Dar;var jar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function KUe(t){if(t instanceof hv){t.setMapInternal(null);return}t instanceof fI&&t.getLayers().forEach(KUe)}function XUe(t,e){if(t instanceof hv){t.setMapInternal(e);return}if(t instanceof fI)for(var r=t.getLayers().getArray(),n=0,i=r.length;n<i;++n)XUe(r[n],e)}var zar=function(t){jar(e,t);function e(r){var n=t.call(this)||this;n.on,n.once,n.un;var i=Uar(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:rN,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Ui(),n.pixelToCoordinateTransform_=Ui(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new ni,n.interactions=i.interactions||new ni,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new GUe(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Ao.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(Ao.VIEW,n.handleViewChanged_),n.addChangeListener(Ao.SIZE,n.handleSizeChanged_),n.addChangeListener(Ao.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var o=n;return r.view&&!(r.view instanceof Cu)&&r.view.then(function(l){o.setView(new Cu(l))}),n.controls.addEventListener(di.ADD,function(l){l.element.setMap(this)}.bind(n)),n.controls.addEventListener(di.REMOVE,function(l){l.element.setMap(null)}.bind(n)),n.interactions.addEventListener(di.ADD,function(l){l.element.setMap(this)}.bind(n)),n.interactions.addEventListener(di.REMOVE,function(l){l.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(di.ADD,function(l){this.addOverlayInternal_(l.element)}.bind(n)),n.overlays_.addEventListener(di.REMOVE,function(l){var f=l.element,d=f.getId();d!==void 0&&delete this.overlayIdIndex_[d.toString()],l.element.setMap(null)}.bind(n)),n.controls.forEach(function(l){l.setMap(this)}.bind(n)),n.interactions.forEach(function(l){l.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(r){this.getControls().push(r)},e.prototype.addInteraction=function(r){this.getInteractions().push(r)},e.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},e.prototype.handleLayerAdd_=function(r){XUe(r.layer,this)},e.prototype.addOverlay=function(r){this.getOverlays().push(r)},e.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},e.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var o=this.getCoordinateFromPixelInternal(r);i=i!==void 0?i:{};var l=i.hitTolerance!==void 0?i.hitTolerance:0,f=i.layerFilter!==void 0?i.layerFilter:ds,d=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,l,d,n,null,f,null)}},e.prototype.getFeaturesAtPixel=function(r,n){var i=[];return this.forEachFeatureAtPixel(r,function(o){i.push(o)},n),i},e.prototype.getAllLayers=function(){var r=[];function n(i){i.forEach(function(o){o instanceof fI?n(o.getLayers()):r.push(o)})}return n(this.getLayers()),r},e.prototype.forEachLayerAtPixel=function(r,n,i){if(!(!this.frameState_||!this.renderer_)){var o=i||{},l=o.hitTolerance!==void 0?o.hitTolerance:0,f=o.layerFilter||ds;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,l,n,f)}},e.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var o=n.layerFilter!==void 0?n.layerFilter:ds,l=n.hitTolerance!==void 0?n.hitTolerance:0,f=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,l,f,o,null)},e.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},e.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},e.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in r?r.changedTouches[0]:r;return[i.clientX-n.left,i.clientY-n.top]},e.prototype.getTarget=function(){return this.get(Ao.TARGET)},e.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},e.prototype.getCoordinateFromPixel=function(r){return Qd(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?$n(n.pixelToCoordinateTransform,r.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ao.LAYERGROUP)},e.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof ni){n.setLayers(r);return}var i=n.getLayers();i.clear(),i.extend(r)},e.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},e.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var o=r[n];if(o.visible){var l=o.layer.getRenderer();if(l&&!l.ready)return!0;var f=o.layer.getSource();if(f&&f.loading)return!0}}return!1},e.prototype.getPixelFromCoordinate=function(r){var n=Si(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},e.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?$n(n.coordinateToPixelTransform,r.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Ao.SIZE)},e.prototype.getView=function(){return this.get(Ao.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},e.prototype.getTilePriority=function(r,n,i,o){return $Ue(this.frameState_,r,n,i,o)},e.prototype.handleBrowserEvent=function(r,n){var i=n||r.type,o=new Tu(i,this,r);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,i=n.type;if(i===hI.POINTERDOWN||i===Vt.WHEEL||i===Vt.KEYDOWN){var o=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():o,f=n.target;if(this.overlayContainerStopEvent_.contains(f)||!(l===o?o.documentElement:l).contains(f))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var d=this.getInteractions().getArray().slice(),v=d.length-1;v>=0;v--){var x=d[v];if(!(x.getMap()!==this||!x.getActive()||!this.getTargetElement())){var b=x.handleEvent(r);if(!b||r.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,o=i;if(r){var l=r.viewHints;if(l[Bo.ANIMATING]||l[Bo.INTERACTING]){var f=Date.now()-r.time>8;i=f?0:8,o=f?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,o))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(Uo.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Uo.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new um(Af.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new um(Af.LOADSTART,this,r))));for(var d=this.postRenderFunctions_,v=0,x=d.length;v<x;++v)d[v](this,r);d.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)an(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Vt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Vt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,eI(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new BUe(this,this.moveTolerance_);for(var o in Qr)this.mapBrowserEventHandler_.addEventListener(Qr[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Vt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Vt.WHEEL,this.boundHandleBrowserEvent_,nN?{passive:!1}:!1);var l=this.getOwnerDocument().defaultView,f=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[qr(f,Vt.KEYDOWN,this.handleBrowserEvent,this),qr(f,Vt.KEYPRESS,this.handleBrowserEvent,this),qr(l,Vt.RESIZE,this.updateSize,this)]}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(an(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(an(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=qr(r,dc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=qr(r,Vt.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(an),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new Xh("addlayer",r)),this.layerGroupPropertyListenerKeys_=[qr(r,dc.PROPERTYCHANGE,this.render,this),qr(r,Vt.CHANGE,this.render,this),qr(r,"addlayer",this.handleLayerAdd_,this),qr(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,i=r.length;n<i;++n){var o=r[n].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(r){return this.getControls().remove(r)},e.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},e.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},e.prototype.handleLayerRemove_=function(r){KUe(r.layer)},e.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},e.prototype.renderFrame_=function(r){var n=this,i=this.getSize(),o=this.getView(),l=this.frameState_,f=null;if(i!==void 0&&_9(i)&&o&&o.isDef()){var d=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),v=o.getState();if(f={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:kT(v.center,v.resolution,v.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:v,viewHints:d,wantedTiles:{},mapId:tr(this),renderTargets:{}},v.nextCenter&&v.nextResolution){var x=isNaN(v.nextRotation)?v.rotation:v.nextRotation;f.nextExtent=kT(v.nextCenter,v.nextResolution,x,i)}}if(this.frameState_=f,this.renderer_.renderFrame(f),f){if(f.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,f.postRenderFunctions),l){var b=!this.previousExtent_||!av(this.previousExtent_)&&!jh(f.extent,this.previousExtent_);b&&(this.dispatchEvent(new um(Af.MOVESTART,this,l)),this.previousExtent_=Kd(this.previousExtent_))}var A=this.previousExtent_&&!f.viewHints[Bo.ANIMATING]&&!f.viewHints[Bo.INTERACTING]&&!jh(f.extent,this.previousExtent_);A&&(this.dispatchEvent(new um(Af.MOVEEND,this,f)),sN(f.extent,this.previousExtent_))}this.dispatchEvent(new um(Af.POSTRENDER,this,f)),this.renderComplete_=this.hasListener(Af.LOADSTART)||this.hasListener(Af.LOADEND)||this.hasListener(Uo.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},e.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new Xh("removelayer",n)),this.set(Ao.LAYERGROUP,r)},e.prototype.setSize=function(r){this.set(Ao.SIZE,r)},e.prototype.setTarget=function(r){this.set(Ao.TARGET,r)},e.prototype.setView=function(r){if(!r||r instanceof Cu){this.set(Ao.VIEW,r);return}this.set(Ao.VIEW,new Cu);var n=this;r.then(function(i){n.setView(new Cu(i))})},e.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var i=getComputedStyle(r),o=r.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),l=r.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(l)&&(n=[o,l],!_9(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),r.setViewportSize(n)}},e}(So);function Uar(t){var e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r={},n=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new fI({layers:t.layers});r[Ao.LAYERGROUP]=n,r[Ao.TARGET]=t.target,r[Ao.VIEW]=t.view instanceof Cu?t.view:new Cu;var i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new ni(t.controls.slice()):(or(typeof t.controls.getArray=="function",47),i=t.controls));var o;t.interactions!==void 0&&(Array.isArray(t.interactions)?o=new ni(t.interactions.slice()):(or(typeof t.interactions.getArray=="function",48),o=t.interactions));var l;return t.overlays!==void 0?Array.isArray(t.overlays)?l=new ni(t.overlays.slice()):(or(typeof t.overlays.getArray=="function",49),l=t.overlays):l=new ni,{controls:i,interactions:o,keyboardEventTarget:e,overlays:l,values:r}}var QUe=zar;p();p();var Bar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Var=function(t){Bar(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var o=i.className!==void 0?i.className:"ol-attribution",l=i.tipLabel!==void 0?i.tipLabel:"Attributions",f=i.expandClassName!==void 0?i.expandClassName:o+"-expand",d=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",v=i.collapseClassName!==void 0?i.collapseClassName:o+"-collapse";typeof d=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=d,n.collapseLabel_.className=v):n.collapseLabel_=d;var x=i.label!==void 0?i.label:"i";typeof x=="string"?(n.label_=document.createElement("span"),n.label_.textContent=x,n.label_.className=f):n.label_=x;var b=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=l,n.toggleButton_.appendChild(b),n.toggleButton_.addEventListener(Vt.CLICK,n.handleClick_.bind(n),!1);var A=o+" "+Eu+" "+xf+(n.collapsed_&&n.collapsible_?" "+E9:"")+(n.collapsible_?"":" ol-uncollapsible"),P=n.element;return P.className=A,P.appendChild(n.toggleButton_),P.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return e.prototype.collectSourceAttributions_=function(r){for(var n={},i=[],o=!0,l=r.layerStatesArray,f=0,d=l.length;f<d;++f){var v=l[f];if(fv(v,r.viewState)){var x=v.layer.getSource();if(x){var b=x.getAttributions();if(b){var A=b(r);if(A)if(o=o&&x.getAttributionsCollapsible()!==!1,Array.isArray(A))for(var P=0,N=A.length;P<N;++P)A[P]in n||(i.push(A[P]),n[A[P]]=!0);else A in n||(i.push(A),n[A]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},e.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Ua(n,this.renderedAttributions_)){f4e(this.ulElement_);for(var o=0,l=n.length;o<l;++o){var f=document.createElement("li");f.innerHTML=n[o],this.ulElement_.appendChild(f)}this.renderedAttributions_=n}},e.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(E9),this.collapsed_?gx(this.collapseLabel_,this.label_):gx(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(r){this.updateElement_(r.frameState)},e}(ys),JUe=Var;p();var Gar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$ar=function(t){Gar(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=i.className!==void 0?i.className:"ol-rotate",l=i.label!==void 0?i.label:"\u21E7",f=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof l=="string"?(n.label_=document.createElement("span"),n.label_.className=f,n.label_.textContent=l):(n.label_=l,n.label_.classList.add(f));var d=i.tipLabel?i.tipLabel:"Reset rotation",v=document.createElement("button");v.className=o+"-reset",v.setAttribute("type","button"),v.title=d,v.appendChild(n.label_),v.addEventListener(Vt.CLICK,n.handleClick_.bind(n),!1);var x=o+" "+Eu+" "+xf,b=n.element;return b.className=x,b.appendChild(v),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(tI),n}return e.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Iu}):n.setRotation(0))}},e.prototype.render=function(r){var n=r.frameState;if(n){var i=n.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var l=this.element.classList.contains(tI);!l&&i===0?this.element.classList.add(tI):l&&i!==0&&this.element.classList.remove(tI)}this.label_.style.transform=o}this.rotation_=i}},e}(ys),eBe=$ar;p();var Har=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),War=function(t){Har(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),target:i.target})||this;var o=i.className!==void 0?i.className:"ol-zoom",l=i.delta!==void 0?i.delta:1,f=i.zoomInClassName!==void 0?i.zoomInClassName:o+"-in",d=i.zoomOutClassName!==void 0?i.zoomOutClassName:o+"-out",v=i.zoomInLabel!==void 0?i.zoomInLabel:"+",x=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",b=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",A=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",P=document.createElement("button");P.className=f,P.setAttribute("type","button"),P.title=b,P.appendChild(typeof v=="string"?document.createTextNode(v):v),P.addEventListener(Vt.CLICK,n.handleClick_.bind(n,l),!1);var N=document.createElement("button");N.className=d,N.setAttribute("type","button"),N.title=A,N.appendChild(typeof x=="string"?document.createTextNode(x):x),N.addEventListener(Vt.CLICK,n.handleClick_.bind(n,-l),!1);var j=o+" "+Eu+" "+xf,D=n.element;return D.className=j,D.appendChild(P),D.appendChild(N),n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},e.prototype.zoomByDelta_=function(r){var n=this.getMap(),i=n.getView();if(i){var o=i.getZoom();if(o!==void 0){var l=i.getConstrainedZoom(o+r);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:l,duration:this.duration_,easing:Iu})):i.setZoom(l)}}},e}(ys),Lx=War;p();var Zar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yar=function(t){Zar(e,t);function e(r){var n=this,i=r||{};n=t.call(this,{element:document.createElement("div"),target:i.target})||this,n.extent=i.extent?i.extent:null;var o=i.className!==void 0?i.className:"ol-zoom-extent",l=i.label!==void 0?i.label:"E",f=i.tipLabel!==void 0?i.tipLabel:"Fit to extent",d=document.createElement("button");d.setAttribute("type","button"),d.title=f,d.appendChild(typeof l=="string"?document.createTextNode(l):l),d.addEventListener(Vt.CLICK,n.handleClick_.bind(n),!1);var v=o+" "+Eu+" "+xf,x=n.element;return x.className=v,x.appendChild(d),n}return e.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),i=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(QT(i))},e}(ys),ik=Yar;function tBe(t){var e=t||{},r=new ni,n=e.zoom!==void 0?e.zoom:!0;n&&r.push(new Lx(e.zoomOptions));var i=e.rotate!==void 0?e.rotate:!0;i&&r.push(new eBe(e.rotateOptions));var o=e.attribution!==void 0?e.attribution:!0;return o&&r.push(new JUe(e.attributionOptions)),r}var Kar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xar=function(t){Kar(e,t);function e(r){return r=Xr({},r),r.controls||(r.controls=tBe()),r.interactions||(r.interactions=Ox({onFocusOnly:!0})),t.call(this,r)||this}return e.prototype.createRenderer=function(){return new zUe(this)},e}(QUe),Dx=Xar;p();p();p();var dI={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Qar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jar=function(t){Qar(e,t);function e(r){var n=this,i=r||{},o=Xr({},i);return delete o.preload,delete o.useInterimTilesOnError,n=t.call(this,o)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return e.prototype.getPreload=function(){return this.get(dI.PRELOAD)},e.prototype.setPreload=function(r){this.set(dI.PRELOAD,r)},e.prototype.getUseInterimTilesOnError=function(){return this.get(dI.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(r){this.set(dI.USE_INTERIM_TILES_ON_ERROR,r)},e.prototype.getData=function(r){return t.prototype.getData.call(this,r)},e}(hv),ok=Jar;p();p();var esr=function(){function t(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},t.prototype.forEach=function(e){for(var r=this.oldest_;r;)e(r.value_,r.key_,this),r=r.newer},t.prototype.get=function(e,r){var n=this.entries_[e];return or(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(e){var r=this.entries_[e];return or(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[e],--this.count_,r.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var e=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)e[r++]=n.key_;return e},t.prototype.getValues=function(){var e=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)e[r++]=n.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.peek=function(e){if(this.containsKey(e))return this.entries_[e].value_},t.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},t.prototype.replace=function(e,r){this.get(e),this.entries_[e].value_=r},t.prototype.set=function(e,r){or(!(e in this.entries_),16);var n={key_:e,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_},t.prototype.setSize=function(e){this.highWaterMark=e},t}(),ak=esr;p();var rBe=function(){function t(e,r,n,i){this.minX=e,this.maxX=r,this.minY=n,this.maxY=i}return t.prototype.contains=function(e){return this.containsXY(e[1],e[2])},t.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},t.prototype.containsXY=function(e,r){return this.minX<=e&&e<=this.maxX&&this.minY<=r&&r<=this.maxY},t.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},t.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},t}();function vv(t,e,r,n,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new rBe(t,e,r,n)}var Nx=rBe;p();p();p();var tsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rsr=function(t){tsr(e,t);function e(r,n,i){var o=t.call(this)||this,l=i||{};return o.tileCoord=r,o.state=n,o.interimTile=null,o.key="",o.transition_=l.transition===void 0?250:l.transition,o.transitionStarts_={},o.interpolate=!!l.interpolate,o}return e.prototype.changed=function(){this.dispatchEvent(Vt.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==Ht.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==Ht.LOADED){r.interimTile=null;break}else r.getState()==Ht.LOADING?n=r:r.getState()==Ht.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(r){if(this.state!==Ht.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},e.prototype.load=function(){ir()},e.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var i=this.transitionStarts_[r];if(!i)i=n,this.transitionStarts_[r]=i;else if(i===-1)return 1;var o=n-i+1e3/60;return o>=this.transition_?1:U9(o/this.transition_)},e.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},e.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},e}(Xs),kx=rsr;var nsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),isr=function(t){nsr(e,t);function e(r){var n=this,i=Ht.IDLE;return n=t.call(this,r.tileCoord,i,{transition:r.transition,interpolate:r.interpolate})||this,n.loader_=r.loader,n.data_=null,n.error_=null,n.size_=r.size||[256,256],n}return e.prototype.getSize=function(){return this.size_},e.prototype.getData=function(){return this.data_},e.prototype.getError=function(){return this.error_},e.prototype.load=function(){if(!(this.state!==Ht.IDLE&&this.state!==Ht.ERROR)){this.state=Ht.LOADING,this.changed();var r=this;this.loader_().then(function(n){r.data_=n,r.state=Ht.LOADED,r.changed()}).catch(function(n){r.error_=n,r.state=Ht.ERROR,r.changed()})}},e}(kx),nBe=isr;p();var osr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),asr=function(t){osr(e,t);function e(r,n,i,o,l,f){var d=t.call(this,r,n,f)||this;return d.crossOrigin_=o,d.src_=i,d.key=i,d.image_=new Image,o!==null&&(d.image_.crossOrigin=o),d.unlisten_=null,d.tileLoadFunction_=l,d}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(r){this.image_=r,this.state=Ht.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=Ht.ERROR,this.unlistenImage_(),this.image_=ssr(),this.changed()},e.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=Ht.LOADED:this.state=Ht.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Ht.ERROR&&(this.state=Ht.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ht.IDLE&&(this.state=Ht.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=iI(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(kx);function ssr(){var t=qi(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Qh=asr;p();p();var iBe=.5,Mf=!0;p();var lsr=10,oBe=.25,usr=function(){function t(e,r,n,i,o,l){this.sourceProj_=e,this.targetProj_=r;var f={},d=lv(this.targetProj_,this.sourceProj_);this.transformInv_=function($){var Z=$[0]+"/"+$[1];return f[Z]||(f[Z]=d($)),f[Z]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&gn(i)==gn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?gn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?gn(this.targetProj_.getExtent()):null;var v=yu(n),x=lx(n),b=sx(n),A=ax(n),P=this.transformInv_(v),N=this.transformInv_(x),j=this.transformInv_(b),D=this.transformInv_(A),F=lsr+(l?Math.max(0,Math.ceil(hN(NT(n)/(l*l*256*256)))):0);if(this.addQuad_(v,x,b,A,P,N,j,D,F),this.wrapsXInSource_){var U=1/0;this.triangles_.forEach(function($,Z,ie){U=Math.min(U,$.source[0][0],$.source[1][0],$.source[2][0])}),this.triangles_.forEach(function($){if(Math.max($.source[0][0],$.source[1][0],$.source[2][0])-U>this.sourceWorldWidth_/2){var Z=[[$.source[0][0],$.source[0][1]],[$.source[1][0],$.source[1][1]],[$.source[2][0],$.source[2][1]]];Z[0][0]-U>this.sourceWorldWidth_/2&&(Z[0][0]-=this.sourceWorldWidth_),Z[1][0]-U>this.sourceWorldWidth_/2&&(Z[1][0]-=this.sourceWorldWidth_),Z[2][0]-U>this.sourceWorldWidth_/2&&(Z[2][0]-=this.sourceWorldWidth_);var ie=Math.min(Z[0][0],Z[1][0],Z[2][0]),ne=Math.max(Z[0][0],Z[1][0],Z[2][0]);ne-ie<this.sourceWorldWidth_/2&&($.source=Z)}}.bind(this))}f={}}return t.prototype.addTriangle_=function(e,r,n,i,o,l){this.triangles_.push({source:[i,o,l],target:[e,r,n]})},t.prototype.addQuad_=function(e,r,n,i,o,l,f,d,v){var x=Ea([o,l,f,d]),b=this.sourceWorldWidth_?gn(x)/this.sourceWorldWidth_:null,A=this.sourceWorldWidth_,P=this.sourceProj_.canWrapX()&&b>.5&&b<1,N=!1;if(v>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var j=Ea([e,r,n,i]),D=gn(j)/this.targetWorldWidth_;N=D>oBe||N}!P&&this.sourceProj_.isGlobal()&&b&&(N=b>oBe||N)}if(!(!N&&this.maxSourceExtent_&&isFinite(x[0])&&isFinite(x[1])&&isFinite(x[2])&&isFinite(x[3])&&!ki(x,this.maxSourceExtent_))){var F=0;if(!N&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(f[0])||!isFinite(f[1])||!isFinite(d[0])||!isFinite(d[1]))){if(v>0)N=!0;else if(F=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(f[0])||!isFinite(f[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),F!=1&&F!=2&&F!=4&&F!=8)return}if(v>0){if(!N){var U=[(e[0]+n[0])/2,(e[1]+n[1])/2],$=this.transformInv_(U),Z=void 0;if(P){var ie=(Ll(o[0],A)+Ll(f[0],A))/2;Z=ie-Ll($[0],A)}else Z=(o[0]+f[0])/2-$[0];var ne=(o[1]+f[1])/2-$[1],ae=Z*Z+ne*ne;N=ae>this.errorThresholdSquared_}if(N){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){var de=[(r[0]+n[0])/2,(r[1]+n[1])/2],ye=this.transformInv_(de),me=[(i[0]+e[0])/2,(i[1]+e[1])/2],be=this.transformInv_(me);this.addQuad_(e,r,de,me,o,l,ye,be,v-1),this.addQuad_(me,de,n,i,be,ye,f,d,v-1)}else{var Ne=[(e[0]+r[0])/2,(e[1]+r[1])/2],Ce=this.transformInv_(Ne),qe=[(n[0]+i[0])/2,(n[1]+i[1])/2],He=this.transformInv_(qe);this.addQuad_(e,Ne,qe,i,o,Ce,He,d,v-1),this.addQuad_(Ne,r,n,qe,Ce,l,f,He,v-1)}return}}if(P){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(F&11)==0&&this.addTriangle_(e,n,i,o,f,d),(F&14)==0&&this.addTriangle_(e,n,r,o,f,l),F&&((F&13)==0&&this.addTriangle_(r,i,e,l,d,o),(F&7)==0&&this.addTriangle_(r,i,n,l,d,f))}},t.prototype.calculateSourceExtent=function(){var e=Bi();return this.triangles_.forEach(function(r,n,i){var o=r.source;ov(e,o[0]),ov(e,o[1]),ov(e,o[2])}),e},t.prototype.getTriangles=function(){return this.triangles_},t}(),aBe=usr;p();p();var mI={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},sBe={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0};var iK,aK=[];function lBe(t,e,r,n,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,i)),t.restore()}function oK(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function csr(){if(iK===void 0){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",lBe(t,4,5,4,0),lBe(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;iK=oK(e,0)||oK(e,4)||oK(e,8)}return iK}function sk(t,e,r,n){var i=xc(r,e,t),o=t9(e,n,r),l=e.getMetersPerUnit();l!==void 0&&(o*=l);var f=t.getMetersPerUnit();f!==void 0&&(o/=f);var d=t.getExtent();if(!d||ms(d,i)){var v=t9(t,o,i)/o;isFinite(v)&&v>0&&(o/=v)}return o}function uBe(t,e,r,n){var i=Js(r),o=sk(t,e,i,n);return(!isFinite(o)||o<=0)&&ox(r,function(l){return o=sk(t,e,l,n),isFinite(o)&&o>0}),o}function cBe(t,e,r,n,i,o,l,f,d,v,x,b){var A=qi(Math.round(r*t),Math.round(r*e),aK);if(b||Xr(A,mI),d.length===0)return A.canvas;A.scale(r,r);function P(Z){return Math.round(Z*r)/r}A.globalCompositeOperation="lighter";var N=Bi();d.forEach(function(Z,ie,ne){uN(N,Z.extent)});var j=gn(N),D=zo(N),F=qi(Math.round(r*j/n),Math.round(r*D/n));b||Xr(F,mI);var U=r/n;d.forEach(function(Z,ie,ne){var ae=Z.extent[0]-N[0],de=-(Z.extent[3]-N[3]),ye=gn(Z.extent),me=zo(Z.extent);Z.image.width>0&&Z.image.height>0&&F.drawImage(Z.image,v,v,Z.image.width-2*v,Z.image.height-2*v,ae*U,de*U,ye*U,me*U)});var $=yu(l);return f.getTriangles().forEach(function(Z,ie,ne){var ae=Z.source,de=Z.target,ye=ae[0][0],me=ae[0][1],be=ae[1][0],Ne=ae[1][1],Ce=ae[2][0],qe=ae[2][1],He=P((de[0][0]-$[0])/o),Ke=P(-(de[0][1]-$[1])/o),Je=P((de[1][0]-$[0])/o),We=P(-(de[1][1]-$[1])/o),lt=P((de[2][0]-$[0])/o),pt=P(-(de[2][1]-$[1])/o),dt=ye,ze=me;ye=0,me=0,be-=dt,Ne-=ze,Ce-=dt,qe-=ze;var Dt=[[be,Ne,0,0,Je-He],[Ce,qe,0,0,lt-He],[0,0,be,Ne,We-Ke],[0,0,Ce,qe,pt-Ke]],Ot=yze(Dt);if(Ot){if(A.save(),A.beginPath(),csr()||!b){A.moveTo(Je,We);for(var Ue=4,nt=He-Je,Ze=Ke-We,rt=0;rt<Ue;rt++)A.lineTo(Je+P((rt+1)*nt/Ue),We+P(rt*Ze/(Ue-1))),rt!=Ue-1&&A.lineTo(Je+P((rt+1)*nt/Ue),We+P((rt+1)*Ze/(Ue-1)));A.lineTo(lt,pt)}else A.moveTo(Je,We),A.lineTo(He,Ke),A.lineTo(lt,pt);A.clip(),A.transform(Ot[0],Ot[2],Ot[1],Ot[3],He,Ke),A.translate(N[0]-dt,N[3]-ze),A.scale(n/r,-n/r),A.drawImage(F.canvas,0,0),A.restore()}}),x&&(A.save(),A.globalCompositeOperation="source-over",A.strokeStyle="black",A.lineWidth=1,f.getTriangles().forEach(function(Z,ie,ne){var ae=Z.target,de=(ae[0][0]-$[0])/o,ye=-(ae[0][1]-$[1])/o,me=(ae[1][0]-$[0])/o,be=-(ae[1][1]-$[1])/o,Ne=(ae[2][0]-$[0])/o,Ce=-(ae[2][1]-$[1])/o;A.beginPath(),A.moveTo(me,be),A.lineTo(de,ye),A.lineTo(Ne,Ce),A.closePath(),A.stroke()}),A.restore()),A.canvas}var fsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hsr=function(t){fsr(e,t);function e(r,n,i,o,l,f,d,v,x,b,A,P){var N=t.call(this,l,Ht.IDLE,{interpolate:!!P})||this;N.renderEdges_=A!==void 0?A:!1,N.pixelRatio_=d,N.gutter_=v,N.canvas_=null,N.sourceTileGrid_=n,N.targetTileGrid_=o,N.wrappedTileCoord_=f||l,N.sourceTiles_=[],N.sourcesListenerKeys_=null,N.sourceZ_=0;var j=o.getTileCoordExtent(N.wrappedTileCoord_),D=N.targetTileGrid_.getExtent(),F=N.sourceTileGrid_.getExtent(),U=D?vu(j,D):j;if(NT(U)===0)return N.state=Ht.EMPTY,N;var $=r.getExtent();$&&(F?F=vu(F,$):F=$);var Z=o.getResolution(N.wrappedTileCoord_[0]),ie=uBe(r,i,U,Z);if(!isFinite(ie)||ie<=0)return N.state=Ht.EMPTY,N;var ne=b!==void 0?b:iBe;if(N.triangulation_=new aBe(r,i,U,F,ie*ne,Z),N.triangulation_.getTriangles().length===0)return N.state=Ht.EMPTY,N;N.sourceZ_=n.getZForResolution(ie);var ae=N.triangulation_.calculateSourceExtent();if(F&&(r.canWrapX()?(ae[1]=Zn(ae[1],F[1],F[3]),ae[3]=Zn(ae[3],F[1],F[3])):ae=vu(ae,F)),!NT(ae))N.state=Ht.EMPTY;else{for(var de=n.getTileRangeForExtentAndZ(ae,N.sourceZ_),ye=de.minX;ye<=de.maxX;ye++)for(var me=de.minY;me<=de.maxY;me++){var be=x(N.sourceZ_,ye,me,d);be&&N.sourceTiles_.push(be)}N.sourceTiles_.length===0&&(N.state=Ht.EMPTY)}return N}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(x,b,A){x&&x.getState()==Ht.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(x.tileCoord),image:x.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=Ht.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),o=typeof i=="number"?i:i[0],l=typeof i=="number"?i:i[1],f=this.targetTileGrid_.getResolution(n),d=this.sourceTileGrid_.getResolution(this.sourceZ_),v=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=cBe(o,l,this.pixelRatio_,d,this.sourceTileGrid_.getExtent(),f,v,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ht.LOADED}this.changed()},e.prototype.load=function(){if(this.state==Ht.IDLE){this.state=Ht.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,o){var l=n.getState();if(l==Ht.IDLE||l==Ht.LOADING){r++;var f=qr(n,Vt.CHANGE,function(d){var v=n.getState();(v==Ht.LOADED||v==Ht.ERROR||v==Ht.EMPTY)&&(an(f),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(f)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,o){var l=n.getState();l==Ht.IDLE&&n.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(an),this.sourcesListenerKeys_=null},e.prototype.release=function(){this.canvas_&&(ON(this.canvas_.getContext("2d")),aK.push(this.canvas_),this.canvas_=null),t.prototype.release.call(this)},e}(kx),qx=hsr;p();p();var gI=34962,vI=34963,hBe=35040,Fx=35044,pBe=35048,dBe=5121,mBe=5123,gBe=5125,sK=5126,fBe=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function lK(t,e){for(var r=Xr({preserveDrawingBuffer:!0,antialias:!nze},e),n=fBe.length,i=0;i<n;++i)try{var o=t.getContext(fBe[i],r);if(o)return o}catch(l){}return null}var psr={STATIC_DRAW:Fx,STREAM_DRAW:hBe,DYNAMIC_DRAW:pBe},dsr=function(){function t(e,r){this.array=null,this.type=e,or(e===gI||e===vI,62),this.usage=r!==void 0?r:psr.STATIC_DRAW}return t.prototype.ofSize=function(e){this.array=new(uK(this.type))(e)},t.prototype.fromArray=function(e){var r=uK(this.type);this.array=r.from?r.from(e):new r(e)},t.prototype.fromArrayBuffer=function(e){this.array=new(uK(this.type))(e)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}();function uK(t){switch(t){case gI:return Float32Array;case vI:return Uint32Array;default:return Float32Array}}var lk=dsr;var msr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function yBe(t,e,r){var n=r?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function gsr(t,e,r,n){yBe(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}function vBe(t,e,r,n,i,o){var l=t.getGL(),f,d;if(r instanceof Float32Array){f=l.FLOAT,t.getExtension("OES_texture_float");var v=t.getExtension("OES_texture_float_linear");d=v!==null}else f=l.UNSIGNED_BYTE,d=!0;yBe(l,e,o&&d);var x=r.byteLength/n[1],b=1;x%8===0?b=8:x%4===0?b=4:x%2===0&&(b=2);var A;switch(i){case 1:{A=l.LUMINANCE;break}case 2:{A=l.LUMINANCE_ALPHA;break}case 3:{A=l.RGB;break}case 4:{A=l.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(i))}var P=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,b),l.texImage2D(l.TEXTURE_2D,0,A,n[0],n[1],0,A,f,r),l.pixelStorei(l.UNPACK_ALIGNMENT,P)}var jx=null;function vsr(){var t=document.createElement("canvas");t.width=1,t.height=1,jx=t.getContext("2d")}var ysr=function(t){msr(e,t);function e(r){var n=t.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=Kn(r.grid.getTileSize(r.tile.tileCoord[0])),n.gutter_=r.gutter||0,n.bandCount=NaN,n.helper_=r.helper;var i=new lk(gI,Fx);return i.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(i),n.coords=i,n.setTile(r.tile),n}return e.prototype.setTile=function(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(Vt.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===Ht.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof Qh){var n=r.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}r.addEventListener(Vt.CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var r=this.helper_,n=r.getGL(),i=this.tile;if(i instanceof Qh||i instanceof qx){var o=n.createTexture();this.textures.push(o),this.bandCount=4,gsr(n,o,i.getImage(),i.interpolate);return}var l=i.getSize(),f=[l[0]+2*this.gutter_,l[1]+2*this.gutter_],d=i.getData(),v=d instanceof Float32Array,x=f[0]*f[1],b=v?Float32Array:Uint8Array,A=b.BYTES_PER_ELEMENT,P=d.byteLength/f[1];this.bandCount=Math.floor(P/A/f[0]);var N=Math.ceil(this.bandCount/4);if(N===1){var o=n.createTexture();this.textures.push(o),vBe(r,o,d,f,this.bandCount,i.interpolate);return}for(var j=new Array(N),D=0;D<N;++D){var o=n.createTexture();this.textures.push(o);var F=D<N-1?4:this.bandCount%4;j[D]=new b(x*F)}for(var U=0,$=0,Z=f[0]*this.bandCount,ie=0;ie<f[1];++ie){for(var ne=0;ne<Z;++ne){var ae=d[$+ne],de=Math.floor(U/this.bandCount),ye=ne%this.bandCount,D=Math.floor(ye/4),me=j[D],F=me.length/x,be=ye%4;me[de*F+be]=ae,++U}$+=P/A}for(var D=0;D<N;++D){var o=this.textures[D],me=j[D],F=me.length/x;vBe(r,o,me,f,F,i.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===Ht.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(Vt.CHANGE))},e.prototype.disposeInternal=function(){var r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n]);this.tile.removeEventListener(Vt.CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(r,n){if(!this.loaded)return null;var i=this.renderSize_[0],o=this.renderSize_[1],l=this.gutter_;if(this.tile instanceof nBe){var f=this.tile.getSize(),d=f[0],v=f[1],x=d+2*l,b=v+2*l,A=l+Math.floor(d*(r/i)),P=l+Math.floor(v*(n/o)),N=this.tile.getData();if(N instanceof DataView){var j=N.byteLength/(x*b),D=j*(P*x+A),F=N.buffer.slice(D,D+j);return new DataView(F)}var U=this.bandCount*(P*x+A);return N.slice(U,U+this.bandCount)}jx||vsr(),jx.clearRect(0,0,1,1);var $=this.tile.getImage(),Z=$.width,ie=$.height,ne=Z-2*l,ae=ie-2*l,de=l+Math.floor(ne*(r/i)),ye=l+Math.floor(ae*(n/o)),me;try{jx.drawImage($,de,ye,1,1,0,0,1,1),me=jx.getImageData(0,0,1,1).data}catch(be){return jx=null,null}return me},e}(Xs),_Be=ysr;p();p();p();var yI={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};p();var _sr=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,xsr=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,bsr=function(){function t(e){this.gl_=e.webGlContext;var r=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=r.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=r.createFramebuffer();var n=r.createShader(r.VERTEX_SHADER);r.shaderSource(n,e.vertexShader||_sr),r.compileShader(n);var i=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(i,e.fragmentShader||xsr),r.compileShader(i),this.renderTargetProgram_=r.createProgram(),r.attachShader(this.renderTargetProgram_,n),r.attachShader(this.renderTargetProgram_,i),r.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=r.createBuffer();var o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.bufferData(r.ARRAY_BUFFER,new Float32Array(o),r.STATIC_DRAW),this.renderTargetAttribLocation_=r.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(l){this.uniforms_.push({value:e.uniforms[l],location:r.getUniformLocation(this.renderTargetProgram_,l)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(e){var r=this.getGL(),n=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var i=0,o=r.RGBA,l=0,f=r.RGBA,d=r.UNSIGNED_BYTE,v=null;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,i,o,n[0],n[1],l,f,d,v),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(e,r,n,i){var o=this.getGL(),l=e.size;if(o.bindFramebuffer(o.FRAMEBUFFER,r?r.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!r){var f=tr(o.canvas);if(!e.renderTargets[f]){var d=o.getContextAttributes();d&&d.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),e.renderTargets[f]=!0}}o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,l[0],l[1]),o.uniform1i(this.renderTargetTextureLocation_,0);var v=e.layerStatesArray[e.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,v),this.applyUniforms(e),n&&n(o,e),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,e)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(e){var r=this.getGL(),n,i=1;this.uniforms_.forEach(function(o){if(n=typeof o.value=="function"?o.value(e):o.value,n instanceof HTMLCanvasElement||n instanceof ImageData)o.texture||(o.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(i)]),r.bindTexture(r.TEXTURE_2D,o.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,n.width,n.height,0,r.UNSIGNED_BYTE,new Uint8Array(n.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.uniform1i(o.location,i++);else if(Array.isArray(n))switch(n.length){case 2:r.uniform2f(o.location,n[0],n[1]);return;case 3:r.uniform3f(o.location,n[0],n[1],n[2]);return;case 4:r.uniform4f(o.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&r.uniform1f(o.location,n)})},t}(),cK=bsr;p();function uk(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function zx(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var wsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var _I={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},Ux={UNSIGNED_BYTE:dBe,UNSIGNED_SHORT:mBe,UNSIGNED_INT:gBe,FLOAT:sK},ck={};function xBe(t){return"shared/"+t}var bBe=0;function Esr(){var t="unique/"+bBe;return bBe+=1,t}function Ssr(t){var e=ck[t];if(!e){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",e={users:0,canvas:r},ck[t]=e}return e.users+=1,e.canvas}function Tsr(t){var e=ck[t];if(e&&(e.users-=1,!(e.users>0))){var r=e.canvas,n=lK(r),i=n.getExtension("WEBGL_lose_context");i&&i.loseContext(),delete ck[t]}}var Isr=function(t){wsr(e,t);function e(r){var n=t.call(this)||this,i=r||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=i.canvasCacheKey?xBe(i.canvasCacheKey):Esr(),n.canvas_=Ssr(n.canvasCacheKey_),n.gl_=lK(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(yI.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(yI.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Ui(),n.offsetScaleMatrix_=Ui(),n.tmpMat4_=uk(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],i.uniforms&&n.setUniforms(i.uniforms);var o=n.getGL();return n.postProcessPasses_=i.postProcesses?i.postProcesses.map(function(l){return new cK({webGlContext:o,scaleRatio:l.scaleRatio,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,uniforms:l.uniforms})}):[new cK({webGlContext:o})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return e.prototype.setUniforms=function(r){this.uniforms_=[];for(var n in r)this.uniforms_.push({name:n,value:r[n]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(r){return this.canvasCacheKey_===xBe(r)},e.prototype.getExtension=function(r){if(r in this.extensionCache_)return this.extensionCache_[r];var n=this.gl_.getExtension(r);return this.extensionCache_[r]=n,n},e.prototype.bindBuffer=function(r){var n=this.getGL(),i=tr(r),o=this.bufferCache_[i];if(!o){var l=n.createBuffer();o={buffer:r,webGlBuffer:l},this.bufferCache_[i]=o}n.bindBuffer(r.getType(),o.webGlBuffer)},e.prototype.flushBufferData=function(r){var n=this.getGL();this.bindBuffer(r),n.bufferData(r.getType(),r.getArray(),r.getUsage())},e.prototype.deleteBuffer=function(r){var n=this.getGL(),i=tr(r),o=this.bufferCache_[i];o&&!n.isContextLost()&&n.deleteBuffer(o.webGlBuffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(yI.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(yI.RESTORED,this.boundHandleWebGLContextRestored_),Tsr(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(r,n){var i=this.getGL(),o=this.getCanvas(),l=r.size,f=r.pixelRatio;o.width=l[0]*f,o.height=l[1]*f,o.style.width=l[0]+"px",o.style.height=l[1]+"px",i.useProgram(this.currentProgram_);for(var d=this.postProcessPasses_.length-1;d>=0;d--)this.postProcessPasses_[d].init(r);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},e.prototype.prepareDrawToRenderTarget=function(r,n,i){var o=this.getGL(),l=n.getSize();o.bindFramebuffer(o.FRAMEBUFFER,n.getFramebuffer()),o.viewport(0,0,l[0],l[1]),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,i?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},e.prototype.drawElements=function(r,n){var i=this.getGL();this.getExtension("OES_element_index_uint");var o=i.UNSIGNED_INT,l=4,f=n-r,d=r*l;i.drawElements(i.TRIANGLES,f,o,d)},e.prototype.finalizeDraw=function(r,n,i){for(var o=0,l=this.postProcessPasses_.length;o<l;o++)o===l-1?this.postProcessPasses_[o].apply(r,null,n,i):this.postProcessPasses_[o].apply(r,this.postProcessPasses_[o+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(r){var n=r.size,i=r.viewState.rotation,o=rx(this.offsetScaleMatrix_);LT(o,2/n[0],2/n[1]);var l=rx(this.offsetRotateMatrix_);i!==0&&iN(l,-i),this.setUniformMatrixValue(_I.OFFSET_SCALE_MATRIX,zx(this.tmpMat4_,o)),this.setUniformMatrixValue(_I.OFFSET_ROTATION_MATRIX,zx(this.tmpMat4_,l)),this.setUniformFloatValue(_I.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(_I.ZOOM,r.viewState.zoom),this.setUniformFloatValue(_I.RESOLUTION,r.viewState.resolution)},e.prototype.applyUniforms=function(r){var n=this.getGL(),i,o=0;this.uniforms_.forEach(function(l){if(i=typeof l.value=="function"?l.value(r):l.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData){l.texture||(l.prevValue=void 0,l.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(o)]),n.bindTexture(n.TEXTURE_2D,l.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var f=!(i instanceof HTMLImageElement)||i.complete;f&&l.prevValue!==i&&(l.prevValue=i,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i)),n.uniform1i(this.getUniformLocation(l.name),o++)}else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(l.name,zx(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:n.uniform2f(this.getUniformLocation(l.name),i[0],i[1]);return;case 3:n.uniform3f(this.getUniformLocation(l.name),i[0],i[1],i[2]);return;case 4:n.uniform4f(this.getUniformLocation(l.name),i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&n.uniform1f(this.getUniformLocation(l.name),i)}.bind(this))},e.prototype.useProgram=function(r){if(r==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(r),this.currentProgram_=r,this.uniformLocations_={},this.attribLocations_={},!0},e.prototype.compileShader=function(r,n){var i=this.getGL(),o=i.createShader(n);return i.shaderSource(o,r),i.compileShader(o),o},e.prototype.getProgram=function(r,n){var i=this.getGL(),o=this.compileShader(r,i.FRAGMENT_SHADER),l=this.compileShader(n,i.VERTEX_SHADER),f=i.createProgram();if(i.attachShader(f,o),i.attachShader(f,l),i.linkProgram(f),!i.getShaderParameter(o,i.COMPILE_STATUS)){var d="Fragment shader compliation failed: ".concat(i.getShaderInfoLog(o));throw new Error(d)}if(i.deleteShader(o),!i.getShaderParameter(l,i.COMPILE_STATUS)){var d="Vertex shader compilation failed: ".concat(i.getShaderInfoLog(l));throw new Error(d)}if(i.deleteShader(l),!i.getProgramParameter(f,i.LINK_STATUS)){var d="GL program linking failed: ".concat(i.getShaderInfoLog(l));throw new Error(d)}return f},e.prototype.getUniformLocation=function(r){return this.uniformLocations_[r]===void 0&&(this.uniformLocations_[r]=this.getGL().getUniformLocation(this.currentProgram_,r)),this.uniformLocations_[r]},e.prototype.getAttributeLocation=function(r){return this.attribLocations_[r]===void 0&&(this.attribLocations_[r]=this.getGL().getAttribLocation(this.currentProgram_,r)),this.attribLocations_[r]},e.prototype.makeProjectionTransform=function(r,n){var i=r.size,o=r.viewState.rotation,l=r.viewState.resolution,f=r.viewState.center;return rx(n),To(n,0,0,2/(l*i[0]),2/(l*i[1]),-o,-f[0],-f[1]),n},e.prototype.setUniformFloatValue=function(r,n){this.getGL().uniform1f(this.getUniformLocation(r),n)},e.prototype.setUniformFloatVec4=function(r,n){this.getGL().uniform4fv(this.getUniformLocation(r),n)},e.prototype.setUniformMatrixValue=function(r,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(r),!1,n)},e.prototype.enableAttributeArray_=function(r,n,i,o,l){var f=this.getAttributeLocation(r);f<0||(this.getGL().enableVertexAttribArray(f),this.getGL().vertexAttribPointer(f,n,i,!1,o,l))},e.prototype.enableAttributes=function(r){for(var n=Asr(r),i=0,o=0;o<r.length;o++){var l=r[o];this.enableAttributeArray_(l.name,l.size,l.type||sK,n,i),i+=l.size*wBe(l.type)}},e.prototype.handleWebGLContextLost=function(){Ks(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(r,n,i){var o=this.getGL(),l=i||o.createTexture(),f=0,d=o.RGBA,v=0,x=o.RGBA,b=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,l),n?o.texImage2D(o.TEXTURE_2D,f,d,x,b,n):o.texImage2D(o.TEXTURE_2D,f,d,r[0],r[1],v,x,b,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),l},e}(Wd);function Asr(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*wBe(n.type)}return e}function wBe(t){switch(t){case Ux.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Ux.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Ux.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Ux.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var EBe=Isr;var Msr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Csr=function(t){Msr(e,t);function e(r,n){var i=t.call(this,r)||this,o=n||{};return i.inversePixelTransform_=Ui(),i.pixelContext_=null,i.postProcesses_=o.postProcesses,i.uniforms_=o.uniforms,i.helper,r.addChangeListener(vn.MAP,i.removeHelper.bind(i)),i.dispatchPreComposeEvent=i.dispatchPreComposeEvent.bind(i),i.dispatchPostComposeEvent=i.dispatchPostComposeEvent.bind(i),i}return e.prototype.dispatchPreComposeEvent=function(r,n){var i=this.getLayer();if(i.hasListener(Uo.PRECOMPOSE)){var o=new im(Uo.PRECOMPOSE,void 0,n,r);i.dispatchEvent(o)}},e.prototype.dispatchPostComposeEvent=function(r,n){var i=this.getLayer();if(i.hasListener(Uo.POSTCOMPOSE)){var o=new im(Uo.POSTCOMPOSE,void 0,n,r);i.dispatchEvent(o)}},e.prototype.reset=function(r){this.uniforms_=r.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},e.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(r){if(this.getLayer().getRenderSource()){for(var n=!0,i=-1,o=void 0,l=0,f=r.layerStatesArray.length;l<f;l++){var d=r.layerStatesArray[l].layer,v=d.getRenderer();if(!(v instanceof e)){n=!0;continue}var x=d.getClassName();if((n||x!==o)&&(i+=1,n=!1),o=x,v===this)break}var b="map/"+r.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(b))&&(this.removeHelper(),this.helper=new EBe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:b}),o&&(this.helper.getCanvas().className=o),this.afterHelperCreated())}return this.prepareFrameInternal(r)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(r){return!0},e.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},e.prototype.dispatchRenderEvent_=function(r,n,i){var o=this.getLayer();if(o.hasListener(r)){To(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);var l=new im(r,this.inversePixelTransform_,i,n);o.dispatchEvent(l)}},e.prototype.preRender=function(r,n){this.dispatchRenderEvent_(Uo.PRERENDER,r,n)},e.prototype.postRender=function(r,n){this.dispatchRenderEvent_(Uo.POSTRENDER,r,n)},e.prototype.getDataAtPixel=function(r,n,i){var o=$n([n.pixelRatio,0,0,n.pixelRatio,0,0],r.slice()),l=this.helper.getGL();if(!l)return null;var f=this.getLayer(),d=f.getExtent();if(d){var v=$n(n.pixelToCoordinateTransform,r.slice());if(!ms(d,v))return null}var x=l.getContextAttributes();if(!x||!x.preserveDrawingBuffer)return new Uint8Array;var b=Math.round(o[0]),A=Math.round(o[1]),P=this.pixelContext_;if(!P){var N=document.createElement("canvas");N.width=1,N.height=1,P=N.getContext("2d"),this.pixelContext_=P}P.clearRect(0,0,1,1);var j;try{P.drawImage(l.canvas,b,A,1,1,0,0,1,1),j=P.getImageData(0,0,1,1).data}catch(D){return j}return j[3]===0?null:j},e}(FN);var SBe=Csr;p();function Bx(t,e,r,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function yv(t,e,r){return t+"/"+e+"/"+r}function pm(t){return yv(t[0],t[1],t[2])}function TBe(t){return t.split("/").map(Number)}function fk(t){return(t[1]<<t[0])+t[2]}function IBe(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o=e.getFullTileRange(r);return o?o.containsXY(n,i):!0}var Psr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ur={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},xI={TEXTURE_COORD:"a_textureCoord"},Rsr=[{name:xI.TEXTURE_COORD,size:2,type:Ux.FLOAT}],Osr={};function Lsr(t){return 2*(1-1/(t+1))-1}function ABe(t,e,r){r in t||(t[r]=[]),t[r].push(e)}function fK(t,e){var r=t.layerStatesArray[t.layerIndex];r.extent&&(e=vu(e,$a(r.extent,t.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=vu(e,i))}return e}function hK(t,e){return"".concat(t.getKey(),",").concat(pm(e))}var Dsr=function(t){Psr(e,t);function e(r,n){var i=t.call(this,r,{uniforms:n.uniforms})||this;i.renderComplete=!1,i.tileTransform_=Ui(),i.tempMat4_=uk(),i.tempTileRange_=new Nx(0,0,0,0),i.tempTileCoord_=Bx(0,0,0),i.tempSize_=[0,0],i.program_,i.vertexShader_=n.vertexShader,i.fragmentShader_=n.fragmentShader,i.indices_=new lk(vI,Fx),i.indices_.fromArray([0,1,3,1,2,3]);var o=n.cacheSize!==void 0?n.cacheSize:512;return i.tileTextureCache_=new ak(o),i.paletteTextures_=n.paletteTextures||[],i.frameState_=null,i}return e.prototype.reset=function(r){t.prototype.reset.call(this,{uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(r){var n=this.getLayer(),i=r.getState(),o=n.getUseInterimTilesOnError();return i==Ht.LOADED||i==Ht.EMPTY||i==Ht.ERROR&&!o},e.prototype.prepareFrameInternal=function(r){var n=this.getLayer(),i=n.getRenderSource();return!i||av(fK(r,r.extent))?!1:i.getState()==="ready"},e.prototype.enqueueTiles=function(r,n,i,o){var l=r.viewState,f=this.getLayer(),d=f.getRenderSource(),v=d.getTileGridForProjection(l.projection),x=d.getGutterForProjection(l.projection),b=tr(d);b in r.wantedTiles||(r.wantedTiles[b]={});for(var A=r.wantedTiles[b],P=this.tileTextureCache_,N=Math.max(i-f.getPreload(),v.getMinZoom(),f.getMinZoom()),j=i;j>=N;--j)for(var D=v.getTileRangeForExtentAndZ(n,j,this.tempTileRange_),F=v.getResolution(j),U=D.minX;U<=D.maxX;++U)for(var $=D.minY;$<=D.maxY;++$){var Z=Bx(j,U,$,this.tempTileCoord_),ie=hK(d,Z),ne=void 0,ae=void 0;if(P.containsKey(ie)&&(ne=P.get(ie),ae=ne.tile),!ne||ne.tile.key!==d.getKey())if(ae=d.getTile(j,U,$,r.pixelRatio,l.projection),!ne)ne=new _Be({tile:ae,grid:v,helper:this.helper,gutter:x}),P.set(ie,ne);else if(this.isDrawableTile_(ae))ne.setTile(ae);else{var de=ae.getInterimTile();ne.setTile(de)}ABe(o,ne,j);var ye=ae.getKey();A[ye]=!0,ae.getState()===Ht.IDLE&&(r.tileQueue.isKeyQueued(ye)||r.tileQueue.enqueue([ae,b,v.getTileCoordCenter(Z),F]))}},e.prototype.renderFrame=function(r){this.frameState_=r,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,r);var i=r.viewState,o=this.getLayer(),l=o.getRenderSource(),f=l.getTileGridForProjection(i.projection),d=l.getGutterForProjection(i.projection),v=fK(r,r.extent),x=f.getZForResolution(i.resolution,l.zDirection),b={};if(r.nextExtent){var A=f.getZForResolution(i.nextResolution,l.zDirection),P=fK(r,r.nextExtent);this.enqueueTiles(r,P,A,b)}this.enqueueTiles(r,v,x,b);for(var N={},j=tr(this),D=r.time,F=!1,U=b[x],$=0,Z=U.length;$<Z;++$){var ie=U[$],ne=ie.tile,ae=ne.tileCoord;if(ie.loaded){var de=ne.getAlpha(j,D);if(de===1){ne.endTransition(j);continue}F=!0;var ye=pm(ae);N[ye]=de}this.renderComplete=!1;var me=this.findAltTiles_(f,ae,x+1,b);if(!me)for(var be=f.getMinZoom(),Ne=x-1;Ne>=be;--Ne){var Ce=this.findAltTiles_(f,ae,Ne,b);if(Ce)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(r,!F);for(var qe=Object.keys(b).map(Number).sort(Pl),He=i.center[0],Ke=i.center[1],Je=0,We=qe.length;Je<We;++Je)for(var lt=qe[Je],pt=f.getResolution(lt),dt=Kn(f.getTileSize(lt),this.tempSize_),ze=f.getOrigin(lt),Dt=dt[0]+2*d,Ot=dt[1]+2*d,Ue=Dt/Ot,nt=(He-ze[0])/(dt[0]*pt),Ze=(ze[1]-Ke)/(dt[1]*pt),rt=i.resolution/pt,at=Lsr(lt),ot=b[lt],$=0,Z=ot.length;$<Z;++$){var ie=ot[$];if(ie.loaded){var ne=ie.tile,ae=ne.tileCoord,ye=pm(ae),Lt=ae[1],zt=ae[2];rx(this.tileTransform_),LT(this.tileTransform_,2/(r.size[0]*rt/Dt),-2/(r.size[1]*rt/Dt)),iN(this.tileTransform_,i.rotation),LT(this.tileTransform_,1,1/Ue),cze(this.tileTransform_,(dt[0]*(Lt-nt)-d)/Dt,(dt[1]*(zt-Ze)-d)/Ot),this.helper.setUniformMatrixValue(Ur.TILE_TRANSFORM,zx(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(ie.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Rsr);for(var Pt=0;Pt<ie.textures.length;){var $t="TEXTURE"+Pt,Xt="".concat(Ur.TILE_TEXTURE_ARRAY,"[").concat(Pt,"]");n.activeTexture(n[$t]),n.bindTexture(n.TEXTURE_2D,ie.textures[Pt]),n.uniform1i(this.helper.getUniformLocation(Xt),Pt),++Pt}for(var Gt=0;Gt<this.paletteTextures_.length;++Gt){var Sr=this.paletteTextures_[Gt];n.activeTexture(n["TEXTURE"+Pt]);var zr=Sr.getTexture(n);n.bindTexture(n.TEXTURE_2D,zr),n.uniform1i(this.helper.getUniformLocation(Sr.name),Pt),++Pt}var de=ye in N?N[ye]:1;de<1&&(r.animate=!0),this.helper.setUniformFloatValue(Ur.TRANSITION_ALPHA,de),this.helper.setUniformFloatValue(Ur.DEPTH,at),this.helper.setUniformFloatValue(Ur.TEXTURE_PIXEL_WIDTH,Dt),this.helper.setUniformFloatValue(Ur.TEXTURE_PIXEL_HEIGHT,Ot),this.helper.setUniformFloatValue(Ur.TEXTURE_RESOLUTION,pt),this.helper.setUniformFloatValue(Ur.TEXTURE_ORIGIN_X,ze[0]+Lt*dt[0]*pt-d*pt),this.helper.setUniformFloatValue(Ur.TEXTURE_ORIGIN_Y,ze[1]-zt*dt[1]*pt+d*pt);var vr=v;d>0&&(vr=f.getTileCoordExtent(ae),vu(vr,v,vr)),this.helper.setUniformFloatVec4(Ur.RENDER_EXTENT,vr),this.helper.setUniformFloatValue(Ur.RESOLUTION,i.resolution),this.helper.setUniformFloatValue(Ur.ZOOM,i.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var pr=this.helper.getCanvas(),dr=this.tileTextureCache_;dr.canExpireCache();){var ie=dr.pop();ie.dispose()}var br=function(un,En){l.expireCache(En.viewState.projection,Osr)};return r.postRenderFunctions.push(br),this.postRender(n,r),pr},e.prototype.getData=function(r){var n=this.helper.getGL();if(!n)return null;var i=this.frameState_;if(!i)return null;var o=this.getLayer(),l=$n(i.pixelToCoordinateTransform,r.slice()),f=i.viewState,d=o.getExtent();if(d&&!ms($a(d,f.projection),l))return null;var v=o.getSources(Ea([l]),f.resolution),x,b,A;for(x=v.length-1;x>=0;--x)if(b=v[x],b.getState()==="ready"){if(A=b.getTileGridForProjection(f.projection),b.getWrapX())break;var P=A.getExtent();if(!P||ms(P,l))break}if(x<0)return null;for(var N=this.tileTextureCache_,j=A.getZForResolution(f.resolution);j>=A.getMinZoom();--j){var D=A.getTileCoordForCoordAndZ(l,j),F=hK(b,D);if(N.containsKey(F)){var U=N.get(F);if(U.loaded){var $=A.getOrigin(j),Z=Kn(A.getTileSize(j)),ie=A.getResolution(j),ne=(l[0]-$[0])/ie-D[1]*Z[0],ae=($[1]-l[1])/ie-D[2]*Z[1];return U.getPixelData(ne,ae)}}}return null},e.prototype.findAltTiles_=function(r,n,i,o){var l=r.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!l)return!1;for(var f=!0,d=this.tileTextureCache_,v=this.getLayer().getRenderSource(),x=l.minX;x<=l.maxX;++x)for(var b=l.minY;b<=l.maxY;++b){var A=hK(v,[i,x,b]),P=!1;if(d.containsKey(A)){var N=d.get(A);N.loaded&&(ABe(o,N,i),P=!0)}P||(f=!1)}return f},e.prototype.removeHelper=function(){if(this.helper){var r=this.tileTextureCache_;r.forEach(function(n){return n.dispose()}),r.clear()}t.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var r=this.helper;if(r){var n=r.getGL();n.deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)}t.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},e}(SBe),MBe=Dsr;p();p();var Nsr=function(){function t(e,r){this.name=e,this.data=r,this.texture_=null}return t.prototype.getTexture=function(e){if(!this.texture_){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=r}return this.texture_},t}(),CBe=Nsr;var Qt={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},tn={};function Cf(t){if(typeof t=="number")return Qt.NUMBER;if(typeof t=="boolean")return Qt.BOOLEAN;if(typeof t=="string")return c4e(t)?Qt.COLOR|Qt.STRING:Qt.STRING;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var e=t,r=e.every(function(i){return typeof i=="number"});if(r)return e.length===3||e.length===4?Qt.COLOR|Qt.NUMBER_ARRAY:Qt.NUMBER_ARRAY;if(typeof e[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var n=tn[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.getReturnType(e.slice(1))}function ksr(t){return hN(t)%1===0}function hk(t){var e=t.toString();return e.indexOf(".")===-1?e+".0":e}function PBe(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(hk).join(", "),")")}function qsr(t){var e=Uh(t).slice();return e.length<4&&e.push(1),PBe(e.map(function(r,n){return n<3?r/255:r}))}function dK(t,e){return t.stringLiteralsMap[e]===void 0&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function Fsr(t,e){return hk(dK(t,e))}function rr(t,e,r){if(Array.isArray(e)&&typeof e[0]=="string"){var n=tn[e[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.toGlsl(t,e.slice(1),r)}var i=Cf(e);if((i&Qt.NUMBER)>0)return hk(e);if((i&Qt.BOOLEAN)>0)return e.toString();if((i&Qt.STRING)>0&&(r===void 0||r==Qt.STRING))return Fsr(t,e.toString());if((i&Qt.COLOR)>0&&(r===void 0||r==Qt.COLOR))return qsr(e);if((i&Qt.NUMBER_ARRAY)>0)return PBe(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(r,")"))}function RBe(t){if(!(Cf(t)&Qt.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function uo(t){for(var e=0;e<t.length;e++)RBe(t[e])}function OBe(t){if(!(Cf(t)&Qt.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function mK(t){if(!(Cf(t)&Qt.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function mi(t,e){if(t.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function dm(t,e){if(t.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function pk(t,e){if(t.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function LBe(t){if(t.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function jsr(t){if(t.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}function gK(t,e){if(!ksr(e))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}tn.get={getReturnType:function(t){return Qt.ANY},toGlsl:function(t,e){mi(e,1),OBe(e[0]);var r=e[0].toString();t.attributes.indexOf(r)===-1&&t.attributes.push(r);var n=t.inFragmentShader?"v_":"a_";return n+r}};function vK(t){return"u_var_"+t}tn.var={getReturnType:function(t){return Qt.ANY},toGlsl:function(t,e){mi(e,1),OBe(e[0]);var r=e[0].toString();return t.variables.indexOf(r)===-1&&t.variables.push(r),vK(r)}};var yK="u_paletteTextures";tn.palette={getReturnType:function(t){return Qt.COLOR},toGlsl:function(t,e){mi(e,2),RBe(e[0]);var r=rr(t,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=n.length,o=new Uint8Array(i*4),l=0;l<i;l++){var f=n[l],d=void 0;if(typeof f=="string")d=x9(f);else{if(!Array.isArray(f))throw new Error("The second argument of palette must be an array of strings or colors");var v=f.length;if(v===4)d=f;else{if(v!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(v));d=[f[0],f[1],f[2],1]}}var x=l*4;o[x]=d[0],o[x+1]=d[1],o[x+2]=d[2],o[x+3]=d[3]*255}t.paletteTextures||(t.paletteTextures=[]);var b="".concat(yK,"[").concat(t.paletteTextures.length,"]"),A=new CBe(b,o);return t.paletteTextures.push(A),"texture2D(".concat(b,", vec2((").concat(r," + 0.5) / ").concat(i,".0, 0.5))")}};var pK="getBandValue";tn.band={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){dm(e,1),pk(e,3);var r=e[0];if(!(pK in t.functions)){for(var n="",i=t.bandCount||1,o=0;o<i;o++){var l=Math.floor(o/4),f=o%4;f===i-1&&f===1&&(f=3);var d="".concat(Ur.TILE_TEXTURE_ARRAY,"[").concat(l,"]");n+=`
          if (band == `.concat(o+1,`.0) {
            return texture2D(`).concat(d,", v_textureCoord + vec2(dx, dy))[").concat(f,`];
          }
        `)}t.functions[pK]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(Ur.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(Ur.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var v=rr(t,r),x=rr(t,e[1]||0),b=rr(t,e[2]||0);return"".concat(pK,"(").concat(v,", ").concat(x,", ").concat(b,")")}};tn.time={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,0),"u_time"}};tn.zoom={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,0),"u_zoom"}};tn.resolution={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,0),"u_resolution"}};tn["*"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,2),uo(e),"(".concat(rr(t,e[0])," * ").concat(rr(t,e[1]),")")}};tn["/"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,2),uo(e),"(".concat(rr(t,e[0])," / ").concat(rr(t,e[1]),")")}};tn["+"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,2),uo(e),"(".concat(rr(t,e[0])," + ").concat(rr(t,e[1]),")")}};tn["-"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,2),uo(e),"(".concat(rr(t,e[0])," - ").concat(rr(t,e[1]),")")}};tn.clamp={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){mi(e,3),uo(e);var r=rr(t,e[1]),n=rr(t,e[2]);return"clamp(".concat(rr(t,e[0]),", ").concat(r,", ").concat(n,")")}};tn["%"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,2),uo(e),"mod(".concat(rr(t,e[0]),", ").concat(rr(t,e[1]),")")}};tn["^"]={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,2),uo(e),"pow(".concat(rr(t,e[0]),", ").concat(rr(t,e[1]),")")}};tn.abs={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,1),uo(e),"abs(".concat(rr(t,e[0]),")")}};tn.floor={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,1),uo(e),"floor(".concat(rr(t,e[0]),")")}};tn.round={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,1),uo(e),"floor(".concat(rr(t,e[0])," + 0.5)")}};tn.ceil={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,1),uo(e),"ceil(".concat(rr(t,e[0]),")")}};tn.sin={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,1),uo(e),"sin(".concat(rr(t,e[0]),")")}};tn.cos={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return mi(e,1),uo(e),"cos(".concat(rr(t,e[0]),")")}};tn.atan={getReturnType:function(t){return Qt.NUMBER},toGlsl:function(t,e){return dm(e,1),pk(e,2),uo(e),e.length===2?"atan(".concat(rr(t,e[0]),", ").concat(rr(t,e[1]),")"):"atan(".concat(rr(t,e[0]),")")}};tn[">"]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return mi(e,2),uo(e),"(".concat(rr(t,e[0])," > ").concat(rr(t,e[1]),")")}};tn[">="]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return mi(e,2),uo(e),"(".concat(rr(t,e[0])," >= ").concat(rr(t,e[1]),")")}};tn["<"]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return mi(e,2),uo(e),"(".concat(rr(t,e[0])," < ").concat(rr(t,e[1]),")")}};tn["<="]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return mi(e,2),uo(e),"(".concat(rr(t,e[0])," <= ").concat(rr(t,e[1]),")")}};function DBe(t){return{getReturnType:function(e){return Qt.BOOLEAN},toGlsl:function(e,r){mi(r,2);for(var n=Qt.ANY,i=0;i<r.length;i++)n&=Cf(r[i]);if(n===Qt.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~Qt.COLOR,"(".concat(rr(e,r[0],n)," ").concat(t," ").concat(rr(e,r[1],n),")")}}}tn["=="]=DBe("==");tn["!="]=DBe("!=");tn["!"]={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){return mi(e,1),mK(e[0]),"(!".concat(rr(t,e[0]),")")}};function NBe(t){return{getReturnType:function(e){return Qt.BOOLEAN},toGlsl:function(e,r){dm(r,2);for(var n=0;n<r.length;n++)mK(r[n]);var i="";return i=r.map(function(o){return rr(e,o)}).join(" ".concat(t," ")),i="(".concat(i,")"),i}}}tn.all=NBe("&&");tn.any=NBe("||");tn.between={getReturnType:function(t){return Qt.BOOLEAN},toGlsl:function(t,e){mi(e,3),uo(e);var r=rr(t,e[1]),n=rr(t,e[2]),i=rr(t,e[0]);return"(".concat(i," >= ").concat(r," && ").concat(i," <= ").concat(n,")")}};tn.array={getReturnType:function(t){return Qt.NUMBER_ARRAY},toGlsl:function(t,e){dm(e,2),pk(e,4),uo(e);var r=e.map(function(n){return rr(t,n,Qt.NUMBER)});return"vec".concat(e.length,"(").concat(r.join(", "),")")}};tn.color={getReturnType:function(t){return Qt.COLOR},toGlsl:function(t,e){dm(e,3),pk(e,4),uo(e);var r=e;e.length===3&&r.push(1);var n=e.map(function(i,o){return rr(t,i,Qt.NUMBER)+(o<3?" / 255.0":"")});return"vec".concat(e.length,"(").concat(n.join(", "),")")}};tn.interpolate={getReturnType:function(t){for(var e=Qt.COLOR|Qt.NUMBER,r=3;r<t.length;r+=2)e=e&Cf(t[r]);return e},toGlsl:function(t,e,r){LBe(e),dm(e,6);var n=e[0],i;switch(n[0]){case"linear":i=1;break;case"exponential":i=n[1];break;default:i=null}if(!i)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var o=r!==void 0?r:Qt.ANY,l=tn.interpolate.getReturnType(e)&o;gK(e,l);for(var f=rr(t,e[1]),d=hk(i),v="",x=2;x<e.length-2;x+=2){var b=rr(t,e[x]),A=v||rr(t,e[x+1],l),P=rr(t,e[x+2]),N=rr(t,e[x+3],l);v="mix(".concat(A,", ").concat(N,", pow(clamp((").concat(f," - ").concat(b,") / (").concat(P," - ").concat(b,"), 0.0, 1.0), ").concat(d,"))")}return v}};tn.match={getReturnType:function(t){for(var e=Qt.ANY,r=2;r<t.length;r+=2)e=e&Cf(t[r]);return e=e&Cf(t[t.length-1]),e},toGlsl:function(t,e,r){LBe(e),dm(e,4);var n=r!==void 0?r:Qt.ANY,i=tn.match.getReturnType(e)&n;gK(e,i);for(var o=rr(t,e[0]),l=rr(t,e[e.length-1],i),f=null,d=e.length-3;d>=1;d-=2){var v=rr(t,e[d]),x=rr(t,e[d+1],i);f="(".concat(o," == ").concat(v," ? ").concat(x," : ").concat(f||l,")")}return f}};tn.case={getReturnType:function(t){for(var e=Qt.ANY,r=1;r<t.length;r+=2)e=e&Cf(t[r]);return e=e&Cf(t[t.length-1]),e},toGlsl:function(t,e,r){jsr(e),dm(e,3);var n=r!==void 0?r:Qt.ANY,i=tn.case.getReturnType(e)&n;gK(e,i);for(var o=0;o<e.length-1;o+=2)mK(e[o]);for(var l=rr(t,e[e.length-1],i),f=null,o=e.length-3;o>=0;o-=2){var d=rr(t,e[o]),v=rr(t,e[o+1],i);f="(".concat(d," ? ").concat(v," : ").concat(f||l,")")}return f}};var zsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function kBe(t,e){var r=`
    attribute vec2 `.concat(xI.TEXTURE_COORD,`;
    uniform mat4 `).concat(Ur.TILE_TRANSFORM,`;
    uniform float `).concat(Ur.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Ur.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Ur.TEXTURE_RESOLUTION,`;
    uniform float `).concat(Ur.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(Ur.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(Ur.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(xI.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(Ur.TEXTURE_ORIGIN_X," + ").concat(Ur.TEXTURE_RESOLUTION," * ").concat(Ur.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(Ur.TEXTURE_ORIGIN_Y," - ").concat(Ur.TEXTURE_RESOLUTION," * ").concat(Ur.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(Ur.TILE_TRANSFORM," * vec4(").concat(xI.TEXTURE_COORD,", ").concat(Ur.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},i=[];if(t.color!==void 0){var o=rr(n,t.color,Qt.COLOR);i.push("color = ".concat(o,";"))}if(t.contrast!==void 0){var l=rr(n,t.contrast,Qt.NUMBER);i.push("color.rgb = clamp((".concat(l," + 1.0) * color.rgb - (").concat(l," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(t.exposure!==void 0){var f=rr(n,t.exposure,Qt.NUMBER);i.push("color.rgb = clamp((".concat(f," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(t.saturation!==void 0){var d=rr(n,t.saturation,Qt.NUMBER);i.push(`
      float saturation = `.concat(d,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(t.gamma!==void 0){var v=rr(n,t.gamma,Qt.NUMBER);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(v,"));"))}if(t.brightness!==void 0){var x=rr(n,t.brightness,Qt.NUMBER);i.push("color.rgb = clamp(color.rgb + ".concat(x,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var b={},A=n.variables.length;if(A>1&&!t.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var P=function($){var Z=n.variables[$];if(!(Z in t.variables))throw new Error("Missing '".concat(Z,"' in style variables"));var ie=vK(Z);b[ie]=function(){var ne=t.variables[Z];return typeof ne=="string"&&(ne=dK(n,ne)),ne!==void 0?ne:-9999999}},N=0;N<A;++N)P(N);var j=Object.keys(b).map(function($){return"uniform float ".concat($,";")}),D=Math.ceil(e/4);j.push("uniform sampler2D ".concat(Ur.TILE_TEXTURE_ARRAY,"[").concat(D,"];")),n.paletteTextures&&j.push("uniform sampler2D ".concat(yK,"[").concat(n.paletteTextures.length,"];"));var F=Object.keys(n.functions).map(function($){return n.functions[$]}),U=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(Ur.RENDER_EXTENT,`;
    uniform float `).concat(Ur.TRANSITION_ALPHA,`;
    uniform float `).concat(Ur.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Ur.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Ur.RESOLUTION,`;
    uniform float `).concat(Ur.ZOOM,`;

    `).concat(j.join(`
`),`

    `).concat(F.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(Ur.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(Ur.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(Ur.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(Ur.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(Ur.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(i.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(Ur.TRANSITION_ALPHA,`;
    }`);return{vertexShader:r,fragmentShader:U,uniforms:b,paletteTextures:n.paletteTextures}}var qBe=function(t){zsr(e,t);function e(r){var n=this,i=r?Xr({},r):{},o=i.style||{};delete i.style;var l=i.cacheSize;return delete i.cacheSize,n=t.call(this,i)||this,n.sources_=i.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=o,n.cacheSize_=l,n.styleVariables_=n.style_.variables||{},n.addChangeListener(vn.SOURCE,n.handleSourceUpdate_),n}return e.prototype.getSources=function(r,n){var i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(r,n):this.sources_:i?[i]:[]},e.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},e.prototype.getSourceState=function(){var r=this.getRenderSource();return r?r.getState():"undefined"},e.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},e.prototype.getSourceBandCount_=function(){var r=Number.MAX_SAFE_INTEGER,n=this.getSources([-r,-r,r,r],r);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},e.prototype.createRenderer=function(){var r=kBe(this.style_,this.getSourceBandCount_());return new MBe(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})},e.prototype.renderSources=function(r,n){for(var i=this.getRenderer(),o,l=0,f=n.length;l<f;++l)this.renderedSource_=n[l],i.prepareFrame(r)&&(o=i.renderFrame(r));return o},e.prototype.render=function(r,n){var i=this;this.rendered=!0;for(var o=r.viewState,l=this.getSources(r.extent,o.resolution),f=!0,d=function(P,N){var j=l[P],D=j.getState();if(D=="loading"){var F=function(){j.getState()=="ready"&&(j.removeEventListener("change",F),i.changed())};j.addEventListener("change",F)}f=f&&D=="ready"},v=0,x=l.length;v<x;++v)d(v,x);var b=this.renderSources(r,l);if(this.getRenderer().renderComplete&&f)return this.renderedResolution_=o.resolution,b;if(this.renderedResolution_>.5*o.resolution){var A=this.getSources(r.extent,this.renderedResolution_).filter(function(P){return!l.includes(P)});if(A.length>0)return this.renderSources(r,A)}return b},e.prototype.setStyle=function(r){this.styleVariables_=r.variables||{},this.style_=r;var n=kBe(this.style_,this.getSourceBandCount_()),i=this.getRenderer();i.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(r){Xr(this.styleVariables_,r),this.changed()},e}(ok);qBe.prototype.dispose;var FBe=qBe;p();p();var Usr=[0,0,0],mm=5,Bsr=function(){function t(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,or(Kje(this.resolutions_,function(l,f){return f-l},!0),17);var r;if(!e.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,or(this.origins_.length==this.resolutions_.length,20));var o=e.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=yu(o)),or(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,or(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:hm,or(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(l,f){var d=new Nx(Math.min(0,l[0]),Math.max(l[0]-1,-1),Math.min(0,l[1]),Math.max(l[1]-1,-1));if(o){var v=this.getTileRangeForExtentAndZ(o,f);d.minX=Math.max(v.minX,d.minX),d.maxX=Math.min(v.maxX,d.maxX),d.minY=Math.max(v.minY,d.minY),d.maxY=Math.min(v.maxY,d.maxY)}return d},this):o&&this.calculateTileRanges_(o)}return t.prototype.forEachTileCoord=function(e,r,n){for(var i=this.getTileRangeForExtentAndZ(e,r),o=i.minX,l=i.maxX;o<=l;++o)for(var f=i.minY,d=i.maxY;f<=d;++f)n([r,o,f])},t.prototype.forEachTileCoordParentTileRange=function(e,r,n,i){var o,l,f,d=null,v=e[0]-1;for(this.zoomFactor_===2?(l=e[1],f=e[2]):d=this.getTileCoordExtent(e,i);v>=this.minZoom;){if(this.zoomFactor_===2?(l=Math.floor(l/2),f=Math.floor(f/2),o=vv(l,l,f,f,n)):o=this.getTileRangeForExtentAndZ(d,v,n),r(v,o))return!0;--v}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},t.prototype.getResolution=function(e){return this.resolutions_[e]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(e,r,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var i=e[1]*2,o=e[2]*2;return vv(i,i+1,o,o+1,r)}var l=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,e[0]+1,r)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(e,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var i=e[0],o=e[1],l=e[2];if(r===i)return vv(o,l,o,l,n);if(this.zoomFactor_){var f=Math.pow(this.zoomFactor_,r-i),d=Math.floor(o*f),v=Math.floor(l*f);if(r<i)return vv(d,d,v,v,n);var x=Math.floor(f*(o+1))-1,b=Math.floor(f*(l+1))-1;return vv(d,x,v,b,n)}var A=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(A,r,n)},t.prototype.getTileRangeExtent=function(e,r,n){var i=this.getOrigin(e),o=this.getResolution(e),l=Kn(this.getTileSize(e),this.tmpSize_),f=i[0]+r.minX*l[0]*o,d=i[0]+(r.maxX+1)*l[0]*o,v=i[1]+r.minY*l[1]*o,x=i[1]+(r.maxY+1)*l[1]*o;return Ga(f,v,d,x,n)},t.prototype.getTileRangeForExtentAndZ=function(e,r,n){var i=Usr;this.getTileCoordForXYAndZ_(e[0],e[3],r,!1,i);var o=i[1],l=i[2];return this.getTileCoordForXYAndZ_(e[2],e[1],r,!0,i),vv(o,i[1],l,i[2],n)},t.prototype.getTileCoordCenter=function(e){var r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=Kn(this.getTileSize(e[0]),this.tmpSize_);return[r[0]+(e[1]+.5)*i[0]*n,r[1]-(e[2]+.5)*i[1]*n]},t.prototype.getTileCoordExtent=function(e,r){var n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=Kn(this.getTileSize(e[0]),this.tmpSize_),l=n[0]+e[1]*o[0]*i,f=n[1]-(e[2]+1)*o[1]*i,d=l+o[0]*i,v=f+o[1]*i;return Ga(l,f,d,v,r)},t.prototype.getTileCoordForCoordAndResolution=function(e,r,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],r,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(e,r,n,i,o){var l=this.getZForResolution(n),f=n/this.getResolution(l),d=this.getOrigin(l),v=Kn(this.getTileSize(l),this.tmpSize_),x=f*(e-d[0])/n/v[0],b=f*(d[1]-r)/n/v[1];return i?(x=FT(x,mm)-1,b=FT(b,mm)-1):(x=qT(x,mm),b=qT(b,mm)),Bx(l,x,b,o)},t.prototype.getTileCoordForXYAndZ_=function(e,r,n,i,o){var l=this.getOrigin(n),f=this.getResolution(n),d=Kn(this.getTileSize(n),this.tmpSize_),v=(e-l[0])/f/d[0],x=(l[1]-r)/f/d[1];return i?(v=FT(v,mm)-1,x=FT(x,mm)-1):(v=qT(v,mm),x=qT(x,mm)),Bx(n,v,x,o)},t.prototype.getTileCoordForCoordAndZ=function(e,r,n){return this.getTileCoordForXYAndZ_(e[0],e[1],r,!1,n)},t.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},t.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},t.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},t.prototype.getZForResolution=function(e,r){var n=ex(this.resolutions_,e,r||0);return Zn(n,this.minZoom,this.maxZoom)},t.prototype.tileCoordIntersectsViewport=function(e,r){return i9(r,0,r.length,2,this.getTileCoordExtent(e))},t.prototype.calculateTileRanges_=function(e){for(var r=this.resolutions_.length,n=new Array(r),i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n},t}(),bI=Bsr;p();p();var Vsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gsr=function(t){Vsr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=TBe(r),i=n[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(pm(o.tileCoord)),o.release())}.bind(this))}},e}(ak),dk=Gsr;p();p();var mk={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};p();p();function gk(t){var e=t.getDefaultTileGrid();return e||(e=Hsr(t),t.setDefaultTileGrid(e)),e}function jBe(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),o=vk(r);if(ms(o,i))return e;var l=gn(o),f=Math.ceil((o[0]-i[0])/l);return i[0]+=l*f,t.getTileCoordForCoordAndZ(i,n)}function $sr(t,e,r,n){var i=n!==void 0?n:"top-left",o=UBe(t,e,r);return new bI({extent:t,origin:fze(t,i),resolutions:o,tileSize:r})}function zBe(t){var e=t||{},r=e.extent||ii("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:UBe(r,e.maxZoom,e.tileSize,e.maxResolution)};return new bI(n)}function UBe(t,e,r,n){for(var i=e!==void 0?e:HUe,o=zo(t),l=gn(t),f=Kn(r!==void 0?r:hm),d=n>0?n:Math.max(l/f[0],o/f[1]),v=i+1,x=new Array(v),b=0;b<v;++b)x[b]=d/Math.pow(2,b);return x}function Hsr(t,e,r,n){var i=vk(t);return $sr(i,e,r,n)}function vk(t){t=ii(t);var e=t.getExtent();if(!e){var r=180*Ba[Va.DEGREES]/t.getMetersPerUnit();e=Ga(-r,-r,r,r)}return e}var BBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wsr=function(t){BBe(e,t);function e(r){var n=t.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var i=[256,256];return n.tileGrid&&Kn(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new dk(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(r,n){var i=this.getTileCacheForProjection(r);i&&i.expireCache(n)},e.prototype.forEachLoadedTile=function(r,n,i,o){var l=this.getTileCacheForProjection(r);if(!l)return!1;for(var f=!0,d,v,x,b=i.minX;b<=i.maxX;++b)for(var A=i.minY;A<=i.maxY;++A)v=yv(n,b,A),x=!1,l.containsKey(v)&&(d=l.get(v),x=d.getState()===Ht.LOADED,x&&(x=o(d)!==!1)),x||(f=!1);return f},e.prototype.getGutterForProjection=function(r){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},e.prototype.getOpaque=function(r){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(r,n,i,o,l){return ir()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:gk(r)},e.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return or(n===null||_f(n,r),68),this.tileCache},e.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(r,n,i){var o=this.getTileGridForProjection(i),l=this.getTilePixelRatio(n),f=Kn(o.getTileSize(r),this.tmpSize);return l==1?f:CN(f,l,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(r,n){var i=n!==void 0?n:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(r=jBe(o,r,i)),IBe(r,o)?r:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(r,n){var i=this.getTileCacheForProjection(n);r>i.highWaterMark&&(i.highWaterMark=r)},e.prototype.useTile=function(r,n,i,o){},e}(UN),VBe=function(t){BBe(e,t);function e(r,n){var i=t.call(this,r)||this;return i.tile=n,i}return e}(Ni);var GBe=Wsr;p();function Zsr(t,e){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(l,f,d){if(l)return t.replace(r,l[0].toString()).replace(n,l[1].toString()).replace(i,l[2].toString()).replace(o,function(){var v=l[0],x=e.getFullTileRange(v);or(x,55);var b=x.getHeight()-l[2]-1;return b.toString()})}}function $Be(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=Zsr(t[i],e);return _K(n)}function _K(t){return t.length===1?t[0]:function(e,r,n){if(e){var i=fk(e),o=Ll(i,t.length);return t[o](e,r,n)}else return}}function yk(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t),r){for(var l=parseInt(r[2],10),f=parseInt(r[1],10);f<=l;f++)e.push(t.replace(r[0],f.toString()));return e}return e.push(t),e}var Ysr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ksr=function(t){Ysr(e,t);function e(r){var n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(r){var n=r.target,i=tr(n),o=n.getState(),l;o==Ht.LOADING?(this.tileLoadingKeys_[i]=!0,l=mk.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],l=o==Ht.ERROR?mk.TILELOADERROR:o==Ht.LOADED?mk.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new VBe(l,n))},e.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},e.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},e.prototype.setUrl=function(r){var n=yk(r);this.urls=n,this.setUrls(n)},e.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction($Be(r,this.tileGrid),n):this.setKey(n)},e.prototype.tileUrlFunction=function(r,n,i){},e.prototype.useTile=function(r,n,i){var o=yv(r,n,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(GBe),HBe=Ksr;var Xsr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qsr=function(t){Xsr(e,t);function e(r){var n=this,i=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(i=r.interpolate),n=t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:Jsr,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:i,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:Qh,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return e.prototype.canExpireCache=function(){if(!Mf)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},e.prototype.expireCache=function(r,n){if(!Mf){t.prototype.expireCache.call(this,r,n);return}var i=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==i?n:{});for(var o in this.tileCacheForProjection){var l=this.tileCacheForProjection[o];l.expireCache(l==i?n:{})}},e.prototype.getGutterForProjection=function(r){return Mf&&this.getProjection()&&r&&!_f(this.getProjection(),r)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var r=t.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},e.prototype.getOpaque=function(r){return Mf&&this.getProjection()&&r&&!_f(this.getProjection(),r)?!1:t.prototype.getOpaque.call(this,r)},e.prototype.getTileGridForProjection=function(r){if(!Mf)return t.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||_f(n,r)))return this.tileGrid;var i=tr(r);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=gk(r)),this.tileGridForProjection[i]},e.prototype.getTileCacheForProjection=function(r){if(!Mf)return t.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||_f(n,r))return this.tileCache;var i=tr(r);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new dk(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(r,n,i,o,l,f){var d=[r,n,i],v=this.getTileCoordForTileUrlFunction(d,l),x=v?this.tileUrlFunction(v,o,l):void 0,b=new this.tileClass(d,x!==void 0?Ht.IDLE:Ht.EMPTY,x!==void 0?x:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return b.key=f,b.addEventListener(Vt.CHANGE,this.handleTileChange.bind(this)),b},e.prototype.getTile=function(r,n,i,o,l){var f=this.getProjection();if(!Mf||!f||!l||_f(f,l))return this.getTileInternal(r,n,i,o,f||l);var d=this.getTileCacheForProjection(l),v=[r,n,i],x=void 0,b=pm(v);d.containsKey(b)&&(x=d.get(b));var A=this.getKey();if(x&&x.key==A)return x;var P=this.getTileGridForProjection(f),N=this.getTileGridForProjection(l),j=this.getTileCoordForTileUrlFunction(v,l),D=new qx(f,P,l,N,v,j,this.getTilePixelRatio(o),this.getGutter(),function(F,U,$,Z){return this.getTileInternal(F,U,$,Z,f)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return D.key=A,x?(D.interimTile=x,D.refreshInterimChain(),d.replace(b,D)):d.set(b,D),D},e.prototype.getTileInternal=function(r,n,i,o,l){var f=null,d=yv(r,n,i),v=this.getKey();if(!this.tileCache.containsKey(d))f=this.createTile_(r,n,i,o,l,v),this.tileCache.set(d,f);else if(f=this.tileCache.get(d),f.key!=v){var x=f;f=this.createTile_(r,n,i,o,l,v),x.getState()==Ht.IDLE?f.interimTile=x.interimTile:f.interimTile=x,f.refreshInterimChain(),this.tileCache.replace(d,f)}return f},e.prototype.setRenderReprojectionEdges=function(r){if(!(!Mf||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},e.prototype.setTileGridForProjection=function(r,n){if(Mf){var i=ii(r);if(i){var o=tr(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}},e}(HBe);function Jsr(t,e){t.getImage().src=e}var Vx=Qsr;var WBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xK={DEFAULT:"default",TRUNCATED:"truncated"},elr=function(t){WBe(e,t);function e(r,n,i,o,l,f,d){var v=t.call(this,n,i,o,l,f,d)||this;return v.zoomifyImage_=null,v.tileSize_=r,v}return e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var r=t.prototype.getImage.call(this);if(this.state==Ht.LOADED){var n=this.tileSize_;if(r.width==n[0]&&r.height==n[1])return this.zoomifyImage_=r,r;var i=qi(n[0],n[1]);return i.drawImage(r,0,0),this.zoomifyImage_=i.canvas,i.canvas}else return r},e}(Qh);var tlr=function(t){WBe(e,t);function e(r){var n=this,i=r,o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.size,f=i.tierSizeCalculation!==void 0?i.tierSizeCalculation:xK.DEFAULT,d=i.tilePixelRatio||1,v=l[0],x=l[1],b=[],A=i.tileSize||hm,P=A*d;switch(f){case xK.DEFAULT:for(;v>P||x>P;)b.push([Math.ceil(v/P),Math.ceil(x/P)]),P+=P;break;case xK.TRUNCATED:for(var N=v,j=x;N>P||j>P;)b.push([Math.ceil(N/P),Math.ceil(j/P)]),N>>=1,j>>=1;break;default:or(!1,53);break}b.push([1,1]),b.reverse();for(var D=[d],F=[0],U=1,$=b.length;U<$;U++)D.push(d<<U),F.push(b[U-1][0]*b[U-1][1]+F[U-1]);D.reverse();var Z=new bI({tileSize:A,extent:i.extent||[0,-x,v,0],resolutions:D}),ie=i.url;ie&&ie.indexOf("{TileGroup}")==-1&&ie.indexOf("{tileIndex}")==-1&&(ie+="{TileGroup}/{z}-{x}-{y}.jpg");var ne=yk(ie),ae=A*d;function de(qe){return function(He,Ke,Je){if(He){var We=He[0],lt=He[1],pt=He[2],dt=lt+pt*b[We][0],ze=(dt+F[We])/ae|0,Dt={z:We,x:lt,y:pt,tileIndex:dt,TileGroup:"TileGroup"+ze};return qe.replace(/\{(\w+?)\}/g,function(Ot,Ue){return Dt[Ue]})}else return}}var ye=_K(ne.map(de)),me=elr.bind(null,Kn(A*d));n=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,projection:i.projection,tilePixelRatio:d,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:me,tileGrid:Z,tileUrlFunction:ye,transition:i.transition})||this,n.zDirection=i.zDirection;var be=Z.getTileCoordForCoordAndResolution(Js(Z.getExtent()),D[D.length-1]),Ne=ye(be,1,null),Ce=new Image;return Ce.addEventListener("error",function(){ae=A,this.changed()}.bind(n)),Ce.src=Ne,n}return e}(Vx),ZBe=tlr;p();var al=je(St(),1),sVe=je(No(),1),op=je(ln(),1);p();p();p();p();p();p();function bn(t){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(t)}p();function YBe(t,e){if(bn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(bn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _k(t){var e=YBe(t,"string");return bn(e)=="symbol"?e:e+""}function Et(t,e,r){return(e=_k(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KBe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KBe(Object(r),!0).forEach(function(n){Et(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KBe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}p();function Ya(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}p();function XBe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_k(n.key),n)}}function Ka(t,e,r){return e&&XBe(t.prototype,e),r&&XBe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}p();function Xa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N0(t,e)}p();p();function Tc(t){return Tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tc(t)}p();function bK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(bK=function(){return!!t})()}p();p();function Wr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QBe(t,e){if(e&&(bn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wr(t)}function Qa(t){var e=bK();return function(){var r,n=Tc(t);if(e){var i=Tc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return QBe(this,r)}}var OK=je(St());p();var wK={},rlr=[],nlr=function(e){rlr.push(e)};function ilr(t,e){if(0)var r}function olr(t,e){if(0)var r}function alr(){wK={}}function JBe(t,e,r){!e&&!wK[r]&&(t(!1,r),wK[r]=!0)}function xk(t,e){JBe(ilr,t,e)}function slr(t,e){JBe(olr,t,e)}xk.preMessage=nlr;xk.resetWarned=alr;xk.noteOnce=slr;var Pf=xk;p();var e3e=je(St()),llr=function(e){var r,n,i=e.className,o=e.included,l=e.vertical,f=e.style,d=e.length,v=e.offset,x=e.reverse;d<0&&(x=!x,d=Math.abs(d),v=100-v);var b=l?(r={},Et(r,x?"top":"bottom","".concat(v,"%")),Et(r,x?"bottom":"top","auto"),Et(r,"height","".concat(d,"%")),r):(n={},Et(n,x?"right":"left","".concat(v,"%")),Et(n,x?"left":"right","auto"),Et(n,"width","".concat(d,"%")),n),A=Nt(Nt({},f),b);return o?e3e.default.createElement("div",{className:i,style:A}):null},bk=llr;p();p();function _s(t,e){if(t==null)return{};var r,n,i=oT(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}p();p();p();function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function t3e(t){if(Array.isArray(t))return wI(t)}p();function EK(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}p();function EI(t,e){if(t){if(typeof t=="string")return wI(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wI(t,e):void 0}}p();function r3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pu(t){return t3e(t)||EK(t)||EI(t)||r3e()}p();p();function n3e(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=Tc(t))!==null;);return t}function Gx(){return Gx=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=n3e(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Gx.apply(null,arguments)}var Hx=je(St());p();var SK=je(No());function xs(t,e,r,n){var i=SK.default.unstable_batchedUpdates?function(l){SK.default.unstable_batchedUpdates(r,l)}:r;return t!=null&&t.addEventListener&&t.addEventListener(e,i,n),{remove:function(){t!=null&&t.removeEventListener&&t.removeEventListener(e,i,n)}}}var h3e=je(Ei());p();var TK=je(St()),i3e=je(Ei());var ulr=function(e,r,n,i,o,l){Pf(n?i>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var f=Object.keys(r).map(parseFloat).sort(function(v,x){return v-x});if(n&&i)for(var d=o;d<=l;d+=i)f.indexOf(d)===-1&&f.push(d);return f},clr=function(e){var r=e.prefixCls,n=e.vertical,i=e.reverse,o=e.marks,l=e.dots,f=e.step,d=e.included,v=e.lowerBound,x=e.upperBound,b=e.max,A=e.min,P=e.dotStyle,N=e.activeDotStyle,j=b-A,D=ulr(n,o,l,f,A,b).map(function(F){var U,$="".concat(Math.abs(F-A)/j*100,"%"),Z=!d&&F===x||d&&F<=x&&F>=v,ie=n?Nt(Nt({},P),{},Et({},i?"top":"bottom",$)):Nt(Nt({},P),{},Et({},i?"right":"left",$));Z&&(ie=Nt(Nt({},ie),N));var ne=(0,i3e.default)((U={},Et(U,"".concat(r,"-dot"),!0),Et(U,"".concat(r,"-dot-active"),Z),Et(U,"".concat(r,"-dot-reverse"),i),U));return TK.default.createElement("span",{className:ne,style:ie,key:F})});return TK.default.createElement("div",{className:"".concat(r,"-step")},D)},o3e=clr;p();var wk=je(St()),a3e=je(Ei()),flr=function(e){var r=e.className,n=e.vertical,i=e.reverse,o=e.marks,l=e.included,f=e.upperBound,d=e.lowerBound,v=e.max,x=e.min,b=e.onClickLabel,A=Object.keys(o),P=v-x,N=A.map(parseFloat).sort(function(j,D){return j-D}).map(function(j){var D,F=o[j],U=bn(F)==="object"&&!wk.default.isValidElement(F),$=U?F.label:F;if(!$&&$!==0)return null;var Z=!l&&j===f||l&&j<=f&&j>=d,ie=(0,a3e.default)((D={},Et(D,"".concat(r,"-text"),!0),Et(D,"".concat(r,"-text-active"),Z),D)),ne=Et({marginBottom:"-50%"},i?"top":"bottom","".concat((j-x)/P*100,"%")),ae=Et({transform:"translateX(".concat(i?"50%":"-50%",")"),msTransform:"translateX(".concat(i?"50%":"-50%",")")},i?"right":"left","".concat((j-x)/P*100,"%")),de=n?ne:ae,ye=U?Nt(Nt({},de),F.style):de;return wk.default.createElement("span",{className:ie,style:ye,key:j,onMouseDown:function(be){return b(be,j)},onTouchStart:function(be){return b(be,j)}},$)});return wk.default.createElement("div",{className:r},N)},s3e=flr;p();var IK=je(St()),l3e=je(Ei());var $x=function(t){Xa(r,t);var e=Qa(r);function r(){var n;return Ya(this,r),n=e.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(i){n.handle=i},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(i){i.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return Ka(r,[{key:"componentDidMount",value:function(){this.onMouseUpListener=xs(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(i){this.setState({clickFocused:i})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var i,o,l=this.props,f=l.prefixCls,d=l.vertical,v=l.reverse,x=l.offset,b=l.style,A=l.disabled,P=l.min,N=l.max,j=l.value,D=l.tabIndex,F=l.ariaLabel,U=l.ariaLabelledBy,$=l.ariaValueTextFormatter,Z=_s(l,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),ie=(0,l3e.default)(this.props.className,Et({},"".concat(f,"-handle-click-focused"),this.state.clickFocused)),ne=d?(i={},Et(i,v?"top":"bottom","".concat(x,"%")),Et(i,v?"bottom":"top","auto"),Et(i,"transform",v?null:"translateY(+50%)"),i):(o={},Et(o,v?"right":"left","".concat(x,"%")),Et(o,v?"left":"right","auto"),Et(o,"transform","translateX(".concat(v?"+":"-","50%)")),o),ae=Nt(Nt({},b),ne),de=D||0;(A||D===null)&&(de=null);var ye;return $&&(ye=$(j)),IK.default.createElement("div",mn({ref:this.setHandleRef,tabIndex:de},Z,{className:ie,style:ae,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":P,"aria-valuemax":N,"aria-valuenow":j,"aria-disabled":!!A,"aria-label":F,"aria-labelledby":U,"aria-valuetext":ye}))}}]),r}(IK.default.Component);p();var c3e=je(No());p();var Cr={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var r=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||r>=Cr.F1&&r<=Cr.F12)return!1;switch(r){case Cr.ALT:case Cr.CAPS_LOCK:case Cr.CONTEXT_MENU:case Cr.CTRL:case Cr.DOWN:case Cr.END:case Cr.ESC:case Cr.HOME:case Cr.INSERT:case Cr.LEFT:case Cr.MAC_FF_META:case Cr.META:case Cr.NUMLOCK:case Cr.NUM_CENTER:case Cr.PAGE_DOWN:case Cr.PAGE_UP:case Cr.PAUSE:case Cr.PRINT_SCREEN:case Cr.RIGHT:case Cr.SHIFT:case Cr.UP:case Cr.WIN_KEY:case Cr.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Cr.ZERO&&e<=Cr.NINE||e>=Cr.NUM_ZERO&&e<=Cr.NUM_MULTIPLY||e>=Cr.A&&e<=Cr.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Cr.SPACE:case Cr.QUESTION_MARK:case Cr.NUM_PLUS:case Cr.NUM_MINUS:case Cr.NUM_PERIOD:case Cr.NUM_DIVISION:case Cr.SEMICOLON:case Cr.DASH:case Cr.EQUALS:case Cr.COMMA:case Cr.PERIOD:case Cr.SLASH:case Cr.APOSTROPHE:case Cr.SINGLE_QUOTE:case Cr.OPEN_SQUARE_BRACKET:case Cr.BACKSLASH:case Cr.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Jh=Cr;function Ek(t,e){try{return Object.keys(e).some(function(r){return t.target===(0,c3e.findDOMNode)(e[r])})}catch(r){return!1}}function Sk(t,e){var r=e.min,n=e.max;return t<r||t>n}function AK(t){return t.touches.length>1||t.type.toLowerCase()==="touchend"&&t.touches.length>0}function u3e(t,e){var r=e.marks,n=e.step,i=e.min,o=e.max,l=Object.keys(r).map(parseFloat);if(n!==null){var f=Math.pow(10,f3e(n)),d=Math.floor((o*f-i*f)/(n*f)),v=Math.min((t-i)/n,d),x=Math.round(v)*n+i;l.push(x)}var b=l.map(function(A){return Math.abs(t-A)});return l[b.indexOf(Math.min.apply(Math,Pu(b)))]}function f3e(t){var e=t.toString(),r=0;return e.indexOf(".")>=0&&(r=e.length-e.indexOf(".")-1),r}function MK(t,e){return t?e.clientY:e.pageX}function CK(t,e){return t?e.touches[0].clientY:e.touches[0].pageX}function PK(t,e){var r=e.getBoundingClientRect();return t?r.top+r.height*.5:window.pageXOffset+r.left+r.width*.5}function SI(t,e){var r=e.max,n=e.min;return t<=n?n:t>=r?r:t}function Tk(t,e){var r=e.step,n=isFinite(u3e(t,e))?u3e(t,e):0;return r===null?n:parseFloat(n.toFixed(f3e(r)))}function ep(t){t.stopPropagation(),t.preventDefault()}function hlr(t,e,r){var n={increase:function(f,d){return f+d},decrease:function(f,d){return f-d}},i=n[t](Object.keys(r.marks).indexOf(JSON.stringify(e)),1),o=Object.keys(r.marks)[i];return r.step?n[t](e,r.step):Object.keys(r.marks).length&&r.marks[o]?r.marks[o]:e}function Ik(t,e,r){var n="increase",i="decrease",o=n;switch(t.keyCode){case Jh.UP:o=e&&r?i:n;break;case Jh.RIGHT:o=!e&&r?i:n;break;case Jh.DOWN:o=e&&r?n:i;break;case Jh.LEFT:o=!e&&r?n:i;break;case Jh.END:return function(l,f){return f.max};case Jh.HOME:return function(l,f){return f.min};case Jh.PAGE_UP:return function(l,f){return l+f.step*2};case Jh.PAGE_DOWN:return function(l,f){return l-f.step*2};default:return}return function(l,f){return hlr(o,l,f)}}function Rf(){}function TI(t){var e;return e=function(r){Xa(i,r);var n=Qa(i);function i(o){var l;Ya(this,i),l=n.call(this,o),l.onDown=function(b,A){var P=A,N=l.props,j=N.draggableTrack,D=N.vertical,F=l.state.bounds,U=j&&l.positionGetValue?l.positionGetValue(P)||[]:[],$=Ek(b,l.handlesRefs);if(l.dragTrack=j&&F.length>=2&&!$&&!U.map(function(ie,ne){var ae=ne?!0:ie>=F[ne];return ne===U.length-1?ie<=F[ne]:ae}).some(function(ie){return!ie}),l.dragTrack)l.dragOffset=P,l.startBounds=Pu(F);else{if(!$)l.dragOffset=0;else{var Z=PK(D,b.target);l.dragOffset=P-Z,P=Z}l.onStart(P)}},l.onMouseDown=function(b){if(b.button===0){l.removeDocumentEvents();var A=l.props.vertical,P=MK(A,b);l.onDown(b,P),l.addDocumentMouseEvents()}},l.onTouchStart=function(b){if(!AK(b)){var A=l.props.vertical,P=CK(A,b);l.onDown(b,P),l.addDocumentTouchEvents(),ep(b)}},l.onFocus=function(b){var A=l.props,P=A.onFocus,N=A.vertical;if(Ek(b,l.handlesRefs)&&!l.dragTrack){var j=PK(N,b.target);l.dragOffset=0,l.onStart(j),ep(b),P&&P(b)}},l.onBlur=function(b){var A=l.props.onBlur;l.dragTrack||l.onEnd(),A&&A(b)},l.onMouseUp=function(){l.handlesRefs[l.prevMovedHandleIndex]&&l.handlesRefs[l.prevMovedHandleIndex].clickFocus()},l.onMouseMove=function(b){if(!l.sliderRef){l.onEnd();return}var A=MK(l.props.vertical,b);l.onMove(b,A-l.dragOffset,l.dragTrack,l.startBounds)},l.onTouchMove=function(b){if(AK(b)||!l.sliderRef){l.onEnd();return}var A=CK(l.props.vertical,b);l.onMove(b,A-l.dragOffset,l.dragTrack,l.startBounds)},l.onKeyDown=function(b){l.sliderRef&&Ek(b,l.handlesRefs)&&l.onKeyboard(b)},l.onClickMarkLabel=function(b,A){b.stopPropagation(),l.onChange({value:A}),l.setState({value:A},function(){return l.onEnd(!0)})},l.saveSlider=function(b){l.sliderRef=b};var f=o.step,d=o.max,v=o.min,x=isFinite(d-v)?(d-v)%f===0:!0;return Pf(f&&Math.floor(f)===f?x:!0,"Slider[max] - Slider[min] (".concat(d-v,") should be a multiple of Slider[step] (").concat(f,")")),l.handlesRefs={},l}return Ka(i,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var l=this.props,f=l.autoFocus,d=l.disabled;f&&!d&&this.focus()}},{key:"componentWillUnmount",value:function(){Gx(Tc(i.prototype),"componentWillUnmount",this)&&Gx(Tc(i.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var l=this.sliderRef,f=this.props,d=f.vertical,v=f.reverse,x=l.getBoundingClientRect();return d?v?x.bottom:x.top:window.pageXOffset+(v?x.right:x.left)}},{key:"getSliderLength",value:function(){var l=this.sliderRef;if(!l)return 0;var f=l.getBoundingClientRect();return this.props.vertical?f.height:f.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=xs(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=xs(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=xs(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=xs(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var l;this.props.disabled||(l=this.handlesRefs[0])===null||l===void 0||l.focus()}},{key:"blur",value:function(){var l=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(f){var d,v;(d=l.handlesRefs[f])===null||d===void 0||(v=d.blur)===null||v===void 0||v.call(d)})}},{key:"calcValue",value:function(l){var f=this.props,d=f.vertical,v=f.min,x=f.max,b=Math.abs(Math.max(l,0)/this.getSliderLength()),A=d?(1-b)*(x-v)+v:b*(x-v)+v;return A}},{key:"calcValueByPos",value:function(l){var f=this.props.reverse?-1:1,d=f*(l-this.getSliderStart()),v=this.trimAlignValue(this.calcValue(d));return v}},{key:"calcOffset",value:function(l){var f=this.props,d=f.min,v=f.max,x=(l-d)/(v-d);return Math.max(0,x*100)}},{key:"saveHandle",value:function(l,f){this.handlesRefs[l]=f}},{key:"render",value:function(){var l,f=this.props,d=f.prefixCls,v=f.className,x=f.marks,b=f.dots,A=f.step,P=f.included,N=f.disabled,j=f.vertical,D=f.reverse,F=f.min,U=f.max,$=f.children,Z=f.maximumTrackStyle,ie=f.style,ne=f.railStyle,ae=f.dotStyle,de=f.activeDotStyle,ye=Gx(Tc(i.prototype),"render",this).call(this),me=ye.tracks,be=ye.handles,Ne=(0,h3e.default)(d,(l={},Et(l,"".concat(d,"-with-marks"),Object.keys(x).length),Et(l,"".concat(d,"-disabled"),N),Et(l,"".concat(d,"-vertical"),j),Et(l,v,v),l));return Hx.default.createElement("div",{ref:this.saveSlider,className:Ne,onTouchStart:N?Rf:this.onTouchStart,onMouseDown:N?Rf:this.onMouseDown,onMouseUp:N?Rf:this.onMouseUp,onKeyDown:N?Rf:this.onKeyDown,onFocus:N?Rf:this.onFocus,onBlur:N?Rf:this.onBlur,style:ie},Hx.default.createElement("div",{className:"".concat(d,"-rail"),style:Nt(Nt({},Z),ne)}),me,Hx.default.createElement(o3e,{prefixCls:d,vertical:j,reverse:D,marks:x,dots:b,step:A,included:P,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:U,min:F,dotStyle:ae,activeDotStyle:de}),be,Hx.default.createElement(s3e,{className:"".concat(d,"-mark"),onClickLabel:N?Rf:this.onClickMarkLabel,vertical:j,marks:x,included:P,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:U,min:F,reverse:D}),$)}}]),i}(t),e.displayName="ComponentEnhancer(".concat(t.displayName,")"),e.defaultProps=Nt(Nt({},t.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var i=n.index,o=_s(n,["index"]);return delete o.dragging,o.value===null?null:Hx.default.createElement($x,mn({},o,{key:i}))},onBeforeChange:Rf,onChange:Rf,onAfterChange:Rf,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),e}var plr=function(t){Xa(r,t);var e=Qa(r);function r(n){var i;Ya(this,r),i=e.call(this,n),i.positionGetValue=function(f){return[]},i.onEnd=function(f){var d=i.state.dragging;i.removeDocumentEvents(),(d||f)&&i.props.onAfterChange(i.getValue()),i.setState({dragging:!1})};var o=n.defaultValue!==void 0?n.defaultValue:n.min,l=n.value!==void 0?n.value:o;return i.state={value:i.trimAlignValue(l),dragging:!1},Pf(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),Pf(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),i}return Ka(r,[{key:"calcValueByPos",value:function(i){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var l=this.props,f=l.min,d=l.max,v=l.value,x=l.onChange;if("min"in this.props||"max"in this.props){var b=v!==void 0?v:o.value,A=this.trimAlignValue(b,this.props);A!==o.value&&(this.setState({value:A}),!(f===i.min&&d===i.max)&&Sk(b,this.props)&&x(A))}}},{key:"onChange",value:function(i){var o=this.props,l=!("value"in o),f=i.value>this.props.max?Nt(Nt({},i),{},{value:this.props.max}):i;l&&this.setState(f);var d=f.value;o.onChange(d)}},{key:"onStart",value:function(i){this.setState({dragging:!0});var o=this.props,l=this.getValue();o.onBeforeChange(l);var f=this.calcValueByPos(i);this.startValue=f,this.startPosition=i,f!==l&&(this.prevMovedHandleIndex=0,this.onChange({value:f}))}},{key:"onMove",value:function(i,o){ep(i);var l=this.state.value,f=this.calcValueByPos(o);f!==l&&this.onChange({value:f})}},{key:"onKeyboard",value:function(i){var o=this.props,l=o.reverse,f=o.vertical,d=Ik(i,f,l);if(d){ep(i);var v=this.state,x=v.value,b=d(x,this.props),A=this.trimAlignValue(b);if(A===x)return;this.onChange({value:A}),this.props.onAfterChange(A),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var i=this.props.startPoint||this.props.min;return this.state.value>i?i:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i===null)return null;var l=Nt(Nt({},this.props),o),f=SI(i,l);return Tk(f,l)}},{key:"render",value:function(){var i=this,o=this.props,l=o.prefixCls,f=o.vertical,d=o.included,v=o.disabled,x=o.minimumTrackStyle,b=o.trackStyle,A=o.handleStyle,P=o.tabIndex,N=o.ariaLabelForHandle,j=o.ariaLabelledByForHandle,D=o.ariaValueTextFormatterForHandle,F=o.min,U=o.max,$=o.startPoint,Z=o.reverse,ie=o.handle,ne=this.state,ae=ne.value,de=ne.dragging,ye=this.calcOffset(ae),me=ie({className:"".concat(l,"-handle"),prefixCls:l,vertical:f,offset:ye,value:ae,dragging:de,disabled:v,min:F,max:U,reverse:Z,index:0,tabIndex:P,ariaLabel:N,ariaLabelledBy:j,ariaValueTextFormatter:D,style:A[0]||A,ref:function(He){return i.saveHandle(0,He)}}),be=$!==void 0?this.calcOffset($):0,Ne=b[0]||b,Ce=OK.default.createElement(bk,{className:"".concat(l,"-track"),vertical:f,included:d,offset:be,reverse:Z,length:ye-be,style:Nt(Nt({},x),Ne)});return{tracks:Ce,handles:me}}}]),r}(OK.default.Component),p3e=TI(plr);p();var LK=je(St()),DK=je(Ei());var II=function(e){var r=e.value,n=e.handle,i=e.bounds,o=e.props,l=o.allowCross,f=o.pushable,d=Number(f),v=SI(r,o),x=v;return!l&&n!=null&&i!==void 0&&(n>0&&v<=i[n-1]+d&&(x=i[n-1]+d),n<i.length-1&&v>=i[n+1]-d&&(x=i[n+1]-d)),Tk(x,o)},NK=function(t){Xa(r,t);var e=Qa(r);function r(n){var i;Ya(this,r),i=e.call(this,n),i.positionGetValue=function(P){var N=i.getValue(),j=i.calcValueByPos(P),D=i.getClosestBound(j),F=i.getBoundNeedMoving(j,D),U=N[F];if(j===U)return null;var $=Pu(N);return $[F]=j,$},i.onEnd=function(P){var N=i.state.handle;i.removeDocumentEvents(),N||(i.dragTrack=!1),(N!==null||P)&&i.props.onAfterChange(i.getValue()),i.setState({handle:null})};var o=n.count,l=n.min,f=n.max,d=Array.apply(void 0,Pu(Array(o+1))).map(function(){return l}),v="defaultValue"in n?n.defaultValue:d,x=n.value!==void 0?n.value:v,b=x.map(function(P,N){return II({value:P,handle:N,props:n})}),A=b[0]===f?0:b.length-1;return i.state={handle:null,recent:A,bounds:b},i}return Ka(r,[{key:"calcValueByPos",value:function(i){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(i){return 0}},{key:"saveHandle",value:function(i,o){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(i,o){var l=this,f=this.props,d=f.onChange,v=f.value,x=f.min,b=f.max;if(("min"in this.props||"max"in this.props)&&!(x===i.min&&b===i.max)){var A=v||o.bounds;if(A.some(function(N){return Sk(N,l.props)})){var P=A.map(function(N){return SI(N,l.props)});d(P)}}}},{key:"onChange",value:function(i){var o=this.props,l=!("value"in o);if(l)this.setState(i);else{var f={};["handle","recent"].forEach(function(x){i[x]!==void 0&&(f[x]=i[x])}),Object.keys(f).length&&this.setState(f)}var d=Nt(Nt({},this.state),i),v=d.bounds;o.onChange(v)}},{key:"onStart",value:function(i){var o=this.props,l=this.state,f=this.getValue();o.onBeforeChange(f);var d=this.calcValueByPos(i);this.startValue=d,this.startPosition=i;var v=this.getClosestBound(d);this.prevMovedHandleIndex=this.getBoundNeedMoving(d,v),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var x=f[this.prevMovedHandleIndex];if(d!==x){var b=Pu(l.bounds);b[this.prevMovedHandleIndex]=d,this.onChange({bounds:b})}}},{key:"onMove",value:function(i,o,l,f){ep(i);var d=this.state,v=this.props,x=v.max||100,b=v.min||0;if(l){var A=v.vertical?-o:o;A=v.reverse?-A:A;var P=x-Math.max.apply(Math,Pu(f)),N=b-Math.min.apply(Math,Pu(f)),j=Math.min(Math.max(A/(this.getSliderLength()/(x-b)),N),P),D=f.map(function($){return Math.floor(Math.max(Math.min($+j,x),b))});d.bounds.map(function($,Z){return $===D[Z]}).some(function($){return!$})&&this.onChange({bounds:D});return}var F=this.calcValueByPos(o),U=d.bounds[d.handle];F!==U&&this.moveTo(F)}},{key:"onKeyboard",value:function(i){var o=this.props,l=o.reverse,f=o.vertical,d=Ik(i,f,l);if(d){ep(i);var v=this.state,x=this.props,b=v.bounds,A=v.handle,P=b[A===null?v.recent:A],N=d(P,x),j=II({value:N,handle:A,bounds:v.bounds,props:x});if(j===P)return;var D=!0;this.moveTo(j,D)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(i){for(var o=this.state.bounds,l=0,f=1;f<o.length-1;f+=1)i>=o[f]&&(l=f);return Math.abs(o[l+1]-i)<Math.abs(o[l]-i)&&(l+=1),l}},{key:"getBoundNeedMoving",value:function(i,o){var l=this.state,f=l.bounds,d=l.recent,v=o,x=f[o+1]===f[o];return x&&f[d]===f[o]&&(v=d),x&&i!==f[o+1]&&(v=i<f[o+1]?o:o+1),v}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var i=this.state.bounds;return i[i.length-1]}},{key:"getPoints",value:function(){var i=this.props,o=i.marks,l=i.step,f=i.min,d=i.max,v=this.internalPointsCache;if(!v||v.marks!==o||v.step!==l){var x=Nt({},o);if(l!==null)for(var b=f;b<=d;b+=l)x[b]=b;var A=Object.keys(x).map(parseFloat);A.sort(function(P,N){return P-N}),this.internalPointsCache={marks:o,step:l,points:A}}return this.internalPointsCache.points}},{key:"moveTo",value:function(i,o){var l=this,f=this.state,d=this.props,v=Pu(f.bounds),x=f.handle===null?f.recent:f.handle;v[x]=i;var b=x;d.pushable!==!1?this.pushSurroundingHandles(v,b):d.allowCross&&(v.sort(function(A,P){return A-P}),b=v.indexOf(i)),this.onChange({recent:b,handle:b,bounds:v}),o&&(this.props.onAfterChange(v),this.setState({},function(){l.handlesRefs[b].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(i,o){var l=i[o],f=this.props.pushable,d=Number(f),v=0;if(i[o+1]-l<d&&(v=1),l-i[o-1]<d&&(v=-1),v!==0){var x=o+v,b=v*(i[x]-l);this.pushHandle(i,x,v,d-b)||(i[o]=i[x]-v*d)}}},{key:"pushHandle",value:function(i,o,l,f){for(var d=i[o],v=i[o];l*(v-d)<f;){if(!this.pushHandleOnePoint(i,o,l))return i[o]=d,!1;v=i[o]}return!0}},{key:"pushHandleOnePoint",value:function(i,o,l){var f=this.getPoints(),d=f.indexOf(i[o]),v=d+l;if(v>=f.length||v<0)return!1;var x=o+l,b=f[v],A=this.props.pushable,P=Number(A),N=l*(i[x]-b);return this.pushHandle(i,x,l,P-N)?(i[o]=b,!0):!1}},{key:"trimAlignValue",value:function(i){var o=this.state,l=o.handle,f=o.bounds;return II({value:i,handle:l,bounds:f,props:this.props})}},{key:"render",value:function(){var i=this,o=this.state,l=o.handle,f=o.bounds,d=this.props,v=d.prefixCls,x=d.vertical,b=d.included,A=d.disabled,P=d.min,N=d.max,j=d.reverse,D=d.handle,F=d.trackStyle,U=d.handleStyle,$=d.tabIndex,Z=d.ariaLabelGroupForHandles,ie=d.ariaLabelledByGroupForHandles,ne=d.ariaValueTextFormatterGroupForHandles,ae=f.map(function(be){return i.calcOffset(be)}),de="".concat(v,"-handle"),ye=f.map(function(be,Ne){var Ce,qe=$[Ne]||0;(A||$[Ne]===null)&&(qe=null);var He=l===Ne;return D({className:(0,DK.default)((Ce={},Et(Ce,de,!0),Et(Ce,"".concat(de,"-").concat(Ne+1),!0),Et(Ce,"".concat(de,"-dragging"),He),Ce)),prefixCls:v,vertical:x,dragging:He,offset:ae[Ne],value:be,index:Ne,tabIndex:qe,min:P,max:N,reverse:j,disabled:A,style:U[Ne],ref:function(Je){return i.saveHandle(Ne,Je)},ariaLabel:Z[Ne],ariaLabelledBy:ie[Ne],ariaValueTextFormatter:ne[Ne]})}),me=f.slice(0,-1).map(function(be,Ne){var Ce,qe=Ne+1,He=(0,DK.default)((Ce={},Et(Ce,"".concat(v,"-track"),!0),Et(Ce,"".concat(v,"-track-").concat(qe),!0),Ce));return LK.default.createElement(bk,{className:He,vertical:x,reverse:j,included:b,offset:ae[qe-1],length:ae[qe]-ae[qe-1],style:F[Ne],key:qe})});return{tracks:me,handles:ye}}}],[{key:"getDerivedStateFromProps",value:function(i,o){if(!("value"in i||"min"in i||"max"in i))return null;var l=i.value||o.bounds,f=l.map(function(d,v){return II({value:d,handle:v,bounds:o.bounds,props:i})});if(o.bounds.length===f.length){if(f.every(function(d,v){return d===o.bounds[v]}))return null}else f=l.map(function(d,v){return II({value:d,handle:v,props:i})});return Nt(Nt({},o),{},{bounds:f})}}]),r}(LK.default.Component);NK.displayName="Range";NK.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var d3e=TI(NK);p();var jI=je(St());p();var ip=je(St());p();p();var y7=je(St()),eb=je(St());p();var ql=je(St()),eVe=je(No());p();var g3e=function(e){return+setTimeout(e,16)},v3e=function(e){return clearTimeout(e)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(g3e=function(e){return window.requestAnimationFrame(e)},v3e=function(e){return window.cancelAnimationFrame(e)});var m3e=0,kK=new Map;function y3e(t){kK.delete(t)}var _3e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;m3e+=1;var n=m3e;function i(o){if(o===0)y3e(n),e();else{var l=g3e(function(){i(o-1)});kK.set(n,l)}}return i(r),n};_3e.cancel=function(t){var e=kK.get(t);return y3e(t),v3e(e)};var nl=_3e;p();function _v(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var r=e;r;){if(r===t)return!0;r=r.parentNode}return!1}p();var b3e=je(St()),qK=je(No());function x3e(t){return t instanceof HTMLElement||t instanceof SVGElement}function dlr(t){return t&&bn(t)==="object"&&x3e(t.nativeElement)?t.nativeElement:x3e(t)?t:null}function AI(t){var e=dlr(t);if(e)return e;if(t instanceof b3e.default.Component){var r;return(r=qK.default.findDOMNode)===null||r===void 0?void 0:r.call(qK.default,t)}return null}p();var qk=je(St()),MI=je(T3e());p();var vlr=je(St());p();var ylr=Symbol.for("react.element"),_lr=Symbol.for("react.transitional.element"),xlr=Symbol.for("react.fragment");function zK(t){return t&&bn(t)==="object"&&(t.$$typeof===ylr||t.$$typeof===_lr)&&t.type===xlr}var blr=Number(qk.version.split(".")[0]),UK=function(e,r){typeof e=="function"?e(r):bn(e)==="object"&&e&&"current"in e&&(e.current=r)},Wx=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);return i.length<=1?i[0]:function(o){r.forEach(function(l){UK(l,o)})}};var CI=function(e){var r,n;if(!e)return!1;if(I3e(e)&&blr>=19)return!0;var i=(0,MI.isMemo)(e)?e.type.type:e.type;return!(typeof i=="function"&&!((r=i.prototype)!==null&&r!==void 0&&r.render)&&i.$$typeof!==MI.ForwardRef||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render)&&e.$$typeof!==MI.ForwardRef)};function I3e(t){return(0,qk.isValidElement)(t)&&!zK(t)}var A3e=function(e){if(e&&I3e(e)){var r=e;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null};p();var Ic=je(St()),M3e=je(No());p();function Of(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var wlr=(0,Ic.forwardRef)(function(t,e){var r=t.didUpdate,n=t.getContainer,i=t.children,o=(0,Ic.useRef)(),l=(0,Ic.useRef)();(0,Ic.useImperativeHandle)(e,function(){return{}});var f=(0,Ic.useRef)(!1);return!f.current&&Of()&&(l.current=n(),o.current=l.current.parentNode,f.current=!0),(0,Ic.useEffect)(function(){r==null||r(t)}),(0,Ic.useEffect)(function(){return l.current.parentNode===null&&o.current!==null&&o.current.appendChild(l.current),function(){var d;(d=l.current)===null||d===void 0||(d=d.parentNode)===null||d===void 0||d.removeChild(l.current)}},[]),l.current?M3e.default.createPortal(i,l.current):null}),C3e=wlr;var tVe=je(Ei());p();function Elr(t,e,r){return r?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function P3e(t,e,r){var n=t[e]||{};return Nt(Nt({},n),r)}function R3e(t,e,r,n){for(var i=r.points,o=Object.keys(t),l=0;l<o.length;l+=1){var f=o[l];if(Elr(t[f].points,i,n))return"".concat(e,"-placement-").concat(f)}return""}p();p();p();function BK(t){if(Array.isArray(t))return t}p();function O3e(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,l,f=[],d=!0,v=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=o.call(r)).done)&&(f.push(n.value),f.length!==e);d=!0);}catch(x){v=!0,i=x}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(v)throw i}}return f}}p();function VK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wn(t,e){return BK(t)||O3e(t,e)||EI(t,e)||VK()}var Ev=je(St()),FI=je(St());p();var L3e=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};p();var JK=je(St()),J3e=je(Ei());p();p();var X3e=je(Ei());var ol=je(St()),QK=je(St());p();var GK=je(St());var D3e=GK.createContext({});p();var N3e=je(St()),Slr=function(t){Xa(r,t);var e=Qa(r);function r(){return Ya(this,r),e.apply(this,arguments)}return Ka(r,[{key:"render",value:function(){return this.props.children}}]),r}(N3e.Component),k3e=Slr;p();p();p();var Fk=je(St());function gm(t){var e=Fk.useRef();e.current=t;var r=Fk.useCallback(function(){for(var n,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(o))},[]);return r}p();p();var Zx=je(St());var q3e=Of()?Zx.useLayoutEffect:Zx.useEffect,Tlr=function(e,r){var n=Zx.useRef(!0);q3e(function(){return e(n.current)},r),q3e(function(){return n.current=!1,function(){n.current=!0}},[])};var PI=Tlr;p();var Yx=je(St());function tp(t){var e=Yx.useRef(!1),r=Yx.useState(t),n=wn(r,2),i=n[0],o=n[1];Yx.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function l(f,d){d&&e.current||o(f)}return[i,l]}p();p();p();p();var jk=je(St());function $K(t){var e=jk.useReducer(function(f){return f+1},0),r=wn(e,2),n=r[1],i=jk.useRef(t),o=gm(function(){return i.current}),l=gm(function(f){i.current=typeof f=="function"?f(i.current):f,n()});return[o,l]}var Zk=je(St()),np=je(St());p();var Lf="none",RI="appear",OI="enter",LI="leave",HK="none",il="prepare",rp="start",vm="active",zk="end",Uk="prepared";p();var G3e=je(St()),$3e=je(St());p();function F3e(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit".concat(t)]="webkit".concat(e),r["Moz".concat(t)]="moz".concat(e),r["ms".concat(t)]="MS".concat(e),r["O".concat(t)]="o".concat(e.toLowerCase()),r}function Alr(t,e){var r={animationend:F3e("Animation","AnimationEnd"),transitionend:F3e("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete r.animationend.animation,"TransitionEvent"in e||delete r.transitionend.transition),r}var Mlr=Alr(Of(),typeof window!="undefined"?window:{}),z3e={};Of()&&(j3e=document.createElement("div"),z3e=j3e.style);var j3e,Bk={};function U3e(t){if(Bk[t])return Bk[t];var e=Mlr[t];if(e)for(var r=Object.keys(e),n=r.length,i=0;i<n;i+=1){var o=r[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in z3e)return Bk[t]=e[o],Bk[t]}return""}var B3e=U3e("animationend"),V3e=U3e("transitionend"),Vk=!!(B3e&&V3e),WK=B3e||"animationend",ZK=V3e||"transitionend";function YK(t,e){if(!t)return null;if(bn(t)==="object"){var r=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return t[r]}return"".concat(t,"-").concat(e)}var H3e=function(t){var e=(0,$3e.useRef)();function r(i){i&&(i.removeEventListener(ZK,t),i.removeEventListener(WK,t))}function n(i){e.current&&e.current!==i&&r(e.current),i&&i!==e.current&&(i.addEventListener(ZK,t),i.addEventListener(WK,t),e.current=i)}return G3e.useEffect(function(){return function(){r(e.current)}},[]),[n,r]};p();var Gk=je(St()),Clr=Of()?Gk.useLayoutEffect:Gk.useEffect,$k=Clr;p();var Z3e=je(St());p();var Hk=je(St()),W3e=function(){var t=Hk.useRef(null);function e(){nl.cancel(t.current)}function r(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=nl(function(){i<=1?n({isCanceled:function(){return o!==t.current}}):r(n,i-1)});t.current=o}return Hk.useEffect(function(){return function(){e()}},[]),[r,e]};var Plr=[il,rp,vm,zk],Rlr=[il,Uk],KK=!1,Y3e=!0;function Wk(t){return t===vm||t===zk}var K3e=function(t,e,r){var n=tp(HK),i=wn(n,2),o=i[0],l=i[1],f=W3e(),d=wn(f,2),v=d[0],x=d[1];function b(){l(il,!0)}var A=e?Rlr:Plr;return $k(function(){if(o!==HK&&o!==zk){var P=A.indexOf(o),N=A[P+1],j=r(o);j===KK?l(N,!0):N&&v(function(D){function F(){D.isCanceled()||l(N,!0)}j===!0?F():Promise.resolve(j).then(F)})}},[t,o]),Z3e.useEffect(function(){return function(){x()}},[]),[b,o]};function XK(t,e,r,n){var i=n.motionEnter,o=i===void 0?!0:i,l=n.motionAppear,f=l===void 0?!0:l,d=n.motionLeave,v=d===void 0?!0:d,x=n.motionDeadline,b=n.motionLeaveImmediately,A=n.onAppearPrepare,P=n.onEnterPrepare,N=n.onLeavePrepare,j=n.onAppearStart,D=n.onEnterStart,F=n.onLeaveStart,U=n.onAppearActive,$=n.onEnterActive,Z=n.onLeaveActive,ie=n.onAppearEnd,ne=n.onEnterEnd,ae=n.onLeaveEnd,de=n.onVisibleChanged,ye=tp(),me=wn(ye,2),be=me[0],Ne=me[1],Ce=$K(Lf),qe=wn(Ce,2),He=qe[0],Ke=qe[1],Je=tp(null),We=wn(Je,2),lt=We[0],pt=We[1],dt=He(),ze=(0,np.useRef)(!1),Dt=(0,np.useRef)(null);function Ot(){return r()}var Ue=(0,np.useRef)(!1);function nt(){Ke(Lf),pt(null,!0)}var Ze=gm(function(dr){var br=He();if(br!==Lf){var un=Ot();if(!(dr&&!dr.deadline&&dr.target!==un)){var En=Ue.current,Rn;br===RI&&En?Rn=ie==null?void 0:ie(un,dr):br===OI&&En?Rn=ne==null?void 0:ne(un,dr):br===LI&&En&&(Rn=ae==null?void 0:ae(un,dr)),En&&Rn!==!1&&nt()}}}),rt=H3e(Ze),at=wn(rt,1),ot=at[0],Lt=function(br){switch(br){case RI:return Et(Et(Et({},il,A),rp,j),vm,U);case OI:return Et(Et(Et({},il,P),rp,D),vm,$);case LI:return Et(Et(Et({},il,N),rp,F),vm,Z);default:return{}}},zt=Zk.useMemo(function(){return Lt(dt)},[dt]),Pt=K3e(dt,!t,function(dr){if(dr===il){var br=zt[il];return br?br(Ot()):KK}if(Gt in zt){var un;pt(((un=zt[Gt])===null||un===void 0?void 0:un.call(zt,Ot(),null))||null)}return Gt===vm&&dt!==Lf&&(ot(Ot()),x>0&&(clearTimeout(Dt.current),Dt.current=setTimeout(function(){Ze({deadline:!0})},x))),Gt===Uk&&nt(),Y3e}),$t=wn(Pt,2),Xt=$t[0],Gt=$t[1],Sr=Wk(Gt);Ue.current=Sr;var zr=(0,np.useRef)(null);$k(function(){if(!(ze.current&&zr.current===e)){Ne(e);var dr=ze.current;ze.current=!0;var br;!dr&&e&&f&&(br=RI),dr&&e&&o&&(br=OI),(dr&&!e&&v||!dr&&b&&!e&&v)&&(br=LI);var un=Lt(br);br&&(t||un[il])?(Ke(br),Xt()):Ke(Lf),zr.current=e}},[e]),(0,np.useEffect)(function(){(dt===RI&&!f||dt===OI&&!o||dt===LI&&!v)&&Ke(Lf)},[f,o,v]),(0,np.useEffect)(function(){return function(){ze.current=!1,clearTimeout(Dt.current)}},[]);var vr=Zk.useRef(!1);(0,np.useEffect)(function(){be&&(vr.current=!0),be!==void 0&&dt===Lf&&((vr.current||be)&&(de==null||de(be)),vr.current=!0)},[be,dt]);var pr=lt;return zt[il]&&Gt===rp&&(pr=Nt({transition:"none"},pr)),[dt,Gt,pr,be!=null?be:e]}function Olr(t){var e=t;bn(t)==="object"&&(e=t.transitionSupport);function r(i,o){return!!(i.motionName&&e&&o!==!1)}var n=ol.forwardRef(function(i,o){var l=i.visible,f=l===void 0?!0:l,d=i.removeOnLeave,v=d===void 0?!0:d,x=i.forceRender,b=i.children,A=i.motionName,P=i.leavedClassName,N=i.eventProps,j=ol.useContext(D3e),D=j.motion,F=r(i,D),U=(0,QK.useRef)(),$=(0,QK.useRef)();function Z(){try{return U.current instanceof HTMLElement?U.current:AI($.current)}catch(We){return null}}var ie=XK(F,f,Z,i),ne=wn(ie,4),ae=ne[0],de=ne[1],ye=ne[2],me=ne[3],be=ol.useRef(me);me&&(be.current=!0);var Ne=ol.useCallback(function(We){U.current=We,UK(o,We)},[o]),Ce,qe=Nt(Nt({},N),{},{visible:f});if(!b)Ce=null;else if(ae===Lf)me?Ce=b(Nt({},qe),Ne):!v&&be.current&&P?Ce=b(Nt(Nt({},qe),{},{className:P}),Ne):x||!v&&!P?Ce=b(Nt(Nt({},qe),{},{style:{display:"none"}}),Ne):Ce=null;else{var He;de===il?He="prepare":Wk(de)?He="active":de===rp&&(He="start");var Ke=YK(A,"".concat(ae,"-").concat(He));Ce=b(Nt(Nt({},qe),{},{className:(0,X3e.default)(YK(A,ae),Et(Et({},Ke,Ke&&He),A,typeof A=="string")),style:ye}),Ne)}if(ol.isValidElement(Ce)&&CI(Ce)){var Je=A3e(Ce);Je||(Ce=ol.cloneElement(Ce,{ref:Ne}))}return ol.createElement(k3e,{ref:$},Ce)});return n.displayName="CSSMotion",n}var Yk=Olr(Vk);p();var xv=je(St());p();var Kk="add",Xk="keep",Qk="remove",eq="removed";function Llr(t){var e;return t&&bn(t)==="object"&&"key"in t?e=t:e={key:t},Nt(Nt({},e),{},{key:String(e.key)})}function Jk(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(Llr)}function Q3e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],n=0,i=e.length,o=Jk(t),l=Jk(e);o.forEach(function(v){for(var x=!1,b=n;b<i;b+=1){var A=l[b];if(A.key===v.key){n<b&&(r=r.concat(l.slice(n,b).map(function(P){return Nt(Nt({},P),{},{status:Kk})})),n=b),r.push(Nt(Nt({},A),{},{status:Xk})),n+=1,x=!0;break}}x||r.push(Nt(Nt({},v),{},{status:Qk}))}),n<i&&(r=r.concat(l.slice(n).map(function(v){return Nt(Nt({},v),{},{status:Kk})})));var f={};r.forEach(function(v){var x=v.key;f[x]=(f[x]||0)+1});var d=Object.keys(f).filter(function(v){return f[v]>1});return d.forEach(function(v){r=r.filter(function(x){var b=x.key,A=x.status;return b!==v||A!==Qk}),r.forEach(function(x){x.key===v&&(x.status=Xk)})}),r}var Dlr=["component","children","onVisibleChanged","onAllRemoved"],Nlr=["status"],klr=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function qlr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yk,r=function(n){Xa(o,n);var i=Qa(o);function o(){var l;Ya(this,o);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return l=i.call.apply(i,[this].concat(d)),Et(Wr(l),"state",{keyEntities:[]}),Et(Wr(l),"removeKey",function(x){l.setState(function(b){var A=b.keyEntities.map(function(P){return P.key!==x?P:Nt(Nt({},P),{},{status:eq})});return{keyEntities:A}},function(){var b=l.state.keyEntities,A=b.filter(function(P){var N=P.status;return N!==eq}).length;A===0&&l.props.onAllRemoved&&l.props.onAllRemoved()})}),l}return Ka(o,[{key:"render",value:function(){var f=this,d=this.state.keyEntities,v=this.props,x=v.component,b=v.children,A=v.onVisibleChanged,P=v.onAllRemoved,N=_s(v,Dlr),j=x||xv.Fragment,D={};return klr.forEach(function(F){D[F]=N[F],delete N[F]}),delete N.keys,xv.createElement(j,N,d.map(function(F,U){var $=F.status,Z=_s(F,Nlr),ie=$===Kk||$===Xk;return xv.createElement(e,mn({},D,{key:Z.key,visible:ie,eventProps:Z,onVisibleChanged:function(ae){A==null||A(ae,{key:Z.key}),ae||f.removeKey(Z.key)}}),function(ne,ae){return b(Nt(Nt({},ne),{},{index:U}),ae)})}))}}],[{key:"getDerivedStateFromProps",value:function(f,d){var v=f.keys,x=d.keyEntities,b=Jk(v),A=Q3e(x,b);return{keyEntities:A.filter(function(P){var N=x.find(function(j){var D=j.key;return P.key===D});return!(N&&N.status===eq&&P.status===Qk)})}}}]),o}(xv.Component);return Et(r,"defaultProps",{component:"div"}),r}var Flr=qlr(Vk);var Kx=Yk;p();function tq(t){var e=t.prefixCls,r=t.motion,n=t.animation,i=t.transitionName;return r||(n?{motionName:"".concat(e,"-").concat(n)}:i?{motionName:i}:null)}function e7(t){var e=t.prefixCls,r=t.visible,n=t.zIndex,i=t.mask,o=t.maskMotion,l=t.maskAnimation,f=t.maskTransitionName;if(!i)return null;var d={};return(o||f||l)&&(d=Nt({motionAppear:!0},tq({motion:o,prefixCls:e,transitionName:f,animation:l}))),JK.createElement(Kx,mn({},d,{visible:r,removeOnLeave:!0}),function(v){var x=v.className;return JK.createElement("div",{style:{zIndex:n},className:(0,J3e.default)("".concat(e,"-mask"),x)})})}p();var kl=je(St()),wv=je(St());p();p();p();function e5e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function t5e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e5e(Object(r),!0).forEach(function(n){jlr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e5e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o7(t){"@babel/helpers - typeof";return o7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o7(t)}function jlr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var DI,zlr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function aq(){if(DI!==void 0)return DI;DI="";var t=document.createElement("p").style,e="Transform";for(var r in zlr)r+e in t&&(DI=r);return DI}function d5e(){return aq()?"".concat(aq(),"TransitionProperty"):"transitionProperty"}function sq(){return aq()?"".concat(aq(),"Transform"):"transform"}function r5e(t,e){var r=d5e();r&&(t.style[r]=e,r!=="transitionProperty"&&(t.style.transitionProperty=e))}function t7(t,e){var r=sq();r&&(t.style[r]=e,r!=="transform"&&(t.style.transform=e))}function Ulr(t){return t.style.transitionProperty||t.style[d5e()]}function Blr(t){var e=window.getComputedStyle(t,null),r=e.getPropertyValue("transform")||e.getPropertyValue(sq());if(r&&r!=="none"){var n=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var Vlr=/matrix\((.*)\)/,Glr=/matrix3d\((.*)\)/;function $lr(t,e){var r=window.getComputedStyle(t,null),n=r.getPropertyValue("transform")||r.getPropertyValue(sq());if(n&&n!=="none"){var i,o=n.match(Vlr);if(o)o=o[1],i=o.split(",").map(function(f){return parseFloat(f,10)}),i[4]=e.x,i[5]=e.y,t7(t,"matrix(".concat(i.join(","),")"));else{var l=n.match(Glr)[1];i=l.split(",").map(function(f){return parseFloat(f,10)}),i[12]=e.x,i[13]=e.y,t7(t,"matrix3d(".concat(i.join(","),")"))}}else t7(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var Hlr=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,qI;function n5e(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function Xx(t,e,r){var n=r;if(o7(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&Xx(t,i,e[i]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),t.style[e]=n;return}return qI(t,e)}function Wlr(t){var e,r,n,i=t.ownerDocument,o=i.body,l=i&&i.documentElement;return e=t.getBoundingClientRect(),r=Math.floor(e.left),n=Math.floor(e.top),r-=l.clientLeft||o.clientLeft||0,n-=l.clientTop||o.clientTop||0,{left:r,top:n}}function m5e(t,e){var r=t["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof r!="number"){var i=t.document;r=i.documentElement[n],typeof r!="number"&&(r=i.body[n])}return r}function g5e(t){return m5e(t)}function v5e(t){return m5e(t,!0)}function kI(t){var e=Wlr(t),r=t.ownerDocument,n=r.defaultView||r.parentWindow;return e.left+=g5e(n),e.top+=v5e(n),e}function u7(t){return t!=null&&t==t.window}function y5e(t){return u7(t)?t.document:t.nodeType===9?t:t.ownerDocument}function Zlr(t,e,r){var n=r,i="",o=y5e(t);return n=n||o.defaultView.getComputedStyle(t,null),n&&(i=n.getPropertyValue(e)||n[e]),i}var Ylr=new RegExp("^(".concat(Hlr,")(?!px)[a-z%]+$"),"i"),Klr=/^(top|right|bottom|left)$/,r7="currentStyle",n7="runtimeStyle",bv="left",Xlr="px";function Qlr(t,e){var r=t[r7]&&t[r7][e];if(Ylr.test(r)&&!Klr.test(e)){var n=t.style,i=n[bv],o=t[n7][bv];t[n7][bv]=t[r7][bv],n[bv]=e==="fontSize"?"1em":r||0,r=n.pixelLeft+Xlr,n[bv]=i,t[n7][bv]=o}return r===""?"auto":r}typeof window!="undefined"&&(qI=window.getComputedStyle?Zlr:Qlr);function rq(t,e){return t==="left"?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function i5e(t){if(t==="left")return"right";if(t==="right")return"left";if(t==="top")return"bottom";if(t==="bottom")return"top"}function o5e(t,e,r){Xx(t,"position")==="static"&&(t.style.position="relative");var n=-999,i=-999,o=rq("left",r),l=rq("top",r),f=i5e(o),d=i5e(l);o!=="left"&&(n=999),l!=="top"&&(i=999);var v="",x=kI(t);("left"in e||"top"in e)&&(v=Ulr(t)||"",r5e(t,"none")),"left"in e&&(t.style[f]="",t.style[o]="".concat(n,"px")),"top"in e&&(t.style[d]="",t.style[l]="".concat(i,"px")),n5e(t);var b=kI(t),A={};for(var P in e)if(e.hasOwnProperty(P)){var N=rq(P,r),j=P==="left"?n:i,D=x[P]-b[P];N===P?A[N]=j+D:A[N]=j-D}Xx(t,A),n5e(t),("left"in e||"top"in e)&&r5e(t,v);var F={};for(var U in e)if(e.hasOwnProperty(U)){var $=rq(U,r),Z=e[U]-x[U];U===$?F[$]=A[$]+Z:F[$]=A[$]-Z}Xx(t,F)}function Jlr(t,e){var r=kI(t),n=Blr(t),i={x:n.x,y:n.y};"left"in e&&(i.x=n.x+e.left-r.left),"top"in e&&(i.y=n.y+e.top-r.top),$lr(t,i)}function eur(t,e,r){if(r.ignoreShake){var n=kI(t),i=n.left.toFixed(0),o=n.top.toFixed(0),l=e.left.toFixed(0),f=e.top.toFixed(0);if(i===l&&o===f)return}r.useCssRight||r.useCssBottom?o5e(t,e,r):r.useCssTransform&&sq()in document.body.style?Jlr(t,e):o5e(t,e,r)}function c7(t,e){for(var r=0;r<t.length;r++)e(t[r])}function _5e(t){return qI(t,"boxSizing")==="border-box"}var tur=["margin","border","padding"],a7=-1,rur=2,s7=1,nur=0;function iur(t,e,r){var n={},i=t.style,o;for(o in e)e.hasOwnProperty(o)&&(n[o]=i[o],i[o]=e[o]);r.call(t);for(o in e)e.hasOwnProperty(o)&&(i[o]=n[o])}function NI(t,e,r){var n=0,i,o,l;for(o=0;o<e.length;o++)if(i=e[o],i)for(l=0;l<r.length;l++){var f=void 0;i==="border"?f="".concat(i).concat(r[l],"Width"):f=i+r[l],n+=parseFloat(qI(t,f))||0}return n}var Df={getParent:function(e){var r=e;do r.nodeType===11&&r.host?r=r.host:r=r.parentNode;while(r&&r.nodeType!==1&&r.nodeType!==9);return r}};c7(["Width","Height"],function(t){Df["doc".concat(t)]=function(e){var r=e.document;return Math.max(r.documentElement["scroll".concat(t)],r.body["scroll".concat(t)],Df["viewport".concat(t)](r))},Df["viewport".concat(t)]=function(e){var r="client".concat(t),n=e.document,i=n.body,o=n.documentElement,l=o[r];return n.compatMode==="CSS1Compat"&&l||i&&i[r]||l}});function a5e(t,e,r){var n=r;if(u7(t))return e==="width"?Df.viewportWidth(t):Df.viewportHeight(t);if(t.nodeType===9)return e==="width"?Df.docWidth(t):Df.docHeight(t);var i=e==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(e==="width"?t.getBoundingClientRect().width:t.getBoundingClientRect().height),l=_5e(t),f=0;(o==null||o<=0)&&(o=void 0,f=qI(t,e),(f==null||Number(f)<0)&&(f=t.style[e]||0),f=Math.floor(parseFloat(f))||0),n===void 0&&(n=l?s7:a7);var d=o!==void 0||l,v=o||f;return n===a7?d?v-NI(t,["border","padding"],i):f:d?n===s7?v:v+(n===rur?-NI(t,["border"],i):NI(t,["margin"],i)):f+NI(t,tur.slice(n),i)}var our={position:"absolute",visibility:"hidden",display:"block"};function s5e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=e[0];return i.offsetWidth!==0?n=a5e.apply(void 0,e):iur(i,our,function(){n=a5e.apply(void 0,e)}),n}c7(["width","height"],function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);Df["outer".concat(e)]=function(n,i){return n&&s5e(n,t,i?nur:s7)};var r=t==="width"?["Left","Right"]:["Top","Bottom"];Df[t]=function(n,i){var o=i;if(o!==void 0){if(n){var l=_5e(n);return l&&(o+=NI(n,["padding","border"],r)),Xx(n,t,o)}return}return n&&s5e(n,t,a7)}});function x5e(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var Vr={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var r=e.ownerDocument||e;return r.defaultView||r.parentWindow},getDocument:y5e,offset:function(e,r,n){if(typeof r!="undefined")eur(e,r,n||{});else return kI(e)},isWindow:u7,each:c7,css:Xx,clone:function(e){var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);var i=e.overflow;if(i)for(r in e)e.hasOwnProperty(r)&&(n.overflow[r]=e.overflow[r]);return n},mix:x5e,getWindowScrollLeft:function(e){return g5e(e)},getWindowScrollTop:function(e){return v5e(e)},merge:function(){for(var e={},r=0;r<arguments.length;r++)Vr.mix(e,r<0||arguments.length<=r?void 0:arguments[r]);return e},viewportWidth:0,viewportHeight:0};x5e(Vr,Df);var i7=Vr.getParent;function l7(t){if(Vr.isWindow(t)||t.nodeType===9)return null;var e=Vr.getDocument(t),r=e.body,n,i=Vr.css(t,"position"),o=i==="fixed"||i==="absolute";if(!o)return t.nodeName.toLowerCase()==="html"?null:i7(t);for(n=i7(t);n&&n!==r&&n.nodeType!==9;n=i7(n))if(i=Vr.css(n,"position"),i!=="static")return n;return null}var l5e=Vr.getParent;function aur(t){if(Vr.isWindow(t)||t.nodeType===9)return!1;var e=Vr.getDocument(t),r=e.body,n=null;for(n=l5e(t);n&&n!==r&&n!==e;n=l5e(n)){var i=Vr.css(n,"position");if(i==="fixed")return!0}return!1}function f7(t,e){for(var r={left:0,right:1/0,top:0,bottom:1/0},n=l7(t),i=Vr.getDocument(t),o=i.defaultView||i.parentWindow,l=i.body,f=i.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==l&&n!==f&&Vr.css(n,"overflow")!=="visible"){var d=Vr.offset(n);d.left+=n.clientLeft,d.top+=n.clientTop,r.top=Math.max(r.top,d.top),r.right=Math.min(r.right,d.left+n.clientWidth),r.bottom=Math.min(r.bottom,d.top+n.clientHeight),r.left=Math.max(r.left,d.left)}else if(n===l||n===f)break;n=l7(n)}var v=null;if(!Vr.isWindow(t)&&t.nodeType!==9){v=t.style.position;var x=Vr.css(t,"position");x==="absolute"&&(t.style.position="fixed")}var b=Vr.getWindowScrollLeft(o),A=Vr.getWindowScrollTop(o),P=Vr.viewportWidth(o),N=Vr.viewportHeight(o),j=f.scrollWidth,D=f.scrollHeight,F=window.getComputedStyle(l);if(F.overflowX==="hidden"&&(j=o.innerWidth),F.overflowY==="hidden"&&(D=o.innerHeight),t.style&&(t.style.position=v),e||aur(t))r.left=Math.max(r.left,b),r.top=Math.max(r.top,A),r.right=Math.min(r.right,b+P),r.bottom=Math.min(r.bottom,A+N);else{var U=Math.max(j,b+P);r.right=Math.min(r.right,U);var $=Math.max(D,A+N);r.bottom=Math.min(r.bottom,$)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function sur(t,e,r,n){var i=Vr.clone(t),o={width:e.width,height:e.height};return n.adjustX&&i.left<r.left&&(i.left=r.left),n.resizeWidth&&i.left>=r.left&&i.left+o.width>r.right&&(o.width-=i.left+o.width-r.right),n.adjustX&&i.left+o.width>r.right&&(i.left=Math.max(r.right-o.width,r.left)),n.adjustY&&i.top<r.top&&(i.top=r.top),n.resizeHeight&&i.top>=r.top&&i.top+o.height>r.bottom&&(o.height-=i.top+o.height-r.bottom),n.adjustY&&i.top+o.height>r.bottom&&(i.top=Math.max(r.bottom-o.height,r.top)),Vr.mix(i,o)}function h7(t){var e,r,n;if(!Vr.isWindow(t)&&t.nodeType!==9)e=Vr.offset(t),r=Vr.outerWidth(t),n=Vr.outerHeight(t);else{var i=Vr.getWindow(t);e={left:Vr.getWindowScrollLeft(i),top:Vr.getWindowScrollTop(i)},r=Vr.viewportWidth(i),n=Vr.viewportHeight(i)}return e.width=r,e.height=n,e}function u5e(t,e){var r=e.charAt(0),n=e.charAt(1),i=t.width,o=t.height,l=t.left,f=t.top;return r==="c"?f+=o/2:r==="b"&&(f+=o),n==="c"?l+=i/2:n==="r"&&(l+=i),{left:l,top:f}}function nq(t,e,r,n,i){var o=u5e(e,r[1]),l=u5e(t,r[0]),f=[l.left-o.left,l.top-o.top];return{left:Math.round(t.left-f[0]+n[0]-i[0]),top:Math.round(t.top-f[1]+n[1]-i[1])}}function c5e(t,e,r){return t.left<r.left||t.left+e.width>r.right}function f5e(t,e,r){return t.top<r.top||t.top+e.height>r.bottom}function lur(t,e,r){return t.left>r.right||t.left+e.width<r.left}function uur(t,e,r){return t.top>r.bottom||t.top+e.height<r.top}function iq(t,e,r){var n=[];return Vr.each(t,function(i){n.push(i.replace(e,function(o){return r[o]}))}),n}function oq(t,e){return t[e]=-t[e],t}function h5e(t,e){var r;return /%$/.test(t)?r=parseInt(t.substring(0,t.length-1),10)/100*e:r=parseInt(t,10),r||0}function p5e(t,e){t[0]=h5e(t[0],e.width),t[1]=h5e(t[1],e.height)}function b5e(t,e,r,n){var i=r.points,o=r.offset||[0,0],l=r.targetOffset||[0,0],f=r.overflow,d=r.source||t;o=[].concat(o),l=[].concat(l),f=f||{};var v={},x=0,b=!!(f&&f.alwaysByViewport),A=f7(d,b),P=h7(d);p5e(o,P),p5e(l,e);var N=nq(P,e,i,o,l),j=Vr.merge(P,N);if(A&&(f.adjustX||f.adjustY)&&n){if(f.adjustX&&c5e(N,P,A)){var D=iq(i,/[lr]/gi,{l:"r",r:"l"}),F=oq(o,0),U=oq(l,0),$=nq(P,e,D,F,U);lur($,P,A)||(x=1,i=D,o=F,l=U)}if(f.adjustY&&f5e(N,P,A)){var Z=iq(i,/[tb]/gi,{t:"b",b:"t"}),ie=oq(o,1),ne=oq(l,1),ae=nq(P,e,Z,ie,ne);uur(ae,P,A)||(x=1,i=Z,o=ie,l=ne)}x&&(N=nq(P,e,i,o,l),Vr.mix(j,N));var de=c5e(N,P,A),ye=f5e(N,P,A);if(de||ye){var me=i;de&&(me=iq(i,/[lr]/gi,{l:"r",r:"l"})),ye&&(me=iq(i,/[tb]/gi,{t:"b",b:"t"})),i=me,o=r.offset||[0,0],l=r.targetOffset||[0,0]}v.adjustX=f.adjustX&&de,v.adjustY=f.adjustY&&ye,(v.adjustX||v.adjustY)&&(j=sur(N,P,A,v))}return j.width!==P.width&&Vr.css(d,"width",Vr.width(d)+j.width-P.width),j.height!==P.height&&Vr.css(d,"height",Vr.height(d)+j.height-P.height),Vr.offset(d,{left:j.left,top:j.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:i,offset:o,targetOffset:l,overflow:v}}function cur(t,e){var r=f7(t,e),n=h7(t);return!r||n.left+n.width<=r.left||n.top+n.height<=r.top||n.left>=r.right||n.top>=r.bottom}function lq(t,e,r){var n=r.target||e,i=h7(n),o=!cur(n,r.overflow&&r.overflow.alwaysByViewport);return b5e(t,i,r,o)}lq.__getOffsetParent=l7;lq.__getVisibleRectForElement=f7;function w5e(t,e,r){var n,i,o=Vr.getDocument(t),l=o.defaultView||o.parentWindow,f=Vr.getWindowScrollLeft(l),d=Vr.getWindowScrollTop(l),v=Vr.viewportWidth(l),x=Vr.viewportHeight(l);"pageX"in e?n=e.pageX:n=f+e.clientX,"pageY"in e?i=e.pageY:i=d+e.clientY;var b={left:n,top:i,width:0,height:0},A=n>=0&&n<=f+v&&i>=0&&i<=d+x,P=[r.points[0],"cc"];return b5e(t,b,t5e(t5e({},r),{},{points:P}),A)}p();function fur(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function i(o,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=n.has(o);if(Pf(!d,"Warning: There may be circular references"),d)return!1;if(o===l)return!0;if(r&&f>1)return!1;n.add(o);var v=f+1;if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(var x=0;x<o.length;x++)if(!i(o[x],l[x],v))return!1;return!0}if(o&&l&&bn(o)==="object"&&bn(l)==="object"){var b=Object.keys(o);return b.length!==Object.keys(l).length?!1:b.every(function(A){return i(o[A],l[A],v)})}return!1}return i(t,e)}var E5e=fur;p();var S5e=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),r=e.width,n=e.height;if(r||n)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),o=i.width,l=i.height;if(o||l)return!0}}return!1};var Sa=je(St());p();var p7=je(St()),T5e=function(t,e){var r=p7.default.useRef(!1),n=p7.default.useRef(null);function i(){window.clearTimeout(n.current)}function o(l){if(i(),!r.current||l===!0){if(t(l)===!1)return;r.current=!0,n.current=window.setTimeout(function(){r.current=!1},e)}else n.current=window.setTimeout(function(){r.current=!1,o()},e)}return[o,function(){r.current=!1,i()}]};p();p();var A5e=function(){if(typeof Map!="undefined")return Map;function t(e,r){var n=-1;return e.some(function(i,o){return i[0]===r?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var n=t(this.__entries__,r),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(r,n){var i=t(this.__entries__,r);~i?this.__entries__[i][1]=n:this.__entries__.push([r,n])},e.prototype.delete=function(r){var n=this.__entries__,i=t(n,r);~i&&n.splice(i,1)},e.prototype.has=function(r){return!!~t(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var i=0,o=this.__entries__;i<o.length;i++){var l=o[i];r.call(n,l[1],l[0])}},e}()}(),d7=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,uq=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),hur=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(uq):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),pur=2;function dur(t,e){var r=!1,n=!1,i=0;function o(){r&&(r=!1,t()),n&&f()}function l(){hur(o)}function f(){var d=Date.now();if(r){if(d-i<pur)return;n=!0}else r=!0,n=!1,setTimeout(l,e);i=d}return f}var mur=20,gur=["top","right","bottom","left","width","height","size","weight"],vur=typeof MutationObserver!="undefined",yur=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=dur(this.refresh.bind(this),mur)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var r=this.observers_,n=r.indexOf(e);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!d7||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),vur?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!d7||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var r=e.propertyName,n=r===void 0?"":r,i=gur.some(function(o){return!!~n.indexOf(o)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),M5e=function(t,e){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Qx=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||uq},C5e=fq(0,0,0,0);function cq(t){return parseFloat(t)||0}function I5e(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(n,i){var o=t["border-"+i+"-width"];return n+cq(o)},0)}function _ur(t){for(var e=["top","right","bottom","left"],r={},n=0,i=e;n<i.length;n++){var o=i[n],l=t["padding-"+o];r[o]=cq(l)}return r}function xur(t){var e=t.getBBox();return fq(0,0,e.width,e.height)}function bur(t){var e=t.clientWidth,r=t.clientHeight;if(!e&&!r)return C5e;var n=Qx(t).getComputedStyle(t),i=_ur(n),o=i.left+i.right,l=i.top+i.bottom,f=cq(n.width),d=cq(n.height);if(n.boxSizing==="border-box"&&(Math.round(f+o)!==e&&(f-=I5e(n,"left","right")+o),Math.round(d+l)!==r&&(d-=I5e(n,"top","bottom")+l)),!Eur(t)){var v=Math.round(f+o)-e,x=Math.round(d+l)-r;Math.abs(v)!==1&&(f-=v),Math.abs(x)!==1&&(d-=x)}return fq(i.left,i.top,f,d)}var wur=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof Qx(t).SVGGraphicsElement}:function(t){return t instanceof Qx(t).SVGElement&&typeof t.getBBox=="function"}}();function Eur(t){return t===Qx(t).document.documentElement}function Sur(t){return d7?wur(t)?xur(t):bur(t):C5e}function Tur(t){var e=t.x,r=t.y,n=t.width,i=t.height,o=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return M5e(l,{x:e,y:r,width:n,height:i,top:r,right:e+n,bottom:i+r,left:e}),l}function fq(t,e,r,n){return{x:t,y:e,width:r,height:n}}var Iur=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=fq(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=Sur(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),Aur=function(){function t(e,r){var n=Tur(r);M5e(this,{target:e,contentRect:n})}return t}(),Mur=function(){function t(e,r,n){if(this.activeObservations_=[],this.observations_=new A5e,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=n}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Qx(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(e)||(r.set(e,new Iur(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Qx(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Aur(n.target,n.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),P5e=typeof WeakMap!="undefined"?new WeakMap:new A5e,R5e=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=yur.getInstance(),n=new Mur(e,r,this);P5e.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){R5e.prototype[t]=function(){var e;return(e=P5e.get(this))[t].apply(e,arguments)}});var Cur=function(){return typeof uq.ResizeObserver!="undefined"?uq.ResizeObserver:R5e}(),O5e=Cur;function L5e(t,e){return t===e?!0:!t||!e?!1:"pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e?t.clientX===e.clientX&&t.clientY===e.clientY:!1}function D5e(t,e){t!==document.activeElement&&_v(e,t)&&typeof t.focus=="function"&&t.focus()}function m7(t,e){var r=null,n=null;function i(l){var f=wn(l,1),d=f[0].target;if(document.documentElement.contains(d)){var v=d.getBoundingClientRect(),x=v.width,b=v.height,A=Math.floor(x),P=Math.floor(b);(r!==A||n!==P)&&Promise.resolve().then(function(){e({width:A,height:P})}),r=A,n=P}}var o=new O5e(i);return t&&o.observe(t),function(){o.disconnect()}}function N5e(t){return typeof t!="function"?null:t()}function k5e(t){return bn(t)!=="object"||!t?null:t}var Pur=function(e,r){var n=e.children,i=e.disabled,o=e.target,l=e.align,f=e.onAlign,d=e.monitorWindowResize,v=e.monitorBufferTime,x=v===void 0?0:v,b=Sa.default.useRef({}),A=Sa.default.useRef(),P=Sa.default.Children.only(n),N=Sa.default.useRef({});N.current.disabled=i,N.current.target=o,N.current.align=l,N.current.onAlign=f;var j=T5e(function(){var be=N.current,Ne=be.disabled,Ce=be.target,qe=be.align,He=be.onAlign,Ke=A.current;if(!Ne&&Ce&&Ke){var Je,We=N5e(Ce),lt=k5e(Ce);b.current.element=We,b.current.point=lt,b.current.align=qe;var pt=document,dt=pt.activeElement;return We&&S5e(We)?Je=lq(Ke,We,qe):lt&&(Je=w5e(Ke,lt,qe)),D5e(dt,Ke),He&&Je&&He(Ke,Je),!0}return!1},x),D=wn(j,2),F=D[0],U=D[1],$=Sa.default.useState(),Z=wn($,2),ie=Z[0],ne=Z[1],ae=Sa.default.useState(),de=wn(ae,2),ye=de[0],me=de[1];return PI(function(){ne(N5e(o)),me(k5e(o))}),Sa.default.useEffect(function(){(b.current.element!==ie||!L5e(b.current.point,ye)||!E5e(b.current.align,l))&&F()}),Sa.default.useEffect(function(){var be=m7(A.current,F);return be},[A.current]),Sa.default.useEffect(function(){var be=m7(ie,F);return be},[ie]),Sa.default.useEffect(function(){i?U():F()},[i]),Sa.default.useEffect(function(){if(d){var be=xs(window,"resize",F);return be.remove}},[d]),Sa.default.useEffect(function(){return function(){U()}},[]),Sa.default.useImperativeHandle(r,function(){return{forceAlign:function(){return F(!0)}}}),Sa.default.isValidElement(P)&&(P=Sa.default.cloneElement(P,{ref:Wx(P.ref,A)})),P},q5e=Sa.default.forwardRef(Pur);q5e.displayName="Align";var F5e=q5e;var j5e=F5e;var $5e=je(Ei());p();p();function hq(){"use strict";hq=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",f=i.toStringTag||"@@toStringTag";function d(me,be,Ne,Ce){return Object.defineProperty(me,be,{value:Ne,enumerable:!Ce,configurable:!Ce,writable:!Ce})}try{d({},"")}catch(me){d=function(Ne,Ce,qe){return Ne[Ce]=qe}}function v(me,be,Ne,Ce){var qe=be&&be.prototype instanceof A?be:A,He=Object.create(qe.prototype);return d(He,"_invoke",function(Ke,Je,We){var lt=1;return function(pt,dt){if(lt===3)throw Error("Generator is already running");if(lt===4){if(pt==="throw")throw dt;return{value:t,done:!0}}for(We.method=pt,We.arg=dt;;){var ze=We.delegate;if(ze){var Dt=ie(ze,We);if(Dt){if(Dt===b)continue;return Dt}}if(We.method==="next")We.sent=We._sent=We.arg;else if(We.method==="throw"){if(lt===1)throw lt=4,We.arg;We.dispatchException(We.arg)}else We.method==="return"&&We.abrupt("return",We.arg);lt=3;var Ot=x(Ke,Je,We);if(Ot.type==="normal"){if(lt=We.done?4:2,Ot.arg===b)continue;return{value:Ot.arg,done:We.done}}Ot.type==="throw"&&(lt=4,We.method="throw",We.arg=Ot.arg)}}}(me,Ne,new de(Ce||[])),!0),He}function x(me,be,Ne){try{return{type:"normal",arg:me.call(be,Ne)}}catch(Ce){return{type:"throw",arg:Ce}}}e.wrap=v;var b={};function A(){}function P(){}function N(){}var j={};d(j,o,function(){return this});var D=Object.getPrototypeOf,F=D&&D(D(ye([])));F&&F!==r&&n.call(F,o)&&(j=F);var U=N.prototype=A.prototype=Object.create(j);function $(me){["next","throw","return"].forEach(function(be){d(me,be,function(Ne){return this._invoke(be,Ne)})})}function Z(me,be){function Ne(qe,He,Ke,Je){var We=x(me[qe],me,He);if(We.type!=="throw"){var lt=We.arg,pt=lt.value;return pt&&bn(pt)=="object"&&n.call(pt,"__await")?be.resolve(pt.__await).then(function(dt){Ne("next",dt,Ke,Je)},function(dt){Ne("throw",dt,Ke,Je)}):be.resolve(pt).then(function(dt){lt.value=dt,Ke(lt)},function(dt){return Ne("throw",dt,Ke,Je)})}Je(We.arg)}var Ce;d(this,"_invoke",function(qe,He){function Ke(){return new be(function(Je,We){Ne(qe,He,Je,We)})}return Ce=Ce?Ce.then(Ke,Ke):Ke()},!0)}function ie(me,be){var Ne=be.method,Ce=me.i[Ne];if(Ce===t)return be.delegate=null,Ne==="throw"&&me.i.return&&(be.method="return",be.arg=t,ie(me,be),be.method==="throw")||Ne!=="return"&&(be.method="throw",be.arg=new TypeError("The iterator does not provide a '"+Ne+"' method")),b;var qe=x(Ce,me.i,be.arg);if(qe.type==="throw")return be.method="throw",be.arg=qe.arg,be.delegate=null,b;var He=qe.arg;return He?He.done?(be[me.r]=He.value,be.next=me.n,be.method!=="return"&&(be.method="next",be.arg=t),be.delegate=null,b):He:(be.method="throw",be.arg=new TypeError("iterator result is not an object"),be.delegate=null,b)}function ne(me){this.tryEntries.push(me)}function ae(me){var be=me[4]||{};be.type="normal",be.arg=t,me[4]=be}function de(me){this.tryEntries=[[-1]],me.forEach(ne,this),this.reset(!0)}function ye(me){if(me!=null){var be=me[o];if(be)return be.call(me);if(typeof me.next=="function")return me;if(!isNaN(me.length)){var Ne=-1,Ce=function qe(){for(;++Ne<me.length;)if(n.call(me,Ne))return qe.value=me[Ne],qe.done=!1,qe;return qe.value=t,qe.done=!0,qe};return Ce.next=Ce}}throw new TypeError(bn(me)+" is not iterable")}return P.prototype=N,d(U,"constructor",N),d(N,"constructor",P),P.displayName=d(N,f,"GeneratorFunction"),e.isGeneratorFunction=function(me){var be=typeof me=="function"&&me.constructor;return!!be&&(be===P||(be.displayName||be.name)==="GeneratorFunction")},e.mark=function(me){return Object.setPrototypeOf?Object.setPrototypeOf(me,N):(me.__proto__=N,d(me,f,"GeneratorFunction")),me.prototype=Object.create(U),me},e.awrap=function(me){return{__await:me}},$(Z.prototype),d(Z.prototype,l,function(){return this}),e.AsyncIterator=Z,e.async=function(me,be,Ne,Ce,qe){qe===void 0&&(qe=Promise);var He=new Z(v(me,be,Ne,Ce),qe);return e.isGeneratorFunction(be)?He:He.next().then(function(Ke){return Ke.done?Ke.value:He.next()})},$(U),d(U,f,"Generator"),d(U,o,function(){return this}),d(U,"toString",function(){return"[object Generator]"}),e.keys=function(me){var be=Object(me),Ne=[];for(var Ce in be)Ne.unshift(Ce);return function qe(){for(;Ne.length;)if((Ce=Ne.pop())in be)return qe.value=Ce,qe.done=!1,qe;return qe.done=!0,qe}},e.values=ye,de.prototype={constructor:de,reset:function(be){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(ae),!be)for(var Ne in this)Ne.charAt(0)==="t"&&n.call(this,Ne)&&!isNaN(+Ne.slice(1))&&(this[Ne]=t)},stop:function(){this.done=!0;var be=this.tryEntries[0][4];if(be.type==="throw")throw be.arg;return this.rval},dispatchException:function(be){if(this.done)throw be;var Ne=this;function Ce(pt){Ke.type="throw",Ke.arg=be,Ne.next=pt}for(var qe=Ne.tryEntries.length-1;qe>=0;--qe){var He=this.tryEntries[qe],Ke=He[4],Je=this.prev,We=He[1],lt=He[2];if(He[0]===-1)return Ce("end"),!1;if(!We&&!lt)throw Error("try statement without catch or finally");if(He[0]!=null&&He[0]<=Je){if(Je<We)return this.method="next",this.arg=t,Ce(We),!0;if(Je<lt)return Ce(lt),!1}}},abrupt:function(be,Ne){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var qe=this.tryEntries[Ce];if(qe[0]>-1&&qe[0]<=this.prev&&this.prev<qe[2]){var He=qe;break}}He&&(be==="break"||be==="continue")&&He[0]<=Ne&&Ne<=He[2]&&(He=null);var Ke=He?He[4]:{};return Ke.type=be,Ke.arg=Ne,He?(this.method="next",this.next=He[2],b):this.complete(Ke)},complete:function(be,Ne){if(be.type==="throw")throw be.arg;return be.type==="break"||be.type==="continue"?this.next=be.arg:be.type==="return"?(this.rval=this.arg=be.arg,this.method="return",this.next="end"):be.type==="normal"&&Ne&&(this.next=Ne),b},finish:function(be){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Ce=this.tryEntries[Ne];if(Ce[2]===be)return this.complete(Ce[4],Ce[3]),ae(Ce),b}},catch:function(be){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Ce=this.tryEntries[Ne];if(Ce[0]===be){var qe=Ce[4];if(qe.type==="throw"){var He=qe.arg;ae(Ce)}return He}}throw Error("illegal catch attempt")},delegateYield:function(be,Ne,Ce){return this.delegate={i:ye(be),r:Ne,n:Ce},this.method==="next"&&(this.arg=t),b}},e}p();function z5e(t,e,r,n,i,o,l){try{var f=t[o](l),d=f.value}catch(v){return void r(v)}f.done?e(d):Promise.resolve(d).then(n,i)}function U5e(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function l(d){z5e(o,n,i,l,f,"next",d)}function f(d){z5e(o,n,i,l,f,"throw",d)}l(void 0)})}}var Jx=je(St());var B5e=["measure","alignPre","align",null,"motion"],V5e=function(t,e){var r=tp(null),n=wn(r,2),i=n[0],o=n[1],l=(0,Jx.useRef)();function f(x){o(x,!0)}function d(){nl.cancel(l.current)}function v(x){d(),l.current=nl(function(){f(function(b){switch(i){case"align":return"motion";case"motion":return"stable";default:}return b}),x==null||x()})}return(0,Jx.useEffect)(function(){f("measure")},[t]),(0,Jx.useEffect)(function(){switch(i){case"measure":e();break;default:}i&&(l.current=nl(U5e(hq().mark(function x(){var b,A;return hq().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:b=B5e.indexOf(i),A=B5e[b+1],A&&b!==-1&&f(A);case 3:case"end":return N.stop()}},x)}))))},[i]),(0,Jx.useEffect)(function(){return function(){d()}},[]),[i,v]};p();var pq=je(St()),G5e=function(t){var e=pq.useState({width:0,height:0}),r=wn(e,2),n=r[0],i=r[1];function o(f){var d=f.offsetWidth,v=f.offsetHeight,x=f.getBoundingClientRect(),b=x.width,A=x.height;Math.abs(d-b)<1&&Math.abs(v-A)<1&&(d=b,v=A),i({width:d,height:v})}var l=pq.useMemo(function(){var f={};if(t){var d=n.width,v=n.height;t.indexOf("height")!==-1&&v?f.height=v:t.indexOf("minHeight")!==-1&&v&&(f.minHeight=v),t.indexOf("width")!==-1&&d?f.width=d:t.indexOf("minWidth")!==-1&&d&&(f.minWidth=d)}return f},[t,n]);return[l,o]};var H5e=kl.forwardRef(function(t,e){var r=t.visible,n=t.prefixCls,i=t.className,o=t.style,l=t.children,f=t.zIndex,d=t.stretch,v=t.destroyPopupOnHide,x=t.forceRender,b=t.align,A=t.point,P=t.getRootDomNode,N=t.getClassNameFromAlign,j=t.onAlign,D=t.onMouseEnter,F=t.onMouseLeave,U=t.onMouseDown,$=t.onTouchStart,Z=t.onClick,ie=(0,wv.useRef)(),ne=(0,wv.useRef)(),ae=(0,wv.useState)(),de=wn(ae,2),ye=de[0],me=de[1],be=G5e(d),Ne=wn(be,2),Ce=Ne[0],qe=Ne[1];function He(){d&&qe(P())}var Ke=V5e(r,He),Je=wn(Ke,2),We=Je[0],lt=Je[1],pt=(0,wv.useState)(0),dt=wn(pt,2),ze=dt[0],Dt=dt[1],Ot=(0,wv.useRef)();PI(function(){We==="alignPre"&&Dt(0)},[We]);function Ue(){return A||P}function nt(){var Pt;(Pt=ie.current)===null||Pt===void 0||Pt.forceAlign()}function Ze(Pt,$t){var Xt=N($t);ye!==Xt&&me(Xt),Dt(function(Gt){return Gt+1}),We==="align"&&(j==null||j(Pt,$t))}PI(function(){We==="align"&&(ze<3?nt():lt(function(){var Pt;(Pt=Ot.current)===null||Pt===void 0||Pt.call(Ot)}))},[ze]);var rt=Nt({},tq(t));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Pt){var $t=rt[Pt];rt[Pt]=function(Xt,Gt){return lt(),$t==null?void 0:$t(Xt,Gt)}});function at(){return new Promise(function(Pt){Ot.current=Pt})}kl.useEffect(function(){!rt.motionName&&We==="motion"&&lt()},[rt.motionName,We]),kl.useImperativeHandle(e,function(){return{forceAlign:nt,getElement:function(){return ne.current}}});var ot=Nt(Nt({},Ce),{},{zIndex:f,opacity:We==="motion"||We==="stable"||!r?void 0:0,pointerEvents:!r&&We!=="stable"?"none":void 0},o),Lt=!0;b!=null&&b.points&&(We==="align"||We==="stable")&&(Lt=!1);var zt=l;return kl.Children.count(l)>1&&(zt=kl.createElement("div",{className:"".concat(n,"-content")},l)),kl.createElement(Kx,mn({visible:r,ref:ne,leavedClassName:"".concat(n,"-hidden")},rt,{onAppearPrepare:at,onEnterPrepare:at,removeOnLeave:v,forceRender:x}),function(Pt,$t){var Xt=Pt.className,Gt=Pt.style,Sr=(0,$5e.default)(n,i,ye,Xt);return kl.createElement(j5e,{target:Ue(),key:"popup",ref:ie,monitorWindowResize:!0,disabled:Lt,align:b,onAlign:Ze},kl.createElement("div",{ref:$t,className:Sr,onMouseEnter:D,onMouseLeave:F,onMouseDownCapture:U,onTouchStartCapture:$,onClick:Z,style:Nt(Nt({},Gt),ot)},zt))})});H5e.displayName="PopupInner";var W5e=H5e;p();var Ou=je(St());var Z5e=je(Ei()),Y5e=Ou.forwardRef(function(t,e){var r=t.prefixCls,n=t.visible,i=t.zIndex,o=t.children,l=t.mobile;l=l===void 0?{}:l;var f=l.popupClassName,d=l.popupStyle,v=l.popupMotion,x=v===void 0?{}:v,b=l.popupRender,A=t.onClick,P=Ou.useRef();Ou.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return P.current}}});var N=Nt({zIndex:i},d),j=o;return Ou.Children.count(o)>1&&(j=Ou.createElement("div",{className:"".concat(r,"-content")},o)),b&&(j=b(j)),Ou.createElement(Kx,mn({visible:n,ref:P,removeOnLeave:!0},x),function(D,F){var U=D.className,$=D.style,Z=(0,Z5e.default)(r,f,U);return Ou.createElement("div",{ref:F,className:Z,onClick:A,style:Nt(Nt({},$),N)},j)})});Y5e.displayName="MobilePopupInner";var K5e=Y5e;var Rur=["visible","mobile"],X5e=Ev.forwardRef(function(t,e){var r=t.visible,n=t.mobile,i=_s(t,Rur),o=(0,FI.useState)(r),l=wn(o,2),f=l[0],d=l[1],v=(0,FI.useState)(!1),x=wn(v,2),b=x[0],A=x[1],P=Nt(Nt({},i),{},{visible:f});(0,FI.useEffect)(function(){d(r),r&&n&&A(L3e())},[r,n]);var N=b?Ev.createElement(K5e,mn({},P,{mobile:n,ref:e})):Ev.createElement(W5e,mn({},P,{ref:e}));return Ev.createElement("div",null,Ev.createElement(e7,P),N)});X5e.displayName="Popup";var Q5e=X5e;p();var J5e=je(St()),Our=J5e.createContext(null),g7=Our;function v7(){}function Lur(){return""}function Dur(t){return t?t.ownerDocument:window.document}var Nur=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function kur(t){var e=function(r){Xa(i,r);var n=Qa(i);function i(o){var l;Ya(this,i),l=n.call(this,o),Et(Wr(l),"popupRef",ql.createRef()),Et(Wr(l),"triggerRef",ql.createRef()),Et(Wr(l),"portalContainer",void 0),Et(Wr(l),"attachId",void 0),Et(Wr(l),"clickOutsideHandler",void 0),Et(Wr(l),"touchOutsideHandler",void 0),Et(Wr(l),"contextMenuOutsideHandler1",void 0),Et(Wr(l),"contextMenuOutsideHandler2",void 0),Et(Wr(l),"mouseDownTimeout",void 0),Et(Wr(l),"focusTime",void 0),Et(Wr(l),"preClickTime",void 0),Et(Wr(l),"preTouchTime",void 0),Et(Wr(l),"delayTimer",void 0),Et(Wr(l),"hasPopupMouseDown",void 0),Et(Wr(l),"onMouseEnter",function(d){var v=l.props.mouseEnterDelay;l.fireEvents("onMouseEnter",d),l.delaySetPopupVisible(!0,v,v?null:d)}),Et(Wr(l),"onMouseMove",function(d){l.fireEvents("onMouseMove",d),l.setPoint(d)}),Et(Wr(l),"onMouseLeave",function(d){l.fireEvents("onMouseLeave",d),l.delaySetPopupVisible(!1,l.props.mouseLeaveDelay)}),Et(Wr(l),"onPopupMouseEnter",function(){l.clearDelayTimer()}),Et(Wr(l),"onPopupMouseLeave",function(d){var v;d.relatedTarget&&!d.relatedTarget.setTimeout&&_v((v=l.popupRef.current)===null||v===void 0?void 0:v.getElement(),d.relatedTarget)||l.delaySetPopupVisible(!1,l.props.mouseLeaveDelay)}),Et(Wr(l),"onFocus",function(d){l.fireEvents("onFocus",d),l.clearDelayTimer(),l.isFocusToShow()&&(l.focusTime=Date.now(),l.delaySetPopupVisible(!0,l.props.focusDelay))}),Et(Wr(l),"onMouseDown",function(d){l.fireEvents("onMouseDown",d),l.preClickTime=Date.now()}),Et(Wr(l),"onTouchStart",function(d){l.fireEvents("onTouchStart",d),l.preTouchTime=Date.now()}),Et(Wr(l),"onBlur",function(d){l.fireEvents("onBlur",d),l.clearDelayTimer(),l.isBlurToHide()&&l.delaySetPopupVisible(!1,l.props.blurDelay)}),Et(Wr(l),"onContextMenu",function(d){d.preventDefault(),l.fireEvents("onContextMenu",d),l.setPopupVisible(!0,d)}),Et(Wr(l),"onContextMenuClose",function(){l.isContextMenuToShow()&&l.close()}),Et(Wr(l),"onClick",function(d){if(l.fireEvents("onClick",d),l.focusTime){var v;if(l.preClickTime&&l.preTouchTime?v=Math.min(l.preClickTime,l.preTouchTime):l.preClickTime?v=l.preClickTime:l.preTouchTime&&(v=l.preTouchTime),Math.abs(v-l.focusTime)<20)return;l.focusTime=0}l.preClickTime=0,l.preTouchTime=0,l.isClickToShow()&&(l.isClickToHide()||l.isBlurToHide())&&d&&d.preventDefault&&d.preventDefault();var x=!l.state.popupVisible;(l.isClickToHide()&&!x||x&&l.isClickToShow())&&l.setPopupVisible(!l.state.popupVisible,d)}),Et(Wr(l),"onPopupMouseDown",function(){if(l.hasPopupMouseDown=!0,clearTimeout(l.mouseDownTimeout),l.mouseDownTimeout=window.setTimeout(function(){l.hasPopupMouseDown=!1},0),l.context){var d;(d=l.context).onPopupMouseDown.apply(d,arguments)}}),Et(Wr(l),"onDocumentClick",function(d){if(!(l.props.mask&&!l.props.maskClosable)){var v=d.target,x=l.getRootDomNode(),b=l.getPopupDomNode();(!_v(x,v)||l.isContextMenuOnly())&&!_v(b,v)&&!l.hasPopupMouseDown&&l.close()}}),Et(Wr(l),"getRootDomNode",function(){var d=l.props.getTriggerDOMNode;if(d)return d(l.triggerRef.current);try{var v=AI(l.triggerRef.current);if(v)return v}catch(x){}return eVe.default.findDOMNode(Wr(l))}),Et(Wr(l),"getPopupClassNameFromAlign",function(d){var v=[],x=l.props,b=x.popupPlacement,A=x.builtinPlacements,P=x.prefixCls,N=x.alignPoint,j=x.getPopupClassNameFromAlign;return b&&A&&v.push(R3e(A,P,d,N)),j&&v.push(j(d)),v.join(" ")}),Et(Wr(l),"getComponent",function(){var d=l.props,v=d.prefixCls,x=d.destroyPopupOnHide,b=d.popupClassName,A=d.onPopupAlign,P=d.popupMotion,N=d.popupAnimation,j=d.popupTransitionName,D=d.popupStyle,F=d.mask,U=d.maskAnimation,$=d.maskTransitionName,Z=d.maskMotion,ie=d.zIndex,ne=d.popup,ae=d.stretch,de=d.alignPoint,ye=d.mobile,me=d.forceRender,be=d.onPopupClick,Ne=l.state,Ce=Ne.popupVisible,qe=Ne.point,He=l.getPopupAlign(),Ke={};return l.isMouseEnterToShow()&&(Ke.onMouseEnter=l.onPopupMouseEnter),l.isMouseLeaveToHide()&&(Ke.onMouseLeave=l.onPopupMouseLeave),Ke.onMouseDown=l.onPopupMouseDown,Ke.onTouchStart=l.onPopupMouseDown,ql.createElement(Q5e,mn({prefixCls:v,destroyPopupOnHide:x,visible:Ce,point:de&&qe,className:b,align:He,onAlign:A,animation:N,getClassNameFromAlign:l.getPopupClassNameFromAlign},Ke,{stretch:ae,getRootDomNode:l.getRootDomNode,style:D,mask:F,zIndex:ie,transitionName:j,maskAnimation:U,maskTransitionName:$,maskMotion:Z,ref:l.popupRef,motion:P,mobile:ye,forceRender:me,onClick:be}),typeof ne=="function"?ne():ne)}),Et(Wr(l),"attachParent",function(d){nl.cancel(l.attachId);var v=l.props,x=v.getPopupContainer,b=v.getDocument,A=l.getRootDomNode(),P;x?(A||x.length===0)&&(P=x(A)):P=b(l.getRootDomNode()).body,P?P.appendChild(d):l.attachId=nl(function(){l.attachParent(d)})}),Et(Wr(l),"getContainer",function(){if(!l.portalContainer){var d=l.props.getDocument,v=d(l.getRootDomNode()).createElement("div");v.style.position="absolute",v.style.top="0",v.style.left="0",v.style.width="100%",l.portalContainer=v}return l.attachParent(l.portalContainer),l.portalContainer}),Et(Wr(l),"setPoint",function(d){var v=l.props.alignPoint;!v||!d||l.setState({point:{pageX:d.pageX,pageY:d.pageY}})}),Et(Wr(l),"handlePortalUpdate",function(){l.state.prevPopupVisible!==l.state.popupVisible&&l.props.afterPopupVisibleChange(l.state.popupVisible)}),Et(Wr(l),"triggerContextValue",{onPopupMouseDown:l.onPopupMouseDown});var f;return"popupVisible"in o?f=!!o.popupVisible:f=!!o.defaultPopupVisible,l.state={prevPopupVisible:f,popupVisible:f},Nur.forEach(function(d){l["fire".concat(d)]=function(v){l.fireEvents(d,v)}}),l}return Ka(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var l=this.props,f=this.state;if(f.popupVisible){var d;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(d=l.getDocument(this.getRootDomNode()),this.clickOutsideHandler=xs(d,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(d=d||l.getDocument(this.getRootDomNode()),this.touchOutsideHandler=xs(d,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(d=d||l.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=xs(d,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=xs(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),nl.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var l;return((l=this.popupRef.current)===null||l===void 0?void 0:l.getElement())||null}},{key:"getPopupAlign",value:function(){var l=this.props,f=l.popupPlacement,d=l.popupAlign,v=l.builtinPlacements;return f&&v?P3e(v,f,d):d}},{key:"setPopupVisible",value:function(l,f){var d=this.props.alignPoint,v=this.state.popupVisible;this.clearDelayTimer(),v!==l&&("popupVisible"in this.props||this.setState({popupVisible:l,prevPopupVisible:v}),this.props.onPopupVisibleChange(l)),d&&f&&l&&this.setPoint(f)}},{key:"delaySetPopupVisible",value:function(l,f,d){var v=this,x=f*1e3;if(this.clearDelayTimer(),x){var b=d?{pageX:d.pageX,pageY:d.pageY}:null;this.delayTimer=window.setTimeout(function(){v.setPopupVisible(l,b),v.clearDelayTimer()},x)}else this.setPopupVisible(l,d)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(l){var f=this.props.children.props,d=this.props;return f[l]&&d[l]?this["fire".concat(l)]:f[l]||d[l]}},{key:"isClickToShow",value:function(){var l=this.props,f=l.action,d=l.showAction;return f.indexOf("click")!==-1||d.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var l=this.props.action;return l==="contextMenu"||l.length===1&&l[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var l=this.props,f=l.action,d=l.showAction;return f.indexOf("contextMenu")!==-1||d.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var l=this.props,f=l.action,d=l.hideAction;return f.indexOf("click")!==-1||d.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var l=this.props,f=l.action,d=l.showAction;return f.indexOf("hover")!==-1||d.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var l=this.props,f=l.action,d=l.hideAction;return f.indexOf("hover")!==-1||d.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var l=this.props,f=l.action,d=l.showAction;return f.indexOf("focus")!==-1||d.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var l=this.props,f=l.action,d=l.hideAction;return f.indexOf("focus")!==-1||d.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var l;(l=this.popupRef.current)===null||l===void 0||l.forceAlign()}}},{key:"fireEvents",value:function(l,f){var d=this.props.children.props[l];d&&d(f);var v=this.props[l];v&&v(f)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var l=this.state.popupVisible,f=this.props,d=f.children,v=f.forceRender,x=f.alignPoint,b=f.className,A=f.autoDestroy,P=ql.Children.only(d),N={key:"trigger"};this.isContextMenuToShow()?N.onContextMenu=this.onContextMenu:N.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(N.onClick=this.onClick,N.onMouseDown=this.onMouseDown,N.onTouchStart=this.onTouchStart):(N.onClick=this.createTwoChains("onClick"),N.onMouseDown=this.createTwoChains("onMouseDown"),N.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(N.onMouseEnter=this.onMouseEnter,x&&(N.onMouseMove=this.onMouseMove)):N.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?N.onMouseLeave=this.onMouseLeave:N.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(N.onFocus=this.onFocus,N.onBlur=this.onBlur):(N.onFocus=this.createTwoChains("onFocus"),N.onBlur=this.createTwoChains("onBlur"));var j=(0,tVe.default)(P&&P.props&&P.props.className,b);j&&(N.className=j);var D=Nt({},N);CI(P)&&(D.ref=Wx(this.triggerRef,P.ref));var F=ql.cloneElement(P,D),U;return(l||this.popupRef.current||v)&&(U=ql.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!l&&A&&(U=null),ql.createElement(g7.Provider,{value:this.triggerContextValue},F,U)}}],[{key:"getDerivedStateFromProps",value:function(l,f){var d=l.popupVisible,v={};return d!==void 0&&f.popupVisible!==d&&(v.popupVisible=d,v.prevPopupVisible=f.popupVisible),v}}]),i}(ql.Component);return Et(e,"contextType",g7),Et(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Lur,getDocument:Dur,onPopupVisibleChange:v7,afterPopupVisibleChange:v7,onPopupAlign:v7,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}var rVe=kur(C3e);p();var Lu={adjustX:1,adjustY:1},Du=[0,0],nVe={left:{points:["cr","cl"],overflow:Lu,offset:[-4,0],targetOffset:Du},right:{points:["cl","cr"],overflow:Lu,offset:[4,0],targetOffset:Du},top:{points:["bc","tc"],overflow:Lu,offset:[0,-4],targetOffset:Du},bottom:{points:["tc","bc"],overflow:Lu,offset:[0,4],targetOffset:Du},topLeft:{points:["bl","tl"],overflow:Lu,offset:[0,-4],targetOffset:Du},leftTop:{points:["tr","tl"],overflow:Lu,offset:[-4,0],targetOffset:Du},topRight:{points:["br","tr"],overflow:Lu,offset:[0,-4],targetOffset:Du},rightTop:{points:["tl","tr"],overflow:Lu,offset:[4,0],targetOffset:Du},bottomRight:{points:["tr","br"],overflow:Lu,offset:[0,4],targetOffset:Du},rightBottom:{points:["bl","br"],overflow:Lu,offset:[4,0],targetOffset:Du},bottomLeft:{points:["tl","bl"],overflow:Lu,offset:[0,4],targetOffset:Du},leftBottom:{points:["br","bl"],overflow:Lu,offset:[-4,0],targetOffset:Du}};p();var dq=je(St()),iVe=je(Ei());function mq(t){var e=t.showArrow,r=t.arrowContent,n=t.children,i=t.prefixCls,o=t.id,l=t.overlayInnerStyle,f=t.className,d=t.style;return dq.createElement("div",{className:(0,iVe.default)("".concat(i,"-content"),f),style:d},e!==!1&&dq.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},r),dq.createElement("div",{className:"".concat(i,"-inner"),id:o,role:"tooltip",style:l},typeof n=="function"?n():n))}var qur=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Fur=function(e,r){var n=e.overlayClassName,i=e.trigger,o=i===void 0?["hover"]:i,l=e.mouseEnterDelay,f=l===void 0?0:l,d=e.mouseLeaveDelay,v=d===void 0?.1:d,x=e.overlayStyle,b=e.prefixCls,A=b===void 0?"rc-tooltip":b,P=e.children,N=e.onVisibleChange,j=e.afterVisibleChange,D=e.transitionName,F=e.animation,U=e.motion,$=e.placement,Z=$===void 0?"right":$,ie=e.align,ne=ie===void 0?{}:ie,ae=e.destroyTooltipOnHide,de=ae===void 0?!1:ae,ye=e.defaultVisible,me=e.getTooltipContainer,be=e.overlayInnerStyle,Ne=e.arrowContent,Ce=e.overlay,qe=e.id,He=e.showArrow,Ke=He===void 0?!0:He,Je=_s(e,qur),We=(0,eb.useRef)(null);(0,eb.useImperativeHandle)(r,function(){return We.current});var lt=Nt({},Je);"visible"in e&&(lt.popupVisible=e.visible);var pt=function(){return y7.createElement(mq,{showArrow:Ke,arrowContent:Ne,key:"content",prefixCls:A,id:qe,overlayInnerStyle:be},Ce)},dt=!1,ze=!1;if(typeof de=="boolean")dt=de;else if(de&&bn(de)==="object"){var Dt=de.keepParent;dt=Dt===!0,ze=Dt===!1}return y7.createElement(rVe,mn({popupClassName:n,prefixCls:A,popup:pt,action:o,builtinPlacements:nVe,popupPlacement:Z,ref:We,popupAlign:ne,getPopupContainer:me,onPopupVisibleChange:N,afterPopupVisibleChange:j,popupTransitionName:D,popupAnimation:F,popupMotion:U,defaultPopupVisible:ye,destroyPopupOnHide:dt,autoDestroy:ze,mouseLeaveDelay:v,popupStyle:x,mouseEnterDelay:f},lt),P)},oVe=(0,eb.forwardRef)(Fur);var aVe=oVe;var jur=ip.forwardRef(function(t,e){var r=t.visible,n=t.overlay,i=ip.useRef(null),o=Wx(e,i),l=ip.useRef(null);function f(){nl.cancel(l.current)}function d(){l.current=nl(function(){var v;(v=i.current)===null||v===void 0||v.forcePopupAlign()})}return ip.useEffect(function(){return r?d():f(),f},[r,n]),ip.createElement(aVe,mn({ref:o},t))}),_7=jur;function x7(t){var e;return e=function(r){Xa(i,r);var n=Qa(i);function i(){var o;return Ya(this,i),o=n.apply(this,arguments),o.state={visibles:{}},o.handleTooltipVisibleChange=function(l,f){o.setState(function(d){return{visibles:Nt(Nt({},d.visibles),{},Et({},l,f))}})},o.handleWithTooltip=function(l){var f=l.value,d=l.dragging,v=l.index,x=l.disabled,b=_s(l,["value","dragging","index","disabled"]),A=o.props,P=A.tipFormatter,N=A.tipProps,j=A.handleStyle,D=A.getTooltipContainer,F=N.prefixCls,U=F===void 0?"rc-slider-tooltip":F,$=N.overlay,Z=$===void 0?P(f):$,ie=N.placement,ne=ie===void 0?"top":ie,ae=N.visible,de=ae===void 0?!1:ae,ye=_s(N,["prefixCls","overlay","placement","visible"]),me;return Array.isArray(j)?me=j[v]||j[0]:me=j,jI.default.createElement(_7,mn({},ye,{getTooltipContainer:D,prefixCls:U,overlay:Z,placement:ne,visible:!x&&(o.state.visibles[v]||d)||de,key:v}),jI.default.createElement($x,mn({},b,{style:Nt({},me),value:f,onMouseEnter:function(){return o.handleTooltipVisibleChange(v,!0)},onMouseLeave:function(){return o.handleTooltipVisibleChange(v,!1)}})))},o}return Ka(i,[{key:"render",value:function(){return jI.default.createElement(t,mn({},this.props,{handle:this.handleWithTooltip}))}}]),i}(jI.default.Component),e.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},e}var gq=p3e;gq.Range=d3e;gq.Handle=$x;gq.createSliderWithTooltip=x7;var vq=gq;var zI={brightness:0,contrast:0,saturation:0},yq=t=>{let{max:e=1,min:r=0,onChange:n=()=>console.warn("onChange is not implemented."),step:i=.01,type:o="",value:l=.5,tooltip:f}=t,d=v=>{n(o,v)};return al.default.createElement("div",{className:"filter-slider",title:f},al.default.createElement("span",{className:Hs("slider-icon",o),title:f}),al.default.createElement("div",null,al.default.createElement(vq,{title:f,ariaLabelForHandle:f,max:e,min:r,onChange:d,step:i,value:l})),al.default.createElement("span",{className:"slider-tooltip",title:f},l))};yq.propTypes={max:op.default.number,min:op.default.number,onChange:op.default.func,step:op.default.number,tooltip:op.default.string,type:op.default.string,value:op.default.number};var lVe=t=>{let{layer:e}=t,[r,n]=(0,al.useState)(mt({},zI)),i=(l,f)=>{let d=Object.assign({},r,{[l]:f});n(d),e.updateStyleVariables(d)},o=()=>{n(mt({},zI)),e.updateStyleVariables(mt({},zI))};return al.default.createElement("div",null,al.default.createElement(yq,{max:1,min:-1,onChange:i,step:.01,type:"contrast",value:r.contrast,tooltip:kr("control-imagemanipulation-contrast")}),al.default.createElement(yq,{max:1,min:-1,onChange:i,step:.01,type:"saturation",value:r.saturation,tooltip:kr("control-imagemanipulation-saturation")}),al.default.createElement(yq,{max:1,min:-1,onChange:i,step:.01,type:"brightness",value:r.brightness,tooltip:kr("control-imagemanipulation-brightness")}),al.default.createElement("button",{className:"btn-reset",title:kr("control-imagemanipulation-reset"),onClick:o},kr("control-imagemanipulation-reset")))};lVe.propTypes={layer:op.default.object};var b7=class extends ys{constructor(e){let r="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=r;let i=document.createElement("button");i.title=kr("control-imagemanipulation-open"),i.innerHTML="I",i.type="button",n.appendChild(i);let o=document.createElement("div");o.className="content-container",o.style.display="none",n.appendChild(o);let l=()=>{let f=o.style.display==="block";n.className=f?r:`${r} active`,o.style.display=f?"none":"block"};sVe.default.render(al.default.createElement(lVe,{layer:e.layer}),o),i.addEventListener("click",l,!1),i.addEventListener("touchstart",l,!1),super({element:n,target:e.target})}},uVe=b7;function zur(t){return zn(this,null,function*(){try{let e=yield hf.get(t);if(e.status===200){let n=new DOMParser().parseFromString(e.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:t.substring(0,t.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(e){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(e)}})}var cVe=t=>{let{className:e="",onLoad:r,urlImageProperties:n,withImageManipulation:i=!1}=t,o=(0,tb.useRef)(null);return(0,tb.useEffect)(()=>{zn(null,null,function*(){let d=yield zur(n),v=new ZBe({url:d.url,size:[d.width,d.height],crossOrigin:"anonymous",zDirection:-1}),x=v.getTileGrid().getExtent(),b=new FBe({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:mt({},zI)},source:v}),A=new Cu({resolutions:b.getSource().getTileGrid().getResolutions(),extent:x,constrainOnlyCenter:!0}),P=new Dx({controls:[new rk({tipLabel:kr("control-fullscreen-title")}),new Lx({zoomInTipLabel:kr("control-zoom-in"),zoomOutTipLabel:kr("control-zoom-in")})],interactions:Ox().extend([new Px]),layers:[b],target:o.current,view:A});A.fit(x,{padding:[50,50,50,50]});let N=P.getSize();P.addControl(new ik({tipLabel:kr("control-zoomtoextent-title"),extent:A.calculateExtent([N[0]+50,N[1]+50])})),i&&P.addControl(new uVe({layer:b})),r&&r({layer:b,map:P,source:v,zoomifyProps:d})})},[n]),tb.default.createElement("div",{className:Hs("vk-mapview-zoomify",e),ref:o})};cVe.propTypes={className:UI.default.string,onLoad:UI.default.func,urlImageProperties:UI.default.string.isRequired,withImageManipulation:UI.default.bool};var fVe=cVe;var hVe=fVe;var Uur=()=>{let t=Gs(i2),e=pu(a2),r=n=>{e(n)};return w7.default.createElement("div",{className:"vkf-mapview-source"},t!==null&&w7.default.createElement(hVe,{urlImageProperties:t.zoomify_url,onLoad:r}))},pVe=Uur;p();var kf=je(St(),1);var ab=je(ln(),1);p();p();var rb=je(St(),1),Ac=je(ln(),1);p();p();var Bur=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vur=function(t){Bur(e,t);function e(r){var n=t.call(this,r)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=Bi(),n.tmpTileRange_=new Nx(0,0,0,0),n}return e.prototype.isDrawableTile=function(r){var n=this.getLayer(),i=r.getState(),o=n.getUseInterimTilesOnError();return i==Ht.LOADED||i==Ht.EMPTY||i==Ht.ERROR&&!o},e.prototype.getTile=function(r,n,i,o){var l=o.pixelRatio,f=o.viewState.projection,d=this.getLayer(),v=d.getSource(),x=v.getTile(r,n,i,l,f);return x.getState()==Ht.ERROR&&(d.getUseInterimTilesOnError()?d.getPreload()>0&&(this.newTiles_=!0):x.setState(Ht.LOADED)),this.isDrawableTile(x)||(x=x.getInterimTile()),x},e.prototype.getData=function(r){var n=this.frameState;if(!n)return null;var i=this.getLayer(),o=$n(n.pixelToCoordinateTransform,r.slice()),l=i.getExtent();if(l&&!ms(l,o))return null;for(var f=n.pixelRatio,d=n.viewState.projection,v=n.viewState,x=i.getRenderSource(),b=x.getTileGridForProjection(v.projection),A=x.getTilePixelRatio(n.pixelRatio),P=b.getZForResolution(v.resolution);P>=b.getMinZoom();--P){var N=b.getTileCoordForCoordAndZ(o,P),j=x.getTile(P,N[1],N[2],f,d);if(!(j instanceof Qh||j instanceof qx))return null;if(j.getState()===Ht.LOADED){var D=b.getOrigin(P),F=Kn(b.getTileSize(P)),U=b.getResolution(P),$=Math.floor(A*((o[0]-D[0])/U-N[1]*F[0])),Z=Math.floor(A*((D[1]-o[1])/U-N[2]*F[1])),ie=Math.round(A*x.getGutterForProjection(v.projection));return this.getImageData(j.getImage(),$+ie,Z+ie)}}return null},e.prototype.loadedTileCallback=function(r,n,i){return this.isDrawableTile(i)?t.prototype.loadedTileCallback.call(this,r,n,i):!1},e.prototype.prepareFrame=function(r){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(r,n){var i=r.layerStatesArray[r.layerIndex],o=r.viewState,l=o.projection,f=o.resolution,d=o.center,v=o.rotation,x=r.pixelRatio,b=this.getLayer(),A=b.getSource(),P=A.getRevision(),N=A.getTileGridForProjection(l),j=N.getZForResolution(f,A.zDirection),D=N.getResolution(j),F=r.extent,U=r.viewState.resolution,$=A.getTilePixelRatio(x),Z=Math.round(gn(F)/U*x),ie=Math.round(zo(F)/U*x),ne=i.extent&&$a(i.extent,l);ne&&(F=vu(F,$a(i.extent,l)));var ae=D*Z/2/$,de=D*ie/2/$,ye=[d[0]-ae,d[1]-de,d[0]+ae,d[1]+de],me=N.getTileRangeForExtentAndZ(F,j),be={};be[j]={};var Ne=this.createLoadedTileFinder(A,l,be),Ce=this.tmpExtent,qe=this.tmpTileRange_;this.newTiles_=!1;for(var He=v?cN(o.center,U,v,r.size):void 0,Ke=me.minX;Ke<=me.maxX;++Ke)for(var Je=me.minY;Je<=me.maxY;++Je)if(!(v&&!N.tileCoordIntersectsViewport([j,Ke,Je],He))){var We=this.getTile(j,Ke,Je,r);if(this.isDrawableTile(We)){var lt=tr(this);if(We.getState()==Ht.LOADED){be[j][We.tileCoord.toString()]=We;var pt=We.inTransition(lt);pt&&i.opacity!==1&&(We.endTransition(lt),pt=!1),!this.newTiles_&&(pt||this.renderedTiles.indexOf(We)===-1)&&(this.newTiles_=!0)}if(We.getAlpha(lt,r.time)===1)continue}var dt=N.getTileCoordChildTileRange(We.tileCoord,qe,Ce),ze=!1;dt&&(ze=Ne(j+1,dt)),ze||N.forEachTileCoordParentTileRange(We.tileCoord,Ne,qe,Ce)}var Dt=D/f*x/$;To(this.pixelTransform,r.size[0]/2,r.size[1]/2,1/x,1/x,v,-Z/2,-ie/2);var Ot=oN(this.pixelTransform);this.useContainer(n,Ot,this.getBackground(r));var Ue=this.context,nt=Ue.canvas;nx(this.inversePixelTransform,this.pixelTransform),To(this.tempTransform,Z/2,ie/2,Dt,Dt,0,-Z/2,-ie/2),nt.width!=Z||nt.height!=ie?(nt.width=Z,nt.height=ie):this.containerReused||Ue.clearRect(0,0,Z,ie),ne&&this.clipUnrotated(Ue,r,ne),A.getInterpolate()||Xr(Ue,mI),this.preRender(Ue,r),this.renderedTiles.length=0;var Ze=Object.keys(be).map(Number);Ze.sort(Pl);var rt,at,ot;i.opacity===1&&(!this.containerReused||A.getOpaque(r.viewState.projection))?Ze=Ze.reverse():(rt=[],at=[]);for(var Lt=Ze.length-1;Lt>=0;--Lt){var zt=Ze[Lt],Pt=A.getTilePixelSize(zt,x,l),$t=N.getResolution(zt),Xt=$t/D,Gt=Pt[0]*Xt*Dt,Sr=Pt[1]*Xt*Dt,zr=N.getTileCoordForCoordAndZ(yu(ye),zt),vr=N.getTileCoordExtent(zr),pr=$n(this.tempTransform,[$*(vr[0]-ye[0])/D,$*(ye[3]-vr[3])/D]),dr=$*A.getGutterForProjection(l),br=be[zt];for(var un in br){var We=br[un],En=We.tileCoord,Rn=zr[1]-En[1],gi=Math.round(pr[0]-(Rn-1)*Gt),De=zr[2]-En[2],J=Math.round(pr[1]-(De-1)*Sr),Ke=Math.round(pr[0]-Rn*Gt),Je=Math.round(pr[1]-De*Sr),te=gi-Ke,se=J-Je,_e=j===zt,pt=_e&&We.getAlpha(tr(this),r.time)!==1,Ae=!1;if(!pt)if(rt){ot=[Ke,Je,Ke+te,Je,Ke+te,Je+se,Ke,Je+se];for(var Le=0,Be=rt.length;Le<Be;++Le)if(j!==zt&&zt<at[Le]){var Oe=rt[Le];ki([Ke,Je,Ke+te,Je+se],[Oe[0],Oe[3],Oe[4],Oe[7]])&&(Ae||(Ue.save(),Ae=!0),Ue.beginPath(),Ue.moveTo(ot[0],ot[1]),Ue.lineTo(ot[2],ot[3]),Ue.lineTo(ot[4],ot[5]),Ue.lineTo(ot[6],ot[7]),Ue.moveTo(Oe[6],Oe[7]),Ue.lineTo(Oe[4],Oe[5]),Ue.lineTo(Oe[2],Oe[3]),Ue.lineTo(Oe[0],Oe[1]),Ue.clip())}rt.push(ot),at.push(zt)}else Ue.clearRect(Ke,Je,te,se);this.drawTileImage(We,r,Ke,Je,te,se,dr,_e),rt&&!pt?(Ae&&Ue.restore(),this.renderedTiles.unshift(We)):this.renderedTiles.push(We),this.updateUsedTiles(r.usedTiles,A,We)}}return this.renderedRevision=P,this.renderedResolution=D,this.extentChanged=!this.renderedExtent_||!jh(this.renderedExtent_,ye),this.renderedExtent_=ye,this.renderedPixelRatio=x,this.renderedProjection=l,this.manageTilePyramid(r,A,N,x,l,F,j,b.getPreload()),this.scheduleExpireCache(r,A),this.postRender(Ue,r),i.extent&&Ue.restore(),Xr(Ue,sBe),Ot!==nt.style.transform&&(nt.style.transform=Ot),this.container},e.prototype.drawTileImage=function(r,n,i,o,l,f,d,v){var x=this.getTileImage(r);if(x){var b=tr(this),A=n.layerStatesArray[n.layerIndex],P=A.opacity*(v?r.getAlpha(b,n.time):1),N=P!==this.context.globalAlpha;N&&(this.context.save(),this.context.globalAlpha=P),this.context.drawImage(x,d,d,x.width-2*d,x.height-2*d,i,o,l,f),N&&this.context.restore(),P!==A.opacity?n.animate=!0:v&&r.endTransition(b)}},e.prototype.getImage=function(){var r=this.context;return r?r.canvas:null},e.prototype.getTileImage=function(r){return r.getImage()},e.prototype.scheduleExpireCache=function(r,n){if(n.canExpireCache()){var i=function(o,l,f){var d=tr(o);d in f.usedTiles&&o.expireCache(f.viewState.projection,f.usedTiles[d])}.bind(null,n);r.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(r,n,i){var o=tr(n);o in r||(r[o]={}),r[o][i.getKey()]=!0},e.prototype.manageTilePyramid=function(r,n,i,o,l,f,d,v,x){var b=tr(n);b in r.wantedTiles||(r.wantedTiles[b]={});var A=r.wantedTiles[b],P=r.tileQueue,N=i.getMinZoom(),j=r.viewState.rotation,D=j?cN(r.viewState.center,r.viewState.resolution,j,r.size):void 0,F=0,U,$,Z,ie,ne,ae;for(ae=N;ae<=d;++ae)for($=i.getTileRangeForExtentAndZ(f,ae,$),Z=i.getResolution(ae),ie=$.minX;ie<=$.maxX;++ie)for(ne=$.minY;ne<=$.maxY;++ne)j&&!i.tileCoordIntersectsViewport([ae,ie,ne],D)||(d-ae<=v?(++F,U=n.getTile(ae,ie,ne,o,l),U.getState()==Ht.IDLE&&(A[U.getKey()]=!0,P.isKeyQueued(U.getKey())||P.enqueue([U,b,i.getTileCoordCenter(U.tileCoord),Z])),x!==void 0&&x(U)):n.useTile(ae,ie,ne,l));n.updateCacheSize(F,l)},e}(jN),dVe=Vur;var Gur=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$ur=function(t){Gur(e,t);function e(r){return t.call(this,r)||this}return e.prototype.createRenderer=function(){return new dVe(this)},e}(ok),Sv=$ur;p();var Hur=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wur=function(t){Hur(e,t);function e(r){var n=this,i=r||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.projection!==void 0?i.projection:"EPSG:3857",f=i.tileGrid!==void 0?i.tileGrid:zBe({extent:vk(l),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:i.opaque,projection:l,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:f,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n}return e.prototype.getGutter=function(){return this.gutter_},e}(Vx),E7=Wur;p();var S7=class extends ys{constructor(r){let n=r||{},i=document.createElement("div");i.className="ol-layerspy ol-unselectable ol-control";let o=document.createElement("button");o.title=kr("control-layerspy-title"),o.type="button",i.appendChild(o);super({element:i,target:n.target});io(this,"mousePosition",null);io(this,"activate",()=>{this.layers===void 0&&(this.layers=this.getMap().getLayers()),this.getMap().addLayer(this.layer),this.layer.on("prerender",this.handlePrecompose,this),this.layer.on("postrender",this.handlePostcompose,this);let r=this.getMap().getViewport();r.addEventListener("mousemove",this.handleMouseMove),r.addEventListener("mouseout",this.handleMouseOut),document.addEventListener("keydown",this.handleKeyPress),this.layers.on("add",this.handleAddedLayer),this.containerEl.classList.add("active"),this.renderRadiusbox&&this.renderTargetElement()});io(this,"changeLayer",r=>{this.containerEl.classList.contains("active")?(this.deactivate(),this.layer=r,this.activate()):this.layer=r});io(this,"deactivate",()=>{this.layer.un("prerender",this.handlePrecompose),this.layer.un("postrender",this.handlePostcompose);let r=this.getMap().getViewport();r.removeEventListener("mousemove",this.handleMouseMove),r.removeEventListener("mouseout",this.handleMouseOut),document.removeEventListener("keydown",this.handleKeyPress),this.layers.un("add",this.handleAddedLayer),this.getMap().removeLayer(this.layer),this.containerEl.classList.remove("active"),this.renderRadiusbox&&this.renderTargetElement()});io(this,"handlePostcompose",r=>{r.context.restore()});io(this,"handlePrecompose",r=>{let n=r.context,i=1;n.save(),n.beginPath();let o=this.mousePosition;if(o){let l=this.getMap().getLayers().getArray().find(v=>v.vkf_id===this.refActiveBasemapId.current).renderer_.context.canvas.style.transform,f=new DOMPoint(o[0],o[1]),d=new DOMMatrix(l);f=f.matrixTransform(d.invertSelf()),n.arc(f.x*i,f.y*i,this.clipRadius*i,0,2*Math.PI),n.lineWidth=5*i,n.strokeStyle="rgba(0,0,0,0.5)",n.stroke()}n.clip()});io(this,"handleMouseMove",r=>{this.mousePosition=this.getMap().getEventPixel(r),this.getMap().render()});io(this,"handleMouseOut",()=>{this.mousePosition=null,this.getMap().render()});io(this,"handleKeyPress",r=>{r.target.tagName.toLowerCase()!=="input"&&(r.key.toLowerCase()==="y"||r.keyCode==="KeyY"?(this.clipRadius=Math.min(this.clipRadius+5,150),this.getMap().render()):(r.key.toLowerCase()==="x"||r.keyCode==="KeyX")&&(this.clipRadius=Math.max(this.clipRadius-5,25),this.getMap().render()),this.updateClipRadiusDisplay())});io(this,"handleAddedLayer",r=>{r.target.getArray()[r.target.getLength()-1]!==this.layer&&(this.getMap().removeLayer(this.layer),this.getMap().addLayer(this.layer))});io(this,"handleExternal3dStateUpdate",r=>{this.containerEl.disabled=r,r?this.containerEl.classList.add("disabled"):this.containerEl.classList.remove("disabled")});io(this,"updateClipRadiusDisplay",()=>{let r=this.targetEl;r.innerHTML=`<strong>Radius: ${this.clipRadius}px</strong> (${kr("control-layerspy-radius-tooltip")})`});io(this,"renderTargetElement",()=>{let r=this.targetEl,n=GW(this.getMap());this.targetEl===void 0&&(r=document.createElement("div"),r.className="ol-control ol-layerspy-radius-box",r.innerHTML="",n.appendChild(r),this.targetEl=r),this.targetEl.classList.toggle("active"),n.classList.toggle("layerspy-active"),this.updateClipRadiusDisplay()});this.clipRadius=ti(n.radius)?parseInt(n.radius,0):75,n.refSpyLayer!==void 0&&(n.refSpyLayer.current=this),this.refActiveBasemapId=n.refActiveBasemapId,this.containerEl=o,this.renderRadiusbox=r.renderRadiusBox===void 0?!0:r.renderRadiusBox,o.addEventListener("click",l=>{l.preventDefault(),this.containerEl.classList.contains("active")?this.deactivate():this.activate()}),ti(n.spyLayer)&&this.changeLayer(n.spyLayer)}},mVe=S7;var gVe=t=>{let{children:e,extent:r,onLoad:n=()=>console.log("No onLoad function was passed to component Map2D."),urlsOsmBaseMap:i}=t,o=(0,rb.useRef)(null);return(0,rb.useEffect)(()=>{let l=()=>zn(null,null,function*(){let f=new Sv({source:new E7({urls:i,crossOrigin:"*",maxZoom:18})});f.vkf_id="slub-osm";let d=new Dx({controls:[new rk({tipLabel:kr("control-fullscreen-title")}),new Lx({zoomInTipLabel:kr("control-zoom-in"),zoomOutTipLabel:kr("control-zoom-in")})],interactions:Ox().extend([new Px]),layers:[f],target:o.current,view:new Cu({projection:"EPSG:3857",center:[871713,6396955],zoom:4.3})});if(n({map:d}),r!=null){let x=uv(r,"EPSG:4326",d.getView().getProjection());d.getView().fit(x,{padding:[100,100,100,100]}),d.addControl(new ik({tipLabel:kr("control-zoomtoextent-title"),extent:x}))}let v=new Sv({zIndex:10,attribution:void 0,source:new E7({urls:i,crossOrigin:"*",attributions:[]})});v.vkf_id="slub-osm",d.addControl(new mVe({spyLayer:v,refActiveBasemapId:{current:f.vkf_id}}))});o.current!==null&&l()},[]),rb.default.createElement("div",{className:"map-container",ref:o},e)};gVe.propTypes={extent:Ac.default.arrayOf(Ac.default.number),onLoad:Ac.default.func,urlNominatim:Ac.default.string,urlsOsmBaseMap:Ac.default.arrayOf(Ac.default.string),children:Ac.default.oneOfType([Ac.default.arrayOf(Ac.default.node),Ac.default.node])};var vVe=gVe;var yVe=vVe;p();p();var VI=je(St(),1),nb=je(ln(),1);p();p();var BI="1.3.0";p();function T7(t,e){var r=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&r.push(i+"="+encodeURIComponent(e[i]))});var n=r.join("&");return t=t.replace(/[?&]$/,""),t=t.indexOf("?")===-1?t+"?":t+"&",t+n}var Zur=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yur=function(t){Zur(e,t);function e(r){var n=this,i=r||{},o=i.imageSmoothing!==void 0?i.imageSmoothing:!0;i.interpolate!==void 0&&(o=i.interpolate);var l=i.params||{},f="TRANSPARENT"in l?l.TRANSPARENT:!0;return n=t.call(this,{attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,opaque:!f,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:i.wrapX!==void 0?i.wrapX:!0,transition:i.transition,zDirection:i.zDirection})||this,n.gutter_=i.gutter!==void 0?i.gutter:0,n.params_=l,n.v13_=!0,n.serverType_=i.serverType,n.hidpi_=i.hidpi!==void 0?i.hidpi:!0,n.tmpExtent_=Bi(),n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return e.prototype.getFeatureInfoUrl=function(r,n,i,o){var l=ii(i),f=this.getProjection(),d=this.getTileGrid();d||(d=this.getTileGridForProjection(l));var v=d.getZForResolution(n,this.zDirection),x=d.getTileCoordForCoordAndZ(r,v);if(!(d.getResolutions().length<=x[0])){var b=d.getResolution(x[0]),A=d.getTileCoordExtent(x,this.tmpExtent_),P=Kn(d.getTileSize(x[0]),this.tmpSize),N=this.gutter_;N!==0&&(P=y9(P,N,this.tmpSize),A=vc(A,b*N,A)),f&&f!==l&&(b=sk(f,l,r,b),A=uv(A,l,f),r=xc(r,l,f));var j={SERVICE:"WMS",VERSION:BI,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Xr(j,this.params_,o);var D=Math.floor((r[0]-A[0])/b),F=Math.floor((A[3]-r[1])/b);return j[this.v13_?"I":"X"]=D,j[this.v13_?"J":"Y"]=F,this.getRequestUrl_(x,P,A,1,f||l,j)}},e.prototype.getLegendUrl=function(r,n){if(this.urls[0]!==void 0){var i={SERVICE:"WMS",VERSION:BI,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){var o=this.params_.LAYERS,l=!Array.isArray(o)||o.length===1;if(!l)return;i.LAYER=o}if(r!==void 0){var f=this.getProjection()?this.getProjection().getMetersPerUnit():1,d=28e-5;i.SCALE=r*f/d}return Xr(i,n),T7(this.urls[0],i)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(r,n,i,o,l,f){var d=this.urls;if(d){if(f.WIDTH=n[0],f.HEIGHT=n[1],f[this.v13_?"CRS":"SRS"]=l.getCode(),"STYLES"in this.params_||(f.STYLES=""),o!=1)switch(this.serverType_){case"geoserver":var v=90*o+.5|0;"FORMAT_OPTIONS"in f?f.FORMAT_OPTIONS+=";dpi:"+v:f.FORMAT_OPTIONS="dpi:"+v;break;case"mapserver":f.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":f.DPI=90*o;break;default:or(!1,52);break}var x=l.getAxisOrientation(),b=i;if(this.v13_&&x.substr(0,2)=="ne"){var A=void 0;A=i[0],b[0]=i[1],b[1]=A,A=i[2],b[2]=i[3],b[3]=A}f.BBOX=b.join(",");var P;if(d.length==1)P=d[0];else{var N=Ll(fk(r),d.length);P=d[N]}return T7(P,f)}},e.prototype.getTilePixelRatio=function(r){return!this.hidpi_||this.serverType_===void 0?1:r},e.prototype.getKeyForParams_=function(){var r=0,n=[];for(var i in this.params_)n[r++]=i+"-"+this.params_[i];return n.join("/")},e.prototype.updateParams=function(r){Xr(this.params_,r),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var r=this.params_.VERSION||BI;this.v13_=Ize(r,"1.3")>=0},e.prototype.tileUrlFunction=function(r,n,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=r[0])){n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);var l=o.getResolution(r[0]),f=o.getTileCoordExtent(r,this.tmpExtent_),d=Kn(o.getTileSize(r[0]),this.tmpSize),v=this.gutter_;v!==0&&(d=y9(d,v,this.tmpSize),f=vc(f,l*v,f)),n!=1&&(d=CN(d,n,this.tmpSize));var x={SERVICE:"WMS",VERSION:BI,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Xr(x,this.params_),this.getRequestUrl_(r,d,f,n,i,x)}},e}(Vx),_Ve=Yur;function Kur(t,e){return t.getCoordinates()[0].map(r=>e.getPixelFromCoordinate(r))}var xVe=t=>{let{map:e,layerName:r,onLoad:n=()=>{},wmsUrl:i}=t;return(0,VI.useEffect)(()=>{let o=new Sv({source:new _Ve({url:i,params:{LAYERS:r,VERSION:"1.1.1"},projection:e.getView().getProjection()}),preload:1/0,zIndex:1});e.addLayer(o),n(o);let l=d=>{let v=e.getLayers().getArray().find(x=>x.get("key")==="clip");if(v!==void 0&&v.getSource().getFeatures().length>0){let x=Kur(v.getSource().getFeatures()[0].getGeometry(),e),b=1,A=d.context;A.save(),A.beginPath(),A.moveTo(x[0][0]*b,x[0][1]*b);for(let P=1;P<x.length;P++)A.lineTo(x[P][0]*b,x[P][1]*b);A.closePath(),A.clip()}},f=d=>{d.context.restore()};return o.on("prerender",l),o.on("postrender",f),()=>{o.un("prerender",l),o.un("postrender",f),e.removeLayer(o)}},[]),VI.default.createElement(VI.default.Fragment,null)};xVe.propTypes={clipPolygon:nb.default.instanceOf(bc),layerName:nb.default.string.isRequired,map:nb.default.instanceOf(Dx).isRequired,onLoad:nb.default.func,wmsUrl:nb.default.string.isRequired};var bVe=xVe;var wVe=bVe;p();var Iv=je(St(),1),yX=je(ln(),1);p();var ws=je(St(),1);p();var kt=je(ln()),Ct=je(St()),scr=je(PVe());p();function RVe(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function OVe(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function A7(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return OVe(r.overflowY,e)||OVe(r.overflowX,e)||function(n){var i=function(o){if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch(l){return null}}(n);return!!i&&(i.clientHeight<n.scrollHeight||i.clientWidth<n.scrollWidth)}(t)}return!1}function bq(t,e,r,n,i,o,l,f){return o<t&&l>e||o>t&&l<e?0:o<=t&&f<=r||l>=e&&f>=r?o-t-n:l>e&&f<r||o<t&&f>r?l-e+i:0}var LVe=function(t,e){var r=window,n=e.scrollMode,i=e.block,o=e.inline,l=e.boundary,f=e.skipOverflowHiddenElements,d=typeof l=="function"?l:function($t){return $t!==l};if(!RVe(t))throw new TypeError("Invalid target");for(var v,x,b=document.scrollingElement||document.documentElement,A=[],P=t;RVe(P)&&d(P);){if((P=(x=(v=P).parentElement)==null?v.getRootNode().host||null:x)===b){A.push(P);break}P!=null&&P===document.body&&A7(P)&&!A7(document.documentElement)||P!=null&&A7(P,f)&&A.push(P)}for(var N=r.visualViewport?r.visualViewport.width:innerWidth,j=r.visualViewport?r.visualViewport.height:innerHeight,D=window.scrollX||pageXOffset,F=window.scrollY||pageYOffset,U=t.getBoundingClientRect(),$=U.height,Z=U.width,ie=U.top,ne=U.right,ae=U.bottom,de=U.left,ye=i==="start"||i==="nearest"?ie:i==="end"?ae:ie+$/2,me=o==="center"?de+Z/2:o==="end"?ne:de,be=[],Ne=0;Ne<A.length;Ne++){var Ce=A[Ne],qe=Ce.getBoundingClientRect(),He=qe.height,Ke=qe.width,Je=qe.top,We=qe.right,lt=qe.bottom,pt=qe.left;if(n==="if-needed"&&ie>=0&&de>=0&&ae<=j&&ne<=N&&ie>=Je&&ae<=lt&&de>=pt&&ne<=We)return be;var dt=getComputedStyle(Ce),ze=parseInt(dt.borderLeftWidth,10),Dt=parseInt(dt.borderTopWidth,10),Ot=parseInt(dt.borderRightWidth,10),Ue=parseInt(dt.borderBottomWidth,10),nt=0,Ze=0,rt="offsetWidth"in Ce?Ce.offsetWidth-Ce.clientWidth-ze-Ot:0,at="offsetHeight"in Ce?Ce.offsetHeight-Ce.clientHeight-Dt-Ue:0,ot="offsetWidth"in Ce?Ce.offsetWidth===0?0:Ke/Ce.offsetWidth:0,Lt="offsetHeight"in Ce?Ce.offsetHeight===0?0:He/Ce.offsetHeight:0;if(b===Ce)nt=i==="start"?ye:i==="end"?ye-j:i==="nearest"?bq(F,F+j,j,Dt,Ue,F+ye,F+ye+$,$):ye-j/2,Ze=o==="start"?me:o==="center"?me-N/2:o==="end"?me-N:bq(D,D+N,N,ze,Ot,D+me,D+me+Z,Z),nt=Math.max(0,nt+F),Ze=Math.max(0,Ze+D);else{nt=i==="start"?ye-Je-Dt:i==="end"?ye-lt+Ue+at:i==="nearest"?bq(Je,lt,He,Dt,Ue+at,ye,ye+$,$):ye-(Je+He/2)+at/2,Ze=o==="start"?me-pt-ze:o==="center"?me-(pt+Ke/2)+rt/2:o==="end"?me-We+Ot+rt:bq(pt,We,Ke,ze,Ot+rt,me,me+Z,Z);var zt=Ce.scrollLeft,Pt=Ce.scrollTop;ye+=Pt-(nt=Math.max(0,Math.min(Pt+nt/Lt,Ce.scrollHeight-He/Lt+at))),me+=zt-(Ze=Math.max(0,Math.min(zt+Ze/ot,Ce.scrollWidth-Ke/ot+rt)))}be.push({el:Ce,top:nt,left:Ze})}return be};p();var JI=function(){return JI=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},JI.apply(this,arguments)};var lcr=0;function iA(){}function ucr(t,e){if(!t)return;LVe(t,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:i,top:o,left:l}=n;i.scrollTop=o,i.scrollLeft=l})}function DVe(t,e,r){return t===e||e instanceof r.Node&&t.contains&&t.contains(e)}function C7(t,e){let r;function n(){r&&clearTimeout(r)}function i(){for(var o=arguments.length,l=new Array(o),f=0;f<o;f++)l[f]=arguments[f];n(),r=setTimeout(()=>{r=null,t(...l)},e)}return i.cancel=n,i}function Vo(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return e.some(f=>(f&&f(n,...o),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function Nf(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n=>{e.forEach(i=>{typeof i=="function"?i(n):i&&(i.current=n)})}}function ccr(){return String(lcr++)}function fcr(t){let{isOpen:e,resultCount:r,previousResultCount:n}=t;return e?r?r!==n?`${r} result${r===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function wq(t,e){return Object.keys(t).reduce((r,n)=>(r[n]=UVe(e,n)?e[n]:t[n],r),{})}function UVe(t,e){return t[e]!==void 0}function rA(t){let{key:e,keyCode:r}=t;return r>=37&&r<=40&&e.indexOf("Arrow")!==0?`Arrow${e}`:e}function nA(t,e,r,n,i){if(i===void 0&&(i=!0),r===0)return-1;let o=r-1;(typeof e!="number"||e<0||e>=r)&&(e=t>0?-1:o+1);let l=e+t;l<0?l=i?o:0:l>o&&(l=i?0:o);let f=Tv(t,l,r,n,i);return f===-1?e>=r?-1:e:f}function Tv(t,e,r,n,i){let o=n(e);if(!o||!o.hasAttribute("disabled"))return e;if(t>0){for(let l=e+1;l<r;l++)if(!n(l).hasAttribute("disabled"))return l}else for(let l=e-1;l>=0;l--)if(!n(l).hasAttribute("disabled"))return l;return i?t>0?Tv(1,0,r,n,!1):Tv(-1,r-1,r,n,!1):-1}function NVe(t,e,r,n){return n===void 0&&(n=!0),e.some(i=>i&&(DVe(i,t,r)||n&&DVe(i,r.document.activeElement,r)))}var hcr=C7(t=>{VVe(t).textContent=""},500);function BVe(t,e){let r=VVe(e);t&&(r.textContent=t,hcr(e))}function VVe(t){t===void 0&&(t=document);let e=t.getElementById("a11y-status-message");return e||(e=t.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var GVe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function pcr(t,e,r){let{props:n,type:i}=t,o={};Object.keys(e).forEach(l=>{dcr(l,t,e,r),r[l]!==e[l]&&(o[l]=r[l])}),n.onStateChange&&Object.keys(o).length&&n.onStateChange(mt({type:i},o))}function dcr(t,e,r,n){let{props:i,type:o}=e,l=`on${R7(t)}Change`;i[l]&&n[t]!==void 0&&n[t]!==r[t]&&i[l](mt({type:o},n))}function mcr(t,e){return e.changes}function gcr(t){let{selectedItem:e,itemToString:r}=t;return e?`${r(e)} has been selected.`:""}var vcr=C7((t,e)=>{BVe(t(),e)},200),ycr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?Ct.useLayoutEffect:Ct.useEffect;function $Ve(t){let{id:e=`downshift-${ccr()}`,labelId:r,menuId:n,getItemId:i,toggleButtonId:o,inputId:l}=t;return(0,Ct.useRef)({labelId:r||`${e}-label`,menuId:n||`${e}-menu`,getItemId:i||(d=>`${e}-item-${d}`),toggleButtonId:o||`${e}-toggle-button`,inputId:l||`${e}-input`}).current}function P7(t,e,r){return t!==void 0?t:r.length===0?-1:r.indexOf(e)}function _cr(t){return t?String(t):""}function kVe(t){return /^\S{1}$/.test(t)}function R7(t){return`${t.slice(0,1).toUpperCase()}${t.slice(1)}`}function Iq(t){let e=(0,Ct.useRef)(t);return e.current=t,e}function HVe(t,e,r){let n=(0,Ct.useRef)(),i=(0,Ct.useRef)(),o=(0,Ct.useCallback)((b,A)=>{i.current=A,b=wq(b,A.props);let P=t(b,A);return A.props.stateReducer(b,on(mt({},A),{changes:P}))},[t]),[l,f]=(0,Ct.useReducer)(o,e),d=Iq(r),v=(0,Ct.useCallback)(b=>f(mt({props:d.current},b)),[d]),x=i.current;return(0,Ct.useEffect)(()=>{x&&n.current&&n.current!==l&&pcr(x,wq(n.current,x.props),l),n.current=l},[l,r,x]),[l,v]}function WVe(t,e,r){let[n,i]=HVe(t,e,r);return[wq(n,r),i]}var tA={itemToString:_cr,stateReducer:mcr,getA11ySelectionMessage:gcr,scrollIntoView:ucr,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function bs(t,e,r){r===void 0&&(r=GVe);let n=t[`default${R7(e)}`];return n!==void 0?n:r[e]}function eA(t,e,r){r===void 0&&(r=GVe);let n=t[e];if(n!==void 0)return n;let i=t[`initial${R7(e)}`];return i!==void 0?i:bs(t,e,r)}function ZVe(t){let e=eA(t,"selectedItem"),r=eA(t,"isOpen"),n=eA(t,"highlightedIndex"),i=eA(t,"inputValue");return{highlightedIndex:n<0&&e&&r?t.items.indexOf(e):n,isOpen:r,selectedItem:e,inputValue:i}}function ib(t,e,r,n){let{items:i,initialHighlightedIndex:o,defaultHighlightedIndex:l}=t,{selectedItem:f,highlightedIndex:d}=e;return i.length===0?-1:o!==void 0&&d===o?o:l!==void 0?l:f?r===0?i.indexOf(f):nA(r,i.indexOf(f),i.length,n,!1):r===0?-1:r<0?i.length-1:0}function YVe(t,e,r,n){let i=(0,Ct.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,Ct.useEffect)(()=>{let o=()=>{i.current.isMouseDown=!0},l=x=>{i.current.isMouseDown=!1,t&&!NVe(x.target,e.map(b=>b.current),r)&&n()},f=()=>{i.current.isTouchMove=!1},d=()=>{i.current.isTouchMove=!0},v=x=>{t&&!i.current.isTouchMove&&!NVe(x.target,e.map(b=>b.current),r,!1)&&n()};return r.addEventListener("mousedown",o),r.addEventListener("mouseup",l),r.addEventListener("touchstart",f),r.addEventListener("touchmove",d),r.addEventListener("touchend",v),function(){r.removeEventListener("mousedown",o),r.removeEventListener("mouseup",l),r.removeEventListener("touchstart",f),r.removeEventListener("touchmove",d),r.removeEventListener("touchend",v)}},[t,r]),i}var O7=()=>iA;function Eq(t,e,r){let d=r,{isInitialMount:n,highlightedIndex:i,items:o,environment:l}=d,f=Oo(d,["isInitialMount","highlightedIndex","items","environment"]);(0,Ct.useEffect)(()=>{n||vcr(()=>t(mt({highlightedIndex:i,highlightedItem:o[i],resultCount:o.length},f)),l.document)},e)}function KVe(t){let{highlightedIndex:e,isOpen:r,itemRefs:n,getItemNodeFromIndex:i,menuElement:o,scrollIntoView:l}=t,f=(0,Ct.useRef)(!0);return ycr(()=>{e<0||!r||!Object.keys(n.current).length||(f.current===!1?f.current=!0:l(i(e),o))},[e]),f}var L7=iA;function XVe(t,e,r){let{type:n,props:i}=e,o;switch(n){case r.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case r.MenuMouseLeave:o={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:o={isOpen:!t.isOpen,highlightedIndex:t.isOpen?-1:ib(i,t,0)};break;case r.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:ib(i,t,0)};break;case r.FunctionCloseMenu:o={isOpen:!1};break;case r.FunctionSetHighlightedIndex:o={highlightedIndex:e.highlightedIndex};break;case r.FunctionSetInputValue:o={inputValue:e.inputValue};break;case r.FunctionReset:o={highlightedIndex:bs(i,"highlightedIndex"),isOpen:bs(i,"isOpen"),selectedItem:bs(i,"selectedItem"),inputValue:bs(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return mt(mt({},t),o)}function qVe(t){for(var e=t.keysSoFar,r=t.highlightedIndex,n=t.items,i=t.itemToString,o=t.getItemNodeFromIndex,l=e.toLowerCase(),f=0;f<n.length;f++){var d=(f+r+1)%n.length,v=n[d];if(v!==void 0&&i(v).toLowerCase().startsWith(l)){var x=o(d);if(!(x!=null&&x.hasAttribute("disabled")))return d}}return r}var mFn={items:kt.default.array.isRequired,itemToString:kt.default.func,getA11yStatusMessage:kt.default.func,getA11ySelectionMessage:kt.default.func,circularNavigation:kt.default.bool,highlightedIndex:kt.default.number,defaultHighlightedIndex:kt.default.number,initialHighlightedIndex:kt.default.number,isOpen:kt.default.bool,defaultIsOpen:kt.default.bool,initialIsOpen:kt.default.bool,selectedItem:kt.default.any,initialSelectedItem:kt.default.any,defaultSelectedItem:kt.default.any,id:kt.default.string,labelId:kt.default.string,menuId:kt.default.string,getItemId:kt.default.func,toggleButtonId:kt.default.string,stateReducer:kt.default.func,onSelectedItemChange:kt.default.func,onHighlightedIndexChange:kt.default.func,onStateChange:kt.default.func,onIsOpenChange:kt.default.func,environment:kt.default.shape({addEventListener:kt.default.func,removeEventListener:kt.default.func,document:kt.default.shape({getElementById:kt.default.func,activeElement:kt.default.any,body:kt.default.any})})};function xcr(t){var e=t.isOpen,r=t.resultCount,n=t.previousResultCount;return e?r?r!==n?"".concat(r," result").concat(r===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var bcr=JI(JI({},tA),{getA11yStatusMessage:xcr}),wcr=iA,D7=0,N7=1,k7=2,q7=3,F7=4,j7=5,z7=6,U7=7,Sq=8,QVe=9,JVe=10,B7=11,eGe=12,V7=13,G7=14,$7=15,tGe=16,rGe=17,nGe=18,iGe=19,H7=20,M7=21,oGe=22,aGe=Object.freeze({__proto__:null,MenuKeyDownArrowDown:D7,MenuKeyDownArrowUp:N7,MenuKeyDownEscape:k7,MenuKeyDownHome:q7,MenuKeyDownEnd:F7,MenuKeyDownEnter:j7,MenuKeyDownSpaceButton:z7,MenuKeyDownCharacter:U7,MenuBlur:Sq,MenuMouseLeave:QVe,ItemMouseMove:JVe,ItemClick:B7,ToggleButtonClick:eGe,ToggleButtonKeyDownArrowDown:V7,ToggleButtonKeyDownArrowUp:G7,ToggleButtonKeyDownCharacter:$7,FunctionToggleMenu:tGe,FunctionOpenMenu:rGe,FunctionCloseMenu:nGe,FunctionSetHighlightedIndex:iGe,FunctionSelectItem:H7,FunctionSetInputValue:M7,FunctionReset:oGe});function Ecr(t,e){let{type:r,props:n,shiftKey:i}=e,o;switch(r){case B7:o={isOpen:bs(n,"isOpen"),highlightedIndex:bs(n,"highlightedIndex"),selectedItem:n.items[e.index]};break;case $7:{let l=e.key,f=`${t.inputValue}${l}`,d=qVe({keysSoFar:f,highlightedIndex:t.selectedItem?n.items.indexOf(t.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=mt({inputValue:f},d>=0&&{selectedItem:n.items[d]})}break;case V7:o={highlightedIndex:ib(n,t,1,e.getItemNodeFromIndex),isOpen:!0};break;case G7:o={highlightedIndex:ib(n,t,-1,e.getItemNodeFromIndex),isOpen:!0};break;case j7:case z7:o=mt({isOpen:bs(n,"isOpen"),highlightedIndex:bs(n,"highlightedIndex")},t.highlightedIndex>=0&&{selectedItem:n.items[t.highlightedIndex]});break;case q7:o={highlightedIndex:Tv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case F7:o={highlightedIndex:Tv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case k7:o={isOpen:!1,highlightedIndex:-1};break;case Sq:o={isOpen:!1,highlightedIndex:-1};break;case U7:{let l=e.key,f=`${t.inputValue}${l}`,d=qVe({keysSoFar:f,highlightedIndex:t.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:e.getItemNodeFromIndex});o=mt({inputValue:f},d>=0&&{highlightedIndex:d})}break;case D7:o={highlightedIndex:nA(i?5:1,t.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case N7:o={highlightedIndex:nA(i?-5:-1,t.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)};break;case H7:o={selectedItem:e.selectedItem};break;default:return XVe(t,e,aGe)}return mt(mt({},t),o)}sGe.stateChangeTypes=aGe;function sGe(t){t===void 0&&(t={}),wcr(t,sGe);let e=mt(mt({},bcr),t),{items:r,scrollIntoView:n,environment:i,initialIsOpen:o,defaultIsOpen:l,itemToString:f,getA11ySelectionMessage:d,getA11yStatusMessage:v}=e,x=ZVe(e),[b,A]=WVe(Ecr,x,e),{isOpen:P,highlightedIndex:N,selectedItem:j,inputValue:D}=b,F=(0,Ct.useRef)(null),U=(0,Ct.useRef)(null),$=(0,Ct.useRef)({}),Z=(0,Ct.useRef)(!0),ie=(0,Ct.useRef)(null),ne=$Ve(e),ae=(0,Ct.useRef)(),de=(0,Ct.useRef)(!0),ye=Iq({state:b,props:e}),me=(0,Ct.useCallback)(Ze=>$.current[ne.getItemId(Ze)],[ne]);Eq(v,[P,N,D,r],mt({isInitialMount:de.current,previousResultCount:ae.current,items:r,environment:i,itemToString:f},b)),Eq(d,[j],mt({isInitialMount:de.current,previousResultCount:ae.current,items:r,environment:i,itemToString:f},b));let be=KVe({menuElement:U.current,highlightedIndex:N,isOpen:P,itemRefs:$,scrollIntoView:n,getItemNodeFromIndex:me});(0,Ct.useEffect)(()=>(ie.current=C7(Ze=>{Ze({type:M7,inputValue:""})},500),()=>{ie.current.cancel()}),[]),(0,Ct.useEffect)(()=>{D&&ie.current(A)},[A,D]),L7({isInitialMount:de.current,props:e,state:b}),(0,Ct.useEffect)(()=>{if(de.current){(o||l||P)&&U.current&&U.current.focus();return}if(P){U.current&&U.current.focus();return}i.document.activeElement===U.current&&F.current&&(Z.current=!1,F.current.focus())},[P]),(0,Ct.useEffect)(()=>{de.current||(ae.current=r.length)});let Ne=YVe(P,[U,F],i,()=>{A({type:Sq})}),Ce=O7("getMenuProps","getToggleButtonProps");(0,Ct.useEffect)(()=>{de.current=!1},[]),(0,Ct.useEffect)(()=>{P||($.current={})},[P]);let qe=(0,Ct.useMemo)(()=>({ArrowDown(Ze){Ze.preventDefault(),A({type:V7,getItemNodeFromIndex:me,shiftKey:Ze.shiftKey})},ArrowUp(Ze){Ze.preventDefault(),A({type:G7,getItemNodeFromIndex:me,shiftKey:Ze.shiftKey})}}),[A,me]),He=(0,Ct.useMemo)(()=>({ArrowDown(Ze){Ze.preventDefault(),A({type:D7,getItemNodeFromIndex:me,shiftKey:Ze.shiftKey})},ArrowUp(Ze){Ze.preventDefault(),A({type:N7,getItemNodeFromIndex:me,shiftKey:Ze.shiftKey})},Home(Ze){Ze.preventDefault(),A({type:q7,getItemNodeFromIndex:me})},End(Ze){Ze.preventDefault(),A({type:F7,getItemNodeFromIndex:me})},Escape(){A({type:k7})},Enter(Ze){Ze.preventDefault(),A({type:j7})}," "(Ze){Ze.preventDefault(),A({type:z7})}}),[A,me]),Ke=(0,Ct.useCallback)(()=>{A({type:tGe})},[A]),Je=(0,Ct.useCallback)(()=>{A({type:nGe})},[A]),We=(0,Ct.useCallback)(()=>{A({type:rGe})},[A]),lt=(0,Ct.useCallback)(Ze=>{A({type:iGe,highlightedIndex:Ze})},[A]),pt=(0,Ct.useCallback)(Ze=>{A({type:H7,selectedItem:Ze})},[A]),dt=(0,Ct.useCallback)(()=>{A({type:oGe})},[A]),ze=(0,Ct.useCallback)(Ze=>{A({type:M7,inputValue:Ze})},[A]),Dt=(0,Ct.useCallback)(Ze=>mt({id:ne.labelId,htmlFor:ne.toggleButtonId},Ze),[ne]),Ot=(0,Ct.useCallback)(function(Ze,rt){let pr=Ze===void 0?{}:Ze,{onMouseLeave:at,refKey:ot="ref",onKeyDown:Lt,onBlur:zt,ref:Pt}=pr,$t=Oo(pr,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:Xt=!1}=rt===void 0?{}:rt,Gt=ye.current.state,Sr=dr=>{let br=rA(dr);br&&He[br]?He[br](dr):kVe(br)&&A({type:U7,key:br,getItemNodeFromIndex:me})},zr=()=>{if(Z.current===!1){Z.current=!0;return}!Ne.current.isMouseDown&&A({type:Sq})},vr=()=>{A({type:QVe})};return Ce("getMenuProps",Xt,ot,U),mt(on(mt({[ot]:Nf(Pt,dr=>{U.current=dr}),id:ne.menuId,role:"listbox","aria-labelledby":ne.labelId,tabIndex:-1},Gt.isOpen&&Gt.highlightedIndex>-1&&{"aria-activedescendant":ne.getItemId(Gt.highlightedIndex)}),{onMouseLeave:Vo(at,vr),onKeyDown:Vo(Lt,Sr),onBlur:Vo(zt,zr)}),$t)},[A,ye,He,Ne,Ce,ne,me]),Ue=(0,Ct.useCallback)(function(Ze,rt){let zr=Ze===void 0?{}:Ze,{onClick:at,onKeyDown:ot,refKey:Lt="ref",ref:zt}=zr,Pt=Oo(zr,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:$t=!1}=rt===void 0?{}:rt,Xt=()=>{A({type:eGe})},Gt=vr=>{let pr=rA(vr);pr&&qe[pr]?qe[pr](vr):kVe(pr)&&A({type:$7,key:pr,getItemNodeFromIndex:me})},Sr=mt({[Lt]:Nf(zt,vr=>{F.current=vr}),id:ne.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":ye.current.state.isOpen,"aria-labelledby":`${ne.labelId} ${ne.toggleButtonId}`},Pt);return Pt.disabled||(Sr.onClick=Vo(at,Xt),Sr.onKeyDown=Vo(ot,Gt)),Ce("getToggleButtonProps",$t,Lt,F),Sr},[A,ye,qe,Ce,ne,me]),nt=(0,Ct.useCallback)(function(Ze){let br=Ze===void 0?{}:Ze,{item:rt,index:at,onMouseMove:ot,onClick:Lt,refKey:zt="ref",ref:Pt,disabled:$t}=br,Xt=Oo(br,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Gt,props:Sr}=ye.current,zr=()=>{at!==Gt.highlightedIndex&&(be.current=!1,A({type:JVe,index:at,disabled:$t}))},vr=()=>{A({type:B7,index:at})},pr=P7(at,rt,Sr.items);if(pr<0)throw new Error("Pass either item or item index in getItemProps!");let dr=mt({disabled:$t,role:"option","aria-selected":`${pr===Gt.highlightedIndex}`,id:ne.getItemId(pr),[zt]:Nf(Pt,un=>{un&&($.current[ne.getItemId(pr)]=un)})},Xt);return $t||(dr.onClick=Vo(Lt,vr)),dr.onMouseMove=Vo(ot,zr),dr},[A,ye,be,ne]);return{getToggleButtonProps:Ue,getLabelProps:Dt,getMenuProps:Ot,getItemProps:nt,toggleMenu:Ke,openMenu:We,closeMenu:Je,setHighlightedIndex:lt,selectItem:pt,reset:dt,setInputValue:ze,highlightedIndex:N,isOpen:P,selectedItem:j,inputValue:D}}var W7=0,Z7=1,Y7=2,K7=3,X7=4,Q7=5,J7=6,Tq=7,lGe=8,uGe=9,eX=10,cGe=11,fGe=12,hGe=13,pGe=14,dGe=15,tX=16,mGe=17,gGe=18,rX=19,vGe=Object.freeze({__proto__:null,InputKeyDownArrowDown:W7,InputKeyDownArrowUp:Z7,InputKeyDownEscape:Y7,InputKeyDownHome:K7,InputKeyDownEnd:X7,InputKeyDownEnter:Q7,InputChange:J7,InputBlur:Tq,MenuMouseLeave:lGe,ItemMouseMove:uGe,ItemClick:eX,ToggleButtonClick:cGe,FunctionToggleMenu:fGe,FunctionOpenMenu:hGe,FunctionCloseMenu:pGe,FunctionSetHighlightedIndex:dGe,FunctionSelectItem:tX,FunctionSetInputValue:mGe,FunctionReset:gGe,ControlledPropUpdatedSelectedItem:rX});function Scr(t){let e=ZVe(t),{selectedItem:r}=e,{inputValue:n}=e;return n===""&&r&&t.defaultInputValue===void 0&&t.initialInputValue===void 0&&t.inputValue===void 0&&(n=t.itemToString(r)),on(mt({},e),{inputValue:n})}var gFn={items:kt.default.array.isRequired,itemToString:kt.default.func,getA11yStatusMessage:kt.default.func,getA11ySelectionMessage:kt.default.func,circularNavigation:kt.default.bool,highlightedIndex:kt.default.number,defaultHighlightedIndex:kt.default.number,initialHighlightedIndex:kt.default.number,isOpen:kt.default.bool,defaultIsOpen:kt.default.bool,initialIsOpen:kt.default.bool,selectedItem:kt.default.any,initialSelectedItem:kt.default.any,defaultSelectedItem:kt.default.any,inputValue:kt.default.string,defaultInputValue:kt.default.string,initialInputValue:kt.default.string,id:kt.default.string,labelId:kt.default.string,menuId:kt.default.string,getItemId:kt.default.func,inputId:kt.default.string,toggleButtonId:kt.default.string,stateReducer:kt.default.func,onSelectedItemChange:kt.default.func,onHighlightedIndexChange:kt.default.func,onStateChange:kt.default.func,onIsOpenChange:kt.default.func,onInputValueChange:kt.default.func,environment:kt.default.shape({addEventListener:kt.default.func,removeEventListener:kt.default.func,document:kt.default.shape({getElementById:kt.default.func,activeElement:kt.default.any,body:kt.default.any})})};function Tcr(t,e,r){let n=(0,Ct.useRef)(),[i,o]=HVe(t,e,r);return(0,Ct.useEffect)(()=>{UVe(r,"selectedItem")&&(n.current!==r.selectedItem&&o({type:rX,inputValue:r.itemToString(r.selectedItem)}),n.current=i.selectedItem===n.current?r.selectedItem:i.selectedItem)}),[wq(i,r),o]}var Icr=iA,Acr=on(mt({},tA),{getA11yStatusMessage:fcr,circularNavigation:!0});function Mcr(t,e){let{type:r,props:n,shiftKey:i}=e,o;switch(r){case eX:o={isOpen:bs(n,"isOpen"),highlightedIndex:bs(n,"highlightedIndex"),selectedItem:n.items[e.index],inputValue:n.itemToString(n.items[e.index])};break;case W7:t.isOpen?o={highlightedIndex:nA(i?5:1,t.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:ib(n,t,1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case Z7:t.isOpen?o={highlightedIndex:nA(i?-5:-1,t.highlightedIndex,n.items.length,e.getItemNodeFromIndex,n.circularNavigation)}:o={highlightedIndex:ib(n,t,-1,e.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case Q7:o=mt({},t.isOpen&&t.highlightedIndex>=0&&{selectedItem:n.items[t.highlightedIndex],isOpen:bs(n,"isOpen"),highlightedIndex:bs(n,"highlightedIndex"),inputValue:n.itemToString(n.items[t.highlightedIndex])});break;case Y7:o=mt({isOpen:!1,highlightedIndex:-1},!t.isOpen&&{selectedItem:null,inputValue:""});break;case K7:o={highlightedIndex:Tv(1,0,n.items.length,e.getItemNodeFromIndex,!1)};break;case X7:o={highlightedIndex:Tv(-1,n.items.length-1,n.items.length,e.getItemNodeFromIndex,!1)};break;case Tq:o=mt({isOpen:!1,highlightedIndex:-1},t.highlightedIndex>=0&&e.selectItem&&{selectedItem:n.items[t.highlightedIndex],inputValue:n.itemToString(n.items[t.highlightedIndex])});break;case J7:o={isOpen:!0,highlightedIndex:bs(n,"highlightedIndex"),inputValue:e.inputValue};break;case tX:o={selectedItem:e.selectedItem,inputValue:n.itemToString(e.selectedItem)};break;case rX:o={inputValue:e.inputValue};break;default:return XVe(t,e,vGe)}return mt(mt({},t),o)}Aq.stateChangeTypes=vGe;function Aq(t){t===void 0&&(t={}),Icr(t,Aq);let e=mt(mt({},Acr),t),{initialIsOpen:r,defaultIsOpen:n,items:i,scrollIntoView:o,environment:l,getA11yStatusMessage:f,getA11ySelectionMessage:d,itemToString:v}=e,x=Scr(e),[b,A]=Tcr(Mcr,x,e),{isOpen:P,highlightedIndex:N,selectedItem:j,inputValue:D}=b,F=(0,Ct.useRef)(null),U=(0,Ct.useRef)({}),$=(0,Ct.useRef)(null),Z=(0,Ct.useRef)(null),ie=(0,Ct.useRef)(null),ne=(0,Ct.useRef)(!0),ae=$Ve(e),de=(0,Ct.useRef)(),ye=Iq({state:b,props:e}),me=(0,Ct.useCallback)(rt=>U.current[ae.getItemId(rt)],[ae]);Eq(f,[P,N,D,i],mt({isInitialMount:ne.current,previousResultCount:de.current,items:i,environment:l,itemToString:v},b)),Eq(d,[j],mt({isInitialMount:ne.current,previousResultCount:de.current,items:i,environment:l,itemToString:v},b));let be=KVe({menuElement:F.current,highlightedIndex:N,isOpen:P,itemRefs:U,scrollIntoView:o,getItemNodeFromIndex:me});L7({isInitialMount:ne.current,props:e,state:b}),(0,Ct.useEffect)(()=>{(r||n||P)&&$.current&&$.current.focus()},[]),(0,Ct.useEffect)(()=>{ne.current||(de.current=i.length)});let Ne=YVe(P,[ie,F,Z],l,()=>{A({type:Tq,selectItem:!1})}),Ce=O7("getInputProps","getComboboxProps","getMenuProps");(0,Ct.useEffect)(()=>{ne.current=!1},[]),(0,Ct.useEffect)(()=>{P||(U.current={})},[P]);let qe=(0,Ct.useMemo)(()=>({ArrowDown(rt){rt.preventDefault(),A({type:W7,shiftKey:rt.shiftKey,getItemNodeFromIndex:me})},ArrowUp(rt){rt.preventDefault(),A({type:Z7,shiftKey:rt.shiftKey,getItemNodeFromIndex:me})},Home(rt){ye.current.state.isOpen&&(rt.preventDefault(),A({type:K7,getItemNodeFromIndex:me}))},End(rt){ye.current.state.isOpen&&(rt.preventDefault(),A({type:X7,getItemNodeFromIndex:me}))},Escape(rt){let at=ye.current.state;(at.isOpen||at.inputValue||at.selectedItem||at.highlightedIndex>-1)&&(rt.preventDefault(),A({type:Y7}))},Enter(rt){let at=ye.current.state;!at.isOpen||at.highlightedIndex<0||rt.which===229||(rt.preventDefault(),A({type:Q7,getItemNodeFromIndex:me}))}}),[A,ye,me]),He=(0,Ct.useCallback)(rt=>mt({id:ae.labelId,htmlFor:ae.inputId},rt),[ae]),Ke=(0,Ct.useCallback)(function(rt,at){let Xt=rt===void 0?{}:rt,{onMouseLeave:ot,refKey:Lt="ref",ref:zt}=Xt,Pt=Oo(Xt,["onMouseLeave","refKey","ref"]),{suppressRefError:$t=!1}=at===void 0?{}:at;return Ce("getMenuProps",$t,Lt,F),mt({[Lt]:Nf(zt,Gt=>{F.current=Gt}),id:ae.menuId,role:"listbox","aria-labelledby":ae.labelId,onMouseLeave:Vo(ot,()=>{A({type:lGe})})},Pt)},[A,Ce,ae]),Je=(0,Ct.useCallback)(function(rt){let De=rt===void 0?{}:rt,{item:at,index:ot,refKey:Lt="ref",ref:zt,onMouseMove:Pt,onMouseDown:$t,onClick:Xt,onPress:Gt,disabled:Sr}=De,zr=Oo(De,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:vr,state:pr}=ye.current,dr=P7(ot,at,vr.items);if(dr<0)throw new Error("Pass either item or item index in getItemProps!");let br="onClick",un=Xt,En=()=>{ot!==pr.highlightedIndex&&(be.current=!1,A({type:uGe,index:ot,disabled:Sr}))},Rn=()=>{A({type:eX,index:ot})},gi=J=>J.preventDefault();return mt(on(mt({[Lt]:Nf(zt,J=>{J&&(U.current[ae.getItemId(dr)]=J)}),disabled:Sr,role:"option","aria-selected":`${dr===pr.highlightedIndex}`,id:ae.getItemId(dr)},!Sr&&{[br]:Vo(un,Rn)}),{onMouseMove:Vo(Pt,En),onMouseDown:Vo($t,gi)}),zr)},[A,ye,be,ae]),We=(0,Ct.useCallback)(function(rt){let Xt=rt===void 0?{}:rt,{onClick:at,onPress:ot,refKey:Lt="ref",ref:zt}=Xt,Pt=Oo(Xt,["onClick","onPress","refKey","ref"]),$t=()=>{A({type:cGe}),!ye.current.state.isOpen&&$.current&&$.current.focus()};return mt(mt({[Lt]:Nf(zt,Gt=>{Z.current=Gt}),id:ae.toggleButtonId,tabIndex:-1},!Pt.disabled&&{onClick:Vo(at,$t)}),Pt)},[A,ye,ae]),lt=(0,Ct.useCallback)(function(rt,at){let Rn=rt===void 0?{}:rt,{onKeyDown:ot,onChange:Lt,onInput:zt,onBlur:Pt,onChangeText:$t,refKey:Xt="ref",ref:Gt}=Rn,Sr=Oo(Rn,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:zr=!1}=at===void 0?{}:at;Ce("getInputProps",zr,Xt,$);let vr=ye.current.state,pr=gi=>{let De=rA(gi);De&&qe[De]&&qe[De](gi)},dr=gi=>{A({type:J7,inputValue:gi.target.value})},br=()=>{vr.isOpen&&!Ne.current.isMouseDown&&A({type:Tq,selectItem:!0})},un="onChange",En={};return Sr.disabled||(En={[un]:Vo(Lt,zt,dr),onKeyDown:Vo(ot,pr),onBlur:Vo(Pt,br)}),mt(mt(on(mt({[Xt]:Nf(Gt,gi=>{$.current=gi}),id:ae.inputId,"aria-autocomplete":"list","aria-controls":ae.menuId},vr.isOpen&&vr.highlightedIndex>-1&&{"aria-activedescendant":ae.getItemId(vr.highlightedIndex)}),{"aria-labelledby":ae.labelId,autoComplete:"off",value:vr.inputValue}),En),Sr)},[A,qe,ye,Ne,Ce,ae]),pt=(0,Ct.useCallback)(function(rt,at){let $t=rt===void 0?{}:rt,{refKey:ot="ref",ref:Lt}=$t,zt=Oo($t,["refKey","ref"]),{suppressRefError:Pt=!1}=at===void 0?{}:at;return Ce("getComboboxProps",Pt,ot,ie),mt({[ot]:Nf(Lt,Xt=>{ie.current=Xt}),role:"combobox","aria-haspopup":"listbox","aria-owns":ae.menuId,"aria-expanded":ye.current.state.isOpen},zt)},[ye,Ce,ae]),dt=(0,Ct.useCallback)(()=>{A({type:fGe})},[A]),ze=(0,Ct.useCallback)(()=>{A({type:pGe})},[A]),Dt=(0,Ct.useCallback)(()=>{A({type:hGe})},[A]),Ot=(0,Ct.useCallback)(rt=>{A({type:dGe,highlightedIndex:rt})},[A]),Ue=(0,Ct.useCallback)(rt=>{A({type:tX,selectedItem:rt})},[A]),nt=(0,Ct.useCallback)(rt=>{A({type:mGe,inputValue:rt})},[A]),Ze=(0,Ct.useCallback)(()=>{A({type:gGe})},[A]);return{getItemProps:Je,getLabelProps:He,getMenuProps:Ke,getInputProps:lt,getComboboxProps:pt,getToggleButtonProps:We,toggleMenu:dt,openMenu:Dt,closeMenu:ze,setHighlightedIndex:Ot,setInputValue:nt,selectItem:Ue,reset:Ze,highlightedIndex:N,isOpen:P,selectedItem:j,inputValue:D}}var yGe={activeIndex:-1,selectedItems:[]};function FVe(t,e){return eA(t,e,yGe)}function jVe(t,e){return bs(t,e,yGe)}function Ccr(t){let e=FVe(t,"activeIndex"),r=FVe(t,"selectedItems");return{activeIndex:e,selectedItems:r}}function zVe(t){if(t.shiftKey||t.metaKey||t.ctrlKey||t.altKey)return!1;let e=t.target;return!(e instanceof HTMLInputElement&&e.value!==""&&(e.selectionStart!==0||e.selectionEnd!==0))}function Pcr(t){let{removedSelectedItem:e,itemToString:r}=t;return`${r(e)} has been removed.`}var vFn={selectedItems:kt.default.array,initialSelectedItems:kt.default.array,defaultSelectedItems:kt.default.array,itemToString:kt.default.func,getA11yRemovalMessage:kt.default.func,stateReducer:kt.default.func,activeIndex:kt.default.number,initialActiveIndex:kt.default.number,defaultActiveIndex:kt.default.number,onActiveIndexChange:kt.default.func,onSelectedItemsChange:kt.default.func,keyNavigationNext:kt.default.string,keyNavigationPrevious:kt.default.string,environment:kt.default.shape({addEventListener:kt.default.func,removeEventListener:kt.default.func,document:kt.default.shape({getElementById:kt.default.func,activeElement:kt.default.any,body:kt.default.any})})},Rcr={itemToString:tA.itemToString,stateReducer:tA.stateReducer,environment:tA.environment,getA11yRemovalMessage:Pcr,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},Ocr=iA,nX=0,iX=1,oX=2,aX=3,sX=4,lX=5,uX=6,cX=7,fX=8,hX=9,pX=10,dX=11,mX=12,Lcr=Object.freeze({__proto__:null,SelectedItemClick:nX,SelectedItemKeyDownDelete:iX,SelectedItemKeyDownBackspace:oX,SelectedItemKeyDownNavigationNext:aX,SelectedItemKeyDownNavigationPrevious:sX,DropdownKeyDownNavigationPrevious:lX,DropdownKeyDownBackspace:uX,DropdownClick:cX,FunctionAddSelectedItem:fX,FunctionRemoveSelectedItem:hX,FunctionSetSelectedItems:pX,FunctionSetActiveIndex:dX,FunctionReset:mX});function Dcr(t,e){let{type:r,index:n,props:i,selectedItem:o}=e,{activeIndex:l,selectedItems:f}=t,d;switch(r){case nX:d={activeIndex:n};break;case sX:d={activeIndex:l-1<0?0:l-1};break;case aX:d={activeIndex:l+1>=f.length?-1:l+1};break;case oX:case iX:{let v=l;f.length===1?v=-1:l===f.length-1&&(v=f.length-2),d={selectedItems:[...f.slice(0,l),...f.slice(l+1)],activeIndex:v};break}case lX:d={activeIndex:f.length-1};break;case uX:d={selectedItems:f.slice(0,f.length-1)};break;case fX:d={selectedItems:[...f,o]};break;case cX:d={activeIndex:-1};break;case hX:{let v=l,x=f.indexOf(o);x>=0&&(f.length===1?v=-1:x===f.length-1&&(v=f.length-2),d={selectedItems:[...f.slice(0,x),...f.slice(x+1)],activeIndex:v});break}case pX:{let{selectedItems:v}=e;d={selectedItems:v};break}case dX:{let{activeIndex:v}=e;d={activeIndex:v};break}case mX:d={activeIndex:jVe(i,"activeIndex"),selectedItems:jVe(i,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return mt(mt({},t),d)}_Ge.stateChangeTypes=Lcr;function _Ge(t){t===void 0&&(t={}),Ocr(t,_Ge);let e=mt(mt({},Rcr),t),{getA11yRemovalMessage:r,itemToString:n,environment:i,keyNavigationNext:o,keyNavigationPrevious:l}=e,[f,d]=WVe(Dcr,Ccr(e),e),{activeIndex:v,selectedItems:x}=f,b=(0,Ct.useRef)(!0),A=(0,Ct.useRef)(null),P=(0,Ct.useRef)(x),N=(0,Ct.useRef)();N.current=[];let j=Iq({state:f,props:e});(0,Ct.useEffect)(()=>{if(!b.current){if(x.length<P.current.length){let me=P.current.find(be=>x.indexOf(be)<0);BVe(r({itemToString:n,resultCount:x.length,removedSelectedItem:me,activeIndex:v,activeSelectedItem:x[v]}),i.document)}P.current=x}},[x.length]),(0,Ct.useEffect)(()=>{b.current||(v===-1&&A.current?A.current.focus():N.current[v]&&N.current[v].focus())},[v]),L7({isInitialMount:b.current,props:e,state:f});let D=O7("getDropdownProps");(0,Ct.useEffect)(()=>{b.current=!1},[]);let F=(0,Ct.useMemo)(()=>({[l](){d({type:sX})},[o](){d({type:aX})},Delete(){d({type:iX})},Backspace(){d({type:oX})}}),[d,o,l]),U=(0,Ct.useMemo)(()=>({[l](me){zVe(me)&&d({type:lX})},Backspace(me){zVe(me)&&d({type:uX})}}),[d,l]),$=(0,Ct.useCallback)(function(me){let ze=me===void 0?{}:me,{refKey:be="ref",ref:Ne,onClick:Ce,onKeyDown:qe,selectedItem:He,index:Ke}=ze,Je=Oo(ze,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:We}=j.current;if(P7(Ke,He,We.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let pt=()=>{d({type:nX,index:Ke})},dt=Dt=>{let Ot=rA(Dt);Ot&&F[Ot]&&F[Ot](Dt)};return mt({[be]:Nf(Ne,Dt=>{Dt&&N.current.push(Dt)}),tabIndex:Ke===We.activeIndex?0:-1,onClick:Vo(Ce,pt),onKeyDown:Vo(qe,dt)},Je)},[d,j,F]),Z=(0,Ct.useCallback)(function(me,be){let dt=me===void 0?{}:me,{refKey:Ne="ref",ref:Ce,onKeyDown:qe,onClick:He,preventKeyAction:Ke=!1}=dt,Je=Oo(dt,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:We=!1}=be===void 0?{}:be;D("getDropdownProps",We,Ne,A);let lt=ze=>{let Dt=rA(ze);Dt&&U[Dt]&&U[Dt](ze)},pt=()=>{d({type:cX})};return mt(mt({[Ne]:Nf(Ce,ze=>{ze&&(A.current=ze)})},!Ke&&{onKeyDown:Vo(qe,lt),onClick:Vo(He,pt)}),Je)},[d,U,D]),ie=(0,Ct.useCallback)(me=>{d({type:fX,selectedItem:me})},[d]),ne=(0,Ct.useCallback)(me=>{d({type:hX,selectedItem:me})},[d]),ae=(0,Ct.useCallback)(me=>{d({type:pX,selectedItems:me})},[d]),de=(0,Ct.useCallback)(me=>{d({type:dX,activeIndex:me})},[d]),ye=(0,Ct.useCallback)(()=>{d({type:mX})},[d]);return{getSelectedItemProps:$,getDropdownProps:Z,addSelectedItem:ie,removeSelectedItem:ne,setSelectedItems:ae,setActiveIndex:de,reset:ye,selectedItems:x,activeIndex:v}}var ym=je(ln(),1);function gX({buttonProps:t,fetchInputItems:e,label:r,itemToString:n,inputProps:i,onSelectedItemChange:o,timeout:l=300}){let[f,d]=(0,ws.useState)([]),[v,x]=(0,ws.useState)(void 0),b=(0,ws.useRef)(),A=(0,ws.useRef)(null),P=qe=>{clearTimeout(A.current),A.current=setTimeout(()=>{e(qe).then(He=>d(He))},l)},N=({inputValue:qe})=>{v!==void 0&&x(void 0),P(qe)},j=({selectedItem:qe})=>{o!==void 0&&o(qe),x(qe)},{isOpen:D,getToggleButtonProps:F,getLabelProps:U,getMenuProps:$,getInputProps:Z,getComboboxProps:ie,getItemProps:ne,highlightedIndex:ae}=Aq({items:f,itemToString:n,onInputValueChange:N,onSelectedItemChange:j}),Ne=t!=null?t:{},{onClick:de}=Ne,ye=Oo(Ne,["onClick"]),Ce=Z(),{ref:me}=Ce,be=Oo(Ce,["ref"]);return ws.default.createElement("div",{className:"vkf-autocomplete-container"},ws.default.createElement("label",on(mt({},U()),{id:be["aria-labelledby"],className:"visually-hidden"}),r!==void 0?r:i.placeholder),ws.default.createElement("div",mt({className:"form-group"},ie()),ws.default.createElement("input",mt(on(mt({},be),{ref:qe=>{me(qe),b.current=qe},type:"text"}),i)),ws.default.createElement("button",mt(mt(on(mt({type:"button"},F()),{"aria-label":"toggle menu"}),ye),de!==void 0?{onClick:()=>{de(v,b.current!==null?b.current.value:"")}}:{}),"\u2193")),ws.default.createElement("div",{className:"autocomplete-dropdown"},ws.default.createElement("ul",on(mt({className:"autocomplete-result-list"},$()),{id:be["aria-controls"]}),D&&f.map((qe,He)=>ws.default.createElement("li",mt({className:Hs("ui-menu-item",ae===He&&"highlighted",v===qe&&"selected"),key:`${qe.label}${He}`},ne({item:qe,index:He})),qe.label)))))}gX.propTypes={buttonProps:ym.default.object,fetchInputItems:ym.default.func,label:ym.default.string,inputProps:ym.default.object,itemToString:ym.default.func,onSelectedItemChange:ym.default.func,timeout:ym.default.number};p();var vX=(t,e,r)=>{let n=t+"?format=json&q="+e;return hf.get(n).then(i=>{let l=i.data.map(f=>({label:f.display_name,value:f.display_name,lonlat:{x:parseFloat(f.lon),y:parseFloat(f.lat)},type:f.type}));return r!==void 0&&r(),l})};var Ncr=t=>t?t.label:"",xGe=t=>{let{onSelectPosition:e,searchUrl:r}=t,[n,i]=(0,Iv.useState)(!1),o=pu(jd),l=(0,Iv.useCallback)(d=>(i(!0),vX(r,d,()=>{i(!1)})),[r]),f=(d,v)=>{d!==void 0?e(d):vX(r,v).then(x=>{if(x.length>0)e(x[0]);else throw new Error(kr("placenamesearch-unknown-placename"))}).catch(()=>{o({id:"placenamesearch",type:"warning",text:kr("placenamesearch-unknown-placename")})})};return Iv.default.createElement("div",{className:"gazetteersearch-container"},Iv.default.createElement(gX,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:f,"aria-label":kr("placenamesearch-submit"),title:kr("placenamesearch-submit")},fetchInputItems:l,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:kr("placenamesearch-placeholder")},itemToString:Ncr,onSelectedItemChange:f}))};xGe.propTypes={onSelectPosition:yX.default.func.isRequired,searchUrl:yX.default.string.isRequired};var bGe=xGe;p();var Nu=je(St(),1),ob=je(ln(),1);var wGe=t=>{let{onEndDrag:e,onStartDrag:r,orientation:n="horizontal",layer:i}=t,[o,l]=(0,Nu.useState)(i.getOpacity()*100),f=(0,Nu.useRef)(null),d=0,v=100,x=(P,N)=>{if(n==="vertical"){var j=100-(P-d)/(v-d)*100;N.style.top=j+"%",N.innerHTML=P.toFixed(0)+"%";return}let D=(P-d)/(v-d)*100;N.style.left=D+"%",N.innerHTML=P+"%"},b=P=>{let N=P.target.getOpacity()*100;l(N)},A=P=>{l(P),i.setOpacity(P/100)};return(0,Nu.useEffect)(()=>{x(Math.round(o),f.current)},[o]),(0,Nu.useEffect)(()=>(i.on("change:opacity",b),()=>{i.un("change:opacity",b)})),Nu.default.createElement("div",{className:"opacity-container"},Nu.default.createElement("div",{className:"slider-container"},Nu.default.createElement(vq,{onAfterChange:e,onBeforeChange:r,onChange:A,value:o,vertical:n==="vertical"}),Nu.default.createElement("div",{className:"tooltip value",ref:f},"100%")))};wGe.propTypes={onEndDrag:ob.default.func,onStartDrag:ob.default.func,layer:ob.default.oneOfType([ob.default.instanceOf(Sv)]),orientation:ob.default.oneOf(["horizontal","vertical"])};var EGe=wGe;var SGe=t=>{let{extent:e,urlNominatim:r,urlsOsmBaseMap:n}=t,i=Gs(o2),[o,l]=(0,kf.useState)(null),[f,d]=r2(s2);return kf.default.createElement("div",{className:"vkf-mapview-target"},kf.default.createElement(yVe,{extent:e,onLoad:x=>d(x),urlNominatim:r,urlsOsmBaseMap:n},f!==null&&kf.default.createElement("div",null,kf.default.createElement("div",{className:"placenamesearch-container"},kf.default.createElement(bGe,{onSelectPosition:x=>{let[b,A]=[x.lonlat.x,x.lonlat.y],j=xc([parseFloat(b),parseFloat(A)],"EPSG:4326","EPSG:3857");if(f!=null&&f.map){let D=f.map.getView();D.setCenter(j),D.setZoom(12)}},searchUrl:Oi.getNominatimUrl()})),o!==null&&kf.default.createElement(EGe,{layer:o,orientation:"vertical"}))),f!==null&&i!==null&&kf.default.createElement(wVe,{key:i.wms_url,map:f.map,layerName:i.layer_name,onLoad:x=>l(x),wmsUrl:i.wms_url}))};SGe.propTypes={extent:ab.default.arrayOf(ab.default.number),urlNominatim:ab.default.string,urlsOsmBaseMap:ab.default.arrayOf(ab.default.string)};var TGe=SGe;p();function IGe(t){return zn(this,null,function*(){let e=Oi.getSettings().API_SEARCH;if(e===void 0)throw new Error("The url for the search endpoint is not set.");let r=yield hf.get(`${e}/_doc/${t}`);if(r.status===200)return r.data._source;console.error("Something went wrong while trying to fetch search document.")})}var kcr=t=>{var e,r,n,i;return{map_id:t.map_id,clip:(t==null?void 0:t.clip)!==void 0&&t.clip!==null?{type:t.clip.type,coordinates:t.clip.coordinates}:void 0,overwrites:t.transformation_id,params:{algorithm:(r=(e=t==null?void 0:t.params)==null?void 0:e.algorithm)!=null?r:"affine",gcps:(i=(n=t==null?void 0:t.params)==null?void 0:n.gcps)!=null?i:[]}}},MGe=t=>{let{urlsOsmBaseMap:e,urlNominatim:r}=t,n=pu(l2),i=pu(i2),o=pu(jd),l=Gs(n2),[f,d]=(0,ku.useState)(null),[v,x]=(0,ku.useState)(!1);return(0,ku.useEffect)(()=>zn(null,null,function*(){let b=AGe.default.parse(location.search);if(b.map_id!==void 0){let{transformations:A,additional_properties:P}=yield S2e(b.map_id),{active_transformation_id:N,extent:j,pending_jobs:D}=P,F=yield IGe(b.map_id),U=j!==null?mUe(j):null;D&&o({id:"georeference-view",type:"warning",text:"F\xFCr diese Karte existieren bisher noch unverarbeitete Georeferenzierung."});let $=b.transformation_id!==void 0?parseInt(b.transformation_id):N;if(A.length>0&&$!==null){let Z=A.find(ie=>ie.transformation_id===$);U=dUe(Z),n(kcr(Z))}else if(N===null)n({map_id:b.map_id,clip:null,overwrites:0,params:{algorithm:"affine",gcps:[]}});else throw new Error("This transformation type is not supported yet.");i(F),d(U),x(!0)}}),[]),ku.default.createElement("div",{className:"vkf-georeference-view"},ku.default.createElement("div",{className:"outer-map-container"},ku.default.createElement(pVe,null)),ku.default.createElement("div",{className:"outer-map-container"},v&&ku.default.createElement(TGe,{extent:f!==null?f:void 0,urlsOsmBaseMap:e,urlNominatim:r})),l&&ku.default.createElement(_Ue,null))};MGe.propTypes={urlsOsmBaseMap:Mq.default.arrayOf(Mq.default.string).isRequired,urlNominatim:Mq.default.string.isRequired};var CGe=MGe;p();p();var Fl=je(St(),1);var Cq=je(ln(),1);var PGe=t=>{let{onClose:e,text:r,type:n}=t;return Fl.default.createElement("div",{className:"notification-item"},Fl.default.createElement("div",{className:Hs("alert","alert-"+n),role:"alert"},Fl.default.createElement("div",{className:"close"},Fl.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:e},Fl.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),Fl.default.createElement("div",{className:"text"},r)))};PGe.propTypes={onClose:Cq.default.func,text:Cq.default.string,type:Cq.default.string};var qcr=()=>{let t=Gs(jd),e=YD(t),[r,n]=(0,Fl.useState)([]);return(0,Fl.useEffect)(()=>{if(t!==null&&t.id!==null&&t!==e){let i=[...r],o=r.findIndex(l=>l.id===t.id);o>-1?i.splice(o,1,t.text!==null?t:void 0):i.splice(0,0,t),n(i.filter(l=>l!==void 0))}},[t,r,e]),Fl.default.createElement("div",{className:Hs("vkf-notifications",r.length===0?"hide":"")},r.map(({type:i,text:o},l)=>Fl.default.createElement(PGe,{key:l,onClose:()=>{let f=[...r];f.splice(l,1),n(f)},type:i,text:o})))},RGe=qcr;var OGe=RGe;var Fcr=()=>Av.default.createElement(o2e,null,Av.default.createElement("div",{className:"vk-app-georeferencer"},Av.default.createElement("div",null,Av.default.createElement(vUe,null),Av.default.createElement(CGe,{urlsOsmBaseMap:Oi.getDefaultBaseMapUrls(),urlNominatim:Oi.getNominatimUrl()}),Av.default.createElement(OGe,null)))),LGe=Fcr;var jcr=Oi;function zcr(t){NGe.default.render(DGe.default.createElement(LGe,null),t)}return F$e(Ucr)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/