var vk2=(()=>{var R1e=Object.create;var Sv=Object.defineProperty,D1e=Object.defineProperties,L1e=Object.getOwnPropertyDescriptor,F1e=Object.getOwnPropertyDescriptors,z1e=Object.getOwnPropertyNames,lx=Object.getOwnPropertySymbols,N1e=Object.getPrototypeOf,eT=Object.prototype.hasOwnProperty,z3=Object.prototype.propertyIsEnumerable;var cx=Math.pow,F3=(e,t,r)=>t in e?Sv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,at=(e,t)=>{for(var r in t||(t={}))eT.call(t,r)&&F3(e,r,t[r]);if(lx)for(var r of lx(t))z3.call(t,r)&&F3(e,r,t[r]);return e},va=(e,t)=>D1e(e,F1e(t));var ud=(e,t)=>{var r={};for(var o in e)eT.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&lx)for(var o of lx(e))t.indexOf(o)<0&&z3.call(e,o)&&(r[o]=e[o]);return r};var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),B1e=(e,t)=>{for(var r in t)Sv(e,r,{get:t[r],enumerable:!0})},N3=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of z1e(t))!eT.call(e,u)&&u!==r&&Sv(e,u,{get:()=>t[u],enumerable:!(o=L1e(t,u))||o.enumerable});return e};var yt=(e,t,r)=>(r=e!=null?R1e(N1e(e)):{},N3(t||!e||!e.__esModule?Sv(r,"default",{value:e,enumerable:!0}):r,e)),U1e=e=>N3(Sv({},"__esModule",{value:!0}),e);var gi=(e,t,r)=>new Promise((o,u)=>{var a=q=>{try{x(r.next(q))}catch(T){u(T)}},m=q=>{try{x(r.throw(q))}catch(T){u(T)}},x=q=>q.done?o(q.value):Promise.resolve(q.value).then(a,m);x((r=r.apply(e,t)).next())});var tT=b((iIt,U3)=>{"use strict";var B3=Object.getOwnPropertySymbols,j1e=Object.prototype.hasOwnProperty,V1e=Object.prototype.propertyIsEnumerable;function $1e(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function W1e(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(o.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(a){u[a]=a}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}U3.exports=W1e()?Object.assign:function(e,t){for(var r,o=$1e(e),u,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var m in r)j1e.call(r,m)&&(o[m]=r[m]);if(B3){u=B3(r);for(var x=0;x<u.length;x++)V1e.call(r,u[x])&&(o[u[x]]=r[u[x]])}}return o}});var iU=b(cr=>{"use strict";var iT=tT(),ld=60103,$3=60106;cr.Fragment=60107;cr.StrictMode=60108;cr.Profiler=60114;var W3=60109,G3=60110,K3=60112;cr.Suspense=60113;var H3=60115,Z3=60116;typeof Symbol=="function"&&Symbol.for&&(yo=Symbol.for,ld=yo("react.element"),$3=yo("react.portal"),cr.Fragment=yo("react.fragment"),cr.StrictMode=yo("react.strict_mode"),cr.Profiler=yo("react.profiler"),W3=yo("react.provider"),G3=yo("react.context"),K3=yo("react.forward_ref"),cr.Suspense=yo("react.suspense"),H3=yo("react.memo"),Z3=yo("react.lazy"));var yo,j3=typeof Symbol=="function"&&Symbol.iterator;function G1e(e){return e===null||typeof e!="object"?null:(e=j3&&e[j3]||e["@@iterator"],typeof e=="function"?e:null)}function qv(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J3={};function cd(e,t,r){this.props=e,this.context=t,this.refs=J3,this.updater=r||X3}cd.prototype.isReactComponent={};cd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(qv(85));this.updater.enqueueSetState(this,e,t,"setState")};cd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Y3(){}Y3.prototype=cd.prototype;function nT(e,t,r){this.props=e,this.context=t,this.refs=J3,this.updater=r||X3}var aT=nT.prototype=new Y3;aT.constructor=nT;iT(aT,cd.prototype);aT.isPureReactComponent=!0;var oT={current:null},Q3=Object.prototype.hasOwnProperty,eU={key:!0,ref:!0,__self:!0,__source:!0};function tU(e,t,r){var o,u={},a=null,m=null;if(t!=null)for(o in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(a=""+t.key),t)Q3.call(t,o)&&!eU.hasOwnProperty(o)&&(u[o]=t[o]);var x=arguments.length-2;if(x===1)u.children=r;else if(1<x){for(var q=Array(x),T=0;T<x;T++)q[T]=arguments[T+2];u.children=q}if(e&&e.defaultProps)for(o in x=e.defaultProps,x)u[o]===void 0&&(u[o]=x[o]);return{$$typeof:ld,type:e,key:a,ref:m,props:u,_owner:oT.current}}function K1e(e,t){return{$$typeof:ld,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sT(e){return typeof e=="object"&&e!==null&&e.$$typeof===ld}function H1e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var V3=/\/+/g;function rT(e,t){return typeof e=="object"&&e!==null&&e.key!=null?H1e(""+e.key):t.toString(36)}function fx(e,t,r,o,u){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(a){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case ld:case $3:m=!0;}}if(m)return m=e,u=u(m),e=o===""?"."+rT(m,0):o,Array.isArray(u)?(r="",e!=null&&(r=e.replace(V3,"$&/")+"/"),fx(u,t,r,"",function(T){return T})):u!=null&&(sT(u)&&(u=K1e(u,r+(!u.key||m&&m.key===u.key?"":(""+u.key).replace(V3,"$&/")+"/")+e)),t.push(u)),1;if(m=0,o=o===""?".":o+":",Array.isArray(e))for(var x=0;x<e.length;x++){a=e[x];var q=o+rT(a,x);m+=fx(a,t,r,q,u)}else if(q=G1e(e),typeof q=="function")for(e=q.call(e),x=0;!(a=e.next()).done;)a=a.value,q=o+rT(a,x++),m+=fx(a,t,r,q,u);else if(a==="object")throw t=""+e,Error(qv(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return m}function hx(e,t,r){if(e==null)return e;var o=[],u=0;return fx(e,o,"","",function(a){return t.call(r,a,u++)}),o}function Z1e(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var rU={current:null};function bu(){var e=rU.current;if(e===null)throw Error(qv(321));return e}var X1e={ReactCurrentDispatcher:rU,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:oT,IsSomeRendererActing:{current:!1},assign:iT};cr.Children={map:hx,forEach:function(e,t,r){hx(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return hx(e,function(){t++}),t},toArray:function(e){return hx(e,function(t){return t})||[]},only:function(e){if(!sT(e))throw Error(qv(143));return e}};cr.Component=cd;cr.PureComponent=nT;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X1e;cr.cloneElement=function(e,t,r){if(e==null)throw Error(qv(267,e));var o=iT({},e.props),u=e.key,a=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,m=oT.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var x=e.type.defaultProps;for(q in t)Q3.call(t,q)&&!eU.hasOwnProperty(q)&&(o[q]=t[q]===void 0&&x!==void 0?x[q]:t[q])}var q=arguments.length-2;if(q===1)o.children=r;else if(1<q){x=Array(q);for(var T=0;T<q;T++)x[T]=arguments[T+2];o.children=x}return{$$typeof:ld,type:e.type,key:u,ref:a,props:o,_owner:m}};cr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:G3,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:W3,_context:e},e.Consumer=e};cr.createElement=tU;cr.createFactory=function(e){var t=tU.bind(null,e);return t.type=e,t};cr.createRef=function(){return{current:null}};cr.forwardRef=function(e){return{$$typeof:K3,render:e}};cr.isValidElement=sT;cr.lazy=function(e){return{$$typeof:Z3,_payload:{_status:-1,_result:e},_init:Z1e}};cr.memo=function(e,t){return{$$typeof:H3,type:e,compare:t===void 0?null:t}};cr.useCallback=function(e,t){return bu().useCallback(e,t)};cr.useContext=function(e,t){return bu().useContext(e,t)};cr.useDebugValue=function(){};cr.useEffect=function(e,t){return bu().useEffect(e,t)};cr.useImperativeHandle=function(e,t,r){return bu().useImperativeHandle(e,t,r)};cr.useLayoutEffect=function(e,t){return bu().useLayoutEffect(e,t)};cr.useMemo=function(e,t){return bu().useMemo(e,t)};cr.useReducer=function(e,t,r){return bu().useReducer(e,t,r)};cr.useRef=function(e){return bu().useRef(e)};cr.useState=function(e){return bu().useState(e)};cr.version="17.0.2"});var Rr=b((aIt,nU)=>{"use strict";nU.exports=iU()});var cU=b(br=>{"use strict";var fd,Tv,vx,pT;typeof performance=="object"&&typeof performance.now=="function"?(aU=performance,br.unstable_now=function(){return aU.now()}):(uT=Date,oU=uT.now(),br.unstable_now=function(){return uT.now()-oU});var aU,uT,oU;typeof window=="undefined"||typeof MessageChannel!="function"?(hd=null,lT=null,cT=function(){if(hd!==null)try{var e=br.unstable_now();hd(!0,e),hd=null}catch(t){throw setTimeout(cT,0),t}},fd=function(e){hd!==null?setTimeout(fd,0,e):(hd=e,setTimeout(cT,0))},Tv=function(e,t){lT=setTimeout(e,t)},vx=function(){clearTimeout(lT)},br.unstable_shouldYield=function(){return!1},pT=br.unstable_forceFrameRate=function(){}):(sU=window.setTimeout,uU=window.clearTimeout,typeof console!="undefined"&&(lU=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof lU!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Av=!1,Ev=null,dx=-1,hT=5,fT=0,br.unstable_shouldYield=function(){return br.unstable_now()>=fT},pT=function(){},br.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):hT=0<e?Math.floor(1e3/e):5},dT=new MessageChannel,px=dT.port2,dT.port1.onmessage=function(){if(Ev!==null){var e=br.unstable_now();fT=e+hT;try{Ev(!0,e)?px.postMessage(null):(Av=!1,Ev=null)}catch(t){throw px.postMessage(null),t}}else Av=!1},fd=function(e){Ev=e,Av||(Av=!0,px.postMessage(null))},Tv=function(e,t){dx=sU(function(){e(br.unstable_now())},t)},vx=function(){uU(dx),dx=-1});var hd,lT,cT,sU,uU,lU,Av,Ev,dx,hT,fT,dT,px;function mT(e,t){var r=e.length;e.push(t);e:for(;;){var o=r-1>>>1,u=e[o];if(u!==void 0&&0<mx(u,t))e[o]=t,e[r]=u,r=o;else break e}}function Yo(e){return e=e[0],e===void 0?null:e}function gx(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var o=0,u=e.length;o<u;){var a=2*(o+1)-1,m=e[a],x=a+1,q=e[x];if(m!==void 0&&0>mx(m,r))q!==void 0&&0>mx(q,m)?(e[o]=q,e[x]=r,o=x):(e[o]=m,e[a]=r,o=a);else if(q!==void 0&&0>mx(q,r))e[o]=q,e[x]=r,o=x;else break e}}return t}return null}function mx(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var Es=[],Rl=[],J1e=1,_o=null,On=3,yx=!1,hh=!1,Iv=!1;function vT(e){for(var t=Yo(Rl);t!==null;){if(t.callback===null)gx(Rl);else if(t.startTime<=e)gx(Rl),t.sortIndex=t.expirationTime,mT(Es,t);else break;t=Yo(Rl)}}function gT(e){if(Iv=!1,vT(e),!hh)if(Yo(Es)!==null)hh=!0,fd(yT);else{var t=Yo(Rl);t!==null&&Tv(gT,t.startTime-e)}}function yT(e,t){hh=!1,Iv&&(Iv=!1,vx()),yx=!0;var r=On;try{for(vT(t),_o=Yo(Es);_o!==null&&(!(_o.expirationTime>t)||e&&!br.unstable_shouldYield());){var o=_o.callback;if(typeof o=="function"){_o.callback=null,On=_o.priorityLevel;var u=o(_o.expirationTime<=t);t=br.unstable_now(),typeof u=="function"?_o.callback=u:_o===Yo(Es)&&gx(Es),vT(t)}else gx(Es);_o=Yo(Es)}if(_o!==null)var a=!0;else{var m=Yo(Rl);m!==null&&Tv(gT,m.startTime-t),a=!1}return a}finally{_o=null,On=r,yx=!1}}var Y1e=pT;br.unstable_IdlePriority=5;br.unstable_ImmediatePriority=1;br.unstable_LowPriority=4;br.unstable_NormalPriority=3;br.unstable_Profiling=null;br.unstable_UserBlockingPriority=2;br.unstable_cancelCallback=function(e){e.callback=null};br.unstable_continueExecution=function(){hh||yx||(hh=!0,fd(yT))};br.unstable_getCurrentPriorityLevel=function(){return On};br.unstable_getFirstCallbackNode=function(){return Yo(Es)};br.unstable_next=function(e){switch(On){case 1:case 2:case 3:var t=3;break;default:t=On;}var r=On;On=t;try{return e()}finally{On=r}};br.unstable_pauseExecution=function(){};br.unstable_requestPaint=Y1e;br.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3;}var r=On;On=e;try{return t()}finally{On=r}};br.unstable_scheduleCallback=function(e,t,r){var o=br.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?o+r:o):r=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3;}return u=r+u,e={id:J1e++,callback:t,priorityLevel:e,startTime:r,expirationTime:u,sortIndex:-1},r>o?(e.sortIndex=r,mT(Rl,e),Yo(Es)===null&&e===Yo(Rl)&&(Iv?vx():Iv=!0,Tv(gT,r-o))):(e.sortIndex=u,mT(Es,e),hh||yx||(hh=!0,fd(yT))),e};br.unstable_wrapCallback=function(e){var t=On;return function(){var r=On;On=t;try{return e.apply(this,arguments)}finally{On=r}}}});var fU=b((sIt,hU)=>{"use strict";hU.exports=cU()});var Y5=b(Ao=>{"use strict";var hb=Rr(),ei=tT(),Ki=fU();function Ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!hb)throw Error(Ke(227));var A4=new Set,ng={};function wh(e,t){kd(e,t),kd(e+"Capture",t)}function kd(e,t){for(ng[e]=t,e=0;e<t.length;e++)A4.add(t[e])}var Tu=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Q1e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dU=Object.prototype.hasOwnProperty,pU={},mU={};function ewe(e){return dU.call(mU,e)?!0:dU.call(pU,e)?!1:Q1e.test(e)?mU[e]=!0:(pU[e]=!0,!1)}function twe(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1;}}function rwe(e,t,r,o){if(t===null||typeof t=="undefined"||twe(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t;}return!1}function Qn(e,t,r,o,u,a,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=m}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dn[e]=new Qn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dn[t]=new Qn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dn[e]=new Qn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dn[e]=new Qn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dn[e]=new Qn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dn[e]=new Qn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dn[e]=new Qn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dn[e]=new Qn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dn[e]=new Qn(e,5,!1,e.toLowerCase(),null,!1,!1)});var TI=/[\-:]([a-z])/g;function II(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(TI,II);dn[t]=new Qn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(TI,II);dn[t]=new Qn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(TI,II);dn[t]=new Qn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dn[e]=new Qn(e,1,!1,e.toLowerCase(),null,!1,!1)});dn.xlinkHref=new Qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dn[e]=new Qn(e,1,!1,e.toLowerCase(),null,!0,!0)});function CI(e,t,r,o){var u=dn.hasOwnProperty(t)?dn[t]:null,a=u!==null?u.type===0:o?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(rwe(t,r,u,o)&&(r=null),o||u===null?ewe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,o=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Sh=hb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uv=60103,dh=60106,Ll=60107,PI=60108,Gv=60114,MI=60109,OI=60110,fb=60112,Kv=60113,jx=60120,db=60115,kI=60116,RI=60121,DI=60128,E4=60129,LI=60130,UT=60131;typeof Symbol=="function"&&Symbol.for&&(Ri=Symbol.for,Uv=Ri("react.element"),dh=Ri("react.portal"),Ll=Ri("react.fragment"),PI=Ri("react.strict_mode"),Gv=Ri("react.profiler"),MI=Ri("react.provider"),OI=Ri("react.context"),fb=Ri("react.forward_ref"),Kv=Ri("react.suspense"),jx=Ri("react.suspense_list"),db=Ri("react.memo"),kI=Ri("react.lazy"),RI=Ri("react.block"),Ri("react.scope"),DI=Ri("react.opaque.id"),E4=Ri("react.debug_trace_mode"),LI=Ri("react.offscreen"),UT=Ri("react.legacy_hidden"));var Ri,vU=typeof Symbol=="function"&&Symbol.iterator;function Cv(e){return e===null||typeof e!="object"?null:(e=vU&&e[vU]||e["@@iterator"],typeof e=="function"?e:null)}var _T;function jv(e){if(_T===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_T=t&&t[1]||""}return`
`+_T+e}var xT=!1;function _x(e,t){if(!e||xT)return"";xT=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(q){var o=q}Reflect.construct(e,[],t)}else{try{t.call()}catch(q){o=q}e.call(t.prototype)}}else{try{throw Error()}catch(q){o=q}e()}}catch(q){if(q&&o&&typeof q.stack=="string"){for(var u=q.stack.split(`
`),a=o.stack.split(`
`),m=u.length-1,x=a.length-1;1<=m&&0<=x&&u[m]!==a[x];)x--;for(;1<=m&&0<=x;m--,x--)if(u[m]!==a[x]){if(m!==1||x!==1)do if(m--,x--,0>x||u[m]!==a[x])return`
`+u[m].replace(" at new "," at ");while(1<=m&&0<=x);break}}}finally{xT=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?jv(e):""}function iwe(e){switch(e.tag){case 5:return jv(e.type);case 16:return jv("Lazy");case 13:return jv("Suspense");case 19:return jv("SuspenseList");case 0:case 2:case 15:return e=_x(e.type,!1),e;case 11:return e=_x(e.type.render,!1),e;case 22:return e=_x(e.type._render,!1),e;case 1:return e=_x(e.type,!0),e;default:return"";}}function Sd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ll:return"Fragment";case dh:return"Portal";case Gv:return"Profiler";case PI:return"StrictMode";case Kv:return"Suspense";case jx:return"SuspenseList";}if(typeof e=="object")switch(e.$$typeof){case OI:return(e.displayName||"Context")+".Consumer";case MI:return(e._context.displayName||"Context")+".Provider";case fb:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case db:return Sd(e.type);case RI:return Sd(e._render);case kI:t=e._payload,e=e._init;try{return Sd(e(t))}catch(r){}}return null}function Hl(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return"";}}function T4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nwe(e){var t=T4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(m){o=""+m,a.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(m){o=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xx(e){e._valueTracker||(e._valueTracker=nwe(e))}function I4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=T4(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function Vx(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function jT(e,t){var r=t.checked;return ei({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function gU(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=Hl(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function C4(e,t){t=t.checked,t!=null&&CI(e,"checked",t,!1)}function VT(e,t){C4(e,t);var r=Hl(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$T(e,t.type,r):t.hasOwnProperty("defaultValue")&&$T(e,t.type,Hl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yU(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $T(e,t,r){(t!=="number"||Vx(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function awe(e){var t="";return hb.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function WT(e,t){return e=ei({children:void 0},t),(t=awe(t.children))&&(e.children=t),e}function qd(e,t,r,o){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Hl(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function GT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return ei({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _U(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ke(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Ke(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Hl(r)}}function P4(e,t){var r=Hl(t.value),o=Hl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function xU(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var KT={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function M4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function HT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?M4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bx,O4=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,o,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,u)})}:e}(function(e,t){if(e.namespaceURI!==KT.svg||"innerHTML"in e)e.innerHTML=t;else{for(bx=bx||document.createElement("div"),bx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ag(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hv={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},owe=["Webkit","ms","Moz","O"];Object.keys(Hv).forEach(function(e){owe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hv[t]=Hv[e]})});function k4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hv.hasOwnProperty(e)&&Hv[e]?(""+t).trim():t+"px"}function R4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,u=k4(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,u):e[r]=u}}var swe=ei({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZT(e,t){if(t){if(swe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ke(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ke(62))}}function XT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function FI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var JT=null,Ad=null,Ed=null;function bU(e){if(e=_g(e)){if(typeof JT!="function")throw Error(Ke(280));var t=e.stateNode;t&&(t=_b(t),JT(e.stateNode,e.type,t))}}function D4(e){Ad?Ed?Ed.push(e):Ed=[e]:Ad=e}function L4(){if(Ad){var e=Ad,t=Ed;if(Ed=Ad=null,bU(e),t)for(e=0;e<t.length;e++)bU(t[e])}}function zI(e,t){return e(t)}function F4(e,t,r,o,u){return e(t,r,o,u)}function NI(){}var z4=zI,ph=!1,bT=!1;function BI(){(Ad!==null||Ed!==null)&&(NI(),L4())}function uwe(e,t,r){if(bT)return e(t,r);bT=!0;try{return z4(e,t,r)}finally{bT=!1,BI()}}function og(e,t){var r=e.stateNode;if(r===null)return null;var o=_b(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1;}if(e)return null;if(r&&typeof r!="function")throw Error(Ke(231,t,typeof r));return r}var YT=!1;if(Tu)try{dd={},Object.defineProperty(dd,"passive",{get:function(){YT=!0}}),window.addEventListener("test",dd,dd),window.removeEventListener("test",dd,dd)}catch(e){YT=!1}var dd;function lwe(e,t,r,o,u,a,m,x,q){var T=Array.prototype.slice.call(arguments,3);try{t.apply(r,T)}catch(I){this.onError(I)}}var Zv=!1,$x=null,Wx=!1,QT=null,cwe={onError:function(e){Zv=!0,$x=e}};function hwe(e,t,r,o,u,a,m,x,q){Zv=!1,$x=null,lwe.apply(cwe,arguments)}function fwe(e,t,r,o,u,a,m,x,q){if(hwe.apply(this,arguments),Zv){if(Zv){var T=$x;Zv=!1,$x=null}else throw Error(Ke(198));Wx||(Wx=!0,QT=T)}}function qh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function N4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wU(e){if(qh(e)!==e)throw Error(Ke(188))}function dwe(e){var t=e.alternate;if(!t){if(t=qh(e),t===null)throw Error(Ke(188));return t!==e?null:e}for(var r=e,o=t;;){var u=r.return;if(u===null)break;var a=u.alternate;if(a===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===a.child){for(a=u.child;a;){if(a===r)return wU(u),e;if(a===o)return wU(u),t;a=a.sibling}throw Error(Ke(188))}if(r.return!==o.return)r=u,o=a;else{for(var m=!1,x=u.child;x;){if(x===r){m=!0,r=u,o=a;break}if(x===o){m=!0,o=u,r=a;break}x=x.sibling}if(!m){for(x=a.child;x;){if(x===r){m=!0,r=a,o=u;break}if(x===o){m=!0,o=a,r=u;break}x=x.sibling}if(!m)throw Error(Ke(189))}}if(r.alternate!==o)throw Error(Ke(190))}if(r.tag!==3)throw Error(Ke(188));return r.stateNode.current===r?e:t}function B4(e){if(e=dwe(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function SU(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var U4,UI,j4,V4,eI=!1,Ts=[],Bl=null,Ul=null,jl=null,sg=new Map,ug=new Map,Pv=[],qU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tI(e,t,r,o,u){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:u,targetContainers:[o]}}function AU(e,t){switch(e){case"focusin":case"focusout":Bl=null;break;case"dragenter":case"dragleave":Ul=null;break;case"mouseover":case"mouseout":jl=null;break;case"pointerover":case"pointerout":sg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ug.delete(t.pointerId);}}function Mv(e,t,r,o,u,a){return e===null||e.nativeEvent!==a?(e=tI(t,r,o,u,a),t!==null&&(t=_g(t),t!==null&&UI(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function pwe(e,t,r,o,u){switch(t){case"focusin":return Bl=Mv(Bl,e,t,r,o,u),!0;case"dragenter":return Ul=Mv(Ul,e,t,r,o,u),!0;case"mouseover":return jl=Mv(jl,e,t,r,o,u),!0;case"pointerover":var a=u.pointerId;return sg.set(a,Mv(sg.get(a)||null,e,t,r,o,u)),!0;case"gotpointercapture":return a=u.pointerId,ug.set(a,Mv(ug.get(a)||null,e,t,r,o,u)),!0;}return!1}function mwe(e){var t=mh(e.target);if(t!==null){var r=qh(t);if(r!==null){if(t=r.tag,t===13){if(t=N4(r),t!==null){e.blockedOn=t,V4(e.lanePriority,function(){Ki.unstable_runWithPriority(e.priority,function(){j4(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ox(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=WI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=_g(r),t!==null&&UI(t),e.blockedOn=r,!1;t.shift()}return!0}function EU(e,t,r){Ox(e)&&r.delete(t)}function vwe(){for(eI=!1;0<Ts.length;){var e=Ts[0];if(e.blockedOn!==null){e=_g(e.blockedOn),e!==null&&U4(e);break}for(var t=e.targetContainers;0<t.length;){var r=WI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Ts.shift()}Bl!==null&&Ox(Bl)&&(Bl=null),Ul!==null&&Ox(Ul)&&(Ul=null),jl!==null&&Ox(jl)&&(jl=null),sg.forEach(EU),ug.forEach(EU)}function Ov(e,t){e.blockedOn===t&&(e.blockedOn=null,eI||(eI=!0,Ki.unstable_scheduleCallback(Ki.unstable_NormalPriority,vwe)))}function $4(e){function t(u){return Ov(u,e)}if(0<Ts.length){Ov(Ts[0],e);for(var r=1;r<Ts.length;r++){var o=Ts[r];o.blockedOn===e&&(o.blockedOn=null)}}for(Bl!==null&&Ov(Bl,e),Ul!==null&&Ov(Ul,e),jl!==null&&Ov(jl,e),sg.forEach(t),ug.forEach(t),r=0;r<Pv.length;r++)o=Pv[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<Pv.length&&(r=Pv[0],r.blockedOn===null);)mwe(r),r.blockedOn===null&&Pv.shift()}function wx(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var gd={animationend:wx("Animation","AnimationEnd"),animationiteration:wx("Animation","AnimationIteration"),animationstart:wx("Animation","AnimationStart"),transitionend:wx("Transition","TransitionEnd")},wT={},W4={};Tu&&(W4=document.createElement("div").style,"AnimationEvent"in window||(delete gd.animationend.animation,delete gd.animationiteration.animation,delete gd.animationstart.animation),"TransitionEvent"in window||delete gd.transitionend.transition);function pb(e){if(wT[e])return wT[e];if(!gd[e])return e;var t=gd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in W4)return wT[e]=t[r];return e}var G4=pb("animationend"),K4=pb("animationiteration"),H4=pb("animationstart"),Z4=pb("transitionend"),X4=new Map,jI=new Map,gwe=["abort","abort",G4,"animationEnd",K4,"animationIteration",H4,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Z4,"transitionEnd","waiting","waiting"];function VI(e,t){for(var r=0;r<e.length;r+=2){var o=e[r],u=e[r+1];u="on"+(u[0].toUpperCase()+u.slice(1)),jI.set(o,t),X4.set(o,u),wh(u,[o])}}var ywe=Ki.unstable_now;ywe();var Br=8;function md(e){if(1&e)return Br=15,1;if(2&e)return Br=14,2;if(4&e)return Br=13,4;var t=24&e;return t!==0?(Br=12,t):e&32?(Br=11,32):(t=192&e,t!==0?(Br=10,t):e&256?(Br=9,256):(t=3584&e,t!==0?(Br=8,t):e&4096?(Br=7,4096):(t=4186112&e,t!==0?(Br=6,t):(t=62914560&e,t!==0?(Br=5,t):e&67108864?(Br=4,67108864):e&134217728?(Br=3,134217728):(t=805306368&e,t!==0?(Br=2,t):1073741824&e?(Br=1,1073741824):(Br=8,e))))))}function _we(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function xwe(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ke(358,e));}}function lg(e,t){var r=e.pendingLanes;if(r===0)return Br=0;var o=0,u=0,a=e.expiredLanes,m=e.suspendedLanes,x=e.pingedLanes;if(a!==0)o=a,u=Br=15;else if(a=r&134217727,a!==0){var q=a&~m;q!==0?(o=md(q),u=Br):(x&=a,x!==0&&(o=md(x),u=Br))}else a=r&~m,a!==0?(o=md(a),u=Br):x!==0&&(o=md(x),u=Br);if(o===0)return 0;if(o=31-Zl(o),o=r&((0>o?0:1<<o)<<1)-1,t!==0&&t!==o&&!(t&m)){if(md(t),u<=Br)return t;Br=u}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Zl(t),u=1<<r,o|=e[r],t&=~u;return o}function J4(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gx(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=vd(24&~t),e===0?Gx(10,t):e;case 10:return e=vd(192&~t),e===0?Gx(8,t):e;case 8:return e=vd(3584&~t),e===0&&(e=vd(4186112&~t),e===0&&(e=512)),e;case 2:return t=vd(805306368&~t),t===0&&(t=268435456),t;}throw Error(Ke(358,e))}function vd(e){return e&-e}function ST(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mb(e,t,r){e.pendingLanes|=t;var o=t-1;e.suspendedLanes&=o,e.pingedLanes&=o,e=e.eventTimes,t=31-Zl(t),e[t]=r}var Zl=Math.clz32?Math.clz32:Swe,bwe=Math.log,wwe=Math.LN2;function Swe(e){return e===0?32:31-(bwe(e)/wwe|0)|0}var qwe=Ki.unstable_UserBlockingPriority,Awe=Ki.unstable_runWithPriority,kx=!0;function Ewe(e,t,r,o){ph||NI();var u=$I,a=ph;ph=!0;try{F4(u,e,t,r,o)}finally{(ph=a)||BI()}}function Twe(e,t,r,o){Awe(qwe,$I.bind(null,e,t,r,o))}function $I(e,t,r,o){if(kx){var u;if((u=(t&4)===0)&&0<Ts.length&&-1<qU.indexOf(e))e=tI(null,e,t,r,o),Ts.push(e);else{var a=WI(e,t,r,o);if(a===null)u&&AU(e,o);else{if(u){if(-1<qU.indexOf(e)){e=tI(a,e,t,r,o),Ts.push(e);return}if(pwe(a,e,t,r,o))return;AU(e,o)}c5(e,t,o,null,r)}}}}function WI(e,t,r,o){var u=FI(o);if(u=mh(u),u!==null){var a=qh(u);if(a===null)u=null;else{var m=a.tag;if(m===13){if(u=N4(a),u!==null)return u;u=null}else if(m===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;u=null}else a!==u&&(u=null)}}return c5(e,t,o,u,r),null}var Fl=null,GI=null,Rx=null;function Y4(){if(Rx)return Rx;var e,t=GI,r=t.length,o,u="value"in Fl?Fl.value:Fl.textContent,a=u.length;for(e=0;e<r&&t[e]===u[e];e++);var m=r-e;for(o=1;o<=m&&t[r-o]===u[a-o];o++);return Rx=u.slice(e,1<o?1-o:void 0)}function Dx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sx(){return!0}function TU(){return!1}function eo(e){function t(r,o,u,a,m){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=a,this.target=m,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(a):a[x]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Sx:TU,this.isPropagationStopped=TU,this}return ei(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Sx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Sx)},persist:function(){},isPersistent:Sx}),t}var Fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KI=eo(Fd),yg=ei({},Fd,{view:0,detail:0}),Iwe=eo(yg),qT,AT,kv,vb=ei({},yg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:HI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kv&&(kv&&e.type==="mousemove"?(qT=e.screenX-kv.screenX,AT=e.screenY-kv.screenY):AT=qT=0,kv=e),qT)},movementY:function(e){return"movementY"in e?e.movementY:AT}}),IU=eo(vb),Cwe=ei({},vb,{dataTransfer:0}),Pwe=eo(Cwe),Mwe=ei({},yg,{relatedTarget:0}),ET=eo(Mwe),Owe=ei({},Fd,{animationName:0,elapsedTime:0,pseudoElement:0}),kwe=eo(Owe),Rwe=ei({},Fd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dwe=eo(Rwe),Lwe=ei({},Fd,{data:0}),CU=eo(Lwe),Fwe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zwe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nwe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bwe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nwe[e])?!!t[e]:!1}function HI(){return Bwe}var Uwe=ei({},yg,{key:function(e){if(e.key){var t=Fwe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Dx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zwe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:HI,charCode:function(e){return e.type==="keypress"?Dx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jwe=eo(Uwe),Vwe=ei({},vb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PU=eo(Vwe),$we=ei({},yg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:HI}),Wwe=eo($we),Gwe=ei({},Fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kwe=eo(Gwe),Hwe=ei({},vb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zwe=eo(Hwe),Xwe=[9,13,27,32],ZI=Tu&&"CompositionEvent"in window,Xv=null;Tu&&"documentMode"in document&&(Xv=document.documentMode);var Jwe=Tu&&"TextEvent"in window&&!Xv,Q4=Tu&&(!ZI||Xv&&8<Xv&&11>=Xv),MU=" ",OU=!1;function e5(e,t){switch(e){case"keyup":return Xwe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function t5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yd=!1;function Ywe(e,t){switch(e){case"compositionend":return t5(t);case"keypress":return t.which!==32?null:(OU=!0,MU);case"textInput":return e=t.data,e===MU&&OU?null:e;default:return null;}}function Qwe(e,t){if(yd)return e==="compositionend"||!ZI&&e5(e,t)?(e=Y4(),Rx=GI=Fl=null,yd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Q4&&t.locale!=="ko"?null:t.data;default:return null;}}var eSe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kU(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eSe[e.type]:t==="textarea"}function r5(e,t,r,o){D4(o),t=Kx(t,"onChange"),0<t.length&&(r=new KI("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Jv=null,cg=null;function tSe(e){s5(e,0)}function gb(e){var t=xd(e);if(I4(t))return e}function rSe(e,t){if(e==="change")return t}var i5=!1;Tu&&(Tu?(Ax="oninput"in document,Ax||(TT=document.createElement("div"),TT.setAttribute("oninput","return;"),Ax=typeof TT.oninput=="function"),qx=Ax):qx=!1,i5=qx&&(!document.documentMode||9<document.documentMode));var qx,Ax,TT;function RU(){Jv&&(Jv.detachEvent("onpropertychange",n5),cg=Jv=null)}function n5(e){if(e.propertyName==="value"&&gb(cg)){var t=[];if(r5(t,cg,e,FI(e)),e=tSe,ph)e(t);else{ph=!0;try{zI(e,t)}finally{ph=!1,BI()}}}}function iSe(e,t,r){e==="focusin"?(RU(),Jv=t,cg=r,Jv.attachEvent("onpropertychange",n5)):e==="focusout"&&RU()}function nSe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gb(cg)}function aSe(e,t){if(e==="click")return gb(t)}function oSe(e,t){if(e==="input"||e==="change")return gb(t)}function sSe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xo=typeof Object.is=="function"?Object.is:sSe,uSe=Object.prototype.hasOwnProperty;function hg(e,t){if(xo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++)if(!uSe.call(t,r[o])||!xo(e[r[o]],t[r[o]]))return!1;return!0}function DU(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function LU(e,t){var r=DU(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=DU(r)}}function a5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?a5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function FU(){for(var e=window,t=Vx();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(o){r=!1}if(r)e=t.contentWindow;else break;t=Vx(e.document)}return t}function rI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var lSe=Tu&&"documentMode"in document&&11>=document.documentMode,_d=null,iI=null,Yv=null,nI=!1;function zU(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nI||_d==null||_d!==Vx(o)||(o=_d,"selectionStart"in o&&rI(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Yv&&hg(Yv,o)||(Yv=o,o=Kx(iI,"onSelect"),0<o.length&&(t=new KI("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=_d)))}VI("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);VI("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);VI(gwe,2);for(IT="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ex=0;Ex<IT.length;Ex++)jI.set(IT[Ex],0);var IT,Ex;kd("onMouseEnter",["mouseout","mouseover"]);kd("onMouseLeave",["mouseout","mouseover"]);kd("onPointerEnter",["pointerout","pointerover"]);kd("onPointerLeave",["pointerout","pointerover"]);wh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wh("onBeforeInput",["compositionend","keypress","textInput","paste"]);wh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vv));function NU(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,fwe(o,t,void 0,e),e.currentTarget=null}function s5(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],u=o.event;o=o.listeners;e:{var a=void 0;if(t)for(var m=o.length-1;0<=m;m--){var x=o[m],q=x.instance,T=x.currentTarget;if(x=x.listener,q!==a&&u.isPropagationStopped())break e;NU(u,x,T),a=q}else for(m=0;m<o.length;m++){if(x=o[m],q=x.instance,T=x.currentTarget,x=x.listener,q!==a&&u.isPropagationStopped())break e;NU(u,x,T),a=q}}}if(Wx)throw e=QT,Wx=!1,QT=null,e}function Gr(e,t){var r=f5(t),o=e+"__bubble";r.has(o)||(l5(t,e,2,!1),r.add(o))}var BU="_reactListening"+Math.random().toString(36).slice(2);function u5(e){e[BU]||(e[BU]=!0,A4.forEach(function(t){o5.has(t)||UU(t,!1,e,null),UU(t,!0,e,null)}))}function UU(e,t,r,o){var u=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=r;if(e==="selectionchange"&&r.nodeType!==9&&(a=r.ownerDocument),o!==null&&!t&&o5.has(e)){if(e!=="scroll")return;u|=2,a=o}var m=f5(a),x=e+"__"+(t?"capture":"bubble");m.has(x)||(t&&(u|=4),l5(a,e,u,t),m.add(x))}function l5(e,t,r,o){var u=jI.get(t);switch(u===void 0?2:u){case 0:u=Ewe;break;case 1:u=Twe;break;default:u=$I;}r=u.bind(null,t,r,e),u=void 0,!YT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function c5(e,t,r,o,u){var a=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var m=o.tag;if(m===3||m===4){var x=o.stateNode.containerInfo;if(x===u||x.nodeType===8&&x.parentNode===u)break;if(m===4)for(m=o.return;m!==null;){var q=m.tag;if((q===3||q===4)&&(q=m.stateNode.containerInfo,q===u||q.nodeType===8&&q.parentNode===u))return;m=m.return}for(;x!==null;){if(m=mh(x),m===null)return;if(q=m.tag,q===5||q===6){o=a=m;continue e}x=x.parentNode}}o=o.return}uwe(function(){var T=a,I=FI(r),k=[];e:{var B=X4.get(e);if(B!==void 0){var Y=KI,de=e;switch(e){case"keypress":if(Dx(r)===0)break e;case"keydown":case"keyup":Y=jwe;break;case"focusin":de="focus",Y=ET;break;case"focusout":de="blur",Y=ET;break;case"beforeblur":case"afterblur":Y=ET;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=IU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Pwe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Wwe;break;case G4:case K4:case H4:Y=kwe;break;case Z4:Y=Kwe;break;case"scroll":Y=Iwe;break;case"wheel":Y=Zwe;break;case"copy":case"cut":case"paste":Y=Dwe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=PU;}var pe=(t&4)!==0,Z=!pe&&e==="scroll",H=pe?B!==null?B+"Capture":null:B;pe=[];for(var J=T,ve;J!==null;){ve=J;var be=ve.stateNode;if(ve.tag===5&&be!==null&&(ve=be,H!==null&&(be=og(J,H),be!=null&&pe.push(fg(J,be,ve)))),Z)break;J=J.return}0<pe.length&&(B=new Y(B,de,null,r,I),k.push({event:B,listeners:pe}))}}if(!(t&7)){e:{if(B=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",B&&!(t&16)&&(de=r.relatedTarget||r.fromElement)&&(mh(de)||de[zd]))break e;if((Y||B)&&(B=I.window===I?I:(B=I.ownerDocument)?B.defaultView||B.parentWindow:window,Y?(de=r.relatedTarget||r.toElement,Y=T,de=de?mh(de):null,de!==null&&(Z=qh(de),de!==Z||de.tag!==5&&de.tag!==6)&&(de=null)):(Y=null,de=T),Y!==de)){if(pe=IU,be="onMouseLeave",H="onMouseEnter",J="mouse",(e==="pointerout"||e==="pointerover")&&(pe=PU,be="onPointerLeave",H="onPointerEnter",J="pointer"),Z=Y==null?B:xd(Y),ve=de==null?B:xd(de),B=new pe(be,J+"leave",Y,r,I),B.target=Z,B.relatedTarget=ve,be=null,mh(I)===T&&(pe=new pe(H,J+"enter",de,r,I),pe.target=ve,pe.relatedTarget=Z,be=pe),Z=be,Y&&de)t:{for(pe=Y,H=de,J=0,ve=pe;ve;ve=pd(ve))J++;for(ve=0,be=H;be;be=pd(be))ve++;for(;0<J-ve;)pe=pd(pe),J--;for(;0<ve-J;)H=pd(H),ve--;for(;J--;){if(pe===H||H!==null&&pe===H.alternate)break t;pe=pd(pe),H=pd(H)}pe=null}else pe=null;Y!==null&&jU(k,B,Y,pe,!1),de!==null&&Z!==null&&jU(k,Z,de,pe,!0)}}e:{if(B=T?xd(T):window,Y=B.nodeName&&B.nodeName.toLowerCase(),Y==="select"||Y==="input"&&B.type==="file")var Le=rSe;else if(kU(B)){if(i5)Le=oSe;else{Le=nSe;var Oe=iSe}}else(Y=B.nodeName)&&Y.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(Le=aSe);if(Le&&(Le=Le(e,T))){r5(k,Le,r,I);break e}Oe&&Oe(e,B,T),e==="focusout"&&(Oe=B._wrapperState)&&Oe.controlled&&B.type==="number"&&$T(B,"number",B.value)}switch(Oe=T?xd(T):window,e){case"focusin":(kU(Oe)||Oe.contentEditable==="true")&&(_d=Oe,iI=T,Yv=null);break;case"focusout":Yv=iI=_d=null;break;case"mousedown":nI=!0;break;case"contextmenu":case"mouseup":case"dragend":nI=!1,zU(k,r,I);break;case"selectionchange":if(lSe)break;case"keydown":case"keyup":zU(k,r,I);}var Ze;if(ZI)e:{switch(e){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e;}ft=void 0}else yd?e5(e,r)&&(ft="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ft="onCompositionStart");ft&&(Q4&&r.locale!=="ko"&&(yd||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&yd&&(Ze=Y4()):(Fl=I,GI="value"in Fl?Fl.value:Fl.textContent,yd=!0)),Oe=Kx(T,ft),0<Oe.length&&(ft=new CU(ft,e,null,r,I),k.push({event:ft,listeners:Oe}),Ze?ft.data=Ze:(Ze=t5(r),Ze!==null&&(ft.data=Ze)))),(Ze=Jwe?Ywe(e,r):Qwe(e,r))&&(T=Kx(T,"onBeforeInput"),0<T.length&&(I=new CU("onBeforeInput","beforeinput",null,r,I),k.push({event:I,listeners:T}),I.data=Ze))}s5(k,t)})}function fg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kx(e,t){for(var r=t+"Capture",o=[];e!==null;){var u=e,a=u.stateNode;u.tag===5&&a!==null&&(u=a,a=og(e,r),a!=null&&o.unshift(fg(e,a,u)),a=og(e,t),a!=null&&o.push(fg(e,a,u))),e=e.return}return o}function pd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jU(e,t,r,o,u){for(var a=t._reactName,m=[];r!==null&&r!==o;){var x=r,q=x.alternate,T=x.stateNode;if(q!==null&&q===o)break;x.tag===5&&T!==null&&(x=T,u?(q=og(r,a),q!=null&&m.unshift(fg(r,q,x))):u||(q=og(r,a),q!=null&&m.push(fg(r,q,x)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}function Hx(){}var CT=null,PT=null;function h5(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus;}return!1}function aI(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var VU=typeof setTimeout=="function"?setTimeout:void 0,cSe=typeof clearTimeout=="function"?clearTimeout:void 0;function XI(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Td(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function $U(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var MT=0;function hSe(e){return{$$typeof:DI,toString:e,valueOf:e}}var yb=Math.random().toString(36).slice(2),zl="__reactFiber$"+yb,Zx="__reactProps$"+yb,zd="__reactContainer$"+yb,WU="__reactEvents$"+yb;function mh(e){var t=e[zl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zd]||r[zl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$U(e);e!==null;){if(r=e[zl])return r;e=$U(e)}return t}e=r,r=e.parentNode}return null}function _g(e){return e=e[zl]||e[zd],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ke(33))}function _b(e){return e[Zx]||null}function f5(e){var t=e[WU];return t===void 0&&(t=e[WU]=new Set),t}var oI=[],bd=-1;function Ql(e){return{current:e}}function Kr(e){0>bd||(e.current=oI[bd],oI[bd]=null,bd--)}function fi(e,t){bd++,oI[bd]=e.current,e.current=t}var Xl={},Ln=Ql(Xl),_a=Ql(!1),_h=Xl;function Rd(e,t){var r=e.type.contextTypes;if(!r)return Xl;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var u={},a;for(a in r)u[a]=t[a];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function xa(e){return e=e.childContextTypes,e!=null}function Xx(){Kr(_a),Kr(Ln)}function GU(e,t,r){if(Ln.current!==Xl)throw Error(Ke(168));fi(Ln,t),fi(_a,r)}function d5(e,t,r){var o=e.stateNode;if(e=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var u in o)if(!(u in e))throw Error(Ke(108,Sd(t)||"Unknown",u));return ei({},r,o)}function Lx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xl,_h=Ln.current,fi(Ln,e),fi(_a,_a.current),!0}function KU(e,t,r){var o=e.stateNode;if(!o)throw Error(Ke(169));r?(e=d5(e,t,_h),o.__reactInternalMemoizedMergedChildContext=e,Kr(_a),Kr(Ln),fi(Ln,e)):Kr(_a),fi(_a,r)}var JI=null,yh=null,fSe=Ki.unstable_runWithPriority,YI=Ki.unstable_scheduleCallback,sI=Ki.unstable_cancelCallback,dSe=Ki.unstable_shouldYield,HU=Ki.unstable_requestPaint,uI=Ki.unstable_now,pSe=Ki.unstable_getCurrentPriorityLevel,xb=Ki.unstable_ImmediatePriority,p5=Ki.unstable_UserBlockingPriority,m5=Ki.unstable_NormalPriority,v5=Ki.unstable_LowPriority,g5=Ki.unstable_IdlePriority,OT={},mSe=HU!==void 0?HU:function(){},wu=null,Fx=null,kT=!1,ZU=uI(),Rn=1e4>ZU?uI:function(){return uI()-ZU};function Dd(){switch(pSe()){case xb:return 99;case p5:return 98;case m5:return 97;case v5:return 96;case g5:return 95;default:throw Error(Ke(332));}}function y5(e){switch(e){case 99:return xb;case 98:return p5;case 97:return m5;case 96:return v5;case 95:return g5;default:throw Error(Ke(332));}}function xh(e,t){return e=y5(e),fSe(e,t)}function dg(e,t,r){return e=y5(e),YI(e,t,r)}function Os(){if(Fx!==null){var e=Fx;Fx=null,sI(e)}_5()}function _5(){if(!kT&&wu!==null){kT=!0;var e=0;try{var t=wu;xh(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),wu=null}catch(r){throw wu!==null&&(wu=wu.slice(e+1)),YI(xb,Os),r}finally{kT=!1}}}var vSe=Sh.ReactCurrentBatchConfig;function Qo(e,t){if(e&&e.defaultProps){t=ei({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Jx=Ql(null),Yx=null,wd=null,Qx=null;function QI(){Qx=wd=Yx=null}function e2(e){var t=Jx.current;Kr(Jx),e.type._context._currentValue=t}function x5(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Id(e,t){Yx=e,Qx=wd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(es=!0),e.firstContext=null)}function So(e,t){if(Qx!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Qx=e,t=1073741823),t={context:e,observedBits:t,next:null},wd===null){if(Yx===null)throw Error(Ke(308));wd=t,Yx.dependencies={lanes:0,firstContext:t,responders:null}}else wd=wd.next=t;return e._currentValue}var Dl=!1;function t2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function b5(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $l(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function XU(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?u=a=m:a=a.next=m,r=r.next}while(r!==null);a===null?u=a=t:a=a.next=t}else u=a=t;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:a,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function pg(e,t,r,o){var u=e.updateQueue;Dl=!1;var a=u.firstBaseUpdate,m=u.lastBaseUpdate,x=u.shared.pending;if(x!==null){u.shared.pending=null;var q=x,T=q.next;q.next=null,m===null?a=T:m.next=T,m=q;var I=e.alternate;if(I!==null){I=I.updateQueue;var k=I.lastBaseUpdate;k!==m&&(k===null?I.firstBaseUpdate=T:k.next=T,I.lastBaseUpdate=q)}}if(a!==null){k=u.baseState,m=0,I=T=q=null;do{x=a.lane;var B=a.eventTime;if((o&x)===x){I!==null&&(I=I.next={eventTime:B,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var Y=e,de=a;switch(x=t,B=r,de.tag){case 1:if(Y=de.payload,typeof Y=="function"){k=Y.call(B,k,x);break e}k=Y;break e;case 3:Y.flags=Y.flags&-4097|64;case 0:if(Y=de.payload,x=typeof Y=="function"?Y.call(B,k,x):Y,x==null)break e;k=ei({},k,x);break e;case 2:Dl=!0;}}a.callback!==null&&(e.flags|=32,x=u.effects,x===null?u.effects=[a]:x.push(a))}else B={eventTime:B,lane:x,tag:a.tag,payload:a.payload,callback:a.callback,next:null},I===null?(T=I=B,q=k):I=I.next=B,m|=x;if(a=a.next,a===null){if(x=u.shared.pending,x===null)break;a=x.next,x.next=null,u.lastBaseUpdate=x,u.shared.pending=null}}while(!0);I===null&&(q=k),u.baseState=q,u.firstBaseUpdate=T,u.lastBaseUpdate=I,bg|=m,e.lanes=m,e.memoizedState=k}}function JU(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],u=o.callback;if(u!==null){if(o.callback=null,o=r,typeof u!="function")throw Error(Ke(191,u));u.call(o)}}}var w5=new hb.Component().refs;function eb(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:ei({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var bb={isMounted:function(e){return(e=e._reactInternals)?qh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=Qa(),u=Wl(e),a=Vl(o,u);a.payload=t,r!=null&&(a.callback=r),$l(e,a),Gl(e,u,o)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=Qa(),u=Wl(e),a=Vl(o,u);a.tag=1,a.payload=t,r!=null&&(a.callback=r),$l(e,a),Gl(e,u,o)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Qa(),o=Wl(e),u=Vl(r,o);u.tag=2,t!=null&&(u.callback=t),$l(e,u),Gl(e,o,r)}};function YU(e,t,r,o,u,a,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,a,m):t.prototype&&t.prototype.isPureReactComponent?!hg(r,o)||!hg(u,a):!0}function S5(e,t,r){var o=!1,u=Xl,a=t.contextType;return typeof a=="object"&&a!==null?a=So(a):(u=xa(t)?_h:Ln.current,o=t.contextTypes,a=(o=o!=null)?Rd(e,u):Xl),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bb,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=a),t}function QU(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&bb.enqueueReplaceState(t,t.state,null)}function lI(e,t,r,o){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs=w5,t2(e);var a=t.contextType;typeof a=="object"&&a!==null?u.context=So(a):(a=xa(t)?_h:Ln.current,u.context=Rd(e,a)),pg(e,r,u,o),u.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(eb(e,t,a,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&bb.enqueueReplaceState(u,u.state,null),pg(e,r,u,o),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4)}var Tx=Array.isArray;function Rv(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ke(309));var o=r.stateNode}if(!o)throw Error(Ke(147,e));var u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(a){var m=o.refs;m===w5&&(m=o.refs={}),a===null?delete m[u]:m[u]=a},t._stringRef=u,t)}if(typeof e!="string")throw Error(Ke(284));if(!r._owner)throw Error(Ke(290,e))}return e}function Ix(e,t){if(e.type!=="textarea")throw Error(Ke(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function q5(e){function t(Z,H){if(e){var J=Z.lastEffect;J!==null?(J.nextEffect=H,Z.lastEffect=H):Z.firstEffect=Z.lastEffect=H,H.nextEffect=null,H.flags=8}}function r(Z,H){if(!e)return null;for(;H!==null;)t(Z,H),H=H.sibling;return null}function o(Z,H){for(Z=new Map;H!==null;)H.key!==null?Z.set(H.key,H):Z.set(H.index,H),H=H.sibling;return Z}function u(Z,H){return Z=Yl(Z,H),Z.index=0,Z.sibling=null,Z}function a(Z,H,J){return Z.index=J,e?(J=Z.alternate,J!==null?(J=J.index,J<H?(Z.flags=2,H):J):(Z.flags=2,H)):H}function m(Z){return e&&Z.alternate===null&&(Z.flags=2),Z}function x(Z,H,J,ve){return H===null||H.tag!==6?(H=zT(J,Z.mode,ve),H.return=Z,H):(H=u(H,J),H.return=Z,H)}function q(Z,H,J,ve){return H!==null&&H.elementType===J.type?(ve=u(H,J.props),ve.ref=Rv(Z,H,J),ve.return=Z,ve):(ve=Ux(J.type,J.key,J.props,null,Z.mode,ve),ve.ref=Rv(Z,H,J),ve.return=Z,ve)}function T(Z,H,J,ve){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=NT(J,Z.mode,ve),H.return=Z,H):(H=u(H,J.children||[]),H.return=Z,H)}function I(Z,H,J,ve,be){return H===null||H.tag!==7?(H=Od(J,Z.mode,ve,be),H.return=Z,H):(H=u(H,J),H.return=Z,H)}function k(Z,H,J){if(typeof H=="string"||typeof H=="number")return H=zT(""+H,Z.mode,J),H.return=Z,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Uv:return J=Ux(H.type,H.key,H.props,null,Z.mode,J),J.ref=Rv(Z,null,H),J.return=Z,J;case dh:return H=NT(H,Z.mode,J),H.return=Z,H;}if(Tx(H)||Cv(H))return H=Od(H,Z.mode,J,null),H.return=Z,H;Ix(Z,H)}return null}function B(Z,H,J,ve){var be=H!==null?H.key:null;if(typeof J=="string"||typeof J=="number")return be!==null?null:x(Z,H,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Uv:return J.key===be?J.type===Ll?I(Z,H,J.props.children,ve,be):q(Z,H,J,ve):null;case dh:return J.key===be?T(Z,H,J,ve):null;}if(Tx(J)||Cv(J))return be!==null?null:I(Z,H,J,ve,null);Ix(Z,J)}return null}function Y(Z,H,J,ve,be){if(typeof ve=="string"||typeof ve=="number")return Z=Z.get(J)||null,x(H,Z,""+ve,be);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Uv:return Z=Z.get(ve.key===null?J:ve.key)||null,ve.type===Ll?I(H,Z,ve.props.children,be,ve.key):q(H,Z,ve,be);case dh:return Z=Z.get(ve.key===null?J:ve.key)||null,T(H,Z,ve,be);}if(Tx(ve)||Cv(ve))return Z=Z.get(J)||null,I(H,Z,ve,be,null);Ix(H,ve)}return null}function de(Z,H,J,ve){for(var be=null,Le=null,Oe=H,Ze=H=0,ft=null;Oe!==null&&Ze<J.length;Ze++){Oe.index>Ze?(ft=Oe,Oe=null):ft=Oe.sibling;var He=B(Z,Oe,J[Ze],ve);if(He===null){Oe===null&&(Oe=ft);break}e&&Oe&&He.alternate===null&&t(Z,Oe),H=a(He,H,Ze),Le===null?be=He:Le.sibling=He,Le=He,Oe=ft}if(Ze===J.length)return r(Z,Oe),be;if(Oe===null){for(;Ze<J.length;Ze++)Oe=k(Z,J[Ze],ve),Oe!==null&&(H=a(Oe,H,Ze),Le===null?be=Oe:Le.sibling=Oe,Le=Oe);return be}for(Oe=o(Z,Oe);Ze<J.length;Ze++)ft=Y(Oe,Z,Ze,J[Ze],ve),ft!==null&&(e&&ft.alternate!==null&&Oe.delete(ft.key===null?Ze:ft.key),H=a(ft,H,Ze),Le===null?be=ft:Le.sibling=ft,Le=ft);return e&&Oe.forEach(function(_r){return t(Z,_r)}),be}function pe(Z,H,J,ve){var be=Cv(J);if(typeof be!="function")throw Error(Ke(150));if(J=be.call(J),J==null)throw Error(Ke(151));for(var Le=be=null,Oe=H,Ze=H=0,ft=null,He=J.next();Oe!==null&&!He.done;Ze++,He=J.next()){Oe.index>Ze?(ft=Oe,Oe=null):ft=Oe.sibling;var _r=B(Z,Oe,He.value,ve);if(_r===null){Oe===null&&(Oe=ft);break}e&&Oe&&_r.alternate===null&&t(Z,Oe),H=a(_r,H,Ze),Le===null?be=_r:Le.sibling=_r,Le=_r,Oe=ft}if(He.done)return r(Z,Oe),be;if(Oe===null){for(;!He.done;Ze++,He=J.next())He=k(Z,He.value,ve),He!==null&&(H=a(He,H,Ze),Le===null?be=He:Le.sibling=He,Le=He);return be}for(Oe=o(Z,Oe);!He.done;Ze++,He=J.next())He=Y(Oe,Z,Ze,He.value,ve),He!==null&&(e&&He.alternate!==null&&Oe.delete(He.key===null?Ze:He.key),H=a(He,H,Ze),Le===null?be=He:Le.sibling=He,Le=He);return e&&Oe.forEach(function(Lr){return t(Z,Lr)}),be}return function(Z,H,J,ve){var be=typeof J=="object"&&J!==null&&J.type===Ll&&J.key===null;be&&(J=J.props.children);var Le=typeof J=="object"&&J!==null;if(Le)switch(J.$$typeof){case Uv:e:{for(Le=J.key,be=H;be!==null;){if(be.key===Le){switch(be.tag){case 7:if(J.type===Ll){r(Z,be.sibling),H=u(be,J.props.children),H.return=Z,Z=H;break e}break;default:if(be.elementType===J.type){r(Z,be.sibling),H=u(be,J.props),H.ref=Rv(Z,be,J),H.return=Z,Z=H;break e}}r(Z,be);break}else t(Z,be);be=be.sibling}J.type===Ll?(H=Od(J.props.children,Z.mode,ve,J.key),H.return=Z,Z=H):(ve=Ux(J.type,J.key,J.props,null,Z.mode,ve),ve.ref=Rv(Z,H,J),ve.return=Z,Z=ve)}return m(Z);case dh:e:{for(be=J.key;H!==null;){if(H.key===be){if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){r(Z,H.sibling),H=u(H,J.children||[]),H.return=Z,Z=H;break e}else{r(Z,H);break}}else t(Z,H);H=H.sibling}H=NT(J,Z.mode,ve),H.return=Z,Z=H}return m(Z);}if(typeof J=="string"||typeof J=="number")return J=""+J,H!==null&&H.tag===6?(r(Z,H.sibling),H=u(H,J),H.return=Z,Z=H):(r(Z,H),H=zT(J,Z.mode,ve),H.return=Z,Z=H),m(Z);if(Tx(J))return de(Z,H,J,ve);if(Cv(J))return pe(Z,H,J,ve);if(Le&&Ix(Z,J),typeof J=="undefined"&&!be)switch(Z.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ke(152,Sd(Z.type)||"Component"));}return r(Z,H)}}var tb=q5(!0),A5=q5(!1),xg={},Ps=Ql(xg),mg=Ql(xg),vg=Ql(xg);function vh(e){if(e===xg)throw Error(Ke(174));return e}function cI(e,t){switch(fi(vg,t),fi(mg,e),fi(Ps,xg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:HT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=HT(t,e);}Kr(Ps),fi(Ps,t)}function Ld(){Kr(Ps),Kr(mg),Kr(vg)}function e4(e){vh(vg.current);var t=vh(Ps.current),r=HT(t,e.type);t!==r&&(fi(mg,e),fi(Ps,r))}function r2(e){mg.current===e&&(Kr(Ps),Kr(mg))}var hi=Ql(0);function rb(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qu=null,Nl=null,Ms=!1;function E5(e,t){var r=bo(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function t4(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1;}}function hI(e){if(Ms){var t=Nl;if(t){var r=t;if(!t4(e,t)){if(t=Td(r.nextSibling),!t||!t4(e,t)){e.flags=e.flags&-1025|2,Ms=!1,qu=e;return}E5(qu,r)}qu=e,Nl=Td(t.firstChild)}else e.flags=e.flags&-1025|2,Ms=!1,qu=e}}function r4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qu=e}function Cx(e){if(e!==qu)return!1;if(!Ms)return r4(e),Ms=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!aI(t,e.memoizedProps))for(t=Nl;t;)E5(e,t),t=Td(t.nextSibling);if(r4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Nl=Td(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Nl=null}}else Nl=qu?Td(e.stateNode.nextSibling):null;return!0}function RT(){Nl=qu=null,Ms=!1}var Cd=[];function i2(){for(var e=0;e<Cd.length;e++)Cd[e]._workInProgressVersionPrimary=null;Cd.length=0}var Qv=Sh.ReactCurrentDispatcher,wo=Sh.ReactCurrentBatchConfig,gg=0,yi=null,kn=null,hn=null,ib=!1,eg=!1;function ga(){throw Error(Ke(321))}function n2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!xo(e[r],t[r]))return!1;return!0}function a2(e,t,r,o,u,a){if(gg=a,yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qv.current=e===null||e.memoizedState===null?ySe:_Se,e=r(o,u),eg){a=0;do{if(eg=!1,!(25>a))throw Error(Ke(301));a+=1,hn=kn=null,t.updateQueue=null,Qv.current=xSe,e=r(o,u)}while(eg)}if(Qv.current=sb,t=kn!==null&&kn.next!==null,gg=0,hn=kn=yi=null,ib=!1,t)throw Error(Ke(300));return e}function gh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?yi.memoizedState=hn=e:hn=hn.next=e,hn}function Ah(){if(kn===null){var e=yi.alternate;e=e!==null?e.memoizedState:null}else e=kn.next;var t=hn===null?yi.memoizedState:hn.next;if(t!==null)hn=t,kn=e;else{if(e===null)throw Error(Ke(310));kn=e,e={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},hn===null?yi.memoizedState=hn=e:hn=hn.next=e}return hn}function Is(e,t){return typeof t=="function"?t(e):t}function Dv(e){var t=Ah(),r=t.queue;if(r===null)throw Error(Ke(311));r.lastRenderedReducer=e;var o=kn,u=o.baseQueue,a=r.pending;if(a!==null){if(u!==null){var m=u.next;u.next=a.next,a.next=m}o.baseQueue=u=a,r.pending=null}if(u!==null){u=u.next,o=o.baseState;var x=m=a=null,q=u;do{var T=q.lane;if((gg&T)===T)x!==null&&(x=x.next={lane:0,action:q.action,eagerReducer:q.eagerReducer,eagerState:q.eagerState,next:null}),o=q.eagerReducer===e?q.eagerState:e(o,q.action);else{var I={lane:T,action:q.action,eagerReducer:q.eagerReducer,eagerState:q.eagerState,next:null};x===null?(m=x=I,a=o):x=x.next=I,yi.lanes|=T,bg|=T}q=q.next}while(q!==null&&q!==u);x===null?a=o:x.next=m,xo(o,t.memoizedState)||(es=!0),t.memoizedState=o,t.baseState=a,t.baseQueue=x,r.lastRenderedState=o}return[t.memoizedState,r.dispatch]}function Lv(e){var t=Ah(),r=t.queue;if(r===null)throw Error(Ke(311));r.lastRenderedReducer=e;var o=r.dispatch,u=r.pending,a=t.memoizedState;if(u!==null){r.pending=null;var m=u=u.next;do a=e(a,m.action),m=m.next;while(m!==u);xo(a,t.memoizedState)||(es=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,o]}function i4(e,t,r){var o=t._getVersion;o=o(t._source);var u=t._workInProgressVersionPrimary;if(u!==null?e=u===o:(e=e.mutableReadLanes,(e=(gg&e)===e)&&(t._workInProgressVersionPrimary=o,Cd.push(t))),e)return r(t._source);throw Cd.push(t),Error(Ke(350))}function T5(e,t,r,o){var u=Yn;if(u===null)throw Error(Ke(349));var a=t._getVersion,m=a(t._source),x=Qv.current,q=x.useState(function(){return i4(u,t,r)}),T=q[1],I=q[0];q=hn;var k=e.memoizedState,B=k.refs,Y=B.getSnapshot,de=k.source;k=k.subscribe;var pe=yi;return e.memoizedState={refs:B,source:t,subscribe:o},x.useEffect(function(){B.getSnapshot=r,B.setSnapshot=T;var Z=a(t._source);if(!xo(m,Z)){Z=r(t._source),xo(I,Z)||(T(Z),Z=Wl(pe),u.mutableReadLanes|=Z&u.pendingLanes),Z=u.mutableReadLanes,u.entangledLanes|=Z;for(var H=u.entanglements,J=Z;0<J;){var ve=31-Zl(J),be=1<<ve;H[ve]|=Z,J&=~be}}},[r,t,o]),x.useEffect(function(){return o(t._source,function(){var Z=B.getSnapshot,H=B.setSnapshot;try{H(Z(t._source));var J=Wl(pe);u.mutableReadLanes|=J&u.pendingLanes}catch(ve){H(function(){throw ve})}})},[t,o]),xo(Y,r)&&xo(de,t)&&xo(k,o)||(e={pending:null,dispatch:null,lastRenderedReducer:Is,lastRenderedState:I},e.dispatch=T=u2.bind(null,yi,e),q.queue=e,q.baseQueue=null,I=i4(u,t,r),q.memoizedState=q.baseState=I),I}function I5(e,t,r){var o=Ah();return T5(o,e,t,r)}function Fv(e){var t=gh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},e=e.dispatch=u2.bind(null,yi,e),[t.memoizedState,e]}function nb(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=yi.updateQueue,t===null?(t={lastEffect:null},yi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function n4(e){var t=gh();return e={current:e},t.memoizedState=e}function ab(){return Ah().memoizedState}function fI(e,t,r,o){var u=gh();yi.flags|=e,u.memoizedState=nb(1|t,r,void 0,o===void 0?null:o)}function o2(e,t,r,o){var u=Ah();o=o===void 0?null:o;var a=void 0;if(kn!==null){var m=kn.memoizedState;if(a=m.destroy,o!==null&&n2(o,m.deps)){nb(t,r,a,o);return}}yi.flags|=e,u.memoizedState=nb(1|t,r,a,o)}function a4(e,t){return fI(516,4,e,t)}function ob(e,t){return o2(516,4,e,t)}function C5(e,t){return o2(4,2,e,t)}function P5(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function M5(e,t,r){return r=r!=null?r.concat([e]):null,o2(4,2,P5.bind(null,t,e),r)}function s2(){}function O5(e,t){var r=Ah();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&n2(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function k5(e,t){var r=Ah();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&n2(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function gSe(e,t){var r=Dd();xh(98>r?98:r,function(){e(!0)}),xh(97<r?97:r,function(){var o=wo.transition;wo.transition=1;try{e(!1),t()}finally{wo.transition=o}})}function u2(e,t,r){var o=Qa(),u=Wl(e),a={lane:u,action:r,eagerReducer:null,eagerState:null,next:null},m=t.pending;if(m===null?a.next=a:(a.next=m.next,m.next=a),t.pending=a,m=e.alternate,e===yi||m!==null&&m===yi)eg=ib=!0;else{if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var x=t.lastRenderedState,q=m(x,r);if(a.eagerReducer=m,a.eagerState=q,xo(q,x))return}catch(T){}finally{}Gl(e,u,o)}}var sb={readContext:So,useCallback:ga,useContext:ga,useEffect:ga,useImperativeHandle:ga,useLayoutEffect:ga,useMemo:ga,useReducer:ga,useRef:ga,useState:ga,useDebugValue:ga,useDeferredValue:ga,useTransition:ga,useMutableSource:ga,useOpaqueIdentifier:ga,unstable_isNewReconciler:!1},ySe={readContext:So,useCallback:function(e,t){return gh().memoizedState=[e,t===void 0?null:t],e},useContext:So,useEffect:a4,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,fI(4,2,P5.bind(null,t,e),r)},useLayoutEffect:function(e,t){return fI(4,2,e,t)},useMemo:function(e,t){var r=gh();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=gh();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e=o.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=u2.bind(null,yi,e),[o.memoizedState,e]},useRef:n4,useState:Fv,useDebugValue:s2,useDeferredValue:function(e){var t=Fv(e),r=t[0],o=t[1];return a4(function(){var u=wo.transition;wo.transition=1;try{o(e)}finally{wo.transition=u}},[e]),r},useTransition:function(){var e=Fv(!1),t=e[0];return e=gSe.bind(null,e[1]),n4(e),[e,t]},useMutableSource:function(e,t,r){var o=gh();return o.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},T5(o,e,t,r)},useOpaqueIdentifier:function(){if(Ms){var e=!1,t=hSe(function(){throw e||(e=!0,r("r:"+(MT++).toString(36))),Error(Ke(355))}),r=Fv(t)[1];return!(yi.mode&2)&&(yi.flags|=516,nb(5,function(){r("r:"+(MT++).toString(36))},void 0,null)),t}return t="r:"+(MT++).toString(36),Fv(t),t},unstable_isNewReconciler:!1},_Se={readContext:So,useCallback:O5,useContext:So,useEffect:ob,useImperativeHandle:M5,useLayoutEffect:C5,useMemo:k5,useReducer:Dv,useRef:ab,useState:function(){return Dv(Is)},useDebugValue:s2,useDeferredValue:function(e){var t=Dv(Is),r=t[0],o=t[1];return ob(function(){var u=wo.transition;wo.transition=1;try{o(e)}finally{wo.transition=u}},[e]),r},useTransition:function(){var e=Dv(Is)[0];return[ab().current,e]},useMutableSource:I5,useOpaqueIdentifier:function(){return Dv(Is)[0]},unstable_isNewReconciler:!1},xSe={readContext:So,useCallback:O5,useContext:So,useEffect:ob,useImperativeHandle:M5,useLayoutEffect:C5,useMemo:k5,useReducer:Lv,useRef:ab,useState:function(){return Lv(Is)},useDebugValue:s2,useDeferredValue:function(e){var t=Lv(Is),r=t[0],o=t[1];return ob(function(){var u=wo.transition;wo.transition=1;try{o(e)}finally{wo.transition=u}},[e]),r},useTransition:function(){var e=Lv(Is)[0];return[ab().current,e]},useMutableSource:I5,useOpaqueIdentifier:function(){return Lv(Is)[0]},unstable_isNewReconciler:!1},bSe=Sh.ReactCurrentOwner,es=!1;function ya(e,t,r,o){t.child=e===null?A5(t,null,r,o):tb(t,e.child,r,o)}function o4(e,t,r,o,u){r=r.render;var a=t.ref;return Id(t,u),o=a2(e,t,r,o,a,u),e!==null&&!es?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~u,Au(e,t,u)):(t.flags|=1,ya(e,t,o,u),t.child)}function s4(e,t,r,o,u,a){if(e===null){var m=r.type;return typeof m=="function"&&!p2(m)&&m.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=m,R5(e,t,m,o,u,a)):(e=Ux(r.type,null,o,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return m=e.child,!(u&a)&&(u=m.memoizedProps,r=r.compare,r=r!==null?r:hg,r(u,o)&&e.ref===t.ref)?Au(e,t,a):(t.flags|=1,e=Yl(m,o),e.ref=t.ref,e.return=t,t.child=e)}function R5(e,t,r,o,u,a){if(e!==null&&hg(e.memoizedProps,o)&&e.ref===t.ref)if(es=!1,(a&u)!==0)e.flags&16384&&(es=!0);else return t.lanes=e.lanes,Au(e,t,a);return dI(e,t,r,o,a)}function DT(e,t,r){var o=t.pendingProps,u=o.children,a=e!==null?e.memoizedState:null;if(o.mode==="hidden"||o.mode==="unstable-defer-without-hiding"){if(!(t.mode&4))t.memoizedState={baseLanes:0},Mx(t,r);else if(r&1073741824)t.memoizedState={baseLanes:0},Mx(t,a!==null?a.baseLanes:r);else return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Mx(t,e),null;}else a!==null?(o=a.baseLanes|r,t.memoizedState=null):o=r,Mx(t,o);return ya(e,t,u,r),t.child}function D5(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function dI(e,t,r,o,u){var a=xa(r)?_h:Ln.current;return a=Rd(t,a),Id(t,u),r=a2(e,t,r,o,a,u),e!==null&&!es?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~u,Au(e,t,u)):(t.flags|=1,ya(e,t,r,u),t.child)}function u4(e,t,r,o,u){if(xa(r)){var a=!0;Lx(t)}else a=!1;if(Id(t,u),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),S5(t,r,o),lI(t,r,o,u),o=!0;else if(e===null){var m=t.stateNode,x=t.memoizedProps;m.props=x;var q=m.context,T=r.contextType;typeof T=="object"&&T!==null?T=So(T):(T=xa(r)?_h:Ln.current,T=Rd(t,T));var I=r.getDerivedStateFromProps,k=typeof I=="function"||typeof m.getSnapshotBeforeUpdate=="function";k||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==o||q!==T)&&QU(t,m,o,T),Dl=!1;var B=t.memoizedState;m.state=B,pg(t,o,m,u),q=t.memoizedState,x!==o||B!==q||_a.current||Dl?(typeof I=="function"&&(eb(t,r,I,o),q=t.memoizedState),(x=Dl||YU(t,r,x,o,B,q,T))?(k||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4)):(typeof m.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=o,t.memoizedState=q),m.props=o,m.state=q,m.context=T,o=x):(typeof m.componentDidMount=="function"&&(t.flags|=4),o=!1)}else{m=t.stateNode,b5(e,t),x=t.memoizedProps,T=t.type===t.elementType?x:Qo(t.type,x),m.props=T,k=t.pendingProps,B=m.context,q=r.contextType,typeof q=="object"&&q!==null?q=So(q):(q=xa(r)?_h:Ln.current,q=Rd(t,q));var Y=r.getDerivedStateFromProps;(I=typeof Y=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==k||B!==q)&&QU(t,m,o,q),Dl=!1,B=t.memoizedState,m.state=B,pg(t,o,m,u);var de=t.memoizedState;x!==k||B!==de||_a.current||Dl?(typeof Y=="function"&&(eb(t,r,Y,o),de=t.memoizedState),(T=Dl||YU(t,r,T,o,B,de,q))?(I||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,de,q),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,de,q)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=256),t.memoizedProps=o,t.memoizedState=de),m.props=o,m.state=de,m.context=q,o=T):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&B===e.memoizedState||(t.flags|=256),o=!1)}return pI(e,t,r,o,a,u)}function pI(e,t,r,o,u,a){D5(e,t);var m=(t.flags&64)!==0;if(!o&&!m)return u&&KU(t,r,!1),Au(e,t,a);o=t.stateNode,bSe.current=t;var x=m&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&m?(t.child=tb(t,e.child,null,a),t.child=tb(t,null,x,a)):ya(e,t,x,a),t.memoizedState=o.state,u&&KU(t,r,!0),t.child}function l4(e){var t=e.stateNode;t.pendingContext?GU(e,t.pendingContext,t.pendingContext!==t.context):t.context&&GU(e,t.context,!1),cI(e,t.containerInfo)}var Px={dehydrated:null,retryLane:0};function c4(e,t,r){var o=t.pendingProps,u=hi.current,a=!1,m;return(m=(t.flags&64)!==0)||(m=e!==null&&e.memoizedState===null?!1:(u&2)!==0),m?(a=!0,t.flags&=-65):e!==null&&e.memoizedState===null||o.fallback===void 0||o.unstable_avoidThisFallback===!0||(u|=1),fi(hi,u&1),e===null?(o.fallback!==void 0&&hI(t),e=o.children,u=o.fallback,a?(e=h4(t,e,u,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Px,e):typeof o.unstable_expectedLoadTime=="number"?(e=h4(t,e,u,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Px,t.lanes=33554432,e):(r=m2({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?a?(o=d4(e,t,o.children,o.fallback,r),a=t.child,u=e.child.memoizedState,a.memoizedState=u===null?{baseLanes:r}:{baseLanes:u.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Px,o):(r=f4(e,t,o.children,r),t.memoizedState=null,r):a?(o=d4(e,t,o.children,o.fallback,r),a=t.child,u=e.child.memoizedState,a.memoizedState=u===null?{baseLanes:r}:{baseLanes:u.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Px,o):(r=f4(e,t,o.children,r),t.memoizedState=null,r)}function h4(e,t,r,o){var u=e.mode,a=e.child;return t={mode:"hidden",children:t},!(u&2)&&a!==null?(a.childLanes=0,a.pendingProps=t):a=m2(t,u,0,null),r=Od(r,u,o,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r}function f4(e,t,r,o){var u=e.child;return e=u.sibling,r=Yl(u,{mode:"visible",children:r}),!(t.mode&2)&&(r.lanes=o),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function d4(e,t,r,o,u){var a=t.mode,m=e.child;e=m.sibling;var x={mode:"hidden",children:r};return!(a&2)&&t.child!==m?(r=t.child,r.childLanes=0,r.pendingProps=x,m=r.lastEffect,m!==null?(t.firstEffect=r.firstEffect,t.lastEffect=m,m.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Yl(m,x),e!==null?o=Yl(e,o):(o=Od(o,a,u,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,o}function p4(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),x5(e.return,t)}function LT(e,t,r,o,u,a){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u,lastEffect:a}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=o,m.tail=r,m.tailMode=u,m.lastEffect=a)}function m4(e,t,r){var o=t.pendingProps,u=o.revealOrder,a=o.tail;if(ya(e,t,o.children,r),o=hi.current,o&2)o=o&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&p4(e,r);else if(e.tag===19)p4(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(fi(hi,o),!(t.mode&2))t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&rb(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),LT(t,!1,u,r,a,t.lastEffect);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&rb(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}LT(t,!0,r,null,a,t.lastEffect);break;case"together":LT(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null;}return t.child}function Au(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),bg|=t.lanes,r&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(Ke(153));if(t.child!==null){for(e=t.child,r=Yl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Yl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var L5,mI,F5,z5;L5=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mI=function(){};F5=function(e,t,r,o){var u=e.memoizedProps;if(u!==o){e=t.stateNode,vh(Ps.current);var a=null;switch(r){case"input":u=jT(e,u),o=jT(e,o),a=[];break;case"option":u=WT(e,u),o=WT(e,o),a=[];break;case"select":u=ei({},u,{value:void 0}),o=ei({},o,{value:void 0}),a=[];break;case"textarea":u=GT(e,u),o=GT(e,o),a=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Hx);}ZT(r,o);var m;r=null;for(T in u)if(!o.hasOwnProperty(T)&&u.hasOwnProperty(T)&&u[T]!=null)if(T==="style"){var x=u[T];for(m in x)x.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(ng.hasOwnProperty(T)?a||(a=[]):(a=a||[]).push(T,null));for(T in o){var q=o[T];if(x=u!=null?u[T]:void 0,o.hasOwnProperty(T)&&q!==x&&(q!=null||x!=null))if(T==="style"){if(x){for(m in x)!x.hasOwnProperty(m)||q&&q.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in q)q.hasOwnProperty(m)&&x[m]!==q[m]&&(r||(r={}),r[m]=q[m])}else r||(a||(a=[]),a.push(T,r)),r=q;}else T==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,x=x?x.__html:void 0,q!=null&&x!==q&&(a=a||[]).push(T,q)):T==="children"?typeof q!="string"&&typeof q!="number"||(a=a||[]).push(T,""+q):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(ng.hasOwnProperty(T)?(q!=null&&T==="onScroll"&&Gr("scroll",e),a||x===q||(a=[])):typeof q=="object"&&q!==null&&q.$$typeof===DI?q.toString():(a=a||[]).push(T,q))}r&&(a=a||[]).push("style",r);var T=a;(t.updateQueue=T)&&(t.flags|=4)}};z5=function(e,t,r,o){r!==o&&(t.flags|=4)};function zv(e,t){if(!Ms)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null;}}function wSe(e,t,r){var o=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return xa(t.type)&&Xx(),null;case 3:return Ld(),Kr(_a),Kr(Ln),i2(),o=t.stateNode,o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Cx(t)?t.flags|=4:o.hydrate||(t.flags|=256)),mI(t),null;case 5:r2(t);var u=vh(vg.current);if(r=t.type,e!==null&&t.stateNode!=null)F5(e,t,r,o,u),e.ref!==t.ref&&(t.flags|=128);else{if(!o){if(t.stateNode===null)throw Error(Ke(166));return null}if(e=vh(Ps.current),Cx(t)){o=t.stateNode,r=t.type;var a=t.memoizedProps;switch(o[zl]=t,o[Zx]=a,r){case"dialog":Gr("cancel",o),Gr("close",o);break;case"iframe":case"object":case"embed":Gr("load",o);break;case"video":case"audio":for(e=0;e<Vv.length;e++)Gr(Vv[e],o);break;case"source":Gr("error",o);break;case"img":case"image":case"link":Gr("error",o),Gr("load",o);break;case"details":Gr("toggle",o);break;case"input":gU(o,a),Gr("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},Gr("invalid",o);break;case"textarea":_U(o,a),Gr("invalid",o);}ZT(r,a),e=null;for(var m in a)a.hasOwnProperty(m)&&(u=a[m],m==="children"?typeof u=="string"?o.textContent!==u&&(e=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(e=["children",""+u]):ng.hasOwnProperty(m)&&u!=null&&m==="onScroll"&&Gr("scroll",o));switch(r){case"input":xx(o),yU(o,a,!0);break;case"textarea":xx(o),xU(o);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(o.onclick=Hx);}o=e,t.updateQueue=o,o!==null&&(t.flags|=4)}else{switch(m=u.nodeType===9?u:u.ownerDocument,e===KT.html&&(e=M4(r)),e===KT.html?r==="script"?(e=m.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=m.createElement(r,{is:o.is}):(e=m.createElement(r),r==="select"&&(m=e,o.multiple?m.multiple=!0:o.size&&(m.size=o.size))):e=m.createElementNS(e,r),e[zl]=t,e[Zx]=o,L5(e,t,!1,!1),t.stateNode=e,m=XT(r,o),r){case"dialog":Gr("cancel",e),Gr("close",e),u=o;break;case"iframe":case"object":case"embed":Gr("load",e),u=o;break;case"video":case"audio":for(u=0;u<Vv.length;u++)Gr(Vv[u],e);u=o;break;case"source":Gr("error",e),u=o;break;case"img":case"image":case"link":Gr("error",e),Gr("load",e),u=o;break;case"details":Gr("toggle",e),u=o;break;case"input":gU(e,o),u=jT(e,o),Gr("invalid",e);break;case"option":u=WT(e,o);break;case"select":e._wrapperState={wasMultiple:!!o.multiple},u=ei({},o,{value:void 0}),Gr("invalid",e);break;case"textarea":_U(e,o),u=GT(e,o),Gr("invalid",e);break;default:u=o;}ZT(r,u);var x=u;for(a in x)if(x.hasOwnProperty(a)){var q=x[a];a==="style"?R4(e,q):a==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&O4(e,q)):a==="children"?typeof q=="string"?(r!=="textarea"||q!=="")&&ag(e,q):typeof q=="number"&&ag(e,""+q):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ng.hasOwnProperty(a)?q!=null&&a==="onScroll"&&Gr("scroll",e):q!=null&&CI(e,a,q,m))}switch(r){case"input":xx(e),yU(e,o,!1);break;case"textarea":xx(e),xU(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Hl(o.value));break;case"select":e.multiple=!!o.multiple,a=o.value,a!=null?qd(e,!!o.multiple,a,!1):o.defaultValue!=null&&qd(e,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Hx);}h5(r,o)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)z5(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Ke(166));r=vh(vg.current),vh(Ps.current),Cx(t)?(o=t.stateNode,r=t.memoizedProps,o[zl]=t,o.nodeValue!==r&&(t.flags|=4)):(o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[zl]=t,t.stateNode=o)}return null;case 13:return Kr(hi),o=t.memoizedState,t.flags&64?(t.lanes=r,t):(o=o!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&Cx(t):r=e.memoizedState!==null,o&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||hi.current&1?fn===0&&(fn=3):((fn===0||fn===3)&&(fn=4),Yn===null||!(bg&134217727)&&!(Bd&134217727)||Pd(Yn,Dn))),(o||r)&&(t.flags|=4),null);case 4:return Ld(),mI(t),e===null&&u5(t.stateNode.containerInfo),null;case 10:return e2(t),null;case 17:return xa(t.type)&&Xx(),null;case 19:if(Kr(hi),o=t.memoizedState,o===null)return null;if(a=(t.flags&64)!==0,m=o.rendering,m===null){if(a)zv(o,!1);else{if(fn!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(m=rb(e),m!==null){for(t.flags|=64,zv(o,!1),a=m.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),o.lastEffect===null&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=r,r=t.child;r!==null;)a=r,e=o,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,m=a.alternate,m===null?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=m.childLanes,a.lanes=m.lanes,a.child=m.child,a.memoizedProps=m.memoizedProps,a.memoizedState=m.memoizedState,a.updateQueue=m.updateQueue,a.type=m.type,e=m.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fi(hi,hi.current&1|2),t.child}e=e.sibling}o.tail!==null&&Rn()>bI&&(t.flags|=64,a=!0,zv(o,!1),t.lanes=33554432)}}else{if(!a)if(e=rb(m),e!==null){if(t.flags|=64,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),zv(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!Ms)return t=t.lastEffect=o.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Rn()-o.renderingStartTime>bI&&r!==1073741824&&(t.flags|=64,a=!0,zv(o,!1),t.lanes=33554432);o.isBackwards?(m.sibling=t.child,t.child=m):(r=o.last,r!==null?r.sibling=m:t.child=m,o.last=m)}return o.tail!==null?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,o.renderingStartTime=Rn(),r.sibling=null,t=hi.current,fi(hi,a?t&1|2:t&1),r):null;case 23:case 24:return d2(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&o.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null;}throw Error(Ke(156,t.tag))}function SSe(e){switch(e.tag){case 1:xa(e.type)&&Xx();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Ld(),Kr(_a),Kr(Ln),i2(),t=e.flags,t&64)throw Error(Ke(285));return e.flags=t&-4097|64,e;case 5:return r2(e),null;case 13:return Kr(hi),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Kr(hi),null;case 4:return Ld(),null;case 10:return e2(e),null;case 23:case 24:return d2(),null;default:return null;}}function l2(e,t){try{var r="",o=t;do r+=iwe(o),o=o.return;while(o);var u=r}catch(a){u=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:u}}function vI(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var qSe=typeof WeakMap=="function"?WeakMap:Map;function N5(e,t,r){r=Vl(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){lb||(lb=!0,wI=o),vI(e,t)},r}function B5(e,t,r){r=Vl(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var u=t.value;r.payload=function(){return vI(e,t),o(u)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){typeof o!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this),vI(e,t));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}var ASe=typeof WeakSet=="function"?WeakSet:Set;function v4(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Kl(e,r)}else t.current=null}function ESe(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,o=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Qo(t.type,r),o),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&XI(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(Ke(163))}function TSe(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var o=e.create;e.destroy=o()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var u=e;o=u.next,u=u.tag,u&4&&u&1&&(Z5(r,e),DSe(r,e)),e=o}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(o=r.elementType===r.type?t.memoizedProps:Qo(r.type,t.memoizedProps),e.componentDidUpdate(o,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&JU(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode;}JU(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&h5(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&$4(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(Ke(163))}function g4(e,t){for(var r=e;;){if(r.tag===5){var o=r.stateNode;if(t)o=o.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{o=r.stateNode;var u=r.memoizedProps.style;u=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=k4("display",u)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function y4(e,t){if(yh&&typeof yh.onCommitFiberUnmount=="function")try{yh.onCommitFiberUnmount(JI,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var o=r,u=o.destroy;if(o=o.tag,u!==void 0)if(o&4)Z5(t,r);else{o=t;try{u()}catch(a){Kl(o,a)}}r=r.next}while(r!==e)}break;case 1:if(v4(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Kl(t,a)}break;case 5:v4(t);break;case 4:U5(e,t);}}function _4(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function x4(e){return e.tag===5||e.tag===3||e.tag===4}function b4(e){e:{for(var t=e.return;t!==null;){if(x4(t))break e;t=t.return}throw Error(Ke(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var o=!1;break;case 3:t=t.containerInfo,o=!0;break;case 4:t=t.containerInfo,o=!0;break;default:throw Error(Ke(161));}r.flags&16&&(ag(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||x4(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}o?gI(e,r,t):yI(e,r,t)}function gI(e,t,r){var o=e.tag,u=o===5||o===6;if(u)e=u?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Hx));else if(o!==4&&(e=e.child,e!==null))for(gI(e,t,r),e=e.sibling;e!==null;)gI(e,t,r),e=e.sibling}function yI(e,t,r){var o=e.tag,u=o===5||o===6;if(u)e=u?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(yI(e,t,r),e=e.sibling;e!==null;)yI(e,t,r),e=e.sibling}function U5(e,t){for(var r=t,o=!1,u,a;;){if(!o){o=r.return;e:for(;;){if(o===null)throw Error(Ke(160));switch(u=o.stateNode,o.tag){case 5:a=!1;break e;case 3:u=u.containerInfo,a=!0;break e;case 4:u=u.containerInfo,a=!0;break e;}o=o.return}o=!0}if(r.tag===5||r.tag===6){e:for(var m=e,x=r,q=x;;)if(y4(m,q),q.child!==null&&q.tag!==4)q.child.return=q,q=q.child;else{if(q===x)break e;for(;q.sibling===null;){if(q.return===null||q.return===x)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}a?(m=u,x=r.stateNode,m.nodeType===8?m.parentNode.removeChild(x):m.removeChild(x)):u.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){u=r.stateNode.containerInfo,a=!0,r.child.return=r,r=r.child;continue}}else if(y4(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function FT(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do(o.tag&3)===3&&(e=o.destroy,o.destroy=void 0,e!==void 0&&e()),o=o.next;while(o!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){o=t.memoizedProps;var u=e!==null?e.memoizedProps:o;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(r[Zx]=o,e==="input"&&o.type==="radio"&&o.name!=null&&C4(r,o),XT(e,u),t=XT(e,o),u=0;u<a.length;u+=2){var m=a[u],x=a[u+1];m==="style"?R4(r,x):m==="dangerouslySetInnerHTML"?O4(r,x):m==="children"?ag(r,x):CI(r,m,x,t)}switch(e){case"input":VT(r,o);break;case"textarea":P4(r,o);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!o.multiple,a=o.value,a!=null?qd(r,!!o.multiple,a,!1):e!==!!o.multiple&&(o.defaultValue!=null?qd(r,!!o.multiple,o.defaultValue,!0):qd(r,!!o.multiple,o.multiple?[]:"",!1));}}}return;case 6:if(t.stateNode===null)throw Error(Ke(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,$4(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(f2=Rn(),g4(t.child,!0)),w4(t);return;case 19:w4(t);return;case 17:return;case 23:case 24:g4(t,t.memoizedState!==null);return;}throw Error(Ke(163))}function w4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ASe),t.forEach(function(o){var u=zSe.bind(null,e,o);r.has(o)||(r.add(o),o.then(u,u))})}}function ISe(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var CSe=Math.ceil,ub=Sh.ReactCurrentDispatcher,c2=Sh.ReactCurrentOwner,Ut=0,Yn=null,Di=null,Dn=0,bh=0,_I=Ql(0),fn=0,wb=null,Nd=0,bg=0,Bd=0,h2=0,xI=null,f2=0,bI=1/0;function Ud(){bI=Rn()+500}var gt=null,lb=!1,wI=null,Cs=null,Jl=!1,tg=null,$v=90,SI=[],qI=[],Eu=null,rg=0,AI=null,zx=-1,Su=0,Nx=0,ig=null,Bx=!1;function Qa(){return Ut&48?Rn():zx!==-1?zx:zx=Rn()}function Wl(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return Dd()===99?1:2;if(Su===0&&(Su=Nd),vSe.transition!==0){Nx!==0&&(Nx=xI!==null?xI.pendingLanes:0),e=Su;var t=4186112&~Nx;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Dd(),Ut&4&&e===98?e=Gx(12,Su):(e=_we(e),e=Gx(e,Su)),e}function Gl(e,t,r){if(50<rg)throw rg=0,AI=null,Error(Ke(185));if(e=Sb(e,t),e===null)return null;mb(e,t,r),e===Yn&&(Bd|=t,fn===4&&Pd(e,Dn));var o=Dd();t===1?Ut&8&&!(Ut&48)?EI(e):(qo(e,r),Ut===0&&(Ud(),Os())):(!(Ut&4)||o!==98&&o!==99||(Eu===null?Eu=new Set([e]):Eu.add(e)),qo(e,r)),xI=e}function Sb(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function qo(e,t){for(var r=e.callbackNode,o=e.suspendedLanes,u=e.pingedLanes,a=e.expirationTimes,m=e.pendingLanes;0<m;){var x=31-Zl(m),q=1<<x,T=a[x];if(T===-1){if(!(q&o)||q&u){T=t,md(q);var I=Br;a[x]=10<=I?T+250:6<=I?T+5e3:-1}}else T<=t&&(e.expiredLanes|=q);m&=~q}if(o=lg(e,e===Yn?Dn:0),t=Br,o===0)r!==null&&(r!==OT&&sI(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==OT&&sI(r)}t===15?(r=EI.bind(null,e),wu===null?(wu=[r],Fx=YI(xb,_5)):wu.push(r),r=OT):t===14?r=dg(99,EI.bind(null,e)):(r=xwe(t),r=dg(r,j5.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function j5(e){if(zx=-1,Nx=Su=0,Ut&48)throw Error(Ke(327));var t=e.callbackNode;if(ec()&&e.callbackNode!==t)return null;var r=lg(e,e===Yn?Dn:0);if(r===0)return null;var o=r,u=Ut;Ut|=16;var a=G5();(Yn!==e||Dn!==o)&&(Ud(),Md(e,o));do try{OSe();break}catch(x){W5(e,x)}while(!0);if(QI(),ub.current=a,Ut=u,Di!==null?o=0:(Yn=null,Dn=0,o=fn),Nd&Bd)Md(e,0);else if(o!==0){if(o===2&&(Ut|=64,e.hydrate&&(e.hydrate=!1,XI(e.containerInfo)),r=J4(e),r!==0&&(o=Wv(e,r))),o===1)throw t=wb,Md(e,0),Pd(e,r),qo(e,Rn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,o){case 0:case 1:throw Error(Ke(345));case 2:fh(e);break;case 3:if(Pd(e,r),(r&62914560)===r&&(o=f2+500-Rn(),10<o)){if(lg(e,0)!==0)break;if(u=e.suspendedLanes,(u&r)!==r){Qa(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=VU(fh.bind(null,e),o);break}fh(e);break;case 4:if(Pd(e,r),(r&4186112)===r)break;for(o=e.eventTimes,u=-1;0<r;){var m=31-Zl(r);a=1<<m,m=o[m],m>u&&(u=m),r&=~a}if(r=u,r=Rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CSe(r/1960))-r,10<r){e.timeoutHandle=VU(fh.bind(null,e),r);break}fh(e);break;case 5:fh(e);break;default:throw Error(Ke(329));}}return qo(e,Rn()),e.callbackNode===t?j5.bind(null,e):null}function Pd(e,t){for(t&=~h2,t&=~Bd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zl(t),o=1<<r;e[r]=-1,t&=~o}}function EI(e){if(Ut&48)throw Error(Ke(327));if(ec(),e===Yn&&e.expiredLanes&Dn){var t=Dn,r=Wv(e,t);Nd&Bd&&(t=lg(e,t),r=Wv(e,t))}else t=lg(e,0),r=Wv(e,t);if(e.tag!==0&&r===2&&(Ut|=64,e.hydrate&&(e.hydrate=!1,XI(e.containerInfo)),t=J4(e),t!==0&&(r=Wv(e,t))),r===1)throw r=wb,Md(e,0),Pd(e,t),qo(e,Rn()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,fh(e),qo(e,Rn()),null}function PSe(){if(Eu!==null){var e=Eu;Eu=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,qo(t,Rn())})}Os()}function V5(e,t){var r=Ut;Ut|=1;try{return e(t)}finally{Ut=r,Ut===0&&(Ud(),Os())}}function $5(e,t){var r=Ut;Ut&=-2,Ut|=8;try{return e(t)}finally{Ut=r,Ut===0&&(Ud(),Os())}}function Mx(e,t){fi(_I,bh),bh|=t,Nd|=t}function d2(){bh=_I.current,Kr(_I)}function Md(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,cSe(r)),Di!==null)for(r=Di.return;r!==null;){var o=r;switch(o.tag){case 1:o=o.type.childContextTypes,o!=null&&Xx();break;case 3:Ld(),Kr(_a),Kr(Ln),i2();break;case 5:r2(o);break;case 4:Ld();break;case 13:Kr(hi);break;case 19:Kr(hi);break;case 10:e2(o);break;case 23:case 24:d2();}r=r.return}Yn=e,Di=Yl(e.current,null),Dn=bh=Nd=t,fn=0,wb=null,h2=Bd=bg=0}function W5(e,t){do{var r=Di;try{if(QI(),Qv.current=sb,ib){for(var o=yi.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}ib=!1}if(gg=0,hn=kn=yi=null,eg=!1,c2.current=null,r===null||r.return===null){fn=1,wb=t,Di=null;break}e:{var a=e,m=r.return,x=r,q=t;if(t=Dn,x.flags|=2048,x.firstEffect=x.lastEffect=null,q!==null&&typeof q=="object"&&typeof q.then=="function"){var T=q;if(!(x.mode&2)){var I=x.alternate;I?(x.updateQueue=I.updateQueue,x.memoizedState=I.memoizedState,x.lanes=I.lanes):(x.updateQueue=null,x.memoizedState=null)}var k=(hi.current&1)!==0,B=m;do{var Y;if(Y=B.tag===13){var de=B.memoizedState;if(de!==null)Y=de.dehydrated!==null;else{var pe=B.memoizedProps;Y=pe.fallback===void 0?!1:pe.unstable_avoidThisFallback!==!0?!0:!k}}if(Y){var Z=B.updateQueue;if(Z===null){var H=new Set;H.add(T),B.updateQueue=H}else Z.add(T);if(!(B.mode&2)){if(B.flags|=64,x.flags|=16384,x.flags&=-2981,x.tag===1)if(x.alternate===null)x.tag=17;else{var J=Vl(-1,1);J.tag=2,$l(x,J)}x.lanes|=1;break e}q=void 0,x=t;var ve=a.pingCache;if(ve===null?(ve=a.pingCache=new qSe,q=new Set,ve.set(T,q)):(q=ve.get(T),q===void 0&&(q=new Set,ve.set(T,q))),!q.has(x)){q.add(x);var be=FSe.bind(null,a,T,x);T.then(be,be)}B.flags|=4096,B.lanes=t;break e}B=B.return}while(B!==null);q=Error((Sd(x.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}fn!==5&&(fn=2),q=l2(q,x),B=m;do{switch(B.tag){case 3:a=q,B.flags|=4096,t&=-t,B.lanes|=t;var Le=N5(B,a,t);XU(B,Le);break e;case 1:a=q;var Oe=B.type,Ze=B.stateNode;if(!(B.flags&64)&&(typeof Oe.getDerivedStateFromError=="function"||Ze!==null&&typeof Ze.componentDidCatch=="function"&&(Cs===null||!Cs.has(Ze)))){B.flags|=4096,t&=-t,B.lanes|=t;var ft=B5(B,a,t);XU(B,ft);break e}}B=B.return}while(B!==null)}H5(r)}catch(He){t=He,Di===r&&r!==null&&(Di=r=r.return);continue}break}while(!0)}function G5(){var e=ub.current;return ub.current=sb,e===null?sb:e}function Wv(e,t){var r=Ut;Ut|=16;var o=G5();Yn===e&&Dn===t||Md(e,t);do try{MSe();break}catch(u){W5(e,u)}while(!0);if(QI(),Ut=r,ub.current=o,Di!==null)throw Error(Ke(261));return Yn=null,Dn=0,fn}function MSe(){for(;Di!==null;)K5(Di)}function OSe(){for(;Di!==null&&!dSe();)K5(Di)}function K5(e){var t=X5(e.alternate,e,bh);e.memoizedProps=e.pendingProps,t===null?H5(e):Di=t,c2.current=null}function H5(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&2048){if(r=SSe(t),r!==null){r.flags&=2047,Di=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(r=wSe(r,t,bh),r!==null){Di=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||bh&1073741824||!(r.mode&4)){for(var o=0,u=r.child;u!==null;)o|=u.lanes|u.childLanes,u=u.sibling;r.childLanes=o}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){Di=t;return}Di=t=e}while(t!==null);fn===0&&(fn=5)}function fh(e){var t=Dd();return xh(99,kSe.bind(null,e,t)),null}function kSe(e,t){do ec();while(tg!==null);if(Ut&48)throw Error(Ke(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ke(177));e.callbackNode=null;var o=r.lanes|r.childLanes,u=o,a=e.pendingLanes&~u;e.pendingLanes=u,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=u,e.mutableReadLanes&=u,e.entangledLanes&=u,u=e.entanglements;for(var m=e.eventTimes,x=e.expirationTimes;0<a;){var q=31-Zl(a),T=1<<q;u[q]=0,m[q]=-1,x[q]=-1,a&=~T}if(Eu!==null&&!(o&24)&&Eu.has(e)&&Eu.delete(e),e===Yn&&(Di=Yn=null,Dn=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,o=r.firstEffect):o=r:o=r.firstEffect,o!==null){if(u=Ut,Ut|=32,c2.current=null,CT=kx,m=FU(),rI(m)){if("selectionStart"in m)x={start:m.selectionStart,end:m.selectionEnd};else e:if(x=(x=m.ownerDocument)&&x.defaultView||window,(T=x.getSelection&&x.getSelection())&&T.rangeCount!==0){x=T.anchorNode,a=T.anchorOffset,q=T.focusNode,T=T.focusOffset;try{x.nodeType,q.nodeType}catch(He){x=null;break e}var I=0,k=-1,B=-1,Y=0,de=0,pe=m,Z=null;t:for(;;){for(var H;pe!==x||a!==0&&pe.nodeType!==3||(k=I+a),pe!==q||T!==0&&pe.nodeType!==3||(B=I+T),pe.nodeType===3&&(I+=pe.nodeValue.length),(H=pe.firstChild)!==null;)Z=pe,pe=H;for(;;){if(pe===m)break t;if(Z===x&&++Y===a&&(k=I),Z===q&&++de===T&&(B=I),(H=pe.nextSibling)!==null)break;pe=Z,Z=pe.parentNode}pe=H}x=k===-1||B===-1?null:{start:k,end:B}}else x=null;x=x||{start:0,end:0}}else x=null;PT={focusedElem:m,selectionRange:x},kx=!1,ig=null,Bx=!1,gt=o;do try{RSe()}catch(He){if(gt===null)throw Error(Ke(330));Kl(gt,He),gt=gt.nextEffect}while(gt!==null);ig=null,gt=o;do try{for(m=e;gt!==null;){var J=gt.flags;if(J&16&&ag(gt.stateNode,""),J&128){var ve=gt.alternate;if(ve!==null){var be=ve.ref;be!==null&&(typeof be=="function"?be(null):be.current=null)}}switch(J&1038){case 2:b4(gt),gt.flags&=-3;break;case 6:b4(gt),gt.flags&=-3,FT(gt.alternate,gt);break;case 1024:gt.flags&=-1025;break;case 1028:gt.flags&=-1025,FT(gt.alternate,gt);break;case 4:FT(gt.alternate,gt);break;case 8:x=gt,U5(m,x);var Le=x.alternate;_4(x),Le!==null&&_4(Le);}gt=gt.nextEffect}}catch(He){if(gt===null)throw Error(Ke(330));Kl(gt,He),gt=gt.nextEffect}while(gt!==null);if(be=PT,ve=FU(),J=be.focusedElem,m=be.selectionRange,ve!==J&&J&&J.ownerDocument&&a5(J.ownerDocument.documentElement,J)){for(m!==null&&rI(J)&&(ve=m.start,be=m.end,be===void 0&&(be=ve),("selectionStart"in J)?(J.selectionStart=ve,J.selectionEnd=Math.min(be,J.value.length)):(be=(ve=J.ownerDocument||document)&&ve.defaultView||window,be.getSelection&&(be=be.getSelection(),x=J.textContent.length,Le=Math.min(m.start,x),m=m.end===void 0?Le:Math.min(m.end,x),!be.extend&&Le>m&&(x=m,m=Le,Le=x),x=LU(J,Le),a=LU(J,m),x&&a&&(be.rangeCount!==1||be.anchorNode!==x.node||be.anchorOffset!==x.offset||be.focusNode!==a.node||be.focusOffset!==a.offset)&&(ve=ve.createRange(),ve.setStart(x.node,x.offset),be.removeAllRanges(),Le>m?(be.addRange(ve),be.extend(a.node,a.offset)):(ve.setEnd(a.node,a.offset),be.addRange(ve)))))),ve=[],be=J;be=be.parentNode;)be.nodeType===1&&ve.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<ve.length;J++)be=ve[J],be.element.scrollLeft=be.left,be.element.scrollTop=be.top}kx=!!CT,PT=CT=null,e.current=r,gt=o;do try{for(J=e;gt!==null;){var Oe=gt.flags;if(Oe&36&&TSe(J,gt.alternate,gt),Oe&128){ve=void 0;var Ze=gt.ref;if(Ze!==null){var ft=gt.stateNode;switch(gt.tag){case 5:ve=ft;break;default:ve=ft;}typeof Ze=="function"?Ze(ve):Ze.current=ve}}gt=gt.nextEffect}}catch(He){if(gt===null)throw Error(Ke(330));Kl(gt,He),gt=gt.nextEffect}while(gt!==null);gt=null,mSe(),Ut=u}else e.current=r;if(Jl)Jl=!1,tg=e,$v=t;else for(gt=o;gt!==null;)t=gt.nextEffect,gt.nextEffect=null,gt.flags&8&&(Oe=gt,Oe.sibling=null,Oe.stateNode=null),gt=t;if(o=e.pendingLanes,o===0&&(Cs=null),o===1?e===AI?rg++:(rg=0,AI=e):rg=0,r=r.stateNode,yh&&typeof yh.onCommitFiberRoot=="function")try{yh.onCommitFiberRoot(JI,r,void 0,(r.current.flags&64)===64)}catch(He){}if(qo(e,Rn()),lb)throw lb=!1,e=wI,wI=null,e;return Ut&8||Os(),null}function RSe(){for(;gt!==null;){var e=gt.alternate;Bx||ig===null||(gt.flags&8?SU(gt,ig)&&(Bx=!0):gt.tag===13&&ISe(e,gt)&&SU(gt,ig)&&(Bx=!0));var t=gt.flags;t&256&&ESe(e,gt),!(t&512)||Jl||(Jl=!0,dg(97,function(){return ec(),null})),gt=gt.nextEffect}}function ec(){if($v!==90){var e=97<$v?97:$v;return $v=90,xh(e,LSe)}return!1}function DSe(e,t){SI.push(t,e),Jl||(Jl=!0,dg(97,function(){return ec(),null}))}function Z5(e,t){qI.push(t,e),Jl||(Jl=!0,dg(97,function(){return ec(),null}))}function LSe(){if(tg===null)return!1;var e=tg;if(tg=null,Ut&48)throw Error(Ke(331));var t=Ut;Ut|=32;var r=qI;qI=[];for(var o=0;o<r.length;o+=2){var u=r[o],a=r[o+1],m=u.destroy;if(u.destroy=void 0,typeof m=="function")try{m()}catch(q){if(a===null)throw Error(Ke(330));Kl(a,q)}}for(r=SI,SI=[],o=0;o<r.length;o+=2){u=r[o],a=r[o+1];try{var x=u.create;u.destroy=x()}catch(q){if(a===null)throw Error(Ke(330));Kl(a,q)}}for(x=e.current.firstEffect;x!==null;)e=x.nextEffect,x.nextEffect=null,x.flags&8&&(x.sibling=null,x.stateNode=null),x=e;return Ut=t,Os(),!0}function S4(e,t,r){t=l2(r,t),t=N5(e,t,1),$l(e,t),t=Qa(),e=Sb(e,1),e!==null&&(mb(e,1,t),qo(e,t))}function Kl(e,t){if(e.tag===3)S4(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){S4(r,e,t);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Cs===null||!Cs.has(o))){e=l2(t,e);var u=B5(r,e,1);if($l(r,u),u=Qa(),r=Sb(r,1),r!==null)mb(r,1,u),qo(r,u);else if(typeof o.componentDidCatch=="function"&&(Cs===null||!Cs.has(o)))try{o.componentDidCatch(t,e)}catch(a){}break}}r=r.return}}function FSe(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=Qa(),e.pingedLanes|=e.suspendedLanes&r,Yn===e&&(Dn&r)===r&&(fn===4||fn===3&&(Dn&62914560)===Dn&&500>Rn()-f2?Md(e,0):h2|=r),qo(e,t)}function zSe(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(Su===0&&(Su=Nd),t=vd(62914560&~Su),t===0&&(t=4194304)):t=Dd()===99?1:2:t=1),r=Qa(),e=Sb(e,t),e!==null&&(mb(e,t,r),qo(e,r))}var X5;X5=function(e,t,r){var o=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||_a.current)es=!0;else if(r&o)es=!!(e.flags&16384);else{switch(es=!1,t.tag){case 3:l4(t),RT();break;case 5:e4(t);break;case 1:xa(t.type)&&Lx(t);break;case 4:cI(t,t.stateNode.containerInfo);break;case 10:o=t.memoizedProps.value;var u=t.type._context;fi(Jx,u._currentValue),u._currentValue=o;break;case 13:if(t.memoizedState!==null)return r&t.child.childLanes?c4(e,t,r):(fi(hi,hi.current&1),t=Au(e,t,r),t!==null?t.sibling:null);fi(hi,hi.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&64){if(o)return m4(e,t,r);t.flags|=64}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),fi(hi,hi.current),o)break;return null;case 23:case 24:return t.lanes=0,DT(e,t,r);}return Au(e,t,r)}}else es=!1;switch(t.lanes=0,t.tag){case 2:if(o=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,u=Rd(t,Ln.current),Id(t,r),u=a2(null,t,o,e,u,r),t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,xa(o)){var a=!0;Lx(t)}else a=!1;t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,t2(t);var m=o.getDerivedStateFromProps;typeof m=="function"&&eb(t,o,m,e),u.updater=bb,t.stateNode=u,u._reactInternals=t,lI(t,o,e,r),t=pI(null,t,o,!0,a,r)}else t.tag=0,ya(null,t,u,r),t=t.child;return t;case 16:u=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=u._init,u=a(u._payload),t.type=u,a=t.tag=BSe(u),e=Qo(u,e),a){case 0:t=dI(null,t,u,e,r);break e;case 1:t=u4(null,t,u,e,r);break e;case 11:t=o4(null,t,u,e,r);break e;case 14:t=s4(null,t,u,Qo(u.type,e),o,r);break e;}throw Error(Ke(306,u,""))}return t;case 0:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Qo(o,u),dI(e,t,o,u,r);case 1:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Qo(o,u),u4(e,t,o,u,r);case 3:if(l4(t),o=t.updateQueue,e===null||o===null)throw Error(Ke(282));if(o=t.pendingProps,u=t.memoizedState,u=u!==null?u.element:null,b5(e,t),pg(t,o,null,r),o=t.memoizedState.element,o===u)RT(),t=Au(e,t,r);else{if(u=t.stateNode,(a=u.hydrate)&&(Nl=Td(t.stateNode.containerInfo.firstChild),qu=t,a=Ms=!0),a){if(e=u.mutableSourceEagerHydrationData,e!=null)for(u=0;u<e.length;u+=2)a=e[u],a._workInProgressVersionPrimary=e[u+1],Cd.push(a);for(r=A5(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else ya(e,t,o,r),RT();t=t.child}return t;case 5:return e4(t),e===null&&hI(t),o=t.type,u=t.pendingProps,a=e!==null?e.memoizedProps:null,m=u.children,aI(o,u)?m=null:a!==null&&aI(o,a)&&(t.flags|=16),D5(e,t),ya(e,t,m,r),t.child;case 6:return e===null&&hI(t),null;case 13:return c4(e,t,r);case 4:return cI(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=tb(t,null,o,r):ya(e,t,o,r),t.child;case 11:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Qo(o,u),o4(e,t,o,u,r);case 7:return ya(e,t,t.pendingProps,r),t.child;case 8:return ya(e,t,t.pendingProps.children,r),t.child;case 12:return ya(e,t,t.pendingProps.children,r),t.child;case 10:e:{o=t.type._context,u=t.pendingProps,m=t.memoizedProps,a=u.value;var x=t.type._context;if(fi(Jx,x._currentValue),x._currentValue=a,m!==null)if(x=m.value,a=xo(x,a)?0:(typeof o._calculateChangedBits=="function"?o._calculateChangedBits(x,a):1073741823)|0,a===0){if(m.children===u.children&&!_a.current){t=Au(e,t,r);break e}}else for(x=t.child,x!==null&&(x.return=t);x!==null;){var q=x.dependencies;if(q!==null){m=x.child;for(var T=q.firstContext;T!==null;){if(T.context===o&&T.observedBits&a){x.tag===1&&(T=Vl(-1,r&-r),T.tag=2,$l(x,T)),x.lanes|=r,T=x.alternate,T!==null&&(T.lanes|=r),x5(x.return,r),q.lanes|=r;break}T=T.next}}else m=x.tag===10&&x.type===t.type?null:x.child;if(m!==null)m.return=x;else for(m=x;m!==null;){if(m===t){m=null;break}if(x=m.sibling,x!==null){x.return=m.return,m=x;break}m=m.return}x=m}ya(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,a=t.pendingProps,o=a.children,Id(t,r),u=So(u,a.unstable_observedBits),o=o(u),t.flags|=1,ya(e,t,o,r),t.child;case 14:return u=t.type,a=Qo(u,t.pendingProps),a=Qo(u.type,a),s4(e,t,u,a,o,r);case 15:return R5(e,t,t.type,t.pendingProps,o,r);case 17:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Qo(o,u),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,xa(o)?(e=!0,Lx(t)):e=!1,Id(t,r),S5(t,o,u),lI(t,o,u,r),pI(null,t,o,!0,e,r);case 19:return m4(e,t,r);case 23:return DT(e,t,r);case 24:return DT(e,t,r);}throw Error(Ke(156,t.tag))};function NSe(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(e,t,r,o){return new NSe(e,t,r,o)}function p2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function BSe(e){if(typeof e=="function")return p2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fb)return 11;if(e===db)return 14}return 2}function Yl(e,t){var r=e.alternate;return r===null?(r=bo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ux(e,t,r,o,u,a){var m=2;if(o=e,typeof e=="function")p2(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case Ll:return Od(r.children,u,a,t);case E4:m=8,u|=16;break;case PI:m=8,u|=1;break;case Gv:return e=bo(12,r,t,u|8),e.elementType=Gv,e.type=Gv,e.lanes=a,e;case Kv:return e=bo(13,r,t,u),e.type=Kv,e.elementType=Kv,e.lanes=a,e;case jx:return e=bo(19,r,t,u),e.elementType=jx,e.lanes=a,e;case LI:return m2(r,u,a,t);case UT:return e=bo(24,r,t,u),e.elementType=UT,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case MI:m=10;break e;case OI:m=9;break e;case fb:m=11;break e;case db:m=14;break e;case kI:m=16,o=null;break e;case RI:m=22;break e;}throw Error(Ke(130,e==null?e:typeof e,""));}return t=bo(m,r,t,u),t.elementType=e,t.type=o,t.lanes=a,t}function Od(e,t,r,o){return e=bo(7,e,o,t),e.lanes=r,e}function m2(e,t,r,o){return e=bo(23,e,o,t),e.elementType=LI,e.lanes=r,e}function zT(e,t,r){return e=bo(6,e,null,t),e.lanes=r,e}function NT(e,t,r){return t=bo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function USe(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=ST(0),this.expirationTimes=ST(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ST(0),this.mutableSourceEagerHydrationData=null}function jSe(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dh,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function cb(e,t,r,o){var u=t.current,a=Qa(),m=Wl(u);e:if(r){r=r._reactInternals;t:{if(qh(r)!==r||r.tag!==1)throw Error(Ke(170));var x=r;do{switch(x.tag){case 3:x=x.stateNode.context;break t;case 1:if(xa(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break t}}x=x.return}while(x!==null);throw Error(Ke(171))}if(r.tag===1){var q=r.type;if(xa(q)){r=d5(r,q,x);break e}}r=x}else r=Xl;return t.context===null?t.context=r:t.pendingContext=r,t=Vl(a,m),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),$l(u,t),Gl(u,m,a),m}function BT(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode;}}function q4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function v2(e,t){q4(e,t),(e=e.alternate)&&q4(e,t)}function VSe(){return null}function g2(e,t,r){var o=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new USe(e,t,r!=null&&r.hydrate===!0),t=bo(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,t2(t),e[zd]=r.current,u5(e.nodeType===8?e.parentNode:e),o)for(e=0;e<o.length;e++){t=o[e];var u=t._getVersion;u=u(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,u]:r.mutableSourceEagerHydrationData.push(t,u)}this._internalRoot=r}g2.prototype.render=function(e){cb(e,this._internalRoot,null,null)};g2.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;cb(null,e,null,function(){t[zd]=null})};function wg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $Se(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new g2(e,0,t?{hydrate:!0}:void 0)}function qb(e,t,r,o,u){var a=r._reactRootContainer;if(a){var m=a._internalRoot;if(typeof u=="function"){var x=u;u=function(){var T=BT(m);x.call(T)}}cb(t,m,e,u)}else{if(a=r._reactRootContainer=$Se(r,o),m=a._internalRoot,typeof u=="function"){var q=u;u=function(){var T=BT(m);q.call(T)}}$5(function(){cb(t,m,e,u)})}return BT(m)}U4=function(e){if(e.tag===13){var t=Qa();Gl(e,4,t),v2(e,4)}};UI=function(e){if(e.tag===13){var t=Qa();Gl(e,67108864,t),v2(e,67108864)}};j4=function(e){if(e.tag===13){var t=Qa(),r=Wl(e);Gl(e,r,t),v2(e,r)}};V4=function(e,t){return t()};JT=function(e,t,r){switch(t){case"input":if(VT(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var u=_b(o);if(!u)throw Error(Ke(90));I4(o),VT(o,u)}}}break;case"textarea":P4(e,r);break;case"select":t=r.value,t!=null&&qd(e,!!r.multiple,t,!1);}};zI=V5;F4=function(e,t,r,o,u){var a=Ut;Ut|=4;try{return xh(98,e.bind(null,t,r,o,u))}finally{Ut=a,Ut===0&&(Ud(),Os())}};NI=function(){!(Ut&49)&&(PSe(),ec())};z4=function(e,t){var r=Ut;Ut|=2;try{return e(t)}finally{Ut=r,Ut===0&&(Ud(),Os())}};function J5(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wg(t))throw Error(Ke(200));return jSe(e,t,null,r)}var WSe={Events:[_g,xd,_b,D4,L4,ec,{current:!1}]},Nv={findFiberByHostInstance:mh,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},GSe={bundleType:Nv.bundleType,version:Nv.version,rendererPackageName:Nv.rendererPackageName,rendererConfig:Nv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=B4(e),e===null?null:e.stateNode},findFiberByHostInstance:Nv.findFiberByHostInstance||VSe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Bv=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Bv.isDisabled&&Bv.supportsFiber))try{JI=Bv.inject(GSe),yh=Bv}catch(e){}var Bv;Ao.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WSe;Ao.createPortal=J5;Ao.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ke(188)):Error(Ke(268,Object.keys(e)));return e=B4(t),e=e===null?null:e.stateNode,e};Ao.flushSync=function(e,t){var r=Ut;if(r&48)return e(t);Ut|=1;try{if(e)return xh(99,e.bind(null,t))}finally{Ut=r,Os()}};Ao.hydrate=function(e,t,r){if(!wg(t))throw Error(Ke(200));return qb(null,e,t,!0,r)};Ao.render=function(e,t,r){if(!wg(t))throw Error(Ke(200));return qb(null,e,t,!1,r)};Ao.unmountComponentAtNode=function(e){if(!wg(e))throw Error(Ke(40));return e._reactRootContainer?($5(function(){qb(null,null,e,!1,function(){e._reactRootContainer=null,e[zd]=null})}),!0):!1};Ao.unstable_batchedUpdates=V5;Ao.unstable_createPortal=function(e,t){return J5(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ao.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!wg(r))throw Error(Ke(200));if(e==null||e._reactInternals===void 0)throw Error(Ke(38));return qb(e,t,r,!1,o)};Ao.version="17.0.2"});var Iu=b((lIt,ej)=>{"use strict";function Q5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q5)}catch(e){console.error(e)}}Q5(),ej.exports=Y5()});var Xe=b((y2,tj)=>{"use strict";var Sg=function(e){return e&&e.Math===Math&&e};tj.exports=Sg(typeof globalThis=="object"&&globalThis)||Sg(typeof window=="object"&&window)||Sg(typeof self=="object"&&self)||Sg(typeof global=="object"&&global)||Sg(typeof y2=="object"&&y2)||function(){return this}()||Function("return this")()});var ze=b((cIt,rj)=>{"use strict";rj.exports=function(e){try{return!!e()}catch(t){return!0}}});var wt=b((hIt,ij)=>{"use strict";var KSe=ze();ij.exports=!KSe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var jd=b((fIt,nj)=>{"use strict";var HSe=ze();nj.exports=!HSe(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var tt=b((dIt,aj)=>{"use strict";var ZSe=jd(),Ab=Function.prototype.call;aj.exports=ZSe?Ab.bind(Ab):function(){return Ab.apply(Ab,arguments)}});var qg=b(uj=>{"use strict";var oj={}.propertyIsEnumerable,sj=Object.getOwnPropertyDescriptor,XSe=sj&&!oj.call({1:2},1);uj.f=XSe?function(t){var r=sj(this,t);return!!r&&r.enumerable}:oj});var ba=b((mIt,lj)=>{"use strict";lj.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Re=b((vIt,fj)=>{"use strict";var cj=jd(),hj=Function.prototype,_2=hj.call,JSe=cj&&hj.bind.bind(_2,_2);fj.exports=cj?JSe:function(e){return function(){return _2.apply(e,arguments)}}});var pn=b((gIt,pj)=>{"use strict";var dj=Re(),YSe=dj({}.toString),QSe=dj("".slice);pj.exports=function(e){return QSe(YSe(e),8,-1)}});var Cu=b((yIt,mj)=>{"use strict";var eqe=Re(),tqe=ze(),rqe=pn(),x2=Object,iqe=eqe("".split);mj.exports=tqe(function(){return!x2("z").propertyIsEnumerable(0)})?function(e){return rqe(e)==="String"?iqe(e,""):x2(e)}:x2});var Ei=b((_It,vj)=>{"use strict";vj.exports=function(e){return e==null}});var zr=b((xIt,gj)=>{"use strict";var nqe=Ei(),aqe=TypeError;gj.exports=function(e){if(nqe(e))throw new aqe("Can't call method on "+e);return e}});var Ti=b((bIt,yj)=>{"use strict";var oqe=Cu(),sqe=zr();yj.exports=function(e){return oqe(sqe(e))}});var jt=b((wIt,_j)=>{"use strict";var b2=typeof document=="object"&&document.all;_j.exports=typeof b2=="undefined"&&b2!==void 0?function(e){return typeof e=="function"||e===b2}:function(e){return typeof e=="function"}});var Dt=b((SIt,xj)=>{"use strict";var uqe=jt();xj.exports=function(e){return typeof e=="object"?e!==null:uqe(e)}});var Ot=b((qIt,bj)=>{"use strict";var w2=Xe(),lqe=jt(),cqe=function(e){return lqe(e)?e:void 0};bj.exports=function(e,t){return arguments.length<2?cqe(w2[e]):w2[e]&&w2[e][t]}});var mn=b((AIt,wj)=>{"use strict";var hqe=Re();wj.exports=hqe({}.isPrototypeOf)});var ts=b((EIt,Aj)=>{"use strict";var fqe=Xe(),Sj=fqe.navigator,qj=Sj&&Sj.userAgent;Aj.exports=qj?String(qj):""});var ks=b((TIt,Mj)=>{"use strict";var Pj=Xe(),S2=ts(),Ej=Pj.process,Tj=Pj.Deno,Ij=Ej&&Ej.versions||Tj&&Tj.version,Cj=Ij&&Ij.v8,rs,Eb;Cj&&(rs=Cj.split("."),Eb=rs[0]>0&&rs[0]<4?1:+(rs[0]+rs[1]));!Eb&&S2&&(rs=S2.match(/Edge\/(\d+)/),(!rs||rs[1]>=74)&&(rs=S2.match(/Chrome\/(\d+)/),rs&&(Eb=+rs[1])));Mj.exports=Eb});var tc=b((IIt,kj)=>{"use strict";var Oj=ks(),dqe=ze(),pqe=Xe(),mqe=pqe.String;kj.exports=!!Object.getOwnPropertySymbols&&!dqe(function(){var e=Symbol("symbol detection");return!mqe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Oj&&Oj<41})});var q2=b((CIt,Rj)=>{"use strict";var vqe=tc();Rj.exports=vqe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Pu=b((PIt,Dj)=>{"use strict";var gqe=Ot(),yqe=jt(),_qe=mn(),xqe=q2(),bqe=Object;Dj.exports=xqe?function(e){return typeof e=="symbol"}:function(e){var t=gqe("Symbol");return yqe(t)&&_qe(t.prototype,bqe(e))}});var rc=b((MIt,Lj)=>{"use strict";var wqe=String;Lj.exports=function(e){try{return wqe(e)}catch(t){return"Object"}}});var Mt=b((OIt,Fj)=>{"use strict";var Sqe=jt(),qqe=rc(),Aqe=TypeError;Fj.exports=function(e){if(Sqe(e))return e;throw new Aqe(qqe(e)+" is not a function")}});var di=b((kIt,zj)=>{"use strict";var Eqe=Mt(),Tqe=Ei();zj.exports=function(e,t){var r=e[t];return Tqe(r)?void 0:Eqe(r)}});var I2=b((RIt,Nj)=>{"use strict";var A2=tt(),E2=jt(),T2=Dt(),Iqe=TypeError;Nj.exports=function(e,t){var r,o;if(t==="string"&&E2(r=e.toString)&&!T2(o=A2(r,e))||E2(r=e.valueOf)&&!T2(o=A2(r,e))||t!=="string"&&E2(r=e.toString)&&!T2(o=A2(r,e)))return o;throw new Iqe("Can't convert object to primitive value")}});var Kt=b((DIt,Bj)=>{"use strict";Bj.exports=!1});var Tb=b((LIt,jj)=>{"use strict";var Uj=Xe(),Cqe=Object.defineProperty;jj.exports=function(e,t){try{Cqe(Uj,e,{value:t,configurable:!0,writable:!0})}catch(r){Uj[e]=t}return t}});var Ag=b((FIt,Wj)=>{"use strict";var Pqe=Kt(),Mqe=Xe(),Oqe=Tb(),Vj="__core-js_shared__",$j=Wj.exports=Mqe[Vj]||Oqe(Vj,{});($j.versions||($j.versions=[])).push({version:"3.39.0",mode:Pqe?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Mu=b((zIt,Kj)=>{"use strict";var Gj=Ag();Kj.exports=function(e,t){return Gj[e]||(Gj[e]=t||{})}});var Ht=b((NIt,Hj)=>{"use strict";var kqe=zr(),Rqe=Object;Hj.exports=function(e){return Rqe(kqe(e))}});var $t=b((BIt,Zj)=>{"use strict";var Dqe=Re(),Lqe=Ht(),Fqe=Dqe({}.hasOwnProperty);Zj.exports=Object.hasOwn||function(t,r){return Fqe(Lqe(t),r)}});var ic=b((UIt,Xj)=>{"use strict";var zqe=Re(),Nqe=0,Bqe=Math.random(),Uqe=zqe(1 .toString);Xj.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Uqe(++Nqe+Bqe,36)}});var Et=b((jIt,Yj)=>{"use strict";var jqe=Xe(),Vqe=Mu(),Jj=$t(),$qe=ic(),Wqe=tc(),Gqe=q2(),Vd=jqe.Symbol,C2=Vqe("wks"),Kqe=Gqe?Vd.for||Vd:Vd&&Vd.withoutSetter||$qe;Yj.exports=function(e){return Jj(C2,e)||(C2[e]=Wqe&&Jj(Vd,e)?Vd[e]:Kqe("Symbol."+e)),C2[e]}});var Eg=b((VIt,t6)=>{"use strict";var Hqe=tt(),Qj=Dt(),e6=Pu(),Zqe=di(),Xqe=I2(),Jqe=Et(),Yqe=TypeError,Qqe=Jqe("toPrimitive");t6.exports=function(e,t){if(!Qj(e)||e6(e))return e;var r=Zqe(e,Qqe),o;if(r){if(t===void 0&&(t="default"),o=Hqe(r,e,t),!Qj(o)||e6(o))return o;throw new Yqe("Can't convert object to primitive value")}return t===void 0&&(t="number"),Xqe(e,t)}});var Rs=b(($It,r6)=>{"use strict";var eAe=Eg(),tAe=Pu();r6.exports=function(e){var t=eAe(e,"string");return tAe(t)?t:t+""}});var Tg=b((WIt,n6)=>{"use strict";var rAe=Xe(),i6=Dt(),P2=rAe.document,iAe=i6(P2)&&i6(P2.createElement);n6.exports=function(e){return iAe?P2.createElement(e):{}}});var M2=b((GIt,a6)=>{"use strict";var nAe=wt(),aAe=ze(),oAe=Tg();a6.exports=!nAe&&!aAe(function(){return Object.defineProperty(oAe("div"),"a",{get:function(){return 7}}).a!==7})});var Hi=b(s6=>{"use strict";var sAe=wt(),uAe=tt(),lAe=qg(),cAe=ba(),hAe=Ti(),fAe=Rs(),dAe=$t(),pAe=M2(),o6=Object.getOwnPropertyDescriptor;s6.f=sAe?o6:function(t,r){if(t=hAe(t),r=fAe(r),pAe)try{return o6(t,r)}catch(o){}if(dAe(t,r))return cAe(!uAe(lAe.f,t,r),t[r])}});var O2=b((HIt,u6)=>{"use strict";var mAe=wt(),vAe=ze();u6.exports=mAe&&vAe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Qe=b((ZIt,l6)=>{"use strict";var gAe=Dt(),yAe=String,_Ae=TypeError;l6.exports=function(e){if(gAe(e))return e;throw new _Ae(yAe(e)+" is not an object")}});var Dr=b(h6=>{"use strict";var xAe=wt(),bAe=M2(),wAe=O2(),Ib=Qe(),c6=Rs(),SAe=TypeError,k2=Object.defineProperty,qAe=Object.getOwnPropertyDescriptor,R2="enumerable",D2="configurable",L2="writable";h6.f=xAe?wAe?function(t,r,o){if(Ib(t),r=c6(r),Ib(o),typeof t=="function"&&r==="prototype"&&"value"in o&&L2 in o&&!o[L2]){var u=qAe(t,r);u&&u[L2]&&(t[r]=o.value,o={configurable:D2 in o?o[D2]:u[D2],enumerable:R2 in o?o[R2]:u[R2],writable:!1})}return k2(t,r,o)}:k2:function(t,r,o){if(Ib(t),r=c6(r),Ib(o),bAe)try{return k2(t,r,o)}catch(u){}if("get"in o||"set"in o)throw new SAe("Accessors not supported");return"value"in o&&(t[r]=o.value),t}});var Ii=b((JIt,f6)=>{"use strict";var AAe=wt(),EAe=Dr(),TAe=ba();f6.exports=AAe?function(e,t,r){return EAe.f(e,t,TAe(1,r))}:function(e,t,r){return e[t]=r,e}});var Eh=b((YIt,p6)=>{"use strict";var F2=wt(),IAe=$t(),d6=Function.prototype,CAe=F2&&Object.getOwnPropertyDescriptor,z2=IAe(d6,"name"),PAe=z2&&function(){}.name==="something",MAe=z2&&(!F2||F2&&CAe(d6,"name").configurable);p6.exports={EXISTS:z2,PROPER:PAe,CONFIGURABLE:MAe}});var Ig=b((QIt,m6)=>{"use strict";var OAe=Re(),kAe=jt(),N2=Ag(),RAe=OAe(Function.toString);kAe(N2.inspectSource)||(N2.inspectSource=function(e){return RAe(e)});m6.exports=N2.inspectSource});var B2=b((e2t,g6)=>{"use strict";var DAe=Xe(),LAe=jt(),v6=DAe.WeakMap;g6.exports=LAe(v6)&&/native code/.test(String(v6))});var Cg=b((t2t,_6)=>{"use strict";var FAe=Mu(),zAe=ic(),y6=FAe("keys");_6.exports=function(e){return y6[e]||(y6[e]=zAe(e))}});var $d=b((r2t,x6)=>{"use strict";x6.exports={}});var pr=b((i2t,S6)=>{"use strict";var NAe=B2(),w6=Xe(),BAe=Dt(),UAe=Ii(),U2=$t(),j2=Ag(),jAe=Cg(),VAe=$d(),b6="Object already initialized",V2=w6.TypeError,$Ae=w6.WeakMap,Cb,Pg,Pb,WAe=function(e){return Pb(e)?Pg(e):Cb(e,{})},GAe=function(e){return function(t){var r;if(!BAe(t)||(r=Pg(t)).type!==e)throw new V2("Incompatible receiver, "+e+" required");return r}};NAe||j2.state?(is=j2.state||(j2.state=new $Ae),is.get=is.get,is.has=is.has,is.set=is.set,Cb=function(e,t){if(is.has(e))throw new V2(b6);return t.facade=e,is.set(e,t),t},Pg=function(e){return is.get(e)||{}},Pb=function(e){return is.has(e)}):(Th=jAe("state"),VAe[Th]=!0,Cb=function(e,t){if(U2(e,Th))throw new V2(b6);return t.facade=e,UAe(e,Th,t),t},Pg=function(e){return U2(e,Th)?e[Th]:{}},Pb=function(e){return U2(e,Th)});var is,Th;S6.exports={set:Cb,get:Pg,has:Pb,enforce:WAe,getterFor:GAe}});var Mg=b((n2t,E6)=>{"use strict";var W2=Re(),KAe=ze(),HAe=jt(),Mb=$t(),$2=wt(),ZAe=Eh().CONFIGURABLE,XAe=Ig(),A6=pr(),JAe=A6.enforce,YAe=A6.get,q6=String,Ob=Object.defineProperty,QAe=W2("".slice),eEe=W2("".replace),tEe=W2([].join),rEe=$2&&!KAe(function(){return Ob(function(){},"length",{value:8}).length!==8}),iEe=String(String).split("String"),nEe=E6.exports=function(e,t,r){QAe(q6(t),0,7)==="Symbol("&&(t="["+eEe(q6(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!Mb(e,"name")||ZAe&&e.name!==t)&&($2?Ob(e,"name",{value:t,configurable:!0}):e.name=t),rEe&&r&&Mb(r,"arity")&&e.length!==r.arity&&Ob(e,"length",{value:r.arity});try{r&&Mb(r,"constructor")&&r.constructor?$2&&Ob(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(u){}var o=JAe(e);return Mb(o,"source")||(o.source=tEe(iEe,typeof t=="string"?t:"")),e};Function.prototype.toString=nEe(function(){return HAe(this)&&YAe(this).source||XAe(this)},"toString")});var yr=b((a2t,T6)=>{"use strict";var aEe=jt(),oEe=Dr(),sEe=Mg(),uEe=Tb();T6.exports=function(e,t,r,o){o||(o={});var u=o.enumerable,a=o.name!==void 0?o.name:t;if(aEe(r)&&sEe(r,a,o),o.global)u?e[t]=r:uEe(t,r);else{try{o.unsafe?e[t]&&(u=!0):delete e[t]}catch(m){}u?e[t]=r:oEe.f(e,t,{value:r,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}});var G2=b((o2t,I6)=>{"use strict";var lEe=Math.ceil,cEe=Math.floor;I6.exports=Math.trunc||function(t){var r=+t;return(r>0?cEe:lEe)(r)}});var Ur=b((s2t,C6)=>{"use strict";var hEe=G2();C6.exports=function(e){var t=+e;return t!==t||t===0?0:hEe(t)}});var ns=b((u2t,P6)=>{"use strict";var fEe=Ur(),dEe=Math.max,pEe=Math.min;P6.exports=function(e,t){var r=fEe(e);return r<0?dEe(r+t,0):pEe(r,t)}});var wa=b((l2t,M6)=>{"use strict";var mEe=Ur(),vEe=Math.min;M6.exports=function(e){var t=mEe(e);return t>0?vEe(t,9007199254740991):0}});var er=b((c2t,O6)=>{"use strict";var gEe=wa();O6.exports=function(e){return gEe(e.length)}});var Wd=b((h2t,R6)=>{"use strict";var yEe=Ti(),_Ee=ns(),xEe=er(),k6=function(e){return function(t,r,o){var u=yEe(t),a=xEe(u);if(a===0)return!e&&-1;var m=_Ee(o,a),x;if(e&&r!==r){for(;a>m;)if(x=u[m++],x!==x)return!0}else for(;a>m;m++)if((e||m in u)&&u[m]===r)return e||m||0;return!e&&-1}};R6.exports={includes:k6(!0),indexOf:k6(!1)}});var H2=b((f2t,L6)=>{"use strict";var bEe=Re(),K2=$t(),wEe=Ti(),SEe=Wd().indexOf,qEe=$d(),D6=bEe([].push);L6.exports=function(e,t){var r=wEe(e),o=0,u=[],a;for(a in r)!K2(qEe,a)&&K2(r,a)&&D6(u,a);for(;t.length>o;)K2(r,a=t[o++])&&(~SEe(u,a)||D6(u,a));return u}});var kb=b((d2t,F6)=>{"use strict";F6.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var nc=b(z6=>{"use strict";var AEe=H2(),EEe=kb(),TEe=EEe.concat("length","prototype");z6.f=Object.getOwnPropertyNames||function(t){return AEe(t,TEe)}});var Og=b(N6=>{"use strict";N6.f=Object.getOwnPropertySymbols});var Rb=b((v2t,B6)=>{"use strict";var IEe=Ot(),CEe=Re(),PEe=nc(),MEe=Og(),OEe=Qe(),kEe=CEe([].concat);B6.exports=IEe("Reflect","ownKeys")||function(t){var r=PEe.f(OEe(t)),o=MEe.f;return o?kEe(r,o(t)):r}});var Ih=b((g2t,j6)=>{"use strict";var U6=$t(),REe=Rb(),DEe=Hi(),LEe=Dr();j6.exports=function(e,t,r){for(var o=REe(t),u=LEe.f,a=DEe.f,m=0;m<o.length;m++){var x=o[m];!U6(e,x)&&!(r&&U6(r,x))&&u(e,x,a(t,x))}}});var Gd=b((y2t,V6)=>{"use strict";var FEe=ze(),zEe=jt(),NEe=/#|\.prototype\./,kg=function(e,t){var r=UEe[BEe(e)];return r===VEe?!0:r===jEe?!1:zEe(t)?FEe(t):!!t},BEe=kg.normalize=function(e){return String(e).replace(NEe,".").toLowerCase()},UEe=kg.data={},jEe=kg.NATIVE="N",VEe=kg.POLYFILL="P";V6.exports=kg});var $=b((_2t,$6)=>{"use strict";var Db=Xe(),$Ee=Hi().f,WEe=Ii(),GEe=yr(),KEe=Tb(),HEe=Ih(),ZEe=Gd();$6.exports=function(e,t){var r=e.target,o=e.global,u=e.stat,a,m,x,q,T,I;if(o?m=Db:u?m=Db[r]||KEe(r,{}):m=Db[r]&&Db[r].prototype,m)for(x in t){if(T=t[x],e.dontCallGetSet?(I=$Ee(m,x),q=I&&I.value):q=m[x],a=ZEe(o?x:r+(u?".":"#")+x,e.forced),!a&&q!==void 0){if(typeof T==typeof q)continue;HEe(T,q)}(e.sham||q&&q.sham)&&WEe(T,"sham",!0),GEe(m,x,T,e)}}});var Lb=b((x2t,G6)=>{"use strict";var XEe=Et(),JEe=XEe("toStringTag"),W6={};W6[JEe]="z";G6.exports=String(W6)==="[object z]"});var Sa=b((b2t,K6)=>{"use strict";var YEe=Lb(),QEe=jt(),Fb=pn(),eTe=Et(),tTe=eTe("toStringTag"),rTe=Object,iTe=Fb(function(){return arguments}())==="Arguments",nTe=function(e,t){try{return e[t]}catch(r){}};K6.exports=YEe?Fb:function(e){var t,r,o;return e===void 0?"Undefined":e===null?"Null":typeof(r=nTe(t=rTe(e),tTe))=="string"?r:iTe?Fb(t):(o=Fb(t))==="Object"&&QEe(t.callee)?"Arguments":o}});var zt=b((w2t,H6)=>{"use strict";var aTe=Sa(),oTe=String;H6.exports=function(e){if(aTe(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return oTe(e)}});var Ch=b((S2t,Z6)=>{"use strict";var sTe=H2(),uTe=kb();Z6.exports=Object.keys||function(t){return sTe(t,uTe)}});var zb=b(X6=>{"use strict";var lTe=wt(),cTe=O2(),hTe=Dr(),fTe=Qe(),dTe=Ti(),pTe=Ch();X6.f=lTe&&!cTe?Object.defineProperties:function(t,r){fTe(t);for(var o=dTe(r),u=pTe(r),a=u.length,m=0,x;a>m;)hTe.f(t,x=u[m++],o[x]);return t}});var Z2=b((A2t,J6)=>{"use strict";var mTe=Ot();J6.exports=mTe("document","documentElement")});var pi=b((E2t,nV)=>{"use strict";var vTe=Qe(),gTe=zb(),Y6=kb(),yTe=$d(),_Te=Z2(),xTe=Tg(),bTe=Cg(),Q6=">",eV="<",J2="prototype",Y2="script",rV=bTe("IE_PROTO"),X2=function(){},iV=function(e){return eV+Y2+Q6+e+eV+"/"+Y2+Q6},tV=function(e){e.write(iV("")),e.close();var t=e.parentWindow.Object;return e=null,t},wTe=function(){var e=xTe("iframe"),t="java"+Y2+":",r;return e.style.display="none",_Te.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(iV("document.F=Object")),r.close(),r.F},Nb,Bb=function(){try{Nb=new ActiveXObject("htmlfile")}catch(t){}Bb=typeof document!="undefined"?document.domain&&Nb?tV(Nb):wTe():tV(Nb);for(var e=Y6.length;e--;)delete Bb[J2][Y6[e]];return Bb()};yTe[rV]=!0;nV.exports=Object.create||function(t,r){var o;return t!==null?(X2[J2]=vTe(t),o=new X2,X2[J2]=null,o[rV]=t):o=Bb(),r===void 0?o:gTe.f(o,r)}});var qa=b((T2t,aV)=>{"use strict";var STe=Re();aV.exports=STe([].slice)});var Ub=b((I2t,uV)=>{"use strict";var qTe=pn(),ATe=Ti(),oV=nc().f,ETe=qa(),sV=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],TTe=function(e){try{return oV(e)}catch(t){return ETe(sV)}};uV.exports.f=function(t){return sV&&qTe(t)==="Window"?TTe(t):oV(ATe(t))}});var jr=b((C2t,cV)=>{"use strict";var lV=Mg(),ITe=Dr();cV.exports=function(e,t,r){return r.get&&lV(r.get,t,{getter:!0}),r.set&&lV(r.set,t,{setter:!0}),ITe.f(e,t,r)}});var Q2=b(hV=>{"use strict";var CTe=Et();hV.f=CTe});var jb=b((M2t,fV)=>{"use strict";var PTe=Xe();fV.exports=PTe});var ti=b((O2t,pV)=>{"use strict";var dV=jb(),MTe=$t(),OTe=Q2(),kTe=Dr().f;pV.exports=function(e){var t=dV.Symbol||(dV.Symbol={});MTe(t,e)||kTe(t,e,{value:OTe.f(e)})}});var eC=b((k2t,mV)=>{"use strict";var RTe=tt(),DTe=Ot(),LTe=Et(),FTe=yr();mV.exports=function(){var e=DTe("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,o=LTe("toPrimitive");t&&!t[o]&&FTe(t,o,function(u){return RTe(r,this)},{arity:1})}});var ea=b((R2t,gV)=>{"use strict";var zTe=Dr().f,NTe=$t(),BTe=Et(),vV=BTe("toStringTag");gV.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!NTe(e,vV)&&zTe(e,vV,{configurable:!0,value:t})}});var Ou=b((D2t,yV)=>{"use strict";var UTe=pn(),jTe=Re();yV.exports=function(e){if(UTe(e)==="Function")return jTe(e)}});var Ar=b((L2t,xV)=>{"use strict";var _V=Ou(),VTe=Mt(),$Te=jd(),WTe=_V(_V.bind);xV.exports=function(e,t){return VTe(e),t===void 0?e:$Te?WTe(e,t):function(){return e.apply(t,arguments)}}});var as=b((F2t,bV)=>{"use strict";var GTe=pn();bV.exports=Array.isArray||function(t){return GTe(t)==="Array"}});var os=b((z2t,EV)=>{"use strict";var KTe=Re(),HTe=ze(),wV=jt(),ZTe=Sa(),XTe=Ot(),JTe=Ig(),SV=function(){},qV=XTe("Reflect","construct"),tC=/^\s*(?:class|function)\b/,YTe=KTe(tC.exec),QTe=!tC.test(SV),Rg=function(t){if(!wV(t))return!1;try{return qV(SV,[],t),!0}catch(r){return!1}},AV=function(t){if(!wV(t))return!1;switch(ZTe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return QTe||!!YTe(tC,JTe(t))}catch(r){return!0}};AV.sham=!0;EV.exports=!qV||HTe(function(){var e;return Rg(Rg.call)||!Rg(Object)||!Rg(function(){e=!0})||e})?AV:Rg});var PV=b((N2t,CV)=>{"use strict";var TV=as(),eIe=os(),tIe=Dt(),rIe=Et(),iIe=rIe("species"),IV=Array;CV.exports=function(e){var t;return TV(e)&&(t=e.constructor,eIe(t)&&(t===IV||TV(t.prototype))?t=void 0:tIe(t)&&(t=t[iIe],t===null&&(t=void 0))),t===void 0?IV:t}});var Kd=b((B2t,MV)=>{"use strict";var nIe=PV();MV.exports=function(e,t){return new(nIe(e))(t===0?0:t)}});var mi=b((U2t,kV)=>{"use strict";var aIe=Ar(),oIe=Re(),sIe=Cu(),uIe=Ht(),lIe=er(),cIe=Kd(),OV=oIe([].push),ac=function(e){var t=e===1,r=e===2,o=e===3,u=e===4,a=e===6,m=e===7,x=e===5||a;return function(q,T,I,k){for(var B=uIe(q),Y=sIe(B),de=lIe(Y),pe=aIe(T,I),Z=0,H=k||cIe,J=t?H(q,de):r||m?H(q,0):void 0,ve,be;de>Z;Z++)if((x||Z in Y)&&(ve=Y[Z],be=pe(ve,Z,B),e))if(t)J[Z]=be;else if(be)switch(e){case 3:return!0;case 5:return ve;case 6:return Z;case 2:OV(J,ve);}else switch(e){case 4:return!1;case 7:OV(J,ve);}return a?-1:o||u?u:J}};kV.exports={forEach:ac(0),map:ac(1),filter:ac(2),some:ac(3),every:ac(4),find:ac(5),findIndex:ac(6),filterReject:ac(7)}});var XV=b(()=>{"use strict";var Vb=$(),Fg=Xe(),cC=tt(),hIe=Re(),fIe=Kt(),Hd=wt(),Zd=tc(),dIe=ze(),Zi=$t(),pIe=mn(),aC=Qe(),$b=Ti(),hC=Rs(),mIe=zt(),oC=ba(),Xd=pi(),LV=Ch(),vIe=nc(),FV=Ub(),gIe=Og(),zV=Hi(),NV=Dr(),yIe=zb(),BV=qg(),rC=yr(),_Ie=jr(),fC=Mu(),xIe=Cg(),UV=$d(),RV=ic(),bIe=Et(),wIe=Q2(),SIe=ti(),qIe=eC(),AIe=ea(),jV=pr(),Wb=mi().forEach,Aa=xIe("hidden"),Gb="Symbol",Lg="prototype",EIe=jV.set,DV=jV.getterFor(Gb),Eo=Object[Lg],Ph=Fg.Symbol,Dg=Ph&&Ph[Lg],TIe=Fg.RangeError,IIe=Fg.TypeError,iC=Fg.QObject,VV=zV.f,Mh=NV.f,$V=FV.f,CIe=BV.f,WV=hIe([].push),ku=fC("symbols"),zg=fC("op-symbols"),PIe=fC("wks"),sC=!iC||!iC[Lg]||!iC[Lg].findChild,GV=function(e,t,r){var o=VV(Eo,t);o&&delete Eo[t],Mh(e,t,r),o&&e!==Eo&&Mh(Eo,t,o)},uC=Hd&&dIe(function(){return Xd(Mh({},"a",{get:function(){return Mh(this,"a",{value:7}).a}})).a!==7})?GV:Mh,nC=function(e,t){var r=ku[e]=Xd(Dg);return EIe(r,{type:Gb,tag:e,description:t}),Hd||(r.description=t),r},Kb=function(t,r,o){t===Eo&&Kb(zg,r,o),aC(t);var u=hC(r);return aC(o),Zi(ku,u)?(o.enumerable?(Zi(t,Aa)&&t[Aa][u]&&(t[Aa][u]=!1),o=Xd(o,{enumerable:oC(0,!1)})):(Zi(t,Aa)||Mh(t,Aa,oC(1,Xd(null))),t[Aa][u]=!0),uC(t,u,o)):Mh(t,u,o)},dC=function(t,r){aC(t);var o=$b(r),u=LV(o).concat(ZV(o));return Wb(u,function(a){(!Hd||cC(lC,o,a))&&Kb(t,a,o[a])}),t},MIe=function(t,r){return r===void 0?Xd(t):dC(Xd(t),r)},lC=function(t){var r=hC(t),o=cC(CIe,this,r);return this===Eo&&Zi(ku,r)&&!Zi(zg,r)?!1:o||!Zi(this,r)||!Zi(ku,r)||Zi(this,Aa)&&this[Aa][r]?o:!0},KV=function(t,r){var o=$b(t),u=hC(r);if(!(o===Eo&&Zi(ku,u)&&!Zi(zg,u))){var a=VV(o,u);return a&&Zi(ku,u)&&!(Zi(o,Aa)&&o[Aa][u])&&(a.enumerable=!0),a}},HV=function(t){var r=$V($b(t)),o=[];return Wb(r,function(u){!Zi(ku,u)&&!Zi(UV,u)&&WV(o,u)}),o},ZV=function(e){var t=e===Eo,r=$V(t?zg:$b(e)),o=[];return Wb(r,function(u){Zi(ku,u)&&(!t||Zi(Eo,u))&&WV(o,ku[u])}),o};Zd||(Ph=function(){if(pIe(Dg,this))throw new IIe("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:mIe(arguments[0]),r=RV(t),o=function(u){var a=this===void 0?Fg:this;a===Eo&&cC(o,zg,u),Zi(a,Aa)&&Zi(a[Aa],r)&&(a[Aa][r]=!1);var m=oC(1,u);try{uC(a,r,m)}catch(x){if(!(x instanceof TIe))throw x;GV(a,r,m)}};return Hd&&sC&&uC(Eo,r,{configurable:!0,set:o}),nC(r,t)},Dg=Ph[Lg],rC(Dg,"toString",function(){return DV(this).tag}),rC(Ph,"withoutSetter",function(e){return nC(RV(e),e)}),BV.f=lC,NV.f=Kb,yIe.f=dC,zV.f=KV,vIe.f=FV.f=HV,gIe.f=ZV,wIe.f=function(e){return nC(bIe(e),e)},Hd&&(_Ie(Dg,"description",{configurable:!0,get:function(){return DV(this).description}}),fIe||rC(Eo,"propertyIsEnumerable",lC,{unsafe:!0})));Vb({global:!0,constructor:!0,wrap:!0,forced:!Zd,sham:!Zd},{Symbol:Ph});Wb(LV(PIe),function(e){SIe(e)});Vb({target:Gb,stat:!0,forced:!Zd},{useSetter:function(){sC=!0},useSimple:function(){sC=!1}});Vb({target:"Object",stat:!0,forced:!Zd,sham:!Hd},{create:MIe,defineProperty:Kb,defineProperties:dC,getOwnPropertyDescriptor:KV});Vb({target:"Object",stat:!0,forced:!Zd},{getOwnPropertyNames:HV});qIe();AIe(Ph,Gb);UV[Aa]=!0});var pC=b(($2t,JV)=>{"use strict";var OIe=tc();JV.exports=OIe&&!!Symbol.for&&!!Symbol.keyFor});var QV=b(()=>{"use strict";var kIe=$(),RIe=Ot(),DIe=$t(),LIe=zt(),YV=Mu(),FIe=pC(),mC=YV("string-to-symbol-registry"),zIe=YV("symbol-to-string-registry");kIe({target:"Symbol",stat:!0,forced:!FIe},{for:function(e){var t=LIe(e);if(DIe(mC,t))return mC[t];var r=RIe("Symbol")(t);return mC[t]=r,zIe[r]=t,r}})});var t8=b(()=>{"use strict";var NIe=$(),BIe=$t(),UIe=Pu(),jIe=rc(),VIe=Mu(),$Ie=pC(),e8=VIe("symbol-to-string-registry");NIe({target:"Symbol",stat:!0,forced:!$Ie},{keyFor:function(t){if(!UIe(t))throw new TypeError(jIe(t)+" is not a symbol");if(BIe(e8,t))return e8[t]}})});var Fn=b((Z2t,a8)=>{"use strict";var WIe=jd(),n8=Function.prototype,r8=n8.apply,i8=n8.call;a8.exports=typeof Reflect=="object"&&Reflect.apply||(WIe?i8.bind(r8):function(){return i8.apply(r8,arguments)})});var vC=b((X2t,l8)=>{"use strict";var GIe=Re(),o8=as(),KIe=jt(),s8=pn(),HIe=zt(),u8=GIe([].push);l8.exports=function(e){if(KIe(e))return e;if(o8(e)){for(var t=e.length,r=[],o=0;o<t;o++){var u=e[o];typeof u=="string"?u8(r,u):(typeof u=="number"||s8(u)==="Number"||s8(u)==="String")&&u8(r,HIe(u))}var a=r.length,m=!0;return function(x,q){if(m)return m=!1,q;if(o8(this))return q;for(var T=0;T<a;T++)if(r[T]===x)return q}}}});var gC=b(()=>{"use strict";var ZIe=$(),g8=Ot(),y8=Fn(),XIe=tt(),Ng=Re(),_8=ze(),c8=jt(),h8=Pu(),x8=qa(),JIe=vC(),YIe=tc(),QIe=String,oc=g8("JSON","stringify"),Hb=Ng(/./.exec),f8=Ng("".charAt),e2e=Ng("".charCodeAt),t2e=Ng("".replace),r2e=Ng(1 .toString),i2e=/[\uD800-\uDFFF]/g,d8=/^[\uD800-\uDBFF]$/,p8=/^[\uDC00-\uDFFF]$/,m8=!YIe||_8(function(){var e=g8("Symbol")("stringify detection");return oc([e])!=="[null]"||oc({a:e})!=="{}"||oc(Object(e))!=="{}"}),v8=_8(function(){return oc("\uDF06\uD834")!=="\"\\udf06\\ud834\""||oc("\uDEAD")!=="\"\\udead\""}),n2e=function(e,t){var r=x8(arguments),o=JIe(t);if(!(!c8(o)&&(e===void 0||h8(e))))return r[1]=function(u,a){if(c8(o)&&(a=XIe(o,this,QIe(u),a)),!h8(a))return a},y8(oc,null,r)},a2e=function(e,t,r){var o=f8(r,t-1),u=f8(r,t+1);return Hb(d8,e)&&!Hb(p8,u)||Hb(p8,e)&&!Hb(d8,o)?"\\u"+r2e(e2e(e,0),16):e};oc&&ZIe({target:"JSON",stat:!0,arity:3,forced:m8||v8},{stringify:function(t,r,o){var u=x8(arguments),a=y8(m8?n2e:oc,null,u);return v8&&typeof a=="string"?t2e(a,i2e,a2e):a}})});var w8=b(()=>{"use strict";var o2e=$(),s2e=tc(),u2e=ze(),b8=Og(),l2e=Ht(),c2e=!s2e||u2e(function(){b8.f(1)});o2e({target:"Object",stat:!0,forced:c2e},{getOwnPropertySymbols:function(t){var r=b8.f;return r?r(l2e(t)):[]}})});var S8=b(()=>{"use strict";XV();QV();t8();gC();w8()});var P8=b(()=>{"use strict";var h2e=$(),f2e=wt(),d2e=Xe(),Zb=Re(),p2e=$t(),m2e=jt(),v2e=mn(),g2e=zt(),y2e=jr(),_2e=Ih(),Ru=d2e.Symbol,Oh=Ru&&Ru.prototype;f2e&&m2e(Ru)&&(!("description"in Oh)||Ru().description!==void 0)&&(yC={},Bg=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:g2e(arguments[0]),r=v2e(Oh,this)?new Ru(t):t===void 0?Ru():Ru(t);return t===""&&(yC[r]=!0),r},_2e(Bg,Ru),Bg.prototype=Oh,Oh.constructor=Bg,q8=String(Ru("description detection"))==="Symbol(description detection)",A8=Zb(Oh.valueOf),E8=Zb(Oh.toString),T8=/^Symbol\((.*)\)[^)]+$/,I8=Zb("".replace),C8=Zb("".slice),y2e(Oh,"description",{configurable:!0,get:function(){var t=A8(this);if(p2e(yC,t))return"";var r=E8(t),o=q8?C8(r,7,-1):I8(r,T8,"$1");return o===""?void 0:o}}),h2e({global:!0,constructor:!0,forced:!0},{Symbol:Bg}));var yC,Bg,q8,A8,E8,T8,I8,C8});var M8=b(()=>{"use strict";var x2e=ti();x2e("asyncIterator")});var O8=b(()=>{"use strict";var b2e=ti();b2e("hasInstance")});var k8=b(()=>{"use strict";var w2e=ti();w2e("isConcatSpreadable")});var R8=b(()=>{"use strict";var S2e=ti();S2e("iterator")});var D8=b(()=>{"use strict";var q2e=ti();q2e("match")});var L8=b(()=>{"use strict";var A2e=ti();A2e("matchAll")});var F8=b(()=>{"use strict";var E2e=ti();E2e("replace")});var z8=b(()=>{"use strict";var T2e=ti();T2e("search")});var N8=b(()=>{"use strict";var I2e=ti();I2e("species")});var B8=b(()=>{"use strict";var C2e=ti();C2e("split")});var U8=b(()=>{"use strict";var P2e=ti(),M2e=eC();P2e("toPrimitive");M2e()});var j8=b(()=>{"use strict";var O2e=Ot(),k2e=ti(),R2e=ea();k2e("toStringTag");R2e(O2e("Symbol"),"Symbol")});var V8=b(()=>{"use strict";var D2e=ti();D2e("unscopables")});var Ug=b((MCt,$8)=>{"use strict";var L2e=Re(),F2e=Mt();$8.exports=function(e,t,r){try{return L2e(F2e(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(o){}}});var _C=b((OCt,W8)=>{"use strict";var z2e=Dt();W8.exports=function(e){return z2e(e)||e===null}});var xC=b((kCt,G8)=>{"use strict";var N2e=_C(),B2e=String,U2e=TypeError;G8.exports=function(e){if(N2e(e))return e;throw new U2e("Can't set "+B2e(e)+" as a prototype")}});var To=b((RCt,K8)=>{"use strict";var j2e=Ug(),V2e=Dt(),$2e=zr(),W2e=xC();K8.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=j2e(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(o){}return function(u,a){return $2e(u),W2e(a),V2e(u)&&(e?r(u,a):u.__proto__=a),u}}():void 0)});var bC=b((DCt,H8)=>{"use strict";var G2e=Dr().f;H8.exports=function(e,t,r){r in e||G2e(e,r,{configurable:!0,get:function(){return t[r]},set:function(o){t[r]=o}})}});var sc=b((LCt,X8)=>{"use strict";var K2e=jt(),H2e=Dt(),Z8=To();X8.exports=function(e,t,r){var o,u;return Z8&&K2e(o=t.constructor)&&o!==r&&H2e(u=o.prototype)&&u!==r.prototype&&Z8(e,u),e}});var kh=b((FCt,J8)=>{"use strict";var Z2e=zt();J8.exports=function(e,t){return e===void 0?arguments.length<2?"":t:Z2e(e)}});var wC=b((zCt,Y8)=>{"use strict";var X2e=Dt(),J2e=Ii();Y8.exports=function(e,t){X2e(t)&&"cause"in t&&J2e(e,"cause",t.cause)}});var Xb=b((NCt,t$)=>{"use strict";var Y2e=Re(),Q8=Error,Q2e=Y2e("".replace),eCe=function(e){return String(new Q8(e).stack)}("zxcasd"),e$=/\n\s*at [^:]*:[^\n]*/,tCe=e$.test(eCe);t$.exports=function(e,t){if(tCe&&typeof e=="string"&&!Q8.prepareStackTrace)for(;t--;)e=Q2e(e,e$,"");return e}});var SC=b((BCt,r$)=>{"use strict";var rCe=ze(),iCe=ba();r$.exports=!rCe(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",iCe(1,7)),e.stack!==7):!0})});var Jb=b((UCt,n$)=>{"use strict";var nCe=Ii(),aCe=Xb(),oCe=SC(),i$=Error.captureStackTrace;n$.exports=function(e,t,r,o){oCe&&(i$?i$(e,t):nCe(e,"stack",aCe(r,o)))}});var qC=b((jCt,h$)=>{"use strict";var a$=Ot(),sCe=$t(),o$=Ii(),uCe=mn(),s$=To(),u$=Ih(),l$=bC(),lCe=sc(),cCe=kh(),hCe=wC(),fCe=Jb(),dCe=wt(),c$=Kt();h$.exports=function(e,t,r,o){var u="stackTraceLimit",a=o?2:1,m=e.split("."),x=m[m.length-1],q=a$.apply(null,m);if(q){var T=q.prototype;if(!c$&&sCe(T,"cause")&&delete T.cause,!r)return q;var I=a$("Error"),k=t(function(B,Y){var de=cCe(o?Y:B,void 0),pe=o?new q(B):new q;return de!==void 0&&o$(pe,"message",de),fCe(pe,k,pe.stack,2),this&&uCe(T,this)&&lCe(pe,this,k),arguments.length>a&&hCe(pe,arguments[a]),pe});if(k.prototype=T,x!=="Error"?s$?s$(k,I):u$(k,I,{name:!0}):dCe&&u in q&&(l$(k,q,u),l$(k,q,"prepareStackTrace")),u$(k,q),!c$)try{T.name!==x&&o$(T,"name",x),T.constructor=k}catch(B){}return k}}});var m$=b(()=>{"use strict";var d$=$(),pCe=Xe(),Ds=Fn(),p$=qC(),AC="WebAssembly",f$=pCe[AC],Yb=new Error("e",{cause:7}).cause!==7,Rh=function(e,t){var r={};r[e]=p$(e,t,Yb),d$({global:!0,constructor:!0,arity:1,forced:Yb},r)},EC=function(e,t){if(f$&&f$[e]){var r={};r[e]=p$(AC+"."+e,t,Yb),d$({target:AC,stat:!0,constructor:!0,arity:1,forced:Yb},r)}};Rh("Error",function(e){return function(r){return Ds(e,this,arguments)}});Rh("EvalError",function(e){return function(r){return Ds(e,this,arguments)}});Rh("RangeError",function(e){return function(r){return Ds(e,this,arguments)}});Rh("ReferenceError",function(e){return function(r){return Ds(e,this,arguments)}});Rh("SyntaxError",function(e){return function(r){return Ds(e,this,arguments)}});Rh("TypeError",function(e){return function(r){return Ds(e,this,arguments)}});Rh("URIError",function(e){return function(r){return Ds(e,this,arguments)}});EC("CompileError",function(e){return function(r){return Ds(e,this,arguments)}});EC("LinkError",function(e){return function(r){return Ds(e,this,arguments)}});EC("RuntimeError",function(e){return function(r){return Ds(e,this,arguments)}})});var TC=b((WCt,g$)=>{"use strict";var mCe=wt(),vCe=ze(),gCe=Qe(),v$=kh(),Qb=Error.prototype.toString,yCe=vCe(function(){if(mCe){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(Qb.call(e)!=="true")return!0}return Qb.call({message:1,name:2})!=="2: 1"||Qb.call({})!=="Error"});g$.exports=yCe?function(){var t=gCe(this),r=v$(t.name,"Error"),o=v$(t.message);return r?o?r+": "+o:r:o}:Qb});var x$=b(()=>{"use strict";var _Ce=yr(),y$=TC(),_$=Error.prototype;_$.toString!==y$&&_Ce(_$,"toString",y$)});var e1=b((HCt,b$)=>{"use strict";var xCe=ze();b$.exports=!xCe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var Ci=b((ZCt,S$)=>{"use strict";var bCe=$t(),wCe=jt(),SCe=Ht(),qCe=Cg(),ACe=e1(),w$=qCe("IE_PROTO"),IC=Object,ECe=IC.prototype;S$.exports=ACe?IC.getPrototypeOf:function(e){var t=SCe(e);if(bCe(t,w$))return t[w$];var r=t.constructor;return wCe(r)&&t instanceof r?r.prototype:t instanceof IC?ECe:null}});var Dh=b((XCt,q$)=>{"use strict";q$.exports={}});var t1=b((JCt,A$)=>{"use strict";var TCe=Et(),ICe=Dh(),CCe=TCe("iterator"),PCe=Array.prototype;A$.exports=function(e){return e!==void 0&&(ICe.Array===e||PCe[CCe]===e)}});var Ls=b((YCt,T$)=>{"use strict";var MCe=Sa(),E$=di(),OCe=Ei(),kCe=Dh(),RCe=Et(),DCe=RCe("iterator");T$.exports=function(e){if(!OCe(e))return E$(e,DCe)||E$(e,"@@iterator")||kCe[MCe(e)]}});var uc=b((QCt,I$)=>{"use strict";var LCe=tt(),FCe=Mt(),zCe=Qe(),NCe=rc(),BCe=Ls(),UCe=TypeError;I$.exports=function(e,t){var r=arguments.length<2?BCe(e):t;if(FCe(r))return zCe(LCe(r,e));throw new UCe(NCe(e)+" is not iterable")}});var Du=b((ePt,P$)=>{"use strict";var jCe=tt(),C$=Qe(),VCe=di();P$.exports=function(e,t,r){var o,u;C$(e);try{if(o=VCe(e,"return"),!o){if(t==="throw")throw r;return r}o=jCe(o,e)}catch(a){u=!0,o=a}if(t==="throw")throw r;if(u)throw o;return C$(o),r}});var ri=b((tPt,R$)=>{"use strict";var $Ce=Ar(),WCe=tt(),GCe=Qe(),KCe=rc(),HCe=t1(),ZCe=er(),M$=mn(),XCe=uc(),JCe=Ls(),O$=Du(),YCe=TypeError,r1=function(e,t){this.stopped=e,this.result=t},k$=r1.prototype;R$.exports=function(e,t,r){var o=r&&r.that,u=!!(r&&r.AS_ENTRIES),a=!!(r&&r.IS_RECORD),m=!!(r&&r.IS_ITERATOR),x=!!(r&&r.INTERRUPTED),q=$Ce(t,o),T,I,k,B,Y,de,pe,Z=function(J){return T&&O$(T,"normal",J),new r1(!0,J)},H=function(J){return u?(GCe(J),x?q(J[0],J[1],Z):q(J[0],J[1])):x?q(J,Z):q(J)};if(a)T=e.iterator;else if(m)T=e;else{if(I=JCe(e),!I)throw new YCe(KCe(e)+" is not iterable");if(HCe(I)){for(k=0,B=ZCe(e);B>k;k++)if(Y=H(e[k]),Y&&M$(k$,Y))return Y;return new r1(!1)}T=XCe(e,I)}for(de=a?e.next:T.next;!(pe=WCe(de,T)).done;){try{Y=H(pe.value)}catch(J){O$(T,"throw",J)}if(typeof Y=="object"&&Y&&M$(k$,Y))return Y}return new r1(!1)}});var L$=b(()=>{"use strict";var QCe=$(),ePe=mn(),tPe=Ci(),i1=To(),rPe=Ih(),D$=pi(),CC=Ii(),PC=ba(),iPe=wC(),nPe=Jb(),aPe=ri(),oPe=kh(),sPe=Et(),uPe=sPe("toStringTag"),n1=Error,lPe=[].push,Jd=function(t,r){var o=ePe(MC,this),u;i1?u=i1(new n1,o?tPe(this):MC):(u=o?this:D$(MC),CC(u,uPe,"Error")),r!==void 0&&CC(u,"message",oPe(r)),nPe(u,Jd,u.stack,1),arguments.length>2&&iPe(u,arguments[2]);var a=[];return aPe(t,lPe,{that:a}),CC(u,"errors",a),u};i1?i1(Jd,n1):rPe(Jd,n1,{name:!0});var MC=Jd.prototype=D$(n1.prototype,{constructor:PC(1,Jd),message:PC(1,""),name:PC(1,"AggregateError")});QCe({global:!0,constructor:!0,arity:2},{AggregateError:Jd})});var OC=b(()=>{"use strict";L$()});var B$=b(()=>{"use strict";var cPe=$(),hPe=Ot(),fPe=Fn(),F$=ze(),dPe=qC(),kC="AggregateError",z$=hPe(kC),N$=!F$(function(){return z$([1]).errors[0]!==1})&&F$(function(){return z$([1],kC,{cause:7}).cause!==7});cPe({global:!0,constructor:!0,arity:2,forced:N$},{AggregateError:dPe(kC,function(e){return function(r,o){return fPe(e,this,arguments)}},N$,!0)})});var ii=b((uPt,U$)=>{"use strict";var pPe=Et(),mPe=pi(),vPe=Dr().f,RC=pPe("unscopables"),DC=Array.prototype;DC[RC]===void 0&&vPe(DC,RC,{configurable:!0,value:mPe(null)});U$.exports=function(e){DC[RC][e]=!0}});var LC=b(()=>{"use strict";var gPe=$(),yPe=Ht(),_Pe=er(),xPe=Ur(),bPe=ii();gPe({target:"Array",proto:!0},{at:function(t){var r=yPe(this),o=_Pe(r),u=xPe(t),a=u>=0?u:o+u;return a<0||a>=o?void 0:r[a]}});bPe("at")});var lc=b((hPt,j$)=>{"use strict";var wPe=TypeError,SPe=9007199254740991;j$.exports=function(e){if(e>SPe)throw wPe("Maximum allowed index exceeded");return e}});var Io=b((fPt,V$)=>{"use strict";var qPe=wt(),APe=Dr(),EPe=ba();V$.exports=function(e,t,r){qPe?APe.f(e,t,EPe(0,r)):e[t]=r}});var Yd=b((dPt,$$)=>{"use strict";var TPe=ze(),IPe=Et(),CPe=ks(),PPe=IPe("species");$$.exports=function(e){return CPe>=51||!TPe(function(){var t=[],r=t.constructor={};return r[PPe]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var H$=b(()=>{"use strict";var MPe=$(),OPe=ze(),kPe=as(),RPe=Dt(),DPe=Ht(),LPe=er(),W$=lc(),G$=Io(),FPe=Kd(),zPe=Yd(),NPe=Et(),BPe=ks(),K$=NPe("isConcatSpreadable"),UPe=BPe>=51||!OPe(function(){var e=[];return e[K$]=!1,e.concat()[0]!==e}),jPe=function(e){if(!RPe(e))return!1;var t=e[K$];return t!==void 0?!!t:kPe(e)},VPe=!UPe||!zPe("concat");MPe({target:"Array",proto:!0,arity:1,forced:VPe},{concat:function(t){var r=DPe(this),o=FPe(r,0),u=0,a,m,x,q,T;for(a=-1,x=arguments.length;a<x;a++)if(T=a===-1?r:arguments[a],jPe(T))for(q=LPe(T),W$(u+q),m=0;m<q;m++,u++)m in T&&G$(o,u,T[m]);else W$(u+1),G$(o,u++,T);return o.length=u,o}})});var jg=b((vPt,X$)=>{"use strict";var Z$=rc(),$Pe=TypeError;X$.exports=function(e,t){if(!delete e[t])throw new $Pe("Cannot delete property "+Z$(t)+" of "+Z$(e))}});var zC=b((gPt,J$)=>{"use strict";var WPe=Ht(),FC=ns(),GPe=er(),KPe=jg(),HPe=Math.min;J$.exports=[].copyWithin||function(t,r){var o=WPe(this),u=GPe(o),a=FC(t,u),m=FC(r,u),x=arguments.length>2?arguments[2]:void 0,q=HPe((x===void 0?u:FC(x,u))-m,u-a),T=1;for(m<a&&a<m+q&&(T=-1,m+=q-1,a+=q-1);q-->0;)m in o?o[a]=o[m]:KPe(o,a),a+=T,m+=T;return o}});var Y$=b(()=>{"use strict";var ZPe=$(),XPe=zC(),JPe=ii();ZPe({target:"Array",proto:!0},{copyWithin:XPe});JPe("copyWithin")});var Co=b((xPt,Q$)=>{"use strict";var YPe=ze();Q$.exports=function(e,t){var r=[][e];return!!r&&YPe(function(){r.call(null,t||function(){return 1},1)})}});var eW=b(()=>{"use strict";var QPe=$(),eMe=mi().every,tMe=Co(),rMe=tMe("every");QPe({target:"Array",proto:!0,forced:!rMe},{every:function(t){return eMe(this,t,arguments.length>1?arguments[1]:void 0)}})});var a1=b((SPt,rW)=>{"use strict";var iMe=Ht(),tW=ns(),nMe=er();rW.exports=function(t){for(var r=iMe(this),o=nMe(r),u=arguments.length,a=tW(u>1?arguments[1]:void 0,o),m=u>2?arguments[2]:void 0,x=m===void 0?o:tW(m,o);x>a;)r[a++]=t;return r}});var iW=b(()=>{"use strict";var aMe=$(),oMe=a1(),sMe=ii();aMe({target:"Array",proto:!0},{fill:oMe});sMe("fill")});var nW=b(()=>{"use strict";var uMe=$(),lMe=mi().filter,cMe=Yd(),hMe=cMe("filter");uMe({target:"Array",proto:!0,forced:!hMe},{filter:function(t){return lMe(this,t,arguments.length>1?arguments[1]:void 0)}})});var oW=b(()=>{"use strict";var fMe=$(),dMe=mi().find,pMe=ii(),NC="find",aW=!0;NC in[]&&Array(1)[NC](function(){aW=!1});fMe({target:"Array",proto:!0,forced:aW},{find:function(t){return dMe(this,t,arguments.length>1?arguments[1]:void 0)}});pMe(NC)});var uW=b(()=>{"use strict";var mMe=$(),vMe=mi().findIndex,gMe=ii(),BC="findIndex",sW=!0;BC in[]&&Array(1)[BC](function(){sW=!1});mMe({target:"Array",proto:!0,forced:sW},{findIndex:function(t){return vMe(this,t,arguments.length>1?arguments[1]:void 0)}});gMe(BC)});var Vg=b((OPt,cW)=>{"use strict";var yMe=Ar(),_Me=Cu(),xMe=Ht(),bMe=er(),lW=function(e){var t=e===1;return function(r,o,u){for(var a=xMe(r),m=_Me(a),x=bMe(m),q=yMe(o,u),T,I;x-->0;)if(T=m[x],I=q(T,x,a),I)switch(e){case 0:return T;case 1:return x;}return t?-1:void 0}};cW.exports={findLast:lW(0),findLastIndex:lW(1)}});var UC=b(()=>{"use strict";var wMe=$(),SMe=Vg().findLast,qMe=ii();wMe({target:"Array",proto:!0},{findLast:function(t){return SMe(this,t,arguments.length>1?arguments[1]:void 0)}});qMe("findLast")});var jC=b(()=>{"use strict";var AMe=$(),EMe=Vg().findLastIndex,TMe=ii();AMe({target:"Array",proto:!0},{findLastIndex:function(t){return EMe(this,t,arguments.length>1?arguments[1]:void 0)}});TMe("findLastIndex")});var VC=b((FPt,fW)=>{"use strict";var IMe=as(),CMe=er(),PMe=lc(),MMe=Ar(),hW=function(e,t,r,o,u,a,m,x){for(var q=u,T=0,I=m?MMe(m,x):!1,k,B;T<o;)T in r&&(k=I?I(r[T],T,t):r[T],a>0&&IMe(k)?(B=CMe(k),q=hW(e,t,k,B,q,a-1)-1):(PMe(q+1),e[q]=k),q++),T++;return q};fW.exports=hW});var dW=b(()=>{"use strict";var OMe=$(),kMe=VC(),RMe=Ht(),DMe=er(),LMe=Ur(),FMe=Kd();OMe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=RMe(this),o=DMe(r),u=FMe(r,0);return u.length=kMe(u,r,r,o,0,t===void 0?1:LMe(t)),u}})});var pW=b(()=>{"use strict";var zMe=$(),NMe=VC(),BMe=Mt(),UMe=Ht(),jMe=er(),VMe=Kd();zMe({target:"Array",proto:!0},{flatMap:function(t){var r=UMe(this),o=jMe(r),u;return BMe(t),u=VMe(r,0),u.length=NMe(u,r,r,o,0,1,t,arguments.length>1?arguments[1]:void 0),u}})});var $C=b((jPt,mW)=>{"use strict";var $Me=mi().forEach,WMe=Co(),GMe=WMe("forEach");mW.exports=GMe?[].forEach:function(t){return $Me(this,t,arguments.length>1?arguments[1]:void 0)}});var gW=b(()=>{"use strict";var KMe=$(),vW=$C();KMe({target:"Array",proto:!0,forced:[].forEach!==vW},{forEach:vW})});var o1=b((WPt,yW)=>{"use strict";var HMe=Qe(),ZMe=Du();yW.exports=function(e,t,r,o){try{return o?t(HMe(r)[0],r[1]):t(r)}catch(u){ZMe(e,"throw",u)}}});var WC=b((GPt,bW)=>{"use strict";var XMe=Ar(),JMe=tt(),YMe=Ht(),QMe=o1(),eOe=t1(),tOe=os(),rOe=er(),_W=Io(),iOe=uc(),nOe=Ls(),xW=Array;bW.exports=function(t){var r=YMe(t),o=tOe(this),u=arguments.length,a=u>1?arguments[1]:void 0,m=a!==void 0;m&&(a=XMe(a,u>2?arguments[2]:void 0));var x=nOe(r),q=0,T,I,k,B,Y,de;if(x&&!(this===xW&&eOe(x)))for(I=o?new this:[],B=iOe(r,x),Y=B.next;!(k=JMe(Y,B)).done;q++)de=m?QMe(B,a,[k.value,q],!0):k.value,_W(I,q,de);else for(T=rOe(r),I=o?new this(T):xW(T);T>q;q++)de=m?a(r[q],q):r[q],_W(I,q,de);return I.length=q,I}});var $g=b((KPt,AW)=>{"use strict";var aOe=Et(),SW=aOe("iterator"),qW=!1;try{wW=0,GC={next:function(){return{done:!!wW++}},return:function(){qW=!0}},GC[SW]=function(){return this},Array.from(GC,function(){throw 2})}catch(e){}var wW,GC;AW.exports=function(e,t){try{if(!t&&!qW)return!1}catch(u){return!1}var r=!1;try{var o={};o[SW]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(u){}return r}});var EW=b(()=>{"use strict";var oOe=$(),sOe=WC(),uOe=$g(),lOe=!uOe(function(e){Array.from(e)});oOe({target:"Array",stat:!0,forced:lOe},{from:sOe})});var TW=b(()=>{"use strict";var cOe=$(),hOe=Wd().includes,fOe=ze(),dOe=ii(),pOe=fOe(function(){return!Array(1).includes()});cOe({target:"Array",proto:!0,forced:pOe},{includes:function(t){return hOe(this,t,arguments.length>1?arguments[1]:void 0)}});dOe("includes")});var CW=b(()=>{"use strict";var mOe=$(),vOe=Ou(),gOe=Wd().indexOf,yOe=Co(),KC=vOe([].indexOf),IW=!!KC&&1/KC([1],1,-0)<0,_Oe=IW||!yOe("indexOf");mOe({target:"Array",proto:!0,forced:_Oe},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return IW?KC(this,t,r)||0:gOe(this,t,r)}})});var PW=b(()=>{"use strict";var xOe=$(),bOe=as();xOe({target:"Array",stat:!0},{isArray:bOe})});var Lh=b((rMt,kW)=>{"use strict";var wOe=ze(),SOe=jt(),qOe=Dt(),AOe=pi(),MW=Ci(),EOe=yr(),TOe=Et(),IOe=Kt(),XC=TOe("iterator"),OW=!1,Lu,HC,ZC;[].keys&&(ZC=[].keys(),"next"in ZC?(HC=MW(MW(ZC)),HC!==Object.prototype&&(Lu=HC)):OW=!0);var COe=!qOe(Lu)||wOe(function(){var e={};return Lu[XC].call(e)!==e});COe?Lu={}:IOe&&(Lu=AOe(Lu));SOe(Lu[XC])||EOe(Lu,XC,function(){return this});kW.exports={IteratorPrototype:Lu,BUGGY_SAFARI_ITERATORS:OW}});var cc=b((iMt,RW)=>{"use strict";var POe=Lh().IteratorPrototype,MOe=pi(),OOe=ba(),kOe=ea(),ROe=Dh(),DOe=function(){return this};RW.exports=function(e,t,r,o){var u=t+" Iterator";return e.prototype=MOe(POe,{next:OOe(+!o,r)}),kOe(e,u,!1,!0),ROe[u]=DOe,e}});var l1=b((nMt,$W)=>{"use strict";var LOe=$(),FOe=tt(),s1=Kt(),jW=Eh(),zOe=jt(),NOe=cc(),DW=Ci(),LW=To(),BOe=ea(),UOe=Ii(),JC=yr(),jOe=Et(),FW=Dh(),VW=Lh(),VOe=jW.PROPER,$Oe=jW.CONFIGURABLE,zW=VW.IteratorPrototype,u1=VW.BUGGY_SAFARI_ITERATORS,Wg=jOe("iterator"),NW="keys",Gg="values",BW="entries",UW=function(){return this};$W.exports=function(e,t,r,o,u,a,m){NOe(r,t,o);var x=function(H){if(H===u&&B)return B;if(!u1&&H&&H in I)return I[H];switch(H){case NW:return function(){return new r(this,H)};case Gg:return function(){return new r(this,H)};case BW:return function(){return new r(this,H)};}return function(){return new r(this)}},q=t+" Iterator",T=!1,I=e.prototype,k=I[Wg]||I["@@iterator"]||u&&I[u],B=!u1&&k||x(u),Y=t==="Array"&&I.entries||k,de,pe,Z;if(Y&&(de=DW(Y.call(new e)),de!==Object.prototype&&de.next&&(!s1&&DW(de)!==zW&&(LW?LW(de,zW):zOe(de[Wg])||JC(de,Wg,UW)),BOe(de,q,!0,!0),s1&&(FW[q]=UW))),VOe&&u===Gg&&k&&k.name!==Gg&&(!s1&&$Oe?UOe(I,"name",Gg):(T=!0,B=function(){return FOe(k,this)})),u)if(pe={values:x(Gg),keys:a?B:x(NW),entries:x(BW)},m)for(Z in pe)(u1||T||!(Z in I))&&JC(I,Z,pe[Z]);else LOe({target:t,proto:!0,forced:u1||T},pe);return(!s1||m)&&I[Wg]!==B&&JC(I,Wg,B,{name:u}),FW[t]=B,pe}});var Xi=b((aMt,WW)=>{"use strict";WW.exports=function(e,t){return{value:e,done:t}}});var Kg=b((oMt,XW)=>{"use strict";var WOe=Ti(),YC=ii(),GW=Dh(),HW=pr(),GOe=Dr().f,KOe=l1(),c1=Xi(),HOe=Kt(),ZOe=wt(),ZW="Array Iterator",XOe=HW.set,JOe=HW.getterFor(ZW);XW.exports=KOe(Array,"Array",function(e,t){XOe(this,{type:ZW,target:WOe(e),index:0,kind:t})},function(){var e=JOe(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,c1(void 0,!0);switch(e.kind){case"keys":return c1(r,!1);case"values":return c1(t[r],!1);}return c1([r,t[r]],!1)},"values");var KW=GW.Arguments=GW.Array;YC("keys");YC("values");YC("entries");if(!HOe&&ZOe&&KW.name!=="values")try{GOe(KW,"name",{value:"values"})}catch(e){}});var JW=b(()=>{"use strict";var YOe=$(),QOe=Re(),eke=Cu(),tke=Ti(),rke=Co(),ike=QOe([].join),nke=eke!==Object,ake=nke||!rke("join",",");YOe({target:"Array",proto:!0,forced:ake},{join:function(t){return ike(tke(this),t===void 0?",":t)}})});var eP=b((lMt,QW)=>{"use strict";var oke=Fn(),ske=Ti(),uke=Ur(),lke=er(),cke=Co(),hke=Math.min,QC=[].lastIndexOf,YW=!!QC&&1/[1].lastIndexOf(1,-0)<0,fke=cke("lastIndexOf"),dke=YW||!fke;QW.exports=dke?function(t){if(YW)return oke(QC,this,arguments)||0;var r=ske(this),o=lke(r);if(o===0)return-1;var u=o-1;for(arguments.length>1&&(u=hke(u,uke(arguments[1]))),u<0&&(u=o+u);u>=0;u--)if(u in r&&r[u]===t)return u||0;return-1}:QC});var t7=b(()=>{"use strict";var pke=$(),e7=eP();pke({target:"Array",proto:!0,forced:e7!==[].lastIndexOf},{lastIndexOf:e7})});var r7=b(()=>{"use strict";var mke=$(),vke=mi().map,gke=Yd(),yke=gke("map");mke({target:"Array",proto:!0,forced:!yke},{map:function(t){return vke(this,t,arguments.length>1?arguments[1]:void 0)}})});var n7=b(()=>{"use strict";var _ke=$(),xke=ze(),bke=os(),wke=Io(),i7=Array,Ske=xke(function(){function e(){}return!(i7.of.call(e)instanceof e)});_ke({target:"Array",stat:!0,forced:Ske},{of:function(){for(var t=0,r=arguments.length,o=new(bke(this)?this:i7)(r);r>t;)wke(o,t,arguments[t++]);return o.length=r,o}})});var h1=b((vMt,a7)=>{"use strict";var qke=wt(),Ake=as(),Eke=TypeError,Tke=Object.getOwnPropertyDescriptor,Ike=qke&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();a7.exports=Ike?function(e,t){if(Ake(e)&&!Tke(e,"length").writable)throw new Eke("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var o7=b(()=>{"use strict";var Cke=$(),Pke=Ht(),Mke=er(),Oke=h1(),kke=lc(),Rke=ze(),Dke=Rke(function(){return[].push.call({length:4294967296},1)!==4294967297}),Lke=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},Fke=Dke||!Lke();Cke({target:"Array",proto:!0,arity:1,forced:Fke},{push:function(t){var r=Pke(this),o=Mke(r),u=arguments.length;kke(o+u);for(var a=0;a<u;a++)r[o]=arguments[a],o++;return Oke(r,o),o}})});var Hg=b((_Mt,c7)=>{"use strict";var zke=Mt(),Nke=Ht(),Bke=Cu(),Uke=er(),s7=TypeError,u7="Reduce of empty array with no initial value",l7=function(e){return function(t,r,o,u){var a=Nke(t),m=Bke(a),x=Uke(a);if(zke(r),x===0&&o<2)throw new s7(u7);var q=e?x-1:0,T=e?-1:1;if(o<2)for(;;){if(q in m){u=m[q],q+=T;break}if(q+=T,e?q<0:x<=q)throw new s7(u7)}for(;e?q>=0:x>q;q+=T)q in m&&(u=r(u,m[q],q,a));return u}};c7.exports={left:l7(!1),right:l7(!0)}});var Xg=b((xMt,h7)=>{"use strict";var Zg=Xe(),jke=ts(),Vke=pn(),f1=function(e){return jke.slice(0,e.length)===e};h7.exports=function(){return f1("Bun/")?"BUN":f1("Cloudflare-Workers")?"CLOUDFLARE":f1("Deno/")?"DENO":f1("Node.js/")?"NODE":Zg.Bun&&typeof Bun.version=="string"?"BUN":Zg.Deno&&typeof Deno.version=="object"?"DENO":Vke(Zg.process)==="process"?"NODE":Zg.window&&Zg.document?"BROWSER":"REST"}()});var Fh=b((bMt,f7)=>{"use strict";var $ke=Xg();f7.exports=$ke==="NODE"});var p7=b(()=>{"use strict";var Wke=$(),Gke=Hg().left,Kke=Co(),d7=ks(),Hke=Fh(),Zke=!Hke&&d7>79&&d7<83,Xke=Zke||!Kke("reduce");Wke({target:"Array",proto:!0,forced:Xke},{reduce:function(t){var r=arguments.length;return Gke(this,t,r,r>1?arguments[1]:void 0)}})});var v7=b(()=>{"use strict";var Jke=$(),Yke=Hg().right,Qke=Co(),m7=ks(),eRe=Fh(),tRe=!eRe&&m7>79&&m7<83,rRe=tRe||!Qke("reduceRight");Jke({target:"Array",proto:!0,forced:rRe},{reduceRight:function(t){return Yke(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var y7=b(()=>{"use strict";var iRe=$(),nRe=Re(),aRe=as(),oRe=nRe([].reverse),g7=[1,2];iRe({target:"Array",proto:!0,forced:String(g7)===String(g7.reverse())},{reverse:function(){return aRe(this)&&(this.length=this.length),oRe(this)}})});var b7=b(()=>{"use strict";var sRe=$(),_7=as(),uRe=os(),lRe=Dt(),x7=ns(),cRe=er(),hRe=Ti(),fRe=Io(),dRe=Et(),pRe=Yd(),mRe=qa(),vRe=pRe("slice"),gRe=dRe("species"),tP=Array,yRe=Math.max;sRe({target:"Array",proto:!0,forced:!vRe},{slice:function(t,r){var o=hRe(this),u=cRe(o),a=x7(t,u),m=x7(r===void 0?u:r,u),x,q,T;if(_7(o)&&(x=o.constructor,uRe(x)&&(x===tP||_7(x.prototype))?x=void 0:lRe(x)&&(x=x[gRe],x===null&&(x=void 0)),x===tP||x===void 0))return mRe(o,a,m);for(q=new(x===void 0?tP:x)(yRe(m-a,0)),T=0;a<m;a++,T++)a in o&&fRe(q,T,o[a]);return q.length=T,q}})});var w7=b(()=>{"use strict";var _Re=$(),xRe=mi().some,bRe=Co(),wRe=bRe("some");_Re({target:"Array",proto:!0,forced:!wRe},{some:function(t){return xRe(this,t,arguments.length>1?arguments[1]:void 0)}})});var d1=b((OMt,q7)=>{"use strict";var S7=qa(),SRe=Math.floor,rP=function(e,t){var r=e.length;if(r<8)for(var o=1,u,a;o<r;){for(a=o,u=e[o];a&&t(e[a-1],u)>0;)e[a]=e[--a];a!==o++&&(e[a]=u)}else for(var m=SRe(r/2),x=rP(S7(e,0,m),t),q=rP(S7(e,m),t),T=x.length,I=q.length,k=0,B=0;k<T||B<I;)e[k+B]=k<T&&B<I?t(x[k],q[B])<=0?x[k++]:q[B++]:k<T?x[k++]:q[B++];return e};q7.exports=rP});var iP=b((kMt,E7)=>{"use strict";var qRe=ts(),A7=qRe.match(/firefox\/(\d+)/i);E7.exports=!!A7&&+A7[1]});var nP=b((RMt,T7)=>{"use strict";var ARe=ts();T7.exports=/MSIE|Trident/.test(ARe)});var p1=b((DMt,C7)=>{"use strict";var ERe=ts(),I7=ERe.match(/AppleWebKit\/(\d+)\./);C7.exports=!!I7&&+I7[1]});var z7=b(()=>{"use strict";var TRe=$(),L7=Re(),IRe=Mt(),CRe=Ht(),P7=er(),PRe=jg(),M7=zt(),aP=ze(),MRe=d1(),ORe=Co(),O7=iP(),kRe=nP(),k7=ks(),R7=p1(),hc=[],D7=L7(hc.sort),RRe=L7(hc.push),DRe=aP(function(){hc.sort(void 0)}),LRe=aP(function(){hc.sort(null)}),FRe=ORe("sort"),F7=!aP(function(){if(k7)return k7<70;if(!(O7&&O7>3)){if(kRe)return!0;if(R7)return R7<603;var e="",t,r,o,u;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2;}for(u=0;u<47;u++)hc.push({k:r+u,v:o})}for(hc.sort(function(a,m){return m.v-a.v}),u=0;u<hc.length;u++)r=hc[u].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),zRe=DRe||!LRe||!FRe||!F7,NRe=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:M7(t)>M7(r)?1:-1}};TRe({target:"Array",proto:!0,forced:zRe},{sort:function(t){t!==void 0&&IRe(t);var r=CRe(this);if(F7)return t===void 0?D7(r):D7(r,t);var o=[],u=P7(r),a,m;for(m=0;m<u;m++)m in r&&RRe(o,r[m]);for(MRe(o,NRe(t)),a=P7(o),m=0;m<a;)r[m]=o[m++];for(;m<u;)PRe(r,m++);return r}})});var fc=b((zMt,B7)=>{"use strict";var BRe=Ot(),URe=jr(),jRe=Et(),VRe=wt(),N7=jRe("species");B7.exports=function(e){var t=BRe(e);VRe&&t&&!t[N7]&&URe(t,N7,{configurable:!0,get:function(){return this}})}});var U7=b(()=>{"use strict";var $Re=fc();$Re("Array")});var j7=b(()=>{"use strict";var WRe=$(),GRe=Ht(),KRe=ns(),HRe=Ur(),ZRe=er(),XRe=h1(),JRe=lc(),YRe=Kd(),QRe=Io(),oP=jg(),eDe=Yd(),tDe=eDe("splice"),rDe=Math.max,iDe=Math.min;WRe({target:"Array",proto:!0,forced:!tDe},{splice:function(t,r){var o=GRe(this),u=ZRe(o),a=KRe(t,u),m=arguments.length,x,q,T,I,k,B;for(m===0?x=q=0:m===1?(x=0,q=u-a):(x=m-2,q=iDe(rDe(HRe(r),0),u-a)),JRe(u+x-q),T=YRe(o,q),I=0;I<q;I++)k=a+I,k in o&&QRe(T,I,o[k]);if(T.length=q,x<q){for(I=a;I<u-q;I++)k=I+q,B=I+x,k in o?o[B]=o[k]:oP(o,B);for(I=u;I>u-q+x;I--)oP(o,I-1)}else if(x>q)for(I=u-q;I>a;I--)k=I+q-1,B=I+x-1,k in o?o[B]=o[k]:oP(o,B);for(I=0;I<x;I++)o[I+a]=arguments[I+2];return XRe(o,u-q+x),T}})});var sP=b((VMt,V7)=>{"use strict";var nDe=er();V7.exports=function(e,t){for(var r=nDe(e),o=new t(r),u=0;u<r;u++)o[u]=e[r-u-1];return o}});var uP=b(()=>{"use strict";var aDe=$(),oDe=sP(),sDe=Ti(),uDe=ii(),lDe=Array;aDe({target:"Array",proto:!0},{toReversed:function(){return oDe(sDe(this),lDe)}});uDe("toReversed")});var Fu=b((GMt,$7)=>{"use strict";var cDe=er();$7.exports=function(e,t,r){for(var o=0,u=arguments.length>2?r:cDe(t),a=new e(u);u>o;)a[o]=t[o++];return a}});var lP=b((KMt,W7)=>{"use strict";var hDe=Xe();W7.exports=function(e,t){var r=hDe[e],o=r&&r.prototype;return o&&o[t]}});var cP=b(()=>{"use strict";var fDe=$(),dDe=Re(),pDe=Mt(),mDe=Ti(),vDe=Fu(),gDe=lP(),yDe=ii(),_De=Array,xDe=dDe(gDe("Array","sort"));fDe({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&pDe(t);var r=mDe(this),o=vDe(_De,r);return xDe(o,t)}});yDe("toSorted")});var hP=b(()=>{"use strict";var bDe=$(),wDe=ii(),SDe=lc(),qDe=er(),ADe=ns(),EDe=Ti(),TDe=Ur(),IDe=Array,CDe=Math.max,PDe=Math.min;bDe({target:"Array",proto:!0},{toSpliced:function(t,r){var o=EDe(this),u=qDe(o),a=ADe(t,u),m=arguments.length,x=0,q,T,I,k;for(m===0?q=T=0:m===1?(q=0,T=u-a):(q=m-2,T=PDe(CDe(TDe(r),0),u-a)),I=SDe(u+q-T),k=IDe(I);x<a;x++)k[x]=o[x];for(;x<a+q;x++)k[x]=arguments[x-a+2];for(;x<I;x++)k[x]=o[x+T-q];return k}});wDe("toSpliced")});var G7=b(()=>{"use strict";var MDe=ii();MDe("flat")});var K7=b(()=>{"use strict";var ODe=ii();ODe("flatMap")});var H7=b(()=>{"use strict";var kDe=$(),RDe=Ht(),DDe=er(),LDe=h1(),FDe=jg(),zDe=lc(),NDe=[].unshift(0)!==1,BDe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},UDe=NDe||!BDe();kDe({target:"Array",proto:!0,arity:1,forced:UDe},{unshift:function(t){var r=RDe(this),o=DDe(r),u=arguments.length;if(u){zDe(o+u);for(var a=o;a--;){var m=a+u;a in r?r[m]=r[a]:FDe(r,m)}for(var x=0;x<u;x++)r[x]=arguments[x]}return LDe(r,o+u)}})});var fP=b((nOt,Z7)=>{"use strict";var jDe=er(),VDe=Ur(),$De=RangeError;Z7.exports=function(e,t,r,o){var u=jDe(e),a=VDe(r),m=a<0?u+a:a;if(m>=u||m<0)throw new $De("Incorrect index");for(var x=new t(u),q=0;q<u;q++)x[q]=q===m?o:e[q];return x}});var dP=b(()=>{"use strict";var WDe=$(),GDe=fP(),KDe=Ti(),HDe=Array;WDe({target:"Array",proto:!0},{with:function(e,t){return GDe(KDe(this),HDe,e,t)}})});var m1=b((sOt,X7)=>{"use strict";X7.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Po=b((uOt,J7)=>{"use strict";var ZDe=yr();J7.exports=function(e,t,r){for(var o in t)ZDe(e,o,t[o],r);return e}});var zn=b((lOt,Y7)=>{"use strict";var XDe=mn(),JDe=TypeError;Y7.exports=function(e,t){if(XDe(t,e))return e;throw new JDe("Incorrect invocation")}});var Qd=b((cOt,Q7)=>{"use strict";var YDe=Ur(),QDe=wa(),eLe=RangeError;Q7.exports=function(e){if(e===void 0)return 0;var t=YDe(e),r=QDe(t);if(t!==r)throw new eLe("Wrong length or index");return r}});var v1=b((hOt,eG)=>{"use strict";eG.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var pP=b((fOt,iG)=>{"use strict";var tLe=v1(),rLe=Math.abs,rG=2220446049250313e-31,tG=1/rG,iLe=function(e){return e+tG-tG};iG.exports=function(e,t,r,o){var u=+e,a=rLe(u),m=tLe(u);if(a<o)return m*iLe(a/o/t)*o*t;var x=(1+t/rG)*a,q=x-(x-a);return q>r||q!==q?m*(1/0):m*q}});var g1=b((dOt,nG)=>{"use strict";var nLe=pP(),aLe=1.1920928955078125e-7,oLe=34028234663852886e22,sLe=11754943508222875e-54;nG.exports=Math.fround||function(t){return nLe(t,aLe,oLe,sLe)}});var y1=b((pOt,aG)=>{"use strict";var uLe=Array,lLe=Math.abs,zu=Math.pow,cLe=Math.floor,hLe=Math.log,fLe=Math.LN2,dLe=function(e,t,r){var o=uLe(r),u=r*8-t-1,a=(1<<u)-1,m=a>>1,x=t===23?zu(2,-24)-zu(2,-77):0,q=e<0||e===0&&1/e<0?1:0,T=0,I,k,B;for(e=lLe(e),e!==e||e===1/0?(k=e!==e?1:0,I=a):(I=cLe(hLe(e)/fLe),B=zu(2,-I),e*B<1&&(I--,B*=2),I+m>=1?e+=x/B:e+=x*zu(2,1-m),e*B>=2&&(I++,B/=2),I+m>=a?(k=0,I=a):I+m>=1?(k=(e*B-1)*zu(2,t),I+=m):(k=e*zu(2,m-1)*zu(2,t),I=0));t>=8;)o[T++]=k&255,k/=256,t-=8;for(I=I<<t|k,u+=t;u>0;)o[T++]=I&255,I/=256,u-=8;return o[T-1]|=q*128,o},pLe=function(e,t){var r=e.length,o=r*8-t-1,u=(1<<o)-1,a=u>>1,m=o-7,x=r-1,q=e[x--],T=q&127,I;for(q>>=7;m>0;)T=T*256+e[x--],m-=8;for(I=T&(1<<-m)-1,T>>=-m,m+=t;m>0;)I=I*256+e[x--],m-=8;if(T===0)T=1-a;else{if(T===u)return I?NaN:q?-1/0:1/0;I+=zu(2,t),T-=a}return(q?-1:1)*I*zu(2,T-t)};aG.exports={pack:dLe,unpack:pLe}});var Qg=b((mOt,wG)=>{"use strict";var S1=Xe(),_P=Re(),mP=wt(),mLe=m1(),gG=Eh(),vLe=Ii(),gLe=jr(),oG=Po(),vP=ze(),_1=zn(),yLe=Ur(),_Le=wa(),b1=Qd(),xLe=g1(),yG=y1(),bLe=Ci(),sG=To(),wLe=a1(),SLe=qa(),qLe=sc(),ALe=Ih(),_G=ea(),xP=pr(),ELe=gG.PROPER,uG=gG.CONFIGURABLE,tp="ArrayBuffer",q1="DataView",rp="prototype",TLe="Wrong length",xG="Wrong index",lG=xP.getterFor(tp),Yg=xP.getterFor(q1),cG=xP.set,ss=S1[tp],to=ss,ep=to&&to[rp],Fs=S1[q1],zh=Fs&&Fs[rp],hG=Object.prototype,ILe=S1.Array,w1=S1.RangeError,CLe=_P(wLe),PLe=_P([].reverse),bG=yG.pack,fG=yG.unpack,dG=function(e){return[e&255]},pG=function(e){return[e&255,e>>8&255]},mG=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},vG=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},MLe=function(e){return bG(xLe(e),23,4)},OLe=function(e){return bG(e,52,8)},x1=function(e,t,r){gLe(e[rp],t,{configurable:!0,get:function(){return r(this)[t]}})},dc=function(e,t,r,o){var u=Yg(e),a=b1(r),m=!!o;if(a+t>u.byteLength)throw new w1(xG);var x=u.bytes,q=a+u.byteOffset,T=SLe(x,q,q+t);return m?T:PLe(T)},pc=function(e,t,r,o,u,a){var m=Yg(e),x=b1(r),q=o(+u),T=!!a;if(x+t>m.byteLength)throw new w1(xG);for(var I=m.bytes,k=x+m.byteOffset,B=0;B<t;B++)I[k+B]=q[T?B:t-B-1]};mLe?(gP=ELe&&ss.name!==tp,!vP(function(){ss(1)})||!vP(function(){new ss(-1)})||vP(function(){return new ss,new ss(1.5),new ss(NaN),ss.length!==1||gP&&!uG})?(to=function(t){return _1(this,ep),qLe(new ss(b1(t)),this,to)},to[rp]=ep,ep.constructor=to,ALe(to,ss)):gP&&uG&&vLe(ss,"name",tp),sG&&bLe(zh)!==hG&&sG(zh,hG),Jg=new Fs(new to(2)),yP=_P(zh.setInt8),Jg.setInt8(0,2147483648),Jg.setInt8(1,2147483649),(Jg.getInt8(0)||!Jg.getInt8(1))&&oG(zh,{setInt8:function(t,r){yP(this,t,r<<24>>24)},setUint8:function(t,r){yP(this,t,r<<24>>24)}},{unsafe:!0})):(to=function(t){_1(this,ep);var r=b1(t);cG(this,{type:tp,bytes:CLe(ILe(r),0),byteLength:r}),mP||(this.byteLength=r,this.detached=!1)},ep=to[rp],Fs=function(t,r,o){_1(this,zh),_1(t,ep);var u=lG(t),a=u.byteLength,m=yLe(r);if(m<0||m>a)throw new w1("Wrong offset");if(o=o===void 0?a-m:_Le(o),m+o>a)throw new w1(TLe);cG(this,{type:q1,buffer:t,byteLength:o,byteOffset:m,bytes:u.bytes}),mP||(this.buffer=t,this.byteLength=o,this.byteOffset=m)},zh=Fs[rp],mP&&(x1(to,"byteLength",lG),x1(Fs,"buffer",Yg),x1(Fs,"byteLength",Yg),x1(Fs,"byteOffset",Yg)),oG(zh,{getInt8:function(t){return dc(this,1,t)[0]<<24>>24},getUint8:function(t){return dc(this,1,t)[0]},getInt16:function(t){var r=dc(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=dc(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return vG(dc(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return vG(dc(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return fG(dc(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return fG(dc(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){pc(this,1,t,dG,r)},setUint8:function(t,r){pc(this,1,t,dG,r)},setInt16:function(t,r){pc(this,2,t,pG,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){pc(this,2,t,pG,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){pc(this,4,t,mG,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){pc(this,4,t,mG,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){pc(this,4,t,MLe,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){pc(this,8,t,OLe,r,arguments.length>2?arguments[2]:!1)}}));var gP,Jg,yP;_G(to,tp);_G(Fs,q1);wG.exports={ArrayBuffer:to,DataView:Fs}});var qG=b(()=>{"use strict";var kLe=$(),RLe=Xe(),DLe=Qg(),LLe=fc(),bP="ArrayBuffer",SG=DLe[bP],FLe=RLe[bP];kLe({global:!0,constructor:!0,forced:FLe!==SG},{ArrayBuffer:SG});LLe(bP)});var Gt=b((yOt,RG)=>{"use strict";var zLe=m1(),AP=wt(),ta=Xe(),IG=jt(),T1=Dt(),vc=$t(),EP=Sa(),NLe=rc(),BLe=Ii(),wP=yr(),ULe=jr(),jLe=mn(),I1=Ci(),np=To(),VLe=Et(),$Le=ic(),CG=pr(),PG=CG.enforce,WLe=CG.get,A1=ta.Int8Array,SP=A1&&A1.prototype,AG=ta.Uint8ClampedArray,EG=AG&&AG.prototype,zs=A1&&I1(A1),us=SP&&I1(SP),GLe=Object.prototype,TP=ta.TypeError,TG=VLe("toStringTag"),qP=$Le("TYPED_ARRAY_TAG"),E1="TypedArrayConstructor",Nu=zLe&&!!np&&EP(ta.opera)!=="Opera",MG=!1,Ea,mc,ip,Bu={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},IP={BigInt64Array:8,BigUint64Array:8},KLe=function(t){if(!T1(t))return!1;var r=EP(t);return r==="DataView"||vc(Bu,r)||vc(IP,r)},OG=function(e){var t=I1(e);if(T1(t)){var r=WLe(t);return r&&vc(r,E1)?r[E1]:OG(t)}},kG=function(e){if(!T1(e))return!1;var t=EP(e);return vc(Bu,t)||vc(IP,t)},HLe=function(e){if(kG(e))return e;throw new TP("Target is not a typed array")},ZLe=function(e){if(IG(e)&&(!np||jLe(zs,e)))return e;throw new TP(NLe(e)+" is not a typed array constructor")},XLe=function(e,t,r,o){if(AP){if(r)for(var u in Bu){var a=ta[u];if(a&&vc(a.prototype,e))try{delete a.prototype[e]}catch(m){try{a.prototype[e]=t}catch(x){}}}(!us[e]||r)&&wP(us,e,r?t:Nu&&SP[e]||t,o)}},JLe=function(e,t,r){var o,u;if(AP){if(np){if(r){for(o in Bu)if(u=ta[o],u&&vc(u,e))try{delete u[e]}catch(a){}}if(!zs[e]||r)try{return wP(zs,e,r?t:Nu&&zs[e]||t)}catch(a){}else return}for(o in Bu)u=ta[o],u&&(!u[e]||r)&&wP(u,e,t)}};for(Ea in Bu)mc=ta[Ea],ip=mc&&mc.prototype,ip?PG(ip)[E1]=mc:Nu=!1;for(Ea in IP)mc=ta[Ea],ip=mc&&mc.prototype,ip&&(PG(ip)[E1]=mc);if((!Nu||!IG(zs)||zs===Function.prototype)&&(zs=function(){throw new TP("Incorrect invocation")},Nu))for(Ea in Bu)ta[Ea]&&np(ta[Ea],zs);if((!Nu||!us||us===GLe)&&(us=zs.prototype,Nu))for(Ea in Bu)ta[Ea]&&np(ta[Ea].prototype,us);Nu&&I1(EG)!==us&&np(EG,us);if(AP&&!vc(us,TG)){MG=!0,ULe(us,TG,{configurable:!0,get:function(){return T1(this)?this[qP]:void 0}});for(Ea in Bu)ta[Ea]&&BLe(ta[Ea],qP,Ea)}RG.exports={NATIVE_ARRAY_BUFFER_VIEWS:Nu,TYPED_ARRAY_TAG:MG&&qP,aTypedArray:HLe,aTypedArrayConstructor:ZLe,exportTypedArrayMethod:XLe,exportTypedArrayStaticMethod:JLe,getTypedArrayConstructor:OG,isView:KLe,isTypedArray:kG,TypedArray:zs,TypedArrayPrototype:us}});var LG=b(()=>{"use strict";var YLe=$(),DG=Gt(),QLe=DG.NATIVE_ARRAY_BUFFER_VIEWS;YLe({target:"ArrayBuffer",stat:!0,forced:!QLe},{isView:DG.isView})});var jG=b(()=>{"use strict";var eFe=$(),PP=Ou(),tFe=ze(),BG=Qg(),FG=Qe(),zG=ns(),rFe=wa(),MP=BG.ArrayBuffer,CP=BG.DataView,UG=CP.prototype,NG=PP(MP.prototype.slice),iFe=PP(UG.getUint8),nFe=PP(UG.setUint8),aFe=tFe(function(){return!new MP(2).slice(1,void 0).byteLength});eFe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:aFe},{slice:function(t,r){if(NG&&r===void 0)return NG(FG(this),t);for(var o=FG(this).byteLength,u=zG(t,o),a=zG(r===void 0?o:r,o),m=new MP(rFe(a-u)),x=new CP(this),q=new CP(m),T=0;u<a;)nFe(q,T++,iFe(x,u++));return m}})});var VG=b(()=>{"use strict";var oFe=$(),sFe=Qg(),uFe=m1();oFe({global:!0,constructor:!0,forced:!uFe},{DataView:sFe.DataView})});var $G=b(()=>{"use strict";VG()});var OP=b((TOt,KG)=>{"use strict";var GG=Xe(),lFe=Ug(),cFe=pn(),WG=GG.ArrayBuffer,hFe=GG.TypeError;KG.exports=WG&&lFe(WG.prototype,"byteLength","get")||function(e){if(cFe(e)!=="ArrayBuffer")throw new hFe("ArrayBuffer expected");return e.byteLength}});var kP=b((IOt,JG)=>{"use strict";var fFe=Xe(),dFe=Ou(),pFe=OP(),HG=fFe.ArrayBuffer,ZG=HG&&HG.prototype,XG=ZG&&dFe(ZG.slice);JG.exports=function(e){if(pFe(e)!==0||!XG)return!1;try{return XG(e,0,0),!1}catch(t){return!0}}});var RP=b(()=>{"use strict";var mFe=wt(),vFe=jr(),gFe=kP(),YG=ArrayBuffer.prototype;mFe&&!("detached"in YG)&&vFe(YG,"detached",{configurable:!0,get:function(){return gFe(this)}})});var ap=b((MOt,QG)=>{"use strict";var yFe=kP(),_Fe=TypeError;QG.exports=function(e){if(yFe(e))throw new _Fe("ArrayBuffer is detached");return e}});var DP=b((OOt,eK)=>{"use strict";var xFe=Xe(),bFe=Fh();eK.exports=function(e){if(bFe){try{return xFe.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var C1=b((kOt,rK)=>{"use strict";var wFe=Xe(),SFe=ze(),LP=ks(),FP=Xg(),tK=wFe.structuredClone;rK.exports=!!tK&&!SFe(function(){if(FP==="DENO"&&LP>92||FP==="NODE"&&LP>94||FP==="BROWSER"&&LP>97)return!1;var e=new ArrayBuffer(8),t=tK(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var jP=b((ROt,aK)=>{"use strict";var UP=Xe(),qFe=DP(),AFe=C1(),EFe=UP.structuredClone,iK=UP.ArrayBuffer,P1=UP.MessageChannel,BP=!1,zP,nK,M1,NP;if(AFe)BP=function(e){EFe(e,{transfer:[e]})};else if(iK)try{P1||(zP=qFe("worker_threads"),zP&&(P1=zP.MessageChannel)),P1&&(nK=new P1,M1=new iK(2),NP=function(e){nK.port1.postMessage(null,[e])},M1.byteLength===2&&(NP(M1),M1.byteLength===0&&(BP=NP)))}catch(e){}aK.exports=BP});var HP=b((DOt,fK)=>{"use strict";var WP=Xe(),GP=Re(),lK=Ug(),TFe=Qd(),IFe=ap(),CFe=OP(),oK=jP(),VP=C1(),PFe=WP.structuredClone,cK=WP.ArrayBuffer,$P=WP.DataView,MFe=Math.min,KP=cK.prototype,hK=$P.prototype,OFe=GP(KP.slice),sK=lK(KP,"resizable","get"),uK=lK(KP,"maxByteLength","get"),kFe=GP(hK.getInt8),RFe=GP(hK.setInt8);fK.exports=(VP||oK)&&function(e,t,r){var o=CFe(e),u=t===void 0?o:TFe(t),a=!sK||!sK(e),m;if(IFe(e),VP&&(e=PFe(e,{transfer:[e]}),o===u&&(r||a)))return e;if(o>=u&&(!r||a))m=OFe(e,0,u);else{var x=r&&!a&&uK?{maxByteLength:uK(e)}:void 0;m=new cK(u,x);for(var q=new $P(e),T=new $P(m),I=MFe(u,o),k=0;k<I;k++)RFe(T,k,kFe(q,k))}return VP||oK(e),m}});var ZP=b(()=>{"use strict";var DFe=$(),dK=HP();dK&&DFe({target:"ArrayBuffer",proto:!0},{transfer:function(){return dK(this,arguments.length?arguments[0]:void 0,!0)}})});var XP=b(()=>{"use strict";var LFe=$(),pK=HP();pK&&LFe({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return pK(this,arguments.length?arguments[0]:void 0,!1)}})});var mK=b(()=>{"use strict";var FFe=$(),zFe=Re(),NFe=ze(),BFe=NFe(function(){return new Date(16e11).getYear()!==120}),UFe=zFe(Date.prototype.getFullYear);FFe({target:"Date",proto:!0,forced:BFe},{getYear:function(){return UFe(this)-1900}})});var gK=b(()=>{"use strict";var jFe=$(),VFe=Re(),vK=Date,$Fe=VFe(vK.prototype.getTime);jFe({target:"Date",stat:!0},{now:function(){return $Fe(new vK)}})});var xK=b(()=>{"use strict";var WFe=$(),yK=Re(),GFe=Ur(),_K=Date.prototype,KFe=yK(_K.getTime),HFe=yK(_K.setFullYear);WFe({target:"Date",proto:!0},{setYear:function(t){KFe(this);var r=GFe(t),o=r>=0&&r<=99?r+1900:r;return HFe(this,o)}})});var bK=b(()=>{"use strict";var ZFe=$();ZFe({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var ey=b((HOt,wK)=>{"use strict";var XFe=Ur(),JFe=zt(),YFe=zr(),QFe=RangeError;wK.exports=function(t){var r=JFe(YFe(this)),o="",u=XFe(t);if(u<0||u===1/0)throw new QFe("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(r+=r))u&1&&(o+=r);return o}});var ty=b((ZOt,EK)=>{"use strict";var AK=Re(),eze=wa(),SK=zt(),tze=ey(),rze=zr(),ize=AK(tze),nze=AK("".slice),aze=Math.ceil,qK=function(e){return function(t,r,o){var u=SK(rze(t)),a=eze(r),m=u.length,x=o===void 0?" ":SK(o),q,T;return a<=m||x===""?u:(q=a-m,T=ize(x,aze(q/x.length)),T.length>q&&(T=nze(T,0,q)),e?u+T:T+u)}};EK.exports={start:qK(!1),end:qK(!0)}});var CK=b((XOt,IK)=>{"use strict";var gc=Re(),TK=ze(),Nh=ty().start,oze=RangeError,sze=isFinite,uze=Math.abs,Uu=Date.prototype,JP=Uu.toISOString,lze=gc(Uu.getTime),cze=gc(Uu.getUTCDate),hze=gc(Uu.getUTCFullYear),fze=gc(Uu.getUTCHours),dze=gc(Uu.getUTCMilliseconds),pze=gc(Uu.getUTCMinutes),mze=gc(Uu.getUTCMonth),vze=gc(Uu.getUTCSeconds);IK.exports=TK(function(){return JP.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!TK(function(){JP.call(new Date(NaN))})?function(){if(!sze(lze(this)))throw new oze("Invalid time value");var t=this,r=hze(t),o=dze(t),u=r<0?"-":r>9999?"+":"";return u+Nh(uze(r),u?6:4,0)+"-"+Nh(mze(t)+1,2,0)+"-"+Nh(cze(t),2,0)+"T"+Nh(fze(t),2,0)+":"+Nh(pze(t),2,0)+":"+Nh(vze(t),2,0)+"."+Nh(o,3,0)+"Z"}:JP});var MK=b(()=>{"use strict";var gze=$(),PK=CK();gze({target:"Date",proto:!0,forced:Date.prototype.toISOString!==PK},{toISOString:PK})});var OK=b(()=>{"use strict";var yze=$(),_ze=ze(),xze=Ht(),bze=Eg(),wze=_ze(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});yze({target:"Date",proto:!0,arity:1,forced:wze},{toJSON:function(t){var r=xze(this),o=bze(r,"number");return typeof o=="number"&&!isFinite(o)?null:r.toISOString()}})});var RK=b((tkt,kK)=>{"use strict";var Sze=Qe(),qze=I2(),Aze=TypeError;kK.exports=function(e){if(Sze(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new Aze("Incorrect hint");return qze(this,e)}});var FK=b(()=>{"use strict";var Eze=$t(),Tze=yr(),Ize=RK(),Cze=Et(),DK=Cze("toPrimitive"),LK=Date.prototype;Eze(LK,DK)||Tze(LK,DK,Ize)});var UK=b(()=>{"use strict";var NK=Re(),Pze=yr(),YP=Date.prototype,zK="Invalid Date",BK="toString",Mze=NK(YP[BK]),Oze=NK(YP.getTime);String(new Date(NaN))!==zK&&Pze(YP,BK,function(){var t=Oze(this);return t===t?Mze(this):zK})});var VK=b(()=>{"use strict";var kze=$(),ry=Re(),Rze=zt(),Dze=ry("".charAt),Lze=ry("".charCodeAt),Fze=ry(/./.exec),zze=ry(1 .toString),Nze=ry("".toUpperCase),Bze=/[\w*+\-./@]/,jK=function(e,t){for(var r=zze(e,16);r.length<t;)r="0"+r;return r};kze({global:!0},{escape:function(t){for(var r=Rze(t),o="",u=r.length,a=0,m,x;a<u;)m=Dze(r,a++),Fze(Bze,m)?o+=m:(x=Lze(m,0),x<256?o+="%"+jK(x,2):o+="%u"+Nze(jK(x,4)));return o}})});var eM=b((ukt,KK)=>{"use strict";var WK=Re(),Uze=Mt(),jze=Dt(),Vze=$t(),$K=qa(),$ze=jd(),GK=Function,Wze=WK([].concat),Gze=WK([].join),QP={},Kze=function(e,t,r){if(!Vze(QP,t)){for(var o=[],u=0;u<t;u++)o[u]="a["+u+"]";QP[t]=GK("C,a","return new C("+Gze(o,",")+")")}return QP[t](e,r)};KK.exports=$ze?GK.bind:function(t){var r=Uze(this),o=r.prototype,u=$K(arguments,1),a=function(){var x=Wze(u,$K(arguments));return this instanceof a?Kze(r,x.length,x):r.apply(t,x)};return jze(o)&&(a.prototype=o),a}});var ZK=b(()=>{"use strict";var Hze=$(),HK=eM();Hze({target:"Function",proto:!0,forced:Function.bind!==HK},{bind:HK})});var YK=b(()=>{"use strict";var Zze=jt(),XK=Dt(),Xze=Dr(),Jze=mn(),Yze=Et(),Qze=Mg(),tM=Yze("hasInstance"),JK=Function.prototype;tM in JK||Xze.f(JK,tM,{value:Qze(function(e){if(!Zze(this)||!XK(e))return!1;var t=this.prototype;return XK(t)?Jze(t,e):e instanceof this},tM)})});var rH=b(()=>{"use strict";var eNe=wt(),tNe=Eh().EXISTS,QK=Re(),rNe=jr(),eH=Function.prototype,iNe=QK(eH.toString),tH=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,nNe=QK(tH.exec),aNe="name";eNe&&!tNe&&rNe(eH,aNe,{configurable:!0,get:function(){try{return nNe(tH,iNe(this))[1]}catch(e){return""}}})});var iM=b(()=>{"use strict";var oNe=$(),rM=Xe();oNe({global:!0,forced:rM.globalThis!==rM},{globalThis:rM})});var uM=b(()=>{"use strict";var sNe=$(),uNe=Xe(),lNe=zn(),cNe=Qe(),hNe=jt(),fNe=Ci(),dNe=jr(),pNe=Io(),mNe=ze(),oM=$t(),vNe=Et(),Ns=Lh().IteratorPrototype,gNe=wt(),yNe=Kt(),nM="constructor",nH="Iterator",iH=vNe("toStringTag"),aH=TypeError,aM=uNe[nH],oH=yNe||!hNe(aM)||aM.prototype!==Ns||!mNe(function(){aM({})}),sM=function(){if(lNe(this,Ns),fNe(this)===Ns)throw new aH("Abstract class Iterator not directly constructable")},sH=function(e,t){gNe?dNe(Ns,e,{configurable:!0,get:function(){return t},set:function(r){if(cNe(this),this===Ns)throw new aH("You can't redefine this property");oM(this,e)?this[e]=r:pNe(this,e,r)}}):Ns[e]=t};oM(Ns,iH)||sH(iH,nH);(oH||!oM(Ns,nM)||Ns[nM]===Object)&&sH(nM,sM);sM.prototype=Ns;sNe({global:!0,constructor:!0,forced:oH},{Iterator:sM})});var Hr=b((_kt,uH)=>{"use strict";uH.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var iy=b((xkt,lH)=>{"use strict";var _Ne=RangeError;lH.exports=function(e){if(e===e)return e;throw new _Ne("NaN is not allowed")}});var op=b((bkt,cH)=>{"use strict";var xNe=Ur(),bNe=RangeError;cH.exports=function(e){var t=xNe(e);if(t<0)throw new bNe("The argument can't be less than 0");return t}});var yc=b((wkt,vH)=>{"use strict";var wNe=tt(),SNe=pi(),qNe=Ii(),ANe=Po(),ENe=Et(),hH=pr(),TNe=di(),INe=Lh().IteratorPrototype,lM=Xi(),cM=Du(),CNe=ENe("toStringTag"),fH="IteratorHelper",dH="WrapForValidIterator",PNe=hH.set,pH=function(e){var t=hH.getterFor(e?dH:fH);return ANe(SNe(INe),{next:function(){var o=t(this);if(e)return o.nextHandler();try{var u=o.done?void 0:o.nextHandler();return lM(u,o.done)}catch(a){throw o.done=!0,a}},return:function(){var r=t(this),o=r.iterator;if(r.done=!0,e){var u=TNe(o,"return");return u?wNe(u,o):lM(void 0,!0)}if(r.inner)try{cM(r.inner.iterator,"normal")}catch(a){return cM(o,"throw",a)}return o&&cM(o,"normal"),lM(void 0,!0)}})},MNe=pH(!0),mH=pH(!1);qNe(mH,CNe,"Iterator Helper");vH.exports=function(e,t){var r=function(u,a){a?(a.iterator=u.iterator,a.next=u.next):a=u,a.type=t?dH:fH,a.nextHandler=e,a.counter=0,a.done=!1,PNe(this,a)};return r.prototype=t?MNe:mH,r}});var fM=b(()=>{"use strict";var ONe=$(),gH=tt(),hM=Qe(),kNe=Hr(),RNe=iy(),DNe=op(),LNe=yc(),FNe=Kt(),zNe=LNe(function(){for(var e=this.iterator,t=this.next,r,o;this.remaining;)if(this.remaining--,r=hM(gH(t,e)),o=this.done=!!r.done,o)return;if(r=hM(gH(t,e)),o=this.done=!!r.done,!o)return r.value});ONe({target:"Iterator",proto:!0,real:!0,forced:FNe},{drop:function(t){hM(this);var r=DNe(RNe(+t));return new zNe(kNe(this),{remaining:r})}})});var dM=b(()=>{"use strict";var NNe=$(),BNe=ri(),UNe=Mt(),jNe=Qe(),VNe=Hr();NNe({target:"Iterator",proto:!0,real:!0},{every:function(t){jNe(this),UNe(t);var r=VNe(this),o=0;return!BNe(r,function(u,a){if(!t(u,o++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var pM=b(()=>{"use strict";var $Ne=$(),WNe=tt(),GNe=Mt(),yH=Qe(),KNe=Hr(),HNe=yc(),ZNe=o1(),XNe=Kt(),JNe=HNe(function(){for(var e=this.iterator,t=this.predicate,r=this.next,o,u,a;;){if(o=yH(WNe(r,e)),u=this.done=!!o.done,u)return;if(a=o.value,ZNe(e,t,[a,this.counter++],!0))return a}});$Ne({target:"Iterator",proto:!0,real:!0,forced:XNe},{filter:function(t){return yH(this),GNe(t),new JNe(KNe(this),{predicate:t})}})});var mM=b(()=>{"use strict";var YNe=$(),QNe=ri(),eBe=Mt(),tBe=Qe(),rBe=Hr();YNe({target:"Iterator",proto:!0,real:!0},{find:function(t){tBe(this),eBe(t);var r=rBe(this),o=0;return QNe(r,function(u,a){if(t(u,o++))return a(u)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var vM=b((Mkt,xH)=>{"use strict";var iBe=tt(),_H=Qe(),nBe=Hr(),aBe=Ls();xH.exports=function(e,t){(!t||typeof e!="string")&&_H(e);var r=aBe(e);return nBe(_H(r!==void 0?iBe(r,e):e))}});var yM=b(()=>{"use strict";var oBe=$(),bH=tt(),sBe=Mt(),gM=Qe(),uBe=Hr(),lBe=vM(),cBe=yc(),wH=Du(),hBe=Kt(),fBe=cBe(function(){for(var e=this.iterator,t=this.mapper,r,o;;){if(o=this.inner)try{if(r=gM(bH(o.next,o.iterator)),!r.done)return r.value;this.inner=null}catch(u){wH(e,"throw",u)}if(r=gM(bH(this.next,e)),this.done=!!r.done)return;try{this.inner=lBe(t(r.value,this.counter++),!1)}catch(u){wH(e,"throw",u)}}});oBe({target:"Iterator",proto:!0,real:!0,forced:hBe},{flatMap:function(t){return gM(this),sBe(t),new fBe(uBe(this),{mapper:t,inner:null})}})});var _M=b(()=>{"use strict";var dBe=$(),pBe=ri(),mBe=Mt(),vBe=Qe(),gBe=Hr();dBe({target:"Iterator",proto:!0,real:!0},{forEach:function(t){vBe(this),mBe(t);var r=gBe(this),o=0;pBe(r,function(u){t(u,o++)},{IS_RECORD:!0})}})});var xM=b(()=>{"use strict";var yBe=$(),_Be=tt(),xBe=Ht(),bBe=mn(),wBe=Lh().IteratorPrototype,SBe=yc(),qBe=vM(),ABe=Kt(),EBe=SBe(function(){return _Be(this.next,this.iterator)},!0);yBe({target:"Iterator",stat:!0,forced:ABe},{from:function(t){var r=qBe(typeof t=="string"?xBe(t):t,!0);return bBe(wBe,r.iterator)?r.iterator:new EBe(r)}})});var bM=b((zkt,qH)=>{"use strict";var TBe=tt(),IBe=Mt(),SH=Qe(),CBe=Hr(),PBe=yc(),MBe=o1(),OBe=PBe(function(){var e=this.iterator,t=SH(TBe(this.next,e)),r=this.done=!!t.done;if(!r)return MBe(e,this.mapper,[t.value,this.counter++],!0)});qH.exports=function(t){return SH(this),IBe(t),new OBe(CBe(this),{mapper:t})}});var wM=b(()=>{"use strict";var kBe=$(),RBe=bM(),DBe=Kt();kBe({target:"Iterator",proto:!0,real:!0,forced:DBe},{map:RBe})});var SM=b(()=>{"use strict";var LBe=$(),FBe=ri(),zBe=Mt(),NBe=Qe(),BBe=Hr(),UBe=TypeError;LBe({target:"Iterator",proto:!0,real:!0},{reduce:function(t){NBe(this),zBe(t);var r=BBe(this),o=arguments.length<2,u=o?void 0:arguments[1],a=0;if(FBe(r,function(m){o?(o=!1,u=m):u=t(u,m,a),a++},{IS_RECORD:!0}),o)throw new UBe("Reduce of empty iterator with no initial value");return u}})});var qM=b(()=>{"use strict";var jBe=$(),VBe=ri(),$Be=Mt(),WBe=Qe(),GBe=Hr();jBe({target:"Iterator",proto:!0,real:!0},{some:function(t){WBe(this),$Be(t);var r=GBe(this),o=0;return VBe(r,function(u,a){if(t(u,o++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var AM=b(()=>{"use strict";var KBe=$(),HBe=tt(),AH=Qe(),ZBe=Hr(),XBe=iy(),JBe=op(),YBe=yc(),QBe=Du(),e3e=Kt(),t3e=YBe(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,QBe(e,"normal",void 0);var t=AH(HBe(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});KBe({target:"Iterator",proto:!0,real:!0,forced:e3e},{take:function(t){AH(this);var r=JBe(XBe(+t));return new t3e(ZBe(this),{remaining:r})}})});var EM=b(()=>{"use strict";var r3e=$(),i3e=Qe(),n3e=ri(),a3e=Hr(),o3e=[].push;r3e({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return n3e(a3e(i3e(this)),o3e,{that:t,IS_RECORD:!0}),t}})});var EH=b(()=>{"use strict";var s3e=Xe(),u3e=ea();u3e(s3e.JSON,"JSON",!0)});var O1=b((Jkt,TH)=>{"use strict";var l3e=ze();TH.exports=l3e(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var R1=b((Ykt,CH)=>{"use strict";var c3e=ze(),h3e=Dt(),f3e=pn(),IH=O1(),k1=Object.isExtensible,d3e=c3e(function(){k1(1)});CH.exports=d3e||IH?function(t){return!h3e(t)||IH&&f3e(t)==="ArrayBuffer"?!1:k1?k1(t):!0}:k1});var ju=b((Qkt,PH)=>{"use strict";var p3e=ze();PH.exports=!p3e(function(){return Object.isExtensible(Object.preventExtensions({}))})});var _c=b((eRt,kH)=>{"use strict";var m3e=$(),v3e=Re(),g3e=$d(),y3e=Dt(),TM=$t(),_3e=Dr().f,MH=nc(),x3e=Ub(),IM=R1(),b3e=ic(),w3e=ju(),OH=!1,Vu=b3e("meta"),S3e=0,CM=function(e){_3e(e,Vu,{value:{objectID:"O"+S3e++,weakData:{}}})},q3e=function(e,t){if(!y3e(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!TM(e,Vu)){if(!IM(e))return"F";if(!t)return"E";CM(e)}return e[Vu].objectID},A3e=function(e,t){if(!TM(e,Vu)){if(!IM(e))return!0;if(!t)return!1;CM(e)}return e[Vu].weakData},E3e=function(e){return w3e&&OH&&IM(e)&&!TM(e,Vu)&&CM(e),e},T3e=function(){I3e.enable=function(){},OH=!0;var e=MH.f,t=v3e([].splice),r={};r[Vu]=1,e(r).length&&(MH.f=function(o){for(var u=e(o),a=0,m=u.length;a<m;a++)if(u[a]===Vu){t(u,a,1);break}return u},m3e({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x3e.f}))},I3e=kH.exports={enable:T3e,fastKey:q3e,getWeakData:A3e,onFreeze:E3e};g3e[Vu]=!0});var ny=b((tRt,DH)=>{"use strict";var C3e=$(),P3e=Xe(),M3e=Re(),RH=Gd(),O3e=yr(),k3e=_c(),R3e=ri(),D3e=zn(),L3e=jt(),F3e=Ei(),PM=Dt(),MM=ze(),z3e=$g(),N3e=ea(),B3e=sc();DH.exports=function(e,t,r){var o=e.indexOf("Map")!==-1,u=e.indexOf("Weak")!==-1,a=o?"set":"add",m=P3e[e],x=m&&m.prototype,q=m,T={},I=function(H){var J=M3e(x[H]);O3e(x,H,H==="add"?function(be){return J(this,be===0?0:be),this}:H==="delete"?function(ve){return u&&!PM(ve)?!1:J(this,ve===0?0:ve)}:H==="get"?function(be){return u&&!PM(be)?void 0:J(this,be===0?0:be)}:H==="has"?function(be){return u&&!PM(be)?!1:J(this,be===0?0:be)}:function(be,Le){return J(this,be===0?0:be,Le),this})},k=RH(e,!L3e(m)||!(u||x.forEach&&!MM(function(){new m().entries().next()})));if(k)q=r.getConstructor(t,e,o,a),k3e.enable();else if(RH(e,!0)){var B=new q,Y=B[a](u?{}:-0,1)!==B,de=MM(function(){B.has(1)}),pe=z3e(function(H){new m(H)}),Z=!u&&MM(function(){for(var H=new m,J=5;J--;)H[a](J,J);return!H.has(-0)});pe||(q=t(function(H,J){D3e(H,x);var ve=B3e(new m,H,q);return F3e(J)||R3e(J,ve[a],{that:ve,AS_ENTRIES:o}),ve}),q.prototype=x,x.constructor=q),(de||Z)&&(I("delete"),I("has"),o&&I("get")),(Z||Y)&&I(a),u&&x.clear&&delete x.clear}return T[e]=q,C3e({global:!0,constructor:!0,forced:q!==m},T),N3e(q,e),u||r.setStrong(q,e,o),q}});var kM=b((rRt,UH)=>{"use strict";var LH=pi(),U3e=jr(),FH=Po(),j3e=Ar(),V3e=zn(),$3e=Ei(),W3e=ri(),G3e=l1(),D1=Xi(),K3e=fc(),ay=wt(),zH=_c().fastKey,BH=pr(),NH=BH.set,OM=BH.getterFor;UH.exports={getConstructor:function(e,t,r,o){var u=e(function(T,I){V3e(T,a),NH(T,{type:t,index:LH(null),first:null,last:null,size:0}),ay||(T.size=0),$3e(I)||W3e(I,T[o],{that:T,AS_ENTRIES:r})}),a=u.prototype,m=OM(t),x=function(T,I,k){var B=m(T),Y=q(T,I),de,pe;return Y?Y.value=k:(B.last=Y={index:pe=zH(I,!0),key:I,value:k,previous:de=B.last,next:null,removed:!1},B.first||(B.first=Y),de&&(de.next=Y),ay?B.size++:T.size++,pe!=="F"&&(B.index[pe]=Y)),T},q=function(T,I){var k=m(T),B=zH(I),Y;if(B!=="F")return k.index[B];for(Y=k.first;Y;Y=Y.next)if(Y.key===I)return Y};return FH(a,{clear:function(){for(var I=this,k=m(I),B=k.first;B;)B.removed=!0,B.previous&&(B.previous=B.previous.next=null),B=B.next;k.first=k.last=null,k.index=LH(null),ay?k.size=0:I.size=0},delete:function(T){var I=this,k=m(I),B=q(I,T);if(B){var Y=B.next,de=B.previous;delete k.index[B.index],B.removed=!0,de&&(de.next=Y),Y&&(Y.previous=de),k.first===B&&(k.first=Y),k.last===B&&(k.last=de),ay?k.size--:I.size--}return!!B},forEach:function(I){for(var k=m(this),B=j3e(I,arguments.length>1?arguments[1]:void 0),Y;Y=Y?Y.next:k.first;)for(B(Y.value,Y.key,this);Y&&Y.removed;)Y=Y.previous},has:function(I){return!!q(this,I)}}),FH(a,r?{get:function(I){var k=q(this,I);return k&&k.value},set:function(I,k){return x(this,I===0?0:I,k)}}:{add:function(I){return x(this,I=I===0?0:I,I)}}),ay&&U3e(a,"size",{configurable:!0,get:function(){return m(this).size}}),u},setStrong:function(e,t,r){var o=t+" Iterator",u=OM(t),a=OM(o);G3e(e,t,function(m,x){NH(this,{type:o,target:m,state:u(m),kind:x,last:null})},function(){for(var m=a(this),x=m.kind,q=m.last;q&&q.removed;)q=q.previous;return!m.target||!(m.last=q=q?q.next:m.state.first)?(m.target=null,D1(void 0,!0)):D1(x==="keys"?q.key:x==="values"?q.value:[q.key,q.value],!1)},r?"entries":"values",!r,!0),K3e(t)}}});var jH=b(()=>{"use strict";var H3e=ny(),Z3e=kM();H3e("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Z3e)});var L1=b(()=>{"use strict";jH()});var Li=b((sRt,VH)=>{"use strict";var F1=Re(),oy=Map.prototype;VH.exports={Map,set:F1(oy.set),get:F1(oy.get),has:F1(oy.has),remove:F1(oy.delete),proto:oy}});var RM=b(()=>{"use strict";var X3e=$(),J3e=Re(),Y3e=Mt(),Q3e=zr(),eUe=ri(),z1=Li(),$H=Kt(),tUe=ze(),WH=z1.Map,rUe=z1.has,iUe=z1.get,nUe=z1.set,aUe=J3e([].push),oUe=$H||tUe(function(){return WH.groupBy("ab",function(e){return e}).get("a").length!==1});X3e({target:"Map",stat:!0,forced:$H||oUe},{groupBy:function(t,r){Q3e(t),Y3e(r);var o=new WH,u=0;return eUe(t,function(a){var m=r(a,u++);rUe(o,m)?aUe(iUe(o,m),a):nUe(o,m,[a])}),o}})});var DM=b((cRt,GH)=>{"use strict";var sUe=Math.log;GH.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:sUe(1+r)}});var HH=b(()=>{"use strict";var uUe=$(),lUe=DM(),LM=Math.acosh,cUe=Math.log,KH=Math.sqrt,hUe=Math.LN2,fUe=!LM||Math.floor(LM(Number.MAX_VALUE))!==710||LM(1/0)!==1/0;uUe({target:"Math",stat:!0,forced:fUe},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?cUe(r)+hUe:lUe(r-1+KH(r-1)*KH(r+1))}})});var JH=b(()=>{"use strict";var dUe=$(),ZH=Math.asinh,pUe=Math.log,mUe=Math.sqrt;function XH(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-XH(-t):pUe(t+mUe(t*t+1))}var vUe=!(ZH&&1/ZH(0)>0);dUe({target:"Math",stat:!0,forced:vUe},{asinh:XH})});var QH=b(()=>{"use strict";var gUe=$(),YH=Math.atanh,yUe=Math.log,_Ue=!(YH&&1/YH(-0)<0);gUe({target:"Math",stat:!0,forced:_Ue},{atanh:function(t){var r=+t;return r===0?r:yUe((1+r)/(1-r))/2}})});var e9=b(()=>{"use strict";var xUe=$(),bUe=v1(),wUe=Math.abs,SUe=Math.pow;xUe({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return bUe(r)*SUe(wUe(r),1/3)}})});var t9=b(()=>{"use strict";var qUe=$(),AUe=Math.floor,EUe=Math.log,TUe=Math.LOG2E;qUe({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-AUe(EUe(r+.5)*TUe):32}})});var uy=b((bRt,r9)=>{"use strict";var sy=Math.expm1,IUe=Math.exp;r9.exports=!sy||sy(10)>22025.465794806718||sy(10)<22025.465794806718||sy(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:IUe(r)-1}:sy});var n9=b(()=>{"use strict";var CUe=$(),PUe=uy(),i9=Math.cosh,MUe=Math.abs,FM=Math.E,OUe=!i9||i9(710)===1/0;CUe({target:"Math",stat:!0,forced:OUe},{cosh:function(t){var r=PUe(MUe(t)-1)+1;return(r+1/(r*FM*FM))*(FM/2)}})});var o9=b(()=>{"use strict";var kUe=$(),a9=uy();kUe({target:"Math",stat:!0,forced:a9!==Math.expm1},{expm1:a9})});var s9=b(()=>{"use strict";var RUe=$(),DUe=g1();RUe({target:"Math",stat:!0},{fround:DUe})});var l9=b(()=>{"use strict";var LUe=$(),u9=Math.hypot,FUe=Math.abs,zUe=Math.sqrt,NUe=!!u9&&u9(1/0,NaN)!==1/0;LUe({target:"Math",stat:!0,arity:2,forced:NUe},{hypot:function(t,r){for(var o=0,u=0,a=arguments.length,m=0,x,q;u<a;)x=FUe(arguments[u++]),m<x?(q=m/x,o=o*q*q+1,m=x):x>0?(q=x/m,o+=q*q):o+=x;return m===1/0?1/0:m*zUe(o)}})});var h9=b(()=>{"use strict";var BUe=$(),UUe=ze(),c9=Math.imul,jUe=UUe(function(){return c9(4294967295,5)!==-5||c9.length!==2});BUe({target:"Math",stat:!0,forced:jUe},{imul:function(t,r){var o=65535,u=+t,a=+r,m=o&u,x=o&a;return 0|m*x+((o&u>>>16)*x+m*(o&a>>>16)<<16>>>0)}})});var zM=b((ORt,f9)=>{"use strict";var VUe=Math.log,$Ue=Math.LOG10E;f9.exports=Math.log10||function(t){return VUe(t)*$Ue}});var d9=b(()=>{"use strict";var WUe=$(),GUe=zM();WUe({target:"Math",stat:!0},{log10:GUe})});var p9=b(()=>{"use strict";var KUe=$(),HUe=DM();KUe({target:"Math",stat:!0},{log1p:HUe})});var m9=b(()=>{"use strict";var ZUe=$(),XUe=Math.log,JUe=Math.LN2;ZUe({target:"Math",stat:!0},{log2:function(t){return XUe(t)/JUe}})});var v9=b(()=>{"use strict";var YUe=$(),QUe=v1();YUe({target:"Math",stat:!0},{sign:QUe})});var _9=b(()=>{"use strict";var e4e=$(),t4e=ze(),g9=uy(),r4e=Math.abs,y9=Math.exp,i4e=Math.E,n4e=t4e(function(){return Math.sinh(-2e-17)!==-2e-17});e4e({target:"Math",stat:!0,forced:n4e},{sinh:function(t){var r=+t;return r4e(r)<1?(g9(r)-g9(-r))/2:(y9(r-1)-y9(-r-1))*(i4e/2)}})});var w9=b(()=>{"use strict";var a4e=$(),x9=uy(),b9=Math.exp;a4e({target:"Math",stat:!0},{tanh:function(t){var r=+t,o=x9(r),u=x9(-r);return o===1/0?1:u===1/0?-1:(o-u)/(b9(r)+b9(-r))}})});var S9=b(()=>{"use strict";var o4e=ea();o4e(Math,"Math",!0)});var q9=b(()=>{"use strict";var s4e=$(),u4e=G2();s4e({target:"Math",stat:!0},{trunc:u4e})});var ly=b((ZRt,A9)=>{"use strict";var l4e=Re();A9.exports=l4e(1 .valueOf)});var Bh=b((XRt,E9)=>{"use strict";E9.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Uh=b((JRt,I9)=>{"use strict";var c4e=Re(),h4e=zr(),f4e=zt(),BM=Bh(),T9=c4e("".replace),d4e=RegExp("^["+BM+"]+"),p4e=RegExp("(^|[^"+BM+"])["+BM+"]+$"),NM=function(e){return function(t){var r=f4e(h4e(t));return e&1&&(r=T9(r,d4e,"")),e&2&&(r=T9(r,p4e,"$1")),r}};I9.exports={start:NM(1),end:NM(2),trim:NM(3)}});var D9=b(()=>{"use strict";var m4e=$(),UM=Kt(),v4e=wt(),M9=Xe(),jM=jb(),O9=Re(),g4e=Gd(),C9=$t(),y4e=sc(),_4e=mn(),x4e=Pu(),k9=Eg(),b4e=ze(),w4e=nc().f,S4e=Hi().f,q4e=Dr().f,A4e=ly(),E4e=Uh().trim,cy="Number",sp=M9[cy],P9=jM[cy],VM=sp.prototype,T4e=M9.TypeError,I4e=O9("".slice),N1=O9("".charCodeAt),C4e=function(e){var t=k9(e,"number");return typeof t=="bigint"?t:P4e(t)},P4e=function(e){var t=k9(e,"number"),r,o,u,a,m,x,q,T;if(x4e(t))throw new T4e("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=E4e(t),r=N1(t,0),r===43||r===45){if(o=N1(t,2),o===88||o===120)return NaN}else if(r===48){switch(N1(t,1)){case 66:case 98:u=2,a=49;break;case 79:case 111:u=8,a=55;break;default:return+t;}for(m=I4e(t,2),x=m.length,q=0;q<x;q++)if(T=N1(m,q),T<48||T>a)return NaN;return parseInt(m,u)}}return+t},$M=g4e(cy,!sp(" 0o1")||!sp("0b1")||sp("+0x1")),M4e=function(e){return _4e(VM,e)&&b4e(function(){A4e(e)})},B1=function(t){var r=arguments.length<1?0:sp(C4e(t));return M4e(this)?y4e(Object(r),this,B1):r};B1.prototype=VM;$M&&!UM&&(VM.constructor=B1);m4e({global:!0,constructor:!0,wrap:!0,forced:$M},{Number:B1});var R9=function(e,t){for(var r=v4e?w4e(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0,u;r.length>o;o++)C9(t,u=r[o])&&!C9(e,u)&&q4e(e,u,S4e(t,u))};UM&&P9&&R9(jM[cy],P9);($M||UM)&&R9(jM[cy],sp)});var L9=b(()=>{"use strict";var O4e=$();O4e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var WM=b((rDt,F9)=>{"use strict";var k4e=Xe(),R4e=k4e.isFinite;F9.exports=Number.isFinite||function(t){return typeof t=="number"&&R4e(t)}});var z9=b(()=>{"use strict";var D4e=$(),L4e=WM();D4e({target:"Number",stat:!0},{isFinite:L4e})});var U1=b((aDt,N9)=>{"use strict";var F4e=Dt(),z4e=Math.floor;N9.exports=Number.isInteger||function(t){return!F4e(t)&&isFinite(t)&&z4e(t)===t}});var B9=b(()=>{"use strict";var N4e=$(),B4e=U1();N4e({target:"Number",stat:!0},{isInteger:B4e})});var U9=b(()=>{"use strict";var U4e=$();U4e({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var j9=b(()=>{"use strict";var j4e=$(),V4e=U1(),$4e=Math.abs;j4e({target:"Number",stat:!0},{isSafeInteger:function(t){return V4e(t)&&$4e(t)<=9007199254740991}})});var V9=b(()=>{"use strict";var W4e=$();W4e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var $9=b(()=>{"use strict";var G4e=$();G4e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var GM=b((vDt,H9)=>{"use strict";var K9=Xe(),K4e=ze(),H4e=Re(),Z4e=zt(),X4e=Uh().trim,J4e=Bh(),Y4e=H4e("".charAt),j1=K9.parseFloat,W9=K9.Symbol,G9=W9&&W9.iterator,Q4e=1/j1(J4e+"-0")!==-1/0||G9&&!K4e(function(){j1(Object(G9))});H9.exports=Q4e?function(t){var r=X4e(Z4e(t)),o=j1(r);return o===0&&Y4e(r,0)==="-"?-0:o}:j1});var X9=b(()=>{"use strict";var e5e=$(),Z9=GM();e5e({target:"Number",stat:!0,forced:Number.parseFloat!==Z9},{parseFloat:Z9})});var KM=b((_Dt,rZ)=>{"use strict";var eZ=Xe(),t5e=ze(),r5e=Re(),i5e=zt(),n5e=Uh().trim,J9=Bh(),hy=eZ.parseInt,Y9=eZ.Symbol,Q9=Y9&&Y9.iterator,tZ=/^[+-]?0x/i,a5e=r5e(tZ.exec),o5e=hy(J9+"08")!==8||hy(J9+"0x16")!==22||Q9&&!t5e(function(){hy(Object(Q9))});rZ.exports=o5e?function(t,r){var o=n5e(i5e(t));return hy(o,r>>>0||(a5e(tZ,o)?16:10))}:hy});var nZ=b(()=>{"use strict";var s5e=$(),iZ=KM();s5e({target:"Number",stat:!0,forced:Number.parseInt!==iZ},{parseInt:iZ})});var lZ=b(()=>{"use strict";var u5e=$(),ZM=Re(),l5e=Ur(),c5e=ly(),h5e=ey(),f5e=zM(),HM=ze(),d5e=RangeError,aZ=String,p5e=isFinite,m5e=Math.abs,v5e=Math.floor,oZ=Math.pow,g5e=Math.round,Bs=ZM(1 .toExponential),y5e=ZM(h5e),sZ=ZM("".slice),uZ=Bs(-69e-12,4)==="-6.9000e-11"&&Bs(1.255,2)==="1.25e+0"&&Bs(12345,3)==="1.235e+4"&&Bs(25,0)==="3e+1",_5e=function(){return HM(function(){Bs(1,1/0)})&&HM(function(){Bs(1,-1/0)})},x5e=function(){return!HM(function(){Bs(1/0,1/0),Bs(NaN,1/0)})},b5e=!uZ||!_5e()||!x5e();u5e({target:"Number",proto:!0,forced:b5e},{toExponential:function(t){var r=c5e(this);if(t===void 0)return Bs(r);var o=l5e(t);if(!p5e(r))return String(r);if(o<0||o>20)throw new d5e("Incorrect fraction digits");if(uZ)return Bs(r,o);var u="",a,m,x,q;if(r<0&&(u="-",r=-r),r===0)m=0,a=y5e("0",o+1);else{var T=f5e(r);m=v5e(T);var I=oZ(10,m-o),k=g5e(r/I);2*r>=(2*k+1)*I&&(k+=1),k>=oZ(10,o+1)&&(k/=10,m+=1),a=aZ(k)}return o!==0&&(a=sZ(a,0,1)+"."+sZ(a,1)),m===0?(x="+",q="0"):(x=m>0?"+":"-",q=aZ(m5e(m))),a+="e"+x+q,u+a}})});var mZ=b(()=>{"use strict";var w5e=$(),YM=Re(),S5e=Ur(),q5e=ly(),A5e=ey(),cZ=ze(),E5e=RangeError,dZ=String,pZ=Math.floor,JM=YM(A5e),hZ=YM("".slice),fy=YM(1 .toFixed),lp=function(e,t,r){return t===0?r:t%2===1?lp(e,t-1,r*e):lp(e*e,t/2,r)},T5e=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},up=function(e,t,r){for(var o=-1,u=r;++o<6;)u+=t*e[o],e[o]=u%1e7,u=pZ(u/1e7)},XM=function(e,t){for(var r=6,o=0;--r>=0;)o+=e[r],e[r]=pZ(o/t),o=o%t*1e7},fZ=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var o=dZ(e[t]);r=r===""?o:r+JM("0",7-o.length)+o}return r},I5e=cZ(function(){return fy(8e-5,3)!=="0.000"||fy(.9,0)!=="1"||fy(1.255,2)!=="1.25"||fy(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!cZ(function(){fy({})});w5e({target:"Number",proto:!0,forced:I5e},{toFixed:function(t){var r=q5e(this),o=S5e(t),u=[0,0,0,0,0,0],a="",m="0",x,q,T,I;if(o<0||o>20)throw new E5e("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return dZ(r);if(r<0&&(a="-",r=-r),r>1e-21)if(x=T5e(r*lp(2,69,1))-69,q=x<0?r*lp(2,-x,1):r/lp(2,x,1),q*=4503599627370496,x=52-x,x>0){for(up(u,0,q),T=o;T>=7;)up(u,1e7,0),T-=7;for(up(u,lp(10,T,1),0),T=x-1;T>=23;)XM(u,1<<23),T-=23;XM(u,1<<T),up(u,1,1),XM(u,2),m=fZ(u)}else up(u,0,q),up(u,1<<-x,0),m=fZ(u)+JM("0",o);return o>0?(I=m.length,m=a+(I<=o?"0."+JM("0",o-I)+m:hZ(m,0,I-o)+"."+hZ(m,I-o))):m=a+m,m}})});var yZ=b(()=>{"use strict";var C5e=$(),P5e=Re(),vZ=ze(),gZ=ly(),V1=P5e(1 .toPrecision),M5e=vZ(function(){return V1(1,void 0)!=="1"})||!vZ(function(){V1({})});C5e({target:"Number",proto:!0,forced:M5e},{toPrecision:function(t){return t===void 0?V1(gZ(this)):V1(gZ(this),t)}})});var eO=b((IDt,bZ)=>{"use strict";var _Z=wt(),O5e=Re(),k5e=tt(),R5e=ze(),QM=Ch(),D5e=Og(),L5e=qg(),F5e=Ht(),z5e=Cu(),cp=Object.assign,xZ=Object.defineProperty,N5e=O5e([].concat);bZ.exports=!cp||R5e(function(){if(_Z&&cp({b:1},cp(xZ({},"a",{enumerable:!0,get:function(){xZ(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach(function(u){t[u]=u}),cp({},e)[r]!==7||QM(cp({},t)).join("")!==o})?function(t,r){for(var o=F5e(t),u=arguments.length,a=1,m=D5e.f,x=L5e.f;u>a;)for(var q=z5e(arguments[a++]),T=m?N5e(QM(q),m(q)):QM(q),I=T.length,k=0,B;I>k;)B=T[k++],(!_Z||k5e(x,q,B))&&(o[B]=q[B]);return o}:cp});var SZ=b(()=>{"use strict";var B5e=$(),wZ=eO();B5e({target:"Object",stat:!0,arity:2,forced:Object.assign!==wZ},{assign:wZ})});var qZ=b(()=>{"use strict";var U5e=$(),j5e=wt(),V5e=pi();U5e({target:"Object",stat:!0,sham:!j5e},{create:V5e})});var dy=b((kDt,EZ)=>{"use strict";var $5e=Kt(),W5e=Xe(),G5e=ze(),AZ=p1();EZ.exports=$5e||!G5e(function(){if(!(AZ&&AZ<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete W5e[e]}})});var TZ=b(()=>{"use strict";var K5e=$(),H5e=wt(),Z5e=dy(),X5e=Mt(),J5e=Ht(),Y5e=Dr();H5e&&K5e({target:"Object",proto:!0,forced:Z5e},{__defineGetter__:function(t,r){Y5e.f(J5e(this),t,{get:X5e(r),enumerable:!0,configurable:!0})}})});var CZ=b(()=>{"use strict";var Q5e=$(),eje=wt(),IZ=zb().f;Q5e({target:"Object",stat:!0,forced:Object.defineProperties!==IZ,sham:!eje},{defineProperties:IZ})});var MZ=b(()=>{"use strict";var tje=$(),rje=wt(),PZ=Dr().f;tje({target:"Object",stat:!0,forced:Object.defineProperty!==PZ,sham:!rje},{defineProperty:PZ})});var OZ=b(()=>{"use strict";var ije=$(),nje=wt(),aje=dy(),oje=Mt(),sje=Ht(),uje=Dr();nje&&ije({target:"Object",proto:!0,forced:aje},{__defineSetter__:function(t,r){uje.f(sje(this),t,{set:oje(r),enumerable:!0,configurable:!0})}})});var tO=b((jDt,FZ)=>{"use strict";var RZ=wt(),lje=ze(),DZ=Re(),cje=Ci(),hje=Ch(),fje=Ti(),dje=qg().f,LZ=DZ(dje),pje=DZ([].push),mje=RZ&&lje(function(){var e=Object.create(null);return e[2]=2,!LZ(e,2)}),kZ=function(e){return function(t){for(var r=fje(t),o=hje(r),u=mje&&cje(r)===null,a=o.length,m=0,x=[],q;a>m;)q=o[m++],(!RZ||(u?q in r:LZ(r,q)))&&pje(x,e?[q,r[q]]:r[q]);return x}};FZ.exports={entries:kZ(!0),values:kZ(!1)}});var zZ=b(()=>{"use strict";var vje=$(),gje=tO().entries;vje({target:"Object",stat:!0},{entries:function(t){return gje(t)}})});var NZ=b(()=>{"use strict";var yje=$(),_je=ju(),xje=ze(),bje=Dt(),wje=_c().onFreeze,rO=Object.freeze,Sje=xje(function(){rO(1)});yje({target:"Object",stat:!0,forced:Sje,sham:!_je},{freeze:function(t){return rO&&bje(t)?rO(wje(t)):t}})});var BZ=b(()=>{"use strict";var qje=$(),Aje=ri(),Eje=Io();qje({target:"Object",stat:!0},{fromEntries:function(t){var r={};return Aje(t,function(o,u){Eje(r,o,u)},{AS_ENTRIES:!0}),r}})});var VZ=b(()=>{"use strict";var Tje=$(),Ije=ze(),Cje=Ti(),UZ=Hi().f,jZ=wt(),Pje=!jZ||Ije(function(){UZ(1)});Tje({target:"Object",stat:!0,forced:Pje,sham:!jZ},{getOwnPropertyDescriptor:function(t,r){return UZ(Cje(t),r)}})});var $Z=b(()=>{"use strict";var Mje=$(),Oje=wt(),kje=Rb(),Rje=Ti(),Dje=Hi(),Lje=Io();Mje({target:"Object",stat:!0,sham:!Oje},{getOwnPropertyDescriptors:function(t){for(var r=Rje(t),o=Dje.f,u=kje(r),a={},m=0,x,q;u.length>m;)q=o(r,x=u[m++]),q!==void 0&&Lje(a,x,q);return a}})});var WZ=b(()=>{"use strict";var Fje=$(),zje=ze(),Nje=Ub().f,Bje=zje(function(){return!Object.getOwnPropertyNames(1)});Fje({target:"Object",stat:!0,forced:Bje},{getOwnPropertyNames:Nje})});var KZ=b(()=>{"use strict";var Uje=$(),jje=ze(),Vje=Ht(),GZ=Ci(),$je=e1(),Wje=jje(function(){GZ(1)});Uje({target:"Object",stat:!0,forced:Wje,sham:!$je},{getPrototypeOf:function(t){return GZ(Vje(t))}})});var iO=b(()=>{"use strict";var Gje=$(),Kje=Ot(),Hje=Re(),Zje=Mt(),Xje=zr(),Jje=Rs(),Yje=ri(),Qje=ze(),HZ=Object.groupBy,e6e=Kje("Object","create"),t6e=Hje([].push),r6e=!HZ||Qje(function(){return HZ("ab",function(e){return e}).a.length!==1});Gje({target:"Object",stat:!0,forced:r6e},{groupBy:function(t,r){Xje(t),Zje(r);var o=e6e(null),u=0;return Yje(t,function(a){var m=Jje(r(a,u++));m in o?t6e(o[m],a):o[m]=[a]}),o}})});var nO=b(()=>{"use strict";var i6e=$(),n6e=$t();i6e({target:"Object",stat:!0},{hasOwn:n6e})});var aO=b((sLt,ZZ)=>{"use strict";ZZ.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var XZ=b(()=>{"use strict";var a6e=$(),o6e=aO();a6e({target:"Object",stat:!0},{is:o6e})});var YZ=b(()=>{"use strict";var s6e=$(),JZ=R1();s6e({target:"Object",stat:!0,forced:Object.isExtensible!==JZ},{isExtensible:JZ})});var eX=b(()=>{"use strict";var u6e=$(),l6e=ze(),c6e=Dt(),h6e=pn(),QZ=O1(),oO=Object.isFrozen,f6e=QZ||l6e(function(){oO(1)});u6e({target:"Object",stat:!0,forced:f6e},{isFrozen:function(t){return!c6e(t)||QZ&&h6e(t)==="ArrayBuffer"?!0:oO?oO(t):!1}})});var rX=b(()=>{"use strict";var d6e=$(),p6e=ze(),m6e=Dt(),v6e=pn(),tX=O1(),sO=Object.isSealed,g6e=tX||p6e(function(){sO(1)});d6e({target:"Object",stat:!0,forced:g6e},{isSealed:function(t){return!m6e(t)||tX&&v6e(t)==="ArrayBuffer"?!0:sO?sO(t):!1}})});var nX=b(()=>{"use strict";var y6e=$(),_6e=Ht(),iX=Ch(),x6e=ze(),b6e=x6e(function(){iX(1)});y6e({target:"Object",stat:!0,forced:b6e},{keys:function(t){return iX(_6e(t))}})});var aX=b(()=>{"use strict";var w6e=$(),S6e=wt(),q6e=dy(),A6e=Ht(),E6e=Rs(),T6e=Ci(),I6e=Hi().f;S6e&&w6e({target:"Object",proto:!0,forced:q6e},{__lookupGetter__:function(t){var r=A6e(this),o=E6e(t),u;do if(u=I6e(r,o))return u.get;while(r=T6e(r))}})});var oX=b(()=>{"use strict";var C6e=$(),P6e=wt(),M6e=dy(),O6e=Ht(),k6e=Rs(),R6e=Ci(),D6e=Hi().f;P6e&&C6e({target:"Object",proto:!0,forced:M6e},{__lookupSetter__:function(t){var r=O6e(this),o=k6e(t),u;do if(u=D6e(r,o))return u.set;while(r=R6e(r))}})});var sX=b(()=>{"use strict";var L6e=$(),F6e=Dt(),z6e=_c().onFreeze,N6e=ju(),B6e=ze(),uO=Object.preventExtensions,U6e=B6e(function(){uO(1)});L6e({target:"Object",stat:!0,forced:U6e,sham:!N6e},{preventExtensions:function(t){return uO&&F6e(t)?uO(z6e(t)):t}})});var fX=b(()=>{"use strict";var j6e=wt(),V6e=jr(),$6e=Dt(),W6e=_C(),G6e=Ht(),K6e=zr(),uX=Object.getPrototypeOf,lX=Object.setPrototypeOf,cX=Object.prototype,hX="__proto__";if(j6e&&uX&&lX&&!(hX in cX))try{V6e(cX,hX,{configurable:!0,get:function(){return uX(G6e(this))},set:function(t){var r=K6e(this);W6e(t)&&$6e(r)&&lX(r,t)}})}catch(e){}});var dX=b(()=>{"use strict";var H6e=$(),Z6e=Dt(),X6e=_c().onFreeze,J6e=ju(),Y6e=ze(),lO=Object.seal,Q6e=Y6e(function(){lO(1)});H6e({target:"Object",stat:!0,forced:Q6e,sham:!J6e},{seal:function(t){return lO&&Z6e(t)?lO(X6e(t)):t}})});var pX=b(()=>{"use strict";var eVe=$(),tVe=To();eVe({target:"Object",stat:!0},{setPrototypeOf:tVe})});var vX=b((PLt,mX)=>{"use strict";var rVe=Lb(),iVe=Sa();mX.exports=rVe?{}.toString:function(){return"[object "+iVe(this)+"]"}});var gX=b(()=>{"use strict";var nVe=Lb(),aVe=yr(),oVe=vX();nVe||aVe(Object.prototype,"toString",oVe,{unsafe:!0})});var yX=b(()=>{"use strict";var sVe=$(),uVe=tO().values;sVe({target:"Object",stat:!0},{values:function(t){return uVe(t)}})});var xX=b(()=>{"use strict";var lVe=$(),_X=GM();lVe({global:!0,forced:parseFloat!==_X},{parseFloat:_X})});var wX=b(()=>{"use strict";var cVe=$(),bX=KM();cVe({global:!0,forced:parseInt!==bX},{parseInt:bX})});var py=b((NLt,SX)=>{"use strict";var hVe=os(),fVe=rc(),dVe=TypeError;SX.exports=function(e){if(hVe(e))return e;throw new dVe(fVe(e)+" is not a constructor")}});var my=b((BLt,AX)=>{"use strict";var qX=Qe(),pVe=py(),mVe=Ei(),vVe=Et(),gVe=vVe("species");AX.exports=function(e,t){var r=qX(e).constructor,o;return r===void 0||mVe(o=qX(r)[gVe])?t:pVe(o)}});var ro=b((ULt,EX)=>{"use strict";var yVe=TypeError;EX.exports=function(e,t){if(e<t)throw new yVe("Not enough arguments");return e}});var cO=b((jLt,TX)=>{"use strict";var _Ve=ts();TX.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(_Ve)});var yy=b((VLt,LX)=>{"use strict";var io=Xe(),xVe=Fn(),bVe=Ar(),IX=jt(),wVe=$t(),DX=ze(),CX=Z2(),SVe=qa(),PX=Tg(),qVe=ro(),AVe=cO(),EVe=Fh(),vO=io.setImmediate,gO=io.clearImmediate,TVe=io.process,hO=io.Dispatch,IVe=io.Function,MX=io.MessageChannel,CVe=io.String,fO=0,vy={},OX="onreadystatechange",gy,jh,dO,pO;DX(function(){gy=io.location});var yO=function(e){if(wVe(vy,e)){var t=vy[e];delete vy[e],t()}},mO=function(e){return function(){yO(e)}},kX=function(e){yO(e.data)},RX=function(e){io.postMessage(CVe(e),gy.protocol+"//"+gy.host)};(!vO||!gO)&&(vO=function(t){qVe(arguments.length,1);var r=IX(t)?t:IVe(t),o=SVe(arguments,1);return vy[++fO]=function(){xVe(r,void 0,o)},jh(fO),fO},gO=function(t){delete vy[t]},EVe?jh=function(e){TVe.nextTick(mO(e))}:hO&&hO.now?jh=function(e){hO.now(mO(e))}:MX&&!AVe?(dO=new MX,pO=dO.port2,dO.port1.onmessage=kX,jh=bVe(pO.postMessage,pO)):io.addEventListener&&IX(io.postMessage)&&!io.importScripts&&gy&&gy.protocol!=="file:"&&!DX(RX)?(jh=RX,io.addEventListener("message",kX,!1)):OX in PX("script")?jh=function(e){CX.appendChild(PX("script"))[OX]=function(){CX.removeChild(this),yO(e)}}:jh=function(e){setTimeout(mO(e),0)});LX.exports={set:vO,clear:gO}});var _O=b(($Lt,zX)=>{"use strict";var FX=Xe(),PVe=wt(),MVe=Object.getOwnPropertyDescriptor;zX.exports=function(e){if(!PVe)return FX[e];var t=MVe(FX,e);return t&&t.value}});var xO=b((WLt,BX)=>{"use strict";var NX=function(){this.head=null,this.tail=null};NX.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};BX.exports=NX});var jX=b((GLt,UX)=>{"use strict";var OVe=ts();UX.exports=/ipad|iphone|ipod/i.test(OVe)&&typeof Pebble!="undefined"});var $X=b((KLt,VX)=>{"use strict";var kVe=ts();VX.exports=/web0s(?!.*chrome)/i.test(kVe)});var EO=b((HLt,XX)=>{"use strict";var fp=Xe(),RVe=_O(),WX=Ar(),bO=yy().set,DVe=xO(),LVe=cO(),FVe=jX(),zVe=$X(),wO=Fh(),GX=fp.MutationObserver||fp.WebKitMutationObserver,KX=fp.document,HX=fp.process,$1=fp.Promise,AO=RVe("queueMicrotask"),hp,SO,qO,W1,ZX;AO||(_y=new DVe,xy=function(){var e,t;for(wO&&(e=HX.domain)&&e.exit();t=_y.get();)try{t()}catch(r){throw _y.head&&hp(),r}e&&e.enter()},!LVe&&!wO&&!zVe&&GX&&KX?(SO=!0,qO=KX.createTextNode(""),new GX(xy).observe(qO,{characterData:!0}),hp=function(){qO.data=SO=!SO}):!FVe&&$1&&$1.resolve?(W1=$1.resolve(void 0),W1.constructor=$1,ZX=WX(W1.then,W1),hp=function(){ZX(xy)}):wO?hp=function(){HX.nextTick(xy)}:(bO=WX(bO,fp),hp=function(){bO(xy)}),AO=function(e){_y.head||hp(),_y.add(e)});var _y,xy;XX.exports=AO});var TO=b((ZLt,JX)=>{"use strict";JX.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var xc=b((XLt,YX)=>{"use strict";YX.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var Vh=b((JLt,QX)=>{"use strict";var NVe=Xe();QX.exports=NVe.Promise});var dp=b((YLt,iJ)=>{"use strict";var BVe=Xe(),by=Vh(),UVe=jt(),jVe=Gd(),VVe=Ig(),$Ve=Et(),eJ=Xg(),WVe=Kt(),IO=ks(),tJ=by&&by.prototype,GVe=$Ve("species"),CO=!1,rJ=UVe(BVe.PromiseRejectionEvent),KVe=jVe("Promise",function(){var e=VVe(by),t=e!==String(by);if(!t&&IO===66||WVe&&!(tJ.catch&&tJ.finally))return!0;if(!IO||IO<51||!/native code/.test(e)){var r=new by(function(a){a(1)}),o=function(a){a(function(){},function(){})},u=r.constructor={};if(u[GVe]=o,CO=r.then(function(){})instanceof o,!CO)return!0}return!t&&(eJ==="BROWSER"||eJ==="DENO")&&!rJ});iJ.exports={CONSTRUCTOR:KVe,REJECTION_EVENT:rJ,SUBCLASSING:CO}});var Us=b((QLt,aJ)=>{"use strict";var nJ=Mt(),HVe=TypeError,ZVe=function(e){var t,r;this.promise=new e(function(o,u){if(t!==void 0||r!==void 0)throw new HVe("Bad Promise constructor");t=o,r=u}),this.resolve=nJ(t),this.reject=nJ(r)};aJ.exports.f=function(e){return new ZVe(e)}});var qJ=b(()=>{"use strict";var XVe=$(),JVe=Kt(),Z1=Fh(),bc=Xe(),gp=tt(),oJ=yr(),sJ=To(),YVe=ea(),QVe=fc(),e8e=Mt(),H1=jt(),t8e=Dt(),r8e=zn(),i8e=my(),fJ=yy().set,RO=EO(),n8e=TO(),a8e=xc(),o8e=xO(),dJ=pr(),X1=Vh(),DO=dp(),pJ=Us(),J1="Promise",mJ=DO.CONSTRUCTOR,s8e=DO.REJECTION_EVENT,u8e=DO.SUBCLASSING,PO=dJ.getterFor(J1),l8e=dJ.set,pp=X1&&X1.prototype,$h=X1,G1=pp,vJ=bc.TypeError,MO=bc.document,LO=bc.process,OO=pJ.f,c8e=OO,h8e=!!(MO&&MO.createEvent&&bc.dispatchEvent),gJ="unhandledrejection",f8e="rejectionhandled",uJ=0,yJ=1,d8e=2,FO=1,_J=2,K1,lJ,p8e,cJ,xJ=function(e){var t;return t8e(e)&&H1(t=e.then)?t:!1},bJ=function(e,t){var r=t.value,o=t.state===yJ,u=o?e.ok:e.fail,a=e.resolve,m=e.reject,x=e.domain,q,T,I;try{u?(o||(t.rejection===_J&&v8e(t),t.rejection=FO),u===!0?q=r:(x&&x.enter(),q=u(r),x&&(x.exit(),I=!0)),q===e.promise?m(new vJ("Promise-chain cycle")):(T=xJ(q))?gp(T,q,a,m):a(q)):m(r)}catch(k){x&&!I&&x.exit(),m(k)}},wJ=function(e,t){e.notified||(e.notified=!0,RO(function(){for(var r=e.reactions,o;o=r.get();)bJ(o,e);e.notified=!1,t&&!e.rejection&&m8e(e)}))},SJ=function(e,t,r){var o,u;h8e?(o=MO.createEvent("Event"),o.promise=t,o.reason=r,o.initEvent(e,!1,!0),bc.dispatchEvent(o)):o={promise:t,reason:r},!s8e&&(u=bc["on"+e])?u(o):e===gJ&&n8e("Unhandled promise rejection",r)},m8e=function(e){gp(fJ,bc,function(){var t=e.facade,r=e.value,o=hJ(e),u;if(o&&(u=a8e(function(){Z1?LO.emit("unhandledRejection",r,t):SJ(gJ,t,r)}),e.rejection=Z1||hJ(e)?_J:FO,u.error))throw u.value})},hJ=function(e){return e.rejection!==FO&&!e.parent},v8e=function(e){gp(fJ,bc,function(){var t=e.facade;Z1?LO.emit("rejectionHandled",t):SJ(f8e,t,e.value)})},mp=function(e,t,r){return function(o){e(t,o,r)}},vp=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=d8e,wJ(e,!0))},kO=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new vJ("Promise can't be resolved itself");var o=xJ(t);o?RO(function(){var u={done:!1};try{gp(o,t,mp(kO,u,e),mp(vp,u,e))}catch(a){vp(u,a,e)}}):(e.value=t,e.state=yJ,wJ(e,!1))}catch(u){vp({done:!1},u,e)}}};if(mJ&&($h=function(t){r8e(this,G1),e8e(t),gp(K1,this);var r=PO(this);try{t(mp(kO,r),mp(vp,r))}catch(o){vp(r,o)}},G1=$h.prototype,K1=function(t){l8e(this,{type:J1,done:!1,notified:!1,parent:!1,reactions:new o8e,rejection:!1,state:uJ,value:null})},K1.prototype=oJ(G1,"then",function(t,r){var o=PO(this),u=OO(i8e(this,$h));return o.parent=!0,u.ok=H1(t)?t:!0,u.fail=H1(r)&&r,u.domain=Z1?LO.domain:void 0,o.state===uJ?o.reactions.add(u):RO(function(){bJ(u,o)}),u.promise}),lJ=function(){var e=new K1,t=PO(e);this.promise=e,this.resolve=mp(kO,t),this.reject=mp(vp,t)},pJ.f=OO=function(e){return e===$h||e===p8e?new lJ(e):c8e(e)},!JVe&&H1(X1)&&pp!==Object.prototype)){cJ=pp.then,u8e||oJ(pp,"then",function(t,r){var o=this;return new $h(function(u,a){gp(cJ,o,u,a)}).then(t,r)},{unsafe:!0});try{delete pp.constructor}catch(e){}sJ&&sJ(pp,G1)}XVe({global:!0,constructor:!0,wrap:!0,forced:mJ},{Promise:$h});YVe($h,J1,!1,!0);QVe(J1)});var wy=b((rFt,AJ)=>{"use strict";var g8e=Vh(),y8e=$g(),_8e=dp().CONSTRUCTOR;AJ.exports=_8e||!y8e(function(e){g8e.all(e).then(void 0,function(){})})});var EJ=b(()=>{"use strict";var x8e=$(),b8e=tt(),w8e=Mt(),S8e=Us(),q8e=xc(),A8e=ri(),E8e=wy();x8e({target:"Promise",stat:!0,forced:E8e},{all:function(t){var r=this,o=S8e.f(r),u=o.resolve,a=o.reject,m=q8e(function(){var x=w8e(r.resolve),q=[],T=0,I=1;A8e(t,function(k){var B=T++,Y=!1;I++,b8e(x,r,k).then(function(de){Y||(Y=!0,q[B]=de,--I||u(q))},a)}),--I||u(q)});return m.error&&a(m.value),o.promise}})});var IJ=b(()=>{"use strict";var T8e=$(),I8e=Kt(),C8e=dp().CONSTRUCTOR,NO=Vh(),P8e=Ot(),M8e=jt(),O8e=yr(),TJ=NO&&NO.prototype;T8e({target:"Promise",proto:!0,forced:C8e,real:!0},{catch:function(e){return this.then(void 0,e)}});!I8e&&M8e(NO)&&(zO=P8e("Promise").prototype.catch,TJ.catch!==zO&&O8e(TJ,"catch",zO,{unsafe:!0}));var zO});var CJ=b(()=>{"use strict";var k8e=$(),R8e=tt(),D8e=Mt(),L8e=Us(),F8e=xc(),z8e=ri(),N8e=wy();k8e({target:"Promise",stat:!0,forced:N8e},{race:function(t){var r=this,o=L8e.f(r),u=o.reject,a=F8e(function(){var m=D8e(r.resolve);z8e(t,function(x){R8e(m,r,x).then(o.resolve,u)})});return a.error&&u(a.value),o.promise}})});var PJ=b(()=>{"use strict";var B8e=$(),U8e=Us(),j8e=dp().CONSTRUCTOR;B8e({target:"Promise",stat:!0,forced:j8e},{reject:function(t){var r=U8e.f(this),o=r.reject;return o(t),r.promise}})});var BO=b((hFt,MJ)=>{"use strict";var V8e=Qe(),$8e=Dt(),W8e=Us();MJ.exports=function(e,t){if(V8e(e),$8e(t)&&t.constructor===e)return t;var r=W8e.f(e),o=r.resolve;return o(t),r.promise}});var RJ=b(()=>{"use strict";var G8e=$(),K8e=Ot(),OJ=Kt(),H8e=Vh(),kJ=dp().CONSTRUCTOR,Z8e=BO(),X8e=K8e("Promise"),J8e=OJ&&!kJ;G8e({target:"Promise",stat:!0,forced:OJ||kJ},{resolve:function(t){return Z8e(J8e&&this===X8e?H8e:this,t)}})});var DJ=b(()=>{"use strict";qJ();EJ();IJ();CJ();PJ();RJ()});var UO=b(()=>{"use strict";var Y8e=$(),Q8e=tt(),e$e=Mt(),t$e=Us(),r$e=xc(),i$e=ri(),n$e=wy();Y8e({target:"Promise",stat:!0,forced:n$e},{allSettled:function(t){var r=this,o=t$e.f(r),u=o.resolve,a=o.reject,m=r$e(function(){var x=e$e(r.resolve),q=[],T=0,I=1;i$e(t,function(k){var B=T++,Y=!1;I++,Q8e(x,r,k).then(function(de){Y||(Y=!0,q[B]={status:"fulfilled",value:de},--I||u(q))},function(de){Y||(Y=!0,q[B]={status:"rejected",reason:de},--I||u(q))})}),--I||u(q)});return m.error&&a(m.value),o.promise}})});var jO=b(()=>{"use strict";var a$e=$(),o$e=tt(),s$e=Mt(),u$e=Ot(),l$e=Us(),c$e=xc(),h$e=ri(),f$e=wy(),LJ="No one promise resolved";a$e({target:"Promise",stat:!0,forced:f$e},{any:function(t){var r=this,o=u$e("AggregateError"),u=l$e.f(r),a=u.resolve,m=u.reject,x=c$e(function(){var q=s$e(r.resolve),T=[],I=0,k=1,B=!1;h$e(t,function(Y){var de=I++,pe=!1;k++,o$e(q,r,Y).then(function(Z){pe||B||(B=!0,a(Z))},function(Z){pe||B||(pe=!0,T[de]=Z,--k||m(new o(T,LJ)))})}),--k||m(new o(T,LJ))});return x.error&&m(x.value),u.promise}})});var BJ=b(()=>{"use strict";var d$e=$(),p$e=Kt(),Y1=Vh(),m$e=ze(),zJ=Ot(),NJ=jt(),v$e=my(),FJ=BO(),g$e=yr(),$O=Y1&&Y1.prototype,y$e=!!Y1&&m$e(function(){$O.finally.call({then:function(){}},function(){})});d$e({target:"Promise",proto:!0,real:!0,forced:y$e},{finally:function(e){var t=v$e(this,zJ("Promise")),r=NJ(e);return this.then(r?function(o){return FJ(t,e()).then(function(){return o})}:e,r?function(o){return FJ(t,e()).then(function(){throw o})}:e)}});!p$e&&NJ(Y1)&&(VO=zJ("Promise").prototype.finally,$O.finally!==VO&&g$e($O,"finally",VO,{unsafe:!0}));var VO});var GO=b(()=>{"use strict";var _$e=$(),x$e=Xe(),b$e=Fn(),w$e=qa(),S$e=Us(),q$e=Mt(),jJ=xc(),WO=x$e.Promise,UJ=!1,A$e=!WO||!WO.try||jJ(function(){WO.try(function(e){UJ=e===8},8)}).error||!UJ;_$e({target:"Promise",stat:!0,forced:A$e},{try:function(e){var t=arguments.length>1?w$e(arguments,1):[],r=S$e.f(this),o=jJ(function(){return b$e(q$e(e),void 0,t)});return(o.error?r.reject:r.resolve)(o.value),r.promise}})});var KO=b(()=>{"use strict";var E$e=$(),T$e=Us();E$e({target:"Promise",stat:!0},{withResolvers:function(){var t=T$e.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var VJ=b(()=>{"use strict";var I$e=$(),C$e=Fn(),P$e=Mt(),M$e=Qe(),O$e=ze(),k$e=!O$e(function(){Reflect.apply(function(){})});I$e({target:"Reflect",stat:!0,forced:k$e},{apply:function(t,r,o){return C$e(P$e(t),r,M$e(o))}})});var XJ=b(()=>{"use strict";var R$e=$(),D$e=Ot(),HO=Fn(),L$e=eM(),$J=py(),F$e=Qe(),WJ=Dt(),z$e=pi(),KJ=ze(),ZO=D$e("Reflect","construct"),N$e=Object.prototype,B$e=[].push,HJ=KJ(function(){function e(){}return!(ZO(function(){},[],e)instanceof e)}),ZJ=!KJ(function(){ZO(function(){})}),GJ=HJ||ZJ;R$e({target:"Reflect",stat:!0,forced:GJ,sham:GJ},{construct:function(t,r){$J(t),F$e(r);var o=arguments.length<3?t:$J(arguments[2]);if(ZJ&&!HJ)return ZO(t,r,o);if(t===o){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);}var u=[null];return HO(B$e,u,r),new(HO(L$e,t,u))}var a=o.prototype,m=z$e(WJ(a)?a:N$e),x=HO(t,m,r);return WJ(x)?x:m}})});var QJ=b(()=>{"use strict";var U$e=$(),j$e=wt(),JJ=Qe(),V$e=Rs(),YJ=Dr(),$$e=ze(),W$e=$$e(function(){Reflect.defineProperty(YJ.f({},1,{value:1}),1,{value:2})});U$e({target:"Reflect",stat:!0,forced:W$e,sham:!j$e},{defineProperty:function(t,r,o){JJ(t);var u=V$e(r);JJ(o);try{return YJ.f(t,u,o),!0}catch(a){return!1}}})});var eY=b(()=>{"use strict";var G$e=$(),K$e=Qe(),H$e=Hi().f;G$e({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var o=H$e(K$e(t),r);return o&&!o.configurable?!1:delete t[r]}})});var XO=b((RFt,rY)=>{"use strict";var tY=$t();rY.exports=function(e){return e!==void 0&&(tY(e,"value")||tY(e,"writable"))}});var nY=b(()=>{"use strict";var Z$e=$(),X$e=tt(),J$e=Dt(),Y$e=Qe(),Q$e=XO(),eWe=Hi(),tWe=Ci();function iY(e,t){var r=arguments.length<3?e:arguments[2],o,u;if(Y$e(e)===r)return e[t];if(o=eWe.f(e,t),o)return Q$e(o)?o.value:o.get===void 0?void 0:X$e(o.get,r);if(J$e(u=tWe(e)))return iY(u,t,r)}Z$e({target:"Reflect",stat:!0},{get:iY})});var aY=b(()=>{"use strict";var rWe=$(),iWe=wt(),nWe=Qe(),aWe=Hi();rWe({target:"Reflect",stat:!0,sham:!iWe},{getOwnPropertyDescriptor:function(t,r){return aWe.f(nWe(t),r)}})});var oY=b(()=>{"use strict";var oWe=$(),sWe=Qe(),uWe=Ci(),lWe=e1();oWe({target:"Reflect",stat:!0,sham:!lWe},{getPrototypeOf:function(t){return uWe(sWe(t))}})});var sY=b(()=>{"use strict";var cWe=$();cWe({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var uY=b(()=>{"use strict";var hWe=$(),fWe=Qe(),dWe=R1();hWe({target:"Reflect",stat:!0},{isExtensible:function(t){return fWe(t),dWe(t)}})});var lY=b(()=>{"use strict";var pWe=$(),mWe=Rb();pWe({target:"Reflect",stat:!0},{ownKeys:mWe})});var cY=b(()=>{"use strict";var vWe=$(),gWe=Ot(),yWe=Qe(),_We=ju();vWe({target:"Reflect",stat:!0,sham:!_We},{preventExtensions:function(t){yWe(t);try{var r=gWe("Object","preventExtensions");return r&&r(t),!0}catch(o){return!1}}})});var mY=b(()=>{"use strict";var xWe=$(),bWe=tt(),wWe=Qe(),hY=Dt(),SWe=XO(),qWe=ze(),JO=Dr(),fY=Hi(),AWe=Ci(),dY=ba();function pY(e,t,r){var o=arguments.length<4?e:arguments[3],u=fY.f(wWe(e),t),a,m,x;if(!u){if(hY(m=AWe(e)))return pY(m,t,r,o);u=dY(0)}if(SWe(u)){if(u.writable===!1||!hY(o))return!1;if(a=fY.f(o,t)){if(a.get||a.set||a.writable===!1)return!1;a.value=r,JO.f(o,t,a)}else JO.f(o,t,dY(0,r))}else{if(x=u.set,x===void 0)return!1;bWe(x,o,r)}return!0}var EWe=qWe(function(){var e=function(){},t=JO.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});xWe({target:"Reflect",stat:!0,forced:EWe},{set:pY})});var gY=b(()=>{"use strict";var TWe=$(),IWe=Qe(),CWe=xC(),vY=To();vY&&TWe({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){IWe(t),CWe(r);try{return vY(t,r),!0}catch(o){return!1}}})});var yY=b(()=>{"use strict";var PWe=$(),MWe=Xe(),OWe=ea();PWe({global:!0},{Reflect:{}});OWe(MWe.Reflect,"Reflect",!0)});var Sy=b((tzt,_Y)=>{"use strict";var kWe=Dt(),RWe=pn(),DWe=Et(),LWe=DWe("match");_Y.exports=function(e){var t;return kWe(e)&&((t=e[LWe])!==void 0?!!t:RWe(e)==="RegExp")}});var Q1=b((rzt,xY)=>{"use strict";var FWe=Qe();xY.exports=function(){var e=FWe(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var yp=b((izt,wY)=>{"use strict";var zWe=tt(),NWe=$t(),BWe=mn(),UWe=Q1(),bY=RegExp.prototype;wY.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in bY)&&!NWe(e,"flags")&&BWe(bY,e)?zWe(UWe,e):t}});var qy=b((nzt,SY)=>{"use strict";var YO=ze(),jWe=Xe(),QO=jWe.RegExp,ek=YO(function(){var e=QO("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),VWe=ek||YO(function(){return!QO("a","y").sticky}),$We=ek||YO(function(){var e=QO("^r","gy");return e.lastIndex=2,e.exec("str")!==null});SY.exports={BROKEN_CARET:$We,MISSED_STICKY:VWe,UNSUPPORTED_Y:ek}});var ew=b((azt,qY)=>{"use strict";var WWe=ze(),GWe=Xe(),KWe=GWe.RegExp;qY.exports=WWe(function(){var e=KWe(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var tk=b((ozt,AY)=>{"use strict";var HWe=ze(),ZWe=Xe(),XWe=ZWe.RegExp;AY.exports=HWe(function(){var e=XWe("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var DY=b(()=>{"use strict";var JWe=wt(),ak=Xe(),Ay=Re(),YWe=Gd(),QWe=sc(),e7e=Ii(),t7e=pi(),r7e=nc().f,EY=mn(),i7e=Sy(),TY=zt(),n7e=yp(),MY=qy(),a7e=bC(),o7e=yr(),s7e=ze(),u7e=$t(),l7e=pr().enforce,c7e=fc(),h7e=Et(),OY=ew(),kY=tk(),f7e=h7e("match"),Sc=ak.RegExp,_p=Sc.prototype,d7e=ak.SyntaxError,p7e=Ay(_p.exec),tw=Ay("".charAt),IY=Ay("".replace),CY=Ay("".indexOf),PY=Ay("".slice),m7e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Wh=/a/g,rk=/a/g,v7e=new Sc(Wh)!==Wh,RY=MY.MISSED_STICKY,g7e=MY.UNSUPPORTED_Y,y7e=JWe&&(!v7e||RY||OY||kY||s7e(function(){return rk[f7e]=!1,Sc(Wh)!==Wh||Sc(rk)===rk||String(Sc(Wh,"i"))!=="/a/i"})),_7e=function(e){for(var t=e.length,r=0,o="",u=!1,a;r<=t;r++){if(a=tw(e,r),a==="\\"){o+=a+tw(e,++r);continue}!u&&a==="."?o+="[\\s\\S]":(a==="["?u=!0:a==="]"&&(u=!1),o+=a)}return o},x7e=function(e){for(var t=e.length,r=0,o="",u=[],a=t7e(null),m=!1,x=!1,q=0,T="",I;r<=t;r++){if(I=tw(e,r),I==="\\")I+=tw(e,++r);else if(I==="]")m=!1;else if(!m)switch(!0){case I==="[":m=!0;break;case I==="(":if(o+=I,PY(e,r+1,r+3)==="?:")continue;p7e(m7e,PY(e,r+1))&&(r+=2,x=!0),q++;continue;case I===">"&&x:if(T===""||u7e(a,T))throw new d7e("Invalid capture group name");a[T]=!0,u[u.length]=[T,q],x=!1,T="";continue;}x?T+=I:o+=I}return[o,u]};if(YWe("RegExp",y7e)){for(wc=function(t,r){var o=EY(_p,this),u=i7e(t),a=r===void 0,m=[],x=t,q,T,I,k,B,Y;if(!o&&u&&a&&t.constructor===wc)return t;if((u||EY(_p,t))&&(t=t.source,a&&(r=n7e(x))),t=t===void 0?"":TY(t),r=r===void 0?"":TY(r),x=t,OY&&("dotAll"in Wh)&&(T=!!r&&CY(r,"s")>-1,T&&(r=IY(r,/s/g,""))),q=r,RY&&("sticky"in Wh)&&(I=!!r&&CY(r,"y")>-1,I&&g7e&&(r=IY(r,/y/g,""))),kY&&(k=x7e(t),t=k[0],m=k[1]),B=QWe(Sc(t,r),o?this:_p,wc),(T||I||m.length)&&(Y=l7e(B),T&&(Y.dotAll=!0,Y.raw=wc(_7e(t),q)),I&&(Y.sticky=!0),m.length&&(Y.groups=m)),t!==x)try{e7e(B,"source",x===""?"(?:)":x)}catch(de){}return B},ik=r7e(Sc),nk=0;ik.length>nk;)a7e(wc,Sc,ik[nk++]);_p.constructor=wc,wc.prototype=_p,o7e(ak,"RegExp",wc,{constructor:!0})}var wc,ik,nk;c7e("RegExp")});var FY=b(()=>{"use strict";var b7e=wt(),w7e=ew(),S7e=pn(),q7e=jr(),A7e=pr().get,LY=RegExp.prototype,E7e=TypeError;b7e&&w7e&&q7e(LY,"dotAll",{configurable:!0,get:function(){if(this!==LY){if(S7e(this)==="RegExp")return!!A7e(this).dotAll;throw new E7e("Incompatible receiver, RegExp required")}}})});var nw=b((hzt,NY)=>{"use strict";var xp=tt(),iw=Re(),T7e=zt(),I7e=Q1(),C7e=qy(),P7e=Mu(),M7e=pi(),O7e=pr().get,k7e=ew(),R7e=tk(),D7e=P7e("native-string-replace",String.prototype.replace),rw=RegExp.prototype.exec,sk=rw,L7e=iw("".charAt),F7e=iw("".indexOf),z7e=iw("".replace),ok=iw("".slice),uk=function(){var e=/a/,t=/b*/g;return xp(rw,e,"a"),xp(rw,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),zY=C7e.BROKEN_CARET,lk=/()??/.exec("")[1]!==void 0,N7e=uk||lk||zY||k7e||R7e;N7e&&(sk=function(t){var r=this,o=O7e(r),u=T7e(t),a=o.raw,m,x,q,T,I,k,B;if(a)return a.lastIndex=r.lastIndex,m=xp(sk,a,u),r.lastIndex=a.lastIndex,m;var Y=o.groups,de=zY&&r.sticky,pe=xp(I7e,r),Z=r.source,H=0,J=u;if(de&&(pe=z7e(pe,"y",""),F7e(pe,"g")===-1&&(pe+="g"),J=ok(u,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&L7e(u,r.lastIndex-1)!==`
`)&&(Z="(?: "+Z+")",J=" "+J,H++),x=new RegExp("^(?:"+Z+")",pe)),lk&&(x=new RegExp("^"+Z+"$(?!\\s)",pe)),uk&&(q=r.lastIndex),T=xp(rw,de?x:r,J),de?T?(T.input=ok(T.input,H),T[0]=ok(T[0],H),T.index=r.lastIndex,r.lastIndex+=T[0].length):r.lastIndex=0:uk&&T&&(r.lastIndex=r.global?T.index+T[0].length:q),lk&&T&&T.length>1&&xp(D7e,T[0],x,function(){for(I=1;I<arguments.length-2;I++)arguments[I]===void 0&&(T[I]=void 0)}),T&&Y)for(T.groups=k=M7e(null),I=0;I<Y.length;I++)B=Y[I],k[B[0]]=T[B[1]];return T});NY.exports=sk});var aw=b(()=>{"use strict";var B7e=$(),BY=nw();B7e({target:"RegExp",proto:!0,forced:/./.exec!==BY},{exec:BY})});var VY=b(()=>{"use strict";var U7e=Xe(),j7e=wt(),V7e=jr(),$7e=Q1(),W7e=ze(),UY=U7e.RegExp,jY=UY.prototype,G7e=j7e&&W7e(function(){var e=!0;try{UY(".","d")}catch(q){e=!1}var t={},r="",o=e?"dgimsy":"gimsy",u=function(q,T){Object.defineProperty(t,q,{get:function(){return r+=T,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(a.hasIndices="d");for(var m in a)u(m,a[m]);var x=Object.getOwnPropertyDescriptor(jY,"flags").get.call(t);return x!==o||r!==o});G7e&&V7e(jY,"flags",{configurable:!0,get:$7e})});var WY=b(()=>{"use strict";var K7e=wt(),H7e=qy().MISSED_STICKY,Z7e=pn(),X7e=jr(),J7e=pr().get,$Y=RegExp.prototype,Y7e=TypeError;K7e&&H7e&&X7e($Y,"sticky",{configurable:!0,get:function(){if(this!==$Y){if(Z7e(this)==="RegExp")return!!J7e(this).sticky;throw new Y7e("Incompatible receiver, RegExp required")}}})});var HY=b(()=>{"use strict";aw();var Q7e=$(),GY=tt(),eGe=jt(),KY=Qe(),tGe=zt(),rGe=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),iGe=/./.test;Q7e({target:"RegExp",proto:!0,forced:!rGe},{test:function(e){var t=KY(this),r=tGe(e),o=t.exec;if(!eGe(o))return GY(iGe,t,r);var u=GY(o,t,r);return u===null?!1:(KY(u),!0)}})});var YY=b(()=>{"use strict";var nGe=Eh().PROPER,aGe=yr(),oGe=Qe(),ZY=zt(),sGe=ze(),uGe=yp(),ck="toString",XY=RegExp.prototype,JY=XY[ck],lGe=sGe(function(){return JY.call({source:"a",flags:"b"})!=="/a/b"}),cGe=nGe&&JY.name!==ck;(lGe||cGe)&&aGe(XY,ck,function(){var t=oGe(this),r=ZY(t.source),o=ZY(uGe(t));return"/"+r+"/"+o},{unsafe:!0})});var QY=b(()=>{"use strict";var hGe=ny(),fGe=kM();hGe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},fGe)});var eQ=b(()=>{"use strict";QY()});var Ji=b((Ezt,tQ)=>{"use strict";var hk=Re(),ow=Set.prototype;tQ.exports={Set,add:hk(ow.add),has:hk(ow.has),remove:hk(ow.delete),proto:ow}});var vn=b((Tzt,rQ)=>{"use strict";var dGe=Ji().has;rQ.exports=function(e){return dGe(e),e}});var $u=b((Izt,iQ)=>{"use strict";var pGe=tt();iQ.exports=function(e,t,r){for(var o=r?e:e.iterator,u=e.next,a,m;!(a=pGe(u,o)).done;)if(m=t(a.value),m!==void 0)return m}});var Ta=b((Czt,uQ)=>{"use strict";var nQ=Re(),mGe=$u(),aQ=Ji(),vGe=aQ.Set,oQ=aQ.proto,gGe=nQ(oQ.forEach),sQ=nQ(oQ.keys),yGe=sQ(new vGe).next;uQ.exports=function(e,t,r){return r?mGe({iterator:sQ(e),next:yGe},t):gGe(e,t)}});var sw=b((Pzt,cQ)=>{"use strict";var lQ=Ji(),_Ge=Ta(),xGe=lQ.Set,bGe=lQ.add;cQ.exports=function(e){var t=new xGe;return _Ge(e,function(r){bGe(t,r)}),t}});var bp=b((Mzt,hQ)=>{"use strict";var wGe=Ug(),SGe=Ji();hQ.exports=wGe(SGe.proto,"size","get")||function(e){return e.size}});var qc=b((Ozt,gQ)=>{"use strict";var fQ=Mt(),mQ=Qe(),dQ=tt(),qGe=Ur(),AGe=Hr(),pQ="Invalid size",EGe=RangeError,TGe=TypeError,IGe=Math.max,vQ=function(e,t){this.set=e,this.size=IGe(t,0),this.has=fQ(e.has),this.keys=fQ(e.keys)};vQ.prototype={getIterator:function(){return AGe(mQ(dQ(this.keys,this.set)))},includes:function(e){return dQ(this.has,this.set,e)}};gQ.exports=function(e){mQ(e);var t=+e.size;if(t!==t)throw new TGe(pQ);var r=qGe(t);if(r<0)throw new EGe(pQ);return new vQ(e,r)}});var fk=b((kzt,xQ)=>{"use strict";var CGe=vn(),_Q=Ji(),PGe=sw(),MGe=bp(),OGe=qc(),kGe=Ta(),RGe=$u(),DGe=_Q.has,yQ=_Q.remove;xQ.exports=function(t){var r=CGe(this),o=OGe(t),u=PGe(r);return MGe(r)<=o.size?kGe(r,function(a){o.includes(a)&&yQ(u,a)}):RGe(o.getIterator(),function(a){DGe(r,a)&&yQ(u,a)}),u}});var Ac=b((Rzt,wQ)=>{"use strict";var LGe=Ot(),bQ=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};wQ.exports=function(e){var t=LGe("Set");try{new t()[e](bQ(0));try{return new t()[e](bQ(-1)),!1}catch(r){return!0}}catch(r){return!1}}});var dk=b(()=>{"use strict";var FGe=$(),zGe=fk(),NGe=Ac();FGe({target:"Set",proto:!0,real:!0,forced:!NGe("difference")},{difference:zGe})});var mk=b((Fzt,qQ)=>{"use strict";var BGe=vn(),pk=Ji(),UGe=bp(),jGe=qc(),VGe=Ta(),$Ge=$u(),WGe=pk.Set,SQ=pk.add,GGe=pk.has;qQ.exports=function(t){var r=BGe(this),o=jGe(t),u=new WGe;return UGe(r)>o.size?$Ge(o.getIterator(),function(a){GGe(r,a)&&SQ(u,a)}):VGe(r,function(a){o.includes(a)&&SQ(u,a)}),u}});var vk=b(()=>{"use strict";var KGe=$(),HGe=ze(),ZGe=mk(),XGe=Ac(),JGe=!XGe("intersection")||HGe(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});KGe({target:"Set",proto:!0,real:!0,forced:JGe},{intersection:ZGe})});var gk=b((Bzt,AQ)=>{"use strict";var YGe=vn(),QGe=Ji().has,eKe=bp(),tKe=qc(),rKe=Ta(),iKe=$u(),nKe=Du();AQ.exports=function(t){var r=YGe(this),o=tKe(t);if(eKe(r)<=o.size)return rKe(r,function(a){if(o.includes(a))return!1},!0)!==!1;var u=o.getIterator();return iKe(u,function(a){if(QGe(r,a))return nKe(u,"normal",!1)})!==!1}});var yk=b(()=>{"use strict";var aKe=$(),oKe=gk(),sKe=Ac();aKe({target:"Set",proto:!0,real:!0,forced:!sKe("isDisjointFrom")},{isDisjointFrom:oKe})});var _k=b((Vzt,EQ)=>{"use strict";var uKe=vn(),lKe=bp(),cKe=Ta(),hKe=qc();EQ.exports=function(t){var r=uKe(this),o=hKe(t);return lKe(r)>o.size?!1:cKe(r,function(u){if(!o.includes(u))return!1},!0)!==!1}});var xk=b(()=>{"use strict";var fKe=$(),dKe=_k(),pKe=Ac();fKe({target:"Set",proto:!0,real:!0,forced:!pKe("isSubsetOf")},{isSubsetOf:dKe})});var bk=b((Gzt,TQ)=>{"use strict";var mKe=vn(),vKe=Ji().has,gKe=bp(),yKe=qc(),_Ke=$u(),xKe=Du();TQ.exports=function(t){var r=mKe(this),o=yKe(t);if(gKe(r)<o.size)return!1;var u=o.getIterator();return _Ke(u,function(a){if(!vKe(r,a))return xKe(u,"normal",!1)})!==!1}});var wk=b(()=>{"use strict";var bKe=$(),wKe=bk(),SKe=Ac();bKe({target:"Set",proto:!0,real:!0,forced:!SKe("isSupersetOf")},{isSupersetOf:wKe})});var qk=b((Zzt,IQ)=>{"use strict";var qKe=vn(),Sk=Ji(),AKe=sw(),EKe=qc(),TKe=$u(),IKe=Sk.add,CKe=Sk.has,PKe=Sk.remove;IQ.exports=function(t){var r=qKe(this),o=EKe(t).getIterator(),u=AKe(r);return TKe(o,function(a){CKe(r,a)?PKe(u,a):IKe(u,a)}),u}});var Ak=b(()=>{"use strict";var MKe=$(),OKe=qk(),kKe=Ac();MKe({target:"Set",proto:!0,real:!0,forced:!kKe("symmetricDifference")},{symmetricDifference:OKe})});var Ek=b((Yzt,CQ)=>{"use strict";var RKe=vn(),DKe=Ji().add,LKe=sw(),FKe=qc(),zKe=$u();CQ.exports=function(t){var r=RKe(this),o=FKe(t).getIterator(),u=LKe(r);return zKe(o,function(a){DKe(u,a)}),u}});var Tk=b(()=>{"use strict";var NKe=$(),BKe=Ek(),UKe=Ac();NKe({target:"Set",proto:!0,real:!0,forced:!UKe("union")},{union:BKe})});var PQ=b(()=>{"use strict";var jKe=$(),VKe=Re(),$Ke=zr(),WKe=Ur(),GKe=zt(),KKe=ze(),HKe=VKe("".charAt),ZKe=KKe(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});jKe({target:"String",proto:!0,forced:ZKe},{at:function(t){var r=GKe($Ke(this)),o=r.length,u=WKe(t),a=u>=0?u:o+u;return a<0||a>=o?void 0:HKe(r,a)}})});var Gh=b((iNt,kQ)=>{"use strict";var Ik=Re(),XKe=Ur(),JKe=zt(),YKe=zr(),QKe=Ik("".charAt),MQ=Ik("".charCodeAt),eHe=Ik("".slice),OQ=function(e){return function(t,r){var o=JKe(YKe(t)),u=XKe(r),a=o.length,m,x;return u<0||u>=a?e?"":void 0:(m=MQ(o,u),m<55296||m>56319||u+1===a||(x=MQ(o,u+1))<56320||x>57343?e?QKe(o,u):m:e?eHe(o,u,u+2):(m-55296<<10)+(x-56320)+65536)}};kQ.exports={codeAt:OQ(!1),charAt:OQ(!0)}});var RQ=b(()=>{"use strict";var tHe=$(),rHe=Gh().codeAt;tHe({target:"String",proto:!0},{codePointAt:function(t){return rHe(this,t)}})});var uw=b((oNt,DQ)=>{"use strict";var iHe=Sy(),nHe=TypeError;DQ.exports=function(e){if(iHe(e))throw new nHe("The method doesn't accept regular expressions");return e}});var lw=b((sNt,LQ)=>{"use strict";var aHe=Et(),oHe=aHe("match");LQ.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[oHe]=!1,"/./"[e](t)}catch(o){}}return!1}});var NQ=b(()=>{"use strict";var sHe=$(),uHe=Ou(),lHe=Hi().f,cHe=wa(),FQ=zt(),hHe=uw(),fHe=zr(),dHe=lw(),pHe=Kt(),mHe=uHe("".slice),vHe=Math.min,zQ=dHe("endsWith"),gHe=!pHe&&!zQ&&!!function(){var e=lHe(String.prototype,"endsWith");return e&&!e.writable}();sHe({target:"String",proto:!0,forced:!gHe&&!zQ},{endsWith:function(t){var r=FQ(fHe(this));hHe(t);var o=arguments.length>1?arguments[1]:void 0,u=r.length,a=o===void 0?u:vHe(cHe(o),u),m=FQ(t);return mHe(r,a-m.length,a)===m}})});var Ck=b(()=>{"use strict";var yHe=$(),_He=Re(),xHe=ns(),bHe=RangeError,BQ=String.fromCharCode,UQ=String.fromCodePoint,wHe=_He([].join),SHe=!!UQ&&UQ.length!==1;yHe({target:"String",stat:!0,arity:1,forced:SHe},{fromCodePoint:function(t){for(var r=[],o=arguments.length,u=0,a;o>u;){if(a=+arguments[u++],xHe(a,1114111)!==a)throw new bHe(a+" is not a valid code point");r[u]=a<65536?BQ(a):BQ(((a-=65536)>>10)+55296,a%1024+56320)}return wHe(r,"")}})});var VQ=b(()=>{"use strict";var qHe=$(),AHe=Re(),EHe=uw(),THe=zr(),jQ=zt(),IHe=lw(),CHe=AHe("".indexOf);qHe({target:"String",proto:!0,forced:!IHe("includes")},{includes:function(t){return!!~CHe(jQ(THe(this)),jQ(EHe(t)),arguments.length>1?arguments[1]:void 0)}})});var Pk=b(()=>{"use strict";var PHe=$(),MHe=Re(),OHe=zr(),kHe=zt(),$Q=MHe("".charCodeAt);PHe({target:"String",proto:!0},{isWellFormed:function(){for(var t=kHe(OHe(this)),r=t.length,o=0;o<r;o++){var u=$Q(t,o);if((u&63488)===55296&&(u>=56320||++o>=r||($Q(t,o)&64512)!==56320))return!1}return!0}})});var Mk=b(()=>{"use strict";var RHe=Gh().charAt,DHe=zt(),GQ=pr(),LHe=l1(),WQ=Xi(),KQ="String Iterator",FHe=GQ.set,zHe=GQ.getterFor(KQ);LHe(String,"String",function(e){FHe(this,{type:KQ,string:DHe(e),index:0})},function(){var t=zHe(this),r=t.string,o=t.index,u;return o>=r.length?WQ(void 0,!0):(u=RHe(r,o),t.index+=u.length,WQ(u,!1))})});var Ey=b((yNt,YQ)=>{"use strict";aw();var HQ=tt(),ZQ=yr(),NHe=nw(),XQ=ze(),JQ=Et(),BHe=Ii(),UHe=JQ("species"),Ok=RegExp.prototype;YQ.exports=function(e,t,r,o){var u=JQ(e),a=!XQ(function(){var T={};return T[u]=function(){return 7},""[e](T)!==7}),m=a&&!XQ(function(){var T=!1,I=/a/;return e==="split"&&(I={},I.constructor={},I.constructor[UHe]=function(){return I},I.flags="",I[u]=/./[u]),I.exec=function(){return T=!0,null},I[u](""),!T});if(!a||!m||r){var x=/./[u],q=t(u,""[e],function(T,I,k,B,Y){var de=I.exec;return de===NHe||de===Ok.exec?a&&!Y?{done:!0,value:HQ(x,I,k,B)}:{done:!0,value:HQ(T,k,I,B)}:{done:!1}});ZQ(String.prototype,e,q[0]),ZQ(Ok,u,q[1])}o&&BHe(Ok[u],"sham",!0)}});var Ty=b((_Nt,QQ)=>{"use strict";var jHe=Gh().charAt;QQ.exports=function(e,t,r){return t+(r?jHe(e,t).length:1)}});var wp=b((xNt,tee)=>{"use strict";var eee=tt(),VHe=Qe(),$He=jt(),WHe=pn(),GHe=nw(),KHe=TypeError;tee.exports=function(e,t){var r=e.exec;if($He(r)){var o=eee(r,e,t);return o!==null&&VHe(o),o}if(WHe(e)==="RegExp")return eee(GHe,e,t);throw new KHe("RegExp#exec called on incompatible receiver")}});var iee=b(()=>{"use strict";var HHe=tt(),ZHe=Ey(),XHe=Qe(),JHe=Ei(),YHe=wa(),kk=zt(),QHe=zr(),e9e=di(),t9e=Ty(),ree=wp();ZHe("match",function(e,t,r){return[function(u){var a=QHe(this),m=JHe(u)?void 0:e9e(u,e);return m?HHe(m,u,a):new RegExp(u)[e](kk(a))},function(o){var u=XHe(this),a=kk(o),m=r(t,u,a);if(m.done)return m.value;if(!u.global)return ree(u,a);var x=u.unicode;u.lastIndex=0;for(var q=[],T=0,I;(I=ree(u,a))!==null;){var k=kk(I[0]);q[T]=k,k===""&&(u.lastIndex=t9e(a,YHe(u.lastIndex),x)),T++}return T===0?null:q}]})});var zk=b(()=>{"use strict";var r9e=$(),nee=tt(),see=Ou(),i9e=cc(),cw=Xi(),aee=zr(),uee=wa(),Iy=zt(),n9e=Qe(),a9e=Ei(),o9e=pn(),s9e=Sy(),lee=yp(),u9e=di(),l9e=yr(),c9e=ze(),h9e=Et(),f9e=my(),d9e=Ty(),p9e=wp(),cee=pr(),Dk=Kt(),hw=h9e("matchAll"),hee="RegExp String",fee=hee+" Iterator",m9e=cee.set,v9e=cee.getterFor(fee),oee=RegExp.prototype,g9e=TypeError,Lk=see("".indexOf),fw=see("".matchAll),Rk=!!fw&&!c9e(function(){fw("a",/./)}),y9e=i9e(function(t,r,o,u){m9e(this,{type:fee,regexp:t,string:r,global:o,unicode:u,done:!1})},hee,function(){var t=v9e(this);if(t.done)return cw(void 0,!0);var r=t.regexp,o=t.string,u=p9e(r,o);return u===null?(t.done=!0,cw(void 0,!0)):t.global?(Iy(u[0])===""&&(r.lastIndex=d9e(o,uee(r.lastIndex),t.unicode)),cw(u,!1)):(t.done=!0,cw(u,!1))}),Fk=function(e){var t=n9e(this),r=Iy(e),o=f9e(t,RegExp),u=Iy(lee(t)),a,m,x;return a=new o(o===RegExp?t.source:t,u),m=!!~Lk(u,"g"),x=!!~Lk(u,"u"),a.lastIndex=uee(t.lastIndex),new y9e(a,r,m,x)};r9e({target:"String",proto:!0,forced:Rk},{matchAll:function(t){var r=aee(this),o,u,a,m;if(a9e(t)){if(Rk)return fw(r,t)}else{if(s9e(t)&&(o=Iy(aee(lee(t))),!~Lk(o,"g")))throw new g9e("`.matchAll` does not allow non-global regexes");if(Rk)return fw(r,t);if(a=u9e(t,hw),a===void 0&&Dk&&o9e(t)==="RegExp"&&(a=Fk),a)return nee(a,t,r)}return u=Iy(r),m=new RegExp(t,"g"),Dk?nee(Fk,m,u):m[hw](u)}});Dk||hw in oee||l9e(oee,hw,Fk)});var Nk=b((ANt,dee)=>{"use strict";var _9e=ts();dee.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(_9e)});var pee=b(()=>{"use strict";var x9e=$(),b9e=ty().end,w9e=Nk();x9e({target:"String",proto:!0,forced:w9e},{padEnd:function(t){return b9e(this,t,arguments.length>1?arguments[1]:void 0)}})});var mee=b(()=>{"use strict";var S9e=$(),q9e=ty().start,A9e=Nk();S9e({target:"String",proto:!0,forced:A9e},{padStart:function(t){return q9e(this,t,arguments.length>1?arguments[1]:void 0)}})});var _ee=b(()=>{"use strict";var E9e=$(),yee=Re(),T9e=Ti(),I9e=Ht(),vee=zt(),C9e=er(),gee=yee([].push),P9e=yee([].join);E9e({target:"String",stat:!0},{raw:function(t){var r=T9e(I9e(t).raw),o=C9e(r);if(!o)return"";for(var u=arguments.length,a=[],m=0;;){if(gee(a,vee(r[m++])),m===o)return P9e(a,"");m<u&&gee(a,vee(arguments[m]))}}})});var xee=b(()=>{"use strict";var M9e=$(),O9e=ey();M9e({target:"String",proto:!0},{repeat:O9e})});var Vk=b((RNt,bee)=>{"use strict";var jk=Re(),k9e=Ht(),R9e=Math.floor,Bk=jk("".charAt),D9e=jk("".replace),Uk=jk("".slice),L9e=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,F9e=/\$([$&'`]|\d{1,2})/g;bee.exports=function(e,t,r,o,u,a){var m=r+e.length,x=o.length,q=F9e;return u!==void 0&&(u=k9e(u),q=L9e),D9e(a,q,function(T,I){var k;switch(Bk(I,0)){case"$":return"$";case"&":return e;case"`":return Uk(t,0,r);case"'":return Uk(t,m);case"<":k=u[Uk(I,1,-1)];break;default:var B=+I;if(B===0)return T;if(B>x){var Y=R9e(B/10);return Y===0?T:Y<=x?o[Y-1]===void 0?Bk(I,1):o[Y-1]+Bk(I,1):T}k=o[B-1];}return k===void 0?"":k})}});var Eee=b(()=>{"use strict";var z9e=Fn(),wee=tt(),dw=Re(),N9e=Ey(),B9e=ze(),U9e=Qe(),j9e=jt(),V9e=Ei(),$9e=Ur(),W9e=wa(),Sp=zt(),G9e=zr(),K9e=Ty(),H9e=di(),Z9e=Vk(),X9e=wp(),J9e=Et(),Wk=J9e("replace"),Y9e=Math.max,Q9e=Math.min,eZe=dw([].concat),$k=dw([].push),See=dw("".indexOf),qee=dw("".slice),tZe=function(e){return e===void 0?e:String(e)},rZe=function(){return"a".replace(/./,"$0")==="$0"}(),Aee=function(){return /./[Wk]?/./[Wk]("a","$0")==="":!1}(),iZe=!B9e(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});N9e("replace",function(e,t,r){var o=Aee?"$":"$0";return[function(a,m){var x=G9e(this),q=V9e(a)?void 0:H9e(a,Wk);return q?wee(q,a,x,m):wee(t,Sp(x),a,m)},function(u,a){var m=U9e(this),x=Sp(u);if(typeof a=="string"&&See(a,o)===-1&&See(a,"$<")===-1){var q=r(t,m,x,a);if(q.done)return q.value}var T=j9e(a);T||(a=Sp(a));var I=m.global,k;I&&(k=m.unicode,m.lastIndex=0);for(var B=[],Y;Y=X9e(m,x),!(Y===null||($k(B,Y),!I));){var de=Sp(Y[0]);de===""&&(m.lastIndex=K9e(x,W9e(m.lastIndex),k))}for(var pe="",Z=0,H=0;H<B.length;H++){Y=B[H];for(var J=Sp(Y[0]),ve=Y9e(Q9e($9e(Y.index),x.length),0),be=[],Le,Oe=1;Oe<Y.length;Oe++)$k(be,tZe(Y[Oe]));var Ze=Y.groups;if(T){var ft=eZe([J],be,ve,x);Ze!==void 0&&$k(ft,Ze),Le=Sp(z9e(a,void 0,ft))}else Le=Z9e(J,x,ve,be,Ze,a);ve>=Z&&(pe+=qee(x,Z,ve)+Le,Z=ve+J.length)}return pe+qee(x,Z)}]},!iZe||!rZe||Aee)});var Hk=b(()=>{"use strict";var nZe=$(),aZe=tt(),Kk=Re(),Tee=zr(),oZe=jt(),sZe=Ei(),uZe=Sy(),qp=zt(),lZe=di(),cZe=yp(),hZe=Vk(),fZe=Et(),dZe=Kt(),pZe=fZe("replace"),mZe=TypeError,Gk=Kk("".indexOf),vZe=Kk("".replace),Iee=Kk("".slice),gZe=Math.max;nZe({target:"String",proto:!0},{replaceAll:function(t,r){var o=Tee(this),u,a,m,x,q,T,I,k,B,Y,de=0,pe="";if(!sZe(t)){if(u=uZe(t),u&&(a=qp(Tee(cZe(t))),!~Gk(a,"g")))throw new mZe("`.replaceAll` does not allow non-global regexes");if(m=lZe(t,pZe),m)return aZe(m,t,o,r);if(dZe&&u)return vZe(qp(o),t,r)}for(x=qp(o),q=qp(t),T=oZe(r),T||(r=qp(r)),I=q.length,k=gZe(1,I),B=Gk(x,q);B!==-1;)Y=T?qp(r(q,B,x)):hZe(q,x,B,[],void 0,r),pe+=Iee(x,de,B)+Y,de=B+I,B=B+k>x.length?-1:Gk(x,q,B+k);return de<x.length&&(pe+=Iee(x,de)),pe}})});var Mee=b(()=>{"use strict";var yZe=tt(),_Ze=Ey(),xZe=Qe(),bZe=Ei(),wZe=zr(),Cee=aO(),Pee=zt(),SZe=di(),qZe=wp();_Ze("search",function(e,t,r){return[function(u){var a=wZe(this),m=bZe(u)?void 0:SZe(u,e);return m?yZe(m,u,a):new RegExp(u)[e](Pee(a))},function(o){var u=xZe(this),a=Pee(o),m=r(t,u,a);if(m.done)return m.value;var x=u.lastIndex;Cee(x,0)||(u.lastIndex=0);var q=qZe(u,a);return Cee(u.lastIndex,x)||(u.lastIndex=x),q===null?-1:q.index}]})});var Lee=b(()=>{"use strict";var Zk=tt(),Dee=Re(),AZe=Ey(),EZe=Qe(),TZe=Ei(),IZe=zr(),CZe=my(),PZe=Ty(),MZe=wa(),Oee=zt(),OZe=di(),kee=wp(),kZe=qy(),RZe=ze(),Ap=kZe.UNSUPPORTED_Y,DZe=4294967295,LZe=Math.min,Xk=Dee([].push),Jk=Dee("".slice),FZe=!RZe(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),Ree="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;AZe("split",function(e,t,r){var o="0".split(void 0,0).length?function(u,a){return u===void 0&&a===0?[]:Zk(t,this,u,a)}:t;return[function(a,m){var x=IZe(this),q=TZe(a)?void 0:OZe(a,e);return q?Zk(q,a,x,m):Zk(o,Oee(x),a,m)},function(u,a){var m=EZe(this),x=Oee(u);if(!Ree){var q=r(o,m,x,a,o!==t);if(q.done)return q.value}var T=CZe(m,RegExp),I=m.unicode,k=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(Ap?"g":"y"),B=new T(Ap?"^(?:"+m.source+")":m,k),Y=a===void 0?DZe:a>>>0;if(Y===0)return[];if(x.length===0)return kee(B,x)===null?[x]:[];for(var de=0,pe=0,Z=[];pe<x.length;){B.lastIndex=Ap?0:pe;var H=kee(B,Ap?Jk(x,pe):x),J;if(H===null||(J=LZe(MZe(B.lastIndex+(Ap?pe:0)),x.length))===de)pe=PZe(x,pe,I);else{if(Xk(Z,Jk(x,de,pe)),Z.length===Y)return Z;for(var ve=1;ve<=H.length-1;ve++)if(Xk(Z,H[ve]),Z.length===Y)return Z;pe=de=J}}return Xk(Z,Jk(x,de)),Z}]},Ree||!FZe,Ap)});var Nee=b(()=>{"use strict";var zZe=$(),NZe=Ou(),BZe=Hi().f,UZe=wa(),Fee=zt(),jZe=uw(),VZe=zr(),$Ze=lw(),WZe=Kt(),GZe=NZe("".slice),KZe=Math.min,zee=$Ze("startsWith"),HZe=!WZe&&!zee&&!!function(){var e=BZe(String.prototype,"startsWith");return e&&!e.writable}();zZe({target:"String",proto:!0,forced:!HZe&&!zee},{startsWith:function(t){var r=Fee(VZe(this));jZe(t);var o=UZe(KZe(arguments.length>1?arguments[1]:void 0,r.length)),u=Fee(t);return GZe(r,o,o+u.length)===u}})});var Uee=b(()=>{"use strict";var ZZe=$(),XZe=Re(),JZe=zr(),Bee=Ur(),YZe=zt(),QZe=XZe("".slice),eXe=Math.max,tXe=Math.min,rXe=!"".substr||"ab".substr(-1)!=="b";ZZe({target:"String",proto:!0,forced:rXe},{substr:function(t,r){var o=YZe(JZe(this)),u=o.length,a=Bee(t),m,x;return a===1/0&&(a=0),a<0&&(a=eXe(u+a,0)),m=r===void 0?u:Bee(r),m<=0||m===1/0?"":(x=tXe(a+m,u),a>=x?"":QZe(o,a,x))}})});var tR=b(()=>{"use strict";var iXe=$(),$ee=tt(),eR=Re(),nXe=zr(),aXe=zt(),oXe=ze(),sXe=Array,Yk=eR("".charAt),jee=eR("".charCodeAt),uXe=eR([].join),Qk="".toWellFormed,lXe="\uFFFD",Vee=Qk&&oXe(function(){return $ee(Qk,1)!=="1"});iXe({target:"String",proto:!0,forced:Vee},{toWellFormed:function(){var t=aXe(nXe(this));if(Vee)return $ee(Qk,t);for(var r=t.length,o=sXe(r),u=0;u<r;u++){var a=jee(t,u);(a&63488)!==55296?o[u]=Yk(t,u):a>=56320||u+1>=r||(jee(t,u+1)&64512)!==56320?o[u]=lXe:(o[u]=Yk(t,u),o[++u]=Yk(t,u))}return uXe(o,"")}})});var pw=b((ZNt,Kee)=>{"use strict";var cXe=Eh().PROPER,hXe=ze(),Wee=Bh(),Gee="\u200B\x85\u180E";Kee.exports=function(e){return hXe(function(){return!!Wee[e]()||Gee[e]()!==Gee||cXe&&Wee[e].name!==e})}});var Hee=b(()=>{"use strict";var fXe=$(),dXe=Uh().trim,pXe=pw();fXe({target:"String",proto:!0,forced:pXe("trim")},{trim:function(){return dXe(this)}})});var rR=b((YNt,Zee)=>{"use strict";var mXe=Uh().end,vXe=pw();Zee.exports=vXe("trimEnd")?function(){return mXe(this)}:"".trimEnd});var Jee=b(()=>{"use strict";var gXe=$(),Xee=rR();gXe({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==Xee},{trimRight:Xee})});var Qee=b(()=>{"use strict";Jee();var yXe=$(),Yee=rR();yXe({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==Yee},{trimEnd:Yee})});var iR=b((iBt,ete)=>{"use strict";var _Xe=Uh().start,xXe=pw();ete.exports=xXe("trimStart")?function(){return _Xe(this)}:"".trimStart});var rte=b(()=>{"use strict";var bXe=$(),tte=iR();bXe({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==tte},{trimLeft:tte})});var nte=b(()=>{"use strict";rte();var wXe=$(),ite=iR();wXe({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==ite},{trimStart:ite})});var Ia=b((uBt,ote)=>{"use strict";var SXe=Re(),qXe=zr(),ate=zt(),AXe=/"/g,EXe=SXe("".replace);ote.exports=function(e,t,r,o){var u=ate(qXe(e)),a="<"+t;return r!==""&&(a+=" "+r+"=\""+EXe(ate(o),AXe,"&quot;")+"\""),a+">"+u+"</"+t+">"}});var Ca=b((lBt,ste)=>{"use strict";var TXe=ze();ste.exports=function(e){return TXe(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var ute=b(()=>{"use strict";var IXe=$(),CXe=Ia(),PXe=Ca();IXe({target:"String",proto:!0,forced:PXe("anchor")},{anchor:function(t){return CXe(this,"a","name",t)}})});var lte=b(()=>{"use strict";var MXe=$(),OXe=Ia(),kXe=Ca();MXe({target:"String",proto:!0,forced:kXe("big")},{big:function(){return OXe(this,"big","","")}})});var cte=b(()=>{"use strict";var RXe=$(),DXe=Ia(),LXe=Ca();RXe({target:"String",proto:!0,forced:LXe("blink")},{blink:function(){return DXe(this,"blink","","")}})});var hte=b(()=>{"use strict";var FXe=$(),zXe=Ia(),NXe=Ca();FXe({target:"String",proto:!0,forced:NXe("bold")},{bold:function(){return zXe(this,"b","","")}})});var fte=b(()=>{"use strict";var BXe=$(),UXe=Ia(),jXe=Ca();BXe({target:"String",proto:!0,forced:jXe("fixed")},{fixed:function(){return UXe(this,"tt","","")}})});var dte=b(()=>{"use strict";var VXe=$(),$Xe=Ia(),WXe=Ca();VXe({target:"String",proto:!0,forced:WXe("fontcolor")},{fontcolor:function(t){return $Xe(this,"font","color",t)}})});var pte=b(()=>{"use strict";var GXe=$(),KXe=Ia(),HXe=Ca();GXe({target:"String",proto:!0,forced:HXe("fontsize")},{fontsize:function(t){return KXe(this,"font","size",t)}})});var mte=b(()=>{"use strict";var ZXe=$(),XXe=Ia(),JXe=Ca();ZXe({target:"String",proto:!0,forced:JXe("italics")},{italics:function(){return XXe(this,"i","","")}})});var vte=b(()=>{"use strict";var YXe=$(),QXe=Ia(),eJe=Ca();YXe({target:"String",proto:!0,forced:eJe("link")},{link:function(t){return QXe(this,"a","href",t)}})});var gte=b(()=>{"use strict";var tJe=$(),rJe=Ia(),iJe=Ca();tJe({target:"String",proto:!0,forced:iJe("small")},{small:function(){return rJe(this,"small","","")}})});var yte=b(()=>{"use strict";var nJe=$(),aJe=Ia(),oJe=Ca();nJe({target:"String",proto:!0,forced:oJe("strike")},{strike:function(){return aJe(this,"strike","","")}})});var _te=b(()=>{"use strict";var sJe=$(),uJe=Ia(),lJe=Ca();sJe({target:"String",proto:!0,forced:lJe("sub")},{sub:function(){return uJe(this,"sub","","")}})});var xte=b(()=>{"use strict";var cJe=$(),hJe=Ia(),fJe=Ca();cJe({target:"String",proto:!0,forced:fJe("sup")},{sup:function(){return hJe(this,"sup","","")}})});var mw=b((LBt,wte)=>{"use strict";var bte=Xe(),nR=ze(),dJe=$g(),pJe=Gt().NATIVE_ARRAY_BUFFER_VIEWS,mJe=bte.ArrayBuffer,Kh=bte.Int8Array;wte.exports=!pJe||!nR(function(){Kh(1)})||!nR(function(){new Kh(-1)})||!dJe(function(e){new Kh,new Kh(null),new Kh(1.5),new Kh(e)},!0)||nR(function(){return new Kh(new mJe(2),1,void 0).length!==1})});var aR=b((FBt,Ste)=>{"use strict";var vJe=op(),gJe=RangeError;Ste.exports=function(e,t){var r=vJe(e);if(r%t)throw new gJe("Wrong offset");return r}});var oR=b((zBt,qte)=>{"use strict";var yJe=Math.round;qte.exports=function(e){var t=yJe(e);return t<0?0:t>255?255:t&255}});var vw=b((NBt,Ate)=>{"use strict";var _Je=Sa();Ate.exports=function(e){var t=_Je(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var Cy=b((BBt,Ete)=>{"use strict";var xJe=Eg(),bJe=TypeError;Ete.exports=function(e){var t=xJe(e,"number");if(typeof t=="number")throw new bJe("Can't convert number to bigint");return BigInt(t)}});var sR=b((UBt,Tte)=>{"use strict";var wJe=Ar(),SJe=tt(),qJe=py(),AJe=Ht(),EJe=er(),TJe=uc(),IJe=Ls(),CJe=t1(),PJe=vw(),MJe=Gt().aTypedArrayConstructor,OJe=Cy();Tte.exports=function(t){var r=qJe(this),o=AJe(t),u=arguments.length,a=u>1?arguments[1]:void 0,m=a!==void 0,x=IJe(o),q,T,I,k,B,Y,de,pe;if(x&&!CJe(x))for(de=TJe(o,x),pe=de.next,o=[];!(Y=SJe(pe,de)).done;)o.push(Y.value);for(m&&u>2&&(a=wJe(a,arguments[2])),T=EJe(o),I=new(MJe(r))(T),k=PJe(I),q=0;T>q;q++)B=m?a(o[q],q):o[q],I[q]=k?OJe(B):+B;return I}});var js=b((jBt,pR)=>{"use strict";var Ite=$(),Nte=Xe(),Cte=tt(),kJe=wt(),RJe=mw(),ky=Gt(),Bte=Qg(),Pte=zn(),DJe=ba(),Py=Ii(),LJe=U1(),FJe=wa(),Mte=Qd(),uR=aR(),zJe=oR(),Ute=Rs(),My=$t(),NJe=Sa(),hR=Dt(),BJe=Pu(),UJe=pi(),jJe=mn(),gw=To(),VJe=nc().f,Ote=sR(),$Je=mi().forEach,WJe=fc(),GJe=jr(),jte=Dr(),Vte=Hi(),kte=Fu(),mR=pr(),KJe=sc(),fR=mR.get,HJe=mR.set,ZJe=mR.enforce,$te=jte.f,XJe=Vte.f,lR=Nte.RangeError,Wte=Bte.ArrayBuffer,JJe=Wte.prototype,YJe=Bte.DataView,yw=ky.NATIVE_ARRAY_BUFFER_VIEWS,Rte=ky.TYPED_ARRAY_TAG,Dte=ky.TypedArray,Oy=ky.TypedArrayPrototype,dR=ky.isTypedArray,_w="BYTES_PER_ELEMENT",cR="Wrong length",xw=function(e,t){GJe(e,t,{configurable:!0,get:function(){return fR(this)[t]}})},Lte=function(e){var t;return jJe(JJe,e)||(t=NJe(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},Gte=function(e,t){return dR(e)&&!BJe(t)&&t in e&&LJe(+t)&&t>=0},Fte=function(t,r){return r=Ute(r),Gte(t,r)?DJe(2,t[r]):XJe(t,r)},zte=function(t,r,o){return r=Ute(r),Gte(t,r)&&hR(o)&&My(o,"value")&&!My(o,"get")&&!My(o,"set")&&!o.configurable&&(!My(o,"writable")||o.writable)&&(!My(o,"enumerable")||o.enumerable)?(t[r]=o.value,t):$te(t,r,o)};kJe?(yw||(Vte.f=Fte,jte.f=zte,xw(Oy,"buffer"),xw(Oy,"byteOffset"),xw(Oy,"byteLength"),xw(Oy,"length")),Ite({target:"Object",stat:!0,forced:!yw},{getOwnPropertyDescriptor:Fte,defineProperty:zte}),pR.exports=function(e,t,r){var o=e.match(/\d+/)[0]/8,u=e+(r?"Clamped":"")+"Array",a="get"+e,m="set"+e,x=Nte[u],q=x,T=q&&q.prototype,I={},k=function(pe,Z){var H=fR(pe);return H.view[a](Z*o+H.byteOffset,!0)},B=function(pe,Z,H){var J=fR(pe);J.view[m](Z*o+J.byteOffset,r?zJe(H):H,!0)},Y=function(pe,Z){$te(pe,Z,{get:function(){return k(this,Z)},set:function(H){return B(this,Z,H)},enumerable:!0})};yw?RJe&&(q=t(function(pe,Z,H,J){return Pte(pe,T),KJe(function(){return hR(Z)?Lte(Z)?J!==void 0?new x(Z,uR(H,o),J):H!==void 0?new x(Z,uR(H,o)):new x(Z):dR(Z)?kte(q,Z):Cte(Ote,q,Z):new x(Mte(Z))}(),pe,q)}),gw&&gw(q,Dte),$Je(VJe(x),function(pe){pe in q||Py(q,pe,x[pe])}),q.prototype=T):(q=t(function(pe,Z,H,J){Pte(pe,T);var ve=0,be=0,Le,Oe,Ze;if(!hR(Z))Ze=Mte(Z),Oe=Ze*o,Le=new Wte(Oe);else if(Lte(Z)){Le=Z,be=uR(H,o);var ft=Z.byteLength;if(J===void 0){if(ft%o)throw new lR(cR);if(Oe=ft-be,Oe<0)throw new lR(cR)}else if(Oe=FJe(J)*o,Oe+be>ft)throw new lR(cR);Ze=Oe/o}else return dR(Z)?kte(q,Z):Cte(Ote,q,Z);for(HJe(pe,{buffer:Le,byteOffset:be,byteLength:Oe,length:Ze,view:new YJe(Le)});ve<Ze;)Y(pe,ve++)}),gw&&gw(q,Dte),T=q.prototype=UJe(Oy)),T.constructor!==q&&Py(T,"constructor",q),ZJe(T).TypedArrayConstructor=q,Rte&&Py(T,Rte,u);var de=q!==x;I[u]=q,Ite({global:!0,constructor:!0,forced:de,sham:!yw},I),_w in q||Py(q,_w,o),_w in T||Py(T,_w,o),WJe(u)}):pR.exports=function(){}});var Kte=b(()=>{"use strict";var QJe=js();QJe("Float32",function(e){return function(r,o,u){return e(this,r,o,u)}})});var Hte=b(()=>{"use strict";var eYe=js();eYe("Float64",function(e){return function(r,o,u){return e(this,r,o,u)}})});var Zte=b(()=>{"use strict";var tYe=js();tYe("Int8",function(e){return function(r,o,u){return e(this,r,o,u)}})});var Xte=b(()=>{"use strict";var rYe=js();rYe("Int16",function(e){return function(r,o,u){return e(this,r,o,u)}})});var Jte=b(()=>{"use strict";var iYe=js();iYe("Int32",function(e){return function(r,o,u){return e(this,r,o,u)}})});var Yte=b(()=>{"use strict";var nYe=js();nYe("Uint8",function(e){return function(r,o,u){return e(this,r,o,u)}})});var Qte=b(()=>{"use strict";var aYe=js();aYe("Uint8",function(e){return function(r,o,u){return e(this,r,o,u)}},!0)});var ere=b(()=>{"use strict";var oYe=js();oYe("Uint16",function(e){return function(r,o,u){return e(this,r,o,u)}})});var tre=b(()=>{"use strict";var sYe=js();sYe("Uint32",function(e){return function(r,o,u){return e(this,r,o,u)}})});var vR=b(()=>{"use strict";var rre=Gt(),uYe=er(),lYe=Ur(),cYe=rre.aTypedArray,hYe=rre.exportTypedArrayMethod;hYe("at",function(t){var r=cYe(this),o=uYe(r),u=lYe(t),a=u>=0?u:o+u;return a<0||a>=o?void 0:r[a]})});var nre=b(()=>{"use strict";var fYe=Re(),ire=Gt(),dYe=zC(),pYe=fYe(dYe),mYe=ire.aTypedArray,vYe=ire.exportTypedArrayMethod;vYe("copyWithin",function(t,r){return pYe(mYe(this),t,r,arguments.length>2?arguments[2]:void 0)})});var ore=b(()=>{"use strict";var are=Gt(),gYe=mi().every,yYe=are.aTypedArray,_Ye=are.exportTypedArrayMethod;_Ye("every",function(t){return gYe(yYe(this),t,arguments.length>1?arguments[1]:void 0)})});var ure=b(()=>{"use strict";var sre=Gt(),xYe=a1(),bYe=Cy(),wYe=Sa(),SYe=tt(),qYe=Re(),AYe=ze(),EYe=sre.aTypedArray,TYe=sre.exportTypedArrayMethod,IYe=qYe("".slice),CYe=AYe(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});TYe("fill",function(t){var r=arguments.length;EYe(this);var o=IYe(wYe(this),0,3)==="Big"?bYe(t):+t;return SYe(xYe,this,o,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},CYe)});var bw=b((m3t,lre)=>{"use strict";var PYe=Fu(),MYe=Gt().getTypedArrayConstructor;lre.exports=function(e,t){return PYe(MYe(e),t)}});var hre=b(()=>{"use strict";var cre=Gt(),OYe=mi().filter,kYe=bw(),RYe=cre.aTypedArray,DYe=cre.exportTypedArrayMethod;DYe("filter",function(t){var r=OYe(RYe(this),t,arguments.length>1?arguments[1]:void 0);return kYe(this,r)})});var dre=b(()=>{"use strict";var fre=Gt(),LYe=mi().find,FYe=fre.aTypedArray,zYe=fre.exportTypedArrayMethod;zYe("find",function(t){return LYe(FYe(this),t,arguments.length>1?arguments[1]:void 0)})});var mre=b(()=>{"use strict";var pre=Gt(),NYe=mi().findIndex,BYe=pre.aTypedArray,UYe=pre.exportTypedArrayMethod;UYe("findIndex",function(t){return NYe(BYe(this),t,arguments.length>1?arguments[1]:void 0)})});var gR=b(()=>{"use strict";var vre=Gt(),jYe=Vg().findLast,VYe=vre.aTypedArray,$Ye=vre.exportTypedArrayMethod;$Ye("findLast",function(t){return jYe(VYe(this),t,arguments.length>1?arguments[1]:void 0)})});var yR=b(()=>{"use strict";var gre=Gt(),WYe=Vg().findLastIndex,GYe=gre.aTypedArray,KYe=gre.exportTypedArrayMethod;KYe("findLastIndex",function(t){return WYe(GYe(this),t,arguments.length>1?arguments[1]:void 0)})});var _re=b(()=>{"use strict";var yre=Gt(),HYe=mi().forEach,ZYe=yre.aTypedArray,XYe=yre.exportTypedArrayMethod;XYe("forEach",function(t){HYe(ZYe(this),t,arguments.length>1?arguments[1]:void 0)})});var xre=b(()=>{"use strict";var JYe=mw(),YYe=Gt().exportTypedArrayStaticMethod,QYe=sR();YYe("from",QYe,JYe)});var wre=b(()=>{"use strict";var bre=Gt(),eQe=Wd().includes,tQe=bre.aTypedArray,rQe=bre.exportTypedArrayMethod;rQe("includes",function(t){return eQe(tQe(this),t,arguments.length>1?arguments[1]:void 0)})});var qre=b(()=>{"use strict";var Sre=Gt(),iQe=Wd().indexOf,nQe=Sre.aTypedArray,aQe=Sre.exportTypedArrayMethod;aQe("indexOf",function(t){return iQe(nQe(this),t,arguments.length>1?arguments[1]:void 0)})});var Cre=b(()=>{"use strict";var oQe=Xe(),sQe=ze(),_R=Re(),Ere=Gt(),xR=Kg(),uQe=Et(),bR=uQe("iterator"),Are=oQe.Uint8Array,lQe=_R(xR.values),cQe=_R(xR.keys),hQe=_R(xR.entries),wR=Ere.aTypedArray,ww=Ere.exportTypedArrayMethod,Ep=Are&&Are.prototype,Sw=!sQe(function(){Ep[bR].call([1])}),Tre=!!Ep&&Ep.values&&Ep[bR]===Ep.values&&Ep.values.name==="values",Ire=function(){return lQe(wR(this))};ww("entries",function(){return hQe(wR(this))},Sw);ww("keys",function(){return cQe(wR(this))},Sw);ww("values",Ire,Sw||!Tre,{name:"values"});ww(bR,Ire,Sw||!Tre,{name:"values"})});var Mre=b(()=>{"use strict";var Pre=Gt(),fQe=Re(),dQe=Pre.aTypedArray,pQe=Pre.exportTypedArrayMethod,mQe=fQe([].join);pQe("join",function(t){return mQe(dQe(this),t)})});var kre=b(()=>{"use strict";var Ore=Gt(),vQe=Fn(),gQe=eP(),yQe=Ore.aTypedArray,_Qe=Ore.exportTypedArrayMethod;_Qe("lastIndexOf",function(t){var r=arguments.length;return vQe(gQe,yQe(this),r>1?[t,arguments[1]]:[t])})});var Rre=b(()=>{"use strict";var SR=Gt(),xQe=mi().map,bQe=SR.aTypedArray,wQe=SR.getTypedArrayConstructor,SQe=SR.exportTypedArrayMethod;SQe("map",function(t){return xQe(bQe(this),t,arguments.length>1?arguments[1]:void 0,function(r,o){return new(wQe(r))(o)})})});var Lre=b(()=>{"use strict";var Dre=Gt(),qQe=mw(),AQe=Dre.aTypedArrayConstructor,EQe=Dre.exportTypedArrayStaticMethod;EQe("of",function(){for(var t=0,r=arguments.length,o=new(AQe(this))(r);r>t;)o[t]=arguments[t++];return o},qQe)});var zre=b(()=>{"use strict";var Fre=Gt(),TQe=Hg().left,IQe=Fre.aTypedArray,CQe=Fre.exportTypedArrayMethod;CQe("reduce",function(t){var r=arguments.length;return TQe(IQe(this),t,r,r>1?arguments[1]:void 0)})});var Bre=b(()=>{"use strict";var Nre=Gt(),PQe=Hg().right,MQe=Nre.aTypedArray,OQe=Nre.exportTypedArrayMethod;OQe("reduceRight",function(t){var r=arguments.length;return PQe(MQe(this),t,r,r>1?arguments[1]:void 0)})});var jre=b(()=>{"use strict";var Ure=Gt(),kQe=Ure.aTypedArray,RQe=Ure.exportTypedArrayMethod,DQe=Math.floor;RQe("reverse",function(){for(var t=this,r=kQe(t).length,o=DQe(r/2),u=0,a;u<o;)a=t[u],t[u++]=t[--r],t[r]=a;return t})});var Hre=b(()=>{"use strict";var $re=Xe(),Wre=tt(),ER=Gt(),LQe=er(),FQe=aR(),zQe=Ht(),Gre=ze(),NQe=$re.RangeError,qR=$re.Int8Array,Vre=qR&&qR.prototype,Kre=Vre&&Vre.set,BQe=ER.aTypedArray,UQe=ER.exportTypedArrayMethod,AR=!Gre(function(){var e=new Uint8ClampedArray(2);return Wre(Kre,e,{length:1,0:3},1),e[1]!==3}),jQe=AR&&ER.NATIVE_ARRAY_BUFFER_VIEWS&&Gre(function(){var e=new qR(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});UQe("set",function(t){BQe(this);var r=FQe(arguments.length>1?arguments[1]:void 0,1),o=zQe(t);if(AR)return Wre(Kre,this,o,r);var u=this.length,a=LQe(o),m=0;if(a+r>u)throw new NQe("Wrong length");for(;m<a;)this[r+m]=o[m++]},!AR||jQe)});var Zre=b(()=>{"use strict";var TR=Gt(),VQe=ze(),$Qe=qa(),WQe=TR.aTypedArray,GQe=TR.getTypedArrayConstructor,KQe=TR.exportTypedArrayMethod,HQe=VQe(function(){new Int8Array(1).slice()});KQe("slice",function(t,r){for(var o=$Qe(WQe(this),t,r),u=GQe(this),a=0,m=o.length,x=new u(m);m>a;)x[a]=o[a++];return x},HQe)});var Jre=b(()=>{"use strict";var Xre=Gt(),ZQe=mi().some,XQe=Xre.aTypedArray,JQe=Xre.exportTypedArrayMethod;JQe("some",function(t){return ZQe(XQe(this),t,arguments.length>1?arguments[1]:void 0)})});var iie=b(()=>{"use strict";var YQe=Xe(),QQe=Ou(),IR=ze(),eet=Mt(),tet=d1(),rie=Gt(),Yre=iP(),ret=nP(),Qre=ks(),eie=p1(),iet=rie.aTypedArray,net=rie.exportTypedArrayMethod,Ry=YQe.Uint16Array,Tp=Ry&&QQe(Ry.prototype.sort),aet=!!Tp&&!(IR(function(){Tp(new Ry(2),null)})&&IR(function(){Tp(new Ry(2),{})})),tie=!!Tp&&!IR(function(){if(Qre)return Qre<74;if(Yre)return Yre<67;if(ret)return!0;if(eie)return eie<602;var e=new Ry(516),t=Array(516),r,o;for(r=0;r<516;r++)o=r%4,e[r]=515-r,t[r]=r-2*o+3;for(Tp(e,function(u,a){return(u/4|0)-(a/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),oet=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};net("sort",function(t){return t!==void 0&&eet(t),tie?Tp(this,t):tet(iet(this),oet(t))},!tie||aet)});var aie=b(()=>{"use strict";var CR=Gt(),set=wa(),nie=ns(),uet=CR.aTypedArray,cet=CR.getTypedArrayConstructor,het=CR.exportTypedArrayMethod;het("subarray",function(t,r){var o=uet(this),u=o.length,a=nie(t,u),m=cet(o);return new m(o.buffer,o.byteOffset+a*o.BYTES_PER_ELEMENT,set((r===void 0?u:nie(r,u))-a))})});var cie=b(()=>{"use strict";var fet=Xe(),det=Fn(),uie=Gt(),PR=ze(),oie=qa(),qw=fet.Int8Array,sie=uie.aTypedArray,pet=uie.exportTypedArrayMethod,lie=[].toLocaleString,met=!!qw&&PR(function(){lie.call(new qw(1))}),vet=PR(function(){return[1,2].toLocaleString()!==new qw([1,2]).toLocaleString()})||!PR(function(){qw.prototype.toLocaleString.call([1,2])});pet("toLocaleString",function(){return det(lie,met?oie(sie(this)):sie(this),oie(arguments))},vet)});var OR=b(()=>{"use strict";var get=sP(),MR=Gt(),yet=MR.aTypedArray,_et=MR.exportTypedArrayMethod,xet=MR.getTypedArrayConstructor;_et("toReversed",function(){return get(yet(this),xet(this))})});var kR=b(()=>{"use strict";var Aw=Gt(),bet=Re(),wet=Mt(),qet=Fu(),Aet=Aw.aTypedArray,Eet=Aw.getTypedArrayConstructor,Tet=Aw.exportTypedArrayMethod,Iet=bet(Aw.TypedArrayPrototype.sort);Tet("toSorted",function(t){t!==void 0&&wet(t);var r=Aet(this),o=qet(Eet(r),r);return Iet(o,t)})});var fie=b(()=>{"use strict";var Cet=Gt().exportTypedArrayMethod,Pet=ze(),Met=Xe(),Oet=Re(),hie=Met.Uint8Array,ket=hie&&hie.prototype||{},Ew=[].toString,Ret=Oet([].join);Pet(function(){Ew.call({})})&&(Ew=function(){return Ret(this)});var Det=ket.toString!==Ew;Cet("toString",Ew,Det)});var DR=b(()=>{"use strict";var Let=fP(),RR=Gt(),Fet=vw(),zet=Ur(),Net=Cy(),Bet=RR.aTypedArray,Uet=RR.getTypedArrayConstructor,jet=RR.exportTypedArrayMethod,Vet=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();jet("with",function(e,t){var r=Bet(this),o=zet(e),u=Fet(r)?Net(t):+t;return Let(r,Uet(r),o,u)},!Vet)});var gie=b(()=>{"use strict";var $et=$(),LR=Re(),Wet=zt(),die=String.fromCharCode,pie=LR("".charAt),mie=LR(/./.exec),vie=LR("".slice),Get=/^[\da-f]{2}$/i,Ket=/^[\da-f]{4}$/i;$et({global:!0},{unescape:function(t){for(var r=Wet(t),o="",u=r.length,a=0,m,x;a<u;){if(m=pie(r,a++),m==="%"){if(pie(r,a)==="u"){if(x=vie(r,a+1,a+5),mie(Ket,x)){o+=die(parseInt(x,16)),a+=5;continue}}else if(x=vie(r,a,a+2),mie(Get,x)){o+=die(parseInt(x,16)),a+=2;continue}}o+=m}return o}})});var NR=b((yUt,Sie)=>{"use strict";var Het=Re(),yie=Po(),Tw=_c().getWeakData,Zet=zn(),Xet=Qe(),Jet=Ei(),FR=Dt(),Yet=ri(),xie=mi(),_ie=$t(),bie=pr(),Qet=bie.set,ett=bie.getterFor,ttt=xie.find,rtt=xie.findIndex,itt=Het([].splice),ntt=0,Iw=function(e){return e.frozen||(e.frozen=new wie)},wie=function(){this.entries=[]},zR=function(e,t){return ttt(e.entries,function(r){return r[0]===t})};wie.prototype={get:function(e){var t=zR(this,e);if(t)return t[1]},has:function(e){return!!zR(this,e)},set:function(e,t){var r=zR(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=rtt(this.entries,function(r){return r[0]===e});return~t&&itt(this.entries,t,1),!!~t}};Sie.exports={getConstructor:function(e,t,r,o){var u=e(function(q,T){Zet(q,a),Qet(q,{type:t,id:ntt++,frozen:null}),Jet(T)||Yet(T,q[o],{that:q,AS_ENTRIES:r})}),a=u.prototype,m=ett(t),x=function(q,T,I){var k=m(q),B=Tw(Xet(T),!0);return B===!0?Iw(k).set(T,I):B[k.id]=I,q};return yie(a,{delete:function(q){var T=m(this);if(!FR(q))return!1;var I=Tw(q);return I===!0?Iw(T).delete(q):I&&_ie(I,T.id)&&delete I[T.id]},has:function(T){var I=m(this);if(!FR(T))return!1;var k=Tw(T);return k===!0?Iw(I).has(T):k&&_ie(k,I.id)}}),yie(a,r?{get:function(T){var I=m(this);if(FR(T)){var k=Tw(T);if(k===!0)return Iw(I).get(T);if(k)return k[I.id]}},set:function(T,I){return x(this,T,I)}}:{add:function(T){return x(this,T,!0)}}),u}}});var Mie=b(()=>{"use strict";var att=ju(),qie=Xe(),Ow=Re(),Aie=Po(),ott=_c(),stt=ny(),Eie=NR(),Cw=Dt(),Pw=pr().enforce,utt=ze(),ltt=B2(),Fy=Object,ctt=Array.isArray,Mw=Fy.isExtensible,Tie=Fy.isFrozen,htt=Fy.isSealed,Iie=Fy.freeze,ftt=Fy.seal,dtt=!qie.ActiveXObject&&"ActiveXObject"in qie,Dy,Cie=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Pie=stt("WeakMap",Cie,Eie),Ip=Pie.prototype,kw=Ow(Ip.set),ptt=function(){return att&&utt(function(){var e=Iie([]);return kw(new Pie,e,1),!Tie(e)})};ltt&&(dtt?(Dy=Eie.getConstructor(Cie,"WeakMap",!0),ott.enable(),BR=Ow(Ip.delete),Ly=Ow(Ip.has),UR=Ow(Ip.get),Aie(Ip,{delete:function(e){if(Cw(e)&&!Mw(e)){var t=Pw(this);return t.frozen||(t.frozen=new Dy),BR(this,e)||t.frozen.delete(e)}return BR(this,e)},has:function(t){if(Cw(t)&&!Mw(t)){var r=Pw(this);return r.frozen||(r.frozen=new Dy),Ly(this,t)||r.frozen.has(t)}return Ly(this,t)},get:function(t){if(Cw(t)&&!Mw(t)){var r=Pw(this);return r.frozen||(r.frozen=new Dy),Ly(this,t)?UR(this,t):r.frozen.get(t)}return UR(this,t)},set:function(t,r){if(Cw(t)&&!Mw(t)){var o=Pw(this);o.frozen||(o.frozen=new Dy),Ly(this,t)?kw(this,t,r):o.frozen.set(t,r)}else kw(this,t,r);return this}})):ptt()&&Aie(Ip,{set:function(t,r){var o;return ctt(t)&&(Tie(t)?o=Iie:htt(t)&&(o=ftt)),kw(this,t,r),o&&o(t),this}}));var BR,Ly,UR});var Rw=b(()=>{"use strict";Mie()});var Oie=b(()=>{"use strict";var mtt=ny(),vtt=NR();mtt("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},vtt)});var kie=b(()=>{"use strict";Oie()});var Rie=b(()=>{"use strict";OC()});var Fie=b(()=>{"use strict";var gtt=$(),ytt=Xe(),_tt=mn(),Die=Ci(),Lw=To(),xtt=Ih(),Lie=pi(),Dw=Ii(),jR=ba(),btt=Jb(),wtt=kh(),Stt=Et(),qtt=ze(),Att=Kt(),Cp=ytt.SuppressedError,Ett=Stt("toStringTag"),Fw=Error,Ttt=!!Cp&&Cp.length!==3,Itt=!!Cp&&qtt(function(){return new Cp(1,2,3,{cause:4}).cause===4}),zw=Ttt||Itt,Hh=function(t,r,o){var u=_tt(zy,this),a;return Lw?a=zw&&(!u||Die(this)===zy)?new Cp:Lw(new Fw,u?Die(this):zy):(a=u?this:Lie(zy),Dw(a,Ett,"Error")),o!==void 0&&Dw(a,"message",wtt(o)),btt(a,Hh,a.stack,1),Dw(a,"error",t),Dw(a,"suppressed",r),a};Lw?Lw(Hh,Fw):xtt(Hh,Fw,{name:!0});var zy=Hh.prototype=zw?Cp.prototype:Lie(Fw.prototype,{constructor:jR(1,Hh),message:jR(1,""),name:jR(1,"SuppressedError")});zw&&!Att&&(zy.constructor=Hh);gtt({global:!0,constructor:!0,arity:3,forced:zw},{SuppressedError:Hh})});var Pp=b((MUt,Wie)=>{"use strict";var jie=Xe(),Vie=Ag(),$ie=jt(),Ctt=pi(),Nw=Ci(),Ptt=yr(),Mtt=Et(),Ott=Kt(),zie="USE_FUNCTION_CONSTRUCTOR",Nie=Mtt("asyncIterator"),Bie=jie.AsyncIterator,Uie=Vie.AsyncIteratorPrototype,Vs,VR;if(Uie)Vs=Uie;else if($ie(Bie))Vs=Bie.prototype;else if(Vie[zie]||jie[zie])try{VR=Nw(Nw(Nw(Function("return async function*(){}()")()))),Nw(VR)===Object.prototype&&(Vs=VR)}catch(e){}Vs?Ott&&(Vs=Ctt(Vs)):Vs={};$ie(Vs[Nie])||Ptt(Vs,Nie,function(){return this});Wie.exports=Vs});var Ny=b((OUt,ene)=>{"use strict";var Gie=tt(),Kie=Qe(),ktt=pi(),Rtt=di(),Dtt=Po(),Xie=pr(),Ltt=Ot(),Ftt=Pp(),Jie=Xi(),$R=Ltt("Promise"),Yie="AsyncFromSyncIterator",ztt=Xie.set,Hie=Xie.getterFor(Yie),Zie=function(e,t,r){var o=e.done;$R.resolve(e.value).then(function(u){t(Jie(u,o))},r)},Qie=function(t){t.type=Yie,ztt(this,t)};Qie.prototype=Dtt(ktt(Ftt),{next:function(){var t=Hie(this);return new $R(function(r,o){var u=Kie(Gie(t.next,t.iterator));Zie(u,r,o)})},return:function(){var e=Hie(this).iterator;return new $R(function(t,r){var o=Rtt(e,"return");if(o===void 0)return t(Jie(void 0,!0));var u=Kie(Gie(o,e));Zie(u,t,r)})}});ene.exports=Qie});var rne=b((kUt,tne)=>{"use strict";var Ntt=tt(),Btt=Ny(),Utt=Qe(),jtt=uc(),Vtt=Hr(),$tt=di(),Wtt=Et(),Gtt=Wtt("asyncIterator");tne.exports=function(e,t){var r=arguments.length<2?$tt(e,Gtt):t;return r?Utt(Ntt(r,e)):new Btt(Vtt(jtt(e)))}});var Mp=b((RUt,ine)=>{"use strict";var Ktt=tt(),Htt=Ot(),Ztt=di();ine.exports=function(e,t,r,o){try{var u=Ztt(e,"return");if(u)return Htt("Promise").resolve(Ktt(u,e)).then(function(){t(r)},function(a){o(a)})}catch(a){return o(a)}t(r)}});var Zh=b((DUt,nne)=>{"use strict";var Xtt=tt(),Jtt=Mt(),WR=Qe(),Ytt=Dt(),Qtt=lc(),ert=Ot(),trt=Hr(),GR=Mp(),By=function(e){var t=e===0,r=e===1,o=e===2,u=e===3;return function(a,m,x){WR(a);var q=m!==void 0;(q||!t)&&Jtt(m);var T=trt(a),I=ert("Promise"),k=T.iterator,B=T.next,Y=0;return new I(function(de,pe){var Z=function(J){GR(k,pe,J,pe)},H=function(){try{if(q)try{Qtt(Y)}catch(J){Z(J)}I.resolve(WR(Xtt(B,k))).then(function(J){try{if(WR(J).done)t?(x.length=Y,de(x)):de(u?!1:o||void 0);else{var ve=J.value;try{if(q){var be=m(ve,Y),Le=function(Oe){if(r)H();else if(o)Oe?H():GR(k,de,!1,pe);else if(t)try{x[Y++]=Oe,H()}catch(Ze){Z(Ze)}else Oe?GR(k,de,u||ve,pe):H()};Ytt(be)?I.resolve(be).then(Le,Z):Le(be)}else x[Y++]=ve,H()}catch(Oe){Z(Oe)}}}catch(Oe){pe(Oe)}},pe)}catch(J){pe(J)}};H()})}};nne.exports={toArray:By(0),forEach:By(1),every:By(2),some:By(3),find:By(4)}});var KR=b((LUt,une)=>{"use strict";var rrt=Ar(),ane=Re(),irt=Ht(),nrt=os(),art=rne(),ort=uc(),srt=Hr(),urt=Ls(),lrt=di(),crt=Ot(),hrt=lP(),frt=Et(),drt=Ny(),prt=Zh().toArray,mrt=frt("asyncIterator"),one=ane(hrt("Array","values")),vrt=ane(one([]).next),grt=function(){return new sne(this)},sne=function(e){this.iterator=one(e)};sne.prototype.next=function(){return vrt(this.iterator)};une.exports=function(t){var r=this,o=arguments.length,u=o>1?arguments[1]:void 0,a=o>2?arguments[2]:void 0;return new(crt("Promise"))(function(m){var x=irt(t);u!==void 0&&(u=rrt(u,a));var q=lrt(x,mrt),T=q?void 0:urt(x)||grt,I=nrt(r)?new r:[],k=q?art(x,q):new drt(srt(ort(x,T)));m(prt(k,u,I))})}});var cne=b(()=>{"use strict";var yrt=$(),_rt=KR(),xrt=ze(),lne=Array.fromAsync,brt=!lne||xrt(function(){var e=0;return lne.call(function(){return e++,[]},{length:0}),e!==1});yrt({target:"Array",stat:!0,forced:brt},{fromAsync:_rt})});var hne=b(()=>{"use strict";LC()});var fne=b(()=>{"use strict";var wrt=$(),Srt=mi().filterReject,qrt=ii();wrt({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return Srt(this,t,arguments.length>1?arguments[1]:void 0)}});qrt("filterOut")});var dne=b(()=>{"use strict";var Art=$(),Ert=mi().filterReject,Trt=ii();Art({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return Ert(this,t,arguments.length>1?arguments[1]:void 0)}});Trt("filterReject")});var pne=b(()=>{"use strict";UC()});var mne=b(()=>{"use strict";jC()});var Bw=b((ZUt,vne)=>{"use strict";var Irt=Ar(),Crt=Re(),Prt=Cu(),Mrt=Ht(),Ort=Rs(),krt=er(),Rrt=pi(),Drt=Fu(),Lrt=Array,Frt=Crt([].push);vne.exports=function(e,t,r,o){for(var u=Mrt(e),a=Prt(u),m=Irt(t,r),x=Rrt(null),q=krt(a),T=0,I,k,B;q>T;T++)B=a[T],k=Ort(m(B,T,u)),k in x?Frt(x[k],B):x[k]=[B];if(o&&(I=o(u),I!==Lrt))for(k in x)x[k]=Drt(I,x[k]);return x}});var gne=b(()=>{"use strict";var zrt=$(),Nrt=Bw(),Brt=ii();zrt({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return Nrt(this,t,r)}});Brt("group")});var yne=b(()=>{"use strict";var Urt=$(),jrt=Bw(),Vrt=Co(),$rt=ii();Urt({target:"Array",proto:!0,forced:!Vrt("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return jrt(this,t,r)}});$rt("groupBy")});var HR=b((e4t,_ne)=>{"use strict";var Wrt=Ar(),Grt=Re(),Krt=Cu(),Hrt=Ht(),Zrt=er(),Uw=Li(),Xrt=Uw.Map,Jrt=Uw.get,Yrt=Uw.has,Qrt=Uw.set,eit=Grt([].push);_ne.exports=function(t){for(var r=Hrt(this),o=Krt(r),u=Wrt(t,arguments.length>1?arguments[1]:void 0),a=new Xrt,m=Zrt(o),x=0,q,T;m>x;x++)T=o[x],q=u(T,x,r),Yrt(a,q)?eit(Jrt(a,q),T):Qrt(a,q,[T]);return a}});var xne=b(()=>{"use strict";var tit=$(),rit=Co(),iit=ii(),nit=HR(),ait=Kt();tit({target:"Array",proto:!0,name:"groupToMap",forced:ait||!rit("groupByToMap")},{groupByToMap:nit});iit("groupByToMap")});var bne=b(()=>{"use strict";var oit=$(),sit=ii(),uit=HR(),lit=Kt();oit({target:"Array",proto:!0,forced:lit},{groupToMap:uit});sit("groupToMap")});var qne=b(()=>{"use strict";var cit=$(),hit=as(),wne=Object.isFrozen,Sne=function(e,t){if(!wne||!hit(e)||!wne(e))return!1;for(var r=0,o=e.length,u;r<o;)if(u=e[r++],!(typeof u=="string"||t&&u===void 0))return!1;return o!==0};cit({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!Sne(t,!0))return!1;var r=t.raw;return r.length===t.length&&Sne(r,!1)}})});var Ane=b(()=>{"use strict";var fit=wt(),dit=ii(),pit=Ht(),mit=er(),vit=jr();fit&&(vit(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=pit(this),r=mit(t);return r===0?0:r-1}}),dit("lastIndex"))});var Ine=b(()=>{"use strict";var git=wt(),yit=ii(),Ene=Ht(),Tne=er(),_it=jr();git&&(_it(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=Ene(this),r=Tne(t);return r===0?void 0:t[r-1]},set:function(t){var r=Ene(this),o=Tne(r);return r[o===0?0:o-1]=t}}),yit("lastItem"))});var Cne=b(()=>{"use strict";uP()});var Pne=b(()=>{"use strict";cP()});var Mne=b(()=>{"use strict";hP()});var Mo=b((g4t,Lne)=>{"use strict";var One=Re(),xit=$u(),kne=Li(),bit=kne.Map,Rne=kne.proto,wit=One(Rne.forEach),Dne=One(Rne.entries),Sit=Dne(new bit).next;Lne.exports=function(e,t,r){return r?xit({iterator:Dne(e),next:Sit},function(o){return t(o[1],o[0])}):wit(e,t)}});var jw=b((y4t,Fne)=>{"use strict";var qit=Re(),Ait=Mt(),Eit=Ei(),Tit=er(),Iit=Ht(),ZR=Li(),Cit=Mo(),Pit=ZR.Map,Mit=ZR.has,Oit=ZR.set,kit=qit([].push);Fne.exports=function(t){var r=Iit(this),o=Tit(r),u=[],a=new Pit,m=Eit(t)?function(I){return I}:Ait(t),x,q,T;for(x=0;x<o;x++)q=r[x],T=m(q),Mit(a,T)||Oit(a,T,q);return Cit(a,function(I){kit(u,I)}),u}});var zne=b(()=>{"use strict";var Rit=$(),Dit=ii(),Lit=jw();Rit({target:"Array",proto:!0,forced:!0},{uniqueBy:Lit});Dit("uniqueBy")});var Nne=b(()=>{"use strict";dP()});var Bne=b(()=>{"use strict";RP()});var Une=b(()=>{"use strict";ZP()});var jne=b(()=>{"use strict";XP()});var JR=b((C4t,Kne)=>{"use strict";var Fit=tt(),zit=Re(),Nit=Ar(),Bit=Qe(),Uit=Mt(),Wne=Ei(),XR=di(),Gne=Et(),jit=Gne("asyncDispose"),Vne=Gne("dispose"),Vit=zit([].push),$it=function(e,t){if(t==="async-dispose"){var r=XR(e,jit);return r!==void 0||(r=XR(e,Vne),r===void 0)?r:function(){Fit(r,this)}}return XR(e,Vne)},$ne=function(e,t,r){return arguments.length<3&&!Wne(e)&&(r=Uit($it(Bit(e),t))),r===void 0?function(){}:Nit(r,e)};Kne.exports=function(e,t,r,o){var u;if(arguments.length<4){if(Wne(t)&&r==="sync-dispose")return;u=$ne(t,r)}else u=$ne(void 0,r,o);Vit(e.stack,u)}});var eae=b(()=>{"use strict";var Wit=$(),$w=wt(),Xne=Ot(),Hne=Mt(),Git=zn(),Jne=yr(),Kit=Po(),Hit=jr(),Yne=Et(),Qne=pr(),YR=JR(),Zne=Xne("Promise"),Zit=Xne("SuppressedError"),Xit=ReferenceError,Jit=Yne("asyncDispose"),Yit=Yne("toStringTag"),Gw="AsyncDisposableStack",Qit=Qne.set,Ww=Qne.getterFor(Gw),QR="async-dispose",Uy="disposed",ent="pending",Vw=function(e){var t=Ww(e);if(t.state===Uy)throw new Xit(Gw+" already disposed");return t},eD=function(){Qit(Git(this,Op),{type:Gw,state:ent,stack:[]}),$w||(this.disposed=!1)},Op=eD.prototype;Kit(Op,{disposeAsync:function(){var t=this;return new Zne(function(r,o){var u=Ww(t);if(u.state===Uy)return r(void 0);u.state=Uy,$w||(t.disposed=!0);var a=u.stack,m=a.length,x=!1,q,T=function(k){x?q=new Zit(k,q):(x=!0,q=k),I()},I=function(){if(m){var k=a[--m];a[m]=null;try{Zne.resolve(k()).then(I,T)}catch(B){T(B)}}else u.stack=null,x?o(q):r(void 0)};I()})},use:function(t){return YR(Vw(this),t,QR),t},adopt:function(t,r){var o=Vw(this);return Hne(r),YR(o,void 0,QR,function(){return r(t)}),t},defer:function(t){var r=Vw(this);Hne(t),YR(r,void 0,QR,t)},move:function(){var t=Vw(this),r=new eD;return Ww(r).stack=t.stack,t.stack=[],t.state=Uy,$w||(this.disposed=!0),r}});$w&&Hit(Op,"disposed",{configurable:!0,get:function(){return Ww(this).state===Uy}});Jne(Op,Jit,Op.disposeAsync,{name:"disposeAsync"});Jne(Op,Yit,Gw,{nonWritable:!0});Wit({global:!0,constructor:!0},{AsyncDisposableStack:eD})});var aae=b(()=>{"use strict";var tnt=$(),rnt=zn(),int=Ci(),rae=Ii(),iae=$t(),nnt=Et(),Ec=Pp(),nae=Kt(),tae=nnt("toStringTag"),ant=TypeError,tD=function(){if(rnt(this,Ec),int(this)===Ec)throw new ant("Abstract class AsyncIterator not directly constructable")};tD.prototype=Ec;iae(Ec,tae)||rae(Ec,tae,"AsyncIterator");(nae||!iae(Ec,"constructor")||Ec.constructor===Object)&&rae(Ec,"constructor",tD);tnt({global:!0,constructor:!0,forced:nae},{AsyncIterator:tD})});var Xh=b((R4t,dae)=>{"use strict";var ont=tt(),Kw=xc(),oae=Qe(),snt=pi(),unt=Ii(),lnt=Po(),cnt=Et(),uae=pr(),hnt=Ot(),fnt=di(),dnt=Pp(),rD=Xi(),sae=Du(),$s=hnt("Promise"),pnt=cnt("toStringTag"),lae="AsyncIteratorHelper",cae="WrapForValidAsyncIterator",mnt=uae.set,hae=function(e){var t=!e,r=uae.getterFor(e?cae:lae),o=function(u){var a=Kw(function(){return r(u)}),m=a.error,x=a.value;return m||t&&x.done?{exit:!0,value:m?$s.reject(x):$s.resolve(rD(void 0,!0))}:{exit:!1,value:x}};return lnt(snt(dnt),{next:function(){var a=o(this),m=a.value;if(a.exit)return m;var x=Kw(function(){return oae(m.nextHandler($s))}),q=x.error,T=x.value;return q&&(m.done=!0),q?$s.reject(T):$s.resolve(T)},return:function(){var u=o(this),a=u.value;if(u.exit)return a;a.done=!0;var m=a.iterator,x,q,T=Kw(function(){if(a.inner)try{sae(a.inner.iterator,"normal")}catch(I){return sae(m,"throw",I)}return fnt(m,"return")});return x=q=T.value,T.error?$s.reject(q):x===void 0?$s.resolve(rD(void 0,!0)):(T=Kw(function(){return ont(x,m)}),q=T.value,T.error?$s.reject(q):e?$s.resolve(q):$s.resolve(q).then(function(I){return oae(I),rD(void 0,!0)}))}})},vnt=hae(!0),fae=hae(!1);unt(fae,pnt,"Async Iterator Helper");dae.exports=function(e,t){var r=function(u,a){a?(a.iterator=u.iterator,a.next=u.next):a=u,a.type=t?cae:lae,a.nextHandler=e,a.counter=0,a.done=!1,mnt(this,a)};return r.prototype=t?vnt:fae,r}});var nD=b((D4t,mae)=>{"use strict";var gnt=tt(),ynt=Mt(),iD=Qe(),_nt=Dt(),xnt=Hr(),bnt=Xh(),pae=Xi(),wnt=Mp(),Snt=bnt(function(e){var t=this,r=t.iterator,o=t.mapper;return new e(function(u,a){var m=function(q){t.done=!0,a(q)},x=function(q){wnt(r,m,q,m)};e.resolve(iD(gnt(t.next,r))).then(function(q){try{if(iD(q).done)t.done=!0,u(pae(void 0,!0));else{var T=q.value;try{var I=o(T,t.counter++),k=function(B){u(pae(B,!1))};_nt(I)?e.resolve(I).then(k,x):k(I)}catch(B){x(B)}}}catch(B){m(B)}},m)})});mae.exports=function(t){return iD(this),ynt(t),new Snt(xnt(this),{mapper:t})}});var aD=b((L4t,vae)=>{"use strict";var qnt=tt(),Ant=nD(),Ent=function(e,t){return[t,e]};vae.exports=function(){return qnt(Ant,this,Ent)}});var gae=b(()=>{"use strict";var Tnt=$(),Int=aD();Tnt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:Int})});var bae=b(()=>{"use strict";var Cnt=tt(),Pnt=yr(),Mnt=Ot(),Ont=di(),knt=$t(),Rnt=Et(),yae=Pp(),_ae=Rnt("asyncDispose"),xae=Mnt("Promise");knt(yae,_ae)||Pnt(yae,_ae,function(){var e=this;return new xae(function(t,r){var o=Ont(e,"return");o?xae.resolve(Cnt(o,e)).then(function(){t(void 0)},r):t(void 0)})})});var Sae=b(()=>{"use strict";var Dnt=$(),Lnt=tt(),oD=Qe(),Fnt=Hr(),znt=iy(),Nnt=op(),Bnt=Xh(),wae=Xi(),Unt=Kt(),jnt=Bnt(function(e){var t=this;return new e(function(r,o){var u=function(m){t.done=!0,o(m)},a=function(){try{e.resolve(oD(Lnt(t.next,t.iterator))).then(function(m){try{oD(m).done?(t.done=!0,r(wae(void 0,!0))):t.remaining?(t.remaining--,a()):r(wae(m.value,!1))}catch(x){u(x)}},u)}catch(m){u(m)}};a()})});Dnt({target:"AsyncIterator",proto:!0,real:!0,forced:Unt},{drop:function(t){oD(this);var r=Nnt(znt(+t));return new jnt(Fnt(this),{remaining:r})}})});var qae=b(()=>{"use strict";var Vnt=$(),$nt=Zh().every;Vnt({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return $nt(this,t)}})});var Eae=b(()=>{"use strict";var Wnt=$(),Gnt=tt(),Knt=Mt(),sD=Qe(),Hnt=Dt(),Znt=Hr(),Xnt=Xh(),Aae=Xi(),Jnt=Mp(),Ynt=Kt(),Qnt=Xnt(function(e){var t=this,r=t.iterator,o=t.predicate;return new e(function(u,a){var m=function(T){t.done=!0,a(T)},x=function(T){Jnt(r,m,T,m)},q=function(){try{e.resolve(sD(Gnt(t.next,r))).then(function(T){try{if(sD(T).done)t.done=!0,u(Aae(void 0,!0));else{var I=T.value;try{var k=o(I,t.counter++),B=function(Y){Y?u(Aae(I,!1)):q()};Hnt(k)?e.resolve(k).then(B,x):B(k)}catch(Y){x(Y)}}}catch(Y){m(Y)}},m)}catch(T){m(T)}};q()})});Wnt({target:"AsyncIterator",proto:!0,real:!0,forced:Ynt},{filter:function(t){return sD(this),Knt(t),new Qnt(Znt(this),{predicate:t})}})});var Tae=b(()=>{"use strict";var eat=$(),tat=Zh().find;eat({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return tat(this,t)}})});var uD=b((Z4t,Pae)=>{"use strict";var rat=tt(),iat=jt(),Iae=Qe(),Cae=Hr(),nat=Ls(),aat=di(),oat=Et(),sat=Ny(),uat=oat("asyncIterator");Pae.exports=function(e){var t=Iae(e),r=!0,o=aat(t,uat),u;return iat(o)||(o=nat(t),r=!1),o!==void 0?u=rat(o,t):(u=t,r=!0),Iae(u),Cae(r?u:new sat(Cae(u)))}});var kae=b(()=>{"use strict";var lat=$(),Mae=tt(),cat=Mt(),jy=Qe(),hat=Dt(),fat=Hr(),dat=Xh(),Oae=Xi(),pat=uD(),mat=Mp(),vat=Kt(),gat=dat(function(e){var t=this,r=t.iterator,o=t.mapper;return new e(function(u,a){var m=function(I){t.done=!0,a(I)},x=function(I){mat(r,m,I,m)},q=function(){try{e.resolve(jy(Mae(t.next,r))).then(function(I){try{if(jy(I).done)t.done=!0,u(Oae(void 0,!0));else{var k=I.value;try{var B=o(k,t.counter++),Y=function(de){try{t.inner=pat(de),T()}catch(pe){x(pe)}};hat(B)?e.resolve(B).then(Y,x):Y(B)}catch(de){x(de)}}}catch(de){m(de)}},m)}catch(I){m(I)}},T=function(){var I=t.inner;if(I)try{e.resolve(jy(Mae(I.next,I.iterator))).then(function(k){try{jy(k).done?(t.inner=null,q()):u(Oae(k.value,!1))}catch(B){x(B)}},x)}catch(k){x(k)}else q()};T()})});lat({target:"AsyncIterator",proto:!0,real:!0,forced:vat},{flatMap:function(t){return jy(this),cat(t),new gat(fat(this),{mapper:t,inner:null})}})});var Rae=b(()=>{"use strict";var yat=$(),_at=Zh().forEach;yat({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return _at(this,t)}})});var lD=b((e5t,Dae)=>{"use strict";var xat=tt(),bat=Xh();Dae.exports=bat(function(){return xat(this.next,this.iterator)},!0)});var Lae=b(()=>{"use strict";var wat=$(),Sat=Ht(),qat=mn(),Aat=uD(),Eat=Pp(),Tat=lD(),Iat=Kt();wat({target:"AsyncIterator",stat:!0,forced:Iat},{from:function(t){var r=Aat(typeof t=="string"?Sat(t):t);return qat(Eat,r.iterator)?r.iterator:new Tat(r)}})});var Fae=b(()=>{"use strict";var Cat=$(),Pat=aD();Cat({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:Pat})});var zae=b(()=>{"use strict";var Mat=$(),Oat=nD(),kat=Kt();Mat({target:"AsyncIterator",proto:!0,real:!0,forced:kat},{map:Oat})});var Nae=b(()=>{"use strict";var Rat=$(),Dat=tt(),Lat=Mt(),cD=Qe(),Fat=Dt(),zat=Ot(),Nat=Hr(),Bat=Mp(),hD=zat("Promise"),Uat=TypeError;Rat({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){cD(this),Lat(t);var r=Nat(this),o=r.iterator,u=r.next,a=arguments.length<2,m=a?void 0:arguments[1],x=0;return new hD(function(q,T){var I=function(B){Bat(o,T,B,T)},k=function(){try{hD.resolve(cD(Dat(u,o))).then(function(B){try{if(cD(B).done)a?T(new Uat("Reduce of empty iterator with no initial value")):q(m);else{var Y=B.value;if(a)a=!1,m=Y,k();else try{var de=t(m,Y,x),pe=function(Z){m=Z,k()};Fat(de)?hD.resolve(de).then(pe,I):pe(de)}catch(Z){I(Z)}}x++}catch(Z){T(Z)}},T)}catch(B){T(B)}};k()})}})});var Bae=b(()=>{"use strict";var jat=$(),Vat=Zh().some;jat({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return Vat(this,t)}})});var Vae=b(()=>{"use strict";var $at=$(),Uae=tt(),jae=Qe(),Wat=Hr(),Gat=iy(),Kat=op(),Hat=Xh(),fD=Xi(),Zat=Kt(),Xat=Hat(function(e){var t=this,r=t.iterator,o;if(!t.remaining--){var u=fD(void 0,!0);return t.done=!0,o=r.return,o!==void 0?e.resolve(Uae(o,r,void 0)).then(function(){return u}):u}return e.resolve(Uae(t.next,r)).then(function(a){return jae(a).done?(t.done=!0,fD(void 0,!0)):fD(a.value,!1)}).then(null,function(a){throw t.done=!0,a})});$at({target:"AsyncIterator",proto:!0,real:!0,forced:Zat},{take:function(t){jae(this);var r=Kat(Gat(+t));return new Xat(Wat(this),{remaining:r})}})});var $ae=b(()=>{"use strict";var Jat=$(),Yat=Zh().toArray;Jat({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return Yat(this,void 0,[])}})});var Zw=b((m5t,Xae)=>{"use strict";var Gae=pr(),Qat=cc(),dD=Xi(),eot=Ei(),tot=Dt(),rot=jr(),Kae=wt(),Vy="Incorrect Iterator.range arguments",mD="NumericRangeIterator",iot=Gae.set,Hae=Gae.getterFor(mD),Wae=RangeError,pD=TypeError,Zae=Qat(function(t,r,o,u,a,m){if(typeof t!=u||r!==1/0&&r!==-1/0&&typeof r!=u)throw new pD(Vy);if(t===1/0||t===-1/0)throw new Wae(Vy);var x=r>t,q=!1,T;if(o===void 0)T=void 0;else if(tot(o))T=o.step,q=!!o.inclusive;else if(typeof o==u)T=o;else throw new pD(Vy);if(eot(T)&&(T=x?m:-m),typeof T!=u)throw new pD(Vy);if(T===1/0||T===-1/0||T===a&&t!==r)throw new Wae(Vy);var I=t!==t||r!==r||T!==T||r>t!=T>a;iot(this,{type:mD,start:t,end:r,step:T,inclusive:q,hitsEnd:I,currentCount:a,zero:a}),Kae||(this.start=t,this.end=r,this.step=T,this.inclusive=q)},mD,function(){var t=Hae(this);if(t.hitsEnd)return dD(void 0,!0);var r=t.start,o=t.end,u=t.step,a=r+u*t.currentCount++;a===o&&(t.hitsEnd=!0);var m=t.inclusive,x;return o>r?x=m?a>o:a>=o:x=m?o>a:o>=a,x?(t.hitsEnd=!0,dD(void 0,!0)):dD(a,!1)}),Hw=function(e){rot(Zae.prototype,e,{get:function(){return Hae(this)[e]},set:function(){},configurable:!0,enumerable:!1})};Kae&&(Hw("start"),Hw("end"),Hw("inclusive"),Hw("step"));Xae.exports=Zae});var Jae=b(()=>{"use strict";var not=$(),aot=Zw();typeof BigInt=="function"&&not({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,o){return new aot(t,r,o,"bigint",BigInt(0),BigInt(1))}})});var vD=b((y5t,toe)=>{"use strict";L1();Rw();var eoe=Ot(),oot=pi(),Yae=Dt(),sot=Object,uot=TypeError,lot=eoe("Map"),cot=eoe("WeakMap"),Xw=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=oot(null)};Xw.prototype.get=function(e,t){return this[e]||(this[e]=t())};Xw.prototype.next=function(e,t,r){var o=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new cot):this.primitives||(this.primitives=new lot),u=o.get(t);return u||o.set(t,u=new Xw),u};var Qae=new Xw;toe.exports=function(){var e=Qae,t=arguments.length,r,o;for(r=0;r<t;r++)Yae(o=arguments[r])&&(e=e.next(r,o,!0));if(this===sot&&e===Qae)throw new uot("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)Yae(o=arguments[r])||(e=e.next(r,o,!1));return e}});var ioe=b(()=>{"use strict";var hot=$(),fot=Fn(),dot=vD(),pot=Ot(),roe=pi(),mot=Object,vot=function(){var e=pot("Object","freeze");return e?e(roe(null)):roe(null)};hot({global:!0,forced:!0},{compositeKey:function(){return fot(dot,mot,arguments).get("object",vot)}})});var aoe=b(()=>{"use strict";var got=$(),yot=vD(),noe=Ot(),_ot=Fn();got({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?noe("Symbol").for(arguments[0]):_ot(yot,null,arguments).get("symbol",noe("Symbol"))}})});var ooe=b(()=>{"use strict";var xot=$(),bot=Re(),wot=y1().unpack,Sot=bot(DataView.prototype.getUint16);xot({target:"DataView",proto:!0},{getFloat16:function(t){var r=Sot(this,t,arguments.length>1?arguments[1]:!1);return wot([r&255,r>>8&255],10)}})});var soe=b(()=>{"use strict";var qot=$(),Aot=Re(),Eot=Aot(DataView.prototype.getUint8);qot({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return Eot(this,t)}})});var gD=b((T5t,uoe)=>{"use strict";var Tot=Sa(),Iot=TypeError;uoe.exports=function(e){if(Tot(e)==="DataView")return e;throw new Iot("Argument is not a DataView")}});var yD=b((I5t,loe)=>{"use strict";var Cot=pP(),Pot=.0009765625,Mot=65504,Oot=6103515625e-14;loe.exports=Math.f16round||function(t){return Cot(t,Pot,Mot,Oot)}});var coe=b(()=>{"use strict";var kot=$(),Rot=Re(),Dot=gD(),Lot=Qd(),Fot=y1().pack,zot=yD(),Not=Rot(DataView.prototype.setUint16);kot({target:"DataView",proto:!0},{setFloat16:function(t,r){Dot(this);var o=Lot(t),u=Fot(zot(r),10,2);return Not(this,o,u[1]<<8|u[0],arguments.length>2?arguments[2]:!1)}})});var hoe=b(()=>{"use strict";var Bot=$(),Uot=Re(),jot=gD(),Vot=Qd(),$ot=oR(),Wot=Uot(DataView.prototype.setUint8);Bot({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){jot(this);var o=Vot(t);return Wot(this,o,$ot(r))}})});var voe=b(()=>{"use strict";var Got=$(),Yw=wt(),Kot=Ot(),foe=Mt(),Hot=zn(),doe=yr(),Zot=Po(),Xot=jr(),poe=Et(),moe=pr(),_D=JR(),Jot=Kot("SuppressedError"),Yot=ReferenceError,Qot=poe("dispose"),est=poe("toStringTag"),eS="DisposableStack",tst=moe.set,Qw=moe.getterFor(eS),xD="sync-dispose",$y="disposed",rst="pending",Jw=function(e){var t=Qw(e);if(t.state===$y)throw new Yot(eS+" already disposed");return t},bD=function(){tst(Hot(this,kp),{type:eS,state:rst,stack:[]}),Yw||(this.disposed=!1)},kp=bD.prototype;Zot(kp,{dispose:function(){var t=Qw(this);if(t.state!==$y){t.state=$y,Yw||(this.disposed=!0);for(var r=t.stack,o=r.length,u=!1,a;o;){var m=r[--o];r[o]=null;try{m()}catch(x){u?a=new Jot(x,a):(u=!0,a=x)}}if(t.stack=null,u)throw a}},use:function(t){return _D(Jw(this),t,xD),t},adopt:function(t,r){var o=Jw(this);return foe(r),_D(o,void 0,xD,function(){r(t)}),t},defer:function(t){var r=Jw(this);foe(t),_D(r,void 0,xD,t)},move:function(){var t=Jw(this),r=new bD;return Qw(r).stack=t.stack,t.stack=[],t.state=$y,Yw||(this.disposed=!0),r}});Yw&&Xot(kp,"disposed",{configurable:!0,get:function(){return Qw(this).state===$y}});doe(kp,Qot,kp.dispose,{name:"dispose"});doe(kp,est,eS,{nonWritable:!0});Got({global:!0,constructor:!0},{DisposableStack:bD})});var wD=b((D5t,goe)=>{"use strict";var ist=Re(),nst=Mt();goe.exports=function(){return ist(nst(this))}});var yoe=b(()=>{"use strict";var ast=$(),ost=wD();ast({target:"Function",proto:!0,forced:!0},{demethodize:ost})});var xoe=b(()=>{"use strict";var sst=$(),ust=Re(),lst=jt(),cst=Ig(),hst=$t(),fst=wt(),dst=Object.getOwnPropertyDescriptor,_oe=/^\s*class\b/,pst=ust(_oe.exec),mst=function(e){try{if(!fst||!pst(_oe,cst(e)))return!1}catch(r){}var t=dst(e,"prototype");return!!t&&hst(t,"writable")&&!t.writable};sst({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return lst(t)&&!mst(t)}})});var boe=b(()=>{"use strict";var vst=$(),gst=os();vst({target:"Function",stat:!0,forced:!0},{isConstructor:gst})});var qoe=b(()=>{"use strict";var yst=Et(),_st=Dr().f,woe=yst("metadata"),Soe=Function.prototype;Soe[woe]===void 0&&_st(Soe,woe,{value:null})});var Aoe=b(()=>{"use strict";var xst=$(),bst=wD();xst({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:bst})});var Eoe=b(()=>{"use strict";iM()});var Toe=b(()=>{"use strict";uM()});var SD=b((X5t,Ioe)=>{"use strict";var wst=tt(),Sst=bM(),qst=function(e,t){return[t,e]};Ioe.exports=function(){return wst(Sst,this,qst)}});var Coe=b(()=>{"use strict";var Ast=$(),Est=SD();Ast({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:Est})});var Ooe=b(()=>{"use strict";var Tst=$(),Poe=tt(),Ist=Mt(),Moe=Qe(),Cst=Ls(),Pst=yc(),Mst=Array,Ost=Pst(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,r=this.iterables;if(t>=r.length){this.done=!0;return}var o=r[t];this.iterables[t]=null,e=this.iterator=Poe(o.method,o.iterable),this.next=e.next}var u=Moe(Poe(this.next,e));if(u.done){this.iterator=null,this.next=null;continue}return u.value}});Tst({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,r=Mst(t),o=0;o<t;o++){var u=Moe(arguments[o]);r[o]={iterable:u,method:Ist(Cst(u))}}return new Ost({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var Doe=b(()=>{"use strict";var kst=tt(),Rst=yr(),Dst=di(),Lst=$t(),Fst=Et(),koe=Lh().IteratorPrototype,Roe=Fst("dispose");Lst(koe,Roe)||Rst(koe,Roe,function(){var e=Dst(this,"return");e&&kst(e,this)})});var Loe=b(()=>{"use strict";fM()});var Foe=b(()=>{"use strict";dM()});var zoe=b(()=>{"use strict";pM()});var Noe=b(()=>{"use strict";mM()});var Boe=b(()=>{"use strict";yM()});var Uoe=b(()=>{"use strict";_M()});var joe=b(()=>{"use strict";xM()});var Voe=b(()=>{"use strict";var zst=$(),Nst=SD();zst({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:Nst})});var $oe=b(()=>{"use strict";wM()});var Goe=b(()=>{"use strict";var Bst=$(),Woe=Zw(),Ust=TypeError;Bst({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,o){if(typeof t=="number")return new Woe(t,r,o,"number",0,1);if(typeof t=="bigint")return new Woe(t,r,o,"bigint",BigInt(0),BigInt(1));throw new Ust("Incorrect Iterator.range arguments")}})});var Koe=b(()=>{"use strict";SM()});var Hoe=b(()=>{"use strict";qM()});var Zoe=b(()=>{"use strict";AM()});var Xoe=b(()=>{"use strict";EM()});var Yoe=b(()=>{"use strict";var jst=$(),Vst=Qe(),$st=Ny(),Wst=lD(),Joe=Hr(),Gst=Kt();jst({target:"Iterator",proto:!0,real:!0,forced:Gst},{toAsync:function(){return new Wst(Joe(new $st(Joe(Vst(this)))))}})});var qD=b((kjt,Qoe)=>{"use strict";var Kst=ze();Qoe.exports=!Kst(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var AD=b((Rjt,ese)=>{"use strict";var Hst=Dt(),Zst=pr().get;ese.exports=function(t){if(!Hst(t))return!1;var r=Zst(t);return!!r&&r.type==="RawJSON"}});var tse=b(()=>{"use strict";var Xst=$(),Jst=qD(),Yst=AD();Xst({target:"JSON",stat:!0,forced:!Jst},{isRawJSON:Yst})});var TD=b((Fjt,ase)=>{"use strict";var ED=Re(),Qst=$t(),tS=SyntaxError,eut=parseInt,tut=String.fromCharCode,rut=ED("".charAt),rse=ED("".slice),ise=ED(/./.exec),nse={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},iut=/^[\da-f]{4}$/i,nut=/^[\u0000-\u001F]$/;ase.exports=function(e,t){for(var r=!0,o="";t<e.length;){var u=rut(e,t);if(u==="\\"){var a=rse(e,t,t+2);if(Qst(nse,a))o+=nse[a],t+=2;else if(a==="\\u"){t+=2;var m=rse(e,t,t+4);if(!ise(iut,m))throw new tS("Bad Unicode escape at: "+t);o+=tut(eut(m,16)),t+=4}else throw new tS("Unknown escape sequence: \""+a+"\"")}else if(u==="\""){r=!1,t++;break}else{if(ise(nut,u))throw new tS("Bad control character in string literal at: "+t);o+=u,t++}}if(r)throw new tS("Unterminated string at: "+t);return{value:o,end:t}}});var dse=b(()=>{"use strict";var aut=$(),out=wt(),DD=Xe(),sut=Ot(),rS=Re(),uut=tt(),hse=jt(),lut=Dt(),cut=as(),hut=$t(),fut=zt(),ose=er(),OD=Io(),fse=ze(),dut=TD(),put=tc(),sse=DD.JSON,mut=DD.Number,Rp=DD.SyntaxError,LD=sse&&sse.parse,vut=sut("Object","keys"),gut=Object.getOwnPropertyDescriptor,gn=rS("".charAt),ID=rS("".slice),CD=rS(/./.exec),use=rS([].push),PD=/^\d$/,yut=/^[1-9]$/,_ut=/^[\d-]$/,Wy=/^[\t\n\r ]$/,MD=0,lse=1,xut=function(e,t){e=fut(e);var r=new RD(e,0,""),o=r.parse(),u=o.value,a=r.skip(Wy,o.end);if(a<e.length)throw new Rp("Unexpected extra character: \""+gn(e,a)+"\" after the parsed data at: "+a);return hse(t)?kD({"":u},"",t,o):u},kD=function(e,t,r,o){var u=e[t],a=o&&u===o.value,m=a&&typeof o.source=="string"?{source:o.source}:{},x,q,T,I,k;if(lut(u)){var B=cut(u),Y=a?o.nodes:B?[]:{};if(B)for(x=Y.length,T=ose(u),I=0;I<T;I++)cse(u,I,kD(u,""+I,r,I<x?Y[I]:void 0));else for(q=vut(u),T=ose(q),I=0;I<T;I++)k=q[I],cse(u,k,kD(u,k,r,hut(Y,k)?Y[k]:void 0))}return uut(r,e,t,u,m)},cse=function(e,t,r){if(out){var o=gut(e,t);if(o&&!o.configurable)return}r===void 0?delete e[t]:OD(e,t,r)},but=function(e,t,r,o){this.value=e,this.end=t,this.source=r,this.nodes=o},RD=function(e,t){this.source=e,this.index=t};RD.prototype={fork:function(e){return new RD(this.source,e)},parse:function(){var e=this.source,t=this.skip(Wy,this.index),r=this.fork(t),o=gn(e,t);if(CD(_ut,o))return r.number();switch(o){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null);}throw new Rp("Unexpected character: \""+o+"\" at: "+t)},node:function(e,t,r,o,u){return new but(t,o,e?null:ID(this.source,r,o),u)},object:function(){for(var e=this.source,t=this.index+1,r=!1,o={},u={};t<e.length;){if(t=this.until(["\"","}"],t),gn(e,t)==="}"&&!r){t++;break}var a=this.fork(t).string(),m=a.value;t=a.end,t=this.until([":"],t)+1,t=this.skip(Wy,t),a=this.fork(t).parse(),OD(u,m,a),OD(o,m,a.value),t=this.until([",","}"],a.end);var x=gn(e,t);if(x===",")r=!0,t++;else if(x==="}"){t++;break}}return this.node(lse,o,this.index,t,u)},array:function(){for(var e=this.source,t=this.index+1,r=!1,o=[],u=[];t<e.length;){if(t=this.skip(Wy,t),gn(e,t)==="]"&&!r){t++;break}var a=this.fork(t).parse();if(use(u,a),use(o,a.value),t=this.until([",","]"],a.end),gn(e,t)===",")r=!0,t++;else if(gn(e,t)==="]"){t++;break}}return this.node(lse,o,this.index,t,u)},string:function(){var e=this.index,t=dut(this.source,this.index+1);return this.node(MD,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(gn(e,r)==="-"&&r++,gn(e,r)==="0")r++;else if(CD(yut,gn(e,r)))r=this.skip(PD,r+1);else throw new Rp("Failed to parse number at: "+r);if(gn(e,r)==="."&&(r=this.skip(PD,r+1)),gn(e,r)==="e"||gn(e,r)==="E"){r++,(gn(e,r)==="+"||gn(e,r)==="-")&&r++;var o=r;if(r=this.skip(PD,r),o===r)throw new Rp("Failed to parse number's exponent value at: "+r)}return this.node(MD,mut(ID(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,o=r+t.length;if(ID(this.source,r,o)!==t)throw new Rp("Failed to parse value at: "+r);return this.node(MD,e,r,o)},skip:function(e,t){for(var r=this.source;t<r.length&&CD(e,gn(r,t));t++);return t},until:function(e,t){t=this.skip(Wy,t);for(var r=gn(this.source,t),o=0;o<e.length;o++)if(e[o]===r)return t;throw new Rp("Unexpected character: \""+r+"\" at: "+t)}};var wut=fse(function(){var e="9007199254740993",t;return LD(e,function(r,o,u){t=u.source}),t!==e}),Sut=put&&!fse(function(){return 1/LD("-0 \t")!==-1/0});aut({target:"JSON",stat:!0,forced:wut},{parse:function(t,r){return Sut&&!hse(r)?LD(t):xut(t,r)}})});var bse=b(()=>{"use strict";var _se=$(),qut=ju(),xse=qD(),iS=Ot(),Aut=tt(),BD=Re(),Eut=jt(),Tut=AD(),Iut=zt(),Cut=Io(),Put=TD(),Mut=vC(),Out=ic(),kut=pr().set,Rut=String,pse=SyntaxError,Dut=iS("JSON","parse"),mse=iS("JSON","stringify"),Lut=iS("Object","create"),Fut=iS("Object","freeze"),zD=BD("".charAt),FD=BD("".slice),zut=BD([].push),ND=Out(),vse=ND.length,gse="Unacceptable as raw JSON",yse=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};_se({target:"JSON",stat:!0,forced:!xse},{rawJSON:function(t){var r=Iut(t);if(r===""||yse(zD(r,0))||yse(zD(r,r.length-1)))throw new pse(gse);var o=Dut(r);if(typeof o=="object"&&o!==null)throw new pse(gse);var u=Lut(null);return kut(u,{type:"RawJSON"}),Cut(u,"rawJSON",r),qut?Fut(u):u}});mse&&_se({target:"JSON",stat:!0,arity:3,forced:!xse},{stringify:function(t,r,o){var u=Mut(r),a=[],m=mse(t,function(Y,de){var pe=Eut(u)?Aut(u,this,Rut(Y),de):de;return Tut(pe)?ND+(zut(a,pe.rawJSON)-1):pe},o);if(typeof m!="string")return m;for(var x="",q=m.length,T=0;T<q;T++){var I=zD(m,T);if(I==="\""){var k=Put(m,++T).end-1,B=FD(m,T,k);x+=FD(B,0,vse)===ND?a[FD(B,vse)]:"\""+B+"\"",T=k}else x+=I}return x}})});var yn=b((jjt,wse)=>{"use strict";var Nut=Li().has;wse.exports=function(e){return Nut(e),e}});var Sse=b(()=>{"use strict";var But=$(),Uut=yn(),jut=Li().remove;But({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Uut(this),r=!0,o,u=0,a=arguments.length;u<a;u++)o=jut(t,arguments[u]),r=r&&o;return!!r}})});var Ase=b(()=>{"use strict";var Vut=$(),$ut=yn(),UD=Li(),Wut=UD.get,Gut=UD.has,qse=UD.set;Vut({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var o=$ut(this),u,a;return Gut(o,t)?(u=Wut(o,t),"update"in r&&(u=r.update(u,t,o),qse(o,t,u)),u):(a=r.insert(t,o),qse(o,t,a),a)}})});var Ese=b(()=>{"use strict";var Kut=$(),Hut=Ar(),Zut=yn(),Xut=Mo();Kut({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=Zut(this),o=Hut(t,arguments.length>1?arguments[1]:void 0);return Xut(r,function(u,a){if(!o(u,a,r))return!1},!0)!==!1}})});var Ise=b(()=>{"use strict";var Jut=$(),Yut=Ar(),Qut=yn(),Tse=Li(),elt=Mo(),tlt=Tse.Map,rlt=Tse.set;Jut({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=Qut(this),o=Yut(t,arguments.length>1?arguments[1]:void 0),u=new tlt;return elt(r,function(a,m){o(a,m,r)&&rlt(u,m,a)}),u}})});var Cse=b(()=>{"use strict";var ilt=$(),nlt=Ar(),alt=yn(),olt=Mo();ilt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=alt(this),o=nlt(t,arguments.length>1?arguments[1]:void 0),u=olt(r,function(a,m){if(o(a,m,r))return{value:a}},!0);return u&&u.value}})});var Pse=b(()=>{"use strict";var slt=$(),ult=Ar(),llt=yn(),clt=Mo();slt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=llt(this),o=ult(t,arguments.length>1?arguments[1]:void 0),u=clt(r,function(a,m){if(o(a,m,r))return{key:m}},!0);return u&&u.key}})});var Gy=b((t6t,Mse)=>{"use strict";var hlt=Ar(),flt=Qe(),dlt=Ht(),plt=ri();Mse.exports=function(e,t,r){return function(u){var a=dlt(u),m=arguments.length,x=m>1?arguments[1]:void 0,q=x!==void 0,T=q?hlt(x,m>2?arguments[2]:void 0):void 0,I=new e,k=0;return plt(a,function(B){var Y=q?T(B,k++):B;r?t(I,flt(Y)[0],Y[1]):t(I,Y)}),I}}});var kse=b(()=>{"use strict";var mlt=$(),Ose=Li(),vlt=Gy();mlt({target:"Map",stat:!0,forced:!0},{from:vlt(Ose.Map,Ose.set,!0)})});var Rse=b(()=>{"use strict";var glt=$(),ylt=yn(),jD=Li(),_lt=jD.get,xlt=jD.has,blt=jD.set;glt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return xlt(ylt(this),t)?_lt(this,t):(blt(this,t,r),r)}})});var Dse=b(()=>{"use strict";var wlt=$(),Slt=Mt(),qlt=yn(),VD=Li(),Alt=VD.get,Elt=VD.has,Tlt=VD.set;wlt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(qlt(this),Slt(r),Elt(this,t))return Alt(this,t);t===0&&1/t===-1/0&&(t=0);var o=r(t);return Tlt(this,t,o),o}})});var Lse=b(()=>{"use strict";RM()});var zse=b((c6t,Fse)=>{"use strict";Fse.exports=function(e,t){return e===t||e!==e&&t!==t}});var Nse=b(()=>{"use strict";var Ilt=$(),Clt=zse(),Plt=yn(),Mlt=Mo();Ilt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return Mlt(Plt(this),function(r){if(Clt(r,t))return!0},!0)===!0}})});var Use=b(()=>{"use strict";var Olt=$(),klt=tt(),Rlt=ri(),Dlt=jt(),Bse=Mt(),Llt=Li().Map;Olt({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var o=Dlt(this)?this:Llt,u=new o;Bse(r);var a=Bse(u.set);return Rlt(t,function(m){klt(a,u,r(m),m)}),u}})});var jse=b(()=>{"use strict";var Flt=$(),zlt=yn(),Nlt=Mo();Flt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=Nlt(zlt(this),function(o,u){if(o===t)return{key:u}},!0);return r&&r.key}})});var $se=b(()=>{"use strict";var Blt=$(),Ult=Ar(),jlt=yn(),Vse=Li(),Vlt=Mo(),$lt=Vse.Map,Wlt=Vse.set;Blt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=jlt(this),o=Ult(t,arguments.length>1?arguments[1]:void 0),u=new $lt;return Vlt(r,function(a,m){Wlt(u,o(a,m,r),a)}),u}})});var Gse=b(()=>{"use strict";var Glt=$(),Klt=Ar(),Hlt=yn(),Wse=Li(),Zlt=Mo(),Xlt=Wse.Map,Jlt=Wse.set;Glt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=Hlt(this),o=Klt(t,arguments.length>1?arguments[1]:void 0),u=new Xlt;return Zlt(r,function(a,m){Jlt(u,m,o(a,m,r))}),u}})});var Kse=b(()=>{"use strict";var Ylt=$(),Qlt=yn(),ect=ri(),tct=Li().set;Ylt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=Qlt(this),o=arguments.length,u=0;u<o;)ect(arguments[u++],function(a,m){tct(r,a,m)},{AS_ENTRIES:!0});return r}})});var Ky=b((S6t,Hse)=>{"use strict";var rct=Qe();Hse.exports=function(e,t,r){return function(){for(var u=new e,a=arguments.length,m=0;m<a;m++){var x=arguments[m];r?t(u,rct(x)[0],x[1]):t(u,x)}return u}}});var Xse=b(()=>{"use strict";var ict=$(),Zse=Li(),nct=Ky();ict({target:"Map",stat:!0,forced:!0},{of:nct(Zse.Map,Zse.set,!0)})});var Jse=b(()=>{"use strict";var act=$(),oct=Mt(),sct=yn(),uct=Mo(),lct=TypeError;act({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=sct(this),o=arguments.length<2,u=o?void 0:arguments[1];if(oct(t),uct(r,function(a,m){o?(o=!1,u=a):u=t(u,a,m,r)}),o)throw new lct("Reduce of empty map with no initial value");return u}})});var Yse=b(()=>{"use strict";var cct=$(),hct=Ar(),fct=yn(),dct=Mo();cct({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=fct(this),o=hct(t,arguments.length>1?arguments[1]:void 0);return dct(r,function(u,a){if(o(u,a,r))return!0},!0)===!0}})});var eue=b(()=>{"use strict";var pct=$(),Qse=Mt(),mct=yn(),$D=Li(),vct=TypeError,gct=$D.get,yct=$D.has,_ct=$D.set;pct({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var o=mct(this),u=arguments.length;Qse(r);var a=yct(o,t);if(!a&&u<3)throw new vct("Updating absent value");var m=a?gct(o,t):Qse(u>2?arguments[2]:void 0)(t,o);return _ct(o,t,r(m,t,o)),o}})});var oS=b((O6t,tue)=>{"use strict";var nS=tt(),WD=Mt(),aS=jt(),xct=Qe(),bct=TypeError;tue.exports=function(t,r){var o=xct(this),u=WD(o.get),a=WD(o.has),m=WD(o.set),x=arguments.length>2?arguments[2]:void 0,q;if(!aS(r)&&!aS(x))throw new bct("At least one callback required");return nS(a,o,t)?(q=nS(u,o,t),aS(r)&&(q=r(q),nS(m,o,t,q))):aS(x)&&(q=x(),nS(m,o,t,q)),q}});var rue=b(()=>{"use strict";var wct=$(),Sct=oS();wct({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Sct})});var iue=b(()=>{"use strict";var qct=$(),Act=oS();qct({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Act})});var nue=b(()=>{"use strict";var Ect=$(),Tct=Math.min,Ict=Math.max;Ect({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,o){return Tct(o,Ict(r,t))}})});var aue=b(()=>{"use strict";var Cct=$();Cct({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var oue=b(()=>{"use strict";var Pct=$(),Mct=180/Math.PI;Pct({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*Mct}})});var GD=b((V6t,sue)=>{"use strict";sue.exports=Math.scale||function(t,r,o,u,a){var m=+t,x=+r,q=+o,T=+u,I=+a;return m!==m||x!==x||q!==q||T!==T||I!==I?NaN:m===1/0||m===-1/0?m:(m-x)*(I-T)/(q-x)+T}});var uue=b(()=>{"use strict";var Oct=$(),kct=GD(),Rct=g1();Oct({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,o,u,a){return Rct(kct(t,r,o,u,a))}})});var lue=b(()=>{"use strict";var Dct=$(),Lct=yD();Dct({target:"Math",stat:!0},{f16round:Lct})});var cue=b(()=>{"use strict";var Fct=$();Fct({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,o,u){var a=t>>>0,m=r>>>0,x=o>>>0;return m+(u>>>0)+((a&x|(a|x)&~(a+x>>>0))>>>31)|0}})});var hue=b(()=>{"use strict";var zct=$();zct({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var o=65535,u=+t,a=+r,m=u&o,x=a&o,q=u>>16,T=a>>16,I=(q*x>>>0)+(m*x>>>16);return q*T+(I>>16)+((m*T>>>0)+(I&o)>>16)}})});var fue=b(()=>{"use strict";var Nct=$();Nct({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,o,u){var a=t>>>0,m=r>>>0,x=o>>>0;return m-(u>>>0)-((~a&x|~(a^x)&a-x>>>0)>>>31)|0}})});var due=b(()=>{"use strict";var Bct=$();Bct({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var pue=b(()=>{"use strict";var Uct=$(),jct=Math.PI/180;Uct({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*jct}})});var mue=b(()=>{"use strict";var Vct=$(),$ct=GD();Vct({target:"Math",stat:!0,forced:!0},{scale:$ct})});var _ue=b(()=>{"use strict";var Wct=$(),Gct=Qe(),Kct=WM(),Hct=cc(),Zct=Xi(),vue=pr(),gue="Seeded Random",yue=gue+" Generator",Xct="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",Jct=vue.set,Yct=vue.getterFor(yue),Qct=TypeError,eht=Hct(function(t){Jct(this,{type:yue,seed:t%2147483647})},gue,function(){var t=Yct(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return Zct((r&1073741823)/1073741823,!1)});Wct({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=Gct(t).seed;if(!Kct(r))throw new Qct(Xct);return new eht(r)}})});var xue=b(()=>{"use strict";var tht=$();tht({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var Aue=b(()=>{"use strict";var rht=$(),iht=Re(),nht=ri(),aht=RangeError,oht=TypeError,Oo=1/0,sht=NaN,Jh=Math.abs,XD=Math.pow,bue=iht([].push),Hy=XD(2,1023),uht=XD(2,53)-1,wue=Number.MAX_VALUE,Sue=XD(2,971),Zy={},KD={},HD={},ZD={},que={},sS=function(e,t){var r=e+t,o=t-(r-e);return{hi:r,lo:o}};rht({target:"Math",stat:!0},{sumPrecise:function(t){var r=[],o=0,u=ZD;switch(nht(t,function(ve){if(++o>=uht)throw new aht("Maximum allowed index exceeded");if(typeof ve!="number")throw new oht("Value is not a number");u!==Zy&&(ve!==ve?u=Zy:ve===Oo?u=u===KD?Zy:HD:ve===-Oo?u=u===HD?Zy:KD:(ve!==0||1/ve===Oo)&&(u===ZD||u===que)&&(u=que,bue(r,ve)))}),u){case Zy:return sht;case KD:return-Oo;case HD:return Oo;case ZD:return-0;}for(var a=[],m=0,x,q,T,I,k,B,Y=0;Y<r.length;Y++){x=r[Y];for(var de=0,pe=0;pe<a.length;pe++){if(q=a[pe],Jh(x)<Jh(q)&&(B=x,x=q,q=B),T=sS(x,q),I=T.hi,k=T.lo,Jh(I)===Oo){var Z=I===Oo?1:-1;m+=Z,x=x-Z*Hy-Z*Hy,Jh(x)<Jh(q)&&(B=x,x=q,q=B),T=sS(x,q),I=T.hi,k=T.lo}k!==0&&(a[de++]=k),x=I}a.length=de,x!==0&&bue(a,x)}var H=a.length-1;if(I=0,k=0,m!==0){var J=H>=0?a[H]:0;if(H--,Jh(m)>1||m>0&&J>0||m<0&&J<0)return m>0?Oo:-Oo;if(T=sS(m*Hy,J/2),I=T.hi,k=T.lo,k*=2,Jh(2*I)===Oo)return I>0?I===Hy&&k===-(Sue/2)&&H>=0&&a[H]<0?wue:Oo:I===-Hy&&k===Sue/2&&H>=0&&a[H]>0?-wue:-Oo;k!==0&&(a[++H]=k,k=0),I*=2}for(;H>=0&&(T=sS(I,a[H--]),I=T.hi,k=T.lo,k===0););return H>=0&&(k<0&&a[H]<0||k>0&&a[H]>0)&&(q=k*2,x=I+q,q===x-I&&(I=x)),I}})});var Eue=b(()=>{"use strict";var lht=$();lht({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var o=65535,u=+t,a=+r,m=u&o,x=a&o,q=u>>>16,T=a>>>16,I=(q*x>>>0)+(m*x>>>16);return q*T+(I>>>16)+((m*T>>>0)+(I&o)>>>16)}})});var Cue=b(()=>{"use strict";var cht=$(),Jy=Re(),hht=Ur(),Xy="Invalid number representation",fht="Invalid radix",dht=RangeError,uS=SyntaxError,pht=TypeError,Tue=parseInt,mht=Math.pow,Iue=/^[\d.a-z]+$/,vht=Jy("".charAt),ght=Jy(Iue.exec),yht=Jy(1 .toString),_ht=Jy("".slice),xht=Jy("".split);cht({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var o=1;if(typeof t!="string")throw new pht(Xy);if(!t.length)throw new uS(Xy);if(vht(t,0)==="-"&&(o=-1,t=_ht(t,1),!t.length))throw new uS(Xy);var u=r===void 0?10:hht(r);if(u<2||u>36)throw new dht(fht);if(!ght(Iue,t))throw new uS(Xy);var a=xht(t,"."),m=Tue(a[0],u);if(a.length>1&&(m+=Tue(a[1],u)/mht(u,a[1].length)),u===10&&yht(m,u)!==t)throw new uS(Xy);return o*m}})});var Pue=b(()=>{"use strict";var bht=$(),wht=Zw();bht({target:"Number",stat:!0,forced:!0},{range:function(t,r,o){return new wht(t,r,o,"number",0,1)}})});var Mue=b(()=>{"use strict";nO()});var cS=b((xVt,Rue)=>{"use strict";var Oue=pr(),Sht=cc(),lS=Xi(),qht=$t(),Aht=Ch(),Eht=Ht(),kue="Object Iterator",Tht=Oue.set,Iht=Oue.getterFor(kue);Rue.exports=Sht(function(t,r){var o=Eht(t);Tht(this,{type:kue,mode:r,object:o,keys:Aht(o),index:0})},"Object",function(){for(var t=Iht(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,lS(void 0,!0);var o=r[t.index++],u=t.object;if(qht(u,o)){switch(t.mode){case"keys":return lS(o,!1);case"values":return lS(u[o],!1);}return lS([o,u[o]],!1)}}})});var Due=b(()=>{"use strict";var Cht=$(),Pht=cS();Cht({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new Pht(t,"entries")}})});var Lue=b(()=>{"use strict";var Mht=$(),Oht=cS();Mht({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new Oht(t,"keys")}})});var Fue=b(()=>{"use strict";var kht=$(),Rht=cS();kht({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new Rht(t,"values")}})});var zue=b(()=>{"use strict";iO()});var Hue=b(()=>{"use strict";var Dht=$(),hS=tt(),Yy=wt(),Lht=fc(),Nue=Mt(),Fht=Qe(),zht=zn(),Bue=jt(),Nht=Ei(),Bht=Dt(),fS=di(),Uht=yr(),JD=Po(),Uue=jr(),Dp=TO(),jht=Et(),jue=pr(),Vht=jht("observable"),YD="Observable",Vue="Subscription",$ue="SubscriptionObserver",QD=jue.getterFor,eL=jue.set,$ht=QD(YD),Wue=QD(Vue),dS=QD($ue),Gue=function(e){this.observer=Fht(e),this.cleanup=null,this.subscriptionObserver=null};Gue.prototype={type:Vue,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){Dp(t)}}},close:function(){if(!Yy){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var tL=function(e,t){var r=eL(this,new Gue(e)),o;Yy||(this.closed=!1);try{(o=fS(e,"start"))&&hS(o,e,this)}catch(x){Dp(x)}if(!r.isClosed()){var u=r.subscriptionObserver=new rL(r);try{var a=t(u),m=a;Nht(a)||(r.cleanup=Bue(a.unsubscribe)?function(){m.unsubscribe()}:Nue(a))}catch(x){u.error(x);return}r.isClosed()&&r.clean()}};tL.prototype=JD({},{unsubscribe:function(){var t=Wue(this);t.isClosed()||(t.close(),t.clean())}});Yy&&Uue(tL.prototype,"closed",{configurable:!0,get:function(){return Wue(this).isClosed()}});var rL=function(e){eL(this,{type:$ue,subscriptionState:e}),Yy||(this.closed=!1)};rL.prototype=JD({},{next:function(t){var r=dS(this).subscriptionState;if(!r.isClosed()){var o=r.observer;try{var u=fS(o,"next");u&&hS(u,o,t)}catch(a){Dp(a)}}},error:function(t){var r=dS(this).subscriptionState;if(!r.isClosed()){var o=r.observer;r.close();try{var u=fS(o,"error");u?hS(u,o,t):Dp(t)}catch(a){Dp(a)}r.clean()}},complete:function(){var t=dS(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var o=fS(r,"complete");o&&hS(o,r)}catch(u){Dp(u)}t.clean()}}});Yy&&Uue(rL.prototype,"closed",{configurable:!0,get:function(){return dS(this).subscriptionState.isClosed()}});var Kue=function(t){zht(this,iL),eL(this,{type:YD,subscriber:Nue(t)})},iL=Kue.prototype;JD(iL,{subscribe:function(t){var r=arguments.length;return new tL(Bue(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:Bht(t)?t:{},$ht(this).subscriber)}});Uht(iL,Vht,function(){return this});Dht({global:!0,constructor:!0,forced:!0},{Observable:Kue});Lht(YD)});var Xue=b(()=>{"use strict";var Wht=$(),Ght=Ot(),Kht=tt(),Zue=Qe(),Hht=os(),Zht=uc(),Xht=di(),Jht=ri(),Yht=Et(),Qht=Yht("observable");Wht({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=Hht(this)?this:Ght("Observable"),o=Xht(Zue(t),Qht);if(o){var u=Zue(Kht(o,t));return u.constructor===r?u:new r(function(m){return u.subscribe(m)})}var a=Zht(t);return new r(function(m){Jht(a,function(x,q){if(m.next(x),m.closed)return q()},{IS_ITERATOR:!0,INTERRUPTED:!0}),m.complete()})}})});var Yue=b(()=>{"use strict";var eft=$(),Jue=Ot(),tft=os(),rft=Jue("Array");eft({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=tft(this)?this:Jue("Observable"),r=arguments.length,o=rft(r),u=0;u<r;)o[u]=arguments[u++];return new t(function(a){for(var m=0;m<r;m++)if(a.next(o[m]),a.closed)return;a.complete()})}})});var Que=b(()=>{"use strict";Hue();Xue();Yue()});var ele=b(()=>{"use strict";UO()});var tle=b(()=>{"use strict";jO()});var rle=b(()=>{"use strict";GO()});var ile=b(()=>{"use strict";KO()});var Ws=b((WVt,sle)=>{"use strict";L1();Rw();var ole=Ot(),ift=Re(),nft=Mu(),nle=ole("Map"),aft=ole("WeakMap"),oft=ift([].push),ale=nft("metadata"),nL=ale.store||(ale.store=new aft),Qy=function(e,t,r){var o=nL.get(e);if(!o){if(!r)return;nL.set(e,o=new nle)}var u=o.get(t);if(!u){if(!r)return;o.set(t,u=new nle)}return u},sft=function(e,t,r){var o=Qy(t,r,!1);return o===void 0?!1:o.has(e)},uft=function(e,t,r){var o=Qy(t,r,!1);return o===void 0?void 0:o.get(e)},lft=function(e,t,r,o){Qy(r,o,!0).set(e,t)},cft=function(e,t){var r=Qy(e,t,!1),o=[];return r&&r.forEach(function(u,a){oft(o,a)}),o},hft=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};sle.exports={store:nL,getMap:Qy,has:sft,get:uft,set:lft,keys:cft,toKey:hft}});var lle=b(()=>{"use strict";var fft=$(),ule=Ws(),dft=Qe(),pft=ule.toKey,mft=ule.set;fft({target:"Reflect",stat:!0},{defineMetadata:function(t,r,o){var u=arguments.length<4?void 0:pft(arguments[3]);mft(t,r,dft(o),u)}})});var hle=b(()=>{"use strict";var vft=$(),aL=Ws(),gft=Qe(),yft=aL.toKey,_ft=aL.getMap,cle=aL.store;vft({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var o=arguments.length<3?void 0:yft(arguments[2]),u=_ft(gft(r),o,!1);if(u===void 0||!u.delete(t))return!1;if(u.size)return!0;var a=cle.get(r);return a.delete(o),!!a.size||cle.delete(r)}})});var dle=b(()=>{"use strict";var xft=$(),oL=Ws(),bft=Qe(),wft=Ci(),Sft=oL.has,qft=oL.get,Aft=oL.toKey,fle=function(e,t,r){var o=Sft(e,t,r);if(o)return qft(e,t,r);var u=wft(t);return u!==null?fle(e,u,r):void 0};xft({target:"Reflect",stat:!0},{getMetadata:function(t,r){var o=arguments.length<3?void 0:Aft(arguments[2]);return fle(t,bft(r),o)}})});var gle=b(()=>{"use strict";var Eft=$(),ple=Re(),mle=Ws(),Tft=Qe(),Ift=Ci(),Cft=jw(),Pft=ple(Cft),Mft=ple([].concat),Oft=mle.keys,kft=mle.toKey,vle=function(e,t){var r=Oft(e,t),o=Ift(e);if(o===null)return r;var u=vle(o,t);return u.length?r.length?Pft(Mft(r,u)):u:r};Eft({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:kft(arguments[1]);return vle(Tft(t),r)}})});var _le=b(()=>{"use strict";var Rft=$(),yle=Ws(),Dft=Qe(),Lft=yle.get,Fft=yle.toKey;Rft({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var o=arguments.length<3?void 0:Fft(arguments[2]);return Lft(t,Dft(r),o)}})});var ble=b(()=>{"use strict";var zft=$(),xle=Ws(),Nft=Qe(),Bft=xle.keys,Uft=xle.toKey;zft({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:Uft(arguments[1]);return Bft(Nft(t),r)}})});var qle=b(()=>{"use strict";var jft=$(),wle=Ws(),Vft=Qe(),$ft=Ci(),Wft=wle.has,Gft=wle.toKey,Sle=function(e,t,r){var o=Wft(e,t,r);if(o)return!0;var u=$ft(t);return u!==null?Sle(e,u,r):!1};jft({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var o=arguments.length<3?void 0:Gft(arguments[2]);return Sle(t,Vft(r),o)}})});var Ele=b(()=>{"use strict";var Kft=$(),Ale=Ws(),Hft=Qe(),Zft=Ale.has,Xft=Ale.toKey;Kft({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var o=arguments.length<3?void 0:Xft(arguments[2]);return Zft(t,Hft(r),o)}})});var Ile=b(()=>{"use strict";var Jft=$(),Tle=Ws(),Yft=Qe(),Qft=Tle.toKey,edt=Tle.set;Jft({target:"Reflect",stat:!0},{metadata:function(t,r){return function(u,a){edt(t,r,Yft(u),Qft(a))}}})});var e_=b((c8t,Cle)=>{"use strict";var tdt=TypeError;Cle.exports=function(e){if(typeof e=="string")return e;throw new tdt("Argument is not a string")}});var Dle=b(()=>{"use strict";var rdt=$(),t_=Re(),idt=e_(),ndt=$t(),Ple=ty().start,adt=Bh(),odt=Array,Mle=RegExp.escape,Ole=t_("".charAt),lL=t_("".charCodeAt),sdt=t_(1.1.toString),udt=t_([].join),Rle=/^[0-9a-z]/i,ldt=/^[$()*+./?[\\\]^{|}]/,cdt=RegExp("^[!\"#%&',\\-:;<=>@`~"+adt+"]"),sL=t_(Rle.exec),kle={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},uL=function(e){var t=sdt(lL(e,0),16);return t.length<3?"\\x"+Ple(t,2,"0"):"\\u"+Ple(t,4,"0")},hdt=!Mle||Mle("ab")!=="\\x61b";rdt({target:"RegExp",stat:!0,forced:hdt},{escape:function(t){idt(t);for(var r=t.length,o=odt(r),u=0;u<r;u++){var a=Ole(t,u);if(u===0&&sL(Rle,a))o[u]=uL(a);else if(ndt(kle,a))o[u]="\\"+kle[a];else if(sL(ldt,a))o[u]="\\"+a;else if(sL(cdt,a))o[u]=uL(a);else{var m=lL(a,0);(m&63488)!==55296?o[u]=a:m>=56320||u+1>=r||(lL(t,u+1)&64512)!==56320?o[u]=uL(a):(o[u]=a,o[++u]=Ole(t,u))}}return udt(o,"")}})});var Lle=b(()=>{"use strict";var fdt=$(),ddt=vn(),pdt=Ji().add;fdt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=ddt(this),r=0,o=arguments.length;r<o;r++)pdt(t,arguments[r]);return t}})});var Fle=b(()=>{"use strict";var mdt=$(),vdt=vn(),gdt=Ji().remove;mdt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=vdt(this),r=!0,o,u=0,a=arguments.length;u<a;u++)o=gdt(t,arguments[u]),r=r&&o;return!!r}})});var zle=b(()=>{"use strict";dk()});var Ble=b((_8t,Nle)=>{"use strict";var ydt=Sa(),_dt=$t(),xdt=Ei(),bdt=Et(),wdt=Dh(),Sdt=bdt("iterator"),qdt=Object;Nle.exports=function(e){if(xdt(e))return!1;var t=qdt(e);return t[Sdt]!==void 0||"@@iterator"in t||_dt(wdt,ydt(t))}});var Tc=b((x8t,jle)=>{"use strict";var Adt=Ot(),Ule=jt(),Edt=Ble(),Tdt=Dt(),Idt=Adt("Set"),Cdt=function(e){return Tdt(e)&&typeof e.size=="number"&&Ule(e.has)&&Ule(e.keys)};jle.exports=function(e){return Cdt(e)?e:Edt(e)?new Idt(e):e}});var Vle=b(()=>{"use strict";var Pdt=$(),Mdt=tt(),Odt=Tc(),kdt=fk();Pdt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return Mdt(kdt,this,Odt(t))}})});var $le=b(()=>{"use strict";var Rdt=$(),Ddt=Ar(),Ldt=vn(),Fdt=Ta();Rdt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=Ldt(this),o=Ddt(t,arguments.length>1?arguments[1]:void 0);return Fdt(r,function(u){if(!o(u,u,r))return!1},!0)!==!1}})});var Gle=b(()=>{"use strict";var zdt=$(),Ndt=Ar(),Bdt=vn(),Wle=Ji(),Udt=Ta(),jdt=Wle.Set,Vdt=Wle.add;zdt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=Bdt(this),o=Ndt(t,arguments.length>1?arguments[1]:void 0),u=new jdt;return Udt(r,function(a){o(a,a,r)&&Vdt(u,a)}),u}})});var Kle=b(()=>{"use strict";var $dt=$(),Wdt=Ar(),Gdt=vn(),Kdt=Ta();$dt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=Gdt(this),o=Wdt(t,arguments.length>1?arguments[1]:void 0),u=Kdt(r,function(a){if(o(a,a,r))return{value:a}},!0);return u&&u.value}})});var Zle=b(()=>{"use strict";var Hdt=$(),Hle=Ji(),Zdt=Gy();Hdt({target:"Set",stat:!0,forced:!0},{from:Zdt(Hle.Set,Hle.add,!1)})});var Xle=b(()=>{"use strict";vk()});var Jle=b(()=>{"use strict";var Xdt=$(),Jdt=tt(),Ydt=Tc(),Qdt=mk();Xdt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return Jdt(Qdt,this,Ydt(t))}})});var Yle=b(()=>{"use strict";yk()});var Qle=b(()=>{"use strict";var ept=$(),tpt=tt(),rpt=Tc(),ipt=gk();ept({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return tpt(ipt,this,rpt(t))}})});var ece=b(()=>{"use strict";xk()});var tce=b(()=>{"use strict";var npt=$(),apt=tt(),opt=Tc(),spt=_k();npt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return apt(spt,this,opt(t))}})});var rce=b(()=>{"use strict";wk()});var ice=b(()=>{"use strict";var upt=$(),lpt=tt(),cpt=Tc(),hpt=bk();upt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return lpt(hpt,this,cpt(t))}})});var ace=b(()=>{"use strict";var fpt=$(),nce=Re(),dpt=vn(),ppt=Ta(),mpt=zt(),vpt=nce([].join),gpt=nce([].push);fpt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=dpt(this),o=t===void 0?",":mpt(t),u=[];return ppt(r,function(a){gpt(u,a)}),vpt(u,o)}})});var sce=b(()=>{"use strict";var ypt=$(),_pt=Ar(),xpt=vn(),oce=Ji(),bpt=Ta(),wpt=oce.Set,Spt=oce.add;ypt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=xpt(this),o=_pt(t,arguments.length>1?arguments[1]:void 0),u=new wpt;return bpt(r,function(a){Spt(u,o(a,a,r))}),u}})});var lce=b(()=>{"use strict";var qpt=$(),uce=Ji(),Apt=Ky();qpt({target:"Set",stat:!0,forced:!0},{of:Apt(uce.Set,uce.add,!1)})});var cce=b(()=>{"use strict";var Ept=$(),Tpt=Mt(),Ipt=vn(),Cpt=Ta(),Ppt=TypeError;Ept({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=Ipt(this),o=arguments.length<2,u=o?void 0:arguments[1];if(Tpt(t),Cpt(r,function(a){o?(o=!1,u=a):u=t(u,a,a,r)}),o)throw new Ppt("Reduce of empty set with no initial value");return u}})});var hce=b(()=>{"use strict";var Mpt=$(),Opt=Ar(),kpt=vn(),Rpt=Ta();Mpt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=kpt(this),o=Opt(t,arguments.length>1?arguments[1]:void 0);return Rpt(r,function(u){if(o(u,u,r))return!0},!0)===!0}})});var fce=b(()=>{"use strict";Ak()});var dce=b(()=>{"use strict";var Dpt=$(),Lpt=tt(),Fpt=Tc(),zpt=qk();Dpt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return Lpt(zpt,this,Fpt(t))}})});var pce=b(()=>{"use strict";Tk()});var mce=b(()=>{"use strict";var Npt=$(),Bpt=tt(),Upt=Tc(),jpt=Ek();Npt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return Bpt(jpt,this,Upt(t))}})});var vce=b(()=>{"use strict";var Vpt=$(),$pt=Gh().charAt,Wpt=zr(),Gpt=Ur(),Kpt=zt();Vpt({target:"String",proto:!0,forced:!0},{at:function(t){var r=Kpt(Wpt(this)),o=r.length,u=Gpt(t),a=u>=0?u:o+u;return a<0||a>=o?void 0:$pt(r,a)}})});var cL=b((d$t,xce)=>{"use strict";var _ce=Re(),Hpt=Ti(),gce=zt(),Zpt=er(),Xpt=TypeError,yce=_ce([].push),Jpt=_ce([].join);xce.exports=function(t){var r=Hpt(t),o=Zpt(r);if(!o)return"";for(var u=arguments.length,a=[],m=0;;){var x=r[m++];if(x===void 0)throw new Xpt("Incorrect template");if(yce(a,gce(x)),m===o)return Jpt(a,"");m<u&&yce(a,gce(arguments[m]))}}});var bce=b(()=>{"use strict";var Ypt=$(),Qpt=cL();Ypt({target:"String",stat:!0,forced:!0},{cooked:Qpt})});var Ece=b(()=>{"use strict";var emt=$(),tmt=cc(),wce=Xi(),rmt=zr(),imt=zt(),Sce=pr(),qce=Gh(),nmt=qce.codeAt,amt=qce.charAt,Ace="String Iterator",omt=Sce.set,smt=Sce.getterFor(Ace),umt=tmt(function(t){omt(this,{type:Ace,string:t,index:0})},"String",function(){var t=smt(this),r=t.string,o=t.index,u;return o>=r.length?wce(void 0,!0):(u=amt(r,o),t.index+=u.length,wce({codePoint:nmt(u,0),position:o},!1))});emt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new umt(imt(rmt(this)))}})});var Wu=b((y$t,Tce)=>{"use strict";var pS=Re(),mS=WeakMap.prototype;Tce.exports={WeakMap,set:pS(mS.set),get:pS(mS.get),has:pS(mS.has),remove:pS(mS.delete)}});var Lce=b((_$t,Dce)=>{"use strict";var lmt=Ot(),vS=Re(),cmt=String.fromCharCode,hmt=lmt("String","fromCodePoint"),hL=vS("".charAt),kce=vS("".charCodeAt),Ice=vS("".indexOf),Cce=vS("".slice),dL=48,Rce=57,Pce=97,fmt=102,Mce=65,dmt=70,Oce=function(e,t){var r=kce(e,t);return r>=dL&&r<=Rce},fL=function(e,t,r){if(r>=e.length)return-1;for(var o=0;t<r;t++){var u=pmt(kce(e,t));if(u===-1)return-1;o=o*16+u}return o},pmt=function(e){return e>=dL&&e<=Rce?e-dL:e>=Pce&&e<=fmt?e-Pce+10:e>=Mce&&e<=dmt?e-Mce+10:-1};Dce.exports=function(e){for(var t="",r=0,o=0,u;(o=Ice(e,"\\",o))>-1;){if(t+=Cce(e,r,o),++o===e.length)return;var a=hL(e,o++);switch(a){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":o<e.length&&hL(e,o)===`
`&&++o;case`
`:case"\u2028":case"\u2029":break;case"0":if(Oce(e,o))return;t+="\0";break;case"x":if(u=fL(e,o,o+2),u===-1)return;o+=2,t+=cmt(u);break;case"u":if(o<e.length&&hL(e,o)==="{"){var m=Ice(e,"}",++o);if(m===-1)return;u=fL(e,o,m),o=m+1}else u=fL(e,o,o+4),o+=4;if(u===-1||u>1114111)return;t+=hmt(u);break;default:if(Oce(a,0))return;t+=a;}r=o}return t+Cce(e,r)}});var Gce=b(()=>{"use strict";var mmt=ju(),vmt=$(),gmt=Mg(),gS=Re(),Uce=Fn(),jce=Qe(),ymt=Ht(),_mt=jt(),xmt=er(),bmt=Dr().f,wmt=qa(),yS=Wu(),Smt=cL(),qmt=Lce(),Vce=Bh(),pL=new yS.WeakMap,Amt=yS.get,Emt=yS.has,Tmt=yS.set,mL=Array,r_=TypeError,Fce=Object.freeze||Object,Imt=Object.isFrozen,Cmt=Math.min,zce=gS("".charAt),$ce=gS("".slice),Pmt=gS("".split),Nce=gS(/./.exec),Mmt=/([\n\u2028\u2029]|\r\n?)/g,Omt=RegExp("^["+Vce+"]*"),kmt=RegExp("[^"+Vce+"]"),Bce="Invalid tag",Rmt="Invalid opening line",Dmt="Invalid closing line",Lmt=function(e){var t=e.raw;if(mmt&&!Imt(t))throw new r_("Raw template should be frozen");if(Emt(pL,t))return Amt(pL,t);var r=Fmt(t),o=Nmt(r);return bmt(o,"raw",{value:Fce(r)}),Fce(o),Tmt(pL,t,o),o},Fmt=function(e){var t=ymt(e),r=xmt(t),o=mL(r),u=mL(r),a=0,m,x,q,T;if(!r)throw new r_(Bce);for(;a<r;a++){var I=t[a];if(typeof I=="string")o[a]=Pmt(I,Mmt);else throw new r_(Bce)}for(a=0;a<r;a++){var k=a+1===r;if(m=o[a],a===0){if(m.length===1||m[0].length>0)throw new r_(Rmt);m[1]=""}if(k){if(m.length===1||Nce(kmt,m[m.length-1]))throw new r_(Dmt);m[m.length-2]="",m[m.length-1]=""}for(var B=2;B<m.length;B+=2){var Y=m[B],de=B+1===m.length&&!k,pe=Nce(Omt,Y)[0];if(!de&&pe.length===Y.length){m[B]="";continue}x=zmt(pe,x)}}var Z=x?x.length:0;for(a=0;a<r;a++){for(m=o[a],q=m[0],T=1;T<m.length;T+=2)q+=m[T]+$ce(m[T+1],Z);u[a]=q}return u},zmt=function(e,t){if(t===void 0||e===t)return e;for(var r=0,o=Cmt(e.length,t.length);r<o&&zce(e,r)===zce(t,r);r++);return $ce(e,0,r)},Nmt=function(e){for(var t=0,r=e.length,o=mL(r);t<r;t++)o[t]=qmt(e[t]);return o},Wce=function(e){return gmt(function(t){var r=wmt(arguments);return r[0]=Lmt(jce(t)),Uce(e,this,r)},"")},Bmt=Wce(Smt);vmt({target:"String",stat:!0,forced:!0},{dedent:function(t){return jce(t),_mt(t)?Wce(t):Uce(Bmt,this,arguments)}})});var Kce=b(()=>{"use strict";Pk()});var Hce=b(()=>{"use strict";zk()});var Zce=b(()=>{"use strict";Hk()});var Xce=b(()=>{"use strict";tR()});var Jce=b(()=>{"use strict";var Umt=Xe(),jmt=ti(),Vmt=Dr().f,$mt=Hi().f,vL=Umt.Symbol;jmt("asyncDispose");vL&&(i_=$mt(vL,"asyncDispose"),i_.enumerable&&i_.configurable&&i_.writable&&Vmt(vL,"asyncDispose",{value:i_.value,enumerable:!1,configurable:!1,writable:!1}));var i_});var Yce=b(()=>{"use strict";var Wmt=ti();Wmt("customMatcher")});var Qce=b(()=>{"use strict";var Gmt=Xe(),Kmt=ti(),Hmt=Dr().f,Zmt=Hi().f,gL=Gmt.Symbol;Kmt("dispose");gL&&(n_=Zmt(gL,"dispose"),n_.enumerable&&n_.configurable&&n_.writable&&Hmt(gL,"dispose",{value:n_.value,enumerable:!1,configurable:!1,writable:!1}));var n_});var _L=b((L$t,ehe)=>{"use strict";var Xmt=Ot(),Jmt=Re(),yL=Xmt("Symbol"),Ymt=yL.keyFor,Qmt=Jmt(yL.prototype.valueOf);ehe.exports=yL.isRegisteredSymbol||function(t){try{return Ymt(Qmt(t))!==void 0}catch(r){return!1}}});var the=b(()=>{"use strict";var evt=$(),tvt=_L();evt({target:"Symbol",stat:!0},{isRegisteredSymbol:tvt})});var rhe=b(()=>{"use strict";var rvt=$(),ivt=_L();rvt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:ivt})});var wL=b((U$t,uhe)=>{"use strict";var nvt=Mu(),ohe=Ot(),avt=Re(),ovt=Pu(),svt=Et(),xS=ohe("Symbol"),ihe=xS.isWellKnownSymbol,she=ohe("Object","getOwnPropertyNames"),uvt=avt(xS.prototype.valueOf),nhe=nvt("wks");for(_S=0,xL=she(xS),ahe=xL.length;_S<ahe;_S++)try{bL=xL[_S],ovt(xS[bL])&&svt(bL)}catch(e){}var bL,_S,xL,ahe;uhe.exports=function(t){if(ihe&&ihe(t))return!0;try{for(var r=uvt(t),o=0,u=she(nhe),a=u.length;o<a;o++)if(nhe[u[o]]==r)return!0}catch(m){}return!1}});var lhe=b(()=>{"use strict";var lvt=$(),cvt=wL();lvt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:cvt})});var che=b(()=>{"use strict";var hvt=$(),fvt=wL();hvt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:fvt})});var hhe=b(()=>{"use strict";var dvt=ti();dvt("matcher")});var fhe=b(()=>{"use strict";var pvt=ti();pvt("metadata")});var dhe=b(()=>{"use strict";var mvt=ti();mvt("metadataKey")});var phe=b(()=>{"use strict";var vvt=ti();vvt("observable")});var mhe=b(()=>{"use strict";var gvt=ti();gvt("patternMatch")});var vhe=b(()=>{"use strict";var yvt=ti();yvt("replaceAll")});var yhe=b(()=>{"use strict";var _vt=Ot(),xvt=py(),bvt=KR(),ghe=Gt(),wvt=Fu(),Svt=ghe.aTypedArrayConstructor,qvt=ghe.exportTypedArrayStaticMethod;qvt("fromAsync",function(t){var r=this,o=arguments.length,u=o>1?arguments[1]:void 0,a=o>2?arguments[2]:void 0;return new(_vt("Promise"))(function(m){xvt(r),m(bvt(t,u,a))}).then(function(m){return wvt(Svt(r),m)})},!0)});var _he=b(()=>{"use strict";vR()});var bhe=b(()=>{"use strict";var xhe=Gt(),Avt=mi().filterReject,Evt=bw(),Tvt=xhe.aTypedArray,Ivt=xhe.exportTypedArrayMethod;Ivt("filterOut",function(t){var r=Avt(Tvt(this),t,arguments.length>1?arguments[1]:void 0);return Evt(this,r)},!0)});var She=b(()=>{"use strict";var whe=Gt(),Cvt=mi().filterReject,Pvt=bw(),Mvt=whe.aTypedArray,Ovt=whe.exportTypedArrayMethod;Ovt("filterReject",function(t){var r=Cvt(Mvt(this),t,arguments.length>1?arguments[1]:void 0);return Pvt(this,r)},!0)});var qhe=b(()=>{"use strict";gR()});var Ahe=b(()=>{"use strict";yR()});var Ehe=b(()=>{"use strict";var SL=Gt(),kvt=Bw(),Rvt=SL.aTypedArray,Dvt=SL.getTypedArrayConstructor,Lvt=SL.exportTypedArrayMethod;Lvt("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return kvt(Rvt(this),t,r,Dvt)},!0)});var The=b(()=>{"use strict";OR()});var Ihe=b(()=>{"use strict";kR()});var Che=b(()=>{"use strict";var qL=Gt(),Fvt=er(),zvt=vw(),Nvt=ns(),Bvt=Cy(),Uvt=Ur(),jvt=ze(),Vvt=qL.aTypedArray,$vt=qL.getTypedArrayConstructor,Wvt=qL.exportTypedArrayMethod,Gvt=Math.max,Kvt=Math.min,Hvt=!jvt(function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return t[0]!==2||t[1]!==3});Wvt("toSpliced",function(t,r){var o=Vvt(this),u=$vt(o),a=Fvt(o),m=Nvt(t,a),x=arguments.length,q=0,T,I,k,B,Y,de,pe;if(x===0)T=I=0;else if(x===1)T=0,I=a-m;else if(I=Kvt(Gvt(Uvt(r),0),a-m),T=x-2,T){B=new u(T),k=zvt(B);for(var Z=2;Z<x;Z++)Y=arguments[Z],B[Z-2]=k?Bvt(Y):+Y}for(de=a+T-I,pe=new u(de);q<m;q++)pe[q]=o[q];for(;q<m+T;q++)pe[q]=B[q-m];for(;q<de;q++)pe[q]=o[q+I-T];return pe},!Hvt)});var Phe=b(()=>{"use strict";var Zvt=Re(),AL=Gt(),Xvt=Fu(),Jvt=jw(),Yvt=AL.aTypedArray,Qvt=AL.getTypedArrayConstructor,egt=AL.exportTypedArrayMethod,tgt=Zvt(Jvt);egt("uniqueBy",function(t){return Yvt(this),Xvt(Qvt(this),tgt(this,t))},!0)});var Mhe=b(()=>{"use strict";DR()});var EL=b((IWt,Ohe)=>{"use strict";var rgt=Dt(),igt=String,ngt=TypeError;Ohe.exports=function(e){if(e===void 0||rgt(e))return e;throw new ngt(igt(e)+" is not an object or undefined")}});var a_=b((CWt,Fhe)=>{"use strict";var Lhe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",khe=Lhe+"+/",Rhe=Lhe+"-_",Dhe=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};Fhe.exports={i2c:khe,c2i:Dhe(khe),i2cUrl:Rhe,c2iUrl:Dhe(Rhe)}});var TL=b((PWt,zhe)=>{"use strict";var agt=TypeError;zhe.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new agt("Incorrect `alphabet` option")}});var ML=b((MWt,Uhe)=>{"use strict";var Nhe=Xe(),ogt=Re(),sgt=EL(),ugt=e_(),lgt=$t(),Bhe=a_(),cgt=TL(),hgt=ap(),fgt=Bhe.c2i,dgt=Bhe.c2iUrl,Ic=Nhe.SyntaxError,pgt=Nhe.TypeError,Yh=ogt("".charAt),IL=function(e,t){for(var r=e.length;t<r;t++){var o=Yh(e,t);if(o!==" "&&o!=="\t"&&o!==`
`&&o!=="\f"&&o!=="\r")break}return t},CL=function(e,t,r){var o=e.length;o<4&&(e+=o===2?"AA":"A");var u=(t[Yh(e,0)]<<18)+(t[Yh(e,1)]<<12)+(t[Yh(e,2)]<<6)+t[Yh(e,3)],a=[u>>16&255,u>>8&255,u&255];if(o===2){if(r&&a[1]!==0)throw new Ic("Extra bits");return[a[0]]}if(o===3){if(r&&a[2]!==0)throw new Ic("Extra bits");return[a[0],a[1]]}return a},PL=function(e,t,r){for(var o=t.length,u=0;u<o;u++)e[r+u]=t[u];return r+o};Uhe.exports=function(e,t,r,o){ugt(e),sgt(t);var u=cgt(t)==="base64"?fgt:dgt,a=t?t.lastChunkHandling:void 0;if(a===void 0&&(a="loose"),a!=="loose"&&a!=="strict"&&a!=="stop-before-partial")throw new pgt("Incorrect `lastChunkHandling` option");r&&hgt(r.buffer);var m=r||[],x=0,q=0,T="",I=0;if(o)for(;;){if(I=IL(e,I),I===e.length){if(T.length>0){if(a==="stop-before-partial")break;if(a==="loose"){if(T.length===1)throw new Ic("Malformed padding: exactly one additional character");x=PL(m,CL(T,u,!1),x)}else throw new Ic("Missing padding")}q=e.length;break}var k=Yh(e,I);if(++I,k==="="){if(T.length<2)throw new Ic("Padding is too early");if(I=IL(e,I),T.length===2){if(I===e.length){if(a==="stop-before-partial")break;throw new Ic("Malformed padding: only one =")}Yh(e,I)==="="&&(++I,I=IL(e,I))}if(I<e.length)throw new Ic("Unexpected character after padding");x=PL(m,CL(T,u,a==="strict"),x),q=e.length;break}if(!lgt(u,k))throw new Ic("Unexpected character");var B=o-x;if(B===1&&T.length===2||B===2&&T.length===3||(T+=k,T.length===4&&(x=PL(m,CL(T,u,!1),x),T="",q=I,x===o)))break}return{bytes:m,read:q,written:x}}});var Vhe=b(()=>{"use strict";var mgt=$(),vgt=Xe(),ggt=Fu(),ygt=ML(),jhe=vgt.Uint8Array;jhe&&mgt({target:"Uint8Array",stat:!0},{fromBase64:function(t){var r=ygt(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return ggt(jhe,r.bytes)}})});var kL=b((RWt,Khe)=>{"use strict";var OL=Xe(),Whe=Re(),_gt=OL.Uint8Array,$he=OL.SyntaxError,xgt=OL.parseInt,bgt=Math.min,Ghe=/[^\da-f]/i,wgt=Whe(Ghe.exec),Sgt=Whe("".slice);Khe.exports=function(e,t){var r=e.length;if(r%2!==0)throw new $he("String should be an even number of characters");for(var o=t?bgt(t.length,r/2):r/2,u=t||new _gt(o),a=0,m=0;m<o;){var x=Sgt(e,a,a+=2);if(wgt(Ghe,x))throw new $he("String should only contain hex characters");u[m++]=xgt(x,16)}return{bytes:u,read:a}}});var Hhe=b(()=>{"use strict";var qgt=$(),Agt=Xe(),Egt=e_(),Tgt=kL();Agt.Uint8Array&&qgt({target:"Uint8Array",stat:!0},{fromHex:function(t){return Tgt(Egt(t)).bytes}})});var o_=b((FWt,Zhe)=>{"use strict";var Igt=Sa(),Cgt=TypeError;Zhe.exports=function(e){if(Igt(e)==="Uint8Array")return e;throw new Cgt("Argument is not an Uint8Array")}});var Xhe=b(()=>{"use strict";var Pgt=$(),Mgt=Xe(),Ogt=ML(),kgt=o_(),Rgt=Mgt.Uint8Array;Rgt&&Pgt({target:"Uint8Array",proto:!0},{setFromBase64:function(t){kgt(this);var r=Ogt(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var Jhe=b(()=>{"use strict";var Dgt=$(),Lgt=Xe(),Fgt=e_(),zgt=o_(),Ngt=ap(),Bgt=kL();Lgt.Uint8Array&&Dgt({target:"Uint8Array",proto:!0},{setFromHex:function(t){zgt(this),Fgt(t),Ngt(this.buffer);var r=Bgt(t,this).read;return{read:r,written:r/2}}})});var Qhe=b(()=>{"use strict";var Ugt=$(),jgt=Xe(),Vgt=Re(),$gt=EL(),Wgt=o_(),Ggt=ap(),Yhe=a_(),Kgt=TL(),Hgt=Yhe.i2c,Zgt=Yhe.i2cUrl,Xgt=Vgt("".charAt);jgt.Uint8Array&&Ugt({target:"Uint8Array",proto:!0},{toBase64:function(){var t=Wgt(this),r=arguments.length?$gt(arguments[0]):void 0,o=Kgt(r)==="base64"?Hgt:Zgt,u=!!r&&!!r.omitPadding;Ggt(this.buffer);for(var a="",m=0,x=t.length,q,T=function(I){return Xgt(o,q>>6*I&63)};m+2<x;m+=3)q=(t[m]<<16)+(t[m+1]<<8)+t[m+2],a+=T(3)+T(2)+T(1)+T(0);return m+2===x?(q=(t[m]<<16)+(t[m+1]<<8),a+=T(3)+T(2)+T(1)+(u?"":"=")):m+1===x&&(q=t[m]<<16,a+=T(3)+T(2)+(u?"":"==")),a}})});var efe=b(()=>{"use strict";var Jgt=$(),Ygt=Xe(),Qgt=Re(),eyt=o_(),tyt=ap(),ryt=Qgt(1 .toString);Ygt.Uint8Array&&Jgt({target:"Uint8Array",proto:!0},{toHex:function(){eyt(this),tyt(this.buffer);for(var t="",r=0,o=this.length;r<o;r++){var u=ryt(this[r],16);t+=u.length===1?"0"+u:u}return t}})});var s_=b((GWt,tfe)=>{"use strict";var iyt=Wu().has;tfe.exports=function(e){return iyt(e),e}});var rfe=b(()=>{"use strict";var nyt=$(),ayt=s_(),oyt=Wu().remove;nyt({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=ayt(this),r=!0,o,u=0,a=arguments.length;u<a;u++)o=oyt(t,arguments[u]),r=r&&o;return!!r}})});var nfe=b(()=>{"use strict";var syt=$(),ife=Wu(),uyt=Gy();syt({target:"WeakMap",stat:!0,forced:!0},{from:uyt(ife.WeakMap,ife.set,!0)})});var ofe=b(()=>{"use strict";var lyt=$(),afe=Wu(),cyt=Ky();lyt({target:"WeakMap",stat:!0,forced:!0},{of:cyt(afe.WeakMap,afe.set,!0)})});var ufe=b(()=>{"use strict";var hyt=$(),fyt=s_(),RL=Wu(),dyt=RL.get,pyt=RL.has,sfe=RL.set;hyt({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var o=fyt(this),u,a;return pyt(o,t)?(u=dyt(o,t),"update"in r&&(u=r.update(u,t,o),sfe(o,t,u)),u):(a=r.insert(t,o),sfe(o,t,a),a)}})});var lfe=b(()=>{"use strict";var myt=$(),vyt=s_(),DL=Wu(),gyt=DL.get,yyt=DL.has,_yt=DL.set;myt({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return yyt(vyt(this),t)?gyt(this,t):(_yt(this,t,r),r)}})});var hfe=b(()=>{"use strict";var xyt=$(),byt=Mt(),wyt=s_(),LL=Wu(),Syt=LL.get,qyt=LL.has,cfe=LL.set;xyt({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(wyt(this),byt(r),qyt(this,t))return Syt(this,t);cfe(this,t);var o=r(t);return cfe(this,t,o),o}})});var ffe=b(()=>{"use strict";var Ayt=$(),Eyt=oS();Ayt({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Eyt})});var Lp=b((s7t,dfe)=>{"use strict";var FL=Re(),zL=WeakSet.prototype;dfe.exports={WeakSet,add:FL(zL.add),has:FL(zL.has),remove:FL(zL.delete)}});var NL=b((u7t,pfe)=>{"use strict";var Tyt=Lp().has;pfe.exports=function(e){return Tyt(e),e}});var mfe=b(()=>{"use strict";var Iyt=$(),Cyt=NL(),Pyt=Lp().add;Iyt({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Cyt(this),r=0,o=arguments.length;r<o;r++)Pyt(t,arguments[r]);return t}})});var vfe=b(()=>{"use strict";var Myt=$(),Oyt=NL(),kyt=Lp().remove;Myt({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Oyt(this),r=!0,o,u=0,a=arguments.length;u<a;u++)o=kyt(t,arguments[u]),r=r&&o;return!!r}})});var yfe=b(()=>{"use strict";var Ryt=$(),gfe=Lp(),Dyt=Gy();Ryt({target:"WeakSet",stat:!0,forced:!0},{from:Dyt(gfe.WeakSet,gfe.add,!1)})});var xfe=b(()=>{"use strict";var Lyt=$(),_fe=Lp(),Fyt=Ky();Lyt({target:"WeakSet",stat:!0,forced:!0},{of:Fyt(_fe.WeakSet,_fe.add,!1)})});var Tfe=b(()=>{"use strict";var zyt=$(),Nyt=Xe(),Sfe=Ot(),BL=Re(),Byt=tt(),bS=ze(),Uyt=zt(),jyt=ro(),bfe=a_().c2i,qfe=/[^\d+/a-z]/i,Vyt=/[\t\n\f\r ]+/g,$yt=/[=]{1,2}$/,Qh=Sfe("atob"),Wyt=String.fromCharCode,Gyt=BL("".charAt),wfe=BL("".replace),Kyt=BL(qfe.exec),Fp=!!Qh&&!bS(function(){return Qh("aGk=")!=="hi"}),Afe=Fp&&bS(function(){return Qh(" ")!==""}),Efe=Fp&&!bS(function(){Qh("a")}),Hyt=Fp&&!bS(function(){Qh()}),Zyt=Fp&&Qh.length!==1,Xyt=!Fp||Afe||Efe||Hyt||Zyt;zyt({global:!0,bind:!0,enumerable:!0,forced:Xyt},{atob:function(t){if(jyt(arguments.length,1),Fp&&!Afe&&!Efe)return Byt(Qh,Nyt,t);var r=wfe(Uyt(t),Vyt,""),o="",u=0,a=0,m,x,q;if(r.length%4===0&&(r=wfe(r,$yt,"")),m=r.length,m%4===1||Kyt(qfe,r))throw new(Sfe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;u<m;)x=Gyt(r,u++),q=a%4?q*64+bfe[x]:bfe[x],a++%4&&(o+=Wyt(255&q>>(-2*a&6)));return o}})});var Ofe=b(()=>{"use strict";var Jyt=$(),Yyt=Xe(),Pfe=Ot(),Mfe=Re(),Qyt=tt(),UL=ze(),Ife=zt(),e_t=ro(),t_t=a_().i2c,zp=Pfe("btoa"),Cfe=Mfe("".charAt),r_t=Mfe("".charCodeAt),u_=!!zp&&!UL(function(){return zp("hi")!=="aGk="}),i_t=u_&&!UL(function(){zp()}),n_t=u_&&UL(function(){return zp(null)!=="bnVsbA=="}),a_t=u_&&zp.length!==1;Jyt({global:!0,bind:!0,enumerable:!0,forced:!u_||i_t||n_t||a_t},{btoa:function(t){if(e_t(arguments.length,1),u_)return Qyt(zp,Yyt,Ife(t));for(var r=Ife(t),o="",u=0,a=t_t,m,x;Cfe(r,u)||(a="=",u%1);){if(x=r_t(r,u+=3/4),x>255)throw new(Pfe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");m=m<<8|x,o+=Cfe(a,63&m>>8-u%1*8)}return o}})});var jL=b((b7t,kfe)=>{"use strict";kfe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var $L=b((w7t,Dfe)=>{"use strict";var o_t=Tg(),VL=o_t("span").classList,Rfe=VL&&VL.constructor&&VL.constructor.prototype;Dfe.exports=Rfe===Object.prototype?void 0:Rfe});var Nfe=b(()=>{"use strict";var Lfe=Xe(),Ffe=jL(),s_t=$L(),WL=$C(),u_t=Ii(),zfe=function(e){if(e&&e.forEach!==WL)try{u_t(e,"forEach",WL)}catch(t){e.forEach=WL}};for(wS in Ffe)Ffe[wS]&&zfe(Lfe[wS]&&Lfe[wS].prototype);var wS;zfe(s_t)});var $fe=b(()=>{"use strict";var Bfe=Xe(),jfe=jL(),l_t=$L(),l_=Kg(),Ufe=Ii(),c_t=ea(),h_t=Et(),GL=h_t("iterator"),KL=l_.values,Vfe=function(e,t){if(e){if(e[GL]!==KL)try{Ufe(e,GL,KL)}catch(o){e[GL]=KL}if(c_t(e,t,!0),jfe[t]){for(var r in l_)if(e[r]!==l_[r])try{Ufe(e,r,l_[r])}catch(o){e[r]=l_[r]}}}};for(SS in jfe)Vfe(Bfe[SS]&&Bfe[SS].prototype,SS);var SS;Vfe(l_t,"DOMTokenList")});var HL=b((T7t,Wfe)=>{"use strict";Wfe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var rde=b(()=>{"use strict";var f_t=$(),ES=Ot(),d_t=DP(),eF=ze(),p_t=pi(),tF=ba(),TS=Dr().f,m_t=yr(),qS=jr(),AS=$t(),v_t=zn(),g_t=Qe(),Hfe=TC(),Gfe=kh(),Np=HL(),y_t=Xb(),Zfe=pr(),rF=wt(),Xfe=Kt(),Bp="DOMException",QL="DATA_CLONE_ERR",CS=ES("Error"),Gu=ES(Bp)||function(){try{var e=ES("MessageChannel")||d_t("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===QL&&t.code===25)return t.constructor}}(),__t=Gu&&Gu.prototype,Jfe=CS.prototype,x_t=Zfe.set,b_t=Zfe.getterFor(Bp),w_t="stack"in new CS(Bp),Yfe=function(e){return AS(Np,e)&&Np[e].m?Np[e].c:0},iF=function(){v_t(this,h_);var t=arguments.length,r=Gfe(t<1?void 0:arguments[0]),o=Gfe(t<2?void 0:arguments[1],"Error"),u=Yfe(o);if(x_t(this,{type:Bp,name:o,message:r,code:u}),rF||(this.name=o,this.message=r,this.code=u),w_t){var a=new CS(r);a.name=Bp,TS(this,"stack",tF(1,y_t(a.stack,1)))}},h_=iF.prototype=p_t(Jfe),Qfe=function(e){return{enumerable:!0,configurable:!0,get:e}},ZL=function(e){return Qfe(function(){return b_t(this)[e]})};rF&&(qS(h_,"code",ZL("code")),qS(h_,"message",ZL("message")),qS(h_,"name",ZL("name")));TS(h_,"constructor",tF(1,iF));var PS=eF(function(){return!(new Gu instanceof CS)}),ede=PS||eF(function(){return Jfe.toString!==Hfe||String(new Gu(1,2))!=="2: 1"}),tde=PS||eF(function(){return new Gu(1,"DataCloneError").code!==25}),S_t=PS||Gu[QL]!==25||__t[QL]!==25,Kfe=Xfe?ede||tde||S_t:PS;f_t({global:!0,constructor:!0,forced:Kfe},{DOMException:Kfe?iF:Gu});var f_=ES(Bp),IS=f_.prototype;ede&&(Xfe||Gu===f_)&&m_t(IS,"toString",Hfe);tde&&rF&&Gu===f_&&qS(IS,"code",Qfe(function(){return Yfe(g_t(this).name)}));for(XL in Np)AS(Np,XL)&&(JL=Np[XL],c_=JL.s,YL=tF(6,JL.c),AS(f_,c_)||TS(f_,c_,YL),AS(IS,c_)||TS(IS,c_,YL));var JL,c_,YL,XL});var lde=b(()=>{"use strict";var q_t=$(),A_t=Xe(),hF=Ot(),lF=ba(),cF=Dr().f,ide=$t(),E_t=zn(),T_t=sc(),nde=kh(),nF=HL(),I_t=Xb(),C_t=wt(),sde=Kt(),p_="DOMException",ude=hF("Error"),m_=hF(p_),fF=function(){E_t(this,P_t);var t=arguments.length,r=nde(t<1?void 0:arguments[0]),o=nde(t<2?void 0:arguments[1],"Error"),u=new m_(r,o),a=new ude(r);return a.name=p_,cF(u,"stack",lF(1,I_t(a.stack,1))),T_t(u,this,fF),u},P_t=fF.prototype=m_.prototype,M_t="stack"in new ude(p_),O_t="stack"in new m_(1,2),aF=m_&&C_t&&Object.getOwnPropertyDescriptor(A_t,p_),k_t=!!aF&&!(aF.writable&&aF.configurable),ade=M_t&&!k_t&&!O_t;q_t({global:!0,constructor:!0,forced:sde||ade},{DOMException:ade?fF:m_});var d_=hF(p_),ode=d_.prototype;if(ode.constructor!==d_){sde||cF(ode,"constructor",lF(1,d_));for(oF in nF)ide(nF,oF)&&(sF=nF[oF],uF=sF.s,ide(d_,uF)||cF(d_,uF,lF(6,sF.c)))}var sF,uF,oF});var hde=b(()=>{"use strict";var R_t=Ot(),D_t=ea(),cde="DOMException";D_t(R_t(cde),cde)});var dde=b(()=>{"use strict";var L_t=$(),F_t=Xe(),fde=yy().clear;L_t({global:!0,bind:!0,enumerable:!0,forced:F_t.clearImmediate!==fde},{clearImmediate:fde})});var MS=b((L7t,mde)=>{"use strict";var pde=Xe(),z_t=Fn(),N_t=jt(),B_t=Xg(),U_t=ts(),j_t=qa(),V_t=ro(),$_t=pde.Function,W_t=/MSIE .\./.test(U_t)||B_t==="BUN"&&function(){var e=pde.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();mde.exports=function(e,t){var r=t?2:1;return W_t?function(o,u){var a=V_t(arguments.length,1)>r,m=N_t(o)?o:$_t(o),x=a?j_t(arguments,r):[],q=a?function(){z_t(m,this,x)}:m;return t?e(q,u):e(q)}:e}});var _de=b(()=>{"use strict";var G_t=$(),yde=Xe(),vde=yy().set,K_t=MS(),gde=yde.setImmediate?K_t(vde,!1):vde;G_t({global:!0,bind:!0,enumerable:!0,forced:yde.setImmediate!==gde},{setImmediate:gde})});var xde=b(()=>{"use strict";dde();_de()});var bde=b(()=>{"use strict";var H_t=$(),Z_t=Xe(),X_t=EO(),J_t=Mt(),Y_t=ro(),Q_t=ze(),e0t=wt(),t0t=Q_t(function(){return e0t&&Object.getOwnPropertyDescriptor(Z_t,"queueMicrotask").value.length!==1});H_t({global:!0,enumerable:!0,dontCallGetSet:!0,forced:t0t},{queueMicrotask:function(t){Y_t(arguments.length,1),X_t(J_t(t))}})});var Sde=b(()=>{"use strict";var r0t=$(),Cc=Xe(),i0t=jr(),n0t=wt(),a0t=TypeError,o0t=Object.defineProperty,wde=Cc.self!==Cc;try{n0t?(OS=Object.getOwnPropertyDescriptor(Cc,"self"),(wde||!OS||!OS.get||!OS.enumerable)&&i0t(Cc,"self",{get:function(){return Cc},set:function(t){if(this!==Cc)throw new a0t("Illegal invocation");o0t(Cc,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):r0t({global:!0,simple:!0,forced:wde},{self:Cc})}catch(e){}var OS});var Rde=b(()=>{"use strict";var s0t=Kt(),u0t=$(),xn=Xe(),g_=Ot(),__=Re(),yF=ze(),l0t=ic(),jp=jt(),c0t=os(),h0t=Ei(),FS=Dt(),f0t=Pu(),d0t=ri(),Ede=Qe(),DS=Sa(),p0t=$t(),m0t=Io(),dF=Ii(),kS=er(),v0t=ro(),g0t=yp(),zS=Li(),_F=Ji(),y0t=Ta(),qde=jP(),_0t=SC(),xF=C1(),v_=xn.Object,x0t=xn.Array,Tde=xn.Date,Ide=xn.Error,b0t=xn.TypeError,w0t=xn.PerformanceMark,ef=g_("DOMException"),vF=zS.Map,bF=zS.has,Cde=zS.get,LS=zS.set,Pde=_F.Set,Mde=_F.add,S0t=_F.has,q0t=g_("Object","keys"),A0t=__([].push),E0t=__((!0).valueOf),T0t=__(1 .valueOf),I0t=__("".valueOf),C0t=__(Tde.prototype.getTime),gF=l0t("structuredClone"),y_="DataCloneError",RS="Transferring",Ode=function(e){return!yF(function(){var t=new xn.Set([7]),r=e(t),o=e(v_(7));return r===t||!r.has(7)||!FS(o)||+o!=7})&&e},Ade=function(e,t){return!yF(function(){var r=new t,o=e({a:r,b:r});return!(o&&o.a===o.b&&o.a instanceof t&&o.a.stack===r.stack)})},P0t=function(e){return!yF(function(){var t=e(new xn.AggregateError([1],gF,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==gF||t.cause!==3})},Up=xn.structuredClone,M0t=s0t||!Ade(Up,Ide)||!Ade(Up,ef)||!P0t(Up),O0t=!Up&&Ode(function(e){return new w0t(gF,{detail:e}).detail}),Ku=Ode(Up)||O0t,pF=function(e){throw new ef("Uncloneable type: "+e,y_)},Pa=function(e,t){throw new ef((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",y_)},mF=function(e,t){return Ku||Pa(t),Ku(e)},k0t=function(){var e;try{e=new xn.DataTransfer}catch(t){try{e=new xn.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},kde=function(e,t,r){if(bF(t,e))return Cde(t,e);var o=r||DS(e),u,a,m,x,q,T;if(o==="SharedArrayBuffer")Ku?u=Ku(e):u=e;else{var I=xn.DataView;!I&&!jp(e.slice)&&Pa("ArrayBuffer");try{if(jp(e.slice)&&!e.resizable)u=e.slice(0);else for(a=e.byteLength,m=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,u=new ArrayBuffer(a,m),x=new I(e),q=new I(u),T=0;T<a;T++)q.setUint8(T,x.getUint8(T))}catch(k){throw new ef("ArrayBuffer is detached",y_)}}return LS(t,e,u),u},R0t=function(e,t,r,o,u){var a=xn[t];return FS(a)||Pa(t),new a(kde(e.buffer,u),r,o)},_n=function(e,t){if(f0t(e)&&pF("Symbol"),!FS(e))return e;if(t){if(bF(t,e))return Cde(t,e)}else t=new vF;var r=DS(e),o,u,a,m,x,q,T,I;switch(r){case"Array":a=x0t(kS(e));break;case"Object":a={};break;case"Map":a=new vF;break;case"Set":a=new Pde;break;case"RegExp":a=new RegExp(e.source,g0t(e));break;case"Error":switch(u=e.name,u){case"AggregateError":a=new(g_(u))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":a=new(g_(u));break;case"CompileError":case"LinkError":case"RuntimeError":a=new(g_("WebAssembly",u));break;default:a=new Ide;}break;case"DOMException":a=new ef(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":a=kde(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":q=r==="DataView"?e.byteLength:e.length,a=R0t(e,r,e.byteOffset,q,t);break;case"DOMQuad":try{a=new DOMQuad(_n(e.p1,t),_n(e.p2,t),_n(e.p3,t),_n(e.p4,t))}catch(k){a=mF(e,r)}break;case"File":if(Ku)try{a=Ku(e),DS(a)!==r&&(a=void 0)}catch(k){}if(!a)try{a=new File([e],e.name,e)}catch(k){}a||Pa(r);break;case"FileList":if(m=k0t(),m){for(x=0,q=kS(e);x<q;x++)m.items.add(_n(e[x],t));a=m.files}else a=mF(e,r);break;case"ImageData":try{a=new ImageData(_n(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(k){a=mF(e,r)}break;default:if(Ku)a=Ku(e);else switch(r){case"BigInt":a=v_(e.valueOf());break;case"Boolean":a=v_(E0t(e));break;case"Number":a=v_(T0t(e));break;case"String":a=v_(I0t(e));break;case"Date":a=new Tde(C0t(e));break;case"Blob":try{a=e.slice(0,e.size,e.type)}catch(k){Pa(r)}break;case"DOMPoint":case"DOMPointReadOnly":o=xn[r];try{a=o.fromPoint?o.fromPoint(e):new o(e.x,e.y,e.z,e.w)}catch(k){Pa(r)}break;case"DOMRect":case"DOMRectReadOnly":o=xn[r];try{a=o.fromRect?o.fromRect(e):new o(e.x,e.y,e.width,e.height)}catch(k){Pa(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":o=xn[r];try{a=o.fromMatrix?o.fromMatrix(e):new o(e)}catch(k){Pa(r)}break;case"AudioData":case"VideoFrame":jp(e.clone)||Pa(r);try{a=e.clone()}catch(k){pF(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Pa(r);default:pF(r);}}switch(LS(t,e,a),r){case"Array":case"Object":for(T=q0t(e),x=0,q=kS(T);x<q;x++)I=T[x],m0t(a,I,_n(e[I],t));break;case"Map":e.forEach(function(k,B){LS(a,_n(B,t),_n(k,t))});break;case"Set":e.forEach(function(k){Mde(a,_n(k,t))});break;case"Error":dF(a,"message",_n(e.message,t)),p0t(e,"cause")&&dF(a,"cause",_n(e.cause,t)),u==="AggregateError"?a.errors=_n(e.errors,t):u==="SuppressedError"&&(a.error=_n(e.error,t),a.suppressed=_n(e.suppressed,t));case"DOMException":_0t&&dF(a,"stack",_n(e.stack,t));}return a},D0t=function(e,t){if(!FS(e))throw new b0t("Transfer option cannot be converted to a sequence");var r=[];d0t(e,function(B){A0t(r,Ede(B))});for(var o=0,u=kS(r),a=new Pde,m,x,q,T,I,k;o<u;){if(m=r[o++],x=DS(m),x==="ArrayBuffer"?S0t(a,m):bF(t,m))throw new ef("Duplicate transferable",y_);if(x==="ArrayBuffer"){Mde(a,m);continue}if(xF)T=Up(m,{transfer:[m]});else switch(x){case"ImageBitmap":q=xn.OffscreenCanvas,c0t(q)||Pa(x,RS);try{I=new q(m.width,m.height),k=I.getContext("bitmaprenderer"),k.transferFromImageBitmap(m),T=I.transferToImageBitmap()}catch(B){}break;case"AudioData":case"VideoFrame":(!jp(m.clone)||!jp(m.close))&&Pa(x,RS);try{T=m.clone(),m.close()}catch(B){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Pa(x,RS);}if(T===void 0)throw new ef("This object cannot be transferred: "+x,y_);LS(t,m,T)}return a},L0t=function(e){y0t(e,function(t){xF?Ku(t,{transfer:[t]}):jp(t.transfer)?t.transfer():qde?qde(t):Pa("ArrayBuffer",RS)})};u0t({global:!0,enumerable:!0,sham:!xF,forced:M0t},{structuredClone:function(t){var r=v0t(arguments.length,1)>1&&!h0t(arguments[1])?Ede(arguments[1]):void 0,o=r?r.transfer:void 0,u,a;o!==void 0&&(u=new vF,a=D0t(o,u));var m=_n(t,u);return a&&L0t(a),m}})});var Fde=b(()=>{"use strict";var F0t=$(),Lde=Xe(),z0t=MS(),Dde=z0t(Lde.setInterval,!0);F0t({global:!0,bind:!0,forced:Lde.setInterval!==Dde},{setInterval:Dde})});var Bde=b(()=>{"use strict";var N0t=$(),Nde=Xe(),B0t=MS(),zde=B0t(Nde.setTimeout,!0);N0t({global:!0,bind:!0,forced:Nde.setTimeout!==zde},{setTimeout:zde})});var Ude=b(()=>{"use strict";Fde();Bde()});var x_=b((Q7t,Vde)=>{"use strict";var U0t=ze(),j0t=Et(),V0t=wt(),jde=Kt(),$0t=j0t("iterator");Vde.exports=!U0t(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),o="";return e.pathname="c%20d",t.forEach(function(u,a){t.delete("b"),o+=a+u}),r.delete("a",2),r.delete("b",void 0),jde&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(jde||!V0t)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[$0t]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||o!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var Yde=b((eGt,Jde)=>{"use strict";var tf=Re(),wF=2147483647,b_=36,Hde=1,AF=26,W0t=38,G0t=700,K0t=72,H0t=128,Z0t="-",X0t=/[^\0-\u007E]/,Zde=/[.\u3002\uFF0E\uFF61]/g,$de="Overflow: input needs wider integers to process",SF=b_-Hde,Wde=RangeError,J0t=tf(Zde.exec),Vp=Math.floor,qF=String.fromCharCode,Gde=tf("".charCodeAt),Xde=tf([].join),Pc=tf([].push),Y0t=tf("".replace),Q0t=tf("".split),ext=tf("".toLowerCase),txt=function(e){for(var t=[],r=0,o=e.length;r<o;){var u=Gde(e,r++);if(u>=55296&&u<=56319&&r<o){var a=Gde(e,r++);(a&64512)===56320?Pc(t,((u&1023)<<10)+(a&1023)+65536):(Pc(t,u),r--)}else Pc(t,u)}return t},Kde=function(e){return e+22+75*(e<26)},rxt=function(e,t,r){var o=0;for(e=r?Vp(e/G0t):e>>1,e+=Vp(e/t);e>SF*AF>>1;)e=Vp(e/SF),o+=b_;return Vp(o+(SF+1)*e/(e+W0t))},ixt=function(e){var t=[];e=txt(e);var r=e.length,o=H0t,u=0,a=K0t,m,x;for(m=0;m<e.length;m++)x=e[m],x<128&&Pc(t,qF(x));var q=t.length,T=q;for(q&&Pc(t,Z0t);T<r;){var I=wF;for(m=0;m<e.length;m++)x=e[m],x>=o&&x<I&&(I=x);var k=T+1;if(I-o>Vp((wF-u)/k))throw new Wde($de);for(u+=(I-o)*k,o=I,m=0;m<e.length;m++){if(x=e[m],x<o&&++u>wF)throw new Wde($de);if(x===o){for(var B=u,Y=b_;;){var de=Y<=a?Hde:Y>=a+AF?AF:Y-a;if(B<de)break;var pe=B-de,Z=b_-de;Pc(t,qF(Kde(de+pe%Z))),B=Vp(pe/Z),Y+=b_}Pc(t,qF(Kde(B))),a=rxt(u,k,T===q),u=0,T++}}u++,o++}return Xde(t,"")};Jde.exports=function(e){var t=[],r=Q0t(Y0t(ext(e),Zde,"."),"."),o,u;for(o=0;o<r.length;o++)u=r[o],Pc(t,J0t(X0t,u)?"xn--"+ixt(u):u);return Xde(t,".")}});var RF=b((tGt,bpe)=>{"use strict";Kg();Ck();var MF=$(),hpe=Xe(),OF=_O(),nxt=Ot(),NS=tt(),ls=Re(),w_=wt(),fpe=x_(),dpe=yr(),axt=jr(),oxt=Po(),sxt=ea(),uxt=cc(),kF=pr(),ppe=zn(),EF=jt(),lxt=$t(),cxt=Ar(),hxt=Sa(),fxt=Qe(),mpe=Dt(),ra=zt(),dxt=pi(),Qde=ba(),epe=uc(),pxt=Ls(),BS=Xi(),$p=ro(),mxt=Et(),vxt=d1(),gxt=mxt("iterator"),Gp="URLSearchParams",vpe=Gp+"Iterator",gpe=kF.set,ko=kF.getterFor(Gp),yxt=kF.getterFor(vpe),tpe=OF("fetch"),VS=OF("Request"),S_=OF("Headers"),TF=VS&&VS.prototype,rpe=S_&&S_.prototype,_xt=hpe.TypeError,xxt=hpe.encodeURIComponent,bxt=String.fromCharCode,wxt=nxt("String","fromCodePoint"),Sxt=parseInt,jS=ls("".charAt),ipe=ls([].join),Mc=ls([].push),ype=ls("".replace),qxt=ls([].shift),npe=ls([].splice),ape=ls("".split),_pe=ls("".slice),Axt=ls(/./.exec),Ext=/\+/g,IF="\uFFFD",Txt=/^[0-9a-f]+$/i,ope=function(e,t){var r=_pe(e,t,t+2);return Axt(Txt,r)?Sxt(r,16):NaN},Ixt=function(e){for(var t=0,r=128;r>0&&e&r;r>>=1)t++;return t},Cxt=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break;}return t>1114111?null:t},spe=function(e){e=ype(e,Ext," ");for(var t=e.length,r="",o=0;o<t;){var u=jS(e,o);if(u==="%"){if(jS(e,o+1)==="%"||o+3>t){r+="%",o++;continue}var a=ope(e,o+1);if(a!==a){r+=u,o++;continue}o+=2;var m=Ixt(a);if(m===0)u=bxt(a);else{if(m===1||m>4){r+=IF,o++;continue}for(var x=[a],q=1;q<m&&(o++,!(o+3>t||jS(e,o)!=="%"));){var T=ope(e,o+1);if(T!==T){o+=3;break}if(T>191||T<128)break;Mc(x,T),o+=2,q++}if(x.length!==m){r+=IF;continue}var I=Cxt(x);I===null?r+=IF:u=wxt(I)}}r+=u,o++}return r},Pxt=/[!'()~]|%20/g,Mxt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Oxt=function(e){return Mxt[e]},upe=function(e){return ype(xxt(e),Pxt,Oxt)},CF=uxt(function(t,r){gpe(this,{type:vpe,target:ko(t).entries,index:0,kind:r})},Gp,function(){var t=yxt(this),r=t.target,o=t.index++;if(!r||o>=r.length)return t.target=null,BS(void 0,!0);var u=r[o];switch(t.kind){case"keys":return BS(u.key,!1);case"values":return BS(u.value,!1);}return BS([u.key,u.value],!1)},!0),xpe=function(e){this.entries=[],this.url=null,e!==void 0&&(mpe(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?jS(e,0)==="?"?_pe(e,1):e:ra(e)))};xpe.prototype={type:Gp,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,r=pxt(e),o,u,a,m,x,q,T;if(r)for(o=epe(e,r),u=o.next;!(a=NS(u,o)).done;){if(m=epe(fxt(a.value)),x=m.next,(q=NS(x,m)).done||(T=NS(x,m)).done||!NS(x,m).done)throw new _xt("Expected sequence with length 2");Mc(t,{key:ra(q.value),value:ra(T.value)})}else for(var I in e)lxt(e,I)&&Mc(t,{key:I,value:ra(e[I])})},parseQuery:function(e){if(e)for(var t=this.entries,r=ape(e,"&"),o=0,u,a;o<r.length;)u=r[o++],u.length&&(a=ape(u,"="),Mc(t,{key:spe(qxt(a)),value:spe(ipe(a,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,o;r<e.length;)o=e[r++],Mc(t,upe(o.key)+"="+upe(o.value));return ipe(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var $S=function(){ppe(this,Wp);var t=arguments.length>0?arguments[0]:void 0,r=gpe(this,new xpe(t));w_||(this.size=r.entries.length)},Wp=$S.prototype;oxt(Wp,{append:function(t,r){var o=ko(this);$p(arguments.length,2),Mc(o.entries,{key:ra(t),value:ra(r)}),w_||this.length++,o.updateURL()},delete:function(e){for(var t=ko(this),r=$p(arguments.length,1),o=t.entries,u=ra(e),a=r<2?void 0:arguments[1],m=a===void 0?a:ra(a),x=0;x<o.length;){var q=o[x];if(q.key===u&&(m===void 0||q.value===m)){if(npe(o,x,1),m!==void 0)break}else x++}w_||(this.size=o.length),t.updateURL()},get:function(t){var r=ko(this).entries;$p(arguments.length,1);for(var o=ra(t),u=0;u<r.length;u++)if(r[u].key===o)return r[u].value;return null},getAll:function(t){var r=ko(this).entries;$p(arguments.length,1);for(var o=ra(t),u=[],a=0;a<r.length;a++)r[a].key===o&&Mc(u,r[a].value);return u},has:function(t){for(var r=ko(this).entries,o=$p(arguments.length,1),u=ra(t),a=o<2?void 0:arguments[1],m=a===void 0?a:ra(a),x=0;x<r.length;){var q=r[x++];if(q.key===u&&(m===void 0||q.value===m))return!0}return!1},set:function(t,r){var o=ko(this);$p(arguments.length,1);for(var u=o.entries,a=!1,m=ra(t),x=ra(r),q=0,T;q<u.length;q++)T=u[q],T.key===m&&(a?npe(u,q--,1):(a=!0,T.value=x));a||Mc(u,{key:m,value:x}),w_||(this.size=u.length),o.updateURL()},sort:function(){var t=ko(this);vxt(t.entries,function(r,o){return r.key>o.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=ko(this).entries,o=cxt(t,arguments.length>1?arguments[1]:void 0),u=0,a;u<r.length;)a=r[u++],o(a.value,a.key,this)},keys:function(){return new CF(this,"keys")},values:function(){return new CF(this,"values")},entries:function(){return new CF(this,"entries")}},{enumerable:!0});dpe(Wp,gxt,Wp.entries,{name:"entries"});dpe(Wp,"toString",function(){return ko(this).serialize()},{enumerable:!0});w_&&axt(Wp,"size",{get:function(){return ko(this).entries.length},configurable:!0,enumerable:!0});sxt($S,Gp);MF({global:!0,constructor:!0,forced:!fpe},{URLSearchParams:$S});!fpe&&EF(S_)&&(lpe=ls(rpe.has),cpe=ls(rpe.set),PF=function(e){if(mpe(e)){var t=e.body,r;if(hxt(t)===Gp)return r=e.headers?new S_(e.headers):new S_,lpe(r,"content-type")||cpe(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),dxt(e,{body:Qde(0,ra(t)),headers:Qde(0,r)})}return e},EF(tpe)&&MF({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return tpe(t,arguments.length>1?PF(arguments[1]):{})}}),EF(VS)&&(US=function(t){return ppe(this,TF),new VS(t,arguments.length>1?PF(arguments[1]):{})},TF.constructor=US,US.prototype=TF,MF({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:US})));var lpe,cpe,PF,US;bpe.exports={URLSearchParams:$S,getState:ko}});var Npe=b(()=>{"use strict";Mk();var kxt=$(),JF=wt(),Rxt=x_(),YF=Xe(),wpe=Ar(),zo=Re(),ZS=yr(),Ro=jr(),Dxt=zn(),HF=$t(),QF=eO(),Kp=WC(),cs=qa(),Lxt=Gh().codeAt,Fxt=Yde(),Zu=zt(),zxt=ea(),Nxt=ro(),kpe=RF(),Rpe=pr(),Bxt=Rpe.set,XS=Rpe.getterFor("URL"),Uxt=kpe.URLSearchParams,jxt=kpe.getState,q_=YF.URL,ZF=YF.TypeError,JS=YF.parseInt,Vxt=Math.floor,Spe=Math.pow,Fo=zo("".charAt),hs=zo(/./.exec),E_=zo([].join),$xt=zo(1 .toString),Wxt=zo([].pop),Zp=zo([].push),DF=zo("".replace),Gxt=zo([].shift),Kxt=zo("".split),I_=zo("".slice),YS=zo("".toLowerCase),Hxt=zo([].unshift),Zxt="Invalid authority",LF="Invalid scheme",rf="Invalid host",qpe="Invalid port",Dpe=/[a-z]/i,Xxt=/[\d+-.a-z]/i,XF=/\d/,Jxt=/^0x/i,Yxt=/^[0-7]+$/,Qxt=/^\d+$/,Lpe=/^[\da-f]+$/i,ebt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,tbt=/[\0\t\n\r #/:<>?@[\\\]^|]/,rbt=/^[\u0000-\u0020]+/,ibt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,nbt=/[\t\n\r]/g,Do,abt=function(e){var t=Kxt(e,"."),r,o,u,a,m,x,q;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(o=[],u=0;u<r;u++){if(a=t[u],a==="")return e;if(m=10,a.length>1&&Fo(a,0)==="0"&&(m=hs(Jxt,a)?16:8,a=I_(a,m===8?1:2)),a==="")x=0;else{if(!hs(m===10?Qxt:m===8?Yxt:Lpe,a))return e;x=JS(a,m)}Zp(o,x)}for(u=0;u<r;u++)if(x=o[u],u===r-1){if(x>=Spe(256,5-r))return null}else if(x>255)return null;for(q=Wxt(o),u=0;u<o.length;u++)q+=o[u]*Spe(256,3-u);return q},obt=function(e){var t=[0,0,0,0,0,0,0,0],r=0,o=null,u=0,a,m,x,q,T,I,k,B=function(){return Fo(e,u)};if(B()===":"){if(Fo(e,1)!==":")return;u+=2,r++,o=r}for(;B();){if(r===8)return;if(B()===":"){if(o!==null)return;u++,r++,o=r;continue}for(a=m=0;m<4&&hs(Lpe,B());)a=a*16+JS(B(),16),u++,m++;if(B()==="."){if(m===0||(u-=m,r>6))return;for(x=0;B();){if(q=null,x>0)if(B()==="."&&x<4)u++;else return;if(!hs(XF,B()))return;for(;hs(XF,B());){if(T=JS(B(),10),q===null)q=T;else{if(q===0)return;q=q*10+T}if(q>255)return;u++}t[r]=t[r]*256+q,x++,(x===2||x===4)&&r++}if(x!==4)return;break}else if(B()===":"){if(u++,!B())return}else if(B())return;t[r++]=a}if(o!==null)for(I=r-o,r=7;r!==0&&I>0;)k=t[r],t[r--]=t[o+I-1],t[o+--I]=k;else if(r!==8)return;return t},sbt=function(e){for(var t=null,r=1,o=null,u=0,a=0;a<8;a++)e[a]!==0?(u>r&&(t=o,r=u),o=null,u=0):(o===null&&(o=a),++u);return u>r?o:t},A_=function(e){var t,r,o,u;if(typeof e=="number"){for(t=[],r=0;r<4;r++)Hxt(t,e%256),e=Vxt(e/256);return E_(t,".")}if(typeof e=="object"){for(t="",o=sbt(e),r=0;r<8;r++)u&&e[r]===0||(u&&(u=!1),o===r?(t+=r?":":"::",u=!0):(t+=$xt(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},HS={},Fpe=QF({},HS,{" ":1,"\"":1,"<":1,">":1,"`":1}),zpe=QF({},Fpe,{"#":1,"?":1,"{":1,"}":1}),FF=QF({},zpe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Oc=function(e,t){var r=Lxt(e,0);return r>32&&r<127&&!HF(t,e)?e:encodeURIComponent(e)},WS={ftp:21,file:null,http:80,https:443,ws:80,wss:443},T_=function(e,t){var r;return e.length===2&&hs(Dpe,Fo(e,0))&&((r=Fo(e,1))===":"||!t&&r==="|")},Ape=function(e){var t;return e.length>1&&T_(I_(e,0,2))&&(e.length===2||(t=Fo(e,2))==="/"||t==="\\"||t==="?"||t==="#")},ubt=function(e){return e==="."||YS(e)==="%2e"},lbt=function(e){return e=YS(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},zF={},Epe={},NF={},Tpe={},Ipe={},BF={},Cpe={},Ppe={},GS={},KS={},UF={},jF={},VF={},$F={},Mpe={},WF={},Hp={},Gs={},Ope={},nf={},Hu={},ez=function(e,t,r){var o=Zu(e),u,a,m;if(t){if(a=this.parse(o),a)throw new ZF(a);this.searchParams=null}else{if(r!==void 0&&(u=new ez(r,!0)),a=this.parse(o,null,u),a)throw new ZF(a);m=jxt(new Uxt),m.bindURL(this),this.searchParams=m}};ez.prototype={type:"URL",parse:function(e,t,r){var o=this,u=t||zF,a=0,m="",x=!1,q=!1,T=!1,I,k,B,Y;for(e=Zu(e),t||(o.scheme="",o.username="",o.password="",o.host=null,o.port=null,o.path=[],o.query=null,o.fragment=null,o.cannotBeABaseURL=!1,e=DF(e,rbt,""),e=DF(e,ibt,"$1")),e=DF(e,nbt,""),I=Kp(e);a<=I.length;){switch(k=I[a],u){case zF:if(k&&hs(Dpe,k))m+=YS(k),u=Epe;else{if(t)return LF;u=NF;continue}break;case Epe:if(k&&(hs(Xxt,k)||k==="+"||k==="-"||k==="."))m+=YS(k);else if(k===":"){if(t&&(o.isSpecial()!==HF(WS,m)||m==="file"&&(o.includesCredentials()||o.port!==null)||o.scheme==="file"&&!o.host))return;if(o.scheme=m,t){o.isSpecial()&&WS[o.scheme]===o.port&&(o.port=null);return}m="",o.scheme==="file"?u=$F:o.isSpecial()&&r&&r.scheme===o.scheme?u=Tpe:o.isSpecial()?u=Ppe:I[a+1]==="/"?(u=Ipe,a++):(o.cannotBeABaseURL=!0,Zp(o.path,""),u=Ope)}else{if(t)return LF;m="",u=NF,a=0;continue}break;case NF:if(!r||r.cannotBeABaseURL&&k!=="#")return LF;if(r.cannotBeABaseURL&&k==="#"){o.scheme=r.scheme,o.path=cs(r.path),o.query=r.query,o.fragment="",o.cannotBeABaseURL=!0,u=Hu;break}u=r.scheme==="file"?$F:BF;continue;case Tpe:if(k==="/"&&I[a+1]==="/")u=GS,a++;else{u=BF;continue}break;case Ipe:if(k==="/"){u=KS;break}else{u=Gs;continue}case BF:if(o.scheme=r.scheme,k===Do)o.username=r.username,o.password=r.password,o.host=r.host,o.port=r.port,o.path=cs(r.path),o.query=r.query;else if(k==="/"||k==="\\"&&o.isSpecial())u=Cpe;else if(k==="?")o.username=r.username,o.password=r.password,o.host=r.host,o.port=r.port,o.path=cs(r.path),o.query="",u=nf;else if(k==="#")o.username=r.username,o.password=r.password,o.host=r.host,o.port=r.port,o.path=cs(r.path),o.query=r.query,o.fragment="",u=Hu;else{o.username=r.username,o.password=r.password,o.host=r.host,o.port=r.port,o.path=cs(r.path),o.path.length--,u=Gs;continue}break;case Cpe:if(o.isSpecial()&&(k==="/"||k==="\\"))u=GS;else if(k==="/")u=KS;else{o.username=r.username,o.password=r.password,o.host=r.host,o.port=r.port,u=Gs;continue}break;case Ppe:if(u=GS,k!=="/"||Fo(m,a+1)!=="/")continue;a++;break;case GS:if(k!=="/"&&k!=="\\"){u=KS;continue}break;case KS:if(k==="@"){x&&(m="%40"+m),x=!0,B=Kp(m);for(var de=0;de<B.length;de++){var pe=B[de];if(pe===":"&&!T){T=!0;continue}var Z=Oc(pe,FF);T?o.password+=Z:o.username+=Z}m=""}else if(k===Do||k==="/"||k==="?"||k==="#"||k==="\\"&&o.isSpecial()){if(x&&m==="")return Zxt;a-=Kp(m).length+1,m="",u=UF}else m+=k;break;case UF:case jF:if(t&&o.scheme==="file"){u=WF;continue}else if(k===":"&&!q){if(m==="")return rf;if(Y=o.parseHost(m),Y)return Y;if(m="",u=VF,t===jF)return}else if(k===Do||k==="/"||k==="?"||k==="#"||k==="\\"&&o.isSpecial()){if(o.isSpecial()&&m==="")return rf;if(t&&m===""&&(o.includesCredentials()||o.port!==null))return;if(Y=o.parseHost(m),Y)return Y;if(m="",u=Hp,t)return;continue}else k==="["?q=!0:k==="]"&&(q=!1),m+=k;break;case VF:if(hs(XF,k))m+=k;else if(k===Do||k==="/"||k==="?"||k==="#"||k==="\\"&&o.isSpecial()||t){if(m!==""){var H=JS(m,10);if(H>65535)return qpe;o.port=o.isSpecial()&&H===WS[o.scheme]?null:H,m=""}if(t)return;u=Hp;continue}else return qpe;break;case $F:if(o.scheme="file",k==="/"||k==="\\")u=Mpe;else if(r&&r.scheme==="file")switch(k){case Do:o.host=r.host,o.path=cs(r.path),o.query=r.query;break;case"?":o.host=r.host,o.path=cs(r.path),o.query="",u=nf;break;case"#":o.host=r.host,o.path=cs(r.path),o.query=r.query,o.fragment="",u=Hu;break;default:Ape(E_(cs(I,a),""))||(o.host=r.host,o.path=cs(r.path),o.shortenPath()),u=Gs;continue;}else{u=Gs;continue}break;case Mpe:if(k==="/"||k==="\\"){u=WF;break}r&&r.scheme==="file"&&!Ape(E_(cs(I,a),""))&&(T_(r.path[0],!0)?Zp(o.path,r.path[0]):o.host=r.host),u=Gs;continue;case WF:if(k===Do||k==="/"||k==="\\"||k==="?"||k==="#"){if(!t&&T_(m))u=Gs;else if(m===""){if(o.host="",t)return;u=Hp}else{if(Y=o.parseHost(m),Y)return Y;if(o.host==="localhost"&&(o.host=""),t)return;m="",u=Hp}continue}else m+=k;break;case Hp:if(o.isSpecial()){if(u=Gs,k!=="/"&&k!=="\\")continue}else if(!t&&k==="?")o.query="",u=nf;else if(!t&&k==="#")o.fragment="",u=Hu;else if(k!==Do&&(u=Gs,k!=="/"))continue;break;case Gs:if(k===Do||k==="/"||k==="\\"&&o.isSpecial()||!t&&(k==="?"||k==="#")){if(lbt(m)?(o.shortenPath(),k!=="/"&&!(k==="\\"&&o.isSpecial())&&Zp(o.path,"")):ubt(m)?k!=="/"&&!(k==="\\"&&o.isSpecial())&&Zp(o.path,""):(o.scheme==="file"&&!o.path.length&&T_(m)&&(o.host&&(o.host=""),m=Fo(m,0)+":"),Zp(o.path,m)),m="",o.scheme==="file"&&(k===Do||k==="?"||k==="#"))for(;o.path.length>1&&o.path[0]==="";)Gxt(o.path);k==="?"?(o.query="",u=nf):k==="#"&&(o.fragment="",u=Hu)}else m+=Oc(k,zpe);break;case Ope:k==="?"?(o.query="",u=nf):k==="#"?(o.fragment="",u=Hu):k!==Do&&(o.path[0]+=Oc(k,HS));break;case nf:!t&&k==="#"?(o.fragment="",u=Hu):k!==Do&&(k==="'"&&o.isSpecial()?o.query+="%27":k==="#"?o.query+="%23":o.query+=Oc(k,HS));break;case Hu:k!==Do&&(o.fragment+=Oc(k,Fpe));break;}a++}},parseHost:function(e){var t,r,o;if(Fo(e,0)==="["){if(Fo(e,e.length-1)!=="]"||(t=obt(I_(e,1,-1)),!t))return rf;this.host=t}else if(this.isSpecial()){if(e=Fxt(e),hs(ebt,e)||(t=abt(e),t===null))return rf;this.host=t}else{if(hs(tbt,e))return rf;for(t="",r=Kp(e),o=0;o<r.length;o++)t+=Oc(r[o],HS);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return HF(WS,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!T_(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,o=e.password,u=e.host,a=e.port,m=e.path,x=e.query,q=e.fragment,T=t+":";return u!==null?(T+="//",e.includesCredentials()&&(T+=r+(o?":"+o:"")+"@"),T+=A_(u),a!==null&&(T+=":"+a)):t==="file"&&(T+="//"),T+=e.cannotBeABaseURL?m[0]:m.length?"/"+E_(m,"/"):"",x!==null&&(T+="?"+x),q!==null&&(T+="#"+q),T},setHref:function(e){var t=this.parse(e);if(t)throw new ZF(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Xp(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+A_(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Zu(e)+":",zF)},getUsername:function(){return this.username},setUsername:function(e){var t=Kp(Zu(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Oc(t[r],FF)}},getPassword:function(){return this.password},setPassword:function(e){var t=Kp(Zu(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Oc(t[r],FF)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?A_(e):A_(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,UF)},getHostname:function(){var e=this.host;return e===null?"":A_(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,jF)},getPort:function(){var e=this.port;return e===null?"":Zu(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Zu(e),e===""?this.port=null:this.parse(e,VF))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+E_(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Hp))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Zu(e),e===""?this.query=null:(Fo(e,0)==="?"&&(e=I_(e,1)),this.query="",this.parse(e,nf)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Zu(e),e===""){this.fragment=null;return}Fo(e,0)==="#"&&(e=I_(e,1)),this.fragment="",this.parse(e,Hu)},update:function(){this.query=this.searchParams.serialize()||null}};var Xp=function(t){var r=Dxt(this,ia),o=Nxt(arguments.length,1)>1?arguments[1]:void 0,u=Bxt(r,new ez(t,!1,o));JF||(r.href=u.serialize(),r.origin=u.getOrigin(),r.protocol=u.getProtocol(),r.username=u.getUsername(),r.password=u.getPassword(),r.host=u.getHost(),r.hostname=u.getHostname(),r.port=u.getPort(),r.pathname=u.getPathname(),r.search=u.getSearch(),r.searchParams=u.getSearchParams(),r.hash=u.getHash())},ia=Xp.prototype,Lo=function(e,t){return{get:function(){return XS(this)[e]()},set:t&&function(r){return XS(this)[t](r)},configurable:!0,enumerable:!0}};JF&&(Ro(ia,"href",Lo("serialize","setHref")),Ro(ia,"origin",Lo("getOrigin")),Ro(ia,"protocol",Lo("getProtocol","setProtocol")),Ro(ia,"username",Lo("getUsername","setUsername")),Ro(ia,"password",Lo("getPassword","setPassword")),Ro(ia,"host",Lo("getHost","setHost")),Ro(ia,"hostname",Lo("getHostname","setHostname")),Ro(ia,"port",Lo("getPort","setPort")),Ro(ia,"pathname",Lo("getPathname","setPathname")),Ro(ia,"search",Lo("getSearch","setSearch")),Ro(ia,"searchParams",Lo("getSearchParams")),Ro(ia,"hash",Lo("getHash","setHash")));ZS(ia,"toJSON",function(){return XS(this).serialize()},{enumerable:!0});ZS(ia,"toString",function(){return XS(this).serialize()},{enumerable:!0});q_&&(GF=q_.createObjectURL,KF=q_.revokeObjectURL,GF&&ZS(Xp,"createObjectURL",wpe(GF,q_)),KF&&ZS(Xp,"revokeObjectURL",wpe(KF,q_)));var GF,KF;zxt(Xp,"URL");kxt({global:!0,constructor:!0,forced:!Rxt,sham:!JF},{URL:Xp})});var Bpe=b(()=>{"use strict";Npe()});var Vpe=b(()=>{"use strict";var cbt=$(),hbt=Ot(),jpe=ze(),fbt=ro(),Upe=zt(),dbt=x_(),tz=hbt("URL"),pbt=dbt&&jpe(function(){tz.canParse()}),mbt=jpe(function(){return tz.canParse.length!==1});cbt({target:"URL",stat:!0,forced:!pbt||mbt},{canParse:function(t){var r=fbt(arguments.length,1),o=Upe(t),u=r<2||arguments[1]===void 0?void 0:Upe(arguments[1]);try{return!!new tz(o,u)}catch(a){return!1}}})});var Wpe=b(()=>{"use strict";var vbt=$(),gbt=Ot(),ybt=ro(),$pe=zt(),_bt=x_(),xbt=gbt("URL");vbt({target:"URL",stat:!0,forced:!_bt},{parse:function(t){var r=ybt(arguments.length,1),o=$pe(t),u=r<2||arguments[1]===void 0?void 0:$pe(arguments[1]);try{return new xbt(o,u)}catch(a){return null}}})});var Gpe=b(()=>{"use strict";var bbt=$(),wbt=tt();bbt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return wbt(URL.prototype.toString,this)}})});var Kpe=b(()=>{"use strict";RF()});var Jpe=b(()=>{"use strict";var Sbt=yr(),QS=Re(),Hpe=zt(),qbt=ro(),Xpe=URLSearchParams,eq=Xpe.prototype,Abt=QS(eq.append),Zpe=QS(eq.delete),Ebt=QS(eq.forEach),Tbt=QS([].push),rz=new Xpe("a=1&a=2&b=3");rz.delete("a",1);rz.delete("b",void 0);rz+""!="a=2"&&Sbt(eq,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return Zpe(this,e);var o=[];Ebt(this,function(k,B){Tbt(o,{key:B,value:k})}),qbt(t,1);for(var u=Hpe(e),a=Hpe(r),m=0,x=0,q=!1,T=o.length,I;m<T;)I=o[m++],q||I.key===u?(q=!0,Zpe(this,I.key)):x++;for(;x<T;)I=o[x++],I.key===u&&I.value===a||Abt(this,I.key,I.value)},{enumerable:!0,unsafe:!0})});var tme=b(()=>{"use strict";var Ibt=yr(),Qpe=Re(),Cbt=zt(),Pbt=ro(),eme=URLSearchParams,iz=eme.prototype,Mbt=Qpe(iz.getAll),Obt=Qpe(iz.has),Ype=new eme("a=1");(Ype.has("a",2)||!Ype.has("a",void 0))&&Ibt(iz,"has",function(t){var r=arguments.length,o=r<2?void 0:arguments[1];if(r&&o===void 0)return Obt(this,t);var u=Mbt(this,t);Pbt(r,1);for(var a=Cbt(o),m=0;m<u.length;)if(u[m++]===a)return!0;return!1},{enumerable:!0,unsafe:!0})});var rme=b(()=>{"use strict";var kbt=wt(),Rbt=Re(),Dbt=jr(),nz=URLSearchParams.prototype,Lbt=Rbt(nz.forEach);kbt&&!("size"in nz)&&Dbt(nz,"size",{get:function(){var t=0;return Lbt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var nme=b((xGt,ime)=>{"use strict";S8();P8();M8();O8();k8();R8();D8();L8();F8();z8();N8();B8();U8();j8();V8();m$();x$();OC();B$();LC();H$();Y$();eW();iW();nW();oW();uW();UC();jC();dW();pW();gW();EW();TW();CW();PW();Kg();JW();t7();r7();n7();o7();p7();v7();y7();b7();w7();z7();U7();j7();uP();cP();hP();G7();K7();H7();dP();qG();LG();jG();$G();RP();ZP();XP();mK();gK();xK();bK();MK();OK();FK();UK();VK();ZK();YK();rH();iM();uM();fM();dM();pM();mM();yM();_M();xM();wM();SM();qM();AM();EM();gC();EH();L1();RM();HH();JH();QH();e9();t9();n9();o9();s9();l9();h9();d9();p9();m9();v9();_9();w9();S9();q9();D9();L9();z9();B9();U9();j9();V9();$9();X9();nZ();lZ();mZ();yZ();SZ();qZ();TZ();CZ();MZ();OZ();zZ();NZ();BZ();VZ();$Z();WZ();KZ();iO();nO();XZ();YZ();eX();rX();nX();aX();oX();sX();fX();dX();pX();gX();yX();xX();wX();DJ();UO();jO();BJ();GO();KO();VJ();XJ();QJ();eY();nY();aY();oY();sY();uY();lY();cY();mY();gY();yY();DY();FY();aw();VY();WY();HY();YY();eQ();dk();vk();yk();xk();wk();Ak();Tk();PQ();RQ();NQ();Ck();VQ();Pk();Mk();iee();zk();pee();mee();_ee();xee();Eee();Hk();Mee();Lee();Nee();Uee();tR();Hee();Qee();nte();ute();lte();cte();hte();fte();dte();pte();mte();vte();gte();yte();_te();xte();Kte();Hte();Zte();Xte();Jte();Yte();Qte();ere();tre();vR();nre();ore();ure();hre();dre();mre();gR();yR();_re();xre();wre();qre();Cre();Mre();kre();Rre();Lre();zre();Bre();jre();Hre();Zre();Jre();iie();aie();cie();OR();kR();fie();DR();gie();Rw();kie();Rie();Fie();cne();hne();fne();dne();pne();mne();gne();yne();xne();bne();qne();Ane();Ine();Cne();Pne();Mne();zne();Nne();Bne();Une();jne();eae();aae();gae();bae();Sae();qae();Eae();Tae();kae();Rae();Lae();Fae();zae();Nae();Bae();Vae();$ae();Jae();ioe();aoe();ooe();soe();coe();hoe();voe();yoe();xoe();boe();qoe();Aoe();Eoe();Toe();Coe();Ooe();Doe();Loe();Foe();zoe();Noe();Boe();Uoe();joe();Voe();$oe();Goe();Koe();Hoe();Zoe();Xoe();Yoe();tse();dse();bse();Sse();Ase();Ese();Ise();Cse();Pse();kse();Rse();Dse();Lse();Nse();Use();jse();$se();Gse();Kse();Xse();Jse();Yse();eue();rue();iue();nue();aue();oue();uue();lue();cue();hue();fue();due();pue();mue();_ue();xue();Aue();Eue();Cue();Pue();Mue();Due();Lue();Fue();zue();Que();ele();tle();rle();ile();lle();hle();dle();gle();_le();ble();qle();Ele();Ile();Dle();Lle();Fle();zle();Vle();$le();Gle();Kle();Zle();Xle();Jle();Yle();Qle();ece();tce();rce();ice();ace();sce();lce();cce();hce();fce();dce();pce();mce();vce();bce();Ece();Gce();Kce();Hce();Zce();Xce();Jce();Yce();Qce();the();rhe();lhe();che();hhe();fhe();dhe();phe();mhe();vhe();yhe();_he();bhe();She();qhe();Ahe();Ehe();The();Ihe();Che();Phe();Mhe();Vhe();Hhe();Xhe();Jhe();Qhe();efe();rfe();nfe();ofe();ufe();lfe();hfe();ffe();mfe();vfe();yfe();xfe();Tfe();Ofe();Nfe();$fe();rde();lde();hde();xde();bde();Sde();Rde();Ude();Bpe();Vpe();Wpe();Gpe();Kpe();Jpe();tme();rme();ime.exports=jb()});var ome=b((bGt,ame)=>{"use strict";ame.exports=nme()});var Pme=b((AGt,Cme)=>{"use strict";var n1t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Cme.exports=n1t});var Rme=b((EGt,kme)=>{"use strict";var a1t=Pme();function Mme(){}function Ome(){}Ome.resetWarningCache=Mme;kme.exports=function(){function e(o,u,a,m,x,q){if(q!==a1t){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ome,resetWarningCache:Mme};return r.PropTypes=r,r}});var bi=b((CGt,Dme)=>{Dme.exports=Rme()();var TGt,IGt});var jme=b((dz,pz)=>{(function(e,t){typeof dz=="object"&&typeof pz!="undefined"?pz.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(dz,function(){"use strict";var e={},t={};function r(u,a,m){if(t[u]=m,u==="index"){var x="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",q={};return t.shared(q),t.index(e,q),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))),e}}r("shared",["exports"],function(u){"use strict";function a(s,n,l,h){return new(l||(l=Promise))(function(p,y){function _(P){try{A(h.next(P))}catch(M){y(M)}}function w(P){try{A(h.throw(P))}catch(M){y(M)}}function A(P){var M;P.done?p(P.value):(M=P.value,M instanceof l?M:new l(function(R){R(M)})).then(_,w)}A((h=h.apply(s,n||[])).next())})}function m(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var x=q;function q(s,n){this.x=s,this.y=n}q.prototype={clone:function(){return new q(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,l=s.y-this.y;return n*n+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),l=Math.sin(s),h=l*this.x+n*this.y;return this.x=n*this.x-l*this.y,this.y=h,this},_rotateAround:function(s,n){var l=Math.cos(s),h=Math.sin(s),p=n.y+h*(this.x-n.x)+l*(this.y-n.y);return this.x=n.x+l*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},q.convert=function(s){return s instanceof q?s:Array.isArray(s)?new q(s[0],s[1]):s};var T=m(x),I=k;function k(s,n,l,h){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=l,this.p2y=h}k.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,h=0;h<8;h++){var p=this.sampleCurveX(l)-s;if(Math.abs(p)<n)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=p/y}var _=0,w=1;for(l=s,h=0;h<20&&(p=this.sampleCurveX(l),!(Math.abs(p-s)<n));h++)s>p?_=l:w=l,l=.5*(w-_)+_;return l},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var B=m(I);let Y,de;function pe(){return Y==null&&(Y=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function Z(){if(de==null&&(de=!1,pe())){let n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){let p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}let l=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){de=!0;break}}}return de||!1}function H(s,n,l,h){let p=new B(s,n,l,h);return y=>p.solve(y)}let J=H(.25,.1,.25,1);function ve(s,n,l){return Math.min(l,Math.max(n,s))}function be(s,n,l){let h=l-n,p=((s-n)%h+h)%h+n;return p===n?l:p}function Le(s,...n){for(let l of n)for(let h in l)s[h]=l[h];return s}let Oe=1;function Ze(s,n,l){let h={};for(let p in s)h[p]=n.call(this,s[p],p,s);return h}function ft(s,n,l){let h={};for(let p in s)n.call(this,s[p],p,s)&&(h[p]=s[p]);return h}function He(s){return Array.isArray(s)?s.map(He):typeof s=="object"&&s?Ze(s,He):s}let _r={};function Lr(s){_r[s]||(typeof console!="undefined"&&console.warn(s),_r[s]=!0)}function pt(s,n,l){return(l.y-s.y)*(n.x-s.x)>(n.y-s.y)*(l.x-s.x)}function Lt(s){return typeof WorkerGlobalScope!="undefined"&&s!==void 0&&s instanceof WorkerGlobalScope}let wr=null;function hr(s){return typeof ImageBitmap!="undefined"&&s instanceof ImageBitmap}let Xr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Tr(s,n,l,h,p){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let y=new VideoFrame(s,{timestamp:0});try{let _=y==null?void 0:y.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);let w=_.startsWith("BGR"),A=new Uint8ClampedArray(h*p*4);if(yield y.copyTo(A,function(P,M,R,F,U){let V=4*Math.max(-M,0),W=(Math.max(0,R)-R)*F*4+V,ee=4*F,ne=Math.max(0,M),xe=Math.max(0,R);return{rect:{x:ne,y:xe,width:Math.min(P.width,M+F)-ne,height:Math.min(P.height,R+U)-xe},layout:[{offset:W,stride:ee}]}}(s,n,l,h,p)),w)for(let P=0;P<A.length;P+=4){let M=A[P];A[P]=A[P+2],A[P+2]=M}return A}finally{y.close()}})}let en,si,Pi="AbortError";function Vo(){return new Error(Pi)}let Fa={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function sa(s){return Fa.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}let $o="global-dispatcher";class tn extends Error{constructor(n,l,h,p){super(`AJAXError: ${l} (${n}): ${h}`),this.status=n,this.statusText=l,this.url=h,this.body=p}}let rn=()=>Lt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,so=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){let h=sa(s.url);if(h)return h(s,n);if(Lt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:$o},n)}if(!(/^file:/.test(l=s.url)||/^file:/.test(rn())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return a(this,void 0,void 0,function*(){let y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:rn(),signal:p.signal});h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");let _=yield fetch(y);if(!_.ok){let P=yield _.blob();throw new tn(_.status,_.statusText,h.url,P)}let w;w=h.type==="arrayBuffer"||h.type==="image"?_.arrayBuffer():h.type==="json"?_.json():_.text();let A=yield w;if(p.signal.aborted)throw Vo();return{data:A,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}})}(s,n);if(Lt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:$o},n)}var l;return function(h,p){return new Promise((y,_)=>{var w;let A=new XMLHttpRequest;A.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(A.responseType="arraybuffer");for(let P in h.headers)A.setRequestHeader(P,h.headers[P]);h.type==="json"&&(A.responseType="text",!((w=h.headers)===null||w===void 0)&&w.Accept||A.setRequestHeader("Accept","application/json")),A.withCredentials=h.credentials==="include",A.onerror=()=>{_(new Error(A.statusText))},A.onload=()=>{if(!p.signal.aborted)if((A.status>=200&&A.status<300||A.status===0)&&A.response!==null){let P=A.response;if(h.type==="json")try{P=JSON.parse(A.response)}catch(M){return void _(M)}y({data:P,cacheControl:A.getResponseHeader("Cache-Control"),expires:A.getResponseHeader("Expires")})}else{let P=new Blob([A.response],{type:A.getResponseHeader("Content-Type")});_(new tn(A.status,A.statusText,h.url,P))}},p.signal.addEventListener("abort",()=>{A.abort(),_(Vo())}),A.send(h.body)})}(s,n)};function za(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;let n=new URL(s),l=window.location;return n.protocol===l.protocol&&n.host===l.host}function ms(s,n,l){l[s]&&l[s].indexOf(n)!==-1||(l[s]=l[s]||[],l[s].push(n))}function Na(s,n,l){if(l&&l[s]){let h=l[s].indexOf(n);h!==-1&&l[s].splice(h,1)}}class Ba{constructor(n,l={}){Le(this,l),this.type=n}}class uo extends Ba{constructor(n,l={}){super("error",Le({error:n},l))}}class Wo{on(n,l){return this._listeners=this._listeners||{},ms(n,l,this._listeners),this}off(n,l){return Na(n,l,this._listeners),Na(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},ms(n,l,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,l){typeof n=="string"&&(n=new Ba(n,l||{}));let h=n.type;if(this.listens(h)){n.target=this;let p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let w of p)w.call(this,n);let y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let w of y)Na(h,w,this._oneTimeListeners),w.call(this,n);let _=this._eventedParent;_&&(Le(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof uo&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let vs=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Qu(s,n){let l={};for(let h in s)h!=="ref"&&(l[h]=s[h]);return vs.forEach(h=>{h in n&&(l[h]=n[h])}),l}function nr(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let l=0;l<s.length;l++)if(!nr(s[l],n[l]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(let l in s)if(!nr(s[l],n[l]))return!1;return!0}return s===n}function ue(s,n){s.push(n)}function qe(s,n,l){ue(l,{command:"addSource",args:[s,n[s]]})}function Ce(s,n,l){ue(n,{command:"removeSource",args:[s]}),l[s]=!0}function ut(s,n,l,h){Ce(s,l,h),qe(s,n,l)}function rt(s,n,l){let h;for(h in s[l])if(Object.prototype.hasOwnProperty.call(s[l],h)&&h!=="data"&&!nr(s[l][h],n[l][h]))return!1;for(h in n[l])if(Object.prototype.hasOwnProperty.call(n[l],h)&&h!=="data"&&!nr(s[l][h],n[l][h]))return!1;return!0}function Be(s,n,l,h,p,y){s=s||{},n=n||{};for(let _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(nr(s[_],n[_])||l.push({command:y,args:[h,_,n[_],p]}));for(let _ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(s,_)&&(nr(s[_],n[_])||l.push({command:y,args:[h,_,n[_],p]}))}function At(s){return s.id}function Ct(s,n){return s[n.id]=n,s}class Pe{constructor(n,l,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),l!=null&&l.__line__&&(this.line=l.__line__)}}function Qt(s,...n){for(let l of n)for(let h in l)s[h]=l[h];return s}class Ir extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}class nn{constructor(n,l=[]){this.parent=n,this.bindings={};for(let[h,p]of l)this.bindings[h]=p}concat(n){return new nn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}let an={kind:"null"},Ne={kind:"number"},Nt={kind:"string"},qt={kind:"boolean"},zi={kind:"color"},Sn={kind:"object"},Rt={kind:"value"},lo={kind:"collator"},Go={kind:"formatted"},gs={kind:"padding"},co={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function N(s,n){return{kind:"array",itemType:s,N:n}}function z(s){if(s.kind==="array"){let n=z(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}let K=[an,Ne,Nt,qt,zi,Go,Sn,N(Rt),gs,co,ie];function te(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!te(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(let l of K)if(!te(l,n))return null}}return`Expected ${z(s)} but found ${z(n)} instead.`}function he(s,n){return n.some(l=>l.kind===s.kind)}function me(s,n){return n.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}function _e(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}let se=.96422,Te=.82521,ke=4/29,Se=6/29,Ue=3*Se*Se,vt=Se*Se*Se,xt=Math.PI/180,tr=180/Math.PI;function Ft(s){return(s%=360)<0&&(s+=360),s}function rr([s,n,l,h]){let p,y,_=ui((.2225045*(s=Zt(s))+.7168786*(n=Zt(n))+.0606169*(l=Zt(l)))/1);s===n&&n===l?p=y=_:(p=ui((.4360747*s+.3850649*n+.1430804*l)/se),y=ui((.0139322*s+.0971045*n+.7141733*l)/Te));let w=116*_-16;return[w<0?0:w,500*(p-_),200*(_-y),h]}function Zt(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function ui(s){return s>vt?Math.pow(s,1/3):s/Ue+ke}function $r([s,n,l,h]){let p=(s+16)/116,y=isNaN(n)?p:p+n/500,_=isNaN(l)?p:p-l/200;return p=1*fr(p),y=se*fr(y),_=Te*fr(_),[Vt(3.1338561*y-1.6168667*p-.4906146*_),Vt(-.9787684*y+1.9161415*p+.033454*_),Vt(.0719453*y-.2289914*p+1.4052427*_),h]}function Vt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function fr(s){return s>Se?s*s*s:Ue*(s-ke)}function Fr(s){return parseInt(s.padEnd(2,s),16)/255}function wi(s,n){return Mi(n?s/100:s,0,1)}function Mi(s,n,l){return Math.min(Math.max(n,s),l)}function on(s){return!s.some(Number.isNaN)}let el={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class dr{constructor(n,l,h,p=1,y=!0){this.r=n,this.g=l,this.b=h,this.a=p,y||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,l,h,p]))}static parse(n){if(n instanceof dr)return n;if(typeof n!="string")return;let l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let p=el[h];if(p){let[_,w,A]=p;return[_/255,w/255,A/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let _=h.length<6?1:2,w=1;return[Fr(h.slice(w,w+=_)),Fr(h.slice(w,w+=_)),Fr(h.slice(w,w+=_)),Fr(h.slice(w,w+_)||"ff")]}if(h.startsWith("rgb")){let _=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){let[w,A,P,M,R,F,U,V,W,ee,ne,xe]=_,ce=[M||" ",U||" ",ee].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){let ye=[P,F,W].join(""),Ee=ye==="%%%"?100:ye===""?255:0;if(Ee){let De=[Mi(+A/Ee,0,1),Mi(+R/Ee,0,1),Mi(+V/Ee,0,1),ne?wi(+ne,xe):1];if(on(De))return De}}return}}let y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[_,w,A,P,M,R,F,U,V]=y,W=[A||" ",M||" ",F].join("");if(W==="  "||W==="  /"||W===",,"||W===",,,"){let ee=[+w,Mi(+P,0,100),Mi(+R,0,100),U?wi(+U,V):1];if(on(ee))return function([ne,xe,ce,ye]){function Ee(De){let et=(De+ne/30)%12,bt=xe*Math.min(ce,1-ce);return ce-bt*Math.max(-1,Math.min(et-3,9-et,1))}return ne=Ft(ne),xe/=100,ce/=100,[Ee(0),Ee(8),Ee(4),ye]}(ee)}}}(n);return l?new dr(...l,!1):void 0}get rgb(){let{r:n,g:l,b:h,a:p}=this,y=p||1/0;return this.overwriteGetter("rgb",[n/y,l/y,h/y,p])}get hcl(){return this.overwriteGetter("hcl",function(n){let[l,h,p,y]=rr(n),_=Math.sqrt(h*h+p*p);return[Math.round(1e4*_)?Ft(Math.atan2(p,h)*tr):NaN,_,l,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",rr(this.rgb))}overwriteGetter(n,l){return Object.defineProperty(this,n,{value:l}),l}toString(){let[n,l,h,p]=this.rgb;return`rgba(${[n,l,h].map(y=>Math.round(255*y)).join(",")},${p})`}}dr.black=new dr(0,0,0,1),dr.white=new dr(1,1,1,1),dr.transparent=new dr(0,0,0,0),dr.red=new dr(1,0,0,1);class mm{constructor(n,l,h){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class vm{constructor(n,l,h,p,y){this.text=n,this.image=l,this.scale=h,this.fontStack=p,this.textColor=y}}class $n{constructor(n){this.sections=n}static fromString(n){return new $n([new vm(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof $n?n:$n.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Wn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Wn)return n;if(typeof n=="number")return new Wn([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(let l of n)if(typeof l!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]];}return new Wn(n)}}toString(){return JSON.stringify(this.values)}}let NA=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ua{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ua)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let l=0;l<n.length;l+=2){let h=n[l],p=n[l+1];if(typeof h!="string"||!NA.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new ua(n)}}toString(){return JSON.stringify(this.values)}}class Gn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Gn({name:n,available:!1}):null}}function tl(s,n,l,h){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,n,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,n,l,h]:[s,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nu(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof dr||s instanceof mm||s instanceof $n||s instanceof Wn||s instanceof ua||s instanceof Gn)return!0;if(Array.isArray(s)){for(let n of s)if(!nu(n))return!1;return!0}if(typeof s=="object"){for(let n in s)if(!nu(s[n]))return!1;return!0}return!1}function li(s){if(s===null)return an;if(typeof s=="string")return Nt;if(typeof s=="boolean")return qt;if(typeof s=="number")return Ne;if(s instanceof dr)return zi;if(s instanceof mm)return lo;if(s instanceof $n)return Go;if(s instanceof Wn)return gs;if(s instanceof ua)return ie;if(s instanceof Gn)return co;if(Array.isArray(s)){let n=s.length,l;for(let h of s){let p=li(h);if(l){if(l===p)continue;l=Rt;break}l=p}return N(l||Rt,n)}return Sn}function Nc(s){let n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof dr||s instanceof $n||s instanceof Wn||s instanceof ua||s instanceof Gn?s.toString():JSON.stringify(s)}class Ua{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!nu(n[1]))return l.error("invalid value");let h=n[1],p=li(h),y=l.expectedType;return p.kind!=="array"||p.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(p=y),new Ua(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ai{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}let pf={string:Nt,number:Ne,boolean:qt,object:Sn};class ja{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h,p=1,y=n[0];if(y==="array"){let w,A;if(n.length>2){let P=n[1];if(typeof P!="string"||!(P in pf)||P==="object")return l.error("The item type argument of \"array\" must be one of string, number, boolean",1);w=pf[P],p++}else w=Rt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error("The length argument to \"array\" must be a positive integer literal",2);A=n[2],p++}h=N(w,A)}else{if(!pf[y])throw new Error(`Types doesn't contain name = ${y}`);h=pf[y]}let _=[];for(;p<n.length;p++){let w=l.parse(n[p],p,Rt);if(!w)return null;_.push(w)}return new ja(h,_)}evaluate(n){for(let l=0;l<this.args.length;l++){let h=this.args[l].evaluate(n);if(!te(this.type,li(h)))return h;if(l===this.args.length-1)throw new ai(`Expected value to be of type ${z(this.type)}, but found ${z(li(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let gm={"to-boolean":qt,"to-color":zi,"to-number":Ne,"to-string":Nt};class Va{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h=n[0];if(!gm[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return l.error("Expected one argument.");let p=gm[h],y=[];for(let _=1;_<n.length;_++){let w=l.parse(n[_],_,Rt);if(!w)return null;y.push(w)}return new Va(p,y)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let l,h;for(let p of this.args){if(l=p.evaluate(n),h=null,l instanceof dr)return l;if(typeof l=="string"){let y=n.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:tl(l[0],l[1],l[2],l[3]),!h))return new dr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new ai(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(let h of this.args){l=h.evaluate(n);let p=Wn.parse(l);if(p)return p}throw new ai(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(let h of this.args){l=h.evaluate(n);let p=ua.parse(l);if(p)return p}throw new ai(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(let h of this.args){if(l=h.evaluate(n),l===null)return 0;let p=Number(l);if(!isNaN(p))return p}throw new ai(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return $n.fromString(Nc(this.args[0].evaluate(n)));case"resolvedImage":return Gn.fromString(Nc(this.args[0].evaluate(n)));default:return Nc(this.args[0].evaluate(n));}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let BA=["Unknown","Point","LineString","Polygon"];class mf{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?BA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let l=this._parseColorCache[n];return l||(l=this._parseColorCache[n]=dr.parse(n)),l}}class au{constructor(n,l,h=[],p,y=new nn,_=[]){this.registry=n,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=y,this.errors=_,this.expectedType=p,this._isConstant=l}parse(n,l,h,p,y={}){return l?this.concat(l,h,p)._parse(n,y):this._parse(n,y)}_parse(n,l){function h(p,y,_){return _==="assert"?new ja(y,[p]):_==="coerce"?new Va(y,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let y=this.registry[p];if(y){let _=y.parse(n,this);if(!_)return null;if(this.expectedType){let w=this.expectedType,A=_.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||A.kind!=="value"){if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(w.kind!=="padding"||A.kind!=="value"&&A.kind!=="number"&&A.kind!=="array"){if(w.kind!=="variableAnchorOffsetCollection"||A.kind!=="value"&&A.kind!=="array"){if(this.checkSubtype(w,A))return null}else _=h(_,w,l.typeAnnotation||"coerce");}else _=h(_,w,l.typeAnnotation||"coerce");}else _=h(_,w,l.typeAnnotation||"coerce");}else _=h(_,w,l.typeAnnotation||"assert")}if(!(_ instanceof Ua)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){let w=new mf;try{_=new Ua(_.type,_.evaluate(w))}catch(A){return this.error(A.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof n} instead.`)}concat(n,l,h){let p=typeof n=="number"?this.path.concat(n):this.path,y=h?this.scope.concat(h):this.scope;return new au(this.registry,this._isConstant,p,l||null,y,this.errors)}error(n,...l){let h=`${this.key}${l.map(p=>`[${p}]`).join("")}`;this.errors.push(new Ir(h,n))}checkSubtype(n,l){let h=te(n,l);return h&&this.error(h),h}}class ys{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(let l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);let h=[];for(let y=1;y<n.length-1;y+=2){let _=n[y];if(typeof _!="string")return l.error(`Expected string, but found ${typeof _} instead.`,y);if(/[^a-zA-Z0-9_]/.test(_))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);let w=l.parse(n[y+1],y+1);if(!w)return null;h.push([_,w])}let p=l.parse(n[n.length-1],n.length-1,l.expectedType,h);return p?new ys(h,p):null}outputDefined(){return this.result.outputDefined()}}class sr{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");let h=n[1];return l.scope.has(h)?new sr(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ym{constructor(n,l,h){this.type=n,this.index=l,this.input=h}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Ne),p=l.parse(n[2],2,N(l.expectedType||Rt));return h&&p?new ym(p.type.itemType,h,p):null}evaluate(n){let l=this.index.evaluate(n),h=this.input.evaluate(n);if(l<0)throw new ai(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new ai(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new ai(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class _m{constructor(n,l){this.type=qt,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Rt),p=l.parse(n[2],2,Rt);return h&&p?he(h.type,[qt,Nt,Ne,an,Rt])?new _m(h,p):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${z(h.type)} instead`):null}evaluate(n){let l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!me(l,["boolean","string","number","null"]))throw new ai(`Expected first argument to be of type boolean, string, number or null, but found ${z(li(l))} instead.`);if(!me(h,["string","array"]))throw new ai(`Expected second argument to be of type array or string, but found ${z(li(h))} instead.`);return h.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class rl{constructor(n,l,h){this.type=Ne,this.needle=n,this.haystack=l,this.fromIndex=h}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Rt),p=l.parse(n[2],2,Rt);if(!h||!p)return null;if(!he(h.type,[qt,Nt,Ne,an,Rt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${z(h.type)} instead`);if(n.length===4){let y=l.parse(n[3],3,Ne);return y?new rl(h,p,y):null}return new rl(h,p)}evaluate(n){let l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!me(l,["boolean","string","number","null"]))throw new ai(`Expected first argument to be of type boolean, string, number or null, but found ${z(li(l))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(n)),me(h,["string"])){let y=h.indexOf(l,p);return y===-1?-1:[...h.slice(0,y)].length}if(me(h,["array"]))return h.indexOf(l,p);throw new ai(`Expected second argument to be of type array or string, but found ${z(li(h))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class xm{constructor(n,l,h,p,y,_){this.inputType=n,this.type=l,this.input=h,this.cases=p,this.outputs=y,this.otherwise=_}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let h,p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);let y={},_=[];for(let P=2;P<n.length-1;P+=2){let M=n[P],R=n[P+1];Array.isArray(M)||(M=[M]);let F=l.concat(P);if(M.length===0)return F.error("Expected at least one branch label.");for(let V of M){if(typeof V!="number"&&typeof V!="string")return F.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return F.error("Numeric branch labels must be integer values.");if(h){if(F.checkSubtype(h,li(V)))return null}else h=li(V);if(y[String(V)]!==void 0)return F.error("Branch labels must be unique.");y[String(V)]=_.length}let U=l.parse(R,P,p);if(!U)return null;p=p||U.type,_.push(U)}let w=l.parse(n[1],1,Rt);if(!w)return null;let A=l.parse(n[n.length-1],n.length-1,p);return A?w.type.kind!=="value"&&l.concat(1).checkSubtype(h,w.type)?null:new xm(h,p,w,y,_,A):null}evaluate(n){let l=this.input.evaluate(n);return(li(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class vf{constructor(n,l,h){this.type=n,this.branches=l,this.otherwise=h}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);let p=[];for(let _=1;_<n.length-1;_+=2){let w=l.parse(n[_],_,qt);if(!w)return null;let A=l.parse(n[_+1],_+1,h);if(!A)return null;p.push([w,A]),h=h||A.type}let y=l.parse(n[n.length-1],n.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new vf(h,p,y)}evaluate(n){for(let[l,h]of this.branches)if(l.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(let[l,h]of this.branches)n(l),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Bc{constructor(n,l,h,p){this.type=n,this.input=l,this.beginIndex=h,this.endIndex=p}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let h=l.parse(n[1],1,Rt),p=l.parse(n[2],2,Ne);if(!h||!p)return null;if(!he(h.type,[N(Rt),Nt,Rt]))return l.error(`Expected first argument to be of type array or string, but found ${z(h.type)} instead`);if(n.length===4){let y=l.parse(n[3],3,Ne);return y?new Bc(h.type,h,p,y):null}return new Bc(h.type,h,p)}evaluate(n){let l=this.input.evaluate(n),h=this.beginIndex.evaluate(n),p;if(this.endIndex&&(p=this.endIndex.evaluate(n)),me(l,["string"]))return[...l].slice(h,p).join("");if(me(l,["array"]))return l.slice(h,p);throw new ai(`Expected first argument to be of type array or string, but found ${z(li(l))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function gf(s,n){let l=s.length-1,h,p,y=0,_=l,w=0;for(;y<=_;)if(w=Math.floor((y+_)/2),h=s[w],p=s[w+1],h<=n){if(w===l||n<p)return w;y=w+1}else{if(!(h>n))throw new ai("Input is not a number.");_=w-1}return 0}class il{constructor(n,l,h){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(let[p,y]of h)this.labels.push(p),this.outputs.push(y)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");let h=l.parse(n[1],1,Ne);if(!h)return null;let p=[],y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let _=1;_<n.length;_+=2){let w=_===1?-1/0:n[_],A=n[_+1],P=_,M=_+1;if(typeof w!="number")return l.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",P);if(p.length&&p[p.length-1][0]>=w)return l.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",P);let R=l.parse(A,M,y);if(!R)return null;y=y||R.type,p.push([w,R])}return new il(y,h,p)}evaluate(n){let l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);let p=this.input.evaluate(n);if(p<=l[0])return h[0].evaluate(n);let y=l.length;return p>=l[y-1]?h[y-1].evaluate(n):h[gf(l,p)].evaluate(n)}eachChild(n){n(this.input);for(let l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function s0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var UA=u0;function u0(s,n,l,h){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=l,this.p2y=h}u0.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,h=0;h<8;h++){var p=this.sampleCurveX(l)-s;if(Math.abs(p)<n)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=p/y}var _=0,w=1;for(l=s,h=0;h<20&&(p=this.sampleCurveX(l),!(Math.abs(p-s)<n));h++)s>p?_=l:w=l,l=.5*(w-_)+_;return l},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var jA=s0(UA);function ou(s,n,l){return s+l*(n-s)}function Uc(s,n,l){return s.map((h,p)=>ou(h,n[p],l))}let qn={number:ou,color:function(s,n,l,h="rgb"){switch(h){case"rgb":{let[p,y,_,w]=Uc(s.rgb,n.rgb,l);return new dr(p,y,_,w,!1)}case"hcl":{let[p,y,_,w]=s.hcl,[A,P,M,R]=n.hcl,F,U;if(isNaN(p)||isNaN(A))isNaN(p)?isNaN(A)?F=NaN:(F=A,_!==1&&_!==0||(U=P)):(F=p,M!==1&&M!==0||(U=y));else{let xe=A-p;A>p&&xe>180?xe-=360:A<p&&p-A>180&&(xe+=360),F=p+l*xe}let[V,W,ee,ne]=function([xe,ce,ye,Ee]){return xe=isNaN(xe)?0:xe*xt,$r([ye,Math.cos(xe)*ce,Math.sin(xe)*ce,Ee])}([F,U!=null?U:ou(y,P,l),ou(_,M,l),ou(w,R,l)]);return new dr(V,W,ee,ne,!1)}case"lab":{let[p,y,_,w]=$r(Uc(s.lab,n.lab,l));return new dr(p,y,_,w,!1)}}},array:Uc,padding:function(s,n,l){return new Wn(Uc(s.values,n.values,l))},variableAnchorOffsetCollection:function(s,n,l){let h=s.values,p=n.values;if(h.length!==p.length)throw new ai(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${n.toString()}`);let y=[];for(let _=0;_<h.length;_+=2){if(h[_]!==p[_])throw new ai(`Cannot interpolate values containing mismatched anchors. from[${_}]: ${h[_]}, to[${_}]: ${p[_]}`);y.push(h[_]);let[w,A]=h[_+1],[P,M]=p[_+1];y.push([ou(w,P,l),ou(A,M,l)])}return new ua(y)}};class An{constructor(n,l,h,p,y){this.type=n,this.operator=l,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(let[_,w]of y)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(n,l,h,p){let y=0;if(n.name==="exponential")y=yf(l,n.base,h,p);else if(n.name==="linear")y=yf(l,1,h,p);else if(n.name==="cubic-bezier"){let _=n.controlPoints;y=new jA(_[0],_[1],_[2],_[3]).solve(yf(l,1,h,p))}return y}static parse(n,l){let[h,p,y,..._]=n;if(!Array.isArray(p)||p.length===0)return l.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){let P=p[1];if(typeof P!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:P}}else{if(p[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(p[0])}`,1,0);{let P=p.slice(1);if(P.length!==4||P.some(M=>typeof M!="number"||M<0||M>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:P}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,Ne),!y)return null;let w=[],A=null;h==="interpolate-hcl"||h==="interpolate-lab"?A=zi:l.expectedType&&l.expectedType.kind!=="value"&&(A=l.expectedType);for(let P=0;P<_.length;P+=2){let M=_[P],R=_[P+1],F=P+3,U=P+4;if(typeof M!="number")return l.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",F);if(w.length&&w[w.length-1][0]>=M)return l.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",F);let V=l.parse(R,U,A);if(!V)return null;A=A||V.type,w.push([M,V])}return _e(A,Ne)||_e(A,zi)||_e(A,gs)||_e(A,ie)||_e(A,N(Ne))?new An(A,h,p,y,w):l.error(`Type ${z(A)} is not interpolatable.`)}evaluate(n){let l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);let p=this.input.evaluate(n);if(p<=l[0])return h[0].evaluate(n);let y=l.length;if(p>=l[y-1])return h[y-1].evaluate(n);let _=gf(l,p),w=An.interpolationFactor(this.interpolation,p,l[_],l[_+1]),A=h[_].evaluate(n),P=h[_+1].evaluate(n);switch(this.operator){case"interpolate":return qn[this.type.kind](A,P,w);case"interpolate-hcl":return qn.color(A,P,w,"hcl");case"interpolate-lab":return qn.color(A,P,w,"lab");}}eachChild(n){n(this.input);for(let l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function yf(s,n,l,h){let p=h-l,y=s-l;return p===0?0:n===1?y/p:(Math.pow(n,y)-1)/(Math.pow(n,p)-1)}class _f{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expectected at least one argument.");let h=null,p=l.expectedType;p&&p.kind!=="value"&&(h=p);let y=[];for(let w of n.slice(1)){let A=l.parse(w,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!A)return null;h=h||A.type,y.push(A)}if(!h)throw new Error("No output type");let _=p&&y.some(w=>te(p,w.type));return new _f(_?Rt:h,y)}evaluate(n){let l,h=null,p=0;for(let y of this.args)if(p++,h=y.evaluate(n),h&&h instanceof Gn&&!h.available&&(l||(l=h.name),h=null,p===this.args.length&&(h=l)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function xf(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function l0(s,n,l,h){return h.compare(n,l)===0}function nl(s,n,l){let h=s!=="=="&&s!=="!=";return class Ume{constructor(y,_,w){this.type=qt,this.lhs=y,this.rhs=_,this.collator=w,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}static parse(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");let w=y[0],A=_.parse(y[1],1,Rt);if(!A)return null;if(!xf(w,A.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${z(A.type)}'.`);let P=_.parse(y[2],2,Rt);if(!P)return null;if(!xf(w,P.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${z(P.type)}'.`);if(A.type.kind!==P.type.kind&&A.type.kind!=="value"&&P.type.kind!=="value")return _.error(`Cannot compare types '${z(A.type)}' and '${z(P.type)}'.`);h&&(A.type.kind==="value"&&P.type.kind!=="value"?A=new ja(P.type,[A]):A.type.kind!=="value"&&P.type.kind==="value"&&(P=new ja(A.type,[P])));let M=null;if(y.length===4){if(A.type.kind!=="string"&&P.type.kind!=="string"&&A.type.kind!=="value"&&P.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(M=_.parse(y[3],3,lo),!M)return null}return new Ume(A,P,M)}evaluate(y){let _=this.lhs.evaluate(y),w=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){let A=li(_),P=li(w);if(A.kind!==P.kind||A.kind!=="string"&&A.kind!=="number")throw new ai(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${A.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let A=li(_),P=li(w);if(A.kind!=="string"||P.kind!=="string")return n(y,_,w)}return this.collator?l(y,_,w,this.collator.evaluate(y)):n(y,_,w)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}let VA=nl("==",function(s,n,l){return n===l},l0),c0=nl("!=",function(s,n,l){return n!==l},function(s,n,l,h){return!l0(0,n,l,h)}),h0=nl("<",function(s,n,l){return n<l},function(s,n,l,h){return h.compare(n,l)<0}),$A=nl(">",function(s,n,l){return n>l},function(s,n,l,h){return h.compare(n,l)>0}),WA=nl("<=",function(s,n,l){return n<=l},function(s,n,l,h){return h.compare(n,l)<=0}),f0=nl(">=",function(s,n,l){return n>=l},function(s,n,l,h){return h.compare(n,l)>=0});class jc{constructor(n,l,h){this.type=lo,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");let h=n[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");let p=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,qt);if(!p)return null;let y=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,qt);if(!y)return null;let _=null;return h.locale&&(_=l.parse(h.locale,1,Nt),!_)?null:new jc(p,y,_)}evaluate(n){return new mm(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class bm{constructor(n,l,h,p,y){this.type=Nt,this.number=n,this.locale=l,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=y}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");let h=l.parse(n[1],1,Ne);if(!h)return null;let p=n[2];if(typeof p!="object"||Array.isArray(p))return l.error("NumberFormat options argument must be an object.");let y=null;if(p.locale&&(y=l.parse(p.locale,1,Nt),!y))return null;let _=null;if(p.currency&&(_=l.parse(p.currency,1,Nt),!_))return null;let w=null;if(p["min-fraction-digits"]&&(w=l.parse(p["min-fraction-digits"],1,Ne),!w))return null;let A=null;return p["max-fraction-digits"]&&(A=l.parse(p["max-fraction-digits"],1,Ne),!A)?null:new bm(h,y,_,w,A)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class bf{constructor(n){this.type=Go,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h=n[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");let p=[],y=!1;for(let _=1;_<=n.length-1;++_){let w=n[_];if(y&&typeof w=="object"&&!Array.isArray(w)){y=!1;let A=null;if(w["font-scale"]&&(A=l.parse(w["font-scale"],1,Ne),!A))return null;let P=null;if(w["text-font"]&&(P=l.parse(w["text-font"],1,N(Nt)),!P))return null;let M=null;if(w["text-color"]&&(M=l.parse(w["text-color"],1,zi),!M))return null;let R=p[p.length-1];R.scale=A,R.font=P,R.textColor=M}else{let A=l.parse(n[_],1,Rt);if(!A)return null;let P=A.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,p.push({content:A,scale:null,font:null,textColor:null})}}return new bf(p)}evaluate(n){return new $n(this.sections.map(l=>{let h=l.content.evaluate(n);return li(h)===co?new vm("",h,null,null,null):new vm(Nc(h),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null)}))}eachChild(n){for(let l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor)}outputDefined(){return!1}}class wm{constructor(n){this.type=co,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");let h=l.parse(n[1],1,Nt);return h?new wm(h):l.error("No image name provided.")}evaluate(n){let l=this.input.evaluate(n),h=Gn.fromString(l);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(l)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Sm{constructor(n){this.type=Ne,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);let h=l.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${z(h.type)} instead.`):new Sm(h):null}evaluate(n){let l=this.input.evaluate(n);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new ai(`Expected value to be of type string or array, but found ${z(li(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}let ho=8192;function GA(s,n){let l=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(l*p*ho),Math.round(h*p*ho)]}function qm(s,n){let l=Math.pow(2,n.z);return[(p=(s[0]/ho+n.x)/l,360*p-180),(h=(s[1]/ho+n.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function su(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function _s(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function lr(s,n,l){let h=s[0]-n[0],p=s[1]-n[1],y=s[0]-l[0],_=s[1]-l[1];return h*_-y*p==0&&h*y<=0&&p*_<=0}function wf(s,n,l,h){return(p=[h[0]-l[0],h[1]-l[1]])[0]*(y=[n[0]-s[0],n[1]-s[1]])[1]-p[1]*y[0]!=0&&!(!p0(s,n,l,h)||!p0(l,h,s,n));var p,y}function KA(s,n,l){for(let h of l)for(let p=0;p<h.length-1;++p)if(wf(s,n,h[p],h[p+1]))return!0;return!1}function al(s,n,l=!1){let h=!1;for(let w of n)for(let A=0;A<w.length-1;A++){if(lr(s,w[A],w[A+1]))return l;(y=w[A])[1]>(p=s)[1]!=(_=w[A+1])[1]>p[1]&&p[0]<(_[0]-y[0])*(p[1]-y[1])/(_[1]-y[1])+y[0]&&(h=!h)}var p,y,_;return h}function HA(s,n){for(let l of n)if(al(s,l))return!0;return!1}function d0(s,n){for(let l of s)if(!al(l,n))return!1;for(let l=0;l<s.length-1;++l)if(KA(s[l],s[l+1],n))return!1;return!0}function ZA(s,n){for(let l of n)if(d0(s,l))return!0;return!1}function p0(s,n,l,h){let p=h[0]-l[0],y=h[1]-l[1],_=(s[0]-l[0])*y-p*(s[1]-l[1]),w=(n[0]-l[0])*y-p*(n[1]-l[1]);return _>0&&w<0||_<0&&w>0}function Am(s,n,l){let h=[];for(let p=0;p<s.length;p++){let y=[];for(let _=0;_<s[p].length;_++){let w=GA(s[p][_],l);su(n,w),y.push(w)}h.push(y)}return h}function m0(s,n,l){let h=[];for(let p=0;p<s.length;p++){let y=Am(s[p],n,l);h.push(y)}return h}function v0(s,n,l,h){if(s[0]<l[0]||s[0]>l[2]){let p=.5*h,y=s[0]-l[0]>p?-h:l[0]-s[0]>p?h:0;y===0&&(y=s[0]-l[2]>p?-h:l[2]-s[0]>p?h:0),s[0]+=y}su(n,s)}function g0(s,n,l,h){let p=Math.pow(2,h.z)*ho,y=[h.x*ho,h.y*ho],_=[];for(let w of s)for(let A of w){let P=[A.x+y[0],A.y+y[1]];v0(P,n,l,p),_.push(P)}return _}function y0(s,n,l,h){let p=Math.pow(2,h.z)*ho,y=[h.x*ho,h.y*ho],_=[];for(let A of s){let P=[];for(let M of A){let R=[M.x+y[0],M.y+y[1]];su(n,R),P.push(R)}_.push(P)}if(n[2]-n[0]<=p/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(let A of _)for(let P of A)v0(P,n,l,p)}var w;return _}class uu{constructor(n,l){this.type=qt,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(nu(n[1])){let h=n[1];if(h.type==="FeatureCollection"){let p=[];for(let y of h.features){let{type:_,coordinates:w}=y.geometry;_==="Polygon"&&p.push(w),_==="MultiPolygon"&&p.push(...w)}if(p.length)return new uu(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){let p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new uu(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new uu(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){let p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(h.type==="Polygon"){let w=Am(h.coordinates,y,_),A=g0(l.geometry(),p,y,_);if(!_s(p,y))return!1;for(let P of A)if(!al(P,w))return!1}if(h.type==="MultiPolygon"){let w=m0(h.coordinates,y,_),A=g0(l.geometry(),p,y,_);if(!_s(p,y))return!1;for(let P of A)if(!HA(P,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){let p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=l.canonicalID();if(h.type==="Polygon"){let w=Am(h.coordinates,y,_),A=y0(l.geometry(),p,y,_);if(!_s(p,y))return!1;for(let P of A)if(!d0(P,w))return!1}if(h.type==="MultiPolygon"){let w=m0(h.coordinates,y,_),A=y0(l.geometry(),p,y,_);if(!_s(p,y))return!1;for(let P of A)if(!ZA(P,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let _0=class{constructor(s=[],n=(l,h)=>l<h?-1:l>h?1:0){if(this.data=s,this.length=this.data.length,this.compare=n,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:n,compare:l}=this,h=n[s];for(;s>0;){let p=s-1>>1,y=n[p];if(l(h,y)>=0)break;n[s]=y,s=p}n[s]=h}_down(s){let{data:n,compare:l}=this,h=this.length>>1,p=n[s];for(;s<h;){let y=1+(s<<1),_=y+1;if(_<this.length&&l(n[_],n[y])<0&&(y=_),l(n[y],p)>=0)break;n[s]=n[y],s=y}n[s]=p}};function XA(s,n,l,h,p){x0(s,n,l,h||s.length-1,p||JA)}function x0(s,n,l,h,p){for(;h>l;){if(h-l>600){var y=h-l+1,_=n-l+1,w=Math.log(y),A=.5*Math.exp(2*w/3),P=.5*Math.sqrt(w*A*(y-A)/y)*(_-y/2<0?-1:1);x0(s,n,Math.max(l,Math.floor(n-_*A/y+P)),Math.min(h,Math.floor(n+(y-_)*A/y+P)),p)}var M=s[n],R=l,F=h;for(Vc(s,l,n),p(s[h],M)>0&&Vc(s,l,h);R<F;){for(Vc(s,R,F),R++,F--;p(s[R],M)<0;)R++;for(;p(s[F],M)>0;)F--}p(s[l],M)===0?Vc(s,l,F):Vc(s,++F,h),F<=n&&(l=F+1),n<=F&&(h=F-1)}}function Vc(s,n,l){var h=s[n];s[n]=s[l],s[l]=h}function JA(s,n){return s<n?-1:s>n?1:0}function Sf(s,n){if(s.length<=1)return[s];let l=[],h,p;for(let y of s){let _=QA(y);_!==0&&(y.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(h&&l.push(h),h=[y]):h.push(y))}if(h&&l.push(h),n>1)for(let y=0;y<l.length;y++)l[y].length<=n||(XA(l[y],n,1,l[y].length-1,YA),l[y]=l[y].slice(0,n));return l}function YA(s,n){return n.area-s.area}function QA(s){let n=0;for(let l,h,p=0,y=s.length,_=y-1;p<y;_=p++)l=s[p],h=s[_],n+=(h.x-l.x)*(l.y+h.y);return n}let b0=1/298.257223563,w0=b0*(2-b0),S0=Math.PI/180;class Em{constructor(n){let l=6378.137*S0*1e3,h=Math.cos(n*S0),p=1/(1-w0*(1-h*h)),y=Math.sqrt(p);this.kx=l*y*h,this.ky=l*y*p*(1-w0)}distance(n,l){let h=this.wrap(n[0]-l[0])*this.kx,p=(n[1]-l[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(n,l){let h,p,y,_,w=1/0;for(let A=0;A<n.length-1;A++){let P=n[A][0],M=n[A][1],R=this.wrap(n[A+1][0]-P)*this.kx,F=(n[A+1][1]-M)*this.ky,U=0;R===0&&F===0||(U=(this.wrap(l[0]-P)*this.kx*R+(l[1]-M)*this.ky*F)/(R*R+F*F),U>1?(P=n[A+1][0],M=n[A+1][1]):U>0&&(P+=R/this.kx*U,M+=F/this.ky*U)),R=this.wrap(l[0]-P)*this.kx,F=(l[1]-M)*this.ky;let V=R*R+F*F;V<w&&(w=V,h=P,p=M,y=A,_=U)}return{point:[h,p],index:y,t:Math.max(0,Math.min(1,_))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function q0(s,n){return n[0]-s[0]}function qf(s){return s[1]-s[0]+1}function Ko(s,n){return s[1]>=s[0]&&s[1]<n}function Tm(s,n){if(s[0]>s[1])return[null,null];let l=qf(s);if(n){if(l===2)return[s,null];let p=Math.floor(l/2);return[[s[0],s[0]+p],[s[0]+p,s[1]]]}if(l===1)return[s,null];let h=Math.floor(l/2)-1;return[[s[0],s[0]+h],[s[0]+h+1,s[1]]]}function Im(s,n){if(!Ko(n,s.length))return[1/0,1/0,-1/0,-1/0];let l=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)su(l,s[h]);return l}function Cm(s){let n=[1/0,1/0,-1/0,-1/0];for(let l of s)for(let h of l)su(n,h);return n}function Af(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Pm(s,n,l){if(!Af(s)||!Af(n))return NaN;let h=0,p=0;return s[2]<n[0]&&(h=n[0]-s[2]),s[0]>n[2]&&(h=s[0]-n[2]),s[1]>n[3]&&(p=s[1]-n[3]),s[3]<n[1]&&(p=n[1]-s[3]),l.distance([0,0],[h,p])}function lu(s,n,l){let h=l.pointOnLine(n,s);return l.distance(s,h.point)}function Mm(s,n,l,h,p){let y=Math.min(lu(s,[l,h],p),lu(n,[l,h],p)),_=Math.min(lu(l,[s,n],p),lu(h,[s,n],p));return Math.min(y,_)}function eE(s,n,l,h,p){if(!Ko(n,s.length)||!Ko(h,l.length))return 1/0;let y=1/0;for(let _=n[0];_<n[1];++_){let w=s[_],A=s[_+1];for(let P=h[0];P<h[1];++P){let M=l[P],R=l[P+1];if(wf(w,A,M,R))return 0;y=Math.min(y,Mm(w,A,M,R,p))}}return y}function Jr(s,n,l,h,p){if(!Ko(n,s.length)||!Ko(h,l.length))return NaN;let y=1/0;for(let _=n[0];_<=n[1];++_)for(let w=h[0];w<=h[1];++w)if(y=Math.min(y,p.distance(s[_],l[w])),y===0)return y;return y}function tE(s,n,l){if(al(s,n,!0))return 0;let h=1/0;for(let p of n){let y=p[0],_=p[p.length-1];if(y!==_&&(h=Math.min(h,lu(s,[_,y],l)),h===0))return h;let w=l.pointOnLine(p,s);if(h=Math.min(h,l.distance(s,w.point)),h===0)return h}return h}function Wt(s,n,l,h){if(!Ko(n,s.length))return NaN;for(let y=n[0];y<=n[1];++y)if(al(s[y],l,!0))return 0;let p=1/0;for(let y=n[0];y<n[1];++y){let _=s[y],w=s[y+1];for(let A of l)for(let P=0,M=A.length,R=M-1;P<M;R=P++){let F=A[R],U=A[P];if(wf(_,w,F,U))return 0;p=Math.min(p,Mm(_,w,F,U,h))}}return p}function Ef(s,n){for(let l of s)for(let h of l)if(al(h,n,!0))return!0;return!1}function Sr(s,n,l,h=1/0){let p=Cm(s),y=Cm(n);if(h!==1/0&&Pm(p,y,l)>=h)return h;if(_s(p,y)){if(Ef(s,n))return 0}else if(Ef(n,s))return 0;let _=1/0;for(let w of s)for(let A=0,P=w.length,M=P-1;A<P;M=A++){let R=w[M],F=w[A];for(let U of n)for(let V=0,W=U.length,ee=W-1;V<W;ee=V++){let ne=U[ee],xe=U[V];if(wf(R,F,ne,xe))return 0;_=Math.min(_,Mm(R,F,ne,xe,l))}}return _}function mr(s,n,l,h,p,y){if(!y)return;let _=Pm(Im(h,y),p,l);_<n&&s.push([_,y,[0,0]])}function cu(s,n,l,h,p,y,_){if(!y||!_)return;let w=Pm(Im(h,y),Im(p,_),l);w<n&&s.push([w,y,_])}function $c(s,n,l,h,p=1/0){let y=Math.min(h.distance(s[0],l[0][0]),p);if(y===0)return y;let _=new _0([[0,[0,s.length-1],[0,0]]],q0),w=Cm(l);for(;_.length>0;){let A=_.pop();if(A[0]>=y)continue;let P=A[1],M=n?50:100;if(qf(P)<=M){if(!Ko(P,s.length))return NaN;if(n){let R=Wt(s,P,l,h);if(isNaN(R)||R===0)return R;y=Math.min(y,R)}else for(let R=P[0];R<=P[1];++R){let F=tE(s[R],l,h);if(y=Math.min(y,F),y===0)return 0}}else{let R=Tm(P,n);mr(_,y,h,s,w,R[0]),mr(_,y,h,s,w,R[1])}}return y}function Wc(s,n,l,h,p,y=1/0){let _=Math.min(y,p.distance(s[0],l[0]));if(_===0)return _;let w=new _0([[0,[0,s.length-1],[0,l.length-1]]],q0);for(;w.length>0;){let A=w.pop();if(A[0]>=_)continue;let P=A[1],M=A[2],R=n?50:100,F=h?50:100;if(qf(P)<=R&&qf(M)<=F){if(!Ko(P,s.length)&&Ko(M,l.length))return NaN;let U;if(n&&h)U=eE(s,P,l,M,p),_=Math.min(_,U);else if(n&&!h){let V=s.slice(P[0],P[1]+1);for(let W=M[0];W<=M[1];++W)if(U=lu(l[W],V,p),_=Math.min(_,U),_===0)return _}else if(!n&&h){let V=l.slice(M[0],M[1]+1);for(let W=P[0];W<=P[1];++W)if(U=lu(s[W],V,p),_=Math.min(_,U),_===0)return _}else U=Jr(s,P,l,M,p),_=Math.min(_,U)}else{let U=Tm(P,n),V=Tm(M,h);cu(w,_,p,s,l,U[0],V[0]),cu(w,_,p,s,l,U[0],V[1]),cu(w,_,p,s,l,U[1],V[0]),cu(w,_,p,s,l,U[1],V[1])}}return _}function Om(s){return s.type==="MultiPolygon"?s.coordinates.map(n=>({type:"Polygon",coordinates:n})):s.type==="MultiLineString"?s.coordinates.map(n=>({type:"LineString",coordinates:n})):s.type==="MultiPoint"?s.coordinates.map(n=>({type:"Point",coordinates:n})):[s]}class hu{constructor(n,l){this.type=Ne,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(nu(n[1])){let h=n[1];if(h.type==="FeatureCollection")return new hu(h,h.features.map(p=>Om(p.geometry)).flat());if(h.type==="Feature")return new hu(h,Om(h.geometry));if("type"in h&&"coordinates"in h)return new hu(h,Om(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){let p=l.geometry(),y=p.flat().map(A=>qm([A.x,A.y],l.canonical));if(p.length===0)return NaN;let _=new Em(y[0][1]),w=1/0;for(let A of h){switch(A.type){case"Point":w=Math.min(w,Wc(y,!1,[A.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,Wc(y,!1,A.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,$c(y,!1,A.coordinates,_,w));}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){let p=l.geometry(),y=p.flat().map(A=>qm([A.x,A.y],l.canonical));if(p.length===0)return NaN;let _=new Em(y[0][1]),w=1/0;for(let A of h){switch(A.type){case"Point":w=Math.min(w,Wc(y,!0,[A.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,Wc(y,!0,A.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,$c(y,!0,A.coordinates,_,w));}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="Polygon")return function(l,h){let p=l.geometry();if(p.length===0||p[0].length===0)return NaN;let y=Sf(p,0).map(A=>A.map(P=>P.map(M=>qm([M.x,M.y],l.canonical)))),_=new Em(y[0][0][0][1]),w=1/0;for(let A of h)for(let P of y){switch(A.type){case"Point":w=Math.min(w,$c([A.coordinates],!1,P,_,w));break;case"LineString":w=Math.min(w,$c(A.coordinates,!0,P,_,w));break;case"Polygon":w=Math.min(w,Sr(P,A.coordinates,_,w));}if(w===0)return w}return w}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let ol={"==":VA,"!=":c0,">":$A,"<":h0,">=":f0,"<=":WA,array:ja,at:ym,boolean:ja,case:vf,coalesce:_f,collator:jc,format:bf,image:wm,in:_m,"index-of":rl,interpolate:An,"interpolate-hcl":An,"interpolate-lab":An,length:Sm,let:ys,literal:Ua,match:xm,number:ja,"number-format":bm,object:ja,slice:Bc,step:il,string:ja,"to-boolean":Va,"to-color":Va,"to-number":Va,"to-string":Va,var:sr,within:uu,distance:hu};class la{constructor(n,l,h,p){this.name=n,this.type=l,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,l){let h=n[0],p=la.definitions[h];if(!p)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let y=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=_.filter(([P])=>!Array.isArray(P)||P.length===n.length-1),A=null;for(let[P,M]of w){A=new au(l.registry,Gc,l.path,null,l.scope);let R=[],F=!1;for(let U=1;U<n.length;U++){let V=n[U],W=Array.isArray(P)?P[U-1]:P.type,ee=A.parse(V,1+R.length,W);if(!ee){F=!0;break}R.push(ee)}if(!F)if(Array.isArray(P)&&P.length!==R.length)A.error(`Expected ${P.length} arguments, but found ${R.length} instead.`);else{for(let U=0;U<R.length;U++){let V=Array.isArray(P)?P[U]:P.type,W=R[U];A.concat(U+1).checkSubtype(V,W.type)}if(A.errors.length===0)return new la(h,y,M,R)}}if(w.length===1)l.errors.push(...A.errors);else{let P=(w.length?w:_).map(([R])=>{return F=R,Array.isArray(F)?`(${F.map(z).join(", ")})`:`(${z(F.type)}...)`;var F}).join(" | "),M=[];for(let R=1;R<n.length;R++){let F=l.parse(n[R],1+M.length);if(!F)return null;M.push(z(F.type))}l.error(`Expected arguments of type ${P}, but found (${M.join(", ")}) instead.`)}return null}static register(n,l){la.definitions=l;for(let h in l)n[h]=la}}function km(s,[n,l,h,p]){n=n.evaluate(s),l=l.evaluate(s),h=h.evaluate(s);let y=p?p.evaluate(s):1,_=tl(n,l,h,y);if(_)throw new ai(_);return new dr(n/255,l/255,h/255,y,!1)}function Rm(s,n){return s in n}function Dm(s,n){let l=n[s];return l===void 0?null:l}function fu(s){return{type:s}}function Gc(s){if(s instanceof sr)return Gc(s.boundExpression);if(s instanceof la&&s.name==="error"||s instanceof jc||s instanceof uu||s instanceof hu)return!1;let n=s instanceof Va||s instanceof ja,l=!0;return s.eachChild(h=>{l=n?l&&Gc(h):l&&h instanceof Ua}),!!l&&Kc(s)&&Hc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Kc(s){if(s instanceof la&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof uu||s instanceof hu)return!1;let n=!0;return s.eachChild(l=>{n&&!Kc(l)&&(n=!1)}),n}function sl(s){if(s instanceof la&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(l=>{n&&!sl(l)&&(n=!1)}),n}function Hc(s,n){if(s instanceof la&&n.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(h=>{l&&!Hc(h,n)&&(l=!1)}),l}function Tf(s){return{result:"success",value:s}}function ul(s){return{result:"error",value:s}}function ll(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function A0(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Lm(s){return!!s.expression&&s.expression.interpolated}function ar(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function If(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function rE(s){return s}function E0(s,n){let l=n.type==="color",h=s.stops&&typeof s.stops[0][0]=="object",p=h||!(h||s.property!==void 0),y=s.type||(Lm(n)?"exponential":"interval");if(l||n.type==="padding"){let M=l?dr.parse:Wn.parse;(s=Qt({},s)).stops&&(s.stops=s.stops.map(R=>[R[0],M(R[1])])),s.default=M(s.default?s.default:n.default)}if(s.colorSpace&&(_=s.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var _;let w,A,P;if(y==="exponential")w=I0;else if(y==="interval")w=Cf;else if(y==="categorical"){w=T0,A=Object.create(null);for(let M of s.stops)A[M[0]]=M[1];P=typeof s.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);w=C0}if(h){let M={},R=[];for(let V=0;V<s.stops.length;V++){let W=s.stops[V],ee=W[0].zoom;M[ee]===void 0&&(M[ee]={zoom:ee,type:s.type,property:s.property,default:s.default,stops:[]},R.push(ee)),M[ee].stops.push([W[0].value,W[1]])}let F=[];for(let V of R)F.push([M[V].zoom,E0(M[V],n)]);let U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:An.interpolationFactor.bind(void 0,U),zoomStops:F.map(V=>V[0]),evaluate:({zoom:V},W)=>I0({stops:F,base:s.base},n,V).evaluate(V,W)}}if(p){let M=y==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:An.interpolationFactor.bind(void 0,M),zoomStops:s.stops.map(R=>R[0]),evaluate:({zoom:R})=>w(s,n,R,A,P)}}return{kind:"source",evaluate(M,R){let F=R&&R.properties?R.properties[s.property]:void 0;return F===void 0?cl(s.default,n.default):w(s,n,F,A,P)}}}function cl(s,n,l){return s!==void 0?s:n!==void 0?n:l!==void 0?l:void 0}function T0(s,n,l,h,p){return cl(typeof l===p?h[l]:void 0,s.default,n.default)}function Cf(s,n,l){if(ar(l)!=="number")return cl(s.default,n.default);let h=s.stops.length;if(h===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[h-1][0])return s.stops[h-1][1];let p=gf(s.stops.map(y=>y[0]),l);return s.stops[p][1]}function I0(s,n,l){let h=s.base!==void 0?s.base:1;if(ar(l)!=="number")return cl(s.default,n.default);let p=s.stops.length;if(p===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[p-1][0])return s.stops[p-1][1];let y=gf(s.stops.map(M=>M[0]),l),_=function(M,R,F,U){let V=U-F,W=M-F;return V===0?0:R===1?W/V:(Math.pow(R,W)-1)/(Math.pow(R,V)-1)}(l,h,s.stops[y][0],s.stops[y+1][0]),w=s.stops[y][1],A=s.stops[y+1][1],P=qn[n.type]||rE;return typeof w.evaluate=="function"?{evaluate(...M){let R=w.evaluate.apply(void 0,M),F=A.evaluate.apply(void 0,M);if(R!==void 0&&F!==void 0)return P(R,F,_,s.colorSpace)}}:P(w,A,_,s.colorSpace)}function C0(s,n,l){switch(n.type){case"color":l=dr.parse(l);break;case"formatted":l=$n.fromString(l.toString());break;case"resolvedImage":l=Gn.fromString(l.toString());break;case"padding":l=Wn.parse(l);break;default:ar(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0);}return cl(l,s.default,n.default)}la.register(ol,{error:[{kind:"error"},[Nt],(s,[n])=>{throw new ai(n.evaluate(s))}],typeof:[Nt,[Rt],(s,[n])=>z(li(n.evaluate(s)))],"to-rgba":[N(Ne,4),[zi],(s,[n])=>{let[l,h,p,y]=n.evaluate(s).rgb;return[255*l,255*h,255*p,y]}],rgb:[zi,[Ne,Ne,Ne],km],rgba:[zi,[Ne,Ne,Ne,Ne],km],has:{type:qt,overloads:[[[Nt],(s,[n])=>Rm(n.evaluate(s),s.properties())],[[Nt,Sn],(s,[n,l])=>Rm(n.evaluate(s),l.evaluate(s))]]},get:{type:Rt,overloads:[[[Nt],(s,[n])=>Dm(n.evaluate(s),s.properties())],[[Nt,Sn],(s,[n,l])=>Dm(n.evaluate(s),l.evaluate(s))]]},"feature-state":[Rt,[Nt],(s,[n])=>Dm(n.evaluate(s),s.featureState||{})],properties:[Sn,[],s=>s.properties()],"geometry-type":[Nt,[],s=>s.geometryType()],id:[Rt,[],s=>s.id()],zoom:[Ne,[],s=>s.globals.zoom],"heatmap-density":[Ne,[],s=>s.globals.heatmapDensity||0],"line-progress":[Ne,[],s=>s.globals.lineProgress||0],accumulated:[Rt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ne,fu(Ne),(s,n)=>{let l=0;for(let h of n)l+=h.evaluate(s);return l}],"*":[Ne,fu(Ne),(s,n)=>{let l=1;for(let h of n)l*=h.evaluate(s);return l}],"-":{type:Ne,overloads:[[[Ne,Ne],(s,[n,l])=>n.evaluate(s)-l.evaluate(s)],[[Ne],(s,[n])=>-n.evaluate(s)]]},"/":[Ne,[Ne,Ne],(s,[n,l])=>n.evaluate(s)/l.evaluate(s)],"%":[Ne,[Ne,Ne],(s,[n,l])=>n.evaluate(s)%l.evaluate(s)],ln2:[Ne,[],()=>Math.LN2],pi:[Ne,[],()=>Math.PI],e:[Ne,[],()=>Math.E],"^":[Ne,[Ne,Ne],(s,[n,l])=>Math.pow(n.evaluate(s),l.evaluate(s))],sqrt:[Ne,[Ne],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[Ne,[Ne],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[Ne,[Ne],(s,[n])=>Math.log(n.evaluate(s))],log2:[Ne,[Ne],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[Ne,[Ne],(s,[n])=>Math.sin(n.evaluate(s))],cos:[Ne,[Ne],(s,[n])=>Math.cos(n.evaluate(s))],tan:[Ne,[Ne],(s,[n])=>Math.tan(n.evaluate(s))],asin:[Ne,[Ne],(s,[n])=>Math.asin(n.evaluate(s))],acos:[Ne,[Ne],(s,[n])=>Math.acos(n.evaluate(s))],atan:[Ne,[Ne],(s,[n])=>Math.atan(n.evaluate(s))],min:[Ne,fu(Ne),(s,n)=>Math.min(...n.map(l=>l.evaluate(s)))],max:[Ne,fu(Ne),(s,n)=>Math.max(...n.map(l=>l.evaluate(s)))],abs:[Ne,[Ne],(s,[n])=>Math.abs(n.evaluate(s))],round:[Ne,[Ne],(s,[n])=>{let l=n.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ne,[Ne],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[Ne,[Ne],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[qt,[Nt,Rt],(s,[n,l])=>s.properties()[n.value]===l.value],"filter-id-==":[qt,[Rt],(s,[n])=>s.id()===n.value],"filter-type-==":[qt,[Nt],(s,[n])=>s.geometryType()===n.value],"filter-<":[qt,[Nt,Rt],(s,[n,l])=>{let h=s.properties()[n.value],p=l.value;return typeof h==typeof p&&h<p}],"filter-id-<":[qt,[Rt],(s,[n])=>{let l=s.id(),h=n.value;return typeof l==typeof h&&l<h}],"filter->":[qt,[Nt,Rt],(s,[n,l])=>{let h=s.properties()[n.value],p=l.value;return typeof h==typeof p&&h>p}],"filter-id->":[qt,[Rt],(s,[n])=>{let l=s.id(),h=n.value;return typeof l==typeof h&&l>h}],"filter-<=":[qt,[Nt,Rt],(s,[n,l])=>{let h=s.properties()[n.value],p=l.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[qt,[Rt],(s,[n])=>{let l=s.id(),h=n.value;return typeof l==typeof h&&l<=h}],"filter->=":[qt,[Nt,Rt],(s,[n,l])=>{let h=s.properties()[n.value],p=l.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[qt,[Rt],(s,[n])=>{let l=s.id(),h=n.value;return typeof l==typeof h&&l>=h}],"filter-has":[qt,[Rt],(s,[n])=>n.value in s.properties()],"filter-has-id":[qt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[qt,[N(Nt)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[qt,[N(Rt)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[qt,[Nt,N(Rt)],(s,[n,l])=>l.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[qt,[Nt,N(Rt)],(s,[n,l])=>function(h,p,y,_){for(;y<=_;){let w=y+_>>1;if(p[w]===h)return!0;p[w]>h?_=w-1:y=w+1}return!1}(s.properties()[n.value],l.value,0,l.value.length-1)],all:{type:qt,overloads:[[[qt,qt],(s,[n,l])=>n.evaluate(s)&&l.evaluate(s)],[fu(qt),(s,n)=>{for(let l of n)if(!l.evaluate(s))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],(s,[n,l])=>n.evaluate(s)||l.evaluate(s)],[fu(qt),(s,n)=>{for(let l of n)if(l.evaluate(s))return!0;return!1}]]},"!":[qt,[qt],(s,[n])=>!n.evaluate(s)],"is-supported-script":[qt,[Nt],(s,[n])=>{let l=s.globals&&s.globals.isSupportedScript;return!l||l(n.evaluate(s))}],upcase:[Nt,[Nt],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Nt,[Nt],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Nt,fu(Rt),(s,n)=>n.map(l=>Nc(l.evaluate(s))).join("")],"resolved-locale":[Nt,[lo],(s,[n])=>n.evaluate(s).resolvedLocale()]});class Pf{constructor(n,l){var h;this.expression=n,this._warningHistory={},this._evaluator=new mf,this._defaultValue=l?(h=l).type==="color"&&If(h.default)?new dr(0,0,0,0):h.type==="color"?dr.parse(h.default)||null:h.type==="padding"?Wn.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?ua.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,l,h,p,y,_){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_||null;try{let w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new ai(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console!="undefined"&&console.warn(w.message)),this._defaultValue}}}function Mf(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in ol}function hl(s,n){let l=new au(ol,Gc,[],n?function(p){let y={color:zi,string:Nt,number:Ne,enum:Nt,boolean:qt,formatted:Go,padding:gs,resolvedImage:co,variableAnchorOffsetCollection:ie};return p.type==="array"?N(y[p.value]||Rt,p.length):y[p.type]}(n):void 0),h=l.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Tf(new Pf(h,n)):ul(l.errors)}class fl{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!sl(l.expression)}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,p,y,_)}evaluate(n,l,h,p,y,_){return this._styleExpression.evaluate(n,l,h,p,y,_)}}class dl{constructor(n,l,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!sl(l.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,l,h,p,y,_){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,p,y,_)}evaluate(n,l,h,p,y,_){return this._styleExpression.evaluate(n,l,h,p,y,_)}interpolationFactor(n,l,h){return this.interpolationType?An.interpolationFactor(this.interpolationType,n,l,h):0}}function Fm(s,n){let l=hl(s,n);if(l.result==="error")return l;let h=l.value.expression,p=Kc(h);if(!p&&!ll(n))return ul([new Ir("","data expressions not supported")]);let y=Hc(h,["zoom"]);if(!y&&!A0(n))return ul([new Ir("","zoom expressions not supported")]);let _=Zc(h);return _||y?_ instanceof Ir?ul([_]):_ instanceof An&&!Lm(n)?ul([new Ir("","\"interpolate\" expressions cannot be used with this property")]):Tf(_?new dl(p?"camera":"composite",l.value,_.labels,_ instanceof An?_.interpolation:void 0):new fl(p?"constant":"source",l.value)):ul([new Ir("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class pl{constructor(n,l){this._parameters=n,this._specification=l,Qt(this,E0(this._parameters,this._specification))}static deserialize(n){return new pl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Zc(s){let n=null;if(s instanceof ys)n=Zc(s.result);else if(s instanceof _f){for(let l of s.args)if(n=Zc(l),n)break}else(s instanceof il||s instanceof An)&&s.input instanceof la&&s.input.name==="zoom"&&(n=s);return n instanceof Ir||s.eachChild(l=>{let h=Zc(l);h instanceof Ir?n=h:!n&&h?n=new Ir("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):n&&h&&n!==h&&(n=new Ir("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),n}function Of(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(let n of s.slice(1))if(!Of(n)&&typeof n!="boolean")return!1;return!0;default:return!0;}}let kf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zm(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Of(s)||(s=Rf(s));let n=hl(s,kf);if(n.result==="error")throw new Error(n.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,p)=>n.value.evaluate(l,h,{},p),needGeometry:P0(s)}}function iE(s,n){return s<n?-1:s>n?1:0}function P0(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let n=1;n<s.length;n++)if(P0(s[n]))return!0;return!1}function Rf(s){if(!s)return!0;let n=s[0];return s.length<=1?n!=="any":n==="=="?Nm(s[1],s[2],"=="):n==="!="?Ni(Nm(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Nm(s[1],s[2],n):n==="any"?(l=s.slice(1),["any"].concat(l.map(Rf))):n==="all"?["all"].concat(s.slice(1).map(Rf)):n==="none"?["all"].concat(s.slice(1).map(Rf).map(Ni)):n==="in"?Xc(s[1],s.slice(2)):n==="!in"?Ni(Xc(s[1],s.slice(2))):n==="has"?Jc(s[1]):n!=="!has"||Ni(Jc(s[1]));var l}function Nm(s,n,l){switch(s){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,s,n];}}function Xc(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",s,["literal",n.sort(iE)]]:["filter-in-small",s,["literal",n]];}}function Jc(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s];}}function Ni(s){return["!",s]}function du(s){let n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let p="[";for(let y of s)p+=`${du(y)},`;return`${p}]`}let l=Object.keys(s).sort(),h="{";for(let p=0;p<l.length;p++)h+=`${JSON.stringify(l[p])}:${du(s[l[p]])},`;return`${h}}`}function M0(s){let n="";for(let l of vs)n+=`/${du(s[l])}`;return n}function O0(s){let n=s.value;return n?[new Pe(s.key,n,"constants have been deprecated as of v8")]:[]}function Yr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function $a(s){if(Array.isArray(s))return s.map($a);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){let n={};for(let l in s)n[l]=$a(s[l]);return n}return Yr(s)}function Kn(s){let n=s.key,l=s.value,h=s.valueSpec||{},p=s.objectElementValidators||{},y=s.style,_=s.styleSpec,w=s.validateSpec,A=[],P=ar(l);if(P!=="object")return[new Pe(n,l,`object expected, ${P} found`)];for(let M in l){let R=M.split(".")[0],F=h[R]||h["*"],U;if(p[R])U=p[R];else if(h[R])U=w;else if(p["*"])U=p["*"];else{if(!h["*"]){A.push(new Pe(n,l[M],`unknown property "${M}"`));continue}U=w}A=A.concat(U({key:(n&&`${n}.`)+M,value:l[M],valueSpec:F,style:y,styleSpec:_,object:l,objectKey:M,validateSpec:w},l))}for(let M in h)p[M]||h[M].required&&h[M].default===void 0&&l[M]===void 0&&A.push(new Pe(n,l,`missing required property "${M}"`));return A}function Yc(s){let n=s.value,l=s.valueSpec,h=s.style,p=s.styleSpec,y=s.key,_=s.arrayElementValidator||s.validateSpec;if(ar(n)!=="array")return[new Pe(y,n,`array expected, ${ar(n)} found`)];if(l.length&&n.length!==l.length)return[new Pe(y,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new Pe(y,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let w={type:l.value,values:l.values};p.$version<7&&(w.function=l.function),ar(l.value)==="object"&&(w=l.value);let A=[];for(let P=0;P<n.length;P++)A=A.concat(_({array:n,arrayIndex:P,value:n[P],valueSpec:w,validateSpec:s.validateSpec,style:h,styleSpec:p,key:`${y}[${P}]`}));return A}function Bm(s){let n=s.key,l=s.value,h=s.valueSpec,p=ar(l);return p==="number"&&l!=l&&(p="NaN"),p!=="number"?[new Pe(n,l,`number expected, ${p} found`)]:"minimum"in h&&l<h.minimum?[new Pe(n,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Pe(n,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function Df(s){let n=s.valueSpec,l=Yr(s.value.type),h,p,y,_={},w=l!=="categorical"&&s.value.property===void 0,A=!w,P=ar(s.value.stops)==="array"&&ar(s.value.stops[0])==="array"&&ar(s.value.stops[0][0])==="object",M=Kn({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(U){if(l==="identity")return[new Pe(U.key,U.value,"identity function may not have a \"stops\" property")];let V=[],W=U.value;return V=V.concat(Yc({key:U.key,value:W,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:R})),ar(W)==="array"&&W.length===0&&V.push(new Pe(U.key,W,"array must have at least one stop")),V},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:n,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return l==="identity"&&w&&M.push(new Pe(s.key,s.value,"missing required property \"property\"")),l==="identity"||s.value.stops||M.push(new Pe(s.key,s.value,"missing required property \"stops\"")),l==="exponential"&&s.valueSpec.expression&&!Lm(s.valueSpec)&&M.push(new Pe(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(A&&!ll(s.valueSpec)?M.push(new Pe(s.key,s.value,"property functions not supported")):w&&!A0(s.valueSpec)&&M.push(new Pe(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!P||s.value.property!==void 0||M.push(new Pe(s.key,s.value,"\"property\" property is required")),M;function R(U){let V=[],W=U.value,ee=U.key;if(ar(W)!=="array")return[new Pe(ee,W,`array expected, ${ar(W)} found`)];if(W.length!==2)return[new Pe(ee,W,`array length 2 expected, length ${W.length} found`)];if(P){if(ar(W[0])!=="object")return[new Pe(ee,W,`object expected, ${ar(W[0])} found`)];if(W[0].zoom===void 0)return[new Pe(ee,W,"object stop key must have zoom")];if(W[0].value===void 0)return[new Pe(ee,W,"object stop key must have value")];if(y&&y>Yr(W[0].zoom))return[new Pe(ee,W[0].zoom,"stop zoom values must appear in ascending order")];Yr(W[0].zoom)!==y&&(y=Yr(W[0].zoom),p=void 0,_={}),V=V.concat(Kn({key:`${ee}[0]`,value:W[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Bm,value:F}}))}else V=V.concat(F({key:`${ee}[0]`,value:W[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},W));return Mf($a(W[1]))?V.concat([new Pe(`${ee}[1]`,W[1],"expressions are not allowed in function stops.")]):V.concat(U.validateSpec({key:`${ee}[1]`,value:W[1],valueSpec:n,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function F(U,V){let W=ar(U.value),ee=Yr(U.value),ne=U.value!==null?U.value:V;if(h){if(W!==h)return[new Pe(U.key,ne,`${W} stop domain type must match previous stop domain type ${h}`)]}else h=W;if(W!=="number"&&W!=="string"&&W!=="boolean")return[new Pe(U.key,ne,"stop domain value must be a number, string, or boolean")];if(W!=="number"&&l!=="categorical"){let xe=`number expected, ${W} found`;return ll(n)&&l===void 0&&(xe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Pe(U.key,ne,xe)]}return l!=="categorical"||W!=="number"||isFinite(ee)&&Math.floor(ee)===ee?l!=="categorical"&&W==="number"&&p!==void 0&&ee<p?[new Pe(U.key,ne,"stop domain values must appear in ascending order")]:(p=ee,l==="categorical"&&ee in _?[new Pe(U.key,ne,"stop domain values must be unique")]:(_[ee]=!0,[])):[new Pe(U.key,ne,`integer expected, found ${ee}`)]}}function ml(s){let n=(s.expressionContext==="property"?Fm:hl)($a(s.value),s.valueSpec);if(n.result==="error")return n.value.map(h=>new Pe(`${s.key}${h.key}`,s.value,h.message));let l=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new Pe(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!sl(l))return[new Pe(s.key,s.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(s.expressionContext==="filter"&&!sl(l))return[new Pe(s.key,s.value,"\"feature-state\" data expressions are not supported with filters.")];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Hc(l,["zoom","feature-state"]))return[new Pe(s.key,s.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(s.expressionContext==="cluster-initial"&&!Kc(l))return[new Pe(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ho(s){let n=s.key,l=s.value,h=s.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Yr(l))===-1&&p.push(new Pe(n,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(Yr(l))===-1&&p.push(new Pe(n,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),p}function Um(s){return Of($a(s.value))?ml(Qt({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Lf(s)}function Lf(s){let n=s.value,l=s.key;if(ar(n)!=="array")return[new Pe(l,n,`array expected, ${ar(n)} found`)];let h=s.styleSpec,p,y=[];if(n.length<1)return[new Pe(l,n,"filter array must have at least 1 element")];switch(y=y.concat(Ho({key:`${l}[0]`,value:n[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),Yr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Yr(n[1])==="$type"&&y.push(new Pe(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&y.push(new Pe(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=ar(n[1]),p!=="string"&&y.push(new Pe(`${l}[1]`,n[1],`string expected, ${p} found`)));for(let _=2;_<n.length;_++)p=ar(n[_]),Yr(n[1])==="$type"?y=y.concat(Ho({key:`${l}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&y.push(new Pe(`${l}[${_}]`,n[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)y=y.concat(Lf({key:`${l}[${_}]`,value:n[_],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":p=ar(n[1]),n.length!==2?y.push(new Pe(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&y.push(new Pe(`${l}[1]`,n[1],`string expected, ${p} found`));}return y}function jm(s,n){let l=s.key,h=s.validateSpec,p=s.style,y=s.styleSpec,_=s.value,w=s.objectKey,A=y[`${n}_${s.layerType}`];if(!A)return[];let P=w.match(/^(.*)-transition$/);if(n==="paint"&&P&&A[P[1]]&&A[P[1]].transition)return h({key:l,value:_,valueSpec:y.transition,style:p,styleSpec:y});let M=s.valueSpec||A[w];if(!M)return[new Pe(l,_,`unknown property "${w}"`)];let R;if(ar(_)==="string"&&ll(M)&&!M.tokens&&(R=/^{([^}]+)}$/.exec(_)))return[new Pe(l,_,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];let F=[];return s.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&F.push(new Pe(l,_,"use of \"text-field\" requires a style \"glyphs\" property")),w==="text-font"&&If($a(_))&&Yr(_.type)==="identity"&&F.push(new Pe(l,_,"\"text-font\" does not support identity functions"))),F.concat(h({key:s.key,value:_,valueSpec:M,style:p,styleSpec:y,expressionContext:"property",propertyType:n,propertyKey:w}))}function Ff(s){return jm(s,"paint")}function Vm(s){return jm(s,"layout")}function $m(s){let n=[],l=s.value,h=s.key,p=s.style,y=s.styleSpec;l.type||l.ref||n.push(new Pe(h,l,"either \"type\" or \"ref\" is required"));let _=Yr(l.type),w=Yr(l.ref);if(l.id){let A=Yr(l.id);for(let P=0;P<s.arrayIndex;P++){let M=p.layers[P];Yr(M.id)===A&&n.push(new Pe(h,l.id,`duplicate layer id "${l.id}", previously used at line ${M.id.__line__}`))}}if("ref"in l){let A;["type","source","source-layer","filter","layout"].forEach(P=>{P in l&&n.push(new Pe(h,l[P],`"${P}" is prohibited for ref layers`))}),p.layers.forEach(P=>{Yr(P.id)===w&&(A=P)}),A?A.ref?n.push(new Pe(h,l.ref,"ref cannot reference another ref layer")):_=Yr(A.type):n.push(new Pe(h,l.ref,`ref layer "${w}" not found`))}else if(_!=="background")if(l.source){let A=p.sources&&p.sources[l.source],P=A&&Yr(A.type);A?P==="vector"&&_==="raster"?n.push(new Pe(h,l.source,`layer "${l.id}" requires a raster source`)):P!=="raster-dem"&&_==="hillshade"?n.push(new Pe(h,l.source,`layer "${l.id}" requires a raster-dem source`)):P==="raster"&&_!=="raster"?n.push(new Pe(h,l.source,`layer "${l.id}" requires a vector source`)):P!=="vector"||l["source-layer"]?P==="raster-dem"&&_!=="hillshade"?n.push(new Pe(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!l.paint||!l.paint["line-gradient"]||P==="geojson"&&A.lineMetrics||n.push(new Pe(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Pe(h,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new Pe(h,l.source,`source "${l.source}" not found`))}else n.push(new Pe(h,l,"missing required property \"source\""));return n=n.concat(Kn({key:h,value:l,valueSpec:y.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${h}.type`,value:l.type,valueSpec:y.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:l,objectKey:"type"}),filter:Um,layout:A=>Kn({layer:l,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":P=>Vm(Qt({layerType:_},P))}}),paint:A=>Kn({layer:l,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":P=>Ff(Qt({layerType:_},P))}})}})),n}function pu(s){let n=s.value,l=s.key,h=ar(n);return h!=="string"?[new Pe(l,n,`string expected, ${h} found`)]:[]}let zf={promoteId:function({key:s,value:n}){if(ar(n)==="string")return pu({key:s,value:n});{let l=[];for(let h in n)l.push(...pu({key:`${s}.${h}`,value:n[h]}));return l}}};function Qc(s){let n=s.value,l=s.key,h=s.styleSpec,p=s.style,y=s.validateSpec;if(!n.type)return[new Pe(l,n,"\"type\" is required")];let _=Yr(n.type),w;switch(_){case"vector":case"raster":return w=Kn({key:l,value:n,valueSpec:h[`source_${_.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:zf,validateSpec:y}),w;case"raster-dem":return w=function(A){var P;let M=(P=A.sourceName)!==null&&P!==void 0?P:"",R=A.value,F=A.styleSpec,U=F.source_raster_dem,V=A.style,W=[],ee=ar(R);if(R===void 0)return W;if(ee!=="object")return W.push(new Pe("source_raster_dem",R,`object expected, ${ee} found`)),W;let ne=Yr(R.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],ce=A.value.encoding?`"${A.value.encoding}"`:"Default";for(let ye in R)!ne&&xe.includes(ye)?W.push(new Pe(ye,R[ye],`In "${M}": "${ye}" is only valid when "encoding" is set to "custom". ${ce} encoding found`)):U[ye]?W=W.concat(A.validateSpec({key:ye,value:R[ye],valueSpec:U[ye],validateSpec:A.validateSpec,style:V,styleSpec:F})):W.push(new Pe(ye,R[ye],`unknown property "${ye}"`));return W}({sourceName:l,value:n,style:s.style,styleSpec:h,validateSpec:y}),w;case"geojson":if(w=Kn({key:l,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:y,objectElementValidators:zf}),n.cluster)for(let A in n.clusterProperties){let[P,M]=n.clusterProperties[A],R=typeof P=="string"?[P,["accumulated"],["get",A]]:P;w.push(...ml({key:`${l}.${A}.map`,value:M,validateSpec:y,expressionContext:"cluster-map"})),w.push(...ml({key:`${l}.${A}.reduce`,value:R,validateSpec:y,expressionContext:"cluster-reduce"}))}return w;case"video":return Kn({key:l,value:n,valueSpec:h.source_video,style:p,validateSpec:y,styleSpec:h});case"image":return Kn({key:l,value:n,valueSpec:h.source_image,style:p,validateSpec:y,styleSpec:h});case"canvas":return[new Pe(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ho({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:y,styleSpec:h});}}function Wm(s){let n=s.value,l=s.styleSpec,h=l.light,p=s.style,y=[],_=ar(n);if(n===void 0)return y;if(_!=="object")return y=y.concat([new Pe("light",n,`object expected, ${_} found`)]),y;for(let w in n){let A=w.match(/^(.*)-transition$/);y=y.concat(A&&h[A[1]]&&h[A[1]].transition?s.validateSpec({key:w,value:n[w],valueSpec:l.transition,validateSpec:s.validateSpec,style:p,styleSpec:l}):h[w]?s.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:s.validateSpec,style:p,styleSpec:l}):[new Pe(w,n[w],`unknown property "${w}"`)])}return y}function Gm(s){let n=s.value,l=s.styleSpec,h=l.sky,p=s.style,y=ar(n);if(n===void 0)return[];if(y!=="object")return[new Pe("sky",n,`object expected, ${y} found`)];let _=[];for(let w in n)_=_.concat(h[w]?s.validateSpec({key:w,value:n[w],valueSpec:h[w],style:p,styleSpec:l}):[new Pe(w,n[w],`unknown property "${w}"`)]);return _}function Km(s){let n=s.value,l=s.styleSpec,h=l.terrain,p=s.style,y=[],_=ar(n);if(n===void 0)return y;if(_!=="object")return y=y.concat([new Pe("terrain",n,`object expected, ${_} found`)]),y;for(let w in n)y=y.concat(h[w]?s.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:s.validateSpec,style:p,styleSpec:l}):[new Pe(w,n[w],`unknown property "${w}"`)]);return y}function Hm(s){let n=[],l=s.value,h=s.key;if(Array.isArray(l)){let p=[],y=[];for(let _ in l)l[_].id&&p.includes(l[_].id)&&n.push(new Pe(h,l,`all the sprites' ids must be unique, but ${l[_].id} is duplicated`)),p.push(l[_].id),l[_].url&&y.includes(l[_].url)&&n.push(new Pe(h,l,`all the sprites' URLs must be unique, but ${l[_].url} is duplicated`)),y.push(l[_].url),n=n.concat(Kn({key:`${h}[${_}]`,value:l[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return pu({key:h,value:l})}let Nf={"*":()=>[],array:Yc,boolean:function(s){let n=s.value,l=s.key,h=ar(n);return h!=="boolean"?[new Pe(l,n,`boolean expected, ${h} found`)]:[]},number:Bm,color:function(s){let n=s.key,l=s.value,h=ar(l);return h!=="string"?[new Pe(n,l,`color expected, ${h} found`)]:dr.parse(String(l))?[]:[new Pe(n,l,`color expected, "${l}" found`)]},constants:O0,enum:Ho,filter:Um,function:Df,layer:$m,object:Kn,source:Qc,light:Wm,sky:Gm,terrain:Km,projection:function(s){let n=s.value,l=s.styleSpec,h=l.projection,p=s.style,y=ar(n);if(n===void 0)return[];if(y!=="object")return[new Pe("projection",n,`object expected, ${y} found`)];let _=[];for(let w in n)_=_.concat(h[w]?s.validateSpec({key:w,value:n[w],valueSpec:h[w],style:p,styleSpec:l}):[new Pe(w,n[w],`unknown property "${w}"`)]);return _},string:pu,formatted:function(s){return pu(s).length===0?[]:ml(s)},resolvedImage:function(s){return pu(s).length===0?[]:ml(s)},padding:function(s){let n=s.key,l=s.value;if(ar(l)==="array"){if(l.length<1||l.length>4)return[new Pe(n,l,`padding requires 1 to 4 values; ${l.length} values found`)];let h={type:"number"},p=[];for(let y=0;y<l.length;y++)p=p.concat(s.validateSpec({key:`${n}[${y}]`,value:l[y],validateSpec:s.validateSpec,valueSpec:h}));return p}return Bm({key:n,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(s){let n=s.key,l=s.value,h=ar(l),p=s.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new Pe(n,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let _=0;_<l.length;_+=2)y=y.concat(Ho({key:`${n}[${_}]`,value:l[_],valueSpec:p.layout_symbol["text-anchor"]})),y=y.concat(Yc({key:`${n}[${_+1}]`,value:l[_+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:p}));return y},sprite:Hm};function vl(s){let n=s.value,l=s.valueSpec,h=s.styleSpec;return s.validateSpec=vl,l.expression&&If(Yr(n))?Df(s):l.expression&&Mf($a(n))?ml(s):l.type&&Nf[l.type]?Nf[l.type](s):Kn(Qt({},s,{valueSpec:l.type?h[l.type]:l}))}function k0(s){let n=s.value,l=s.key,h=pu(s);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Pe(l,n,"\"glyphs\" url must include a \"{fontstack}\" token")),n.indexOf("{range}")===-1&&h.push(new Pe(l,n,"\"glyphs\" url must include a \"{range}\" token"))),h}function ca(s,n=Ae){let l=[];return l=l.concat(vl({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:vl,objectElementValidators:{glyphs:k0,"*":()=>[]}})),s.constants&&(l=l.concat(O0({key:"constants",value:s.constants,style:s,styleSpec:n,validateSpec:vl}))),Zm(l)}function fo(s){return function(n){return s(va(at({},n),{validateSpec:vl}))}}function Zm(s){return[].concat(s).sort((n,l)=>n.line-l.line)}function Wa(s){return function(...n){return Zm(s.apply(this,n))}}ca.source=Wa(fo(Qc)),ca.sprite=Wa(fo(Hm)),ca.glyphs=Wa(fo(k0)),ca.light=Wa(fo(Wm)),ca.sky=Wa(fo(Gm)),ca.terrain=Wa(fo(Km)),ca.layer=Wa(fo($m)),ca.filter=Wa(fo(Um)),ca.paintProperty=Wa(fo(Ff)),ca.layoutProperty=Wa(fo(Vm));let mu=ca,nE=mu.light,aE=mu.sky,R0=mu.paintProperty,D0=mu.layoutProperty;function Xm(s,n){let l=!1;if(n&&n.length)for(let h of n)s.fire(new uo(new Error(h.message))),l=!0;return l}class gl{constructor(n,l,h){let p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;let _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(l=_[1])+2*(h=_[2]);for(let A=0;A<this.d*this.d;A++){let P=_[3+A],M=_[3+A+1];p.push(P===M?null:_.subarray(P,M))}let w=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],w),this.bboxes=_.subarray(w),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=n,this.padding=h,this.scale=l/n,this.uid=0;let y=h/l*n;this.min=-y,this.max=n+y}insert(n,l,h,p,y){this._forEachCell(l,h,p,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,l,h,p,y,_){this.cells[y].push(_)}query(n,l,h,p,y){let _=this.min,w=this.max;if(n<=_&&l<=_&&w<=h&&w<=p&&!y)return Array.prototype.slice.call(this.keys);{let A=[];return this._forEachCell(n,l,h,p,this._queryCell,A,{},y),A}}_queryCell(n,l,h,p,y,_,w,A){let P=this.cells[y];if(P!==null){let M=this.keys,R=this.bboxes;for(let F=0;F<P.length;F++){let U=P[F];if(w[U]===void 0){let V=4*U;(A?A(R[V+0],R[V+1],R[V+2],R[V+3]):n<=R[V+2]&&l<=R[V+3]&&h>=R[V+0]&&p>=R[V+1])?(w[U]=!0,_.push(M[U])):w[U]=!1}}}}_forEachCell(n,l,h,p,y,_,w,A){let P=this._convertToCellCoord(n),M=this._convertToCellCoord(l),R=this._convertToCellCoord(h),F=this._convertToCellCoord(p);for(let U=P;U<=R;U++)for(let V=M;V<=F;V++){let W=this.d*V+U;if((!A||A(this._convertFromCellCoord(U),this._convertFromCellCoord(V),this._convertFromCellCoord(U+1),this._convertFromCellCoord(V+1)))&&y.call(this,n,l,h,p,W,_,w,A))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let n=this.cells,l=3+this.cells.length+1+1,h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;let p=new Int32Array(l+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let y=l;for(let _=0;_<n.length;_++){let w=n[_];p[3+_]=y,p.set(w,y),y+=w.length}return p[3+n.length]=y,p.set(this.keys,y),y+=this.keys.length,p[3+n.length+1]=y,p.set(this.bboxes,y),y+=this.bboxes.length,p.buffer}static serialize(n,l){let h=n.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(n){return new gl(n.buffer)}}let ha={};function ot(s,n,l={}){if(ha[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),ha[s]={klass:n,omit:l.omit||[],shallow:l.shallow||[]}}ot("Object",Object),ot("TransferableGridIndex",gl),ot("Color",dr),ot("Error",Error),ot("AJAXError",tn),ot("ResolvedImage",Gn),ot("StylePropertyFunction",pl),ot("StyleExpression",Pf,{omit:["_evaluator"]}),ot("ZoomDependentExpression",dl),ot("ZoomConstantExpression",fl),ot("CompoundExpression",la,{omit:["_evaluate"]});for(let s in ol)ol[s]._classRegistryKey||ot(`Expression_${s}`,ol[s]);function Bf(s){return s&&typeof ArrayBuffer!="undefined"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Jm(s){return s.$name||s.constructor._classRegistryKey}function L0(s){return!function(n){if(n===null||typeof n!="object")return!1;let l=Jm(n);return!(!l||l==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Bf(s)||hr(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function yl(s,n){if(L0(s))return(Bf(s)||hr(s))&&n&&n.push(s),ArrayBuffer.isView(s)&&n&&n.push(s.buffer),s instanceof ImageData&&n&&n.push(s.data.buffer),s;if(Array.isArray(s)){let y=[];for(let _ of s)y.push(yl(_,n));return y}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);let l=Jm(s);if(!l)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!ha[l])throw new Error(`${l} is not registered.`);let{klass:h}=ha[l],p=h.serialize?h.serialize(s,n):{};if(h.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let y in s){if(!s.hasOwnProperty(y)||ha[l].omit.indexOf(y)>=0)continue;let _=s[y];p[y]=ha[l].shallow.indexOf(y)>=0?_:yl(_,n)}s instanceof Error&&(p.message=s.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(p.$name=l),p}function _l(s){if(L0(s))return s;if(Array.isArray(s))return s.map(_l);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);let n=Jm(s)||"Object";if(!ha[n])throw new Error(`can't deserialize unregistered class ${n}`);let{klass:l}=ha[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(s);let h=Object.create(l.prototype);for(let p of Object.keys(s)){if(p==="$name")continue;let y=s[p];h[p]=ha[n].shallow.indexOf(p)>=0?y:_l(y)}return h}class Ym{constructor(){this.first=!0}update(n,l){let h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}let Jt={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Qm(s){for(let n of s)if(tv(n.charCodeAt(0)))return!0;return!1}function oE(s){for(let n of s)if(!xl(n.charCodeAt(0)))return!1;return!0}function ev(s){let n=s.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch(h){return null}}).filter(l=>l);return new RegExp(n.join("|"),"u")}let sE=ev(["Arab","Dupl","Mong","Ougr","Syrc"]);function xl(s){return!sE.test(String.fromCodePoint(s))}let F0=ev(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function tv(s){return!(s!==746&&s!==747&&(s<4352||!(Jt["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Jt["CJK Compatibility"](s)||Jt["CJK Strokes"](s)||!(!Jt["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Jt["Enclosed CJK Letters and Months"](s)||Jt["Ideographic Description Characters"](s)||Jt.Kanbun(s)||Jt.Katakana(s)&&s!==12540||!(!Jt["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Jt["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Jt["Vertical Forms"](s)||Jt["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||F0.test(String.fromCodePoint(s)))))}function z0(s){return!(tv(s)||function(n){return!!(Jt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Jt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Jt["Letterlike Symbols"](n)||Jt["Number Forms"](n)||Jt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Jt["Control Pictures"](n)&&n!==9251||Jt["Optical Character Recognition"](n)||Jt["Enclosed Alphanumerics"](n)||Jt["Geometric Shapes"](n)||Jt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Jt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Jt["CJK Symbols and Punctuation"](n)||Jt.Katakana(n)||Jt["Private Use Area"](n)||Jt["CJK Compatibility Forms"](n)||Jt["Small Form Variants"](n)||Jt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}let uE=ev(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function rv(s){return uE.test(String.fromCodePoint(s))}function lE(s,n){return!(!n&&rv(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Jt.Khmer(s))}function cE(s){for(let n of s)if(rv(n.charCodeAt(0)))return!0;return!1}let Hn=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Cr{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ym,this.transition={})}isSupportedScript(n){return function(l,h){for(let p of l)if(!lE(p.charCodeAt(0),h))return!1;return!0}(n,Hn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let n=this.zoom,l=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class bl{constructor(n,l){this.property=n,this.value=l,this.expression=function(h,p){if(If(h))return new pl(h,p);if(Mf(h)){let y=Fm(h,p);if(y.result==="error")throw new Error(y.value.map(_=>`${_.key}: ${_.message}`).join(", "));return y.value}{let y=h;return p.type==="color"&&typeof h=="string"?y=dr.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(y=ua.parse(h)):y=Wn.parse(h),{kind:"constant",evaluate:()=>y}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,h){return this.property.possiblyEvaluate(this,n,l,h)}}class Uf{constructor(n){this.property=n,this.value=new bl(n,void 0)}transitioned(n,l){return new N0(this.property,this.value,l,Le({},n.transition,this.transition),n.now)}untransitioned(){return new N0(this.property,this.value,null,{},0)}}class jf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return He(this._values[n].value.value)}setValue(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Uf(this._values[n].property)),this._values[n].value=new bl(this._values[n].property,l===null?void 0:He(l))}getTransition(n){return He(this._values[n].transition)}setTransition(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Uf(this._values[n].property)),this._values[n].transition=He(l)||void 0}serialize(){let n={};for(let l of Object.keys(this._values)){let h=this.getValue(l);h!==void 0&&(n[l]=h);let p=this.getTransition(l);p!==void 0&&(n[`${l}-transition`]=p)}return n}transitioned(n,l){let h=new eh(this._properties);for(let p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,l._values[p]);return h}untransitioned(){let n=new eh(this._properties);for(let l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class N0{constructor(n,l,h,p,y){this.property=n,this.value=l,this.begin=y+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,l,h){let p=n.now||0,y=this.value.possiblyEvaluate(n,l,h),_=this.prior;if(_){if(p>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(p<this.begin)return _.possiblyEvaluate(n,l,h);{let w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,l,h),y,function(A){if(A<=0)return 0;if(A>=1)return 1;let P=A*A,M=P*A;return 4*(A<.5?M:3*(A-P)+M-.75)}(w))}}return y}}class eh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,h){let p=new rh(this._properties);for(let y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(n,l,h);return p}hasTransition(){for(let n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class th{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return He(this._values[n].value)}setValue(n,l){this._values[n]=new bl(this._values[n].property,l===null?void 0:He(l))}serialize(){let n={};for(let l of Object.keys(this._values)){let h=this.getValue(l);h!==void 0&&(n[l]=h)}return n}possiblyEvaluate(n,l,h){let p=new rh(this._properties);for(let y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(n,l,h);return p}}class po{constructor(n,l,h){this.property=n,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,h,p){return this.property.evaluate(this.value,this.parameters,n,l,h,p)}}class rh{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class lt{constructor(n){this.specification=n}possiblyEvaluate(n,l){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(l)}interpolate(n,l,h){let p=qn[this.specification.type];return p?p(n,l,h):n}}class St{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,h,p){return new po(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},h,p)}:n.expression,l)}interpolate(n,l,h){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new po(this,{kind:"constant",value:void 0},n.parameters);let p=qn[this.specification.type];if(p){let y=p(n.value.value,l.value.value,h);return new po(this,{kind:"constant",value:y},n.parameters)}return n}evaluate(n,l,h,p,y,_){return n.kind==="constant"?n.value:n.evaluate(l,h,p,y,_)}}class Vf extends St{possiblyEvaluate(n,l,h,p){if(n.value===void 0)return new po(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){let y=n.expression.evaluate(l,null,{},h,p),_=n.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,w=this._calculate(_,_,_,l);return new po(this,{kind:"constant",value:w},l)}if(n.expression.kind==="camera"){let y=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new po(this,{kind:"constant",value:y},l)}return new po(this,n.expression,l)}evaluate(n,l,h,p,y,_){if(n.kind==="source"){let w=n.evaluate(l,h,p,y,_);return this._calculate(w,w,w,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},h,p),n.evaluate({zoom:Math.floor(l.zoom)},h,p),n.evaluate({zoom:Math.floor(l.zoom)+1},h,p),l):n.value}_calculate(n,l,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class $f{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){let y=n.expression.evaluate(l,null,{},h,p);return this._calculate(y,y,y,l)}return this._calculate(n.expression.evaluate(new Cr(Math.floor(l.zoom-1),l)),n.expression.evaluate(new Cr(Math.floor(l.zoom),l)),n.expression.evaluate(new Cr(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class iv{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,p){return!!n.expression.evaluate(l,null,{},h,p)}interpolate(){return!1}}class g{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let l in n){let h=n[l];h.specification.overridable&&this.overridableProperties.push(l);let p=this.defaultPropertyValues[l]=new bl(h,void 0),y=this.defaultTransitionablePropertyValues[l]=new Uf(h);this.defaultTransitioningPropertyValues[l]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=p.possiblyEvaluate({})}}}ot("DataDrivenProperty",St),ot("DataConstantProperty",lt),ot("CrossFadedDataDrivenProperty",Vf),ot("CrossFadedProperty",$f),ot("ColorRampProperty",iv);let i="-transition";class c extends Wo{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new th(l.layout)),l.paint)){this._transitionablePaint=new jf(l.paint);for(let h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(let h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rh(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,h={}){l!=null&&this._validate(D0,`layers.${this.id}.layout.${n}`,n,l,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return n.endsWith(i)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,h={}){if(l!=null&&this._validate(R0,`layers.${this.id}.paint.${n}`,n,l,h))return!1;if(n.endsWith(i))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;{let p=this._transitionablePaint._values[n],y=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);let A=this._transitionablePaint._values[n].value;return A.isDataDriven()||_||y||this._handleOverridablePaintPropertyUpdate(n,w,A)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,l,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){let n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ft(n,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(n,l,h,p,y={}){return(!y||y.validate!==!1)&&Xm(this,n.call(mu,{key:l,layerType:this.type,objectKey:h,value:p,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let n in this.paint._values){let l=this.paint.get(n);if(l instanceof po&&ll(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class d{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){let l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function S(s,n=1){let l=0,h=0;return{members:s.map(p=>{let y=f[p.type].BYTES_PER_ELEMENT,_=l=E(l,Math.max(n,y)),w=p.components||1;return h=Math.max(h,y),l+=y*w,{name:p.name,type:p.type,components:w,offset:_}}),size:E(l,Math.max(h,n)),alignment:n}}function E(s,n){return Math.ceil(s/n)*n}class C extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.int16[p+0]=l,this.int16[p+1]=h,n}}C.prototype.bytesPerElement=4,ot("StructArrayLayout2i4",C);class O extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=p,n}}O.prototype.bytesPerElement=6,ot("StructArrayLayout3i6",O);class D extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p){let y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,p)}emplace(n,l,h,p,y){let _=4*n;return this.int16[_+0]=l,this.int16[_+1]=h,this.int16[_+2]=p,this.int16[_+3]=y,n}}D.prototype.bytesPerElement=8,ot("StructArrayLayout4i8",D);class L extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,w){let A=6*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=y,this.int16[A+4]=_,this.int16[A+5]=w,n}}L.prototype.bytesPerElement=12,ot("StructArrayLayout2i4i12",L);class j extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,w){let A=4*n,P=8*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.uint8[P+4]=p,this.uint8[P+5]=y,this.uint8[P+6]=_,this.uint8[P+7]=w,n}}j.prototype.bytesPerElement=8,ot("StructArrayLayout2i4ub8",j);class G extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.float32[p+0]=l,this.float32[p+1]=h,n}}G.prototype.bytesPerElement=8,ot("StructArrayLayout2f8",G);class X extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,P,M){let R=this.length;return this.resize(R+1),this.emplace(R,n,l,h,p,y,_,w,A,P,M)}emplace(n,l,h,p,y,_,w,A,P,M,R){let F=10*n;return this.uint16[F+0]=l,this.uint16[F+1]=h,this.uint16[F+2]=p,this.uint16[F+3]=y,this.uint16[F+4]=_,this.uint16[F+5]=w,this.uint16[F+6]=A,this.uint16[F+7]=P,this.uint16[F+8]=M,this.uint16[F+9]=R,n}}X.prototype.bytesPerElement=20,ot("StructArrayLayout10ui20",X);class re extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,P,M,R,F){let U=this.length;return this.resize(U+1),this.emplace(U,n,l,h,p,y,_,w,A,P,M,R,F)}emplace(n,l,h,p,y,_,w,A,P,M,R,F,U){let V=12*n;return this.int16[V+0]=l,this.int16[V+1]=h,this.int16[V+2]=p,this.int16[V+3]=y,this.uint16[V+4]=_,this.uint16[V+5]=w,this.uint16[V+6]=A,this.uint16[V+7]=P,this.int16[V+8]=M,this.int16[V+9]=R,this.int16[V+10]=F,this.int16[V+11]=U,n}}re.prototype.bytesPerElement=24,ot("StructArrayLayout4i4ui4i24",re);class ae extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=p,n}}ae.prototype.bytesPerElement=12,ot("StructArrayLayout3f12",ae);class oe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}oe.prototype.bytesPerElement=4,ot("StructArrayLayout1ul4",oe);class le extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,P){let M=this.length;return this.resize(M+1),this.emplace(M,n,l,h,p,y,_,w,A,P)}emplace(n,l,h,p,y,_,w,A,P,M){let R=10*n,F=5*n;return this.int16[R+0]=l,this.int16[R+1]=h,this.int16[R+2]=p,this.int16[R+3]=y,this.int16[R+4]=_,this.int16[R+5]=w,this.uint32[F+3]=A,this.uint16[R+8]=P,this.uint16[R+9]=M,n}}le.prototype.bytesPerElement=20,ot("StructArrayLayout6i1ul2ui20",le);class Q extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,w){let A=6*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=p,this.int16[A+3]=y,this.int16[A+4]=_,this.int16[A+5]=w,n}}Q.prototype.bytesPerElement=12,ot("StructArrayLayout2i2i2i12",Q);class fe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y){let _=this.length;return this.resize(_+1),this.emplace(_,n,l,h,p,y)}emplace(n,l,h,p,y,_){let w=4*n,A=8*n;return this.float32[w+0]=l,this.float32[w+1]=h,this.float32[w+2]=p,this.int16[A+6]=y,this.int16[A+7]=_,n}}fe.prototype.bytesPerElement=16,ot("StructArrayLayout2f1f2i16",fe);class ge extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,n,l,h,p,y,_)}emplace(n,l,h,p,y,_,w){let A=16*n,P=4*n,M=8*n;return this.uint8[A+0]=l,this.uint8[A+1]=h,this.float32[P+1]=p,this.float32[P+2]=y,this.int16[M+6]=_,this.int16[M+7]=w,n}}ge.prototype.bytesPerElement=16,ot("StructArrayLayout2ub2f2i16",ge);class we extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=p,n}}we.prototype.bytesPerElement=6,ot("StructArrayLayout3ui6",we);class Me extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,P,M,R,F,U,V,W,ee,ne){let xe=this.length;return this.resize(xe+1),this.emplace(xe,n,l,h,p,y,_,w,A,P,M,R,F,U,V,W,ee,ne)}emplace(n,l,h,p,y,_,w,A,P,M,R,F,U,V,W,ee,ne,xe){let ce=24*n,ye=12*n,Ee=48*n;return this.int16[ce+0]=l,this.int16[ce+1]=h,this.uint16[ce+2]=p,this.uint16[ce+3]=y,this.uint32[ye+2]=_,this.uint32[ye+3]=w,this.uint32[ye+4]=A,this.uint16[ce+10]=P,this.uint16[ce+11]=M,this.uint16[ce+12]=R,this.float32[ye+7]=F,this.float32[ye+8]=U,this.uint8[Ee+36]=V,this.uint8[Ee+37]=W,this.uint8[Ee+38]=ee,this.uint32[ye+10]=ne,this.int16[ce+22]=xe,n}}Me.prototype.bytesPerElement=48,ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Me);class Fe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p,y,_,w,A,P,M,R,F,U,V,W,ee,ne,xe,ce,ye,Ee,De,et,bt,Je,We,dt,st){let nt=this.length;return this.resize(nt+1),this.emplace(nt,n,l,h,p,y,_,w,A,P,M,R,F,U,V,W,ee,ne,xe,ce,ye,Ee,De,et,bt,Je,We,dt,st)}emplace(n,l,h,p,y,_,w,A,P,M,R,F,U,V,W,ee,ne,xe,ce,ye,Ee,De,et,bt,Je,We,dt,st,nt){let Ie=32*n,mt=16*n;return this.int16[Ie+0]=l,this.int16[Ie+1]=h,this.int16[Ie+2]=p,this.int16[Ie+3]=y,this.int16[Ie+4]=_,this.int16[Ie+5]=w,this.int16[Ie+6]=A,this.int16[Ie+7]=P,this.uint16[Ie+8]=M,this.uint16[Ie+9]=R,this.uint16[Ie+10]=F,this.uint16[Ie+11]=U,this.uint16[Ie+12]=V,this.uint16[Ie+13]=W,this.uint16[Ie+14]=ee,this.uint16[Ie+15]=ne,this.uint16[Ie+16]=xe,this.uint16[Ie+17]=ce,this.uint16[Ie+18]=ye,this.uint16[Ie+19]=Ee,this.uint16[Ie+20]=De,this.uint16[Ie+21]=et,this.uint16[Ie+22]=bt,this.uint32[mt+12]=Je,this.float32[mt+13]=We,this.float32[mt+14]=dt,this.uint16[Ie+30]=st,this.uint16[Ie+31]=nt,n}}Fe.prototype.bytesPerElement=64,ot("StructArrayLayout8i15ui1ul2f2ui64",Fe);class Ge extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}Ge.prototype.bytesPerElement=4,ot("StructArrayLayout1f4",Ge);class it extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=3*n;return this.uint16[6*n+0]=l,this.float32[y+1]=h,this.float32[y+2]=p,n}}it.prototype.bytesPerElement=12,ot("StructArrayLayout1ui2f12",it);class Ve extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,l,h)}emplace(n,l,h,p){let y=4*n;return this.uint32[2*n+0]=l,this.uint16[y+2]=h,this.uint16[y+3]=p,n}}Ve.prototype.bytesPerElement=8,ot("StructArrayLayout1ul2ui8",Ve);class je extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){let h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){let p=2*n;return this.uint16[p+0]=l,this.uint16[p+1]=h,n}}je.prototype.bytesPerElement=4,ot("StructArrayLayout2ui4",je);class ct extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){let l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}ct.prototype.bytesPerElement=2,ot("StructArrayLayout1ui2",ct);class Pt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,p){let y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,p)}emplace(n,l,h,p,y){let _=4*n;return this.float32[_+0]=l,this.float32[_+1]=h,this.float32[_+2]=p,this.float32[_+3]=y,n}}Pt.prototype.bytesPerElement=16,ot("StructArrayLayout4f16",Pt);class $e extends d{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}$e.prototype.size=20;class Ye extends le{get(n){return new $e(this,n)}}ot("CollisionBoxArray",Ye);class Tt extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Tt.prototype.size=48;class Pr extends Me{get(n){return new Tt(this,n)}}ot("PlacedSymbolArray",Pr);class Bt extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Bt.prototype.size=64;class Xt extends Fe{get(n){return new Bt(this,n)}}ot("SymbolInstanceArray",Xt);class Mr extends Ge{getoffsetX(n){return this.float32[1*n+0]}}ot("GlyphOffsetArray",Mr);class Bi extends O{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}ot("SymbolLineVertexArray",Bi);class Ga extends d{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ga.prototype.size=12;class Or extends it{get(n){return new Ga(this,n)}}ot("TextAnchorOffsetArray",Or);class En extends d{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}En.prototype.size=8;class sn extends Ve{get(n){return new En(this,n)}}ot("FeatureIndexArray",sn);class Ui extends C{}class un extends C{}class mo extends C{}class wl extends L{}class Wf extends j{}class Sl extends G{}class fa extends X{}class Gf extends re{}class nv extends ae{}class da extends oe{}class pa extends Q{}class xs extends ge{}class Ka extends we{}class Oi extends je{}let ji=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zn}=ji;class Yt{constructor(n=[]){this.segments=n}prepareSegment(n,l,h,p){let y=this.segments[this.segments.length-1];return n>Yt.MAX_VERTEX_ARRAY_LENGTH&&Lr(`Max vertices per segment is ${Yt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!y||y.vertexLength+n>Yt.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==p)&&(y={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(y.sortKey=p),this.segments.push(y)),y}get(){return this.segments}destroy(){for(let n of this.segments)for(let l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,h,p){return new Yt([{vertexOffset:n,primitiveOffset:l,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function vu(s,n){return 256*(s=ve(Math.floor(s),0,255))+ve(Math.floor(n),0,255)}Yt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ot("SegmentVector",Yt);let ql=S([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Al={exports:{}},B0={exports:{}};B0.exports=function(s,n){var l,h,p,y,_,w,A,P;for(h=s.length-(l=3&s.length),p=n,_=3432918353,w=461845907,P=0;P<h;)A=255&s.charCodeAt(P)|(255&s.charCodeAt(++P))<<8|(255&s.charCodeAt(++P))<<16|(255&s.charCodeAt(++P))<<24,++P,p=27492+(65535&(y=5*(65535&(p=(p^=A=(65535&(A=(A=(65535&A)*_+(((A>>>16)*_&65535)<<16)&4294967295)<<15|A>>>17))*w+(((A>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(A=0,l){case 3:A^=(255&s.charCodeAt(P+2))<<16;case 2:A^=(255&s.charCodeAt(P+1))<<8;case 1:p^=A=(65535&(A=(A=(65535&(A^=255&s.charCodeAt(P)))*_+(((A>>>16)*_&65535)<<16)&4294967295)<<15|A>>>17))*w+(((A>>>16)*w&65535)<<16)&4294967295;}return p^=s.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var hE=B0.exports,U0={exports:{}};U0.exports=function(s,n){for(var l,h=s.length,p=n^h,y=0;h>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(y)|(255&s.charCodeAt(++y))<<8|(255&s.charCodeAt(++y))<<16|(255&s.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:p^=(255&s.charCodeAt(y+2))<<16;case 2:p^=(255&s.charCodeAt(y+1))<<8;case 1:p=1540483477*(65535&(p^=255&s.charCodeAt(y)))+((1540483477*(p>>>16)&65535)<<16);}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var bs=hE,j0=U0.exports;Al.exports=bs,Al.exports.murmur3=bs,Al.exports.murmur2=j0;var Kf=m(Al.exports);class ih{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,h,p){this.ids.push(Hf(n)),this.positions.push(l,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let l=Hf(n),h=0,p=this.ids.length-1;for(;h<p;){let _=h+p>>1;this.ids[_]>=l?p=_:h=_+1}let y=[];for(;this.ids[h]===l;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(n,l){let h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Zf(h,p,0,h.length-1),l&&l.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){let l=new ih;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function Hf(s){let n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Kf(String(s))}function Zf(s,n,l,h){for(;l<h;){let p=s[l+h>>1],y=l-1,_=h+1;for(;;){do y++;while(s[y]<p);do _--;while(s[_]>p);if(y>=_)break;El(s,y,_),El(n,3*y,3*_),El(n,3*y+1,3*_+1),El(n,3*y+2,3*_+2)}_-l<h-_?(Zf(s,n,l,_),l=_+1):(Zf(s,n,_+1,h),h=_)}}function El(s,n,l){let h=s[n];s[n]=s[l],s[l]=h}ot("FeaturePositionMap",ih);class nh{constructor(n,l){this.gl=n.gl,this.location=l}}class V0 extends nh{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class eB extends nh{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class tB extends nh{constructor(n,l){super(n,l),this.current=dr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}let jxe=new Float32Array(16);function fE(s){return[vu(255*s.r,255*s.g),vu(255*s.b,255*s.a)]}class av{constructor(n,l,h){this.value=n,this.uniformNames=l.map(p=>`u_${p}`),this.type=h}setUniform(n,l,h){n.set(h.constantOr(this.value))}getBinding(n,l,h){return this.type==="color"?new tB(n,l):new V0(n,l)}}class Xf{constructor(n,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=n.tlbr}setUniform(n,l,h,p){let y=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&n.set(y)}getBinding(n,l,h){return h.substr(0,9)==="u_pattern"?new eB(n,l):new V0(n,l)}}class gu{constructor(n,l,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,l,h,p,y){let _=this.paintVertexArray.length,w=this.expression.evaluate(new Cr(0),l,{},p,[],y);this.paintVertexArray.resize(n),this._setPaintValue(_,n,w)}updatePaintArray(n,l,h,p){let y=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,l,y)}_setPaintValue(n,l,h){if(this.type==="color"){let p=fE(h);for(let y=n;y<l;y++)this.paintVertexArray.emplace(y,p[0],p[1])}else{for(let p=n;p<l;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zo{constructor(n,l,h,p,y,_){this.expression=n,this.uniformNames=l.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,l,h,p,y){let _=this.expression.evaluate(new Cr(this.zoom),l,{},p,[],y),w=this.expression.evaluate(new Cr(this.zoom+1),l,{},p,[],y),A=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(A,n,_,w)}updatePaintArray(n,l,h,p){let y=this.expression.evaluate({zoom:this.zoom},h,p),_=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,l,y,_)}_setPaintValue(n,l,h,p){if(this.type==="color"){let y=fE(h),_=fE(p);for(let w=n;w<l;w++)this.paintVertexArray.emplace(w,y[0],y[1],_[0],_[1])}else{for(let y=n;y<l;y++)this.paintVertexArray.emplace(y,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){let h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,p=ve(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,l,h){return new V0(n,l)}}class Tl{constructor(n,l,h,p,y,_){this.expression=n,this.type=l,this.useIntegerZoom=h,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(n,l,h){let p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(n,l,h,p,y){this._setPaintValues(n,l,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(n,l,h,p){if(!p||!h)return;let{min:y,mid:_,max:w}=h,A=p[y],P=p[_],M=p[w];if(A&&P&&M)for(let R=n;R<l;R++)this.zoomInPaintVertexArray.emplace(R,P.tl[0],P.tl[1],P.br[0],P.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],P.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(R,P.tl[0],P.tl[1],P.br[0],P.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],P.pixelRatio,M.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ql.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ql.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class rB{constructor(n,l,h){this.binders={},this._buffers=[];let p=[];for(let y in n.paint._values){if(!h(y))continue;let _=n.paint.get(y);if(!(_ instanceof po&&ll(_.property.specification)))continue;let w=Vxe(y,n.type),A=_.value,P=_.property.specification.type,M=_.property.useIntegerZoom,R=_.property.specification["property-type"],F=R==="cross-faded"||R==="cross-faded-data-driven";if(A.kind==="constant")this.binders[y]=F?new Xf(A.value,w):new av(A.value,w,P),p.push(`/u_${y}`);else if(A.kind==="source"||F){let U=iB(y,P,"source");this.binders[y]=F?new Tl(A,P,M,l,U,n.id):new gu(A,w,P,U),p.push(`/a_${y}`)}else{let U=iB(y,P,"composite");this.binders[y]=new Zo(A,w,P,M,l,U),p.push(`/z_${y}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){let l=this.binders[n];return l instanceof gu||l instanceof Zo?l.maxValue:0}populatePaintArrays(n,l,h,p,y){for(let _ in this.binders){let w=this.binders[_];(w instanceof gu||w instanceof Zo||w instanceof Tl)&&w.populatePaintArray(n,l,h,p,y)}}setConstantPatternPositions(n,l){for(let h in this.binders){let p=this.binders[h];p instanceof Xf&&p.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,h,p,y){let _=!1;for(let w in n){let A=l.getPositions(w);for(let P of A){let M=h.feature(P.index);for(let R in this.binders){let F=this.binders[R];if((F instanceof gu||F instanceof Zo||F instanceof Tl)&&F.expression.isStateDependent===!0){let U=p.paint.get(R);F.expression=U.value,F.updatePaintArray(P.start,P.end,M,n[w],y),_=!0}}}}return _}defines(){let n=[];for(let l in this.binders){let h=this.binders[l];(h instanceof av||h instanceof Xf)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){let n=[];for(let l in this.binders){let h=this.binders[l];if(h instanceof gu||h instanceof Zo)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof Tl)for(let p=0;p<ql.members.length;p++)n.push(ql.members[p].name)}return n}getBinderUniforms(){let n=[];for(let l in this.binders){let h=this.binders[l];if(h instanceof av||h instanceof Xf||h instanceof Zo)for(let p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){let h=[];for(let p in this.binders){let y=this.binders[p];if(y instanceof av||y instanceof Xf||y instanceof Zo){for(let _ of y.uniformNames)if(l[_]){let w=y.getBinding(n,l[_],_);h.push({name:_,property:p,binding:w})}}}return h}setUniforms(n,l,h,p){for(let{name:y,property:_,binding:w}of l)this.binders[_].setUniform(w,p,h.get(_),y)}updatePaintBuffers(n){this._buffers=[];for(let l in this.binders){let h=this.binders[l];if(n&&h instanceof Tl){let p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof gu||h instanceof Zo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(let l in this.binders){let h=this.binders[l];(h instanceof gu||h instanceof Zo||h instanceof Tl)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(let n in this.binders){let l=this.binders[n];(l instanceof gu||l instanceof Zo||l instanceof Tl)&&l.destroy()}}}class ah{constructor(n,l,h=()=>!0){this.programConfigurations={};for(let p of n)this.programConfigurations[p.id]=new rB(p,l,h);this.needsUpload=!1,this._featureMap=new ih,this._bufferOffset=0}populatePaintArrays(n,l,h,p,y,_){for(let w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,l,p,y,_);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,h,p){for(let y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(n,this._featureMap,l,y,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(let l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(let n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Vxe(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function iB(s,n,l){let h={color:{source:G,composite:Pt},number:{source:Ge,composite:G}},p=function(y){return{"line-pattern":{source:fa,composite:fa},"fill-pattern":{source:fa,composite:fa},"fill-extrusion-pattern":{source:fa,composite:fa}}[y]}(s);return p&&p[l]||h[n][l]}ot("ConstantBinder",av),ot("CrossFadedConstantBinder",Xf),ot("SourceExpressionBinder",gu),ot("CrossFadedCompositeBinder",Tl),ot("CompositeExpressionBinder",Zo),ot("ProgramConfiguration",rB,{omit:["_buffers"]}),ot("ProgramConfigurationSet",ah);let ci=8192,dE=Math.pow(2,14)-1,nB=-dE-1;function oh(s){let n=ci/s.extent,l=s.loadGeometry();for(let h=0;h<l.length;h++){let p=l[h];for(let y=0;y<p.length;y++){let _=p[y],w=Math.round(_.x*n),A=Math.round(_.y*n);_.x=ve(w,nB,dE),_.y=ve(A,nB,dE),(w<_.x||w>_.x+1||A<_.y||A>_.y+1)&&Lr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function sh(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?oh(s):[]}}function $0(s,n,l,h,p){s.emplaceBack(2*n+(h+1)/2,2*l+(p+1)/2)}class pE{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new un,this.indexArray=new Ka,this.segments=new Yt,this.programConfigurations=new ah(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){let p=this.layers[0],y=[],_=null,w=!1;p.type==="circle"&&(_=p.layout.get("circle-sort-key"),w=!_.isConstant());for(let{feature:A,id:P,index:M,sourceLayerIndex:R}of n){let F=this.layers[0]._featureFilter.needGeometry,U=sh(A,F);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),U,h))continue;let V=w?_.evaluate(U,{},h):void 0,W={id:P,properties:A.properties,type:A.type,sourceLayerIndex:R,index:M,geometry:F?U.geometry:oh(A),patterns:{},sortKey:V};y.push(W)}w&&y.sort((A,P)=>A.sortKey-P.sortKey);for(let A of y){let{geometry:P,index:M,sourceLayerIndex:R}=A,F=n[M].feature;this.addFeature(A,P,M,h),l.featureIndex.insert(F,P,M,R,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Zn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,h,p){for(let y of l)for(let _ of y){let w=_.x,A=_.y;if(w<0||w>=ci||A<0||A>=ci)continue;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),M=P.vertexLength;$0(this.layoutVertexArray,w,A,-1,-1),$0(this.layoutVertexArray,w,A,1,-1),$0(this.layoutVertexArray,w,A,1,1),$0(this.layoutVertexArray,w,A,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function aB(s,n){for(let l=0;l<s.length;l++)if(Jf(n,s[l]))return!0;for(let l=0;l<n.length;l++)if(Jf(s,n[l]))return!0;return!!mE(s,n)}function $xe(s,n,l){return!!Jf(s,n)||!!vE(n,s,l)}function oB(s,n){if(s.length===1)return uB(n,s[0]);for(let l=0;l<n.length;l++){let h=n[l];for(let p=0;p<h.length;p++)if(Jf(s,h[p]))return!0}for(let l=0;l<s.length;l++)if(uB(n,s[l]))return!0;for(let l=0;l<n.length;l++)if(mE(s,n[l]))return!0;return!1}function Wxe(s,n,l){if(s.length>1){if(mE(s,n))return!0;for(let h=0;h<n.length;h++)if(vE(n[h],s,l))return!0}for(let h=0;h<s.length;h++)if(vE(s[h],n,l))return!0;return!1}function mE(s,n){if(s.length===0||n.length===0)return!1;for(let l=0;l<s.length-1;l++){let h=s[l],p=s[l+1];for(let y=0;y<n.length-1;y++)if(Gxe(h,p,n[y],n[y+1]))return!0}return!1}function Gxe(s,n,l,h){return pt(s,l,h)!==pt(n,l,h)&&pt(s,n,l)!==pt(s,n,h)}function vE(s,n,l){let h=l*l;if(n.length===1)return s.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(sB(s,n[p-1],n[p])<h)return!0;return!1}function sB(s,n,l){let h=n.distSqr(l);if(h===0)return s.distSqr(n);let p=((s.x-n.x)*(l.x-n.x)+(s.y-n.y)*(l.y-n.y))/h;return s.distSqr(p<0?n:p>1?l:l.sub(n)._mult(p)._add(n))}function uB(s,n){let l,h,p,y=!1;for(let _=0;_<s.length;_++){l=s[_];for(let w=0,A=l.length-1;w<l.length;A=w++)h=l[w],p=l[A],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(y=!y)}return y}function Jf(s,n){let l=!1;for(let h=0,p=s.length-1;h<s.length;p=h++){let y=s[h],_=s[p];y.y>n.y!=_.y>n.y&&n.x<(_.x-y.x)*(n.y-y.y)/(_.y-y.y)+y.x&&(l=!l)}return l}function Kxe(s,n,l){let h=l[0],p=l[2];if(s.x<h.x&&n.x<h.x||s.x>p.x&&n.x>p.x||s.y<h.y&&n.y<h.y||s.y>p.y&&n.y>p.y)return!1;let y=pt(s,n,l[0]);return y!==pt(s,n,l[1])||y!==pt(s,n,l[2])||y!==pt(s,n,l[3])}function ov(s,n,l){let h=n.paint.get(s).value;return h.kind==="constant"?h.value:l.programConfigurations.get(n.id).getMaxValue(s)}function W0(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function G0(s,n,l,h,p){if(!n[0]&&!n[1])return s;let y=T.convert(n)._mult(p);l==="viewport"&&y._rotate(-h);let _=[];for(let w=0;w<s.length;w++)_.push(s[w].sub(y));return _}let lB,cB;ot("CircleBucket",pE,{omit:["layers"]});var Hxe={get paint(){return cB=cB||new g({"circle-radius":new St(Ae.paint_circle["circle-radius"]),"circle-color":new St(Ae.paint_circle["circle-color"]),"circle-blur":new St(Ae.paint_circle["circle-blur"]),"circle-opacity":new St(Ae.paint_circle["circle-opacity"]),"circle-translate":new lt(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new lt(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new lt(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new lt(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new St(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new St(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new St(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return lB=lB||new g({"circle-sort-key":new St(Ae.layout_circle["circle-sort-key"])})}},Tn=1e-6,Yf=typeof Float32Array!="undefined"?Float32Array:Array;function gE(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function hB(s,n,l){var h=n[0],p=n[1],y=n[2],_=n[3],w=n[4],A=n[5],P=n[6],M=n[7],R=n[8],F=n[9],U=n[10],V=n[11],W=n[12],ee=n[13],ne=n[14],xe=n[15],ce=l[0],ye=l[1],Ee=l[2],De=l[3];return s[0]=ce*h+ye*w+Ee*R+De*W,s[1]=ce*p+ye*A+Ee*F+De*ee,s[2]=ce*y+ye*P+Ee*U+De*ne,s[3]=ce*_+ye*M+Ee*V+De*xe,s[4]=(ce=l[4])*h+(ye=l[5])*w+(Ee=l[6])*R+(De=l[7])*W,s[5]=ce*p+ye*A+Ee*F+De*ee,s[6]=ce*y+ye*P+Ee*U+De*ne,s[7]=ce*_+ye*M+Ee*V+De*xe,s[8]=(ce=l[8])*h+(ye=l[9])*w+(Ee=l[10])*R+(De=l[11])*W,s[9]=ce*p+ye*A+Ee*F+De*ee,s[10]=ce*y+ye*P+Ee*U+De*ne,s[11]=ce*_+ye*M+Ee*V+De*xe,s[12]=(ce=l[12])*h+(ye=l[13])*w+(Ee=l[14])*R+(De=l[15])*W,s[13]=ce*p+ye*A+Ee*F+De*ee,s[14]=ce*y+ye*P+Ee*U+De*ne,s[15]=ce*_+ye*M+Ee*V+De*xe,s}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var sv,Zxe=hB;function K0(s,n,l){var h=n[0],p=n[1],y=n[2],_=n[3];return s[0]=l[0]*h+l[4]*p+l[8]*y+l[12]*_,s[1]=l[1]*h+l[5]*p+l[9]*y+l[13]*_,s[2]=l[2]*h+l[6]*p+l[10]*y+l[14]*_,s[3]=l[3]*h+l[7]*p+l[11]*y+l[15]*_,s}sv=new Yf(4),Yf!=Float32Array&&(sv[0]=0,sv[1]=0,sv[2]=0,sv[3]=0);class Xxe extends c{constructor(n){super(n,Hxe)}createBucket(n){return new pE(n)}queryRadius(n){let l=n;return ov("circle-radius",this,l)+ov("circle-stroke-width",this,l)+W0(this.paint.get("circle-translate"))}queryIntersectsFeature(n,l,h,p,y,_,w,A){let P=G0(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,w),M=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),R=this.paint.get("circle-pitch-alignment")==="map",F=R?P:function(V,W){return V.map(ee=>fB(ee,W))}(P,A),U=R?M*w:M;for(let V of p)for(let W of V){let ee=R?W:fB(W,A),ne=U,xe=K0([],[W.x,W.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ne*=xe[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ne*=_.cameraToCenterDistance/xe[3]),$xe(F,ee,ne))return!0}return!1}}function fB(s,n){let l=K0([],[s.x,s.y,0,1],n);return new T(l[0]/l[3],l[1]/l[3])}class dB extends pE{}let pB;ot("HeatmapBucket",dB,{omit:["layers"]});var Jxe={get paint(){return pB=pB||new g({"heatmap-radius":new St(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new St(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new lt(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new iv(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new lt(Ae.paint_heatmap["heatmap-opacity"])})}};function yE(s,{width:n,height:l},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*l*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*l*h}`)}else p=new Uint8Array(n*l*h);return s.width=n,s.height=l,s.data=p,s}function mB(s,{width:n,height:l},h){if(n===s.width&&l===s.height)return;let p=yE({},{width:n,height:l},h);_E(s,p,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,l)},h),s.width=n,s.height=l,s.data=p.data}function _E(s,n,l,h,p,y){if(p.width===0||p.height===0)return n;if(p.width>s.width||p.height>s.height||l.x>s.width-p.width||l.y>s.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");let _=s.data,w=n.data;if(_===w)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<p.height;A++){let P=((l.y+A)*s.width+l.x)*y,M=((h.y+A)*n.width+h.x)*y;for(let R=0;R<p.width*y;R++)w[M+R]=_[P+R]}return n}class uv{constructor(n,l){yE(this,n,1,l)}resize(n){mB(this,n,1)}clone(){return new uv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,p,y){_E(n,l,h,p,y,1)}}class Ha{constructor(n,l){yE(this,n,4,l)}resize(n){mB(this,n,4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ha({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,p,y){_E(n,l,h,p,y,4)}}function vB(s){let n={},l=s.resolution||256,h=s.clips?s.clips.length:1,p=s.image||new Ha({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);let y=(_,w,A)=>{n[s.evaluationKey]=A;let P=s.expression.evaluate(n);p.data[_+w+0]=Math.floor(255*P.r/P.a),p.data[_+w+1]=Math.floor(255*P.g/P.a),p.data[_+w+2]=Math.floor(255*P.b/P.a),p.data[_+w+3]=Math.floor(255*P.a)};if(s.clips)for(let _=0,w=0;_<h;++_,w+=4*l)for(let A=0,P=0;A<l;A++,P+=4){let M=A/(l-1),{start:R,end:F}=s.clips[_];y(w,P,R*(1-M)+F*M)}else for(let _=0,w=0;_<l;_++,w+=4)y(0,w,_/(l-1));return p}ot("AlphaImage",uv),ot("RGBAImage",Ha);let xE="big-fb";class Yxe extends c{createBucket(n){return new dB(n)}constructor(n){super(n,Jxe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vB({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(xE)&&this.heatmapFbos.delete(xE)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let gB;var Qxe={get paint(){return gB=gB||new g({"hillshade-illumination-direction":new lt(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new lt(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new lt(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new lt(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new lt(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new lt(Ae.paint_hillshade["hillshade-accent-color"])})}};class ebe extends c{constructor(n){super(n,Qxe)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let tbe=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:rbe}=tbe;function yB(s,n,l=2){let h=n&&n.length,p=h?n[0]*l:s.length,y=_B(s,0,p,l,!0),_=[];if(!y||y.next===y.prev)return _;let w,A,P;if(h&&(y=function(M,R,F,U){let V=[];for(let W=0,ee=R.length;W<ee;W++){let ne=_B(M,R[W]*U,W<ee-1?R[W+1]*U:M.length,U,!1);ne===ne.next&&(ne.steiner=!0),V.push(cbe(ne))}V.sort(sbe);for(let W=0;W<V.length;W++)F=ube(V[W],F);return F}(s,n,y,l)),s.length>80*l){w=1/0,A=1/0;let M=-1/0,R=-1/0;for(let F=l;F<p;F+=l){let U=s[F],V=s[F+1];U<w&&(w=U),V<A&&(A=V),U>M&&(M=U),V>R&&(R=V)}P=Math.max(M-w,R-A),P=P!==0?32767/P:0}return lv(y,_,l,w,A,P,0),_}function _B(s,n,l,h,p){let y;if(p===function(_,w,A,P){let M=0;for(let R=w,F=A-P;R<A;R+=P)M+=(_[F]-_[R])*(_[R+1]+_[F+1]),F=R;return M}(s,n,l,h)>0)for(let _=n;_<l;_+=h)y=wB(_/h|0,s[_],s[_+1],y);else for(let _=l-h;_>=n;_-=h)y=wB(_/h|0,s[_],s[_+1],y);return y&&H0(y,y.next)&&(hv(y),y=y.next),y}function uh(s,n){if(!s)return s;n||(n=s);let l,h=s;do if(l=!1,h.steiner||!H0(h,h.next)&&oi(h.prev,h,h.next)!==0)h=h.next;else{if(hv(h),h=n=h.prev,h===h.next)break;l=!0}while(l||h!==n);return n}function lv(s,n,l,h,p,y,_){if(!s)return;!_&&y&&function(A,P,M,R){let F=A;do F.z===0&&(F.z=bE(F.x,F.y,P,M,R)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==A);F.prevZ.nextZ=null,F.prevZ=null,function(U){let V,W=1;do{let ee,ne=U;U=null;let xe=null;for(V=0;ne;){V++;let ce=ne,ye=0;for(let De=0;De<W&&(ye++,ce=ce.nextZ,ce);De++);let Ee=W;for(;ye>0||Ee>0&&ce;)ye!==0&&(Ee===0||!ce||ne.z<=ce.z)?(ee=ne,ne=ne.nextZ,ye--):(ee=ce,ce=ce.nextZ,Ee--),xe?xe.nextZ=ee:U=ee,ee.prevZ=xe,xe=ee;ne=ce}xe.nextZ=null,W*=2}while(V>1)}(F)}(s,h,p,y);let w=s;for(;s.prev!==s.next;){let A=s.prev,P=s.next;if(y?nbe(s,h,p,y):ibe(s))n.push(A.i,s.i,P.i),hv(s),s=P.next,w=P.next;else if((s=P)===w){_?_===1?lv(s=abe(uh(s),n),n,l,h,p,y,2):_===2&&obe(s,n,l,h,p,y):lv(uh(s),n,l,h,p,y,1);break}}}function ibe(s){let n=s.prev,l=s,h=s.next;if(oi(n,l,h)>=0)return!1;let p=n.x,y=l.x,_=h.x,w=n.y,A=l.y,P=h.y,M=p<y?p<_?p:_:y<_?y:_,R=w<A?w<P?w:P:A<P?A:P,F=p>y?p>_?p:_:y>_?y:_,U=w>A?w>P?w:P:A>P?A:P,V=h.next;for(;V!==n;){if(V.x>=M&&V.x<=F&&V.y>=R&&V.y<=U&&Qf(p,w,y,A,_,P,V.x,V.y)&&oi(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function nbe(s,n,l,h){let p=s.prev,y=s,_=s.next;if(oi(p,y,_)>=0)return!1;let w=p.x,A=y.x,P=_.x,M=p.y,R=y.y,F=_.y,U=w<A?w<P?w:P:A<P?A:P,V=M<R?M<F?M:F:R<F?R:F,W=w>A?w>P?w:P:A>P?A:P,ee=M>R?M>F?M:F:R>F?R:F,ne=bE(U,V,n,l,h),xe=bE(W,ee,n,l,h),ce=s.prevZ,ye=s.nextZ;for(;ce&&ce.z>=ne&&ye&&ye.z<=xe;){if(ce.x>=U&&ce.x<=W&&ce.y>=V&&ce.y<=ee&&ce!==p&&ce!==_&&Qf(w,M,A,R,P,F,ce.x,ce.y)&&oi(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,ye.x>=U&&ye.x<=W&&ye.y>=V&&ye.y<=ee&&ye!==p&&ye!==_&&Qf(w,M,A,R,P,F,ye.x,ye.y)&&oi(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;ce&&ce.z>=ne;){if(ce.x>=U&&ce.x<=W&&ce.y>=V&&ce.y<=ee&&ce!==p&&ce!==_&&Qf(w,M,A,R,P,F,ce.x,ce.y)&&oi(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;ye&&ye.z<=xe;){if(ye.x>=U&&ye.x<=W&&ye.y>=V&&ye.y<=ee&&ye!==p&&ye!==_&&Qf(w,M,A,R,P,F,ye.x,ye.y)&&oi(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function abe(s,n){let l=s;do{let h=l.prev,p=l.next.next;!H0(h,p)&&xB(h,l,l.next,p)&&cv(h,p)&&cv(p,h)&&(n.push(h.i,l.i,p.i),hv(l),hv(l.next),l=s=p),l=l.next}while(l!==s);return uh(l)}function obe(s,n,l,h,p,y){let _=s;do{let w=_.next.next;for(;w!==_.prev;){if(_.i!==w.i&&hbe(_,w)){let A=bB(_,w);return _=uh(_,_.next),A=uh(A,A.next),lv(_,n,l,h,p,y,0),void lv(A,n,l,h,p,y,0)}w=w.next}_=_.next}while(_!==s)}function sbe(s,n){return s.x-n.x}function ube(s,n){let l=function(p,y){let _=y,w=p.x,A=p.y,P,M=-1/0;do{if(A<=_.y&&A>=_.next.y&&_.next.y!==_.y){let W=_.x+(A-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(W<=w&&W>M&&(M=W,P=_.x<_.next.x?_:_.next,W===w))return P}_=_.next}while(_!==y);if(!P)return null;let R=P,F=P.x,U=P.y,V=1/0;_=P;do{if(w>=_.x&&_.x>=F&&w!==_.x&&Qf(A<U?w:M,A,F,U,A<U?M:w,A,_.x,_.y)){let W=Math.abs(A-_.y)/(w-_.x);cv(_,p)&&(W<V||W===V&&(_.x>P.x||_.x===P.x&&lbe(P,_)))&&(P=_,V=W)}_=_.next}while(_!==R);return P}(s,n);if(!l)return n;let h=bB(l,s);return uh(h,h.next),uh(l,l.next)}function lbe(s,n){return oi(s.prev,s,n.prev)<0&&oi(n.next,s,s.next)<0}function bE(s,n,l,h,p){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*p|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function cbe(s){let n=s,l=s;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==s);return l}function Qf(s,n,l,h,p,y,_,w){return(p-_)*(n-w)>=(s-_)*(y-w)&&(s-_)*(h-w)>=(l-_)*(n-w)&&(l-_)*(y-w)>=(p-_)*(h-w)}function hbe(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(l,h){let p=l;do{if(p.i!==l.i&&p.next.i!==l.i&&p.i!==h.i&&p.next.i!==h.i&&xB(p,p.next,l,h))return!0;p=p.next}while(p!==l);return!1}(s,n)&&(cv(s,n)&&cv(n,s)&&function(l,h){let p=l,y=!1,_=(l.x+h.x)/2,w=(l.y+h.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&_<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(y=!y),p=p.next;while(p!==l);return y}(s,n)&&(oi(s.prev,s,n.prev)||oi(s,n.prev,n))||H0(s,n)&&oi(s.prev,s,s.next)>0&&oi(n.prev,n,n.next)>0)}function oi(s,n,l){return(n.y-s.y)*(l.x-n.x)-(n.x-s.x)*(l.y-n.y)}function H0(s,n){return s.x===n.x&&s.y===n.y}function xB(s,n,l,h){let p=X0(oi(s,n,l)),y=X0(oi(s,n,h)),_=X0(oi(l,h,s)),w=X0(oi(l,h,n));return p!==y&&_!==w||!(p!==0||!Z0(s,l,n))||!(y!==0||!Z0(s,h,n))||!(_!==0||!Z0(l,s,h))||!(w!==0||!Z0(l,n,h))}function Z0(s,n,l){return n.x<=Math.max(s.x,l.x)&&n.x>=Math.min(s.x,l.x)&&n.y<=Math.max(s.y,l.y)&&n.y>=Math.min(s.y,l.y)}function X0(s){return s>0?1:s<0?-1:0}function cv(s,n){return oi(s.prev,s,s.next)<0?oi(s,n,s.next)>=0&&oi(s,s.prev,n)>=0:oi(s,n,s.prev)<0||oi(s,s.next,n)<0}function bB(s,n){let l=wE(s.i,s.x,s.y),h=wE(n.i,n.x,n.y),p=s.next,y=n.prev;return s.next=n,n.prev=s,l.next=p,p.prev=l,h.next=l,l.prev=h,y.next=h,h.prev=y,h}function wB(s,n,l,h){let p=wE(s,n,l);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function hv(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function wE(s,n,l){return{i:s,x:n,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function SE(s,n,l){let h=l.patternDependencies,p=!1;for(let y of n){let _=y.paint.get(`${s}-pattern`);_.isConstant()||(p=!0);let w=_.constantOr(null);w&&(p=!0,h[w.to]=!0,h[w.from]=!0)}return p}function qE(s,n,l,h,p){let y=p.patternDependencies;for(let _ of n){let w=_.paint.get(`${s}-pattern`).value;if(w.kind!=="constant"){let A=w.evaluate({zoom:h-1},l,{},p.availableImages),P=w.evaluate({zoom:h},l,{},p.availableImages),M=w.evaluate({zoom:h+1},l,{},p.availableImages);A=A&&A.name?A.name:A,P=P&&P.name?P.name:P,M=M&&M.name?M.name:M,y[A]=!0,y[P]=!0,y[M]=!0,l.patterns[_.id]={min:A,mid:P,max:M}}}return l}class AE{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mo,this.indexArray=new Ka,this.indexArray2=new Oi,this.programConfigurations=new ah(n.layers,n.zoom),this.segments=new Yt,this.segments2=new Yt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=SE("fill",this.layers,l);let p=this.layers[0].layout.get("fill-sort-key"),y=!p.isConstant(),_=[];for(let{feature:w,id:A,index:P,sourceLayerIndex:M}of n){let R=this.layers[0]._featureFilter.needGeometry,F=sh(w,R);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),F,h))continue;let U=y?p.evaluate(F,{},h,l.availableImages):void 0,V={id:A,properties:w.properties,type:w.type,sourceLayerIndex:M,index:P,geometry:R?F.geometry:oh(w),patterns:{},sortKey:U};_.push(V)}y&&_.sort((w,A)=>w.sortKey-A.sortKey);for(let w of _){let{geometry:A,index:P,sourceLayerIndex:M}=w;if(this.hasPattern){let R=qE("fill",this.layers,w,this.zoom,l);this.patternFeatures.push(R)}else this.addFeature(w,A,P,h,{});l.featureIndex.insert(n[P].feature,A,P,M,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,rbe),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,h,p,y){for(let _ of Sf(l,500)){let w=0;for(let U of _)w+=U.length;let A=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),P=A.vertexLength,M=[],R=[];for(let U of _){if(U.length===0)continue;U!==_[0]&&R.push(M.length/2);let V=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),W=V.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(W+U.length-1,W),M.push(U[0].x),M.push(U[0].y);for(let ee=1;ee<U.length;ee++)this.layoutVertexArray.emplaceBack(U[ee].x,U[ee].y),this.indexArray2.emplaceBack(W+ee-1,W+ee),M.push(U[ee].x),M.push(U[ee].y);V.vertexLength+=U.length,V.primitiveLength+=U.length}let F=yB(M,R);for(let U=0;U<F.length;U+=3)this.indexArray.emplaceBack(P+F[U],P+F[U+1],P+F[U+2]);A.vertexLength+=w,A.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}}let SB,qB;ot("FillBucket",AE,{omit:["layers","patternFeatures"]});var fbe={get paint(){return qB=qB||new g({"fill-antialias":new lt(Ae.paint_fill["fill-antialias"]),"fill-opacity":new St(Ae.paint_fill["fill-opacity"]),"fill-color":new St(Ae.paint_fill["fill-color"]),"fill-outline-color":new St(Ae.paint_fill["fill-outline-color"]),"fill-translate":new lt(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new lt(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vf(Ae.paint_fill["fill-pattern"])})},get layout(){return SB=SB||new g({"fill-sort-key":new St(Ae.layout_fill["fill-sort-key"])})}};class dbe extends c{constructor(n){super(n,fbe)}recalculate(n,l){super.recalculate(n,l);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new AE(n)}queryRadius(){return W0(this.paint.get("fill-translate"))}queryIntersectsFeature(n,l,h,p,y,_,w){return oB(G0(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,w),p)}isTileClipped(){return!0}}let pbe=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),mbe=S([{name:"a_centroid",components:2,type:"Int16"}],4),{members:vbe}=pbe;var Il={},gbe=x,AB=ed;function ed(s,n,l,h,p){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=h,this._values=p,s.readFields(ybe,this,n)}function ybe(s,n,l){s==1?n.id=l.readVarint():s==2?function(h,p){for(var y=h.readVarint()+h.pos;h.pos<y;){var _=p._keys[h.readVarint()],w=p._values[h.readVarint()];p.properties[_]=w}}(l,n):s==3?n.type=l.readVarint():s==4&&(n._geometry=l.pos)}function _be(s){for(var n,l,h=0,p=0,y=s.length,_=y-1;p<y;_=p++)h+=((l=s[_]).x-(n=s[p]).x)*(n.y+l.y);return h}ed.types=["Unknown","Point","LineString","Polygon"],ed.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,l=s.readVarint()+s.pos,h=1,p=0,y=0,_=0,w=[];s.pos<l;){if(p<=0){var A=s.readVarint();h=7&A,p=A>>3}if(p--,h===1||h===2)y+=s.readSVarint(),_+=s.readSVarint(),h===1&&(n&&w.push(n),n=[]),n.push(new gbe(y,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&w.push(n),w},ed.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,l=1,h=0,p=0,y=0,_=1/0,w=-1/0,A=1/0,P=-1/0;s.pos<n;){if(h<=0){var M=s.readVarint();l=7&M,h=M>>3}if(h--,l===1||l===2)(p+=s.readSVarint())<_&&(_=p),p>w&&(w=p),(y+=s.readSVarint())<A&&(A=y),y>P&&(P=y);else if(l!==7)throw new Error("unknown command "+l)}return[_,A,w,P]},ed.prototype.toGeoJSON=function(s,n,l){var h,p,y=this.extent*Math.pow(2,l),_=this.extent*s,w=this.extent*n,A=this.loadGeometry(),P=ed.types[this.type];function M(U){for(var V=0;V<U.length;V++){var W=U[V];U[V]=[360*(W.x+_)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(W.y+w)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(h=0;h<A.length;h++)R[h]=A[h][0];M(A=R);break;case 2:for(h=0;h<A.length;h++)M(A[h]);break;case 3:for(A=function(U){var V=U.length;if(V<=1)return[U];for(var W,ee,ne=[],xe=0;xe<V;xe++){var ce=_be(U[xe]);ce!==0&&(ee===void 0&&(ee=ce<0),ee===ce<0?(W&&ne.push(W),W=[U[xe]]):W.push(U[xe]))}return W&&ne.push(W),ne}(A),h=0;h<A.length;h++)for(p=0;p<A[h].length;p++)M(A[h][p]);}A.length===1?A=A[0]:P="Multi"+P;var F={type:"Feature",geometry:{type:P,coordinates:A},properties:this.properties};return"id"in this&&(F.id=this.id),F};var xbe=AB,EB=TB;function TB(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(bbe,this,n),this.length=this._features.length}function bbe(s,n,l){s===15?n.version=l.readVarint():s===1?n.name=l.readString():s===5?n.extent=l.readVarint():s===2?n._features.push(l.pos):s===3?n._keys.push(l.readString()):s===4&&n._values.push(function(h){for(var p=null,y=h.readVarint()+h.pos;h.pos<y;){var _=h.readVarint()>>3;p=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return p}(l))}TB.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new xbe(this._pbf,n,this.extent,this._keys,this._values)};var wbe=EB;function Sbe(s,n,l){if(s===3){var h=new wbe(l,l.readVarint()+l.pos);h.length&&(n[h.name]=h)}}Il.VectorTile=function(s,n){this.layers=s.readFields(Sbe,{},n)},Il.VectorTileFeature=AB,Il.VectorTileLayer=EB;let qbe=Il.VectorTileFeature.types,EE=Math.pow(2,13);function fv(s,n,l,h,p,y,_,w){s.emplaceBack(n,l,2*Math.floor(h*EE)+_,p*EE*2,y*EE*2,Math.round(w))}class TE{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new wl,this.centroidVertexArray=new Ui,this.indexArray=new Ka,this.programConfigurations=new ah(n.layers,n.zoom),this.segments=new Yt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.features=[],this.hasPattern=SE("fill-extrusion",this.layers,l);for(let{feature:p,id:y,index:_,sourceLayerIndex:w}of n){let A=this.layers[0]._featureFilter.needGeometry,P=sh(p,A);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),P,h))continue;let M={id:y,sourceLayerIndex:w,index:_,geometry:A?P.geometry:oh(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(qE("fill-extrusion",this.layers,M,this.zoom,l)):this.addFeature(M,M.geometry,_,h,{}),l.featureIndex.insert(p,M.geometry,_,w,this.index,!0)}}addFeatures(n,l,h){for(let p of this.features){let{geometry:y}=p;this.addFeature(p,y,p.index,l,h)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,vbe),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,mbe.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,l,h,p,y){for(let _ of Sf(l,500)){let w={x:0,y:0,vertexCount:0},A=0;for(let V of _)A+=V.length;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let V of _){if(V.length===0||Ebe(V))continue;let W=0;for(let ee=0;ee<V.length;ee++){let ne=V[ee];if(ee>=1){let xe=V[ee-1];if(!Abe(ne,xe)){P.vertexLength+4>Yt.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let ce=ne.sub(xe)._perp()._unit(),ye=xe.dist(ne);W+ye>32768&&(W=0),fv(this.layoutVertexArray,ne.x,ne.y,ce.x,ce.y,0,0,W),fv(this.layoutVertexArray,ne.x,ne.y,ce.x,ce.y,0,1,W),w.x+=2*ne.x,w.y+=2*ne.y,w.vertexCount+=2,W+=ye,fv(this.layoutVertexArray,xe.x,xe.y,ce.x,ce.y,0,0,W),fv(this.layoutVertexArray,xe.x,xe.y,ce.x,ce.y,0,1,W),w.x+=2*xe.x,w.y+=2*xe.y,w.vertexCount+=2;let Ee=P.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),P.vertexLength+=4,P.primitiveLength+=2}}}}if(P.vertexLength+A>Yt.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),qbe[n.type]!=="Polygon")continue;let M=[],R=[],F=P.vertexLength;for(let V of _)if(V.length!==0){V!==_[0]&&R.push(M.length/2);for(let W=0;W<V.length;W++){let ee=V[W];fv(this.layoutVertexArray,ee.x,ee.y,0,0,1,1,0),w.x+=ee.x,w.y+=ee.y,w.vertexCount+=1,M.push(ee.x),M.push(ee.y)}}let U=yB(M,R);for(let V=0;V<U.length;V+=3)this.indexArray.emplaceBack(F+U[V],F+U[V+2],F+U[V+1]);P.primitiveLength+=U.length/3,P.vertexLength+=A;for(let V=0;V<w.vertexCount;V++){let W=Math.floor(w.x/w.vertexCount),ee=Math.floor(w.y/w.vertexCount);this.centroidVertexArray.emplaceBack(W,ee)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}}function Abe(s,n){return s.x===n.x&&(s.x<0||s.x>ci)||s.y===n.y&&(s.y<0||s.y>ci)}function Ebe(s){return s.every(n=>n.x<0)||s.every(n=>n.x>ci)||s.every(n=>n.y<0)||s.every(n=>n.y>ci)}let IB;ot("FillExtrusionBucket",TE,{omit:["layers","features"]});var Tbe={get paint(){return IB=IB||new g({"fill-extrusion-opacity":new lt(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new St(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new lt(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new lt(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vf(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new St(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new St(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new lt(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ibe extends c{constructor(n){super(n,Tbe)}createBucket(n){return new TE(n)}queryRadius(){return W0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,l,h,p,y,_,w,A){let P=G0(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,w),M=this.paint.get("fill-extrusion-height").evaluate(l,h),R=this.paint.get("fill-extrusion-base").evaluate(l,h),F=function(V,W,ee,ne){let xe=[];for(let ce of V){let ye=[ce.x,ce.y,0,1];K0(ye,ye,W),xe.push(new T(ye[0]/ye[3],ye[1]/ye[3]))}return xe}(P,A),U=function(V,W,ee,ne){let xe=[],ce=[],ye=ne[8]*W,Ee=ne[9]*W,De=ne[10]*W,et=ne[11]*W,bt=ne[8]*ee,Je=ne[9]*ee,We=ne[10]*ee,dt=ne[11]*ee;for(let st of V){let nt=[],Ie=[];for(let mt of st){let ht=mt.x,It=mt.y,xr=ne[0]*ht+ne[4]*It+ne[12],gr=ne[1]*ht+ne[5]*It+ne[13],Si=ne[2]*ht+ne[6]*It+ne[14],vo=ne[3]*ht+ne[7]*It+ne[15],$i=Si+De,qi=vo+et,In=xr+bt,Cn=gr+Je,Pn=Si+We,Qr=vo+dt,Ai=new T((xr+ye)/qi,(gr+Ee)/qi);Ai.z=$i/qi,nt.push(Ai);let ln=new T(In/Qr,Cn/Qr);ln.z=Pn/Qr,Ie.push(ln)}xe.push(nt),ce.push(Ie)}return[xe,ce]}(p,R,M,A);return function(V,W,ee){let ne=1/0;oB(ee,W)&&(ne=CB(ee,W[0]));for(let xe=0;xe<W.length;xe++){let ce=W[xe],ye=V[xe];for(let Ee=0;Ee<ce.length-1;Ee++){let De=ce[Ee],et=[De,ce[Ee+1],ye[Ee+1],ye[Ee],De];aB(ee,et)&&(ne=Math.min(ne,CB(ee,et)))}}return ne!==1/0&&ne}(U[0],U[1],F)}}function dv(s,n){return s.x*n.x+s.y*n.y}function CB(s,n){if(s.length===1){let l=0,h=n[l++],p;for(;!p||h.equals(p);)if(p=n[l++],!p)return 1/0;for(;l<n.length;l++){let y=n[l],_=s[0],w=p.sub(h),A=y.sub(h),P=_.sub(h),M=dv(w,w),R=dv(w,A),F=dv(A,A),U=dv(P,w),V=dv(P,A),W=M*F-R*R,ee=(F*U-R*V)/W,ne=(M*V-R*U)/W,xe=h.z*(1-ee-ne)+p.z*ee+y.z*ne;if(isFinite(xe))return xe}return 1/0}{let l=1/0;for(let h of n)l=Math.min(l,h.z);return l}}let Cbe=S([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Pbe}=Cbe,Mbe=S([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Obe}=Mbe,kbe=Il.VectorTileFeature.types,Rbe=Math.cos(Math.PI/180*37.5),PB=Math.pow(2,14)/.5;class IE{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Wf,this.layoutVertexArray2=new Sl,this.indexArray=new Ka,this.programConfigurations=new ah(n.layers,n.zoom),this.segments=new Yt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=SE("line",this.layers,l);let p=this.layers[0].layout.get("line-sort-key"),y=!p.isConstant(),_=[];for(let{feature:w,id:A,index:P,sourceLayerIndex:M}of n){let R=this.layers[0]._featureFilter.needGeometry,F=sh(w,R);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),F,h))continue;let U=y?p.evaluate(F,{},h):void 0,V={id:A,properties:w.properties,type:w.type,sourceLayerIndex:M,index:P,geometry:R?F.geometry:oh(w),patterns:{},sortKey:U};_.push(V)}y&&_.sort((w,A)=>w.sortKey-A.sortKey);for(let w of _){let{geometry:A,index:P,sourceLayerIndex:M}=w;if(this.hasPattern){let R=qE("line",this.layers,w,this.zoom,l);this.patternFeatures.push(R)}else this.addFeature(w,A,P,h,{});l.featureIndex.insert(n[P].feature,A,P,M,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Obe)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Pbe),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,h,p,y){let _=this.layers[0].layout,w=_.get("line-join").evaluate(n,{}),A=_.get("line-cap"),P=_.get("line-miter-limit"),M=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(let R of l)this.addLine(R,n,w,A,P,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,p)}addLine(n,l,h,p,y,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<n.length-1;ne++)this.totalDistance+=n[ne].dist(n[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let w=kbe[l.type]==="Polygon",A=n.length;for(;A>=2&&n[A-1].equals(n[A-2]);)A--;let P=0;for(;P<A-1&&n[P].equals(n[P+1]);)P++;if(A<(w?3:2))return;h==="bevel"&&(y=1.05);let M=this.overscaling<=16?15*ci/(512*this.overscaling):0,R=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),F,U,V,W,ee;this.e1=this.e2=-1,w&&(F=n[A-2],ee=n[P].sub(F)._unit()._perp());for(let ne=P;ne<A;ne++){if(V=ne===A-1?w?n[P+1]:void 0:n[ne+1],V&&n[ne].equals(V))continue;ee&&(W=ee),F&&(U=F),F=n[ne],ee=V?V.sub(F)._unit()._perp():W,W=W||ee;let xe=W.add(ee);xe.x===0&&xe.y===0||xe._unit();let ce=W.x*ee.x+W.y*ee.y,ye=xe.x*ee.x+xe.y*ee.y,Ee=ye!==0?1/ye:1/0,De=2*Math.sqrt(2-2*ye),et=ye<Rbe&&U&&V,bt=W.x*ee.y-W.y*ee.x>0;if(et&&ne>P){let dt=F.dist(U);if(dt>2*M){let st=F.sub(F.sub(U)._mult(M/dt)._round());this.updateDistance(U,st),this.addCurrentVertex(st,W,0,0,R),U=st}}let Je=U&&V,We=Je?h:w?"butt":p;if(Je&&We==="round"&&(Ee<_?We="miter":Ee<=2&&(We="fakeround")),We==="miter"&&Ee>y&&(We="bevel"),We==="bevel"&&(Ee>2&&(We="flipbevel"),Ee<y&&(We="miter")),U&&this.updateDistance(U,F),We==="miter")xe._mult(Ee),this.addCurrentVertex(F,xe,0,0,R);else if(We==="flipbevel"){if(Ee>100)xe=ee.mult(-1);else{let dt=Ee*W.add(ee).mag()/W.sub(ee).mag();xe._perp()._mult(dt*(bt?-1:1))}this.addCurrentVertex(F,xe,0,0,R),this.addCurrentVertex(F,xe.mult(-1),0,0,R)}else if(We==="bevel"||We==="fakeround"){let dt=-Math.sqrt(Ee*Ee-1),st=bt?dt:0,nt=bt?0:dt;if(U&&this.addCurrentVertex(F,W,st,nt,R),We==="fakeround"){let Ie=Math.round(180*De/Math.PI/20);for(let mt=1;mt<Ie;mt++){let ht=mt/Ie;if(ht!==.5){let xr=ht-.5;ht+=ht*xr*(ht-1)*((1.0904+ce*(ce*(3.55645-1.43519*ce)-3.2452))*xr*xr+(.848013+ce*(.215638*ce-1.06021)))}let It=ee.sub(W)._mult(ht)._add(W)._unit()._mult(bt?-1:1);this.addHalfVertex(F,It.x,It.y,!1,bt,0,R)}}V&&this.addCurrentVertex(F,ee,-st,-nt,R)}else if(We==="butt")this.addCurrentVertex(F,xe,0,0,R);else if(We==="square"){let dt=U?1:-1;this.addCurrentVertex(F,xe,dt,dt,R)}else We==="round"&&(U&&(this.addCurrentVertex(F,W,0,0,R),this.addCurrentVertex(F,W,1,1,R,!0)),V&&(this.addCurrentVertex(F,ee,-1,-1,R,!0),this.addCurrentVertex(F,ee,0,0,R)));if(et&&ne<A-1){let dt=F.dist(V);if(dt>2*M){let st=F.add(V.sub(F)._mult(M/dt)._round());this.updateDistance(F,st),this.addCurrentVertex(st,ee,0,0,R),F=st}}}}addCurrentVertex(n,l,h,p,y,_=!1){let w=l.y*p-l.x,A=-l.y-l.x*p;this.addHalfVertex(n,l.x+l.y*h,l.y-l.x*h,_,!1,h,y),this.addHalfVertex(n,w,A,_,!0,-p,y),this.distance>PB/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,l,h,p,y,_))}addHalfVertex({x:n,y:l},h,p,y,_,w,A){let P=.5*(this.lineClips?this.scaledDistance*(PB-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(y?1:0),(l<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let M=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),A.primitiveLength++),_?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}let MB,OB;ot("LineBucket",IE,{omit:["layers","patternFeatures"]});var kB={get paint(){return OB=OB||new g({"line-opacity":new St(Ae.paint_line["line-opacity"]),"line-color":new St(Ae.paint_line["line-color"]),"line-translate":new lt(Ae.paint_line["line-translate"]),"line-translate-anchor":new lt(Ae.paint_line["line-translate-anchor"]),"line-width":new St(Ae.paint_line["line-width"]),"line-gap-width":new St(Ae.paint_line["line-gap-width"]),"line-offset":new St(Ae.paint_line["line-offset"]),"line-blur":new St(Ae.paint_line["line-blur"]),"line-dasharray":new $f(Ae.paint_line["line-dasharray"]),"line-pattern":new Vf(Ae.paint_line["line-pattern"]),"line-gradient":new iv(Ae.paint_line["line-gradient"])})},get layout(){return MB=MB||new g({"line-cap":new lt(Ae.layout_line["line-cap"]),"line-join":new St(Ae.layout_line["line-join"]),"line-miter-limit":new lt(Ae.layout_line["line-miter-limit"]),"line-round-limit":new lt(Ae.layout_line["line-round-limit"]),"line-sort-key":new St(Ae.layout_line["line-sort-key"])})}};class Dbe extends St{possiblyEvaluate(n,l){return l=new Cr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(n,l)}evaluate(n,l,h,p){return l=Le({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(n,l,h,p)}}let J0;class Lbe extends c{constructor(n){super(n,kB),this.gradientVersion=0,J0||(J0=new Dbe(kB.paint.properties["line-width"].specification),J0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){let l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof il,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,l){super.recalculate(n,l),this.paint._values["line-floorwidth"]=J0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new IE(n)}queryRadius(n){let l=n,h=RB(ov("line-width",this,l),ov("line-gap-width",this,l)),p=ov("line-offset",this,l);return h/2+Math.abs(p)+W0(this.paint.get("line-translate"))}queryIntersectsFeature(n,l,h,p,y,_,w){let A=G0(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,w),P=w/2*RB(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),M=this.paint.get("line-offset").evaluate(l,h);return M&&(p=function(R,F){let U=[];for(let V=0;V<R.length;V++){let W=R[V],ee=[];for(let ne=0;ne<W.length;ne++){let xe=W[ne-1],ce=W[ne],ye=W[ne+1],Ee=ne===0?new T(0,0):ce.sub(xe)._unit()._perp(),De=ne===W.length-1?new T(0,0):ye.sub(ce)._unit()._perp(),et=Ee._add(De)._unit(),bt=et.x*De.x+et.y*De.y;bt!==0&&et._mult(1/bt),ee.push(et._mult(F)._add(ce))}U.push(ee)}return U}(p,M*w)),function(R,F,U){for(let V=0;V<F.length;V++){let W=F[V];if(R.length>=3){for(let ee=0;ee<W.length;ee++)if(Jf(R,W[ee]))return!0}if(Wxe(R,W,U))return!0}return!1}(A,p,P)}isTileClipped(){return!0}}function RB(s,n){return n>0?n+2*s:s}let Fbe=S([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),zbe=S([{name:"a_projected_pos",components:3,type:"Float32"}],4);S([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Nbe=S([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);S([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let DB=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Bbe=S([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ube(s,n,l){return s.sections.forEach(h=>{h.text=function(p,y,_){let w=y.layout.get("text-transform").evaluate(_,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),Hn.applyArabicShaping&&(p=Hn.applyArabicShaping(p)),p}(h.text,n,l)}),s}S([{name:"triangle",components:3,type:"Uint16"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),S([{type:"Float32",name:"offsetX"}]),S([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),S([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let pv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var vi=24,LB=vr,FB=function(s,n,l,h,p){var y,_,w=8*p-h-1,A=(1<<w)-1,P=A>>1,M=-7,R=l?p-1:0,F=l?-1:1,U=s[n+R];for(R+=F,y=U&(1<<-M)-1,U>>=-M,M+=w;M>0;y=256*y+s[n+R],R+=F,M-=8);for(_=y&(1<<-M)-1,y>>=-M,M+=h;M>0;_=256*_+s[n+R],R+=F,M-=8);if(y===0)y=1-P;else{if(y===A)return _?NaN:1/0*(U?-1:1);_+=Math.pow(2,h),y-=P}return(U?-1:1)*_*Math.pow(2,y-h)},zB=function(s,n,l,h,p,y){var _,w,A,P=8*y-p-1,M=(1<<P)-1,R=M>>1,F=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=h?0:y-1,V=h?1:-1,W=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,_=M):(_=Math.floor(Math.log(n)/Math.LN2),n*(A=Math.pow(2,-_))<1&&(_--,A*=2),(n+=_+R>=1?F/A:F*Math.pow(2,1-R))*A>=2&&(_++,A/=2),_+R>=M?(w=0,_=M):_+R>=1?(w=(n*A-1)*Math.pow(2,p),_+=R):(w=n*Math.pow(2,R-1)*Math.pow(2,p),_=0));p>=8;s[l+U]=255&w,U+=V,w/=256,p-=8);for(_=_<<p|w,P+=p;P>0;s[l+U]=255&_,U+=V,_/=256,P-=8);s[l+U-V]|=128*W};function vr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}vr.Varint=0,vr.Fixed64=1,vr.Bytes=2,vr.Fixed32=5;var CE=4294967296,NB=1/CE,BB=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function yu(s){return s.type===vr.Bytes?s.readVarint()+s.pos:s.pos+1}function td(s,n,l){return l?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function UB(s,n,l){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));l.realloc(h);for(var p=l.pos-1;p>=s;p--)l.buf[p+h]=l.buf[p]}function jbe(s,n){for(var l=0;l<s.length;l++)n.writeVarint(s[l])}function Vbe(s,n){for(var l=0;l<s.length;l++)n.writeSVarint(s[l])}function $be(s,n){for(var l=0;l<s.length;l++)n.writeFloat(s[l])}function Wbe(s,n){for(var l=0;l<s.length;l++)n.writeDouble(s[l])}function Gbe(s,n){for(var l=0;l<s.length;l++)n.writeBoolean(s[l])}function Kbe(s,n){for(var l=0;l<s.length;l++)n.writeFixed32(s[l])}function Hbe(s,n){for(var l=0;l<s.length;l++)n.writeSFixed32(s[l])}function Zbe(s,n){for(var l=0;l<s.length;l++)n.writeFixed64(s[l])}function Xbe(s,n){for(var l=0;l<s.length;l++)n.writeSFixed64(s[l])}function Y0(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function rd(s,n,l){s[l]=n,s[l+1]=n>>>8,s[l+2]=n>>>16,s[l+3]=n>>>24}function jB(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}vr.prototype={destroy:function(){this.buf=null},readFields:function(s,n,l){for(l=l||this.length;this.pos<l;){var h=this.readVarint(),p=h>>3,y=this.pos;this.type=7&h,s(p,n,this),this.pos===y&&this.skip(h)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=Y0(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=jB(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Y0(this.buf,this.pos)+Y0(this.buf,this.pos+4)*CE;return this.pos+=8,s},readSFixed64:function(){var s=Y0(this.buf,this.pos)+jB(this.buf,this.pos+4)*CE;return this.pos+=8,s},readFloat:function(){var s=FB(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=FB(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,l,h=this.buf;return n=127&(l=h[this.pos++]),l<128?n:(n|=(127&(l=h[this.pos++]))<<7,l<128?n:(n|=(127&(l=h[this.pos++]))<<14,l<128?n:(n|=(127&(l=h[this.pos++]))<<21,l<128?n:function(p,y,_){var w,A,P=_.buf;if(w=(112&(A=P[_.pos++]))>>4,A<128||(w|=(127&(A=P[_.pos++]))<<3,A<128)||(w|=(127&(A=P[_.pos++]))<<10,A<128)||(w|=(127&(A=P[_.pos++]))<<17,A<128)||(w|=(127&(A=P[_.pos++]))<<24,A<128)||(w|=(1&(A=P[_.pos++]))<<31,A<128))return td(p,w,y);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(l=h[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&BB?function(l,h,p){return BB.decode(l.subarray(h,p))}(this.buf,n,s):function(l,h,p){for(var y="",_=h;_<p;){var w,A,P,M=l[_],R=null,F=M>239?4:M>223?3:M>191?2:1;if(_+F>p)break;F===1?M<128&&(R=M):F===2?(192&(w=l[_+1]))==128&&(R=(31&M)<<6|63&w)<=127&&(R=null):F===3?(A=l[_+2],(192&(w=l[_+1]))==128&&(192&A)==128&&((R=(15&M)<<12|(63&w)<<6|63&A)<=2047||R>=55296&&R<=57343)&&(R=null)):F===4&&(A=l[_+2],P=l[_+3],(192&(w=l[_+1]))==128&&(192&A)==128&&(192&P)==128&&((R=(15&M)<<18|(63&w)<<12|(63&A)<<6|63&P)<=65535||R>=1114112)&&(R=null)),R===null?(R=65533,F=1):R>65535&&(R-=65536,y+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),y+=String.fromCharCode(R),_+=F}return y}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==vr.Bytes)return s.push(this.readVarint(n));var l=yu(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==vr.Bytes)return s.push(this.readSVarint());var n=yu(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==vr.Bytes)return s.push(this.readBoolean());var n=yu(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==vr.Bytes)return s.push(this.readFloat());var n=yu(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==vr.Bytes)return s.push(this.readDouble());var n=yu(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==vr.Bytes)return s.push(this.readFixed32());var n=yu(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==vr.Bytes)return s.push(this.readSFixed32());var n=yu(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==vr.Bytes)return s.push(this.readFixed64());var n=yu(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==vr.Bytes)return s.push(this.readSFixed64());var n=yu(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===vr.Varint)for(;this.buf[this.pos++]>127;);else if(n===vr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===vr.Fixed32)this.pos+=4;else{if(n!==vr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var l=new Uint8Array(n);l.set(this.buf),this.buf=l,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),rd(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),rd(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),rd(this.buf,-1&s,this.pos),rd(this.buf,Math.floor(s*NB),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),rd(this.buf,-1&s,this.pos),rd(this.buf,Math.floor(s*NB),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,l){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(y,_,w){w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,w.buf[w.pos]=127&(y>>>=7)}(h,0,l),function(y,_){var w=(7&y)<<4;_.buf[_.pos++]|=w|((y>>>=3)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y)))))}(p,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(h,p,y){for(var _,w,A=0;A<p.length;A++){if((_=p.charCodeAt(A))>55295&&_<57344){if(!w){_>56319||A+1===p.length?(h[y++]=239,h[y++]=191,h[y++]=189):w=_;continue}if(_<56320){h[y++]=239,h[y++]=191,h[y++]=189,w=_;continue}_=w-55296<<10|_-56320|65536,w=null}else w&&(h[y++]=239,h[y++]=191,h[y++]=189,w=null);_<128?h[y++]=_:(_<2048?h[y++]=_>>6|192:(_<65536?h[y++]=_>>12|224:(h[y++]=_>>18|240,h[y++]=_>>12&63|128),h[y++]=_>>6&63|128),h[y++]=63&_|128)}return y}(this.buf,s,this.pos);var l=this.pos-n;l>=128&&UB(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),zB(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),zB(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var l=0;l<n;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,n){this.pos++;var l=this.pos;s(n,this);var h=this.pos-l;h>=128&&UB(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeMessage:function(s,n,l){this.writeTag(s,vr.Bytes),this.writeRawMessage(n,l)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,jbe,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,Vbe,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,Gbe,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,$be,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,Wbe,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,Kbe,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,Hbe,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,Zbe,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,Xbe,n)},writeBytesField:function(s,n){this.writeTag(s,vr.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,vr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,vr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,vr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,vr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,vr.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,vr.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,vr.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,vr.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,vr.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,!!n)}};var PE=m(LB);let ME=3;function Jbe(s,n,l){s===1&&l.readMessage(Ybe,n)}function Ybe(s,n,l){if(s===3){let{id:h,bitmap:p,width:y,height:_,left:w,top:A,advance:P}=l.readMessage(Qbe,{});n.push({id:h,bitmap:new uv({width:y+2*ME,height:_+2*ME},p),metrics:{width:y,height:_,left:w,top:A,advance:P}})}}function Qbe(s,n,l){s===1?n.id=l.readVarint():s===2?n.bitmap=l.readBytes():s===3?n.width=l.readVarint():s===4?n.height=l.readVarint():s===5?n.left=l.readSVarint():s===6?n.top=l.readSVarint():s===7&&(n.advance=l.readVarint())}let VB=ME;function $B(s){let n=0,l=0;for(let _ of s)n+=_.w*_.h,l=Math.max(l,_.w);s.sort((_,w)=>w.h-_.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}],p=0,y=0;for(let _ of s)for(let w=h.length-1;w>=0;w--){let A=h[w];if(!(_.w>A.w||_.h>A.h)){if(_.x=A.x,_.y=A.y,y=Math.max(y,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===A.w&&_.h===A.h){let P=h.pop();w<h.length&&(h[w]=P)}else _.h===A.h?(A.x+=_.w,A.w-=_.w):_.w===A.w?(A.y+=_.h,A.h-=_.h):(h.push({x:A.x+_.w,y:A.y,w:A.w-_.w,h:_.h}),A.y+=_.h,A.h-=_.h);break}}return{w:p,h:y,fill:n/(p*y)||0}}let Xn=1;class OE{constructor(n,{pixelRatio:l,version:h,stretchX:p,stretchY:y,content:_,textFitWidth:w,textFitHeight:A}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=p,this.stretchY=y,this.content=_,this.version=h,this.textFitWidth=w,this.textFitHeight=A}get tl(){return[this.paddedRect.x+Xn,this.paddedRect.y+Xn]}get br(){return[this.paddedRect.x+this.paddedRect.w-Xn,this.paddedRect.y+this.paddedRect.h-Xn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Xn)/this.pixelRatio,(this.paddedRect.h-2*Xn)/this.pixelRatio]}}class WB{constructor(n,l){let h={},p={};this.haveRenderCallbacks=[];let y=[];this.addImages(n,h,y),this.addImages(l,p,y);let{w:_,h:w}=$B(y),A=new Ha({width:_||1,height:w||1});for(let P in n){let M=n[P],R=h[P].paddedRect;Ha.copy(M.data,A,{x:0,y:0},{x:R.x+Xn,y:R.y+Xn},M.data)}for(let P in l){let M=l[P],R=p[P].paddedRect,F=R.x+Xn,U=R.y+Xn,V=M.data.width,W=M.data.height;Ha.copy(M.data,A,{x:0,y:0},{x:F,y:U},M.data),Ha.copy(M.data,A,{x:0,y:W-1},{x:F,y:U-1},{width:V,height:1}),Ha.copy(M.data,A,{x:0,y:0},{x:F,y:U+W},{width:V,height:1}),Ha.copy(M.data,A,{x:V-1,y:0},{x:F-1,y:U},{width:1,height:W}),Ha.copy(M.data,A,{x:0,y:0},{x:F+V,y:U},{width:1,height:W})}this.image=A,this.iconPositions=h,this.patternPositions=p}addImages(n,l,h){for(let p in n){let y=n[p],_={x:0,y:0,w:y.data.width+2*Xn,h:y.data.height+2*Xn};h.push(_),l[p]=new OE(_,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,l){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),l)}patchUpdatedImage(n,l,h){if(!n||!l||n.version===l.version)return;n.version=l.version;let[p,y]=n.tl;h.update(l.data,void 0,{x:p,y})}}var Cl;ot("ImagePosition",OE),ot("ImageAtlas",WB),u.ah=void 0,(Cl=u.ah||(u.ah={}))[Cl.none=0]="none",Cl[Cl.horizontal=1]="horizontal",Cl[Cl.vertical=2]="vertical",Cl[Cl.horizontalOnly=3]="horizontalOnly";let mv=-17;class vv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,l){let h=new vv;return h.scale=n||1,h.fontStack=l,h}static forImage(n){let l=new vv;return l.imageName=n,l}}class id{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){let h=new id;for(let p=0;p<n.sections.length;p++){let y=n.sections[p];y.image?h.addImageSection(y):h.addTextSection(y,l)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let l="";for(let h=0;h<n.length;h++){let p=n.charCodeAt(h+1)||null,y=n.charCodeAt(h-1)||null;l+=p&&z0(p)&&!pv[n[h+1]]||y&&z0(y)&&!pv[n[h-1]]||!pv[n[h]]?n[h]:pv[n[h]]}return l}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&ex[this.text.charCodeAt(h)];h++)n++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&ex[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){let h=new id;return h.text=this.text.substring(n,l),h.sectionIndex=this.sectionIndex.slice(n,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}addTextSection(n,l){this.text+=n.text,this.sections.push(vv.forText(n.scale,n.fontStack||l));let h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){let l=n.image?n.image.name:"";if(l.length===0)return void Lr("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(vv.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Lr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Q0(s,n,l,h,p,y,_,w,A,P,M,R,F,U,V){let W=id.fromFeature(s,p),ee;R===u.ah.vertical&&W.verticalizePunctuation();let{processBidirectionalText:ne,processStyledBidirectionalText:xe}=Hn;if(ne&&W.sections.length===1){ee=[];let Ee=ne(W.toString(),kE(W,P,y,n,h,U));for(let De of Ee){let et=new id;et.text=De,et.sections=W.sections;for(let bt=0;bt<De.length;bt++)et.sectionIndex.push(0);ee.push(et)}}else if(xe){ee=[];let Ee=xe(W.text,W.sectionIndex,kE(W,P,y,n,h,U));for(let De of Ee){let et=new id;et.text=De[0],et.sectionIndex=De[1],et.sections=W.sections,ee.push(et)}}else ee=function(Ee,De){let et=[],bt=Ee.text,Je=0;for(let We of De)et.push(Ee.substring(Je,We)),Je=We;return Je<bt.length&&et.push(Ee.substring(Je,bt.length)),et}(W,kE(W,P,y,n,h,U));let ce=[],ye={positionedLines:ce,text:W.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(Ee,De,et,bt,Je,We,dt,st,nt,Ie,mt,ht){let It=0,xr=mv,gr=0,Si=0,vo=st==="right"?1:st==="left"?0:.5,$i=0;for(let Qr of Je){Qr.trim();let Ai=Qr.getMaxScale(),ln=(Ai-1)*vi,Wi={positionedGlyphs:[],lineOffset:0};Ee.positionedLines[$i]=Wi;let Mn=Wi.positionedGlyphs,Gi=0;if(!Qr.length()){xr+=We,++$i;continue}for(let Jn=0;Jn<Qr.length();Jn++){let or=Qr.getSection(Jn),qr=Qr.getSectionIndex(Jn),kr=Qr.getCharCode(Jn),ma=0,Wr=null,sd=null,Ss=null,qs=vi,go=!(nt===u.ah.horizontal||!mt&&!tv(kr)||mt&&(ex[kr]||(qi=kr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(qi)))));if(or.imageName){let Ja=bt[or.imageName];if(!Ja)continue;Ss=or.imageName,Ee.iconsInText=Ee.iconsInText||!0,sd=Ja.paddedRect;let ki=Ja.displaySize;or.scale=or.scale*vi/ht,Wr={width:ki[0],height:ki[1],left:Xn,top:-VB,advance:go?ki[1]:ki[0]},ma=ln+(vi-ki[1]*or.scale),qs=Wr.advance;let _u=go?ki[0]*or.scale-vi*Ai:ki[1]*or.scale-vi*Ai;_u>0&&_u>Gi&&(Gi=_u)}else{let Ja=et[or.fontStack],ki=Ja&&Ja[kr];if(ki&&ki.rect)sd=ki.rect,Wr=ki.metrics;else{let _u=De[or.fontStack],wv=_u&&_u[kr];if(!wv)continue;Wr=wv.metrics}ma=(Ai-or.scale)*vi}go?(Ee.verticalizable=!0,Mn.push({glyph:kr,imageName:Ss,x:It,y:xr+ma,vertical:go,scale:or.scale,fontStack:or.fontStack,sectionIndex:qr,metrics:Wr,rect:sd}),It+=qs*or.scale+Ie):(Mn.push({glyph:kr,imageName:Ss,x:It,y:xr+ma,vertical:go,scale:or.scale,fontStack:or.fontStack,sectionIndex:qr,metrics:Wr,rect:sd}),It+=Wr.advance*or.scale+Ie)}Mn.length!==0&&(gr=Math.max(It-Ie,gr),i1e(Mn,0,Mn.length-1,vo,Gi)),It=0;let Xa=We*Ai+Gi;Wi.lineOffset=Math.max(Gi,ln),xr+=Xa,Si=Math.max(Xa,Si),++$i}var qi;let In=xr-mv,{horizontalAlign:Cn,verticalAlign:Pn}=RE(dt);(function(Qr,Ai,ln,Wi,Mn,Gi,Xa,Jn,or){let qr=(Ai-ln)*Mn,kr=0;kr=Gi!==Xa?-Jn*Wi-mv:(-Wi*or+.5)*Xa;for(let ma of Qr)for(let Wr of ma.positionedGlyphs)Wr.x+=qr,Wr.y+=kr})(Ee.positionedLines,vo,Cn,Pn,gr,Si,We,In,Je.length),Ee.top+=-Pn*In,Ee.bottom=Ee.top+In,Ee.left+=-Cn*gr,Ee.right=Ee.left+gr}(ye,n,l,h,ee,_,w,A,R,P,F,V),!function(Ee){for(let De of Ee)if(De.positionedGlyphs.length!==0)return!1;return!0}(ce)&&ye}let ex={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},e1e={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},t1e={40:!0};function GB(s,n,l,h,p,y){if(n.imageName){let _=h[n.imageName];return _?_.displaySize[0]*n.scale*vi/y+p:0}{let _=l[n.fontStack],w=_&&_[s];return w?w.metrics.advance*n.scale+p:0}}function KB(s,n,l,h){let p=Math.pow(s-n,2);return h?s<n?p/2:2*p:p+Math.abs(l)*l}function r1e(s,n,l){let h=0;return s===10&&(h-=1e4),l&&(h+=150),s!==40&&s!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function HB(s,n,l,h,p,y){let _=null,w=KB(n,l,p,y);for(let A of h){let P=KB(n-A.x,l,p,y)+A.badness;P<=w&&(_=A,w=P)}return{index:s,x:n,priorBreak:_,badness:w}}function ZB(s){return s?ZB(s.priorBreak).concat(s.index):[]}function kE(s,n,l,h,p,y){if(!s)return[];let _=[],w=function(R,F,U,V,W,ee){let ne=0;for(let xe=0;xe<R.length();xe++){let ce=R.getSection(xe);ne+=GB(R.getCharCode(xe),ce,V,W,F,ee)}return ne/Math.max(1,Math.ceil(ne/U))}(s,n,l,h,p,y),A=s.text.indexOf("\u200B")>=0,P=0;for(let R=0;R<s.length();R++){let F=s.getSection(R),U=s.getCharCode(R);if(ex[U]||(P+=GB(U,F,h,p,n,y)),R<s.length()-1){let V=!((M=U)<11904)&&(!!Jt["CJK Compatibility Forms"](M)||!!Jt["CJK Compatibility"](M)||!!Jt["CJK Strokes"](M)||!!Jt["CJK Symbols and Punctuation"](M)||!!Jt["Enclosed CJK Letters and Months"](M)||!!Jt["Halfwidth and Fullwidth Forms"](M)||!!Jt["Ideographic Description Characters"](M)||!!Jt["Vertical Forms"](M)||F0.test(String.fromCodePoint(M)));(e1e[U]||V||F.imageName||R!==s.length()-2&&t1e[s.getCharCode(R+1)])&&_.push(HB(R+1,P,w,_,r1e(U,s.getCharCode(R+1),V&&A),!1))}}var M;return ZB(HB(s.length(),P,w,_,0,!0))}function RE(s){let n=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0;}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0;}return{horizontalAlign:n,verticalAlign:l}}function i1e(s,n,l,h,p){if(!h&&!p)return;let y=s[l],_=(s[l].x+y.metrics.advance*y.scale)*h;for(let w=n;w<=l;w++)s[w].x-=_,s[w].y+=p}function n1e(s,n,l){let{horizontalAlign:h,verticalAlign:p}=RE(l),y=n[0]-s.displaySize[0]*h,_=n[1]-s.displaySize[1]*p;return{image:s,top:_,bottom:_+s.displaySize[1],left:y,right:y+s.displaySize[0]}}function XB(s){var n,l;let h=s.left,p=s.top,y=s.right-h,_=s.bottom-p,w=(n=s.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",A=(l=s.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",P=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(A==="proportional"){if(w==="stretchOnly"&&y/_<P||w==="proportional"){let M=Math.ceil(_*P);h*=M/y,y=M}}else if(w==="proportional"&&A==="stretchOnly"&&P!==0&&y/_>P){let M=Math.ceil(y/P);p*=M/_,_=M}return{x1:h,y1:p,x2:h+y,y2:p+_}}function JB(s,n,l,h,p,y){let _=s.image,w;if(_.content){let ee=_.content,ne=_.pixelRatio||1;w=[ee[0]/ne,ee[1]/ne,_.displaySize[0]-ee[2]/ne,_.displaySize[1]-ee[3]/ne]}let A=n.left*y,P=n.right*y,M,R,F,U;l==="width"||l==="both"?(U=p[0]+A-h[3],R=p[0]+P+h[1]):(U=p[0]+(A+P-_.displaySize[0])/2,R=U+_.displaySize[0]);let V=n.top*y,W=n.bottom*y;return l==="height"||l==="both"?(M=p[1]+V-h[0],F=p[1]+W+h[2]):(M=p[1]+(V+W-_.displaySize[1])/2,F=M+_.displaySize[1]),{image:_,top:M,right:R,bottom:F,left:U,collisionPadding:w}}let gv=255,ws=128,Pl=gv*ws;function YB(s,n){let{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Cr(s+1))};if(l.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:p}=l,y=0;for(;y<h.length&&h[y]<=s;)y++;y=Math.max(0,y-1);let _=y;for(;_<h.length&&h[_]<s+1;)_++;_=Math.min(h.length-1,_);let w=h[y],A=h[_];return l.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:A,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:A,minSize:l.evaluate(new Cr(w)),maxSize:l.evaluate(new Cr(A)),interpolationType:p}}}function DE(s,n,l){let h="never",p=s.get(n);return p?h=p:s.get(l)&&(h="always"),h}let a1e=Il.VectorTileFeature.types,o1e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tx(s,n,l,h,p,y,_,w,A,P,M,R,F){let U=w?Math.min(Pl,Math.round(w[0])):0,V=w?Math.min(Pl,Math.round(w[1])):0;s.emplaceBack(n,l,Math.round(32*h),Math.round(32*p),y,_,(U<<1)+(A?1:0),V,16*P,16*M,256*R,256*F)}function LE(s,n,l){s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l),s.emplaceBack(n.x,n.y,l)}function s1e(s){for(let n of s.sections)if(cE(n.text))return!0;return!1}class FE{constructor(n){this.layoutVertexArray=new Gf,this.indexArray=new Ka,this.programConfigurations=n,this.segments=new Yt,this.dynamicLayoutVertexArray=new nv,this.opacityVertexArray=new da,this.hasVisibleVertices=!1,this.placedSymbolArray=new Pr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Fbe.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,zbe.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,o1e,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ot("SymbolBuffers",FE);class zE{constructor(n,l,h){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new h,this.segments=new Yt,this.collisionVertexArray=new xs}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Nbe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ot("CollisionBuffers",zE);class nd{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gE([]),this.placementViewportMatrix=gE([]);let l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=YB(this.zoom,l["text-size"]),this.iconSizeData=YB(this.zoom,l["icon-size"]);let h=this.layers[0].layout,p=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=DE(h,"text-overlap","text-allow-overlap")!=="never"||DE(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>u.ah[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new FE(new ah(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new FE(new ah(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Mr,this.lineVertexArray=new Bi,this.symbolInstances=new Xt,this.textAnchorOffsets=new Or}calculateGlyphDependencies(n,l,h,p,y){for(let _=0;_<n.length;_++)if(l[n.charCodeAt(_)]=!0,(h||p)&&y){let w=pv[n.charAt(_)];w&&(l[w.charCodeAt(0)]=!0)}}populate(n,l,h){let p=this.layers[0],y=p.layout,_=y.get("text-font"),w=y.get("text-field"),A=y.get("icon-image"),P=(w.value.kind!=="constant"||w.value.value instanceof $n&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),M=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,R=y.get("symbol-sort-key");if(this.features=[],!P&&!M)return;let F=l.iconDependencies,U=l.glyphDependencies,V=l.availableImages,W=new Cr(this.zoom);for(let{feature:ee,id:ne,index:xe,sourceLayerIndex:ce}of n){let ye=p._featureFilter.needGeometry,Ee=sh(ee,ye);if(!p._featureFilter.filter(W,Ee,h))continue;let De,et;if(ye||(Ee.geometry=oh(ee)),P){let Je=p.getValueAndResolveTokens("text-field",Ee,h,V),We=$n.factory(Je),dt=this.hasRTLText=this.hasRTLText||s1e(We);(!dt||Hn.getRTLTextPluginStatus()==="unavailable"||dt&&Hn.isParsed())&&(De=Ube(We,p,Ee))}if(M){let Je=p.getValueAndResolveTokens("icon-image",Ee,h,V);et=Je instanceof Gn?Je:Gn.fromString(Je)}if(!De&&!et)continue;let bt=this.sortFeaturesByKey?R.evaluate(Ee,{},h):void 0;if(this.features.push({id:ne,text:De,icon:et,index:xe,sourceLayerIndex:ce,geometry:Ee.geometry,properties:ee.properties,type:a1e[ee.type],sortKey:bt}),et&&(F[et.name]=!0),De){let Je=_.evaluate(Ee,{},h).join(","),We=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ah.vertical)>=0;for(let dt of De.sections)if(dt.image)F[dt.image.name]=!0;else{let st=Qm(De.toString()),nt=dt.fontStack||Je,Ie=U[nt]=U[nt]||{};this.calculateGlyphDependencies(dt.text,Ie,We,this.allowVerticalPlacement,st)}}}y.get("symbol-placement")==="line"&&(this.features=function(ee){let ne={},xe={},ce=[],ye=0;function Ee(Je){ce.push(ee[Je]),ye++}function De(Je,We,dt){let st=xe[Je];return delete xe[Je],xe[We]=st,ce[st].geometry[0].pop(),ce[st].geometry[0]=ce[st].geometry[0].concat(dt[0]),st}function et(Je,We,dt){let st=ne[We];return delete ne[We],ne[Je]=st,ce[st].geometry[0].shift(),ce[st].geometry[0]=dt[0].concat(ce[st].geometry[0]),st}function bt(Je,We,dt){let st=dt?We[0][We[0].length-1]:We[0][0];return`${Je}:${st.x}:${st.y}`}for(let Je=0;Je<ee.length;Je++){let We=ee[Je],dt=We.geometry,st=We.text?We.text.toString():null;if(!st){Ee(Je);continue}let nt=bt(st,dt),Ie=bt(st,dt,!0);if(nt in xe&&Ie in ne&&xe[nt]!==ne[Ie]){let mt=et(nt,Ie,dt),ht=De(nt,Ie,ce[mt].geometry);delete ne[nt],delete xe[Ie],xe[bt(st,ce[ht].geometry,!0)]=ht,ce[mt].geometry=null}else nt in xe?De(nt,Ie,dt):Ie in ne?et(nt,Ie,dt):(Ee(Je),ne[nt]=ye-1,xe[Ie]=ye-1)}return ce.filter(Je=>Je.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,ne)=>ee.sortKey-ne.sortKey)}update(n,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){let h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(l[n.segment+1]),y=n.dist(l[n.segment]),_={};for(let w=n.segment+1;w<l.length;w++)_[w]={x:l[w].x,y:l[w].y,tileUnitDistanceFromAnchor:p},w<l.length-1&&(p+=l[w+1].dist(l[w]));for(let w=n.segment||0;w>=0;w--)_[w]={x:l[w].x,y:l[w].y,tileUnitDistanceFromAnchor:y},w>0&&(y+=l[w-1].dist(l[w]));for(let w=0;w<l.length;w++){let A=_[w];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,l,h,p,y,_,w,A,P,M,R,F){let U=n.indexArray,V=n.layoutVertexArray,W=n.segments.prepareSegment(4*l.length,V,U,this.canOverlap?_.sortKey:void 0),ee=this.glyphOffsetArray.length,ne=W.vertexLength,xe=this.allowVerticalPlacement&&w===u.ah.vertical?Math.PI/2:0,ce=_.text&&_.text.sections;for(let ye=0;ye<l.length;ye++){let{tl:Ee,tr:De,bl:et,br:bt,tex:Je,pixelOffsetTL:We,pixelOffsetBR:dt,minFontScaleX:st,minFontScaleY:nt,glyphOffset:Ie,isSDF:mt,sectionIndex:ht}=l[ye],It=W.vertexLength,xr=Ie[1];tx(V,A.x,A.y,Ee.x,xr+Ee.y,Je.x,Je.y,h,mt,We.x,We.y,st,nt),tx(V,A.x,A.y,De.x,xr+De.y,Je.x+Je.w,Je.y,h,mt,dt.x,We.y,st,nt),tx(V,A.x,A.y,et.x,xr+et.y,Je.x,Je.y+Je.h,h,mt,We.x,dt.y,st,nt),tx(V,A.x,A.y,bt.x,xr+bt.y,Je.x+Je.w,Je.y+Je.h,h,mt,dt.x,dt.y,st,nt),LE(n.dynamicLayoutVertexArray,A,xe),U.emplaceBack(It,It+1,It+2),U.emplaceBack(It+1,It+2,It+3),W.vertexLength+=4,W.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ie[0]),ye!==l.length-1&&ht===l[ye+1].sectionIndex||n.programConfigurations.populatePaintArrays(V.length,_,_.index,{},F,ce&&ce[ht])}n.placedSymbolArray.emplaceBack(A.x,A.y,ee,this.glyphOffsetArray.length-ee,ne,P,M,A.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],w,0,!1,0,R)}_addCollisionDebugVertex(n,l,h,p,y,_){return l.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,y,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,l,h,p,y,_,w){let A=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),P=A.vertexLength,M=y.layoutVertexArray,R=y.collisionVertexArray,F=w.anchorX,U=w.anchorY;this._addCollisionDebugVertex(M,R,_,F,U,new T(n,l)),this._addCollisionDebugVertex(M,R,_,F,U,new T(h,l)),this._addCollisionDebugVertex(M,R,_,F,U,new T(h,p)),this._addCollisionDebugVertex(M,R,_,F,U,new T(n,p)),A.vertexLength+=4;let V=y.indexArray;V.emplaceBack(P,P+1),V.emplaceBack(P+1,P+2),V.emplaceBack(P+2,P+3),V.emplaceBack(P+3,P),A.primitiveLength+=4}addDebugCollisionBoxes(n,l,h,p){for(let y=n;y<l;y++){let _=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zE(pa,DB.members,Oi),this.iconCollisionBox=new zE(pa,DB.members,Oi);for(let n=0;n<this.symbolInstances.length;n++){let l=this.symbolInstances.get(n);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(n,l,h,p,y,_,w,A,P){let M={};for(let R=l;R<h;R++){let F=n.get(R);M.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.textFeatureIndex=F.featureIndex;break}for(let R=p;R<y;R++){let F=n.get(R);M.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalTextFeatureIndex=F.featureIndex;break}for(let R=_;R<w;R++){let F=n.get(R);M.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.iconFeatureIndex=F.featureIndex;break}for(let R=A;R<P;R++){let F=n.get(R);M.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalIconFeatureIndex=F.featureIndex;break}return M}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){let h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){let h=n.placedSymbolArray.get(l),p=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<p;y+=4)n.indexArray.emplaceBack(y,y+1,y+2),n.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let l=Math.sin(n),h=Math.cos(n),p=[],y=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);let A=this.symbolInstances.get(w);p.push(0|Math.round(l*A.anchorX+h*A.anchorY)),y.push(A.featureIndex)}return _.sort((w,A)=>p[w]-p[A]||y[A]-y[w]),_}addToSortKeyRanges(n,l){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let l of this.symbolInstanceIndexes){let h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,y,_)=>{p>=0&&_.indexOf(p)===y&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let QB,e3;ot("SymbolBucket",nd,{omit:["layers","collisionBoxArray","features","compareText"]}),nd.MAX_GLYPHS=65535,nd.addDynamicAttributes=LE;var NE={get paint(){return e3=e3||new g({"icon-opacity":new St(Ae.paint_symbol["icon-opacity"]),"icon-color":new St(Ae.paint_symbol["icon-color"]),"icon-halo-color":new St(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new St(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new St(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new lt(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new lt(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new St(Ae.paint_symbol["text-opacity"]),"text-color":new St(Ae.paint_symbol["text-color"],{runtimeType:zi,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new St(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new St(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new St(Ae.paint_symbol["text-halo-blur"]),"text-translate":new lt(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new lt(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return QB=QB||new g({"symbol-placement":new lt(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new lt(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new lt(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new St(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new lt(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new lt(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new lt(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new lt(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new lt(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new lt(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new St(Ae.layout_symbol["icon-size"]),"icon-text-fit":new lt(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new lt(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new St(Ae.layout_symbol["icon-image"]),"icon-rotate":new St(Ae.layout_symbol["icon-rotate"]),"icon-padding":new St(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new lt(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new St(Ae.layout_symbol["icon-offset"]),"icon-anchor":new St(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new lt(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new lt(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new lt(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new St(Ae.layout_symbol["text-field"]),"text-font":new St(Ae.layout_symbol["text-font"]),"text-size":new St(Ae.layout_symbol["text-size"]),"text-max-width":new St(Ae.layout_symbol["text-max-width"]),"text-line-height":new lt(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new St(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new St(Ae.layout_symbol["text-justify"]),"text-radial-offset":new St(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new lt(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new St(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new St(Ae.layout_symbol["text-anchor"]),"text-max-angle":new lt(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new lt(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new St(Ae.layout_symbol["text-rotate"]),"text-padding":new lt(Ae.layout_symbol["text-padding"]),"text-keep-upright":new lt(Ae.layout_symbol["text-keep-upright"]),"text-transform":new St(Ae.layout_symbol["text-transform"]),"text-offset":new St(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new lt(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new lt(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new lt(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new lt(Ae.layout_symbol["text-optional"])})}};class t3{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:an,this.defaultValue=n}evaluate(n){if(n.formattedSection){let l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ot("FormatSectionOverride",t3,{omit:["defaultValue"]});class rx extends c{constructor(n){super(n,NE)}recalculate(n,l){if(super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let p=[];for(let y of h)p.indexOf(y)<0&&p.push(y);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,l,h,p){let y=this.layout.get(n).evaluate(l,{},h,p),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Mf(_.value)||!y?y:function(w,A){return A.replace(/{([^{}]+)}/g,(P,M)=>w&&M in w?String(w[M]):"")}(l.properties,y)}createBucket(n){return new nd(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let n of NE.paint.overridableProperties){if(!rx.hasPaintOverride(this.layout,n))continue;let l=this.paint.get(n),h=new t3(l),p=new Pf(h,l.property.specification),y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new fl("source",p):new dl("composite",p,l.value.zoomStops),this.paint._values[n]=new po(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&rx.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){let h=n.get("text-field"),p=NE.paint.properties[l],y=!1,_=w=>{for(let A of w)if(p.overrides&&p.overrides.hasOverride(A))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof $n)_(h.value.value.sections);else if(h.value.kind==="source"){let w=P=>{y||(P instanceof Ua&&li(P.value)===Go?_(P.value.sections):P instanceof bf?_(P.sections):P.eachChild(w))},A=h.value;A._styleExpression&&w(A._styleExpression.expression)}return y}}let r3;var u1e={get paint(){return r3=r3||new g({"background-color":new lt(Ae.paint_background["background-color"]),"background-pattern":new $f(Ae.paint_background["background-pattern"]),"background-opacity":new lt(Ae.paint_background["background-opacity"])})}};class l1e extends c{constructor(n){super(n,u1e)}}let i3;var c1e={get paint(){return i3=i3||new g({"raster-opacity":new lt(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new lt(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new lt(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new lt(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new lt(Ae.paint_raster["raster-saturation"]),"raster-contrast":new lt(Ae.paint_raster["raster-contrast"]),"raster-resampling":new lt(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new lt(Ae.paint_raster["raster-fade-duration"])})}};class h1e extends c{constructor(n){super(n,c1e)}}class f1e extends c{constructor(n){super(n,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class d1e{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let BE=6371008.8;class Ml{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ml(be(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){let l=Math.PI/180,h=this.lat*l,p=n.lat*l,y=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*l);return BE*Math.acos(Math.min(y,1))}static convert(n){if(n instanceof Ml)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ml(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ml(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let n3=2*Math.PI*BE;function a3(s){return n3*Math.cos(s*Math.PI/180)}function o3(s){return(180+s)/360}function s3(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function u3(s,n){return s/a3(n)}function UE(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class yv{constructor(n,l,h=0){this.x=+n,this.y=+l,this.z=+h}static fromLngLat(n,l=0){let h=Ml.convert(n);return new yv(o3(h.lng),s3(h.lat),u3(l,h.lat))}toLngLat(){return new Ml(360*this.x-180,UE(this.y))}toAltitude(){return this.z*a3(UE(this.y))}meterInMercatorCoordinateUnits(){return 1/n3*(n=UE(this.y),1/Math.cos(n*Math.PI/180));var n}}function l3(s,n,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[s*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class jE{constructor(n,l,h){if(!function(p,y,_){return!(p<0||p>25||_<0||_>=Math.pow(2,p)||y<0||y>=Math.pow(2,p))}(n,l,h))throw new Error(`x=${l}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=l,this.y=h,this.key=_v(0,n,n,l,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l,h){let p=(_=this.y,w=this.z,A=l3(256*(y=this.x),256*(_=Math.pow(2,w)-_-1),w),P=l3(256*(y+1),256*(_+1),w),A[0]+","+A[1]+","+P[0]+","+P[1]);var y,_,w,A,P;let M=function(R,F,U){let V,W="";for(let ee=R;ee>0;ee--)V=1<<ee-1,W+=(F&V?1:0)+(U&V?2:0);return W}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){let l=this.z-n.z;return l>0&&n.x===this.x>>l&&n.y===this.y>>l}getTilePoint(n){let l=Math.pow(2,this.z);return new T((n.x*l-this.x)*ci,(n.y*l-this.y)*ci)}toString(){return`${this.z}/${this.x}/${this.y}`}}class c3{constructor(n,l){this.wrap=n,this.canonical=l,this.key=_v(n,l.z,l.z,l.x,l.y)}}class Za{constructor(n,l,h,p,y){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=l,this.canonical=new jE(h,+p,+y),this.key=_v(l,n,h,p,y)}clone(){return new Za(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let l=this.canonical.z-n;return n>this.canonical.z?new Za(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Za(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-n;return n>this.canonical.z?_v(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y):_v(this.wrap*+l,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;let l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new Za(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let l=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Za(l,this.wrap,l,h,p),new Za(l,this.wrap,l,h+1,p),new Za(l,this.wrap,l,h,p+1),new Za(l,this.wrap,l,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Za(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Za(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new c3(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new yv(n.x-this.wrap,n.y))}}function _v(s,n,l,h,p){(s*=2)<0&&(s=-1*s-1);let y=1<<l;return(y*y*s+y*p+h).toString(36)+l.toString(36)+n.toString(36)}ot("CanonicalTileID",jE),ot("OverscaledTileID",Za,{omit:["posMatrix"]});class h3{constructor(n,l,h,p=1,y=1,_=1,w=0){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Lr(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;let A=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=y,this.blueFactor=_,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let P=0;P<A;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(A,P)]=this.data[this._idx(A-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,A)]=this.data[this._idx(P,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<A;P++)for(let M=0;M<A;M++){let R=this.get(P,M);R>this.max&&(this.max=R),R<this.min&&(this.min=R)}}get(n,l){let h=new Uint8Array(this.data.buffer),p=4*this._idx(n,l);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}unpack(n,l,h){return n*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ha({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,l,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=l*this.dim,y=l*this.dim+this.dim,_=h*this.dim,w=h*this.dim+this.dim;switch(l){case-1:p=y-1;break;case 1:y=p+1;}switch(h){case-1:_=w-1;break;case 1:w=_+1;}let A=-l*this.dim,P=-h*this.dim;for(let M=_;M<w;M++)for(let R=p;R<y;R++)this.data[this._idx(R,M)]=n.data[this._idx(R+A,M+P)]}}ot("DEMData",h3);class f3{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){let h=n[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class d3{constructor(n,l,h,p,y){this.type="Feature",this._vectorTileFeature=n,n._z=l,n._x=h,n._y=p,this.properties=n.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){let n={geometry:this.geometry};for(let l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(n[l]=this[l]);return n}}class p3{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new gl(ci,16,0),this.grid3D=new gl(ci,16,0),this.featureIndexArray=new sn,this.promoteId=l}insert(n,l,h,p,y,_){let w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,y);let A=_?this.grid3D:this.grid;for(let P=0;P<l.length;P++){let M=l[P],R=[1/0,1/0,-1/0,-1/0];for(let F=0;F<M.length;F++){let U=M[F];R[0]=Math.min(R[0],U.x),R[1]=Math.min(R[1],U.y),R[2]=Math.max(R[2],U.x),R[3]=Math.max(R[3],U.y)}R[0]<ci&&R[1]<ci&&R[2]>=0&&R[3]>=0&&A.insert(w,R[0],R[1],R[2],R[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Il.VectorTile(new PE(this.rawTileData)).layers,this.sourceLayerCoder=new f3(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,l,h,p){this.loadVTLayers();let y=n.params||{},_=ci/n.tileSize/n.scale,w=zm(y.filter),A=n.queryGeometry,P=n.queryPadding*_,M=v3(A),R=this.grid.query(M.minX-P,M.minY-P,M.maxX+P,M.maxY+P),F=v3(n.cameraQueryGeometry),U=this.grid3D.query(F.minX-P,F.minY-P,F.maxX+P,F.maxY+P,(ee,ne,xe,ce)=>function(ye,Ee,De,et,bt){for(let We of ye)if(Ee<=We.x&&De<=We.y&&et>=We.x&&bt>=We.y)return!0;let Je=[new T(Ee,De),new T(Ee,bt),new T(et,bt),new T(et,De)];if(ye.length>2){for(let We of Je)if(Jf(ye,We))return!0}for(let We=0;We<ye.length-1;We++)if(Kxe(ye[We],ye[We+1],Je))return!0;return!1}(n.cameraQueryGeometry,ee-P,ne-P,xe+P,ce+P));for(let ee of U)R.push(ee);R.sort(p1e);let V={},W;for(let ee=0;ee<R.length;ee++){let ne=R[ee];if(ne===W)continue;W=ne;let xe=this.featureIndexArray.get(ne),ce=null;this.loadMatchingFeature(V,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,w,y.layers,y.availableImages,l,h,p,(ye,Ee,De)=>(ce||(ce=oh(ye)),Ee.queryIntersectsFeature(A,ye,De,ce,this.z,n.transform,_,n.pixelPosMatrix)))}return V}loadMatchingFeature(n,l,h,p,y,_,w,A,P,M,R){let F=this.bucketLayerIDs[l];if(_&&!function(ee,ne){for(let xe=0;xe<ee.length;xe++)if(ne.indexOf(ee[xe])>=0)return!0;return!1}(_,F))return;let U=this.sourceLayerCoder.decode(h),V=this.vtLayers[U].feature(p);if(y.needGeometry){let ee=sh(V,!0);if(!y.filter(new Cr(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!y.filter(new Cr(this.tileID.overscaledZ),V))return;let W=this.getId(V,U);for(let ee=0;ee<F.length;ee++){let ne=F[ee];if(_&&_.indexOf(ne)<0)continue;let xe=A[ne];if(!xe)continue;let ce={};W&&M&&(ce=M.getState(xe.sourceLayer||"_geojsonTileLayer",W));let ye=Le({},P[ne]);ye.paint=m3(ye.paint,xe.paint,V,ce,w),ye.layout=m3(ye.layout,xe.layout,V,ce,w);let Ee=!R||R(V,xe,ce);if(!Ee)continue;let De=new d3(V,this.z,this.x,this.y,W);De.layer=ye;let et=n[ne];et===void 0&&(et=n[ne]=[]),et.push({featureIndex:p,feature:De,intersectionZ:Ee})}}lookupSymbolFeatures(n,l,h,p,y,_,w,A){let P={};this.loadVTLayers();let M=zm(y);for(let R of n)this.loadMatchingFeature(P,h,p,R,M,_,w,A,l);return P}hasLayer(n){for(let l of this.bucketLayerIDs)for(let h of l)if(n===h)return!0;return!1}getId(n,l){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof h=="boolean"&&(h=Number(h))),h}}function m3(s,n,l,h,p){return Ze(s,(y,_)=>{let w=n instanceof rh?n.get(_):null;return w&&w.evaluate?w.evaluate(l,h,p):w})}function v3(s){let n=1/0,l=1/0,h=-1/0,p=-1/0;for(let y of s)n=Math.min(n,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y);return{minX:n,minY:l,maxX:h,maxY:p}}function p1e(s,n){return n-s}function g3(s,n,l,h,p){let y=[];for(let _=0;_<s.length;_++){let w=s[_],A;for(let P=0;P<w.length-1;P++){let M=w[P],R=w[P+1];M.x<n&&R.x<n||(M.x<n?M=new T(n,M.y+(n-M.x)/(R.x-M.x)*(R.y-M.y))._round():R.x<n&&(R=new T(n,M.y+(n-M.x)/(R.x-M.x)*(R.y-M.y))._round()),M.y<l&&R.y<l||(M.y<l?M=new T(M.x+(l-M.y)/(R.y-M.y)*(R.x-M.x),l)._round():R.y<l&&(R=new T(M.x+(l-M.y)/(R.y-M.y)*(R.x-M.x),l)._round()),M.x>=h&&R.x>=h||(M.x>=h?M=new T(h,M.y+(h-M.x)/(R.x-M.x)*(R.y-M.y))._round():R.x>=h&&(R=new T(h,M.y+(h-M.x)/(R.x-M.x)*(R.y-M.y))._round()),M.y>=p&&R.y>=p||(M.y>=p?M=new T(M.x+(p-M.y)/(R.y-M.y)*(R.x-M.x),p)._round():R.y>=p&&(R=new T(M.x+(p-M.y)/(R.y-M.y)*(R.x-M.x),p)._round()),A&&M.equals(A[A.length-1])||(A=[M],y.push(A)),A.push(R)))))}}return y}ot("FeatureIndex",p3,{omit:["rawTileData","sourceLayerCoder"]});class Ol extends T{constructor(n,l,h,p){super(n,l),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Ol(this.x,this.y,this.angle,this.segment)}}function y3(s,n,l,h,p){if(n.segment===void 0||l===0)return!0;let y=n,_=n.segment+1,w=0;for(;w>-l/2;){if(_--,_<0)return!1;w-=s[_].dist(y),y=s[_]}w+=s[_].dist(s[_+1]),_++;let A=[],P=0;for(;w<l/2;){let M=s[_],R=s[_+1];if(!R)return!1;let F=s[_-1].angleTo(M)-M.angleTo(R);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:w,angleDelta:F}),P+=F;w-A[0].distance>h;)P-=A.shift().angleDelta;if(P>p)return!1;_++,w+=M.dist(R)}return!0}function _3(s){let n=0;for(let l=0;l<s.length-1;l++)n+=s[l].dist(s[l+1]);return n}function x3(s,n,l){return s?.6*n*l:0}function b3(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function m1e(s,n,l,h,p,y){let _=x3(l,p,y),w=b3(l,h)*y,A=0,P=_3(s)/2;for(let M=0;M<s.length-1;M++){let R=s[M],F=s[M+1],U=R.dist(F);if(A+U>P){let V=(P-A)/U,W=qn.number(R.x,F.x,V),ee=qn.number(R.y,F.y,V),ne=new Ol(W,ee,F.angleTo(R),M);return ne._round(),!_||y3(s,ne,w,_,n)?ne:void 0}A+=U}}function v1e(s,n,l,h,p,y,_,w,A){let P=x3(h,y,_),M=b3(h,p),R=M*_,F=s[0].x===0||s[0].x===A||s[0].y===0||s[0].y===A;return n-R<n/4&&(n=R+n/4),w3(s,F?n/2*w%n:(M/2+2*y)*_*w%n,n,P,l,R,F,!1,A)}function w3(s,n,l,h,p,y,_,w,A){let P=y/2,M=_3(s),R=0,F=n-l,U=[];for(let V=0;V<s.length-1;V++){let W=s[V],ee=s[V+1],ne=W.dist(ee),xe=ee.angleTo(W);for(;F+l<R+ne;){F+=l;let ce=(F-R)/ne,ye=qn.number(W.x,ee.x,ce),Ee=qn.number(W.y,ee.y,ce);if(ye>=0&&ye<A&&Ee>=0&&Ee<A&&F-P>=0&&F+P<=M){let De=new Ol(ye,Ee,xe,V);De._round(),h&&!y3(s,De,y,h,p)||U.push(De)}}R+=ne}return w||U.length||_||(U=w3(s,R/2,l,h,p,y,_,!0,A)),U}ot("Anchor",Ol);let ad=Xn;function S3(s,n,l,h){let p=[],y=s.image,_=y.pixelRatio,w=y.paddedRect.w-2*ad,A=y.paddedRect.h-2*ad,P={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom},M=y.stretchX||[[0,w]],R=y.stretchY||[[0,A]],F=(Ie,mt)=>Ie+mt[1]-mt[0],U=M.reduce(F,0),V=R.reduce(F,0),W=w-U,ee=A-V,ne=0,xe=U,ce=0,ye=V,Ee=0,De=W,et=0,bt=ee;if(y.content&&h){let Ie=y.content,mt=Ie[2]-Ie[0],ht=Ie[3]-Ie[1];(y.textFitWidth||y.textFitHeight)&&(P=XB(s)),ne=ix(M,0,Ie[0]),ce=ix(R,0,Ie[1]),xe=ix(M,Ie[0],Ie[2]),ye=ix(R,Ie[1],Ie[3]),Ee=Ie[0]-ne,et=Ie[1]-ce,De=mt-xe,bt=ht-ye}let Je=P.x1,We=P.y1,dt=P.x2-Je,st=P.y2-We,nt=(Ie,mt,ht,It)=>{let xr=nx(Ie.stretch-ne,xe,dt,Je),gr=ax(Ie.fixed-Ee,De,Ie.stretch,U),Si=nx(mt.stretch-ce,ye,st,We),vo=ax(mt.fixed-et,bt,mt.stretch,V),$i=nx(ht.stretch-ne,xe,dt,Je),qi=ax(ht.fixed-Ee,De,ht.stretch,U),In=nx(It.stretch-ce,ye,st,We),Cn=ax(It.fixed-et,bt,It.stretch,V),Pn=new T(xr,Si),Qr=new T($i,Si),Ai=new T($i,In),ln=new T(xr,In),Wi=new T(gr/_,vo/_),Mn=new T(qi/_,Cn/_),Gi=n*Math.PI/180;if(Gi){let or=Math.sin(Gi),qr=Math.cos(Gi),kr=[qr,-or,or,qr];Pn._matMult(kr),Qr._matMult(kr),ln._matMult(kr),Ai._matMult(kr)}let Xa=Ie.stretch+Ie.fixed,Jn=mt.stretch+mt.fixed;return{tl:Pn,tr:Qr,bl:ln,br:Ai,tex:{x:y.paddedRect.x+ad+Xa,y:y.paddedRect.y+ad+Jn,w:ht.stretch+ht.fixed-Xa,h:It.stretch+It.fixed-Jn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wi,pixelOffsetBR:Mn,minFontScaleX:De/_/dt,minFontScaleY:bt/_/st,isSDF:l}};if(h&&(y.stretchX||y.stretchY)){let Ie=q3(M,W,U),mt=q3(R,ee,V);for(let ht=0;ht<Ie.length-1;ht++){let It=Ie[ht],xr=Ie[ht+1];for(let gr=0;gr<mt.length-1;gr++)p.push(nt(It,mt[gr],xr,mt[gr+1]))}}else p.push(nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:A+1}));return p}function ix(s,n,l){let h=0;for(let p of s)h+=Math.max(n,Math.min(l,p[1]))-Math.max(n,Math.min(l,p[0]));return h}function q3(s,n,l){let h=[{fixed:-ad,stretch:0}];for(let[p,y]of s){let _=h[h.length-1];h.push({fixed:p-_.stretch,stretch:_.stretch}),h.push({fixed:p-_.stretch,stretch:_.stretch+(y-p)})}return h.push({fixed:n+ad,stretch:l}),h}function nx(s,n,l,h){return s/n*l+h}function ax(s,n,l,h){return s-n*l/h}class ox{constructor(n,l,h,p,y,_,w,A,P,M){var R;if(this.boxStartIndex=n.length,P){let F=_.top,U=_.bottom,V=_.collisionPadding;V&&(F-=V[1],U+=V[3]);let W=U-F;W>0&&(W=Math.max(10,W),this.circleDiameter=W)}else{let F=!((R=_.image)===null||R===void 0)&&R.content&&(_.image.textFitWidth||_.image.textFitHeight)?XB(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};F.y1=F.y1*w-A[0],F.y2=F.y2*w+A[2],F.x1=F.x1*w-A[3],F.x2=F.x2*w+A[1];let U=_.collisionPadding;if(U&&(F.x1-=U[0]*w,F.y1-=U[1]*w,F.x2+=U[2]*w,F.y2+=U[3]*w),M){let V=new T(F.x1,F.y1),W=new T(F.x2,F.y1),ee=new T(F.x1,F.y2),ne=new T(F.x2,F.y2),xe=M*Math.PI/180;V._rotate(xe),W._rotate(xe),ee._rotate(xe),ne._rotate(xe),F.x1=Math.min(V.x,W.x,ee.x,ne.x),F.x2=Math.max(V.x,W.x,ee.x,ne.x),F.y1=Math.min(V.y,W.y,ee.y,ne.y),F.y2=Math.max(V.y,W.y,ee.y,ne.y)}n.emplaceBack(l.x,l.y,F.x1,F.y1,F.x2,F.y2,h,p,y)}this.boxEndIndex=n.length}}class g1e{constructor(n=[],l=(h,p)=>h<p?-1:h>p?1:0){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;let n=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){let{data:l,compare:h}=this,p=l[n];for(;n>0;){let y=n-1>>1,_=l[y];if(h(p,_)>=0)break;l[n]=_,n=y}l[n]=p}_down(n){let{data:l,compare:h}=this,p=this.length>>1,y=l[n];for(;n<p;){let _=1+(n<<1),w=_+1;if(w<this.length&&h(l[w],l[_])<0&&(_=w),h(l[_],y)>=0)break;l[n]=l[_],n=_}l[n]=y}}function y1e(s,n=1,l=!1){let h=1/0,p=1/0,y=-1/0,_=-1/0,w=s[0];for(let U=0;U<w.length;U++){let V=w[U];(!U||V.x<h)&&(h=V.x),(!U||V.y<p)&&(p=V.y),(!U||V.x>y)&&(y=V.x),(!U||V.y>_)&&(_=V.y)}let A=Math.min(y-h,_-p),P=A/2,M=new g1e([],_1e);if(A===0)return new T(h,p);for(let U=h;U<y;U+=A)for(let V=p;V<_;V+=A)M.push(new od(U+P,V+P,P,s));let R=function(U){let V=0,W=0,ee=0,ne=U[0];for(let xe=0,ce=ne.length,ye=ce-1;xe<ce;ye=xe++){let Ee=ne[xe],De=ne[ye],et=Ee.x*De.y-De.x*Ee.y;W+=(Ee.x+De.x)*et,ee+=(Ee.y+De.y)*et,V+=3*et}return new od(W/V,ee/V,0,U)}(s),F=M.length;for(;M.length;){let U=M.pop();(U.d>R.d||!R.d)&&(R=U,l&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,F)),U.max-R.d<=n||(P=U.h/2,M.push(new od(U.p.x-P,U.p.y-P,P,s)),M.push(new od(U.p.x+P,U.p.y-P,P,s)),M.push(new od(U.p.x-P,U.p.y+P,P,s)),M.push(new od(U.p.x+P,U.p.y+P,P,s)),F+=4)}return l&&(console.log(`num probes: ${F}`),console.log(`best distance: ${R.d}`)),R.p}function _1e(s,n){return n.max-s.max}function od(s,n,l,h){this.p=new T(s,n),this.h=l,this.d=function(p,y){let _=!1,w=1/0;for(let A=0;A<y.length;A++){let P=y[A];for(let M=0,R=P.length,F=R-1;M<R;F=M++){let U=P[M],V=P[F];U.y>p.y!=V.y>p.y&&p.x<(V.x-U.x)*(p.y-U.y)/(V.y-U.y)+U.x&&(_=!_),w=Math.min(w,sB(p,U,V))}}return(_?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Vi;u.aq=void 0,(Vi=u.aq||(u.aq={}))[Vi.center=1]="center",Vi[Vi.left=2]="left",Vi[Vi.right=3]="right",Vi[Vi.top=4]="top",Vi[Vi.bottom=5]="bottom",Vi[Vi["top-left"]=6]="top-left",Vi[Vi["top-right"]=7]="top-right",Vi[Vi["bottom-left"]=8]="bottom-left",Vi[Vi["bottom-right"]=9]="bottom-right";let kl=7,VE=Number.POSITIVE_INFINITY;function A3(s,n){return n[1]!==VE?function(l,h,p){let y=0,_=0;switch(h=Math.abs(h),p=Math.abs(p),l){case"top-right":case"top-left":case"top":_=p-kl;break;case"bottom-right":case"bottom-left":case"bottom":_=-p+kl;}switch(l){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h;}return[y,_]}(s,n[0],n[1]):function(l,h){let p=0,y=0;h<0&&(h=0);let _=h/Math.SQRT2;switch(l){case"top-right":case"top-left":y=_-kl;break;case"bottom-right":case"bottom-left":y=-_+kl;break;case"bottom":y=-h+kl;break;case"top":y=h-kl;}switch(l){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=h;break;case"right":p=-h;}return[p,y]}(s,n[0])}function E3(s,n,l){var h;let p=s.layout,y=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},l);if(y){let w=y.values,A=[];for(let P=0;P<w.length;P+=2){let M=A[P]=w[P],R=w[P+1].map(F=>F*vi);M.startsWith("top")?R[1]-=kl:M.startsWith("bottom")&&(R[1]+=kl),A[P+1]=R}return new ua(A)}let _=p.get("text-variable-anchor");if(_){let w;w=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},l)*vi,VE]:p.get("text-offset").evaluate(n,{},l).map(P=>P*vi);let A=[];for(let P of _)A.push(P,A3(P,w));return new ua(A)}return null}function $E(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function x1e(s,n,l,h,p,y,_,w,A,P,M){let R=y.textMaxSize.evaluate(n,{});R===void 0&&(R=_);let F=s.layers[0].layout,U=F.get("icon-offset").evaluate(n,{},M),V=I3(l.horizontal),W=_/24,ee=s.tilePixelRatio*W,ne=s.tilePixelRatio*R/24,xe=s.tilePixelRatio*w,ce=s.tilePixelRatio*F.get("symbol-spacing"),ye=F.get("text-padding")*s.tilePixelRatio,Ee=function(Ie,mt,ht,It=1){let xr=Ie.get("icon-padding").evaluate(mt,{},ht),gr=xr&&xr.values;return[gr[0]*It,gr[1]*It,gr[2]*It,gr[3]*It]}(F,n,M,s.tilePixelRatio),De=F.get("text-max-angle")/180*Math.PI,et=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",bt=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",Je=F.get("symbol-placement"),We=ce/2,dt=F.get("icon-text-fit"),st;h&&dt!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(st=JB(h,l.vertical,dt,F.get("icon-text-fit-padding"),U,W)),V&&(h=JB(h,V,dt,F.get("icon-text-fit-padding"),U,W)));let nt=(Ie,mt)=>{mt.x<0||mt.x>=ci||mt.y<0||mt.y>=ci||function(ht,It,xr,gr,Si,vo,$i,qi,In,Cn,Pn,Qr,Ai,ln,Wi,Mn,Gi,Xa,Jn,or,qr,kr,ma,Wr,sd){let Ss=ht.addToLineVertexArray(It,xr),qs,go,Ja,ki,_u=0,wv=0,O3=0,k3=0,YE=-1,QE=-1,xu={},R3=Kf("");if(ht.allowVerticalPlacement&&gr.vertical){let cn=qi.layout.get("text-rotate").evaluate(qr,{},Wr)+90;Ja=new ox(In,It,Cn,Pn,Qr,gr.vertical,Ai,ln,Wi,cn),$i&&(ki=new ox(In,It,Cn,Pn,Qr,$i,Gi,Xa,Wi,cn))}if(Si){let cn=qi.layout.get("icon-rotate").evaluate(qr,{}),Ya=qi.layout.get("icon-text-fit")!=="none",lh=S3(Si,cn,ma,Ya),Jo=$i?S3($i,cn,ma,Ya):void 0;go=new ox(In,It,Cn,Pn,Qr,Si,Gi,Xa,!1,cn),_u=4*lh.length;let ch=ht.iconSizeData,As=null;ch.kind==="source"?(As=[ws*qi.layout.get("icon-size").evaluate(qr,{})],As[0]>Pl&&Lr(`${ht.layerIds[0]}: Value for "icon-size" is >= ${gv}. Reduce your "icon-size".`)):ch.kind==="composite"&&(As=[ws*kr.compositeIconSizes[0].evaluate(qr,{},Wr),ws*kr.compositeIconSizes[1].evaluate(qr,{},Wr)],(As[0]>Pl||As[1]>Pl)&&Lr(`${ht.layerIds[0]}: Value for "icon-size" is >= ${gv}. Reduce your "icon-size".`)),ht.addSymbols(ht.icon,lh,As,or,Jn,qr,u.ah.none,It,Ss.lineStartIndex,Ss.lineLength,-1,Wr),YE=ht.icon.placedSymbolArray.length-1,Jo&&(wv=4*Jo.length,ht.addSymbols(ht.icon,Jo,As,or,Jn,qr,u.ah.vertical,It,Ss.lineStartIndex,Ss.lineLength,-1,Wr),QE=ht.icon.placedSymbolArray.length-1)}let D3=Object.keys(gr.horizontal);for(let cn of D3){let Ya=gr.horizontal[cn];if(!qs){R3=Kf(Ya.text);let Jo=qi.layout.get("text-rotate").evaluate(qr,{},Wr);qs=new ox(In,It,Cn,Pn,Qr,Ya,Ai,ln,Wi,Jo)}let lh=Ya.positionedLines.length===1;if(O3+=T3(ht,It,Ya,vo,qi,Wi,qr,Mn,Ss,gr.vertical?u.ah.horizontal:u.ah.horizontalOnly,lh?D3:[cn],xu,YE,kr,Wr),lh)break}gr.vertical&&(k3+=T3(ht,It,gr.vertical,vo,qi,Wi,qr,Mn,Ss,u.ah.vertical,["vertical"],xu,QE,kr,Wr));let S1e=qs?qs.boxStartIndex:ht.collisionBoxArray.length,q1e=qs?qs.boxEndIndex:ht.collisionBoxArray.length,A1e=Ja?Ja.boxStartIndex:ht.collisionBoxArray.length,E1e=Ja?Ja.boxEndIndex:ht.collisionBoxArray.length,T1e=go?go.boxStartIndex:ht.collisionBoxArray.length,I1e=go?go.boxEndIndex:ht.collisionBoxArray.length,C1e=ki?ki.boxStartIndex:ht.collisionBoxArray.length,P1e=ki?ki.boxEndIndex:ht.collisionBoxArray.length,Xo=-1,ux=(cn,Ya)=>cn&&cn.circleDiameter?Math.max(cn.circleDiameter,Ya):Ya;Xo=ux(qs,Xo),Xo=ux(Ja,Xo),Xo=ux(go,Xo),Xo=ux(ki,Xo);let L3=Xo>-1?1:0;L3&&(Xo*=sd/vi),ht.glyphOffsetArray.length>=nd.MAX_GLYPHS&&Lr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qr.sortKey!==void 0&&ht.addToSortKeyRanges(ht.symbolInstances.length,qr.sortKey);let M1e=E3(qi,qr,Wr),[O1e,k1e]=function(cn,Ya){let lh=cn.length,Jo=Ya==null?void 0:Ya.values;if((Jo==null?void 0:Jo.length)>0)for(let ch=0;ch<Jo.length;ch+=2){let As=Jo[ch+1];cn.emplaceBack(u.aq[Jo[ch]],As[0],As[1])}return[lh,cn.length]}(ht.textAnchorOffsets,M1e);ht.symbolInstances.emplaceBack(It.x,It.y,xu.right>=0?xu.right:-1,xu.center>=0?xu.center:-1,xu.left>=0?xu.left:-1,xu.vertical||-1,YE,QE,R3,S1e,q1e,A1e,E1e,T1e,I1e,C1e,P1e,Cn,O3,k3,_u,wv,L3,0,Ai,Xo,O1e,k1e)}(s,mt,Ie,l,h,p,st,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,ee,[ye,ye,ye,ye],et,A,xe,Ee,bt,U,n,y,P,M,_)};if(Je==="line")for(let Ie of g3(n.geometry,0,0,ci,ci)){let mt=v1e(Ie,ce,De,l.vertical||V,h,24,ne,s.overscaling,ci);for(let ht of mt)V&&b1e(s,V.text,We,ht)||nt(Ie,ht)}else if(Je==="line-center"){for(let Ie of n.geometry)if(Ie.length>1){let mt=m1e(Ie,De,l.vertical||V,h,24,ne);mt&&nt(Ie,mt)}}else if(n.type==="Polygon")for(let Ie of Sf(n.geometry,0)){let mt=y1e(Ie,16);nt(Ie[0],new Ol(mt.x,mt.y,0))}else if(n.type==="LineString")for(let Ie of n.geometry)nt(Ie,new Ol(Ie[0].x,Ie[0].y,0));else if(n.type==="Point")for(let Ie of n.geometry)for(let mt of Ie)nt([mt],new Ol(mt.x,mt.y,0))}function T3(s,n,l,h,p,y,_,w,A,P,M,R,F,U,V){let W=function(xe,ce,ye,Ee,De,et,bt,Je){let We=Ee.layout.get("text-rotate").evaluate(et,{})*Math.PI/180,dt=[];for(let st of ce.positionedLines)for(let nt of st.positionedGlyphs){if(!nt.rect)continue;let Ie=nt.rect||{},mt=VB+1,ht=!0,It=1,xr=0,gr=(De||Je)&&nt.vertical,Si=nt.metrics.advance*nt.scale/2;if(Je&&ce.verticalizable&&(xr=st.lineOffset/2-(nt.imageName?-(vi-nt.metrics.width*nt.scale)/2:(nt.scale-1)*vi)),nt.imageName){let or=bt[nt.imageName];ht=or.sdf,It=or.pixelRatio,mt=Xn/It}let vo=De?[nt.x+Si,nt.y]:[0,0],$i=De?[0,0]:[nt.x+Si+ye[0],nt.y+ye[1]-xr],qi=[0,0];gr&&(qi=$i,$i=[0,0]);let In=nt.metrics.isDoubleResolution?2:1,Cn=(nt.metrics.left-mt)*nt.scale-Si+$i[0],Pn=(-nt.metrics.top-mt)*nt.scale+$i[1],Qr=Cn+Ie.w/In*nt.scale/It,Ai=Pn+Ie.h/In*nt.scale/It,ln=new T(Cn,Pn),Wi=new T(Qr,Pn),Mn=new T(Cn,Ai),Gi=new T(Qr,Ai);if(gr){let or=new T(-Si,Si-mv),qr=-Math.PI/2,kr=vi/2-Si,ma=new T(5-mv-kr,-(nt.imageName?kr:0)),Wr=new T(...qi);ln._rotateAround(qr,or)._add(ma)._add(Wr),Wi._rotateAround(qr,or)._add(ma)._add(Wr),Mn._rotateAround(qr,or)._add(ma)._add(Wr),Gi._rotateAround(qr,or)._add(ma)._add(Wr)}if(We){let or=Math.sin(We),qr=Math.cos(We),kr=[qr,-or,or,qr];ln._matMult(kr),Wi._matMult(kr),Mn._matMult(kr),Gi._matMult(kr)}let Xa=new T(0,0),Jn=new T(0,0);dt.push({tl:ln,tr:Wi,bl:Mn,br:Gi,tex:Ie,writingMode:ce.writingMode,glyphOffset:vo,sectionIndex:nt.sectionIndex,isSDF:ht,pixelOffsetTL:Xa,pixelOffsetBR:Jn,minFontScaleX:0,minFontScaleY:0})}return dt}(0,l,w,p,y,_,h,s.allowVerticalPlacement),ee=s.textSizeData,ne=null;ee.kind==="source"?(ne=[ws*p.layout.get("text-size").evaluate(_,{})],ne[0]>Pl&&Lr(`${s.layerIds[0]}: Value for "text-size" is >= ${gv}. Reduce your "text-size".`)):ee.kind==="composite"&&(ne=[ws*U.compositeTextSizes[0].evaluate(_,{},V),ws*U.compositeTextSizes[1].evaluate(_,{},V)],(ne[0]>Pl||ne[1]>Pl)&&Lr(`${s.layerIds[0]}: Value for "text-size" is >= ${gv}. Reduce your "text-size".`)),s.addSymbols(s.text,W,ne,w,y,_,P,n,A.lineStartIndex,A.lineLength,F,V);for(let xe of M)R[xe]=s.text.placedSymbolArray.length-1;return 4*W.length}function I3(s){for(let n in s)return s[n];return null}function b1e(s,n,l,h){let p=s.compareText;if(n in p){let y=p[n];for(let _=y.length-1;_>=0;_--)if(h.dist(y[_])<l)return!0}else p[n]=[];return p[n].push(h),!1}let C3=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class WE{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[l,h]=new Uint8Array(n,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");let p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);let y=C3[15&h];if(!y)throw new Error("Unrecognized array type.");let[_]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new WE(w,_,y,n)}constructor(n,l=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;let y=C3.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-w%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+A,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+w+A),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+A,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=n)}add(n,l){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=l,h}finish(){let n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return GE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,l,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:y,coords:_,nodeSize:w}=this,A=[0,y.length-1,0],P=[];for(;A.length;){let M=A.pop()||0,R=A.pop()||0,F=A.pop()||0;if(R-F<=w){for(let ee=F;ee<=R;ee++){let ne=_[2*ee],xe=_[2*ee+1];ne>=n&&ne<=h&&xe>=l&&xe<=p&&P.push(y[ee])}continue}let U=F+R>>1,V=_[2*U],W=_[2*U+1];V>=n&&V<=h&&W>=l&&W<=p&&P.push(y[U]),(M===0?n<=V:l<=W)&&(A.push(F),A.push(U-1),A.push(1-M)),(M===0?h>=V:p>=W)&&(A.push(U+1),A.push(R),A.push(1-M))}return P}within(n,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:p,coords:y,nodeSize:_}=this,w=[0,p.length-1,0],A=[],P=h*h;for(;w.length;){let M=w.pop()||0,R=w.pop()||0,F=w.pop()||0;if(R-F<=_){for(let ee=F;ee<=R;ee++)M3(y[2*ee],y[2*ee+1],n,l)<=P&&A.push(p[ee]);continue}let U=F+R>>1,V=y[2*U],W=y[2*U+1];M3(V,W,n,l)<=P&&A.push(p[U]),(M===0?n-h<=V:l-h<=W)&&(w.push(F),w.push(U-1),w.push(1-M)),(M===0?n+h>=V:l+h>=W)&&(w.push(U+1),w.push(R),w.push(1-M))}return A}}function GE(s,n,l,h,p,y){if(p-h<=l)return;let _=h+p>>1;P3(s,n,_,h,p,y),GE(s,n,l,h,_-1,1-y),GE(s,n,l,_+1,p,1-y)}function P3(s,n,l,h,p,y){for(;p>h;){if(p-h>600){let P=p-h+1,M=l-h+1,R=Math.log(P),F=.5*Math.exp(2*R/3),U=.5*Math.sqrt(R*F*(P-F)/P)*(M-P/2<0?-1:1);P3(s,n,l,Math.max(h,Math.floor(l-M*F/P+U)),Math.min(p,Math.floor(l+(P-M)*F/P+U)),y)}let _=n[2*l+y],w=h,A=p;for(xv(s,n,h,l),n[2*p+y]>_&&xv(s,n,h,p);w<A;){for(xv(s,n,w,A),w++,A--;n[2*w+y]<_;)w++;for(;n[2*A+y]>_;)A--}n[2*h+y]===_?xv(s,n,h,A):(A++,xv(s,n,A,p)),A<=l&&(h=A+1),l<=A&&(p=A-1)}}function xv(s,n,l,h){KE(s,l,h),KE(n,2*l,2*h),KE(n,2*l+1,2*h+1)}function KE(s,n,l){let h=s[n];s[n]=s[l],s[l]=h}function M3(s,n,l,h){let p=s-l,y=n-h;return p*p+y*y}var HE;u.bg=void 0,(HE=u.bg||(u.bg={})).create="create",HE.load="load",HE.fullLoad="fullLoad";let sx=null,bv=[],ZE=1e3/60,XE="loadTime",JE="fullLoadTime",w1e={mark(s){performance.mark(s)},frame(s){let n=s;sx!=null&&bv.push(n-sx),sx=n},clearMetrics(){sx=null,bv=[],performance.clearMeasures(XE),performance.clearMeasures(JE);for(let s in u.bg)performance.clearMarks(u.bg[s])},getPerformanceMetrics(){performance.measure(XE,u.bg.create,u.bg.load),performance.measure(JE,u.bg.create,u.bg.fullLoad);let s=performance.getEntriesByName(XE)[0].duration,n=performance.getEntriesByName(JE)[0].duration,l=bv.length,h=1/(bv.reduce((y,_)=>y+_,0)/l/1e3),p=bv.filter(y=>y>ZE).reduce((y,_)=>y+(_-ZE)/ZE,0);return{loadTime:s,fullLoadTime:n,fps:h,percentDroppedFrames:p/(l+p)*100,totalFrames:l}}};u.$=class extends D{},u.A=Yf,u.B=aE,u.C=function(s){if(wr==null){let n=s.navigator?s.navigator.userAgent:null;wr=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return wr},u.D=lt,u.E=Wo,u.F=class{constructor(s,n){this.target=s,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new d1e(()=>this.process()),this.subscription=function(l,h,p,y){return l.addEventListener(h,p,!1),{unsubscribe:()=>{l.removeEventListener(h,p,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=Lt(self)?s:window}registerMessageHandler(s,n){this.messageHandlers[s]=n}sendAsync(s,n){return new Promise((l,h)=>{let p=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[p]={resolve:l,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[p];let w={id:p,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});let y=[],_=Object.assign(Object.assign({},s),{id:p,sourceMapId:this.mapId,origin:location.origin,data:yl(s.data,y)});this.target.postMessage(_,{transfer:y})})}receive(s){let n=s.data,l=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[l];let h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(Lt(self)||n.mustQueue)return this.tasks[l]=n,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,n)}}process(){if(this.taskQueue.length===0)return;let s=this.taskQueue.shift(),n=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(s,n)}processTask(s,n){return a(this,void 0,void 0,function*(){if(n.type==="<response>"){let p=this.resolveRejects[s];return delete this.resolveRejects[s],p?void(n.error?p.reject(_l(n.error)):p.resolve(_l(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let l=_l(n.data),h=new AbortController;this.abortControllers[s]=h;try{let p=yield this.messageHandlers[n.type](n.sourceMapId,l,h);this.completeTask(s,null,p)}catch(p){this.completeTask(s,p)}})}completeTask(s,n,l){let h=[];delete this.abortControllers[s];let p={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?yl(n):null,data:yl(l,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.G=$o,u.H=function(){var s=new Yf(16);return Yf!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},u.I=OE,u.J=function(s,n,l){var h,p,y,_,w,A,P,M,R,F,U,V,W=l[0],ee=l[1],ne=l[2];return n===s?(s[12]=n[0]*W+n[4]*ee+n[8]*ne+n[12],s[13]=n[1]*W+n[5]*ee+n[9]*ne+n[13],s[14]=n[2]*W+n[6]*ee+n[10]*ne+n[14],s[15]=n[3]*W+n[7]*ee+n[11]*ne+n[15]):(p=n[1],y=n[2],_=n[3],w=n[4],A=n[5],P=n[6],M=n[7],R=n[8],F=n[9],U=n[10],V=n[11],s[0]=h=n[0],s[1]=p,s[2]=y,s[3]=_,s[4]=w,s[5]=A,s[6]=P,s[7]=M,s[8]=R,s[9]=F,s[10]=U,s[11]=V,s[12]=h*W+w*ee+R*ne+n[12],s[13]=p*W+A*ee+F*ne+n[13],s[14]=y*W+P*ee+U*ne+n[14],s[15]=_*W+M*ee+V*ne+n[15]),s},u.K=function(s,n,l){var h=l[0],p=l[1],y=l[2];return s[0]=n[0]*h,s[1]=n[1]*h,s[2]=n[2]*h,s[3]=n[3]*h,s[4]=n[4]*p,s[5]=n[5]*p,s[6]=n[6]*p,s[7]=n[7]*p,s[8]=n[8]*y,s[9]=n[9]*y,s[10]=n[10]*y,s[11]=n[11]*y,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},u.L=hB,u.M=function(s,n){let l={};for(let h=0;h<n.length;h++){let p=n[h];p in s&&(l[p]=s[p])}return l},u.N=Ml,u.O=o3,u.P=T,u.Q=s3,u.R=Ha,u.S=Za,u.T=jf,u.U=pe,u.V=Z,u.W=Tr,u.X=ci,u.Y=S,u.Z=yv,u._=a,u.a=Fa,u.a$=function(s,n){var l=s[0],h=s[1],p=s[2],y=s[3],_=s[4],w=s[5],A=s[6],P=s[7],M=s[8],R=s[9],F=s[10],U=s[11],V=s[12],W=s[13],ee=s[14],ne=s[15],xe=n[0],ce=n[1],ye=n[2],Ee=n[3],De=n[4],et=n[5],bt=n[6],Je=n[7],We=n[8],dt=n[9],st=n[10],nt=n[11],Ie=n[12],mt=n[13],ht=n[14],It=n[15];return Math.abs(l-xe)<=Tn*Math.max(1,Math.abs(l),Math.abs(xe))&&Math.abs(h-ce)<=Tn*Math.max(1,Math.abs(h),Math.abs(ce))&&Math.abs(p-ye)<=Tn*Math.max(1,Math.abs(p),Math.abs(ye))&&Math.abs(y-Ee)<=Tn*Math.max(1,Math.abs(y),Math.abs(Ee))&&Math.abs(_-De)<=Tn*Math.max(1,Math.abs(_),Math.abs(De))&&Math.abs(w-et)<=Tn*Math.max(1,Math.abs(w),Math.abs(et))&&Math.abs(A-bt)<=Tn*Math.max(1,Math.abs(A),Math.abs(bt))&&Math.abs(P-Je)<=Tn*Math.max(1,Math.abs(P),Math.abs(Je))&&Math.abs(M-We)<=Tn*Math.max(1,Math.abs(M),Math.abs(We))&&Math.abs(R-dt)<=Tn*Math.max(1,Math.abs(R),Math.abs(dt))&&Math.abs(F-st)<=Tn*Math.max(1,Math.abs(F),Math.abs(st))&&Math.abs(U-nt)<=Tn*Math.max(1,Math.abs(U),Math.abs(nt))&&Math.abs(V-Ie)<=Tn*Math.max(1,Math.abs(V),Math.abs(Ie))&&Math.abs(W-mt)<=Tn*Math.max(1,Math.abs(W),Math.abs(mt))&&Math.abs(ee-ht)<=Tn*Math.max(1,Math.abs(ee),Math.abs(ht))&&Math.abs(ne-It)<=Tn*Math.max(1,Math.abs(ne),Math.abs(It))},u.a0=Yt,u.a1=jE,u.a2=Pe,u.a3=s=>{let n=window.document.createElement("video");return n.muted=!0,new Promise(l=>{n.onloadstart=()=>{l(n)};for(let h of s){let p=window.document.createElement("source");za(h)||(n.crossOrigin="Anonymous"),p.src=h,n.appendChild(p)}})},u.a4=function(){return Oe++},u.a5=Ye,u.a6=nd,u.a7=zm,u.a8=sh,u.a9=d3,u.aA=function(s){if(s.type==="custom")return new f1e(s);switch(s.type){case"background":return new l1e(s);case"circle":return new Xxe(s);case"fill":return new dbe(s);case"fill-extrusion":return new Ibe(s);case"heatmap":return new Yxe(s);case"hillshade":return new ebe(s);case"line":return new Lbe(s);case"raster":return new h1e(s);case"symbol":return new rx(s);}},u.aB=He,u.aC=function(s,n){if(!s)return[{command:"setStyle",args:[n]}];let l=[];try{if(!nr(s.version,n.version))return[{command:"setStyle",args:[n]}];nr(s.center,n.center)||l.push({command:"setCenter",args:[n.center]}),nr(s.zoom,n.zoom)||l.push({command:"setZoom",args:[n.zoom]}),nr(s.bearing,n.bearing)||l.push({command:"setBearing",args:[n.bearing]}),nr(s.pitch,n.pitch)||l.push({command:"setPitch",args:[n.pitch]}),nr(s.sprite,n.sprite)||l.push({command:"setSprite",args:[n.sprite]}),nr(s.glyphs,n.glyphs)||l.push({command:"setGlyphs",args:[n.glyphs]}),nr(s.transition,n.transition)||l.push({command:"setTransition",args:[n.transition]}),nr(s.light,n.light)||l.push({command:"setLight",args:[n.light]}),nr(s.terrain,n.terrain)||l.push({command:"setTerrain",args:[n.terrain]}),nr(s.sky,n.sky)||l.push({command:"setSky",args:[n.sky]}),nr(s.projection,n.projection)||l.push({command:"setProjection",args:[n.projection]});let h={},p=[];(function(_,w,A,P){let M;for(M in w=w||{},_=_||{})Object.prototype.hasOwnProperty.call(_,M)&&(Object.prototype.hasOwnProperty.call(w,M)||Ce(M,A,P));for(M in w)Object.prototype.hasOwnProperty.call(w,M)&&(Object.prototype.hasOwnProperty.call(_,M)?nr(_[M],w[M])||(_[M].type==="geojson"&&w[M].type==="geojson"&&rt(_,w,M)?ue(A,{command:"setGeoJSONSourceData",args:[M,w[M].data]}):ut(M,w,A,P)):qe(M,w,A))})(s.sources,n.sources,p,h);let y=[];s.layers&&s.layers.forEach(_=>{"source"in _&&h[_.source]?l.push({command:"removeLayer",args:[_.id]}):y.push(_)}),l=l.concat(p),function(_,w,A){w=w||[];let P=(_=_||[]).map(At),M=w.map(At),R=_.reduce(Ct,{}),F=w.reduce(Ct,{}),U=P.slice(),V=Object.create(null),W,ee,ne,xe,ce;for(let ye=0,Ee=0;ye<P.length;ye++)W=P[ye],Object.prototype.hasOwnProperty.call(F,W)?Ee++:(ue(A,{command:"removeLayer",args:[W]}),U.splice(U.indexOf(W,Ee),1));for(let ye=0,Ee=0;ye<M.length;ye++)W=M[M.length-1-ye],U[U.length-1-ye]!==W&&(Object.prototype.hasOwnProperty.call(R,W)?(ue(A,{command:"removeLayer",args:[W]}),U.splice(U.lastIndexOf(W,U.length-Ee),1)):Ee++,xe=U[U.length-ye],ue(A,{command:"addLayer",args:[F[W],xe]}),U.splice(U.length-ye,0,W),V[W]=!0);for(let ye=0;ye<M.length;ye++)if(W=M[ye],ee=R[W],ne=F[W],!V[W]&&!nr(ee,ne))if(nr(ee.source,ne.source)&&nr(ee["source-layer"],ne["source-layer"])&&nr(ee.type,ne.type)){for(ce in Be(ee.layout,ne.layout,A,W,null,"setLayoutProperty"),Be(ee.paint,ne.paint,A,W,null,"setPaintProperty"),nr(ee.filter,ne.filter)||ue(A,{command:"setFilter",args:[W,ne.filter]}),nr(ee.minzoom,ne.minzoom)&&nr(ee.maxzoom,ne.maxzoom)||ue(A,{command:"setLayerZoomRange",args:[W,ne.minzoom,ne.maxzoom]}),ee)Object.prototype.hasOwnProperty.call(ee,ce)&&ce!=="layout"&&ce!=="paint"&&ce!=="filter"&&ce!=="metadata"&&ce!=="minzoom"&&ce!=="maxzoom"&&(ce.indexOf("paint.")===0?Be(ee[ce],ne[ce],A,W,ce.slice(6),"setPaintProperty"):nr(ee[ce],ne[ce])||ue(A,{command:"setLayerProperty",args:[W,ce,ne[ce]]}));for(ce in ne)Object.prototype.hasOwnProperty.call(ne,ce)&&!Object.prototype.hasOwnProperty.call(ee,ce)&&ce!=="layout"&&ce!=="paint"&&ce!=="filter"&&ce!=="metadata"&&ce!=="minzoom"&&ce!=="maxzoom"&&(ce.indexOf("paint.")===0?Be(ee[ce],ne[ce],A,W,ce.slice(6),"setPaintProperty"):nr(ee[ce],ne[ce])||ue(A,{command:"setLayerProperty",args:[W,ce,ne[ce]]}))}else ue(A,{command:"removeLayer",args:[W]}),xe=U[U.lastIndexOf(W)+1],ue(A,{command:"addLayer",args:[ne,xe]})}(y,n.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[n]}]}return l},u.aD=function(s){let n=[],l=s.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},u.aE=function s(n,l){if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(let h=0;h<n.length;h++)if(!s(n[h],l[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&l!==null){if(typeof l!="object"||Object.keys(n).length!==Object.keys(l).length)return!1;for(let h in n)if(!s(n[h],l[h]))return!1;return!0}return n===l},u.aF=Ze,u.aG=ft,u.aH=class extends nh{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},u.aI=V0,u.aJ=class extends nh{constructor(s,n){super(s,n),this.current=jxe}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},u.aK=eB,u.aL=tB,u.aM=dr,u.aN=class extends nh{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},u.aO=class extends nh{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},u.aP=function(s,n,l,h,p,y,_){var w=1/(n-l),A=1/(h-p),P=1/(y-_);return s[0]=-2*w,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*A,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*P,s[11]=0,s[12]=(n+l)*w,s[13]=(p+h)*A,s[14]=(_+y)*P,s[15]=1,s},u.aQ=Zxe,u.aR=class extends fe{},u.aS=Bbe,u.aT=class extends we{},u.aU=xE,u.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},u.aW=vB,u.aX=Ui,u.aY=Ka,u.aZ=class extends ct{},u.a_=function(s,n){return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]&&s[3]===n[3]&&s[4]===n[4]&&s[5]===n[5]&&s[6]===n[6]&&s[7]===n[7]&&s[8]===n[8]&&s[9]===n[9]&&s[10]===n[10]&&s[11]===n[11]&&s[12]===n[12]&&s[13]===n[13]&&s[14]===n[14]&&s[15]===n[15]},u.aa=function(s){let n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,p,y)=>{let _=p||y;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){let l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n},u.ab=function(s,n){let l=[];for(let h in s)h in n||l.push(h);return l},u.ac=ve,u.ad=function(s,n,l){var h=Math.sin(l),p=Math.cos(l),y=n[0],_=n[1],w=n[2],A=n[3],P=n[4],M=n[5],R=n[6],F=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=y*p+P*h,s[1]=_*p+M*h,s[2]=w*p+R*h,s[3]=A*p+F*h,s[4]=P*p-y*h,s[5]=M*p-_*h,s[6]=R*p-w*h,s[7]=F*p-A*h,s},u.ae=function(s){var n=new Yf(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},u.af=K0,u.ag=function(s,n){let l=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){let{interpolationType:p,minZoom:y,maxZoom:_}=s,w=p?ve(An.interpolationFactor(p,n,y,_),0,1):0;s.kind==="camera"?h=qn.number(s.minSize,s.maxSize,w):l=w}return{uSizeT:l,uSize:h}},u.ai=function(s,{uSize:n,uSizeT:l},{lowerSize:h,upperSize:p}){return s.kind==="source"?h/ws:s.kind==="composite"?qn.number(h/ws,p/ws,l):n},u.aj=LE,u.ak=function(s,n,l,h){let p=n.y-s.y,y=n.x-s.x,_=h.y-l.y,w=h.x-l.x,A=_*y-w*p;if(A===0)return null;let P=(w*(s.y-l.y)-_*(s.x-l.x))/A;return new T(s.x+P*y,s.y+P*p)},u.al=g3,u.am=aB,u.an=gE,u.ao=function(s){let n=1/0,l=1/0,h=-1/0,p=-1/0;for(let y of s)n=Math.min(n,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y);return[n,l,h,p]},u.ap=vi,u.ar=DE,u.as=function(s,n){var l=n[0],h=n[1],p=n[2],y=n[3],_=n[4],w=n[5],A=n[6],P=n[7],M=n[8],R=n[9],F=n[10],U=n[11],V=n[12],W=n[13],ee=n[14],ne=n[15],xe=l*w-h*_,ce=l*A-p*_,ye=l*P-y*_,Ee=h*A-p*w,De=h*P-y*w,et=p*P-y*A,bt=M*W-R*V,Je=M*ee-F*V,We=M*ne-U*V,dt=R*ee-F*W,st=R*ne-U*W,nt=F*ne-U*ee,Ie=xe*nt-ce*st+ye*dt+Ee*We-De*Je+et*bt;return Ie?(s[0]=(w*nt-A*st+P*dt)*(Ie=1/Ie),s[1]=(p*st-h*nt-y*dt)*Ie,s[2]=(W*et-ee*De+ne*Ee)*Ie,s[3]=(F*De-R*et-U*Ee)*Ie,s[4]=(A*We-_*nt-P*Je)*Ie,s[5]=(l*nt-p*We+y*Je)*Ie,s[6]=(ee*ye-V*et-ne*ce)*Ie,s[7]=(M*et-F*ye+U*ce)*Ie,s[8]=(_*st-w*We+P*bt)*Ie,s[9]=(h*We-l*st-y*bt)*Ie,s[10]=(V*De-W*ye+ne*xe)*Ie,s[11]=(R*ye-M*De-U*xe)*Ie,s[12]=(w*Je-_*dt-A*bt)*Ie,s[13]=(l*dt-h*Je+p*bt)*Ie,s[14]=(W*ce-V*Ee-ee*xe)*Ie,s[15]=(M*Ee-R*ce+F*xe)*Ie,s):null},u.at=$E,u.au=RE,u.av=WE,u.aw=function(){let s={},n=Ae.$version;for(let l in Ae.$root){let h=Ae.$root[l];if(h.required){let p=null;p=l==="version"?n:h.type==="array"?[]:{},p!=null&&(s[l]=p)}}return s},u.ax=Ym,u.ay=rn,u.az=function(s){s=s.slice();let n=Object.create(null);for(let l=0;l<s.length;l++)n[s[l].id]=s[l];for(let l=0;l<s.length;l++)"ref"in s[l]&&(s[l]=Qu(s[l],n[s[l].ref]));return s},u.b=hr,u.b0=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},u.b1=function(s,n,l){return s[0]=n[0]*l[0],s[1]=n[1]*l[1],s[2]=n[2]*l[2],s[3]=n[3]*l[3],s},u.b2=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]},u.b3=be,u.b4=c3,u.b5=u3,u.b6=function(s,n,l,h,p){var y,_=1/Math.tan(n/2);return s[0]=_/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=_,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,p!=null&&p!==1/0?(s[10]=(p+h)*(y=1/(h-p)),s[14]=2*p*h*y):(s[10]=-1,s[14]=-2*h),s},u.b7=function(s,n,l){var h=Math.sin(l),p=Math.cos(l),y=n[4],_=n[5],w=n[6],A=n[7],P=n[8],M=n[9],R=n[10],F=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=y*p+P*h,s[5]=_*p+M*h,s[6]=w*p+R*h,s[7]=A*p+F*h,s[8]=P*p-y*h,s[9]=M*p-_*h,s[10]=R*p-w*h,s[11]=F*p-A*h,s},u.b8=H,u.b9=J,u.bA=LB,u.bB=function(s){return s.message===Pi},u.bC=hl,u.bD=Hn,u.ba=function(s){return s*Math.PI/180},u.bb=function(s,n){let{x:l,y:h}=yv.fromLngLat(n);return!(s<0||s>25||h<0||h>=1||l<0||l>=1)},u.bc=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},u.bd=class extends O{},u.be=BE,u.bf=w1e,u.bh=tn,u.bi=function(s,n){Fa.REGISTERED_PROTOCOLS[s]=n},u.bj=function(s){delete Fa.REGISTERED_PROTOCOLS[s]},u.bk=function(s,n){let l={};for(let p=0;p<s.length;p++){let y=n&&n[s[p].id]||M0(s[p]);n&&(n[s[p].id]=y);let _=l[y];_||(_=l[y]=[]),_.push(s[p])}let h=[];for(let p in l)h.push(l[p]);return h},u.bl=ot,u.bm=f3,u.bn=p3,u.bo=WB,u.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=ci/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;let n=s.bucket.layers[0],l=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new Cr(s.bucket.zoom+1),s.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Cr(s.bucket.zoom+1),s.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Cr(18))};if(s.bucket.textSizeData.kind==="composite"){let{minZoom:P,maxZoom:M}=s.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Cr(P),s.canonical),h["text-size"].possiblyEvaluate(new Cr(M),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){let{minZoom:P,maxZoom:M}=s.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Cr(P),s.canonical),h["icon-size"].possiblyEvaluate(new Cr(M),s.canonical)]}let y=l.get("text-line-height")*vi,_=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",w=l.get("text-keep-upright"),A=l.get("text-size");for(let P of s.bucket.features){let M=l.get("text-font").evaluate(P,{},s.canonical).join(","),R=A.evaluate(P,{},s.canonical),F=p.layoutTextSize.evaluate(P,{},s.canonical),U=p.layoutIconSize.evaluate(P,{},s.canonical),V={horizontal:{},vertical:void 0},W=P.text,ee,ne=[0,0];if(W){let ye=W.toString(),Ee=l.get("text-letter-spacing").evaluate(P,{},s.canonical)*vi,De=oE(ye)?Ee:0,et=l.get("text-anchor").evaluate(P,{},s.canonical),bt=E3(n,P,s.canonical);if(!bt){let st=l.get("text-radial-offset").evaluate(P,{},s.canonical);ne=st?A3(et,[st*vi,VE]):l.get("text-offset").evaluate(P,{},s.canonical).map(nt=>nt*vi)}let Je=_?"center":l.get("text-justify").evaluate(P,{},s.canonical),We=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(P,{},s.canonical)*vi:1/0,dt=()=>{s.bucket.allowVerticalPlacement&&Qm(ye)&&(V.vertical=Q0(W,s.glyphMap,s.glyphPositions,s.imagePositions,M,We,y,et,"left",De,ne,u.ah.vertical,!0,F,R))};if(!_&&bt){let st=new Set;if(Je==="auto")for(let Ie=0;Ie<bt.values.length;Ie+=2)st.add($E(bt.values[Ie]));else st.add(Je);let nt=!1;for(let Ie of st)if(!V.horizontal[Ie])if(nt)V.horizontal[Ie]=V.horizontal[0];else{let mt=Q0(W,s.glyphMap,s.glyphPositions,s.imagePositions,M,We,y,"center",Ie,De,ne,u.ah.horizontal,!1,F,R);mt&&(V.horizontal[Ie]=mt,nt=mt.positionedLines.length===1)}dt()}else{Je==="auto"&&(Je=$E(et));let st=Q0(W,s.glyphMap,s.glyphPositions,s.imagePositions,M,We,y,et,Je,De,ne,u.ah.horizontal,!1,F,R);st&&(V.horizontal[Je]=st),dt(),Qm(ye)&&_&&w&&(V.vertical=Q0(W,s.glyphMap,s.glyphPositions,s.imagePositions,M,We,y,et,Je,De,ne,u.ah.vertical,!1,F,R))}}let xe=!1;if(P.icon&&P.icon.name){let ye=s.imageMap[P.icon.name];ye&&(ee=n1e(s.imagePositions[P.icon.name],l.get("icon-offset").evaluate(P,{},s.canonical),l.get("icon-anchor").evaluate(P,{},s.canonical)),xe=!!ye.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=xe:s.bucket.sdfIcons!==xe&&Lr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ye.pixelRatio!==s.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}let ce=I3(V.horizontal)||V.vertical;s.bucket.iconsInText=!!ce&&ce.iconsInText,(ce||ee)&&x1e(s.bucket,P,V,ee,s.imageMap,p,F,U,ne,xe,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},u.bq=IE,u.br=AE,u.bs=TE,u.bt=Il,u.bu=PE,u.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},u.bw=function(s,n,l,h,p){return a(this,void 0,void 0,function*(){if(Z())try{return yield Tr(s,n,l,h,p)}catch(y){}return function(y,_,w,A,P){let M=y.width,R=y.height;en&&si||(en=new OffscreenCanvas(M,R),si=en.getContext("2d",{willReadFrequently:!0})),en.width=M,en.height=R,si.drawImage(y,0,0,M,R);let F=si.getImageData(_,w,A,P);return si.clearRect(0,0,M,R),F.data}(s,n,l,h,p)})},u.bx=h3,u.by=m,u.bz=x,u.c=Vo,u.d=s=>a(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));let n=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(n)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),u.e=Le,u.f=s=>new Promise((n,l)=>{let h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Xr})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let p=new Blob([new Uint8Array(s)],{type:"image/png"});h.src=s.byteLength?URL.createObjectURL(p):Xr}),u.g=sa,u.h=(s,n)=>so(Le(s,{type:"json"}),n),u.i=Lt,u.j=uo,u.k=Ba,u.l=(s,n)=>so(Le(s,{type:"arrayBuffer"}),n),u.m=so,u.n=function(s){return new PE(s).readFields(Jbe,[])},u.o=uv,u.p=$B,u.q=g,u.r=nE,u.s=za,u.t=Xm,u.u=mu,u.v=Ae,u.w=Lr,u.x=function([s,n,l]){return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(l),y:s*Math.sin(n)*Math.sin(l),z:s*Math.cos(l)}},u.y=qn,u.z=Cr}),r("worker",["./shared"],function(u){"use strict";class a{constructor(N){this.keyCache={},N&&this.replace(N)}replace(N){this._layerConfigs={},this._layers={},this.update(N,[])}update(N,z){for(let te of N){this._layerConfigs[te.id]=te;let he=this._layers[te.id]=u.aA(te);he._featureFilter=u.a7(he.filter),this.keyCache[te.id]&&delete this.keyCache[te.id]}for(let te of z)delete this.keyCache[te],delete this._layerConfigs[te],delete this._layers[te];this.familiesBySource={};let K=u.bk(Object.values(this._layerConfigs),this.keyCache);for(let te of K){let he=te.map(Se=>this._layers[Se.id]),me=he[0];if(me.visibility==="none")continue;let _e=me.source||"",se=this.familiesBySource[_e];se||(se=this.familiesBySource[_e]={});let Te=me.sourceLayer||"_geojsonTileLayer",ke=se[Te];ke||(ke=se[Te]=[]),ke.push(he)}}}class m{constructor(N){let z={},K=[];for(let _e in N){let se=N[_e],Te=z[_e]={};for(let ke in se){let Se=se[+ke];if(!Se||Se.bitmap.width===0||Se.bitmap.height===0)continue;let Ue={x:0,y:0,w:Se.bitmap.width+2,h:Se.bitmap.height+2};K.push(Ue),Te[ke]={rect:Ue,metrics:Se.metrics}}}let{w:te,h:he}=u.p(K),me=new u.o({width:te||1,height:he||1});for(let _e in N){let se=N[_e];for(let Te in se){let ke=se[+Te];if(!ke||ke.bitmap.width===0||ke.bitmap.height===0)continue;let Se=z[_e][Te].rect;u.o.copy(ke.bitmap,me,{x:0,y:0},{x:Se.x+1,y:Se.y+1},ke.bitmap)}}this.image=me,this.positions=z}}u.bl("GlyphAtlas",m);class x{constructor(N){this.tileID=new u.S(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId,this.inFlightDependencies=[]}parse(N,z,K,te){return u._(this,void 0,void 0,function*(){this.status="parsing",this.data=N,this.collisionBoxArray=new u.a5;let he=new u.bm(Object.keys(N.layers).sort()),me=new u.bn(this.tileID,this.promoteId);me.bucketLayerIDs=[];let _e={},se={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Te=z.familiesBySource[this.source];for(let Vt in Te){let fr=N.layers[Vt];if(!fr)continue;fr.version===1&&u.w(`Vector tile source "${this.source}" layer "${Vt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Fr=he.encode(Vt),wi=[];for(let Mi=0;Mi<fr.length;Mi++){let on=fr.feature(Mi),el=me.getId(on,Vt);wi.push({feature:on,id:el,index:Mi,sourceLayerIndex:Fr})}for(let Mi of Te[Vt]){let on=Mi[0];on.source!==this.source&&u.w(`layer.source = ${on.source} does not equal this.source = ${this.source}`),on.minzoom&&this.zoom<Math.floor(on.minzoom)||on.maxzoom&&this.zoom>=on.maxzoom||on.visibility!=="none"&&(q(Mi,this.zoom,K),(_e[on.id]=on.createBucket({index:me.bucketLayerIDs.length,layers:Mi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fr,sourceID:this.source})).populate(wi,se,this.tileID.canonical),me.bucketLayerIDs.push(Mi.map(el=>el.id)))}}let ke=u.aF(se.glyphDependencies,Vt=>Object.keys(Vt).map(Number));this.inFlightDependencies.forEach(Vt=>Vt==null?void 0:Vt.abort()),this.inFlightDependencies=[];let Se=Promise.resolve({});if(Object.keys(ke).length){let Vt=new AbortController;this.inFlightDependencies.push(Vt),Se=te.sendAsync({type:"GG",data:{stacks:ke,source:this.source,tileID:this.tileID,type:"glyphs"}},Vt)}let Ue=Object.keys(se.iconDependencies),vt=Promise.resolve({});if(Ue.length){let Vt=new AbortController;this.inFlightDependencies.push(Vt),vt=te.sendAsync({type:"GI",data:{icons:Ue,source:this.source,tileID:this.tileID,type:"icons"}},Vt)}let xt=Object.keys(se.patternDependencies),tr=Promise.resolve({});if(xt.length){let Vt=new AbortController;this.inFlightDependencies.push(Vt),tr=te.sendAsync({type:"GI",data:{icons:xt,source:this.source,tileID:this.tileID,type:"patterns"}},Vt)}let[Ft,rr,Zt]=yield Promise.all([Se,vt,tr]),ui=new m(Ft),$r=new u.bo(rr,Zt);for(let Vt in _e){let fr=_e[Vt];fr instanceof u.a6?(q(fr.layers,this.zoom,K),u.bp({bucket:fr,glyphMap:Ft,glyphPositions:ui.positions,imageMap:rr,imagePositions:$r.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):fr.hasPattern&&(fr instanceof u.bq||fr instanceof u.br||fr instanceof u.bs)&&(q(fr.layers,this.zoom,K),fr.addFeatures(se,this.tileID.canonical,$r.patternPositions))}return this.status="done",{buckets:Object.values(_e).filter(Vt=>!Vt.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ui.image,imageAtlas:$r,glyphMap:this.returnDependencies?Ft:null,iconMap:this.returnDependencies?rr:null,glyphPositions:this.returnDependencies?ui.positions:null}})}}function q(ie,N,z){let K=new u.z(N);for(let te of ie)te.recalculate(K,z)}class T{constructor(N,z,K){this.actor=N,this.layerIndex=z,this.availableImages=K,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(N,z){return u._(this,void 0,void 0,function*(){let K=yield u.l(N.request,z);try{return{vectorTile:new u.bt.VectorTile(new u.bu(K.data)),rawData:K.data,cacheControl:K.cacheControl,expires:K.expires}}catch(te){let he=new Uint8Array(K.data),me=`Unable to parse the tile at ${N.request.url}, `;throw me+=he[0]===31&&he[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${te.message}`,new Error(me)}})}loadTile(N){return u._(this,void 0,void 0,function*(){let z=N.uid,K=!!(N&&N.request&&N.request.collectResourceTiming)&&new u.bv(N.request),te=new x(N);this.loading[z]=te;let he=new AbortController;te.abort=he;try{let me=yield this.loadVectorTile(N,he);if(delete this.loading[z],!me)return null;let _e=me.rawData,se={};me.expires&&(se.expires=me.expires),me.cacheControl&&(se.cacheControl=me.cacheControl);let Te={};if(K){let Se=K.finish();Se&&(Te.resourceTiming=JSON.parse(JSON.stringify(Se)))}te.vectorTile=me.vectorTile;let ke=te.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[z]=te,this.fetching[z]={rawTileData:_e,cacheControl:se,resourceTiming:Te};try{let Se=yield ke;return u.e({rawTileData:_e.slice(0)},Se,se,Te)}finally{delete this.fetching[z]}}catch(me){throw delete this.loading[z],te.status="done",this.loaded[z]=te,me}})}reloadTile(N){return u._(this,void 0,void 0,function*(){let z=N.uid;if(!this.loaded||!this.loaded[z])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let K=this.loaded[z];if(K.showCollisionBoxes=N.showCollisionBoxes,K.status==="parsing"){let te=yield K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor),he;if(this.fetching[z]){let{rawTileData:me,cacheControl:_e,resourceTiming:se}=this.fetching[z];delete this.fetching[z],he=u.e({rawTileData:me.slice(0)},te,_e,se)}else he=te;return he}if(K.status==="done"&&K.vectorTile)return K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(N){return u._(this,void 0,void 0,function*(){let z=this.loading,K=N.uid;z&&z[K]&&z[K].abort&&(z[K].abort.abort(),delete z[K])})}removeTile(N){return u._(this,void 0,void 0,function*(){this.loaded&&this.loaded[N.uid]&&delete this.loaded[N.uid]})}}class I{constructor(){this.loaded={}}loadTile(N){return u._(this,void 0,void 0,function*(){let{uid:z,encoding:K,rawImageData:te,redFactor:he,greenFactor:me,blueFactor:_e,baseShift:se}=N,Te=te.width+2,ke=te.height+2,Se=u.b(te)?new u.R({width:Te,height:ke},(yield u.bw(te,-1,-1,Te,ke))):te,Ue=new u.bx(z,Se,K,he,me,_e,se);return this.loaded=this.loaded||{},this.loaded[z]=Ue,Ue})}removeTile(N){let z=this.loaded,K=N.uid;z&&z[K]&&delete z[K]}}function k(ie,N){if(ie.length!==0){B(ie[0],N);for(var z=1;z<ie.length;z++)B(ie[z],!N)}}function B(ie,N){for(var z=0,K=0,te=0,he=ie.length,me=he-1;te<he;me=te++){var _e=(ie[te][0]-ie[me][0])*(ie[me][1]+ie[te][1]),se=z+_e;K+=Math.abs(z)>=Math.abs(_e)?z-se+_e:_e-se+z,z=se}z+K>=0!=!!N&&ie.reverse()}var Y=u.by(function ie(N,z){var K,te=N&&N.type;if(te==="FeatureCollection")for(K=0;K<N.features.length;K++)ie(N.features[K],z);else if(te==="GeometryCollection")for(K=0;K<N.geometries.length;K++)ie(N.geometries[K],z);else if(te==="Feature")ie(N.geometry,z);else if(te==="Polygon")k(N.coordinates,z);else if(te==="MultiPolygon")for(K=0;K<N.coordinates.length;K++)k(N.coordinates[K],z);return N});let de=u.bt.VectorTileFeature.prototype.toGeoJSON;var pe={exports:{}},Z=u.bz,H=u.bt.VectorTileFeature,J=ve;function ve(ie,N){this.options=N||{},this.features=ie,this.length=ie.length}function be(ie,N){this.id=typeof ie.id=="number"?ie.id:void 0,this.type=ie.type,this.rawGeometry=ie.type===1?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=N||4096}ve.prototype.feature=function(ie){return new be(this.features[ie],this.options.extent)},be.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var N=0;N<ie.length;N++){for(var z=ie[N],K=[],te=0;te<z.length;te++)K.push(new Z(z[te][0],z[te][1]));this.geometry.push(K)}return this.geometry},be.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,N=1/0,z=-1/0,K=1/0,te=-1/0,he=0;he<ie.length;he++)for(var me=ie[he],_e=0;_e<me.length;_e++){var se=me[_e];N=Math.min(N,se.x),z=Math.max(z,se.x),K=Math.min(K,se.y),te=Math.max(te,se.y)}return[N,K,z,te]},be.prototype.toGeoJSON=H.prototype.toGeoJSON;var Le=u.bA,Oe=J;function Ze(ie){var N=new Le;return function(z,K){for(var te in z.layers)K.writeMessage(3,ft,z.layers[te])}(ie,N),N.finish()}function ft(ie,N){var z;N.writeVarintField(15,ie.version||1),N.writeStringField(1,ie.name||""),N.writeVarintField(5,ie.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(z=0;z<ie.length;z++)K.feature=ie.feature(z),N.writeMessage(2,He,K);var te=K.keys;for(z=0;z<te.length;z++)N.writeStringField(3,te[z]);var he=K.values;for(z=0;z<he.length;z++)N.writeMessage(4,wr,he[z])}function He(ie,N){var z=ie.feature;z.id!==void 0&&N.writeVarintField(1,z.id),N.writeMessage(2,_r,ie),N.writeVarintField(3,z.type),N.writeMessage(4,Lt,z)}function _r(ie,N){var z=ie.feature,K=ie.keys,te=ie.values,he=ie.keycache,me=ie.valuecache;for(var _e in z.properties){var se=z.properties[_e],Te=he[_e];if(se!==null){Te===void 0&&(K.push(_e),he[_e]=Te=K.length-1),N.writeVarint(Te);var ke=typeof se;ke!=="string"&&ke!=="boolean"&&ke!=="number"&&(se=JSON.stringify(se));var Se=ke+":"+se,Ue=me[Se];Ue===void 0&&(te.push(se),me[Se]=Ue=te.length-1),N.writeVarint(Ue)}}}function Lr(ie,N){return(N<<3)+(7&ie)}function pt(ie){return ie<<1^ie>>31}function Lt(ie,N){for(var z=ie.loadGeometry(),K=ie.type,te=0,he=0,me=z.length,_e=0;_e<me;_e++){var se=z[_e],Te=1;K===1&&(Te=se.length),N.writeVarint(Lr(1,Te));for(var ke=K===3?se.length-1:se.length,Se=0;Se<ke;Se++){Se===1&&K!==1&&N.writeVarint(Lr(2,ke-1));var Ue=se[Se].x-te,vt=se[Se].y-he;N.writeVarint(pt(Ue)),N.writeVarint(pt(vt)),te+=Ue,he+=vt}K===3&&N.writeVarint(Lr(7,1))}}function wr(ie,N){var z=typeof ie;z==="string"?N.writeStringField(1,ie):z==="boolean"?N.writeBooleanField(7,ie):z==="number"&&(ie%1!=0?N.writeDoubleField(3,ie):ie<0?N.writeSVarintField(6,ie):N.writeVarintField(5,ie))}pe.exports=Ze,pe.exports.fromVectorTileJs=Ze,pe.exports.fromGeojsonVt=function(ie,N){N=N||{};var z={};for(var K in ie)z[K]=new Oe(ie[K].features,N),z[K].name=K,z[K].version=N.version,z[K].extent=N.extent;return Ze({layers:z})},pe.exports.GeoJSONWrapper=Oe;var hr=u.by(pe.exports);let Xr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},Tr=Math.fround||(en=new Float32Array(1),ie=>(en[0]=+ie,en[0]));var en;let si=3,Pi=5,Vo=6;class Fa{constructor(N){this.options=Object.assign(Object.create(Xr),N),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(N){let{log:z,minZoom:K,maxZoom:te}=this.options;z&&console.time("total time");let he=`prepare ${N.length} points`;z&&console.time(he),this.points=N;let me=[];for(let se=0;se<N.length;se++){let Te=N[se];if(!Te.geometry)continue;let[ke,Se]=Te.geometry.coordinates,Ue=Tr(tn(ke)),vt=Tr(rn(Se));me.push(Ue,vt,1/0,se,-1,1),this.options.reduce&&me.push(0)}let _e=this.trees[te+1]=this._createTree(me);z&&console.timeEnd(he);for(let se=te;se>=K;se--){let Te=+Date.now();_e=this.trees[se]=this._createTree(this._cluster(_e,se)),z&&console.log("z%d: %d clusters in %dms",se,_e.numItems,+Date.now()-Te)}return z&&console.timeEnd("total time"),this}getClusters(N,z){let K=((N[0]+180)%360+360)%360-180,te=Math.max(-90,Math.min(90,N[1])),he=N[2]===180?180:((N[2]+180)%360+360)%360-180,me=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)K=-180,he=180;else if(K>he){let Se=this.getClusters([K,te,180,me],z),Ue=this.getClusters([-180,te,he,me],z);return Se.concat(Ue)}let _e=this.trees[this._limitZoom(z)],se=_e.range(tn(K),rn(me),tn(he),rn(te)),Te=_e.data,ke=[];for(let Se of se){let Ue=this.stride*Se;ke.push(Te[Ue+Pi]>1?sa(Te,Ue,this.clusterProps):this.points[Te[Ue+si]])}return ke}getChildren(N){let z=this._getOriginId(N),K=this._getOriginZoom(N),te="No cluster with the specified id.",he=this.trees[K];if(!he)throw new Error(te);let me=he.data;if(z*this.stride>=me.length)throw new Error(te);let _e=this.options.radius/(this.options.extent*Math.pow(2,K-1)),se=he.within(me[z*this.stride],me[z*this.stride+1],_e),Te=[];for(let ke of se){let Se=ke*this.stride;me[Se+4]===N&&Te.push(me[Se+Pi]>1?sa(me,Se,this.clusterProps):this.points[me[Se+si]])}if(Te.length===0)throw new Error(te);return Te}getLeaves(N,z,K){let te=[];return this._appendLeaves(te,N,z=z||10,K=K||0,0),te}getTile(N,z,K){let te=this.trees[this._limitZoom(N)],he=Math.pow(2,N),{extent:me,radius:_e}=this.options,se=_e/me,Te=(K-se)/he,ke=(K+1+se)/he,Se={features:[]};return this._addTileFeatures(te.range((z-se)/he,Te,(z+1+se)/he,ke),te.data,z,K,he,Se),z===0&&this._addTileFeatures(te.range(1-se/he,Te,1,ke),te.data,he,K,he,Se),z===he-1&&this._addTileFeatures(te.range(0,Te,se/he,ke),te.data,-1,K,he,Se),Se.features.length?Se:null}getClusterExpansionZoom(N){let z=this._getOriginZoom(N)-1;for(;z<=this.options.maxZoom;){let K=this.getChildren(N);if(z++,K.length!==1)break;N=K[0].properties.cluster_id}return z}_appendLeaves(N,z,K,te,he){let me=this.getChildren(z);for(let _e of me){let se=_e.properties;if(se&&se.cluster?he+se.point_count<=te?he+=se.point_count:he=this._appendLeaves(N,se.cluster_id,K,te,he):he<te?he++:N.push(_e),N.length===K)break}return he}_createTree(N){let z=new u.av(N.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<N.length;K+=this.stride)z.add(N[K],N[K+1]);return z.finish(),z.data=N,z}_addTileFeatures(N,z,K,te,he,me){for(let _e of N){let se=_e*this.stride,Te=z[se+Pi]>1,ke,Se,Ue;if(Te)ke=$o(z,se,this.clusterProps),Se=z[se],Ue=z[se+1];else{let tr=this.points[z[se+si]];ke=tr.properties;let[Ft,rr]=tr.geometry.coordinates;Se=tn(Ft),Ue=rn(rr)}let vt={type:1,geometry:[[Math.round(this.options.extent*(Se*he-K)),Math.round(this.options.extent*(Ue*he-te))]],tags:ke},xt;xt=Te||this.options.generateId?z[se+si]:this.points[z[se+si]].id,xt!==void 0&&(vt.id=xt),me.features.push(vt)}}_limitZoom(N){return Math.max(this.options.minZoom,Math.min(Math.floor(+N),this.options.maxZoom+1))}_cluster(N,z){let{radius:K,extent:te,reduce:he,minPoints:me}=this.options,_e=K/(te*Math.pow(2,z)),se=N.data,Te=[],ke=this.stride;for(let Se=0;Se<se.length;Se+=ke){if(se[Se+2]<=z)continue;se[Se+2]=z;let Ue=se[Se],vt=se[Se+1],xt=N.within(se[Se],se[Se+1],_e),tr=se[Se+Pi],Ft=tr;for(let rr of xt){let Zt=rr*ke;se[Zt+2]>z&&(Ft+=se[Zt+Pi])}if(Ft>tr&&Ft>=me){let rr,Zt=Ue*tr,ui=vt*tr,$r=-1,Vt=((Se/ke|0)<<5)+(z+1)+this.points.length;for(let fr of xt){let Fr=fr*ke;if(se[Fr+2]<=z)continue;se[Fr+2]=z;let wi=se[Fr+Pi];Zt+=se[Fr]*wi,ui+=se[Fr+1]*wi,se[Fr+4]=Vt,he&&(rr||(rr=this._map(se,Se,!0),$r=this.clusterProps.length,this.clusterProps.push(rr)),he(rr,this._map(se,Fr)))}se[Se+4]=Vt,Te.push(Zt/Ft,ui/Ft,1/0,Vt,-1,Ft),he&&Te.push($r)}else{for(let rr=0;rr<ke;rr++)Te.push(se[Se+rr]);if(Ft>1)for(let rr of xt){let Zt=rr*ke;if(!(se[Zt+2]<=z)){se[Zt+2]=z;for(let ui=0;ui<ke;ui++)Te.push(se[Zt+ui])}}}}return Te}_getOriginId(N){return N-this.points.length>>5}_getOriginZoom(N){return(N-this.points.length)%32}_map(N,z,K){if(N[z+Pi]>1){let me=this.clusterProps[N[z+Vo]];return K?Object.assign({},me):me}let te=this.points[N[z+si]].properties,he=this.options.map(te);return K&&he===te?Object.assign({},he):he}}function sa(ie,N,z){return{type:"Feature",id:ie[N+si],properties:$o(ie,N,z),geometry:{type:"Point",coordinates:[(K=ie[N],360*(K-.5)),so(ie[N+1])]}};var K}function $o(ie,N,z){let K=ie[N+Pi],te=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,he=ie[N+Vo],me=he===-1?{}:Object.assign({},z[he]);return Object.assign(me,{cluster:!0,cluster_id:ie[N+si],point_count:K,point_count_abbreviated:te})}function tn(ie){return ie/360+.5}function rn(ie){let N=Math.sin(ie*Math.PI/180),z=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return z<0?0:z>1?1:z}function so(ie){let N=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(N))/Math.PI-90}function za(ie,N,z,K){let te=K,he=N+(z-N>>1),me,_e=z-N,se=ie[N],Te=ie[N+1],ke=ie[z],Se=ie[z+1];for(let Ue=N+3;Ue<z;Ue+=3){let vt=ms(ie[Ue],ie[Ue+1],se,Te,ke,Se);if(vt>te)me=Ue,te=vt;else if(vt===te){let xt=Math.abs(Ue-he);xt<_e&&(me=Ue,_e=xt)}}te>K&&(me-N>3&&za(ie,N,me,K),ie[me+2]=te,z-me>3&&za(ie,me,z,K))}function ms(ie,N,z,K,te,he){let me=te-z,_e=he-K;if(me!==0||_e!==0){let se=((ie-z)*me+(N-K)*_e)/(me*me+_e*_e);se>1?(z=te,K=he):se>0&&(z+=me*se,K+=_e*se)}return me=ie-z,_e=N-K,me*me+_e*_e}function Na(ie,N,z,K){let te={id:ie==null?null:ie,type:N,geometry:z,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(N==="Point"||N==="MultiPoint"||N==="LineString")Ba(te,z);else if(N==="Polygon")Ba(te,z[0]);else if(N==="MultiLineString")for(let he of z)Ba(te,he);else if(N==="MultiPolygon")for(let he of z)Ba(te,he[0]);return te}function Ba(ie,N){for(let z=0;z<N.length;z+=3)ie.minX=Math.min(ie.minX,N[z]),ie.minY=Math.min(ie.minY,N[z+1]),ie.maxX=Math.max(ie.maxX,N[z]),ie.maxY=Math.max(ie.maxY,N[z+1])}function uo(ie,N,z,K){if(!N.geometry)return;let te=N.geometry.coordinates;if(te&&te.length===0)return;let he=N.geometry.type,me=Math.pow(z.tolerance/((1<<z.maxZoom)*z.extent),2),_e=[],se=N.id;if(z.promoteId?se=N.properties[z.promoteId]:z.generateId&&(se=K||0),he==="Point")Wo(te,_e);else if(he==="MultiPoint")for(let Te of te)Wo(Te,_e);else if(he==="LineString")Ae(te,_e,me,!1);else if(he==="MultiLineString"){if(z.lineMetrics){for(let Te of te)_e=[],Ae(Te,_e,me,!1),ie.push(Na(se,"LineString",_e,N.properties));return}vs(te,_e,me,!1)}else if(he==="Polygon")vs(te,_e,me,!0);else{if(he!=="MultiPolygon"){if(he==="GeometryCollection"){for(let Te of N.geometry.geometries)uo(ie,{id:se,geometry:Te,properties:N.properties},z,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Te of te){let ke=[];vs(Te,ke,me,!0),_e.push(ke)}}ie.push(Na(se,he,_e,N.properties))}function Wo(ie,N){N.push(Qu(ie[0]),nr(ie[1]),0)}function Ae(ie,N,z,K){let te,he,me=0;for(let se=0;se<ie.length;se++){let Te=Qu(ie[se][0]),ke=nr(ie[se][1]);N.push(Te,ke,0),se>0&&(me+=K?(te*ke-Te*he)/2:Math.sqrt(Math.pow(Te-te,2)+Math.pow(ke-he,2))),te=Te,he=ke}let _e=N.length-3;N[2]=1,za(N,0,_e,z),N[_e+2]=1,N.size=Math.abs(me),N.start=0,N.end=N.size}function vs(ie,N,z,K){for(let te=0;te<ie.length;te++){let he=[];Ae(ie[te],he,z,K),N.push(he)}}function Qu(ie){return ie/360+.5}function nr(ie){let N=Math.sin(ie*Math.PI/180),z=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return z<0?0:z>1?1:z}function ue(ie,N,z,K,te,he,me,_e){if(K/=N,he>=(z/=N)&&me<K)return ie;if(me<z||he>=K)return null;let se=[];for(let Te of ie){let ke=Te.geometry,Se=Te.type,Ue=te===0?Te.minX:Te.minY,vt=te===0?Te.maxX:Te.maxY;if(Ue>=z&&vt<K){se.push(Te);continue}if(vt<z||Ue>=K)continue;let xt=[];if(Se==="Point"||Se==="MultiPoint")qe(ke,xt,z,K,te);else if(Se==="LineString")Ce(ke,xt,z,K,te,!1,_e.lineMetrics);else if(Se==="MultiLineString")rt(ke,xt,z,K,te,!1);else if(Se==="Polygon")rt(ke,xt,z,K,te,!0);else if(Se==="MultiPolygon")for(let tr of ke){let Ft=[];rt(tr,Ft,z,K,te,!0),Ft.length&&xt.push(Ft)}if(xt.length){if(_e.lineMetrics&&Se==="LineString"){for(let tr of xt)se.push(Na(Te.id,Se,tr,Te.tags));continue}Se!=="LineString"&&Se!=="MultiLineString"||(xt.length===1?(Se="LineString",xt=xt[0]):Se="MultiLineString"),Se!=="Point"&&Se!=="MultiPoint"||(Se=xt.length===3?"Point":"MultiPoint"),se.push(Na(Te.id,Se,xt,Te.tags))}}return se.length?se:null}function qe(ie,N,z,K,te){for(let he=0;he<ie.length;he+=3){let me=ie[he+te];me>=z&&me<=K&&Be(N,ie[he],ie[he+1],ie[he+2])}}function Ce(ie,N,z,K,te,he,me){let _e=ut(ie),se=te===0?At:Ct,Te,ke,Se=ie.start;for(let Ft=0;Ft<ie.length-3;Ft+=3){let rr=ie[Ft],Zt=ie[Ft+1],ui=ie[Ft+2],$r=ie[Ft+3],Vt=ie[Ft+4],fr=te===0?rr:Zt,Fr=te===0?$r:Vt,wi=!1;me&&(Te=Math.sqrt(Math.pow(rr-$r,2)+Math.pow(Zt-Vt,2))),fr<z?Fr>z&&(ke=se(_e,rr,Zt,$r,Vt,z),me&&(_e.start=Se+Te*ke)):fr>K?Fr<K&&(ke=se(_e,rr,Zt,$r,Vt,K),me&&(_e.start=Se+Te*ke)):Be(_e,rr,Zt,ui),Fr<z&&fr>=z&&(ke=se(_e,rr,Zt,$r,Vt,z),wi=!0),Fr>K&&fr<=K&&(ke=se(_e,rr,Zt,$r,Vt,K),wi=!0),!he&&wi&&(me&&(_e.end=Se+Te*ke),N.push(_e),_e=ut(ie)),me&&(Se+=Te)}let Ue=ie.length-3,vt=ie[Ue],xt=ie[Ue+1],tr=te===0?vt:xt;tr>=z&&tr<=K&&Be(_e,vt,xt,ie[Ue+2]),Ue=_e.length-3,he&&Ue>=3&&(_e[Ue]!==_e[0]||_e[Ue+1]!==_e[1])&&Be(_e,_e[0],_e[1],_e[2]),_e.length&&N.push(_e)}function ut(ie){let N=[];return N.size=ie.size,N.start=ie.start,N.end=ie.end,N}function rt(ie,N,z,K,te,he){for(let me of ie)Ce(me,N,z,K,te,he,!1)}function Be(ie,N,z,K){ie.push(N,z,K)}function At(ie,N,z,K,te,he){let me=(he-N)/(K-N);return Be(ie,he,z+(te-z)*me,1),me}function Ct(ie,N,z,K,te,he){let me=(he-z)/(te-z);return Be(ie,N+(K-N)*me,he,1),me}function Pe(ie,N){let z=[];for(let K=0;K<ie.length;K++){let te=ie[K],he=te.type,me;if(he==="Point"||he==="MultiPoint"||he==="LineString")me=Qt(te.geometry,N);else if(he==="MultiLineString"||he==="Polygon"){me=[];for(let _e of te.geometry)me.push(Qt(_e,N))}else if(he==="MultiPolygon"){me=[];for(let _e of te.geometry){let se=[];for(let Te of _e)se.push(Qt(Te,N));me.push(se)}}z.push(Na(te.id,he,me,te.tags))}return z}function Qt(ie,N){let z=[];z.size=ie.size,ie.start!==void 0&&(z.start=ie.start,z.end=ie.end);for(let K=0;K<ie.length;K+=3)z.push(ie[K]+N,ie[K+1],ie[K+2]);return z}function Ir(ie,N){if(ie.transformed)return ie;let z=1<<ie.z,K=ie.x,te=ie.y;for(let he of ie.features){let me=he.geometry,_e=he.type;if(he.geometry=[],_e===1)for(let se=0;se<me.length;se+=2)he.geometry.push(nn(me[se],me[se+1],N,z,K,te));else for(let se=0;se<me.length;se++){let Te=[];for(let ke=0;ke<me[se].length;ke+=2)Te.push(nn(me[se][ke],me[se][ke+1],N,z,K,te));he.geometry.push(Te)}}return ie.transformed=!0,ie}function nn(ie,N,z,K,te,he){return[Math.round(z*(ie*K-te)),Math.round(z*(N*K-he))]}function an(ie,N,z,K,te){let he=N===te.maxZoom?0:te.tolerance/((1<<N)*te.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:ie.length,source:null,x:z,y:K,z:N,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let _e of ie)Ne(me,_e,he,te);return me}function Ne(ie,N,z,K){let te=N.geometry,he=N.type,me=[];if(ie.minX=Math.min(ie.minX,N.minX),ie.minY=Math.min(ie.minY,N.minY),ie.maxX=Math.max(ie.maxX,N.maxX),ie.maxY=Math.max(ie.maxY,N.maxY),he==="Point"||he==="MultiPoint")for(let _e=0;_e<te.length;_e+=3)me.push(te[_e],te[_e+1]),ie.numPoints++,ie.numSimplified++;else if(he==="LineString")Nt(me,te,ie,z,!1,!1);else if(he==="MultiLineString"||he==="Polygon")for(let _e=0;_e<te.length;_e++)Nt(me,te[_e],ie,z,he==="Polygon",_e===0);else if(he==="MultiPolygon")for(let _e=0;_e<te.length;_e++){let se=te[_e];for(let Te=0;Te<se.length;Te++)Nt(me,se[Te],ie,z,!0,Te===0)}if(me.length){let _e=N.tags||null;if(he==="LineString"&&K.lineMetrics){_e={};for(let Te in N.tags)_e[Te]=N.tags[Te];_e.mapbox_clip_start=te.start/te.size,_e.mapbox_clip_end=te.end/te.size}let se={geometry:me,type:he==="Polygon"||he==="MultiPolygon"?3:he==="LineString"||he==="MultiLineString"?2:1,tags:_e};N.id!==null&&(se.id=N.id),ie.features.push(se)}}function Nt(ie,N,z,K,te,he){let me=K*K;if(K>0&&N.size<(te?me:K))return void(z.numPoints+=N.length/3);let _e=[];for(let se=0;se<N.length;se+=3)(K===0||N[se+2]>me)&&(z.numSimplified++,_e.push(N[se],N[se+1])),z.numPoints++;te&&function(se,Te){let ke=0;for(let Se=0,Ue=se.length,vt=Ue-2;Se<Ue;vt=Se,Se+=2)ke+=(se[Se]-se[vt])*(se[Se+1]+se[vt+1]);if(ke>0===Te)for(let Se=0,Ue=se.length;Se<Ue/2;Se+=2){let vt=se[Se],xt=se[Se+1];se[Se]=se[Ue-2-Se],se[Se+1]=se[Ue-1-Se],se[Ue-2-Se]=vt,se[Ue-1-Se]=xt}}(_e,he),ie.push(_e)}let qt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class zi{constructor(N,z){let K=(z=this.options=function(he,me){for(let _e in me)he[_e]=me[_e];return he}(Object.create(qt),z)).debug;if(K&&console.time("preprocess data"),z.maxZoom<0||z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(z.promoteId&&z.generateId)throw new Error("promoteId and generateId cannot be used together.");let te=function(he,me){let _e=[];if(he.type==="FeatureCollection")for(let se=0;se<he.features.length;se++)uo(_e,he.features[se],me,se);else uo(_e,he.type==="Feature"?he:{geometry:he},me);return _e}(N,z);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",z.indexMaxZoom,z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(he,me){let _e=me.buffer/me.extent,se=he,Te=ue(he,1,-1-_e,_e,0,-1,2,me),ke=ue(he,1,1-_e,2+_e,0,-1,2,me);return(Te||ke)&&(se=ue(he,1,-_e,1+_e,0,-1,2,me)||[],Te&&(se=Pe(Te,1).concat(se)),ke&&(se=se.concat(Pe(ke,-1)))),se}(te,z),te.length&&this.splitTile(te,0,0,0),K&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(N,z,K,te,he,me,_e){let se=[N,z,K,te],Te=this.options,ke=Te.debug;for(;se.length;){te=se.pop(),K=se.pop(),z=se.pop(),N=se.pop();let Se=1<<z,Ue=Sn(z,K,te),vt=this.tiles[Ue];if(!vt&&(ke>1&&console.time("creation"),vt=this.tiles[Ue]=an(N,z,K,te,Te),this.tileCoords.push({z,x:K,y:te}),ke)){ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",z,K,te,vt.numFeatures,vt.numPoints,vt.numSimplified),console.timeEnd("creation"));let wi=`z${z}`;this.stats[wi]=(this.stats[wi]||0)+1,this.total++}if(vt.source=N,he==null){if(z===Te.indexMaxZoom||vt.numPoints<=Te.indexMaxPoints)continue}else{if(z===Te.maxZoom||z===he)continue;if(he!=null){let wi=he-z;if(K!==me>>wi||te!==_e>>wi)continue}}if(vt.source=null,N.length===0)continue;ke>1&&console.time("clipping");let xt=.5*Te.buffer/Te.extent,tr=.5-xt,Ft=.5+xt,rr=1+xt,Zt=null,ui=null,$r=null,Vt=null,fr=ue(N,Se,K-xt,K+Ft,0,vt.minX,vt.maxX,Te),Fr=ue(N,Se,K+tr,K+rr,0,vt.minX,vt.maxX,Te);N=null,fr&&(Zt=ue(fr,Se,te-xt,te+Ft,1,vt.minY,vt.maxY,Te),ui=ue(fr,Se,te+tr,te+rr,1,vt.minY,vt.maxY,Te),fr=null),Fr&&($r=ue(Fr,Se,te-xt,te+Ft,1,vt.minY,vt.maxY,Te),Vt=ue(Fr,Se,te+tr,te+rr,1,vt.minY,vt.maxY,Te),Fr=null),ke>1&&console.timeEnd("clipping"),se.push(Zt||[],z+1,2*K,2*te),se.push(ui||[],z+1,2*K,2*te+1),se.push($r||[],z+1,2*K+1,2*te),se.push(Vt||[],z+1,2*K+1,2*te+1)}}getTile(N,z,K){N=+N,z=+z,K=+K;let te=this.options,{extent:he,debug:me}=te;if(N<0||N>24)return null;let _e=1<<N,se=Sn(N,z=z+_e&_e-1,K);if(this.tiles[se])return Ir(this.tiles[se],he);me>1&&console.log("drilling down to z%d-%d-%d",N,z,K);let Te,ke=N,Se=z,Ue=K;for(;!Te&&ke>0;)ke--,Se>>=1,Ue>>=1,Te=this.tiles[Sn(ke,Se,Ue)];return Te&&Te.source?(me>1&&(console.log("found parent tile z%d-%d-%d",ke,Se,Ue),console.time("drilling down")),this.splitTile(Te.source,ke,Se,Ue,N,z,K),me>1&&console.timeEnd("drilling down"),this.tiles[se]?Ir(this.tiles[se],he):null):null}}function Sn(ie,N,z){return 32*((1<<ie)*z+N)+ie}function Rt(ie,N){return N?ie.properties[N]:ie.id}function lo(ie,N){if(ie==null)return!0;if(ie.type==="Feature")return Rt(ie,N)!=null;if(ie.type==="FeatureCollection"){let z=new Set;for(let K of ie.features){let te=Rt(K,N);if(te==null||z.has(te))return!1;z.add(te)}return!0}return!1}function Go(ie,N){let z=new Map;if(ie!=null)if(ie.type==="Feature")z.set(Rt(ie,N),ie);else for(let K of ie.features)z.set(Rt(K,N),K);return z}class gs extends T{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(N,z){return u._(this,void 0,void 0,function*(){let K=N.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let te=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!te)return null;let he=new class{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.X,this.length=_e.length,this._features=_e}feature(_e){return new class{constructor(se){this._feature=se,this.extent=u.X,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){let se=[];for(let Te of this._feature.geometry)se.push([new u.P(Te[0],Te[1])]);return se}{let se=[];for(let Te of this._feature.geometry){let ke=[];for(let Se of Te)ke.push(new u.P(Se[0],Se[1]));se.push(ke)}return se}}toGeoJSON(se,Te,ke){return de.call(this,se,Te,ke)}}(this._features[_e])}}(te.features),me=hr(he);return me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),{vectorTile:he,rawData:me.buffer}})}loadData(N){return u._(this,void 0,void 0,function*(){var z;(z=this._pendingRequest)===null||z===void 0||z.abort();let K=!!(N&&N.request&&N.request.collectResourceTiming)&&new u.bv(N.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(N,this._pendingRequest),this._geoJSONIndex=N.cluster?new Fa(function({superclusterOptions:me,clusterProperties:_e}){if(!_e||!me)return me;let se={},Te={},ke={accumulated:null,zoom:0},Se={properties:null},Ue=Object.keys(_e);for(let vt of Ue){let[xt,tr]=_e[vt],Ft=u.bC(tr),rr=u.bC(typeof xt=="string"?[xt,["accumulated"],["get",vt]]:xt);se[vt]=Ft.value,Te[vt]=rr.value}return me.map=vt=>{Se.properties=vt;let xt={};for(let tr of Ue)xt[tr]=se[tr].evaluate(ke,Se);return xt},me.reduce=(vt,xt)=>{Se.properties=xt;for(let tr of Ue)ke.accumulated=vt[tr],vt[tr]=Te[tr].evaluate(ke,Se)},me}(N)).load((yield this._pendingData).features):(te=yield this._pendingData,new zi(te,N.geojsonVtOptions)),this.loaded={};let he={};if(K){let me=K.finish();me&&(he.resourceTiming={},he.resourceTiming[N.source]=JSON.parse(JSON.stringify(me)))}return he}catch(he){if(delete this._pendingRequest,u.bB(he))return{abandoned:!0};throw he}var te})}getData(){return u._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(N){let z=this.loaded;return z&&z[N.uid]?super.reloadTile(N):this.loadTile(N)}loadAndProcessGeoJSON(N,z){return u._(this,void 0,void 0,function*(){let K=yield this.loadGeoJSON(N,z);if(delete this._pendingRequest,typeof K!="object")throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`);if(Y(K,!0),N.filter){let te=u.bC(N.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(te.result==="error")throw new Error(te.value.map(me=>`${me.key}: ${me.message}`).join(", "));K={type:"FeatureCollection",features:K.features.filter(me=>te.value.evaluate({zoom:0},me))}}return K})}loadGeoJSON(N,z){return u._(this,void 0,void 0,function*(){let{promoteId:K}=N;if(N.request){let te=yield u.h(N.request,z);return this._dataUpdateable=lo(te.data,K)?Go(te.data,K):void 0,te.data}if(typeof N.data=="string")try{let te=JSON.parse(N.data);return this._dataUpdateable=lo(te,K)?Go(te,K):void 0,te}catch(te){throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`)}if(!N.dataDiff)throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${N.source}`);return function(te,he,me){var _e,se,Te,ke;if(he.removeAll&&te.clear(),he.remove)for(let Se of he.remove)te.delete(Se);if(he.add)for(let Se of he.add){let Ue=Rt(Se,me);Ue!=null&&te.set(Ue,Se)}if(he.update)for(let Se of he.update){let Ue=te.get(Se.id);if(Ue==null)continue;let vt=!Se.removeAllProperties&&(((_e=Se.removeProperties)===null||_e===void 0?void 0:_e.length)>0||((se=Se.addOrUpdateProperties)===null||se===void 0?void 0:se.length)>0);if((Se.newGeometry||Se.removeAllProperties||vt)&&(Ue=Object.assign({},Ue),te.set(Se.id,Ue),vt&&(Ue.properties=Object.assign({},Ue.properties))),Se.newGeometry&&(Ue.geometry=Se.newGeometry),Se.removeAllProperties)Ue.properties={};else if(((Te=Se.removeProperties)===null||Te===void 0?void 0:Te.length)>0)for(let xt of Se.removeProperties)Object.prototype.hasOwnProperty.call(Ue.properties,xt)&&delete Ue.properties[xt];if(((ke=Se.addOrUpdateProperties)===null||ke===void 0?void 0:ke.length)>0)for(let{key:xt,value:tr}of Se.addOrUpdateProperties)Ue.properties[xt]=tr}}(this._dataUpdateable,N.dataDiff,K),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(N){return u._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(N){return this._geoJSONIndex.getClusterExpansionZoom(N.clusterId)}getClusterChildren(N){return this._geoJSONIndex.getChildren(N.clusterId)}getClusterLeaves(N){return this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset)}}class co{constructor(N){this.self=N,this.actor=new u.F(N),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(z,K)=>{if(this.externalWorkerSourceTypes[z])throw new Error(`Worker source with name "${z}" already registered.`);this.externalWorkerSourceTypes[z]=K},this.self.addProtocol=u.bi,this.self.removeProtocol=u.bj,this.self.registerRTLTextPlugin=z=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.setMethods(z)},this.actor.registerMessageHandler("LDT",(z,K)=>this._getDEMWorkerSource(z,K.source).loadTile(K)),this.actor.registerMessageHandler("RDT",(z,K)=>u._(this,void 0,void 0,function*(){this._getDEMWorkerSource(z,K.source).removeTile(K)})),this.actor.registerMessageHandler("GCEZ",(z,K)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(z,K.type,K.source).getClusterExpansionZoom(K)})),this.actor.registerMessageHandler("GCC",(z,K)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(z,K.type,K.source).getClusterChildren(K)})),this.actor.registerMessageHandler("GCL",(z,K)=>u._(this,void 0,void 0,function*(){return this._getWorkerSource(z,K.type,K.source).getClusterLeaves(K)})),this.actor.registerMessageHandler("LD",(z,K)=>this._getWorkerSource(z,K.type,K.source).loadData(K)),this.actor.registerMessageHandler("GD",(z,K)=>this._getWorkerSource(z,K.type,K.source).getData()),this.actor.registerMessageHandler("LT",(z,K)=>this._getWorkerSource(z,K.type,K.source).loadTile(K)),this.actor.registerMessageHandler("RT",(z,K)=>this._getWorkerSource(z,K.type,K.source).reloadTile(K)),this.actor.registerMessageHandler("AT",(z,K)=>this._getWorkerSource(z,K.type,K.source).abortTile(K)),this.actor.registerMessageHandler("RMT",(z,K)=>this._getWorkerSource(z,K.type,K.source).removeTile(K)),this.actor.registerMessageHandler("RS",(z,K)=>u._(this,void 0,void 0,function*(){if(!this.workerSources[z]||!this.workerSources[z][K.type]||!this.workerSources[z][K.type][K.source])return;let te=this.workerSources[z][K.type][K.source];delete this.workerSources[z][K.type][K.source],te.removeSource!==void 0&&te.removeSource(K)})),this.actor.registerMessageHandler("RM",z=>u._(this,void 0,void 0,function*(){delete this.layerIndexes[z],delete this.availableImages[z],delete this.workerSources[z],delete this.demWorkerSources[z]})),this.actor.registerMessageHandler("SR",(z,K)=>u._(this,void 0,void 0,function*(){this.referrer=K})),this.actor.registerMessageHandler("SRPS",(z,K)=>this._syncRTLPluginState(z,K)),this.actor.registerMessageHandler("IS",(z,K)=>u._(this,void 0,void 0,function*(){this.self.importScripts(K)})),this.actor.registerMessageHandler("SI",(z,K)=>this._setImages(z,K)),this.actor.registerMessageHandler("UL",(z,K)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(z).update(K.layers,K.removedIds)})),this.actor.registerMessageHandler("SL",(z,K)=>u._(this,void 0,void 0,function*(){this._getLayerIndex(z).replace(K)}))}_setImages(N,z){return u._(this,void 0,void 0,function*(){this.availableImages[N]=z;for(let K in this.workerSources[N]){let te=this.workerSources[N][K];for(let he in te)te[he].availableImages=z}})}_syncRTLPluginState(N,z){return u._(this,void 0,void 0,function*(){if(u.bD.isParsed())return u.bD.getState();if(z.pluginStatus!=="loading")return u.bD.setState(z),z;let K=z.pluginURL;if(this.self.importScripts(K),u.bD.isParsed()){let te={pluginStatus:"loaded",pluginURL:K};return u.bD.setState(te),te}throw u.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${K}`)})}_getAvailableImages(N){let z=this.availableImages[N];return z||(z=[]),z}_getLayerIndex(N){let z=this.layerIndexes[N];return z||(z=this.layerIndexes[N]=new a),z}_getWorkerSource(N,z,K){if(this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][z]||(this.workerSources[N][z]={}),!this.workerSources[N][z][K]){let te={sendAsync:(he,me)=>(he.targetMapId=N,this.actor.sendAsync(he,me))};switch(z){case"vector":this.workerSources[N][z][K]=new T(te,this._getLayerIndex(N),this._getAvailableImages(N));break;case"geojson":this.workerSources[N][z][K]=new gs(te,this._getLayerIndex(N),this._getAvailableImages(N));break;default:this.workerSources[N][z][K]=new this.externalWorkerSourceTypes[z](te,this._getLayerIndex(N),this._getAvailableImages(N));}}return this.workerSources[N][z][K]}_getDEMWorkerSource(N,z){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][z]||(this.demWorkerSources[N][z]=new I),this.demWorkerSources[N][z]}}return u.i(self)&&(self.worker=new co(self)),co}),r("index",["exports","./shared"],function(u,a){"use strict";var m="4.7.1";let x,q,T={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:g=>new Promise((i,c)=>{let f=requestAnimationFrame(i);g.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),c(a.c())})}),getImageData(g,i=0){return this.getImageCanvasContext(g).getImageData(-i,-i,g.width+2*i,g.height+2*i)},getImageCanvasContext(g){let i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=g.width,i.height=g.height,c.drawImage(g,0,0,g.width,g.height),c},resolveURL:g=>(x||(x=document.createElement("a")),x.href=g,x.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(q==null&&(q=matchMedia("(prefers-reduced-motion: reduce)")),q.matches)}};class I{static testProp(i){if(!I.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in I.docStyle)return i[c];return i[0]}static create(i,c,f){let d=window.document.createElement(i);return c!==void 0&&(d.className=c),f&&f.appendChild(d),d}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(i,c){i.style[I.transformProp]=c}static addEventListener(i,c,f,d={}){i.addEventListener(c,f,"passive"in d?d:d.capture)}static removeEventListener(i,c,f,d={}){i.removeEventListener(c,f,"passive"in d?d:d.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(i){let c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}static getPoint(i,c,f){let d=c.boundingClientRect;return new a.P((f.clientX-d.left)/c.x-i.clientLeft,(f.clientY-d.top)/c.y-i.clientTop)}static mousePos(i,c){let f=I.getScale(i);return I.getPoint(i,f,c)}static touchPos(i,c){let f=[],d=I.getScale(i);for(let v=0;v<c.length;v++)f.push(I.getPoint(i,d,c[v]));return f}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}I.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);let k={supported:!1,testSupport:function(g){!de&&Y&&(pe?Z(g):B=g)}},B,Y,de=!1,pe=!1;function Z(g){let i=g.createTexture();g.bindTexture(g.TEXTURE_2D,i);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,Y),g.isContextLost())return;k.supported=!0}catch(c){}g.deleteTexture(i),de=!0}var H;typeof document!="undefined"&&(Y=document.createElement("img"),Y.onload=()=>{B&&Z(B),B=null,pe=!0},Y.onerror=()=>{de=!0,B=null},Y.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let i,c,f,d;g.resetRequestQueue=()=>{i=[],c=0,f=0,d={}},g.addThrottleControl=C=>{let O=f++;return d[O]=C,O},g.removeThrottleControl=C=>{delete d[C],S()},g.getImage=(C,O,D=!0)=>new Promise((L,j)=>{k.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),a.e(C,{type:"image"}),i.push({abortController:O,requestParameters:C,supportImageRefresh:D,state:"queued",onError:G=>{j(G)},onSuccess:G=>{L(G)}}),S()});let v=C=>a._(this,void 0,void 0,function*(){C.state="running";let{requestParameters:O,supportImageRefresh:D,onError:L,onSuccess:j,abortController:G}=C,X=D===!1&&!a.i(self)&&!a.g(O.url)&&(!O.headers||Object.keys(O.headers).reduce((oe,le)=>oe&&le==="accept",!0));c++;let re=X?E(O,G):a.m(O,G);try{let oe=yield re;delete C.abortController,C.state="completed",oe.data instanceof HTMLImageElement||a.b(oe.data)?j(oe):oe.data&&j({data:yield(ae=oe.data,typeof createImageBitmap=="function"?a.d(ae):a.f(ae)),cacheControl:oe.cacheControl,expires:oe.expires})}catch(oe){delete C.abortController,L(oe)}finally{c--,S()}var ae}),S=()=>{let C=(()=>{for(let O of Object.keys(d))if(d[O]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=c;O<C&&i.length>0;O++){let D=i.shift();D.abortController.signal.aborted?O--:v(D)}},E=(C,O)=>new Promise((D,L)=>{let j=new Image,G=C.url,X=C.credentials;X&&X==="include"?j.crossOrigin="use-credentials":(X&&X==="same-origin"||!a.s(G))&&(j.crossOrigin="anonymous"),O.signal.addEventListener("abort",()=>{j.src="",L(a.c())}),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,D({data:j})},j.onerror=()=>{j.onerror=j.onload=null,O.signal.aborted||L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=G})}(H||(H={})),H.resetRequestQueue();class J{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function ve(g){var i=new a.A(3);return i[0]=g[0],i[1]=g[1],i[2]=g[2],i}var be,Le=function(g,i,c){return g[0]=i[0]-c[0],g[1]=i[1]-c[1],g[2]=i[2]-c[2],g};be=new a.A(3),a.A!=Float32Array&&(be[0]=0,be[1]=0,be[2]=0);var Oe=function(g){var i=g[0],c=g[1];return i*i+c*c};function Ze(g){let i=[];if(typeof g=="string")i.push({id:"default",url:g});else if(g&&g.length>0){let c=[];for(let{id:f,url:d}of g){let v=`${f}${d}`;c.indexOf(v)===-1&&(c.push(v),i.push({id:f,url:d}))}}return i}function ft(g,i,c){let f=g.split("?");return f[0]+=`${i}${c}`,f.join("?")}(function(){var g=new a.A(2);a.A!=Float32Array&&(g[0]=0,g[1]=0)})();class He{constructor(i,c,f,d){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(c,d)}update(i,c,f){let{width:d,height:v}=i,S=!(this.size&&this.size[0]===d&&this.size[1]===v||f),{context:E}=this,{gl:C}=E;if(this.useMipmap=!!(c&&c.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!c||c.premultiply!==!1)),S)this.size=[d,v],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.b(i)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,i):C.texImage2D(C.TEXTURE_2D,0,this.format,d,v,0,this.format,C.UNSIGNED_BYTE,i.data);else{let{x:O,y:D}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.b(i)?C.texSubImage2D(C.TEXTURE_2D,0,O,D,C.RGBA,C.UNSIGNED_BYTE,i):C.texSubImage2D(C.TEXTURE_2D,0,O,D,d,v,C.RGBA,C.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D)}bind(i,c,f){let{context:d}=this,{gl:v}=d;v.bindTexture(v.TEXTURE_2D,this.texture),f!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=v.LINEAR),i!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,f||i),this.filter=i),c!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,c),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function _r(g){let{userImage:i}=g;return!!(i&&i.render&&i.render())&&(g.data.replace(new Uint8Array(i.data.buffer)),!0)}class Lr extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(let{ids:c,promiseResolve:f}of this.requestors)f(this._getImagesForIds(c));this.requestors=[]}}getImage(i){let c=this.images[i];if(c&&!c.data&&c.spriteData){let f=c.spriteData;c.data=new a.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let f=!0,d=c.data||c.spriteData;return this._validateStretch(c.stretchX,d&&d.width)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,d&&d.height)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new a.j(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,c){if(!i)return!0;let f=0;for(let d of i){if(d[0]<f||d[1]<d[0]||c<d[1])return!1;f=d[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;let f=c.spriteData,d=f&&f.width||c.data.width,v=f&&f.height||c.data.height;return!(i[0]<0||d<i[0]||i[1]<0||v<i[1]||i[2]<0||d<i[2]||i[3]<0||v<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,f=!0){let d=this.getImage(i);if(f&&(d.data.width!==c.data.width||d.data.height!==c.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=d.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){let c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((c,f)=>{let d=!0;if(!this.isLoaded())for(let v of i)this.images[v]||(d=!1);this.isLoaded()||d?c(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:c})})}_getImagesForIds(i){let c={};for(let f of i){let d=this.getImage(f);d||(this.fire(new a.k("styleimagemissing",{id:f})),d=this.getImage(f)),d?c[f]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:a.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){let{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){let c=this.patterns[i],f=this.getImage(i);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{let d={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new a.I(d,f);this.patterns[i]={bin:d,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){let c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new He(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){let i=[];for(let v in this.patterns)i.push(this.patterns[v].bin);let{w:c,h:f}=a.p(i),d=this.atlasImage;d.resize({width:c||1,height:f||1});for(let v in this.patterns){let{bin:S}=this.patterns[v],E=S.x+1,C=S.y+1,O=this.getImage(v).data,D=O.width,L=O.height;a.R.copy(O,d,{x:0,y:0},{x:E,y:C},{width:D,height:L}),a.R.copy(O,d,{x:0,y:L-1},{x:E,y:C-1},{width:D,height:1}),a.R.copy(O,d,{x:0,y:0},{x:E,y:C+L},{width:D,height:1}),a.R.copy(O,d,{x:D-1,y:0},{x:E-1,y:C},{width:1,height:L}),a.R.copy(O,d,{x:0,y:0},{x:E+D,y:C},{width:1,height:L})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(let c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;let f=this.getImage(c);f||a.w(`Image with ID: "${c}" was not found`),_r(f)&&this.updateImage(c,f)}}}let pt=1e20;function Lt(g,i,c,f,d,v,S,E,C){for(let O=i;O<i+f;O++)wr(g,c*v+O,v,d,S,E,C);for(let O=c;O<c+d;O++)wr(g,O*v+i,1,f,S,E,C)}function wr(g,i,c,f,d,v,S){v[0]=0,S[0]=-pt,S[1]=pt,d[0]=g[i];for(let E=1,C=0,O=0;E<f;E++){d[E]=g[i+E*c];let D=E*E;do{let L=v[C];O=(d[E]-d[L]+D-L*L)/(E-L)/2}while(O<=S[C]&&--C>-1);C++,v[C]=E,S[C]=O,S[C+1]=pt}for(let E=0,C=0;E<f;E++){for(;S[C+1]<E;)C++;let O=v[C],D=E-O;g[i+E*c]=d[O]+D*D}}class hr{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return a._(this,void 0,void 0,function*(){let c=[];for(let v in i)for(let S of i[v])c.push(this._getAndCacheGlyphsPromise(v,S));let f=yield Promise.all(c),d={};for(let{stack:v,id:S,glyph:E}of f)d[v]||(d[v]={}),d[v][S]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return d})}_getAndCacheGlyphsPromise(i,c){return a._(this,void 0,void 0,function*(){let f=this.entries[i];f||(f=this.entries[i]={glyphs:{},requests:{},ranges:{}});let d=f.glyphs[c];if(d!==void 0)return{stack:i,id:c,glyph:d};if(d=this._tinySDF(f,i,c),d)return f.glyphs[c]=d,{stack:i,id:c,glyph:d};let v=Math.floor(c/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[v])return{stack:i,id:c,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[v]){let E=hr.loadGlyphRange(i,v,this.url,this.requestManager);f.requests[v]=E}let S=yield f.requests[v];for(let E in S)this._doesCharSupportLocalGlyph(+E)||(f.glyphs[+E]=S[+E]);return f.ranges[v]=!0,{stack:i,id:c,glyph:S[c]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))}_tinySDF(i,c,f){let d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(f))return;let v=i.tinySDF;if(!v){let E="400";/bold/i.test(c)?E="900":/medium/i.test(c)?E="500":/light/i.test(c)&&(E="200"),v=i.tinySDF=new hr.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:E})}let S=v.draw(String.fromCharCode(f));return{id:f,bitmap:new a.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}hr.loadGlyphRange=function(g,i,c,f){return a._(this,void 0,void 0,function*(){let d=256*i,v=d+255,S=f.transformRequest(c.replace("{fontstack}",g).replace("{range}",`${d}-${v}`),"Glyphs"),E=yield a.l(S,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${i}, ${d}-${v}`);let C={};for(let O of a.n(E.data))C[O.id]=O;return C})},hr.TinySDF=class{constructor({fontSize:g=24,buffer:i=3,radius:c=8,cutoff:f=.25,fontFamily:d="sans-serif",fontWeight:v="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=c;let E=this.size=g+4*i,C=this._createCanvas(E),O=this.ctx=C.getContext("2d",{willReadFrequently:!0});O.font=`${S} ${v} ${g}px ${d}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(g){let i=document.createElement("canvas");return i.width=i.height=g,i}draw(g){let{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:d,actualBoundingBoxRight:v}=this.ctx.measureText(g),S=Math.ceil(c),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-d))),C=Math.min(this.size-this.buffer,S+Math.ceil(f)),O=E+2*this.buffer,D=C+2*this.buffer,L=Math.max(O*D,0),j=new Uint8ClampedArray(L),G={data:j,width:O,height:D,glyphWidth:E,glyphHeight:C,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(E===0||C===0)return G;let{ctx:X,buffer:re,gridInner:ae,gridOuter:oe}=this;X.clearRect(re,re,E,C),X.fillText(g,re,re+S);let le=X.getImageData(re,re,E,C);oe.fill(pt,0,L),ae.fill(0,0,L);for(let Q=0;Q<C;Q++)for(let fe=0;fe<E;fe++){let ge=le.data[4*(Q*E+fe)+3]/255;if(ge===0)continue;let we=(Q+re)*O+fe+re;if(ge===1)oe[we]=0,ae[we]=pt;else{let Me=.5-ge;oe[we]=Me>0?Me*Me:0,ae[we]=Me<0?Me*Me:0}}Lt(oe,0,0,O,D,O,this.f,this.v,this.z),Lt(ae,re,re,E,C,O,this.f,this.v,this.z);for(let Q=0;Q<L;Q++){let fe=Math.sqrt(oe[Q])-Math.sqrt(ae[Q]);j[Q]=Math.round(255-255*(fe/this.radius+this.cutoff))}return G}};class Xr{constructor(){this.specification=a.v.light.position}possiblyEvaluate(i,c){return a.x(i.expression.evaluate(c))}interpolate(i,c,f){return{x:a.y.number(i.x,c.x,f),y:a.y.number(i.y,c.y,f),z:a.y.number(i.z,c.z,f)}}}let Tr;class en extends a.E{constructor(i){super(),Tr=Tr||new a.q({anchor:new a.D(a.v.light.anchor),position:new Xr,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Tr),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(a.r,i,c))for(let f in i){let d=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f){return(!f||f.validate!==!1)&&a.t(this,i.call(a.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}let si=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Pi extends a.E{constructor(i){super(),this._transitionable=new a.T(si),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(i,c={}){if(!this._validate(a.B,i,c)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let f in i){let d=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f={}){return(f==null?void 0:f.validate)!==!1&&a.t(this,i.call(a.u,a.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class Vo{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){let f=i.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,c)),this.dashEntry[f]}getDashRanges(i,c,f){let d=[],v=i.length%2==1?-i[i.length-1]*f:0,S=i[0]*f,E=!0;d.push({left:v,right:S,isDash:E,zeroLength:i[0]===0});let C=i[0];for(let O=1;O<i.length;O++){E=!E;let D=i[O];v=C*f,C+=D,S=C*f,d.push({left:v,right:S,isDash:E,zeroLength:D===0})}return d}addRoundDash(i,c,f){let d=c/2;for(let v=-f;v<=f;v++){let S=this.width*(this.nextRow+f+v),E=0,C=i[E];for(let O=0;O<this.width;O++){O/C.right>1&&(C=i[++E]);let D=Math.abs(O-C.left),L=Math.abs(O-C.right),j=Math.min(D,L),G,X=v/f*(d+1);if(C.isDash){let re=d-Math.abs(X);G=Math.sqrt(j*j+re*re)}else G=d-Math.sqrt(j*j+X*X);this.data[S+O]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(i){for(let E=i.length-1;E>=0;--E){let C=i[E],O=i[E+1];C.zeroLength?i.splice(E,1):O&&O.isDash===C.isDash&&(O.left=C.left,i.splice(E,1))}let c=i[0],f=i[i.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);let d=this.width*this.nextRow,v=0,S=i[v];for(let E=0;E<this.width;E++){E/S.right>1&&(S=i[++v]);let C=Math.abs(E-S.left),O=Math.abs(E-S.right),D=Math.min(C,O);this.data[d+E]=Math.max(0,Math.min(255,(S.isDash?D:-D)+128))}}addDash(i,c){let f=c?7:0,d=2*f+1;if(this.nextRow+d>this.height)return a.w("LineAtlas out of space"),null;let v=0;for(let E=0;E<i.length;E++)v+=i[E];if(v!==0){let E=this.width/v,C=this.getDashRanges(i,this.width,E);c?this.addRoundDash(C,E,f):this.addRegularDash(C)}let S={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=d,this.dirty=!0,S}bind(i){let c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}let Fa="maplibre_preloaded_worker_pool";class sa{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<sa.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fa]}numActive(){return Object.keys(this.active).length}}let $o=Math.floor(T.hardwareConcurrency/2),tn,rn;function so(){return tn||(tn=new sa),tn}sa.workerCount=a.C(globalThis)?Math.max(Math.min($o,3),1):1;class za{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c;let f=this.workerPool.acquire(c);for(let d=0;d<f.length;d++){let v=new a.F(f[d],c);v.name=`Worker ${d}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c){let f=[];for(let d of this.actors)f.push(d.sendAsync({type:i,data:c}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,c){for(let f of this.actors)f.registerMessageHandler(i,c)}}function ms(){return rn||(rn=new za(so(),a.G),rn.registerMessageHandler("GR",(g,i,c)=>a.m(i,c))),rn}function Na(g,i){let c=a.H();return a.J(c,c,[1,1,0]),a.K(c,c,[.5*g.width,.5*g.height,1]),a.L(c,c,g.calculatePosMatrix(i.toUnwrapped()))}function Ba(g,i,c,f,d,v){let S=function(L,j,G){if(L)for(let X of L){let re=j[X];if(re&&re.source===G&&re.type==="fill-extrusion")return!0}else for(let X in j){let re=j[X];if(re.source===G&&re.type==="fill-extrusion")return!0}return!1}(d&&d.layers,i,g.id),E=v.maxPitchScaleFactor(),C=g.tilesIn(f,E,S);C.sort(uo);let O=[];for(let L of C)O.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(i,c,g._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,d,v,E,Na(g.transform,L.tileID))});let D=function(L){let j={},G={};for(let X of L){let re=X.queryResults,ae=X.wrappedTileID,oe=G[ae]=G[ae]||{};for(let le in re){let Q=re[le],fe=oe[le]=oe[le]||{},ge=j[le]=j[le]||[];for(let we of Q)fe[we.featureIndex]||(fe[we.featureIndex]=!0,ge.push(we))}}return j}(O);for(let L in D)D[L].forEach(j=>{let G=j.feature,X=g.getFeatureState(G.layer["source-layer"],G.id);G.source=G.layer.source,G.layer["source-layer"]&&(G.sourceLayer=G.layer["source-layer"]),G.state=X});return D}function uo(g,i){let c=g.tileID,f=i.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}function Wo(g,i,c){return a._(this,void 0,void 0,function*(){let f=g;if(g.url?f=(yield a.h(i.transformRequest(g.url,"Source"),c)).data:yield T.frameAsync(c),!f)return null;let d=a.M(a.e(f,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(d.vectorLayerIds=f.vector_layers.map(v=>v.id)),d})}class Ae{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof a.N?new a.N(i.lng,i.lat):a.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof a.N?new a.N(i.lng,i.lat):a.N.convert(i),this}extend(i){let c=this._sw,f=this._ne,d,v;if(i instanceof a.N)d=i,v=i;else{if(!(i instanceof Ae))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Ae.convert(i)):this.extend(a.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(a.N.convert(i)):this;if(d=i._sw,v=i._ne,!d||!v)return this}return c||f?(c.lng=Math.min(d.lng,c.lng),c.lat=Math.min(d.lat,c.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new a.N(d.lng,d.lat),this._ne=new a.N(v.lng,v.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){let{lng:c,lat:f}=a.N.convert(i),d=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&d}static convert(i){return i instanceof Ae?i:i&&new Ae(i)}static fromLngLat(i,c=0){let f=360*c/40075017,d=f/Math.cos(Math.PI/180*i.lat);return new Ae(new a.N(i.lng-d,i.lat-f),new a.N(i.lng+d,i.lat+f))}adjustAntiMeridian(){let i=new a.N(this._sw.lng,this._sw.lat),c=new a.N(this._ne.lng,this._ne.lat);return new Ae(i,i.lng>c.lng?new a.N(c.lng+360,c.lat):c)}}class vs{constructor(i,c,f){this.bounds=Ae.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){let c=Math.pow(2,i.z),f=Math.floor(a.O(this.bounds.getWest())*c),d=Math.floor(a.Q(this.bounds.getNorth())*c),v=Math.ceil(a.O(this.bounds.getEast())*c),S=Math.ceil(a.Q(this.bounds.getSouth())*c);return i.x>=f&&i.x<v&&i.y>=d&&i.y<S}}class Qu extends a.E{constructor(i,c,f,d){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(c,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let i=yield Wo(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(a.e(this,i),i.bounds&&(this.tileBounds=new vs(i.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new a.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(i){return a._(this,void 0,void 0,function*(){let c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(c,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((v,S)=>{i.reloadPromise={resolve:v,reject:S}})}else i.actor=this.dispatcher.getActor(),d="LT";i.abortController=new AbortController;try{let v=yield i.actor.sendAsync({type:d,data:f},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,v)}catch(v){if(delete i.abortController,i.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,c){if(c&&c.resourceTiming&&(i.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&i.setExpiryData(c),i.loadVectorData(c,this.map.painter),i.reloadPromise){let f=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(f.resolve).catch(f.reject)}}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class nr extends a.E{constructor(i,c,f,d){super(),this.id=i,this.dispatcher=f,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},c),a.e(this,a.M(c,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let i=yield Wo(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(a.e(this,i),i.bounds&&(this.tileBounds=new vs(i.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new a.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return a.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return a._(this,void 0,void 0,function*(){let c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{let f=yield H.getImage(this.map._requestManager.transformRequest(c,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&i.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let d=this.map.painter.context,v=d.gl,S=f.data;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new He(d,S,v.RGBA,{useMipmap:!0}),i.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(f){if(delete i.abortController,i.aborted)i.state="unloaded";else if(f)throw i.state="errored",f}})}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class ue extends nr{constructor(i,c,f,d){super(i,c,f,d),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i){return a._(this,void 0,void 0,function*(){let c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(c,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{let d=yield H.getImage(f,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(d&&d.data){let v=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&i.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let S=a.b(v)&&a.U()?v:yield this.readImageNow(v),E={type:this.type,uid:i.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();let C=yield i.actor.sendAsync({type:"LDT",data:E});i.dem=C,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(d){if(delete i.abortController,i.aborted)i.state="unloaded";else if(d)throw i.state="errored",d}})}readImageNow(i){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.V()){let c=i.width+2,f=i.height+2;try{return new a.R({width:c,height:f},(yield a.W(i,-1,-1,c,f)))}catch(d){}}return T.getImageData(i,1)})}_getNeighboringTiles(i){let c=i.canonical,f=Math.pow(2,c.z),d=(c.x-1+f)%f,v=c.x===0?i.wrap-1:i.wrap,S=(c.x+1+f)%f,E=c.x+1===f?i.wrap+1:i.wrap,C={};return C[new a.S(i.overscaledZ,v,c.z,d,c.y).key]={backfilled:!1},C[new a.S(i.overscaledZ,E,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(C[new a.S(i.overscaledZ,v,c.z,d,c.y-1).key]={backfilled:!1},C[new a.S(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},C[new a.S(i.overscaledZ,E,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<f&&(C[new a.S(i.overscaledZ,v,c.z,d,c.y+1).key]={backfilled:!1},C[new a.S(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},C[new a.S(i.overscaledZ,E,c.z,S,c.y+1).key]={backfilled:!1}),C}unloadTile(i){return a._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class qe extends a.E{constructor(i,c,f,d){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(d),this._data=c.data,this._options=a.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;let v=a.X/this.tileSize;c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*v,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*v,extent:a.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.X,radius:(c.clusterRadius||50)*v,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return a._(this,void 0,void 0,function*(){let i=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,c,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:c,offset:f}})}_updateWorkerData(i){return a._(this,void 0,void 0,function*(){let c=a.e({type:this.type},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(T.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{let f=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let d=null;f.resourceTiming&&f.resourceTiming[this.id]&&(d=f.resourceTiming[this.id].slice(0));let v={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&a.e(v,{resourceTiming:d}),this.fire(new a.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(i){return a._(this,void 0,void 0,function*(){let c=i.actor?"RT":"LT";i.actor=this.actor;let f={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;let d=yield this.actor.sendAsync({type:c,data:f},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(d,this.map.painter,c==="RT")})}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ce=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ut extends a.E{constructor(i,c,f,d){super(),this.id=i,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=c}load(i){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let c=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,i&&(this.coordinates=i),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new a.j(c))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;let c=i.map(a.Z.fromLngLat);this.tileID=function(d){let v=1/0,S=1/0,E=-1/0,C=-1/0;for(let j of d)v=Math.min(v,j.x),S=Math.min(S,j.y),E=Math.max(E,j.x),C=Math.max(C,j.y);let O=Math.max(E-v,C-S),D=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),L=Math.pow(2,D);return new a.a1(D,Math.floor((v+E)/2*L),Math.floor((S+C)/2*L))}(c),this.minzoom=this.maxzoom=this.tileID.z;let f=c.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new a.$,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,a.X,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,a.X),this._boundsArray.emplaceBack(f[2].x,f[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new He(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class rt extends ut{constructor(i,c,f,d){super(i,c,f,d),this.roundZoom=!0,this.type="video",this.options=c}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;let i=this.options;this.urls=[];for(let c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{let c=yield a.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new a.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){let c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new He(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Be extends ut{constructor(i,c,f,d){super(i,c,f,d),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(S=>typeof S!="number"))||this.fire(new a.j(new a.a2(`sources.${i}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new a.j(new a.a2(`sources.${i}`,null,"missing required property \"coordinates\""))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${i}`,null,"optional \"animate\" property must be a boolean value"))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${i}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new a.j(new a.a2(`sources.${i}`,null,"missing required property \"canvas\""))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let c=this.map.painter.context,f=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new He(c,this.canvas,f.RGBA,{premultiply:!0});let d=!1;for(let v in this.tiles){let S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,d=!0)}d&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}let At={},Ct=g=>{switch(g){case"geojson":return qe;case"image":return ut;case"raster":return nr;case"raster-dem":return ue;case"vector":return Qu;case"video":return rt;case"canvas":return Be;}return At[g]},Pe="RTLPluginLoaded";class Qt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ms()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return a._(this,arguments,void 0,function*(c,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=T.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(Pe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ir=null;function nn(){return Ir||(Ir=new Qt),Ir}class an{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=a.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){let c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(d,v){let S={};if(!v)return S;for(let E of d){let C=E.layerIds.map(O=>v.getLayer(O)).filter(Boolean);if(C.length!==0){E.layers=C,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(O=>C.filter(D=>D.id===O)[0]));for(let O of C)S[O.id]=E}}return S}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(let d in this.buckets){let v=this.buckets[d];if(v instanceof a.a6){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let d in this.buckets){let v=this.buckets[d];if(v instanceof a.a6&&v.hasRTLText){this.hasRTLText=!0,nn().lazyLoad();break}}this.queryPadding=0;for(let d in this.buckets){let v=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(d).queryRadius(v))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(let i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(let f in this.buckets){let d=this.buckets[f];d.uploadPending()&&d.upload(i)}let c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new He(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new He(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,f,d,v,S,E,C,O,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:v,scale:S,tileSize:this.tileSize,pixelPosMatrix:D,transform:C,params:E,queryPadding:this.queryPadding*O},i,c,f):{}}querySourceFeatures(i,c){let f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;let d=f.loadVTLayers(),v=c&&c.sourceLayer?c.sourceLayer:"",S=d._geojsonTileLayer||d[v];if(!S)return;let E=a.a7(c&&c.filter),{z:C,x:O,y:D}=this.tileID.canonical,L={z:C,x:O,y:D};for(let j=0;j<S.length;j++){let G=S.feature(j);if(E.needGeometry){let ae=a.a8(G,!0);if(!E.filter(new a.z(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!E.filter(new a.z(this.tileID.overscaledZ),G))continue;let X=f.getId(G,v),re=new a.a9(G,C,O,D,X);re.tile=L,i.push(re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){let c=this.expirationTime;if(i.cacheControl){let f=a.aa(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){let f=Date.now(),d=!1;if(this.expirationTime>f)d=!1;else if(c){if(this.expirationTime<c)d=!0;else{let v=this.expirationTime-c;v?this.expirationTime=f+Math.max(v,3e4):d=!0}}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;let f=this.latestFeatureIndex.loadVTLayers();for(let d in this.buckets){if(!c.style.hasLayer(d))continue;let v=this.buckets[d],S=v.layers[0].sourceLayer||"_geojsonTileLayer",E=f[S],C=i[S];if(!E||!C||Object.keys(C).length===0)continue;v.update(C,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});let O=c&&c.style&&c.style.getLayer(d);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<T.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=T.now()+i}setDependencies(i,c){let f={};for(let d of c)f[d]=!0;this.dependencies[i]=f}hasDependency(i,c){for(let f of i){let d=this.dependencies[f];if(d){for(let v of c)if(d[v])return!0}}return!1}}class Ne{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(let i in this.data)for(let c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,f){let d=i.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);let v={value:c,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(i,v)},f)),this.data[d].push(v),this.order.push(d),this.order.length>this.max){let S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){let c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){let c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;let f=i.wrapped().key,d=c===void 0?0:this.data[f].indexOf(c),v=this.data[f][d];return this.data[f].splice(d,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){let c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){let c=[];for(let f in this.data)for(let d of this.data[f])i(d.value)||c.push(d);for(let f of c)this.remove(f.value.tileID,f)}}class Nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,f){let d=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][d]=this.stateChanges[i][d]||{},a.e(this.stateChanges[i][d],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(let v in this.state[i])v!==d&&(this.deletedStates[i][v]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][d]===null){this.deletedStates[i][d]={};for(let v in this.state[i][d])f[v]||(this.deletedStates[i][d][v]=null)}else for(let v in f)this.deletedStates[i]&&this.deletedStates[i][d]&&this.deletedStates[i][d][v]===null&&delete this.deletedStates[i][d][v]}removeFeatureState(i,c,f){if(this.deletedStates[i]===null)return;let d=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&c!==void 0)this.deletedStates[i][d]!==null&&(this.deletedStates[i][d]=this.deletedStates[i][d]||{},this.deletedStates[i][d][f]=null);else if(c!==void 0){if(this.stateChanges[i]&&this.stateChanges[i][d])for(f in this.deletedStates[i][d]={},this.stateChanges[i][d])this.deletedStates[i][d][f]=null;else this.deletedStates[i][d]=null;}else this.deletedStates[i]=null}getState(i,c){let f=String(c),d=a.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){let v=this.deletedStates[i][c];if(v===null)return{};for(let S in v)delete d[S]}return d}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){let f={};for(let d in this.stateChanges){this.state[d]=this.state[d]||{};let v={};for(let S in this.stateChanges[d])this.state[d][S]||(this.state[d][S]={}),a.e(this.state[d][S],this.stateChanges[d][S]),v[S]=this.state[d][S];f[d]=v}for(let d in this.deletedStates){this.state[d]=this.state[d]||{};let v={};if(this.deletedStates[d]===null)for(let S in this.state[d])v[S]={},this.state[d][S]={};else for(let S in this.deletedStates[d]){if(this.deletedStates[d][S]===null)this.state[d][S]={};else for(let E of Object.keys(this.deletedStates[d][S]))delete this.state[d][S][E];v[S]=this.state[d][S]}f[d]=f[d]||{},a.e(f[d],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(let d in i)i[d].setFeatureState(f,c)}}class qt extends a.E{constructor(i,c,f){super(),this.id=i,this.dispatcher=f,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,v,S,E)=>{let C=new(Ct(v.type))(d,v,S,E);if(C.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${C.id}`);return C})(i,c,f,this),this._tiles={},this._cache=new Ne(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let i in this._tiles){let c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c,f){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,c,f)}catch(d){i.state="errored",d.status!==404?this._source.fire(new a.j(d,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new a.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let c in this._tiles){let f=this._tiles[c];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(zi).map(i=>i.key)}getRenderableIds(i){let c=[];for(let f in this._tiles)this._isIdRenderable(f,i)&&c.push(this._tiles[f]);return i?c.sort((f,d)=>{let v=f.tileID,S=d.tileID,E=new a.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),C=new a.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-S.overscaledZ||C.y-E.y||C.x-E.x}).map(f=>f.tileID.key):c.map(f=>f.tileID).sort(zi).map(f=>f.key)}hasRenderableParent(i){let c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){return a._(this,void 0,void 0,function*(){let f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=c),yield this._loadTile(f,i,c))})}_tileLoaded(i,c,f){i.timeAdded=T.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){let c=this.getRenderableIds();for(let d=0;d<c.length;d++){let v=c[d];if(i.neighboringTiles&&i.neighboringTiles[v]){let S=this.getTileByID(v);f(i,S),f(S,i)}}function f(d,v){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let S=v.tileID.canonical.x-d.tileID.canonical.x,E=v.tileID.canonical.y-d.tileID.canonical.y,C=Math.pow(2,d.tileID.canonical.z),O=v.tileID.key;S===0&&E===0||Math.abs(E)>1||(Math.abs(S)>1&&(Math.abs(S+C)===1?S+=C:Math.abs(S-C)===1&&(S-=C)),v.dem&&d.dem&&(d.dem.backfillBorder(v.dem,S,E),d.neighboringTiles&&d.neighboringTiles[O]&&(d.neighboringTiles[O].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,f,d){for(let v in this._tiles){let S=this._tiles[v];if(d[v]||!S.hasData()||S.tileID.overscaledZ<=c||S.tileID.overscaledZ>f)continue;let E=S.tileID;for(;S&&S.tileID.overscaledZ>c+1;){let O=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[O.key],S&&S.hasData()&&(E=O)}let C=E;for(;C.overscaledZ>c;)if(C=C.scaledTo(C.overscaledZ-1),i[C.key]){d[E.key]=E;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){let f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=i.overscaledZ-1;f>=c;f--){let d=i.scaledTo(f),v=this._getLoadedTile(d);if(v)return v}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){let c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){let c=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,d=Math.floor(c*f*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(v)}handleWrapJump(i){let c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){let f={};for(let d in this._tiles){let v=this._tiles[d];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+c),f[v.tileID.key]=v}this._tiles=f;for(let d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(let d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(i,c,f,d,v,S){let E={},C={},O=Object.keys(i),D=T.now();for(let L of O){let j=i[L],G=this._tiles[L];if(!G||G.fadeEndTime!==0&&G.fadeEndTime<=D)continue;let X=this.findLoadedParent(j,c),re=this.findLoadedSibling(j),ae=X||re||null;ae&&(this._addTile(ae.tileID),E[ae.tileID.key]=ae.tileID),C[L]=j}this._retainLoadedChildren(C,d,f,i);for(let L in E)i[L]||(this._coveredTiles[L]=!0,i[L]=E[L]);if(S){let L={},j={};for(let G of v)this._tiles[G.key].hasData()?L[G.key]=G:j[G.key]=G;for(let G in j){let X=j[G].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&(L[X[0].key]=i[X[0].key]=X[0],L[X[1].key]=i[X[1].key]=X[1],L[X[2].key]=i[X[2].key]=X[2],L[X[3].key]=i[X[3].key]=X[3],delete j[G])}for(let G in j){let X=j[G],re=this.findLoadedParent(X,this._source.minzoom),ae=this.findLoadedSibling(X),oe=re||ae||null;if(oe){L[oe.tileID.key]=i[oe.tileID.key]=oe.tileID;for(let le in L)L[le].isChildOf(oe.tileID)&&delete L[le]}}for(let G in this._tiles)L[G]||(this._coveredTiles[G]=!0)}}update(i,c){if(!this._sourceLoaded||this._paused)return;let f;this.transform=i,this.terrain=c,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new a.S(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(f=f.filter(D=>this._source.hasTile(D)))):f=[];let d=i.coveringZoomLevel(this._source),v=Math.max(d-qt.maxOverzooming,this._source.minzoom),S=Math.max(d+qt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let D={};for(let L of f)if(L.canonical.z>this._source.minzoom){let j=L.scaledTo(L.canonical.z-1);D[j.key]=j;let G=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));D[G.key]=G}f=f.concat(Object.values(D))}let E=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let C=this._updateRetainedTiles(f,d);Sn(this._source.type)&&this._updateCoveredAndRetainedTiles(C,v,S,d,f,c);for(let D in C)this._tiles[D].clearFadeHold();let O=a.ab(this._tiles,C);for(let D of O){let L=this._tiles[D];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(D)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){var f;let d={},v={},S=Math.max(c-qt.maxOverzooming,this._source.minzoom),E=Math.max(c+qt.maxUnderzooming,this._source.minzoom),C={};for(let O of i){let D=this._addTile(O);d[O.key]=O,D.hasData()||c<this._source.maxzoom&&(C[O.key]=O)}this._retainLoadedChildren(C,c,E,d);for(let O of i){let D=this._tiles[O.key];if(D.hasData())continue;if(c+1>this._source.maxzoom){let j=O.children(this._source.maxzoom)[0],G=this.getTile(j);if(G&&G.hasData()){d[j.key]=j;continue}}else{let j=O.children(this._source.maxzoom);if(d[j[0].key]&&d[j[1].key]&&d[j[2].key]&&d[j[3].key])continue}let L=D.wasRequested();for(let j=O.overscaledZ-1;j>=S;--j){let G=O.scaledTo(j);if(v[G.key])break;if(v[G.key]=!0,D=this.getTile(G),!D&&L&&(D=this._addTile(G)),D){let X=D.hasData();if((X||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||L)&&(d[G.key]=G),L=D.wasRequested(),X)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let i in this._tiles){let c=[],f,d=this._tiles[i].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){f=this._loadedParentTiles[d.key];break}c.push(d.key);let v=d.scaledTo(d.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;d=v}for(let v of c)this._loadedParentTiles[v]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let i in this._tiles){let c=this._tiles[i].tileID,f=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=f}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));let f=c;return c||(c=new an(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,i.key,c.state)),c.uses++,this._tiles[i.key]=c,f||this._source.fire(new a.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);let f=c.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){let c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(i){let c=i.sourceDataType;i.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,f){let d=[],v=this.transform;if(!v)return d;let S=f?v.getCameraQueryGeometry(i):i,E=i.map(X=>v.pointCoordinate(X,this.terrain)),C=S.map(X=>v.pointCoordinate(X,this.terrain)),O=this.getIds(),D=1/0,L=1/0,j=-1/0,G=-1/0;for(let X of C)D=Math.min(D,X.x),L=Math.min(L,X.y),j=Math.max(j,X.x),G=Math.max(G,X.y);for(let X=0;X<O.length;X++){let re=this._tiles[O[X]];if(re.holdingForFade())continue;let ae=re.tileID,oe=Math.pow(2,v.zoom-re.tileID.overscaledZ),le=c*re.queryPadding*a.X/re.tileSize/oe,Q=[ae.getTilePoint(new a.Z(D,L)),ae.getTilePoint(new a.Z(j,G))];if(Q[0].x-le<a.X&&Q[0].y-le<a.X&&Q[1].x+le>=0&&Q[1].y+le>=0){let fe=E.map(we=>ae.getTilePoint(we)),ge=C.map(we=>ae.getTilePoint(we));d.push({tile:re,tileID:ae,queryGeometry:fe,cameraQueryGeometry:ge,scale:oe})}}return d}getVisibleCoordinates(i){let c=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(let f of c)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Sn(this._source.type)){let i=T.now();for(let c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,f){this._state.updateState(i=i||"_geojsonTileLayer",c,f)}removeFeatureState(i,c,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,f)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,f){let d=this._tiles[i];d&&d.setDependencies(c,f)}reloadTilesForDependencies(i,c){for(let f in this._tiles)this._tiles[f].hasDependency(i,c)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,c))}}function zi(g,i){let c=Math.abs(2*g.wrap)-+(g.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return g.overscaledZ-i.overscaledZ||f-c||i.canonical.y-g.canonical.y||i.canonical.x-g.canonical.x}function Sn(g){return g==="raster"||g==="image"||g==="video"}qt.maxOverzooming=10,qt.maxUnderzooming=3;class Rt{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.ac(i,0,1);let c=1,f=this._distances[c],d=i*this.paddedLength+this.padding;for(;f<d&&c<this._distances.length;)f=this._distances[++c];let v=c-1,S=this._distances[v],E=f-S,C=E>0?(d-S)/E:0;return this.points[v].mult(1-C).add(this.points[c].mult(C))}}function lo(g,i){let c=!0;return g==="always"||g!=="never"&&i!=="never"||(c=!1),c}class Go{constructor(i,c,f){let d=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(c/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)d.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,f,d,v){this._forEachCell(c,f,d,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(d),this.bboxes.push(v)}insertCircle(i,c,f,d){this._forEachCell(c-d,f-d,c+d,f+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(f),this.circles.push(d)}_insertBoxCell(i,c,f,d,v,S){this.boxCells[v].push(S)}_insertCircleCell(i,c,f,d,v,S){this.circleCells[v].push(S)}_query(i,c,f,d,v,S,E){if(f<0||i>this.width||d<0||c>this.height)return[];let C=[];if(i<=0&&c<=0&&this.width<=f&&this.height<=d){if(v)return[{key:null,x1:i,y1:c,x2:f,y2:d}];for(let O=0;O<this.boxKeys.length;O++)C.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){let D=this.circles[3*O],L=this.circles[3*O+1],j=this.circles[3*O+2];C.push({key:this.circleKeys[O],x1:D-j,y1:L-j,x2:D+j,y2:L+j})}}else this._forEachCell(i,c,f,d,this._queryCell,C,{hitTest:v,overlapMode:S,seenUids:{box:{},circle:{}}},E);return C}query(i,c,f,d){return this._query(i,c,f,d,!1,null)}hitTest(i,c,f,d,v,S){return this._query(i,c,f,d,!0,v,S).length>0}hitTestCircle(i,c,f,d,v){let S=i-f,E=i+f,C=c-f,O=c+f;if(E<0||S>this.width||O<0||C>this.height)return!1;let D=[];return this._forEachCell(S,C,E,O,this._queryCellCircle,D,{hitTest:!0,overlapMode:d,circle:{x:i,y:c,radius:f},seenUids:{box:{},circle:{}}},v),D.length>0}_queryCell(i,c,f,d,v,S,E,C){let{seenUids:O,hitTest:D,overlapMode:L}=E,j=this.boxCells[v];if(j!==null){let X=this.bboxes;for(let re of j)if(!O.box[re]){O.box[re]=!0;let ae=4*re,oe=this.boxKeys[re];if(i<=X[ae+2]&&c<=X[ae+3]&&f>=X[ae+0]&&d>=X[ae+1]&&(!C||C(oe))&&(!D||!lo(L,oe.overlapMode))&&(S.push({key:oe,x1:X[ae],y1:X[ae+1],x2:X[ae+2],y2:X[ae+3]}),D))return!0}}let G=this.circleCells[v];if(G!==null){let X=this.circles;for(let re of G)if(!O.circle[re]){O.circle[re]=!0;let ae=3*re,oe=this.circleKeys[re];if(this._circleAndRectCollide(X[ae],X[ae+1],X[ae+2],i,c,f,d)&&(!C||C(oe))&&(!D||!lo(L,oe.overlapMode))){let le=X[ae],Q=X[ae+1],fe=X[ae+2];if(S.push({key:oe,x1:le-fe,y1:Q-fe,x2:le+fe,y2:Q+fe}),D)return!0}}}return!1}_queryCellCircle(i,c,f,d,v,S,E,C){let{circle:O,seenUids:D,overlapMode:L}=E,j=this.boxCells[v];if(j!==null){let X=this.bboxes;for(let re of j)if(!D.box[re]){D.box[re]=!0;let ae=4*re,oe=this.boxKeys[re];if(this._circleAndRectCollide(O.x,O.y,O.radius,X[ae+0],X[ae+1],X[ae+2],X[ae+3])&&(!C||C(oe))&&!lo(L,oe.overlapMode))return S.push(!0),!0}}let G=this.circleCells[v];if(G!==null){let X=this.circles;for(let re of G)if(!D.circle[re]){D.circle[re]=!0;let ae=3*re,oe=this.circleKeys[re];if(this._circlesCollide(X[ae],X[ae+1],X[ae+2],O.x,O.y,O.radius)&&(!C||C(oe))&&!lo(L,oe.overlapMode))return S.push(!0),!0}}}_forEachCell(i,c,f,d,v,S,E,C){let O=this._convertToXCellCoord(i),D=this._convertToYCellCoord(c),L=this._convertToXCellCoord(f),j=this._convertToYCellCoord(d);for(let G=O;G<=L;G++)for(let X=D;X<=j;X++)if(v.call(this,i,c,f,d,this.xCellCount*X+G,S,E,C))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,f,d,v,S){let E=d-i,C=v-c,O=f+S;return O*O>E*E+C*C}_circleAndRectCollide(i,c,f,d,v,S,E){let C=(S-d)/2,O=Math.abs(i-(d+C));if(O>C+f)return!1;let D=(E-v)/2,L=Math.abs(c-(v+D));if(L>D+f)return!1;if(O<=C||L<=D)return!0;let j=O-C,G=L-D;return j*j+G*G<=f*f}}function gs(g,i,c,f,d){let v=a.H();return i?(a.K(v,v,[1/d,1/d,1]),c||a.ad(v,v,f.angle)):a.L(v,f.labelPlaneMatrix,g),v}function co(g,i,c,f,d){if(i){let v=a.ae(g);return a.K(v,v,[d,d,1]),c||a.ad(v,v,-f.angle),v}return f.glCoordMatrix}function ie(g,i,c,f){let d;f?(d=[g,i,f(g,i),1],a.af(d,d,c)):(d=[g,i,0,1],tr(d,d,c));let v=d[3];return{point:new a.P(d[0]/v,d[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function N(g,i){return .5+g/i*.5}function z(g,i){return g.x>=-i[0]&&g.x<=i[0]&&g.y>=-i[1]&&g.y<=i[1]}function K(g,i,c,f,d,v,S,E,C,O,D,L,j,G,X){let re=f?g.textSizeData:g.iconSizeData,ae=a.ag(re,c.transform.zoom),oe=[256/c.width*2+1,256/c.height*2+1],le=f?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;le.clear();let Q=g.lineVertexArray,fe=f?g.text.placedSymbolArray:g.icon.placedSymbolArray,ge=c.transform.width/c.transform.height,we=!1;for(let Me=0;Me<fe.length;Me++){let Fe=fe.get(Me);if(Fe.hidden||Fe.writingMode===a.ah.vertical&&!we){xt(Fe.numGlyphs,le);continue}we=!1;let Ge=ie(Fe.anchorX,Fe.anchorY,i,X);if(!z(Ge.point,oe)){xt(Fe.numGlyphs,le);continue}let it=N(c.transform.cameraToCenterDistance,Ge.signedDistanceFromCamera),Ve=a.ai(re,ae,Fe),je=S?Ve/it:Ve*it,ct={getElevation:X,labelPlaneMatrix:d,lineVertexArray:Q,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:O,tileAnchorPoint:new a.P(Fe.anchorX,Fe.anchorY),unwrappedTileID:D,width:L,height:j,translation:G},Pt=me(ct,Fe,je,!1,E,i,v,g.glyphOffsetArray,le,ge,C);we=Pt.useVertical,(Pt.notEnoughRoom||we||Pt.needsFlipping&&me(ct,Fe,je,!0,E,i,v,g.glyphOffsetArray,le,ge,C).notEnoughRoom)&&xt(Fe.numGlyphs,le)}f?g.text.dynamicLayoutVertexBuffer.updateData(le):g.icon.dynamicLayoutVertexBuffer.updateData(le)}function te(g,i,c,f,d,v,S,E){let C=v.glyphStartIndex+v.numGlyphs,O=v.lineStartIndex,D=v.lineStartIndex+v.lineLength,L=i.getoffsetX(v.glyphStartIndex),j=i.getoffsetX(C-1),G=Ue(g*L,c,f,d,v.segment,O,D,E,S);if(!G)return null;let X=Ue(g*j,c,f,d,v.segment,O,D,E,S);return X?E.projectionCache.anyProjectionOccluded?null:{first:G,last:X}:null}function he(g,i,c,f){return g===a.ah.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*f?{useVertical:!0}:(g===a.ah.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function me(g,i,c,f,d,v,S,E,C,O,D){let L=c/24,j=i.lineOffsetX*L,G=i.lineOffsetY*L,X;if(i.numGlyphs>1){let re=i.glyphStartIndex+i.numGlyphs,ae=i.lineStartIndex,oe=i.lineStartIndex+i.lineLength,le=te(L,E,j,G,f,i,D,g);if(!le)return{notEnoughRoom:!0};let Q=ie(le.first.point.x,le.first.point.y,S,g.getElevation).point,fe=ie(le.last.point.x,le.last.point.y,S,g.getElevation).point;if(d&&!f){let ge=he(i.writingMode,Q,fe,O);if(ge)return ge}X=[le.first];for(let ge=i.glyphStartIndex+1;ge<re-1;ge++)X.push(Ue(L*E.getoffsetX(ge),j,G,f,i.segment,ae,oe,g,D));X.push(le.last)}else{if(d&&!f){let ae=ie(g.tileAnchorPoint.x,g.tileAnchorPoint.y,v,g.getElevation).point,oe=i.lineStartIndex+i.segment+1,le=new a.P(g.lineVertexArray.getx(oe),g.lineVertexArray.gety(oe)),Q=ie(le.x,le.y,v,g.getElevation),fe=Q.signedDistanceFromCamera>0?Q.point:function(we,Me,Fe,Ge,it,Ve){return _e(we,Me,Fe,1,it,Ve)}(g.tileAnchorPoint,le,ae,0,v,g),ge=he(i.writingMode,ae,fe,O);if(ge)return ge}let re=Ue(L*E.getoffsetX(i.glyphStartIndex),j,G,f,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,g,D);if(!re||g.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};X=[re]}for(let re of X)a.aj(C,re.point,re.angle);return{}}function _e(g,i,c,f,d,v){let S=g.add(g.sub(i)._unit()),E=d!==void 0?ie(S.x,S.y,d,v.getElevation).point:Te(S.x,S.y,v).point,C=c.sub(E);return c.add(C._mult(f/C.mag()))}function se(g,i,c){let f=i.projectionCache;if(f.projections[g])return f.projections[g];let d=new a.P(i.lineVertexArray.getx(g),i.lineVertexArray.gety(g)),v=Te(d.x,d.y,i);if(v.signedDistanceFromCamera>0)return f.projections[g]=v.point,f.anyProjectionOccluded=f.anyProjectionOccluded||v.isOccluded,v.point;let S=g-c.direction;return function(E,C,O,D,L){return _e(E,C,O,D,void 0,L)}(c.distanceFromAnchor===0?i.tileAnchorPoint:new a.P(i.lineVertexArray.getx(S),i.lineVertexArray.gety(S)),d,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,i)}function Te(g,i,c){let f=g+c.translation[0],d=i+c.translation[1],v;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(v=c.projection.projectTileCoordinates(f,d,c.unwrappedTileID,c.getElevation),v.point.x=(.5*v.point.x+.5)*c.width,v.point.y=(.5*-v.point.y+.5)*c.height):(v=ie(f,d,c.labelPlaneMatrix,c.getElevation),v.isOccluded=!1),v}function ke(g,i,c){return g._unit()._perp()._mult(i*c)}function Se(g,i,c,f,d,v,S,E,C){if(E.projectionCache.offsets[g])return E.projectionCache.offsets[g];let O=c.add(i);if(g+C.direction<f||g+C.direction>=d)return E.projectionCache.offsets[g]=O,O;let D=se(g+C.direction,E,C),L=ke(D.sub(c),S,C.direction),j=c.add(L),G=D.add(L);return E.projectionCache.offsets[g]=a.ak(v,O,j,G)||O,E.projectionCache.offsets[g]}function Ue(g,i,c,f,d,v,S,E,C){let O=f?g-i:g+i,D=O>0?1:-1,L=0;f&&(D*=-1,L=Math.PI),D<0&&(L+=Math.PI);let j,G=D>0?v+d:v+d+1;E.projectionCache.cachedAnchorPoint?j=E.projectionCache.cachedAnchorPoint:(j=Te(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=j);let X,re,ae=j,oe=j,le=0,Q=0,fe=Math.abs(O),ge=[],we;for(;le+Q<=fe;){if(G+=D,G<v||G>=S)return null;le+=Q,oe=ae,re=X;let Ge={absOffsetX:fe,direction:D,distanceFromAnchor:le,previousVertex:oe};if(ae=se(G,E,Ge),c===0)ge.push(oe),we=ae.sub(oe);else{let it,Ve=ae.sub(oe);it=Ve.mag()===0?ke(se(G+D,E,Ge).sub(ae),c,D):ke(Ve,c,D),re||(re=oe.add(it)),X=Se(G,it,ae,v,S,re,c,E,Ge),ge.push(re),we=X.sub(re)}Q=we.mag()}let Me=we._mult((fe-le)/Q)._add(re||oe),Fe=L+Math.atan2(ae.y-oe.y,ae.x-oe.x);return ge.push(Me),{point:Me,angle:C?Fe:0,path:ge}}let vt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xt(g,i){for(let c=0;c<g;c++){let f=i.length;i.resize(f+4),i.float32.set(vt,3*f)}}function tr(g,i,c){let f=i[0],d=i[1];return g[0]=c[0]*f+c[4]*d+c[12],g[1]=c[1]*f+c[5]*d+c[13],g[3]=c[3]*f+c[7]*d+c[15],g}let Ft=100;class rr{constructor(i,c,f=new Go(i.width+200,i.height+200,25),d=new Go(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=c,this.grid=f,this.ignoredGrid=d,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Ft,this.screenBottomBoundary=i.height+Ft,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,f,d,v,S,E,C,O,D,L){let j=i.anchorPointX+C[0],G=i.anchorPointY+C[1],X=this.projectAndGetPerspectiveRatio(d,j,G,v,D),re=f*X.perspectiveRatio,ae;if(S||E)ae=this._projectCollisionBox(i,re,d,v,S,E,C,X,D,L);else{let ge=X.point.x+(L?L.x*re:0),we=X.point.y+(L?L.y*re:0);ae={allPointsOccluded:!1,box:[ge+i.x1*re,we+i.y1*re,ge+i.x2*re,we+i.y2*re]}}let[oe,le,Q,fe]=ae.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?ae.allPointsOccluded:this.mapProjection.isOccluded(j,G,v))||X.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(oe,le,Q,fe)||c!=="always"&&this.grid.hitTest(oe,le,Q,fe,c,O)?{box:[oe,le,Q,fe],placeable:!1,offscreen:!1}:{box:[oe,le,Q,fe],placeable:!0,offscreen:this.isOffscreen(oe,le,Q,fe)}}placeCollisionCircles(i,c,f,d,v,S,E,C,O,D,L,j,G,X,re,ae){let oe=[],le=new a.P(c.anchorX,c.anchorY),Q=this.getPerspectiveRatio(S,le.x,le.y,E,ae),fe=(L?v/Q:v*Q)/a.ap,ge={getElevation:ae,labelPlaneMatrix:C,lineVertexArray:f,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:le,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:re},we=te(fe,d,c.lineOffsetX*fe,c.lineOffsetY*fe,!1,c,!1,ge),Me=!1,Fe=!1,Ge=!0;if(we){let it=.5*G*Q+X,Ve=new a.P(-100,-100),je=new a.P(this.screenRightBoundary,this.screenBottomBoundary),ct=new Rt,Pt=we.first,$e=we.last,Ye=[];for(let Bt=Pt.path.length-1;Bt>=1;Bt--)Ye.push(Pt.path[Bt]);for(let Bt=1;Bt<$e.path.length;Bt++)Ye.push($e.path[Bt]);let Tt=2.5*it;if(O){let Bt=this.projectPathToScreenSpace(Ye,ge,O);Ye=Bt.some(Xt=>Xt.signedDistanceFromCamera<=0)?[]:Bt.map(Xt=>Xt.point)}let Pr=[];if(Ye.length>0){let Bt=Ye[0].clone(),Xt=Ye[0].clone();for(let Mr=1;Mr<Ye.length;Mr++)Bt.x=Math.min(Bt.x,Ye[Mr].x),Bt.y=Math.min(Bt.y,Ye[Mr].y),Xt.x=Math.max(Xt.x,Ye[Mr].x),Xt.y=Math.max(Xt.y,Ye[Mr].y);Pr=Bt.x>=Ve.x&&Xt.x<=je.x&&Bt.y>=Ve.y&&Xt.y<=je.y?[Ye]:Xt.x<Ve.x||Bt.x>je.x||Xt.y<Ve.y||Bt.y>je.y?[]:a.al([Ye],Ve.x,Ve.y,je.x,je.y)}for(let Bt of Pr){ct.reset(Bt,.25*it);let Xt=0;Xt=ct.length<=.5*it?1:Math.ceil(ct.paddedLength/Tt)+1;for(let Mr=0;Mr<Xt;Mr++){let Bi=Mr/Math.max(Xt-1,1),Ga=ct.lerp(Bi),Or=Ga.x+Ft,En=Ga.y+Ft;oe.push(Or,En,it,0);let sn=Or-it,Ui=En-it,un=Or+it,mo=En+it;if(Ge=Ge&&this.isOffscreen(sn,Ui,un,mo),Fe=Fe||this.isInsideGrid(sn,Ui,un,mo),i!=="always"&&this.grid.hitTestCircle(Or,En,it,i,j)&&(Me=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Me}}}}return{circles:!D&&Me||!Fe||Q<this.perspectiveRatioCutoff?[]:oe,offscreen:Ge,collisionDetected:Me}}projectPathToScreenSpace(i,c,f){return i.map(d=>ie(d.x,d.y,f,c.getElevation))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let c=[],f=1/0,d=1/0,v=-1/0,S=-1/0;for(let D of i){let L=new a.P(D.x+Ft,D.y+Ft);f=Math.min(f,L.x),d=Math.min(d,L.y),v=Math.max(v,L.x),S=Math.max(S,L.y),c.push(L)}let E=this.grid.query(f,d,v,S).concat(this.ignoredGrid.query(f,d,v,S)),C={},O={};for(let D of E){let L=D.key;if(C[L.bucketInstanceId]===void 0&&(C[L.bucketInstanceId]={}),C[L.bucketInstanceId][L.featureIndex])continue;let j=[new a.P(D.x1,D.y1),new a.P(D.x2,D.y1),new a.P(D.x2,D.y2),new a.P(D.x1,D.y2)];a.am(c,j)&&(C[L.bucketInstanceId][L.featureIndex]=!0,O[L.bucketInstanceId]===void 0&&(O[L.bucketInstanceId]=[]),O[L.bucketInstanceId].push(L.featureIndex))}return O}insertCollisionBox(i,c,f,d,v,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:v,collisionGroupID:S,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,f,d,v,S){let E=f?this.ignoredGrid:this.grid,C={bucketInstanceId:d,featureIndex:v,collisionGroupID:S,overlapMode:c};for(let O=0;O<i.length;O+=4)E.insertCircle(C,i[O],i[O+1],i[O+2])}projectAndGetPerspectiveRatio(i,c,f,d,v){let S;v?(S=[c,f,v(c,f),1],a.af(S,S,i)):(S=[c,f,0,1],tr(S,S,i));let E=S[3];return{point:new a.P((S[0]/E+1)/2*this.transform.width+Ft,(-S[1]/E+1)/2*this.transform.height+Ft),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}getPerspectiveRatio(i,c,f,d,v){let S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,f,d,v):ie(c,f,i,v);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(i,c,f,d){return f<Ft||i>=this.screenRightBoundary||d<Ft||c>this.screenBottomBoundary}isInsideGrid(i,c,f,d){return f>=0&&i<this.gridRightBoundary&&d>=0&&c<this.gridBottomBoundary}getViewportMatrix(){let i=a.an([]);return a.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,c,f,d,v,S,E,C,O,D){let L=new a.P(1,0),j=new a.P(0,1),G=new a.P(i.anchorPointX+E[0],i.anchorPointY+E[1]);if(S&&!v){let Ge=this.projectAndGetPerspectiveRatio(f,G.x+1,G.y,d,O).point.sub(C.point).unit(),it=Math.atan(Ge.y/Ge.x)+(Ge.x<0?Math.PI:0),Ve=Math.sin(it),je=Math.cos(it);L=new a.P(je,Ve),j=new a.P(-Ve,je)}else if(!S&&v){let Ge=-this.transform.angle,it=Math.sin(Ge),Ve=Math.cos(Ge);L=new a.P(Ve,it),j=new a.P(-it,Ve)}let X=C.point,re=c;if(v){X=G;let Ge=this.transform.zoom-Math.floor(this.transform.zoom);re=Math.pow(2,-Ge),re*=this.mapProjection.getPitchedTextCorrection(this.transform,G,d),D||(re*=a.ac(.5+C.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}D&&(X=X.add(L.mult(D.x*re)).add(j.mult(D.y*re)));let ae=i.x1*re,oe=i.x2*re,le=(ae+oe)/2,Q=i.y1*re,fe=i.y2*re,ge=(Q+fe)/2,we=[{offsetX:ae,offsetY:Q},{offsetX:le,offsetY:Q},{offsetX:oe,offsetY:Q},{offsetX:oe,offsetY:ge},{offsetX:oe,offsetY:fe},{offsetX:le,offsetY:fe},{offsetX:ae,offsetY:fe},{offsetX:ae,offsetY:ge}],Me=[];for(let{offsetX:Ge,offsetY:it}of we)Me.push(new a.P(X.x+L.x*Ge+j.x*it,X.y+L.y*Ge+j.y*it));let Fe=!1;if(v){let Ge=Me.map(it=>this.projectAndGetPerspectiveRatio(f,it.x,it.y,d,O));Fe=Ge.some(it=>!it.isOccluded),Me=Ge.map(it=>it.point)}else Fe=!0;return{box:a.ao(Me),allPointsOccluded:!Fe}}}function Zt(g,i,c){return i*(a.X/(g.tileSize*Math.pow(2,c-g.tileID.overscaledZ)))}class ui{constructor(i,c,f,d){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):d&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class $r{constructor(i,c,f,d,v){this.text=new ui(i?i.text:null,c,f,v),this.icon=new ui(i?i.icon:null,c,d,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Vt{constructor(i,c,f){this.text=i,this.icon=c,this.skipFade=f}}class fr{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class Fr{constructor(i,c,f,d,v){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=d,this.tileID=v}}class wi{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){let c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[i]}}function Mi(g,i,c,f,d){let{horizontalAlign:v,verticalAlign:S}=a.au(g);return new a.P(-(v-.5)*i+f[0]*d,-(S-.5)*c+f[1]*d)}class on{constructor(i,c,f,d,v,S){this.transform=i.clone(),this.terrain=f,this.collisionIndex=new rr(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new wi(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){let c=this.terrain;return c?(f,d)=>c.getElevation(i,f,d):null}getBucketParts(i,c,f,d){let v=f.getBucket(c),S=f.latestFeatureIndex;if(!v||!S||c.id!==v.layerIds[0])return;let E=f.collisionBoxArray,C=v.layers[0].layout,O=v.layers[0].paint,D=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),L=f.tileSize/a.X,j=f.tileID.toUnwrapped(),G=this.transform.calculatePosMatrix(j),X=C.get("text-pitch-alignment")==="map",re=C.get("text-rotation-alignment")==="map",ae=Zt(f,1,this.transform.zoom),oe=this.collisionIndex.mapProjection.translatePosition(this.transform,f,O.get("text-translate"),O.get("text-translate-anchor")),le=this.collisionIndex.mapProjection.translatePosition(this.transform,f,O.get("icon-translate"),O.get("icon-translate-anchor")),Q=gs(G,X,re,this.transform,ae),fe=null;if(X){let we=co(G,X,re,this.transform,ae);fe=a.L([],this.transform.labelPlaneMatrix,we)}this.retainedQueryData[v.bucketInstanceId]=new Fr(v.bucketInstanceId,S,v.sourceLayerIndex,v.index,f.tileID);let ge={bucket:v,layout:C,translationText:oe,translationIcon:le,posMatrix:G,unwrappedTileID:j,textLabelPlaneMatrix:Q,labelToScreenMatrix:fe,scale:D,textPixelRatio:L,holdingForFade:f.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:a.ag(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(d)for(let we of v.sortKeyRanges){let{sortKey:Me,symbolInstanceStart:Fe,symbolInstanceEnd:Ge}=we;i.push({sortKey:Me,symbolInstanceStart:Fe,symbolInstanceEnd:Ge,parameters:ge})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:ge})}attemptAnchorPlacement(i,c,f,d,v,S,E,C,O,D,L,j,G,X,re,ae,oe,le,Q){let fe=a.aq[i.textAnchor],ge=[i.textOffset0,i.textOffset1],we=Mi(fe,f,d,ge,v),Me=this.collisionIndex.placeCollisionBox(c,j,C,O,D,E,S,ae,L.predicate,Q,we);if((!le||this.collisionIndex.placeCollisionBox(le,j,C,O,D,E,S,oe,L.predicate,Q,we).placeable)&&Me.placeable){let Fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Fe=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:ge,width:f,height:d,anchor:fe,textBoxScale:v,prevAnchor:Fe},this.markUsedJustification(X,fe,G,re),X.allowVerticalPlacement&&(this.markUsedOrientation(X,re,G),this.placedOrientations[G.crossTileID]=re),{shift:we,placedGlyphBoxes:Me}}}placeLayerBucketPart(i,c,f){let{bucket:d,layout:v,translationText:S,translationIcon:E,posMatrix:C,unwrappedTileID:O,textLabelPlaneMatrix:D,labelToScreenMatrix:L,textPixelRatio:j,holdingForFade:G,collisionBoxArray:X,partiallyEvaluatedTextSize:re,collisionGroup:ae}=i.parameters,oe=v.get("text-optional"),le=v.get("icon-optional"),Q=a.ar(v,"text-overlap","text-allow-overlap"),fe=Q==="always",ge=a.ar(v,"icon-overlap","icon-allow-overlap"),we=ge==="always",Me=v.get("text-rotation-alignment")==="map",Fe=v.get("text-pitch-alignment")==="map",Ge=v.get("icon-text-fit")!=="none",it=v.get("symbol-z-order")==="viewport-y",Ve=fe&&(we||!d.hasIconData()||le),je=we&&(fe||!d.hasTextData()||oe);!d.collisionArrays&&X&&d.deserializeCollisionBoxes(X);let ct=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),Pt=($e,Ye,Tt)=>{var Pr,Bt;if(c[$e.crossTileID])return;if(G)return void(this.placements[$e.crossTileID]=new Vt(!1,!1,!1));let Xt=!1,Mr=!1,Bi=!0,Ga=null,Or={box:null,placeable:!1,offscreen:null},En={box:null,placeable:!1,offscreen:null},sn=null,Ui=null,un=null,mo=0,wl=0,Wf=0;Ye.textFeatureIndex?mo=Ye.textFeatureIndex:$e.useRuntimeCollisionCircles&&(mo=$e.featureIndex),Ye.verticalTextFeatureIndex&&(wl=Ye.verticalTextFeatureIndex);let Sl=Ye.textBox;if(Sl){let da=Oi=>{let ji=a.ah.horizontal;if(d.allowVerticalPlacement&&!Oi&&this.prevPlacement){let Zn=this.prevPlacement.placedOrientations[$e.crossTileID];Zn&&(this.placedOrientations[$e.crossTileID]=Zn,ji=Zn,this.markUsedOrientation(d,ji,$e))}return ji},pa=(Oi,ji)=>{if(d.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&Ye.verticalTextBox){for(let Zn of d.writingModes)if(Zn===a.ah.vertical?(Or=ji(),En=Or):Or=Oi(),Or&&Or.placeable)break}else Or=Oi()},xs=$e.textAnchorOffsetStartIndex,Ka=$e.textAnchorOffsetEndIndex;if(Ka===xs){let Oi=(ji,Zn)=>{let Yt=this.collisionIndex.placeCollisionBox(ji,Q,j,C,O,Fe,Me,S,ae.predicate,ct);return Yt&&Yt.placeable&&(this.markUsedOrientation(d,Zn,$e),this.placedOrientations[$e.crossTileID]=Zn),Yt};pa(()=>Oi(Sl,a.ah.horizontal),()=>{let ji=Ye.verticalTextBox;return d.allowVerticalPlacement&&$e.numVerticalGlyphVertices>0&&ji?Oi(ji,a.ah.vertical):{box:null,offscreen:null}}),da(Or&&Or.placeable)}else{let Oi=a.aq[(Bt=(Pr=this.prevPlacement)===null||Pr===void 0?void 0:Pr.variableOffsets[$e.crossTileID])===null||Bt===void 0?void 0:Bt.anchor],ji=(Yt,vu,ql)=>{let Al=Yt.x2-Yt.x1,B0=Yt.y2-Yt.y1,hE=$e.textBoxScale,U0=Ge&&ge==="never"?vu:null,bs=null,j0=Q==="never"?1:2,Kf="never";Oi&&j0++;for(let ih=0;ih<j0;ih++){for(let Hf=xs;Hf<Ka;Hf++){let Zf=d.textAnchorOffsets.get(Hf);if(Oi&&Zf.textAnchor!==Oi)continue;let El=this.attemptAnchorPlacement(Zf,Yt,Al,B0,hE,Me,Fe,j,C,O,ae,Kf,$e,d,ql,S,E,U0,ct);if(El&&(bs=El.placedGlyphBoxes,bs&&bs.placeable))return Xt=!0,Ga=El.shift,bs}Oi?Oi=null:Kf=Q}return f&&!bs&&(bs={box:this.collisionIndex.placeCollisionBox(Sl,"always",j,C,O,Fe,Me,S,ae.predicate,ct,new a.P(0,0)).box,offscreen:!1,placeable:!1}),bs};pa(()=>ji(Sl,Ye.iconBox,a.ah.horizontal),()=>{let Yt=Ye.verticalTextBox;return d.allowVerticalPlacement&&(!Or||!Or.placeable)&&$e.numVerticalGlyphVertices>0&&Yt?ji(Yt,Ye.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Or&&(Xt=Or.placeable,Bi=Or.offscreen);let Zn=da(Or&&Or.placeable);if(!Xt&&this.prevPlacement){let Yt=this.prevPlacement.variableOffsets[$e.crossTileID];Yt&&(this.variableOffsets[$e.crossTileID]=Yt,this.markUsedJustification(d,Yt.anchor,$e,Zn))}}}if(sn=Or,Xt=sn&&sn.placeable,Bi=sn&&sn.offscreen,$e.useRuntimeCollisionCircles){let da=d.text.placedSymbolArray.get($e.centerJustifiedTextSymbolIndex),pa=a.ai(d.textSizeData,re,da),xs=v.get("text-padding");Ui=this.collisionIndex.placeCollisionCircles(Q,da,d.lineVertexArray,d.glyphOffsetArray,pa,C,O,D,L,f,Fe,ae.predicate,$e.collisionCircleDiameter,xs,S,ct),Ui.circles.length&&Ui.collisionDetected&&!f&&a.w("Collisions detected, but collision boxes are not shown"),Xt=fe||Ui.circles.length>0&&!Ui.collisionDetected,Bi=Bi&&Ui.offscreen}if(Ye.iconFeatureIndex&&(Wf=Ye.iconFeatureIndex),Ye.iconBox){let da=pa=>this.collisionIndex.placeCollisionBox(pa,ge,j,C,O,Fe,Me,E,ae.predicate,ct,Ge&&Ga?Ga:void 0);En&&En.placeable&&Ye.verticalIconBox?(un=da(Ye.verticalIconBox),Mr=un.placeable):(un=da(Ye.iconBox),Mr=un.placeable),Bi=Bi&&un.offscreen}let fa=oe||$e.numHorizontalGlyphVertices===0&&$e.numVerticalGlyphVertices===0,Gf=le||$e.numIconVertices===0;fa||Gf?Gf?fa||(Mr=Mr&&Xt):Xt=Mr&&Xt:Mr=Xt=Mr&&Xt;let nv=Mr&&un.placeable;if(Xt&&sn.placeable&&this.collisionIndex.insertCollisionBox(sn.box,Q,v.get("text-ignore-placement"),d.bucketInstanceId,En&&En.placeable&&wl?wl:mo,ae.ID),nv&&this.collisionIndex.insertCollisionBox(un.box,ge,v.get("icon-ignore-placement"),d.bucketInstanceId,Wf,ae.ID),Ui&&Xt&&this.collisionIndex.insertCollisionCircles(Ui.circles,Q,v.get("text-ignore-placement"),d.bucketInstanceId,mo,ae.ID),f&&this.storeCollisionData(d.bucketInstanceId,Tt,Ye,sn,un,Ui),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[$e.crossTileID]=new Vt(Xt||Ve,Mr||je,Bi||d.justReloaded),c[$e.crossTileID]=!0};if(it){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let $e=d.getSortedSymbolIndexes(this.transform.angle);for(let Ye=$e.length-1;Ye>=0;--Ye){let Tt=$e[Ye];Pt(d.symbolInstances.get(Tt),d.collisionArrays[Tt],Tt)}}else for(let $e=i.symbolInstanceStart;$e<i.symbolInstanceEnd;$e++)Pt(d.symbolInstances.get($e),d.collisionArrays[$e],$e);if(f&&d.bucketInstanceId in this.collisionCircleArrays){let $e=this.collisionCircleArrays[d.bucketInstanceId];a.as($e.invProjMatrix,C),$e.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(i,c,f,d,v,S){if(f.textBox||f.iconBox){let E,C;this.collisionBoxArrays.has(i)?E=this.collisionBoxArrays.get(i):(E=new Map,this.collisionBoxArrays.set(i,E)),E.has(c)?C=E.get(c):(C={text:null,icon:null},E.set(c,C)),f.textBox&&(C.text=d.box),f.iconBox&&(C.icon=v.box)}if(S){let E=this.collisionCircleArrays[i];E===void 0&&(E=this.collisionCircleArrays[i]=new fr);for(let C=0;C<S.circles.length;C+=4)E.circles.push(S.circles[C+0]),E.circles.push(S.circles[C+1]),E.circles.push(S.circles[C+2]),E.circles.push(S.collisionDetected?1:0)}}markUsedJustification(i,c,f,d){let v;v=d===a.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[a.at(c)];let S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(let E of S)E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=v>=0&&E!==v?0:f.crossTileID)}markUsedOrientation(i,c,f){let d=c===a.ah.horizontal||c===a.ah.horizontalOnly?c:0,v=c===a.ah.vertical?c:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(let E of S)i.text.placedSymbolArray.get(E).placedOrientation=d;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;let c=this.prevPlacement,f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;let d=c?c.symbolFadeChange(i):1,v=c?c.opacities:{},S=c?c.variableOffsets:{},E=c?c.placedOrientations:{};for(let C in this.placements){let O=this.placements[C],D=v[C];D?(this.opacities[C]=new $r(D,d,O.text,O.icon),f=f||O.text!==D.text.placed||O.icon!==D.icon.placed):(this.opacities[C]=new $r(null,d,O.text,O.icon,O.skipFade),f=f||O.text||O.icon)}for(let C in v){let O=v[C];if(!this.opacities[C]){let D=new $r(O,d,!1,!1);D.isHidden()||(this.opacities[C]=D,f=f||O.text.placed||O.icon.placed)}}for(let C in S)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=S[C]);for(let C in E)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=E[C]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){let f={};for(let d of c){let v=d.getBucket(i);v&&d.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,d.tileID,f,d.collisionBoxArray)}}updateBucketOpacities(i,c,f,d){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();let v=i.layers[0],S=v.layout,E=new $r(null,0,!1,!1,!0),C=S.get("text-allow-overlap"),O=S.get("icon-allow-overlap"),D=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),L=S.get("text-rotation-alignment")==="map",j=S.get("text-pitch-alignment")==="map",G=S.get("icon-text-fit")!=="none",X=new $r(null,0,C&&(O||!i.hasIconData()||S.get("icon-optional")),O&&(C||!i.hasTextData()||S.get("text-optional")),!0);!i.collisionArrays&&d&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(d);let re=(oe,le,Q)=>{for(let fe=0;fe<le/4;fe++)oe.opacityVertexArray.emplaceBack(Q);oe.hasVisibleVertices=oe.hasVisibleVertices||Q!==tl},ae=this.collisionBoxArrays.get(i.bucketInstanceId);for(let oe=0;oe<i.symbolInstances.length;oe++){let le=i.symbolInstances.get(oe),{numHorizontalGlyphVertices:Q,numVerticalGlyphVertices:fe,crossTileID:ge}=le,we=this.opacities[ge];f[ge]?we=E:we||(we=X,this.opacities[ge]=we),f[ge]=!0;let Me=le.numIconVertices>0,Fe=this.placedOrientations[le.crossTileID],Ge=Fe===a.ah.vertical,it=Fe===a.ah.horizontal||Fe===a.ah.horizontalOnly;if(Q>0||fe>0){let je=Gn(we.text);re(i.text,Q,Ge?tl:je),re(i.text,fe,it?tl:je);let ct=we.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(Ye=>{Ye>=0&&(i.text.placedSymbolArray.get(Ye).hidden=ct||Ge?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=ct||it?1:0);let Pt=this.variableOffsets[le.crossTileID];Pt&&this.markUsedJustification(i,Pt.anchor,le,Fe);let $e=this.placedOrientations[le.crossTileID];$e&&(this.markUsedJustification(i,"left",le,$e),this.markUsedOrientation(i,$e,le))}if(Me){let je=Gn(we.icon),ct=!(G&&le.verticalPlacedIconSymbolIndex&&Ge);le.placedIconSymbolIndex>=0&&(re(i.icon,le.numIconVertices,ct?je:tl),i.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=we.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(re(i.icon,le.numVerticalIconVertices,ct?tl:je),i.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=we.icon.isHidden())}let Ve=ae&&ae.has(oe)?ae.get(oe):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){let je=i.collisionArrays[oe];if(je){let ct=new a.P(0,0);if(je.textBox||je.verticalTextBox){let Pt=!0;if(D){let $e=this.variableOffsets[ge];$e?(ct=Mi($e.anchor,$e.width,$e.height,$e.textOffset,$e.textBoxScale),L&&ct._rotate(j?this.transform.angle:-this.transform.angle)):Pt=!1}if(je.textBox||je.verticalTextBox){let $e;je.textBox&&($e=Ge),je.verticalTextBox&&($e=it),el(i.textCollisionBox.collisionVertexArray,we.text.placed,!Pt||$e,Ve.text,ct.x,ct.y)}}if(je.iconBox||je.verticalIconBox){let Pt=!!(!it&&je.verticalIconBox),$e;je.iconBox&&($e=Pt),je.verticalIconBox&&($e=!Pt),el(i.iconCollisionBox.collisionVertexArray,we.icon.placed,$e,Ve.icon,G?ct.x:0,G?ct.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){let oe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=oe.invProjMatrix,i.placementViewportMatrix=oe.viewportMatrix,i.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){let f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function el(g,i,c,f,d,v){f&&f.length!==0||(f=[0,0,0,0]);let S=f[0]-Ft,E=f[1]-Ft,C=f[2]-Ft,O=f[3]-Ft;g.emplaceBack(i?1:0,c?1:0,d||0,v||0,S,E),g.emplaceBack(i?1:0,c?1:0,d||0,v||0,C,E),g.emplaceBack(i?1:0,c?1:0,d||0,v||0,C,O),g.emplaceBack(i?1:0,c?1:0,d||0,v||0,S,O)}let dr=Math.pow(2,25),mm=Math.pow(2,24),vm=Math.pow(2,17),$n=Math.pow(2,16),Wn=Math.pow(2,9),NA=Math.pow(2,8),ua=Math.pow(2,1);function Gn(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;let i=g.placed?1:0,c=Math.floor(127*g.opacity);return c*dr+i*mm+c*vm+i*$n+c*Wn+i*NA+c*ua+i}let tl=0;function nu(){return{isOccluded:(g,i,c)=>!1,getPitchedTextCorrection:(g,i,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(g,i,c,f){throw new Error("Not implemented.")},translatePosition:(g,i,c,f)=>function(d,v,S,E,C=!1){if(!S[0]&&!S[1])return[0,0];let O=C?E==="map"?d.angle:0:E==="viewport"?-d.angle:0;if(O){let D=Math.sin(O),L=Math.cos(O);S=[S[0]*L-S[1]*D,S[0]*D+S[1]*L]}return[C?S[0]:Zt(v,S[0],d.zoom),C?S[1]:Zt(v,S[1],d.zoom)]}(g,i,c,f),getCircleRadiusCorrection:g=>1}}class li{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,f,d,v){let S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(S,d,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((E,C)=>E.sortKey-C.sortKey));this._currentPartIndex<S.length;)if(c.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class Nc{constructor(i,c,f,d,v,S,E,C){this.placement=new on(i,nu(),c,S,E,C),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,f){let d=T.now(),v=()=>!this._forceFullPlacement&&T.now()-d>2;for(;this._currentPlacementIndex>=0;){let S=c[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=E)&&(!S.maxzoom||S.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new li(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}let Ua=512/a.X/2;class ai{constructor(i,c,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};let d=new Map;for(let v=0;v<c.length;v++){let S=c.get(v),E=S.key,C=d.get(E);C?C.push(S):d.set(E,[S])}for(let[v,S]of d){let E={positions:S.map(C=>({x:Math.floor(C.anchorX*Ua),y:Math.floor(C.anchorY*Ua)})),crossTileIDs:S.map(C=>C.crossTileID)};if(E.positions.length>128){let C=new a.av(E.positions.length,16,Uint16Array);for(let{x:O,y:D}of E.positions)C.add(O,D);C.finish(),delete E.positions,E.index=C}this._symbolsByKey[v]=E}}getScaledCoordinates(i,c){let{x:f,y:d,z:v}=this.tileID.canonical,{x:S,y:E,z:C}=c.canonical,O=Ua/Math.pow(2,C-v),D=(E*a.X+i.anchorY)*O,L=d*a.X*Ua;return{x:Math.floor((S*a.X+i.anchorX)*O-f*a.X*Ua),y:Math.floor(D-L)}}findMatches(i,c,f){let d=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let v=0;v<i.length;v++){let S=i.get(v);if(S.crossTileID)continue;let E=this._symbolsByKey[S.key];if(!E)continue;let C=this.getScaledCoordinates(S,c);if(E.index){let O=E.index.range(C.x-d,C.y-d,C.x+d,C.y+d).sort();for(let D of O){let L=E.crossTileIDs[D];if(!f[L]){f[L]=!0,S.crossTileID=L;break}}}else if(E.positions)for(let O=0;O<E.positions.length;O++){let D=E.positions[O],L=E.crossTileIDs[O];if(Math.abs(D.x-C.x)<=d&&Math.abs(D.y-C.y)<=d&&!f[L]){f[L]=!0,S.crossTileID=L;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class pf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ja{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){let c=Math.round((i-this.lng)/360);if(c!==0)for(let f in this.indexes){let d=this.indexes[f],v={};for(let S in d){let E=d[S];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),v[E.tileID.key]=E}this.indexes[f]=v}this.lng=i}addBucket(i,c,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<c.symbolInstances.length;v++)c.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});let d=this.usedCrossTileIDs[i.overscaledZ];for(let v in this.indexes){let S=this.indexes[v];if(Number(v)>i.overscaledZ)for(let E in S){let C=S[E];C.tileID.isChildOf(i)&&C.findMatches(c.symbolInstances,i,d)}else{let E=S[i.scaledTo(Number(v)).key];E&&E.findMatches(c.symbolInstances,i,d)}}for(let v=0;v<c.symbolInstances.length;v++){let S=c.symbolInstances.get(v);S.crossTileID||(S.crossTileID=f.generate(),d[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new ai(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(let f of c.getCrossTileIDsLists())for(let d of f)delete this.usedCrossTileIDs[i][d]}removeStaleBuckets(i){let c=!1;for(let f in this.indexes){let d=this.indexes[f];for(let v in d)i[d[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,d[v]),delete d[v],c=!0)}return c}}class gm{constructor(){this.layerIndexes={},this.crossTileIDs=new pf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,f){let d=this.layerIndexes[i.id];d===void 0&&(d=this.layerIndexes[i.id]=new ja);let v=!1,S={};d.handleWrapJump(f);for(let E of c){let C=E.getBucket(i);C&&i.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(E.tileID,C,this.crossTileIDs)&&(v=!0),S[C.bucketInstanceId]=!0)}return d.removeStaleBuckets(S)&&(v=!0),v}pruneUnusedLayers(i){let c={};i.forEach(f=>{c[f]=!0});for(let f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}let Va=(g,i)=>a.t(g,i&&i.filter(c=>c.identifier!=="source.canvas")),BA=a.aw();class mf extends a.E{constructor(i,c={}){super(),this._rtlPluginLoaded=()=>{for(let f in this.sourceCaches){let d=this.sourceCaches[f].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[f].reload()}},this.map=i,this.dispatcher=new za(so(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,d)=>this.getGlyphs(f,d)),this.dispatcher.registerMessageHandler("GI",(f,d)=>this.getImages(f,d)),this.imageManager=new Lr,this.imageManager.setEventedParent(this),this.glyphManager=new hr(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Vo(256,512),this.crossTileSymbolIndex=new gm,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),nn().on(Pe,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;let d=this.sourceCaches[f.sourceId];if(!d)return;let v=d.getSource();if(v&&v.vectorLayerIds)for(let S in this._layers){let E=this._layers[S];E.source===v.id&&this._validateLayer(E)}})}loadURL(i,c={},f){this.fire(new a.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;let d=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;let v=this._loadStyleRequest;a.h(d,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,c,f)}).catch(S=>{this._loadStyleRequest=null,S&&!v.signal.aborted&&this.fire(new a.j(S))})}loadJSON(i,c={},f){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(i,c,f)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(BA,{validate:!1})}_load(i,c,f){var d;let v=c.transformStyle?c.transformStyle(f,i):i;if(!c.validate||!Va(this,a.u(v))){this._loaded=!0,this.stylesheet=v;for(let S in v.sources)this.addSource(S,v.sources[S],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new en(this.stylesheet.light),this.sky=new Pi(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){let i=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(let c of i){let f=a.aA(c);f.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=f}}_loadSprite(i,c=!1,f=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,S,E,C){return a._(this,void 0,void 0,function*(){let O=Ze(v),D=E>1?"@2x":"",L={},j={};for(let{id:G,url:X}of O){let re=S.transformRequest(ft(X,D,".json"),"SpriteJSON");L[G]=a.h(re,C);let ae=S.transformRequest(ft(X,D,".png"),"SpriteImage");j[G]=H.getImage(ae,C)}return yield Promise.all([...Object.values(L),...Object.values(j)]),function(G,X){return a._(this,void 0,void 0,function*(){let re={};for(let ae in G){re[ae]={};let oe=T.getImageCanvasContext((yield X[ae]).data),le=(yield G[ae]).data;for(let Q in le){let{width:fe,height:ge,x:we,y:Me,sdf:Fe,pixelRatio:Ge,stretchX:it,stretchY:Ve,content:je,textFitWidth:ct,textFitHeight:Pt}=le[Q];re[ae][Q]={data:null,pixelRatio:Ge,sdf:Fe,stretchX:it,stretchY:Ve,content:je,textFitWidth:ct,textFitHeight:Pt,spriteData:{width:fe,height:ge,x:we,y:Me,context:oe}}}}return re})}(L,j)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(let S in v){this._spritesImagesIds[S]=[];let E=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(C=>!(C in v)):[];for(let C of E)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(let C in v[S]){let O=S==="default"?C:`${S}:${C}`;this._spritesImagesIds[S].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,v[S][C],!1):this.imageManager.addImage(O,v[S][C]),c&&(this._changedImages[O]=!0)}}}).catch(v=>{this._spriteRequest=null,d=v,this.fire(new a.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),f&&f(d)})}_unloadSprite(){for(let i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(i){let c=this.sourceCaches[i.source];if(!c)return;let f=i.sourceLayer;if(!f)return;let d=c.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(f)===-1)&&this.fire(new a.j(new Error(`Source layer "${f}" does not exist on source "${d.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,c=!1){let f=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c?a.aB(f):f);let d=[];for(let v of i)if(f[v]){let S=c?a.aB(f[v]):f[v];d.push(S)}return d}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};let c=Object.keys(this._layers);for(let f of c){let d=this._layers[f];d.type!=="custom"&&(i[f]=d.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(let i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;let c=this._changed;if(c){let d=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(d.length||v.length)&&this._updateWorkerLayers(d,v);for(let S in this._updatedSources){let E=this._updatedSources[S];if(E==="reload")this._reloadSource(S);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}let f={};for(let d in this.sourceCaches){let v=this.sourceCaches[d];f[d]=v.used,v.used=!1}for(let d of this._order){let v=this._layers[d];v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(let d in f){let v=this.sourceCaches[d];!!f[d]!=!!v.used&&v.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,c&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let i=Object.keys(this._changedImages);if(i.length){for(let c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){var f;this._checkLoaded();let d=this.serialize();if(i=c.transformStyle?c.transformStyle(d,i):i,((f=c.validate)===null||f===void 0||f)&&Va(this,a.u(i)))return!1;(i=a.aB(i)).layers=a.az(i.layers);let v=a.aC(d,i),S=this._getOperationsToPerform(v);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(let E of S.operations)E();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){let c=[],f=[];for(let d of i)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":c.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":c.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":c.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":c.push(()=>{});break;default:f.push(d.command);}return{operations:c,unimplemented:f}}addImage(i,c){if(this.getImage(i))return this.fire(new a.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new a.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.u.source,`sources.${i}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);let d=this.sourceCaches[i]=new qt(i,c,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:i})),d.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(let f in this._layers)if(this._layers[f].source===i)return this.fire(new a.j(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));let c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);let f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,f={}){this._checkLoaded();let d=i.id;if(this.getLayer(d))return void this.fire(new a.j(new Error(`Layer "${d}" already exists on this map.`)));let v;if(i.type==="custom"){if(Va(this,a.aD(i)))return;v=a.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(d,i.source),i=a.aB(i),i=a.e(i,{source:d})),this._validate(a.u.layer,`layers.${d}`,i,{arrayIndex:-1},f))return;v=a.aA(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:d}})}let S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new a.j(new Error(`Cannot add layer "${d}" before non-existing layer "${c}".`)));else{if(this._order.splice(S,0,d),this._layerOrderChanged=!0,this._layers[d]=v,this._removedLayers[d]&&v.source&&v.type!=="custom"){let E=this._removedLayers[d];delete this._removedLayers[d],E.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;let f=this._order.indexOf(i);this._order.splice(f,1);let d=c?this._order.indexOf(c):this._order.length;c&&d===-1?this.fire(new a.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(d,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();let c=this._layers[i];if(!c)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);let f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,f){this._checkLoaded();let d=this.getLayer(i);d?d.minzoom===c&&d.maxzoom===f||(c!=null&&(d.minzoom=c),f!=null&&(d.maxzoom=f),this._updateLayer(d)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,f={}){this._checkLoaded();let d=this.getLayer(i);if(d){if(!a.aE(d.filter,c))return c==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(a.u.filter,`layers.${d.id}.filter`,c,null,f)||(d.filter=a.aB(c),this._updateLayer(d)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return a.aB(this.getLayer(i).filter)}setLayoutProperty(i,c,f,d={}){this._checkLoaded();let v=this.getLayer(i);v?a.aE(v.getLayoutProperty(c),f)||(v.setLayoutProperty(c,f,d),this._updateLayer(v)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){let f=this.getLayer(i);if(f)return f.getLayoutProperty(c);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,f,d={}){this._checkLoaded();let v=this.getLayer(i);v?a.aE(v.getPaintProperty(c),f)||(v.setPaintProperty(c,f,d)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();let f=i.source,d=i.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new a.j(new Error(`The source '${f}' does not exist in the map's style.`)));let S=v.getSource().type;S==="geojson"&&d?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||d?(i.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(d,i.id,c)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();let f=i.source,d=this.sourceCaches[f];if(d===void 0)return void this.fire(new a.j(new Error(`The source '${f}' does not exist in the map's style.`)));let v=d.getSource().type,S=v==="vector"?i.sourceLayer:void 0;v!=="vector"||S?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(S,i.id,c):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();let c=i.source,f=i.sourceLayer,d=this.sourceCaches[c];if(d!==void 0)return d.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(f,i.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let i=a.aF(this.sourceCaches,v=>v.serialize()),c=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,d=this.stylesheet;return a.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:i,layers:c,terrain:f},v=>v!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){let c=S=>this._layers[S].type==="fill-extrusion",f={},d=[];for(let S=this._order.length-1;S>=0;S--){let E=this._order[S];if(c(E)){f[E]=S;for(let C of i){let O=C[E];if(O)for(let D of O)d.push(D)}}}d.sort((S,E)=>E.intersectionZ-S.intersectionZ);let v=[];for(let S=this._order.length-1;S>=0;S--){let E=this._order[S];if(c(E))for(let C=d.length-1;C>=0;C--){let O=d[C].feature;if(f[O.layer.id]<S)break;v.push(O),d.pop()}else for(let C of i){let O=C[E];if(O)for(let D of O)v.push(D.feature)}}return v}queryRenderedFeatures(i,c,f){c&&c.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);let d={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(let E of c.layers){let C=this._layers[E];if(!C)return this.fire(new a.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];d[C.source]=!0}}let v=[];c.availableImages=this._availableImages;let S=this._serializedAllLayers();for(let E in this.sourceCaches)c.layers&&!d[E]||v.push(Ba(this.sourceCaches[E],this._layers,S,i,c,f));return this.placement&&v.push(function(E,C,O,D,L,j,G){let X={},re=j.queryRenderedSymbols(D),ae=[];for(let oe of Object.keys(re).map(Number))ae.push(G[oe]);ae.sort(uo);for(let oe of ae){let le=oe.featureIndex.lookupSymbolFeatures(re[oe.bucketInstanceId],C,oe.bucketIndex,oe.sourceLayerIndex,L.filter,L.layers,L.availableImages,E);for(let Q in le){let fe=X[Q]=X[Q]||[],ge=le[Q];ge.sort((we,Me)=>{let Fe=oe.featureSortOrder;if(Fe){let Ge=Fe.indexOf(we.featureIndex);return Fe.indexOf(Me.featureIndex)-Ge}return Me.featureIndex-we.featureIndex});for(let we of ge)fe.push(we)}}for(let oe in X)X[oe].forEach(le=>{let Q=le.feature,fe=O[E[oe].source].getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=fe});return X}(this._layers,S,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,c){c&&c.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",c.filter,null,c);let f=this.sourceCaches[i];return f?function(d,v){let S=d.getRenderableIds().map(O=>d.getTileByID(O)),E=[],C={};for(let O=0;O<S.length;O++){let D=S[O],L=D.tileID.canonical.key;C[L]||(C[L]=!0,D.querySourceFeatures(E,v))}return E}(f,c):[]}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();let f=this.light.getLight(),d=!1;for(let S in i)if(!a.aE(i[S],f[S])){d=!0;break}if(!d)return;let v={now:T.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(v)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,c={}){let f=this.getSky(),d=!1;if(!i&&!f)return;if(i&&!f)d=!0;else if(!i&&f)d=!0;else for(let S in i)if(!a.aE(i[S],f[S])){d=!0;break}if(!d)return;let v={now:T.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,c),this.sky.updateTransitions(v)}_validate(i,c,f,d,v={}){return(!v||v.validate!==!1)&&Va(this,i.call(a.u,a.e({key:c,style:this.serialize(),value:f,styleSpec:a.v},d)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),nn().off(Pe,this._rtlPluginLoaded);for(let c in this._layers)this._layers[c].setEventedParent(null);for(let c in this.sourceCaches){let f=this.sourceCaches[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(let c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(let i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,f,d,v=!1){let S=!1,E=!1,C={};for(let O of this._order){let D=this._layers[O];if(D.type!=="symbol")continue;if(!C[D.source]){let j=this.sourceCaches[D.source];C[D.source]=j.getRenderableIds(!0).map(G=>j.getTileByID(G)).sort((G,X)=>X.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(X.tileID)?-1:1))}let L=this.crossTileSymbolIndex.addLayer(D,C[D.source],i.center.lng);S=S||L}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(T.now(),i.zoom))&&(this.pauseablePlacement=new Nc(i,this.map.terrain,this._order,v,c,f,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(T.now()),E=!0),S&&this.pauseablePlacement.placement.setStale()),E||S)for(let O of this._order){let D=this._layers[O];D.type==="symbol"&&this.placement.updateLayerOpacities(D,C[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(T.now())}_releaseSymbolFadeTiles(){for(let i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c){return a._(this,void 0,void 0,function*(){let f=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();let d=this.sourceCaches[c.source];return d&&d.setDependencies(c.tileID.key,c.type,c.icons),f})}getGlyphs(i,c){return a._(this,void 0,void 0,function*(){let f=yield this.glyphManager.getGlyphs(c.stacks),d=this.sourceCaches[c.source];return d&&d.setDependencies(c.tileID.key,c.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(a.u.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,f={},d){this._checkLoaded();let v=[{id:i,url:c}],S=[...Ze(this.stylesheet.sprite),...v];this._validate(a.u.sprite,"sprite",S,null,f)||(this.stylesheet.sprite=S,this._loadSprite(v,!0,d))}removeSprite(i){this._checkLoaded();let c=Ze(this.stylesheet.sprite);if(c.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(let f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex(f=>f.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Ze(this.stylesheet.sprite)}setSprite(i,c={},f){this._checkLoaded(),i&&this._validate(a.u.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}var au=a.Y([{name:"a_pos",type:"Int16",components:2}]);let ys={prelude:sr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:sr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:sr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:sr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:sr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:sr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:sr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:sr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:sr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:sr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:sr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:sr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:sr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:sr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:sr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:sr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:sr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:sr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:sr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:sr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function sr(g,i){let c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),d=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=v?v.concat(d):d,E={};return{fragmentSource:g=g.replace(c,(C,O,D,L,j)=>(E[j]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
varying ${D} ${L} ${j};
#else
uniform ${D} ${L} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${D} ${L} ${j} = u_${j};
#endif
`)),vertexSource:i=i.replace(c,(C,O,D,L,j)=>{let G=L==="float"?"vec2":"vec4",X=j.match(/color/)?"color":G;return E[j]?O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${D} ${G} a_${j};
varying ${D} ${L} ${j};
#else
uniform ${D} ${L} u_${j};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${D} ${L} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${X}(a_${j}, u_${j}_t);
#else
    ${D} ${L} ${j} = u_${j};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${D} ${G} a_${j};
#else
uniform ${D} ${L} u_${j};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${D} ${L} ${j} = a_${j};
#else
    ${D} ${L} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${D} ${L} ${j} = unpack_mix_${X}(a_${j}, u_${j}_t);
#else
    ${D} ${L} ${j} = u_${j};
#endif
`}),staticAttributes:f,staticUniforms:S}}class ym{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,f,d,v,S,E,C,O){this.context=i;let D=this.boundPaintVertexBuffers.length!==d.length;for(let L=0;!D&&L<d.length;L++)this.boundPaintVertexBuffers[L]!==d[L]&&(D=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||D||this.boundIndexBuffer!==v||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==O?this.freshBind(c,f,d,v,S,E,C,O):(i.bindVertexArray.set(this.vao),E&&E.bind(),v&&v.dynamicDraw&&v.bind(),C&&C.bind(),O&&O.bind())}freshBind(i,c,f,d,v,S,E,C){let O=i.numAttributes,D=this.context,L=D.gl;this.vao&&this.destroy(),this.vao=D.createVertexArray(),D.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=d,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=C,c.enableAttributes(L,i);for(let j of f)j.enableAttributes(L,i);S&&S.enableAttributes(L,i),E&&E.enableAttributes(L,i),C&&C.enableAttributes(L,i),c.bind(),c.setVertexAttribPointers(L,i,v);for(let j of f)j.bind(),j.setVertexAttribPointers(L,i,v);S&&(S.bind(),S.setVertexAttribPointers(L,i,v)),d&&d.bind(),E&&(E.bind(),E.setVertexAttribPointers(L,i,v)),C&&(C.bind(),C.setVertexAttribPointers(L,i,v)),D.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let _m=(g,i,c,f,d)=>({u_matrix:g,u_texture:0,u_ele_delta:i,u_fog_matrix:c,u_fog_color:f?f.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?f.calculateFogBlendOpacity(d):0,u_horizon_color:f?f.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1});function rl(g){let i=[];for(let c=0;c<g.length;c++){if(g[c]===null)continue;let f=g[c].split(" ");i.push(f.pop())}return i}class xm{constructor(i,c,f,d,v,S){let E=i.gl;this.program=E.createProgram();let C=rl(c.staticAttributes),O=f?f.getBinderAttributes():[],D=C.concat(O),L=ys.prelude.staticUniforms?rl(ys.prelude.staticUniforms):[],j=c.staticUniforms?rl(c.staticUniforms):[],G=f?f.getBinderUniforms():[],X=L.concat(j).concat(G),re=[];for(let we of X)re.indexOf(we)<0&&re.push(we);let ae=f?f.defines():[];v&&ae.push("#define OVERDRAW_INSPECTOR;"),S&&ae.push("#define TERRAIN3D;");let oe=ae.concat(ys.prelude.fragmentSource,c.fragmentSource).join(`
`),le=ae.concat(ys.prelude.vertexSource,c.vertexSource).join(`
`),Q=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(Q,oe),E.compileShader(Q),!E.getShaderParameter(Q,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(Q)}`);E.attachShader(this.program,Q);let fe=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(fe,le),E.compileShader(fe),!E.getShaderParameter(fe,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(fe)}`);E.attachShader(this.program,fe),this.attributes={};let ge={};this.numAttributes=D.length;for(let we=0;we<this.numAttributes;we++)D[we]&&(E.bindAttribLocation(this.program,we,D[we]),this.attributes[D[we]]=we);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(fe),E.deleteShader(Q);for(let we=0;we<re.length;we++){let Me=re[we];if(Me&&!ge[Me]){let Fe=E.getUniformLocation(this.program,Me);Fe&&(ge[Me]=Fe)}}this.fixedUniforms=d(i,ge),this.terrainUniforms=((we,Me)=>({u_depth:new a.aH(we,Me.u_depth),u_terrain:new a.aH(we,Me.u_terrain),u_terrain_dim:new a.aI(we,Me.u_terrain_dim),u_terrain_matrix:new a.aJ(we,Me.u_terrain_matrix),u_terrain_unpack:new a.aK(we,Me.u_terrain_unpack),u_terrain_exaggeration:new a.aI(we,Me.u_terrain_exaggeration)}))(i,ge),this.binderUniforms=f?f.getUniforms(i,ge):[]}draw(i,c,f,d,v,S,E,C,O,D,L,j,G,X,re,ae,oe,le){let Q=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(d),i.setColorMode(v),i.setCullFace(S),C){i.activeTexture.set(Q.TEXTURE2),Q.bindTexture(Q.TEXTURE_2D,C.depthTexture),i.activeTexture.set(Q.TEXTURE3),Q.bindTexture(Q.TEXTURE_2D,C.texture);for(let ge in this.terrainUniforms)this.terrainUniforms[ge].set(C[ge])}for(let ge in this.fixedUniforms)this.fixedUniforms[ge].set(E[ge]);re&&re.setUniforms(i,this.binderUniforms,G,{zoom:X});let fe=0;switch(c){case Q.LINES:fe=2;break;case Q.TRIANGLES:fe=3;break;case Q.LINE_STRIP:fe=1;}for(let ge of j.get()){let we=ge.vaos||(ge.vaos={});(we[O]||(we[O]=new ym)).bind(i,this,D,re?re.getPaintVertexBuffers():[],L,ge.vertexOffset,ae,oe,le),Q.drawElements(c,ge.primitiveLength*fe,Q.UNSIGNED_SHORT,ge.primitiveOffset*fe*2)}}}function vf(g,i,c){let f=1/Zt(c,1,i.transform.tileZoom),d=Math.pow(2,c.tileID.overscaledZ),v=c.tileSize*Math.pow(2,i.transform.tileZoom)/d,S=v*(c.tileID.canonical.x+c.tileID.wrap*d),E=v*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[S>>16,E>>16],u_pixel_coord_lower:[65535&S,65535&E]}}let Bc=(g,i,c,f)=>{let d=i.style.light,v=d.properties.get("position"),S=[v.x,v.y,v.z],E=function(){var O=new a.A(9);return a.A!=Float32Array&&(O[1]=0,O[2]=0,O[3]=0,O[5]=0,O[6]=0,O[7]=0),O[0]=1,O[4]=1,O[8]=1,O}();d.properties.get("anchor")==="viewport"&&function(O,D){var L=Math.sin(D),j=Math.cos(D);O[0]=j,O[1]=L,O[2]=0,O[3]=-L,O[4]=j,O[5]=0,O[6]=0,O[7]=0,O[8]=1}(E,-i.transform.angle),function(O,D,L){var j=D[0],G=D[1],X=D[2];O[0]=j*L[0]+G*L[3]+X*L[6],O[1]=j*L[1]+G*L[4]+X*L[7],O[2]=j*L[2]+G*L[5]+X*L[8]}(S,S,E);let C=d.properties.get("color");return{u_matrix:g,u_lightpos:S,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+c,u_opacity:f}},gf=(g,i,c,f,d,v,S)=>a.e(Bc(g,i,c,f),vf(v,i,S),{u_height_factor:-Math.pow(2,d.overscaledZ)/S.tileSize/8}),il=g=>({u_matrix:g}),s0=(g,i,c,f)=>a.e(il(g),vf(c,i,f)),UA=(g,i)=>({u_matrix:g,u_world:i}),u0=(g,i,c,f,d)=>a.e(s0(g,i,c,f),{u_world:d}),jA=(g,i,c,f)=>{let d=g.transform,v,S;if(f.paint.get("circle-pitch-alignment")==="map"){let E=Zt(c,1,d.zoom);v=!0,S=[E,E]}else v=!1,S=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(i.posMatrix,c,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:S}},ou=(g,i,c)=>({u_matrix:g,u_inv_matrix:i,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),Uc=(g,i,c=1)=>({u_matrix:g,u_color:i,u_overlay:0,u_overlay_scale:c}),qn=g=>({u_matrix:g}),An=(g,i,c,f)=>({u_matrix:g,u_extrude_scale:Zt(i,1,c),u_intensity:f}),yf=(g,i,c,f)=>{let d=a.H();a.aP(d,0,g.width,g.height,0,0,1);let v=g.context.gl;return{u_matrix:d,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:c,u_color_ramp:f,u_opacity:i.paint.get("heatmap-opacity")}};function _f(g,i){let c=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new a.Z(0,f/c).toLngLat().lat,new a.Z(0,(f+1)/c).toLngLat().lat]}let xf=(g,i,c,f)=>{let d=g.transform;return{u_matrix:h0(g,i,c,f),u_ratio:1/Zt(i,1,d.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},l0=(g,i,c,f,d)=>a.e(xf(g,i,c,d),{u_image:0,u_image_height:f}),nl=(g,i,c,f,d)=>{let v=g.transform,S=c0(i,v);return{u_matrix:h0(g,i,c,d),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Zt(i,1,v.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[S,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},VA=(g,i,c,f,d,v)=>{let S=g.lineAtlas,E=c0(i,g.transform),C=c.layout.get("line-cap")==="round",O=S.getDash(f.from,C),D=S.getDash(f.to,C),L=O.width*d.fromScale,j=D.width*d.toScale;return a.e(xf(g,i,c,v),{u_patternscale_a:[E/L,-O.height/2],u_patternscale_b:[E/j,-D.height/2],u_sdfgamma:S.width/(256*Math.min(L,j)*g.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:D.y,u_mix:d.t})};function c0(g,i){return 1/Zt(g,1,i.tileZoom)}function h0(g,i,c,f){return g.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}let $A=(g,i,c,f,d)=>{return{u_matrix:g,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(S=d.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(v=d.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:WA(d.paint.get("raster-hue-rotate"))};var v,S};function WA(g){g*=Math.PI/180;let i=Math.sin(g),c=Math.cos(g);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}let f0=(g,i,c,f,d,v,S,E,C,O,D,L,j,G)=>{let X=S.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:X.width/X.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:C,u_coord_matrix:O,u_is_text:+L,u_pitch_with_map:+f,u_is_along_line:d,u_is_variable_anchor:v,u_texsize:j,u_texture:0,u_translation:D,u_pitched_scale:G}},jc=(g,i,c,f,d,v,S,E,C,O,D,L,j,G,X)=>{let re=S.transform;return a.e(f0(g,i,c,f,d,v,S,E,C,O,D,L,j,X),{u_gamma_scale:f?Math.cos(re._pitch)*re.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+G})},bm=(g,i,c,f,d,v,S,E,C,O,D,L,j,G)=>a.e(jc(g,i,c,f,d,v,S,E,C,O,D,!0,L,!0,G),{u_texsize_icon:j,u_texture_icon:1}),bf=(g,i,c)=>({u_matrix:g,u_opacity:i,u_color:c}),wm=(g,i,c,f,d,v)=>a.e(function(S,E,C,O){let D=C.imageManager.getPattern(S.from.toString()),L=C.imageManager.getPattern(S.to.toString()),{width:j,height:G}=C.imageManager.getPixelSize(),X=Math.pow(2,O.tileID.overscaledZ),re=O.tileSize*Math.pow(2,C.transform.tileZoom)/X,ae=re*(O.tileID.canonical.x+O.tileID.wrap*X),oe=re*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:D.tl,u_pattern_br_a:D.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[j,G],u_mix:E.t,u_pattern_size_a:D.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Zt(O,1,C.transform.tileZoom),u_pixel_coord_upper:[ae>>16,oe>>16],u_pixel_coord_lower:[65535&ae,65535&oe]}}(f,v,c,d),{u_matrix:g,u_opacity:i}),Sm={fillExtrusion:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_lightpos:new a.aN(g,i.u_lightpos),u_lightintensity:new a.aI(g,i.u_lightintensity),u_lightcolor:new a.aN(g,i.u_lightcolor),u_vertical_gradient:new a.aI(g,i.u_vertical_gradient),u_opacity:new a.aI(g,i.u_opacity)}),fillExtrusionPattern:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_lightpos:new a.aN(g,i.u_lightpos),u_lightintensity:new a.aI(g,i.u_lightintensity),u_lightcolor:new a.aN(g,i.u_lightcolor),u_vertical_gradient:new a.aI(g,i.u_vertical_gradient),u_height_factor:new a.aI(g,i.u_height_factor),u_image:new a.aH(g,i.u_image),u_texsize:new a.aO(g,i.u_texsize),u_pixel_coord_upper:new a.aO(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(g,i.u_pixel_coord_lower),u_scale:new a.aN(g,i.u_scale),u_fade:new a.aI(g,i.u_fade),u_opacity:new a.aI(g,i.u_opacity)}),fill:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix)}),fillPattern:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_image:new a.aH(g,i.u_image),u_texsize:new a.aO(g,i.u_texsize),u_pixel_coord_upper:new a.aO(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(g,i.u_pixel_coord_lower),u_scale:new a.aN(g,i.u_scale),u_fade:new a.aI(g,i.u_fade)}),fillOutline:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_world:new a.aO(g,i.u_world)}),fillOutlinePattern:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_world:new a.aO(g,i.u_world),u_image:new a.aH(g,i.u_image),u_texsize:new a.aO(g,i.u_texsize),u_pixel_coord_upper:new a.aO(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(g,i.u_pixel_coord_lower),u_scale:new a.aN(g,i.u_scale),u_fade:new a.aI(g,i.u_fade)}),circle:(g,i)=>({u_camera_to_center_distance:new a.aI(g,i.u_camera_to_center_distance),u_scale_with_map:new a.aH(g,i.u_scale_with_map),u_pitch_with_map:new a.aH(g,i.u_pitch_with_map),u_extrude_scale:new a.aO(g,i.u_extrude_scale),u_device_pixel_ratio:new a.aI(g,i.u_device_pixel_ratio),u_matrix:new a.aJ(g,i.u_matrix)}),collisionBox:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_pixel_extrude_scale:new a.aO(g,i.u_pixel_extrude_scale)}),collisionCircle:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_inv_matrix:new a.aJ(g,i.u_inv_matrix),u_camera_to_center_distance:new a.aI(g,i.u_camera_to_center_distance),u_viewport_size:new a.aO(g,i.u_viewport_size)}),debug:(g,i)=>({u_color:new a.aL(g,i.u_color),u_matrix:new a.aJ(g,i.u_matrix),u_overlay:new a.aH(g,i.u_overlay),u_overlay_scale:new a.aI(g,i.u_overlay_scale)}),clippingMask:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix)}),heatmap:(g,i)=>({u_extrude_scale:new a.aI(g,i.u_extrude_scale),u_intensity:new a.aI(g,i.u_intensity),u_matrix:new a.aJ(g,i.u_matrix)}),heatmapTexture:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_world:new a.aO(g,i.u_world),u_image:new a.aH(g,i.u_image),u_color_ramp:new a.aH(g,i.u_color_ramp),u_opacity:new a.aI(g,i.u_opacity)}),hillshade:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_image:new a.aH(g,i.u_image),u_latrange:new a.aO(g,i.u_latrange),u_light:new a.aO(g,i.u_light),u_shadow:new a.aL(g,i.u_shadow),u_highlight:new a.aL(g,i.u_highlight),u_accent:new a.aL(g,i.u_accent)}),hillshadePrepare:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_image:new a.aH(g,i.u_image),u_dimension:new a.aO(g,i.u_dimension),u_zoom:new a.aI(g,i.u_zoom),u_unpack:new a.aK(g,i.u_unpack)}),line:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_ratio:new a.aI(g,i.u_ratio),u_device_pixel_ratio:new a.aI(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.aO(g,i.u_units_to_pixels)}),lineGradient:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_ratio:new a.aI(g,i.u_ratio),u_device_pixel_ratio:new a.aI(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.aO(g,i.u_units_to_pixels),u_image:new a.aH(g,i.u_image),u_image_height:new a.aI(g,i.u_image_height)}),linePattern:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_texsize:new a.aO(g,i.u_texsize),u_ratio:new a.aI(g,i.u_ratio),u_device_pixel_ratio:new a.aI(g,i.u_device_pixel_ratio),u_image:new a.aH(g,i.u_image),u_units_to_pixels:new a.aO(g,i.u_units_to_pixels),u_scale:new a.aN(g,i.u_scale),u_fade:new a.aI(g,i.u_fade)}),lineSDF:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_ratio:new a.aI(g,i.u_ratio),u_device_pixel_ratio:new a.aI(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.aO(g,i.u_units_to_pixels),u_patternscale_a:new a.aO(g,i.u_patternscale_a),u_patternscale_b:new a.aO(g,i.u_patternscale_b),u_sdfgamma:new a.aI(g,i.u_sdfgamma),u_image:new a.aH(g,i.u_image),u_tex_y_a:new a.aI(g,i.u_tex_y_a),u_tex_y_b:new a.aI(g,i.u_tex_y_b),u_mix:new a.aI(g,i.u_mix)}),raster:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_tl_parent:new a.aO(g,i.u_tl_parent),u_scale_parent:new a.aI(g,i.u_scale_parent),u_buffer_scale:new a.aI(g,i.u_buffer_scale),u_fade_t:new a.aI(g,i.u_fade_t),u_opacity:new a.aI(g,i.u_opacity),u_image0:new a.aH(g,i.u_image0),u_image1:new a.aH(g,i.u_image1),u_brightness_low:new a.aI(g,i.u_brightness_low),u_brightness_high:new a.aI(g,i.u_brightness_high),u_saturation_factor:new a.aI(g,i.u_saturation_factor),u_contrast_factor:new a.aI(g,i.u_contrast_factor),u_spin_weights:new a.aN(g,i.u_spin_weights)}),symbolIcon:(g,i)=>({u_is_size_zoom_constant:new a.aH(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(g,i.u_is_size_feature_constant),u_size_t:new a.aI(g,i.u_size_t),u_size:new a.aI(g,i.u_size),u_camera_to_center_distance:new a.aI(g,i.u_camera_to_center_distance),u_pitch:new a.aI(g,i.u_pitch),u_rotate_symbol:new a.aH(g,i.u_rotate_symbol),u_aspect_ratio:new a.aI(g,i.u_aspect_ratio),u_fade_change:new a.aI(g,i.u_fade_change),u_matrix:new a.aJ(g,i.u_matrix),u_label_plane_matrix:new a.aJ(g,i.u_label_plane_matrix),u_coord_matrix:new a.aJ(g,i.u_coord_matrix),u_is_text:new a.aH(g,i.u_is_text),u_pitch_with_map:new a.aH(g,i.u_pitch_with_map),u_is_along_line:new a.aH(g,i.u_is_along_line),u_is_variable_anchor:new a.aH(g,i.u_is_variable_anchor),u_texsize:new a.aO(g,i.u_texsize),u_texture:new a.aH(g,i.u_texture),u_translation:new a.aO(g,i.u_translation),u_pitched_scale:new a.aI(g,i.u_pitched_scale)}),symbolSDF:(g,i)=>({u_is_size_zoom_constant:new a.aH(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(g,i.u_is_size_feature_constant),u_size_t:new a.aI(g,i.u_size_t),u_size:new a.aI(g,i.u_size),u_camera_to_center_distance:new a.aI(g,i.u_camera_to_center_distance),u_pitch:new a.aI(g,i.u_pitch),u_rotate_symbol:new a.aH(g,i.u_rotate_symbol),u_aspect_ratio:new a.aI(g,i.u_aspect_ratio),u_fade_change:new a.aI(g,i.u_fade_change),u_matrix:new a.aJ(g,i.u_matrix),u_label_plane_matrix:new a.aJ(g,i.u_label_plane_matrix),u_coord_matrix:new a.aJ(g,i.u_coord_matrix),u_is_text:new a.aH(g,i.u_is_text),u_pitch_with_map:new a.aH(g,i.u_pitch_with_map),u_is_along_line:new a.aH(g,i.u_is_along_line),u_is_variable_anchor:new a.aH(g,i.u_is_variable_anchor),u_texsize:new a.aO(g,i.u_texsize),u_texture:new a.aH(g,i.u_texture),u_gamma_scale:new a.aI(g,i.u_gamma_scale),u_device_pixel_ratio:new a.aI(g,i.u_device_pixel_ratio),u_is_halo:new a.aH(g,i.u_is_halo),u_translation:new a.aO(g,i.u_translation),u_pitched_scale:new a.aI(g,i.u_pitched_scale)}),symbolTextAndIcon:(g,i)=>({u_is_size_zoom_constant:new a.aH(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(g,i.u_is_size_feature_constant),u_size_t:new a.aI(g,i.u_size_t),u_size:new a.aI(g,i.u_size),u_camera_to_center_distance:new a.aI(g,i.u_camera_to_center_distance),u_pitch:new a.aI(g,i.u_pitch),u_rotate_symbol:new a.aH(g,i.u_rotate_symbol),u_aspect_ratio:new a.aI(g,i.u_aspect_ratio),u_fade_change:new a.aI(g,i.u_fade_change),u_matrix:new a.aJ(g,i.u_matrix),u_label_plane_matrix:new a.aJ(g,i.u_label_plane_matrix),u_coord_matrix:new a.aJ(g,i.u_coord_matrix),u_is_text:new a.aH(g,i.u_is_text),u_pitch_with_map:new a.aH(g,i.u_pitch_with_map),u_is_along_line:new a.aH(g,i.u_is_along_line),u_is_variable_anchor:new a.aH(g,i.u_is_variable_anchor),u_texsize:new a.aO(g,i.u_texsize),u_texsize_icon:new a.aO(g,i.u_texsize_icon),u_texture:new a.aH(g,i.u_texture),u_texture_icon:new a.aH(g,i.u_texture_icon),u_gamma_scale:new a.aI(g,i.u_gamma_scale),u_device_pixel_ratio:new a.aI(g,i.u_device_pixel_ratio),u_is_halo:new a.aH(g,i.u_is_halo),u_translation:new a.aO(g,i.u_translation),u_pitched_scale:new a.aI(g,i.u_pitched_scale)}),background:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_opacity:new a.aI(g,i.u_opacity),u_color:new a.aL(g,i.u_color)}),backgroundPattern:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_opacity:new a.aI(g,i.u_opacity),u_image:new a.aH(g,i.u_image),u_pattern_tl_a:new a.aO(g,i.u_pattern_tl_a),u_pattern_br_a:new a.aO(g,i.u_pattern_br_a),u_pattern_tl_b:new a.aO(g,i.u_pattern_tl_b),u_pattern_br_b:new a.aO(g,i.u_pattern_br_b),u_texsize:new a.aO(g,i.u_texsize),u_mix:new a.aI(g,i.u_mix),u_pattern_size_a:new a.aO(g,i.u_pattern_size_a),u_pattern_size_b:new a.aO(g,i.u_pattern_size_b),u_scale_a:new a.aI(g,i.u_scale_a),u_scale_b:new a.aI(g,i.u_scale_b),u_pixel_coord_upper:new a.aO(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(g,i.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(g,i.u_tile_units_to_pixels)}),terrain:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_texture:new a.aH(g,i.u_texture),u_ele_delta:new a.aI(g,i.u_ele_delta),u_fog_matrix:new a.aJ(g,i.u_fog_matrix),u_fog_color:new a.aL(g,i.u_fog_color),u_fog_ground_blend:new a.aI(g,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(g,i.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(g,i.u_horizon_color),u_horizon_fog_blend:new a.aI(g,i.u_horizon_fog_blend)}),terrainDepth:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_ele_delta:new a.aI(g,i.u_ele_delta)}),terrainCoords:(g,i)=>({u_matrix:new a.aJ(g,i.u_matrix),u_texture:new a.aH(g,i.u_texture),u_terrain_coords_id:new a.aI(g,i.u_terrain_coords_id),u_ele_delta:new a.aI(g,i.u_ele_delta)}),sky:(g,i)=>({u_sky_color:new a.aL(g,i.u_sky_color),u_horizon_color:new a.aL(g,i.u_horizon_color),u_horizon:new a.aI(g,i.u_horizon),u_sky_horizon_blend:new a.aI(g,i.u_sky_horizon_blend)})};class ho{constructor(i,c,f){this.context=i;let d=i.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){let c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let GA={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class qm{constructor(i,c,f,d){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=d,this.context=i;let v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);let c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let f=0;f<this.attributes.length;f++){let d=c.attributes[this.attributes[f].name];d!==void 0&&i.enableVertexAttribArray(d)}}setVertexAttribPointers(i,c,f){for(let d=0;d<this.attributes.length;d++){let v=this.attributes[d],S=c.attributes[v.name];S!==void 0&&i.vertexAttribPointer(S,v.components,i[GA[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let su=new WeakMap;function _s(g){var i;if(su.has(g))return su.get(g);{let c=(i=g.getParameter(g.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return su.set(g,c),c}}class lr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class wf extends lr{getDefault(){return a.aM.transparent}set(i){let c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class KA extends lr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class al extends lr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class HA extends lr{getDefault(){return[!0,!0,!0,!0]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class d0 extends lr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ZA extends lr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class p0 extends lr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){let c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Am extends lr{getDefault(){let i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class m0 extends lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class v0 extends lr{getDefault(){return[0,1]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class g0 extends lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class y0 extends lr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class uu extends lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class _0 extends lr{getDefault(){let i=this.gl;return[i.ONE,i.ZERO]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class XA extends lr{getDefault(){return a.aM.transparent}set(i){let c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class x0 extends lr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Vc extends lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class JA extends lr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Sf extends lr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class YA extends lr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class QA extends lr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class b0 extends lr{getDefault(){let i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){let c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class w0 extends lr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class S0 extends lr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Em extends lr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class q0 extends lr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class qf extends lr{getDefault(){return null}set(i){let c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ko extends lr{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;let f=this.gl;_s(f)?f.bindVertexArray(i):(c=f.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Tm extends lr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Im extends lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Cm extends lr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Af extends lr{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Pm extends Af{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class lu extends Af{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Mm extends Af{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class eE{constructor(i,c,f,d,v){this.context=i,this.width=c,this.height=f;let S=i.gl,E=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Pm(i,E),d)this.depthAttachment=v?new Mm(i,E):new lu(i,E);else if(v)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){let f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Jr{constructor(i,c,f){this.blendFunction=i,this.blendColor=c,this.mask=f}}Jr.Replace=[1,0],Jr.disabled=new Jr(Jr.Replace,a.aM.transparent,[!1,!1,!1,!1]),Jr.unblended=new Jr(Jr.Replace,a.aM.transparent,[!0,!0,!0,!0]),Jr.alphaBlended=new Jr([1,771],a.aM.transparent,[!0,!0,!0,!0]);class tE{constructor(i){var c,f;if(this.gl=i,this.clearColor=new wf(this),this.clearDepth=new KA(this),this.clearStencil=new al(this),this.colorMask=new HA(this),this.depthMask=new d0(this),this.stencilMask=new ZA(this),this.stencilFunc=new p0(this),this.stencilOp=new Am(this),this.stencilTest=new m0(this),this.depthRange=new v0(this),this.depthTest=new g0(this),this.depthFunc=new y0(this),this.blend=new uu(this),this.blendFunc=new _0(this),this.blendColor=new XA(this),this.blendEquation=new x0(this),this.cullFace=new Vc(this),this.cullFaceSide=new JA(this),this.frontFace=new Sf(this),this.program=new YA(this),this.activeTexture=new QA(this),this.viewport=new b0(this),this.bindFramebuffer=new w0(this),this.bindRenderbuffer=new S0(this),this.bindTexture=new Em(this),this.bindVertexBuffer=new q0(this),this.bindElementBuffer=new qf(this),this.bindVertexArray=new Ko(this),this.pixelStoreUnpack=new Tm(this),this.pixelStoreUnpackPremultiplyAlpha=new Im(this),this.pixelStoreUnpackFlipY=new Cm(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),_s(i)){this.HALF_FLOAT=i.HALF_FLOAT;let d=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:d==null?void 0:d.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");let d=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new ho(this,i,c)}createVertexBuffer(i,c,f){return new qm(this,i,c,f)}createRenderbuffer(i,c,f){let d=this.gl,v=d.createRenderbuffer();return this.bindRenderbuffer.set(v),d.renderbufferStorage(d.RENDERBUFFER,i,c,f),this.bindRenderbuffer.set(null),v}createFramebuffer(i,c,f,d){return new eE(this,i,c,f,d)}clear({color:i,depth:c,stencil:f}){let d=this.gl,v=0;i&&(v|=d.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(v|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(v|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),d.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){a.aE(i.blendFunction,Jr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return _s(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return _s(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Wt{constructor(i,c,f){this.func=i,this.mask=c,this.range=f}}Wt.ReadOnly=!1,Wt.ReadWrite=!0,Wt.disabled=new Wt(519,Wt.ReadOnly,[0,1]);let Ef=7680;class Sr{constructor(i,c,f,d,v,S){this.test=i,this.ref=c,this.mask=f,this.fail=d,this.depthFail=v,this.pass=S}}Sr.disabled=new Sr({func:519,mask:0},0,0,Ef,Ef,Ef);class mr{constructor(i,c,f){this.enable=i,this.mode=c,this.frontFace=f}}let cu;function $c(g,i,c,f,d){let v=g.context,S=v.gl,E=g.useProgram("collisionBox"),C=[],O=0,D=0;for(let oe=0;oe<f.length;oe++){let le=f[oe],Q=i.getTile(le).getBucket(c);if(!Q)continue;let fe=d?Q.textCollisionBox:Q.iconCollisionBox,ge=Q.collisionCircleArray;if(ge.length>0){let we=a.H();a.aQ(we,Q.placementInvProjMatrix,g.transform.glCoordMatrix),a.aQ(we,we,Q.placementViewportMatrix),C.push({circleArray:ge,circleOffset:D,transform:le.posMatrix,invTransform:we,coord:le}),O+=ge.length/4,D=O}fe&&E.draw(v,S.LINES,Wt.disabled,Sr.disabled,g.colorModeForRenderPass(),mr.disabled,{u_matrix:le.posMatrix,u_pixel_extrude_scale:[1/(L=g.transform).width,1/L.height]},g.style.map.terrain&&g.style.map.terrain.getTerrainData(le),c.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,null,g.transform.zoom,null,null,fe.collisionVertexBuffer)}var L;if(!d||!C.length)return;let j=g.useProgram("collisionCircle"),G=new a.aR;G.resize(4*O),G._trim();let X=0;for(let oe of C)for(let le=0;le<oe.circleArray.length/4;le++){let Q=4*le,fe=oe.circleArray[Q+0],ge=oe.circleArray[Q+1],we=oe.circleArray[Q+2],Me=oe.circleArray[Q+3];G.emplace(X++,fe,ge,we,Me,0),G.emplace(X++,fe,ge,we,Me,1),G.emplace(X++,fe,ge,we,Me,2),G.emplace(X++,fe,ge,we,Me,3)}(!cu||cu.length<2*O)&&(cu=function(oe){let le=2*oe,Q=new a.aT;Q.resize(le),Q._trim();for(let fe=0;fe<le;fe++){let ge=6*fe;Q.uint16[ge+0]=4*fe+0,Q.uint16[ge+1]=4*fe+1,Q.uint16[ge+2]=4*fe+2,Q.uint16[ge+3]=4*fe+2,Q.uint16[ge+4]=4*fe+3,Q.uint16[ge+5]=4*fe+0}return Q}(O));let re=v.createIndexBuffer(cu,!0),ae=v.createVertexBuffer(G,a.aS.members,!0);for(let oe of C){let le=ou(oe.transform,oe.invTransform,g.transform);j.draw(v,S.TRIANGLES,Wt.disabled,Sr.disabled,g.colorModeForRenderPass(),mr.disabled,le,g.style.map.terrain&&g.style.map.terrain.getTerrainData(oe.coord),c.id,ae,re,a.a0.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,g.transform.zoom,null,null,null)}ae.destroy(),re.destroy()}mr.disabled=new mr(!1,1029,2305),mr.backCCW=new mr(!0,1029,2305);let Wc=a.an(new Float32Array(16));function Om(g,i,c,f,d,v){let{horizontalAlign:S,verticalAlign:E}=a.au(g);return new a.P((-(S-.5)*i/d+f[0])*v,(-(E-.5)*c/d+f[1])*v)}function hu(g,i,c,f,d,v){let S=i.tileAnchorPoint.add(new a.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let E=f.mult(v);c||(E=E.rotate(-d));let C=S.add(E);return ie(C.x,C.y,i.labelPlaneMatrix,i.getElevation).point}if(c){let E=Te(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(g),C=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return g.add(f.rotate(C))}return g.add(f)}function ol(g,i,c,f,d,v,S,E,C,O,D,L,j,G){let X=g.text.placedSymbolArray,re=g.text.dynamicLayoutVertexArray,ae=g.icon.dynamicLayoutVertexArray,oe={};re.clear();for(let le=0;le<X.length;le++){let Q=X.get(le),fe=Q.hidden||!Q.crossTileID||g.allowVerticalPlacement&&!Q.placedOrientation?null:f[Q.crossTileID];if(fe){let ge=new a.P(Q.anchorX,Q.anchorY),we={getElevation:G,width:d.width,height:d.height,labelPlaneMatrix:v,lineVertexArray:null,pitchWithMap:c,projection:D,projectionCache:null,tileAnchorPoint:ge,translation:L,unwrappedTileID:j},Me=c?ie(ge.x,ge.y,S,G):Te(ge.x,ge.y,we),Fe=N(d.cameraToCenterDistance,Me.signedDistanceFromCamera),Ge=a.ai(g.textSizeData,C,Q)*Fe/a.ap;c&&(Ge*=g.tilePixelRatio/E);let{width:it,height:Ve,anchor:je,textOffset:ct,textBoxScale:Pt}=fe,$e=Om(je,it,Ve,ct,Pt,Ge),Ye=D.getPitchedTextCorrection(d,ge.add(new a.P(L[0],L[1])),j),Tt=hu(Me.point,we,i,$e,d.angle,Ye),Pr=g.allowVerticalPlacement&&Q.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Bt=0;Bt<Q.numGlyphs;Bt++)a.aj(re,Tt,Pr);O&&Q.associatedIconIndex>=0&&(oe[Q.associatedIconIndex]={shiftedAnchor:Tt,angle:Pr})}else xt(Q.numGlyphs,re)}if(O){ae.clear();let le=g.icon.placedSymbolArray;for(let Q=0;Q<le.length;Q++){let fe=le.get(Q);if(fe.hidden)xt(fe.numGlyphs,ae);else{let ge=oe[Q];if(ge)for(let we=0;we<fe.numGlyphs;we++)a.aj(ae,ge.shiftedAnchor,ge.angle);else xt(fe.numGlyphs,ae)}}g.icon.dynamicLayoutVertexBuffer.updateData(ae)}g.text.dynamicLayoutVertexBuffer.updateData(re)}function la(g,i,c){return c.iconsInText&&i?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function km(g,i,c,f,d,v,S,E,C,O,D,L){let j=g.context,G=j.gl,X=g.transform,re=nu(),ae=E==="map",oe=C==="map",le=E!=="viewport"&&c.layout.get("symbol-placement")!=="point",Q=ae&&!oe&&!le,fe=!oe&&le,ge=!c.layout.get("symbol-sort-key").isConstant(),we=!1,Me=g.depthModeForSublayer(0,Wt.ReadOnly),Fe=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[],it=re.getCircleRadiusCorrection(X);for(let Ve of f){let je=i.getTile(Ve),ct=je.getBucket(c);if(!ct)continue;let Pt=d?ct.text:ct.icon;if(!Pt||!Pt.segments.get().length||!Pt.hasVisibleVertices)continue;let $e=Pt.programConfigurations.get(c.id),Ye=d||ct.sdfIcons,Tt=d?ct.textSizeData:ct.iconSizeData,Pr=oe||X.pitch!==0,Bt=g.useProgram(la(Ye,d,ct),$e),Xt=a.ag(Tt,X.zoom),Mr=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ve),Bi,Ga,Or,En,sn=[0,0],Ui=null;if(d)Ga=je.glyphAtlasTexture,Or=G.LINEAR,Bi=je.glyphAtlasTexture.size,ct.iconsInText&&(sn=je.imageAtlasTexture.size,Ui=je.imageAtlasTexture,En=Pr||g.options.rotating||g.options.zooming||Tt.kind==="composite"||Tt.kind==="camera"?G.LINEAR:G.NEAREST);else{let Yt=c.layout.get("icon-size").constantOr(0)!==1||ct.iconsNeedLinear;Ga=je.imageAtlasTexture,Or=Ye||g.options.rotating||g.options.zooming||Yt||Pr?G.LINEAR:G.NEAREST,Bi=je.imageAtlasTexture.size}let un=Zt(je,1,g.transform.zoom),mo=fe?Ve.posMatrix:Wc,wl=gs(mo,oe,ae,g.transform,un),Wf=co(mo,oe,ae,g.transform,un),Sl=co(Ve.posMatrix,oe,ae,g.transform,un),fa=re.translatePosition(g.transform,je,v,S),Gf=Fe&&ct.hasTextData(),nv=c.layout.get("icon-text-fit")!=="none"&&Gf&&ct.hasIconData();if(le){let Yt=g.style.map.terrain?(ql,Al)=>g.style.map.terrain.getElevation(Ve,ql,Al):null,vu=c.layout.get("text-rotation-alignment")==="map";K(ct,Ve.posMatrix,g,d,wl,Sl,oe,O,vu,re,Ve.toUnwrapped(),X.width,X.height,fa,Yt)}let da=Ve.posMatrix,pa=d&&Fe||nv,xs=le||pa?Wc:wl,Ka=Wf,Oi=Ye&&c.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ji;ji=Ye?ct.iconsInText?bm(Tt.kind,Xt,Q,oe,le,pa,g,da,xs,Ka,fa,Bi,sn,it):jc(Tt.kind,Xt,Q,oe,le,pa,g,da,xs,Ka,fa,d,Bi,!0,it):f0(Tt.kind,Xt,Q,oe,le,pa,g,da,xs,Ka,fa,d,Bi,it);let Zn={program:Bt,buffers:Pt,uniformValues:ji,atlasTexture:Ga,atlasTextureIcon:Ui,atlasInterpolation:Or,atlasInterpolationIcon:En,isSDF:Ye,hasHalo:Oi};if(ge&&ct.canOverlap){we=!0;let Yt=Pt.segments.get();for(let vu of Yt)Ge.push({segments:new a.a0([vu]),sortKey:vu.sortKey,state:Zn,terrainData:Mr})}else Ge.push({segments:Pt.segments,sortKey:0,state:Zn,terrainData:Mr})}we&&Ge.sort((Ve,je)=>Ve.sortKey-je.sortKey);for(let Ve of Ge){let je=Ve.state;if(j.activeTexture.set(G.TEXTURE0),je.atlasTexture.bind(je.atlasInterpolation,G.CLAMP_TO_EDGE),je.atlasTextureIcon&&(j.activeTexture.set(G.TEXTURE1),je.atlasTextureIcon&&je.atlasTextureIcon.bind(je.atlasInterpolationIcon,G.CLAMP_TO_EDGE)),je.isSDF){let ct=je.uniformValues;je.hasHalo&&(ct.u_is_halo=1,Rm(je.buffers,Ve.segments,c,g,je.program,Me,D,L,ct,Ve.terrainData)),ct.u_is_halo=0}Rm(je.buffers,Ve.segments,c,g,je.program,Me,D,L,je.uniformValues,Ve.terrainData)}}function Rm(g,i,c,f,d,v,S,E,C,O){let D=f.context;d.draw(D,D.gl.TRIANGLES,v,S,E,mr.disabled,C,O,c.id,g.layoutVertexBuffer,g.indexBuffer,i,c.paint,f.transform.zoom,g.programConfigurations.get(c.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Dm(g,i,c,f){let d=g.context,v=d.gl,S=Sr.disabled,E=new Jr([v.ONE,v.ONE],a.aM.transparent,[!0,!0,!0,!0]),C=i.getBucket(c);if(!C)return;let O=f.key,D=c.heatmapFbos.get(O);D||(D=Gc(d,i.tileSize,i.tileSize),c.heatmapFbos.set(O,D)),d.bindFramebuffer.set(D.framebuffer),d.viewport.set([0,0,i.tileSize,i.tileSize]),d.clear({color:a.aM.transparent});let L=C.programConfigurations.get(c.id),j=g.useProgram("heatmap",L),G=g.style.map.terrain.getTerrainData(f);j.draw(d,v.TRIANGLES,Wt.disabled,S,E,mr.disabled,An(f.posMatrix,i,g.transform.zoom,c.paint.get("heatmap-intensity")),G,c.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,c.paint,g.transform.zoom,L)}function fu(g,i,c){let f=g.context,d=f.gl;f.setColorMode(g.colorModeForRenderPass());let v=Kc(f,i),S=c.key,E=i.heatmapFbos.get(S);E&&(f.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,E.colorAttachment.get()),f.activeTexture.set(d.TEXTURE1),v.bind(d.LINEAR,d.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(f,d.TRIANGLES,Wt.disabled,Sr.disabled,g.colorModeForRenderPass(),mr.disabled,yf(g,i,0,1),null,i.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,i.paint,g.transform.zoom),E.destroy(),i.heatmapFbos.delete(S))}function Gc(g,i,c){var f,d;let v=g.gl,S=v.createTexture();v.bindTexture(v.TEXTURE_2D,S),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);let E=(f=g.HALF_FLOAT)!==null&&f!==void 0?f:v.UNSIGNED_BYTE,C=(d=g.RGBA16F)!==null&&d!==void 0?d:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,C,i,c,0,v.RGBA,E,null);let O=g.createFramebuffer(i,c,!1,!1);return O.colorAttachment.set(S),O}function Kc(g,i){return i.colorRampTexture||(i.colorRampTexture=new He(g,i.colorRamp,g.gl.RGBA)),i.colorRampTexture}function sl(g,i,c,f,d){if(!c||!f||!f.imageAtlas)return;let v=f.imageAtlas.patternPositions,S=v[c.to.toString()],E=v[c.from.toString()];if(!S&&E&&(S=E),!E&&S&&(E=S),!S||!E){let C=d.getPaintProperty(i);S=v[C],E=v[C]}S&&E&&g.setConstantPatternPositions(S,E)}function Hc(g,i,c,f,d,v,S){let E=g.context.gl,C="fill-pattern",O=c.paint.get(C),D=O&&O.constantOr(1),L=c.getCrossfadeParameters(),j,G,X,re,ae;S?(G=D&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=E.LINES):(G=D?"fillPattern":"fill",j=E.TRIANGLES);let oe=O.constantOr(null);for(let le of f){let Q=i.getTile(le);if(D&&!Q.patternsLoaded())continue;let fe=Q.getBucket(c);if(!fe)continue;let ge=fe.programConfigurations.get(c.id),we=g.useProgram(G,ge),Me=g.style.map.terrain&&g.style.map.terrain.getTerrainData(le);D&&(g.context.activeTexture.set(E.TEXTURE0),Q.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ge.updatePaintBuffers(L)),sl(ge,C,oe,Q,c);let Fe=Me?le:null,Ge=g.translatePosMatrix(Fe?Fe.posMatrix:le.posMatrix,Q,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(S){re=fe.indexBuffer2,ae=fe.segments2;let it=[E.drawingBufferWidth,E.drawingBufferHeight];X=G==="fillOutlinePattern"&&D?u0(Ge,g,L,Q,it):UA(Ge,it)}else re=fe.indexBuffer,ae=fe.segments,X=D?s0(Ge,g,L,Q):il(Ge);we.draw(g.context,j,d,g.stencilModeForClipping(le),v,mr.disabled,X,Me,c.id,fe.layoutVertexBuffer,re,ae,c.paint,g.transform.zoom,ge)}}function Tf(g,i,c,f,d,v,S){let E=g.context,C=E.gl,O="fill-extrusion-pattern",D=c.paint.get(O),L=D.constantOr(1),j=c.getCrossfadeParameters(),G=c.paint.get("fill-extrusion-opacity"),X=D.constantOr(null);for(let re of f){let ae=i.getTile(re),oe=ae.getBucket(c);if(!oe)continue;let le=g.style.map.terrain&&g.style.map.terrain.getTerrainData(re),Q=oe.programConfigurations.get(c.id),fe=g.useProgram(L?"fillExtrusionPattern":"fillExtrusion",Q);L&&(g.context.activeTexture.set(C.TEXTURE0),ae.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Q.updatePaintBuffers(j)),sl(Q,O,X,ae,c);let ge=g.translatePosMatrix(re.posMatrix,ae,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),we=c.paint.get("fill-extrusion-vertical-gradient"),Me=L?gf(ge,g,we,G,re,j,ae):Bc(ge,g,we,G);fe.draw(E,E.gl.TRIANGLES,d,v,S,mr.backCCW,Me,le,c.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,c.paint,g.transform.zoom,Q,g.style.map.terrain&&oe.centroidVertexBuffer)}}function ul(g,i,c,f,d,v,S){let E=g.context,C=E.gl,O=c.fbo;if(!O)return;let D=g.useProgram("hillshade"),L=g.style.map.terrain&&g.style.map.terrain.getTerrainData(i);E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,O.colorAttachment.get()),D.draw(E,C.TRIANGLES,d,v,S,mr.disabled,((j,G,X,re)=>{let ae=X.paint.get("hillshade-shadow-color"),oe=X.paint.get("hillshade-highlight-color"),le=X.paint.get("hillshade-accent-color"),Q=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(Q-=j.transform.angle);let fe=!j.options.moving;return{u_matrix:re?re.posMatrix:j.transform.calculatePosMatrix(G.tileID.toUnwrapped(),fe),u_image:0,u_latrange:_f(0,G.tileID),u_light:[X.paint.get("hillshade-exaggeration"),Q],u_shadow:ae,u_highlight:oe,u_accent:le}})(g,c,f,L?i:null),L,f.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function ll(g,i,c,f,d,v){let S=g.context,E=S.gl,C=i.dem;if(C&&C.data){let O=C.dim,D=C.stride,L=C.getPixels();if(S.activeTexture.set(E.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||g.getTileTexture(D),i.demTexture){let G=i.demTexture;G.update(L,{premultiply:!1}),G.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else i.demTexture=new He(S,L,E.RGBA,{premultiply:!1}),i.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);S.activeTexture.set(E.TEXTURE0);let j=i.fbo;if(!j){let G=new He(S,{width:O,height:O,data:null},E.RGBA);G.bind(E.LINEAR,E.CLAMP_TO_EDGE),j=i.fbo=S.createFramebuffer(O,O,!0,!1),j.colorAttachment.set(G.texture)}S.bindFramebuffer.set(j.framebuffer),S.viewport.set([0,0,O,O]),g.useProgram("hillshadePrepare").draw(S,E.TRIANGLES,f,d,v,mr.disabled,((G,X)=>{let re=X.stride,ae=a.H();return a.aP(ae,0,a.X,-a.X,0,0,1),a.J(ae,ae,[0,-a.X,0]),{u_matrix:ae,u_image:1,u_dimension:[re,re],u_zoom:G.overscaledZ,u_unpack:X.getUnpackVector()}})(i.tileID,C),null,c.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function A0(g,i,c,f,d,v){let S=f.paint.get("raster-fade-duration");if(!v&&S>0){let E=T.now(),C=(E-g.timeAdded)/S,O=i?(E-i.timeAdded)/S:-1,D=c.getSource(),L=d.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),j=!i||Math.abs(i.tileID.overscaledZ-L)>Math.abs(g.tileID.overscaledZ-L),G=j&&g.refreshedUponExpiration?1:a.ac(j?C:1-O,0,1);return g.refreshedUponExpiration&&C>=1&&(g.refreshedUponExpiration=!1),i?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}let Lm=new a.aM(1,0,0,1),ar=new a.aM(0,1,0,1),If=new a.aM(0,0,1,1),rE=new a.aM(1,0,1,1),E0=new a.aM(0,1,1,1);function cl(g,i,c,f){Cf(g,0,i+c/2,g.transform.width,c,f)}function T0(g,i,c,f){Cf(g,i-c/2,0,c,g.transform.height,f)}function Cf(g,i,c,f,d,v){let S=g.context,E=S.gl;E.enable(E.SCISSOR_TEST),E.scissor(i*g.pixelRatio,c*g.pixelRatio,f*g.pixelRatio,d*g.pixelRatio),S.clear({color:v}),E.disable(E.SCISSOR_TEST)}function I0(g,i,c){let f=g.context,d=f.gl,v=c.posMatrix,S=g.useProgram("debug"),E=Wt.disabled,C=Sr.disabled,O=g.colorModeForRenderPass(),D="$debug",L=g.style.map.terrain&&g.style.map.terrain.getTerrainData(c);f.activeTexture.set(d.TEXTURE0);let j=i.getTileByID(c.key).latestRawTileData,G=Math.floor((j&&j.byteLength||0)/1024),X=i.getTile(c).tileSize,re=512/Math.min(X,512)*(c.overscaledZ/g.transform.zoom)*.5,ae=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ae+=` => ${c.overscaledZ}`),function(oe,le){oe.initDebugOverlayCanvas();let Q=oe.debugOverlayCanvas,fe=oe.context.gl,ge=oe.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,Q.width,Q.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(le,5,5),ge.strokeText(le,5,5),oe.debugOverlayTexture.update(Q),oe.debugOverlayTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE)}(g,`${ae} ${G}kB`),S.draw(f,d.TRIANGLES,E,C,Jr.alphaBlended,mr.disabled,Uc(v,a.aM.transparent,re),null,D,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),S.draw(f,d.LINE_STRIP,E,C,O,mr.disabled,Uc(v,a.aM.red),L,D,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function C0(g,i,c){let f=g.context,d=f.gl,v=g.colorModeForRenderPass(),S=new Wt(d.LEQUAL,Wt.ReadWrite,g.depthRangeFor3D),E=g.useProgram("terrain"),C=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,g.width,g.height]);for(let O of c){let D=g.renderToTexture.getTexture(O),L=i.getTerrainData(O.tileID);f.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,D.texture);let j=g.transform.calculatePosMatrix(O.tileID.toUnwrapped()),G=i.getMeshFrameDelta(g.transform.zoom),X=g.transform.calculateFogMatrix(O.tileID.toUnwrapped()),re=_m(j,G,X,g.style.sky,g.transform.pitch);E.draw(f,d.TRIANGLES,S,Sr.disabled,v,mr.backCCW,re,L,"terrain",C.vertexBuffer,C.indexBuffer,C.segments)}}class Pf{constructor(i,c,f){this.vertexBuffer=i,this.indexBuffer=c,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Mf{constructor(i,c){this.context=new tE(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=qt.maxUnderzooming+qt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gm}resize(i,c,f){if(this.width=Math.floor(i*f),this.height=Math.floor(c*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let d of this.style._order)this.style._layers[d].resize()}setup(){let i=this.context,c=new a.aX;c.emplaceBack(0,0),c.emplaceBack(a.X,0),c.emplaceBack(0,a.X),c.emplaceBack(a.X,a.X),this.tileExtentBuffer=i.createVertexBuffer(c,au.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);let f=new a.aX;f.emplaceBack(0,0),f.emplaceBack(a.X,0),f.emplaceBack(0,a.X),f.emplaceBack(a.X,a.X),this.debugBuffer=i.createVertexBuffer(f,au.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);let d=new a.$;d.emplaceBack(0,0,0,0),d.emplaceBack(a.X,0,a.X,0),d.emplaceBack(0,a.X,0,a.X),d.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=i.createVertexBuffer(d,Ce.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);let v=new a.aX;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,au.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);let S=new a.aZ;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);let E=new a.aY;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(E);let C=this.context.gl;this.stencilClearMode=new Sr({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)}clearStencil(){let i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let f=a.H();a.aP(f,0,this.width,this.height,0,0,1),a.K(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,Wt.disabled,this.stencilClearMode,Jr.disabled,mr.disabled,qn(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;let f=this.context,d=f.gl;this.nextStencilID+c.length>256&&this.clearStencil(),f.setColorMode(Jr.disabled),f.setDepthMode(Wt.disabled);let v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let S of c){let E=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);v.draw(f,d.TRIANGLES,Wt.disabled,new Sr({func:d.ALWAYS,mask:0},E,255,d.KEEP,d.KEEP,d.REPLACE),Jr.disabled,mr.disabled,qn(S.posMatrix),C,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let i=this.nextStencilID++,c=this.context.gl;return new Sr({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){let c=this.context.gl;return new Sr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){let c=this.context.gl,f=i.sort((S,E)=>E.overscaledZ-S.overscaledZ),d=f[f.length-1].overscaledZ,v=f[0].overscaledZ-d+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();let S={};for(let E=0;E<v;E++)S[E+d]=new Sr({func:c.GEQUAL,mask:255},E+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=v,[S,f]}return[{[d]:Sr.disabled},f]}colorModeForRenderPass(){let i=this.context.gl;return this._showOverdrawInspector?new Jr([i.CONSTANT_COLOR,i.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jr.unblended:Jr.alphaBlended}depthModeForSublayer(i,c,f){if(!this.opaquePassEnabledForLayer())return Wt.disabled;let d=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Wt(f||this.context.gl.LEQUAL,c,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(T.now()),this.imageManager.beginFrame();let f=this.style._order,d=this.style.sourceCaches,v={},S={},E={};for(let C in d){let O=d[C];O.used&&O.prepare(this.context),v[C]=O.getVisibleCoordinates(),S[C]=v[C].slice().reverse(),E[C]=O.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<f.length;C++)if(this.style._layers[f[C]].is3D()){this.opaquePassCutoff=C;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let C of f){let O=this.style._layers[C];if(!O.hasOffscreenPass()||O.isHidden(this.transform.zoom))continue;let D=S[O.source];(O.type==="custom"||D.length)&&this.renderLayer(this,d[O.source],O,D)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(C,O){let D=C.context,L=D.gl,j=((oe,le,Q)=>({u_sky_color:oe.properties.get("sky-color"),u_horizon_color:oe.properties.get("horizon-color"),u_horizon:(le.height/2+le.getHorizon())*Q,u_sky_horizon_blend:oe.properties.get("sky-horizon-blend")*le.height/2*Q}))(O,C.style.map.transform,C.pixelRatio),G=new Wt(L.LEQUAL,Wt.ReadWrite,[0,1]),X=Sr.disabled,re=C.colorModeForRenderPass(),ae=C.useProgram("sky");if(!O.mesh){let oe=new a.aX;oe.emplaceBack(-1,-1),oe.emplaceBack(1,-1),oe.emplaceBack(1,1),oe.emplaceBack(-1,1);let le=new a.aY;le.emplaceBack(0,1,2),le.emplaceBack(0,2,3),O.mesh=new Pf(D.createVertexBuffer(oe,au.members),D.createIndexBuffer(le),a.a0.simpleSegment(0,0,oe.length,le.length))}ae.draw(D,L.TRIANGLES,G,X,re,mr.disabled,j,void 0,"sky",O.mesh.vertexBuffer,O.mesh.indexBuffer,O.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){let C=this.style._layers[f[this.currentLayer]],O=d[C.source],D=v[C.source];this._renderTileClippingMasks(C,D),this.renderLayer(this,O,C,D)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){let C=this.style._layers[f[this.currentLayer]],O=d[C.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(C))continue;let D=(C.type==="symbol"?E:S)[C.source];this._renderTileClippingMasks(C,v[C.source]),this.renderLayer(this,O,C,D)}if(this.options.showTileBoundaries){let C=function(O,D){let L=null,j=Object.values(O._layers).flatMap(ae=>ae.source&&!ae.isHidden(D)?[O.sourceCaches[ae.source]]:[]),G=j.filter(ae=>ae.getSource().type==="vector"),X=j.filter(ae=>ae.getSource().type!=="vector"),re=ae=>{(!L||L.getSource().maxzoom<ae.getSource().maxzoom)&&(L=ae)};return G.forEach(ae=>re(ae)),L||X.forEach(ae=>re(ae)),L}(this.style,this.transform.zoom);C&&function(O,D,L){for(let j=0;j<L.length;j++)I0(O,D,L[j])}(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){let O=C.transform.padding;cl(C,C.transform.height-(O.top||0),3,Lm),cl(C,O.bottom||0,3,ar),T0(C,O.left||0,3,If),T0(C,C.transform.width-(O.right||0),3,rE);let D=C.transform.centerPoint;(function(L,j,G,X){Cf(L,j-1,G-10,2,20,X),Cf(L,j-10,G-1,20,2,X)})(C,D.x,C.transform.height-D.y,E0)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;let c=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix,d=this.terrainFacilitator.dirty;d||(d=i?!a.a_(c,f):!a.a$(c,f)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(a.b0(c,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,S){let E=v.context,C=E.gl,O=Jr.unblended,D=new Wt(C.LEQUAL,Wt.ReadWrite,[0,1]),L=S.getTerrainMesh(),j=S.sourceCache.getRenderableTiles(),G=v.useProgram("terrainDepth");E.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:a.aM.transparent,depth:1});for(let X of j){let re=S.getTerrainData(X.tileID),ae={u_matrix:v.transform.calculatePosMatrix(X.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(v.transform.zoom)};G.draw(E,C.TRIANGLES,D,Sr.disabled,O,mr.backCCW,ae,re,"terrain",L.vertexBuffer,L.indexBuffer,L.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,S){let E=v.context,C=E.gl,O=Jr.unblended,D=new Wt(C.LEQUAL,Wt.ReadWrite,[0,1]),L=S.getTerrainMesh(),j=S.getCoordsTexture(),G=S.sourceCache.getRenderableTiles(),X=v.useProgram("terrainCoords");E.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:a.aM.transparent,depth:1}),S.coordsIndex=[];for(let re of G){let ae=S.getTerrainData(re.tileID);E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,j.texture);let oe={u_matrix:v.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(v.transform.zoom)};X.draw(E,C.TRIANGLES,D,Sr.disabled,O,mr.backCCW,oe,ae,"terrain",L.vertexBuffer,L.indexBuffer,L.segments),S.coordsIndex.push(re.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(i,c,f,d){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(d||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(v,S,E,C,O){if(v.renderPass!=="translucent")return;let D=Sr.disabled,L=v.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(j,G,X,re,ae,oe,le,Q,fe){let ge=G.transform,we=nu(),Me=ae==="map",Fe=oe==="map";for(let Ge of j){let it=re.getTile(Ge),Ve=it.getBucket(X);if(!Ve||!Ve.text||!Ve.text.segments.get().length)continue;let je=a.ag(Ve.textSizeData,ge.zoom),ct=Zt(it,1,G.transform.zoom),Pt=gs(Ge.posMatrix,Fe,Me,G.transform,ct),$e=X.layout.get("icon-text-fit")!=="none"&&Ve.hasIconData();if(je){let Ye=Math.pow(2,ge.zoom-it.tileID.overscaledZ),Tt=G.style.map.terrain?(Bt,Xt)=>G.style.map.terrain.getElevation(Ge,Bt,Xt):null,Pr=we.translatePosition(ge,it,le,Q);ol(Ve,Me,Fe,fe,ge,Pt,Ge.posMatrix,Ye,je,$e,we,Pr,Ge.toUnwrapped(),Tt)}}}(C,v,E,S,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),O),E.paint.get("icon-opacity").constantOr(1)!==0&&km(v,S,E,C,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),D,L),E.paint.get("text-opacity").constantOr(1)!==0&&km(v,S,E,C,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),D,L),S.map.showCollisionBoxes&&($c(v,S,E,C,!0),$c(v,S,E,C,!1))})(i,c,f,d,this.style.placement.variableOffsets);break;case"circle":(function(v,S,E,C){if(v.renderPass!=="translucent")return;let O=E.paint.get("circle-opacity"),D=E.paint.get("circle-stroke-width"),L=E.paint.get("circle-stroke-opacity"),j=!E.layout.get("circle-sort-key").isConstant();if(O.constantOr(1)===0&&(D.constantOr(1)===0||L.constantOr(1)===0))return;let G=v.context,X=G.gl,re=v.depthModeForSublayer(0,Wt.ReadOnly),ae=Sr.disabled,oe=v.colorModeForRenderPass(),le=[];for(let Q=0;Q<C.length;Q++){let fe=C[Q],ge=S.getTile(fe),we=ge.getBucket(E);if(!we)continue;let Me=we.programConfigurations.get(E.id),Fe=v.useProgram("circle",Me),Ge=we.layoutVertexBuffer,it=we.indexBuffer,Ve=v.style.map.terrain&&v.style.map.terrain.getTerrainData(fe),je={programConfiguration:Me,program:Fe,layoutVertexBuffer:Ge,indexBuffer:it,uniformValues:jA(v,fe,ge,E),terrainData:Ve};if(j){let ct=we.segments.get();for(let Pt of ct)le.push({segments:new a.a0([Pt]),sortKey:Pt.sortKey,state:je})}else le.push({segments:we.segments,sortKey:0,state:je})}j&&le.sort((Q,fe)=>Q.sortKey-fe.sortKey);for(let Q of le){let{programConfiguration:fe,program:ge,layoutVertexBuffer:we,indexBuffer:Me,uniformValues:Fe,terrainData:Ge}=Q.state;ge.draw(G,X.TRIANGLES,re,ae,oe,mr.disabled,Fe,Ge,E.id,we,Me,Q.segments,E.paint,v.transform.zoom,fe)}})(i,c,f,d);break;case"heatmap":(function(v,S,E,C){if(E.paint.get("heatmap-opacity")===0)return;let O=v.context;if(v.style.map.terrain){for(let D of C){let L=S.getTile(D);S.hasRenderableParent(D)||(v.renderPass==="offscreen"?Dm(v,L,E,D):v.renderPass==="translucent"&&fu(v,E,D))}O.viewport.set([0,0,v.width,v.height])}else v.renderPass==="offscreen"?function(D,L,j,G){let X=D.context,re=X.gl,ae=Sr.disabled,oe=new Jr([re.ONE,re.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(le,Q,fe){let ge=le.gl;le.activeTexture.set(ge.TEXTURE1),le.viewport.set([0,0,Q.width/4,Q.height/4]);let we=fe.heatmapFbos.get(a.aU);we?(ge.bindTexture(ge.TEXTURE_2D,we.colorAttachment.get()),le.bindFramebuffer.set(we.framebuffer)):(we=Gc(le,Q.width/4,Q.height/4),fe.heatmapFbos.set(a.aU,we))})(X,D,j),X.clear({color:a.aM.transparent});for(let le=0;le<G.length;le++){let Q=G[le];if(L.hasRenderableParent(Q))continue;let fe=L.getTile(Q),ge=fe.getBucket(j);if(!ge)continue;let we=ge.programConfigurations.get(j.id),Me=D.useProgram("heatmap",we),{zoom:Fe}=D.transform;Me.draw(X,re.TRIANGLES,Wt.disabled,ae,oe,mr.disabled,An(Q.posMatrix,fe,Fe,j.paint.get("heatmap-intensity")),null,j.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,j.paint,D.transform.zoom,we)}X.viewport.set([0,0,D.width,D.height])}(v,S,E,C):v.renderPass==="translucent"&&function(D,L){let j=D.context,G=j.gl;j.setColorMode(D.colorModeForRenderPass());let X=L.heatmapFbos.get(a.aU);X&&(j.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,X.colorAttachment.get()),j.activeTexture.set(G.TEXTURE1),Kc(j,L).bind(G.LINEAR,G.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(j,G.TRIANGLES,Wt.disabled,Sr.disabled,D.colorModeForRenderPass(),mr.disabled,yf(D,L,0,1),null,L.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,L.paint,D.transform.zoom))}(v,E)})(i,c,f,d);break;case"line":(function(v,S,E,C){if(v.renderPass!=="translucent")return;let O=E.paint.get("line-opacity"),D=E.paint.get("line-width");if(O.constantOr(1)===0||D.constantOr(1)===0)return;let L=v.depthModeForSublayer(0,Wt.ReadOnly),j=v.colorModeForRenderPass(),G=E.paint.get("line-dasharray"),X=E.paint.get("line-pattern"),re=X.constantOr(1),ae=E.paint.get("line-gradient"),oe=E.getCrossfadeParameters(),le=re?"linePattern":G?"lineSDF":ae?"lineGradient":"line",Q=v.context,fe=Q.gl,ge=!0;for(let we of C){let Me=S.getTile(we);if(re&&!Me.patternsLoaded())continue;let Fe=Me.getBucket(E);if(!Fe)continue;let Ge=Fe.programConfigurations.get(E.id),it=v.context.program.get(),Ve=v.useProgram(le,Ge),je=ge||Ve.program!==it,ct=v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),Pt=X.constantOr(null);if(Pt&&Me.imageAtlas){let Tt=Me.imageAtlas,Pr=Tt.patternPositions[Pt.to.toString()],Bt=Tt.patternPositions[Pt.from.toString()];Pr&&Bt&&Ge.setConstantPatternPositions(Pr,Bt)}let $e=ct?we:null,Ye=re?nl(v,Me,E,oe,$e):G?VA(v,Me,E,G,oe,$e):ae?l0(v,Me,E,Fe.lineClipsArray.length,$e):xf(v,Me,E,$e);if(re)Q.activeTexture.set(fe.TEXTURE0),Me.imageAtlasTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),Ge.updatePaintBuffers(oe);else if(G&&(je||v.lineAtlas.dirty))Q.activeTexture.set(fe.TEXTURE0),v.lineAtlas.bind(Q);else if(ae){let Tt=Fe.gradients[E.id],Pr=Tt.texture;if(E.gradientVersion!==Tt.version){let Bt=256;if(E.stepInterpolant){let Xt=S.getSource().maxzoom,Mr=we.canonical.z===Xt?Math.ceil(1<<v.transform.maxZoom-we.canonical.z):1;Bt=a.ac(a.aV(Fe.maxLineLength/a.X*1024*Mr),256,Q.maxTextureSize)}Tt.gradient=a.aW({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:Bt,image:Tt.gradient||void 0,clips:Fe.lineClipsArray}),Tt.texture?Tt.texture.update(Tt.gradient):Tt.texture=new He(Q,Tt.gradient,fe.RGBA),Tt.version=E.gradientVersion,Pr=Tt.texture}Q.activeTexture.set(fe.TEXTURE0),Pr.bind(E.stepInterpolant?fe.NEAREST:fe.LINEAR,fe.CLAMP_TO_EDGE)}Ve.draw(Q,fe.TRIANGLES,L,v.stencilModeForClipping(we),j,mr.disabled,Ye,ct,E.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,E.paint,v.transform.zoom,Ge,Fe.layoutVertexBuffer2),ge=!1}})(i,c,f,d);break;case"fill":(function(v,S,E,C){let O=E.paint.get("fill-color"),D=E.paint.get("fill-opacity");if(D.constantOr(1)===0)return;let L=v.colorModeForRenderPass(),j=E.paint.get("fill-pattern"),G=v.opaquePassEnabledForLayer()&&!j.constantOr(1)&&O.constantOr(a.aM.transparent).a===1&&D.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===G){let X=v.depthModeForSublayer(1,v.renderPass==="opaque"?Wt.ReadWrite:Wt.ReadOnly);Hc(v,S,E,C,X,L,!1)}if(v.renderPass==="translucent"&&E.paint.get("fill-antialias")){let X=v.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Wt.ReadOnly);Hc(v,S,E,C,X,L,!0)}})(i,c,f,d);break;case"fill-extrusion":(function(v,S,E,C){let O=E.paint.get("fill-extrusion-opacity");if(O!==0&&v.renderPass==="translucent"){let D=new Wt(v.context.gl.LEQUAL,Wt.ReadWrite,v.depthRangeFor3D);if(O!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))Tf(v,S,E,C,D,Sr.disabled,Jr.disabled),Tf(v,S,E,C,D,v.stencilModeFor3D(),v.colorModeForRenderPass());else{let L=v.colorModeForRenderPass();Tf(v,S,E,C,D,Sr.disabled,L)}}})(i,c,f,d);break;case"hillshade":(function(v,S,E,C){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;let O=v.context,D=v.depthModeForSublayer(0,Wt.ReadOnly),L=v.colorModeForRenderPass(),[j,G]=v.renderPass==="translucent"?v.stencilConfigForOverlap(C):[{},C];for(let X of G){let re=S.getTile(X);re.needsHillshadePrepare!==void 0&&re.needsHillshadePrepare&&v.renderPass==="offscreen"?ll(v,re,E,D,Sr.disabled,L):v.renderPass==="translucent"&&ul(v,X,re,E,D,j[X.overscaledZ],L)}O.viewport.set([0,0,v.width,v.height])})(i,c,f,d);break;case"raster":(function(v,S,E,C){if(v.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!C.length)return;let O=v.context,D=O.gl,L=S.getSource(),j=v.useProgram("raster"),G=v.colorModeForRenderPass(),[X,re]=L instanceof ut?[{},C]:v.stencilConfigForOverlap(C),ae=re[re.length-1].overscaledZ,oe=!v.options.moving;for(let le of re){let Q=v.depthModeForSublayer(le.overscaledZ-ae,E.paint.get("raster-opacity")===1?Wt.ReadWrite:Wt.ReadOnly,D.LESS),fe=S.getTile(le);fe.registerFadeDuration(E.paint.get("raster-fade-duration"));let ge=S.findLoadedParent(le,0),we=S.findLoadedSibling(le),Me=A0(fe,ge||we||null,S,E,v.transform,v.style.map.terrain),Fe,Ge,it=E.paint.get("raster-resampling")==="nearest"?D.NEAREST:D.LINEAR;O.activeTexture.set(D.TEXTURE0),fe.texture.bind(it,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),O.activeTexture.set(D.TEXTURE1),ge?(ge.texture.bind(it,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),Fe=Math.pow(2,ge.tileID.overscaledZ-fe.tileID.overscaledZ),Ge=[fe.tileID.canonical.x*Fe%1,fe.tileID.canonical.y*Fe%1]):fe.texture.bind(it,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),fe.texture.useMipmap&&O.extTextureFilterAnisotropic&&v.transform.pitch>20&&D.texParameterf(D.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax);let Ve=v.style.map.terrain&&v.style.map.terrain.getTerrainData(le),je=Ve?le:null,ct=je?je.posMatrix:v.transform.calculatePosMatrix(le.toUnwrapped(),oe),Pt=$A(ct,Ge||[0,0],Fe||1,Me,E);L instanceof ut?j.draw(O,D.TRIANGLES,Q,Sr.disabled,G,mr.disabled,Pt,Ve,E.id,L.boundsBuffer,v.quadTriangleIndexBuffer,L.boundsSegments):j.draw(O,D.TRIANGLES,Q,X[le.overscaledZ],G,mr.disabled,Pt,Ve,E.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(i,c,f,d);break;case"background":(function(v,S,E,C){let O=E.paint.get("background-color"),D=E.paint.get("background-opacity");if(D===0)return;let L=v.context,j=L.gl,G=v.transform,X=G.tileSize,re=E.paint.get("background-pattern");if(v.isPatternMissing(re))return;let ae=!re&&O.a===1&&D===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==ae)return;let oe=Sr.disabled,le=v.depthModeForSublayer(0,ae==="opaque"?Wt.ReadWrite:Wt.ReadOnly),Q=v.colorModeForRenderPass(),fe=v.useProgram(re?"backgroundPattern":"background"),ge=C||G.coveringTiles({tileSize:X,terrain:v.style.map.terrain});re&&(L.activeTexture.set(j.TEXTURE0),v.imageManager.bind(v.context));let we=E.getCrossfadeParameters();for(let Me of ge){let Fe=C?Me.posMatrix:v.transform.calculatePosMatrix(Me.toUnwrapped()),Ge=re?wm(Fe,D,v,re,{tileID:Me,tileSize:X},we):bf(Fe,D,O),it=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Me);fe.draw(L,j.TRIANGLES,le,oe,Q,mr.disabled,Ge,it,E.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(i,0,f,d);break;case"custom":(function(v,S,E){let C=v.context,O=E.implementation;if(v.renderPass==="offscreen"){let D=O.prerender;D&&(v.setCustomLayerDefaults(),C.setColorMode(v.colorModeForRenderPass()),D.call(O,C.gl,v.transform.customLayerMatrix()),C.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),C.setColorMode(v.colorModeForRenderPass()),C.setStencilMode(Sr.disabled);let D=O.renderingMode==="3d"?new Wt(v.context.gl.LEQUAL,Wt.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Wt.ReadOnly);C.setDepthMode(D),O.render(C.gl,v.transform.customLayerMatrix(),{farZ:v.transform.farZ,nearZ:v.transform.nearZ,fov:v.transform._fov,modelViewProjectionMatrix:v.transform.modelViewProjectionMatrix,projectionMatrix:v.transform.projectionMatrix}),C.setDirty(),v.setBaseState(),C.bindFramebuffer.set(null)}})(i,0,f);}}translatePosMatrix(i,c,f,d,v){if(!f[0]&&!f[1])return i;let S=v?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(S){let O=Math.sin(S),D=Math.cos(S);f=[f[0]*D-f[1]*O,f[0]*O+f[1]*D]}let E=[v?f[0]:Zt(c,f[0],this.transform.zoom),v?f[1]:Zt(c,f[1],this.transform.zoom),0],C=new Float32Array(16);return a.J(C,i,E),C}saveTileTexture(i){let c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){let c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;let c=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!c||!f}useProgram(i,c){this.cache=this.cache||{};let f=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new xm(this.context,ys[i],c,Sm[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new He(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class hl{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,f){let d=Math.pow(2,f),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{let C=1/(E=a.af([],E,i))[3]/c*d;return a.b1(E,E,[C,C,1/E[3],C])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{let C=function(j,G){var X=G[0],re=G[1],ae=G[2],oe=X*X+re*re+ae*ae;return oe>0&&(oe=1/Math.sqrt(oe)),j[0]=G[0]*oe,j[1]=G[1]*oe,j[2]=G[2]*oe,j}([],function(j,G,X){var re=G[0],ae=G[1],oe=G[2],le=X[0],Q=X[1],fe=X[2];return j[0]=ae*fe-oe*Q,j[1]=oe*le-re*fe,j[2]=re*Q-ae*le,j}([],Le([],v[E[0]],v[E[1]]),Le([],v[E[2]],v[E[1]]))),O=-((D=C)[0]*(L=v[E[1]])[0]+D[1]*L[1]+D[2]*L[2]);var D,L;return C.concat(O)});return new hl(v,S)}}class fl{constructor(i,c){this.min=i,this.max=c,this.center=function(f,d,v){return f[0]=.5*d[0],f[1]=.5*d[1],f[2]=.5*d[2],f}([],function(f,d,v){return f[0]=d[0]+v[0],f[1]=d[1]+v[1],f[2]=d[2]+v[2],f}([],this.min,this.max))}quadrant(i){let c=[i%2==0,i<2],f=ve(this.min),d=ve(this.max);for(let v=0;v<c.length;v++)f[v]=c[v]?this.min[v]:this.center[v],d[v]=c[v]?this.center[v]:this.max[v];return d[2]=this.max[2],new fl(f,d)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){let c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],f=!0;for(let d=0;d<i.planes.length;d++){let v=i.planes[d],S=0;for(let E=0;E<c.length;E++)a.b2(v,c[E])>=0&&S++;if(S===0)return 0;S!==c.length&&(f=!1)}if(f)return 2;for(let d=0;d<3;d++){let v=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let E=0;E<i.points.length;E++){let C=i.points[E][d]-this.min[d];v=Math.min(v,C),S=Math.max(S,C)}if(S<0||v>this.max[d]-this.min[d])return 0}return 1}}class dl{constructor(i=0,c=0,f=0,d=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=f,this.right=d}interpolate(i,c,f){return c.top!=null&&i.top!=null&&(this.top=a.y.number(i.top,c.top,f)),c.bottom!=null&&i.bottom!=null&&(this.bottom=a.y.number(i.bottom,c.bottom,f)),c.left!=null&&i.left!=null&&(this.left=a.y.number(i.left,c.left,f)),c.right!=null&&i.right!=null&&(this.right=a.y.number(i.right,c.right,f)),this}getCenter(i,c){let f=a.ac((this.left+i-this.right)/2,0,i),d=a.ac((this.top+c-this.bottom)/2,0,c);return new a.P(f,d)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new dl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let Fm=85.051129;class pl{constructor(i,c,f,d,v){this.tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=f==null?0:f,this._maxPitch=d==null?60:d,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new dl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let i=new pl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.lngRange=i.lngRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){let c=-a.b3(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var f=new a.A(4);return a.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,d,v){var S=d[0],E=d[1],C=d[2],O=d[3],D=Math.sin(v),L=Math.cos(v);f[0]=S*L+C*D,f[1]=E*L+O*D,f[2]=S*-D+C*L,f[3]=E*-D+O*L}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){let c=a.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){let c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,f){this._unmodified=!1,this._edgeInsets.interpolate(i,c,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){let c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){let c=[new a.b4(0,i)];if(this._renderWorldCopies){let f=this.pointCoordinate(new a.P(0,0)),d=this.pointCoordinate(new a.P(this.width,0)),v=this.pointCoordinate(new a.P(this.width,this.height)),S=this.pointCoordinate(new a.P(0,this.height)),E=Math.floor(Math.min(f.x,d.x,v.x,S.x)),C=Math.floor(Math.max(f.x,d.x,v.x,S.x)),O=1;for(let D=E-O;D<=C+O;D++)D!==0&&c.push(new a.b4(D,i))}return c}coveringTiles(i){var c,f;let d=this.coveringZoomLevel(i),v=d;if(i.minzoom!==void 0&&d<i.minzoom)return[];i.maxzoom!==void 0&&d>i.maxzoom&&(d=i.maxzoom);let S=this.pointCoordinate(this.getCameraPoint()),E=a.Z.fromLngLat(this.center),C=Math.pow(2,d),O=[C*S.x,C*S.y,0],D=[C*E.x,C*E.y,0],L=hl.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d),j=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(j=d);let G=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,X=Q=>({aabb:new fl([Q*C,0,0],[(Q+1)*C,C,0]),zoom:0,x:0,y:0,wrap:Q,fullyVisible:!1}),re=[],ae=[],oe=d,le=i.reparseOverscaled?v:d;if(this._renderWorldCopies)for(let Q=1;Q<=3;Q++)re.push(X(-Q)),re.push(X(Q));for(re.push(X(0));re.length>0;){let Q=re.pop(),fe=Q.x,ge=Q.y,we=Q.fullyVisible;if(!we){let Ve=Q.aabb.intersects(L);if(Ve===0)continue;we=Ve===2}let Me=i.terrain?O:D,Fe=Q.aabb.distanceX(Me),Ge=Q.aabb.distanceY(Me),it=Math.max(Math.abs(Fe),Math.abs(Ge));if(Q.zoom===oe||it>G+(1<<oe-Q.zoom)-2&&Q.zoom>=j){let Ve=oe-Q.zoom,je=O[0]-.5-(fe<<Ve),ct=O[1]-.5-(ge<<Ve);ae.push({tileID:new a.S(Q.zoom===oe?le:Q.zoom,Q.wrap,Q.zoom,fe,ge),distanceSq:Oe([D[0]-.5-fe,D[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(je*je+ct*ct)})}else for(let Ve=0;Ve<4;Ve++){let je=(fe<<1)+Ve%2,ct=(ge<<1)+(Ve>>1),Pt=Q.zoom+1,$e=Q.aabb.quadrant(Ve);if(i.terrain){let Ye=new a.S(Pt,Q.wrap,Pt,je,ct),Tt=i.terrain.getMinMaxElevation(Ye),Pr=(c=Tt.minElevation)!==null&&c!==void 0?c:this.elevation,Bt=(f=Tt.maxElevation)!==null&&f!==void 0?f:this.elevation;$e=new fl([$e.min[0],$e.min[1],Pr],[$e.max[0],$e.max[1],Bt])}re.push({aabb:$e,zoom:Pt,x:je,y:ct,wrap:Q.wrap,fullyVisible:we})}}return ae.sort((Q,fe)=>Q.distanceSq-fe.distanceSq).map(Q=>Q.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){let c=a.ac(i.lat,-85.051129,Fm);return new a.P(a.O(i.lng)*this.worldSize,a.Q(c)*this.worldSize)}unproject(i){return new a.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){let c=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,i),v=i.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-v))return;let S=f+c-v,E=Math.cos(this._pitch)*this.cameraToCenterDistance/S/a.b5(1,d.lat),C=this.scaleZoom(E/this.tileSize);this._elevation=v,this._center=d,this.zoom=C}setLocationAtPoint(i,c){let f=this.pointCoordinate(c),d=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(i),S=new a.Z(v.x-(f.x-d.x),v.y-(f.y-d.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return a.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){let j=c.pointCoordinate(i);if(j!=null)return j}let f=[i.x,i.y,0,1],d=[i.x,i.y,1,1];a.af(f,f,this.pixelMatrixInverse),a.af(d,d,this.pixelMatrixInverse);let v=f[3],S=d[3],E=f[1]/v,C=d[1]/S,O=f[2]/v,D=d[2]/S,L=O===D?0:(0-O)/(D-O);return new a.Z(a.y.number(f[0]/v,d[0]/S,L)/this.worldSize,a.y.number(E,C,L)/this.worldSize)}coordinatePoint(i,c=0,f=this.pixelMatrix){let d=[i.x*this.worldSize,i.y*this.worldSize,c,1];return a.af(d,d,f),new a.P(d[0]/d[3],d[1]/d[3])}getBounds(){let i=Math.max(0,this.height/2-this.getHorizon());return new Ae().extend(this.pointLocation(new a.P(0,i))).extend(this.pointLocation(new a.P(this.width,i))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ae([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Fm])}calculateTileMatrix(i){let c=i.canonical,f=this.worldSize/this.zoomScale(c.z),d=c.x+Math.pow(2,c.z)*i.wrap,v=a.an(new Float64Array(16));return a.J(v,v,[d*f,c.y*f,0]),a.K(v,v,[f/a.X,f/a.X,1]),v}calculatePosMatrix(i,c=!1){let f=i.key,d=c?this._alignedPosMatrixCache:this._posMatrixCache;if(d[f])return d[f];let v=this.calculateTileMatrix(i);return a.L(v,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,v),d[f]=new Float32Array(v),d[f]}calculateFogMatrix(i){let c=i.key,f=this._fogMatrixCache;if(f[c])return f[c];let d=this.calculateTileMatrix(i);return a.L(d,this.fogMatrix,d),f[c]=new Float32Array(d),f[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,c){c=a.ac(+c,this.minZoom,this.maxZoom);let f={center:new a.N(i.lng,i.lat),zoom:c},d=this.lngRange;if(!this._renderWorldCopies&&d===null){let Q=179.9999999999;d=[-Q,Q]}let v=this.tileSize*this.zoomScale(f.zoom),S=0,E=v,C=0,O=v,D=0,L=0,{x:j,y:G}=this.size;if(this.latRange){let Q=this.latRange;S=a.Q(Q[1])*v,E=a.Q(Q[0])*v,E-S<G&&(D=G/(E-S))}d&&(C=a.b3(a.O(d[0])*v,0,v),O=a.b3(a.O(d[1])*v,0,v),O<C&&(O+=v),O-C<j&&(L=j/(O-C)));let{x:X,y:re}=this.project.call({worldSize:v},i),ae,oe,le=Math.max(L||0,D||0);if(le){let Q=new a.P(L?(O+C)/2:X,D?(E+S)/2:re);return f.center=this.unproject.call({worldSize:v},Q).wrap(),f.zoom+=this.scaleZoom(le),f}if(this.latRange){let Q=G/2;re-Q<S&&(oe=S+Q),re+Q>E&&(oe=E-Q)}if(d){let Q=(C+O)/2,fe=X;this._renderWorldCopies&&(fe=a.b3(X,Q-v/2,Q+v/2));let ge=j/2;fe-ge<C&&(ae=C+ge),fe+ge>O&&(ae=O-ge)}if(ae!==void 0||oe!==void 0){let Q=new a.P(ae!=null?ae:X,oe!=null?oe:re);f.center=this.unproject.call({worldSize:v},Q).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i=this._unmodified,{center:c,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=f,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;let i=this.centerOffset,c=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let d=a.an(new Float64Array(16));a.K(d,d,[this.width/2,-this.height/2,1]),a.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=a.an(new Float64Array(16)),a.K(d,d,[1,-1,1]),a.J(d,d,[-1,-1,0]),a.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;let v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),E=v-S*this._pixelPerMeter/Math.cos(this._pitch),C=S<0?E:v,O=Math.PI/2+this._pitch,D=this._fov*(.5+i.y/this.height),L=Math.sin(D)*C/Math.sin(a.ac(Math.PI-O-D,.01,Math.PI-.01)),j=this.getHorizon(),G=2*Math.atan(j/this.cameraToCenterDistance)*(.5+i.y/(2*j)),X=Math.sin(G)*C/Math.sin(a.ac(Math.PI-O-G,.01,Math.PI-.01)),re=Math.min(L,X);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*re+C),this.nearZ=this.height/50,d=new Float64Array(16),a.b6(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-i.x/this.width,d[9]=2*i.y/this.height,this.projectionMatrix=a.ae(d),a.K(d,d,[1,-1,1]),a.J(d,d,[0,0,-this.cameraToCenterDistance]),a.b7(d,d,this._pitch),a.ad(d,d,this.angle),a.J(d,d,[-c,-f,0]),this.mercatorMatrix=a.K([],d,[this.worldSize,this.worldSize,this.worldSize]),a.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,d),a.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=a.as([],d),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,v,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-c,-f,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,d);let ae=this.width%2/2,oe=this.height%2/2,le=Math.cos(this.angle),Q=Math.sin(this.angle),fe=c-Math.round(c)+le*ae+Q*oe,ge=f-Math.round(f)+le*oe+Q*ae,we=new Float64Array(d);if(a.J(we,we,[fe>.5?fe-1:fe,ge>.5?ge-1:ge,0]),this.alignedModelViewProjectionMatrix=we,d=a.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let i=this.pointCoordinate(new a.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return a.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,i))}getCameraQueryGeometry(i){let c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let f=c.x,d=c.y,v=c.x,S=c.y;for(let E of i)f=Math.min(f,E.x),d=Math.min(d,E.y),v=Math.max(v,E.x),S=Math.max(S,E.y);return[new a.P(f,d),new a.P(v,d),new a.P(v,S),new a.P(f,S),new a.P(f,d)]}}lngLatToCameraDepth(i,c){let f=this.locationCoordinate(i),d=[f.x*this.worldSize,f.y*this.worldSize,c,1];return a.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function Zc(g,i){let c,f=!1,d=null,v=null,S=()=>{d=null,f&&(g.apply(v,c),d=setTimeout(S,i),f=!1)};return(...E)=>(f=!0,v=this,c=E,d||S(),d)}class Of{constructor(i){this._getCurrentHash=()=>{let c=window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(f=d)}),(f&&f[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{let c=this._getCurrentHash();if(c.length>=3&&!c.some(f=>isNaN(f))){let f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{let c=this._getCurrentHash();if(c.length===0)return;let f=c.join("/"),d=f;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${f}`);let v=window.location.hash.replace(d,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let S=window.location.href.replace(/(#.+)?$/,v);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Zc(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){let c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,d=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,d),S=Math.round(c.lng*v)/v,E=Math.round(c.lat*v)/v,C=this._map.getBearing(),O=this._map.getPitch(),D="";if(D+=i?`/${S}/${E}/${f}`:`${f}/${E}/${S}`,(C||O)&&(D+="/"+Math.round(10*C)/10),O&&(D+=`/${Math.round(O)}`),this._hashName){let L=this._hashName,j=!1,G=window.location.hash.slice(1).split("&").map(X=>{let re=X.split("=")[0];return re===L?(j=!0,`${re}=${D}`):X}).filter(X=>X);return j||G.push(`${L}=${D}`),`#${G.join("&")}`}return`#${D}`}}let kf={linearity:.3,easing:a.b8(0,0,.3,1)},zm=a.e({deceleration:2500,maxSpeed:1400},kf),iE=a.e({deceleration:20,maxSpeed:1400},kf),P0=a.e({deceleration:1e3,maxSpeed:360},kf),Rf=a.e({deceleration:1e3,maxSpeed:90},kf);class Nm{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:T.now(),settings:i})}_drainInertiaBuffer(){let i=this._inertiaBuffer,c=T.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let c={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:v}of this._inertiaBuffer)c.zoom+=v.zoomDelta||0,c.bearing+=v.bearingDelta||0,c.pitch+=v.pitchDelta||0,v.panDelta&&c.pan._add(v.panDelta),v.around&&(c.around=v.around),v.pinchAround&&(c.pinchAround=v.pinchAround);let f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(c.pan.mag()){let v=Jc(c.pan.mag(),f,a.e({},zm,i||{}));d.offset=c.pan.mult(v.amount/c.pan.mag()),d.center=this._map.transform.center,Xc(d,v)}if(c.zoom){let v=Jc(c.zoom,f,iE);d.zoom=this._map.transform.zoom+v.amount,Xc(d,v)}if(c.bearing){let v=Jc(c.bearing,f,P0);d.bearing=this._map.transform.bearing+a.ac(v.amount,-179,179),Xc(d,v)}if(c.pitch){let v=Jc(c.pitch,f,Rf);d.pitch=this._map.transform.pitch+v.amount,Xc(d,v)}if(d.zoom||d.bearing){let v=c.pinchAround===void 0?c.around:c.pinchAround;d.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),a.e(d,{noMoveStart:!0})}}function Xc(g,i){(!g.duration||g.duration<i.duration)&&(g.duration=i.duration,g.easing=i.easing)}function Jc(g,i,c){let{maxSpeed:f,linearity:d,deceleration:v}=c,S=a.ac(g*d/(i/1e3),-f,f),E=Math.abs(S)/(v*d);return{easing:c.easing,duration:1e3*E,amount:S*(E/2)}}class Ni extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f,d={}){let v=I.mousePos(c.getCanvas(),f),S=c.unproject(v);super(i,a.e({point:v,lngLat:S,originalEvent:f},d)),this._defaultPrevented=!1,this.target=c}}class du extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){let d=i==="touchend"?f.changedTouches:f.touches,v=I.touchPos(c.getCanvasContainer(),d),S=v.map(C=>c.unproject(C)),E=v.reduce((C,O,D,L)=>C.add(O.div(L.length)),new a.P(0,0));super(i,{points:v,point:E,lngLats:S,lngLat:c.unproject(E),originalEvent:f}),this._defaultPrevented=!1}}class M0 extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class O0{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new M0(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new Ni(i.type,this._map,i))}mouseup(i){this._map.fire(new Ni(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ni(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Ni(i.type,this._map,i))}mouseover(i){this._map.fire(new Ni(i.type,this._map,i))}mouseout(i){this._map.fire(new Ni(i.type,this._map,i))}touchstart(i){return this._firePreventable(new du(i.type,this._map,i))}touchmove(i){this._map.fire(new du(i.type,this._map,i))}touchend(i){this._map.fire(new du(i.type,this._map,i))}touchcancel(i){this._map.fire(new du(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yr{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Ni(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ni("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Ni(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $a{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(a.P.convert(i),this._map.terrain)}}class Kn{constructor(i,c){this._map=i,this._tr=new $a(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(I.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;let f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;let d=this._startPos;this._lastPos=f,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));let v=Math.min(d.x,f.x),S=Math.max(d.x,f.x),E=Math.min(d.y,f.y),C=Math.max(d.y,f.y);I.setTransform(this._box,`translate(${v}px,${E}px)`),this._box.style.width=S-v+"px",this._box.style.height=C-E+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;let f=this._startPos,d=c;if(this.reset(),I.suppressClick(),f.x!==d.x||f.y!==d.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(f,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new a.k(i,{originalEvent:c}))}}function Yc(g,i){if(g.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${i.length}`);let c={};for(let f=0;f<g.length;f++)c[g[f].identifier]=i[f];return c}class Bm{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(d){let v=new a.P(0,0);for(let S of d)v._add(S);return v.div(d.length)}(c),this.touches=Yc(f,c)))}touchmove(i,c,f){if(this.aborted||!this.centroid)return;let d=Yc(f,c);for(let v in this.touches){let S=d[v];(!S||S.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(i,c,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){let d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Df{constructor(i){this.singleTap=new Bm(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,f){this.singleTap.touchstart(i,c,f)}touchmove(i,c,f){this.singleTap.touchmove(i,c,f)}touchend(i,c,f){let d=this.singleTap.touchend(i,c,f);if(d){let v=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(d)<30;if(v&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class ml{constructor(i){this._tr=new $a(i),this._zoomIn=new Df({numTouches:1,numTaps:2}),this._zoomOut=new Df({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,f){this._zoomIn.touchstart(i,c,f),this._zoomOut.touchstart(i,c,f)}touchmove(i,c,f){this._zoomIn.touchmove(i,c,f),this._zoomOut.touchmove(i,c,f)}touchend(i,c,f){let d=this._zoomIn.touchend(i,c,f),v=this._zoomOut.touchend(i,c,f),S=this._tr;return d?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(d)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ho{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){let c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;let f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);let d=c.length?c[0]:c;return!this._moved&&d.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(f,d))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&I.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Um={0:1,2:2};class Lf{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){let c=I.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,f){let d=Um[f];return c.buttons===void 0||(c.buttons&d)!==d}(i,this._eventButton)}isValidEndEvent(i){return I.mouseButton(i)===this._eventButton}}class jm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}let Ff=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=i=>{i.preventDefault()}},Vm=({enable:g,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{let f=new Lf({checkCorrectEvent:d=>I.mouseButton(d)===0&&d.ctrlKey||I.mouseButton(d)===2});return new Ho({clickTolerance:i,move:(d,v)=>({bearingDelta:(v.x-d.x)*c}),moveStateManager:f,enable:g,assignEvents:Ff})},$m=({enable:g,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{let f=new Lf({checkCorrectEvent:d=>I.mouseButton(d)===0&&d.ctrlKey||I.mouseButton(d)===2});return new Ho({clickTolerance:i,move:(d,v)=>({pitchDelta:(v.y-d.y)*c}),moveStateManager:f,enable:g,assignEvents:Ff})};class pu{constructor(i,c){this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,c,f){return this._calculateTransform(i,c,f)}touchmove(i,c,f){if(this._active){if(!this._shouldBePrevented(f.length))return i.preventDefault(),this._calculateTransform(i,c,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,c,f){this._calculateTransform(i,c,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,f){f.length>0&&(this._active=!0);let d=Yc(f,c),v=new a.P(0,0),S=new a.P(0,0),E=0;for(let O in d){let D=d[O],L=this._touches[O];L&&(v._add(D),S._add(D.sub(L)),E++,d[O]=D)}if(this._touches=d,this._shouldBePrevented(E)||!S.mag())return;let C=S.div(E);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(E),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zf{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,f){if(!this._firstTwoTouches)return;i.preventDefault();let[d,v]=this._firstTwoTouches,S=Qc(f,c,d),E=Qc(f,c,v);if(!S||!E)return;let C=this._aroundCenter?null:S.add(E).div(2);return this._move([S,E],C,i)}touchend(i,c,f){if(!this._firstTwoTouches)return;let[d,v]=this._firstTwoTouches,S=Qc(f,c,d),E=Qc(f,c,v);S&&E||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Qc(g,i,c){for(let f=0;f<g.length;f++)if(g[f].identifier===c)return i[f]}function Wm(g,i){return Math.log(g/i)/Math.LN2}class Gm extends zf{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){let f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Wm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wm(this._distance,f),pinchAround:c}}}function Km(g,i){return 180*g.angleWith(i)/Math.PI}class Hm extends zf{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c,f){let d=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Km(this._vector,d),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());let c=25/(Math.PI*this._minDiameter)*360,f=Km(i,this._startVector);return Math.abs(f)<c}}function Nf(g){return Math.abs(g.y)>Math.abs(g.x)}class vl extends zf{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,f){super.touchstart(i,c,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,Nf(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let d=i[0].sub(this._lastPoints[0]),v=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,v,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(d.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,f){if(this._valid!==void 0)return this._valid;let d=i.mag()>=2,v=c.mag()>=2;if(!d&&!v)return;if(!d||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;let S=i.y>0==c.y>0;return Nf(i)&&Nf(c)&&S}}let k0={panStep:100,bearingStep:15,pitchStep:10};class ca{constructor(i){this._tr=new $a(i);let c=k0;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,f=0,d=0,v=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?d=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?d=-1:(i.preventDefault(),S=1);break;default:return;}return this._rotationDisabled&&(f=0,d=0),{cameraAnimation:E=>{let C=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:fo,zoom:c?Math.round(C.zoom)+c*(i.shiftKey?2:1):C.zoom,bearing:C.bearing+f*this._bearingStep,pitch:C.pitch+d*this._pitchStep,offset:[-v*this._panStep,-S*this._panStep],center:C.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fo(g){return g*(2-g)}let Zm=4.000244140625;class Wa{constructor(i,c){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new $a(i),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,f=T.now(),d=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%Zm==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(d*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let c=I.mousePos(this._map.getCanvas(),i),f=this._tr;this._around=c.y>f.transform.height/2-f.transform.getHorizon()?a.N.convert(this._aroundCenter?f.center:f.unproject(c)):a.N.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let i=this._tr.transform;if(this._delta!==0){let C=this._type==="wheel"&&Math.abs(this._delta)>Zm?this._wheelZoomRate:this._defaultZoomRate,O=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&O!==0&&(O=1/O);let D=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(D*O))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,d=this._easing,v,S=!1,E=T.now()-this._lastWheelEventTime;if(this._type==="wheel"&&f&&d&&E){let C=Math.min(E/200,1),O=d(C);v=a.y.number(f,c,O),C<1?this._frameId||(this._frameId=!0):S=!0}else v=c,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:v-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=a.b9;if(this._prevEase){let f=this._prevEase,d=(T.now()-f.start)/f.duration,v=f.easing(d+.01)-f.easing(d),S=.27/Math.sqrt(v*v+1e-4)*.01,E=Math.sqrt(.0729-S*S);c=a.b8(S,E,.25,1)}return this._prevEase={start:T.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class mu{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class nE{constructor(i){this._tr=new $a(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class aE{constructor(){this._tap=new Df({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,f){if(!this._swipePoint)if(this._tapTime){let d=c[0],v=i.timeStamp-this._tapTime<500,S=this._tapPoint.dist(d)<30;v&&S?f.length>0&&(this._swipePoint=d,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,c,f)}touchmove(i,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;let d=c[0],v=d.y-this._swipePoint.y;return this._swipePoint=d,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,c,f)}touchend(i,c,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{let d=this._tap.touchend(i,c,f);d&&(this._tapTime=i.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class R0{constructor(i,c,f){this._el=i,this._mousePan=c,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class D0{constructor(i,c,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Xm{constructor(i,c,f,d){this._el=i,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class gl{constructor(i,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",i);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=c,this._container.appendChild(d);let v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=f,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,c){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:i,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let ha=g=>g.zoom||g.drag||g.pitch||g.rotate;class ot extends a.k{}function Bf(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Jm{constructor(i,c){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,v)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let S=d.type==="renderFrame"?void 0:d,E={needsRenderFrame:!1},C={},O={},D=d.touches,L=D?this._getMapTouches(D):void 0,j=L?I.touchPos(this._map.getCanvas(),L):I.mousePos(this._map.getCanvas(),d);for(let{handlerName:re,handler:ae,allowed:oe}of this._handlers){if(!ae.isEnabled())continue;let le;this._blockedByActive(O,oe,re)?ae.reset():ae[v||d.type]&&(le=ae[v||d.type](d,j,L),this.mergeHandlerResult(E,C,le,re,S),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||ae.isActive())&&(O[re]=ae)}let G={};for(let re in this._previousActiveHandlers)O[re]||(G[re]=S);this._previousActiveHandlers=O,(Object.keys(G).length||Bf(E))&&(this._changes.push([E,C,G]),this._triggerRenderFrame()),(Object.keys(O).length||Bf(E))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:X}=E;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Nm(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);let f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(let[d,v,S]of this._listeners)I.addEventListener(d,v,d===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(let[i,c,f]of this._listeners)I.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){let c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new O0(c,i));let d=c.boxZoom=new Kn(c,i);this._add("boxZoom",d),i.interactive&&i.boxZoom&&d.enable();let v=c.cooperativeGestures=new gl(c,i.cooperativeGestures);this._add("cooperativeGestures",v),i.cooperativeGestures&&v.enable();let S=new ml(c),E=new nE(c);c.doubleClickZoom=new mu(E,S),this._add("tapZoom",S),this._add("clickZoom",E),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();let C=new aE;this._add("tapDragZoom",C);let O=c.touchPitch=new vl(c);this._add("touchPitch",O),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);let D=Vm(i),L=$m(i);c.dragRotate=new D0(i,D,L),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();let j=(({enable:le,clickTolerance:Q})=>{let fe=new Lf({checkCorrectEvent:ge=>I.mouseButton(ge)===0&&!ge.ctrlKey});return new Ho({clickTolerance:Q,move:(ge,we)=>({around:we,panDelta:we.sub(ge)}),activateOnStart:!0,moveStateManager:fe,enable:le,assignEvents:Ff})})(i),G=new pu(i,c);c.dragPan=new R0(f,j,G),this._add("mousePan",j),this._add("touchPan",G,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);let X=new Hm,re=new Gm;c.touchZoomRotate=new Xm(f,re,X,C),this._add("touchRotate",X,["touchPan","touchZoom"]),this._add("touchZoom",re,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);let ae=c.scrollZoom=new Wa(c,()=>this._triggerRenderFrame());this._add("scrollZoom",ae,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);let oe=c.keyboard=new ca(c);this._add("keyboard",oe),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Yr(c))}_add(i,c,f){this._handlers.push({handlerName:i,handler:c,allowed:f}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(let{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(let{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ha(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,f){for(let d in i)if(d!==f&&(!c||c.indexOf(d)<0))return!0;return!1}_getMapTouches(i){let c=[];for(let f of i)this._el.contains(f.target)&&c.push(f);return c}mergeHandlerResult(i,c,f,d,v){if(!f)return;a.e(i,f);let S={handlerName:d,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(c.zoom=S),f.panDelta!==void 0&&(c.drag=S),f.pitchDelta!==void 0&&(c.pitch=S),f.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){let i={},c={},f={};for(let[d,v,S]of this._changes)d.panDelta&&(i.panDelta=(i.panDelta||new a.P(0,0))._add(d.panDelta)),d.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(i.around=d.around),d.pinchAround!==void 0&&(i.pinchAround=d.pinchAround),d.noInertia&&(i.noInertia=d.noInertia),a.e(c,v),a.e(f,S);this._updateMapTransform(i,c,f),this._changes=[]}_updateMapTransform(i,c,f){let d=this._map,v=d._getTransformForUpdate(),S=d.terrain;if(!(Bf(i)||S&&this._terrainMovement))return this._fireEvents(c,f,!0);let{panDelta:E,zoomDelta:C,bearingDelta:O,pitchDelta:D,around:L,pinchAround:j}=i;j!==void 0&&(L=j),d._stop(!0),L=L||d.transform.centerPoint;let G=v.pointLocation(E?L.sub(E):L);O&&(v.bearing+=O),D&&(v.pitch+=D),C&&(v.zoom+=C),S?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(E)):v.setLocationAtPoint(G,L):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(G,L)):v.setLocationAtPoint(G,L),d._applyUpdatedTransform(v),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,f,!0)}_fireEvents(i,c,f){let d=ha(this._eventsInProgress),v=ha(i),S={};for(let L in i){let{originalEvent:j}=i[L];this._eventsInProgress[L]||(S[`${L}start`]=j),this._eventsInProgress[L]=i[L]}!d&&v&&this._fireEvent("movestart",v.originalEvent);for(let L in S)this._fireEvent(L,S[L]);v&&this._fireEvent("move",v.originalEvent);for(let L in i){let{originalEvent:j}=i[L];this._fireEvent(L,j)}let E={},C;for(let L in this._eventsInProgress){let{handlerName:j,originalEvent:G}=this._eventsInProgress[L];this._handlersById[j].isActive()||(delete this._eventsInProgress[L],C=c[j]||G,E[`${L}end`]=C)}for(let L in E)this._fireEvent(L,E[L]);let O=ha(this._eventsInProgress),D=(d||v)&&!O;if(D&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let L=this._map._getTransformForUpdate();L.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(L)}if(f&&D){this._updatingCamera=!0;let L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!L||!L.essential&&T.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:C})),j(this._map.getBearing())&&this._map.resetNorth()):(j(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:C})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new a.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new ot("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class L0 extends a.E{constructor(i,c){super(),this._renderFrameCallback=()=>{let f=Math.min((T.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,f){return i=a.P.convert(i).mult(-1),this.panTo(this.transform.center,a.e({offset:i},c),f)}panTo(i,c,f){return this.easeTo(a.e({center:i},c),f)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,f){return this.easeTo(a.e({zoom:i},c),f)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,f){return this.easeTo(a.e({bearing:i},c),f)}resetNorth(i,c){return this.rotateTo(0,a.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Ae.convert(i).adjustAntiMeridian();let f=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,c)}_cameraForBoxAndBearing(i,c,f,d){let v={top:0,bottom:0,right:0,left:0};if(typeof(d=a.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){let Ve=d.padding;d.padding={top:Ve,bottom:Ve,right:Ve,left:Ve}}d.padding=a.e(v,d.padding);let S=this.transform,E=S.padding,C=new Ae(i,c),O=S.project(C.getNorthWest()),D=S.project(C.getNorthEast()),L=S.project(C.getSouthEast()),j=S.project(C.getSouthWest()),G=a.ba(-f),X=O.rotate(G),re=D.rotate(G),ae=L.rotate(G),oe=j.rotate(G),le=new a.P(Math.max(X.x,re.x,oe.x,ae.x),Math.max(X.y,re.y,oe.y,ae.y)),Q=new a.P(Math.min(X.x,re.x,oe.x,ae.x),Math.min(X.y,re.y,oe.y,ae.y)),fe=le.sub(Q),ge=(S.width-(E.left+E.right+d.padding.left+d.padding.right))/fe.x,we=(S.height-(E.top+E.bottom+d.padding.top+d.padding.bottom))/fe.y;if(we<0||ge<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Me=Math.min(S.scaleZoom(S.scale*Math.min(ge,we)),d.maxZoom),Fe=a.P.convert(d.offset),Ge=new a.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(a.ba(f)),it=Fe.add(Ge).mult(S.scale/S.zoomScale(Me));return{center:S.unproject(O.add(L).div(2).sub(it)),zoom:Me,bearing:f}}fitBounds(i,c,f){return this._fitInternal(this.cameraForBounds(i,c),c,f)}fitScreenCoordinates(i,c,f,d,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(i)),this.transform.pointLocation(a.P.convert(c)),f,d),d,v)}_fitInternal(i,c,f){return i?(delete(c=a.e(i,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(i,c){this.stop();let f=this._getTransformForUpdate(),d=!1,v=!1,S=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(d=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=a.N.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(v=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(S=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new a.k("movestart",c)).fire(new a.k("move",c)),d&&this.fire(new a.k("zoomstart",c)).fire(new a.k("zoom",c)).fire(new a.k("zoomend",c)),v&&this.fire(new a.k("rotatestart",c)).fire(new a.k("rotate",c)).fire(new a.k("rotateend",c)),S&&this.fire(new a.k("pitchstart",c)).fire(new a.k("pitch",c)).fire(new a.k("pitchend",c)),this.fire(new a.k("moveend",c))}calculateCameraOptionsFromTo(i,c,f,d=0){let v=a.Z.fromLngLat(i,c),S=a.Z.fromLngLat(f,d),E=S.x-v.x,C=S.y-v.y,O=S.z-v.z,D=Math.hypot(E,C,O);if(D===0)throw new Error("Can't calculate camera options with same From and To");let L=Math.hypot(E,C),j=this.transform.scaleZoom(this.transform.cameraToCenterDistance/D/this.transform.tileSize),G=180*Math.atan2(E,-C)/Math.PI,X=180*Math.acos(L/D)/Math.PI;return X=O<0?90-X:90+X,{center:S.toLngLat(),zoom:j,pitch:X,bearing:G}}easeTo(i,c){var f;this._stop(!1,i.easeId),((i=a.e({offset:[0,0],duration:500,easing:a.b9},i)).animate===!1||!i.essential&&T.prefersReducedMotion)&&(i.duration=0);let d=this._getTransformForUpdate(),v=d.zoom,S=d.bearing,E=d.pitch,C=d.padding,O="bearing"in i?this._normalizeBearing(i.bearing,S):S,D="pitch"in i?+i.pitch:E,L="padding"in i?i.padding:d.padding,j=a.P.convert(i.offset),G=d.centerPoint.add(j),X=d.pointLocation(G),{center:re,zoom:ae}=d.getConstrained(a.N.convert(i.center||X),(f=i.zoom)!==null&&f!==void 0?f:v);this._normalizeCenter(re,d);let oe=d.project(X),le=d.project(re).sub(oe),Q=d.zoomScale(ae-v),fe,ge;i.around&&(fe=a.N.convert(i.around),ge=d.locationPoint(fe));let we={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ae!==v,this._rotating=this._rotating||S!==O,this._pitching=this._pitching||D!==E,this._padding=!d.isPaddingEqual(L),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,we),this.terrain&&this._prepareElevation(re),this._ease(Me=>{if(this._zooming&&(d.zoom=a.y.number(v,ae,Me)),this._rotating&&(d.bearing=a.y.number(S,O,Me)),this._pitching&&(d.pitch=a.y.number(E,D,Me)),this._padding&&(d.interpolatePadding(C,L,Me),G=d.centerPoint.add(j)),this.terrain&&!i.freezeElevation&&this._updateElevation(Me),fe)d.setLocationAtPoint(fe,ge);else{let Fe=d.zoomScale(d.zoom-v),Ge=ae>v?Math.min(2,Q):Math.max(.5,Q),it=Math.pow(Ge,1-Me),Ve=d.unproject(oe.add(le.mult(Me*it)).mult(Fe));d.setLocationAtPoint(d.renderWorldCopies?Ve.wrap():Ve,G)}this._applyUpdatedTransform(d),this._fireMoveEvents(c)},Me=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Me)},i),this}_prepareEase(i,c,f={}){this._moving=!0,c||f.moving||this.fire(new a.k("movestart",i)),this._zooming&&!f.zooming&&this.fire(new a.k("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new a.k("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new a.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){let f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(c-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){let c=i.getCameraPosition(),f=this.terrain.getElevationForLngLatZoom(c.lngLat,i.zoom);if(c.altitude<f){let d=this.calculateCameraOptionsFromTo(c.lngLat,f,i.center,i.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(i){let c=[];if(this.terrain&&c.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&c.push(d=>this.transformCameraUpdate(d)),!c.length)return;let f=i.clone();for(let d of c){let v=f.clone(),{center:S,zoom:E,pitch:C,bearing:O,elevation:D}=d(v);S&&(v.center=S),E!==void 0&&(v.zoom=E),C!==void 0&&(v.pitch=C),O!==void 0&&(v.bearing=O),D!==void 0&&(v.elevation=D),f.apply(v)}this.transform.apply(f)}_fireMoveEvents(i){this.fire(new a.k("move",i)),this._zooming&&this.fire(new a.k("zoom",i)),this._rotating&&this.fire(new a.k("rotate",i)),this._pitching&&this.fire(new a.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;let f=this._zooming,d=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new a.k("zoomend",i)),d&&this.fire(new a.k("rotateend",i)),v&&this.fire(new a.k("pitchend",i)),this.fire(new a.k("moveend",i))}flyTo(i,c){var f;if(!i.essential&&T.prefersReducedMotion){let Ye=a.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ye,c)}this.stop(),i=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},i);let d=this._getTransformForUpdate(),v=d.zoom,S=d.bearing,E=d.pitch,C=d.padding,O="bearing"in i?this._normalizeBearing(i.bearing,S):S,D="pitch"in i?+i.pitch:E,L="padding"in i?i.padding:d.padding,j=a.P.convert(i.offset),G=d.centerPoint.add(j),X=d.pointLocation(G),{center:re,zoom:ae}=d.getConstrained(a.N.convert(i.center||X),(f=i.zoom)!==null&&f!==void 0?f:v);this._normalizeCenter(re,d);let oe=d.zoomScale(ae-v),le=d.project(X),Q=d.project(re).sub(le),fe=i.curve,ge=Math.max(d.width,d.height),we=ge/oe,Me=Q.mag();if("minZoom"in i){let Ye=a.ac(Math.min(i.minZoom,v,ae),d.minZoom,d.maxZoom),Tt=ge/d.zoomScale(Ye-v);fe=Math.sqrt(Tt/Me*2)}let Fe=fe*fe;function Ge(Ye){let Tt=(we*we-ge*ge+(Ye?-1:1)*Fe*Fe*Me*Me)/(2*(Ye?we:ge)*Fe*Me);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function it(Ye){return(Math.exp(Ye)-Math.exp(-Ye))/2}function Ve(Ye){return(Math.exp(Ye)+Math.exp(-Ye))/2}let je=Ge(!1),ct=function(Ye){return Ve(je)/Ve(je+fe*Ye)},Pt=function(Ye){return ge*((Ve(je)*(it(Tt=je+fe*Ye)/Ve(Tt))-it(je))/Fe)/Me;var Tt},$e=(Ge(!0)-je)/fe;if(Math.abs(Me)<1e-6||!isFinite($e)){if(Math.abs(ge-we)<1e-6)return this.easeTo(i,c);let Ye=we<ge?-1:1;$e=Math.abs(Math.log(we/ge))/fe,Pt=()=>0,ct=Tt=>Math.exp(Ye*fe*Tt)}return i.duration="duration"in i?+i.duration:1e3*$e/("screenSpeed"in i?+i.screenSpeed/fe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==O,this._pitching=D!==E,this._padding=!d.isPaddingEqual(L),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(re),this._ease(Ye=>{let Tt=Ye*$e,Pr=1/ct(Tt);d.zoom=Ye===1?ae:v+d.scaleZoom(Pr),this._rotating&&(d.bearing=a.y.number(S,O,Ye)),this._pitching&&(d.pitch=a.y.number(E,D,Ye)),this._padding&&(d.interpolatePadding(C,L,Ye),G=d.centerPoint.add(j)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ye);let Bt=Ye===1?re:d.unproject(le.add(Q.mult(Pt(Tt))).mult(Pr));d.setLocationAtPoint(d.renderWorldCopies?Bt.wrap():Bt,G),this._applyUpdatedTransform(d),this._fireMoveEvents(c)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}return i||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(i,c,f){f.animate===!1||f.duration===0?(i(1),c()):(this._easeStart=T.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=a.b3(i,-180,180);let f=Math.abs(i-c);return Math.abs(i-360-c)<f&&(i-=360),Math.abs(i+360-c)<f&&(i+=360),i}_normalizeCenter(i,c){if(!c.renderWorldCopies||c.lngRange)return;let f=i.lng-c.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}let yl={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class _l{constructor(i=yl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){let f=this._map._getUIString(`AttributionControl.${c}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){let d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}let c=this._map.style.sourceCaches;for(let d in c){let v=c[d];if(v.used||v.usedForTerrain){let S=v.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(d=>String(d).trim()),i.sort((d,v)=>d.length-v.length),i=i.filter((d,v)=>{for(let S=v+1;S<i.length;S++)if(i[S].indexOf(d)>=0)return!1;return!0});let f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ym{constructor(i={}){this._updateCompact=()=>{let c=this._container.children;if(c.length){let f=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");let c=I.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Jt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){let c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){let c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(let d of f)if(d.id===i)return void(d.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let c=this._currentlyRunning=this._queue;this._queue=[];for(let f of c)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Qm=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class oE extends a.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*cx(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];let f={};for(let d of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))f[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),a.aP(d.posMatrix,0,a.X,0,a.X,0,1),this._tiles[d.key]=new an(d,this.tileSize));for(let d in this._tiles)f[d]||delete this._tiles[d]}freeRtt(i){for(let c in this._tiles){let f=this._tiles[c];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){let c={};for(let f of this._renderableTilesKeys){let d=this._tiles[f].tileID;if(d.canonical.equals(i.canonical)){let v=i.clone();v.posMatrix=new Float64Array(16),a.aP(v.posMatrix,0,a.X,0,a.X,0,1),c[f]=v}else if(d.canonical.isChildOf(i.canonical)){let v=i.clone();v.posMatrix=new Float64Array(16);let S=d.canonical.z-i.canonical.z,E=d.canonical.x-(d.canonical.x>>S<<S),C=d.canonical.y-(d.canonical.y>>S<<S),O=a.X>>S;a.aP(v.posMatrix,0,O,0,O,0,1),a.J(v.posMatrix,v.posMatrix,[-E*O,-C*O,0]),c[f]=v}else if(i.canonical.isChildOf(d.canonical)){let v=i.clone();v.posMatrix=new Float64Array(16);let S=i.canonical.z-d.canonical.z,E=i.canonical.x-(i.canonical.x>>S<<S),C=i.canonical.y-(i.canonical.y>>S<<S),O=a.X>>S;a.aP(v.posMatrix,0,a.X,0,a.X,0,1),a.J(v.posMatrix,v.posMatrix,[E*O,C*O,0]),a.K(v.posMatrix,v.posMatrix,[1/cx(2,S),1/cx(2,S),0]),c[f]=v}}return c}getSourceTile(i,c){let f=this.sourceCache._source,d=i.overscaledZ-this.deltaZoom;if(d>f.maxzoom&&(d=f.maxzoom),d<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(d).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!v||!v.dem)&&c)for(;d>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(i.scaledTo(d--).key);return v}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class ev{constructor(i,c,f){this.painter=i,this.sourceCache=new oE(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,f,d=a.X){var v;if(!(c>=0&&c<d&&f>=0&&f<d))return 0;let S=this.getTerrainData(i),E=(v=S.tile)===null||v===void 0?void 0:v.dem;if(!E)return 0;let C=function(X,re,ae){var oe=re[0],le=re[1];return X[0]=ae[0]*oe+ae[4]*le+ae[12],X[1]=ae[1]*oe+ae[5]*le+ae[13],X}([],[c/d*a.X,f/d*a.X],S.u_terrain_matrix),O=[C[0]*E.dim,C[1]*E.dim],D=Math.floor(O[0]),L=Math.floor(O[1]),j=O[0]-D,G=O[1]-L;return E.get(D,L)*(1-j)*(1-G)+E.get(D+1,L)*j*(1-G)+E.get(D,L+1)*(1-j)*G+E.get(D+1,L+1)*j*G}getElevationForLngLatZoom(i,c){if(!a.bb(c,i.wrap()))return 0;let{tileID:f,mercatorX:d,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(f,d%a.X,v%a.X,a.X)}getElevation(i,c,f,d=a.X){return this.getDEMElevation(i,c,f,d)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){let d=this.painter.context,v=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new He(d,v,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new He(d,new a.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}let c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){let d=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new He(d,c.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),c.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}let f=c&&c+c.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){let d=this.sourceCache.sourceCache._source.maxzoom,v=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=d?v=i.canonical.z-d:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let S=i.canonical.x-(i.canonical.x>>v<<v),E=i.canonical.y-(i.canonical.y>>v<<v),C=a.bc(new Float64Array(16),[1/(a.X<<v),1/(a.X<<v),0]);a.J(C,C,[S*a.X,E*a.X,0]),this._demMatrixCache[i.key]={matrix:C,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){let c=this.painter,f=c.width/devicePixelRatio,d=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new He(c.context,{width:f,height:d,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new He(c.context,{width:f,height:d,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,d,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,d))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,S=0;v<this._coordsTextureSize;v++)for(let E=0;E<this._coordsTextureSize;E++,S+=4)c[S+0]=255&E,c[S+1]=255&v,c[S+2]=E>>8<<4|v>>8,c[S+3]=0;let f=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),d=new He(i,f,i.gl.RGBA,{premultiply:!1});return d.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);let c=new Uint8Array(4),f=this.painter.context,d=f.gl,v=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(v,E-S-1,1,1,d.RGBA,d.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);let C=c[0]+(c[2]>>4<<8),O=c[1]+((15&c[2])<<8),D=this.coordsIndex[255-c[3]],L=D&&this.sourceCache.getTileByID(D);if(!L)return null;let j=this._coordsTextureSize,G=(1<<L.tileID.canonical.z)*j;return new a.Z((L.tileID.canonical.x*j+C)/G+L.tileID.wrap,(L.tileID.canonical.y*j+O)/G,this.getElevation(L.tileID,C,O,j))}depthAtPoint(i){let c=new Uint8Array(4),f=this.painter.context,d=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let i=this.painter.context,c=new a.bd,f=new a.aY,d=this.meshSize,v=a.X/d,S=d*d;for(let L=0;L<=d;L++)for(let j=0;j<=d;j++)c.emplaceBack(j*v,L*v,0);for(let L=0;L<S;L+=d+1)for(let j=0;j<d;j++)f.emplaceBack(j+L,d+j+L+1,d+j+L+2),f.emplaceBack(j+L,d+j+L+2,j+L+1);let E=c.length,C=E+2*(d+1);for(let L of[0,1])for(let j=0;j<=d;j++)for(let G of[0,1])c.emplaceBack(j*v,L*a.X,G);for(let L=0;L<2*d;L+=2)f.emplaceBack(C+L,C+L+1,C+L+3),f.emplaceBack(C+L,C+L+3,C+L+2),f.emplaceBack(E+L,E+L+3,E+L+1),f.emplaceBack(E+L,E+L+2,E+L+3);let O=c.length,D=O+2*(d+1);for(let L of[0,1])for(let j=0;j<=d;j++)for(let G of[0,1])c.emplaceBack(L*a.X,j*v,G);for(let L=0;L<2*d;L+=2)f.emplaceBack(O+L,O+L+1,O+L+3),f.emplaceBack(O+L,O+L+3,O+L+2),f.emplaceBack(D+L,D+L+3,D+L+1),f.emplaceBack(D+L,D+L+2,D+L+3);return this._mesh=new Pf(i.createVertexBuffer(c,Qm.members),i.createIndexBuffer(f),a.a0.simpleSegment(0,0,c.length,f.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*a.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var f;let{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(f=this.getMinMaxElevation(d).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){let c=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,c){let f=a.Z.fromLngLat(i.wrap()),d=(1<<c)*a.X,v=f.x*d,S=f.y*d,E=Math.floor(v/a.X),C=Math.floor(S/a.X);return{tileID:new a.S(c,0,c,E,C),mercatorX:v,mercatorY:S}}}class sE{constructor(i,c,f){this._context=i,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){let c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new He(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:i,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(let c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(let i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}let xl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class F0{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new sE(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(c)),this._coordsDescendingInv={};for(let f in i.sourceCaches){this._coordsDescendingInv[f]={};let d=i.sourceCaches[f].getVisibleCoordinates();for(let v of d){let S=this.terrain.sourceCache.getTerrainCoords(v);for(let E in S)this._coordsDescendingInv[f][E]||(this._coordsDescendingInv[f][E]=[]),this._coordsDescendingInv[f][E].push(S[E])}}this._coordsDescendingInvStr={};for(let f of i._order){let d=i._layers[f],v=d.source;if(xl[d.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(let S in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][S]=this._coordsDescendingInv[v][S].map(E=>E.key).sort().join()}}for(let f of this._renderableTiles)for(let d in this._coordsDescendingInvStr){let v=this._coordsDescendingInvStr[d][f.tileID.key];v&&v!==f.rttCoords[d]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;let c=i.type,f=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(xl[c]&&(this._prevType&&xl[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!d))return!0;if(xl[this._prevType]||xl[c]&&d){this._prevType=c;let v=this._stacks.length-1,S=this._stacks[v]||[];for(let E of this._renderableTiles){if(this.pool.isFull()&&(C0(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[v]){let O=this.pool.getObjectForId(E.rtt[v].id);if(O.stamp===E.rtt[v].stamp){this.pool.useObject(O);continue}}let C=this.pool.getOrCreateFreeObject();this.pool.useObject(C),this.pool.stampObject(C),E.rtt[v]={id:C.id,stamp:C.stamp},f.context.bindFramebuffer.set(C.fbo.framebuffer),f.context.clear({color:a.aM.transparent,stencil:0}),f.currentStencilSource=void 0;for(let O=0;O<S.length;O++){let D=f.style._layers[S[O]],L=D.source?this._coordsDescendingInv[D.source][E.tileID.key]:[E.tileID];f.context.viewport.set([0,0,C.fbo.width,C.fbo.height]),f._renderTileClippingMasks(D,L),f.renderLayer(f,f.style.sourceCaches[D.source],D,L),D.source&&(E.rttCoords[D.source]=this._coordsDescendingInvStr[D.source][E.tileID.key])}}return C0(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xl[c]}return!1}}let tv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},z0=m,uE={hash:!1,interactive:!0,bearingSnap:7,attributionControl:yl,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},rv=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},lE={showCompass:!0,showZoom:!0,visualizePitch:!1};class cE{constructor(i,c,f=!1){this.mousedown=S=>{this.startMouse(a.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),I.mousePos(this.element,S)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,I.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let d=i.dragRotate._mouseRotate.getClickTolerance(),v=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Vm({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:E,bearingDegreesPerPixelMoved:C=.8})=>{let O=new jm;return new Ho({clickTolerance:E,move:(D,L)=>({bearingDelta:(L.x-D.x)*C}),moveStateManager:O,enable:S,assignEvents:rv})})({clickTolerance:d,enable:!0}),this.map=i,f&&(this.mousePitch=$m({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:E,pitchDegreesPerPixelMoved:C=-.5})=>{let O=new jm;return new Ho({clickTolerance:E,move:(D,L)=>({pitchDelta:(L.y-D.y)*C}),moveStateManager:O,enable:S,assignEvents:rv})})({clickTolerance:v,enable:!0})),I.addEventListener(c,"mousedown",this.mousedown),I.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),I.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),I.disableDrag()}moveMouse(i,c){let f=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(i,c)||{};if(d&&f.setBearing(f.getBearing()+d),this.mousePitch){let{pitchDelta:v}=this.mousePitch.dragMove(i,c)||{};v&&f.setPitch(f.getPitch()+v)}}moveTouch(i,c){let f=this.map,{bearingDelta:d}=this.touchRotate.dragMove(i,c)||{};if(d&&f.setBearing(f.getBearing()+d),this.touchPitch){let{pitchDelta:v}=this.touchPitch.dragMove(i,c)||{};v&&f.setPitch(f.getPitch()+v)}}off(){let i=this.element;I.removeEventListener(i,"mousedown",this.mousedown),I.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let Hn;function Cr(g,i,c){let f=new a.N(g.lng,g.lat);if(g=new a.N(g.lng,g.lat),i){let d=new a.N(g.lng-360,g.lat),v=new a.N(g.lng+360,g.lat),S=c.locationPoint(g).distSqr(i);c.locationPoint(d).distSqr(i)<S?g=d:c.locationPoint(v).distSqr(i)<S&&(g=v)}for(;Math.abs(g.lng-c.center.lng)>180;){let d=c.locationPoint(g);if(d.x>=0&&d.y>=0&&d.x<=c.width&&d.y<=c.height)break;g.lng>c.center.lng?g.lng-=360:g.lng+=360}return g.lng!==f.lng&&c.locationPoint(g).y>c.height/2-c.getHorizon()?g:f}let bl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Uf(g,i,c){let f=g.classList;for(let d in bl)f.remove(`maplibregl-${c}-anchor-${d}`);f.add(`maplibregl-${c}-anchor-${i}`)}class jf extends a.E{constructor(i){if(super(),this._onKeyPress=c=>{let f=c.code,d=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=c=>{let f=c.originalEvent.target,d=this._element;this._popup&&(f===d||d.contains(f))&&this.togglePopup()},this._update=c=>{var f;if(!this._map)return;let d=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Cr(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${bl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${v}`),T.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){let f=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=a.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");let c=I.createNS("http://www.w3.org/2000/svg","svg"),f=41,d=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${f}px`),c.setAttributeNS(null,"width",`${d}px`),c.setAttributeNS(null,"viewBox",`0 0 ${d} ${f}`);let v=I.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");let S=I.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");let E=I.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");let C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let oe of C){let le=I.createNS("http://www.w3.org/2000/svg","ellipse");le.setAttributeNS(null,"opacity","0.04"),le.setAttributeNS(null,"cx","10.5"),le.setAttributeNS(null,"cy","5.80029008"),le.setAttributeNS(null,"rx",oe.rx),le.setAttributeNS(null,"ry",oe.ry),E.appendChild(le)}let O=I.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);let D=I.createNS("http://www.w3.org/2000/svg","path");D.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(D);let L=I.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"opacity","0.25"),L.setAttributeNS(null,"fill","#000000");let j=I.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),L.appendChild(j);let G=I.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");let X=I.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(8.0, 8.0)");let re=I.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#000000"),re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962");let ae=I.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),X.appendChild(re),X.appendChild(ae),S.appendChild(E),S.appendChild(O),S.appendChild(L),S.appendChild(G),S.appendChild(X),c.appendChild(S),c.setAttributeNS(null,"height",f*this._scale+"px"),c.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(c),this._offset=a.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Uf(this._element,this._anchor,"marker"),i&&i.className)for(let c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){let d=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){let i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var c,f;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let d=this._map,v=d.terrain.depthAtPoint(this._pos),S=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,S)-v<.006)return void(this._element.style.opacity=this._opacity);let E=-this._offset.y/d.transform._pixelPerMeter,C=Math.sin(d.getPitch()*Math.PI/180)*E,O=d.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),D=d.transform.lngLatToCameraDepth(this._lngLat,S+C)-O>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&D&&this._popup.remove(),this._element.style.opacity=D?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=a.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,c){return i===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}let N0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},eh=0,th=!1,po={maxWidth:100,unit:"metric"};function rh(g,i,c){let f=c&&c.maxWidth||100,d=g._container.clientHeight/2,v=g.unproject([0,d]),S=g.unproject([f,d]),E=v.distanceTo(S);if(c&&c.unit==="imperial"){let C=3.2808*E;C>5280?lt(i,f,C/5280,g._getUIString("ScaleControl.Miles")):lt(i,f,C,g._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?lt(i,f,E/1852,g._getUIString("ScaleControl.NauticalMiles")):E>=1e3?lt(i,f,E/1e3,g._getUIString("ScaleControl.Kilometers")):lt(i,f,E,g._getUIString("ScaleControl.Meters"))}function lt(g,i,c,f){let d=function(v){let S=Math.pow(10,`${Math.floor(v)}`.length-1),E=v/S;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(C){let O=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*O)/O}(E),S*E}(c);g.style.width=i*(d/c)+"px",g.innerHTML=`${d}&nbsp;${f}`}let St={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Vf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $f(g){if(g){if(typeof g=="number"){let i=Math.round(Math.abs(g)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,g),"top-left":new a.P(i,i),"top-right":new a.P(-i,i),bottom:new a.P(0,-g),"bottom-left":new a.P(i,-i),"bottom-right":new a.P(-i,-i),left:new a.P(g,0),right:new a.P(-g,0)}}if(g instanceof a.P||Array.isArray(g)){let i=a.P.convert(g);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:a.P.convert(g.center||[0,0]),top:a.P.convert(g.top||[0,0]),"top-left":a.P.convert(g["top-left"]||[0,0]),"top-right":a.P.convert(g["top-right"]||[0,0]),bottom:a.P.convert(g.bottom||[0,0]),"bottom-left":a.P.convert(g["bottom-left"]||[0,0]),"bottom-right":a.P.convert(g["bottom-right"]||[0,0]),left:a.P.convert(g.left||[0,0]),right:a.P.convert(g.right||[0,0])}}return $f(new a.P(0,0))}let iv=m;u.AJAXError=a.bh,u.Evented=a.E,u.LngLat=a.N,u.MercatorCoordinate=a.Z,u.Point=a.P,u.addProtocol=a.bi,u.config=a.a,u.removeProtocol=a.bj,u.AttributionControl=_l,u.BoxZoomHandler=Kn,u.CanvasSource=Be,u.CooperativeGesturesHandler=gl,u.DoubleClickZoomHandler=mu,u.DragPanHandler=R0,u.DragRotateHandler=D0,u.EdgeInsets=dl,u.FullscreenControl=class extends a.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var i;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=c==null?void 0:c.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let g=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=qe,u.GeolocateControl=class extends a.E{constructor(g){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{let c=new a.N(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,d=this._map.getBearing(),v=a.e({bearing:d},this.options.fitBoundsOptions),S=Ae.fromLngLat(c,f);this._map.fitBounds(S,v,{geolocateSource:!0})},this._updateMarker=i=>{if(i){let c=new a.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&th)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{let c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new jf({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))})}},this.options=a.e({},N0,g)}onAdd(g){return this._map=g,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(i=!1){if(Hn!==void 0&&!i)return Hn;if(window.navigator.permissions===void 0)return Hn=!!window.navigator.geolocation,Hn;try{Hn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(c){Hn=!!window.navigator.geolocation}return Hn})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,eh=0,th=!1}_isOutOfMapMaxBounds(g){let i=this._map.getMaxBounds(),c=g.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let g=this._map.getBounds(),i=g.getSouthEast(),c=g.getNorthEast(),f=i.distanceTo(c),d=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":eh--,th=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),eh++,eh>1?(g={maximumAge:6e5,timeout:0},th=!0):(g=this.options.positionOptions,th=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.Hash=Of,u.ImageSource=ut,u.KeyboardHandler=ca,u.LngLatBounds=Ae,u.LogoControl=Ym,u.Map=class extends L0{constructor(g){a.bf.mark(a.bg.create);let i=Object.assign(Object.assign({},uE),g);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new pl(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Jt,this._controls=[],this._mapId=a.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},tv),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new J(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let c=!1,f=Zc(d=>{this._trackResize&&!this._removed&&(this.resize(d),this.redraw())},50);this._resizeObserver=new ResizeObserver(d=>{c?f(d):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Jm(this,i),this._hash=i.hash&&new Of(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,a.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new _l(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Ym,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new a.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new a.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new a.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(g,i){if(i===void 0&&(i=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let c=g.onAdd(this);this._controls.push(g);let f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let i=this._controls.indexOf(g);return i>-1&&this._controls.splice(i,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,i,c,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,i,c,f)}resize(g){var i;let c=this._containerDimensions(),f=c[0],d=c[1],v=this._getClampedPixelRatio(f,d);if(this._resizeCanvas(f,d,v),this.painter.resize(f,d,v),this.painter.overLimit()){let E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];let C=this._getClampedPixelRatio(f,d);this._resizeCanvas(f,d,C),this.painter.resize(f,d,C)}this.transform.resize(f,d),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,d);let S=!this._moving;return S&&(this.stop(),this.fire(new a.k("movestart",g)).fire(new a.k("move",g))),this.fire(new a.k("resize",g)),S&&this.fire(new a.k("moveend",g)),this}_getClampedPixelRatio(g,i){let{0:c,1:f}=this._maxCanvasSize,d=this.getPixelRatio(),v=g*d,S=i*d;return Math.min(v>c?c/v:1,S>f?f/S:1)*d}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(Ae.convert(g)),this._update()}setMinZoom(g){if((g=g==null?-2:g)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g==null?22:g)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g==null?0:g)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g==null?60:g)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(a.N.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(a.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,i,c){if(g==="mouseenter"||g==="mouseover"){let f=!1;return{layers:i,listener:c,delegates:{mousemove:v=>{let S=i.filter(C=>this.getLayer(C)),E=S.length!==0?this.queryRenderedFeatures(v.point,{layers:S}):[];E.length?f||(f=!0,c.call(this,new Ni(g,this,v.originalEvent,{features:E}))):f=!1},mouseout:()=>{f=!1}}}}if(g==="mouseleave"||g==="mouseout"){let f=!1;return{layers:i,listener:c,delegates:{mousemove:S=>{let E=i.filter(C=>this.getLayer(C));(E.length!==0?this.queryRenderedFeatures(S.point,{layers:E}):[]).length?f=!0:f&&(f=!1,c.call(this,new Ni(g,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,c.call(this,new Ni(g,this,S.originalEvent)))}}}}{let f=d=>{let v=i.filter(E=>this.getLayer(E)),S=v.length!==0?this.queryRenderedFeatures(d.point,{layers:v}):[];S.length&&(d.features=S,c.call(this,d),delete d.features)};return{layers:i,listener:c,delegates:{[g]:f}}}}_saveDelegatedListener(g,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(i)}_removeDelegatedListener(g,i,c){if(!this._delegatedListeners||!this._delegatedListeners[g])return;let f=this._delegatedListeners[g];for(let d=0;d<f.length;d++){let v=f[d];if(v.listener===c&&v.layers.length===i.length&&v.layers.every(S=>i.includes(S))){for(let S in v.delegates)this.off(S,v.delegates[S]);return void f.splice(d,1)}}}on(g,i,c){if(c===void 0)return super.on(g,i);let f=this._createDelegatedListener(g,typeof i=="string"?[i]:i,c);this._saveDelegatedListener(g,f);for(let d in f.delegates)this.on(d,f.delegates[d]);return this}once(g,i,c){if(c===void 0)return super.once(g,i);let f=typeof i=="string"?[i]:i,d=this._createDelegatedListener(g,f,c);for(let v in d.delegates){let S=d.delegates[v];d.delegates[v]=(...E)=>{this._removeDelegatedListener(g,f,c),S(...E)}}this._saveDelegatedListener(g,d);for(let v in d.delegates)this.once(v,d.delegates[v]);return this}off(g,i,c){return c===void 0?super.off(g,i):(this._removeDelegatedListener(g,typeof i=="string"?[i]:i,c),this)}queryRenderedFeatures(g,i){if(!this.style)return[];let c,f=g instanceof a.P||Array.isArray(g),d=f?g:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:g)||{},d instanceof a.P||typeof d[0]=="number")c=[a.P.convert(d)];else{let v=a.P.convert(d[0]),S=a.P.convert(d[1]);c=[v,new a.P(S.x,v.y),S,new a.P(v.x,S.y),v]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(g,i){return this.style.querySourceFeatures(g,i)}setStyle(g,i){return(i=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(g,i))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){let i=this._locale[g];if(i==null)throw new Error(`Missing UI string '${g}'`);return i}_updateStyle(g,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,i));let c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new mf(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,i,c):this.style.loadJSON(g,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,i){if(typeof g=="string"){let c=this._requestManager.transformRequest(g,"Style");a.h(c,new AbortController).then(f=>{this._updateDiff(f.data,i)}).catch(f=>{f&&this.fire(new a.j(f))})}else typeof g=="object"&&this._updateDiff(g,i)}_updateDiff(g,i){try{this.style.setState(g,i)&&this._update(!0)}catch(c){a.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(g,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(g,i){return this._lazyInitEmptyStyle(),this.style.addSource(g,i),this._update(!0)}isSourceLoaded(g){let i=this.style&&this.style.sourceCaches[g];if(i!==void 0)return i.loaded();this.fire(new a.j(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){let i=this.style.sourceCaches[g.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&i.reload();for(let c in this.style._layers){let f=this.style._layers[c];f.type==="hillshade"&&f.source===g.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ev(this.painter,i,g),this.painter.renderToTexture=new F0(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==g.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:g})),this}getTerrain(){var g,i;return(i=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&i!==void 0?i:null}areTilesLoaded(){let g=this.style&&this.style.sourceCaches;for(let i in g){let c=g[i]._tiles;for(let f in c){let d=c[f];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,i,c={}){let{pixelRatio:f=1,sdf:d=!1,stretchX:v,stretchY:S,content:E,textFitWidth:C,textFitHeight:O}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||a.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:D,height:L,data:j}=i,G=i;return this.style.addImage(g,{data:new a.R({width:D,height:L},new Uint8Array(j)),pixelRatio:f,stretchX:v,stretchY:S,content:E,textFitWidth:C,textFitHeight:O,sdf:d,version:0,userImage:G}),G.onAdd&&G.onAdd(this,g),this}}{let{width:D,height:L,data:j}=T.getImageData(i);this.style.addImage(g,{data:new a.R({width:D,height:L},j),pixelRatio:f,stretchX:v,stretchY:S,content:E,textFitWidth:C,textFitHeight:O,sdf:d,version:0})}}updateImage(g,i){let c=this.style.getImage(g);if(!c)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let f=i instanceof HTMLImageElement||a.b(i)?T.getImageData(i):i,{width:d,height:v,data:S}=f;if(d===void 0||v===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==c.data.width||v!==c.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let E=!(i instanceof HTMLImageElement||a.b(i));return c.data.replace(S,E),this.style.updateImage(g,c),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return H.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,i){return this._lazyInitEmptyStyle(),this.style.addLayer(g,i),this._update(!0)}moveLayer(g,i){return this.style.moveLayer(g,i),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,i,c){return this.style.setLayerZoomRange(g,i,c),this._update(!0)}setFilter(g,i,c={}){return this.style.setFilter(g,i,c),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,i,c,f={}){return this.style.setPaintProperty(g,i,c,f),this._update(!0)}getPaintProperty(g,i){return this.style.getPaintProperty(g,i)}setLayoutProperty(g,i,c,f={}){return this.style.setLayoutProperty(g,i,c,f),this._update(!0)}getLayoutProperty(g,i){return this.style.getLayoutProperty(g,i)}setGlyphs(g,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,i,c,f=>{f||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,i,c=>{c||this._update(!0)}),this}setLight(g,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(g){return this._lazyInitEmptyStyle(),this.style.setSky(g),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,i){return this.style.setFeatureState(g,i),this._update()}removeFeatureState(g,i){return this.style.removeFeatureState(g,i),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,i=0;return this._container&&(g=this._container.clientWidth||400,i=this._container.clientHeight||300),[g,i]}_setupContainer(){let g=this._container;g.classList.add("maplibregl-map");let i=this._canvasContainer=I.create("div","maplibregl-canvas-container",g);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let c=this._containerDimensions(),f=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],f);let d=this._controlContainer=I.create("div","maplibregl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{v[S]=I.create("div",`maplibregl-ctrl-${S} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,i,c){this._canvas.width=Math.floor(c*g),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${i}px`}_setupPainter(){let g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:g},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});let c=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!c){let f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new Mf(c,this.transform),k.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){let i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let d=this.transform.zoom,v=T.now();this.style.zoomHistory.update(d,v);let S=new a.z(d,{now:v,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=S.crossFadingFactor();E===1&&E===this._crossFadingFactor||(c=!0,this._crossFadingFactor=E),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(let c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();let i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(g=>{a.bf.frame(g),this._frameRequest=null,this._render(g)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return z0}getCameraTargetElevation(){return this.transform.elevation}},u.MapMouseEvent=Ni,u.MapTouchEvent=du,u.MapWheelEvent=M0,u.Marker=jf,u.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{let i=this._map.getZoom(),c=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{let i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{let f=this._map._getUIString(`NavigationControl.${c}`);i.title=f,i.setAttribute("aria-label",f)},this.options=a.e({},lE,g),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cE(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,i){let c=I.create("button",g,this._container);return c.type="button",c.addEventListener("click",i),c}},u.Popup=class extends a.E{constructor(g){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Cr(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!i)return;let f=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor,v=$f(this.options.offset);if(!d){let E=this._container.offsetWidth,C=this._container.offsetHeight,O;O=f.y+v.bottom.y<C?["top"]:f.y>this._map.transform.height-C?["bottom"]:[],f.x<E/2?O.push("left"):f.x>this._map.transform.width-E/2&&O.push("right"),d=O.length===0?"bottom":O.join("-")}let S=f.add(v[d]);this.options.subpixelPositioning||(S=S.round()),I.setTransform(this._container,`${bl[d]} translate(${S.x}px,${S.y}px)`),Uf(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(St),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=a.N.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){let i=document.createDocumentFragment(),c=document.createElement("body"),f;for(c.innerHTML=g;f=c.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let g=this._container.querySelector(Vf);g&&g.focus()}},u.RasterDEMTileSource=ue,u.RasterTileSource=nr,u.ScaleControl=class{constructor(g){this._onMove=()=>{rh(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,rh(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},po),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=Wa,u.Style=mf,u.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=vl,u.TwoFingersTouchRotateHandler=Hm,u.TwoFingersTouchZoomHandler=Gm,u.TwoFingersTouchZoomRotateHandler=Xm,u.VectorTileSource=Qu,u.VideoSource=rt,u.addSourceType=(g,i)=>a._(void 0,void 0,void 0,function*(){if(Ct(g))throw new Error(`A source type called "${g}" already exists.`);((c,f)=>{At[c]=f})(g,i)}),u.clearPrewarmedResources=function(){let g=tn;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Fa),tn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return nn().getRTLTextPluginStatus()},u.getVersion=function(){return iv},u.getWorkerCount=function(){return sa.workerCount},u.getWorkerUrl=function(){return a.a.WORKER_URL},u.importScriptInWorkers=function(g){return ms().broadcast("IS",g)},u.prewarm=function(){so().acquire(Fa)},u.setMaxParallelImageRequests=function(g){a.a.MAX_PARALLEL_IMAGE_REQUESTS=g},u.setRTLTextPlugin=function(g,i){return nn().setRTLTextPlugin(g,i)},u.setWorkerCount=function(g){sa.workerCount=g},u.setWorkerUrl=function(g){a.a.WORKER_URL=g}});var o=e;return o})});var mz=b((uKt,Vme)=>{"use strict";Vme.exports=function(t,r){return function(){for(var u=new Array(arguments.length),a=0;a<u.length;a++)u[a]=arguments[a];return t.apply(r,u)}}});var Ra=b((lKt,Gme)=>{"use strict";var s1t=mz(),of=Object.prototype.toString;function yz(e){return of.call(e)==="[object Array]"}function vz(e){return typeof e=="undefined"}function u1t(e){return e!==null&&!vz(e)&&e.constructor!==null&&!vz(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function l1t(e){return of.call(e)==="[object ArrayBuffer]"}function c1t(e){return typeof FormData!="undefined"&&e instanceof FormData}function h1t(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function f1t(e){return typeof e=="string"}function d1t(e){return typeof e=="number"}function $me(e){return e!==null&&typeof e=="object"}function sq(e){if(of.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function p1t(e){return of.call(e)==="[object Date]"}function m1t(e){return of.call(e)==="[object File]"}function v1t(e){return of.call(e)==="[object Blob]"}function Wme(e){return of.call(e)==="[object Function]"}function g1t(e){return $me(e)&&Wme(e.pipe)}function y1t(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function _1t(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function x1t(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function _z(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),yz(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function gz(){var e={};function t(u,a){sq(e[a])&&sq(u)?e[a]=gz(e[a],u):sq(u)?e[a]=gz({},u):yz(u)?e[a]=u.slice():e[a]=u}for(var r=0,o=arguments.length;r<o;r++)_z(arguments[r],t);return e}function b1t(e,t,r){return _z(t,function(u,a){r&&typeof u=="function"?e[a]=s1t(u,r):e[a]=u}),e}function w1t(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}Gme.exports={isArray:yz,isArrayBuffer:l1t,isBuffer:u1t,isFormData:c1t,isArrayBufferView:h1t,isString:f1t,isNumber:d1t,isObject:$me,isPlainObject:sq,isUndefined:vz,isDate:p1t,isFile:m1t,isBlob:v1t,isFunction:Wme,isStream:g1t,isURLSearchParams:y1t,isStandardBrowserEnv:x1t,forEach:_z,merge:gz,extend:b1t,trim:_1t,stripBOM:w1t}});var xz=b((cKt,Hme)=>{"use strict";var Qp=Ra();function Kme(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Hme.exports=function(t,r,o){if(!r)return t;var u;if(o)u=o(r);else if(Qp.isURLSearchParams(r))u=r.toString();else{var a=[];Qp.forEach(r,function(q,T){q===null||typeof q=="undefined"||(Qp.isArray(q)?T=T+"[]":q=[q],Qp.forEach(q,function(k){Qp.isDate(k)?k=k.toISOString():Qp.isObject(k)&&(k=JSON.stringify(k)),a.push(Kme(T)+"="+Kme(k))}))}),u=a.join("&")}if(u){var m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t}});var Xme=b((hKt,Zme)=>{"use strict";var S1t=Ra();function uq(){this.handlers=[]}uq.prototype.use=function(t,r,o){return this.handlers.push({fulfilled:t,rejected:r,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};uq.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};uq.prototype.forEach=function(t){S1t.forEach(this.handlers,function(o){o!==null&&t(o)})};Zme.exports=uq});var Yme=b((fKt,Jme)=>{"use strict";var q1t=Ra();Jme.exports=function(t,r){q1t.forEach(t,function(u,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=u,delete t[a])})}});var bz=b((dKt,Qme)=>{"use strict";Qme.exports=function(t,r,o,u,a){return t.config=r,o&&(t.code=o),t.request=u,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var wz=b((pKt,eve)=>{"use strict";var A1t=bz();eve.exports=function(t,r,o,u,a){var m=new Error(t);return A1t(m,r,o,u,a)}});var rve=b((mKt,tve)=>{"use strict";var E1t=wz();tve.exports=function(t,r,o){var u=o.config.validateStatus;!o.status||!u||u(o.status)?t(o):r(E1t("Request failed with status code "+o.status,o.config,null,o.request,o))}});var nve=b((vKt,ive)=>{"use strict";var lq=Ra();ive.exports=lq.isStandardBrowserEnv()?function(){return{write:function(r,o,u,a,m,x){var q=[];q.push(r+"="+encodeURIComponent(o)),lq.isNumber(u)&&q.push("expires="+new Date(u).toGMTString()),lq.isString(a)&&q.push("path="+a),lq.isString(m)&&q.push("domain="+m),x===!0&&q.push("secure"),document.cookie=q.join("; ")},read:function(r){var o=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var ove=b((gKt,ave)=>{"use strict";ave.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var uve=b((yKt,sve)=>{"use strict";sve.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var cve=b((_Kt,lve)=>{"use strict";var T1t=ove(),I1t=uve();lve.exports=function(t,r){return t&&!T1t(r)?I1t(t,r):r}});var fve=b((xKt,hve)=>{"use strict";var Sz=Ra(),C1t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];hve.exports=function(t){var r={},o,u,a;return t&&Sz.forEach(t.split(`
`),function(x){if(a=x.indexOf(":"),o=Sz.trim(x.substr(0,a)).toLowerCase(),u=Sz.trim(x.substr(a+1)),o){if(r[o]&&C1t.indexOf(o)>=0)return;o==="set-cookie"?r[o]=(r[o]?r[o]:[]).concat([u]):r[o]=r[o]?r[o]+", "+u:u}}),r}});var mve=b((bKt,pve)=>{"use strict";var dve=Ra();pve.exports=dve.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),o;function u(a){var m=a;return t&&(r.setAttribute("href",m),m=r.href),r.setAttribute("href",m),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return o=u(window.location.href),function(m){var x=dve.isString(m)?u(m):m;return x.protocol===o.protocol&&x.host===o.host}}():function(){return function(){return!0}}()});var k_=b((wKt,vve)=>{"use strict";function qz(e){this.message=e}qz.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};qz.prototype.__CANCEL__=!0;vve.exports=qz});var Ez=b((SKt,gve)=>{"use strict";var cq=Ra(),P1t=rve(),M1t=nve(),O1t=xz(),k1t=cve(),R1t=fve(),D1t=mve(),Az=wz(),L1t=R_(),F1t=k_();gve.exports=function(t){return new Promise(function(o,u){var a=t.data,m=t.headers,x=t.responseType,q;function T(){t.cancelToken&&t.cancelToken.unsubscribe(q),t.signal&&t.signal.removeEventListener("abort",q)}cq.isFormData(a)&&delete m["Content-Type"];var I=new XMLHttpRequest;if(t.auth){var k=t.auth.username||"",B=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";m.Authorization="Basic "+btoa(k+":"+B)}var Y=k1t(t.baseURL,t.url);I.open(t.method.toUpperCase(),O1t(Y,t.params,t.paramsSerializer),!0),I.timeout=t.timeout;function de(){if(I){var Z="getAllResponseHeaders"in I?R1t(I.getAllResponseHeaders()):null,H=!x||x==="text"||x==="json"?I.responseText:I.response,J={data:H,status:I.status,statusText:I.statusText,headers:Z,config:t,request:I};P1t(function(be){o(be),T()},function(be){u(be),T()},J),I=null}}if("onloadend"in I?I.onloadend=de:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(de)},I.onabort=function(){I&&(u(Az("Request aborted",t,"ECONNABORTED",I)),I=null)},I.onerror=function(){u(Az("Network Error",t,null,I)),I=null},I.ontimeout=function(){var H=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",J=t.transitional||L1t.transitional;t.timeoutErrorMessage&&(H=t.timeoutErrorMessage),u(Az(H,t,J.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",I)),I=null},cq.isStandardBrowserEnv()){var pe=(t.withCredentials||D1t(Y))&&t.xsrfCookieName?M1t.read(t.xsrfCookieName):void 0;pe&&(m[t.xsrfHeaderName]=pe)}"setRequestHeader"in I&&cq.forEach(m,function(H,J){typeof a=="undefined"&&J.toLowerCase()==="content-type"?delete m[J]:I.setRequestHeader(J,H)}),cq.isUndefined(t.withCredentials)||(I.withCredentials=!!t.withCredentials),x&&x!=="json"&&(I.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&I.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&I.upload&&I.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(q=function(Z){I&&(u(!Z||Z&&Z.type?new F1t("canceled"):Z),I.abort(),I=null)},t.cancelToken&&t.cancelToken.subscribe(q),t.signal&&(t.signal.aborted?q():t.signal.addEventListener("abort",q))),a||(a=null),I.send(a)})}});var R_=b((qKt,xve)=>{"use strict";var bn=Ra(),yve=Yme(),z1t=bz(),N1t={"Content-Type":"application/x-www-form-urlencoded"};function _ve(e,t){!bn.isUndefined(e)&&bn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function B1t(){var e;return typeof XMLHttpRequest!="undefined"?e=Ez():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=Ez()),e}function U1t(e,t,r){if(bn.isString(e))try{return(t||JSON.parse)(e),bn.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(r||JSON.stringify)(e)}var hq={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:B1t(),transformRequest:[function(t,r){return yve(r,"Accept"),yve(r,"Content-Type"),bn.isFormData(t)||bn.isArrayBuffer(t)||bn.isBuffer(t)||bn.isStream(t)||bn.isFile(t)||bn.isBlob(t)?t:bn.isArrayBufferView(t)?t.buffer:bn.isURLSearchParams(t)?(_ve(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):bn.isObject(t)||r&&r["Content-Type"]==="application/json"?(_ve(r,"application/json"),U1t(t)):t}],transformResponse:[function(t){var r=this.transitional||hq.transitional,o=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,a=!o&&this.responseType==="json";if(a||u&&bn.isString(t)&&t.length)try{return JSON.parse(t)}catch(m){if(a)throw m.name==="SyntaxError"?z1t(m,this,"E_JSON_PARSE"):m}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};bn.forEach(["delete","get","head"],function(t){hq.headers[t]={}});bn.forEach(["post","put","patch"],function(t){hq.headers[t]=bn.merge(N1t)});xve.exports=hq});var wve=b((AKt,bve)=>{"use strict";var j1t=Ra(),V1t=R_();bve.exports=function(t,r,o){var u=this||V1t;return j1t.forEach(o,function(m){t=m.call(u,t,r)}),t}});var Tz=b((EKt,Sve)=>{"use strict";Sve.exports=function(t){return!!(t&&t.__CANCEL__)}});var Eve=b((TKt,Ave)=>{"use strict";var qve=Ra(),Iz=wve(),$1t=Tz(),W1t=R_(),G1t=k_();function Cz(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new G1t("canceled")}Ave.exports=function(t){Cz(t),t.headers=t.headers||{},t.data=Iz.call(t,t.data,t.headers,t.transformRequest),t.headers=qve.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),qve.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var r=t.adapter||W1t.adapter;return r(t).then(function(u){return Cz(t),u.data=Iz.call(t,u.data,u.headers,t.transformResponse),u},function(u){return $1t(u)||(Cz(t),u&&u.response&&(u.response.data=Iz.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})}});var Pz=b((IKt,Tve)=>{"use strict";var no=Ra();Tve.exports=function(t,r){r=r||{};var o={};function u(I,k){return no.isPlainObject(I)&&no.isPlainObject(k)?no.merge(I,k):no.isPlainObject(k)?no.merge({},k):no.isArray(k)?k.slice():k}function a(I){if(no.isUndefined(r[I])){if(!no.isUndefined(t[I]))return u(void 0,t[I])}else return u(t[I],r[I])}function m(I){if(!no.isUndefined(r[I]))return u(void 0,r[I])}function x(I){if(no.isUndefined(r[I])){if(!no.isUndefined(t[I]))return u(void 0,t[I])}else return u(void 0,r[I])}function q(I){if(I in r)return u(t[I],r[I]);if(I in t)return u(void 0,t[I])}var T={url:m,method:m,data:m,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:q};return no.forEach(Object.keys(t).concat(Object.keys(r)),function(k){var B=T[k]||a,Y=B(k);no.isUndefined(Y)&&B!==q||(o[k]=Y)}),o}});var Mz=b((CKt,Ive)=>{Ive.exports={version:"0.24.0"}});var Mve=b((PKt,Pve)=>{"use strict";var K1t=Mz().version,Oz={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Oz[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});var Cve={};Oz.transitional=function(t,r,o){function u(a,m){return"[Axios v"+K1t+"] Transitional option '"+a+"'"+m+(o?". "+o:"")}return function(a,m,x){if(t===!1)throw new Error(u(m," has been removed"+(r?" in "+r:"")));return r&&!Cve[m]&&(Cve[m]=!0,console.warn(u(m," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,m,x):!0}};function H1t(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var o=Object.keys(e),u=o.length;u-->0;){var a=o[u],m=t[a];if(m){var x=e[a],q=x===void 0||m(x,a,e);if(q!==!0)throw new TypeError("option "+a+" must be "+q);continue}if(r!==!0)throw Error("Unknown option "+a)}}Pve.exports={assertOptions:H1t,validators:Oz}});var Fve=b((MKt,Lve)=>{"use strict";var Rve=Ra(),Z1t=xz(),Ove=Xme(),kve=Eve(),fq=Pz(),Dve=Mve(),em=Dve.validators;function D_(e){this.defaults=e,this.interceptors={request:new Ove,response:new Ove}}D_.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=fq(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&Dve.assertOptions(r,{silentJSONParsing:em.transitional(em.boolean),forcedJSONParsing:em.transitional(em.boolean),clarifyTimeoutError:em.transitional(em.boolean)},!1);var o=[],u=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(t)===!1||(u=u&&B.synchronous,o.unshift(B.fulfilled,B.rejected))});var a=[];this.interceptors.response.forEach(function(B){a.push(B.fulfilled,B.rejected)});var m;if(!u){var x=[kve,void 0];for(Array.prototype.unshift.apply(x,o),x=x.concat(a),m=Promise.resolve(t);x.length;)m=m.then(x.shift(),x.shift());return m}for(var q=t;o.length;){var T=o.shift(),I=o.shift();try{q=T(q)}catch(k){I(k);break}}try{m=kve(q)}catch(k){return Promise.reject(k)}for(;a.length;)m=m.then(a.shift(),a.shift());return m};D_.prototype.getUri=function(t){return t=fq(this.defaults,t),Z1t(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Rve.forEach(["delete","get","head","options"],function(t){D_.prototype[t]=function(r,o){return this.request(fq(o||{},{method:t,url:r,data:(o||{}).data}))}});Rve.forEach(["post","put","patch"],function(t){D_.prototype[t]=function(r,o,u){return this.request(fq(u||{},{method:t,url:r,data:o}))}});Lve.exports=D_});var Nve=b((OKt,zve)=>{"use strict";var X1t=k_();function tm(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(u){t=u});var r=this;this.promise.then(function(o){if(r._listeners){var u,a=r._listeners.length;for(u=0;u<a;u++)r._listeners[u](o);r._listeners=null}}),this.promise.then=function(o){var u,a=new Promise(function(m){r.subscribe(m),u=m}).then(o);return a.cancel=function(){r.unsubscribe(u)},a},e(function(u){r.reason||(r.reason=new X1t(u),t(r.reason))})}tm.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};tm.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};tm.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};tm.source=function(){var t,r=new tm(function(u){t=u});return{token:r,cancel:t}};zve.exports=tm});var Uve=b((kKt,Bve)=>{"use strict";Bve.exports=function(t){return function(o){return t.apply(null,o)}}});var Vve=b((RKt,jve)=>{"use strict";jve.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var Gve=b((DKt,kz)=>{"use strict";var $ve=Ra(),J1t=mz(),dq=Fve(),Y1t=Pz(),Q1t=R_();function Wve(e){var t=new dq(e),r=J1t(dq.prototype.request,t);return $ve.extend(r,dq.prototype,t),$ve.extend(r,t),r.create=function(u){return Wve(Y1t(e,u))},r}var Xs=Wve(Q1t);Xs.Axios=dq;Xs.Cancel=k_();Xs.CancelToken=Nve();Xs.isCancel=Tz();Xs.VERSION=Mz().version;Xs.all=function(t){return Promise.all(t)};Xs.spread=Uve();Xs.isAxiosError=Vve();kz.exports=Xs;kz.exports.default=Xs});var Hve=b((LKt,Kve)=>{Kve.exports=Gve()});var oge=b((UKt,age)=>{var Dz=1/0,rwt=17976931348623157e292,Jve=NaN,iwt="[object Symbol]",nwt=/^\s+|\s+$/g,awt=/^[-+]0x[0-9a-f]+$/i,owt=/^0b[01]+$/i,swt=/^0o[0-7]+$/i,uwt=parseInt,lwt=typeof global=="object"&&global&&global.Object===Object&&global,cwt=typeof self=="object"&&self&&self.Object===Object&&self,hwt=lwt||cwt||Function("return this")(),fwt=Object.prototype,dwt=fwt.toString,Yve=hwt.Symbol,pwt=Math.min,Qve=Yve?Yve.prototype:void 0,ege=Qve?Qve.toString:void 0;function mwt(e){if(typeof e=="string")return e;if(ige(e))return ege?ege.call(e):"";var t=e+"";return t=="0"&&1/e==-Dz?"-0":t}function vwt(e){var t=Math[e];return function(r,o){if(r=nge(r),o=pwt(_wt(o),292),o){var u=(rge(r)+"e").split("e"),a=t(u[0]+"e"+(+u[1]+o));return u=(rge(a)+"e").split("e"),+(u[0]+"e"+(+u[1]-o))}return t(r)}}function tge(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function gwt(e){return!!e&&typeof e=="object"}function ige(e){return typeof e=="symbol"||gwt(e)&&dwt.call(e)==iwt}function ywt(e){if(!e)return e===0?e:0;if(e=nge(e),e===Dz||e===-Dz){var t=e<0?-1:1;return t*rwt}return e===e?e:0}function _wt(e){var t=ywt(e),r=t%1;return t===t?r?t-r:t:0}function nge(e){if(typeof e=="number")return e;if(ige(e))return Jve;if(tge(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=tge(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(nwt,"");var r=owt.test(e);return r||swt.test(e)?uwt(e.slice(2),r?2:8):awt.test(e)?Jve:+e}function rge(e){return e==null?"":mwt(e)}var xwt=vwt("round");age.exports=xwt});var z_=b((THt,sge)=>{var Swt=sge.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=Swt)});var sf=b((IHt,uge)=>{var qwt=uge.exports={version:"2.6.12"};typeof __e=="number"&&(__e=qwt)});var cge=b((CHt,lge)=>{lge.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var Fz=b((PHt,hge)=>{var Awt=cge();hge.exports=function(e,t,r){if(Awt(e),t===void 0)return e;switch(r){case 1:return function(o){return e.call(t,o)};case 2:return function(o,u){return e.call(t,o,u)};case 3:return function(o,u,a){return e.call(t,o,u,a)};}return function(){return e.apply(t,arguments)}}});var N_=b((MHt,fge)=>{fge.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var B_=b((OHt,dge)=>{var Ewt=N_();dge.exports=function(e){if(!Ewt(e))throw TypeError(e+" is not an object!");return e}});var yq=b((kHt,pge)=>{pge.exports=function(e){try{return!!e()}catch(t){return!0}}});var Rc=b((RHt,mge)=>{mge.exports=!yq()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var Nz=b((DHt,gge)=>{var vge=N_(),zz=z_().document,Twt=vge(zz)&&vge(zz.createElement);gge.exports=function(e){return Twt?zz.createElement(e):{}}});var Bz=b((LHt,yge)=>{yge.exports=!Rc()&&!yq()(function(){return Object.defineProperty(Nz()("div"),"a",{get:function(){return 7}}).a!=7})});var Uz=b((FHt,_ge)=>{var _q=N_();_ge.exports=function(e,t){if(!_q(e))return e;var r,o;if(t&&typeof(r=e.toString)=="function"&&!_q(o=r.call(e))||typeof(r=e.valueOf)=="function"&&!_q(o=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!_q(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}});var jz=b(bge=>{var xge=B_(),Iwt=Bz(),Cwt=Uz(),Pwt=Object.defineProperty;bge.f=Rc()?Object.defineProperty:function(t,r,o){if(xge(t),r=Cwt(r,!0),xge(o),Iwt)try{return Pwt(t,r,o)}catch(u){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(t[r]=o.value),t}});var Vz=b((NHt,wge)=>{wge.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var qge=b((BHt,Sge)=>{var Mwt=jz(),Owt=Vz();Sge.exports=Rc()?function(e,t,r){return Mwt.f(e,t,Owt(1,r))}:function(e,t,r){return e[t]=r,e}});var xq=b((UHt,Age)=>{var kwt={}.hasOwnProperty;Age.exports=function(e,t){return kwt.call(e,t)}});var U_=b((jHt,Tge)=>{var bq=z_(),$z=sf(),Ege=Fz(),Rwt=qge(),Dwt=xq(),wq="prototype",Un=function(e,t,r){var o=e&Un.F,u=e&Un.G,a=e&Un.S,m=e&Un.P,x=e&Un.B,q=e&Un.W,T=u?$z:$z[t]||($z[t]={}),I=T[wq],k=u?bq:a?bq[t]:(bq[t]||{})[wq],B,Y,de;u&&(r=t);for(B in r)Y=!o&&k&&k[B]!==void 0,!(Y&&Dwt(T,B))&&(de=Y?k[B]:r[B],T[B]=u&&typeof k[B]!="function"?r[B]:x&&Y?Ege(de,bq):q&&k[B]==de?function(pe){var Z=function(H,J,ve){if(this instanceof pe){switch(arguments.length){case 0:return new pe;case 1:return new pe(H);case 2:return new pe(H,J);}return new pe(H,J,ve)}return pe.apply(this,arguments)};return Z[wq]=pe[wq],Z}(de):m&&typeof de=="function"?Ege(Function.call,de):de,m&&((T.virtual||(T.virtual={}))[B]=de,e&Un.R&&I&&!I[B]&&Rwt(I,B,de)))};Un.F=1;Un.G=2;Un.S=4;Un.P=8;Un.B=16;Un.W=32;Un.U=64;Un.R=128;Tge.exports=Un});var Cge=b((VHt,Ige)=>{var Lwt={}.toString;Ige.exports=function(e){return Lwt.call(e).slice(8,-1)}});var Wz=b(($Ht,Pge)=>{var Fwt=Cge();Pge.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return Fwt(e)=="String"?e.split(""):Object(e)}});var Gz=b((WHt,Mge)=>{Mge.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var j_=b((GHt,Oge)=>{var zwt=Wz(),Nwt=Gz();Oge.exports=function(e){return zwt(Nwt(e))}});var Kz=b((KHt,kge)=>{var Bwt=Math.ceil,Uwt=Math.floor;kge.exports=function(e){return isNaN(e=+e)?0:(e>0?Uwt:Bwt)(e)}});var Dge=b((HHt,Rge)=>{var jwt=Kz(),Vwt=Math.min;Rge.exports=function(e){return e>0?Vwt(jwt(e),9007199254740991):0}});var Fge=b((ZHt,Lge)=>{var $wt=Kz(),Wwt=Math.max,Gwt=Math.min;Lge.exports=function(e,t){return e=$wt(e),e<0?Wwt(e+t,0):Gwt(e,t)}});var Nge=b((XHt,zge)=>{var Kwt=j_(),Hwt=Dge(),Zwt=Fge();zge.exports=function(e){return function(t,r,o){var u=Kwt(t),a=Hwt(u.length),m=Zwt(o,a),x;if(e&&r!=r){for(;a>m;)if(x=u[m++],x!=x)return!0}else for(;a>m;m++)if((e||m in u)&&u[m]===r)return e||m||0;return!e&&-1}}});var Uge=b((JHt,Bge)=>{Bge.exports=!0});var Gge=b((YHt,Wge)=>{var Xwt=sf(),jge=z_(),Vge="__core-js_shared__",$ge=jge[Vge]||(jge[Vge]={});(Wge.exports=function(e,t){return $ge[e]||($ge[e]=t!==void 0?t:{})})("versions",[]).push({version:Xwt.version,mode:Uge()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var Hge=b((QHt,Kge)=>{var Jwt=0,Ywt=Math.random();Kge.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++Jwt+Ywt).toString(36))}});var Hz=b((e9t,Xge)=>{var Zge=Gge()("keys"),Qwt=Hge();Xge.exports=function(e){return Zge[e]||(Zge[e]=Qwt(e))}});var Qge=b((t9t,Yge)=>{var Jge=xq(),eSt=j_(),tSt=Nge()(!1),rSt=Hz()("IE_PROTO");Yge.exports=function(e,t){var r=eSt(e),o=0,u=[],a;for(a in r)a!=rSt&&Jge(r,a)&&u.push(a);for(;t.length>o;)Jge(r,a=t[o++])&&(~tSt(u,a)||u.push(a));return u}});var Zz=b((r9t,eye)=>{eye.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var Sq=b((i9t,tye)=>{var iSt=Qge(),nSt=Zz();tye.exports=Object.keys||function(t){return iSt(t,nSt)}});var iye=b(rye=>{rye.f=Object.getOwnPropertySymbols});var qq=b(nye=>{nye.f={}.propertyIsEnumerable});var oye=b((o9t,aye)=>{var aSt=Gz();aye.exports=function(e){return Object(aSt(e))}});var lye=b((s9t,uye)=>{"use strict";var oSt=Rc(),sye=Sq(),sSt=iye(),uSt=qq(),lSt=oye(),cSt=Wz(),Aq=Object.assign;uye.exports=!Aq||yq()(function(){var e={},t={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach(function(u){t[u]=u}),Aq({},e)[r]!=7||Object.keys(Aq({},t)).join("")!=o})?function(t,r){for(var o=lSt(t),u=arguments.length,a=1,m=sSt.f,x=uSt.f;u>a;)for(var q=cSt(arguments[a++]),T=m?sye(q).concat(m(q)):sye(q),I=T.length,k=0,B;I>k;)B=T[k++],(!oSt||x.call(q,B))&&(o[B]=q[B]);return o}:Aq});var cye=b(()=>{var Xz=U_();Xz(Xz.S+Xz.F,"Object",{assign:lye()})});var fye=b((c9t,hye)=>{cye();hye.exports=sf().Object.assign});var pye=b((f9t,dye)=>{var hSt=jz(),fSt=B_(),dSt=Sq();dye.exports=Rc()?Object.defineProperties:function(t,r){fSt(t);for(var o=dSt(r),u=o.length,a=0,m;u>a;)hSt.f(t,m=o[a++],r[m]);return t}});var gye=b((d9t,vye)=>{var mye=z_().document;vye.exports=mye&&mye.documentElement});var xye=b((p9t,_ye)=>{var pSt=B_(),mSt=pye(),yye=Zz(),vSt=Hz()("IE_PROTO"),Yz=function(){},Qz="prototype",Eq=function(){var e=Nz()("iframe"),t=yye.length,r="<",o=">",u;for(e.style.display="none",gye().appendChild(e),e.src="javascript:",u=e.contentWindow.document,u.open(),u.write(r+"script"+o+"document.F=Object"+r+"/script"+o),u.close(),Eq=u.F;t--;)delete Eq[Qz][yye[t]];return Eq()};_ye.exports=Object.create||function(t,r){var o;return t!==null?(Yz[Qz]=pSt(t),o=new Yz,Yz[Qz]=null,o[vSt]=t):o=Eq(),r===void 0?o:mSt(o,r)}});var wye=b(()=>{var bye=U_();bye(bye.S,"Object",{create:xye()})});var qye=b((g9t,Sye)=>{wye();var gSt=sf().Object;Sye.exports=function(t,r){return gSt.create(t,r)}});var Tye=b(Eye=>{var ySt=qq(),_St=Vz(),xSt=j_(),bSt=Uz(),wSt=xq(),SSt=Bz(),Aye=Object.getOwnPropertyDescriptor;Eye.f=Rc()?Aye:function(t,r){if(t=xSt(t),r=bSt(r,!0),SSt)try{return Aye(t,r)}catch(o){}if(wSt(t,r))return _St(!ySt.f.call(t,r),t[r])}});var Pye=b((_9t,Cye)=>{var qSt=N_(),ASt=B_(),Iye=function(e,t){if(ASt(e),!qSt(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};Cye.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=Fz()(Function.call,Tye().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(u,a){return Iye(u,a),t?u.__proto__=a:r(u,a),u}}({},!1):void 0),check:Iye}});var Oye=b(()=>{var Mye=U_();Mye(Mye.S,"Object",{setPrototypeOf:Pye().set})});var Rye=b((w9t,kye)=>{Oye();kye.exports=sf().Object.setPrototypeOf});var Dc=b((T9t,Iq)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var u="",a=0;a<arguments.length;a++){var m=arguments[a];m&&(u=o(u,r(m)))}return u}function r(u){if(typeof u=="string"||typeof u=="number")return u;if(typeof u!="object")return"";if(Array.isArray(u))return t.apply(null,u);if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]"))return u.toString();var a="";for(var m in u)e.call(u,m)&&u[m]&&(a=o(a,m));return a}function o(u,a){return a?u?u+" "+a:u+a:u}typeof Iq!="undefined"&&Iq.exports?(t.default=t,Iq.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var Fye=b((I9t,Lye)=>{"use strict";var ESt=function(e,t,r,o,u,a,m,x){if(!e){var q;if(t===void 0)q=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var T=[r,o,u,a,m,x],I=0;q=new Error(t.replace(/%s/g,function(){return T[I++]})),q.name="Invariant Violation"}throw q.framesToPop=1,q}};Lye.exports=ESt});var Uye=b(tN=>{"use strict";Object.defineProperty(tN,"__esModule",{value:!0});function zye(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function Nye(e){function t(r){var o=this.constructor.getDerivedStateFromProps(e,r);return o!=null?o:null}this.setState(t.bind(this))}function Bye(e,t){try{var r=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,o)}finally{this.props=r,this.state=o}}zye.__suppressDeprecationWarning=!0;Nye.__suppressDeprecationWarning=!0;Bye.__suppressDeprecationWarning=!0;function TSt(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,o=null,u=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?o="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(o="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?u="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(u="UNSAFE_componentWillUpdate"),r!==null||o!==null||u!==null){var a=e.displayName||e.name,m=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+m+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(o!==null?`
  `+o:"")+(u!==null?`
  `+u:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=zye,t.componentWillReceiveProps=Nye),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Bye;var x=t.componentDidUpdate;t.componentDidUpdate=function(T,I,k){var B=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:k;x.call(this,T,I,B)}}return e}tN.polyfill=TSt});var Vye=b((P9t,jye)=>{var ISt=Rc(),CSt=Sq(),PSt=j_(),MSt=qq().f;jye.exports=function(e){return function(t){for(var r=PSt(t),o=CSt(r),u=o.length,a=0,m=[],x;u>a;)x=o[a++],(!ISt||MSt.call(r,x))&&m.push(e?[x,r[x]]:r[x]);return m}}});var Wye=b(()=>{var $ye=U_(),OSt=Vye()(!0);$ye($ye.S,"Object",{entries:function(t){return OSt(t)}})});var Kye=b((k9t,Gye)=>{Wye();Gye.exports=sf().Object.entries});var rN=b((R9t,Hye)=>{Hye.exports=Kye()});var aN=b((Mq,Jye)=>{"use strict";Object.defineProperty(Mq,"__esModule",{value:!0});Mq.default=DSt;function DSt(e){function t(o,u,a,m,x,q){var T=m||"<<anonymous>>",I=q||a;if(u[a]==null)return o?new Error("Required "+x+" `"+I+"` was not specified "+("in `"+T+"`.")):null;for(var k=arguments.length,B=Array(k>6?k-6:0),Y=6;Y<k;Y++)B[Y-6]=arguments[Y];return e.apply(void 0,[u,a,T,x,I].concat(B))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}Jye.exports=Mq.default});var e_e=b(Er=>{"use strict";var Yi=typeof Symbol=="function"&&Symbol.for,uN=Yi?Symbol.for("react.element"):60103,lN=Yi?Symbol.for("react.portal"):60106,Oq=Yi?Symbol.for("react.fragment"):60107,kq=Yi?Symbol.for("react.strict_mode"):60108,Rq=Yi?Symbol.for("react.profiler"):60114,Dq=Yi?Symbol.for("react.provider"):60109,Lq=Yi?Symbol.for("react.context"):60110,cN=Yi?Symbol.for("react.async_mode"):60111,Fq=Yi?Symbol.for("react.concurrent_mode"):60111,zq=Yi?Symbol.for("react.forward_ref"):60112,Nq=Yi?Symbol.for("react.suspense"):60113,zSt=Yi?Symbol.for("react.suspense_list"):60120,Bq=Yi?Symbol.for("react.memo"):60115,Uq=Yi?Symbol.for("react.lazy"):60116,NSt=Yi?Symbol.for("react.block"):60121,BSt=Yi?Symbol.for("react.fundamental"):60117,USt=Yi?Symbol.for("react.responder"):60118,jSt=Yi?Symbol.for("react.scope"):60119;function ao(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case uN:switch(e=e.type,e){case cN:case Fq:case Oq:case Rq:case kq:case Nq:return e;default:switch(e=e&&e.$$typeof,e){case Lq:case zq:case Uq:case Bq:case Dq:return e;default:return t;}}case lN:return t;}}}function Qye(e){return ao(e)===Fq}Er.AsyncMode=cN;Er.ConcurrentMode=Fq;Er.ContextConsumer=Lq;Er.ContextProvider=Dq;Er.Element=uN;Er.ForwardRef=zq;Er.Fragment=Oq;Er.Lazy=Uq;Er.Memo=Bq;Er.Portal=lN;Er.Profiler=Rq;Er.StrictMode=kq;Er.Suspense=Nq;Er.isAsyncMode=function(e){return Qye(e)||ao(e)===cN};Er.isConcurrentMode=Qye;Er.isContextConsumer=function(e){return ao(e)===Lq};Er.isContextProvider=function(e){return ao(e)===Dq};Er.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===uN};Er.isForwardRef=function(e){return ao(e)===zq};Er.isFragment=function(e){return ao(e)===Oq};Er.isLazy=function(e){return ao(e)===Uq};Er.isMemo=function(e){return ao(e)===Bq};Er.isPortal=function(e){return ao(e)===lN};Er.isProfiler=function(e){return ao(e)===Rq};Er.isStrictMode=function(e){return ao(e)===kq};Er.isSuspense=function(e){return ao(e)===Nq};Er.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Oq||e===Fq||e===Rq||e===kq||e===Nq||e===zSt||typeof e=="object"&&e!==null&&(e.$$typeof===Uq||e.$$typeof===Bq||e.$$typeof===Dq||e.$$typeof===Lq||e.$$typeof===zq||e.$$typeof===BSt||e.$$typeof===USt||e.$$typeof===jSt||e.$$typeof===NSt)};Er.typeOf=ao});var r_e=b(($9t,t_e)=>{"use strict";t_e.exports=e_e()});var nm=b((jq,n_e)=>{"use strict";Object.defineProperty(jq,"__esModule",{value:!0});var VSt=Rr(),$St=i_e(VSt),WSt=r_e(),GSt=aN(),KSt=i_e(GSt);function i_e(e){return e&&e.__esModule?e:{default:e}}function HSt(e,t,r,o,u){var a=e[t];return $St.default.isValidElement(a)?new Error("Invalid "+o+" `"+u+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,WSt.isValidElementType)(a)?null:new Error("Invalid "+o+" `"+u+"` of value `"+a+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}jq.default=(0,KSt.default)(HSt);n_e.exports=jq.default});var o_e=b((G9t,a_e)=>{"use strict";var XSt=function(){};a_e.exports=XSt});var Vn=b((K9t,W_)=>{function JSt(e){return e&&e.__esModule?e:{default:e}}W_.exports=JSt,W_.exports.__esModule=!0,W_.exports.default=W_.exports});var u_e=b((Vq,s_e)=>{"use strict";Vq.__esModule=!0;Vq.default=QSt;var YSt=/-(.)/g;function QSt(e){return e.replace(YSt,function(t,r){return r.toUpperCase()})}s_e.exports=Vq.default});var hN=b(($q,l_e)=>{"use strict";var eqt=Vn();$q.__esModule=!0;$q.default=iqt;var tqt=eqt(u_e()),rqt=/^-ms-/;function iqt(e){return(0,tqt.default)(e.replace(rqt,"ms-"))}l_e.exports=$q.default});var h_e=b((Wq,c_e)=>{"use strict";Wq.__esModule=!0;Wq.default=aqt;var nqt=/([A-Z])/g;function aqt(e){return e.replace(nqt,"-$1").toLowerCase()}c_e.exports=Wq.default});var d_e=b((Gq,f_e)=>{"use strict";var oqt=Vn();Gq.__esModule=!0;Gq.default=lqt;var sqt=oqt(h_e()),uqt=/^ms-/;function lqt(e){return(0,sqt.default)(e).replace(uqt,"-ms-")}f_e.exports=Gq.default});var m_e=b((Kq,p_e)=>{"use strict";var cqt=Vn();Kq.__esModule=!0;Kq.default=pqt;var hqt=cqt(hN()),fqt=/^(top|right|bottom|left)$/,dqt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function pqt(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(o){var u=e.style;o=(0,hqt.default)(o),o=="float"&&(o="styleFloat");var a=e.currentStyle[o]||null;if(a==null&&u&&u[o]&&(a=u[o]),dqt.test(a)&&!fqt.test(o)){var m=u.left,x=e.runtimeStyle,q=x&&x.left;q&&(x.left=e.currentStyle.left),u.left=o==="fontSize"?"1em":a,a=u.pixelLeft+"px",u.left=m,q&&(x.left=q)}return a}}}p_e.exports=Kq.default});var g_e=b((Hq,v_e)=>{"use strict";Hq.__esModule=!0;Hq.default=mqt;function mqt(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}v_e.exports=Hq.default});var tu=b((G_,y_e)=>{"use strict";G_.__esModule=!0;G_.default=void 0;var vqt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);G_.default=vqt;y_e.exports=G_.default});var A_e=b(ir=>{"use strict";var gqt=Vn();ir.__esModule=!0;ir.default=ir.animationEnd=ir.animationDelay=ir.animationTiming=ir.animationDuration=ir.animationName=ir.transitionEnd=ir.transitionDuration=ir.transitionDelay=ir.transitionTiming=ir.transitionProperty=ir.transform=void 0;var yqt=gqt(tu()),Xq="transform";ir.transform=Xq;var ru,fN,x_e;ir.animationEnd=x_e;ir.transitionEnd=fN;var dN,pN,mN,vN;ir.transitionDelay=vN;ir.transitionTiming=mN;ir.transitionDuration=pN;ir.transitionProperty=dN;var b_e,w_e,S_e,q_e;ir.animationDelay=q_e;ir.animationTiming=S_e;ir.animationDuration=w_e;ir.animationName=b_e;yqt.default&&(Zq=xqt(),ru=Zq.prefix,ir.transitionEnd=fN=Zq.transitionEnd,ir.animationEnd=x_e=Zq.animationEnd,ir.transform=Xq=ru+"-"+Xq,ir.transitionProperty=dN=ru+"-transition-property",ir.transitionDuration=pN=ru+"-transition-duration",ir.transitionDelay=vN=ru+"-transition-delay",ir.transitionTiming=mN=ru+"-transition-timing-function",ir.animationName=b_e=ru+"-animation-name",ir.animationDuration=w_e=ru+"-animation-duration",ir.animationTiming=S_e=ru+"-animation-delay",ir.animationDelay=q_e=ru+"-animation-timing-function");var Zq,_qt={transform:Xq,end:fN,property:dN,timing:mN,delay:vN,duration:pN};ir.default=_qt;function xqt(){for(var e=document.createElement("div").style,t={O:function(T){return"o"+T.toLowerCase()},Moz:function(T){return T.toLowerCase()},Webkit:function(T){return"webkit"+T},ms:function(T){return"MS"+T}},r=Object.keys(t),o,u,a="",m=0;m<r.length;m++){var x=r[m];if(x+"TransitionProperty"in e){a="-"+x.toLowerCase(),o=t[x]("TransitionEnd"),u=t[x]("AnimationEnd");break}}return!o&&"transitionProperty"in e&&(o="transitionend"),!u&&"animationName"in e&&(u="animationend"),e=null,{animationEnd:u,transitionEnd:o,prefix:a}}});var T_e=b((Jq,E_e)=>{"use strict";Jq.__esModule=!0;Jq.default=wqt;var bqt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function wqt(e){return!!(e&&bqt.test(e))}E_e.exports=Jq.default});var C_e=b((Yq,I_e)=>{"use strict";var K_=Vn();Yq.__esModule=!0;Yq.default=Iqt;var Sqt=K_(hN()),gN=K_(d_e()),qqt=K_(m_e()),Aqt=K_(g_e()),Eqt=A_e(),Tqt=K_(T_e());function Iqt(e,t,r){var o="",u="",a=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,Sqt.default)(t)]||(0,qqt.default)(e).getPropertyValue((0,gN.default)(t));(a={})[t]=r}Object.keys(a).forEach(function(m){var x=a[m];!x&&x!==0?(0,Aqt.default)(e,(0,gN.default)(m)):(0,Tqt.default)(m)?u+=m+"("+x+") ":o+=(0,gN.default)(m)+": "+x+";"}),u&&(o+=Eqt.transform+": "+u+";"),e.style.cssText+=";"+o}I_e.exports=Yq.default});var P_e=b(am=>{"use strict";am.__esModule=!0;am.classNamesShape=am.timeoutsShape=void 0;var Z9t=Cqt(bi());function Cqt(e){return e&&e.__esModule?e:{default:e}}var Pqt=null;am.timeoutsShape=Pqt;var Mqt=null;am.classNamesShape=Mqt});var O_e=b(La=>{"use strict";La.__esModule=!0;La.default=La.EXITING=La.ENTERED=La.ENTERING=La.EXITED=La.UNMOUNTED=void 0;var Oqt=Dqt(bi()),yN=M_e(Rr()),kqt=M_e(Iu()),Rqt=Uye(),J9t=P_e();function M_e(e){return e&&e.__esModule?e:{default:e}}function Dqt(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}}return t.default=e,t}function Lqt(e,t){if(e==null)return{};var r={},o=Object.keys(e),u,a;for(a=0;a<o.length;a++)u=o[a],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function Fqt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var H_="unmounted";La.UNMOUNTED=H_;var uf="exited";La.EXITED=uf;var lf="entering";La.ENTERING=lf;var sm="entered";La.ENTERED=sm;var _N="exiting";La.EXITING=_N;var iu=function(e){Fqt(t,e);function t(o,u){var a;a=e.call(this,o,u)||this;var m=u.transitionGroup,x=m&&!m.isMounting?o.enter:o.appear,q;return a.appearStatus=null,o.in?x?(q=uf,a.appearStatus=lf):q=sm:o.unmountOnExit||o.mountOnEnter?q=H_:q=uf,a.state={status:q},a.nextCallback=null,a}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(u,a){var m=u.in;return m&&a.status===H_?{status:uf}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(u){var a=null;if(u!==this.props){var m=this.state.status;this.props.in?m!==lf&&m!==sm&&(a=lf):(m===lf||m===sm)&&(a=_N)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var u=this.props.timeout,a,m,x;return a=m=x=u,u!=null&&typeof u!="number"&&(a=u.exit,m=u.enter,x=u.appear!==void 0?u.appear:m),{exit:a,enter:m,appear:x}},r.updateStatus=function(u,a){if(u===void 0&&(u=!1),a!==null){this.cancelNextCallback();var m=kqt.default.findDOMNode(this);a===lf?this.performEnter(m,u):this.performExit(m)}else this.props.unmountOnExit&&this.state.status===uf&&this.setState({status:H_})},r.performEnter=function(u,a){var m=this,x=this.props.enter,q=this.context.transitionGroup?this.context.transitionGroup.isMounting:a,T=this.getTimeouts(),I=q?T.appear:T.enter;if(!a&&!x){this.safeSetState({status:sm},function(){m.props.onEntered(u)});return}this.props.onEnter(u,q),this.safeSetState({status:lf},function(){m.props.onEntering(u,q),m.onTransitionEnd(u,I,function(){m.safeSetState({status:sm},function(){m.props.onEntered(u,q)})})})},r.performExit=function(u){var a=this,m=this.props.exit,x=this.getTimeouts();if(!m){this.safeSetState({status:uf},function(){a.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:_N},function(){a.props.onExiting(u),a.onTransitionEnd(u,x.exit,function(){a.safeSetState({status:uf},function(){a.props.onExited(u)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(u,a){a=this.setNextCallback(a),this.setState(u,a)},r.setNextCallback=function(u){var a=this,m=!0;return this.nextCallback=function(x){m&&(m=!1,a.nextCallback=null,u(x))},this.nextCallback.cancel=function(){m=!1},this.nextCallback},r.onTransitionEnd=function(u,a,m){this.setNextCallback(m);var x=a==null&&!this.props.addEndListener;if(!u||x){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(u,this.nextCallback),a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var u=this.state.status;if(u===H_)return null;var a=this.props,m=a.children,x=Lqt(a,["children"]);if(delete x.in,delete x.mountOnEnter,delete x.unmountOnExit,delete x.appear,delete x.enter,delete x.exit,delete x.timeout,delete x.addEndListener,delete x.onEnter,delete x.onEntering,delete x.onEntered,delete x.onExit,delete x.onExiting,delete x.onExited,typeof m=="function")return m(u,x);var q=yN.default.Children.only(m);return yN.default.cloneElement(q,x)},t}(yN.default.Component);iu.contextTypes={transitionGroup:Oqt.object};iu.childContextTypes={transitionGroup:function(){}};iu.propTypes={};function om(){}iu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:om,onEntering:om,onEntered:om,onExit:om,onExiting:om,onExited:om};iu.UNMOUNTED=0;iu.EXITED=1;iu.ENTERING=2;iu.ENTERED=3;iu.EXITING=4;var zqt=(0,Rqt.polyfill)(iu);La.default=zqt});var Z_=b((Qq,k_e)=>{"use strict";Qq.__esModule=!0;Qq.default=Nqt;function Nqt(e){return e&&e.ownerDocument||document}k_e.exports=Qq.default});var D_e=b((eA,R_e)=>{"use strict";var Bqt=Vn();eA.__esModule=!0;eA.default=jqt;var Uqt=Bqt(Z_());function jqt(e){e===void 0&&(e=(0,Uqt.default)());try{return e.activeElement}catch(t){}}R_e.exports=eA.default});var xN=b((X_,F_e)=>{"use strict";var Vqt=Vn();X_.__esModule=!0;X_.default=void 0;var $qt=Vqt(tu()),Wqt=function(){return $qt.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):L_e(e,t)}:L_e}();X_.default=Wqt;function L_e(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}F_e.exports=X_.default});var iA=b((J_,U_e)=>{"use strict";var Zqt=Vn();J_.__esModule=!0;J_.default=void 0;var Xqt=Zqt(tu()),B_e=function(){};Xqt.default&&(B_e=function(){if(document.addEventListener)return function(e,t,r,o){return e.addEventListener(t,r,o||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(o){o=o||window.event,o.target=o.target||o.srcElement,o.currentTarget=e,r.call(e,o)})}}());var Jqt=B_e;J_.default=Jqt;U_e.exports=J_.default});var nA=b((Y_,V_e)=>{"use strict";var Yqt=Vn();Y_.__esModule=!0;Y_.default=void 0;var Qqt=Yqt(tu()),j_e=function(){};Qqt.default&&(j_e=function(){if(document.addEventListener)return function(e,t,r,o){return e.removeEventListener(t,r,o||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var eAt=j_e;Y_.default=eAt;V_e.exports=Y_.default});var W_e=b((aA,$_e)=>{"use strict";aA.__esModule=!0;aA.default=rAt;var tAt=/^[\w-]*$/,qN=Function.prototype.bind.call(Function.prototype.call,[].slice);function rAt(e,t){var r=t[0]==="#",o=t[0]===".",u=r||o?t.slice(1):t,a=tAt.test(u),m;return a?r?(e=e.getElementById?e:document,(m=e.getElementById(u))?[m]:[]):e.getElementsByClassName&&o?qN(e.getElementsByClassName(u)):qN(e.getElementsByTagName(t)):qN(e.querySelectorAll(t))}$_e.exports=aA.default});var H_e=b((oA,K_e)=>{"use strict";var G_e=Vn();oA.__esModule=!0;oA.default=aAt;var iAt=G_e(xN()),nAt=G_e(W_e());function aAt(e,t){return function(o){var u=o.currentTarget,a=o.target,m=(0,nAt.default)(u,e);m.some(function(x){return(0,iAt.default)(x,a)})&&t.call(this,o)}}K_e.exports=oA.default});var J_e=b((Q_,X_e)=>{"use strict";var AN=Vn();Q_.__esModule=!0;Q_.default=void 0;var oAt=AN(tu()),sAt=AN(iA()),uAt=AN(nA()),Z_e=function(){};oAt.default&&(Z_e=function(t,r,o,u){return(0,sAt.default)(t,r,o,u),function(){(0,uAt.default)(t,r,o,u)}});var lAt=Z_e;Q_.default=lAt;X_e.exports=Q_.default});var r0e=b(Lc=>{"use strict";var sA=Vn();Lc.__esModule=!0;Lc.default=void 0;var Y_e=sA(iA());Lc.on=Y_e.default;var Q_e=sA(nA());Lc.off=Q_e.default;var e0e=sA(H_e());Lc.filter=e0e.default;var t0e=sA(J_e());Lc.listen=t0e.default;var cAt={on:Y_e.default,off:Q_e.default,filter:e0e.default,listen:t0e.default};Lc.default=cAt});var EN=b((lA,i0e)=>{"use strict";var hAt=Vn();lA.__esModule=!0;lA.default=dAt;var fAt=hAt(tu()),uA;function dAt(e){if((!uA&&uA!==0||e)&&fAt.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),uA=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return uA}i0e.exports=lA.default});var hA=b((cA,a0e)=>{"use strict";Object.defineProperty(cA,"__esModule",{value:!0});var pAt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mAt=Rr(),vAt=n0e(mAt),gAt=aN(),yAt=n0e(gAt);function n0e(e){return e&&e.__esModule?e:{default:e}}function _At(e,t,r,o,u){var a=e[t],m=typeof a=="undefined"?"undefined":pAt(a);return vAt.default.isValidElement(a)?new Error("Invalid "+o+" `"+u+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(m!=="object"||typeof a.render!="function")&&a.nodeType!==1?new Error("Invalid "+o+" `"+u+"` of value `"+a+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}cA.default=(0,yAt.default)(_At);a0e.exports=cA.default});var l0e=b((aZt,u0e)=>{"use strict";var xAt=!1,s0e=function(){};xAt&&(o0e=function(t,r){var o=arguments.length;r=new Array(o>1?o-1:0);for(var u=1;u<o;u++)r[u-1]=arguments[u];var a=0,m="Warning: "+t.replace(/%s/g,function(){return r[a++]});typeof console!="undefined"&&console.error(m);try{throw new Error(m)}catch(x){}},s0e=function(e,t,r){var o=arguments.length;r=new Array(o>2?o-2:0);for(var u=2;u<o;u++)r[u-2]=arguments[u];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||o0e.apply(null,[t].concat(r))});var o0e;u0e.exports=s0e});var f0e=b((fA,h0e)=>{"use strict";Object.defineProperty(fA,"__esModule",{value:!0});fA.default=c0e;var bAt=l0e(),wAt=SAt(bAt);function SAt(e){return e&&e.__esModule?e:{default:e}}var TN={};function c0e(e,t){return function(o,u,a,m,x){var q=a||"<<anonymous>>",T=x||u;if(o[u]!=null){var I=a+"."+u;(0,wAt.default)(TN[I],"The "+m+" `"+T+"` of "+("`"+q+"` is deprecated. "+t+".")),TN[I]=!0}for(var k=arguments.length,B=Array(k>5?k-5:0),Y=5;Y<k;Y++)B[Y-5]=arguments[Y];return e.apply(void 0,[o,u,a,m,x].concat(B))}}function qAt(){TN={}}c0e._resetWarned=qAt;h0e.exports=fA.default});var IN=b((dA,d0e)=>{"use strict";dA.__esModule=!0;dA.default=AAt;function AAt(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}d0e.exports=dA.default});var m0e=b((pA,p0e)=>{"use strict";var EAt=Vn();pA.__esModule=!0;pA.default=IAt;var TAt=EAt(IN());function IAt(e,t){e.classList?e.classList.add(t):(0,TAt.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}p0e.exports=pA.default});var y0e=b((oZt,g0e)=>{"use strict";function v0e(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}g0e.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=v0e(t.className,r):t.setAttribute("class",v0e(t.className&&t.className.baseVal||"",r))}});var w0e=b(cf=>{"use strict";var CN=Vn();cf.__esModule=!0;cf.default=void 0;var _0e=CN(m0e());cf.addClass=_0e.default;var x0e=CN(y0e());cf.removeClass=x0e.default;var b0e=CN(IN());cf.hasClass=b0e.default;var CAt={addClass:_0e.default,removeClass:x0e.default,hasClass:b0e.default};cf.default=CAt});var q0e=b((mA,S0e)=>{"use strict";mA.__esModule=!0;mA.default=PAt;function PAt(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}S0e.exports=mA.default});var PN=b((vA,T0e)=>{"use strict";vA.__esModule=!0;vA.default=LAt;var MAt=q0e(),A0e=E0e(MAt),OAt=Z_(),kAt=E0e(OAt);function E0e(e){return e&&e.__esModule?e:{default:e}}function RAt(e){return e&&e.tagName.toLowerCase()==="body"}function DAt(e){var t=(0,kAt.default)(e),r=(0,A0e.default)(t),o=r.innerWidth;if(!o){var u=t.documentElement.getBoundingClientRect();o=u.right-Math.abs(u.left)}return t.body.clientWidth<o}function LAt(e){var t=(0,A0e.default)(e);return t||RAt(e)?DAt(e):e.scrollHeight>e.clientHeight}T0e.exports=vA.default});var C0e=b(e0=>{"use strict";e0.__esModule=!0;e0.ariaHidden=MN;e0.hideSiblings=NAt;e0.showSiblings=BAt;var FAt=["template","script","style"],zAt=function(t){var r=t.nodeType,o=t.tagName;return r===1&&FAt.indexOf(o.toLowerCase())===-1},I0e=function(t,r,o){r=[].concat(r),[].forEach.call(t.children,function(u){r.indexOf(u)===-1&&zAt(u)&&o(u)})};function MN(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function NAt(e,t){I0e(e,t,function(r){return MN(!0,r)})}function BAt(e,t){I0e(e,t,function(r){return MN(!1,r)})}});var k0e=b((yA,O0e)=>{"use strict";yA.__esModule=!0;var UAt=w0e(),P0e=gA(UAt),jAt=C_e(),M0e=gA(jAt),VAt=EN(),$At=gA(VAt),WAt=PN(),GAt=gA(WAt),ON=C0e();function gA(e){return e&&e.__esModule?e:{default:e}}function KAt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HAt(e,t){var r=-1;return e.some(function(o,u){if(t(o,u))return r=u,!0}),r}function ZAt(e,t){return HAt(e,function(r){return r.modals.indexOf(t)!==-1})}function XAt(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,M0e.default)(t,"paddingRight")||0,10)+(0,$At.default)()+"px"),(0,M0e.default)(t,r)}function JAt(e,t){var r=e.style;Object.keys(r).forEach(function(o){return t.style[o]=r[o]})}var YAt=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=r.hideSiblingNodes,u=o===void 0?!0:o,a=r.handleContainerOverflow,m=a===void 0?!0:a;KAt(this,e),this.add=function(x,q,T){var I=t.modals.indexOf(x),k=t.containers.indexOf(q);if(I!==-1)return I;if(I=t.modals.length,t.modals.push(x),t.hideSiblingNodes&&(0,ON.hideSiblings)(q,x.modalNode),k!==-1)return t.data[k].modals.push(x),I;var B={modals:[x],classes:T?T.split(/\s+/):[],overflowing:(0,GAt.default)(q)};return t.handleContainerOverflow&&XAt(B,q),B.classes.forEach(P0e.default.addClass.bind(null,q)),t.containers.push(q),t.data.push(B),I},this.remove=function(x){var q=t.modals.indexOf(x);if(q!==-1){var T=ZAt(t.data,x),I=t.data[T],k=t.containers[T];I.modals.splice(I.modals.indexOf(x),1),t.modals.splice(q,1),I.modals.length===0?(I.classes.forEach(P0e.default.removeClass.bind(null,k)),t.handleContainerOverflow&&JAt(I,k),t.hideSiblingNodes&&(0,ON.showSiblings)(k,x.modalNode),t.containers.splice(T,1),t.data.splice(T,1)):t.hideSiblingNodes&&(0,ON.ariaHidden)(!1,I.modals[I.modals.length-1].modalNode)}},this.isTopModal=function(x){return!!t.modals.length&&t.modals[t.modals.length-1]===x},this.hideSiblingNodes=u,this.handleContainerOverflow=m,this.modals=[],this.containers=[],this.data=[]};yA.default=YAt;O0e.exports=yA.default});var xA=b((_A,R0e)=>{"use strict";_A.__esModule=!0;_A.default=rEt;var QAt=Iu(),eEt=tEt(QAt);function tEt(e){return e&&e.__esModule?e:{default:e}}function rEt(e,t){return e=typeof e=="function"?e():e,eEt.default.findDOMNode(e)||t}R0e.exports=_A.default});var wA=b((bA,L0e)=>{"use strict";bA.__esModule=!0;bA.default=function(e){return(0,oEt.default)(nEt.default.findDOMNode(e))};var iEt=Iu(),nEt=D0e(iEt),aEt=Z_(),oEt=D0e(aEt);function D0e(e){return e&&e.__esModule?e:{default:e}}L0e.exports=bA.default});var V0e=b((SA,j0e)=>{"use strict";SA.__esModule=!0;var sEt=bi(),kN=lm(sEt),uEt=hA(),lEt=lm(uEt),cEt=Rr(),F0e=lm(cEt),hEt=Iu(),z0e=lm(hEt),fEt=xA(),N0e=lm(fEt),dEt=wA(),B0e=lm(dEt);function lm(e){return e&&e.__esModule?e:{default:e}}function pEt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U0e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mEt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var RN=function(e){mEt(t,e);function t(){var r,o,u;pEt(this,t);for(var a=arguments.length,m=Array(a),x=0;x<a;x++)m[x]=arguments[x];return u=(r=(o=U0e(this,e.call.apply(e,[this].concat(m))),o),o._mountOverlayTarget=function(){o._overlayTarget||(o._overlayTarget=document.createElement("div"),o._portalContainerNode=(0,N0e.default)(o.props.container,(0,B0e.default)(o).body),o._portalContainerNode.appendChild(o._overlayTarget))},o._unmountOverlayTarget=function(){o._overlayTarget&&(o._portalContainerNode.removeChild(o._overlayTarget),o._overlayTarget=null),o._portalContainerNode=null},o._renderOverlay=function(){var q=o.props.children?F0e.default.Children.only(o.props.children):null;if(q!==null){o._mountOverlayTarget();var T=!o._overlayInstance;o._overlayInstance=z0e.default.unstable_renderSubtreeIntoContainer(o,q,o._overlayTarget,function(){T&&o.props.onRendered&&o.props.onRendered()})}else o._unrenderOverlay(),o._unmountOverlayTarget()},o._unrenderOverlay=function(){o._overlayTarget&&(z0e.default.unmountComponentAtNode(o._overlayTarget),o._overlayInstance=null)},o.getMountNode=function(){return o._overlayTarget},r),U0e(o,u)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(o){this._overlayTarget&&o.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,N0e.default)(o.container,(0,B0e.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(F0e.default.Component);RN.displayName="Portal";RN.propTypes={container:kN.default.oneOfType([lEt.default,kN.default.func]),onRendered:kN.default.func};SA.default=RN;j0e.exports=SA.default});var G0e=b((qA,W0e)=>{"use strict";qA.__esModule=!0;var vEt=tu(),gEt=Fc(vEt),yEt=bi(),DN=Fc(yEt),_Et=hA(),xEt=Fc(_Et),bEt=Rr(),wEt=Fc(bEt),SEt=Iu(),LN=Fc(SEt),qEt=xA(),AEt=Fc(qEt),EEt=wA(),TEt=Fc(EEt),IEt=V0e(),CEt=Fc(IEt);function Fc(e){return e&&e.__esModule?e:{default:e}}function PEt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $0e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function MEt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var FN=function(e){MEt(t,e);function t(){var r,o,u;PEt(this,t);for(var a=arguments.length,m=Array(a),x=0;x<a;x++)m[x]=arguments[x];return u=(r=(o=$0e(this,e.call.apply(e,[this].concat(m))),o),o.getMountNode=function(){return o._portalContainerNode},r),$0e(o,u)}return t.prototype.UNSAFE_componentWillMount=function(){if(gEt.default){var o=this.props.container;typeof o=="function"&&(o=o()),!(o&&!LN.default.findDOMNode(o))&&this.setContainer(o)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(o){o.container!==this.props.container&&this.setContainer(o.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(o){this._portalContainerNode=(0,AEt.default)(o,(0,TEt.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?LN.default.createPortal(this.props.children,this._portalContainerNode):null},t}(wEt.default.Component);FN.displayName="Portal";FN.propTypes={container:DN.default.oneOfType([xEt.default,DN.default.func]),onRendered:DN.default.func};qA.default=LN.default.createPortal?FN:CEt.default;W0e.exports=qA.default});var X0e=b((AA,Z0e)=>{"use strict";AA.__esModule=!0;var OEt=bi(),kEt=K0e(OEt),REt=Rr(),DEt=K0e(REt);function K0e(e){return e&&e.__esModule?e:{default:e}}function LEt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FEt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function zEt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var NEt={children:kEt.default.node},H0e=function(e){zEt(t,e);function t(){return LEt(this,t),FEt(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(DEt.default.Component);H0e.propTypes=NEt;AA.default=H0e;Z0e.exports=AA.default});var Q0e=b((EA,Y0e)=>{"use strict";EA.__esModule=!0;EA.default=function(e,t,r,o){return(0,UEt.default)(e,t,r,o),{remove:function(){(0,VEt.default)(e,t,r,o)}}};var BEt=iA(),UEt=J0e(BEt),jEt=nA(),VEt=J0e(jEt);function J0e(e){return e&&e.__esModule?e:{default:e}}Y0e.exports=EA.default});var txe=b((TA,exe)=>{"use strict";TA.__esModule=!0;TA.default=$Et;function $Et(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}exe.exports=TA.default});var hxe=b((CA,cxe)=>{"use strict";CA.__esModule=!0;var axe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},WEt=D_e(),zN=wn(WEt),GEt=xN(),oxe=wn(GEt),KEt=tu(),HEt=wn(KEt),ZEt=bi(),Vr=wn(ZEt),XEt=hA(),JEt=wn(XEt),YEt=f0e(),QEt=wn(YEt),eTt=nm(),rxe=wn(eTt),sxe=Rr(),zc=wn(sxe),tTt=Iu(),rTt=wn(tTt),iTt=o_e(),nTt=wn(iTt),aTt=k0e(),uxe=wn(aTt),oTt=G0e(),lxe=wn(oTt),sTt=X0e(),uTt=wn(sTt),lTt=Q0e(),ixe=wn(lTt),cTt=txe(),hTt=wn(cTt),fTt=xA(),dTt=wn(fTt),pTt=wA(),NN=wn(pTt);function wn(e){return e&&e.__esModule?e:{default:e}}function mTt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nxe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function vTt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gTt=new uxe.default,IA=function(e){vTt(t,e);function t(){var r,o,u;mTt(this,t);for(var a=arguments.length,m=Array(a),x=0;x<a;x++)m[x]=arguments[x];return u=(r=(o=nxe(this,e.call.apply(e,[this].concat(m))),o),yTt.call(o),r),nxe(o,u)}return t.prototype.omitProps=function(o,u){var a=Object.keys(o),m={};return a.map(function(x){Object.prototype.hasOwnProperty.call(u,x)||(m[x]=o[x])}),m},t.prototype.render=function(){var o=this.props,u=o.show,a=o.container,m=o.children,x=o.transition,q=o.backdrop,T=o.className,I=o.style,k=o.onExit,B=o.onExiting,Y=o.onEnter,de=o.onEntering,pe=o.onEntered,Z=zc.default.Children.only(m),H=this.omitProps(this.props,t.propTypes),J=u||x&&!this.state.exited;if(!J)return null;var ve=Z.props,be=ve.role,Le=ve.tabIndex;return(be===void 0||Le===void 0)&&(Z=(0,sxe.cloneElement)(Z,{role:be===void 0?"document":be,tabIndex:Le==null?"-1":Le})),x&&(Z=zc.default.createElement(x,{appear:!0,unmountOnExit:!0,in:u,onExit:k,onExiting:B,onExited:this.handleHidden,onEnter:Y,onEntering:de,onEntered:pe},Z)),zc.default.createElement(lxe.default,{ref:this.setMountNode,container:a,onRendered:this.onPortalRendered},zc.default.createElement("div",axe({ref:this.setModalNodeRef,role:be||"dialog"},H,{style:I,className:T}),q&&this.renderBackdrop(),zc.default.createElement(uTt.default,{ref:this.setDialogRef},Z)))},t.prototype.UNSAFE_componentWillReceiveProps=function(o){o.show?this.setState({exited:!1}):o.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(o){!this.props.show&&o.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(o){var u=this.props.transition;o.show&&!this.props.show&&!u?this.onHide():!o.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var o=this.props,u=o.show,a=o.transition;this._isMounted=!1,(u||a&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var o=this.getDialogElement(),u=(0,zN.default)((0,NN.default)(this));o&&!(0,oxe.default)(o,u)&&(this.lastFocus=u,o.hasAttribute("tabIndex")||((0,nTt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),o.setAttribute("tabIndex",-1)),o.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return rTt.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(zc.default.Component);IA.propTypes=axe({},lxe.default.propTypes,{show:Vr.default.bool,container:Vr.default.oneOfType([JEt.default,Vr.default.func]),onShow:Vr.default.func,onHide:Vr.default.func,backdrop:Vr.default.oneOfType([Vr.default.bool,Vr.default.oneOf(["static"])]),renderBackdrop:Vr.default.func,onEscapeKeyDown:Vr.default.func,onEscapeKeyUp:(0,QEt.default)(Vr.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Vr.default.func,backdropStyle:Vr.default.object,backdropClassName:Vr.default.string,containerClassName:Vr.default.string,keyboard:Vr.default.bool,transition:rxe.default,backdropTransition:rxe.default,autoFocus:Vr.default.bool,enforceFocus:Vr.default.bool,restoreFocus:Vr.default.bool,onEnter:Vr.default.func,onEntering:Vr.default.func,onEntered:Vr.default.func,onExit:Vr.default.func,onExiting:Vr.default.func,onExited:Vr.default.func,manager:Vr.default.object.isRequired});IA.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:gTt,renderBackdrop:function(t){return zc.default.createElement("div",t)}};var yTt=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,o=r.backdropStyle,u=r.backdropClassName,a=r.renderBackdrop,m=r.backdropTransition,x=function(I){return t.backdrop=I},q=a({ref:x,style:o,className:u,onClick:t.handleBackdropClick});return m&&(q=zc.default.createElement(m,{appear:!0,in:t.props.show},q)),q},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,NN.default)(t),o=(0,dTt.default)(t.props.container,r.body);t.props.manager.add(t,o,t.props.containerClassName),t._onDocumentKeydownListener=(0,ixe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,ixe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,hTt.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){HEt.default&&(t.lastFocus=(0,zN.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),o=(0,zN.default)((0,NN.default)(t));r&&!(0,oxe.default)(r,o)&&r.focus()}}};IA.Manager=uxe.default;CA.default=IA;cxe.exports=CA.default});var Lxe=b((IXt,Dxe)=>{var DTt="Expected a function",kxe=NaN,LTt="[object Symbol]",FTt=/^\s+|\s+$/g,zTt=/^[-+]0x[0-9a-f]+$/i,NTt=/^0b[01]+$/i,BTt=/^0o[0-7]+$/i,UTt=parseInt,jTt=typeof global=="object"&&global&&global.Object===Object&&global,VTt=typeof self=="object"&&self&&self.Object===Object&&self,$Tt=jTt||VTt||Function("return this")(),WTt=Object.prototype,GTt=WTt.toString,KTt=Math.max,HTt=Math.min,JN=function(){return $Tt.Date.now()};function ZTt(e,t,r){var o,u,a,m,x,q,T=0,I=!1,k=!1,B=!0;if(typeof e!="function")throw new TypeError(DTt);t=Rxe(t)||0,YN(r)&&(I=!!r.leading,k="maxWait"in r,a=k?KTt(Rxe(r.maxWait)||0,t):a,B="trailing"in r?!!r.trailing:B);function Y(Oe){var Ze=o,ft=u;return o=u=void 0,T=Oe,m=e.apply(ft,Ze),m}function de(Oe){return T=Oe,x=setTimeout(H,t),I?Y(Oe):m}function pe(Oe){var Ze=Oe-q,ft=Oe-T,He=t-Ze;return k?HTt(He,a-ft):He}function Z(Oe){var Ze=Oe-q,ft=Oe-T;return q===void 0||Ze>=t||Ze<0||k&&ft>=a}function H(){var Oe=JN();if(Z(Oe))return J(Oe);x=setTimeout(H,pe(Oe))}function J(Oe){return x=void 0,B&&o?Y(Oe):(o=u=void 0,m)}function ve(){x!==void 0&&clearTimeout(x),T=0,o=q=u=x=void 0}function be(){return x===void 0?m:J(JN())}function Le(){var Oe=JN(),Ze=Z(Oe);if(o=arguments,u=this,q=Oe,Ze){if(x===void 0)return de(q);if(k)return x=setTimeout(H,t),Y(q)}return x===void 0&&(x=setTimeout(H,t)),m}return Le.cancel=ve,Le.flush=be,Le}function YN(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function XTt(e){return!!e&&typeof e=="object"}function JTt(e){return typeof e=="symbol"||XTt(e)&&GTt.call(e)==LTt}function Rxe(e){if(typeof e=="number")return e;if(JTt(e))return kxe;if(YN(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=YN(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(FTt,"");var r=NTt.test(e);return r||BTt.test(e)?UTt(e.slice(2),r?2:8):zTt.test(e)?kxe:+e}Dxe.exports=ZTt});var tIt={};B1e(tIt,{SettingsProvider:()=>QTt,renderApp:()=>eIt});var Bxe=yt(Rr(),1),Uxe=yt(Iu(),1),eJt=yt(ome(),1);var df=yt(Rr(),1);var Fbt={AE:"ae",AK:"ak",CM:"cm",GL:"gl",MB:"mb",MTB:"mtb",TK:"tk",TKX:"tkx"};function Jp(){return{allow_download:!0,default_crs:null,description:"",license:"CC-BY-SA 4.0",link_zoomify:null,link_thumb_small:null,link_thumb_mid:null,map_type:Fbt.AK,map_scale:25e3,measures:null,owner:null,permalink:null,ppn:null,technic:null,time_of_publication:"1899-01-01T00:00:00",title:"",title_serie:null,title_short:"",type:null}}var kt=yt(Rr(),1);var na=yt(Rr(),1);var O_=e=>e.type==="checkbox",af=e=>e instanceof Date,aa=e=>e==null,gme=e=>typeof e=="object",xi=e=>!aa(e)&&!Array.isArray(e)&&gme(e)&&!af(e),zbt=e=>xi(e)&&e.target?O_(e.target)?e.target.checked:e.target.value:e,Nbt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Bbt=(e,t)=>e.has(Nbt(t)),Ubt=e=>{let t=e.constructor&&e.constructor.prototype;return xi(t)&&t.hasOwnProperty("isPrototypeOf")},lz=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function No(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(lz&&(e instanceof Blob||e instanceof FileList))&&(r||xi(e))){if(t=r?[]:{},!r&&!Ubt(e))t=e;else for(let o in e)e.hasOwnProperty(o)&&(t[o]=No(e[o]));}else return e;return t}var oq=e=>Array.isArray(e)?e.filter(Boolean):[],_i=e=>e===void 0,_t=(e,t,r)=>{if(!t||!xi(e))return r;let o=oq(t.split(/[,[\].]+?/)).reduce((u,a)=>aa(u)?u:u[a],e);return _i(o)||o===e?_i(e[t])?r:e[t]:o},Ks=e=>typeof e=="boolean",cz=e=>/^\w*$/.test(e),yme=e=>oq(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Zr=(e,t,r)=>{let o=-1,u=cz(t)?[t]:yme(t),a=u.length,m=a-1;for(;++o<a;){let x=u[o],q=r;if(o!==m){let T=e[x];q=xi(T)||Array.isArray(T)?T:isNaN(+u[o+1])?{}:[]}if(x==="__proto__")return;e[x]=q,e=e[x]}return e},sme={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},fs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Xu={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_me=na.default.createContext(null),xme=()=>na.default.useContext(_me),bme=e=>{let o=e,{children:t}=o,r=ud(o,["children"]);return na.default.createElement(_me.Provider,{value:r},t)},jbt=(e,t,r,o=!0)=>{let u={defaultValues:t._defaultValues};for(let a in e)Object.defineProperty(u,a,{get:()=>{let m=a;return t._proxyFormState[m]!==fs.all&&(t._proxyFormState[m]=!o||fs.all),r&&(r[m]=!0),e[m]}});return u},Ma=e=>xi(e)&&!Object.keys(e).length,Vbt=(e,t,r,o)=>{r(e);let m=e,{name:u}=m,a=ud(m,["name"]);return Ma(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(x=>t[x]===(!o||fs.all))},tq=e=>Array.isArray(e)?e:[e];function $bt(e){let t=na.default.useRef(e);t.current=e,na.default.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var Zs=e=>typeof e=="string",Wbt=(e,t,r,o,u)=>Zs(e)?(o&&t.watch.add(e),_t(r,e,u)):Array.isArray(e)?e.map(a=>(o&&t.watch.add(a),_t(r,a))):(o&&(t.watchAll=!0),r);var Gbt=(e,t,r,o,u)=>t?va(at({},r[e]),{types:va(at({},r[e]&&r[e].types?r[e].types:{}),{[o]:u||!0})}):{};var ume=e=>({isOnSubmit:!e||e===fs.onSubmit,isOnBlur:e===fs.onBlur,isOnChange:e===fs.onChange,isOnAll:e===fs.all,isOnTouch:e===fs.onTouched}),lme=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length)))),M_=(e,t,r,o)=>{for(let a of r||Object.keys(e)){let m=_t(e,a);if(m){let u=m,{_f:x}=u,q=ud(u,["_f"]);if(x){if(x.refs&&x.refs[0]&&t(x.refs[0],a)&&!o)return!0;if(x.ref&&t(x.ref,x.name)&&!o)return!0;if(M_(q,t))break}else if(xi(q)&&M_(q,t))break}}},Kbt=(e,t,r)=>{let o=tq(_t(e,r));return Zr(o,"root",t[r]),Zr(e,r,o),e},hz=e=>e.type==="file",Hs=e=>typeof e=="function",iq=e=>{if(!lz)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},rq=e=>Zs(e),fz=e=>e.type==="radio",nq=e=>e instanceof RegExp,cme={value:!1,isValid:!1},hme={value:!0,isValid:!0},wme=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!_i(e[0].attributes.value)?_i(e[0].value)||e[0].value===""?hme:{value:e[0].value,isValid:!0}:hme:cme}return cme},fme={isValid:!1,value:null},Sme=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,fme):fme;function dme(e,t,r="validate"){if(rq(e)||Array.isArray(e)&&e.every(rq)||Ks(e)&&!e)return{type:r,message:rq(e)?e:"",ref:t}}var Yp=e=>xi(e)&&!nq(e)?e:{value:e,message:""},pme=(e,t,r,o,u)=>gi(void 0,null,function*(){let{ref:a,refs:m,required:x,maxLength:q,minLength:T,min:I,max:k,pattern:B,validate:Y,name:de,valueAsNumber:pe,mount:Z,disabled:H}=e._f,J=_t(t,de);if(!Z||H)return{};let ve=m?m[0]:a,be=pt=>{o&&ve.reportValidity&&(ve.setCustomValidity(Ks(pt)?"":pt||""),ve.reportValidity())},Le={},Oe=fz(a),Ze=O_(a),ft=Oe||Ze,He=(pe||hz(a))&&_i(a.value)&&_i(J)||iq(a)&&a.value===""||J===""||Array.isArray(J)&&!J.length,_r=Gbt.bind(null,de,r,Le),Lr=(pt,Lt,wr,hr=Xu.maxLength,Xr=Xu.minLength)=>{let Tr=pt?Lt:wr;Le[de]=at({type:pt?hr:Xr,message:Tr,ref:a},_r(pt?hr:Xr,Tr))};if(u?!Array.isArray(J)||!J.length:x&&(!ft&&(He||aa(J))||Ks(J)&&!J||Ze&&!wme(m).isValid||Oe&&!Sme(m).isValid)){let{value:pt,message:Lt}=rq(x)?{value:!!x,message:x}:Yp(x);if(pt&&(Le[de]=at({type:Xu.required,message:Lt,ref:ve},_r(Xu.required,Lt)),!r))return be(Lt),Le}if(!He&&(!aa(I)||!aa(k))){let pt,Lt,wr=Yp(k),hr=Yp(I);if(!aa(J)&&!isNaN(J)){let Xr=a.valueAsNumber||J&&+J;aa(wr.value)||(pt=Xr>wr.value),aa(hr.value)||(Lt=Xr<hr.value)}else{let Xr=a.valueAsDate||new Date(J),Tr=Pi=>new Date(new Date().toDateString()+" "+Pi),en=a.type=="time",si=a.type=="week";Zs(wr.value)&&J&&(pt=en?Tr(J)>Tr(wr.value):si?J>wr.value:Xr>new Date(wr.value)),Zs(hr.value)&&J&&(Lt=en?Tr(J)<Tr(hr.value):si?J<hr.value:Xr<new Date(hr.value))}if((pt||Lt)&&(Lr(!!pt,wr.message,hr.message,Xu.max,Xu.min),!r))return be(Le[de].message),Le}if((q||T)&&!He&&(Zs(J)||u&&Array.isArray(J))){let pt=Yp(q),Lt=Yp(T),wr=!aa(pt.value)&&J.length>+pt.value,hr=!aa(Lt.value)&&J.length<+Lt.value;if((wr||hr)&&(Lr(wr,pt.message,Lt.message),!r))return be(Le[de].message),Le}if(B&&!He&&Zs(J)){let{value:pt,message:Lt}=Yp(B);if(nq(pt)&&!J.match(pt)&&(Le[de]=at({type:Xu.pattern,message:Lt,ref:a},_r(Xu.pattern,Lt)),!r))return be(Lt),Le}if(Y){if(Hs(Y)){let pt=yield Y(J,t),Lt=dme(pt,ve);if(Lt&&(Le[de]=at(at({},Lt),_r(Xu.validate,Lt.message)),!r))return be(Lt.message),Le}else if(xi(Y)){let pt={};for(let Lt in Y){if(!Ma(pt)&&!r)break;let wr=dme((yield Y[Lt](J,t)),ve,Lt);wr&&(pt=at(at({},wr),_r(Lt,wr.message)),be(wr.message),r&&(Le[de]=pt))}if(!Ma(pt)&&(Le[de]=at({ref:ve},pt),!r))return Le}}return be(!0),Le});function Hbt(e,t){let r=t.slice(0,-1).length,o=0;for(;o<r;)e=_i(e)?o++:e[t[o++]];return e}function Zbt(e){for(let t in e)if(e.hasOwnProperty(t)&&!_i(e[t]))return!1;return!0}function Fi(e,t){let r=Array.isArray(t)?t:cz(t)?[t]:yme(t),o=r.length===1?e:Hbt(e,r),u=r.length-1,a=r[u];return o&&delete o[a],u!==0&&(xi(o)&&Ma(o)||Array.isArray(o)&&Zbt(o))&&Fi(e,r.slice(0,-1)),e}var az=()=>{let e=[];return{get observers(){return e},next:u=>{for(let a of e)a.next&&a.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(a=>a!==u)}}),unsubscribe:()=>{e=[]}}},uz=e=>aa(e)||!gme(e);function kc(e,t){if(uz(e)||uz(t))return e===t;if(af(e)&&af(t))return e.getTime()===t.getTime();let r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let u of r){let a=e[u];if(!o.includes(u))return!1;if(u!=="ref"){let m=t[u];if(af(a)&&af(m)||xi(a)&&xi(m)||Array.isArray(a)&&Array.isArray(m)?!kc(a,m):a!==m)return!1}}return!0}var qme=e=>e.type==="select-multiple",Xbt=e=>fz(e)||O_(e),oz=e=>iq(e)&&e.isConnected,Ame=e=>{for(let t in e)if(Hs(e[t]))return!0;return!1};function aq(e,t={}){let r=Array.isArray(e);if(xi(e)||r)for(let o in e)Array.isArray(e[o])||xi(e[o])&&!Ame(e[o])?(t[o]=Array.isArray(e[o])?[]:{},aq(e[o],t[o])):aa(e[o])||(t[o]=!0);return t}function Eme(e,t,r){let o=Array.isArray(e);if(xi(e)||o)for(let u in e)Array.isArray(e[u])||xi(e[u])&&!Ame(e[u])?_i(t)||uz(r[u])?r[u]=Array.isArray(e[u])?aq(e[u],[]):at({},aq(e[u])):Eme(e[u],aa(t)?{}:t[u],r[u]):r[u]=!kc(e[u],t[u]);return r}var C_=(e,t)=>Eme(e,t,aq(t)),Tme=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:o})=>_i(e)?e:t?e===""?NaN:e&&+e:r&&Zs(e)?new Date(e):o?o(e):e;function sz(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return hz(t)?t.files:fz(t)?Sme(e.refs).value:qme(t)?[...t.selectedOptions].map(({value:r})=>r):O_(t)?wme(e.refs).value:Tme(_i(t.value)?e.ref.value:t.value,e)}var Jbt=(e,t,r,o)=>{let u={};for(let a of e){let m=_t(t,a);m&&Zr(u,a,m._f)}return{criteriaMode:r,names:[...e],fields:u,shouldUseNativeValidation:o}},P_=e=>_i(e)?e:nq(e)?e.source:xi(e)?nq(e.value)?e.value.source:e.value:e,mme="AsyncFunction",Ybt=e=>(!e||!e.validate)&&!!(Hs(e.validate)&&e.validate.constructor.name===mme||xi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===mme)),Qbt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function vme(e,t,r){let o=_t(e,r);if(o||cz(r))return{error:o,name:r};let u=r.split(".");for(;u.length;){let a=u.join("."),m=_t(t,a),x=_t(e,a);if(m&&!Array.isArray(m)&&r!==a)return{name:r};if(x&&x.type)return{name:a,error:x};u.pop()}return{name:r}}var e1t=(e,t,r,o,u)=>u.isOnAll?!1:!r&&u.isOnTouch?!(t||e):(r?o.isOnBlur:u.isOnBlur)?!e:(r?o.isOnChange:u.isOnChange)?e:!0,t1t=(e,t)=>!oq(_t(e,t)).length&&Fi(e,t),r1t={mode:fs.onSubmit,reValidateMode:fs.onChange,shouldFocusError:!0};function i1t(e={}){let t=at(at({},r1t),e),r={submitCount:0,isDirty:!1,isLoading:Hs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},o={},u=xi(t.defaultValues)||xi(t.values)?No(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:No(u),m={action:!1,mount:!1,watch:!1},x={mount:new Set,unMount:new Set,array:new Set,watch:new Set},q,T=0,I={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},k={values:az(),array:az(),state:az()},B=ume(t.mode),Y=ume(t.reValidateMode),de=t.criteriaMode===fs.all,pe=ue=>qe=>{clearTimeout(T),T=setTimeout(ue,qe)},Z=ue=>gi(this,null,function*(){if(!t.disabled&&(I.isValid||ue)){let qe=t.resolver?Ma((yield ft()).errors):yield _r(o,!0);qe!==r.isValid&&k.state.next({isValid:qe})}}),H=(ue,qe)=>{!t.disabled&&(I.isValidating||I.validatingFields)&&((ue||Array.from(x.mount)).forEach(Ce=>{Ce&&(qe?Zr(r.validatingFields,Ce,qe):Fi(r.validatingFields,Ce))}),k.state.next({validatingFields:r.validatingFields,isValidating:!Ma(r.validatingFields)}))},J=(ue,qe=[],Ce,ut,rt=!0,Be=!0)=>{if(ut&&Ce&&!t.disabled){if(m.action=!0,Be&&Array.isArray(_t(o,ue))){let At=Ce(_t(o,ue),ut.argA,ut.argB);rt&&Zr(o,ue,At)}if(Be&&Array.isArray(_t(r.errors,ue))){let At=Ce(_t(r.errors,ue),ut.argA,ut.argB);rt&&Zr(r.errors,ue,At),t1t(r.errors,ue)}if(I.touchedFields&&Be&&Array.isArray(_t(r.touchedFields,ue))){let At=Ce(_t(r.touchedFields,ue),ut.argA,ut.argB);rt&&Zr(r.touchedFields,ue,At)}I.dirtyFields&&(r.dirtyFields=C_(u,a)),k.state.next({name:ue,isDirty:pt(ue,qe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Zr(a,ue,qe)},ve=(ue,qe)=>{Zr(r.errors,ue,qe),k.state.next({errors:r.errors})},be=ue=>{r.errors=ue,k.state.next({errors:r.errors,isValid:!1})},Le=(ue,qe,Ce,ut)=>{let rt=_t(o,ue);if(rt){let Be=_t(a,ue,_i(Ce)?_t(u,ue):Ce);_i(Be)||ut&&ut.defaultChecked||qe?Zr(a,ue,qe?Be:sz(rt._f)):hr(ue,Be),m.mount&&Z()}},Oe=(ue,qe,Ce,ut,rt)=>{let Be=!1,At=!1,Ct={name:ue};if(!t.disabled){let Pe=!!(_t(o,ue)&&_t(o,ue)._f&&_t(o,ue)._f.disabled);if(!Ce||ut){I.isDirty&&(At=r.isDirty,r.isDirty=Ct.isDirty=pt(),Be=At!==Ct.isDirty);let Qt=Pe||kc(_t(u,ue),qe);At=!!(!Pe&&_t(r.dirtyFields,ue)),Qt||Pe?Fi(r.dirtyFields,ue):Zr(r.dirtyFields,ue,!0),Ct.dirtyFields=r.dirtyFields,Be=Be||I.dirtyFields&&At!==!Qt}if(Ce){let Qt=_t(r.touchedFields,ue);Qt||(Zr(r.touchedFields,ue,Ce),Ct.touchedFields=r.touchedFields,Be=Be||I.touchedFields&&Qt!==Ce)}Be&&rt&&k.state.next(Ct)}return Be?Ct:{}},Ze=(ue,qe,Ce,ut)=>{let rt=_t(r.errors,ue),Be=I.isValid&&Ks(qe)&&r.isValid!==qe;if(e.delayError&&Ce?(q=pe(()=>ve(ue,Ce)),q(e.delayError)):(clearTimeout(T),q=null,Ce?Zr(r.errors,ue,Ce):Fi(r.errors,ue)),(Ce?!kc(rt,Ce):rt)||!Ma(ut)||Be){let At=va(at(at({},ut),Be&&Ks(qe)?{isValid:qe}:{}),{errors:r.errors,name:ue});r=at(at({},r),At),k.state.next(At)}},ft=ue=>gi(this,null,function*(){H(ue,!0);let qe=yield t.resolver(a,t.context,Jbt(ue||x.mount,o,t.criteriaMode,t.shouldUseNativeValidation));return H(ue),qe}),He=ue=>gi(this,null,function*(){let{errors:qe}=yield ft(ue);if(ue)for(let Ce of ue){let ut=_t(qe,Ce);ut?Zr(r.errors,Ce,ut):Fi(r.errors,Ce)}else r.errors=qe;return qe}),_r=(ut,rt,...Be)=>gi(this,[ut,rt,...Be],function*(ue,qe,Ce={valid:!0}){for(let Ct in ue){let Pe=ue[Ct];if(Pe){let At=Pe,{_f:Qt}=At,Ir=ud(At,["_f"]);if(Qt){let nn=x.array.has(Qt.name),an=Pe._f&&Ybt(Pe._f);an&&I.validatingFields&&H([Ct],!0);let Ne=yield pme(Pe,a,de,t.shouldUseNativeValidation&&!qe,nn);if(an&&I.validatingFields&&H([Ct]),Ne[Qt.name]&&(Ce.valid=!1,qe))break;!qe&&(_t(Ne,Qt.name)?nn?Kbt(r.errors,Ne,Qt.name):Zr(r.errors,Qt.name,Ne[Qt.name]):Fi(r.errors,Qt.name))}!Ma(Ir)&&(yield _r(Ir,qe,Ce))}}return Ce.valid}),Lr=()=>{for(let ue of x.unMount){let qe=_t(o,ue);qe&&(qe._f.refs?qe._f.refs.every(Ce=>!oz(Ce)):!oz(qe._f.ref))&&rn(ue)}x.unMount=new Set},pt=(ue,qe)=>!t.disabled&&(ue&&qe&&Zr(a,ue,qe),!kc(Vo(),u)),Lt=(ue,qe,Ce)=>Wbt(ue,x,at({},m.mount?a:_i(qe)?u:Zs(ue)?{[ue]:qe}:qe),Ce,qe),wr=ue=>oq(_t(m.mount?a:u,ue,e.shouldUnregister?_t(u,ue,[]):[])),hr=(ue,qe,Ce={})=>{let ut=_t(o,ue),rt=qe;if(ut){let Be=ut._f;Be&&(!Be.disabled&&Zr(a,ue,Tme(qe,Be)),rt=iq(Be.ref)&&aa(qe)?"":qe,qme(Be.ref)?[...Be.ref.options].forEach(At=>At.selected=rt.includes(At.value)):Be.refs?O_(Be.ref)?Be.refs.length>1?Be.refs.forEach(At=>(!At.defaultChecked||!At.disabled)&&(At.checked=Array.isArray(rt)?!!rt.find(Ct=>Ct===At.value):rt===At.value)):Be.refs[0]&&(Be.refs[0].checked=!!rt):Be.refs.forEach(At=>At.checked=At.value===rt):hz(Be.ref)?Be.ref.value="":(Be.ref.value=rt,Be.ref.type||k.values.next({name:ue,values:at({},a)})))}(Ce.shouldDirty||Ce.shouldTouch)&&Oe(ue,rt,Ce.shouldTouch,Ce.shouldDirty,!0),Ce.shouldValidate&&Pi(ue)},Xr=(ue,qe,Ce)=>{for(let ut in qe){let rt=qe[ut],Be=`${ue}.${ut}`,At=_t(o,Be);(x.array.has(ue)||xi(rt)||At&&!At._f)&&!af(rt)?Xr(Be,rt,Ce):hr(Be,rt,Ce)}},Tr=(ue,qe,Ce={})=>{let ut=_t(o,ue),rt=x.array.has(ue),Be=No(qe);Zr(a,ue,Be),rt?(k.array.next({name:ue,values:at({},a)}),(I.isDirty||I.dirtyFields)&&Ce.shouldDirty&&k.state.next({name:ue,dirtyFields:C_(u,a),isDirty:pt(ue,Be)})):ut&&!ut._f&&!aa(Be)?Xr(ue,Be,Ce):hr(ue,Be,Ce),lme(ue,x)&&k.state.next(at({},r)),k.values.next({name:m.mount?ue:void 0,values:at({},a)})},en=ue=>gi(this,null,function*(){m.mount=!0;let qe=ue.target,Ce=qe.name,ut=!0,rt=_t(o,Ce),Be=()=>qe.type?sz(rt._f):zbt(ue),At=Ct=>{ut=Number.isNaN(Ct)||af(Ct)&&isNaN(Ct.getTime())||kc(Ct,_t(a,Ce,Ct))};if(rt){let Ct,Pe,Qt=Be(),Ir=ue.type===sme.BLUR||ue.type===sme.FOCUS_OUT,nn=!Qbt(rt._f)&&!t.resolver&&!_t(r.errors,Ce)&&!rt._f.deps||e1t(Ir,_t(r.touchedFields,Ce),r.isSubmitted,Y,B),an=lme(Ce,x,Ir);Zr(a,Ce,Qt),Ir?(rt._f.onBlur&&rt._f.onBlur(ue),q&&q(0)):rt._f.onChange&&rt._f.onChange(ue);let Ne=Oe(Ce,Qt,Ir,!1),Nt=!Ma(Ne)||an;if(!Ir&&k.values.next({name:Ce,type:ue.type,values:at({},a)}),nn)return I.isValid&&(e.mode==="onBlur"?Ir&&Z():Z()),Nt&&k.state.next(at({name:Ce},an?{}:Ne));if(!Ir&&an&&k.state.next(at({},r)),t.resolver){let{errors:qt}=yield ft([Ce]);if(At(Qt),ut){let zi=vme(r.errors,o,Ce),Sn=vme(qt,o,zi.name||Ce);Ct=Sn.error,Ce=Sn.name,Pe=Ma(qt)}}else H([Ce],!0),Ct=(yield pme(rt,a,de,t.shouldUseNativeValidation))[Ce],H([Ce]),At(Qt),ut&&(Ct?Pe=!1:I.isValid&&(Pe=yield _r(o,!0)));ut&&(rt._f.deps&&Pi(rt._f.deps),Ze(Ce,Pe,Ct,Ne))}}),si=(ue,qe)=>{if(_t(r.errors,qe)&&ue.focus)return ue.focus(),1},Pi=(Ce,...ut)=>gi(this,[Ce,...ut],function*(ue,qe={}){let rt,Be,At=tq(ue);if(t.resolver){let Ct=yield He(_i(ue)?ue:At);rt=Ma(Ct),Be=ue?!At.some(Pe=>_t(Ct,Pe)):rt}else ue?(Be=(yield Promise.all(At.map(Ct=>gi(this,null,function*(){let Pe=_t(o,Ct);return yield _r(Pe&&Pe._f?{[Ct]:Pe}:Pe)})))).every(Boolean),!(!Be&&!r.isValid)&&Z()):Be=rt=yield _r(o);return k.state.next(va(at(at({},!Zs(ue)||I.isValid&&rt!==r.isValid?{}:{name:ue}),t.resolver||!ue?{isValid:rt}:{}),{errors:r.errors})),qe.shouldFocus&&!Be&&M_(o,si,ue?At:x.mount),Be}),Vo=ue=>{let qe=at({},m.mount?a:u);return _i(ue)?qe:Zs(ue)?_t(qe,ue):ue.map(Ce=>_t(qe,Ce))},Fa=(ue,qe)=>({invalid:!!_t((qe||r).errors,ue),isDirty:!!_t((qe||r).dirtyFields,ue),error:_t((qe||r).errors,ue),isValidating:!!_t(r.validatingFields,ue),isTouched:!!_t((qe||r).touchedFields,ue)}),sa=ue=>{ue&&tq(ue).forEach(qe=>Fi(r.errors,qe)),k.state.next({errors:ue?r.errors:{}})},$o=(ue,qe,Ce)=>{let ut=(_t(o,ue,{_f:{}})._f||{}).ref,Qt=_t(r.errors,ue)||{},{ref:Be,message:At,type:Ct}=Qt,Pe=ud(Qt,["ref","message","type"]);Zr(r.errors,ue,va(at(at({},Pe),qe),{ref:ut})),k.state.next({name:ue,errors:r.errors,isValid:!1}),Ce&&Ce.shouldFocus&&ut&&ut.focus&&ut.focus()},tn=(ue,qe)=>Hs(ue)?k.values.subscribe({next:Ce=>ue(Lt(void 0,qe),Ce)}):Lt(ue,qe,!0),rn=(ue,qe={})=>{for(let Ce of ue?tq(ue):x.mount)x.mount.delete(Ce),x.array.delete(Ce),qe.keepValue||(Fi(o,Ce),Fi(a,Ce)),!qe.keepError&&Fi(r.errors,Ce),!qe.keepDirty&&Fi(r.dirtyFields,Ce),!qe.keepTouched&&Fi(r.touchedFields,Ce),!qe.keepIsValidating&&Fi(r.validatingFields,Ce),!t.shouldUnregister&&!qe.keepDefaultValue&&Fi(u,Ce);k.values.next({values:at({},a)}),k.state.next(at(at({},r),qe.keepDirty?{isDirty:pt()}:{})),!qe.keepIsValid&&Z()},so=({disabled:ue,name:qe,field:Ce,fields:ut,value:rt})=>{if(Ks(ue)&&m.mount||ue){let Be=ue?void 0:_i(rt)?sz(Ce?Ce._f:_t(ut,qe)._f):rt;Zr(a,qe,Be),Oe(qe,Be,!1,!1,!0)}},za=(ue,qe={})=>{let Ce=_t(o,ue),ut=Ks(qe.disabled)||Ks(t.disabled);return Zr(o,ue,va(at({},Ce||{}),{_f:at(va(at({},Ce&&Ce._f?Ce._f:{ref:{name:ue}}),{name:ue,mount:!0}),qe)})),x.mount.add(ue),Ce?so({field:Ce,disabled:Ks(qe.disabled)?qe.disabled:t.disabled,name:ue,value:qe.value}):Le(ue,!0,qe.value),va(at(at({},ut?{disabled:qe.disabled||t.disabled}:{}),t.progressive?{required:!!qe.required,min:P_(qe.min),max:P_(qe.max),minLength:P_(qe.minLength),maxLength:P_(qe.maxLength),pattern:P_(qe.pattern)}:{}),{name:ue,onChange:en,onBlur:en,ref:rt=>{if(rt){za(ue,qe),Ce=_t(o,ue);let Be=_i(rt.value)&&rt.querySelectorAll&&rt.querySelectorAll("input,select,textarea")[0]||rt,At=Xbt(Be),Ct=Ce._f.refs||[];if(At?Ct.find(Pe=>Pe===Be):Be===Ce._f.ref)return;Zr(o,ue,{_f:at(at({},Ce._f),At?{refs:[...Ct.filter(oz),Be,...(Array.isArray(_t(u,ue))?[{}]:[])],ref:{type:Be.type,name:ue}}:{ref:Be})}),Le(ue,!1,void 0,Be)}else Ce=_t(o,ue,{}),Ce._f&&(Ce._f.mount=!1),(t.shouldUnregister||qe.shouldUnregister)&&!(Bbt(x.array,ue)&&m.action)&&x.unMount.add(ue)}})},ms=()=>t.shouldFocusError&&M_(o,si,x.mount),Na=ue=>{Ks(ue)&&(k.state.next({disabled:ue}),M_(o,(qe,Ce)=>{let ut=_t(o,Ce);ut&&(qe.disabled=ut._f.disabled||ue,Array.isArray(ut._f.refs)&&ut._f.refs.forEach(rt=>{rt.disabled=ut._f.disabled||ue}))},0,!1))},Ba=(ue,qe)=>Ce=>gi(this,null,function*(){let ut;if(Ce&&(Ce.preventDefault&&Ce.preventDefault(),Ce.persist&&Ce.persist()),t.disabled){qe&&(yield qe(at({},r.errors),Ce));return}let rt=No(a);if(k.state.next({isSubmitting:!0}),t.resolver){let{errors:Be,values:At}=yield ft();r.errors=Be,rt=At}else yield _r(o);if(Fi(r.errors,"root"),Ma(r.errors)){k.state.next({errors:{}});try{yield ue(rt,Ce)}catch(Be){ut=Be}}else qe&&(yield qe(at({},r.errors),Ce)),ms(),setTimeout(ms);if(k.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ma(r.errors)&&!ut,submitCount:r.submitCount+1,errors:r.errors}),ut)throw ut}),uo=(ue,qe={})=>{_t(o,ue)&&(_i(qe.defaultValue)?Tr(ue,No(_t(u,ue))):(Tr(ue,qe.defaultValue),Zr(u,ue,No(qe.defaultValue))),qe.keepTouched||Fi(r.touchedFields,ue),qe.keepDirty||(Fi(r.dirtyFields,ue),r.isDirty=qe.defaultValue?pt(ue,No(_t(u,ue))):pt()),qe.keepError||(Fi(r.errors,ue),I.isValid&&Z()),k.state.next(at({},r)))},Wo=(ue,qe={})=>{let Ce=ue?No(ue):u,ut=No(Ce),rt=Ma(ue),Be=rt?u:ut;if(qe.keepDefaultValues||(u=Ce),!qe.keepValues){if(qe.keepDirtyValues){let At=new Set([...x.mount,...Object.keys(C_(u,a))]);for(let Ct of Array.from(At))_t(r.dirtyFields,Ct)?Zr(Be,Ct,_t(a,Ct)):Tr(Ct,_t(Be,Ct))}else{if(lz&&_i(ue))for(let At of x.mount){let Ct=_t(o,At);if(Ct&&Ct._f){let Pe=Array.isArray(Ct._f.refs)?Ct._f.refs[0]:Ct._f.ref;if(iq(Pe)){let Qt=Pe.closest("form");if(Qt){Qt.reset();break}}}}o={}}a=e.shouldUnregister?qe.keepDefaultValues?No(u):{}:No(Be),k.array.next({values:at({},Be)}),k.values.next({values:at({},Be)})}x={mount:qe.keepDirtyValues?x.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},m.mount=!I.isValid||!!qe.keepIsValid||!!qe.keepDirtyValues,m.watch=!!e.shouldUnregister,k.state.next({submitCount:qe.keepSubmitCount?r.submitCount:0,isDirty:rt?!1:qe.keepDirty?r.isDirty:!!(qe.keepDefaultValues&&!kc(ue,u)),isSubmitted:qe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:rt?{}:qe.keepDirtyValues?qe.keepDefaultValues&&a?C_(u,a):r.dirtyFields:qe.keepDefaultValues&&ue?C_(u,ue):qe.keepDirty?r.dirtyFields:{},touchedFields:qe.keepTouched?r.touchedFields:{},errors:qe.keepErrors?r.errors:{},isSubmitSuccessful:qe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ae=(ue,qe)=>Wo(Hs(ue)?ue(a):ue,qe);return{control:{register:za,unregister:rn,getFieldState:Fa,handleSubmit:Ba,setError:$o,_executeSchema:ft,_getWatch:Lt,_getDirty:pt,_updateValid:Z,_removeUnmounted:Lr,_updateFieldArray:J,_updateDisabledField:so,_getFieldArray:wr,_reset:Wo,_resetDefaultValues:()=>Hs(t.defaultValues)&&t.defaultValues().then(ue=>{Ae(ue,t.resetOptions),k.state.next({isLoading:!1})}),_updateFormState:ue=>{r=at(at({},r),ue)},_disableForm:Na,_subjects:k,_proxyFormState:I,_setErrors:be,get _fields(){return o},get _formValues(){return a},get _state(){return m},set _state(ue){m=ue},get _defaultValues(){return u},get _names(){return x},set _names(ue){x=ue},get _formState(){return r},set _formState(ue){r=ue},get _options(){return t},set _options(ue){t=at(at({},t),ue)}},trigger:Pi,register:za,handleSubmit:Ba,watch:tn,setValue:Tr,getValues:Vo,reset:Ae,resetField:uo,clearErrors:sa,unregister:rn,setError:$o,setFocus:(ue,qe={})=>{let Ce=_t(o,ue),ut=Ce&&Ce._f;if(ut){let rt=ut.refs?ut.refs[0]:ut.ref;rt.focus&&(rt.focus(),qe.shouldSelect&&Hs(rt.select)&&rt.select())}},getFieldState:Fa}}function Ime(e={}){let t=na.default.useRef(),r=na.default.useRef(),[o,u]=na.default.useState({isDirty:!1,isValidating:!1,isLoading:Hs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Hs(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=va(at({},i1t(e)),{formState:o}));let a=t.current.control;return a._options=e,$bt({subject:a._subjects.state,next:m=>{Vbt(m,a._proxyFormState,a._updateFormState,!0)&&u(at({},a._formState))}}),na.default.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),na.default.useEffect(()=>{if(a._proxyFormState.isDirty){let m=a._getDirty();m!==o.isDirty&&a._subjects.state.next({isDirty:m})}},[a,o.isDirty]),na.default.useEffect(()=>{e.values&&!kc(e.values,r.current)?(a._reset(e.values,a._options.resetOptions),r.current=e.values,u(m=>at({},m))):a._resetDefaultValues()},[e.values,a]),na.default.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),na.default.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next(at({},a._formState))),a._removeUnmounted()}),na.default.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=jbt(o,a),t.current}var dm=yt(bi(),1);var ka=yt(Rr(),1);var Oa=yt(bi(),1);var Lme=e=>{let t={};return Object.keys(e).forEach(r=>{e[r]!==void 0&&e[r]!==null&&(r==="time_of_publication"?t[r]=`${e[r]}-01-01T00:00:00`:r==="map_scale"?t[r]=Number(e[r]):r==="allow_download"?t[r]=e[r]==="true":t[r]=e[r])}),t},Fme=(e,t)=>{let r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!0;for(let u of r)if(e[u]!==t[u])return!0;return!1},zme=(e,t)=>Object.keys(e).filter(r=>r.includes(t)).reduce((r,o)=>Object.assign(r,{error:e[o]}),{}),Ju={ok:e=>({data:e,error:null,httpErrorStatusCode:null}),error:e=>{let t=999;return e.response&&e.response.status&&(t=e.response.status),{data:null,error:e,httpErrorStatusCode:t}}};var o1t=e=>Object.keys(e).length>0,Nme=({message:e})=>ka.default.createElement("div",null,ka.default.createElement("span",{className:"glyphicon glyphicon-exclamation-sign","aria-hidden":"true"}),ka.default.createElement("span",{className:"sr-only"},"Error:"),e);Nme.propTypes={message:Oa.default.string};var Bme=e=>{let{name:t,label:r,type:o,id:u,validation:a,multiline:m,options:x}=e,{register:q,formState:{errors:T}}=xme(),I=zme(T,t),k=o1t(I);return ka.default.createElement(ka.default.Fragment,null,ka.default.createElement("div",{className:`error-label-container ${k?"show-error":""}`},ka.default.createElement("label",{htmlFor:u,className:"font-semibold capitalize body1"},r,a.required.value&&ka.default.createElement("span",{className:"required"},"*")),k&&ka.default.createElement(Nme,{message:I.error.message,key:I.error.message})),m?ka.default.createElement("textarea",at({className:"body2",name:t,id:u,rows:"6"},q(t,a))):x?ka.default.createElement("select",at({className:"body2",name:t,id:u},q(t,a)),x.map(B=>ka.default.createElement("option",{value:B.value,key:B.label},B.label))):ka.default.createElement("input",at({className:"body2",type:o,id:u},q(t,a))))};Bme.propTypes={name:Oa.default.string.isRequired,label:Oa.default.string.isRequired,type:Oa.default.string,id:Oa.default.string.isRequired,validation:Oa.default.object.isRequired,multiline:Oa.default.bool,options:Oa.default.arrayOf(Oa.default.shape({value:Oa.default.oneOfType([Oa.default.bool,Oa.default.string]),label:Oa.default.string}))};var Nn=Bme;var Js=yt(Rr(),1),Lz=yt(bi(),1);var L_=yt(jme(),1);var Zve=yt(Hve(),1);var ewt={EN:"en",DE:"de"},twt=typeof process!="undefined"&&rm(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&rm(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",pq=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),oa={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:ewt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},Yu={axiosApiInstance:null,appendSettings(e){oa=Object.assign({},oa,e)},getSettings(){return oa},getBaseMaps(){return oa.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},oa.MAPVIEW_PARAMS)},getLanguageDict(){return oa.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return oa.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},oa.TERRAIN_TILES)},getUsername(){return oa.USERNAME},isUserAuthenticated(){return oa.USER_ISAUTHENTICATED===!0},updateSettings(e){oa=e},_initAxiosApiInstance(){let e=oa.API_GEOREFERENCE_BASEURL,t=Xve(e)&&e.length===0;if(!rm(e)||t)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:e,withCredentials:!0},twt?{headers:{get:pq(),post:pq(),put:pq(),delete:pq()}}:{});this.axiosApiInstance=Zve.default.create(r)},getGeoreferenceApiClient(){return rm(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=oa.MARKER_URL;if(!rm(e))throw new Error("The marker icon url is not set.");return{id:oa.MARKER_IMAGE_ID,url:e}},getUserRole(){return oa.USER_ROLE}};var bwt=yt(oge(),1);function rm(e){return e!=null}function Xve(e){return typeof e=="string"||e instanceof String}function ur(e){let t=Yu.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}function mq(e){let{onBack:t,mapId:r}=e;return Js.default.createElement("div",{className:"upload-header"},Js.default.createElement("div",{className:"back-btn-container"},Js.default.createElement("span",{className:"glyphicon glyphicon-chevron-left"}),Js.default.createElement("button",{className:"back-btn body1",onClick:t},"Back")),r==null?Js.default.createElement("h4",null,ur("uploadmap-title")):Js.default.createElement(Js.default.Fragment,null,Js.default.createElement("h4",null,ur("uploadmap-title-update")),Js.default.createElement("span",null,"ID: ",r)))}mq.propTypes={onBack:Lz.default.func.isRequired,mapId:Lz.default.string};var Bo=yt(Rr(),1),F_=yt(bi(),1);var vq={name:"file",id:"file-upload",accept:"image/tiff"};function gq(e){let{mapMetadata:t,isPending:r,onFileSelect:o,reloadKey:u}=e,a=x=>{if(x.preventDefault(),x.target.files){let q=x.target.files[0];o(q)}};return Bo.default.createElement("div",{className:"upload-file-container"},Bo.default.createElement("div",{className:"upload-section",onClick:x=>{x.preventDefault(),x.stopPropagation(),document.getElementById(vq.id).click()}},t.link_thumb_mid!==null&&r===!1&&Bo.default.createElement("img",{src:`${t.link_thumb_mid}?${u}`,alt:"Thumbnail",className:"thumbnail-img"}),r===!0&&Bo.default.createElement("div",{className:"image-selected"},Bo.default.createElement("label",{className:"body1"},ur("uploadfile-label"))),t.link_thumb_mid===null&&r===!1&&Bo.default.createElement("div",{className:"select-image"},Bo.default.createElement("div",null,Bo.default.createElement("span",{className:"glyphicon glyphicon-picture"})),Bo.default.createElement("label",{className:"body1",htmlFor:vq.id},ur("uploadmap-upload-file")))),Bo.default.createElement("div",{className:"input-file"},Bo.default.createElement("input",{type:"file",id:vq.id,accept:vq.accept,onChange:a})))}gq.propTypes={isPending:F_.default.bool,mapMetadata:F_.default.object,onFileSelect:F_.default.func,reloadKey:F_.default.number};var Bn={description:{name:"description",label:"description",multiline:!0,id:"description",validation:{required:{value:!1,message:"required"}}},map_type:{name:"map_type",label:"map_type",id:"map_type",validation:{required:{value:!0,message:"required"}},options:[{label:"\xC4quidistantenkarte",value:"ae"},{label:"Andere Karten",value:"ak"},{label:"Stadtpl\xE4ne",value:"cm"},{label:"Geologische Karten",value:"gl"},{label:"Meilenbl\xE4tter",value:"mb"},{label:"Messtischbl\xE4tter",value:"mtb"},{label:"Topographische Karte des Deutschen Reiches",value:"tk"},{label:"Topographische Karten",value:"tkx"}]},license:{name:"license",label:"license",type:"text",id:"license",validation:{required:{value:!0,message:"required"}}},map_scale:{name:"map_scale",label:"map_scale",type:"number",id:"map_scale",validation:{required:{value:!0,message:"required"}}},measures:{name:"measures",label:"measures",type:"text",id:"measures",validation:{required:{value:!1,message:"required"}}},owner:{name:"owner",label:"owner",type:"text",id:"owner",validation:{required:{value:!1,message:"required"}}},permalink:{name:"permalink",label:"permalink",type:"text",id:"permalink",validation:{required:{value:!1,message:"required"}}},ppn:{name:"ppn",label:"ppn",type:"text",id:"ppn",validation:{required:{value:!1,message:"required"}}},technic:{name:"technic",label:"technic",type:"text",id:"technic",validation:{required:{value:!1,message:"required"}}},time_of_publication:{name:"time_of_publication",label:"time_of_publication",type:"number",id:"time_of_publication",validation:{required:{value:!0,message:"required"},maxLength:{value:4,message:"Please enter a valid year"}}},allow_download:{name:"allow_download",label:"allow_download",id:"allow_download",validation:{required:{value:!1,message:"required"}},options:[{label:"true",value:!0},{label:"false",value:!1}]},title:{name:"title",label:"title",type:"text",id:"title",validation:{required:{value:!0,message:"required"}}},title_serie:{name:"title_serie",label:"title_serie",type:"text",id:"title_serie",validation:{required:{value:!1,message:"required"}}},title_short:{name:"title_short",label:"title_short",type:"text",id:"title_short",validation:{required:{value:!0,message:"required"}}},type:{name:"type",label:"type",type:"text",id:"type",validation:{required:{value:!1,message:"required"}}}};var hf=yt(Rr(),1);var Jz=yt(fye(),1);function Nr(){return Nr=Jz.default?Jz.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nr.apply(null,arguments)}var Dye=yt(qye(),1);var eN=yt(Rye(),1);function Tq(e,t){return Tq=eN.default?eN.default.bind():function(r,o){return r.__proto__=o,r},Tq(e,t)}function jn(e,t){e.prototype=(0,Dye.default)(t.prototype),e.prototype.constructor=e,Tq(e,t)}function Da(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;r[o]=e[o]}return r}var Zye=yt(rN());var Xye=yt(Fye()),Cq=yt(bi());var im={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},iN={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};function nN(e){return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];var u=r[r.length-1];return typeof u=="function"?e.apply(void 0,r):function(a){return e.apply(void 0,r.concat([a]))}}}function Ys(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,Xye.default)(!1),r+(t?"-"+t:"")}var Uo=nN(function(e,t){var r=t.propTypes||(t.propTypes={}),o=t.defaultProps||(t.defaultProps={});return r.bsClass=Cq.default.string,o.bsClass=e,t}),z9t=nN(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var o=r.STYLES||[],u=r.propTypes||{};e.forEach(function(x){o.indexOf(x)===-1&&o.push(x)});var a=Cq.default.oneOf(o);if(r.STYLES=o,a._values=o,r.propTypes=Nr({},u,{bsStyle:a}),t!==void 0){var m=r.defaultProps||(r.defaultProps={});m.bsStyle=t}return r}),Pq=nN(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var o=r.SIZES||[],u=r.propTypes||{};e.forEach(function(x){o.indexOf(x)===-1&&o.push(x)});var a=[];o.forEach(function(x){var q=iN[x];q&&q!==x&&a.push(q),a.push(x)});var m=Cq.default.oneOf(a);return m._values=a,r.SIZES=o,r.propTypes=Nr({},u,{bsSize:m}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function Qs(e){var t,r=(t={},t[Ys(e)]=!0,t);if(e.bsSize){var o=iN[e.bsSize]||e.bsSize;r[Ys(e,o)]=!0}return e.bsStyle&&(r[Ys(e,e.bsStyle)]=!0),r}function kSt(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function RSt(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function eu(e){var t={};return(0,Zye.default)(e).forEach(function(r){var o=r[0],u=r[1];RSt(o)||(t[o]=u)}),[kSt(e),t]}var oN=yt(bi()),V_=yt(Rr()),LSt={label:oN.default.string.isRequired,onClick:oN.default.func},FSt={label:"Close"},sN=function(e){jn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,a=u.label,m=u.onClick;return V_.default.createElement("button",{type:"button",className:"close",onClick:m},V_.default.createElement("span",{"aria-hidden":"true"},"\xD7"),V_.default.createElement("span",{className:"sr-only"},a))},t}(V_.default.Component);sN.propTypes=LSt;sN.defaultProps=FSt;var Yye=sN;function ds(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZSt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(o){return o!=null}).reduce(function(o,u){if(typeof u!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return o===null?u:function(){for(var m=arguments.length,x=new Array(m),q=0;q<m;q++)x[q]=arguments[q];o.apply(this,x),u.apply(this,x)}},null)}var $_=ZSt;var z_e=yt(rN());function bN(e,t){var r=t.propTypes,o={},u={};return(0,z_e.default)(e).forEach(function(a){var m=a[0],x=a[1];r[m]?o[m]=x:u[m]=x}),[o,u]}var N_e=yt(Dc()),rA=yt(Rr()),jo=yt(bi()),um=yt(O_e()),tA,Gqt={in:jo.default.bool,mountOnEnter:jo.default.bool,unmountOnExit:jo.default.bool,appear:jo.default.bool,timeout:jo.default.number,onEnter:jo.default.func,onEntering:jo.default.func,onEntered:jo.default.func,onExit:jo.default.func,onExiting:jo.default.func,onExited:jo.default.func},Kqt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Hqt=(tA={},tA[um.ENTERING]="in",tA[um.ENTERED]="in",tA),wN=function(e){jn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,a=u.className,m=u.children,x=Da(u,["className","children"]);return rA.default.createElement(um.default,x,function(q,T){return rA.default.cloneElement(m,Nr({},T,{className:(0,N_e.default)("fade",a,m.props.className,Hqt[q])}))})},t}(rA.default.Component);wN.propTypes=Gqt;wN.defaultProps=Kqt;var SN=wN;var KN=yt(Dc()),HN=yt(r0e()),wxe=yt(Z_()),Sxe=yt(tu()),ZN=yt(EN()),hm=yt(Rr()),Qi=yt(bi()),qxe=yt(Iu()),fm=yt(hxe()),Axe=yt(PN()),Exe=yt(nm());var fxe=yt(Dc()),BN=yt(Rr()),dxe=yt(nm());var _Tt={componentClass:dxe.default},xTt={componentClass:"div"},UN=function(e){jn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,a=u.componentClass,m=u.className,x=Da(u,["componentClass","className"]),q=eu(x),T=q[0],I=q[1],k=Qs(T);return BN.default.createElement(a,Nr({},I,{className:(0,fxe.default)(m,k)}))},t}(BN.default.Component);UN.propTypes=_Tt;UN.defaultProps=xTt;var t0=Uo("modal-body",UN);var jN=yt(Dc()),r0=yt(Rr()),pxe=yt(bi());var bTt={dialogClassName:pxe.default.string},mxe=function(e){jn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u,a=this.props,m=a.dialogClassName,x=a.className,q=a.style,T=a.children,I=a.onMouseDownDialog,k=Da(a,["dialogClassName","className","style","children","onMouseDownDialog"]),B=eu(k),Y=B[0],de=B[1],pe=Ys(Y),Z=Nr({display:"block"},q),H=Nr({},Qs(Y),(u={},u[pe]=!1,u[Ys(Y,"dialog")]=!0,u));return r0.default.createElement("div",Nr({},de,{tabIndex:"-1",role:"dialog",style:Z,className:(0,jN.default)(x,pe)}),r0.default.createElement("div",{className:(0,jN.default)(m,H),onMouseDown:I},r0.default.createElement("div",{className:Ys(Y,"content"),role:"document"},T)))},t}(r0.default.Component);mxe.propTypes=bTt;var PA=Uo("modal",Pq([im.LARGE,im.SMALL],mxe));var vxe=yt(Dc()),VN=yt(Rr()),gxe=yt(nm());var wTt={componentClass:gxe.default},STt={componentClass:"div"},$N=function(e){jn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,a=u.componentClass,m=u.className,x=Da(u,["componentClass","className"]),q=eu(x),T=q[0],I=q[1],k=Qs(T);return VN.default.createElement(a,Nr({},I,{className:(0,vxe.default)(m,k)}))},t}(VN.default.Component);$N.propTypes=wTt;$N.defaultProps=STt;var i0=Uo("modal-footer",$N);var yxe=yt(Dc()),cm=yt(bi()),MA=yt(Rr());var qTt={closeLabel:cm.default.string,closeButton:cm.default.bool,onHide:cm.default.func},ATt={closeLabel:"Close",closeButton:!1},ETt={$bs_modal:cm.default.shape({onHide:cm.default.func})},OA=function(e){jn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,a=u.closeLabel,m=u.closeButton,x=u.onHide,q=u.className,T=u.children,I=Da(u,["closeLabel","closeButton","onHide","className","children"]),k=this.context.$bs_modal,B=eu(I),Y=B[0],de=B[1],pe=Qs(Y);return MA.default.createElement("div",Nr({},de,{className:(0,yxe.default)(q,pe)}),m&&MA.default.createElement(Yye,{label:a,onClick:$_(k&&k.onHide,x)}),T)},t}(MA.default.Component);OA.propTypes=qTt;OA.defaultProps=ATt;OA.contextTypes=ETt;var n0=Uo("modal-header",OA);var _xe=yt(Dc()),WN=yt(Rr()),xxe=yt(nm());var TTt={componentClass:xxe.default},ITt={componentClass:"h4"},GN=function(e){jn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var u=this.props,a=u.componentClass,m=u.className,x=Da(u,["componentClass","className"]),q=eu(x),T=q[0],I=q[1],k=Qs(T);return WN.default.createElement(a,Nr({},I,{className:(0,_xe.default)(m,k)}))},t}(WN.default.Component);GN.propTypes=TTt;GN.defaultProps=ITt;var bxe=Uo("modal-title",GN);var CTt=Nr({},fm.default.propTypes,PA.propTypes,{backdrop:Qi.default.oneOf(["static",!0,!1]),backdropClassName:Qi.default.string,keyboard:Qi.default.bool,animation:Qi.default.bool,dialogComponentClass:Exe.default,autoFocus:Qi.default.bool,enforceFocus:Qi.default.bool,restoreFocus:Qi.default.bool,show:Qi.default.bool,onHide:Qi.default.func,onEnter:Qi.default.func,onEntering:Qi.default.func,onEntered:Qi.default.func,onExit:Qi.default.func,onExiting:Qi.default.func,onExited:Qi.default.func,container:fm.default.propTypes.container}),PTt=Nr({},fm.default.defaultProps,{animation:!0,dialogComponentClass:PA}),MTt={$bs_modal:Qi.default.shape({onHide:Qi.default.func})};function OTt(e){return hm.default.createElement(SN,Nr({},e,{timeout:oo.TRANSITION_DURATION}))}function kTt(e){return hm.default.createElement(SN,Nr({},e,{timeout:oo.BACKDROP_TRANSITION_DURATION}))}var oo=function(e){jn(t,e);function t(o,u){var a;return a=e.call(this,o,u)||this,a.handleDialogBackdropMouseDown=function(){a._waitingForMouseUp=!0},a.handleMouseUp=function(m){var x=a._modal.getDialogElement();a._waitingForMouseUp&&m.target===x&&(a._ignoreBackdropClick=!0),a._waitingForMouseUp=!1},a.handleEntering=a.handleEntering.bind(ds(ds(a))),a.handleExited=a.handleExited.bind(ds(ds(a))),a.handleWindowResize=a.handleWindowResize.bind(ds(ds(a))),a.handleDialogClick=a.handleDialogClick.bind(ds(ds(a))),a.setModalRef=a.setModalRef.bind(ds(ds(a))),a.state={style:{}},a}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(u){this._modal=u},r.handleDialogClick=function(u){if(this._ignoreBackdropClick||u.target!==u.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){HN.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){HN.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(Sxe.default){var u=this._modal.getDialogElement(),a=u.scrollHeight,m=(0,wxe.default)(u),x=(0,Axe.default)(qxe.default.findDOMNode(this.props.container||m.body)),q=a>m.documentElement.clientHeight;this.setState({style:{paddingRight:x&&!q?(0,ZN.default)():void 0,paddingLeft:!x&&q?(0,ZN.default)():void 0}})}},r.render=function(){var u=this.props,a=u.backdrop,m=u.backdropClassName,x=u.animation,q=u.show,T=u.dialogComponentClass,I=u.className,k=u.style,B=u.children,Y=u.onEntering,de=u.onExited,pe=Da(u,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),Z=bN(pe,fm.default),H=Z[0],J=Z[1],ve=q&&!x&&"in";return hm.default.createElement(fm.default,Nr({},H,{ref:this.setModalRef,show:q,containerClassName:Ys(pe,"open"),transition:x?OTt:void 0,backdrop:a,backdropTransition:x?kTt:void 0,backdropClassName:(0,KN.default)(Ys(pe,"backdrop"),m,ve),onEntering:$_(Y,this.handleEntering),onExited:$_(de,this.handleExited),onMouseUp:this.handleMouseUp}),hm.default.createElement(T,Nr({},J,{style:Nr({},this.state.style,k),className:(0,KN.default)(I,ve),onClick:a===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),B))},t}(hm.default.Component);oo.propTypes=CTt;oo.defaultProps=PTt;oo.childContextTypes=MTt;oo.Body=t0;oo.Header=n0;oo.Title=bxe;oo.Footer=i0;oo.Dialog=PA;oo.TRANSITION_DURATION=300;oo.BACKDROP_TRANSITION_DURATION=150;var XN=Uo("modal",Pq([im.LARGE,im.SMALL],oo));var a0=yt(bi(),1);var Txe=({show:e,onClose:t,onDelete:r,title:o})=>hf.default.createElement(XN,{show:e,onHide:t,className:"vkf-delete-dialog"},hf.default.createElement(n0,{closeButton:!0},o),hf.default.createElement(t0,null,ur("deletemodal-body")),hf.default.createElement(i0,null,hf.default.createElement("button",{className:"btn btn-default",type:"button",onClick:t},ur("deletemodal-cancel-btn")),hf.default.createElement("button",{className:"btn btn-primary",type:"button",onClick:r},ur("deletemodal-delete-btn"))));Txe.propTypes={show:a0.default.bool,onClose:a0.default.func,onDelete:a0.default.func,title:a0.default.string};var Ixe=Txe;function kA(e){let t=e.response||!1,r=e.response&&e.response.status<=404;return!(t&&r)}function RTt(e){let t={};return Object.keys(Jp()).forEach(r=>{e[r]!==void 0&&(t[r]=e[r])}),t}function Cxe(e){let t={};return Object.keys(e).forEach(r=>{e[r]!==null&&(t[r]=e[r])}),t}function Pxe(e){return gi(this,null,function*(){try{let t=Yu.getGeoreferenceApiClient(),r=`/maps/${e}`;return yield t.delete(r),Ju.ok(!0)}catch(t){return kA(t)&&console.error(t),Ju.error(t)}})}function RA(e){return gi(this,null,function*(){try{let t=Yu.getGeoreferenceApiClient(),r=`/maps/${e}`,o=yield t.get(r);if(o.data.map_id!==e){let a="The map id from the server does not match the given map id.";throw new Error(a)}let u=RTt(o.data);return Ju.ok(u)}catch(t){return kA(t)&&console.error(t),Ju.error(t)}})}function Mxe(e,t){return gi(this,null,function*(){try{let r=Yu.getGeoreferenceApiClient(),o=new FormData;if(e!==void 0&&t!==null)o.append("metadata",JSON.stringify(Cxe(e))),o.append("file",t);else{let q="Either the map metadata or the map image file is not set.";throw new Error(q)}let u={headers:{"Content-Type":"multipart/form-data"}},x=""+(yield r.post("/maps/",o,u)).data.map_id;return Ju.ok(x)}catch(r){return kA(r)&&console.error(r),Ju.error(r)}})}function Oxe(e,t,r){return gi(this,null,function*(){try{let o=Yu.getGeoreferenceApiClient(),u=new FormData;t!==null&&u.append("metadata",JSON.stringify(Cxe(t))),r!==null&&u.append("file",r);let a={headers:{"Content-Type":"multipart/form-data"}},m=`/maps/${e}`,x=yield o.post(m,u,a);return Ju.ok(x.data.map_id)}catch(o){return kA(o)&&console.error(o),Ju.error(o)}})}function DA(e){let{mapId:t,mapMetadata:r,onBack:o,onRefresh:u}=e,[a,m]=(0,kt.useState)(null),[x,q]=(0,kt.useState)(!1),[T,I]=(0,kt.useState)(null),[k,B]=(0,kt.useState)(!1),[Y,de]=(0,kt.useState)(!1),[pe,Z]=(0,kt.useState)(null),[H,J]=(0,kt.useState)(Date.now()),ve=Ime({defaultValues:va(at({},r),{time_of_publication:r?r.time_of_publication.slice(0,4):""})}),be=(0,kt.useCallback)(()=>{o()},[o]),Le=pt=>{pt!==null&&(m(pt),q(!1))},Oe=ve.handleSubmit(pt=>gi(this,null,function*(){let Lt=Lme(pt);if(de(!0),q(!1),a===null&&t===null){q(!0),de(!1);return}let hr=Fme(Lt,r);if(hr&&a!==null&&t===null){let Xr=yield Mxe(Lt,a),Tr=Xr.data;Tr!==null?I(Tr):Z(Xr.httpErrorStatusCode),de(!1);return}else if(t!==null&&hr||a!==null){let Xr=yield Oxe(t,Lt,a),Tr=Xr.data;Tr!==null?I(Tr):Z(Xr.httpErrorStatusCode),de(!1);return}else console.log("Currently there are not action to perform.");ve.reset()})),Ze=(0,kt.useCallback)(()=>gi(this,null,function*(){let pt=yield RA(T||t),Lt=pt.data;Lt!==null?(u({mapId:T||t,metadata:Lt}),I(null),m(null),Z(null),J(Date.now())):Z(pt.httpErrorStatusCode)}),[T]),ft=(0,kt.useCallback)(()=>gi(this,null,function*(){let pt=yield Pxe(t);pt.data===!0?o():Z(pt.httpErrorStatusCode)}),[t]),He=()=>{B(!0)},_r=()=>{B(!1)},Lr=()=>{ft().then(()=>{B(!1)})};return kt.default.createElement("div",{className:"container upload-view"},kt.default.createElement("div",{className:"upload-header-container"},kt.default.createElement(mq,{mapId:t||T,onBack:be}),T!==null&&pe===null&&kt.default.createElement("p",{className:"bg-success"},ur("uploadmap-success")),pe!==null&&kt.default.createElement("div",{className:"error-messages"},pe===401&&kt.default.createElement("p",{className:"bg-danger"},ur("common-errors-http-401")),pe===403&&kt.default.createElement("p",{className:"bg-danger"},ur("common-errors-http-403")),pe===404&&kt.default.createElement("p",{className:"bg-danger"},ur("uploadmap-errors-refresh-http-400")),pe>404&&kt.default.createElement("p",{className:"bg-danger"},ur("common-errors-unexpected"))),x&&kt.default.createElement("p",{className:"bg-danger"},ur("common-errors-upload-file"))),kt.default.createElement("div",{className:`upload-body-container ${T!==null?"active":""}`},kt.default.createElement(bme,at({},ve),kt.default.createElement("form",{className:"upload-form",id:"upload-form",onSubmit:pt=>pt.preventDefault()},kt.default.createElement("div",{className:"left-container"},kt.default.createElement(Nn,at({},Bn.description)),kt.default.createElement(Nn,at({},Bn.license)),kt.default.createElement(Nn,at({},Bn.map_type)),kt.default.createElement(Nn,at({},Bn.map_scale)),kt.default.createElement(Nn,at({},Bn.measures)),kt.default.createElement(Nn,at({},Bn.owner)),kt.default.createElement(Nn,at({},Bn.permalink)),kt.default.createElement(Nn,at({},Bn.ppn)),kt.default.createElement(Nn,at({},Bn.technic)),kt.default.createElement(Nn,at({},Bn.time_of_publication)),kt.default.createElement(Nn,at({},Bn.allow_download)),kt.default.createElement(Nn,at({},Bn.title)),kt.default.createElement(Nn,at({},Bn.title_serie)),kt.default.createElement(Nn,at({},Bn.title_short)),kt.default.createElement(Nn,at({},Bn.type))),kt.default.createElement("div",{className:"right-container"},kt.default.createElement(gq,{mapMetadata:r,onFileSelect:Le,isPending:a!==null,reloadKey:H}),kt.default.createElement("div",null,kt.default.createElement("div",{className:"action-buttons"},kt.default.createElement("button",{className:"btn btn-default",type:"button",disabled:t===null,onClick:He},ur("uploadmap-delete-btn")),kt.default.createElement("button",{className:"btn btn-primary",type:"button",disabled:T===null&&t===null,onClick:Ze},"Refresh"),kt.default.createElement("button",{className:"btn btn-primary has-spinner",type:"button",disabled:T!==null&&t===null,title:T!==null&&t===null?ur("uploadmap-save-btn-disabled-title"):void 0,onClick:Oe},Y===!0&&kt.default.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}),ur("uploadmap-save-btn")))))))),k&&kt.default.createElement(Ixe,{show:k,onClose:_r,onDelete:Lr,title:r.title}))}DA.propTypes={onBack:dm.default.func.isRequired,onRefresh:dm.default.func.isRequired,mapId:dm.default.oneOfType([dm.default.string]),mapMetadata:dm.default.object};var ni=yt(Rr(),1),QN=yt(bi(),1),zxe=yt(Lxe(),1);var ps=yt(Rr(),1),Fxe=yt(bi(),1);function LA(e){let{onEnterId:t}=e,[r,o]=(0,ps.useState)(""),u="input-field-search",a=(0,ps.useCallback)(x=>{o(x.target.value)},[o]),m=()=>{let x=r.trim();t(x),o(x)};return ps.default.createElement("div",{className:"search-input-field"},ps.default.createElement("label",{htmlFor:u,className:"body1"},ur("searchmap-subtitle")),ps.default.createElement("div",{className:"input-wrapper"},ps.default.createElement("input",{type:"text",className:"input-field body2",id:u,placeholder:ur("searchmap-placeholder"),value:r,onChange:a,onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),m())}}),ps.default.createElement("button",{type:"button",className:"search-button",onClick:()=>m()},ps.default.createElement("span",{className:"glyphicon glyphicon-search"}))))}LA.propTypes={onEnterId:Fxe.default.func.isRequired};var ff=yt(Rr(),1),o0=yt(bi(),1);function FA(e){let{mapId:t,mapMetadata:r,onClick:o}=e;return ff.default.createElement("li",{className:"map-entry-item",onClick:o},ff.default.createElement("div",{className:"image-container"},ff.default.createElement("img",{src:r.link_thumb_small,alt:"Map Image",loading:"lazy"})),ff.default.createElement("div",{className:"metadata-container"},ff.default.createElement("p",{className:"body2"},r.title_short),ff.default.createElement("p",{className:"body1"},t)))}FA.propTypes={mapId:o0.default.oneOfType([o0.default.string]),mapMetadata:o0.default.object,onClick:o0.default.func.isRequired};function zA(e){let{onSelectMap:t,onStartUpload:r}=e,[o,u]=(0,ni.useState)({mapId:null,metadata:null}),[a,m]=(0,ni.useState)(null),x=(0,zxe.default)(q=>gi(this,null,function*(){let T=yield RA(q),I=T.data;I!==null?(u({mapId:q,metadata:I}),m(null)):(u({mapId:null,metadata:null}),m(T.httpErrorStatusCode))}),300);return ni.default.createElement("div",{className:"container search-view"},ni.default.createElement("div",{className:"content-header"},ni.default.createElement("h3",null,ur("searchmap-title")),ni.default.createElement("button",{type:"button",className:"btn btn-primary upload-button",onClick:()=>r()},ur("searchmap-upload-button"))),ni.default.createElement("div",{className:"content-body"},ni.default.createElement(LA,{onEnterId:x}),o.mapId!==null&&ni.default.createElement("ul",{className:"map-list"},ni.default.createElement(FA,{mapId:o.mapId,mapMetadata:o.metadata,onClick:()=>t(o)})),a!==null&&ni.default.createElement("div",{className:"not-found body1"},ni.default.createElement("p",null,ur("uploadmap-p")),ni.default.createElement("ul",{className:"no-results"},a===400&&ni.default.createElement("li",null,ur("searchmap-errors-http-400")),a===401&&ni.default.createElement("li",null,ur("common-errors-http-401")),a===403&&ni.default.createElement("li",null,ur("common-errors-http-403")),a===404&&ni.default.createElement(ni.default.Fragment,null,ni.default.createElement("li",null,ur("uploadmap-li1")),ni.default.createElement("li",null,ur("uploadmap-li2")),ni.default.createElement("li",null,ur("uploadmap-li3"))),a>404&&ni.default.createElement("li",null,ur("common-errors-unexpected"))))))}zA.propTypes={onSelectMap:QN.default.func.isRequired,onStartUpload:QN.default.func.isRequired};var pm={SEARCH:"search",UPLOAD:"upload"},YTt=()=>{let[e,t]=(0,df.useState)(pm.SEARCH),[r,o]=(0,df.useState)({mapId:null,metadata:Jp()}),u=x=>{o(x),t(pm.UPLOAD)},a=()=>{o({mapId:null,metadata:Jp()}),t(pm.UPLOAD)},m=()=>{t(pm.SEARCH),o({mapId:null,metadata:Jp()})};return df.default.createElement("div",{className:"vkf-plugin-upload-map"},e===pm.SEARCH&&df.default.createElement(zA,{onSelectMap:u,onStartUpload:a}),e===pm.UPLOAD&&df.default.createElement(DA,{mapId:r.mapId,mapMetadata:r.metadata,onBack:m,onRefresh:u}))},Nxe=YTt;var QTt=Yu;function eIt(e){Uxe.default.render(Bxe.default.createElement(Nxe,{id:e.id}),e)}return U1e(tIt)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/