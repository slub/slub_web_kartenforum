var vk2=(()=>{var PSe=Object.create;var vg=Object.defineProperty,CSe=Object.defineProperties,MSe=Object.getOwnPropertyDescriptor,RSe=Object.getOwnPropertyDescriptors,OSe=Object.getOwnPropertyNames,bb=Object.getOwnPropertySymbols,kSe=Object.getPrototypeOf,SI=Object.prototype.hasOwnProperty,IU=Object.prototype.propertyIsEnumerable;var Zf=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),DSe=e=>{throw TypeError(e)},gg=Math.pow,qU=(e,t,i)=>t in e?vg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,rt=(e,t)=>{for(var i in t||(t={}))SI.call(t,i)&&qU(e,i,t[i]);if(bb)for(var i of bb(t))IU.call(t,i)&&qU(e,i,t[i]);return e},en=(e,t)=>CSe(e,RSe(t));var Kf=(e,t)=>{var i={};for(var o in e)SI.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&bb)for(var o of bb(e))t.indexOf(o)<0&&IU.call(e,o)&&(i[o]=e[o]);return i};var LSe=(e,t)=>()=>(e&&(t=e(e=0)),t);var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),PU=(e,t)=>{for(var i in t)vg(e,i,{get:t[i],enumerable:!0})},CU=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of OSe(t))!SI.call(e,c)&&c!==i&&vg(e,c,{get:()=>t[c],enumerable:!(o=MSe(t,c))||o.enumerable});return e};var _t=(e,t,i)=>(i=e!=null?PSe(kSe(e)):{},CU(t||!e||!e.__esModule?vg(i,"default",{value:e,enumerable:!0}):i,e)),FSe=e=>CU(vg({},"__esModule",{value:!0}),e);var br=(e,t,i)=>new Promise((o,c)=>{var a=q=>{try{b(i.next(q))}catch(M){c(M)}},v=q=>{try{b(i.throw(q))}catch(M){c(M)}},b=q=>q.done?o(q.value):Promise.resolve(q.value).then(a,v);b((i=i.apply(e,t)).next())}),Vh=function(e,t){this[0]=e,this[1]=t},TI=(e,t,i)=>{var o=(v,b,q,M)=>{try{var O=i[v](b),D=(b=O.value)instanceof Vh,U=O.done;Promise.resolve(D?b[0]:b).then(ne=>D?o(v==="return"?v:"next",b[1]?{done:ne.done,value:ne.value}:ne,q,M):q({value:ne,done:U})).catch(ne=>o("throw",ne,q,M))}catch(ne){M(ne)}},c=v=>a[v]=b=>new Promise((q,M)=>o(v,b,q,M)),a={};return i=i.apply(e,t),a[Zf("asyncIterator")]=()=>a,c("next"),c("throw"),c("return"),a},EI=e=>{var t=e[Zf("asyncIterator")],i=!1,o,c={};return t==null?(t=e[Zf("iterator")](),o=a=>c[a]=v=>t[a](v)):(t=t.call(e),o=a=>c[a]=v=>{if(i){if(i=!1,a==="throw")throw v;return v}return i=!0,{done:!1,value:new Vh(new Promise(b=>{var q=t[a](v);q instanceof Object||DSe("Object expected"),b(q)}),1)}}),c[Zf("iterator")]=()=>c,o("next"),"throw"in t?o("throw"):c.throw=a=>{throw a},"return"in t&&o("return"),c},MU=(e,t,i)=>(t=e[Zf("asyncIterator")])?t.call(e):(e=e[Zf("iterator")](),t={},i=(o,c)=>(c=e[o])&&(t[o]=a=>new Promise((v,b,q)=>(a=c.call(e,a),q=a.done,Promise.resolve(a.value).then(M=>v({value:M,done:q}),b)))),i("next"),i("return"),t);var T,f=LSe(()=>{T={env:{}}});var AI=I((i2t,OU)=>{"use strict";f();var RU=Object.getOwnPropertySymbols,NSe=Object.prototype.hasOwnProperty,BSe=Object.prototype.propertyIsEnumerable;function jSe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function USe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var o=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(o.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}OU.exports=USe()?Object.assign:function(e,t){for(var i,o=jSe(e),c,a=1;a<arguments.length;a++){i=Object(arguments[a]);for(var v in i)NSe.call(i,v)&&(o[v]=i[v]);if(RU){c=RU(i);for(var b=0;b<c.length;b++)BSe.call(i,c[b])&&(o[c[b]]=i[c[b]])}}return o}});var HU=I(mr=>{"use strict";f();var II=AI(),Hf=60103,LU=60106;mr.Fragment=60107;mr.StrictMode=60108;mr.Profiler=60114;var FU=60109,zU=60110,NU=60112;mr.Suspense=60113;var BU=60115,jU=60116;typeof Symbol=="function"&&Symbol.for&&(Co=Symbol.for,Hf=Co("react.element"),LU=Co("react.portal"),mr.Fragment=Co("react.fragment"),mr.StrictMode=Co("react.strict_mode"),mr.Profiler=Co("react.profiler"),FU=Co("react.provider"),zU=Co("react.context"),NU=Co("react.forward_ref"),mr.Suspense=Co("react.suspense"),BU=Co("react.memo"),jU=Co("react.lazy"));var Co,kU=typeof Symbol=="function"&&Symbol.iterator;function VSe(e){return e===null||typeof e!="object"?null:(e=kU&&e[kU]||e["@@iterator"],typeof e=="function"?e:null)}function yg(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VU={};function Xf(e,t,i){this.props=e,this.context=t,this.refs=VU,this.updater=i||UU}Xf.prototype.isReactComponent={};Xf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(yg(85));this.updater.enqueueSetState(this,e,t,"setState")};Xf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $U(){}$U.prototype=Xf.prototype;function PI(e,t,i){this.props=e,this.context=t,this.refs=VU,this.updater=i||UU}var CI=PI.prototype=new $U;CI.constructor=PI;II(CI,Xf.prototype);CI.isPureReactComponent=!0;var MI={current:null},GU=Object.prototype.hasOwnProperty,WU={key:!0,ref:!0,__self:!0,__source:!0};function ZU(e,t,i){var o,c={},a=null,v=null;if(t!=null)for(o in t.ref!==void 0&&(v=t.ref),t.key!==void 0&&(a=""+t.key),t)GU.call(t,o)&&!WU.hasOwnProperty(o)&&(c[o]=t[o]);var b=arguments.length-2;if(b===1)c.children=i;else if(1<b){for(var q=Array(b),M=0;M<b;M++)q[M]=arguments[M+2];c.children=q}if(e&&e.defaultProps)for(o in b=e.defaultProps,b)c[o]===void 0&&(c[o]=b[o]);return{$$typeof:Hf,type:e,key:a,ref:v,props:c,_owner:MI.current}}function $Se(e,t){return{$$typeof:Hf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function RI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hf}function GSe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var DU=/\/+/g;function qI(e,t){return typeof e=="object"&&e!==null&&e.key!=null?GSe(""+e.key):t.toString(36)}function Sb(e,t,i,o,c){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var v=!1;if(e===null)v=!0;else switch(a){case"string":case"number":v=!0;break;case"object":switch(e.$$typeof){case Hf:case LU:v=!0}}if(v)return v=e,c=c(v),e=o===""?"."+qI(v,0):o,Array.isArray(c)?(i="",e!=null&&(i=e.replace(DU,"$&/")+"/"),Sb(c,t,i,"",function(M){return M})):c!=null&&(RI(c)&&(c=$Se(c,i+(!c.key||v&&v.key===c.key?"":(""+c.key).replace(DU,"$&/")+"/")+e)),t.push(c)),1;if(v=0,o=o===""?".":o+":",Array.isArray(e))for(var b=0;b<e.length;b++){a=e[b];var q=o+qI(a,b);v+=Sb(a,t,i,q,c)}else if(q=VSe(e),typeof q=="function")for(e=q.call(e),b=0;!(a=e.next()).done;)a=a.value,q=o+qI(a,b++),v+=Sb(a,t,i,q,c);else if(a==="object")throw t=""+e,Error(yg(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return v}function wb(e,t,i){if(e==null)return e;var o=[],c=0;return Sb(e,o,"","",function(a){return t.call(i,a,c++)}),o}function WSe(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(i){e._status===0&&(i=i.default,e._status=1,e._result=i)},function(i){e._status===0&&(e._status=2,e._result=i)})}if(e._status===1)return e._result;throw e._result}var KU={current:null};function Jl(){var e=KU.current;if(e===null)throw Error(yg(321));return e}var ZSe={ReactCurrentDispatcher:KU,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:MI,IsSomeRendererActing:{current:!1},assign:II};mr.Children={map:wb,forEach:function(e,t,i){wb(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return wb(e,function(){t++}),t},toArray:function(e){return wb(e,function(t){return t})||[]},only:function(e){if(!RI(e))throw Error(yg(143));return e}};mr.Component=Xf;mr.PureComponent=PI;mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZSe;mr.cloneElement=function(e,t,i){if(e==null)throw Error(yg(267,e));var o=II({},e.props),c=e.key,a=e.ref,v=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,v=MI.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var b=e.type.defaultProps;for(q in t)GU.call(t,q)&&!WU.hasOwnProperty(q)&&(o[q]=t[q]===void 0&&b!==void 0?b[q]:t[q])}var q=arguments.length-2;if(q===1)o.children=i;else if(1<q){b=Array(q);for(var M=0;M<q;M++)b[M]=arguments[M+2];o.children=b}return{$$typeof:Hf,type:e.type,key:c,ref:a,props:o,_owner:v}};mr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:zU,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:FU,_context:e},e.Consumer=e};mr.createElement=ZU;mr.createFactory=function(e){var t=ZU.bind(null,e);return t.type=e,t};mr.createRef=function(){return{current:null}};mr.forwardRef=function(e){return{$$typeof:NU,render:e}};mr.isValidElement=RI;mr.lazy=function(e){return{$$typeof:jU,_payload:{_status:-1,_result:e},_init:WSe}};mr.memo=function(e,t){return{$$typeof:BU,type:e,compare:t===void 0?null:t}};mr.useCallback=function(e,t){return Jl().useCallback(e,t)};mr.useContext=function(e,t){return Jl().useContext(e,t)};mr.useDebugValue=function(){};mr.useEffect=function(e,t){return Jl().useEffect(e,t)};mr.useImperativeHandle=function(e,t,i){return Jl().useImperativeHandle(e,t,i)};mr.useLayoutEffect=function(e,t){return Jl().useLayoutEffect(e,t)};mr.useMemo=function(e,t){return Jl().useMemo(e,t)};mr.useReducer=function(e,t,i){return Jl().useReducer(e,t,i)};mr.useRef=function(e){return Jl().useRef(e)};mr.useState=function(e){return Jl().useState(e)};mr.version="17.0.2"});var Pr=I((s2t,XU)=>{"use strict";f();XU.exports=HU()});var r5=I(qr=>{"use strict";f();var Jf,bg,qb,NI;typeof performance=="object"&&typeof performance.now=="function"?(YU=performance,qr.unstable_now=function(){return YU.now()}):(OI=Date,JU=OI.now(),qr.unstable_now=function(){return OI.now()-JU});var YU,OI,JU;typeof window=="undefined"||typeof MessageChannel!="function"?(Yf=null,kI=null,DI=function(){if(Yf!==null)try{var e=qr.unstable_now();Yf(!0,e),Yf=null}catch(t){throw setTimeout(DI,0),t}},Jf=function(e){Yf!==null?setTimeout(Jf,0,e):(Yf=e,setTimeout(DI,0))},bg=function(e,t){kI=setTimeout(e,t)},qb=function(){clearTimeout(kI)},qr.unstable_shouldYield=function(){return!1},NI=qr.unstable_forceFrameRate=function(){}):(QU=window.setTimeout,e5=window.clearTimeout,typeof console!="undefined"&&(t5=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof t5!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),_g=!1,xg=null,Tb=-1,LI=5,FI=0,qr.unstable_shouldYield=function(){return qr.unstable_now()>=FI},NI=function(){},qr.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):LI=0<e?Math.floor(1e3/e):5},zI=new MessageChannel,Eb=zI.port2,zI.port1.onmessage=function(){if(xg!==null){var e=qr.unstable_now();FI=e+LI;try{xg(!0,e)?Eb.postMessage(null):(_g=!1,xg=null)}catch(t){throw Eb.postMessage(null),t}}else _g=!1},Jf=function(e){xg=e,_g||(_g=!0,Eb.postMessage(null))},bg=function(e,t){Tb=QU(function(){e(qr.unstable_now())},t)},qb=function(){e5(Tb),Tb=-1});var Yf,kI,DI,QU,e5,t5,_g,xg,Tb,LI,FI,zI,Eb;function BI(e,t){var i=e.length;e.push(t);e:for(;;){var o=i-1>>>1,c=e[o];if(c!==void 0&&0<Ab(c,t))e[o]=t,e[i]=c,i=o;else break e}}function ds(e){return e=e[0],e===void 0?null:e}function Ib(e){var t=e[0];if(t!==void 0){var i=e.pop();if(i!==t){e[0]=i;e:for(var o=0,c=e.length;o<c;){var a=2*(o+1)-1,v=e[a],b=a+1,q=e[b];if(v!==void 0&&0>Ab(v,i))q!==void 0&&0>Ab(q,v)?(e[o]=q,e[b]=i,o=b):(e[o]=v,e[a]=i,o=a);else if(q!==void 0&&0>Ab(q,i))e[o]=q,e[b]=i,o=b;else break e}}return t}return null}function Ab(e,t){var i=e.sortIndex-t.sortIndex;return i!==0?i:e.id-t.id}var Ys=[],tc=[],KSe=1,Mo=null,Hn=3,Pb=!1,$h=!1,wg=!1;function jI(e){for(var t=ds(tc);t!==null;){if(t.callback===null)Ib(tc);else if(t.startTime<=e)Ib(tc),t.sortIndex=t.expirationTime,BI(Ys,t);else break;t=ds(tc)}}function UI(e){if(wg=!1,jI(e),!$h)if(ds(Ys)!==null)$h=!0,Jf(VI);else{var t=ds(tc);t!==null&&bg(UI,t.startTime-e)}}function VI(e,t){$h=!1,wg&&(wg=!1,qb()),Pb=!0;var i=Hn;try{for(jI(t),Mo=ds(Ys);Mo!==null&&(!(Mo.expirationTime>t)||e&&!qr.unstable_shouldYield());){var o=Mo.callback;if(typeof o=="function"){Mo.callback=null,Hn=Mo.priorityLevel;var c=o(Mo.expirationTime<=t);t=qr.unstable_now(),typeof c=="function"?Mo.callback=c:Mo===ds(Ys)&&Ib(Ys),jI(t)}else Ib(Ys);Mo=ds(Ys)}if(Mo!==null)var a=!0;else{var v=ds(tc);v!==null&&bg(UI,v.startTime-t),a=!1}return a}finally{Mo=null,Hn=i,Pb=!1}}var HSe=NI;qr.unstable_IdlePriority=5;qr.unstable_ImmediatePriority=1;qr.unstable_LowPriority=4;qr.unstable_NormalPriority=3;qr.unstable_Profiling=null;qr.unstable_UserBlockingPriority=2;qr.unstable_cancelCallback=function(e){e.callback=null};qr.unstable_continueExecution=function(){$h||Pb||($h=!0,Jf(VI))};qr.unstable_getCurrentPriorityLevel=function(){return Hn};qr.unstable_getFirstCallbackNode=function(){return ds(Ys)};qr.unstable_next=function(e){switch(Hn){case 1:case 2:case 3:var t=3;break;default:t=Hn}var i=Hn;Hn=t;try{return e()}finally{Hn=i}};qr.unstable_pauseExecution=function(){};qr.unstable_requestPaint=HSe;qr.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=Hn;Hn=e;try{return t()}finally{Hn=i}};qr.unstable_scheduleCallback=function(e,t,i){var o=qr.unstable_now();switch(typeof i=="object"&&i!==null?(i=i.delay,i=typeof i=="number"&&0<i?o+i:o):i=o,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return c=i+c,e={id:KSe++,callback:t,priorityLevel:e,startTime:i,expirationTime:c,sortIndex:-1},i>o?(e.sortIndex=i,BI(tc,e),ds(Ys)===null&&e===ds(tc)&&(wg?qb():wg=!0,bg(UI,i-o))):(e.sortIndex=c,BI(Ys,e),$h||Pb||($h=!0,Jf(VI))),e};qr.unstable_wrapCallback=function(e){var t=Hn;return function(){var i=Hn;Hn=t;try{return e.apply(this,arguments)}finally{Hn=i}}}});var n5=I((h2t,i5)=>{"use strict";f();i5.exports=r5()});var $6=I(Fo=>{"use strict";f();var w1=Pr(),oi=AI(),pn=n5();function nt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!w1)throw Error(nt(227));var g4=new Set,Jg={};function td(e,t){_p(e,t),_p(e+"Capture",t)}function _p(e,t){for(Jg[e]=t,e=0;e<t.length;e++)g4.add(t[e])}var nu=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),XSe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a5=Object.prototype.hasOwnProperty,o5={},s5={};function YSe(e){return a5.call(s5,e)?!0:a5.call(o5,e)?!1:XSe.test(e)?s5[e]=!0:(o5[e]=!0,!1)}function JSe(e,t,i,o){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function QSe(e,t,i,o){if(t===null||typeof t=="undefined"||JSe(e,t,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ya(e,t,i,o,c,a,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=v}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Cn[e]=new ya(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Cn[t]=new ya(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Cn[e]=new ya(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Cn[e]=new ya(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Cn[e]=new ya(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Cn[e]=new ya(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Cn[e]=new ya(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Cn[e]=new ya(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Cn[e]=new ya(e,5,!1,e.toLowerCase(),null,!1,!1)});var JP=/[\-:]([a-z])/g;function QP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(JP,QP);Cn[t]=new ya(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(JP,QP);Cn[t]=new ya(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(JP,QP);Cn[t]=new ya(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Cn[e]=new ya(e,1,!1,e.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new ya("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Cn[e]=new ya(e,1,!1,e.toLowerCase(),null,!0,!0)});function eC(e,t,i,o){var c=Cn.hasOwnProperty(t)?Cn[t]:null,a=c!==null?c.type===0:o?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(QSe(t,i,c,o)&&(i=null),o||c===null?YSe(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,o=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,o?e.setAttributeNS(o,t,i):e.setAttribute(t,i))))}var rd=w1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dg=60103,Wh=60106,ic=60107,tC=60108,Bg=60114,rC=60109,iC=60110,S1=60112,jg=60113,Qb=60120,T1=60115,nC=60116,aC=60121,oC=60128,y4=60129,sC=60130,dP=60131;typeof Symbol=="function"&&Symbol.for&&(tn=Symbol.for,Dg=tn("react.element"),Wh=tn("react.portal"),ic=tn("react.fragment"),tC=tn("react.strict_mode"),Bg=tn("react.profiler"),rC=tn("react.provider"),iC=tn("react.context"),S1=tn("react.forward_ref"),jg=tn("react.suspense"),Qb=tn("react.suspense_list"),T1=tn("react.memo"),nC=tn("react.lazy"),aC=tn("react.block"),tn("react.scope"),oC=tn("react.opaque.id"),y4=tn("react.debug_trace_mode"),sC=tn("react.offscreen"),dP=tn("react.legacy_hidden"));var tn,l5=typeof Symbol=="function"&&Symbol.iterator;function Sg(e){return e===null||typeof e!="object"?null:(e=l5&&e[l5]||e["@@iterator"],typeof e=="function"?e:null)}var $I;function Lg(e){if($I===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);$I=t&&t[1]||""}return`
`+$I+e}var GI=!1;function Cb(e,t){if(!e||GI)return"";GI=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(q){var o=q}Reflect.construct(e,[],t)}else{try{t.call()}catch(q){o=q}e.call(t.prototype)}}else{try{throw Error()}catch(q){o=q}e()}}catch(q){if(q&&o&&typeof q.stack=="string"){for(var c=q.stack.split(`
`),a=o.stack.split(`
`),v=c.length-1,b=a.length-1;1<=v&&0<=b&&c[v]!==a[b];)b--;for(;1<=v&&0<=b;v--,b--)if(c[v]!==a[b]){if(v!==1||b!==1)do if(v--,b--,0>b||c[v]!==a[b])return`
`+c[v].replace(" at new "," at ");while(1<=v&&0<=b);break}}}finally{GI=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Lg(e):""}function eTe(e){switch(e.tag){case 5:return Lg(e.type);case 16:return Lg("Lazy");case 13:return Lg("Suspense");case 19:return Lg("SuspenseList");case 0:case 2:case 15:return e=Cb(e.type,!1),e;case 11:return e=Cb(e.type.render,!1),e;case 22:return e=Cb(e.type._render,!1),e;case 1:return e=Cb(e.type,!0),e;default:return""}}function up(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ic:return"Fragment";case Wh:return"Portal";case Bg:return"Profiler";case tC:return"StrictMode";case jg:return"Suspense";case Qb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case iC:return(e.displayName||"Context")+".Consumer";case rC:return(e._context.displayName||"Context")+".Provider";case S1:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case T1:return up(e.type);case aC:return up(e._render);case nC:t=e._payload,e=e._init;try{return up(e(t))}catch(i){}}return null}function mc(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tTe(e){var t=_4(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,a=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(v){o=""+v,a.call(this,v)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mb(e){e._valueTracker||(e._valueTracker=tTe(e))}function x4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=_4(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function e1(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fP(e,t){var i=t.checked;return oi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function u5(e,t){var i=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;i=mc(t.value!=null?t.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function b4(e,t){t=t.checked,t!=null&&eC(e,"checked",t,!1)}function pP(e,t){b4(e,t);var i=mc(t.value),o=t.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mP(e,t.type,i):t.hasOwnProperty("defaultValue")&&mP(e,t.type,mc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function c5(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function mP(e,t,i){(t!=="number"||e1(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function rTe(e){var t="";return w1.Children.forEach(e,function(i){i!=null&&(t+=i)}),t}function vP(e,t){return e=oi({children:void 0},t),(t=rTe(t.children))&&(e.children=t),e}function cp(e,t,i,o){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&o&&(e[i].defaultSelected=!0)}else{for(i=""+mc(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function gP(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(nt(91));return oi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function h5(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(nt(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(nt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:mc(i)}}function w4(e,t){var i=mc(t.value),o=mc(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function d5(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var yP={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function S4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _P(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?S4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rb,T4=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,i,o,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,o,c)})}:e}(function(e,t){if(e.namespaceURI!==yP.svg||"innerHTML"in e)e.innerHTML=t;else{for(Rb=Rb||document.createElement("div"),Rb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qg(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Ug={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iTe=["Webkit","ms","Moz","O"];Object.keys(Ug).forEach(function(e){iTe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ug[t]=Ug[e]})});function E4(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Ug.hasOwnProperty(e)&&Ug[e]?(""+t).trim():t+"px"}function A4(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=i.indexOf("--")===0,c=E4(i,t[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,c):e[i]=c}}var nTe=oi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xP(e,t){if(t){if(nTe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(nt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(nt(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(nt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(nt(62))}}function bP(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function lC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wP=null,hp=null,dp=null;function f5(e){if(e=fy(e)){if(typeof wP!="function")throw Error(nt(280));var t=e.stateNode;t&&(t=C1(t),wP(e.stateNode,e.type,t))}}function q4(e){hp?dp?dp.push(e):dp=[e]:hp=e}function I4(){if(hp){var e=hp,t=dp;if(dp=hp=null,f5(e),t)for(e=0;e<t.length;e++)f5(t[e])}}function uC(e,t){return e(t)}function P4(e,t,i,o,c){return e(t,i,o,c)}function cC(){}var C4=uC,Zh=!1,WI=!1;function hC(){(hp!==null||dp!==null)&&(cC(),I4())}function aTe(e,t,i){if(WI)return e(t,i);WI=!0;try{return C4(e,t,i)}finally{WI=!1,hC()}}function ey(e,t){var i=e.stateNode;if(i===null)return null;var o=C1(i);if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(nt(231,t,typeof i));return i}var SP=!1;if(nu)try{Qf={},Object.defineProperty(Qf,"passive",{get:function(){SP=!0}}),window.addEventListener("test",Qf,Qf),window.removeEventListener("test",Qf,Qf)}catch(e){SP=!1}var Qf;function oTe(e,t,i,o,c,a,v,b,q){var M=Array.prototype.slice.call(arguments,3);try{t.apply(i,M)}catch(O){this.onError(O)}}var Vg=!1,t1=null,r1=!1,TP=null,sTe={onError:function(e){Vg=!0,t1=e}};function lTe(e,t,i,o,c,a,v,b,q){Vg=!1,t1=null,oTe.apply(sTe,arguments)}function uTe(e,t,i,o,c,a,v,b,q){if(lTe.apply(this,arguments),Vg){if(Vg){var M=t1;Vg=!1,t1=null}else throw Error(nt(198));r1||(r1=!0,TP=M)}}function id(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function M4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p5(e){if(id(e)!==e)throw Error(nt(188))}function cTe(e){var t=e.alternate;if(!t){if(t=id(e),t===null)throw Error(nt(188));return t!==e?null:e}for(var i=e,o=t;;){var c=i.return;if(c===null)break;var a=c.alternate;if(a===null){if(o=c.return,o!==null){i=o;continue}break}if(c.child===a.child){for(a=c.child;a;){if(a===i)return p5(c),e;if(a===o)return p5(c),t;a=a.sibling}throw Error(nt(188))}if(i.return!==o.return)i=c,o=a;else{for(var v=!1,b=c.child;b;){if(b===i){v=!0,i=c,o=a;break}if(b===o){v=!0,o=c,i=a;break}b=b.sibling}if(!v){for(b=a.child;b;){if(b===i){v=!0,i=a,o=c;break}if(b===o){v=!0,o=a,i=c;break}b=b.sibling}if(!v)throw Error(nt(189))}}if(i.alternate!==o)throw Error(nt(190))}if(i.tag!==3)throw Error(nt(188));return i.stateNode.current===i?e:t}function R4(e){if(e=cTe(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function m5(e,t){for(var i=e.alternate;t!==null;){if(t===e||t===i)return!0;t=t.return}return!1}var O4,dC,k4,D4,EP=!1,Js=[],sc=null,lc=null,uc=null,ty=new Map,ry=new Map,Tg=[],v5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AP(e,t,i,o,c){return{blockedOn:e,domEventName:t,eventSystemFlags:i|16,nativeEvent:c,targetContainers:[o]}}function g5(e,t){switch(e){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":uc=null;break;case"pointerover":case"pointerout":ty.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ry.delete(t.pointerId)}}function Eg(e,t,i,o,c,a){return e===null||e.nativeEvent!==a?(e=AP(t,i,o,c,a),t!==null&&(t=fy(t),t!==null&&dC(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function hTe(e,t,i,o,c){switch(t){case"focusin":return sc=Eg(sc,e,t,i,o,c),!0;case"dragenter":return lc=Eg(lc,e,t,i,o,c),!0;case"mouseover":return uc=Eg(uc,e,t,i,o,c),!0;case"pointerover":var a=c.pointerId;return ty.set(a,Eg(ty.get(a)||null,e,t,i,o,c)),!0;case"gotpointercapture":return a=c.pointerId,ry.set(a,Eg(ry.get(a)||null,e,t,i,o,c)),!0}return!1}function dTe(e){var t=Kh(e.target);if(t!==null){var i=id(t);if(i!==null){if(t=i.tag,t===13){if(t=M4(i),t!==null){e.blockedOn=t,D4(e.lanePriority,function(){pn.unstable_runWithPriority(e.priority,function(){k4(i)})});return}}else if(t===3&&i.stateNode.hydrate){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vb(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=vC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i!==null)return t=fy(i),t!==null&&dC(t),e.blockedOn=i,!1;t.shift()}return!0}function y5(e,t,i){Vb(e)&&i.delete(t)}function fTe(){for(EP=!1;0<Js.length;){var e=Js[0];if(e.blockedOn!==null){e=fy(e.blockedOn),e!==null&&O4(e);break}for(var t=e.targetContainers;0<t.length;){var i=vC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i!==null){e.blockedOn=i;break}t.shift()}e.blockedOn===null&&Js.shift()}sc!==null&&Vb(sc)&&(sc=null),lc!==null&&Vb(lc)&&(lc=null),uc!==null&&Vb(uc)&&(uc=null),ty.forEach(y5),ry.forEach(y5)}function Ag(e,t){e.blockedOn===t&&(e.blockedOn=null,EP||(EP=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,fTe)))}function L4(e){function t(c){return Ag(c,e)}if(0<Js.length){Ag(Js[0],e);for(var i=1;i<Js.length;i++){var o=Js[i];o.blockedOn===e&&(o.blockedOn=null)}}for(sc!==null&&Ag(sc,e),lc!==null&&Ag(lc,e),uc!==null&&Ag(uc,e),ty.forEach(t),ry.forEach(t),i=0;i<Tg.length;i++)o=Tg[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Tg.length&&(i=Tg[0],i.blockedOn===null);)dTe(i),i.blockedOn===null&&Tg.shift()}function Ob(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ip={animationend:Ob("Animation","AnimationEnd"),animationiteration:Ob("Animation","AnimationIteration"),animationstart:Ob("Animation","AnimationStart"),transitionend:Ob("Transition","TransitionEnd")},ZI={},F4={};nu&&(F4=document.createElement("div").style,"AnimationEvent"in window||(delete ip.animationend.animation,delete ip.animationiteration.animation,delete ip.animationstart.animation),"TransitionEvent"in window||delete ip.transitionend.transition);function E1(e){if(ZI[e])return ZI[e];if(!ip[e])return e;var t=ip[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in F4)return ZI[e]=t[i];return e}var z4=E1("animationend"),N4=E1("animationiteration"),B4=E1("animationstart"),j4=E1("transitionend"),U4=new Map,fC=new Map,pTe=["abort","abort",z4,"animationEnd",N4,"animationIteration",B4,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",j4,"transitionEnd","waiting","waiting"];function pC(e,t){for(var i=0;i<e.length;i+=2){var o=e[i],c=e[i+1];c="on"+(c[0].toUpperCase()+c.slice(1)),fC.set(o,t),U4.set(o,c),td(c,[o])}}var mTe=pn.unstable_now;mTe();var $r=8;function tp(e){if((1&e)!==0)return $r=15,1;if((2&e)!==0)return $r=14,2;if((4&e)!==0)return $r=13,4;var t=24&e;return t!==0?($r=12,t):(e&32)!==0?($r=11,32):(t=192&e,t!==0?($r=10,t):(e&256)!==0?($r=9,256):(t=3584&e,t!==0?($r=8,t):(e&4096)!==0?($r=7,4096):(t=4186112&e,t!==0?($r=6,t):(t=62914560&e,t!==0?($r=5,t):e&67108864?($r=4,67108864):(e&134217728)!==0?($r=3,134217728):(t=805306368&e,t!==0?($r=2,t):(1073741824&e)!==0?($r=1,1073741824):($r=8,e))))))}function vTe(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function gTe(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(nt(358,e))}}function iy(e,t){var i=e.pendingLanes;if(i===0)return $r=0;var o=0,c=0,a=e.expiredLanes,v=e.suspendedLanes,b=e.pingedLanes;if(a!==0)o=a,c=$r=15;else if(a=i&134217727,a!==0){var q=a&~v;q!==0?(o=tp(q),c=$r):(b&=a,b!==0&&(o=tp(b),c=$r))}else a=i&~v,a!==0?(o=tp(a),c=$r):b!==0&&(o=tp(b),c=$r);if(o===0)return 0;if(o=31-vc(o),o=i&((0>o?0:1<<o)<<1)-1,t!==0&&t!==o&&(t&v)===0){if(tp(t),c<=$r)return t;$r=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)i=31-vc(t),c=1<<i,o|=e[i],t&=~c;return o}function V4(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function i1(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=rp(24&~t),e===0?i1(10,t):e;case 10:return e=rp(192&~t),e===0?i1(8,t):e;case 8:return e=rp(3584&~t),e===0&&(e=rp(4186112&~t),e===0&&(e=512)),e;case 2:return t=rp(805306368&~t),t===0&&(t=268435456),t}throw Error(nt(358,e))}function rp(e){return e&-e}function KI(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function A1(e,t,i){e.pendingLanes|=t;var o=t-1;e.suspendedLanes&=o,e.pingedLanes&=o,e=e.eventTimes,t=31-vc(t),e[t]=i}var vc=Math.clz32?Math.clz32:xTe,yTe=Math.log,_Te=Math.LN2;function xTe(e){return e===0?32:31-(yTe(e)/_Te|0)|0}var bTe=pn.unstable_UserBlockingPriority,wTe=pn.unstable_runWithPriority,$b=!0;function STe(e,t,i,o){Zh||cC();var c=mC,a=Zh;Zh=!0;try{P4(c,e,t,i,o)}finally{(Zh=a)||hC()}}function TTe(e,t,i,o){wTe(bTe,mC.bind(null,e,t,i,o))}function mC(e,t,i,o){if($b){var c;if((c=(t&4)===0)&&0<Js.length&&-1<v5.indexOf(e))e=AP(null,e,t,i,o),Js.push(e);else{var a=vC(e,t,i,o);if(a===null)c&&g5(e,o);else{if(c){if(-1<v5.indexOf(e)){e=AP(a,e,t,i,o),Js.push(e);return}if(hTe(a,e,t,i,o))return;g5(e,o)}r6(e,t,o,null,i)}}}}function vC(e,t,i,o){var c=lC(o);if(c=Kh(c),c!==null){var a=id(c);if(a===null)c=null;else{var v=a.tag;if(v===13){if(c=M4(a),c!==null)return c;c=null}else if(v===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;c=null}else a!==c&&(c=null)}}return r6(e,t,o,c,i),null}var nc=null,gC=null,Gb=null;function $4(){if(Gb)return Gb;var e,t=gC,i=t.length,o,c="value"in nc?nc.value:nc.textContent,a=c.length;for(e=0;e<i&&t[e]===c[e];e++);var v=i-e;for(o=1;o<=v&&t[i-o]===c[a-o];o++);return Gb=c.slice(e,1<o?1-o:void 0)}function Wb(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kb(){return!0}function _5(){return!1}function mo(e){function t(i,o,c,a,v){this._reactName=i,this._targetInst=c,this.type=o,this.nativeEvent=a,this.target=v,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(i=e[b],this[b]=i?i(a):a[b]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?kb:_5,this.isPropagationStopped=_5,this}return oi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=kb)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=kb)},persist:function(){},isPersistent:kb}),t}var Sp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yC=mo(Sp),dy=oi({},Sp,{view:0,detail:0}),ETe=mo(dy),HI,XI,qg,q1=oi({},dy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_C,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qg&&(qg&&e.type==="mousemove"?(HI=e.screenX-qg.screenX,XI=e.screenY-qg.screenY):XI=HI=0,qg=e),HI)},movementY:function(e){return"movementY"in e?e.movementY:XI}}),x5=mo(q1),ATe=oi({},q1,{dataTransfer:0}),qTe=mo(ATe),ITe=oi({},dy,{relatedTarget:0}),YI=mo(ITe),PTe=oi({},Sp,{animationName:0,elapsedTime:0,pseudoElement:0}),CTe=mo(PTe),MTe=oi({},Sp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RTe=mo(MTe),OTe=oi({},Sp,{data:0}),b5=mo(OTe),kTe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DTe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LTe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FTe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LTe[e])?!!t[e]:!1}function _C(){return FTe}var zTe=oi({},dy,{key:function(e){if(e.key){var t=kTe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wb(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DTe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_C,charCode:function(e){return e.type==="keypress"?Wb(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wb(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NTe=mo(zTe),BTe=oi({},q1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w5=mo(BTe),jTe=oi({},dy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_C}),UTe=mo(jTe),VTe=oi({},Sp,{propertyName:0,elapsedTime:0,pseudoElement:0}),$Te=mo(VTe),GTe=oi({},q1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WTe=mo(GTe),ZTe=[9,13,27,32],xC=nu&&"CompositionEvent"in window,$g=null;nu&&"documentMode"in document&&($g=document.documentMode);var KTe=nu&&"TextEvent"in window&&!$g,G4=nu&&(!xC||$g&&8<$g&&11>=$g),S5=" ",T5=!1;function W4(e,t){switch(e){case"keyup":return ZTe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var np=!1;function HTe(e,t){switch(e){case"compositionend":return Z4(t);case"keypress":return t.which!==32?null:(T5=!0,S5);case"textInput":return e=t.data,e===S5&&T5?null:e;default:return null}}function XTe(e,t){if(np)return e==="compositionend"||!xC&&W4(e,t)?(e=$4(),Gb=gC=nc=null,np=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return G4&&t.locale!=="ko"?null:t.data;default:return null}}var YTe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YTe[e.type]:t==="textarea"}function K4(e,t,i,o){q4(o),t=n1(t,"onChange"),0<t.length&&(i=new yC("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Gg=null,ny=null;function JTe(e){Q4(e,0)}function I1(e){var t=op(e);if(x4(t))return e}function QTe(e,t){if(e==="change")return t}var H4=!1;nu&&(nu?(Lb="oninput"in document,Lb||(JI=document.createElement("div"),JI.setAttribute("oninput","return;"),Lb=typeof JI.oninput=="function"),Db=Lb):Db=!1,H4=Db&&(!document.documentMode||9<document.documentMode));var Db,Lb,JI;function A5(){Gg&&(Gg.detachEvent("onpropertychange",X4),ny=Gg=null)}function X4(e){if(e.propertyName==="value"&&I1(ny)){var t=[];if(K4(t,ny,e,lC(e)),e=JTe,Zh)e(t);else{Zh=!0;try{uC(e,t)}finally{Zh=!1,hC()}}}}function eEe(e,t,i){e==="focusin"?(A5(),Gg=t,ny=i,Gg.attachEvent("onpropertychange",X4)):e==="focusout"&&A5()}function tEe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return I1(ny)}function rEe(e,t){if(e==="click")return I1(t)}function iEe(e,t){if(e==="input"||e==="change")return I1(t)}function nEe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ro=typeof Object.is=="function"?Object.is:nEe,aEe=Object.prototype.hasOwnProperty;function ay(e,t){if(Ro(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++)if(!aEe.call(t,i[o])||!Ro(e[i[o]],t[i[o]]))return!1;return!0}function q5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function I5(e,t){var i=q5(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=q5(i)}}function Y4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Y4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function P5(){for(var e=window,t=e1();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch(o){i=!1}if(i)e=t.contentWindow;else break;t=e1(e.document)}return t}function qP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var oEe=nu&&"documentMode"in document&&11>=document.documentMode,ap=null,IP=null,Wg=null,PP=!1;function C5(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;PP||ap==null||ap!==e1(o)||(o=ap,"selectionStart"in o&&qP(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Wg&&ay(Wg,o)||(Wg=o,o=n1(IP,"onSelect"),0<o.length&&(t=new yC("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=ap)))}pC("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);pC("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);pC(pTe,2);for(QI="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Fb=0;Fb<QI.length;Fb++)fC.set(QI[Fb],0);var QI,Fb;_p("onMouseEnter",["mouseout","mouseover"]);_p("onMouseLeave",["mouseout","mouseover"]);_p("onPointerEnter",["pointerout","pointerover"]);_p("onPointerLeave",["pointerout","pointerover"]);td("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));td("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));td("onBeforeInput",["compositionend","keypress","textInput","paste"]);td("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));td("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));td("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fg));function M5(e,t,i){var o=e.type||"unknown-event";e.currentTarget=i,uTe(o,t,void 0,e),e.currentTarget=null}function Q4(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],c=o.event;o=o.listeners;e:{var a=void 0;if(t)for(var v=o.length-1;0<=v;v--){var b=o[v],q=b.instance,M=b.currentTarget;if(b=b.listener,q!==a&&c.isPropagationStopped())break e;M5(c,b,M),a=q}else for(v=0;v<o.length;v++){if(b=o[v],q=b.instance,M=b.currentTarget,b=b.listener,q!==a&&c.isPropagationStopped())break e;M5(c,b,M),a=q}}}if(r1)throw e=TP,r1=!1,TP=null,e}function Qr(e,t){var i=n6(t),o=e+"__bubble";i.has(o)||(t6(t,e,2,!1),i.add(o))}var R5="_reactListening"+Math.random().toString(36).slice(2);function e6(e){e[R5]||(e[R5]=!0,g4.forEach(function(t){J4.has(t)||O5(t,!1,e,null),O5(t,!0,e,null)}))}function O5(e,t,i,o){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=i;if(e==="selectionchange"&&i.nodeType!==9&&(a=i.ownerDocument),o!==null&&!t&&J4.has(e)){if(e!=="scroll")return;c|=2,a=o}var v=n6(a),b=e+"__"+(t?"capture":"bubble");v.has(b)||(t&&(c|=4),t6(a,e,c,t),v.add(b))}function t6(e,t,i,o){var c=fC.get(t);switch(c===void 0?2:c){case 0:c=STe;break;case 1:c=TTe;break;default:c=mC}i=c.bind(null,t,i,e),c=void 0,!SP||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function r6(e,t,i,o,c){var a=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var b=o.stateNode.containerInfo;if(b===c||b.nodeType===8&&b.parentNode===c)break;if(v===4)for(v=o.return;v!==null;){var q=v.tag;if((q===3||q===4)&&(q=v.stateNode.containerInfo,q===c||q.nodeType===8&&q.parentNode===c))return;v=v.return}for(;b!==null;){if(v=Kh(b),v===null)return;if(q=v.tag,q===5||q===6){o=a=v;continue e}b=b.parentNode}}o=o.return}aTe(function(){var M=a,O=lC(i),D=[];e:{var U=U4.get(e);if(U!==void 0){var ne=yC,ue=e;switch(e){case"keypress":if(Wb(i)===0)break e;case"keydown":case"keyup":ne=NTe;break;case"focusin":ue="focus",ne=YI;break;case"focusout":ue="blur",ne=YI;break;case"beforeblur":case"afterblur":ne=YI;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=x5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=qTe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=UTe;break;case z4:case N4:case B4:ne=CTe;break;case j4:ne=$Te;break;case"scroll":ne=ETe;break;case"wheel":ne=WTe;break;case"copy":case"cut":case"paste":ne=RTe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=w5}var fe=(t&4)!==0,H=!fe&&e==="scroll",J=fe?U!==null?U+"Capture":null:U;fe=[];for(var re=M,xe;re!==null;){xe=re;var Ae=xe.stateNode;if(xe.tag===5&&Ae!==null&&(xe=Ae,J!==null&&(Ae=ey(re,J),Ae!=null&&fe.push(oy(re,Ae,xe)))),H)break;re=re.return}0<fe.length&&(U=new ne(U,ue,null,i,O),D.push({event:U,listeners:fe}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",U&&(t&16)===0&&(ue=i.relatedTarget||i.fromElement)&&(Kh(ue)||ue[Tp]))break e;if((ne||U)&&(U=O.window===O?O:(U=O.ownerDocument)?U.defaultView||U.parentWindow:window,ne?(ue=i.relatedTarget||i.toElement,ne=M,ue=ue?Kh(ue):null,ue!==null&&(H=id(ue),ue!==H||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ne=null,ue=M),ne!==ue)){if(fe=x5,Ae="onMouseLeave",J="onMouseEnter",re="mouse",(e==="pointerout"||e==="pointerover")&&(fe=w5,Ae="onPointerLeave",J="onPointerEnter",re="pointer"),H=ne==null?U:op(ne),xe=ue==null?U:op(ue),U=new fe(Ae,re+"leave",ne,i,O),U.target=H,U.relatedTarget=xe,Ae=null,Kh(O)===M&&(fe=new fe(J,re+"enter",ue,i,O),fe.target=xe,fe.relatedTarget=H,Ae=fe),H=Ae,ne&&ue)t:{for(fe=ne,J=ue,re=0,xe=fe;xe;xe=ep(xe))re++;for(xe=0,Ae=J;Ae;Ae=ep(Ae))xe++;for(;0<re-xe;)fe=ep(fe),re--;for(;0<xe-re;)J=ep(J),xe--;for(;re--;){if(fe===J||J!==null&&fe===J.alternate)break t;fe=ep(fe),J=ep(J)}fe=null}else fe=null;ne!==null&&k5(D,U,ne,fe,!1),ue!==null&&H!==null&&k5(D,H,ue,fe,!0)}}e:{if(U=M?op(M):window,ne=U.nodeName&&U.nodeName.toLowerCase(),ne==="select"||ne==="input"&&U.type==="file")var Ge=QTe;else if(E5(U)){if(H4)Ge=iEe;else{Ge=tEe;var Ne=eEe}}else(ne=U.nodeName)&&ne.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(Ge=rEe);if(Ge&&(Ge=Ge(e,M))){K4(D,Ge,i,O);break e}Ne&&Ne(e,U,M),e==="focusout"&&(Ne=U._wrapperState)&&Ne.controlled&&U.type==="number"&&mP(U,"number",U.value)}switch(Ne=M?op(M):window,e){case"focusin":(E5(Ne)||Ne.contentEditable==="true")&&(ap=Ne,IP=M,Wg=null);break;case"focusout":Wg=IP=ap=null;break;case"mousedown":PP=!0;break;case"contextmenu":case"mouseup":case"dragend":PP=!1,C5(D,i,O);break;case"selectionchange":if(oEe)break;case"keydown":case"keyup":C5(D,i,O)}var Ye;if(xC)e:{switch(e){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else np?W4(e,i)&&(ct="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ct="onCompositionStart");ct&&(G4&&i.locale!=="ko"&&(np||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&np&&(Ye=$4()):(nc=O,gC="value"in nc?nc.value:nc.textContent,np=!0)),Ne=n1(M,ct),0<Ne.length&&(ct=new b5(ct,e,null,i,O),D.push({event:ct,listeners:Ne}),Ye?ct.data=Ye:(Ye=Z4(i),Ye!==null&&(ct.data=Ye)))),(Ye=KTe?HTe(e,i):XTe(e,i))&&(M=n1(M,"onBeforeInput"),0<M.length&&(O=new b5("onBeforeInput","beforeinput",null,i,O),D.push({event:O,listeners:M}),O.data=Ye))}Q4(D,t)})}function oy(e,t,i){return{instance:e,listener:t,currentTarget:i}}function n1(e,t){for(var i=t+"Capture",o=[];e!==null;){var c=e,a=c.stateNode;c.tag===5&&a!==null&&(c=a,a=ey(e,i),a!=null&&o.unshift(oy(e,a,c)),a=ey(e,t),a!=null&&o.push(oy(e,a,c))),e=e.return}return o}function ep(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function k5(e,t,i,o,c){for(var a=t._reactName,v=[];i!==null&&i!==o;){var b=i,q=b.alternate,M=b.stateNode;if(q!==null&&q===o)break;b.tag===5&&M!==null&&(b=M,c?(q=ey(i,a),q!=null&&v.unshift(oy(i,q,b))):c||(q=ey(i,a),q!=null&&v.push(oy(i,q,b)))),i=i.return}v.length!==0&&e.push({event:t,listeners:v})}function a1(){}var eP=null,tP=null;function i6(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function CP(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var D5=typeof setTimeout=="function"?setTimeout:void 0,sEe=typeof clearTimeout=="function"?clearTimeout:void 0;function bC(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function fp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function L5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var rP=0;function lEe(e){return{$$typeof:oC,toString:e,valueOf:e}}var P1=Math.random().toString(36).slice(2),ac="__reactFiber$"+P1,o1="__reactProps$"+P1,Tp="__reactContainer$"+P1,F5="__reactEvents$"+P1;function Kh(e){var t=e[ac];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Tp]||i[ac]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=L5(e);e!==null;){if(i=e[ac])return i;e=L5(e)}return t}e=i,i=e.parentNode}return null}function fy(e){return e=e[ac]||e[Tp],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function op(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(nt(33))}function C1(e){return e[o1]||null}function n6(e){var t=e[F5];return t===void 0&&(t=e[F5]=new Set),t}var MP=[],sp=-1;function xc(e){return{current:e}}function ei(e){0>sp||(e.current=MP[sp],MP[sp]=null,sp--)}function wi(e,t){sp++,MP[sp]=e.current,e.current=t}var gc={},Qn=xc(gc),ka=xc(!1),Jh=gc;function xp(e,t){var i=e.type.contextTypes;if(!i)return gc;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var c={},a;for(a in i)c[a]=t[a];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Da(e){return e=e.childContextTypes,e!=null}function s1(){ei(ka),ei(Qn)}function z5(e,t,i){if(Qn.current!==gc)throw Error(nt(168));wi(Qn,t),wi(ka,i)}function a6(e,t,i){var o=e.stateNode;if(e=t.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var c in o)if(!(c in e))throw Error(nt(108,up(t)||"Unknown",c));return oi({},i,o)}function Zb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gc,Jh=Qn.current,wi(Qn,e),wi(ka,ka.current),!0}function N5(e,t,i){var o=e.stateNode;if(!o)throw Error(nt(169));i?(e=a6(e,t,Jh),o.__reactInternalMemoizedMergedChildContext=e,ei(ka),ei(Qn),wi(Qn,e)):ei(ka),wi(ka,i)}var wC=null,Yh=null,uEe=pn.unstable_runWithPriority,SC=pn.unstable_scheduleCallback,RP=pn.unstable_cancelCallback,cEe=pn.unstable_shouldYield,B5=pn.unstable_requestPaint,OP=pn.unstable_now,hEe=pn.unstable_getCurrentPriorityLevel,M1=pn.unstable_ImmediatePriority,o6=pn.unstable_UserBlockingPriority,s6=pn.unstable_NormalPriority,l6=pn.unstable_LowPriority,u6=pn.unstable_IdlePriority,iP={},dEe=B5!==void 0?B5:function(){},Ql=null,Kb=null,nP=!1,j5=OP(),Yn=1e4>j5?OP:function(){return OP()-j5};function bp(){switch(hEe()){case M1:return 99;case o6:return 98;case s6:return 97;case l6:return 96;case u6:return 95;default:throw Error(nt(332))}}function c6(e){switch(e){case 99:return M1;case 98:return o6;case 97:return s6;case 96:return l6;case 95:return u6;default:throw Error(nt(332))}}function Qh(e,t){return e=c6(e),uEe(e,t)}function sy(e,t,i){return e=c6(e),SC(e,t,i)}function il(){if(Kb!==null){var e=Kb;Kb=null,RP(e)}h6()}function h6(){if(!nP&&Ql!==null){nP=!0;var e=0;try{var t=Ql;Qh(99,function(){for(;e<t.length;e++){var i=t[e];do i=i(!0);while(i!==null)}}),Ql=null}catch(i){throw Ql!==null&&(Ql=Ql.slice(e+1)),SC(M1,il),i}finally{nP=!1}}}var fEe=rd.ReactCurrentBatchConfig;function fs(e,t){if(e&&e.defaultProps){t=oi({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var l1=xc(null),u1=null,lp=null,c1=null;function TC(){c1=lp=u1=null}function EC(e){var t=l1.current;ei(l1),e.type._context._currentValue=t}function d6(e,t){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)===t){if(i===null||(i.childLanes&t)===t)break;i.childLanes|=t}else e.childLanes|=t,i!==null&&(i.childLanes|=t);e=e.return}}function pp(e,t){u1=e,c1=lp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ps=!0),e.firstContext=null)}function Do(e,t){if(c1!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(c1=e,t=1073741823),t={context:e,observedBits:t,next:null},lp===null){if(u1===null)throw Error(nt(308));lp=t,u1.dependencies={lanes:0,firstContext:t,responders:null}}else lp=lp.next=t;return e._currentValue}var rc=!1;function AC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function f6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hc(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function U5(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var c=null,a=null;if(i=i.firstBaseUpdate,i!==null){do{var v={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};a===null?c=a=v:a=a.next=v,i=i.next}while(i!==null);a===null?c=a=t:a=a.next=t}else c=a=t;i={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:a,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ly(e,t,i,o){var c=e.updateQueue;rc=!1;var a=c.firstBaseUpdate,v=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var q=b,M=q.next;q.next=null,v===null?a=M:v.next=M,v=q;var O=e.alternate;if(O!==null){O=O.updateQueue;var D=O.lastBaseUpdate;D!==v&&(D===null?O.firstBaseUpdate=M:D.next=M,O.lastBaseUpdate=q)}}if(a!==null){D=c.baseState,v=0,O=M=q=null;do{b=a.lane;var U=a.eventTime;if((o&b)===b){O!==null&&(O=O.next={eventTime:U,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var ne=e,ue=a;switch(b=t,U=i,ue.tag){case 1:if(ne=ue.payload,typeof ne=="function"){D=ne.call(U,D,b);break e}D=ne;break e;case 3:ne.flags=ne.flags&-4097|64;case 0:if(ne=ue.payload,b=typeof ne=="function"?ne.call(U,D,b):ne,b==null)break e;D=oi({},D,b);break e;case 2:rc=!0}}a.callback!==null&&(e.flags|=32,b=c.effects,b===null?c.effects=[a]:b.push(a))}else U={eventTime:U,lane:b,tag:a.tag,payload:a.payload,callback:a.callback,next:null},O===null?(M=O=U,q=D):O=O.next=U,v|=b;if(a=a.next,a===null){if(b=c.shared.pending,b===null)break;a=b.next,b.next=null,c.lastBaseUpdate=b,c.shared.pending=null}}while(!0);O===null&&(q=D),c.baseState=q,c.firstBaseUpdate=M,c.lastBaseUpdate=O,my|=v,e.lanes=v,e.memoizedState=D}}function V5(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],c=o.callback;if(c!==null){if(o.callback=null,o=i,typeof c!="function")throw Error(nt(191,c));c.call(o)}}}var p6=new w1.Component().refs;function h1(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:oi({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var R1={isMounted:function(e){return(e=e._reactInternals)?id(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var o=po(),c=dc(e),a=cc(o,c);a.payload=t,i!=null&&(a.callback=i),hc(e,a),fc(e,c,o)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=po(),c=dc(e),a=cc(o,c);a.tag=1,a.payload=t,i!=null&&(a.callback=i),hc(e,a),fc(e,c,o)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=po(),o=dc(e),c=cc(i,o);c.tag=2,t!=null&&(c.callback=t),hc(e,c),fc(e,o,i)}};function $5(e,t,i,o,c,a,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,a,v):t.prototype&&t.prototype.isPureReactComponent?!ay(i,o)||!ay(c,a):!0}function m6(e,t,i){var o=!1,c=gc,a=t.contextType;return typeof a=="object"&&a!==null?a=Do(a):(c=Da(t)?Jh:Qn.current,o=t.contextTypes,a=(o=o!=null)?xp(e,c):gc),t=new t(i,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=R1,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=a),t}function G5(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&R1.enqueueReplaceState(t,t.state,null)}function kP(e,t,i,o){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=p6,AC(e);var a=t.contextType;typeof a=="object"&&a!==null?c.context=Do(a):(a=Da(t)?Jh:Qn.current,c.context=xp(e,a)),ly(e,i,c,o),c.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(h1(e,t,a,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&R1.enqueueReplaceState(c,c.state,null),ly(e,i,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var zb=Array.isArray;function Ig(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(nt(309));var o=i.stateNode}if(!o)throw Error(nt(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(a){var v=o.refs;v===p6&&(v=o.refs={}),a===null?delete v[c]:v[c]=a},t._stringRef=c,t)}if(typeof e!="string")throw Error(nt(284));if(!i._owner)throw Error(nt(290,e))}return e}function Nb(e,t){if(e.type!=="textarea")throw Error(nt(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function v6(e){function t(H,J){if(e){var re=H.lastEffect;re!==null?(re.nextEffect=J,H.lastEffect=J):H.firstEffect=H.lastEffect=J,J.nextEffect=null,J.flags=8}}function i(H,J){if(!e)return null;for(;J!==null;)t(H,J),J=J.sibling;return null}function o(H,J){for(H=new Map;J!==null;)J.key!==null?H.set(J.key,J):H.set(J.index,J),J=J.sibling;return H}function c(H,J){return H=_c(H,J),H.index=0,H.sibling=null,H}function a(H,J,re){return H.index=re,e?(re=H.alternate,re!==null?(re=re.index,re<J?(H.flags=2,J):re):(H.flags=2,J)):J}function v(H){return e&&H.alternate===null&&(H.flags=2),H}function b(H,J,re,xe){return J===null||J.tag!==6?(J=uP(re,H.mode,xe),J.return=H,J):(J=c(J,re),J.return=H,J)}function q(H,J,re,xe){return J!==null&&J.elementType===re.type?(xe=c(J,re.props),xe.ref=Ig(H,J,re),xe.return=H,xe):(xe=Jb(re.type,re.key,re.props,null,H.mode,xe),xe.ref=Ig(H,J,re),xe.return=H,xe)}function M(H,J,re,xe){return J===null||J.tag!==4||J.stateNode.containerInfo!==re.containerInfo||J.stateNode.implementation!==re.implementation?(J=cP(re,H.mode,xe),J.return=H,J):(J=c(J,re.children||[]),J.return=H,J)}function O(H,J,re,xe,Ae){return J===null||J.tag!==7?(J=yp(re,H.mode,xe,Ae),J.return=H,J):(J=c(J,re),J.return=H,J)}function D(H,J,re){if(typeof J=="string"||typeof J=="number")return J=uP(""+J,H.mode,re),J.return=H,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Dg:return re=Jb(J.type,J.key,J.props,null,H.mode,re),re.ref=Ig(H,null,J),re.return=H,re;case Wh:return J=cP(J,H.mode,re),J.return=H,J}if(zb(J)||Sg(J))return J=yp(J,H.mode,re,null),J.return=H,J;Nb(H,J)}return null}function U(H,J,re,xe){var Ae=J!==null?J.key:null;if(typeof re=="string"||typeof re=="number")return Ae!==null?null:b(H,J,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Dg:return re.key===Ae?re.type===ic?O(H,J,re.props.children,xe,Ae):q(H,J,re,xe):null;case Wh:return re.key===Ae?M(H,J,re,xe):null}if(zb(re)||Sg(re))return Ae!==null?null:O(H,J,re,xe,null);Nb(H,re)}return null}function ne(H,J,re,xe,Ae){if(typeof xe=="string"||typeof xe=="number")return H=H.get(re)||null,b(J,H,""+xe,Ae);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case Dg:return H=H.get(xe.key===null?re:xe.key)||null,xe.type===ic?O(J,H,xe.props.children,Ae,xe.key):q(J,H,xe,Ae);case Wh:return H=H.get(xe.key===null?re:xe.key)||null,M(J,H,xe,Ae)}if(zb(xe)||Sg(xe))return H=H.get(re)||null,O(J,H,xe,Ae,null);Nb(J,xe)}return null}function ue(H,J,re,xe){for(var Ae=null,Ge=null,Ne=J,Ye=J=0,ct=null;Ne!==null&&Ye<re.length;Ye++){Ne.index>Ye?(ct=Ne,Ne=null):ct=Ne.sibling;var ht=U(H,Ne,re[Ye],xe);if(ht===null){Ne===null&&(Ne=ct);break}e&&Ne&&ht.alternate===null&&t(H,Ne),J=a(ht,J,Ye),Ge===null?Ae=ht:Ge.sibling=ht,Ge=ht,Ne=ct}if(Ye===re.length)return i(H,Ne),Ae;if(Ne===null){for(;Ye<re.length;Ye++)Ne=D(H,re[Ye],xe),Ne!==null&&(J=a(Ne,J,Ye),Ge===null?Ae=Ne:Ge.sibling=Ne,Ge=Ne);return Ae}for(Ne=o(H,Ne);Ye<re.length;Ye++)ct=ne(Ne,H,Ye,re[Ye],xe),ct!==null&&(e&&ct.alternate!==null&&Ne.delete(ct.key===null?Ye:ct.key),J=a(ct,J,Ye),Ge===null?Ae=ct:Ge.sibling=ct,Ge=ct);return e&&Ne.forEach(function(pr){return t(H,pr)}),Ae}function fe(H,J,re,xe){var Ae=Sg(re);if(typeof Ae!="function")throw Error(nt(150));if(re=Ae.call(re),re==null)throw Error(nt(151));for(var Ge=Ae=null,Ne=J,Ye=J=0,ct=null,ht=re.next();Ne!==null&&!ht.done;Ye++,ht=re.next()){Ne.index>Ye?(ct=Ne,Ne=null):ct=Ne.sibling;var pr=U(H,Ne,ht.value,xe);if(pr===null){Ne===null&&(Ne=ct);break}e&&Ne&&pr.alternate===null&&t(H,Ne),J=a(pr,J,Ye),Ge===null?Ae=pr:Ge.sibling=pr,Ge=pr,Ne=ct}if(ht.done)return i(H,Ne),Ae;if(Ne===null){for(;!ht.done;Ye++,ht=re.next())ht=D(H,ht.value,xe),ht!==null&&(J=a(ht,J,Ye),Ge===null?Ae=ht:Ge.sibling=ht,Ge=ht);return Ae}for(Ne=o(H,Ne);!ht.done;Ye++,ht=re.next())ht=ne(Ne,H,Ye,ht.value,xe),ht!==null&&(e&&ht.alternate!==null&&Ne.delete(ht.key===null?Ye:ht.key),J=a(ht,J,Ye),Ge===null?Ae=ht:Ge.sibling=ht,Ge=ht);return e&&Ne.forEach(function(Lr){return t(H,Lr)}),Ae}return function(H,J,re,xe){var Ae=typeof re=="object"&&re!==null&&re.type===ic&&re.key===null;Ae&&(re=re.props.children);var Ge=typeof re=="object"&&re!==null;if(Ge)switch(re.$$typeof){case Dg:e:{for(Ge=re.key,Ae=J;Ae!==null;){if(Ae.key===Ge){switch(Ae.tag){case 7:if(re.type===ic){i(H,Ae.sibling),J=c(Ae,re.props.children),J.return=H,H=J;break e}break;default:if(Ae.elementType===re.type){i(H,Ae.sibling),J=c(Ae,re.props),J.ref=Ig(H,Ae,re),J.return=H,H=J;break e}}i(H,Ae);break}else t(H,Ae);Ae=Ae.sibling}re.type===ic?(J=yp(re.props.children,H.mode,xe,re.key),J.return=H,H=J):(xe=Jb(re.type,re.key,re.props,null,H.mode,xe),xe.ref=Ig(H,J,re),xe.return=H,H=xe)}return v(H);case Wh:e:{for(Ae=re.key;J!==null;){if(J.key===Ae){if(J.tag===4&&J.stateNode.containerInfo===re.containerInfo&&J.stateNode.implementation===re.implementation){i(H,J.sibling),J=c(J,re.children||[]),J.return=H,H=J;break e}else{i(H,J);break}}else t(H,J);J=J.sibling}J=cP(re,H.mode,xe),J.return=H,H=J}return v(H)}if(typeof re=="string"||typeof re=="number")return re=""+re,J!==null&&J.tag===6?(i(H,J.sibling),J=c(J,re),J.return=H,H=J):(i(H,J),J=uP(re,H.mode,xe),J.return=H,H=J),v(H);if(zb(re))return ue(H,J,re,xe);if(Sg(re))return fe(H,J,re,xe);if(Ge&&Nb(H,re),typeof re=="undefined"&&!Ae)switch(H.tag){case 1:case 22:case 0:case 11:case 15:throw Error(nt(152,up(H.type)||"Component"))}return i(H,J)}}var d1=v6(!0),g6=v6(!1),py={},tl=xc(py),uy=xc(py),cy=xc(py);function Hh(e){if(e===py)throw Error(nt(174));return e}function DP(e,t){switch(wi(cy,t),wi(uy,e),wi(tl,py),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_P(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_P(t,e)}ei(tl),wi(tl,t)}function wp(){ei(tl),ei(uy),ei(cy)}function W5(e){Hh(cy.current);var t=Hh(tl.current),i=_P(t,e.type);t!==i&&(wi(uy,e),wi(tl,i))}function qC(e){uy.current===e&&(ei(tl),ei(uy))}var bi=xc(0);function f1(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tu=null,oc=null,rl=!1;function y6(e,t){var i=Oo(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Z5(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function LP(e){if(rl){var t=oc;if(t){var i=t;if(!Z5(e,t)){if(t=fp(i.nextSibling),!t||!Z5(e,t)){e.flags=e.flags&-1025|2,rl=!1,tu=e;return}y6(tu,i)}tu=e,oc=fp(t.firstChild)}else e.flags=e.flags&-1025|2,rl=!1,tu=e}}function K5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tu=e}function Bb(e){if(e!==tu)return!1;if(!rl)return K5(e),rl=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!CP(t,e.memoizedProps))for(t=oc;t;)y6(e,t),t=fp(t.nextSibling);if(K5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(nt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){oc=fp(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}oc=null}}else oc=tu?fp(e.stateNode.nextSibling):null;return!0}function aP(){oc=tu=null,rl=!1}var mp=[];function IC(){for(var e=0;e<mp.length;e++)mp[e]._workInProgressVersionPrimary=null;mp.length=0}var Zg=rd.ReactCurrentDispatcher,ko=rd.ReactCurrentBatchConfig,hy=0,Ri=null,Xn=null,In=null,p1=!1,Kg=!1;function Ra(){throw Error(nt(321))}function PC(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ro(e[i],t[i]))return!1;return!0}function CC(e,t,i,o,c,a){if(hy=a,Ri=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zg.current=e===null||e.memoizedState===null?mEe:vEe,e=i(o,c),Kg){a=0;do{if(Kg=!1,!(25>a))throw Error(nt(301));a+=1,In=Xn=null,t.updateQueue=null,Zg.current=gEe,e=i(o,c)}while(Kg)}if(Zg.current=y1,t=Xn!==null&&Xn.next!==null,hy=0,In=Xn=Ri=null,p1=!1,t)throw Error(nt(300));return e}function Xh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Ri.memoizedState=In=e:In=In.next=e,In}function nd(){if(Xn===null){var e=Ri.alternate;e=e!==null?e.memoizedState:null}else e=Xn.next;var t=In===null?Ri.memoizedState:In.next;if(t!==null)In=t,Xn=e;else{if(e===null)throw Error(nt(310));Xn=e,e={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},In===null?Ri.memoizedState=In=e:In=In.next=e}return In}function Qs(e,t){return typeof t=="function"?t(e):t}function Pg(e){var t=nd(),i=t.queue;if(i===null)throw Error(nt(311));i.lastRenderedReducer=e;var o=Xn,c=o.baseQueue,a=i.pending;if(a!==null){if(c!==null){var v=c.next;c.next=a.next,a.next=v}o.baseQueue=c=a,i.pending=null}if(c!==null){c=c.next,o=o.baseState;var b=v=a=null,q=c;do{var M=q.lane;if((hy&M)===M)b!==null&&(b=b.next={lane:0,action:q.action,eagerReducer:q.eagerReducer,eagerState:q.eagerState,next:null}),o=q.eagerReducer===e?q.eagerState:e(o,q.action);else{var O={lane:M,action:q.action,eagerReducer:q.eagerReducer,eagerState:q.eagerState,next:null};b===null?(v=b=O,a=o):b=b.next=O,Ri.lanes|=M,my|=M}q=q.next}while(q!==null&&q!==c);b===null?a=o:b.next=v,Ro(o,t.memoizedState)||(ps=!0),t.memoizedState=o,t.baseState=a,t.baseQueue=b,i.lastRenderedState=o}return[t.memoizedState,i.dispatch]}function Cg(e){var t=nd(),i=t.queue;if(i===null)throw Error(nt(311));i.lastRenderedReducer=e;var o=i.dispatch,c=i.pending,a=t.memoizedState;if(c!==null){i.pending=null;var v=c=c.next;do a=e(a,v.action),v=v.next;while(v!==c);Ro(a,t.memoizedState)||(ps=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),i.lastRenderedState=a}return[a,o]}function H5(e,t,i){var o=t._getVersion;o=o(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===o:(e=e.mutableReadLanes,(e=(hy&e)===e)&&(t._workInProgressVersionPrimary=o,mp.push(t))),e)return i(t._source);throw mp.push(t),Error(nt(350))}function _6(e,t,i,o){var c=ga;if(c===null)throw Error(nt(349));var a=t._getVersion,v=a(t._source),b=Zg.current,q=b.useState(function(){return H5(c,t,i)}),M=q[1],O=q[0];q=In;var D=e.memoizedState,U=D.refs,ne=U.getSnapshot,ue=D.source;D=D.subscribe;var fe=Ri;return e.memoizedState={refs:U,source:t,subscribe:o},b.useEffect(function(){U.getSnapshot=i,U.setSnapshot=M;var H=a(t._source);if(!Ro(v,H)){H=i(t._source),Ro(O,H)||(M(H),H=dc(fe),c.mutableReadLanes|=H&c.pendingLanes),H=c.mutableReadLanes,c.entangledLanes|=H;for(var J=c.entanglements,re=H;0<re;){var xe=31-vc(re),Ae=1<<xe;J[xe]|=H,re&=~Ae}}},[i,t,o]),b.useEffect(function(){return o(t._source,function(){var H=U.getSnapshot,J=U.setSnapshot;try{J(H(t._source));var re=dc(fe);c.mutableReadLanes|=re&c.pendingLanes}catch(xe){J(function(){throw xe})}})},[t,o]),Ro(ne,i)&&Ro(ue,t)&&Ro(D,o)||(e={pending:null,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:O},e.dispatch=M=OC.bind(null,Ri,e),q.queue=e,q.baseQueue=null,O=H5(c,t,i),q.memoizedState=q.baseState=O),O}function x6(e,t,i){var o=nd();return _6(o,e,t,i)}function Mg(e){var t=Xh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},e=e.dispatch=OC.bind(null,Ri,e),[t.memoizedState,e]}function m1(e,t,i,o){return e={tag:e,create:t,destroy:i,deps:o,next:null},t=Ri.updateQueue,t===null?(t={lastEffect:null},Ri.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e)),e}function X5(e){var t=Xh();return e={current:e},t.memoizedState=e}function v1(){return nd().memoizedState}function FP(e,t,i,o){var c=Xh();Ri.flags|=e,c.memoizedState=m1(1|t,i,void 0,o===void 0?null:o)}function MC(e,t,i,o){var c=nd();o=o===void 0?null:o;var a=void 0;if(Xn!==null){var v=Xn.memoizedState;if(a=v.destroy,o!==null&&PC(o,v.deps)){m1(t,i,a,o);return}}Ri.flags|=e,c.memoizedState=m1(1|t,i,a,o)}function Y5(e,t){return FP(516,4,e,t)}function g1(e,t){return MC(516,4,e,t)}function b6(e,t){return MC(4,2,e,t)}function w6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function S6(e,t,i){return i=i!=null?i.concat([e]):null,MC(4,2,w6.bind(null,t,e),i)}function RC(){}function T6(e,t){var i=nd();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&PC(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function E6(e,t){var i=nd();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&PC(t,o[1])?o[0]:(e=e(),i.memoizedState=[e,t],e)}function pEe(e,t){var i=bp();Qh(98>i?98:i,function(){e(!0)}),Qh(97<i?97:i,function(){var o=ko.transition;ko.transition=1;try{e(!1),t()}finally{ko.transition=o}})}function OC(e,t,i){var o=po(),c=dc(e),a={lane:c,action:i,eagerReducer:null,eagerState:null,next:null},v=t.pending;if(v===null?a.next=a:(a.next=v.next,v.next=a),t.pending=a,v=e.alternate,e===Ri||v!==null&&v===Ri)Kg=p1=!0;else{if(e.lanes===0&&(v===null||v.lanes===0)&&(v=t.lastRenderedReducer,v!==null))try{var b=t.lastRenderedState,q=v(b,i);if(a.eagerReducer=v,a.eagerState=q,Ro(q,b))return}catch(M){}finally{}fc(e,c,o)}}var y1={readContext:Do,useCallback:Ra,useContext:Ra,useEffect:Ra,useImperativeHandle:Ra,useLayoutEffect:Ra,useMemo:Ra,useReducer:Ra,useRef:Ra,useState:Ra,useDebugValue:Ra,useDeferredValue:Ra,useTransition:Ra,useMutableSource:Ra,useOpaqueIdentifier:Ra,unstable_isNewReconciler:!1},mEe={readContext:Do,useCallback:function(e,t){return Xh().memoizedState=[e,t===void 0?null:t],e},useContext:Do,useEffect:Y5,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,FP(4,2,w6.bind(null,t,e),i)},useLayoutEffect:function(e,t){return FP(4,2,e,t)},useMemo:function(e,t){var i=Xh();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var o=Xh();return t=i!==void 0?i(t):t,o.memoizedState=o.baseState=t,e=o.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=OC.bind(null,Ri,e),[o.memoizedState,e]},useRef:X5,useState:Mg,useDebugValue:RC,useDeferredValue:function(e){var t=Mg(e),i=t[0],o=t[1];return Y5(function(){var c=ko.transition;ko.transition=1;try{o(e)}finally{ko.transition=c}},[e]),i},useTransition:function(){var e=Mg(!1),t=e[0];return e=pEe.bind(null,e[1]),X5(e),[e,t]},useMutableSource:function(e,t,i){var o=Xh();return o.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:i},_6(o,e,t,i)},useOpaqueIdentifier:function(){if(rl){var e=!1,t=lEe(function(){throw e||(e=!0,i("r:"+(rP++).toString(36))),Error(nt(355))}),i=Mg(t)[1];return(Ri.mode&2)===0&&(Ri.flags|=516,m1(5,function(){i("r:"+(rP++).toString(36))},void 0,null)),t}return t="r:"+(rP++).toString(36),Mg(t),t},unstable_isNewReconciler:!1},vEe={readContext:Do,useCallback:T6,useContext:Do,useEffect:g1,useImperativeHandle:S6,useLayoutEffect:b6,useMemo:E6,useReducer:Pg,useRef:v1,useState:function(){return Pg(Qs)},useDebugValue:RC,useDeferredValue:function(e){var t=Pg(Qs),i=t[0],o=t[1];return g1(function(){var c=ko.transition;ko.transition=1;try{o(e)}finally{ko.transition=c}},[e]),i},useTransition:function(){var e=Pg(Qs)[0];return[v1().current,e]},useMutableSource:x6,useOpaqueIdentifier:function(){return Pg(Qs)[0]},unstable_isNewReconciler:!1},gEe={readContext:Do,useCallback:T6,useContext:Do,useEffect:g1,useImperativeHandle:S6,useLayoutEffect:b6,useMemo:E6,useReducer:Cg,useRef:v1,useState:function(){return Cg(Qs)},useDebugValue:RC,useDeferredValue:function(e){var t=Cg(Qs),i=t[0],o=t[1];return g1(function(){var c=ko.transition;ko.transition=1;try{o(e)}finally{ko.transition=c}},[e]),i},useTransition:function(){var e=Cg(Qs)[0];return[v1().current,e]},useMutableSource:x6,useOpaqueIdentifier:function(){return Cg(Qs)[0]},unstable_isNewReconciler:!1},yEe=rd.ReactCurrentOwner,ps=!1;function Oa(e,t,i,o){t.child=e===null?g6(t,null,i,o):d1(t,e.child,i,o)}function J5(e,t,i,o,c){i=i.render;var a=t.ref;return pp(t,c),o=CC(e,t,i,o,a,c),e!==null&&!ps?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,ru(e,t,c)):(t.flags|=1,Oa(e,t,o,c),t.child)}function Q5(e,t,i,o,c,a){if(e===null){var v=i.type;return typeof v=="function"&&!NC(v)&&v.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=v,A6(e,t,v,o,c,a)):(e=Jb(i.type,null,o,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return v=e.child,(c&a)===0&&(c=v.memoizedProps,i=i.compare,i=i!==null?i:ay,i(c,o)&&e.ref===t.ref)?ru(e,t,a):(t.flags|=1,e=_c(v,o),e.ref=t.ref,e.return=t,t.child=e)}function A6(e,t,i,o,c,a){if(e!==null&&ay(e.memoizedProps,o)&&e.ref===t.ref)if(ps=!1,(a&c)!==0)(e.flags&16384)!==0&&(ps=!0);else return t.lanes=e.lanes,ru(e,t,a);return zP(e,t,i,o,a)}function oP(e,t,i){var o=t.pendingProps,c=o.children,a=e!==null?e.memoizedState:null;if(o.mode==="hidden"||o.mode==="unstable-defer-without-hiding"){if((t.mode&4)===0)t.memoizedState={baseLanes:0},Ub(t,i);else if((i&1073741824)!==0)t.memoizedState={baseLanes:0},Ub(t,a!==null?a.baseLanes:i);else return e=a!==null?a.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Ub(t,e),null;}else a!==null?(o=a.baseLanes|i,t.memoizedState=null):o=i,Ub(t,o);return Oa(e,t,c,i),t.child}function q6(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=128)}function zP(e,t,i,o,c){var a=Da(i)?Jh:Qn.current;return a=xp(t,a),pp(t,c),i=CC(e,t,i,o,a,c),e!==null&&!ps?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,ru(e,t,c)):(t.flags|=1,Oa(e,t,i,c),t.child)}function e4(e,t,i,o,c){if(Da(i)){var a=!0;Zb(t)}else a=!1;if(pp(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),m6(t,i,o),kP(t,i,o,c),o=!0;else if(e===null){var v=t.stateNode,b=t.memoizedProps;v.props=b;var q=v.context,M=i.contextType;typeof M=="object"&&M!==null?M=Do(M):(M=Da(i)?Jh:Qn.current,M=xp(t,M));var O=i.getDerivedStateFromProps,D=typeof O=="function"||typeof v.getSnapshotBeforeUpdate=="function";D||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b!==o||q!==M)&&G5(t,v,o,M),rc=!1;var U=t.memoizedState;v.state=U,ly(t,o,v,c),q=t.memoizedState,b!==o||U!==q||ka.current||rc?(typeof O=="function"&&(h1(t,i,O,o),q=t.memoizedState),(b=rc||$5(t,i,b,o,U,q,M))?(D||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4)):(typeof v.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=o,t.memoizedState=q),v.props=o,v.state=q,v.context=M,o=b):(typeof v.componentDidMount=="function"&&(t.flags|=4),o=!1)}else{v=t.stateNode,f6(e,t),b=t.memoizedProps,M=t.type===t.elementType?b:fs(t.type,b),v.props=M,D=t.pendingProps,U=v.context,q=i.contextType,typeof q=="object"&&q!==null?q=Do(q):(q=Da(i)?Jh:Qn.current,q=xp(t,q));var ne=i.getDerivedStateFromProps;(O=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b!==D||U!==q)&&G5(t,v,o,q),rc=!1,U=t.memoizedState,v.state=U,ly(t,o,v,c);var ue=t.memoizedState;b!==D||U!==ue||ka.current||rc?(typeof ne=="function"&&(h1(t,i,ne,o),ue=t.memoizedState),(M=rc||$5(t,i,M,o,U,ue,q))?(O||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(o,ue,q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(o,ue,q)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof v.componentDidUpdate!="function"||b===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&U===e.memoizedState||(t.flags|=256),t.memoizedProps=o,t.memoizedState=ue),v.props=o,v.state=ue,v.context=q,o=M):(typeof v.componentDidUpdate!="function"||b===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&U===e.memoizedState||(t.flags|=256),o=!1)}return NP(e,t,i,o,a,c)}function NP(e,t,i,o,c,a){q6(e,t);var v=(t.flags&64)!==0;if(!o&&!v)return c&&N5(t,i,!1),ru(e,t,a);o=t.stateNode,yEe.current=t;var b=v&&typeof i.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&v?(t.child=d1(t,e.child,null,a),t.child=d1(t,null,b,a)):Oa(e,t,b,a),t.memoizedState=o.state,c&&N5(t,i,!0),t.child}function t4(e){var t=e.stateNode;t.pendingContext?z5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&z5(e,t.context,!1),DP(e,t.containerInfo)}var jb={dehydrated:null,retryLane:0};function r4(e,t,i){var o=t.pendingProps,c=bi.current,a=!1,v;return(v=(t.flags&64)!==0)||(v=e!==null&&e.memoizedState===null?!1:(c&2)!==0),v?(a=!0,t.flags&=-65):e!==null&&e.memoizedState===null||o.fallback===void 0||o.unstable_avoidThisFallback===!0||(c|=1),wi(bi,c&1),e===null?(o.fallback!==void 0&&LP(t),e=o.children,c=o.fallback,a?(e=i4(t,e,c,i),t.child.memoizedState={baseLanes:i},t.memoizedState=jb,e):typeof o.unstable_expectedLoadTime=="number"?(e=i4(t,e,c,i),t.child.memoizedState={baseLanes:i},t.memoizedState=jb,t.lanes=33554432,e):(i=BC({mode:"visible",children:e},t.mode,i,null),i.return=t,t.child=i)):e.memoizedState!==null?a?(o=a4(e,t,o.children,o.fallback,i),a=t.child,c=e.child.memoizedState,a.memoizedState=c===null?{baseLanes:i}:{baseLanes:c.baseLanes|i},a.childLanes=e.childLanes&~i,t.memoizedState=jb,o):(i=n4(e,t,o.children,i),t.memoizedState=null,i):a?(o=a4(e,t,o.children,o.fallback,i),a=t.child,c=e.child.memoizedState,a.memoizedState=c===null?{baseLanes:i}:{baseLanes:c.baseLanes|i},a.childLanes=e.childLanes&~i,t.memoizedState=jb,o):(i=n4(e,t,o.children,i),t.memoizedState=null,i)}function i4(e,t,i,o){var c=e.mode,a=e.child;return t={mode:"hidden",children:t},(c&2)===0&&a!==null?(a.childLanes=0,a.pendingProps=t):a=BC(t,c,0,null),i=yp(i,c,o,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i}function n4(e,t,i,o){var c=e.child;return e=c.sibling,i=_c(c,{mode:"visible",children:i}),(t.mode&2)===0&&(i.lanes=o),i.return=t,i.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=i}function a4(e,t,i,o,c){var a=t.mode,v=e.child;e=v.sibling;var b={mode:"hidden",children:i};return(a&2)===0&&t.child!==v?(i=t.child,i.childLanes=0,i.pendingProps=b,v=i.lastEffect,v!==null?(t.firstEffect=i.firstEffect,t.lastEffect=v,v.nextEffect=null):t.firstEffect=t.lastEffect=null):i=_c(v,b),e!==null?o=_c(e,o):(o=yp(o,a,c,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,o}function o4(e,t){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),d6(e.return,t)}function sP(e,t,i,o,c,a){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:c,lastEffect:a}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=i,v.tailMode=c,v.lastEffect=a)}function s4(e,t,i){var o=t.pendingProps,c=o.revealOrder,a=o.tail;if(Oa(e,t,o.children,i),o=bi.current,(o&2)!==0)o=o&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&o4(e,i);else if(e.tag===19)o4(e,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(wi(bi,o),(t.mode&2)===0)t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&f1(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),sP(t,!1,c,i,a,t.lastEffect);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&f1(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}sP(t,!0,i,null,a,t.lastEffect);break;case"together":sP(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ru(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),my|=t.lanes,(i&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(nt(153));if(t.child!==null){for(e=t.child,i=_c(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=_c(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}return null}var I6,BP,P6,C6;I6=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};BP=function(){};P6=function(e,t,i,o){var c=e.memoizedProps;if(c!==o){e=t.stateNode,Hh(tl.current);var a=null;switch(i){case"input":c=fP(e,c),o=fP(e,o),a=[];break;case"option":c=vP(e,c),o=vP(e,o),a=[];break;case"select":c=oi({},c,{value:void 0}),o=oi({},o,{value:void 0}),a=[];break;case"textarea":c=gP(e,c),o=gP(e,o),a=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=a1)}xP(i,o);var v;i=null;for(M in c)if(!o.hasOwnProperty(M)&&c.hasOwnProperty(M)&&c[M]!=null)if(M==="style"){var b=c[M];for(v in b)b.hasOwnProperty(v)&&(i||(i={}),i[v]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(Jg.hasOwnProperty(M)?a||(a=[]):(a=a||[]).push(M,null));for(M in o){var q=o[M];if(b=c!=null?c[M]:void 0,o.hasOwnProperty(M)&&q!==b&&(q!=null||b!=null))if(M==="style"){if(b){for(v in b)!b.hasOwnProperty(v)||q&&q.hasOwnProperty(v)||(i||(i={}),i[v]="");for(v in q)q.hasOwnProperty(v)&&b[v]!==q[v]&&(i||(i={}),i[v]=q[v])}else i||(a||(a=[]),a.push(M,i)),i=q;}else M==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,b=b?b.__html:void 0,q!=null&&b!==q&&(a=a||[]).push(M,q)):M==="children"?typeof q!="string"&&typeof q!="number"||(a=a||[]).push(M,""+q):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(Jg.hasOwnProperty(M)?(q!=null&&M==="onScroll"&&Qr("scroll",e),a||b===q||(a=[])):typeof q=="object"&&q!==null&&q.$$typeof===oC?q.toString():(a=a||[]).push(M,q))}i&&(a=a||[]).push("style",i);var M=a;(t.updateQueue=M)&&(t.flags|=4)}};C6=function(e,t,i,o){i!==o&&(t.flags|=4)};function Rg(e,t){if(!rl)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function _Ee(e,t,i){var o=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Da(t.type)&&s1(),null;case 3:return wp(),ei(ka),ei(Qn),IC(),o=t.stateNode,o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Bb(t)?t.flags|=4:o.hydrate||(t.flags|=256)),BP(t),null;case 5:qC(t);var c=Hh(cy.current);if(i=t.type,e!==null&&t.stateNode!=null)P6(e,t,i,o,c),e.ref!==t.ref&&(t.flags|=128);else{if(!o){if(t.stateNode===null)throw Error(nt(166));return null}if(e=Hh(tl.current),Bb(t)){o=t.stateNode,i=t.type;var a=t.memoizedProps;switch(o[ac]=t,o[o1]=a,i){case"dialog":Qr("cancel",o),Qr("close",o);break;case"iframe":case"object":case"embed":Qr("load",o);break;case"video":case"audio":for(e=0;e<Fg.length;e++)Qr(Fg[e],o);break;case"source":Qr("error",o);break;case"img":case"image":case"link":Qr("error",o),Qr("load",o);break;case"details":Qr("toggle",o);break;case"input":u5(o,a),Qr("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},Qr("invalid",o);break;case"textarea":h5(o,a),Qr("invalid",o)}xP(i,a),e=null;for(var v in a)a.hasOwnProperty(v)&&(c=a[v],v==="children"?typeof c=="string"?o.textContent!==c&&(e=["children",c]):typeof c=="number"&&o.textContent!==""+c&&(e=["children",""+c]):Jg.hasOwnProperty(v)&&c!=null&&v==="onScroll"&&Qr("scroll",o));switch(i){case"input":Mb(o),c5(o,a,!0);break;case"textarea":Mb(o),d5(o);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(o.onclick=a1)}o=e,t.updateQueue=o,o!==null&&(t.flags|=4)}else{switch(v=c.nodeType===9?c:c.ownerDocument,e===yP.html&&(e=S4(i)),e===yP.html?i==="script"?(e=v.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=v.createElement(i,{is:o.is}):(e=v.createElement(i),i==="select"&&(v=e,o.multiple?v.multiple=!0:o.size&&(v.size=o.size))):e=v.createElementNS(e,i),e[ac]=t,e[o1]=o,I6(e,t,!1,!1),t.stateNode=e,v=bP(i,o),i){case"dialog":Qr("cancel",e),Qr("close",e),c=o;break;case"iframe":case"object":case"embed":Qr("load",e),c=o;break;case"video":case"audio":for(c=0;c<Fg.length;c++)Qr(Fg[c],e);c=o;break;case"source":Qr("error",e),c=o;break;case"img":case"image":case"link":Qr("error",e),Qr("load",e),c=o;break;case"details":Qr("toggle",e),c=o;break;case"input":u5(e,o),c=fP(e,o),Qr("invalid",e);break;case"option":c=vP(e,o);break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=oi({},o,{value:void 0}),Qr("invalid",e);break;case"textarea":h5(e,o),c=gP(e,o),Qr("invalid",e);break;default:c=o}xP(i,c);var b=c;for(a in b)if(b.hasOwnProperty(a)){var q=b[a];a==="style"?A4(e,q):a==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&T4(e,q)):a==="children"?typeof q=="string"?(i!=="textarea"||q!=="")&&Qg(e,q):typeof q=="number"&&Qg(e,""+q):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Jg.hasOwnProperty(a)?q!=null&&a==="onScroll"&&Qr("scroll",e):q!=null&&eC(e,a,q,v))}switch(i){case"input":Mb(e),c5(e,o,!1);break;case"textarea":Mb(e),d5(e);break;case"option":o.value!=null&&e.setAttribute("value",""+mc(o.value));break;case"select":e.multiple=!!o.multiple,a=o.value,a!=null?cp(e,!!o.multiple,a,!1):o.defaultValue!=null&&cp(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=a1)}i6(i,o)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)C6(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(nt(166));i=Hh(cy.current),Hh(tl.current),Bb(t)?(o=t.stateNode,i=t.memoizedProps,o[ac]=t,o.nodeValue!==i&&(t.flags|=4)):(o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[ac]=t,t.stateNode=o)}return null;case 13:return ei(bi),o=t.memoizedState,(t.flags&64)!==0?(t.lanes=i,t):(o=o!==null,i=!1,e===null?t.memoizedProps.fallback!==void 0&&Bb(t):i=e.memoizedState!==null,o&&!i&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(bi.current&1)!==0?Pn===0&&(Pn=3):((Pn===0||Pn===3)&&(Pn=4),ga===null||(my&134217727)===0&&(Ap&134217727)===0||vp(ga,Jn))),(o||i)&&(t.flags|=4),null);case 4:return wp(),BP(t),e===null&&e6(t.stateNode.containerInfo),null;case 10:return EC(t),null;case 17:return Da(t.type)&&s1(),null;case 19:if(ei(bi),o=t.memoizedState,o===null)return null;if(a=(t.flags&64)!==0,v=o.rendering,v===null){if(a)Rg(o,!1);else{if(Pn!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(v=f1(e),v!==null){for(t.flags|=64,Rg(o,!1),a=v.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),o.lastEffect===null&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=i,i=t.child;i!==null;)a=i,e=o,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,v=a.alternate,v===null?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=v.childLanes,a.lanes=v.lanes,a.child=v.child,a.memoizedProps=v.memoizedProps,a.memoizedState=v.memoizedState,a.updateQueue=v.updateQueue,a.type=v.type,e=v.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return wi(bi,bi.current&1|2),t.child}e=e.sibling}o.tail!==null&&Yn()>WP&&(t.flags|=64,a=!0,Rg(o,!1),t.lanes=33554432)}}else{if(!a)if(e=f1(v),e!==null){if(t.flags|=64,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Rg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!v.alternate&&!rl)return t=t.lastEffect=o.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Yn()-o.renderingStartTime>WP&&i!==1073741824&&(t.flags|=64,a=!0,Rg(o,!1),t.lanes=33554432);o.isBackwards?(v.sibling=t.child,t.child=v):(i=o.last,i!==null?i.sibling=v:t.child=v,o.last=v)}return o.tail!==null?(i=o.tail,o.rendering=i,o.tail=i.sibling,o.lastEffect=t.lastEffect,o.renderingStartTime=Yn(),i.sibling=null,t=bi.current,wi(bi,a?t&1|2:t&1),i):null;case 23:case 24:return zC(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&o.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(nt(156,t.tag))}function xEe(e){switch(e.tag){case 1:Da(e.type)&&s1();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(wp(),ei(ka),ei(Qn),IC(),t=e.flags,(t&64)!==0)throw Error(nt(285));return e.flags=t&-4097|64,e;case 5:return qC(e),null;case 13:return ei(bi),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return ei(bi),null;case 4:return wp(),null;case 10:return EC(e),null;case 23:case 24:return zC(),null;default:return null}}function kC(e,t){try{var i="",o=t;do i+=eTe(o),o=o.return;while(o);var c=i}catch(a){c=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:c}}function jP(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var bEe=typeof WeakMap=="function"?WeakMap:Map;function M6(e,t,i){i=cc(-1,i),i.tag=3,i.payload={element:null};var o=t.value;return i.callback=function(){x1||(x1=!0,ZP=o),jP(e,t)},i}function R6(e,t,i){i=cc(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=t.value;i.payload=function(){return jP(e,t),o(c)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(i.callback=function(){typeof o!="function"&&(el===null?el=new Set([this]):el.add(this),jP(e,t));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),i}var wEe=typeof WeakSet=="function"?WeakSet:Set;function l4(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){pc(e,i)}else t.current=null}function SEe(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var i=e.memoizedProps,o=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?i:fs(t.type,i),o),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&bC(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(nt(163))}function TEe(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:if(t=i.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var o=e.create;e.destroy=o()}e=e.next}while(e!==t)}if(t=i.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;o=c.next,c=c.tag,(c&4)!==0&&(c&1)!==0&&(j6(i,e),REe(i,e)),e=o}while(e!==t)}return;case 1:e=i.stateNode,i.flags&4&&(t===null?e.componentDidMount():(o=i.elementType===i.type?t.memoizedProps:fs(i.type,t.memoizedProps),e.componentDidUpdate(o,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=i.updateQueue,t!==null&&V5(i,t,e);return;case 3:if(t=i.updateQueue,t!==null){if(e=null,i.child!==null)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}V5(i,t,e)}return;case 5:e=i.stateNode,t===null&&i.flags&4&&i6(i.type,i.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&L4(i))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(nt(163))}function u4(e,t){for(var i=e;;){if(i.tag===5){var o=i.stateNode;if(t)o=o.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{o=i.stateNode;var c=i.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=E4("display",c)}}else if(i.tag===6)i.stateNode.nodeValue=t?"":i.memoizedProps;else if((i.tag!==23&&i.tag!==24||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function c4(e,t){if(Yh&&typeof Yh.onCommitFiberUnmount=="function")try{Yh.onCommitFiberUnmount(wC,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var i=e=e.next;do{var o=i,c=o.destroy;if(o=o.tag,c!==void 0)if((o&4)!==0)j6(t,i);else{o=t;try{c()}catch(a){pc(o,a)}}i=i.next}while(i!==e)}break;case 1:if(l4(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){pc(t,a)}break;case 5:l4(t);break;case 4:O6(e,t)}}function h4(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function d4(e){return e.tag===5||e.tag===3||e.tag===4}function f4(e){e:{for(var t=e.return;t!==null;){if(d4(t))break e;t=t.return}throw Error(nt(160))}var i=t;switch(t=i.stateNode,i.tag){case 5:var o=!1;break;case 3:t=t.containerInfo,o=!0;break;case 4:t=t.containerInfo,o=!0;break;default:throw Error(nt(161))}i.flags&16&&(Qg(t,""),i.flags&=-17);e:t:for(i=e;;){for(;i.sibling===null;){if(i.return===null||d4(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2)){i=i.stateNode;break e}}o?UP(e,i,t):VP(e,i,t)}function UP(e,t,i){var o=e.tag,c=o===5||o===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=a1));else if(o!==4&&(e=e.child,e!==null))for(UP(e,t,i),e=e.sibling;e!==null;)UP(e,t,i),e=e.sibling}function VP(e,t,i){var o=e.tag,c=o===5||o===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(VP(e,t,i),e=e.sibling;e!==null;)VP(e,t,i),e=e.sibling}function O6(e,t){for(var i=t,o=!1,c,a;;){if(!o){o=i.return;e:for(;;){if(o===null)throw Error(nt(160));switch(c=o.stateNode,o.tag){case 5:a=!1;break e;case 3:c=c.containerInfo,a=!0;break e;case 4:c=c.containerInfo,a=!0;break e}o=o.return}o=!0}if(i.tag===5||i.tag===6){e:for(var v=e,b=i,q=b;;)if(c4(v,q),q.child!==null&&q.tag!==4)q.child.return=q,q=q.child;else{if(q===b)break e;for(;q.sibling===null;){if(q.return===null||q.return===b)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}a?(v=c,b=i.stateNode,v.nodeType===8?v.parentNode.removeChild(b):v.removeChild(b)):c.removeChild(i.stateNode)}else if(i.tag===4){if(i.child!==null){c=i.stateNode.containerInfo,a=!0,i.child.return=i,i=i.child;continue}}else if(c4(e,i),i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return,i.tag===4&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function lP(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do(o.tag&3)===3&&(e=o.destroy,o.destroy=void 0,e!==void 0&&e()),o=o.next;while(o!==i)}return;case 1:return;case 5:if(i=t.stateNode,i!=null){o=t.memoizedProps;var c=e!==null?e.memoizedProps:o;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(i[o1]=o,e==="input"&&o.type==="radio"&&o.name!=null&&b4(i,o),bP(e,c),t=bP(e,o),c=0;c<a.length;c+=2){var v=a[c],b=a[c+1];v==="style"?A4(i,b):v==="dangerouslySetInnerHTML"?T4(i,b):v==="children"?Qg(i,b):eC(i,v,b,t)}switch(e){case"input":pP(i,o);break;case"textarea":w4(i,o);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!o.multiple,a=o.value,a!=null?cp(i,!!o.multiple,a,!1):e!==!!o.multiple&&(o.defaultValue!=null?cp(i,!!o.multiple,o.defaultValue,!0):cp(i,!!o.multiple,o.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(nt(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:i=t.stateNode,i.hydrate&&(i.hydrate=!1,L4(i.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(FC=Yn(),u4(t.child,!0)),p4(t);return;case 19:p4(t);return;case 17:return;case 23:case 24:u4(t,t.memoizedState!==null);return}throw Error(nt(163))}function p4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new wEe),t.forEach(function(o){var c=DEe.bind(null,e,o);i.has(o)||(i.add(o),o.then(c,c))})}}function EEe(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var AEe=Math.ceil,_1=rd.ReactCurrentDispatcher,DC=rd.ReactCurrentOwner,Gt=0,ga=null,rn=null,Jn=0,ed=0,$P=xc(0),Pn=0,O1=null,Ep=0,my=0,Ap=0,LC=0,GP=null,FC=0,WP=1/0;function qp(){WP=Yn()+500}var xt=null,x1=!1,ZP=null,el=null,yc=!1,Hg=null,zg=90,KP=[],HP=[],iu=null,Xg=0,XP=null,Hb=-1,eu=0,Xb=0,Yg=null,Yb=!1;function po(){return(Gt&48)!==0?Yn():Hb!==-1?Hb:Hb=Yn()}function dc(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return bp()===99?1:2;if(eu===0&&(eu=Ep),fEe.transition!==0){Xb!==0&&(Xb=GP!==null?GP.pendingLanes:0),e=eu;var t=4186112&~Xb;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=bp(),(Gt&4)!==0&&e===98?e=i1(12,eu):(e=vTe(e),e=i1(e,eu)),e}function fc(e,t,i){if(50<Xg)throw Xg=0,XP=null,Error(nt(185));if(e=k1(e,t),e===null)return null;A1(e,t,i),e===ga&&(Ap|=t,Pn===4&&vp(e,Jn));var o=bp();t===1?(Gt&8)!==0&&(Gt&48)===0?YP(e):(Lo(e,i),Gt===0&&(qp(),il())):((Gt&4)===0||o!==98&&o!==99||(iu===null?iu=new Set([e]):iu.add(e)),Lo(e,i)),GP=e}function k1(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}function Lo(e,t){for(var i=e.callbackNode,o=e.suspendedLanes,c=e.pingedLanes,a=e.expirationTimes,v=e.pendingLanes;0<v;){var b=31-vc(v),q=1<<b,M=a[b];if(M===-1){if((q&o)===0||(q&c)!==0){M=t,tp(q);var O=$r;a[b]=10<=O?M+250:6<=O?M+5e3:-1}}else M<=t&&(e.expiredLanes|=q);v&=~q}if(o=iy(e,e===ga?Jn:0),t=$r,o===0)i!==null&&(i!==iP&&RP(i),e.callbackNode=null,e.callbackPriority=0);else{if(i!==null){if(e.callbackPriority===t)return;i!==iP&&RP(i)}t===15?(i=YP.bind(null,e),Ql===null?(Ql=[i],Kb=SC(M1,h6)):Ql.push(i),i=iP):t===14?i=sy(99,YP.bind(null,e)):(i=gTe(t),i=sy(i,k6.bind(null,e))),e.callbackPriority=t,e.callbackNode=i}}function k6(e){if(Hb=-1,Xb=eu=0,(Gt&48)!==0)throw Error(nt(327));var t=e.callbackNode;if(bc()&&e.callbackNode!==t)return null;var i=iy(e,e===ga?Jn:0);if(i===0)return null;var o=i,c=Gt;Gt|=16;var a=z6();(ga!==e||Jn!==o)&&(qp(),gp(e,o));do try{PEe();break}catch(b){F6(e,b)}while(!0);if(TC(),_1.current=a,Gt=c,rn!==null?o=0:(ga=null,Jn=0,o=Pn),(Ep&Ap)!==0)gp(e,0);else if(o!==0){if(o===2&&(Gt|=64,e.hydrate&&(e.hydrate=!1,bC(e.containerInfo)),i=V4(e),i!==0&&(o=Ng(e,i))),o===1)throw t=O1,gp(e,0),vp(e,i),Lo(e,Yn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=i,o){case 0:case 1:throw Error(nt(345));case 2:Gh(e);break;case 3:if(vp(e,i),(i&62914560)===i&&(o=FC+500-Yn(),10<o)){if(iy(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){po(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=D5(Gh.bind(null,e),o);break}Gh(e);break;case 4:if(vp(e,i),(i&4186112)===i)break;for(o=e.eventTimes,c=-1;0<i;){var v=31-vc(i);a=1<<v,v=o[v],v>c&&(c=v),i&=~a}if(i=c,i=Yn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*AEe(i/1960))-i,10<i){e.timeoutHandle=D5(Gh.bind(null,e),i);break}Gh(e);break;case 5:Gh(e);break;default:throw Error(nt(329))}}return Lo(e,Yn()),e.callbackNode===t?k6.bind(null,e):null}function vp(e,t){for(t&=~LC,t&=~Ap,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-vc(t),o=1<<i;e[i]=-1,t&=~o}}function YP(e){if((Gt&48)!==0)throw Error(nt(327));if(bc(),e===ga&&(e.expiredLanes&Jn)!==0){var t=Jn,i=Ng(e,t);(Ep&Ap)!==0&&(t=iy(e,t),i=Ng(e,t))}else t=iy(e,0),i=Ng(e,t);if(e.tag!==0&&i===2&&(Gt|=64,e.hydrate&&(e.hydrate=!1,bC(e.containerInfo)),t=V4(e),t!==0&&(i=Ng(e,t))),i===1)throw i=O1,gp(e,0),vp(e,t),Lo(e,Yn()),i;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gh(e),Lo(e,Yn()),null}function qEe(){if(iu!==null){var e=iu;iu=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Lo(t,Yn())})}il()}function D6(e,t){var i=Gt;Gt|=1;try{return e(t)}finally{Gt=i,Gt===0&&(qp(),il())}}function L6(e,t){var i=Gt;Gt&=-2,Gt|=8;try{return e(t)}finally{Gt=i,Gt===0&&(qp(),il())}}function Ub(e,t){wi($P,ed),ed|=t,Ep|=t}function zC(){ed=$P.current,ei($P)}function gp(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,sEe(i)),rn!==null)for(i=rn.return;i!==null;){var o=i;switch(o.tag){case 1:o=o.type.childContextTypes,o!=null&&s1();break;case 3:wp(),ei(ka),ei(Qn),IC();break;case 5:qC(o);break;case 4:wp();break;case 13:ei(bi);break;case 19:ei(bi);break;case 10:EC(o);break;case 23:case 24:zC()}i=i.return}ga=e,rn=_c(e.current,null),Jn=ed=Ep=t,Pn=0,O1=null,LC=Ap=my=0}function F6(e,t){do{var i=rn;try{if(TC(),Zg.current=y1,p1){for(var o=Ri.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}p1=!1}if(hy=0,In=Xn=Ri=null,Kg=!1,DC.current=null,i===null||i.return===null){Pn=1,O1=t,rn=null;break}e:{var a=e,v=i.return,b=i,q=t;if(t=Jn,b.flags|=2048,b.firstEffect=b.lastEffect=null,q!==null&&typeof q=="object"&&typeof q.then=="function"){var M=q;if((b.mode&2)===0){var O=b.alternate;O?(b.updateQueue=O.updateQueue,b.memoizedState=O.memoizedState,b.lanes=O.lanes):(b.updateQueue=null,b.memoizedState=null)}var D=(bi.current&1)!==0,U=v;do{var ne;if(ne=U.tag===13){var ue=U.memoizedState;if(ue!==null)ne=ue.dehydrated!==null;else{var fe=U.memoizedProps;ne=fe.fallback===void 0?!1:fe.unstable_avoidThisFallback!==!0?!0:!D}}if(ne){var H=U.updateQueue;if(H===null){var J=new Set;J.add(M),U.updateQueue=J}else H.add(M);if((U.mode&2)===0){if(U.flags|=64,b.flags|=16384,b.flags&=-2981,b.tag===1)if(b.alternate===null)b.tag=17;else{var re=cc(-1,1);re.tag=2,hc(b,re)}b.lanes|=1;break e}q=void 0,b=t;var xe=a.pingCache;if(xe===null?(xe=a.pingCache=new bEe,q=new Set,xe.set(M,q)):(q=xe.get(M),q===void 0&&(q=new Set,xe.set(M,q))),!q.has(b)){q.add(b);var Ae=kEe.bind(null,a,M,b);M.then(Ae,Ae)}U.flags|=4096,U.lanes=t;break e}U=U.return}while(U!==null);q=Error((up(b.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Pn!==5&&(Pn=2),q=kC(q,b),U=v;do{switch(U.tag){case 3:a=q,U.flags|=4096,t&=-t,U.lanes|=t;var Ge=M6(U,a,t);U5(U,Ge);break e;case 1:a=q;var Ne=U.type,Ye=U.stateNode;if((U.flags&64)===0&&(typeof Ne.getDerivedStateFromError=="function"||Ye!==null&&typeof Ye.componentDidCatch=="function"&&(el===null||!el.has(Ye)))){U.flags|=4096,t&=-t,U.lanes|=t;var ct=R6(U,a,t);U5(U,ct);break e}}U=U.return}while(U!==null)}B6(i)}catch(ht){t=ht,rn===i&&i!==null&&(rn=i=i.return);continue}break}while(!0)}function z6(){var e=_1.current;return _1.current=y1,e===null?y1:e}function Ng(e,t){var i=Gt;Gt|=16;var o=z6();ga===e&&Jn===t||gp(e,t);do try{IEe();break}catch(c){F6(e,c)}while(!0);if(TC(),Gt=i,_1.current=o,rn!==null)throw Error(nt(261));return ga=null,Jn=0,Pn}function IEe(){for(;rn!==null;)N6(rn)}function PEe(){for(;rn!==null&&!cEe();)N6(rn)}function N6(e){var t=U6(e.alternate,e,ed);e.memoizedProps=e.pendingProps,t===null?B6(e):rn=t,DC.current=null}function B6(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&2048)===0){if(i=_Ee(i,t,ed),i!==null){rn=i;return}if(i=t,i.tag!==24&&i.tag!==23||i.memoizedState===null||(ed&1073741824)!==0||(i.mode&4)===0){for(var o=0,c=i.child;c!==null;)o|=c.lanes|c.childLanes,c=c.sibling;i.childLanes=o}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(i=xEe(t),i!==null){i.flags&=2047,rn=i;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){rn=t;return}rn=t=e}while(t!==null);Pn===0&&(Pn=5)}function Gh(e){var t=bp();return Qh(99,CEe.bind(null,e,t)),null}function CEe(e,t){do bc();while(Hg!==null);if((Gt&48)!==0)throw Error(nt(327));var i=e.finishedWork;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(nt(177));e.callbackNode=null;var o=i.lanes|i.childLanes,c=o,a=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var v=e.eventTimes,b=e.expirationTimes;0<a;){var q=31-vc(a),M=1<<q;c[q]=0,v[q]=-1,b[q]=-1,a&=~M}if(iu!==null&&(o&24)===0&&iu.has(e)&&iu.delete(e),e===ga&&(rn=ga=null,Jn=0),1<i.flags?i.lastEffect!==null?(i.lastEffect.nextEffect=i,o=i.firstEffect):o=i:o=i.firstEffect,o!==null){if(c=Gt,Gt|=32,DC.current=null,eP=$b,v=P5(),qP(v)){if("selectionStart"in v)b={start:v.selectionStart,end:v.selectionEnd};else e:if(b=(b=v.ownerDocument)&&b.defaultView||window,(M=b.getSelection&&b.getSelection())&&M.rangeCount!==0){b=M.anchorNode,a=M.anchorOffset,q=M.focusNode,M=M.focusOffset;try{b.nodeType,q.nodeType}catch(ht){b=null;break e}var O=0,D=-1,U=-1,ne=0,ue=0,fe=v,H=null;t:for(;;){for(var J;fe!==b||a!==0&&fe.nodeType!==3||(D=O+a),fe!==q||M!==0&&fe.nodeType!==3||(U=O+M),fe.nodeType===3&&(O+=fe.nodeValue.length),(J=fe.firstChild)!==null;)H=fe,fe=J;for(;;){if(fe===v)break t;if(H===b&&++ne===a&&(D=O),H===q&&++ue===M&&(U=O),(J=fe.nextSibling)!==null)break;fe=H,H=fe.parentNode}fe=J}b=D===-1||U===-1?null:{start:D,end:U}}else b=null;b=b||{start:0,end:0}}else b=null;tP={focusedElem:v,selectionRange:b},$b=!1,Yg=null,Yb=!1,xt=o;do try{MEe()}catch(ht){if(xt===null)throw Error(nt(330));pc(xt,ht),xt=xt.nextEffect}while(xt!==null);Yg=null,xt=o;do try{for(v=e;xt!==null;){var re=xt.flags;if(re&16&&Qg(xt.stateNode,""),re&128){var xe=xt.alternate;if(xe!==null){var Ae=xe.ref;Ae!==null&&(typeof Ae=="function"?Ae(null):Ae.current=null)}}switch(re&1038){case 2:f4(xt),xt.flags&=-3;break;case 6:f4(xt),xt.flags&=-3,lP(xt.alternate,xt);break;case 1024:xt.flags&=-1025;break;case 1028:xt.flags&=-1025,lP(xt.alternate,xt);break;case 4:lP(xt.alternate,xt);break;case 8:b=xt,O6(v,b);var Ge=b.alternate;h4(b),Ge!==null&&h4(Ge)}xt=xt.nextEffect}}catch(ht){if(xt===null)throw Error(nt(330));pc(xt,ht),xt=xt.nextEffect}while(xt!==null);if(Ae=tP,xe=P5(),re=Ae.focusedElem,v=Ae.selectionRange,xe!==re&&re&&re.ownerDocument&&Y4(re.ownerDocument.documentElement,re)){for(v!==null&&qP(re)&&(xe=v.start,Ae=v.end,Ae===void 0&&(Ae=xe),"selectionStart"in re?(re.selectionStart=xe,re.selectionEnd=Math.min(Ae,re.value.length)):(Ae=(xe=re.ownerDocument||document)&&xe.defaultView||window,Ae.getSelection&&(Ae=Ae.getSelection(),b=re.textContent.length,Ge=Math.min(v.start,b),v=v.end===void 0?Ge:Math.min(v.end,b),!Ae.extend&&Ge>v&&(b=v,v=Ge,Ge=b),b=I5(re,Ge),a=I5(re,v),b&&a&&(Ae.rangeCount!==1||Ae.anchorNode!==b.node||Ae.anchorOffset!==b.offset||Ae.focusNode!==a.node||Ae.focusOffset!==a.offset)&&(xe=xe.createRange(),xe.setStart(b.node,b.offset),Ae.removeAllRanges(),Ge>v?(Ae.addRange(xe),Ae.extend(a.node,a.offset)):(xe.setEnd(a.node,a.offset),Ae.addRange(xe)))))),xe=[],Ae=re;Ae=Ae.parentNode;)Ae.nodeType===1&&xe.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof re.focus=="function"&&re.focus(),re=0;re<xe.length;re++)Ae=xe[re],Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}$b=!!eP,tP=eP=null,e.current=i,xt=o;do try{for(re=e;xt!==null;){var Ne=xt.flags;if(Ne&36&&TEe(re,xt.alternate,xt),Ne&128){xe=void 0;var Ye=xt.ref;if(Ye!==null){var ct=xt.stateNode;switch(xt.tag){case 5:xe=ct;break;default:xe=ct}typeof Ye=="function"?Ye(xe):Ye.current=xe}}xt=xt.nextEffect}}catch(ht){if(xt===null)throw Error(nt(330));pc(xt,ht),xt=xt.nextEffect}while(xt!==null);xt=null,dEe(),Gt=c}else e.current=i;if(yc)yc=!1,Hg=e,zg=t;else for(xt=o;xt!==null;)t=xt.nextEffect,xt.nextEffect=null,xt.flags&8&&(Ne=xt,Ne.sibling=null,Ne.stateNode=null),xt=t;if(o=e.pendingLanes,o===0&&(el=null),o===1?e===XP?Xg++:(Xg=0,XP=e):Xg=0,i=i.stateNode,Yh&&typeof Yh.onCommitFiberRoot=="function")try{Yh.onCommitFiberRoot(wC,i,void 0,(i.current.flags&64)===64)}catch(ht){}if(Lo(e,Yn()),x1)throw x1=!1,e=ZP,ZP=null,e;return(Gt&8)!==0||il(),null}function MEe(){for(;xt!==null;){var e=xt.alternate;Yb||Yg===null||((xt.flags&8)!==0?m5(xt,Yg)&&(Yb=!0):xt.tag===13&&EEe(e,xt)&&m5(xt,Yg)&&(Yb=!0));var t=xt.flags;(t&256)!==0&&SEe(e,xt),(t&512)===0||yc||(yc=!0,sy(97,function(){return bc(),null})),xt=xt.nextEffect}}function bc(){if(zg!==90){var e=97<zg?97:zg;return zg=90,Qh(e,OEe)}return!1}function REe(e,t){KP.push(t,e),yc||(yc=!0,sy(97,function(){return bc(),null}))}function j6(e,t){HP.push(t,e),yc||(yc=!0,sy(97,function(){return bc(),null}))}function OEe(){if(Hg===null)return!1;var e=Hg;if(Hg=null,(Gt&48)!==0)throw Error(nt(331));var t=Gt;Gt|=32;var i=HP;HP=[];for(var o=0;o<i.length;o+=2){var c=i[o],a=i[o+1],v=c.destroy;if(c.destroy=void 0,typeof v=="function")try{v()}catch(q){if(a===null)throw Error(nt(330));pc(a,q)}}for(i=KP,KP=[],o=0;o<i.length;o+=2){c=i[o],a=i[o+1];try{var b=c.create;c.destroy=b()}catch(q){if(a===null)throw Error(nt(330));pc(a,q)}}for(b=e.current.firstEffect;b!==null;)e=b.nextEffect,b.nextEffect=null,b.flags&8&&(b.sibling=null,b.stateNode=null),b=e;return Gt=t,il(),!0}function m4(e,t,i){t=kC(i,t),t=M6(e,t,1),hc(e,t),t=po(),e=k1(e,1),e!==null&&(A1(e,1,t),Lo(e,t))}function pc(e,t){if(e.tag===3)m4(e,e,t);else for(var i=e.return;i!==null;){if(i.tag===3){m4(i,e,t);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(el===null||!el.has(o))){e=kC(t,e);var c=R6(i,e,1);if(hc(i,c),c=po(),i=k1(i,1),i!==null)A1(i,1,c),Lo(i,c);else if(typeof o.componentDidCatch=="function"&&(el===null||!el.has(o)))try{o.componentDidCatch(t,e)}catch(a){}break}}i=i.return}}function kEe(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),t=po(),e.pingedLanes|=e.suspendedLanes&i,ga===e&&(Jn&i)===i&&(Pn===4||Pn===3&&(Jn&62914560)===Jn&&500>Yn()-FC?gp(e,0):LC|=i),Lo(e,t)}function DEe(e,t){var i=e.stateNode;i!==null&&i.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=bp()===99?1:2:(eu===0&&(eu=Ep),t=rp(62914560&~eu),t===0&&(t=4194304))),i=po(),e=k1(e,t),e!==null&&(A1(e,t,i),Lo(e,i))}var U6;U6=function(e,t,i){var o=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||ka.current)ps=!0;else if((i&o)!==0)ps=(e.flags&16384)!==0;else{switch(ps=!1,t.tag){case 3:t4(t),aP();break;case 5:W5(t);break;case 1:Da(t.type)&&Zb(t);break;case 4:DP(t,t.stateNode.containerInfo);break;case 10:o=t.memoizedProps.value;var c=t.type._context;wi(l1,c._currentValue),c._currentValue=o;break;case 13:if(t.memoizedState!==null)return(i&t.child.childLanes)!==0?r4(e,t,i):(wi(bi,bi.current&1),t=ru(e,t,i),t!==null?t.sibling:null);wi(bi,bi.current&1);break;case 19:if(o=(i&t.childLanes)!==0,(e.flags&64)!==0){if(o)return s4(e,t,i);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),wi(bi,bi.current),o)break;return null;case 23:case 24:return t.lanes=0,oP(e,t,i)}return ru(e,t,i)}}else ps=!1;switch(t.lanes=0,t.tag){case 2:if(o=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=xp(t,Qn.current),pp(t,i),c=CC(null,t,o,e,c,i),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(o)){var a=!0;Zb(t)}else a=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,AC(t);var v=o.getDerivedStateFromProps;typeof v=="function"&&h1(t,o,v,e),c.updater=R1,t.stateNode=c,c._reactInternals=t,kP(t,o,e,i),t=NP(null,t,o,!0,a,i)}else t.tag=0,Oa(null,t,c,i),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=c._init,c=a(c._payload),t.type=c,a=t.tag=FEe(c),e=fs(c,e),a){case 0:t=zP(null,t,c,e,i);break e;case 1:t=e4(null,t,c,e,i);break e;case 11:t=J5(null,t,c,e,i);break e;case 14:t=Q5(null,t,c,fs(c.type,e),o,i);break e}throw Error(nt(306,c,""))}return t;case 0:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:fs(o,c),zP(e,t,o,c,i);case 1:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:fs(o,c),e4(e,t,o,c,i);case 3:if(t4(t),o=t.updateQueue,e===null||o===null)throw Error(nt(282));if(o=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,f6(e,t),ly(t,o,null,i),o=t.memoizedState.element,o===c)aP(),t=ru(e,t,i);else{if(c=t.stateNode,(a=c.hydrate)&&(oc=fp(t.stateNode.containerInfo.firstChild),tu=t,a=rl=!0),a){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)a=e[c],a._workInProgressVersionPrimary=e[c+1],mp.push(a);for(i=g6(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|1024,i=i.sibling}else Oa(e,t,o,i),aP();t=t.child}return t;case 5:return W5(t),e===null&&LP(t),o=t.type,c=t.pendingProps,a=e!==null?e.memoizedProps:null,v=c.children,CP(o,c)?v=null:a!==null&&CP(o,a)&&(t.flags|=16),q6(e,t),Oa(e,t,v,i),t.child;case 6:return e===null&&LP(t),null;case 13:return r4(e,t,i);case 4:return DP(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=d1(t,null,o,i):Oa(e,t,o,i),t.child;case 11:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:fs(o,c),J5(e,t,o,c,i);case 7:return Oa(e,t,t.pendingProps,i),t.child;case 8:return Oa(e,t,t.pendingProps.children,i),t.child;case 12:return Oa(e,t,t.pendingProps.children,i),t.child;case 10:e:{o=t.type._context,c=t.pendingProps,v=t.memoizedProps,a=c.value;var b=t.type._context;if(wi(l1,b._currentValue),b._currentValue=a,v!==null)if(b=v.value,a=Ro(b,a)?0:(typeof o._calculateChangedBits=="function"?o._calculateChangedBits(b,a):1073741823)|0,a===0){if(v.children===c.children&&!ka.current){t=ru(e,t,i);break e}}else for(b=t.child,b!==null&&(b.return=t);b!==null;){var q=b.dependencies;if(q!==null){v=b.child;for(var M=q.firstContext;M!==null;){if(M.context===o&&(M.observedBits&a)!==0){b.tag===1&&(M=cc(-1,i&-i),M.tag=2,hc(b,M)),b.lanes|=i,M=b.alternate,M!==null&&(M.lanes|=i),d6(b.return,i),q.lanes|=i;break}M=M.next}}else v=b.tag===10&&b.type===t.type?null:b.child;if(v!==null)v.return=b;else for(v=b;v!==null;){if(v===t){v=null;break}if(b=v.sibling,b!==null){b.return=v.return,v=b;break}v=v.return}b=v}Oa(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps,o=a.children,pp(t,i),c=Do(c,a.unstable_observedBits),o=o(c),t.flags|=1,Oa(e,t,o,i),t.child;case 14:return c=t.type,a=fs(c,t.pendingProps),a=fs(c.type,a),Q5(e,t,c,a,o,i);case 15:return A6(e,t,t.type,t.pendingProps,o,i);case 17:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:fs(o,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Da(o)?(e=!0,Zb(t)):e=!1,pp(t,i),m6(t,o,c),kP(t,o,c,i),NP(null,t,o,!0,e,i);case 19:return s4(e,t,i);case 23:return oP(e,t,i);case 24:return oP(e,t,i)}throw Error(nt(156,t.tag))};function LEe(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Oo(e,t,i,o){return new LEe(e,t,i,o)}function NC(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FEe(e){if(typeof e=="function")return NC(e)?1:0;if(e!=null){if(e=e.$$typeof,e===S1)return 11;if(e===T1)return 14}return 2}function _c(e,t){var i=e.alternate;return i===null?(i=Oo(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Jb(e,t,i,o,c,a){var v=2;if(o=e,typeof e=="function")NC(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case ic:return yp(i.children,c,a,t);case y4:v=8,c|=16;break;case tC:v=8,c|=1;break;case Bg:return e=Oo(12,i,t,c|8),e.elementType=Bg,e.type=Bg,e.lanes=a,e;case jg:return e=Oo(13,i,t,c),e.type=jg,e.elementType=jg,e.lanes=a,e;case Qb:return e=Oo(19,i,t,c),e.elementType=Qb,e.lanes=a,e;case sC:return BC(i,c,a,t);case dP:return e=Oo(24,i,t,c),e.elementType=dP,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rC:v=10;break e;case iC:v=9;break e;case S1:v=11;break e;case T1:v=14;break e;case nC:v=16,o=null;break e;case aC:v=22;break e}throw Error(nt(130,e==null?e:typeof e,""))}return t=Oo(v,i,t,c),t.elementType=e,t.type=o,t.lanes=a,t}function yp(e,t,i,o){return e=Oo(7,e,o,t),e.lanes=i,e}function BC(e,t,i,o){return e=Oo(23,e,o,t),e.elementType=sC,e.lanes=i,e}function uP(e,t,i){return e=Oo(6,e,null,t),e.lanes=i,e}function cP(e,t,i){return t=Oo(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zEe(e,t,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=KI(0),this.expirationTimes=KI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=KI(0),this.mutableSourceEagerHydrationData=null}function NEe(e,t,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wh,key:o==null?null:""+o,children:e,containerInfo:t,implementation:i}}function b1(e,t,i,o){var c=t.current,a=po(),v=dc(c);e:if(i){i=i._reactInternals;t:{if(id(i)!==i||i.tag!==1)throw Error(nt(170));var b=i;do{switch(b.tag){case 3:b=b.stateNode.context;break t;case 1:if(Da(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break t}}b=b.return}while(b!==null);throw Error(nt(171))}if(i.tag===1){var q=i.type;if(Da(q)){i=a6(i,q,b);break e}}i=b}else i=gc;return t.context===null?t.context=i:t.pendingContext=i,t=cc(a,v),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),hc(c,t),fc(c,v,a),v}function hP(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function v4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function jC(e,t){v4(e,t),(e=e.alternate)&&v4(e,t)}function BEe(){return null}function UC(e,t,i){var o=i!=null&&i.hydrationOptions!=null&&i.hydrationOptions.mutableSources||null;if(i=new zEe(e,t,i!=null&&i.hydrate===!0),t=Oo(3,null,null,t===2?7:t===1?3:0),i.current=t,t.stateNode=i,AC(t),e[Tp]=i.current,e6(e.nodeType===8?e.parentNode:e),o)for(e=0;e<o.length;e++){t=o[e];var c=t._getVersion;c=c(t._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[t,c]:i.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=i}UC.prototype.render=function(e){b1(e,this._internalRoot,null,null)};UC.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;b1(null,e,null,function(){t[Tp]=null})};function vy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jEe(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new UC(e,0,t?{hydrate:!0}:void 0)}function D1(e,t,i,o,c){var a=i._reactRootContainer;if(a){var v=a._internalRoot;if(typeof c=="function"){var b=c;c=function(){var M=hP(v);b.call(M)}}b1(t,v,e,c)}else{if(a=i._reactRootContainer=jEe(i,o),v=a._internalRoot,typeof c=="function"){var q=c;c=function(){var M=hP(v);q.call(M)}}L6(function(){b1(t,v,e,c)})}return hP(v)}O4=function(e){if(e.tag===13){var t=po();fc(e,4,t),jC(e,4)}};dC=function(e){if(e.tag===13){var t=po();fc(e,67108864,t),jC(e,67108864)}};k4=function(e){if(e.tag===13){var t=po(),i=dc(e);fc(e,i,t),jC(e,i)}};D4=function(e,t){return t()};wP=function(e,t,i){switch(t){case"input":if(pP(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var c=C1(o);if(!c)throw Error(nt(90));x4(o),pP(o,c)}}}break;case"textarea":w4(e,i);break;case"select":t=i.value,t!=null&&cp(e,!!i.multiple,t,!1)}};uC=D6;P4=function(e,t,i,o,c){var a=Gt;Gt|=4;try{return Qh(98,e.bind(null,t,i,o,c))}finally{Gt=a,Gt===0&&(qp(),il())}};cC=function(){(Gt&49)===0&&(qEe(),bc())};C4=function(e,t){var i=Gt;Gt|=2;try{return e(t)}finally{Gt=i,Gt===0&&(qp(),il())}};function V6(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vy(t))throw Error(nt(200));return NEe(e,t,null,i)}var UEe={Events:[fy,op,C1,q4,I4,bc,{current:!1}]},Og={findFiberByHostInstance:Kh,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},VEe={bundleType:Og.bundleType,version:Og.version,rendererPackageName:Og.rendererPackageName,rendererConfig:Og.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=R4(e),e===null?null:e.stateNode},findFiberByHostInstance:Og.findFiberByHostInstance||BEe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(kg=__REACT_DEVTOOLS_GLOBAL_HOOK__,!kg.isDisabled&&kg.supportsFiber))try{wC=kg.inject(VEe),Yh=kg}catch(e){}var kg;Fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UEe;Fo.createPortal=V6;Fo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(nt(188)):Error(nt(268,Object.keys(e)));return e=R4(t),e=e===null?null:e.stateNode,e};Fo.flushSync=function(e,t){var i=Gt;if((i&48)!==0)return e(t);Gt|=1;try{if(e)return Qh(99,e.bind(null,t))}finally{Gt=i,il()}};Fo.hydrate=function(e,t,i){if(!vy(t))throw Error(nt(200));return D1(null,e,t,!0,i)};Fo.render=function(e,t,i){if(!vy(t))throw Error(nt(200));return D1(null,e,t,!1,i)};Fo.unmountComponentAtNode=function(e){if(!vy(e))throw Error(nt(40));return e._reactRootContainer?(L6(function(){D1(null,null,e,!1,function(){e._reactRootContainer=null,e[Tp]=null})}),!0):!1};Fo.unstable_batchedUpdates=D6;Fo.unstable_createPortal=function(e,t){return V6(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Fo.unstable_renderSubtreeIntoContainer=function(e,t,i,o){if(!vy(i))throw Error(nt(200));if(e==null||e._reactInternals===void 0)throw Error(nt(38));return D1(e,t,i,!1,o)};Fo.version="17.0.2"});var au=I((m2t,W6)=>{"use strict";f();function G6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G6)}catch(e){console.error(e)}}G6(),W6.exports=$6()});var at=I((VC,Z6)=>{"use strict";f();var gy=function(e){return e&&e.Math===Math&&e};Z6.exports=gy(typeof globalThis=="object"&&globalThis)||gy(typeof window=="object"&&window)||gy(typeof self=="object"&&self)||gy(typeof global=="object"&&global)||gy(typeof VC=="object"&&VC)||function(){return this}()||Function("return this")()});var Ze=I((y2t,K6)=>{"use strict";f();K6.exports=function(e){try{return!!e()}catch(t){return!0}}});var St=I((x2t,H6)=>{"use strict";f();var $Ee=Ze();H6.exports=!$Ee(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var Ip=I((w2t,X6)=>{"use strict";f();var GEe=Ze();X6.exports=!GEe(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var ot=I((T2t,Y6)=>{"use strict";f();var WEe=Ip(),L1=Function.prototype.call;Y6.exports=WEe?L1.bind(L1):function(){return L1.apply(L1,arguments)}});var yy=I(eV=>{"use strict";f();var J6={}.propertyIsEnumerable,Q6=Object.getOwnPropertyDescriptor,ZEe=Q6&&!J6.call({1:2},1);eV.f=ZEe?function(t){var i=Q6(this,t);return!!i&&i.enumerable}:J6});var La=I((I2t,tV)=>{"use strict";f();tV.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Ue=I((C2t,nV)=>{"use strict";f();var rV=Ip(),iV=Function.prototype,$C=iV.call,KEe=rV&&iV.bind.bind($C,$C);nV.exports=rV?KEe:function(e){return function(){return $C.apply(e,arguments)}}});var Mn=I((R2t,oV)=>{"use strict";f();var aV=Ue(),HEe=aV({}.toString),XEe=aV("".slice);oV.exports=function(e){return XEe(HEe(e),8,-1)}});var ou=I((k2t,sV)=>{"use strict";f();var YEe=Ue(),JEe=Ze(),QEe=Mn(),GC=Object,eAe=YEe("".split);sV.exports=JEe(function(){return!GC("z").propertyIsEnumerable(0)})?function(e){return QEe(e)==="String"?eAe(e,""):GC(e)}:GC});var Fa=I((L2t,lV)=>{"use strict";f();lV.exports=function(e){return e==null}});var Nr=I((z2t,uV)=>{"use strict";f();var tAe=Fa(),rAe=TypeError;uV.exports=function(e){if(tAe(e))throw new rAe("Can't call method on "+e);return e}});var $i=I((B2t,cV)=>{"use strict";f();var iAe=ou(),nAe=Nr();cV.exports=function(e){return iAe(nAe(e))}});var Wt=I((U2t,hV)=>{"use strict";f();var WC=typeof document=="object"&&document.all;hV.exports=typeof WC=="undefined"&&WC!==void 0?function(e){return typeof e=="function"||e===WC}:function(e){return typeof e=="function"}});var It=I(($2t,dV)=>{"use strict";f();var aAe=Wt();dV.exports=function(e){return typeof e=="object"?e!==null:aAe(e)}});var Rt=I((W2t,fV)=>{"use strict";f();var ZC=at(),oAe=Wt(),sAe=function(e){return oAe(e)?e:void 0};fV.exports=function(e,t){return arguments.length<2?sAe(ZC[e]):ZC[e]&&ZC[e][t]}});var Rn=I((K2t,pV)=>{"use strict";f();var lAe=Ue();pV.exports=lAe({}.isPrototypeOf)});var ms=I((X2t,gV)=>{"use strict";f();var uAe=at(),mV=uAe.navigator,vV=mV&&mV.userAgent;gV.exports=vV?String(vV):""});var gs=I((J2t,SV)=>{"use strict";f();var wV=at(),KC=ms(),yV=wV.process,_V=wV.Deno,xV=yV&&yV.versions||_V&&_V.version,bV=xV&&xV.v8,vs,F1;bV&&(vs=bV.split("."),F1=vs[0]>0&&vs[0]<4?1:+(vs[0]+vs[1]));!F1&&KC&&(vs=KC.match(/Edge\/(\d+)/),(!vs||vs[1]>=74)&&(vs=KC.match(/Chrome\/(\d+)/),vs&&(F1=+vs[1])));SV.exports=F1});var wc=I((eMt,EV)=>{"use strict";f();var TV=gs(),cAe=Ze(),hAe=at(),dAe=hAe.String;EV.exports=!!Object.getOwnPropertySymbols&&!cAe(function(){var e=Symbol("symbol detection");return!dAe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&TV&&TV<41})});var HC=I((rMt,AV)=>{"use strict";f();var fAe=wc();AV.exports=fAe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var su=I((nMt,qV)=>{"use strict";f();var pAe=Rt(),mAe=Wt(),vAe=Rn(),gAe=HC(),yAe=Object;qV.exports=gAe?function(e){return typeof e=="symbol"}:function(e){var t=pAe("Symbol");return mAe(t)&&vAe(t.prototype,yAe(e))}});var Sc=I((oMt,IV)=>{"use strict";f();var _Ae=String;IV.exports=function(e){try{return _Ae(e)}catch(t){return"Object"}}});var Ot=I((lMt,PV)=>{"use strict";f();var xAe=Wt(),bAe=Sc(),wAe=TypeError;PV.exports=function(e){if(xAe(e))return e;throw new wAe(bAe(e)+" is not a function")}});var Si=I((cMt,CV)=>{"use strict";f();var SAe=Ot(),TAe=Fa();CV.exports=function(e,t){var i=e[t];return TAe(i)?void 0:SAe(i)}});var QC=I((dMt,MV)=>{"use strict";f();var XC=ot(),YC=Wt(),JC=It(),EAe=TypeError;MV.exports=function(e,t){var i,o;if(t==="string"&&YC(i=e.toString)&&!JC(o=XC(i,e))||YC(i=e.valueOf)&&!JC(o=XC(i,e))||t!=="string"&&YC(i=e.toString)&&!JC(o=XC(i,e)))return o;throw new EAe("Can't convert object to primitive value")}});var dr=I((pMt,RV)=>{"use strict";f();RV.exports=!1});var z1=I((vMt,kV)=>{"use strict";f();var OV=at(),AAe=Object.defineProperty;kV.exports=function(e,t){try{AAe(OV,e,{value:t,configurable:!0,writable:!0})}catch(i){OV[e]=t}return t}});var _y=I((yMt,FV)=>{"use strict";f();var qAe=dr(),IAe=at(),PAe=z1(),DV="__core-js_shared__",LV=FV.exports=IAe[DV]||PAe(DV,{});(LV.versions||(LV.versions=[])).push({version:"3.42.0",mode:qAe?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var lu=I((xMt,NV)=>{"use strict";f();var zV=_y();NV.exports=function(e,t){return zV[e]||(zV[e]=t||{})}});var tr=I((wMt,BV)=>{"use strict";f();var CAe=Nr(),MAe=Object;BV.exports=function(e){return MAe(CAe(e))}});var Zt=I((TMt,jV)=>{"use strict";f();var RAe=Ue(),OAe=tr(),kAe=RAe({}.hasOwnProperty);jV.exports=Object.hasOwn||function(t,i){return kAe(OAe(t),i)}});var Tc=I((AMt,UV)=>{"use strict";f();var DAe=Ue(),LAe=0,FAe=Math.random(),zAe=DAe(1 .toString);UV.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+zAe(++LAe+FAe,36)}});var Ct=I((IMt,$V)=>{"use strict";f();var NAe=at(),BAe=lu(),VV=Zt(),jAe=Tc(),UAe=wc(),VAe=HC(),Pp=NAe.Symbol,e2=BAe("wks"),$Ae=VAe?Pp.for||Pp:Pp&&Pp.withoutSetter||jAe;$V.exports=function(e){return VV(e2,e)||(e2[e]=UAe&&VV(Pp,e)?Pp[e]:$Ae("Symbol."+e)),e2[e]}});var xy=I((CMt,ZV)=>{"use strict";f();var GAe=ot(),GV=It(),WV=su(),WAe=Si(),ZAe=QC(),KAe=Ct(),HAe=TypeError,XAe=KAe("toPrimitive");ZV.exports=function(e,t){if(!GV(e)||WV(e))return e;var i=WAe(e,XAe),o;if(i){if(t===void 0&&(t="default"),o=GAe(i,e,t),!GV(o)||WV(o))return o;throw new HAe("Can't convert object to primitive value")}return t===void 0&&(t="number"),ZAe(e,t)}});var nl=I((RMt,KV)=>{"use strict";f();var YAe=xy(),JAe=su();KV.exports=function(e){var t=YAe(e,"string");return JAe(t)?t:t+""}});var by=I((kMt,XV)=>{"use strict";f();var QAe=at(),HV=It(),t2=QAe.document,eqe=HV(t2)&&HV(t2.createElement);XV.exports=function(e){return eqe?t2.createElement(e):{}}});var r2=I((LMt,YV)=>{"use strict";f();var tqe=St(),rqe=Ze(),iqe=by();YV.exports=!tqe&&!rqe(function(){return Object.defineProperty(iqe("div"),"a",{get:function(){return 7}}).a!==7})});var mn=I(QV=>{"use strict";f();var nqe=St(),aqe=ot(),oqe=yy(),sqe=La(),lqe=$i(),uqe=nl(),cqe=Zt(),hqe=r2(),JV=Object.getOwnPropertyDescriptor;QV.f=nqe?JV:function(t,i){if(t=lqe(t),i=uqe(i),hqe)try{return JV(t,i)}catch(o){}if(cqe(t,i))return sqe(!aqe(oqe.f,t,i),t[i])}});var i2=I((BMt,e8)=>{"use strict";f();var dqe=St(),fqe=Ze();e8.exports=dqe&&fqe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var lt=I((UMt,t8)=>{"use strict";f();var pqe=It(),mqe=String,vqe=TypeError;t8.exports=function(e){if(pqe(e))return e;throw new vqe(mqe(e)+" is not an object")}});var Dr=I(i8=>{"use strict";f();var gqe=St(),yqe=r2(),_qe=i2(),N1=lt(),r8=nl(),xqe=TypeError,n2=Object.defineProperty,bqe=Object.getOwnPropertyDescriptor,a2="enumerable",o2="configurable",s2="writable";i8.f=gqe?_qe?function(t,i,o){if(N1(t),i=r8(i),N1(o),typeof t=="function"&&i==="prototype"&&"value"in o&&s2 in o&&!o[s2]){var c=bqe(t,i);c&&c[s2]&&(t[i]=o.value,o={configurable:o2 in o?o[o2]:c[o2],enumerable:a2 in o?o[a2]:c[a2],writable:!1})}return n2(t,i,o)}:n2:function(t,i,o){if(N1(t),i=r8(i),N1(o),yqe)try{return n2(t,i,o)}catch(c){}if("get"in o||"set"in o)throw new xqe("Accessors not supported");return"value"in o&&(t[i]=o.value),t}});var Gi=I((WMt,n8)=>{"use strict";f();var wqe=St(),Sqe=Dr(),Tqe=La();n8.exports=wqe?function(e,t,i){return Sqe.f(e,t,Tqe(1,i))}:function(e,t,i){return e[t]=i,e}});var ad=I((KMt,o8)=>{"use strict";f();var l2=St(),Eqe=Zt(),a8=Function.prototype,Aqe=l2&&Object.getOwnPropertyDescriptor,u2=Eqe(a8,"name"),qqe=u2&&function(){}.name==="something",Iqe=u2&&(!l2||l2&&Aqe(a8,"name").configurable);o8.exports={EXISTS:u2,PROPER:qqe,CONFIGURABLE:Iqe}});var wy=I((XMt,s8)=>{"use strict";f();var Pqe=Ue(),Cqe=Wt(),c2=_y(),Mqe=Pqe(Function.toString);Cqe(c2.inspectSource)||(c2.inspectSource=function(e){return Mqe(e)});s8.exports=c2.inspectSource});var h2=I((JMt,u8)=>{"use strict";f();var Rqe=at(),Oqe=Wt(),l8=Rqe.WeakMap;u8.exports=Oqe(l8)&&/native code/.test(String(l8))});var Sy=I((eRt,h8)=>{"use strict";f();var kqe=lu(),Dqe=Tc(),c8=kqe("keys");h8.exports=function(e){return c8[e]||(c8[e]=Dqe(e))}});var Cp=I((rRt,d8)=>{"use strict";f();d8.exports={}});var gr=I((nRt,m8)=>{"use strict";f();var Lqe=h2(),p8=at(),Fqe=It(),zqe=Gi(),d2=Zt(),f2=_y(),Nqe=Sy(),Bqe=Cp(),f8="Object already initialized",p2=p8.TypeError,jqe=p8.WeakMap,B1,Ty,j1,Uqe=function(e){return j1(e)?Ty(e):B1(e,{})},Vqe=function(e){return function(t){var i;if(!Fqe(t)||(i=Ty(t)).type!==e)throw new p2("Incompatible receiver, "+e+" required");return i}};Lqe||f2.state?(ys=f2.state||(f2.state=new jqe),ys.get=ys.get,ys.has=ys.has,ys.set=ys.set,B1=function(e,t){if(ys.has(e))throw new p2(f8);return t.facade=e,ys.set(e,t),t},Ty=function(e){return ys.get(e)||{}},j1=function(e){return ys.has(e)}):(od=Nqe("state"),Bqe[od]=!0,B1=function(e,t){if(d2(e,od))throw new p2(f8);return t.facade=e,zqe(e,od,t),t},Ty=function(e){return d2(e,od)?e[od]:{}},j1=function(e){return d2(e,od)});var ys,od;m8.exports={set:B1,get:Ty,has:j1,enforce:Uqe,getterFor:Vqe}});var Ey=I((oRt,y8)=>{"use strict";f();var v2=Ue(),$qe=Ze(),Gqe=Wt(),U1=Zt(),m2=St(),Wqe=ad().CONFIGURABLE,Zqe=wy(),g8=gr(),Kqe=g8.enforce,Hqe=g8.get,v8=String,V1=Object.defineProperty,Xqe=v2("".slice),Yqe=v2("".replace),Jqe=v2([].join),Qqe=m2&&!$qe(function(){return V1(function(){},"length",{value:8}).length!==8}),eIe=String(String).split("String"),tIe=y8.exports=function(e,t,i){Xqe(v8(t),0,7)==="Symbol("&&(t="["+Yqe(v8(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!U1(e,"name")||Wqe&&e.name!==t)&&(m2?V1(e,"name",{value:t,configurable:!0}):e.name=t),Qqe&&i&&U1(i,"arity")&&e.length!==i.arity&&V1(e,"length",{value:i.arity});try{i&&U1(i,"constructor")&&i.constructor?m2&&V1(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(c){}var o=Kqe(e);return U1(o,"source")||(o.source=Jqe(eIe,typeof t=="string"?t:"")),e};Function.prototype.toString=tIe(function(){return Gqe(this)&&Hqe(this).source||Zqe(this)},"toString")});var wr=I((lRt,_8)=>{"use strict";f();var rIe=Wt(),iIe=Dr(),nIe=Ey(),aIe=z1();_8.exports=function(e,t,i,o){o||(o={});var c=o.enumerable,a=o.name!==void 0?o.name:t;if(rIe(i)&&nIe(i,a,o),o.global)c?e[t]=i:aIe(t,i);else{try{o.unsafe?e[t]&&(c=!0):delete e[t]}catch(v){}c?e[t]=i:iIe.f(e,t,{value:i,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}});var g2=I((cRt,x8)=>{"use strict";f();var oIe=Math.ceil,sIe=Math.floor;x8.exports=Math.trunc||function(t){var i=+t;return(i>0?sIe:oIe)(i)}});var Gr=I((dRt,b8)=>{"use strict";f();var lIe=g2();b8.exports=function(e){var t=+e;return t!==t||t===0?0:lIe(t)}});var _s=I((pRt,w8)=>{"use strict";f();var uIe=Gr(),cIe=Math.max,hIe=Math.min;w8.exports=function(e,t){var i=uIe(e);return i<0?cIe(i+t,0):hIe(i,t)}});var za=I((vRt,S8)=>{"use strict";f();var dIe=Gr(),fIe=Math.min;S8.exports=function(e){var t=dIe(e);return t>0?fIe(t,9007199254740991):0}});var sr=I((yRt,T8)=>{"use strict";f();var pIe=za();T8.exports=function(e){return pIe(e.length)}});var Mp=I((xRt,A8)=>{"use strict";f();var mIe=$i(),vIe=_s(),gIe=sr(),E8=function(e){return function(t,i,o){var c=mIe(t),a=gIe(c);if(a===0)return!e&&-1;var v=vIe(o,a),b;if(e&&i!==i){for(;a>v;)if(b=c[v++],b!==b)return!0}else for(;a>v;v++)if((e||v in c)&&c[v]===i)return e||v||0;return!e&&-1}};A8.exports={includes:E8(!0),indexOf:E8(!1)}});var _2=I((wRt,I8)=>{"use strict";f();var yIe=Ue(),y2=Zt(),_Ie=$i(),xIe=Mp().indexOf,bIe=Cp(),q8=yIe([].push);I8.exports=function(e,t){var i=_Ie(e),o=0,c=[],a;for(a in i)!y2(bIe,a)&&y2(i,a)&&q8(c,a);for(;t.length>o;)y2(i,a=t[o++])&&(~xIe(c,a)||q8(c,a));return c}});var $1=I((TRt,P8)=>{"use strict";f();P8.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Ec=I(C8=>{"use strict";f();var wIe=_2(),SIe=$1(),TIe=SIe.concat("length","prototype");C8.f=Object.getOwnPropertyNames||function(t){return wIe(t,TIe)}});var Ay=I(M8=>{"use strict";f();M8.f=Object.getOwnPropertySymbols});var G1=I((CRt,R8)=>{"use strict";f();var EIe=Rt(),AIe=Ue(),qIe=Ec(),IIe=Ay(),PIe=lt(),CIe=AIe([].concat);R8.exports=EIe("Reflect","ownKeys")||function(t){var i=qIe.f(PIe(t)),o=IIe.f;return o?CIe(i,o(t)):i}});var sd=I((RRt,k8)=>{"use strict";f();var O8=Zt(),MIe=G1(),RIe=mn(),OIe=Dr();k8.exports=function(e,t,i){for(var o=MIe(t),c=OIe.f,a=RIe.f,v=0;v<o.length;v++){var b=o[v];!O8(e,b)&&!(i&&O8(i,b))&&c(e,b,a(t,b))}}});var Rp=I((kRt,D8)=>{"use strict";f();var kIe=Ze(),DIe=Wt(),LIe=/#|\.prototype\./,qy=function(e,t){var i=zIe[FIe(e)];return i===BIe?!0:i===NIe?!1:DIe(t)?kIe(t):!!t},FIe=qy.normalize=function(e){return String(e).replace(LIe,".").toLowerCase()},zIe=qy.data={},NIe=qy.NATIVE="N",BIe=qy.POLYFILL="P";D8.exports=qy});var X=I((LRt,L8)=>{"use strict";f();var W1=at(),jIe=mn().f,UIe=Gi(),VIe=wr(),$Ie=z1(),GIe=sd(),WIe=Rp();L8.exports=function(e,t){var i=e.target,o=e.global,c=e.stat,a,v,b,q,M,O;if(o?v=W1:c?v=W1[i]||$Ie(i,{}):v=W1[i]&&W1[i].prototype,v)for(b in t){if(M=t[b],e.dontCallGetSet?(O=jIe(v,b),q=O&&O.value):q=v[b],a=WIe(o?b:i+(c?".":"#")+b,e.forced),!a&&q!==void 0){if(typeof M==typeof q)continue;GIe(M,q)}(e.sham||q&&q.sham)&&UIe(M,"sham",!0),VIe(v,b,M,e)}}});var Z1=I((zRt,z8)=>{"use strict";f();var ZIe=Ct(),KIe=ZIe("toStringTag"),F8={};F8[KIe]="z";z8.exports=String(F8)==="[object z]"});var _a=I((BRt,N8)=>{"use strict";f();var HIe=Z1(),XIe=Wt(),K1=Mn(),YIe=Ct(),JIe=YIe("toStringTag"),QIe=Object,ePe=K1(function(){return arguments}())==="Arguments",tPe=function(e,t){try{return e[t]}catch(i){}};N8.exports=HIe?K1:function(e){var t,i,o;return e===void 0?"Undefined":e===null?"Null":typeof(i=tPe(t=QIe(e),JIe))=="string"?i:ePe?K1(t):(o=K1(t))==="Object"&&XIe(t.callee)?"Arguments":o}});var zt=I((URt,B8)=>{"use strict";f();var rPe=_a(),iPe=String;B8.exports=function(e){if(rPe(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return iPe(e)}});var ld=I(($Rt,j8)=>{"use strict";f();var nPe=_2(),aPe=$1();j8.exports=Object.keys||function(t){return nPe(t,aPe)}});var H1=I(U8=>{"use strict";f();var oPe=St(),sPe=i2(),lPe=Dr(),uPe=lt(),cPe=$i(),hPe=ld();U8.f=oPe&&!sPe?Object.defineProperties:function(t,i){uPe(t);for(var o=cPe(i),c=hPe(i),a=c.length,v=0,b;a>v;)lPe.f(t,b=c[v++],o[b]);return t}});var x2=I((KRt,V8)=>{"use strict";f();var dPe=Rt();V8.exports=dPe("document","documentElement")});var Ti=I((XRt,X8)=>{"use strict";f();var fPe=lt(),pPe=H1(),$8=$1(),mPe=Cp(),vPe=x2(),gPe=by(),yPe=Sy(),G8=">",W8="<",w2="prototype",S2="script",K8=yPe("IE_PROTO"),b2=function(){},H8=function(e){return W8+S2+G8+e+W8+"/"+S2+G8},Z8=function(e){e.write(H8("")),e.close();var t=e.parentWindow.Object;return e=null,t},_Pe=function(){var e=gPe("iframe"),t="java"+S2+":",i;return e.style.display="none",vPe.appendChild(e),e.src=String(t),i=e.contentWindow.document,i.open(),i.write(H8("document.F=Object")),i.close(),i.F},X1,Y1=function(){try{X1=new ActiveXObject("htmlfile")}catch(t){}Y1=typeof document!="undefined"?document.domain&&X1?Z8(X1):_Pe():Z8(X1);for(var e=$8.length;e--;)delete Y1[w2][$8[e]];return Y1()};mPe[K8]=!0;X8.exports=Object.create||function(t,i){var o;return t!==null?(b2[w2]=fPe(t),o=new b2,b2[w2]=null,o[K8]=t):o=Y1(),i===void 0?o:pPe.f(o,i)}});var Na=I((JRt,Y8)=>{"use strict";f();var xPe=Ue();Y8.exports=xPe([].slice)});var J1=I((eOt,e$)=>{"use strict";f();var bPe=Mn(),wPe=$i(),J8=Ec().f,SPe=Na(),Q8=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],TPe=function(e){try{return J8(e)}catch(t){return SPe(Q8)}};e$.exports.f=function(t){return Q8&&bPe(t)==="Window"?TPe(t):J8(wPe(t))}});var Wr=I((rOt,r$)=>{"use strict";f();var t$=Ey(),EPe=Dr();r$.exports=function(e,t,i){return i.get&&t$(i.get,t,{getter:!0}),i.set&&t$(i.set,t,{setter:!0}),EPe.f(e,t,i)}});var T2=I(i$=>{"use strict";f();var APe=Ct();i$.f=APe});var Q1=I((oOt,n$)=>{"use strict";f();var qPe=at();n$.exports=qPe});var si=I((lOt,o$)=>{"use strict";f();var a$=Q1(),IPe=Zt(),PPe=T2(),CPe=Dr().f;o$.exports=function(e){var t=a$.Symbol||(a$.Symbol={});IPe(t,e)||CPe(t,e,{value:PPe.f(e)})}});var E2=I((cOt,s$)=>{"use strict";f();var MPe=ot(),RPe=Rt(),OPe=Ct(),kPe=wr();s$.exports=function(){var e=RPe("Symbol"),t=e&&e.prototype,i=t&&t.valueOf,o=OPe("toPrimitive");t&&!t[o]&&kPe(t,o,function(c){return MPe(i,this)},{arity:1})}});var xa=I((dOt,u$)=>{"use strict";f();var DPe=Dr().f,LPe=Zt(),FPe=Ct(),l$=FPe("toStringTag");u$.exports=function(e,t,i){e&&!i&&(e=e.prototype),e&&!LPe(e,l$)&&DPe(e,l$,{configurable:!0,value:t})}});var Ac=I((pOt,c$)=>{"use strict";f();var zPe=Mn(),NPe=Ue();c$.exports=function(e){if(zPe(e)==="Function")return NPe(e)}});var Cr=I((vOt,d$)=>{"use strict";f();var h$=Ac(),BPe=Ot(),jPe=Ip(),UPe=h$(h$.bind);d$.exports=function(e,t){return BPe(e),t===void 0?e:jPe?UPe(e,t):function(){return e.apply(t,arguments)}}});var xs=I((yOt,f$)=>{"use strict";f();var VPe=Mn();f$.exports=Array.isArray||function(t){return VPe(t)==="Array"}});var bs=I((xOt,y$)=>{"use strict";f();var $Pe=Ue(),GPe=Ze(),p$=Wt(),WPe=_a(),ZPe=Rt(),KPe=wy(),m$=function(){},v$=ZPe("Reflect","construct"),A2=/^\s*(?:class|function)\b/,HPe=$Pe(A2.exec),XPe=!A2.test(m$),Iy=function(t){if(!p$(t))return!1;try{return v$(m$,[],t),!0}catch(i){return!1}},g$=function(t){if(!p$(t))return!1;switch(WPe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return XPe||!!HPe(A2,KPe(t))}catch(i){return!0}};g$.sham=!0;y$.exports=!v$||GPe(function(){var e;return Iy(Iy.call)||!Iy(Object)||!Iy(function(){e=!0})||e})?g$:Iy});var w$=I((wOt,b$)=>{"use strict";f();var _$=xs(),YPe=bs(),JPe=It(),QPe=Ct(),eCe=QPe("species"),x$=Array;b$.exports=function(e){var t;return _$(e)&&(t=e.constructor,YPe(t)&&(t===x$||_$(t.prototype))?t=void 0:JPe(t)&&(t=t[eCe],t===null&&(t=void 0))),t===void 0?x$:t}});var Op=I((TOt,S$)=>{"use strict";f();var tCe=w$();S$.exports=function(e,t){return new(tCe(e))(t===0?0:t)}});var Ei=I((AOt,E$)=>{"use strict";f();var rCe=Cr(),iCe=Ue(),nCe=ou(),aCe=tr(),oCe=sr(),sCe=Op(),T$=iCe([].push),qc=function(e){var t=e===1,i=e===2,o=e===3,c=e===4,a=e===6,v=e===7,b=e===5||a;return function(q,M,O,D){for(var U=aCe(q),ne=nCe(U),ue=oCe(ne),fe=rCe(M,O),H=0,J=D||sCe,re=t?J(q,ue):i||v?J(q,0):void 0,xe,Ae;ue>H;H++)if((b||H in ne)&&(xe=ne[H],Ae=fe(xe,H,U),e))if(t)re[H]=Ae;else if(Ae)switch(e){case 3:return!0;case 5:return xe;case 6:return H;case 2:T$(re,xe)}else switch(e){case 4:return!1;case 7:T$(re,xe)}return a?-1:o||c?c:re}};E$.exports={forEach:qc(0),map:qc(1),filter:qc(2),some:qc(3),every:qc(4),find:qc(5),findIndex:qc(6),filterReject:qc(7)}});var U$=I(()=>{"use strict";f();var ew=X(),My=at(),D2=ot(),lCe=Ue(),uCe=dr(),kp=St(),Dp=wc(),cCe=Ze(),vn=Zt(),hCe=Rn(),C2=lt(),tw=$i(),L2=nl(),dCe=zt(),M2=La(),Lp=Ti(),I$=ld(),fCe=Ec(),P$=J1(),pCe=Ay(),C$=mn(),M$=Dr(),mCe=H1(),R$=yy(),q2=wr(),vCe=Wr(),F2=lu(),gCe=Sy(),O$=Cp(),A$=Tc(),yCe=Ct(),_Ce=T2(),xCe=si(),bCe=E2(),wCe=xa(),k$=gr(),rw=Ei().forEach,Ba=gCe("hidden"),iw="Symbol",Cy="prototype",SCe=k$.set,q$=k$.getterFor(iw),zo=Object[Cy],ud=My.Symbol,Py=ud&&ud[Cy],TCe=My.RangeError,ECe=My.TypeError,I2=My.QObject,D$=C$.f,cd=M$.f,L$=P$.f,ACe=R$.f,F$=lCe([].push),uu=F2("symbols"),Ry=F2("op-symbols"),qCe=F2("wks"),R2=!I2||!I2[Cy]||!I2[Cy].findChild,z$=function(e,t,i){var o=D$(zo,t);o&&delete zo[t],cd(e,t,i),o&&e!==zo&&cd(zo,t,o)},O2=kp&&cCe(function(){return Lp(cd({},"a",{get:function(){return cd(this,"a",{value:7}).a}})).a!==7})?z$:cd,P2=function(e,t){var i=uu[e]=Lp(Py);return SCe(i,{type:iw,tag:e,description:t}),kp||(i.description=t),i},nw=function(t,i,o){t===zo&&nw(Ry,i,o),C2(t);var c=L2(i);return C2(o),vn(uu,c)?(o.enumerable?(vn(t,Ba)&&t[Ba][c]&&(t[Ba][c]=!1),o=Lp(o,{enumerable:M2(0,!1)})):(vn(t,Ba)||cd(t,Ba,M2(1,Lp(null))),t[Ba][c]=!0),O2(t,c,o)):cd(t,c,o)},z2=function(t,i){C2(t);var o=tw(i),c=I$(o).concat(j$(o));return rw(c,function(a){(!kp||D2(k2,o,a))&&nw(t,a,o[a])}),t},ICe=function(t,i){return i===void 0?Lp(t):z2(Lp(t),i)},k2=function(t){var i=L2(t),o=D2(ACe,this,i);return this===zo&&vn(uu,i)&&!vn(Ry,i)?!1:o||!vn(this,i)||!vn(uu,i)||vn(this,Ba)&&this[Ba][i]?o:!0},N$=function(t,i){var o=tw(t),c=L2(i);if(!(o===zo&&vn(uu,c)&&!vn(Ry,c))){var a=D$(o,c);return a&&vn(uu,c)&&!(vn(o,Ba)&&o[Ba][c])&&(a.enumerable=!0),a}},B$=function(t){var i=L$(tw(t)),o=[];return rw(i,function(c){!vn(uu,c)&&!vn(O$,c)&&F$(o,c)}),o},j$=function(e){var t=e===zo,i=L$(t?Ry:tw(e)),o=[];return rw(i,function(c){vn(uu,c)&&(!t||vn(zo,c))&&F$(o,uu[c])}),o};Dp||(ud=function(){if(hCe(Py,this))throw new ECe("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:dCe(arguments[0]),i=A$(t),o=function(c){var a=this===void 0?My:this;a===zo&&D2(o,Ry,c),vn(a,Ba)&&vn(a[Ba],i)&&(a[Ba][i]=!1);var v=M2(1,c);try{O2(a,i,v)}catch(b){if(!(b instanceof TCe))throw b;z$(a,i,v)}};return kp&&R2&&O2(zo,i,{configurable:!0,set:o}),P2(i,t)},Py=ud[Cy],q2(Py,"toString",function(){return q$(this).tag}),q2(ud,"withoutSetter",function(e){return P2(A$(e),e)}),R$.f=k2,M$.f=nw,mCe.f=z2,C$.f=N$,fCe.f=P$.f=B$,pCe.f=j$,_Ce.f=function(e){return P2(yCe(e),e)},kp&&(vCe(Py,"description",{configurable:!0,get:function(){return q$(this).description}}),uCe||q2(zo,"propertyIsEnumerable",k2,{unsafe:!0})));ew({global:!0,constructor:!0,wrap:!0,forced:!Dp,sham:!Dp},{Symbol:ud});rw(I$(qCe),function(e){xCe(e)});ew({target:iw,stat:!0,forced:!Dp},{useSetter:function(){R2=!0},useSimple:function(){R2=!1}});ew({target:"Object",stat:!0,forced:!Dp,sham:!kp},{create:ICe,defineProperty:nw,defineProperties:z2,getOwnPropertyDescriptor:N$});ew({target:"Object",stat:!0,forced:!Dp},{getOwnPropertyNames:B$});bCe();wCe(ud,iw);O$[Ba]=!0});var N2=I((MOt,V$)=>{"use strict";f();var PCe=wc();V$.exports=PCe&&!!Symbol.for&&!!Symbol.keyFor});var G$=I(()=>{"use strict";f();var CCe=X(),MCe=Rt(),RCe=Zt(),OCe=zt(),$$=lu(),kCe=N2(),B2=$$("string-to-symbol-registry"),DCe=$$("symbol-to-string-registry");CCe({target:"Symbol",stat:!0,forced:!kCe},{for:function(e){var t=OCe(e);if(RCe(B2,t))return B2[t];var i=MCe("Symbol")(t);return B2[t]=i,DCe[i]=t,i}})});var Z$=I(()=>{"use strict";f();var LCe=X(),FCe=Zt(),zCe=su(),NCe=Sc(),BCe=lu(),jCe=N2(),W$=BCe("symbol-to-string-registry");LCe({target:"Symbol",stat:!0,forced:!jCe},{keyFor:function(t){if(!zCe(t))throw new TypeError(NCe(t)+" is not a symbol");if(FCe(W$,t))return W$[t]}})});var On=I((NOt,Y$)=>{"use strict";f();var UCe=Ip(),X$=Function.prototype,K$=X$.apply,H$=X$.call;Y$.exports=typeof Reflect=="object"&&Reflect.apply||(UCe?H$.bind(K$):function(){return H$.apply(K$,arguments)})});var j2=I((jOt,tG)=>{"use strict";f();var VCe=Ue(),J$=xs(),$Ce=Wt(),Q$=Mn(),GCe=zt(),eG=VCe([].push);tG.exports=function(e){if($Ce(e))return e;if(J$(e)){for(var t=e.length,i=[],o=0;o<t;o++){var c=e[o];typeof c=="string"?eG(i,c):(typeof c=="number"||Q$(c)==="Number"||Q$(c)==="String")&&eG(i,GCe(c))}var a=i.length,v=!0;return function(b,q){if(v)return v=!1,q;if(J$(this))return q;for(var M=0;M<a;M++)if(i[M]===b)return q}}}});var U2=I(()=>{"use strict";f();var WCe=X(),uG=Rt(),cG=On(),ZCe=ot(),Oy=Ue(),hG=Ze(),rG=Wt(),iG=su(),dG=Na(),KCe=j2(),HCe=wc(),XCe=String,Ic=uG("JSON","stringify"),aw=Oy(/./.exec),nG=Oy("".charAt),YCe=Oy("".charCodeAt),JCe=Oy("".replace),QCe=Oy(1 .toString),e2e=/[\uD800-\uDFFF]/g,aG=/^[\uD800-\uDBFF]$/,oG=/^[\uDC00-\uDFFF]$/,sG=!HCe||hG(function(){var e=uG("Symbol")("stringify detection");return Ic([e])!=="[null]"||Ic({a:e})!=="{}"||Ic(Object(e))!=="{}"}),lG=hG(function(){return Ic("\uDF06\uD834")!=="\"\\udf06\\ud834\""||Ic("\uDEAD")!=="\"\\udead\""}),t2e=function(e,t){var i=dG(arguments),o=KCe(t);if(!(!rG(o)&&(e===void 0||iG(e))))return i[1]=function(c,a){if(rG(o)&&(a=ZCe(o,this,XCe(c),a)),!iG(a))return a},cG(Ic,null,i)},r2e=function(e,t,i){var o=nG(i,t-1),c=nG(i,t+1);return aw(aG,e)&&!aw(oG,c)||aw(oG,e)&&!aw(aG,o)?"\\u"+QCe(YCe(e,0),16):e};Ic&&WCe({target:"JSON",stat:!0,arity:3,forced:sG||lG},{stringify:function(t,i,o){var c=dG(arguments),a=cG(sG?t2e:Ic,null,c);return lG&&typeof a=="string"?JCe(a,e2e,r2e):a}})});var pG=I(()=>{"use strict";f();var i2e=X(),n2e=wc(),a2e=Ze(),fG=Ay(),o2e=tr(),s2e=!n2e||a2e(function(){fG.f(1)});i2e({target:"Object",stat:!0,forced:s2e},{getOwnPropertySymbols:function(t){var i=fG.f;return i?i(o2e(t)):[]}})});var mG=I(()=>{"use strict";f();U$();G$();Z$();U2();pG()});var wG=I(()=>{"use strict";f();var l2e=X(),u2e=St(),c2e=at(),ow=Ue(),h2e=Zt(),d2e=Wt(),f2e=Rn(),p2e=zt(),m2e=Wr(),v2e=sd(),cu=c2e.Symbol,hd=cu&&cu.prototype;u2e&&d2e(cu)&&(!("description"in hd)||cu().description!==void 0)&&(V2={},ky=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:p2e(arguments[0]),i=f2e(hd,this)?new cu(t):t===void 0?cu():cu(t);return t===""&&(V2[i]=!0),i},v2e(ky,cu),ky.prototype=hd,hd.constructor=ky,vG=String(cu("description detection"))==="Symbol(description detection)",gG=ow(hd.valueOf),yG=ow(hd.toString),_G=/^Symbol\((.*)\)[^)]+$/,xG=ow("".replace),bG=ow("".slice),m2e(hd,"description",{configurable:!0,get:function(){var t=gG(this);if(h2e(V2,t))return"";var i=yG(t),o=vG?bG(i,7,-1):xG(i,_G,"$1");return o===""?void 0:o}}),l2e({global:!0,constructor:!0,forced:!0},{Symbol:ky}));var V2,ky,vG,gG,yG,_G,xG,bG});var SG=I(()=>{"use strict";f();var g2e=si();g2e("asyncIterator")});var TG=I(()=>{"use strict";f();var y2e=si();y2e("hasInstance")});var EG=I(()=>{"use strict";f();var _2e=si();_2e("isConcatSpreadable")});var AG=I(()=>{"use strict";f();var x2e=si();x2e("iterator")});var qG=I(()=>{"use strict";f();var b2e=si();b2e("match")});var IG=I(()=>{"use strict";f();var w2e=si();w2e("matchAll")});var PG=I(()=>{"use strict";f();var S2e=si();S2e("replace")});var CG=I(()=>{"use strict";f();var T2e=si();T2e("search")});var MG=I(()=>{"use strict";f();var E2e=si();E2e("species")});var RG=I(()=>{"use strict";f();var A2e=si();A2e("split")});var OG=I(()=>{"use strict";f();var q2e=si(),I2e=E2();q2e("toPrimitive");I2e()});var kG=I(()=>{"use strict";f();var P2e=Rt(),C2e=si(),M2e=xa();C2e("toStringTag");M2e(P2e("Symbol"),"Symbol")});var DG=I(()=>{"use strict";f();var R2e=si();R2e("unscopables")});var Dy=I((Bkt,LG)=>{"use strict";f();var O2e=Ue(),k2e=Ot();LG.exports=function(e,t,i){try{return O2e(k2e(Object.getOwnPropertyDescriptor(e,t)[i]))}catch(o){}}});var $2=I((Ukt,FG)=>{"use strict";f();var D2e=It();FG.exports=function(e){return D2e(e)||e===null}});var G2=I(($kt,zG)=>{"use strict";f();var L2e=$2(),F2e=String,z2e=TypeError;zG.exports=function(e){if(L2e(e))return e;throw new z2e("Can't set "+F2e(e)+" as a prototype")}});var No=I((Wkt,NG)=>{"use strict";f();var N2e=Dy(),B2e=It(),j2e=Nr(),U2e=G2();NG.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},i;try{i=N2e(Object.prototype,"__proto__","set"),i(t,[]),e=t instanceof Array}catch(o){}return function(c,a){return j2e(c),U2e(a),B2e(c)&&(e?i(c,a):c.__proto__=a),c}}():void 0)});var W2=I((Kkt,BG)=>{"use strict";f();var V2e=Dr().f;BG.exports=function(e,t,i){i in e||V2e(e,i,{configurable:!0,get:function(){return t[i]},set:function(o){t[i]=o}})}});var Pc=I((Xkt,UG)=>{"use strict";f();var $2e=Wt(),G2e=It(),jG=No();UG.exports=function(e,t,i){var o,c;return jG&&$2e(o=t.constructor)&&o!==i&&G2e(c=o.prototype)&&c!==i.prototype&&jG(e,c),e}});var dd=I((Jkt,VG)=>{"use strict";f();var W2e=zt();VG.exports=function(e,t){return e===void 0?arguments.length<2?"":t:W2e(e)}});var Z2=I((eDt,$G)=>{"use strict";f();var Z2e=It(),K2e=Gi();$G.exports=function(e,t){Z2e(t)&&"cause"in t&&K2e(e,"cause",t.cause)}});var sw=I((rDt,ZG)=>{"use strict";f();var H2e=Ue(),GG=Error,X2e=H2e("".replace),Y2e=function(e){return String(new GG(e).stack)}("zxcasd"),WG=/\n\s*at [^:]*:[^\n]*/,J2e=WG.test(Y2e);ZG.exports=function(e,t){if(J2e&&typeof e=="string"&&!GG.prepareStackTrace)for(;t--;)e=X2e(e,WG,"");return e}});var K2=I((nDt,KG)=>{"use strict";f();var Q2e=Ze(),eMe=La();KG.exports=!Q2e(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",eMe(1,7)),e.stack!==7):!0})});var lw=I((oDt,XG)=>{"use strict";f();var tMe=Gi(),rMe=sw(),iMe=K2(),HG=Error.captureStackTrace;XG.exports=function(e,t,i,o){iMe&&(HG?HG(e,t):tMe(e,"stack",rMe(i,o)))}});var H2=I((lDt,iW)=>{"use strict";f();var YG=Rt(),nMe=Zt(),JG=Gi(),aMe=Rn(),QG=No(),eW=sd(),tW=W2(),oMe=Pc(),sMe=dd(),lMe=Z2(),uMe=lw(),cMe=St(),rW=dr();iW.exports=function(e,t,i,o){var c="stackTraceLimit",a=o?2:1,v=e.split("."),b=v[v.length-1],q=YG.apply(null,v);if(q){var M=q.prototype;if(!rW&&nMe(M,"cause")&&delete M.cause,!i)return q;var O=YG("Error"),D=t(function(U,ne){var ue=sMe(o?ne:U,void 0),fe=o?new q(U):new q;return ue!==void 0&&JG(fe,"message",ue),uMe(fe,D,fe.stack,2),this&&aMe(M,this)&&oMe(fe,this,D),arguments.length>a&&lMe(fe,arguments[a]),fe});if(D.prototype=M,b!=="Error"?QG?QG(D,O):eW(D,O,{name:!0}):cMe&&c in q&&(tW(D,q,c),tW(D,q,"prepareStackTrace")),eW(D,q),!rW)try{M.name!==b&&JG(M,"name",b),M.constructor=D}catch(U){}return D}}});var sW=I(()=>{"use strict";f();var aW=X(),hMe=at(),al=On(),oW=H2(),X2="WebAssembly",nW=hMe[X2],uw=new Error("e",{cause:7}).cause!==7,fd=function(e,t){var i={};i[e]=oW(e,t,uw),aW({global:!0,constructor:!0,arity:1,forced:uw},i)},Y2=function(e,t){if(nW&&nW[e]){var i={};i[e]=oW(X2+"."+e,t,uw),aW({target:X2,stat:!0,constructor:!0,arity:1,forced:uw},i)}};fd("Error",function(e){return function(i){return al(e,this,arguments)}});fd("EvalError",function(e){return function(i){return al(e,this,arguments)}});fd("RangeError",function(e){return function(i){return al(e,this,arguments)}});fd("ReferenceError",function(e){return function(i){return al(e,this,arguments)}});fd("SyntaxError",function(e){return function(i){return al(e,this,arguments)}});fd("TypeError",function(e){return function(i){return al(e,this,arguments)}});fd("URIError",function(e){return function(i){return al(e,this,arguments)}});Y2("CompileError",function(e){return function(i){return al(e,this,arguments)}});Y2("LinkError",function(e){return function(i){return al(e,this,arguments)}});Y2("RuntimeError",function(e){return function(i){return al(e,this,arguments)}})});var J2=I((fDt,uW)=>{"use strict";f();var dMe=St(),fMe=Ze(),pMe=lt(),lW=dd(),cw=Error.prototype.toString,mMe=fMe(function(){if(dMe){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(cw.call(e)!=="true")return!0}return cw.call({message:1,name:2})!=="2: 1"||cw.call({})!=="Error"});uW.exports=mMe?function(){var t=pMe(this),i=lW(t.name,"Error"),o=lW(t.message);return i?o?i+": "+o:i:o}:cw});var dW=I(()=>{"use strict";f();var vMe=wr(),cW=J2(),hW=Error.prototype;hW.toString!==cW&&vMe(hW,"toString",cW)});var hw=I((yDt,fW)=>{"use strict";f();var gMe=Ze();fW.exports=!gMe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var Wi=I((xDt,mW)=>{"use strict";f();var yMe=Zt(),_Me=Wt(),xMe=tr(),bMe=Sy(),wMe=hw(),pW=bMe("IE_PROTO"),Q2=Object,SMe=Q2.prototype;mW.exports=wMe?Q2.getPrototypeOf:function(e){var t=xMe(e);if(yMe(t,pW))return t[pW];var i=t.constructor;return _Me(i)&&t instanceof i?i.prototype:t instanceof Q2?SMe:null}});var pd=I((wDt,vW)=>{"use strict";f();vW.exports={}});var dw=I((TDt,gW)=>{"use strict";f();var TMe=Ct(),EMe=pd(),AMe=TMe("iterator"),qMe=Array.prototype;gW.exports=function(e){return e!==void 0&&(EMe.Array===e||qMe[AMe]===e)}});var ol=I((ADt,_W)=>{"use strict";f();var IMe=_a(),yW=Si(),PMe=Fa(),CMe=pd(),MMe=Ct(),RMe=MMe("iterator");_W.exports=function(e){if(!PMe(e))return yW(e,RMe)||yW(e,"@@iterator")||CMe[IMe(e)]}});var Cc=I((IDt,xW)=>{"use strict";f();var OMe=ot(),kMe=Ot(),DMe=lt(),LMe=Sc(),FMe=ol(),zMe=TypeError;xW.exports=function(e,t){var i=arguments.length<2?FMe(e):t;if(kMe(i))return DMe(OMe(i,e));throw new zMe(LMe(e)+" is not iterable")}});var gn=I((CDt,wW)=>{"use strict";f();var NMe=ot(),bW=lt(),BMe=Si();wW.exports=function(e,t,i){var o,c;bW(e);try{if(o=BMe(e,"return"),!o){if(t==="throw")throw i;return i}o=NMe(o,e)}catch(a){c=!0,o=a}if(t==="throw")throw i;if(c)throw o;return bW(o),i}});var li=I((RDt,AW)=>{"use strict";f();var jMe=Cr(),UMe=ot(),VMe=lt(),$Me=Sc(),GMe=dw(),WMe=sr(),SW=Rn(),ZMe=Cc(),KMe=ol(),TW=gn(),HMe=TypeError,fw=function(e,t){this.stopped=e,this.result=t},EW=fw.prototype;AW.exports=function(e,t,i){var o=i&&i.that,c=!!(i&&i.AS_ENTRIES),a=!!(i&&i.IS_RECORD),v=!!(i&&i.IS_ITERATOR),b=!!(i&&i.INTERRUPTED),q=jMe(t,o),M,O,D,U,ne,ue,fe,H=function(re){return M&&TW(M,"normal",re),new fw(!0,re)},J=function(re){return c?(VMe(re),b?q(re[0],re[1],H):q(re[0],re[1])):b?q(re,H):q(re)};if(a)M=e.iterator;else if(v)M=e;else{if(O=KMe(e),!O)throw new HMe($Me(e)+" is not iterable");if(GMe(O)){for(D=0,U=WMe(e);U>D;D++)if(ne=J(e[D]),ne&&SW(EW,ne))return ne;return new fw(!1)}M=ZMe(e,O)}for(ue=a?e.next:M.next;!(fe=UMe(ue,M)).done;){try{ne=J(fe.value)}catch(re){TW(M,"throw",re)}if(typeof ne=="object"&&ne&&SW(EW,ne))return ne}return new fw(!1)}});var IW=I(()=>{"use strict";f();var XMe=X(),YMe=Rn(),JMe=Wi(),pw=No(),QMe=sd(),qW=Ti(),eM=Gi(),tM=La(),eRe=Z2(),tRe=lw(),rRe=li(),iRe=dd(),nRe=Ct(),aRe=nRe("toStringTag"),mw=Error,oRe=[].push,Fp=function(t,i){var o=YMe(rM,this),c;pw?c=pw(new mw,o?JMe(this):rM):(c=o?this:qW(rM),eM(c,aRe,"Error")),i!==void 0&&eM(c,"message",iRe(i)),tRe(c,Fp,c.stack,1),arguments.length>2&&eRe(c,arguments[2]);var a=[];return rRe(t,oRe,{that:a}),eM(c,"errors",a),c};pw?pw(Fp,mw):QMe(Fp,mw,{name:!0});var rM=Fp.prototype=qW(mw.prototype,{constructor:tM(1,Fp),message:tM(1,""),name:tM(1,"AggregateError")});XMe({global:!0,constructor:!0,arity:2},{AggregateError:Fp})});var iM=I(()=>{"use strict";f();IW()});var RW=I(()=>{"use strict";f();var sRe=X(),lRe=Rt(),uRe=On(),PW=Ze(),cRe=H2(),nM="AggregateError",CW=lRe(nM),MW=!PW(function(){return CW([1]).errors[0]!==1})&&PW(function(){return CW([1],nM,{cause:7}).cause!==7});sRe({global:!0,constructor:!0,arity:2,forced:MW},{AggregateError:cRe(nM,function(e){return function(i,o){return uRe(e,this,arguments)}},MW,!0)})});var ui=I((VDt,OW)=>{"use strict";f();var hRe=Ct(),dRe=Ti(),fRe=Dr().f,aM=hRe("unscopables"),oM=Array.prototype;oM[aM]===void 0&&fRe(oM,aM,{configurable:!0,value:dRe(null)});OW.exports=function(e){oM[aM][e]=!0}});var sM=I(()=>{"use strict";f();var pRe=X(),mRe=tr(),vRe=sr(),gRe=Gr(),yRe=ui();pRe({target:"Array",proto:!0},{at:function(t){var i=mRe(this),o=vRe(i),c=gRe(t),a=c>=0?c:o+c;return a<0||a>=o?void 0:i[a]}});yRe("at")});var Mc=I((KDt,kW)=>{"use strict";f();var _Re=TypeError,xRe=9007199254740991;kW.exports=function(e){if(e>xRe)throw _Re("Maximum allowed index exceeded");return e}});var Bo=I((XDt,DW)=>{"use strict";f();var bRe=St(),wRe=Dr(),SRe=La();DW.exports=function(e,t,i){bRe?wRe.f(e,t,SRe(0,i)):e[t]=i}});var zp=I((JDt,LW)=>{"use strict";f();var TRe=Ze(),ERe=Ct(),ARe=gs(),qRe=ERe("species");LW.exports=function(e){return ARe>=51||!TRe(function(){var t=[],i=t.constructor={};return i[qRe]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var BW=I(()=>{"use strict";f();var IRe=X(),PRe=Ze(),CRe=xs(),MRe=It(),RRe=tr(),ORe=sr(),FW=Mc(),zW=Bo(),kRe=Op(),DRe=zp(),LRe=Ct(),FRe=gs(),NW=LRe("isConcatSpreadable"),zRe=FRe>=51||!PRe(function(){var e=[];return e[NW]=!1,e.concat()[0]!==e}),NRe=function(e){if(!MRe(e))return!1;var t=e[NW];return t!==void 0?!!t:CRe(e)},BRe=!zRe||!DRe("concat");IRe({target:"Array",proto:!0,arity:1,forced:BRe},{concat:function(t){var i=RRe(this),o=kRe(i,0),c=0,a,v,b,q,M;for(a=-1,b=arguments.length;a<b;a++)if(M=a===-1?i:arguments[a],NRe(M))for(q=ORe(M),FW(c+q),v=0;v<q;v++,c++)v in M&&zW(o,c,M[v]);else FW(c+1),zW(o,c++,M);return o.length=c,o}})});var Ly=I((iLt,UW)=>{"use strict";f();var jW=Sc(),jRe=TypeError;UW.exports=function(e,t){if(!delete e[t])throw new jRe("Cannot delete property "+jW(t)+" of "+jW(e))}});var uM=I((aLt,VW)=>{"use strict";f();var URe=tr(),lM=_s(),VRe=sr(),$Re=Ly(),GRe=Math.min;VW.exports=[].copyWithin||function(t,i){var o=URe(this),c=VRe(o),a=lM(t,c),v=lM(i,c),b=arguments.length>2?arguments[2]:void 0,q=GRe((b===void 0?c:lM(b,c))-v,c-a),M=1;for(v<a&&a<v+q&&(M=-1,v+=q-1,a+=q-1);q-->0;)v in o?o[a]=o[v]:$Re(o,a),a+=M,v+=M;return o}});var $W=I(()=>{"use strict";f();var WRe=X(),ZRe=uM(),KRe=ui();WRe({target:"Array",proto:!0},{copyWithin:ZRe});KRe("copyWithin")});var jo=I((cLt,GW)=>{"use strict";f();var HRe=Ze();GW.exports=function(e,t){var i=[][e];return!!i&&HRe(function(){i.call(null,t||function(){return 1},1)})}});var WW=I(()=>{"use strict";f();var XRe=X(),YRe=Ei().every,JRe=jo(),QRe=JRe("every");XRe({target:"Array",proto:!0,forced:!QRe},{every:function(t){return YRe(this,t,arguments.length>1?arguments[1]:void 0)}})});var vw=I((mLt,KW)=>{"use strict";f();var eOe=tr(),ZW=_s(),tOe=sr();KW.exports=function(t){for(var i=eOe(this),o=tOe(i),c=arguments.length,a=ZW(c>1?arguments[1]:void 0,o),v=c>2?arguments[2]:void 0,b=v===void 0?o:ZW(v,o);b>a;)i[a++]=t;return i}});var HW=I(()=>{"use strict";f();var rOe=X(),iOe=vw(),nOe=ui();rOe({target:"Array",proto:!0},{fill:iOe});nOe("fill")});var XW=I(()=>{"use strict";f();var aOe=X(),oOe=Ei().filter,sOe=zp(),lOe=sOe("filter");aOe({target:"Array",proto:!0,forced:!lOe},{filter:function(t){return oOe(this,t,arguments.length>1?arguments[1]:void 0)}})});var JW=I(()=>{"use strict";f();var uOe=X(),cOe=Ei().find,hOe=ui(),cM="find",YW=!0;cM in[]&&Array(1)[cM](function(){YW=!1});uOe({target:"Array",proto:!0,forced:YW},{find:function(t){return cOe(this,t,arguments.length>1?arguments[1]:void 0)}});hOe(cM)});var eZ=I(()=>{"use strict";f();var dOe=X(),fOe=Ei().findIndex,pOe=ui(),hM="findIndex",QW=!0;hM in[]&&Array(1)[hM](function(){QW=!1});dOe({target:"Array",proto:!0,forced:QW},{findIndex:function(t){return fOe(this,t,arguments.length>1?arguments[1]:void 0)}});pOe(hM)});var Fy=I((PLt,rZ)=>{"use strict";f();var mOe=Cr(),vOe=ou(),gOe=tr(),yOe=sr(),tZ=function(e){var t=e===1;return function(i,o,c){for(var a=gOe(i),v=vOe(a),b=yOe(v),q=mOe(o,c),M,O;b-->0;)if(M=v[b],O=q(M,b,a),O)switch(e){case 0:return M;case 1:return b}return t?-1:void 0}};rZ.exports={findLast:tZ(0),findLastIndex:tZ(1)}});var dM=I(()=>{"use strict";f();var _Oe=X(),xOe=Fy().findLast,bOe=ui();_Oe({target:"Array",proto:!0},{findLast:function(t){return xOe(this,t,arguments.length>1?arguments[1]:void 0)}});bOe("findLast")});var fM=I(()=>{"use strict";f();var wOe=X(),SOe=Fy().findLastIndex,TOe=ui();wOe({target:"Array",proto:!0},{findLastIndex:function(t){return SOe(this,t,arguments.length>1?arguments[1]:void 0)}});TOe("findLastIndex")});var pM=I((FLt,nZ)=>{"use strict";f();var EOe=xs(),AOe=sr(),qOe=Mc(),IOe=Cr(),iZ=function(e,t,i,o,c,a,v,b){for(var q=c,M=0,O=v?IOe(v,b):!1,D,U;M<o;)M in i&&(D=O?O(i[M],M,t):i[M],a>0&&EOe(D)?(U=AOe(D),q=iZ(e,t,D,U,q,a-1)-1):(qOe(q+1),e[q]=D),q++),M++;return q};nZ.exports=iZ});var aZ=I(()=>{"use strict";f();var POe=X(),COe=pM(),MOe=tr(),ROe=sr(),OOe=Gr(),kOe=Op();POe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,i=MOe(this),o=ROe(i),c=kOe(i,0);return c.length=COe(c,i,i,o,0,t===void 0?1:OOe(t)),c}})});var oZ=I(()=>{"use strict";f();var DOe=X(),LOe=pM(),FOe=Ot(),zOe=tr(),NOe=sr(),BOe=Op();DOe({target:"Array",proto:!0},{flatMap:function(t){var i=zOe(this),o=NOe(i),c;return FOe(t),c=BOe(i,0),c.length=LOe(c,i,i,o,0,1,t,arguments.length>1?arguments[1]:void 0),c}})});var mM=I((GLt,sZ)=>{"use strict";f();var jOe=Ei().forEach,UOe=jo(),VOe=UOe("forEach");sZ.exports=VOe?[].forEach:function(t){return jOe(this,t,arguments.length>1?arguments[1]:void 0)}});var uZ=I(()=>{"use strict";f();var $Oe=X(),lZ=mM();$Oe({target:"Array",proto:!0,forced:[].forEach!==lZ},{forEach:lZ})});var gw=I((XLt,cZ)=>{"use strict";f();var GOe=lt(),WOe=gn();cZ.exports=function(e,t,i,o){try{return o?t(GOe(i)[0],i[1]):t(i)}catch(c){WOe(e,"throw",c)}}});var vM=I((JLt,fZ)=>{"use strict";f();var ZOe=Cr(),KOe=ot(),HOe=tr(),XOe=gw(),YOe=dw(),JOe=bs(),QOe=sr(),hZ=Bo(),eke=Cc(),tke=ol(),dZ=Array;fZ.exports=function(t){var i=HOe(t),o=JOe(this),c=arguments.length,a=c>1?arguments[1]:void 0,v=a!==void 0;v&&(a=ZOe(a,c>2?arguments[2]:void 0));var b=tke(i),q=0,M,O,D,U,ne,ue;if(b&&!(this===dZ&&YOe(b)))for(O=o?new this:[],U=eke(i,b),ne=U.next;!(D=KOe(ne,U)).done;q++)ue=v?XOe(U,a,[D.value,q],!0):D.value,hZ(O,q,ue);else for(M=QOe(i),O=o?new this(M):dZ(M);M>q;q++)ue=v?a(i[q],q):i[q],hZ(O,q,ue);return O.length=q,O}});var zy=I((eFt,gZ)=>{"use strict";f();var rke=Ct(),mZ=rke("iterator"),vZ=!1;try{pZ=0,gM={next:function(){return{done:!!pZ++}},return:function(){vZ=!0}},gM[mZ]=function(){return this},Array.from(gM,function(){throw 2})}catch(e){}var pZ,gM;gZ.exports=function(e,t){try{if(!t&&!vZ)return!1}catch(c){return!1}var i=!1;try{var o={};o[mZ]=function(){return{next:function(){return{done:i=!0}}}},e(o)}catch(c){}return i}});var yZ=I(()=>{"use strict";f();var ike=X(),nke=vM(),ake=zy(),oke=!ake(function(e){Array.from(e)});ike({target:"Array",stat:!0,forced:oke},{from:nke})});var _Z=I(()=>{"use strict";f();var ske=X(),lke=Mp().includes,uke=Ze(),cke=ui(),hke=uke(function(){return!Array(1).includes()});ske({target:"Array",proto:!0,forced:hke},{includes:function(t){return lke(this,t,arguments.length>1?arguments[1]:void 0)}});cke("includes")});var bZ=I(()=>{"use strict";f();var dke=X(),fke=Ac(),pke=Mp().indexOf,mke=jo(),yM=fke([].indexOf),xZ=!!yM&&1/yM([1],1,-0)<0,vke=xZ||!mke("indexOf");dke({target:"Array",proto:!0,forced:vke},{indexOf:function(t){var i=arguments.length>1?arguments[1]:void 0;return xZ?yM(this,t,i)||0:pke(this,t,i)}})});var wZ=I(()=>{"use strict";f();var gke=X(),yke=xs();gke({target:"Array",stat:!0},{isArray:yke})});var Rc=I((pFt,EZ)=>{"use strict";f();var _ke=Ze(),xke=Wt(),bke=It(),wke=Ti(),SZ=Wi(),Ske=wr(),Tke=Ct(),Eke=dr(),bM=Tke("iterator"),TZ=!1,hu,_M,xM;[].keys&&(xM=[].keys(),"next"in xM?(_M=SZ(SZ(xM)),_M!==Object.prototype&&(hu=_M)):TZ=!0);var Ake=!bke(hu)||_ke(function(){var e={};return hu[bM].call(e)!==e});Ake?hu={}:Eke&&(hu=wke(hu));xke(hu[bM])||Ske(hu,bM,function(){return this});EZ.exports={IteratorPrototype:hu,BUGGY_SAFARI_ITERATORS:TZ}});var Oc=I((vFt,AZ)=>{"use strict";f();var qke=Rc().IteratorPrototype,Ike=Ti(),Pke=La(),Cke=xa(),Mke=pd(),Rke=function(){return this};AZ.exports=function(e,t,i,o){var c=t+" Iterator";return e.prototype=Ike(qke,{next:Pke(+!o,i)}),Cke(e,c,!1,!0),Mke[c]=Rke,e}});var xw=I((yFt,LZ)=>{"use strict";f();var Oke=X(),kke=ot(),yw=dr(),kZ=ad(),Dke=Wt(),Lke=Oc(),qZ=Wi(),IZ=No(),Fke=xa(),zke=Gi(),wM=wr(),Nke=Ct(),PZ=pd(),DZ=Rc(),Bke=kZ.PROPER,jke=kZ.CONFIGURABLE,CZ=DZ.IteratorPrototype,_w=DZ.BUGGY_SAFARI_ITERATORS,Ny=Nke("iterator"),MZ="keys",By="values",RZ="entries",OZ=function(){return this};LZ.exports=function(e,t,i,o,c,a,v){Lke(i,t,o);var b=function(J){if(J===c&&U)return U;if(!_w&&J&&J in O)return O[J];switch(J){case MZ:return function(){return new i(this,J)};case By:return function(){return new i(this,J)};case RZ:return function(){return new i(this,J)}}return function(){return new i(this)}},q=t+" Iterator",M=!1,O=e.prototype,D=O[Ny]||O["@@iterator"]||c&&O[c],U=!_w&&D||b(c),ne=t==="Array"&&O.entries||D,ue,fe,H;if(ne&&(ue=qZ(ne.call(new e)),ue!==Object.prototype&&ue.next&&(!yw&&qZ(ue)!==CZ&&(IZ?IZ(ue,CZ):Dke(ue[Ny])||wM(ue,Ny,OZ)),Fke(ue,q,!0,!0),yw&&(PZ[q]=OZ))),Bke&&c===By&&D&&D.name!==By&&(!yw&&jke?zke(O,"name",By):(M=!0,U=function(){return kke(D,this)})),c)if(fe={values:b(By),keys:a?U:b(MZ),entries:b(RZ)},v)for(H in fe)(_w||M||!(H in O))&&wM(O,H,fe[H]);else Oke({target:t,proto:!0,forced:_w||M},fe);return(!yw||v)&&O[Ny]!==U&&wM(O,Ny,U,{name:c}),PZ[t]=U,fe}});var nn=I((xFt,FZ)=>{"use strict";f();FZ.exports=function(e,t){return{value:e,done:t}}});var jy=I((wFt,UZ)=>{"use strict";f();var Uke=$i(),SM=ui(),zZ=pd(),BZ=gr(),Vke=Dr().f,$ke=xw(),bw=nn(),Gke=dr(),Wke=St(),jZ="Array Iterator",Zke=BZ.set,Kke=BZ.getterFor(jZ);UZ.exports=$ke(Array,"Array",function(e,t){Zke(this,{type:jZ,target:Uke(e),index:0,kind:t})},function(){var e=Kke(this),t=e.target,i=e.index++;if(!t||i>=t.length)return e.target=null,bw(void 0,!0);switch(e.kind){case"keys":return bw(i,!1);case"values":return bw(t[i],!1)}return bw([i,t[i]],!1)},"values");var NZ=zZ.Arguments=zZ.Array;SM("keys");SM("values");SM("entries");if(!Gke&&Wke&&NZ.name!=="values")try{Vke(NZ,"name",{value:"values"})}catch(e){}});var VZ=I(()=>{"use strict";f();var Hke=X(),Xke=Ue(),Yke=ou(),Jke=$i(),Qke=jo(),eDe=Xke([].join),tDe=Yke!==Object,rDe=tDe||!Qke("join",",");Hke({target:"Array",proto:!0,forced:rDe},{join:function(t){return eDe(Jke(this),t===void 0?",":t)}})});var EM=I((qFt,GZ)=>{"use strict";f();var iDe=On(),nDe=$i(),aDe=Gr(),oDe=sr(),sDe=jo(),lDe=Math.min,TM=[].lastIndexOf,$Z=!!TM&&1/[1].lastIndexOf(1,-0)<0,uDe=sDe("lastIndexOf"),cDe=$Z||!uDe;GZ.exports=cDe?function(t){if($Z)return iDe(TM,this,arguments)||0;var i=nDe(this),o=oDe(i);if(o===0)return-1;var c=o-1;for(arguments.length>1&&(c=lDe(c,aDe(arguments[1]))),c<0&&(c=o+c);c>=0;c--)if(c in i&&i[c]===t)return c||0;return-1}:TM});var ZZ=I(()=>{"use strict";f();var hDe=X(),WZ=EM();hDe({target:"Array",proto:!0,forced:WZ!==[].lastIndexOf},{lastIndexOf:WZ})});var KZ=I(()=>{"use strict";f();var dDe=X(),fDe=Ei().map,pDe=zp(),mDe=pDe("map");dDe({target:"Array",proto:!0,forced:!mDe},{map:function(t){return fDe(this,t,arguments.length>1?arguments[1]:void 0)}})});var XZ=I(()=>{"use strict";f();var vDe=X(),gDe=Ze(),yDe=bs(),_De=Bo(),HZ=Array,xDe=gDe(function(){function e(){}return!(HZ.of.call(e)instanceof e)});vDe({target:"Array",stat:!0,forced:xDe},{of:function(){for(var t=0,i=arguments.length,o=new(yDe(this)?this:HZ)(i);i>t;)_De(o,t,arguments[t++]);return o.length=i,o}})});var ww=I((zFt,YZ)=>{"use strict";f();var bDe=St(),wDe=xs(),SDe=TypeError,TDe=Object.getOwnPropertyDescriptor,EDe=bDe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();YZ.exports=EDe?function(e,t){if(wDe(e)&&!TDe(e,"length").writable)throw new SDe("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var JZ=I(()=>{"use strict";f();var ADe=X(),qDe=tr(),IDe=sr(),PDe=ww(),CDe=Mc(),MDe=Ze(),RDe=MDe(function(){return[].push.call({length:4294967296},1)!==4294967297}),ODe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},kDe=RDe||!ODe();ADe({target:"Array",proto:!0,arity:1,forced:kDe},{push:function(t){var i=qDe(this),o=IDe(i),c=arguments.length;CDe(o+c);for(var a=0;a<c;a++)i[o]=arguments[a],o++;return PDe(i,o),o}})});var Uy=I((VFt,r7)=>{"use strict";f();var DDe=Ot(),LDe=tr(),FDe=ou(),zDe=sr(),QZ=TypeError,e7="Reduce of empty array with no initial value",t7=function(e){return function(t,i,o,c){var a=LDe(t),v=FDe(a),b=zDe(a);if(DDe(i),b===0&&o<2)throw new QZ(e7);var q=e?b-1:0,M=e?-1:1;if(o<2)for(;;){if(q in v){c=v[q],q+=M;break}if(q+=M,e?q<0:b<=q)throw new QZ(e7)}for(;e?q>=0:b>q;q+=M)q in v&&(c=i(c,v[q],q,a));return c}};r7.exports={left:t7(!1),right:t7(!0)}});var $y=I((GFt,i7)=>{"use strict";f();var Vy=at(),NDe=ms(),BDe=Mn(),Sw=function(e){return NDe.slice(0,e.length)===e};i7.exports=function(){return Sw("Bun/")?"BUN":Sw("Cloudflare-Workers")?"CLOUDFLARE":Sw("Deno/")?"DENO":Sw("Node.js/")?"NODE":Vy.Bun&&typeof Bun.version=="string"?"BUN":Vy.Deno&&typeof Deno.version=="object"?"DENO":BDe(Vy.process)==="process"?"NODE":Vy.window&&Vy.document?"BROWSER":"REST"}()});var md=I((ZFt,n7)=>{"use strict";f();var jDe=$y();n7.exports=jDe==="NODE"});var o7=I(()=>{"use strict";f();var UDe=X(),VDe=Uy().left,$De=jo(),a7=gs(),GDe=md(),WDe=!GDe&&a7>79&&a7<83,ZDe=WDe||!$De("reduce");UDe({target:"Array",proto:!0,forced:ZDe},{reduce:function(t){var i=arguments.length;return VDe(this,t,i,i>1?arguments[1]:void 0)}})});var l7=I(()=>{"use strict";f();var KDe=X(),HDe=Uy().right,XDe=jo(),s7=gs(),YDe=md(),JDe=!YDe&&s7>79&&s7<83,QDe=JDe||!XDe("reduceRight");KDe({target:"Array",proto:!0,forced:QDe},{reduceRight:function(t){return HDe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var c7=I(()=>{"use strict";f();var eLe=X(),tLe=Ue(),rLe=xs(),iLe=tLe([].reverse),u7=[1,2];eLe({target:"Array",proto:!0,forced:String(u7)===String(u7.reverse())},{reverse:function(){return rLe(this)&&(this.length=this.length),iLe(this)}})});var f7=I(()=>{"use strict";f();var nLe=X(),h7=xs(),aLe=bs(),oLe=It(),d7=_s(),sLe=sr(),lLe=$i(),uLe=Bo(),cLe=Ct(),hLe=zp(),dLe=Na(),fLe=hLe("slice"),pLe=cLe("species"),AM=Array,mLe=Math.max;nLe({target:"Array",proto:!0,forced:!fLe},{slice:function(t,i){var o=lLe(this),c=sLe(o),a=d7(t,c),v=d7(i===void 0?c:i,c),b,q,M;if(h7(o)&&(b=o.constructor,aLe(b)&&(b===AM||h7(b.prototype))?b=void 0:oLe(b)&&(b=b[pLe],b===null&&(b=void 0)),b===AM||b===void 0))return dLe(o,a,v);for(q=new(b===void 0?AM:b)(mLe(v-a,0)),M=0;a<v;a++,M++)a in o&&uLe(q,M,o[a]);return q.length=M,q}})});var p7=I(()=>{"use strict";f();var vLe=X(),gLe=Ei().some,yLe=jo(),_Le=yLe("some");vLe({target:"Array",proto:!0,forced:!_Le},{some:function(t){return gLe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Tw=I((czt,v7)=>{"use strict";f();var m7=Na(),xLe=Math.floor,qM=function(e,t){var i=e.length;if(i<8)for(var o=1,c,a;o<i;){for(a=o,c=e[o];a&&t(e[a-1],c)>0;)e[a]=e[--a];a!==o++&&(e[a]=c)}else for(var v=xLe(i/2),b=qM(m7(e,0,v),t),q=qM(m7(e,v),t),M=b.length,O=q.length,D=0,U=0;D<M||U<O;)e[D+U]=D<M&&U<O?t(b[D],q[U])<=0?b[D++]:q[U++]:D<M?b[D++]:q[U++];return e};v7.exports=qM});var IM=I((dzt,y7)=>{"use strict";f();var bLe=ms(),g7=bLe.match(/firefox\/(\d+)/i);y7.exports=!!g7&&+g7[1]});var PM=I((pzt,_7)=>{"use strict";f();var wLe=ms();_7.exports=/MSIE|Trident/.test(wLe)});var Ew=I((vzt,b7)=>{"use strict";f();var SLe=ms(),x7=SLe.match(/AppleWebKit\/(\d+)\./);b7.exports=!!x7&&+x7[1]});var C7=I(()=>{"use strict";f();var TLe=X(),I7=Ue(),ELe=Ot(),ALe=tr(),w7=sr(),qLe=Ly(),S7=zt(),CM=Ze(),ILe=Tw(),PLe=jo(),T7=IM(),CLe=PM(),E7=gs(),A7=Ew(),kc=[],q7=I7(kc.sort),MLe=I7(kc.push),RLe=CM(function(){kc.sort(void 0)}),OLe=CM(function(){kc.sort(null)}),kLe=PLe("sort"),P7=!CM(function(){if(E7)return E7<70;if(!(T7&&T7>3)){if(CLe)return!0;if(A7)return A7<603;var e="",t,i,o,c;for(t=65;t<76;t++){switch(i=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:o=3;break;case 68:case 71:o=4;break;default:o=2}for(c=0;c<47;c++)kc.push({k:i+c,v:o})}for(kc.sort(function(a,v){return v.v-a.v}),c=0;c<kc.length;c++)i=kc[c].k.charAt(0),e.charAt(e.length-1)!==i&&(e+=i);return e!=="DGBEFHACIJK"}}),DLe=RLe||!OLe||!kLe||!P7,LLe=function(e){return function(t,i){return i===void 0?-1:t===void 0?1:e!==void 0?+e(t,i)||0:S7(t)>S7(i)?1:-1}};TLe({target:"Array",proto:!0,forced:DLe},{sort:function(t){t!==void 0&&ELe(t);var i=ALe(this);if(P7)return t===void 0?q7(i):q7(i,t);var o=[],c=w7(i),a,v;for(v=0;v<c;v++)v in i&&MLe(o,i[v]);for(ILe(o,LLe(t)),a=w7(o),v=0;v<a;)i[v]=o[v++];for(;v<c;)qLe(i,v++);return i}})});var Dc=I((bzt,R7)=>{"use strict";f();var FLe=Rt(),zLe=Wr(),NLe=Ct(),BLe=St(),M7=NLe("species");R7.exports=function(e){var t=FLe(e);BLe&&t&&!t[M7]&&zLe(t,M7,{configurable:!0,get:function(){return this}})}});var O7=I(()=>{"use strict";f();var jLe=Dc();jLe("Array")});var k7=I(()=>{"use strict";f();var ULe=X(),VLe=tr(),$Le=_s(),GLe=Gr(),WLe=sr(),ZLe=ww(),KLe=Mc(),HLe=Op(),XLe=Bo(),MM=Ly(),YLe=zp(),JLe=YLe("splice"),QLe=Math.max,eFe=Math.min;ULe({target:"Array",proto:!0,forced:!JLe},{splice:function(t,i){var o=VLe(this),c=WLe(o),a=$Le(t,c),v=arguments.length,b,q,M,O,D,U;for(v===0?b=q=0:v===1?(b=0,q=c-a):(b=v-2,q=eFe(QLe(GLe(i),0),c-a)),KLe(c+b-q),M=HLe(o,q),O=0;O<q;O++)D=a+O,D in o&&XLe(M,O,o[D]);if(M.length=q,b<q){for(O=a;O<c-q;O++)D=O+q,U=O+b,D in o?o[U]=o[D]:MM(o,U);for(O=c;O>c-q+b;O--)MM(o,O-1)}else if(b>q)for(O=c-q;O>a;O--)D=O+q-1,U=O+b-1,D in o?o[U]=o[D]:MM(o,U);for(O=0;O<b;O++)o[O+a]=arguments[O+2];return ZLe(o,c-q+b),M}})});var RM=I((Pzt,D7)=>{"use strict";f();var tFe=sr();D7.exports=function(e,t){for(var i=tFe(e),o=new t(i),c=0;c<i;c++)o[c]=e[i-c-1];return o}});var OM=I(()=>{"use strict";f();var rFe=X(),iFe=RM(),nFe=$i(),aFe=ui(),oFe=Array;rFe({target:"Array",proto:!0},{toReversed:function(){return iFe(nFe(this),oFe)}});aFe("toReversed")});var du=I((kzt,L7)=>{"use strict";f();var sFe=sr();L7.exports=function(e,t,i){for(var o=0,c=arguments.length>2?i:sFe(t),a=new e(c);c>o;)a[o]=t[o++];return a}});var kM=I((Lzt,F7)=>{"use strict";f();var lFe=at();F7.exports=function(e,t){var i=lFe[e],o=i&&i.prototype;return o&&o[t]}});var DM=I(()=>{"use strict";f();var uFe=X(),cFe=Ue(),hFe=Ot(),dFe=$i(),fFe=du(),pFe=kM(),mFe=ui(),vFe=Array,gFe=cFe(pFe("Array","sort"));uFe({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&hFe(t);var i=dFe(this),o=fFe(vFe,i);return gFe(o,t)}});mFe("toSorted")});var LM=I(()=>{"use strict";f();var yFe=X(),_Fe=ui(),xFe=Mc(),bFe=sr(),wFe=_s(),SFe=$i(),TFe=Gr(),EFe=Array,AFe=Math.max,qFe=Math.min;yFe({target:"Array",proto:!0},{toSpliced:function(t,i){var o=SFe(this),c=bFe(o),a=wFe(t,c),v=arguments.length,b=0,q,M,O,D;for(v===0?q=M=0:v===1?(q=0,M=c-a):(q=v-2,M=qFe(AFe(TFe(i),0),c-a)),O=xFe(c+q-M),D=EFe(O);b<a;b++)D[b]=o[b];for(;b<a+q;b++)D[b]=arguments[b-a+2];for(;b<O;b++)D[b]=o[b+M-q];return D}});_Fe("toSpliced")});var z7=I(()=>{"use strict";f();var IFe=ui();IFe("flat")});var N7=I(()=>{"use strict";f();var PFe=ui();PFe("flatMap")});var B7=I(()=>{"use strict";f();var CFe=X(),MFe=tr(),RFe=sr(),OFe=ww(),kFe=Ly(),DFe=Mc(),LFe=[].unshift(0)!==1,FFe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},zFe=LFe||!FFe();CFe({target:"Array",proto:!0,arity:1,forced:zFe},{unshift:function(t){var i=MFe(this),o=RFe(i),c=arguments.length;if(c){DFe(o+c);for(var a=o;a--;){var v=a+c;a in i?i[v]=i[a]:kFe(i,v)}for(var b=0;b<c;b++)i[b]=arguments[b]}return OFe(i,o+c)}})});var FM=I((Qzt,j7)=>{"use strict";f();var NFe=sr(),BFe=Gr(),jFe=RangeError;j7.exports=function(e,t,i,o){var c=NFe(e),a=BFe(i),v=a<0?c+a:a;if(v>=c||v<0)throw new jFe("Incorrect index");for(var b=new t(c),q=0;q<c;q++)b[q]=q===v?o:e[q];return b}});var zM=I(()=>{"use strict";f();var UFe=X(),VFe=FM(),$Fe=$i(),GFe=Array;UFe({target:"Array",proto:!0},{with:function(e,t){return VFe($Fe(this),GFe,e,t)}})});var Gy=I((nNt,U7)=>{"use strict";f();U7.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Uo=I((oNt,V7)=>{"use strict";f();var WFe=wr();V7.exports=function(e,t,i){for(var o in t)WFe(e,o,t[o],i);return e}});var ea=I((lNt,$7)=>{"use strict";f();var ZFe=Rn(),KFe=TypeError;$7.exports=function(e,t){if(ZFe(t,e))return e;throw new KFe("Incorrect invocation")}});var Np=I((cNt,G7)=>{"use strict";f();var HFe=Gr(),XFe=za(),YFe=RangeError;G7.exports=function(e){if(e===void 0)return 0;var t=HFe(e),i=XFe(t);if(t!==i)throw new YFe("Wrong length or index");return i}});var Aw=I((dNt,W7)=>{"use strict";f();W7.exports=Math.sign||function(t){var i=+t;return i===0||i!==i?i:i<0?-1:1}});var NM=I((pNt,K7)=>{"use strict";f();var JFe=2220446049250313e-31,Z7=1/JFe;K7.exports=function(e){return e+Z7-Z7}});var BM=I((vNt,H7)=>{"use strict";f();var QFe=Aw(),eze=NM(),tze=Math.abs,rze=2220446049250313e-31;H7.exports=function(e,t,i,o){var c=+e,a=tze(c),v=QFe(c);if(a<o)return v*eze(a/o/t)*o*t;var b=(1+t/rze)*a,q=b-(b-a);return q>i||q!==q?v*(1/0):v*q}});var qw=I((yNt,X7)=>{"use strict";f();var ize=BM(),nze=1.1920928955078125e-7,aze=34028234663852886e22,oze=11754943508222875e-54;X7.exports=Math.fround||function(t){return ize(t,nze,aze,oze)}});var J7=I((xNt,Y7)=>{"use strict";f();var sze=Array,lze=Math.abs,fu=Math.pow,uze=Math.floor,cze=Math.log,hze=Math.LN2,dze=function(e,t,i){var o=sze(i),c=i*8-t-1,a=(1<<c)-1,v=a>>1,b=t===23?fu(2,-24)-fu(2,-77):0,q=e<0||e===0&&1/e<0?1:0,M=0,O,D,U;for(e=lze(e),e!==e||e===1/0?(D=e!==e?1:0,O=a):(O=uze(cze(e)/hze),U=fu(2,-O),e*U<1&&(O--,U*=2),O+v>=1?e+=b/U:e+=b*fu(2,1-v),e*U>=2&&(O++,U/=2),O+v>=a?(D=0,O=a):O+v>=1?(D=(e*U-1)*fu(2,t),O+=v):(D=e*fu(2,v-1)*fu(2,t),O=0));t>=8;)o[M++]=D&255,D/=256,t-=8;for(O=O<<t|D,c+=t;c>0;)o[M++]=O&255,O/=256,c-=8;return o[M-1]|=q*128,o},fze=function(e,t){var i=e.length,o=i*8-t-1,c=(1<<o)-1,a=c>>1,v=o-7,b=i-1,q=e[b--],M=q&127,O;for(q>>=7;v>0;)M=M*256+e[b--],v-=8;for(O=M&(1<<-v)-1,M>>=-v,v+=t;v>0;)O=O*256+e[b--],v-=8;if(M===0)M=1-a;else{if(M===c)return O?NaN:q?-1/0:1/0;O+=fu(2,t),M-=a}return(q?-1:1)*O*fu(2,M-t)};Y7.exports={pack:dze,unpack:fze}});var Ky=I((wNt,mK)=>{"use strict";f();var Rw=at(),GM=Ue(),jM=St(),pze=Gy(),cK=ad(),mze=Gi(),vze=Wr(),Q7=Uo(),UM=Ze(),Iw=ea(),gze=Gr(),yze=za(),Cw=Np(),_ze=qw(),hK=J7(),xze=Wi(),eK=No(),bze=vw(),wze=Na(),Sze=Pc(),Tze=sd(),dK=xa(),WM=gr(),Eze=cK.PROPER,tK=cK.CONFIGURABLE,jp="ArrayBuffer",Ow="DataView",Up="prototype",Aze="Wrong length",fK="Wrong index",rK=WM.getterFor(jp),Zy=WM.getterFor(Ow),iK=WM.set,ws=Rw[jp],vo=ws,Bp=vo&&vo[Up],sl=Rw[Ow],vd=sl&&sl[Up],nK=Object.prototype,qze=Rw.Array,Mw=Rw.RangeError,Ize=GM(bze),Pze=GM([].reverse),pK=hK.pack,aK=hK.unpack,oK=function(e){return[e&255]},sK=function(e){return[e&255,e>>8&255]},lK=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},uK=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Cze=function(e){return pK(_ze(e),23,4)},Mze=function(e){return pK(e,52,8)},Pw=function(e,t,i){vze(e[Up],t,{configurable:!0,get:function(){return i(this)[t]}})},Lc=function(e,t,i,o){var c=Zy(e),a=Cw(i),v=!!o;if(a+t>c.byteLength)throw new Mw(fK);var b=c.bytes,q=a+c.byteOffset,M=wze(b,q,q+t);return v?M:Pze(M)},Fc=function(e,t,i,o,c,a){var v=Zy(e),b=Cw(i),q=o(+c),M=!!a;if(b+t>v.byteLength)throw new Mw(fK);for(var O=v.bytes,D=b+v.byteOffset,U=0;U<t;U++)O[D+U]=q[M?U:t-U-1]};pze?(VM=Eze&&ws.name!==jp,!UM(function(){ws(1)})||!UM(function(){new ws(-1)})||UM(function(){return new ws,new ws(1.5),new ws(NaN),ws.length!==1||VM&&!tK})?(vo=function(t){return Iw(this,Bp),Sze(new ws(Cw(t)),this,vo)},vo[Up]=Bp,Bp.constructor=vo,Tze(vo,ws)):VM&&tK&&mze(ws,"name",jp),eK&&xze(vd)!==nK&&eK(vd,nK),Wy=new sl(new vo(2)),$M=GM(vd.setInt8),Wy.setInt8(0,2147483648),Wy.setInt8(1,2147483649),(Wy.getInt8(0)||!Wy.getInt8(1))&&Q7(vd,{setInt8:function(t,i){$M(this,t,i<<24>>24)},setUint8:function(t,i){$M(this,t,i<<24>>24)}},{unsafe:!0})):(vo=function(t){Iw(this,Bp);var i=Cw(t);iK(this,{type:jp,bytes:Ize(qze(i),0),byteLength:i}),jM||(this.byteLength=i,this.detached=!1)},Bp=vo[Up],sl=function(t,i,o){Iw(this,vd),Iw(t,Bp);var c=rK(t),a=c.byteLength,v=gze(i);if(v<0||v>a)throw new Mw("Wrong offset");if(o=o===void 0?a-v:yze(o),v+o>a)throw new Mw(Aze);iK(this,{type:Ow,buffer:t,byteLength:o,byteOffset:v,bytes:c.bytes}),jM||(this.buffer=t,this.byteLength=o,this.byteOffset=v)},vd=sl[Up],jM&&(Pw(vo,"byteLength",rK),Pw(sl,"buffer",Zy),Pw(sl,"byteLength",Zy),Pw(sl,"byteOffset",Zy)),Q7(vd,{getInt8:function(t){return Lc(this,1,t)[0]<<24>>24},getUint8:function(t){return Lc(this,1,t)[0]},getInt16:function(t){var i=Lc(this,2,t,arguments.length>1?arguments[1]:!1);return(i[1]<<8|i[0])<<16>>16},getUint16:function(t){var i=Lc(this,2,t,arguments.length>1?arguments[1]:!1);return i[1]<<8|i[0]},getInt32:function(t){return uK(Lc(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return uK(Lc(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return aK(Lc(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return aK(Lc(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,i){Fc(this,1,t,oK,i)},setUint8:function(t,i){Fc(this,1,t,oK,i)},setInt16:function(t,i){Fc(this,2,t,sK,i,arguments.length>2?arguments[2]:!1)},setUint16:function(t,i){Fc(this,2,t,sK,i,arguments.length>2?arguments[2]:!1)},setInt32:function(t,i){Fc(this,4,t,lK,i,arguments.length>2?arguments[2]:!1)},setUint32:function(t,i){Fc(this,4,t,lK,i,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,i){Fc(this,4,t,Cze,i,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,i){Fc(this,8,t,Mze,i,arguments.length>2?arguments[2]:!1)}}));var VM,Wy,$M;dK(vo,jp);dK(sl,Ow);mK.exports={ArrayBuffer:vo,DataView:sl}});var gK=I(()=>{"use strict";f();var Rze=X(),Oze=at(),kze=Ky(),Dze=Dc(),ZM="ArrayBuffer",vK=kze[ZM],Lze=Oze[ZM];Rze({global:!0,constructor:!0,forced:Lze!==vK},{ArrayBuffer:vK});Dze(ZM)});var Jt=I((qNt,qK)=>{"use strict";f();var Fze=Gy(),YM=St(),ba=at(),bK=Wt(),Lw=It(),Nc=Zt(),JM=_a(),zze=Sc(),Nze=Gi(),KM=wr(),Bze=Wr(),jze=Rn(),Fw=Wi(),$p=No(),Uze=Ct(),Vze=Tc(),wK=gr(),SK=wK.enforce,$ze=wK.get,kw=ba.Int8Array,HM=kw&&kw.prototype,yK=ba.Uint8ClampedArray,_K=yK&&yK.prototype,ll=kw&&Fw(kw),Ss=HM&&Fw(HM),Gze=Object.prototype,QM=ba.TypeError,xK=Uze("toStringTag"),XM=Vze("TYPED_ARRAY_TAG"),Dw="TypedArrayConstructor",pu=Fze&&!!$p&&JM(ba.opera)!=="Opera",TK=!1,ja,zc,Vp,mu={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},eR={BigInt64Array:8,BigUint64Array:8},Wze=function(t){if(!Lw(t))return!1;var i=JM(t);return i==="DataView"||Nc(mu,i)||Nc(eR,i)},EK=function(e){var t=Fw(e);if(Lw(t)){var i=$ze(t);return i&&Nc(i,Dw)?i[Dw]:EK(t)}},AK=function(e){if(!Lw(e))return!1;var t=JM(e);return Nc(mu,t)||Nc(eR,t)},Zze=function(e){if(AK(e))return e;throw new QM("Target is not a typed array")},Kze=function(e){if(bK(e)&&(!$p||jze(ll,e)))return e;throw new QM(zze(e)+" is not a typed array constructor")},Hze=function(e,t,i,o){if(YM){if(i)for(var c in mu){var a=ba[c];if(a&&Nc(a.prototype,e))try{delete a.prototype[e]}catch(v){try{a.prototype[e]=t}catch(b){}}}(!Ss[e]||i)&&KM(Ss,e,i?t:pu&&HM[e]||t,o)}},Xze=function(e,t,i){var o,c;if(YM){if($p){if(i){for(o in mu)if(c=ba[o],c&&Nc(c,e))try{delete c[e]}catch(a){}}if(!ll[e]||i)try{return KM(ll,e,i?t:pu&&ll[e]||t)}catch(a){}else return}for(o in mu)c=ba[o],c&&(!c[e]||i)&&KM(c,e,t)}};for(ja in mu)zc=ba[ja],Vp=zc&&zc.prototype,Vp?SK(Vp)[Dw]=zc:pu=!1;for(ja in eR)zc=ba[ja],Vp=zc&&zc.prototype,Vp&&(SK(Vp)[Dw]=zc);if((!pu||!bK(ll)||ll===Function.prototype)&&(ll=function(){throw new QM("Incorrect invocation")},pu))for(ja in mu)ba[ja]&&$p(ba[ja],ll);if((!pu||!Ss||Ss===Gze)&&(Ss=ll.prototype,pu))for(ja in mu)ba[ja]&&$p(ba[ja].prototype,Ss);pu&&Fw(_K)!==Ss&&$p(_K,Ss);if(YM&&!Nc(Ss,xK)){TK=!0,Bze(Ss,xK,{configurable:!0,get:function(){return Lw(this)?this[XM]:void 0}});for(ja in mu)ba[ja]&&Nze(ba[ja],XM,ja)}qK.exports={NATIVE_ARRAY_BUFFER_VIEWS:pu,TYPED_ARRAY_TAG:TK&&XM,aTypedArray:Zze,aTypedArrayConstructor:Kze,exportTypedArrayMethod:Hze,exportTypedArrayStaticMethod:Xze,getTypedArrayConstructor:EK,isView:Wze,isTypedArray:AK,TypedArray:ll,TypedArrayPrototype:Ss}});var PK=I(()=>{"use strict";f();var Yze=X(),IK=Jt(),Jze=IK.NATIVE_ARRAY_BUFFER_VIEWS;Yze({target:"ArrayBuffer",stat:!0,forced:!Jze},{isView:IK.isView})});var DK=I(()=>{"use strict";f();var Qze=X(),rR=Ac(),eNe=Ze(),OK=Ky(),CK=lt(),MK=_s(),tNe=za(),iR=OK.ArrayBuffer,tR=OK.DataView,kK=tR.prototype,RK=rR(iR.prototype.slice),rNe=rR(kK.getUint8),iNe=rR(kK.setUint8),nNe=eNe(function(){return!new iR(2).slice(1,void 0).byteLength});Qze({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:nNe},{slice:function(t,i){if(RK&&i===void 0)return RK(CK(this),t);for(var o=CK(this).byteLength,c=MK(t,o),a=MK(i===void 0?o:i,o),v=new iR(tNe(a-c)),b=new tR(this),q=new tR(v),M=0;c<a;)iNe(q,M++,rNe(b,c++));return v}})});var LK=I(()=>{"use strict";f();var aNe=X(),oNe=Ky(),sNe=Gy();aNe({global:!0,constructor:!0,forced:!sNe},{DataView:oNe.DataView})});var FK=I(()=>{"use strict";f();LK()});var nR=I(()=>{"use strict";f();var lNe=X(),uNe=Ue(),jK=Math.pow,zK=31,cNe=1023,NK=jK(2,-24),BK=.0009765625,hNe=function(e){var t=e>>>15,i=e>>>10&zK,o=e&cNe;return i===zK?o===0?t===0?1/0:-1/0:NaN:i===0?o*(t===0?NK:-NK):jK(2,i-15)*(t===0?1+o*BK:-1-o*BK)},dNe=uNe(DataView.prototype.getUint16);lNe({target:"DataView",proto:!0},{getFloat16:function(t){var i=dNe(this,t,arguments.length>1?arguments[1]:!1);return hNe(i)}})});var aR=I(($Nt,UK)=>{"use strict";f();var fNe=_a(),pNe=TypeError;UK.exports=function(e){if(fNe(e)==="DataView")return e;throw new pNe("Argument is not a DataView")}});var oR=I((WNt,VK)=>{"use strict";f();var mNe=Math.log,vNe=Math.LN2;VK.exports=Math.log2||function(t){return mNe(t)/vNe}});var lR=I(()=>{"use strict";f();var gNe=X(),yNe=Ue(),_Ne=aR(),xNe=Np(),bNe=oR(),$K=NM(),wNe=Math.pow,SNe=65520,TNe=61005353927612305e-21,ENe=16777216,sR=1024,ANe=function(e){if(e!==e)return 32256;if(e===0)return(1/e===-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=SNe)return t<<15|31744;if(e<TNe)return t<<15|$K(e*ENe);var i=bNe(e)|0;if(i===-15)return t<<15|sR;var o=$K((e*wNe(2,-i)-1)*sR);return o===sR?t<<15|i+16<<10:t<<15|i+15<<10|o},qNe=yNe(DataView.prototype.setUint16);gNe({target:"DataView",proto:!0},{setFloat16:function(t,i){_Ne(this);var o=xNe(t),c=ANe(+i);return qNe(this,o,c,arguments.length>2?arguments[2]:!1)}})});var uR=I((YNt,ZK)=>{"use strict";f();var WK=at(),INe=Dy(),PNe=Mn(),GK=WK.ArrayBuffer,CNe=WK.TypeError;ZK.exports=GK&&INe(GK.prototype,"byteLength","get")||function(e){if(PNe(e)!=="ArrayBuffer")throw new CNe("ArrayBuffer expected");return e.byteLength}});var cR=I((QNt,KK)=>{"use strict";f();var MNe=at(),RNe=Gy(),ONe=uR(),kNe=MNe.DataView;KK.exports=function(e){if(!RNe||ONe(e)!==0)return!1;try{return new kNe(e),!1}catch(t){return!0}}});var hR=I(()=>{"use strict";f();var DNe=St(),LNe=Wr(),FNe=cR(),HK=ArrayBuffer.prototype;DNe&&!("detached"in HK)&&LNe(HK,"detached",{configurable:!0,get:function(){return FNe(this)}})});var Gp=I((nBt,XK)=>{"use strict";f();var zNe=cR(),NNe=TypeError;XK.exports=function(e){if(zNe(e))throw new NNe("ArrayBuffer is detached");return e}});var dR=I((oBt,YK)=>{"use strict";f();var BNe=at(),jNe=md();YK.exports=function(e){if(jNe){try{return BNe.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var zw=I((lBt,QK)=>{"use strict";f();var UNe=at(),VNe=Ze(),fR=gs(),pR=$y(),JK=UNe.structuredClone;QK.exports=!!JK&&!VNe(function(){if(pR==="DENO"&&fR>92||pR==="NODE"&&fR>94||pR==="BROWSER"&&fR>97)return!1;var e=new ArrayBuffer(8),t=JK(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var _R=I((cBt,rH)=>{"use strict";f();var yR=at(),$Ne=dR(),GNe=zw(),WNe=yR.structuredClone,eH=yR.ArrayBuffer,Nw=yR.MessageChannel,gR=!1,mR,tH,Bw,vR;if(GNe)gR=function(e){WNe(e,{transfer:[e]})};else if(eH)try{Nw||(mR=$Ne("worker_threads"),mR&&(Nw=mR.MessageChannel)),Nw&&(tH=new Nw,Bw=new eH(2),vR=function(e){tH.port1.postMessage(null,[e])},Bw.byteLength===2&&(vR(Bw),Bw.byteLength===0&&(gR=vR)))}catch(e){}rH.exports=gR});var ER=I((dBt,uH)=>{"use strict";f();var wR=at(),SR=Ue(),oH=Dy(),ZNe=Np(),KNe=Gp(),HNe=uR(),iH=_R(),xR=zw(),XNe=wR.structuredClone,sH=wR.ArrayBuffer,bR=wR.DataView,YNe=Math.min,TR=sH.prototype,lH=bR.prototype,JNe=SR(TR.slice),nH=oH(TR,"resizable","get"),aH=oH(TR,"maxByteLength","get"),QNe=SR(lH.getInt8),eBe=SR(lH.setInt8);uH.exports=(xR||iH)&&function(e,t,i){var o=HNe(e),c=t===void 0?o:ZNe(t),a=!nH||!nH(e),v;if(KNe(e),xR&&(e=XNe(e,{transfer:[e]}),o===c&&(i||a)))return e;if(o>=c&&(!i||a))v=JNe(e,0,c);else{var b=i&&!a&&aH?{maxByteLength:aH(e)}:void 0;v=new sH(c,b);for(var q=new bR(e),M=new bR(v),O=YNe(c,o),D=0;D<O;D++)eBe(M,D,QNe(q,D))}return xR||iH(e),v}});var AR=I(()=>{"use strict";f();var tBe=X(),cH=ER();cH&&tBe({target:"ArrayBuffer",proto:!0},{transfer:function(){return cH(this,arguments.length?arguments[0]:void 0,!0)}})});var qR=I(()=>{"use strict";f();var rBe=X(),hH=ER();hH&&rBe({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return hH(this,arguments.length?arguments[0]:void 0,!1)}})});var dH=I(()=>{"use strict";f();var iBe=X(),nBe=Ue(),aBe=Ze(),oBe=aBe(function(){return new Date(16e11).getYear()!==120}),sBe=nBe(Date.prototype.getFullYear);iBe({target:"Date",proto:!0,forced:oBe},{getYear:function(){return sBe(this)-1900}})});var pH=I(()=>{"use strict";f();var lBe=X(),uBe=Ue(),fH=Date,cBe=uBe(fH.prototype.getTime);lBe({target:"Date",stat:!0},{now:function(){return cBe(new fH)}})});var gH=I(()=>{"use strict";f();var hBe=X(),mH=Ue(),dBe=Gr(),vH=Date.prototype,fBe=mH(vH.getTime),pBe=mH(vH.setFullYear);hBe({target:"Date",proto:!0},{setYear:function(t){fBe(this);var i=dBe(t),o=i>=0&&i<=99?i+1900:i;return pBe(this,o)}})});var yH=I(()=>{"use strict";f();var mBe=X();mBe({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var Hy=I((RBt,_H)=>{"use strict";f();var vBe=Gr(),gBe=zt(),yBe=Nr(),_Be=RangeError;_H.exports=function(t){var i=gBe(yBe(this)),o="",c=vBe(t);if(c<0||c===1/0)throw new _Be("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(i+=i))c&1&&(o+=i);return o}});var Xy=I((kBt,SH)=>{"use strict";f();var wH=Ue(),xBe=za(),xH=zt(),bBe=Hy(),wBe=Nr(),SBe=wH(bBe),TBe=wH("".slice),EBe=Math.ceil,bH=function(e){return function(t,i,o){var c=xH(wBe(t)),a=xBe(i),v=c.length,b=o===void 0?" ":xH(o),q,M;return a<=v||b===""?c:(q=a-v,M=SBe(b,EBe(q/b.length)),M.length>q&&(M=TBe(M,0,q)),e?c+M:M+c)}};SH.exports={start:bH(!1),end:bH(!0)}});var AH=I((LBt,EH)=>{"use strict";f();var Bc=Ue(),TH=Ze(),gd=Xy().start,ABe=RangeError,qBe=isFinite,IBe=Math.abs,vu=Date.prototype,IR=vu.toISOString,PBe=Bc(vu.getTime),CBe=Bc(vu.getUTCDate),MBe=Bc(vu.getUTCFullYear),RBe=Bc(vu.getUTCHours),OBe=Bc(vu.getUTCMilliseconds),kBe=Bc(vu.getUTCMinutes),DBe=Bc(vu.getUTCMonth),LBe=Bc(vu.getUTCSeconds);EH.exports=TH(function(){return IR.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!TH(function(){IR.call(new Date(NaN))})?function(){if(!qBe(PBe(this)))throw new ABe("Invalid time value");var t=this,i=MBe(t),o=OBe(t),c=i<0?"-":i>9999?"+":"";return c+gd(IBe(i),c?6:4,0)+"-"+gd(DBe(t)+1,2,0)+"-"+gd(CBe(t),2,0)+"T"+gd(RBe(t),2,0)+":"+gd(kBe(t),2,0)+":"+gd(LBe(t),2,0)+"."+gd(o,3,0)+"Z"}:IR});var IH=I(()=>{"use strict";f();var FBe=X(),qH=AH();FBe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==qH},{toISOString:qH})});var PH=I(()=>{"use strict";f();var zBe=X(),NBe=Ze(),BBe=tr(),jBe=xy(),UBe=NBe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});zBe({target:"Date",proto:!0,arity:1,forced:UBe},{toJSON:function(t){var i=BBe(this),o=jBe(i,"number");return typeof o=="number"&&!isFinite(o)?null:i.toISOString()}})});var MH=I(($Bt,CH)=>{"use strict";f();var VBe=lt(),$Be=QC(),GBe=TypeError;CH.exports=function(e){if(VBe(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new GBe("Incorrect hint");return $Be(this,e)}});var kH=I(()=>{"use strict";f();var WBe=Zt(),ZBe=wr(),KBe=MH(),HBe=Ct(),RH=HBe("toPrimitive"),OH=Date.prototype;WBe(OH,RH)||ZBe(OH,RH,KBe)});var zH=I(()=>{"use strict";f();var LH=Ue(),XBe=wr(),PR=Date.prototype,DH="Invalid Date",FH="toString",YBe=LH(PR[FH]),JBe=LH(PR.getTime);String(new Date(NaN))!==DH&&XBe(PR,FH,function(){var t=JBe(this);return t===t?YBe(this):DH})});var BH=I(()=>{"use strict";f();var QBe=X(),Yy=Ue(),e3e=zt(),t3e=Yy("".charAt),r3e=Yy("".charCodeAt),i3e=Yy(/./.exec),n3e=Yy(1 .toString),a3e=Yy("".toUpperCase),o3e=/[\w*+\-./@]/,NH=function(e,t){for(var i=n3e(e,16);i.length<t;)i="0"+i;return i};QBe({global:!0},{escape:function(t){for(var i=e3e(t),o="",c=i.length,a=0,v,b;a<c;)v=t3e(i,a++),i3e(o3e,v)?o+=v:(b=r3e(v,0),b<256?o+="%"+NH(b,2):o+="%u"+a3e(NH(b,4)));return o}})});var MR=I((t3t,$H)=>{"use strict";f();var UH=Ue(),s3e=Ot(),l3e=It(),u3e=Zt(),jH=Na(),c3e=Ip(),VH=Function,h3e=UH([].concat),d3e=UH([].join),CR={},f3e=function(e,t,i){if(!u3e(CR,t)){for(var o=[],c=0;c<t;c++)o[c]="a["+c+"]";CR[t]=VH("C,a","return new C("+d3e(o,",")+")")}return CR[t](e,i)};$H.exports=c3e?VH.bind:function(t){var i=s3e(this),o=i.prototype,c=jH(arguments,1),a=function(){var b=h3e(c,jH(arguments));return this instanceof a?f3e(i,b.length,b):i.apply(t,b)};return l3e(o)&&(a.prototype=o),a}});var WH=I(()=>{"use strict";f();var p3e=X(),GH=MR();p3e({target:"Function",proto:!0,forced:Function.bind!==GH},{bind:GH})});var HH=I(()=>{"use strict";f();var m3e=Wt(),ZH=It(),v3e=Dr(),g3e=Rn(),y3e=Ct(),_3e=Ey(),RR=y3e("hasInstance"),KH=Function.prototype;RR in KH||v3e.f(KH,RR,{value:_3e(function(e){if(!m3e(this)||!ZH(e))return!1;var t=this.prototype;return ZH(t)?g3e(t,e):e instanceof this},RR)})});var QH=I(()=>{"use strict";f();var x3e=St(),b3e=ad().EXISTS,XH=Ue(),w3e=Wr(),YH=Function.prototype,S3e=XH(YH.toString),JH=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,T3e=XH(JH.exec),E3e="name";x3e&&!b3e&&w3e(YH,E3e,{configurable:!0,get:function(){try{return T3e(JH,S3e(this))[1]}catch(e){return""}}})});var kR=I(()=>{"use strict";f();var A3e=X(),OR=at();A3e({global:!0,forced:OR.globalThis!==OR},{globalThis:OR})});var NR=I(()=>{"use strict";f();var q3e=X(),I3e=at(),P3e=ea(),C3e=lt(),M3e=Wt(),R3e=Wi(),O3e=Wr(),k3e=Bo(),D3e=Ze(),FR=Zt(),L3e=Ct(),ul=Rc().IteratorPrototype,F3e=St(),z3e=dr(),DR="constructor",t9="Iterator",e9=L3e("toStringTag"),r9=TypeError,LR=I3e[t9],i9=z3e||!M3e(LR)||LR.prototype!==ul||!D3e(function(){LR({})}),zR=function(){if(P3e(this,ul),R3e(this)===ul)throw new r9("Abstract class Iterator not directly constructable")},n9=function(e,t){F3e?O3e(ul,e,{configurable:!0,get:function(){return t},set:function(i){if(C3e(this),this===ul)throw new r9("You can't redefine this property");FR(this,e)?this[e]=i:k3e(this,e,i)}}):ul[e]=t};FR(ul,e9)||n9(e9,t9);(i9||!FR(ul,DR)||ul[DR]===Object)&&n9(DR,zR);zR.prototype=ul;q3e({global:!0,constructor:!0,forced:i9},{Iterator:zR})});var ti=I((y3t,a9)=>{"use strict";f();a9.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var Wp=I((x3t,o9)=>{"use strict";f();var N3e=RangeError;o9.exports=function(e){if(e===e)return e;throw new N3e("NaN is not allowed")}});var Zp=I((w3t,s9)=>{"use strict";f();var B3e=Gr(),j3e=RangeError;s9.exports=function(e){var t=B3e(e);if(t<0)throw new j3e("The argument can't be less than 0");return t}});var jc=I((T3t,f9)=>{"use strict";f();var U3e=ot(),V3e=Ti(),$3e=Gi(),G3e=Uo(),W3e=Ct(),l9=gr(),Z3e=Si(),K3e=Rc().IteratorPrototype,jw=nn(),BR=gn(),H3e=W3e("toStringTag"),u9="IteratorHelper",c9="WrapForValidIterator",X3e=l9.set,h9=function(e){var t=l9.getterFor(e?c9:u9);return G3e(V3e(K3e),{next:function(){var o=t(this);if(e)return o.nextHandler();if(o.done)return jw(void 0,!0);try{var c=o.nextHandler();return o.returnHandlerResult?c:jw(c,o.done)}catch(a){throw o.done=!0,a}},return:function(){var i=t(this),o=i.iterator;if(i.done=!0,e){var c=Z3e(o,"return");return c?U3e(c,o):jw(void 0,!0)}if(i.inner)try{BR(i.inner.iterator,"normal")}catch(a){return BR(o,"throw",a)}return o&&BR(o,"normal"),jw(void 0,!0)}})},Y3e=h9(!0),d9=h9(!1);$3e(d9,H3e,"Iterator Helper");f9.exports=function(e,t,i){var o=function(a,v){v?(v.iterator=a.iterator,v.next=a.next):v=a,v.type=t?c9:u9,v.returnHandlerResult=!!i,v.nextHandler=e,v.counter=0,v.done=!1,X3e(this,v)};return o.prototype=t?Y3e:d9,o}});var Ts=I((A3t,p9)=>{"use strict";f();var J3e=at();p9.exports=function(e,t){var i=J3e.Iterator,o=i&&i.prototype,c=o&&o[e],a=!1;if(c)try{c.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(v){v instanceof t||(a=!1)}if(!a)return c}});var $R=I(()=>{"use strict";f();var Q3e=X(),UR=ot(),VR=lt(),eje=ti(),tje=Wp(),rje=Zp(),ije=gn(),nje=jc(),aje=Ts(),m9=dr(),jR=!m9&&aje("drop",RangeError),oje=nje(function(){for(var e=this.iterator,t=this.next,i,o;this.remaining;)if(this.remaining--,i=VR(UR(t,e)),o=this.done=!!i.done,o)return;if(i=VR(UR(t,e)),o=this.done=!!i.done,!o)return i.value});Q3e({target:"Iterator",proto:!0,real:!0,forced:m9||jR},{drop:function(t){VR(this);var i;try{i=rje(tje(+t))}catch(o){ije(this,"throw",o)}return jR?UR(jR,this,i):new oje(eje(this),{remaining:i})}})});var WR=I(()=>{"use strict";f();var sje=X(),lje=ot(),uje=li(),cje=Ot(),hje=lt(),dje=ti(),fje=gn(),pje=Ts(),GR=pje("every",TypeError);sje({target:"Iterator",proto:!0,real:!0,forced:GR},{every:function(t){hje(this);try{cje(t)}catch(c){fje(this,"throw",c)}if(GR)return lje(GR,this,t);var i=dje(this),o=0;return!uje(i,function(c,a){if(!t(c,o++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var KR=I(()=>{"use strict";f();var mje=X(),v9=ot(),vje=Ot(),g9=lt(),gje=ti(),yje=jc(),_je=gw(),y9=dr(),xje=gn(),bje=Ts(),ZR=!y9&&bje("filter",TypeError),wje=yje(function(){for(var e=this.iterator,t=this.predicate,i=this.next,o,c,a;;){if(o=g9(v9(i,e)),c=this.done=!!o.done,c)return;if(a=o.value,_je(e,t,[a,this.counter++],!0))return a}});mje({target:"Iterator",proto:!0,real:!0,forced:y9||ZR},{filter:function(t){g9(this);try{vje(t)}catch(i){xje(this,"throw",i)}return ZR?v9(ZR,this,t):new wje(gje(this),{predicate:t})}})});var XR=I(()=>{"use strict";f();var Sje=X(),Tje=ot(),Eje=li(),Aje=Ot(),qje=lt(),Ije=ti(),Pje=gn(),Cje=Ts(),HR=Cje("find",TypeError);Sje({target:"Iterator",proto:!0,real:!0,forced:HR},{find:function(t){qje(this);try{Aje(t)}catch(c){Pje(this,"throw",c)}if(HR)return Tje(HR,this,t);var i=Ije(this),o=0;return Eje(i,function(c,a){if(t(c,o++))return a(c)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var YR=I((B3t,x9)=>{"use strict";f();var Mje=ot(),_9=lt(),Rje=ti(),Oje=ol();x9.exports=function(e,t){(!t||typeof e!="string")&&_9(e);var i=Oje(e);return Rje(_9(i!==void 0?Mje(i,e):e))}});var rO=I(()=>{"use strict";f();var kje=X(),QR=ot(),Dje=Ot(),eO=lt(),Lje=ti(),Fje=YR(),zje=jc(),tO=gn(),b9=dr(),Nje=Ts(),JR=!b9&&Nje("flatMap",TypeError),Bje=zje(function(){for(var e=this.iterator,t=this.mapper,i,o;;){if(o=this.inner)try{if(i=eO(QR(o.next,o.iterator)),!i.done)return i.value;this.inner=null}catch(c){tO(e,"throw",c)}if(i=eO(QR(this.next,e)),this.done=!!i.done)return;try{this.inner=Fje(t(i.value,this.counter++),!1)}catch(c){tO(e,"throw",c)}}});kje({target:"Iterator",proto:!0,real:!0,forced:b9||JR},{flatMap:function(t){eO(this);try{Dje(t)}catch(i){tO(this,"throw",i)}return JR?QR(JR,this,t):new Bje(Lje(this),{mapper:t,inner:null})}})});var nO=I(()=>{"use strict";f();var jje=X(),Uje=ot(),Vje=li(),$je=Ot(),Gje=lt(),Wje=ti(),Zje=gn(),Kje=Ts(),iO=Kje("forEach",TypeError);jje({target:"Iterator",proto:!0,real:!0,forced:iO},{forEach:function(t){Gje(this);try{$je(t)}catch(c){Zje(this,"throw",c)}if(iO)return Uje(iO,this,t);var i=Wje(this),o=0;Vje(i,function(c){t(c,o++)},{IS_RECORD:!0})}})});var aO=I(()=>{"use strict";f();var Hje=X(),Xje=ot(),Yje=tr(),Jje=Rn(),Qje=Rc().IteratorPrototype,eUe=jc(),tUe=YR(),rUe=dr(),iUe=eUe(function(){return Xje(this.next,this.iterator)},!0);Hje({target:"Iterator",stat:!0,forced:rUe},{from:function(t){var i=tUe(typeof t=="string"?Yje(t):t,!0);return Jje(Qje,i.iterator)?i.iterator:new iUe(i)}})});var Uw=I(()=>{"use strict";f();var nUe=X(),w9=ot(),aUe=Ot(),S9=lt(),oUe=ti(),sUe=jc(),lUe=gw(),uUe=gn(),cUe=Ts(),T9=dr(),oO=!T9&&cUe("map",TypeError),hUe=sUe(function(){var e=this.iterator,t=S9(w9(this.next,e)),i=this.done=!!t.done;if(!i)return lUe(e,this.mapper,[t.value,this.counter++],!0)});nUe({target:"Iterator",proto:!0,real:!0,forced:T9||oO},{map:function(t){S9(this);try{aUe(t)}catch(i){uUe(this,"throw",i)}return oO?w9(oO,this,t):new hUe(oUe(this),{mapper:t})}})});var lO=I(()=>{"use strict";f();var dUe=X(),fUe=li(),pUe=Ot(),mUe=lt(),vUe=ti(),gUe=gn(),yUe=Ts(),_Ue=On(),xUe=Ze(),E9=TypeError,A9=xUe(function(){[].keys().reduce(function(){},void 0)}),sO=!A9&&yUe("reduce",E9);dUe({target:"Iterator",proto:!0,real:!0,forced:A9||sO},{reduce:function(t){mUe(this);try{pUe(t)}catch(v){gUe(this,"throw",v)}var i=arguments.length<2,o=i?void 0:arguments[1];if(sO)return _Ue(sO,this,i?[t]:[t,o]);var c=vUe(this),a=0;if(fUe(c,function(v){i?(i=!1,o=v):o=t(o,v,a),a++},{IS_RECORD:!0}),i)throw new E9("Reduce of empty iterator with no initial value");return o}})});var cO=I(()=>{"use strict";f();var bUe=X(),wUe=ot(),SUe=li(),TUe=Ot(),EUe=lt(),AUe=ti(),qUe=gn(),IUe=Ts(),uO=IUe("some",TypeError);bUe({target:"Iterator",proto:!0,real:!0,forced:uO},{some:function(t){EUe(this);try{TUe(t)}catch(c){qUe(this,"throw",c)}if(uO)return wUe(uO,this,t);var i=AUe(this),o=0;return SUe(i,function(c,a){if(t(c,o++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var dO=I(()=>{"use strict";f();var PUe=X(),q9=ot(),I9=lt(),CUe=ti(),MUe=Wp(),RUe=Zp(),OUe=jc(),P9=gn(),kUe=Ts(),C9=dr(),hO=!C9&&kUe("take",RangeError),DUe=OUe(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,P9(e,"normal",void 0);var t=I9(q9(this.next,e)),i=this.done=!!t.done;if(!i)return t.value});PUe({target:"Iterator",proto:!0,real:!0,forced:C9||hO},{take:function(t){I9(this);var i;try{i=RUe(MUe(+t))}catch(o){P9(this,"throw",o)}return hO?q9(hO,this,i):new DUe(CUe(this),{remaining:i})}})});var fO=I(()=>{"use strict";f();var LUe=X(),FUe=lt(),zUe=li(),NUe=ti(),BUe=[].push;LUe({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return zUe(NUe(FUe(this)),BUe,{that:t,IS_RECORD:!0}),t}})});var M9=I(()=>{"use strict";f();var jUe=at(),UUe=xa();UUe(jUe.JSON,"JSON",!0)});var Vw=I((mjt,R9)=>{"use strict";f();var VUe=Ze();R9.exports=VUe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var Gw=I((gjt,k9)=>{"use strict";f();var $Ue=Ze(),GUe=It(),WUe=Mn(),O9=Vw(),$w=Object.isExtensible,ZUe=$Ue(function(){$w(1)});k9.exports=ZUe||O9?function(t){return!GUe(t)||O9&&WUe(t)==="ArrayBuffer"?!1:$w?$w(t):!0}:$w});var gu=I((_jt,D9)=>{"use strict";f();var KUe=Ze();D9.exports=!KUe(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Uc=I((bjt,z9)=>{"use strict";f();var HUe=X(),XUe=Ue(),YUe=Cp(),JUe=It(),pO=Zt(),QUe=Dr().f,L9=Ec(),e5e=J1(),mO=Gw(),t5e=Tc(),r5e=gu(),F9=!1,yu=t5e("meta"),i5e=0,vO=function(e){QUe(e,yu,{value:{objectID:"O"+i5e++,weakData:{}}})},n5e=function(e,t){if(!JUe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!pO(e,yu)){if(!mO(e))return"F";if(!t)return"E";vO(e)}return e[yu].objectID},a5e=function(e,t){if(!pO(e,yu)){if(!mO(e))return!0;if(!t)return!1;vO(e)}return e[yu].weakData},o5e=function(e){return r5e&&F9&&mO(e)&&!pO(e,yu)&&vO(e),e},s5e=function(){l5e.enable=function(){},F9=!0;var e=L9.f,t=XUe([].splice),i={};i[yu]=1,e(i).length&&(L9.f=function(o){for(var c=e(o),a=0,v=c.length;a<v;a++)if(c[a]===yu){t(c,a,1);break}return c},HUe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:e5e.f}))},l5e=z9.exports={enable:s5e,fastKey:n5e,getWeakData:a5e,onFreeze:o5e};YUe[yu]=!0});var Jy=I((Sjt,B9)=>{"use strict";f();var u5e=X(),c5e=at(),h5e=Ue(),N9=Rp(),d5e=wr(),f5e=Uc(),p5e=li(),m5e=ea(),v5e=Wt(),g5e=Fa(),gO=It(),yO=Ze(),y5e=zy(),_5e=xa(),x5e=Pc();B9.exports=function(e,t,i){var o=e.indexOf("Map")!==-1,c=e.indexOf("Weak")!==-1,a=o?"set":"add",v=c5e[e],b=v&&v.prototype,q=v,M={},O=function(J){var re=h5e(b[J]);d5e(b,J,J==="add"?function(Ae){return re(this,Ae===0?0:Ae),this}:J==="delete"?function(xe){return c&&!gO(xe)?!1:re(this,xe===0?0:xe)}:J==="get"?function(Ae){return c&&!gO(Ae)?void 0:re(this,Ae===0?0:Ae)}:J==="has"?function(Ae){return c&&!gO(Ae)?!1:re(this,Ae===0?0:Ae)}:function(Ae,Ge){return re(this,Ae===0?0:Ae,Ge),this})},D=N9(e,!v5e(v)||!(c||b.forEach&&!yO(function(){new v().entries().next()})));if(D)q=i.getConstructor(t,e,o,a),f5e.enable();else if(N9(e,!0)){var U=new q,ne=U[a](c?{}:-0,1)!==U,ue=yO(function(){U.has(1)}),fe=y5e(function(J){new v(J)}),H=!c&&yO(function(){for(var J=new v,re=5;re--;)J[a](re,re);return!J.has(-0)});fe||(q=t(function(J,re){m5e(J,b);var xe=x5e(new v,J,q);return g5e(re)||p5e(re,xe[a],{that:xe,AS_ENTRIES:o}),xe}),q.prototype=b,b.constructor=q),(ue||H)&&(O("delete"),O("has"),o&&O("get")),(H||ne)&&O(a),c&&b.clear&&delete b.clear}return M[e]=q,u5e({global:!0,constructor:!0,forced:q!==v},M),_5e(q,e),c||i.setStrong(q,e,o),q}});var xO=I((Ejt,W9)=>{"use strict";f();var j9=Ti(),b5e=Wr(),U9=Uo(),w5e=Cr(),S5e=ea(),T5e=Fa(),E5e=li(),A5e=xw(),Ww=nn(),q5e=Dc(),Qy=St(),V9=Uc().fastKey,G9=gr(),$9=G9.set,_O=G9.getterFor;W9.exports={getConstructor:function(e,t,i,o){var c=e(function(M,O){S5e(M,a),$9(M,{type:t,index:j9(null),first:null,last:null,size:0}),Qy||(M.size=0),T5e(O)||E5e(O,M[o],{that:M,AS_ENTRIES:i})}),a=c.prototype,v=_O(t),b=function(M,O,D){var U=v(M),ne=q(M,O),ue,fe;return ne?ne.value=D:(U.last=ne={index:fe=V9(O,!0),key:O,value:D,previous:ue=U.last,next:null,removed:!1},U.first||(U.first=ne),ue&&(ue.next=ne),Qy?U.size++:M.size++,fe!=="F"&&(U.index[fe]=ne)),M},q=function(M,O){var D=v(M),U=V9(O),ne;if(U!=="F")return D.index[U];for(ne=D.first;ne;ne=ne.next)if(ne.key===O)return ne};return U9(a,{clear:function(){for(var O=this,D=v(O),U=D.first;U;)U.removed=!0,U.previous&&(U.previous=U.previous.next=null),U=U.next;D.first=D.last=null,D.index=j9(null),Qy?D.size=0:O.size=0},delete:function(M){var O=this,D=v(O),U=q(O,M);if(U){var ne=U.next,ue=U.previous;delete D.index[U.index],U.removed=!0,ue&&(ue.next=ne),ne&&(ne.previous=ue),D.first===U&&(D.first=ne),D.last===U&&(D.last=ue),Qy?D.size--:O.size--}return!!U},forEach:function(O){for(var D=v(this),U=w5e(O,arguments.length>1?arguments[1]:void 0),ne;ne=ne?ne.next:D.first;)for(U(ne.value,ne.key,this);ne&&ne.removed;)ne=ne.previous},has:function(O){return!!q(this,O)}}),U9(a,i?{get:function(O){var D=q(this,O);return D&&D.value},set:function(O,D){return b(this,O===0?0:O,D)}}:{add:function(O){return b(this,O=O===0?0:O,O)}}),Qy&&b5e(a,"size",{configurable:!0,get:function(){return v(this).size}}),c},setStrong:function(e,t,i){var o=t+" Iterator",c=_O(t),a=_O(o);A5e(e,t,function(v,b){$9(this,{type:o,target:v,state:c(v),kind:b,last:null})},function(){for(var v=a(this),b=v.kind,q=v.last;q&&q.removed;)q=q.previous;return!v.target||!(v.last=q=q?q.next:v.state.first)?(v.target=null,Ww(void 0,!0)):Ww(b==="keys"?q.key:b==="values"?q.value:[q.key,q.value],!1)},i?"entries":"values",!i,!0),q5e(t)}}});var Z9=I(()=>{"use strict";f();var I5e=Jy(),P5e=xO();I5e("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},P5e)});var Zw=I(()=>{"use strict";f();Z9()});var an=I((Ojt,K9)=>{"use strict";f();var Kw=Ue(),e_=Map.prototype;K9.exports={Map,set:Kw(e_.set),get:Kw(e_.get),has:Kw(e_.has),remove:Kw(e_.delete),proto:e_}});var bO=I(()=>{"use strict";f();var C5e=X(),M5e=Ue(),R5e=Ot(),O5e=Nr(),k5e=li(),Hw=an(),H9=dr(),D5e=Ze(),X9=Hw.Map,L5e=Hw.has,F5e=Hw.get,z5e=Hw.set,N5e=M5e([].push),B5e=H9||D5e(function(){return X9.groupBy("ab",function(e){return e}).get("a").length!==1});C5e({target:"Map",stat:!0,forced:H9||B5e},{groupBy:function(t,i){O5e(t),R5e(i);var o=new X9,c=0;return k5e(t,function(a){var v=i(a,c++);L5e(o,v)?N5e(F5e(o,v),a):z5e(o,v,[a])}),o}})});var wO=I((zjt,Y9)=>{"use strict";f();var j5e=Math.log;Y9.exports=Math.log1p||function(t){var i=+t;return i>-1e-8&&i<1e-8?i-i*i/2:j5e(1+i)}});var Q9=I(()=>{"use strict";f();var U5e=X(),V5e=wO(),SO=Math.acosh,$5e=Math.log,J9=Math.sqrt,G5e=Math.LN2,W5e=!SO||Math.floor(SO(Number.MAX_VALUE))!==710||SO(1/0)!==1/0;U5e({target:"Math",stat:!0,forced:W5e},{acosh:function(t){var i=+t;return i<1?NaN:i>94906265.62425156?$5e(i)+G5e:V5e(i-1+J9(i-1)*J9(i+1))}})});var rX=I(()=>{"use strict";f();var Z5e=X(),eX=Math.asinh,K5e=Math.log,H5e=Math.sqrt;function tX(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-tX(-t):K5e(t+H5e(t*t+1))}var X5e=!(eX&&1/eX(0)>0);Z5e({target:"Math",stat:!0,forced:X5e},{asinh:tX})});var nX=I(()=>{"use strict";f();var Y5e=X(),iX=Math.atanh,J5e=Math.log,Q5e=!(iX&&1/iX(-0)<0);Y5e({target:"Math",stat:!0,forced:Q5e},{atanh:function(t){var i=+t;return i===0?i:J5e((1+i)/(1-i))/2}})});var aX=I(()=>{"use strict";f();var e4e=X(),t4e=Aw(),r4e=Math.abs,i4e=Math.pow;e4e({target:"Math",stat:!0},{cbrt:function(t){var i=+t;return t4e(i)*i4e(r4e(i),1/3)}})});var oX=I(()=>{"use strict";f();var n4e=X(),a4e=Math.floor,o4e=Math.log,s4e=Math.LOG2E;n4e({target:"Math",stat:!0},{clz32:function(t){var i=t>>>0;return i?31-a4e(o4e(i+.5)*s4e):32}})});var r_=I((tUt,sX)=>{"use strict";f();var t_=Math.expm1,l4e=Math.exp;sX.exports=!t_||t_(10)>22025.465794806718||t_(10)<22025.465794806718||t_(-2e-17)!==-2e-17?function(t){var i=+t;return i===0?i:i>-1e-6&&i<1e-6?i+i*i/2:l4e(i)-1}:t_});var uX=I(()=>{"use strict";f();var u4e=X(),c4e=r_(),lX=Math.cosh,h4e=Math.abs,TO=Math.E,d4e=!lX||lX(710)===1/0;u4e({target:"Math",stat:!0,forced:d4e},{cosh:function(t){var i=c4e(h4e(t)-1)+1;return(i+1/(i*TO*TO))*(TO/2)}})});var hX=I(()=>{"use strict";f();var f4e=X(),cX=r_();f4e({target:"Math",stat:!0,forced:cX!==Math.expm1},{expm1:cX})});var dX=I(()=>{"use strict";f();var p4e=X(),m4e=qw();p4e({target:"Math",stat:!0},{fround:m4e})});var EO=I(()=>{"use strict";f();var v4e=X(),g4e=BM(),y4e=.0009765625,_4e=65504,x4e=6103515625e-14;v4e({target:"Math",stat:!0},{f16round:function(t){return g4e(t,y4e,_4e,x4e)}})});var pX=I(()=>{"use strict";f();var b4e=X(),fX=Math.hypot,w4e=Math.abs,S4e=Math.sqrt,T4e=!!fX&&fX(1/0,NaN)!==1/0;b4e({target:"Math",stat:!0,arity:2,forced:T4e},{hypot:function(t,i){for(var o=0,c=0,a=arguments.length,v=0,b,q;c<a;)b=w4e(arguments[c++]),v<b?(q=v/b,o=o*q*q+1,v=b):b>0?(q=b/v,o+=q*q):o+=b;return v===1/0?1/0:v*S4e(o)}})});var vX=I(()=>{"use strict";f();var E4e=X(),A4e=Ze(),mX=Math.imul,q4e=A4e(function(){return mX(4294967295,5)!==-5||mX.length!==2});E4e({target:"Math",stat:!0,forced:q4e},{imul:function(t,i){var o=65535,c=+t,a=+i,v=o&c,b=o&a;return 0|v*b+((o&c>>>16)*b+v*(o&a>>>16)<<16>>>0)}})});var AO=I((bUt,gX)=>{"use strict";f();var I4e=Math.log,P4e=Math.LOG10E;gX.exports=Math.log10||function(t){return I4e(t)*P4e}});var yX=I(()=>{"use strict";f();var C4e=X(),M4e=AO();C4e({target:"Math",stat:!0},{log10:M4e})});var _X=I(()=>{"use strict";f();var R4e=X(),O4e=wO();R4e({target:"Math",stat:!0},{log1p:O4e})});var xX=I(()=>{"use strict";f();var k4e=X(),D4e=oR();k4e({target:"Math",stat:!0},{log2:D4e})});var bX=I(()=>{"use strict";f();var L4e=X(),F4e=Aw();L4e({target:"Math",stat:!0},{sign:F4e})});var TX=I(()=>{"use strict";f();var z4e=X(),N4e=Ze(),wX=r_(),B4e=Math.abs,SX=Math.exp,j4e=Math.E,U4e=N4e(function(){return Math.sinh(-2e-17)!==-2e-17});z4e({target:"Math",stat:!0,forced:U4e},{sinh:function(t){var i=+t;return B4e(i)<1?(wX(i)-wX(-i))/2:(SX(i-1)-SX(-i-1))*(j4e/2)}})});var qX=I(()=>{"use strict";f();var V4e=X(),EX=r_(),AX=Math.exp;V4e({target:"Math",stat:!0},{tanh:function(t){var i=+t,o=EX(i),c=EX(-i);return o===1/0?1:c===1/0?-1:(o-c)/(AX(i)+AX(-i))}})});var IX=I(()=>{"use strict";f();var $4e=xa();$4e(Math,"Math",!0)});var PX=I(()=>{"use strict";f();var G4e=X(),W4e=g2();G4e({target:"Math",stat:!0},{trunc:W4e})});var i_=I((ZUt,CX)=>{"use strict";f();var Z4e=Ue();CX.exports=Z4e(1 .valueOf)});var yd=I((HUt,MX)=>{"use strict";f();MX.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var _d=I((YUt,OX)=>{"use strict";f();var K4e=Ue(),H4e=Nr(),X4e=zt(),IO=yd(),RX=K4e("".replace),Y4e=RegExp("^["+IO+"]+"),J4e=RegExp("(^|[^"+IO+"])["+IO+"]+$"),qO=function(e){return function(t){var i=X4e(H4e(t));return e&1&&(i=RX(i,Y4e,"")),e&2&&(i=RX(i,J4e,"$1")),i}};OX.exports={start:qO(1),end:qO(2),trim:qO(3)}});var BX=I(()=>{"use strict";f();var Q4e=X(),PO=dr(),e6e=St(),LX=at(),CO=Q1(),FX=Ue(),t6e=Rp(),kX=Zt(),r6e=Pc(),i6e=Rn(),n6e=su(),zX=xy(),a6e=Ze(),o6e=Ec().f,s6e=mn().f,l6e=Dr().f,u6e=i_(),c6e=_d().trim,n_="Number",Kp=LX[n_],DX=CO[n_],MO=Kp.prototype,h6e=LX.TypeError,d6e=FX("".slice),Xw=FX("".charCodeAt),f6e=function(e){var t=zX(e,"number");return typeof t=="bigint"?t:p6e(t)},p6e=function(e){var t=zX(e,"number"),i,o,c,a,v,b,q,M;if(n6e(t))throw new h6e("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=c6e(t),i=Xw(t,0),i===43||i===45){if(o=Xw(t,2),o===88||o===120)return NaN}else if(i===48){switch(Xw(t,1)){case 66:case 98:c=2,a=49;break;case 79:case 111:c=8,a=55;break;default:return+t}for(v=d6e(t,2),b=v.length,q=0;q<b;q++)if(M=Xw(v,q),M<48||M>a)return NaN;return parseInt(v,c)}}return+t},RO=t6e(n_,!Kp(" 0o1")||!Kp("0b1")||Kp("+0x1")),m6e=function(e){return i6e(MO,e)&&a6e(function(){u6e(e)})},Yw=function(t){var i=arguments.length<1?0:Kp(f6e(t));return m6e(this)?r6e(Object(i),this,Yw):i};Yw.prototype=MO;RO&&!PO&&(MO.constructor=Yw);Q4e({global:!0,constructor:!0,wrap:!0,forced:RO},{Number:Yw});var NX=function(e,t){for(var i=e6e?o6e(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0,c;i.length>o;o++)kX(t,c=i[o])&&!kX(e,c)&&l6e(e,c,s6e(t,c))};PO&&DX&&NX(CO[n_],DX);(RO||PO)&&NX(CO[n_],Kp)});var jX=I(()=>{"use strict";f();var v6e=X();v6e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var OO=I((a5t,UX)=>{"use strict";f();var g6e=at(),y6e=g6e.isFinite;UX.exports=Number.isFinite||function(t){return typeof t=="number"&&y6e(t)}});var VX=I(()=>{"use strict";f();var _6e=X(),x6e=OO();_6e({target:"Number",stat:!0},{isFinite:x6e})});var Jw=I((c5t,$X)=>{"use strict";f();var b6e=It(),w6e=Math.floor;$X.exports=Number.isInteger||function(t){return!b6e(t)&&isFinite(t)&&w6e(t)===t}});var GX=I(()=>{"use strict";f();var S6e=X(),T6e=Jw();S6e({target:"Number",stat:!0},{isInteger:T6e})});var WX=I(()=>{"use strict";f();var E6e=X();E6e({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var ZX=I(()=>{"use strict";f();var A6e=X(),q6e=Jw(),I6e=Math.abs;A6e({target:"Number",stat:!0},{isSafeInteger:function(t){return q6e(t)&&I6e(t)<=9007199254740991}})});var KX=I(()=>{"use strict";f();var P6e=X();P6e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var HX=I(()=>{"use strict";f();var C6e=X();C6e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var kO=I((q5t,QX)=>{"use strict";f();var JX=at(),M6e=Ze(),R6e=Ue(),O6e=zt(),k6e=_d().trim,D6e=yd(),L6e=R6e("".charAt),Qw=JX.parseFloat,XX=JX.Symbol,YX=XX&&XX.iterator,F6e=1/Qw(D6e+"-0")!==-1/0||YX&&!M6e(function(){Qw(Object(YX))});QX.exports=F6e?function(t){var i=k6e(O6e(t)),o=Qw(i);return o===0&&L6e(i,0)==="-"?-0:o}:Qw});var tY=I(()=>{"use strict";f();var z6e=X(),eY=kO();z6e({target:"Number",stat:!0,forced:Number.parseFloat!==eY},{parseFloat:eY})});var DO=I((R5t,sY)=>{"use strict";f();var aY=at(),N6e=Ze(),B6e=Ue(),j6e=zt(),U6e=_d().trim,rY=yd(),a_=aY.parseInt,iY=aY.Symbol,nY=iY&&iY.iterator,oY=/^[+-]?0x/i,V6e=B6e(oY.exec),$6e=a_(rY+"08")!==8||a_(rY+"0x16")!==22||nY&&!N6e(function(){a_(Object(nY))});sY.exports=$6e?function(t,i){var o=U6e(j6e(t));return a_(o,i>>>0||(V6e(oY,o)?16:10))}:a_});var uY=I(()=>{"use strict";f();var G6e=X(),lY=DO();G6e({target:"Number",stat:!0,forced:Number.parseInt!==lY},{parseInt:lY})});var pY=I(()=>{"use strict";f();var W6e=X(),FO=Ue(),Z6e=Gr(),K6e=i_(),H6e=Hy(),X6e=AO(),LO=Ze(),Y6e=RangeError,cY=String,J6e=isFinite,Q6e=Math.abs,eVe=Math.floor,hY=Math.pow,tVe=Math.round,cl=FO(1 .toExponential),rVe=FO(H6e),dY=FO("".slice),fY=cl(-69e-12,4)==="-6.9000e-11"&&cl(1.255,2)==="1.25e+0"&&cl(12345,3)==="1.235e+4"&&cl(25,0)==="3e+1",iVe=function(){return LO(function(){cl(1,1/0)})&&LO(function(){cl(1,-1/0)})},nVe=function(){return!LO(function(){cl(1/0,1/0),cl(NaN,1/0)})},aVe=!fY||!iVe()||!nVe();W6e({target:"Number",proto:!0,forced:aVe},{toExponential:function(t){var i=K6e(this);if(t===void 0)return cl(i);var o=Z6e(t);if(!J6e(i))return String(i);if(o<0||o>20)throw new Y6e("Incorrect fraction digits");if(fY)return cl(i,o);var c="",a,v,b,q;if(i<0&&(c="-",i=-i),i===0)v=0,a=rVe("0",o+1);else{var M=X6e(i);v=eVe(M);var O=hY(10,v-o),D=tVe(i/O);2*i>=(2*D+1)*O&&(D+=1),D>=hY(10,o+1)&&(D/=10,v+=1),a=cY(D)}return o!==0&&(a=dY(a,0,1)+"."+dY(a,1)),v===0?(b="+",q="0"):(b=v>0?"+":"-",q=cY(Q6e(v))),a+="e"+b+q,c+a}})});var xY=I(()=>{"use strict";f();var oVe=X(),BO=Ue(),sVe=Gr(),lVe=i_(),uVe=Hy(),mY=Ze(),cVe=RangeError,yY=String,_Y=Math.floor,NO=BO(uVe),vY=BO("".slice),o_=BO(1 .toFixed),Xp=function(e,t,i){return t===0?i:t%2===1?Xp(e,t-1,i*e):Xp(e*e,t/2,i)},hVe=function(e){for(var t=0,i=e;i>=4096;)t+=12,i/=4096;for(;i>=2;)t+=1,i/=2;return t},Hp=function(e,t,i){for(var o=-1,c=i;++o<6;)c+=t*e[o],e[o]=c%1e7,c=_Y(c/1e7)},zO=function(e,t){for(var i=6,o=0;--i>=0;)o+=e[i],e[i]=_Y(o/t),o=o%t*1e7},gY=function(e){for(var t=6,i="";--t>=0;)if(i!==""||t===0||e[t]!==0){var o=yY(e[t]);i=i===""?o:i+NO("0",7-o.length)+o}return i},dVe=mY(function(){return o_(8e-5,3)!=="0.000"||o_(.9,0)!=="1"||o_(1.255,2)!=="1.25"||o_(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!mY(function(){o_({})});oVe({target:"Number",proto:!0,forced:dVe},{toFixed:function(t){var i=lVe(this),o=sVe(t),c=[0,0,0,0,0,0],a="",v="0",b,q,M,O;if(o<0||o>20)throw new cVe("Incorrect fraction digits");if(i!==i)return"NaN";if(i<=-1e21||i>=1e21)return yY(i);if(i<0&&(a="-",i=-i),i>1e-21)if(b=hVe(i*Xp(2,69,1))-69,q=b<0?i*Xp(2,-b,1):i/Xp(2,b,1),q*=4503599627370496,b=52-b,b>0){for(Hp(c,0,q),M=o;M>=7;)Hp(c,1e7,0),M-=7;for(Hp(c,Xp(10,M,1),0),M=b-1;M>=23;)zO(c,1<<23),M-=23;zO(c,1<<M),Hp(c,1,1),zO(c,2),v=gY(c)}else Hp(c,0,q),Hp(c,1<<-b,0),v=gY(c)+NO("0",o);return o>0?(O=v.length,v=a+(O<=o?"0."+NO("0",o-O)+v:vY(v,0,O-o)+"."+vY(v,O-o))):v=a+v,v}})});var SY=I(()=>{"use strict";f();var fVe=X(),pVe=Ue(),bY=Ze(),wY=i_(),eS=pVe(1 .toPrecision),mVe=bY(function(){return eS(1,void 0)!=="1"})||!bY(function(){eS({})});fVe({target:"Number",proto:!0,forced:mVe},{toPrecision:function(t){return t===void 0?eS(wY(this)):eS(wY(this),t)}})});var UO=I((W5t,AY)=>{"use strict";f();var TY=St(),vVe=Ue(),gVe=ot(),yVe=Ze(),jO=ld(),_Ve=Ay(),xVe=yy(),bVe=tr(),wVe=ou(),Yp=Object.assign,EY=Object.defineProperty,SVe=vVe([].concat);AY.exports=!Yp||yVe(function(){if(TY&&Yp({b:1},Yp(EY({},"a",{enumerable:!0,get:function(){EY(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},i=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[i]=7,o.split("").forEach(function(c){t[c]=c}),Yp({},e)[i]!==7||jO(Yp({},t)).join("")!==o})?function(t,i){for(var o=bVe(t),c=arguments.length,a=1,v=_Ve.f,b=xVe.f;c>a;)for(var q=wVe(arguments[a++]),M=v?SVe(jO(q),v(q)):jO(q),O=M.length,D=0,U;O>D;)U=M[D++],(!TY||gVe(b,q,U))&&(o[U]=q[U]);return o}:Yp});var IY=I(()=>{"use strict";f();var TVe=X(),qY=UO();TVe({target:"Object",stat:!0,arity:2,forced:Object.assign!==qY},{assign:qY})});var PY=I(()=>{"use strict";f();var EVe=X(),AVe=St(),qVe=Ti();EVe({target:"Object",stat:!0,sham:!AVe},{create:qVe})});var s_=I((e4t,MY)=>{"use strict";f();var IVe=dr(),PVe=at(),CVe=Ze(),CY=Ew();MY.exports=IVe||!CVe(function(){if(!(CY&&CY<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete PVe[e]}})});var RY=I(()=>{"use strict";f();var MVe=X(),RVe=St(),OVe=s_(),kVe=Ot(),DVe=tr(),LVe=Dr();RVe&&MVe({target:"Object",proto:!0,forced:OVe},{__defineGetter__:function(t,i){LVe.f(DVe(this),t,{get:kVe(i),enumerable:!0,configurable:!0})}})});var kY=I(()=>{"use strict";f();var FVe=X(),zVe=St(),OY=H1().f;FVe({target:"Object",stat:!0,forced:Object.defineProperties!==OY,sham:!zVe},{defineProperties:OY})});var LY=I(()=>{"use strict";f();var NVe=X(),BVe=St(),DY=Dr().f;NVe({target:"Object",stat:!0,forced:Object.defineProperty!==DY,sham:!BVe},{defineProperty:DY})});var FY=I(()=>{"use strict";f();var jVe=X(),UVe=St(),VVe=s_(),$Ve=Ot(),GVe=tr(),WVe=Dr();UVe&&jVe({target:"Object",proto:!0,forced:VVe},{__defineSetter__:function(t,i){WVe.f(GVe(this),t,{set:$Ve(i),enumerable:!0,configurable:!0})}})});var VO=I((p4t,UY)=>{"use strict";f();var NY=St(),ZVe=Ze(),BY=Ue(),KVe=Wi(),HVe=ld(),XVe=$i(),YVe=yy().f,jY=BY(YVe),JVe=BY([].push),QVe=NY&&ZVe(function(){var e=Object.create(null);return e[2]=2,!jY(e,2)}),zY=function(e){return function(t){for(var i=XVe(t),o=HVe(i),c=QVe&&KVe(i)===null,a=o.length,v=0,b=[],q;a>v;)q=o[v++],(!NY||(c?q in i:jY(i,q)))&&JVe(b,e?[q,i[q]]:i[q]);return b}};UY.exports={entries:zY(!0),values:zY(!1)}});var VY=I(()=>{"use strict";f();var e8e=X(),t8e=VO().entries;e8e({target:"Object",stat:!0},{entries:function(t){return t8e(t)}})});var $Y=I(()=>{"use strict";f();var r8e=X(),i8e=gu(),n8e=Ze(),a8e=It(),o8e=Uc().onFreeze,$O=Object.freeze,s8e=n8e(function(){$O(1)});r8e({target:"Object",stat:!0,forced:s8e,sham:!i8e},{freeze:function(t){return $O&&a8e(t)?$O(o8e(t)):t}})});var GY=I(()=>{"use strict";f();var l8e=X(),u8e=li(),c8e=Bo();l8e({target:"Object",stat:!0},{fromEntries:function(t){var i={};return u8e(t,function(o,c){c8e(i,o,c)},{AS_ENTRIES:!0}),i}})});var KY=I(()=>{"use strict";f();var h8e=X(),d8e=Ze(),f8e=$i(),WY=mn().f,ZY=St(),p8e=!ZY||d8e(function(){WY(1)});h8e({target:"Object",stat:!0,forced:p8e,sham:!ZY},{getOwnPropertyDescriptor:function(t,i){return WY(f8e(t),i)}})});var HY=I(()=>{"use strict";f();var m8e=X(),v8e=St(),g8e=G1(),y8e=$i(),_8e=mn(),x8e=Bo();m8e({target:"Object",stat:!0,sham:!v8e},{getOwnPropertyDescriptors:function(t){for(var i=y8e(t),o=_8e.f,c=g8e(i),a={},v=0,b,q;c.length>v;)q=o(i,b=c[v++]),q!==void 0&&x8e(a,b,q);return a}})});var XY=I(()=>{"use strict";f();var b8e=X(),w8e=Ze(),S8e=J1().f,T8e=w8e(function(){return!Object.getOwnPropertyNames(1)});b8e({target:"Object",stat:!0,forced:T8e},{getOwnPropertyNames:S8e})});var JY=I(()=>{"use strict";f();var E8e=X(),A8e=Ze(),q8e=tr(),YY=Wi(),I8e=hw(),P8e=A8e(function(){YY(1)});E8e({target:"Object",stat:!0,forced:P8e,sham:!I8e},{getPrototypeOf:function(t){return YY(q8e(t))}})});var GO=I(()=>{"use strict";f();var C8e=X(),M8e=Rt(),R8e=Ue(),O8e=Ot(),k8e=Nr(),D8e=nl(),L8e=li(),F8e=Ze(),QY=Object.groupBy,z8e=M8e("Object","create"),N8e=R8e([].push),B8e=!QY||F8e(function(){return QY("ab",function(e){return e}).a.length!==1});C8e({target:"Object",stat:!0,forced:B8e},{groupBy:function(t,i){k8e(t),O8e(i);var o=z8e(null),c=0;return L8e(t,function(a){var v=D8e(i(a,c++));v in o?N8e(o[v],a):o[v]=[a]}),o}})});var WO=I(()=>{"use strict";f();var j8e=X(),U8e=Zt();j8e({target:"Object",stat:!0},{hasOwn:U8e})});var tS=I((V4t,eJ)=>{"use strict";f();eJ.exports=Object.is||function(t,i){return t===i?t!==0||1/t===1/i:t!==t&&i!==i}});var tJ=I(()=>{"use strict";f();var V8e=X(),$8e=tS();V8e({target:"Object",stat:!0},{is:$8e})});var iJ=I(()=>{"use strict";f();var G8e=X(),rJ=Gw();G8e({target:"Object",stat:!0,forced:Object.isExtensible!==rJ},{isExtensible:rJ})});var aJ=I(()=>{"use strict";f();var W8e=X(),Z8e=Ze(),K8e=It(),H8e=Mn(),nJ=Vw(),ZO=Object.isFrozen,X8e=nJ||Z8e(function(){ZO(1)});W8e({target:"Object",stat:!0,forced:X8e},{isFrozen:function(t){return!K8e(t)||nJ&&H8e(t)==="ArrayBuffer"?!0:ZO?ZO(t):!1}})});var sJ=I(()=>{"use strict";f();var Y8e=X(),J8e=Ze(),Q8e=It(),e$e=Mn(),oJ=Vw(),KO=Object.isSealed,t$e=oJ||J8e(function(){KO(1)});Y8e({target:"Object",stat:!0,forced:t$e},{isSealed:function(t){return!Q8e(t)||oJ&&e$e(t)==="ArrayBuffer"?!0:KO?KO(t):!1}})});var uJ=I(()=>{"use strict";f();var r$e=X(),i$e=tr(),lJ=ld(),n$e=Ze(),a$e=n$e(function(){lJ(1)});r$e({target:"Object",stat:!0,forced:a$e},{keys:function(t){return lJ(i$e(t))}})});var cJ=I(()=>{"use strict";f();var o$e=X(),s$e=St(),l$e=s_(),u$e=tr(),c$e=nl(),h$e=Wi(),d$e=mn().f;s$e&&o$e({target:"Object",proto:!0,forced:l$e},{__lookupGetter__:function(t){var i=u$e(this),o=c$e(t),c;do if(c=d$e(i,o))return c.get;while(i=h$e(i))}})});var hJ=I(()=>{"use strict";f();var f$e=X(),p$e=St(),m$e=s_(),v$e=tr(),g$e=nl(),y$e=Wi(),_$e=mn().f;p$e&&f$e({target:"Object",proto:!0,forced:m$e},{__lookupSetter__:function(t){var i=v$e(this),o=g$e(t),c;do if(c=_$e(i,o))return c.set;while(i=y$e(i))}})});var dJ=I(()=>{"use strict";f();var x$e=X(),b$e=It(),w$e=Uc().onFreeze,S$e=gu(),T$e=Ze(),HO=Object.preventExtensions,E$e=T$e(function(){HO(1)});x$e({target:"Object",stat:!0,forced:E$e,sham:!S$e},{preventExtensions:function(t){return HO&&b$e(t)?HO(w$e(t)):t}})});var gJ=I(()=>{"use strict";f();var A$e=St(),q$e=Wr(),I$e=It(),P$e=$2(),C$e=tr(),M$e=Nr(),fJ=Object.getPrototypeOf,pJ=Object.setPrototypeOf,mJ=Object.prototype,vJ="__proto__";if(A$e&&fJ&&pJ&&!(vJ in mJ))try{q$e(mJ,vJ,{configurable:!0,get:function(){return fJ(C$e(this))},set:function(t){var i=M$e(this);P$e(t)&&I$e(i)&&pJ(i,t)}})}catch(e){}});var yJ=I(()=>{"use strict";f();var R$e=X(),O$e=It(),k$e=Uc().onFreeze,D$e=gu(),L$e=Ze(),XO=Object.seal,F$e=L$e(function(){XO(1)});R$e({target:"Object",stat:!0,forced:F$e,sham:!D$e},{seal:function(t){return XO&&O$e(t)?XO(k$e(t)):t}})});var _J=I(()=>{"use strict";f();var z$e=X(),N$e=No();z$e({target:"Object",stat:!0},{setPrototypeOf:N$e})});var bJ=I((T6t,xJ)=>{"use strict";f();var B$e=Z1(),j$e=_a();xJ.exports=B$e?{}.toString:function(){return"[object "+j$e(this)+"]"}});var wJ=I(()=>{"use strict";f();var U$e=Z1(),V$e=wr(),$$e=bJ();U$e||V$e(Object.prototype,"toString",$$e,{unsafe:!0})});var SJ=I(()=>{"use strict";f();var G$e=X(),W$e=VO().values;G$e({target:"Object",stat:!0},{values:function(t){return W$e(t)}})});var EJ=I(()=>{"use strict";f();var Z$e=X(),TJ=kO();Z$e({global:!0,forced:parseFloat!==TJ},{parseFloat:TJ})});var qJ=I(()=>{"use strict";f();var K$e=X(),AJ=DO();K$e({global:!0,forced:parseInt!==AJ},{parseInt:AJ})});var l_=I((z6t,IJ)=>{"use strict";f();var H$e=bs(),X$e=Sc(),Y$e=TypeError;IJ.exports=function(e){if(H$e(e))return e;throw new Y$e(X$e(e)+" is not a constructor")}});var u_=I((B6t,CJ)=>{"use strict";f();var PJ=lt(),J$e=l_(),Q$e=Fa(),eGe=Ct(),tGe=eGe("species");CJ.exports=function(e,t){var i=PJ(e).constructor,o;return i===void 0||Q$e(o=PJ(i)[tGe])?t:J$e(o)}});var go=I((U6t,MJ)=>{"use strict";f();var rGe=TypeError;MJ.exports=function(e,t){if(e<t)throw new rGe("Not enough arguments");return e}});var YO=I(($6t,RJ)=>{"use strict";f();var iGe=ms();RJ.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(iGe)});var d_=I((W6t,jJ)=>{"use strict";f();var yo=at(),nGe=On(),aGe=Cr(),OJ=Wt(),oGe=Zt(),BJ=Ze(),kJ=x2(),sGe=Na(),DJ=by(),lGe=go(),uGe=YO(),cGe=md(),ik=yo.setImmediate,nk=yo.clearImmediate,hGe=yo.process,JO=yo.Dispatch,dGe=yo.Function,LJ=yo.MessageChannel,fGe=yo.String,QO=0,c_={},FJ="onreadystatechange",h_,xd,ek,tk;BJ(function(){h_=yo.location});var ak=function(e){if(oGe(c_,e)){var t=c_[e];delete c_[e],t()}},rk=function(e){return function(){ak(e)}},zJ=function(e){ak(e.data)},NJ=function(e){yo.postMessage(fGe(e),h_.protocol+"//"+h_.host)};(!ik||!nk)&&(ik=function(t){lGe(arguments.length,1);var i=OJ(t)?t:dGe(t),o=sGe(arguments,1);return c_[++QO]=function(){nGe(i,void 0,o)},xd(QO),QO},nk=function(t){delete c_[t]},cGe?xd=function(e){hGe.nextTick(rk(e))}:JO&&JO.now?xd=function(e){JO.now(rk(e))}:LJ&&!uGe?(ek=new LJ,tk=ek.port2,ek.port1.onmessage=zJ,xd=aGe(tk.postMessage,tk)):yo.addEventListener&&OJ(yo.postMessage)&&!yo.importScripts&&h_&&h_.protocol!=="file:"&&!BJ(NJ)?(xd=NJ,yo.addEventListener("message",zJ,!1)):FJ in DJ("script")?xd=function(e){kJ.appendChild(DJ("script"))[FJ]=function(){kJ.removeChild(this),ak(e)}}:xd=function(e){setTimeout(rk(e),0)});jJ.exports={set:ik,clear:nk}});var ok=I((K6t,VJ)=>{"use strict";f();var UJ=at(),pGe=St(),mGe=Object.getOwnPropertyDescriptor;VJ.exports=function(e){if(!pGe)return UJ[e];var t=mGe(UJ,e);return t&&t.value}});var sk=I((X6t,GJ)=>{"use strict";f();var $J=function(){this.head=null,this.tail=null};$J.prototype={add:function(e){var t={item:e,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};GJ.exports=$J});var ZJ=I((J6t,WJ)=>{"use strict";f();var vGe=ms();WJ.exports=/ipad|iphone|ipod/i.test(vGe)&&typeof Pebble!="undefined"});var HJ=I((eVt,KJ)=>{"use strict";f();var gGe=ms();KJ.exports=/web0s(?!.*chrome)/i.test(gGe)});var fk=I((rVt,tQ)=>{"use strict";f();var Qp=at(),yGe=ok(),XJ=Cr(),lk=d_().set,_Ge=sk(),xGe=YO(),bGe=ZJ(),wGe=HJ(),uk=md(),YJ=Qp.MutationObserver||Qp.WebKitMutationObserver,JJ=Qp.document,QJ=Qp.process,rS=Qp.Promise,dk=yGe("queueMicrotask"),Jp,ck,hk,iS,eQ;dk||(f_=new _Ge,p_=function(){var e,t;for(uk&&(e=QJ.domain)&&e.exit();t=f_.get();)try{t()}catch(i){throw f_.head&&Jp(),i}e&&e.enter()},!xGe&&!uk&&!wGe&&YJ&&JJ?(ck=!0,hk=JJ.createTextNode(""),new YJ(p_).observe(hk,{characterData:!0}),Jp=function(){hk.data=ck=!ck}):!bGe&&rS&&rS.resolve?(iS=rS.resolve(void 0),iS.constructor=rS,eQ=XJ(iS.then,iS),Jp=function(){eQ(p_)}):uk?Jp=function(){QJ.nextTick(p_)}:(lk=XJ(lk,Qp),Jp=function(){lk(p_)}),dk=function(e){f_.head||Jp(),f_.add(e)});var f_,p_;tQ.exports=dk});var pk=I((nVt,rQ)=>{"use strict";f();rQ.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(i){}}});var Vc=I((oVt,iQ)=>{"use strict";f();iQ.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var bd=I((lVt,nQ)=>{"use strict";f();var SGe=at();nQ.exports=SGe.Promise});var em=I((cVt,lQ)=>{"use strict";f();var TGe=at(),m_=bd(),EGe=Wt(),AGe=Rp(),qGe=wy(),IGe=Ct(),aQ=$y(),PGe=dr(),mk=gs(),oQ=m_&&m_.prototype,CGe=IGe("species"),vk=!1,sQ=EGe(TGe.PromiseRejectionEvent),MGe=AGe("Promise",function(){var e=qGe(m_),t=e!==String(m_);if(!t&&mk===66||PGe&&!(oQ.catch&&oQ.finally))return!0;if(!mk||mk<51||!/native code/.test(e)){var i=new m_(function(a){a(1)}),o=function(a){a(function(){},function(){})},c=i.constructor={};if(c[CGe]=o,vk=i.then(function(){})instanceof o,!vk)return!0}return!t&&(aQ==="BROWSER"||aQ==="DENO")&&!sQ});lQ.exports={CONSTRUCTOR:MGe,REJECTION_EVENT:sQ,SUBCLASSING:vk}});var hl=I((dVt,cQ)=>{"use strict";f();var uQ=Ot(),RGe=TypeError,OGe=function(e){var t,i;this.promise=new e(function(o,c){if(t!==void 0||i!==void 0)throw new RGe("Bad Promise constructor");t=o,i=c}),this.resolve=uQ(t),this.reject=uQ(i)};cQ.exports.f=function(e){return new OGe(e)}});var PQ=I(()=>{"use strict";f();var kGe=X(),DGe=dr(),sS=md(),$c=at(),nm=ot(),hQ=wr(),dQ=No(),LGe=xa(),FGe=Dc(),zGe=Ot(),oS=Wt(),NGe=It(),BGe=ea(),jGe=u_(),gQ=d_().set,bk=fk(),UGe=pk(),VGe=Vc(),$Ge=sk(),yQ=gr(),lS=bd(),wk=em(),_Q=hl(),uS="Promise",xQ=wk.CONSTRUCTOR,GGe=wk.REJECTION_EVENT,WGe=wk.SUBCLASSING,gk=yQ.getterFor(uS),ZGe=yQ.set,tm=lS&&lS.prototype,wd=lS,nS=tm,bQ=$c.TypeError,yk=$c.document,Sk=$c.process,_k=_Q.f,KGe=_k,HGe=!!(yk&&yk.createEvent&&$c.dispatchEvent),wQ="unhandledrejection",XGe="rejectionhandled",fQ=0,SQ=1,YGe=2,Tk=1,TQ=2,aS,pQ,JGe,mQ,EQ=function(e){var t;return NGe(e)&&oS(t=e.then)?t:!1},AQ=function(e,t){var i=t.value,o=t.state===SQ,c=o?e.ok:e.fail,a=e.resolve,v=e.reject,b=e.domain,q,M,O;try{c?(o||(t.rejection===TQ&&eWe(t),t.rejection=Tk),c===!0?q=i:(b&&b.enter(),q=c(i),b&&(b.exit(),O=!0)),q===e.promise?v(new bQ("Promise-chain cycle")):(M=EQ(q))?nm(M,q,a,v):a(q)):v(i)}catch(D){b&&!O&&b.exit(),v(D)}},qQ=function(e,t){e.notified||(e.notified=!0,bk(function(){for(var i=e.reactions,o;o=i.get();)AQ(o,e);e.notified=!1,t&&!e.rejection&&QGe(e)}))},IQ=function(e,t,i){var o,c;HGe?(o=yk.createEvent("Event"),o.promise=t,o.reason=i,o.initEvent(e,!1,!0),$c.dispatchEvent(o)):o={promise:t,reason:i},!GGe&&(c=$c["on"+e])?c(o):e===wQ&&UGe("Unhandled promise rejection",i)},QGe=function(e){nm(gQ,$c,function(){var t=e.facade,i=e.value,o=vQ(e),c;if(o&&(c=VGe(function(){sS?Sk.emit("unhandledRejection",i,t):IQ(wQ,t,i)}),e.rejection=sS||vQ(e)?TQ:Tk,c.error))throw c.value})},vQ=function(e){return e.rejection!==Tk&&!e.parent},eWe=function(e){nm(gQ,$c,function(){var t=e.facade;sS?Sk.emit("rejectionHandled",t):IQ(XGe,t,e.value)})},rm=function(e,t,i){return function(o){e(t,o,i)}},im=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=YGe,qQ(e,!0))},xk=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw new bQ("Promise can't be resolved itself");var o=EQ(t);o?bk(function(){var c={done:!1};try{nm(o,t,rm(xk,c,e),rm(im,c,e))}catch(a){im(c,a,e)}}):(e.value=t,e.state=SQ,qQ(e,!1))}catch(c){im({done:!1},c,e)}}};if(xQ&&(wd=function(t){BGe(this,nS),zGe(t),nm(aS,this);var i=gk(this);try{t(rm(xk,i),rm(im,i))}catch(o){im(i,o)}},nS=wd.prototype,aS=function(t){ZGe(this,{type:uS,done:!1,notified:!1,parent:!1,reactions:new $Ge,rejection:!1,state:fQ,value:null})},aS.prototype=hQ(nS,"then",function(t,i){var o=gk(this),c=_k(jGe(this,wd));return o.parent=!0,c.ok=oS(t)?t:!0,c.fail=oS(i)&&i,c.domain=sS?Sk.domain:void 0,o.state===fQ?o.reactions.add(c):bk(function(){AQ(c,o)}),c.promise}),pQ=function(){var e=new aS,t=gk(e);this.promise=e,this.resolve=rm(xk,t),this.reject=rm(im,t)},_Q.f=_k=function(e){return e===wd||e===JGe?new pQ(e):KGe(e)},!DGe&&oS(lS)&&tm!==Object.prototype)){mQ=tm.then,WGe||hQ(tm,"then",function(t,i){var o=this;return new wd(function(c,a){nm(mQ,o,c,a)}).then(t,i)},{unsafe:!0});try{delete tm.constructor}catch(e){}dQ&&dQ(tm,nS)}kGe({global:!0,constructor:!0,wrap:!0,forced:xQ},{Promise:wd});LGe(wd,uS,!1,!0);FGe(uS)});var v_=I((gVt,CQ)=>{"use strict";f();var tWe=bd(),rWe=zy(),iWe=em().CONSTRUCTOR;CQ.exports=iWe||!rWe(function(e){tWe.all(e).then(void 0,function(){})})});var MQ=I(()=>{"use strict";f();var nWe=X(),aWe=ot(),oWe=Ot(),sWe=hl(),lWe=Vc(),uWe=li(),cWe=v_();nWe({target:"Promise",stat:!0,forced:cWe},{all:function(t){var i=this,o=sWe.f(i),c=o.resolve,a=o.reject,v=lWe(function(){var b=oWe(i.resolve),q=[],M=0,O=1;uWe(t,function(D){var U=M++,ne=!1;O++,aWe(b,i,D).then(function(ue){ne||(ne=!0,q[U]=ue,--O||c(q))},a)}),--O||c(q)});return v.error&&a(v.value),o.promise}})});var OQ=I(()=>{"use strict";f();var hWe=X(),dWe=dr(),fWe=em().CONSTRUCTOR,Ak=bd(),pWe=Rt(),mWe=Wt(),vWe=wr(),RQ=Ak&&Ak.prototype;hWe({target:"Promise",proto:!0,forced:fWe,real:!0},{catch:function(e){return this.then(void 0,e)}});!dWe&&mWe(Ak)&&(Ek=pWe("Promise").prototype.catch,RQ.catch!==Ek&&vWe(RQ,"catch",Ek,{unsafe:!0}));var Ek});var kQ=I(()=>{"use strict";f();var gWe=X(),yWe=ot(),_We=Ot(),xWe=hl(),bWe=Vc(),wWe=li(),SWe=v_();gWe({target:"Promise",stat:!0,forced:SWe},{race:function(t){var i=this,o=xWe.f(i),c=o.reject,a=bWe(function(){var v=_We(i.resolve);wWe(t,function(b){yWe(v,i,b).then(o.resolve,c)})});return a.error&&c(a.value),o.promise}})});var DQ=I(()=>{"use strict";f();var TWe=X(),EWe=hl(),AWe=em().CONSTRUCTOR;TWe({target:"Promise",stat:!0,forced:AWe},{reject:function(t){var i=EWe.f(this),o=i.reject;return o(t),i.promise}})});var qk=I((MVt,LQ)=>{"use strict";f();var qWe=lt(),IWe=It(),PWe=hl();LQ.exports=function(e,t){if(qWe(e),IWe(t)&&t.constructor===e)return t;var i=PWe.f(e),o=i.resolve;return o(t),i.promise}});var NQ=I(()=>{"use strict";f();var CWe=X(),MWe=Rt(),FQ=dr(),RWe=bd(),zQ=em().CONSTRUCTOR,OWe=qk(),kWe=MWe("Promise"),DWe=FQ&&!zQ;CWe({target:"Promise",stat:!0,forced:FQ||zQ},{resolve:function(t){return OWe(DWe&&this===kWe?RWe:this,t)}})});var BQ=I(()=>{"use strict";f();PQ();MQ();OQ();kQ();DQ();NQ()});var Ik=I(()=>{"use strict";f();var LWe=X(),FWe=ot(),zWe=Ot(),NWe=hl(),BWe=Vc(),jWe=li(),UWe=v_();LWe({target:"Promise",stat:!0,forced:UWe},{allSettled:function(t){var i=this,o=NWe.f(i),c=o.resolve,a=o.reject,v=BWe(function(){var b=zWe(i.resolve),q=[],M=0,O=1;jWe(t,function(D){var U=M++,ne=!1;O++,FWe(b,i,D).then(function(ue){ne||(ne=!0,q[U]={status:"fulfilled",value:ue},--O||c(q))},function(ue){ne||(ne=!0,q[U]={status:"rejected",reason:ue},--O||c(q))})}),--O||c(q)});return v.error&&a(v.value),o.promise}})});var Pk=I(()=>{"use strict";f();var VWe=X(),$We=ot(),GWe=Ot(),WWe=Rt(),ZWe=hl(),KWe=Vc(),HWe=li(),XWe=v_(),jQ="No one promise resolved";VWe({target:"Promise",stat:!0,forced:XWe},{any:function(t){var i=this,o=WWe("AggregateError"),c=ZWe.f(i),a=c.resolve,v=c.reject,b=KWe(function(){var q=GWe(i.resolve),M=[],O=0,D=1,U=!1;HWe(t,function(ne){var ue=O++,fe=!1;D++,$We(q,i,ne).then(function(H){fe||U||(U=!0,a(H))},function(H){fe||U||(fe=!0,M[ue]=H,--D||v(new o(M,jQ)))})}),--D||v(new o(M,jQ))});return b.error&&v(b.value),c.promise}})});var GQ=I(()=>{"use strict";f();var YWe=X(),JWe=dr(),cS=bd(),QWe=Ze(),VQ=Rt(),$Q=Wt(),eZe=u_(),UQ=qk(),tZe=wr(),Mk=cS&&cS.prototype,rZe=!!cS&&QWe(function(){Mk.finally.call({then:function(){}},function(){})});YWe({target:"Promise",proto:!0,real:!0,forced:rZe},{finally:function(e){var t=eZe(this,VQ("Promise")),i=$Q(e);return this.then(i?function(o){return UQ(t,e()).then(function(){return o})}:e,i?function(o){return UQ(t,e()).then(function(){throw o})}:e)}});!JWe&&$Q(cS)&&(Ck=VQ("Promise").prototype.finally,Mk.finally!==Ck&&tZe(Mk,"finally",Ck,{unsafe:!0}));var Ck});var Ok=I(()=>{"use strict";f();var iZe=X(),nZe=at(),aZe=On(),oZe=Na(),sZe=hl(),lZe=Ot(),ZQ=Vc(),Rk=nZe.Promise,WQ=!1,uZe=!Rk||!Rk.try||ZQ(function(){Rk.try(function(e){WQ=e===8},8)}).error||!WQ;iZe({target:"Promise",stat:!0,forced:uZe},{try:function(e){var t=arguments.length>1?oZe(arguments,1):[],i=sZe.f(this),o=ZQ(function(){return aZe(lZe(e),void 0,t)});return(o.error?i.reject:i.resolve)(o.value),i.promise}})});var kk=I(()=>{"use strict";f();var cZe=X(),hZe=hl();cZe({target:"Promise",stat:!0},{withResolvers:function(){var t=hZe.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var KQ=I(()=>{"use strict";f();var dZe=X(),fZe=On(),pZe=Ot(),mZe=lt(),vZe=Ze(),gZe=!vZe(function(){Reflect.apply(function(){})});dZe({target:"Reflect",stat:!0,forced:gZe},{apply:function(t,i,o){return fZe(pZe(t),i,mZe(o))}})});var tee=I(()=>{"use strict";f();var yZe=X(),_Ze=Rt(),Dk=On(),xZe=MR(),HQ=l_(),bZe=lt(),XQ=It(),wZe=Ti(),JQ=Ze(),Lk=_Ze("Reflect","construct"),SZe=Object.prototype,TZe=[].push,QQ=JQ(function(){function e(){}return!(Lk(function(){},[],e)instanceof e)}),eee=!JQ(function(){Lk(function(){})}),YQ=QQ||eee;yZe({target:"Reflect",stat:!0,forced:YQ,sham:YQ},{construct:function(t,i){HQ(t),bZe(i);var o=arguments.length<3?t:HQ(arguments[2]);if(eee&&!QQ)return Lk(t,i,o);if(t===o){switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3])}var c=[null];return Dk(TZe,c,i),new(Dk(xZe,t,c))}var a=o.prototype,v=wZe(XQ(a)?a:SZe),b=Dk(t,v,i);return XQ(b)?b:v}})});var nee=I(()=>{"use strict";f();var EZe=X(),AZe=St(),ree=lt(),qZe=nl(),iee=Dr(),IZe=Ze(),PZe=IZe(function(){Reflect.defineProperty(iee.f({},1,{value:1}),1,{value:2})});EZe({target:"Reflect",stat:!0,forced:PZe,sham:!AZe},{defineProperty:function(t,i,o){ree(t);var c=qZe(i);ree(o);try{return iee.f(t,c,o),!0}catch(a){return!1}}})});var aee=I(()=>{"use strict";f();var CZe=X(),MZe=lt(),RZe=mn().f;CZe({target:"Reflect",stat:!0},{deleteProperty:function(t,i){var o=RZe(MZe(t),i);return o&&!o.configurable?!1:delete t[i]}})});var Fk=I((d8t,see)=>{"use strict";f();var oee=Zt();see.exports=function(e){return e!==void 0&&(oee(e,"value")||oee(e,"writable"))}});var uee=I(()=>{"use strict";f();var OZe=X(),kZe=ot(),DZe=It(),LZe=lt(),FZe=Fk(),zZe=mn(),NZe=Wi();function lee(e,t){var i=arguments.length<3?e:arguments[2],o,c;if(LZe(e)===i)return e[t];if(o=zZe.f(e,t),o)return FZe(o)?o.value:o.get===void 0?void 0:kZe(o.get,i);if(DZe(c=NZe(e)))return lee(c,t,i)}OZe({target:"Reflect",stat:!0},{get:lee})});var cee=I(()=>{"use strict";f();var BZe=X(),jZe=St(),UZe=lt(),VZe=mn();BZe({target:"Reflect",stat:!0,sham:!jZe},{getOwnPropertyDescriptor:function(t,i){return VZe.f(UZe(t),i)}})});var hee=I(()=>{"use strict";f();var $Ze=X(),GZe=lt(),WZe=Wi(),ZZe=hw();$Ze({target:"Reflect",stat:!0,sham:!ZZe},{getPrototypeOf:function(t){return WZe(GZe(t))}})});var dee=I(()=>{"use strict";f();var KZe=X();KZe({target:"Reflect",stat:!0},{has:function(t,i){return i in t}})});var fee=I(()=>{"use strict";f();var HZe=X(),XZe=lt(),YZe=Gw();HZe({target:"Reflect",stat:!0},{isExtensible:function(t){return XZe(t),YZe(t)}})});var pee=I(()=>{"use strict";f();var JZe=X(),QZe=G1();JZe({target:"Reflect",stat:!0},{ownKeys:QZe})});var mee=I(()=>{"use strict";f();var e7e=X(),t7e=Rt(),r7e=lt(),i7e=gu();e7e({target:"Reflect",stat:!0,sham:!i7e},{preventExtensions:function(t){r7e(t);try{var i=t7e("Object","preventExtensions");return i&&i(t),!0}catch(o){return!1}}})});var xee=I(()=>{"use strict";f();var n7e=X(),a7e=ot(),o7e=lt(),vee=It(),s7e=Fk(),l7e=Ze(),zk=Dr(),gee=mn(),u7e=Wi(),yee=La();function _ee(e,t,i){var o=arguments.length<4?e:arguments[3],c=gee.f(o7e(e),t),a,v,b;if(!c){if(vee(v=u7e(e)))return _ee(v,t,i,o);c=yee(0)}if(s7e(c)){if(c.writable===!1||!vee(o))return!1;if(a=gee.f(o,t)){if(a.get||a.set||a.writable===!1)return!1;a.value=i,zk.f(o,t,a)}else zk.f(o,t,yee(0,i))}else{if(b=c.set,b===void 0)return!1;a7e(b,o,i)}return!0}var c7e=l7e(function(){var e=function(){},t=zk.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});n7e({target:"Reflect",stat:!0,forced:c7e},{set:_ee})});var wee=I(()=>{"use strict";f();var h7e=X(),d7e=lt(),f7e=G2(),bee=No();bee&&h7e({target:"Reflect",stat:!0},{setPrototypeOf:function(t,i){d7e(t),f7e(i);try{return bee(t,i),!0}catch(o){return!1}}})});var See=I(()=>{"use strict";f();var p7e=X(),m7e=at(),v7e=xa();p7e({global:!0},{Reflect:{}});v7e(m7e.Reflect,"Reflect",!0)});var g_=I(($8t,Tee)=>{"use strict";f();var g7e=It(),y7e=Mn(),_7e=Ct(),x7e=_7e("match");Tee.exports=function(e){var t;return g7e(e)&&((t=e[x7e])!==void 0?!!t:y7e(e)==="RegExp")}});var hS=I((W8t,Eee)=>{"use strict";f();var b7e=lt();Eee.exports=function(){var e=b7e(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var am=I((K8t,qee)=>{"use strict";f();var w7e=ot(),S7e=Zt(),T7e=Rn(),E7e=hS(),Aee=RegExp.prototype;qee.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in Aee)&&!S7e(e,"flags")&&T7e(Aee,e)?w7e(E7e,e):t}});var y_=I((X8t,Iee)=>{"use strict";f();var Nk=Ze(),A7e=at(),Bk=A7e.RegExp,jk=Nk(function(){var e=Bk("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),q7e=jk||Nk(function(){return!Bk("a","y").sticky}),I7e=jk||Nk(function(){var e=Bk("^r","gy");return e.lastIndex=2,e.exec("str")!==null});Iee.exports={BROKEN_CARET:I7e,MISSED_STICKY:q7e,UNSUPPORTED_Y:jk}});var dS=I((J8t,Pee)=>{"use strict";f();var P7e=Ze(),C7e=at(),M7e=C7e.RegExp;Pee.exports=P7e(function(){var e=M7e(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var Uk=I((e$t,Cee)=>{"use strict";f();var R7e=Ze(),O7e=at(),k7e=O7e.RegExp;Cee.exports=R7e(function(){var e=k7e("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var Bee=I(()=>{"use strict";f();var D7e=St(),Wk=at(),__=Ue(),L7e=Rp(),F7e=Pc(),z7e=Gi(),N7e=Ti(),B7e=Ec().f,Mee=Rn(),j7e=g_(),Ree=zt(),U7e=am(),Lee=y_(),V7e=W2(),$7e=wr(),G7e=Ze(),W7e=Zt(),Z7e=gr().enforce,K7e=Dc(),H7e=Ct(),Fee=dS(),zee=Uk(),X7e=H7e("match"),Wc=Wk.RegExp,om=Wc.prototype,Y7e=Wk.SyntaxError,J7e=__(om.exec),fS=__("".charAt),Oee=__("".replace),kee=__("".indexOf),Dee=__("".slice),Q7e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Sd=/a/g,Vk=/a/g,eKe=new Wc(Sd)!==Sd,Nee=Lee.MISSED_STICKY,tKe=Lee.UNSUPPORTED_Y,rKe=D7e&&(!eKe||Nee||Fee||zee||G7e(function(){return Vk[X7e]=!1,Wc(Sd)!==Sd||Wc(Vk)===Vk||String(Wc(Sd,"i"))!=="/a/i"})),iKe=function(e){for(var t=e.length,i=0,o="",c=!1,a;i<=t;i++){if(a=fS(e,i),a==="\\"){o+=a+fS(e,++i);continue}!c&&a==="."?o+="[\\s\\S]":(a==="["?c=!0:a==="]"&&(c=!1),o+=a)}return o},nKe=function(e){for(var t=e.length,i=0,o="",c=[],a=N7e(null),v=!1,b=!1,q=0,M="",O;i<=t;i++){if(O=fS(e,i),O==="\\")O+=fS(e,++i);else if(O==="]")v=!1;else if(!v)switch(!0){case O==="[":v=!0;break;case O==="(":if(o+=O,Dee(e,i+1,i+3)==="?:")continue;J7e(Q7e,Dee(e,i+1))&&(i+=2,b=!0),q++;continue;case O===">"&&b:if(M===""||W7e(a,M))throw new Y7e("Invalid capture group name");a[M]=!0,c[c.length]=[M,q],b=!1,M="";continue}b?M+=O:o+=O}return[o,c]};if(L7e("RegExp",rKe)){for(Gc=function(t,i){var o=Mee(om,this),c=j7e(t),a=i===void 0,v=[],b=t,q,M,O,D,U,ne;if(!o&&c&&a&&t.constructor===Gc)return t;if((c||Mee(om,t))&&(t=t.source,a&&(i=U7e(b))),t=t===void 0?"":Ree(t),i=i===void 0?"":Ree(i),b=t,Fee&&"dotAll"in Sd&&(M=!!i&&kee(i,"s")>-1,M&&(i=Oee(i,/s/g,""))),q=i,Nee&&"sticky"in Sd&&(O=!!i&&kee(i,"y")>-1,O&&tKe&&(i=Oee(i,/y/g,""))),zee&&(D=nKe(t),t=D[0],v=D[1]),U=F7e(Wc(t,i),o?this:om,Gc),(M||O||v.length)&&(ne=Z7e(U),M&&(ne.dotAll=!0,ne.raw=Gc(iKe(t),q)),O&&(ne.sticky=!0),v.length&&(ne.groups=v)),t!==b)try{z7e(U,"source",b===""?"(?:)":b)}catch(ue){}return U},$k=B7e(Wc),Gk=0;$k.length>Gk;)V7e(Gc,Wc,$k[Gk++]);om.constructor=Gc,Gc.prototype=om,$7e(Wk,"RegExp",Gc,{constructor:!0})}var Gc,$k,Gk;K7e("RegExp")});var x_=I((a$t,jee)=>{"use strict";f();var aKe=TypeError;jee.exports=function(e){if(typeof e=="string")return e;throw new aKe("Argument is not a string")}});var Xk=I(()=>{"use strict";f();var oKe=X(),b_=Ue(),sKe=x_(),lKe=Zt(),Uee=Xy().start,uKe=yd(),cKe=Array,Vee=RegExp.escape,$ee=b_("".charAt),Hk=b_("".charCodeAt),hKe=b_(1.1.toString),dKe=b_([].join),Wee=/^[0-9a-z]/i,fKe=/^[$()*+./?[\\\]^{|}]/,pKe=RegExp("^[!\"#%&',\\-:;<=>@`~"+uKe+"]"),Zk=b_(Wee.exec),Gee={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},Kk=function(e){var t=hKe(Hk(e,0),16);return t.length<3?"\\x"+Uee(t,2,"0"):"\\u"+Uee(t,4,"0")},mKe=!Vee||Vee("ab")!=="\\x61b";oKe({target:"RegExp",stat:!0,forced:mKe},{escape:function(t){sKe(t);for(var i=t.length,o=cKe(i),c=0;c<i;c++){var a=$ee(t,c);if(c===0&&Zk(Wee,a))o[c]=Kk(a);else if(lKe(Gee,a))o[c]="\\"+Gee[a];else if(Zk(fKe,a))o[c]="\\"+a;else if(Zk(pKe,a))o[c]=Kk(a);else{var v=Hk(a,0);(v&63488)!==55296?o[c]=a:v>=56320||c+1>=i||(Hk(t,c+1)&64512)!==56320?o[c]=Kk(a):(o[c]=a,o[++c]=$ee(t,c))}}return dKe(o,"")}})});var Kee=I(()=>{"use strict";f();var vKe=St(),gKe=dS(),yKe=Mn(),_Ke=Wr(),xKe=gr().get,Zee=RegExp.prototype,bKe=TypeError;vKe&&gKe&&_Ke(Zee,"dotAll",{configurable:!0,get:function(){if(this!==Zee){if(yKe(this)==="RegExp")return!!xKe(this).dotAll;throw new bKe("Incompatible receiver, RegExp required")}}})});var vS=I((f$t,Xee)=>{"use strict";f();var sm=ot(),mS=Ue(),wKe=zt(),SKe=hS(),TKe=y_(),EKe=lu(),AKe=Ti(),qKe=gr().get,IKe=dS(),PKe=Uk(),CKe=EKe("native-string-replace",String.prototype.replace),pS=RegExp.prototype.exec,Jk=pS,MKe=mS("".charAt),RKe=mS("".indexOf),OKe=mS("".replace),Yk=mS("".slice),Qk=function(){var e=/a/,t=/b*/g;return sm(pS,e,"a"),sm(pS,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),Hee=TKe.BROKEN_CARET,eD=/()??/.exec("")[1]!==void 0,kKe=Qk||eD||Hee||IKe||PKe;kKe&&(Jk=function(t){var i=this,o=qKe(i),c=wKe(t),a=o.raw,v,b,q,M,O,D,U;if(a)return a.lastIndex=i.lastIndex,v=sm(Jk,a,c),i.lastIndex=a.lastIndex,v;var ne=o.groups,ue=Hee&&i.sticky,fe=sm(SKe,i),H=i.source,J=0,re=c;if(ue&&(fe=OKe(fe,"y",""),RKe(fe,"g")===-1&&(fe+="g"),re=Yk(c,i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&MKe(c,i.lastIndex-1)!==`
`)&&(H="(?: "+H+")",re=" "+re,J++),b=new RegExp("^(?:"+H+")",fe)),eD&&(b=new RegExp("^"+H+"$(?!\\s)",fe)),Qk&&(q=i.lastIndex),M=sm(pS,ue?b:i,re),ue?M?(M.input=Yk(M.input,J),M[0]=Yk(M[0],J),M.index=i.lastIndex,i.lastIndex+=M[0].length):i.lastIndex=0:Qk&&M&&(i.lastIndex=i.global?M.index+M[0].length:q),eD&&M&&M.length>1&&sm(CKe,M[0],b,function(){for(O=1;O<arguments.length-2;O++)arguments[O]===void 0&&(M[O]=void 0)}),M&&ne)for(M.groups=D=AKe(null),O=0;O<ne.length;O++)U=ne[O],D[U[0]]=M[U[1]];return M});Xee.exports=Jk});var gS=I(()=>{"use strict";f();var DKe=X(),Yee=vS();DKe({target:"RegExp",proto:!0,forced:/./.exec!==Yee},{exec:Yee})});var ete=I(()=>{"use strict";f();var LKe=at(),FKe=St(),zKe=Wr(),NKe=hS(),BKe=Ze(),Jee=LKe.RegExp,Qee=Jee.prototype,jKe=FKe&&BKe(function(){var e=!0;try{Jee(".","d")}catch(q){e=!1}var t={},i="",o=e?"dgimsy":"gimsy",c=function(q,M){Object.defineProperty(t,q,{get:function(){return i+=M,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(a.hasIndices="d");for(var v in a)c(v,a[v]);var b=Object.getOwnPropertyDescriptor(Qee,"flags").get.call(t);return b!==o||i!==o});jKe&&zKe(Qee,"flags",{configurable:!0,get:NKe})});var rte=I(()=>{"use strict";f();var UKe=St(),VKe=y_().MISSED_STICKY,$Ke=Mn(),GKe=Wr(),WKe=gr().get,tte=RegExp.prototype,ZKe=TypeError;UKe&&VKe&&GKe(tte,"sticky",{configurable:!0,get:function(){if(this!==tte){if($Ke(this)==="RegExp")return!!WKe(this).sticky;throw new ZKe("Incompatible receiver, RegExp required")}}})});var ate=I(()=>{"use strict";f();gS();var KKe=X(),ite=ot(),HKe=Wt(),nte=lt(),XKe=zt(),YKe=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),JKe=/./.test;KKe({target:"RegExp",proto:!0,forced:!YKe},{test:function(e){var t=nte(this),i=XKe(e),o=t.exec;if(!HKe(o))return ite(JKe,t,i);var c=ite(o,t,i);return c===null?!1:(nte(c),!0)}})});var ute=I(()=>{"use strict";f();var QKe=ad().PROPER,eHe=wr(),tHe=lt(),ote=zt(),rHe=Ze(),iHe=am(),tD="toString",ste=RegExp.prototype,lte=ste[tD],nHe=rHe(function(){return lte.call({source:"a",flags:"b"})!=="/a/b"}),aHe=QKe&&lte.name!==tD;(nHe||aHe)&&eHe(ste,tD,function(){var t=tHe(this),i=ote(t.source),o=ote(iHe(t));return"/"+i+"/"+o},{unsafe:!0})});var cte=I(()=>{"use strict";f();var oHe=Jy(),sHe=xO();oHe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},sHe)});var hte=I(()=>{"use strict";f();cte()});var yn=I((L$t,dte)=>{"use strict";f();var rD=Ue(),yS=Set.prototype;dte.exports={Set,add:rD(yS.add),has:rD(yS.has),remove:rD(yS.delete),proto:yS}});var kn=I((z$t,fte)=>{"use strict";f();var lHe=yn().has;fte.exports=function(e){return lHe(e),e}});var _u=I((B$t,pte)=>{"use strict";f();var uHe=ot();pte.exports=function(e,t,i){for(var o=i?e:e.iterator,c=e.next,a,v;!(a=uHe(c,o)).done;)if(v=t(a.value),v!==void 0)return v}});var Ua=I((U$t,_te)=>{"use strict";f();var mte=Ue(),cHe=_u(),vte=yn(),hHe=vte.Set,gte=vte.proto,dHe=mte(gte.forEach),yte=mte(gte.keys),fHe=yte(new hHe).next;_te.exports=function(e,t,i){return i?cHe({iterator:yte(e),next:fHe},t):dHe(e,t)}});var _S=I(($$t,bte)=>{"use strict";f();var xte=yn(),pHe=Ua(),mHe=xte.Set,vHe=xte.add;bte.exports=function(e){var t=new mHe;return pHe(e,function(i){vHe(t,i)}),t}});var lm=I((W$t,wte)=>{"use strict";f();var gHe=Dy(),yHe=yn();wte.exports=gHe(yHe.proto,"size","get")||function(e){return e.size}});var Zc=I((K$t,Ite)=>{"use strict";f();var Ste=Ot(),Ate=lt(),Tte=ot(),_He=Gr(),xHe=ti(),Ete="Invalid size",bHe=RangeError,wHe=TypeError,SHe=Math.max,qte=function(e,t){this.set=e,this.size=SHe(t,0),this.has=Ste(e.has),this.keys=Ste(e.keys)};qte.prototype={getIterator:function(){return xHe(Ate(Tte(this.keys,this.set)))},includes:function(e){return Tte(this.has,this.set,e)}};Ite.exports=function(e){Ate(e);var t=+e.size;if(t!==t)throw new wHe(Ete);var i=_He(t);if(i<0)throw new bHe(Ete);return new qte(e,i)}});var iD=I((X$t,Mte)=>{"use strict";f();var THe=kn(),Cte=yn(),EHe=_S(),AHe=lm(),qHe=Zc(),IHe=Ua(),PHe=_u(),CHe=Cte.has,Pte=Cte.remove;Mte.exports=function(t){var i=THe(this),o=qHe(t),c=EHe(i);return AHe(i)<=o.size?IHe(i,function(a){o.includes(a)&&Pte(c,a)}):PHe(o.getIterator(),function(a){CHe(i,a)&&Pte(c,a)}),c}});var Kc=I((J$t,kte)=>{"use strict";f();var MHe=Rt(),Rte=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},Ote=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};kte.exports=function(e,t){var i=MHe("Set");try{new i()[e](Rte(0));try{return new i()[e](Rte(-1)),!1}catch(c){if(!t)return!0;try{return new i()[e](Ote(-1/0)),!1}catch(a){var o=new i;return o.add(1),o.add(2),t(o[e](Ote(1/0)))}}}catch(c){return!1}}});var nD=I(()=>{"use strict";f();var RHe=X(),OHe=iD(),kHe=Kc(),DHe=!kHe("difference",function(e){return e.size===0});RHe({target:"Set",proto:!0,real:!0,forced:DHe},{difference:OHe})});var oD=I((iGt,Lte)=>{"use strict";f();var LHe=kn(),aD=yn(),FHe=lm(),zHe=Zc(),NHe=Ua(),BHe=_u(),jHe=aD.Set,Dte=aD.add,UHe=aD.has;Lte.exports=function(t){var i=LHe(this),o=zHe(t),c=new jHe;return FHe(i)>o.size?BHe(o.getIterator(),function(a){UHe(i,a)&&Dte(c,a)}):NHe(i,function(a){o.includes(a)&&Dte(c,a)}),c}});var sD=I(()=>{"use strict";f();var VHe=X(),$He=Ze(),GHe=oD(),WHe=Kc(),ZHe=!WHe("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||$He(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});VHe({target:"Set",proto:!0,real:!0,forced:ZHe},{intersection:GHe})});var lD=I((lGt,Fte)=>{"use strict";f();var KHe=kn(),HHe=yn().has,XHe=lm(),YHe=Zc(),JHe=Ua(),QHe=_u(),e9e=gn();Fte.exports=function(t){var i=KHe(this),o=YHe(t);if(XHe(i)<=o.size)return JHe(i,function(a){if(o.includes(a))return!1},!0)!==!1;var c=o.getIterator();return QHe(c,function(a){if(HHe(i,a))return e9e(c,"normal",!1)})!==!1}});var uD=I(()=>{"use strict";f();var t9e=X(),r9e=lD(),i9e=Kc(),n9e=!i9e("isDisjointFrom",function(e){return!e});t9e({target:"Set",proto:!0,real:!0,forced:n9e},{isDisjointFrom:r9e})});var cD=I((fGt,zte)=>{"use strict";f();var a9e=kn(),o9e=lm(),s9e=Ua(),l9e=Zc();zte.exports=function(t){var i=a9e(this),o=l9e(t);return o9e(i)>o.size?!1:s9e(i,function(c){if(!o.includes(c))return!1},!0)!==!1}});var hD=I(()=>{"use strict";f();var u9e=X(),c9e=cD(),h9e=Kc(),d9e=!h9e("isSubsetOf",function(e){return e});u9e({target:"Set",proto:!0,real:!0,forced:d9e},{isSubsetOf:c9e})});var dD=I((yGt,Nte)=>{"use strict";f();var f9e=kn(),p9e=yn().has,m9e=lm(),v9e=Zc(),g9e=_u(),y9e=gn();Nte.exports=function(t){var i=f9e(this),o=v9e(t);if(m9e(i)<o.size)return!1;var c=o.getIterator();return g9e(c,function(a){if(!p9e(i,a))return y9e(c,"normal",!1)})!==!1}});var fD=I(()=>{"use strict";f();var _9e=X(),x9e=dD(),b9e=Kc(),w9e=!b9e("isSupersetOf",function(e){return!e});_9e({target:"Set",proto:!0,real:!0,forced:w9e},{isSupersetOf:x9e})});var mD=I((SGt,Bte)=>{"use strict";f();var S9e=kn(),pD=yn(),T9e=_S(),E9e=Zc(),A9e=_u(),q9e=pD.add,I9e=pD.has,P9e=pD.remove;Bte.exports=function(t){var i=S9e(this),o=E9e(t).getIterator(),c=T9e(i);return A9e(o,function(a){I9e(i,a)?P9e(c,a):q9e(c,a)}),c}});var vD=I(()=>{"use strict";f();var C9e=X(),M9e=mD(),R9e=Kc();C9e({target:"Set",proto:!0,real:!0,forced:!R9e("symmetricDifference")},{symmetricDifference:M9e})});var gD=I((IGt,jte)=>{"use strict";f();var O9e=kn(),k9e=yn().add,D9e=_S(),L9e=Zc(),F9e=_u();jte.exports=function(t){var i=O9e(this),o=L9e(t).getIterator(),c=D9e(i);return F9e(o,function(a){k9e(c,a)}),c}});var yD=I(()=>{"use strict";f();var z9e=X(),N9e=gD(),B9e=Kc();z9e({target:"Set",proto:!0,real:!0,forced:!B9e("union")},{union:N9e})});var Ute=I(()=>{"use strict";f();var j9e=X(),U9e=Ue(),V9e=Nr(),$9e=Gr(),G9e=zt(),W9e=Ze(),Z9e=U9e("".charAt),K9e=W9e(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});j9e({target:"String",proto:!0,forced:K9e},{at:function(t){var i=G9e(V9e(this)),o=i.length,c=$9e(t),a=c>=0?c:o+c;return a<0||a>=o?void 0:Z9e(i,a)}})});var Td=I((LGt,Gte)=>{"use strict";f();var _D=Ue(),H9e=Gr(),X9e=zt(),Y9e=Nr(),J9e=_D("".charAt),Vte=_D("".charCodeAt),Q9e=_D("".slice),$te=function(e){return function(t,i){var o=X9e(Y9e(t)),c=H9e(i),a=o.length,v,b;return c<0||c>=a?e?"":void 0:(v=Vte(o,c),v<55296||v>56319||c+1===a||(b=Vte(o,c+1))<56320||b>57343?e?J9e(o,c):v:e?Q9e(o,c,c+2):(v-55296<<10)+(b-56320)+65536)}};Gte.exports={codeAt:$te(!1),charAt:$te(!0)}});var Wte=I(()=>{"use strict";f();var eXe=X(),tXe=Td().codeAt;eXe({target:"String",proto:!0},{codePointAt:function(t){return tXe(this,t)}})});var xS=I((jGt,Zte)=>{"use strict";f();var rXe=g_(),iXe=TypeError;Zte.exports=function(e){if(rXe(e))throw new iXe("The method doesn't accept regular expressions");return e}});var bS=I((VGt,Kte)=>{"use strict";f();var nXe=Ct(),aXe=nXe("match");Kte.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[aXe]=!1,"/./"[e](t)}catch(o){}}return!1}});var Yte=I(()=>{"use strict";f();var oXe=X(),sXe=Ac(),lXe=mn().f,uXe=za(),Hte=zt(),cXe=xS(),hXe=Nr(),dXe=bS(),fXe=dr(),pXe=sXe("".slice),mXe=Math.min,Xte=dXe("endsWith"),vXe=!fXe&&!Xte&&!!function(){var e=lXe(String.prototype,"endsWith");return e&&!e.writable}();oXe({target:"String",proto:!0,forced:!vXe&&!Xte},{endsWith:function(t){var i=Hte(hXe(this));cXe(t);var o=arguments.length>1?arguments[1]:void 0,c=i.length,a=o===void 0?c:mXe(uXe(o),c),v=Hte(t);return pXe(i,a-v.length,a)===v}})});var xD=I(()=>{"use strict";f();var gXe=X(),yXe=Ue(),_Xe=_s(),xXe=RangeError,Jte=String.fromCharCode,Qte=String.fromCodePoint,bXe=yXe([].join),wXe=!!Qte&&Qte.length!==1;gXe({target:"String",stat:!0,arity:1,forced:wXe},{fromCodePoint:function(t){for(var i=[],o=arguments.length,c=0,a;o>c;){if(a=+arguments[c++],_Xe(a,1114111)!==a)throw new xXe(a+" is not a valid code point");i[c]=a<65536?Jte(a):Jte(((a-=65536)>>10)+55296,a%1024+56320)}return bXe(i,"")}})});var tre=I(()=>{"use strict";f();var SXe=X(),TXe=Ue(),EXe=xS(),AXe=Nr(),ere=zt(),qXe=bS(),IXe=TXe("".indexOf);SXe({target:"String",proto:!0,forced:!qXe("includes")},{includes:function(t){return!!~IXe(ere(AXe(this)),ere(EXe(t)),arguments.length>1?arguments[1]:void 0)}})});var bD=I(()=>{"use strict";f();var PXe=X(),CXe=Ue(),MXe=Nr(),RXe=zt(),rre=CXe("".charCodeAt);PXe({target:"String",proto:!0},{isWellFormed:function(){for(var t=RXe(MXe(this)),i=t.length,o=0;o<i;o++){var c=rre(t,o);if((c&63488)===55296&&(c>=56320||++o>=i||(rre(t,o)&64512)!==56320))return!1}return!0}})});var wD=I(()=>{"use strict";f();var OXe=Td().charAt,kXe=zt(),nre=gr(),DXe=xw(),ire=nn(),are="String Iterator",LXe=nre.set,FXe=nre.getterFor(are);DXe(String,"String",function(e){LXe(this,{type:are,string:kXe(e),index:0})},function(){var t=FXe(this),i=t.string,o=t.index,c;return o>=i.length?ire(void 0,!0):(c=OXe(i,o),t.index+=c.length,ire(c,!1))})});var w_=I((oWt,cre)=>{"use strict";f();gS();var ore=ot(),sre=wr(),zXe=vS(),lre=Ze(),ure=Ct(),NXe=Gi(),BXe=ure("species"),SD=RegExp.prototype;cre.exports=function(e,t,i,o){var c=ure(e),a=!lre(function(){var M={};return M[c]=function(){return 7},""[e](M)!==7}),v=a&&!lre(function(){var M=!1,O=/a/;return e==="split"&&(O={},O.constructor={},O.constructor[BXe]=function(){return O},O.flags="",O[c]=/./[c]),O.exec=function(){return M=!0,null},O[c](""),!M});if(!a||!v||i){var b=/./[c],q=t(c,""[e],function(M,O,D,U,ne){var ue=O.exec;return ue===zXe||ue===SD.exec?a&&!ne?{done:!0,value:ore(b,O,D,U)}:{done:!0,value:ore(M,D,O,U)}:{done:!1}});sre(String.prototype,e,q[0]),sre(SD,c,q[1])}o&&NXe(SD[c],"sham",!0)}});var S_=I((lWt,hre)=>{"use strict";f();var jXe=Td().charAt;hre.exports=function(e,t,i){return t+(i?jXe(e,t).length:1)}});var um=I((cWt,fre)=>{"use strict";f();var dre=ot(),UXe=lt(),VXe=Wt(),$Xe=Mn(),GXe=vS(),WXe=TypeError;fre.exports=function(e,t){var i=e.exec;if(VXe(i)){var o=dre(i,e,t);return o!==null&&UXe(o),o}if($Xe(e)==="RegExp")return dre(GXe,e,t);throw new WXe("RegExp#exec called on incompatible receiver")}});var mre=I(()=>{"use strict";f();var ZXe=ot(),KXe=w_(),HXe=lt(),XXe=It(),YXe=za(),TD=zt(),JXe=Nr(),QXe=Si(),eYe=S_(),pre=um();KXe("match",function(e,t,i){return[function(c){var a=JXe(this),v=XXe(c)?QXe(c,e):void 0;return v?ZXe(v,c,a):new RegExp(c)[e](TD(a))},function(o){var c=HXe(this),a=TD(o),v=i(t,c,a);if(v.done)return v.value;if(!c.global)return pre(c,a);var b=c.unicode;c.lastIndex=0;for(var q=[],M=0,O;(O=pre(c,a))!==null;){var D=TD(O[0]);q[M]=D,D===""&&(c.lastIndex=eYe(a,YXe(c.lastIndex),b)),M++}return M===0?null:q}]})});var PD=I(()=>{"use strict";f();var tYe=X(),vre=ot(),_re=Ac(),rYe=Oc(),wS=nn(),gre=Nr(),xre=za(),T_=zt(),iYe=lt(),nYe=It(),aYe=Mn(),oYe=g_(),bre=am(),sYe=Si(),lYe=wr(),uYe=Ze(),cYe=Ct(),hYe=u_(),dYe=S_(),fYe=um(),wre=gr(),AD=dr(),SS=cYe("matchAll"),Sre="RegExp String",Tre=Sre+" Iterator",pYe=wre.set,mYe=wre.getterFor(Tre),yre=RegExp.prototype,vYe=TypeError,qD=_re("".indexOf),TS=_re("".matchAll),ED=!!TS&&!uYe(function(){TS("a",/./)}),gYe=rYe(function(t,i,o,c){pYe(this,{type:Tre,regexp:t,string:i,global:o,unicode:c,done:!1})},Sre,function(){var t=mYe(this);if(t.done)return wS(void 0,!0);var i=t.regexp,o=t.string,c=fYe(i,o);return c===null?(t.done=!0,wS(void 0,!0)):t.global?(T_(c[0])===""&&(i.lastIndex=dYe(o,xre(i.lastIndex),t.unicode)),wS(c,!1)):(t.done=!0,wS(c,!1))}),ID=function(e){var t=iYe(this),i=T_(e),o=hYe(t,RegExp),c=T_(bre(t)),a,v,b;return a=new o(o===RegExp?t.source:t,c),v=!!~qD(c,"g"),b=!!~qD(c,"u"),a.lastIndex=xre(t.lastIndex),new gYe(a,i,v,b)};tYe({target:"String",proto:!0,forced:ED},{matchAll:function(t){var i=gre(this),o,c,a,v;if(nYe(t)){if(oYe(t)&&(o=T_(gre(bre(t))),!~qD(o,"g")))throw new vYe("`.matchAll` does not allow non-global regexes");if(ED)return TS(i,t);if(a=sYe(t,SS),a===void 0&&AD&&aYe(t)==="RegExp"&&(a=ID),a)return vre(a,t,i)}else if(ED)return TS(i,t);return c=T_(i),v=new RegExp(t,"g"),AD?vre(ID,v,c):v[SS](c)}});AD||SS in yre||lYe(yre,SS,ID)});var CD=I((yWt,Ere)=>{"use strict";f();var yYe=ms();Ere.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(yYe)});var Are=I(()=>{"use strict";f();var _Ye=X(),xYe=Xy().end,bYe=CD();_Ye({target:"String",proto:!0,forced:bYe},{padEnd:function(t){return xYe(this,t,arguments.length>1?arguments[1]:void 0)}})});var qre=I(()=>{"use strict";f();var wYe=X(),SYe=Xy().start,TYe=CD();wYe({target:"String",proto:!0,forced:TYe},{padStart:function(t){return SYe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Mre=I(()=>{"use strict";f();var EYe=X(),Cre=Ue(),AYe=$i(),qYe=tr(),Ire=zt(),IYe=sr(),Pre=Cre([].push),PYe=Cre([].join);EYe({target:"String",stat:!0},{raw:function(t){var i=AYe(qYe(t).raw),o=IYe(i);if(!o)return"";for(var c=arguments.length,a=[],v=0;;){if(Pre(a,Ire(i[v++])),v===o)return PYe(a,"");v<c&&Pre(a,Ire(arguments[v]))}}})});var Rre=I(()=>{"use strict";f();var CYe=X(),MYe=Hy();CYe({target:"String",proto:!0},{repeat:MYe})});var kD=I((RWt,Ore)=>{"use strict";f();var OD=Ue(),RYe=tr(),OYe=Math.floor,MD=OD("".charAt),kYe=OD("".replace),RD=OD("".slice),DYe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,LYe=/\$([$&'`]|\d{1,2})/g;Ore.exports=function(e,t,i,o,c,a){var v=i+e.length,b=o.length,q=LYe;return c!==void 0&&(c=RYe(c),q=DYe),kYe(a,q,function(M,O){var D;switch(MD(O,0)){case"$":return"$";case"&":return e;case"`":return RD(t,0,i);case"'":return RD(t,v);case"<":D=c[RD(O,1,-1)];break;default:var U=+O;if(U===0)return M;if(U>b){var ne=OYe(U/10);return ne===0?M:ne<=b?o[ne-1]===void 0?MD(O,1):o[ne-1]+MD(O,1):M}D=o[U-1]}return D===void 0?"":D})}});var zre=I(()=>{"use strict";f();var FYe=On(),kre=ot(),ES=Ue(),zYe=w_(),NYe=Ze(),BYe=lt(),jYe=Wt(),UYe=It(),VYe=Gr(),$Ye=za(),cm=zt(),GYe=Nr(),WYe=S_(),ZYe=Si(),KYe=kD(),HYe=um(),XYe=Ct(),LD=XYe("replace"),YYe=Math.max,JYe=Math.min,QYe=ES([].concat),DD=ES([].push),Dre=ES("".indexOf),Lre=ES("".slice),eJe=function(e){return e===void 0?e:String(e)},tJe=function(){return"a".replace(/./,"$0")==="$0"}(),Fre=function(){return /./[LD]?/./[LD]("a","$0")==="":!1}(),rJe=!NYe(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});zYe("replace",function(e,t,i){var o=Fre?"$":"$0";return[function(a,v){var b=GYe(this),q=UYe(a)?ZYe(a,LD):void 0;return q?kre(q,a,b,v):kre(t,cm(b),a,v)},function(c,a){var v=BYe(this),b=cm(c);if(typeof a=="string"&&Dre(a,o)===-1&&Dre(a,"$<")===-1){var q=i(t,v,b,a);if(q.done)return q.value}var M=jYe(a);M||(a=cm(a));var O=v.global,D;O&&(D=v.unicode,v.lastIndex=0);for(var U=[],ne;ne=HYe(v,b),!(ne===null||(DD(U,ne),!O));){var ue=cm(ne[0]);ue===""&&(v.lastIndex=WYe(b,$Ye(v.lastIndex),D))}for(var fe="",H=0,J=0;J<U.length;J++){ne=U[J];for(var re=cm(ne[0]),xe=YYe(JYe(VYe(ne.index),b.length),0),Ae=[],Ge,Ne=1;Ne<ne.length;Ne++)DD(Ae,eJe(ne[Ne]));var Ye=ne.groups;if(M){var ct=QYe([re],Ae,xe,b);Ye!==void 0&&DD(ct,Ye),Ge=cm(FYe(a,void 0,ct))}else Ge=KYe(re,b,xe,Ae,Ye,a);xe>=H&&(fe+=Lre(b,H,xe)+Ge,H=xe+re.length)}return fe+Lre(b,H)}]},!rJe||!tJe||Fre)});var ND=I(()=>{"use strict";f();var iJe=X(),nJe=ot(),zD=Ue(),Nre=Nr(),aJe=Wt(),oJe=It(),sJe=g_(),hm=zt(),lJe=Si(),uJe=am(),cJe=kD(),hJe=Ct(),dJe=dr(),fJe=hJe("replace"),pJe=TypeError,FD=zD("".indexOf),mJe=zD("".replace),Bre=zD("".slice),vJe=Math.max;iJe({target:"String",proto:!0},{replaceAll:function(t,i){var o=Nre(this),c,a,v,b,q,M,O,D,U,ne,ue=0,fe="";if(oJe(t)){if(c=sJe(t),c&&(a=hm(Nre(uJe(t))),!~FD(a,"g")))throw new pJe("`.replaceAll` does not allow non-global regexes");if(v=lJe(t,fJe),v)return nJe(v,t,o,i);if(dJe&&c)return mJe(hm(o),t,i)}for(b=hm(o),q=hm(t),M=aJe(i),M||(i=hm(i)),O=q.length,D=vJe(1,O),U=FD(b,q);U!==-1;)ne=M?hm(i(q,U,b)):cJe(q,b,U,[],void 0,i),fe+=Bre(b,ue,U)+ne,ue=U+O,U=U+D>b.length?-1:FD(b,q,U+D);return ue<b.length&&(fe+=Bre(b,ue)),fe}})});var Vre=I(()=>{"use strict";f();var gJe=ot(),yJe=w_(),_Je=lt(),xJe=It(),bJe=Nr(),jre=tS(),Ure=zt(),wJe=Si(),SJe=um();yJe("search",function(e,t,i){return[function(c){var a=bJe(this),v=xJe(c)?wJe(c,e):void 0;return v?gJe(v,c,a):new RegExp(c)[e](Ure(a))},function(o){var c=_Je(this),a=Ure(o),v=i(t,c,a);if(v.done)return v.value;var b=c.lastIndex;jre(b,0)||(c.lastIndex=0);var q=SJe(c,a);return jre(c.lastIndex,b)||(c.lastIndex=b),q===null?-1:q.index}]})});var Kre=I(()=>{"use strict";f();var BD=ot(),Zre=Ue(),TJe=w_(),EJe=lt(),AJe=It(),qJe=Nr(),IJe=u_(),PJe=S_(),CJe=za(),$re=zt(),MJe=Si(),Gre=um(),RJe=y_(),OJe=Ze(),dm=RJe.UNSUPPORTED_Y,kJe=4294967295,DJe=Math.min,jD=Zre([].push),UD=Zre("".slice),LJe=!OJe(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return i.length!==2||i[0]!=="a"||i[1]!=="b"}),Wre="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;TJe("split",function(e,t,i){var o="0".split(void 0,0).length?function(c,a){return c===void 0&&a===0?[]:BD(t,this,c,a)}:t;return[function(a,v){var b=qJe(this),q=AJe(a)?MJe(a,e):void 0;return q?BD(q,a,b,v):BD(o,$re(b),a,v)},function(c,a){var v=EJe(this),b=$re(c);if(!Wre){var q=i(o,v,b,a,o!==t);if(q.done)return q.value}var M=IJe(v,RegExp),O=v.unicode,D=(v.ignoreCase?"i":"")+(v.multiline?"m":"")+(v.unicode?"u":"")+(dm?"g":"y"),U=new M(dm?"^(?:"+v.source+")":v,D),ne=a===void 0?kJe:a>>>0;if(ne===0)return[];if(b.length===0)return Gre(U,b)===null?[b]:[];for(var ue=0,fe=0,H=[];fe<b.length;){U.lastIndex=dm?0:fe;var J=Gre(U,dm?UD(b,fe):b),re;if(J===null||(re=DJe(CJe(U.lastIndex+(dm?fe:0)),b.length))===ue)fe=PJe(b,fe,O);else{if(jD(H,UD(b,ue,fe)),H.length===ne)return H;for(var xe=1;xe<=J.length-1;xe++)if(jD(H,J[xe]),H.length===ne)return H;fe=ue=re}}return jD(H,UD(b,ue)),H}]},Wre||!LJe,dm)});var Yre=I(()=>{"use strict";f();var FJe=X(),zJe=Ac(),NJe=mn().f,BJe=za(),Hre=zt(),jJe=xS(),UJe=Nr(),VJe=bS(),$Je=dr(),GJe=zJe("".slice),WJe=Math.min,Xre=VJe("startsWith"),ZJe=!$Je&&!Xre&&!!function(){var e=NJe(String.prototype,"startsWith");return e&&!e.writable}();FJe({target:"String",proto:!0,forced:!ZJe&&!Xre},{startsWith:function(t){var i=Hre(UJe(this));jJe(t);var o=BJe(WJe(arguments.length>1?arguments[1]:void 0,i.length)),c=Hre(t);return GJe(i,o,o+c.length)===c}})});var Qre=I(()=>{"use strict";f();var KJe=X(),HJe=Ue(),XJe=Nr(),Jre=Gr(),YJe=zt(),JJe=HJe("".slice),QJe=Math.max,eQe=Math.min,tQe=!"".substr||"ab".substr(-1)!=="b";KJe({target:"String",proto:!0,forced:tQe},{substr:function(t,i){var o=YJe(XJe(this)),c=o.length,a=Jre(t),v,b;return a===1/0&&(a=0),a<0&&(a=QJe(c+a,0)),v=i===void 0?c:Jre(i),v<=0||v===1/0?"":(b=eQe(a+v,c),a>=b?"":JJe(o,a,b))}})});var WD=I(()=>{"use strict";f();var rQe=X(),rie=ot(),GD=Ue(),iQe=Nr(),nQe=zt(),aQe=Ze(),oQe=Array,VD=GD("".charAt),eie=GD("".charCodeAt),sQe=GD([].join),$D="".toWellFormed,lQe="\uFFFD",tie=$D&&aQe(function(){return rie($D,1)!=="1"});rQe({target:"String",proto:!0,forced:tie},{toWellFormed:function(){var t=nQe(iQe(this));if(tie)return rie($D,t);for(var i=t.length,o=oQe(i),c=0;c<i;c++){var a=eie(t,c);(a&63488)!==55296?o[c]=VD(t,c):a>=56320||c+1>=i||(eie(t,c+1)&64512)!==56320?o[c]=lQe:(o[c]=VD(t,c),o[++c]=VD(t,c))}return sQe(o,"")}})});var AS=I((tZt,aie)=>{"use strict";f();var uQe=ad().PROPER,cQe=Ze(),iie=yd(),nie="\u200B\x85\u180E";aie.exports=function(e){return cQe(function(){return!!iie[e]()||nie[e]()!==nie||uQe&&iie[e].name!==e})}});var oie=I(()=>{"use strict";f();var hQe=X(),dQe=_d().trim,fQe=AS();hQe({target:"String",proto:!0,forced:fQe("trim")},{trim:function(){return dQe(this)}})});var ZD=I((oZt,sie)=>{"use strict";f();var pQe=_d().end,mQe=AS();sie.exports=mQe("trimEnd")?function(){return pQe(this)}:"".trimEnd});var uie=I(()=>{"use strict";f();var vQe=X(),lie=ZD();vQe({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==lie},{trimRight:lie})});var hie=I(()=>{"use strict";f();uie();var gQe=X(),cie=ZD();gQe({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==cie},{trimEnd:cie})});var KD=I((pZt,die)=>{"use strict";f();var yQe=_d().start,_Qe=AS();die.exports=_Qe("trimStart")?function(){return yQe(this)}:"".trimStart});var pie=I(()=>{"use strict";f();var xQe=X(),fie=KD();xQe({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==fie},{trimLeft:fie})});var vie=I(()=>{"use strict";f();pie();var bQe=X(),mie=KD();bQe({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==mie},{trimStart:mie})});var Va=I((wZt,yie)=>{"use strict";f();var wQe=Ue(),SQe=Nr(),gie=zt(),TQe=/"/g,EQe=wQe("".replace);yie.exports=function(e,t,i,o){var c=gie(SQe(e)),a="<"+t;return i!==""&&(a+=" "+i+"=\""+EQe(gie(o),TQe,"&quot;")+"\""),a+">"+c+"</"+t+">"}});var $a=I((TZt,_ie)=>{"use strict";f();var AQe=Ze();_ie.exports=function(e){return AQe(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var xie=I(()=>{"use strict";f();var qQe=X(),IQe=Va(),PQe=$a();qQe({target:"String",proto:!0,forced:PQe("anchor")},{anchor:function(t){return IQe(this,"a","name",t)}})});var bie=I(()=>{"use strict";f();var CQe=X(),MQe=Va(),RQe=$a();CQe({target:"String",proto:!0,forced:RQe("big")},{big:function(){return MQe(this,"big","","")}})});var wie=I(()=>{"use strict";f();var OQe=X(),kQe=Va(),DQe=$a();OQe({target:"String",proto:!0,forced:DQe("blink")},{blink:function(){return kQe(this,"blink","","")}})});var Sie=I(()=>{"use strict";f();var LQe=X(),FQe=Va(),zQe=$a();LQe({target:"String",proto:!0,forced:zQe("bold")},{bold:function(){return FQe(this,"b","","")}})});var Tie=I(()=>{"use strict";f();var NQe=X(),BQe=Va(),jQe=$a();NQe({target:"String",proto:!0,forced:jQe("fixed")},{fixed:function(){return BQe(this,"tt","","")}})});var Eie=I(()=>{"use strict";f();var UQe=X(),VQe=Va(),$Qe=$a();UQe({target:"String",proto:!0,forced:$Qe("fontcolor")},{fontcolor:function(t){return VQe(this,"font","color",t)}})});var Aie=I(()=>{"use strict";f();var GQe=X(),WQe=Va(),ZQe=$a();GQe({target:"String",proto:!0,forced:ZQe("fontsize")},{fontsize:function(t){return WQe(this,"font","size",t)}})});var qie=I(()=>{"use strict";f();var KQe=X(),HQe=Va(),XQe=$a();KQe({target:"String",proto:!0,forced:XQe("italics")},{italics:function(){return HQe(this,"i","","")}})});var Iie=I(()=>{"use strict";f();var YQe=X(),JQe=Va(),QQe=$a();YQe({target:"String",proto:!0,forced:QQe("link")},{link:function(t){return JQe(this,"a","href",t)}})});var Pie=I(()=>{"use strict";f();var eet=X(),tet=Va(),ret=$a();eet({target:"String",proto:!0,forced:ret("small")},{small:function(){return tet(this,"small","","")}})});var Cie=I(()=>{"use strict";f();var iet=X(),net=Va(),aet=$a();iet({target:"String",proto:!0,forced:aet("strike")},{strike:function(){return net(this,"strike","","")}})});var Mie=I(()=>{"use strict";f();var oet=X(),set=Va(),uet=$a();oet({target:"String",proto:!0,forced:uet("sub")},{sub:function(){return set(this,"sub","","")}})});var Rie=I(()=>{"use strict";f();var cet=X(),het=Va(),det=$a();cet({target:"String",proto:!0,forced:det("sup")},{sup:function(){return het(this,"sup","","")}})});var qS=I((h7t,kie)=>{"use strict";f();var Oie=at(),HD=Ze(),fet=zy(),pet=Jt().NATIVE_ARRAY_BUFFER_VIEWS,met=Oie.ArrayBuffer,Ed=Oie.Int8Array;kie.exports=!pet||!HD(function(){Ed(1)})||!HD(function(){new Ed(-1)})||!fet(function(e){new Ed,new Ed(null),new Ed(1.5),new Ed(e)},!0)||HD(function(){return new Ed(new met(2),1,void 0).length!==1})});var XD=I((f7t,Die)=>{"use strict";f();var vet=Zp(),get=RangeError;Die.exports=function(e,t){var i=vet(e);if(i%t)throw new get("Wrong offset");return i}});var YD=I((m7t,Lie)=>{"use strict";f();var yet=Math.round;Lie.exports=function(e){var t=yet(e);return t<0?0:t>255?255:t&255}});var IS=I((g7t,Fie)=>{"use strict";f();var _et=_a();Fie.exports=function(e){var t=_et(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var E_=I((_7t,zie)=>{"use strict";f();var xet=xy(),bet=TypeError;zie.exports=function(e){var t=xet(e,"number");if(typeof t=="number")throw new bet("Can't convert number to bigint");return BigInt(t)}});var JD=I((b7t,Nie)=>{"use strict";f();var wet=Cr(),Tet=ot(),Eet=l_(),Aet=tr(),qet=sr(),Iet=Cc(),Pet=ol(),Cet=dw(),Met=IS(),Ret=Jt().aTypedArrayConstructor,Oet=E_();Nie.exports=function(t){var i=Eet(this),o=Aet(t),c=arguments.length,a=c>1?arguments[1]:void 0,v=a!==void 0,b=Pet(o),q,M,O,D,U,ne,ue,fe;if(b&&!Cet(b))for(ue=Iet(o,b),fe=ue.next,o=[];!(ne=Tet(fe,ue)).done;)o.push(ne.value);for(v&&c>2&&(a=wet(a,arguments[2])),M=qet(o),O=new(Ret(i))(M),D=Met(O),q=0;M>q;q++)U=v?a(o[q],q):o[q],O[q]=D?Oet(U):+U;return O}});var dl=I((S7t,aL)=>{"use strict";f();var Bie=X(),Yie=at(),jie=ot(),ket=St(),Det=qS(),P_=Jt(),Jie=Ky(),Uie=ea(),Let=La(),A_=Gi(),Fet=Jw(),zet=za(),Vie=Np(),QD=XD(),Net=YD(),Qie=nl(),q_=Zt(),Bet=_a(),rL=It(),jet=su(),Uet=Ti(),Vet=Rn(),PS=No(),$et=Ec().f,$ie=JD(),Get=Ei().forEach,Wet=Dc(),Zet=Wr(),ene=Dr(),tne=mn(),Gie=du(),oL=gr(),Ket=Pc(),iL=oL.get,Het=oL.set,Xet=oL.enforce,rne=ene.f,Yet=tne.f,eL=Yie.RangeError,ine=Jie.ArrayBuffer,Jet=ine.prototype,Qet=Jie.DataView,CS=P_.NATIVE_ARRAY_BUFFER_VIEWS,Wie=P_.TYPED_ARRAY_TAG,Zie=P_.TypedArray,I_=P_.TypedArrayPrototype,nL=P_.isTypedArray,MS="BYTES_PER_ELEMENT",tL="Wrong length",RS=function(e,t){Zet(e,t,{configurable:!0,get:function(){return iL(this)[t]}})},Kie=function(e){var t;return Vet(Jet,e)||(t=Bet(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},nne=function(e,t){return nL(e)&&!jet(t)&&t in e&&Fet(+t)&&t>=0},Hie=function(t,i){return i=Qie(i),nne(t,i)?Let(2,t[i]):Yet(t,i)},Xie=function(t,i,o){return i=Qie(i),nne(t,i)&&rL(o)&&q_(o,"value")&&!q_(o,"get")&&!q_(o,"set")&&!o.configurable&&(!q_(o,"writable")||o.writable)&&(!q_(o,"enumerable")||o.enumerable)?(t[i]=o.value,t):rne(t,i,o)};ket?(CS||(tne.f=Hie,ene.f=Xie,RS(I_,"buffer"),RS(I_,"byteOffset"),RS(I_,"byteLength"),RS(I_,"length")),Bie({target:"Object",stat:!0,forced:!CS},{getOwnPropertyDescriptor:Hie,defineProperty:Xie}),aL.exports=function(e,t,i){var o=e.match(/\d+/)[0]/8,c=e+(i?"Clamped":"")+"Array",a="get"+e,v="set"+e,b=Yie[c],q=b,M=q&&q.prototype,O={},D=function(fe,H){var J=iL(fe);return J.view[a](H*o+J.byteOffset,!0)},U=function(fe,H,J){var re=iL(fe);re.view[v](H*o+re.byteOffset,i?Net(J):J,!0)},ne=function(fe,H){rne(fe,H,{get:function(){return D(this,H)},set:function(J){return U(this,H,J)},enumerable:!0})};CS?Det&&(q=t(function(fe,H,J,re){return Uie(fe,M),Ket(function(){return rL(H)?Kie(H)?re!==void 0?new b(H,QD(J,o),re):J!==void 0?new b(H,QD(J,o)):new b(H):nL(H)?Gie(q,H):jie($ie,q,H):new b(Vie(H))}(),fe,q)}),PS&&PS(q,Zie),Get($et(b),function(fe){fe in q||A_(q,fe,b[fe])}),q.prototype=M):(q=t(function(fe,H,J,re){Uie(fe,M);var xe=0,Ae=0,Ge,Ne,Ye;if(!rL(H))Ye=Vie(H),Ne=Ye*o,Ge=new ine(Ne);else if(Kie(H)){Ge=H,Ae=QD(J,o);var ct=H.byteLength;if(re===void 0){if(ct%o)throw new eL(tL);if(Ne=ct-Ae,Ne<0)throw new eL(tL)}else if(Ne=zet(re)*o,Ne+Ae>ct)throw new eL(tL);Ye=Ne/o}else return nL(H)?Gie(q,H):jie($ie,q,H);for(Het(fe,{buffer:Ge,byteOffset:Ae,byteLength:Ne,length:Ye,view:new Qet(Ge)});xe<Ye;)ne(fe,xe++)}),PS&&PS(q,Zie),M=q.prototype=Uet(I_)),M.constructor!==q&&A_(M,"constructor",q),Xet(M).TypedArrayConstructor=q,Wie&&A_(M,Wie,c);var ue=q!==b;O[c]=q,Bie({global:!0,constructor:!0,forced:ue,sham:!CS},O),MS in q||A_(q,MS,o),MS in M||A_(M,MS,o),Wet(c)}):aL.exports=function(){}});var ane=I(()=>{"use strict";f();var ett=dl();ett("Float32",function(e){return function(i,o,c){return e(this,i,o,c)}})});var one=I(()=>{"use strict";f();var ttt=dl();ttt("Float64",function(e){return function(i,o,c){return e(this,i,o,c)}})});var sne=I(()=>{"use strict";f();var rtt=dl();rtt("Int8",function(e){return function(i,o,c){return e(this,i,o,c)}})});var lne=I(()=>{"use strict";f();var itt=dl();itt("Int16",function(e){return function(i,o,c){return e(this,i,o,c)}})});var une=I(()=>{"use strict";f();var ntt=dl();ntt("Int32",function(e){return function(i,o,c){return e(this,i,o,c)}})});var cne=I(()=>{"use strict";f();var att=dl();att("Uint8",function(e){return function(i,o,c){return e(this,i,o,c)}})});var hne=I(()=>{"use strict";f();var ott=dl();ott("Uint8",function(e){return function(i,o,c){return e(this,i,o,c)}},!0)});var dne=I(()=>{"use strict";f();var stt=dl();stt("Uint16",function(e){return function(i,o,c){return e(this,i,o,c)}})});var fne=I(()=>{"use strict";f();var ltt=dl();ltt("Uint32",function(e){return function(i,o,c){return e(this,i,o,c)}})});var sL=I(()=>{"use strict";f();var pne=Jt(),utt=sr(),ctt=Gr(),htt=pne.aTypedArray,dtt=pne.exportTypedArrayMethod;dtt("at",function(t){var i=htt(this),o=utt(i),c=ctt(t),a=c>=0?c:o+c;return a<0||a>=o?void 0:i[a]})});var vne=I(()=>{"use strict";f();var ftt=Ue(),mne=Jt(),ptt=uM(),mtt=ftt(ptt),vtt=mne.aTypedArray,gtt=mne.exportTypedArrayMethod;gtt("copyWithin",function(t,i){return mtt(vtt(this),t,i,arguments.length>2?arguments[2]:void 0)})});var yne=I(()=>{"use strict";f();var gne=Jt(),ytt=Ei().every,_tt=gne.aTypedArray,xtt=gne.exportTypedArrayMethod;xtt("every",function(t){return ytt(_tt(this),t,arguments.length>1?arguments[1]:void 0)})});var xne=I(()=>{"use strict";f();var _ne=Jt(),btt=vw(),wtt=E_(),Stt=_a(),Ttt=ot(),Ett=Ue(),Att=Ze(),qtt=_ne.aTypedArray,Itt=_ne.exportTypedArrayMethod,Ptt=Ett("".slice),Ctt=Att(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});Itt("fill",function(t){var i=arguments.length;qtt(this);var o=Ptt(Stt(this),0,3)==="Big"?wtt(t):+t;return Ttt(btt,this,o,i>1?arguments[1]:void 0,i>2?arguments[2]:void 0)},Ctt)});var OS=I((cKt,bne)=>{"use strict";f();var Mtt=du(),Rtt=Jt().getTypedArrayConstructor;bne.exports=function(e,t){return Mtt(Rtt(e),t)}});var Sne=I(()=>{"use strict";f();var wne=Jt(),Ott=Ei().filter,ktt=OS(),Dtt=wne.aTypedArray,Ltt=wne.exportTypedArrayMethod;Ltt("filter",function(t){var i=Ott(Dtt(this),t,arguments.length>1?arguments[1]:void 0);return ktt(this,i)})});var Ene=I(()=>{"use strict";f();var Tne=Jt(),Ftt=Ei().find,ztt=Tne.aTypedArray,Ntt=Tne.exportTypedArrayMethod;Ntt("find",function(t){return Ftt(ztt(this),t,arguments.length>1?arguments[1]:void 0)})});var qne=I(()=>{"use strict";f();var Ane=Jt(),Btt=Ei().findIndex,jtt=Ane.aTypedArray,Utt=Ane.exportTypedArrayMethod;Utt("findIndex",function(t){return Btt(jtt(this),t,arguments.length>1?arguments[1]:void 0)})});var lL=I(()=>{"use strict";f();var Ine=Jt(),Vtt=Fy().findLast,$tt=Ine.aTypedArray,Gtt=Ine.exportTypedArrayMethod;Gtt("findLast",function(t){return Vtt($tt(this),t,arguments.length>1?arguments[1]:void 0)})});var uL=I(()=>{"use strict";f();var Pne=Jt(),Wtt=Fy().findLastIndex,Ztt=Pne.aTypedArray,Ktt=Pne.exportTypedArrayMethod;Ktt("findLastIndex",function(t){return Wtt(Ztt(this),t,arguments.length>1?arguments[1]:void 0)})});var Mne=I(()=>{"use strict";f();var Cne=Jt(),Htt=Ei().forEach,Xtt=Cne.aTypedArray,Ytt=Cne.exportTypedArrayMethod;Ytt("forEach",function(t){Htt(Xtt(this),t,arguments.length>1?arguments[1]:void 0)})});var Rne=I(()=>{"use strict";f();var Jtt=qS(),Qtt=Jt().exportTypedArrayStaticMethod,ert=JD();Qtt("from",ert,Jtt)});var kne=I(()=>{"use strict";f();var One=Jt(),trt=Mp().includes,rrt=One.aTypedArray,irt=One.exportTypedArrayMethod;irt("includes",function(t){return trt(rrt(this),t,arguments.length>1?arguments[1]:void 0)})});var Lne=I(()=>{"use strict";f();var Dne=Jt(),nrt=Mp().indexOf,art=Dne.aTypedArray,ort=Dne.exportTypedArrayMethod;ort("indexOf",function(t){return nrt(art(this),t,arguments.length>1?arguments[1]:void 0)})});var jne=I(()=>{"use strict";f();var srt=at(),lrt=Ze(),cL=Ue(),zne=Jt(),hL=jy(),urt=Ct(),dL=urt("iterator"),Fne=srt.Uint8Array,crt=cL(hL.values),hrt=cL(hL.keys),drt=cL(hL.entries),fL=zne.aTypedArray,kS=zne.exportTypedArrayMethod,fm=Fne&&Fne.prototype,DS=!lrt(function(){fm[dL].call([1])}),Nne=!!fm&&fm.values&&fm[dL]===fm.values&&fm.values.name==="values",Bne=function(){return crt(fL(this))};kS("entries",function(){return drt(fL(this))},DS);kS("keys",function(){return hrt(fL(this))},DS);kS("values",Bne,DS||!Nne,{name:"values"});kS(dL,Bne,DS||!Nne,{name:"values"})});var Vne=I(()=>{"use strict";f();var Une=Jt(),frt=Ue(),prt=Une.aTypedArray,mrt=Une.exportTypedArrayMethod,vrt=frt([].join);mrt("join",function(t){return vrt(prt(this),t)})});var Gne=I(()=>{"use strict";f();var $ne=Jt(),grt=On(),yrt=EM(),_rt=$ne.aTypedArray,xrt=$ne.exportTypedArrayMethod;xrt("lastIndexOf",function(t){var i=arguments.length;return grt(yrt,_rt(this),i>1?[t,arguments[1]]:[t])})});var Wne=I(()=>{"use strict";f();var pL=Jt(),brt=Ei().map,wrt=pL.aTypedArray,Srt=pL.getTypedArrayConstructor,Trt=pL.exportTypedArrayMethod;Trt("map",function(t){return brt(wrt(this),t,arguments.length>1?arguments[1]:void 0,function(i,o){return new(Srt(i))(o)})})});var Kne=I(()=>{"use strict";f();var Zne=Jt(),Ert=qS(),Art=Zne.aTypedArrayConstructor,qrt=Zne.exportTypedArrayStaticMethod;qrt("of",function(){for(var t=0,i=arguments.length,o=new(Art(this))(i);i>t;)o[t]=arguments[t++];return o},Ert)});var Xne=I(()=>{"use strict";f();var Hne=Jt(),Irt=Uy().left,Prt=Hne.aTypedArray,Crt=Hne.exportTypedArrayMethod;Crt("reduce",function(t){var i=arguments.length;return Irt(Prt(this),t,i,i>1?arguments[1]:void 0)})});var Jne=I(()=>{"use strict";f();var Yne=Jt(),Mrt=Uy().right,Rrt=Yne.aTypedArray,Ort=Yne.exportTypedArrayMethod;Ort("reduceRight",function(t){var i=arguments.length;return Mrt(Rrt(this),t,i,i>1?arguments[1]:void 0)})});var eae=I(()=>{"use strict";f();var Qne=Jt(),krt=Qne.aTypedArray,Drt=Qne.exportTypedArrayMethod,Lrt=Math.floor;Drt("reverse",function(){for(var t=this,i=krt(t).length,o=Lrt(i/2),c=0,a;c<o;)a=t[c],t[c++]=t[--i],t[i]=a;return t})});var oae=I(()=>{"use strict";f();var rae=at(),iae=ot(),gL=Jt(),Frt=sr(),zrt=XD(),Nrt=tr(),nae=Ze(),Brt=rae.RangeError,mL=rae.Int8Array,tae=mL&&mL.prototype,aae=tae&&tae.set,jrt=gL.aTypedArray,Urt=gL.exportTypedArrayMethod,vL=!nae(function(){var e=new Uint8ClampedArray(2);return iae(aae,e,{length:1,0:3},1),e[1]!==3}),Vrt=vL&&gL.NATIVE_ARRAY_BUFFER_VIEWS&&nae(function(){var e=new mL(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});Urt("set",function(t){jrt(this);var i=zrt(arguments.length>1?arguments[1]:void 0,1),o=Nrt(t);if(vL)return iae(aae,this,o,i);var c=this.length,a=Frt(o),v=0;if(a+i>c)throw new Brt("Wrong length");for(;v<a;)this[i+v]=o[v++]},!vL||Vrt)});var sae=I(()=>{"use strict";f();var yL=Jt(),$rt=Ze(),Grt=Na(),Wrt=yL.aTypedArray,Zrt=yL.getTypedArrayConstructor,Krt=yL.exportTypedArrayMethod,Hrt=$rt(function(){new Int8Array(1).slice()});Krt("slice",function(t,i){for(var o=Grt(Wrt(this),t,i),c=Zrt(this),a=0,v=o.length,b=new c(v);v>a;)b[a]=o[a++];return b},Hrt)});var uae=I(()=>{"use strict";f();var lae=Jt(),Xrt=Ei().some,Yrt=lae.aTypedArray,Jrt=lae.exportTypedArrayMethod;Jrt("some",function(t){return Xrt(Yrt(this),t,arguments.length>1?arguments[1]:void 0)})});var mae=I(()=>{"use strict";f();var Qrt=at(),eit=Ac(),_L=Ze(),tit=Ot(),rit=Tw(),pae=Jt(),cae=IM(),iit=PM(),hae=gs(),dae=Ew(),nit=pae.aTypedArray,ait=pae.exportTypedArrayMethod,C_=Qrt.Uint16Array,pm=C_&&eit(C_.prototype.sort),oit=!!pm&&!(_L(function(){pm(new C_(2),null)})&&_L(function(){pm(new C_(2),{})})),fae=!!pm&&!_L(function(){if(hae)return hae<74;if(cae)return cae<67;if(iit)return!0;if(dae)return dae<602;var e=new C_(516),t=Array(516),i,o;for(i=0;i<516;i++)o=i%4,e[i]=515-i,t[i]=i-2*o+3;for(pm(e,function(c,a){return(c/4|0)-(a/4|0)}),i=0;i<516;i++)if(e[i]!==t[i])return!0}),sit=function(e){return function(t,i){return e!==void 0?+e(t,i)||0:i!==i?-1:t!==t?1:t===0&&i===0?1/t>0&&1/i<0?1:-1:t>i}};ait("sort",function(t){return t!==void 0&&tit(t),fae?pm(this,t):rit(nit(this),sit(t))},!fae||oit)});var gae=I(()=>{"use strict";f();var xL=Jt(),lit=za(),vae=_s(),uit=xL.aTypedArray,cit=xL.getTypedArrayConstructor,hit=xL.exportTypedArrayMethod;hit("subarray",function(t,i){var o=uit(this),c=o.length,a=vae(t,c),v=cit(o);return new v(o.buffer,o.byteOffset+a*o.BYTES_PER_ELEMENT,lit((i===void 0?c:vae(i,c))-a))})});var wae=I(()=>{"use strict";f();var dit=at(),fit=On(),xae=Jt(),bL=Ze(),yae=Na(),LS=dit.Int8Array,_ae=xae.aTypedArray,pit=xae.exportTypedArrayMethod,bae=[].toLocaleString,mit=!!LS&&bL(function(){bae.call(new LS(1))}),vit=bL(function(){return[1,2].toLocaleString()!==new LS([1,2]).toLocaleString()})||!bL(function(){LS.prototype.toLocaleString.call([1,2])});pit("toLocaleString",function(){return fit(bae,mit?yae(_ae(this)):_ae(this),yae(arguments))},vit)});var SL=I(()=>{"use strict";f();var git=RM(),wL=Jt(),yit=wL.aTypedArray,_it=wL.exportTypedArrayMethod,xit=wL.getTypedArrayConstructor;_it("toReversed",function(){return git(yit(this),xit(this))})});var TL=I(()=>{"use strict";f();var FS=Jt(),bit=Ue(),wit=Ot(),Sit=du(),Tit=FS.aTypedArray,Eit=FS.getTypedArrayConstructor,Ait=FS.exportTypedArrayMethod,qit=bit(FS.TypedArrayPrototype.sort);Ait("toSorted",function(t){t!==void 0&&wit(t);var i=Tit(this),o=Sit(Eit(i),i);return qit(o,t)})});var Tae=I(()=>{"use strict";f();var Iit=Jt().exportTypedArrayMethod,Pit=Ze(),Cit=at(),Mit=Ue(),Sae=Cit.Uint8Array,Rit=Sae&&Sae.prototype||{},zS=[].toString,Oit=Mit([].join);Pit(function(){zS.call({})})&&(zS=function(){return Oit(this)});var kit=Rit.toString!==zS;Iit("toString",zS,kit)});var AL=I(()=>{"use strict";f();var Dit=FM(),EL=Jt(),Lit=IS(),Fit=Gr(),zit=E_(),Nit=EL.aTypedArray,Bit=EL.getTypedArrayConstructor,jit=EL.exportTypedArrayMethod,Uit=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();jit("with",function(e,t){var i=Nit(this),o=Fit(e),c=Lit(i)?zit(t):+t;return Dit(i,Bit(i),o,c)},!Uit)});var Pae=I(()=>{"use strict";f();var Vit=X(),qL=Ue(),$it=zt(),Eae=String.fromCharCode,Aae=qL("".charAt),qae=qL(/./.exec),Iae=qL("".slice),Git=/^[\da-f]{2}$/i,Wit=/^[\da-f]{4}$/i;Vit({global:!0},{unescape:function(t){for(var i=$it(t),o="",c=i.length,a=0,v,b;a<c;){if(v=Aae(i,a++),v==="%"){if(Aae(i,a)==="u"){if(b=Iae(i,a+1,a+5),qae(Wit,b)){o+=Eae(parseInt(b,16)),a+=5;continue}}else if(b=Iae(i,a,a+2),qae(Git,b)){o+=Eae(parseInt(b,16)),a+=2;continue}}o+=v}return o}})});var CL=I((UHt,Dae)=>{"use strict";f();var Zit=Ue(),Cae=Uo(),NS=Uc().getWeakData,Kit=ea(),Hit=lt(),Xit=Fa(),IL=It(),Yit=li(),Rae=Ei(),Mae=Zt(),Oae=gr(),Jit=Oae.set,Qit=Oae.getterFor,ent=Rae.find,tnt=Rae.findIndex,rnt=Zit([].splice),int=0,BS=function(e){return e.frozen||(e.frozen=new kae)},kae=function(){this.entries=[]},PL=function(e,t){return ent(e.entries,function(i){return i[0]===t})};kae.prototype={get:function(e){var t=PL(this,e);if(t)return t[1]},has:function(e){return!!PL(this,e)},set:function(e,t){var i=PL(this,e);i?i[1]=t:this.entries.push([e,t])},delete:function(e){var t=tnt(this.entries,function(i){return i[0]===e});return~t&&rnt(this.entries,t,1),!!~t}};Dae.exports={getConstructor:function(e,t,i,o){var c=e(function(q,M){Kit(q,a),Jit(q,{type:t,id:int++,frozen:null}),Xit(M)||Yit(M,q[o],{that:q,AS_ENTRIES:i})}),a=c.prototype,v=Qit(t),b=function(q,M,O){var D=v(q),U=NS(Hit(M),!0);return U===!0?BS(D).set(M,O):U[D.id]=O,q};return Cae(a,{delete:function(q){var M=v(this);if(!IL(q))return!1;var O=NS(q);return O===!0?BS(M).delete(q):O&&Mae(O,M.id)&&delete O[M.id]},has:function(M){var O=v(this);if(!IL(M))return!1;var D=NS(M);return D===!0?BS(O).has(M):D&&Mae(D,O.id)}}),Cae(a,i?{get:function(M){var O=v(this);if(IL(M)){var D=NS(M);if(D===!0)return BS(O).get(M);if(D)return D[O.id]}},set:function(M,O){return b(this,M,O)}}:{add:function(M){return b(this,M,!0)}}),c}}});var Vae=I(()=>{"use strict";f();var nnt=gu(),Lae=at(),$S=Ue(),Fae=Uo(),ant=Uc(),ont=Jy(),zae=CL(),jS=It(),US=gr().enforce,snt=Ze(),lnt=h2(),O_=Object,unt=Array.isArray,VS=O_.isExtensible,Nae=O_.isFrozen,cnt=O_.isSealed,Bae=O_.freeze,hnt=O_.seal,dnt=!Lae.ActiveXObject&&"ActiveXObject"in Lae,M_,jae=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Uae=ont("WeakMap",jae,zae),mm=Uae.prototype,GS=$S(mm.set),fnt=function(){return nnt&&snt(function(){var e=Bae([]);return GS(new Uae,e,1),!Nae(e)})};lnt&&(dnt?(M_=zae.getConstructor(jae,"WeakMap",!0),ant.enable(),ML=$S(mm.delete),R_=$S(mm.has),RL=$S(mm.get),Fae(mm,{delete:function(e){if(jS(e)&&!VS(e)){var t=US(this);return t.frozen||(t.frozen=new M_),ML(this,e)||t.frozen.delete(e)}return ML(this,e)},has:function(t){if(jS(t)&&!VS(t)){var i=US(this);return i.frozen||(i.frozen=new M_),R_(this,t)||i.frozen.has(t)}return R_(this,t)},get:function(t){if(jS(t)&&!VS(t)){var i=US(this);return i.frozen||(i.frozen=new M_),R_(this,t)?RL(this,t):i.frozen.get(t)}return RL(this,t)},set:function(t,i){if(jS(t)&&!VS(t)){var o=US(this);o.frozen||(o.frozen=new M_),R_(this,t)?GS(this,t,i):o.frozen.set(t,i)}else GS(this,t,i);return this}})):fnt()&&Fae(mm,{set:function(t,i){var o;return unt(t)&&(Nae(t)?o=Bae:cnt(t)&&(o=hnt)),GS(this,t,i),o&&o(t),this}}));var ML,R_,RL});var WS=I(()=>{"use strict";f();Vae()});var $ae=I(()=>{"use strict";f();var pnt=Jy(),mnt=CL();pnt("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},mnt)});var Gae=I(()=>{"use strict";f();$ae()});var Wae=I(()=>{"use strict";f();iM()});var Hae=I(()=>{"use strict";f();var vnt=X(),gnt=at(),ynt=Rn(),Zae=Wi(),KS=No(),_nt=sd(),Kae=Ti(),ZS=Gi(),OL=La(),xnt=lw(),bnt=dd(),wnt=Ct(),Snt=Ze(),Tnt=dr(),vm=gnt.SuppressedError,Ent=wnt("toStringTag"),HS=Error,Ant=!!vm&&vm.length!==3,qnt=!!vm&&Snt(function(){return new vm(1,2,3,{cause:4}).cause===4}),XS=Ant||qnt,Ad=function(t,i,o){var c=ynt(k_,this),a;return KS?a=XS&&(!c||Zae(this)===k_)?new vm:KS(new HS,c?Zae(this):k_):(a=c?this:Kae(k_),ZS(a,Ent,"Error")),o!==void 0&&ZS(a,"message",bnt(o)),xnt(a,Ad,a.stack,1),ZS(a,"error",t),ZS(a,"suppressed",i),a};KS?KS(Ad,HS):_nt(Ad,HS,{name:!0});var k_=Ad.prototype=XS?vm.prototype:Kae(HS.prototype,{constructor:OL(1,Ad),message:OL(1,""),name:OL(1,"SuppressedError")});XS&&!Tnt&&(k_.constructor=Ad);vnt({global:!0,constructor:!0,arity:3,forced:XS},{SuppressedError:Ad})});var gm=I((l9t,ioe)=>{"use strict";f();var eoe=at(),toe=_y(),roe=Wt(),Int=Ti(),YS=Wi(),Pnt=wr(),Cnt=Ct(),Mnt=dr(),Xae="USE_FUNCTION_CONSTRUCTOR",Yae=Cnt("asyncIterator"),Jae=eoe.AsyncIterator,Qae=toe.AsyncIteratorPrototype,fl,kL;if(Qae)fl=Qae;else if(roe(Jae))fl=Jae.prototype;else if(toe[Xae]||eoe[Xae])try{kL=YS(YS(YS(Function("return async function*(){}()")()))),YS(kL)===Object.prototype&&(fl=kL)}catch(e){}fl?Mnt&&(fl=Int(fl)):fl={};roe(fl[Yae])||Pnt(fl,Yae,function(){return this});ioe.exports=fl});var D_=I((c9t,doe)=>{"use strict";f();var noe=ot(),aoe=lt(),Rnt=Ti(),Ont=Si(),knt=Uo(),loe=gr(),Dnt=gn(),Lnt=Rt(),Fnt=gm(),uoe=nn(),DL=Lnt("Promise"),coe="AsyncFromSyncIterator",znt=loe.set,ooe=loe.getterFor(coe),soe=function(e,t,i,o,c){var a=e.done;DL.resolve(e.value).then(function(v){t(uoe(v,a))},function(v){if(!a&&c)try{Dnt(o,"throw",v)}catch(b){v=b}i(v)})},hoe=function(t){t.type=coe,znt(this,t)};hoe.prototype=knt(Rnt(Fnt),{next:function(){var t=ooe(this);return new DL(function(i,o){var c=aoe(noe(t.next,t.iterator));soe(c,i,o,t.iterator,!0)})},return:function(){var e=ooe(this).iterator;return new DL(function(t,i){var o=Ont(e,"return");if(o===void 0)return t(uoe(void 0,!0));var c=aoe(noe(o,e));soe(c,t,i,e)})}});doe.exports=hoe});var poe=I((d9t,foe)=>{"use strict";f();var Nnt=ot(),Bnt=D_(),jnt=lt(),Unt=Cc(),Vnt=ti(),$nt=Si(),Gnt=Ct(),Wnt=Gnt("asyncIterator");foe.exports=function(e,t){var i=arguments.length<2?$nt(e,Wnt):t;return i?jnt(Nnt(i,e)):new Bnt(Vnt(Unt(e)))}});var ym=I((p9t,moe)=>{"use strict";f();var Znt=ot(),Knt=Rt(),Hnt=Si();moe.exports=function(e,t,i,o){try{var c=Hnt(e,"return");if(c)return Knt("Promise").resolve(Znt(c,e)).then(function(){t(i)},function(a){o(a)})}catch(a){return o(a)}t(i)}});var qd=I((v9t,voe)=>{"use strict";f();var Xnt=ot(),Ynt=Ot(),LL=lt(),Jnt=It(),Qnt=Mc(),eat=Rt(),tat=ti(),FL=ym(),L_=function(e){var t=e===0,i=e===1,o=e===2,c=e===3;return function(a,v,b){LL(a);var q=v!==void 0;(q||!t)&&Ynt(v);var M=tat(a),O=eat("Promise"),D=M.iterator,U=M.next,ne=0;return new O(function(ue,fe){var H=function(re){FL(D,fe,re,fe)},J=function(){try{if(q)try{Qnt(ne)}catch(re){H(re)}O.resolve(LL(Xnt(U,D))).then(function(re){try{if(LL(re).done)t?(b.length=ne,ue(b)):ue(c?!1:o||void 0);else{var xe=re.value;try{if(q){var Ae=v(xe,ne),Ge=function(Ne){if(i)J();else if(o)Ne?J():FL(D,ue,!1,fe);else if(t)try{b[ne++]=Ne,J()}catch(Ye){H(Ye)}else Ne?FL(D,ue,c||xe,fe):J()};Jnt(Ae)?O.resolve(Ae).then(Ge,H):Ge(Ae)}else b[ne++]=xe,J()}catch(Ne){H(Ne)}}}catch(Ne){fe(Ne)}},fe)}catch(re){fe(re)}};J()})}};voe.exports={toArray:L_(0),forEach:L_(1),every:L_(2),some:L_(3),find:L_(4)}});var zL=I((y9t,xoe)=>{"use strict";f();var rat=Cr(),goe=Ue(),iat=tr(),nat=bs(),aat=poe(),oat=Cc(),sat=ti(),lat=ol(),uat=Si(),cat=Rt(),hat=kM(),dat=Ct(),fat=D_(),pat=qd().toArray,mat=dat("asyncIterator"),yoe=goe(hat("Array","values")),vat=goe(yoe([]).next),gat=function(){return new _oe(this)},_oe=function(e){this.iterator=yoe(e)};_oe.prototype.next=function(){return vat(this.iterator)};xoe.exports=function(t){var i=this,o=arguments.length,c=o>1?arguments[1]:void 0,a=o>2?arguments[2]:void 0;return new(cat("Promise"))(function(v){var b=iat(t);c!==void 0&&(c=rat(c,a));var q=uat(b,mat),M=q?void 0:lat(b)||gat,O=nat(i)?new i:[],D=q?aat(b,q):new fat(sat(oat(b,M)));v(pat(D,c,O))})}});var woe=I(()=>{"use strict";f();var yat=X(),_at=zL(),xat=Ze(),boe=Array.fromAsync,bat=!boe||xat(function(){var e=0;return boe.call(function(){return e++,[]},{length:0}),e!==1});yat({target:"Array",stat:!0,forced:bat},{fromAsync:_at})});var Soe=I(()=>{"use strict";f();sM()});var Toe=I(()=>{"use strict";f();var wat=X(),Sat=Ei().filterReject,Tat=ui();wat({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return Sat(this,t,arguments.length>1?arguments[1]:void 0)}});Tat("filterOut")});var Eoe=I(()=>{"use strict";f();var Eat=X(),Aat=Ei().filterReject,qat=ui();Eat({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return Aat(this,t,arguments.length>1?arguments[1]:void 0)}});qat("filterReject")});var Aoe=I(()=>{"use strict";f();dM()});var qoe=I(()=>{"use strict";f();fM()});var JS=I((z9t,Ioe)=>{"use strict";f();var Iat=Cr(),Pat=Ue(),Cat=ou(),Mat=tr(),Rat=nl(),Oat=sr(),kat=Ti(),Dat=du(),Lat=Array,Fat=Pat([].push);Ioe.exports=function(e,t,i,o){for(var c=Mat(e),a=Cat(c),v=Iat(t,i),b=kat(null),q=Oat(a),M=0,O,D,U;q>M;M++)U=a[M],D=Rat(v(U,M,c)),D in b?Fat(b[D],U):b[D]=[U];if(o&&(O=o(c),O!==Lat))for(D in b)b[D]=Dat(O,b[D]);return b}});var Poe=I(()=>{"use strict";f();var zat=X(),Nat=JS(),Bat=ui();zat({target:"Array",proto:!0},{group:function(t){var i=arguments.length>1?arguments[1]:void 0;return Nat(this,t,i)}});Bat("group")});var Coe=I(()=>{"use strict";f();var jat=X(),Uat=JS(),Vat=jo(),$at=ui();jat({target:"Array",proto:!0,forced:!Vat("groupBy")},{groupBy:function(t){var i=arguments.length>1?arguments[1]:void 0;return Uat(this,t,i)}});$at("groupBy")});var NL=I((W9t,Moe)=>{"use strict";f();var Gat=Cr(),Wat=Ue(),Zat=ou(),Kat=tr(),Hat=sr(),QS=an(),Xat=QS.Map,Yat=QS.get,Jat=QS.has,Qat=QS.set,eot=Wat([].push);Moe.exports=function(t){for(var i=Kat(this),o=Zat(i),c=Gat(t,arguments.length>1?arguments[1]:void 0),a=new Xat,v=Hat(o),b=0,q,M;v>b;b++)M=o[b],q=c(M,b,i),Jat(a,q)?eot(Yat(a,q),M):Qat(a,q,[M]);return a}});var Roe=I(()=>{"use strict";f();var tot=X(),rot=jo(),iot=ui(),not=NL(),aot=dr();tot({target:"Array",proto:!0,name:"groupToMap",forced:aot||!rot("groupByToMap")},{groupByToMap:not});iot("groupByToMap")});var Ooe=I(()=>{"use strict";f();var oot=X(),sot=ui(),lot=NL(),uot=dr();oot({target:"Array",proto:!0,forced:uot},{groupToMap:lot});sot("groupToMap")});var Loe=I(()=>{"use strict";f();var cot=X(),hot=xs(),koe=Object.isFrozen,Doe=function(e,t){if(!koe||!hot(e)||!koe(e))return!1;for(var i=0,o=e.length,c;i<o;)if(c=e[i++],!(typeof c=="string"||t&&c===void 0))return!1;return o!==0};cot({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!Doe(t,!0))return!1;var i=t.raw;return i.length===t.length&&Doe(i,!1)}})});var Foe=I(()=>{"use strict";f();var dot=St(),fot=ui(),pot=tr(),mot=sr(),vot=Wr();dot&&(vot(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=pot(this),i=mot(t);return i===0?0:i-1}}),fot("lastIndex"))});var Boe=I(()=>{"use strict";f();var got=St(),yot=ui(),zoe=tr(),Noe=sr(),_ot=Wr();got&&(_ot(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=zoe(this),i=Noe(t);return i===0?void 0:t[i-1]},set:function(t){var i=zoe(this),o=Noe(i);return i[o===0?0:o-1]=t}}),yot("lastItem"))});var joe=I(()=>{"use strict";f();OM()});var Uoe=I(()=>{"use strict";f();DM()});var Voe=I(()=>{"use strict";f();LM()});var Vo=I((yXt,Koe)=>{"use strict";f();var $oe=Ue(),xot=_u(),Goe=an(),bot=Goe.Map,Woe=Goe.proto,wot=$oe(Woe.forEach),Zoe=$oe(Woe.entries),Sot=Zoe(new bot).next;Koe.exports=function(e,t,i){return i?xot({iterator:Zoe(e),next:Sot},function(o){return t(o[1],o[0])}):wot(e,t)}});var eT=I((xXt,Hoe)=>{"use strict";f();var Tot=Ue(),Eot=Ot(),Aot=Fa(),qot=sr(),Iot=tr(),BL=an(),Pot=Vo(),Cot=BL.Map,Mot=BL.has,Rot=BL.set,Oot=Tot([].push);Hoe.exports=function(t){var i=Iot(this),o=qot(i),c=[],a=new Cot,v=Aot(t)?function(O){return O}:Eot(t),b,q,M;for(b=0;b<o;b++)q=i[b],M=v(q),Mot(a,M)||Rot(a,M,q);return Pot(a,function(O){Oot(c,O)}),c}});var Xoe=I(()=>{"use strict";f();var kot=X(),Dot=ui(),Lot=eT();kot({target:"Array",proto:!0,forced:!0},{uniqueBy:Lot});Dot("uniqueBy")});var Yoe=I(()=>{"use strict";f();zM()});var Joe=I(()=>{"use strict";f();hR()});var Qoe=I(()=>{"use strict";f();AR()});var ese=I(()=>{"use strict";f();qR()});var UL=I((FXt,ase)=>{"use strict";f();var Fot=Rt(),zot=ot(),Not=Ue(),Bot=Cr(),jot=lt(),Uot=Ot(),ise=Fa(),jL=Si(),nse=Ct(),Vot=nse("asyncDispose"),tse=nse("dispose"),$ot=Not([].push),Got=function(e,t){if(t==="async-dispose"){var i=jL(e,Vot);return i!==void 0||(i=jL(e,tse),i===void 0)?i:function(){var o=this,c=Fot("Promise");return new c(function(a){zot(i,o),a(void 0)})}}return jL(e,tse)},rse=function(e,t,i){return arguments.length<3&&!ise(e)&&(i=Uot(Got(jot(e),t))),i===void 0?function(){}:Bot(i,e)};ase.exports=function(e,t,i,o){var c;if(arguments.length<4){if(ise(t)&&i==="sync-dispose")return;c=rse(t,i)}else c=rse(void 0,i,o);$ot(e.stack,c)}});var fse=I(()=>{"use strict";f();var Wot=X(),rT=St(),use=Rt(),ose=Ot(),Zot=ea(),cse=wr(),Kot=Uo(),Hot=Wr(),hse=Ct(),dse=gr(),VL=UL(),sse=gs(),lse=use("Promise"),Xot=use("SuppressedError"),Yot=ReferenceError,Jot=hse("asyncDispose"),Qot=hse("toStringTag"),nT="AsyncDisposableStack",est=dse.set,iT=dse.getterFor(nT),$L="async-dispose",F_="disposed",tst="pending",tT=function(e){var t=iT(e);if(t.state===F_)throw new Yot(nT+" already disposed");return t},GL=function(){est(Zot(this,_m),{type:nT,state:tst,stack:[]}),rT||(this.disposed=!1)},_m=GL.prototype;Kot(_m,{disposeAsync:function(){var t=this;return new lse(function(i,o){var c=iT(t);if(c.state===F_)return i(void 0);c.state=F_,rT||(t.disposed=!0);var a=c.stack,v=a.length,b=!1,q,M=function(D){b?q=new Xot(D,q):(b=!0,q=D),O()},O=function(){if(v){var D=a[--v];a[v]=null;try{lse.resolve(D()).then(O,M)}catch(U){M(U)}}else c.stack=null,b?o(q):i(void 0)};O()})},use:function(t){return VL(tT(this),t,$L),t},adopt:function(t,i){var o=tT(this);return ose(i),VL(o,void 0,$L,function(){return i(t)}),t},defer:function(t){var i=tT(this);ose(t),VL(i,void 0,$L,t)},move:function(){var t=tT(this),i=new GL;return iT(i).stack=t.stack,t.stack=[],t.state=F_,rT||(this.disposed=!0),i}});rT&&Hot(_m,"disposed",{configurable:!0,get:function(){return iT(this).state===F_}});cse(_m,Jot,_m.disposeAsync,{name:"disposeAsync"});cse(_m,Qot,nT,{nonWritable:!0});var rst=sse&&sse<136;Wot({global:!0,constructor:!0,forced:rst},{AsyncDisposableStack:GL})});var yse=I(()=>{"use strict";f();var ist=X(),nst=ea(),ast=Wi(),mse=Gi(),vse=Zt(),ost=Ct(),Hc=gm(),gse=dr(),pse=ost("toStringTag"),sst=TypeError,WL=function(){if(nst(this,Hc),ast(this)===Hc)throw new sst("Abstract class AsyncIterator not directly constructable")};WL.prototype=Hc;vse(Hc,pse)||mse(Hc,pse,"AsyncIterator");(gse||!vse(Hc,"constructor")||Hc.constructor===Object)&&mse(Hc,"constructor",WL);ist({global:!0,constructor:!0,forced:gse},{AsyncIterator:WL})});var Id=I((GXt,Ase)=>{"use strict";f();var lst=ot(),aT=Vc(),_se=lt(),ust=Ti(),cst=Gi(),hst=Uo(),dst=Ct(),bse=gr(),fst=Rt(),pst=Si(),mst=gm(),ZL=nn(),xse=gn(),pl=fst("Promise"),vst=dst("toStringTag"),wse="AsyncIteratorHelper",Sse="WrapForValidAsyncIterator",gst=bse.set,Tse=function(e){var t=!e,i=bse.getterFor(e?Sse:wse),o=function(c){var a=aT(function(){return i(c)}),v=a.error,b=a.value;return v||t&&b.done?{exit:!0,value:v?pl.reject(b):pl.resolve(ZL(void 0,!0))}:{exit:!1,value:b}};return hst(ust(mst),{next:function(){var a=o(this),v=a.value;if(a.exit)return v;var b=aT(function(){return _se(v.nextHandler(pl))}),q=b.error,M=b.value;return q&&(v.done=!0),q?pl.reject(M):pl.resolve(M)},return:function(){var c=o(this),a=c.value;if(c.exit)return a;a.done=!0;var v=a.iterator,b,q,M=aT(function(){if(a.inner)try{xse(a.inner.iterator,"normal")}catch(O){return xse(v,"throw",O)}return pst(v,"return")});return b=q=M.value,M.error?pl.reject(q):b===void 0?pl.resolve(ZL(void 0,!0)):(M=aT(function(){return lst(b,v)}),q=M.value,M.error?pl.reject(q):e?pl.resolve(q):pl.resolve(q).then(function(O){return _se(O),ZL(void 0,!0)}))}})},yst=Tse(!0),Ese=Tse(!1);cst(Ese,vst,"Async Iterator Helper");Ase.exports=function(e,t){var i=function(c,a){a?(a.iterator=c.iterator,a.next=c.next):a=c,a.type=t?Sse:wse,a.nextHandler=e,a.counter=0,a.done=!1,gst(this,a)};return i.prototype=t?yst:Ese,i}});var HL=I((ZXt,Ise)=>{"use strict";f();var _st=ot(),xst=Ot(),KL=lt(),bst=It(),wst=ti(),Sst=Id(),qse=nn(),Tst=ym(),Est=Sst(function(e){var t=this,i=t.iterator,o=t.mapper;return new e(function(c,a){var v=function(q){t.done=!0,a(q)},b=function(q){Tst(i,v,q,v)};e.resolve(KL(_st(t.next,i))).then(function(q){try{if(KL(q).done)t.done=!0,c(qse(void 0,!0));else{var M=q.value;try{var O=o(M,t.counter++),D=function(U){c(qse(U,!1))};bst(O)?e.resolve(O).then(D,b):D(O)}catch(U){b(U)}}}catch(U){v(U)}},v)})});Ise.exports=function(t){return KL(this),xst(t),new Est(wst(this),{mapper:t})}});var XL=I((HXt,Pse)=>{"use strict";f();var Ast=ot(),qst=HL(),Ist=function(e,t){return[t,e]};Pse.exports=function(){return Ast(qst,this,Ist)}});var Cse=I(()=>{"use strict";f();var Pst=X(),Cst=XL();Pst({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:Cst})});var kse=I(()=>{"use strict";f();var Mst=ot(),Rst=wr(),Ost=Rt(),kst=Si(),Dst=Zt(),Lst=Ct(),Mse=gm(),Rse=Lst("asyncDispose"),Ose=Ost("Promise");Dst(Mse,Rse)||Rst(Mse,Rse,function(){var e=this;return new Ose(function(t,i){var o=kst(e,"return");o?Ose.resolve(Mst(o,e)).then(function(){t(void 0)},i):t(void 0)})})});var Lse=I(()=>{"use strict";f();var Fst=X(),zst=ot(),YL=lt(),Nst=ti(),Bst=Wp(),jst=Zp(),Ust=Id(),Dse=nn(),Vst=Ust(function(e){var t=this;return new e(function(i,o){var c=function(v){t.done=!0,o(v)},a=function(){try{e.resolve(YL(zst(t.next,t.iterator))).then(function(v){try{YL(v).done?(t.done=!0,i(Dse(void 0,!0))):t.remaining?(t.remaining--,a()):i(Dse(v.value,!1))}catch(b){c(b)}},c)}catch(v){c(v)}};a()})});Fst({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(t){YL(this);var i=jst(Bst(+t));return new Vst(Nst(this),{remaining:i})}})});var Fse=I(()=>{"use strict";f();var $st=X(),Gst=qd().every;$st({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return Gst(this,t)}})});var Nse=I(()=>{"use strict";f();var Wst=X(),Zst=ot(),Kst=Ot(),JL=lt(),Hst=It(),Xst=ti(),Yst=Id(),zse=nn(),Jst=ym(),Qst=Yst(function(e){var t=this,i=t.iterator,o=t.predicate;return new e(function(c,a){var v=function(M){t.done=!0,a(M)},b=function(M){Jst(i,v,M,v)},q=function(){try{e.resolve(JL(Zst(t.next,i))).then(function(M){try{if(JL(M).done)t.done=!0,c(zse(void 0,!0));else{var O=M.value;try{var D=o(O,t.counter++),U=function(ne){ne?c(zse(O,!1)):q()};Hst(D)?e.resolve(D).then(U,b):U(D)}catch(ne){b(ne)}}}catch(ne){v(ne)}},v)}catch(M){v(M)}};q()})});Wst({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return JL(this),Kst(t),new Qst(Xst(this),{predicate:t})}})});var Bse=I(()=>{"use strict";f();var elt=X(),tlt=qd().find;elt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return tlt(this,t)}})});var QL=I((mYt,Vse)=>{"use strict";f();var rlt=ot(),ilt=Wt(),jse=lt(),Use=ti(),nlt=ol(),alt=Si(),olt=Ct(),slt=D_(),llt=olt("asyncIterator");Vse.exports=function(e){var t=jse(e),i=!0,o=alt(t,llt),c;return ilt(o)||(o=nlt(t),i=!1),o!==void 0?c=rlt(o,t):(c=t,i=!0),jse(c),Use(i?c:new slt(Use(c)))}});var Wse=I(()=>{"use strict";f();var ult=X(),$se=ot(),clt=Ot(),z_=lt(),hlt=It(),dlt=ti(),flt=Id(),Gse=nn(),plt=QL(),mlt=ym(),vlt=flt(function(e){var t=this,i=t.iterator,o=t.mapper;return new e(function(c,a){var v=function(O){t.done=!0,a(O)},b=function(O){mlt(i,v,O,v)},q=function(){try{e.resolve(z_($se(t.next,i))).then(function(O){try{if(z_(O).done)t.done=!0,c(Gse(void 0,!0));else{var D=O.value;try{var U=o(D,t.counter++),ne=function(ue){try{t.inner=plt(ue),M()}catch(fe){b(fe)}};hlt(U)?e.resolve(U).then(ne,b):ne(U)}catch(ue){b(ue)}}}catch(ue){v(ue)}},v)}catch(O){v(O)}},M=function(){var O=t.inner;if(O)try{e.resolve(z_($se(O.next,O.iterator))).then(function(D){try{z_(D).done?(t.inner=null,q()):c(Gse(D.value,!1))}catch(U){b(U)}},b)}catch(D){b(D)}else q()};M()})});ult({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return z_(this),clt(t),new vlt(dlt(this),{mapper:t,inner:null})}})});var Zse=I(()=>{"use strict";f();var glt=X(),ylt=qd().forEach;glt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return ylt(this,t)}})});var eF=I((SYt,Kse)=>{"use strict";f();var _lt=ot(),xlt=Id();Kse.exports=xlt(function(){return _lt(this.next,this.iterator)},!0)});var Hse=I(()=>{"use strict";f();var blt=X(),wlt=tr(),Slt=Rn(),Tlt=QL(),Elt=gm(),Alt=eF();blt({target:"AsyncIterator",stat:!0,forced:!0},{from:function(t){var i=Tlt(typeof t=="string"?wlt(t):t);return Slt(Elt,i.iterator)?i.iterator:new Alt(i)}})});var Xse=I(()=>{"use strict";f();var qlt=X(),Ilt=XL();qlt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:Ilt})});var Yse=I(()=>{"use strict";f();var Plt=X(),Clt=HL();Plt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:Clt})});var Jse=I(()=>{"use strict";f();var Mlt=X(),Rlt=ot(),Olt=Ot(),tF=lt(),klt=It(),Dlt=Rt(),Llt=ti(),Flt=ym(),rF=Dlt("Promise"),zlt=TypeError;Mlt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){tF(this),Olt(t);var i=Llt(this),o=i.iterator,c=i.next,a=arguments.length<2,v=a?void 0:arguments[1],b=0;return new rF(function(q,M){var O=function(U){Flt(o,M,U,M)},D=function(){try{rF.resolve(tF(Rlt(c,o))).then(function(U){try{if(tF(U).done)a?M(new zlt("Reduce of empty iterator with no initial value")):q(v);else{var ne=U.value;if(a)a=!1,v=ne,D();else try{var ue=t(v,ne,b),fe=function(H){v=H,D()};klt(ue)?rF.resolve(ue).then(fe,O):fe(ue)}catch(H){O(H)}}b++}catch(H){M(H)}},M)}catch(U){M(U)}};D()})}})});var Qse=I(()=>{"use strict";f();var Nlt=X(),Blt=qd().some;Nlt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return Blt(this,t)}})});var rle=I(()=>{"use strict";f();var jlt=X(),ele=ot(),tle=lt(),Ult=ti(),Vlt=Wp(),$lt=Zp(),Glt=Id(),iF=nn(),Wlt=Glt(function(e){var t=this,i=t.iterator,o;if(!t.remaining--){var c=iF(void 0,!0);return t.done=!0,o=i.return,o!==void 0?e.resolve(ele(o,i,void 0)).then(function(){return c}):c}return e.resolve(ele(t.next,i)).then(function(a){return tle(a).done?(t.done=!0,iF(void 0,!0)):iF(a.value,!1)}).then(null,function(a){throw t.done=!0,a})});jlt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(t){tle(this);var i=$lt(Vlt(+t));return new Wlt(Ult(this),{remaining:i})}})});var ile=I(()=>{"use strict";f();var Zlt=X(),Klt=qd().toArray;Zlt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return Klt(this,void 0,[])}})});var sT=I((WYt,ule)=>{"use strict";f();var ale=gr(),Hlt=Oc(),nF=nn(),Xlt=Fa(),Ylt=It(),Jlt=Wr(),ole=St(),N_="Incorrect Iterator.range arguments",oF="NumericRangeIterator",Qlt=ale.set,sle=ale.getterFor(oF),nle=RangeError,aF=TypeError,lle=Hlt(function(t,i,o,c,a,v){if(typeof t!=c||i!==1/0&&i!==-1/0&&typeof i!=c)throw new aF(N_);if(t===1/0||t===-1/0)throw new nle(N_);var b=i>t,q=!1,M;if(o===void 0)M=void 0;else if(Ylt(o))M=o.step,q=!!o.inclusive;else if(typeof o==c)M=o;else throw new aF(N_);if(Xlt(M)&&(M=b?v:-v),typeof M!=c)throw new aF(N_);if(M===1/0||M===-1/0||M===a&&t!==i)throw new nle(N_);var O=t!==t||i!==i||M!==M||i>t!=M>a;Qlt(this,{type:oF,start:t,end:i,step:M,inclusive:q,hitsEnd:O,currentCount:a,zero:a}),ole||(this.start=t,this.end=i,this.step=M,this.inclusive=q)},oF,function(){var t=sle(this);if(t.hitsEnd)return nF(void 0,!0);var i=t.start,o=t.end,c=t.step,a=i+c*t.currentCount++;a===o&&(t.hitsEnd=!0);var v=t.inclusive,b;return o>i?b=v?a>o:a>=o:b=v?o>a:o>=a,b?(t.hitsEnd=!0,nF(void 0,!0)):nF(a,!1)}),oT=function(e){Jlt(lle.prototype,e,{get:function(){return sle(this)[e]},set:function(){},configurable:!0,enumerable:!1})};ole&&(oT("start"),oT("end"),oT("inclusive"),oT("step"));ule.exports=lle});var cle=I(()=>{"use strict";f();var eut=X(),tut=sT();typeof BigInt=="function"&&eut({target:"BigInt",stat:!0,forced:!0},{range:function(t,i,o){return new tut(t,i,o,"bigint",BigInt(0),BigInt(1))}})});var sF=I((YYt,ple)=>{"use strict";f();Zw();WS();var fle=Rt(),rut=Ti(),hle=It(),iut=Object,nut=TypeError,aut=fle("Map"),out=fle("WeakMap"),lT=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=rut(null)};lT.prototype.get=function(e,t){return this[e]||(this[e]=t())};lT.prototype.next=function(e,t,i){var o=i?this.objectsByIndex[e]||(this.objectsByIndex[e]=new out):this.primitives||(this.primitives=new aut),c=o.get(t);return c||o.set(t,c=new lT),c};var dle=new lT;ple.exports=function(){var e=dle,t=arguments.length,i,o;for(i=0;i<t;i++)hle(o=arguments[i])&&(e=e.next(i,o,!0));if(this===iut&&e===dle)throw new nut("Composite keys must contain a non-primitive component");for(i=0;i<t;i++)hle(o=arguments[i])||(e=e.next(i,o,!1));return e}});var vle=I(()=>{"use strict";f();var sut=X(),lut=On(),uut=sF(),cut=Rt(),mle=Ti(),hut=Object,dut=function(){var e=cut("Object","freeze");return e?e(mle(null)):mle(null)};sut({global:!0,forced:!0},{compositeKey:function(){return lut(uut,hut,arguments).get("object",dut)}})});var yle=I(()=>{"use strict";f();var fut=X(),put=sF(),gle=Rt(),mut=On();fut({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?gle("Symbol").for(arguments[0]):mut(put,null,arguments).get("symbol",gle("Symbol"))}})});var _le=I(()=>{"use strict";f();nR()});var xle=I(()=>{"use strict";f();var vut=X(),gut=Ue(),yut=gut(DataView.prototype.getUint8);vut({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return yut(this,t)}})});var ble=I(()=>{"use strict";f();lR()});var wle=I(()=>{"use strict";f();var _ut=X(),xut=Ue(),but=aR(),wut=Np(),Sut=YD(),Tut=xut(DataView.prototype.setUint8);_ut({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,i){but(this);var o=wut(t);return Tut(this,o,Sut(i))}})});var qle=I(()=>{"use strict";f();var Eut=X(),cT=St(),Aut=Rt(),Sle=Ot(),qut=ea(),Tle=wr(),Iut=Uo(),Put=Wr(),Ele=Ct(),Ale=gr(),lF=UL(),Cut=Aut("SuppressedError"),Mut=ReferenceError,Rut=Ele("dispose"),Out=Ele("toStringTag"),dT="DisposableStack",kut=Ale.set,hT=Ale.getterFor(dT),uF="sync-dispose",B_="disposed",Dut="pending",uT=function(e){var t=hT(e);if(t.state===B_)throw new Mut(dT+" already disposed");return t},cF=function(){kut(qut(this,xm),{type:dT,state:Dut,stack:[]}),cT||(this.disposed=!1)},xm=cF.prototype;Iut(xm,{dispose:function(){var t=hT(this);if(t.state!==B_){t.state=B_,cT||(this.disposed=!0);for(var i=t.stack,o=i.length,c=!1,a;o;){var v=i[--o];i[o]=null;try{v()}catch(b){c?a=new Cut(b,a):(c=!0,a=b)}}if(t.stack=null,c)throw a}},use:function(t){return lF(uT(this),t,uF),t},adopt:function(t,i){var o=uT(this);return Sle(i),lF(o,void 0,uF,function(){i(t)}),t},defer:function(t){var i=uT(this);Sle(t),lF(i,void 0,uF,t)},move:function(){var t=uT(this),i=new cF;return hT(i).stack=t.stack,t.stack=[],t.state=B_,cT||(this.disposed=!0),i}});cT&&Put(xm,"disposed",{configurable:!0,get:function(){return hT(this).state===B_}});Tle(xm,Rut,xm.dispose,{name:"dispose"});Tle(xm,Out,dT,{nonWritable:!0});Eut({global:!0,constructor:!0},{DisposableStack:cF})});var Mle=I(()=>{"use strict";f();var Lut=X(),Ple=Rt(),Fut=It(),zut=_a(),Nut=Ze(),Cle="Error",dF="DOMException",But=Object.setPrototypeOf||{}.__proto__,Ile=Ple(dF),hF=Error,fT=hF.isError,jut=!fT||!But||Nut(function(){return Ile&&!fT(new Ile(dF))||!fT(new hF(Cle,{cause:function(){}}))||fT(Ple("Object","create")(hF.prototype))});Lut({target:"Error",stat:!0,sham:!0,forced:jut},{isError:function(t){if(!Fut(t))return!1;var i=zut(t);return i===Cle||i===dF}})});var fF=I((SJt,Rle)=>{"use strict";f();var Uut=Ue(),Vut=Ot();Rle.exports=function(){return Uut(Vut(this))}});var Ole=I(()=>{"use strict";f();var $ut=X(),Gut=fF();$ut({target:"Function",proto:!0,forced:!0},{demethodize:Gut})});var Dle=I(()=>{"use strict";f();var Wut=X(),Zut=Ue(),Kut=Wt(),Hut=wy(),Xut=Zt(),Yut=St(),Jut=Object.getOwnPropertyDescriptor,kle=/^\s*class\b/,Qut=Zut(kle.exec),ect=function(e){try{if(!Yut||!Qut(kle,Hut(e)))return!1}catch(i){}var t=Jut(e,"prototype");return!!t&&Xut(t,"writable")&&!t.writable};Wut({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return Kut(t)&&!ect(t)}})});var Lle=I(()=>{"use strict";f();var tct=X(),rct=bs();tct({target:"Function",stat:!0,forced:!0},{isConstructor:rct})});var Nle=I(()=>{"use strict";f();var ict=Ct(),nct=Dr().f,Fle=ict("metadata"),zle=Function.prototype;zle[Fle]===void 0&&nct(zle,Fle,{value:null})});var Ble=I(()=>{"use strict";f();var act=X(),oct=fF();act({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:oct})});var jle=I(()=>{"use strict";f();kR()});var Ule=I(()=>{"use strict";f();NR()});var pF=I((WJt,Vle)=>{"use strict";f();Uw();var sct=ot(),lct=Rc().IteratorPrototype.map,uct=function(e,t){return[t,e]};Vle.exports=function(){return sct(lct,this,uct)}});var $le=I(()=>{"use strict";f();var cct=X(),hct=pF();cct({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:hct})});var Zle=I(()=>{"use strict";f();var dct=X(),Gle=ot(),fct=Ot(),Wle=lt(),pct=ol(),mct=jc(),vct=nn(),gct=Array,yct=mct(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,i=this.iterables;if(t>=i.length)return this.done=!0,vct(void 0,!0);var o=i[t];this.iterables[t]=null,e=this.iterator=Gle(o.method,o.iterable),this.next=e.next}var c=Wle(Gle(this.next,e));if(c.done){this.iterator=null,this.next=null;continue}return c}},!1,!0);dct({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,i=gct(t),o=0;o<t;o++){var c=Wle(arguments[o]);i[o]={iterable:c,method:fct(pct(c))}}return new yct({iterables:i,nextIterableIndex:0,iterator:null,next:null})}})});var Xle=I(()=>{"use strict";f();var _ct=ot(),xct=wr(),bct=Si(),wct=Zt(),Sct=Ct(),Kle=Rc().IteratorPrototype,Hle=Sct("dispose");wct(Kle,Hle)||xct(Kle,Hle,function(){var e=bct(this,"return");e&&_ct(e,this)})});var Yle=I(()=>{"use strict";f();$R()});var Jle=I(()=>{"use strict";f();WR()});var Qle=I(()=>{"use strict";f();KR()});var eue=I(()=>{"use strict";f();XR()});var tue=I(()=>{"use strict";f();rO()});var rue=I(()=>{"use strict";f();nO()});var iue=I(()=>{"use strict";f();aO()});var nue=I(()=>{"use strict";f();var Tct=X(),Ect=pF();Tct({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:Ect})});var aue=I(()=>{"use strict";f();Uw()});var sue=I(()=>{"use strict";f();var Act=X(),oue=sT(),qct=TypeError;Act({target:"Iterator",stat:!0,forced:!0},{range:function(t,i,o){if(typeof t=="number")return new oue(t,i,o,"number",0,1);if(typeof t=="bigint")return new oue(t,i,o,"bigint",BigInt(0),BigInt(1));throw new qct("Incorrect Iterator.range arguments")}})});var lue=I(()=>{"use strict";f();lO()});var uue=I(()=>{"use strict";f();cO()});var cue=I(()=>{"use strict";f();dO()});var hue=I(()=>{"use strict";f();fO()});var fue=I(()=>{"use strict";f();var Ict=X(),Pct=lt(),Cct=D_(),Mct=eF(),due=ti();Ict({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new Mct(due(new Cct(due(Pct(this)))))}})});var mF=I((KQt,pue)=>{"use strict";f();var Rct=Ze();pue.exports=!Rct(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var vF=I((XQt,mue)=>{"use strict";f();var Oct=It(),kct=gr().get;mue.exports=function(t){if(!Oct(t))return!1;var i=kct(t);return!!i&&i.type==="RawJSON"}});var vue=I(()=>{"use strict";f();var Dct=X(),Lct=mF(),Fct=vF();Dct({target:"JSON",stat:!0,forced:!Lct},{isRawJSON:Fct})});var yF=I((ter,xue)=>{"use strict";f();var gF=Ue(),zct=Zt(),pT=SyntaxError,Nct=parseInt,Bct=String.fromCharCode,jct=gF("".charAt),gue=gF("".slice),yue=gF(/./.exec),_ue={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},Uct=/^[\da-f]{4}$/i,Vct=/^[\u0000-\u001F]$/;xue.exports=function(e,t){for(var i=!0,o="";t<e.length;){var c=jct(e,t);if(c==="\\"){var a=gue(e,t,t+2);if(zct(_ue,a))o+=_ue[a],t+=2;else if(a==="\\u"){t+=2;var v=gue(e,t,t+4);if(!yue(Uct,v))throw new pT("Bad Unicode escape at: "+t);o+=Bct(Nct(v,16)),t+=4}else throw new pT("Unknown escape sequence: \""+a+"\"")}else if(c==="\""){i=!1,t++;break}else{if(yue(Vct,c))throw new pT("Bad control character in string literal at: "+t);o+=c,t++}}if(i)throw new pT("Unterminated string at: "+t);return{value:o,end:t}}});var Iue=I(()=>{"use strict";f();var $ct=X(),Gct=St(),AF=at(),Wct=Rt(),mT=Ue(),Zct=ot(),Aue=Wt(),Kct=It(),Hct=xs(),Xct=Zt(),Yct=zt(),bue=sr(),SF=Bo(),que=Ze(),Jct=yF(),Qct=wc(),wue=AF.JSON,eht=AF.Number,bm=AF.SyntaxError,qF=wue&&wue.parse,tht=Wct("Object","keys"),rht=Object.getOwnPropertyDescriptor,Dn=mT("".charAt),_F=mT("".slice),xF=mT(/./.exec),Sue=mT([].push),bF=/^\d$/,iht=/^[1-9]$/,nht=/^[\d-]$/,j_=/^[\t\n\r ]$/,wF=0,Tue=1,aht=function(e,t){e=Yct(e);var i=new EF(e,0,""),o=i.parse(),c=o.value,a=i.skip(j_,o.end);if(a<e.length)throw new bm("Unexpected extra character: \""+Dn(e,a)+"\" after the parsed data at: "+a);return Aue(t)?TF({"":c},"",t,o):c},TF=function(e,t,i,o){var c=e[t],a=o&&c===o.value,v=a&&typeof o.source=="string"?{source:o.source}:{},b,q,M,O,D;if(Kct(c)){var U=Hct(c),ne=a?o.nodes:U?[]:{};if(U)for(b=ne.length,M=bue(c),O=0;O<M;O++)Eue(c,O,TF(c,""+O,i,O<b?ne[O]:void 0));else for(q=tht(c),M=bue(q),O=0;O<M;O++)D=q[O],Eue(c,D,TF(c,D,i,Xct(ne,D)?ne[D]:void 0))}return Zct(i,e,t,c,v)},Eue=function(e,t,i){if(Gct){var o=rht(e,t);if(o&&!o.configurable)return}i===void 0?delete e[t]:SF(e,t,i)},oht=function(e,t,i,o){this.value=e,this.end=t,this.source=i,this.nodes=o},EF=function(e,t){this.source=e,this.index=t};EF.prototype={fork:function(e){return new EF(this.source,e)},parse:function(){var e=this.source,t=this.skip(j_,this.index),i=this.fork(t),o=Dn(e,t);if(xF(nht,o))return i.number();switch(o){case"{":return i.object();case"[":return i.array();case"\"":return i.string();case"t":return i.keyword(!0);case"f":return i.keyword(!1);case"n":return i.keyword(null)}throw new bm("Unexpected character: \""+o+"\" at: "+t)},node:function(e,t,i,o,c){return new oht(t,o,e?null:_F(this.source,i,o),c)},object:function(){for(var e=this.source,t=this.index+1,i=!1,o={},c={};t<e.length;){if(t=this.until(["\"","}"],t),Dn(e,t)==="}"&&!i){t++;break}var a=this.fork(t).string(),v=a.value;t=a.end,t=this.until([":"],t)+1,t=this.skip(j_,t),a=this.fork(t).parse(),SF(c,v,a),SF(o,v,a.value),t=this.until([",","}"],a.end);var b=Dn(e,t);if(b===",")i=!0,t++;else if(b==="}"){t++;break}}return this.node(Tue,o,this.index,t,c)},array:function(){for(var e=this.source,t=this.index+1,i=!1,o=[],c=[];t<e.length;){if(t=this.skip(j_,t),Dn(e,t)==="]"&&!i){t++;break}var a=this.fork(t).parse();if(Sue(c,a),Sue(o,a.value),t=this.until([",","]"],a.end),Dn(e,t)===",")i=!0,t++;else if(Dn(e,t)==="]"){t++;break}}return this.node(Tue,o,this.index,t,c)},string:function(){var e=this.index,t=Jct(this.source,this.index+1);return this.node(wF,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,i=t;if(Dn(e,i)==="-"&&i++,Dn(e,i)==="0")i++;else if(xF(iht,Dn(e,i)))i=this.skip(bF,i+1);else throw new bm("Failed to parse number at: "+i);if(Dn(e,i)==="."&&(i=this.skip(bF,i+1)),Dn(e,i)==="e"||Dn(e,i)==="E"){i++,(Dn(e,i)==="+"||Dn(e,i)==="-")&&i++;var o=i;if(i=this.skip(bF,i),o===i)throw new bm("Failed to parse number's exponent value at: "+i)}return this.node(wF,eht(_F(e,t,i)),t,i)},keyword:function(e){var t=""+e,i=this.index,o=i+t.length;if(_F(this.source,i,o)!==t)throw new bm("Failed to parse value at: "+i);return this.node(wF,e,i,o)},skip:function(e,t){for(var i=this.source;t<i.length&&xF(e,Dn(i,t));t++);return t},until:function(e,t){t=this.skip(j_,t);for(var i=Dn(this.source,t),o=0;o<e.length;o++)if(e[o]===i)return t;throw new bm("Unexpected character: \""+i+"\" at: "+t)}};var sht=que(function(){var e="9007199254740993",t;return qF(e,function(i,o,c){t=c.source}),t!==e}),lht=Qct&&!que(function(){return 1/qF("-0 \t")!==-1/0});$ct({target:"JSON",stat:!0,forced:sht},{parse:function(t,i){return lht&&!Aue(i)?qF(t):aht(t,i)}})});var Lue=I(()=>{"use strict";f();var kue=X(),uht=gu(),Due=mF(),vT=Rt(),cht=ot(),MF=Ue(),hht=Wt(),dht=vF(),fht=zt(),pht=Bo(),mht=yF(),vht=j2(),ght=Tc(),yht=gr().set,_ht=String,Pue=SyntaxError,xht=vT("JSON","parse"),Cue=vT("JSON","stringify"),bht=vT("Object","create"),wht=vT("Object","freeze"),PF=MF("".charAt),IF=MF("".slice),Sht=MF([].push),CF=ght(),Mue=CF.length,Rue="Unacceptable as raw JSON",Oue=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};kue({target:"JSON",stat:!0,forced:!Due},{rawJSON:function(t){var i=fht(t);if(i===""||Oue(PF(i,0))||Oue(PF(i,i.length-1)))throw new Pue(Rue);var o=xht(i);if(typeof o=="object"&&o!==null)throw new Pue(Rue);var c=bht(null);return yht(c,{type:"RawJSON"}),pht(c,"rawJSON",i),uht?wht(c):c}});Cue&&kue({target:"JSON",stat:!0,arity:3,forced:!Due},{stringify:function(t,i,o){var c=vht(i),a=[],v=Cue(t,function(ne,ue){var fe=hht(c)?cht(c,this,_ht(ne),ue):ue;return dht(fe)?CF+(Sht(a,fe.rawJSON)-1):fe},o);if(typeof v!="string")return v;for(var b="",q=v.length,M=0;M<q;M++){var O=PF(v,M);if(O==="\""){var D=mht(v,++M).end-1,U=IF(v,M,D);b+=IF(U,0,Mue)===CF?a[IF(U,Mue)]:"\""+U+"\"",M=D}else b+=O}return b}})});var Ln=I((uer,Fue)=>{"use strict";f();var Tht=an().has;Fue.exports=function(e){return Tht(e),e}});var zue=I(()=>{"use strict";f();var Eht=X(),Aht=Ln(),qht=an().remove;Eht({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Aht(this),i=!0,o,c=0,a=arguments.length;c<a;c++)o=qht(t,arguments[c]),i=i&&o;return!!i}})});var Bue=I(()=>{"use strict";f();var Iht=X(),Pht=Ln(),RF=an(),Cht=RF.get,Mht=RF.has,Nue=RF.set;Iht({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,i){var o=Pht(this),c,a;return Mht(o,t)?(c=Cht(o,t),"update"in i&&(c=i.update(c,t,o),Nue(o,t,c)),c):(a=i.insert(t,o),Nue(o,t,a),a)}})});var jue=I(()=>{"use strict";f();var Rht=X(),Oht=Cr(),kht=Ln(),Dht=Vo();Rht({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var i=kht(this),o=Oht(t,arguments.length>1?arguments[1]:void 0);return Dht(i,function(c,a){if(!o(c,a,i))return!1},!0)!==!1}})});var Vue=I(()=>{"use strict";f();var Lht=X(),Fht=Cr(),zht=Ln(),Uue=an(),Nht=Vo(),Bht=Uue.Map,jht=Uue.set;Lht({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var i=zht(this),o=Fht(t,arguments.length>1?arguments[1]:void 0),c=new Bht;return Nht(i,function(a,v){o(a,v,i)&&jht(c,v,a)}),c}})});var $ue=I(()=>{"use strict";f();var Uht=X(),Vht=Cr(),$ht=Ln(),Ght=Vo();Uht({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var i=$ht(this),o=Vht(t,arguments.length>1?arguments[1]:void 0),c=Ght(i,function(a,v){if(o(a,v,i))return{value:a}},!0);return c&&c.value}})});var Gue=I(()=>{"use strict";f();var Wht=X(),Zht=Cr(),Kht=Ln(),Hht=Vo();Wht({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var i=Kht(this),o=Zht(t,arguments.length>1?arguments[1]:void 0),c=Hht(i,function(a,v){if(o(a,v,i))return{key:v}},!0);return c&&c.key}})});var U_=I((Per,Wue)=>{"use strict";f();var Xht=Cr(),Yht=lt(),Jht=tr(),Qht=li();Wue.exports=function(e,t,i){return function(c){var a=Jht(c),v=arguments.length,b=v>1?arguments[1]:void 0,q=b!==void 0,M=q?Xht(b,v>2?arguments[2]:void 0):void 0,O=new e,D=0;return Qht(a,function(U){var ne=q?M(U,D++):U;i?t(O,Yht(ne)[0],ne[1]):t(O,ne)}),O}}});var Kue=I(()=>{"use strict";f();var edt=X(),Zue=an(),tdt=U_();edt({target:"Map",stat:!0,forced:!0},{from:tdt(Zue.Map,Zue.set,!0)})});var Hue=I(()=>{"use strict";f();var rdt=X(),idt=Ln(),OF=an(),ndt=OF.get,adt=OF.has,odt=OF.set;rdt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,i){return adt(idt(this),t)?ndt(this,t):(odt(this,t,i),i)}})});var Xue=I(()=>{"use strict";f();var sdt=X(),ldt=Ot(),udt=Ln(),kF=an(),cdt=kF.get,hdt=kF.has,ddt=kF.set;sdt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,i){if(udt(this),ldt(i),hdt(this,t))return cdt(this,t);t===0&&1/t===-1/0&&(t=0);var o=i(t);return ddt(this,t,o),o}})});var Yue=I(()=>{"use strict";f();bO()});var Que=I((Ver,Jue)=>{"use strict";f();Jue.exports=function(e,t){return e===t||e!==e&&t!==t}});var ece=I(()=>{"use strict";f();var fdt=X(),pdt=Que(),mdt=Ln(),vdt=Vo();fdt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return vdt(mdt(this),function(i){if(pdt(i,t))return!0},!0)===!0}})});var rce=I(()=>{"use strict";f();var gdt=X(),ydt=ot(),_dt=li(),xdt=Wt(),tce=Ot(),bdt=an().Map;gdt({target:"Map",stat:!0,forced:!0},{keyBy:function(t,i){var o=xdt(this)?this:bdt,c=new o;tce(i);var a=tce(c.set);return _dt(t,function(v){ydt(a,c,i(v),v)}),c}})});var ice=I(()=>{"use strict";f();var wdt=X(),Sdt=Ln(),Tdt=Vo();wdt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var i=Tdt(Sdt(this),function(o,c){if(o===t)return{key:c}},!0);return i&&i.key}})});var ace=I(()=>{"use strict";f();var Edt=X(),Adt=Cr(),qdt=Ln(),nce=an(),Idt=Vo(),Pdt=nce.Map,Cdt=nce.set;Edt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var i=qdt(this),o=Adt(t,arguments.length>1?arguments[1]:void 0),c=new Pdt;return Idt(i,function(a,v){Cdt(c,o(a,v,i),a)}),c}})});var sce=I(()=>{"use strict";f();var Mdt=X(),Rdt=Cr(),Odt=Ln(),oce=an(),kdt=Vo(),Ddt=oce.Map,Ldt=oce.set;Mdt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var i=Odt(this),o=Rdt(t,arguments.length>1?arguments[1]:void 0),c=new Ddt;return kdt(i,function(a,v){Ldt(c,v,o(a,v,i))}),c}})});var lce=I(()=>{"use strict";f();var Fdt=X(),zdt=Ln(),Ndt=li(),Bdt=an().set;Fdt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var i=zdt(this),o=arguments.length,c=0;c<o;)Ndt(arguments[c++],function(a,v){Bdt(i,a,v)},{AS_ENTRIES:!0});return i}})});var V_=I((utr,uce)=>{"use strict";f();var jdt=lt();uce.exports=function(e,t,i){return function(){for(var c=new e,a=arguments.length,v=0;v<a;v++){var b=arguments[v];i?t(c,jdt(b)[0],b[1]):t(c,b)}return c}}});var hce=I(()=>{"use strict";f();var Udt=X(),cce=an(),Vdt=V_();Udt({target:"Map",stat:!0,forced:!0},{of:Vdt(cce.Map,cce.set,!0)})});var dce=I(()=>{"use strict";f();var $dt=X(),Gdt=Ot(),Wdt=Ln(),Zdt=Vo(),Kdt=TypeError;$dt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var i=Wdt(this),o=arguments.length<2,c=o?void 0:arguments[1];if(Gdt(t),Zdt(i,function(a,v){o?(o=!1,c=a):c=t(c,a,v,i)}),o)throw new Kdt("Reduce of empty map with no initial value");return c}})});var fce=I(()=>{"use strict";f();var Hdt=X(),Xdt=Cr(),Ydt=Ln(),Jdt=Vo();Hdt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var i=Ydt(this),o=Xdt(t,arguments.length>1?arguments[1]:void 0);return Jdt(i,function(c,a){if(o(c,a,i))return!0},!0)===!0}})});var mce=I(()=>{"use strict";f();var Qdt=X(),pce=Ot(),eft=Ln(),DF=an(),tft=TypeError,rft=DF.get,ift=DF.has,nft=DF.set;Qdt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,i){var o=eft(this),c=arguments.length;pce(i);var a=ift(o,t);if(!a&&c<3)throw new tft("Updating absent value");var v=a?rft(o,t):pce(c>2?arguments[2]:void 0)(t,o);return nft(o,t,i(v,t,o)),o}})});var _T=I((Str,vce)=>{"use strict";f();var gT=ot(),LF=Ot(),yT=Wt(),aft=lt(),oft=TypeError;vce.exports=function(t,i){var o=aft(this),c=LF(o.get),a=LF(o.has),v=LF(o.set),b=arguments.length>2?arguments[2]:void 0,q;if(!yT(i)&&!yT(b))throw new oft("At least one callback required");return gT(a,o,t)?(q=gT(c,o,t),yT(i)&&(q=i(q),gT(v,o,t,q))):yT(b)&&(q=b(),gT(v,o,t,q)),q}});var gce=I(()=>{"use strict";f();var sft=X(),lft=_T();sft({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:lft})});var yce=I(()=>{"use strict";f();var uft=X(),cft=_T();uft({target:"Map",proto:!0,real:!0,forced:!0},{upsert:cft})});var xce=I((Mtr,_ce)=>{"use strict";f();var hft=TypeError;_ce.exports=function(e){if(typeof e=="number")return e;throw new hft("Argument is not a number")}});var Sce=I(()=>{"use strict";f();var dft=X(),FF=xce(),bce=Wp(),wce=tS(),fft=RangeError,pft=Math.min,mft=Math.max;dft({target:"Math",stat:!0,forced:!0},{clamp:function(t,i,o){if(FF(t),bce(FF(i)),bce(FF(o)),wce(i,0)&&wce(o,-0)||i>o)throw new fft("`min` should be smaller than `max`");return pft(o,mft(i,t))}})});var Tce=I(()=>{"use strict";f();var vft=X();vft({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var Ece=I(()=>{"use strict";f();var gft=X(),yft=180/Math.PI;gft({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*yft}})});var zF=I((Utr,Ace)=>{"use strict";f();Ace.exports=function(t,i,o,c,a){var v=+t,b=+i,q=+o,M=+c,O=+a;return v!==v||b!==b||q!==q||M!==M||O!==O?NaN:v===1/0||v===-1/0?v:(v-b)*(O-M)/(q-b)+M}});var qce=I(()=>{"use strict";f();var _ft=X(),xft=zF(),bft=qw();_ft({target:"Math",stat:!0,forced:!0},{fscale:function(t,i,o,c,a){return bft(xft(t,i,o,c,a))}})});var Ice=I(()=>{"use strict";f();EO()});var Pce=I(()=>{"use strict";f();var wft=X();wft({target:"Math",stat:!0,forced:!0},{iaddh:function(t,i,o,c){var a=t>>>0,v=i>>>0,b=o>>>0;return v+(c>>>0)+((a&b|(a|b)&~(a+b>>>0))>>>31)|0}})});var Cce=I(()=>{"use strict";f();var Sft=X();Sft({target:"Math",stat:!0,forced:!0},{imulh:function(t,i){var o=65535,c=+t,a=+i,v=c&o,b=a&o,q=c>>16,M=a>>16,O=(q*b>>>0)+(v*b>>>16);return q*M+(O>>16)+((v*M>>>0)+(O&o)>>16)}})});var Mce=I(()=>{"use strict";f();var Tft=X();Tft({target:"Math",stat:!0,forced:!0},{isubh:function(t,i,o,c){var a=t>>>0,v=i>>>0,b=o>>>0;return v-(c>>>0)-((~a&b|~(a^b)&a-b>>>0)>>>31)|0}})});var Rce=I(()=>{"use strict";f();var Eft=X();Eft({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var Oce=I(()=>{"use strict";f();var Aft=X(),qft=Math.PI/180;Aft({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*qft}})});var kce=I(()=>{"use strict";f();var Ift=X(),Pft=zF();Ift({target:"Math",stat:!0,forced:!0},{scale:Pft})});var zce=I(()=>{"use strict";f();var Cft=X(),Mft=lt(),Rft=OO(),Oft=Oc(),kft=nn(),Dce=gr(),Lce="Seeded Random",Fce=Lce+" Generator",Dft="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",Lft=Dce.set,Fft=Dce.getterFor(Fce),zft=TypeError,Nft=Oft(function(t){Lft(this,{type:Fce,seed:t%2147483647})},Lce,function(){var t=Fft(this),i=t.seed=(t.seed*1103515245+12345)%2147483647;return kft((i&1073741823)/1073741823,!1)});Cft({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var i=Mft(t).seed;if(!Rft(i))throw new zft(Dft);return new Nft(i)}})});var Nce=I(()=>{"use strict";f();var Bft=X();Bft({target:"Math",stat:!0,forced:!0},{signbit:function(t){var i=+t;return i===i&&i===0?1/i===-1/0:i<0}})});var $ce=I(()=>{"use strict";f();var jft=X(),Uft=Ue(),Vft=li(),$ft=RangeError,Gft=TypeError,$o=1/0,Wft=NaN,Pd=Math.abs,UF=Math.pow,Bce=Uft([].push),$_=UF(2,1023),Zft=UF(2,53)-1,jce=Number.MAX_VALUE,Uce=UF(2,971),G_={},NF={},BF={},jF={},Vce={},xT=function(e,t){var i=e+t,o=t-(i-e);return{hi:i,lo:o}};jft({target:"Math",stat:!0},{sumPrecise:function(t){var i=[],o=0,c=jF;switch(Vft(t,function(xe){if(++o>=Zft)throw new $ft("Maximum allowed index exceeded");if(typeof xe!="number")throw new Gft("Value is not a number");c!==G_&&(xe!==xe?c=G_:xe===$o?c=c===NF?G_:BF:xe===-$o?c=c===BF?G_:NF:(xe!==0||1/xe===$o)&&(c===jF||c===Vce)&&(c=Vce,Bce(i,xe)))}),c){case G_:return Wft;case NF:return-$o;case BF:return $o;case jF:return-0}for(var a=[],v=0,b,q,M,O,D,U,ne=0;ne<i.length;ne++){b=i[ne];for(var ue=0,fe=0;fe<a.length;fe++){if(q=a[fe],Pd(b)<Pd(q)&&(U=b,b=q,q=U),M=xT(b,q),O=M.hi,D=M.lo,Pd(O)===$o){var H=O===$o?1:-1;v+=H,b=b-H*$_-H*$_,Pd(b)<Pd(q)&&(U=b,b=q,q=U),M=xT(b,q),O=M.hi,D=M.lo}D!==0&&(a[ue++]=D),b=O}a.length=ue,b!==0&&Bce(a,b)}var J=a.length-1;if(O=0,D=0,v!==0){var re=J>=0?a[J]:0;if(J--,Pd(v)>1||v>0&&re>0||v<0&&re<0)return v>0?$o:-$o;if(M=xT(v*$_,re/2),O=M.hi,D=M.lo,D*=2,Pd(2*O)===$o)return O>0?O===$_&&D===-(Uce/2)&&J>=0&&a[J]<0?jce:$o:O===-$_&&D===Uce/2&&J>=0&&a[J]>0?-jce:-$o;D!==0&&(a[++J]=D,D=0),O*=2}for(;J>=0&&(M=xT(O,a[J--]),O=M.hi,D=M.lo,D===0););return J>=0&&(D<0&&a[J]<0||D>0&&a[J]>0)&&(q=D*2,b=O+q,q===b-O&&(O=b)),O}})});var Gce=I(()=>{"use strict";f();var Kft=X();Kft({target:"Math",stat:!0,forced:!0},{umulh:function(t,i){var o=65535,c=+t,a=+i,v=c&o,b=a&o,q=c>>>16,M=a>>>16,O=(q*b>>>0)+(v*b>>>16);return q*M+(O>>>16)+((v*M>>>0)+(O&o)>>>16)}})});var Kce=I(()=>{"use strict";f();var Hft=X(),Z_=Ue(),Xft=Gr(),W_="Invalid number representation",Yft="Invalid radix",Jft=RangeError,bT=SyntaxError,Qft=TypeError,Wce=parseInt,ept=Math.pow,Zce=/^[\d.a-z]+$/,tpt=Z_("".charAt),rpt=Z_(Zce.exec),ipt=Z_(1 .toString),npt=Z_("".slice),apt=Z_("".split);Hft({target:"Number",stat:!0,forced:!0},{fromString:function(t,i){var o=1;if(typeof t!="string")throw new Qft(W_);if(!t.length)throw new bT(W_);if(tpt(t,0)==="-"&&(o=-1,t=npt(t,1),!t.length))throw new bT(W_);var c=i===void 0?10:Xft(i);if(c<2||c>36)throw new Jft(Yft);if(!rpt(Zce,t))throw new bT(W_);var a=apt(t,"."),v=Wce(a[0],c);if(a.length>1&&(v+=Wce(a[1],c)/ept(c,a[1].length)),c===10&&ipt(v,c)!==t)throw new bT(W_);return o*v}})});var Hce=I(()=>{"use strict";f();var opt=X(),spt=sT();opt({target:"Number",stat:!0,forced:!0},{range:function(t,i,o){return new spt(t,i,o,"number",0,1)}})});var Xce=I(()=>{"use strict";f();WO()});var ST=I((Drr,Qce)=>{"use strict";f();var Yce=gr(),lpt=Oc(),wT=nn(),upt=Zt(),cpt=ld(),hpt=tr(),Jce="Object Iterator",dpt=Yce.set,fpt=Yce.getterFor(Jce);Qce.exports=lpt(function(t,i){var o=hpt(t);dpt(this,{type:Jce,mode:i,object:o,keys:cpt(o),index:0})},"Object",function(){for(var t=fpt(this),i=t.keys;;){if(i===null||t.index>=i.length)return t.object=t.keys=null,wT(void 0,!0);var o=i[t.index++],c=t.object;if(upt(c,o)){switch(t.mode){case"keys":return wT(o,!1);case"values":return wT(c[o],!1)}return wT([o,c[o]],!1)}}})});var ehe=I(()=>{"use strict";f();var ppt=X(),mpt=ST();ppt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new mpt(t,"entries")}})});var the=I(()=>{"use strict";f();var vpt=X(),gpt=ST();vpt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new gpt(t,"keys")}})});var rhe=I(()=>{"use strict";f();var ypt=X(),_pt=ST();ypt({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new _pt(t,"values")}})});var ihe=I(()=>{"use strict";f();GO()});var fhe=I(()=>{"use strict";f();var xpt=X(),TT=ot(),K_=St(),bpt=Dc(),nhe=Ot(),wpt=lt(),Spt=ea(),ahe=Wt(),Tpt=Fa(),Ept=It(),ET=Si(),Apt=wr(),VF=Uo(),ohe=Wr(),wm=pk(),qpt=Ct(),she=gr(),Ipt=qpt("observable"),$F="Observable",lhe="Subscription",uhe="SubscriptionObserver",GF=she.getterFor,WF=she.set,Ppt=GF($F),che=GF(lhe),AT=GF(uhe),hhe=function(e){this.observer=wpt(e),this.cleanup=null,this.subscriptionObserver=null};hhe.prototype={type:lhe,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){wm(t)}}},close:function(){if(!K_){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var ZF=function(e,t){var i=WF(this,new hhe(e)),o;K_||(this.closed=!1);try{(o=ET(e,"start"))&&TT(o,e,this)}catch(b){wm(b)}if(!i.isClosed()){var c=i.subscriptionObserver=new KF(i);try{var a=t(c),v=a;Tpt(a)||(i.cleanup=ahe(a.unsubscribe)?function(){v.unsubscribe()}:nhe(a))}catch(b){c.error(b);return}i.isClosed()&&i.clean()}};ZF.prototype=VF({},{unsubscribe:function(){var t=che(this);t.isClosed()||(t.close(),t.clean())}});K_&&ohe(ZF.prototype,"closed",{configurable:!0,get:function(){return che(this).isClosed()}});var KF=function(e){WF(this,{type:uhe,subscriptionState:e}),K_||(this.closed=!1)};KF.prototype=VF({},{next:function(t){var i=AT(this).subscriptionState;if(!i.isClosed()){var o=i.observer;try{var c=ET(o,"next");c&&TT(c,o,t)}catch(a){wm(a)}}},error:function(t){var i=AT(this).subscriptionState;if(!i.isClosed()){var o=i.observer;i.close();try{var c=ET(o,"error");c?TT(c,o,t):wm(t)}catch(a){wm(a)}i.clean()}},complete:function(){var t=AT(this).subscriptionState;if(!t.isClosed()){var i=t.observer;t.close();try{var o=ET(i,"complete");o&&TT(o,i)}catch(c){wm(c)}t.clean()}}});K_&&ohe(KF.prototype,"closed",{configurable:!0,get:function(){return AT(this).subscriptionState.isClosed()}});var dhe=function(t){Spt(this,HF),WF(this,{type:$F,subscriber:nhe(t)})},HF=dhe.prototype;VF(HF,{subscribe:function(t){var i=arguments.length;return new ZF(ahe(t)?{next:t,error:i>1?arguments[1]:void 0,complete:i>2?arguments[2]:void 0}:Ept(t)?t:{},Ppt(this).subscriber)}});Apt(HF,Ipt,function(){return this});xpt({global:!0,constructor:!0,forced:!0},{Observable:dhe});bpt($F)});var mhe=I(()=>{"use strict";f();var Cpt=X(),Mpt=Rt(),Rpt=ot(),phe=lt(),Opt=bs(),kpt=Cc(),Dpt=Si(),Lpt=li(),Fpt=Ct(),zpt=Fpt("observable");Cpt({target:"Observable",stat:!0,forced:!0},{from:function(t){var i=Opt(this)?this:Mpt("Observable"),o=Dpt(phe(t),zpt);if(o){var c=phe(Rpt(o,t));return c.constructor===i?c:new i(function(v){return c.subscribe(v)})}var a=kpt(t);return new i(function(v){Lpt(a,function(b,q){if(v.next(b),v.closed)return q()},{IS_ITERATOR:!0,INTERRUPTED:!0}),v.complete()})}})});var ghe=I(()=>{"use strict";f();var Npt=X(),vhe=Rt(),Bpt=bs(),jpt=vhe("Array");Npt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=Bpt(this)?this:vhe("Observable"),i=arguments.length,o=jpt(i),c=0;c<i;)o[c]=arguments[c++];return new t(function(a){for(var v=0;v<i;v++)if(a.next(o[v]),a.closed)return;a.complete()})}})});var yhe=I(()=>{"use strict";f();fhe();mhe();ghe()});var _he=I(()=>{"use strict";f();Ik()});var xhe=I(()=>{"use strict";f();Pk()});var bhe=I(()=>{"use strict";f();Ok()});var whe=I(()=>{"use strict";f();kk()});var ml=I((_ir,Ahe)=>{"use strict";f();Zw();WS();var Ehe=Rt(),Upt=Ue(),Vpt=lu(),She=Ehe("Map"),$pt=Ehe("WeakMap"),Gpt=Upt([].push),The=Vpt("metadata"),XF=The.store||(The.store=new $pt),H_=function(e,t,i){var o=XF.get(e);if(!o){if(!i)return;XF.set(e,o=new She)}var c=o.get(t);if(!c){if(!i)return;o.set(t,c=new She)}return c},Wpt=function(e,t,i){var o=H_(t,i,!1);return o===void 0?!1:o.has(e)},Zpt=function(e,t,i){var o=H_(t,i,!1);return o===void 0?void 0:o.get(e)},Kpt=function(e,t,i,o){H_(i,o,!0).set(e,t)},Hpt=function(e,t){var i=H_(e,t,!1),o=[];return i&&i.forEach(function(c,a){Gpt(o,a)}),o},Xpt=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};Ahe.exports={store:XF,getMap:H_,has:Wpt,get:Zpt,set:Kpt,keys:Hpt,toKey:Xpt}});var Ihe=I(()=>{"use strict";f();var Ypt=X(),qhe=ml(),Jpt=lt(),Qpt=qhe.toKey,emt=qhe.set;Ypt({target:"Reflect",stat:!0},{defineMetadata:function(t,i,o){var c=arguments.length<4?void 0:Qpt(arguments[3]);emt(t,i,Jpt(o),c)}})});var Che=I(()=>{"use strict";f();var tmt=X(),YF=ml(),rmt=lt(),imt=YF.toKey,nmt=YF.getMap,Phe=YF.store;tmt({target:"Reflect",stat:!0},{deleteMetadata:function(t,i){var o=arguments.length<3?void 0:imt(arguments[2]),c=nmt(rmt(i),o,!1);if(c===void 0||!c.delete(t))return!1;if(c.size)return!0;var a=Phe.get(i);return a.delete(o),!!a.size||Phe.delete(i)}})});var Rhe=I(()=>{"use strict";f();var amt=X(),JF=ml(),omt=lt(),smt=Wi(),lmt=JF.has,umt=JF.get,cmt=JF.toKey,Mhe=function(e,t,i){var o=lmt(e,t,i);if(o)return umt(e,t,i);var c=smt(t);return c!==null?Mhe(e,c,i):void 0};amt({target:"Reflect",stat:!0},{getMetadata:function(t,i){var o=arguments.length<3?void 0:cmt(arguments[2]);return Mhe(t,omt(i),o)}})});var Lhe=I(()=>{"use strict";f();var hmt=X(),Ohe=Ue(),khe=ml(),dmt=lt(),fmt=Wi(),pmt=eT(),mmt=Ohe(pmt),vmt=Ohe([].concat),gmt=khe.keys,ymt=khe.toKey,Dhe=function(e,t){var i=gmt(e,t),o=fmt(e);if(o===null)return i;var c=Dhe(o,t);return c.length?i.length?mmt(vmt(i,c)):c:i};hmt({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var i=arguments.length<2?void 0:ymt(arguments[1]);return Dhe(dmt(t),i)}})});var zhe=I(()=>{"use strict";f();var _mt=X(),Fhe=ml(),xmt=lt(),bmt=Fhe.get,wmt=Fhe.toKey;_mt({target:"Reflect",stat:!0},{getOwnMetadata:function(t,i){var o=arguments.length<3?void 0:wmt(arguments[2]);return bmt(t,xmt(i),o)}})});var Bhe=I(()=>{"use strict";f();var Smt=X(),Nhe=ml(),Tmt=lt(),Emt=Nhe.keys,Amt=Nhe.toKey;Smt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var i=arguments.length<2?void 0:Amt(arguments[1]);return Emt(Tmt(t),i)}})});var Vhe=I(()=>{"use strict";f();var qmt=X(),jhe=ml(),Imt=lt(),Pmt=Wi(),Cmt=jhe.has,Mmt=jhe.toKey,Uhe=function(e,t,i){var o=Cmt(e,t,i);if(o)return!0;var c=Pmt(t);return c!==null?Uhe(e,c,i):!1};qmt({target:"Reflect",stat:!0},{hasMetadata:function(t,i){var o=arguments.length<3?void 0:Mmt(arguments[2]);return Uhe(t,Imt(i),o)}})});var Ghe=I(()=>{"use strict";f();var Rmt=X(),$he=ml(),Omt=lt(),kmt=$he.has,Dmt=$he.toKey;Rmt({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,i){var o=arguments.length<3?void 0:Dmt(arguments[2]);return kmt(t,Omt(i),o)}})});var Zhe=I(()=>{"use strict";f();var Lmt=X(),Whe=ml(),Fmt=lt(),zmt=Whe.toKey,Nmt=Whe.set;Lmt({target:"Reflect",stat:!0},{metadata:function(t,i){return function(c,a){Nmt(t,i,Fmt(c),zmt(a))}}})});var Khe=I(()=>{"use strict";f();Xk()});var Hhe=I(()=>{"use strict";f();var Bmt=X(),jmt=kn(),Umt=yn().add;Bmt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=jmt(this),i=0,o=arguments.length;i<o;i++)Umt(t,arguments[i]);return t}})});var Xhe=I(()=>{"use strict";f();var Vmt=X(),$mt=kn(),Gmt=yn().remove;Vmt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=$mt(this),i=!0,o,c=0,a=arguments.length;c<a;c++)o=Gmt(t,arguments[c]),i=i&&o;return!!i}})});var Yhe=I(()=>{"use strict";f();nD()});var Qhe=I((onr,Jhe)=>{"use strict";f();var Wmt=_a(),Zmt=Zt(),Kmt=Fa(),Hmt=Ct(),Xmt=pd(),Ymt=Hmt("iterator"),Jmt=Object;Jhe.exports=function(e){if(Kmt(e))return!1;var t=Jmt(e);return t[Ymt]!==void 0||"@@iterator"in t||Zmt(Xmt,Wmt(t))}});var Xc=I((lnr,tde)=>{"use strict";f();var Qmt=Rt(),ede=Wt(),evt=Qhe(),tvt=It(),rvt=Qmt("Set"),ivt=function(e){return tvt(e)&&typeof e.size=="number"&&ede(e.has)&&ede(e.keys)};tde.exports=function(e){return ivt(e)?e:evt(e)?new rvt(e):e}});var rde=I(()=>{"use strict";f();var nvt=X(),avt=ot(),ovt=Xc(),svt=iD();nvt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return avt(svt,this,ovt(t))}})});var ide=I(()=>{"use strict";f();var lvt=X(),uvt=Cr(),cvt=kn(),hvt=Ua();lvt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var i=cvt(this),o=uvt(t,arguments.length>1?arguments[1]:void 0);return hvt(i,function(c){if(!o(c,c,i))return!1},!0)!==!1}})});var ade=I(()=>{"use strict";f();var dvt=X(),fvt=Cr(),pvt=kn(),nde=yn(),mvt=Ua(),vvt=nde.Set,gvt=nde.add;dvt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var i=pvt(this),o=fvt(t,arguments.length>1?arguments[1]:void 0),c=new vvt;return mvt(i,function(a){o(a,a,i)&&gvt(c,a)}),c}})});var ode=I(()=>{"use strict";f();var yvt=X(),_vt=Cr(),xvt=kn(),bvt=Ua();yvt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var i=xvt(this),o=_vt(t,arguments.length>1?arguments[1]:void 0),c=bvt(i,function(a){if(o(a,a,i))return{value:a}},!0);return c&&c.value}})});var lde=I(()=>{"use strict";f();var wvt=X(),sde=yn(),Svt=U_();wvt({target:"Set",stat:!0,forced:!0},{from:Svt(sde.Set,sde.add,!1)})});var ude=I(()=>{"use strict";f();sD()});var cde=I(()=>{"use strict";f();var Tvt=X(),Evt=ot(),Avt=Xc(),qvt=oD();Tvt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return Evt(qvt,this,Avt(t))}})});var hde=I(()=>{"use strict";f();uD()});var dde=I(()=>{"use strict";f();var Ivt=X(),Pvt=ot(),Cvt=Xc(),Mvt=lD();Ivt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return Pvt(Mvt,this,Cvt(t))}})});var fde=I(()=>{"use strict";f();hD()});var pde=I(()=>{"use strict";f();var Rvt=X(),Ovt=ot(),kvt=Xc(),Dvt=cD();Rvt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return Ovt(Dvt,this,kvt(t))}})});var mde=I(()=>{"use strict";f();fD()});var vde=I(()=>{"use strict";f();var Lvt=X(),Fvt=ot(),zvt=Xc(),Nvt=dD();Lvt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return Fvt(Nvt,this,zvt(t))}})});var yde=I(()=>{"use strict";f();var Bvt=X(),gde=Ue(),jvt=kn(),Uvt=Ua(),Vvt=zt(),$vt=gde([].join),Gvt=gde([].push);Bvt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var i=jvt(this),o=t===void 0?",":Vvt(t),c=[];return Uvt(i,function(a){Gvt(c,a)}),$vt(c,o)}})});var xde=I(()=>{"use strict";f();var Wvt=X(),Zvt=Cr(),Kvt=kn(),_de=yn(),Hvt=Ua(),Xvt=_de.Set,Yvt=_de.add;Wvt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var i=Kvt(this),o=Zvt(t,arguments.length>1?arguments[1]:void 0),c=new Xvt;return Hvt(i,function(a){Yvt(c,o(a,a,i))}),c}})});var wde=I(()=>{"use strict";f();var Jvt=X(),bde=yn(),Qvt=V_();Jvt({target:"Set",stat:!0,forced:!0},{of:Qvt(bde.Set,bde.add,!1)})});var Sde=I(()=>{"use strict";f();var egt=X(),tgt=Ot(),rgt=kn(),igt=Ua(),ngt=TypeError;egt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var i=rgt(this),o=arguments.length<2,c=o?void 0:arguments[1];if(tgt(t),igt(i,function(a){o?(o=!1,c=a):c=t(c,a,a,i)}),o)throw new ngt("Reduce of empty set with no initial value");return c}})});var Tde=I(()=>{"use strict";f();var agt=X(),ogt=Cr(),sgt=kn(),lgt=Ua();agt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var i=sgt(this),o=ogt(t,arguments.length>1?arguments[1]:void 0);return lgt(i,function(c){if(o(c,c,i))return!0},!0)===!0}})});var Ede=I(()=>{"use strict";f();vD()});var Ade=I(()=>{"use strict";f();var ugt=X(),cgt=ot(),hgt=Xc(),dgt=mD();ugt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return cgt(dgt,this,hgt(t))}})});var qde=I(()=>{"use strict";f();yD()});var Ide=I(()=>{"use strict";f();var fgt=X(),pgt=ot(),mgt=Xc(),vgt=gD();fgt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return pgt(vgt,this,mgt(t))}})});var Pde=I(()=>{"use strict";f();var ggt=X(),ygt=Td().charAt,_gt=Nr(),xgt=Gr(),bgt=zt();ggt({target:"String",proto:!0,forced:!0},{at:function(t){var i=bgt(_gt(this)),o=i.length,c=xgt(t),a=c>=0?c:o+c;return a<0||a>=o?void 0:ygt(i,a)}})});var QF=I((Aar,Ode)=>{"use strict";f();var Rde=Ue(),wgt=$i(),Cde=zt(),Sgt=sr(),Tgt=TypeError,Mde=Rde([].push),Egt=Rde([].join);Ode.exports=function(t){var i=wgt(t),o=Sgt(i);if(!o)return"";for(var c=arguments.length,a=[],v=0;;){var b=i[v++];if(b===void 0)throw new Tgt("Incorrect template");if(Mde(a,Cde(b)),v===o)return Egt(a,"");v<c&&Mde(a,Cde(arguments[v]))}}});var kde=I(()=>{"use strict";f();var Agt=X(),qgt=QF();Agt({target:"String",stat:!0,forced:!0},{cooked:qgt})});var Nde=I(()=>{"use strict";f();var Igt=X(),Pgt=Oc(),Dde=nn(),Cgt=Nr(),Mgt=zt(),Lde=gr(),Fde=Td(),Rgt=Fde.codeAt,Ogt=Fde.charAt,zde="String Iterator",kgt=Lde.set,Dgt=Lde.getterFor(zde),Lgt=Pgt(function(t){kgt(this,{type:zde,string:t,index:0})},"String",function(){var t=Dgt(this),i=t.string,o=t.index,c;return o>=i.length?Dde(void 0,!0):(c=Ogt(i,o),t.index+=c.length,Dde({codePoint:Rgt(c,0),position:o},!1))});Igt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new Lgt(Mgt(Cgt(this)))}})});var vl=I((kar,Bde)=>{"use strict";f();var qT=Ue(),IT=WeakMap.prototype;Bde.exports={WeakMap,set:qT(IT.set),get:qT(IT.get),has:qT(IT.has),remove:qT(IT.delete)}});var Hde=I((Lar,Kde)=>{"use strict";f();var Fgt=Rt(),PT=Ue(),zgt=String.fromCharCode,Ngt=Fgt("String","fromCodePoint"),ez=PT("".charAt),Wde=PT("".charCodeAt),jde=PT("".indexOf),Ude=PT("".slice),rz=48,Zde=57,Vde=97,Bgt=102,$de=65,jgt=70,Gde=function(e,t){var i=Wde(e,t);return i>=rz&&i<=Zde},tz=function(e,t,i){if(i>=e.length)return-1;for(var o=0;t<i;t++){var c=Ugt(Wde(e,t));if(c===-1)return-1;o=o*16+c}return o},Ugt=function(e){return e>=rz&&e<=Zde?e-rz:e>=Vde&&e<=Bgt?e-Vde+10:e>=$de&&e<=jgt?e-$de+10:-1};Kde.exports=function(e){for(var t="",i=0,o=0,c;(o=jde(e,"\\",o))>-1;){if(t+=Ude(e,i,o),++o===e.length)return;var a=ez(e,o++);switch(a){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":o<e.length&&ez(e,o)===`
`&&++o;case`
`:case"\u2028":case"\u2029":break;case"0":if(Gde(e,o))return;t+="\0";break;case"x":if(c=tz(e,o,o+2),c===-1)return;o+=2,t+=zgt(c);break;case"u":if(o<e.length&&ez(e,o)==="{"){var v=jde(e,"}",++o);if(v===-1)return;c=tz(e,o,v),o=v+1}else c=tz(e,o,o+4),o+=4;if(c===-1||c>1114111)return;t+=Ngt(c);break;default:if(Gde(a,0))return;t+=a}i=o}return t+Ude(e,i)}});var afe=I(()=>{"use strict";f();var Vgt=gu(),$gt=X(),Ggt=Ey(),CT=Ue(),efe=On(),tfe=lt(),Wgt=tr(),Zgt=Wt(),Kgt=sr(),Hgt=Dr().f,Xgt=Na(),MT=vl(),Ygt=QF(),Jgt=Hde(),rfe=yd(),iz=new MT.WeakMap,Qgt=MT.get,eyt=MT.has,tyt=MT.set,nz=Array,X_=TypeError,Xde=Object.freeze||Object,ryt=Object.isFrozen,iyt=Math.min,Yde=CT("".charAt),ife=CT("".slice),nyt=CT("".split),Jde=CT(/./.exec),ayt=/([\n\u2028\u2029]|\r\n?)/g,oyt=RegExp("^["+rfe+"]*"),syt=RegExp("[^"+rfe+"]"),Qde="Invalid tag",lyt="Invalid opening line",uyt="Invalid closing line",cyt=function(e){var t=e.raw;if(Vgt&&!ryt(t))throw new X_("Raw template should be frozen");if(eyt(iz,t))return Qgt(iz,t);var i=hyt(t),o=fyt(i);return Hgt(o,"raw",{value:Xde(i)}),Xde(o),tyt(iz,t,o),o},hyt=function(e){var t=Wgt(e),i=Kgt(t),o=nz(i),c=nz(i),a=0,v,b,q,M;if(!i)throw new X_(Qde);for(;a<i;a++){var O=t[a];if(typeof O=="string")o[a]=nyt(O,ayt);else throw new X_(Qde)}for(a=0;a<i;a++){var D=a+1===i;if(v=o[a],a===0){if(v.length===1||v[0].length>0)throw new X_(lyt);v[1]=""}if(D){if(v.length===1||Jde(syt,v[v.length-1]))throw new X_(uyt);v[v.length-2]="",v[v.length-1]=""}for(var U=2;U<v.length;U+=2){var ne=v[U],ue=U+1===v.length&&!D,fe=Jde(oyt,ne)[0];if(!ue&&fe.length===ne.length){v[U]="";continue}b=dyt(fe,b)}}var H=b?b.length:0;for(a=0;a<i;a++){for(v=o[a],q=v[0],M=1;M<v.length;M+=2)q+=v[M]+ife(v[M+1],H);c[a]=q}return c},dyt=function(e,t){if(t===void 0||e===t)return e;for(var i=0,o=iyt(e.length,t.length);i<o&&Yde(e,i)===Yde(t,i);i++);return ife(e,0,i)},fyt=function(e){for(var t=0,i=e.length,o=nz(i);t<i;t++)o[t]=Jgt(e[t]);return o},nfe=function(e){return Ggt(function(t){var i=Xgt(arguments);return i[0]=cyt(tfe(t)),efe(e,this,i)},"")},pyt=nfe(Ygt);$gt({target:"String",stat:!0,forced:!0},{dedent:function(t){return tfe(t),Zgt(t)?nfe(t):efe(pyt,this,arguments)}})});var ofe=I(()=>{"use strict";f();bD()});var sfe=I(()=>{"use strict";f();PD()});var lfe=I(()=>{"use strict";f();ND()});var ufe=I(()=>{"use strict";f();WD()});var cfe=I(()=>{"use strict";f();var myt=at(),vyt=si(),gyt=Dr().f,yyt=mn().f,az=myt.Symbol;vyt("asyncDispose");az&&(Y_=yyt(az,"asyncDispose"),Y_.enumerable&&Y_.configurable&&Y_.writable&&gyt(az,"asyncDispose",{value:Y_.value,enumerable:!1,configurable:!1,writable:!1}));var Y_});var hfe=I(()=>{"use strict";f();var _yt=si();_yt("customMatcher")});var dfe=I(()=>{"use strict";f();var xyt=at(),byt=si(),wyt=Dr().f,Syt=mn().f,oz=xyt.Symbol;byt("dispose");oz&&(J_=Syt(oz,"dispose"),J_.enumerable&&J_.configurable&&J_.writable&&wyt(oz,"dispose",{value:J_.value,enumerable:!1,configurable:!1,writable:!1}));var J_});var lz=I((lor,ffe)=>{"use strict";f();var Tyt=Rt(),Eyt=Ue(),sz=Tyt("Symbol"),Ayt=sz.keyFor,qyt=Eyt(sz.prototype.valueOf);ffe.exports=sz.isRegisteredSymbol||function(t){try{return Ayt(qyt(t))!==void 0}catch(i){return!1}}});var pfe=I(()=>{"use strict";f();var Iyt=X(),Pyt=lz();Iyt({target:"Symbol",stat:!0},{isRegisteredSymbol:Pyt})});var mfe=I(()=>{"use strict";f();var Cyt=X(),Myt=lz();Cyt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Myt})});var hz=I((gor,bfe)=>{"use strict";f();var Ryt=lu(),_fe=Rt(),Oyt=Ue(),kyt=su(),Dyt=Ct(),OT=_fe("Symbol"),vfe=OT.isWellKnownSymbol,xfe=_fe("Object","getOwnPropertyNames"),Lyt=Oyt(OT.prototype.valueOf),gfe=Ryt("wks");for(RT=0,uz=xfe(OT),yfe=uz.length;RT<yfe;RT++)try{cz=uz[RT],kyt(OT[cz])&&Dyt(cz)}catch(e){}var cz,RT,uz,yfe;bfe.exports=function(t){if(vfe&&vfe(t))return!0;try{for(var i=Lyt(t),o=0,c=xfe(gfe),a=c.length;o<a;o++)if(gfe[c[o]]==i)return!0}catch(v){}return!1}});var wfe=I(()=>{"use strict";f();var Fyt=X(),zyt=hz();Fyt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:zyt})});var Sfe=I(()=>{"use strict";f();var Nyt=X(),Byt=hz();Nyt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Byt})});var Tfe=I(()=>{"use strict";f();var jyt=si();jyt("matcher")});var Efe=I(()=>{"use strict";f();var Uyt=si();Uyt("metadata")});var Afe=I(()=>{"use strict";f();var Vyt=si();Vyt("metadataKey")});var qfe=I(()=>{"use strict";f();var $yt=si();$yt("observable")});var Ife=I(()=>{"use strict";f();var Gyt=si();Gyt("patternMatch")});var Pfe=I(()=>{"use strict";f();var Wyt=si();Wyt("replaceAll")});var Mfe=I(()=>{"use strict";f();var Zyt=Rt(),Kyt=l_(),Hyt=zL(),Cfe=Jt(),Xyt=du(),Yyt=Cfe.aTypedArrayConstructor,Jyt=Cfe.exportTypedArrayStaticMethod;Jyt("fromAsync",function(t){var i=this,o=arguments.length,c=o>1?arguments[1]:void 0,a=o>2?arguments[2]:void 0;return new(Zyt("Promise"))(function(v){Kyt(i),v(Hyt(t,c,a))}).then(function(v){return Xyt(Yyt(i),v)})},!0)});var Rfe=I(()=>{"use strict";f();sL()});var kfe=I(()=>{"use strict";f();var Ofe=Jt(),Qyt=Ei().filterReject,e_t=OS(),t_t=Ofe.aTypedArray,r_t=Ofe.exportTypedArrayMethod;r_t("filterOut",function(t){var i=Qyt(t_t(this),t,arguments.length>1?arguments[1]:void 0);return e_t(this,i)},!0)});var Lfe=I(()=>{"use strict";f();var Dfe=Jt(),i_t=Ei().filterReject,n_t=OS(),a_t=Dfe.aTypedArray,o_t=Dfe.exportTypedArrayMethod;o_t("filterReject",function(t){var i=i_t(a_t(this),t,arguments.length>1?arguments[1]:void 0);return n_t(this,i)},!0)});var Ffe=I(()=>{"use strict";f();lL()});var zfe=I(()=>{"use strict";f();uL()});var Nfe=I(()=>{"use strict";f();var dz=Jt(),s_t=JS(),l_t=dz.aTypedArray,u_t=dz.getTypedArrayConstructor,c_t=dz.exportTypedArrayMethod;c_t("groupBy",function(t){var i=arguments.length>1?arguments[1]:void 0;return s_t(l_t(this),t,i,u_t)},!0)});var Bfe=I(()=>{"use strict";f();SL()});var jfe=I(()=>{"use strict";f();TL()});var Ufe=I(()=>{"use strict";f();var fz=Jt(),h_t=sr(),d_t=IS(),f_t=_s(),p_t=E_(),m_t=Gr(),v_t=fz.aTypedArray,g_t=fz.getTypedArrayConstructor,y_t=fz.exportTypedArrayMethod,__t=Math.max,x_t=Math.min;y_t("toSpliced",function(t,i){var o=v_t(this),c=g_t(o),a=h_t(o),v=f_t(t,a),b=arguments.length,q=0,M,O,D,U,ne,ue,fe;if(b===0)M=O=0;else if(b===1)M=0,O=a-v;else if(O=x_t(__t(m_t(i),0),a-v),M=b-2,M){U=new c(M),D=d_t(U);for(var H=2;H<b;H++)ne=arguments[H],U[H-2]=D?p_t(ne):+ne}for(ue=a+M-O,fe=new c(ue);q<v;q++)fe[q]=o[q];for(;q<v+M;q++)fe[q]=U[q-v];for(;q<ue;q++)fe[q]=o[q+O-M];return fe},!0)});var Vfe=I(()=>{"use strict";f();var b_t=Ue(),pz=Jt(),w_t=du(),S_t=eT(),T_t=pz.aTypedArray,E_t=pz.getTypedArrayConstructor,A_t=pz.exportTypedArrayMethod,q_t=b_t(S_t);A_t("uniqueBy",function(t){return T_t(this),w_t(E_t(this),q_t(this,t))},!0)});var $fe=I(()=>{"use strict";f();AL()});var mz=I((Esr,Gfe)=>{"use strict";f();var I_t=It(),P_t=String,C_t=TypeError;Gfe.exports=function(e){if(e===void 0||I_t(e))return e;throw new C_t(P_t(e)+" is not an object or undefined")}});var Q_=I((qsr,Xfe)=>{"use strict";f();var Hfe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Wfe=Hfe+"+/",Zfe=Hfe+"-_",Kfe=function(e){for(var t={},i=0;i<64;i++)t[e.charAt(i)]=i;return t};Xfe.exports={i2c:Wfe,c2i:Kfe(Wfe),i2cUrl:Zfe,c2iUrl:Kfe(Zfe)}});var vz=I((Psr,Yfe)=>{"use strict";f();var M_t=TypeError;Yfe.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new M_t("Incorrect `alphabet` option")}});var xz=I((Msr,epe)=>{"use strict";f();var Jfe=at(),R_t=Ue(),O_t=mz(),k_t=x_(),D_t=Zt(),Qfe=Q_(),L_t=vz(),F_t=Gp(),z_t=Qfe.c2i,N_t=Qfe.c2iUrl,Yc=Jfe.SyntaxError,B_t=Jfe.TypeError,Cd=R_t("".charAt),gz=function(e,t){for(var i=e.length;t<i;t++){var o=Cd(e,t);if(o!==" "&&o!=="\t"&&o!==`
`&&o!=="\f"&&o!=="\r")break}return t},yz=function(e,t,i){var o=e.length;o<4&&(e+=o===2?"AA":"A");var c=(t[Cd(e,0)]<<18)+(t[Cd(e,1)]<<12)+(t[Cd(e,2)]<<6)+t[Cd(e,3)],a=[c>>16&255,c>>8&255,c&255];if(o===2){if(i&&a[1]!==0)throw new Yc("Extra bits");return[a[0]]}if(o===3){if(i&&a[2]!==0)throw new Yc("Extra bits");return[a[0],a[1]]}return a},_z=function(e,t,i){for(var o=t.length,c=0;c<o;c++)e[i+c]=t[c];return i+o};epe.exports=function(e,t,i,o){k_t(e),O_t(t);var c=L_t(t)==="base64"?z_t:N_t,a=t?t.lastChunkHandling:void 0;if(a===void 0&&(a="loose"),a!=="loose"&&a!=="strict"&&a!=="stop-before-partial")throw new B_t("Incorrect `lastChunkHandling` option");i&&F_t(i.buffer);var v=i||[],b=0,q=0,M="",O=0;if(o)for(;;){if(O=gz(e,O),O===e.length){if(M.length>0){if(a==="stop-before-partial")break;if(a==="loose"){if(M.length===1)throw new Yc("Malformed padding: exactly one additional character");b=_z(v,yz(M,c,!1),b)}else throw new Yc("Missing padding")}q=e.length;break}var D=Cd(e,O);if(++O,D==="="){if(M.length<2)throw new Yc("Padding is too early");if(O=gz(e,O),M.length===2){if(O===e.length){if(a==="stop-before-partial")break;throw new Yc("Malformed padding: only one =")}Cd(e,O)==="="&&(++O,O=gz(e,O))}if(O<e.length)throw new Yc("Unexpected character after padding");b=_z(v,yz(M,c,a==="strict"),b),q=e.length;break}if(!D_t(c,D))throw new Yc("Unexpected character");var U=o-b;if(U===1&&M.length===2||U===2&&M.length===3||(M+=D,M.length===4&&(b=_z(v,yz(M,c,!1),b),M="",q=O,b===o)))break}return{bytes:v,read:q,written:b}}});var rpe=I(()=>{"use strict";f();var j_t=X(),U_t=at(),V_t=du(),$_t=xz(),tpe=U_t.Uint8Array;tpe&&j_t({target:"Uint8Array",stat:!0},{fromBase64:function(t){var i=$_t(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return V_t(tpe,i.bytes)}})});var wz=I((Lsr,ope)=>{"use strict";f();var bz=at(),npe=Ue(),G_t=bz.Uint8Array,ipe=bz.SyntaxError,W_t=bz.parseInt,Z_t=Math.min,ape=/[^\da-f]/i,K_t=npe(ape.exec),H_t=npe("".slice);ope.exports=function(e,t){var i=e.length;if(i%2!==0)throw new ipe("String should be an even number of characters");for(var o=t?Z_t(t.length,i/2):i/2,c=t||new G_t(o),a=0,v=0;v<o;){var b=H_t(e,a,a+=2);if(K_t(ape,b))throw new ipe("String should only contain hex characters");c[v++]=W_t(b,16)}return{bytes:c,read:a}}});var spe=I(()=>{"use strict";f();var X_t=X(),Y_t=at(),J_t=x_(),Q_t=wz();Y_t.Uint8Array&&X_t({target:"Uint8Array",stat:!0},{fromHex:function(t){return Q_t(J_t(t)).bytes}})});var e0=I((jsr,lpe)=>{"use strict";f();var e0t=_a(),t0t=TypeError;lpe.exports=function(e){if(e0t(e)==="Uint8Array")return e;throw new t0t("Argument is not an Uint8Array")}});var upe=I(()=>{"use strict";f();var r0t=X(),i0t=at(),n0t=xz(),a0t=e0(),kT=i0t.Uint8Array,o0t=!kT||!kT.prototype.setFromBase64||!function(){var e=new kT([255,255,255,255,255]);try{e.setFromBase64("MjYyZg===")}catch(t){return e[0]===50&&e[1]===54&&e[2]===50&&e[3]===255&&e[4]===255}}();kT&&r0t({target:"Uint8Array",proto:!0,forced:o0t},{setFromBase64:function(t){a0t(this);var i=n0t(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:i.read,written:i.written}}})});var cpe=I(()=>{"use strict";f();var s0t=X(),l0t=at(),u0t=x_(),c0t=e0(),h0t=Gp(),d0t=wz();l0t.Uint8Array&&s0t({target:"Uint8Array",proto:!0},{setFromHex:function(t){c0t(this),u0t(t),h0t(this.buffer);var i=d0t(t,this).read;return{read:i,written:i/2}}})});var dpe=I(()=>{"use strict";f();var f0t=X(),p0t=at(),m0t=Ue(),v0t=mz(),g0t=e0(),y0t=Gp(),hpe=Q_(),_0t=vz(),x0t=hpe.i2c,b0t=hpe.i2cUrl,w0t=m0t("".charAt);p0t.Uint8Array&&f0t({target:"Uint8Array",proto:!0},{toBase64:function(){var t=g0t(this),i=arguments.length?v0t(arguments[0]):void 0,o=_0t(i)==="base64"?x0t:b0t,c=!!i&&!!i.omitPadding;y0t(this.buffer);for(var a="",v=0,b=t.length,q,M=function(O){return w0t(o,q>>6*O&63)};v+2<b;v+=3)q=(t[v]<<16)+(t[v+1]<<8)+t[v+2],a+=M(3)+M(2)+M(1)+M(0);return v+2===b?(q=(t[v]<<16)+(t[v+1]<<8),a+=M(3)+M(2)+M(1)+(c?"":"=")):v+1===b&&(q=t[v]<<16,a+=M(3)+M(2)+(c?"":"==")),a}})});var fpe=I(()=>{"use strict";f();var S0t=X(),T0t=at(),E0t=Ue(),A0t=e0(),q0t=Gp(),I0t=E0t(1 .toString);T0t.Uint8Array&&S0t({target:"Uint8Array",proto:!0},{toHex:function(){A0t(this),q0t(this.buffer);for(var t="",i=0,o=this.length;i<o;i++){var c=I0t(this[i],16);t+=c.length===1?"0"+c:c}return t}})});var t0=I((tlr,ppe)=>{"use strict";f();var P0t=vl().has;ppe.exports=function(e){return P0t(e),e}});var mpe=I(()=>{"use strict";f();var C0t=X(),M0t=t0(),R0t=vl().remove;C0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=M0t(this),i=!0,o,c=0,a=arguments.length;c<a;c++)o=R0t(t,arguments[c]),i=i&&o;return!!i}})});var gpe=I(()=>{"use strict";f();var O0t=X(),vpe=vl(),k0t=U_();O0t({target:"WeakMap",stat:!0,forced:!0},{from:k0t(vpe.WeakMap,vpe.set,!0)})});var _pe=I(()=>{"use strict";f();var D0t=X(),ype=vl(),L0t=V_();D0t({target:"WeakMap",stat:!0,forced:!0},{of:L0t(ype.WeakMap,ype.set,!0)})});var bpe=I(()=>{"use strict";f();var F0t=X(),z0t=t0(),Sz=vl(),N0t=Sz.get,B0t=Sz.has,xpe=Sz.set;F0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,i){var o=z0t(this),c,a;return B0t(o,t)?(c=N0t(o,t),"update"in i&&(c=i.update(c,t,o),xpe(o,t,c)),c):(a=i.insert(t,o),xpe(o,t,a),a)}})});var wpe=I(()=>{"use strict";f();var j0t=X(),U0t=t0(),Tz=vl(),V0t=Tz.get,$0t=Tz.has,G0t=Tz.set;j0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,i){return $0t(U0t(this),t)?V0t(this,t):(G0t(this,t,i),i)}})});var Epe=I((ylr,Tpe)=>{"use strict";f();var Ez=vl(),Spe=new Ez.WeakMap,W0t=Ez.set,Z0t=Ez.remove;Tpe.exports=function(e){return W0t(Spe,e,1),Z0t(Spe,e),e}});var Ape=I(()=>{"use strict";f();var K0t=X(),H0t=Ot(),X0t=t0(),Y0t=Epe(),Az=vl(),J0t=Az.get,Q0t=Az.has,ext=Az.set;K0t({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,i){if(X0t(this),Y0t(t),H0t(i),Q0t(this,t))return J0t(this,t);var o=i(t);return ext(this,t,o),o}})});var qpe=I(()=>{"use strict";f();var txt=X(),rxt=_T();txt({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:rxt})});var Sm=I((Alr,Ipe)=>{"use strict";f();var qz=Ue(),Iz=WeakSet.prototype;Ipe.exports={WeakSet,add:qz(Iz.add),has:qz(Iz.has),remove:qz(Iz.delete)}});var Pz=I((Ilr,Ppe)=>{"use strict";f();var ixt=Sm().has;Ppe.exports=function(e){return ixt(e),e}});var Cpe=I(()=>{"use strict";f();var nxt=X(),axt=Pz(),oxt=Sm().add;nxt({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=axt(this),i=0,o=arguments.length;i<o;i++)oxt(t,arguments[i]);return t}})});var Mpe=I(()=>{"use strict";f();var sxt=X(),lxt=Pz(),uxt=Sm().remove;sxt({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=lxt(this),i=!0,o,c=0,a=arguments.length;c<a;c++)o=uxt(t,arguments[c]),i=i&&o;return!!i}})});var Ope=I(()=>{"use strict";f();var cxt=X(),Rpe=Sm(),hxt=U_();cxt({target:"WeakSet",stat:!0,forced:!0},{from:hxt(Rpe.WeakSet,Rpe.add,!1)})});var Dpe=I(()=>{"use strict";f();var dxt=X(),kpe=Sm(),fxt=V_();dxt({target:"WeakSet",stat:!0,forced:!0},{of:fxt(kpe.WeakSet,kpe.add,!1)})});var Upe=I(()=>{"use strict";f();var pxt=X(),mxt=at(),zpe=Rt(),Cz=Ue(),vxt=ot(),DT=Ze(),gxt=zt(),yxt=go(),Lpe=Q_().c2i,Npe=/[^\d+/a-z]/i,_xt=/[\t\n\f\r ]+/g,xxt=/[=]{1,2}$/,Md=zpe("atob"),bxt=String.fromCharCode,wxt=Cz("".charAt),Fpe=Cz("".replace),Sxt=Cz(Npe.exec),Tm=!!Md&&!DT(function(){return Md("aGk=")!=="hi"}),Bpe=Tm&&DT(function(){return Md(" ")!==""}),jpe=Tm&&!DT(function(){Md("a")}),Txt=Tm&&!DT(function(){Md()}),Ext=Tm&&Md.length!==1,Axt=!Tm||Bpe||jpe||Txt||Ext;pxt({global:!0,bind:!0,enumerable:!0,forced:Axt},{atob:function(t){if(yxt(arguments.length,1),Tm&&!Bpe&&!jpe)return vxt(Md,mxt,t);var i=Fpe(gxt(t),_xt,""),o="",c=0,a=0,v,b,q;if(i.length%4===0&&(i=Fpe(i,xxt,"")),v=i.length,v%4===1||Sxt(Npe,i))throw new(zpe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;c<v;)b=wxt(i,c++),q=a%4?q*64+Lpe[b]:Lpe[b],a++%4&&(o+=bxt(255&q>>(-2*a&6)));return o}})});var Zpe=I(()=>{"use strict";f();var qxt=X(),Ixt=at(),Gpe=Rt(),Wpe=Ue(),Pxt=ot(),Mz=Ze(),Vpe=zt(),Cxt=go(),Mxt=Q_().i2c,Em=Gpe("btoa"),$pe=Wpe("".charAt),Rxt=Wpe("".charCodeAt),r0=!!Em&&!Mz(function(){return Em("hi")!=="aGk="}),Oxt=r0&&!Mz(function(){Em()}),kxt=r0&&Mz(function(){return Em(null)!=="bnVsbA=="}),Dxt=r0&&Em.length!==1;qxt({global:!0,bind:!0,enumerable:!0,forced:!r0||Oxt||kxt||Dxt},{btoa:function(t){if(Cxt(arguments.length,1),r0)return Pxt(Em,Ixt,Vpe(t));for(var i=Vpe(t),o="",c=0,a=Mxt,v,b;$pe(i,c)||(a="=",c%1);){if(b=Rxt(i,c+=3/4),b>255)throw new(Gpe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");v=v<<8|b,o+=$pe(a,63&v>>8-c%1*8)}return o}})});var Rz=I((Klr,Kpe)=>{"use strict";f();Kpe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var kz=I((Xlr,Xpe)=>{"use strict";f();var Lxt=by(),Oz=Lxt("span").classList,Hpe=Oz&&Oz.constructor&&Oz.constructor.prototype;Xpe.exports=Hpe===Object.prototype?void 0:Hpe});var eme=I(()=>{"use strict";f();var Ype=at(),Jpe=Rz(),Fxt=kz(),Dz=mM(),zxt=Gi(),Qpe=function(e){if(e&&e.forEach!==Dz)try{zxt(e,"forEach",Dz)}catch(t){e.forEach=Dz}};for(LT in Jpe)Jpe[LT]&&Qpe(Ype[LT]&&Ype[LT].prototype);var LT;Qpe(Fxt)});var ame=I(()=>{"use strict";f();var tme=at(),ime=Rz(),Nxt=kz(),i0=jy(),rme=Gi(),Bxt=xa(),jxt=Ct(),Lz=jxt("iterator"),Fz=i0.values,nme=function(e,t){if(e){if(e[Lz]!==Fz)try{rme(e,Lz,Fz)}catch(o){e[Lz]=Fz}if(Bxt(e,t,!0),ime[t]){for(var i in i0)if(e[i]!==i0[i])try{rme(e,i,i0[i])}catch(o){e[i]=i0[i]}}}};for(FT in ime)nme(tme[FT]&&tme[FT].prototype,FT);var FT;nme(Nxt,"DOMTokenList")});var zz=I((nur,ome)=>{"use strict";f();ome.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var gme=I(()=>{"use strict";f();var Uxt=X(),BT=Rt(),Vxt=dR(),$z=Ze(),$xt=Ti(),Gz=La(),jT=Dr().f,Gxt=wr(),zT=Wr(),NT=Zt(),Wxt=ea(),Zxt=lt(),ume=J2(),sme=dd(),Am=zz(),Kxt=sw(),cme=gr(),Wz=St(),hme=dr(),qm="DOMException",Vz="DATA_CLONE_ERR",VT=BT("Error"),xu=BT(qm)||function(){try{var e=BT("MessageChannel")||Vxt("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===Vz&&t.code===25)return t.constructor}}(),Hxt=xu&&xu.prototype,dme=VT.prototype,Xxt=cme.set,Yxt=cme.getterFor(qm),Jxt="stack"in new VT(qm),fme=function(e){return NT(Am,e)&&Am[e].m?Am[e].c:0},Zz=function(){Wxt(this,a0);var t=arguments.length,i=sme(t<1?void 0:arguments[0]),o=sme(t<2?void 0:arguments[1],"Error"),c=fme(o);if(Xxt(this,{type:qm,name:o,message:i,code:c}),Wz||(this.name=o,this.message=i,this.code=c),Jxt){var a=new VT(i);a.name=qm,jT(this,"stack",Gz(1,Kxt(a.stack,1)))}},a0=Zz.prototype=$xt(dme),pme=function(e){return{enumerable:!0,configurable:!0,get:e}},Nz=function(e){return pme(function(){return Yxt(this)[e]})};Wz&&(zT(a0,"code",Nz("code")),zT(a0,"message",Nz("message")),zT(a0,"name",Nz("name")));jT(a0,"constructor",Gz(1,Zz));var $T=$z(function(){return!(new xu instanceof VT)}),mme=$T||$z(function(){return dme.toString!==ume||String(new xu(1,2))!=="2: 1"}),vme=$T||$z(function(){return new xu(1,"DataCloneError").code!==25}),Qxt=$T||xu[Vz]!==25||Hxt[Vz]!==25,lme=hme?mme||vme||Qxt:$T;Uxt({global:!0,constructor:!0,forced:lme},{DOMException:lme?Zz:xu});var o0=BT(qm),UT=o0.prototype;mme&&(hme||xu===o0)&&Gxt(UT,"toString",ume);vme&&Wz&&xu===o0&&zT(UT,"code",pme(function(){return fme(Zxt(this).name)}));for(Bz in Am)NT(Am,Bz)&&(jz=Am[Bz],n0=jz.s,Uz=Gz(6,jz.c),NT(o0,n0)||jT(o0,n0,Uz),NT(UT,n0)||jT(UT,n0,Uz));var jz,n0,Uz,Bz});var Tme=I(()=>{"use strict";f();var ebt=X(),tbt=at(),tN=Rt(),Qz=La(),eN=Dr().f,yme=Zt(),rbt=ea(),ibt=Pc(),_me=dd(),Kz=zz(),nbt=sw(),abt=St(),wme=dr(),l0="DOMException",Sme=tN("Error"),u0=tN(l0),rN=function(){rbt(this,obt);var t=arguments.length,i=_me(t<1?void 0:arguments[0]),o=_me(t<2?void 0:arguments[1],"Error"),c=new u0(i,o),a=new Sme(i);return a.name=l0,eN(c,"stack",Qz(1,nbt(a.stack,1))),ibt(c,this,rN),c},obt=rN.prototype=u0.prototype,sbt="stack"in new Sme(l0),lbt="stack"in new u0(1,2),Hz=u0&&abt&&Object.getOwnPropertyDescriptor(tbt,l0),ubt=!!Hz&&!(Hz.writable&&Hz.configurable),xme=sbt&&!ubt&&!lbt;ebt({global:!0,constructor:!0,forced:wme||xme},{DOMException:xme?rN:u0});var s0=tN(l0),bme=s0.prototype;if(bme.constructor!==s0){wme||eN(bme,"constructor",Qz(1,s0));for(Xz in Kz)yme(Kz,Xz)&&(Yz=Kz[Xz],Jz=Yz.s,yme(s0,Jz)||eN(s0,Jz,Qz(6,Yz.c)))}var Yz,Jz,Xz});var Ame=I(()=>{"use strict";f();var cbt=Rt(),hbt=xa(),Eme="DOMException";hbt(cbt(Eme),Eme)});var Ime=I(()=>{"use strict";f();var dbt=X(),fbt=at(),qme=d_().clear;dbt({global:!0,bind:!0,enumerable:!0,forced:fbt.clearImmediate!==qme},{clearImmediate:qme})});var GT=I((yur,Cme)=>{"use strict";f();var Pme=at(),pbt=On(),mbt=Wt(),vbt=$y(),gbt=ms(),ybt=Na(),_bt=go(),xbt=Pme.Function,bbt=/MSIE .\./.test(gbt)||vbt==="BUN"&&function(){var e=Pme.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();Cme.exports=function(e,t){var i=t?2:1;return bbt?function(o,c){var a=_bt(arguments.length,1)>i,v=mbt(o)?o:xbt(o),b=a?ybt(arguments,i):[],q=a?function(){pbt(v,this,b)}:v;return t?e(q,c):e(q)}:e}});var kme=I(()=>{"use strict";f();var wbt=X(),Ome=at(),Mme=d_().set,Sbt=GT(),Rme=Ome.setImmediate?Sbt(Mme,!1):Mme;wbt({global:!0,bind:!0,enumerable:!0,forced:Ome.setImmediate!==Rme},{setImmediate:Rme})});var Dme=I(()=>{"use strict";f();Ime();kme()});var Lme=I(()=>{"use strict";f();var Tbt=X(),Ebt=at(),Abt=fk(),qbt=Ot(),Ibt=go(),Pbt=Ze(),Cbt=St(),Mbt=Pbt(function(){return Cbt&&Object.getOwnPropertyDescriptor(Ebt,"queueMicrotask").value.length!==1});Tbt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:Mbt},{queueMicrotask:function(t){Ibt(arguments.length,1),Abt(qbt(t))}})});var zme=I(()=>{"use strict";f();var Rbt=X(),Jc=at(),Obt=Wr(),kbt=St(),Dbt=TypeError,Lbt=Object.defineProperty,Fme=Jc.self!==Jc;try{kbt?(WT=Object.getOwnPropertyDescriptor(Jc,"self"),(Fme||!WT||!WT.get||!WT.enumerable)&&Obt(Jc,"self",{get:function(){return Jc},set:function(t){if(this!==Jc)throw new Dbt("Illegal invocation");Lbt(Jc,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):Rbt({global:!0,simple:!0,forced:Fme},{self:Jc})}catch(e){}var WT});var Hme=I(()=>{"use strict";f();var Fbt=dr(),zbt=X(),zn=at(),h0=Rt(),f0=Ue(),lN=Ze(),Nbt=Tc(),Pm=Wt(),Bbt=bs(),jbt=Fa(),YT=It(),Ubt=su(),Vbt=li(),jme=lt(),HT=_a(),$bt=Zt(),Gbt=Bo(),iN=Gi(),ZT=sr(),Wbt=go(),Zbt=am(),JT=an(),uN=yn(),Kbt=Ua(),Nme=_R(),Hbt=K2(),cN=zw(),c0=zn.Object,Xbt=zn.Array,Ume=zn.Date,Vme=zn.Error,Ybt=zn.TypeError,Jbt=zn.PerformanceMark,Rd=h0("DOMException"),oN=JT.Map,hN=JT.has,$me=JT.get,XT=JT.set,Gme=uN.Set,Wme=uN.add,Qbt=uN.has,e1t=h0("Object","keys"),t1t=f0([].push),r1t=f0((!0).valueOf),i1t=f0(1 .valueOf),n1t=f0("".valueOf),a1t=f0(Ume.prototype.getTime),sN=Nbt("structuredClone"),d0="DataCloneError",KT="Transferring",Zme=function(e){return!lN(function(){var t=new zn.Set([7]),i=e(t),o=e(c0(7));return i===t||!i.has(7)||!YT(o)||+o!=7})&&e},Bme=function(e,t){return!lN(function(){var i=new t,o=e({a:i,b:i});return!(o&&o.a===o.b&&o.a instanceof t&&o.a.stack===i.stack)})},o1t=function(e){return!lN(function(){var t=e(new zn.AggregateError([1],sN,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==sN||t.cause!==3})},Im=zn.structuredClone,s1t=Fbt||!Bme(Im,Vme)||!Bme(Im,Rd)||!o1t(Im),l1t=!Im&&Zme(function(e){return new Jbt(sN,{detail:e}).detail}),bu=Zme(Im)||l1t,nN=function(e){throw new Rd("Uncloneable type: "+e,d0)},Ga=function(e,t){throw new Rd((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",d0)},aN=function(e,t){return bu||Ga(t),bu(e)},u1t=function(){var e;try{e=new zn.DataTransfer}catch(t){try{e=new zn.ClipboardEvent("").clipboardData}catch(i){}}return e&&e.items&&e.files?e:null},Kme=function(e,t,i){if(hN(t,e))return $me(t,e);var o=i||HT(e),c,a,v,b,q,M;if(o==="SharedArrayBuffer")bu?c=bu(e):c=e;else{var O=zn.DataView;!O&&!Pm(e.slice)&&Ga("ArrayBuffer");try{if(Pm(e.slice)&&!e.resizable)c=e.slice(0);else for(a=e.byteLength,v=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,c=new ArrayBuffer(a,v),b=new O(e),q=new O(c),M=0;M<a;M++)q.setUint8(M,b.getUint8(M))}catch(D){throw new Rd("ArrayBuffer is detached",d0)}}return XT(t,e,c),c},c1t=function(e,t,i,o,c){var a=zn[t];return YT(a)||Ga(t),new a(Kme(e.buffer,c),i,o)},Fn=function(e,t){if(Ubt(e)&&nN("Symbol"),!YT(e))return e;if(t){if(hN(t,e))return $me(t,e)}else t=new oN;var i=HT(e),o,c,a,v,b,q,M,O;switch(i){case"Array":a=Xbt(ZT(e));break;case"Object":a={};break;case"Map":a=new oN;break;case"Set":a=new Gme;break;case"RegExp":a=new RegExp(e.source,Zbt(e));break;case"Error":switch(c=e.name,c){case"AggregateError":a=new(h0(c))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":a=new(h0(c));break;case"CompileError":case"LinkError":case"RuntimeError":a=new(h0("WebAssembly",c));break;default:a=new Vme}break;case"DOMException":a=new Rd(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":a=Kme(e,t,i);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":q=i==="DataView"?e.byteLength:e.length,a=c1t(e,i,e.byteOffset,q,t);break;case"DOMQuad":try{a=new DOMQuad(Fn(e.p1,t),Fn(e.p2,t),Fn(e.p3,t),Fn(e.p4,t))}catch(D){a=aN(e,i)}break;case"File":if(bu)try{a=bu(e),HT(a)!==i&&(a=void 0)}catch(D){}if(!a)try{a=new File([e],e.name,e)}catch(D){}a||Ga(i);break;case"FileList":if(v=u1t(),v){for(b=0,q=ZT(e);b<q;b++)v.items.add(Fn(e[b],t));a=v.files}else a=aN(e,i);break;case"ImageData":try{a=new ImageData(Fn(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(D){a=aN(e,i)}break;default:if(bu)a=bu(e);else switch(i){case"BigInt":a=c0(e.valueOf());break;case"Boolean":a=c0(r1t(e));break;case"Number":a=c0(i1t(e));break;case"String":a=c0(n1t(e));break;case"Date":a=new Ume(a1t(e));break;case"Blob":try{a=e.slice(0,e.size,e.type)}catch(D){Ga(i)}break;case"DOMPoint":case"DOMPointReadOnly":o=zn[i];try{a=o.fromPoint?o.fromPoint(e):new o(e.x,e.y,e.z,e.w)}catch(D){Ga(i)}break;case"DOMRect":case"DOMRectReadOnly":o=zn[i];try{a=o.fromRect?o.fromRect(e):new o(e.x,e.y,e.width,e.height)}catch(D){Ga(i)}break;case"DOMMatrix":case"DOMMatrixReadOnly":o=zn[i];try{a=o.fromMatrix?o.fromMatrix(e):new o(e)}catch(D){Ga(i)}break;case"AudioData":case"VideoFrame":Pm(e.clone)||Ga(i);try{a=e.clone()}catch(D){nN(i)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Ga(i);default:nN(i)}}switch(XT(t,e,a),i){case"Array":case"Object":for(M=e1t(e),b=0,q=ZT(M);b<q;b++)O=M[b],Gbt(a,O,Fn(e[O],t));break;case"Map":e.forEach(function(D,U){XT(a,Fn(U,t),Fn(D,t))});break;case"Set":e.forEach(function(D){Wme(a,Fn(D,t))});break;case"Error":iN(a,"message",Fn(e.message,t)),$bt(e,"cause")&&iN(a,"cause",Fn(e.cause,t)),c==="AggregateError"?a.errors=Fn(e.errors,t):c==="SuppressedError"&&(a.error=Fn(e.error,t),a.suppressed=Fn(e.suppressed,t));case"DOMException":Hbt&&iN(a,"stack",Fn(e.stack,t))}return a},h1t=function(e,t){if(!YT(e))throw new Ybt("Transfer option cannot be converted to a sequence");var i=[];Vbt(e,function(U){t1t(i,jme(U))});for(var o=0,c=ZT(i),a=new Gme,v,b,q,M,O,D;o<c;){if(v=i[o++],b=HT(v),b==="ArrayBuffer"?Qbt(a,v):hN(t,v))throw new Rd("Duplicate transferable",d0);if(b==="ArrayBuffer"){Wme(a,v);continue}if(cN)M=Im(v,{transfer:[v]});else switch(b){case"ImageBitmap":q=zn.OffscreenCanvas,Bbt(q)||Ga(b,KT);try{O=new q(v.width,v.height),D=O.getContext("bitmaprenderer"),D.transferFromImageBitmap(v),M=O.transferToImageBitmap()}catch(U){}break;case"AudioData":case"VideoFrame":(!Pm(v.clone)||!Pm(v.close))&&Ga(b,KT);try{M=v.clone(),v.close()}catch(U){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Ga(b,KT)}if(M===void 0)throw new Rd("This object cannot be transferred: "+b,d0);XT(t,v,M)}return a},d1t=function(e){Kbt(e,function(t){cN?bu(t,{transfer:[t]}):Pm(t.transfer)?t.transfer():Nme?Nme(t):Ga("ArrayBuffer",KT)})};zbt({global:!0,enumerable:!0,sham:!cN,forced:s1t},{structuredClone:function(t){var i=Wbt(arguments.length,1)>1&&!jbt(arguments[1])?jme(arguments[1]):void 0,o=i?i.transfer:void 0,c,a;o!==void 0&&(c=new oN,a=h1t(o,c));var v=Fn(t,c);return a&&d1t(a),v}})});var Jme=I(()=>{"use strict";f();var f1t=X(),Yme=at(),p1t=GT(),Xme=p1t(Yme.setInterval,!0);f1t({global:!0,bind:!0,forced:Yme.setInterval!==Xme},{setInterval:Xme})});var tve=I(()=>{"use strict";f();var m1t=X(),eve=at(),v1t=GT(),Qme=v1t(eve.setTimeout,!0);m1t({global:!0,bind:!0,forced:eve.setTimeout!==Qme},{setTimeout:Qme})});var rve=I(()=>{"use strict";f();Jme();tve()});var p0=I(($ur,nve)=>{"use strict";f();var g1t=Ze(),y1t=Ct(),_1t=St(),ive=dr(),x1t=y1t("iterator");nve.exports=!g1t(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),o="";return e.pathname="c%20d",t.forEach(function(c,a){t.delete("b"),o+=a+c}),i.delete("a",2),i.delete("b",void 0),ive&&(!e.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b"))||!t.size&&(ive||!_1t)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[x1t]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||o!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var fve=I((Wur,dve)=>{"use strict";f();var Od=Ue(),dN=2147483647,m0=36,uve=1,mN=26,b1t=38,w1t=700,S1t=72,T1t=128,E1t="-",A1t=/[^\0-\u007E]/,cve=/[.\u3002\uFF0E\uFF61]/g,ave="Overflow: input needs wider integers to process",fN=m0-uve,ove=RangeError,q1t=Od(cve.exec),Cm=Math.floor,pN=String.fromCharCode,sve=Od("".charCodeAt),hve=Od([].join),Qc=Od([].push),I1t=Od("".replace),P1t=Od("".split),C1t=Od("".toLowerCase),M1t=function(e){for(var t=[],i=0,o=e.length;i<o;){var c=sve(e,i++);if(c>=55296&&c<=56319&&i<o){var a=sve(e,i++);(a&64512)===56320?Qc(t,((c&1023)<<10)+(a&1023)+65536):(Qc(t,c),i--)}else Qc(t,c)}return t},lve=function(e){return e+22+75*(e<26)},R1t=function(e,t,i){var o=0;for(e=i?Cm(e/w1t):e>>1,e+=Cm(e/t);e>fN*mN>>1;)e=Cm(e/fN),o+=m0;return Cm(o+(fN+1)*e/(e+b1t))},O1t=function(e){var t=[];e=M1t(e);var i=e.length,o=T1t,c=0,a=S1t,v,b;for(v=0;v<e.length;v++)b=e[v],b<128&&Qc(t,pN(b));var q=t.length,M=q;for(q&&Qc(t,E1t);M<i;){var O=dN;for(v=0;v<e.length;v++)b=e[v],b>=o&&b<O&&(O=b);var D=M+1;if(O-o>Cm((dN-c)/D))throw new ove(ave);for(c+=(O-o)*D,o=O,v=0;v<e.length;v++){if(b=e[v],b<o&&++c>dN)throw new ove(ave);if(b===o){for(var U=c,ne=m0;;){var ue=ne<=a?uve:ne>=a+mN?mN:ne-a;if(U<ue)break;var fe=U-ue,H=m0-ue;Qc(t,pN(lve(ue+fe%H))),U=Cm(fe/H),ne+=m0}Qc(t,pN(lve(U))),a=R1t(c,D,M===q),c=0,M++}}c++,o++}return hve(t,"")};dve.exports=function(e){var t=[],i=P1t(I1t(C1t(e),cve,"."),"."),o,c;for(o=0;o<i.length;o++)c=i[o],Qc(t,q1t(A1t,c)?"xn--"+O1t(c):c);return hve(t,".")}});var TN=I((Kur,Lve)=>{"use strict";f();jy();xD();var bN=X(),Ave=at(),wN=ok(),k1t=Rt(),QT=ot(),Es=Ue(),v0=St(),qve=p0(),Ive=wr(),D1t=Wr(),L1t=Uo(),F1t=xa(),z1t=Oc(),SN=gr(),Pve=ea(),vN=Wt(),N1t=Zt(),B1t=Cr(),j1t=_a(),U1t=lt(),Cve=It(),wa=zt(),V1t=Ti(),pve=La(),mve=Cc(),$1t=ol(),eE=nn(),Mm=go(),G1t=Ct(),W1t=Tw(),Z1t=G1t("iterator"),Om="URLSearchParams",Mve=Om+"Iterator",Rve=SN.set,Go=SN.getterFor(Om),K1t=SN.getterFor(Mve),vve=wN("fetch"),iE=wN("Request"),g0=wN("Headers"),gN=iE&&iE.prototype,gve=g0&&g0.prototype,H1t=Ave.TypeError,X1t=Ave.encodeURIComponent,Y1t=String.fromCharCode,J1t=k1t("String","fromCodePoint"),Q1t=parseInt,rE=Es("".charAt),yve=Es([].join),eh=Es([].push),Ove=Es("".replace),ewt=Es([].shift),_ve=Es([].splice),xve=Es("".split),kve=Es("".slice),twt=Es(/./.exec),rwt=/\+/g,yN="\uFFFD",iwt=/^[0-9a-f]+$/i,bve=function(e,t){var i=kve(e,t,t+2);return twt(iwt,i)?Q1t(i,16):NaN},nwt=function(e){for(var t=0,i=128;i>0&&(e&i)!==0;i>>=1)t++;return t},awt=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break}return t>1114111?null:t},wve=function(e){e=Ove(e,rwt," ");for(var t=e.length,i="",o=0;o<t;){var c=rE(e,o);if(c==="%"){if(rE(e,o+1)==="%"||o+3>t){i+="%",o++;continue}var a=bve(e,o+1);if(a!==a){i+=c,o++;continue}o+=2;var v=nwt(a);if(v===0)c=Y1t(a);else{if(v===1||v>4){i+=yN,o++;continue}for(var b=[a],q=1;q<v&&(o++,!(o+3>t||rE(e,o)!=="%"));){var M=bve(e,o+1);if(M!==M){o+=3;break}if(M>191||M<128)break;eh(b,M),o+=2,q++}if(b.length!==v){i+=yN;continue}var O=awt(b);O===null?i+=yN:c=J1t(O)}}i+=c,o++}return i},owt=/[!'()~]|%20/g,swt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},lwt=function(e){return swt[e]},Sve=function(e){return Ove(X1t(e),owt,lwt)},_N=z1t(function(t,i){Rve(this,{type:Mve,target:Go(t).entries,index:0,kind:i})},Om,function(){var t=K1t(this),i=t.target,o=t.index++;if(!i||o>=i.length)return t.target=null,eE(void 0,!0);var c=i[o];switch(t.kind){case"keys":return eE(c.key,!1);case"values":return eE(c.value,!1)}return eE([c.key,c.value],!1)},!0),Dve=function(e){this.entries=[],this.url=null,e!==void 0&&(Cve(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?rE(e,0)==="?"?kve(e,1):e:wa(e)))};Dve.prototype={type:Om,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,i=$1t(e),o,c,a,v,b,q,M;if(i)for(o=mve(e,i),c=o.next;!(a=QT(c,o)).done;){if(v=mve(U1t(a.value)),b=v.next,(q=QT(b,v)).done||(M=QT(b,v)).done||!QT(b,v).done)throw new H1t("Expected sequence with length 2");eh(t,{key:wa(q.value),value:wa(M.value)})}else for(var O in e)N1t(e,O)&&eh(t,{key:O,value:wa(e[O])})},parseQuery:function(e){if(e)for(var t=this.entries,i=xve(e,"&"),o=0,c,a;o<i.length;)c=i[o++],c.length&&(a=xve(c,"="),eh(t,{key:wve(ewt(a)),value:wve(yve(a,"="))}))},serialize:function(){for(var e=this.entries,t=[],i=0,o;i<e.length;)o=e[i++],eh(t,Sve(o.key)+"="+Sve(o.value));return yve(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var nE=function(){Pve(this,Rm);var t=arguments.length>0?arguments[0]:void 0,i=Rve(this,new Dve(t));v0||(this.size=i.entries.length)},Rm=nE.prototype;L1t(Rm,{append:function(t,i){var o=Go(this);Mm(arguments.length,2),eh(o.entries,{key:wa(t),value:wa(i)}),v0||this.length++,o.updateURL()},delete:function(e){for(var t=Go(this),i=Mm(arguments.length,1),o=t.entries,c=wa(e),a=i<2?void 0:arguments[1],v=a===void 0?a:wa(a),b=0;b<o.length;){var q=o[b];if(q.key===c&&(v===void 0||q.value===v)){if(_ve(o,b,1),v!==void 0)break}else b++}v0||(this.size=o.length),t.updateURL()},get:function(t){var i=Go(this).entries;Mm(arguments.length,1);for(var o=wa(t),c=0;c<i.length;c++)if(i[c].key===o)return i[c].value;return null},getAll:function(t){var i=Go(this).entries;Mm(arguments.length,1);for(var o=wa(t),c=[],a=0;a<i.length;a++)i[a].key===o&&eh(c,i[a].value);return c},has:function(t){for(var i=Go(this).entries,o=Mm(arguments.length,1),c=wa(t),a=o<2?void 0:arguments[1],v=a===void 0?a:wa(a),b=0;b<i.length;){var q=i[b++];if(q.key===c&&(v===void 0||q.value===v))return!0}return!1},set:function(t,i){var o=Go(this);Mm(arguments.length,1);for(var c=o.entries,a=!1,v=wa(t),b=wa(i),q=0,M;q<c.length;q++)M=c[q],M.key===v&&(a?_ve(c,q--,1):(a=!0,M.value=b));a||eh(c,{key:v,value:b}),v0||(this.size=c.length),o.updateURL()},sort:function(){var t=Go(this);W1t(t.entries,function(i,o){return i.key>o.key?1:-1}),t.updateURL()},forEach:function(t){for(var i=Go(this).entries,o=B1t(t,arguments.length>1?arguments[1]:void 0),c=0,a;c<i.length;)a=i[c++],o(a.value,a.key,this)},keys:function(){return new _N(this,"keys")},values:function(){return new _N(this,"values")},entries:function(){return new _N(this,"entries")}},{enumerable:!0});Ive(Rm,Z1t,Rm.entries,{name:"entries"});Ive(Rm,"toString",function(){return Go(this).serialize()},{enumerable:!0});v0&&D1t(Rm,"size",{get:function(){return Go(this).entries.length},configurable:!0,enumerable:!0});F1t(nE,Om);bN({global:!0,constructor:!0,forced:!qve},{URLSearchParams:nE});!qve&&vN(g0)&&(Tve=Es(gve.has),Eve=Es(gve.set),xN=function(e){if(Cve(e)){var t=e.body,i;if(j1t(t)===Om)return i=e.headers?new g0(e.headers):new g0,Tve(i,"content-type")||Eve(i,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),V1t(e,{body:pve(0,wa(t)),headers:pve(0,i)})}return e},vN(vve)&&bN({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return vve(t,arguments.length>1?xN(arguments[1]):{})}}),vN(iE)&&(tE=function(t){return Pve(this,gN),new iE(t,arguments.length>1?xN(arguments[1]):{})},gN.constructor=tE,tE.prototype=gN,bN({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:tE})));var Tve,Eve,xN,tE;Lve.exports={URLSearchParams:nE,getState:Go}});var ege=I(()=>{"use strict";f();wD();var uwt=X(),jN=St(),cwt=p0(),UN=at(),Fve=Cr(),Xo=Ue(),uE=wr(),Wo=Wr(),hwt=ea(),zN=Zt(),VN=UO(),km=vM(),As=Na(),dwt=Td().codeAt,fwt=fve(),Su=zt(),pwt=xa(),mwt=go(),Kve=TN(),Hve=gr(),vwt=Hve.set,cE=Hve.getterFor("URL"),gwt=Kve.URLSearchParams,ywt=Kve.getState,y0=UN.URL,NN=UN.TypeError,hE=UN.parseInt,_wt=Math.floor,zve=Math.pow,Ho=Xo("".charAt),qs=Xo(/./.exec),x0=Xo([].join),xwt=Xo(1 .toString),bwt=Xo([].pop),Lm=Xo([].push),EN=Xo("".replace),wwt=Xo([].shift),Swt=Xo("".split),w0=Xo("".slice),dE=Xo("".toLowerCase),Twt=Xo([].unshift),Ewt="Invalid authority",AN="Invalid scheme",kd="Invalid host",Nve="Invalid port",Xve=/[a-z]/i,Awt=/[\d+-.a-z]/i,BN=/\d/,qwt=/^0x/i,Iwt=/^[0-7]+$/,Pwt=/^\d+$/,Yve=/^[\da-f]+$/i,Cwt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Mwt=/[\0\t\n\r #/:<>?@[\\\]^|]/,Rwt=/^[\u0000-\u0020]+/,Owt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,kwt=/[\t\n\r]/g,Zo,Dwt=function(e){var t=Swt(e,"."),i,o,c,a,v,b,q;if(t.length&&t[t.length-1]===""&&t.length--,i=t.length,i>4)return e;for(o=[],c=0;c<i;c++){if(a=t[c],a==="")return e;if(v=10,a.length>1&&Ho(a,0)==="0"&&(v=qs(qwt,a)?16:8,a=w0(a,v===8?1:2)),a==="")b=0;else{if(!qs(v===10?Pwt:v===8?Iwt:Yve,a))return e;b=hE(a,v)}Lm(o,b)}for(c=0;c<i;c++)if(b=o[c],c===i-1){if(b>=zve(256,5-i))return null}else if(b>255)return null;for(q=bwt(o),c=0;c<o.length;c++)q+=o[c]*zve(256,3-c);return q},Lwt=function(e){var t=[0,0,0,0,0,0,0,0],i=0,o=null,c=0,a,v,b,q,M,O,D,U=function(){return Ho(e,c)};if(U()===":"){if(Ho(e,1)!==":")return;c+=2,i++,o=i}for(;U();){if(i===8)return;if(U()===":"){if(o!==null)return;c++,i++,o=i;continue}for(a=v=0;v<4&&qs(Yve,U());)a=a*16+hE(U(),16),c++,v++;if(U()==="."){if(v===0||(c-=v,i>6))return;for(b=0;U();){if(q=null,b>0)if(U()==="."&&b<4)c++;else return;if(!qs(BN,U()))return;for(;qs(BN,U());){if(M=hE(U(),10),q===null)q=M;else{if(q===0)return;q=q*10+M}if(q>255)return;c++}t[i]=t[i]*256+q,b++,(b===2||b===4)&&i++}if(b!==4)return;break}else if(U()===":"){if(c++,!U())return}else if(U())return;t[i++]=a}if(o!==null)for(O=i-o,i=7;i!==0&&O>0;)D=t[i],t[i--]=t[o+O-1],t[o+--O]=D;else if(i!==8)return;return t},Fwt=function(e){for(var t=null,i=1,o=null,c=0,a=0;a<8;a++)e[a]!==0?(c>i&&(t=o,i=c),o=null,c=0):(o===null&&(o=a),++c);return c>i?o:t},_0=function(e){var t,i,o,c;if(typeof e=="number"){for(t=[],i=0;i<4;i++)Twt(t,e%256),e=_wt(e/256);return x0(t,".")}if(typeof e=="object"){for(t="",o=Fwt(e),i=0;i<8;i++)c&&e[i]===0||(c&&(c=!1),o===i?(t+=i?":":"::",c=!0):(t+=xwt(e[i],16),i<7&&(t+=":")));return"["+t+"]"}return e},lE={},Jve=VN({},lE,{" ":1,"\"":1,"<":1,">":1,"`":1}),Qve=VN({},Jve,{"#":1,"?":1,"{":1,"}":1}),qN=VN({},Qve,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),th=function(e,t){var i=dwt(e,0);return i>32&&i<127&&!zN(t,e)?e:encodeURIComponent(e)},aE={ftp:21,file:null,http:80,https:443,ws:80,wss:443},b0=function(e,t){var i;return e.length===2&&qs(Xve,Ho(e,0))&&((i=Ho(e,1))===":"||!t&&i==="|")},Bve=function(e){var t;return e.length>1&&b0(w0(e,0,2))&&(e.length===2||(t=Ho(e,2))==="/"||t==="\\"||t==="?"||t==="#")},zwt=function(e){return e==="."||dE(e)==="%2e"},Nwt=function(e){return e=dE(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},IN={},jve={},PN={},Uve={},Vve={},CN={},$ve={},Gve={},oE={},sE={},MN={},RN={},ON={},kN={},Wve={},DN={},Dm={},gl={},Zve={},Dd={},wu={},$N=function(e,t,i){var o=Su(e),c,a,v;if(t){if(a=this.parse(o),a)throw new NN(a);this.searchParams=null}else{if(i!==void 0&&(c=new $N(i,!0)),a=this.parse(o,null,c),a)throw new NN(a);v=ywt(new gwt),v.bindURL(this),this.searchParams=v}};$N.prototype={type:"URL",parse:function(e,t,i){var o=this,c=t||IN,a=0,v="",b=!1,q=!1,M=!1,O,D,U,ne;for(e=Su(e),t||(o.scheme="",o.username="",o.password="",o.host=null,o.port=null,o.path=[],o.query=null,o.fragment=null,o.cannotBeABaseURL=!1,e=EN(e,Rwt,""),e=EN(e,Owt,"$1")),e=EN(e,kwt,""),O=km(e);a<=O.length;){switch(D=O[a],c){case IN:if(D&&qs(Xve,D))v+=dE(D),c=jve;else{if(t)return AN;c=PN;continue}break;case jve:if(D&&(qs(Awt,D)||D==="+"||D==="-"||D==="."))v+=dE(D);else if(D===":"){if(t&&(o.isSpecial()!==zN(aE,v)||v==="file"&&(o.includesCredentials()||o.port!==null)||o.scheme==="file"&&!o.host))return;if(o.scheme=v,t){o.isSpecial()&&aE[o.scheme]===o.port&&(o.port=null);return}v="",o.scheme==="file"?c=kN:o.isSpecial()&&i&&i.scheme===o.scheme?c=Uve:o.isSpecial()?c=Gve:O[a+1]==="/"?(c=Vve,a++):(o.cannotBeABaseURL=!0,Lm(o.path,""),c=Zve)}else{if(t)return AN;v="",c=PN,a=0;continue}break;case PN:if(!i||i.cannotBeABaseURL&&D!=="#")return AN;if(i.cannotBeABaseURL&&D==="#"){o.scheme=i.scheme,o.path=As(i.path),o.query=i.query,o.fragment="",o.cannotBeABaseURL=!0,c=wu;break}c=i.scheme==="file"?kN:CN;continue;case Uve:if(D==="/"&&O[a+1]==="/")c=oE,a++;else{c=CN;continue}break;case Vve:if(D==="/"){c=sE;break}else{c=gl;continue}case CN:if(o.scheme=i.scheme,D===Zo)o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=As(i.path),o.query=i.query;else if(D==="/"||D==="\\"&&o.isSpecial())c=$ve;else if(D==="?")o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=As(i.path),o.query="",c=Dd;else if(D==="#")o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=As(i.path),o.query=i.query,o.fragment="",c=wu;else{o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,o.path=As(i.path),o.path.length--,c=gl;continue}break;case $ve:if(o.isSpecial()&&(D==="/"||D==="\\"))c=oE;else if(D==="/")c=sE;else{o.username=i.username,o.password=i.password,o.host=i.host,o.port=i.port,c=gl;continue}break;case Gve:if(c=oE,D!=="/"||Ho(v,a+1)!=="/")continue;a++;break;case oE:if(D!=="/"&&D!=="\\"){c=sE;continue}break;case sE:if(D==="@"){b&&(v="%40"+v),b=!0,U=km(v);for(var ue=0;ue<U.length;ue++){var fe=U[ue];if(fe===":"&&!M){M=!0;continue}var H=th(fe,qN);M?o.password+=H:o.username+=H}v=""}else if(D===Zo||D==="/"||D==="?"||D==="#"||D==="\\"&&o.isSpecial()){if(b&&v==="")return Ewt;a-=km(v).length+1,v="",c=MN}else v+=D;break;case MN:case RN:if(t&&o.scheme==="file"){c=DN;continue}else if(D===":"&&!q){if(v==="")return kd;if(ne=o.parseHost(v),ne)return ne;if(v="",c=ON,t===RN)return}else if(D===Zo||D==="/"||D==="?"||D==="#"||D==="\\"&&o.isSpecial()){if(o.isSpecial()&&v==="")return kd;if(t&&v===""&&(o.includesCredentials()||o.port!==null))return;if(ne=o.parseHost(v),ne)return ne;if(v="",c=Dm,t)return;continue}else D==="["?q=!0:D==="]"&&(q=!1),v+=D;break;case ON:if(qs(BN,D))v+=D;else if(D===Zo||D==="/"||D==="?"||D==="#"||D==="\\"&&o.isSpecial()||t){if(v!==""){var J=hE(v,10);if(J>65535)return Nve;o.port=o.isSpecial()&&J===aE[o.scheme]?null:J,v=""}if(t)return;c=Dm;continue}else return Nve;break;case kN:if(o.scheme="file",D==="/"||D==="\\")c=Wve;else if(i&&i.scheme==="file")switch(D){case Zo:o.host=i.host,o.path=As(i.path),o.query=i.query;break;case"?":o.host=i.host,o.path=As(i.path),o.query="",c=Dd;break;case"#":o.host=i.host,o.path=As(i.path),o.query=i.query,o.fragment="",c=wu;break;default:Bve(x0(As(O,a),""))||(o.host=i.host,o.path=As(i.path),o.shortenPath()),c=gl;continue}else{c=gl;continue}break;case Wve:if(D==="/"||D==="\\"){c=DN;break}i&&i.scheme==="file"&&!Bve(x0(As(O,a),""))&&(b0(i.path[0],!0)?Lm(o.path,i.path[0]):o.host=i.host),c=gl;continue;case DN:if(D===Zo||D==="/"||D==="\\"||D==="?"||D==="#"){if(!t&&b0(v))c=gl;else if(v===""){if(o.host="",t)return;c=Dm}else{if(ne=o.parseHost(v),ne)return ne;if(o.host==="localhost"&&(o.host=""),t)return;v="",c=Dm}continue}else v+=D;break;case Dm:if(o.isSpecial()){if(c=gl,D!=="/"&&D!=="\\")continue}else if(!t&&D==="?")o.query="",c=Dd;else if(!t&&D==="#")o.fragment="",c=wu;else if(D!==Zo&&(c=gl,D!=="/"))continue;break;case gl:if(D===Zo||D==="/"||D==="\\"&&o.isSpecial()||!t&&(D==="?"||D==="#")){if(Nwt(v)?(o.shortenPath(),D!=="/"&&!(D==="\\"&&o.isSpecial())&&Lm(o.path,"")):zwt(v)?D!=="/"&&!(D==="\\"&&o.isSpecial())&&Lm(o.path,""):(o.scheme==="file"&&!o.path.length&&b0(v)&&(o.host&&(o.host=""),v=Ho(v,0)+":"),Lm(o.path,v)),v="",o.scheme==="file"&&(D===Zo||D==="?"||D==="#"))for(;o.path.length>1&&o.path[0]==="";)wwt(o.path);D==="?"?(o.query="",c=Dd):D==="#"&&(o.fragment="",c=wu)}else v+=th(D,Qve);break;case Zve:D==="?"?(o.query="",c=Dd):D==="#"?(o.fragment="",c=wu):D!==Zo&&(o.path[0]+=th(D,lE));break;case Dd:!t&&D==="#"?(o.fragment="",c=wu):D!==Zo&&(D==="'"&&o.isSpecial()?o.query+="%27":D==="#"?o.query+="%23":o.query+=th(D,lE));break;case wu:D!==Zo&&(o.fragment+=th(D,Jve));break}a++}},parseHost:function(e){var t,i,o;if(Ho(e,0)==="["){if(Ho(e,e.length-1)!=="]"||(t=Lwt(w0(e,1,-1)),!t))return kd;this.host=t}else if(this.isSpecial()){if(e=fwt(e),qs(Cwt,e)||(t=Dwt(e),t===null))return kd;this.host=t}else{if(qs(Mwt,e))return kd;for(t="",i=km(e),o=0;o<i.length;o++)t+=th(i[o],lE);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return zN(aE,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!b0(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,i=e.username,o=e.password,c=e.host,a=e.port,v=e.path,b=e.query,q=e.fragment,M=t+":";return c!==null?(M+="//",e.includesCredentials()&&(M+=i+(o?":"+o:"")+"@"),M+=_0(c),a!==null&&(M+=":"+a)):t==="file"&&(M+="//"),M+=e.cannotBeABaseURL?v[0]:v.length?"/"+x0(v,"/"):"",b!==null&&(M+="?"+b),q!==null&&(M+="#"+q),M},setHref:function(e){var t=this.parse(e);if(t)throw new NN(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Fm(e.path[0]).origin}catch(i){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+_0(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Su(e)+":",IN)},getUsername:function(){return this.username},setUsername:function(e){var t=km(Su(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<t.length;i++)this.username+=th(t[i],qN)}},getPassword:function(){return this.password},setPassword:function(e){var t=km(Su(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<t.length;i++)this.password+=th(t[i],qN)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?_0(e):_0(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,MN)},getHostname:function(){var e=this.host;return e===null?"":_0(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,RN)},getPort:function(){var e=this.port;return e===null?"":Su(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Su(e),e===""?this.port=null:this.parse(e,ON))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+x0(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Dm))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Su(e),e===""?this.query=null:(Ho(e,0)==="?"&&(e=w0(e,1)),this.query="",this.parse(e,Dd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Su(e),e===""){this.fragment=null;return}Ho(e,0)==="#"&&(e=w0(e,1)),this.fragment="",this.parse(e,wu)},update:function(){this.query=this.searchParams.serialize()||null}};var Fm=function(t){var i=hwt(this,Sa),o=mwt(arguments.length,1)>1?arguments[1]:void 0,c=vwt(i,new $N(t,!1,o));jN||(i.href=c.serialize(),i.origin=c.getOrigin(),i.protocol=c.getProtocol(),i.username=c.getUsername(),i.password=c.getPassword(),i.host=c.getHost(),i.hostname=c.getHostname(),i.port=c.getPort(),i.pathname=c.getPathname(),i.search=c.getSearch(),i.searchParams=c.getSearchParams(),i.hash=c.getHash())},Sa=Fm.prototype,Ko=function(e,t){return{get:function(){return cE(this)[e]()},set:t&&function(i){return cE(this)[t](i)},configurable:!0,enumerable:!0}};jN&&(Wo(Sa,"href",Ko("serialize","setHref")),Wo(Sa,"origin",Ko("getOrigin")),Wo(Sa,"protocol",Ko("getProtocol","setProtocol")),Wo(Sa,"username",Ko("getUsername","setUsername")),Wo(Sa,"password",Ko("getPassword","setPassword")),Wo(Sa,"host",Ko("getHost","setHost")),Wo(Sa,"hostname",Ko("getHostname","setHostname")),Wo(Sa,"port",Ko("getPort","setPort")),Wo(Sa,"pathname",Ko("getPathname","setPathname")),Wo(Sa,"search",Ko("getSearch","setSearch")),Wo(Sa,"searchParams",Ko("getSearchParams")),Wo(Sa,"hash",Ko("getHash","setHash")));uE(Sa,"toJSON",function(){return cE(this).serialize()},{enumerable:!0});uE(Sa,"toString",function(){return cE(this).serialize()},{enumerable:!0});y0&&(LN=y0.createObjectURL,FN=y0.revokeObjectURL,LN&&uE(Fm,"createObjectURL",Fve(LN,y0)),FN&&uE(Fm,"revokeObjectURL",Fve(FN,y0)));var LN,FN;pwt(Fm,"URL");uwt({global:!0,constructor:!0,forced:!cwt,sham:!jN},{URL:Fm})});var tge=I(()=>{"use strict";f();ege()});var nge=I(()=>{"use strict";f();var Bwt=X(),jwt=Rt(),ige=Ze(),Uwt=go(),rge=zt(),Vwt=p0(),GN=jwt("URL"),$wt=Vwt&&ige(function(){GN.canParse()}),Gwt=ige(function(){return GN.canParse.length!==1});Bwt({target:"URL",stat:!0,forced:!$wt||Gwt},{canParse:function(t){var i=Uwt(arguments.length,1),o=rge(t),c=i<2||arguments[1]===void 0?void 0:rge(arguments[1]);try{return!!new GN(o,c)}catch(a){return!1}}})});var oge=I(()=>{"use strict";f();var Wwt=X(),Zwt=Rt(),Kwt=go(),age=zt(),Hwt=p0(),Xwt=Zwt("URL");Wwt({target:"URL",stat:!0,forced:!Hwt},{parse:function(t){var i=Kwt(arguments.length,1),o=age(t),c=i<2||arguments[1]===void 0?void 0:age(arguments[1]);try{return new Xwt(o,c)}catch(a){return null}}})});var sge=I(()=>{"use strict";f();var Ywt=X(),Jwt=ot();Ywt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Jwt(URL.prototype.toString,this)}})});var lge=I(()=>{"use strict";f();TN()});var dge=I(()=>{"use strict";f();var Qwt=wr(),fE=Ue(),uge=zt(),eSt=go(),hge=URLSearchParams,pE=hge.prototype,tSt=fE(pE.append),cge=fE(pE.delete),rSt=fE(pE.forEach),iSt=fE([].push),WN=new hge("a=1&a=2&b=3");WN.delete("a",1);WN.delete("b",void 0);WN+""!="a=2"&&Qwt(pE,"delete",function(e){var t=arguments.length,i=t<2?void 0:arguments[1];if(t&&i===void 0)return cge(this,e);var o=[];rSt(this,function(D,U){iSt(o,{key:U,value:D})}),eSt(t,1);for(var c=uge(e),a=uge(i),v=0,b=0,q=!1,M=o.length,O;v<M;)O=o[v++],q||O.key===c?(q=!0,cge(this,O.key)):b++;for(;b<M;)O=o[b++],O.key===c&&O.value===a||tSt(this,O.key,O.value)},{enumerable:!0,unsafe:!0})});var vge=I(()=>{"use strict";f();var nSt=wr(),pge=Ue(),aSt=zt(),oSt=go(),mge=URLSearchParams,ZN=mge.prototype,sSt=pge(ZN.getAll),lSt=pge(ZN.has),fge=new mge("a=1");(fge.has("a",2)||!fge.has("a",void 0))&&nSt(ZN,"has",function(t){var i=arguments.length,o=i<2?void 0:arguments[1];if(i&&o===void 0)return lSt(this,t);var c=sSt(this,t);oSt(i,1);for(var a=aSt(o),v=0;v<c.length;)if(c[v++]===a)return!0;return!1},{enumerable:!0,unsafe:!0})});var gge=I(()=>{"use strict";f();var uSt=St(),cSt=Ue(),hSt=Wr(),KN=URLSearchParams.prototype,dSt=cSt(KN.forEach);uSt&&!("size"in KN)&&hSt(KN,"size",{get:function(){var t=0;return dSt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var _ge=I((Scr,yge)=>{"use strict";f();mG();wG();SG();TG();EG();AG();qG();IG();PG();CG();MG();RG();OG();kG();DG();sW();dW();iM();RW();sM();BW();$W();WW();HW();XW();JW();eZ();dM();fM();aZ();oZ();uZ();yZ();_Z();bZ();wZ();jy();VZ();ZZ();KZ();XZ();JZ();o7();l7();c7();f7();p7();C7();O7();k7();OM();DM();LM();z7();N7();B7();zM();gK();PK();DK();FK();nR();lR();hR();AR();qR();dH();pH();gH();yH();IH();PH();kH();zH();BH();WH();HH();QH();kR();NR();$R();WR();KR();XR();rO();nO();aO();Uw();lO();cO();dO();fO();U2();M9();Zw();bO();Q9();rX();nX();aX();oX();uX();hX();dX();EO();pX();vX();yX();_X();xX();bX();TX();qX();IX();PX();BX();jX();VX();GX();WX();ZX();KX();HX();tY();uY();pY();xY();SY();IY();PY();RY();kY();LY();FY();VY();$Y();GY();KY();HY();XY();JY();GO();WO();tJ();iJ();aJ();sJ();uJ();cJ();hJ();dJ();gJ();yJ();_J();wJ();SJ();EJ();qJ();BQ();Ik();Pk();GQ();Ok();kk();KQ();tee();nee();aee();uee();cee();hee();dee();fee();pee();mee();xee();wee();See();Bee();Xk();Kee();gS();ete();rte();ate();ute();hte();nD();sD();uD();hD();fD();vD();yD();Ute();Wte();Yte();xD();tre();bD();wD();mre();PD();Are();qre();Mre();Rre();zre();ND();Vre();Kre();Yre();Qre();WD();oie();hie();vie();xie();bie();wie();Sie();Tie();Eie();Aie();qie();Iie();Pie();Cie();Mie();Rie();ane();one();sne();lne();une();cne();hne();dne();fne();sL();vne();yne();xne();Sne();Ene();qne();lL();uL();Mne();Rne();kne();Lne();jne();Vne();Gne();Wne();Kne();Xne();Jne();eae();oae();sae();uae();mae();gae();wae();SL();TL();Tae();AL();Pae();WS();Gae();Wae();Hae();woe();Soe();Toe();Eoe();Aoe();qoe();Poe();Coe();Roe();Ooe();Loe();Foe();Boe();joe();Uoe();Voe();Xoe();Yoe();Joe();Qoe();ese();fse();yse();Cse();kse();Lse();Fse();Nse();Bse();Wse();Zse();Hse();Xse();Yse();Jse();Qse();rle();ile();cle();vle();yle();_le();xle();ble();wle();qle();Mle();Ole();Dle();Lle();Nle();Ble();jle();Ule();$le();Zle();Xle();Yle();Jle();Qle();eue();tue();rue();iue();nue();aue();sue();lue();uue();cue();hue();fue();vue();Iue();Lue();zue();Bue();jue();Vue();$ue();Gue();Kue();Hue();Xue();Yue();ece();rce();ice();ace();sce();lce();hce();dce();fce();mce();gce();yce();Sce();Tce();Ece();qce();Ice();Pce();Cce();Mce();Rce();Oce();kce();zce();Nce();$ce();Gce();Kce();Hce();Xce();ehe();the();rhe();ihe();yhe();_he();xhe();bhe();whe();Ihe();Che();Rhe();Lhe();zhe();Bhe();Vhe();Ghe();Zhe();Khe();Hhe();Xhe();Yhe();rde();ide();ade();ode();lde();ude();cde();hde();dde();fde();pde();mde();vde();yde();xde();wde();Sde();Tde();Ede();Ade();qde();Ide();Pde();kde();Nde();afe();ofe();sfe();lfe();ufe();cfe();hfe();dfe();pfe();mfe();wfe();Sfe();Tfe();Efe();Afe();qfe();Ife();Pfe();Mfe();Rfe();kfe();Lfe();Ffe();zfe();Nfe();Bfe();jfe();Ufe();Vfe();$fe();rpe();spe();upe();cpe();dpe();fpe();mpe();gpe();_pe();bpe();wpe();Ape();qpe();Cpe();Mpe();Ope();Dpe();Upe();Zpe();eme();ame();gme();Tme();Ame();Dme();Lme();zme();Hme();rve();tge();nge();oge();sge();lge();dge();vge();gge();yge.exports=Q1()});var bge=I((Ecr,xge)=>{"use strict";f();xge.exports=_ge()});var Zge=I((Rcr,Wge)=>{"use strict";f();var DSt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Wge.exports=DSt});var Yge=I((kcr,Xge)=>{"use strict";f();var LSt=Zge();function Kge(){}function Hge(){}Hge.resetWarningCache=Kge;Xge.exports=function(){function e(o,c,a,v,b,q){if(q!==LSt){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Hge,resetWarningCache:Kge};return i.PropTypes=i,i}});var ki=I((zcr,Jge)=>{f();Jge.exports=Yge()();var Lcr,Fcr});var iB=I((tB,rB)=>{f();(function(e,t){typeof tB=="object"&&typeof rB!="undefined"?rB.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(tB,function(){"use strict";var e={},t={};function i(c,a,v){if(t[c]=v,c==="index"){var b="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",q={};return t.shared(q),t.index(e,q),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))),e}}i("shared",["exports"],function(c){"use strict";function a(l,n,s,h){return new(s||(s=Promise))(function(p,_){function x(C){try{E(h.next(C))}catch(R){_(R)}}function S(C){try{E(h.throw(C))}catch(R){_(R)}}function E(C){var R;C.done?p(C.value):(R=C.value,R instanceof s?R:new s(function(F){F(R)})).then(x,S)}E((h=h.apply(l,n||[])).next())})}function v(l,n){this.x=l,this.y=n}function b(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var q,M;typeof SuppressedError=="function"&&SuppressedError,v.prototype={clone(){return new v(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,n){return this.clone()._rotateAround(l,n)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){let n=l.x-this.x,s=l.y-this.y;return n*n+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,n){return Math.atan2(this.x*n-this.y*l,this.x*l+this.y*n)},_matMult(l){let n=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=n,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){let l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){let n=Math.cos(l),s=Math.sin(l),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround(l,n){let s=Math.cos(l),h=Math.sin(l),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:v},v.convert=function(l){if(l instanceof v)return l;if(Array.isArray(l))return new v(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new v(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var O=function(){if(M)return q;function l(n,s,h,p){this.cx=3*n,this.bx=3*(h-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=s,this.p2x=h,this.p2y=p}return M=1,q=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,s){if(s===void 0&&(s=1e-6),n<0)return 0;if(n>1)return 1;for(var h=n,p=0;p<8;p++){var _=this.sampleCurveX(h)-n;if(Math.abs(_)<s)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var S=0,E=1;for(h=n,p=0;p<20&&(_=this.sampleCurveX(h),!(Math.abs(_-n)<s));p++)n>_?S=h:E=h,h=.5*(E-S)+S;return h},solve:function(n,s){return this.sampleCurveY(this.solveCurveX(n,s))}},q}(),D=b(O);let U,ne;function ue(){return U==null&&(U=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),U}function fe(){if(ne==null&&(ne=!1,ue())){let n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){let p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}let s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){ne=!0;break}}}return ne||!1}var H=1e-6,J=typeof Float32Array!="undefined"?Float32Array:Array;function re(){var l=new J(9);return J!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function xe(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function Ae(){var l=new J(3);return J!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function Ge(l){var n=l[0],s=l[1],h=l[2];return Math.sqrt(n*n+s*s+h*h)}function Ne(l,n,s){var h=new J(3);return h[0]=l,h[1]=n,h[2]=s,h}function Ye(l,n,s){return l[0]=n[0]+s[0],l[1]=n[1]+s[1],l[2]=n[2]+s[2],l}function ct(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l[2]=n[2]*s,l}function ht(l,n,s){var h=n[0],p=n[1],_=n[2],x=s[0],S=s[1],E=s[2];return l[0]=p*E-_*S,l[1]=_*x-h*E,l[2]=h*S-p*x,l}var pr,Lr=Ge;function Pt(l,n,s){var h=n[0],p=n[1],_=n[2],x=n[3];return l[0]=s[0]*h+s[4]*p+s[8]*_+s[12]*x,l[1]=s[1]*h+s[5]*p+s[9]*_+s[13]*x,l[2]=s[2]*h+s[6]*p+s[10]*_+s[14]*x,l[3]=s[3]*h+s[7]*p+s[11]*_+s[15]*x,l}function Et(){var l=new J(4);return J!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function nr(l,n,s,h){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",_=Math.PI/360;n*=_,h*=_,s*=_;var x=Math.sin(n),S=Math.cos(n),E=Math.sin(s),C=Math.cos(s),R=Math.sin(h),F=Math.cos(h);switch(p){case"xyz":l[0]=x*C*F+S*E*R,l[1]=S*E*F-x*C*R,l[2]=S*C*R+x*E*F,l[3]=S*C*F-x*E*R;break;case"xzy":l[0]=x*C*F-S*E*R,l[1]=S*E*F-x*C*R,l[2]=S*C*R+x*E*F,l[3]=S*C*F+x*E*R;break;case"yxz":l[0]=x*C*F+S*E*R,l[1]=S*E*F-x*C*R,l[2]=S*C*R-x*E*F,l[3]=S*C*F+x*E*R;break;case"yzx":l[0]=x*C*F+S*E*R,l[1]=S*E*F+x*C*R,l[2]=S*C*R-x*E*F,l[3]=S*C*F-x*E*R;break;case"zxy":l[0]=x*C*F-S*E*R,l[1]=S*E*F+x*C*R,l[2]=S*C*R+x*E*F,l[3]=S*C*F-x*E*R;break;case"zyx":l[0]=x*C*F-S*E*R,l[1]=S*E*F+x*C*R,l[2]=S*C*R-x*E*F,l[3]=S*C*F+x*E*R;break;default:throw new Error("Unknown angle order "+p)}return l}function Sr(){var l=new J(2);return J!=Float32Array&&(l[0]=0,l[1]=0),l}function ur(l,n){var s=new J(2);return s[0]=l,s[1]=n,s}Ae(),pr=new J(4),J!=Float32Array&&(pr[0]=0,pr[1]=0,pr[2]=0,pr[3]=0),Ae(),Ne(1,0,0),Ne(0,1,0),Et(),Et(),re(),Sr();let Dt=8192;function Fr(l,n,s){return n*(Dt/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function zr(l,n){return(l%n+n)%n}function Bn(l,n,s){return l*(1-s)+n*s}function Kr(l){if(l<=0)return 0;if(l>=1)return 1;let n=l*l,s=n*l;return 4*(l<.5?s:3*(l-n)+s-.75)}function Di(l,n,s,h){let p=new D(l,n,s,h);return _=>p.solve(_)}let jn=Di(.25,.1,.25,1);function hi(l,n,s){return Math.min(s,Math.max(n,l))}function qa(l,n,s){let h=s-n,p=((l-n)%h+h)%h+n;return p===n?s:p}function Un(l,...n){for(let s of n)for(let h in s)l[h]=s[h];return l}let Vn=1;function ks(l,n,s){let h={};for(let p in l)h[p]=n.call(this,l[p],p,l);return h}function wo(l,n,s){let h={};for(let p in l)n.call(this,l[p],p,l)&&(h[p]=l[p]);return h}function ln(l){return Array.isArray(l)?l.map(ln):typeof l=="object"&&l?ks(l,ln):l}let Rr={};function jr(l){Rr[l]||(typeof console!="undefined"&&console.warn(l),Rr[l]=!0)}function sa(l,n,s){return(s.y-l.y)*(n.x-l.x)>(n.y-l.y)*(s.x-l.x)}function la(l){return typeof WorkerGlobalScope!="undefined"&&l!==void 0&&l instanceof WorkerGlobalScope}let es=null;function ua(l){return typeof ImageBitmap!="undefined"&&l instanceof ImageBitmap}let ca="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ds(l,n,s,h,p){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let _=new VideoFrame(l,{timestamp:0});try{let x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);let S=x.startsWith("BGR"),E=new Uint8ClampedArray(h*p*4);if(yield _.copyTo(E,function(C,R,F,B,$){let G=4*Math.max(-R,0),K=(Math.max(0,F)-F)*B*4+G,Q=4*B,oe=Math.max(0,R),Se=Math.max(0,F);return{rect:{x:oe,y:Se,width:Math.min(C.width,R+B)-oe,height:Math.min(C.height,F+$)-Se},layout:[{offset:K,stride:Q}]}}(l,n,s,h,p)),S)for(let C=0;C<E.length;C+=4){let R=E[C];E[C]=E[C+2],E[C+2]=R}return E}finally{_.close()}})}let So,ts;function Ya(l,n,s,h){return l.addEventListener(n,s,h),{unsubscribe:()=>{l.removeEventListener(n,s,h)}}}function _e(l){return l*Math.PI/180}function ke(l){return l/Math.PI*180}let Be={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},vt={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ut="AbortError";function le(){return new Error(ut)}let V={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function W(l){return V.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}let Y="global-dispatcher";class ae extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}let ve=()=>la(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,be=function(l,n){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){let h=W(l.url);if(h)return h(l,n);if(la(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:Y},n)}if(!(/^file:/.test(s=l.url)||/^file:/.test(ve())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return a(this,void 0,void 0,function*(){let _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ve(),signal:p.signal}),x,S;h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{x=yield fetch(_)}catch(C){throw new ae(0,C.message,h.url,new Blob())}if(!x.ok){let C=yield x.blob();throw new ae(x.status,x.statusText,h.url,C)}S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();let E=yield S;if(p.signal.aborted)throw le();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(l,n);if(la(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:Y},n)}var s;return function(h,p){return new Promise((_,x)=>{var S;let E=new XMLHttpRequest;E.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(E.responseType="arraybuffer");for(let C in h.headers)E.setRequestHeader(C,h.headers[C]);h.type==="json"&&(E.responseType="text",!((S=h.headers)===null||S===void 0)&&S.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=h.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if(!p.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let C=E.response;if(h.type==="json")try{C=JSON.parse(E.response)}catch(R){return void x(R)}_({data:C,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{let C=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new ae(E.status,E.statusText,h.url,C))}},p.signal.addEventListener("abort",()=>{E.abort(),x(le())}),E.send(h.body)})}(l,n)};function qe(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;let n=new URL(l),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function we(l,n,s){s[l]&&s[l].indexOf(n)!==-1||(s[l]=s[l]||[],s[l].push(n))}function Le(l,n,s){if(s&&s[l]){let h=s[l].indexOf(n);h!==-1&&s[l].splice(h,1)}}class $e{constructor(n,s={}){Un(this,s),this.type=n}}class ze extends $e{constructor(n,s={}){super("error",Un({error:n},s))}}class pt{on(n,s){return this._listeners=this._listeners||{},we(n,s,this._listeners),{unsubscribe:()=>{this.off(n,s)}}}off(n,s){return Le(n,s,this._listeners),Le(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},we(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new $e(n,s||{}));let h=n.type;if(this.listens(h)){n.target=this;let p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let S of p)S.call(this,n);let _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let S of _)Le(h,S,this._oneTimeListeners),S.call(this,n);let x=this._eventedParent;x&&(Un(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof ze&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let kt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Kt(l,n){let s={};for(let h in l)h!=="ref"&&(s[h]=l[h]);return kt.forEach(h=>{h in n&&(s[h]=n[h])}),s}function yt(l,n){if(Array.isArray(l)){if(!Array.isArray(n)||l.length!==n.length)return!1;for(let s=0;s<l.length;s++)if(!yt(l[s],n[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&n!==null){if(typeof n!="object"||Object.keys(l).length!==Object.keys(n).length)return!1;for(let s in l)if(!yt(l[s],n[s]))return!1;return!0}return l===n}function Nt(l,n){l.push(n)}function Ir(l,n,s){Nt(s,{command:"addSource",args:[l,n[l]]})}function Ai(l,n,s){Nt(n,{command:"removeSource",args:[l]}),s[l]=!0}function qi(l,n,s,h){Ai(l,s,h),Ir(l,n,s)}function di(l,n,s){let h;for(h in l[s])if(Object.prototype.hasOwnProperty.call(l[s],h)&&h!=="data"&&!yt(l[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!yt(l[s][h],n[s][h]))return!1;return!0}function Qt(l,n,s,h,p,_){l=l||{},n=n||{};for(let x in l)Object.prototype.hasOwnProperty.call(l,x)&&(yt(l[x],n[x])||s.push({command:_,args:[h,x,n[x],p]}));for(let x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(l,x)&&(yt(l[x],n[x])||s.push({command:_,args:[h,x,n[x],p]}))}function ar(l){return l.id}function mi(l,n){return l[n.id]=n,l}class Ke{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function un(l,...n){for(let s of n)for(let h in s)l[h]=s[h];return l}class Hr extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Ls{constructor(n,s=[]){this.parent=n,this.bindings={};for(let[h,p]of s)this.bindings[h]=p}concat(n){return new Ls(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}let Au={kind:"null"},it={kind:"number"},Ht={kind:"string"},$t={kind:"boolean"},Hi={kind:"color"},Cl={kind:"projectionDefinition"},Fs={kind:"object"},jt={kind:"value"},Gd={kind:"collator"},zs={kind:"formatted"},Wd={kind:"padding"},To={kind:"colorArray"},qu={kind:"numberArray"},ii={kind:"resolvedImage"},Zd={kind:"variableAnchorOffsetCollection"};function $n(l,n){return{kind:"array",itemType:l,N:n}}function Tr(l){if(l.kind==="array"){let n=Tr(l.itemType);return typeof l.N=="number"?`array<${n}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${n}>`}return l.kind}let hx=[Au,it,Ht,$t,Hi,Cl,zs,Fs,$n(jt),Wd,qu,To,ii,Zd];function uh(l,n){if(n.kind==="error")return null;if(l.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!uh(l.itemType,n.itemType))&&(typeof l.N!="number"||l.N===n.N))return null}else{if(l.kind===n.kind)return null;if(l.kind==="value"){for(let s of hx)if(!uh(s,n))return null}}return`Expected ${Tr(l)} but found ${Tr(n)} instead.`}function ov(l,n){return n.some(s=>s.kind===l.kind)}function Ns(l,n){return n.some(s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l)}function Bs(l,n){return l.kind==="array"&&n.kind==="array"?l.itemType.kind===n.itemType.kind&&typeof l.N=="number":l.kind===n.kind}let sv=.96422,dx=.82521,fx=4/29,Iu=6/29,px=3*Iu*Iu,uq=Iu*Iu*Iu,cq=Math.PI/180,hq=180/Math.PI;function lv(l){return(l%=360)<0&&(l+=360),l}function Pu([l,n,s,h]){let p,_,x=cv((.2225045*(l=uv(l))+.7168786*(n=uv(n))+.0606169*(s=uv(s)))/1);l===n&&n===s?p=_=x:(p=cv((.4360747*l+.3850649*n+.1430804*s)/sv),_=cv((.0139322*l+.0971045*n+.7141733*s)/dx));let S=116*x-16;return[S<0?0:S,500*(p-x),200*(x-_),h]}function uv(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function cv(l){return l>uq?Math.pow(l,1/3):l/px+fx}function Cu([l,n,s,h]){let p=(l+16)/116,_=isNaN(n)?p:p+n/500,x=isNaN(s)?p:p-s/200;return p=1*dv(p),_=sv*dv(_),x=dx*dv(x),[hv(3.1338561*_-1.6168667*p-.4906146*x),hv(-.9787684*_+1.9161415*p+.033454*x),hv(.0719453*_-.2289914*p+1.4052427*x),h]}function hv(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function dv(l){return l>Iu?l*l*l:px*(l-fx)}let dq=Object.hasOwn||function(l,n){return Object.prototype.hasOwnProperty.call(l,n)};function Mu(l,n){return dq(l,n)?l[n]:void 0}function ch(l){return parseInt(l.padEnd(2,l),16)/255}function Ja(l,n){return Xt(n?l/100:l,0,1)}function Xt(l,n,s){return Math.min(Math.max(n,l),s)}function Ml(l){return!l.some(Number.isNaN)}let js={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function rs(l,n,s){return l+s*(n-l)}function Rl(l,n,s){return l.map((h,p)=>rs(h,n[p],s))}class Yt{constructor(n,s,h,p=1,_=!0){this.r=n,this.g=s,this.b=h,this.a=p,_||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof Yt)return n;if(typeof n!="string")return;let s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let p=Mu(js,h);if(p){let[x,S,E]=p;return[x/255,S/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let x=h.length<6?1:2,S=1;return[ch(h.slice(S,S+=x)),ch(h.slice(S,S+=x)),ch(h.slice(S,S+=x)),ch(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){let x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){let[S,E,C,R,F,B,$,G,K,Q,oe,Se]=x,pe=[R||" ",$||" ",Q].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){let ge=[C,B,K].join(""),Ce=ge==="%%%"?100:ge===""?255:0;if(Ce){let De=[Xt(+E/Ce,0,1),Xt(+F/Ce,0,1),Xt(+G/Ce,0,1),oe?Ja(+oe,Se):1];if(Ml(De))return De}}return}}let _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){let[x,S,E,C,R,F,B,$,G]=_,K=[E||" ",R||" ",B].join("");if(K==="  "||K==="  /"||K===",,"||K===",,,"){let Q=[+S,Xt(+C,0,100),Xt(+F,0,100),$?Ja(+$,G):1];if(Ml(Q))return function([oe,Se,pe,ge]){function Ce(De){let Ve=(De+oe/30)%12,tt=Se*Math.min(pe,1-pe);return pe-tt*Math.max(-1,Math.min(Ve-3,9-Ve,1))}return oe=lv(oe),Se/=100,pe/=100,[Ce(0),Ce(8),Ce(4),ge]}(Q)}}}(n);return s?new Yt(...s,!1):void 0}get rgb(){let{r:n,g:s,b:h,a:p}=this,_=p||1/0;return this.overwriteGetter("rgb",[n/_,s/_,h/_,p])}get hcl(){return this.overwriteGetter("hcl",function(n){let[s,h,p,_]=Pu(n),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?lv(Math.atan2(p,h)*hq):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Pu(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){let[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(_=>Math.round(255*_)).join(",")},${p})`}static interpolate(n,s,h,p="rgb"){switch(p){case"rgb":{let[_,x,S,E]=Rl(n.rgb,s.rgb,h);return new Yt(_,x,S,E,!1)}case"hcl":{let[_,x,S,E]=n.hcl,[C,R,F,B]=s.hcl,$,G;if(isNaN(_)||isNaN(C))isNaN(_)?isNaN(C)?$=NaN:($=C,S!==1&&S!==0||(G=R)):($=_,F!==1&&F!==0||(G=x));else{let pe=C-_;C>_&&pe>180?pe-=360:C<_&&_-C>180&&(pe+=360),$=_+h*pe}let[K,Q,oe,Se]=function([pe,ge,Ce,De]){return pe=isNaN(pe)?0:pe*cq,Cu([Ce,Math.cos(pe)*ge,Math.sin(pe)*ge,De])}([$,G!=null?G:rs(x,R,h),rs(S,F,h),rs(E,B,h)]);return new Yt(K,Q,oe,Se,!1)}case"lab":{let[_,x,S,E]=Cu(Rl(n.lab,s.lab,h));return new Yt(_,x,S,E,!1)}}}}Yt.black=new Yt(0,0,0,1),Yt.white=new Yt(1,1,1,1),Yt.transparent=new Yt(0,0,0,0),Yt.red=new Yt(1,0,0,1);class Ol{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let Kd=["bottom","center","top"];class Hd{constructor(n,s,h,p,_,x){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=_,this.verticalAlign=x}}class bn{constructor(n){this.sections=n}static fromString(n){return new bn([new Hd(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof bn?n:bn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Li{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Li)return n;if(typeof n=="number")return new Li([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(let s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Li(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,h){return new Li(Rl(n.values,s.values,h))}}class wn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof wn)return n;if(typeof n=="number")return new wn([n]);if(Array.isArray(n)){for(let s of n)if(typeof s!="number")return;return new wn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,h){return new wn(Rl(n.values,s.values,h))}}class vi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof vi)return n;if(typeof n=="string"){let h=Yt.parse(n);return h?new vi([h]):void 0}if(!Array.isArray(n))return;let s=[];for(let h of n){if(typeof h!="string")return;let p=Yt.parse(h);if(!p)return;s.push(p)}return new vi(s)}toString(){return JSON.stringify(this.values)}static interpolate(n,s,h,p="rgb"){let _=[];if(n.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${n.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let x=0;x<n.values.length;x++)_.push(Yt.interpolate(n.values[x],s.values[x],h,p));return new vi(_)}}class Er extends Error{constructor(n){super(n),this.name="RuntimeError"}toJSON(){return this.message}}let mx=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Sn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Sn)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){let h=n[s],p=n[s+1];if(typeof h!="string"||!mx.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Sn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,s,h){let p=n.values,_=s.values;if(p.length!==_.length)throw new Er(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${s.toString()}`);let x=[];for(let S=0;S<p.length;S+=2){if(p[S]!==_[S])throw new Er(`Cannot interpolate values containing mismatched anchors. from[${S}]: ${p[S]}, to[${S}]: ${_[S]}`);x.push(p[S]);let[E,C]=p[S+1],[R,F]=_[S+1];x.push([rs(E,R,h),rs(C,F,h)])}return new Sn(x)}}class ha{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ha({name:n,available:!1}):null}}class cn{constructor(n,s,h){this.from=n,this.to=s,this.transition=h}static interpolate(n,s,h){return new cn(n,s,h)}static parse(n){return n instanceof cn?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new cn(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new cn(n.from,n.to,n.transition):typeof n=="string"?new cn(n,n,1):void 0}}function Or(l,n,s,h){return typeof l=="number"&&l>=0&&l<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[l,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[l,n,s,h]:[l,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function kl(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof cn||l instanceof Yt||l instanceof Ol||l instanceof bn||l instanceof Li||l instanceof wn||l instanceof vi||l instanceof Sn||l instanceof ha)return!0;if(Array.isArray(l)){for(let n of l)if(!kl(n))return!1;return!0}if(typeof l=="object"){for(let n in l)if(!kl(l[n]))return!1;return!0}return!1}function At(l){if(l===null)return Au;if(typeof l=="string")return Ht;if(typeof l=="boolean")return $t;if(typeof l=="number")return it;if(l instanceof Yt)return Hi;if(l instanceof cn)return Cl;if(l instanceof Ol)return Gd;if(l instanceof bn)return zs;if(l instanceof Li)return Wd;if(l instanceof wn)return qu;if(l instanceof vi)return To;if(l instanceof Sn)return Zd;if(l instanceof ha)return ii;if(Array.isArray(l)){let n=l.length,s;for(let h of l){let p=At(h);if(s){if(s===p)continue;s=jt;break}s=p}return $n(s||jt,n)}return Fs}function Ft(l){let n=typeof l;return l===null?"":n==="string"||n==="number"||n==="boolean"?String(l):l instanceof Yt||l instanceof cn||l instanceof bn||l instanceof Li||l instanceof wn||l instanceof vi||l instanceof Sn||l instanceof ha?l.toString():JSON.stringify(l)}class is{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!kl(n[1]))return s.error("invalid value");let h=n[1],p=At(h),_=s.expectedType;return p.kind!=="array"||p.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(p=_),new is(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let or={string:Ht,number:it,boolean:$t,object:Fs};class da{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1,_=n[0];if(_==="array"){let S,E;if(n.length>2){let C=n[1];if(typeof C!="string"||!(C in or)||C==="object")return s.error("The item type argument of \"array\" must be one of string, number, boolean",1);S=or[C],p++}else S=jt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error("The length argument to \"array\" must be a positive integer literal",2);E=n[2],p++}h=$n(S,E)}else{if(!or[_])throw new Error(`Types doesn't contain name = ${_}`);h=or[_]}let x=[];for(;p<n.length;p++){let S=s.parse(n[p],p,jt);if(!S)return null;x.push(S)}return new da(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){let h=this.args[s].evaluate(n);if(!uh(this.type,At(h)))return h;if(s===this.args.length-1)throw new Er(`Expected value to be of type ${Tr(this.type)}, but found ${Tr(At(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let Eo={"to-boolean":$t,"to-color":Hi,"to-number":it,"to-string":Ht};class Ao{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h=n[0];if(!Eo[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");let p=Eo[h],_=[];for(let x=1;x<n.length;x++){let S=s.parse(n[x],x,jt);if(!S)return null;_.push(S)}return new Ao(p,_)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(let p of this.args){if(s=p.evaluate(n),h=null,s instanceof Yt)return s;if(typeof s=="string"){let _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Or(s[0],s[1],s[2],s[3]),!h))return new Yt(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Er(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(let h of this.args){s=h.evaluate(n);let p=Li.parse(s);if(p)return p}throw new Er(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(let h of this.args){s=h.evaluate(n);let p=wn.parse(s);if(p)return p}throw new Er(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(let h of this.args){s=h.evaluate(n);let p=vi.parse(s);if(p)return p}throw new Er(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(let h of this.args){s=h.evaluate(n);let p=Sn.parse(s);if(p)return p}throw new Er(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(let h of this.args){if(s=h.evaluate(n),s===null)return 0;let p=Number(s);if(!isNaN(p))return p}throw new Er(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return bn.fromString(Ft(this.args[0].evaluate(n)));case"resolvedImage":return ha.fromString(Ft(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return Ft(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}let Xd=["Unknown","Point","LineString","Polygon"];class fv{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache.get(n);return s||(s=Yt.parse(n),this._parseColorCache.set(n,s)),s}}class Ru{constructor(n,s,h=[],p,_=new Ls,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=x,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,_={}){return s?this.concat(s,h,p)._parse(n,_):this._parse(n,_)}_parse(n,s){function h(p,_,x){return x==="assert"?new da(_,[p]):x==="coerce"?new Ao(_,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let _=this.registry[p];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){let S=this.expectedType,E=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||E.kind!=="value"){if(S.kind==="projectionDefinition"&&["string","array"].includes(E.kind)||["color","formatted","resolvedImage"].includes(S.kind)&&["value","string"].includes(E.kind)||["padding","numberArray"].includes(S.kind)&&["value","number","array"].includes(E.kind)||S.kind==="colorArray"&&["value","string","array"].includes(E.kind)||S.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(E.kind))x=h(x,S,s.typeAnnotation||"coerce");else if(this.checkSubtype(S,E))return null}else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof is)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){let S=new fv;try{x=new is(x.type,x.evaluate(S))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){let p=typeof n=="number"?this.path.concat(n):this.path,_=h?this.scope.concat(h):this.scope;return new Ru(this.registry,this._isConstant,p,s||null,_,this.errors)}error(n,...s){let h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Hr(h,n))}checkSubtype(n,s){let h=uh(n,s);return h&&this.error(h),h}}class hh{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(let s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);let h=[];for(let _=1;_<n.length-1;_+=2){let x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);let S=s.parse(n[_+1],_+1);if(!S)return null;h.push([x,S])}let p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new hh(h,p):null}outputDefined(){return this.result.outputDefined()}}class Yd{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");let h=n[1];return s.scope.has(h)?new Yd(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Jd{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let h=s.parse(n[1],1,it),p=s.parse(n[2],2,$n(s.expectedType||jt));return h&&p?new Jd(p.type.itemType,h,p):null}evaluate(n){let s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new Er(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Er(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Er(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Qd{constructor(n,s){this.type=$t,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);let h=s.parse(n[1],1,jt),p=s.parse(n[2],2,jt);return h&&p?ov(h.type,[$t,Ht,it,Au,jt])?new Qd(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(h.type)} instead`):null}evaluate(n){let s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ns(s,["boolean","string","number","null"]))throw new Er(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(At(s))} instead.`);if(!Ns(h,["string","array"]))throw new Er(`Expected second argument to be of type array or string, but found ${Tr(At(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Qa{constructor(n,s,h){this.type=it,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let h=s.parse(n[1],1,jt),p=s.parse(n[2],2,jt);if(!h||!p)return null;if(!ov(h.type,[$t,Ht,it,Au,jt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(h.type)} instead`);if(n.length===4){let _=s.parse(n[3],3,it);return _?new Qa(h,p,_):null}return new Qa(h,p)}evaluate(n){let s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ns(s,["boolean","string","number","null"]))throw new Er(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(At(s))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(n)),Ns(h,["string"])){let _=h.indexOf(s,p);return _===-1?-1:[...h.slice(0,_)].length}if(Ns(h,["array"]))return h.indexOf(s,p);throw new Er(`Expected second argument to be of type array or string, but found ${Tr(At(h))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Fi{constructor(n,s,h,p,_,x){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);let _={},x=[];for(let C=2;C<n.length-1;C+=2){let R=n[C],F=n[C+1];Array.isArray(R)||(R=[R]);let B=s.concat(C);if(R.length===0)return B.error("Expected at least one branch label.");for(let G of R){if(typeof G!="number"&&typeof G!="string")return B.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return B.error("Numeric branch labels must be integer values.");if(h){if(B.checkSubtype(h,At(G)))return null}else h=At(G);if(_[String(G)]!==void 0)return B.error("Branch labels must be unique.");_[String(G)]=x.length}let $=s.parse(F,C,p);if(!$)return null;p=p||$.type,x.push($)}let S=s.parse(n[1],1,jt);if(!S)return null;let E=s.parse(n[n.length-1],n.length-1,p);return E?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new Fi(h,p,S,_,x,E):null}evaluate(n){let s=this.input.evaluate(n);return(At(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Ou{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);let p=[];for(let x=1;x<n.length-1;x+=2){let S=s.parse(n[x],x,$t);if(!S)return null;let E=s.parse(n[x+1],x+1,h);if(!E)return null;p.push([S,E]),h=h||E.type}let _=s.parse(n[n.length-1],n.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new Ou(h,p,_)}evaluate(n){for(let[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(let[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class dh{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);let h=s.parse(n[1],1,jt),p=s.parse(n[2],2,it);if(!h||!p)return null;if(!ov(h.type,[$n(jt),Ht,jt]))return s.error(`Expected first argument to be of type array or string, but found ${Tr(h.type)} instead`);if(n.length===4){let _=s.parse(n[3],3,it);return _?new dh(h.type,h,p,_):null}return new dh(h.type,h,p)}evaluate(n){let s=this.input.evaluate(n),h=this.beginIndex.evaluate(n),p;if(this.endIndex&&(p=this.endIndex.evaluate(n)),Ns(s,["string"]))return[...s].slice(h,p).join("");if(Ns(s,["array"]))return s.slice(h,p);throw new Er(`Expected first argument to be of type array or string, but found ${Tr(At(s))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Dl(l,n){let s=l.length-1,h,p,_=0,x=s,S=0;for(;_<=x;)if(S=Math.floor((_+x)/2),h=l[S],p=l[S+1],h<=n){if(S===s||n<p)return S;_=S+1}else{if(!(h>n))throw new Er("Input is not a number.");x=S-1}return 0}class ni{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(let[p,_]of h)this.labels.push(p),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");let h=s.parse(n[1],1,it);if(!h)return null;let p=[],_=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){let S=x===1?-1/0:n[x],E=n[x+1],C=x,R=x+1;if(typeof S!="number")return s.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",C);if(p.length&&p[p.length-1][0]>=S)return s.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",C);let F=s.parse(E,R,_);if(!F)return null;_=_||F.type,p.push([S,F])}return new ni(_,h,p)}evaluate(n){let s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);let p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);let _=s.length;return p>=s[_-1]?h[_-1].evaluate(n):h[Dl(s,p)].evaluate(n)}eachChild(n){n(this.input);for(let s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function vx(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var fh,pv,fq=function(){if(pv)return fh;function l(n,s,h,p){this.cx=3*n,this.bx=3*(h-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=s,this.p2x=h,this.p2y=p}return pv=1,fh=l,l.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,s){if(s===void 0&&(s=1e-6),n<0)return 0;if(n>1)return 1;for(var h=n,p=0;p<8;p++){var _=this.sampleCurveX(h)-n;if(Math.abs(_)<s)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var S=0,E=1;for(h=n,p=0;p<20&&(_=this.sampleCurveX(h),!(Math.abs(_-n)<s));p++)n>_?S=h:E=h,h=.5*(E-S)+S;return h},solve:function(n,s){return this.sampleCurveY(this.solveCurveX(n,s))}},fh}(),ku=vx(fq);class Xi{constructor(n,s,h,p,_){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(let[x,S]of _)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,p){let _=0;if(n.name==="exponential")_=ph(s,n.base,h,p);else if(n.name==="linear")_=ph(s,1,h,p);else if(n.name==="cubic-bezier"){let x=n.controlPoints;_=new ku(x[0],x[1],x[2],x[3]).solve(ph(s,1,h,p))}return _}static parse(n,s){let[h,p,_,...x]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){let C=p[1];if(typeof C!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:C}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{let C=p.slice(1);if(C.length!==4||C.some(R=>typeof R!="number"||R<0||R>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:C}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,it),!_)return null;let S=[],E=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||s.expectedType==To?s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType):E=Hi;for(let C=0;C<x.length;C+=2){let R=x[C],F=x[C+1],B=C+3,$=C+4;if(typeof R!="number")return s.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",B);if(S.length&&S[S.length-1][0]>=R)return s.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",B);let G=s.parse(F,$,E);if(!G)return null;E=E||G.type,S.push([R,G])}return Bs(E,it)||Bs(E,Cl)||Bs(E,Hi)||Bs(E,Wd)||Bs(E,qu)||Bs(E,To)||Bs(E,Zd)||Bs(E,$n(it))?new Xi(E,h,p,_,S):s.error(`Type ${Tr(E)} is not interpolatable.`)}evaluate(n){let s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);let p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);let _=s.length;if(p>=s[_-1])return h[_-1].evaluate(n);let x=Dl(s,p),S=Xi.interpolationFactor(this.interpolation,p,s[x],s[x+1]),E=h[x].evaluate(n),C=h[x+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return rs(E,C,S);case"color":return Yt.interpolate(E,C,S);case"padding":return Li.interpolate(E,C,S);case"colorArray":return vi.interpolate(E,C,S);case"numberArray":return wn.interpolate(E,C,S);case"variableAnchorOffsetCollection":return Sn.interpolate(E,C,S);case"array":return Rl(E,C,S);case"projectionDefinition":return cn.interpolate(E,C,S)}case"interpolate-hcl":switch(this.type.kind){case"color":return Yt.interpolate(E,C,S,"hcl");case"colorArray":return vi.interpolate(E,C,S,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Yt.interpolate(E,C,S,"lab");case"colorArray":return vi.interpolate(E,C,S,"lab")}}}eachChild(n){n(this.input);for(let s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ph(l,n,s,h){let p=h-s,_=l-s;return p===0?0:n===1?_/p:(Math.pow(n,_)-1)/(Math.pow(n,p)-1)}let qo={color:Yt.interpolate,number:rs,padding:Li.interpolate,numberArray:wn.interpolate,colorArray:vi.interpolate,variableAnchorOffsetCollection:Sn.interpolate,array:Rl};class mh{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h=null,p=s.expectedType;p&&p.kind!=="value"&&(h=p);let _=[];for(let S of n.slice(1)){let E=s.parse(S,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,_.push(E)}if(!h)throw new Error("No output type");let x=p&&_.some(S=>uh(p,S.type));return new mh(x?jt:h,_)}evaluate(n){let s,h=null,p=0;for(let _ of this.args)if(p++,h=_.evaluate(n),h&&h instanceof ha&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function vh(l,n){return l==="=="||l==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function gh(l,n,s,h){return h.compare(n,s)===0}function hn(l,n,s){let h=l!=="=="&&l!=="!=";return class nye{constructor(_,x,S){this.type=$t,this.lhs=_,this.rhs=x,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");let S=_[0],E=x.parse(_[1],1,jt);if(!E)return null;if(!vh(S,E.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${Tr(E.type)}'.`);let C=x.parse(_[2],2,jt);if(!C)return null;if(!vh(S,C.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${Tr(C.type)}'.`);if(E.type.kind!==C.type.kind&&E.type.kind!=="value"&&C.type.kind!=="value")return x.error(`Cannot compare types '${Tr(E.type)}' and '${Tr(C.type)}'.`);h&&(E.type.kind==="value"&&C.type.kind!=="value"?E=new da(C.type,[E]):E.type.kind!=="value"&&C.type.kind==="value"&&(C=new da(E.type,[C])));let R=null;if(_.length===4){if(E.type.kind!=="string"&&C.type.kind!=="string"&&E.type.kind!=="value"&&C.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(R=x.parse(_[3],3,Gd),!R)return null}return new nye(E,C,R)}evaluate(_){let x=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){let E=At(x),C=At(S);if(E.kind!==C.kind||E.kind!=="string"&&E.kind!=="number")throw new Er(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${E.kind}, ${C.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let E=At(x),C=At(S);if(E.kind!=="string"||C.kind!=="string")return n(_,x,S)}return this.collator?s(_,x,S,this.collator.evaluate(_)):n(_,x,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}let gx=hn("==",function(l,n,s){return n===s},gh),ef=hn("!=",function(l,n,s){return n!==s},function(l,n,s,h){return!gh(0,n,s,h)}),pq=hn("<",function(l,n,s){return n<s},function(l,n,s,h){return h.compare(n,s)<0}),mv=hn(">",function(l,n,s){return n>s},function(l,n,s,h){return h.compare(n,s)>0}),mq=hn("<=",function(l,n,s){return n<=s},function(l,n,s,h){return h.compare(n,s)<=0}),vq=hn(">=",function(l,n,s){return n>=s},function(l,n,s,h){return h.compare(n,s)>=0});class tf{constructor(n,s,h){this.type=Gd,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");let h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");let p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,$t);if(!p)return null;let _=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,$t);if(!_)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Ht),!x)?null:new tf(p,_,x)}evaluate(n){return new Ol(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class vv{constructor(n,s,h,p,_){this.type=Ht,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");let h=s.parse(n[1],1,it);if(!h)return null;let p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let _=null;if(p.locale&&(_=s.parse(p.locale,1,Ht),!_))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,Ht),!x))return null;let S=null;if(p["min-fraction-digits"]&&(S=s.parse(p["min-fraction-digits"],1,it),!S))return null;let E=null;return p["max-fraction-digits"]&&(E=s.parse(p["max-fraction-digits"],1,it),!E)?null:new vv(h,_,x,S,E)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Ll{constructor(n){this.type=zs,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");let p=[],_=!1;for(let x=1;x<=n.length-1;++x){let S=n[x];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let E=null;if(S["font-scale"]&&(E=s.parse(S["font-scale"],1,it),!E))return null;let C=null;if(S["text-font"]&&(C=s.parse(S["text-font"],1,$n(Ht)),!C))return null;let R=null;if(S["text-color"]&&(R=s.parse(S["text-color"],1,Hi),!R))return null;let F=null;if(S["vertical-align"]){if(typeof S["vertical-align"]=="string"&&!Kd.includes(S["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${S["vertical-align"]}' instead.`);if(F=s.parse(S["vertical-align"],1,Ht),!F)return null}let B=p[p.length-1];B.scale=E,B.font=C,B.textColor=R,B.verticalAlign=F}else{let E=s.parse(n[x],1,jt);if(!E)return null;let C=E.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,p.push({content:E,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ll(p)}evaluate(n){return new bn(this.sections.map(s=>{let h=s.content.evaluate(n);return At(h)===ii?new Hd("",h,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(n):null):new Hd(Ft(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null,s.verticalAlign?s.verticalAlign.evaluate(n):null)}))}eachChild(n){for(let s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor),s.verticalAlign&&n(s.verticalAlign)}outputDefined(){return!1}}class gv{constructor(n){this.type=ii,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");let h=s.parse(n[1],1,Ht);return h?new gv(h):s.error("No image name provided.")}evaluate(n){let s=this.input.evaluate(n),h=ha.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class rf{constructor(n){this.type=it,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);let h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Tr(h.type)} instead.`):new rf(h):null}evaluate(n){let s=this.input.evaluate(n);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new Er(`Expected value to be of type string or array, but found ${Tr(At(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}let eo=8192;function gq(l,n){let s=(180+l[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*eo),Math.round(h*p*eo)]}function nf(l,n){let s=Math.pow(2,n.z);return[(p=(l[0]/eo+n.x)/s,360*p-180),(h=(l[1]/eo+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function yh(l,n){l[0]=Math.min(l[0],n[0]),l[1]=Math.min(l[1],n[1]),l[2]=Math.max(l[2],n[0]),l[3]=Math.max(l[3],n[1])}function _h(l,n){return!(l[0]<=n[0]||l[2]>=n[2]||l[1]<=n[1]||l[3]>=n[3])}function yq(l,n,s){let h=l[0]-n[0],p=l[1]-n[1],_=l[0]-s[0],x=l[1]-s[1];return h*x-_*p==0&&h*_<=0&&p*x<=0}function af(l,n,s,h){return(p=[h[0]-s[0],h[1]-s[1]])[0]*(_=[n[0]-l[0],n[1]-l[1]])[1]-p[1]*_[0]!=0&&!(!_x(l,n,s,h)||!_x(s,h,l,n));var p,_}function _q(l,n,s){for(let h of s)for(let p=0;p<h.length-1;++p)if(af(l,n,h[p],h[p+1]))return!0;return!1}function Fl(l,n,s=!1){let h=!1;for(let S of n)for(let E=0;E<S.length-1;E++){if(yq(l,S[E],S[E+1]))return s;(_=S[E])[1]>(p=l)[1]!=(x=S[E+1])[1]>p[1]&&p[0]<(x[0]-_[0])*(p[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var p,_,x;return h}function yx(l,n){for(let s of n)if(Fl(l,s))return!0;return!1}function yv(l,n){for(let s of l)if(!Fl(s,n))return!1;for(let s=0;s<l.length-1;++s)if(_q(l[s],l[s+1],n))return!1;return!0}function xq(l,n){for(let s of n)if(yv(l,s))return!0;return!1}function _x(l,n,s,h){let p=h[0]-s[0],_=h[1]-s[1],x=(l[0]-s[0])*_-p*(l[1]-s[1]),S=(n[0]-s[0])*_-p*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function _v(l,n,s){let h=[];for(let p=0;p<l.length;p++){let _=[];for(let x=0;x<l[p].length;x++){let S=gq(l[p][x],s);yh(n,S),_.push(S)}h.push(_)}return h}function xx(l,n,s){let h=[];for(let p=0;p<l.length;p++){let _=_v(l[p],n,s);h.push(_)}return h}function of(l,n,s,h){if(l[0]<s[0]||l[0]>s[2]){let p=.5*h,_=l[0]-s[0]>p?-h:s[0]-l[0]>p?h:0;_===0&&(_=l[0]-s[2]>p?-h:s[2]-l[0]>p?h:0),l[0]+=_}yh(n,l)}function bx(l,n,s,h){let p=Math.pow(2,h.z)*eo,_=[h.x*eo,h.y*eo],x=[];for(let S of l)for(let E of S){let C=[E.x+_[0],E.y+_[1]];of(C,n,s,p),x.push(C)}return x}function wx(l,n,s,h){let p=Math.pow(2,h.z)*eo,_=[h.x*eo,h.y*eo],x=[];for(let E of l){let C=[];for(let R of E){let F=[R.x+_[0],R.y+_[1]];yh(n,F),C.push(F)}x.push(C)}if(n[2]-n[0]<=p/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(let E of x)for(let C of E)of(C,n,s,p)}var S;return x}class zl{constructor(n,s){this.type=$t,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(kl(n[1])){let h=n[1];if(h.type==="FeatureCollection"){let p=[];for(let _ of h.features){let{type:x,coordinates:S}=_.geometry;x==="Polygon"&&p.push(S),x==="MultiPolygon"&&p.push(...S)}if(p.length)return new zl(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){let p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new zl(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new zl(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){let p=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){let S=_v(h.coordinates,_,x),E=bx(s.geometry(),p,_,x);if(!_h(p,_))return!1;for(let C of E)if(!Fl(C,S))return!1}if(h.type==="MultiPolygon"){let S=xx(h.coordinates,_,x),E=bx(s.geometry(),p,_,x);if(!_h(p,_))return!1;for(let C of E)if(!yx(C,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){let p=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){let S=_v(h.coordinates,_,x),E=wx(s.geometry(),p,_,x);if(!_h(p,_))return!1;for(let C of E)if(!yv(C,S))return!1}if(h.type==="MultiPolygon"){let S=xx(h.coordinates,_,x),E=wx(s.geometry(),p,_,x);if(!_h(p,_))return!1;for(let C of E)if(!xq(C,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let xv=class{constructor(l=[],n=(s,h)=>s<h?-1:s>h?1:0){if(this.data=l,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:n,compare:s}=this,h=n[l];for(;l>0;){let p=l-1>>1,_=n[p];if(s(h,_)>=0)break;n[l]=_,l=p}n[l]=h}_down(l){let{data:n,compare:s}=this,h=this.length>>1,p=n[l];for(;l<h;){let _=1+(l<<1),x=_+1;if(x<this.length&&s(n[x],n[_])<0&&(_=x),s(n[_],p)>=0)break;n[l]=n[_],l=_}n[l]=p}};function bv(l,n,s=0,h=l.length-1,p=bq){for(;h>s;){if(h-s>600){let E=h-s+1,C=n-s+1,R=Math.log(E),F=.5*Math.exp(2*R/3),B=.5*Math.sqrt(R*F*(E-F)/E)*(C-E/2<0?-1:1);bv(l,n,Math.max(s,Math.floor(n-C*F/E+B)),Math.min(h,Math.floor(n+(E-C)*F/E+B)),p)}let _=l[n],x=s,S=h;for(xh(l,s,n),p(l[h],_)>0&&xh(l,s,h);x<S;){for(xh(l,x,S),x++,S--;p(l[x],_)<0;)x++;for(;p(l[S],_)>0;)S--}p(l[s],_)===0?xh(l,s,S):(S++,xh(l,S,h)),S<=n&&(s=S+1),n<=S&&(h=S-1)}}function xh(l,n,s){let h=l[n];l[n]=l[s],l[s]=h}function bq(l,n){return l<n?-1:l>n?1:0}function bh(l,n){if(l.length<=1)return[l];let s=[],h,p;for(let _ of l){let x=wq(_);x!==0&&(_.area=Math.abs(x),p===void 0&&(p=x<0),p===x<0?(h&&s.push(h),h=[_]):h.push(_))}if(h&&s.push(h),n>1)for(let _=0;_<s.length;_++)s[_].length<=n||(bv(s[_],n,1,s[_].length-1,Sx),s[_]=s[_].slice(0,n));return s}function Sx(l,n){return n.area-l.area}function wq(l){let n=0;for(let s,h,p=0,_=l.length,x=_-1;p<_;x=p++)s=l[p],h=l[x],n+=(h.x-s.x)*(s.y+h.y);return n}let Tx=1/298.257223563,Ex=Tx*(2-Tx),wv=Math.PI/180;class Sv{constructor(n){let s=6378.137*wv*1e3,h=Math.cos(n*wv),p=1/(1-Ex*(1-h*h)),_=Math.sqrt(p);this.kx=s*_*h,this.ky=s*_*p*(1-Ex)}distance(n,s){let h=this.wrap(n[0]-s[0])*this.kx,p=(n[1]-s[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(n,s){let h,p,_,x,S=1/0;for(let E=0;E<n.length-1;E++){let C=n[E][0],R=n[E][1],F=this.wrap(n[E+1][0]-C)*this.kx,B=(n[E+1][1]-R)*this.ky,$=0;F===0&&B===0||($=(this.wrap(s[0]-C)*this.kx*F+(s[1]-R)*this.ky*B)/(F*F+B*B),$>1?(C=n[E+1][0],R=n[E+1][1]):$>0&&(C+=F/this.kx*$,R+=B/this.ky*$)),F=this.wrap(s[0]-C)*this.kx,B=(s[1]-R)*this.ky;let G=F*F+B*B;G<S&&(S=G,h=C,p=R,_=E,x=$)}return{point:[h,p],index:_,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Ax(l,n){return n[0]-l[0]}function sf(l){return l[1]-l[0]+1}function ns(l,n){return l[1]>=l[0]&&l[1]<n}function cr(l,n){if(l[0]>l[1])return[null,null];let s=sf(l);if(n){if(s===2)return[l,null];let p=Math.floor(s/2);return[[l[0],l[0]+p],[l[0]+p,l[1]]]}if(s===1)return[l,null];let h=Math.floor(s/2)-1;return[[l[0],l[0]+h],[l[0]+h+1,l[1]]]}function Tv(l,n){if(!ns(n,l.length))return[1/0,1/0,-1/0,-1/0];let s=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)yh(s,l[h]);return s}function Ev(l){let n=[1/0,1/0,-1/0,-1/0];for(let s of l)for(let h of s)yh(n,h);return n}function qx(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Av(l,n,s){if(!qx(l)||!qx(n))return NaN;let h=0,p=0;return l[2]<n[0]&&(h=n[0]-l[2]),l[0]>n[2]&&(h=l[0]-n[2]),l[1]>n[3]&&(p=l[1]-n[3]),l[3]<n[1]&&(p=n[1]-l[3]),s.distance([0,0],[h,p])}function Nl(l,n,s){let h=s.pointOnLine(n,l);return s.distance(l,h.point)}function qv(l,n,s,h,p){let _=Math.min(Nl(l,[s,h],p),Nl(n,[s,h],p)),x=Math.min(Nl(s,[l,n],p),Nl(h,[l,n],p));return Math.min(_,x)}function Sq(l,n,s,h,p){if(!ns(n,l.length)||!ns(h,s.length))return 1/0;let _=1/0;for(let x=n[0];x<n[1];++x){let S=l[x],E=l[x+1];for(let C=h[0];C<h[1];++C){let R=s[C],F=s[C+1];if(af(S,E,R,F))return 0;_=Math.min(_,qv(S,E,R,F,p))}}return _}function Tq(l,n,s,h,p){if(!ns(n,l.length)||!ns(h,s.length))return NaN;let _=1/0;for(let x=n[0];x<=n[1];++x)for(let S=h[0];S<=h[1];++S)if(_=Math.min(_,p.distance(l[x],s[S])),_===0)return _;return _}function Eq(l,n,s){if(Fl(l,n,!0))return 0;let h=1/0;for(let p of n){let _=p[0],x=p[p.length-1];if(_!==x&&(h=Math.min(h,Nl(l,[x,_],s)),h===0))return h;let S=s.pointOnLine(p,l);if(h=Math.min(h,s.distance(l,S.point)),h===0)return h}return h}function Aq(l,n,s,h){if(!ns(n,l.length))return NaN;for(let _=n[0];_<=n[1];++_)if(Fl(l[_],s,!0))return 0;let p=1/0;for(let _=n[0];_<n[1];++_){let x=l[_],S=l[_+1];for(let E of s)for(let C=0,R=E.length,F=R-1;C<R;F=C++){let B=E[F],$=E[C];if(af(x,S,B,$))return 0;p=Math.min(p,qv(x,S,B,$,h))}}return p}function Ix(l,n){for(let s of l)for(let h of s)if(Fl(h,n,!0))return!0;return!1}function qq(l,n,s,h=1/0){let p=Ev(l),_=Ev(n);if(h!==1/0&&Av(p,_,s)>=h)return h;if(_h(p,_)){if(Ix(l,n))return 0}else if(Ix(n,l))return 0;let x=1/0;for(let S of l)for(let E=0,C=S.length,R=C-1;E<C;R=E++){let F=S[R],B=S[E];for(let $ of n)for(let G=0,K=$.length,Q=K-1;G<K;Q=G++){let oe=$[Q],Se=$[G];if(af(F,B,oe,Se))return 0;x=Math.min(x,qv(F,B,oe,Se,s))}}return x}function Px(l,n,s,h,p,_){if(!_)return;let x=Av(Tv(h,_),p,s);x<n&&l.push([x,_,[0,0]])}function lf(l,n,s,h,p,_,x){if(!_||!x)return;let S=Av(Tv(h,_),Tv(p,x),s);S<n&&l.push([S,_,x])}function uf(l,n,s,h,p=1/0){let _=Math.min(h.distance(l[0],s[0][0]),p);if(_===0)return _;let x=new xv([[0,[0,l.length-1],[0,0]]],Ax),S=Ev(s);for(;x.length>0;){let E=x.pop();if(E[0]>=_)continue;let C=E[1],R=n?50:100;if(sf(C)<=R){if(!ns(C,l.length))return NaN;if(n){let F=Aq(l,C,s,h);if(isNaN(F)||F===0)return F;_=Math.min(_,F)}else for(let F=C[0];F<=C[1];++F){let B=Eq(l[F],s,h);if(_=Math.min(_,B),_===0)return 0}}else{let F=cr(C,n);Px(x,_,h,l,S,F[0]),Px(x,_,h,l,S,F[1])}}return _}function cf(l,n,s,h,p,_=1/0){let x=Math.min(_,p.distance(l[0],s[0]));if(x===0)return x;let S=new xv([[0,[0,l.length-1],[0,s.length-1]]],Ax);for(;S.length>0;){let E=S.pop();if(E[0]>=x)continue;let C=E[1],R=E[2],F=n?50:100,B=h?50:100;if(sf(C)<=F&&sf(R)<=B){if(!ns(C,l.length)&&ns(R,s.length))return NaN;let $;if(n&&h)$=Sq(l,C,s,R,p),x=Math.min(x,$);else if(n&&!h){let G=l.slice(C[0],C[1]+1);for(let K=R[0];K<=R[1];++K)if($=Nl(s[K],G,p),x=Math.min(x,$),x===0)return x}else if(!n&&h){let G=s.slice(R[0],R[1]+1);for(let K=C[0];K<=C[1];++K)if($=Nl(l[K],G,p),x=Math.min(x,$),x===0)return x}else $=Tq(l,C,s,R,p),x=Math.min(x,$)}else{let $=cr(C,n),G=cr(R,h);lf(S,x,p,l,s,$[0],G[0]),lf(S,x,p,l,s,$[0],G[1]),lf(S,x,p,l,s,$[1],G[0]),lf(S,x,p,l,s,$[1],G[1])}}return x}function Iv(l){return l.type==="MultiPolygon"?l.coordinates.map(n=>({type:"Polygon",coordinates:n})):l.type==="MultiLineString"?l.coordinates.map(n=>({type:"LineString",coordinates:n})):l.type==="MultiPoint"?l.coordinates.map(n=>({type:"Point",coordinates:n})):[l]}class Bl{constructor(n,s){this.type=it,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(kl(n[1])){let h=n[1];if(h.type==="FeatureCollection")return new Bl(h,h.features.map(p=>Iv(p.geometry)).flat());if(h.type==="Feature")return new Bl(h,Iv(h.geometry));if("type"in h&&"coordinates"in h)return new Bl(h,Iv(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){let p=s.geometry(),_=p.flat().map(E=>nf([E.x,E.y],s.canonical));if(p.length===0)return NaN;let x=new Sv(_[0][1]),S=1/0;for(let E of h){switch(E.type){case"Point":S=Math.min(S,cf(_,!1,[E.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,cf(_,!1,E.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,uf(_,!1,E.coordinates,x,S))}if(S===0)return S}return S}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){let p=s.geometry(),_=p.flat().map(E=>nf([E.x,E.y],s.canonical));if(p.length===0)return NaN;let x=new Sv(_[0][1]),S=1/0;for(let E of h){switch(E.type){case"Point":S=Math.min(S,cf(_,!0,[E.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,cf(_,!0,E.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,uf(_,!0,E.coordinates,x,S))}if(S===0)return S}return S}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,h){let p=s.geometry();if(p.length===0||p[0].length===0)return NaN;let _=bh(p,0).map(E=>E.map(C=>C.map(R=>nf([R.x,R.y],s.canonical)))),x=new Sv(_[0][0][0][1]),S=1/0;for(let E of h)for(let C of _){switch(E.type){case"Point":S=Math.min(S,uf([E.coordinates],!1,C,x,S));break;case"LineString":S=Math.min(S,uf(E.coordinates,!0,C,x,S));break;case"Polygon":S=Math.min(S,qq(C,E.coordinates,x,S))}if(S===0)return S}return S}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class wh{constructor(n){this.type=jt,this.key=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);let h=n[1];return h==null?s.error("Global state property must be defined."):typeof h!="string"?s.error(`Global state property must be string, but found ${typeof n[1]} instead.`):new wh(h)}evaluate(n){var s;let h=(s=n.globals)===null||s===void 0?void 0:s.globalState;return h&&Object.keys(h).length!==0?Mu(h,this.key):null}eachChild(){}outputDefined(){return!1}}let Du={"==":gx,"!=":ef,">":mv,"<":pq,">=":vq,"<=":mq,array:da,at:Jd,boolean:da,case:Ou,coalesce:mh,collator:tf,format:Ll,image:gv,in:Qd,"index-of":Qa,interpolate:Xi,"interpolate-hcl":Xi,"interpolate-lab":Xi,length:rf,let:hh,literal:is,match:Fi,number:da,"number-format":vv,object:da,slice:dh,step:ni,string:da,"to-boolean":Ao,"to-color":Ao,"to-number":Ao,"to-string":Ao,var:Yd,within:zl,distance:Bl,"global-state":wh};class Ia{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){let h=n[0],p=Ia.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let _=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=x.filter(([C])=>!Array.isArray(C)||C.length===n.length-1),E=null;for(let[C,R]of S){E=new Ru(s.registry,hf,s.path,null,s.scope);let F=[],B=!1;for(let $=1;$<n.length;$++){let G=n[$],K=Array.isArray(C)?C[$-1]:C.type,Q=E.parse(G,1+F.length,K);if(!Q){B=!0;break}F.push(Q)}if(!B)if(Array.isArray(C)&&C.length!==F.length)E.error(`Expected ${C.length} arguments, but found ${F.length} instead.`);else{for(let $=0;$<F.length;$++){let G=Array.isArray(C)?C[$]:C.type,K=F[$];E.concat($+1).checkSubtype(G,K.type)}if(E.errors.length===0)return new Ia(h,_,R,F)}}if(S.length===1)s.errors.push(...E.errors);else{let C=(S.length?S:x).map(([F])=>{return B=F,Array.isArray(B)?`(${B.map(Tr).join(", ")})`:`(${Tr(B.type)}...)`;var B}).join(" | "),R=[];for(let F=1;F<n.length;F++){let B=s.parse(n[F],1+R.length);if(!B)return null;R.push(Tr(B.type))}s.error(`Expected arguments of type ${C}, but found (${R.join(", ")}) instead.`)}return null}static register(n,s){Ia.definitions=s;for(let h in s)n[h]=Ia}}function Cx(l,[n,s,h,p]){n=n.evaluate(l),s=s.evaluate(l),h=h.evaluate(l);let _=p?p.evaluate(l):1,x=Or(n,s,h,_);if(x)throw new Er(x);return new Yt(n/255,s/255,h/255,_,!1)}function Mx(l,n){return l in n}function Pv(l,n){let s=n[l];return s===void 0?null:s}function jl(l){return{type:l}}function hf(l){if(l instanceof Yd)return hf(l.boundExpression);if(l instanceof Ia&&l.name==="error"||l instanceof tf||l instanceof zl||l instanceof Bl||l instanceof wh)return!1;let n=l instanceof Ao||l instanceof da,s=!0;return l.eachChild(h=>{s=n?s&&hf(h):s&&h instanceof is}),!!s&&df(l)&&ff(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function df(l){if(l instanceof Ia&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof zl||l instanceof Bl)return!1;let n=!0;return l.eachChild(s=>{n&&!df(s)&&(n=!1)}),n}function Sh(l){if(l instanceof Ia&&l.name==="feature-state")return!1;let n=!0;return l.eachChild(s=>{n&&!Sh(s)&&(n=!1)}),n}function ff(l,n){if(l instanceof Ia&&n.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild(h=>{s&&!ff(h,n)&&(s=!1)}),s}function Rx(l){return{result:"success",value:l}}function Lu(l){return{result:"error",value:l}}function Us(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Ox(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Cv(l){return!!l.expression&&l.expression.interpolated}function er(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Th(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&At(l)===Fs}function Iq(l){return l}function kx(l,n){let s=l.stops&&typeof l.stops[0][0]=="object",h=s||!(s||l.property!==void 0),p=l.type||(Cv(n)?"exponential":"interval"),_=function(R){switch(R.type){case"color":return Yt.parse;case"padding":return Li.parse;case"numberArray":return wn.parse;case"colorArray":return vi.parse;default:return null}}(n);if(_&&((l=un({},l)).stops&&(l.stops=l.stops.map(R=>[R[0],_(R[1])])),l.default=_(l.default?l.default:n.default)),l.colorSpace&&(x=l.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var x;let S=function(R){switch(R){case"exponential":return Lx;case"interval":return Pq;case"categorical":return Dx;case"identity":return Cq;default:throw new Error(`Unknown function type "${R}"`)}}(p),E,C;if(p==="categorical"){E=Object.create(null);for(let R of l.stops)E[R[0]]=R[1];C=typeof l.stops[0][0]}if(s){let R={},F=[];for(let G=0;G<l.stops.length;G++){let K=l.stops[G],Q=K[0].zoom;R[Q]===void 0&&(R[Q]={zoom:Q,type:l.type,property:l.property,default:l.default,stops:[]},F.push(Q)),R[Q].stops.push([K[0].value,K[1]])}let B=[];for(let G of F)B.push([R[G].zoom,kx(R[G],n)]);let $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:Xi.interpolationFactor.bind(void 0,$),zoomStops:B.map(G=>G[0]),evaluate:({zoom:G},K)=>Lx({stops:B,base:l.base},n,G).evaluate(G,K)}}if(h){let R=p==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Xi.interpolationFactor.bind(void 0,R),zoomStops:l.stops.map(F=>F[0]),evaluate:({zoom:F})=>S(l,n,F,E,C)}}return{kind:"source",evaluate(R,F){let B=F&&F.properties?F.properties[l.property]:void 0;return B===void 0?Vs(l.default,n.default):S(l,n,B,E,C)}}}function Vs(l,n,s){return l!==void 0?l:n!==void 0?n:s!==void 0?s:void 0}function Dx(l,n,s,h,p){return Vs(typeof s===p?h[s]:void 0,l.default,n.default)}function Pq(l,n,s){if(er(s)!=="number")return Vs(l.default,n.default);let h=l.stops.length;if(h===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[h-1][0])return l.stops[h-1][1];let p=Dl(l.stops.map(_=>_[0]),s);return l.stops[p][1]}function Lx(l,n,s){let h=l.base!==void 0?l.base:1;if(er(s)!=="number")return Vs(l.default,n.default);let p=l.stops.length;if(p===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[p-1][0])return l.stops[p-1][1];let _=Dl(l.stops.map(R=>R[0]),s),x=function(R,F,B,$){let G=$-B,K=R-B;return G===0?0:F===1?K/G:(Math.pow(F,K)-1)/(Math.pow(F,G)-1)}(s,h,l.stops[_][0],l.stops[_+1][0]),S=l.stops[_][1],E=l.stops[_+1][1],C=qo[n.type]||Iq;return typeof S.evaluate=="function"?{evaluate(...R){let F=S.evaluate.apply(void 0,R),B=E.evaluate.apply(void 0,R);if(F!==void 0&&B!==void 0)return C(F,B,x,l.colorSpace)}}:C(S,E,x,l.colorSpace)}function Cq(l,n,s){switch(n.type){case"color":s=Yt.parse(s);break;case"formatted":s=bn.fromString(s.toString());break;case"resolvedImage":s=ha.fromString(s.toString());break;case"padding":s=Li.parse(s);break;case"colorArray":s=vi.parse(s);break;case"numberArray":s=wn.parse(s);break;default:er(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Vs(s,l.default,n.default)}Ia.register(Du,{error:[{kind:"error"},[Ht],(l,[n])=>{throw new Er(n.evaluate(l))}],typeof:[Ht,[jt],(l,[n])=>Tr(At(n.evaluate(l)))],"to-rgba":[$n(it,4),[Hi],(l,[n])=>{let[s,h,p,_]=n.evaluate(l).rgb;return[255*s,255*h,255*p,_]}],rgb:[Hi,[it,it,it],Cx],rgba:[Hi,[it,it,it,it],Cx],has:{type:$t,overloads:[[[Ht],(l,[n])=>Mx(n.evaluate(l),l.properties())],[[Ht,Fs],(l,[n,s])=>Mx(n.evaluate(l),s.evaluate(l))]]},get:{type:jt,overloads:[[[Ht],(l,[n])=>Pv(n.evaluate(l),l.properties())],[[Ht,Fs],(l,[n,s])=>Pv(n.evaluate(l),s.evaluate(l))]]},"feature-state":[jt,[Ht],(l,[n])=>Pv(n.evaluate(l),l.featureState||{})],properties:[Fs,[],l=>l.properties()],"geometry-type":[Ht,[],l=>l.geometryType()],id:[jt,[],l=>l.id()],zoom:[it,[],l=>l.globals.zoom],"heatmap-density":[it,[],l=>l.globals.heatmapDensity||0],elevation:[it,[],l=>l.globals.elevation||0],"line-progress":[it,[],l=>l.globals.lineProgress||0],accumulated:[jt,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[it,jl(it),(l,n)=>{let s=0;for(let h of n)s+=h.evaluate(l);return s}],"*":[it,jl(it),(l,n)=>{let s=1;for(let h of n)s*=h.evaluate(l);return s}],"-":{type:it,overloads:[[[it,it],(l,[n,s])=>n.evaluate(l)-s.evaluate(l)],[[it],(l,[n])=>-n.evaluate(l)]]},"/":[it,[it,it],(l,[n,s])=>n.evaluate(l)/s.evaluate(l)],"%":[it,[it,it],(l,[n,s])=>n.evaluate(l)%s.evaluate(l)],ln2:[it,[],()=>Math.LN2],pi:[it,[],()=>Math.PI],e:[it,[],()=>Math.E],"^":[it,[it,it],(l,[n,s])=>Math.pow(n.evaluate(l),s.evaluate(l))],sqrt:[it,[it],(l,[n])=>Math.sqrt(n.evaluate(l))],log10:[it,[it],(l,[n])=>Math.log(n.evaluate(l))/Math.LN10],ln:[it,[it],(l,[n])=>Math.log(n.evaluate(l))],log2:[it,[it],(l,[n])=>Math.log(n.evaluate(l))/Math.LN2],sin:[it,[it],(l,[n])=>Math.sin(n.evaluate(l))],cos:[it,[it],(l,[n])=>Math.cos(n.evaluate(l))],tan:[it,[it],(l,[n])=>Math.tan(n.evaluate(l))],asin:[it,[it],(l,[n])=>Math.asin(n.evaluate(l))],acos:[it,[it],(l,[n])=>Math.acos(n.evaluate(l))],atan:[it,[it],(l,[n])=>Math.atan(n.evaluate(l))],min:[it,jl(it),(l,n)=>Math.min(...n.map(s=>s.evaluate(l)))],max:[it,jl(it),(l,n)=>Math.max(...n.map(s=>s.evaluate(l)))],abs:[it,[it],(l,[n])=>Math.abs(n.evaluate(l))],round:[it,[it],(l,[n])=>{let s=n.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[it,[it],(l,[n])=>Math.floor(n.evaluate(l))],ceil:[it,[it],(l,[n])=>Math.ceil(n.evaluate(l))],"filter-==":[$t,[Ht,jt],(l,[n,s])=>l.properties()[n.value]===s.value],"filter-id-==":[$t,[jt],(l,[n])=>l.id()===n.value],"filter-type-==":[$t,[Ht],(l,[n])=>l.geometryType()===n.value],"filter-<":[$t,[Ht,jt],(l,[n,s])=>{let h=l.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[$t,[jt],(l,[n])=>{let s=l.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[$t,[Ht,jt],(l,[n,s])=>{let h=l.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[$t,[jt],(l,[n])=>{let s=l.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[$t,[Ht,jt],(l,[n,s])=>{let h=l.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[$t,[jt],(l,[n])=>{let s=l.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[$t,[Ht,jt],(l,[n,s])=>{let h=l.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[$t,[jt],(l,[n])=>{let s=l.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[$t,[jt],(l,[n])=>n.value in l.properties()],"filter-has-id":[$t,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[$t,[$n(Ht)],(l,[n])=>n.value.indexOf(l.geometryType())>=0],"filter-id-in":[$t,[$n(jt)],(l,[n])=>n.value.indexOf(l.id())>=0],"filter-in-small":[$t,[Ht,$n(jt)],(l,[n,s])=>s.value.indexOf(l.properties()[n.value])>=0],"filter-in-large":[$t,[Ht,$n(jt)],(l,[n,s])=>function(h,p,_,x){for(;_<=x;){let S=_+x>>1;if(p[S]===h)return!0;p[S]>h?x=S-1:_=S+1}return!1}(l.properties()[n.value],s.value,0,s.value.length-1)],all:{type:$t,overloads:[[[$t,$t],(l,[n,s])=>n.evaluate(l)&&s.evaluate(l)],[jl($t),(l,n)=>{for(let s of n)if(!s.evaluate(l))return!1;return!0}]]},any:{type:$t,overloads:[[[$t,$t],(l,[n,s])=>n.evaluate(l)||s.evaluate(l)],[jl($t),(l,n)=>{for(let s of n)if(s.evaluate(l))return!0;return!1}]]},"!":[$t,[$t],(l,[n])=>!n.evaluate(l)],"is-supported-script":[$t,[Ht],(l,[n])=>{let s=l.globals&&l.globals.isSupportedScript;return!s||s(n.evaluate(l))}],upcase:[Ht,[Ht],(l,[n])=>n.evaluate(l).toUpperCase()],downcase:[Ht,[Ht],(l,[n])=>n.evaluate(l).toLowerCase()],concat:[Ht,jl(jt),(l,n)=>n.map(s=>Ft(s.evaluate(l))).join("")],"resolved-locale":[Ht,[Gd],(l,[n])=>n.evaluate(l).resolvedLocale()]});class Mv{constructor(n,s){this.expression=n,this._warningHistory={},this._evaluator=new fv,this._defaultValue=s?function(h){if(h.type==="color"&&Th(h.default))return new Yt(0,0,0,0);switch(h.type){case"color":return Yt.parse(h.default)||null;case"padding":return Li.parse(h.default)||null;case"numberArray":return wn.parse(h.default)||null;case"colorArray":return vi.parse(h.default)||null;case"variableAnchorOffsetCollection":return Sn.parse(h.default)||null;case"projectionDefinition":return cn.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{let S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Er(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console!="undefined"&&console.warn(S.message)),this._defaultValue}}}function pf(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Du}function Eh(l,n){let s=new Ru(Du,hf,[],n?function(p){let _={color:Hi,string:Ht,number:it,enum:Ht,boolean:$t,formatted:zs,padding:Wd,numberArray:qu,colorArray:To,projectionDefinition:Cl,resolvedImage:ii,variableAnchorOffsetCollection:Zd};return p.type==="array"?$n(_[p.value]||jt,p.length):_[p.type]}(n):void 0),h=s.parse(l,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Rx(new Mv(h,n)):Lu(s.errors)}class Ah{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Sh(s.expression),this.globalStateRefs=Ph(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,_,x)}evaluate(n,s,h,p,_,x){return this._styleExpression.evaluate(n,s,h,p,_,x)}}class Rv{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Sh(s.expression),this.globalStateRefs=Ph(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,_,x)}evaluate(n,s,h,p,_,x){return this._styleExpression.evaluate(n,s,h,p,_,x)}interpolationFactor(n,s,h){return this.interpolationType?Xi.interpolationFactor(this.interpolationType,n,s,h):0}}function Fx(l,n){let s=Eh(l,n);if(s.result==="error")return s;let h=s.value.expression,p=df(h);if(!p&&!Us(n))return Lu([new Hr("","data expressions not supported")]);let _=ff(h,["zoom"]);if(!_&&!Ox(n))return Lu([new Hr("","zoom expressions not supported")]);let x=Ih(h);return x||_?x instanceof Hr?Lu([x]):x instanceof Xi&&!Cv(n)?Lu([new Hr("","\"interpolate\" expressions cannot be used with this property")]):Rx(x?new Rv(p?"camera":"composite",s.value,x.labels,x instanceof Xi?x.interpolation:void 0):new Ah(p?"constant":"source",s.value)):Lu([new Hr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class qh{constructor(n,s){this._parameters=n,this._specification=s,un(this,kx(this._parameters,this._specification))}static deserialize(n){return new qh(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Ih(l){let n=null;if(l instanceof hh)n=Ih(l.result);else if(l instanceof mh){for(let s of l.args)if(n=Ih(s),n)break}else(l instanceof ni||l instanceof Xi)&&l.input instanceof Ia&&l.input.name==="zoom"&&(n=l);return n instanceof Hr||l.eachChild(s=>{let h=Ih(s);h instanceof Hr?n=h:!n&&h?n=new Hr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):n&&h&&n!==h&&(n=new Hr("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),n}function Ph(l,n=new Set){return l instanceof wh&&n.add(l.key),l.eachChild(s=>{Ph(s,n)}),n}function mf(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(let n of l.slice(1))if(!mf(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}let Ov={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ul(l){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};mf(l)||(l=Vl(l));let n=Eh(l,Ov);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:vf(l),getGlobalStateRefs:()=>Ph(n.value.expression)}}function kv(l,n){return l<n?-1:l>n?1:0}function vf(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let n=1;n<l.length;n++)if(vf(l[n]))return!0;return!1}function Vl(l){if(!l)return!0;let n=l[0];return l.length<=1?n!=="any":n==="=="?Dv(l[1],l[2],"=="):n==="!="?gf(Dv(l[1],l[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Dv(l[1],l[2],n):n==="any"?(s=l.slice(1),["any"].concat(s.map(Vl))):n==="all"?["all"].concat(l.slice(1).map(Vl)):n==="none"?["all"].concat(l.slice(1).map(Vl).map(gf)):n==="in"?zx(l[1],l.slice(2)):n==="!in"?gf(zx(l[1],l.slice(2))):n==="has"?Nx(l[1]):n!=="!has"||gf(Nx(l[1]));var s}function Dv(l,n,s){switch(l){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,l,n]}}function zx(l,n){if(n.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",l,["literal",n.sort(kv)]]:["filter-in-small",l,["literal",n]]}}function Nx(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function gf(l){return["!",l]}function Lv(l){let n=typeof l;if(n==="number"||n==="boolean"||n==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let p="[";for(let _ of l)p+=`${Lv(_)},`;return`${p}]`}let s=Object.keys(l).sort(),h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${Lv(l[s[p]])},`;return`${h}}`}function Mq(l){let n="";for(let s of kt)n+=`/${Lv(l[s])}`;return n}function Fv(l){let n=l.value;return n?[new Ke(l.key,n,"constants have been deprecated as of v8")]:[]}function Xr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Io(l){if(Array.isArray(l))return l.map(Io);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){let n={};for(let s in l)n[s]=Io(l[s]);return n}return Xr(l)}function Pa(l){let n=l.key,s=l.value,h=l.valueSpec||{},p=l.objectElementValidators||{},_=l.style,x=l.styleSpec,S=l.validateSpec,E=[],C=er(s);if(C!=="object")return[new Ke(n,s,`object expected, ${C} found`)];for(let R in s){let F=R.split(".")[0],B=Mu(h,F)||h["*"],$;if(Mu(p,F))$=p[F];else if(Mu(h,F))$=S;else if(p["*"])$=p["*"];else{if(!h["*"]){E.push(new Ke(n,s[R],`unknown property "${R}"`));continue}$=S}E=E.concat($({key:(n&&`${n}.`)+R,value:s[R],valueSpec:B,style:_,styleSpec:x,object:s,objectKey:R,validateSpec:S},s))}for(let R in h)p[R]||h[R].required&&h[R].default===void 0&&s[R]===void 0&&E.push(new Ke(n,s,`missing required property "${R}"`));return E}function yf(l){let n=l.value,s=l.valueSpec,h=l.style,p=l.styleSpec,_=l.key,x=l.arrayElementValidator||l.validateSpec;if(er(n)!=="array")return[new Ke(_,n,`array expected, ${er(n)} found`)];if(s.length&&n.length!==s.length)return[new Ke(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Ke(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};p.$version<7&&(S.function=s.function),er(s.value)==="object"&&(S=s.value);let E=[];for(let C=0;C<n.length;C++)E=E.concat(x({array:n,arrayIndex:C,value:n[C],valueSpec:S,validateSpec:l.validateSpec,style:h,styleSpec:p,key:`${_}[${C}]`}));return E}function Ch(l){let n=l.key,s=l.value,h=l.valueSpec,p=er(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Ke(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new Ke(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Ke(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Bx(l){let n=l.valueSpec,s=Xr(l.value.type),h,p,_,x={},S=s!=="categorical"&&l.value.property===void 0,E=!S,C=er(l.value.stops)==="array"&&er(l.value.stops[0])==="array"&&er(l.value.stops[0][0])==="object",R=Pa({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function($){if(s==="identity")return[new Ke($.key,$.value,"identity function may not have a \"stops\" property")];let G=[],K=$.value;return G=G.concat(yf({key:$.key,value:K,valueSpec:$.valueSpec,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:F})),er(K)==="array"&&K.length===0&&G.push(new Ke($.key,K,"array must have at least one stop")),G},default:function($){return $.validateSpec({key:$.key,value:$.value,valueSpec:n,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec})}}});return s==="identity"&&S&&R.push(new Ke(l.key,l.value,"missing required property \"property\"")),s==="identity"||l.value.stops||R.push(new Ke(l.key,l.value,"missing required property \"stops\"")),s==="exponential"&&l.valueSpec.expression&&!Cv(l.valueSpec)&&R.push(new Ke(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(E&&!Us(l.valueSpec)?R.push(new Ke(l.key,l.value,"property functions not supported")):S&&!Ox(l.valueSpec)&&R.push(new Ke(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!C||l.value.property!==void 0||R.push(new Ke(l.key,l.value,"\"property\" property is required")),R;function F($){let G=[],K=$.value,Q=$.key;if(er(K)!=="array")return[new Ke(Q,K,`array expected, ${er(K)} found`)];if(K.length!==2)return[new Ke(Q,K,`array length 2 expected, length ${K.length} found`)];if(C){if(er(K[0])!=="object")return[new Ke(Q,K,`object expected, ${er(K[0])} found`)];if(K[0].zoom===void 0)return[new Ke(Q,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new Ke(Q,K,"object stop key must have value")];if(_&&_>Xr(K[0].zoom))return[new Ke(Q,K[0].zoom,"stop zoom values must appear in ascending order")];Xr(K[0].zoom)!==_&&(_=Xr(K[0].zoom),p=void 0,x={}),G=G.concat(Pa({key:`${Q}[0]`,value:K[0],valueSpec:{zoom:{}},validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:Ch,value:B}}))}else G=G.concat(B({key:`${Q}[0]`,value:K[0],validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec},K));return pf(Io(K[1]))?G.concat([new Ke(`${Q}[1]`,K[1],"expressions are not allowed in function stops.")]):G.concat($.validateSpec({key:`${Q}[1]`,value:K[1],valueSpec:n,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec}))}function B($,G){let K=er($.value),Q=Xr($.value),oe=$.value!==null?$.value:G;if(h){if(K!==h)return[new Ke($.key,oe,`${K} stop domain type must match previous stop domain type ${h}`)]}else h=K;if(K!=="number"&&K!=="string"&&K!=="boolean")return[new Ke($.key,oe,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&s!=="categorical"){let Se=`number expected, ${K} found`;return Us(n)&&s===void 0&&(Se+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Ke($.key,oe,Se)]}return s!=="categorical"||K!=="number"||isFinite(Q)&&Math.floor(Q)===Q?s!=="categorical"&&K==="number"&&p!==void 0&&Q<p?[new Ke($.key,oe,"stop domain values must appear in ascending order")]:(p=Q,s==="categorical"&&Q in x?[new Ke($.key,oe,"stop domain values must be unique")]:(x[Q]=!0,[])):[new Ke($.key,oe,`integer expected, found ${Q}`)]}}function $l(l){let n=(l.expressionContext==="property"?Fx:Eh)(Io(l.value),l.valueSpec);if(n.result==="error")return n.value.map(h=>new Ke(`${l.key}${h.key}`,l.value,h.message));let s=n.value.expression||n.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new Ke(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Sh(s))return[new Ke(l.key,l.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(l.expressionContext==="filter"&&!Sh(s))return[new Ke(l.key,l.value,"\"feature-state\" data expressions are not supported with filters.")];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!ff(s,["zoom","feature-state"]))return[new Ke(l.key,l.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(l.expressionContext==="cluster-initial"&&!df(s))return[new Ke(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _f(l){let n=l.key,s=l.value,h=er(s);return h!=="string"?[new Ke(n,s,`color expected, ${h} found`)]:Yt.parse(String(s))?[]:[new Ke(n,s,`color expected, "${s}" found`)]}function as(l){let n=l.key,s=l.value,h=l.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Xr(s))===-1&&p.push(new Ke(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Xr(s))===-1&&p.push(new Ke(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function zv(l){return mf(Io(l.value))?$l(un({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):jx(l)}function jx(l){let n=l.value,s=l.key;if(er(n)!=="array")return[new Ke(s,n,`array expected, ${er(n)} found`)];let h=l.styleSpec,p,_=[];if(n.length<1)return[new Ke(s,n,"filter array must have at least 1 element")];switch(_=_.concat(as({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:l.style,styleSpec:l.styleSpec})),Xr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Xr(n[1])==="$type"&&_.push(new Ke(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new Ke(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=er(n[1]),p!=="string"&&_.push(new Ke(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=er(n[x]),Xr(n[1])==="$type"?_=_.concat(as({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:l.style,styleSpec:l.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&_.push(new Ke(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat(jx({key:`${s}[${x}]`,value:n[x],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":p=er(n[1]),n.length!==2?_.push(new Ke(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&_.push(new Ke(`${s}[1]`,n[1],`string expected, ${p} found`))}return _}function Ux(l,n){let s=l.key,h=l.validateSpec,p=l.style,_=l.styleSpec,x=l.value,S=l.objectKey,E=_[`${n}_${l.layerType}`];if(!E)return[];let C=S.match(/^(.*)-transition$/);if(n==="paint"&&C&&E[C[1]]&&E[C[1]].transition)return h({key:s,value:x,valueSpec:_.transition,style:p,styleSpec:_});let R=l.valueSpec||E[S];if(!R)return[new Ke(s,x,`unknown property "${S}"`)];let F;if(er(x)==="string"&&Us(R)&&!R.tokens&&(F=/^{([^}]+)}$/.exec(x)))return[new Ke(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];let B=[];return l.layerType==="symbol"&&(S==="text-field"&&p&&!p.glyphs&&B.push(new Ke(s,x,"use of \"text-field\" requires a style \"glyphs\" property")),S==="text-font"&&Th(Io(x))&&Xr(x.type)==="identity"&&B.push(new Ke(s,x,"\"text-font\" does not support identity functions"))),B.concat(h({key:l.key,value:x,valueSpec:R,style:p,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:S}))}function Vx(l){return Ux(l,"paint")}function $x(l){return Ux(l,"layout")}function Gx(l){let n=[],s=l.value,h=l.key,p=l.style,_=l.styleSpec;if(er(s)!=="object")return[new Ke(h,s,`object expected, ${er(s)} found`)];s.type||s.ref||n.push(new Ke(h,s,"either \"type\" or \"ref\" is required"));let x=Xr(s.type),S=Xr(s.ref);if(s.id){let E=Xr(s.id);for(let C=0;C<l.arrayIndex;C++){let R=p.layers[C];Xr(R.id)===E&&n.push(new Ke(h,s.id,`duplicate layer id "${s.id}", previously used at line ${R.id.__line__}`))}}if("ref"in s){let E;["type","source","source-layer","filter","layout"].forEach(C=>{C in s&&n.push(new Ke(h,s[C],`"${C}" is prohibited for ref layers`))}),p.layers.forEach(C=>{Xr(C.id)===S&&(E=C)}),E?E.ref?n.push(new Ke(h,s.ref,"ref cannot reference another ref layer")):x=Xr(E.type):n.push(new Ke(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){let E=p.sources&&p.sources[s.source],C=E&&Xr(E.type);E?C==="vector"&&x==="raster"?n.push(new Ke(h,s.source,`layer "${s.id}" requires a raster source`)):C!=="raster-dem"&&x==="hillshade"||C!=="raster-dem"&&x==="color-relief"?n.push(new Ke(h,s.source,`layer "${s.id}" requires a raster-dem source`)):C==="raster"&&x!=="raster"?n.push(new Ke(h,s.source,`layer "${s.id}" requires a vector source`)):C!=="vector"||s["source-layer"]?C==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?n.push(new Ke(h,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||C==="geojson"&&E.lineMetrics||n.push(new Ke(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Ke(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Ke(h,s.source,`source "${s.source}" not found`))}else n.push(new Ke(h,s,"missing required property \"source\""));return n=n.concat(Pa({key:h,value:s,valueSpec:_.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${h}.type`,value:s.type,valueSpec:_.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:zv,layout:E=>Pa({layer:s,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":C=>$x(un({layerType:x},C))}}),paint:E=>Pa({layer:s,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":C=>Vx(un({layerType:x},C))}})}})),n}function to(l){let n=l.value,s=l.key,h=er(n);return h!=="string"?[new Ke(s,n,`string expected, ${h} found`)]:[]}let Fu={promoteId:function({key:l,value:n}){if(er(n)==="string")return to({key:l,value:n});{let s=[];for(let h in n)s.push(...to({key:`${l}.${h}`,value:n[h]}));return s}}};function Gn(l){let n=l.value,s=l.key,h=l.styleSpec,p=l.style,_=l.validateSpec;if(!n.type)return[new Ke(s,n,"\"type\" is required")];let x=Xr(n.type),S;switch(x){case"vector":case"raster":return S=Pa({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:l.style,styleSpec:h,objectElementValidators:Fu,validateSpec:_}),S;case"raster-dem":return S=function(E){var C;let R=(C=E.sourceName)!==null&&C!==void 0?C:"",F=E.value,B=E.styleSpec,$=B.source_raster_dem,G=E.style,K=[],Q=er(F);if(F===void 0)return K;if(Q!=="object")return K.push(new Ke("source_raster_dem",F,`object expected, ${Q} found`)),K;let oe=Xr(F.encoding)==="custom",Se=["redFactor","greenFactor","blueFactor","baseShift"],pe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(let ge in F)!oe&&Se.includes(ge)?K.push(new Ke(ge,F[ge],`In "${R}": "${ge}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):$[ge]?K=K.concat(E.validateSpec({key:ge,value:F[ge],valueSpec:$[ge],validateSpec:E.validateSpec,style:G,styleSpec:B})):K.push(new Ke(ge,F[ge],`unknown property "${ge}"`));return K}({sourceName:s,value:n,style:l.style,styleSpec:h,validateSpec:_}),S;case"geojson":if(S=Pa({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:_,objectElementValidators:Fu}),n.cluster)for(let E in n.clusterProperties){let[C,R]=n.clusterProperties[E],F=typeof C=="string"?[C,["accumulated"],["get",E]]:C;S.push(...$l({key:`${s}.${E}.map`,value:R,expressionContext:"cluster-map"})),S.push(...$l({key:`${s}.${E}.reduce`,value:F,expressionContext:"cluster-reduce"}))}return S;case"video":return Pa({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:_,styleSpec:h});case"image":return Pa({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:_,styleSpec:h});case"canvas":return[new Ke(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return as({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function zu(l){let n=l.value,s=l.styleSpec,h=s.light,p=l.style,_=[],x=er(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new Ke("light",n,`object expected, ${x} found`)]),_;for(let S in n){let E=S.match(/^(.*)-transition$/);_=_.concat(E&&h[E[1]]&&h[E[1]].transition?l.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:l.validateSpec,style:p,styleSpec:s}):h[S]?l.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:l.validateSpec,style:p,styleSpec:s}):[new Ke(S,n[S],`unknown property "${S}"`)])}return _}function Nv(l){let n=l.value,s=l.styleSpec,h=s.sky,p=l.style,_=er(n);if(n===void 0)return[];if(_!=="object")return[new Ke("sky",n,`object expected, ${_} found`)];let x=[];for(let S in n)x=x.concat(h[S]?l.validateSpec({key:S,value:n[S],valueSpec:h[S],style:p,styleSpec:s}):[new Ke(S,n[S],`unknown property "${S}"`)]);return x}function Wx(l){let n=l.value,s=l.styleSpec,h=s.terrain,p=l.style,_=[],x=er(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new Ke("terrain",n,`object expected, ${x} found`)]),_;for(let S in n)_=_.concat(h[S]?l.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:l.validateSpec,style:p,styleSpec:s}):[new Ke(S,n[S],`unknown property "${S}"`)]);return _}function Zx(l){let n=[],s=l.value,h=l.key;if(Array.isArray(s)){let p=[],_=[];for(let x in s)s[x].id&&p.includes(s[x].id)&&n.push(new Ke(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&_.includes(s[x].url)&&n.push(new Ke(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),n=n.concat(Pa({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return n}return to({key:h,value:s})}function Nu(l){return n=l.value,n&&n.constructor===Object?[]:[new Ke(l.key,l.value,`object expected, ${er(l.value)} found`)];var n}let Bv={"*":()=>[],array:yf,boolean:function(l){let n=l.value,s=l.key,h=er(n);return h!=="boolean"?[new Ke(s,n,`boolean expected, ${h} found`)]:[]},number:Ch,color:_f,constants:Fv,enum:as,filter:zv,function:Bx,layer:Gx,object:Pa,source:Gn,light:zu,sky:Nv,terrain:Wx,projection:function(l){let n=l.value,s=l.styleSpec,h=s.projection,p=l.style,_=er(n);if(n===void 0)return[];if(_!=="object")return[new Ke("projection",n,`object expected, ${_} found`)];let x=[];for(let S in n)x=x.concat(h[S]?l.validateSpec({key:S,value:n[S],valueSpec:h[S],style:p,styleSpec:s}):[new Ke(S,n[S],`unknown property "${S}"`)]);return x},projectionDefinition:function(l){let n=l.key,s=l.value;s=s instanceof String?s.valueOf():s;let h=er(s);return h!=="array"||function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"}(s)||function(p){return!!["interpolate","step","literal"].includes(p[0])}(s)?["array","string"].includes(h)?[]:[new Ke(n,s,`projection expected, invalid type "${h}" found`)]:[new Ke(n,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:to,formatted:function(l){return to(l).length===0?[]:$l(l)},resolvedImage:function(l){return to(l).length===0?[]:$l(l)},padding:function(l){let n=l.key,s=l.value;if(er(s)==="array"){if(s.length<1||s.length>4)return[new Ke(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];let h={type:"number"},p=[];for(let _=0;_<s.length;_++)p=p.concat(l.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:l.validateSpec,valueSpec:h}));return p}return Ch({key:n,value:s,valueSpec:{}})},numberArray:function(l){let n=l.key,s=l.value;if(er(s)==="array"){let h={type:"number"};if(s.length<1)return[new Ke(n,s,"array length at least 1 expected, length 0 found")];let p=[];for(let _=0;_<s.length;_++)p=p.concat(l.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:l.validateSpec,valueSpec:h}));return p}return Ch({key:n,value:s,valueSpec:{}})},colorArray:function(l){let n=l.key,s=l.value;if(er(s)==="array"){if(s.length<1)return[new Ke(n,s,"array length at least 1 expected, length 0 found")];let h=[];for(let p=0;p<s.length;p++)h=h.concat(_f({key:`${n}[${p}]`,value:s[p]}));return h}return _f({key:n,value:s})},variableAnchorOffsetCollection:function(l){let n=l.key,s=l.value,h=er(s),p=l.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Ke(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(as({key:`${n}[${x}]`,value:s[x],valueSpec:p.layout_symbol["text-anchor"]})),_=_.concat(yf({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:p}));return _},sprite:Zx,state:Nu};function Bu(l){let n=l.value,s=l.valueSpec,h=l.styleSpec;return l.validateSpec=Bu,s.expression&&Th(Xr(n))?Bx(l):s.expression&&pf(Io(n))?$l(l):s.type&&Bv[s.type]?Bv[s.type](l):Pa(un({},l,{valueSpec:s.type?h[s.type]:s}))}function Kx(l){let n=l.value,s=l.key,h=to(l);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Ke(s,n,"\"glyphs\" url must include a \"{fontstack}\" token")),n.indexOf("{range}")===-1&&h.push(new Ke(s,n,"\"glyphs\" url must include a \"{range}\" token"))),h}function Wn(l,n=Ee){let s=[];return s=s.concat(Bu({key:"",value:l,valueSpec:n.$root,styleSpec:n,style:l,validateSpec:Bu,objectElementValidators:{glyphs:Kx,"*":()=>[]}})),l.constants&&(s=s.concat(Fv({key:"constants",value:l.constants}))),ju(s)}function ro(l){return function(n){return l(en(rt({},n),{validateSpec:Bu}))}}function ju(l){return[].concat(l).sort((n,s)=>n.line-s.line)}function io(l){return function(...n){return ju(l.apply(this,n))}}Wn.source=io(ro(Gn)),Wn.sprite=io(ro(Zx)),Wn.glyphs=io(ro(Kx)),Wn.light=io(ro(zu)),Wn.sky=io(ro(Nv)),Wn.terrain=io(ro(Wx)),Wn.state=io(ro(Nu)),Wn.layer=io(ro(Gx)),Wn.filter=io(ro(zv)),Wn.paintProperty=io(ro(Vx)),Wn.layoutProperty=io(ro($x));let Uu=Wn,Rq=Uu.light,Mh=Uu.sky,Oq=Uu.paintProperty,kq=Uu.layoutProperty;function Rh(l,n){let s=!1;if(n&&n.length)for(let h of n)l.fire(new ze(new Error(h.message))),s=!0;return s}class Oh{constructor(n,s,h){let p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;let x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let E=0;E<this.d*this.d;E++){let C=x[3+E],R=x[3+E+1];p.push(C===R?null:x.subarray(C,R))}let S=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;let _=h/s*n;this.min=-_,this.max=n+_}insert(n,s,h,p,_){this._forEachCell(s,h,p,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,_,x){this.cells[_].push(x)}query(n,s,h,p,_){let x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=p&&!_)return Array.prototype.slice.call(this.keys);{let E=[];return this._forEachCell(n,s,h,p,this._queryCell,E,{},_),E}}_queryCell(n,s,h,p,_,x,S,E){let C=this.cells[_];if(C!==null){let R=this.keys,F=this.bboxes;for(let B=0;B<C.length;B++){let $=C[B];if(S[$]===void 0){let G=4*$;(E?E(F[G+0],F[G+1],F[G+2],F[G+3]):n<=F[G+2]&&s<=F[G+3]&&h>=F[G+0]&&p>=F[G+1])?(S[$]=!0,x.push(R[$])):S[$]=!1}}}}_forEachCell(n,s,h,p,_,x,S,E){let C=this._convertToCellCoord(n),R=this._convertToCellCoord(s),F=this._convertToCellCoord(h),B=this._convertToCellCoord(p);for(let $=C;$<=F;$++)for(let G=R;G<=B;G++){let K=this.d*G+$;if((!E||E(this._convertFromCellCoord($),this._convertFromCellCoord(G),this._convertFromCellCoord($+1),this._convertFromCellCoord(G+1)))&&_.call(this,n,s,h,p,K,x,S,E))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let n=this.cells,s=3+this.cells.length+1+1,h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;let p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){let S=n[x];p[3+x]=_,p.set(S,_),_+=S.length}return p[3+n.length]=_,p.set(this.keys,_),_+=this.keys.length,p[3+n.length+1]=_,p.set(this.bboxes,_),_+=this.bboxes.length,p.buffer}static serialize(n,s){let h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Oh(n.buffer)}}let no={};function st(l,n,s={}){if(no[l])throw new Error(`${l} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:l,writeable:!1}),no[l]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}st("Object",Object),st("Set",Set),st("TransferableGridIndex",Oh),st("Color",Yt),st("Error",Error),st("AJAXError",ae),st("ResolvedImage",ha),st("StylePropertyFunction",qh),st("StyleExpression",Mv,{omit:["_evaluator"]}),st("ZoomDependentExpression",Rv),st("ZoomConstantExpression",Ah),st("CompoundExpression",Ia,{omit:["_evaluate"]});for(let l in Du)Du[l]._classRegistryKey||st(`Expression_${l}`,Du[l]);function jv(l){return l&&typeof ArrayBuffer!="undefined"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function xf(l){return l.$name||l.constructor._classRegistryKey}function Uv(l){return!function(n){if(n===null||typeof n!="object")return!1;let s=xf(n);return!(!s||s==="Object")}(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||jv(l)||ua(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function Vu(l,n){if(Uv(l))return(jv(l)||ua(l))&&n&&n.push(l),ArrayBuffer.isView(l)&&n&&n.push(l.buffer),l instanceof ImageData&&n&&n.push(l.data.buffer),l;if(Array.isArray(l)){let _=[];for(let x of l)_.push(Vu(x,n));return _}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);let s=xf(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!no[s])throw new Error(`${s} is not registered.`);let{klass:h}=no[s],p=h.serialize?h.serialize(l,n):{};if(h.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let _ in l){if(!l.hasOwnProperty(_)||no[s].omit.indexOf(_)>=0)continue;let x=l[_];p[_]=no[s].shallow.indexOf(_)>=0?x:Vu(x,n)}l instanceof Error&&(p.message=l.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(p.$name=s),p}function Gl(l){if(Uv(l))return l;if(Array.isArray(l))return l.map(Gl);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);let n=xf(l)||"Object";if(!no[n])throw new Error(`can't deserialize unregistered class ${n}`);let{klass:s}=no[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(l);let h=Object.create(s.prototype);for(let p of Object.keys(l)){if(p==="$name")continue;let _=l[p];h[p]=no[n].shallow.indexOf(p)>=0?_:Gl(_)}return h}class bf{constructor(){this.first=!0}update(n,s){let h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}let rr={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Hangul Syllables":l=>l>=44032&&l<=55215,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function wf(l){for(let n of l)if($v(n.charCodeAt(0)))return!0;return!1}function Dq(l){for(let n of l)if(!Hx(n.charCodeAt(0)))return!1;return!0}function Sf(l){let n=l.map(s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch(h){return null}}).filter(s=>s);return new RegExp(n.join("|"),"u")}let Lq=Sf(["Arab","Dupl","Mong","Ougr","Syrc"]);function Hx(l){return!Lq.test(String.fromCodePoint(l))}let Vv=Sf(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function $v(l){return!(l!==746&&l!==747&&(l<4352||!(rr["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||rr["CJK Compatibility"](l)||rr["CJK Strokes"](l)||!(!rr["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||rr["Enclosed CJK Letters and Months"](l)||rr["Ideographic Description Characters"](l)||rr.Kanbun(l)||rr.Katakana(l)&&l!==12540||!(!rr["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!rr["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||rr["Vertical Forms"](l)||rr["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||Vv.test(String.fromCodePoint(l)))))}function Xx(l){return!($v(l)||function(n){return!!(rr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||rr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||rr["Letterlike Symbols"](n)||rr["Number Forms"](n)||rr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||rr["Control Pictures"](n)&&n!==9251||rr["Optical Character Recognition"](n)||rr["Enclosed Alphanumerics"](n)||rr["Geometric Shapes"](n)||rr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||rr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||rr["CJK Symbols and Punctuation"](n)||rr.Katakana(n)||rr["Private Use Area"](n)||rr["CJK Compatibility Forms"](n)||rr["Small Form Variants"](n)||rr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(l))}let Yx=Sf(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Gv(l){return Yx.test(String.fromCodePoint(l))}function Jx(l,n){return!(!n&&Gv(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||rr.Khmer(l))}function Qx(l){for(let n of l)if(Gv(n.charCodeAt(0)))return!0;return!1}let ao=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(ao.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,n){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;let s=l.pluginURL,h=new Promise(_=>{this.loadScriptResolve=_});n(s);let p=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([h,p]),this.isParsed()){let _={pluginStatus:"loaded",pluginURL:s};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)})}};class Ar{constructor(n,s){this.zoom=n,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new bf,this.transition=s.transition||{},this.globalState=s.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bf,this.transition={},this.globalState={})}isSupportedScript(n){return function(s,h){for(let p of s)if(!Jx(p.charCodeAt(0),h))return!1;return!0}(n,ao.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class $u{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(Th(h))return new qh(h,p);if(pf(h)){let _=Fx(h,p);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return p.type==="color"&&typeof h=="string"?_=Yt.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?p.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?_=Sn.parse(h):p.type==="projectionDefinition"&&typeof h=="string"&&(_=cn.parse(h)):_=vi.parse(h):_=wn.parse(h):_=Li.parse(h),{globalStateRefs:new Set,kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}setGlobalState(n){this.expression.evaluate=(s,h,p,_,x,S)=>(s.globalState=n,this._evaluate.call(this.expression,s,h,p,_,x,S))}}class Wv{constructor(n){this.property=n,this.value=new $u(n,void 0)}transitioned(n,s){return new Zv(this.property,this.value,s,Un({},n.transition,this.transition),n.now)}untransitioned(){return new Zv(this.property,this.value,null,{},0)}}class eb{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ln(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Wv(this._values[n].property)),this._values[n].value=new $u(this._values[n].property,s===null?void 0:ln(s))}getTransition(n){return ln(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Wv(this._values[n].property)),this._values[n].transition=ln(s)||void 0}serialize(){let n={};for(let s of Object.keys(this._values)){let h=this.getValue(s);h!==void 0&&(n[s]=h);let p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){let h=new Kv(this._properties);for(let p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){let n=new Kv(this._properties);for(let s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Zv{constructor(n,s,h,p,_){this.property=n,this.value=s,this.begin=_+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){let p=n.now||0,_=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(p<this.begin)return x.possiblyEvaluate(n,s,h);{let S=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),_,Kr(S))}}return _}}class Kv{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){let p=new Tf(this._properties);for(let _ of Object.keys(this._values))p._values[_]=this._values[_].possiblyEvaluate(n,s,h);return p}hasTransition(){for(let n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class tb{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._globalState={}}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ln(this._values[n].value)}setValue(n,s){this._values[n]=new $u(this._values[n].property,s===null?void 0:ln(s)),this._values[n].setGlobalState(this._globalState)}serialize(){let n={};for(let s of Object.keys(this._values)){let h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){let p=new Tf(this._properties);for(let _ of Object.keys(this._values))p._values[_]=this._values[_].possiblyEvaluate(n,s,h);return p}setGlobalState(n){this._globalState=n;for(let s of Object.values(this._values))s.setGlobalState(n)}}class Po{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class Tf{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class mt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){let p=qo[this.specification.type];return p?p(n,s,h):n}}class Tt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new Po(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Po(this,{kind:"constant",value:void 0},n.parameters);let p=qo[this.specification.type];if(p){let _=p(n.value.value,s.value.value,h);return new Po(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,h,p,_,x){return n.kind==="constant"?n.value:n.evaluate(s,h,p,_,x)}}class Ef extends Tt{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new Po(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){let _=n.expression.evaluate(s,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(x,x,x,s);return new Po(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){let _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Po(this,{kind:"constant",value:_},s)}return new Po(this,n.expression,s)}evaluate(n,s,h,p,_,x){if(n.kind==="source"){let S=n.evaluate(s,h,p,_,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class $s{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){let _=n.expression.evaluate(s,null,{},h,p);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new Ar(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Ar(Math.floor(s.zoom),s)),n.expression.evaluate(new Ar(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Af{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class Tn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let s in n){let h=n[s];h.specification.overridable&&this.overridableProperties.push(s);let p=this.defaultPropertyValues[s]=new $u(h,void 0),_=this.defaultTransitionablePropertyValues[s]=new Wv(h);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}st("DataDrivenProperty",Tt),st("DataConstantProperty",mt),st("CrossFadedDataDrivenProperty",Ef),st("CrossFadedProperty",$s),st("ColorRampProperty",Af);let rb="-transition";class Ca extends pt{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,this._globalState={},n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter,this._featureFilter=Ul(n.filter)),s.layout&&(this._unevaluatedLayout=new tb(s.layout)),s.paint)){this._transitionablePaint=new eb(s.paint);for(let h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(let h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Tf(s.paint)}}setFilter(n){this.filter=n,this._featureFilter=Ul(n)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}getLayoutAffectingGlobalStateRefs(){let n=new Set;if(this._unevaluatedLayout)for(let s in this._unevaluatedLayout._values){let h=this._unevaluatedLayout._values[s];for(let p of h.getGlobalStateRefs())n.add(p)}for(let s of this._featureFilter.getGlobalStateRefs())n.add(s);return n}getPaintAffectingGlobalStateRefs(){var n;let s=new globalThis.Map;if(this._transitionablePaint)for(let h in this._transitionablePaint._values){let p=this._transitionablePaint._values[h].value;for(let _ of p.getGlobalStateRefs()){let x=(n=s.get(_))!==null&&n!==void 0?n:[];x.push({name:h,value:p.value}),s.set(_,x)}}return s}setLayoutProperty(n,s,h={}){s!=null&&this._validate(kq,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(rb)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Oq,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(rb))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{let p=this._transitionablePaint._values[n],_=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),S=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);let E=this._transitionablePaint._values[n].value;return E.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,S,E)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.globalState=this._globalState,n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}setGlobalState(n){this._globalState=n,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(n)}serialize(){let n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),wo(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,_={}){return(!_||_.validate!==!1)&&Rh(this,n.call(Uu,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:Ee,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let n in this.paint._values){let s=this.paint.get(n);if(s instanceof Po&&Us(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let Fq={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class kh{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){let s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ai(l,n=1){let s=0,h=0;return{members:l.map(p=>{let _=Fq[p.type].BYTES_PER_ELEMENT,x=s=qf(s,Math.max(n,_)),S=p.components||1;return h=Math.max(h,_),s+=_*S,{name:p.name,type:p.type,components:S,offset:x}}),size:qf(s,Math.max(h,n)),alignment:n}}function qf(l,n){return Math.ceil(l/n)*n}class Gu extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){let h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){let p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}Gu.prototype.bytesPerElement=4,st("StructArrayLayout2i4",Gu);class Wu extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){let _=3*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=p,n}}Wu.prototype.bytesPerElement=6,st("StructArrayLayout3i6",Wu);class Hv extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){let _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,p)}emplace(n,s,h,p,_){let x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=_,n}}Hv.prototype.bytesPerElement=8,st("StructArrayLayout4i8",Hv);class Zu extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x){let S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,_,x)}emplace(n,s,h,p,_,x,S){let E=6*n;return this.int16[E+0]=s,this.int16[E+1]=h,this.int16[E+2]=p,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=S,n}}Zu.prototype.bytesPerElement=12,st("StructArrayLayout2i4i12",Zu);class Wl extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x){let S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,_,x)}emplace(n,s,h,p,_,x,S){let E=4*n,C=8*n;return this.int16[E+0]=s,this.int16[E+1]=h,this.uint8[C+4]=p,this.uint8[C+5]=_,this.uint8[C+6]=x,this.uint8[C+7]=S,n}}Wl.prototype.bytesPerElement=8,st("StructArrayLayout2i4ub8",Wl);class Dh extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){let h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){let p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}Dh.prototype.bytesPerElement=8,st("StructArrayLayout2f8",Dh);class If extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,S,E,C,R){let F=this.length;return this.resize(F+1),this.emplace(F,n,s,h,p,_,x,S,E,C,R)}emplace(n,s,h,p,_,x,S,E,C,R,F){let B=10*n;return this.uint16[B+0]=s,this.uint16[B+1]=h,this.uint16[B+2]=p,this.uint16[B+3]=_,this.uint16[B+4]=x,this.uint16[B+5]=S,this.uint16[B+6]=E,this.uint16[B+7]=C,this.uint16[B+8]=R,this.uint16[B+9]=F,n}}If.prototype.bytesPerElement=20,st("StructArrayLayout10ui20",If);class Zl extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,S,E,C,R,F,B){let $=this.length;return this.resize($+1),this.emplace($,n,s,h,p,_,x,S,E,C,R,F,B)}emplace(n,s,h,p,_,x,S,E,C,R,F,B,$){let G=12*n;return this.int16[G+0]=s,this.int16[G+1]=h,this.int16[G+2]=p,this.int16[G+3]=_,this.uint16[G+4]=x,this.uint16[G+5]=S,this.uint16[G+6]=E,this.uint16[G+7]=C,this.int16[G+8]=R,this.int16[G+9]=F,this.int16[G+10]=B,this.int16[G+11]=$,n}}Zl.prototype.bytesPerElement=24,st("StructArrayLayout4i4ui4i24",Zl);class Xv extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){let _=3*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=p,n}}Xv.prototype.bytesPerElement=12,st("StructArrayLayout3f12",Xv);class Yv extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){let s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Yv.prototype.bytesPerElement=4,st("StructArrayLayout1ul4",Yv);class Pf extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,S,E,C){let R=this.length;return this.resize(R+1),this.emplace(R,n,s,h,p,_,x,S,E,C)}emplace(n,s,h,p,_,x,S,E,C,R){let F=10*n,B=5*n;return this.int16[F+0]=s,this.int16[F+1]=h,this.int16[F+2]=p,this.int16[F+3]=_,this.int16[F+4]=x,this.int16[F+5]=S,this.uint32[B+3]=E,this.uint16[F+8]=C,this.uint16[F+9]=R,n}}Pf.prototype.bytesPerElement=20,st("StructArrayLayout6i1ul2ui20",Pf);class Jv extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x){let S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,_,x)}emplace(n,s,h,p,_,x,S){let E=6*n;return this.int16[E+0]=s,this.int16[E+1]=h,this.int16[E+2]=p,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=S,n}}Jv.prototype.bytesPerElement=12,st("StructArrayLayout2i2i2i12",Jv);class g extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_){let x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,p,_)}emplace(n,s,h,p,_,x){let S=4*n,E=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=p,this.int16[E+6]=_,this.int16[E+7]=x,n}}g.prototype.bytesPerElement=16,st("StructArrayLayout2f1f2i16",g);class r extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x){let S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,p,_,x)}emplace(n,s,h,p,_,x,S){let E=16*n,C=4*n,R=8*n;return this.uint8[E+0]=s,this.uint8[E+1]=h,this.float32[C+1]=p,this.float32[C+2]=_,this.int16[R+6]=x,this.int16[R+7]=S,n}}r.prototype.bytesPerElement=16,st("StructArrayLayout2ub2f2i16",r);class u extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){let _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=p,n}}u.prototype.bytesPerElement=6,st("StructArrayLayout3ui6",u);class d extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,S,E,C,R,F,B,$,G,K,Q,oe){let Se=this.length;return this.resize(Se+1),this.emplace(Se,n,s,h,p,_,x,S,E,C,R,F,B,$,G,K,Q,oe)}emplace(n,s,h,p,_,x,S,E,C,R,F,B,$,G,K,Q,oe,Se){let pe=24*n,ge=12*n,Ce=48*n;return this.int16[pe+0]=s,this.int16[pe+1]=h,this.uint16[pe+2]=p,this.uint16[pe+3]=_,this.uint32[ge+2]=x,this.uint32[ge+3]=S,this.uint32[ge+4]=E,this.uint16[pe+10]=C,this.uint16[pe+11]=R,this.uint16[pe+12]=F,this.float32[ge+7]=B,this.float32[ge+8]=$,this.uint8[Ce+36]=G,this.uint8[Ce+37]=K,this.uint8[Ce+38]=Q,this.uint32[ge+10]=oe,this.int16[pe+22]=Se,n}}d.prototype.bytesPerElement=48,st("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",d);class m extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,_,x,S,E,C,R,F,B,$,G,K,Q,oe,Se,pe,ge,Ce,De,Ve,tt,He,Qe,gt,Je){let et=this.length;return this.resize(et+1),this.emplace(et,n,s,h,p,_,x,S,E,C,R,F,B,$,G,K,Q,oe,Se,pe,ge,Ce,De,Ve,tt,He,Qe,gt,Je)}emplace(n,s,h,p,_,x,S,E,C,R,F,B,$,G,K,Q,oe,Se,pe,ge,Ce,De,Ve,tt,He,Qe,gt,Je,et){let Fe=32*n,qt=16*n;return this.int16[Fe+0]=s,this.int16[Fe+1]=h,this.int16[Fe+2]=p,this.int16[Fe+3]=_,this.int16[Fe+4]=x,this.int16[Fe+5]=S,this.int16[Fe+6]=E,this.int16[Fe+7]=C,this.uint16[Fe+8]=R,this.uint16[Fe+9]=F,this.uint16[Fe+10]=B,this.uint16[Fe+11]=$,this.uint16[Fe+12]=G,this.uint16[Fe+13]=K,this.uint16[Fe+14]=Q,this.uint16[Fe+15]=oe,this.uint16[Fe+16]=Se,this.uint16[Fe+17]=pe,this.uint16[Fe+18]=ge,this.uint16[Fe+19]=Ce,this.uint16[Fe+20]=De,this.uint16[Fe+21]=Ve,this.uint16[Fe+22]=tt,this.uint32[qt+12]=He,this.float32[qt+13]=Qe,this.float32[qt+14]=gt,this.uint16[Fe+30]=Je,this.uint16[Fe+31]=et,n}}m.prototype.bytesPerElement=64,st("StructArrayLayout8i15ui1ul2f2ui64",m);class y extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){let s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}y.prototype.bytesPerElement=4,st("StructArrayLayout1f4",y);class w extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){let _=3*n;return this.uint16[6*n+0]=s,this.float32[_+1]=h,this.float32[_+2]=p,n}}w.prototype.bytesPerElement=12,st("StructArrayLayout1ui2f12",w);class A extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){let _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=p,n}}A.prototype.bytesPerElement=8,st("StructArrayLayout1ul2ui8",A);class P extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){let h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){let p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}P.prototype.bytesPerElement=4,st("StructArrayLayout2ui4",P);class k extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){let s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}k.prototype.bytesPerElement=2,st("StructArrayLayout1ui2",k);class L extends yr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){let _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,p)}emplace(n,s,h,p,_){let x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=_,n}}L.prototype.bytesPerElement=16,st("StructArrayLayout4f16",L);class N extends kh{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new v(this.anchorPointX,this.anchorPointY)}}N.prototype.size=20;class z extends Pf{get(n){return new N(this,n)}}st("CollisionBoxArray",z);class j extends kh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}j.prototype.size=48;class Z extends d{get(n){return new j(this,n)}}st("PlacedSymbolArray",Z);class te extends kh{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}te.prototype.size=64;class ee extends m{get(n){return new te(this,n)}}st("SymbolInstanceArray",ee);class ie extends y{getoffsetX(n){return this.float32[1*n+0]}}st("GlyphOffsetArray",ie);class se extends Wu{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}st("SymbolLineVertexArray",se);class de extends kh{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}de.prototype.size=12;class ce extends w{get(n){return new de(this,n)}}st("TextAnchorOffsetArray",ce);class me extends kh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}me.prototype.size=8;class ye extends A{get(n){return new me(this,n)}}st("FeatureIndexArray",ye);class he extends Gu{}class Te extends Gu{}class Oe extends Gu{}class Ie extends Zu{}class Pe extends Wl{}class Re extends Dh{}class We extends If{}class Xe extends Zl{}class je extends Xv{}class dt extends Yv{}class Ut extends Jv{}class hr extends r{}class _r extends u{}class vr extends P{}let Ur=ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yr}=Ur;class Bt{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,s,h,p){let _=this.segments[this.segments.length-1];return n>Bt.MAX_VERTEX_ARRAY_LENGTH&&jr(`Max vertices per segment is ${Bt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Bt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+n>Bt.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==p?this.createNewSegment(s,h,p):_}createNewSegment(n,s,h){let p={vertexOffset:n.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(p.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(n,s,h){return this.prepareSegment(0,n,s,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let n of this.segments)for(let s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new Bt([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function xr(l,n){return 256*(l=hi(Math.floor(l),0,255))+hi(Math.floor(n),0,255)}Bt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,st("SegmentVector",Bt);let gi=ai([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ii,zi,En,oo={exports:{}},Gs={exports:{}},Ws={exports:{}},Ku=function(){if(En)return oo.exports;En=1;var l=(Ii||(Ii=1,Gs.exports=function(s,h){var p,_,x,S,E,C,R,F;for(_=s.length-(p=3&s.length),x=h,E=3432918353,C=461845907,F=0;F<_;)R=255&s.charCodeAt(F)|(255&s.charCodeAt(++F))<<8|(255&s.charCodeAt(++F))<<16|(255&s.charCodeAt(++F))<<24,++F,x=27492+(65535&(S=5*(65535&(x=(x^=R=(65535&(R=(R=(65535&R)*E+(((R>>>16)*E&65535)<<16)&4294967295)<<15|R>>>17))*C+(((R>>>16)*C&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(R=0,p){case 3:R^=(255&s.charCodeAt(F+2))<<16;case 2:R^=(255&s.charCodeAt(F+1))<<8;case 1:x^=R=(65535&(R=(R=(65535&(R^=255&s.charCodeAt(F)))*E+(((R>>>16)*E&65535)<<16)&4294967295)<<15|R>>>17))*C+(((R>>>16)*C&65535)<<16)&4294967295}return x^=s.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Gs.exports),n=(zi||(zi=1,Ws.exports=function(s,h){for(var p,_=s.length,x=h^_,S=0;_>=4;)p=1540483477*(65535&(p=255&s.charCodeAt(S)|(255&s.charCodeAt(++S))<<8|(255&s.charCodeAt(++S))<<16|(255&s.charCodeAt(++S))<<24))+((1540483477*(p>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),_-=4,++S;switch(_){case 3:x^=(255&s.charCodeAt(S+2))<<16;case 2:x^=(255&s.charCodeAt(S+1))<<8;case 1:x=1540483477*(65535&(x^=255&s.charCodeAt(S)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),Ws.exports);return oo.exports=l,oo.exports.murmur3=l,oo.exports.murmur2=n,oo.exports}(),Hu=b(Ku);class Kl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(Hl(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let s=Hl(n),h=0,p=this.ids.length-1;for(;h<p;){let x=h+p>>1;this.ids[x]>=s?p=x:h=x+1}let _=[];for(;this.ids[h]===s;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(n,s){let h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Zn(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){let s=new Kl;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Hl(l){let n=+l;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Hu(String(l))}function Zn(l,n,s,h){for(;s<h;){let p=l[s+h>>1],_=s-1,x=h+1;for(;;){do _++;while(l[_]<p);do x--;while(l[x]>p);if(_>=x)break;so(l,_,x),so(n,3*_,3*x),so(n,3*_+1,3*x+1),so(n,3*_+2,3*x+2)}x-s<h-x?(Zn(l,n,s,x),s=x+1):(Zn(l,n,x+1,h),h=x)}}function so(l,n,s){let h=l[n];l[n]=l[s],l[s]=h}st("FeaturePositionMap",Kl);class An{constructor(n,s){this.gl=n.gl,this.location=s}}class Zs extends An{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class yi extends An{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Pi extends An{constructor(n,s){super(n,s),this.current=Yt.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}let Ma=new Float32Array(16);function _i(l){return[xr(255*l.r,255*l.g),xr(255*l.b,255*l.a)]}class Lh{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Pi(n,s):new Zs(n,s)}}class Xu{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){let _=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new yi(n,s):new Zs(n,s)}}class os{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h){let p=this.paintVertexArray.length,_=this.expression.evaluate(new Ar(0,h),s,{},h.canonical,[],h.formattedSection);this.paintVertexArray.resize(n),this._setPaintValue(p,n,_)}updatePaintArray(n,s,h,p,_){let x=this.expression.evaluate(new Ar(0,_),h,p);this._setPaintValue(n,s,x)}_setPaintValue(n,s,h){if(this.type==="color"){let p=_i(h);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class lo{constructor(n,s,h,p,_,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h){let p=this.expression.evaluate(new Ar(this.zoom,h),s,{},h.canonical,[],h.formattedSection),_=this.expression.evaluate(new Ar(this.zoom+1,h),s,{},h.canonical,[],h.formattedSection),x=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(x,n,p,_)}updatePaintArray(n,s,h,p,_){let x=this.expression.evaluate(new Ar(this.zoom,_),h,p),S=this.expression.evaluate(new Ar(this.zoom+1,_),h,p);this._setPaintValue(n,s,x,S)}_setPaintValue(n,s,h,p){if(this.type==="color"){let _=_i(h),x=_i(p);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){let h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=hi(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new Zs(n,s)}}class Ks{constructor(n,s,h,p,_,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,h){let p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h.imagePositions)}updatePaintArray(n,s,h,p,_){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],_.imagePositions)}_setPaintValues(n,s,h,p){if(!p||!h)return;let{min:_,mid:x,max:S}=h,E=p[_],C=p[x],R=p[S];if(E&&C&&R)for(let F=n;F<s;F++)this.zoomInPaintVertexArray.emplace(F,C.tl[0],C.tl[1],C.br[0],C.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],C.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(F,C.tl[0],C.tl[1],C.br[0],C.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],C.pixelRatio,R.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,gi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,gi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ib{constructor(n,s,h){this.binders={},this._buffers=[];let p=[];for(let _ in n.paint._values){if(!h(_))continue;let x=n.paint.get(_);if(!(x instanceof Po&&Us(x.property.specification)))continue;let S=nb(_,n.type),E=x.value,C=x.property.specification.type,R=x.property.useIntegerZoom,F=x.property.specification["property-type"],B=F==="cross-faded"||F==="cross-faded-data-driven";if(E.kind==="constant")this.binders[_]=B?new Xu(E.value,S):new Lh(E.value,S,C),p.push(`/u_${_}`);else if(E.kind==="source"||B){let $=Qv(_,C,"source");this.binders[_]=B?new Ks(E,C,R,s,$,n.id):new os(E,S,C,$),p.push(`/a_${_}`)}else{let $=Qv(_,C,"composite");this.binders[_]=new lo(E,S,C,R,s,$),p.push(`/z_${_}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){let s=this.binders[n];return s instanceof os||s instanceof lo?s.maxValue:0}populatePaintArrays(n,s,h){for(let p in this.binders){let _=this.binders[p];(_ instanceof os||_ instanceof lo||_ instanceof Ks)&&_.populatePaintArray(n,s,h)}}setConstantPatternPositions(n,s){for(let h in this.binders){let p=this.binders[h];p instanceof Xu&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,_){let x=!1;for(let S in n){let E=s.getPositions(S);for(let C of E){let R=h.feature(C.index);for(let F in this.binders){let B=this.binders[F];if((B instanceof os||B instanceof lo||B instanceof Ks)&&B.expression.isStateDependent===!0){let $=p.paint.get(F);B.expression=$.value,B.updatePaintArray(C.start,C.end,R,n[S],_),x=!0}}}}return x}defines(){let n=[];for(let s in this.binders){let h=this.binders[s];(h instanceof Lh||h instanceof Xu)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){let n=[];for(let s in this.binders){let h=this.binders[s];if(h instanceof os||h instanceof lo)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof Ks)for(let p=0;p<gi.members.length;p++)n.push(gi.members[p].name)}return n}getBinderUniforms(){let n=[];for(let s in this.binders){let h=this.binders[s];if(h instanceof Lh||h instanceof Xu||h instanceof lo)for(let p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){let h=[];for(let p in this.binders){let _=this.binders[p];if(_ instanceof Lh||_ instanceof Xu||_ instanceof lo){for(let x of _.uniformNames)if(s[x]){let S=_.getBinding(n,s[x],x);h.push({name:x,property:p,binding:S})}}}return h}setUniforms(n,s,h,p){for(let{name:_,property:x,binding:S}of s)this.binders[x].setUniform(S,p,h.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(let s in this.binders){let h=this.binders[s];if(n&&h instanceof Ks){let p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof os||h instanceof lo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(let s in this.binders){let h=this.binders[s];(h instanceof os||h instanceof lo||h instanceof Ks)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(let n in this.binders){let s=this.binders[n];(s instanceof os||s instanceof lo||s instanceof Ks)&&s.destroy()}}}class fa{constructor(n,s,h=()=>!0){this.programConfigurations={};for(let p of n)this.programConfigurations[p.id]=new ib(p,s,h);this.needsUpload=!1,this._featureMap=new Kl,this._bufferOffset=0}populatePaintArrays(n,s,h,p){for(let _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(n,s,p);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(let _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(let s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(let n in this.programConfigurations)this.programConfigurations[n].destroy()}}function nb(l,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${n}-`,"").replace(/-/g,"_")]}function Qv(l,n,s){let h={color:{source:Dh,composite:L},number:{source:y,composite:Dh}},p=function(_){return{"line-pattern":{source:We,composite:We},"fill-pattern":{source:We,composite:We},"fill-extrusion-pattern":{source:We,composite:We}}[_]}(l);return p&&p[s]||h[n][s]}st("ConstantBinder",Lh),st("CrossFadedConstantBinder",Xu),st("SourceExpressionBinder",os),st("CrossFadedCompositeBinder",Ks),st("CompositeExpressionBinder",lo),st("ProgramConfiguration",ib,{omit:["_buffers"]}),st("ProgramConfigurationSet",fa);let Cf=Math.pow(2,14)-1,Mf=-Cf-1;function Hs(l){let n=Dt/l.extent,s=l.loadGeometry();for(let h=0;h<s.length;h++){let p=s[h];for(let _=0;_<p.length;_++){let x=p[_],S=Math.round(x.x*n),E=Math.round(x.y*n);x.x=hi(S,Mf,Cf),x.y=hi(E,Mf,Cf),(S<x.x||S>x.x+1||E<x.y||E>x.y+1)&&jr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ss(l,n){return{type:l.type,id:l.id,properties:l.properties,geometry:n?Hs(l):[]}}let Z3=-32768;function D1e(l,n,s,h,p){l.emplaceBack(Z3+8*n+h,Z3+8*s+p)}class zq{constructor(n){this.zoom=n.zoom,this.globalState=n.globalState,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Te,this.indexArray=new _r,this.segments=new Bt,this.programConfigurations=new fa(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){let p=this.layers[0],_=[],x=null,S=!1,E=p.type==="heatmap";if(p.type==="circle"){let R=p;x=R.layout.get("circle-sort-key"),S=!x.isConstant(),E=E||R.paint.get("circle-pitch-alignment")==="map"}let C=E?s.subdivisionGranularity.circle:1;for(let{feature:R,id:F,index:B,sourceLayerIndex:$}of n){let G=this.layers[0]._featureFilter.needGeometry,K=ss(R,G);if(!this.layers[0]._featureFilter.filter(new Ar(this.zoom,{globalState:this.globalState}),K,h))continue;let Q=S?x.evaluate(K,{},h):void 0,oe={id:F,properties:R.properties,type:R.type,sourceLayerIndex:$,index:B,geometry:G?K.geometry:Hs(R),patterns:{},sortKey:Q};_.push(oe)}S&&_.sort((R,F)=>R.sortKey-F.sortKey);for(let R of _){let{geometry:F,index:B,sourceLayerIndex:$}=R,G=n[B].feature;this.addFeature(R,F,B,h,C),s.featureIndex.insert(G,F,B,$,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:h,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Yr),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p,_=1){let x;switch(_){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}let S=x.length;for(let E of s)for(let C of E){let R=C.x,F=C.y;if(R<0||R>=Dt||F<0||F>=Dt)continue;let B=this.segments.prepareSegment(S*S,this.layoutVertexArray,this.indexArray,n.sortKey),$=B.vertexLength;for(let G=0;G<S;G++)for(let K=0;K<S;K++)D1e(this.layoutVertexArray,R,F,x[K],x[G]);for(let G=0;G<S-1;G++)for(let K=0;K<S-1;K++){let Q=$+G*S+K,oe=$+(G+1)*S+K;this.indexArray.emplaceBack(Q,oe+1,Q+1),this.indexArray.emplaceBack(Q,oe,oe+1)}B.vertexLength+=S*S,B.primitiveLength+=(S-1)*(S-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{imagePositions:{},canonical:p,globalState:this.globalState})}}function K3(l,n){for(let s=0;s<l.length;s++)if(Rf(n,l[s]))return!0;for(let s=0;s<n.length;s++)if(Rf(l,n[s]))return!0;return!!Nq(l,n)}function L1e(l,n,s){return!!Rf(l,n)||!!Bq(n,l,s)}function H3(l,n){if(l.length===1)return Y3(n,l[0]);for(let s=0;s<n.length;s++){let h=n[s];for(let p=0;p<h.length;p++)if(Rf(l,h[p]))return!0}for(let s=0;s<l.length;s++)if(Y3(n,l[s]))return!0;for(let s=0;s<n.length;s++)if(Nq(l,n[s]))return!0;return!1}function F1e(l,n,s){if(l.length>1){if(Nq(l,n))return!0;for(let h=0;h<n.length;h++)if(Bq(n[h],l,s))return!0}for(let h=0;h<l.length;h++)if(Bq(l[h],n,s))return!0;return!1}function Nq(l,n){if(l.length===0||n.length===0)return!1;for(let s=0;s<l.length-1;s++){let h=l[s],p=l[s+1];for(let _=0;_<n.length-1;_++)if(z1e(h,p,n[_],n[_+1]))return!0}return!1}function z1e(l,n,s,h){return sa(l,s,h)!==sa(n,s,h)&&sa(l,n,s)!==sa(l,n,h)}function Bq(l,n,s){let h=s*s;if(n.length===1)return l.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(X3(l,n[p-1],n[p])<h)return!0;return!1}function X3(l,n,s){let h=n.distSqr(s);if(h===0)return l.distSqr(n);let p=((l.x-n.x)*(s.x-n.x)+(l.y-n.y)*(s.y-n.y))/h;return l.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function Y3(l,n){let s,h,p,_=!1;for(let x=0;x<l.length;x++){s=l[x];for(let S=0,E=s.length-1;S<s.length;E=S++)h=s[S],p=s[E],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(_=!_)}return _}function Rf(l,n){let s=!1;for(let h=0,p=l.length-1;h<l.length;p=h++){let _=l[h],x=l[p];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function N1e(l,n,s){let h=s[0],p=s[2];if(l.x<h.x&&n.x<h.x||l.x>p.x&&n.x>p.x||l.y<h.y&&n.y<h.y||l.y>p.y&&n.y>p.y)return!1;let _=sa(l,n,s[0]);return _!==sa(l,n,s[1])||_!==sa(l,n,s[2])||_!==sa(l,n,s[3])}function eg(l,n,s){let h=n.paint.get(l).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(l)}function ab(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function ob(l,n,s,h,p){if(!n[0]&&!n[1])return l;let _=v.convert(n)._mult(p);s==="viewport"&&_._rotate(-h);let x=[];for(let S=0;S<l.length;S++)x.push(l[S].sub(_));return x}let J3,Q3;st("CircleBucket",zq,{omit:["layers"]});var B1e={get paint(){return Q3=Q3||new Tn({"circle-radius":new Tt(Ee.paint_circle["circle-radius"]),"circle-color":new Tt(Ee.paint_circle["circle-color"]),"circle-blur":new Tt(Ee.paint_circle["circle-blur"]),"circle-opacity":new Tt(Ee.paint_circle["circle-opacity"]),"circle-translate":new mt(Ee.paint_circle["circle-translate"]),"circle-translate-anchor":new mt(Ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mt(Ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mt(Ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tt(Ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tt(Ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tt(Ee.paint_circle["circle-stroke-opacity"])})},get layout(){return J3=J3||new Tn({"circle-sort-key":new Tt(Ee.layout_circle["circle-sort-key"])})}};class j1e extends Ca{constructor(n){super(n,B1e)}createBucket(n){return new zq(n)}queryRadius(n){let s=n;return eg("circle-radius",this,s)+eg("circle-stroke-width",this,s)+ab(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:h,geometry:p,transform:_,pixelsToTileUnits:x,unwrappedTileID:S,getElevation:E}){let C=ob(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,x),R=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),F=this.paint.get("circle-pitch-alignment")==="map",B=F?C:function(G,K,Q,oe){return G.map(Se=>ej(Se,K,Q,oe))}(C,_,S,E),$=F?R*x:R;for(let G of p)for(let K of G){let Q=F?K:ej(K,_,S,E),oe=$,Se=_.projectTileCoordinates(K.x,K.y,S,E).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?oe*=Se/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(oe*=_.cameraToCenterDistance/Se),L1e(B,Q,oe))return!0}return!1}}function ej(l,n,s,h){let p=n.projectTileCoordinates(l.x,l.y,s,h).point;return new v((.5*p.x+.5)*n.width,(.5*-p.y+.5)*n.height)}class tj extends zq{}let rj;st("HeatmapBucket",tj,{omit:["layers"]});var U1e={get paint(){return rj=rj||new Tn({"heatmap-radius":new Tt(Ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tt(Ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mt(Ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Af(Ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mt(Ee.paint_heatmap["heatmap-opacity"])})}};function jq(l,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return l.width=n,l.height=s,l.data=p,l}function ij(l,{width:n,height:s},h){if(n===l.width&&s===l.height)return;let p=jq({},{width:n,height:s},h);Uq(l,p,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,n),height:Math.min(l.height,s)},h),l.width=n,l.height=s,l.data=p.data}function Uq(l,n,s,h,p,_){if(p.width===0||p.height===0)return n;if(p.width>l.width||p.height>l.height||s.x>l.width-p.width||s.y>l.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");let x=l.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<p.height;E++){let C=((s.y+E)*l.width+s.x)*_,R=((h.y+E)*n.width+h.x)*_;for(let F=0;F<p.width*_;F++)S[R+F]=x[C+F]}return n}class tg{constructor(n,s){jq(this,n,1,s)}resize(n){ij(this,n,1)}clone(){return new tg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,_){Uq(n,s,h,p,_,1)}}class pa{constructor(n,s){jq(this,n,4,s)}resize(n){ij(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new pa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,_){Uq(n,s,h,p,_,4)}setPixel(n,s,h){let p=4*(n*this.width+s);this.data[p+0]=Math.round(255*h.r/h.a),this.data[p+1]=Math.round(255*h.g/h.a),this.data[p+2]=Math.round(255*h.b/h.a),this.data[p+3]=Math.round(255*h.a)}}function nj(l){let n={},s=l.resolution||256,h=l.clips?l.clips.length:1,p=l.image||new pa({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);let _=(x,S,E)=>{n[l.evaluationKey]=E;let C=l.expression.evaluate(n);p.setPixel(x/4/s,S/4,C)};if(l.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let E=0,C=0;E<s;E++,C+=4){let R=E/(s-1),{start:F,end:B}=l.clips[x];_(S,C,F*(1-R)+B*R)}else for(let x=0,S=0;x<s;x++,S+=4)_(0,S,x/(s-1));return p}st("AlphaImage",tg),st("RGBAImage",pa);let Vq="big-fb";class V1e extends Ca{createBucket(n){return new tj(n)}constructor(n){super(n,U1e),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=nj({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Vq)&&this.heatmapFbos.delete(Vq)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let aj;var $1e={get paint(){return aj=aj||new Tn({"hillshade-illumination-direction":new mt(Ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new mt(Ee.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new mt(Ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mt(Ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mt(Ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mt(Ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mt(Ee.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new mt(Ee.paint_hillshade["hillshade-method"])})}};class G1e extends Ca{constructor(n){super(n,$1e),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let n=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values,_=Math.max(n.length,s.length,h.length,p.length);n=n.concat(Array(_-n.length).fill(n.at(-1))),s=s.concat(Array(_-s.length).fill(s.at(-1))),h=h.concat(Array(_-h.length).fill(h.at(-1))),p=p.concat(Array(_-p.length).fill(p.at(-1)));let x=s.map(_e);return{directionRadians:n.map(_e),altitudeRadians:x,shadowColor:p,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let oj;var W1e={get paint(){return oj=oj||new Tn({"color-relief-opacity":new mt(Ee["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Af(Ee["paint_color-relief"]["color-relief-color"])})}};class $q{constructor(n,s,h,p){this.context=n,this.format=h,this.texture=n.gl.createTexture(),this.update(s,p)}update(n,s,h){let{width:p,height:_}=n,x=!(this.size&&this.size[0]===p&&this.size[1]===_||h),{context:S}=this,{gl:E}=S;if(this.useMipmap=!!(s&&s.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!s||s.premultiply!==!1)),x)this.size=[p,_],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||ua(n)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,n):E.texImage2D(E.TEXTURE_2D,0,this.format,p,_,0,this.format,E.UNSIGNED_BYTE,n.data);else{let{x:C,y:R}=h||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||ua(n)?E.texSubImage2D(E.TEXTURE_2D,0,C,R,E.RGBA,E.UNSIGNED_BYTE,n):E.texSubImage2D(E.TEXTURE_2D,0,C,R,p,_,E.RGBA,E.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D),S.pixelStoreUnpackFlipY.setDefault(),S.pixelStoreUnpack.setDefault(),S.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,s,h){let{context:p}=this,{gl:_}=p;_.bindTexture(_.TEXTURE_2D,this.texture),h!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=_.LINEAR),n!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,n),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,h||n),this.filter=n),s!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,s),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class sj{constructor(n,s,h,p=1,_=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void jr(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;let E=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=_,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let C=0;C<E;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(E,C)]=this.data[this._idx(E-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,E)]=this.data[this._idx(C,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let C=0;C<E;C++)for(let R=0;R<E;R++){let F=this.get(C,R);F>this.max&&(this.max=F),F<this.min&&(this.min=F)}}get(n,s){let h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}pack(n){return lj(n,this.getUnpackVector())}getPixels(){return new pa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,_=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:p=_-1;break;case 1:_=p+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}let E=-s*this.dim,C=-h*this.dim;for(let R=x;R<S;R++)for(let F=p;F<_;F++)this.data[this._idx(F,R)]=n.data[this._idx(F+E,R+C)]}}function lj(l,n){let s=n[0],h=n[1],p=n[2],_=n[3],x=Math.min(s,h,p),S=Math.round((l+_)/x);return{r:Math.floor(S*x/s)%256,g:Math.floor(S*x/h)%256,b:Math.floor(S*x/p)%256}}st("DEMData",sj);class Z1e extends Ca{constructor(n){super(n,W1e)}_createColorRamp(n){let s={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof Ah&&h._styleExpression.expression instanceof Xi){this.colorRampExpression=h;let x=h._styleExpression.expression;s.elevationStops=x.labels,s.colorStops=[];for(let S of s.elevationStops)s.colorStops.push(x.evaluate({globals:{elevation:S}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[Yt.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=n)return s;let p={elevationStops:[],colorStops:[]},_=(s.elevationStops.length-1)/(n-1);for(let x=0;x<s.elevationStops.length-.5;x+=_)p.elevationStops.push(s.elevationStops[Math.round(x)]),p.colorStops.push(s.colorStops[Math.round(x)]);return jr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),p}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(n,s,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let p=this._createColorRamp(s),_=new pa({width:p.colorStops.length,height:1}),x=new pa({width:p.colorStops.length,height:1});for(let S=0;S<p.elevationStops.length;S++){let E=lj(p.elevationStops[S],h);x.setPixel(0,S,new Yt(E.r/255,E.g/255,E.b/255,1)),_.setPixel(0,S,p.colorStops[S])}return this.colorRampTextures={elevationTexture:new $q(n,x,n.gl.RGBA),colorTexture:new $q(n,_,n.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}let K1e=ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:H1e}=K1e;function Gq(l,n,s){let h=s.patternDependencies,p=!1;for(let _ of n){let x=_.paint.get(`${l}-pattern`);x.isConstant()||(p=!0);let S=x.constantOr(null);S&&(p=!0,h[S.to]=!0,h[S.from]=!0)}return p}function Wq(l,n,s,h,p){let{zoom:_,globalState:x}=h,S=p.patternDependencies;for(let E of n){let C=E.paint.get(`${l}-pattern`).value;if(C.kind!=="constant"){let R=C.evaluate({zoom:_-1,globalState:x},s,{},p.availableImages),F=C.evaluate({zoom:_,globalState:x},s,{},p.availableImages),B=C.evaluate({zoom:_+1,globalState:x},s,{},p.availableImages);R=R&&R.name?R.name:R,F=F&&F.name?F.name:F,B=B&&B.name?B.name:B,S[R]=!0,S[F]=!0,S[B]=!0,s.patterns[E.id]={min:R,mid:F,max:B}}}return s}function uj(l,n,s,h,p){let _;if(p===function(x,S,E,C){let R=0;for(let F=S,B=E-C;F<E;F+=C)R+=(x[B]-x[F])*(x[F+1]+x[B+1]),B=F;return R}(l,n,s,h)>0)for(let x=n;x<s;x+=h)_=fj(x/h|0,l[x],l[x+1],_);else for(let x=s-h;x>=n;x-=h)_=fj(x/h|0,l[x],l[x+1],_);return _&&Of(_,_.next)&&(ag(_),_=_.next),_}function Fh(l,n){if(!l)return l;n||(n=l);let s,h=l;do if(s=!1,h.steiner||!Of(h,h.next)&&fi(h.prev,h,h.next)!==0)h=h.next;else{if(ag(h),h=n=h.prev,h===h.next)break;s=!0}while(s||h!==n);return n}function rg(l,n,s,h,p,_,x){if(!l)return;!x&&_&&function(E,C,R,F){let B=E;do B.z===0&&(B.z=Zq(B.x,B.y,C,R,F)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==E);B.prevZ.nextZ=null,B.prevZ=null,function($){let G,K=1;do{let Q,oe=$;$=null;let Se=null;for(G=0;oe;){G++;let pe=oe,ge=0;for(let De=0;De<K&&(ge++,pe=pe.nextZ,pe);De++);let Ce=K;for(;ge>0||Ce>0&&pe;)ge!==0&&(Ce===0||!pe||oe.z<=pe.z)?(Q=oe,oe=oe.nextZ,ge--):(Q=pe,pe=pe.nextZ,Ce--),Se?Se.nextZ=Q:$=Q,Q.prevZ=Se,Se=Q;oe=pe}Se.nextZ=null,K*=2}while(G>1)}(B)}(l,h,p,_);let S=l;for(;l.prev!==l.next;){let E=l.prev,C=l.next;if(_?Y1e(l,h,p,_):X1e(l))n.push(E.i,l.i,C.i),ag(l),l=C.next,S=C.next;else if((l=C)===S){x?x===1?rg(l=J1e(Fh(l),n),n,s,h,p,_,2):x===2&&Q1e(l,n,s,h,p,_):rg(Fh(l),n,s,h,p,_,1);break}}}function X1e(l){let n=l.prev,s=l,h=l.next;if(fi(n,s,h)>=0)return!1;let p=n.x,_=s.x,x=h.x,S=n.y,E=s.y,C=h.y,R=Math.min(p,_,x),F=Math.min(S,E,C),B=Math.max(p,_,x),$=Math.max(S,E,C),G=h.next;for(;G!==n;){if(G.x>=R&&G.x<=B&&G.y>=F&&G.y<=$&&ig(p,S,_,E,x,C,G.x,G.y)&&fi(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function Y1e(l,n,s,h){let p=l.prev,_=l,x=l.next;if(fi(p,_,x)>=0)return!1;let S=p.x,E=_.x,C=x.x,R=p.y,F=_.y,B=x.y,$=Math.min(S,E,C),G=Math.min(R,F,B),K=Math.max(S,E,C),Q=Math.max(R,F,B),oe=Zq($,G,n,s,h),Se=Zq(K,Q,n,s,h),pe=l.prevZ,ge=l.nextZ;for(;pe&&pe.z>=oe&&ge&&ge.z<=Se;){if(pe.x>=$&&pe.x<=K&&pe.y>=G&&pe.y<=Q&&pe!==p&&pe!==x&&ig(S,R,E,F,C,B,pe.x,pe.y)&&fi(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,ge.x>=$&&ge.x<=K&&ge.y>=G&&ge.y<=Q&&ge!==p&&ge!==x&&ig(S,R,E,F,C,B,ge.x,ge.y)&&fi(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;pe&&pe.z>=oe;){if(pe.x>=$&&pe.x<=K&&pe.y>=G&&pe.y<=Q&&pe!==p&&pe!==x&&ig(S,R,E,F,C,B,pe.x,pe.y)&&fi(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;ge&&ge.z<=Se;){if(ge.x>=$&&ge.x<=K&&ge.y>=G&&ge.y<=Q&&ge!==p&&ge!==x&&ig(S,R,E,F,C,B,ge.x,ge.y)&&fi(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function J1e(l,n){let s=l;do{let h=s.prev,p=s.next.next;!Of(h,p)&&hj(h,s,s.next,p)&&ng(h,p)&&ng(p,h)&&(n.push(h.i,s.i,p.i),ag(s),ag(s.next),s=l=p),s=s.next}while(s!==l);return Fh(s)}function Q1e(l,n,s,h,p,_){let x=l;do{let S=x.next.next;for(;S!==x.prev;){if(x.i!==S.i&&nwe(x,S)){let E=dj(x,S);return x=Fh(x,x.next),E=Fh(E,E.next),rg(x,n,s,h,p,_,0),void rg(E,n,s,h,p,_,0)}S=S.next}x=x.next}while(x!==l)}function ewe(l,n){let s=l.x-n.x;return s===0&&(s=l.y-n.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(n.next.y-n.y)/(n.next.x-n.x)),s}function twe(l,n){let s=function(p,_){let x=_,S=p.x,E=p.y,C,R=-1/0;if(Of(p,x))return x;do{if(Of(p,x.next))return x.next;if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){let K=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(K<=S&&K>R&&(R=K,C=x.x<x.next.x?x:x.next,K===S))return C}x=x.next}while(x!==_);if(!C)return null;let F=C,B=C.x,$=C.y,G=1/0;x=C;do{if(S>=x.x&&x.x>=B&&S!==x.x&&cj(E<$?S:R,E,B,$,E<$?R:S,E,x.x,x.y)){let K=Math.abs(E-x.y)/(S-x.x);ng(x,p)&&(K<G||K===G&&(x.x>C.x||x.x===C.x&&rwe(C,x)))&&(C=x,G=K)}x=x.next}while(x!==F);return C}(l,n);if(!s)return n;let h=dj(s,l);return Fh(h,h.next),Fh(s,s.next)}function rwe(l,n){return fi(l.prev,l,n.prev)<0&&fi(n.next,l,l.next)<0}function Zq(l,n,s,h,p){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*p|0)|l<<8))|l<<4))|l<<2))|l<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function iwe(l){let n=l,s=l;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==l);return s}function cj(l,n,s,h,p,_,x,S){return(p-x)*(n-S)>=(l-x)*(_-S)&&(l-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(_-S)>=(p-x)*(h-S)}function ig(l,n,s,h,p,_,x,S){return!(l===x&&n===S)&&cj(l,n,s,h,p,_,x,S)}function nwe(l,n){return l.next.i!==n.i&&l.prev.i!==n.i&&!function(s,h){let p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&hj(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(l,n)&&(ng(l,n)&&ng(n,l)&&function(s,h){let p=s,_=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do p.y>S!=p.next.y>S&&p.next.y!==p.y&&x<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(_=!_),p=p.next;while(p!==s);return _}(l,n)&&(fi(l.prev,l,n.prev)||fi(l,n.prev,n))||Of(l,n)&&fi(l.prev,l,l.next)>0&&fi(n.prev,n,n.next)>0)}function fi(l,n,s){return(n.y-l.y)*(s.x-n.x)-(n.x-l.x)*(s.y-n.y)}function Of(l,n){return l.x===n.x&&l.y===n.y}function hj(l,n,s,h){let p=lb(fi(l,n,s)),_=lb(fi(l,n,h)),x=lb(fi(s,h,l)),S=lb(fi(s,h,n));return p!==_&&x!==S||!(p!==0||!sb(l,s,n))||!(_!==0||!sb(l,h,n))||!(x!==0||!sb(s,l,h))||!(S!==0||!sb(s,n,h))}function sb(l,n,s){return n.x<=Math.max(l.x,s.x)&&n.x>=Math.min(l.x,s.x)&&n.y<=Math.max(l.y,s.y)&&n.y>=Math.min(l.y,s.y)}function lb(l){return l>0?1:l<0?-1:0}function ng(l,n){return fi(l.prev,l,l.next)<0?fi(l,n,l.next)>=0&&fi(l,l.prev,n)>=0:fi(l,n,l.prev)<0||fi(l,l.next,n)<0}function dj(l,n){let s=Kq(l.i,l.x,l.y),h=Kq(n.i,n.x,n.y),p=l.next,_=n.prev;return l.next=n,n.prev=l,s.next=p,p.prev=s,h.next=s,s.prev=h,_.next=h,h.prev=_,h}function fj(l,n,s,h){let p=Kq(l,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function ag(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Kq(l,n,s){return{i:l,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class kf{constructor(n,s){if(s>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=s}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class ub{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}ub.noSubdivision=new ub({fill:new kf(0,0),line:new kf(0,0),tile:new kf(0,0),stencil:new kf(0,0),circle:1}),st("SubdivisionGranularityExpression",kf),st("SubdivisionGranularitySetting",ub);let Df=-32768,og=32767;class awe{constructor(n,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=Dt/n,this._canonical=s}_getKey(n,s){return(n+=32768)<<16|s+32768}_vertexToIndex(n,s){if(n<-32768||s<-32768||n>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let h=0|Math.round(n),p=0|Math.round(s),_=this._getKey(h,p);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);let x=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,x),this._vertexBuffer.push(h,p),x}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(p,_){let x=[];for(let S=0;S<_.length;S+=3){let E=_[S],C=_[S+1],R=_[S+2],F=p[2*E],B=p[2*E+1];(p[2*C]-F)*(p[2*R+1]-B)-(p[2*C+1]-B)*(p[2*R]-F)>0?(x.push(E),x.push(R),x.push(C)):(x.push(E),x.push(C),x.push(R))}return x}(this._vertexBuffer,n);let s=[],h=n.length;for(let p=0;p<h;p+=3){let _=[n[p+0],n[p+1],n[p+2]],x=[this._vertexBuffer[2*n[p+0]+0],this._vertexBuffer[2*n[p+0]+1],this._vertexBuffer[2*n[p+1]+0],this._vertexBuffer[2*n[p+1]+1],this._vertexBuffer[2*n[p+2]+0],this._vertexBuffer[2*n[p+2]+1]],S=1/0,E=1/0,C=-1/0,R=-1/0;for(let K=0;K<3;K++){let Q=x[2*K],oe=x[2*K+1];S=Math.min(S,Q),C=Math.max(C,Q),E=Math.min(E,oe),R=Math.max(R,oe)}if(S===C||E===R)continue;let F=Math.floor(S/this._granularityCellSize),B=Math.ceil(C/this._granularityCellSize),$=Math.floor(E/this._granularityCellSize),G=Math.ceil(R/this._granularityCellSize);if(F!==B||$!==G)for(let K=$;K<G;K++){let Q=this._scanlineGenerateVertexRingForCellRow(K,x,_);owe(this._vertexBuffer,Q,s)}else s.push(..._)}return s}_scanlineGenerateVertexRingForCellRow(n,s,h){let p=n*this._granularityCellSize,_=p+this._granularityCellSize,x=[];for(let S=0;S<3;S++){let E=s[2*S],C=s[2*S+1],R=s[2*(S+1)%6],F=s[(2*(S+1)+1)%6],B=s[2*(S+2)%6],$=s[(2*(S+2)+1)%6],G=R-E,K=F-C,Q=G===0,oe=K===0,Se=(p-C)/K,pe=(_-C)/K,ge=Math.min(Se,pe),Ce=Math.max(Se,pe);if(!oe&&(ge>=1||Ce<=0)||oe&&(C<p||C>_)){F>=p&&F<=_&&x.push(h[(S+1)%3]);continue}!oe&&ge>0&&x.push(this._vertexToIndex(E+G*ge,C+K*ge));let De=E+G*Math.max(ge,0),Ve=E+G*Math.min(Ce,1);Q||this._generateIntraEdgeVertices(x,E,C,R,F,De,Ve),!oe&&Ce<1&&x.push(this._vertexToIndex(E+G*Ce,C+K*Ce)),(oe||F>=p&&F<=_)&&x.push(h[(S+1)%3]),!oe&&(F<=p||F>=_)&&this._generateInterEdgeVertices(x,E,C,R,F,B,$,Ve,p,_)}return x}_generateIntraEdgeVertices(n,s,h,p,_,x,S){let E=p-s,C=_-h,R=C===0,F=R?Math.min(s,p):Math.min(x,S),B=R?Math.max(s,p):Math.max(x,S),$=Math.floor(F/this._granularityCellSize)+1,G=Math.ceil(B/this._granularityCellSize)-1;if(R?s<p:x<S)for(let K=$;K<=G;K++){let Q=K*this._granularityCellSize;n.push(this._vertexToIndex(Q,h+C*(Q-s)/E))}else for(let K=G;K>=$;K--){let Q=K*this._granularityCellSize;n.push(this._vertexToIndex(Q,h+C*(Q-s)/E))}}_generateInterEdgeVertices(n,s,h,p,_,x,S,E,C,R){let F=_-h,B=x-p,$=S-_,G=(C-_)/$,K=(R-_)/$,Q=Math.min(G,K),oe=Math.max(G,K),Se=p+B*Q,pe=Math.floor(Math.min(Se,E)/this._granularityCellSize)+1,ge=Math.ceil(Math.max(Se,E)/this._granularityCellSize)-1,Ce=E<Se,De=$===0;if(De&&(S===C||S===R))return;if(De||Q>=1||oe<=0){let tt=h-S,He=x+(s-x)*Math.min((C-S)/tt,(R-S)/tt);pe=Math.floor(Math.min(He,E)/this._granularityCellSize)+1,ge=Math.ceil(Math.max(He,E)/this._granularityCellSize)-1,Ce=E<He}let Ve=F>0?R:C;if(Ce)for(let tt=pe;tt<=ge;tt++)n.push(this._vertexToIndex(tt*this._granularityCellSize,Ve));else for(let tt=ge;tt>=pe;tt--)n.push(this._vertexToIndex(tt*this._granularityCellSize,Ve))}_generateOutline(n){let s=[];for(let h of n){let p=zh(h,this._granularity,!0),_=this._pointArrayToIndices(p),x=[];for(let S=1;S<_.length;S++)x.push(_[S-1]),x.push(_[S]);s.push(x)}return s}_handlePoles(n){let s=!1,h=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(s||h)&&this._fillPoles(n,s,h)}_ensureNoPoleVertices(){let n=this._vertexBuffer;for(let s=0;s<n.length;s+=2){let h=n[s+1];h===Df&&(n[s+1]=-32767),h===og&&(n[s+1]=32766)}}_generatePoleQuad(n,s,h,p,_,x){p>_!=(x===Df)?(n.push(s),n.push(h),n.push(this._vertexToIndex(p,x)),n.push(h),n.push(this._vertexToIndex(_,x)),n.push(this._vertexToIndex(p,x))):(n.push(h),n.push(s),n.push(this._vertexToIndex(p,x)),n.push(this._vertexToIndex(_,x)),n.push(h),n.push(this._vertexToIndex(p,x)))}_fillPoles(n,s,h){let p=this._vertexBuffer,_=Dt,x=n.length;for(let S=2;S<x;S+=3){let E=n[S-2],C=n[S-1],R=n[S],F=p[2*E],B=p[2*E+1],$=p[2*C],G=p[2*C+1],K=p[2*R],Q=p[2*R+1];s&&(B===0&&G===0&&this._generatePoleQuad(n,E,C,F,$,Df),G===0&&Q===0&&this._generatePoleQuad(n,C,R,$,K,Df),Q===0&&B===0&&this._generatePoleQuad(n,R,E,K,F,Df)),h&&(B===_&&G===_&&this._generatePoleQuad(n,E,C,F,$,og),G===_&&Q===_&&this._generatePoleQuad(n,C,R,$,K,og),Q===_&&B===_&&this._generatePoleQuad(n,R,E,K,F,og))}}_initializeVertices(n){for(let s=0;s<n.length;s+=2)this._vertexToIndex(n[s],n[s+1])}subdividePolygonInternal(n,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:h,holeIndices:p}=function(S){let E=[],C=[];for(let R of S)if(R.length!==0){R!==S[0]&&E.push(C.length/2);for(let F=0;F<R.length;F++)C.push(R[F].x),C.push(R[F].y)}return{flattened:C,holeIndices:E}}(n),_;this._initializeVertices(h);try{let S=function(C,R,F=2){let B=R&&R.length,$=B?R[0]*F:C.length,G=uj(C,0,$,F,!0),K=[];if(!G||G.next===G.prev)return K;let Q,oe,Se;if(B&&(G=function(pe,ge,Ce,De){let Ve=[];for(let tt=0,He=ge.length;tt<He;tt++){let Qe=uj(pe,ge[tt]*De,tt<He-1?ge[tt+1]*De:pe.length,De,!1);Qe===Qe.next&&(Qe.steiner=!0),Ve.push(iwe(Qe))}Ve.sort(ewe);for(let tt=0;tt<Ve.length;tt++)Ce=twe(Ve[tt],Ce);return Ce}(C,R,G,F)),C.length>80*F){Q=C[0],oe=C[1];let pe=Q,ge=oe;for(let Ce=F;Ce<$;Ce+=F){let De=C[Ce],Ve=C[Ce+1];De<Q&&(Q=De),Ve<oe&&(oe=Ve),De>pe&&(pe=De),Ve>ge&&(ge=Ve)}Se=Math.max(pe-Q,ge-oe),Se=Se!==0?32767/Se:0}return rg(G,K,F,Q,oe,Se,0),K}(h,p),E=this._convertIndices(h,S);_=this._subdivideTrianglesScanline(E)}catch(S){console.error(S)}let x=[];return s&&(x=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:x}}_convertIndices(n,s){let h=[];for(let p=0;p<s.length;p++)h.push(this._vertexToIndex(n[2*s[p]],n[2*s[p]+1]));return h}_pointArrayToIndices(n){let s=[];for(let h=0;h<n.length;h++){let p=n[h];s.push(this._vertexToIndex(p.x,p.y))}return s}}function pj(l,n,s,h=!0){return new awe(s,n).subdividePolygonInternal(l,h)}function zh(l,n,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];let h=l[0],p=l[l.length-1],_=s&&(h.x!==p.x||h.y!==p.y);if(n<2)return _?[...l,l[0]]:[...l];let x=Math.floor(Dt/n),S=[];S.push(new v(l[0].x,l[0].y));let E=l.length,C=_?E:E-1;for(let R=0;R<C;R++){let F=l[R],B=R<E-1?l[R+1]:l[0],$=F.x,G=F.y,K=B.x,Q=B.y,oe=$!==K,Se=G!==Q;if(!oe&&!Se)continue;let pe=K-$,ge=Q-G,Ce=Math.abs(pe),De=Math.abs(ge),Ve=$,tt=G;for(;;){let Qe=pe>0?(Math.floor(Ve/x)+1)*x:(Math.ceil(Ve/x)-1)*x,gt=ge>0?(Math.floor(tt/x)+1)*x:(Math.ceil(tt/x)-1)*x,Je=Math.abs(Ve-Qe),et=Math.abs(tt-gt),Fe=Math.abs(Ve-K),qt=Math.abs(tt-Q),Mt=oe?Je/Ce:Number.POSITIVE_INFINITY,bt=Se?et/De:Number.POSITIVE_INFINITY;if((Fe<=Je||!oe)&&(qt<=et||!Se))break;if(Mt<bt&&oe||!Se){Ve=Qe,tt+=ge*Mt;let ft=new v(Ve,Math.round(tt));S[S.length-1].x===ft.x&&S[S.length-1].y===ft.y||S.push(ft)}else{Ve+=pe*bt,tt=gt;let ft=new v(Math.round(Ve),tt);S[S.length-1].x===ft.x&&S[S.length-1].y===ft.y||S.push(ft)}}let He=new v(K,Q);S[S.length-1].x===He.x&&S[S.length-1].y===He.y||S.push(He)}return S}function owe(l,n,s){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,p=l[2*n[0]];for(let E=1;E<n.length;E++){let C=l[2*n[E]];C<p&&(p=C,h=E)}let _=n.length,x=h,S=(x+1)%_;for(;;){let E=x-1>=0?x-1:_-1,C=(S+1)%_,R=l[2*n[E]],F=l[2*n[C]],B=l[2*n[x]],$=l[2*n[x]+1],G=l[2*n[S]+1],K=!1;if(R<F)K=!0;else if(R>F)K=!1;else{let Q=G-$,oe=-(l[2*n[S]]-B),Se=$<G?1:-1;((R-B)*Q+(l[2*n[E]+1]-$)*oe)*Se>((F-B)*Q+(l[2*n[C]+1]-$)*oe)*Se&&(K=!0)}if(K){let Q=n[E],oe=n[x],Se=n[S];Q!==oe&&Q!==Se&&oe!==Se&&s.push(Se,oe,Q),x--,x<0&&(x=_-1)}else{let Q=n[C],oe=n[x],Se=n[S];Q!==oe&&Q!==Se&&oe!==Se&&s.push(Se,oe,Q),S++,S>=_&&(S=0)}if(E===C)break}}function mj(l,n,s,h,p,_,x,S,E){let C=p.length/2,R=x&&S&&E;if(C<Bt.MAX_VERTEX_ARRAY_LENGTH){let F=n.prepareSegment(C,s,h),B=F.vertexLength;for(let K=0;K<_.length;K+=3)h.emplaceBack(B+_[K],B+_[K+1],B+_[K+2]);let $,G;F.vertexLength+=C,F.primitiveLength+=_.length/3,R&&(G=x.prepareSegment(C,s,S),$=G.vertexLength,G.vertexLength+=C);for(let K=0;K<p.length;K+=2)l(p[K],p[K+1]);if(R)for(let K=0;K<E.length;K++){let Q=E[K];for(let oe=1;oe<Q.length;oe+=2)S.emplaceBack($+Q[oe-1],$+Q[oe]);G.primitiveLength+=Q.length/2}}else(function(F,B,$,G,K,Q){let oe=[];for(let De=0;De<G.length/2;De++)oe.push(-1);let Se={count:0},pe=0,ge=F.getOrCreateLatestSegment(B,$),Ce=ge.vertexLength;for(let De=2;De<K.length;De+=3){let Ve=K[De-2],tt=K[De-1],He=K[De],Qe=oe[Ve]<pe,gt=oe[tt]<pe,Je=oe[He]<pe;ge.vertexLength+((Qe?1:0)+(gt?1:0)+(Je?1:0))>Bt.MAX_VERTEX_ARRAY_LENGTH&&(ge=F.createNewSegment(B,$),pe=Se.count,Qe=!0,gt=!0,Je=!0,Ce=0);let et=sg(oe,G,Q,Se,Ve,Qe,ge),Fe=sg(oe,G,Q,Se,tt,gt,ge),qt=sg(oe,G,Q,Se,He,Je,ge);$.emplaceBack(Ce+et-pe,Ce+Fe-pe,Ce+qt-pe),ge.primitiveLength++}})(n,s,h,p,_,l),R&&function(F,B,$,G,K,Q){let oe=[];for(let De=0;De<G.length/2;De++)oe.push(-1);let Se={count:0},pe=0,ge=F.getOrCreateLatestSegment(B,$),Ce=ge.vertexLength;for(let De=0;De<K.length;De++){let Ve=K[De];for(let tt=1;tt<K[De].length;tt+=2){let He=Ve[tt-1],Qe=Ve[tt],gt=oe[He]<pe,Je=oe[Qe]<pe;ge.vertexLength+((gt?1:0)+(Je?1:0))>Bt.MAX_VERTEX_ARRAY_LENGTH&&(ge=F.createNewSegment(B,$),pe=Se.count,gt=!0,Je=!0,Ce=0);let et=sg(oe,G,Q,Se,He,gt,ge),Fe=sg(oe,G,Q,Se,Qe,Je,ge);$.emplaceBack(Ce+et-pe,Ce+Fe-pe),ge.primitiveLength++}}}(x,s,S,p,E,l),n.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function sg(l,n,s,h,p,_,x){if(_){let S=h.count;return s(n[2*p],n[2*p+1]),l[p]=h.count,h.count++,x.vertexLength++,S}return l[p]}class Hq{constructor(n){this.zoom=n.zoom,this.globalState=n.globalState,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Oe,this.indexArray=new _r,this.indexArray2=new vr,this.programConfigurations=new fa(n.layers,n.zoom),this.segments=new Bt,this.segments2=new Bt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Gq("fill",this.layers,s);let p=this.layers[0].layout.get("fill-sort-key"),_=!p.isConstant(),x=[];for(let{feature:S,id:E,index:C,sourceLayerIndex:R}of n){let F=this.layers[0]._featureFilter.needGeometry,B=ss(S,F);if(!this.layers[0]._featureFilter.filter(new Ar(this.zoom,{globalState:this.globalState}),B,h))continue;let $=_?p.evaluate(B,{},h,s.availableImages):void 0,G={id:E,properties:S.properties,type:S.type,sourceLayerIndex:R,index:C,geometry:F?B.geometry:Hs(S),patterns:{},sortKey:$};x.push(G)}_&&x.sort((S,E)=>S.sortKey-E.sortKey);for(let S of x){let{geometry:E,index:C,sourceLayerIndex:R}=S;if(this.hasPattern){let F=Wq("fill",this.layers,S,{zoom:this.zoom,globalState:this.globalState},s);this.patternFeatures.push(F)}else this.addFeature(S,E,C,h,{},s.subdivisionGranularity);s.featureIndex.insert(n[C].feature,E,C,R,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:h,globalState:this.globalState})}addFeatures(n,s,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,H1e),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,_,x){for(let S of bh(s,500)){let E=pj(S,p,x.fill.getGranularityForZoomLevel(p.z)),C=this.layoutVertexArray;mj((R,F)=>{C.emplaceBack(R,F)},this.segments,this.layoutVertexArray,this.indexArray,E.verticesFlattened,E.indicesTriangles,this.segments2,this.indexArray2,E.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{imagePositions:_,canonical:p,globalState:this.globalState})}}let vj,gj;st("FillBucket",Hq,{omit:["layers","patternFeatures"]});var swe={get paint(){return gj=gj||new Tn({"fill-antialias":new mt(Ee.paint_fill["fill-antialias"]),"fill-opacity":new Tt(Ee.paint_fill["fill-opacity"]),"fill-color":new Tt(Ee.paint_fill["fill-color"]),"fill-outline-color":new Tt(Ee.paint_fill["fill-outline-color"]),"fill-translate":new mt(Ee.paint_fill["fill-translate"]),"fill-translate-anchor":new mt(Ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ef(Ee.paint_fill["fill-pattern"])})},get layout(){return vj=vj||new Tn({"fill-sort-key":new Tt(Ee.layout_fill["fill-sort-key"])})}};class lwe extends Ca{constructor(n){super(n,swe)}recalculate(n,s){super.recalculate(n,s);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Hq(n)}queryRadius(){return ab(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:s,transform:h,pixelsToTileUnits:p}){return H3(ob(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,p),s)}isTileClipped(){return!0}}let uwe=ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),cwe=ai([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hwe}=uwe;class Lf{constructor(n,s,h,p,_){this.properties={},this.extent=h,this.type=0,this.id=void 0,this._pbf=n,this._geometry=-1,this._keys=p,this._values=_,n.readFields(dwe,this,s)}loadGeometry(){let n=this._pbf;n.pos=this._geometry;let s=n.readVarint()+n.pos,h=[],p,_=1,x=0,S=0,E=0;for(;n.pos<s;){if(x<=0){let C=n.readVarint();_=7&C,x=C>>3}if(x--,_===1||_===2)S+=n.readSVarint(),E+=n.readSVarint(),_===1&&(p&&h.push(p),p=[]),p&&p.push(new v(S,E));else{if(_!==7)throw new Error(`unknown command ${_}`);p&&p.push(p[0].clone())}}return p&&h.push(p),h}bbox(){let n=this._pbf;n.pos=this._geometry;let s=n.readVarint()+n.pos,h=1,p=0,_=0,x=0,S=1/0,E=-1/0,C=1/0,R=-1/0;for(;n.pos<s;){if(p<=0){let F=n.readVarint();h=7&F,p=F>>3}if(p--,h===1||h===2)_+=n.readSVarint(),x+=n.readSVarint(),_<S&&(S=_),_>E&&(E=_),x<C&&(C=x),x>R&&(R=x);else if(h!==7)throw new Error(`unknown command ${h}`)}return[S,C,E,R]}toGeoJSON(n,s,h){let p=this.extent*Math.pow(2,h),_=this.extent*n,x=this.extent*s,S=this.loadGeometry();function E(B){return[360*(B.x+_)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(B.y+x)/p)*Math.PI))-90]}function C(B){return B.map(E)}let R;if(this.type===1){let B=[];for(let G of S)B.push(G[0]);let $=C(B);R=B.length===1?{type:"Point",coordinates:$[0]}:{type:"MultiPoint",coordinates:$}}else if(this.type===2){let B=S.map(C);R=B.length===1?{type:"LineString",coordinates:B[0]}:{type:"MultiLineString",coordinates:B}}else{if(this.type!==3)throw new Error("unknown feature type");{let B=function(G){let K=G.length;if(K<=1)return[G];let Q=[],oe,Se;for(let pe=0;pe<K;pe++){let ge=fwe(G[pe]);ge!==0&&(Se===void 0&&(Se=ge<0),Se===ge<0?(oe&&Q.push(oe),oe=[G[pe]]):oe&&oe.push(G[pe]))}return oe&&Q.push(oe),Q}(S),$=[];for(let G of B)$.push(G.map(C));R=$.length===1?{type:"Polygon",coordinates:$[0]}:{type:"MultiPolygon",coordinates:$}}}let F={type:"Feature",geometry:R,properties:this.properties};return this.id!=null&&(F.id=this.id),F}}function dwe(l,n,s){l===1?n.id=s.readVarint():l===2?function(h,p){let _=h.readVarint()+h.pos;for(;h.pos<_;){let x=p._keys[h.readVarint()],S=p._values[h.readVarint()];p.properties[x]=S}}(s,n):l===3?n.type=s.readVarint():l===4&&(n._geometry=s.pos)}function fwe(l){let n=0;for(let s,h,p=0,_=l.length,x=_-1;p<_;x=p++)s=l[p],h=l[x],n+=(h.x-s.x)*(s.y+h.y);return n}Lf.types=["Unknown","Point","LineString","Polygon"];class yj{constructor(n,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(pwe,this,s),this.length=this._features.length}feature(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];let s=this._pbf.readVarint()+this._pbf.pos;return new Lf(this._pbf,s,this.extent,this._keys,this._values)}}function pwe(l,n,s){l===15?n.version=s.readVarint():l===1?n.name=s.readString():l===5?n.extent=s.readVarint():l===2?n._features.push(s.pos):l===3?n._keys.push(s.readString()):l===4&&n._values.push(function(h){let p=null,_=h.readVarint()+h.pos;for(;h.pos<_;){let x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}if(p==null)throw new Error("unknown feature value");return p}(s))}class _j{constructor(n,s){this.layers=n.readFields(mwe,{},s)}}function mwe(l,n,s){if(l===3){let h=new yj(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}let Xq=Math.pow(2,13);function lg(l,n,s,h,p,_,x,S){l.emplaceBack(n,s,2*Math.floor(h*Xq)+x,p*Xq*2,_*Xq*2,Math.round(S))}class Yq{constructor(n){this.zoom=n.zoom,this.globalState=n.globalState,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ie,this.centroidVertexArray=new he,this.indexArray=new _r,this.programConfigurations=new fa(n.layers,n.zoom),this.segments=new Bt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Gq("fill-extrusion",this.layers,s);for(let{feature:p,id:_,index:x,sourceLayerIndex:S}of n){let E=this.layers[0]._featureFilter.needGeometry,C=ss(p,E);if(!this.layers[0]._featureFilter.filter(new Ar(this.zoom,{globalState:this.globalState}),C,h))continue;let R={id:_,sourceLayerIndex:S,index:x,geometry:E?C.geometry:Hs(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(Wq("fill-extrusion",this.layers,R,{zoom:this.zoom,globalState:this.globalState},s)):this.addFeature(R,R.geometry,x,h,{},s.subdivisionGranularity),s.featureIndex.insert(p,R.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(let p of this.features){let{geometry:_}=p;this.addFeature(p,_,p.index,s,h,n.subdivisionGranularity)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:h,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,hwe),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,cwe.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,_,x){for(let S of bh(s,500)){let E={x:0,y:0,sampleCount:0},C=this.layoutVertexArray.length;this.processPolygon(E,p,n,S,x);let R=this.layoutVertexArray.length-C,F=Math.floor(E.x/E.sampleCount),B=Math.floor(E.y/E.sampleCount);for(let $=0;$<R;$++)this.centroidVertexArray.emplaceBack(F,B)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{imagePositions:_,canonical:p,globalState:this.globalState})}processPolygon(n,s,h,p,_){if(p.length<1||xj(p[0]))return;for(let F of p)F.length!==0&&vwe(n,F);let x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},S=_.fill.getGranularityForZoomLevel(s.z),E=Lf.types[h.type]==="Polygon";for(let F of p){if(F.length===0||xj(F))continue;let B=zh(F,S,E);this._generateSideFaces(B,x)}if(!E)return;let C=pj(p,s,S,!1),R=this.layoutVertexArray;mj((F,B)=>{lg(R,F,B,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,C.verticesFlattened,C.indicesTriangles)}_generateSideFaces(n,s){let h=0;for(let p=1;p<n.length;p++){let _=n[p],x=n[p-1];if(gwe(_,x))continue;s.segment.vertexLength+4>Bt.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let S=_.sub(x)._perp()._unit(),E=x.dist(_);h+E>32768&&(h=0),lg(this.layoutVertexArray,_.x,_.y,S.x,S.y,0,0,h),lg(this.layoutVertexArray,_.x,_.y,S.x,S.y,0,1,h),h+=E,lg(this.layoutVertexArray,x.x,x.y,S.x,S.y,0,0,h),lg(this.layoutVertexArray,x.x,x.y,S.x,S.y,0,1,h);let C=s.segment.vertexLength;this.indexArray.emplaceBack(C,C+2,C+1),this.indexArray.emplaceBack(C+1,C+2,C+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function vwe(l,n){for(let s=0;s<n.length;s++){let h=n[s];s===n.length-1&&n[0].x===h.x&&n[0].y===h.y||(l.x+=h.x,l.y+=h.y,l.sampleCount++)}}function gwe(l,n){return l.x===n.x&&(l.x<0||l.x>Dt)||l.y===n.y&&(l.y<0||l.y>Dt)}function xj(l){return l.every(n=>n.x<0)||l.every(n=>n.x>Dt)||l.every(n=>n.y<0)||l.every(n=>n.y>Dt)}let bj;st("FillExtrusionBucket",Yq,{omit:["layers","features"]});var ywe={get paint(){return bj=bj||new Tn({"fill-extrusion-opacity":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tt(Ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ef(Ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tt(Ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tt(Ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class _we extends Ca{constructor(n){super(n,ywe)}createBucket(n){return new Yq(n)}queryRadius(){return ab(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:h,geometry:p,transform:_,pixelsToTileUnits:x,pixelPosMatrix:S}){let E=ob(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,x),C=this.paint.get("fill-extrusion-height").evaluate(s,h),R=this.paint.get("fill-extrusion-base").evaluate(s,h),F=function($,G){let K=[];for(let Q of $){let oe=[Q.x,Q.y,0,1];Pt(oe,oe,G),K.push(new v(oe[0]/oe[3],oe[1]/oe[3]))}return K}(E,S),B=function($,G,K,Q){let oe=[],Se=[],pe=Q[8]*G,ge=Q[9]*G,Ce=Q[10]*G,De=Q[11]*G,Ve=Q[8]*K,tt=Q[9]*K,He=Q[10]*K,Qe=Q[11]*K;for(let gt of $){let Je=[],et=[];for(let Fe of gt){let qt=Fe.x,Mt=Fe.y,bt=Q[0]*qt+Q[4]*Mt+Q[12],ft=Q[1]*qt+Q[5]*Mt+Q[13],ir=Q[2]*qt+Q[6]*Mt+Q[14],Jr=Q[3]*qt+Q[7]*Mt+Q[15],Ci=ir+Ce,fn=Jr+De,co=bt+Ve,ma=ft+tt,Yi=ir+He,Vr=Jr+Qe,Bi=new v((bt+pe)/fn,(ft+ge)/fn);Bi.z=Ci/fn,Je.push(Bi);let Ji=new v(co/Vr,ma/Vr);Ji.z=Yi/Vr,et.push(Ji)}oe.push(Je),Se.push(et)}return[oe,Se]}(p,R,C,S);return function($,G,K){let Q=1/0;H3(K,G)&&(Q=wj(K,G[0]));for(let oe=0;oe<G.length;oe++){let Se=G[oe],pe=$[oe];for(let ge=0;ge<Se.length-1;ge++){let Ce=Se[ge],De=[Ce,Se[ge+1],pe[ge+1],pe[ge],Ce];K3(K,De)&&(Q=Math.min(Q,wj(K,De)))}}return Q!==1/0&&Q}(B[0],B[1],F)}}function ug(l,n){return l.x*n.x+l.y*n.y}function wj(l,n){if(l.length===1){let s=0,h=n[s++],p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){let _=n[s],x=l[0],S=p.sub(h),E=_.sub(h),C=x.sub(h),R=ug(S,S),F=ug(S,E),B=ug(E,E),$=ug(C,S),G=ug(C,E),K=R*B-F*F,Q=(B*$-F*G)/K,oe=(R*G-F*$)/K,Se=h.z*(1-Q-oe)+p.z*Q+_.z*oe;if(isFinite(Se))return Se}return 1/0}{let s=1/0;for(let h of n)s=Math.min(s,h.z);return s}}let xwe=ai([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:bwe}=xwe,wwe=ai([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Swe}=wwe,Twe=Math.cos(Math.PI/180*37.5),Sj=Math.pow(2,14)/.5;class Jq{constructor(n){this.zoom=n.zoom,this.globalState=n.globalState,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Pe,this.layoutVertexArray2=new Re,this.indexArray=new _r,this.programConfigurations=new fa(n.layers,n.zoom),this.segments=new Bt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Gq("line",this.layers,s);let p=this.layers[0].layout.get("line-sort-key"),_=!p.isConstant(),x=[];for(let{feature:S,id:E,index:C,sourceLayerIndex:R}of n){let F=this.layers[0]._featureFilter.needGeometry,B=ss(S,F);if(!this.layers[0]._featureFilter.filter(new Ar(this.zoom,{globalState:this.globalState}),B,h))continue;let $=_?p.evaluate(B,{},h):void 0,G={id:E,properties:S.properties,type:S.type,sourceLayerIndex:R,index:C,geometry:F?B.geometry:Hs(S),patterns:{},sortKey:$};x.push(G)}_&&x.sort((S,E)=>S.sortKey-E.sortKey);for(let S of x){let{geometry:E,index:C,sourceLayerIndex:R}=S;if(this.hasPattern){let F=Wq("line",this.layers,S,{zoom:this.zoom,globalState:this.globalState},s);this.patternFeatures.push(F)}else this.addFeature(S,E,C,h,{},s.subdivisionGranularity);s.featureIndex.insert(n[C].feature,E,C,R,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,{imagePositions:h,globalState:this.globalState})}addFeatures(n,s,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Swe)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,bwe),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,_,x){let S=this.layers[0].layout,E=S.get("line-join").evaluate(n,{}),C=S.get("line-cap"),R=S.get("line-miter-limit"),F=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(let B of s)this.addLine(B,n,E,C,R,F,p,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{imagePositions:_,canonical:p,globalState:this.globalState})}addLine(n,s,h,p,_,x,S,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=zh(n,S?E.line.getGranularityForZoomLevel(S.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<n.length-1;pe++)this.totalDistance+=n[pe].dist(n[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let C=Lf.types[s.type]==="Polygon",R=n.length;for(;R>=2&&n[R-1].equals(n[R-2]);)R--;let F=0;for(;F<R-1&&n[F].equals(n[F+1]);)F++;if(R<(C?3:2))return;h==="bevel"&&(_=1.05);let B=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray),G,K,Q,oe,Se;this.e1=this.e2=-1,C&&(G=n[R-2],Se=n[F].sub(G)._unit()._perp());for(let pe=F;pe<R;pe++){if(Q=pe===R-1?C?n[F+1]:void 0:n[pe+1],Q&&n[pe].equals(Q))continue;Se&&(oe=Se),G&&(K=G),G=n[pe],Se=Q?Q.sub(G)._unit()._perp():oe,oe=oe||Se;let ge=oe.add(Se);ge.x===0&&ge.y===0||ge._unit();let Ce=oe.x*Se.x+oe.y*Se.y,De=ge.x*Se.x+ge.y*Se.y,Ve=De!==0?1/De:1/0,tt=2*Math.sqrt(2-2*De),He=De<Twe&&K&&Q,Qe=oe.x*Se.y-oe.y*Se.x>0;if(He&&pe>F){let et=G.dist(K);if(et>2*B){let Fe=G.sub(G.sub(K)._mult(B/et)._round());this.updateDistance(K,Fe),this.addCurrentVertex(Fe,oe,0,0,$),K=Fe}}let gt=K&&Q,Je=gt?h:C?"butt":p;if(gt&&Je==="round"&&(Ve<x?Je="miter":Ve<=2&&(Je="fakeround")),Je==="miter"&&Ve>_&&(Je="bevel"),Je==="bevel"&&(Ve>2&&(Je="flipbevel"),Ve<_&&(Je="miter")),K&&this.updateDistance(K,G),Je==="miter")ge._mult(Ve),this.addCurrentVertex(G,ge,0,0,$);else if(Je==="flipbevel"){if(Ve>100)ge=Se.mult(-1);else{let et=Ve*oe.add(Se).mag()/oe.sub(Se).mag();ge._perp()._mult(et*(Qe?-1:1))}this.addCurrentVertex(G,ge,0,0,$),this.addCurrentVertex(G,ge.mult(-1),0,0,$)}else if(Je==="bevel"||Je==="fakeround"){let et=-Math.sqrt(Ve*Ve-1),Fe=Qe?et:0,qt=Qe?0:et;if(K&&this.addCurrentVertex(G,oe,Fe,qt,$),Je==="fakeround"){let Mt=Math.round(180*tt/Math.PI/20);for(let bt=1;bt<Mt;bt++){let ft=bt/Mt;if(ft!==.5){let Jr=ft-.5;ft+=ft*Jr*(ft-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*Jr*Jr+(.848013+Ce*(.215638*Ce-1.06021)))}let ir=Se.sub(oe)._mult(ft)._add(oe)._unit()._mult(Qe?-1:1);this.addHalfVertex(G,ir.x,ir.y,!1,Qe,0,$)}}Q&&this.addCurrentVertex(G,Se,-Fe,-qt,$)}else if(Je==="butt")this.addCurrentVertex(G,ge,0,0,$);else if(Je==="square"){let et=K?1:-1;this.addCurrentVertex(G,ge,et,et,$)}else Je==="round"&&(K&&(this.addCurrentVertex(G,oe,0,0,$),this.addCurrentVertex(G,oe,1,1,$,!0)),Q&&(this.addCurrentVertex(G,Se,-1,-1,$,!0),this.addCurrentVertex(G,Se,0,0,$)));if(He&&pe<R-1){let et=G.dist(Q);if(et>2*B){let Fe=G.add(Q.sub(G)._mult(B/et)._round());this.updateDistance(G,Fe),this.addCurrentVertex(Fe,Se,0,0,$),G=Fe}}}}addCurrentVertex(n,s,h,p,_,x=!1){let S=s.y*p-s.x,E=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,_),this.addHalfVertex(n,S,E,x,!0,-p,_),this.distance>Sj/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,_,x))}addHalfVertex({x:n,y:s},h,p,_,x,S,E){let C=.5*(this.lineClips?this.scaledDistance*(Sj-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(S===0?0:S<0?-1:1)|(63&C)<<2,C>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let R=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,R,this.e2),E.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Tj,Ej;st("LineBucket",Jq,{omit:["layers","patternFeatures"]});var Aj={get paint(){return Ej=Ej||new Tn({"line-opacity":new Tt(Ee.paint_line["line-opacity"]),"line-color":new Tt(Ee.paint_line["line-color"]),"line-translate":new mt(Ee.paint_line["line-translate"]),"line-translate-anchor":new mt(Ee.paint_line["line-translate-anchor"]),"line-width":new Tt(Ee.paint_line["line-width"]),"line-gap-width":new Tt(Ee.paint_line["line-gap-width"]),"line-offset":new Tt(Ee.paint_line["line-offset"]),"line-blur":new Tt(Ee.paint_line["line-blur"]),"line-dasharray":new $s(Ee.paint_line["line-dasharray"]),"line-pattern":new Ef(Ee.paint_line["line-pattern"]),"line-gradient":new Af(Ee.paint_line["line-gradient"])})},get layout(){return Tj=Tj||new Tn({"line-cap":new mt(Ee.layout_line["line-cap"]),"line-join":new Tt(Ee.layout_line["line-join"]),"line-miter-limit":new mt(Ee.layout_line["line-miter-limit"]),"line-round-limit":new mt(Ee.layout_line["line-round-limit"]),"line-sort-key":new Tt(Ee.layout_line["line-sort-key"])})}};class Ewe extends Tt{possiblyEvaluate(n,s){return s=new Ar(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=Un({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let cb;class Awe extends Ca{constructor(n){super(n,Aj),this.gradientVersion=0,cb||(cb=new Ewe(Aj.paint.properties["line-width"].specification),cb.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){let s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof ni,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=cb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Jq(n)}queryRadius(n){let s=n,h=qj(eg("line-width",this,s),eg("line-gap-width",this,s)),p=eg("line-offset",this,s);return h/2+Math.abs(p)+ab(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:s,featureState:h,geometry:p,transform:_,pixelsToTileUnits:x}){let S=ob(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,x),E=x/2*qj(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),C=this.paint.get("line-offset").evaluate(s,h);return C&&(p=function(R,F){let B=[];for(let $=0;$<R.length;$++){let G=R[$],K=[];for(let Q=0;Q<G.length;Q++){let oe=G[Q-1],Se=G[Q],pe=G[Q+1],ge=Q===0?new v(0,0):Se.sub(oe)._unit()._perp(),Ce=Q===G.length-1?new v(0,0):pe.sub(Se)._unit()._perp(),De=ge._add(Ce)._unit(),Ve=De.x*Ce.x+De.y*Ce.y;Ve!==0&&De._mult(1/Ve),K.push(De._mult(F)._add(Se))}B.push(K)}return B}(p,C*x)),function(R,F,B){for(let $=0;$<F.length;$++){let G=F[$];if(R.length>=3){for(let K=0;K<G.length;K++)if(Rf(R,G[K]))return!0}if(F1e(R,G,B))return!0}return!1}(S,p,E)}isTileClipped(){return!0}}function qj(l,n){return n>0?n+2*l:l}let qwe=ai([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Iwe=ai([{name:"a_projected_pos",components:3,type:"Float32"}],4);ai([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Pwe=ai([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ai([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Ij=ai([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Cwe=ai([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Mwe(l,n,s){return l.sections.forEach(h=>{h.text=function(p,_,x){let S=_.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?p=p.toLocaleUpperCase():S==="lowercase"&&(p=p.toLocaleLowerCase()),ao.applyArabicShaping&&(p=ao.applyArabicShaping(p)),p}(h.text,n,s)}),l}ai([{name:"triangle",components:3,type:"Uint16"}]),ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ai([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ai([{type:"Float32",name:"offsetX"}]),ai([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ai([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let cg={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ni=24;let Qq=4294967296,Pj=1/Qq,Cj=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class eI{constructor(n=new Uint8Array(16)){this.buf=ArrayBuffer.isView(n)?n:new Uint8Array(n),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(n,s,h=this.length){for(;this.pos<h;){let p=this.readVarint(),_=p>>3,x=this.pos;this.type=7&p,n(_,s,this),this.pos===x&&this.skip(p)}return s}readMessage(n,s){return this.readFields(n,s,this.readVarint()+this.pos)}readFixed32(){let n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}readSFixed32(){let n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}readFixed64(){let n=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Qq;return this.pos+=8,n}readSFixed64(){let n=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Qq;return this.pos+=8,n}readFloat(){let n=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,n}readDouble(){let n=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,n}readVarint(n){let s=this.buf,h,p;return p=s[this.pos++],h=127&p,p<128?h:(p=s[this.pos++],h|=(127&p)<<7,p<128?h:(p=s[this.pos++],h|=(127&p)<<14,p<128?h:(p=s[this.pos++],h|=(127&p)<<21,p<128?h:(p=s[this.pos],h|=(15&p)<<28,function(_,x,S){let E=S.buf,C,R;if(R=E[S.pos++],C=(112&R)>>4,R<128||(R=E[S.pos++],C|=(127&R)<<3,R<128)||(R=E[S.pos++],C|=(127&R)<<10,R<128)||(R=E[S.pos++],C|=(127&R)<<17,R<128)||(R=E[S.pos++],C|=(127&R)<<24,R<128)||(R=E[S.pos++],C|=(1&R)<<31,R<128))return Ff(_,C,x);throw new Error("Expected varint not more than 10 bytes")}(h,n,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let n=this.readVarint();return n%2==1?(n+1)/-2:n/2}readBoolean(){return!!this.readVarint()}readString(){let n=this.readVarint()+this.pos,s=this.pos;return this.pos=n,n-s>=12&&Cj?Cj.decode(this.buf.subarray(s,n)):function(h,p,_){let x="",S=p;for(;S<_;){let E=h[S],C,R,F,B=null,$=E>239?4:E>223?3:E>191?2:1;if(S+$>_)break;$===1?E<128&&(B=E):$===2?(C=h[S+1],(192&C)==128&&(B=(31&E)<<6|63&C,B<=127&&(B=null))):$===3?(C=h[S+1],R=h[S+2],(192&C)==128&&(192&R)==128&&(B=(15&E)<<12|(63&C)<<6|63&R,(B<=2047||B>=55296&&B<=57343)&&(B=null))):$===4&&(C=h[S+1],R=h[S+2],F=h[S+3],(192&C)==128&&(192&R)==128&&(192&F)==128&&(B=(15&E)<<18|(63&C)<<12|(63&R)<<6|63&F,(B<=65535||B>=1114112)&&(B=null))),B===null?(B=65533,$=1):B>65535&&(B-=65536,x+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),x+=String.fromCharCode(B),S+=$}return x}(this.buf,s,n)}readBytes(){let n=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,n);return this.pos=n,s}readPackedVarint(n=[],s){let h=this.readPackedEnd();for(;this.pos<h;)n.push(this.readVarint(s));return n}readPackedSVarint(n=[]){let s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSVarint());return n}readPackedBoolean(n=[]){let s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readBoolean());return n}readPackedFloat(n=[]){let s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFloat());return n}readPackedDouble(n=[]){let s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readDouble());return n}readPackedFixed32(n=[]){let s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFixed32());return n}readPackedSFixed32(n=[]){let s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSFixed32());return n}readPackedFixed64(n=[]){let s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readFixed64());return n}readPackedSFixed64(n=[]){let s=this.readPackedEnd();for(;this.pos<s;)n.push(this.readSFixed64());return n}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(n){let s=7&n;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(n,s){this.writeVarint(n<<3|s)}realloc(n){let s=this.length||16;for(;s<this.pos+n;)s*=2;if(s!==this.length){let h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.dataView=new DataView(h.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeSFixed32(n){this.realloc(4),this.dataView.setInt32(this.pos,n,!0),this.pos+=4}writeFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Pj),!0),this.pos+=8}writeSFixed64(n){this.realloc(8),this.dataView.setInt32(this.pos,-1&n,!0),this.dataView.setInt32(this.pos+4,Math.floor(n*Pj),!0),this.pos+=8}writeVarint(n){(n=+n||0)>268435455||n<0?function(s,h){let p,_;if(s>=0?(p=s%4294967296|0,_=s/4294967296|0):(p=~(-s%4294967296),_=~(-s/4294967296),4294967295^p?p=p+1|0:(p=0,_=_+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(x,S,E){E.buf[E.pos++]=127&x|128,x>>>=7,E.buf[E.pos++]=127&x|128,x>>>=7,E.buf[E.pos++]=127&x|128,x>>>=7,E.buf[E.pos++]=127&x|128,E.buf[E.pos]=127&(x>>>=7)}(p,0,h),function(x,S){let E=(7&x)<<4;S.buf[S.pos++]|=E|((x>>>=3)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x)))))}(_,h)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))}writeSVarint(n){this.writeVarint(n<0?2*-n-1:2*n)}writeBoolean(n){this.writeVarint(+n)}writeString(n){n=String(n),this.realloc(4*n.length),this.pos++;let s=this.pos;this.pos=function(p,_,x){for(let S,E,C=0;C<_.length;C++){if(S=_.charCodeAt(C),S>55295&&S<57344){if(!E){S>56319||C+1===_.length?(p[x++]=239,p[x++]=191,p[x++]=189):E=S;continue}if(S<56320){p[x++]=239,p[x++]=191,p[x++]=189,E=S;continue}S=E-55296<<10|S-56320|65536,E=null}else E&&(p[x++]=239,p[x++]=191,p[x++]=189,E=null);S<128?p[x++]=S:(S<2048?p[x++]=S>>6|192:(S<65536?p[x++]=S>>12|224:(p[x++]=S>>18|240,p[x++]=S>>12&63|128),p[x++]=S>>6&63|128),p[x++]=63&S|128)}return x}(this.buf,n,this.pos);let h=this.pos-s;h>=128&&Mj(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h}writeFloat(n){this.realloc(4),this.dataView.setFloat32(this.pos,n,!0),this.pos+=4}writeDouble(n){this.realloc(8),this.dataView.setFloat64(this.pos,n,!0),this.pos+=8}writeBytes(n){let s=n.length;this.writeVarint(s),this.realloc(s);for(let h=0;h<s;h++)this.buf[this.pos++]=n[h]}writeRawMessage(n,s){this.pos++;let h=this.pos;n(s,this);let p=this.pos-h;p>=128&&Mj(h,p,this),this.pos=h-1,this.writeVarint(p),this.pos+=p}writeMessage(n,s,h){this.writeTag(n,2),this.writeRawMessage(s,h)}writePackedVarint(n,s){s.length&&this.writeMessage(n,Rwe,s)}writePackedSVarint(n,s){s.length&&this.writeMessage(n,Owe,s)}writePackedBoolean(n,s){s.length&&this.writeMessage(n,Lwe,s)}writePackedFloat(n,s){s.length&&this.writeMessage(n,kwe,s)}writePackedDouble(n,s){s.length&&this.writeMessage(n,Dwe,s)}writePackedFixed32(n,s){s.length&&this.writeMessage(n,Fwe,s)}writePackedSFixed32(n,s){s.length&&this.writeMessage(n,zwe,s)}writePackedFixed64(n,s){s.length&&this.writeMessage(n,Nwe,s)}writePackedSFixed64(n,s){s.length&&this.writeMessage(n,Bwe,s)}writeBytesField(n,s){this.writeTag(n,2),this.writeBytes(s)}writeFixed32Field(n,s){this.writeTag(n,5),this.writeFixed32(s)}writeSFixed32Field(n,s){this.writeTag(n,5),this.writeSFixed32(s)}writeFixed64Field(n,s){this.writeTag(n,1),this.writeFixed64(s)}writeSFixed64Field(n,s){this.writeTag(n,1),this.writeSFixed64(s)}writeVarintField(n,s){this.writeTag(n,0),this.writeVarint(s)}writeSVarintField(n,s){this.writeTag(n,0),this.writeSVarint(s)}writeStringField(n,s){this.writeTag(n,2),this.writeString(s)}writeFloatField(n,s){this.writeTag(n,5),this.writeFloat(s)}writeDoubleField(n,s){this.writeTag(n,1),this.writeDouble(s)}writeBooleanField(n,s){this.writeVarintField(n,+s)}}function Ff(l,n,s){return s?4294967296*n+(l>>>0):4294967296*(n>>>0)+(l>>>0)}function Mj(l,n,s){let h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(let p=s.pos-1;p>=l;p--)s.buf[p+h]=s.buf[p]}function Rwe(l,n){for(let s=0;s<l.length;s++)n.writeVarint(l[s])}function Owe(l,n){for(let s=0;s<l.length;s++)n.writeSVarint(l[s])}function kwe(l,n){for(let s=0;s<l.length;s++)n.writeFloat(l[s])}function Dwe(l,n){for(let s=0;s<l.length;s++)n.writeDouble(l[s])}function Lwe(l,n){for(let s=0;s<l.length;s++)n.writeBoolean(l[s])}function Fwe(l,n){for(let s=0;s<l.length;s++)n.writeFixed32(l[s])}function zwe(l,n){for(let s=0;s<l.length;s++)n.writeSFixed32(l[s])}function Nwe(l,n){for(let s=0;s<l.length;s++)n.writeFixed64(l[s])}function Bwe(l,n){for(let s=0;s<l.length;s++)n.writeSFixed64(l[s])}function jwe(l,n,s){l===1&&s.readMessage(Uwe,n)}function Uwe(l,n,s){if(l===3){let{id:h,bitmap:p,width:_,height:x,left:S,top:E,advance:C}=s.readMessage(Vwe,{});n.push({id:h,bitmap:new tg({width:_+6,height:x+6},p),metrics:{width:_,height:x,left:S,top:E,advance:C}})}}function Vwe(l,n,s){l===1?n.id=s.readVarint():l===2?n.bitmap=s.readBytes():l===3?n.width=s.readVarint():l===4?n.height=s.readVarint():l===5?n.left=s.readSVarint():l===6?n.top=s.readSVarint():l===7&&(n.advance=s.readVarint())}function Rj(l){let n=0,s=0;for(let x of l)n+=x.w*x.h,s=Math.max(s,x.w);l.sort((x,S)=>S.h-x.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}],p=0,_=0;for(let x of l)for(let S=h.length-1;S>=0;S--){let E=h[S];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,_=Math.max(_,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===E.w&&x.h===E.h){let C=h.pop();C&&S<h.length&&(h[S]=C)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(h.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:p,h:_,fill:n/(p*_)||0}}class tI{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:_,content:x,textFitWidth:S,textFitHeight:E}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=S,this.textFitHeight=E}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Oj{constructor(n,s){let h={},p={};this.haveRenderCallbacks=[];let _=[];this.addImages(n,h,_),this.addImages(s,p,_);let{w:x,h:S}=Rj(_),E=new pa({width:x||1,height:S||1});for(let C in n){let R=n[C],F=h[C].paddedRect;pa.copy(R.data,E,{x:0,y:0},{x:F.x+1,y:F.y+1},R.data)}for(let C in s){let R=s[C],F=p[C].paddedRect,B=F.x+1,$=F.y+1,G=R.data.width,K=R.data.height;pa.copy(R.data,E,{x:0,y:0},{x:B,y:$},R.data),pa.copy(R.data,E,{x:0,y:K-1},{x:B,y:$-1},{width:G,height:1}),pa.copy(R.data,E,{x:0,y:0},{x:B,y:$+K},{width:G,height:1}),pa.copy(R.data,E,{x:G-1,y:0},{x:B-1,y:$},{width:1,height:K}),pa.copy(R.data,E,{x:0,y:0},{x:B+G,y:$},{width:1,height:K})}this.image=E,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(let p in n){let _=n[p],x={x:0,y:0,w:_.data.width+2,h:_.data.height+2};h.push(x),s[p]=new tI(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;let[p,_]=n.tl;h.update(s.data,void 0,{x:p,y:_})}}var Yu;st("ImagePosition",tI),st("ImageAtlas",Oj),c.ao=void 0,(Yu=c.ao||(c.ao={}))[Yu.none=0]="none",Yu[Yu.horizontal=1]="horizontal",Yu[Yu.vertical=2]="vertical",Yu[Yu.horizontalOnly=3]="horizontalOnly";class hg{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,s,h){let p=new hg;return p.scale=n||1,p.fontStack=s,p.verticalAlign=h||"bottom",p}static forImage(n,s){let h=new hg;return h.imageName=n,h.verticalAlign=s||"bottom",h}}class zf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){let h=new zf;for(let p=0;p<n.sections.length;p++){let _=n.sections[p];_.image?h.addImageSection(_):h.addTextSection(_,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){let p=n.charCodeAt(h+1)||null,_=n.charCodeAt(h-1)||null;s+=p&&Xx(p)&&!cg[n[h+1]]||_&&Xx(_)&&!cg[n[h-1]]||!cg[n[h]]?n[h]:cg[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&db[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&db[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){let h=new zf;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}getMaxImageSize(n){let s=0,h=0;for(let p=0;p<this.length();p++){let _=this.getSection(p);if(_.imageName){let x=n[_.imageName];if(!x)continue;let S=x.displaySize;s=Math.max(s,S[0]),h=Math.max(h,S[1])}}return{maxImageWidth:s,maxImageHeight:h}}addTextSection(n,s){this.text+=n.text,this.sections.push(hg.forText(n.scale,n.fontStack||s,n.verticalAlign));let h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){let s=n.image?n.image.name:"";if(s.length===0)return void jr("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(hg.forImage(s,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):jr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hb(l,n,s,h,p,_,x,S,E,C,R,F,B,$,G){let K=zf.fromFeature(l,p),Q;F===c.ao.vertical&&K.verticalizePunctuation();let{processBidirectionalText:oe,processStyledBidirectionalText:Se}=ao;if(oe&&K.sections.length===1){Q=[];let Ce=oe(K.toString(),rI(K,C,_,n,h,$));for(let De of Ce){let Ve=new zf;Ve.text=De,Ve.sections=K.sections;for(let tt=0;tt<De.length;tt++)Ve.sectionIndex.push(0);Q.push(Ve)}}else if(Se){Q=[];let Ce=Se(K.text,K.sectionIndex,rI(K,C,_,n,h,$));for(let De of Ce){let Ve=new zf;Ve.text=De[0],Ve.sectionIndex=De[1],Ve.sections=K.sections,Q.push(Ve)}}else Q=function(Ce,De){let Ve=[],tt=Ce.text,He=0;for(let Qe of De)Ve.push(Ce.substring(He,Qe)),He=Qe;return He<tt.length&&Ve.push(Ce.substring(He,tt.length)),Ve}(K,rI(K,C,_,n,h,$));let pe=[],ge={positionedLines:pe,text:K.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(Ce,De,Ve,tt,He,Qe,gt,Je,et,Fe,qt,Mt){let bt=0,ft=0,ir=0,Jr=0,Ci=Je==="right"?1:Je==="left"?0:.5,fn=Ni/Mt,co=0;for(let Vr of He){Vr.trim();let Bi=Vr.getMaxScale(),Ji={positionedGlyphs:[],lineOffset:0};Ce.positionedLines[co]=Ji;let Qi=Ji.positionedGlyphs,Kn=0;if(!Vr.length()){ft+=Qe,++co;continue}let ho=Zwe(tt,Vr,fn);for(let va=0;va<Vr.length();va++){let Mi=Vr.getSection(va),Ui=Vr.getSectionIndex(va),Vi=Vr.getCharCode(va),xi=Kwe(et,qt,Vi),kr;if(Mi.imageName){if(Ce.iconsInText=!0,Mi.scale=Mi.scale*fn,kr=Xwe(Mi,xi,Bi,ho,tt),!kr)continue;Kn=Math.max(Kn,kr.imageOffset)}else if(kr=Hwe(Mi,Vi,xi,ho,De,Ve),!kr)continue;let{rect:ls,metrics:Uf,baselineOffset:us}=kr;Qi.push({glyph:Vi,imageName:Mi.imageName,x:bt,y:ft+us+-17,vertical:xi,scale:Mi.scale,fontStack:Mi.fontStack,sectionIndex:Ui,metrics:Uf,rect:ls}),xi?(Ce.verticalizable=!0,bt+=(Mi.imageName?Uf.advance:Ni)*Mi.scale+Fe):bt+=Uf.advance*Mi.scale+Fe}Qi.length!==0&&(ir=Math.max(bt-Fe,ir),Ywe(Qi,0,Qi.length-1,Ci)),bt=0,Ji.lineOffset=Math.max(Kn,(Bi-1)*Ni);let ji=Qe*Bi+Kn;ft+=ji,Jr=Math.max(ji,Jr),++co}let{horizontalAlign:ma,verticalAlign:Yi}=iI(gt);(function(Vr,Bi,Ji,Qi,Kn,ho,ji,va,Mi){let Ui=(Bi-Ji)*Kn,Vi=0;Vi=ho!==ji?-va*Qi- -17:-Qi*Mi*ji+.5*ji;for(let xi of Vr)for(let kr of xi.positionedGlyphs)kr.x+=Ui,kr.y+=Vi})(Ce.positionedLines,Ci,ma,Yi,ir,Jr,Qe,ft,He.length),Ce.top+=-Yi*ft,Ce.bottom=Ce.top+ft,Ce.left+=-ma*ir,Ce.right=Ce.left+ir}(ge,n,s,h,Q,x,S,E,F,C,B,G),!function(Ce){for(let De of Ce)if(De.positionedGlyphs.length!==0)return!1;return!0}(pe)&&ge}let db={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$we={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Gwe={40:!0};function kj(l,n,s,h,p,_){if(n.imageName){let x=h[n.imageName];return x?x.displaySize[0]*n.scale*Ni/_+p:0}{let x=s[n.fontStack],S=x&&x[l];return S?S.metrics.advance*n.scale+p:0}}function Dj(l,n,s,h){let p=Math.pow(l-n,2);return h?l<n?p/2:2*p:p+Math.abs(s)*s}function Wwe(l,n,s){let h=0;return l===10&&(h-=1e4),s&&(h+=150),l!==40&&l!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Lj(l,n,s,h,p,_){let x=null,S=Dj(n,s,p,_);for(let E of h){let C=Dj(n-E.x,s,p,_)+E.badness;C<=S&&(x=E,S=C)}return{index:l,x:n,priorBreak:x,badness:S}}function Fj(l){return l?Fj(l.priorBreak).concat(l.index):[]}function rI(l,n,s,h,p,_){if(!l)return[];let x=[],S=function(F,B,$,G,K,Q){let oe=0;for(let Se=0;Se<F.length();Se++){let pe=F.getSection(Se);oe+=kj(F.getCharCode(Se),pe,G,K,B,Q)}return oe/Math.max(1,Math.ceil(oe/$))}(l,n,s,h,p,_),E=l.text.indexOf("\u200B")>=0,C=0;for(let F=0;F<l.length();F++){let B=l.getSection(F),$=l.getCharCode(F);if(db[$]||(C+=kj($,B,h,p,n,_)),F<l.length()-1){let G=!((R=$)<11904)&&(!!rr["CJK Compatibility Forms"](R)||!!rr["CJK Compatibility"](R)||!!rr["CJK Strokes"](R)||!!rr["CJK Symbols and Punctuation"](R)||!!rr["Enclosed CJK Letters and Months"](R)||!!rr["Halfwidth and Fullwidth Forms"](R)||!!rr["Ideographic Description Characters"](R)||!!rr["Vertical Forms"](R)||Vv.test(String.fromCodePoint(R)));($we[$]||G||B.imageName||F!==l.length()-2&&Gwe[l.getCharCode(F+1)])&&x.push(Lj(F+1,C,S,x,Wwe($,l.getCharCode(F+1),G&&E),!1))}}var R;return Fj(Lj(l.length(),C,S,x,0,!0))}function iI(l){let n=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function Zwe(l,n,s){let h=n.getMaxScale()*Ni,{maxImageWidth:p,maxImageHeight:_}=n.getMaxImageSize(l),x=Math.max(h,_*s);return{verticalLineContentWidth:Math.max(h,p*s),horizontalLineContentHeight:x}}function zj(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Kwe(l,n,s){return!(l===c.ao.horizontal||!n&&!$v(s)||n&&(db[s]||(h=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function Hwe(l,n,s,h,p,_){let x=_[l.fontStack],S=function(C,R,F,B){if(C&&C.rect)return C;let $=R[F.fontStack],G=$&&$[B];return G?{rect:null,metrics:G.metrics}:null}(x&&x[n],p,l,n);if(S===null)return null;let E;if(s)E=h.verticalLineContentWidth-l.scale*Ni;else{let C=zj(l.verticalAlign);E=(h.horizontalLineContentHeight-l.scale*Ni)*C}return{rect:S.rect,metrics:S.metrics,baselineOffset:E}}function Xwe(l,n,s,h,p){let _=p[l.imageName];if(!_)return null;let x=_.paddedRect,S=_.displaySize,E={width:S[0],height:S[1],left:1,top:-3,advance:n?S[1]:S[0]},C;if(n)C=h.verticalLineContentWidth-S[1]*l.scale;else{let R=zj(l.verticalAlign);C=(h.horizontalLineContentHeight-S[1]*l.scale)*R}return{rect:x,metrics:E,baselineOffset:C,imageOffset:(n?S[0]:S[1])*l.scale-Ni*s}}function Ywe(l,n,s,h){if(h===0)return;let p=l[s],_=(l[s].x+p.metrics.advance*p.scale)*h;for(let x=n;x<=s;x++)l[x].x-=_}function Jwe(l,n,s){let{horizontalAlign:h,verticalAlign:p}=iI(s),_=n[0]-l.displaySize[0]*h,x=n[1]-l.displaySize[1]*p;return{image:l,top:x,bottom:x+l.displaySize[1],left:_,right:_+l.displaySize[0]}}function Nj(l){var n,s;let h=l.left,p=l.top,_=l.right-h,x=l.bottom-p,S=(n=l.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",E=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",C=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(E==="proportional"){if(S==="stretchOnly"&&_/x<C||S==="proportional"){let R=Math.ceil(x*C);h*=R/_,_=R}}else if(S==="proportional"&&E==="stretchOnly"&&C!==0&&_/x>C){let R=Math.ceil(_/C);p*=R/x,x=R}return{x1:h,y1:p,x2:h+_,y2:p+x}}function Bj(l,n,s,h,p,_){let x=l.image,S;if(x.content){let Q=x.content,oe=x.pixelRatio||1;S=[Q[0]/oe,Q[1]/oe,x.displaySize[0]-Q[2]/oe,x.displaySize[1]-Q[3]/oe]}let E=n.left*_,C=n.right*_,R,F,B,$;s==="width"||s==="both"?($=p[0]+E-h[3],F=p[0]+C+h[1]):($=p[0]+(E+C-x.displaySize[0])/2,F=$+x.displaySize[0]);let G=n.top*_,K=n.bottom*_;return s==="height"||s==="both"?(R=p[1]+G-h[0],B=p[1]+K+h[2]):(R=p[1]+(G+K-x.displaySize[1])/2,B=R+x.displaySize[1]),{image:x,top:R,right:F,bottom:B,left:$,collisionPadding:S}}let Xl=128,Ju=32640;function jj(l,n){let{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Ar(l+1))};if(s.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:p}=s,_=0;for(;_<h.length&&h[_]<=l;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<l+1;)x++;x=Math.min(h.length-1,x);let S=h[_],E=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:E,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:E,minSize:s.evaluate(new Ar(S)),maxSize:s.evaluate(new Ar(E)),interpolationType:p}}}function nI(l,n,s){let h="never",p=l.get(n);return p?h=p:l.get(s)&&(h="always"),h}let Qwe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fb(l,n,s,h,p,_,x,S,E,C,R,F,B){let $=S?Math.min(Ju,Math.round(S[0])):0,G=S?Math.min(Ju,Math.round(S[1])):0;l.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),_,x,($<<1)+(E?1:0),G,16*C,16*R,256*F,256*B)}function aI(l,n,s){l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s),l.emplaceBack(n.x,n.y,s)}function eSe(l){for(let n of l.sections)if(Qx(n.text))return!0;return!1}class oI{constructor(n){this.layoutVertexArray=new Xe,this.indexArray=new _r,this.programConfigurations=n,this.segments=new Bt,this.dynamicLayoutVertexArray=new je,this.opacityVertexArray=new dt,this.hasVisibleVertices=!1,this.placedSymbolArray=new Z}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qwe.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Iwe.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Qwe,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}st("SymbolBuffers",oI);class sI{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Bt,this.collisionVertexArray=new hr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Pwe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}st("CollisionBuffers",sI);class Nf{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.globalState=n.globalState,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=jj(this.zoom,s["text-size"]),this.iconSizeData=jj(this.zoom,s["icon-size"]);let h=this.layers[0].layout,p=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=nI(h,"text-overlap","text-allow-overlap")!=="never"||nI(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>c.ao[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new oI(new fa(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new oI(new fa(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ie,this.lineVertexArray=new se,this.symbolInstances=new ee,this.textAnchorOffsets=new ce}calculateGlyphDependencies(n,s,h,p,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||p)&&_){let S=cg[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){let p=this.layers[0],_=p.layout,x=_.get("text-font"),S=_.get("text-field"),E=_.get("icon-image"),C=(S.value.kind!=="constant"||S.value.value instanceof bn&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),R=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,F=_.get("symbol-sort-key");if(this.features=[],!C&&!R)return;let B=s.iconDependencies,$=s.glyphDependencies,G=s.availableImages,K=new Ar(this.zoom,{globalState:this.globalState});for(let{feature:Q,id:oe,index:Se,sourceLayerIndex:pe}of n){let ge=p._featureFilter.needGeometry,Ce=ss(Q,ge);if(!p._featureFilter.filter(K,Ce,h))continue;let De,Ve;if(ge||(Ce.geometry=Hs(Q)),C){let He=p.getValueAndResolveTokens("text-field",Ce,h,G),Qe=bn.factory(He),gt=this.hasRTLText=this.hasRTLText||eSe(Qe);(!gt||ao.getRTLTextPluginStatus()==="unavailable"||gt&&ao.isParsed())&&(De=Mwe(Qe,p,Ce))}if(R){let He=p.getValueAndResolveTokens("icon-image",Ce,h,G);Ve=He instanceof ha?He:ha.fromString(He)}if(!De&&!Ve)continue;let tt=this.sortFeaturesByKey?F.evaluate(Ce,{},h):void 0;if(this.features.push({id:oe,text:De,icon:Ve,index:Se,sourceLayerIndex:pe,geometry:Ce.geometry,properties:Q.properties,type:Lf.types[Q.type],sortKey:tt}),Ve&&(B[Ve.name]=!0),De){let He=x.evaluate(Ce,{},h).join(","),Qe=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(let gt of De.sections)if(gt.image)B[gt.image.name]=!0;else{let Je=wf(De.toString()),et=gt.fontStack||He,Fe=$[et]=$[et]||{};this.calculateGlyphDependencies(gt.text,Fe,Qe,this.allowVerticalPlacement,Je)}}}_.get("symbol-placement")==="line"&&(this.features=function(Q){let oe={},Se={},pe=[],ge=0;function Ce(He){pe.push(Q[He]),ge++}function De(He,Qe,gt){let Je=Se[He];return delete Se[He],Se[Qe]=Je,pe[Je].geometry[0].pop(),pe[Je].geometry[0]=pe[Je].geometry[0].concat(gt[0]),Je}function Ve(He,Qe,gt){let Je=oe[Qe];return delete oe[Qe],oe[He]=Je,pe[Je].geometry[0].shift(),pe[Je].geometry[0]=gt[0].concat(pe[Je].geometry[0]),Je}function tt(He,Qe,gt){let Je=gt?Qe[0][Qe[0].length-1]:Qe[0][0];return`${He}:${Je.x}:${Je.y}`}for(let He=0;He<Q.length;He++){let Qe=Q[He],gt=Qe.geometry,Je=Qe.text?Qe.text.toString():null;if(!Je){Ce(He);continue}let et=tt(Je,gt),Fe=tt(Je,gt,!0);if(et in Se&&Fe in oe&&Se[et]!==oe[Fe]){let qt=Ve(et,Fe,gt),Mt=De(et,Fe,pe[qt].geometry);delete oe[et],delete Se[Fe],Se[tt(Je,pe[Mt].geometry,!0)]=Mt,pe[qt].geometry=null}else et in Se?De(et,Fe,gt):Fe in oe?Ve(et,Fe,gt):(Ce(He),oe[et]=ge-1,Se[Fe]=ge-1)}return pe.filter(He=>He.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Q,oe)=>Q.sortKey-oe.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,{imagePositions:h,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,{imagePositions:h,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){let h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]),x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:p},S<s.length-1&&(p+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){let E=x[S];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,_,x,S,E,C,R,F,B){let $=n.indexArray,G=n.layoutVertexArray,K=n.segments.prepareSegment(4*s.length,G,$,this.canOverlap?x.sortKey:void 0),Q=this.glyphOffsetArray.length,oe=K.vertexLength,Se=this.allowVerticalPlacement&&S===c.ao.vertical?Math.PI/2:0,pe=x.text&&x.text.sections;for(let ge=0;ge<s.length;ge++){let{tl:Ce,tr:De,bl:Ve,br:tt,tex:He,pixelOffsetTL:Qe,pixelOffsetBR:gt,minFontScaleX:Je,minFontScaleY:et,glyphOffset:Fe,isSDF:qt,sectionIndex:Mt}=s[ge],bt=K.vertexLength,ft=Fe[1];fb(G,E.x,E.y,Ce.x,ft+Ce.y,He.x,He.y,h,qt,Qe.x,Qe.y,Je,et),fb(G,E.x,E.y,De.x,ft+De.y,He.x+He.w,He.y,h,qt,gt.x,Qe.y,Je,et),fb(G,E.x,E.y,Ve.x,ft+Ve.y,He.x,He.y+He.h,h,qt,Qe.x,gt.y,Je,et),fb(G,E.x,E.y,tt.x,ft+tt.y,He.x+He.w,He.y+He.h,h,qt,gt.x,gt.y,Je,et),aI(n.dynamicLayoutVertexArray,E,Se),$.emplaceBack(bt,bt+2,bt+1),$.emplaceBack(bt+1,bt+2,bt+3),K.vertexLength+=4,K.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Fe[0]),ge!==s.length-1&&Mt===s[ge+1].sectionIndex||n.programConfigurations.populatePaintArrays(G.length,x,x.index,{imagePositions:{},canonical:B,formattedSection:pe&&pe[Mt],globalState:this.globalState})}n.placedSymbolArray.emplaceBack(E.x,E.y,Q,this.glyphOffsetArray.length-Q,oe,C,R,E.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],S,0,!1,0,F)}_addCollisionDebugVertex(n,s,h,p,_,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,p,_,x,S){let E=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),C=E.vertexLength,R=_.layoutVertexArray,F=_.collisionVertexArray,B=S.anchorX,$=S.anchorY;this._addCollisionDebugVertex(R,F,x,B,$,new v(n,s)),this._addCollisionDebugVertex(R,F,x,B,$,new v(h,s)),this._addCollisionDebugVertex(R,F,x,B,$,new v(h,p)),this._addCollisionDebugVertex(R,F,x,B,$,new v(n,p)),E.vertexLength+=4;let G=_.indexArray;G.emplaceBack(C,C+1),G.emplaceBack(C+1,C+2),G.emplaceBack(C+2,C+3),G.emplaceBack(C+3,C),E.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let _=n;_<s;_++){let x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sI(Ut,Ij.members,vr),this.iconCollisionBox=new sI(Ut,Ij.members,vr);for(let n=0;n<this.symbolInstances.length;n++){let s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,_,x,S,E,C){let R={};for(let F=s;F<h;F++){let B=n.get(F);R.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},R.textFeatureIndex=B.featureIndex;break}for(let F=p;F<_;F++){let B=n.get(F);R.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},R.verticalTextFeatureIndex=B.featureIndex;break}for(let F=x;F<S;F++){let B=n.get(F);R.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},R.iconFeatureIndex=B.featureIndex;break}for(let F=E;F<C;F++){let B=n.get(F);R.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},R.verticalIconFeatureIndex=B.featureIndex;break}return R}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){let h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){let h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<p;_+=4)n.indexArray.emplaceBack(_,_+2,_+1),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let s=Math.sin(n),h=Math.cos(n),p=[],_=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);let E=this.symbolInstances.get(S);p.push(0|Math.round(s*E.anchorX+h*E.anchorY)),_.push(E.featureIndex)}return x.sort((S,E)=>p[S]-p[E]||_[E]-_[S]),x}addToSortKeyRanges(n,s){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let s of this.symbolInstanceIndexes){let h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,_,x)=>{p>=0&&x.indexOf(p)===_&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Uj,Vj;st("SymbolBucket",Nf,{omit:["layers","collisionBoxArray","features","compareText"]}),Nf.MAX_GLYPHS=65535,Nf.addDynamicAttributes=aI;var lI={get paint(){return Vj=Vj||new Tn({"icon-opacity":new Tt(Ee.paint_symbol["icon-opacity"]),"icon-color":new Tt(Ee.paint_symbol["icon-color"]),"icon-halo-color":new Tt(Ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tt(Ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tt(Ee.paint_symbol["icon-halo-blur"]),"icon-translate":new mt(Ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new mt(Ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tt(Ee.paint_symbol["text-opacity"]),"text-color":new Tt(Ee.paint_symbol["text-color"],{runtimeType:Hi,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Tt(Ee.paint_symbol["text-halo-color"]),"text-halo-width":new Tt(Ee.paint_symbol["text-halo-width"]),"text-halo-blur":new Tt(Ee.paint_symbol["text-halo-blur"]),"text-translate":new mt(Ee.paint_symbol["text-translate"]),"text-translate-anchor":new mt(Ee.paint_symbol["text-translate-anchor"])})},get layout(){return Uj=Uj||new Tn({"symbol-placement":new mt(Ee.layout_symbol["symbol-placement"]),"symbol-spacing":new mt(Ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mt(Ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tt(Ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mt(Ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mt(Ee.layout_symbol["icon-allow-overlap"]),"icon-overlap":new mt(Ee.layout_symbol["icon-overlap"]),"icon-ignore-placement":new mt(Ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new mt(Ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mt(Ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tt(Ee.layout_symbol["icon-size"]),"icon-text-fit":new mt(Ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mt(Ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tt(Ee.layout_symbol["icon-image"]),"icon-rotate":new Tt(Ee.layout_symbol["icon-rotate"]),"icon-padding":new Tt(Ee.layout_symbol["icon-padding"]),"icon-keep-upright":new mt(Ee.layout_symbol["icon-keep-upright"]),"icon-offset":new Tt(Ee.layout_symbol["icon-offset"]),"icon-anchor":new Tt(Ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mt(Ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mt(Ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mt(Ee.layout_symbol["text-rotation-alignment"]),"text-field":new Tt(Ee.layout_symbol["text-field"]),"text-font":new Tt(Ee.layout_symbol["text-font"]),"text-size":new Tt(Ee.layout_symbol["text-size"]),"text-max-width":new Tt(Ee.layout_symbol["text-max-width"]),"text-line-height":new mt(Ee.layout_symbol["text-line-height"]),"text-letter-spacing":new Tt(Ee.layout_symbol["text-letter-spacing"]),"text-justify":new Tt(Ee.layout_symbol["text-justify"]),"text-radial-offset":new Tt(Ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mt(Ee.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Tt(Ee.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Tt(Ee.layout_symbol["text-anchor"]),"text-max-angle":new mt(Ee.layout_symbol["text-max-angle"]),"text-writing-mode":new mt(Ee.layout_symbol["text-writing-mode"]),"text-rotate":new Tt(Ee.layout_symbol["text-rotate"]),"text-padding":new mt(Ee.layout_symbol["text-padding"]),"text-keep-upright":new mt(Ee.layout_symbol["text-keep-upright"]),"text-transform":new Tt(Ee.layout_symbol["text-transform"]),"text-offset":new Tt(Ee.layout_symbol["text-offset"]),"text-allow-overlap":new mt(Ee.layout_symbol["text-allow-overlap"]),"text-overlap":new mt(Ee.layout_symbol["text-overlap"]),"text-ignore-placement":new mt(Ee.layout_symbol["text-ignore-placement"]),"text-optional":new mt(Ee.layout_symbol["text-optional"])})}};class $j{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Au,this.defaultValue=n}evaluate(n){if(n.formattedSection){let s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}st("FormatSectionOverride",$j,{omit:["defaultValue"]});class pb extends Ca{constructor(n){super(n,lI)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let p=[];for(let _ of h)p.indexOf(_)<0&&p.push(_);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){let _=this.layout.get(n).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||pf(x.value)||!_?_:function(S,E){return E.replace(/{([^{}]+)}/g,(C,R)=>S&&R in S?String(S[R]):"")}(s.properties,_)}createBucket(n){return new Nf(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let n of lI.paint.overridableProperties){if(!pb.hasPaintOverride(this.layout,n))continue;let s=this.paint.get(n),h=new $j(s),p=new Mv(h,s.property.specification),_=null;_=s.value.kind==="constant"||s.value.kind==="source"?new Ah("source",p):new Rv("composite",p,s.value.zoomStops),this.paint._values[n]=new Po(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&pb.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){let h=n.get("text-field"),p=lI.paint.properties[s],_=!1,x=S=>{for(let E of S)if(p.overrides&&p.overrides.hasOverride(E))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof bn)x(h.value.value.sections);else if(h.value.kind==="source"||h.value.kind==="composite"){let S=C=>{_||(C instanceof is&&At(C.value)===zs?x(C.value.sections):C instanceof Ll?x(C.sections):C.eachChild(S))},E=h.value;E._styleExpression&&S(E._styleExpression.expression)}return _}}let Gj;var tSe={get paint(){return Gj=Gj||new Tn({"background-color":new mt(Ee.paint_background["background-color"]),"background-pattern":new $s(Ee.paint_background["background-pattern"]),"background-opacity":new mt(Ee.paint_background["background-opacity"])})}};class rSe extends Ca{constructor(n){super(n,tSe)}}let Wj;var iSe={get paint(){return Wj=Wj||new Tn({"raster-opacity":new mt(Ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new mt(Ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mt(Ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mt(Ee.paint_raster["raster-brightness-max"]),"raster-saturation":new mt(Ee.paint_raster["raster-saturation"]),"raster-contrast":new mt(Ee.paint_raster["raster-contrast"]),"raster-resampling":new mt(Ee.paint_raster["raster-resampling"]),"raster-fade-duration":new mt(Ee.paint_raster["raster-fade-duration"])})}};class nSe extends Ca{constructor(n){super(n,iSe)}}class aSe extends Ca{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class oSe{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let sSe={once:!0},uI=6371008.8;class Qu{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Qu(qa(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){let s=Math.PI/180,h=this.lat*s,p=n.lat*s,_=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return uI*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof Qu)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Qu(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Qu(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let Zj=2*Math.PI*uI;function Kj(l){return Zj*Math.cos(l*Math.PI/180)}function Hj(l){return(180+l)/360}function Xj(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Yj(l,n){return l/Kj(n)}function cI(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function Jj(l,n){return l*Kj(cI(n))}class dg{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){let h=Qu.convert(n);return new dg(Hj(h.lng),Xj(h.lat),Yj(s,h.lat))}toLngLat(){return new Qu(360*this.x-180,cI(this.y))}toAltitude(){return Jj(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Zj*(n=cI(this.y),1/Math.cos(n*Math.PI/180));var n}}function Qj(l,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[l*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class hI{constructor(n,s,h){if(!function(p,_,x){return!(p<0||p>25||x<0||x>=Math.pow(2,p)||_<0||_>=Math.pow(2,p))}(n,s,h))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Bf(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){let p=(x=this.y,S=this.z,E=Qj(256*(_=this.x),256*(x=Math.pow(2,S)-x-1),S),C=Qj(256*(_+1),256*(x+1),S),E[0]+","+E[1]+","+C[0]+","+C[1]);var _,x,S,E,C;let R=function(F,B,$){let G,K="";for(let Q=F;Q>0;Q--)G=1<<Q-1,K+=(B&G?1:0)+($&G?2:0);return K}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){let s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){let s=Math.pow(2,this.z);return new v((n.x*s-this.x)*Dt,(n.y*s-this.y)*Dt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class eU{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Bf(n,s.z,s.z,s.x,s.y)}}class uo{constructor(n,s,h,p,_){if(this.terrainRttPosMatrix32f=null,n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new hI(h,+p,+_),this.key=Bf(s,n,h,p,_)}clone(){return new uo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let s=this.canonical.z-n;return n>this.canonical.z?new uo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new uo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-n;return n>this.canonical.z?Bf(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Bf(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;let s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new uo(s,this.wrap,s,h,p),new uo(s,this.wrap,s,h+1,p),new uo(s,this.wrap,s,h,p+1),new uo(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new uo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new eU(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new dg(n.x-this.wrap,n.y))}}function Bf(l,n,s,h,p){(l*=2)<0&&(l=-1*l-1);let _=1<<s;return(_*_*l+_*p+h).toString(36)+s.toString(36)+n.toString(36)}function fg(l,n){return n?l.properties[n]:l.id}st("CanonicalTileID",hI),st("OverscaledTileID",uo,{omit:["terrainRttPosMatrix32f"]});class Nh{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(n){return this.minX=Math.min(this.minX,n.x),this.minY=Math.min(this.minY,n.y),this.maxX=Math.max(this.maxX,n.x),this.maxY=Math.max(this.maxY,n.y),this}expandBy(n){return this.minX-=n,this.minY-=n,this.maxX+=n,this.maxY+=n,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(n){return this.expandBy(-n)}map(n){let s=new Nh;return s.extend(n(new v(this.minX,this.minY))),s.extend(n(new v(this.maxX,this.minY))),s.extend(n(new v(this.minX,this.maxY))),s.extend(n(new v(this.maxX,this.maxY))),s}static fromPoints(n){let s=new Nh;for(let h of n)s.extend(h);return s}contains(n){return n.x>=this.minX&&n.x<=this.maxX&&n.y>=this.minY&&n.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(n){return!this.empty()&&!n.empty()&&n.minX>=this.minX&&n.maxX<=this.maxX&&n.minY>=this.minY&&n.maxY<=this.maxY}intersects(n){return!this.empty()&&!n.empty()&&n.minX<=this.maxX&&n.maxX>=this.minX&&n.minY<=this.maxY&&n.maxY>=this.minY}}class tU{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){let h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class rU{constructor(n,s,h,p,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){let n={geometry:this.geometry};for(let s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class iU{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Oh(Dt,16,0),this.grid3D=new Oh(Dt,16,0),this.featureIndexArray=new ye,this.promoteId=s}insert(n,s,h,p,_,x){let S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,_);let E=x?this.grid3D:this.grid;for(let C=0;C<s.length;C++){let R=s[C],F=[1/0,1/0,-1/0,-1/0];for(let B=0;B<R.length;B++){let $=R[B];F[0]=Math.min(F[0],$.x),F[1]=Math.min(F[1],$.y),F[2]=Math.max(F[2],$.x),F[3]=Math.max(F[3],$.y)}F[0]<Dt&&F[1]<Dt&&F[2]>=0&&F[3]>=0&&E.insert(S,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new _j(new eI(this.rawTileData)).layers,this.sourceLayerCoder=new tU(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();let _=n.params,x=Dt/n.tileSize/n.scale,S=Ul(_.filter),E=n.queryGeometry,C=n.queryPadding*x,R=Nh.fromPoints(E),F=this.grid.query(R.minX-C,R.minY-C,R.maxX+C,R.maxY+C),B=Nh.fromPoints(n.cameraQueryGeometry).expandBy(C),$=this.grid3D.query(B.minX,B.minY,B.maxX,B.maxY,(Q,oe,Se,pe)=>function(ge,Ce,De,Ve,tt){for(let Qe of ge)if(Ce<=Qe.x&&De<=Qe.y&&Ve>=Qe.x&&tt>=Qe.y)return!0;let He=[new v(Ce,De),new v(Ce,tt),new v(Ve,tt),new v(Ve,De)];if(ge.length>2){for(let Qe of He)if(Rf(ge,Qe))return!0}for(let Qe=0;Qe<ge.length-1;Qe++)if(N1e(ge[Qe],ge[Qe+1],He))return!0;return!1}(n.cameraQueryGeometry,Q-C,oe-C,Se+C,pe+C));for(let Q of $)F.push(Q);F.sort(lSe);let G={},K;for(let Q=0;Q<F.length;Q++){let oe=F[Q];if(oe===K)continue;K=oe;let Se=this.featureIndexArray.get(oe),pe=null;this.loadMatchingFeature(G,Se.bucketIndex,Se.sourceLayerIndex,Se.featureIndex,S,_.layers,_.availableImages,s,h,p,(ge,Ce,De)=>(pe||(pe=Hs(ge)),Ce.queryIntersectsFeature({queryGeometry:E,feature:ge,featureState:De,geometry:pe,zoom:this.z,transform:n.transform,pixelsToTileUnits:x,pixelPosMatrix:n.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:n.getElevation})))}return G}loadMatchingFeature(n,s,h,p,_,x,S,E,C,R,F){let B=this.bucketLayerIDs[s];if(x&&!B.some(Q=>x.has(Q)))return;let $=this.sourceLayerCoder.decode(h),G=this.vtLayers[$].feature(p);if(_.needGeometry){let Q=ss(G,!0);if(!_.filter(new Ar(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!_.filter(new Ar(this.tileID.overscaledZ),G))return;let K=this.getId(G,$);for(let Q=0;Q<B.length;Q++){let oe=B[Q];if(x&&!x.has(oe))continue;let Se=E[oe];if(!Se)continue;let pe={};K&&R&&(pe=R.getState(Se.sourceLayer||"_geojsonTileLayer",K));let ge=Un({},C[oe]);ge.paint=nU(ge.paint,Se.paint,G,pe,S),ge.layout=nU(ge.layout,Se.layout,G,pe,S);let Ce=!F||F(G,Se,pe);if(!Ce)continue;let De=new rU(G,this.z,this.x,this.y,K);De.layer=ge;let Ve=n[oe];Ve===void 0&&(Ve=n[oe]=[]),Ve.push({featureIndex:p,feature:De,intersectionZ:Ce})}}lookupSymbolFeatures(n,s,h,p,_,x,S,E){let C={};this.loadVTLayers();let R=Ul(_);for(let F of n)this.loadMatchingFeature(C,h,p,F,R,x,S,E,s);return C}hasLayer(n){for(let s of this.bucketLayerIDs)for(let h of s)if(n===h)return!0;return!1}getId(n,s){var h;let p=n.id;return this.promoteId&&(p=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&!((h=n.properties)===null||h===void 0)&&h.cluster&&this.promoteId&&(p=Number(n.properties.cluster_id))),p}}function nU(l,n,s,h,p){return ks(l,(_,x)=>{let S=n instanceof Tf?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,p):S})}function lSe(l,n){return n-l}function aU(l,n,s,h,p){let _=[];for(let x=0;x<l.length;x++){let S=l[x],E;for(let C=0;C<S.length-1;C++){let R=S[C],F=S[C+1];R.x<n&&F.x<n||(R.x<n?R=new v(n,R.y+(n-R.x)/(F.x-R.x)*(F.y-R.y))._round():F.x<n&&(F=new v(n,R.y+(n-R.x)/(F.x-R.x)*(F.y-R.y))._round()),R.y<s&&F.y<s||(R.y<s?R=new v(R.x+(s-R.y)/(F.y-R.y)*(F.x-R.x),s)._round():F.y<s&&(F=new v(R.x+(s-R.y)/(F.y-R.y)*(F.x-R.x),s)._round()),R.x>=h&&F.x>=h||(R.x>=h?R=new v(h,R.y+(h-R.x)/(F.x-R.x)*(F.y-R.y))._round():F.x>=h&&(F=new v(h,R.y+(h-R.x)/(F.x-R.x)*(F.y-R.y))._round()),R.y>=p&&F.y>=p||(R.y>=p?R=new v(R.x+(p-R.y)/(F.y-R.y)*(F.x-R.x),p)._round():F.y>=p&&(F=new v(R.x+(p-R.y)/(F.y-R.y)*(F.x-R.x),p)._round()),E&&R.equals(E[E.length-1])||(E=[R],_.push(E)),E.push(F)))))}}return _}st("FeatureIndex",iU,{omit:["rawTileData","sourceLayerCoder"]});class ec extends v{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new ec(this.x,this.y,this.angle,this.segment)}}function oU(l,n,s,h,p){if(n.segment===void 0||s===0)return!0;let _=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=l[x].dist(_),_=l[x]}S+=l[x].dist(l[x+1]),x++;let E=[],C=0;for(;S<s/2;){let R=l[x],F=l[x+1];if(!F)return!1;let B=l[x-1].angleTo(R)-R.angleTo(F);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:S,angleDelta:B}),C+=B;S-E[0].distance>h;)C-=E.shift().angleDelta;if(C>p)return!1;x++,S+=R.dist(F)}return!0}function sU(l){let n=0;for(let s=0;s<l.length-1;s++)n+=l[s].dist(l[s+1]);return n}function lU(l,n,s){return l?.6*n*s:0}function uU(l,n){return Math.max(l?l.right-l.left:0,n?n.right-n.left:0)}function uSe(l,n,s,h,p,_){let x=lU(s,p,_),S=uU(s,h)*_,E=0,C=sU(l)/2;for(let R=0;R<l.length-1;R++){let F=l[R],B=l[R+1],$=F.dist(B);if(E+$>C){let G=(C-E)/$,K=qo.number(F.x,B.x,G),Q=qo.number(F.y,B.y,G),oe=new ec(K,Q,B.angleTo(F),R);return oe._round(),!x||oU(l,oe,S,x,n)?oe:void 0}E+=$}}function cSe(l,n,s,h,p,_,x,S,E){let C=lU(h,_,x),R=uU(h,p),F=R*x,B=l[0].x===0||l[0].x===E||l[0].y===0||l[0].y===E;return n-F<n/4&&(n=F+n/4),cU(l,B?n/2*S%n:(R/2+2*_)*x*S%n,n,C,s,F,B,!1,E)}function cU(l,n,s,h,p,_,x,S,E){let C=_/2,R=sU(l),F=0,B=n-s,$=[];for(let G=0;G<l.length-1;G++){let K=l[G],Q=l[G+1],oe=K.dist(Q),Se=Q.angleTo(K);for(;B+s<F+oe;){B+=s;let pe=(B-F)/oe,ge=qo.number(K.x,Q.x,pe),Ce=qo.number(K.y,Q.y,pe);if(ge>=0&&ge<E&&Ce>=0&&Ce<E&&B-C>=0&&B+C<=R){let De=new ec(ge,Ce,Se,G);De._round(),h&&!oU(l,De,_,h,p)||$.push(De)}}F+=oe}return S||$.length||x||($=cU(l,F/2,s,h,p,_,x,!0,E)),$}function hU(l,n,s,h){let p=[],_=l.image,x=_.pixelRatio,S=_.paddedRect.w-2,E=_.paddedRect.h-2,C={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom},R=_.stretchX||[[0,S]],F=_.stretchY||[[0,E]],B=(Fe,qt)=>Fe+qt[1]-qt[0],$=R.reduce(B,0),G=F.reduce(B,0),K=S-$,Q=E-G,oe=0,Se=$,pe=0,ge=G,Ce=0,De=K,Ve=0,tt=Q;if(_.content&&h){let Fe=_.content,qt=Fe[2]-Fe[0],Mt=Fe[3]-Fe[1];(_.textFitWidth||_.textFitHeight)&&(C=Nj(l)),oe=mb(R,0,Fe[0]),pe=mb(F,0,Fe[1]),Se=mb(R,Fe[0],Fe[2]),ge=mb(F,Fe[1],Fe[3]),Ce=Fe[0]-oe,Ve=Fe[1]-pe,De=qt-Se,tt=Mt-ge}let He=C.x1,Qe=C.y1,gt=C.x2-He,Je=C.y2-Qe,et=(Fe,qt,Mt,bt)=>{let ft=vb(Fe.stretch-oe,Se,gt,He),ir=gb(Fe.fixed-Ce,De,Fe.stretch,$),Jr=vb(qt.stretch-pe,ge,Je,Qe),Ci=gb(qt.fixed-Ve,tt,qt.stretch,G),fn=vb(Mt.stretch-oe,Se,gt,He),co=gb(Mt.fixed-Ce,De,Mt.stretch,$),ma=vb(bt.stretch-pe,ge,Je,Qe),Yi=gb(bt.fixed-Ve,tt,bt.stretch,G),Vr=new v(ft,Jr),Bi=new v(fn,Jr),Ji=new v(fn,ma),Qi=new v(ft,ma),Kn=new v(ir/x,Ci/x),ho=new v(co/x,Yi/x),ji=n*Math.PI/180;if(ji){let Ui=Math.sin(ji),Vi=Math.cos(ji),xi=[Vi,-Ui,Ui,Vi];Vr._matMult(xi),Bi._matMult(xi),Qi._matMult(xi),Ji._matMult(xi)}let va=Fe.stretch+Fe.fixed,Mi=qt.stretch+qt.fixed;return{tl:Vr,tr:Bi,bl:Qi,br:Ji,tex:{x:_.paddedRect.x+1+va,y:_.paddedRect.y+1+Mi,w:Mt.stretch+Mt.fixed-va,h:bt.stretch+bt.fixed-Mi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kn,pixelOffsetBR:ho,minFontScaleX:De/x/gt,minFontScaleY:tt/x/Je,isSDF:s}};if(h&&(_.stretchX||_.stretchY)){let Fe=dU(R,K,$),qt=dU(F,Q,G);for(let Mt=0;Mt<Fe.length-1;Mt++){let bt=Fe[Mt],ft=Fe[Mt+1];for(let ir=0;ir<qt.length-1;ir++)p.push(et(bt,qt[ir],ft,qt[ir+1]))}}else p.push(et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:E+1}));return p}function mb(l,n,s){let h=0;for(let p of l)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function dU(l,n,s){let h=[{fixed:-1,stretch:0}];for(let[p,_]of l){let x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(_-p)})}return h.push({fixed:n+1,stretch:s}),h}function vb(l,n,s,h){return l/n*s+h}function gb(l,n,s,h){return l-n*s/h}st("Anchor",ec);class yb{constructor(n,s,h,p,_,x,S,E,C,R){var F;if(this.boxStartIndex=n.length,C){let B=x.top,$=x.bottom,G=x.collisionPadding;G&&(B-=G[1],$+=G[3]);let K=$-B;K>0&&(K=Math.max(10,K),this.circleDiameter=K)}else{let B=!((F=x.image)===null||F===void 0)&&F.content&&(x.image.textFitWidth||x.image.textFitHeight)?Nj(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};B.y1=B.y1*S-E[0],B.y2=B.y2*S+E[2],B.x1=B.x1*S-E[3],B.x2=B.x2*S+E[1];let $=x.collisionPadding;if($&&(B.x1-=$[0]*S,B.y1-=$[1]*S,B.x2+=$[2]*S,B.y2+=$[3]*S),R){let G=new v(B.x1,B.y1),K=new v(B.x2,B.y1),Q=new v(B.x1,B.y2),oe=new v(B.x2,B.y2),Se=R*Math.PI/180;G._rotate(Se),K._rotate(Se),Q._rotate(Se),oe._rotate(Se),B.x1=Math.min(G.x,K.x,Q.x,oe.x),B.x2=Math.max(G.x,K.x,Q.x,oe.x),B.y1=Math.min(G.y,K.y,Q.y,oe.y),B.y2=Math.max(G.y,K.y,Q.y,oe.y)}n.emplaceBack(s.x,s.y,B.x1,B.y1,B.x2,B.y2,h,p,_)}this.boxEndIndex=n.length}}class hSe{constructor(n=[],s=(h,p)=>h<p?-1:h>p?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;let n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){let{data:s,compare:h}=this,p=s[n];for(;n>0;){let _=n-1>>1,x=s[_];if(h(p,x)>=0)break;s[n]=x,n=_}s[n]=p}_down(n){let{data:s,compare:h}=this,p=this.length>>1,_=s[n];for(;n<p;){let x=1+(n<<1),S=x+1;if(S<this.length&&h(s[S],s[x])<0&&(x=S),h(s[x],_)>=0)break;s[n]=s[x],n=x}s[n]=_}}function dSe(l,n=1,s=!1){let h=Nh.fromPoints(l[0]),p=Math.min(h.width(),h.height()),_=p/2,x=new hSe([],fSe),{minX:S,minY:E,maxX:C,maxY:R}=h;if(p===0)return new v(S,E);for(let $=S;$<C;$+=p)for(let G=E;G<R;G+=p)x.push(new jf($+_,G+_,_,l));let F=function($){let G=0,K=0,Q=0,oe=$[0];for(let Se=0,pe=oe.length,ge=pe-1;Se<pe;ge=Se++){let Ce=oe[Se],De=oe[ge],Ve=Ce.x*De.y-De.x*Ce.y;K+=(Ce.x+De.x)*Ve,Q+=(Ce.y+De.y)*Ve,G+=3*Ve}return new jf(K/G,Q/G,0,$)}(l),B=x.length;for(;x.length;){let $=x.pop();($.d>F.d||!F.d)&&(F=$,s&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,B)),$.max-F.d<=n||(_=$.h/2,x.push(new jf($.p.x-_,$.p.y-_,_,l)),x.push(new jf($.p.x+_,$.p.y-_,_,l)),x.push(new jf($.p.x-_,$.p.y+_,_,l)),x.push(new jf($.p.x+_,$.p.y+_,_,l)),B+=4)}return s&&(console.log(`num probes: ${B}`),console.log(`best distance: ${F.d}`)),F.p}function fSe(l,n){return n.max-l.max}function jf(l,n,s,h){this.p=new v(l,n),this.h=s,this.d=function(p,_){let x=!1,S=1/0;for(let E=0;E<_.length;E++){let C=_[E];for(let R=0,F=C.length,B=F-1;R<F;B=R++){let $=C[R],G=C[B];$.y>p.y!=G.y>p.y&&p.x<(G.x-$.x)*(p.y-$.y)/(G.y-$.y)+$.x&&(x=!x),S=Math.min(S,X3(p,$,G))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var dn;c.aE=void 0,(dn=c.aE||(c.aE={}))[dn.center=1]="center",dn[dn.left=2]="left",dn[dn.right=3]="right",dn[dn.top=4]="top",dn[dn.bottom=5]="bottom",dn[dn["top-left"]=6]="top-left",dn[dn["top-right"]=7]="top-right",dn[dn["bottom-left"]=8]="bottom-left",dn[dn["bottom-right"]=9]="bottom-right";let dI=Number.POSITIVE_INFINITY;function fU(l,n){return n[1]!==dI?function(s,h,p){let _=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(s){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(l,n[0],n[1]):function(s,h){let p=0,_=0;h<0&&(h=0);let x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-7;break;case"bottom-right":case"bottom-left":_=7-x;break;case"bottom":_=7-h;break;case"top":_=h-7}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,_]}(l,n[0])}function pU(l,n,s){var h;let p=l.layout,_=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(_){let S=_.values,E=[];for(let C=0;C<S.length;C+=2){let R=E[C]=S[C],F=S[C+1].map(B=>B*Ni);R.startsWith("top")?F[1]-=7:R.startsWith("bottom")&&(F[1]+=7),E[C+1]=F}return new Sn(E)}let x=p.get("text-variable-anchor");if(x){let S;S=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},s)*Ni,dI]:p.get("text-offset").evaluate(n,{},s).map(C=>C*Ni);let E=[];for(let C of x)E.push(C,fU(C,S));return new Sn(E)}return null}function fI(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function pSe(l,n,s,h,p,_,x,S,E,C,R,F){let B=_.textMaxSize.evaluate(n,{});B===void 0&&(B=x);let $=l.layers[0].layout,G=$.get("icon-offset").evaluate(n,{},R),K=vU(s.horizontal),Q=x/24,oe=l.tilePixelRatio*Q,Se=l.tilePixelRatio*B/24,pe=l.tilePixelRatio*S,ge=l.tilePixelRatio*$.get("symbol-spacing"),Ce=$.get("text-padding")*l.tilePixelRatio,De=function(Mt,bt,ft,ir=1){let Jr=Mt.get("icon-padding").evaluate(bt,{},ft),Ci=Jr&&Jr.values;return[Ci[0]*ir,Ci[1]*ir,Ci[2]*ir,Ci[3]*ir]}($,n,R,l.tilePixelRatio),Ve=$.get("text-max-angle")/180*Math.PI,tt=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",He=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",Qe=$.get("symbol-placement"),gt=ge/2,Je=$.get("icon-text-fit"),et;h&&Je!=="none"&&(l.allowVerticalPlacement&&s.vertical&&(et=Bj(h,s.vertical,Je,$.get("icon-text-fit-padding"),G,Q)),K&&(h=Bj(h,K,Je,$.get("icon-text-fit-padding"),G,Q)));let Fe=R?F.line.getGranularityForZoomLevel(R.z):1,qt=(Mt,bt)=>{bt.x<0||bt.x>=Dt||bt.y<0||bt.y>=Dt||function(ft,ir,Jr,Ci,fn,co,ma,Yi,Vr,Bi,Ji,Qi,Kn,ho,ji,va,Mi,Ui,Vi,xi,kr,ls,Uf,us,gSe){let Vf=ft.addToLineVertexArray(ir,Jr),Bh,$f,Gf,Wf,xU=0,bU=0,wU=0,SU=0,bI=-1,wI=-1,Yl={},TU=Hu("");if(ft.allowVerticalPlacement&&Ci.vertical){let qn=Yi.layout.get("text-rotate").evaluate(kr,{},us)+90;Gf=new yb(Vr,ir,Bi,Ji,Qi,Ci.vertical,Kn,ho,ji,qn),ma&&(Wf=new yb(Vr,ir,Bi,Ji,Qi,ma,Mi,Ui,ji,qn))}if(fn){let qn=Yi.layout.get("icon-rotate").evaluate(kr,{}),fo=Yi.layout.get("icon-text-fit")!=="none",jh=hU(fn,qn,Uf,fo),hs=ma?hU(ma,qn,Uf,fo):void 0;$f=new yb(Vr,ir,Bi,Ji,Qi,fn,Mi,Ui,!1,qn),xU=4*jh.length;let Uh=ft.iconSizeData,Xs=null;Uh.kind==="source"?(Xs=[Xl*Yi.layout.get("icon-size").evaluate(kr,{})],Xs[0]>Ju&&jr(`${ft.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Uh.kind==="composite"&&(Xs=[Xl*ls.compositeIconSizes[0].evaluate(kr,{},us),Xl*ls.compositeIconSizes[1].evaluate(kr,{},us)],(Xs[0]>Ju||Xs[1]>Ju)&&jr(`${ft.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ft.addSymbols(ft.icon,jh,Xs,xi,Vi,kr,c.ao.none,ir,Vf.lineStartIndex,Vf.lineLength,-1,us),bI=ft.icon.placedSymbolArray.length-1,hs&&(bU=4*hs.length,ft.addSymbols(ft.icon,hs,Xs,xi,Vi,kr,c.ao.vertical,ir,Vf.lineStartIndex,Vf.lineLength,-1,us),wI=ft.icon.placedSymbolArray.length-1)}let EU=Object.keys(Ci.horizontal);for(let qn of EU){let fo=Ci.horizontal[qn];if(!Bh){TU=Hu(fo.text);let hs=Yi.layout.get("text-rotate").evaluate(kr,{},us);Bh=new yb(Vr,ir,Bi,Ji,Qi,fo,Kn,ho,ji,hs)}let jh=fo.positionedLines.length===1;if(wU+=mU(ft,ir,fo,co,Yi,ji,kr,va,Vf,Ci.vertical?c.ao.horizontal:c.ao.horizontalOnly,jh?EU:[qn],Yl,bI,ls,us),jh)break}Ci.vertical&&(SU+=mU(ft,ir,Ci.vertical,co,Yi,ji,kr,va,Vf,c.ao.vertical,["vertical"],Yl,wI,ls,us));let ySe=Bh?Bh.boxStartIndex:ft.collisionBoxArray.length,_Se=Bh?Bh.boxEndIndex:ft.collisionBoxArray.length,xSe=Gf?Gf.boxStartIndex:ft.collisionBoxArray.length,bSe=Gf?Gf.boxEndIndex:ft.collisionBoxArray.length,wSe=$f?$f.boxStartIndex:ft.collisionBoxArray.length,SSe=$f?$f.boxEndIndex:ft.collisionBoxArray.length,TSe=Wf?Wf.boxStartIndex:ft.collisionBoxArray.length,ESe=Wf?Wf.boxEndIndex:ft.collisionBoxArray.length,cs=-1,xb=(qn,fo)=>qn&&qn.circleDiameter?Math.max(qn.circleDiameter,fo):fo;cs=xb(Bh,cs),cs=xb(Gf,cs),cs=xb($f,cs),cs=xb(Wf,cs);let AU=cs>-1?1:0;AU&&(cs*=gSe/Ni),ft.glyphOffsetArray.length>=Nf.MAX_GLYPHS&&jr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),kr.sortKey!==void 0&&ft.addToSortKeyRanges(ft.symbolInstances.length,kr.sortKey);let ASe=pU(Yi,kr,us),[qSe,ISe]=function(qn,fo){let jh=qn.length,hs=fo==null?void 0:fo.values;if((hs==null?void 0:hs.length)>0)for(let Uh=0;Uh<hs.length;Uh+=2){let Xs=hs[Uh+1];qn.emplaceBack(c.aE[hs[Uh]],Xs[0],Xs[1])}return[jh,qn.length]}(ft.textAnchorOffsets,ASe);ft.symbolInstances.emplaceBack(ir.x,ir.y,Yl.right>=0?Yl.right:-1,Yl.center>=0?Yl.center:-1,Yl.left>=0?Yl.left:-1,Yl.vertical||-1,bI,wI,TU,ySe,_Se,xSe,bSe,wSe,SSe,TSe,ESe,Bi,wU,SU,xU,bU,AU,0,Kn,cs,qSe,ISe)}(l,bt,Mt,s,h,p,et,l.layers[0],l.collisionBoxArray,n.index,n.sourceLayerIndex,l.index,oe,[Ce,Ce,Ce,Ce],tt,E,pe,De,He,G,n,_,C,R,x)};if(Qe==="line")for(let Mt of aU(n.geometry,0,0,Dt,Dt)){let bt=zh(Mt,Fe),ft=cSe(bt,ge,Ve,s.vertical||K,h,24,Se,l.overscaling,Dt);for(let ir of ft)K&&mSe(l,K.text,gt,ir)||qt(bt,ir)}else if(Qe==="line-center"){for(let Mt of n.geometry)if(Mt.length>1){let bt=zh(Mt,Fe),ft=uSe(bt,Ve,s.vertical||K,h,24,Se);ft&&qt(bt,ft)}}else if(n.type==="Polygon")for(let Mt of bh(n.geometry,0)){let bt=dSe(Mt,16);qt(zh(Mt[0],Fe,!0),new ec(bt.x,bt.y,0))}else if(n.type==="LineString")for(let Mt of n.geometry){let bt=zh(Mt,Fe);qt(bt,new ec(bt[0].x,bt[0].y,0))}else if(n.type==="Point")for(let Mt of n.geometry)for(let bt of Mt)qt([bt],new ec(bt.x,bt.y,0))}function mU(l,n,s,h,p,_,x,S,E,C,R,F,B,$,G){let K=function(Se,pe,ge,Ce,De,Ve,tt,He){let Qe=Ce.layout.get("text-rotate").evaluate(Ve,{})*Math.PI/180,gt=[];for(let Je of pe.positionedLines)for(let et of Je.positionedGlyphs){if(!et.rect)continue;let Fe=et.rect||{},qt=4,Mt=!0,bt=1,ft=0,ir=(De||He)&&et.vertical,Jr=et.metrics.advance*et.scale/2;if(He&&pe.verticalizable&&(ft=Je.lineOffset/2-(et.imageName?-(Ni-et.metrics.width*et.scale)/2:(et.scale-1)*Ni)),et.imageName){let Ui=tt[et.imageName];Mt=Ui.sdf,bt=Ui.pixelRatio,qt=1/bt}let Ci=De?[et.x+Jr,et.y]:[0,0],fn=De?[0,0]:[et.x+Jr+ge[0],et.y+ge[1]-ft],co=[0,0];ir&&(co=fn,fn=[0,0]);let ma=et.metrics.isDoubleResolution?2:1,Yi=(et.metrics.left-qt)*et.scale-Jr+fn[0],Vr=(-et.metrics.top-qt)*et.scale+fn[1],Bi=Yi+Fe.w/ma*et.scale/bt,Ji=Vr+Fe.h/ma*et.scale/bt,Qi=new v(Yi,Vr),Kn=new v(Bi,Vr),ho=new v(Yi,Ji),ji=new v(Bi,Ji);if(ir){let Ui=new v(-Jr,Jr- -17),Vi=-Math.PI/2,xi=12-Jr,kr=new v(22-xi,-(et.imageName?xi:0)),ls=new v(...co);Qi._rotateAround(Vi,Ui)._add(kr)._add(ls),Kn._rotateAround(Vi,Ui)._add(kr)._add(ls),ho._rotateAround(Vi,Ui)._add(kr)._add(ls),ji._rotateAround(Vi,Ui)._add(kr)._add(ls)}if(Qe){let Ui=Math.sin(Qe),Vi=Math.cos(Qe),xi=[Vi,-Ui,Ui,Vi];Qi._matMult(xi),Kn._matMult(xi),ho._matMult(xi),ji._matMult(xi)}let va=new v(0,0),Mi=new v(0,0);gt.push({tl:Qi,tr:Kn,bl:ho,br:ji,tex:Fe,writingMode:pe.writingMode,glyphOffset:Ci,sectionIndex:et.sectionIndex,isSDF:Mt,pixelOffsetTL:va,pixelOffsetBR:Mi,minFontScaleX:0,minFontScaleY:0})}return gt}(0,s,S,p,_,x,h,l.allowVerticalPlacement),Q=l.textSizeData,oe=null;Q.kind==="source"?(oe=[Xl*p.layout.get("text-size").evaluate(x,{})],oe[0]>Ju&&jr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Q.kind==="composite"&&(oe=[Xl*$.compositeTextSizes[0].evaluate(x,{},G),Xl*$.compositeTextSizes[1].evaluate(x,{},G)],(oe[0]>Ju||oe[1]>Ju)&&jr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,K,oe,S,_,x,C,n,E.lineStartIndex,E.lineLength,B,G);for(let Se of R)F[Se]=l.text.placedSymbolArray.length-1;return 4*K.length}function vU(l){for(let n in l)return l[n];return null}function mSe(l,n,s,h){let p=l.compareText;if(n in p){let _=p[n];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<s)return!0}else p[n]=[];return p[n].push(h),!1}let gU=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pI{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");let p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);let _=gU[15&h];if(!_)throw new Error("Unrecognized array type.");let[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new pI(S,x,_,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;let _=gU.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+E,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+E),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+E,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){let n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return mI(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:_,coords:x,nodeSize:S}=this,E=[0,_.length-1,0],C=[];for(;E.length;){let R=E.pop()||0,F=E.pop()||0,B=E.pop()||0;if(F-B<=S){for(let Q=B;Q<=F;Q++){let oe=x[2*Q],Se=x[2*Q+1];oe>=n&&oe<=h&&Se>=s&&Se<=p&&C.push(_[Q])}continue}let $=B+F>>1,G=x[2*$],K=x[2*$+1];G>=n&&G<=h&&K>=s&&K<=p&&C.push(_[$]),(R===0?n<=G:s<=K)&&(E.push(B),E.push($-1),E.push(1-R)),(R===0?h>=G:p>=K)&&(E.push($+1),E.push(F),E.push(1-R))}return C}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:p,coords:_,nodeSize:x}=this,S=[0,p.length-1,0],E=[],C=h*h;for(;S.length;){let R=S.pop()||0,F=S.pop()||0,B=S.pop()||0;if(F-B<=x){for(let Q=B;Q<=F;Q++)_U(_[2*Q],_[2*Q+1],n,s)<=C&&E.push(p[Q]);continue}let $=B+F>>1,G=_[2*$],K=_[2*$+1];_U(G,K,n,s)<=C&&E.push(p[$]),(R===0?n-h<=G:s-h<=K)&&(S.push(B),S.push($-1),S.push(1-R)),(R===0?n+h>=G:s+h>=K)&&(S.push($+1),S.push(F),S.push(1-R))}return E}}function mI(l,n,s,h,p,_){if(p-h<=s)return;let x=h+p>>1;yU(l,n,x,h,p,_),mI(l,n,s,h,x-1,1-_),mI(l,n,s,x+1,p,1-_)}function yU(l,n,s,h,p,_){for(;p>h;){if(p-h>600){let C=p-h+1,R=s-h+1,F=Math.log(C),B=.5*Math.exp(2*F/3),$=.5*Math.sqrt(F*B*(C-B)/C)*(R-C/2<0?-1:1);yU(l,n,s,Math.max(h,Math.floor(s-R*B/C+$)),Math.min(p,Math.floor(s+(C-R)*B/C+$)),_)}let x=n[2*s+_],S=h,E=p;for(pg(l,n,h,s),n[2*p+_]>x&&pg(l,n,h,p);S<E;){for(pg(l,n,S,E),S++,E--;n[2*S+_]<x;)S++;for(;n[2*E+_]>x;)E--}n[2*h+_]===x?pg(l,n,h,E):(E++,pg(l,n,E,p)),E<=s&&(h=E+1),s<=E&&(p=E-1)}}function pg(l,n,s,h){vI(l,s,h),vI(n,2*s,2*h),vI(n,2*s+1,2*h+1)}function vI(l,n,s){let h=l[n];l[n]=l[s],l[s]=h}function _U(l,n,s,h){let p=l-s,_=n-h;return p*p+_*_}var gI;c.cx=void 0,(gI=c.cx||(c.cx={})).create="create",gI.load="load",gI.fullLoad="fullLoad";let _b=null,mg=[],yI=1e3/60,_I="loadTime",xI="fullLoadTime",vSe={mark(l){performance.mark(l)},frame(l){let n=l;_b!=null&&mg.push(n-_b),_b=n},clearMetrics(){_b=null,mg=[],performance.clearMeasures(_I),performance.clearMeasures(xI);for(let l in c.cx)performance.clearMarks(c.cx[l])},getPerformanceMetrics(){performance.measure(_I,c.cx.create,c.cx.load),performance.measure(xI,c.cx.create,c.cx.fullLoad);let l=performance.getEntriesByName(_I)[0].duration,n=performance.getEntriesByName(xI)[0].duration,s=mg.length,h=1/(mg.reduce((_,x)=>_+x,0)/s/1e3),p=mg.filter(_=>_>yI).reduce((_,x)=>_+(x-yI)/yI,0);return{loadTime:l,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};c.$=Dt,c.A=J,c.B=function([l,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(n)*Math.sin(s),y:l*Math.sin(n)*Math.sin(s),z:l*Math.cos(s)}},c.C=qo,c.D=mt,c.E=pt,c.F=Ar,c.G=Mh,c.H=function(l){if(es==null){let n=l.navigator?l.navigator.userAgent:null;es=!!l.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return es},c.I=tI,c.J=class{constructor(l,n){this.target=l,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new oSe(()=>this.process()),this.subscription=Ya(this.target,"message",s=>this.receive(s),!1),this.globalScope=la(self)?l:window}registerMessageHandler(l,n){this.messageHandlers[l]=n}sendAsync(l,n){return new Promise((s,h)=>{let p=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=n?Ya(n.signal,"abort",()=>{_==null||_.unsubscribe(),delete this.resolveRejects[p];let E={id:p,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(E)},sSe):null;this.resolveRejects[p]={resolve:E=>{_==null||_.unsubscribe(),s(E)},reject:E=>{_==null||_.unsubscribe(),h(E)}};let x=[],S=Object.assign(Object.assign({},l),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Vu(l.data,x)});this.target.postMessage(S,{transfer:x})})}receive(l){let n=l.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];let h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(la(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;let l=this.taskQueue.shift(),n=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(l,n)}processTask(l,n){return a(this,void 0,void 0,function*(){if(n.type==="<response>"){let p=this.resolveRejects[l];return delete this.resolveRejects[l],p?void(n.error?p.reject(Gl(n.error)):p.resolve(Gl(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let s=Gl(n.data),h=new AbortController;this.abortControllers[l]=h;try{let p=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(l,null,p)}catch(p){this.completeTask(l,p)}})}completeTask(l,n,s){let h=[];delete this.abortControllers[l];let p={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Vu(n):null,data:Vu(s,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=Y,c.L=function(){var l=new J(16);return J!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},c.M=function(l,n,s){var h,p,_,x,S,E,C,R,F,B,$,G,K=s[0],Q=s[1],oe=s[2];return n===l?(l[12]=n[0]*K+n[4]*Q+n[8]*oe+n[12],l[13]=n[1]*K+n[5]*Q+n[9]*oe+n[13],l[14]=n[2]*K+n[6]*Q+n[10]*oe+n[14],l[15]=n[3]*K+n[7]*Q+n[11]*oe+n[15]):(p=n[1],_=n[2],x=n[3],S=n[4],E=n[5],C=n[6],R=n[7],F=n[8],B=n[9],$=n[10],G=n[11],l[0]=h=n[0],l[1]=p,l[2]=_,l[3]=x,l[4]=S,l[5]=E,l[6]=C,l[7]=R,l[8]=F,l[9]=B,l[10]=$,l[11]=G,l[12]=h*K+S*Q+F*oe+n[12],l[13]=p*K+E*Q+B*oe+n[13],l[14]=_*K+C*Q+$*oe+n[14],l[15]=x*K+R*Q+G*oe+n[15]),l},c.N=function(l,n,s){var h=s[0],p=s[1],_=s[2];return l[0]=n[0]*h,l[1]=n[1]*h,l[2]=n[2]*h,l[3]=n[3]*h,l[4]=n[4]*p,l[5]=n[5]*p,l[6]=n[6]*p,l[7]=n[7]*p,l[8]=n[8]*_,l[9]=n[9]*_,l[10]=n[10]*_,l[11]=n[11]*_,l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},c.O=function(l,n,s){var h=n[0],p=n[1],_=n[2],x=n[3],S=n[4],E=n[5],C=n[6],R=n[7],F=n[8],B=n[9],$=n[10],G=n[11],K=n[12],Q=n[13],oe=n[14],Se=n[15],pe=s[0],ge=s[1],Ce=s[2],De=s[3];return l[0]=pe*h+ge*S+Ce*F+De*K,l[1]=pe*p+ge*E+Ce*B+De*Q,l[2]=pe*_+ge*C+Ce*$+De*oe,l[3]=pe*x+ge*R+Ce*G+De*Se,l[4]=(pe=s[4])*h+(ge=s[5])*S+(Ce=s[6])*F+(De=s[7])*K,l[5]=pe*p+ge*E+Ce*B+De*Q,l[6]=pe*_+ge*C+Ce*$+De*oe,l[7]=pe*x+ge*R+Ce*G+De*Se,l[8]=(pe=s[8])*h+(ge=s[9])*S+(Ce=s[10])*F+(De=s[11])*K,l[9]=pe*p+ge*E+Ce*B+De*Q,l[10]=pe*_+ge*C+Ce*$+De*oe,l[11]=pe*x+ge*R+Ce*G+De*Se,l[12]=(pe=s[12])*h+(ge=s[13])*S+(Ce=s[14])*F+(De=s[15])*K,l[13]=pe*p+ge*E+Ce*B+De*Q,l[14]=pe*_+ge*C+Ce*$+De*oe,l[15]=pe*x+ge*R+Ce*G+De*Se,l},c.P=v,c.Q=function(l,n){let s={};for(let h=0;h<n.length;h++){let p=n[h];p in l&&(s[p]=l[p])}return s},c.R=pa,c.S=Qu,c.T=$q,c.U=Xj,c.V=Hj,c.W=ue,c.X=fe,c.Y=Ds,c.Z=uo,c._=a,c.a=V,c.a$=Lr,c.a0=function(l,n){var s,h,p,_,x;if(!l)return n!=null?n:{};if(!n)return l;let S=Object.assign({},l);if(n.removeAll&&(S={removeAll:!0}),n.remove){let E=new Set(n.remove);S.add&&(S.add=S.add.filter(R=>!E.has(R.id))),S.update&&(S.update=S.update.filter(R=>!E.has(R.id)));let C=new Set(((s=l.add)!==null&&s!==void 0?s:[]).map(R=>R.id));n.remove=n.remove.filter(R=>!C.has(R))}if(n.remove){let E=new Set(S.remove?S.remove.concat(n.remove):n.remove);S.remove=Array.from(E.values())}if(n.add){let E=S.add?S.add.concat(n.add):n.add,C=new Map(E.map(R=>[R.id,R]));S.add=Array.from(C.values())}if(n.update){let E=new Map((h=S.update)===null||h===void 0?void 0:h.map(C=>[C.id,C]));for(let C of n.update){let R=(p=E.get(C.id))!==null&&p!==void 0?p:{id:C.id};C.newGeometry&&(R.newGeometry=C.newGeometry),C.addOrUpdateProperties&&(R.addOrUpdateProperties=((_=R.addOrUpdateProperties)!==null&&_!==void 0?_:[]).concat(C.addOrUpdateProperties)),C.removeProperties&&(R.removeProperties=((x=R.removeProperties)!==null&&x!==void 0?x:[]).concat(C.removeProperties)),C.removeAllProperties&&(R.removeAllProperties=!0),E.set(C.id,R)}S.update=Array.from(E.values())}return S.remove&&S.add&&(S.remove=S.remove.filter(E=>S.add.findIndex(C=>C.id===E)===-1)),S},c.a1=dg,c.a2=Nh,c.a3=25,c.a4=hI,c.a5=l=>{let n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(let h of l){let p=window.document.createElement("source");qe(h)||(n.crossOrigin="Anonymous"),p.src=h,n.appendChild(p)}})},c.a6=Ke,c.a7=function(){return Vn++},c.a8=z,c.a9=Nf,c.aA=function(l){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(let _ of l)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),p=Math.max(p,_.y);return[n,s,h,p]},c.aB=Ni,c.aC=Fr,c.aD=function(l,n,s,h,p=!1){if(!s[0]&&!s[1])return[0,0];let _=p?h==="map"?-l.bearingInRadians:0:h==="viewport"?l.bearingInRadians:0;if(_){let x=Math.sin(_),S=Math.cos(_);s=[s[0]*S-s[1]*x,s[0]*x+s[1]*S]}return[p?s[0]:Fr(n,s[0],l.zoom),p?s[1]:Fr(n,s[1],l.zoom)]},c.aF=nI,c.aG=fI,c.aH=iI,c.aI=pI,c.aJ=ai,c.aK=ub,c.aL=he,c.aM=Bt,c.aN=_r,c.aO=qa,c.aP=ke,c.aQ=Jj,c.aR=ct,c.aS=Ye,c.aT=function(l){var n=new J(3);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n},c.aU=function(l,n,s){return l[0]=n[0]-s[0],l[1]=n[1]-s[1],l[2]=n[2]-s[2],l},c.aV=function(l,n){var s=n[0],h=n[1],p=n[2],_=s*s+h*h+p*p;return _>0&&(_=1/Math.sqrt(_)),l[0]=n[0]*_,l[1]=n[1]*_,l[2]=n[2]*_,l},c.aW=ht,c.aX=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]},c.aY=function(l,n,s){return l[0]=n[0]*s[0],l[1]=n[1]*s[1],l[2]=n[2]*s[2],l[3]=n[3]*s[3],l},c.aZ=Ge,c.a_=function(l,n,s){let h=n[0]*s[0]+n[1]*s[1]+n[2]*s[2];return h===0?null:(-(l[0]*s[0]+l[1]*s[1]+l[2]*s[2])-s[3])/h},c.aa=Ul,c.ab=ss,c.ac=rU,c.ad=function(l){let n={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,_)=>{let x=p||_;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){let s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},c.ae=_e,c.af=function(l){return Math.pow(2,l)},c.ag=xe,c.ah=hi,c.ai=85.051129,c.aj=Yj,c.ak=function(l){return Math.log(l)/Math.LN2},c.al=function(l){var n=l[0],s=l[1];return n*n+s*s},c.am=function(l,n){let s=[];for(let h in l)h in n||s.push(h);return s},c.an=function(l,n){let s=0,h=0;if(l.kind==="constant")h=l.layoutSize;else if(l.kind!=="source"){let{interpolationType:p,minZoom:_,maxZoom:x}=l,S=p?hi(Xi.interpolationFactor(p,n,_,x),0,1):0;l.kind==="camera"?h=qo.number(l.minSize,l.maxSize,S):s=S}return{uSizeT:s,uSize:h}},c.ap=function(l,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return l.kind==="source"?h/Xl:l.kind==="composite"?qo.number(h/Xl,p/Xl,s):n},c.aq=function(l,n){var s=n[0],h=n[1],p=n[2],_=n[3],x=n[4],S=n[5],E=n[6],C=n[7],R=n[8],F=n[9],B=n[10],$=n[11],G=n[12],K=n[13],Q=n[14],oe=n[15],Se=s*S-h*x,pe=s*E-p*x,ge=s*C-_*x,Ce=h*E-p*S,De=h*C-_*S,Ve=p*C-_*E,tt=R*K-F*G,He=R*Q-B*G,Qe=R*oe-$*G,gt=F*Q-B*K,Je=F*oe-$*K,et=B*oe-$*Q,Fe=Se*et-pe*Je+ge*gt+Ce*Qe-De*He+Ve*tt;return Fe?(l[0]=(S*et-E*Je+C*gt)*(Fe=1/Fe),l[1]=(p*Je-h*et-_*gt)*Fe,l[2]=(K*Ve-Q*De+oe*Ce)*Fe,l[3]=(B*De-F*Ve-$*Ce)*Fe,l[4]=(E*Qe-x*et-C*He)*Fe,l[5]=(s*et-p*Qe+_*He)*Fe,l[6]=(Q*ge-G*Ve-oe*pe)*Fe,l[7]=(R*Ve-B*ge+$*pe)*Fe,l[8]=(x*Je-S*Qe+C*tt)*Fe,l[9]=(h*Qe-s*Je-_*tt)*Fe,l[10]=(G*De-K*ge+oe*Se)*Fe,l[11]=(F*ge-R*De-$*Se)*Fe,l[12]=(S*He-x*gt-E*tt)*Fe,l[13]=(s*gt-h*He+p*tt)*Fe,l[14]=(K*pe-G*Ce-Q*Se)*Fe,l[15]=(R*Ce-F*pe+B*Se)*Fe,l):null},c.ar=Sr,c.as=function(l){var n=l[0],s=l[1];return Math.sqrt(n*n+s*s)},c.at=function(l){return l[0]=0,l[1]=0,l},c.au=function(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l},c.av=aI,c.aw=Pt,c.ax=function(l,n,s,h){let p=n.y-l.y,_=n.x-l.x,x=h.y-s.y,S=h.x-s.x,E=x*_-S*p;if(E===0)return null;let C=(S*(l.y-s.y)-x*(l.x-s.x))/E;return new v(l.x+C*_,l.y+C*p)},c.ay=aU,c.az=K3,c.b=ua,c.b$=class extends g{},c.b0=function(l,n,s){return l[0]=n[0]*s,l[1]=n[1]*s,l[2]=n[2]*s,l[3]=n[3]*s,l},c.b1=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]},c.b2=eU,c.b3=Bf,c.b4=function(l,n,s,h,p){var _=1/Math.tan(n/2);if(l[0]=_/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=_,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,p!=null&&p!==1/0){var x=1/(h-p);l[10]=(p+h)*x,l[14]=2*p*h*x}else l[10]=-1,l[14]=-2*h;return l},c.b5=function(l){var n=new J(16);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[8]=l[8],n[9]=l[9],n[10]=l[10],n[11]=l[11],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15],n},c.b6=function(l,n,s){var h=Math.sin(s),p=Math.cos(s),_=n[0],x=n[1],S=n[2],E=n[3],C=n[4],R=n[5],F=n[6],B=n[7];return n!==l&&(l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=_*p+C*h,l[1]=x*p+R*h,l[2]=S*p+F*h,l[3]=E*p+B*h,l[4]=C*p-_*h,l[5]=R*p-x*h,l[6]=F*p-S*h,l[7]=B*p-E*h,l},c.b7=function(l,n,s){var h=Math.sin(s),p=Math.cos(s),_=n[4],x=n[5],S=n[6],E=n[7],C=n[8],R=n[9],F=n[10],B=n[11];return n!==l&&(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[4]=_*p+C*h,l[5]=x*p+R*h,l[6]=S*p+F*h,l[7]=E*p+B*h,l[8]=C*p-_*h,l[9]=R*p-x*h,l[10]=F*p-S*h,l[11]=B*p-E*h,l},c.b8=function(){let l=new Float32Array(16);return xe(l),l},c.b9=function(){let l=new Float64Array(16);return xe(l),l},c.bA=function(l,n){let s=zr(l,360),h=zr(n,360),p=h-s,_=h>s?p-360:p+360;return Math.abs(p)<Math.abs(_)?p:_},c.bB=function(l){return l[0]=0,l[1]=0,l[2]=0,l},c.bC=function(l,n,s,h){let p=Math.sqrt(l*l+n*n),_=Math.sqrt(s*s+h*h);l/=p,n/=p,s/=_,h/=_;let x=Math.acos(l*s+n*h);return-n*s+l*h>0?x:-x},c.bD=function(l,n){let s=zr(l,2*Math.PI),h=zr(n,2*Math.PI);return Math.min(Math.abs(s-h),Math.abs(s-h+2*Math.PI),Math.abs(s-h-2*Math.PI))},c.bE=function(){let l={},n=Ee.$version;for(let s in Ee.$root){let h=Ee.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(l[s]=p)}}return l},c.bF=bf,c.bG=ve,c.bH=function l(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!l(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(let h in n)if(!l(n[h],s[h]))return!1;return!0}return n===s},c.bI=function(l){l=l.slice();let n=Object.create(null);for(let s=0;s<l.length;s++)n[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=Kt(l[s],n[l[s].ref]));return l},c.bJ=function(l){if(l.type==="custom")return new aSe(l);switch(l.type){case"background":return new rSe(l);case"circle":return new j1e(l);case"color-relief":return new Z1e(l);case"fill":return new lwe(l);case"fill-extrusion":return new _we(l);case"heatmap":return new V1e(l);case"hillshade":return new G1e(l);case"line":return new Awe(l);case"raster":return new nSe(l);case"symbol":return new pb(l)}},c.bK=ln,c.bL=function(l,n){if(!l)return[{command:"setStyle",args:[n]}];let s=[];try{if(!yt(l.version,n.version))return[{command:"setStyle",args:[n]}];yt(l.center,n.center)||s.push({command:"setCenter",args:[n.center]}),yt(l.state,n.state)||s.push({command:"setGlobalState",args:[n.state]}),yt(l.centerAltitude,n.centerAltitude)||s.push({command:"setCenterAltitude",args:[n.centerAltitude]}),yt(l.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),yt(l.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),yt(l.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),yt(l.roll,n.roll)||s.push({command:"setRoll",args:[n.roll]}),yt(l.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),yt(l.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),yt(l.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),yt(l.light,n.light)||s.push({command:"setLight",args:[n.light]}),yt(l.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),yt(l.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),yt(l.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});let h={},p=[];(function(x,S,E,C){let R;for(R in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,R)&&(Object.prototype.hasOwnProperty.call(S,R)||Ai(R,E,C));for(R in S)Object.prototype.hasOwnProperty.call(S,R)&&(Object.prototype.hasOwnProperty.call(x,R)?yt(x[R],S[R])||(x[R].type==="geojson"&&S[R].type==="geojson"&&di(x,S,R)?Nt(E,{command:"setGeoJSONSourceData",args:[R,S[R].data]}):qi(R,S,E,C)):Ir(R,S,E))})(l.sources,n.sources,p,h);let _=[];l.layers&&l.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):_.push(x)}),s=s.concat(p),function(x,S,E){S=S||[];let C=(x=x||[]).map(ar),R=S.map(ar),F=x.reduce(mi,{}),B=S.reduce(mi,{}),$=C.slice(),G=Object.create(null),K,Q,oe,Se,pe;for(let ge=0,Ce=0;ge<C.length;ge++)K=C[ge],Object.prototype.hasOwnProperty.call(B,K)?Ce++:(Nt(E,{command:"removeLayer",args:[K]}),$.splice($.indexOf(K,Ce),1));for(let ge=0,Ce=0;ge<R.length;ge++)K=R[R.length-1-ge],$[$.length-1-ge]!==K&&(Object.prototype.hasOwnProperty.call(F,K)?(Nt(E,{command:"removeLayer",args:[K]}),$.splice($.lastIndexOf(K,$.length-Ce),1)):Ce++,Se=$[$.length-ge],Nt(E,{command:"addLayer",args:[B[K],Se]}),$.splice($.length-ge,0,K),G[K]=!0);for(let ge=0;ge<R.length;ge++)if(K=R[ge],Q=F[K],oe=B[K],!G[K]&&!yt(Q,oe))if(yt(Q.source,oe.source)&&yt(Q["source-layer"],oe["source-layer"])&&yt(Q.type,oe.type)){for(pe in Qt(Q.layout,oe.layout,E,K,null,"setLayoutProperty"),Qt(Q.paint,oe.paint,E,K,null,"setPaintProperty"),yt(Q.filter,oe.filter)||Nt(E,{command:"setFilter",args:[K,oe.filter]}),yt(Q.minzoom,oe.minzoom)&&yt(Q.maxzoom,oe.maxzoom)||Nt(E,{command:"setLayerZoomRange",args:[K,oe.minzoom,oe.maxzoom]}),Q)Object.prototype.hasOwnProperty.call(Q,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?Qt(Q[pe],oe[pe],E,K,pe.slice(6),"setPaintProperty"):yt(Q[pe],oe[pe])||Nt(E,{command:"setLayerProperty",args:[K,pe,oe[pe]]}));for(pe in oe)Object.prototype.hasOwnProperty.call(oe,pe)&&!Object.prototype.hasOwnProperty.call(Q,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?Qt(Q[pe],oe[pe],E,K,pe.slice(6),"setPaintProperty"):yt(Q[pe],oe[pe])||Nt(E,{command:"setLayerProperty",args:[K,pe,oe[pe]]}))}else Nt(E,{command:"removeLayer",args:[K]}),Se=$[$.lastIndexOf(K)+1],Nt(E,{command:"addLayer",args:[oe,Se]})}(_,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},c.bM=function(l){let n=[],s=l.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},c.bN=ks,c.bO=wo,c.bP=class extends An{constructor(l,n){super(l,n),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},c.bQ=Pi,c.bR=class extends An{constructor(l,n){super(l,n),this.current=Ma}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let n=1;n<16;n++)if(l[n]!==this.current[n]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},c.bS=yi,c.bT=class extends An{constructor(l,n){super(l,n),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},c.bU=class extends An{constructor(l,n){super(l,n),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},c.bV=re,c.bW=function(l,n){var s=Math.sin(n),h=Math.cos(n);return l[0]=h,l[1]=s,l[2]=0,l[3]=-s,l[4]=h,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},c.bX=function(l,n,s){var h=n[0],p=n[1],_=n[2];return l[0]=h*s[0]+p*s[3]+_*s[6],l[1]=h*s[1]+p*s[4]+_*s[7],l[2]=h*s[2]+p*s[5]+_*s[8],l},c.bY=function(l,n,s,h,p,_,x){var S=1/(n-s),E=1/(h-p),C=1/(_-x);return l[0]=-2*S,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*E,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*C,l[11]=0,l[12]=(n+s)*S,l[13]=(p+h)*E,l[14]=(x+_)*C,l[15]=1,l},c.bZ=class extends An{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;let n=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)n[4*s]=l[s].r,n[4*s+1]=l[s].g,n[4*s+2]=l[s].b,n[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,n)}}},c.b_=class extends An{constructor(l,n){super(l,n),this.current=new Array}set(l){if(l!=this.current){this.current=l;let n=new Float32Array(l);this.gl.uniform1fv(this.location,n)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(l,n,s){let h=new Float64Array(4);return nr(h,l,n-90,s),h},c.bc=function(l,n,s,h){var p,_,x,S,E,C=n[0],R=n[1],F=n[2],B=n[3],$=s[0],G=s[1],K=s[2],Q=s[3];return(_=C*$+R*G+F*K+B*Q)<0&&(_=-_,$=-$,G=-G,K=-K,Q=-Q),1-_>H?(p=Math.acos(_),x=Math.sin(p),S=Math.sin((1-h)*p)/x,E=Math.sin(h*p)/x):(S=1-h,E=h),l[0]=S*C+E*$,l[1]=S*R+E*G,l[2]=S*F+E*K,l[3]=S*B+E*Q,l},c.bd=function(l){let n=new Float64Array(9);var s,h,p,_,x,S,E,C,R,F,B,$,G,K,Q,oe,Se,pe;F=(p=(h=l)[0])*(E=p+p),B=(_=h[1])*E,G=(x=h[2])*E,K=x*(C=_+_),oe=(S=h[3])*E,Se=S*C,pe=S*(R=x+x),(s=n)[0]=1-($=_*C)-(Q=x*R),s[3]=B-pe,s[6]=G+Se,s[1]=B+pe,s[4]=1-F-Q,s[7]=K-oe,s[2]=G-Se,s[5]=K+oe,s[8]=1-F-$;let ge=ke(-Math.asin(hi(n[2],-1,1))),Ce,De;return Math.hypot(n[5],n[8])<.001?(Ce=0,De=-ke(Math.atan2(n[3],n[4]))):(Ce=ke(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),De=ke(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:Ce,pitch:ge+90,bearing:De}},c.be=function(l,n){return l.roll==n.roll&&l.pitch==n.pitch&&l.bearing==n.bearing},c.bf=Yt,c.bg=Zs,c.bh=Df,c.bi=og,c.bj=kf,c.bk=Bn,c.bl=Kr,c.bm=cn,c.bn=function(l,n,s,h,p){return Bn(h,p,hi((l-n)/(s-n),0,1))},c.bo=zr,c.bp=function(){return new Float64Array(3)},c.bq=function(l,n,s,h){return l[0]=n[0]+s[0]*h,l[1]=n[1]+s[1]*h,l[2]=n[2]+s[2]*h,l},c.br=nr,c.bs=function(l,n,s){var h=s[0],p=s[1],_=s[2],x=s[3],S=n[0],E=n[1],C=n[2],R=p*C-_*E,F=_*S-h*C,B=h*E-p*S;return l[0]=S+x*(R+=R)+p*(B+=B)-_*(F+=F),l[1]=E+x*F+_*R-h*B,l[2]=C+x*B+h*F-p*R,l},c.bt=function(l,n,s){let h=(p=[l[0],l[1],l[2],n[0],n[1],n[2],s[0],s[1],s[2]])[0]*((R=p[8])*(x=p[4])-(S=p[5])*(C=p[7]))+p[1]*(-R*(_=p[3])+S*(E=p[6]))+p[2]*(C*_-x*E);var p,_,x,S,E,C,R;if(h===0)return null;let F=ht([],[n[0],n[1],n[2]],[s[0],s[1],s[2]]),B=ht([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),$=ht([],[l[0],l[1],l[2]],[n[0],n[1],n[2]]),G=ct([],F,-l[3]);return Ye(G,G,ct([],B,-n[3])),Ye(G,G,ct([],$,-s[3])),ct(G,G,1/h),G},c.bu=uI,c.bv=function(){return new Float64Array(4)},c.bw=function(l,n,s,h){var p=[],_=[];return p[0]=n[0]-s[0],p[1]=n[1]-s[1],p[2]=n[2]-s[2],_[0]=p[0]*Math.cos(h)-p[1]*Math.sin(h),_[1]=p[0]*Math.sin(h)+p[1]*Math.cos(h),_[2]=p[2],l[0]=_[0]+s[0],l[1]=_[1]+s[1],l[2]=_[2]+s[2],l},c.bx=function(l,n,s,h){var p=[],_=[];return p[0]=n[0]-s[0],p[1]=n[1]-s[1],p[2]=n[2]-s[2],_[0]=p[0],_[1]=p[1]*Math.cos(h)-p[2]*Math.sin(h),_[2]=p[1]*Math.sin(h)+p[2]*Math.cos(h),l[0]=_[0]+s[0],l[1]=_[1]+s[1],l[2]=_[2]+s[2],l},c.by=function(l,n,s,h){var p=[],_=[];return p[0]=n[0]-s[0],p[1]=n[1]-s[1],p[2]=n[2]-s[2],_[0]=p[2]*Math.sin(h)+p[0]*Math.cos(h),_[1]=p[1],_[2]=p[2]*Math.cos(h)-p[0]*Math.sin(h),l[0]=_[0]+s[0],l[1]=_[1]+s[1],l[2]=_[2]+s[2],l},c.bz=function(l,n,s){var h=Math.sin(s),p=Math.cos(s),_=n[0],x=n[1],S=n[2],E=n[3],C=n[8],R=n[9],F=n[10],B=n[11];return n!==l&&(l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=_*p-C*h,l[1]=x*p-R*h,l[2]=S*p-F*h,l[3]=E*p-B*h,l[8]=_*h+C*p,l[9]=x*h+R*p,l[10]=S*h+F*p,l[11]=E*h+B*p,l},c.c=le,c.c0=Cwe,c.c1=class extends u{},c.c2=Vq,c.c3=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},c.c4=nj,c.c5=function(l,n,s){var h=n[0],p=n[1],_=n[2],x=s[3]*h+s[7]*p+s[11]*_+s[15];return l[0]=(s[0]*h+s[4]*p+s[8]*_+s[12])/(x=x||1),l[1]=(s[1]*h+s[5]*p+s[9]*_+s[13])/x,l[2]=(s[2]*h+s[6]*p+s[10]*_+s[14])/x,l},c.c6=class extends Hv{},c.c7=class extends k{},c.c8=function(l,n){return l[0]===n[0]&&l[1]===n[1]&&l[2]===n[2]&&l[3]===n[3]&&l[4]===n[4]&&l[5]===n[5]&&l[6]===n[6]&&l[7]===n[7]&&l[8]===n[8]&&l[9]===n[9]&&l[10]===n[10]&&l[11]===n[11]&&l[12]===n[12]&&l[13]===n[13]&&l[14]===n[14]&&l[15]===n[15]},c.c9=function(l,n){var s=l[0],h=l[1],p=l[2],_=l[3],x=l[4],S=l[5],E=l[6],C=l[7],R=l[8],F=l[9],B=l[10],$=l[11],G=l[12],K=l[13],Q=l[14],oe=l[15],Se=n[0],pe=n[1],ge=n[2],Ce=n[3],De=n[4],Ve=n[5],tt=n[6],He=n[7],Qe=n[8],gt=n[9],Je=n[10],et=n[11],Fe=n[12],qt=n[13],Mt=n[14],bt=n[15];return Math.abs(s-Se)<=H*Math.max(1,Math.abs(s),Math.abs(Se))&&Math.abs(h-pe)<=H*Math.max(1,Math.abs(h),Math.abs(pe))&&Math.abs(p-ge)<=H*Math.max(1,Math.abs(p),Math.abs(ge))&&Math.abs(_-Ce)<=H*Math.max(1,Math.abs(_),Math.abs(Ce))&&Math.abs(x-De)<=H*Math.max(1,Math.abs(x),Math.abs(De))&&Math.abs(S-Ve)<=H*Math.max(1,Math.abs(S),Math.abs(Ve))&&Math.abs(E-tt)<=H*Math.max(1,Math.abs(E),Math.abs(tt))&&Math.abs(C-He)<=H*Math.max(1,Math.abs(C),Math.abs(He))&&Math.abs(R-Qe)<=H*Math.max(1,Math.abs(R),Math.abs(Qe))&&Math.abs(F-gt)<=H*Math.max(1,Math.abs(F),Math.abs(gt))&&Math.abs(B-Je)<=H*Math.max(1,Math.abs(B),Math.abs(Je))&&Math.abs($-et)<=H*Math.max(1,Math.abs($),Math.abs(et))&&Math.abs(G-Fe)<=H*Math.max(1,Math.abs(G),Math.abs(Fe))&&Math.abs(K-qt)<=H*Math.max(1,Math.abs(K),Math.abs(qt))&&Math.abs(Q-Mt)<=H*Math.max(1,Math.abs(Q),Math.abs(Mt))&&Math.abs(oe-bt)<=H*Math.max(1,Math.abs(oe),Math.abs(bt))},c.cA=function(l,n){V.REGISTERED_PROTOCOLS[l]=n},c.cB=function(l){delete V.REGISTERED_PROTOCOLS[l]},c.cC=function(l,n){let s={};for(let p=0;p<l.length;p++){let _=n&&n[l[p].id]||Mq(l[p]);n&&(n[l[p].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(l[p])}let h=[];for(let p in s)h.push(s[p]);return h},c.cD=st,c.cE=tU,c.cF=iU,c.cG=Oj,c.cH=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Dt/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;let n=l.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new Ar(l.bucket.zoom+1),l.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Ar(l.bucket.zoom+1),l.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Ar(18))};if(l.bucket.textSizeData.kind==="composite"){let{minZoom:C,maxZoom:R}=l.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Ar(C),l.canonical),h["text-size"].possiblyEvaluate(new Ar(R),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){let{minZoom:C,maxZoom:R}=l.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Ar(C),l.canonical),h["icon-size"].possiblyEvaluate(new Ar(R),l.canonical)]}let _=s.get("text-line-height")*Ni,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),E=s.get("text-size");for(let C of l.bucket.features){let R=s.get("text-font").evaluate(C,{},l.canonical).join(","),F=E.evaluate(C,{},l.canonical),B=p.layoutTextSize.evaluate(C,{},l.canonical),$=p.layoutIconSize.evaluate(C,{},l.canonical),G={horizontal:{},vertical:void 0},K=C.text,Q,oe=[0,0];if(K){let ge=K.toString(),Ce=s.get("text-letter-spacing").evaluate(C,{},l.canonical)*Ni,De=Dq(ge)?Ce:0,Ve=s.get("text-anchor").evaluate(C,{},l.canonical),tt=pU(n,C,l.canonical);if(!tt){let Je=s.get("text-radial-offset").evaluate(C,{},l.canonical);oe=Je?fU(Ve,[Je*Ni,dI]):s.get("text-offset").evaluate(C,{},l.canonical).map(et=>et*Ni)}let He=x?"center":s.get("text-justify").evaluate(C,{},l.canonical),Qe=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(C,{},l.canonical)*Ni:1/0,gt=()=>{l.bucket.allowVerticalPlacement&&wf(ge)&&(G.vertical=hb(K,l.glyphMap,l.glyphPositions,l.imagePositions,R,Qe,_,Ve,"left",De,oe,c.ao.vertical,!0,B,F))};if(!x&&tt){let Je=new Set;if(He==="auto")for(let Fe=0;Fe<tt.values.length;Fe+=2)Je.add(fI(tt.values[Fe]));else Je.add(He);let et=!1;for(let Fe of Je)if(!G.horizontal[Fe])if(et)G.horizontal[Fe]=G.horizontal[0];else{let qt=hb(K,l.glyphMap,l.glyphPositions,l.imagePositions,R,Qe,_,"center",Fe,De,oe,c.ao.horizontal,!1,B,F);qt&&(G.horizontal[Fe]=qt,et=qt.positionedLines.length===1)}gt()}else{He==="auto"&&(He=fI(Ve));let Je=hb(K,l.glyphMap,l.glyphPositions,l.imagePositions,R,Qe,_,Ve,He,De,oe,c.ao.horizontal,!1,B,F);Je&&(G.horizontal[He]=Je),gt(),wf(ge)&&x&&S&&(G.vertical=hb(K,l.glyphMap,l.glyphPositions,l.imagePositions,R,Qe,_,Ve,He,De,oe,c.ao.vertical,!1,B,F))}}let Se=!1;if(C.icon&&C.icon.name){let ge=l.imageMap[C.icon.name];ge&&(Q=Jwe(l.imagePositions[C.icon.name],s.get("icon-offset").evaluate(C,{},l.canonical),s.get("icon-anchor").evaluate(C,{},l.canonical)),Se=!!ge.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=Se:l.bucket.sdfIcons!==Se&&jr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ge.pixelRatio!==l.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}let pe=vU(G.horizontal)||G.vertical;l.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||Q)&&pSe(l.bucket,C,G,Q,l.imageMap,p,B,$,oe,Se,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},c.cI=Jq,c.cJ=Hq,c.cK=Yq,c.cL=_j,c.cM=eI,c.cN=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},c.cO=function(l,n,s,h,p){return a(this,void 0,void 0,function*(){if(fe())try{return yield Ds(l,n,s,h,p)}catch(_){}return function(_,x,S,E,C){let R=_.width,F=_.height;So&&ts||(So=new OffscreenCanvas(R,F),ts=So.getContext("2d",{willReadFrequently:!0})),So.width=R,So.height=F,ts.drawImage(_,0,0,R,F);let B=ts.getImageData(x,S,E,C);return ts.clearRect(0,0,R,F),B.data}(l,n,s,h,p)})},c.cP=sj,c.cQ=b,c.cR=yj,c.cS=Lf,c.cT=Eh,c.cU=function(l,n){let s=new Map;if(l!=null)if(l.type==="Feature")s.set(fg(l,n),l);else for(let h of l.features)s.set(fg(h,n),h);return s},c.cV=function(l,n){if(l==null)return!0;if(l.type==="Feature")return fg(l,n)!=null;if(l.type==="FeatureCollection"){let s=new Set;for(let h of l.features){let p=fg(h,n);if(p==null||s.has(p))return!1;s.add(p)}return!0}return!1},c.cW=function(l,n,s){var h,p,_,x;if(n.removeAll&&l.clear(),n.remove)for(let S of n.remove)l.delete(S);if(n.add)for(let S of n.add){let E=fg(S,s);E!=null&&l.set(E,S)}if(n.update)for(let S of n.update){let E=l.get(S.id);if(E==null)continue;let C=!S.removeAllProperties&&(((h=S.removeProperties)===null||h===void 0?void 0:h.length)>0||((p=S.addOrUpdateProperties)===null||p===void 0?void 0:p.length)>0);if((S.newGeometry||S.removeAllProperties||C)&&(E=Object.assign({},E),l.set(S.id,E),C&&(E.properties=Object.assign({},E.properties))),S.newGeometry&&(E.geometry=S.newGeometry),S.removeAllProperties)E.properties={};else if(((_=S.removeProperties)===null||_===void 0?void 0:_.length)>0)for(let R of S.removeProperties)Object.prototype.hasOwnProperty.call(E.properties,R)&&delete E.properties[R];if(((x=S.addOrUpdateProperties)===null||x===void 0?void 0:x.length)>0)for(let{key:R,value:F}of S.addOrUpdateProperties)E.properties[R]=F}},c.cX=ao,c.ca=function(l,n){return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},c.cb=l=>l.type==="symbol",c.cc=l=>l.type==="circle",c.cd=l=>l.type==="heatmap",c.ce=l=>l.type==="line",c.cf=l=>l.type==="fill",c.cg=l=>l.type==="fill-extrusion",c.ch=l=>l.type==="hillshade",c.ci=l=>l.type==="color-relief",c.cj=l=>l.type==="raster",c.ck=l=>l.type==="background",c.cl=l=>l.type==="custom",c.cm=Di,c.cn=function(l,n,s){let h=ur(n.x-s.x,n.y-s.y),p=ur(l.x-s.x,l.y-s.y);var _,x;return ke(Math.atan2(h[0]*p[1]-h[1]*p[0],(_=h)[0]*(x=p)[0]+_[1]*x[1]))},c.co=jn,c.cp=function(l,n){return vt[n]&&(l instanceof MouseEvent||l instanceof WheelEvent)},c.cq=function(l,n){return Be[n]&&"touches"in l},c.cr=function(l){return Be[l]||vt[l]},c.cs=function(l,n,s){var h=n[0],p=n[1];return l[0]=s[0]*h+s[4]*p+s[12],l[1]=s[1]*h+s[5]*p+s[13],l},c.ct=function(l,n){let{x:s,y:h}=dg.fromLngLat(n);return!(l<0||l>25||h<0||h>=1||s<0||s>=1)},c.cu=function(l,n){return l[0]=n[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=n[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=n[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},c.cv=class extends Wu{},c.cw=vSe,c.cy=function(l){return l.message===ut},c.cz=ae,c.d=qe,c.e=Un,c.f=l=>a(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));let n=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=W,c.h=l=>new Promise((n,s)=>{let h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=ca})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let p=new Blob([new Uint8Array(l)],{type:"image/png"});h.src=l.byteLength?URL.createObjectURL(p):ca}),c.i=la,c.j=(l,n)=>be(Un(l,{type:"json"}),n),c.k=ze,c.l=$e,c.m=be,c.n=(l,n)=>be(Un(l,{type:"arrayBuffer"}),n),c.o=function(l){return new eI(l).readFields(jwe,[])},c.p=Rj,c.q=tg,c.r=Tn,c.s=Ya,c.t=eb,c.u=rr,c.v=Ee,c.w=jr,c.x=Rq,c.y=Rh,c.z=Uu}),i("worker",["./shared"],function(c){"use strict";class a{constructor(V){this.keyCache={},V&&this.replace(V)}replace(V){this._layerConfigs={},this._layers={},this.update(V,[])}update(V,W){for(let ae of V){this._layerConfigs[ae.id]=ae;let ve=this._layers[ae.id]=c.bJ(ae);ve._featureFilter=c.aa(ve.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(let ae of W)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};let Y=c.cC(Object.values(this._layerConfigs),this.keyCache);for(let ae of Y){let ve=ae.map(ze=>this._layers[ze.id]),be=ve[0];if(be.visibility==="none")continue;let qe=be.source||"",we=this.familiesBySource[qe];we||(we=this.familiesBySource[qe]={});let Le=be.sourceLayer||"_geojsonTileLayer",$e=we[Le];$e||($e=we[Le]=[]),$e.push(ve)}}}class v{constructor(V){let W={},Y=[];for(let qe in V){let we=V[qe],Le=W[qe]={};for(let $e in we){let ze=we[+$e];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;let pt={x:0,y:0,w:ze.bitmap.width+2,h:ze.bitmap.height+2};Y.push(pt),Le[$e]={rect:pt,metrics:ze.metrics}}}let{w:ae,h:ve}=c.p(Y),be=new c.q({width:ae||1,height:ve||1});for(let qe in V){let we=V[qe];for(let Le in we){let $e=we[+Le];if(!$e||$e.bitmap.width===0||$e.bitmap.height===0)continue;let ze=W[qe][Le].rect;c.q.copy($e.bitmap,be,{x:0,y:0},{x:ze.x+1,y:ze.y+1},$e.bitmap)}}this.image=be,this.positions=W}}c.cD("GlyphAtlas",v);class b{constructor(V){this.tileID=new c.Z(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId,this.inFlightDependencies=[],this.globalState=V.globalState}parse(V,W,Y,ae,ve){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=V,this.collisionBoxArray=new c.a8;let be=new c.cE(Object.keys(V.layers).sort()),qe=new c.cF(this.tileID,this.promoteId);qe.bucketLayerIDs=[];let we={},Le={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y,subdivisionGranularity:ve},$e=W.familiesBySource[this.source];for(let Qt in $e){let ar=V.layers[Qt];if(!ar)continue;ar.version===1&&c.w(`Vector tile source "${this.source}" layer "${Qt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let mi=be.encode(Qt),Ke=[];for(let un=0;un<ar.length;un++){let Hr=ar.feature(un),Ls=qe.getId(Hr,Qt);Ke.push({feature:Hr,id:Ls,index:un,sourceLayerIndex:mi})}for(let un of $e[Qt]){let Hr=un[0];Hr.source!==this.source&&c.w(`layer.source = ${Hr.source} does not equal this.source = ${this.source}`),Hr.minzoom&&this.zoom<Math.floor(Hr.minzoom)||Hr.maxzoom&&this.zoom>=Hr.maxzoom||Hr.visibility!=="none"&&(q(un,this.zoom,Y,this.globalState),(we[Hr.id]=Hr.createBucket({index:qe.bucketLayerIDs.length,layers:un,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:mi,sourceID:this.source,globalState:this.globalState})).populate(Ke,Le,this.tileID.canonical),qe.bucketLayerIDs.push(un.map(Ls=>Ls.id)))}}let ze=c.bN(Le.glyphDependencies,Qt=>Object.keys(Qt).map(Number));this.inFlightDependencies.forEach(Qt=>Qt==null?void 0:Qt.abort()),this.inFlightDependencies=[];let pt=Promise.resolve({});if(Object.keys(ze).length){let Qt=new AbortController;this.inFlightDependencies.push(Qt),pt=ae.sendAsync({type:"GG",data:{stacks:ze,source:this.source,tileID:this.tileID,type:"glyphs"}},Qt)}let Ee=Object.keys(Le.iconDependencies),kt=Promise.resolve({});if(Ee.length){let Qt=new AbortController;this.inFlightDependencies.push(Qt),kt=ae.sendAsync({type:"GI",data:{icons:Ee,source:this.source,tileID:this.tileID,type:"icons"}},Qt)}let Kt=Object.keys(Le.patternDependencies),yt=Promise.resolve({});if(Kt.length){let Qt=new AbortController;this.inFlightDependencies.push(Qt),yt=ae.sendAsync({type:"GI",data:{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"}},Qt)}let[Nt,Ir,Ai]=yield Promise.all([pt,kt,yt]),qi=new v(Nt),di=new c.cG(Ir,Ai);for(let Qt in we){let ar=we[Qt];ar instanceof c.a9?(q(ar.layers,this.zoom,Y,this.globalState),c.cH({bucket:ar,glyphMap:Nt,glyphPositions:qi.positions,imageMap:Ir,imagePositions:di.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Le.subdivisionGranularity})):ar.hasPattern&&(ar instanceof c.cI||ar instanceof c.cJ||ar instanceof c.cK)&&(q(ar.layers,this.zoom,Y,this.globalState),ar.addFeatures(Le,this.tileID.canonical,di.patternPositions))}return this.status="done",{buckets:Object.values(we).filter(Qt=>!Qt.isEmpty()),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qi.image,imageAtlas:di,glyphMap:this.returnDependencies?Nt:null,iconMap:this.returnDependencies?Ir:null,glyphPositions:this.returnDependencies?qi.positions:null}})}}function q(le,V,W,Y){let ae=new c.F(V);for(let ve of le)ve.setGlobalState(Y),ve.recalculate(ae,W)}class M{constructor(V,W,Y){this.actor=V,this.layerIndex=W,this.availableImages=Y,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(V,W){return c._(this,void 0,void 0,function*(){let Y=yield c.n(V.request,W);try{return{vectorTile:new c.cL(new c.cM(Y.data)),rawData:Y.data,cacheControl:Y.cacheControl,expires:Y.expires}}catch(ae){let ve=new Uint8Array(Y.data),be=`Unable to parse the tile at ${V.request.url}, `;throw be+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ae.message}`,new Error(be)}})}loadTile(V){return c._(this,void 0,void 0,function*(){let W=V.uid,Y=!!(V&&V.request&&V.request.collectResourceTiming)&&new c.cN(V.request),ae=new b(V);this.loading[W]=ae;let ve=new AbortController;ae.abort=ve;try{let be=yield this.loadVectorTile(V,ve);if(delete this.loading[W],!be)return null;let qe=be.rawData,we={};be.expires&&(we.expires=be.expires),be.cacheControl&&(we.cacheControl=be.cacheControl);let Le={};if(Y){let ze=Y.finish();ze&&(Le.resourceTiming=JSON.parse(JSON.stringify(ze)))}ae.vectorTile=be.vectorTile;let $e=ae.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,V.subdivisionGranularity);this.loaded[W]=ae,this.fetching[W]={rawTileData:qe,cacheControl:we,resourceTiming:Le};try{let ze=yield $e;return c.e({rawTileData:qe.slice(0)},ze,we,Le)}finally{delete this.fetching[W]}}catch(be){throw delete this.loading[W],ae.status="done",this.loaded[W]=ae,be}})}reloadTile(V){return c._(this,void 0,void 0,function*(){let W=V.uid;if(!this.loaded||!this.loaded[W])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Y=this.loaded[W];if(Y.showCollisionBoxes=V.showCollisionBoxes,Y.globalState=V.globalState,Y.status==="parsing"){let ae=yield Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,V.subdivisionGranularity),ve;if(this.fetching[W]){let{rawTileData:be,cacheControl:qe,resourceTiming:we}=this.fetching[W];delete this.fetching[W],ve=c.e({rawTileData:be.slice(0)},ae,qe,we)}else ve=ae;return ve}if(Y.status==="done"&&Y.vectorTile)return Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,V.subdivisionGranularity)})}abortTile(V){return c._(this,void 0,void 0,function*(){let W=this.loading,Y=V.uid;W&&W[Y]&&W[Y].abort&&(W[Y].abort.abort(),delete W[Y])})}removeTile(V){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[V.uid]&&delete this.loaded[V.uid]})}}class O{constructor(){this.loaded={}}loadTile(V){return c._(this,void 0,void 0,function*(){let{uid:W,encoding:Y,rawImageData:ae,redFactor:ve,greenFactor:be,blueFactor:qe,baseShift:we}=V,Le=ae.width+2,$e=ae.height+2,ze=c.b(ae)?new c.R({width:Le,height:$e},yield c.cO(ae,-1,-1,Le,$e)):ae,pt=new c.cP(W,ze,Y,ve,be,qe,we);return this.loaded=this.loaded||{},this.loaded[W]=pt,pt})}removeTile(V){let W=this.loaded,Y=V.uid;W&&W[Y]&&delete W[Y]}}var D,U,ne=function(){if(U)return D;function le(W,Y){if(W.length!==0){V(W[0],Y);for(var ae=1;ae<W.length;ae++)V(W[ae],!Y)}}function V(W,Y){for(var ae=0,ve=0,be=0,qe=W.length,we=qe-1;be<qe;we=be++){var Le=(W[be][0]-W[we][0])*(W[we][1]+W[be][1]),$e=ae+Le;ve+=Math.abs(ae)>=Math.abs(Le)?ae-$e+Le:Le-$e+ae,ae=$e}ae+ve>=0!=!!Y&&W.reverse()}return U=1,D=function W(Y,ae){var ve,be=Y&&Y.type;if(be==="FeatureCollection")for(ve=0;ve<Y.features.length;ve++)W(Y.features[ve],ae);else if(be==="GeometryCollection")for(ve=0;ve<Y.geometries.length;ve++)W(Y.geometries[ve],ae);else if(be==="Feature")W(Y.geometry,ae);else if(be==="Polygon")le(Y.coordinates,ae);else if(be==="MultiPolygon")for(ve=0;ve<Y.coordinates.length;ve++)le(Y.coordinates[ve],ae);return Y}}(),ue=c.cQ(ne);class fe extends c.cS{constructor(V,W){super(new c.cM,0,W,[],[]),this.feature=V,this.type=V.type,this.properties=V.tags?V.tags:{},"id"in V&&(typeof V.id=="string"?this.id=parseInt(V.id,10):typeof V.id!="number"||isNaN(V.id)||(this.id=V.id))}loadGeometry(){let V=[],W=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let Y of W){let ae=[];for(let ve of Y)ae.push(new c.P(ve[0],ve[1]));V.push(ae)}return V}}class H extends c.cR{constructor(V,W){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=W?W.version:1,this.extent=W?W.extent:4096,this.length=V.length,this.features=V}feature(V){return new fe(this.features[V],this.extent)}}function J(le,V){V.writeVarintField(15,le.version||1),V.writeStringField(1,le.name||""),V.writeVarintField(5,le.extent||4096);let W={keys:[],values:[],keycache:{},valuecache:{}};for(let ve=0;ve<le.length;ve++)W.feature=le.feature(ve),V.writeMessage(2,re,W);let Y=W.keys;for(let ve of Y)V.writeStringField(3,ve);let ae=W.values;for(let ve of ae)V.writeMessage(4,Ye,ve)}function re(le,V){if(!le.feature)return;let W=le.feature;W.id!==void 0&&V.writeVarintField(1,W.id),V.writeMessage(2,xe,le),V.writeVarintField(3,W.type),V.writeMessage(4,Ne,W)}function xe(le,V){var W;for(let Y in(W=le.feature)==null?void 0:W.properties){let ae=le.feature.properties[Y],ve=le.keycache[Y];if(ae===null)continue;ve===void 0&&(le.keys.push(Y),ve=le.keys.length-1,le.keycache[Y]=ve),V.writeVarint(ve),typeof ae!="string"&&typeof ae!="boolean"&&typeof ae!="number"&&(ae=JSON.stringify(ae));let be=typeof ae+":"+ae,qe=le.valuecache[be];qe===void 0&&(le.values.push(ae),qe=le.values.length-1,le.valuecache[be]=qe),V.writeVarint(qe)}}function Ae(le,V){return(V<<3)+(7&le)}function Ge(le){return le<<1^le>>31}function Ne(le,V){let W=le.loadGeometry(),Y=le.type,ae=0,ve=0;for(let be of W){let qe=1;Y===1&&(qe=be.length),V.writeVarint(Ae(1,qe));let we=Y===3?be.length-1:be.length;for(let Le=0;Le<we;Le++){Le===1&&Y!==1&&V.writeVarint(Ae(2,we-1));let $e=be[Le].x-ae,ze=be[Le].y-ve;V.writeVarint(Ge($e)),V.writeVarint(Ge(ze)),ae+=$e,ve+=ze}le.type===3&&V.writeVarint(Ae(7,1))}}function Ye(le,V){let W=typeof le;W==="string"?V.writeStringField(1,le):W==="boolean"?V.writeBooleanField(7,le):W==="number"&&(le%1!=0?V.writeDoubleField(3,le):le<0?V.writeSVarintField(6,le):V.writeVarintField(5,le))}let ct={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:le=>le},ht=Math.fround||(pr=new Float32Array(1),le=>(pr[0]=+le,pr[0]));var pr;class Lr{constructor(V){this.options=Object.assign(Object.create(ct),V),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(V){let{log:W,minZoom:Y,maxZoom:ae}=this.options;W&&console.time("total time");let ve=`prepare ${V.length} points`;W&&console.time(ve),this.points=V;let be=[];for(let we=0;we<V.length;we++){let Le=V[we];if(!Le.geometry)continue;let[$e,ze]=Le.geometry.coordinates,pt=ht(nr($e)),Ee=ht(Sr(ze));be.push(pt,Ee,1/0,we,-1,1),this.options.reduce&&be.push(0)}let qe=this.trees[ae+1]=this._createTree(be);W&&console.timeEnd(ve);for(let we=ae;we>=Y;we--){let Le=+Date.now();qe=this.trees[we]=this._createTree(this._cluster(qe,we)),W&&console.log("z%d: %d clusters in %dms",we,qe.numItems,+Date.now()-Le)}return W&&console.timeEnd("total time"),this}getClusters(V,W){let Y=((V[0]+180)%360+360)%360-180,ae=Math.max(-90,Math.min(90,V[1])),ve=V[2]===180?180:((V[2]+180)%360+360)%360-180,be=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)Y=-180,ve=180;else if(Y>ve){let ze=this.getClusters([Y,ae,180,be],W),pt=this.getClusters([-180,ae,ve,be],W);return ze.concat(pt)}let qe=this.trees[this._limitZoom(W)],we=qe.range(nr(Y),Sr(be),nr(ve),Sr(ae)),Le=qe.data,$e=[];for(let ze of we){let pt=this.stride*ze;$e.push(Le[pt+5]>1?Pt(Le,pt,this.clusterProps):this.points[Le[pt+3]])}return $e}getChildren(V){let W=this._getOriginId(V),Y=this._getOriginZoom(V),ae="No cluster with the specified id.",ve=this.trees[Y];if(!ve)throw new Error(ae);let be=ve.data;if(W*this.stride>=be.length)throw new Error(ae);let qe=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),we=ve.within(be[W*this.stride],be[W*this.stride+1],qe),Le=[];for(let $e of we){let ze=$e*this.stride;be[ze+4]===V&&Le.push(be[ze+5]>1?Pt(be,ze,this.clusterProps):this.points[be[ze+3]])}if(Le.length===0)throw new Error(ae);return Le}getLeaves(V,W,Y){let ae=[];return this._appendLeaves(ae,V,W=W||10,Y=Y||0,0),ae}getTile(V,W,Y){let ae=this.trees[this._limitZoom(V)],ve=Math.pow(2,V),{extent:be,radius:qe}=this.options,we=qe/be,Le=(Y-we)/ve,$e=(Y+1+we)/ve,ze={features:[]};return this._addTileFeatures(ae.range((W-we)/ve,Le,(W+1+we)/ve,$e),ae.data,W,Y,ve,ze),W===0&&this._addTileFeatures(ae.range(1-we/ve,Le,1,$e),ae.data,ve,Y,ve,ze),W===ve-1&&this._addTileFeatures(ae.range(0,Le,we/ve,$e),ae.data,-1,Y,ve,ze),ze.features.length?ze:null}getClusterExpansionZoom(V){let W=this._getOriginZoom(V)-1;for(;W<=this.options.maxZoom;){let Y=this.getChildren(V);if(W++,Y.length!==1)break;V=Y[0].properties.cluster_id}return W}_appendLeaves(V,W,Y,ae,ve){let be=this.getChildren(W);for(let qe of be){let we=qe.properties;if(we&&we.cluster?ve+we.point_count<=ae?ve+=we.point_count:ve=this._appendLeaves(V,we.cluster_id,Y,ae,ve):ve<ae?ve++:V.push(qe),V.length===Y)break}return ve}_createTree(V){let W=new c.aI(V.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<V.length;Y+=this.stride)W.add(V[Y],V[Y+1]);return W.finish(),W.data=V,W}_addTileFeatures(V,W,Y,ae,ve,be){for(let qe of V){let we=qe*this.stride,Le=W[we+5]>1,$e,ze,pt;if(Le)$e=Et(W,we,this.clusterProps),ze=W[we],pt=W[we+1];else{let Kt=this.points[W[we+3]];$e=Kt.properties;let[yt,Nt]=Kt.geometry.coordinates;ze=nr(yt),pt=Sr(Nt)}let Ee={type:1,geometry:[[Math.round(this.options.extent*(ze*ve-Y)),Math.round(this.options.extent*(pt*ve-ae))]],tags:$e},kt;kt=Le||this.options.generateId?W[we+3]:this.points[W[we+3]].id,kt!==void 0&&(Ee.id=kt),be.features.push(Ee)}}_limitZoom(V){return Math.max(this.options.minZoom,Math.min(Math.floor(+V),this.options.maxZoom+1))}_cluster(V,W){let{radius:Y,extent:ae,reduce:ve,minPoints:be}=this.options,qe=Y/(ae*Math.pow(2,W)),we=V.data,Le=[],$e=this.stride;for(let ze=0;ze<we.length;ze+=$e){if(we[ze+2]<=W)continue;we[ze+2]=W;let pt=we[ze],Ee=we[ze+1],kt=V.within(we[ze],we[ze+1],qe),Kt=we[ze+5],yt=Kt;for(let Nt of kt){let Ir=Nt*$e;we[Ir+2]>W&&(yt+=we[Ir+5])}if(yt>Kt&&yt>=be){let Nt,Ir=pt*Kt,Ai=Ee*Kt,qi=-1,di=(ze/$e<<5)+(W+1)+this.points.length;for(let Qt of kt){let ar=Qt*$e;if(we[ar+2]<=W)continue;we[ar+2]=W;let mi=we[ar+5];Ir+=we[ar]*mi,Ai+=we[ar+1]*mi,we[ar+4]=di,ve&&(Nt||(Nt=this._map(we,ze,!0),qi=this.clusterProps.length,this.clusterProps.push(Nt)),ve(Nt,this._map(we,ar)))}we[ze+4]=di,Le.push(Ir/yt,Ai/yt,1/0,di,-1,yt),ve&&Le.push(qi)}else{for(let Nt=0;Nt<$e;Nt++)Le.push(we[ze+Nt]);if(yt>1)for(let Nt of kt){let Ir=Nt*$e;if(!(we[Ir+2]<=W)){we[Ir+2]=W;for(let Ai=0;Ai<$e;Ai++)Le.push(we[Ir+Ai])}}}}return Le}_getOriginId(V){return V-this.points.length>>5}_getOriginZoom(V){return(V-this.points.length)%32}_map(V,W,Y){if(V[W+5]>1){let be=this.clusterProps[V[W+6]];return Y?Object.assign({},be):be}let ae=this.points[V[W+3]].properties,ve=this.options.map(ae);return Y&&ve===ae?Object.assign({},ve):ve}}function Pt(le,V,W){return{type:"Feature",id:le[V+3],properties:Et(le,V,W),geometry:{type:"Point",coordinates:[(Y=le[V],360*(Y-.5)),ur(le[V+1])]}};var Y}function Et(le,V,W){let Y=le[V+5],ae=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,ve=le[V+6],be=ve===-1?{}:Object.assign({},W[ve]);return Object.assign(be,{cluster:!0,cluster_id:le[V+3],point_count:Y,point_count_abbreviated:ae})}function nr(le){return le/360+.5}function Sr(le){let V=Math.sin(le*Math.PI/180),W=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return W<0?0:W>1?1:W}function ur(le){let V=(180-360*le)*Math.PI/180;return 360*Math.atan(Math.exp(V))/Math.PI-90}function Dt(le,V,W,Y){let ae=Y,ve=V+(W-V>>1),be,qe=W-V,we=le[V],Le=le[V+1],$e=le[W],ze=le[W+1];for(let pt=V+3;pt<W;pt+=3){let Ee=Fr(le[pt],le[pt+1],we,Le,$e,ze);if(Ee>ae)be=pt,ae=Ee;else if(Ee===ae){let kt=Math.abs(pt-ve);kt<qe&&(be=pt,qe=kt)}}ae>Y&&(be-V>3&&Dt(le,V,be,Y),le[be+2]=ae,W-be>3&&Dt(le,be,W,Y))}function Fr(le,V,W,Y,ae,ve){let be=ae-W,qe=ve-Y;if(be!==0||qe!==0){let we=((le-W)*be+(V-Y)*qe)/(be*be+qe*qe);we>1?(W=ae,Y=ve):we>0&&(W+=be*we,Y+=qe*we)}return be=le-W,qe=V-Y,be*be+qe*qe}function zr(le,V,W,Y){let ae={id:le==null?null:le,type:V,geometry:W,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(V==="Point"||V==="MultiPoint"||V==="LineString")Bn(ae,W);else if(V==="Polygon")Bn(ae,W[0]);else if(V==="MultiLineString")for(let ve of W)Bn(ae,ve);else if(V==="MultiPolygon")for(let ve of W)Bn(ae,ve[0]);return ae}function Bn(le,V){for(let W=0;W<V.length;W+=3)le.minX=Math.min(le.minX,V[W]),le.minY=Math.min(le.minY,V[W+1]),le.maxX=Math.max(le.maxX,V[W]),le.maxY=Math.max(le.maxY,V[W+1])}function Kr(le,V,W,Y){if(!V.geometry)return;let ae=V.geometry.coordinates;if(ae&&ae.length===0)return;let ve=V.geometry.type,be=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),qe=[],we=V.id;if(W.promoteId?we=V.properties[W.promoteId]:W.generateId&&(we=Y||0),ve==="Point")Di(ae,qe);else if(ve==="MultiPoint")for(let Le of ae)Di(Le,qe);else if(ve==="LineString")jn(ae,qe,be,!1);else if(ve==="MultiLineString"){if(W.lineMetrics){for(let Le of ae)qe=[],jn(Le,qe,be,!1),le.push(zr(we,"LineString",qe,V.properties));return}hi(ae,qe,be,!1)}else if(ve==="Polygon")hi(ae,qe,be,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(let Le of V.geometry.geometries)Kr(le,{id:we,geometry:Le,properties:V.properties},W,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Le of ae){let $e=[];hi(Le,$e,be,!0),qe.push($e)}}le.push(zr(we,ve,qe,V.properties))}function Di(le,V){V.push(qa(le[0]),Un(le[1]),0)}function jn(le,V,W,Y){let ae,ve,be=0;for(let we=0;we<le.length;we++){let Le=qa(le[we][0]),$e=Un(le[we][1]);V.push(Le,$e,0),we>0&&(be+=Y?(ae*$e-Le*ve)/2:Math.sqrt(Math.pow(Le-ae,2)+Math.pow($e-ve,2))),ae=Le,ve=$e}let qe=V.length-3;V[2]=1,Dt(V,0,qe,W),V[qe+2]=1,V.size=Math.abs(be),V.start=0,V.end=V.size}function hi(le,V,W,Y){for(let ae=0;ae<le.length;ae++){let ve=[];jn(le[ae],ve,W,Y),V.push(ve)}}function qa(le){return le/360+.5}function Un(le){let V=Math.sin(le*Math.PI/180),W=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return W<0?0:W>1?1:W}function Vn(le,V,W,Y,ae,ve,be,qe){if(Y/=V,ve>=(W/=V)&&be<Y)return le;if(be<W||ve>=Y)return null;let we=[];for(let Le of le){let $e=Le.geometry,ze=Le.type,pt=ae===0?Le.minX:Le.minY,Ee=ae===0?Le.maxX:Le.maxY;if(pt>=W&&Ee<Y){we.push(Le);continue}if(Ee<W||pt>=Y)continue;let kt=[];if(ze==="Point"||ze==="MultiPoint")ks($e,kt,W,Y,ae);else if(ze==="LineString")wo($e,kt,W,Y,ae,!1,qe.lineMetrics);else if(ze==="MultiLineString")Rr($e,kt,W,Y,ae,!1);else if(ze==="Polygon")Rr($e,kt,W,Y,ae,!0);else if(ze==="MultiPolygon")for(let Kt of $e){let yt=[];Rr(Kt,yt,W,Y,ae,!0),yt.length&&kt.push(yt)}if(kt.length){if(qe.lineMetrics&&ze==="LineString"){for(let Kt of kt)we.push(zr(Le.id,ze,Kt,Le.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(kt.length===1?(ze="LineString",kt=kt[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=kt.length===3?"Point":"MultiPoint"),we.push(zr(Le.id,ze,kt,Le.tags))}}return we.length?we:null}function ks(le,V,W,Y,ae){for(let ve=0;ve<le.length;ve+=3){let be=le[ve+ae];be>=W&&be<=Y&&jr(V,le[ve],le[ve+1],le[ve+2])}}function wo(le,V,W,Y,ae,ve,be){let qe=ln(le),we=ae===0?sa:la,Le,$e,ze=le.start;for(let yt=0;yt<le.length-3;yt+=3){let Nt=le[yt],Ir=le[yt+1],Ai=le[yt+2],qi=le[yt+3],di=le[yt+4],Qt=ae===0?Nt:Ir,ar=ae===0?qi:di,mi=!1;be&&(Le=Math.sqrt(Math.pow(Nt-qi,2)+Math.pow(Ir-di,2))),Qt<W?ar>W&&($e=we(qe,Nt,Ir,qi,di,W),be&&(qe.start=ze+Le*$e)):Qt>Y?ar<Y&&($e=we(qe,Nt,Ir,qi,di,Y),be&&(qe.start=ze+Le*$e)):jr(qe,Nt,Ir,Ai),ar<W&&Qt>=W&&($e=we(qe,Nt,Ir,qi,di,W),mi=!0),ar>Y&&Qt<=Y&&($e=we(qe,Nt,Ir,qi,di,Y),mi=!0),!ve&&mi&&(be&&(qe.end=ze+Le*$e),V.push(qe),qe=ln(le)),be&&(ze+=Le)}let pt=le.length-3,Ee=le[pt],kt=le[pt+1],Kt=ae===0?Ee:kt;Kt>=W&&Kt<=Y&&jr(qe,Ee,kt,le[pt+2]),pt=qe.length-3,ve&&pt>=3&&(qe[pt]!==qe[0]||qe[pt+1]!==qe[1])&&jr(qe,qe[0],qe[1],qe[2]),qe.length&&V.push(qe)}function ln(le){let V=[];return V.size=le.size,V.start=le.start,V.end=le.end,V}function Rr(le,V,W,Y,ae,ve){for(let be of le)wo(be,V,W,Y,ae,ve,!1)}function jr(le,V,W,Y){le.push(V,W,Y)}function sa(le,V,W,Y,ae,ve){let be=(ve-V)/(Y-V);return jr(le,ve,W+(ae-W)*be,1),be}function la(le,V,W,Y,ae,ve){let be=(ve-W)/(ae-W);return jr(le,V+(Y-V)*be,ve,1),be}function es(le,V){let W=[];for(let Y=0;Y<le.length;Y++){let ae=le[Y],ve=ae.type,be;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")be=ua(ae.geometry,V);else if(ve==="MultiLineString"||ve==="Polygon"){be=[];for(let qe of ae.geometry)be.push(ua(qe,V))}else if(ve==="MultiPolygon"){be=[];for(let qe of ae.geometry){let we=[];for(let Le of qe)we.push(ua(Le,V));be.push(we)}}W.push(zr(ae.id,ve,be,ae.tags))}return W}function ua(le,V){let W=[];W.size=le.size,le.start!==void 0&&(W.start=le.start,W.end=le.end);for(let Y=0;Y<le.length;Y+=3)W.push(le[Y]+V,le[Y+1],le[Y+2]);return W}function ca(le,V){if(le.transformed)return le;let W=1<<le.z,Y=le.x,ae=le.y;for(let ve of le.features){let be=ve.geometry,qe=ve.type;if(ve.geometry=[],qe===1)for(let we=0;we<be.length;we+=2)ve.geometry.push(Ds(be[we],be[we+1],V,W,Y,ae));else for(let we=0;we<be.length;we++){let Le=[];for(let $e=0;$e<be[we].length;$e+=2)Le.push(Ds(be[we][$e],be[we][$e+1],V,W,Y,ae));ve.geometry.push(Le)}}return le.transformed=!0,le}function Ds(le,V,W,Y,ae,ve){return[Math.round(W*(le*Y-ae)),Math.round(W*(V*Y-ve))]}function So(le,V,W,Y,ae){let ve=V===ae.maxZoom?0:ae.tolerance/((1<<V)*ae.extent),be={features:[],numPoints:0,numSimplified:0,numFeatures:le.length,source:null,x:W,y:Y,z:V,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let qe of le)ts(be,qe,ve,ae);return be}function ts(le,V,W,Y){let ae=V.geometry,ve=V.type,be=[];if(le.minX=Math.min(le.minX,V.minX),le.minY=Math.min(le.minY,V.minY),le.maxX=Math.max(le.maxX,V.maxX),le.maxY=Math.max(le.maxY,V.maxY),ve==="Point"||ve==="MultiPoint")for(let qe=0;qe<ae.length;qe+=3)be.push(ae[qe],ae[qe+1]),le.numPoints++,le.numSimplified++;else if(ve==="LineString")Ya(be,ae,le,W,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let qe=0;qe<ae.length;qe++)Ya(be,ae[qe],le,W,ve==="Polygon",qe===0);else if(ve==="MultiPolygon")for(let qe=0;qe<ae.length;qe++){let we=ae[qe];for(let Le=0;Le<we.length;Le++)Ya(be,we[Le],le,W,!0,Le===0)}if(be.length){let qe=V.tags||null;if(ve==="LineString"&&Y.lineMetrics){qe={};for(let Le in V.tags)qe[Le]=V.tags[Le];qe.mapbox_clip_start=ae.start/ae.size,qe.mapbox_clip_end=ae.end/ae.size}let we={geometry:be,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:qe};V.id!==null&&(we.id=V.id),le.features.push(we)}}function Ya(le,V,W,Y,ae,ve){let be=Y*Y;if(Y>0&&V.size<(ae?be:Y))return void(W.numPoints+=V.length/3);let qe=[];for(let we=0;we<V.length;we+=3)(Y===0||V[we+2]>be)&&(W.numSimplified++,qe.push(V[we],V[we+1])),W.numPoints++;ae&&function(we,Le){let $e=0;for(let ze=0,pt=we.length,Ee=pt-2;ze<pt;Ee=ze,ze+=2)$e+=(we[ze]-we[Ee])*(we[ze+1]+we[Ee+1]);if($e>0===Le)for(let ze=0,pt=we.length;ze<pt/2;ze+=2){let Ee=we[ze],kt=we[ze+1];we[ze]=we[pt-2-ze],we[ze+1]=we[pt-1-ze],we[pt-2-ze]=Ee,we[pt-1-ze]=kt}}(qe,ve),le.push(qe)}let _e={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ke{constructor(V,W){let Y=(W=this.options=function(ve,be){for(let qe in be)ve[qe]=be[qe];return ve}(Object.create(_e),W)).debug;if(Y&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");let ae=function(ve,be){let qe=[];if(ve.type==="FeatureCollection")for(let we=0;we<ve.features.length;we++)Kr(qe,ve.features[we],be,we);else Kr(qe,ve.type==="Feature"?ve:{geometry:ve},be);return qe}(V,W);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ae=function(ve,be){let qe=be.buffer/be.extent,we=ve,Le=Vn(ve,1,-1-qe,qe,0,-1,2,be),$e=Vn(ve,1,1-qe,2+qe,0,-1,2,be);return(Le||$e)&&(we=Vn(ve,1,-qe,1+qe,0,-1,2,be)||[],Le&&(we=es(Le,1).concat(we)),$e&&(we=we.concat(es($e,-1)))),we}(ae,W),ae.length&&this.splitTile(ae,0,0,0),Y&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(V,W,Y,ae,ve,be,qe){let we=[V,W,Y,ae],Le=this.options,$e=Le.debug;for(;we.length;){ae=we.pop(),Y=we.pop(),W=we.pop(),V=we.pop();let ze=1<<W,pt=Be(W,Y,ae),Ee=this.tiles[pt];if(!Ee&&($e>1&&console.time("creation"),Ee=this.tiles[pt]=So(V,W,Y,ae,Le),this.tileCoords.push({z:W,x:Y,y:ae}),$e)){$e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,Y,ae,Ee.numFeatures,Ee.numPoints,Ee.numSimplified),console.timeEnd("creation"));let mi=`z${W}`;this.stats[mi]=(this.stats[mi]||0)+1,this.total++}if(Ee.source=V,ve==null){if(W===Le.indexMaxZoom||Ee.numPoints<=Le.indexMaxPoints)continue}else{if(W===Le.maxZoom||W===ve)continue;if(ve!=null){let mi=ve-W;if(Y!==be>>mi||ae!==qe>>mi)continue}}if(Ee.source=null,V.length===0)continue;$e>1&&console.time("clipping");let kt=.5*Le.buffer/Le.extent,Kt=.5-kt,yt=.5+kt,Nt=1+kt,Ir=null,Ai=null,qi=null,di=null,Qt=Vn(V,ze,Y-kt,Y+yt,0,Ee.minX,Ee.maxX,Le),ar=Vn(V,ze,Y+Kt,Y+Nt,0,Ee.minX,Ee.maxX,Le);V=null,Qt&&(Ir=Vn(Qt,ze,ae-kt,ae+yt,1,Ee.minY,Ee.maxY,Le),Ai=Vn(Qt,ze,ae+Kt,ae+Nt,1,Ee.minY,Ee.maxY,Le),Qt=null),ar&&(qi=Vn(ar,ze,ae-kt,ae+yt,1,Ee.minY,Ee.maxY,Le),di=Vn(ar,ze,ae+Kt,ae+Nt,1,Ee.minY,Ee.maxY,Le),ar=null),$e>1&&console.timeEnd("clipping"),we.push(Ir||[],W+1,2*Y,2*ae),we.push(Ai||[],W+1,2*Y,2*ae+1),we.push(qi||[],W+1,2*Y+1,2*ae),we.push(di||[],W+1,2*Y+1,2*ae+1)}}getTile(V,W,Y){V=+V,W=+W,Y=+Y;let ae=this.options,{extent:ve,debug:be}=ae;if(V<0||V>24)return null;let qe=1<<V,we=Be(V,W=W+qe&qe-1,Y);if(this.tiles[we])return ca(this.tiles[we],ve);be>1&&console.log("drilling down to z%d-%d-%d",V,W,Y);let Le,$e=V,ze=W,pt=Y;for(;!Le&&$e>0;)$e--,ze>>=1,pt>>=1,Le=this.tiles[Be($e,ze,pt)];return Le&&Le.source?(be>1&&(console.log("found parent tile z%d-%d-%d",$e,ze,pt),console.time("drilling down")),this.splitTile(Le.source,$e,ze,pt,V,W,Y),be>1&&console.timeEnd("drilling down"),this.tiles[we]?ca(this.tiles[we],ve):null):null}}function Be(le,V,W){return 32*((1<<le)*W+V)+le}class vt extends M{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(V,W){return c._(this,void 0,void 0,function*(){let Y=V.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ae=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!ae)return null;let ve=new H(ae.features,{version:2,extent:c.$}),be=function(qe){let we=new c.cM;return function(Le,$e){for(let ze in Le.layers)$e.writeMessage(3,J,Le.layers[ze])}(qe,we),we.finish()}(ve);return be.byteOffset===0&&be.byteLength===be.buffer.byteLength||(be=new Uint8Array(be)),{vectorTile:ve,rawData:be.buffer}})}loadData(V){return c._(this,void 0,void 0,function*(){var W;(W=this._pendingRequest)===null||W===void 0||W.abort();let Y=!!(V&&V.request&&V.request.collectResourceTiming)&&new c.cN(V.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(V,this._pendingRequest);let ae=yield this._pendingData;this._geoJSONIndex=V.cluster?new Lr(function({superclusterOptions:be,clusterProperties:qe}){if(!qe||!be)return be;let we={},Le={},$e={accumulated:null,zoom:0},ze={properties:null},pt=Object.keys(qe);for(let Ee of pt){let[kt,Kt]=qe[Ee],yt=c.cT(Kt),Nt=c.cT(typeof kt=="string"?[kt,["accumulated"],["get",Ee]]:kt);we[Ee]=yt.value,Le[Ee]=Nt.value}return be.map=Ee=>{ze.properties=Ee;let kt={};for(let Kt of pt)kt[Kt]=we[Kt].evaluate($e,ze);return kt},be.reduce=(Ee,kt)=>{ze.properties=kt;for(let Kt of pt)$e.accumulated=Ee[Kt],Ee[Kt]=Le[Kt].evaluate($e,ze)},be}(V)).load(ae.features):function(be,qe){return new ke(be,qe)}(ae,V.geojsonVtOptions),this.loaded={};let ve={data:ae};if(Y){let be=Y.finish();be&&(ve.resourceTiming={},ve.resourceTiming[V.source]=JSON.parse(JSON.stringify(be)))}return ve}catch(ae){if(delete this._pendingRequest,c.cy(ae))return{abandoned:!0};throw ae}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(V){let W=this.loaded;return W&&W[V.uid]?super.reloadTile(V):this.loadTile(V)}loadAndProcessGeoJSON(V,W){return c._(this,void 0,void 0,function*(){let Y=yield this.loadGeoJSON(V,W);if(delete this._pendingRequest,typeof Y!="object")throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`);if(ue(Y,!0),V.filter){let ae=c.cT(V.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map(be=>`${be.key}: ${be.message}`).join(", "));Y={type:"FeatureCollection",features:Y.features.filter(be=>ae.value.evaluate({zoom:0},be))}}return Y})}loadGeoJSON(V,W){return c._(this,void 0,void 0,function*(){let{promoteId:Y}=V;if(V.request){let ae=yield c.j(V.request,W);return this._dataUpdateable=c.cV(ae.data,Y)?c.cU(ae.data,Y):void 0,ae.data}if(typeof V.data=="string")try{let ae=JSON.parse(V.data);return this._dataUpdateable=c.cV(ae,Y)?c.cU(ae,Y):void 0,ae}catch(ae){throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`)}if(!V.dataDiff)throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${V.source}`);return c.cW(this._dataUpdateable,V.dataDiff,Y),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(V){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(V){return this._geoJSONIndex.getClusterExpansionZoom(V.clusterId)}getClusterChildren(V){return this._geoJSONIndex.getChildren(V.clusterId)}getClusterLeaves(V){return this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset)}}class ut{constructor(V){this.self=V,this.actor=new c.J(V),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(W,Y)=>{if(this.externalWorkerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.externalWorkerSourceTypes[W]=Y},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=W=>{c.cX.setMethods(W)},this.actor.registerMessageHandler("LDT",(W,Y)=>this._getDEMWorkerSource(W,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RDT",(W,Y)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(W,Y.source).removeTile(Y)})),this.actor.registerMessageHandler("GCEZ",(W,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Y.type,Y.source).getClusterExpansionZoom(Y)})),this.actor.registerMessageHandler("GCC",(W,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Y.type,Y.source).getClusterChildren(Y)})),this.actor.registerMessageHandler("GCL",(W,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Y.type,Y.source).getClusterLeaves(Y)})),this.actor.registerMessageHandler("LD",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).loadData(Y)),this.actor.registerMessageHandler("GD",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).getData()),this.actor.registerMessageHandler("LT",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RT",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).reloadTile(Y)),this.actor.registerMessageHandler("AT",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).abortTile(Y)),this.actor.registerMessageHandler("RMT",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).removeTile(Y)),this.actor.registerMessageHandler("RS",(W,Y)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[W]||!this.workerSources[W][Y.type]||!this.workerSources[W][Y.type][Y.source])return;let ae=this.workerSources[W][Y.type][Y.source];delete this.workerSources[W][Y.type][Y.source],ae.removeSource!==void 0&&ae.removeSource(Y)})),this.actor.registerMessageHandler("RM",W=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W]})),this.actor.registerMessageHandler("SR",(W,Y)=>c._(this,void 0,void 0,function*(){this.referrer=Y})),this.actor.registerMessageHandler("SRPS",(W,Y)=>this._syncRTLPluginState(W,Y)),this.actor.registerMessageHandler("IS",(W,Y)=>c._(this,void 0,void 0,function*(){this.self.importScripts(Y)})),this.actor.registerMessageHandler("SI",(W,Y)=>this._setImages(W,Y)),this.actor.registerMessageHandler("UL",(W,Y)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(W).update(Y.layers,Y.removedIds)})),this.actor.registerMessageHandler("SL",(W,Y)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(W).replace(Y)}))}_setImages(V,W){return c._(this,void 0,void 0,function*(){this.availableImages[V]=W;for(let Y in this.workerSources[V]){let ae=this.workerSources[V][Y];for(let ve in ae)ae[ve].availableImages=W}})}_syncRTLPluginState(V,W){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(W,this.self.importScripts)})}_getAvailableImages(V){let W=this.availableImages[V];return W||(W=[]),W}_getLayerIndex(V){let W=this.layerIndexes[V];return W||(W=this.layerIndexes[V]=new a),W}_getWorkerSource(V,W,Y){if(this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][W]||(this.workerSources[V][W]={}),!this.workerSources[V][W][Y]){let ae={sendAsync:(ve,be)=>(ve.targetMapId=V,this.actor.sendAsync(ve,be))};switch(W){case"vector":this.workerSources[V][W][Y]=new M(ae,this._getLayerIndex(V),this._getAvailableImages(V));break;case"geojson":this.workerSources[V][W][Y]=new vt(ae,this._getLayerIndex(V),this._getAvailableImages(V));break;default:this.workerSources[V][W][Y]=new this.externalWorkerSourceTypes[W](ae,this._getLayerIndex(V),this._getAvailableImages(V))}}return this.workerSources[V][W][Y]}_getDEMWorkerSource(V,W){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][W]||(this.demWorkerSources[V][W]=new O),this.demWorkerSources[V][W]}}return c.i(self)&&(self.worker=new ut(self)),ut}),i("index",["exports","./shared"],function(c,a){"use strict";var v="5.7.1";function b(){var g=new a.A(4);return a.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}let q,M,O={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(g,r,u){let d=requestAnimationFrame(y=>{m(),r(y)}),{unsubscribe:m}=a.s(g.signal,"abort",()=>{m(),cancelAnimationFrame(d),u(a.c())},!1)},frameAsync(g){return new Promise((r,u)=>{this.frame(g,r,u)})},getImageData(g,r=0){return this.getImageCanvasContext(g).getImageData(-r,-r,g.width+2*r,g.height+2*r)},getImageCanvasContext(g){let r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=g.width,r.height=g.height,u.drawImage(g,0,0,g.width,g.height),u},resolveURL:g=>(q||(q=document.createElement("a")),q.href=g,q.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class D{static testProp(r){if(!D.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in D.docStyle)return r[u];return r[0]}static create(r,u,d){let m=window.document.createElement(r);return u!==void 0&&(m.className=u),d&&d.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){D.docStyle&&D.selectProp&&(D.userSelect=D.docStyle[D.selectProp],D.docStyle[D.selectProp]="none")}static enableDrag(){D.docStyle&&D.selectProp&&(D.docStyle[D.selectProp]=D.userSelect)}static setTransform(r,u){r.style[D.transformProp]=u}static addEventListener(r,u,d,m={}){r.addEventListener(u,d,"passive"in m?m:m.capture)}static removeEventListener(r,u,d,m={}){r.removeEventListener(u,d,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",D.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",D.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",D.suppressClickInternal,!0)},0)}static getScale(r){let u=r.getBoundingClientRect();return{x:u.width/r.offsetWidth||1,y:u.height/r.offsetHeight||1,boundingClientRect:u}}static getPoint(r,u,d){let m=u.boundingClientRect;return new a.P((d.clientX-m.left)/u.x-r.clientLeft,(d.clientY-m.top)/u.y-r.clientTop)}static mousePos(r,u){let d=D.getScale(r);return D.getPoint(r,d,u)}static touchPos(r,u){let d=[],m=D.getScale(r);for(let y=0;y<u.length;y++)d.push(D.getPoint(r,m,u[y]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){let u=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),d=u.querySelectorAll("script");for(let m of d)m.remove();return D.clean(u),u.innerHTML}static isPossiblyDangerous(r,u){let d=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!d.includes("javascript:")&&!d.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){let u=r.children;for(let d of u)D.removeAttributes(d),D.clean(d)}static removeAttributes(r){for(let{name:u,value:d}of r.attributes)D.isPossiblyDangerous(u,d)&&r.removeAttribute(u)}}D.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,D.selectProp=D.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),D.transformProp=D.testProp(["transform","WebkitTransform"]);let U={supported:!1,testSupport:function(g){!fe&&ue&&(H?J(g):ne=g)}},ne,ue,fe=!1,H=!1;function J(g){let r=g.createTexture();g.bindTexture(g.TEXTURE_2D,r);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,ue),g.isContextLost())return;U.supported=!0}catch(u){}g.deleteTexture(r),fe=!0}var re;typeof document!="undefined"&&(ue=document.createElement("img"),ue.onload=()=>{ne&&J(ne),ne=null,H=!0},ue.onerror=()=>{fe=!0,ne=null},ue.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let r,u,d,m;g.resetRequestQueue=()=>{r=[],u=0,d=0,m={}},g.addThrottleControl=P=>{let k=d++;return m[k]=P,k},g.removeThrottleControl=P=>{delete m[P],w()},g.getImage=(P,k,L=!0)=>new Promise((N,z)=>{U.supported&&(P.headers||(P.headers={}),P.headers.accept="image/webp,*/*"),a.e(P,{type:"image"}),r.push({abortController:k,requestParameters:P,supportImageRefresh:L,state:"queued",onError:j=>{z(j)},onSuccess:j=>{N(j)}}),w()});let y=P=>a._(this,void 0,void 0,function*(){P.state="running";let{requestParameters:k,supportImageRefresh:L,onError:N,onSuccess:z,abortController:j}=P,Z=L===!1&&!a.i(self)&&!a.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((ie,se)=>ie&&se==="accept",!0));u++;let te=Z?A(k,j):a.m(k,j);try{let ie=yield te;delete P.abortController,P.state="completed",ie.data instanceof HTMLImageElement||a.b(ie.data)?z(ie):ie.data&&z({data:yield(ee=ie.data,typeof createImageBitmap=="function"?a.f(ee):a.h(ee)),cacheControl:ie.cacheControl,expires:ie.expires})}catch(ie){delete P.abortController,N(ie)}finally{u--,w()}var ee}),w=()=>{let P=(()=>{for(let k of Object.keys(m))if(m[k]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=u;k<P&&r.length>0;k++){let L=r.shift();L.abortController.signal.aborted?k--:y(L)}},A=(P,k)=>new Promise((L,N)=>{let z=new Image,j=P.url,Z=P.credentials;Z&&Z==="include"?z.crossOrigin="use-credentials":(Z&&Z==="same-origin"||!a.d(j))&&(z.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{z.src="",N(a.c())}),z.fetchPriority="high",z.onload=()=>{z.onerror=z.onload=null,L({data:z})},z.onerror=()=>{z.onerror=z.onload=null,k.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},z.src=j})}(re||(re={})),re.resetRequestQueue();class xe{constructor(r){this._transformRequestFn=r!=null?r:null}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function Ae(g){let r=[];if(typeof g=="string")r.push({id:"default",url:g});else if(g&&g.length>0){let u=[];for(let{id:d,url:m}of g){let y=`${d}${m}`;u.indexOf(y)===-1&&(u.push(y),r.push({id:d,url:m}))}}return r}function Ge(g,r,u){try{let d=new URL(g);return d.pathname+=`${r}${u}`,d.toString()}catch(d){throw new Error(`Invalid sprite URL "${g}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Ne(g){let{userImage:r}=g;return!!(r&&r.render&&r.render())&&(g.data.replace(new Uint8Array(r.data.buffer)),!0)}class Ye extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(let{ids:u,promiseResolve:d}of this.requestors)d(this._getImagesForIds(u));this.requestors=[]}}getImage(r){let u=this.images[r];if(u&&!u.data&&u.spriteData){let d=u.spriteData;u.data=new a.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let d=!0,m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,u){if(!r)return!0;let d=0;for(let m of r){if(m[0]<d||m[1]<m[0]||u<m[1])return!1;d=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;let d=u.spriteData,m=d&&d.width||u.data.width,y=d&&d.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||y<r[1]||r[2]<0||m<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,d=!0){let m=this.getImage(r);if(d&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){let u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((u,d)=>{let m=!0;if(!this.isLoaded())for(let y of r)this.images[y]||(m=!1);this.isLoaded()||m?u(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:u})})}_getImagesForIds(r){let u={};for(let d of r){let m=this.getImage(d);m||(this.fire(new a.l("styleimagemissing",{id:d})),m=this.getImage(d)),m?u[d]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:a.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){let{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){let u=this.patterns[r],d=this.getImage(r);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{let m={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new a.I(m,d);this.patterns[r]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){let u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){let r=[];for(let y in this.patterns)r.push(this.patterns[y].bin);let{w:u,h:d}=a.p(r),m=this.atlasImage;m.resize({width:u||1,height:d||1});for(let y in this.patterns){let{bin:w}=this.patterns[y],A=w.x+1,P=w.y+1,k=this.getImage(y).data,L=k.width,N=k.height;a.R.copy(k,m,{x:0,y:0},{x:A,y:P},{width:L,height:N}),a.R.copy(k,m,{x:0,y:N-1},{x:A,y:P-1},{width:L,height:1}),a.R.copy(k,m,{x:0,y:0},{x:A,y:P+N},{width:L,height:1}),a.R.copy(k,m,{x:L-1,y:0},{x:A-1,y:P},{width:1,height:N}),a.R.copy(k,m,{x:0,y:0},{x:A+L,y:P},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(let u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;let d=this.getImage(u);d||a.w(`Image with ID: "${u}" was not found`),Ne(d)&&this.updateImage(u,d)}}}let ct=1e20;function ht(g,r,u,d,m,y,w,A,P){for(let k=r;k<r+d;k++)pr(g,u*y+k,y,m,w,A,P);for(let k=u;k<u+m;k++)pr(g,k*y+r,1,d,w,A,P)}function pr(g,r,u,d,m,y,w){y[0]=0,w[0]=-ct,w[1]=ct,m[0]=g[r];for(let A=1,P=0,k=0;A<d;A++){m[A]=g[r+A*u];let L=A*A;do{let N=y[P];k=(m[A]-m[N]+L-N*N)/(A-N)/2}while(k<=w[P]&&--P>-1);P++,y[P]=A,w[P]=k,w[P+1]=ct}for(let A=0,P=0;A<d;A++){for(;w[P+1]<A;)P++;let k=y[P],L=A-k;g[r+A*u]=m[k]+L*L}}class Lr{constructor(r,u,d){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={},this.lang=d}setURL(r){this.url=r}getGlyphs(r){return a._(this,void 0,void 0,function*(){let u=[];for(let y in r)for(let w of r[y])u.push(this._getAndCacheGlyphsPromise(y,w));let d=yield Promise.all(u),m={};for(let{stack:y,id:w,glyph:A}of d)m[y]||(m[y]={}),m[y][w]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return m})}_getAndCacheGlyphsPromise(r,u){return a._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=d.glyphs[u];if(m!==void 0)return{stack:r,id:u,glyph:m};if(m=this._tinySDF(d,r,u),m)return d.glyphs[u]=m,{stack:r,id:u,glyph:m};let y=Math.floor(u/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:r,id:u,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){let A=Lr.loadGlyphRange(r,y,this.url,this.requestManager);d.requests[y]=A}let w=yield d.requests[y];for(let A in w)this._doesCharSupportLocalGlyph(+A)||(d.glyphs[+A]=w[+A]);return d.ranges[y]=!0,{stack:r,id:u,glyph:w[u]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||a.u["CJK Unified Ideographs"](r)||a.u["Hangul Syllables"](r)||a.u.Hiragana(r)||a.u.Katakana(r)||a.u["CJK Symbols and Punctuation"](r)||a.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,u,d){let m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(d))return;let y=r.tinySDF;if(!y){let A="400";/bold/i.test(u)?A="900":/medium/i.test(u)?A="500":/light/i.test(u)&&(A="200"),y=r.tinySDF=new Lr.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:m,fontWeight:A})}let w=y.draw(String.fromCharCode(d));return{id:d,bitmap:new a.q({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Lr.loadGlyphRange=function(g,r,u,d){return a._(this,void 0,void 0,function*(){let m=256*r,y=m+255,w=d.transformRequest(u.replace("{fontstack}",g).replace("{range}",`${m}-${y}`),"Glyphs"),A=yield a.n(w,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${y}`);let P={};for(let k of a.o(A.data))P[k.id]=k;return P})},Lr.TinySDF=class{constructor({fontSize:g=24,buffer:r=3,radius:u=8,cutoff:d=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:w="normal",lang:A=null}={}){this.buffer=r,this.cutoff=d,this.radius=u,this.lang=A;let P=this.size=g+4*r,k=this._createCanvas(P),L=this.ctx=k.getContext("2d",{willReadFrequently:!0});L.font=`${w} ${y} ${g}px ${m}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(g){let r=document.createElement("canvas");return r.width=r.height=g,r}draw(g){let{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(g),w=Math.ceil(u),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),P=Math.min(this.size-this.buffer,w+Math.ceil(d)),k=A+2*this.buffer,L=P+2*this.buffer,N=Math.max(k*L,0),z=new Uint8ClampedArray(N),j={data:z,width:k,height:L,glyphWidth:A,glyphHeight:P,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(A===0||P===0)return j;let{ctx:Z,buffer:te,gridInner:ee,gridOuter:ie}=this;this.lang&&(Z.lang=this.lang),Z.clearRect(te,te,A,P),Z.fillText(g,te,te+w);let se=Z.getImageData(te,te,A,P);ie.fill(ct,0,N),ee.fill(0,0,N);for(let de=0;de<P;de++)for(let ce=0;ce<A;ce++){let me=se.data[4*(de*A+ce)+3]/255;if(me===0)continue;let ye=(de+te)*k+ce+te;if(me===1)ie[ye]=0,ee[ye]=ct;else{let he=.5-me;ie[ye]=he>0?he*he:0,ee[ye]=he<0?he*he:0}}ht(ie,0,0,k,L,k,this.f,this.v,this.z),ht(ee,te,te,A,P,k,this.f,this.v,this.z);for(let de=0;de<N;de++){let ce=Math.sqrt(ie[de])-Math.sqrt(ee[de]);z[de]=Math.round(255-255*(ce/this.radius+this.cutoff))}return j}};class Pt{constructor(){this.specification=a.v.light.position}possiblyEvaluate(r,u){return a.B(r.expression.evaluate(u))}interpolate(r,u,d){return{x:a.C.number(r.x,u.x,d),y:a.C.number(r.y,u.y,d),z:a.C.number(r.z,u.z,d)}}}let Et;class nr extends a.E{constructor(r){super(),Et=Et||new a.r({anchor:new a.D(a.v.light.anchor),position:new Pt,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(Et),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(a.x,r,u))for(let d in r){let m=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,d){return(!d||d.validate!==!1)&&a.y(this,r.call(a.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}let Sr=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class ur extends a.E{constructor(r){super(),this._transitionable=new a.t(Sr),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(r,u={}){if(!this._validate(a.G,r,u)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let d in r){let m=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,d={}){return(d==null?void 0:d.validate)!==!1&&a.y(this,r.call(a.z,a.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Dt{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){let d=r.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,u)),this.dashEntry[d]}getDashRanges(r,u,d){let m=[],y=r.length%2==1?-r[r.length-1]*d:0,w=r[0]*d,A=!0;m.push({left:y,right:w,isDash:A,zeroLength:r[0]===0});let P=r[0];for(let k=1;k<r.length;k++){A=!A;let L=r[k];y=P*d,P+=L,w=P*d,m.push({left:y,right:w,isDash:A,zeroLength:L===0})}return m}addRoundDash(r,u,d){let m=u/2;for(let y=-d;y<=d;y++){let w=this.width*(this.nextRow+d+y),A=0,P=r[A];for(let k=0;k<this.width;k++){k/P.right>1&&(P=r[++A]);let L=Math.abs(k-P.left),N=Math.abs(k-P.right),z=Math.min(L,N),j,Z=y/d*(m+1);if(P.isDash){let te=m-Math.abs(Z);j=Math.sqrt(z*z+te*te)}else j=m-Math.sqrt(z*z+Z*Z);this.data[w+k]=Math.max(0,Math.min(255,j+128))}}}addRegularDash(r){for(let A=r.length-1;A>=0;--A){let P=r[A],k=r[A+1];P.zeroLength?r.splice(A,1):k&&k.isDash===P.isDash&&(k.left=P.left,r.splice(A,1))}let u=r[0],d=r[r.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);let m=this.width*this.nextRow,y=0,w=r[y];for(let A=0;A<this.width;A++){A/w.right>1&&(w=r[++y]);let P=Math.abs(A-w.left),k=Math.abs(A-w.right),L=Math.min(P,k);this.data[m+A]=Math.max(0,Math.min(255,(w.isDash?L:-L)+128))}}addDash(r,u){let d=u?7:0,m=2*d+1;if(this.nextRow+m>this.height)return a.w("LineAtlas out of space"),null;let y=0;for(let A=0;A<r.length;A++)y+=r[A];if(y!==0){let A=this.width/y,P=this.getDashRanges(r,this.width,A);u?this.addRoundDash(P,A,d):this.addRegularDash(P)}let w={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=m,this.dirty=!0,w}bind(r){let u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}let Fr="maplibre_preloaded_worker_pool";class zr{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<zr.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fr]}numActive(){return Object.keys(this.active).length}}let Bn=Math.floor(O.hardwareConcurrency/2),Kr,Di;function jn(){return Kr||(Kr=new zr),Kr}zr.workerCount=a.H(globalThis)?Math.max(Math.min(Bn,3),1):1;class hi{constructor(r,u){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=u;let d=this.workerPool.acquire(u);for(let m=0;m<d.length;m++){let y=new a.J(d[m],u);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u){let d=[];for(let m of this.actors)d.push(m.sendAsync({type:r,data:u}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,u){for(let d of this.actors)d.registerMessageHandler(r,u)}}function qa(){return Di||(Di=new hi(jn(),a.K),Di.registerMessageHandler("GR",(g,r,u)=>a.m(r,u))),Di}function Un(g,r){let u=a.L();return a.M(u,u,[1,1,0]),a.N(u,u,[.5*g.width,.5*g.height,1]),g.calculatePosMatrix?a.O(u,u,g.calculatePosMatrix(r.toUnwrapped())):u}function Vn(g,r,u,d,m,y,w){var A;let P=function(z,j,Z){if(z)for(let te of z){let ee=j[te];if(ee&&ee.source===Z&&ee.type==="fill-extrusion")return!0}else for(let te in j){let ee=j[te];if(ee.source===Z&&ee.type==="fill-extrusion")return!0}return!1}((A=m==null?void 0:m.layers)!==null&&A!==void 0?A:null,r,g.id),k=y.maxPitchScaleFactor(),L=g.tilesIn(d,k,P);L.sort(ks);let N=[];for(let z of L)N.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(r,u,g._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,m,y,k,Un(g.transform,z.tileID),w?(j,Z)=>w(z.tileID,j,Z):void 0)});return function(z,j){for(let Z in z)for(let te of z[Z])wo(te,j);return z}(function(z){let j={},Z={};for(let te of z){let ee=te.queryResults,ie=te.wrappedTileID,se=Z[ie]=Z[ie]||{};for(let de in ee){let ce=ee[de],me=se[de]=se[de]||{},ye=j[de]=j[de]||[];for(let he of ce)me[he.featureIndex]||(me[he.featureIndex]=!0,ye.push(he))}}return j}(N),g)}function ks(g,r){let u=g.tileID,d=r.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}function wo(g,r){let u=g.feature,d=r.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=d}function ln(g,r,u){return a._(this,void 0,void 0,function*(){let d=g;if(g.url?d=(yield a.j(r.transformRequest(g.url,"Source"),u)).data:yield O.frameAsync(u),!d)return null;let m=a.Q(a.e(d,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(m.vectorLayerIds=d.vector_layers.map(y=>y.id)),m})}class Rr{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.S?new a.S(r.lng,r.lat):a.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.S?new a.S(r.lng,r.lat):a.S.convert(r),this}extend(r){let u=this._sw,d=this._ne,m,y;if(r instanceof a.S)m=r,y=r;else{if(!(r instanceof Rr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Rr.convert(r)):this.extend(a.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.S.convert(r)):this;if(m=r._sw,y=r._ne,!m||!y)return this}return u||d?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new a.S(m.lng,m.lat),this._ne=new a.S(y.lng,y.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){let{lng:u,lat:d}=a.S.convert(r),m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&m}static convert(r){return r instanceof Rr?r:r&&new Rr(r)}static fromLngLat(r,u=0){let d=360*u/40075017,m=d/Math.cos(Math.PI/180*r.lat);return new Rr(new a.S(r.lng-m,r.lat-d),new a.S(r.lng+m,r.lat+d))}adjustAntiMeridian(){let r=new a.S(this._sw.lng,this._sw.lat),u=new a.S(this._ne.lng,this._ne.lat);return new Rr(r,r.lng>u.lng?new a.S(u.lng+360,u.lat):u)}}class jr{constructor(r,u,d){this.bounds=Rr.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){let u=Math.pow(2,r.z),d=Math.floor(a.V(this.bounds.getWest())*u),m=Math.floor(a.U(this.bounds.getNorth())*u),y=Math.ceil(a.V(this.bounds.getEast())*u),w=Math.ceil(a.U(this.bounds.getSouth())*u);return r.x>=d&&r.x<y&&r.y>=m&&r.y<w}}class sa extends a.E{constructor(r,u,d,m){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(u,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield ln(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(a.e(this,r),r.bounds&&(this.tileBounds=new jr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new a.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(r){return a._(this,void 0,void 0,function*(){let u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(u,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};d.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,w)=>{r.reloadPromise={resolve:y,reject:w}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{let y=yield r.actor.sendAsync({type:m,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,u){if(u&&u.resourceTiming&&(r.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&r.setExpiryData(u),r.loadVectorData(u,this.map.painter),r.reloadPromise){let d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class la extends a.E{constructor(r,u,d,m){super(),this.id=r,this.dispatcher=d,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},u),a.e(this,a.Q(u,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let u=yield ln(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(a.e(this,u),u.bounds&&(this.tileBounds=new jr(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(u){this._tileJSONRequest=null,this.fire(new a.k(u))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return a.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return a._(this,void 0,void 0,function*(){let u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{let d=yield re.getImage(this.map._requestManager.transformRequest(u,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let m=this.map.painter.context,y=m.gl,w=d.data;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new a.T(m,w,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class es extends la{constructor(r,u,d,m){super(r,u,d,m),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r){return a._(this,void 0,void 0,function*(){let u=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(u,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{let m=yield re.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){let y=m.data;this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});let w=a.b(y)&&a.W()?y:yield this.readImageNow(y),A={type:this.type,uid:r.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();let P=yield r.actor.sendAsync({type:"LDT",data:A});r.dem=P,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.X()){let u=r.width+2,d=r.height+2;try{return new a.R({width:u,height:d},yield a.Y(r,-1,-1,u,d))}catch(m){}}return O.getImageData(r,1)})}_getNeighboringTiles(r){let u=r.canonical,d=Math.pow(2,u.z),m=(u.x-1+d)%d,y=u.x===0?r.wrap-1:r.wrap,w=(u.x+1+d)%d,A=u.x+1===d?r.wrap+1:r.wrap,P={};return P[new a.Z(r.overscaledZ,y,u.z,m,u.y).key]={backfilled:!1},P[new a.Z(r.overscaledZ,A,u.z,w,u.y).key]={backfilled:!1},u.y>0&&(P[new a.Z(r.overscaledZ,y,u.z,m,u.y-1).key]={backfilled:!1},P[new a.Z(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},P[new a.Z(r.overscaledZ,A,u.z,w,u.y-1).key]={backfilled:!1}),u.y+1<d&&(P[new a.Z(r.overscaledZ,y,u.z,m,u.y+1).key]={backfilled:!1},P[new a.Z(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},P[new a.Z(r.overscaledZ,A,u.z,w,u.y+1).key]={backfilled:!1}),P}unloadTile(r){return a._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class ua extends a.E{constructor(r,u,d,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=d.getActor(),this.setEventedParent(m),this._data=u.data,this._options=a.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(a.$/this.tileSize)}_getClusterMaxZoom(r){let u=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${u}"`),u}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,function*(){let r=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(u=>u.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){let r=new Rr,u=yield this.getData(),d;switch(u.type){case"FeatureCollection":d=u.features.map(m=>this.getCoordinatesFromGeometry(m.geometry)).flat(1/0);break;case"Feature":d=this.getCoordinatesFromGeometry(u.geometry);break;default:d=this.getCoordinatesFromGeometry(u)}if(d.length==0)return r;for(let m=0;m<d.length-1;m+=2)r.extend([d[m],d[m+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,u,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:u,offset:d}})}_updateWorkerData(){return a._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;let{data:r,diff:u}=this._pendingWorkerUpdate;if(!r&&!u)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);let d=a.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(d.request=this.map._requestManager.transformRequest(O.resolveURL(r),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):u&&(d.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{let m=yield this.actor.sendAsync({type:"LD",data:d});if(this._isUpdatingWorker=!1,this._removed||m.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=m.data;let y=null;m.resourceTiming&&m.resourceTiming[this.id]&&(y=m.resourceTiming[this.id].slice(0));let w={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&a.e(w,{resourceTiming:y}),this.fire(new a.l("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},w),{sourceDataType:"content"})))}catch(m){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(m))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return a._(this,void 0,void 0,function*(){let u=r.actor?"RT":"LT";r.actor=this.actor;let d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};r.abortController=new AbortController;let m=yield this.actor.sendAsync({type:u,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,u==="RT")})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ca extends a.E{constructor(r,u,d,m){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}load(r){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let u=yield re.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,r&&(this.coordinates=r),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new a.k(u))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;let u=r.map(a.a1.fromLngLat);var d;return this.tileID=function(m){let y=a.a2.fromPoints(m),w=y.width(),A=y.height(),P=Math.max(w,A),k=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),L=Math.pow(2,k);return new a.a4(k,Math.floor((y.minX+y.maxX)/2*L),Math.floor((y.minY+y.maxY)/2*L))}(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map(m=>this.tileID.getTilePoint(m)._round()),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let r=this.map.painter.context,u=r.gl;this.texture||(this.texture=new a.T(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(let m in this.tiles){let y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let{minX:u,minY:d,maxX:m,maxY:y}=a.a2.fromPoints(r),w={};for(let A=0;A<=a.a3;A++){let P=Math.pow(2,A),k=Math.floor(u*P),L=Math.floor(d*P),N=Math.floor(m*P),z=Math.floor(y*P);w[A]={minTileX:k,minTileY:L,maxTileX:N,maxTileY:z}}return w}}class Ds extends ca{constructor(r,u,d,m){super(r,u,d,m),this.roundZoom=!0,this.type="video",this.options=u}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;let r=this.options;this.urls=[];for(let u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{let u=yield a.a5(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new a.k(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){let u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let r=this.map.painter.context,u=r.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(let m in this.tiles){let y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class So extends ca{constructor(r,u,d,m){super(r,u,d,m),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new a.k(new a.a6(`sources.${r}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new a.k(new a.a6(`sources.${r}`,null,"missing required property \"coordinates\""))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${r}`,null,"optional \"animate\" property must be a boolean value"))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${r}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new a.k(new a.a6(`sources.${r}`,null,"missing required property \"canvas\""))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let u=this.map.painter.context,d=u.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(u,this.canvas,d.RGBA,{premultiply:!0});let m=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}let ts={},Ya=g=>{switch(g){case"geojson":return ua;case"image":return ca;case"raster":return la;case"raster-dem":return es;case"vector":return sa;case"video":return Ds;case"canvas":return So}return ts[g]},_e="RTLPluginLoaded";class ke extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=qa()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return a._(this,arguments,void 0,function*(u,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=O.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(_e))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Be=null;function vt(){return Be||(Be=new ke),Be}class ut{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=a.a7(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){let u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,y){let w={};if(!y)return w;for(let A of m){let P=A.layerIds.map(k=>y.getLayer(k)).filter(Boolean);if(P.length!==0){A.layers=P,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(k=>P.filter(L=>L.id===k)[0]));for(let k of P)w[k.id]=A}}return w}(r.buckets,u==null?void 0:u.style),this.hasSymbolBuckets=!1;for(let m in this.buckets){let y=this.buckets[m];if(y instanceof a.a9){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let m in this.buckets){let y=this.buckets[m];if(y instanceof a.a9&&y.hasRTLText){this.hasRTLText=!0,vt().lazyLoad();break}}this.queryPadding=0;for(let m in this.buckets){let y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(let r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(let d in this.buckets){let m=this.buckets[d];m.uploadPending()&&m.upload(r)}let u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,d,m,y,w,A,P,k,L,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:L,transform:P,params:A,queryPadding:this.queryPadding*k,getElevation:N},r,u,d):{}}querySourceFeatures(r,u){let d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;let m=d.loadVTLayers(),y=u&&u.sourceLayer?u.sourceLayer:"",w=m._geojsonTileLayer||m[y];if(!w)return;let A=a.aa(u&&u.filter),{z:P,x:k,y:L}=this.tileID.canonical,N={z:P,x:k,y:L};for(let z=0;z<w.length;z++){let j=w.feature(z);if(A.needGeometry){let ee=a.ab(j,!0);if(!A.filter(new a.F(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!A.filter(new a.F(this.tileID.overscaledZ),j))continue;let Z=d.getId(j,y),te=new a.ac(j,P,k,L,Z);te.tile=N,r.push(te)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){let u=this.expirationTime;if(r.cacheControl){let d=a.ad(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){let d=Date.now(),m=!1;if(this.expirationTime>d)m=!1;else if(u){if(this.expirationTime<u)m=!0;else{let y=this.expirationTime-u;y?this.expirationTime=d+Math.max(y,3e4):m=!0}}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;let d=this.latestFeatureIndex.loadVTLayers();for(let m in this.buckets){if(!u.style.hasLayer(m))continue;let y=this.buckets[m],w=y.layers[0].sourceLayer||"_geojsonTileLayer",A=d[w],P=r[w];if(!A||!P||Object.keys(P).length===0)continue;y.update(P,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});let k=u&&u.style&&u.style.getLayer(m);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=O.now()+r}setDependencies(r,u){let d={};for(let m of u)d[m]=!0;this.dependencies[r]=d}hasDependency(r,u){for(let d of r){let m=this.dependencies[d];if(m){for(let y of u)if(m[y])return!0}}return!1}}class le{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(let r in this.data)for(let u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,d){let m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);let y={value:u,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},d)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){let w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){let u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;let d=r.wrapped().key,m=u===void 0?0:this.data[d].indexOf(u),y=this.data[d][m];return this.data[d].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){let u=[];for(let d in this.data)for(let m of this.data[d])r(m.value)||u.push(m);for(let d of u)this.remove(d.value.tileID,d)}}class V{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,d){let m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},a.e(this.stateChanges[r][m],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(let y in this.state[r])y!==m&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(let y in this.state[r][m])d[y]||(this.deletedStates[r][m][y]=null)}else for(let y in d)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][y]===null&&delete this.deletedStates[r][m][y]}removeFeatureState(r,u,d){if(this.deletedStates[r]===null)return;let m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][d]=null);else if(u!==void 0){if(this.stateChanges[r]&&this.stateChanges[r][m])for(d in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][d]=null;else this.deletedStates[r][m]=null;}else this.deletedStates[r]=null}getState(r,u){let d=String(u),m=a.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){let y=this.deletedStates[r][u];if(y===null)return{};for(let w in y)delete m[w]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){let d={};for(let m in this.stateChanges){this.state[m]=this.state[m]||{};let y={};for(let w in this.stateChanges[m])this.state[m][w]||(this.state[m][w]={}),a.e(this.state[m][w],this.stateChanges[m][w]),y[w]=this.state[m][w];d[m]=y}for(let m in this.deletedStates){this.state[m]=this.state[m]||{};let y={};if(this.deletedStates[m]===null)for(let w in this.state[m])y[w]={},this.state[m][w]={};else for(let w in this.deletedStates[m]){if(this.deletedStates[m][w]===null)this.state[m][w]={};else for(let A of Object.keys(this.deletedStates[m][w]))delete this.state[m][w][A];y[w]=this.state[m][w]}d[m]=d[m]||{},a.e(d[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(let m in r)r[m].setFeatureState(d,u)}}let W=89.25;function Y(g,r){let u=a.ah(r.lat,-a.ai,a.ai);return new a.P(a.V(r.lng)*g,a.U(u)*g)}function ae(g,r){return new a.a1(r.x/g,r.y/g).toLngLat()}function ve(g){return g.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-g.pitch)),Math.tan(a.ae(W-g.pitch)))}function be(g,r){let u=g.canonical,d=r/a.af(u.z),m=u.x+Math.pow(2,u.z)*g.wrap,y=a.ag(new Float64Array(16));return a.M(y,y,[m*d,u.y*d,0]),a.N(y,y,[d/a.$,d/a.$,1]),y}function qe(g,r,u,d,m){let y=a.a1.fromLngLat(g,r),w=m*a.aj(1,g.lat),A=w*Math.cos(a.ae(u)),P=Math.sqrt(w*w-A*A),k=P*Math.sin(a.ae(-d)),L=P*Math.cos(a.ae(-d));return new a.a1(y.x+k,y.y+L,y.z+A)}function we(g,r,u){let d=r.intersectsFrustum(g);if(!u||d===0)return d;let m=r.intersectsPlane(u);return m===0?0:d===2&&m===2?2:1}function Le(g,r,u){let d=0,m=(u-r)/10;for(let y=0;y<10;y++)d+=m*Math.pow(Math.cos(r+(y+.5)/10*(u-r)),g);return d}function $e(g,r){return function(u,d,m,y,w){let A=2*((g-1)/a.ak(Math.cos(a.ae(W-w))/Math.cos(a.ae(W)))-1),P=Math.acos(m/y),k=2*Le(A-1,0,a.ae(w/2)),L=Math.min(a.ae(W),P+a.ae(w/2)),N=Le(A-1,Math.min(L,P-a.ae(w/2)),L),z=Math.atan(d/m),j=Math.hypot(d,m),Z=u;return Z+=a.ak(y/j/Math.max(.5,Math.cos(a.ae(w/2)))),Z+=A*a.ak(Math.cos(z))/2,Z-=a.ak(Math.max(1,N/k/r))/2,Z}}let ze=$e(9.314,3);function pt(g,r){let u=(r.roundZoom?Math.round:Math.floor)(g.zoom+a.ak(g.tileSize/r.tileSize));return Math.max(0,u)}function Ee(g,r){let u=g.getCameraFrustum(),d=g.getClippingPlane(),m=g.screenPointToMercatorCoordinate(g.getCameraPoint()),y=a.a1.fromLngLat(g.center,g.elevation);m.z=y.z+Math.cos(g.pitchInRadians)*g.cameraToCenterDistance/g.worldSize;let w=g.getCoveringTilesDetailsProvider(),A=w.allowVariableZoom(g,r),P=pt(g,r),k=r.minzoom||0,L=r.maxzoom!==void 0?r.maxzoom:g.maxZoom,N=Math.min(Math.max(0,P),L),z=Math.pow(2,N),j=[z*m.x,z*m.y,0],Z=[z*y.x,z*y.y,0],te=Math.hypot(y.x-m.x,y.y-m.y),ee=Math.abs(y.z-m.z),ie=Math.hypot(te,ee),se=me=>({zoom:0,x:0,y:0,wrap:me,fullyVisible:!1}),de=[],ce=[];if(g.renderWorldCopies&&w.allowWorldCopies())for(let me=1;me<=3;me++)de.push(se(-me)),de.push(se(me));for(de.push(se(0));de.length>0;){let me=de.pop(),ye=me.x,he=me.y,Te=me.fullyVisible,Oe={x:ye,y:he,z:me.zoom},Ie=w.getTileBoundingVolume(Oe,me.wrap,g.elevation,r);if(!Te){let Xe=we(u,Ie,d);if(Xe===0)continue;Te=Xe===2}let Pe=w.distanceToTile2d(m.x,m.y,Oe,Ie),Re=P;A&&(Re=(r.calculateTileZoom||ze)(g.zoom+a.ak(g.tileSize/r.tileSize),Pe,ee,ie,g.fov)),Re=(r.roundZoom?Math.round:Math.floor)(Re),Re=Math.max(0,Re);let We=Math.min(Re,L);if(me.wrap=w.getWrap(y,Oe,me.wrap),me.zoom>=We){if(me.zoom<k)continue;let Xe=N-me.zoom,je=j[0]-.5-(ye<<Xe),dt=j[1]-.5-(he<<Xe),Ut=r.reparseOverscaled?Math.max(me.zoom,Re):me.zoom;ce.push({tileID:new a.Z(me.zoom===L?Ut:me.zoom,me.wrap,me.zoom,ye,he),distanceSq:a.al([Z[0]-.5-ye,Z[1]-.5-he]),tileDistanceToCamera:Math.sqrt(je*je+dt*dt)})}else for(let Xe=0;Xe<4;Xe++)de.push({zoom:me.zoom+1,x:(ye<<1)+Xe%2,y:(he<<1)+(Xe>>1),wrap:me.wrap,fullyVisible:Te})}return ce.sort((me,ye)=>me.distanceSq-ye.distanceSq).map(me=>me.tileID)}let kt=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Kt extends a.E{constructor(r,u,d){super(),this.id=r,this.dispatcher=d,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,y,w,A)=>{let P=new(Ya(y.type))(m,y,w,A);if(P.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${P.id}`);return P})(r,u,d,this),this._tiles={},this._cache=new le(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new V,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let r in this._tiles){let u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u,d){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,u,d)}catch(m){r.state="errored",m.status!==404?this._source.fire(new a.k(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new a.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let u in this._tiles){let d=this._tiles[u];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(yt).map(r=>r.key)}getRenderableIds(r){let u=[];for(let d in this._tiles)this._isIdRenderable(d,r)&&u.push(this._tiles[d]);return r?u.sort((d,m)=>{let y=d.tileID,w=m.tileID,A=new a.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians),P=new a.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians);return y.overscaledZ-w.overscaledZ||P.y-A.y||P.x-A.x}).map(d=>d.tileID.key):u.map(d=>d.tileID).sort(yt).map(d=>d.key)}hasRenderableParent(r){let u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let u in this._tiles)r?this._reloadTile(u,"expired"):this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(r,u){return a._(this,void 0,void 0,function*(){let d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=u),yield this._loadTile(d,r,u))})}_tileLoaded(r,u,d){r.timeAdded=O.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){let u=this.getRenderableIds();for(let m=0;m<u.length;m++){let y=u[m];if(r.neighboringTiles&&r.neighboringTiles[y]){let w=this.getTileByID(y);d(r,w),d(w,r)}}function d(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let w=y.tileID.canonical.x-m.tileID.canonical.x,A=y.tileID.canonical.y-m.tileID.canonical.y,P=Math.pow(2,m.tileID.canonical.z),k=y.tileID.key;w===0&&A===0||Math.abs(A)>1||(Math.abs(w)>1&&(Math.abs(w+P)===1?w+=P:Math.abs(w-P)===1&&(w-=P)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,w,A),m.neighboringTiles&&m.neighboringTiles[k]&&(m.neighboringTiles[k].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,d,m){for(let y in this._tiles){let w=this._tiles[y];if(m[y]||!w.hasData()||w.tileID.overscaledZ<=u||w.tileID.overscaledZ>d)continue;let A=w.tileID;for(;w&&w.tileID.overscaledZ>u+1;){let k=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[k.key],w&&w.hasData()&&(A=k)}let P=A;for(;P.overscaledZ>u;)if(P=P.scaledTo(P.overscaledZ-1),r[P.key]||r[P.canonical.key]){m[A.key]=A;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){let d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=u?d:null}for(let d=r.overscaledZ-1;d>=u;d--){let m=r.scaledTo(d),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){let u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){let u=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*d*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(r){let u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){let d={};for(let m in this._tiles){let y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+u),d[y.tileID.key]=y}this._tiles=d;for(let m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(let m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(r,u,d,m,y,w){let A={},P={},k=Object.keys(r),L=O.now();for(let N of k){let z=r[N],j=this._tiles[N];if(!j||j.fadeEndTime!==0&&j.fadeEndTime<=L)continue;let Z=this.findLoadedParent(z,u),te=this.findLoadedSibling(z),ee=Z||te||null;ee&&(this._addTile(ee.tileID),A[ee.tileID.key]=ee.tileID),P[N]=z}this._retainLoadedChildren(P,m,d,r);for(let N in A)r[N]||(this._coveredTiles[N]=!0,r[N]=A[N]);if(w){let N={},z={};for(let j of y)this._tiles[j.key].hasData()?N[j.key]=j:z[j.key]=j;for(let j in z){let Z=z[j].children(this._source.maxzoom);this._tiles[Z[0].key]&&this._tiles[Z[1].key]&&this._tiles[Z[2].key]&&this._tiles[Z[3].key]&&(N[Z[0].key]=r[Z[0].key]=Z[0],N[Z[1].key]=r[Z[1].key]=Z[1],N[Z[2].key]=r[Z[2].key]=Z[2],N[Z[3].key]=r[Z[3].key]=Z[3],delete z[j])}for(let j in z){let Z=z[j],te=this.findLoadedParent(Z,this._source.minzoom),ee=this.findLoadedSibling(Z),ie=te||ee||null;if(ie){N[ie.tileID.key]=r[ie.tileID.key]=ie.tileID;for(let se in N)N[se].isChildOf(ie.tileID)&&delete N[se]}}for(let j in this._tiles)N[j]||(this._coveredTiles[j]=!0)}}update(r,u){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=u,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new a.Z(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(d=Ee(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter(L=>this._source.hasTile(L)))):d=[];let m=pt(r,this._source),y=Math.max(m-Kt.maxOverzooming,this._source.minzoom),w=Math.max(m+Kt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let L={};for(let N of d)if(N.canonical.z>this._source.minzoom){let z=N.scaledTo(N.canonical.z-1);L[z.key]=z;let j=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));L[j.key]=j}d=d.concat(Object.values(L))}let A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let P=this._updateRetainedTiles(d,m);Nt(this._source.type)&&this._updateCoveredAndRetainedTiles(P,y,w,m,d,u);for(let L in P)this._tiles[L].clearFadeHold();let k=a.am(this._tiles,P);for(let L of k){let N=this._tiles[L];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){var d;let m={},y={},w=Math.max(u-Kt.maxOverzooming,this._source.minzoom),A=Math.max(u+Kt.maxUnderzooming,this._source.minzoom),P={};for(let k of r){let L=this._addTile(k);m[k.key]=k,L.hasData()||u<this._source.maxzoom&&(P[k.key]=k)}this._retainLoadedChildren(P,u,A,m);for(let k of r){let L=this._tiles[k.key];if(L.hasData())continue;if(u+1>this._source.maxzoom){let z=k.children(this._source.maxzoom)[0],j=this.getTile(z);if(j&&j.hasData()){m[z.key]=z;continue}}else{let z=k.children(this._source.maxzoom);if(m[z[0].key]&&m[z[1].key]&&m[z[2].key]&&m[z[3].key])continue}let N=L.wasRequested();for(let z=k.overscaledZ-1;z>=w;--z){let j=k.scaledTo(z);if(y[j.key])break;if(y[j.key]=!0,L=this.getTile(j),!L&&N&&(L=this._addTile(j)),L){let Z=L.hasData();if((Z||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||N)&&(m[j.key]=j),N=L.wasRequested(),Z)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let r in this._tiles){let u=[],d,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){d=this._loadedParentTiles[m.key];break}u.push(m.key);let y=m.scaledTo(m.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;m=y}for(let y of u)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let r in this._tiles){let u=this._tiles[r].tileID,d=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=d}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));let d=u;return u||(u=new ut(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,r.key,u.state)),u.uses++,this._tiles[r.key]=u,d||this._source.fire(new a.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);let d=u.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}refreshTiles(r){for(let u in this._tiles)(this._isIdRenderable(u)||this._tiles[u].state=="errored")&&r.some(d=>d.equals(this._tiles[u].tileID.canonical))&&this._reloadTile(u,"expired")}_removeTile(r){let u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(r){let u=r.sourceDataType;r.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&u==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,d){let m=[],y=this.transform;if(!y)return m;let w=y.getCoveringTilesDetailsProvider().allowWorldCopies(),A=d?y.getCameraQueryGeometry(r):r,P=j=>y.screenPointToMercatorCoordinate(j,this.terrain),k=this.transformBbox(r,P,!w),L=this.transformBbox(A,P,!w),N=this.getIds(),z=a.a2.fromPoints(L);for(let j=0;j<N.length;j++){let Z=this._tiles[N[j]];if(Z.holdingForFade())continue;let te=w?[Z.tileID]:[Z.tileID.unwrapTo(-1),Z.tileID.unwrapTo(0)],ee=Math.pow(2,y.zoom-Z.tileID.overscaledZ),ie=u*Z.queryPadding*a.$/Z.tileSize/ee;for(let se of te){let de=z.map(ce=>se.getTilePoint(new a.a1(ce.x,ce.y)));if(de.expandBy(ie),de.intersects(kt)){let ce=k.map(ye=>se.getTilePoint(ye)),me=L.map(ye=>se.getTilePoint(ye));m.push({tile:Z,tileID:w?se:se.unwrapTo(0),queryGeometry:ce,cameraQueryGeometry:me,scale:ee})}}}return m}transformBbox(r,u,d){let m=r.map(u);if(d){let y=a.a2.fromPoints(r);y.shrinkBy(.001*Math.min(y.width(),y.height()));let w=y.map(u);a.a2.fromPoints(m).covers(w)||(m=m.map(A=>A.x>.5?new a.a1(A.x-1,A.y,A.z):A))}return m}getVisibleCoordinates(r){let u=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(Nt(this._source.type)){let r=O.now();for(let u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,d){this._state.updateState(r=r||"_geojsonTileLayer",u,d)}removeFeatureState(r,u,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,d)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,d){let m=this._tiles[r];m&&m.setDependencies(u,d)}reloadTilesForDependencies(r,u){for(let d in this._tiles)this._tiles[d].hasDependency(r,u)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,u))}}function yt(g,r){let u=Math.abs(2*g.wrap)-+(g.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return g.overscaledZ-r.overscaledZ||d-u||r.canonical.y-g.canonical.y||r.canonical.x-g.canonical.x}function Nt(g){return g==="raster"||g==="image"||g==="video"}Kt.maxOverzooming=10,Kt.maxUnderzooming=3;class Ir{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.ah(r,0,1);let u=1,d=this._distances[u],m=r*this.paddedLength+this.padding;for(;d<m&&u<this._distances.length;)d=this._distances[++u];let y=u-1,w=this._distances[y],A=d-w,P=A>0?(m-w)/A:0;return this.points[y].mult(1-P).add(this.points[u].mult(P))}}function Ai(g,r){let u=!0;return g==="always"||g!=="never"&&r!=="never"||(u=!1),u}class qi{constructor(r,u,d){let m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(u/d);for(let w=0;w<this.xCellCount*this.yCellCount;w++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,d,m,y){this._forEachCell(u,d,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(r,u,d,m){this._forEachCell(u-m,d-m,u+m,d+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(d),this.circles.push(m)}_insertBoxCell(r,u,d,m,y,w){this.boxCells[y].push(w)}_insertCircleCell(r,u,d,m,y,w){this.circleCells[y].push(w)}_query(r,u,d,m,y,w,A){if(d<0||r>this.width||m<0||u>this.height)return[];let P=[];if(r<=0&&u<=0&&this.width<=d&&this.height<=m){if(y)return[{key:null,x1:r,y1:u,x2:d,y2:m}];for(let k=0;k<this.boxKeys.length;k++)P.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){let L=this.circles[3*k],N=this.circles[3*k+1],z=this.circles[3*k+2];P.push({key:this.circleKeys[k],x1:L-z,y1:N-z,x2:L+z,y2:N+z})}}else this._forEachCell(r,u,d,m,this._queryCell,P,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},A);return P}query(r,u,d,m){return this._query(r,u,d,m,!1,null)}hitTest(r,u,d,m,y,w){return this._query(r,u,d,m,!0,y,w).length>0}hitTestCircle(r,u,d,m,y){let w=r-d,A=r+d,P=u-d,k=u+d;if(A<0||w>this.width||k<0||P>this.height)return!1;let L=[];return this._forEachCell(w,P,A,k,this._queryCellCircle,L,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:d},seenUids:{box:{},circle:{}}},y),L.length>0}_queryCell(r,u,d,m,y,w,A,P){let{seenUids:k,hitTest:L,overlapMode:N}=A,z=this.boxCells[y];if(z!==null){let Z=this.bboxes;for(let te of z)if(!k.box[te]){k.box[te]=!0;let ee=4*te,ie=this.boxKeys[te];if(r<=Z[ee+2]&&u<=Z[ee+3]&&d>=Z[ee+0]&&m>=Z[ee+1]&&(!P||P(ie))&&(!L||!Ai(N,ie.overlapMode))&&(w.push({key:ie,x1:Z[ee],y1:Z[ee+1],x2:Z[ee+2],y2:Z[ee+3]}),L))return!0}}let j=this.circleCells[y];if(j!==null){let Z=this.circles;for(let te of j)if(!k.circle[te]){k.circle[te]=!0;let ee=3*te,ie=this.circleKeys[te];if(this._circleAndRectCollide(Z[ee],Z[ee+1],Z[ee+2],r,u,d,m)&&(!P||P(ie))&&(!L||!Ai(N,ie.overlapMode))){let se=Z[ee],de=Z[ee+1],ce=Z[ee+2];if(w.push({key:ie,x1:se-ce,y1:de-ce,x2:se+ce,y2:de+ce}),L)return!0}}}return!1}_queryCellCircle(r,u,d,m,y,w,A,P){let{circle:k,seenUids:L,overlapMode:N}=A,z=this.boxCells[y];if(z!==null){let Z=this.bboxes;for(let te of z)if(!L.box[te]){L.box[te]=!0;let ee=4*te,ie=this.boxKeys[te];if(this._circleAndRectCollide(k.x,k.y,k.radius,Z[ee+0],Z[ee+1],Z[ee+2],Z[ee+3])&&(!P||P(ie))&&!Ai(N,ie.overlapMode))return w.push(!0),!0}}let j=this.circleCells[y];if(j!==null){let Z=this.circles;for(let te of j)if(!L.circle[te]){L.circle[te]=!0;let ee=3*te,ie=this.circleKeys[te];if(this._circlesCollide(Z[ee],Z[ee+1],Z[ee+2],k.x,k.y,k.radius)&&(!P||P(ie))&&!Ai(N,ie.overlapMode))return w.push(!0),!0}}}_forEachCell(r,u,d,m,y,w,A,P){let k=this._convertToXCellCoord(r),L=this._convertToYCellCoord(u),N=this._convertToXCellCoord(d),z=this._convertToYCellCoord(m);for(let j=k;j<=N;j++)for(let Z=L;Z<=z;Z++)if(y.call(this,r,u,d,m,this.xCellCount*Z+j,w,A,P))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,d,m,y,w){let A=m-r,P=y-u,k=d+w;return k*k>A*A+P*P}_circleAndRectCollide(r,u,d,m,y,w,A){let P=(w-m)/2,k=Math.abs(r-(m+P));if(k>P+d)return!1;let L=(A-y)/2,N=Math.abs(u-(y+L));if(N>L+d)return!1;if(k<=P||N<=L)return!0;let z=k-P,j=N-L;return z*z+j*j<=d*d}}function di(g,r,u){let d=a.L();if(!g){let{vecSouth:N,vecEast:z}=ar(r),j=b();j[0]=z[0],j[1]=z[1],j[2]=N[0],j[3]=N[1],m=j,(L=(w=(y=j)[0])*(k=y[3])-(P=y[2])*(A=y[1]))&&(m[0]=k*(L=1/L),m[1]=-A*L,m[2]=-P*L,m[3]=w*L),d[0]=j[0],d[1]=j[1],d[4]=j[2],d[5]=j[3]}var m,y,w,A,P,k,L;return a.N(d,d,[1/u,1/u,1]),d}function Qt(g,r,u,d){if(g){let m=a.L();if(!r){let{vecSouth:y,vecEast:w}=ar(u);m[0]=w[0],m[1]=w[1],m[4]=y[0],m[5]=y[1]}return a.N(m,m,[d,d,1]),m}return u.pixelsToClipSpaceMatrix}function ar(g){let r=Math.cos(g.rollInRadians),u=Math.sin(g.rollInRadians),d=Math.cos(g.pitchInRadians),m=Math.cos(g.bearingInRadians),y=Math.sin(g.bearingInRadians),w=a.ar();w[0]=-m*d*u-y*r,w[1]=-y*d*u+m*r;let A=a.as(w);A<1e-9?a.at(w):a.au(w,w,1/A);let P=a.ar();P[0]=m*d*r-y*u,P[1]=y*d*r+m*u;let k=a.as(P);return k<1e-9?a.at(P):a.au(P,P,1/k),{vecEast:P,vecSouth:w}}function mi(g,r,u,d){let m;d?(m=[g,r,d(g,r),1],a.aw(m,m,u)):(m=[g,r,0,1],qu(m,m,u));let y=m[3];return{point:new a.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function Ke(g,r){return .5+g/r*.5}function un(g,r){return g.x>=-r[0]&&g.x<=r[0]&&g.y>=-r[1]&&g.y<=r[1]}function Hr(g,r,u,d,m,y,w,A,P,k,L,N,z){let j=u?g.textSizeData:g.iconSizeData,Z=a.an(j,r.transform.zoom),te=[256/r.width*2+1,256/r.height*2+1],ee=u?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;ee.clear();let ie=g.lineVertexArray,se=u?g.text.placedSymbolArray:g.icon.placedSymbolArray,de=r.transform.width/r.transform.height,ce=!1;for(let me=0;me<se.length;me++){let ye=se.get(me);if(ye.hidden||ye.writingMode===a.ao.vertical&&!ce){To(ye.numGlyphs,ee);continue}ce=!1;let he=new a.P(ye.anchorX,ye.anchorY),Te={getElevation:z,pitchedLabelPlaneMatrix:d,lineVertexArray:ie,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:he,unwrappedTileID:P,width:k,height:L,translation:N},Oe=Fs(ye.anchorX,ye.anchorY,Te);if(!un(Oe.point,te)){To(ye.numGlyphs,ee);continue}let Ie=Ke(r.transform.cameraToCenterDistance,Oe.signedDistanceFromCamera),Pe=a.ap(j,Z,ye),Re=y?Pe*r.transform.getPitchedTextCorrection(ye.anchorX,ye.anchorY,P)/Ie:Pe*Ie,We=it({projectionContext:Te,pitchedLabelPlaneMatrixInverse:m,symbol:ye,fontSize:Re,flip:!1,keepUpright:w,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:ee,aspectRatio:de,rotateToLine:A});ce=We.useVertical,(We.notEnoughRoom||ce||We.needsFlipping&&it({projectionContext:Te,pitchedLabelPlaneMatrixInverse:m,symbol:ye,fontSize:Re,flip:!0,keepUpright:w,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:ee,aspectRatio:de,rotateToLine:A}).notEnoughRoom)&&To(ye.numGlyphs,ee)}u?g.text.dynamicLayoutVertexBuffer.updateData(ee):g.icon.dynamicLayoutVertexBuffer.updateData(ee)}function Ls(g,r,u,d,m,y,w,A){let P=y.glyphStartIndex+y.numGlyphs,k=y.lineStartIndex,L=y.lineStartIndex+y.lineLength,N=r.getoffsetX(y.glyphStartIndex),z=r.getoffsetX(P-1),j=zs(g*N,u,d,m,y.segment,k,L,A,w);if(!j)return null;let Z=zs(g*z,u,d,m,y.segment,k,L,A,w);return Z?A.projectionCache.anyProjectionOccluded?null:{first:j,last:Z}:null}function Au(g,r,u,d){return g===a.ao.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*d?{useVertical:!0}:(g===a.ao.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function it(g){let{projectionContext:r,pitchedLabelPlaneMatrixInverse:u,symbol:d,fontSize:m,flip:y,keepUpright:w,glyphOffsetArray:A,dynamicLayoutVertexArray:P,aspectRatio:k,rotateToLine:L}=g,N=m/24,z=d.lineOffsetX*N,j=d.lineOffsetY*N,Z;if(d.numGlyphs>1){let te=d.glyphStartIndex+d.numGlyphs,ee=d.lineStartIndex,ie=d.lineStartIndex+d.lineLength,se=Ls(N,A,z,j,y,d,L,r);if(!se)return{notEnoughRoom:!0};let de=Cl(se.first.point.x,se.first.point.y,r,u),ce=Cl(se.last.point.x,se.last.point.y,r,u);if(w&&!y){let me=Au(d.writingMode,de,ce,k);if(me)return me}Z=[se.first];for(let me=d.glyphStartIndex+1;me<te-1;me++){let ye=zs(N*A.getoffsetX(me),z,j,y,d.segment,ee,ie,r,L);if(!ye)return{notEnoughRoom:!0};Z.push(ye)}Z.push(se.last)}else{if(w&&!y){let ee=Hi(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,ie=d.lineStartIndex+d.segment+1,se=new a.P(r.lineVertexArray.getx(ie),r.lineVertexArray.gety(ie)),de=Hi(se.x,se.y,r),ce=de.signedDistanceFromCamera>0?de.point:Ht(r.tileAnchorPoint,se,ee,1,r),me=Cl(ee.x,ee.y,r,u),ye=Cl(ce.x,ce.y,r,u),he=Au(d.writingMode,me,ye,k);if(he)return he}let te=zs(N*A.getoffsetX(d.glyphStartIndex),z,j,y,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,r,L);if(!te||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Z=[te]}for(let te of Z)a.av(P,te.point,te.angle);return{}}function Ht(g,r,u,d,m){let y=g.add(g.sub(r)._unit()),w=Hi(y.x,y.y,m).point,A=u.sub(w);return u.add(A._mult(d/A.mag()))}function $t(g,r,u){let d=r.projectionCache;if(d.projections[g])return d.projections[g];let m=new a.P(r.lineVertexArray.getx(g),r.lineVertexArray.gety(g)),y=Hi(m.x,m.y,r);if(y.signedDistanceFromCamera>0)return d.projections[g]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;let w=g-u.direction;return Ht(u.distanceFromAnchor===0?r.tileAnchorPoint:new a.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),m,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,r)}function Hi(g,r,u){let d=g+u.translation[0],m=r+u.translation[1],y;return u.pitchWithMap?(y=mi(d,m,u.pitchedLabelPlaneMatrix,u.getElevation),y.isOccluded=!1):(y=u.transform.projectTileCoordinates(d,m,u.unwrappedTileID,u.getElevation),y.point.x=(.5*y.point.x+.5)*u.width,y.point.y=(.5*-y.point.y+.5)*u.height),y}function Cl(g,r,u,d){if(u.pitchWithMap){let m=[g,r,0,1];return a.aw(m,m,d),u.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],u.unwrappedTileID,u.getElevation).point}return{x:g/u.width*2-1,y:1-r/u.height*2}}function Fs(g,r,u){return u.transform.projectTileCoordinates(g,r,u.unwrappedTileID,u.getElevation)}function jt(g,r,u){return g._unit()._perp()._mult(r*u)}function Gd(g,r,u,d,m,y,w,A,P){if(A.projectionCache.offsets[g])return A.projectionCache.offsets[g];let k=u.add(r);if(g+P.direction<d||g+P.direction>=m)return A.projectionCache.offsets[g]=k,k;let L=$t(g+P.direction,A,P),N=jt(L.sub(u),w,P.direction),z=u.add(N),j=L.add(N);return A.projectionCache.offsets[g]=a.ax(y,k,z,j)||k,A.projectionCache.offsets[g]}function zs(g,r,u,d,m,y,w,A,P){let k=d?g-r:g+r,L=k>0?1:-1,N=0;d&&(L*=-1,N=Math.PI),L<0&&(N+=Math.PI);let z,j=L>0?y+m:y+m+1;A.projectionCache.cachedAnchorPoint?z=A.projectionCache.cachedAnchorPoint:(z=Hi(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=z);let Z,te,ee=z,ie=z,se=0,de=0,ce=Math.abs(k),me=[],ye;for(;se+de<=ce;){if(j+=L,j<y||j>=w)return null;se+=de,ie=ee,te=Z;let Oe={absOffsetX:ce,direction:L,distanceFromAnchor:se,previousVertex:ie};if(ee=$t(j,A,Oe),u===0)me.push(ie),ye=ee.sub(ie);else{let Ie,Pe=ee.sub(ie);Ie=Pe.mag()===0?jt($t(j+L,A,Oe).sub(ee),u,L):jt(Pe,u,L),te||(te=ie.add(Ie)),Z=Gd(j,Ie,ee,y,w,te,u,A,Oe),me.push(te),ye=Z.sub(te)}de=ye.mag()}let he=ye._mult((ce-se)/de)._add(te||ie),Te=N+Math.atan2(ee.y-ie.y,ee.x-ie.x);return me.push(he),{point:he,angle:P?Te:0,path:me}}let Wd=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function To(g,r){for(let u=0;u<g;u++){let d=r.length;r.resize(d+4),r.float32.set(Wd,3*d)}}function qu(g,r,u){let d=r[0],m=r[1];return g[0]=u[0]*d+u[4]*m+u[12],g[1]=u[1]*d+u[5]*m+u[13],g[3]=u[3]*d+u[7]*m+u[15],g}let ii=100;class Zd{constructor(r,u=new qi(r.width+200,r.height+200,25),d=new qi(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=d,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+ii,this.screenBottomBoundary=r.height+ii,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,d,m,y,w,A,P,k,L,N,z){let j=this.projectAndGetPerspectiveRatio(r.anchorPointX+P[0],r.anchorPointY+P[1],y,L,z),Z=d*j.perspectiveRatio,te;if(w||A)te=this._projectCollisionBox(r,Z,m,y,w,A,P,j,L,N,z);else{let ye=j.x+(N?N.x*Z:0),he=j.y+(N?N.y*Z:0);te={allPointsOccluded:!1,box:[ye+r.x1*Z,he+r.y1*Z,ye+r.x2*Z,he+r.y2*Z]}}let[ee,ie,se,de]=te.box,ce=w?te.allPointsOccluded:j.isOccluded,me=ce;return me||(me=j.perspectiveRatio<this.perspectiveRatioCutoff),me||(me=!this.isInsideGrid(ee,ie,se,de)),me||u!=="always"&&this.grid.hitTest(ee,ie,se,de,u,k)?{box:[ee,ie,se,de],placeable:!1,offscreen:!1,occluded:ce}:{box:[ee,ie,se,de],placeable:!0,offscreen:this.isOffscreen(ee,ie,se,de),occluded:ce}}placeCollisionCircles(r,u,d,m,y,w,A,P,k,L,N,z,j,Z){let te=[],ee=new a.P(u.anchorX,u.anchorY),ie=this.getPerspectiveRatio(ee.x,ee.y,w,Z),se=(k?y*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,w)/ie:y*ie)/a.aB,de={getElevation:Z,pitchedLabelPlaneMatrix:A,lineVertexArray:d,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ee,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:j},ce=Ls(se,m,u.lineOffsetX*se,u.lineOffsetY*se,!1,u,!1,de),me=!1,ye=!1,he=!0;if(ce){let Te=.5*N*ie+z,Oe=new a.P(-100,-100),Ie=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Pe=new Ir,Re=ce.first,We=ce.last,Xe=[];for(let Ut=Re.path.length-1;Ut>=1;Ut--)Xe.push(Re.path[Ut]);for(let Ut=1;Ut<We.path.length;Ut++)Xe.push(We.path[Ut]);let je=2.5*Te;if(k){let Ut=this.projectPathToScreenSpace(Xe,de);Xe=Ut.some(hr=>hr.signedDistanceFromCamera<=0)?[]:Ut.map(hr=>hr.point)}let dt=[];if(Xe.length>0){let Ut=Xe[0].clone(),hr=Xe[0].clone();for(let _r=1;_r<Xe.length;_r++)Ut.x=Math.min(Ut.x,Xe[_r].x),Ut.y=Math.min(Ut.y,Xe[_r].y),hr.x=Math.max(hr.x,Xe[_r].x),hr.y=Math.max(hr.y,Xe[_r].y);dt=Ut.x>=Oe.x&&hr.x<=Ie.x&&Ut.y>=Oe.y&&hr.y<=Ie.y?[Xe]:hr.x<Oe.x||Ut.x>Ie.x||hr.y<Oe.y||Ut.y>Ie.y?[]:a.ay([Xe],Oe.x,Oe.y,Ie.x,Ie.y)}for(let Ut of dt){Pe.reset(Ut,.25*Te);let hr=0;hr=Pe.length<=.5*Te?1:Math.ceil(Pe.paddedLength/je)+1;for(let _r=0;_r<hr;_r++){let vr=_r/Math.max(hr-1,1),Ur=Pe.lerp(vr),Yr=Ur.x+ii,Bt=Ur.y+ii;te.push(Yr,Bt,Te,0);let xr=Yr-Te,gi=Bt-Te,Ii=Yr+Te,zi=Bt+Te;if(he=he&&this.isOffscreen(xr,gi,Ii,zi),ye=ye||this.isInsideGrid(xr,gi,Ii,zi),r!=="always"&&this.grid.hitTestCircle(Yr,Bt,Te,r,L)&&(me=!0,!P))return{circles:[],offscreen:!1,collisionDetected:me}}}}return{circles:!P&&me||!ye||ie<this.perspectiveRatioCutoff?[]:te,offscreen:he,collisionDetected:me}}projectPathToScreenSpace(r,u){let d=function(m,y){let w=a.L();return a.aq(w,y.pitchedLabelPlaneMatrix),m.map(A=>{let P=mi(A.x,A.y,w,y.getElevation),k=y.transform.projectTileCoordinates(P.point.x,P.point.y,y.unwrappedTileID,y.getElevation);return k.point.x=(.5*k.point.x+.5)*y.width,k.point.y=(.5*-k.point.y+.5)*y.height,k})}(r,u);return function(m){let y=0,w=0,A=0,P=0;for(let k=0;k<m.length;k++)m[k].isOccluded?(A=k+1,P=0):(P++,P>w&&(w=P,y=A));return m.slice(y,y+w)}(d)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let u=[],d=new a.a2;for(let N of r){let z=new a.P(N.x+ii,N.y+ii);d.extend(z),u.push(z)}let{minX:m,minY:y,maxX:w,maxY:A}=d,P=this.grid.query(m,y,w,A).concat(this.ignoredGrid.query(m,y,w,A)),k={},L={};for(let N of P){let z=N.key;if(k[z.bucketInstanceId]===void 0&&(k[z.bucketInstanceId]={}),k[z.bucketInstanceId][z.featureIndex])continue;let j=[new a.P(N.x1,N.y1),new a.P(N.x2,N.y1),new a.P(N.x2,N.y2),new a.P(N.x1,N.y2)];a.az(u,j)&&(k[z.bucketInstanceId][z.featureIndex]=!0,L[z.bucketInstanceId]===void 0&&(L[z.bucketInstanceId]=[]),L[z.bucketInstanceId].push(z.featureIndex))}return L}insertCollisionBox(r,u,d,m,y,w){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:w,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,d,m,y,w){let A=d?this.ignoredGrid:this.grid,P={bucketInstanceId:m,featureIndex:y,collisionGroupID:w,overlapMode:u};for(let k=0;k<r.length;k+=4)A.insertCircle(P,r[k],r[k+1],r[k+2])}projectAndGetPerspectiveRatio(r,u,d,m,y){if(y){let w;m?(w=[r,u,m(r,u),1],a.aw(w,w,y)):(w=[r,u,0,1],qu(w,w,y));let A=w[3];return{x:(w[0]/A+1)/2*this.transform.width+ii,y:(-w[1]/A+1)/2*this.transform.height+ii,perspectiveRatio:.5+this.transform.cameraToCenterDistance/A*.5,isOccluded:!1,signedDistanceFromCamera:A}}{let w=this.transform.projectTileCoordinates(r,u,d,m);return{x:(w.point.x+1)/2*this.transform.width+ii,y:(1-w.point.y)/2*this.transform.height+ii,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(r,u,d,m){let y=this.transform.projectTileCoordinates(r,u,d,m);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(r,u,d,m){return d<ii||r>=this.screenRightBoundary||m<ii||u>this.screenBottomBoundary}isInsideGrid(r,u,d,m){return d>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){let r=a.ag([]);return a.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,u,d,m,y,w,A,P,k,L,N){let z=1,j=0,Z=0,te=1,ee=r.anchorPointX+A[0],ie=r.anchorPointY+A[1];if(w&&!y){let Xe=this.projectAndGetPerspectiveRatio(ee+1,ie,m,k,N),je=Xe.x-P.x,dt=Math.atan((Xe.y-P.y)/je)+(je<0?Math.PI:0),Ut=Math.sin(dt),hr=Math.cos(dt);z=hr,j=Ut,Z=-Ut,te=hr}else if(!w&&y){let Xe=ar(this.transform);z=Xe.vecEast[0],j=Xe.vecEast[1],Z=Xe.vecSouth[0],te=Xe.vecSouth[1]}let se=P.x,de=P.y,ce=u;y&&(se=ee,de=ie,ce=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),ce*=this.transform.getPitchedTextCorrection(ee,ie,m),L||(ce*=a.ah(.5+P.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),L&&(se+=z*L.x*ce+Z*L.y*ce,de+=j*L.x*ce+te*L.y*ce);let me=r.x1*ce,ye=r.x2*ce,he=(me+ye)/2,Te=r.y1*ce,Oe=r.y2*ce,Ie=(Te+Oe)/2,Pe=[{offsetX:me,offsetY:Te},{offsetX:he,offsetY:Te},{offsetX:ye,offsetY:Te},{offsetX:ye,offsetY:Ie},{offsetX:ye,offsetY:Oe},{offsetX:he,offsetY:Oe},{offsetX:me,offsetY:Oe},{offsetX:me,offsetY:Ie}],Re=[];for(let{offsetX:Xe,offsetY:je}of Pe)Re.push(new a.P(se+z*Xe+Z*je,de+j*Xe+te*je));let We=!1;if(y){let Xe=Re.map(je=>this.projectAndGetPerspectiveRatio(je.x,je.y,m,k,N));We=Xe.some(je=>!je.isOccluded),Re=Xe.map(je=>new a.P(je.x,je.y))}else We=!0;return{box:a.aA(Re),allPointsOccluded:!We}}}class $n{constructor(r,u,d,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Tr{constructor(r,u,d,m,y){this.text=new $n(r?r.text:null,u,d,y),this.icon=new $n(r?r.icon:null,u,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hx{constructor(r,u,d){this.text=r,this.icon=u,this.skipFade=d}}class uh{constructor(r,u,d,m,y){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=m,this.tileID=y}}class ov{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){let u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[r]}}function Ns(g,r,u,d,m){let{horizontalAlign:y,verticalAlign:w}=a.aH(g);return new a.P(-(y-.5)*r+d[0]*m,-(w-.5)*u+d[1]*m)}class Bs{constructor(r,u,d,m,y){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new Zd(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new ov(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){let u=this.terrain;return u?(d,m)=>u.getElevation(r,d,m):null}getBucketParts(r,u,d,m){let y=d.getBucket(u),w=d.latestFeatureIndex;if(!y||!w||u.id!==y.layerIds[0])return;let A=d.collisionBoxArray,P=y.layers[0].layout,k=y.layers[0].paint,L=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),N=d.tileSize/a.$,z=d.tileID.toUnwrapped(),j=P.get("text-rotation-alignment")==="map",Z=a.aC(d,1,this.transform.zoom),te=a.aD(this.collisionIndex.transform,d,k.get("text-translate"),k.get("text-translate-anchor")),ee=a.aD(this.collisionIndex.transform,d,k.get("icon-translate"),k.get("icon-translate-anchor")),ie=di(j,this.transform,Z);this.retainedQueryData[y.bucketInstanceId]=new uh(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,d.tileID);let se={bucket:y,layout:P,translationText:te,translationIcon:ee,unwrappedTileID:z,pitchedLabelPlaneMatrix:ie,scale:L,textPixelRatio:N,holdingForFade:d.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:a.an(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(let de of y.sortKeyRanges){let{sortKey:ce,symbolInstanceStart:me,symbolInstanceEnd:ye}=de;r.push({sortKey:ce,symbolInstanceStart:me,symbolInstanceEnd:ye,parameters:se})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:se})}attemptAnchorPlacement(r,u,d,m,y,w,A,P,k,L,N,z,j,Z,te,ee,ie,se,de,ce){let me=a.aE[r.textAnchor],ye=[r.textOffset0,r.textOffset1],he=Ns(me,d,m,ye,y),Te=this.collisionIndex.placeCollisionBox(u,z,P,k,L,A,w,ee,N.predicate,de,he,ce);if((!se||this.collisionIndex.placeCollisionBox(se,z,P,k,L,A,w,ie,N.predicate,de,he,ce).placeable)&&Te.placeable){let Oe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID].text&&(Oe=this.prevPlacement.variableOffsets[j.crossTileID].anchor),j.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[j.crossTileID]={textOffset:ye,width:d,height:m,anchor:me,textBoxScale:y,prevAnchor:Oe},this.markUsedJustification(Z,me,j,te),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,te,j),this.placedOrientations[j.crossTileID]=te),{shift:he,placedGlyphBoxes:Te}}}placeLayerBucketPart(r,u,d){let{bucket:m,layout:y,translationText:w,translationIcon:A,unwrappedTileID:P,pitchedLabelPlaneMatrix:k,textPixelRatio:L,holdingForFade:N,collisionBoxArray:z,partiallyEvaluatedTextSize:j,collisionGroup:Z}=r.parameters,te=y.get("text-optional"),ee=y.get("icon-optional"),ie=a.aF(y,"text-overlap","text-allow-overlap"),se=ie==="always",de=a.aF(y,"icon-overlap","icon-allow-overlap"),ce=de==="always",me=y.get("text-rotation-alignment")==="map",ye=y.get("text-pitch-alignment")==="map",he=y.get("icon-text-fit")!=="none",Te=y.get("symbol-z-order")==="viewport-y",Oe=se&&(ce||!m.hasIconData()||ee),Ie=ce&&(se||!m.hasTextData()||te);!m.collisionArrays&&z&&m.deserializeCollisionBoxes(z);let Pe=this.retainedQueryData[m.bucketInstanceId].tileID,Re=this._getTerrainElevationFunc(Pe),We=this.transform.getFastPathSimpleProjectionMatrix(Pe),Xe=(je,dt,Ut)=>{var hr,_r;if(u[je.crossTileID])return;if(N)return void(this.placements[je.crossTileID]=new hx(!1,!1,!1));let vr=!1,Ur=!1,Yr=!0,Bt=null,xr={box:null,placeable:!1,offscreen:null,occluded:!1},gi={placeable:!1},Ii=null,zi=null,En=null,oo=0,Gs=0,Ws=0;dt.textFeatureIndex?oo=dt.textFeatureIndex:je.useRuntimeCollisionCircles&&(oo=je.featureIndex),dt.verticalTextFeatureIndex&&(Gs=dt.verticalTextFeatureIndex);let Ku=dt.textBox;if(Ku){let Zn=yi=>{let Pi=a.ao.horizontal;if(m.allowVerticalPlacement&&!yi&&this.prevPlacement){let Ma=this.prevPlacement.placedOrientations[je.crossTileID];Ma&&(this.placedOrientations[je.crossTileID]=Ma,Pi=Ma,this.markUsedOrientation(m,Pi,je))}return Pi},so=(yi,Pi)=>{if(m.allowVerticalPlacement&&je.numVerticalGlyphVertices>0&&dt.verticalTextBox){for(let Ma of m.writingModes)if(Ma===a.ao.vertical?(xr=Pi(),gi=xr):xr=yi(),xr&&xr.placeable)break}else xr=yi()},An=je.textAnchorOffsetStartIndex,Zs=je.textAnchorOffsetEndIndex;if(Zs===An){let yi=(Pi,Ma)=>{let _i=this.collisionIndex.placeCollisionBox(Pi,ie,L,Pe,P,ye,me,w,Z.predicate,Re,void 0,We);return _i&&_i.placeable&&(this.markUsedOrientation(m,Ma,je),this.placedOrientations[je.crossTileID]=Ma),_i};so(()=>yi(Ku,a.ao.horizontal),()=>{let Pi=dt.verticalTextBox;return m.allowVerticalPlacement&&je.numVerticalGlyphVertices>0&&Pi?yi(Pi,a.ao.vertical):{box:null,offscreen:null}}),Zn(xr&&xr.placeable)}else{let yi=a.aE[(_r=(hr=this.prevPlacement)===null||hr===void 0?void 0:hr.variableOffsets[je.crossTileID])===null||_r===void 0?void 0:_r.anchor],Pi=(_i,Lh,Xu)=>{let os=_i.x2-_i.x1,lo=_i.y2-_i.y1,Ks=je.textBoxScale,ib=he&&de==="never"?Lh:null,fa=null,nb=ie==="never"?1:2,Qv="never";yi&&nb++;for(let Cf=0;Cf<nb;Cf++){for(let Mf=An;Mf<Zs;Mf++){let Hs=m.textAnchorOffsets.get(Mf);if(yi&&Hs.textAnchor!==yi)continue;let ss=this.attemptAnchorPlacement(Hs,_i,os,lo,Ks,me,ye,L,Pe,P,Z,Qv,je,m,Xu,w,A,ib,Re);if(ss&&(fa=ss.placedGlyphBoxes,fa&&fa.placeable))return vr=!0,Bt=ss.shift,fa}yi?yi=null:Qv=ie}return d&&!fa&&(fa={box:this.collisionIndex.placeCollisionBox(Ku,"always",L,Pe,P,ye,me,w,Z.predicate,Re,void 0,We).box,offscreen:!1,placeable:!1,occluded:!1}),fa};so(()=>Pi(Ku,dt.iconBox,a.ao.horizontal),()=>{let _i=dt.verticalTextBox;return m.allowVerticalPlacement&&(!xr||!xr.placeable)&&je.numVerticalGlyphVertices>0&&_i?Pi(_i,dt.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}}),xr&&(vr=xr.placeable,Yr=xr.offscreen);let Ma=Zn(xr&&xr.placeable);if(!vr&&this.prevPlacement){let _i=this.prevPlacement.variableOffsets[je.crossTileID];_i&&(this.variableOffsets[je.crossTileID]=_i,this.markUsedJustification(m,_i.anchor,je,Ma))}}}if(Ii=xr,vr=Ii&&Ii.placeable,Yr=Ii&&Ii.offscreen,je.useRuntimeCollisionCircles){let Zn=m.text.placedSymbolArray.get(je.centerJustifiedTextSymbolIndex),so=a.ap(m.textSizeData,j,Zn),An=y.get("text-padding");zi=this.collisionIndex.placeCollisionCircles(ie,Zn,m.lineVertexArray,m.glyphOffsetArray,so,P,k,d,ye,Z.predicate,je.collisionCircleDiameter,An,w,Re),zi.circles.length&&zi.collisionDetected&&!d&&a.w("Collisions detected, but collision boxes are not shown"),vr=se||zi.circles.length>0&&!zi.collisionDetected,Yr=Yr&&zi.offscreen}if(dt.iconFeatureIndex&&(Ws=dt.iconFeatureIndex),dt.iconBox){let Zn=so=>this.collisionIndex.placeCollisionBox(so,de,L,Pe,P,ye,me,A,Z.predicate,Re,he&&Bt?Bt:void 0,We);gi&&gi.placeable&&dt.verticalIconBox?(En=Zn(dt.verticalIconBox),Ur=En.placeable):(En=Zn(dt.iconBox),Ur=En.placeable),Yr=Yr&&En.offscreen}let Hu=te||je.numHorizontalGlyphVertices===0&&je.numVerticalGlyphVertices===0,Kl=ee||je.numIconVertices===0;Hu||Kl?Kl?Hu||(Ur=Ur&&vr):vr=Ur&&vr:Ur=vr=Ur&&vr;let Hl=Ur&&En.placeable;if(vr&&Ii.placeable&&this.collisionIndex.insertCollisionBox(Ii.box,ie,y.get("text-ignore-placement"),m.bucketInstanceId,gi&&gi.placeable&&Gs?Gs:oo,Z.ID),Hl&&this.collisionIndex.insertCollisionBox(En.box,de,y.get("icon-ignore-placement"),m.bucketInstanceId,Ws,Z.ID),zi&&vr&&this.collisionIndex.insertCollisionCircles(zi.circles,ie,y.get("text-ignore-placement"),m.bucketInstanceId,oo,Z.ID),d&&this.storeCollisionData(m.bucketInstanceId,Ut,dt,Ii,En,zi),je.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[je.crossTileID]=new hx((vr||Oe)&&!(Ii!=null&&Ii.occluded),(Ur||Ie)&&!(En!=null&&En.occluded),Yr||m.justReloaded),u[je.crossTileID]=!0};if(Te){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let je=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let dt=je.length-1;dt>=0;--dt){let Ut=je[dt];Xe(m.symbolInstances.get(Ut),m.collisionArrays[Ut],Ut)}}else for(let je=r.symbolInstanceStart;je<r.symbolInstanceEnd;je++)Xe(m.symbolInstances.get(je),m.collisionArrays[je],je);m.justReloaded=!1}storeCollisionData(r,u,d,m,y,w){if(d.textBox||d.iconBox){let A,P;this.collisionBoxArrays.has(r)?A=this.collisionBoxArrays.get(r):(A=new Map,this.collisionBoxArrays.set(r,A)),A.has(u)?P=A.get(u):(P={text:null,icon:null},A.set(u,P)),d.textBox&&(P.text=m.box),d.iconBox&&(P.icon=y.box)}if(w){let A=this.collisionCircleArrays[r];A===void 0&&(A=this.collisionCircleArrays[r]=[]);for(let P=0;P<w.circles.length;P+=4)A.push(w.circles[P+0]-ii),A.push(w.circles[P+1]-ii),A.push(w.circles[P+2]),A.push(w.collisionDetected?1:0)}}markUsedJustification(r,u,d,m){let y;y=m===a.ao.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.aG(u)];let w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(let A of w)A>=0&&(r.text.placedSymbolArray.get(A).crossTileID=y>=0&&A!==y?0:d.crossTileID)}markUsedOrientation(r,u,d){let m=u===a.ao.horizontal||u===a.ao.horizontalOnly?u:0,y=u===a.ao.vertical?u:0,w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(let A of w)r.text.placedSymbolArray.get(A).placedOrientation=m;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;let u=this.prevPlacement,d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;let m=u?u.symbolFadeChange(r):1,y=u?u.opacities:{},w=u?u.variableOffsets:{},A=u?u.placedOrientations:{};for(let P in this.placements){let k=this.placements[P],L=y[P];L?(this.opacities[P]=new Tr(L,m,k.text,k.icon),d=d||k.text!==L.text.placed||k.icon!==L.icon.placed):(this.opacities[P]=new Tr(null,m,k.text,k.icon,k.skipFade),d=d||k.text||k.icon)}for(let P in y){let k=y[P];if(!this.opacities[P]){let L=new Tr(k,m,!1,!1);L.isHidden()||(this.opacities[P]=L,d=d||k.text.placed||k.icon.placed)}}for(let P in w)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=w[P]);for(let P in A)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=A[P]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){let d={};for(let m of u){let y=m.getBucket(r);y&&m.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,d,m.collisionBoxArray)}}updateBucketOpacities(r,u,d,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();let y=r.layers[0],w=y.layout,A=new Tr(null,0,!1,!1,!0),P=w.get("text-allow-overlap"),k=w.get("icon-allow-overlap"),L=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),N=w.get("text-rotation-alignment")==="map",z=w.get("text-pitch-alignment")==="map",j=w.get("icon-text-fit")!=="none",Z=new Tr(null,0,P&&(k||!r.hasIconData()||w.get("icon-optional")),k&&(P||!r.hasTextData()||w.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);let te=(ie,se,de)=>{for(let ce=0;ce<se/4;ce++)ie.opacityVertexArray.emplaceBack(de);ie.hasVisibleVertices=ie.hasVisibleVertices||de!==Pu},ee=this.collisionBoxArrays.get(r.bucketInstanceId);for(let ie=0;ie<r.symbolInstances.length;ie++){let se=r.symbolInstances.get(ie),{numHorizontalGlyphVertices:de,numVerticalGlyphVertices:ce,crossTileID:me}=se,ye=this.opacities[me];d[me]?ye=A:ye||(ye=Z,this.opacities[me]=ye),d[me]=!0;let he=se.numIconVertices>0,Te=this.placedOrientations[se.crossTileID],Oe=Te===a.ao.vertical,Ie=Te===a.ao.horizontal||Te===a.ao.horizontalOnly;if(de>0||ce>0){let Re=lv(ye.text);te(r.text,de,Oe?Pu:Re),te(r.text,ce,Ie?Pu:Re);let We=ye.text.isHidden();[se.rightJustifiedTextSymbolIndex,se.centerJustifiedTextSymbolIndex,se.leftJustifiedTextSymbolIndex].forEach(dt=>{dt>=0&&(r.text.placedSymbolArray.get(dt).hidden=We||Oe?1:0)}),se.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(se.verticalPlacedTextSymbolIndex).hidden=We||Ie?1:0);let Xe=this.variableOffsets[se.crossTileID];Xe&&this.markUsedJustification(r,Xe.anchor,se,Te);let je=this.placedOrientations[se.crossTileID];je&&(this.markUsedJustification(r,"left",se,je),this.markUsedOrientation(r,je,se))}if(he){let Re=lv(ye.icon),We=!(j&&se.verticalPlacedIconSymbolIndex&&Oe);se.placedIconSymbolIndex>=0&&(te(r.icon,se.numIconVertices,We?Re:Pu),r.icon.placedSymbolArray.get(se.placedIconSymbolIndex).hidden=ye.icon.isHidden()),se.verticalPlacedIconSymbolIndex>=0&&(te(r.icon,se.numVerticalIconVertices,We?Pu:Re),r.icon.placedSymbolArray.get(se.verticalPlacedIconSymbolIndex).hidden=ye.icon.isHidden())}let Pe=ee&&ee.has(ie)?ee.get(ie):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){let Re=r.collisionArrays[ie];if(Re){let We=new a.P(0,0);if(Re.textBox||Re.verticalTextBox){let Xe=!0;if(L){let je=this.variableOffsets[me];je?(We=Ns(je.anchor,je.width,je.height,je.textOffset,je.textBoxScale),N&&We._rotate(z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Xe=!1}if(Re.textBox||Re.verticalTextBox){let je;Re.textBox&&(je=Oe),Re.verticalTextBox&&(je=Ie),sv(r.textCollisionBox.collisionVertexArray,ye.text.placed,!Xe||je,Pe.text,We.x,We.y)}}if(Re.iconBox||Re.verticalIconBox){let Xe=!!(!Ie&&Re.verticalIconBox),je;Re.iconBox&&(je=Xe),Re.verticalIconBox&&(je=!Xe),sv(r.iconCollisionBox.collisionVertexArray,ye.icon.placed,je,Pe.icon,j?We.x:0,j?We.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){let d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function sv(g,r,u,d,m,y){d&&d.length!==0||(d=[0,0,0,0]);let w=d[0]-ii,A=d[1]-ii,P=d[2]-ii,k=d[3]-ii;g.emplaceBack(r?1:0,u?1:0,m||0,y||0,w,A),g.emplaceBack(r?1:0,u?1:0,m||0,y||0,P,A),g.emplaceBack(r?1:0,u?1:0,m||0,y||0,P,k),g.emplaceBack(r?1:0,u?1:0,m||0,y||0,w,k)}let dx=Math.pow(2,25),fx=Math.pow(2,24),Iu=Math.pow(2,17),px=Math.pow(2,16),uq=Math.pow(2,9),cq=Math.pow(2,8),hq=Math.pow(2,1);function lv(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;let r=g.placed?1:0,u=Math.floor(127*g.opacity);return u*dx+r*fx+u*Iu+r*px+u*uq+r*cq+u*hq+r}let Pu=0;class uv{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,d,m,y){let w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(w,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((A,P)=>A.sortKey-P.sortKey));this._currentPartIndex<w.length;)if(u.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class cv{constructor(r,u,d,m,y,w,A,P){this.placement=new Bs(r,u,w,A,P),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,u,d){let m=O.now(),y=()=>!this._forceFullPlacement&&O.now()-m>2;for(;this._currentPlacementIndex>=0;){let w=u[r[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=A)&&(!w.maxzoom||w.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new uv(w)),this._inProgressLayer.continuePlacement(d[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}let Cu=512/a.$/2;class hv{constructor(r,u,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};let m=new Map;for(let y=0;y<u.length;y++){let w=u.get(y),A=w.key,P=m.get(A);P?P.push(w):m.set(A,[w])}for(let[y,w]of m){let A={positions:w.map(P=>({x:Math.floor(P.anchorX*Cu),y:Math.floor(P.anchorY*Cu)})),crossTileIDs:w.map(P=>P.crossTileID)};if(A.positions.length>128){let P=new a.aI(A.positions.length,16,Uint16Array);for(let{x:k,y:L}of A.positions)P.add(k,L);P.finish(),delete A.positions,A.index=P}this._symbolsByKey[y]=A}}getScaledCoordinates(r,u){let{x:d,y:m,z:y}=this.tileID.canonical,{x:w,y:A,z:P}=u.canonical,k=Cu/Math.pow(2,P-y),L=(A*a.$+r.anchorY)*k,N=m*a.$*Cu;return{x:Math.floor((w*a.$+r.anchorX)*k-d*a.$*Cu),y:Math.floor(L-N)}}findMatches(r,u,d){let m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let y=0;y<r.length;y++){let w=r.get(y);if(w.crossTileID)continue;let A=this._symbolsByKey[w.key];if(!A)continue;let P=this.getScaledCoordinates(w,u);if(A.index){let k=A.index.range(P.x-m,P.y-m,P.x+m,P.y+m).sort();for(let L of k){let N=A.crossTileIDs[L];if(!d[N]){d[N]=!0,w.crossTileID=N;break}}}else if(A.positions)for(let k=0;k<A.positions.length;k++){let L=A.positions[k],N=A.crossTileIDs[k];if(Math.abs(L.x-P.x)<=m&&Math.abs(L.y-P.y)<=m&&!d[N]){d[N]=!0,w.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class dv{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class dq{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){let u=Math.round((r-this.lng)/360);if(u!==0)for(let d in this.indexes){let m=this.indexes[d],y={};for(let w in m){let A=m[w];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+u),y[A.tileID.key]=A}this.indexes[d]=y}this.lng=r}addBucket(r,u,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<u.symbolInstances.length;y++)u.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});let m=this.usedCrossTileIDs[r.overscaledZ];for(let y in this.indexes){let w=this.indexes[y];if(Number(y)>r.overscaledZ)for(let A in w){let P=w[A];P.tileID.isChildOf(r)&&P.findMatches(u.symbolInstances,r,m)}else{let A=w[r.scaledTo(Number(y)).key];A&&A.findMatches(u.symbolInstances,r,m)}}for(let y=0;y<u.symbolInstances.length;y++){let w=u.symbolInstances.get(y);w.crossTileID||(w.crossTileID=d.generate(),m[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new hv(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(let d of u.getCrossTileIDsLists())for(let m of d)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(let d in this.indexes){let m=this.indexes[d];for(let y in m)r[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,m[y]),delete m[y],u=!0)}return u}}class Mu{constructor(){this.layerIndexes={},this.crossTileIDs=new dv,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,d){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new dq);let y=!1,w={};m.handleWrapJump(d);for(let A of u){let P=A.getBucket(r);P&&r.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(A.tileID,P,this.crossTileIDs)&&(y=!0),w[P.bucketInstanceId]=!0)}return m.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(r){let u={};r.forEach(d=>{u[d]=!0});for(let d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}var ch="void main() {fragColor=vec4(1.0);}";let Ja={prelude:Xt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Xt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Xt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Xt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Xt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Xt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Xt(ch,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Xt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Xt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Xt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Xt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Xt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Xt(ch,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Xt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Xt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Xt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Xt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Xt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Xt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Xt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Xt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Xt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Xt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Xt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Xt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Xt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Xt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Xt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Xt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Xt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Xt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Xt(g,r){let u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/in ([\w]+) ([\w]+)/g),m=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(m):m,A={};return{fragmentSource:g=g.replace(u,(P,k,L,N,z)=>(A[z]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${z}
in ${L} ${N} ${z};
#else
uniform ${L} ${N} u_${z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${z}
    ${L} ${N} ${z} = u_${z};
#endif
`)),vertexSource:r=r.replace(u,(P,k,L,N,z)=>{let j=N==="float"?"vec2":"vec4",Z=z.match(/color/)?"color":j;return A[z]?k==="define"?`
#ifndef HAS_UNIFORM_u_${z}
uniform lowp float u_${z}_t;
in ${L} ${j} a_${z};
out ${L} ${N} ${z};
#else
uniform ${L} ${N} u_${z};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${z}
    ${z} = a_${z};
#else
    ${L} ${N} ${z} = u_${z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${z}
    ${z} = unpack_mix_${Z}(a_${z}, u_${z}_t);
#else
    ${L} ${N} ${z} = u_${z};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${z}
uniform lowp float u_${z}_t;
in ${L} ${j} a_${z};
#else
uniform ${L} ${N} u_${z};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${z}
    ${L} ${N} ${z} = a_${z};
#else
    ${L} ${N} ${z} = u_${z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${z}
    ${L} ${N} ${z} = unpack_mix_${Z}(a_${z}, u_${z}_t);
#else
    ${L} ${N} ${z} = u_${z};
#endif
`}),staticAttributes:d,staticUniforms:w}}class Ml{constructor(r,u,d){this.vertexBuffer=r,this.indexBuffer=u,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var js=a.aJ([{name:"a_pos",type:"Int16",components:2}]);let rs="#define PROJECTION_MERCATOR",Rl="mercator";class Yt{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Rl}get shaderDefine(){return rs}get shaderPreludeCode(){return Ja.projectionMercator}get vertexShaderPreludeCode(){return Ja.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,u,d,m,y){if(this._cachedMesh)return this._cachedMesh;let w=new a.aL;w.emplaceBack(0,0),w.emplaceBack(a.$,0),w.emplaceBack(0,a.$),w.emplaceBack(a.$,a.$);let A=r.createVertexBuffer(w,js.members),P=a.aM.simpleSegment(0,0,4,2),k=new a.aN;k.emplaceBack(1,0,2),k.emplaceBack(1,2,3);let L=r.createIndexBuffer(k);return this._cachedMesh=new Ml(A,L,P),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Ol{constructor(r=0,u=0,d=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=d,this.right=m}interpolate(r,u,d){return u.top!=null&&r.top!=null&&(this.top=a.C.number(r.top,u.top,d)),u.bottom!=null&&r.bottom!=null&&(this.bottom=a.C.number(r.bottom,u.bottom,d)),u.left!=null&&r.left!=null&&(this.left=a.C.number(r.left,u.left,d)),u.right!=null&&r.right!=null&&(this.right=a.C.number(r.right,u.right,d)),this}getCenter(r,u){let d=a.ah((this.left+r-this.right)/2,0,r),m=a.ah((this.top+u-this.bottom)/2,0,u);return new a.P(d,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Ol(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Kd(g,r){if(!g.renderWorldCopies||g.lngRange)return;let u=r.lng-g.center.lng;r.lng+=u>180?-360:u<-180?360:0}function Hd(g){return Math.max(0,Math.floor(g))}class bn{constructor(r,u,d,m,y,w){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=u||0,this._maxZoom=d||22,this._minPitch=m==null?0:m,this._maxPitch=y==null?60:y,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Hd(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ol,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,u,d){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Hd(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Ol(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!d&&r.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){let u=a.aO(r,-180,180)*Math.PI/180;var d,m,y,w,A,P,k,L,N;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=b(),d=this._rotationMatrix,y=-this._bearingInRadians,w=(m=this._rotationMatrix)[0],A=m[1],P=m[2],k=m[3],L=Math.sin(y),N=Math.cos(y),d[0]=w*N+P*L,d[1]=A*N+k*L,d[2]=w*-L+P*N,d[3]=A*-L+k*N)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){let u=a.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){let u=r/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(r){r=a.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=a.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){let u=this.getConstrained(this._center,r).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=a.af(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,u){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,d){this._unmodified=!1,this._edgeInsets.interpolate(r,u,d),this._constrain(),this._calcMatrices()}resize(r,u,d=!0){this._width=r,this._height=u,d&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Rr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(r,u){return this._callbacks.getConstrained(r,u)}getCameraQueryGeometry(r,u){if(u.length===1)return[u[0],r];{let{minX:d,minY:m,maxX:y,maxY:w}=a.a2.fromPoints(u).extend(r);return[new a.P(d,m),new a.P(y,m),new a.P(y,w),new a.P(d,w),new a.P(d,m)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let r=this._unmodified,{center:u,zoom:d}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(d),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=a.ag(new Float64Array(16));a.N(r,r,[this._width/2,-this._height/2,1]),a.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=a.ag(new Float64Array(16)),a.N(r,r,[1,-1,1]),a.M(r,r,[-1,-1,0]),a.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,u,d,m){let y=d!==void 0?d:this.bearing,w=m=m!==void 0?m:this.pitch,A=a.a1.fromLngLat(r,u),P=-Math.cos(a.ae(w)),k=Math.sin(a.ae(w)),L=k*Math.sin(a.ae(y)),N=-k*Math.cos(a.ae(y)),z=this.elevation,j=u-z,Z;P*j>=0||Math.abs(P)<.1?(Z=1e4,z=u+Z*P):Z=-j/P;let te,ee,ie=a.aQ(1,A.y),se=0;do{if(se+=1,se>10)break;ee=Z/ie,te=new a.a1(A.x+L*ee,A.y+N*ee),ie=1/te.meterInMercatorCoordinateUnits()}while(Math.abs(Z-ee*ie)>1e-12);return{center:te.toLngLat(),elevation:z,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/ee/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;let u=a.aj(1,this.center.lat)*this.worldSize,d=this.cameraToCenterDistance/u,m=a.a1.fromLngLat(this.center,this.elevation),y=qe(this.center,this.elevation,this.pitch,this.bearing,d);this._elevation=r;let w=this.calculateCenterFromCameraLngLatAlt(y.toLngLat(),a.aQ(y.z,m.y),this.bearing,this.pitch);this._elevation=w.elevation,this._center=w.center,this.setZoom(w.zoom)}getCameraPoint(){let r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let r=a.aj(1,this.center.lat)*this.worldSize;return qe(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];let u=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/u,r.canonical.y/u,1/u/a.$,1/u/a.$]}}class Li{constructor(r,u){this.min=r,this.max=u,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(r){let u=[r%2==0,r<2],d=a.aT(this.min),m=a.aT(this.max);for(let y=0;y<u.length;y++)d[y]=u[y]?this.min[y]:this.center[y],m[y]=u[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new Li(d,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let u=!0;for(let d=0;d<r.planes.length;d++){let m=this.intersectsPlane(r.planes[d]);if(m===0)return 0;m===1&&(u=!1)}return u?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let u=r[3],d=r[3];for(let m=0;m<3;m++)r[m]>0?(u+=r[m]*this.min[m],d+=r[m]*this.max[m]):(d+=r[m]*this.min[m],u+=r[m]*this.max[m]);return u>=0?2:d<0?0:1}}class wn{distanceToTile2d(r,u,d,m){let y=m.distanceX([r,u]),w=m.distanceY([r,u]);return Math.hypot(y,w)}getWrap(r,u,d){return d}getTileBoundingVolume(r,u,d,m){var y,w;let A=0,P=0;if(m!=null&&m.terrain){let L=new a.Z(r.z,u,r.z,r.x,r.y),N=m.terrain.getMinMaxElevation(L);A=(y=N.minElevation)!==null&&y!==void 0?y:Math.min(0,d),P=(w=N.maxElevation)!==null&&w!==void 0?w:Math.max(0,d)}let k=1<<r.z;return new Li([u+r.x/k,r.y/k,A],[u+(r.x+1)/k,(r.y+1)/k,P])}allowVariableZoom(r,u){let d=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,m=a.ah(78.5-d/2,0,60);return!!u.terrain||r.pitch>m}allowWorldCopies(){return!0}prepareNextFrame(){}}class vi{constructor(r,u,d){this.points=r,this.planes=u,this.aabb=d}static fromInvProjectionMatrix(r,u=1,d=0,m,y){let w=y?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],A=Math.pow(2,d),P=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>function(j,Z,te,ee){let ie=a.aw([],j,Z),se=1/ie[3]/te*ee;return a.aY(ie,ie,[se,se,1/ie[3],se])}(z,r,u,A));m&&function(z,j,Z,te){let ee=te?4:0,ie=te?0:4,se=0,de=[],ce=[];for(let he=0;he<4;he++){let Te=a.aU([],z[he+ie],z[he+ee]),Oe=a.aZ(Te);a.aR(Te,Te,1/Oe),de.push(Oe),ce.push(Te)}for(let he=0;he<4;he++){let Te=a.a_(z[he+ee],ce[he],Z);se=Te!==null&&Te>=0?Math.max(se,Te):Math.max(se,de[he])}let me=function(he,Te){let Oe=a.aU([],he[Te[0]],he[Te[1]]),Ie=a.aU([],he[Te[2]],he[Te[1]]),Pe=[0,0,0,0];return a.aV(Pe,a.aW([],Oe,Ie)),Pe[3]=-a.aX(Pe,he[Te[0]]),Pe}(z,j),ye=function(he,Te){let Oe=a.a$(he),Ie=a.b0([],he,1/Oe),Pe=a.aU([],Te,a.aR([],Ie,a.aX(Te,Ie))),Re=a.a$(Pe);if(Re>0){let We=Math.sqrt(1-Ie[3]*Ie[3]),Xe=a.aR([],Ie,-Ie[3]),je=a.aS([],Xe,a.aR([],Pe,We/Re));return a.b1(Te,je)}return null}(Z,me);if(ye!==null){let he=ye/a.aX(ce[0],me);se=Math.min(se,he)}for(let he=0;he<4;he++){let Te=Math.min(se,de[he]);z[he+ie]=[z[he+ee][0]+ce[he][0]*Te,z[he+ee][1]+ce[he][1]*Te,z[he+ee][2]+ce[he][2]*Te,1]}}(P,w[0],m,y);let k=w.map(z=>{let j=a.aU([],P[z[0]],P[z[1]]),Z=a.aU([],P[z[2]],P[z[1]]),te=a.aV([],a.aW([],j,Z)),ee=-a.aX(te,P[z[1]]);return te.concat(ee)}),L=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],N=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let z of P)for(let j=0;j<3;j++)L[j]=Math.min(L[j],z[j]),N[j]=Math.max(N[j],z[j]);return new vi(P,k,new Li(L,N))}}class Er{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,d){return this._helper.interpolatePadding(r,u,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u,d=!0){this._helper.resize(r,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,u){}constructor(r,u,d,m,y){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new bn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(w,A)=>this.getConstrained(w,A)},r,u,d,m,y),this._coveringTilesDetailsProvider=new wn}clone(){let r=new Er;return r.apply(this),r}apply(r,u,d){this._helper.apply(r,u,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){let u=[new a.b2(0,r)];if(this._helper._renderWorldCopies){let d=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),y=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),A=Math.floor(Math.min(d.x,m.x,y.x,w.x)),P=Math.floor(Math.max(d.x,m.x,y.x,w.x)),k=1;for(let L=A-k;L<=P+k;L++)L!==0&&u.push(new a.b2(L,r))}return u}getCameraFrustum(){return vi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){let u=this.screenPointToLocation(this.centerPoint,r),d=r?r.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(r,u){let d=a.aj(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(u,d),y=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),w=a.a1.fromLngLat(r),A=new a.a1(w.x-(m.x-y.x),w.y-(m.y-y.y));this.setCenter(A==null?void 0:A.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,u){return u?this.coordinatePoint(a.a1.fromLngLat(r),u.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(r))}screenPointToLocation(r,u){var d;return(d=this.screenPointToMercatorCoordinate(r,u))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(r,u){if(u){let d=u.pointCoordinate(r);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,u){let d=u||0,m=[r.x,r.y,0,1],y=[r.x,r.y,1,1];a.aw(m,m,this._pixelMatrixInverse),a.aw(y,y,this._pixelMatrixInverse);let w=m[3],A=y[3],P=m[1]/w,k=y[1]/A,L=m[2]/w,N=y[2]/A,z=L===N?0:(d-L)/(N-L);return new a.a1(a.C.number(m[0]/w,y[0]/A,z)/this.worldSize,a.C.number(P,k,z)/this.worldSize,d)}coordinatePoint(r,u=0,d=this._pixelMatrix){let m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return a.aw(m,m,d),new a.P(m[0]/m[3],m[1]/m[3])}getBounds(){let r=Math.max(0,this._helper._height/2-ve(this));return new Rr().extend(this.screenPointToLocation(new a.P(0,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(r,u){return u?u.pointCoordinate(r)!=null:r.y>this.height/2-ve(this)}calculatePosMatrix(r,u=!1,d){var m;let y=(m=r.key)!==null&&m!==void 0?m:a.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),w=u?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(y)){let k=w.get(y);return d?k.f32:k.f64}let A=be(r,this.worldSize);a.O(A,u?this._alignedProjMatrix:this._viewProjMatrix,A);let P={f64:A,f32:new Float32Array(A)};return w.set(y,P),d?P.f32:P.f64}calculateFogMatrix(r){let u=r.key,d=this._fogMatrixCacheF32;if(d.has(u))return d.get(u);let m=be(r,this.worldSize);return a.O(m,this._fogMatrix,m),d.set(u,new Float32Array(m)),d.get(u)}getConstrained(r,u){u=a.ah(+u,this.minZoom,this.maxZoom);let d={center:new a.S(r.lng,r.lat),zoom:u},m=this._helper._lngRange;if(!this._helper._renderWorldCopies&&m===null){let de=179.9999999999;m=[-de,de]}let y=this.tileSize*a.af(d.zoom),w=0,A=y,P=0,k=y,L=0,N=0,{x:z,y:j}=this.size;if(this._helper._latRange){let de=this._helper._latRange;w=a.U(de[1])*y,A=a.U(de[0])*y,A-w<j&&(L=j/(A-w))}m&&(P=a.aO(a.V(m[0])*y,0,y),k=a.aO(a.V(m[1])*y,0,y),k<P&&(k+=y),k-P<z&&(N=z/(k-P)));let{x:Z,y:te}=Y(y,r),ee,ie,se=Math.max(N||0,L||0);if(se){let de=new a.P(N?(k+P)/2:Z,L?(A+w)/2:te);return d.center=ae(y,de).wrap(),d.zoom+=a.ak(se),d}if(this._helper._latRange){let de=j/2;te-de<w&&(ie=w+de),te+de>A&&(ie=A-de)}if(m){let de=(P+k)/2,ce=Z;this._helper._renderWorldCopies&&(ce=a.aO(Z,de-y/2,de+y/2));let me=z/2;ce-me<P&&(ee=P+me),ce+me>k&&(ee=k-me)}if(ee!==void 0||ie!==void 0){let de=new a.P(ee!=null?ee:Z,ie!=null?ie:te);d.center=ae(y,de).wrap()}return d}calculateCenterFromCameraLngLatAlt(r,u,d,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,d,m)}_calculateNearFarZIfNeeded(r,u,d){if(!this._helper.autoCalculateNearFarZ)return;let m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),y=r-m*this._helper._pixelPerMeter/Math.cos(u),w=m<0?y:r,A=Math.PI/2+this.pitchInRadians,P=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+d.y/this.height),k=Math.sin(P)*w/Math.sin(a.ah(Math.PI-A-P,.01,Math.PI-.01)),L=ve(this),N=Math.atan(L/this._helper.cameraToCenterDistance),z=a.ae(.75),j=N>z?2*N*(.5+d.y/(2*L)):z,Z=Math.sin(j)*w/Math.sin(a.ah(Math.PI-A-j,.01,Math.PI-.01)),te=Math.min(k,Z);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*te+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let r=this.centerOffset,u=Y(this.worldSize,this.center),d=u.x,m=u.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;let y=a.ae(Math.min(this.pitch,W)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(y)),A;this._calculateNearFarZIfNeeded(w,y,r),A=new Float64Array(16),a.b4(A,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,A),A[8]=2*-r.x/this._helper._width,A[9]=2*r.y/this._helper._height,this._projectionMatrix=a.b5(A),a.N(A,A,[1,-1,1]),a.M(A,A,[0,0,-this._helper.cameraToCenterDistance]),a.b6(A,A,-this.rollInRadians),a.b7(A,A,this.pitchInRadians),a.b6(A,A,-this.bearingInRadians),a.M(A,A,[-d,-m,0]),this._mercatorMatrix=a.N([],A,[this.worldSize,this.worldSize,this.worldSize]),a.N(A,A,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,A),a.M(A,A,[0,0,-this.elevation]),this._viewProjMatrix=A,this._invViewProjMatrix=a.aq([],A);let P=[0,0,-1,1];a.aw(P,P,this._invViewProjMatrix),this._cameraPosition=[P[0]/P[3],P[1]/P[3],P[2]/P[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-d,-m,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,A);let k=this._helper._width%2/2,L=this._helper._height%2/2,N=Math.cos(this.bearingInRadians),z=Math.sin(-this.bearingInRadians),j=d-Math.round(d)+N*k+z*L,Z=m-Math.round(m)+N*L+z*k,te=new Float64Array(A);if(a.M(te,te,[j>.5?j-1:j,Z>.5?Z-1:Z,0]),this._alignedProjMatrix=te,A=a.aq(new Float64Array(16),this._pixelMatrix),!A)throw new Error("failed to invert matrix");this._pixelMatrixInverse=A,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let r=this.screenPointToMercatorCoordinate(new a.P(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.aw(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let r=a.aj(1,this.center.lat)*this.worldSize;return qe(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,u){let d=a.a1.fromLngLat(r),m=[d.x*this.worldSize,d.y*this.worldSize,u,1];return a.aw(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(r){let{overscaledTileID:u,aligned:d,applyTerrainMatrix:m}=r,y=this._helper.getMercatorTileCoordinates(u),w=u?this.calculatePosMatrix(u,d,!0):null,A;return A=u&&u.terrainRttPosMatrix32f&&m?u.terrainRttPosMatrix32f:w||a.b8(),{mainMatrix:A,tileMercatorCoords:y,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:A}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,u,d){return 1}transformLightDirection(r){return a.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,u,d,m){let y=this.calculatePosMatrix(d),w;m?(w=[r,u,m(r,u),1],a.aw(w,w,y)):(w=[r,u,0,1],qu(w,w,y));let A=w[3];return{point:new a.P(w[0]/A,w[1]/A),signedDistanceFromCamera:A,isOccluded:!1}}populateCache(r){for(let u of r)this.calculatePosMatrix(u)}getMatrixForModel(r,u){let d=a.a1.fromLngLat(r,u),m=d.meterInMercatorCoordinateUnits(),y=a.b9();return a.M(y,y,[d.x,d.y,d.z]),a.b6(y,y,Math.PI),a.b7(y,y,Math.PI/2),a.N(y,y,[-m,m,m]),y}getProjectionDataForCustomLayer(r=!0){let u=new a.Z(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:r}),m=be(u,this.worldSize);a.O(m,this._viewProjMatrix,m),d.tileMercatorCoords=[0,0,1,1];let y=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],w=a.ba();return a.N(w,m,y),d.fallbackMatrix=w,d.mainMatrix=w,d}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function mx(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Sn(g){if(g.useSlerp){if(g.k<1){let r=a.bb(g.startEulerAngles.roll,g.startEulerAngles.pitch,g.startEulerAngles.bearing),u=a.bb(g.endEulerAngles.roll,g.endEulerAngles.pitch,g.endEulerAngles.bearing),d=new Float64Array(4);a.bc(d,r,u,g.k);let m=a.bd(d);g.tr.setRoll(m.roll),g.tr.setPitch(m.pitch),g.tr.setBearing(m.bearing)}else g.tr.setRoll(g.endEulerAngles.roll),g.tr.setPitch(g.endEulerAngles.pitch),g.tr.setBearing(g.endEulerAngles.bearing);}else g.tr.setRoll(a.C.number(g.startEulerAngles.roll,g.endEulerAngles.roll,g.k)),g.tr.setPitch(a.C.number(g.startEulerAngles.pitch,g.endEulerAngles.pitch,g.k)),g.tr.setBearing(a.C.number(g.startEulerAngles.bearing,g.endEulerAngles.bearing,g.k))}function ha(g,r,u,d,m){let y=m.padding,w=Y(m.worldSize,u.getNorthWest()),A=Y(m.worldSize,u.getNorthEast()),P=Y(m.worldSize,u.getSouthEast()),k=Y(m.worldSize,u.getSouthWest()),L=a.ae(-d),N=w.rotate(L),z=A.rotate(L),j=P.rotate(L),Z=k.rotate(L),te=new a.P(Math.max(N.x,z.x,Z.x,j.x),Math.max(N.y,z.y,Z.y,j.y)),ee=new a.P(Math.min(N.x,z.x,Z.x,j.x),Math.min(N.y,z.y,Z.y,j.y)),ie=te.sub(ee),se=(m.width-(y.left+y.right+r.left+r.right))/ie.x,de=(m.height-(y.top+y.bottom+r.top+r.bottom))/ie.y;if(de<0||se<0)return void mx();let ce=Math.min(a.ak(m.scale*Math.min(se,de)),g.maxZoom),me=a.P.convert(g.offset),ye=new a.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(a.ae(d)),he=me.add(ye).mult(m.scale/a.af(ce));return{center:ae(m.worldSize,w.add(P).div(2).sub(he)),zoom:ce,bearing:d}}class cn{get useGlobeControls(){return!1}handlePanInertia(r,u){let d=r.mag(),m=Math.abs(ve(u));return{easingOffset:r.mult(Math.min(.75*m/d,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(r,u){r.bearingDelta&&u.setBearing(u.bearing+r.bearingDelta),r.pitchDelta&&u.setPitch(u.pitch+r.pitchDelta),r.rollDelta&&u.setRoll(u.roll+r.rollDelta),r.zoomDelta&&u.setZoom(u.zoom+r.zoomDelta)}handleMapControlsPan(r,u,d){r.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(d,r.around)}cameraForBoxAndBearing(r,u,d,m,y){return ha(r,u,d,m,y)}handleJumpToCenterZoom(r,u){r.zoom!==(u.zoom!==void 0?+u.zoom:r.zoom)&&r.setZoom(+u.zoom),u.center!==void 0&&r.setCenter(a.S.convert(u.center))}handleEaseTo(r,u){let d=r.zoom,m=r.padding,y={roll:r.roll,pitch:r.pitch,bearing:r.bearing},w={roll:u.roll===void 0?r.roll:u.roll,pitch:u.pitch===void 0?r.pitch:u.pitch,bearing:u.bearing===void 0?r.bearing:u.bearing},A=u.zoom!==void 0,P=!r.isPaddingEqual(u.padding),k=!1,L=A?+u.zoom:r.zoom,N=r.centerPoint.add(u.offsetAsPoint),z=r.screenPointToLocation(N),{center:j,zoom:Z}=r.getConstrained(a.S.convert(u.center||z),L!=null?L:d);Kd(r,j);let te=Y(r.worldSize,z),ee=Y(r.worldSize,j).sub(te),ie=a.af(Z-d);return k=Z!==d,{easeFunc:se=>{if(k&&r.setZoom(a.C.number(d,Z,se)),a.be(y,w)||Sn({startEulerAngles:y,endEulerAngles:w,tr:r,k:se,useSlerp:y.roll!=w.roll}),P&&(r.interpolatePadding(m,u.padding,se),N=r.centerPoint.add(u.offsetAsPoint)),u.around)r.setLocationAtPoint(u.around,u.aroundPoint);else{let de=a.af(r.zoom-d),ce=Z>d?Math.min(2,ie):Math.max(.5,ie),me=Math.pow(ce,1-se),ye=ae(r.worldSize,te.add(ee.mult(se*me)).mult(de));r.setLocationAtPoint(r.renderWorldCopies?ye.wrap():ye,N)}},isZooming:k,elevationCenter:j}}handleFlyTo(r,u){let d=u.zoom!==void 0,m=r.zoom,y=r.getConstrained(a.S.convert(u.center||u.locationAtOffset),d?+u.zoom:m),w=y.center,A=y.zoom;Kd(r,w);let P=Y(r.worldSize,u.locationAtOffset),k=Y(r.worldSize,w).sub(P),L=k.mag(),N=a.af(A-m),z;if(u.minZoom!==void 0){let j=Math.min(+u.minZoom,m,A),Z=r.getConstrained(w,j).zoom;z=a.af(Z-m)}return{easeFunc:(j,Z,te,ee)=>{r.setZoom(j===1?A:m+a.ak(Z));let ie=j===1?w:ae(r.worldSize,P.add(k.mult(te)).mult(Z));r.setLocationAtPoint(r.renderWorldCopies?ie.wrap():ie,ee)},scaleOfZoom:N,targetCenter:w,scaleOfMinZoom:z,pixelPathLength:L}}}class Or{constructor(r,u,d){this.blendFunction=r,this.blendColor=u,this.mask=d}}Or.Replace=[1,0],Or.disabled=new Or(Or.Replace,a.bf.transparent,[!1,!1,!1,!1]),Or.unblended=new Or(Or.Replace,a.bf.transparent,[!0,!0,!0,!0]),Or.alphaBlended=new Or([1,771],a.bf.transparent,[!0,!0,!0,!0]);let kl=2305;class At{constructor(r,u,d){this.enable=r,this.mode=u,this.frontFace=d}}At.disabled=new At(!1,1029,kl),At.backCCW=new At(!0,1029,kl),At.frontCCW=new At(!0,1028,kl);class Ft{constructor(r,u,d){this.func=r,this.mask=u,this.range=d}}Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);let is=7680;class or{constructor(r,u,d,m,y,w){this.test=r,this.ref=u,this.mask=d,this.fail=m,this.depthFail=y,this.pass=w}}or.disabled=new or({func:519,mask:0},0,0,is,is,is);let da=new WeakMap;function Eo(g){var r;if(da.has(g))return da.get(g);{let u=(r=g.getParameter(g.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return da.set(g,u),u}}class Ao{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;let u=r.context,d=u.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;let m=new a.aL;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);let y=new a.aN;y.emplaceBack(0,1,2),this._fullscreenTriangle=new Ml(u.createVertexBuffer(m,js.members),u.createIndexBuffer(y),a.aM.simpleSegment(0,0,m.length,y.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(d.TEXTURE1);let w=d.createTexture();d.bindTexture(d.TEXTURE_2D,w),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),Eo(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){let r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,u){let d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,u),this._updateCount++,this._measuredError}_bindFramebuffer(){let r=this._cachedRenderContext.context,u=r.gl;r.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,u){let d=this._cachedRenderContext.context,m=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,m.TRIANGLES,Ft.disabled,or.disabled,Or.unblended,At.disabled,((y,w)=>({u_input:y,u_output_expected:w}))(r,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Eo(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);let y=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:y}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Eo(r)){let u=r.clientWaitSync(this._readbackQueue.sync,0,0);if(u===r.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ao._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let u=0;return u+=r[0]/256,u+=r[1]/65536,u+=r[2]/16777216,r[3]<127&&(u=-u),u/128}}let Xd=a.$/128;function fv(g,r){let u=g.granularity!==void 0?Math.max(g.granularity,1):1,d=u+(g.generateBorders?2:0),m=u+(g.extendToNorthPole||g.generateBorders?1:0)+(g.extendToSouthPole||g.generateBorders?1:0),y=d+1,w=m+1,A=g.generateBorders?-1:0,P=g.generateBorders||g.extendToNorthPole?-1:0,k=u+(g.generateBorders?1:0),L=u+(g.generateBorders||g.extendToSouthPole?1:0),N=y*w,z=d*m*6,j=y*w>65536;if(j&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let Z=j||r==="32bit",te=new Int16Array(2*N),ee=0;for(let de=P;de<=L;de++)for(let ce=A;ce<=k;ce++){let me=ce/u*a.$;ce===-1&&(me=-Xd),ce===u+1&&(me=a.$+Xd);let ye=de/u*a.$;de===-1&&(ye=g.extendToNorthPole?a.bh:-Xd),de===u+1&&(ye=g.extendToSouthPole?a.bi:a.$+Xd),te[ee++]=me,te[ee++]=ye}let ie=Z?new Uint32Array(z):new Uint16Array(z),se=0;for(let de=0;de<m;de++)for(let ce=0;ce<d;ce++){let me=ce+1+de*y,ye=ce+(de+1)*y,he=ce+1+(de+1)*y;ie[se++]=ce+de*y,ie[se++]=ye,ie[se++]=me,ie[se++]=me,ie[se++]=ye,ie[se++]=he}return{vertices:te.buffer.slice(0),indices:ie.buffer.slice(0),uses32bitIndices:Z}}let Ru=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class hh{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ja.projectionGlobe}get vertexShaderPreludeCode(){return Ja.projectionMercator.vertexSource}get subdivisionGranularity(){return Ru}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Ao(r));let u=a.U(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(u,d),y=O.now();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=y);let w=Math.min(Math.max((y-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(w))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,u,d,m,y){let w=(y==="stencil"?Ru.stencil:Ru.tile).getGranularityForZoomLevel(u.z);return this._getMesh(r,{granularity:w,generateBorders:d,extendToNorthPole:u.y===0&&m,extendToSouthPole:u.y===(1<<u.z)-1&&m})}_getMesh(r,u){let d=this._getMeshKey(u);if(d in this._tileMeshCache)return this._tileMeshCache[d];let m=function(y,w){let A=fv(w,"16bit"),P=a.aL.deserialize({arrayBuffer:A.vertices,length:A.vertices.byteLength/2/2}),k=a.aN.deserialize({arrayBuffer:A.indices,length:A.indices.byteLength/2/3});return new Ml(y.createVertexBuffer(P,js.members),y.createIndexBuffer(k),a.aM.simpleSegment(0,0,P.length,k.length))}(r,u);return this._tileMeshCache[d]=m,m}recalculate(r){}hasTransition(){let r=O.now(),u=!1;return u=u||(r-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}let Yd=new a.r({type:new a.D(a.v.projection.type)});class Jd extends a.E{constructor(r){super(),this._transitionable=new a.t(Yd),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new Yt,this._verticalPerspectiveProjection=new hh}get transitionState(){let r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof a.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,u,d,m,y){return this.currentProjection.getMeshFromTileID(r,u,d,m,y)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Qd(g){let r=Ou(g.worldSize,g.center.lat);return 2*Math.PI*r}function Qa(g,r,u,d,m){let y=1/(1<<m),w=r/a.$*y+d*y,A=a.bo((g/a.$*y+u*y)*Math.PI*2+Math.PI,2*Math.PI),P=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,k=Math.cos(P),L=new Float64Array(3);return L[0]=Math.sin(A)*k,L[1]=Math.sin(P),L[2]=Math.cos(A)*k,L}function Fi(g){return function(r,u){let d=Math.cos(u),m=new Float64Array(3);return m[0]=Math.sin(r)*d,m[1]=Math.sin(u),m[2]=Math.cos(r)*d,m}(g.lng*Math.PI/180,g.lat*Math.PI/180)}function Ou(g,r){return g/(2*Math.PI)/Math.cos(r*Math.PI/180)}function dh(g){let r=Math.asin(g[1])/Math.PI*180,u=Math.sqrt(g[0]*g[0]+g[2]*g[2]);if(u>1e-6){let d=g[0]/u,m=Math.acos(g[2]/u),y=(d>0?m:-m)/Math.PI*180;return new a.S(a.aO(y,-180,180),r)}return new a.S(0,r)}function Dl(g){return Math.cos(g*Math.PI/180)}function ni(g,r){let u=Dl(g),d=Dl(r);return a.ak(d/u)}function vx(g,r){let u=g.rotate(r.bearingInRadians),d=r.zoom+ni(r.center.lat,0),m=a.bk(1/Dl(r.center.lat),1/Dl(Math.min(Math.abs(r.center.lat),60)),a.bn(d,7,3,0,1)),y=360/Qd({worldSize:r.worldSize,center:{lat:r.center.lat}});return new a.S(r.center.lng-u.x*y*m,a.ah(r.center.lat+u.y*y,-a.ai,a.ai))}function fh(g){let r=.5*g,u=Math.sin(r),d=Math.cos(r);return Math.log(u+d)-Math.log(d-u)}function pv(g,r,u,d){let m=g.lat+u*d;if(Math.abs(u)>1){let y=(Math.sign(g.lat+u)!==Math.sign(g.lat)?-Math.abs(g.lat):Math.abs(g.lat))*Math.PI/180,w=Math.abs(g.lat+u)*Math.PI/180,A=fh(y+d*(w-y)),P=fh(y),k=fh(w);return new a.S(g.lng+r*((A-P)/(k-P)),m)}return new a.S(g.lng+r*d,m)}class fq{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;let r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,u,d,m){let y=`${r.z}_${r.x}_${r.y}_${m!=null&&m.terrain?"t":""}`,w=this._cache.get(y);if(w)return w;let A=this._cachePrevious.get(y);if(A)return this._cache.set(y,A),A;let P=this._boundingVolumeFactory(r,u,d,m);return this._cache.set(y,P),this._hadAnyChanges=!0,P}}class ku{constructor(r,u,d,m){this.min=d,this.max=m,this.points=r,this.planes=u}static fromAabb(r,u){let d=[];for(let m=0;m<8;m++)d.push([1&~m?r[0]:u[0],(m>>1&1)==1?u[1]:r[1],(m>>2&1)==1?u[2]:r[2]]);return new ku(d,[[-1,0,0,u[0]],[1,0,0,-r[0]],[0,-1,0,u[1]],[0,1,0,-r[1]],[0,0,-1,u[2]],[0,0,1,-r[2]]],r,u)}static fromCenterSizeAngles(r,u,d){let m=a.br([],d[0],d[1],d[2]),y=a.bs([],[u[0],0,0],m),w=a.bs([],[0,u[1],0],m),A=a.bs([],[0,0,u[2]],m),P=[...r],k=[...r];for(let N=0;N<8;N++)for(let z=0;z<3;z++){let j=r[z]+y[z]*(1&~N?-1:1)+w[z]*((N>>1&1)==1?1:-1)+A[z]*((N>>2&1)==1?1:-1);P[z]=Math.min(P[z],j),k[z]=Math.max(k[z],j)}let L=[];for(let N=0;N<8;N++){let z=[...r];a.aS(z,z,a.aR([],y,1&~N?-1:1)),a.aS(z,z,a.aR([],w,(N>>1&1)==1?1:-1)),a.aS(z,z,a.aR([],A,(N>>2&1)==1?1:-1)),L.push(z)}return new ku(L,[[...y,-a.aX(y,L[0])],[...w,-a.aX(w,L[0])],[...A,-a.aX(A,L[0])],[-y[0],-y[1],-y[2],-a.aX(y,L[7])],[-w[0],-w[1],-w[2],-a.aX(w,L[7])],[-A[0],-A[1],-A[2],-a.aX(A,L[7])]],P,k)}intersectsFrustum(r){let u=!0,d=this.points.length,m=this.planes.length,y=r.planes.length,w=r.points.length;for(let A=0;A<y;A++){let P=r.planes[A],k=0;for(let L=0;L<d;L++){let N=this.points[L];P[0]*N[0]+P[1]*N[1]+P[2]*N[2]+P[3]>=0&&k++}if(k===0)return 0;k<d&&(u=!1)}if(u)return 2;for(let A=0;A<m;A++){let P=this.planes[A],k=0;for(let L=0;L<w;L++){let N=r.points[L];P[0]*N[0]+P[1]*N[1]+P[2]*N[2]+P[3]>=0&&k++}if(k===0)return 0}return 1}intersectsPlane(r){let u=this.points.length,d=0;for(let m=0;m<u;m++){let y=this.points[m];r[0]*y[0]+r[1]*y[1]+r[2]*y[2]+r[3]>=0&&d++}return d===u?2:d===0?0:1}}function Xi(g,r,u){let d=g-r;return d<0?-d:Math.max(0,d-u)}function ph(g,r,u,d,m){let y=g-u,w;return w=y<0?Math.min(-y,1+y-m):y>1?Math.min(Math.max(y-m,0),1-y):0,Math.max(w,Xi(r,d,m))}class qo{constructor(){this._boundingVolumeCache=new fq(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,u,d,m){let y=1<<d.z,w=1/y,A=d.x/y,P=d.y/y,k=2;return k=Math.min(k,ph(r,u,A,P,w)),k=Math.min(k,ph(r,u,A+.5,-P-w,w)),k=Math.min(k,ph(r,u,A+.5,2-P-w,w)),k}getWrap(r,u,d){let m=1<<u.z,y=1/m,w=u.x/m,A=Xi(r.x,w,y),P=Xi(r.x,w-1,y),k=Xi(r.x,w+1,y),L=Math.min(A,P,k);return L===k?1:L===P?-1:0}allowVariableZoom(r,u){return pt(r,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,u,d,m){return this._boundingVolumeCache.getTileBoundingVolume(r,u,d,m)}_computeTileBoundingVolume(r,u,d,m){var y,w;let A=0,P=0;if(m!=null&&m.terrain){let k=new a.Z(r.z,u,r.z,r.x,r.y),L=m.terrain.getMinMaxElevation(k);A=(y=L.minElevation)!==null&&y!==void 0?y:Math.min(0,d),P=(w=L.maxElevation)!==null&&w!==void 0?w:Math.max(0,d)}if(A/=a.bu,P/=a.bu,A+=1,P+=1,r.z<=0)return ku.fromAabb([-P,-P,-P],[P,P,P]);if(r.z===1)return ku.fromAabb([r.x===0?-P:0,r.y===0?0:-P,-P],[r.x===0?0:P,r.y===0?P:0,P]);{let k=[Qa(0,0,r.x,r.y,r.z),Qa(a.$,0,r.x,r.y,r.z),Qa(a.$,a.$,r.x,r.y,r.z),Qa(0,a.$,r.x,r.y,r.z)],L=[];for(let Pe of k)L.push(a.aR([],Pe,P));if(P!==A)for(let Pe of k)L.push(a.aR([],Pe,A));r.y===0&&L.push([0,1,0]),r.y===(1<<r.z)-1&&L.push([0,-1,0]);let N=[1,1,1],z=[-1,-1,-1];for(let Pe of L)for(let Re=0;Re<3;Re++)N[Re]=Math.min(N[Re],Pe[Re]),z[Re]=Math.max(z[Re],Pe[Re]);let j=Qa(a.$/2,a.$/2,r.x,r.y,r.z),Z=a.aW([],[0,1,0],j);a.aV(Z,Z);let te=a.aW([],j,Z);a.aV(te,te);let ee=a.aW([],k[2],k[1]);a.aV(ee,ee);let ie=a.aW([],k[0],k[3]);a.aV(ie,ie),L.push(a.aR([],j,P)),r.y>=(1<<r.z)/2&&L.push(a.aR([],Qa(a.$/2,0,r.x,r.y,r.z),P)),r.y<(1<<r.z)/2&&L.push(a.aR([],Qa(a.$/2,a.$,r.x,r.y,r.z),P));let se=mh(j,L),de=mh(te,L),ce=[-j[0],-j[1],-j[2],se.max],me=[j[0],j[1],j[2],-se.min],ye=[-te[0],-te[1],-te[2],de.max],he=[te[0],te[1],te[2],-de.min],Te=[...ee,0],Oe=[...ie,0],Ie=[];return r.y===0?Ie.push(a.bt(Oe,Te,ce),a.bt(Oe,Te,me)):Ie.push(a.bt(ye,Te,ce),a.bt(ye,Te,me),a.bt(ye,Oe,ce),a.bt(ye,Oe,me)),r.y===(1<<r.z)-1?Ie.push(a.bt(Oe,Te,ce),a.bt(Oe,Te,me)):Ie.push(a.bt(he,Te,ce),a.bt(he,Te,me),a.bt(he,Oe,ce),a.bt(he,Oe,me)),new ku(Ie,[ce,me,ye,he,Te,Oe],N,z)}}}function mh(g,r){let u=1/0,d=-1/0;for(let m of r){let y=a.aX(g,m);u=Math.min(u,y),d=Math.max(d,y)}return{min:u,max:d}}class vh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,d){return this._helper.interpolatePadding(r,u,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u){this._helper.resize(r,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new bn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,u)=>this.getConstrained(r,u)}),this._coveringTilesDetailsProvider=new qo}clone(){let r=new vh;return r.apply(this),r}apply(r,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let r=a.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){let{overscaledTileID:u,applyGlobeMatrix:d}=r,m=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){let u=this.pitchInRadians,d=this.cameraToCenterDistance/r,m=Math.sin(u)*d,y=Math.cos(u)*d+1,w=1/Math.sqrt(m*m+y*y)*1,A=-m,P=y,k=Math.sqrt(A*A+P*P);A/=k,P/=k;let L=[0,A,P];a.bw(L,L,[0,0,0],-this.bearingInRadians),a.bx(L,L,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(L,L,[0,0,0],this.center.lng*Math.PI/180);let N=1/a.aZ(L);return a.aR(L,L,N),[...L,-w*N]}isLocationOccluded(r){return!this.isSurfacePointVisible(Fi(r))}transformLightDirection(r){let u=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,m=Math.cos(d),y=[Math.sin(u)*m,Math.sin(d),Math.cos(u)*m],w=[y[2],0,-y[0]],A=[0,0,0];a.aW(A,w,y),a.aV(w,w),a.aV(A,A);let P=[0,0,0];return a.aV(P,[w[0]*r[0]+A[0]*r[1]+y[0]*r[2],w[1]*r[0]+A[1]*r[1]+y[1]*r[2],w[2]*r[0]+A[2]*r[1]+y[2]*r[2]]),P}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,u,d){let m=function(A,P,k){let L=1/(1<<k.z);return new a.a1(A/a.$*L+k.x*L,P/a.$*L+k.y*L)}(r,u,d.canonical),y=(w=m.y,[a.bo(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(y[1])}projectTileCoordinates(r,u,d,m){let y=d.canonical,w=Qa(r,u,y.x,y.y,y.z),A=1+(m?m(r,u):0)/a.bu,P=[w[0]*A,w[1]*A,w[2]*A,1];a.aw(P,P,this._globeViewProjMatrixNoCorrection);let k=this._cachedClippingPlane,L=k[0]*w[0]+k[1]*w[1]+k[2]*w[2]+k[3]<0;return{point:new a.P(P[0]/P[3],P[1]/P[3]),signedDistanceFromCamera:P[3],isOccluded:L}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let r=Ou(this.worldSize,this.center.lat),u=a.ba(),d=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),a.b4(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let m=this.centerOffset;u[8]=2*-m.x/this._helper._width,u[9]=2*m.y/this._helper._height,this._projectionMatrix=a.b5(u),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,u),a.M(u,u,[0,0,-this.cameraToCenterDistance]),a.b6(u,u,this.rollInRadians),a.b7(u,u,-this.pitchInRadians),a.b6(u,u,this.bearingInRadians),a.M(u,u,[0,0,-r]);let y=a.bp();y[0]=r,y[1]=r,y[2]=r,a.b7(d,u,this.center.lat*Math.PI/180),a.bz(d,d,-this.center.lng*Math.PI/180),a.N(d,d,y),this._globeViewProjMatrixNoCorrection=d,a.b7(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(u,u,-this.center.lng*Math.PI/180),a.N(u,u,y),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,d);let w=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,a.bw(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);let A=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(A,A,[1,1,-1]),this._cachedFrustum=vi.fromInvProjectionMatrix(A,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){a.w("calculateFogMatrix is not supported on globe projection.");let u=a.ba();return a.ag(u),u}getVisibleUnwrappedCoordinates(r){return[new a.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,u){if(!this._globeViewProjMatrixNoCorrection)return 1;let d=Fi(r);a.aR(d,d,1+u/a.bu);let m=a.bv();return a.aw(m,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(r){}getBounds(){let r=.5*this.width,u=.5*this.height,d=[new a.P(0,0),new a.P(r,0),new a.P(this.width,0),new a.P(this.width,u),new a.P(this.width,this.height),new a.P(r,this.height),new a.P(0,this.height),new a.P(0,u)],m=[];for(let N of d)m.push(this.unprojectScreenPoint(N));let y=0,w=0,A=0,P=0,k=this.center;for(let N of m){let z=a.bA(k.lng,N.lng),j=a.bA(k.lat,N.lat);z<w&&(w=z),z>y&&(y=z),j<P&&(P=j),j>A&&(A=j)}let L=[k.lng+w,k.lat+P,k.lng+y,k.lat+A];return this.isSurfacePointOnScreen([0,1,0])&&(L[3]=90,L[0]=-180,L[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(L[1]=-90,L[0]=-180,L[2]=180),new Rr(L)}getConstrained(r,u){let d=a.ah(r.lat,-a.ai,a.ai),m=a.ah(+u,this.minZoom+ni(0,d),this.maxZoom);return{center:new a.S(r.lng,d),zoom:m}}calculateCenterFromCameraLngLatAlt(r,u,d,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,d,m)}setLocationAtPoint(r,u){let d=Fi(this.unprojectScreenPoint(u)),m=Fi(r),y=a.bp();a.bB(y);let w=a.bp();a.by(w,d,y,-this.center.lng*Math.PI/180),a.bx(w,w,y,this.center.lat*Math.PI/180);let A=m[0]*m[0]+m[2]*m[2],P=w[0]*w[0];if(A<P)return;let k=Math.sqrt(A-P),L=-k,N=a.bC(m[0],m[2],w[0],k),z=a.bC(m[0],m[2],w[0],L),j=a.bp();a.by(j,m,y,-N);let Z=a.bC(j[1],j[2],w[1],w[2]),te=a.bp();a.by(te,m,y,-z);let ee=a.bC(te[1],te[2],w[1],w[2]),ie=.5*Math.PI,se=Z>=-ie&&Z<=ie,de=ee>=-ie&&ee<=ie,ce,me;if(se&&de){let Oe=this.center.lng*Math.PI/180,Ie=this.center.lat*Math.PI/180;a.bD(N,Oe)+a.bD(Z,Ie)<a.bD(z,Oe)+a.bD(ee,Ie)?(ce=N,me=Z):(ce=z,me=ee)}else if(se)ce=N,me=Z;else{if(!de)return;ce=z,me=ee}let ye=ce/Math.PI*180,he=me/Math.PI*180,Te=this.center.lat;this.setCenter(new a.S(ye,a.ah(he,-90,90))),this.setZoom(this.zoom+ni(Te,this.center.lat))}locationToScreenPoint(r,u){let d=Fi(r);if(u){let m=u.getElevationForLngLatZoom(r,this._helper._tileZoom);a.aR(d,d,1+m/a.bu)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(r){let u=a.bv();return a.aw(u,[...r,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new a.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,u){if(u){let d=u.pointCoordinate(r);if(d)return d}return a.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,u){var d;return(d=this.screenPointToMercatorCoordinate(r,u))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(r,u){let d=this._cameraPosition,m=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(d,m)}getRayDirectionFromPixel(r){let u=a.bv();u[0]=r.x/this.width*2-1,u[1]=-1*(r.y/this.height*2-1),u[2]=1,u[3]=1,a.aw(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];let d=a.bp();d[0]=u[0]-this._cameraPosition[0],d[1]=u[1]-this._cameraPosition[1],d[2]=u[2]-this._cameraPosition[2];let m=a.bp();return a.aV(m,d),m}isSurfacePointVisible(r){let u=this._cachedClippingPlane;return u[0]*r[0]+u[1]*r[1]+u[2]*r[2]+u[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;let u=a.bv();return a.aw(u,[...r,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(r,u){let d=a.aX(r,u),m=a.bp(),y=a.bp();a.aR(y,u,d),a.aU(m,r,y);let w=1-a.aX(m,m);if(w<0)return null;let A=a.aX(r,r)-1,P=-d+(d<0?1:-1)*Math.sqrt(w),k=A/P,L=P;return{tMin:Math.min(k,L),tMax:Math.max(k,L)}}unprojectScreenPoint(r){let u=this._cameraPosition,d=this.getRayDirectionFromPixel(r),m=this.rayPlanetIntersection(u,d);if(m){let L=a.bp();a.aS(L,u,[d[0]*m.tMin,d[1]*m.tMin,d[2]*m.tMin]);let N=a.bp();return a.aV(N,L),dh(N)}let y=this._cachedClippingPlane,w=y[0]*d[0]+y[1]*d[1]+y[2]*d[2],A=-a.b1(y,u)/w,P=a.bp();if(A>0)a.aS(P,u,[d[0]*A,d[1]*A,d[2]*A]);else{let L=a.bp();a.aS(L,u,[2*d[0],2*d[1],2*d[2]]);let N=a.b1(this._cachedClippingPlane,L);a.aU(P,L,[this._cachedClippingPlane[0]*N,this._cachedClippingPlane[1]*N,this._cachedClippingPlane[2]*N])}let k=function(L){let N=a.bp();return N[0]=L[0]*-L[3],N[1]=L[1]*-L[3],N[2]=L[2]*-L[3],{center:N,radius:Math.sqrt(1-L[3]*L[3])}}(y);return dh(function(L,N,z){let j=a.bp();a.aU(j,z,L);let Z=a.bp();return a.bq(Z,L,j,N/a.a$(j)),Z}(k.center,k.radius,P))}getMatrixForModel(r,u){let d=a.S.convert(r),m=1/a.bu,y=a.b9();return a.bz(y,y,d.lng/180*Math.PI),a.b7(y,y,-d.lat/180*Math.PI),a.M(y,y,[0,0,1+u/a.bu]),a.b7(y,y,.5*Math.PI),a.N(y,y,[m,m,m]),y}getProjectionDataForCustomLayer(r=!0){let u=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:r});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(r){}}class gh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,u,d){return this._helper.interpolatePadding(r,u,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,u,d=!0){this._helper.resize(r,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,u){this._helper.overrideNearFarZ(r,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,u){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new bn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,u)=>this.getConstrained(r,u)}),this._globeness=1,this._mercatorTransform=new Er,this._verticalPerspectiveTransform=new vh}clone(){let r=new gh;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){let u=this._mercatorTransform.getProjectionData(r),d=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:u.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,u,d){let m=this._mercatorTransform.getPitchedTextCorrection(r,u,d),y=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,u,d);return a.bk(m,y,this._globeness)}projectTileCoordinates(r,u,d,m){return this.currentTransform.projectTileCoordinates(r,u,d,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,u){return this.currentTransform.lngLatToCameraDepth(r,u)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,u){return this.currentTransform.getConstrained(r,u)}calculateCenterFromCameraLngLatAlt(r,u,d,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,u,d,m)}setLocationAtPoint(r,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,u){return this.currentTransform.locationToScreenPoint(r,u)}screenPointToMercatorCoordinate(r,u){return this.currentTransform.screenPointToMercatorCoordinate(r,u)}screenPointToLocation(r,u){return this.currentTransform.screenPointToLocation(r,u)}isPointOnMapSurface(r,u){return this.currentTransform.isPointOnMapSurface(r,u)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,u){return this.currentTransform.getMatrixForModel(r,u)}getProjectionDataForCustomLayer(r=!0){let u=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return u;let d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return d.fallbackMatrix=u.mainMatrix,d}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class hn{get useGlobeControls(){return!0}handlePanInertia(r,u){let d=vx(r,u);return Math.abs(d.lng-u.center.lng)>180&&(d.lng=u.center.lng+179.5*Math.sign(d.lng-u.center.lng)),{easingCenter:d,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,u){let d=r.around,m=u.screenPointToLocation(d);r.bearingDelta&&u.setBearing(u.bearing+r.bearingDelta),r.pitchDelta&&u.setPitch(u.pitch+r.pitchDelta),r.rollDelta&&u.setRoll(u.roll+r.rollDelta);let y=u.zoom;r.zoomDelta&&u.setZoom(u.zoom+r.zoomDelta);let w=u.zoom-y;if(w===0)return;let A=a.bA(u.center.lng,m.lng),P=A/(Math.abs(A/180)+1),k=a.bA(u.center.lat,m.lat),L=u.getRayDirectionFromPixel(d),N=u.cameraPosition,z=-1*a.aX(N,L),j=a.bp();a.aS(j,N,[L[0]*z,L[1]*z,L[2]*z]);let Z=a.aZ(j)-1,te=Math.exp(.5*-Math.max(Z-.3,0)),ee=Ou(u.worldSize,u.center.lat)/Math.min(u.width,u.height),ie=a.bn(ee,.9,.5,1,.25),se=(1-a.af(-w))*Math.min(te,ie),de=u.center.lat,ce=u.zoom,me=new a.S(u.center.lng+P*se,a.ah(u.center.lat+k*se,-a.ai,a.ai));u.setLocationAtPoint(m,d);let ye=u.center,he=a.bn(Math.abs(A),45,85,0,1),Te=a.bn(ee,.75,.35,0,1),Oe=Math.pow(Math.max(he,Te),.25),Ie=a.bA(ye.lng,me.lng),Pe=a.bA(ye.lat,me.lat);u.setCenter(new a.S(ye.lng+Ie*Oe,ye.lat+Pe*Oe).wrap()),u.setZoom(ce+ni(de,u.center.lat))}handleMapControlsPan(r,u,d){if(!r.panDelta)return;let m=u.center.lat,y=u.zoom;u.setCenter(vx(r.panDelta,u).wrap()),u.setZoom(y+ni(m,u.center.lat))}cameraForBoxAndBearing(r,u,d,m,y){let w=ha(r,u,d,m,y),A=u.left/y.width*2-1,P=(y.width-u.right)/y.width*2-1,k=u.top/y.height*-2+1,L=(y.height-u.bottom)/y.height*-2+1,N=a.bA(d.getWest(),d.getEast())<0,z=N?d.getEast():d.getWest(),j=N?d.getWest():d.getEast(),Z=Math.max(d.getNorth(),d.getSouth()),te=Math.min(d.getNorth(),d.getSouth()),ee=z+.5*a.bA(z,j),ie=Z+.5*a.bA(Z,te),se=y.clone();se.setCenter(w.center),se.setBearing(w.bearing),se.setPitch(0),se.setRoll(0),se.setZoom(w.zoom);let de=se.modelViewProjectionMatrix,ce=[Fi(d.getNorthWest()),Fi(d.getNorthEast()),Fi(d.getSouthWest()),Fi(d.getSouthEast()),Fi(new a.S(j,ie)),Fi(new a.S(z,ie)),Fi(new a.S(ee,Z)),Fi(new a.S(ee,te))],me=Fi(w.center),ye=Number.POSITIVE_INFINITY;for(let he of ce)A<0&&(ye=hn.getLesserNonNegativeNonNull(ye,hn.solveVectorScale(he,me,de,"x",A))),P>0&&(ye=hn.getLesserNonNegativeNonNull(ye,hn.solveVectorScale(he,me,de,"x",P))),k>0&&(ye=hn.getLesserNonNegativeNonNull(ye,hn.solveVectorScale(he,me,de,"y",k))),L<0&&(ye=hn.getLesserNonNegativeNonNull(ye,hn.solveVectorScale(he,me,de,"y",L)));if(Number.isFinite(ye)&&ye!==0)return w.zoom=se.zoom+a.ak(ye),w;mx()}handleJumpToCenterZoom(r,u){let d=r.center.lat,m=r.getConstrained(u.center?a.S.convert(u.center):r.center,r.zoom).center;r.setCenter(m.wrap());let y=u.zoom!==void 0?+u.zoom:r.zoom+ni(d,m.lat);r.zoom!==y&&r.setZoom(y)}handleEaseTo(r,u){let d=r.zoom,m=r.center,y=r.padding,w={roll:r.roll,pitch:r.pitch,bearing:r.bearing},A={roll:u.roll===void 0?r.roll:u.roll,pitch:u.pitch===void 0?r.pitch:u.pitch,bearing:u.bearing===void 0?r.bearing:u.bearing},P=u.zoom!==void 0,k=!r.isPaddingEqual(u.padding),L=!1,N=u.center?a.S.convert(u.center):m,z=r.getConstrained(N,d).center;Kd(r,z);let j=r.clone();j.setCenter(z),j.setZoom(P?+u.zoom:d+ni(m.lat,N.lat)),j.setBearing(u.bearing);let Z=new a.P(a.ah(r.centerPoint.x+u.offsetAsPoint.x,0,r.width),a.ah(r.centerPoint.y+u.offsetAsPoint.y,0,r.height));j.setLocationAtPoint(z,Z);let te=(u.offset&&u.offsetAsPoint.mag())>0?j.center:z,ee=P?+u.zoom:d+ni(m.lat,te.lat),ie=d+ni(m.lat,0),se=ee+ni(te.lat,0),de=a.bA(m.lng,te.lng),ce=a.bA(m.lat,te.lat),me=a.af(se-ie);return L=ee!==d,{easeFunc:ye=>{if(a.be(w,A)||Sn({startEulerAngles:w,endEulerAngles:A,tr:r,k:ye,useSlerp:w.roll!=A.roll}),k&&r.interpolatePadding(y,u.padding,ye),u.around)a.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(u.around,u.aroundPoint);else{let he=se>ie?Math.min(2,me):Math.max(.5,me),Te=Math.pow(he,1-ye),Oe=pv(m,de,ce,ye*Te);r.setCenter(Oe.wrap())}if(L){let he=a.C.number(ie,se,ye)+ni(0,r.center.lat);r.setZoom(he)}},isZooming:L,elevationCenter:te}}handleFlyTo(r,u){let d=u.zoom!==void 0,m=r.center,y=r.zoom,w=r.padding,A=!r.isPaddingEqual(u.padding),P=r.getConstrained(a.S.convert(u.center||u.locationAtOffset),y).center,k=d?+u.zoom:r.zoom+ni(r.center.lat,P.lat),L=r.clone();L.setCenter(P),L.setZoom(k),L.setBearing(u.bearing);let N=new a.P(a.ah(r.centerPoint.x+u.offsetAsPoint.x,0,r.width),a.ah(r.centerPoint.y+u.offsetAsPoint.y,0,r.height));L.setLocationAtPoint(P,N);let z=L.center;Kd(r,z);let j=function(ce,me,ye){let he=Fi(me),Te=Fi(ye),Oe=a.aX(he,Te),Ie=Math.acos(Oe),Pe=Qd(ce);return Ie/(2*Math.PI)*Pe}(r,m,z),Z=y+ni(m.lat,0),te=k+ni(z.lat,0),ee=a.af(te-Z),ie;if(typeof u.minZoom=="number"){let ce=+u.minZoom+ni(z.lat,0),me=Math.min(ce,Z,te)+ni(0,z.lat),ye=r.getConstrained(z,me).zoom+ni(z.lat,0);ie=a.af(ye-Z)}let se=a.bA(m.lng,z.lng),de=a.bA(m.lat,z.lat);return{easeFunc:(ce,me,ye,he)=>{let Te=pv(m,se,de,ye);A&&r.interpolatePadding(w,u.padding,ce);let Oe=ce===1?z:Te;r.setCenter(Oe.wrap());let Ie=Z+a.ak(me);r.setZoom(ce===1?k:Ie+ni(0,Oe.lat))},scaleOfZoom:ee,targetCenter:z,scaleOfMinZoom:ie,pixelPathLength:j}}static solveVectorScale(r,u,d,m,y){let w=m==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],A=[d[3],d[7],d[11],d[15]],P=r[0]*w[0]+r[1]*w[1]+r[2]*w[2],k=r[0]*A[0]+r[1]*A[1]+r[2]*A[2],L=u[0]*w[0]+u[1]*w[1]+u[2]*w[2],N=u[0]*A[0]+u[1]*A[1]+u[2]*A[2];return L+y*k===P+y*N||A[3]*(P-L)+w[3]*(N-k)+P*N==L*k?null:(L+w[3]-y*N-y*A[3])/(L-P-y*N+y*k)}static getLesserNonNegativeNonNull(r,u){return u!==null&&u>=0&&u<r?u:r}}class gx{constructor(r){this._globe=r,this._mercatorCameraHelper=new cn,this._verticalPerspectiveCameraHelper=new hn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,u){return this.currentHelper.handlePanInertia(r,u)}handleMapControlsRollPitchBearingZoom(r,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,u)}handleMapControlsPan(r,u,d){this.currentHelper.handleMapControlsPan(r,u,d)}cameraForBoxAndBearing(r,u,d,m,y){return this.currentHelper.cameraForBoxAndBearing(r,u,d,m,y)}handleJumpToCenterZoom(r,u){this.currentHelper.handleJumpToCenterZoom(r,u)}handleEaseTo(r,u){return this.currentHelper.handleEaseTo(r,u)}handleFlyTo(r,u){return this.currentHelper.handleFlyTo(r,u)}}let ef=(g,r)=>a.y(g,r&&r.filter(u=>u.identifier!=="source.canvas")),pq=a.bE();class mv extends a.E{constructor(r,u={}){var d,m;super(),this._rtlPluginLoaded=()=>{for(let w in this.sourceCaches){let A=this.sourceCaches[w].getSource().type;A!=="vector"&&A!=="geojson"||this.sourceCaches[w].reload()}},this.map=r,this.dispatcher=new hi(jn(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(w,A)=>this.getGlyphs(w,A)),this.dispatcher.registerMessageHandler("GI",(w,A)=>this.getImages(w,A)),this.imageManager=new Ye,this.imageManager.setEventedParent(this);let y=((d=r._container)===null||d===void 0?void 0:d.lang)||typeof document!="undefined"&&((m=document.documentElement)===null||m===void 0?void 0:m.lang)||void 0;this.glyphManager=new Lr(r._requestManager,u.localIdeographFontFamily,y),this.lineAtlas=new Dt(256,512),this.crossTileSymbolIndex=new Mu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),vt().on(_e,this._rtlPluginLoaded),this.on("data",w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;let A=this.sourceCaches[w.sourceId];if(!A)return;let P=A.getSource();if(P&&P.vectorLayerIds)for(let k in this._layers){let L=this._layers[k];L.source===P.id&&this._validateLayer(L)}})}setGlobalStateProperty(r,u){var d,m,y;this._checkLoaded();let w=u===null?(y=(m=(d=this.stylesheet.state)===null||d===void 0?void 0:d[r])===null||m===void 0?void 0:m.default)!==null&&y!==void 0?y:null:u;if(a.bH(w,this._globalState[r]))return this;this._globalState[r]=w,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();let u=[];for(let d in r)!a.bH(this._globalState[d],r[d].default)&&(u.push(d),this._globalState[d]=r[d].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(r){if(r.length===0)return;let u=new Set;for(let d in this._layers){let m=this._layers[d],y=m.getLayoutAffectingGlobalStateRefs(),w=m.getPaintAffectingGlobalStateRefs();for(let A of r)if(y.has(A)&&u.add(m.source),w.has(A))for(let{name:P,value:k}of w.get(A))this._updatePaintProperty(m,P,k)}for(let d in this.sourceCaches)u.has(d)&&(this._reloadSource(d),this._changed=!0)}loadURL(r,u={},d){this.fire(new a.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;let m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;let y=this._loadStyleRequest;a.j(m,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,u,d)}).catch(w=>{this._loadStyleRequest=null,w&&!y.signal.aborted&&this.fire(new a.k(w))})}loadJSON(r,u={},d){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,O.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(r,u,d)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(pq,{validate:!1})}_load(r,u,d){var m,y;let w=u.transformStyle?u.transformStyle(d,r):r;if(!u.validate||!ef(this,a.z(w))){w=Object.assign({},w),this._loaded=!0,this.stylesheet=w;for(let A in w.sources)this.addSource(A,w.sources[A],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new nr(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new ur(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var r;let u=a.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",u),this._order=u.map(d=>d.id),this._layers={},this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this._serializedLayers=null;for(let d of u){let m=a.bJ(d);m.setEventedParent(this,{layer:{id:d.id}}),m.setGlobalState(this._globalState),this._layers[d.id]=m}}_loadSprite(r,u=!1,d=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,w,A,P){return a._(this,void 0,void 0,function*(){let k=Ae(y),L=A>1?"@2x":"",N={},z={};for(let{id:j,url:Z}of k){let te=w.transformRequest(Ge(Z,L,".json"),"SpriteJSON");N[j]=a.j(te,P);let ee=w.transformRequest(Ge(Z,L,".png"),"SpriteImage");z[j]=re.getImage(ee,P)}return yield Promise.all([...Object.values(N),...Object.values(z)]),function(j,Z){return a._(this,void 0,void 0,function*(){let te={};for(let ee in j){te[ee]={};let ie=O.getImageCanvasContext((yield Z[ee]).data),se=(yield j[ee]).data;for(let de in se){let{width:ce,height:me,x:ye,y:he,sdf:Te,pixelRatio:Oe,stretchX:Ie,stretchY:Pe,content:Re,textFitWidth:We,textFitHeight:Xe}=se[de];te[ee][de]={data:null,pixelRatio:Oe,sdf:Te,stretchX:Ie,stretchY:Pe,content:Re,textFitWidth:We,textFitHeight:Xe,spriteData:{width:ce,height:me,x:ye,y:he,context:ie}}}}return te})}(N,z)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(let w in y){this._spritesImagesIds[w]=[];let A=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(P=>!(P in y)):[];for(let P of A)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(let P in y[w]){let k=w==="default"?P:`${w}:${P}`;this._spritesImagesIds[w].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,y[w][P],!1):this.imageManager.addImage(k,y[w][P]),u&&(this._changedImages[k]=!0)}}}).catch(y=>{this._spriteRequest=null,m=y,this.fire(new a.k(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),d&&d(m)})}_unloadSprite(){for(let r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(r){let u=this.sourceCaches[r.source];if(!u)return;let d=r.sourceLayer;if(!d)return;let m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.k(new Error(`Source layer "${d}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,u=!1){let d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u?a.bK(d):d);let m=[];for(let y of r)if(d[y]){let w=u?a.bK(d[y]):d[y];m.push(w)}return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};let u=Object.keys(this._layers);for(let d of u){let m=this._layers[d];m.type!=="custom"&&(r[d]=m.serialize())}return r}hasTransitions(){var r,u,d;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(let m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(let m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;let u=this._changed;if(u){let m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(let w in this._updatedSources){let A=this._updatedSources[w];if(A==="reload")this._reloadSource(w);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}let d={};for(let m in this.sourceCaches){let y=this.sourceCaches[m];d[m]=y.used,y.used=!1}for(let m of this._order){let y=this._layers[m];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(let m in d){let y=this.sourceCaches[m];!!d[m]!=!!y.used&&y.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,u&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let r=Object.keys(this._changedImages);if(r.length){for(let u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){var d;this._checkLoaded();let m=this.serialize();if(r=u.transformStyle?u.transformStyle(m,r):r,((d=u.validate)===null||d===void 0||d)&&ef(this,a.z(r)))return!1;(r=a.bK(r)).layers=a.bI(r.layers);let y=a.bL(m,r),w=this._getOperationsToPerform(y);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(let A of w.operations)A();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){let u=[],d=[];for(let m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":u.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":u.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setSky":u.push(()=>this.setSky.apply(this,m.args));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setGlobalState":u.push(()=>this.setGlobalState.apply(this,m.args));break;case"setTransition":u.push(()=>{});break;default:d.push(m.command)}return{operations:u,unimplemented:d}}addImage(r,u){if(this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.z.source,`sources.${r}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);let m=this.sourceCaches[r]=new Kt(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(let d in this._layers)if(this._layers[d].source===r)return this.fire(new a.k(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));let u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);let d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,d={}){this._checkLoaded();let m=r.id;if(this.getLayer(m))return void this.fire(new a.k(new Error(`Layer "${m}" already exists on this map.`)));let y;if(r.type==="custom"){if(ef(this,a.bM(r)))return;y=a.bJ(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=a.bK(r),r=a.e(r,{source:m})),this._validate(a.z.layer,`layers.${m}`,r,{arrayIndex:-1},d))return;y=a.bJ(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}let w=u?this._order.indexOf(u):this._order.length;if(u&&w===-1)this.fire(new a.k(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(w,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){let A=this._removedLayers[m];delete this._removedLayers[m],A.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;let d=this._order.indexOf(r);this._order.splice(d,1);let m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new a.k(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();let u=this._layers[r];if(!u)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);let d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,d){this._checkLoaded();let m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===d||(u!=null&&(m.minzoom=u),d!=null&&(m.maxzoom=d),this._updateLayer(m)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,d={}){this._checkLoaded();let m=this.getLayer(r);if(m){if(!a.bH(m.filter,u))return u==null?(m.setFilter(void 0),void this._updateLayer(m)):void(this._validate(a.z.filter,`layers.${m.id}.filter`,u,null,d)||(m.setFilter(a.bK(u)),this._updateLayer(m)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.bK(this.getLayer(r).filter)}setLayoutProperty(r,u,d,m={}){this._checkLoaded();let y=this.getLayer(r);y?a.bH(y.getLayoutProperty(u),d)||(y.setLayoutProperty(u,d,m),this._updateLayer(y)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){let d=this.getLayer(r);if(d)return d.getLayoutProperty(u);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,d,m={}){this._checkLoaded();let y=this.getLayer(r);y?a.bH(y.getPaintProperty(u),d)||this._updatePaintProperty(y,u,d,m):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,u,d,m={}){r.setPaintProperty(u,d,m)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();let d=r.source,m=r.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)));let w=y.getSource().type;w==="geojson"&&m?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||m?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,r.id,u)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();let d=r.source,m=this.sourceCaches[d];if(m===void 0)return void this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)));let y=m.getSource().type,w=y==="vector"?r.sourceLayer:void 0;y!=="vector"||w?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(w,r.id,u):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();let u=r.source,d=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(d,r.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let r=a.bN(this.sourceCaches,y=>y.serialize()),u=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,m=this.stylesheet;return a.bO({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:r,layers:u,terrain:d},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){let u=w=>this._layers[w].type==="fill-extrusion",d={},m=[];for(let w=this._order.length-1;w>=0;w--){let A=this._order[w];if(u(A)){d[A]=w;for(let P of r){let k=P[A];if(k)for(let L of k)m.push(L)}}}m.sort((w,A)=>A.intersectionZ-w.intersectionZ);let y=[];for(let w=this._order.length-1;w>=0;w--){let A=this._order[w];if(u(A))for(let P=m.length-1;P>=0;P--){let k=m[P].feature;if(d[k.layer.id]<w)break;y.push(k),m.pop()}else for(let P of r){let k=P[A];if(k)for(let L of k)y.push(L.feature)}}return y}queryRenderedFeatures(r,u,d){u&&u.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);let m={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let k of u.layers){let L=this._layers[k];if(!L)return this.fire(new a.k(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];m[L.source]=!0}}let y=[];u.availableImages=this._availableImages;let w=this._serializedAllLayers(),A=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,P=Object.assign(Object.assign({},u),{layers:A});for(let k in this.sourceCaches)u.layers&&!m[k]||y.push(Vn(this.sourceCaches[k],this._layers,w,r,P,d,this.map.terrain?(L,N,z)=>this.map.terrain.getElevation(L,N,z):void 0));return this.placement&&y.push(function(k,L,N,z,j,Z,te){let ee={},ie=Z.queryRenderedSymbols(z),se=[];for(let de of Object.keys(ie).map(Number))se.push(te[de]);se.sort(ks);for(let de of se){let ce=de.featureIndex.lookupSymbolFeatures(ie[de.bucketInstanceId],L,de.bucketIndex,de.sourceLayerIndex,j.filter,j.layers,j.availableImages,k);for(let me in ce){let ye=ee[me]=ee[me]||[],he=ce[me];he.sort((Te,Oe)=>{let Ie=de.featureSortOrder;if(Ie){let Pe=Ie.indexOf(Te.featureIndex);return Ie.indexOf(Oe.featureIndex)-Pe}return Oe.featureIndex-Te.featureIndex});for(let Te of he)ye.push(Te)}}return function(de,ce,me){for(let ye in de)for(let he of de[ye])wo(he,me[ce[ye].source]);return de}(ee,k,N)}(this._layers,w,this.sourceCaches,r,P,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,u){u&&u.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",u.filter,null,u);let d=this.sourceCaches[r];return d?function(m,y){let w=m.getRenderableIds().map(k=>m.getTileByID(k)),A=[],P={};for(let k=0;k<w.length;k++){let L=w[k],N=L.tileID.canonical.key;P[N]||(P[N]=!0,L.querySourceFeatures(A,y))}return A}(d,u):[]}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();let d=this.light.getLight(),m=!1;for(let w in r)if(!a.bH(r[w],d[w])){m=!0;break}if(!m)return;let y={now:O.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(y)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,u={}){this._checkLoaded();let d=this.getSky(),m=!1;if(!r&&!d)return;if(r&&!d)m=!0;else if(!r&&d)m=!0;else for(let w in r)if(!a.bH(r[w],d[w])){m=!0;break}if(!m)return;let y={now:O.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,u),this.sky.updateTransitions(y)}_setProjectionInternal(r){let u=function(d){if(Array.isArray(d)){let m=new Jd({type:d});return{projection:m,transform:new gh,cameraHelper:new gx(m)}}switch(d){case"mercator":return{projection:new Yt,transform:new Er,cameraHelper:new cn};case"globe":{let m=new Jd({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:m,transform:new gh,cameraHelper:new gx(m)}}case"vertical-perspective":return{projection:new hh,transform:new vh,cameraHelper:new hn};default:return a.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new Yt,transform:new Er,cameraHelper:new cn}}}(r);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(let d in this.sourceCaches)this.sourceCaches[d].reload()}_validate(r,u,d,m,y={}){return(!y||y.validate!==!1)&&ef(this,r.call(a.z,a.e({key:u,style:this.serialize(),value:d,styleSpec:a.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),vt().off(_e,this._rtlPluginLoaded);for(let u in this._layers)this._layers[u].setEventedParent(null);for(let u in this.sourceCaches){let d=this.sourceCaches[u];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(let u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(let r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,d,m,y=!1){let w=!1,A=!1,P={};for(let k of this._order){let L=this._layers[k];if(L.type!=="symbol")continue;if(!P[L.source]){let z=this.sourceCaches[L.source];P[L.source]=z.getRenderableIds(!0).map(j=>z.getTileByID(j)).sort((j,Z)=>Z.tileID.overscaledZ-j.tileID.overscaledZ||(j.tileID.isLessThan(Z.tileID)?-1:1))}let N=this.crossTileSymbolIndex.addLayer(L,P[L.source],r.center.lng);w=w||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(O.now(),r.zoom))&&(this.pauseablePlacement=new cv(r,this.map.terrain,this._order,y,u,d,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(O.now()),A=!0),w&&this.pauseablePlacement.placement.setStale()),A||w)for(let k of this._order){let L=this._layers[k];L.type==="symbol"&&this.placement.updateLayerOpacities(L,P[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(O.now())}_releaseSymbolFadeTiles(){for(let r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u){return a._(this,void 0,void 0,function*(){let d=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();let m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,u.icons),d})}getGlyphs(r,u){return a._(this,void 0,void 0,function*(){let d=yield this.glyphManager.getGlyphs(u.stacks),m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(a.z.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,d={},m){this._checkLoaded();let y=[{id:r,url:u}],w=[...Ae(this.stylesheet.sprite),...y];this._validate(a.z.sprite,"sprite",w,null,d)||(this.stylesheet.sprite=w,this._loadSprite(y,!0,m))}removeSprite(r){this._checkLoaded();let u=Ae(this.stylesheet.sprite);if(u.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(let d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;u.splice(u.findIndex(d=>d.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(r,u={},d){this._checkLoaded(),r&&this._validate(a.z.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var mq=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class vq{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,d,m,y,w,A,P,k){this.context=r;let L=this.boundPaintVertexBuffers.length!==m.length;for(let N=0;!L&&N<m.length;N++)this.boundPaintVertexBuffers[N]!==m[N]&&(L=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==d||L||this.boundIndexBuffer!==y||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==k?this.freshBind(u,d,m,y,w,A,P,k):(r.bindVertexArray.set(this.vao),A&&A.bind(),y&&y.dynamicDraw&&y.bind(),P&&P.bind(),k&&k.bind())}freshBind(r,u,d,m,y,w,A,P){let k=r.numAttributes,L=this.context,N=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=P,u.enableAttributes(N,r);for(let z of d)z.enableAttributes(N,r);w&&w.enableAttributes(N,r),A&&A.enableAttributes(N,r),P&&P.enableAttributes(N,r),u.bind(),u.setVertexAttribPointers(N,r,y);for(let z of d)z.bind(),z.setVertexAttribPointers(N,r,y);w&&(w.bind(),w.setVertexAttribPointers(N,r,y)),m&&m.bind(),A&&(A.bind(),A.setVertexAttribPointers(N,r,y)),P&&(P.bind(),P.setVertexAttribPointers(N,r,y)),L.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let tf=(g,r,u,d,m)=>({u_texture:0,u_ele_delta:g,u_fog_matrix:r,u_fog_color:u?u.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:u?u.calculateFogBlendOpacity(d):0,u_horizon_color:u?u.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),vv={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ll(g){let r=[];for(let u=0;u<g.length;u++){if(g[u]===null)continue;let d=g[u].split(" ");r.push(d.pop())}return r}class gv{constructor(r,u,d,m,y,w,A,P,k=[]){let L=r.gl;this.program=L.createProgram();let N=Ll(u.staticAttributes),z=d?d.getBinderAttributes():[],j=N.concat(z),Z=Ja.prelude.staticUniforms?Ll(Ja.prelude.staticUniforms):[],te=A.staticUniforms?Ll(A.staticUniforms):[],ee=u.staticUniforms?Ll(u.staticUniforms):[],ie=d?d.getBinderUniforms():[],se=Z.concat(te).concat(ee).concat(ie),de=[];for(let Ie of se)de.indexOf(Ie)<0&&de.push(Ie);let ce=d?d.defines():[];Eo(L)&&ce.unshift("#version 300 es"),y&&ce.push("#define OVERDRAW_INSPECTOR;"),w&&ce.push("#define TERRAIN3D;"),P&&ce.push(P),k&&ce.push(...k);let me=ce.concat(Ja.prelude.fragmentSource,A.fragmentSource,u.fragmentSource).join(`
`),ye=ce.concat(Ja.prelude.vertexSource,A.vertexSource,u.vertexSource).join(`
`);Eo(L)||(me=function(Ie){return Ie.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(me),ye=function(Ie){return Ie.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(ye));let he=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);if(L.shaderSource(he,me),L.compileShader(he),!L.getShaderParameter(he,L.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${L.getShaderInfoLog(he)}`);L.attachShader(this.program,he);let Te=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);if(L.shaderSource(Te,ye),L.compileShader(Te),!L.getShaderParameter(Te,L.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${L.getShaderInfoLog(Te)}`);L.attachShader(this.program,Te),this.attributes={};let Oe={};this.numAttributes=j.length;for(let Ie=0;Ie<this.numAttributes;Ie++)j[Ie]&&(L.bindAttribLocation(this.program,Ie,j[Ie]),this.attributes[j[Ie]]=Ie);if(L.linkProgram(this.program),!L.getProgramParameter(this.program,L.LINK_STATUS))throw new Error(`Program failed to link: ${L.getProgramInfoLog(this.program)}`);L.deleteShader(Te),L.deleteShader(he);for(let Ie=0;Ie<de.length;Ie++){let Pe=de[Ie];if(Pe&&!Oe[Pe]){let Re=L.getUniformLocation(this.program,Pe);Re&&(Oe[Pe]=Re)}}this.fixedUniforms=m(r,Oe),this.terrainUniforms=((Ie,Pe)=>({u_depth:new a.bP(Ie,Pe.u_depth),u_terrain:new a.bP(Ie,Pe.u_terrain),u_terrain_dim:new a.bg(Ie,Pe.u_terrain_dim),u_terrain_matrix:new a.bR(Ie,Pe.u_terrain_matrix),u_terrain_unpack:new a.bS(Ie,Pe.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Ie,Pe.u_terrain_exaggeration)}))(r,Oe),this.projectionUniforms=((Ie,Pe)=>({u_projection_matrix:new a.bR(Ie,Pe.u_projection_matrix),u_projection_tile_mercator_coords:new a.bS(Ie,Pe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bS(Ie,Pe.u_projection_clipping_plane),u_projection_transition:new a.bg(Ie,Pe.u_projection_transition),u_projection_fallback_matrix:new a.bR(Ie,Pe.u_projection_fallback_matrix)}))(r,Oe),this.binderUniforms=d?d.getUniforms(r,Oe):[]}draw(r,u,d,m,y,w,A,P,k,L,N,z,j,Z,te,ee,ie,se,de){let ce=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(m),r.setColorMode(y),r.setCullFace(w),P){r.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,P.depthTexture),r.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,P.texture);for(let ye in this.terrainUniforms)this.terrainUniforms[ye].set(P[ye])}if(k)for(let ye in k)this.projectionUniforms[vv[ye]].set(k[ye]);if(A)for(let ye in this.fixedUniforms)this.fixedUniforms[ye].set(A[ye]);ee&&ee.setUniforms(r,this.binderUniforms,Z,{zoom:te});let me=0;switch(u){case ce.LINES:me=2;break;case ce.TRIANGLES:me=3;break;case ce.LINE_STRIP:me=1}for(let ye of j.get()){let he=ye.vaos||(ye.vaos={});(he[L]||(he[L]=new vq)).bind(r,this,N,ee?ee.getPaintVertexBuffers():[],z,ye.vertexOffset,ie,se,de),ce.drawElements(u,ye.primitiveLength*me,ce.UNSIGNED_SHORT,ye.primitiveOffset*me*2)}}}function rf(g,r,u){let d=1/a.aC(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,w=y*(u.tileID.canonical.x+u.tileID.wrap*m),A=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[w>>16,A>>16],u_pixel_coord_lower:[65535&w,65535&A]}}let eo=(g,r,u,d)=>{let m=g.style.light,y=m.properties.get("position"),w=[y.x,y.y,y.z],A=a.bV();m.properties.get("anchor")==="viewport"&&a.bW(A,g.transform.bearingInRadians),a.bX(w,w,A);let P=g.transform.transformLightDirection(w),k=m.properties.get("color");return{u_lightpos:w,u_lightpos_globe:P,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+r,u_opacity:u,u_fill_translate:d}},gq=(g,r,u,d,m,y,w)=>a.e(eo(g,r,u,d),rf(y,g,w),{u_height_factor:-Math.pow(2,m.overscaledZ)/w.tileSize/8}),nf=(g,r,u,d)=>a.e(rf(r,g,u),{u_fill_translate:d}),yh=(g,r)=>({u_world:g,u_fill_translate:r}),_h=(g,r,u,d,m)=>a.e(nf(g,r,u,m),{u_world:d}),yq=(g,r,u,d,m)=>{let y=g.transform,w,A,P=0;if(u.paint.get("circle-pitch-alignment")==="map"){let k=a.aC(r,1,y.zoom);w=!0,A=[k,k],P=k/(a.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*m}else w=!1,A=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:A,u_globe_extrude_scale:P,u_translate:d}},af=g=>({u_pixel_extrude_scale:[1/g.width,1/g.height]}),_q=g=>({u_viewport_size:[g.width,g.height]}),Fl=(g,r=1)=>({u_color:g,u_overlay:0,u_overlay_scale:r}),yx=(g,r,u,d)=>{let m=a.aC(g,1,r)/(a.$*Math.pow(2,g.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:a.aC(g,1,r),u_intensity:u,u_globe_extrude_scale:m}},yv=(g,r,u,d)=>{let m=a.L();a.bY(m,0,g.width,g.height,0,0,1);let y=g.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:u,u_color_ramp:d,u_opacity:r.paint.get("heatmap-opacity")}},xq=(g,r,u)=>{let d=u.paint.get("hillshade-accent-color"),m;switch(u.paint.get("hillshade-method")){case"basic":m=4;break;case"combined":m=1;break;case"igor":m=2;break;case"multidirectional":m=3;break;default:m=0}let y=u.getIlluminationProperties();for(let w=0;w<y.directionRadians.length;w++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(y.directionRadians[w]+=g.transform.bearingInRadians);return{u_image:0,u_latrange:_v(0,r.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:y.altitudeRadians,u_azimuths:y.directionRadians,u_accent:d,u_method:m,u_highlights:y.highlightColor,u_shadows:y.shadowColor}},_x=(g,r)=>{let u=r.stride,d=a.L();return a.bY(d,0,a.$,-a.$,0,0,1),a.M(d,d,[0,-a.$,0]),{u_matrix:d,u_image:1,u_dimension:[u,u],u_zoom:g.overscaledZ,u_unpack:r.getUnpackVector()}};function _v(g,r){let u=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new a.a1(0,d/u).toLngLat().lat,new a.a1(0,(d+1)/u).toLngLat().lat]}let xx=(g,r,u=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:g.paint.get("color-relief-opacity")}),of=(g,r,u,d)=>{let m=g.transform;return{u_translation:bv(g,r,u),u_ratio:d/a.aC(r,1,m.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},bx=(g,r,u,d,m)=>a.e(of(g,r,u,d),{u_image:0,u_image_height:m}),wx=(g,r,u,d,m)=>{let y=g.transform,w=xv(r,y);return{u_translation:bv(g,r,u),u_texsize:r.imageAtlasTexture.size,u_ratio:d/a.aC(r,1,y.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[w,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},zl=(g,r,u,d,m,y)=>{let w=g.lineAtlas,A=xv(r,g.transform),P=u.layout.get("line-cap")==="round",k=w.getDash(m.from,P),L=w.getDash(m.to,P),N=k.width*y.fromScale,z=L.width*y.toScale;return a.e(of(g,r,u,d),{u_patternscale_a:[A/N,-k.height/2],u_patternscale_b:[A/z,-L.height/2],u_sdfgamma:w.width/(256*Math.min(N,z)*g.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:L.y,u_mix:y.t})};function xv(g,r){return 1/a.aC(g,1,r.tileZoom)}function bv(g,r,u){return a.aD(g.transform,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}let xh=(g,r,u,d,m)=>{return{u_tl_parent:g,u_scale_parent:r,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(w=d.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=d.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:bq(d.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var y,w};function bq(g){g*=Math.PI/180;let r=Math.sin(g),u=Math.cos(g);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}let bh=(g,r,u,d,m,y,w,A,P,k,L,N,z)=>{let j=w.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:j.cameraToCenterDistance,u_pitch:j.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:j.width/j.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:A,u_coord_matrix:P,u_is_text:+L,u_pitch_with_map:+d,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:N,u_texture:0,u_translation:k,u_pitched_scale:z}},Sx=(g,r,u,d,m,y,w,A,P,k,L,N,z,j)=>{let Z=w.transform;return a.e(bh(g,r,u,d,m,y,w,A,P,k,L,N,j),{u_gamma_scale:d?Math.cos(Z.pitch*Math.PI/180)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},wq=(g,r,u,d,m,y,w,A,P,k,L,N,z)=>a.e(Sx(g,r,u,d,m,y,w,A,P,k,!0,L,0,z),{u_texsize_icon:N,u_texture_icon:1}),Tx=(g,r)=>({u_opacity:g,u_color:r}),Ex=(g,r,u,d,m)=>a.e(function(y,w,A,P){let k=A.imageManager.getPattern(y.from.toString()),L=A.imageManager.getPattern(y.to.toString()),{width:N,height:z}=A.imageManager.getPixelSize(),j=Math.pow(2,P.tileID.overscaledZ),Z=P.tileSize*Math.pow(2,A.transform.tileZoom)/j,te=Z*(P.tileID.canonical.x+P.tileID.wrap*j),ee=Z*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:k.tl,u_pattern_br_a:k.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[N,z],u_mix:w.t,u_pattern_size_a:k.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/a.aC(P,1,A.transform.tileZoom),u_pixel_coord_upper:[te>>16,ee>>16],u_pixel_coord_lower:[65535&te,65535&ee]}}(u,m,r,d),{u_opacity:g}),wv=(g,r)=>{},Sv={fillExtrusion:(g,r)=>({u_lightpos:new a.bT(g,r.u_lightpos),u_lightpos_globe:new a.bT(g,r.u_lightpos_globe),u_lightintensity:new a.bg(g,r.u_lightintensity),u_lightcolor:new a.bT(g,r.u_lightcolor),u_vertical_gradient:new a.bg(g,r.u_vertical_gradient),u_opacity:new a.bg(g,r.u_opacity),u_fill_translate:new a.bU(g,r.u_fill_translate)}),fillExtrusionPattern:(g,r)=>({u_lightpos:new a.bT(g,r.u_lightpos),u_lightpos_globe:new a.bT(g,r.u_lightpos_globe),u_lightintensity:new a.bg(g,r.u_lightintensity),u_lightcolor:new a.bT(g,r.u_lightcolor),u_vertical_gradient:new a.bg(g,r.u_vertical_gradient),u_height_factor:new a.bg(g,r.u_height_factor),u_opacity:new a.bg(g,r.u_opacity),u_fill_translate:new a.bU(g,r.u_fill_translate),u_image:new a.bP(g,r.u_image),u_texsize:new a.bU(g,r.u_texsize),u_pixel_coord_upper:new a.bU(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(g,r.u_pixel_coord_lower),u_scale:new a.bT(g,r.u_scale),u_fade:new a.bg(g,r.u_fade)}),fill:(g,r)=>({u_fill_translate:new a.bU(g,r.u_fill_translate)}),fillPattern:(g,r)=>({u_image:new a.bP(g,r.u_image),u_texsize:new a.bU(g,r.u_texsize),u_pixel_coord_upper:new a.bU(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(g,r.u_pixel_coord_lower),u_scale:new a.bT(g,r.u_scale),u_fade:new a.bg(g,r.u_fade),u_fill_translate:new a.bU(g,r.u_fill_translate)}),fillOutline:(g,r)=>({u_world:new a.bU(g,r.u_world),u_fill_translate:new a.bU(g,r.u_fill_translate)}),fillOutlinePattern:(g,r)=>({u_world:new a.bU(g,r.u_world),u_image:new a.bP(g,r.u_image),u_texsize:new a.bU(g,r.u_texsize),u_pixel_coord_upper:new a.bU(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(g,r.u_pixel_coord_lower),u_scale:new a.bT(g,r.u_scale),u_fade:new a.bg(g,r.u_fade),u_fill_translate:new a.bU(g,r.u_fill_translate)}),circle:(g,r)=>({u_camera_to_center_distance:new a.bg(g,r.u_camera_to_center_distance),u_scale_with_map:new a.bP(g,r.u_scale_with_map),u_pitch_with_map:new a.bP(g,r.u_pitch_with_map),u_extrude_scale:new a.bU(g,r.u_extrude_scale),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(g,r.u_globe_extrude_scale),u_translate:new a.bU(g,r.u_translate)}),collisionBox:(g,r)=>({u_pixel_extrude_scale:new a.bU(g,r.u_pixel_extrude_scale)}),collisionCircle:(g,r)=>({u_viewport_size:new a.bU(g,r.u_viewport_size)}),debug:(g,r)=>({u_color:new a.bQ(g,r.u_color),u_overlay:new a.bP(g,r.u_overlay),u_overlay_scale:new a.bg(g,r.u_overlay_scale)}),depth:wv,clippingMask:wv,heatmap:(g,r)=>({u_extrude_scale:new a.bg(g,r.u_extrude_scale),u_intensity:new a.bg(g,r.u_intensity),u_globe_extrude_scale:new a.bg(g,r.u_globe_extrude_scale)}),heatmapTexture:(g,r)=>({u_matrix:new a.bR(g,r.u_matrix),u_world:new a.bU(g,r.u_world),u_image:new a.bP(g,r.u_image),u_color_ramp:new a.bP(g,r.u_color_ramp),u_opacity:new a.bg(g,r.u_opacity)}),hillshade:(g,r)=>({u_image:new a.bP(g,r.u_image),u_latrange:new a.bU(g,r.u_latrange),u_exaggeration:new a.bg(g,r.u_exaggeration),u_altitudes:new a.b_(g,r.u_altitudes),u_azimuths:new a.b_(g,r.u_azimuths),u_accent:new a.bQ(g,r.u_accent),u_method:new a.bP(g,r.u_method),u_shadows:new a.bZ(g,r.u_shadows),u_highlights:new a.bZ(g,r.u_highlights)}),hillshadePrepare:(g,r)=>({u_matrix:new a.bR(g,r.u_matrix),u_image:new a.bP(g,r.u_image),u_dimension:new a.bU(g,r.u_dimension),u_zoom:new a.bg(g,r.u_zoom),u_unpack:new a.bS(g,r.u_unpack)}),colorRelief:(g,r)=>({u_image:new a.bP(g,r.u_image),u_unpack:new a.bS(g,r.u_unpack),u_dimension:new a.bU(g,r.u_dimension),u_elevation_stops:new a.bP(g,r.u_elevation_stops),u_color_stops:new a.bP(g,r.u_color_stops),u_color_ramp_size:new a.bP(g,r.u_color_ramp_size),u_opacity:new a.bg(g,r.u_opacity)}),line:(g,r)=>({u_translation:new a.bU(g,r.u_translation),u_ratio:new a.bg(g,r.u_ratio),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.bU(g,r.u_units_to_pixels)}),lineGradient:(g,r)=>({u_translation:new a.bU(g,r.u_translation),u_ratio:new a.bg(g,r.u_ratio),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.bU(g,r.u_units_to_pixels),u_image:new a.bP(g,r.u_image),u_image_height:new a.bg(g,r.u_image_height)}),linePattern:(g,r)=>({u_translation:new a.bU(g,r.u_translation),u_texsize:new a.bU(g,r.u_texsize),u_ratio:new a.bg(g,r.u_ratio),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_image:new a.bP(g,r.u_image),u_units_to_pixels:new a.bU(g,r.u_units_to_pixels),u_scale:new a.bT(g,r.u_scale),u_fade:new a.bg(g,r.u_fade)}),lineSDF:(g,r)=>({u_translation:new a.bU(g,r.u_translation),u_ratio:new a.bg(g,r.u_ratio),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.bU(g,r.u_units_to_pixels),u_patternscale_a:new a.bU(g,r.u_patternscale_a),u_patternscale_b:new a.bU(g,r.u_patternscale_b),u_sdfgamma:new a.bg(g,r.u_sdfgamma),u_image:new a.bP(g,r.u_image),u_tex_y_a:new a.bg(g,r.u_tex_y_a),u_tex_y_b:new a.bg(g,r.u_tex_y_b),u_mix:new a.bg(g,r.u_mix)}),raster:(g,r)=>({u_tl_parent:new a.bU(g,r.u_tl_parent),u_scale_parent:new a.bg(g,r.u_scale_parent),u_buffer_scale:new a.bg(g,r.u_buffer_scale),u_fade_t:new a.bg(g,r.u_fade_t),u_opacity:new a.bg(g,r.u_opacity),u_image0:new a.bP(g,r.u_image0),u_image1:new a.bP(g,r.u_image1),u_brightness_low:new a.bg(g,r.u_brightness_low),u_brightness_high:new a.bg(g,r.u_brightness_high),u_saturation_factor:new a.bg(g,r.u_saturation_factor),u_contrast_factor:new a.bg(g,r.u_contrast_factor),u_spin_weights:new a.bT(g,r.u_spin_weights),u_coords_top:new a.bS(g,r.u_coords_top),u_coords_bottom:new a.bS(g,r.u_coords_bottom)}),symbolIcon:(g,r)=>({u_is_size_zoom_constant:new a.bP(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(g,r.u_is_size_feature_constant),u_size_t:new a.bg(g,r.u_size_t),u_size:new a.bg(g,r.u_size),u_camera_to_center_distance:new a.bg(g,r.u_camera_to_center_distance),u_pitch:new a.bg(g,r.u_pitch),u_rotate_symbol:new a.bP(g,r.u_rotate_symbol),u_aspect_ratio:new a.bg(g,r.u_aspect_ratio),u_fade_change:new a.bg(g,r.u_fade_change),u_label_plane_matrix:new a.bR(g,r.u_label_plane_matrix),u_coord_matrix:new a.bR(g,r.u_coord_matrix),u_is_text:new a.bP(g,r.u_is_text),u_pitch_with_map:new a.bP(g,r.u_pitch_with_map),u_is_along_line:new a.bP(g,r.u_is_along_line),u_is_variable_anchor:new a.bP(g,r.u_is_variable_anchor),u_texsize:new a.bU(g,r.u_texsize),u_texture:new a.bP(g,r.u_texture),u_translation:new a.bU(g,r.u_translation),u_pitched_scale:new a.bg(g,r.u_pitched_scale)}),symbolSDF:(g,r)=>({u_is_size_zoom_constant:new a.bP(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(g,r.u_is_size_feature_constant),u_size_t:new a.bg(g,r.u_size_t),u_size:new a.bg(g,r.u_size),u_camera_to_center_distance:new a.bg(g,r.u_camera_to_center_distance),u_pitch:new a.bg(g,r.u_pitch),u_rotate_symbol:new a.bP(g,r.u_rotate_symbol),u_aspect_ratio:new a.bg(g,r.u_aspect_ratio),u_fade_change:new a.bg(g,r.u_fade_change),u_label_plane_matrix:new a.bR(g,r.u_label_plane_matrix),u_coord_matrix:new a.bR(g,r.u_coord_matrix),u_is_text:new a.bP(g,r.u_is_text),u_pitch_with_map:new a.bP(g,r.u_pitch_with_map),u_is_along_line:new a.bP(g,r.u_is_along_line),u_is_variable_anchor:new a.bP(g,r.u_is_variable_anchor),u_texsize:new a.bU(g,r.u_texsize),u_texture:new a.bP(g,r.u_texture),u_gamma_scale:new a.bg(g,r.u_gamma_scale),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_is_halo:new a.bP(g,r.u_is_halo),u_translation:new a.bU(g,r.u_translation),u_pitched_scale:new a.bg(g,r.u_pitched_scale)}),symbolTextAndIcon:(g,r)=>({u_is_size_zoom_constant:new a.bP(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(g,r.u_is_size_feature_constant),u_size_t:new a.bg(g,r.u_size_t),u_size:new a.bg(g,r.u_size),u_camera_to_center_distance:new a.bg(g,r.u_camera_to_center_distance),u_pitch:new a.bg(g,r.u_pitch),u_rotate_symbol:new a.bP(g,r.u_rotate_symbol),u_aspect_ratio:new a.bg(g,r.u_aspect_ratio),u_fade_change:new a.bg(g,r.u_fade_change),u_label_plane_matrix:new a.bR(g,r.u_label_plane_matrix),u_coord_matrix:new a.bR(g,r.u_coord_matrix),u_is_text:new a.bP(g,r.u_is_text),u_pitch_with_map:new a.bP(g,r.u_pitch_with_map),u_is_along_line:new a.bP(g,r.u_is_along_line),u_is_variable_anchor:new a.bP(g,r.u_is_variable_anchor),u_texsize:new a.bU(g,r.u_texsize),u_texsize_icon:new a.bU(g,r.u_texsize_icon),u_texture:new a.bP(g,r.u_texture),u_texture_icon:new a.bP(g,r.u_texture_icon),u_gamma_scale:new a.bg(g,r.u_gamma_scale),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_is_halo:new a.bP(g,r.u_is_halo),u_translation:new a.bU(g,r.u_translation),u_pitched_scale:new a.bg(g,r.u_pitched_scale)}),background:(g,r)=>({u_opacity:new a.bg(g,r.u_opacity),u_color:new a.bQ(g,r.u_color)}),backgroundPattern:(g,r)=>({u_opacity:new a.bg(g,r.u_opacity),u_image:new a.bP(g,r.u_image),u_pattern_tl_a:new a.bU(g,r.u_pattern_tl_a),u_pattern_br_a:new a.bU(g,r.u_pattern_br_a),u_pattern_tl_b:new a.bU(g,r.u_pattern_tl_b),u_pattern_br_b:new a.bU(g,r.u_pattern_br_b),u_texsize:new a.bU(g,r.u_texsize),u_mix:new a.bg(g,r.u_mix),u_pattern_size_a:new a.bU(g,r.u_pattern_size_a),u_pattern_size_b:new a.bU(g,r.u_pattern_size_b),u_scale_a:new a.bg(g,r.u_scale_a),u_scale_b:new a.bg(g,r.u_scale_b),u_pixel_coord_upper:new a.bU(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(g,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(g,r.u_tile_units_to_pixels)}),terrain:(g,r)=>({u_texture:new a.bP(g,r.u_texture),u_ele_delta:new a.bg(g,r.u_ele_delta),u_fog_matrix:new a.bR(g,r.u_fog_matrix),u_fog_color:new a.bQ(g,r.u_fog_color),u_fog_ground_blend:new a.bg(g,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(g,r.u_fog_ground_blend_opacity),u_horizon_color:new a.bQ(g,r.u_horizon_color),u_horizon_fog_blend:new a.bg(g,r.u_horizon_fog_blend),u_is_globe_mode:new a.bg(g,r.u_is_globe_mode)}),terrainDepth:(g,r)=>({u_ele_delta:new a.bg(g,r.u_ele_delta)}),terrainCoords:(g,r)=>({u_texture:new a.bP(g,r.u_texture),u_terrain_coords_id:new a.bg(g,r.u_terrain_coords_id),u_ele_delta:new a.bg(g,r.u_ele_delta)}),projectionErrorMeasurement:(g,r)=>({u_input:new a.bg(g,r.u_input),u_output_expected:new a.bg(g,r.u_output_expected)}),atmosphere:(g,r)=>({u_sun_pos:new a.bT(g,r.u_sun_pos),u_atmosphere_blend:new a.bg(g,r.u_atmosphere_blend),u_globe_position:new a.bT(g,r.u_globe_position),u_globe_radius:new a.bg(g,r.u_globe_radius),u_inv_proj_matrix:new a.bR(g,r.u_inv_proj_matrix)}),sky:(g,r)=>({u_sky_color:new a.bQ(g,r.u_sky_color),u_horizon_color:new a.bQ(g,r.u_horizon_color),u_horizon:new a.bU(g,r.u_horizon),u_horizon_normal:new a.bU(g,r.u_horizon_normal),u_sky_horizon_blend:new a.bg(g,r.u_sky_horizon_blend),u_sky_blend:new a.bg(g,r.u_sky_blend)})};class Ax{constructor(r,u,d){this.context=r;let m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){let u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let sf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ns{constructor(r,u,d,m){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;let y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);let u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let d=0;d<this.attributes.length;d++){let m=u.attributes[this.attributes[d].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,d){for(let m=0;m<this.attributes.length;m++){let y=this.attributes[m],w=u.attributes[y.name];w!==void 0&&r.vertexAttribPointer(w,y.components,r[sf[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class cr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Tv extends cr{getDefault(){return a.bf.transparent}set(r){let u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ev extends cr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class qx extends cr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Av extends cr{getDefault(){return[!0,!0,!0,!0]}set(r){let u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Nl extends cr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class qv extends cr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Sq extends cr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){let u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Tq extends cr{getDefault(){let r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){let u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Eq extends cr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Aq extends cr{getDefault(){return[0,1]}set(r){let u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ix extends cr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class qq extends cr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Px extends cr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class lf extends cr{getDefault(){let r=this.gl;return[r.ONE,r.ZERO]}set(r){let u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class uf extends cr{getDefault(){return a.bf.transparent}set(r){let u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class cf extends cr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Iv extends cr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class Bl extends cr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class wh extends cr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Du extends cr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Ia extends cr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Cx extends cr{getDefault(){let r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){let u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Mx extends cr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Pv extends cr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class jl extends cr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class hf extends cr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class df extends cr{getDefault(){return null}set(r){let u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Sh extends cr{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;let d=this.gl;Eo(d)?d.bindVertexArray(r):(u=d.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class ff extends cr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Rx extends cr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Lu extends cr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Us extends cr{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Ox extends Us{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Cv extends Us{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class er extends Us{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}let Th="Framebuffer is not complete";class Iq{constructor(r,u,d,m,y){this.context=r,this.width=u,this.height=d;let w=r.gl,A=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new Ox(r,A),m)this.depthAttachment=y?new er(r,A):new Cv(r,A);else if(y)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(Th)}destroy(){let r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){let d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class kx{constructor(r){var u,d;if(this.gl=r,this.clearColor=new Tv(this),this.clearDepth=new Ev(this),this.clearStencil=new qx(this),this.colorMask=new Av(this),this.depthMask=new Nl(this),this.stencilMask=new qv(this),this.stencilFunc=new Sq(this),this.stencilOp=new Tq(this),this.stencilTest=new Eq(this),this.depthRange=new Aq(this),this.depthTest=new Ix(this),this.depthFunc=new qq(this),this.blend=new Px(this),this.blendFunc=new lf(this),this.blendColor=new uf(this),this.blendEquation=new cf(this),this.cullFace=new Iv(this),this.cullFaceSide=new Bl(this),this.frontFace=new wh(this),this.program=new Du(this),this.activeTexture=new Ia(this),this.viewport=new Cx(this),this.bindFramebuffer=new Mx(this),this.bindRenderbuffer=new Pv(this),this.bindTexture=new jl(this),this.bindVertexBuffer=new hf(this),this.bindElementBuffer=new df(this),this.bindVertexArray=new Sh(this),this.pixelStoreUnpack=new ff(this),this.pixelStoreUnpackPremultiplyAlpha=new Rx(this),this.pixelStoreUnpackFlipY=new Lu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Eo(r)){this.HALF_FLOAT=r.HALF_FLOAT;let m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");let m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Ax(this,r,u)}createVertexBuffer(r,u,d){return new ns(this,r,u,d)}createRenderbuffer(r,u,d){let m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,r,u,d),this.bindRenderbuffer.set(null),y}createFramebuffer(r,u,d,m){return new Iq(this,r,u,d,m)}clear({color:r,depth:u,stencil:d}){let m=this.gl,y=0;r&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),m.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.bH(r.blendFunction,Or.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Eo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return Eo(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let Vs;function Dx(g,r,u,d,m){let y=g.context,w=g.transform,A=y.gl,P=g.useProgram("collisionBox"),k=[],L=0,N=0;for(let ie=0;ie<d.length;ie++){let se=d[ie],de=r.getTile(se).getBucket(u);if(!de)continue;let ce=m?de.textCollisionBox:de.iconCollisionBox,me=de.collisionCircleArray;me.length>0&&(k.push({circleArray:me,circleOffset:N,coord:se}),L+=me.length/4,N=L),ce&&P.draw(y,A.LINES,Ft.disabled,or.disabled,g.colorModeForRenderPass(),At.disabled,af(g.transform),g.style.map.terrain&&g.style.map.terrain.getTerrainData(se),w.getProjectionData({overscaledTileID:se,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,null,g.transform.zoom,null,null,ce.collisionVertexBuffer)}if(!m||!k.length)return;let z=g.useProgram("collisionCircle"),j=new a.b$;j.resize(4*L),j._trim();let Z=0;for(let ie of k)for(let se=0;se<ie.circleArray.length/4;se++){let de=4*se,ce=ie.circleArray[de+0],me=ie.circleArray[de+1],ye=ie.circleArray[de+2],he=ie.circleArray[de+3];j.emplace(Z++,ce,me,ye,he,0),j.emplace(Z++,ce,me,ye,he,1),j.emplace(Z++,ce,me,ye,he,2),j.emplace(Z++,ce,me,ye,he,3)}(!Vs||Vs.length<2*L)&&(Vs=function(ie){let se=2*ie,de=new a.c1;de.resize(se),de._trim();for(let ce=0;ce<se;ce++){let me=6*ce;de.uint16[me+0]=4*ce+0,de.uint16[me+1]=4*ce+1,de.uint16[me+2]=4*ce+2,de.uint16[me+3]=4*ce+2,de.uint16[me+4]=4*ce+3,de.uint16[me+5]=4*ce+0}return de}(L));let te=y.createIndexBuffer(Vs,!0),ee=y.createVertexBuffer(j,a.c0.members,!0);for(let ie of k){let se=_q(g.transform);z.draw(y,A.TRIANGLES,Ft.disabled,or.disabled,g.colorModeForRenderPass(),At.disabled,se,g.style.map.terrain&&g.style.map.terrain.getTerrainData(ie.coord),null,u.id,ee,te,a.aM.simpleSegment(0,2*ie.circleOffset,ie.circleArray.length,ie.circleArray.length/2),null,g.transform.zoom,null,null,null)}ee.destroy(),te.destroy()}let Pq=a.ag(new Float32Array(16));function Lx(g,r,u,d,m,y){let{horizontalAlign:w,verticalAlign:A}=a.aH(g);return new a.P((-(w-.5)*r/m+d[0])*y,(-(A-.5)*u/m+d[1])*y)}function Cq(g,r,u,d,m,y){let w=r.tileAnchorPoint.add(new a.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let A=d.mult(y);u||(A=A.rotate(-m));let P=w.add(A);return mi(P.x,P.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(u){let A=Hi(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(g),P=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return g.add(d.rotate(P))}return g.add(d)}function Mv(g,r,u,d,m,y,w,A,P,k,L,N){let z=g.text.placedSymbolArray,j=g.text.dynamicLayoutVertexArray,Z=g.icon.dynamicLayoutVertexArray,te={};j.clear();for(let ee=0;ee<z.length;ee++){let ie=z.get(ee),se=ie.hidden||!ie.crossTileID||g.allowVerticalPlacement&&!ie.placedOrientation?null:d[ie.crossTileID];if(se){let de=new a.P(ie.anchorX,ie.anchorY),ce={getElevation:N,width:m.width,height:m.height,pitchedLabelPlaneMatrix:y,pitchWithMap:u,transform:m,tileAnchorPoint:de,translation:k,unwrappedTileID:L},me=u?Fs(de.x,de.y,ce):Hi(de.x,de.y,ce),ye=Ke(m.cameraToCenterDistance,me.signedDistanceFromCamera),he=a.ap(g.textSizeData,A,ie)*ye/a.aB;u&&(he*=g.tilePixelRatio/w);let{width:Te,height:Oe,anchor:Ie,textOffset:Pe,textBoxScale:Re}=se,We=Lx(Ie,Te,Oe,Pe,Re,he),Xe=m.getPitchedTextCorrection(de.x+k[0],de.y+k[1],L),je=Cq(me.point,ce,r,We,-m.bearingInRadians,Xe),dt=g.allowVerticalPlacement&&ie.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let Ut=0;Ut<ie.numGlyphs;Ut++)a.av(j,je,dt);P&&ie.associatedIconIndex>=0&&(te[ie.associatedIconIndex]={shiftedAnchor:je,angle:dt})}else To(ie.numGlyphs,j)}if(P){Z.clear();let ee=g.icon.placedSymbolArray;for(let ie=0;ie<ee.length;ie++){let se=ee.get(ie);if(se.hidden)To(se.numGlyphs,Z);else{let de=te[ie];if(de)for(let ce=0;ce<se.numGlyphs;ce++)a.av(Z,de.shiftedAnchor,de.angle);else To(se.numGlyphs,Z)}}g.icon.dynamicLayoutVertexBuffer.updateData(Z)}g.text.dynamicLayoutVertexBuffer.updateData(j)}function pf(g,r,u){return u.iconsInText&&r?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Eh(g,r,u,d,m,y,w,A,P,k,L,N,z){let j=g.context,Z=j.gl,te=g.transform,ee=A==="map",ie=P==="map",se=A!=="viewport"&&u.layout.get("symbol-placement")!=="point",de=ee&&!ie&&!se,ce=!u.layout.get("symbol-sort-key").isConstant(),me=!1,ye=g.getDepthModeForSublayer(0,Ft.ReadOnly),he=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Te=[],Oe=te.getCircleRadiusCorrection();for(let Ie of d){let Pe=r.getTile(Ie),Re=Pe.getBucket(u);if(!Re)continue;let We=m?Re.text:Re.icon;if(!We||!We.segments.get().length||!We.hasVisibleVertices)continue;let Xe=We.programConfigurations.get(u.id),je=m||Re.sdfIcons,dt=m?Re.textSizeData:Re.iconSizeData,Ut=ie||te.pitch!==0,hr=g.useProgram(pf(je,m,Re),Xe),_r=a.an(dt,te.zoom),vr=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ie),Ur,Yr,Bt,xr,gi=[0,0],Ii=null;if(m)Yr=Pe.glyphAtlasTexture,Bt=Z.LINEAR,Ur=Pe.glyphAtlasTexture.size,Re.iconsInText&&(gi=Pe.imageAtlasTexture.size,Ii=Pe.imageAtlasTexture,xr=Ut||g.options.rotating||g.options.zooming||dt.kind==="composite"||dt.kind==="camera"?Z.LINEAR:Z.NEAREST);else{let yi=u.layout.get("icon-size").constantOr(0)!==1||Re.iconsNeedLinear;Yr=Pe.imageAtlasTexture,Bt=je||g.options.rotating||g.options.zooming||yi||Ut?Z.LINEAR:Z.NEAREST,Ur=Pe.imageAtlasTexture.size}let zi=a.aC(Pe,1,g.transform.zoom),En=di(ee,g.transform,zi),oo=a.L();a.aq(oo,En);let Gs=Qt(ie,ee,g.transform,zi),Ws=a.aD(te,Pe,y,w),Ku=te.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),Hu=he&&Re.hasTextData(),Kl=u.layout.get("icon-text-fit")!=="none"&&Hu&&Re.hasIconData();if(se){let yi=g.style.map.terrain?(Ma,_i)=>g.style.map.terrain.getElevation(Ie,Ma,_i):null,Pi=u.layout.get("text-rotation-alignment")==="map";Hr(Re,g,m,En,oo,ie,k,Pi,Ie.toUnwrapped(),te.width,te.height,Ws,yi)}let Hl=m&&he||Kl,Zn=se||Hl?Pq:ie?En:g.transform.clipSpaceToPixelsMatrix,so=je&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,An;An=je?Re.iconsInText?wq(dt.kind,_r,de,ie,se,Hl,g,Zn,Gs,Ws,Ur,gi,Oe):Sx(dt.kind,_r,de,ie,se,Hl,g,Zn,Gs,Ws,m,Ur,0,Oe):bh(dt.kind,_r,de,ie,se,Hl,g,Zn,Gs,Ws,m,Ur,Oe);let Zs={program:hr,buffers:We,uniformValues:An,projectionData:Ku,atlasTexture:Yr,atlasTextureIcon:Ii,atlasInterpolation:Bt,atlasInterpolationIcon:xr,isSDF:je,hasHalo:so};if(ce&&Re.canOverlap){me=!0;let yi=We.segments.get();for(let Pi of yi)Te.push({segments:new a.aM([Pi]),sortKey:Pi.sortKey,state:Zs,terrainData:vr})}else Te.push({segments:We.segments,sortKey:0,state:Zs,terrainData:vr})}me&&Te.sort((Ie,Pe)=>Ie.sortKey-Pe.sortKey);for(let Ie of Te){let Pe=Ie.state;if(j.activeTexture.set(Z.TEXTURE0),Pe.atlasTexture.bind(Pe.atlasInterpolation,Z.CLAMP_TO_EDGE),Pe.atlasTextureIcon&&(j.activeTexture.set(Z.TEXTURE1),Pe.atlasTextureIcon&&Pe.atlasTextureIcon.bind(Pe.atlasInterpolationIcon,Z.CLAMP_TO_EDGE)),Pe.isSDF){let Re=Pe.uniformValues;Pe.hasHalo&&(Re.u_is_halo=1,Ah(Pe.buffers,Ie.segments,u,g,Pe.program,ye,L,N,Re,Pe.projectionData,Ie.terrainData)),Re.u_is_halo=0}Ah(Pe.buffers,Ie.segments,u,g,Pe.program,ye,L,N,Pe.uniformValues,Pe.projectionData,Ie.terrainData)}}function Ah(g,r,u,d,m,y,w,A,P,k,L){let N=d.context;m.draw(N,N.gl.TRIANGLES,y,w,A,At.backCCW,P,L,k,u.id,g.layoutVertexBuffer,g.indexBuffer,r,u.paint,d.transform.zoom,g.programConfigurations.get(u.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Rv(g,r,u,d,m){let y=g.context,w=y.gl,A=or.disabled,P=new Or([w.ONE,w.ONE],a.bf.transparent,[!0,!0,!0,!0]),k=r.getBucket(u);if(!k)return;let L=d.key,N=u.heatmapFbos.get(L);N||(N=qh(y,r.tileSize,r.tileSize),u.heatmapFbos.set(L,N)),y.bindFramebuffer.set(N.framebuffer),y.viewport.set([0,0,r.tileSize,r.tileSize]),y.clear({color:a.bf.transparent});let z=k.programConfigurations.get(u.id),j=g.useProgram("heatmap",z,!m),Z=g.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),te=g.style.map.terrain.getTerrainData(d);j.draw(y,w.TRIANGLES,Ft.disabled,A,P,At.disabled,yx(r,g.transform.zoom,u.paint.get("heatmap-intensity"),1),te,Z,u.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,u.paint,g.transform.zoom,z)}function Fx(g,r,u,d,m){let y=g.context,w=y.gl,A=g.transform;y.setColorMode(g.colorModeForRenderPass());let P=Ih(y,r),k=u.key,L=r.heatmapFbos.get(k);if(!L)return;y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,L.colorAttachment.get()),y.activeTexture.set(w.TEXTURE1),P.bind(w.LINEAR,w.CLAMP_TO_EDGE);let N=A.getProjectionData({overscaledTileID:u,applyTerrainMatrix:m,applyGlobeMatrix:!d});g.useProgram("heatmapTexture").draw(y,w.TRIANGLES,Ft.disabled,or.disabled,g.colorModeForRenderPass(),At.disabled,yv(g,r,0,1),null,N,r.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,r.paint,A.zoom),L.destroy(),r.heatmapFbos.delete(k)}function qh(g,r,u){var d,m;let y=g.gl,w=y.createTexture();y.bindTexture(y.TEXTURE_2D,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);let A=(d=g.HALF_FLOAT)!==null&&d!==void 0?d:y.UNSIGNED_BYTE,P=(m=g.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,P,r,u,0,y.RGBA,A,null);let k=g.createFramebuffer(r,u,!1,!1);return k.colorAttachment.set(w),k}function Ih(g,r){return r.colorRampTexture||(r.colorRampTexture=new a.T(g,r.colorRamp,g.gl.RGBA)),r.colorRampTexture}function Ph(g,r,u,d,m){if(!u||!d||!d.imageAtlas)return;let y=d.imageAtlas.patternPositions,w=y[u.to.toString()],A=y[u.from.toString()];if(!w&&A&&(w=A),!A&&w&&(A=w),!w||!A){let P=m.getPaintProperty(r);w=y[P],A=y[P]}w&&A&&g.setConstantPatternPositions(w,A)}function mf(g,r,u,d,m,y,w,A){let P=g.context.gl,k="fill-pattern",L=u.paint.get(k),N=L&&L.constantOr(1),z=u.getCrossfadeParameters(),j,Z,te,ee,ie,se=g.transform,de=u.paint.get("fill-translate"),ce=u.paint.get("fill-translate-anchor");w?(Z=N&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=P.LINES):(Z=N?"fillPattern":"fill",j=P.TRIANGLES);let me=L.constantOr(null);for(let ye of d){let he=r.getTile(ye);if(N&&!he.patternsLoaded())continue;let Te=he.getBucket(u);if(!Te)continue;let Oe=Te.programConfigurations.get(u.id),Ie=g.useProgram(Z,Oe),Pe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ye);N&&(g.context.activeTexture.set(P.TEXTURE0),he.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Oe.updatePaintBuffers(z)),Ph(Oe,k,me,he,u);let Re=se.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!A,applyTerrainMatrix:!0}),We=a.aD(se,he,de,ce);if(w){ee=Te.indexBuffer2,ie=Te.segments2;let je=[P.drawingBufferWidth,P.drawingBufferHeight];te=Z==="fillOutlinePattern"&&N?_h(g,z,he,je,We):yh(je,We)}else ee=Te.indexBuffer,ie=Te.segments,te=N?nf(g,z,he,We):{u_fill_translate:We};let Xe=g.stencilModeForClipping(ye);Ie.draw(g.context,j,m,Xe,y,At.backCCW,te,Pe,Re,u.id,Te.layoutVertexBuffer,ee,ie,u.paint,g.transform.zoom,Oe)}}function Ov(g,r,u,d,m,y,w,A){let P=g.context,k=P.gl,L="fill-extrusion-pattern",N=u.paint.get(L),z=N.constantOr(1),j=u.getCrossfadeParameters(),Z=u.paint.get("fill-extrusion-opacity"),te=N.constantOr(null),ee=g.transform;for(let ie of d){let se=r.getTile(ie),de=se.getBucket(u);if(!de)continue;let ce=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ie),me=de.programConfigurations.get(u.id),ye=g.useProgram(z?"fillExtrusionPattern":"fillExtrusion",me);z&&(g.context.activeTexture.set(k.TEXTURE0),se.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),me.updatePaintBuffers(j));let he=ee.getProjectionData({overscaledTileID:ie,applyGlobeMatrix:!A,applyTerrainMatrix:!0});Ph(me,L,te,se,u);let Te=a.aD(ee,se,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Oe=u.paint.get("fill-extrusion-vertical-gradient"),Ie=z?gq(g,Oe,Z,Te,ie,j,se):eo(g,Oe,Z,Te);ye.draw(P,P.gl.TRIANGLES,m,y,w,At.backCCW,Ie,ce,he,u.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,u.paint,g.transform.zoom,me,g.style.map.terrain&&de.centroidVertexBuffer)}}function Ul(g,r,u,d,m,y,w,A,P){var k;let L=g.style.projection,N=g.context,z=g.transform,j=N.gl,Z=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],te=g.useProgram("hillshade",null,!1,Z),ee=!g.options.moving;for(let ie of d){let se=r.getTile(ie),de=se.fbo;if(!de)continue;let ce=L.getMeshFromTileID(N,ie.canonical,A,!0,"raster"),me=(k=g.style.map.terrain)===null||k===void 0?void 0:k.getTerrainData(ie);N.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,de.colorAttachment.get());let ye=z.getProjectionData({overscaledTileID:ie,aligned:ee,applyGlobeMatrix:!P,applyTerrainMatrix:!0});te.draw(N,j.TRIANGLES,y,m[ie.overscaledZ],w,At.backCCW,xq(g,se,u),me,ye,u.id,ce.vertexBuffer,ce.indexBuffer,ce.segments)}}function kv(g,r,u,d,m,y,w,A,P){var k;let L=g.style.projection,N=g.context,z=g.transform,j=N.gl,Z=g.useProgram("colorRelief"),te=!g.options.moving,ee=!0,ie=0;for(let se of d){let de=r.getTile(se),ce=de.dem;if(ee){let Ie=j.getParameter(j.MAX_TEXTURE_SIZE),{elevationTexture:Pe,colorTexture:Re}=u.getColorRampTextures(N,Ie,ce.getUnpackVector());N.activeTexture.set(j.TEXTURE1),Pe.bind(j.NEAREST,j.CLAMP_TO_EDGE),N.activeTexture.set(j.TEXTURE4),Re.bind(j.LINEAR,j.CLAMP_TO_EDGE),ee=!1,ie=Pe.size[0]}if(!ce||!ce.data)continue;let me=ce.stride,ye=ce.getPixels();if(N.activeTexture.set(j.TEXTURE0),N.pixelStoreUnpackPremultiplyAlpha.set(!1),de.demTexture=de.demTexture||g.getTileTexture(me),de.demTexture){let Ie=de.demTexture;Ie.update(ye,{premultiply:!1}),Ie.bind(j.LINEAR,j.CLAMP_TO_EDGE)}else de.demTexture=new a.T(N,ye,j.RGBA,{premultiply:!1}),de.demTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE);let he=L.getMeshFromTileID(N,se.canonical,A,!0,"raster"),Te=(k=g.style.map.terrain)===null||k===void 0?void 0:k.getTerrainData(se),Oe=z.getProjectionData({overscaledTileID:se,aligned:te,applyGlobeMatrix:!P,applyTerrainMatrix:!0});Z.draw(N,j.TRIANGLES,y,m[se.overscaledZ],w,At.backCCW,xx(u,de.dem,ie),Te,Oe,u.id,he.vertexBuffer,he.indexBuffer,he.segments)}}let vf=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Vl(g,r,u,d,m,y,w,A,P=!1,k=!1){let L=d[d.length-1].overscaledZ,N=g.context,z=N.gl,j=g.useProgram("raster"),Z=g.transform,te=g.style.projection,ee=g.colorModeForRenderPass(),ie=!g.options.moving;for(let se of d){let de=g.getDepthModeForSublayer(se.overscaledZ-L,u.paint.get("raster-opacity")===1?Ft.ReadWrite:Ft.ReadOnly,z.LESS),ce=r.getTile(se);ce.registerFadeDuration(u.paint.get("raster-fade-duration"));let me=r.findLoadedParent(se,0),ye=r.findLoadedSibling(se),he=Dv(ce,me||ye||null,r,u,g.transform,g.style.map.terrain),Te,Oe,Ie=u.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;N.activeTexture.set(z.TEXTURE0),ce.texture.bind(Ie,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(z.TEXTURE1),me?(me.texture.bind(Ie,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),Te=Math.pow(2,me.tileID.overscaledZ-ce.tileID.overscaledZ),Oe=[ce.tileID.canonical.x*Te%1,ce.tileID.canonical.y*Te%1]):ce.texture.bind(Ie,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),ce.texture.useMipmap&&N.extTextureFilterAnisotropic&&g.transform.pitch>20&&z.texParameterf(z.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax);let Pe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(se),Re=Z.getProjectionData({overscaledTileID:se,aligned:ie,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),We=xh(Oe||[0,0],Te||1,he,u,A),Xe=te.getMeshFromTileID(N,se.canonical,y,w,"raster");j.draw(N,z.TRIANGLES,de,m?m[se.overscaledZ]:or.disabled,ee,P?At.frontCCW:At.backCCW,We,Pe,Re,u.id,Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}}function Dv(g,r,u,d,m,y){let w=d.paint.get("raster-fade-duration");if(!y&&w>0){let A=O.now(),P=(A-g.timeAdded)/w,k=r?(A-r.timeAdded)/w:-1,L=u.getSource(),N=pt(m,{tileSize:L.tileSize,roundZoom:L.roundZoom}),z=!r||Math.abs(r.tileID.overscaledZ-N)>Math.abs(g.tileID.overscaledZ-N),j=z&&g.refreshedUponExpiration?1:a.ah(z?P:1-k,0,1);return g.refreshedUponExpiration&&P>=1&&(g.refreshedUponExpiration=!1),r?{opacity:1,mix:1-j}:{opacity:j,mix:0}}return{opacity:1,mix:0}}let zx=new a.bf(1,0,0,1),Nx=new a.bf(0,1,0,1),gf=new a.bf(0,0,1,1),Lv=new a.bf(1,0,1,1),Mq=new a.bf(0,1,1,1);function Fv(g,r,u,d){Io(g,0,r+u/2,g.transform.width,u,d)}function Xr(g,r,u,d){Io(g,r-u/2,0,u,g.transform.height,d)}function Io(g,r,u,d,m,y){let w=g.context,A=w.gl;A.enable(A.SCISSOR_TEST),A.scissor(r*g.pixelRatio,u*g.pixelRatio,d*g.pixelRatio,m*g.pixelRatio),w.clear({color:y}),A.disable(A.SCISSOR_TEST)}function Pa(g,r,u){let d=g.context,m=d.gl,y=g.useProgram("debug"),w=Ft.disabled,A=or.disabled,P=g.colorModeForRenderPass(),k="$debug",L=g.style.map.terrain&&g.style.map.terrain.getTerrainData(u);d.activeTexture.set(m.TEXTURE0);let N=r.getTileByID(u.key).latestRawTileData,z=Math.floor((N&&N.byteLength||0)/1024),j=r.getTile(u).tileSize,Z=512/Math.min(j,512)*(u.overscaledZ/g.transform.zoom)*.5,te=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(te+=` => ${u.overscaledZ}`),function(ie,se){ie.initDebugOverlayCanvas();let de=ie.debugOverlayCanvas,ce=ie.context.gl,me=ie.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,de.width,de.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(se,5,5),me.strokeText(se,5,5),ie.debugOverlayTexture.update(de),ie.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(g,`${te} ${z}kB`);let ee=g.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(d,m.TRIANGLES,w,A,Or.alphaBlended,At.disabled,Fl(a.bf.transparent,Z),null,ee,k,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),y.draw(d,m.LINE_STRIP,w,A,P,At.disabled,Fl(a.bf.red),L,ee,k,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function yf(g,r,u,d){let{isRenderingGlobe:m}=d,y=g.context,w=y.gl,A=g.transform,P=g.colorModeForRenderPass(),k=g.getDepthModeFor3D(),L=g.useProgram("terrain");y.bindFramebuffer.set(null),y.viewport.set([0,0,g.width,g.height]);for(let N of u){let z=r.getTerrainMesh(N.tileID),j=g.renderToTexture.getTexture(N),Z=r.getTerrainData(N.tileID);y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,j.texture);let te=r.getMeshFrameDelta(A.zoom),ee=A.calculateFogMatrix(N.tileID.toUnwrapped()),ie=tf(te,ee,g.style.sky,A.pitch,m),se=A.getProjectionData({overscaledTileID:N.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});L.draw(y,w.TRIANGLES,k,or.disabled,P,At.backCCW,ie,Z,se,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}function Ch(g,r){if(!r.mesh){let u=new a.aL;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);let d=new a.aN;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),r.mesh=new Ml(g.createVertexBuffer(u,js.members),g.createIndexBuffer(d),a.aM.simpleSegment(0,0,u.length,d.length))}return r.mesh}class Bx{constructor(r,u){this.context=new kx(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Kt.maxUnderzooming+Kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mu}resize(r,u,d){if(this.width=Math.floor(r*d),this.height=Math.floor(u*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let m of this.style._order)this.style._layers[m].resize()}setup(){let r=this.context,u=new a.aL;u.emplaceBack(0,0),u.emplaceBack(a.$,0),u.emplaceBack(0,a.$),u.emplaceBack(a.$,a.$),this.tileExtentBuffer=r.createVertexBuffer(u,js.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);let d=new a.aL;d.emplaceBack(0,0),d.emplaceBack(a.$,0),d.emplaceBack(0,a.$),d.emplaceBack(a.$,a.$),this.debugBuffer=r.createVertexBuffer(d,js.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);let m=new a.c6;m.emplaceBack(0,0,0,0),m.emplaceBack(a.$,0,a.$,0),m.emplaceBack(0,a.$,0,a.$),m.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=r.createVertexBuffer(m,mq.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);let y=new a.aL;y.emplaceBack(0,0),y.emplaceBack(a.$,0),y.emplaceBack(0,a.$),y.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(y,js.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);let w=new a.aL;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(w,js.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);let A=new a.c7;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(A);let P=new a.aN;P.emplaceBack(1,0,2),P.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(P);let k=this.context.gl;this.stencilClearMode=new or({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO),this.tileExtentMesh=new Ml(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let d=a.L();a.bY(d,0,this.width,this.height,0,0,1),a.N(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]);let m={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(r,u.TRIANGLES,Ft.disabled,this.stencilClearMode,Or.disabled,At.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u,d){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source,this.nextStencilID+u.length>256&&this.clearStencil();let m=this.context;m.setColorMode(Or.disabled),m.setDepthMode(Ft.disabled);let y={};for(let w of u)y[w.key]=this.nextStencilID++;this._renderTileMasks(y,u,d,!0),this._renderTileMasks(y,u,d,!1),this._tileClippingMaskIDs=y}_renderTileMasks(r,u,d,m){let y=this.context,w=y.gl,A=this.style.projection,P=this.transform,k=this.useProgram("clippingMask");for(let L of u){let N=r[L.key],z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(L),j=A.getMeshFromTileID(this.context,L.canonical,m,!0,"stencil"),Z=P.getProjectionData({overscaledTileID:L,applyGlobeMatrix:!d,applyTerrainMatrix:!0});k.draw(y,w.TRIANGLES,Ft.disabled,new or({func:w.ALWAYS,mask:0},N,255,w.KEEP,w.KEEP,w.REPLACE),Or.disabled,d?At.disabled:At.backCCW,null,z,Z,"$clipping",j.vertexBuffer,j.indexBuffer,j.segments)}}_renderTilesDepthBuffer(){let r=this.context,u=r.gl,d=this.style.projection,m=this.transform,y=this.useProgram("depth"),w=this.getDepthModeFor3D(),A=Ee(m,{tileSize:m.tileSize});for(let P of A){let k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(P),L=d.getMeshFromTileID(this.context,P.canonical,!0,!0,"raster"),N=m.getProjectionData({overscaledTileID:P,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(r,u.TRIANGLES,w,or.disabled,Or.disabled,At.backCCW,null,k,N,"$clipping",L.vertexBuffer,L.indexBuffer,L.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let r=this.nextStencilID++,u=this.context.gl;return new or({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){let u=this.context.gl;return new or({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){let u=this.context.gl,d=r.sort((w,A)=>A.overscaledZ-w.overscaledZ),m=d[d.length-1].overscaledZ,y=d[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();let w={};for(let A=0;A<y;A++)w[A+m]=new or({func:u.GEQUAL,mask:255},A+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=y,[w,d]}return[{[m]:or.disabled},d]}stencilConfigForOverlapTwoPass(r){let u=this.context.gl,d=r.sort((w,A)=>A.overscaledZ-w.overscaledZ),m=d[d.length-1].overscaledZ,y=d[0].overscaledZ-m+1;if(this.clearStencil(),y>1){let w={},A={};for(let P=0;P<y;P++)w[P+m]=new or({func:u.GREATER,mask:255},y+1+P,255,u.KEEP,u.KEEP,u.REPLACE),A[P+m]=new or({func:u.GREATER,mask:255},1+P,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*y+1,[w,A,d]}return this.nextStencilID=3,[{[m]:new or({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[m]:new or({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},d]}colorModeForRenderPass(){let r=this.context.gl;return this._showOverdrawInspector?new Or([r.CONSTANT_COLOR,r.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Or.unblended:Or.alphaBlended}getDepthModeForSublayer(r,u,d){if(!this.opaquePassEnabledForLayer())return Ft.disabled;let m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Ft(d||this.context.gl.LEQUAL,u,[m,m])}getDepthModeFor3D(){return new Ft(this.context.gl.LEQUAL,Ft.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){var d,m;this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(O.now()),this.imageManager.beginFrame();let y=this.style._order,w=this.style.sourceCaches,A={},P={},k={},L={isRenderingToTexture:!1,isRenderingGlobe:((d=r.projection)===null||d===void 0?void 0:d.transitionState)>0};for(let z in w){let j=w[z];j.used&&j.prepare(this.context),A[z]=j.getVisibleCoordinates(!1),P[z]=A[z].slice().reverse(),k[z]=j.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<y.length;z++)if(this.style._layers[y[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let z of y){let j=this.style._layers[z];if(!j.hasOffscreenPass()||j.isHidden(this.transform.zoom))continue;let Z=P[j.source];(j.type==="custom"||Z.length)&&this.renderLayer(this,w[j.source],j,Z,L)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:z=>this.useProgram(z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(z,j){let Z=z.context,te=Z.gl,ee=((ye,he,Te)=>{let Oe=Math.cos(he.rollInRadians),Ie=Math.sin(he.rollInRadians),Pe=ve(he),Re=he.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ye.properties.get("sky-color"),u_horizon_color:ye.properties.get("horizon-color"),u_horizon:[(he.width/2-Pe*Ie)*Te,(he.height/2+Pe*Oe)*Te],u_horizon_normal:[-Ie,Oe],u_sky_horizon_blend:ye.properties.get("sky-horizon-blend")*he.height/2*Te,u_sky_blend:Re}})(j,z.style.map.transform,z.pixelRatio),ie=new Ft(te.LEQUAL,Ft.ReadWrite,[0,1]),se=or.disabled,de=z.colorModeForRenderPass(),ce=z.useProgram("sky"),me=Ch(Z,j);ce.draw(Z,te.TRIANGLES,ie,se,de,At.disabled,ee,null,void 0,"sky",me.vertexBuffer,me.indexBuffer,me.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){let z=this.style._layers[y[this.currentLayer]],j=w[z.source],Z=A[z.source];this._renderTileClippingMasks(z,Z,!1),this.renderLayer(this,j,z,Z,L)}this.renderPass="translucent";let N=!1;for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){let z=this.style._layers[y[this.currentLayer]],j=w[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z,L))continue;this.opaquePassEnabledForLayer()||N||(N=!0,L.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let Z=(z.type==="symbol"?k:P)[z.source];this._renderTileClippingMasks(z,A[z.source],!!this.renderToTexture),this.renderLayer(this,j,z,Z,L)}if(L.isRenderingGlobe&&function(z,j,Z){let te=z.context,ee=te.gl,ie=z.useProgram("atmosphere"),se=new Ft(ee.LEQUAL,Ft.ReadOnly,[0,1]),de=z.transform,ce=function(Re,We){let Xe=Re.properties.get("position"),je=[-Xe.x,-Xe.y,-Xe.z],dt=a.ag(new Float64Array(16));return Re.properties.get("anchor")==="map"&&(a.b6(dt,dt,We.rollInRadians),a.b7(dt,dt,-We.pitchInRadians),a.b6(dt,dt,We.bearingInRadians),a.b7(dt,dt,We.center.lat*Math.PI/180),a.bz(dt,dt,-We.center.lng*Math.PI/180)),a.c5(je,je,dt),je}(Z,z.transform),me=de.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ye=j.properties.get("atmosphere-blend")*me.projectionTransition;if(ye===0)return;let he=Ou(de.worldSize,de.center.lat),Te=de.inverseProjectionMatrix,Oe=new Float64Array(4);Oe[3]=1,a.aw(Oe,Oe,de.modelViewProjectionMatrix),Oe[0]/=Oe[3],Oe[1]/=Oe[3],Oe[2]/=Oe[3],Oe[3]=1,a.aw(Oe,Oe,Te),Oe[0]/=Oe[3],Oe[1]/=Oe[3],Oe[2]/=Oe[3],Oe[3]=1;let Ie=((Re,We,Xe,je,dt)=>({u_sun_pos:Re,u_atmosphere_blend:We,u_globe_position:Xe,u_globe_radius:je,u_inv_proj_matrix:dt}))(ce,ye,[Oe[0],Oe[1],Oe[2]],he,Te),Pe=Ch(te,j);ie.draw(te,ee.TRIANGLES,se,or.disabled,Or.alphaBlended,At.disabled,Ie,null,null,"atmosphere",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let z=function(j,Z){let te=null,ee=Object.values(j._layers).flatMap(ce=>ce.source&&!ce.isHidden(Z)?[j.sourceCaches[ce.source]]:[]),ie=ee.filter(ce=>ce.getSource().type==="vector"),se=ee.filter(ce=>ce.getSource().type!=="vector"),de=ce=>{(!te||te.getSource().maxzoom<ce.getSource().maxzoom)&&(te=ce)};return ie.forEach(ce=>de(ce)),te||se.forEach(ce=>de(ce)),te}(this.style,this.transform.zoom);z&&function(j,Z,te){for(let ee=0;ee<te.length;ee++)Pa(j,Z,te[ee])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){let j=z.transform.padding;Fv(z,z.transform.height-(j.top||0),3,zx),Fv(z,j.bottom||0,3,Nx),Xr(z,j.left||0,3,gf),Xr(z,z.transform.width-(j.right||0),3,Lv);let Z=z.transform.centerPoint;(function(te,ee,ie,se){Io(te,ee-1,ie-10,2,20,se),Io(te,ee-10,ie-1,20,2,se)})(z,Z.x,z.transform.height-Z.y,Mq)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;let u=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix,m=this.terrainFacilitator.dirty;m||(m=r?!a.c8(u,d):!a.c9(u,d)),m||(m=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(a.ca(u,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,w){let A=y.context,P=A.gl,k=y.transform,L=Or.unblended,N=new Ft(P.LEQUAL,Ft.ReadWrite,[0,1]),z=w.sourceCache.getRenderableTiles(),j=y.useProgram("terrainDepth");A.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:a.bf.transparent,depth:1});for(let Z of z){let te=w.getTerrainMesh(Z.tileID),ee=w.getTerrainData(Z.tileID),ie=k.getProjectionData({overscaledTileID:Z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),se={u_ele_delta:w.getMeshFrameDelta(k.zoom)};j.draw(A,P.TRIANGLES,N,or.disabled,L,At.backCCW,se,ee,ie,"terrain",te.vertexBuffer,te.indexBuffer,te.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,w){let A=y.context,P=A.gl,k=y.transform,L=Or.unblended,N=new Ft(P.LEQUAL,Ft.ReadWrite,[0,1]),z=w.getCoordsTexture(),j=w.sourceCache.getRenderableTiles(),Z=y.useProgram("terrainCoords");A.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:a.bf.transparent,depth:1}),w.coordsIndex=[];for(let te of j){let ee=w.getTerrainMesh(te.tileID),ie=w.getTerrainData(te.tileID);A.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,z.texture);let se={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(k.zoom)},de=k.getProjectionData({overscaledTileID:te.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Z.draw(A,P.TRIANGLES,N,or.disabled,L,At.backCCW,se,ie,de,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments),w.coordsIndex.push(te.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,u,d,m,y){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(m||[]).length)&&(this.id=d.id,a.cb(d)?function(w,A,P,k,L,N){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:z}=N,j=or.disabled,Z=w.colorModeForRenderPass();(P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(te,ee,ie,se,de,ce,me,ye,he){let Te=ee.transform,Oe=ee.style.map.terrain,Ie=de==="map",Pe=ce==="map";for(let Re of te){let We=se.getTile(Re),Xe=We.getBucket(ie);if(!Xe||!Xe.text||!Xe.text.segments.get().length)continue;let je=a.an(Xe.textSizeData,Te.zoom),dt=a.aC(We,1,ee.transform.zoom),Ut=di(Ie,ee.transform,dt),hr=ie.layout.get("icon-text-fit")!=="none"&&Xe.hasIconData();if(je){let _r=Math.pow(2,Te.zoom-We.tileID.overscaledZ),vr=Oe?(Ur,Yr)=>Oe.getElevation(Re,Ur,Yr):null;Mv(Xe,Ie,Pe,he,Te,Ut,_r,je,hr,a.aD(Te,We,me,ye),Re.toUnwrapped(),vr)}}}(k,w,P,A,P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),L),P.paint.get("icon-opacity").constantOr(1)!==0&&Eh(w,A,P,k,!1,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),P.layout.get("icon-rotation-alignment"),P.layout.get("icon-pitch-alignment"),P.layout.get("icon-keep-upright"),j,Z,z),P.paint.get("text-opacity").constantOr(1)!==0&&Eh(w,A,P,k,!0,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.layout.get("text-keep-upright"),j,Z,z),A.map.showCollisionBoxes&&(Dx(w,A,P,k,!0),Dx(w,A,P,k,!1))}(r,u,d,m,this.style.placement.variableOffsets,y):a.cc(d)?function(w,A,P,k,L){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=L,z=P.paint.get("circle-opacity"),j=P.paint.get("circle-stroke-width"),Z=P.paint.get("circle-stroke-opacity"),te=!P.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(j.constantOr(1)===0||Z.constantOr(1)===0))return;let ee=w.context,ie=ee.gl,se=w.transform,de=w.getDepthModeForSublayer(0,Ft.ReadOnly),ce=or.disabled,me=w.colorModeForRenderPass(),ye=[],he=se.getCircleRadiusCorrection();for(let Te=0;Te<k.length;Te++){let Oe=k[Te],Ie=A.getTile(Oe),Pe=Ie.getBucket(P);if(!Pe)continue;let Re=P.paint.get("circle-translate"),We=P.paint.get("circle-translate-anchor"),Xe=a.aD(se,Ie,Re,We),je=Pe.programConfigurations.get(P.id),dt=w.useProgram("circle",je),Ut=Pe.layoutVertexBuffer,hr=Pe.indexBuffer,_r=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Oe),vr={programConfiguration:je,program:dt,layoutVertexBuffer:Ut,indexBuffer:hr,uniformValues:yq(w,Ie,P,Xe,he),terrainData:_r,projectionData:se.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!N,applyTerrainMatrix:!0})};if(te){let Ur=Pe.segments.get();for(let Yr of Ur)ye.push({segments:new a.aM([Yr]),sortKey:Yr.sortKey,state:vr})}else ye.push({segments:Pe.segments,sortKey:0,state:vr})}te&&ye.sort((Te,Oe)=>Te.sortKey-Oe.sortKey);for(let Te of ye){let{programConfiguration:Oe,program:Ie,layoutVertexBuffer:Pe,indexBuffer:Re,uniformValues:We,terrainData:Xe,projectionData:je}=Te.state;Ie.draw(ee,ie.TRIANGLES,de,ce,me,At.backCCW,We,Xe,je,P.id,Pe,Re,Te.segments,P.paint,w.transform.zoom,Oe)}}(r,u,d,m,y):a.cd(d)?function(w,A,P,k,L){if(P.paint.get("heatmap-opacity")===0)return;let N=w.context,{isRenderingToTexture:z,isRenderingGlobe:j}=L;if(w.style.map.terrain){for(let Z of k){let te=A.getTile(Z);A.hasRenderableParent(Z)||(w.renderPass==="offscreen"?Rv(w,te,P,Z,j):w.renderPass==="translucent"&&Fx(w,P,Z,z,j))}N.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(Z,te,ee,ie){let se=Z.context,de=se.gl,ce=Z.transform,me=or.disabled,ye=new Or([de.ONE,de.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(he,Te,Oe){let Ie=he.gl;he.activeTexture.set(Ie.TEXTURE1),he.viewport.set([0,0,Te.width/4,Te.height/4]);let Pe=Oe.heatmapFbos.get(a.c2);Pe?(Ie.bindTexture(Ie.TEXTURE_2D,Pe.colorAttachment.get()),he.bindFramebuffer.set(Pe.framebuffer)):(Pe=qh(he,Te.width/4,Te.height/4),Oe.heatmapFbos.set(a.c2,Pe))})(se,Z,ee),se.clear({color:a.bf.transparent});for(let he=0;he<ie.length;he++){let Te=ie[he];if(te.hasRenderableParent(Te))continue;let Oe=te.getTile(Te),Ie=Oe.getBucket(ee);if(!Ie)continue;let Pe=Ie.programConfigurations.get(ee.id),Re=Z.useProgram("heatmap",Pe),We=ce.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Xe=ce.getCircleRadiusCorrection();Re.draw(se,de.TRIANGLES,Ft.disabled,me,ye,At.backCCW,yx(Oe,ce.zoom,ee.paint.get("heatmap-intensity"),Xe),null,We,ee.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,ee.paint,ce.zoom,Pe)}se.viewport.set([0,0,Z.width,Z.height])}(w,A,P,k):w.renderPass==="translucent"&&function(Z,te){let ee=Z.context,ie=ee.gl;ee.setColorMode(Z.colorModeForRenderPass());let se=te.heatmapFbos.get(a.c2);se&&(ee.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,se.colorAttachment.get()),ee.activeTexture.set(ie.TEXTURE1),Ih(ee,te).bind(ie.LINEAR,ie.CLAMP_TO_EDGE),Z.useProgram("heatmapTexture").draw(ee,ie.TRIANGLES,Ft.disabled,or.disabled,Z.colorModeForRenderPass(),At.disabled,yv(Z,te,0,1),null,null,te.id,Z.viewportBuffer,Z.quadTriangleIndexBuffer,Z.viewportSegments,te.paint,Z.transform.zoom))}(w,P)}(r,u,d,m,y):a.ce(d)?function(w,A,P,k,L){if(w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=L,z=P.paint.get("line-opacity"),j=P.paint.get("line-width");if(z.constantOr(1)===0||j.constantOr(1)===0)return;let Z=w.getDepthModeForSublayer(0,Ft.ReadOnly),te=w.colorModeForRenderPass(),ee=P.paint.get("line-dasharray"),ie=P.paint.get("line-pattern"),se=ie.constantOr(1),de=P.paint.get("line-gradient"),ce=P.getCrossfadeParameters(),me=se?"linePattern":ee?"lineSDF":de?"lineGradient":"line",ye=w.context,he=ye.gl,Te=w.transform,Oe=!0;for(let Ie of k){let Pe=A.getTile(Ie);if(se&&!Pe.patternsLoaded())continue;let Re=Pe.getBucket(P);if(!Re)continue;let We=Re.programConfigurations.get(P.id),Xe=w.context.program.get(),je=w.useProgram(me,We),dt=Oe||je.program!==Xe,Ut=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ie),hr=ie.constantOr(null);if(hr&&Pe.imageAtlas){let Bt=Pe.imageAtlas,xr=Bt.patternPositions[hr.to.toString()],gi=Bt.patternPositions[hr.from.toString()];xr&&gi&&We.setConstantPatternPositions(xr,gi)}let _r=Te.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),vr=Te.getPixelScale(),Ur=se?wx(w,Pe,P,vr,ce):ee?zl(w,Pe,P,vr,ee,ce):de?bx(w,Pe,P,vr,Re.lineClipsArray.length):of(w,Pe,P,vr);if(se)ye.activeTexture.set(he.TEXTURE0),Pe.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),We.updatePaintBuffers(ce);else if(ee&&(dt||w.lineAtlas.dirty))ye.activeTexture.set(he.TEXTURE0),w.lineAtlas.bind(ye);else if(de){let Bt=Re.gradients[P.id],xr=Bt.texture;if(P.gradientVersion!==Bt.version){let gi=256;if(P.stepInterpolant){let Ii=A.getSource().maxzoom,zi=Ie.canonical.z===Ii?Math.ceil(1<<w.transform.maxZoom-Ie.canonical.z):1;gi=a.ah(a.c3(Re.maxLineLength/a.$*1024*zi),256,ye.maxTextureSize)}Bt.gradient=a.c4({expression:P.gradientExpression(),evaluationKey:"lineProgress",resolution:gi,image:Bt.gradient||void 0,clips:Re.lineClipsArray}),Bt.texture?Bt.texture.update(Bt.gradient):Bt.texture=new a.T(ye,Bt.gradient,he.RGBA),Bt.version=P.gradientVersion,xr=Bt.texture}ye.activeTexture.set(he.TEXTURE0),xr.bind(P.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}let Yr=w.stencilModeForClipping(Ie);je.draw(ye,he.TRIANGLES,Z,Yr,te,At.disabled,Ur,Ut,_r,P.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,P.paint,w.transform.zoom,We,Re.layoutVertexBuffer2),Oe=!1}}(r,u,d,m,y):a.cf(d)?function(w,A,P,k,L){let N=P.paint.get("fill-color"),z=P.paint.get("fill-opacity");if(z.constantOr(1)===0)return;let{isRenderingToTexture:j}=L,Z=w.colorModeForRenderPass(),te=P.paint.get("fill-pattern"),ee=w.opaquePassEnabledForLayer()&&!te.constantOr(1)&&N.constantOr(a.bf.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===ee){let ie=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?Ft.ReadWrite:Ft.ReadOnly);mf(w,A,P,k,ie,Z,!1,j)}if(w.renderPass==="translucent"&&P.paint.get("fill-antialias")){let ie=w.getDepthModeForSublayer(P.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);mf(w,A,P,k,ie,Z,!0,j)}}(r,u,d,m,y):a.cg(d)?function(w,A,P,k,L){let N=P.paint.get("fill-extrusion-opacity");if(N===0)return;let{isRenderingToTexture:z}=L;if(w.renderPass==="translucent"){let j=new Ft(w.context.gl.LEQUAL,Ft.ReadWrite,w.depthRangeFor3D);if(N!==1||P.paint.get("fill-extrusion-pattern").constantOr(1))Ov(w,A,P,k,j,or.disabled,Or.disabled,z),Ov(w,A,P,k,j,w.stencilModeFor3D(),w.colorModeForRenderPass(),z);else{let Z=w.colorModeForRenderPass();Ov(w,A,P,k,j,or.disabled,Z,z)}}}(r,u,d,m,y):a.ch(d)?function(w,A,P,k,L){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let{isRenderingToTexture:N}=L,z=w.context,j=w.style.projection.useSubdivision,Z=w.getDepthModeForSublayer(0,Ft.ReadOnly),te=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(ee,ie,se,de,ce,me,ye){let he=ee.context,Te=he.gl;for(let Oe of se){let Ie=ie.getTile(Oe),Pe=Ie.dem;if(!Pe||!Pe.data||!Ie.needsHillshadePrepare)continue;let Re=Pe.dim,We=Pe.stride,Xe=Pe.getPixels();if(he.activeTexture.set(Te.TEXTURE1),he.pixelStoreUnpackPremultiplyAlpha.set(!1),Ie.demTexture=Ie.demTexture||ee.getTileTexture(We),Ie.demTexture){let dt=Ie.demTexture;dt.update(Xe,{premultiply:!1}),dt.bind(Te.NEAREST,Te.CLAMP_TO_EDGE)}else Ie.demTexture=new a.T(he,Xe,Te.RGBA,{premultiply:!1}),Ie.demTexture.bind(Te.NEAREST,Te.CLAMP_TO_EDGE);he.activeTexture.set(Te.TEXTURE0);let je=Ie.fbo;if(!je){let dt=new a.T(he,{width:Re,height:Re,data:null},Te.RGBA);dt.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),je=Ie.fbo=he.createFramebuffer(Re,Re,!0,!1),je.colorAttachment.set(dt.texture)}he.bindFramebuffer.set(je.framebuffer),he.viewport.set([0,0,Re,Re]),ee.useProgram("hillshadePrepare").draw(he,Te.TRIANGLES,ce,me,ye,At.disabled,_x(Ie.tileID,Pe),null,null,de.id,ee.rasterBoundsBuffer,ee.quadTriangleIndexBuffer,ee.rasterBoundsSegments),Ie.needsHillshadePrepare=!1}})(w,A,k,P,Z,or.disabled,te),z.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(j){let[ee,ie,se]=w.stencilConfigForOverlapTwoPass(k);Ul(w,A,P,se,ee,Z,te,!1,N),Ul(w,A,P,se,ie,Z,te,!0,N)}else{let[ee,ie]=w.getStencilConfigForOverlapAndUpdateStencilID(k);Ul(w,A,P,ie,ee,Z,te,!1,N)}}(r,u,d,m,y):a.ci(d)?function(w,A,P,k,L){if(w.renderPass!=="translucent"||!k.length)return;let{isRenderingToTexture:N}=L,z=w.style.projection.useSubdivision,j=w.getDepthModeForSublayer(0,Ft.ReadOnly),Z=w.colorModeForRenderPass();if(z){let[te,ee,ie]=w.stencilConfigForOverlapTwoPass(k);kv(w,A,P,ie,te,j,Z,!1,N),kv(w,A,P,ie,ee,j,Z,!0,N)}else{let[te,ee]=w.getStencilConfigForOverlapAndUpdateStencilID(k);kv(w,A,P,ee,te,j,Z,!1,N)}}(r,u,d,m,y):a.cj(d)?function(w,A,P,k,L){if(w.renderPass!=="translucent"||P.paint.get("raster-opacity")===0||!k.length)return;let{isRenderingToTexture:N}=L,z=A.getSource(),j=w.style.projection.useSubdivision;if(z instanceof ca)Vl(w,A,P,k,null,!1,!1,z.tileCoords,z.flippedWindingOrder,N);else if(j){let[Z,te,ee]=w.stencilConfigForOverlapTwoPass(k);Vl(w,A,P,ee,Z,!1,!0,vf,!1,N),Vl(w,A,P,ee,te,!0,!0,vf,!1,N)}else{let[Z,te]=w.getStencilConfigForOverlapAndUpdateStencilID(k);Vl(w,A,P,te,Z,!1,!0,vf,!1,N)}}(r,u,d,m,y):a.ck(d)?function(w,A,P,k,L){let N=P.paint.get("background-color"),z=P.paint.get("background-opacity");if(z===0)return;let{isRenderingToTexture:j}=L,Z=w.context,te=Z.gl,ee=w.style.projection,ie=w.transform,se=ie.tileSize,de=P.paint.get("background-pattern");if(w.isPatternMissing(de))return;let ce=!de&&N.a===1&&z===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==ce)return;let me=or.disabled,ye=w.getDepthModeForSublayer(0,ce==="opaque"?Ft.ReadWrite:Ft.ReadOnly),he=w.colorModeForRenderPass(),Te=w.useProgram(de?"backgroundPattern":"background"),Oe=k||Ee(ie,{tileSize:se,terrain:w.style.map.terrain});de&&(Z.activeTexture.set(te.TEXTURE0),w.imageManager.bind(w.context));let Ie=P.getCrossfadeParameters();for(let Pe of Oe){let Re=ie.getProjectionData({overscaledTileID:Pe,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),We=de?Ex(z,w,de,{tileID:Pe,tileSize:se},Ie):Tx(z,N),Xe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Pe),je=ee.getMeshFromTileID(Z,Pe.canonical,!1,!0,"raster");Te.draw(Z,te.TRIANGLES,ye,me,he,At.backCCW,We,Xe,Re,P.id,je.vertexBuffer,je.indexBuffer,je.segments)}}(r,0,d,m,y):a.cl(d)&&function(w,A,P,k){let{isRenderingGlobe:L}=k,N=w.context,z=P.implementation,j=w.style.projection,Z=w.transform,te=Z.getProjectionDataForCustomLayer(L),ee={farZ:Z.farZ,nearZ:Z.nearZ,fov:Z.fov*Math.PI/180,modelViewProjectionMatrix:Z.modelViewProjectionMatrix,projectionMatrix:Z.projectionMatrix,shaderData:{variantName:j.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${j.shaderPreludeCode.vertexSource}`,define:j.shaderDefine},defaultProjectionData:te},ie=z.renderingMode?z.renderingMode:"2d";if(w.renderPass==="offscreen"){let se=z.prerender;se&&(w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),se.call(z,N.gl,ee),N.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),N.setColorMode(w.colorModeForRenderPass()),N.setStencilMode(or.disabled);let se=ie==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,Ft.ReadOnly);N.setDepthMode(se),z.render(N.gl,ee),N.setDirty(),w.setBaseState(),N.bindFramebuffer.set(null)}}(r,0,d,y))}saveTileTexture(r){let u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){let u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;let u=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!u||!d}useProgram(r,u,d=!1,m=[]){this.cache=this.cache||{};let y=!!this.style.map.terrain,w=this.style.projection,A=d?Ja.projectionMercator:w.shaderPreludeCode,P=d?rs:w.shaderDefine,k=r+(u?u.cacheKey:"")+`/${d?Rl:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(y?"/terrain":"")+(m?`/${m.join("/")}`:"");return this.cache[k]||(this.cache[k]=new gv(this.context,Ja[r],u,Sv[r],this._showOverdrawInspector,y,A,P,m)),this.cache[k]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}function $l(g,r){let u,d=!1,m=null,y=null,w=()=>{m=null,d&&(g.apply(y,u),m=setTimeout(w,r),d=!1)};return(...A)=>(d=!0,y=this,u=A,m||w(),m)}class _f{constructor(r){this._getCurrentHash=()=>{let u=window.location.hash.replace("#","");if(this._hashName){let d;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(d=m)}),(d&&d[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{let u=this._getCurrentHash();if(!this._isValidHash(u))return!1;let d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:d,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{let u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{let u=this._getCurrentHash();if(u.length===0)return;let d=u.join("/"),m=d;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${d}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let w=window.location.href.replace(/(#.+)?$/,y);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=$l(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){let u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,m=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),w=Math.round(u.lng*y)/y,A=Math.round(u.lat*y)/y,P=this._map.getBearing(),k=this._map.getPitch(),L="";if(L+=r?`/${w}/${A}/${d}`:`${d}/${A}/${w}`,(P||k)&&(L+="/"+Math.round(10*P)/10),k&&(L+=`/${Math.round(k)}`),this._hashName){let N=this._hashName,z=!1,j=window.location.hash.slice(1).split("&").map(Z=>{let te=Z.split("=")[0];return te===N?(z=!0,`${te}=${L}`):Z}).filter(Z=>Z);return z||j.push(`${N}=${L}`),`#${j.join("&")}`}return`#${L}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new a.S(+r[2],+r[1])}catch(y){return!1}let u=+r[0],d=+(r[3]||0),m=+(r[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&d>=-180&&d<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}let as={linearity:.3,easing:a.cm(0,0,.3,1)},zv=a.e({deceleration:2500,maxSpeed:1400},as),jx=a.e({deceleration:20,maxSpeed:1400},as),Ux=a.e({deceleration:1e3,maxSpeed:360},as),Vx=a.e({deceleration:1e3,maxSpeed:90},as),$x=a.e({deceleration:1e3,maxSpeed:360},as);class Gx{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:O.now(),settings:r})}_drainInertiaBuffer(){let r=this._inertiaBuffer,u=O.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let u={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:y}of this._inertiaBuffer)u.zoom+=y.zoomDelta||0,u.bearing+=y.bearingDelta||0,u.pitch+=y.pitchDelta||0,u.roll+=y.rollDelta||0,y.panDelta&&u.pan._add(y.panDelta),y.around&&(u.around=y.around),y.pinchAround&&(u.pinchAround=y.pinchAround);let d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){let y=Fu(u.pan.mag(),d,a.e({},zv,r||{})),w=u.pan.mult(y.amount/u.pan.mag()),A=this._map.cameraHelper.handlePanInertia(w,this._map.transform);m.center=A.easingCenter,m.offset=A.easingOffset,to(m,y)}if(u.zoom){let y=Fu(u.zoom,d,jx);m.zoom=this._map.transform.zoom+y.amount,to(m,y)}if(u.bearing){let y=Fu(u.bearing,d,Ux);m.bearing=this._map.transform.bearing+a.ah(y.amount,-179,179),to(m,y)}if(u.pitch){let y=Fu(u.pitch,d,Vx);m.pitch=this._map.transform.pitch+y.amount,to(m,y)}if(u.roll){let y=Fu(u.roll,d,$x);m.roll=this._map.transform.roll+a.ah(y.amount,-179,179),to(m,y)}if(m.zoom||m.bearing){let y=u.pinchAround===void 0?u.around:u.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),a.e(m,{noMoveStart:!0})}}function to(g,r){(!g.duration||g.duration<r.duration)&&(g.duration=r.duration,g.easing=r.easing)}function Fu(g,r,u){let{maxSpeed:d,linearity:m,deceleration:y}=u,w=a.ah(g*m/(r/1e3),-d,d),A=Math.abs(w)/(y*m);return{easing:u.easing,duration:1e3*A,amount:w*(A/2)}}class Gn extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,d,m={}){d=d instanceof MouseEvent?d:new MouseEvent(r,d);let y=D.mousePos(u.getCanvas(),d),w=u.unproject(y);super(r,a.e({point:y,lngLat:w,originalEvent:d},m)),this._defaultPrevented=!1,this.target=u}}class zu extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,d){let m=r==="touchend"?d.changedTouches:d.touches,y=D.touchPos(u.getCanvasContainer(),m),w=y.map(P=>u.unproject(P)),A=y.reduce((P,k,L,N)=>P.add(k.div(N.length)),new a.P(0,0));super(r,{points:y,point:A,lngLats:w,lngLat:u.unproject(A),originalEvent:d}),this._defaultPrevented=!1}}class Nv extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Wx{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Nv(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new Gn(r.type,this._map,r))}mouseup(r){this._map.fire(new Gn(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Gn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Gn(r.type,this._map,r))}mouseover(r){this._map.fire(new Gn(r.type,this._map,r))}mouseout(r){this._map.fire(new Gn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new zu(r.type,this._map,r))}touchmove(r){this._map.fire(new zu(r.type,this._map,r))}touchend(r){this._map.fire(new zu(r.type,this._map,r))}touchcancel(r){this._map.fire(new zu(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zx{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Gn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Gn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Nu{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(a.P.convert(r),this._map.terrain)}}class Bv{constructor(r,u){this._map=r,this._tr=new Nu(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(D.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;let d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;let m=this._startPos;this._lastPos=d,this._box||(this._box=D.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));let y=Math.min(m.x,d.x),w=Math.max(m.x,d.x),A=Math.min(m.y,d.y),P=Math.max(m.y,d.y);D.setTransform(this._box,`translate(${y}px,${A}px)`),this._box.style.width=w-y+"px",this._box.style.height=P-A+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;let d=this._startPos,m=u;if(this.reset(),D.suppressClick(),d.x!==m.x||d.y!==m.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(d,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(D.remove(this._box),this._box=null),D.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new a.l(r,{originalEvent:u}))}}function Bu(g,r){if(g.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${r.length}`);let u={};for(let d=0;d<g.length;d++)u[g[d].identifier]=r[d];return u}class Kx{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(m){let y=new a.P(0,0);for(let w of m)y._add(w);return y.div(m.length)}(u),this.touches=Bu(d,u)))}touchmove(r,u,d){if(this.aborted||!this.centroid)return;let m=Bu(d,u);for(let y in this.touches){let w=m[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,u,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){let m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Wn{constructor(r){this.singleTap=new Kx(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,d){this.singleTap.touchstart(r,u,d)}touchmove(r,u,d){this.singleTap.touchmove(r,u,d)}touchend(r,u,d){let m=this.singleTap.touchend(r,u,d);if(m){let y=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(m)<30;if(y&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class ro{constructor(r){this._tr=new Nu(r),this._zoomIn=new Wn({numTouches:1,numTaps:2}),this._zoomOut=new Wn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,d){this._zoomIn.touchstart(r,u,d),this._zoomOut.touchstart(r,u,d)}touchmove(r,u,d){this._zoomIn.touchmove(r,u,d),this._zoomOut.touchmove(r,u,d)}touchend(r,u,d){let m=this._zoomIn.touchend(r,u,d),y=this._zoomOut.touchend(r,u,d),w=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(m)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ju{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){let u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;let d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);let m=Array.isArray(u)?u[0]:u;return!this._moved&&m.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(d,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&D.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let io=0,Uu=2,Rq={[io]:1,[Uu]:2};class Mh{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){let u=D.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,d){let m=Rq[d];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return D.mouseButton(r)===this._eventButton}}class Oq{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class kq{constructor(r=new Mh({checkCorrectEvent:()=>!0}),u=new Oq){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(r,u,d){return r instanceof MouseEvent?u(r):typeof TouchEvent!="undefined"&&r instanceof TouchEvent?d(r):void 0}startMove(r){this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.startMove(u),u=>this.oneFingerTouchMoveStateManager.startMove(u))}endMove(r){this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.endMove(u),u=>this.oneFingerTouchMoveStateManager.endMove(u))}isValidStartEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidStartEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u))}isValidMoveEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidMoveEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u))}isValidEndEvent(r){return this._executeRelevantHandler(r,u=>this.mouseMoveStateManager.isValidEndEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u))}}let Rh=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=r=>{r.preventDefault()}};class Oh{constructor(r,u){this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,u,d){return this._calculateTransform(r,u,d)}touchmove(r,u,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,u,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,u,d){this._calculateTransform(r,u,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,d){d.length>0&&(this._active=!0);let m=Bu(d,u),y=new a.P(0,0),w=new a.P(0,0),A=0;for(let k in m){let L=m[k],N=this._touches[k];N&&(y._add(L),w._add(L.sub(N)),A++,m[k]=L)}if(this._touches=m,this._shouldBePrevented(A)||!w.mag())return;let P=w.div(A);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(A),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class no{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,d){if(!this._firstTwoTouches)return;r.preventDefault();let[m,y]=this._firstTwoTouches,w=st(d,u,m),A=st(d,u,y);if(!w||!A)return;let P=this._aroundCenter?null:w.add(A).div(2);return this._move([w,A],P,r)}touchend(r,u,d){if(!this._firstTwoTouches)return;let[m,y]=this._firstTwoTouches,w=st(d,u,m),A=st(d,u,y);w&&A||(this._active&&D.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function st(g,r,u){for(let d=0;d<g.length;d++)if(g[d].identifier===u)return r[d]}function jv(g,r){return Math.log(g/r)/Math.LN2}class xf extends no{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){let d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(jv(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:jv(this._distance,d),pinchAround:u}}}function Uv(g,r){return 180*g.angleWith(r)/Math.PI}class Vu extends no{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u,d){let m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Uv(this._vector,m),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());let u=25/(Math.PI*this._minDiameter)*360,d=Uv(r,this._startVector);return Math.abs(d)<u}}function Gl(g){return Math.abs(g.y)>Math.abs(g.x)}class bf extends no{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,d){super.touchstart(r,u,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Gl(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let m=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,d){if(this._valid!==void 0)return this._valid;let m=r.mag()>=2,y=u.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;let w=r.y>0==u.y>0;return Gl(r)&&Gl(u)&&w}}let rr={panStep:100,bearingStep:15,pitchStep:10};class wf{constructor(r){this._tr=new Nu(r);let u=rr;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,d=0,m=0,y=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,m=0),{cameraAnimation:A=>{let P=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:Dq,zoom:u?Math.round(P.zoom)+u*(r.shiftKey?2:1):P.zoom,bearing:P.bearing+d*this._bearingStep,pitch:P.pitch+m*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:P.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Dq(g){return g*(2-g)}let Sf=4.000244140625,Lq=1/450;class Hx{constructor(r,u){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new Nu(r),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Lq}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,d=O.now(),m=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%Sf==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let u=D.mousePos(this._map.getCanvas(),r),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(a.S.convert(d.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let A=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=A),typeof this._targetZoom=="number"&&(this._targetZoom+=A)}if(this._delta!==0){let A=this._type==="wheel"&&Math.abs(this._delta)>Sf?this._wheelZoomRate:this._defaultZoomRate,P=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&P!==0&&(P=1/P);let k=typeof this._targetZoom!="number"?r.scale:a.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),a.ak(k*P)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let u=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,d=this._startZoom,m=this._easing,y,w=!1;if(this._type==="wheel"&&d&&m){let A=O.now()-this._lastWheelEventTime,P=Math.min((A+5)/200,1),k=m(P);y=a.C.number(d,u,k),P<1?this._frameId||(this._frameId=!0):w=!0}else y=u,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=y,{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=a.co;if(this._prevEase){let d=this._prevEase,m=(O.now()-d.start)/d.duration,y=d.easing(m+.01)-d.easing(m),w=.27/Math.sqrt(y*y+1e-4)*.01,A=Math.sqrt(.0729-w*w);u=a.cm(w,A,.25,1)}return this._prevEase={start:O.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Vv{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $v{constructor(r){this._tr=new Nu(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xx{constructor(){this._tap=new Wn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,d){if(!this._swipePoint)if(this._tapTime){let m=u[0],y=r.timeStamp-this._tapTime<500,w=this._tapPoint.dist(m)<30;y&&w?d.length>0&&(this._swipePoint=m,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,u,d)}touchmove(r,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;let m=u[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,u,d)}touchend(r,u,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{let m=this._tap.touchend(r,u,d);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yx{constructor(r,u,d){this._el=r,this._mousePan=u,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Gv{constructor(r,u,d,m){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=u,this._mousePitch=d,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Jx{constructor(r,u,d,m){this._el=r,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Qx{constructor(r,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=D.create("div","maplibregl-cooperative-gesture-screen",r);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=u,this._container.appendChild(m);let y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(D.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,u){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:r,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let ao=g=>g.zoom||g.drag||g.roll||g.pitch||g.rotate;class Ar extends a.l{}function $u(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta||g.rollDelta}class Wv{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let w=m.type==="renderFrame"?void 0:m,A={needsRenderFrame:!1},P={},k={};for(let{handlerName:z,handler:j,allowed:Z}of this._handlers){if(!j.isEnabled())continue;let te;if(this._blockedByActive(k,Z,z))j.reset();else if(j[y||m.type]){if(a.cp(m,y||m.type)){let ee=D.mousePos(this._map.getCanvas(),m);te=j[y||m.type](m,ee)}else if(a.cq(m,y||m.type)){let ee=this._getMapTouches(m.touches),ie=D.touchPos(this._map.getCanvas(),ee);te=j[y||m.type](m,ie,ee)}else a.cr(y||m.type)||(te=j[y||m.type](m));this.mergeHandlerResult(A,P,te,z,w),te&&te.needsRenderFrame&&this._triggerRenderFrame()}(te||j.isActive())&&(k[z]=j)}let L={};for(let z in this._previousActiveHandlers)k[z]||(L[z]=w);this._previousActiveHandlers=k,(Object.keys(L).length||$u(A))&&(this._changes.push([A,P,L]),this._triggerRenderFrame()),(Object.keys(k).length||$u(A))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:N}=A;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gx(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);let d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(let[m,y,w]of this._listeners)D.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(let[r,u,d]of this._listeners)D.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){let u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new Wx(u,r));let m=u.boxZoom=new Bv(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();let y=u.cooperativeGestures=new Qx(u,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();let w=new ro(u),A=new $v(u);u.doubleClickZoom=new Vv(A,w),this._add("tapZoom",w),this._add("clickZoom",A),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();let P=new Xx;this._add("tapDragZoom",P);let k=u.touchPitch=new bf(u);this._add("touchPitch",k),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);let L=()=>u.project(u.getCenter()),N=function({enable:ce,clickTolerance:me,aroundCenter:ye=!0,minPixelCenterThreshold:he=100,rotateDegreesPerPixelMoved:Te=.8},Oe){let Ie=new Mh({checkCorrectEvent:Pe=>D.mouseButton(Pe)===0&&Pe.ctrlKey||D.mouseButton(Pe)===2&&!Pe.ctrlKey});return new ju({clickTolerance:me,move:(Pe,Re)=>{let We=Oe();if(ye&&Math.abs(We.y-Pe.y)>he)return{bearingDelta:a.cn(new a.P(Pe.x,Re.y),Re,We)};let Xe=(Re.x-Pe.x)*Te;return ye&&Re.y<We.y&&(Xe=-Xe),{bearingDelta:Xe}},moveStateManager:Ie,enable:ce,assignEvents:Rh})}(r,L),z=function({enable:ce,clickTolerance:me,pitchDegreesPerPixelMoved:ye=-.5}){let he=new Mh({checkCorrectEvent:Te=>D.mouseButton(Te)===0&&Te.ctrlKey||D.mouseButton(Te)===2});return new ju({clickTolerance:me,move:(Te,Oe)=>({pitchDelta:(Oe.y-Te.y)*ye}),moveStateManager:he,enable:ce,assignEvents:Rh})}(r),j=function({enable:ce,clickTolerance:me,rollDegreesPerPixelMoved:ye=.3},he){let Te=new Mh({checkCorrectEvent:Oe=>D.mouseButton(Oe)===2&&Oe.ctrlKey});return new ju({clickTolerance:me,move:(Oe,Ie)=>{let Pe=he(),Re=(Ie.x-Oe.x)*ye;return Ie.y<Pe.y&&(Re=-Re),{rollDelta:Re}},moveStateManager:Te,enable:ce,assignEvents:Rh})}(r,L);u.dragRotate=new Gv(r,N,z,j),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",j,["mousePitch"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();let Z=function({enable:ce,clickTolerance:me}){let ye=new Mh({checkCorrectEvent:he=>D.mouseButton(he)===0&&!he.ctrlKey});return new ju({clickTolerance:me,move:(he,Te)=>({around:Te,panDelta:Te.sub(he)}),activateOnStart:!0,moveStateManager:ye,enable:ce,assignEvents:Rh})}(r),te=new Oh(r,u);u.dragPan=new Yx(d,Z,te),this._add("mousePan",Z),this._add("touchPan",te,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);let ee=new Vu,ie=new xf;u.touchZoomRotate=new Jx(d,ie,ee,P),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",ie,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);let se=u.scrollZoom=new Hx(u,()=>this._triggerRenderFrame());this._add("scrollZoom",se,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);let de=u.keyboard=new wf(u);this._add("keyboard",de),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Zx(u))}_add(r,u,d){this._handlers.push({handlerName:r,handler:u,allowed:d}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(let{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(let{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ao(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,d){for(let m in r)if(m!==d&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){let u=[];for(let d of r)this._el.contains(d.target)&&u.push(d);return u}mergeHandlerResult(r,u,d,m,y){if(!d)return;a.e(r,d);let w={handlerName:m,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(u.zoom=w),d.panDelta!==void 0&&(u.drag=w),d.rollDelta!==void 0&&(u.roll=w),d.pitchDelta!==void 0&&(u.pitch=w),d.bearingDelta!==void 0&&(u.rotate=w)}_applyChanges(){let r={},u={},d={};for(let[m,y,w]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new a.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(r.rollDelta=(r.rollDelta||0)+m.rollDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),a.e(u,y),a.e(d,w);this._updateMapTransform(r,u,d),this._changes=[]}_updateMapTransform(r,u,d){let m=this._map,y=m._getTransformForUpdate(),w=m.terrain;if(!($u(r)||w&&this._terrainMovement))return this._fireEvents(u,d,!0);m._stop(!0);let{panDelta:A,zoomDelta:P,bearingDelta:k,pitchDelta:L,rollDelta:N,around:z,pinchAround:j}=r;j!==void 0&&(z=j),z=z||m.transform.centerPoint,w&&!y.isPointOnMapSurface(z)&&(z=y.centerPoint);let Z={panDelta:A,zoomDelta:P,rollDelta:N,pitchDelta:L,bearingDelta:k,around:z};this._map.cameraHelper.useGlobeControls&&!y.isPointOnMapSurface(z)&&(z=y.centerPoint);let te=z.distSqr(y.centerPoint)<.01?y.center:y.screenPointToLocation(A?z.sub(A):z);w?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Z,y),this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?y.setCenter(y.screenPointToLocation(y.centerPoint.sub(A))):this._map.cameraHelper.handleMapControlsPan(Z,y,te):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Z,y,te))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Z,y),this._map.cameraHelper.handleMapControlsPan(Z,y,te)),m._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,d,!0)}_fireEvents(r,u,d){let m=ao(this._eventsInProgress),y=ao(r),w={};for(let N in r){let{originalEvent:z}=r[N];this._eventsInProgress[N]||(w[`${N}start`]=z),this._eventsInProgress[N]=r[N]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(let N in w)this._fireEvent(N,w[N]);y&&this._fireEvent("move",y.originalEvent);for(let N in r){let{originalEvent:z}=r[N];this._fireEvent(N,z)}let A={},P;for(let N in this._eventsInProgress){let{handlerName:z,originalEvent:j}=this._eventsInProgress[N];this._handlersById[z].isActive()||(delete this._eventsInProgress[N],P=u[z]||j,A[`${N}end`]=P)}for(let N in A)this._fireEvent(N,A[N]);let k=ao(this._eventsInProgress),L=(m||y)&&!k;if(L&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let N=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&N.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(N)}if(d&&L){this._updatingCamera=!0;let N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),z=j=>j!==0&&-this._bearingSnap<j&&j<this._bearingSnap;!N||!N.essential&&O.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:P})),z(this._map.getBearing())&&this._map.resetNorth()):(z(N.bearing||this._map.getBearing())&&(N.bearing=0),N.freezeElevation=!0,this._map.easeTo(N,{originalEvent:P})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new a.l(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Ar("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class eb extends a.E{constructor(r,u,d){super(),this._renderFrameCallback=()=>{let m=Math.min((O.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this.cameraHelper=u,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,u){r.apply(this.transform),this.transform=r,this.cameraHelper=u}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,u){return this.jumpTo({elevation:r},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,u,d){return r=a.P.convert(r).mult(-1),this.panTo(this.transform.center,a.e({offset:r},u),d)}panTo(r,u,d){return this.easeTo(a.e({center:r},u),d)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,d){return this.easeTo(a.e({zoom:r},u),d)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,u){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new a.l("movestart",u)).fire(new a.l("move",u)).fire(new a.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,d){return this.easeTo(a.e({bearing:r},u),d)}resetNorth(r,u){return this.rotateTo(0,a.e({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}getRoll(){return this.transform.roll}setRoll(r,u){return this.jumpTo({roll:r},u),this}cameraForBounds(r,u){r=Rr.convert(r).adjustAntiMeridian();let d=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,u)}_cameraForBoxAndBearing(r,u,d,m){let y={top:0,bottom:0,right:0,left:0};if(typeof(m=a.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){let k=m.padding;m.padding={top:k,bottom:k,right:k,left:k}}let w=a.e(y,m.padding);m.padding=w;let A=this.transform,P=new Rr(r,u);return this.cameraHelper.cameraForBoxAndBearing(m,w,P,d,A)}fitBounds(r,u,d){return this._fitInternal(this.cameraForBounds(r,u),u,d)}fitScreenCoordinates(r,u,d,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(r)),this.transform.screenPointToLocation(a.P.convert(u)),d,m),m,y)}_fitInternal(r,u,d){return r?(delete(u=a.e(r,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(r,u){this.stop();let d=this._getTransformForUpdate(),m=!1,y=!1,w=!1,A=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,r);let P=d.zoom!==A;return"elevation"in r&&d.elevation!==+r.elevation&&d.setElevation(+r.elevation),"bearing"in r&&d.bearing!==+r.bearing&&(m=!0,d.setBearing(+r.bearing)),"pitch"in r&&d.pitch!==+r.pitch&&(y=!0,d.setPitch(+r.pitch)),"roll"in r&&d.roll!==+r.roll&&(w=!0,d.setRoll(+r.roll)),r.padding==null||d.isPaddingEqual(r.padding)||d.setPadding(r.padding),this._applyUpdatedTransform(d),this.fire(new a.l("movestart",u)).fire(new a.l("move",u)),P&&this.fire(new a.l("zoomstart",u)).fire(new a.l("zoom",u)).fire(new a.l("zoomend",u)),m&&this.fire(new a.l("rotatestart",u)).fire(new a.l("rotate",u)).fire(new a.l("rotateend",u)),y&&this.fire(new a.l("pitchstart",u)).fire(new a.l("pitch",u)).fire(new a.l("pitchend",u)),w&&this.fire(new a.l("rollstart",u)).fire(new a.l("roll",u)).fire(new a.l("rollend",u)),this.fire(new a.l("moveend",u))}calculateCameraOptionsFromTo(r,u,d,m=0){let y=a.a1.fromLngLat(r,u),w=a.a1.fromLngLat(d,m),A=w.x-y.x,P=w.y-y.y,k=w.z-y.z,L=Math.hypot(A,P,k);if(L===0)throw new Error("Can't calculate camera options with same From and To");let N=Math.hypot(A,P),z=a.ak(this.transform.cameraToCenterDistance/L/this.transform.tileSize),j=180*Math.atan2(A,-P)/Math.PI,Z=180*Math.acos(N/L)/Math.PI;return Z=k<0?90-Z:90+Z,{center:w.toLngLat(),elevation:m,zoom:z,pitch:Z,bearing:j}}calculateCameraOptionsFromCameraLngLatAltRotation(r,u,d,m,y){let w=this.transform.calculateCenterFromCameraLngLatAlt(r,u,d,m);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:d,pitch:m,roll:y}}easeTo(r,u){this._stop(!1,r.easeId),((r=a.e({offset:[0,0],duration:500,easing:a.co},r)).animate===!1||!r.essential&&O.prefersReducedMotion)&&(r.duration=0);let d=this._getTransformForUpdate(),m=this.getBearing(),y=d.pitch,w=d.roll,A="bearing"in r?this._normalizeBearing(r.bearing,m):m,P="pitch"in r?+r.pitch:y,k="roll"in r?this._normalizeBearing(r.roll,w):w,L="padding"in r?r.padding:d.padding,N=a.P.convert(r.offset),z,j;r.around&&(z=a.S.convert(r.around),j=d.locationToScreenPoint(z));let Z={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},te=this.cameraHelper.handleEaseTo(d,{bearing:A,pitch:P,roll:k,padding:L,around:z,aroundPoint:j,offsetAsPoint:N,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||m!==A,this._pitching=this._pitching||P!==y,this._rolling=this._rolling||k!==w,this._padding=!d.isPaddingEqual(L),this._zooming=this._zooming||te.isZooming,this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,Z),this.terrain&&this._prepareElevation(te.elevationCenter),this._ease(ee=>{te.easeFunc(ee),this.terrain&&!r.freezeElevation&&this._updateElevation(ee),this._applyUpdatedTransform(d),this._fireMoveEvents(u)},ee=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u,ee)},r),this}_prepareEase(r,u,d={}){this._moving=!0,u||d.moving||this.fire(new a.l("movestart",r)),this._zooming&&!d.zooming&&this.fire(new a.l("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new a.l("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new a.l("pitchstart",r)),this._rolling&&!d.rolling&&this.fire(new a.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){let d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(u-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};let u=r.getCameraLngLat(),d=r.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(u,r.zoom):0;if(d<m){let y=this.calculateCameraOptionsFromTo(u,m,r.center,r.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(r){let u=[];if(u.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&u.push(m=>this.transformCameraUpdate(m)),!u.length)return;let d=r.clone();for(let m of u){let y=d.clone(),{center:w,zoom:A,roll:P,pitch:k,bearing:L,elevation:N}=m(y);w&&y.setCenter(w),N!==void 0&&y.setElevation(N),A!==void 0&&y.setZoom(A),P!==void 0&&y.setRoll(P),k!==void 0&&y.setPitch(k),L!==void 0&&y.setBearing(L),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new a.l("move",r)),this._zooming&&this.fire(new a.l("zoom",r)),this._rotating&&this.fire(new a.l("rotate",r)),this._pitching&&this.fire(new a.l("pitch",r)),this._rolling&&this.fire(new a.l("roll",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;let d=this._zooming,m=this._rotating,y=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new a.l("zoomend",r)),m&&this.fire(new a.l("rotateend",r)),y&&this.fire(new a.l("pitchend",r)),w&&this.fire(new a.l("rollend",r)),this.fire(new a.l("moveend",r))}flyTo(r,u){if(!r.essential&&O.prefersReducedMotion){let Re=a.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Re,u)}this.stop(),r=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},r);let d=this._getTransformForUpdate(),m=d.bearing,y=d.pitch,w=d.roll,A=d.padding,P="bearing"in r?this._normalizeBearing(r.bearing,m):m,k="pitch"in r?+r.pitch:y,L="roll"in r?this._normalizeBearing(r.roll,w):w,N="padding"in r?r.padding:d.padding,z=a.P.convert(r.offset),j=d.centerPoint.add(z),Z=d.screenPointToLocation(j),te=this.cameraHelper.handleFlyTo(d,{bearing:P,pitch:k,roll:L,padding:N,locationAtOffset:Z,offsetAsPoint:z,center:r.center,minZoom:r.minZoom,zoom:r.zoom}),ee=r.curve,ie=Math.max(d.width,d.height),se=ie/te.scaleOfZoom,de=te.pixelPathLength;typeof te.scaleOfMinZoom=="number"&&(ee=Math.sqrt(ie/te.scaleOfMinZoom/de*2));let ce=ee*ee;function me(Re){let We=(se*se-ie*ie+(Re?-1:1)*ce*ce*de*de)/(2*(Re?se:ie)*ce*de);return Math.log(Math.sqrt(We*We+1)-We)}function ye(Re){return(Math.exp(Re)-Math.exp(-Re))/2}function he(Re){return(Math.exp(Re)+Math.exp(-Re))/2}let Te=me(!1),Oe=function(Re){return he(Te)/he(Te+ee*Re)},Ie=function(Re){return ie*((he(Te)*(ye(We=Te+ee*Re)/he(We))-ye(Te))/ce)/de;var We},Pe=(me(!0)-Te)/ee;if(Math.abs(de)<2e-6||!isFinite(Pe)){if(Math.abs(ie-se)<1e-6)return this.easeTo(r,u);let Re=se<ie?-1:1;Pe=Math.abs(Math.log(se/ie))/ee,Ie=()=>0,Oe=We=>Math.exp(Re*ee*We)}return r.duration="duration"in r?+r.duration:1e3*Pe/("screenSpeed"in r?+r.screenSpeed/ee:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=m!==P,this._pitching=k!==y,this._rolling=L!==w,this._padding=!d.isPaddingEqual(N),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(te.targetCenter),this._ease(Re=>{let We=Re*Pe,Xe=1/Oe(We),je=Ie(We);this._rotating&&d.setBearing(a.C.number(m,P,Re)),this._pitching&&d.setPitch(a.C.number(y,k,Re)),this._rolling&&d.setRoll(a.C.number(w,L,Re)),this._padding&&(d.interpolatePadding(A,N,Re),j=d.centerPoint.add(z)),te.easeFunc(Re,Xe,je,j),this.terrain&&!r.freezeElevation&&this._updateElevation(Re),this._applyUpdatedTransform(d),this._fireMoveEvents(u)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,u,d){d.animate===!1||d.duration===0?(r(1),u()):(this._easeStart=O.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=a.aO(r,-180,180);let d=Math.abs(r-u);return Math.abs(r-360-u)<d&&(r-=360),Math.abs(r+360-u)<d&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(r),this.transform.tileZoom):null}}let Zv={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Kv{constructor(r=Zv){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=D.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=D.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=D.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){let d=this._map._getUIString(`AttributionControl.${u}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){let m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}let u=this._map.style.sourceCaches;for(let m in u){let y=u[m];if(y.used||y.usedForTerrain){let w=y.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,y)=>m.length-y.length),r=r.filter((m,y)=>{for(let w=y+1;w<r.length;w++)if(r[w].indexOf(m)>=0)return!1;return!0});let d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=D.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class tb{constructor(r={}){this._updateCompact=()=>{let u=this._container.children;if(u.length){let d=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=D.create("div","maplibregl-ctrl");let u=D.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){D.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Po{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){let u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){let u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(let m of d)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let u=this._currentlyRunning=this._queue;this._queue=[];for(let d of u)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Tf=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class mt extends a.E{constructor(r){super(),this._lastTilesetChange=O.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*gg(2,this.deltaZoom),r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];let d={};for(let m of Ee(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))d[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),a.bY(m.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[m.key]=new ut(m,this.tileSize),this._lastTilesetChange=O.now());for(let m in this._tiles)d[m]||delete this._tiles[m]}freeRtt(r){for(let u in this._tiles){let d=this._tiles[u];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,u){return u?this._getTerrainCoordsForTileRanges(r,u):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){let u={};for(let d of this._renderableTilesKeys){let m=this._tiles[d].tileID,y=r.clone(),w=a.ba();if(m.canonical.equals(r.canonical))a.bY(w,0,a.$,a.$,0,0,1);else if(m.canonical.isChildOf(r.canonical)){let A=m.canonical.z-r.canonical.z,P=m.canonical.x-(m.canonical.x>>A<<A),k=m.canonical.y-(m.canonical.y>>A<<A),L=a.$>>A;a.bY(w,0,L,L,0,0,1),a.M(w,w,[-P*L,-k*L,0])}else{if(!r.canonical.isChildOf(m.canonical))continue;{let A=r.canonical.z-m.canonical.z,P=r.canonical.x-(r.canonical.x>>A<<A),k=r.canonical.y-(r.canonical.y>>A<<A),L=a.$>>A;a.bY(w,0,a.$,a.$,0,0,1),a.M(w,w,[P*L,k*L,0]),a.N(w,w,[1/gg(2,A),1/gg(2,A),0])}}y.terrainRttPosMatrix32f=new Float32Array(w),u[d]=y}return u}_getTerrainCoordsForTileRanges(r,u){let d={};for(let m of this._renderableTilesKeys){let y=this._tiles[m].tileID;if(!this._isWithinTileRanges(y,u))continue;let w=r.clone(),A=a.ba();if(y.canonical.z===r.canonical.z){let P=r.canonical.x-y.canonical.x,k=r.canonical.y-y.canonical.y;a.bY(A,0,a.$,a.$,0,0,1),a.M(A,A,[P*a.$,k*a.$,0])}else if(y.canonical.z>r.canonical.z){let P=y.canonical.z-r.canonical.z,k=y.canonical.x-(y.canonical.x>>P<<P),L=y.canonical.y-(y.canonical.y>>P<<P),N=r.canonical.x-(y.canonical.x>>P),z=r.canonical.y-(y.canonical.y>>P),j=a.$>>P;a.bY(A,0,j,j,0,0,1),a.M(A,A,[-k*j+N*a.$,-L*j+z*a.$,0])}else{let P=r.canonical.z-y.canonical.z,k=r.canonical.x-(r.canonical.x>>P<<P),L=r.canonical.y-(r.canonical.y>>P<<P),N=(r.canonical.x>>P)-y.canonical.x,z=(r.canonical.y>>P)-y.canonical.y,j=a.$<<P;a.bY(A,0,j,j,0,0,1),a.M(A,A,[k*a.$+N*j,L*a.$+z*j,0])}w.terrainRttPosMatrix32f=new Float32Array(A),d[m]=w}return d}getSourceTile(r,u){let d=this.sourceCache._source,m=r.overscaledZ-this.deltaZoom;if(m>d.maxzoom&&(m=d.maxzoom),m<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&u)for(;m>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(m--).key);return y}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,u){return u[r.canonical.z]&&r.canonical.x>=u[r.canonical.z].minTileX&&r.canonical.x<=u[r.canonical.z].maxTileX&&r.canonical.y>=u[r.canonical.z].minTileY&&r.canonical.y<=u[r.canonical.z].maxTileY}}class Tt{constructor(r,u,d){this._meshCache={},this.painter=r,this.sourceCache=new mt(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,d,m=a.$){var y;if(!(u>=0&&u<m&&d>=0&&d<m))return 0;let w=this.getTerrainData(r),A=(y=w.tile)===null||y===void 0?void 0:y.dem;if(!A)return 0;let P=a.cs([],[u/m*a.$,d/m*a.$],w.u_terrain_matrix),k=[P[0]*A.dim,P[1]*A.dim],L=Math.floor(k[0]),N=Math.floor(k[1]),z=k[0]-L,j=k[1]-N;return A.get(L,N)*(1-z)*(1-j)+A.get(L+1,N)*z*(1-j)+A.get(L,N+1)*(1-z)*j+A.get(L+1,N+1)*z*j}getElevationForLngLatZoom(r,u){if(!a.ct(u,r.wrap()))return 0;let{tileID:d,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(d,m%a.$,y%a.$,a.$)}getElevation(r,u,d,m=a.$){return this.getDEMElevation(r,u,d,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){let m=this.painter.context,y=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(m,new a.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}let u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){let m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new a.T(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}let d=u&&u+u.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){let m=this.sourceCache.sourceCache._source.maxzoom,y=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?y=r.canonical.z-m:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let w=r.canonical.x-(r.canonical.x>>y<<y),A=r.canonical.y-(r.canonical.y>>y<<y),P=a.cu(new Float64Array(16),[1/(a.$<<y),1/(a.$<<y),0]);a.M(P,P,[w*a.$,A*a.$,0]),this._demMatrixCache[r.key]={matrix:P,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){let u=this.painter,d=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(u.context,{width:d,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(u.context,{width:d,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,w=0;y<this._coordsTextureSize;y++)for(let A=0;A<this._coordsTextureSize;A++,w+=4)u[w+0]=255&A,u[w+1]=255&y,u[w+2]=A>>8<<4|y>>8,u[w+3]=0;let d=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new a.T(r,d,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);let u=new Uint8Array(4),d=this.painter.context,m=d.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,A-w-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null);let P=u[0]+(u[2]>>4<<8),k=u[1]+((15&u[2])<<8),L=this.coordsIndex[255-u[3]],N=L&&this.sourceCache.getTileByID(L);if(!N)return null;let z=this._coordsTextureSize,j=(1<<N.tileID.canonical.z)*z;return new a.a1((N.tileID.canonical.x*z+P)/j+N.tileID.wrap,(N.tileID.canonical.y*z+k)/j,this.getElevation(N.tileID,P,k,z))}depthAtPoint(r){let u=new Uint8Array(4),d=this.painter.context,m=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(r){var u;let d=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,m=d&&r.canonical.y===0,y=d&&r.canonical.y===(1<<r.canonical.z)-1,w=`m_${m?"n":""}_${y?"s":""}`;if(this._meshCache[w])return this._meshCache[w];let A=this.painter.context,P=new a.cv,k=new a.aN,L=this.meshSize,N=a.$/L,z=L*L;for(let he=0;he<=L;he++)for(let Te=0;Te<=L;Te++)P.emplaceBack(Te*N,he*N,0);for(let he=0;he<z;he+=L+1)for(let Te=0;Te<L;Te++)k.emplaceBack(Te+he,L+Te+he+1,L+Te+he+2),k.emplaceBack(Te+he,L+Te+he+2,Te+he+1);let j=P.length,Z=j+(L+1),te=(L+1)*L,ee=m?a.bh:0,ie=m?0:1,se=y?a.bi:a.$,de=y?0:1;for(let he=0;he<=L;he++)P.emplaceBack(he*N,ee,ie);for(let he=0;he<=L;he++)P.emplaceBack(he*N,se,de);for(let he=0;he<L;he++)k.emplaceBack(te+he,Z+he,Z+he+1),k.emplaceBack(te+he,Z+he+1,te+he+1),k.emplaceBack(0+he,j+he+1,j+he),k.emplaceBack(0+he,0+he+1,j+he+1);let ce=P.length,me=ce+2*(L+1);for(let he of[0,1])for(let Te=0;Te<=L;Te++)for(let Oe of[0,1])P.emplaceBack(he*a.$,Te*N,Oe);for(let he=0;he<2*L;he+=2)k.emplaceBack(ce+he,ce+he+1,ce+he+3),k.emplaceBack(ce+he,ce+he+3,ce+he+2),k.emplaceBack(me+he,me+he+3,me+he+1),k.emplaceBack(me+he,me+he+2,me+he+3);let ye=new Ml(A.createVertexBuffer(P,Tf.members),A.createIndexBuffer(k),a.aM.simpleSegment(0,0,P.length,k.length));return this._meshCache[w]=ye,ye}getMeshFrameDelta(r){return 2*Math.PI*a.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,u){var d;let{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(d=this.getMinMaxElevation(m).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){let u=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=u.dem.min*this.exaggeration,d.maxElevation=u.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,u){let d=a.a1.fromLngLat(r.wrap()),m=(1<<u)*a.$,y=d.x*m,w=d.y*m,A=Math.floor(y/a.$),P=Math.floor(w/a.$);return{tileID:new a.Z(u,0,u,A,P),mercatorX:y,mercatorY:w}}}class Ef{constructor(r,u,d){this._context=r,this._size=u,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){let u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(d.texture),{id:r,fbo:u,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(let u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(let r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}let $s={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Af{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Ef(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(u)),this._coordsAscending={};for(let d in r.sourceCaches){this._coordsAscending[d]={};let m=r.sourceCaches[d].getVisibleCoordinates(),y=r.sourceCaches[d].getSource(),w=y instanceof ca?y.terrainTileRanges:null;for(let A of m){let P=this.terrain.sourceCache.getTerrainCoords(A,w);for(let k in P)this._coordsAscending[d][k]||(this._coordsAscending[d][k]=[]),this._coordsAscending[d][k].push(P[k])}}this._coordsAscendingStr={};for(let d of r._order){let m=r._layers[d],y=m.source;if($s[m.type]&&!this._coordsAscendingStr[y]){this._coordsAscendingStr[y]={};for(let w in this._coordsAscending[y])this._coordsAscendingStr[y][w]=this._coordsAscending[y][w].map(A=>A.key).sort().join()}}for(let d of this._renderableTiles)for(let m in this._coordsAscendingStr){let y=this._coordsAscendingStr[m][d.tileID.key];y&&y!==d.rttCoords[m]&&(d.rtt=[])}}renderLayer(r,u){if(r.isHidden(this.painter.transform.zoom))return!1;let d=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),m=r.type,y=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if($s[m]&&(this._prevType&&$s[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(r.id),!w))return!0;if($s[this._prevType]||$s[m]&&w){this._prevType=m;let A=this._stacks.length-1,P=this._stacks[A]||[];for(let k of this._renderableTiles){if(this.pool.isFull()&&(yf(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[A]){let N=this.pool.getObjectForId(k.rtt[A].id);if(N.stamp===k.rtt[A].stamp){this.pool.useObject(N);continue}}let L=this.pool.getOrCreateFreeObject();this.pool.useObject(L),this.pool.stampObject(L),k.rtt[A]={id:L.id,stamp:L.stamp},y.context.bindFramebuffer.set(L.fbo.framebuffer),y.context.clear({color:a.bf.transparent,stencil:0}),y.currentStencilSource=void 0;for(let N=0;N<P.length;N++){let z=y.style._layers[P[N]],j=z.source?this._coordsAscending[z.source][k.tileID.key]:[k.tileID];y.context.viewport.set([0,0,L.fbo.width,L.fbo.height]),y._renderTileClippingMasks(z,j,!0),y.renderLayer(y,y.style.sourceCaches[z.source],z,j,d),z.source&&(k.rttCoords[z.source]=this._coordsAscendingStr[z.source][k.tileID.key])}}return yf(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),$s[m]}return!1}}let Tn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},rb=v,Ca={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zv,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Fq={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class kh{constructor(r,u,d=!1){this.mousedown=y=>{this.startMove(y,D.mousePos(this.element,y)),D.addEventListener(window,"mousemove",this.mousemove),D.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.move(y,D.mousePos(this.element,y))},this.mouseup=y=>{this._rotatePitchHandler.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=D.touchPos(this.element,y.targetTouches)[0],this.startMove(y,this._startPos),D.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=D.touchPos(this.element,y.targetTouches)[0],this.move(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;let m=new kq;this._rotatePitchHandler=new ju({clickTolerance:3,move:(y,w)=>{let A=u.getBoundingClientRect(),P=new a.P((A.bottom-A.top)/2,(A.right-A.left)/2);return{bearingDelta:a.cn(new a.P(y.x,w.y),w,P),pitchDelta:d?-.5*(w.y-y.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=r,D.addEventListener(u,"mousedown",this.mousedown),D.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),D.addEventListener(u,"touchcancel",this.reset)}startMove(r,u){this._rotatePitchHandler.dragStart(r,u),D.disableDrag()}move(r,u){let d=this.map,{bearingDelta:m,pitchDelta:y}=this._rotatePitchHandler.dragMove(r,u)||{};m&&d.setBearing(d.getBearing()+m),y&&d.setPitch(d.getPitch()+y)}off(){let r=this.element;D.removeEventListener(r,"mousedown",this.mousedown),D.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend),D.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){D.enableDrag(),D.removeEventListener(window,"mousemove",this.mousemove),D.removeEventListener(window,"mouseup",this.mouseup),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend)}}let yr;function ai(g,r,u,d=!1){if(d||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return g==null?void 0:g.wrap();let m=new a.S(g.lng,g.lat);if(g=new a.S(g.lng,g.lat),r){let y=new a.S(g.lng-360,g.lat),w=new a.S(g.lng+360,g.lat),A=u.locationToScreenPoint(g).distSqr(r);u.locationToScreenPoint(y).distSqr(r)<A?g=y:u.locationToScreenPoint(w).distSqr(r)<A&&(g=w)}for(;Math.abs(g.lng-u.center.lng)>180;){let y=u.locationToScreenPoint(g);if(y.x>=0&&y.y>=0&&y.x<=u.width&&y.y<=u.height)break;g.lng>u.center.lng?g.lng-=360:g.lng+=360}return g.lng!==m.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(g))?g:m}let qf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gu(g,r,u){let d=g.classList;for(let m in qf)d.remove(`maplibregl-${u}-anchor-${m}`);d.add(`maplibregl-${u}-anchor-${r}`)}class Wu extends a.E{constructor(r){if(super(),this._onKeyPress=u=>{let d=u.code,m=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{let d=u.originalEvent.target,m=this._element;this._popup&&(d===m||m.contains(d))&&this.togglePopup()},this._update=u=>{if(!this._map)return;let d=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=ai(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),D.setTransform(this._element,`${qf[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${m}`),O.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){let d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=a.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=D.create("div");let u=D.createNS("http://www.w3.org/2000/svg","svg"),d=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${d}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${d}`);let y=D.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");let w=D.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");let A=D.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");let P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ie of P){let se=D.createNS("http://www.w3.org/2000/svg","ellipse");se.setAttributeNS(null,"opacity","0.04"),se.setAttributeNS(null,"cx","10.5"),se.setAttributeNS(null,"cy","5.80029008"),se.setAttributeNS(null,"rx",ie.rx),se.setAttributeNS(null,"ry",ie.ry),A.appendChild(se)}let k=D.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);let L=D.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(L);let N=D.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");let z=D.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(z);let j=D.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(6.0, 7.0)"),j.setAttributeNS(null,"fill","#FFFFFF");let Z=D.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(8.0, 8.0)");let te=D.createNS("http://www.w3.org/2000/svg","circle");te.setAttributeNS(null,"fill","#000000"),te.setAttributeNS(null,"opacity","0.25"),te.setAttributeNS(null,"cx","5.5"),te.setAttributeNS(null,"cy","5.5"),te.setAttributeNS(null,"r","5.4999962");let ee=D.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#FFFFFF"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962"),Z.appendChild(te),Z.appendChild(ee),w.appendChild(A),w.appendChild(k),w.appendChild(N),w.appendChild(j),w.appendChild(Z),u.appendChild(w),u.setAttributeNS(null,"height",d*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=a.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Gu(this._element,this._anchor,"marker"),r&&r.className)for(let u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),D.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){let m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){let r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var u,d;let m=(u=this._map)===null||u===void 0?void 0:u.terrain,y=this._map.transform.isLocationOccluded(this._lngLat);if(!m||y){let j=y?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==j&&(this._element.style.opacity=j))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let w=this._map,A=w.terrain.depthAtPoint(this._pos),P=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,P)-A<.006)return void(this._element.style.opacity=this._opacity);let k=-this._offset.y/w.transform.pixelsPerMeter,L=Math.sin(w.getPitch()*Math.PI/180)*k,N=w.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),z=w.transform.lngLatToCameraDepth(this._lngLat,P+L)-N>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&z&&this._popup.remove(),this._element.style.opacity=z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=a.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,u){return(this._opacity===void 0||r===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}let Hv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Zu=0,Wl=!1,Dh={maxWidth:100,unit:"metric"};function If(g,r,u){let d=u&&u.maxWidth||100,m=g._container.clientHeight/2,y=g._container.clientWidth/2,w=g.unproject([y-d/2,m]),A=g.unproject([y+d/2,m]),P=Math.round(g.project(A).x-g.project(w).x),k=Math.min(d,P,g._container.clientWidth),L=w.distanceTo(A);if(u&&u.unit==="imperial"){let N=3.2808*L;N>5280?Zl(r,k,N/5280,g._getUIString("ScaleControl.Miles")):Zl(r,k,N,g._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Zl(r,k,L/1852,g._getUIString("ScaleControl.NauticalMiles")):L>=1e3?Zl(r,k,L/1e3,g._getUIString("ScaleControl.Kilometers")):Zl(r,k,L,g._getUIString("ScaleControl.Meters"))}function Zl(g,r,u,d){let m=function(y){let w=Math.pow(10,`${Math.floor(y)}`.length-1),A=y/w;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(P){let k=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*k)/k}(A),w*A}(u);g.style.width=r*(m/u)+"px",g.innerHTML=`${m}&nbsp;${d}`}let Xv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Yv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Pf(g){if(g){if(typeof g=="number"){let r=Math.round(Math.abs(g)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,g),"top-left":new a.P(r,r),"top-right":new a.P(-r,r),bottom:new a.P(0,-g),"bottom-left":new a.P(r,-r),"bottom-right":new a.P(-r,-r),left:new a.P(g,0),right:new a.P(-g,0)}}if(g instanceof a.P||Array.isArray(g)){let r=a.P.convert(g);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.P.convert(g.center||[0,0]),top:a.P.convert(g.top||[0,0]),"top-left":a.P.convert(g["top-left"]||[0,0]),"top-right":a.P.convert(g["top-right"]||[0,0]),bottom:a.P.convert(g.bottom||[0,0]),"bottom-left":a.P.convert(g["bottom-left"]||[0,0]),"bottom-right":a.P.convert(g["bottom-right"]||[0,0]),left:a.P.convert(g.left||[0,0]),right:a.P.convert(g.right||[0,0])}}return Pf(new a.P(0,0))}let Jv=v;c.AJAXError=a.cz,c.Event=a.l,c.Evented=a.E,c.LngLat=a.S,c.MercatorCoordinate=a.a1,c.Point=a.P,c.addProtocol=a.cA,c.config=a.a,c.removeProtocol=a.cB,c.AttributionControl=Kv,c.BoxZoomHandler=Bv,c.CanvasSource=So,c.CooperativeGesturesHandler=Qx,c.DoubleClickZoomHandler=Vv,c.DragPanHandler=Yx,c.DragRotateHandler=Gv,c.EdgeInsets=Ol,c.FullscreenControl=class extends a.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var r;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=u==null?void 0:u.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){D.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let g=this._fullscreenButton=D.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);D.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=ua,c.GeolocateControl=class extends a.E{constructor(g){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{let u=new a.S(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,m=this._map.getBearing(),y=a.e({bearing:m},this.options.fitBoundsOptions),w=Rr.fromLngLat(u,d);this._map.fitBounds(w,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){let u=new a.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Wl)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=D.create("button","maplibregl-ctrl-geolocate",this._container),D.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{let u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Wu({element:this._dotElement}),this._circleElement=D.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{let d=(u==null?void 0:u[0])instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},Hv,g)}onAdd(g){return this._map=g,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(r=!1){if(yr!==void 0&&!r)return yr;if(window.navigator.permissions===void 0)return yr=!!window.navigator.geolocation,yr;try{yr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(u){yr=!!window.navigator.geolocation}return yr})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),D.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Zu=0,Wl=!1}_isOutOfMapMaxBounds(g){let r=this._map.getMaxBounds(),u=g.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let g=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&g))return;let r=this._map.project(g),u=this._map.unproject([r.x+100,r.y]),d=g.distanceTo(u)/100,m=2*this._accuracy/d;this._circleElement.style.width=`${m.toFixed(2)}px`,this._circleElement.style.height=`${m.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Zu--,Wl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Zu++,Zu>1?(g={maximumAge:6e5,timeout:0},Wl=!0):(g=this.options.positionOptions,Wl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var g;let r=(g=this._map.getProjection())===null||g===void 0?void 0:g.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var g;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((g=this._map.getProjection())===null||g===void 0?void 0:g.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(g){return this._map=g,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=D.create("button","maplibregl-ctrl-globe",this._container),D.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=_f,c.ImageSource=ca,c.KeyboardHandler=wf,c.LngLatBounds=Rr,c.LogoControl=tb,c.Map=class extends eb{constructor(g){var r,u;a.cw.mark(a.cx.create);let d=Object.assign(Object.assign(Object.assign({},Ca),g),{canvasContextAttributes:Object.assign(Object.assign({},Ca.canvasContextAttributes),g.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let m=new Er,y=new cn;if(d.minZoom!==void 0&&m.setMinZoom(d.minZoom),d.maxZoom!==void 0&&m.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&m.setMinPitch(d.minPitch),d.maxPitch!==void 0&&m.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&m.setRenderWorldCopies(d.renderWorldCopies),super(m,y,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Po,this._controls=[],this._mapId=a.a7(),this._contextLost=A=>{A.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:A}))},this._contextRestored=A=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:A}))},this._onMapScroll=A=>{if(A.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Tn),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this.transformCameraUpdate=d.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=re.addThrottleControl(()=>this.isMoving()),this._requestManager=new xe(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let A=!1,P=$l(k=>{this._trackResize&&!this._removed&&(this.resize(k),this.redraw())},50);this._resizeObserver=new ResizeObserver(k=>{A?P(k):A=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Wv(this,d),this._hash=d.hash&&new _f(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.e({},d.fitBoundsOptions,{duration:0}))));let w=typeof d.style=="string"||((u=(r=d.style)===null||r===void 0?void 0:r.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Kv(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new tb,d.logoPosition),this.on("style.load",()=>{if(w||this._resizeTransform(),this.transform.unmodified){let A=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(A)}}),this.on("data",A=>{this._update(A.dataType==="style"),this.fire(new a.l(`${A.dataType}data`,A))}),this.on("dataloading",A=>{this.fire(new a.l(`${A.dataType}dataloading`,A))}),this.on("dataabort",A=>{this.fire(new a.l("sourcedataabort",A))})}_getMapId(){return this._mapId}setGlobalStateProperty(g,r){return this.style.setGlobalStateProperty(g,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(g,r){if(r===void 0&&(r=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let u=g.onAdd(this);this._controls.push(g);let d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let r=this._controls.indexOf(g);return r>-1&&this._controls.splice(r,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}coveringTiles(g){return Ee(this.transform,g)}calculateCameraOptionsFromTo(g,r,u,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,r,u,d)}resize(g,r=!0){let[u,d]=this._containerDimensions(),m=this._getClampedPixelRatio(u,d);if(this._resizeCanvas(u,d,m),this.painter.resize(u,d,m),this.painter.overLimit()){let w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];let A=this._getClampedPixelRatio(u,d);this._resizeCanvas(u,d,A),this.painter.resize(u,d,A)}this._resizeTransform(r);let y=!this._moving;return y&&(this.stop(),this.fire(new a.l("movestart",g)).fire(new a.l("move",g))),this.fire(new a.l("resize",g)),y&&this.fire(new a.l("moveend",g)),this}_resizeTransform(g=!0){var r;let[u,d]=this._containerDimensions();this.transform.resize(u,d,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(u,d,g)}_getClampedPixelRatio(g,r){let{0:u,1:d}=this._maxCanvasSize,m=this.getPixelRatio(),y=g*m,w=r*m;return Math.min(y>u?u/y:1,w>d?d/w:1)*m}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(Rr.convert(g)),this._update()}setMinZoom(g){if((g=g==null?-2:g)>=-2&&g<=this.transform.maxZoom)return this.transform.setMinZoom(g),this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g==null?22:g)>=this.transform.minZoom)return this.transform.setMaxZoom(g),this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g==null?0:g)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.setMinPitch(g),this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g==null?60:g)>180)throw new Error("maxPitch must be less than or equal to 180");if(g>=this.transform.minPitch)return this.transform.setMaxPitch(g),this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.setRenderWorldCopies(g),this._update()}project(g){return this.transform.locationToScreenPoint(a.S.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.screenPointToLocation(a.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,r,u){if(g==="mouseenter"||g==="mouseover"){let d=!1;return{layers:r,listener:u,delegates:{mousemove:y=>{let w=r.filter(P=>this.getLayer(P)),A=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];A.length?d||(d=!0,u.call(this,new Gn(g,this,y.originalEvent,{features:A}))):d=!1},mouseout:()=>{d=!1}}}}if(g==="mouseleave"||g==="mouseout"){let d=!1;return{layers:r,listener:u,delegates:{mousemove:w=>{let A=r.filter(P=>this.getLayer(P));(A.length!==0?this.queryRenderedFeatures(w.point,{layers:A}):[]).length?d=!0:d&&(d=!1,u.call(this,new Gn(g,this,w.originalEvent)))},mouseout:w=>{d&&(d=!1,u.call(this,new Gn(g,this,w.originalEvent)))}}}}{let d=m=>{let y=r.filter(A=>this.getLayer(A)),w=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];w.length&&(m.features=w,u.call(this,m),delete m.features)};return{layers:r,listener:u,delegates:{[g]:d}}}}_saveDelegatedListener(g,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(r)}_removeDelegatedListener(g,r,u){if(!this._delegatedListeners||!this._delegatedListeners[g])return;let d=this._delegatedListeners[g];for(let m=0;m<d.length;m++){let y=d[m];if(y.listener===u&&y.layers.length===r.length&&y.layers.every(w=>r.includes(w))){for(let w in y.delegates)this.off(w,y.delegates[w]);return void d.splice(m,1)}}}on(g,r,u){if(u===void 0)return super.on(g,r);let d=typeof r=="string"?[r]:r,m=this._createDelegatedListener(g,d,u);this._saveDelegatedListener(g,m);for(let y in m.delegates)this.on(y,m.delegates[y]);return{unsubscribe:()=>{this._removeDelegatedListener(g,d,u)}}}once(g,r,u){if(u===void 0)return super.once(g,r);let d=typeof r=="string"?[r]:r,m=this._createDelegatedListener(g,d,u);for(let y in m.delegates){let w=m.delegates[y];m.delegates[y]=(...A)=>{this._removeDelegatedListener(g,d,u),w(...A)}}this._saveDelegatedListener(g,m);for(let y in m.delegates)this.once(y,m.delegates[y]);return this}off(g,r,u){return u===void 0?super.off(g,r):(this._removeDelegatedListener(g,typeof r=="string"?[r]:r,u),this)}queryRenderedFeatures(g,r){if(!this.style)return[];let u,d=g instanceof a.P||Array.isArray(g),m=d?g:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:g)||{},m instanceof a.P||typeof m[0]=="number")u=[a.P.convert(m)];else{let y=a.P.convert(m[0]),w=a.P.convert(m[1]);u=[y,new a.P(w.x,y.y),w,new a.P(y.x,w.y),y]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(g,r){return this.style.querySourceFeatures(g,r)}setStyle(g,r){return(r=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(g,r))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){let r=this._locale[g];if(r==null)throw new Error(`Missing UI string '${g}'`);return r}_updateStyle(g,r){var u,d;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,r));let m=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new mv(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,r,m):this.style.loadJSON(g,r,m),this):((d=(u=this.style)===null||u===void 0?void 0:u.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mv(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,r){if(typeof g=="string"){let u=this._requestManager.transformRequest(g,"Style");a.j(u,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new a.k(d))})}else typeof g=="object"&&this._updateDiff(g,r)}_updateDiff(g,r){try{this.style.setState(g,r)&&this._update(!0)}catch(u){a.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(g,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(g,r){return this._lazyInitEmptyStyle(),this.style.addSource(g,r),this._update(!0)}isSourceLoaded(g){let r=this.style&&this.style.sourceCaches[g];if(r!==void 0)return r.loaded();this.fire(new a.k(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){let r=this.style.sourceCaches[g.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&r.reload();for(let u in this.style._layers){let d=this.style._layers[u];d.type==="hillshade"&&d.source===g.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),d.type==="color-relief"&&d.source===g.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Tt(this.painter,r,g),this.painter.renderToTexture=new Af(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var d;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==g.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=u.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:g})),this}getTerrain(){var g,r;return(r=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&r!==void 0?r:null}areTilesLoaded(){let g=this.style&&this.style.sourceCaches;for(let r in g){let u=g[r]._tiles;for(let d in u){let m=u[d];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}setSourceTileLodParams(g,r,u){if(u){let d=this.getSource(u);if(!d)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);d.calculateTileZoom=$e(Math.max(1,g),Math.max(1,r))}else for(let d in this.style.sourceCaches)this.style.sourceCaches[d].getSource().calculateTileZoom=$e(Math.max(1,g),Math.max(1,r));return this._update(!0),this}refreshTiles(g,r){let u=this.style.sourceCaches[g];if(!u)throw new Error(`There is no source cache with ID "${g}", cannot refresh tile`);r===void 0?u.reload(!0):u.refreshTiles(r.map(d=>new a.a4(d.z,d.x,d.y)))}addImage(g,r,u={}){let{pixelRatio:d=1,sdf:m=!1,stretchX:y,stretchY:w,content:A,textFitWidth:P,textFitHeight:k}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||a.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:L,height:N,data:z}=r,j=r;return this.style.addImage(g,{data:new a.R({width:L,height:N},new Uint8Array(z)),pixelRatio:d,stretchX:y,stretchY:w,content:A,textFitWidth:P,textFitHeight:k,sdf:m,version:0,userImage:j}),j.onAdd&&j.onAdd(this,g),this}}{let{width:L,height:N,data:z}=O.getImageData(r);this.style.addImage(g,{data:new a.R({width:L,height:N},z),pixelRatio:d,stretchX:y,stretchY:w,content:A,textFitWidth:P,textFitHeight:k,sdf:m,version:0})}}updateImage(g,r){let u=this.style.getImage(g);if(!u)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let d=r instanceof HTMLImageElement||a.b(r)?O.getImageData(r):r,{width:m,height:y,data:w}=d;if(m===void 0||y===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||y!==u.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let A=!(r instanceof HTMLImageElement||a.b(r));return u.data.replace(w,A),this.style.updateImage(g,u),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return re.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,r){return this._lazyInitEmptyStyle(),this.style.addLayer(g,r),this._update(!0)}moveLayer(g,r){return this.style.moveLayer(g,r),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,r,u){return this.style.setLayerZoomRange(g,r,u),this._update(!0)}setFilter(g,r,u={}){return this.style.setFilter(g,r,u),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,r,u,d={}){return this.style.setPaintProperty(g,r,u,d),this._update(!0)}getPaintProperty(g,r){return this.style.getPaintProperty(g,r)}setLayoutProperty(g,r,u,d={}){return this.style.setLayoutProperty(g,r,u,d),this._update(!0)}getLayoutProperty(g,r){return this.style.getLayoutProperty(g,r)}setGlyphs(g,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,r,u,d=>{d||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,r,u=>{u||this._update(!0)}),this}setLight(g,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(g,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,r){return this.style.setFeatureState(g,r),this._update()}removeFeatureState(g,r){return this.style.removeFeatureState(g,r),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,r=0;return this._container&&(g=this._container.clientWidth||400,r=this._container.clientHeight||300),[g,r]}_setupContainer(){let g=this._container;g.classList.add("maplibregl-map");let r=this._canvasContainer=D.create("div","maplibregl-canvas-container",g);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=D.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let u=this._containerDimensions(),d=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],d);let m=this._controlContainer=D.create("div","maplibregl-control-container",g),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=D.create("div",`maplibregl-ctrl-${w} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,r,u){this._canvas.width=Math.floor(u*g),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${r}px`}_setupPainter(){let g=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:g},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,g):this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g),!u){let d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new Bx(u,this.transform),U.testSupport(u)}migrateProjection(g,r){super.migrateProjection(g,r),this.painter.transform=g,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){var r,u,d,m,y;let w=this._idleTriggered?this._fadeDuration:0,A=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let P=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let N=this.transform.zoom,z=O.now();this.style.zoomHistory.update(N,z);let j=new a.F(N,{now:z,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),Z=j.crossFadingFactor();Z===1&&Z===this._crossFadingFactor||(P=!0,this._crossFadingFactor=Z),this.style.update(j)}let k=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==A;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(y=this.style.projection)===null||y===void 0?void 0:y.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||k)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,k),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||P)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let L=this._sourcesDirty||this._styleDirty||this._placementDirty;return L||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(let u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),re.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();let r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),D.remove(this._canvasContainer),D.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,O.frame(this._frameRequest,g=>{a.cw.frame(g),this._frameRequest=null;try{this._render(g)}catch(r){if(!a.cy(r)&&!function(u){return u.message===Th}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return rb}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(g){return this._lazyInitEmptyStyle(),this.style.setProjection(g),this._update(!0)}},c.MapMouseEvent=Gn,c.MapTouchEvent=zu,c.MapWheelEvent=Nv,c.Marker=Wu,c.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{let r=this._map.getZoom(),u=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,u)=>{let d=this._map._getUIString(`NavigationControl.${u}`);r.title=d,r.setAttribute("aria-label",d)},this.options=a.e({},Fq,g),this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),D.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),D.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=D.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new kh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){D.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,r){let u=D.create("button",g,this._container);return u.type="button",u.addEventListener("click",r),u}},c.Popup=class extends a.E{constructor(g){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&D.remove(this._content),this._container&&(D.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=D.create("div","maplibregl-popup",this._map.getContainer()),this._tip=D.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ai(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;let u=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor,m=Pf(this.options.offset);if(!d){let w=this._container.offsetWidth,A=this._container.offsetHeight,P;P=u.y+m.bottom.y<A?["top"]:u.y>this._map.transform.height-A?["bottom"]:[],u.x<w/2?P.push("left"):u.x>this._map.transform.width-w/2&&P.push("right"),d=P.length===0?"bottom":P.join("-")}let y=u.add(m[d]);this.options.subpixelPositioning||(y=y.round()),D.setTransform(this._container,`${qf[d]} translate(${y.x}px,${y.y}px)`),Gu(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Xv),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=a.S.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){let r=document.createDocumentFragment(),u=document.createElement("body"),d;for(u.innerHTML=g;d=u.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=D.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=D.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let g=this._container.querySelector(Yv);g&&g.focus()}},c.RasterDEMTileSource=es,c.RasterTileSource=la,c.ScaleControl=class{constructor(g){this._onMove=()=>{If(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,If(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Dh),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){D.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=Hx,c.Style=mv,c.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=D.create("button","maplibregl-ctrl-terrain",this._container),D.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){D.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=bf,c.TwoFingersTouchRotateHandler=Vu,c.TwoFingersTouchZoomHandler=xf,c.TwoFingersTouchZoomRotateHandler=Jx,c.VectorTileSource=sa,c.VideoSource=Ds,c.addSourceType=(g,r)=>a._(void 0,void 0,void 0,function*(){if(Ya(g))throw new Error(`A source type called "${g}" already exists.`);((u,d)=>{ts[u]=d})(g,r)}),c.clearPrewarmedResources=function(){let g=Kr;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Fr),Kr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=fv,c.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return vt().getRTLTextPluginStatus()},c.getVersion=function(){return Jv},c.getWorkerCount=function(){return zr.workerCount},c.getWorkerUrl=function(){return a.a.WORKER_URL},c.importScriptInWorkers=function(g){return qa().broadcast("IS",g)},c.prewarm=function(){jn().acquire(Fr)},c.setMaxParallelImageRequests=function(g){a.a.MAX_PARALLEL_IMAGE_REQUESTS=g},c.setRTLTextPlugin=function(g,r){return vt().setRTLTextPlugin(g,r)},c.setWorkerCount=function(g){zr.workerCount=g},c.setWorkerUrl=function(g){a.a.WORKER_URL=g}});var o=e;return o})});var Qye=I((Kmr,Jye)=>{f();var IB=1/0,eEt=17976931348623157e292,$ye=NaN,tEt="[object Symbol]",rEt=/^\s+|\s+$/g,iEt=/^[-+]0x[0-9a-f]+$/i,nEt=/^0b[01]+$/i,aEt=/^0o[0-7]+$/i,oEt=parseInt,sEt=typeof global=="object"&&global&&global.Object===Object&&global,lEt=typeof self=="object"&&self&&self.Object===Object&&self,uEt=sEt||lEt||Function("return this")(),cEt=Object.prototype,hEt=cEt.toString,Gye=uEt.Symbol,dEt=Math.min,Wye=Gye?Gye.prototype:void 0,Zye=Wye?Wye.toString:void 0;function fEt(e){if(typeof e=="string")return e;if(Xye(e))return Zye?Zye.call(e):"";var t=e+"";return t=="0"&&1/e==-IB?"-0":t}function pEt(e){var t=Math[e];return function(i,o){if(i=Yye(i),o=dEt(gEt(o),292),o){var c=(Hye(i)+"e").split("e"),a=t(c[0]+"e"+(+c[1]+o));return c=(Hye(a)+"e").split("e"),+(c[0]+"e"+(+c[1]-o))}return t(i)}}function Kye(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function mEt(e){return!!e&&typeof e=="object"}function Xye(e){return typeof e=="symbol"||mEt(e)&&hEt.call(e)==tEt}function vEt(e){if(!e)return e===0?e:0;if(e=Yye(e),e===IB||e===-IB){var t=e<0?-1:1;return t*eEt}return e===e?e:0}function gEt(e){var t=vEt(e),i=t%1;return t===t?i?t-i:t:0}function Yye(e){if(typeof e=="number")return e;if(Xye(e))return $ye;if(Kye(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Kye(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(rEt,"");var i=nEt.test(e);return i||aEt.test(e)?oEt(e.slice(2),i?2:8):iEt.test(e)?$ye:+e}function Hye(e){return e==null?"":fEt(e)}var yEt=pEt("round");Jye.exports=yEt});var U0=I((agr,e_e)=>{f();var wEt=e_e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=wEt)});var zd=I((sgr,t_e)=>{f();var SEt=t_e.exports={version:"2.6.12"};typeof __e=="number"&&(__e=SEt)});var i_e=I((ugr,r_e)=>{f();r_e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var CB=I((hgr,n_e)=>{f();var TEt=i_e();n_e.exports=function(e,t,i){if(TEt(e),t===void 0)return e;switch(i){case 1:return function(o){return e.call(t,o)};case 2:return function(o,c){return e.call(t,o,c)};case 3:return function(o,c,a){return e.call(t,o,c,a)}}return function(){return e.apply(t,arguments)}}});var V0=I((fgr,a_e)=>{f();a_e.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var $0=I((mgr,o_e)=>{f();var EEt=V0();o_e.exports=function(e){if(!EEt(e))throw TypeError(e+" is not an object!");return e}});var UE=I((ggr,s_e)=>{f();s_e.exports=function(e){try{return!!e()}catch(t){return!0}}});var nh=I((_gr,l_e)=>{f();l_e.exports=!UE()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var RB=I((bgr,c_e)=>{f();var u_e=V0(),MB=U0().document,AEt=u_e(MB)&&u_e(MB.createElement);c_e.exports=function(e){return AEt?MB.createElement(e):{}}});var OB=I((Sgr,h_e)=>{f();h_e.exports=!nh()&&!UE()(function(){return Object.defineProperty(RB()("div"),"a",{get:function(){return 7}}).a!=7})});var kB=I((Egr,d_e)=>{f();var VE=V0();d_e.exports=function(e,t){if(!VE(e))return e;var i,o;if(t&&typeof(i=e.toString)=="function"&&!VE(o=i.call(e))||typeof(i=e.valueOf)=="function"&&!VE(o=i.call(e))||!t&&typeof(i=e.toString)=="function"&&!VE(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}});var DB=I(p_e=>{f();var f_e=$0(),qEt=OB(),IEt=kB(),PEt=Object.defineProperty;p_e.f=nh()?Object.defineProperty:function(t,i,o){if(f_e(t),i=IEt(i,!0),f_e(o),qEt)try{return PEt(t,i,o)}catch(c){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(t[i]=o.value),t}});var LB=I((Pgr,m_e)=>{f();m_e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var g_e=I((Mgr,v_e)=>{f();var CEt=DB(),MEt=LB();v_e.exports=nh()?function(e,t,i){return CEt.f(e,t,MEt(1,i))}:function(e,t,i){return e[t]=i,e}});var $E=I((Ogr,y_e)=>{f();var REt={}.hasOwnProperty;y_e.exports=function(e,t){return REt.call(e,t)}});var G0=I((Dgr,b_e)=>{f();var GE=U0(),FB=zd(),x_e=CB(),OEt=g_e(),kEt=$E(),WE="prototype",na=function(e,t,i){var o=e&na.F,c=e&na.G,a=e&na.S,v=e&na.P,b=e&na.B,q=e&na.W,M=c?FB:FB[t]||(FB[t]={}),O=M[WE],D=c?GE:a?GE[t]:(GE[t]||{})[WE],U,ne,ue;c&&(i=t);for(U in i)ne=!o&&D&&D[U]!==void 0,!(ne&&kEt(M,U))&&(ue=ne?D[U]:i[U],M[U]=c&&typeof D[U]!="function"?i[U]:b&&ne?x_e(ue,GE):q&&D[U]==ue?function(fe){var H=function(J,re,xe){if(this instanceof fe){switch(arguments.length){case 0:return new fe;case 1:return new fe(J);case 2:return new fe(J,re)}return new fe(J,re,xe)}return fe.apply(this,arguments)};return H[WE]=fe[WE],H}(ue):v&&typeof ue=="function"?x_e(Function.call,ue):ue,v&&((M.virtual||(M.virtual={}))[U]=ue,e&na.R&&O&&!O[U]&&OEt(O,U,ue)))};na.F=1;na.G=2;na.S=4;na.P=8;na.B=16;na.W=32;na.U=64;na.R=128;b_e.exports=na});var S_e=I((Fgr,w_e)=>{f();var DEt={}.toString;w_e.exports=function(e){return DEt.call(e).slice(8,-1)}});var zB=I((Ngr,T_e)=>{f();var LEt=S_e();T_e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return LEt(e)=="String"?e.split(""):Object(e)}});var NB=I((jgr,E_e)=>{f();E_e.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var W0=I((Vgr,A_e)=>{f();var FEt=zB(),zEt=NB();A_e.exports=function(e){return FEt(zEt(e))}});var BB=I((Ggr,q_e)=>{f();var NEt=Math.ceil,BEt=Math.floor;q_e.exports=function(e){return isNaN(e=+e)?0:(e>0?BEt:NEt)(e)}});var P_e=I((Zgr,I_e)=>{f();var jEt=BB(),UEt=Math.min;I_e.exports=function(e){return e>0?UEt(jEt(e),9007199254740991):0}});var M_e=I((Hgr,C_e)=>{f();var VEt=BB(),$Et=Math.max,GEt=Math.min;C_e.exports=function(e,t){return e=VEt(e),e<0?$Et(e+t,0):GEt(e,t)}});var O_e=I((Ygr,R_e)=>{f();var WEt=W0(),ZEt=P_e(),KEt=M_e();R_e.exports=function(e){return function(t,i,o){var c=WEt(t),a=ZEt(c.length),v=KEt(o,a),b;if(e&&i!=i){for(;a>v;)if(b=c[v++],b!=b)return!0}else for(;a>v;v++)if((e||v in c)&&c[v]===i)return e||v||0;return!e&&-1}}});var D_e=I((Qgr,k_e)=>{f();k_e.exports=!0});var B_e=I((tyr,N_e)=>{f();var HEt=zd(),L_e=U0(),F_e="__core-js_shared__",z_e=L_e[F_e]||(L_e[F_e]={});(N_e.exports=function(e,t){return z_e[e]||(z_e[e]=t!==void 0?t:{})})("versions",[]).push({version:HEt.version,mode:D_e()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var U_e=I((iyr,j_e)=>{f();var XEt=0,YEt=Math.random();j_e.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++XEt+YEt).toString(36))}});var jB=I((ayr,$_e)=>{f();var V_e=B_e()("keys"),JEt=U_e();$_e.exports=function(e){return V_e[e]||(V_e[e]=JEt(e))}});var Z_e=I((syr,W_e)=>{f();var G_e=$E(),QEt=W0(),eAt=O_e()(!1),tAt=jB()("IE_PROTO");W_e.exports=function(e,t){var i=QEt(e),o=0,c=[],a;for(a in i)a!=tAt&&G_e(i,a)&&c.push(a);for(;t.length>o;)G_e(i,a=t[o++])&&(~eAt(c,a)||c.push(a));return c}});var UB=I((uyr,K_e)=>{f();K_e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var ZE=I((hyr,H_e)=>{f();var rAt=Z_e(),iAt=UB();H_e.exports=Object.keys||function(t){return rAt(t,iAt)}});var Y_e=I(X_e=>{f();X_e.f=Object.getOwnPropertySymbols});var KE=I(J_e=>{f();J_e.f={}.propertyIsEnumerable});var e0e=I((gyr,Q_e)=>{f();var nAt=NB();Q_e.exports=function(e){return Object(nAt(e))}});var i0e=I((_yr,r0e)=>{"use strict";f();var aAt=nh(),t0e=ZE(),oAt=Y_e(),sAt=KE(),lAt=e0e(),uAt=zB(),HE=Object.assign;r0e.exports=!HE||UE()(function(){var e={},t={},i=Symbol(),o="abcdefghijklmnopqrst";return e[i]=7,o.split("").forEach(function(c){t[c]=c}),HE({},e)[i]!=7||Object.keys(HE({},t)).join("")!=o})?function(t,i){for(var o=lAt(t),c=arguments.length,a=1,v=oAt.f,b=sAt.f;c>a;)for(var q=uAt(arguments[a++]),M=v?t0e(q).concat(v(q)):t0e(q),O=M.length,D=0,U;O>D;)U=M[D++],(!aAt||b.call(q,U))&&(o[U]=q[U]);return o}:HE});var n0e=I(()=>{f();var VB=G0();VB(VB.S+VB.F,"Object",{assign:i0e()})});var o0e=I((Tyr,a0e)=>{f();n0e();a0e.exports=zd().Object.assign});var l0e=I((Iyr,s0e)=>{f();var cAt=DB(),hAt=$0(),dAt=ZE();s0e.exports=nh()?Object.defineProperties:function(t,i){hAt(t);for(var o=dAt(i),c=o.length,a=0,v;c>a;)cAt.f(t,v=o[a++],i[v]);return t}});var h0e=I((Cyr,c0e)=>{f();var u0e=U0().document;c0e.exports=u0e&&u0e.documentElement});var p0e=I((Ryr,f0e)=>{f();var fAt=$0(),pAt=l0e(),d0e=UB(),mAt=jB()("IE_PROTO"),GB=function(){},WB="prototype",XE=function(){var e=RB()("iframe"),t=d0e.length,i="<",o=">",c;for(e.style.display="none",h0e().appendChild(e),e.src="javascript:",c=e.contentWindow.document,c.open(),c.write(i+"script"+o+"document.F=Object"+i+"/script"+o),c.close(),XE=c.F;t--;)delete XE[WB][d0e[t]];return XE()};f0e.exports=Object.create||function(t,i){var o;return t!==null?(GB[WB]=fAt(t),o=new GB,GB[WB]=null,o[mAt]=t):o=XE(),i===void 0?o:pAt(o,i)}});var v0e=I(()=>{f();var m0e=G0();m0e(m0e.S,"Object",{create:p0e()})});var y0e=I((Fyr,g0e)=>{f();v0e();var vAt=zd().Object;g0e.exports=function(t,i){return vAt.create(t,i)}});var b0e=I(x0e=>{f();var gAt=KE(),yAt=LB(),_At=W0(),xAt=kB(),bAt=$E(),wAt=OB(),_0e=Object.getOwnPropertyDescriptor;x0e.f=nh()?_0e:function(t,i){if(t=_At(t),i=xAt(i,!0),wAt)try{return _0e(t,i)}catch(o){}if(bAt(t,i))return yAt(!gAt.f.call(t,i),t[i])}});var T0e=I((jyr,S0e)=>{f();var SAt=V0(),TAt=$0(),w0e=function(e,t){if(TAt(e),!SAt(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};S0e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=CB()(Function.call,b0e().f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(c,a){return w0e(c,a),t?c.__proto__=a:i(c,a),c}}({},!1):void 0),check:w0e}});var A0e=I(()=>{f();var E0e=G0();E0e(E0e.S,"Object",{setPrototypeOf:T0e().set})});var I0e=I((Wyr,q0e)=>{f();A0e();q0e.exports=zd().Object.setPrototypeOf});var ah=I((t_r,JE)=>{f();(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var c="",a=0;a<arguments.length;a++){var v=arguments[a];v&&(c=o(c,i(v)))}return c}function i(c){if(typeof c=="string"||typeof c=="number")return c;if(typeof c!="object")return"";if(Array.isArray(c))return t.apply(null,c);if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]"))return c.toString();var a="";for(var v in c)e.call(c,v)&&c[v]&&(a=o(a,v));return a}function o(c,a){return a?c?c+" "+a:c+a:c}typeof JE!="undefined"&&JE.exports?(t.default=t,JE.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var M0e=I((i_r,C0e)=>{"use strict";f();var EAt=function(e,t,i,o,c,a,v,b){if(!e){var q;if(t===void 0)q=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var M=[i,o,c,a,v,b],O=0;q=new Error(t.replace(/%s/g,function(){return M[O++]})),q.name="Invariant Violation"}throw q.framesToPop=1,q}};C0e.exports=EAt});var D0e=I(KB=>{"use strict";f();Object.defineProperty(KB,"__esModule",{value:!0});function R0e(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function O0e(e){function t(i){var o=this.constructor.getDerivedStateFromProps(e,i);return o!=null?o:null}this.setState(t.bind(this))}function k0e(e,t){try{var i=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(i,o)}finally{this.props=i,this.state=o}}R0e.__suppressDeprecationWarning=!0;O0e.__suppressDeprecationWarning=!0;k0e.__suppressDeprecationWarning=!0;function AAt(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var i=null,o=null,c=null;if(typeof t.componentWillMount=="function"?i="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(i="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?o="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(o="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?c="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(c="UNSAFE_componentWillUpdate"),i!==null||o!==null||c!==null){var a=e.displayName||e.name,v=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+v+" but also contains the following legacy lifecycles:"+(i!==null?`
  `+i:"")+(o!==null?`
  `+o:"")+(c!==null?`
  `+c:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=R0e,t.componentWillReceiveProps=O0e),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=k0e;var b=t.componentDidUpdate;t.componentDidUpdate=function(M,O,D){var U=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:D;b.call(this,M,O,U)}}return e}KB.polyfill=AAt});var F0e=I((s_r,L0e)=>{f();var qAt=nh(),IAt=ZE(),PAt=W0(),CAt=KE().f;L0e.exports=function(e){return function(t){for(var i=PAt(t),o=IAt(i),c=o.length,a=0,v=[],b;c>a;)b=o[a++],(!qAt||CAt.call(i,b))&&v.push(e?[b,i[b]]:i[b]);return v}}});var N0e=I(()=>{f();var z0e=G0(),MAt=F0e()(!0);z0e(z0e.S,"Object",{entries:function(t){return MAt(t)}})});var j0e=I((d_r,B0e)=>{f();N0e();B0e.exports=zd().Object.entries});var HB=I((p_r,U0e)=>{f();U0e.exports=j0e()});var JB=I((tA,G0e)=>{"use strict";f();Object.defineProperty(tA,"__esModule",{value:!0});tA.default=kAt;function kAt(e){function t(o,c,a,v,b,q){var M=v||"<<anonymous>>",O=q||a;if(c[a]==null)return o?new Error("Required "+b+" `"+O+"` was not specified "+("in `"+M+"`.")):null;for(var D=arguments.length,U=Array(D>6?D-6:0),ne=6;ne<D;ne++)U[ne-6]=arguments[ne];return e.apply(void 0,[c,a,M,b,O].concat(U))}var i=t.bind(null,!1);return i.isRequired=t.bind(null,!0),i}G0e.exports=tA.default});var K0e=I(Mr=>{"use strict";f();var _n=typeof Symbol=="function"&&Symbol.for,t3=_n?Symbol.for("react.element"):60103,r3=_n?Symbol.for("react.portal"):60106,rA=_n?Symbol.for("react.fragment"):60107,iA=_n?Symbol.for("react.strict_mode"):60108,nA=_n?Symbol.for("react.profiler"):60114,aA=_n?Symbol.for("react.provider"):60109,oA=_n?Symbol.for("react.context"):60110,i3=_n?Symbol.for("react.async_mode"):60111,sA=_n?Symbol.for("react.concurrent_mode"):60111,lA=_n?Symbol.for("react.forward_ref"):60112,uA=_n?Symbol.for("react.suspense"):60113,FAt=_n?Symbol.for("react.suspense_list"):60120,cA=_n?Symbol.for("react.memo"):60115,hA=_n?Symbol.for("react.lazy"):60116,zAt=_n?Symbol.for("react.block"):60121,NAt=_n?Symbol.for("react.fundamental"):60117,BAt=_n?Symbol.for("react.responder"):60118,jAt=_n?Symbol.for("react.scope"):60119;function xo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case t3:switch(e=e.type,e){case i3:case sA:case rA:case nA:case iA:case uA:return e;default:switch(e=e&&e.$$typeof,e){case oA:case lA:case hA:case cA:case aA:return e;default:return t}}case r3:return t}}}function Z0e(e){return xo(e)===sA}Mr.AsyncMode=i3;Mr.ConcurrentMode=sA;Mr.ContextConsumer=oA;Mr.ContextProvider=aA;Mr.Element=t3;Mr.ForwardRef=lA;Mr.Fragment=rA;Mr.Lazy=hA;Mr.Memo=cA;Mr.Portal=r3;Mr.Profiler=nA;Mr.StrictMode=iA;Mr.Suspense=uA;Mr.isAsyncMode=function(e){return Z0e(e)||xo(e)===i3};Mr.isConcurrentMode=Z0e;Mr.isContextConsumer=function(e){return xo(e)===oA};Mr.isContextProvider=function(e){return xo(e)===aA};Mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===t3};Mr.isForwardRef=function(e){return xo(e)===lA};Mr.isFragment=function(e){return xo(e)===rA};Mr.isLazy=function(e){return xo(e)===hA};Mr.isMemo=function(e){return xo(e)===cA};Mr.isPortal=function(e){return xo(e)===r3};Mr.isProfiler=function(e){return xo(e)===nA};Mr.isStrictMode=function(e){return xo(e)===iA};Mr.isSuspense=function(e){return xo(e)===uA};Mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===rA||e===sA||e===nA||e===iA||e===uA||e===FAt||typeof e=="object"&&e!==null&&(e.$$typeof===hA||e.$$typeof===cA||e.$$typeof===aA||e.$$typeof===oA||e.$$typeof===lA||e.$$typeof===NAt||e.$$typeof===BAt||e.$$typeof===jAt||e.$$typeof===zAt)};Mr.typeOf=xo});var X0e=I((M_r,H0e)=>{"use strict";f();H0e.exports=K0e()});var Hm=I((dA,J0e)=>{"use strict";f();Object.defineProperty(dA,"__esModule",{value:!0});var UAt=Pr(),VAt=Y0e(UAt),$At=X0e(),GAt=JB(),WAt=Y0e(GAt);function Y0e(e){return e&&e.__esModule?e:{default:e}}function ZAt(e,t,i,o,c){var a=e[t];return VAt.default.isValidElement(a)?new Error("Invalid "+o+" `"+c+"` of type ReactElement "+("supplied to `"+i+"`,expected an element type (a string ")+", component class, or function component)."):(0,$At.isValidElementType)(a)?null:new Error("Invalid "+o+" `"+c+"` of value `"+a+"` "+("supplied to `"+i+"`, expected an element type (a string ")+", component class, or function component).")}dA.default=(0,WAt.default)(ZAt);J0e.exports=dA.default});var exe=I((L_r,Q0e)=>{"use strict";f();var HAt=function(){};Q0e.exports=HAt});var oa=I((z_r,H0)=>{f();function XAt(e){return e&&e.__esModule?e:{default:e}}H0.exports=XAt,H0.exports.__esModule=!0,H0.exports.default=H0.exports});var rxe=I((fA,txe)=>{"use strict";f();fA.__esModule=!0;fA.default=JAt;var YAt=/-(.)/g;function JAt(e){return e.replace(YAt,function(t,i){return i.toUpperCase()})}txe.exports=fA.default});var n3=I((pA,ixe)=>{"use strict";f();var QAt=oa();pA.__esModule=!0;pA.default=rqt;var eqt=QAt(rxe()),tqt=/^-ms-/;function rqt(e){return(0,eqt.default)(e.replace(tqt,"ms-"))}ixe.exports=pA.default});var axe=I((mA,nxe)=>{"use strict";f();mA.__esModule=!0;mA.default=nqt;var iqt=/([A-Z])/g;function nqt(e){return e.replace(iqt,"-$1").toLowerCase()}nxe.exports=mA.default});var sxe=I((vA,oxe)=>{"use strict";f();var aqt=oa();vA.__esModule=!0;vA.default=lqt;var oqt=aqt(axe()),sqt=/^ms-/;function lqt(e){return(0,oqt.default)(e).replace(sqt,"-ms-")}oxe.exports=vA.default});var uxe=I((gA,lxe)=>{"use strict";f();var uqt=oa();gA.__esModule=!0;gA.default=fqt;var cqt=uqt(n3()),hqt=/^(top|right|bottom|left)$/,dqt=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function fqt(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(o){var c=e.style;o=(0,cqt.default)(o),o=="float"&&(o="styleFloat");var a=e.currentStyle[o]||null;if(a==null&&c&&c[o]&&(a=c[o]),dqt.test(a)&&!hqt.test(o)){var v=c.left,b=e.runtimeStyle,q=b&&b.left;q&&(b.left=e.currentStyle.left),c.left=o==="fontSize"?"1em":a,a=c.pixelLeft+"px",c.left=v,q&&(b.left=q)}return a}}}lxe.exports=gA.default});var hxe=I((yA,cxe)=>{"use strict";f();yA.__esModule=!0;yA.default=pqt;function pqt(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}cxe.exports=yA.default});var ql=I((X0,dxe)=>{"use strict";f();X0.__esModule=!0;X0.default=void 0;var mqt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);X0.default=mqt;dxe.exports=X0.default});var yxe=I(lr=>{"use strict";f();var vqt=oa();lr.__esModule=!0;lr.default=lr.animationEnd=lr.animationDelay=lr.animationTiming=lr.animationDuration=lr.animationName=lr.transitionEnd=lr.transitionDuration=lr.transitionDelay=lr.transitionTiming=lr.transitionProperty=lr.transform=void 0;var gqt=vqt(ql()),xA="transform";lr.transform=xA;var Il,a3,fxe;lr.animationEnd=fxe;lr.transitionEnd=a3;var o3,s3,l3,u3;lr.transitionDelay=u3;lr.transitionTiming=l3;lr.transitionDuration=s3;lr.transitionProperty=o3;var pxe,mxe,vxe,gxe;lr.animationDelay=gxe;lr.animationTiming=vxe;lr.animationDuration=mxe;lr.animationName=pxe;gqt.default&&(_A=_qt(),Il=_A.prefix,lr.transitionEnd=a3=_A.transitionEnd,lr.animationEnd=fxe=_A.animationEnd,lr.transform=xA=Il+"-"+xA,lr.transitionProperty=o3=Il+"-transition-property",lr.transitionDuration=s3=Il+"-transition-duration",lr.transitionDelay=u3=Il+"-transition-delay",lr.transitionTiming=l3=Il+"-transition-timing-function",lr.animationName=pxe=Il+"-animation-name",lr.animationDuration=mxe=Il+"-animation-duration",lr.animationTiming=vxe=Il+"-animation-delay",lr.animationDelay=gxe=Il+"-animation-timing-function");var _A,yqt={transform:xA,end:a3,property:o3,timing:l3,delay:u3,duration:s3};lr.default=yqt;function _qt(){for(var e=document.createElement("div").style,t={O:function(M){return"o"+M.toLowerCase()},Moz:function(M){return M.toLowerCase()},Webkit:function(M){return"webkit"+M},ms:function(M){return"MS"+M}},i=Object.keys(t),o,c,a="",v=0;v<i.length;v++){var b=i[v];if(b+"TransitionProperty"in e){a="-"+b.toLowerCase(),o=t[b]("TransitionEnd"),c=t[b]("AnimationEnd");break}}return!o&&"transitionProperty"in e&&(o="transitionend"),!c&&"animationName"in e&&(c="animationend"),e=null,{animationEnd:c,transitionEnd:o,prefix:a}}});var xxe=I((bA,_xe)=>{"use strict";f();bA.__esModule=!0;bA.default=bqt;var xqt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function bqt(e){return!!(e&&xqt.test(e))}_xe.exports=bA.default});var wxe=I((wA,bxe)=>{"use strict";f();var Y0=oa();wA.__esModule=!0;wA.default=qqt;var wqt=Y0(n3()),c3=Y0(sxe()),Sqt=Y0(uxe()),Tqt=Y0(hxe()),Eqt=yxe(),Aqt=Y0(xxe());function qqt(e,t,i){var o="",c="",a=t;if(typeof t=="string"){if(i===void 0)return e.style[(0,wqt.default)(t)]||(0,Sqt.default)(e).getPropertyValue((0,c3.default)(t));(a={})[t]=i}Object.keys(a).forEach(function(v){var b=a[v];!b&&b!==0?(0,Tqt.default)(e,(0,c3.default)(v)):(0,Aqt.default)(v)?c+=v+"("+b+") ":o+=(0,c3.default)(v)+": "+b+";"}),c&&(o+=Eqt.transform+": "+c+";"),e.style.cssText+=";"+o}bxe.exports=wA.default});var Sxe=I(Xm=>{"use strict";f();Xm.__esModule=!0;Xm.classNamesShape=Xm.timeoutsShape=void 0;var Y_r=Iqt(ki());function Iqt(e){return e&&e.__esModule?e:{default:e}}var Pqt=null;Xm.timeoutsShape=Pqt;var Cqt=null;Xm.classNamesShape=Cqt});var Exe=I(Xa=>{"use strict";f();Xa.__esModule=!0;Xa.default=Xa.EXITING=Xa.ENTERED=Xa.ENTERING=Xa.EXITED=Xa.UNMOUNTED=void 0;var Mqt=kqt(ki()),h3=Txe(Pr()),Rqt=Txe(au()),Oqt=D0e(),e0r=Sxe();function Txe(e){return e&&e.__esModule?e:{default:e}}function kqt(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};o.get||o.set?Object.defineProperty(t,i,o):t[i]=e[i]}}return t.default=e,t}function Dqt(e,t){if(e==null)return{};var i={},o=Object.keys(e),c,a;for(a=0;a<o.length;a++)c=o[a],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function Lqt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var J0="unmounted";Xa.UNMOUNTED=J0;var Nd="exited";Xa.EXITED=Nd;var Bd="entering";Xa.ENTERING=Bd;var Jm="entered";Xa.ENTERED=Jm;var d3="exiting";Xa.EXITING=d3;var Pl=function(e){Lqt(t,e);function t(o,c){var a;a=e.call(this,o,c)||this;var v=c.transitionGroup,b=v&&!v.isMounting?o.enter:o.appear,q;return a.appearStatus=null,o.in?b?(q=Nd,a.appearStatus=Bd):q=Jm:o.unmountOnExit||o.mountOnEnter?q=J0:q=Nd,a.state={status:q},a.nextCallback=null,a}var i=t.prototype;return i.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(c,a){var v=c.in;return v&&a.status===J0?{status:Nd}:null},i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(c){var a=null;if(c!==this.props){var v=this.state.status;this.props.in?v!==Bd&&v!==Jm&&(a=Bd):(v===Bd||v===Jm)&&(a=d3)}this.updateStatus(!1,a)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var c=this.props.timeout,a,v,b;return a=v=b=c,c!=null&&typeof c!="number"&&(a=c.exit,v=c.enter,b=c.appear!==void 0?c.appear:v),{exit:a,enter:v,appear:b}},i.updateStatus=function(c,a){if(c===void 0&&(c=!1),a!==null){this.cancelNextCallback();var v=Rqt.default.findDOMNode(this);a===Bd?this.performEnter(v,c):this.performExit(v)}else this.props.unmountOnExit&&this.state.status===Nd&&this.setState({status:J0})},i.performEnter=function(c,a){var v=this,b=this.props.enter,q=this.context.transitionGroup?this.context.transitionGroup.isMounting:a,M=this.getTimeouts(),O=q?M.appear:M.enter;if(!a&&!b){this.safeSetState({status:Jm},function(){v.props.onEntered(c)});return}this.props.onEnter(c,q),this.safeSetState({status:Bd},function(){v.props.onEntering(c,q),v.onTransitionEnd(c,O,function(){v.safeSetState({status:Jm},function(){v.props.onEntered(c,q)})})})},i.performExit=function(c){var a=this,v=this.props.exit,b=this.getTimeouts();if(!v){this.safeSetState({status:Nd},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:d3},function(){a.props.onExiting(c),a.onTransitionEnd(c,b.exit,function(){a.safeSetState({status:Nd},function(){a.props.onExited(c)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(c,a){a=this.setNextCallback(a),this.setState(c,a)},i.setNextCallback=function(c){var a=this,v=!0;return this.nextCallback=function(b){v&&(v=!1,a.nextCallback=null,c(b))},this.nextCallback.cancel=function(){v=!1},this.nextCallback},i.onTransitionEnd=function(c,a,v){this.setNextCallback(v);var b=a==null&&!this.props.addEndListener;if(!c||b){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(c,this.nextCallback),a!=null&&setTimeout(this.nextCallback,a)},i.render=function(){var c=this.state.status;if(c===J0)return null;var a=this.props,v=a.children,b=Dqt(a,["children"]);if(delete b.in,delete b.mountOnEnter,delete b.unmountOnExit,delete b.appear,delete b.enter,delete b.exit,delete b.timeout,delete b.addEndListener,delete b.onEnter,delete b.onEntering,delete b.onEntered,delete b.onExit,delete b.onExiting,delete b.onExited,typeof v=="function")return v(c,b);var q=h3.default.Children.only(v);return h3.default.cloneElement(q,b)},t}(h3.default.Component);Pl.contextTypes={transitionGroup:Mqt.object};Pl.childContextTypes={transitionGroup:function(){}};Pl.propTypes={};function Ym(){}Pl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ym,onEntering:Ym,onEntered:Ym,onExit:Ym,onExiting:Ym,onExited:Ym};Pl.UNMOUNTED=0;Pl.EXITED=1;Pl.ENTERING=2;Pl.ENTERED=3;Pl.EXITING=4;var Fqt=(0,Oqt.polyfill)(Pl);Xa.default=Fqt});var Q0=I((SA,Axe)=>{"use strict";f();SA.__esModule=!0;SA.default=zqt;function zqt(e){return e&&e.ownerDocument||document}Axe.exports=SA.default});var Ixe=I((TA,qxe)=>{"use strict";f();var Nqt=oa();TA.__esModule=!0;TA.default=jqt;var Bqt=Nqt(Q0());function jqt(e){e===void 0&&(e=(0,Bqt.default)());try{return e.activeElement}catch(t){}}qxe.exports=TA.default});var f3=I((ex,Cxe)=>{"use strict";f();var Uqt=oa();ex.__esModule=!0;ex.default=void 0;var Vqt=Uqt(ql()),$qt=function(){return Vqt.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):Pxe(e,t)}:Pxe}();ex.default=$qt;function Pxe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}Cxe.exports=ex.default});var qA=I((tx,kxe)=>{"use strict";f();var Kqt=oa();tx.__esModule=!0;tx.default=void 0;var Hqt=Kqt(ql()),Oxe=function(){};Hqt.default&&(Oxe=function(){if(document.addEventListener)return function(e,t,i,o){return e.addEventListener(t,i,o||!1)};if(document.attachEvent)return function(e,t,i){return e.attachEvent("on"+t,function(o){o=o||window.event,o.target=o.target||o.srcElement,o.currentTarget=e,i.call(e,o)})}}());var Xqt=Oxe;tx.default=Xqt;kxe.exports=tx.default});var IA=I((rx,Lxe)=>{"use strict";f();var Yqt=oa();rx.__esModule=!0;rx.default=void 0;var Jqt=Yqt(ql()),Dxe=function(){};Jqt.default&&(Dxe=function(){if(document.addEventListener)return function(e,t,i,o){return e.removeEventListener(t,i,o||!1)};if(document.attachEvent)return function(e,t,i){return e.detachEvent("on"+t,i)}}());var Qqt=Dxe;rx.default=Qqt;Lxe.exports=rx.default});var zxe=I((PA,Fxe)=>{"use strict";f();PA.__esModule=!0;PA.default=tIt;var eIt=/^[\w-]*$/,g3=Function.prototype.bind.call(Function.prototype.call,[].slice);function tIt(e,t){var i=t[0]==="#",o=t[0]===".",c=i||o?t.slice(1):t,a=eIt.test(c),v;return a?i?(e=e.getElementById?e:document,(v=e.getElementById(c))?[v]:[]):e.getElementsByClassName&&o?g3(e.getElementsByClassName(c)):g3(e.getElementsByTagName(t)):g3(e.querySelectorAll(t))}Fxe.exports=PA.default});var jxe=I((CA,Bxe)=>{"use strict";f();var Nxe=oa();CA.__esModule=!0;CA.default=nIt;var rIt=Nxe(f3()),iIt=Nxe(zxe());function nIt(e,t){return function(o){var c=o.currentTarget,a=o.target,v=(0,iIt.default)(c,e);v.some(function(b){return(0,rIt.default)(b,a)})&&t.call(this,o)}}Bxe.exports=CA.default});var $xe=I((ix,Vxe)=>{"use strict";f();var y3=oa();ix.__esModule=!0;ix.default=void 0;var aIt=y3(ql()),oIt=y3(qA()),sIt=y3(IA()),Uxe=function(){};aIt.default&&(Uxe=function(t,i,o,c){return(0,oIt.default)(t,i,o,c),function(){(0,sIt.default)(t,i,o,c)}});var lIt=Uxe;ix.default=lIt;Vxe.exports=ix.default});var Hxe=I(oh=>{"use strict";f();var MA=oa();oh.__esModule=!0;oh.default=void 0;var Gxe=MA(qA());oh.on=Gxe.default;var Wxe=MA(IA());oh.off=Wxe.default;var Zxe=MA(jxe());oh.filter=Zxe.default;var Kxe=MA($xe());oh.listen=Kxe.default;var uIt={on:Gxe.default,off:Wxe.default,filter:Zxe.default,listen:Kxe.default};oh.default=uIt});var _3=I((OA,Xxe)=>{"use strict";f();var cIt=oa();OA.__esModule=!0;OA.default=dIt;var hIt=cIt(ql()),RA;function dIt(e){if((!RA&&RA!==0||e)&&hIt.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),RA=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return RA}Xxe.exports=OA.default});var DA=I((kA,Jxe)=>{"use strict";f();Object.defineProperty(kA,"__esModule",{value:!0});var fIt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pIt=Pr(),mIt=Yxe(pIt),vIt=JB(),gIt=Yxe(vIt);function Yxe(e){return e&&e.__esModule?e:{default:e}}function yIt(e,t,i,o,c){var a=e[t],v=typeof a=="undefined"?"undefined":fIt(a);return mIt.default.isValidElement(a)?new Error("Invalid "+o+" `"+c+"` of type ReactElement "+("supplied to `"+i+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(v!=="object"||typeof a.render!="function")&&a.nodeType!==1?new Error("Invalid "+o+" `"+c+"` of value `"+a+"` "+("supplied to `"+i+"`, expected a ReactComponent or a ")+"DOMElement."):null}kA.default=(0,gIt.default)(yIt);Jxe.exports=kA.default});var rbe=I((w0r,tbe)=>{"use strict";f();var _It=!1,ebe=function(){};_It&&(Qxe=function(t,i){var o=arguments.length;i=new Array(o>1?o-1:0);for(var c=1;c<o;c++)i[c-1]=arguments[c];var a=0,v="Warning: "+t.replace(/%s/g,function(){return i[a++]});typeof console!="undefined"&&console.error(v);try{throw new Error(v)}catch(b){}},ebe=function(e,t,i){var o=arguments.length;i=new Array(o>2?o-2:0);for(var c=2;c<o;c++)i[c-2]=arguments[c];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||Qxe.apply(null,[t].concat(i))});var Qxe;tbe.exports=ebe});var abe=I((LA,nbe)=>{"use strict";f();Object.defineProperty(LA,"__esModule",{value:!0});LA.default=ibe;var xIt=rbe(),bIt=wIt(xIt);function wIt(e){return e&&e.__esModule?e:{default:e}}var x3={};function ibe(e,t){return function(o,c,a,v,b){var q=a||"<<anonymous>>",M=b||c;if(o[c]!=null){var O=a+"."+c;(0,bIt.default)(x3[O],"The "+v+" `"+M+"` of "+("`"+q+"` is deprecated. "+t+".")),x3[O]=!0}for(var D=arguments.length,U=Array(D>5?D-5:0),ne=5;ne<D;ne++)U[ne-5]=arguments[ne];return e.apply(void 0,[o,c,a,v,b].concat(U))}}function SIt(){x3={}}ibe._resetWarned=SIt;nbe.exports=LA.default});var b3=I((FA,obe)=>{"use strict";f();FA.__esModule=!0;FA.default=TIt;function TIt(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}obe.exports=FA.default});var lbe=I((zA,sbe)=>{"use strict";f();var EIt=oa();zA.__esModule=!0;zA.default=qIt;var AIt=EIt(b3());function qIt(e,t){e.classList?e.classList.add(t):(0,AIt.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}sbe.exports=zA.default});var hbe=I((q0r,cbe)=>{"use strict";f();function ube(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}cbe.exports=function(t,i){t.classList?t.classList.remove(i):typeof t.className=="string"?t.className=ube(t.className,i):t.setAttribute("class",ube(t.className&&t.className.baseVal||"",i))}});var mbe=I(jd=>{"use strict";f();var w3=oa();jd.__esModule=!0;jd.default=void 0;var dbe=w3(lbe());jd.addClass=dbe.default;var fbe=w3(hbe());jd.removeClass=fbe.default;var pbe=w3(b3());jd.hasClass=pbe.default;var IIt={addClass:dbe.default,removeClass:fbe.default,hasClass:pbe.default};jd.default=IIt});var gbe=I((NA,vbe)=>{"use strict";f();NA.__esModule=!0;NA.default=PIt;function PIt(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}vbe.exports=NA.default});var S3=I((BA,xbe)=>{"use strict";f();BA.__esModule=!0;BA.default=DIt;var CIt=gbe(),ybe=_be(CIt),MIt=Q0(),RIt=_be(MIt);function _be(e){return e&&e.__esModule?e:{default:e}}function OIt(e){return e&&e.tagName.toLowerCase()==="body"}function kIt(e){var t=(0,RIt.default)(e),i=(0,ybe.default)(t),o=i.innerWidth;if(!o){var c=t.documentElement.getBoundingClientRect();o=c.right-Math.abs(c.left)}return t.body.clientWidth<o}function DIt(e){var t=(0,ybe.default)(e);return t||OIt(e)?kIt(e):e.scrollHeight>e.clientHeight}xbe.exports=BA.default});var wbe=I(nx=>{"use strict";f();nx.__esModule=!0;nx.ariaHidden=T3;nx.hideSiblings=zIt;nx.showSiblings=NIt;var LIt=["template","script","style"],FIt=function(t){var i=t.nodeType,o=t.tagName;return i===1&&LIt.indexOf(o.toLowerCase())===-1},bbe=function(t,i,o){i=[].concat(i),[].forEach.call(t.children,function(c){i.indexOf(c)===-1&&FIt(c)&&o(c)})};function T3(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function zIt(e,t){bbe(e,t,function(i){return T3(!0,i)})}function NIt(e,t){bbe(e,t,function(i){return T3(!1,i)})}});var Abe=I((UA,Ebe)=>{"use strict";f();UA.__esModule=!0;var BIt=mbe(),Sbe=jA(BIt),jIt=wxe(),Tbe=jA(jIt),UIt=_3(),VIt=jA(UIt),$It=S3(),GIt=jA($It),E3=wbe();function jA(e){return e&&e.__esModule?e:{default:e}}function WIt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZIt(e,t){var i=-1;return e.some(function(o,c){if(t(o,c))return i=c,!0}),i}function KIt(e,t){return ZIt(e,function(i){return i.modals.indexOf(t)!==-1})}function HIt(e,t){var i={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(i.paddingRight=parseInt((0,Tbe.default)(t,"paddingRight")||0,10)+(0,VIt.default)()+"px"),(0,Tbe.default)(t,i)}function XIt(e,t){var i=e.style;Object.keys(i).forEach(function(o){return t.style[o]=i[o]})}var YIt=function e(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.hideSiblingNodes,c=o===void 0?!0:o,a=i.handleContainerOverflow,v=a===void 0?!0:a;WIt(this,e),this.add=function(b,q,M){var O=t.modals.indexOf(b),D=t.containers.indexOf(q);if(O!==-1)return O;if(O=t.modals.length,t.modals.push(b),t.hideSiblingNodes&&(0,E3.hideSiblings)(q,b.modalNode),D!==-1)return t.data[D].modals.push(b),O;var U={modals:[b],classes:M?M.split(/\s+/):[],overflowing:(0,GIt.default)(q)};return t.handleContainerOverflow&&HIt(U,q),U.classes.forEach(Sbe.default.addClass.bind(null,q)),t.containers.push(q),t.data.push(U),O},this.remove=function(b){var q=t.modals.indexOf(b);if(q!==-1){var M=KIt(t.data,b),O=t.data[M],D=t.containers[M];O.modals.splice(O.modals.indexOf(b),1),t.modals.splice(q,1),O.modals.length===0?(O.classes.forEach(Sbe.default.removeClass.bind(null,D)),t.handleContainerOverflow&&XIt(O,D),t.hideSiblingNodes&&(0,E3.showSiblings)(D,b.modalNode),t.containers.splice(M,1),t.data.splice(M,1)):t.hideSiblingNodes&&(0,E3.ariaHidden)(!1,O.modals[O.modals.length-1].modalNode)}},this.isTopModal=function(b){return!!t.modals.length&&t.modals[t.modals.length-1]===b},this.hideSiblingNodes=c,this.handleContainerOverflow=v,this.modals=[],this.containers=[],this.data=[]};UA.default=YIt;Ebe.exports=UA.default});var $A=I((VA,qbe)=>{"use strict";f();VA.__esModule=!0;VA.default=tPt;var JIt=au(),QIt=ePt(JIt);function ePt(e){return e&&e.__esModule?e:{default:e}}function tPt(e,t){return e=typeof e=="function"?e():e,QIt.default.findDOMNode(e)||t}qbe.exports=VA.default});var WA=I((GA,Pbe)=>{"use strict";f();GA.__esModule=!0;GA.default=function(e){return(0,aPt.default)(iPt.default.findDOMNode(e))};var rPt=au(),iPt=Ibe(rPt),nPt=Q0(),aPt=Ibe(nPt);function Ibe(e){return e&&e.__esModule?e:{default:e}}Pbe.exports=GA.default});var Lbe=I((ZA,Dbe)=>{"use strict";f();ZA.__esModule=!0;var oPt=ki(),A3=ev(oPt),sPt=DA(),lPt=ev(sPt),uPt=Pr(),Cbe=ev(uPt),cPt=au(),Mbe=ev(cPt),hPt=$A(),Rbe=ev(hPt),dPt=WA(),Obe=ev(dPt);function ev(e){return e&&e.__esModule?e:{default:e}}function fPt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kbe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function pPt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q3=function(e){pPt(t,e);function t(){var i,o,c;fPt(this,t);for(var a=arguments.length,v=Array(a),b=0;b<a;b++)v[b]=arguments[b];return c=(i=(o=kbe(this,e.call.apply(e,[this].concat(v))),o),o._mountOverlayTarget=function(){o._overlayTarget||(o._overlayTarget=document.createElement("div"),o._portalContainerNode=(0,Rbe.default)(o.props.container,(0,Obe.default)(o).body),o._portalContainerNode.appendChild(o._overlayTarget))},o._unmountOverlayTarget=function(){o._overlayTarget&&(o._portalContainerNode.removeChild(o._overlayTarget),o._overlayTarget=null),o._portalContainerNode=null},o._renderOverlay=function(){var q=o.props.children?Cbe.default.Children.only(o.props.children):null;if(q!==null){o._mountOverlayTarget();var M=!o._overlayInstance;o._overlayInstance=Mbe.default.unstable_renderSubtreeIntoContainer(o,q,o._overlayTarget,function(){M&&o.props.onRendered&&o.props.onRendered()})}else o._unrenderOverlay(),o._unmountOverlayTarget()},o._unrenderOverlay=function(){o._overlayTarget&&(Mbe.default.unmountComponentAtNode(o._overlayTarget),o._overlayInstance=null)},o.getMountNode=function(){return o._overlayTarget},i),kbe(o,c)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(o){this._overlayTarget&&o.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,Rbe.default)(o.container,(0,Obe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(Cbe.default.Component);q3.displayName="Portal";q3.propTypes={container:A3.default.oneOfType([lPt.default,A3.default.func]),onRendered:A3.default.func};ZA.default=q3;Dbe.exports=ZA.default});var Nbe=I((KA,zbe)=>{"use strict";f();KA.__esModule=!0;var mPt=ql(),vPt=sh(mPt),gPt=ki(),I3=sh(gPt),yPt=DA(),_Pt=sh(yPt),xPt=Pr(),bPt=sh(xPt),wPt=au(),P3=sh(wPt),SPt=$A(),TPt=sh(SPt),EPt=WA(),APt=sh(EPt),qPt=Lbe(),IPt=sh(qPt);function sh(e){return e&&e.__esModule?e:{default:e}}function PPt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fbe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function CPt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C3=function(e){CPt(t,e);function t(){var i,o,c;PPt(this,t);for(var a=arguments.length,v=Array(a),b=0;b<a;b++)v[b]=arguments[b];return c=(i=(o=Fbe(this,e.call.apply(e,[this].concat(v))),o),o.getMountNode=function(){return o._portalContainerNode},i),Fbe(o,c)}return t.prototype.UNSAFE_componentWillMount=function(){if(vPt.default){var o=this.props.container;typeof o=="function"&&(o=o()),!(o&&!P3.default.findDOMNode(o))&&this.setContainer(o)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(o){o.container!==this.props.container&&this.setContainer(o.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(o){this._portalContainerNode=(0,TPt.default)(o,(0,APt.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?P3.default.createPortal(this.props.children,this._portalContainerNode):null},t}(bPt.default.Component);C3.displayName="Portal";C3.propTypes={container:I3.default.oneOfType([_Pt.default,I3.default.func]),onRendered:I3.default.func};KA.default=P3.default.createPortal?C3:IPt.default;zbe.exports=KA.default});var Vbe=I((HA,Ube)=>{"use strict";f();HA.__esModule=!0;var MPt=ki(),RPt=Bbe(MPt),OPt=Pr(),kPt=Bbe(OPt);function Bbe(e){return e&&e.__esModule?e:{default:e}}function DPt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LPt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function FPt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var zPt={children:RPt.default.node},jbe=function(e){FPt(t,e);function t(){return DPt(this,t),LPt(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(kPt.default.Component);jbe.propTypes=zPt;HA.default=jbe;Ube.exports=HA.default});var Wbe=I((XA,Gbe)=>{"use strict";f();XA.__esModule=!0;XA.default=function(e,t,i,o){return(0,BPt.default)(e,t,i,o),{remove:function(){(0,UPt.default)(e,t,i,o)}}};var NPt=qA(),BPt=$be(NPt),jPt=IA(),UPt=$be(jPt);function $be(e){return e&&e.__esModule?e:{default:e}}Gbe.exports=XA.default});var Kbe=I((YA,Zbe)=>{"use strict";f();YA.__esModule=!0;YA.default=VPt;function VPt(e){var t=!document.addEventListener,i=void 0;return t?(document.attachEvent("onfocusin",e),i=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),i=function(){return document.removeEventListener("focus",e,!0)}),{remove:i}}Zbe.exports=YA.default});var n1e=I((QA,i1e)=>{"use strict";f();QA.__esModule=!0;var Jbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},$Pt=Ixe(),M3=Nn($Pt),GPt=f3(),Qbe=Nn(GPt),WPt=ql(),ZPt=Nn(WPt),KPt=ki(),Zr=Nn(KPt),HPt=DA(),XPt=Nn(HPt),YPt=abe(),JPt=Nn(YPt),QPt=Hm(),Hbe=Nn(QPt),e1e=Pr(),lh=Nn(e1e),eCt=au(),tCt=Nn(eCt),rCt=exe(),iCt=Nn(rCt),nCt=Abe(),t1e=Nn(nCt),aCt=Nbe(),r1e=Nn(aCt),oCt=Vbe(),sCt=Nn(oCt),lCt=Wbe(),Xbe=Nn(lCt),uCt=Kbe(),cCt=Nn(uCt),hCt=$A(),dCt=Nn(hCt),fCt=WA(),R3=Nn(fCt);function Nn(e){return e&&e.__esModule?e:{default:e}}function pCt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ybe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mCt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var vCt=new t1e.default,JA=function(e){mCt(t,e);function t(){var i,o,c;pCt(this,t);for(var a=arguments.length,v=Array(a),b=0;b<a;b++)v[b]=arguments[b];return c=(i=(o=Ybe(this,e.call.apply(e,[this].concat(v))),o),gCt.call(o),i),Ybe(o,c)}return t.prototype.omitProps=function(o,c){var a=Object.keys(o),v={};return a.map(function(b){Object.prototype.hasOwnProperty.call(c,b)||(v[b]=o[b])}),v},t.prototype.render=function(){var o=this.props,c=o.show,a=o.container,v=o.children,b=o.transition,q=o.backdrop,M=o.className,O=o.style,D=o.onExit,U=o.onExiting,ne=o.onEnter,ue=o.onEntering,fe=o.onEntered,H=lh.default.Children.only(v),J=this.omitProps(this.props,t.propTypes),re=c||b&&!this.state.exited;if(!re)return null;var xe=H.props,Ae=xe.role,Ge=xe.tabIndex;return(Ae===void 0||Ge===void 0)&&(H=(0,e1e.cloneElement)(H,{role:Ae===void 0?"document":Ae,tabIndex:Ge==null?"-1":Ge})),b&&(H=lh.default.createElement(b,{appear:!0,unmountOnExit:!0,in:c,onExit:D,onExiting:U,onExited:this.handleHidden,onEnter:ne,onEntering:ue,onEntered:fe},H)),lh.default.createElement(r1e.default,{ref:this.setMountNode,container:a,onRendered:this.onPortalRendered},lh.default.createElement("div",Jbe({ref:this.setModalNodeRef,role:Ae||"dialog"},J,{style:O,className:M}),q&&this.renderBackdrop(),lh.default.createElement(sCt.default,{ref:this.setDialogRef},H)))},t.prototype.UNSAFE_componentWillReceiveProps=function(o){o.show?this.setState({exited:!1}):o.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(o){!this.props.show&&o.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(o){var c=this.props.transition;o.show&&!this.props.show&&!c?this.onHide():!o.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var o=this.props,c=o.show,a=o.transition;this._isMounted=!1,(c||a&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var o=this.getDialogElement(),c=(0,M3.default)((0,R3.default)(this));o&&!(0,Qbe.default)(o,c)&&(this.lastFocus=c,o.hasAttribute("tabIndex")||((0,iCt.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),o.setAttribute("tabIndex",-1)),o.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return tCt.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(lh.default.Component);JA.propTypes=Jbe({},r1e.default.propTypes,{show:Zr.default.bool,container:Zr.default.oneOfType([XPt.default,Zr.default.func]),onShow:Zr.default.func,onHide:Zr.default.func,backdrop:Zr.default.oneOfType([Zr.default.bool,Zr.default.oneOf(["static"])]),renderBackdrop:Zr.default.func,onEscapeKeyDown:Zr.default.func,onEscapeKeyUp:(0,JPt.default)(Zr.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Zr.default.func,backdropStyle:Zr.default.object,backdropClassName:Zr.default.string,containerClassName:Zr.default.string,keyboard:Zr.default.bool,transition:Hbe.default,backdropTransition:Hbe.default,autoFocus:Zr.default.bool,enforceFocus:Zr.default.bool,restoreFocus:Zr.default.bool,onEnter:Zr.default.func,onEntering:Zr.default.func,onEntered:Zr.default.func,onExit:Zr.default.func,onExiting:Zr.default.func,onExited:Zr.default.func,manager:Zr.default.object.isRequired});JA.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:vCt,renderBackdrop:function(t){return lh.default.createElement("div",t)}};var gCt=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var i=t.props,o=i.backdropStyle,c=i.backdropClassName,a=i.renderBackdrop,v=i.backdropTransition,b=function(O){return t.backdrop=O},q=a({ref:b,style:o,className:c,onClick:t.handleBackdropClick});return v&&(q=lh.default.createElement(v,{appear:!0,in:t.props.show},q)),q},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var i=(0,R3.default)(t),o=(0,dCt.default)(t.props.container,i.body);t.props.manager.add(t,o,t.props.containerClassName),t._onDocumentKeydownListener=(0,Xbe.default)(i,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,Xbe.default)(i,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,cCt.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(i){t.mountNode=i&&i.getMountNode()},this.setModalNodeRef=function(i){t.modalNode=i},this.setDialogRef=function(i){t.dialog=i},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var i;(i=t.props).onExited.apply(i,arguments)}},this.handleBackdropClick=function(i){i.target===i.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(i),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(i){t.props.keyboard&&i.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(i),t.props.onHide())},this.handleDocumentKeyUp=function(i){t.props.keyboard&&i.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(i)},this.checkForFocus=function(){ZPt.default&&(t.lastFocus=(0,M3.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var i=t.getDialogElement(),o=(0,M3.default)((0,R3.default)(t));i&&!(0,Qbe.default)(i,o)&&i.focus()}}};JA.Manager=t1e.default;QA.default=JA;i1e.exports=QA.default});var P1e=I((_br,I1e)=>{f();var kCt="Expected a function",A1e=NaN,DCt="[object Symbol]",LCt=/^\s+|\s+$/g,FCt=/^[-+]0x[0-9a-f]+$/i,zCt=/^0b[01]+$/i,NCt=/^0o[0-7]+$/i,BCt=parseInt,jCt=typeof global=="object"&&global&&global.Object===Object&&global,UCt=typeof self=="object"&&self&&self.Object===Object&&self,VCt=jCt||UCt||Function("return this")(),$Ct=Object.prototype,GCt=$Ct.toString,WCt=Math.max,ZCt=Math.min,$3=function(){return VCt.Date.now()};function KCt(e,t,i){var o,c,a,v,b,q,M=0,O=!1,D=!1,U=!0;if(typeof e!="function")throw new TypeError(kCt);t=q1e(t)||0,G3(i)&&(O=!!i.leading,D="maxWait"in i,a=D?WCt(q1e(i.maxWait)||0,t):a,U="trailing"in i?!!i.trailing:U);function ne(Ne){var Ye=o,ct=c;return o=c=void 0,M=Ne,v=e.apply(ct,Ye),v}function ue(Ne){return M=Ne,b=setTimeout(J,t),O?ne(Ne):v}function fe(Ne){var Ye=Ne-q,ct=Ne-M,ht=t-Ye;return D?ZCt(ht,a-ct):ht}function H(Ne){var Ye=Ne-q,ct=Ne-M;return q===void 0||Ye>=t||Ye<0||D&&ct>=a}function J(){var Ne=$3();if(H(Ne))return re(Ne);b=setTimeout(J,fe(Ne))}function re(Ne){return b=void 0,U&&o?ne(Ne):(o=c=void 0,v)}function xe(){b!==void 0&&clearTimeout(b),M=0,o=q=c=b=void 0}function Ae(){return b===void 0?v:re($3())}function Ge(){var Ne=$3(),Ye=H(Ne);if(o=arguments,c=this,q=Ne,Ye){if(b===void 0)return ue(q);if(D)return b=setTimeout(J,t),ne(q)}return b===void 0&&(b=setTimeout(J,t)),v}return Ge.cancel=xe,Ge.flush=Ae,Ge}function G3(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function HCt(e){return!!e&&typeof e=="object"}function XCt(e){return typeof e=="symbol"||HCt(e)&&GCt.call(e)==DCt}function q1e(e){if(typeof e=="number")return e;if(XCt(e))return A1e;if(G3(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=G3(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(LCt,"");var i=zCt.test(e);return i||NCt.test(e)?BCt(e.slice(2),i?2:8):FCt.test(e)?A1e:+e}I1e.exports=KCt});var e2t={};PU(e2t,{SettingsProvider:()=>JCt,renderApp:()=>QCt});f();var O1e=_t(Pr(),1),k1e=_t(au(),1),Xbr=_t(bge(),1);f();var $d=_t(Pr(),1);f();var fSt={AE:"ae",AK:"ak",CM:"cm",GL:"gl",MB:"mb",MTB:"mtb",TK:"tk",TKX:"tkx"};function zm(){return{allow_download:!0,default_crs:null,description:"",license:"CC-BY-SA 4.0",link_zoomify:null,link_thumb_small:null,link_thumb_mid:null,map_type:fSt.AK,map_scale:25e3,measures:null,owner:null,permalink:null,ppn:null,technic:null,time_of_publication:"1899-01-01T00:00:00",title:"",title_serie:null,title_short:"",type:null}}f();var Lt=_t(Pr(),1);f();var _E=_t(Pr(),1),_o=_t(Pr(),1);var q0=e=>e.type==="checkbox",Ld=e=>e instanceof Date,Ea=e=>e==null,kge=e=>typeof e=="object",Oi=e=>!Ea(e)&&!Array.isArray(e)&&kge(e)&&!Ld(e),pSt=e=>Oi(e)&&e.target?q0(e.target)?e.target.checked:e.target.value:e,mSt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,vSt=(e,t)=>e.has(mSt(t)),gSt=e=>{let t=e.constructor&&e.constructor.prototype;return Oi(t)&&t.hasOwnProperty("isPrototypeOf")},YN=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function ta(e){let t,i=Array.isArray(e),o=typeof FileList!="undefined"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(YN&&(e instanceof Blob||o))&&(i||Oi(e))){if(t=i?[]:{},!i&&!gSt(e))t=e;else for(let c in e)e.hasOwnProperty(c)&&(t[c]=ta(e[c]));}else return e;return t}var xE=e=>Array.isArray(e)?e.filter(Boolean):[],Zi=e=>e===void 0,wt=(e,t,i)=>{if(!t||!Oi(e))return i;let o=xE(t.split(/[,[\].]+?/)).reduce((c,a)=>Ea(c)?c:c[a],e);return Zi(o)||o===e?Zi(e[t])?i:e[t]:o},yl=e=>typeof e=="boolean",JN=e=>/^\w*$/.test(e),Dge=e=>xE(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ri=(e,t,i)=>{let o=-1,c=JN(t)?[t]:Dge(t),a=c.length,v=a-1;for(;++o<a;){let b=c[o],q=i;if(o!==v){let M=e[b];q=Oi(M)||Array.isArray(M)?M:isNaN(+c[o+1])?{}:[]}if(b==="__proto__"||b==="constructor"||b==="prototype")return;e[b]=q,e=e[b]}},wge={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Is={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Tu={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Lge=_o.default.createContext(null),Fge=()=>_o.default.useContext(Lge),zge=e=>{let o=e,{children:t}=o,i=Kf(o,["children"]);return _o.default.createElement(Lge.Provider,{value:i},t)},ySt=(e,t,i,o=!0)=>{let c={defaultValues:t._defaultValues};for(let a in e)Object.defineProperty(c,a,{get:()=>{let v=a;return t._proxyFormState[v]!==Is.all&&(t._proxyFormState[v]=!o||Is.all),i&&(i[v]=!0),e[v]}});return c},_St=typeof window!="undefined"?_E.useLayoutEffect:_E.useEffect;var _l=e=>typeof e=="string",xSt=(e,t,i,o,c)=>_l(e)?(o&&t.watch.add(e),wt(i,e,c)):Array.isArray(e)?e.map(a=>(o&&t.watch.add(a),wt(i,a))):(o&&(t.watchAll=!0),i);var bSt=(e,t,i,o,c)=>t?en(rt({},i[e]),{types:en(rt({},i[e]&&i[e].types?i[e].types:{}),{[o]:c||!0})}):{},E0=e=>Array.isArray(e)?e:[e],Sge=()=>{let e=[];return{get observers(){return e},next:c=>{for(let a of e)a.next&&a.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(a=>a!==c)}}),unsubscribe:()=>{e=[]}}},XN=e=>Ea(e)||!kge(e);function rh(e,t){if(XN(e)||XN(t))return e===t;if(Ld(e)&&Ld(t))return e.getTime()===t.getTime();let i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(let c of i){let a=e[c];if(!o.includes(c))return!1;if(c!=="ref"){let v=t[c];if(Ld(a)&&Ld(v)||Oi(a)&&Oi(v)||Array.isArray(a)&&Array.isArray(v)?!rh(a,v):a!==v)return!1}}return!0}var Ta=e=>Oi(e)&&!Object.keys(e).length,QN=e=>e.type==="file",Ps=e=>typeof e=="function",vE=e=>{if(!YN)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Nge=e=>e.type==="select-multiple",eB=e=>e.type==="radio",wSt=e=>eB(e)||q0(e),HN=e=>vE(e)&&e.isConnected;function SSt(e,t){let i=t.slice(0,-1).length,o=0;for(;o<i;)e=Zi(e)?o++:e[t[o++]];return e}function TSt(e){for(let t in e)if(e.hasOwnProperty(t)&&!Zi(e[t]))return!1;return!0}function on(e,t){let i=Array.isArray(t)?t:JN(t)?[t]:Dge(t),o=i.length===1?e:SSt(e,i),c=i.length-1,a=i[c];return o&&delete o[a],c!==0&&(Oi(o)&&Ta(o)||Array.isArray(o)&&TSt(o))&&on(e,i.slice(0,-1)),e}var Bge=e=>{for(let t in e)if(Ps(e[t]))return!0;return!1};function gE(e,t={}){let i=Array.isArray(e);if(Oi(e)||i)for(let o in e)Array.isArray(e[o])||Oi(e[o])&&!Bge(e[o])?(t[o]=Array.isArray(e[o])?[]:{},gE(e[o],t[o])):Ea(e[o])||(t[o]=!0);return t}function jge(e,t,i){let o=Array.isArray(e);if(Oi(e)||o)for(let c in e)Array.isArray(e[c])||Oi(e[c])&&!Bge(e[c])?Zi(t)||XN(i[c])?i[c]=Array.isArray(e[c])?gE(e[c],[]):rt({},gE(e[c])):jge(e[c],Ea(t)?{}:t[c],i[c]):i[c]=!rh(e[c],t[c]);return i}var S0=(e,t)=>jge(e,t,gE(t)),Tge={value:!1,isValid:!1},Ege={value:!0,isValid:!0},Uge=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(i=>i&&i.checked&&!i.disabled).map(i=>i.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Zi(e[0].attributes.value)?Zi(e[0].value)||e[0].value===""?Ege:{value:e[0].value,isValid:!0}:Ege:Tge}return Tge},Vge=(e,{valueAsNumber:t,valueAsDate:i,setValueAs:o})=>Zi(e)?e:t?e===""?NaN:e&&+e:i&&_l(e)?new Date(e):o?o(e):e,Age={isValid:!1,value:null},$ge=e=>Array.isArray(e)?e.reduce((t,i)=>i&&i.checked&&!i.disabled?{isValid:!0,value:i.value}:t,Age):Age;function qge(e){let t=e.ref;return QN(t)?t.files:eB(t)?$ge(e.refs).value:Nge(t)?[...t.selectedOptions].map(({value:i})=>i):q0(t)?Uge(e.refs).value:Vge(Zi(t.value)?e.ref.value:t.value,e)}var ESt=(e,t,i,o)=>{let c={};for(let a of e){let v=wt(t,a);v&&ri(c,a,v._f)}return{criteriaMode:i,names:[...e],fields:c,shouldUseNativeValidation:o}},yE=e=>e instanceof RegExp,T0=e=>Zi(e)?e:yE(e)?e.source:Oi(e)?yE(e.value)?e.value.source:e.value:e,Ige=e=>({isOnSubmit:!e||e===Is.onSubmit,isOnBlur:e===Is.onBlur,isOnChange:e===Is.onChange,isOnAll:e===Is.all,isOnTouch:e===Is.onTouched}),Pge="AsyncFunction",ASt=e=>!!e&&!!e.validate&&!!(Ps(e.validate)&&e.validate.constructor.name===Pge||Oi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Pge)),qSt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Cge=(e,t,i)=>!i&&(t.watchAll||t.watch.has(e)||[...t.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length)))),A0=(e,t,i,o)=>{for(let a of i||Object.keys(e)){let v=wt(e,a);if(v){let c=v,{_f:b}=c,q=Kf(c,["_f"]);if(b){if(b.refs&&b.refs[0]&&t(b.refs[0],a)&&!o)return!0;if(b.ref&&t(b.ref,b.name)&&!o)return!0;if(A0(q,t))break}else if(Oi(q)&&A0(q,t))break}}};function Mge(e,t,i){let o=wt(e,i);if(o||JN(i))return{error:o,name:i};let c=i.split(".");for(;c.length;){let a=c.join("."),v=wt(t,a),b=wt(e,a);if(v&&!Array.isArray(v)&&i!==a)return{name:i};if(b&&b.type)return{name:a,error:b};c.pop()}return{name:i}}var ISt=(e,t,i,o)=>{i(e);let v=e,{name:c}=v,a=Kf(v,["name"]);return Ta(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(b=>t[b]===(!o||Is.all))},PSt=(e,t,i)=>!e||!t||e===t||E0(e).some(o=>o&&(i?o===t:o.startsWith(t)||t.startsWith(o))),CSt=(e,t,i,o,c)=>c.isOnAll?!1:!i&&c.isOnTouch?!(t||e):(i?o.isOnBlur:c.isOnBlur)?!e:(i?o.isOnChange:c.isOnChange)?e:!0,MSt=(e,t)=>!xE(wt(e,t)).length&&on(e,t),RSt=(e,t,i)=>{let o=E0(wt(e,i));return ri(o,"root",t[i]),ri(e,i,o),e},mE=e=>_l(e);function Rge(e,t,i="validate"){if(mE(e)||Array.isArray(e)&&e.every(mE)||yl(e)&&!e)return{type:i,message:mE(e)?e:"",ref:t}}var Nm=e=>Oi(e)&&!yE(e)?e:{value:e,message:""},Oge=(e,t,i,o,c,a)=>br(null,null,function*(){let{ref:v,refs:b,required:q,maxLength:M,minLength:O,min:D,max:U,pattern:ne,validate:ue,name:fe,valueAsNumber:H,mount:J}=e._f,re=wt(i,fe);if(!J||t.has(fe))return{};let xe=b?b[0]:v,Ae=Pt=>{c&&xe.reportValidity&&(xe.setCustomValidity(yl(Pt)?"":Pt||""),xe.reportValidity())},Ge={},Ne=eB(v),Ye=q0(v),ct=Ne||Ye,ht=(H||QN(v))&&Zi(v.value)&&Zi(re)||vE(v)&&v.value===""||re===""||Array.isArray(re)&&!re.length,pr=bSt.bind(null,fe,o,Ge),Lr=(Pt,Et,nr,Sr=Tu.maxLength,ur=Tu.minLength)=>{let Dt=Pt?Et:nr;Ge[fe]=rt({type:Pt?Sr:ur,message:Dt,ref:v},pr(Pt?Sr:ur,Dt))};if(a?!Array.isArray(re)||!re.length:q&&(!ct&&(ht||Ea(re))||yl(re)&&!re||Ye&&!Uge(b).isValid||Ne&&!$ge(b).isValid)){let{value:Pt,message:Et}=mE(q)?{value:!!q,message:q}:Nm(q);if(Pt&&(Ge[fe]=rt({type:Tu.required,message:Et,ref:xe},pr(Tu.required,Et)),!o))return Ae(Et),Ge}if(!ht&&(!Ea(D)||!Ea(U))){let Pt,Et,nr=Nm(U),Sr=Nm(D);if(!Ea(re)&&!isNaN(re)){let ur=v.valueAsNumber||re&&+re;Ea(nr.value)||(Pt=ur>nr.value),Ea(Sr.value)||(Et=ur<Sr.value)}else{let ur=v.valueAsDate||new Date(re),Dt=Bn=>new Date(new Date().toDateString()+" "+Bn),Fr=v.type=="time",zr=v.type=="week";_l(nr.value)&&re&&(Pt=Fr?Dt(re)>Dt(nr.value):zr?re>nr.value:ur>new Date(nr.value)),_l(Sr.value)&&re&&(Et=Fr?Dt(re)<Dt(Sr.value):zr?re<Sr.value:ur<new Date(Sr.value))}if((Pt||Et)&&(Lr(!!Pt,nr.message,Sr.message,Tu.max,Tu.min),!o))return Ae(Ge[fe].message),Ge}if((M||O)&&!ht&&(_l(re)||a&&Array.isArray(re))){let Pt=Nm(M),Et=Nm(O),nr=!Ea(Pt.value)&&re.length>+Pt.value,Sr=!Ea(Et.value)&&re.length<+Et.value;if((nr||Sr)&&(Lr(nr,Pt.message,Et.message),!o))return Ae(Ge[fe].message),Ge}if(ne&&!ht&&_l(re)){let{value:Pt,message:Et}=Nm(ne);if(yE(Pt)&&!re.match(Pt)&&(Ge[fe]=rt({type:Tu.pattern,message:Et,ref:v},pr(Tu.pattern,Et)),!o))return Ae(Et),Ge}if(ue){if(Ps(ue)){let Pt=yield ue(re,i),Et=Rge(Pt,xe);if(Et&&(Ge[fe]=rt(rt({},Et),pr(Tu.validate,Et.message)),!o))return Ae(Et.message),Ge}else if(Oi(ue)){let Pt={};for(let Et in ue){if(!Ta(Pt)&&!o)break;let nr=Rge(yield ue[Et](re,i),xe,Et);nr&&(Pt=rt(rt({},nr),pr(Et,nr.message)),Ae(nr.message),o&&(Ge[fe]=Pt))}if(!Ta(Pt)&&(Ge[fe]=rt({ref:xe},Pt),!o))return Ge}}return Ae(!0),Ge}),OSt={mode:Is.onSubmit,reValidateMode:Is.onChange,shouldFocusError:!0};function kSt(e={}){let t=rt(rt({},OSt),e),i={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ps(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},o={},c=Oi(t.defaultValues)||Oi(t.values)?ta(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:ta(c),v={action:!1,mount:!1,watch:!1},b={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},q,M=0,O={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},D=rt({},O),U={array:Sge(),state:Sge()},ne=Ige(t.mode),ue=Ige(t.reValidateMode),fe=t.criteriaMode===Is.all,H=_e=>ke=>{clearTimeout(M),M=setTimeout(_e,ke)},J=_e=>br(null,null,function*(){if(!t.disabled&&(O.isValid||D.isValid||_e)){let ke=t.resolver?Ta((yield ht()).errors):yield Lr(o,!0);ke!==i.isValid&&U.state.next({isValid:ke})}}),re=(_e,ke)=>{!t.disabled&&(O.isValidating||O.validatingFields||D.isValidating||D.validatingFields)&&((_e||Array.from(b.mount)).forEach(Be=>{Be&&(ke?ri(i.validatingFields,Be,ke):on(i.validatingFields,Be))}),U.state.next({validatingFields:i.validatingFields,isValidating:!Ta(i.validatingFields)}))},xe=(_e,ke=[],Be,vt,ut=!0,le=!0)=>{if(vt&&Be&&!t.disabled){if(v.action=!0,le&&Array.isArray(wt(o,_e))){let V=Be(wt(o,_e),vt.argA,vt.argB);ut&&ri(o,_e,V)}if(le&&Array.isArray(wt(i.errors,_e))){let V=Be(wt(i.errors,_e),vt.argA,vt.argB);ut&&ri(i.errors,_e,V),MSt(i.errors,_e)}if((O.touchedFields||D.touchedFields)&&le&&Array.isArray(wt(i.touchedFields,_e))){let V=Be(wt(i.touchedFields,_e),vt.argA,vt.argB);ut&&ri(i.touchedFields,_e,V)}(O.dirtyFields||D.dirtyFields)&&(i.dirtyFields=S0(c,a)),U.state.next({name:_e,isDirty:Et(_e,ke),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else ri(a,_e,ke)},Ae=(_e,ke)=>{ri(i.errors,_e,ke),U.state.next({errors:i.errors})},Ge=_e=>{i.errors=_e,U.state.next({errors:i.errors,isValid:!1})},Ne=(_e,ke,Be,vt)=>{let ut=wt(o,_e);if(ut){let le=wt(a,_e,Zi(Be)?wt(c,_e):Be);Zi(le)||vt&&vt.defaultChecked||ke?ri(a,_e,ke?le:qge(ut._f)):ur(_e,le),v.mount&&J()}},Ye=(_e,ke,Be,vt,ut)=>{let le=!1,V=!1,W={name:_e};if(!t.disabled){if(!Be||vt){(O.isDirty||D.isDirty)&&(V=i.isDirty,i.isDirty=W.isDirty=Et(),le=V!==W.isDirty);let Y=rh(wt(c,_e),ke);V=!!wt(i.dirtyFields,_e),Y?on(i.dirtyFields,_e):ri(i.dirtyFields,_e,!0),W.dirtyFields=i.dirtyFields,le=le||(O.dirtyFields||D.dirtyFields)&&V!==!Y}if(Be){let Y=wt(i.touchedFields,_e);Y||(ri(i.touchedFields,_e,Be),W.touchedFields=i.touchedFields,le=le||(O.touchedFields||D.touchedFields)&&Y!==Be)}le&&ut&&U.state.next(W)}return le?W:{}},ct=(_e,ke,Be,vt)=>{let ut=wt(i.errors,_e),le=(O.isValid||D.isValid)&&yl(ke)&&i.isValid!==ke;if(t.delayError&&Be?(q=H(()=>Ae(_e,Be)),q(t.delayError)):(clearTimeout(M),q=null,Be?ri(i.errors,_e,Be):on(i.errors,_e)),(Be?!rh(ut,Be):ut)||!Ta(vt)||le){let V=en(rt(rt({},vt),le&&yl(ke)?{isValid:ke}:{}),{errors:i.errors,name:_e});i=rt(rt({},i),V),U.state.next(V)}},ht=_e=>br(null,null,function*(){re(_e,!0);let ke=yield t.resolver(a,t.context,ESt(_e||b.mount,o,t.criteriaMode,t.shouldUseNativeValidation));return re(_e),ke}),pr=_e=>br(null,null,function*(){let{errors:ke}=yield ht(_e);if(_e)for(let Be of _e){let vt=wt(ke,Be);vt?ri(i.errors,Be,vt):on(i.errors,Be)}else i.errors=ke;return ke}),Lr=(vt,ut,...le)=>br(null,[vt,ut,...le],function*(_e,ke,Be={valid:!0}){for(let W in _e){let Y=_e[W];if(Y){let V=Y,{_f:ae}=V,ve=Kf(V,["_f"]);if(ae){let be=b.array.has(ae.name),qe=Y._f&&ASt(Y._f);qe&&O.validatingFields&&re([W],!0);let we=yield Oge(Y,b.disabled,a,fe,t.shouldUseNativeValidation&&!ke,be);if(qe&&O.validatingFields&&re([W]),we[ae.name]&&(Be.valid=!1,ke))break;!ke&&(wt(we,ae.name)?be?RSt(i.errors,we,ae.name):ri(i.errors,ae.name,we[ae.name]):on(i.errors,ae.name))}!Ta(ve)&&(yield Lr(ve,ke,Be))}}return Be.valid}),Pt=()=>{for(let _e of b.unMount){let ke=wt(o,_e);ke&&(ke._f.refs?ke._f.refs.every(Be=>!HN(Be)):!HN(ke._f.ref))&&wo(_e)}b.unMount=new Set},Et=(_e,ke)=>!t.disabled&&(_e&&ke&&ri(a,_e,ke),!rh(Di(),c)),nr=(_e,ke,Be)=>xSt(_e,b,rt({},v.mount?a:Zi(ke)?c:_l(_e)?{[_e]:ke}:ke),Be,ke),Sr=_e=>xE(wt(v.mount?a:c,_e,t.shouldUnregister?wt(c,_e,[]):[])),ur=(_e,ke,Be={})=>{let vt=wt(o,_e),ut=ke;if(vt){let le=vt._f;le&&(!le.disabled&&ri(a,_e,Vge(ke,le)),ut=vE(le.ref)&&Ea(ke)?"":ke,Nge(le.ref)?[...le.ref.options].forEach(V=>V.selected=ut.includes(V.value)):le.refs?q0(le.ref)?le.refs.length>1?le.refs.forEach(V=>(!V.defaultChecked||!V.disabled)&&(V.checked=Array.isArray(ut)?!!ut.find(W=>W===V.value):ut===V.value)):le.refs[0]&&(le.refs[0].checked=!!ut):le.refs.forEach(V=>V.checked=V.value===ut):QN(le.ref)?le.ref.value="":(le.ref.value=ut,le.ref.type||U.state.next({name:_e,values:ta(a)})))}(Be.shouldDirty||Be.shouldTouch)&&Ye(_e,ut,Be.shouldTouch,Be.shouldDirty,!0),Be.shouldValidate&&Kr(_e)},Dt=(_e,ke,Be)=>{for(let vt in ke){let ut=ke[vt],le=`${_e}.${vt}`,V=wt(o,le);(b.array.has(_e)||Oi(ut)||V&&!V._f)&&!Ld(ut)?Dt(le,ut,Be):ur(le,ut,Be)}},Fr=(_e,ke,Be={})=>{let vt=wt(o,_e),ut=b.array.has(_e),le=ta(ke);ri(a,_e,le),ut?(U.array.next({name:_e,values:ta(a)}),(O.isDirty||O.dirtyFields||D.isDirty||D.dirtyFields)&&Be.shouldDirty&&U.state.next({name:_e,dirtyFields:S0(c,a),isDirty:Et(_e,le)})):vt&&!vt._f&&!Ea(le)?Dt(_e,le,Be):ur(_e,le,Be),Cge(_e,b)&&U.state.next(rt({},i)),U.state.next({name:v.mount?_e:void 0,values:ta(a)})},zr=_e=>br(null,null,function*(){v.mount=!0;let ke=_e.target,Be=ke.name,vt=!0,ut=wt(o,Be),le=V=>{vt=Number.isNaN(V)||Ld(V)&&isNaN(V.getTime())||rh(V,wt(a,Be,V))};if(ut){let V,W,Y=ke.type?qge(ut._f):pSt(_e),ae=_e.type===wge.BLUR||_e.type===wge.FOCUS_OUT,ve=!qSt(ut._f)&&!t.resolver&&!wt(i.errors,Be)&&!ut._f.deps||CSt(ae,wt(i.touchedFields,Be),i.isSubmitted,ue,ne),be=Cge(Be,b,ae);ri(a,Be,Y),ae?(ut._f.onBlur&&ut._f.onBlur(_e),q&&q(0)):ut._f.onChange&&ut._f.onChange(_e);let qe=Ye(Be,Y,ae),we=!Ta(qe)||be;if(!ae&&U.state.next({name:Be,type:_e.type,values:ta(a)}),ve)return(O.isValid||D.isValid)&&(t.mode==="onBlur"?ae&&J():ae||J()),we&&U.state.next(rt({name:Be},be?{}:qe));if(!ae&&be&&U.state.next(rt({},i)),t.resolver){let{errors:Le}=yield ht([Be]);if(le(Y),vt){let $e=Mge(i.errors,o,Be),ze=Mge(Le,o,$e.name||Be);V=ze.error,Be=ze.name,W=Ta(Le)}}else re([Be],!0),V=(yield Oge(ut,b.disabled,a,fe,t.shouldUseNativeValidation))[Be],re([Be]),le(Y),vt&&(V?W=!1:(O.isValid||D.isValid)&&(W=yield Lr(o,!0)));vt&&(ut._f.deps&&Kr(ut._f.deps),ct(Be,W,V,qe))}}),Bn=(_e,ke)=>{if(wt(i.errors,ke)&&_e.focus)return _e.focus(),1},Kr=(Be,...vt)=>br(null,[Be,...vt],function*(_e,ke={}){let ut,le,V=E0(_e);if(t.resolver){let W=yield pr(Zi(_e)?_e:V);ut=Ta(W),le=_e?!V.some(Y=>wt(W,Y)):ut}else _e?(le=(yield Promise.all(V.map(W=>br(null,null,function*(){let Y=wt(o,W);return yield Lr(Y&&Y._f?{[W]:Y}:Y)})))).every(Boolean),!(!le&&!i.isValid)&&J()):le=ut=yield Lr(o);return U.state.next(en(rt(rt({},!_l(_e)||(O.isValid||D.isValid)&&ut!==i.isValid?{}:{name:_e}),t.resolver||!_e?{isValid:ut}:{}),{errors:i.errors})),ke.shouldFocus&&!le&&A0(o,Bn,_e?V:b.mount),le}),Di=_e=>{let ke=rt({},v.mount?a:c);return Zi(_e)?ke:_l(_e)?wt(ke,_e):_e.map(Be=>wt(ke,Be))},jn=(_e,ke)=>({invalid:!!wt((ke||i).errors,_e),isDirty:!!wt((ke||i).dirtyFields,_e),error:wt((ke||i).errors,_e),isValidating:!!wt(i.validatingFields,_e),isTouched:!!wt((ke||i).touchedFields,_e)}),hi=_e=>{_e&&E0(_e).forEach(ke=>on(i.errors,ke)),U.state.next({errors:_e?i.errors:{}})},qa=(_e,ke,Be)=>{let vt=(wt(o,_e,{_f:{}})._f||{}).ref,ae=wt(i.errors,_e)||{},{ref:le,message:V,type:W}=ae,Y=Kf(ae,["ref","message","type"]);ri(i.errors,_e,en(rt(rt({},Y),ke),{ref:vt})),U.state.next({name:_e,errors:i.errors,isValid:!1}),Be&&Be.shouldFocus&&vt&&vt.focus&&vt.focus()},Un=(_e,ke)=>Ps(_e)?U.state.subscribe({next:Be=>_e(nr(void 0,ke),Be)}):nr(_e,ke,!0),Vn=_e=>U.state.subscribe({next:ke=>{PSt(_e.name,ke.name,_e.exact)&&ISt(ke,_e.formState||O,So,_e.reRenderRoot)&&_e.callback(rt(rt({values:rt({},a)},i),ke))}}).unsubscribe,ks=_e=>(v.mount=!0,D=rt(rt({},D),_e.formState),Vn(en(rt({},_e),{formState:D}))),wo=(_e,ke={})=>{for(let Be of _e?E0(_e):b.mount)b.mount.delete(Be),b.array.delete(Be),ke.keepValue||(on(o,Be),on(a,Be)),!ke.keepError&&on(i.errors,Be),!ke.keepDirty&&on(i.dirtyFields,Be),!ke.keepTouched&&on(i.touchedFields,Be),!ke.keepIsValidating&&on(i.validatingFields,Be),!t.shouldUnregister&&!ke.keepDefaultValue&&on(c,Be);U.state.next({values:ta(a)}),U.state.next(rt(rt({},i),ke.keepDirty?{isDirty:Et()}:{})),!ke.keepIsValid&&J()},ln=({disabled:_e,name:ke})=>{(yl(_e)&&v.mount||_e||b.disabled.has(ke))&&(_e?b.disabled.add(ke):b.disabled.delete(ke))},Rr=(_e,ke={})=>{let Be=wt(o,_e),vt=yl(ke.disabled)||yl(t.disabled);return ri(o,_e,en(rt({},Be||{}),{_f:rt(en(rt({},Be&&Be._f?Be._f:{ref:{name:_e}}),{name:_e,mount:!0}),ke)})),b.mount.add(_e),Be?ln({disabled:yl(ke.disabled)?ke.disabled:t.disabled,name:_e}):Ne(_e,!0,ke.value),en(rt(rt({},vt?{disabled:ke.disabled||t.disabled}:{}),t.progressive?{required:!!ke.required,min:T0(ke.min),max:T0(ke.max),minLength:T0(ke.minLength),maxLength:T0(ke.maxLength),pattern:T0(ke.pattern)}:{}),{name:_e,onChange:zr,onBlur:zr,ref:ut=>{if(ut){Rr(_e,ke),Be=wt(o,_e);let le=Zi(ut.value)&&ut.querySelectorAll&&ut.querySelectorAll("input,select,textarea")[0]||ut,V=wSt(le),W=Be._f.refs||[];if(V?W.find(Y=>Y===le):le===Be._f.ref)return;ri(o,_e,{_f:rt(rt({},Be._f),V?{refs:[...W.filter(HN),le,...(Array.isArray(wt(c,_e))?[{}]:[])],ref:{type:le.type,name:_e}}:{ref:le})}),Ne(_e,!1,void 0,le)}else Be=wt(o,_e,{}),Be._f&&(Be._f.mount=!1),(t.shouldUnregister||ke.shouldUnregister)&&!(vSt(b.array,_e)&&v.action)&&b.unMount.add(_e)}})},jr=()=>t.shouldFocusError&&A0(o,Bn,b.mount),sa=_e=>{yl(_e)&&(U.state.next({disabled:_e}),A0(o,(ke,Be)=>{let vt=wt(o,Be);vt&&(ke.disabled=vt._f.disabled||_e,Array.isArray(vt._f.refs)&&vt._f.refs.forEach(ut=>{ut.disabled=vt._f.disabled||_e}))},0,!1))},la=(_e,ke)=>Be=>br(null,null,function*(){let vt;Be&&(Be.preventDefault&&Be.preventDefault(),Be.persist&&Be.persist());let ut=ta(a);if(U.state.next({isSubmitting:!0}),t.resolver){let{errors:le,values:V}=yield ht();i.errors=le,ut=V}else yield Lr(o);if(b.disabled.size)for(let le of b.disabled)ri(ut,le,void 0);if(on(i.errors,"root"),Ta(i.errors)){U.state.next({errors:{}});try{yield _e(ut,Be)}catch(le){vt=le}}else ke&&(yield ke(rt({},i.errors),Be)),jr(),setTimeout(jr);if(U.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ta(i.errors)&&!vt,submitCount:i.submitCount+1,errors:i.errors}),vt)throw vt}),es=(_e,ke={})=>{wt(o,_e)&&(Zi(ke.defaultValue)?Fr(_e,ta(wt(c,_e))):(Fr(_e,ke.defaultValue),ri(c,_e,ta(ke.defaultValue))),ke.keepTouched||on(i.touchedFields,_e),ke.keepDirty||(on(i.dirtyFields,_e),i.isDirty=ke.defaultValue?Et(_e,ta(wt(c,_e))):Et()),ke.keepError||(on(i.errors,_e),O.isValid&&J()),U.state.next(rt({},i)))},ua=(_e,ke={})=>{let Be=_e?ta(_e):c,vt=ta(Be),ut=Ta(_e),le=ut?c:vt;if(ke.keepDefaultValues||(c=Be),!ke.keepValues){if(ke.keepDirtyValues){let V=new Set([...b.mount,...Object.keys(S0(c,a))]);for(let W of Array.from(V))wt(i.dirtyFields,W)?ri(le,W,wt(a,W)):Fr(W,wt(le,W))}else{if(YN&&Zi(_e))for(let V of b.mount){let W=wt(o,V);if(W&&W._f){let Y=Array.isArray(W._f.refs)?W._f.refs[0]:W._f.ref;if(vE(Y)){let ae=Y.closest("form");if(ae){ae.reset();break}}}}for(let V of b.mount)Fr(V,wt(le,V))}a=ta(le),U.array.next({values:rt({},le)}),U.state.next({values:rt({},le)})}b={mount:ke.keepDirtyValues?b.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},v.mount=!O.isValid||!!ke.keepIsValid||!!ke.keepDirtyValues,v.watch=!!t.shouldUnregister,U.state.next({submitCount:ke.keepSubmitCount?i.submitCount:0,isDirty:ut?!1:ke.keepDirty?i.isDirty:!!(ke.keepDefaultValues&&!rh(_e,c)),isSubmitted:ke.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:ut?{}:ke.keepDirtyValues?ke.keepDefaultValues&&a?S0(c,a):i.dirtyFields:ke.keepDefaultValues&&_e?S0(c,_e):ke.keepDirty?i.dirtyFields:{},touchedFields:ke.keepTouched?i.touchedFields:{},errors:ke.keepErrors?i.errors:{},isSubmitSuccessful:ke.keepIsSubmitSuccessful?i.isSubmitSuccessful:!1,isSubmitting:!1})},ca=(_e,ke)=>ua(Ps(_e)?_e(a):_e,ke),Ds=(_e,ke={})=>{let Be=wt(o,_e),vt=Be&&Be._f;if(vt){let ut=vt.refs?vt.refs[0]:vt.ref;ut.focus&&(ut.focus(),ke.shouldSelect&&Ps(ut.select)&&ut.select())}},So=_e=>{i=rt(rt({},i),_e)},Ya={control:{register:Rr,unregister:wo,getFieldState:jn,handleSubmit:la,setError:qa,_subscribe:Vn,_runSchema:ht,_getWatch:nr,_getDirty:Et,_setValid:J,_setFieldArray:xe,_setDisabledField:ln,_setErrors:Ge,_getFieldArray:Sr,_reset:ua,_resetDefaultValues:()=>Ps(t.defaultValues)&&t.defaultValues().then(_e=>{ca(_e,t.resetOptions),U.state.next({isLoading:!1})}),_removeUnmounted:Pt,_disableForm:sa,_subjects:U,_proxyFormState:O,get _fields(){return o},get _formValues(){return a},get _state(){return v},set _state(_e){v=_e},get _defaultValues(){return c},get _names(){return b},set _names(_e){b=_e},get _formState(){return i},get _options(){return t},set _options(_e){t=rt(rt({},t),_e)}},subscribe:ks,trigger:Kr,register:Rr,handleSubmit:la,watch:Un,setValue:Fr,getValues:Di,reset:ca,resetField:es,clearErrors:hi,unregister:wo,setError:qa,setFocus:Ds,getFieldState:jn};return en(rt({},Ya),{formControl:Ya})}function Gge(e={}){let t=_o.default.useRef(void 0),i=_o.default.useRef(void 0),[o,c]=_o.default.useState({isDirty:!1,isValidating:!1,isLoading:Ps(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ps(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=en(rt({},e.formControl?e.formControl:kSt(e)),{formState:o}),e.formControl&&e.defaultValues&&!Ps(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));let a=t.current.control;return a._options=e,_St(()=>{let v=a._subscribe({formState:a._proxyFormState,callback:()=>c(rt({},a._formState)),reRenderRoot:!0});return c(b=>en(rt({},b),{isReady:!0})),a._formState.isReady=!0,v},[a]),_o.default.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),_o.default.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode),e.errors&&!Ta(e.errors)&&a._setErrors(e.errors)},[a,e.errors,e.mode,e.reValidateMode]),_o.default.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),_o.default.useEffect(()=>{if(a._proxyFormState.isDirty){let v=a._getDirty();v!==o.isDirty&&a._subjects.state.next({isDirty:v})}},[a,o.isDirty]),_o.default.useEffect(()=>{e.values&&!rh(e.values,i.current)?(a._reset(e.values,a._options.resetOptions),i.current=e.values,c(v=>rt({},v))):a._resetDefaultValues()},[a,e.values]),_o.default.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next(rt({},a._formState))),a._removeUnmounted()}),t.current.formState=ySt(o,a),t.current}var nv=_t(ki(),1);f();var Za=_t(Pr(),1);var Wa=_t(ki(),1);f();var Qge=e=>{let t={};return Object.keys(e).forEach(i=>{e[i]!==void 0&&e[i]!==null&&(i==="time_of_publication"?t[i]=`${e[i]}-01-01T00:00:00`:i==="map_scale"?t[i]=Number(e[i]):i==="allow_download"?t[i]=e[i]==="true":t[i]=e[i])}),t},eye=(e,t)=>{let i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!0;for(let c of i)if(e[c]!==t[c])return!0;return!1},tye=(e,t)=>Object.keys(e).filter(i=>i.includes(t)).reduce((i,o)=>Object.assign(i,{error:e[o]}),{}),Eu={ok:e=>({data:e,error:null,httpErrorStatusCode:null}),error:e=>{let t=999;return e.response&&e.response.status&&(t=e.response.status),{data:null,error:e,httpErrorStatusCode:t}}};var FSt=e=>Object.keys(e).length>0,rye=({message:e})=>Za.default.createElement("div",null,Za.default.createElement("span",{className:"glyphicon glyphicon-exclamation-sign","aria-hidden":"true"}),Za.default.createElement("span",{className:"sr-only"},"Error:"),e);rye.propTypes={message:Wa.default.string};var iye=e=>{let{name:t,label:i,type:o,id:c,validation:a,multiline:v,options:b}=e,{register:q,formState:{errors:M}}=Fge(),O=tye(M,t),D=FSt(O);return Za.default.createElement(Za.default.Fragment,null,Za.default.createElement("div",{className:`error-label-container ${D?"show-error":""}`},Za.default.createElement("label",{htmlFor:c,className:"font-semibold capitalize body1"},i,a.required.value&&Za.default.createElement("span",{className:"required"},"*")),D&&Za.default.createElement(rye,{message:O.error.message,key:O.error.message})),v?Za.default.createElement("textarea",rt({className:"body2",name:t,id:c,rows:"6"},q(t,a))):b?Za.default.createElement("select",rt({className:"body2",name:t,id:c},q(t,a)),b.map(U=>Za.default.createElement("option",{value:U.value,key:U.label},U.label))):Za.default.createElement("input",rt({className:"body2",type:o,id:c},q(t,a))))};iye.propTypes={name:Wa.default.string.isRequired,label:Wa.default.string.isRequired,type:Wa.default.string,id:Wa.default.string.isRequired,validation:Wa.default.object.isRequired,multiline:Wa.default.bool,options:Wa.default.arrayOf(Wa.default.shape({value:Wa.default.oneOfType([Wa.default.bool,Wa.default.string]),label:Wa.default.string}))};var ra=iye;f();var Sl=_t(Pr(),1),PB=_t(ki(),1);f();var B0=_t(iB(),1);f();f();f();f();f();function I0(e,t){return function(){return e.apply(t,arguments)}}var{toString:zSt}=Object.prototype,{getPrototypeOf:aB}=Object,{iterator:wE,toStringTag:oye}=Symbol,SE=(e=>t=>{let i=zSt.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Cs=e=>(e=e.toLowerCase(),t=>SE(t)===e),TE=e=>t=>typeof t===e,{isArray:jm}=Array,Bm=TE("undefined");function P0(e){return e!==null&&!Bm(e)&&e.constructor!==null&&!Bm(e.constructor)&&Ka(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var sye=Cs("ArrayBuffer");function NSt(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&sye(e.buffer),t}var BSt=TE("string"),Ka=TE("function"),lye=TE("number"),C0=e=>e!==null&&typeof e=="object",jSt=e=>e===!0||e===!1,bE=e=>{if(SE(e)!=="object")return!1;let t=aB(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(oye in e)&&!(wE in e)},USt=e=>{if(!C0(e)||P0(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},VSt=Cs("Date"),$St=Cs("File"),GSt=Cs("Blob"),WSt=Cs("FileList"),ZSt=e=>C0(e)&&Ka(e.pipe),KSt=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ka(e.append)&&((t=SE(e))==="formdata"||t==="object"&&Ka(e.toString)&&e.toString()==="[object FormData]"))},HSt=Cs("URLSearchParams"),[XSt,YSt,JSt,QSt]=["ReadableStream","Request","Response","Headers"].map(Cs),eTt=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function M0(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e=="undefined")return;let o,c;if(typeof e!="object"&&(e=[e]),jm(e))for(o=0,c=e.length;o<c;o++)t.call(null,e[o],o,e);else{if(P0(e))return;let a=i?Object.getOwnPropertyNames(e):Object.keys(e),v=a.length,b;for(o=0;o<v;o++)b=a[o],t.call(null,e[b],b,e)}}function uye(e,t){if(P0(e))return null;t=t.toLowerCase();let i=Object.keys(e),o=i.length,c;for(;o-->0;)if(c=i[o],t===c.toLowerCase())return c;return null}var Fd=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,cye=e=>!Bm(e)&&e!==Fd;function nB(){let{caseless:e,skipUndefined:t}=cye(this)&&this||{},i={},o=(c,a)=>{let v=e&&uye(i,a)||a;bE(i[v])&&bE(c)?i[v]=nB(i[v],c):bE(c)?i[v]=nB({},c):jm(c)?i[v]=c.slice():(!t||!Bm(c))&&(i[v]=c)};for(let c=0,a=arguments.length;c<a;c++)arguments[c]&&M0(arguments[c],o);return i}var tTt=(e,t,i,{allOwnKeys:o}={})=>(M0(t,(c,a)=>{i&&Ka(c)?e[a]=I0(c,i):e[a]=c},{allOwnKeys:o}),e),rTt=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),iTt=(e,t,i,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},nTt=(e,t,i,o)=>{let c,a,v,b={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),a=c.length;a-->0;)v=c[a],(!o||o(v,e,t))&&!b[v]&&(t[v]=e[v],b[v]=!0);e=i!==!1&&aB(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},aTt=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;let o=e.indexOf(t,i);return o!==-1&&o===i},oTt=e=>{if(!e)return null;if(jm(e))return e;let t=e.length;if(!lye(t))return null;let i=new Array(t);for(;t-->0;)i[t]=e[t];return i},sTt=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&aB(Uint8Array)),lTt=(e,t)=>{let o=(e&&e[wE]).call(e),c;for(;(c=o.next())&&!c.done;){let a=c.value;t.call(e,a[0],a[1])}},uTt=(e,t)=>{let i,o=[];for(;(i=e.exec(t))!==null;)o.push(i);return o},cTt=Cs("HTMLFormElement"),hTt=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,o,c){return o.toUpperCase()+c}),aye=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),dTt=Cs("RegExp"),hye=(e,t)=>{let i=Object.getOwnPropertyDescriptors(e),o={};M0(i,(c,a)=>{let v;(v=t(c,a,e))!==!1&&(o[a]=v||c)}),Object.defineProperties(e,o)},fTt=e=>{hye(e,(t,i)=>{if(Ka(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;let o=e[i];if(Ka(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},pTt=(e,t)=>{let i={},o=c=>{c.forEach(a=>{i[a]=!0})};return jm(e)?o(e):o(String(e).split(t)),i},mTt=()=>{},vTt=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function gTt(e){return!!(e&&Ka(e.append)&&e[oye]==="FormData"&&e[wE])}var yTt=e=>{let t=new Array(10),i=(o,c)=>{if(C0(o)){if(t.indexOf(o)>=0)return;if(P0(o))return o;if(!("toJSON"in o)){t[c]=o;let a=jm(o)?[]:{};return M0(o,(v,b)=>{let q=i(v,c+1);!Bm(q)&&(a[b]=q)}),t[c]=void 0,a}}return o};return i(e,0)},_Tt=Cs("AsyncFunction"),xTt=e=>e&&(C0(e)||Ka(e))&&Ka(e.then)&&Ka(e.catch),dye=((e,t)=>e?setImmediate:t?((i,o)=>(Fd.addEventListener("message",({source:c,data:a})=>{c===Fd&&a===i&&o.length&&o.shift()()},!1),c=>{o.push(c),Fd.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Ka(Fd.postMessage)),bTt=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Fd):typeof T!="undefined"&&T.nextTick||dye,wTt=e=>e!=null&&Ka(e[wE]),Me={isArray:jm,isArrayBuffer:sye,isBuffer:P0,isFormData:KSt,isArrayBufferView:NSt,isString:BSt,isNumber:lye,isBoolean:jSt,isObject:C0,isPlainObject:bE,isEmptyObject:USt,isReadableStream:XSt,isRequest:YSt,isResponse:JSt,isHeaders:QSt,isUndefined:Bm,isDate:VSt,isFile:$St,isBlob:GSt,isRegExp:dTt,isFunction:Ka,isStream:ZSt,isURLSearchParams:HSt,isTypedArray:sTt,isFileList:WSt,forEach:M0,merge:nB,extend:tTt,trim:eTt,stripBOM:rTt,inherits:iTt,toFlatObject:nTt,kindOf:SE,kindOfTest:Cs,endsWith:aTt,toArray:oTt,forEachEntry:lTt,matchAll:uTt,isHTMLForm:cTt,hasOwnProperty:aye,hasOwnProp:aye,reduceDescriptors:hye,freezeMethods:fTt,toObjectSet:pTt,toCamelCase:hTt,noop:mTt,toFiniteNumber:vTt,findKey:uye,global:Fd,isContextDefined:cye,isSpecCompliantForm:gTt,toJSONObject:yTt,isAsyncFn:_Tt,isThenable:xTt,setImmediate:dye,asap:bTt,isIterable:wTt};f();f();f();f();f();function Um(e,t,i,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),o&&(this.request=o),c&&(this.response=c,this.status=c.status?c.status:null)}Me.inherits(Um,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Me.toJSONObject(this.config),code:this.code,status:this.status}}});var fye=Um.prototype,pye={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pye[e]={value:e}});Object.defineProperties(Um,pye);Object.defineProperty(fye,"isAxiosError",{value:!0});Um.from=(e,t,i,o,c,a)=>{let v=Object.create(fye);Me.toFlatObject(e,v,function(O){return O!==Error.prototype},M=>M!=="isAxiosError");let b=e&&e.message?e.message:"Error",q=t==null&&e?e.code:t;return Um.call(v,b,q,i,o,c),e&&v.cause==null&&Object.defineProperty(v,"cause",{value:e,configurable:!0}),v.name=e&&e.name||"Error",a&&Object.assign(v,a),v};var Vt=Um;f();var EE=null;function oB(e){return Me.isPlainObject(e)||Me.isArray(e)}function vye(e){return Me.endsWith(e,"[]")?e.slice(0,-2):e}function mye(e,t,i){return e?e.concat(t).map(function(c,a){return c=vye(c),!i&&a?"["+c+"]":c}).join(i?".":""):t}function STt(e){return Me.isArray(e)&&!e.some(oB)}var TTt=Me.toFlatObject(Me,{},null,function(t){return /^is[A-Z]/.test(t)});function ETt(e,t,i){if(!Me.isObject(e))throw new TypeError("target must be an object");t=t||new(EE||FormData),i=Me.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(fe,H){return!Me.isUndefined(H[fe])});let o=i.metaTokens,c=i.visitor||O,a=i.dots,v=i.indexes,q=(i.Blob||typeof Blob!="undefined"&&Blob)&&Me.isSpecCompliantForm(t);if(!Me.isFunction(c))throw new TypeError("visitor must be a function");function M(ue){if(ue===null)return"";if(Me.isDate(ue))return ue.toISOString();if(Me.isBoolean(ue))return ue.toString();if(!q&&Me.isBlob(ue))throw new Vt("Blob is not supported. Use a Buffer instead.");return Me.isArrayBuffer(ue)||Me.isTypedArray(ue)?q&&typeof Blob=="function"?new Blob([ue]):Buffer.from(ue):ue}function O(ue,fe,H){let J=ue;if(ue&&!H&&typeof ue=="object"){if(Me.endsWith(fe,"{}"))fe=o?fe:fe.slice(0,-2),ue=JSON.stringify(ue);else if(Me.isArray(ue)&&STt(ue)||(Me.isFileList(ue)||Me.endsWith(fe,"[]"))&&(J=Me.toArray(ue)))return fe=vye(fe),J.forEach(function(xe,Ae){!(Me.isUndefined(xe)||xe===null)&&t.append(v===!0?mye([fe],Ae,a):v===null?fe:fe+"[]",M(xe))}),!1}return oB(ue)?!0:(t.append(mye(H,fe,a),M(ue)),!1)}let D=[],U=Object.assign(TTt,{defaultVisitor:O,convertValue:M,isVisitable:oB});function ne(ue,fe){if(!Me.isUndefined(ue)){if(D.indexOf(ue)!==-1)throw Error("Circular reference detected in "+fe.join("."));D.push(ue),Me.forEach(ue,function(J,re){(!(Me.isUndefined(J)||J===null)&&c.call(t,J,Me.isString(re)?re.trim():re,fe,U))===!0&&ne(J,fe?fe.concat(re):[re])}),D.pop()}}if(!Me.isObject(e))throw new TypeError("data must be an object");return ne(e),t}var ih=ETt;function gye(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function yye(e,t){this._pairs=[],e&&ih(e,this,t)}var _ye=yye.prototype;_ye.append=function(t,i){this._pairs.push([t,i])};_ye.toString=function(t){let i=t?function(o){return t.call(this,o,gye)}:gye;return this._pairs.map(function(c){return i(c[0])+"="+i(c[1])},"").join("&")};var AE=yye;function ATt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function R0(e,t,i){if(!t)return e;let o=i&&i.encode||ATt;Me.isFunction(i)&&(i={serialize:i});let c=i&&i.serialize,a;if(c?a=c(t,i):a=Me.isURLSearchParams(t)?t.toString():new AE(t,i).toString(o),a){let v=e.indexOf("#");v!==-1&&(e=e.slice(0,v)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}f();var sB=class{constructor(){this.handlers=[]}use(t,i,o){return this.handlers.push({fulfilled:t,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Me.forEach(this.handlers,function(o){o!==null&&t(o)})}},lB=sB;f();f();f();f();var qE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};f();f();f();f();var xye=typeof URLSearchParams!="undefined"?URLSearchParams:AE;f();var bye=typeof FormData!="undefined"?FormData:null;f();var wye=typeof Blob!="undefined"?Blob:null;var Sye={isBrowser:!0,classes:{URLSearchParams:xye,FormData:bye,Blob:wye},protocols:["http","https","file","blob","url","data"]};var hB={};PU(hB,{hasBrowserEnv:()=>cB,hasStandardBrowserEnv:()=>qTt,hasStandardBrowserWebWorkerEnv:()=>ITt,navigator:()=>uB,origin:()=>PTt});f();var cB=typeof window!="undefined"&&typeof document!="undefined",uB=typeof navigator=="object"&&navigator||void 0,qTt=cB&&(!uB||["ReactNative","NativeScript","NS"].indexOf(uB.product)<0),ITt=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",PTt=cB&&window.location.href||"http://localhost";var pi=rt(rt({},hB),Sye);function dB(e,t){return ih(e,new pi.classes.URLSearchParams,rt({visitor:function(i,o,c,a){return pi.isNode&&Me.isBuffer(i)?(this.append(o,i.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}f();function CTt(e){return Me.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function MTt(e){let t={},i=Object.keys(e),o,c=i.length,a;for(o=0;o<c;o++)a=i[o],t[a]=e[a];return t}function RTt(e){function t(i,o,c,a){let v=i[a++];if(v==="__proto__")return!0;let b=Number.isFinite(+v),q=a>=i.length;return v=!v&&Me.isArray(c)?c.length:v,q?(Me.hasOwnProp(c,v)?c[v]=[c[v],o]:c[v]=o,!b):((!c[v]||!Me.isObject(c[v]))&&(c[v]=[]),t(i,o,c[v],a)&&Me.isArray(c[v])&&(c[v]=MTt(c[v])),!b)}if(Me.isFormData(e)&&Me.isFunction(e.entries)){let i={};return Me.forEachEntry(e,(o,c)=>{t(CTt(o),c,i,0)}),i}return null}var IE=RTt;function OTt(e,t,i){if(Me.isString(e))try{return(t||JSON.parse)(e),Me.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(e)}var fB={transitional:qE,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){let o=i.getContentType()||"",c=o.indexOf("application/json")>-1,a=Me.isObject(t);if(a&&Me.isHTMLForm(t)&&(t=new FormData(t)),Me.isFormData(t))return c?JSON.stringify(IE(t)):t;if(Me.isArrayBuffer(t)||Me.isBuffer(t)||Me.isStream(t)||Me.isFile(t)||Me.isBlob(t)||Me.isReadableStream(t))return t;if(Me.isArrayBufferView(t))return t.buffer;if(Me.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let b;if(a){if(o.indexOf("application/x-www-form-urlencoded")>-1)return dB(t,this.formSerializer).toString();if((b=Me.isFileList(t))||o.indexOf("multipart/form-data")>-1){let q=this.env&&this.env.FormData;return ih(b?{"files[]":t}:t,q&&new q,this.formSerializer)}}return a||c?(i.setContentType("application/json",!1),OTt(t)):t}],transformResponse:[function(t){let i=this.transitional||fB.transitional,o=i&&i.forcedJSONParsing,c=this.responseType==="json";if(Me.isResponse(t)||Me.isReadableStream(t))return t;if(t&&Me.isString(t)&&(o&&!this.responseType||c)){let v=!(i&&i.silentJSONParsing)&&c;try{return JSON.parse(t,this.parseReviver)}catch(b){if(v)throw b.name==="SyntaxError"?Vt.from(b,Vt.ERR_BAD_RESPONSE,this,null,this.response):b}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pi.classes.FormData,Blob:pi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Me.forEach(["delete","get","head","post","put","patch"],e=>{fB.headers[e]={}});var Vm=fB;f();f();var kTt=Me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tye=e=>{let t={},i,o,c;return e&&e.split(`
`).forEach(function(v){c=v.indexOf(":"),i=v.substring(0,c).trim().toLowerCase(),o=v.substring(c+1).trim(),!(!i||t[i]&&kTt[i])&&(i==="set-cookie"?t[i]?t[i].push(o):t[i]=[o]:t[i]=t[i]?t[i]+", "+o:o)}),t};var Eye=Symbol("internals");function O0(e){return e&&String(e).trim().toLowerCase()}function PE(e){return e===!1||e==null?e:Me.isArray(e)?e.map(PE):String(e)}function DTt(e){let t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,o;for(;o=i.exec(e);)t[o[1]]=o[2];return t}var LTt=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function pB(e,t,i,o,c){if(Me.isFunction(o))return o.call(this,t,i);if(c&&(t=i),!!Me.isString(t)){if(Me.isString(o))return t.indexOf(o)!==-1;if(Me.isRegExp(o))return o.test(t)}}function FTt(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,o)=>i.toUpperCase()+o)}function zTt(e,t){let i=Me.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+i,{value:function(c,a,v){return this[o].call(this,t,c,a,v)},configurable:!0})})}var $m=class{constructor(t){t&&this.set(t)}set(t,i,o){let c=this;function a(b,q,M){let O=O0(q);if(!O)throw new Error("header name must be a non-empty string");let D=Me.findKey(c,O);(!D||c[D]===void 0||M===!0||M===void 0&&c[D]!==!1)&&(c[D||q]=PE(b))}let v=(b,q)=>Me.forEach(b,(M,O)=>a(M,O,q));if(Me.isPlainObject(t)||t instanceof this.constructor)v(t,i);else if(Me.isString(t)&&(t=t.trim())&&!LTt(t))v(Tye(t),i);else if(Me.isObject(t)&&Me.isIterable(t)){let b={},q,M;for(let O of t){if(!Me.isArray(O))throw TypeError("Object iterator must return a key-value pair");b[M=O[0]]=(q=b[M])?Me.isArray(q)?[...q,O[1]]:[q,O[1]]:O[1]}v(b,i)}else t!=null&&a(i,t,o);return this}get(t,i){if(t=O0(t),t){let o=Me.findKey(this,t);if(o){let c=this[o];if(!i)return c;if(i===!0)return DTt(c);if(Me.isFunction(i))return i.call(this,c,o);if(Me.isRegExp(i))return i.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=O0(t),t){let o=Me.findKey(this,t);return!!(o&&this[o]!==void 0&&(!i||pB(this,this[o],o,i)))}return!1}delete(t,i){let o=this,c=!1;function a(v){if(v=O0(v),v){let b=Me.findKey(o,v);b&&(!i||pB(o,o[b],b,i))&&(delete o[b],c=!0)}}return Me.isArray(t)?t.forEach(a):a(t),c}clear(t){let i=Object.keys(this),o=i.length,c=!1;for(;o--;){let a=i[o];(!t||pB(this,this[a],a,t,!0))&&(delete this[a],c=!0)}return c}normalize(t){let i=this,o={};return Me.forEach(this,(c,a)=>{let v=Me.findKey(o,a);if(v){i[v]=PE(c),delete i[a];return}let b=t?FTt(a):String(a).trim();b!==a&&delete i[a],i[b]=PE(c),o[b]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let i=Object.create(null);return Me.forEach(this,(o,c)=>{o!=null&&o!==!1&&(i[c]=t&&Me.isArray(o)?o.join(", "):o)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){let o=new this(t);return i.forEach(c=>o.set(c)),o}static accessor(t){let o=(this[Eye]=this[Eye]={accessors:{}}).accessors,c=this.prototype;function a(v){let b=O0(v);o[b]||(zTt(c,v),o[b]=!0)}return Me.isArray(t)?t.forEach(a):a(t),this}};$m.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Me.reduceDescriptors($m.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[i]=o}}});Me.freezeMethods($m);var sn=$m;function k0(e,t){let i=this||Vm,o=t||i,c=sn.from(o.headers),a=o.data;return Me.forEach(e,function(b){a=b.call(i,a,c.normalize(),t?t.status:void 0)}),c.normalize(),a}f();function D0(e){return!!(e&&e.__CANCEL__)}f();function Aye(e,t,i){Vt.call(this,e==null?"canceled":e,Vt.ERR_CANCELED,t,i),this.name="CanceledError"}Me.inherits(Aye,Vt,{__CANCEL__:!0});var xl=Aye;f();f();f();function L0(e,t,i){let o=i.config.validateStatus;!i.status||!o||o(i.status)?e(i):t(new Vt("Request failed with status code "+i.status,[Vt.ERR_BAD_REQUEST,Vt.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}f();function mB(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}f();f();function NTt(e,t){e=e||10;let i=new Array(e),o=new Array(e),c=0,a=0,v;return t=t!==void 0?t:1e3,function(q){let M=Date.now(),O=o[a];v||(v=M),i[c]=q,o[c]=M;let D=a,U=0;for(;D!==c;)U+=i[D++],D=D%e;if(c=(c+1)%e,c===a&&(a=(a+1)%e),M-v<t)return;let ne=O&&M-O;return ne?Math.round(U*1e3/ne):void 0}}var qye=NTt;f();function BTt(e,t){let i=0,o=1e3/t,c,a,v=(M,O=Date.now())=>{i=O,c=null,a&&(clearTimeout(a),a=null),e(...M)};return[(...M)=>{let O=Date.now(),D=O-i;D>=o?v(M,O):(c=M,a||(a=setTimeout(()=>{a=null,v(c)},o-D)))},()=>c&&v(c)]}var Iye=BTt;var Gm=(e,t,i=3)=>{let o=0,c=qye(50,250);return Iye(a=>{let v=a.loaded,b=a.lengthComputable?a.total:void 0,q=v-o,M=c(q),O=v<=b;o=v;let D={loaded:v,total:b,progress:b?v/b:void 0,bytes:q,rate:M||void 0,estimated:M&&b&&O?(b-v)/M:void 0,event:a,lengthComputable:b!=null,[t?"download":"upload"]:!0};e(D)},i)},vB=(e,t)=>{let i=e!=null;return[o=>t[0]({lengthComputable:i,total:e,loaded:o}),t[1]]},gB=e=>(...t)=>Me.asap(()=>e(...t));f();f();var Pye=pi.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,pi.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(pi.origin),pi.navigator&&/(msie|trident)/i.test(pi.navigator.userAgent)):()=>!0;f();var Cye=pi.hasStandardBrowserEnv?{write(e,t,i,o,c,a){let v=[e+"="+encodeURIComponent(t)];Me.isNumber(i)&&v.push("expires="+new Date(i).toGMTString()),Me.isString(o)&&v.push("path="+o),Me.isString(c)&&v.push("domain="+c),a===!0&&v.push("secure"),document.cookie=v.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};f();f();function yB(e){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}f();function _B(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function F0(e,t,i){let o=!yB(t);return e&&(o||i==!1)?_B(e,t):t}f();var Mye=e=>e instanceof sn?rt({},e):e;function Ms(e,t){t=t||{};let i={};function o(M,O,D,U){return Me.isPlainObject(M)&&Me.isPlainObject(O)?Me.merge.call({caseless:U},M,O):Me.isPlainObject(O)?Me.merge({},O):Me.isArray(O)?O.slice():O}function c(M,O,D,U){if(Me.isUndefined(O)){if(!Me.isUndefined(M))return o(void 0,M,D,U)}else return o(M,O,D,U)}function a(M,O){if(!Me.isUndefined(O))return o(void 0,O)}function v(M,O){if(Me.isUndefined(O)){if(!Me.isUndefined(M))return o(void 0,M)}else return o(void 0,O)}function b(M,O,D){if(D in t)return o(M,O);if(D in e)return o(void 0,M)}let q={url:a,method:a,data:a,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,withXSRFToken:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,beforeRedirect:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:b,headers:(M,O,D)=>c(Mye(M),Mye(O),D,!0)};return Me.forEach(Object.keys(rt(rt({},e),t)),function(O){let D=q[O]||c,U=D(e[O],t[O],O);Me.isUndefined(U)&&D!==b||(i[O]=U)}),i}var CE=e=>{let t=Ms({},e),{data:i,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:a,headers:v,auth:b}=t;if(t.headers=v=sn.from(v),t.url=R0(F0(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),b&&v.set("Authorization","Basic "+btoa((b.username||"")+":"+(b.password?unescape(encodeURIComponent(b.password)):""))),Me.isFormData(i)){if(pi.hasStandardBrowserEnv||pi.hasStandardBrowserWebWorkerEnv)v.setContentType(void 0);else if(Me.isFunction(i.getHeaders)){let q=i.getHeaders(),M=["content-type","content-length"];Object.entries(q).forEach(([O,D])=>{M.includes(O.toLowerCase())&&v.set(O,D)})}}if(pi.hasStandardBrowserEnv&&(o&&Me.isFunction(o)&&(o=o(t)),o||o!==!1&&Pye(t.url))){let q=c&&a&&Cye.read(a);q&&v.set(c,q)}return t};var jTt=typeof XMLHttpRequest!="undefined",Rye=jTt&&function(e){return new Promise(function(i,o){let c=CE(e),a=c.data,v=sn.from(c.headers).normalize(),{responseType:b,onUploadProgress:q,onDownloadProgress:M}=c,O,D,U,ne,ue;function fe(){ne&&ne(),ue&&ue(),c.cancelToken&&c.cancelToken.unsubscribe(O),c.signal&&c.signal.removeEventListener("abort",O)}let H=new XMLHttpRequest;H.open(c.method.toUpperCase(),c.url,!0),H.timeout=c.timeout;function J(){if(!H)return;let xe=sn.from("getAllResponseHeaders"in H&&H.getAllResponseHeaders()),Ge={data:!b||b==="text"||b==="json"?H.responseText:H.response,status:H.status,statusText:H.statusText,headers:xe,config:e,request:H};L0(function(Ye){i(Ye),fe()},function(Ye){o(Ye),fe()},Ge),H=null}"onloadend"in H?H.onloadend=J:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(J)},H.onabort=function(){H&&(o(new Vt("Request aborted",Vt.ECONNABORTED,e,H)),H=null)},H.onerror=function(Ae){let Ge=Ae&&Ae.message?Ae.message:"Network Error",Ne=new Vt(Ge,Vt.ERR_NETWORK,e,H);Ne.event=Ae||null,o(Ne),H=null},H.ontimeout=function(){let Ae=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",Ge=c.transitional||qE;c.timeoutErrorMessage&&(Ae=c.timeoutErrorMessage),o(new Vt(Ae,Ge.clarifyTimeoutError?Vt.ETIMEDOUT:Vt.ECONNABORTED,e,H)),H=null},a===void 0&&v.setContentType(null),"setRequestHeader"in H&&Me.forEach(v.toJSON(),function(Ae,Ge){H.setRequestHeader(Ge,Ae)}),Me.isUndefined(c.withCredentials)||(H.withCredentials=!!c.withCredentials),b&&b!=="json"&&(H.responseType=c.responseType),M&&([U,ue]=Gm(M,!0),H.addEventListener("progress",U)),q&&H.upload&&([D,ne]=Gm(q),H.upload.addEventListener("progress",D),H.upload.addEventListener("loadend",ne)),(c.cancelToken||c.signal)&&(O=xe=>{H&&(o(!xe||xe.type?new xl(null,e,H):xe),H.abort(),H=null)},c.cancelToken&&c.cancelToken.subscribe(O),c.signal&&(c.signal.aborted?O():c.signal.addEventListener("abort",O)));let re=mB(c.url);if(re&&pi.protocols.indexOf(re)===-1){o(new Vt("Unsupported protocol "+re+":",Vt.ERR_BAD_REQUEST,e));return}H.send(a||null)})};f();f();var UTt=(e,t)=>{let{length:i}=e=e?e.filter(Boolean):[];if(t||i){let o=new AbortController,c,a=function(M){if(!c){c=!0,b();let O=M instanceof Error?M:this.reason;o.abort(O instanceof Vt?O:new xl(O instanceof Error?O.message:O))}},v=t&&setTimeout(()=>{v=null,a(new Vt(`timeout ${t} of ms exceeded`,Vt.ETIMEDOUT))},t),b=()=>{e&&(v&&clearTimeout(v),v=null,e.forEach(M=>{M.unsubscribe?M.unsubscribe(a):M.removeEventListener("abort",a)}),e=null)};e.forEach(M=>M.addEventListener("abort",a));let{signal:q}=o;return q.unsubscribe=()=>Me.asap(b),q}},Oye=UTt;f();var VTt=function*(e,t){let i=e.byteLength;if(!t||i<t){yield e;return}let o=0,c;for(;o<i;)c=o+t,yield e.slice(o,c),o=c},$Tt=function(e,t){return TI(this,null,function*(){try{for(var i=MU(GTt(e)),o,c,a;o=!(c=yield new Vh(i.next())).done;o=!1){let v=c.value;yield*EI(VTt(v,t))}}catch(c){a=[c]}finally{try{o&&(c=i.return)&&(yield new Vh(c.call(i)))}finally{if(a)throw a[0]}}})},GTt=function(e){return TI(this,null,function*(){if(e[Symbol.asyncIterator]){yield*EI(e);return}let t=e.getReader();try{for(;;){let{done:i,value:o}=yield new Vh(t.read());if(i)break;yield o}}finally{yield new Vh(t.cancel())}})},xB=(e,t,i,o)=>{let c=$Tt(e,t),a=0,v,b=M=>{v||(v=!0,o&&o(M))};return new ReadableStream({pull(M){return br(this,null,function*(){try{let{done:O,value:D}=yield c.next();if(O){b(),M.close();return}let U=D.byteLength;if(i){let ne=a+=U;i(ne)}M.enqueue(new Uint8Array(D))}catch(O){throw b(O),O}})},cancel(M){return b(M),c.return()}},{highWaterMark:2})};var kye=64*1024,{isFunction:ME}=Me,WTt=(({Request:e,Response:t})=>({Request:e,Response:t}))(Me.global),{ReadableStream:Dye,TextEncoder:Lye}=Me.global,Fye=(e,...t)=>{try{return!!e(...t)}catch(i){return!1}},ZTt=e=>{e=Me.merge.call({skipUndefined:!0},WTt,e);let{fetch:t,Request:i,Response:o}=e,c=t?ME(t):typeof fetch=="function",a=ME(i),v=ME(o);if(!c)return!1;let b=c&&ME(Dye),q=c&&(typeof Lye=="function"?(ue=>fe=>ue.encode(fe))(new Lye):ue=>br(null,null,function*(){return new Uint8Array(yield new i(ue).arrayBuffer())})),M=a&&b&&Fye(()=>{let ue=!1,fe=new i(pi.origin,{body:new Dye,method:"POST",get duplex(){return ue=!0,"half"}}).headers.has("Content-Type");return ue&&!fe}),O=v&&b&&Fye(()=>Me.isReadableStream(new o("").body)),D={stream:O&&(ue=>ue.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(ue=>{!D[ue]&&(D[ue]=(fe,H)=>{let J=fe&&fe[ue];if(J)return J.call(fe);throw new Vt(`Response type '${ue}' is not supported`,Vt.ERR_NOT_SUPPORT,H)})});let U=ue=>br(null,null,function*(){if(ue==null)return 0;if(Me.isBlob(ue))return ue.size;if(Me.isSpecCompliantForm(ue))return(yield new i(pi.origin,{method:"POST",body:ue}).arrayBuffer()).byteLength;if(Me.isArrayBufferView(ue)||Me.isArrayBuffer(ue))return ue.byteLength;if(Me.isURLSearchParams(ue)&&(ue=ue+""),Me.isString(ue))return(yield q(ue)).byteLength}),ne=(ue,fe)=>br(null,null,function*(){let H=Me.toFiniteNumber(ue.getContentLength());return H==null?U(fe):H});return ue=>br(null,null,function*(){let{url:fe,method:H,data:J,signal:re,cancelToken:xe,timeout:Ae,onDownloadProgress:Ge,onUploadProgress:Ne,responseType:Ye,headers:ct,withCredentials:ht="same-origin",fetchOptions:pr}=CE(ue),Lr=t||fetch;Ye=Ye?(Ye+"").toLowerCase():"text";let Pt=Oye([re,xe&&xe.toAbortSignal()],Ae),Et=null,nr=Pt&&Pt.unsubscribe&&(()=>{Pt.unsubscribe()}),Sr;try{if(Ne&&M&&H!=="get"&&H!=="head"&&(Sr=yield ne(ct,J))!==0){let Kr=new i(fe,{method:"POST",body:J,duplex:"half"}),Di;if(Me.isFormData(J)&&(Di=Kr.headers.get("content-type"))&&ct.setContentType(Di),Kr.body){let[jn,hi]=vB(Sr,Gm(gB(Ne)));J=xB(Kr.body,kye,jn,hi)}}Me.isString(ht)||(ht=ht?"include":"omit");let ur=a&&"credentials"in i.prototype,Dt=en(rt({},pr),{signal:Pt,method:H.toUpperCase(),headers:ct.normalize().toJSON(),body:J,duplex:"half",credentials:ur?ht:void 0});Et=a&&new i(fe,Dt);let Fr=yield a?Lr(Et,pr):Lr(fe,Dt),zr=O&&(Ye==="stream"||Ye==="response");if(O&&(Ge||zr&&nr)){let Kr={};["status","statusText","headers"].forEach(qa=>{Kr[qa]=Fr[qa]});let Di=Me.toFiniteNumber(Fr.headers.get("content-length")),[jn,hi]=Ge&&vB(Di,Gm(gB(Ge),!0))||[];Fr=new o(xB(Fr.body,kye,jn,()=>{hi&&hi(),nr&&nr()}),Kr)}Ye=Ye||"text";let Bn=yield D[Me.findKey(D,Ye)||"text"](Fr,ue);return!zr&&nr&&nr(),yield new Promise((Kr,Di)=>{L0(Kr,Di,{data:Bn,headers:sn.from(Fr.headers),status:Fr.status,statusText:Fr.statusText,config:ue,request:Et})})}catch(ur){throw nr&&nr(),ur&&ur.name==="TypeError"&&/Load failed|fetch/i.test(ur.message)?Object.assign(new Vt("Network Error",Vt.ERR_NETWORK,ue,Et),{cause:ur.cause||ur}):Vt.from(ur,ur&&ur.code,ue,Et)}})},KTt=new Map,bB=e=>{let t=e?e.env:{},{fetch:i,Request:o,Response:c}=t,a=[o,c,i],v=a.length,b=v,q,M,O=KTt;for(;b--;)q=a[b],M=O.get(q),M===void 0&&O.set(q,M=b?new Map:ZTt(t)),O=M;return M},fpr=bB();var wB={http:EE,xhr:Rye,fetch:{get:bB}};Me.forEach(wB,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(i){}Object.defineProperty(e,"adapterName",{value:t})}});var zye=e=>`- ${e}`,XTt=e=>Me.isFunction(e)||e===null||e===!1,RE={getAdapter:(e,t)=>{e=Me.isArray(e)?e:[e];let{length:i}=e,o,c,a={};for(let v=0;v<i;v++){o=e[v];let b;if(c=o,!XTt(o)&&(c=wB[(b=String(o)).toLowerCase()],c===void 0))throw new Vt(`Unknown adapter '${b}'`);if(c&&(Me.isFunction(c)||(c=c.get(t))))break;a[b||"#"+v]=c}if(!c){let v=Object.entries(a).map(([q,M])=>`adapter ${q} `+(M===!1?"is not supported by the environment":"is not available in the build")),b=i?v.length>1?`since :
`+v.map(zye).join(`
`):" "+zye(v[0]):"as no adapter specified";throw new Vt("There is no suitable adapter to dispatch the request "+b,"ERR_NOT_SUPPORT")}return c},adapters:wB};function SB(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xl(null,e)}function OE(e){return SB(e),e.headers=sn.from(e.headers),e.data=k0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),RE.getAdapter(e.adapter||Vm.adapter,e)(e).then(function(o){return SB(e),o.data=k0.call(e,e.transformResponse,o),o.headers=sn.from(o.headers),o},function(o){return D0(o)||(SB(e),o&&o.response&&(o.response.data=k0.call(e,e.transformResponse,o.response),o.response.headers=sn.from(o.response.headers))),Promise.reject(o)})}f();f();var kE="1.12.2";var DE={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{DE[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});var Nye={};DE.transitional=function(t,i,o){function c(a,v){return"[Axios v"+kE+"] Transitional option '"+a+"'"+v+(o?". "+o:"")}return(a,v,b)=>{if(t===!1)throw new Vt(c(v," has been removed"+(i?" in "+i:"")),Vt.ERR_DEPRECATED);return i&&!Nye[v]&&(Nye[v]=!0,console.warn(c(v," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(a,v,b):!0}};DE.spelling=function(t){return(i,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function YTt(e,t,i){if(typeof e!="object")throw new Vt("options must be an object",Vt.ERR_BAD_OPTION_VALUE);let o=Object.keys(e),c=o.length;for(;c-->0;){let a=o[c],v=t[a];if(v){let b=e[a],q=b===void 0||v(b,a,e);if(q!==!0)throw new Vt("option "+a+" must be "+q,Vt.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Vt("Unknown option "+a,Vt.ERR_BAD_OPTION)}}var z0={assertOptions:YTt,validators:DE};var bl=z0.validators,Wm=class{constructor(t){this.defaults=t||{},this.interceptors={request:new lB,response:new lB}}request(t,i){return br(this,null,function*(){try{return yield this._request(t,i)}catch(o){if(o instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;let a=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?a&&!String(o.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+a):o.stack=a}catch(v){}}throw o}})}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=Ms(this.defaults,i);let{transitional:o,paramsSerializer:c,headers:a}=i;o!==void 0&&z0.assertOptions(o,{silentJSONParsing:bl.transitional(bl.boolean),forcedJSONParsing:bl.transitional(bl.boolean),clarifyTimeoutError:bl.transitional(bl.boolean)},!1),c!=null&&(Me.isFunction(c)?i.paramsSerializer={serialize:c}:z0.assertOptions(c,{encode:bl.function,serialize:bl.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),z0.assertOptions(i,{baseUrl:bl.spelling("baseURL"),withXsrfToken:bl.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let v=a&&Me.merge(a.common,a[i.method]);a&&Me.forEach(["delete","get","head","post","put","patch","common"],ue=>{delete a[ue]}),i.headers=sn.concat(v,a);let b=[],q=!0;this.interceptors.request.forEach(function(fe){typeof fe.runWhen=="function"&&fe.runWhen(i)===!1||(q=q&&fe.synchronous,b.unshift(fe.fulfilled,fe.rejected))});let M=[];this.interceptors.response.forEach(function(fe){M.push(fe.fulfilled,fe.rejected)});let O,D=0,U;if(!q){let ue=[OE.bind(this),void 0];for(ue.unshift(...b),ue.push(...M),U=ue.length,O=Promise.resolve(i);D<U;)O=O.then(ue[D++],ue[D++]);return O}U=b.length;let ne=i;for(;D<U;){let ue=b[D++],fe=b[D++];try{ne=ue(ne)}catch(H){fe.call(this,H);break}}try{O=OE.call(this,ne)}catch(ue){return Promise.reject(ue)}for(D=0,U=M.length;D<U;)O=O.then(M[D++],M[D++]);return O}getUri(t){t=Ms(this.defaults,t);let i=F0(t.baseURL,t.url,t.allowAbsoluteUrls);return R0(i,t.params,t.paramsSerializer)}};Me.forEach(["delete","get","head","options"],function(t){Wm.prototype[t]=function(i,o){return this.request(Ms(o||{},{method:t,url:i,data:(o||{}).data}))}});Me.forEach(["post","put","patch"],function(t){function i(o){return function(a,v,b){return this.request(Ms(b||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:a,data:v}))}}Wm.prototype[t]=i(),Wm.prototype[t+"Form"]=i(!0)});var N0=Wm;f();var TB=class e{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(a){i=a});let o=this;this.promise.then(c=>{if(!o._listeners)return;let a=o._listeners.length;for(;a-->0;)o._listeners[a](c);o._listeners=null}),this.promise.then=c=>{let a,v=new Promise(b=>{o.subscribe(b),a=b}).then(c);return v.cancel=function(){o.unsubscribe(a)},v},t(function(a,v,b){o.reason||(o.reason=new xl(a,v,b),i(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){let t=new AbortController,i=o=>{t.abort(o)};return this.subscribe(i),t.signal.unsubscribe=()=>this.unsubscribe(i),t.signal}static source(){let t;return{token:new e(function(c){t=c}),cancel:t}}},Bye=TB;f();function EB(e){return function(i){return e.apply(null,i)}}f();function AB(e){return Me.isObject(e)&&e.isAxiosError===!0}f();var qB={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qB).forEach(([e,t])=>{qB[t]=e});var jye=qB;function Uye(e){let t=new N0(e),i=I0(N0.prototype.request,t);return Me.extend(i,N0.prototype,t,{allOwnKeys:!0}),Me.extend(i,t,null,{allOwnKeys:!0}),i.create=function(c){return Uye(Ms(e,c))},i}var Ki=Uye(Vm);Ki.Axios=N0;Ki.CanceledError=xl;Ki.CancelToken=Bye;Ki.isCancel=D0;Ki.VERSION=kE;Ki.toFormData=ih;Ki.AxiosError=Vt;Ki.Cancel=Ki.CanceledError;Ki.all=function(t){return Promise.all(t)};Ki.spread=EB;Ki.isAxiosError=AB;Ki.mergeConfig=Ms;Ki.AxiosHeaders=sn;Ki.formToJSON=e=>IE(Me.isHTMLForm(e)?new FormData(e):e);Ki.getAdapter=RE.getAdapter;Ki.HttpStatusCode=jye;Ki.default=Ki;var LE=Ki;var{Axios:Smr,AxiosError:Tmr,CanceledError:Emr,isCancel:Amr,CancelToken:qmr,VERSION:Imr,all:Pmr,Cancel:Cmr,isAxiosError:Mmr,spread:Rmr,toFormData:Omr,AxiosHeaders:kmr,HttpStatusCode:Dmr,formToJSON:Lmr,getAdapter:Fmr,mergeConfig:zmr}=LE;var JTt={EN:"en",DE:"de"},QTt=Zm(T.env.DEV_MODE_SECRET)&&T.env.DEV_MODE_SECRET!==""&&Zm(T.env.DEV_MODE_NAME)&&T.env.DEV_MODE_NAME!=="",FE=()=>({"Dev-Mode-Secret":T.env.DEV_MODE_SECRET,"Dev-Mode-Name":T.env.DEV_MODE_NAME}),Aa={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:JTt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},wl={axiosApiInstance:null,appendSettings(e){Aa=Object.assign({},Aa,e)},isDebug(){var e;return!!((e=T==null?void 0:T.env)!=null&&e.VKF_DEBUG)},getSettings(){return Aa},getBaseMaps(){return Aa.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Aa.MAPVIEW_PARAMS)},getLanguageDict(){return Aa.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Aa.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Aa.TERRAIN_TILES)},getUsername(){return Aa.USERNAME},isUserAuthenticated(){return Aa.USER_ISAUTHENTICATED===!0},updateSettings(e){Aa=e},_initAxiosApiInstance(){let e=Aa.API_GEOREFERENCE_BASEURL,t=Vye(e)&&e.length===0;if(!Zm(e)||t)throw new Error("The URL for the georeference service is not set.");let i=Object.assign({baseURL:e,withCredentials:!0},QTt?{headers:{get:FE(),post:FE(),put:FE(),delete:FE()}}:{});this.axiosApiInstance=LE.create(i)},getGeoreferenceApiClient(){return Zm(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=Aa.MARKER_URL;if(!Zm(e))throw new Error("The marker icon url is not set.");return{id:Aa.MARKER_IMAGE_ID,url:e}},getUserRole(){return Aa.USER_ROLE}};f();f();var _Et=_t(Qye(),1);f();f();f();f();f();f();f();var bEt=_t(iB(),1);function Zm(e){return e!=null}function Vye(e){return typeof e=="string"||e instanceof String}function fr(e){let t=wl.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let i=t[e];return i===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):i}function NE(e){let{onBack:t,mapId:i}=e;return Sl.default.createElement("div",{className:"upload-header"},Sl.default.createElement("div",{className:"back-btn-container"},Sl.default.createElement("span",{className:"glyphicon glyphicon-chevron-left"}),Sl.default.createElement("button",{className:"back-btn body1",onClick:t},"Back")),i==null?Sl.default.createElement("h4",null,fr("uploadmap-title")):Sl.default.createElement(Sl.default.Fragment,null,Sl.default.createElement("h4",null,fr("uploadmap-title-update")),Sl.default.createElement("span",null,"ID: ",i)))}NE.propTypes={onBack:PB.default.func.isRequired,mapId:PB.default.string};f();var Yo=_t(Pr(),1),j0=_t(ki(),1);var BE={name:"file",id:"file-upload",accept:"image/tiff"};function jE(e){let{mapMetadata:t,isPending:i,onFileSelect:o,reloadKey:c}=e,a=b=>{if(b.preventDefault(),b.target.files){let q=b.target.files[0];o(q)}};return Yo.default.createElement("div",{className:"upload-file-container"},Yo.default.createElement("div",{className:"upload-section",onClick:b=>{b.preventDefault(),b.stopPropagation(),document.getElementById(BE.id).click()}},t.link_thumb_mid!==null&&i===!1&&Yo.default.createElement("img",{src:`${t.link_thumb_mid}?${c}`,alt:"Thumbnail",className:"thumbnail-img"}),i===!0&&Yo.default.createElement("div",{className:"image-selected"},Yo.default.createElement("label",{className:"body1"},fr("uploadfile-label"))),t.link_thumb_mid===null&&i===!1&&Yo.default.createElement("div",{className:"select-image"},Yo.default.createElement("div",null,Yo.default.createElement("span",{className:"glyphicon glyphicon-picture"})),Yo.default.createElement("label",{className:"body1",htmlFor:BE.id},fr("uploadmap-upload-file")))),Yo.default.createElement("div",{className:"input-file"},Yo.default.createElement("input",{type:"file",id:BE.id,accept:BE.accept,onChange:a})))}jE.propTypes={isPending:j0.default.bool,mapMetadata:j0.default.object,onFileSelect:j0.default.func,reloadKey:j0.default.number};f();var ia={description:{name:"description",label:"description",multiline:!0,id:"description",validation:{required:{value:!1,message:"required"}}},map_type:{name:"map_type",label:"map_type",id:"map_type",validation:{required:{value:!0,message:"required"}},options:[{label:"\xC4quidistantenkarte",value:"ae"},{label:"Andere Karten",value:"ak"},{label:"Stadtpl\xE4ne",value:"cm"},{label:"Geologische Karten",value:"gl"},{label:"Meilenbl\xE4tter",value:"mb"},{label:"Messtischbl\xE4tter",value:"mtb"},{label:"Topographische Karte des Deutschen Reiches",value:"tk"},{label:"Topographische Karten",value:"tkx"}]},license:{name:"license",label:"license",type:"text",id:"license",validation:{required:{value:!0,message:"required"}}},map_scale:{name:"map_scale",label:"map_scale",type:"number",id:"map_scale",validation:{required:{value:!0,message:"required"}}},measures:{name:"measures",label:"measures",type:"text",id:"measures",validation:{required:{value:!1,message:"required"}}},owner:{name:"owner",label:"owner",type:"text",id:"owner",validation:{required:{value:!1,message:"required"}}},permalink:{name:"permalink",label:"permalink",type:"text",id:"permalink",validation:{required:{value:!1,message:"required"}}},ppn:{name:"ppn",label:"ppn",type:"text",id:"ppn",validation:{required:{value:!1,message:"required"}}},technic:{name:"technic",label:"technic",type:"text",id:"technic",validation:{required:{value:!1,message:"required"}}},time_of_publication:{name:"time_of_publication",label:"time_of_publication",type:"number",id:"time_of_publication",validation:{required:{value:!0,message:"required"},maxLength:{value:4,message:"Please enter a valid year"}}},allow_download:{name:"allow_download",label:"allow_download",id:"allow_download",validation:{required:{value:!1,message:"required"}},options:[{label:"true",value:!0},{label:"false",value:!1}]},title:{name:"title",label:"title",type:"text",id:"title",validation:{required:{value:!0,message:"required"}}},title_serie:{name:"title_serie",label:"title_serie",type:"text",id:"title_serie",validation:{required:{value:!1,message:"required"}}},title_short:{name:"title_short",label:"title_short",type:"text",id:"title_short",validation:{required:{value:!0,message:"required"}}},type:{name:"type",label:"type",type:"text",id:"type",validation:{required:{value:!1,message:"required"}}}};f();var Ud=_t(Pr(),1);f();f();var $B=_t(o0e(),1);function Br(){return Br=$B.default?$B.default.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)({}).hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Br.apply(null,arguments)}f();var P0e=_t(y0e(),1);f();var ZB=_t(I0e(),1);function YE(e,t){return YE=ZB.default?ZB.default.bind():function(i,o){return i.__proto__=o,i},YE(e,t)}function aa(e,t){e.prototype=(0,P0e.default)(t.prototype),e.prototype.constructor=e,YE(e,t)}f();function Ha(e,t){if(e==null)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;i[o]=e[o]}return i}f();var V0e=_t(HB());var $0e=_t(M0e()),QE=_t(ki());f();var Km={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},XB={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};function YB(e){return function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var c=i[i.length-1];return typeof c=="function"?e.apply(void 0,i):function(a){return e.apply(void 0,i.concat([a]))}}}function Tl(e,t){var i=(e.bsClass||"").trim();return i==null&&(0,$0e.default)(!1),i+(t?"-"+t:"")}var Jo=YB(function(e,t){var i=t.propTypes||(t.propTypes={}),o=t.defaultProps||(t.defaultProps={});return i.bsClass=QE.default.string,o.bsClass=e,t}),x_r=YB(function(e,t,i){typeof t!="string"&&(i=t,t=void 0);var o=i.STYLES||[],c=i.propTypes||{};e.forEach(function(b){o.indexOf(b)===-1&&o.push(b)});var a=QE.default.oneOf(o);if(i.STYLES=o,a._values=o,i.propTypes=Br({},c,{bsStyle:a}),t!==void 0){var v=i.defaultProps||(i.defaultProps={});v.bsStyle=t}return i}),eA=YB(function(e,t,i){typeof t!="string"&&(i=t,t=void 0);var o=i.SIZES||[],c=i.propTypes||{};e.forEach(function(b){o.indexOf(b)===-1&&o.push(b)});var a=[];o.forEach(function(b){var q=XB[b];q&&q!==b&&a.push(q),a.push(b)});var v=QE.default.oneOf(a);return v._values=a,i.SIZES=o,i.propTypes=Br({},c,{bsSize:v}),t!==void 0&&(i.defaultProps||(i.defaultProps={}),i.defaultProps.bsSize=t),i});function El(e){var t,i=(t={},t[Tl(e)]=!0,t);if(e.bsSize){var o=XB[e.bsSize]||e.bsSize;i[Tl(e,o)]=!0}return e.bsStyle&&(i[Tl(e,e.bsStyle)]=!0),i}function RAt(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function OAt(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function Al(e){var t={};return(0,V0e.default)(e).forEach(function(i){var o=i[0],c=i[1];OAt(o)||(t[o]=c)}),[RAt(e),t]}f();var QB=_t(ki()),Z0=_t(Pr()),DAt={label:QB.default.string.isRequired,onClick:QB.default.func},LAt={label:"Close"},e3=function(e){aa(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.label,v=c.onClick;return Z0.default.createElement("button",{type:"button",className:"close",onClick:v},Z0.default.createElement("span",{"aria-hidden":"true"},"\xD7"),Z0.default.createElement("span",{className:"sr-only"},a))},t}(Z0.default.Component);e3.propTypes=DAt;e3.defaultProps=LAt;var W0e=e3;f();function Rs(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}f();function KAt(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(function(o){return o!=null}).reduce(function(o,c){if(typeof c!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return o===null?c:function(){for(var v=arguments.length,b=new Array(v),q=0;q<v;q++)b[q]=arguments[q];o.apply(this,b),c.apply(this,b)}},null)}var K0=KAt;f();var Mxe=_t(HB());function p3(e,t){var i=t.propTypes,o={},c={};return(0,Mxe.default)(e).forEach(function(a){var v=a[0],b=a[1];i[v]?o[v]=b:c[v]=b}),[o,c]}f();var Rxe=_t(ah()),AA=_t(Pr()),Qo=_t(ki()),Qm=_t(Exe()),EA,Gqt={in:Qo.default.bool,mountOnEnter:Qo.default.bool,unmountOnExit:Qo.default.bool,appear:Qo.default.bool,timeout:Qo.default.number,onEnter:Qo.default.func,onEntering:Qo.default.func,onEntered:Qo.default.func,onExit:Qo.default.func,onExiting:Qo.default.func,onExited:Qo.default.func},Wqt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Zqt=(EA={},EA[Qm.ENTERING]="in",EA[Qm.ENTERED]="in",EA),m3=function(e){aa(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.className,v=c.children,b=Ha(c,["className","children"]);return AA.default.createElement(Qm.default,b,function(q,M){return AA.default.cloneElement(v,Br({},M,{className:(0,Rxe.default)("fade",a,v.props.className,Zqt[q])}))})},t}(AA.default.Component);m3.propTypes=Gqt;m3.defaultProps=Wqt;var v3=m3;f();var B3=_t(ah()),j3=_t(Hxe()),m1e=_t(Q0()),v1e=_t(ql()),U3=_t(_3()),rv=_t(Pr()),xn=_t(ki()),g1e=_t(au()),iv=_t(n1e()),y1e=_t(S3()),_1e=_t(Hm());f();var a1e=_t(ah()),O3=_t(Pr()),o1e=_t(Hm());var yCt={componentClass:o1e.default},_Ct={componentClass:"div"},k3=function(e){aa(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.componentClass,v=c.className,b=Ha(c,["componentClass","className"]),q=Al(b),M=q[0],O=q[1],D=El(M);return O3.default.createElement(a,Br({},O,{className:(0,a1e.default)(v,D)}))},t}(O3.default.Component);k3.propTypes=yCt;k3.defaultProps=_Ct;var ax=Jo("modal-body",k3);f();var D3=_t(ah()),ox=_t(Pr()),s1e=_t(ki());var xCt={dialogClassName:s1e.default.string},l1e=function(e){aa(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c,a=this.props,v=a.dialogClassName,b=a.className,q=a.style,M=a.children,O=a.onMouseDownDialog,D=Ha(a,["dialogClassName","className","style","children","onMouseDownDialog"]),U=Al(D),ne=U[0],ue=U[1],fe=Tl(ne),H=Br({display:"block"},q),J=Br({},El(ne),(c={},c[fe]=!1,c[Tl(ne,"dialog")]=!0,c));return ox.default.createElement("div",Br({},ue,{tabIndex:"-1",role:"dialog",style:H,className:(0,D3.default)(b,fe)}),ox.default.createElement("div",{className:(0,D3.default)(v,J),onMouseDown:O},ox.default.createElement("div",{className:Tl(ne,"content"),role:"document"},M)))},t}(ox.default.Component);l1e.propTypes=xCt;var eq=Jo("modal",eA([Km.LARGE,Km.SMALL],l1e));f();var u1e=_t(ah()),L3=_t(Pr()),c1e=_t(Hm());var bCt={componentClass:c1e.default},wCt={componentClass:"div"},F3=function(e){aa(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.componentClass,v=c.className,b=Ha(c,["componentClass","className"]),q=Al(b),M=q[0],O=q[1],D=El(M);return L3.default.createElement(a,Br({},O,{className:(0,u1e.default)(v,D)}))},t}(L3.default.Component);F3.propTypes=bCt;F3.defaultProps=wCt;var sx=Jo("modal-footer",F3);f();var h1e=_t(ah()),tv=_t(ki()),tq=_t(Pr());var SCt={closeLabel:tv.default.string,closeButton:tv.default.bool,onHide:tv.default.func},TCt={closeLabel:"Close",closeButton:!1},ECt={$bs_modal:tv.default.shape({onHide:tv.default.func})},rq=function(e){aa(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.closeLabel,v=c.closeButton,b=c.onHide,q=c.className,M=c.children,O=Ha(c,["closeLabel","closeButton","onHide","className","children"]),D=this.context.$bs_modal,U=Al(O),ne=U[0],ue=U[1],fe=El(ne);return tq.default.createElement("div",Br({},ue,{className:(0,h1e.default)(q,fe)}),v&&tq.default.createElement(W0e,{label:a,onClick:K0(D&&D.onHide,b)}),M)},t}(tq.default.Component);rq.propTypes=SCt;rq.defaultProps=TCt;rq.contextTypes=ECt;var lx=Jo("modal-header",rq);f();var d1e=_t(ah()),z3=_t(Pr()),f1e=_t(Hm());var ACt={componentClass:f1e.default},qCt={componentClass:"h4"},N3=function(e){aa(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;return i.render=function(){var c=this.props,a=c.componentClass,v=c.className,b=Ha(c,["componentClass","className"]),q=Al(b),M=q[0],O=q[1],D=El(M);return z3.default.createElement(a,Br({},O,{className:(0,d1e.default)(v,D)}))},t}(z3.default.Component);N3.propTypes=ACt;N3.defaultProps=qCt;var p1e=Jo("modal-title",N3);var ICt=Br({},iv.default.propTypes,eq.propTypes,{backdrop:xn.default.oneOf(["static",!0,!1]),backdropClassName:xn.default.string,keyboard:xn.default.bool,animation:xn.default.bool,dialogComponentClass:_1e.default,autoFocus:xn.default.bool,enforceFocus:xn.default.bool,restoreFocus:xn.default.bool,show:xn.default.bool,onHide:xn.default.func,onEnter:xn.default.func,onEntering:xn.default.func,onEntered:xn.default.func,onExit:xn.default.func,onExiting:xn.default.func,onExited:xn.default.func,container:iv.default.propTypes.container}),PCt=Br({},iv.default.defaultProps,{animation:!0,dialogComponentClass:eq}),CCt={$bs_modal:xn.default.shape({onHide:xn.default.func})};function MCt(e){return rv.default.createElement(v3,Br({},e,{timeout:bo.TRANSITION_DURATION}))}function RCt(e){return rv.default.createElement(v3,Br({},e,{timeout:bo.BACKDROP_TRANSITION_DURATION}))}var bo=function(e){aa(t,e);function t(o,c){var a;return a=e.call(this,o,c)||this,a.handleDialogBackdropMouseDown=function(){a._waitingForMouseUp=!0},a.handleMouseUp=function(v){var b=a._modal.getDialogElement();a._waitingForMouseUp&&v.target===b&&(a._ignoreBackdropClick=!0),a._waitingForMouseUp=!1},a.handleEntering=a.handleEntering.bind(Rs(Rs(a))),a.handleExited=a.handleExited.bind(Rs(Rs(a))),a.handleWindowResize=a.handleWindowResize.bind(Rs(Rs(a))),a.handleDialogClick=a.handleDialogClick.bind(Rs(Rs(a))),a.setModalRef=a.setModalRef.bind(Rs(Rs(a))),a.state={style:{}},a}var i=t.prototype;return i.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},i.componentWillUnmount=function(){this.handleExited()},i.setModalRef=function(c){this._modal=c},i.handleDialogClick=function(c){if(this._ignoreBackdropClick||c.target!==c.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},i.handleEntering=function(){j3.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},i.handleExited=function(){j3.default.off(window,"resize",this.handleWindowResize)},i.handleWindowResize=function(){this.updateStyle()},i.updateStyle=function(){if(v1e.default){var c=this._modal.getDialogElement(),a=c.scrollHeight,v=(0,m1e.default)(c),b=(0,y1e.default)(g1e.default.findDOMNode(this.props.container||v.body)),q=a>v.documentElement.clientHeight;this.setState({style:{paddingRight:b&&!q?(0,U3.default)():void 0,paddingLeft:!b&&q?(0,U3.default)():void 0}})}},i.render=function(){var c=this.props,a=c.backdrop,v=c.backdropClassName,b=c.animation,q=c.show,M=c.dialogComponentClass,O=c.className,D=c.style,U=c.children,ne=c.onEntering,ue=c.onExited,fe=Ha(c,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),H=p3(fe,iv.default),J=H[0],re=H[1],xe=q&&!b&&"in";return rv.default.createElement(iv.default,Br({},J,{ref:this.setModalRef,show:q,containerClassName:Tl(fe,"open"),transition:b?MCt:void 0,backdrop:a,backdropTransition:b?RCt:void 0,backdropClassName:(0,B3.default)(Tl(fe,"backdrop"),v,xe),onEntering:K0(ne,this.handleEntering),onExited:K0(ue,this.handleExited),onMouseUp:this.handleMouseUp}),rv.default.createElement(M,Br({},re,{style:Br({},this.state.style,D),className:(0,B3.default)(O,xe),onClick:a===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),U))},t}(rv.default.Component);bo.propTypes=ICt;bo.defaultProps=PCt;bo.childContextTypes=CCt;bo.Body=ax;bo.Header=lx;bo.Title=p1e;bo.Footer=sx;bo.Dialog=eq;bo.TRANSITION_DURATION=300;bo.BACKDROP_TRANSITION_DURATION=150;var V3=Jo("modal",eA([Km.LARGE,Km.SMALL],bo));var ux=_t(ki(),1);var x1e=({show:e,onClose:t,onDelete:i,title:o})=>Ud.default.createElement(V3,{show:e,onHide:t,className:"vkf-delete-dialog"},Ud.default.createElement(lx,{closeButton:!0},o),Ud.default.createElement(ax,null,fr("deletemodal-body")),Ud.default.createElement(sx,null,Ud.default.createElement("button",{className:"btn btn-default",type:"button",onClick:t},fr("deletemodal-cancel-btn")),Ud.default.createElement("button",{className:"btn btn-primary",type:"button",onClick:i},fr("deletemodal-delete-btn"))));x1e.propTypes={show:ux.default.bool,onClose:ux.default.func,onDelete:ux.default.func,title:ux.default.string};var b1e=x1e;f();function iq(e){let t=e.response||!1,i=e.response&&e.response.status<=404;return!(t&&i)}function OCt(e){let t={};return Object.keys(zm()).forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t}function w1e(e){let t={};return Object.keys(e).forEach(i=>{e[i]!==null&&(t[i]=e[i])}),t}function S1e(e){return br(this,null,function*(){try{let t=wl.getGeoreferenceApiClient(),i=`/maps/${e}`;return yield t.delete(i),Eu.ok(!0)}catch(t){return iq(t)&&console.error(t),Eu.error(t)}})}function nq(e){return br(this,null,function*(){try{let t=wl.getGeoreferenceApiClient(),i=`/maps/${e}`,o=yield t.get(i);if(o.data.map_id!==e){let a="The map id from the server does not match the given map id.";throw new Error(a)}let c=OCt(o.data);return Eu.ok(c)}catch(t){return iq(t)&&console.error(t),Eu.error(t)}})}function T1e(e,t){return br(this,null,function*(){try{let i=wl.getGeoreferenceApiClient(),o=new FormData;if(e!==void 0&&t!==null)o.append("metadata",JSON.stringify(w1e(e))),o.append("file",t);else{let q="Either the map metadata or the map image file is not set.";throw new Error(q)}let c={headers:{"Content-Type":"multipart/form-data"}},b=""+(yield i.post("/maps/",o,c)).data.map_id;return Eu.ok(b)}catch(i){return iq(i)&&console.error(i),Eu.error(i)}})}function E1e(e,t,i){return br(this,null,function*(){try{let o=wl.getGeoreferenceApiClient(),c=new FormData;t!==null&&c.append("metadata",JSON.stringify(w1e(t))),i!==null&&c.append("file",i);let a={headers:{"Content-Type":"multipart/form-data"}},v=`/maps/${e}`,b=yield o.post(v,c,a);return Eu.ok(b.data.map_id)}catch(o){return iq(o)&&console.error(o),Eu.error(o)}})}function aq(e){let{mapId:t,mapMetadata:i,onBack:o,onRefresh:c}=e,[a,v]=(0,Lt.useState)(null),[b,q]=(0,Lt.useState)(!1),[M,O]=(0,Lt.useState)(null),[D,U]=(0,Lt.useState)(!1),[ne,ue]=(0,Lt.useState)(!1),[fe,H]=(0,Lt.useState)(null),[J,re]=(0,Lt.useState)(Date.now()),xe=Gge({defaultValues:en(rt({},i),{time_of_publication:i?i.time_of_publication.slice(0,4):""})}),Ae=(0,Lt.useCallback)(()=>{o()},[o]),Ge=Pt=>{Pt!==null&&(v(Pt),q(!1))},Ne=xe.handleSubmit(Pt=>br(null,null,function*(){let Et=Qge(Pt);if(ue(!0),q(!1),a===null&&t===null){q(!0),ue(!1);return}let Sr=eye(Et,i);if(Sr&&a!==null&&t===null){let ur=yield T1e(Et,a),Dt=ur.data;Dt!==null?O(Dt):H(ur.httpErrorStatusCode),ue(!1);return}else if(t!==null&&Sr||a!==null){let ur=yield E1e(t,Et,a),Dt=ur.data;Dt!==null?O(Dt):H(ur.httpErrorStatusCode),ue(!1);return}else console.log("Currently there are not action to perform.");xe.reset()})),Ye=(0,Lt.useCallback)(()=>br(null,null,function*(){let Pt=yield nq(M||t),Et=Pt.data;Et!==null?(c({mapId:M||t,metadata:Et}),O(null),v(null),H(null),re(Date.now())):H(Pt.httpErrorStatusCode)}),[M]),ct=(0,Lt.useCallback)(()=>br(null,null,function*(){let Pt=yield S1e(t);Pt.data===!0?o():H(Pt.httpErrorStatusCode)}),[t]),ht=()=>{U(!0)},pr=()=>{U(!1)},Lr=()=>{ct().then(()=>{U(!1)})};return Lt.default.createElement("div",{className:"container upload-view"},Lt.default.createElement("div",{className:"upload-header-container"},Lt.default.createElement(NE,{mapId:t||M,onBack:Ae}),M!==null&&fe===null&&Lt.default.createElement("p",{className:"bg-success"},fr("uploadmap-success")),fe!==null&&Lt.default.createElement("div",{className:"error-messages"},fe===401&&Lt.default.createElement("p",{className:"bg-danger"},fr("common-errors-http-401")),fe===403&&Lt.default.createElement("p",{className:"bg-danger"},fr("common-errors-http-403")),fe===404&&Lt.default.createElement("p",{className:"bg-danger"},fr("uploadmap-errors-refresh-http-400")),fe>404&&Lt.default.createElement("p",{className:"bg-danger"},fr("common-errors-unexpected"))),b&&Lt.default.createElement("p",{className:"bg-danger"},fr("common-errors-upload-file"))),Lt.default.createElement("div",{className:`upload-body-container ${M!==null?"active":""}`},Lt.default.createElement(zge,rt({},xe),Lt.default.createElement("form",{className:"upload-form",id:"upload-form",onSubmit:Pt=>Pt.preventDefault()},Lt.default.createElement("div",{className:"left-container"},Lt.default.createElement(ra,rt({},ia.description)),Lt.default.createElement(ra,rt({},ia.license)),Lt.default.createElement(ra,rt({},ia.map_type)),Lt.default.createElement(ra,rt({},ia.map_scale)),Lt.default.createElement(ra,rt({},ia.measures)),Lt.default.createElement(ra,rt({},ia.owner)),Lt.default.createElement(ra,rt({},ia.permalink)),Lt.default.createElement(ra,rt({},ia.ppn)),Lt.default.createElement(ra,rt({},ia.technic)),Lt.default.createElement(ra,rt({},ia.time_of_publication)),Lt.default.createElement(ra,rt({},ia.allow_download)),Lt.default.createElement(ra,rt({},ia.title)),Lt.default.createElement(ra,rt({},ia.title_serie)),Lt.default.createElement(ra,rt({},ia.title_short)),Lt.default.createElement(ra,rt({},ia.type))),Lt.default.createElement("div",{className:"right-container"},Lt.default.createElement(jE,{mapMetadata:i,onFileSelect:Ge,isPending:a!==null,reloadKey:J}),Lt.default.createElement("div",null,Lt.default.createElement("div",{className:"action-buttons"},Lt.default.createElement("button",{className:"btn btn-default",type:"button",disabled:t===null,onClick:ht},fr("uploadmap-delete-btn")),Lt.default.createElement("button",{className:"btn btn-primary",type:"button",disabled:M===null&&t===null,onClick:Ye},"Refresh"),Lt.default.createElement("button",{className:"btn btn-primary has-spinner",type:"button",disabled:M!==null&&t===null,title:M!==null&&t===null?fr("uploadmap-save-btn-disabled-title"):void 0,onClick:Ne},ne===!0&&Lt.default.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}),fr("uploadmap-save-btn")))))))),D&&Lt.default.createElement(b1e,{show:D,onClose:pr,onDelete:Lr,title:i.title}))}aq.propTypes={onBack:nv.default.func.isRequired,onRefresh:nv.default.func.isRequired,mapId:nv.default.oneOfType([nv.default.string]),mapMetadata:nv.default.object};f();var ci=_t(Pr(),1),W3=_t(ki(),1),M1e=_t(P1e(),1);f();var Os=_t(Pr(),1),C1e=_t(ki(),1);function oq(e){let{onEnterId:t}=e,[i,o]=(0,Os.useState)(""),c="input-field-search",a=(0,Os.useCallback)(b=>{o(b.target.value)},[o]),v=()=>{let b=i.trim();t(b),o(b)};return Os.default.createElement("div",{className:"search-input-field"},Os.default.createElement("label",{htmlFor:c,className:"body1"},fr("searchmap-subtitle")),Os.default.createElement("div",{className:"input-wrapper"},Os.default.createElement("input",{type:"text",className:"input-field body2",id:c,placeholder:fr("searchmap-placeholder"),value:i,onChange:a,onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),v())}}),Os.default.createElement("button",{type:"button",className:"search-button",onClick:()=>v()},Os.default.createElement("span",{className:"glyphicon glyphicon-search"}))))}oq.propTypes={onEnterId:C1e.default.func.isRequired};f();var Vd=_t(Pr(),1),cx=_t(ki(),1);function sq(e){let{mapId:t,mapMetadata:i,onClick:o}=e;return Vd.default.createElement("li",{className:"map-entry-item",onClick:o},Vd.default.createElement("div",{className:"image-container"},Vd.default.createElement("img",{src:i.link_thumb_small,alt:"Map Image",loading:"lazy"})),Vd.default.createElement("div",{className:"metadata-container"},Vd.default.createElement("p",{className:"body2"},i.title_short),Vd.default.createElement("p",{className:"body1"},t)))}sq.propTypes={mapId:cx.default.oneOfType([cx.default.string]),mapMetadata:cx.default.object,onClick:cx.default.func.isRequired};function lq(e){let{onSelectMap:t,onStartUpload:i}=e,[o,c]=(0,ci.useState)({mapId:null,metadata:null}),[a,v]=(0,ci.useState)(null),b=(0,M1e.default)(q=>br(null,null,function*(){let M=yield nq(q),O=M.data;O!==null?(c({mapId:q,metadata:O}),v(null)):(c({mapId:null,metadata:null}),v(M.httpErrorStatusCode))}),300);return ci.default.createElement("div",{className:"container search-view"},ci.default.createElement("div",{className:"content-header"},ci.default.createElement("h3",null,fr("searchmap-title")),ci.default.createElement("button",{type:"button",className:"btn btn-primary upload-button",onClick:()=>i()},fr("searchmap-upload-button"))),ci.default.createElement("div",{className:"content-body"},ci.default.createElement(oq,{onEnterId:b}),o.mapId!==null&&ci.default.createElement("ul",{className:"map-list"},ci.default.createElement(sq,{mapId:o.mapId,mapMetadata:o.metadata,onClick:()=>t(o)})),a!==null&&ci.default.createElement("div",{className:"not-found body1"},ci.default.createElement("p",null,fr("uploadmap-p")),ci.default.createElement("ul",{className:"no-results"},a===400&&ci.default.createElement("li",null,fr("searchmap-errors-http-400")),a===401&&ci.default.createElement("li",null,fr("common-errors-http-401")),a===403&&ci.default.createElement("li",null,fr("common-errors-http-403")),a===404&&ci.default.createElement(ci.default.Fragment,null,ci.default.createElement("li",null,fr("uploadmap-li1")),ci.default.createElement("li",null,fr("uploadmap-li2")),ci.default.createElement("li",null,fr("uploadmap-li3"))),a>404&&ci.default.createElement("li",null,fr("common-errors-unexpected"))))))}lq.propTypes={onSelectMap:W3.default.func.isRequired,onStartUpload:W3.default.func.isRequired};var av={SEARCH:"search",UPLOAD:"upload"},YCt=()=>{let[e,t]=(0,$d.useState)(av.SEARCH),[i,o]=(0,$d.useState)({mapId:null,metadata:zm()}),c=b=>{o(b),t(av.UPLOAD)},a=()=>{o({mapId:null,metadata:zm()}),t(av.UPLOAD)},v=()=>{t(av.SEARCH),o({mapId:null,metadata:zm()})};return $d.default.createElement("div",{className:"vkf-plugin-upload-map"},e===av.SEARCH&&$d.default.createElement(lq,{onSelectMap:c,onStartUpload:a}),e===av.UPLOAD&&$d.default.createElement(aq,{mapId:i.mapId,mapMetadata:i.metadata,onBack:v,onRefresh:c}))},R1e=YCt;var JCt=wl;function QCt(e){k1e.default.render(O1e.default.createElement(R1e,{id:e.id}),e)}return FSe(e2t)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/